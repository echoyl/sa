"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[571],{58376:function(kt,ne,l){l.r(ne),l.d(ne,{default:function(){return wt}});var Re=l(97857),d=l.n(Re),Me=l(15009),Y=l.n(Me),$e=l(99289),w=l.n($e),Ne=l(5574),L=l.n(Ne),ze=l(13769),ie=l.n(ze),se=l(33067),k=l(39615),O=l(38345),oe=l(1956),q=l(6110),A=l(7837),H=l(15746),re=l(72058),de=l(48096),J=l(71230),ue=l(87564),_=l(14726),ee=l(86250),j=l(67294),te=l(27076),V=l(30258),ve=l(19179),ce=l(63430),fe=l(79611),me=l(78677),pe=l(63678),ge=l(80652),Le=l(98165),Ae=l(7134),Oe=l(31418),He=l(27484),xe=l.n(He),Be=l(61503),ye=l(33237),he=l(17003),Q={pageHeaderContent:"pageHeaderContent___exWxI",avatar:"avatar___rptEO",content:"content___jBAzR",contentTitle:"contentTitle___TsVhT",extraContent:"extraContent___tNqx0",statItem:"statItem___jPU6u"},t=l(85893),je=function(e){var r=(0,A.useModel)("@@initialState"),a=r.initialState,i=a.currentUser,s=i&&Object.keys(i).length;return s?(0,t.jsxs)("div",{className:Q.pageHeaderContent,children:[(0,t.jsx)("div",{className:Q.avatar,children:(0,t.jsx)(Ae.C,{size:"large",src:i.avatar?i.avatar:a==null?void 0:a.settings.logo})}),(0,t.jsxs)("div",{className:Q.content,children:[(0,t.jsx)("div",{className:Q.contentTitle,children:(0,t.jsxs)(J.Z,{children:[(0,t.jsxs)(H.Z,{span:12,children:["\u4F60\u597D\uFF0C",i.realname?i.realname:i.name]}),(0,t.jsx)(H.Z,{span:12,style:{textAlign:"right"},children:(0,t.jsx)(Ue,{})})]})}),(0,t.jsxs)("div",{children:[i.rolename," ",(0,t.jsx)(_.ZP,{shape:"circle",type:"text",onClick:function(){var n;(n=e.flash)===null||n===void 0||n.call(e)},icon:(0,t.jsx)(Le.Z,{})})]})]})]}):(0,t.jsx)(ue.Z,{avatar:!0,paragraph:{rows:1},active:!0})},Ue=function(){var e=(0,j.useState)(xe()().format("YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss dddd")),r=L()(e,2),a=r[0],i=r[1],s=function o(){i(xe()().format("YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss dddd")),setTimeout(function(){return o()},1e3)};return setTimeout(function(){return s()},1e3),(0,t.jsx)(t.Fragment,{children:a})},Ye=function(e){var r=e.url,a=r===void 0?"":r,i=(0,j.useState)(),s=L()(i,2),o=s[0],n=s[1],m=Oe.Z.useApp(),g=m.message,P=(0,j.useState)(),D=L()(P,2),C=D[0],f=D[1],$=(0,A.useModel)("@@initialState"),p=$.initialState,N=function(){var v=w()(Y()().mark(function u(){var T,S,b,c=arguments;return Y()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return T=c.length>0&&c[0]!==void 0?c[0]:{},g.loading("\u52A0\u8F7D\u4E2D..."),y.next=4,se.ZP.get(a,{params:d()(d()({},C),T),then:function(){}});case 4:S=y.sent,b=S.data,g.destroy(),n(b);case 8:case"end":return y.stop()}},u)}));return function(){return v.apply(this,arguments)}}();(0,j.useEffect)(function(){N()},[]);var R=function(u){var T=u.type;if(T=="pie")return(0,t.jsx)(ce.Z,d()({height:280,appendPadding:10,data:u.data,radius:.9,label:{type:"inner",offset:"-30%",content:function(c){var F=c.percent;return"".concat((F*100).toFixed(0),"%")},style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]},u.config));if(T=="bar")return(0,t.jsx)(fe.Z,d()({xField:"x",yField:"y",data:u.data},u.config));if(T=="column")return(0,t.jsx)(me.Z,d()({xField:"x",yField:"y",data:u.data},u.config));if(T=="areaMap"){var S=d()({map:{type:"mapbox",style:"blank",center:[120.19382669582967,30.258134],zoom:13,pitch:0},source:{data:u.data,parser:{type:"geojson"}},autoFit:!0,color:{field:u.field,value:["#1A4397","#3165D1","#6296FE","#98B7F7","#DDE6F7","#F2F5FC"].reverse(),scale:{type:"quantile"}},style:{opacity:1,stroke:"#eee",lineWidth:.8,lineOpacity:1},state:{active:!0,select:{stroke:"blue",lineWidth:1.5,lineOpacity:.8}},label:{visible:!0,field:"name",style:{fill:"black",opacity:.5,fontSize:12,spacing:1,padding:[15,15]}},zoom:{position:"bottomright"},legend:{position:"bottomleft"}},u.config);return(0,t.jsx)("div",{style:{width:"100%",height:500},children:(0,t.jsx)(pe.Z,d()({},S))})}else return(0,t.jsx)(ge.Z,d()({smooth:!0,height:280,data:u.data,xField:"x",yField:"y",title:{visible:!0,text:u.title,style:{fontSize:14}},meta:{y:{alias:u.y}},label:{content:function(c){return c.y},position:"top",style:{fill:"#000000",opacity:.6}}},u.config))},M=function v(u,T){var S;return(0,t.jsx)(ee.Z,{vertical:!0,gap:"middle",children:u==null||(S=u.row)===null||S===void 0?void 0:S.map(function(b,c){var F;return(0,t.jsxs)(J.Z,{gutter:[16,16],children:[b.form?(0,t.jsx)(H.Z,{span:24,children:(0,t.jsx)(O.Z,{bodyStyle:{padding:0},children:(0,t.jsx)(oe.Z,{layoutType:"QueryFilter",columns:(0,ye.ab)({initRequest:!0,columns:b.form.columns,devEnable:!1}),initialValues:C||b.form.value,onFinish:function(I){N(I),console.log("onFinish",I)}})})},c+"form"):null,b==null||(F=b.col)===null||F===void 0?void 0:F.map(function(y,I){if(y.row){var z;return(0,t.jsx)(H.Z,{span:y.span?y.span:24/((z=b.col)===null||z===void 0?void 0:z.length),children:v(y,T)},I)}else if(y.tab){var E;return(0,t.jsx)(H.Z,{span:y.span?y.span:24/((E=b.col)===null||E===void 0?void 0:E.length),children:(0,t.jsx)(O.Z,{style:{borderTopRightRadius:0,borderTopLeftRadius:0},children:(0,t.jsx)(de.Z,{style:{background:"none"},tabBarStyle:{paddingLeft:0,marginBottom:0},items:y.tab.map(function(Z,K){return{key:K,label:Z.title,children:Z.row?v(Z,T):T(Z,K,{notitle:!0})}})})},I)},I)}else{var h;return(0,t.jsx)(H.Z,{span:y.span?y.span:24/((h=b.col)===null||h===void 0?void 0:h.length),children:T(y,I)},I)}})]},c)})})};return(0,t.jsx)(q._z,{title:!1,className:"saContainer",fixedHeader:te.P.fixedHeader,header:{breadcrumbRender:function(u,T){return(0,t.jsx)(V.Lr,{})}},children:(0,t.jsxs)(ee.Z,{vertical:!0,gap:"middle",children:[(0,t.jsx)(O.Z,{children:(0,t.jsx)(je,{flash:N})},"headcard"),M(o,function(v,u,T){return v.type=="card"?(0,t.jsx)(k.Z,{style:{height:"100%"},statistic:{title:v.title,value:v.value,prefix:v.prefix,suffix:v.suffix,description:v.href?(0,t.jsx)(A.Link,{to:v.href,style:{fontSize:12},children:"\u67E5\u770B\u66F4\u591A"}):""}},u+"card"):v.type=="table"?(0,t.jsx)(O.Z,{style:{height:"100%"},children:(0,t.jsx)(re.Z,d()({columns:(0,he.S)({initRequest:!0,columns:v.columns,initialState:p,devEnable:!1}),dataSource:v.data,title:function(){return v.title},rowKey:"id"},v.props))},u+"table"):v.type=="mapDots"?(0,t.jsx)(O.Z,{title:v.title,style:{height:"100%"},children:(0,t.jsx)(Be.O1,d()(d()({},v.props),{},{dots:v.data}))},u+"mapDots"):(0,t.jsx)(k.Z,{style:{height:"100%"},title:T!=null&&T.notitle?(0,t.jsx)("div",{style:{height:20}}):v.title,chart:R(v)},u+"chart")})]})})},Ve=Ye,B=l(54532),We=l(55647),ae=l(47666),Ke=function(e){var r=e.type,a=e.data,i=e.config;if(r=="pie")return(0,t.jsx)(ce.Z,d()({appendPadding:10,data:a,label:{type:"inner",offset:"-30%",content:function(n){var m=n.percent;return"".concat((m*100).toFixed(0),"%")},style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}],radius:.9,innerRadius:.6},i));if(r=="bar")return(0,t.jsx)(fe.Z,d()({data:a},i));if(r=="column")return(0,t.jsx)(me.Z,d()({data:a},i));if(r=="areaMap"){var s=d()({map:{type:"mapbox",style:"blank",center:[120.19382669582967,30.258134],zoom:13,pitch:0},source:{data:a,parser:{type:"geojson"}},autoFit:!0,color:{field:i.field,value:["#1A4397","#3165D1","#6296FE","#98B7F7","#DDE6F7","#F2F5FC"].reverse(),scale:{type:"quantile"}},style:{opacity:1,stroke:"#eee",lineWidth:.8,lineOpacity:1},state:{active:!0,select:{stroke:"blue",lineWidth:1.5,lineOpacity:.8}},label:{visible:!0,field:"name",style:{fill:"black",opacity:.5,fontSize:12,spacing:1,padding:[15,15]}},zoom:{position:"bottomright"},legend:{position:"bottomleft"}},i);return(0,t.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,t.jsx)(pe.Z,d()({},s))})}else return(0,t.jsx)(ge.Z,d()({data:a},i))},Ge=Ke,Je=l(68400),Qe=l.n(Je),Ce=l(51042),Te=l(52108),Pe=l(47389),Xe=l(26706),we=l(94261),ke=l(53682),qe=l(35322),U=l(42075),_e=l(93967),et=l.n(_e),tt=l(10792),at=l(61723),be=l(75686),Se=l(10399),lt=l(81644),nt=function(e){return[{valueType:"group",columns:[{title:"\u5B57\u6BB5",dataIndex:["defaultConfig","field"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}}]}]},it=nt,st=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","xField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","yField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}}]}]},ot=st,rt=function(e){return[{valueType:"group",columns:[{title:"\u524D\u7F00",dataIndex:["defaultConfig","prefix"],colProps:{span:12}},{title:"\u540E\u7F00",dataIndex:["defaultConfig","suffix"],colProps:{span:12}}]},{valueType:"group",columns:[{title:"\u94FE\u63A5",dataIndex:["defaultConfig","href"],colProps:{span:24}}]}]},dt=rt,ut=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","xField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","yField"],colProps:{span:12},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}}]}]},vt=ut,ct=l(21352),ft=function(e){return[{valueType:"group",columns:[{title:"\u5217\u8868\u5B57\u6BB5",dataIndex:["defaultConfig","columns"],colProps:{span:24},rowProps:{gutter:0},valueType:"formList",columns:[{valueType:"group",columns:[{title:"Label",dataIndex:"title",colProps:{span:6}},{title:"dataIndex",dataIndex:"dataIndex",colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u7EC4\u4EF6\u7C7B\u578B",dataIndex:"valueType",colProps:{span:6},valueType:"select",fieldProps:{options:ct.lG}},{title:"fieldProps",dataIndex:"fieldProps",colProps:{span:6},valueType:"modalJson"}]}]}]}]},mt=ft,pt=function(e){return[{valueType:"group",columns:[{title:"x\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","xField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"y\u8F74\u5B57\u6BB5",dataIndex:["defaultConfig","yField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u5206\u7EC4\u5B57\u6BB5",tooltip:"\u591A\u6761\u7EBF\u53EF\u4F7F\u7528\u8BE5\u53C2\u6570",dataIndex:["defaultConfig","seriesField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u662F\u5426\u5E73\u6ED1",dataIndex:["defaultConfig","smooth"],valueType:"switch",colProps:{span:6}}]}]},gt=pt,xt=function(e){return[{valueType:"group",columns:[{title:"\u89D2\u5EA6\u6620\u5C04\u5B57\u6BB5",dataIndex:["defaultConfig","angleField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u989C\u8272\u6620\u5C04\u5B57\u6BB5",dataIndex:["defaultConfig","colorField"],colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"\u997C\u56FE\u534A\u5F84",dataIndex:["defaultConfig","radius"],valueType:"digit",colProps:{span:6},width:"100%",fieldProps:{min:.1,max:1,step:.1,defaultValue:.9}},{title:"\u997C\u56FE\u5185\u534A\u5F84",dataIndex:["defaultConfig","innerRadius"],valueType:"digit",colProps:{span:6},width:"100%",fieldProps:{min:.1,max:1,step:.1,defaultValue:.6}}]}]},yt=xt,ht=function(e){return[{valueType:"group",columns:[{title:"Table Size",dataIndex:["defaultConfig","size"],colProps:{span:12},valueType:"select",fieldProps:{options:["small","middle","large"]}},{title:"\u5206\u9875",tooltip:"\u8BBE\u7F6E\u4E3A0\u7684\u8BDD\u8868\u793A\u5173\u95ED\u5206\u9875",dataIndex:["defaultConfig","cpage"],colProps:{span:12},valueType:"digit",width:"100%"},{title:"\u5217\u8868\u5B57\u6BB5",dataIndex:["defaultConfig","columns"],colProps:{span:24},rowProps:{gutter:0},valueType:"formList",columns:[{valueType:"group",columns:[{title:"dataIndex",dataIndex:"dataIndex",colProps:{span:6},valueType:"select",fieldProps:{options:e==null?void 0:e.fields}},{title:"title",dataIndex:"title",colProps:{span:6}},{title:"width",dataIndex:"width",colProps:{span:6},valueType:"digit"},{title:"\u6392\u5E8F",dataIndex:"sort",valueType:"switch",colProps:{span:6}}]}]}]}]},jt=ht,Ct={title:"\u914D\u7F6E",valueType:"jsonEditor",dataIndex:"config"},Tt=function(e){return[{title:"\u56FE\u8868\u7C7B\u578B",dataIndex:["chart","type"],valueType:"select",fieldProps:{options:[{label:"\u997C\u56FE",value:"pie"},{label:"\u6298\u7EBF\u56FE",value:"line"},{label:"\u67F1\u5F62\u56FE",value:"column"},{label:"\u6761\u5F62\u56FE",value:"bar"},{label:"\u533A\u57DF\u5730\u56FE",value:"areaMap"}]}},{name:["chart","type"],valueType:"dependency",columns:function(a){var i,s,o,n,m;return(a==null||(i=a.chart)===null||i===void 0?void 0:i.type)=="pie"?yt(e):(a==null||(s=a.chart)===null||s===void 0?void 0:s.type)=="line"?gt(e):(a==null||(o=a.chart)===null||o===void 0?void 0:o.type)=="column"?vt(e):(a==null||(n=a.chart)===null||n===void 0?void 0:n.type)=="bar"?ot(e):(a==null||(m=a.chart)===null||m===void 0?void 0:m.type)=="areaMap"?it(e):[]}}]},Pt=function(e){return[{title:"\u57FA\u7840\u4FE1\u606F",formColumns:[{title:"Title",dataIndex:"title",colProps:{span:12}}]}]},bt=function(e){return[{title:"\u57FA\u7840\u4FE1\u606F",formColumns:[{valueType:"group",columns:[{title:"\u7C7B\u578B",dataIndex:"type",valueType:"select",fieldProps:{options:[{label:(0,t.jsxs)(U.Z,{children:[(0,t.jsx)(lt.Z,{}),"Card"]}),value:"card"},{label:"tab",value:"tab"},{label:"\u56FE\u8868",value:"chart"},{label:"\u8868\u683C",value:"table"},{label:"\u5BB9\u5668",value:"rows"},{label:"\u67E5\u8BE2\u8868\u5355",value:"form"},{label:"\u4E2A\u4EBA\u4FE1\u606F",value:"user"}]},colProps:{span:24}}]},{valueType:"group",columns:[{title:"Title",dataIndex:"title",colProps:{span:12}},{title:"\u6570\u636E\u6E90",dataIndex:"sourceDataName",valueType:"select",fieldProps:{options:e},colProps:{span:12}}]},{name:["type","sourceDataName"],valueType:"dependency",columns:function(a){var i=a.type,s=a.sourceDataName;return i=="chart"?Tt(e==null?void 0:e.find(function(o){return o.value==s})):i=="table"?jt(e==null?void 0:e.find(function(o){return o.value==s})):i=="card"?dt(e==null?void 0:e.find(function(o){return o.value==s})):i=="form"?mt(e==null?void 0:e.find(function(o){return o.value==s})):[]}}]},{title:"\u914D\u7F6E",formColumns:[{valueType:"group",columns:[{title:"\u5217\u5BBD",dataIndex:"customer_span",valueType:"digit",width:"100%",colProps:{span:12}},{title:"\u81EA\u5B9A\u4E49\u9AD8\u5EA6",dataIndex:"height",valueType:"digit",width:"100%",colProps:{span:12}}]},Ct]}]},St=bt,Ze,Zt=(0,qe.iv)(Ze||(Ze=Qe()([`
  & .ant-space-item .anticon {
    margin: 0;
  }

  &:hover {
    display: block !important;
  }
`]))),X=function(e){var r=e.title,a=e.uid,i=e.data,s=e.type,o=s===void 0?"col":s,n=e.extpost,m=(0,j.useContext)(B.x),g=m.tableDesigner,P=g.pageMenu,D=g.reflush,C=g.editUrl,f=g.sourceData,$=(0,j.useContext)(tt.r),p=$.setting,N=(0,j.useContext)(ae.YF),R=N.setVisible,M=(0,j.useState)({}),v=L()(M,2),u=v[0],T=v[1];(0,j.useEffect)(function(){T(i)},[P,i]);var S=j.cloneElement(r,d()(d()({key:"trigger"},r.props),{},{onClick:function(){var b=w()(Y()().mark(function F(y){return Y()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:R(!1),y.stopPropagation();case 2:case"end":return z.stop()}},F)}));function c(F){return b.apply(this,arguments)}return c}()}));return(0,t.jsx)("div",{onClick:function(c){c.stopPropagation()},children:(0,t.jsx)(at.Z,{trigger:S,tabs:o=="col"?St(f):Pt(f),value:u,postUrl:C,data:d()({id:P==null?void 0:P.id,uid:a},n),callback:function(c){var F=c.data;return D(F),!0},saFormProps:{devEnable:!1}})})},W=function(e){var r=e.title,a=e.uid,i=e.devData,s=e.col,o=e.row,n=e.otitle,m=e.style,g=i.itemType,P=g===void 0?"row":g,D=(0,j.useContext)(B.x),C=D.tableDesigner.devEnable,f=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{label:(0,t.jsx)(X,{title:(0,t.jsxs)(U.Z,{children:[u==0?(0,t.jsx)(Ce.Z,{}):(0,t.jsx)(Te.Z,{}),(0,t.jsx)("span",{children:u==0?"\u63D2\u5165\u5217":"\u5411\u540E\u6DFB\u52A0\u5217"})]}),uid:a,extpost:{actionType:u==0?"insertCol":"addCol"}}),key:"addCol"+u}},$=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return{label:(0,t.jsx)(X,{title:(0,t.jsxs)(U.Z,{children:[u==0?(0,t.jsx)(Ce.Z,{}):(0,t.jsx)(Te.Z,{}),(0,t.jsx)("span",{children:u==0?"\u63D2\u5165\u884C":"\u5411\u540E\u6DFB\u52A0\u884C"})]}),uid:a,type:"row",extpost:{actionType:u==0?"insertRow":"addRow"}}),key:"addRow"+u}},p={label:(0,t.jsx)(X,{title:(0,t.jsxs)(U.Z,{children:[(0,t.jsx)(Pe.Z,{}),(0,t.jsx)("span",{children:"\u7F16\u8F91"})]}),uid:a,data:o,type:"row",extpost:{actionType:"editRow"}}),key:"editRow"},N={label:(0,t.jsx)(X,{title:(0,t.jsxs)(U.Z,{children:[(0,t.jsx)(Pe.Z,{}),(0,t.jsx)("span",{children:"\u7F16\u8F91"})]}),uid:a,data:s,type:"col",extpost:{actionType:"editCol"}}),key:"editCol"},R=function(u){return{label:(0,t.jsx)(Se.VV,{title:(0,t.jsxs)(U.Z,{children:[(0,t.jsx)(Xe.Z,{}),(0,t.jsx)("span",{children:"\u5220\u9664"})]}),uid:a,extpost:{actionType:u=="col"?"deleteCol":"deleteRow"}}),key:"deleteItem",danger:!0}},M=P=="row"?[p,f(0),{type:"divider"},$(1),{type:"divider"},R("row")]:[N,$(0),{type:"divider"},f(1),{type:"divider"},R("col")];return C?(0,t.jsxs)(be.TR,{className:Se.mJ,id:a,eid:a,devData:d()({type:"panel"},i),style:m,children:[(0,t.jsx)("div",{className:et()("general-schema-designer",Zt),children:(0,t.jsx)("div",{className:"general-schema-designer-icons",children:(0,t.jsxs)(U.Z,{size:3,align:"center",children:[(0,t.jsx)(be.IW,{children:(0,t.jsx)(we.Z,{role:"button","aria-label":"drag-handler"})}),(0,t.jsx)(ae.cM,{title:(0,t.jsx)(ke.Z,{role:"button",style:{cursor:"pointer"}}),items:M})]})})}),(0,t.jsx)("div",{role:"button",children:r})]}):n?(0,t.jsx)(t.Fragment,{children:n}):null},Dt=["columns"],Ft=["url","pageMenu","path"],It=function(e){var r=e.span,a=e.title,i=e.uid,s=e.rows,o=e.data,n=e.config,m=e.sourceDataName,g=e.chart,P=e.noTitle,D=P===void 0?!1:P,C=e.height,f=e.type,$=e.getData,p=o==null?void 0:o.find(function(v){return v.value==m}),N=(0,j.useContext)(B.x),R=N.tableDesigner.devEnable,M=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return D?null:(0,t.jsx)(W,{otitle:u||a,title:u||a||"\u5143\u7D20 - "+i,uid:i,col:e,devData:{itemType:"col"}})};return(0,t.jsx)(H.Z,{span:r,children:f=="tab"?(0,t.jsx)(Mt,d()({},e)):f=="table"?(0,t.jsx)(Rt,d()(d()({},e),{},{data:p})):s||f=="rows"?(0,t.jsxs)(t.Fragment,{children:[M(),(0,t.jsx)(Fe,{rows:s,data:o})]}):f=="card"?(0,t.jsx)(k.Z,{style:{height:"100%"},statistic:{title:R?M(p==null?void 0:p.label):a||(p!=null&&p.label?p==null?void 0:p.label:!1),value:p==null?void 0:p.data,prefix:n==null?void 0:n.prefix,suffix:n==null?void 0:n.suffix,description:n!=null&&n.href?(0,t.jsx)(A.Link,{to:n==null?void 0:n.href,style:{fontSize:12},children:"\u67E5\u770B\u66F4\u591A"}):""}}):f=="form"?(0,t.jsx)(Et,d()(d()({},e),{},{idata:p==null?void 0:p.data})):f=="user"?(0,t.jsx)(O.Z,{headStyle:R?{width:"100%",display:"block"}:{},title:R?M():!1,children:(0,t.jsx)(je,{flash:$})}):(0,t.jsx)(O.Z,{headStyle:R?{width:"100%",display:"block"}:{},title:R?M():a||!1,style:{height:C||300},children:(0,t.jsx)(Ge,{data:p==null?void 0:p.data,config:n,type:g==null?void 0:g.type})})})},Et=function(e){var r,a=e.config,i=e.idata,s=e.title,o=e.uid,n=e.getData,m=(0,j.useContext)(B.x),g=m.tableDesigner.devEnable,P=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return(0,t.jsx)(W,{otitle:f||s,title:f||s||"\u5143\u7D20 - "+o,uid:o,col:e,devData:{itemType:"col"}})},D=a==null||(r=a.columns)===null||r===void 0?void 0:r.map(function(C){var f=i==null?void 0:i.find(function($){return $.name==C.dataIndex});return f&&(C=d()(d()({},C),f.props)),C});return(0,t.jsx)(O.Z,{bodyStyle:{padding:0},title:g?P():!1,children:(0,t.jsx)(oe.Z,{layoutType:"QueryFilter",columns:(0,ye.ab)({initRequest:!0,columns:D,devEnable:!1}),onFinish:function(f){n==null||n(f)}})})},Rt=function(e){var r=e.config,a=e.data,i=e.title,s=e.uid,o=r.columns,n=ie()(r,Dt),m=(0,A.useModel)("@@initialState"),g=m.initialState;return(0,t.jsx)(O.Z,{style:{height:"100%"},title:(0,t.jsx)(W,{otitle:null,uid:s,col:e,devData:{itemType:"col"},title:"Table - "+s}),children:(0,t.jsx)(re.Z,d()({columns:(0,he.S)({initRequest:!0,columns:o,initialState:g,devEnable:!1}),dataSource:a==null?void 0:a.data,title:function(){return i},rowKey:"id"},n))})},Mt=function(e){var r=e.uid,a=e.rows,i=e.data,s=(0,j.useContext)(B.x),o=s.tableDesigner.devEnable;return(0,t.jsx)(O.Z,{style:{borderTopRightRadius:0,borderTopLeftRadius:0},title:o?(0,t.jsx)(W,{uid:r,col:e,devData:{itemType:"col"},title:"Tab - "+r,otitle:null}):!1,children:(0,t.jsx)(de.Z,{style:{background:"none"},items:a==null?void 0:a.map(function(n,m){return{key:m,label:(0,t.jsx)(W,{title:n==null?void 0:n.title,otitle:n==null?void 0:n.title,uid:n==null?void 0:n.uid,row:n,devData:{itemType:"row"}}),children:(0,t.jsx)(De,{index:m,row:n,data:i,noTitle:!0},m)}})})})},De=function(e){var r,a=e.row,i=e.data,s=e.noTitle,o=s===void 0?!1:s,n=e.index,m=e.getData;return(0,t.jsxs)(J.Z,{gutter:[16,16],style:{marginTop:-16},children:[o?null:(0,t.jsx)(H.Z,{span:24,children:(0,t.jsx)(W,{span:24,otitle:null,title:a!=null&&a.title?a==null?void 0:a.title:"\u5206\u7EC4 - "+(a==null?void 0:a.uid),uid:a==null?void 0:a.uid,devData:{itemType:"row"},row:a})},"row"),a==null||(r=a.cols)===null||r===void 0?void 0:r.map(function(g,P){return(0,j.createElement)(It,d()(d()({},g),{},{key:P,data:i,getData:m}))})]})},$t=function(e){var r,a,i,s=e.url,o=s===void 0?"":s,n=e.pageMenu,m=e.path,g=ie()(e,Ft),P=(0,j.useState)(),D=L()(P,2),C=D[0],f=D[1],$=(0,j.useState)(),p=L()($,2),N=p[0],R=p[1],M=function(){var h=w()(Y()().mark(function Z(){var K,Ie,Ee,le=arguments;return Y()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return K=le.length>0&&le[0]!==void 0?le[0]:{},ve.yw.loading("\u52A0\u8F7D\u4E2D..."),G.next=4,se.ZP.get(o,{params:d()(d()({},N),K)});case 4:Ie=G.sent,Ee=Ie.data,ve.yw.destroy(),f(Ee);case 8:case"end":return G.stop()}},Z)}));return function(){return h.apply(this,arguments)}}(),v=(0,j.useState)(),u=L()(v,2),T=u[0],S=u[1],b=(0,A.useModel)("@@initialState"),c=b.initialState,F=(0,j.useState)(!!(!(c!=null&&(r=c.settings)!==null&&r!==void 0&&r.devDisable)&&c!==null&&c!==void 0&&(a=c.settings)!==null&&a!==void 0&&a.dev)),y=L()(F,2),I=y[0],z=y[1];(0,j.useEffect)(function(){var h;S(n==null||(h=n.data)===null||h===void 0?void 0:h.panel),M()},[]);var E=(0,ae.Yx)({pageMenu:n,setColumns:S,getColumnsRender:function(Z){return Z},type:"panel",devEnable:I,sourceData:C});return(0,j.useEffect)(function(){var h,Z;z(!!(!(c!=null&&(h=c.settings)!==null&&h!==void 0&&h.devDisable)&&c!==null&&c!==void 0&&(Z=c.settings)!==null&&Z!==void 0&&Z.dev))},[c==null||(i=c.settings)===null||i===void 0?void 0:i.devDisable]),(0,t.jsx)(q._z,{title:!1,className:"saContainer",fixedHeader:te.P.fixedHeader,header:{breadcrumbRender:function(Z,K){return(0,t.jsx)(V.Lr,{path:m})}},children:(0,t.jsxs)(B.x.Provider,{value:{tableDesigner:E},children:[(0,t.jsx)(We.L,{children:C&&(0,t.jsx)(Fe,d()(d()({},g),{},{rows:T,data:C,getData:M}))},"content"),!C&&(0,t.jsx)(ue.Z,{paragraph:{rows:10},active:!0}),I?(0,t.jsx)(_.ZP,{type:"dashed",onClick:function(){E.edit({base:{id:n==null?void 0:n.id,actionType:"insertRow"}})},style:{marginTop:10},children:"+ Row"},"addrow"):null]})})},Fe=function(e){var r=e.rows,a=e.data,i=e.getData;return(0,t.jsx)(ee.Z,{vertical:!0,gap:"middle",children:r==null?void 0:r.map(function(s,o){return(0,t.jsx)(De,{index:o,row:s,data:a,getData:i},o)})})},Nt=$t,zt=l(19632),Lt=l.n(zt),At=l(9783),Ot=l.n(At),Ht=l(55208),Bt=l(34528),qt=l(21655),Ut=function(e){var r=e.tableTitle,a=r===void 0?!1:r,i=e.path,s=e.leftMenu,o=s===void 0?{name:"categorys",url_name:"category_id",title:"\u5206\u7C7B\u9009\u62E9",field:{title:"label",key:"value"}}:s,n=o?o.name:"",m=o?o.title:"",g=o?o.url_name:"",P=o?o.field:!1,D=(0,j.useState)([]),C=L()(D,2),f=C[0],$=C[1],p=(0,A.useSearchParams)(),N=L()(p,2),R=N[0],M=N[1],v=R.get(g),u=(0,j.useState)(v?isNaN(v)?v:parseInt(v):0),T=L()(u,2),S=T[0],b=T[1],c=(0,j.useState)([]),F=L()(c,2),y=F[0],I=F[1];return(0,t.jsx)(q._z,{title:a,className:"saContainer",fixedHeader:te.P.fixedHeader,header:{breadcrumbRender:function(E,h){return(0,t.jsx)(V.Lr,{path:i})}},children:(0,t.jsxs)(J.Z,{gutter:[24,16],style:f.length>1?{marginLeft:0,marginRight:0}:{},children:[f.length>1&&(0,t.jsxs)(H.Z,{span:3,title:m,style:{background:"#fff",paddingTop:20},children:[(0,t.jsx)(Bt.Z,{level:5,children:m}),(0,t.jsx)(Ht.Z,{selectedKeys:[S],expandedKeys:y,treeData:f,fieldNames:P,onSelect:function(E){var h=0;E.length>0&&(h=E.pop()),b(h);var Z=(0,V.Cc)([g]);h&&(Z[g]=h+""),M(d()({},Z))},onExpand:function(E){I(E)}})]}),(0,t.jsx)(H.Z,{span:f.length>1?21:24,children:(0,t.jsx)(B.Z,d()(d()({},e),{},{paramExtra:S?d()(d()({},e.paramExtra),{},Ot()({},g,S)):d()({},e.paramExtra),beforeTableGet:function(E){var h;if(o&&!(f.length>0||!((h=E.search)!==null&&h!==void 0&&h[n]))&&($(Lt()(E.search[n])),S&&y.length<1)){var Z=(0,V.aT)(E.search[n],S,{id:"value",children:"children"});console.log(Z,111),I(Z)}}}))})]})})},Yt=Ut,Vt=l(32250),Wt=l(72644),Kt=l(83832),Gt=l(45821),Jt=function(){return(0,t.jsx)(Gt.ZP,{status:"403",title:"403",subTitle:"\u4F60\u6CA1\u6709\u6B64\u9875\u9762\u7684\u8BBF\u95EE\u6743\u9650",extra:(0,t.jsx)(_.ZP,{type:"primary",onClick:function(){return A.history.push("/")},children:"\u8FD4\u56DE\u5DE5\u4F5C\u53F0"})})},Qt=function(){var e,r=(0,A.useLocation)(),a=r.pathname,i=a.match(/\/(\d+)$/);i&&(a=r.pathname.replace(i[0],""));var s=(0,V.Sj)(a);return s?((0,j.useEffect)(function(){var o;if((o=s.data)!==null&&o!==void 0&&o.redirect){var n;A.history.push((n=s.data)===null||n===void 0?void 0:n.redirect)}},[s]),(0,t.jsx)(t.Fragment,{children:(e=s.data)!==null&&e!==void 0&&e.redirect?(0,t.jsx)(Kt.S,{}):(0,t.jsx)(Xt,{menu:s,match:i,pathname:a})})):(0,t.jsx)(Jt,{})},Xt=function(e){var r=e.menu,a=e.match,i=e.pathname,s=r.data,o=r.page_type,n=r.name;if(a||o=="form"){var m=s.postUrl||s.url?(s.postUrl?s.postUrl:s.url+"/show")+(a?"?id="+(a==null?void 0:a[1]):""):"";return(0,t.jsx)(Wt.Z,d()(d()({formTitle:!1,pageMenu:r},s),{},{msgcls:function(P){var D=P.code;s.noBack||D||o!="form"&&A.history.back()},url:m,match:!!a,dataId:a?a==null?void 0:a[1]:0}),i)}else switch(o){case"category":return(0,t.jsx)(Vt.Z,d()(d()({pageMenu:r,path:i,name:n},s),{},{tableTitle:!1}),i);case"table":return(0,t.jsx)(Yt,d()(d()({path:i,name:n,pageMenu:r},s),{},{tableTitle:!1}),i);case"panel":return(0,t.jsx)(Ve,d()(d()({pageMenu:r},s),{},{path:i}));case"panel2":return(0,t.jsx)(Nt,d()(d()({pageMenu:r},s),{},{path:i}));default:return null}},wt=Qt}}]);
