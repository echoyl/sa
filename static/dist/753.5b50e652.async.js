!(function(){var yB=(ft,N,k)=>new Promise((W,K)=>{var b=q=>{try{j(k.next(q))}catch(Q){K(Q)}},G=q=>{try{j(k.throw(q))}catch(Q){K(Q)}},j=q=>q.done?W(q.value):Promise.resolve(q.value).then(b,G);j((k=k.apply(ft,N)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[753],{81618:function(ft){"use strict";(function(N,k){ft.exports=k()})(this,function(){function N(ie){var te=[];return ie.AMapUI&&te.push(k(ie.AMapUI)),ie.Loca&&te.push(W(ie.Loca)),Promise.all(te)}function k(ie){return new Promise(function(te,Ce){var pe=[];if(ie.plugins)for(var fe=0;fe<ie.plugins.length;fe+=1)b.AMapUI.plugins.indexOf(ie.plugins[fe])==-1&&pe.push(ie.plugins[fe]);if(G.AMapUI===K.failed)Ce("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(G.AMapUI===K.notload){G.AMapUI=K.loading,b.AMapUI.version=ie.version||b.AMapUI.version,fe=b.AMapUI.version;var J=document.body||document.head,M=document.createElement("script");M.type="text/javascript",M.src="https://webapi.amap.com/ui/"+fe+"/main.js",M.onerror=function(E){G.AMapUI=K.failed,Ce("\u8BF7\u6C42 AMapUI \u5931\u8D25")},M.onload=function(){if(G.AMapUI=K.loaded,pe.length)window.AMapUI.loadUI(pe,function(){for(var E=0,ge=pe.length;E<ge;E++){var Se=pe[E].split("/").slice(-1)[0];window.AMapUI[Se]=arguments[E]}for(te();j.AMapUI.length;)j.AMapUI.splice(0,1)[0]()});else for(te();j.AMapUI.length;)j.AMapUI.splice(0,1)[0]()},J.appendChild(M)}else G.AMapUI===K.loaded?ie.version&&ie.version!==b.AMapUI.version?Ce("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):pe.length?window.AMapUI.loadUI(pe,function(){for(var E=0,ge=pe.length;E<ge;E++){var Se=pe[E].split("/").slice(-1)[0];window.AMapUI[Se]=arguments[E]}te()}):te():ie.version&&ie.version!==b.AMapUI.version?Ce("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):j.AMapUI.push(function(E){E?Ce(E):pe.length?window.AMapUI.loadUI(pe,function(){for(var ge=0,Se=pe.length;ge<Se;ge++){var ze=pe[ge].split("/").slice(-1)[0];window.AMapUI[ze]=arguments[ge]}te()}):te()})})}function W(ie){return new Promise(function(te,Ce){if(G.Loca===K.failed)Ce("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(G.Loca===K.notload){G.Loca=K.loading,b.Loca.version=ie.version||b.Loca.version;var pe=b.Loca.version,fe=b.AMap.version.startsWith("2"),J=pe.startsWith("2");if(fe&&!J||!fe&&J)Ce("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{fe=b.key,J=document.body||document.head;var M=document.createElement("script");M.type="text/javascript",M.src="https://webapi.amap.com/loca?v="+pe+"&key="+fe,M.onerror=function(E){G.Loca=K.failed,Ce("\u8BF7\u6C42 AMapUI \u5931\u8D25")},M.onload=function(){for(G.Loca=K.loaded,te();j.Loca.length;)j.Loca.splice(0,1)[0]()},J.appendChild(M)}}else G.Loca===K.loaded?ie.version&&ie.version!==b.Loca.version?Ce("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):te():ie.version&&ie.version!==b.Loca.version?Ce("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):j.Loca.push(function(E){E?Ce(E):Ce()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var K;(function(ie){ie.notload="notload",ie.loading="loading",ie.loaded="loaded",ie.failed="failed"})(K||(K={}));var b={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},G={AMap:K.notload,AMapUI:K.notload,Loca:K.notload},j={AMap:[],AMapUI:[],Loca:[]},q=[],Q=function(ie){typeof ie=="function"&&(G.AMap===K.loaded?ie(window.AMap):q.push(ie))};return{load:function(ie){return new Promise(function(te,Ce){if(G.AMap==K.failed)Ce("");else if(G.AMap==K.notload){var pe=ie.key,fe=ie.version,J=ie.plugins;pe?(window.AMap&&location.host!=="lbs.amap.com"&&Ce("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),b.key=pe,b.AMap.version=fe||b.AMap.version,b.AMap.plugins=J||b.AMap.plugins,G.AMap=K.loading,fe=document.body||document.head,window.___onAPILoaded=function(E){if(delete window.___onAPILoaded,E)G.AMap=K.failed,Ce(E);else for(G.AMap=K.loaded,N(ie).then(function(){te(window.AMap)}).catch(Ce);q.length;)q.splice(0,1)[0]()},J=document.createElement("script"),J.type="text/javascript",J.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+b.AMap.version+"&key="+pe+"&plugin="+b.AMap.plugins.join(","),J.onerror=function(E){G.AMap=K.failed,Ce(E)},fe.appendChild(J)):Ce("\u8BF7\u586B\u5199key")}else if(G.AMap==K.loaded)if(ie.key&&ie.key!==b.key)Ce("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(ie.version&&ie.version!==b.AMap.version)Ce("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(pe=[],ie.plugins)for(fe=0;fe<ie.plugins.length;fe+=1)b.AMap.plugins.indexOf(ie.plugins[fe])==-1&&pe.push(ie.plugins[fe]);pe.length?window.AMap.plugin(pe,function(){N(ie).then(function(){te(window.AMap)}).catch(Ce)}):N(ie).then(function(){te(window.AMap)}).catch(Ce)}else if(ie.key&&ie.key!==b.key)Ce("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(ie.version&&ie.version!==b.AMap.version)Ce("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var M=[];if(ie.plugins)for(fe=0;fe<ie.plugins.length;fe+=1)b.AMap.plugins.indexOf(ie.plugins[fe])==-1&&M.push(ie.plugins[fe]);Q(function(){M.length?window.AMap.plugin(M,function(){N(ie).then(function(){te(window.AMap)}).catch(Ce)}):N(ie).then(function(){te(window.AMap)}).catch(Ce)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,b={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},G={AMap:K.notload,AMapUI:K.notload,Loca:K.notload},j={AMap:[],AMapUI:[],Loca:[]}}}})},25330:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};N.default=k},67303:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};N.default=k},83647:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};N.default=k},57583:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};N.default=k},29260:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};N.default=k},14474:function(ft,N,k){"use strict";k.d(N,{Z:function(){return pj}});var W={};k.r(W),k.d(W,{add:function(){return Di},adjoint:function(){return l_},clone:function(){return Xh},copy:function(){return mm},create:function(){return Os},determinant:function(){return Pv},equals:function(){return ji},exactEquals:function(){return Ki},frob:function(){return qi},fromQuat:function(){return Ut},fromQuat2:function(){return ue},fromRotation:function(){return _},fromRotationTranslation:function(){return $},fromRotationTranslationScale:function(){return mt},fromRotationTranslationScaleOrigin:function(){return Lt},fromScaling:function(){return v},fromTranslation:function(){return h},fromValues:function(){return Tu},fromXRotation:function(){return R},fromYRotation:function(){return F},fromZRotation:function(){return z},frustum:function(){return ur},getRotation:function(){return ct},getScaling:function(){return Qe},getTranslation:function(){return Pe},identity:function(){return Vf},invert:function(){return of},lookAt:function(){return Dn},mul:function(){return go},multiply:function(){return Zu},multiplyScalar:function(){return Oi},multiplyScalarAndAdd:function(){return ao},ortho:function(){return gn},orthoNO:function(){return nn},orthoZO:function(){return wn},perspective:function(){return Lr},perspectiveFromFieldOfView:function(){return Yr},perspectiveNO:function(){return fr},perspectiveZO:function(){return Rr},rotate:function(){return Tx},rotateX:function(){return Ka},rotateY:function(){return sf},rotateZ:function(){return Op},scale:function(){return wc},set:function(){return _g},str:function(){return wi},sub:function(){return Ga},subtract:function(){return oa},targetTo:function(){return pi},translate:function(){return oc},transpose:function(){return Xd}});var K=k(67294),b=k(97582),G=k(21030),j={},q={},Q=function(i){return q[i]},ie=function(i,r){q[i]=r},te=function(i){return j[i]},Ce=function(i,r){j[i]=r},pe={},fe={},J=34,M=10,E=13;function ge(e){return new Function("d","return {"+e.map(function(i,r){return JSON.stringify(i)+": d["+r+'] || ""'}).join(",")+"}")}function Se(e,i){var r=ge(e);return function(o,u){return i(r(o),u,e)}}function ze(e){var i=Object.create(null),r=[];return e.forEach(function(o){for(var u in o)u in i||r.push(i[u]=u)}),r}function De(e,i){var r=e+"",o=r.length;return o<i?new Array(i-o+1).join(0)+r:r}function Ue(e){return e<0?"-"+De(-e,6):e>9999?"+"+De(e,6):De(e,4)}function at(e){var i=e.getUTCHours(),r=e.getUTCMinutes(),o=e.getUTCSeconds(),u=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Ue(e.getUTCFullYear(),4)+"-"+De(e.getUTCMonth()+1,2)+"-"+De(e.getUTCDate(),2)+(u?"T"+De(i,2)+":"+De(r,2)+":"+De(o,2)+"."+De(u,3)+"Z":o?"T"+De(i,2)+":"+De(r,2)+":"+De(o,2)+"Z":r||i?"T"+De(i,2)+":"+De(r,2)+"Z":"")}function Je(e){var i=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function o(D,V){var X,ce,de=u(D,function(we,je){if(X)return X(we,je-1);ce=we,X=V?Se(we,V):ge(we)});return de.columns=ce||[],de}function u(D,V){var X=[],ce=D.length,de=0,we=0,je,ht=ce<=0,_t=!1;D.charCodeAt(ce-1)===M&&--ce,D.charCodeAt(ce-1)===E&&--ce;function Dt(){if(ht)return fe;if(_t)return _t=!1,pe;var ir,sr=de,Tr;if(D.charCodeAt(sr)===J){for(;de++<ce&&D.charCodeAt(de)!==J||D.charCodeAt(++de)===J;);return(ir=de)>=ce?ht=!0:(Tr=D.charCodeAt(de++))===M?_t=!0:Tr===E&&(_t=!0,D.charCodeAt(de)===M&&++de),D.slice(sr+1,ir-1).replace(/""/g,'"')}for(;de<ce;){if((Tr=D.charCodeAt(ir=de++))===M)_t=!0;else if(Tr===E)_t=!0,D.charCodeAt(de)===M&&++de;else if(Tr!==r)continue;return D.slice(sr,ir)}return ht=!0,D.slice(sr,ce)}for(;(je=Dt())!==fe;){for(var Yt=[];je!==pe&&je!==fe;)Yt.push(je),je=Dt();V&&(Yt=V(Yt,we++))==null||X.push(Yt)}return X}function c(D,V){return D.map(function(X){return V.map(function(ce){return O(X[ce])}).join(e)})}function p(D,V){return V==null&&(V=ze(D)),[V.map(O).join(e)].concat(c(D,V)).join(`
`)}function g(D,V){return V==null&&(V=ze(D)),c(D,V).join(`
`)}function y(D){return D.map(w).join(`
`)}function w(D){return D.map(O).join(e)}function O(D){return D==null?"":D instanceof Date?at(D):i.test(D+="")?'"'+D.replace(/"/g,'""')+'"':D}return{parse:o,parseRows:u,format:p,formatBody:g,formatRows:y,formatRow:w,formatValue:O}}var Ze=Je(","),xe=Ze.parse,_e=Ze.parseRows,He=Ze.format,Ke=Ze.formatBody,Et=Ze.formatRows,ke=Ze.formatRow,qe=Ze.formatValue,ne=k(1413),Ge=63710088e-1,oe={centimeters:Ge*100,centimetres:Ge*100,degrees:Ge/111325,feet:Ge*3.28084,inches:Ge*39.37,kilometers:Ge/1e3,kilometres:Ge/1e3,meters:Ge,metres:Ge,miles:Ge/1609.344,millimeters:Ge*1e3,millimetres:Ge*1e3,nauticalmiles:Ge/1852,radians:1,yards:Ge*1.0936},Fe={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ge,yards:1.0936133},ut={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Ae(e,i,r){r===void 0&&(r={});var o={type:"Feature"};return(r.id===0||r.id)&&(o.id=r.id),r.bbox&&(o.bbox=r.bbox),o.properties=i||{},o.geometry=e,o}function Le(e,i,r){switch(r===void 0&&(r={}),e){case"Point":return rt(i).geometry;case"LineString":return Ve(i).geometry;case"Polygon":return me(i).geometry;case"MultiPoint":return $e(i).geometry;case"MultiLineString":return et(i).geometry;case"MultiPolygon":return Te(i).geometry;default:throw new Error(e+" is invalid")}}function rt(e,i,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!$r(e[0])||!$r(e[1]))throw new Error("coordinates must contain numbers");var o={type:"Point",coordinates:e};return Ae(o,i,r)}function ye(e,i,r){return r===void 0&&(r={}),Ht(e.map(function(o){return rt(o,i)}),r)}function me(e,i,r){r===void 0&&(r={});for(var o=0,u=e;o<u.length;o++){var c=u[o];if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<c[c.length-1].length;p++)if(c[c.length-1][p]!==c[0][p])throw new Error("First and last Position are not equivalent.")}var g={type:"Polygon",coordinates:e};return Ae(g,i,r)}function We(e,i,r){return r===void 0&&(r={}),Ht(e.map(function(o){return me(o,i)}),r)}function Ve(e,i,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var o={type:"LineString",coordinates:e};return Ae(o,i,r)}function dt(e,i,r){return r===void 0&&(r={}),Ht(e.map(function(o){return Ve(o,i)}),r)}function Ht(e,i){i===void 0&&(i={});var r={type:"FeatureCollection"};return i.id&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.features=e,r}function et(e,i,r){r===void 0&&(r={});var o={type:"MultiLineString",coordinates:e};return Ae(o,i,r)}function $e(e,i,r){r===void 0&&(r={});var o={type:"MultiPoint",coordinates:e};return Ae(o,i,r)}function Te(e,i,r){r===void 0&&(r={});var o={type:"MultiPolygon",coordinates:e};return Ae(o,i,r)}function Xe(e,i,r){r===void 0&&(r={});var o={type:"GeometryCollection",geometries:e};return Ae(o,i,r)}function pt(e,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,i||0);return Math.round(e*r)/r}function Oe(e,i){i===void 0&&(i="kilometers");var r=oe[i];if(!r)throw new Error(i+" units is invalid");return e*r}function Be(e,i){i===void 0&&(i="kilometers");var r=oe[i];if(!r)throw new Error(i+" units is invalid");return e/r}function vt(e,i){return rr(Be(e,i))}function Rt(e){var i=e%360;return i<0&&(i+=360),i}function rr(e){var i=e%(2*Math.PI);return i*180/Math.PI}function br(e){var i=e%360;return i*Math.PI/180}function lt(e,i,r){if(i===void 0&&(i="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return Oe(Be(e,i),r)}function an(e,i,r){if(i===void 0&&(i="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o=ut[i];if(!o)throw new Error("invalid original units");var u=ut[r];if(!u)throw new Error("invalid final units");return e/o*u}function $r(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Xr(e){return!!e&&e.constructor===Object}function Nt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(i){if(!$r(i))throw new Error("bbox must only contain numbers")})}function Kt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}function or(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function kt(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Jt(e){if(e.length>1&&isNumber(e[0])&&isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return Jt(e[0]);throw new Error("coordinates must only contain numbers")}function Er(e,i,r){if(!i||!r)throw new Error("type and name required");if(!e||e.type!==i)throw new Error("Invalid input to "+r+": must be a "+i+", given "+e.type)}function wr(e,i,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==i)throw new Error("Invalid input to "+r+": must be a "+i+", given "+e.geometry.type)}function Br(e,i,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+r+", FeatureCollection required");for(var o=0,u=e.features;o<u.length;o++){var c=u[o];if(!c||c.type!=="Feature"||!c.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!c.geometry||c.geometry.type!==i)throw new Error("Invalid input to "+r+": must be a "+i+", given "+c.geometry.type)}}function zr(e){return e.type==="Feature"?e.geometry:e}function le(e,i){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function H(e,i,r){if(e!==null)for(var o,u,c,p,g,y,w,O=0,D=0,V,X=e.type,ce=X==="FeatureCollection",de=X==="Feature",we=ce?e.features.length:1,je=0;je<we;je++){w=ce?e.features[je].geometry:de?e.geometry:e,V=w?w.type==="GeometryCollection":!1,g=V?w.geometries.length:1;for(var ht=0;ht<g;ht++){var _t=0,Dt=0;if(p=V?w.geometries[ht]:w,p!==null){y=p.coordinates;var Yt=p.type;switch(O=r&&(Yt==="Polygon"||Yt==="MultiPolygon")?1:0,Yt){case null:break;case"Point":if(i(y,D,je,_t,Dt)===!1)return!1;D++,_t++;break;case"LineString":case"MultiPoint":for(o=0;o<y.length;o++){if(i(y[o],D,je,_t,Dt)===!1)return!1;D++,Yt==="MultiPoint"&&_t++}Yt==="LineString"&&_t++;break;case"Polygon":case"MultiLineString":for(o=0;o<y.length;o++){for(u=0;u<y[o].length-O;u++){if(i(y[o][u],D,je,_t,Dt)===!1)return!1;D++}Yt==="MultiLineString"&&_t++,Yt==="Polygon"&&Dt++}Yt==="Polygon"&&_t++;break;case"MultiPolygon":for(o=0;o<y.length;o++){for(Dt=0,u=0;u<y[o].length;u++){for(c=0;c<y[o][u].length-O;c++){if(i(y[o][u][c],D,je,_t,Dt)===!1)return!1;D++}Dt++}_t++}break;case"GeometryCollection":for(o=0;o<p.geometries.length;o++)if(H(p.geometries[o],i,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function re(e,i,r,o){var u=r;return H(e,function(c,p,g,y,w){p===0&&r===void 0?u=c:u=i(u,c,p,g,y,w)},o),u}function Ie(e,i){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&i(e.features[r].properties,r)!==!1;r++);break;case"Feature":i(e.properties,0);break}}function Ye(e,i,r){var o=r;return Ie(e,function(u,c){c===0&&r===void 0?o=u:o=i(o,u,c)}),o}function Ct(e,i){if(e.type==="Feature")i(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&i(e.features[r],r)!==!1;r++);}function ar(e,i,r){var o=r;return Ct(e,function(u,c){c===0&&r===void 0?o=u:o=i(o,u,c)}),o}function jt(e){var i=[];return H(e,function(r){i.push(r)}),i}function wt(e,i){var r,o,u,c,p,g,y,w,O,D,V=0,X=e.type==="FeatureCollection",ce=e.type==="Feature",de=X?e.features.length:1;for(r=0;r<de;r++){for(g=X?e.features[r].geometry:ce?e.geometry:e,w=X?e.features[r].properties:ce?e.properties:{},O=X?e.features[r].bbox:ce?e.bbox:void 0,D=X?e.features[r].id:ce?e.id:void 0,y=g?g.type==="GeometryCollection":!1,p=y?g.geometries.length:1,u=0;u<p;u++){if(c=y?g.geometries[u]:g,c===null){if(i(null,V,w,O,D)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(i(c,V,w,O,D)===!1)return!1;break}case"GeometryCollection":{for(o=0;o<c.geometries.length;o++)if(i(c.geometries[o],V,w,O,D)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}V++}}function Mt(e,i,r){var o=r;return wt(e,function(u,c,p,g,y){c===0&&r===void 0?o=u:o=i(o,u,c,p,g,y)}),o}function ve(e,i){wt(e,function(r,o,u,c,p){var g=r===null?null:r.type;switch(g){case null:case"Point":case"LineString":case"Polygon":return i(Ae(r,u,{bbox:c,id:p}),o,0)===!1?!1:void 0}var y;switch(g){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon";break}for(var w=0;w<r.coordinates.length;w++){var O=r.coordinates[w],D={type:y,coordinates:O};if(i(Ae(D,u),o,w)===!1)return!1}})}function he(e,i,r){var o=r;return ve(e,function(u,c,p){c===0&&p===0&&r===void 0?o=u:o=i(o,u,c,p)}),o}function Re(e,i){ve(e,function(r,o,u){var c=0;if(r.geometry){var p=r.geometry.type;if(!(p==="Point"||p==="MultiPoint")){var g,y=0,w=0,O=0;if(H(r,function(D,V,X,ce,de){if(g===void 0||o>y||ce>w||de>O){g=D,y=o,w=ce,O=de,c=0;return}var we=lineString([g,D],r.properties);if(i(we,o,u,de,c)===!1)return!1;c++,g=D})===!1)return!1}}})}function tt(e,i,r){var o=r,u=!1;return Re(e,function(c,p,g,y,w){u===!1&&r===void 0?o=c:o=i(o,c,p,g,y,w),u=!0}),o}function St(e,i){if(!e)throw new Error("geojson is required");ve(e,function(r,o,u){if(r.geometry!==null){var c=r.geometry.type,p=r.geometry.coordinates;switch(c){case"LineString":if(i(r,o,u,0,0)===!1)return!1;break;case"Polygon":for(var g=0;g<p.length;g++)if(i(lineString(p[g],r.properties),o,u,g)===!1)return!1;break}}})}function Gt(e,i,r){var o=r;return St(e,function(u,c,p,g){c===0&&r===void 0?o=u:o=i(o,u,c,p,g)}),o}function gr(e,i){if(i=i||{},!isObject(i))throw new Error("options is invalid");var r=i.featureIndex||0,o=i.multiFeatureIndex||0,u=i.geometryIndex||0,c=i.segmentIndex||0,p=i.properties,g;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),p=p||e.features[r].properties,g=e.features[r].geometry;break;case"Feature":p=p||e.properties,g=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":g=e;break;default:throw new Error("geojson is invalid")}if(g===null)return null;var y=g.coordinates;switch(g.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=y.length+c-1),lineString([y[c],y[c+1]],p,i);case"Polygon":return u<0&&(u=y.length+u),c<0&&(c=y[u].length+c-1),lineString([y[u][c],y[u][c+1]],p,i);case"MultiLineString":return o<0&&(o=y.length+o),c<0&&(c=y[o].length+c-1),lineString([y[o][c],y[o][c+1]],p,i);case"MultiPolygon":return o<0&&(o=y.length+o),u<0&&(u=y[o].length+u),c<0&&(c=y[o][u].length-c-1),lineString([y[o][u][c],y[o][u][c+1]],p,i)}throw new Error("geojson is invalid")}function At(e,i){if(i=i||{},!isObject(i))throw new Error("options is invalid");var r=i.featureIndex||0,o=i.multiFeatureIndex||0,u=i.geometryIndex||0,c=i.coordIndex||0,p=i.properties,g;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),p=p||e.features[r].properties,g=e.features[r].geometry;break;case"Feature":p=p||e.properties,g=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":g=e;break;default:throw new Error("geojson is invalid")}if(g===null)return null;var y=g.coordinates;switch(g.type){case"Point":return point(y,p,i);case"MultiPoint":return o<0&&(o=y.length+o),point(y[o],p,i);case"LineString":return c<0&&(c=y.length+c),point(y[c],p,i);case"Polygon":return u<0&&(u=y.length+u),c<0&&(c=y[u].length+c),point(y[u][c],p,i);case"MultiLineString":return o<0&&(o=y.length+o),c<0&&(c=y[o].length+c),point(y[o][c],p,i);case"MultiPolygon":return o<0&&(o=y.length+o),u<0&&(u=y[o].length+u),c<0&&(c=y[o][u].length-c),point(y[o][u][c],p,i)}throw new Error("geojson is invalid")}var st=k(43144),Pt=k(15671),yr=k(60136),Fr=k(82963),Ft=k(61120),Mn=k(89611);function ei(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch(i){return typeof e=="function"}}var ni=k(78814);function un(e,i,r){return(0,ni.Z)()?un=Reflect.construct.bind():un=function(u,c,p){var g=[null];g.push.apply(g,c);var y=Function.bind.apply(u,g),w=new y;return p&&(0,Mn.Z)(w,p.prototype),w},un.apply(null,arguments)}function Xn(e){var i=typeof Map=="function"?new Map:void 0;return Xn=function(o){if(o===null||!ei(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof i!="undefined"){if(i.has(o))return i.get(o);i.set(o,u)}function u(){return un(o,arguments,(0,Ft.Z)(this).constructor)}return u.prototype=Object.create(o.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),(0,Mn.Z)(u,o)},Xn(e)}var Wn={REGISTERED_PROTOCOLS:{}};function Jn(e){var i=sa();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function sa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vi=function(i){return Wn.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]},ga=function(e){(0,yr.Z)(r,e);var i=Jn(r);function r(o,u,c,p){var g;return(0,Pt.Z)(this,r),g=i.call(this,"AJAXError: ".concat(u," (").concat(o,"): ").concat(c)),g.status=o,g.statusText=u,g.url=c,g.body=p,g}return(0,st.Z)(r)}(Xn(Error));function Ra(e,i){var r=new XMLHttpRequest,o=Array.isArray(e.url)?e.url[0]:e.url;r.open(e.method||"GET",o,!0),e.type==="arrayBuffer"&&(r.responseType="arraybuffer");for(var u in e.headers)e.headers.hasOwnProperty(u)&&r.setRequestHeader(u,e.headers[u]);return e.type==="json"&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials=e.credentials==="include",r.onerror=function(){i(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||r.status===0)&&r.response!==null){var c=r.response;if(e.type==="json")try{c=JSON.parse(r.response)}catch(g){return i(g)}i(null,c,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"),r)}else{var p=new Blob([r.response],{type:r.getResponseHeader("Content-Type")});i(new ga(r.status,r.statusText,o.toString(),p))}},r.cancel=r.abort,r.send(e.body),r}function ya(e){return new Promise(function(i,r){Ra(e,function(o,u,c,p,g){o?r({err:o,data:null,xhr:g}):i({err:null,data:u,cacheControl:c,expires:p,xhr:g})})})}function ja(e,i){return Ra(e,i)}var ba=function(i,r){var o=vi(i.url)||ja;return o((0,ne.Z)((0,ne.Z)({},i),{},{type:"json"}),r)},gs=function(i,r){var o=vi(i.url)||ja;return o((0,ne.Z)((0,ne.Z)({},i),{},{type:"arrayBuffer"}),r)},co=function(i,r){return ja(_objectSpread(_objectSpread({},i),{},{method:"POST"}),r)},Io=function(i,r){return ja((0,ne.Z)((0,ne.Z)({},i),{},{method:"GET"}),r)};function oi(e){var i=window.document.createElement("a");return i.href=e,i.protocol===window.document.location.protocol&&i.host===window.document.location.host}var Si="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Qi(e,i){var r=new window.Image,o=window.URL||window.webkitURL;r.crossOrigin="anonymous",r.onload=function(){i(null,r),o.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame(function(){r.src=Si})},r.onerror=function(){return i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var u=new Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?o.createObjectURL(u):Si}function Wa(e,i){var r=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(r).then(function(o){i(null,o)}).catch(function(o){i(new Error("Could not load image because of ".concat(o.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var ms=function(i,r,o){var u=function(p,g){if(p)r(p);else if(g){var y=typeof createImageBitmap=="function",w=o?o(g):g;y?Wa(w,r):Qi(w,r)}};return i.type==="json"?ba(i,u):gs(i,u)},ho=function(i,r){var o=typeof createImageBitmap=="function";o?Wa(i,r):Qi(i,r)},Po=function(e){return e.CENTER="center",e.TOP="top",e["TOP-LEFT"]="top-left",e["TOP-RIGHT"]="top-right",e.BOTTOM="bottom",e["BOTTOM-LEFT"]="bottom-left",e["BOTTOM-RIGHT"]="bottom-right",e.LEFT="left",e.RIGHT="right",e}({}),cr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ot(e,i,r){var o=e.classList;for(var u in cr)cr.hasOwnProperty(u)&&o.remove("l7-".concat(r,"-anchor-").concat(u));o.add("l7-".concat(r,"-anchor-").concat(i))}function qt(e,i,r){e.prototype=i.prototype=r,r.constructor=e}function Mr(e,i){var r=Object.create(e.prototype);for(var o in i)r[o]=i[o];return r}function rn(){}var Pn=.7,Bn=1/Pn,Cn="\\s*([+-]?\\d+)\\s*",Mi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wo=/^#([0-9a-f]{3,8})$/,os=new RegExp("^rgb\\("+[Cn,Cn,Cn]+"\\)$"),Su=new RegExp("^rgb\\("+[Xi,Xi,Xi]+"\\)$"),Oo=new RegExp("^rgba\\("+[Cn,Cn,Cn,Mi]+"\\)$"),ro=new RegExp("^rgba\\("+[Xi,Xi,Xi,Mi]+"\\)$"),cu=new RegExp("^hsl\\("+[Mi,Xi,Xi]+"\\)$"),Qo=new RegExp("^hsla\\("+[Mi,Xi,Xi,Mi]+"\\)$"),Zt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qt(rn,fi,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:er,formatHex:er,formatHsl:Ur,formatRgb:An,toString:An});function er(){return this.rgb().formatHex()}function Ur(){return fu(this).formatHsl()}function An(){return this.rgb().formatRgb()}function fi(e){var i,r;return e=(e+"").trim().toLowerCase(),(i=Wo.exec(e))?(r=i[1].length,i=parseInt(i[1],16),r===6?Vi(i):r===3?new ko(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):r===8?fo(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):r===4?fo(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=os.exec(e))?new ko(i[1],i[2],i[3],1):(i=Su.exec(e))?new ko(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=Oo.exec(e))?fo(i[1],i[2],i[3],i[4]):(i=ro.exec(e))?fo(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=cu.exec(e))?Jf(i[1],i[2]/100,i[3]/100,1):(i=Qo.exec(e))?Jf(i[1],i[2]/100,i[3]/100,i[4]):Zt.hasOwnProperty(e)?Vi(Zt[e]):e==="transparent"?new ko(NaN,NaN,NaN,0):null}function Vi(e){return new ko(e>>16&255,e>>8&255,e&255,1)}function fo(e,i,r,o){return o<=0&&(e=i=r=NaN),new ko(e,i,r,o)}function Ws(e){return e instanceof rn||(e=fi(e)),e?(e=e.rgb(),new ko(e.r,e.g,e.b,e.opacity)):new ko}function Co(e,i,r,o){return arguments.length===1?Ws(e):new ko(e,i,r,o==null?1:o)}function ko(e,i,r,o){this.r=+e,this.g=+i,this.b=+r,this.opacity=+o}qt(ko,Co,Mr(rn,{brighter:function(e){return e=e==null?Bn:Math.pow(Bn,e),new ko(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Pn:Math.pow(Pn,e),new ko(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ju,formatHex:ju,formatRgb:hf,toString:hf}));function ju(){return"#"+Qf(this.r)+Qf(this.g)+Qf(this.b)}function hf(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Qf(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Jf(e,i,r,o){return o<=0?e=i=r=NaN:r<=0||r>=1?e=i=NaN:i<=0&&(e=NaN),new ru(e,i,r,o)}function fu(e){if(e instanceof ru)return new ru(e.h,e.s,e.l,e.opacity);if(e instanceof rn||(e=fi(e)),!e)return new ru;if(e instanceof ru)return e;e=e.rgb();var i=e.r/255,r=e.g/255,o=e.b/255,u=Math.min(i,r,o),c=Math.max(i,r,o),p=NaN,g=c-u,y=(c+u)/2;return g?(i===c?p=(r-o)/g+(r<o)*6:r===c?p=(o-i)/g+2:p=(i-r)/g+4,g/=y<.5?c+u:2-c-u,p*=60):g=y>0&&y<1?0:p,new ru(p,g,y,e.opacity)}function cc(e,i,r,o){return arguments.length===1?fu(e):new ru(e,i,r,o==null?1:o)}function ru(e,i,r,o){this.h=+e,this.s=+i,this.l=+r,this.opacity=+o}qt(ru,cc,Mr(rn,{brighter:function(e){return e=e==null?Bn:Math.pow(Bn,e),new ru(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Pn:Math.pow(Pn,e),new ru(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,i=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*i,u=2*r-o;return new ko(Al(e>=240?e-240:e+120,u,o),Al(e,u,o),Al(e<120?e+240:e-120,u,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Al(e,i,r){return(e<60?i+(r-i)*e/60:e<180?r:e<240?i+(r-i)*(240-e)/60:i)*255}function fc(e){return typeof e=="string"?!!d3.color(e):!1}function yo(e){var i=fi(e),r=[0,0,0,0];return i!=null&&(r[0]=i.r/255,r[1]=i.g/255,r[2]=i.b/255,r[3]=i.opacity),r}function Jl(e){var i=e&&e[0],r=e&&e[1],o=e&&e[2],u=i+r*256+o*65536-1;return u}function As(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function Ts(e){var i=window.document.createElement("canvas"),r=i.getContext("2d");i.width=256,i.height=1;for(var o=null,u=r.createLinearGradient(0,0,256,1),c=e.positions[0],p=e.positions[e.positions.length-1],g=0;g<e.colors.length;++g){var y=(e.positions[g]-c)/(p-c);u.addColorStop(y,e.colors[g])}return r.fillStyle=u,r.fillRect(0,0,256,1),o=new Uint8ClampedArray(r.getImageData(0,0,256,1).data),i=null,r=null,{data:o,width:256,height:1}}function Mc(e,i){var r=window.document.createElement("canvas"),o=r.getContext("2d");r.width=256,r.height=1;for(var u=o.createLinearGradient(0,0,256,1),c=i[1]-i[0],p=0;p<e.colors.length;++p){var g=Math.max((e.positions[p]-i[0])/c,0);u.addColorStop(g,e.colors[p])}o.fillStyle=u,o.fillRect(0,0,256,1);var y=o.getImageData(0,0,256,1).data,w=Dl(o,y);return r=null,o=null,w}function Rc(e){var i=window.document.createElement("canvas"),r=i.getContext("2d");i.width=256,i.height=1;var o=r.createImageData(256,1);return o.data.fill(0),e.positions.forEach(function(u,c){var p=yo(e.colors[c]);o.data[u*4+0]=p[0]*255,o.data[u*4+1]=p[1]*255,o.data[u*4+2]=p[2]*255,o.data[u*4+3]=p[3]*255}),i=null,r=null,o}function If(e){var i=window.document.createElement("canvas"),r=i.getContext("2d");r.globalAlpha=1,i.width=256,i.height=1;for(var o=256/e.colors.length,u=0;u<e.colors.length;u++)r.beginPath(),r.lineWidth=2,r.strokeStyle=e.colors[u],r.moveTo(u*o,0),r.lineTo((u+1)*o,0),r.stroke();var c=r.getImageData(0,0,256,1).data,p=Dl(r,c);return i=null,r=null,p}function Ll(e,i){var r=window.document.createElement("canvas"),o=r.getContext("2d");o.globalAlpha=1,r.width=256,r.height=1;var u=i[1]-i[0];e.positions.length-e.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(var c=0;c<e.colors.length;c++)o.beginPath(),o.lineWidth=2,o.strokeStyle=e.colors[c],o.moveTo((e.positions[c]-i[0])/u*255,0),o.lineTo((e.positions[c+1]-i[0])/u*255,0),o.stroke();var p=o.getImageData(0,0,256,1).data,g=Dl(o,p);return r=null,o=null,g}function Dl(e,i){for(var r=e.createImageData(256,1),o=0;o<r.data.length;o+=4)r.data[o+0]=i[o+0],r.data[o+1]=i[o+1],r.data[o+2]=i[o+2],r.data[o+3]=i[o+3];return r}function ec(e){switch(e.type){case"cat":return[0,255];default:return[0,1]}}var ku={BACK:1029,FRONT:1028};function Ic(e){switch(e){case"GAODE1.x":return ku.BACK;case"GAODE2.x":return ku.BACK;case"MAPBOX":return ku.FRONT;case"SIMPLE":return ku.FRONT;case"GLOBEL":return ku.BACK;case"DEBAULT":return ku.FRONT;default:return ku.FRONT}}var In=k(74902),Zi=k(97685),_v=k(74691),eh=k.n(_v),hc=k(50361),Wp=k.n(hc),Ks=k(23279),Pc=k.n(Ks),Fl=k(27361),nu=k.n(Fl),hu=k(51584),Tl=k.n(hu),pc=k(18446),Bl=k.n(pc),Oc=k(14293),Kc=k.n(Oc),th=k(81763),Gp=k.n(th),Uo=k(68630),Od=k.n(Uo),Oh=k(47037),pf=k.n(Oh),ss=k(36719),cp=k.n(ss),fp=k(82492),Lu=k.n(fp),Tt=k(30236),mr=k.n(Tt),Hr=k(97019),Qr=k.n(Hr),On=k(23493),gi=k.n(On),ua=k(44908),_o=k.n(ua),Fs=k(11700),vl=k.n(Fs),rl=k(23560),Lo=k.n(rl),hp=k(13218),kd=k.n(hp),qc=k(52353),pp=k.n(qc),df=k(68929),$p=k.n(df),Ta={isNil:Kc(),merge:Lu(),throttle:gi(),isString:pf(),debounce:Pc(),pull:Qr(),isTypedArray:cp(),isPlainObject:Od(),isNumber:Gp(),isBoolean:Tl(),isEqual:Bl(),cloneDeep:Wp(),uniq:_o(),clamp:eh(),upperFirst:vl(),get:nu(),mergeWith:mr(),isFunction:Lo(),isObject:kd(),isUndefined:pp(),camelCase:$p()},vf=Ta.pull;function rh(e){var i=e;return typeof e=="string"&&(i=window.document.getElementById(e)),i}function nh(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Pf(e){return nh(e).split(/\s+/)}function ih(e){var i,r=(i=document)===null||i===void 0||(i=i.documentElement)===null||i===void 0?void 0:i.style;if(!r)return e[0];for(var o in e)if(e[o]&&e[o]in r)return e[o];return e[0]}function Gs(e,i,r){var o=window.document.createElement(e);return i&&(o.className=i||""),r&&r.appendChild(o),o}function dc(e){var i=e.parentNode;i&&i.removeChild(e)}function Du(e,i){if(e.classList!==void 0)for(var r=Pf(i),o=0,u=r.length;o<u;o++)e.classList.add(r[o]);else if(!Xp(e,i)){var c=vc(e);Yp(e,(c?c+" ":"")+i)}}function ah(e,i){if(e.classList!==void 0){var r=Pf(i);r.forEach(function(o){e.classList.remove(o)})}else Yp(e,nh((" "+vc(e)+" ").replace(" "+i+" "," ")))}function Xp(e,i){if(e.classList!==void 0)return e.classList.contains(i);var r=vc(e);return r.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(r)}function Yp(e,i){e instanceof HTMLElement?e.className=i:e.className.baseVal=i}function oh(e,i,r){r===void 0?Xp(e,i)?ah(e,i):Du(e,i):r?Du(e,i):ah(e,i)}function vc(e){return e instanceof SVGElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function kh(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}var dp=ih(["transform","WebkitTransform"]);function Of(e,i){e.style[dp]=i}function sg(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}}function Ld(e){var i=["padding: "+(e.height/2-8)+"px "+e.width/2+"px;","line-height: "+e.height+"px;","background-image: url("+e.toDataURL()+");"];console.log(`%c
`,i.join(""))}function Dd(){var e,i=window.document.querySelector('meta[name="viewport"]');if(!i)return 1;var r=(e=i.content)===null||e===void 0?void 0:e.split(","),o=r.find(function(u){var c=u.split("="),p=(0,Zi.Z)(c,1),g=p[0];return g==="initial-scale"});return o?o.split("=")[1]*1:1}var Ms=Dd()<1?1:window.devicePixelRatio;function Lh(e,i){e.setAttribute("style","".concat(e.style.cssText).concat(i))}function vp(e){return e.split(";").map(function(i){return i.trim()}).filter(function(i){return i})}function Kp(e,i){var r,o=vp((r=e.getAttribute("style"))!==null&&r!==void 0?r:""),u=vp(i),c=vf.apply(void 0,[o].concat((0,In.Z)(u)));e.setAttribute("style",c.join(";"))}function gp(e){return Object.entries(e).map(function(i){var r=(0,Zi.Z)(i,2),o=r[0],u=r[1];return"".concat(o,": ").concat(u)}).join(";")}function Fd(e,i){return{left:e.left-i.left,top:e.top-i.top,right:i.left+i.width-e.left-e.width,bottom:i.top+i.height-e.top-e.height}}function Dh(e,i){e.checked=i,i?e.setAttribute("checked","true"):e.removeAttribute("checked")}function Fh(e){e.innerHTML=""}function kf(e){e.setAttribute("draggable","false")}function cs(e,i){if(typeof i=="string"){var r=document.createElement("div");for(r.innerHTML=i;r.firstChild;)e.append(r.firstChild)}else Array.isArray(i)?e.append.apply(e,(0,In.Z)(i)):e.append(i)}function mp(e,i){for(var r=Array.isArray(i)?i:[i],o=e;o instanceof Element&&o!==window.document.body;){var u,c;if(r.find(function(p){var g;return(g=o)===null||g===void 0?void 0:g.matches(p)}))return o;o=(u=(c=o)===null||c===void 0?void 0:c.parentElement)!==null&&u!==void 0?u:null}}var tc;function gc(e){return typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap}function uo(){return typeof importScripts=="function"}var fs=uo()?function(){return self.worker&&self.worker.referrer}:function(){return(window.location.protocol==="blob:"?window.parent:window).location.href},no=(tc=navigator)===null||tc===void 0?void 0:tc.userAgent,qp=!!no.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),sh=no.indexOf("Android")>-1||no.indexOf("Adr")>-1;function yp(){for(var e=no,i=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],r=!0,o=0,u=i;o<u.length;o++){var c=u[o];if(e.indexOf(c)>0){r=!1;break}}return r}function Bd(e,i){e.forEach(function(r){i[r]&&(i[r]=i[r].bind(i))})}var Ea=null;function uh(e){var i=[1/0,1/0,-1/0,-1/0];return H(e,function(r){i[0]>r[0]&&(i[0]=r[0]),i[1]>r[1]&&(i[1]=r[1]),i[2]<r[0]&&(i[2]=r[0]),i[3]<r[1]&&(i[3]=r[1])}),i}uh.default=uh;var Lf=uh;function iu(e){return typeof e=="number"}var us=2*Math.PI*6378137/2;function lh(e,i){var r=(0,Zi.Z)(i,4),o=r[0],u=r[1],c=r[2],p=r[3];return e.lng>o&&e.lng<=c&&e.lat>u&&e.lat<=p}function Nd(e){var i=[1/0,1/0,-1/0,-1/0];return e.forEach(function(r){var o=r.coordinates;ys(i,o)}),i}function ys(e,i){return Array.isArray(i[0])?i.forEach(function(r){ys(e,r)}):(e[0]>i[0]&&(e[0]=i[0]),e[1]>i[1]&&(e[1]=i[1]),e[2]<i[0]&&(e[2]=i[0]),e[3]<i[1]&&(e[3]=i[1])),e}function zi(e,i){return nl(e,i)}function nl(e,i){return Array.isArray(e[0])?e.map(function(r){return nl(r,i)}):i(e)}function rc(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};e=Qp(e,i);var o=e[0],u=e[1],c=o*us/180,p=Math.log(Math.tan((90+u)*Math.PI/360))/(Math.PI/180);return p=p*us/180,r.enable&&(c=Number(c.toFixed(r.decimal)),p=Number(p.toFixed(r.decimal))),e.length===3?[c,p,e[2]]:[c,p]}function ch(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,r=e[0],o=e[1],u=r/us*180,c=o/us*180;return c=180/Math.PI*(2*Math.atan(Math.exp(c*Math.PI/180))-Math.PI/2),i!=null&&(u=Number(u.toFixed(i)),c=Number(c.toFixed(i))),e.length===3?[u,c,e[2]]:[u,c]}function gl(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function Zo(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Qp(e,i){if(i===!1)return e;var r=gl(e[0]),o=Zo(e[1]);return o>85&&(o=85),o<-85&&(o=-85),e.length===3?[r,o,e[2]]:[r,o]}function Yn(e){var i=85.0511287798,r=Math.max(Math.min(i,e[1]),-i),o=256<<20,u=Math.PI/180,c=e[0]*u,p=r*u;p=Math.log(Math.tan(Math.PI/4+p/2));var g=.5/Math.PI,y=.5,w=-.5/Math.PI;return u=.5,c=o*(g*c+y),p=o*(w*p+u),[Math.floor(c),Math.floor(p)]}function Qc(e){var i=.5/Math.PI,r=.5,o=-.5/Math.PI,u=.5,c=256<<20,p=_slicedToArray(e,2),g=p[0],y=p[1];g=(g/c-r)/i,y=(y/c-u)/o,y=(Math.atan(Math.pow(Math.E,y))-Math.PI/4)*2,u=Math.PI/180;var w=y/u,O=g/u;return[O,w]}function kc(e,i){var r=85.0511287798,o=Math.PI/180,u=6378137;return i=Math.max(Math.min(r,i),-r),e*=o,i*=o,i=Math.log(Math.tan(Math.PI/4+i/2)),[e*u,i*u]}function _p(e,i){var r=Math.PI/180,o=6378137,u=e/o/r,c=2*(Math.atan(Math.exp(i/o))-Math.PI/4)/r;return[u,c]}function mc(e,i,r){var o=br(i[1]-e[1]),u=br(i[0]-e[0]),c=br(e[1]),p=br(i[1]),g=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(p);return Oe(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),r="meters")}function il(e){var i=Math.PI/180,r=85.0511287798,o=6378137,u=Math.max(Math.min(r,e[1]),-r),c=Math.sin(u*i),p=o*e[0]*i,g=o*Math.log((1+c)/(1-c))/2;return[p,g]}function Bh(e,i){var r=Math.abs(e[1][1]-e[0][1])*i,o=Math.abs(e[1][0]-e[0][0])*i;return[[e[0][0]-o,e[0][1]-r],[e[1][0]+o,e[1][1]+r]]}function gf(e,i){return e[0][0]<=i[0][0]&&e[0][1]<=i[0][1]&&e[1][0]>=i[1][0]&&e[1][1]>=i[1][1]}function Bs(e){return[[e[0],e[1]],[e[2],e[3]]]}function Ml(e){var i=zd(e,[0,0]);return[e[0]/i,e[1]/i]}function zd(e,i){return Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2))}function xp(e,i){return e[0]*i[0]+e[1]*i[1]}function Df(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function xv(e,i){return Math.acos(xp(e,i)/(Df(e)*Df(i)))*180/Math.PI}function nc(e,i){return i[0]>0?i[1]>0?90-Math.atan(i[1]/i[0])*180/Math.PI:90+Math.atan(-i[1]/i[0])*180/Math.PI:i[1]<0?180+(90-Math.atan(i[1]/i[0])*180/Math.PI):270+Math.atan(i[1]/-i[0])*180/Math.PI}function ic(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!e||e.length<2)){for(var r=[0,1],o=0,u=[],c=0;c<e.length-1;c++){var p=e[c],g=e[c+1],y=zd(p,g);o+=y;var w=[p[0]-g[0],p[1]-g[1]],O=nc(r,w);if(c>0){var D=u[c-1].rotation;D-O>360-D+O&&(O=O+360)}u.push({start:p,end:g,dis:y,rotation:O,duration:0})}return u.map(function(V){V.duration=i*(V.dis/o)}),u}}function wa(e){if(iu(e[0]))return e;if(iu(e[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(iu(e[0][0][0])){var i=e,r=0,o=0,u=0;return i.forEach(function(c){c.forEach(function(p){r+=p[0],o+=p[1],u++})}),[r/u,o/u,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function Rs(e){for(var i=e[0],r=e[1],o=e[0],u=e[1],c=0,p=0,g=0,y=0;y<e.length;y+=2){var w=e[y],O=e[y+1];w&&O&&(i=Math.max(w,i),r=Math.max(O,r),o=Math.min(w,o),u=Math.min(O,u),c+=w,p+=O,g++)}return{center:[c/g,p/g],radius:Math.sqrt(Math.pow(i-o,2)+Math.pow(r-u,2))/2}}function Nl(e){return Lf(Ht([Ve(e)]))}function Wu(e){var i=131,r=137,o=0;e+="x";for(var u=Math.floor(9007199254740991/r),c=0;c<e.length;c++)o>u&&(o=Math.floor(o/r)),o=o*i+e.charCodeAt(c);return o}function fh(e){e=e.toString();for(var i=5381,r=e.length;r;)i=i*33^e.charCodeAt(--r);return i>>>0}function Jc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=Math.random()*16|0,r=e==="x"?i:i&3|8;return r.toString(16)})}var Fu=function(e){return e["GAODE1.x"]="GAODE1.x",e["GAODE2.x"]="GAODE2.x",e.MAPBOX="MAPBOX",e.DEFAULT="DEFAUlTMAP",e.SIMPLE="SIMPLE",e.GLOBEL="GLOBEL",e}({});function ml(e,i,r,o,u){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,p=arguments.length>6?arguments[6]:void 0,g=r;return p&&(g=Math.round(r*(c-1))/(c-1)),o?al(e,i,g,o,u):al(e,i,g,.314,u)}function mf(e,i){var r=1-i;return(e[0]*r+e[1]*i)*r+(e[1]*r+e[2]*i)*i}function Ji(e,i){return Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2))}function Ai(e,i,r){var o=[i[0]-e[0],i[1]-e[1]],u=Ji(o,[0,0]),c=Math.atan2(o[1],o[0]),p=u/2/Math.cos(r),g=c+r,y=[p*Math.cos(g)+e[0],p*Math.sin(g)+e[1]];return y}function al(e,i,r,o,u){if(u===MapType["GAODE2.x"]){var c=amap2Project(e[0],e[1]),p=amap2Project(i[0],i[1]),g=Ai(c,p,o),y=[c[0],g[0],p[0]],w=[c[1],g[1],p[1]];return[].concat(_toConsumableArray(amap2UnProject(mf(y,r),mf(w,r))),[0])}else{var O=Ai(e,i,o),D=[e[0],O[0],i[0]],V=[e[1],O[1],i[1]];return[mf(D,r),mf(V,r),0]}}function yl(e,i,r,o,u){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,p=arguments.length>6?arguments[6]:void 0,g=r;return p&&(g=Math.round(r*29)/29),yf(e,i,g,u)}function ol(e,i){var r=[i[0]-e[0],i[1]-e[1]],o=calDistance(r,[0,0]),u=Math.atan2(r[1],r[0]),c=.314,p=o/2/Math.cos(c),g=u+c,y=[p*Math.cos(g)+e[0],p*Math.sin(g)+e[1]];return y}function _s(e,i){var r=1-i;return(e[0]*r+e[1]*i)*r+(e[1]*r+e[2]*i)*i}function yc(e,i){var r=[e[0]-i[0],e[1]-i[1]],o=[Math.sin(r[0]/2),Math.sin(r[1]/2)],u=o[1]*o[1]+Math.cos(e[1])*Math.cos(i[1])*o[0]*o[0];return 2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function yf(e,i,r,o){var u=[degreesToRadians(e[0]),degreesToRadians(e[1])],c=[degreesToRadians(i[0]),degreesToRadians(i[1])];if(o==="GAODE2.x"){var p=ol(u,c),g=[u[0],p[0],c[0]],y=[u[1],p[1],c[1]];return[_s(g,r),_s(y,r),0]}else{var w=yc(u,c);if(Math.abs(w-Math.PI)<.001)return[(1-r)*u[0]+r*c[0],(1-r)*u[1]+r*c[1]];var O=Math.sin((1-r)*w)/Math.sin(w),D=Math.sin(r*w)/Math.sin(w),V=[Math.sin(u[0]),Math.sin(u[1])],X=[Math.cos(u[0]),Math.cos(u[1])],ce=[Math.sin(c[0]),Math.sin(c[1])],de=[Math.cos(c[0]),Math.cos(c[1])],we=O*X[1]*X[0]+D*de[1]*de[0],je=O*X[1]*V[0]+D*de[1]*ce[0],ht=O*V[1]+D*ce[1];return[radiansToDegrees(Math.atan2(je,we)),radiansToDegrees(Math.atan2(ht,Math.sqrt(we*we+je*je)))]}}function Nh(e,i){for(var r=0,o=[],u=0;u<e.length-1;u++){var c=e[u],p=e[u+1],g=au(c,p),y=r;r+=g,o.push({p1:c,p2:p,totalDistance:r,distance:g,lastTotalDistance:y})}for(var w=r*i,O,D,V=0,X=o;V<X.length;V++){var ce=X[V],de=ce.totalDistance;if(de>w){var we=ce.p1,je=ce.p2,ht=(w-ce.lastTotalDistance)/ce.distance,_t=zo(je,we,ht);O=_t[0],D=_t[1];break}}return{lng:O,lat:D,height:0}}function zo(e,i,r){return[e[0]*r+i[0]*(1-r),e[1]*r+i[1]*(1-r)]}function au(e,i){return Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2))}function Jp(e,i){var r=i.featureId,o=e.data.dataArray;return typeof r=="number"&&(o=o.filter(function(u){var c=u.id;return c===r})),o.map(function(u){var c=Ff(u,i);return _objectSpread(_objectSpread({},u),c)})}function zh(e,i){return new Promise(function(r){e.inited?r(Jp(e,i)):e.once("update",function(){r(Jp(e,i))})})}function Ff(e,i){var r=i.offset,o=i.shape,u=i.thetaOffset,c=i.mapVersion,p=i.segmentNumber,g=p===void 0?30:p,y=i.autoFit,w=y===void 0?!0:y,O=e.coordinates;if(o==="line")return pathLineAtOffset(O,r);var D=O[0],V=O[1],X=typeof u=="string"?e[u]||0:u,ce;switch(o){case"arc":ce=arcLineAtOffset;break;case"greatcircle":ce=greatCircleLineAtOffset;break;default:ce=arcLineAtOffset}var de=ce(D,V,r,X,c,g,w),we=_slicedToArray(de,3),je=we[0],ht=we[1],_t=we[2];return{lng:je,lat:ht,height:_t}}var _c=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,r=arguments.length>1?arguments[1]:void 0;(0,Pt.Z)(this,e),this.limit=i,this.destroy=r||this.defaultDestroy,this.order=[],this.clear()}return(0,st.Z)(e,[{key:"clear",value:function(){var r=this;this.order.forEach(function(o){r.delete(o)}),this.cache={},this.order=[]}},{key:"get",value:function(r){var o=this.cache[r];return o&&(this.deleteOrder(r),this.appendOrder(r)),o}},{key:"set",value:function(r,o){this.cache[r]?(this.delete(r),this.cache[r]=o,this.appendOrder(r)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[r]=o,this.appendOrder(r))}},{key:"delete",value:function(r){var o=this.cache[r];o&&(this.deleteCache(r),this.deleteOrder(r),this.destroy(o,r))}},{key:"deleteCache",value:function(r){delete this.cache[r]}},{key:"deleteOrder",value:function(r){var o=this.order.findIndex(function(u){return u===r});o>=0&&this.order.splice(o,1)}},{key:"appendOrder",value:function(r){this.order.push(r)}},{key:"defaultDestroy",value:function(r,o){return null}}]),e}();function Ca(e){if(e.length===0)throw new Error("max requires at least one data point");for(var i=e[0],r=1;r<e.length;r++)e[r]>i&&(i=e[r]);return i*1}function Uh(e){if(e.length===0)throw new Error("min requires at least one data point");for(var i=e[0],r=1;r<e.length;r++)e[r]<i&&(i=e[r]);return i*1}function Lc(e){if(e.length===0)return 0;for(var i=e[0]*1,r=1;r<e.length;r++)i+=e[r]*1;return i}function ed(e){if(e.length===0)throw new Error("mean requires at least one data point");return Lc(e)/e.length}function Zh(e){if(e.length===0)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();for(var i=e[0],r=NaN,o=0,u=1,c=1;c<e.length+1;c++)e[c]!==i?(u>o&&(o=u,r=i),u=1,i=e[c]):u++;return r*1}var hh={min:Uh,max:Ca,mean:ed,sum:Lc,mode:Zh};function bp(e,i){return e.map(function(r){return r[i]})}function Vh(e,i){return hh[e](i)}var Sn=k(15861),Ar=k(97326),Ne=k(4942),Dc=k(64687),nr=k.n(Dc);function Bf(e,i){i===void 0&&(i={});var r=Number(e[0]),o=Number(e[1]),u=Number(e[2]),c=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var p=[r,o],g=[r,c],y=[u,c],w=[u,o];return me([[p,w,y,g,p]],i.properties,{bbox:e,id:i.id})}var xs=k(26729),Sp=k.n(xs),Nf=function(e){return e.Realtime="realtime",e.Overlap="overlap",e.Replace="replace",e}({}),zl=function(e){return e.Loading="Loading",e.Loaded="Loaded",e.Failure="Failure",e.Cancelled="Cancelled",e}({}),Ep=0,S=1,T=2;function C(e){e.forEach(function(i){i.isCurrent&&(i.isVisible=i.isLoaded)})}function I(e){e.forEach(function(i){i.properties.state=Ep}),e.forEach(function(i){i.isCurrent&&!ee(i)&&ae(i)}),e.forEach(function(i){i.isVisible=!!(i.properties.state&T)})}function Z(e){e.forEach(function(r){r.properties.state=Ep}),e.forEach(function(r){r.isCurrent&&ee(r)});var i=e.slice().sort(function(r,o){return r.z-o.z});i.forEach(function(r){r.isVisible=!!(r.properties.state&T),r.children.length&&(r.isVisible||r.properties.state&S)?r.children.forEach(function(o){o.properties.state=S}):r.isCurrent&&ae(r)})}function ee(e){for(;e;){if(e.isLoaded)return e.properties.state|=T,!0;e=e.parent}return!1}function ae(e){e.children.forEach(function(i){i.isLoaded?i.properties.state|=T:ae(i)})}var Me,ot=256,bt=[-1/0,-1/0,1/0,1/0],Vt=.2,Wt=5,$t=(Me={},(0,Ne.Z)(Me,Nf.Realtime,C),(0,Ne.Z)(Me,Nf.Overlap,I),(0,Ne.Z)(Me,Nf.Replace,Z),Me),vr=function(){};function hr(e,i,r){var o=Math.floor((e+180)/360*Math.pow(2,r)),u=Math.floor((1-Math.log(Math.tan(i*Math.PI/180)+1/Math.cos(i*Math.PI/180))/Math.PI)/2*Math.pow(2,r));return[o,u]}function Ir(e,i,r){var o=e/Math.pow(2,r)*360-180,u=Math.PI-2*Math.PI*i/Math.pow(2,r),c=180/Math.PI*Math.atan(.5*(Math.exp(u)-Math.exp(-u)));return[o,c]}var lr=function(i,r,o){var u=Ir(i,r,o),c=(0,Zi.Z)(u,2),p=c[0],g=c[1],y=Ir(i+1,r+1,o),w=(0,Zi.Z)(y,2),O=w[0],D=w[1];return[p,D,O,g]};function Pr(e){var i=e.zoom,r=e.latLonBounds,o=e.maxZoom,u=o===void 0?1/0:o,c=e.minZoom,p=c===void 0?0:c,g=e.zoomOffset,y=g===void 0?0:g,w=e.extent,O=w===void 0?bt:w,D=Math.ceil(i)+y;if(Number.isFinite(p)&&D<p)return[];Number.isFinite(u)&&D>u&&(D=u);for(var V=(0,Zi.Z)(r,4),X=V[0],ce=V[1],de=V[2],we=V[3],je=[Math.max(X,O[0]),Math.max(ce,O[1]),Math.min(de,O[2]),Math.min(we,O[3])],ht=[],_t=hr(je[0],je[1],D),Dt=(0,Zi.Z)(_t,2),Yt=Dt[0],ir=Dt[1],sr=hr(je[2],je[3],D),Tr=(0,Zi.Z)(sr,2),Vr=Tr[0],sn=Tr[1],ln=Yt;ln<=Vr;ln++)for(var Zn=sn;Zn<=ir;Zn++)ht.push({x:ln,y:Zn,z:D});var ci=(Vr+Yt)/2,ki=(ir+sn)/2,eo=function(as,tu){return Math.abs(as-ci)+Math.abs(tu-ki)};return ht.sort(function(Xo,as){return eo(Xo.x,Xo.y)-eo(as.x,as.y)}),ht}var jr=function(i,r,o){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c=Math.pow(2,o),p=c-1,g=c,y=i,w=r;return u&&(y<0?y=y+g:y>p&&(y=y%g)),{warpX:y,warpY:w}};function tn(e){var i=_n();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function _n(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var dn=function(e){(0,yr.Z)(r,e);var i=tn(r);function r(o){var u;(0,Pt.Z)(this,r),u=i.call(this),(0,Ne.Z)((0,Ar.Z)(u),"tileSize",256),(0,Ne.Z)((0,Ar.Z)(u),"isVisible",!1),(0,Ne.Z)((0,Ar.Z)(u),"isCurrent",!1),(0,Ne.Z)((0,Ar.Z)(u),"isVisibleChange",!1),(0,Ne.Z)((0,Ar.Z)(u),"loadedLayers",0),(0,Ne.Z)((0,Ar.Z)(u),"isLayerLoaded",!1),(0,Ne.Z)((0,Ar.Z)(u),"isLoad",!1),(0,Ne.Z)((0,Ar.Z)(u),"isChildLoad",!1),(0,Ne.Z)((0,Ar.Z)(u),"parent",null),(0,Ne.Z)((0,Ar.Z)(u),"children",[]),(0,Ne.Z)((0,Ar.Z)(u),"data",null),(0,Ne.Z)((0,Ar.Z)(u),"properties",{}),(0,Ne.Z)((0,Ar.Z)(u),"loadDataId",0);var c=o.x,p=o.y,g=o.z,y=o.tileSize,w=o.warp,O=w===void 0?!0:w;return u.x=c,u.y=p,u.z=g,u.warp=O||!0,u.tileSize=y,u}return(0,st.Z)(r,[{key:"isLoading",get:function(){return this.loadStatus===zl.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===zl.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===zl.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===zl.Cancelled}},{key:"isDone",get:function(){return[zl.Loaded,zl.Cancelled,zl.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return lr(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var u=(0,Zi.Z)(this.bounds,4),c=u[0],p=u[1],g=u[2],y=u[3],w=[(g-c)/2,(y-p)/2],O=Bf(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:w,meta:`
      `.concat(this.key,`
      `)}});return O}},{key:"key",get:function(){var u="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return u}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p){var g,y,w,O,D,V,X,ce,de,we,je,ht,_t,Dt,Yt,ir,sr;return nr().wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:return g=p.getData,y=p.onLoad,w=p.onError,this.loadDataId++,O=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=zl.Loading,D=null,Vr.prev=7,X=this.x,ce=this.y,de=this.z,we=this.bounds,je=this.tileSize,ht=this.warp,_t=jr(X,ce,de,ht),Dt=_t.warpX,Yt=_t.warpY,ir=this.abortController.signal,sr={x:Dt,y:Yt,z:de,bounds:we,tileSize:je,signal:ir,warp:ht},Vr.next=14,g(sr,this);case 14:D=Vr.sent,Vr.next=20;break;case 17:Vr.prev=17,Vr.t0=Vr.catch(7),V=Vr.t0;case 20:if(O===this.loadDataId){Vr.next=22;break}return Vr.abrupt("return");case 22:if(!(this.isCancelled&&!D)){Vr.next=24;break}return Vr.abrupt("return");case 24:if(!(V||!D)){Vr.next=28;break}return this.loadStatus=zl.Failure,w(V,this),Vr.abrupt("return");case 28:this.loadStatus=zl.Loaded,this.data=D,y(this);case 31:case"end":return Vr.stop()}},c,this,[[7,17]])}));function u(c){return o.apply(this,arguments)}return u}()},{key:"reloadData",value:function(u){this.isLoading&&this.abortLoad(),this.loadData(u)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=zl.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),r}(xs.EventEmitter),Tn=function(i,r){var o=Bs(i),u=Bh(o,r),c=360*3-180,p=85.0511287798065,g=[Math.max(u[0][0],-c),Math.max(u[0][1],-p),Math.min(u[1][0],c),Math.min(u[1][1],p)];return g},Un=function(i,r){var o=Bs(i),u=Bs(r),c=gf(o,u);return c};function si(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=li(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function li(e,i){if(e){if(typeof e=="string")return Ii(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ii(e,i)}}function Ii(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}function ea(e){var i=la();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function la(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ra=Ta.throttle,lo=function(e){return e.TilesLoadStart="tiles-load-start",e.TileLoaded="tile-loaded",e.TileError="tile-error",e.TileUnload="tile-unload",e.TileUpdate="tile-update",e.TilesLoadFinished="tiles-load-finished",e}({}),Fi=function(e){(0,yr.Z)(r,e);var i=ea(r);function r(o){var u;return(0,Pt.Z)(this,r),u=i.call(this),(0,Ne.Z)((0,Ar.Z)(u),"currentTiles",[]),(0,Ne.Z)((0,Ar.Z)(u),"cacheTiles",new Map),(0,Ne.Z)((0,Ar.Z)(u),"throttleUpdate",ra(function(c,p){u.update(c,p)},16)),(0,Ne.Z)((0,Ar.Z)(u),"onTileLoad",function(c){u.emit(lo.TileLoaded,c),u.updateTileVisible(),u.loadFinished()}),(0,Ne.Z)((0,Ar.Z)(u),"onTileError",function(c,p){u.emit(lo.TileError,{error:c,tile:p}),u.updateTileVisible(),u.loadFinished()}),(0,Ne.Z)((0,Ar.Z)(u),"onTileUnload",function(c){u.emit(lo.TileUnload,c),u.loadFinished()}),u.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:bt,getTileData:vr,warp:!0,updateStrategy:Nf.Replace},u.updateOptions(o),u}return(0,st.Z)(r,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(u){return u.isDone})}},{key:"tiles",get:function(){var u=Array.from(this.cacheTiles.values()).sort(function(c,p){return c.z-p.z});return u}},{key:"updateOptions",value:function(u){var c=u.minZoom===void 0?this.options.minZoom:Math.ceil(u.minZoom),p=u.maxZoom===void 0?this.options.maxZoom:Math.floor(u.maxZoom);this.options=(0,ne.Z)((0,ne.Z)((0,ne.Z)({},this.options),u),{},{minZoom:c,maxZoom:p})}},{key:"update",value:function(u,c){var p=this,g=Math.max(0,Math.ceil(u));if(!(this.lastViewStates&&this.lastViewStates.zoom===g&&Un(this.lastViewStates.latLonBoundsBuffer,c))){var y=Tn(c,Vt);this.lastViewStates={zoom:g,latLonBounds:c,latLonBoundsBuffer:y},this.currentZoom=g;var w=!1,O=this.getTileIndices(g,y).filter(function(D){return p.options.warp||D.x>=0&&D.x<Math.pow(2,g)});this.emit(lo.TilesLoadStart),this.currentTiles=O.map(function(D){var V=D.x,X=D.y,ce=D.z,de=p.getTile(V,X,ce);if(de){var we,je,ht=((we=de)===null||we===void 0?void 0:we.isFailure)||((je=de)===null||je===void 0?void 0:je.isCancelled);return ht&&de.loadData({getData:p.options.getTileData,onLoad:p.onTileLoad,onError:p.onTileError}),de}return de=p.createTile(V,X,ce),w=!0,de}),w&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var u=si(this.cacheTiles),c;try{for(u.s();!(c=u.n()).done;){var p=(0,Zi.Z)(c.value,2),g=p[0],y=p[1];if(!this.currentTiles.includes(y)){this.cacheTiles.delete(g),this.onTileUnload(y);return}this.onTileUnload(y),y.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(w){u.e(w)}finally{u.f()}}},{key:"reloadTileById",value:function(u,c,p){var g=this.cacheTiles.get("".concat(c,",").concat(p,",").concat(u));g&&(this.onTileUnload(g),g.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}},{key:"reloadTileByLnglat",value:function(u,c,p){var g=this.getTileByLngLat(u,c,p);g&&this.reloadTileById(g.z,g.x,g.y)}},{key:"reloadTileByExtent",value:function(u,c){var p=this,g=this.getTileIndices(c,u);g.forEach(function(y){p.reloadTileById(y.z,y.x,y.y)})}},{key:"pruneRequests",value:function(){var u=[],c=si(this.cacheTiles.values()),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;g.isLoading&&!g.isCurrent&&!g.isVisible&&u.push(g)}}catch(w){c.e(w)}finally{c.f()}for(;u.length>0;){var y=u.shift();y.abortLoad()}}},{key:"getTileByLngLat",value:function(u,c,p){var g=this.options.zoomOffset,y=Math.ceil(p)+g,w=hr(u,c,y),O=this.tiles.filter(function(D){return D.key==="".concat(w[0],"_").concat(w[1],"_").concat(y)});return O[0]}},{key:"getTileExtent",value:function(u,c){return this.getTileIndices(c,u)}},{key:"getTileByZXY",value:function(u,c,p){var g=this.tiles.filter(function(y){return y.key==="".concat(c,"_").concat(p,"_").concat(u)});return g[0]}},{key:"clear",value:function(){var u=si(this.cacheTiles.values()),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;p.isLoading?p.abortLoad():this.onTileUnload(p)}}catch(g){u.e(g)}finally{u.f()}this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var u=this.options.updateStrategy,c=new Map,p=si(this.cacheTiles.values()),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;c.set(y.key,y.isVisible),y.isCurrent=!1,y.isVisible=!1}}catch(ce){p.e(ce)}finally{p.f()}var w=si(this.currentTiles),O;try{for(w.s();!(O=w.n()).done;){var D=O.value;D.isCurrent=!0,D.isVisible=!0}}catch(ce){w.e(ce)}finally{w.f()}var V=Array.from(this.cacheTiles.values());typeof u=="function"?u(V):$t[u](V);var X=!1;Array.from(this.cacheTiles.values()).forEach(function(ce){ce.isVisible!==c.get(ce.key)?(ce.isVisibleChange=!0,X=!0):ce.isVisibleChange=!1}),X&&this.emit(lo.TileUpdate)}},{key:"getTileIndices",value:function(u,c){var p=this.options,g=p.tileSize,y=p.extent,w=p.zoomOffset,O=Math.floor(this.options.maxZoom),D=Math.ceil(this.options.minZoom),V=Pr({maxZoom:O,minZoom:D,zoomOffset:w,tileSize:g,zoom:u,latLonBounds:c,extent:y});return V}},{key:"getTileId",value:function(u,c,p){var g="".concat(u,",").concat(c,",").concat(p);return g}},{key:"loadFinished",value:function(){var u=!this.currentTiles.some(function(c){return!c.isDone});return u&&this.emit(lo.TilesLoadFinished),u}},{key:"getTile",value:function(u,c,p){var g=this.getTileId(u,c,p),y=this.cacheTiles.get(g);return y}},{key:"createTile",value:function(u,c,p){var g=this.getTileId(u,c,p),y=new dn({x:u,y:c,z:p,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(g,y),y.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),y}},{key:"resizeCacheTiles",value:function(){var u=Wt*this.currentTiles.length,c=this.cacheTiles.size>u;if(c){var p=si(this.cacheTiles),g;try{for(p.s();!(g=p.n()).done;){var y=(0,Zi.Z)(g.value,2),w=y[0],O=y[1];if(!O.isVisible&&!this.currentTiles.includes(O)&&(this.cacheTiles.delete(w),this.onTileUnload(O)),this.cacheTiles.size<=u)break}}catch(D){p.e(D)}finally{p.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var u=si(this.cacheTiles.values()),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;p.parent=null,p.children.length=0}}catch(D){u.e(D)}finally{u.f()}var g=si(this.cacheTiles.values()),y;try{for(g.s();!(y=g.n()).done;){var w=y.value,O=this.getNearestAncestor(w.x,w.y,w.z);w.parent=O,O!=null&&O.children&&O.children.push(w)}}catch(D){g.e(D)}finally{g.f()}}},{key:"getNearestAncestor",value:function(u,c,p){for(;p>this.options.minZoom;){u=Math.floor(u/2),c=Math.floor(c/2),p=p-1;var g=this.getTile(u,c,p);if(g)return g}return null}}]),r}(Sp());function Ia(e){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(e)}function Xa(e){var i=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var o=r[1].charCodeAt(0),u=r[2].charCodeAt(0),c;for(c=o;c<=u;++c)i.push(e.replace(r[0],String.fromCharCode(c)));return i}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var p=parseInt(r[2],10),g=parseInt(r[1],10);g<=p;g++)i.push(e.replace(r[0],g.toString()));return i}return i.push(e),i}function pa(e,i){if(!e||!e.length)throw new Error("url is not allowed to be empty");var r=i.x,o=i.y,u=i.z,c=Xa(e),p=Math.abs(r+o)%c.length,g=vi(c[p])?"".concat(c[p],"/{z}/{x}/{y}"):c[p];return g.replace(/\{x\}/g,r.toString()).replace(/\{y\}/g,o.toString()).replace(/\{z\}/g,u.toString()).replace(/\{bbox\}/g,lr(r,o,u).join(",")).replace(/\{-y\}/g,(Math.pow(2,u)-o-1).toString())}function Sa(e,i){var r=i.x,o=i.y,u=i.z,c=i.layer,p=i.version,g=p===void 0?"1.0.0":p,y=i.style,w=y===void 0?"default":y,O=i.format,D=i.service,V=D===void 0?"WMTS":D,X=i.tileMatrixset,ce="".concat(e,"&SERVICE=").concat(V,"&REQUEST=GetTile&VERSION=").concat(g,"&LAYER=").concat(c,"&STYLE=").concat(w,"&TILEMATRIXSET=").concat(X,"&FORMAT=").concat(O,"&TILECOL=").concat(r,"&TILEROW=").concat(o,"&TILEMATRIX=").concat(u);return ce}function Pa(e,i){if(!e)throw new Error(i||"web worker helper assertion failed.")}var ca={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,document:typeof document!="undefined"&&document},da=ca.self||ca.window||{},Eu=ca.window||ca.self||{},Ns=ca.self||ca.window||{},Gu=ca.document||{},Bu=typeof importScripts=="function",Jo=typeof window!="undefined"&&typeof window.orientation!="undefined",bs=function(){function e(i,r){var o=this;this.name=i,this.workerThread=r,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise(function(u,c){o.resolve=u,o.reject=c})}return e.prototype.postMessage=function(i,r){this.workerThread.postMessage({source:"Main thread",type:i,payload:r})},e.prototype.done=function(i){Pa(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(i)},e.prototype.error=function(i){Pa(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(i)},e}(),$u=bs,qs=new Map;function ef(e){Pa(e.source&&!e.url||!e.source&&e.url);var i=qs.get(e.source||e.url);return i||(e.url&&(i=_l(e.url),qs.set(e.url,i)),e.source&&(i=ac(e.source),qs.set(e.source,i))),Pa(i),i}function _l(e){if(!e.startsWith("http"))return e;var i=Ul(e);return ac(i)}function ac(e){var i=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(i)}function Ul(e){return`try {
  importScripts('`+e+`');
} catch (error) {
  console.error(error);
  throw error;
}`}function _f(e,i,r){i===void 0&&(i=!0);var o=r||new Set;if(e){if(zf(e))o.add(e);else if(zf(e.buffer))o.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(i&&typeof e=="object")for(var u in e)_f(e[u],i,o)}}return r===void 0?Array.from(o):[]}function zf(e){return e?e instanceof ArrayBuffer||typeof MessagePort!="undefined"&&e instanceof MessagePort||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas:!1}var xc=function(){},Uf=function(){function e(i){this.terminated=!1,this.loadableURL="";var r=i.name,o=i.source,u=i.url;Pa(o||u),this.name=r,this.source=o,this.url=u,this.onMessage=xc,this.onError=function(c){return console.log(c)},this.worker=this.createBrowserWorker()}return e.isSupported=function(){return typeof Worker!="undefined"},e.prototype.destroy=function(){this.onMessage=xc,this.onError=xc,this.worker.terminate(),this.terminated=!0},Object.defineProperty(e.prototype,"isRunning",{get:function(){return!!this.onMessage},enumerable:!1,configurable:!0}),e.prototype.postMessage=function(i,r){r=r||_f(i),this.worker.postMessage(i,r)},e.prototype.getErrorFromErrorEvent=function(i){var r="Failed to load ";return r+="worker "+this.name+" from "+this.url+". ",i.message&&(r+=i.message+" in "),i.lineno&&(r+=":"+i.lineno+":"+i.colno),new Error(r)},e.prototype.createBrowserWorker=function(){var i=this;this.loadableURL=ef({source:this.source,url:this.url});var r=new Worker(this.loadableURL,{name:this.name});return r.onmessage=function(o){o.data?i.onMessage(o.data):i.onError(new Error("No data received"))},r.onerror=function(o){i.onError(i.getErrorFromErrorEvent(o)),i.terminated=!0},r.onmessageerror=function(o){return console.error("worker "+i.name+", message error: "+o)},r},e}(),tf=Uf,Zl=function(){return Zl=Object.assign||function(e){for(var i,r=1,o=arguments.length;r<o;r++){i=arguments[r];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(e[u]=i[u])}return e},Zl.apply(this,arguments)},xf=function(e,i,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{w(o.next(O))}catch(D){p(D)}}function y(O){try{w(o.throw(O))}catch(D){p(D)}}function w(O){O.done?c(O.value):u(O.value).then(g,y)}w((o=o.apply(e,i||[])).next())})},wu=function(e,i){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(w){return function(O){return y([w,O])}}function y(w){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=w[0]&2?u.return:w[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,w[1])).done)return c;switch(u=0,c&&(w=[w[0]&2,c.value]),w[0]){case 0:case 1:c=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,u=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!c||w[1]>c[0]&&w[1]<c[3])){r.label=w[1];break}if(w[0]===6&&r.label<c[1]){r.label=c[1],c=w;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(w);break}c[2]&&r.ops.pop(),r.trys.pop();continue}w=i.call(e,r)}catch(O){w=[6,O],u=0}finally{o=c=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Is=function(){function e(i){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=i.source,this.url=i.url,this.setProps(i)}return e.prototype.destroy=function(){this.idleQueue.forEach(function(i){return i.destroy()}),this.isDestroyed=!0},e.prototype.setProps=function(i){this.props=Zl(Zl({},this.props),i),i.name!==void 0&&(this.name=i.name),i.maxConcurrency!==void 0&&(this.maxConcurrency=i.maxConcurrency),i.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=i.maxMobileConcurrency),i.reuseWorkers!==void 0&&(this.reuseWorkers=i.reuseWorkers),i.onDebug!==void 0&&(this.onDebug=i.onDebug)},e.prototype.startJob=function(i,r,o){return r===void 0&&(r=function(u,c,p){return u.done(p)}),o===void 0&&(o=function(u,c){return u.error(c)}),xf(this,void 0,void 0,function(){var u,c=this;return wu(this,function(p){switch(p.label){case 0:return u=new Promise(function(g){return c.jobQueue.push({name:i,onMessage:r,onError:o,onStart:g}),c}),this.startQueuedJob(),[4,u];case 1:return[2,p.sent()]}})})},e.prototype.startQueuedJob=function(){return xf(this,void 0,void 0,function(){var i,r,o;return wu(this,function(u){switch(u.label){case 0:if(!this.jobQueue.length)return[2];if(i=this.getAvailableWorker(),!i)return[2];if(r=this.jobQueue.shift(),!r)return[3,4];this.onDebug({message:"Starting job",name:r.name,backlog:this.jobQueue.length,workerThread:i}),o=new $u(r.name,i),i.onMessage=function(c){return r.onMessage(o,c.type,c.payload)},i.onError=function(c){return r.onError(o,c)},r.onStart(o),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,o.result];case 2:return u.sent(),[3,4];case 3:return this.returnWorkerToQueue(i),[7];case 4:return[2]}})})},e.prototype.returnWorkerToQueue=function(i){var r=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();r?(i.destroy(),this.count--):this.idleQueue.push(i),this.isDestroyed||this.startQueuedJob()},e.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var i=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new tf({name:i,source:this.source,url:this.url})}return null},e.prototype.getMaxConcurrency=function(){return Jo?this.maxMobileConcurrency:this.maxConcurrency},e}(),Xu=Is,Yu=function(){return Yu=Object.assign||function(e){for(var i,r=1,o=arguments.length;r<o;r++){i=arguments[r];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(e[u]=i[u])}return e},Yu.apply(this,arguments)},Vl=function(e){var i=typeof Symbol=="function"&&Symbol.iterator,r=i&&e[i],o=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},po={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},Ku=function(){function e(i){this.workerPools=new Map,this.props=Yu({},po),this.setProps(i),this.workerPools=new Map}return e.isSupported=function(){return tf.isSupported()},e.getWorkerFarm=function(i){return i===void 0&&(i={}),e.workerFarm=e.workerFarm||new e({}),e.workerFarm.setProps(i),e.workerFarm},e.prototype.destroy=function(){var i,r;try{for(var o=Vl(this.workerPools.values()),u=o.next();!u.done;u=o.next()){var c=u.value;c.destroy()}}catch(p){i={error:p}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},e.prototype.setProps=function(i){var r,o;this.props=Yu(Yu({},this.props),i);try{for(var u=Vl(this.workerPools.values()),c=u.next();!c.done;c=u.next()){var p=c.value;p.setProps(this.getWorkerPoolProps())}}catch(g){r={error:g}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}},e.prototype.getWorkerPool=function(i){var r=i.name,o=i.source,u=i.url,c=this.workerPools.get(r);return c||(c=new Xu({name:r,source:o,url:u}),c.setProps(this.getWorkerPoolProps()),this.workerPools.set(r,c)),c},e.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},e}(),Cu=null,bc=new Map,td=function(){function e(){}return Object.defineProperty(e,"onmessage",{set:function(i){self.onmessage=function(r){if(rd(r)){var o=r.data,u=o.type,c=o.payload;i(u,c)}}},enumerable:!1,configurable:!0}),e.addEventListener=function(i){var r=bc.get(i);r||(r=function(o){if(rd(o)){var u=o.data,c=u.type,p=u.payload;i(c,p)}}),self.addEventListener("message",r)},e.removeEventListener=function(i){var r=bc.get(i);bc.delete(i),self.removeEventListener("message",r)},e.postMessage=function(i,r){if(self){var o={source:"Worker thread",type:i,payload:r},u=_f(r);self.postMessage(o,u)}},e}(),ph=null;function rd(e){var i=e.type,r=e.data;return i==="message"&&r&&typeof r.source=="string"&&r.source==="Main thread"}function Hl(e){return JSON.parse(Rl(e))}function Rl(e){var i=new Set;return JSON.stringify(e,function(r,o){if(typeof o=="object"&&o!==null){if(i.has(o))try{return JSON.parse(JSON.stringify(o))}catch(u){return}i.add(o)}return o})}function jl(e){return""+e.name}function Hh(e,i){i===void 0&&(i={});var r=i[e.id]||{},o=e.name+".worker.js",u=r.workerUrl;return i._workerType==="test"&&(u=e.module+"/dist/"+o),u||(u="https://unpkg.com/"+e.module+"/dist/"+o),assert(u),u}var wp=function(e,i,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{w(o.next(O))}catch(D){p(D)}}function y(O){try{w(o.throw(O))}catch(D){p(D)}}function w(O){O.done?c(O.value):u(O.value).then(g,y)}w((o=o.apply(e,i||[])).next())})},rf=function(e,i){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(w){return function(O){return y([w,O])}}function y(w){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=w[0]&2?u.return:w[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,w[1])).done)return c;switch(u=0,c&&(w=[w[0]&2,c.value]),w[0]){case 0:case 1:c=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,u=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!c||w[1]>c[0]&&w[1]<c[3])){r.label=w[1];break}if(w[0]===6&&r.label<c[1]){r.label=c[1],c=w;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(w);break}c[2]&&r.ops.pop(),r.trys.pop();continue}w=i.call(e,r)}catch(O){w=[6,O],u=0}finally{o=c=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}};function Il(e,i){return WorkerFarm.isSupported()?e.worker&&(i==null?void 0:i.worker):!1}function ug(e,i,r,o){return r===void 0&&(r={}),o===void 0&&(o={}),wp(this,void 0,void 0,function(){var u,c,p,g,y,w,O,D;return rf(this,function(V){switch(V.label){case 0:return u=getWorkerName(e),c=getWorkerURL(e,r),p=WorkerFarm.getWorkerFarm(r),g=p.getWorkerPool({name:u,url:c}),y=r.jobName||e.name,[4,g.startJob(y,bv.bind(null,o))];case 1:return w=V.sent(),O=removeNontransferableOptions(r),w.postMessage("process",{input:i,options:O}),[4,w.result];case 2:return D=V.sent(),[2,D.result]}})})}function bv(e,i,r,o){return wp(this,void 0,void 0,function(){var u,c,p,g,y,w,O;return rf(this,function(D){switch(D.label){case 0:switch(u=r,u){case"done":return[3,1];case"error":return[3,2];case"process":return[3,3]}return[3,8];case 1:return i.done(o),[3,9];case 2:return i.error(new Error(o.error)),[3,9];case 3:c=o.id,p=o.input,g=o.options,D.label=4;case 4:return D.trys.push([4,6,,7]),e.process?[4,e.process(p,g)]:(i.postMessage("error",{id:c,error:"Worker not set up to process on main thread"}),[2]);case 5:return y=D.sent(),i.postMessage("done",{id:c,result:y}),[3,7];case 6:return w=D.sent(),O=w instanceof Error?w.message:"unknown error",i.postMessage("error",{id:c,error:O}),[3,7];case 7:return[3,9];case 8:console.warn("process-on-worker: unknown message "+r),D.label=9;case 9:return[2]}})})}var Sc=function(){function e(){this._values=[],this._settlers=[],this._closed=!1}return e.prototype[Symbol.asyncIterator]=function(){return this},e.prototype.push=function(i){return this.enqueue(i)},e.prototype.enqueue=function(i){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var r=this._settlers.shift();i instanceof Error?r.reject(i):r.resolve({value:i})}else this._values.push(i)},e.prototype.close=function(){for(;this._settlers.length>0;){var i=this._settlers.shift();i.resolve({done:!0})}this._closed=!0},e.prototype.next=function(){var i=this;if(this._values.length>0){var r=this._values.shift();return r instanceof Error?Promise.reject(r):Promise.resolve({done:!1,value:r})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise(function(o,u){i._settlers.push({resolve:o,reject:u})})},e}(),o_=null,m0=function(e,i,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{w(o.next(O))}catch(D){p(D)}}function y(O){try{w(o.throw(O))}catch(D){p(D)}}function w(O){O.done?c(O.value):u(O.value).then(g,y)}w((o=o.apply(e,i||[])).next())})},y0=function(e,i){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(w){return function(O){return y([w,O])}}function y(w){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=w[0]&2?u.return:w[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,w[1])).done)return c;switch(u=0,c&&(w=[w[0]&2,c.value]),w[0]){case 0:case 1:c=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,u=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!c||w[1]>c[0]&&w[1]<c[3])){r.label=w[1];break}if(w[0]===6&&r.label<c[1]){r.label=c[1],c=w;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(w);break}c[2]&&r.ops.pop(),r.trys.pop();continue}w=i.call(e,r)}catch(O){w=[6,O],u=0}finally{o=c=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Sv=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e[Symbol.asyncIterator],r;return i?i.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(c){r[c]=e[c]&&function(p){return new Promise(function(g,y){p=e[c](p),u(g,y,p.done,p.value)})}}function u(c,p,g,y){Promise.resolve(y).then(function(w){c({value:w,done:g})},p)}},_0=0,Cp,lg;function Ap(e,i){var r=this;if(typeof self!="undefined"){var o={process:Ud};WorkerBody.onmessage=function(u,c){return m0(r,void 0,void 0,function(){var p,g,y,w,O,D,V,X,ce,de,we;return y0(this,function(je){switch(je.label){case 0:switch(je.trys.push([0,19,,20]),p=u,p){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!e)throw new Error("Worker does not support atomic processing");return[4,e(c.input,c.options||{},o)];case 2:return g=je.sent(),WorkerBody.postMessage("done",{result:g}),[3,18];case 3:if(!i)throw new Error("Worker does not support batched processing");Cp=new AsyncQueue,lg=c.options||{},y=i(Cp,lg,o),je.label=4;case 4:je.trys.push([4,9,10,15]),w=Sv(y),je.label=5;case 5:return[4,w.next()];case 6:if(O=je.sent(),!!O.done)return[3,8];D=O.value,WorkerBody.postMessage("output-batch",{result:D}),je.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return V=je.sent(),de={error:V},[3,15];case 10:return je.trys.push([10,,13,14]),O&&!O.done&&(we=w.return)?[4,we.call(w)]:[3,12];case 11:je.sent(),je.label=12;case 12:return[3,14];case 13:if(de)throw de.error;return[7];case 14:return[7];case 15:return WorkerBody.postMessage("done",{}),[3,18];case 16:return Cp.push(c.input),[3,18];case 17:return Cp.close(),[3,18];case 18:return[3,20];case 19:return X=je.sent(),ce=X instanceof Error?X.message:"",WorkerBody.postMessage("error",{error:ce}),[3,20];case 20:return[2]}})})}}}function Ud(e,i){return i===void 0&&(i={}),new Promise(function(r,o){var u=_0++,c=function(g,y){if(y.id===u)switch(g){case"done":WorkerBody.removeEventListener(c),r(y.result);break;case"error":WorkerBody.removeEventListener(c),o(y.error);break;default:}};WorkerBody.addEventListener(c);var p={id:u,input:e,options:i};WorkerBody.postMessage("process",p)})}var sm=function(e,i,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{w(o.next(O))}catch(D){p(D)}}function y(O){try{w(o.throw(O))}catch(D){p(D)}}function w(O){O.done?c(O.value):u(O.value).then(g,y)}w((o=o.apply(e,i||[])).next())})},Tp=function(e,i){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(w){return function(O){return y([w,O])}}function y(w){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=w[0]&2?u.return:w[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,w[1])).done)return c;switch(u=0,c&&(w=[w[0]&2,c.value]),w[0]){case 0:case 1:c=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,u=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!c||w[1]>c[0]&&w[1]<c[3])){r.label=w[1];break}if(w[0]===6&&r.label<c[1]){r.label=c[1],c=w;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(w);break}c[2]&&r.ops.pop(),r.trys.pop();continue}w=i.call(e,r)}catch(O){w=[6,O],u=0}finally{o=c=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},cg={};function x0(e,i,r){return i===void 0&&(i=null),r===void 0&&(r={}),sm(this,void 0,void 0,function(){return Tp(this,function(o){switch(o.label){case 0:return i&&(e=b0(e,i,r)),cg[e]=cg[e]||fg(e),[4,cg[e]];case 1:return[2,o.sent()]}})})}function b0(e,i,r){if(e.startsWith("http"))return e;var o=r.modules||{};return o[e]?o[e]:r.CDN?(assert(r.CDN.startsWith("http")),r.CDN+"/"+i+"/dist/libs/"+e):isWorker?"../src/libs/"+e:"modules/"+i+"/src/libs/"+e}function fg(e){return sm(this,void 0,void 0,function(){var i,r,o;return Tp(this,function(u){switch(u.label){case 0:return e.endsWith("wasm")?[4,fetch(e)]:[3,3];case 1:return i=u.sent(),[4,i.arrayBuffer()];case 2:return[2,u.sent()];case 3:return isWorker?[2,importScripts(e)]:[4,fetch(e)];case 4:return r=u.sent(),[4,r.text()];case 5:return o=u.sent(),[2,Ev(o,e)]}})})}function Ev(e,i){if(isWorker)return eval.call(global,e),null;var r=document.createElement("script");r.id=i;try{r.appendChild(document.createTextNode(e))}catch(o){r.text=e}return document.body.appendChild(r),null}var Zd="0.0.3",hg={id:"null",name:"null",module:"web-worker-helper",options:{}};function dh(e){var i=e.color;return!i||!i.length?[1,1,1,1]:i}function Mp(e,i,r){return r.length===2?[r[0],r[1],0]:[r[0],r[1],r[2]]}function Ss(e){var i=e.filter;return i?[1]:[0]}function jh(e,i){return[i]}var wv=k(9187),Wl=k.n(wv),Kn=k(31437),bf=Kn.Ue(),Vd=Kn.Ue(),Qs=Kn.Ue(),Gl=Kn.Ue(),Sf=Kn.Ue();function Ec(e,i,r,o,u){Kn.IH(e,r,o),Kn.Fv(e,e),i=Kn.al(-e[1],e[0]);var c=Kn.al(-r[1],r[0]);return[u/Kn.AK(i,c),i]}function vh(e,i){return Kn.t8(e,-i[1],i[0])}function $l(e,i,r){return Kn.lu(e,i,r),Kn.Fv(e,e),e}function gh(e,i){return e[0]===i[0]&&e[1]===i[1]}function pg(e){for(var i=new Map,r=0;r<e.length;r++){var o=e[0].toString()+"-"+e[1].toString();i.get(o)?(e.splice(r,1),r++):i.set(o,o)}return e}var dg=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Pt.Z)(this,e),(0,Ne.Z)(this,"lastFlip",-1),(0,Ne.Z)(this,"miter",Kn.al(0,0)),(0,Ne.Z)(this,"started",!1),(0,Ne.Z)(this,"dash",!1),(0,Ne.Z)(this,"totalDistance",0),(0,Ne.Z)(this,"currentIndex",0),this.join=i.join||"miter",this.cap=i.cap||"butt",this.miterLimit=i.miterLimit||10,this.thickness=i.thickness||1,this.dash=i.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,st.Z)(e,[{key:"extrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,w,O,D=r[g-1];D.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],X=r[g];X.push((w=o[g][2])!==null&&w!==void 0?w:0);var ce=o[g],de=g<r.length-1?[].concat((0,In.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,we=g<o.length-1?o[g+1]:null,je=this.segment_gaode2(u,p,D,X,de,V,ce,we);p+=je}if(this.dash)for(var ht=0;ht<u.positions.length/6;ht++)u.positions[ht*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"simpleExtrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,w,O,D=r[g-1];D.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],X=r[g];X.push((w=o[g][2])!==null&&w!==void 0?w:0);var ce=o[g],de=g<r.length-1?[].concat((0,In.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,we=g<o.length-1?o[g+1]:null,je=this.simpleSegment(u,p,D,X,de,V,ce,we);p+=je}if(this.dash)for(var ht=0;ht<u.positions.length/6;ht++)u.positions[ht*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],w=p<r.length-1?r[p+1]:null,O=this.segment(o,c,g,y,w);c+=O}if(this.dash)for(var D=0;D<o.positions.length/6;D++)o.positions[D*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleExtrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],w=p<r.length-1?r[p+1]:null,O=this.simpleSegment(o,c,g,y,w);c+=O}if(this.dash)for(var D=0;D<o.positions.length/6;D++)o.positions[D*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"segment_gaode2",value:function(r,o,u,c,p,g,y,w){var O=0,D=r.indices,V=r.positions,X=r.normals,ce=this.cap==="square",de=this.join==="bevel",we=Yn([y[0],y[1]]),je=Yn([g[0],g[1]]);$l(Qs,c,u);var ht=0;if(this.dash&&(ht=this.lineSegmentDistance(we,je),this.totalDistance+=ht),this.normal||(this.normal=Kn.Ue(),vh(this.normal,Qs)),!this.started)if(this.started=!0,ce){var _t=Kn.Ue(),Dt=Kn.Ue();Kn.IH(_t,this.normal,Qs),Kn.IH(Dt,this.normal,Qs),X.push(Dt[0],Dt[1],0),X.push(_t[0],_t[1],0),V.push(u[0],u[1],u[2]|0,this.totalDistance-ht,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),V.push(u[0],u[1],u[2]|0,this.totalDistance-ht,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,X,u,this.normal,this.thickness,this.totalDistance-ht);if(D.push(o+0,o+1,o+2),p){gh(c,p)&&Kn.IH(p,c,Kn.Fv(p,Kn.$X(p,c,u))),$l(Gl,p,c);var sr=Ec(Sf,Kn.Ue(),Qs,Gl,this.thickness),Tr=(0,Zi.Z)(sr,2),Vr=Tr[0],sn=Tr[1],ln=Kn.AK(Sf,this.normal)<0?-1:1,Zn=de;if(!Zn&&this.join==="miter"){var ci=Vr;ci>this.miterLimit&&(Zn=!0)}Zn?(X.push(this.normal[0],this.normal[1],0),X.push(sn[0],sn[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,D.push.apply(D,(0,In.Z)(this.lastFlip!==-ln?[o,o+2,o+3]:[o+2,o+1,o+3])),D.push(o+2,o+3,o+4),vh(bf,Gl),Kn.JG(this.normal,bf),X.push(this.normal[0],this.normal[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,O+=3):(this.extrusions(V,X,c,sn,Vr,this.totalDistance),D.push.apply(D,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),ln=-1,Kn.JG(this.normal,sn),O+=2),this.lastFlip=ln}else{if(vh(this.normal,Qs),ce){var Yt=Kn.Ue(),ir=Kn.Ue();Kn.lu(ir,Qs,this.normal),Kn.IH(Yt,Qs,this.normal),X.push(ir[0],ir[1],0),X.push(Yt[0],Yt[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,X,c,this.normal,this.thickness,this.totalDistance);D.push.apply(D,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),O+=2}return O}},{key:"simpleSegment",value:function(r,o,u,c,p){var g=0,y=r.indices,w=r.positions,O=r.normals,D=Yn([c[0],c[1]]),V=Yn([u[0],u[1]]);$l(Qs,D,V);var X=0;if(this.dash&&(X=this.lineSegmentDistance(D,V),this.totalDistance+=X),this.normal||(this.normal=Kn.Ue(),vh(this.normal,Qs)),this.started||(this.started=!0,this.extrusions(w,O,u,this.normal,this.thickness,this.totalDistance-X)),y.push(o+0,o+1,o+2),!p)vh(this.normal,Qs),this.extrusions(w,O,c,this.normal,this.thickness,this.totalDistance),y.push.apply(y,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2;else{var ce=Yn([p[0],p[1]]);gh(D,ce)&&Kn.IH(ce,D,Kn.Fv(ce,Kn.$X(ce,D,V))),$l(Gl,ce,D);var de=Ec(Sf,Kn.Ue(),Qs,Gl,this.thickness),we=(0,Zi.Z)(de,2),je=we[0],ht=we[1],_t=Kn.AK(Sf,this.normal)<0?-1:1;this.extrusions(w,O,c,ht,je,this.totalDistance),y.push.apply(y,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),_t=-1,Kn.JG(this.normal,ht),g+=2,this.lastFlip=_t}return g}},{key:"segment",value:function(r,o,u,c,p){var g=0,y=r.indices,w=r.positions,O=r.normals,D=this.cap==="square",V=this.join==="bevel",X=Yn([c[0],c[1]]),ce=Yn([u[0],u[1]]);$l(Qs,X,ce);var de=0;if(this.dash&&(de=this.lineSegmentDistance(X,ce),this.totalDistance+=de),this.normal||(this.normal=Kn.Ue(),vh(this.normal,Qs)),!this.started)if(this.started=!0,D){var we=Kn.Ue(),je=Kn.Ue();Kn.IH(we,this.normal,Qs),Kn.IH(je,this.normal,Qs),O.push(je[0],je[1],0),O.push(we[0],we[1],0),w.push(u[0],u[1],u[2]|0,this.totalDistance-de,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),w.push(u[0],u[1],u[2]|0,this.totalDistance-de,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(w,O,u,this.normal,this.thickness,this.totalDistance-de);if(y.push(o+0,o+1,o+2),p){var Dt=Yn([p[0],p[1]]);gh(X,Dt)&&Kn.IH(Dt,X,Kn.Fv(Dt,Kn.$X(Dt,X,ce))),$l(Gl,Dt,X);var Yt=Ec(Sf,Kn.Ue(),Qs,Gl,this.thickness),ir=(0,Zi.Z)(Yt,2),sr=ir[0],Tr=ir[1],Vr=Kn.AK(Sf,this.normal)<0?-1:1,sn=V;if(!sn&&this.join==="miter"){var ln=sr;ln>this.miterLimit&&(sn=!0)}sn?(O.push(this.normal[0],this.normal[1],0),O.push(Tr[0],Tr[1],0),w.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Vr,c[2]|0),this.complex.indexes.push(this.currentIndex),w.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*Vr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,y.push.apply(y,(0,In.Z)(this.lastFlip!==-Vr?[o,o+2,o+3]:[o+2,o+1,o+3])),y.push(o+2,o+3,o+4),vh(bf,Gl),Kn.JG(this.normal,bf),O.push(this.normal[0],this.normal[1],0),w.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Vr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,g+=3):(this.extrusions(w,O,c,Tr,sr,this.totalDistance),y.push.apply(y,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),Vr=-1,Kn.JG(this.normal,Tr),g+=2),this.lastFlip=Vr}else{if(vh(this.normal,Qs),D){var ht=Kn.Ue(),_t=Kn.Ue();Kn.lu(_t,Qs,this.normal),Kn.IH(ht,Qs,this.normal),O.push(_t[0],_t[1],0),O.push(ht[0],ht[1],0),w.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),w.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(w,O,c,this.normal,this.thickness,this.totalDistance);y.push.apply(y,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2}return g}},{key:"extrusions",value:function(r,o,u,c,p,g){o.push(c[0],c[1],0),o.push(c[0],c[1],0),r.push(u[0],u[1],u[2]|0,g,-p,u[2]|0),this.complex.indexes.push(this.currentIndex),r.push(u[0],u[1],u[2]|0,g,p,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(r,o){var u=o[0]-r[0],c=o[1]-r[1];return Math.sqrt(u*u+c*c)}}]),e}();function Hd(e){var i=e.coordinates,r=e.originCoordinates,o=e.version,u=new dg({dash:!0,join:"bevel"});if(o==="GAODE2.x"){var c=i;Array.isArray(c[0][0])||(c=[i]);var p=r;Array.isArray(p[0][0])||(p=[r]);for(var g=0;g<c.length;g++){var y=c[g],w=p[g];u.extrude_gaode2(y,w)}}else{var O=i;O[0]&&!Array.isArray(O[0][0])&&(O=[i]),O.forEach(function(V){u.extrude(V)})}var D=u.complex;return{vertices:D.positions,indices:D.indices,normals:D.normals,indexes:D.indexes,size:6}}function nd(e){var i=wa(e.coordinates);return{vertices:[].concat((0,In.Z)(i),(0,In.Z)(i),(0,In.Z)(i),(0,In.Z)(i)),indices:[0,1,2,2,3,0],size:i.length}}function Fc(e){var i=e.coordinates,r=Wl().flatten(i),o=r.vertices,u=r.dimensions,c=r.holes,p=Wl()(o,c,u);return{indices:p,vertices:o,size:u}}var Wh=function(){var e=(0,Sn.Z)(nr().mark(function i(r){var o,u,c,p,g,y,w,O,D;return nr().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p=r.iconMap,g={a_Color:dh,a_Position:Mp,filter:Ss,a_vertexId:jh,a_PickingColor:function(de){var we=de.id;return c?As(we):[0,0,0]},a_DistanceAndIndex:function(de,we,je,ht,_t,Dt){return Dt===void 0?[je[3],10]:[je[3],Dt]},a_Total_Distance:function(de,we,je){return[je[5]]},a_Size:function(de){var we=de.size,je=we===void 0?1:we;return Array.isArray(je)?[je[0],je[1]]:[je,0]},a_Normal:function(de,we,je,ht,_t){return _t},a_Miter:function(de,we,je){return[je[4]]},a_iconMapUV:function(de){var we=de.texture,je=p[we]||{x:0,y:0},ht=je.x,_t=je.y;return[ht,_t]}},y={sizePerElement:0,elements:[]},w=0,O=[],D=3,u.forEach(function(ce,de){var we=Hd(ce),je=we.indices,ht=we.vertices,_t=we.normals,Dt=we.size,Yt=we.indexes;je.forEach(function(Vr){O.push(Vr+w)}),D=Dt;var ir=ht.length/Dt;y.sizePerElement=D,y.elements.push({featureIdx:de,vertices:ht,normals:_t,offset:w}),w+=ir;for(var sr=function(sn){var ln=(_t==null?void 0:_t.slice(sn*3,sn*3+3))||[],Zn=ht.slice(sn*Dt,sn*Dt+Dt),ci=0;Yt&&Yt[sn]!==void 0&&(ci=Yt[sn]),o.forEach(function(ki){if(ki&&g[ki.name]){var eo;(eo=ki.buffer.data).push.apply(eo,(0,In.Z)(g[ki.name](ce,de,Zn,sn,ln,ci)))}})},Tr=0;Tr<ir;Tr++)sr(Tr)}),X.abrupt("return",{descriptors:o,featureLayout:y,indices:O});case 8:case"end":return X.stop()}},i)}));return function(r){return e.apply(this,arguments)}}(),jd=function(){var e=(0,Sn.Z)(nr().mark(function i(r){var o,u,c,p,g,y,w,O,D;return nr().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p=r.shape2d,g={a_Color:dh,a_Position:Mp,filter:Ss,a_vertexId:jh,a_PickingColor:function(de){var we=de.id;return c?As(we):[0,0,0]},a_Shape:function(de){var we=de.shape,je=we===void 0?2:we,ht=p.indexOf(je);return[ht]},a_Extrude:function(de,we,je,ht){var _t=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],Dt=ht%4*3;return[_t[Dt],_t[Dt+1],_t[Dt+2]]},a_Size:function(de){var we=de.size,je=we===void 0?5:we;return Array.isArray(je)?[je[0]]:[je]}},y={sizePerElement:0,elements:[]},w=0,O=[],D=3,u.forEach(function(ce,de){var we=nd(ce),je=we.indices,ht=we.vertices,_t=we.normals,Dt=we.size,Yt=we.indexes;je.forEach(function(Vr){O.push(Vr+w)}),D=Dt;var ir=ht.length/Dt;y.sizePerElement=D,y.elements.push({featureIdx:de,vertices:ht,normals:_t,offset:w}),w+=ir;for(var sr=function(sn){var ln=(_t==null?void 0:_t.slice(sn*3,sn*3+3))||[],Zn=ht.slice(sn*Dt,sn*Dt+Dt),ci=0;Yt&&Yt[sn]!==void 0&&(ci=Yt[sn]),o.forEach(function(ki){if(ki&&g[ki.name]){var eo;(eo=ki.buffer.data).push.apply(eo,(0,In.Z)(g[ki.name](ce,de,Zn,sn,ln,ci)))}})},Tr=0;Tr<ir;Tr++)sr(Tr)}),X.abrupt("return",{descriptors:o,featureLayout:y,indices:O});case 8:case"end":return X.stop()}},i)}));return function(r){return e.apply(this,arguments)}}(),um=function(){var e=(0,Sn.Z)(nr().mark(function i(r){var o,u,c,p,g,y,w,O;return nr().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return o=r.descriptors,u=r.features,c=r.enablePicking,p={a_Color:dh,a_Position:Mp,filter:Ss,a_vertexId:jh,a_PickingColor:function(ce){var de=ce.id;return c?As(de):[0,0,0]}},g={sizePerElement:0,elements:[]},y=0,w=[],O=3,u.forEach(function(X,ce){var de=Fc(X),we=de.indices,je=de.vertices,ht=de.normals,_t=de.size,Dt=de.indexes;we.forEach(function(Tr){w.push(Tr+y)}),O=_t;var Yt=je.length/_t;g.sizePerElement=O,g.elements.push({featureIdx:ce,vertices:je,normals:ht,offset:y}),y+=Yt;for(var ir=function(Vr){var sn=(ht==null?void 0:ht.slice(Vr*3,Vr*3+3))||[],ln=je.slice(Vr*_t,Vr*_t+_t),Zn=0;Dt&&Dt[Vr]!==void 0&&(Zn=Dt[Vr]),o.forEach(function(ci){if(ci&&p[ci.name]){var ki;(ki=ci.buffer.data).push.apply(ki,(0,In.Z)(p[ci.name](X,ce,ln,Vr,sn,Zn)))}})},sr=0;sr<Yt;sr++)ir(sr)}),V.abrupt("return",{descriptors:o,featureLayout:g,indices:w});case 8:case"end":return V.stop()}},i)}));return function(r){return e.apply(this,arguments)}}(),vg={pointFill:jd,line:Wh,polygonFill:um},Cv=(0,ne.Z)({},vg);function zs(e){return Zf.apply(this,arguments)}function Zf(){return Zf=_asyncToGenerator(_regeneratorRuntime.mark(function e(i){var r,o;return _regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=i.workerType,o=i.data,!Cv[r]){c.next=3;break}return c.abrupt("return",Cv[r](o));case 3:return c.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(r,'" non-existent.'))));case 4:case"end":return c.stop()}},e)})),Zf.apply(this,arguments)}var nf=new Map;function id(e,i){nf.set(e,i)}function ad(e){var i=nf.get(e);return i}var Bc="l7-worker",Rp=3,Gh=!0;function Xl(e){registerWorkerSource(Bc,e)}function Ef(){var e=getWorkerSource(Bc);if(!e)throw new Error("get worker failed by workerName: ".concat(Bc,"."));return e}function ls(e,i){return sl.apply(this,arguments)}function sl(){return sl=_asyncToGenerator(_regeneratorRuntime.mark(function e(i,r){var o,u,c,p,g;return _regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return o=Ef(),u=WorkerFarm.getWorkerFarm({maxConcurrency:Rp,reuseWorkers:Gh}),c=u.getWorkerPool({name:Bc,source:o}),w.next=5,c.startJob(Bc,function(O,D,V){return O.done(V)});case 5:return p=w.sent,p.postMessage("process",{input:{workerType:i,data:r}}),w.next=9,p.result;case 9:return g=w.sent,w.abrupt("return",g.result);case 11:case"end":return w.stop()}},e)})),sl.apply(this,arguments)}function $s(e,i){return e==null?i:e}var xl=k(38163),lm=k.n(xl);function $h(e,i){return e.map(function(r){return r[i]*1})}function cm(e){return e===void 0?!1:!Array.isArray(e)&&e.data!==void 0}function Wd(e){return Array.isArray(e)?e.length===0?!1:!!cm(e[0]):!1}function Av(e){return Array.isArray(e)?e.length===0||typeof e[0]=="number":!1}function Tv(e){var i=Object.isFrozen(e)?Ta.cloneDeep(e):e;return lm()(i,!0),i}function fm(e,i){var r=i.x,o=i.y,u=i.x1,c=i.y1,p=i.coordinates,g=i.geometry,y=[];if(!Array.isArray(e))return{dataArray:[]};if(g)return e.filter(function(je){return je[g]&&je[g].type&&je[g].coordinates&&je[g].coordinates.length>0}).forEach(function(je,ht){var _t=Tv(je[g]);ve(_t,function(Dt){var Yt=kt(Dt),ir=(0,ne.Z)((0,ne.Z)({},je),{},{_id:ht,coordinates:Yt});y.push(ir)})}),{dataArray:y};for(var w=0;w<e.length;w++){var O=e[w],D=[];if(p){var V="Polygon";Array.isArray(p[0])||(V="Point"),Array.isArray(p[0])&&!Array.isArray(p[0][0])&&(V="LineString");var X=Tv({type:V,coordinates:O[p]});D=X.coordinates}else if(r&&o&&u&&c){var ce=[parseFloat(O[r]),parseFloat(O[o])],de=[parseFloat(O[u]),parseFloat(O[c])];D=[ce,de]}else r&&o&&(D=[parseFloat(O[r]),parseFloat(O[o])]);var we=(0,ne.Z)((0,ne.Z)({},O),{},{_id:w,coordinates:D});y.push(we)}return{dataArray:y}}function hm(e,i){var r=xe(e);return fm(r,i)}var Ps=k(71002);function S0(e){for(var i=e.toString(),r=5381,o=i.length;o;)r=r*33^i.charCodeAt(--o);return r>>>0}function pm(e,i){return i===void 0?null:(0,Ps.Z)(e.properties[i])*1==="number"?e.properties[i]*1:e.properties&&e.properties[i]?S0(e.properties[i]+"")%1000019:null}function Ip(e,i){var r=[],o={};return e.features?(e.features=e.features.filter(function(u){var c=u.geometry;return u!=null&&c&&c.type&&c.coordinates&&c.coordinates.length>0}),e=Tv(e),e.features.length===0?{dataArray:[],featureKeys:o}:(ve(e,function(u,c){var p=pm(u,i==null?void 0:i.featureId);p===null&&(p=c);var g=p,y=kt(u),w=(0,ne.Z)((0,ne.Z)({},u.properties),{},{coordinates:y,_id:g});r.push(w)}),{dataArray:r,featureKeys:o})):(e.features=[],{dataArray:[]})}function Gd(e,i,r,o){for(var u=o,c=r-i>>1,p=r-i,g,y=e[i],w=e[i+1],O=e[r],D=e[r+1],V=i+3;V<r;V+=3){var X=gg(e[V],e[V+1],y,w,O,D);if(X>u)g=V,u=X;else if(X===u){var ce=Math.abs(V-c);ce<p&&(g=V,p=ce)}}u>o&&(g-i>3&&Gd(e,i,g,o),e[g+2]=u,r-g>3&&Gd(e,g,r,o))}function gg(e,i,r,o,u,c){var p=u-r,g=c-o;if(p!==0||g!==0){var y=((e-r)*p+(i-o)*g)/(p*p+g*g);y>1?(r=u,o=c):y>0&&(r+=p*y,o+=g*y)}return p=e-r,g=i-o,p*p+g*g}function $d(e,i,r,o){var u={id:typeof e=="undefined"?null:e,type:i,geometry:r,tags:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return E0(u),u}function E0(e){var i=e.geometry,r=e.type;if(r==="Point"||r==="MultiPoint"||r==="LineString")Pp(e,i);else if(r==="Polygon"||r==="MultiLineString")for(var o=0;o<i.length;o++)Pp(e,i[o]);else if(r==="MultiPolygon")for(o=0;o<i.length;o++)for(var u=0;u<i[o].length;u++)Pp(e,i[o][u])}function Pp(e,i){for(var r=0;r<i.length;r+=3)e.minX=Math.min(e.minX,i[r]),e.minY=Math.min(e.minY,i[r+1]),e.maxX=Math.max(e.maxX,i[r]),e.maxY=Math.max(e.maxY,i[r+1])}function w0(e,i){var r=[];if(e.type==="FeatureCollection")for(var o=0;o<e.features.length;o++)nt(r,e.features[o],i,o);else e.type==="Feature"?nt(r,e,i):nt(r,{geometry:e},i);return r}function nt(e,i,r,o){if(i.geometry){var u=i.geometry.coordinates,c=i.geometry.type,p=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),g=[],y=i.id;if(r.promoteId?y=i.properties[r.promoteId]:r.generateId&&(y=o||0),c==="Point")Qt(u,g);else if(c==="MultiPoint")for(var w=0;w<u.length;w++)Qt(u[w],g);else if(c==="LineString")Sr(u,g,p,!1);else if(c==="MultiLineString")if(r.lineMetrics){for(w=0;w<u.length;w++)g=[],Sr(u[w],g,p,!1),e.push($d(y,"LineString",g,i.properties));return}else pn(u,g,p,!1);else if(c==="Polygon")pn(u,g,p,!0);else if(c==="MultiPolygon")for(w=0;w<u.length;w++){var O=[];pn(u[w],O,p,!0),g.push(O)}else if(c==="GeometryCollection"){for(w=0;w<i.geometry.geometries.length;w++)nt(e,{id:y,geometry:i.geometry.geometries[w],properties:i.properties},r,o);return}else throw new Error("Input data is not a valid GeoJSON object.");e.push($d(y,c,g,i.properties))}}function Qt(e,i){i.push(kn(e[0])),i.push(vn(e[1])),i.push(0)}function Sr(e,i,r,o){for(var u,c,p=0,g=0;g<e.length;g++){var y=kn(e[g][0]),w=vn(e[g][1]);i.push(y),i.push(w),i.push(0),g>0&&(o?p+=(u*w-y*c)/2:p+=Math.sqrt(Math.pow(y-u,2)+Math.pow(w-c,2))),u=y,c=w}var O=i.length-3;i[2]=1,Gd(i,0,O,r),i[O+2]=1,i.size=Math.abs(p),i.start=0,i.end=i.size}function pn(e,i,r,o){for(var u=0;u<e.length;u++){var c=[];Sr(e[u],c,r,o),i.push(c)}}function kn(e){return e/360+.5}function vn(e){var i=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+i)/(1-i))/Math.PI;return r<0?0:r>1?1:r}function en(e,i,r,o,u,c,p,g){if(r/=i,o/=i,c>=r&&p<o)return e;if(p<r||c>=o)return null;for(var y=[],w=0;w<e.length;w++){var O=e[w],D=O.geometry,V=O.type,X=u===0?O.minX:O.minY,ce=u===0?O.maxX:O.maxY;if(X>=r&&ce<o){y.push(O);continue}else if(ce<r||X>=o)continue;var de=[];if(V==="Point"||V==="MultiPoint")ri(D,de,r,o,u);else if(V==="LineString")Hn(D,de,r,o,u,!1,g.lineMetrics);else if(V==="MultiLineString")ii(D,de,r,o,u,!1);else if(V==="Polygon")ii(D,de,r,o,u,!0);else if(V==="MultiPolygon")for(var we=0;we<D.length;we++){var je=[];ii(D[we],je,r,o,u,!0),je.length&&de.push(je)}if(de.length){if(g.lineMetrics&&V==="LineString"){for(we=0;we<de.length;we++)y.push($d(O.id,V,de[we],O.tags));continue}(V==="LineString"||V==="MultiLineString")&&(de.length===1?(V="LineString",de=de[0]):V="MultiLineString"),(V==="Point"||V==="MultiPoint")&&(V=de.length===3?"Point":"MultiPoint"),y.push($d(O.id,V,de,O.tags))}}return y.length?y:null}function ri(e,i,r,o,u){for(var c=0;c<e.length;c+=3){var p=e[c+u];p>=r&&p<=o&&(i.push(e[c]),i.push(e[c+1]),i.push(e[c+2]))}}function Hn(e,i,r,o,u,c,p){for(var g=di(e),y=u===0?Ei:Rn,w=e.start,O,D,V=0;V<e.length-3;V+=3){var X=e[V],ce=e[V+1],de=e[V+2],we=e[V+3],je=e[V+4],ht=u===0?X:ce,_t=u===0?we:je,Dt=!1;p&&(O=Math.sqrt(Math.pow(X-we,2)+Math.pow(ce-je,2))),ht<r?_t>r&&(D=y(g,X,ce,we,je,r),p&&(g.start=w+O*D)):ht>o?_t<o&&(D=y(g,X,ce,we,je,o),p&&(g.start=w+O*D)):ui(g,X,ce,de),_t<r&&ht>=r&&(D=y(g,X,ce,we,je,r),Dt=!0),_t>o&&ht<=o&&(D=y(g,X,ce,we,je,o),Dt=!0),!c&&Dt&&(p&&(g.end=w+O*D),i.push(g),g=di(e)),p&&(w+=O)}var Yt=e.length-3;X=e[Yt],ce=e[Yt+1],de=e[Yt+2],ht=u===0?X:ce,ht>=r&&ht<=o&&ui(g,X,ce,de),Yt=g.length-3,c&&Yt>=3&&(g[Yt]!==g[0]||g[Yt+1]!==g[1])&&ui(g,g[0],g[1],g[2]),g.length&&i.push(g)}function di(e){var i=[];return i.size=e.size,i.start=e.start,i.end=e.end,i}function ii(e,i,r,o,u,c){for(var p=0;p<e.length;p++)Hn(e[p],i,r,o,u,c,!1)}function ui(e,i,r,o){e.push(i),e.push(r),e.push(o)}function Ei(e,i,r,o,u,c){var p=(c-i)/(o-i);return e.push(c),e.push(r+(u-r)*p),e.push(1),p}function Rn(e,i,r,o,u,c){var p=(c-r)/(u-r);return e.push(i+(o-i)*p),e.push(c),e.push(1),p}function mi(e,i){var r=i.buffer/i.extent,o=e,u=en(e,1,-1-r,r,0,-1,2,i),c=en(e,1,1-r,2+r,0,-1,2,i);return(u||c)&&(o=en(e,1,-r,1+r,0,-1,2,i)||[],u&&(o=Jr(u,1).concat(o)),c&&(o=o.concat(Jr(c,-1)))),o}function Jr(e,i){for(var r=[],o=0;o<e.length;o++){var u=e[o],c=u.type,p;if(c==="Point"||c==="MultiPoint"||c==="LineString")p=En(u.geometry,i);else if(c==="MultiLineString"||c==="Polygon"){p=[];for(var g=0;g<u.geometry.length;g++)p.push(En(u.geometry[g],i))}else if(c==="MultiPolygon")for(p=[],g=0;g<u.geometry.length;g++){for(var y=[],w=0;w<u.geometry[g].length;w++)y.push(En(u.geometry[g][w],i));p.push(y)}r.push($d(u.id,c,p,u.tags))}return r}function En(e,i){var r=[];r.size=e.size,e.start!==void 0&&(r.start=e.start,r.end=e.end);for(var o=0;o<e.length;o+=3)r.push(e[o]+i,e[o+1],e[o+2]);return r}function ai(e,i){if(e.transformed)return e;var r=1<<e.z,o=e.x,u=e.y,c,p,g;for(c=0;c<e.features.length;c++){var y=e.features[c],w=y.geometry,O=y.type;if(y.geometry=[],O===1)for(p=0;p<w.length;p+=2)y.geometry.push(Ti(w[p],w[p+1],i,r,o,u));else for(p=0;p<w.length;p++){var D=[];for(g=0;g<w[p].length;g+=2)D.push(Ti(w[p][g],w[p][g+1],i,r,o,u));y.geometry.push(D)}}return e.transformed=!0,e}function Ti(e,i,r,o,u,c){return[Math.round(r*(e*o-u)),Math.round(r*(i*o-c))]}function Kr(e,i,r,o,u){for(var c=i===u.maxZoom?0:u.tolerance/((1<<i)*u.extent),p={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:o,z:i,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},g=0;g<e.length;g++){p.numFeatures++,Bi(p,e[g],c,u);var y=e[g].minX,w=e[g].minY,O=e[g].maxX,D=e[g].maxY;y<p.minX&&(p.minX=y),w<p.minY&&(p.minY=w),O>p.maxX&&(p.maxX=O),D>p.maxY&&(p.maxY=D)}return p}function Bi(e,i,r,o){var u=i.geometry,c=i.type,p=[];if(c==="Point"||c==="MultiPoint")for(var g=0;g<u.length;g+=3)p.push(u[g]),p.push(u[g+1]),e.numPoints++,e.numSimplified++;else if(c==="LineString")qn(p,u,e,r,!1,!1);else if(c==="MultiLineString"||c==="Polygon")for(g=0;g<u.length;g++)qn(p,u[g],e,r,c==="Polygon",g===0);else if(c==="MultiPolygon")for(var y=0;y<u.length;y++){var w=u[y];for(g=0;g<w.length;g++)qn(p,w[g],e,r,!0,g===0)}if(p.length){var O=i.tags||null;if(c==="LineString"&&o.lineMetrics){O={};for(var D in i.tags)O[D]=i.tags[D];O.mapbox_clip_start=u.start/u.size,O.mapbox_clip_end=u.end/u.size}var V={geometry:p,type:c==="Polygon"||c==="MultiPolygon"?3:c==="LineString"||c==="MultiLineString"?2:1,tags:O};i.id!==null&&(V.id=i.id),e.features.push(V)}}function qn(e,i,r,o,u,c){var p=o*o;if(o>0&&i.size<(u?p:o)){r.numPoints+=i.length/3;return}for(var g=[],y=0;y<i.length;y+=3)(o===0||i[y+2]>p)&&(r.numSimplified++,g.push(i[y]),g.push(i[y+1])),r.numPoints++;u&&Ri(g,c),e.push(g)}function Ri(e,i){for(var r=0,o=0,u=e.length,c=u-2;o<u;c=o,o+=2)r+=(e[o]-e[c])*(e[o+1]+e[c+1]);if(r>0===i)for(o=0,u=e.length;o<u/2;o+=2){var p=e[o],g=e[o+1];e[o]=e[u-2-o],e[o+1]=e[u-1-o],e[u-2-o]=p,e[u-1-o]=g}}function Vn(e,i){return new _i(e,i)}function _i(e,i){i=this.options=La(Object.create(this.options),i);var r=i.debug;if(r&&console.time("preprocess data"),i.maxZoom<0||i.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(i.promoteId&&i.generateId)throw new Error("promoteId and generateId cannot be used together.");var o=w0(e,i);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",i.indexMaxZoom,i.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=mi(o,i),o.length&&this.splitTile(o,0,0,0),r&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}_i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_i.prototype.splitTile=function(e,i,r,o,u,c,p){for(var g=[e,i,r,o],y=this.options,w=y.debug;g.length;){o=g.pop(),r=g.pop(),i=g.pop(),e=g.pop();var O=1<<i,D=na(i,r,o),V=this.tiles[D];if(!V&&(w>1&&console.time("creation"),V=this.tiles[D]=Kr(e,i,r,o,y),this.tileCoords.push({z:i,x:r,y:o}),w)){w>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",i,r,o,V.numFeatures,V.numPoints,V.numSimplified),console.timeEnd("creation"));var X="z"+i;this.stats[X]=(this.stats[X]||0)+1,this.total++}if(V.source=e,u){if(i===y.maxZoom||i===u)continue;var ce=1<<u-i;if(r!==Math.floor(c/ce)||o!==Math.floor(p/ce))continue}else if(i===y.indexMaxZoom||V.numPoints<=y.indexMaxPoints)continue;if(V.source=null,e.length!==0){w>1&&console.time("clipping");var de=.5*y.buffer/y.extent,we=.5-de,je=.5+de,ht=1+de,_t,Dt,Yt,ir,sr,Tr;_t=Dt=Yt=ir=null,sr=en(e,O,r-de,r+je,0,V.minX,V.maxX,y),Tr=en(e,O,r+we,r+ht,0,V.minX,V.maxX,y),e=null,sr&&(_t=en(sr,O,o-de,o+je,1,V.minY,V.maxY,y),Dt=en(sr,O,o+we,o+ht,1,V.minY,V.maxY,y),sr=null),Tr&&(Yt=en(Tr,O,o-de,o+je,1,V.minY,V.maxY,y),ir=en(Tr,O,o+we,o+ht,1,V.minY,V.maxY,y),Tr=null),w>1&&console.timeEnd("clipping"),g.push(_t||[],i+1,r*2,o*2),g.push(Dt||[],i+1,r*2,o*2+1),g.push(Yt||[],i+1,r*2+1,o*2),g.push(ir||[],i+1,r*2+1,o*2+1)}}},_i.prototype.getTile=function(e,i,r){var o=this.options,u=o.extent,c=o.debug;if(e<0||e>24)return null;var p=1<<e;i=(i%p+p)%p;var g=na(e,i,r);if(this.tiles[g])return ai(this.tiles[g],u);c>1&&console.log("drilling down to z%d-%d-%d",e,i,r);for(var y=e,w=i,O=r,D;!D&&y>0;)y--,w=Math.floor(w/2),O=Math.floor(O/2),D=this.tiles[na(y,w,O)];return!D||!D.source?null:(c>1&&console.log("found parent tile z%d-%d-%d",y,w,O),c>1&&console.time("drilling down"),this.splitTile(D.source,y,w,O,e,i,r),c>1&&console.timeEnd("drilling down"),this.tiles[g]?ai(this.tiles[g],u):null)};function na(e,i,r){return((1<<e)*r+i)*32+e}function La(e,i){for(var r in i)e[r]=i[r];return e}var xi=function(){function e(i,r,o,u){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"vectorLayerCache",{}),this.x=r,this.y=o,this.z=u,this.vectorTile=i}return(0,st.Z)(e,[{key:"getTileData",value:function(r){if(!r||!this.vectorTile.layers[r])return[];if(this.vectorLayerCache[r])return this.vectorLayerCache[r];var o=this.vectorTile.layers[r];return o.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),ti={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function Ln(e){for(var i=0,r=0,o=e.length,u=o-1,c,p;r<o;u=r++)c=e[r],p=e[u],i+=(p.x-c.x)*(c.y+p.y);return i}function ta(e){var i=e.length;if(i<=1)return[e];for(var r=[],o,u,c=0;c<i;c++){var p=Ln(e[c]);p!==0&&(u===void 0&&(u=p<0),u===p<0?(o&&r.push(o),o=[e[c]]):o.push(e[c]))}return o&&r.push(o),r}var io=["Unknown","Point","LineString","Polygon"];function Li(e,i,r,o,u){var c=u.geometry,p=u.type,g=u.tags,y=u.id,w=e*Math.pow(2,o),O=e*i,D=e*r,V=io[p],X,ce;function de(ht){for(var _t=0;_t<ht.length;_t++){var Dt=ht[_t];if(Dt[3])break;var Yt=180-(Dt[1]+D)*360/w,ir=(Dt[0]+O)*360/w-180,sr=360/Math.PI*Math.atan(Math.exp(Yt*Math.PI/180))-90;ht[_t]=[ir,sr,0,1]}}switch(p){case 1:var we=[];for(X=0;X<c.length;X++)we[X]=c[X][0];c=we,de(c);break;case 2:for(X=0;X<c.length;X++)de(c[X]);break;case 3:for(c=ta(c),X=0;X<c.length;X++)for(ce=0;ce<c[X].length;ce++)de(c[X][ce]);break}c.length===1?c=c[0]:V="Multi"+V;var je={type:"Feature",geometry:{type:V,coordinates:c},properties:g,id:y,tileOrigin:[0,0],coord:""};return je}var Qa=function(){var e=(0,Sn.Z)(nr().mark(function i(r,o,u,c){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",new Promise(function(y){var w=o.getTile(r.z,r.x,r.y),O=w?w.features.map(function(X){return Li(c,u.x,u.y,u.z,X)}):[],D={layers:{defaultLayer:{features:O}}},V=new xi(D,r.x,r.y,r.z);y(V)}));case 1:case"end":return g.stop()}},i)}));return function(r,o,u,c){return e.apply(this,arguments)}}();function Oa(e){var i={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return e===void 0||typeof e.geojsonvtOptions=="undefined"?i:(0,ne.Z)((0,ne.Z)({},i),e.geojsonvtOptions)}function _a(e,i){var r=Oa(i),o=r.extent||4096,u=Vn(e,r),c=function(y,w){return Qa(w,u,y,o)},p=(0,ne.Z)((0,ne.Z)((0,ne.Z)({},ti),i),{},{getTileData:c});return{data:e,dataArray:[],tilesetOptions:p,isTile:!0}}function So(e,i){var r=i.extent,o=r===void 0?[121.168,30.2828,121.384,30.4219]:r,u=i.requestParameters,c=u===void 0?{}:u,p=new Promise(function(y){e instanceof HTMLImageElement||gc(e)?y([e]):pu(e,c,function(w){y(w)})}),g={originData:e,images:p,_id:1,dataArray:[{_id:0,coordinates:[[o[0],o[1]],[o[2],o[3]]]}]};return g}function pu(e,i,r){var o=[];if(typeof e=="string")ms((0,ne.Z)((0,ne.Z)({},i),{},{url:e}),function(p,g){g&&(o.push(g),r(o))});else{var u=e.length,c=0;e.forEach(function(p){ms((0,ne.Z)((0,ne.Z)({},i),{},{url:p}),function(g,y){c++,y&&o.push(y),c===u&&r(o)})})}return So}var Nu=function(){var e=(0,Sn.Z)(nr().mark(function i(r,o,u,c){var p,g;return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return p={x:o.x,y:o.y,z:o.z},g=pa(r,p),w.abrupt("return",new Promise(function(O){c?c(p,function(D,V){if(D||!V){var X={layers:{defaultLayer:{features:[]}}},ce=new xi(X,o.x,o.y,o.z);O(ce)}else{var de={layers:{defaultLayer:{features:V.features}}},we=new xi(de,o.x,o.y,o.z);O(we)}}):Io((0,ne.Z)((0,ne.Z)({},u),{},{url:g}),function(D,V){if(D||!V){var X={layers:{defaultLayer:{features:[]}}},ce=new xi(X,o.x,o.y,o.z);O(ce)}else{var de=JSON.parse(V),we={layers:{defaultLayer:{features:de}}},je=new xi(we,o.x,o.y,o.z);O(je)}})}));case 3:case"end":return w.stop()}},i)}));return function(r,o,u,c){return e.apply(this,arguments)}}();function vo(e,i){var r=function(c,p){return Nu(e,p,i==null?void 0:i.requestParameters,i.getCustomData)},o=(0,ne.Z)((0,ne.Z)({},i),{},{getTileData:r});return{dataArray:[],tilesetOptions:o,isTile:!0}}var hs=k(38929),Vo=k(3614),du=k.n(Vo),Us=function(){function e(i,r,o,u){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"vectorLayerCache",{}),this.x=r,this.y=o,this.z=u,this.vectorTile=new hs.VectorTile(new(du())(i))}return(0,st.Z)(e,[{key:"getTileData",value:function(r){if(!r||!this.vectorTile.layers[r])return[];if(this.vectorLayerCache[r])return this.vectorLayerCache[r];var o=this.vectorTile.layers[r];if(Array.isArray(o.features))return this.vectorLayerCache[r]=o.features,o.features;for(var u=[],c=0;c<o.length;c++){var p=o.feature(c),g=p.toGeoJSON(this.x,this.y,this.z);u.push((0,ne.Z)((0,ne.Z)({},g),{},{properties:(0,ne.Z)({id:g.id},g.properties)}))}return this.vectorLayerCache[r]=u,u}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),Zs={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Js=function(){var e=(0,Sn.Z)(nr().mark(function i(r,o,u,c,p){var g;return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return g=pa(r,o),w.abrupt("return",new Promise(function(O){if(p)p({x:u.x,y:u.y,z:u.z},function(V,X){if(V||!X)O(void 0);else{var ce=new Us(X,u.x,u.y,u.z);O(ce)}});else{var D=gs((0,ne.Z)((0,ne.Z)({},c),{},{url:g}),function(V,X){if(V||!X)O(void 0);else{var ce=new Us(X,u.x,u.y,u.z);O(ce)}});u.xhrCancel=function(){return D.cancel()}}}));case 2:case"end":return w.stop()}},i)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}();function zu(e,i){var r=Array.isArray(e)?e[0]:e,o=function(p,g){return Js(r,p,g,i==null?void 0:i.requestParameters,i==null?void 0:i.getCustomData)},u=(0,ne.Z)((0,ne.Z)((0,ne.Z)({},Zs),i),{},{getTileData:o});return{data:r,dataArray:[],tilesetOptions:u,isTile:!0}}function ou(e,i,r){switch(e){case"+":return i+r;case"-":return i-r;case"*":return i*r;case"/":return i/r;case"%":return i%r;case"^":return Math.pow(i,r);case"abs":return Math.abs(i);case"floor":return Math.floor(i);case"round":return Math.round(i);case"ceil":return Math.ceil(i);case"sin":return Math.sin(i);case"cos":return Math.cos(i);case"atan":return r===-1?Math.atan(i):Math.atan2(i,r);case"min":return Math.min(i,r);case"max":return Math.max(i,r);case"log10":return Math.log(i);case"log2":return Math.log2(i);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Ua(e,i){for(var r=i[0],o=r.width,u=r.height,c=i.map(function(X){return X.rasterData}),p=o*u,g=[],y=JSON.stringify(e),w=0;w<p;w++){var O=JSON.parse(y),D=Uu(O,c,w);if(typeof D=="number")g.push(D);else{var V=ha(O);g.push(V)}}return g}function Uu(e,i,r){if(e.length===2&&e[0]==="band"&&typeof e[1]=="number")try{return i[e[1]][r]}catch(o){return console.warn("Raster Data err!"),0}e.map(function(o,u){if(Array.isArray(o)&&o.length>0)switch(o[0]){case"band":try{e[u]=i[o[1]][r]}catch(c){console.warn("Raster Data err!"),e[u]=0}break;default:Uu(o,i,r)}})}function Do(e){var i=(0,Zi.Z)(e,3),r=i[0],o=i[1],u=o===void 0?-1:o,c=i[2],p=c===void 0?-1:c;if(r===void 0)return console.warn("Express err!"),["+",0,0];var g=r.replace(/\s+/g,"");return[g,u,p]}function ha(e){var i=Do(e),r=i[0],o=i[1],u=i[2];return Array.isArray(o)&&(o=ha(e[1])),Array.isArray(u)&&(u=ha(e[2])),ou(r,o,u)}var xa={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:Ao}};function Ao(e,i){for(var r=e[0].rasterData,o=e[1].rasterData,u=e[2].rasterData,c=[],p=(i==null?void 0:i.countCut)||[2,98],g=(0,Zi.Z)(p,2),y=g[0],w=g[1],O=(i==null?void 0:i.RMinMax)||Es(r,y,w),D=(i==null?void 0:i.GMinMax)||Es(o,y,w),V=(i==null?void 0:i.BMinMax)||Es(u,y,w),X=0;X<r.length;X++)c.push(Math.max(0,r[X]-O[0])),c.push(Math.max(0,o[X]-D[0])),c.push(Math.max(0,u[X]-V[0]));return{rasterData:c,rMinMax:O,gMinMax:D,bMinMax:V}}function Es(e,i,r){var o=e.slice().sort(function(g,y){return g-y}),u=o.length,c=o[Math.ceil(u*i/100)],p=o[Math.ceil(u*r/100)];return[c,p]}function vu(e,i,r){return pr.apply(this,arguments)}function pr(){return pr=(0,Sn.Z)(nr().mark(function e(i,r,o){var u,c,p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(i.length!==0){D.next=2;break}return D.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return D.next=4,Promise.all(i.map(function(V){var X=V.data,ce=V.bands,de=ce===void 0?[0]:ce;return r(X,de)}));case 4:u=D.sent,c=[],u.forEach(function(V){Array.isArray(V)?c.push.apply(c,(0,In.Z)(V)):c.push(V)}),p=c[0],g=p.width,y=p.height,D.t0=(0,Ps.Z)(o),D.next=D.t0==="function"?11:D.t0==="object"?13:15;break;case 11:return w=o(c),D.abrupt("break",16);case 13:return Array.isArray(o)?w={rasterData:Ua(o,c)}:w=yn(o,c),D.abrupt("break",16);case 15:w={rasterData:c[0].rasterData};case 16:return D.abrupt("return",(0,ne.Z)((0,ne.Z)({},w),{},{width:g,height:y}));case 17:case"end":return D.stop()}},e)})),pr.apply(this,arguments)}function yn(e,i){var r=xa[e.type];if(r.type==="function")return r.method(i,e==null?void 0:e.options);if(r.type==="operation")return e.type==="rgb"?fn(r.expression,i):{rasterData:Ua(r.expression,i)}}function fn(e,i){e.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),e.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),e.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var r=Ua(e.r||["band",0],i),o=Ua(e.g||["band",0],i),u=Ua(e.b||["band",0],i);return[r,o,u]}function Pi(e,i,r,o){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,Sn.Z)(nr().mark(function e(i,r,o,u){var c;return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,vu(i,r,o);case 2:c=g.sent,u(null,{data:c});case 4:case"end":return g.stop()}},e)})),Ya.apply(this,arguments)}function Go(e,i){var r=i.extent,o=i.width,u=i.height,c=i.min,p=i.max,g=i.format,y=i.operation,w,O,D;if(g===void 0||Av(e))w=Array.from(e),O=o,D=u;else{var V=Array.isArray(e)?e:[e];w=vu(V,g,y)}var X={_id:1,dataArray:[{_id:1,data:w,width:O,height:D,min:c,max:p,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return X}var zt=k(27330),It=k(86700),xr=k(84879),Xt={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),IDebugService:Symbol.for("IDebugService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},on=k(49296),kr=k.n(on);function Nr(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Wr(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Wr(e,i){if(e){if(typeof e=="string")return dr(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dr(e,i)}}function dr(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var Dr=30;function tr(e){var i=e.characterSet,r=e.getFontWidth,o=e.fontHeight,u=e.buffer,c=e.maxCanvasWidth,p=e.mapping,g=p===void 0?{}:p,y=e.xOffset,w=y===void 0?0:y,O=e.yOffset,D=O===void 0?0:O,V=0,X=w;Array.from(i).forEach(function(de,we){if(!g[de]){var je=r(de,we);X+Dr>c&&(X=0,V++),g[de]={x:X,y:D+V*Dr,width:Dr,height:Dr,advance:je},X+=Dr}});var ce=o+u*2;return{mapping:g,xOffset:X,yOffset:D+V*ce,canvasHeight:bn(D+(V+1)*ce)}}function Zr(e,i,r){var o=0,u=0,c=0,p=[],g={},y=Nr(e),w;try{for(y.s();!(w=y.n()).done;){var O=w.value;if(!g[O.id]){var D=O.size;o+D+i>r&&(xn(g,p,u),o=0,u=c+u+i,c=0,p=[]),p.push({icon:O,xOffset:o}),o=o+D+i,c=Math.max(c,D)}}}catch(X){y.e(X)}finally{y.f()}p.length>0&&xn(g,p,u);var V=bn(c+u+i);return{mapping:g,canvasHeight:V}}function xn(e,i,r){var o=Nr(i),u;try{for(o.s();!(u=o.n()).done;){var c=u.value,p=c.icon,g=c.xOffset;e[p.id]=(0,ne.Z)((0,ne.Z)({},p),{},{x:g,y:r,image:p.image,width:p.width,height:p.height})}}catch(y){o.e(y)}finally{o.f()}}function bn(e){return Math.pow(2,Math.ceil(Math.log2(e)))}var Gn,zn;function $n(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Yi(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function Yi(e,i){if(e){if(typeof e=="string")return Fn(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fn(e,i)}}function Fn(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}function Hi(e){var i=ma();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function ma(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ka=od(),Fo="sans-serif",Na="normal",Yl=24,mg=3,af=.25,dm=8,wf=1024,vm=1,Mv=1,s_=3,C0=null;function od(){for(var e=[],i=32;i<128;i++)e.push(String.fromCharCode(i));return e}function sd(e,i,r,o){e.font="".concat(o," ").concat(r,"px ").concat(i),e.fillStyle="black",e.textBaseline="middle"}function yg(e,i){for(var r=0;r<e.length;r++)i.data[4*r+3]=e[r]}var Rv=(Gn=(0,It.b2)(),Gn(zn=function(e){(0,yr.Z)(r,e);var i=Hi(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"fontAtlas",void 0),(0,Ne.Z)((0,Ar.Z)(o),"iconFontMap",void 0),(0,Ne.Z)((0,Ar.Z)(o),"iconFontGlyphs",{}),(0,Ne.Z)((0,Ar.Z)(o),"fontOptions",void 0),(0,Ne.Z)((0,Ar.Z)(o),"key",void 0),(0,Ne.Z)((0,Ar.Z)(o),"cache",new _c(s_)),o}return(0,st.Z)(r,[{key:"scale",get:function(){return Mv}},{key:"canvas",get:function(){var u=this.cache.get(this.key);return u&&u.data}},{key:"mapping",get:function(){var u=this.cache.get(this.key);return u&&u.mapping||{}}},{key:"getCanvasByKey",value:function(u){var c=this.cache.get(u);return c&&c.data}},{key:"getMappingByKey",value:function(u){var c=this.cache.get(u);return c&&c.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:Fo,fontWeight:Na,characterSet:ka,fontSize:Yl,buffer:mg,sdf:!0,cutoff:af,radius:dm,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(u){var c=this;u.forEach(function(p){c.iconFontGlyphs[p.name]=p.unicode})}},{key:"addIconFont",value:function(u,c){this.iconFontMap.set(u,c)}},{key:"getIconFontKey",value:function(u){return this.iconFontMap.get(u)||u}},{key:"getGlyph",value:function(u){return this.iconFontGlyphs[u]?String.fromCharCode(parseInt(this.iconFontGlyphs[u],16)):""}},{key:"setFontOptions",value:function(u){this.fontOptions=(0,ne.Z)((0,ne.Z)({},this.fontOptions),u),this.key=this.getKey();var c=this.getNewChars(this.key,this.fontOptions.characterSet),p=this.cache.get(this.key);if(!(p&&c.length===0)){var g=this.generateFontAtlas(this.key,c,p);this.fontAtlas=g,this.cache.set(this.key,g)}}},{key:"addFontFace",value:function(u,c){var p=this,g=document.createElement("style");g.type="text/css",g.innerText=`
        @font-face{
            font-family: '`.concat(u,`';
            src: url('`).concat(c,`') format('woff2'),
            url('`).concat(c,`') format('woff'),
            url('`).concat(c,`') format('truetype');
        }`),g.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(u),"L7text"),document.fonts.ready.then(function(){p.emit("fontloaded",{fontFamily:u})})}catch(y){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(y)}},document.getElementsByTagName("head")[0].appendChild(g)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(u,c,p){var g=this.fontOptions,y=g.fontFamily,w=g.fontWeight,O=g.fontSize,D=g.buffer,V=g.sdf,X=g.radius,ce=g.cutoff,de=g.iconfont,we=p&&p.data;we||(we=window.document.createElement("canvas"),we.width=wf);var je=we.getContext("2d",{willReadFrequently:!0});sd(je,y,O,w);var ht=tr((0,ne.Z)({getFontWidth:function(lu){return je.measureText(lu).width},fontHeight:O*Mv,buffer:D,characterSet:c,maxCanvasWidth:wf},p&&{mapping:p.mapping,xOffset:p.xOffset,yOffset:p.yOffset})),_t=ht.mapping,Dt=ht.canvasHeight,Yt=ht.xOffset,ir=ht.yOffset,sr=je.getImageData(0,0,we.width,we.height);if(we.height=Dt,je.putImageData(sr,0,0),sd(je,y,O,w),V){var Tr=new(kr())(O,D,X,ce,y,w),Vr=je.getImageData(0,0,Tr.size,Tr.size),sn=$n(c),ln;try{for(sn.s();!(ln=sn.n()).done;){var Zn=ln.value;if(de){var ci=String.fromCharCode(parseInt(Zn.replace("&#x","").replace(";",""),16)),ki=Tr.draw(ci);yg(ki,Vr)}else yg(Tr.draw(Zn),Vr);je.putImageData(Vr,_t[Zn].x,_t[Zn].y)}}catch(tu){sn.e(tu)}finally{sn.f()}}else{var eo=$n(c),Xo;try{for(eo.s();!(Xo=eo.n()).done;){var as=Xo.value;je.fillText(as,_t[as].x,_t[as].y+O*vm)}}catch(tu){eo.e(tu)}finally{eo.f()}}return{xOffset:Yt,yOffset:ir,mapping:_t,data:we,width:we.width,height:we.height}}},{key:"getKey",value:function(){var u=this.fontOptions,c=u.fontFamily,p=u.fontWeight;return"".concat(c,"_").concat(p)}},{key:"getNewChars",value:function(u,c){var p=this.cache.get(u);if(!p)return c;var g=[],y=p.mapping,w=new Set(Object.keys(y)),O=new Set(c);return O.forEach(function(D){w.has(D)||g.push(D)}),g}}]),r}(xs.EventEmitter))||zn),gm,Au;function Vs(e){var i=u_();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function u_(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var A0=3,T0=1024,Iv=64,M0=(gm=(0,It.b2)(),gm(Au=function(e){(0,yr.Z)(r,e);var i=Vs(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"canvasHeight",128),(0,Ne.Z)((0,Ar.Z)(o),"texture",void 0),(0,Ne.Z)((0,Ar.Z)(o),"canvas",void 0),(0,Ne.Z)((0,Ar.Z)(o),"iconData",void 0),(0,Ne.Z)((0,Ar.Z)(o),"iconMap",void 0),(0,Ne.Z)((0,Ar.Z)(o),"ctx",void 0),(0,Ne.Z)((0,Ar.Z)(o),"loadingImageCount",0),o}return(0,st.Z)(r,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p,g){var y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return y=new Image,this.loadingImageCount++,this.hasImage(p)?console.warn("Image Id already exists"):this.iconData.push({id:p,size:Iv}),this.updateIconMap(),D.next=6,this.loadImage(g);case 6:y=D.sent,w=this.iconData.find(function(V){return V.id===p}),w&&(w.image=y,w.width=y.width,w.height=y.height),this.update();case 10:case"end":return D.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"addImageMini",value:function(u,c,p){var g=this,y=p.getSceneConfig().canvas,w=y.createImage();if(this.loadingImageCount++,this.hasImage(u))throw new Error("Image Id already exists");this.iconData.push({id:u,size:Iv}),this.updateIconMap(),this.loadImageMini(c,y).then(function(O){w=O;var D=g.iconData.find(function(V){return V.id===u});D&&(D.image=w,D.width=w.width,D.height=w.height),g.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(u){return this.iconMap.hasOwnProperty(u)}},{key:"removeImage",value:function(u){this.hasImage(u)&&(this.iconData=this.iconData.filter(function(c){return c.id!==u}),delete this.iconMap[u],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(u){return new Promise(function(c,p){if(u instanceof HTMLImageElement){c(u);return}var g=new Image;g.crossOrigin="anonymous",g.onload=function(){c(g)},g.onerror=function(){p(new Error("Could not load image at "+u))},g.src=u instanceof File?URL.createObjectURL(u):u})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var u=this;this.canvas.width=T0,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(c){var p=u.iconMap[c],g=p.x,y=p.y,w=p.image,O=p.width,D=O===void 0?64:O,V=p.height,X=V===void 0?64:V,ce=Math.max(D,X),de=ce/Iv,we=X/de,je=D/de;w&&u.ctx.drawImage(w,g+(Iv-je)/2,y+(Iv-we)/2,je,we)})}},{key:"updateIconMap",value:function(){var u=Zr(this.iconData,A0,T0),c=u.mapping,p=u.canvasHeight;this.iconMap=c,this.canvasHeight=p}},{key:"loadImageMini",value:function(u,c){return new Promise(function(p,g){var y=c.createImage();y.crossOrigin="anonymous",y.onload=function(){p(y)},y.onerror=function(){g(new Error("Could not load image at "+u))},y.src=u})}}]),r}(xs.EventEmitter))||Au),Yo=k(49685);function Os(){var e=new Yo.WT(16);return Yo.WT!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Xh(e){var i=new Yo.WT(16);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}function mm(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e}function Tu(e,i,r,o,u,c,p,g,y,w,O,D,V,X,ce,de){var we=new Yo.WT(16);return we[0]=e,we[1]=i,we[2]=r,we[3]=o,we[4]=u,we[5]=c,we[6]=p,we[7]=g,we[8]=y,we[9]=w,we[10]=O,we[11]=D,we[12]=V,we[13]=X,we[14]=ce,we[15]=de,we}function _g(e,i,r,o,u,c,p,g,y,w,O,D,V,X,ce,de,we){return e[0]=i,e[1]=r,e[2]=o,e[3]=u,e[4]=c,e[5]=p,e[6]=g,e[7]=y,e[8]=w,e[9]=O,e[10]=D,e[11]=V,e[12]=X,e[13]=ce,e[14]=de,e[15]=we,e}function Vf(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Xd(e,i){if(e===i){var r=i[1],o=i[2],u=i[3],c=i[6],p=i[7],g=i[11];e[1]=i[4],e[2]=i[8],e[3]=i[12],e[4]=r,e[6]=i[9],e[7]=i[13],e[8]=o,e[9]=c,e[11]=i[14],e[12]=u,e[13]=p,e[14]=g}else e[0]=i[0],e[1]=i[4],e[2]=i[8],e[3]=i[12],e[4]=i[1],e[5]=i[5],e[6]=i[9],e[7]=i[13],e[8]=i[2],e[9]=i[6],e[10]=i[10],e[11]=i[14],e[12]=i[3],e[13]=i[7],e[14]=i[11],e[15]=i[15];return e}function of(e,i){var r=i[0],o=i[1],u=i[2],c=i[3],p=i[4],g=i[5],y=i[6],w=i[7],O=i[8],D=i[9],V=i[10],X=i[11],ce=i[12],de=i[13],we=i[14],je=i[15],ht=r*g-o*p,_t=r*y-u*p,Dt=r*w-c*p,Yt=o*y-u*g,ir=o*w-c*g,sr=u*w-c*y,Tr=O*de-D*ce,Vr=O*we-V*ce,sn=O*je-X*ce,ln=D*we-V*de,Zn=D*je-X*de,ci=V*je-X*we,ki=ht*ci-_t*Zn+Dt*ln+Yt*sn-ir*Vr+sr*Tr;return ki?(ki=1/ki,e[0]=(g*ci-y*Zn+w*ln)*ki,e[1]=(u*Zn-o*ci-c*ln)*ki,e[2]=(de*sr-we*ir+je*Yt)*ki,e[3]=(V*ir-D*sr-X*Yt)*ki,e[4]=(y*sn-p*ci-w*Vr)*ki,e[5]=(r*ci-u*sn+c*Vr)*ki,e[6]=(we*Dt-ce*sr-je*_t)*ki,e[7]=(O*sr-V*Dt+X*_t)*ki,e[8]=(p*Zn-g*sn+w*Tr)*ki,e[9]=(o*sn-r*Zn-c*Tr)*ki,e[10]=(ce*ir-de*Dt+je*ht)*ki,e[11]=(D*Dt-O*ir-X*ht)*ki,e[12]=(g*Vr-p*ln-y*Tr)*ki,e[13]=(r*ln-o*Vr+u*Tr)*ki,e[14]=(de*_t-ce*Yt-we*ht)*ki,e[15]=(O*Yt-D*_t+V*ht)*ki,e):null}function l_(e,i){var r=i[0],o=i[1],u=i[2],c=i[3],p=i[4],g=i[5],y=i[6],w=i[7],O=i[8],D=i[9],V=i[10],X=i[11],ce=i[12],de=i[13],we=i[14],je=i[15];return e[0]=g*(V*je-X*we)-D*(y*je-w*we)+de*(y*X-w*V),e[1]=-(o*(V*je-X*we)-D*(u*je-c*we)+de*(u*X-c*V)),e[2]=o*(y*je-w*we)-g*(u*je-c*we)+de*(u*w-c*y),e[3]=-(o*(y*X-w*V)-g*(u*X-c*V)+D*(u*w-c*y)),e[4]=-(p*(V*je-X*we)-O*(y*je-w*we)+ce*(y*X-w*V)),e[5]=r*(V*je-X*we)-O*(u*je-c*we)+ce*(u*X-c*V),e[6]=-(r*(y*je-w*we)-p*(u*je-c*we)+ce*(u*w-c*y)),e[7]=r*(y*X-w*V)-p*(u*X-c*V)+O*(u*w-c*y),e[8]=p*(D*je-X*de)-O*(g*je-w*de)+ce*(g*X-w*D),e[9]=-(r*(D*je-X*de)-O*(o*je-c*de)+ce*(o*X-c*D)),e[10]=r*(g*je-w*de)-p*(o*je-c*de)+ce*(o*w-c*g),e[11]=-(r*(g*X-w*D)-p*(o*X-c*D)+O*(o*w-c*g)),e[12]=-(p*(D*we-V*de)-O*(g*we-y*de)+ce*(g*V-y*D)),e[13]=r*(D*we-V*de)-O*(o*we-u*de)+ce*(o*V-u*D),e[14]=-(r*(g*we-y*de)-p*(o*we-u*de)+ce*(o*y-u*g)),e[15]=r*(g*V-y*D)-p*(o*V-u*D)+O*(o*y-u*g),e}function Pv(e){var i=e[0],r=e[1],o=e[2],u=e[3],c=e[4],p=e[5],g=e[6],y=e[7],w=e[8],O=e[9],D=e[10],V=e[11],X=e[12],ce=e[13],de=e[14],we=e[15],je=i*p-r*c,ht=i*g-o*c,_t=i*y-u*c,Dt=r*g-o*p,Yt=r*y-u*p,ir=o*y-u*g,sr=w*ce-O*X,Tr=w*de-D*X,Vr=w*we-V*X,sn=O*de-D*ce,ln=O*we-V*ce,Zn=D*we-V*de;return je*Zn-ht*ln+_t*sn+Dt*Vr-Yt*Tr+ir*sr}function Zu(e,i,r){var o=i[0],u=i[1],c=i[2],p=i[3],g=i[4],y=i[5],w=i[6],O=i[7],D=i[8],V=i[9],X=i[10],ce=i[11],de=i[12],we=i[13],je=i[14],ht=i[15],_t=r[0],Dt=r[1],Yt=r[2],ir=r[3];return e[0]=_t*o+Dt*g+Yt*D+ir*de,e[1]=_t*u+Dt*y+Yt*V+ir*we,e[2]=_t*c+Dt*w+Yt*X+ir*je,e[3]=_t*p+Dt*O+Yt*ce+ir*ht,_t=r[4],Dt=r[5],Yt=r[6],ir=r[7],e[4]=_t*o+Dt*g+Yt*D+ir*de,e[5]=_t*u+Dt*y+Yt*V+ir*we,e[6]=_t*c+Dt*w+Yt*X+ir*je,e[7]=_t*p+Dt*O+Yt*ce+ir*ht,_t=r[8],Dt=r[9],Yt=r[10],ir=r[11],e[8]=_t*o+Dt*g+Yt*D+ir*de,e[9]=_t*u+Dt*y+Yt*V+ir*we,e[10]=_t*c+Dt*w+Yt*X+ir*je,e[11]=_t*p+Dt*O+Yt*ce+ir*ht,_t=r[12],Dt=r[13],Yt=r[14],ir=r[15],e[12]=_t*o+Dt*g+Yt*D+ir*de,e[13]=_t*u+Dt*y+Yt*V+ir*we,e[14]=_t*c+Dt*w+Yt*X+ir*je,e[15]=_t*p+Dt*O+Yt*ce+ir*ht,e}function oc(e,i,r){var o=r[0],u=r[1],c=r[2],p,g,y,w,O,D,V,X,ce,de,we,je;return i===e?(e[12]=i[0]*o+i[4]*u+i[8]*c+i[12],e[13]=i[1]*o+i[5]*u+i[9]*c+i[13],e[14]=i[2]*o+i[6]*u+i[10]*c+i[14],e[15]=i[3]*o+i[7]*u+i[11]*c+i[15]):(p=i[0],g=i[1],y=i[2],w=i[3],O=i[4],D=i[5],V=i[6],X=i[7],ce=i[8],de=i[9],we=i[10],je=i[11],e[0]=p,e[1]=g,e[2]=y,e[3]=w,e[4]=O,e[5]=D,e[6]=V,e[7]=X,e[8]=ce,e[9]=de,e[10]=we,e[11]=je,e[12]=p*o+O*u+ce*c+i[12],e[13]=g*o+D*u+de*c+i[13],e[14]=y*o+V*u+we*c+i[14],e[15]=w*o+X*u+je*c+i[15]),e}function wc(e,i,r){var o=r[0],u=r[1],c=r[2];return e[0]=i[0]*o,e[1]=i[1]*o,e[2]=i[2]*o,e[3]=i[3]*o,e[4]=i[4]*u,e[5]=i[5]*u,e[6]=i[6]*u,e[7]=i[7]*u,e[8]=i[8]*c,e[9]=i[9]*c,e[10]=i[10]*c,e[11]=i[11]*c,e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e}function Tx(e,i,r,o){var u=o[0],c=o[1],p=o[2],g=Math.hypot(u,c,p),y,w,O,D,V,X,ce,de,we,je,ht,_t,Dt,Yt,ir,sr,Tr,Vr,sn,ln,Zn,ci,ki,eo;return g<Yo.Ib?null:(g=1/g,u*=g,c*=g,p*=g,y=Math.sin(r),w=Math.cos(r),O=1-w,D=i[0],V=i[1],X=i[2],ce=i[3],de=i[4],we=i[5],je=i[6],ht=i[7],_t=i[8],Dt=i[9],Yt=i[10],ir=i[11],sr=u*u*O+w,Tr=c*u*O+p*y,Vr=p*u*O-c*y,sn=u*c*O-p*y,ln=c*c*O+w,Zn=p*c*O+u*y,ci=u*p*O+c*y,ki=c*p*O-u*y,eo=p*p*O+w,e[0]=D*sr+de*Tr+_t*Vr,e[1]=V*sr+we*Tr+Dt*Vr,e[2]=X*sr+je*Tr+Yt*Vr,e[3]=ce*sr+ht*Tr+ir*Vr,e[4]=D*sn+de*ln+_t*Zn,e[5]=V*sn+we*ln+Dt*Zn,e[6]=X*sn+je*ln+Yt*Zn,e[7]=ce*sn+ht*ln+ir*Zn,e[8]=D*ci+de*ki+_t*eo,e[9]=V*ci+we*ki+Dt*eo,e[10]=X*ci+je*ki+Yt*eo,e[11]=ce*ci+ht*ki+ir*eo,i!==e&&(e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e)}function Ka(e,i,r){var o=Math.sin(r),u=Math.cos(r),c=i[4],p=i[5],g=i[6],y=i[7],w=i[8],O=i[9],D=i[10],V=i[11];return i!==e&&(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[4]=c*u+w*o,e[5]=p*u+O*o,e[6]=g*u+D*o,e[7]=y*u+V*o,e[8]=w*u-c*o,e[9]=O*u-p*o,e[10]=D*u-g*o,e[11]=V*u-y*o,e}function sf(e,i,r){var o=Math.sin(r),u=Math.cos(r),c=i[0],p=i[1],g=i[2],y=i[3],w=i[8],O=i[9],D=i[10],V=i[11];return i!==e&&(e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=c*u-w*o,e[1]=p*u-O*o,e[2]=g*u-D*o,e[3]=y*u-V*o,e[8]=c*o+w*u,e[9]=p*o+O*u,e[10]=g*o+D*u,e[11]=y*o+V*u,e}function Op(e,i,r){var o=Math.sin(r),u=Math.cos(r),c=i[0],p=i[1],g=i[2],y=i[3],w=i[4],O=i[5],D=i[6],V=i[7];return i!==e&&(e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=c*u+w*o,e[1]=p*u+O*o,e[2]=g*u+D*o,e[3]=y*u+V*o,e[4]=w*u-c*o,e[5]=O*u-p*o,e[6]=D*u-g*o,e[7]=V*u-y*o,e}function h(e,i){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function v(e,i){return e[0]=i[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=i[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _(e,i,r){var o=r[0],u=r[1],c=r[2],p=Math.hypot(o,u,c),g,y,w;return p<Yo.Ib?null:(p=1/p,o*=p,u*=p,c*=p,g=Math.sin(i),y=Math.cos(i),w=1-y,e[0]=o*o*w+y,e[1]=u*o*w+c*g,e[2]=c*o*w-u*g,e[3]=0,e[4]=o*u*w-c*g,e[5]=u*u*w+y,e[6]=c*u*w+o*g,e[7]=0,e[8]=o*c*w+u*g,e[9]=u*c*w-o*g,e[10]=c*c*w+y,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function R(e,i){var r=Math.sin(i),o=Math.cos(i);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F(e,i){var r=Math.sin(i),o=Math.cos(i);return e[0]=o,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function z(e,i){var r=Math.sin(i),o=Math.cos(i);return e[0]=o,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $(e,i,r){var o=i[0],u=i[1],c=i[2],p=i[3],g=o+o,y=u+u,w=c+c,O=o*g,D=o*y,V=o*w,X=u*y,ce=u*w,de=c*w,we=p*g,je=p*y,ht=p*w;return e[0]=1-(X+de),e[1]=D+ht,e[2]=V-je,e[3]=0,e[4]=D-ht,e[5]=1-(O+de),e[6]=ce+we,e[7]=0,e[8]=V+je,e[9]=ce-we,e[10]=1-(O+X),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function ue(e,i){var r=new Yo.WT(3),o=-i[0],u=-i[1],c=-i[2],p=i[3],g=i[4],y=i[5],w=i[6],O=i[7],D=o*o+u*u+c*c+p*p;return D>0?(r[0]=(g*p+O*o+y*c-w*u)*2/D,r[1]=(y*p+O*u+w*o-g*c)*2/D,r[2]=(w*p+O*c+g*u-y*o)*2/D):(r[0]=(g*p+O*o+y*c-w*u)*2,r[1]=(y*p+O*u+w*o-g*c)*2,r[2]=(w*p+O*c+g*u-y*o)*2),$(e,i,r),e}function Pe(e,i){return e[0]=i[12],e[1]=i[13],e[2]=i[14],e}function Qe(e,i){var r=i[0],o=i[1],u=i[2],c=i[4],p=i[5],g=i[6],y=i[8],w=i[9],O=i[10];return e[0]=Math.hypot(r,o,u),e[1]=Math.hypot(c,p,g),e[2]=Math.hypot(y,w,O),e}function ct(e,i){var r=new Yo.WT(3);Qe(r,i);var o=1/r[0],u=1/r[1],c=1/r[2],p=i[0]*o,g=i[1]*u,y=i[2]*c,w=i[4]*o,O=i[5]*u,D=i[6]*c,V=i[8]*o,X=i[9]*u,ce=i[10]*c,de=p+O+ce,we=0;return de>0?(we=Math.sqrt(de+1)*2,e[3]=.25*we,e[0]=(D-X)/we,e[1]=(V-y)/we,e[2]=(g-w)/we):p>O&&p>ce?(we=Math.sqrt(1+p-O-ce)*2,e[3]=(D-X)/we,e[0]=.25*we,e[1]=(g+w)/we,e[2]=(V+y)/we):O>ce?(we=Math.sqrt(1+O-p-ce)*2,e[3]=(V-y)/we,e[0]=(g+w)/we,e[1]=.25*we,e[2]=(D+X)/we):(we=Math.sqrt(1+ce-p-O)*2,e[3]=(g-w)/we,e[0]=(V+y)/we,e[1]=(D+X)/we,e[2]=.25*we),e}function mt(e,i,r,o){var u=i[0],c=i[1],p=i[2],g=i[3],y=u+u,w=c+c,O=p+p,D=u*y,V=u*w,X=u*O,ce=c*w,de=c*O,we=p*O,je=g*y,ht=g*w,_t=g*O,Dt=o[0],Yt=o[1],ir=o[2];return e[0]=(1-(ce+we))*Dt,e[1]=(V+_t)*Dt,e[2]=(X-ht)*Dt,e[3]=0,e[4]=(V-_t)*Yt,e[5]=(1-(D+we))*Yt,e[6]=(de+je)*Yt,e[7]=0,e[8]=(X+ht)*ir,e[9]=(de-je)*ir,e[10]=(1-(D+ce))*ir,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Lt(e,i,r,o,u){var c=i[0],p=i[1],g=i[2],y=i[3],w=c+c,O=p+p,D=g+g,V=c*w,X=c*O,ce=c*D,de=p*O,we=p*D,je=g*D,ht=y*w,_t=y*O,Dt=y*D,Yt=o[0],ir=o[1],sr=o[2],Tr=u[0],Vr=u[1],sn=u[2],ln=(1-(de+je))*Yt,Zn=(X+Dt)*Yt,ci=(ce-_t)*Yt,ki=(X-Dt)*ir,eo=(1-(V+je))*ir,Xo=(we+ht)*ir,as=(ce+_t)*sr,tu=(we-ht)*sr,lu=(1-(V+de))*sr;return e[0]=ln,e[1]=Zn,e[2]=ci,e[3]=0,e[4]=ki,e[5]=eo,e[6]=Xo,e[7]=0,e[8]=as,e[9]=tu,e[10]=lu,e[11]=0,e[12]=r[0]+Tr-(ln*Tr+ki*Vr+as*sn),e[13]=r[1]+Vr-(Zn*Tr+eo*Vr+tu*sn),e[14]=r[2]+sn-(ci*Tr+Xo*Vr+lu*sn),e[15]=1,e}function Ut(e,i){var r=i[0],o=i[1],u=i[2],c=i[3],p=r+r,g=o+o,y=u+u,w=r*p,O=o*p,D=o*g,V=u*p,X=u*g,ce=u*y,de=c*p,we=c*g,je=c*y;return e[0]=1-D-ce,e[1]=O+je,e[2]=V-we,e[3]=0,e[4]=O-je,e[5]=1-w-ce,e[6]=X+de,e[7]=0,e[8]=V+we,e[9]=X-de,e[10]=1-w-D,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ur(e,i,r,o,u,c,p){var g=1/(r-i),y=1/(u-o),w=1/(c-p);return e[0]=c*2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c*2*y,e[6]=0,e[7]=0,e[8]=(r+i)*g,e[9]=(u+o)*y,e[10]=(p+c)*w,e[11]=-1,e[12]=0,e[13]=0,e[14]=p*c*2*w,e[15]=0,e}function fr(e,i,r,o,u){var c=1/Math.tan(i/2),p;return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,u!=null&&u!==1/0?(p=1/(o-u),e[10]=(u+o)*p,e[14]=2*u*o*p):(e[10]=-1,e[14]=-2*o),e}var Lr=fr;function Rr(e,i,r,o,u){var c=1/Math.tan(i/2),p;return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,u!=null&&u!==1/0?(p=1/(o-u),e[10]=u*p,e[14]=u*o*p):(e[10]=-1,e[14]=-o),e}function Yr(e,i,r,o){var u=Math.tan(i.upDegrees*Math.PI/180),c=Math.tan(i.downDegrees*Math.PI/180),p=Math.tan(i.leftDegrees*Math.PI/180),g=Math.tan(i.rightDegrees*Math.PI/180),y=2/(p+g),w=2/(u+c);return e[0]=y,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=w,e[6]=0,e[7]=0,e[8]=-((p-g)*y*.5),e[9]=(u-c)*w*.5,e[10]=o/(r-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*r/(r-o),e[15]=0,e}function nn(e,i,r,o,u,c,p){var g=1/(i-r),y=1/(o-u),w=1/(c-p);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*w,e[11]=0,e[12]=(i+r)*g,e[13]=(u+o)*y,e[14]=(p+c)*w,e[15]=1,e}var gn=nn;function wn(e,i,r,o,u,c,p){var g=1/(i-r),y=1/(o-u),w=1/(c-p);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=w,e[11]=0,e[12]=(i+r)*g,e[13]=(u+o)*y,e[14]=c*w,e[15]=1,e}function Dn(e,i,r,o){var u,c,p,g,y,w,O,D,V,X,ce=i[0],de=i[1],we=i[2],je=o[0],ht=o[1],_t=o[2],Dt=r[0],Yt=r[1],ir=r[2];return Math.abs(ce-Dt)<Yo.Ib&&Math.abs(de-Yt)<Yo.Ib&&Math.abs(we-ir)<Yo.Ib?Vf(e):(O=ce-Dt,D=de-Yt,V=we-ir,X=1/Math.hypot(O,D,V),O*=X,D*=X,V*=X,u=ht*V-_t*D,c=_t*O-je*V,p=je*D-ht*O,X=Math.hypot(u,c,p),X?(X=1/X,u*=X,c*=X,p*=X):(u=0,c=0,p=0),g=D*p-V*c,y=V*u-O*p,w=O*c-D*u,X=Math.hypot(g,y,w),X?(X=1/X,g*=X,y*=X,w*=X):(g=0,y=0,w=0),e[0]=u,e[1]=g,e[2]=O,e[3]=0,e[4]=c,e[5]=y,e[6]=D,e[7]=0,e[8]=p,e[9]=w,e[10]=V,e[11]=0,e[12]=-(u*ce+c*de+p*we),e[13]=-(g*ce+y*de+w*we),e[14]=-(O*ce+D*de+V*we),e[15]=1,e)}function pi(e,i,r,o){var u=i[0],c=i[1],p=i[2],g=o[0],y=o[1],w=o[2],O=u-r[0],D=c-r[1],V=p-r[2],X=O*O+D*D+V*V;X>0&&(X=1/Math.sqrt(X),O*=X,D*=X,V*=X);var ce=y*V-w*D,de=w*O-g*V,we=g*D-y*O;return X=ce*ce+de*de+we*we,X>0&&(X=1/Math.sqrt(X),ce*=X,de*=X,we*=X),e[0]=ce,e[1]=de,e[2]=we,e[3]=0,e[4]=D*we-V*de,e[5]=V*ce-O*we,e[6]=O*de-D*ce,e[7]=0,e[8]=O,e[9]=D,e[10]=V,e[11]=0,e[12]=u,e[13]=c,e[14]=p,e[15]=1,e}function wi(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function qi(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Di(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e[3]=i[3]+r[3],e[4]=i[4]+r[4],e[5]=i[5]+r[5],e[6]=i[6]+r[6],e[7]=i[7]+r[7],e[8]=i[8]+r[8],e[9]=i[9]+r[9],e[10]=i[10]+r[10],e[11]=i[11]+r[11],e[12]=i[12]+r[12],e[13]=i[13]+r[13],e[14]=i[14]+r[14],e[15]=i[15]+r[15],e}function oa(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e[3]=i[3]-r[3],e[4]=i[4]-r[4],e[5]=i[5]-r[5],e[6]=i[6]-r[6],e[7]=i[7]-r[7],e[8]=i[8]-r[8],e[9]=i[9]-r[9],e[10]=i[10]-r[10],e[11]=i[11]-r[11],e[12]=i[12]-r[12],e[13]=i[13]-r[13],e[14]=i[14]-r[14],e[15]=i[15]-r[15],e}function Oi(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=i[3]*r,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=i[7]*r,e[8]=i[8]*r,e[9]=i[9]*r,e[10]=i[10]*r,e[11]=i[11]*r,e[12]=i[12]*r,e[13]=i[13]*r,e[14]=i[14]*r,e[15]=i[15]*r,e}function ao(e,i,r,o){return e[0]=i[0]+r[0]*o,e[1]=i[1]+r[1]*o,e[2]=i[2]+r[2]*o,e[3]=i[3]+r[3]*o,e[4]=i[4]+r[4]*o,e[5]=i[5]+r[5]*o,e[6]=i[6]+r[6]*o,e[7]=i[7]+r[7]*o,e[8]=i[8]+r[8]*o,e[9]=i[9]+r[9]*o,e[10]=i[10]+r[10]*o,e[11]=i[11]+r[11]*o,e[12]=i[12]+r[12]*o,e[13]=i[13]+r[13]*o,e[14]=i[14]+r[14]*o,e[15]=i[15]+r[15]*o,e}function Ki(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]&&e[4]===i[4]&&e[5]===i[5]&&e[6]===i[6]&&e[7]===i[7]&&e[8]===i[8]&&e[9]===i[9]&&e[10]===i[10]&&e[11]===i[11]&&e[12]===i[12]&&e[13]===i[13]&&e[14]===i[14]&&e[15]===i[15]}function ji(e,i){var r=e[0],o=e[1],u=e[2],c=e[3],p=e[4],g=e[5],y=e[6],w=e[7],O=e[8],D=e[9],V=e[10],X=e[11],ce=e[12],de=e[13],we=e[14],je=e[15],ht=i[0],_t=i[1],Dt=i[2],Yt=i[3],ir=i[4],sr=i[5],Tr=i[6],Vr=i[7],sn=i[8],ln=i[9],Zn=i[10],ci=i[11],ki=i[12],eo=i[13],Xo=i[14],as=i[15];return Math.abs(r-ht)<=Yo.Ib*Math.max(1,Math.abs(r),Math.abs(ht))&&Math.abs(o-_t)<=Yo.Ib*Math.max(1,Math.abs(o),Math.abs(_t))&&Math.abs(u-Dt)<=Yo.Ib*Math.max(1,Math.abs(u),Math.abs(Dt))&&Math.abs(c-Yt)<=Yo.Ib*Math.max(1,Math.abs(c),Math.abs(Yt))&&Math.abs(p-ir)<=Yo.Ib*Math.max(1,Math.abs(p),Math.abs(ir))&&Math.abs(g-sr)<=Yo.Ib*Math.max(1,Math.abs(g),Math.abs(sr))&&Math.abs(y-Tr)<=Yo.Ib*Math.max(1,Math.abs(y),Math.abs(Tr))&&Math.abs(w-Vr)<=Yo.Ib*Math.max(1,Math.abs(w),Math.abs(Vr))&&Math.abs(O-sn)<=Yo.Ib*Math.max(1,Math.abs(O),Math.abs(sn))&&Math.abs(D-ln)<=Yo.Ib*Math.max(1,Math.abs(D),Math.abs(ln))&&Math.abs(V-Zn)<=Yo.Ib*Math.max(1,Math.abs(V),Math.abs(Zn))&&Math.abs(X-ci)<=Yo.Ib*Math.max(1,Math.abs(X),Math.abs(ci))&&Math.abs(ce-ki)<=Yo.Ib*Math.max(1,Math.abs(ce),Math.abs(ki))&&Math.abs(de-eo)<=Yo.Ib*Math.max(1,Math.abs(de),Math.abs(eo))&&Math.abs(we-Xo)<=Yo.Ib*Math.max(1,Math.abs(we),Math.abs(Xo))&&Math.abs(je-as)<=Yo.Ib*Math.max(1,Math.abs(je),Math.abs(as))}var go=Zu,Ga=oa,oo,yi,Bo=(oo=(0,It.b2)(),oo(yi=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"viewport",void 0),(0,Ne.Z)(this,"overridedViewProjectionMatrix",void 0),(0,Ne.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,Ne.Z)(this,"jitteredProjectionMatrix",void 0),(0,Ne.Z)(this,"viewMatrixInverse",void 0),(0,Ne.Z)(this,"cameraPosition",void 0)}return(0,st.Z)(e,[{key:"init",value:function(){}},{key:"update",value:function(r){this.viewport=r,this.viewMatrixInverse=Os(),of(this.viewMatrixInverse,r.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var r=this.viewport.getCenter(),o=(0,Zi.Z)(r,2),u=o[0],c=o[1];return[u,c]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}},{key:"setViewProjectionMatrix",value:function(r){this.overridedViewProjectionMatrix=r}},{key:"jitterProjectionMatrix",value:function(r,o){var u=h(Os(),[r,o,0]);this.jitteredProjectionMatrix=Zu(Os(),u,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=Zu(Os(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||yi),es=function(e){return e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft",e.TOPCENTER="topcenter",e.BOTTOMCENTER="bottomcenter",e.LEFTCENTER="leftcenter",e.RIGHTCENTER="rightcenter",e.LEFTTOP="lefttop",e.RIGHTTOP="righttop",e.LEFTBOTTOM="leftbottom",e.RIGHTBOTTOM="rightbottom",e}({}),Xs,ps;function ks(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=su(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function su(e,i){if(e){if(typeof e=="string")return Ls(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ls(e,i)}}function Ls(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var gu={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},qu=(Xs=(0,It.b2)(),Xs(ps=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"container",void 0),(0,Ne.Z)(this,"controlCorners",void 0),(0,Ne.Z)(this,"controlContainer",void 0),(0,Ne.Z)(this,"scene",void 0),(0,Ne.Z)(this,"mapsService",void 0),(0,Ne.Z)(this,"controls",[]),(0,Ne.Z)(this,"unAddControls",[])}return(0,st.Z)(e,[{key:"init",value:function(r,o){this.container=r.container,this.scene=o,this.mapsService=o.get(Xt.IMapService),this.initControlPos()}},{key:"addControl",value:function(r,o){var u=o.get(Xt.IMapService);u.map?(r.addTo(this.scene),this.controls.push(r)):this.unAddControls.push(r)}},{key:"getControlByName",value:function(r){return this.controls.find(function(o){return o.controlOption.name===r})}},{key:"removeControl",value:function(r){var o=this.controls.indexOf(r);return o>-1&&this.controls.splice(o,1),r.remove(),this}},{key:"addControls",value:function(){var r=this;this.unAddControls.forEach(function(o){o.addTo(r.scene),r.controls.push(o)}),this.unAddControls=[]}},{key:"destroy",value:function(){var r=ks(this.controls),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;u.remove()}}catch(c){r.e(c)}finally{r.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var r=this.controlCorners={},o="l7-",u=this.controlContainer=Gs("div",o+"control-container",this.container);function c(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=g.map(function(w){return o+w}).join(" ");r[g.filter(function(w){return!["row","column"].includes(w)}).join("")]=Gs("div",y,u)}function p(g){var y=g.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat((0,In.Z)(y),[gu[g]])}Object.values(es).forEach(function(g){c(p(g))}),this.checkCornerOverlap()}},{key:"clearControlPos",value:function(){for(var r in this.controlCorners)this.controlCorners[r]&&dc(this.controlCorners[r]);this.controlContainer&&dc(this.controlContainer)}},{key:"checkCornerOverlap",value:function(){var r=this,o=window.MutationObserver;if(o)for(var u=function(){var y=p[c],w=y.match(/^(top|bottom)(left|right)$/);if(w){var O=(0,Zi.Z)(w,3),D=O[1],V=O[2],X=r.controlCorners["".concat(D).concat(V)],ce=new o(function(de){var we=(0,Zi.Z)(de,1),je=we[0].target;X&&(X.style[D]=je.clientHeight+"px")});ce.observe(r.controlCorners["".concat(V).concat(D)],{childList:!0,attributes:!0})}},c=0,p=Object.keys(this.controlCorners);c<p.length;c++)u()}}]),e}())||ps),Qu,ul,Mu=(Qu=(0,It.b2)(),Qu(ul=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"container",void 0),(0,Ne.Z)(this,"scene",void 0),(0,Ne.Z)(this,"mapsService",void 0),(0,Ne.Z)(this,"markers",[]),(0,Ne.Z)(this,"markerLayers",[]),(0,Ne.Z)(this,"unAddMarkers",[]),(0,Ne.Z)(this,"unAddMarkerLayers",[])}return(0,st.Z)(e,[{key:"addMarkerLayer",value:function(r){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(r),r.addTo(this.scene)):this.unAddMarkerLayers.push(r)}},{key:"removeMarkerLayer",value:function(r){r.destroy(),this.markerLayers.indexOf(r);var o=this.markerLayers.indexOf(r);o>-1&&this.markerLayers.splice(o,1)}},{key:"addMarker",value:function(r){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(r),r.addTo(this.scene)):this.unAddMarkers.push(r)}},{key:"addMarkers",value:function(){var r=this;this.unAddMarkers.forEach(function(o){o.addTo(r.scene),r.markers.push(o)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var r=this;this.unAddMarkerLayers.forEach(function(o){r.markerLayers.push(o),o.addTo(r.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(r){r.remove(),this.markers.indexOf(r);var o=this.markers.indexOf(r);o>-1&&this.markers.splice(o,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(r){this.scene=r,this.mapsService=r.get(Xt.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(r){r.remove()}),this.markers=[],this.markerLayers.forEach(function(r){r.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(r){r.destroy()}}]),e}())||ul),Ju,qa,ts=(Ju=(0,It.b2)(),Ju(qa=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"scene",void 0),(0,Ne.Z)(this,"mapsService",void 0),(0,Ne.Z)(this,"popups",[]),(0,Ne.Z)(this,"unAddPopups",[])}return(0,st.Z)(e,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(r){r!=null&&r.isOpen()&&r.remove();var o=this.popups.indexOf(r);o>-1&&this.popups.splice(o,1);var u=this.unAddPopups.indexOf(r);u>-1&&this.unAddPopups.splice(u,1)}},{key:"destroy",value:function(){this.popups.forEach(function(r){return r.remove()})}},{key:"addPopup",value:function(r){var o=this;r&&r.getOptions().autoClose&&[].concat((0,In.Z)(this.popups),(0,In.Z)(this.unAddPopups)).forEach(function(u){u.getOptions().autoClose&&o.removePopup(u)}),this.isMarkerReady?(r.addTo(this.scene),this.popups.push(r)):this.unAddPopups.push(r),r.on("close",function(){o.removePopup(r)})}},{key:"initPopup",value:function(){var r=this;this.unAddPopups.length&&this.unAddPopups.forEach(function(o){r.addPopup(o),r.unAddPopups=[]})}},{key:"init",value:function(r){this.scene=r,this.mapsService=r.get(Xt.IMapService)}}]),e}())||qa),To=function(e){return e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max",e.none="none",e}({}),mo=function(e){return e.MULTIPLE="MULTIPLE",e.SINGLE="SINGLE",e}({}),ll=function(e){return e.AND="and",e.OR="or",e}({}),$o=function(e){return e.INIT="init",e.UPDATE="update",e}({}),Ds={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},mu=Ds,bl,Eo,Hf=Ta.merge,Sl={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Yh={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:ll.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},yu=(bl=(0,It.b2)(),bl(Eo=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"sceneConfigCache",{}),(0,Ne.Z)(this,"layerConfigCache",{}),(0,Ne.Z)(this,"layerAttributeConfigCache",{})}return(0,st.Z)(e,[{key:"getSceneConfig",value:function(r){return this.sceneConfigCache[r]}},{key:"getSceneWarninfo",value:function(r){return mu[r]}},{key:"setSceneConfig",value:function(r,o){this.sceneConfigCache[r]=(0,ne.Z)((0,ne.Z)({},Sl),o)}},{key:"getLayerConfig",value:function(r){return this.layerConfigCache[r]}},{key:"setLayerConfig",value:function(r,o,u){this.layerConfigCache[o]=(0,ne.Z)({},Hf({},this.sceneConfigCache[r],Yh,u))}},{key:"getAttributeConfig",value:function(r){return this.layerAttributeConfigCache[r]}},{key:"setAttributeConfig",value:function(r,o){this.layerAttributeConfigCache[r]=(0,ne.Z)((0,ne.Z)({},this.layerAttributeConfigCache[r]),o)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),e}())||Eo);function Da(e,i,r,o){r&&Object.defineProperty(e,i,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Aa(e,i,r,o,u){var c={};return Object.keys(o).forEach(function(p){c[p]=o[p]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=r.slice().reverse().reduce(function(p,g){return g(e,i,p)||p},c),u&&c.initializer!==void 0&&(c.value=c.initializer?c.initializer.call(u):void 0,c.initializer=void 0),c.initializer===void 0&&(Object.defineProperty(e,i,c),c=null),c}function kp(){var e=new Yo.WT(4);return Yo.WT!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Yd(e){var i=new glMatrix.ARRAY_TYPE(4);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i}function Kd(e,i,r,o){var u=new Yo.WT(4);return u[0]=e,u[1]=i,u[2]=r,u[3]=o,u}function Lp(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e}function qd(e,i,r,o,u){return e[0]=i,e[1]=r,e[2]=o,e[3]=u,e}function ym(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e[3]=i[3]+r[3],e}function ud(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e[3]=i[3]-r[3],e}function xg(e,i,r){return e[0]=i[0]*r[0],e[1]=i[1]*r[1],e[2]=i[2]*r[2],e[3]=i[3]*r[3],e}function _m(e,i,r){return e[0]=i[0]/r[0],e[1]=i[1]/r[1],e[2]=i[2]/r[2],e[3]=i[3]/r[3],e}function _u(e,i){return e[0]=Math.ceil(i[0]),e[1]=Math.ceil(i[1]),e[2]=Math.ceil(i[2]),e[3]=Math.ceil(i[3]),e}function Dp(e,i){return e[0]=Math.floor(i[0]),e[1]=Math.floor(i[1]),e[2]=Math.floor(i[2]),e[3]=Math.floor(i[3]),e}function Ov(e,i,r){return e[0]=Math.min(i[0],r[0]),e[1]=Math.min(i[1],r[1]),e[2]=Math.min(i[2],r[2]),e[3]=Math.min(i[3],r[3]),e}function bg(e,i,r){return e[0]=Math.max(i[0],r[0]),e[1]=Math.max(i[1],r[1]),e[2]=Math.max(i[2],r[2]),e[3]=Math.max(i[3],r[3]),e}function ld(e,i){return e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e[2]=Math.round(i[2]),e[3]=Math.round(i[3]),e}function kv(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=i[3]*r,e}function Sg(e,i,r,o){return e[0]=i[0]+r[0]*o,e[1]=i[1]+r[1]*o,e[2]=i[2]+r[2]*o,e[3]=i[3]+r[3]*o,e}function R0(e,i){var r=i[0]-e[0],o=i[1]-e[1],u=i[2]-e[2],c=i[3]-e[3];return Math.hypot(r,o,u,c)}function Eg(e,i){var r=i[0]-e[0],o=i[1]-e[1],u=i[2]-e[2],c=i[3]-e[3];return r*r+o*o+u*u+c*c}function I0(e){var i=e[0],r=e[1],o=e[2],u=e[3];return Math.hypot(i,r,o,u)}function c_(e){var i=e[0],r=e[1],o=e[2],u=e[3];return i*i+r*r+o*o+u*u}function P0(e,i){return e[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e[3]=-i[3],e}function sc(e,i){return e[0]=1/i[0],e[1]=1/i[1],e[2]=1/i[2],e[3]=1/i[3],e}function mh(e,i){var r=i[0],o=i[1],u=i[2],c=i[3],p=r*r+o*o+u*u+c*c;return p>0&&(p=1/Math.sqrt(p)),e[0]=r*p,e[1]=o*p,e[2]=u*p,e[3]=c*p,e}function rs(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]}function Nc(e,i,r,o){var u=r[0]*o[1]-r[1]*o[0],c=r[0]*o[2]-r[2]*o[0],p=r[0]*o[3]-r[3]*o[0],g=r[1]*o[2]-r[2]*o[1],y=r[1]*o[3]-r[3]*o[1],w=r[2]*o[3]-r[3]*o[2],O=i[0],D=i[1],V=i[2],X=i[3];return e[0]=D*w-V*y+X*g,e[1]=-(O*w)+V*p-X*c,e[2]=O*y-D*p+X*u,e[3]=-(O*g)+D*c-V*u,e}function O0(e,i,r,o){var u=i[0],c=i[1],p=i[2],g=i[3];return e[0]=u+o*(r[0]-u),e[1]=c+o*(r[1]-c),e[2]=p+o*(r[2]-p),e[3]=g+o*(r[3]-g),e}function wg(e,i){i=i||1;var r,o,u,c,p,g;do r=glMatrix.RANDOM()*2-1,o=glMatrix.RANDOM()*2-1,p=r*r+o*o;while(p>=1);do u=glMatrix.RANDOM()*2-1,c=glMatrix.RANDOM()*2-1,g=u*u+c*c;while(g>=1);var y=Math.sqrt((1-p)/g);return e[0]=i*r,e[1]=i*o,e[2]=i*u*y,e[3]=i*c*y,e}function yh(e,i,r){var o=i[0],u=i[1],c=i[2],p=i[3];return e[0]=r[0]*o+r[4]*u+r[8]*c+r[12]*p,e[1]=r[1]*o+r[5]*u+r[9]*c+r[13]*p,e[2]=r[2]*o+r[6]*u+r[10]*c+r[14]*p,e[3]=r[3]*o+r[7]*u+r[11]*c+r[15]*p,e}function Lv(e,i,r){var o=i[0],u=i[1],c=i[2],p=r[0],g=r[1],y=r[2],w=r[3],O=w*o+g*c-y*u,D=w*u+y*o-p*c,V=w*c+p*u-g*o,X=-p*o-g*u-y*c;return e[0]=O*w+X*-p+D*-y-V*-g,e[1]=D*w+X*-g+V*-p-O*-y,e[2]=V*w+X*-y+O*-g-D*-p,e[3]=i[3],e}function xm(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function Dv(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function cd(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]}function Cg(e,i){var r=e[0],o=e[1],u=e[2],c=e[3],p=i[0],g=i[1],y=i[2],w=i[3];return Math.abs(r-p)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-g)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-w)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))}var f_=null,h_=null,p_=null,KE=null,bm=null,xu=null,_h=null,qE=function(){var e=kp();return function(i,r,o,u,c,p){var g,y;for(r||(r=4),o||(o=0),u?y=Math.min(u*r+o,i.length):y=i.length,g=o;g<y;g+=r)e[0]=i[g],e[1]=i[g+1],e[2]=i[g+2],e[3]=i[g+3],c(e,e,p),i[g]=e[0],i[g+1]=e[1],i[g+2]=e[2],i[g+3]=e[3];return i}}(),Kh=Math.PI/180,k0=512,L0=4003e4;function Ag(e){var i=e.latitude,r=i===void 0?0:i,o=e.zoom,u=o===void 0?0:o,c=e.scale,p=e.highPrecision,g=p===void 0?!1:p,y=e.flipY,w=y===void 0?!1:y;c=c!==void 0?c:Math.pow(2,u);var O={},D=k0*c,V=Math.cos(r*Kh),X=D/360,ce=X/V,de=D/L0/V;if(O.pixelsPerMeter=[de,-de,de],O.metersPerPixel=[1/de,-1/de,1/de],O.pixelsPerDegree=[X,-ce,de],O.degreesPerPixel=[1/X,-1/ce,1/de],g){var we=Kh*Math.tan(r*Kh)/V,je=X*we/2,ht=D/L0*we,_t=ht/ce*de;O.pixelsPerDegree2=[0,-je,ht],O.pixelsPerMeter2=[_t,0,_t],w&&(O.pixelsPerDegree2[1]=-O.pixelsPerDegree2[1],O.pixelsPerMeter2[1]=-O.pixelsPerMeter2[1])}return w&&(O.pixelsPerMeter[1]=-O.pixelsPerMeter[1],O.metersPerPixel[1]=-O.metersPerPixel[1],O.pixelsPerDegree[1]=-O.pixelsPerDegree[1],O.degreesPerPixel[1]=-O.degreesPerPixel[1]),O}var Ru=function(e){return e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.P20=5]="P20",e[e.P20_OFFSET=6]="P20_OFFSET",e[e.METER_OFFSET=7]="METER_OFFSET",e[e.P20_2=8]="P20_2",e}({}),jf={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},Qd,fd,hd,pd,Tg,dd=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],D0=(Qd=(0,It.b2)(),fd=(0,It.f3)(Xt.ICameraService),Qd(hd=(pd=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"needRefresh",!0),Da(this,"cameraService",Tg,this),(0,Ne.Z)(this,"coordinateSystem",void 0),(0,Ne.Z)(this,"viewportCenter",void 0),(0,Ne.Z)(this,"viewportCenterProjection",void 0),(0,Ne.Z)(this,"pixelsPerDegree",void 0),(0,Ne.Z)(this,"pixelsPerDegree2",void 0),(0,Ne.Z)(this,"pixelsPerMeter",void 0)}return(0,st.Z)(e,[{key:"refresh",value:function(r){var o=this.cameraService.getZoom(),u=this.cameraService.getZoomScale(),c=r||this.cameraService.getCenter(),p=Ag({latitude:c[1],zoom:o}),g=p.pixelsPerMeter,y=p.pixelsPerDegree;this.viewportCenter=c,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=g,this.pixelsPerDegree=y,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Ru.LNGLAT||this.coordinateSystem===Ru.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Ru.LNGLAT_OFFSET?this.calculateLnglatOffset(c,o):this.coordinateSystem===Ru.P20_OFFSET&&this.calculateLnglatOffset(c,o,u,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(r){this.coordinateSystem=r}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(r,o,u,c){var p=Ag({latitude:r[1],zoom:o,scale:u,flipY:c,highPrecision:!0}),g=p.pixelsPerMeter,y=p.pixelsPerDegree,w=p.pixelsPerDegree2,O=this.cameraService.getViewMatrix(),D=this.cameraService.getProjectionMatrix(),V=Zu([],D,O),X=this.cameraService.projectFlat([Math.fround(r[0]),Math.fround(r[1])],Math.pow(2,o));this.viewportCenterProjection=yh([],[X[0],X[1],0,1],V),O=this.cameraService.getViewMatrixUncentered()||O,V=Zu([],D,O),V=Zu([],V,dd),this.cameraService.setViewProjectionMatrix(V),this.pixelsPerMeter=g,this.pixelsPerDegree=y,this.pixelsPerDegree2=w}}]),e}(),Tg=Aa(pd.prototype,"cameraService",[fd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pd))||hd),Sm,Fp;function Em(e){var i=wm();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function wm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var zc=(Sm=(0,It.b2)(),Sm(Fp=function(e){(0,yr.Z)(r,e);var i=Em(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"renderMap",new Map),(0,Ne.Z)((0,Ar.Z)(o),"enable",!1),(0,Ne.Z)((0,Ar.Z)(o),"renderEnable",!1),(0,Ne.Z)((0,Ar.Z)(o),"cacheLogs",{}),o}return(0,st.Z)(r,[{key:"setEnable",value:function(u){this.enable=!!u}},{key:"log",value:function(u,c){var p=this;if(this.enable){var g=u.split("."),y=null;g.forEach(function(w,O){y!==null?(y[w]||(y[w]={}),O!==g.length-1&&(y=y[w])):(p.cacheLogs[w]||(p.cacheLogs[w]={}),O!==g.length-1&&(y=p.cacheLogs[w])),O===g.length-1&&(y[w]=(0,ne.Z)((0,ne.Z)({time:Date.now()},y[w]),c))})}}},{key:"getLog",value:function(u){var c=this;switch((0,Ps.Z)(u)){case"string":return this.cacheLogs[u];case"object":return u.map(function(p){return c.cacheLogs[p]}).filter(function(p){return p!==void 0});case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(u){delete this.cacheLogs[u]}},{key:"generateRenderUid",value:function(){return this.renderEnable?Jc():""}},{key:"renderDebug",value:function(u){this.renderEnable=u}},{key:"renderStart",value:function(u){if(!(!this.renderEnable||!this.enable)){var c=this.renderMap.get(u)||{};this.renderMap.set(u,(0,ne.Z)((0,ne.Z)({},c),{},{renderUid:u,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(u){if(!(!this.renderEnable||!this.enable)){var c=this.renderMap.get(u);if(c){var p=c.renderStart,g=Date.now();this.emit("renderEnd",(0,ne.Z)((0,ne.Z)({},c),{},{renderEnd:g,renderDuration:g-p})),this.renderMap.delete(u)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),r}(xs.EventEmitter))||Fp),Bp=k(50840),vd=k.n(Bp),Iu=function(e){return e.Hover="hover",e.Click="click",e.Select="select",e.Active="active",e.Drag="drag",e}({}),Cm,Am,qh,gd,md;function Jd(e){var i=Fv();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function Fv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var d_={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},v_=(Cm=(0,It.b2)(),Am=(0,It.f3)(Xt.IMapService),Cm(qh=(gd=function(e){(0,yr.Z)(r,e);var i=Jd(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"indragging",!1),Da((0,Ar.Z)(o),"mapService",md,(0,Ar.Z)(o)),(0,Ne.Z)((0,Ar.Z)(o),"hammertime",void 0),(0,Ne.Z)((0,Ar.Z)(o),"lastClickTime",0),(0,Ne.Z)((0,Ar.Z)(o),"lastClickXY",[-1,-1]),(0,Ne.Z)((0,Ar.Z)(o),"clickTimer",void 0),(0,Ne.Z)((0,Ar.Z)(o),"$containter",void 0),(0,Ne.Z)((0,Ar.Z)(o),"onDrag",function(g){var y=o.interactionEvent(g);y.type=d_[y.type],y.type==="dragging"?o.indragging=!0:o.indragging=!1,o.emit(Iu.Drag,y)}),(0,Ne.Z)((0,Ar.Z)(o),"onHammer",function(g){g.srcEvent.stopPropagation();var y=o.interactionEvent(g);o.emit(Iu.Hover,y)}),(0,Ne.Z)((0,Ar.Z)(o),"onTouch",function(g){var y=g.touches[0];o.onHover({x:y.pageX,y:y.pageY,type:"touch"})}),(0,Ne.Z)((0,Ar.Z)(o),"onHover",function(g){var y=g.clientX,w=g.clientY,O=y,D=w,V=g.type,X=o.mapService.getMapContainer();if(X){var ce=X.getBoundingClientRect(),de=ce.top,we=ce.left;O=O-we-X.clientLeft,D=D-de-X.clientTop}var je=o.mapService.containerToLngLat([O,D]);if(V==="click"){o.isDoubleTap(O,D,je);return}if(V==="touch"){o.isDoubleTap(O,D,je);return}V!=="click"&&V!=="dblclick"&&o.emit(Iu.Hover,{x:O,y:D,lngLat:je,type:V,target:g})}),o}return(0,st.Z)(r,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Iu.Hover)}},{key:"triggerHover",value:function(u){var c=u.x,p=u.y;this.emit(Iu.Hover,{x:c,y:p})}},{key:"triggerSelect",value:function(u){this.emit(Iu.Select,{featureId:u})}},{key:"triggerActive",value:function(u){this.emit(Iu.Active,{featureId:u})}},{key:"handleMiniEvent",value:function(u){this.onHover({clientX:u.touches[0].pageX,clientY:u.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var u=this.mapService.getMapContainer();if(u){var c=new(vd()).Manager(u);c.add(new(vd()).Tap({event:"dblclick",taps:2})),c.add(new(vd()).Tap({event:"click"})),c.add(new(vd()).Pan({threshold:0,pointers:0})),c.add(new(vd()).Press({})),c.on("dblclick click",this.onHammer),c.on("panstart panmove panend pancancel",this.onDrag),u.addEventListener("mousemove",this.onHover),u.addEventListener("mousedown",this.onHover,!0),u.addEventListener("mouseup",this.onHover),u.addEventListener("contextmenu",this.onHover),this.hammertime=c}}},{key:"removeEventListenerOnMap",value:function(){var u=this.mapService.getMapContainer();u&&(u.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),u.removeEventListener("mousedown",this.onHover),u.removeEventListener("mouseup",this.onHover),u.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(u){var c=u.type,p=u.pointerType,g,y;p==="touch"?(y=Math.floor(u.pointers[0].clientY),g=Math.floor(u.pointers[0].clientX)):(y=Math.floor(u.srcEvent.y),g=Math.floor(u.srcEvent.x));var w=this.mapService.getMapContainer();if(w){var O=w.getBoundingClientRect(),D=O.top,V=O.left;g-=V,y-=D}var X=this.mapService.containerToLngLat([g,y]);return{x:g,y,lngLat:X,type:c,target:u.srcEvent}}},{key:"isDoubleTap",value:function(u,c,p){var g=this,y=new Date().getTime(),w="click";y-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-u)<10&&Math.abs(this.lastClickXY[1]-c)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),w="dblclick",this.emit(Iu.Hover,{x:u,y:c,lngLat:p,type:w})):(this.lastClickTime=y,this.lastClickXY=[u,c],this.clickTimer=setTimeout(function(){w="click",g.emit(Iu.Hover,{x:u,y:c,lngLat:p,type:w})},400))}}]),r}(Sp()),md=Aa(gd.prototype,"mapService",[Am],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gd))||qh),g_=0;function Tm(e){var i=e;if(typeof e=="string"&&(i=document.getElementById(e)),i){var r=document.createElement("div");return r.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,r.id="l7-scene-".concat(g_++),r.classList.add("l7-scene"),i.appendChild(r),r}return null}function F0(e){var i,r=!0;if((e==null||(i=e.target)===null||i===void 0?void 0:i.target)instanceof HTMLElement)for(var o,u=e==null||(o=e.target)===null||o===void 0?void 0:o.target;u;){var c,p=Array.from(u.classList);if(p.includes("l7-marker")||p.includes("l7-popup")){r=!1;break}u=(c=u)===null||c===void 0?void 0:c.parentElement}return r}var yt=function(e){return e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e}({}),Wf=function(e){return e[e.SAMPLED=0]="SAMPLED",e[e.RENDER_TARGET=1]="RENDER_TARGET",e}({}),B0,ev,Mm,N0,Mg,z0,U0,Pu,Qh,Bv,Z0,Rg,m_,y_=(B0=(0,It.b2)(),ev=(0,It.f3)(Xt.IMapService),Mm=(0,It.f3)(Xt.IRendererService),N0=(0,It.f3)(Xt.IGlobalConfigService),Mg=(0,It.f3)(Xt.IInteractionService),z0=(0,It.f3)(Xt.ILayerService),B0(U0=(Pu=function(){function e(){var i=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"pickedColors",void 0),(0,Ne.Z)(this,"pickedTileLayers",[]),Da(this,"mapService",Qh,this),Da(this,"rendererService",Bv,this),Da(this,"configService",Z0,this),Da(this,"interactionService",Rg,this),Da(this,"layerService",m_,this),(0,Ne.Z)(this,"pickingFBO",void 0),(0,Ne.Z)(this,"width",0),(0,Ne.Z)(this,"height",0),(0,Ne.Z)(this,"alreadyInPicking",!1),(0,Ne.Z)(this,"pickBufferScale",1),(0,Ne.Z)(this,"pickFromPickingFBO",function(r,o){var u=o.x,c=o.y,p=o.lngLat,g=o.type,y=o.target,w=!1,O=i.rendererService,D=O.readPixels,V=O.getContainer,X=i.getContainerSize(V()),ce=X.width,de=X.height;ce*=Ms,de*=Ms;var we=r.getLayerConfig(),je=we.enableHighlight,ht=we.enableSelect,_t=u*Ms,Dt=c*Ms;if(_t>ce-1*Ms||_t<0||Dt>de-1*Ms||Dt<0)return!1;var Yt=D({x:Math.floor(_t/i.pickBufferScale),y:Math.floor((de-(c+1)*Ms)/i.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:i.pickingFBO});if(i.pickedColors=Yt,Yt[0]!==0||Yt[1]!==0||Yt[2]!==0){var ir=Jl(Yt),sr=r.layerPickService.getFeatureById(ir);ir!==r.getCurrentPickId()&&g==="mousemove"&&(g="mouseenter");var Tr={x:u,y:c,type:g,lngLat:p,featureId:ir,feature:sr,target:y};sr&&(w=!0,r.setCurrentPickId(ir),i.triggerHoverOnLayer(r,Tr))}else{var Vr={x:u,y:c,lngLat:p,type:r.getCurrentPickId()!==null&&g==="mousemove"?"mouseout":"un"+g,featureId:null,target:y,feature:null};i.triggerHoverOnLayer(r,(0,ne.Z)((0,ne.Z)({},Vr),{},{type:"unpick"})),i.triggerHoverOnLayer(r,Vr),r.setCurrentPickId(null)}if(je&&r.layerPickService.highlightPickedFeature(Yt),ht&&g==="click"&&(Yt==null?void 0:Yt.toString())!==[0,0,0,0].toString()){var sn=Jl(Yt);r.getCurrentSelectedId()===null||sn!==r.getCurrentSelectedId()?(r.layerPickService.selectFeature(Yt),r.setCurrentSelectedId(sn)):(r.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),r.setCurrentSelectedId(null))}return w})}return(0,st.Z)(e,[{key:"init",value:function(r){var o=this.rendererService,u=o.createTexture2D,c=o.createFramebuffer,p=o.getContainer,g=this.getContainerSize(p()),y=g.width,w=g.height;y*=Ms,w*=Ms,this.pickBufferScale=this.configService.getSceneConfig(r).pickBufferScale||1,y=Math.round(y/this.pickBufferScale),w=Math.round(w/this.pickBufferScale),this.pickingFBO=c({color:u({width:y,height:w,wrapS:yt.CLAMP_TO_EDGE,wrapT:yt.CLAMP_TO_EDGE,usage:Wf.RENDER_TARGET}),depth:!0,width:y,height:w}),this.interactionService.on(Iu.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u,c,p){var g=this,y,w,O;return nr().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:y=this.rendererService,w=y.useFramebuffer,O=y.clear,this.resizePickingFBO(),w(this.pickingFBO,function(){O({framebuffer:g.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),u.hooks.beforePickingEncode.call(),u.renderModels({ispick:!0}),u.hooks.afterPickingEncode.call();var X=g.pickBox(u,c);p(X)});case 3:case"end":return V.stop()}},o,this)}));function r(o,u,c){return i.apply(this,arguments)}return r}()},{key:"pickBox",value:function(r,o){var u=this,c=o.map(function(sn){var ln=sn<0?0:sn;return Math.floor(ln*Ms/u.pickBufferScale)}),p=(0,Zi.Z)(c,4),g=p[0],y=p[1],w=p[2],O=p[3],D=this.rendererService,V=D.readPixels,X=D.getContainer,ce=this.getContainerSize(X()),de=ce.width,we=ce.height;if(de*=Ms,we*=Ms,g>(de-1)*Ms/this.pickBufferScale||w<0||y>(we-1)*Ms/this.pickBufferScale||O<0)return[];for(var je=Math.min(de/this.pickBufferScale,w)-g,ht=Math.min(we/this.pickBufferScale,O)-y,_t=V({x:g,y:Math.floor(we/this.pickBufferScale-(O+1)),width:je,height:ht,data:new Uint8Array(je*ht*4),framebuffer:this.pickingFBO}),Dt=[],Yt={},ir=0;ir<_t.length/4;ir=ir+1){var sr=_t.slice(ir*4,ir*4+4),Tr=Jl(sr);if(Tr!==-1&&!Yt[Tr]){var Vr=r.layerPickService.getFeatureById(Tr);Dt.push((0,ne.Z)((0,ne.Z)({},Vr),{},{pickedFeatureIdx:Tr})),Yt[Tr]=!0}}return Dt}},{key:"handleCursor",value:function(r,o){var u=r.getLayerConfig(),c=u.cursor,p=c===void 0?"":c,g=u.cursorEnabled;if(g){var y=this.mapService.version,w=y==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),O=w==null?void 0:w.style.getPropertyValue("cursor");o==="unmousemove"&&O!==""?w==null||w.style.setProperty("cursor",""):o==="mousemove"&&(w==null||w.style.setProperty("cursor",p))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(r){return r.getContext?{width:r.width/Ms,height:r.height/Ms}:r.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u){return nr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!this.layerService.needPick(u.type)||!this.isPickingAllLayer())){p.next=2;break}return p.abrupt("return");case 2:return this.alreadyInPicking=!0,p.next=5,this.pickingLayers(u);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return p.stop()}},o,this)}));function r(o){return i.apply(this,arguments)}return r}()},{key:"isPickingAllLayer",value:function(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}},{key:"resizePickingFBO",value:function(){var r=this.rendererService.getContainer,o=this.getContainerSize(r()),u=o.width,c=o.height;u*=Ms,c*=Ms,(this.width!==u||this.height!==c)&&(this.pickingFBO.resize({width:Math.round(u/this.pickBufferScale),height:Math.round(c/this.pickBufferScale)}),this.width=u,this.height=c)}},{key:"pickingLayers",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u){var c=this,p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:p=this.rendererService.clear,this.resizePickingFBO(),this.rendererService.useFramebuffer(this.pickingFBO,function(){var w=c.layerService.getRenderList();w.filter(function(O){return O.needPick(u.type)}).reverse().some(function(O){p({framebuffer:c.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),O.layerPickService.pickRender(u);var D=c.pickFromPickingFBO(O,u);return c.layerService.pickedLayerId=D?+O.id:-1,D&&!O.getLayerConfig().enablePropagation})});case 3:case"end":return y.stop()}},o,this)}));function r(o){return i.apply(this,arguments)}return r}()},{key:"triggerHoverOnLayer",value:function(r,o){F0(o)&&(this.handleCursor(r,o.type),r.emit(o.type,o))}}]),e}(),Qh=Aa(Pu.prototype,"mapService",[ev],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bv=Aa(Pu.prototype,"rendererService",[Mm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z0=Aa(Pu.prototype,"configService",[N0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rg=Aa(Pu.prototype,"interactionService",[Mg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m_=Aa(Pu.prototype,"layerService",[z0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pu))||U0),__=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"autoStart",void 0),(0,Ne.Z)(this,"startTime",0),(0,Ne.Z)(this,"oldTime",0),(0,Ne.Z)(this,"running",!1),(0,Ne.Z)(this,"elapsedTime",0),this.autoStart=i}return(0,st.Z)(e,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var r=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var o=(typeof performance=="undefined"?Date:performance).now();r=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=r}return r}}]),e}(),x_,Rm,b_,V0,Nv,Ig,S_,xh,Pg;function yd(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=zv(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function zv(e,i){if(e){if(typeof e=="string")return H0(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H0(e,i)}}function H0(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}function Mx(e){var i=QE();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function QE(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var JE=Ta.throttle,WR=(x_=(0,It.b2)(),Rm=(0,It.f3)(Xt.IRendererService),b_=(0,It.f3)(Xt.IMapService),V0=(0,It.f3)(Xt.IDebugService),x_(Nv=(Ig=function(e){(0,yr.Z)(r,e);var i=Mx(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"pickedLayerId",-1),(0,Ne.Z)((0,Ar.Z)(o),"clock",new __),(0,Ne.Z)((0,Ar.Z)(o),"alreadyInRendering",!1),(0,Ne.Z)((0,Ar.Z)(o),"layers",[]),(0,Ne.Z)((0,Ar.Z)(o),"layerList",[]),(0,Ne.Z)((0,Ar.Z)(o),"layerRenderID",void 0),(0,Ne.Z)((0,Ar.Z)(o),"sceneInited",!1),(0,Ne.Z)((0,Ar.Z)(o),"animateInstanceCount",0),(0,Ne.Z)((0,Ar.Z)(o),"shaderPicking",!0),(0,Ne.Z)((0,Ar.Z)(o),"enableRender",!0),Da((0,Ar.Z)(o),"renderService",S_,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"mapService",xh,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"debugService",Pg,(0,Ar.Z)(o)),(0,Ne.Z)((0,Ar.Z)(o),"reRender",JE(function(){o.renderLayers()},32)),(0,Ne.Z)((0,Ar.Z)(o),"throttleRenderLayers",JE(function(){o.renderLayers()},16)),o}return(0,st.Z)(r,[{key:"needPick",value:function(u){return this.layerList.some(function(c){return c.needPick(u)})}},{key:"add",value:function(u){var c=this;this.layers.push(u),this.sceneInited&&u.init().then(function(){c.renderLayers()})}},{key:"addMask",value:function(u){var c=this;this.sceneInited&&u.init().then(function(){c.renderLayers()})}},{key:"initLayers",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p=this;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var w=(0,Sn.Z)(nr().mark(function O(D){return nr().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(D.startInit){X.next=4;break}return X.next=3,D.init();case 3:p.updateLayerRenderList();case 4:case"end":return X.stop()}},O)}));return function(O){return w.apply(this,arguments)}}());case 2:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(u){return this.layers.find(function(c){return c.id===u})}},{key:"getLayerByName",value:function(u){return this.layers.find(function(c){return c.name===u})}},{key:"remove",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p,g){var y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:g?(y=g.layerChildren.indexOf(p),y>-1&&g.layerChildren.splice(y,1)):(w=this.layers.indexOf(p),w>-1&&this.layers.splice(w,1)),p.destroy(),this.reRender(),this.emit("layerChange",this.layers);case 4:case"end":return D.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"removeAllLayers",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:this.destroy(),this.reRender();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"setEnableRender",value:function(u){this.enableRender=u}},{key:"renderLayers",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D,V,X,ce;return nr().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){we.next=2;break}return we.abrupt("return");case 2:this.updateLayerRenderList(),p=this.debugService.generateRenderUid(),this.debugService.renderStart(p),this.alreadyInRendering=!0,this.clear(),g=yd(this.layerList);try{for(g.s();!(y=g.n()).done;)w=y.value,w.prerender()}catch(je){g.e(je)}finally{g.f()}this.renderService.beginFrame(),O=yd(this.layerList),we.prev=11,O.s();case 13:if((D=O.n()).done){we.next=25;break}if(V=D.value,X=V.getLayerConfig(),ce=X.enableMask,V.masks.filter(function(je){return je.inited}).length>0&&ce&&this.renderMask(V.masks),!V.getLayerConfig().enableMultiPassRenderer){we.next=22;break}return we.next=20,V.renderMultiPass();case 20:we.next=23;break;case 22:V.render();case 23:we.next=13;break;case 25:we.next=30;break;case 27:we.prev=27,we.t0=we.catch(11),O.e(we.t0);case 30:return we.prev=30,O.f(),we.finish(30);case 33:this.renderService.endFrame(),this.debugService.renderEnd(p),this.alreadyInRendering=!1;case 36:case"end":return we.stop()}},c,this,[[11,27,30,33]])}));function u(){return o.apply(this,arguments)}return u}()},{key:"renderMask",value:function(u){var c=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});var p=u.length>1?mo.MULTIPLE:mo.SINGLE,g=yd(u),y;try{for(g.s();!(y=g.n()).done;){var w=y.value;w.render({isStencil:!0,stencilType:p,stencilIndex:c++})}}catch(O){g.e(O)}finally{g.f()}}},{key:"beforeRenderData",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p){var g;return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,p.hooks.beforeRenderData.promise();case 2:g=w.sent,g&&this.renderLayers();case 4:case"end":return w.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"renderTileLayerMask",value:function(u){var c=0,p=u.getLayerConfig(),g=p.enableMask,y=g===void 0?!0:g,w=u.tileMask?1:0,O=u.masks.filter(function(de){return de.inited});w=w+(y?O.length:1);var D=w>1?mo.MULTIPLE:mo.SINGLE;if((u.tileMask||O.length&&y)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),O.length&&y){var V=yd(O),X;try{for(V.s();!(X=V.n()).done;){var ce=X.value;ce.render({isStencil:!0,stencilType:D,stencilIndex:c++})}}catch(de){V.e(de)}finally{V.f()}}u.tileMask&&u.tileMask.render({isStencil:!0,stencilType:D,stencilIndex:c++,stencilOperation:ll.OR})}},{key:"renderTileLayer",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p){return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.renderTileLayerMask(p),!p.getLayerConfig().enableMultiPassRenderer){y.next=6;break}return y.next=4,p.renderMultiPass();case 4:y.next=8;break;case 6:return y.next=8,p.render();case 8:case"end":return y.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"updateLayerRenderList",value:function(){var u=this;this.layerList=[],this.layers.filter(function(c){return c.inited}).filter(function(c){return c.isVisible()}).sort(function(c,p){return c.zIndex-p.zIndex}).forEach(function(c){u.layerList.push(c)})}},{key:"destroy",value:function(){this.layers.forEach(function(u){u.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var u=yo(this.mapService.bgColor);this.renderService.clear({color:u,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){window.cancelAnimationFrame(this.layerRenderID)}}]),r}(xs.EventEmitter),S_=Aa(Ig.prototype,"renderService",[Rm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xh=Aa(Ig.prototype,"mapService",[b_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pg=Aa(Ig.prototype,"debugService",[V0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ig))||Nv),Uc=k(91),GR=Ta.isNil,$R=function(){function e(i){var r=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"name",void 0),(0,Ne.Z)(this,"type",void 0),(0,Ne.Z)(this,"scale",void 0),(0,Ne.Z)(this,"descriptor",void 0),(0,Ne.Z)(this,"featureBufferLayout",[]),(0,Ne.Z)(this,"needRescale",!1),(0,Ne.Z)(this,"needRemapping",!1),(0,Ne.Z)(this,"needRegenerateVertices",!1),(0,Ne.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,Ne.Z)(this,"vertexAttribute",void 0),(0,Ne.Z)(this,"defaultCallback",function(o){if(o.length===0){var u;return((u=r.scale)===null||u===void 0?void 0:u.defaultValues)||[]}return o.map(function(c,p){var g,y=(g=r.scale)===null||g===void 0?void 0:g.scalers[p].func,w=y(c);return w})}),this.setProps(i)}return(0,st.Z)(e,[{key:"setProps",value:function(r){Object.assign(this,r)}},{key:"mapping",value:function(r){var o;if((o=this.scale)!==null&&o!==void 0&&o.callback){var u,c=(u=this.scale)===null||u===void 0?void 0:u.callback.apply(u,(0,In.Z)(r));if(!GR(c))return[c]}return this.defaultCallback(r)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),e}(),XR=["buffer","update","name"],YR=["buffer","update","name"],j0,e2,t2,r2,E_,Rx,n2=(j0={},(0,Ne.Z)(j0,yt.FLOAT,4),(0,Ne.Z)(j0,yt.UNSIGNED_BYTE,1),(0,Ne.Z)(j0,yt.UNSIGNED_SHORT,2),j0),KR=(e2=(0,It.b2)(),t2=(0,It.f3)(Xt.IRendererService),e2(r2=(E_=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"attributesAndIndices",void 0),Da(this,"rendererService",Rx,this),(0,Ne.Z)(this,"attributes",[]),(0,Ne.Z)(this,"triangulation",void 0),(0,Ne.Z)(this,"featureLayout",{sizePerElement:0,elements:[]})}return(0,st.Z)(e,[{key:"registerStyleAttribute",value:function(r){var o=this.getLayerStyleAttribute(r.name||"");return o?o.setProps(r):(o=new $R(r),this.attributes.push(o)),o}},{key:"unRegisterStyleAttribute",value:function(r){var o=this.attributes.findIndex(function(u){return u.name===r});o>-1&&this.attributes.splice(o,1)}},{key:"updateScaleAttribute",value:function(r){this.attributes.forEach(function(o){var u,c=o.name,p=(u=o.scale)===null||u===void 0?void 0:u.field;(r[c]||p&&r[p])&&(o.needRescale=!0,o.needRemapping=!0,o.needRegenerateVertices=!0)})}},{key:"updateStyleAttribute",value:function(r,o,u){var c=this.getLayerStyleAttribute(r);c||(c=this.registerStyleAttribute((0,ne.Z)((0,ne.Z)({},o),{},{name:r})));var p=o.scale;p&&c&&(c.scale=p,c.needRescale=!0,c.needRemapping=!0,c.needRegenerateVertices=!0,u&&u.featureRange&&(c.featureRange=u.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(r){return this.attributes.find(function(o){return o.name===r})}},{key:"getLayerAttributeScale",value:function(r){var o,u=this.getLayerStyleAttribute(r),c=u==null||(o=u.scale)===null||o===void 0?void 0:o.scalers;return c&&c[0]?c[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(r,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,p=arguments.length>4?arguments[4]:void 0,g=this.attributes.find(function(Yt){return Yt.name===r});if(g&&g.descriptor){var y=g.descriptor,w=y.update,O=y.buffer,D=y.size,V=D===void 0?0:D,X=n2[O.type||yt.FLOAT];if(w){var ce=this.featureLayout,de=ce.elements,we=ce.sizePerElement,je=de.slice(u,c);if(!je.length)return;var ht=je[0].offset,_t=ht*V*X,Dt=je.map(function(Yt,ir){for(var sr=Yt.featureIdx,Tr=Yt.vertices,Vr=Yt.normals,sn=Tr.length/we,ln=[],Zn=0;Zn<sn;Zn++){var ci=Vr?Vr.slice(Zn*3,Zn*3+3):[];ln.push.apply(ln,(0,In.Z)(w(o[sr],sr,Tr.slice(Zn*we,Zn*we+we),ir,ci)))}return ln}).flat();g.vertexAttribute.updateBuffer({data:Dt,offset:_t}),p==null||p.emit("legend:".concat(r),{type:r,attr:g})}}}},{key:"createAttributesAndIndices",value:function(r,o,u){var c=this;this.featureLayout={sizePerElement:0,elements:[]},o&&(this.triangulation=o);var p=this.attributes.map(function(je){return je.resetDescriptor(),je.descriptor}),g=0,y=0,w=[],O=3;r.forEach(function(je,ht){var _t=c.triangulation(je,u),Dt=_t.indices,Yt=_t.vertices,ir=_t.normals,sr=_t.size,Tr=_t.indexes,Vr=_t.count;typeof Vr=="number"&&(y+=Vr),Dt.forEach(function(ci){w.push(ci+g)}),O=sr;var sn=Yt.length/sr;c.featureLayout.sizePerElement=O,c.featureLayout.elements.push({featureIdx:ht,vertices:Yt,normals:ir,offset:g}),g+=sn;for(var ln=function(ki){var eo=(ir==null?void 0:ir.slice(ki*3,ki*3+3))||[],Xo=Yt.slice(ki*sr,ki*sr+sr),as=0;Tr&&Tr[ki]!==void 0&&(as=Tr[ki]),p.forEach(function(tu,lu){if(tu&&tu.update){var ff;(ff=tu.buffer.data).push.apply(ff,(0,In.Z)(tu.update(je,ht,Xo,ki,eo,as)))}})},Zn=0;Zn<sn;Zn++)ln(Zn)});var D=this.rendererService,V=D.createAttribute,X=D.createBuffer,ce=D.createElements,de={};p.forEach(function(je,ht){if(je){var _t=je.buffer,Dt=je.update,Yt=je.name,ir=(0,Uc.Z)(je,XR),sr=V((0,ne.Z)({buffer:X(_t)},ir));de[je.name||""]=sr,c.attributes[ht].vertexAttribute=sr}});var we=ce({data:w,type:yt.UNSIGNED_INT,count:w.length});return this.attributesAndIndices={attributes:de,elements:we,count:y},this.attributesAndIndices}},{key:"createAttributes",value:function(r,o){var u=this;this.featureLayout={sizePerElement:0,elements:[]},o&&(this.triangulation=o);var c=this.attributes.map(function(X){return X.resetDescriptor(),X.descriptor}),p=0,g=[],y=3;r.forEach(function(X,ce){var de=u.triangulation(X),we=de.indices,je=de.vertices,ht=de.normals,_t=de.size,Dt=de.indexes;we.forEach(function(Tr){g.push(Tr+p)}),y=_t;var Yt=je.length/_t;u.featureLayout.sizePerElement=y,u.featureLayout.elements.push({featureIdx:ce,vertices:je,normals:ht,offset:p}),p+=Yt;for(var ir=function(Vr){var sn=(ht==null?void 0:ht.slice(Vr*3,Vr*3+3))||[],ln=je.slice(Vr*_t,Vr*_t+_t),Zn=0;Dt&&Dt[Vr]!==void 0&&(Zn=Dt[Vr]),c.forEach(function(ci,ki){if(ci&&ci.update){var eo;(eo=ci.buffer.data).push.apply(eo,(0,In.Z)(ci.update(X,ce,ln,Vr,sn,Zn)))}})},sr=0;sr<Yt;sr++)ir(sr)});var w=this.rendererService,O=w.createAttribute,D=w.createBuffer,V={};return c.forEach(function(X,ce){if(X){var de=X.buffer,we=X.update,je=X.name,ht=(0,Uc.Z)(X,YR),_t=O((0,ne.Z)({buffer:D(de)},ht));V[X.name||""]=_t,u.attributes[ce].vertexAttribute=_t}}),{attributes:V}}},{key:"clearAllAttributes",value:function(){var r;this.attributes.forEach(function(o){o.vertexAttribute&&o.vertexAttribute.destroy()}),(r=this.attributesAndIndices)===null||r===void 0||r.elements.destroy(),this.attributes=[]}}]),e}(),Rx=Aa(E_.prototype,"rendererService",[t2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E_))||r2),Ix=k(34155);function Px(e,i,r,o){function u(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function g(O){try{w(o.next(O))}catch(D){p(D)}}function y(O){try{w(o.throw(O))}catch(D){p(D)}}function w(O){O.done?c(O.value):u(O.value).then(g,y)}w((o=o.apply(e,i||[])).next())})}function W0(e,i){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,u,c,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(w){return function(O){return y([w,O])}}function y(w){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(c=w[0]&2?u.return:w[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,w[1])).done)return c;switch(u=0,c&&(w=[w[0]&2,c.value]),w[0]){case 0:case 1:c=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,u=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!c||w[1]>c[0]&&w[1]<c[3])){r.label=w[1];break}if(w[0]===6&&r.label<c[1]){r.label=c[1],c=w;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(w);break}c[2]&&r.ops.pop(),r.trys.pop();continue}w=i.call(e,r)}catch(O){w=[6,O],u=0}finally{o=c=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}function Ho(e,i){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),u,c=[],p;try{for(;(i===void 0||i-- >0)&&!(u=o.next()).done;)c.push(u.value)}catch(g){p={error:g}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(p)throw p.error}}return c}function Ox(e,i,r){if(r||arguments.length===2)for(var o=0,u=i.length,c;o<u;o++)(c||!(o in i))&&(c||(c=Array.prototype.slice.call(i,0,o)),c[o]=i[o]);return e.concat(c||Array.prototype.slice.call(i))}function Gf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w_={exports:{}},G0={exports:{}},$0={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;function r(o){return o&&typeof o.length=="number"&&o.length>=0&&o.length%1===0}e.exports=i.default})($0,$0.exports);var $f={},Og={exports:{}},kg={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r){return function(){for(var o=[],u=arguments.length;u--;)o[u]=arguments[u];var c=o.pop();return r.call(this,o,c)}},e.exports=i.default})(kg,kg.exports);var tv={};Object.defineProperty(tv,"__esModule",{value:!0}),tv.fallback=a2,tv.wrap=bh;var i2=tv.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,qR=tv.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,kx=tv.hasNextTick=typeof Ix=="object"&&typeof Ix.nextTick=="function";function a2(e){setTimeout(e,0)}function bh(e){return function(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return e(function(){return i.apply(void 0,r)})}}var X0;i2?X0=queueMicrotask:qR?X0=setImmediate:kx?X0=Ix.nextTick:X0=a2,tv.default=bh(X0),function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=y;var r=kg.exports,o=g(r),u=tv,c=g(u),p=$f;function g(D){return D&&D.__esModule?D:{default:D}}function y(D){return(0,p.isAsync)(D)?function(){for(var V=[],X=arguments.length;X--;)V[X]=arguments[X];var ce=V.pop(),de=D.apply(this,V);return w(de,ce)}:(0,o.default)(function(V,X){var ce;try{ce=D.apply(this,V)}catch(de){return X(de)}if(ce&&typeof ce.then=="function")return w(ce,X);X(null,ce)})}function w(D,V){return D.then(function(X){O(V,null,X)},function(X){O(V,X&&X.message?X:new Error(X))})}function O(D,V,X){try{D(V,X)}catch(ce){(0,c.default)(function(de){throw de},ce)}}e.exports=i.default}(Og,Og.exports),Object.defineProperty($f,"__esModule",{value:!0}),$f.isAsyncIterable=$f.isAsyncGenerator=$f.isAsync=void 0;var QR=Og.exports,JR=e3(QR);function e3(e){return e&&e.__esModule?e:{default:e}}function o2(e){return e[Symbol.toStringTag]==="AsyncFunction"}function t3(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function r3(e){return typeof e[Symbol.asyncIterator]=="function"}function n3(e){if(typeof e!="function")throw new Error("expected a function");return o2(e)?(0,JR.default)(e):e}$f.default=n3,$f.isAsync=o2,$f.isAsyncGenerator=t3,$f.isAsyncIterable=r3;var Lg={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;function r(o,u){if(u===void 0&&(u=o.length),!u)throw new Error("arity is undefined");function c(){for(var p=this,g=[],y=arguments.length;y--;)g[y]=arguments[y];return typeof g[u-1]=="function"?o.apply(this,g):new Promise(function(w,O){g[u-1]=function(D){for(var V=[],X=arguments.length-1;X-- >0;)V[X]=arguments[X+1];if(D)return O(D);w(V.length>1?V:V[0])},o.apply(p,g)})}return c}e.exports=i.default})(Lg,Lg.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var r=$0.exports,o=y(r),u=$f,c=y(u),p=Lg.exports,g=y(p);function y(w){return w&&w.__esModule?w:{default:w}}i.default=(0,g.default)(function(w,O,D){var V=(0,o.default)(O)?[]:{};w(O,function(X,ce,de){(0,c.default)(X)(function(we){for(var je,ht=[],_t=arguments.length-1;_t-- >0;)ht[_t]=arguments[_t+1];ht.length<2&&(je=ht,ht=je[0]),V[ce]=ht,de(we)})},function(X){return D(X,V)})},3),e.exports=i.default}(G0,G0.exports);var Lx={exports:{}},Dg={exports:{}},C_={exports:{}},Y0={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;function r(o){function u(){for(var c=[],p=arguments.length;p--;)c[p]=arguments[p];if(o!==null){var g=o;o=null,g.apply(this,c)}}return Object.assign(u,o),u}e.exports=i.default})(Y0,Y0.exports);var Dx={exports:{}},Fx={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r){return r[Symbol.iterator]&&r[Symbol.iterator]()},e.exports=i.default})(Fx,Fx.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=O;var r=$0.exports,o=p(r),u=Fx.exports,c=p(u);function p(D){return D&&D.__esModule?D:{default:D}}function g(D){var V=-1,X=D.length;return function(){return++V<X?{value:D[V],key:V}:null}}function y(D){var V=-1;return function(){var ce=D.next();return ce.done?null:(V++,{value:ce.value,key:V})}}function w(D){var V=D?Object.keys(D):[],X=-1,ce=V.length;return function de(){var we=V[++X];return we==="__proto__"?de():X<ce?{value:D[we],key:we}:null}}function O(D){if((0,o.default)(D))return g(D);var V=(0,c.default)(D);return V?y(V):w(D)}e.exports=i.default}(Dx,Dx.exports);var K0={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;function r(o){return function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(o===null)throw new Error("Callback was already called.");var p=o;o=null,p.apply(this,u)}}e.exports=i.default})(K0,K0.exports);var Bx={exports:{}},q0={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var r={};i.default=r,e.exports=i.default})(q0,q0.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=c;var r=q0.exports,o=u(r);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,g,y,w){var O=!1,D=!1,V=!1,X=0,ce=0;function de(){X>=g||V||O||(V=!0,p.next().then(function(ht){var _t=ht.value,Dt=ht.done;if(!(D||O)){if(V=!1,Dt){O=!0,X<=0&&w(null);return}X++,y(_t,ce,we),ce++,de()}}).catch(je))}function we(ht,_t){if(X-=1,!D){if(ht)return je(ht);if(ht===!1){O=!0,D=!0;return}if(_t===o.default||O&&X<=0)return O=!0,w(null);de()}}function je(ht){D||(V=!1,O=!0,w(ht))}de()}e.exports=i.default}(Bx,Bx.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var r=Y0.exports,o=X(r),u=Dx.exports,c=X(u),p=K0.exports,g=X(p),y=$f,w=Bx.exports,O=X(w),D=q0.exports,V=X(D);function X(ce){return ce&&ce.__esModule?ce:{default:ce}}i.default=function(ce){return function(de,we,je){if(je=(0,o.default)(je),ce<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!de)return je(null);if((0,y.isAsyncGenerator)(de))return(0,O.default)(de,ce,we,je);if((0,y.isAsyncIterable)(de))return(0,O.default)(de[Symbol.asyncIterator](),ce,we,je);var ht=(0,c.default)(de),_t=!1,Dt=!1,Yt=0,ir=!1;function sr(Vr,sn){if(!Dt)if(Yt-=1,Vr)_t=!0,je(Vr);else if(Vr===!1)_t=!0,Dt=!0;else{if(sn===V.default||_t&&Yt<=0)return _t=!0,je(null);ir||Tr()}}function Tr(){for(ir=!0;Yt<ce&&!_t;){var Vr=ht();if(Vr===null){_t=!0,Yt<=0&&je(null);return}Yt+=1,we(Vr.value,Vr.key,(0,g.default)(sr))}ir=!1}Tr()}},e.exports=i.default}(C_,C_.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var r=C_.exports,o=y(r),u=$f,c=y(u),p=Lg.exports,g=y(p);function y(O){return O&&O.__esModule?O:{default:O}}function w(O,D,V,X){return(0,o.default)(D)(O,(0,c.default)(V),X)}i.default=(0,g.default)(w,4),e.exports=i.default}(Dg,Dg.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var r=Dg.exports,o=p(r),u=Lg.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,w,O){return(0,o.default)(y,1,w,O)}i.default=(0,c.default)(g,3),e.exports=i.default}(Lx,Lx.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=g;var r=G0.exports,o=p(r),u=Lx.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,w){return(0,o.default)(c.default,y,w)}e.exports=i.default}(w_,w_.exports);var A_=Gf(w_.exports),_d=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var i=arguments,r=[],o=0;o<arguments.length;o++)r[o]=i[o];return this.args=r,A_(this.tasks)},e.prototype.tap=function(i,r){var o=this;this.tasks.push(function(u){r.apply(void 0,Ox([],Ho(o.args),!1)),u(null,i)})},e}(),Nx={exports:{}},zx={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var r=$0.exports,o=we(r),u=q0.exports,c=we(u),p=Dg.exports,g=we(p),y=Y0.exports,w=we(y),O=K0.exports,D=we(O),V=$f,X=we(V),ce=Lg.exports,de=we(ce);function we(Dt){return Dt&&Dt.__esModule?Dt:{default:Dt}}function je(Dt,Yt,ir){ir=(0,w.default)(ir);var sr=0,Tr=0,Vr=Dt.length,sn=!1;Vr===0&&ir(null);function ln(Zn,ci){Zn===!1&&(sn=!0),sn!==!0&&(Zn?ir(Zn):(++Tr===Vr||ci===c.default)&&ir(null))}for(;sr<Vr;sr++)Yt(Dt[sr],sr,(0,D.default)(ln))}function ht(Dt,Yt,ir){return(0,g.default)(Dt,1/0,Yt,ir)}function _t(Dt,Yt,ir){var sr=(0,o.default)(Dt)?je:ht;return sr(Dt,(0,X.default)(Yt),ir)}i.default=(0,de.default)(_t,3),e.exports=i.default})(zx,zx.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=g;var r=zx.exports,o=p(r),u=G0.exports,c=p(u);function p(y){return y&&y.__esModule?y:{default:y}}function g(y,w){return(0,c.default)(o.default,y,w)}e.exports=i.default}(Nx,Nx.exports);var i3=Gf(Nx.exports),c8=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return i3(this.tasks)},e.prototype.tapPromise=function(i,r){var o=this;this.tasks.push(function(u){return Px(o,void 0,void 0,function(){return W0(this,function(c){switch(c.label){case 0:return[4,r()];case 1:return c.sent(),u(null,i),[2]}})})})},e}(),Ux={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var r=Y0.exports,o=O(r),u=K0.exports,c=O(u),p=$f,g=O(p),y=Lg.exports,w=O(y);function O(V){return V&&V.__esModule?V:{default:V}}function D(V,X){if(X=(0,o.default)(X),!Array.isArray(V))return X(new Error("First argument to waterfall must be an array of functions"));if(!V.length)return X();var ce=0;function de(je){var ht=(0,g.default)(V[ce++]);ht.apply(void 0,je.concat([(0,c.default)(we)]))}function we(je){for(var ht=[],_t=arguments.length-1;_t-- >0;)ht[_t]=arguments[_t+1];if(je!==!1){if(je||ce===V.length)return X.apply(void 0,[je].concat(ht));de(ht)}}de([])}i.default=(0,w.default)(D),e.exports=i.default})(Ux,Ux.exports);var s2=Gf(Ux.exports),_B=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return s2(this.tasks)},e.prototype.tap=function(i,r){this.tasks.length===0?this.tasks.push(function(o){var u=r();o(u?null:!1,u)}):this.tasks.push(function(o,u){var c=r.apply(void 0,Ox([],Ho(o),!1));u(c?null:!1,i)})},e}(),Zx=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return A_(this.tasks)},e.prototype.tap=function(i,r){this.tasks.push(function(o){var u=r();o(u,i)})},e}(),a3=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var i=arguments,r=[],o=0;o<arguments.length;o++)r[o]=i[o];return this.args=r,A_(this.tasks)},e.prototype.tapPromise=function(i,r){var o=this;this.tasks.push(function(u){return Px(o,void 0,void 0,function(){return W0(this,function(c){switch(c.label){case 0:return[4,r.apply(void 0,Ox([],Ho(this.args),!1))];case 1:return c.sent(),u(null,i),[2]}})})})},e}(),o3=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var i=arguments,r=[],o=0;o<arguments.length;o++)r[o]=i[o];return this.args=r,A_(this.tasks)},e.prototype.tapPromise=function(i,r){var o=this;this.tasks.push(function(u){return Px(o,void 0,void 0,function(){var c;return W0(this,function(p){switch(p.label){case 0:return[4,r.apply(void 0,Ox([],Ho(this.args),!1))];case 1:return c=p.sent(),u(c,i),[2]}})})})},e}(),s3=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return s2(this.tasks)},e.prototype.tapPromise=function(i,r){this.tasks.length===0?this.tasks.push(function(o){r().then(function(u){o(null,u)})}):this.tasks.push(function(o,u){r(o).then(function(c){u(null,c)})})},e}(),u2=k(67709),u3=k.n(u2),l2,c2,f2,Vx,h2,p2,d2,v2,g2,m2,y2,_2,x2,Hx,b2,S2,E2,w2,Cc,C2,A2,T2,M2,R2,I2,T_,P2,Q0,jx,l3,c3,O2,k2,f3,h3;function p3(e){var i=v3();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function v3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var g3=(l2=(0,It.b2)(),c2=(0,It.f3)(Xt.SceneID),f2=(0,It.f3)(Xt.IIconService),Vx=(0,It.f3)(Xt.IFontService),h2=(0,It.f3)(Xt.IControlService),p2=(0,It.f3)(Xt.IGlobalConfigService),d2=(0,It.f3)(Xt.IMapService),v2=(0,It.f3)(Xt.ICoordinateSystemService),g2=(0,It.f3)(Xt.IRendererService),m2=(0,It.f3)(Xt.ILayerService),y2=(0,It.f3)(Xt.IDebugService),_2=(0,It.f3)(Xt.ICameraService),x2=(0,It.f3)(Xt.IInteractionService),Hx=(0,It.f3)(Xt.IPickingService),b2=(0,It.f3)(Xt.IShaderModuleService),S2=(0,It.f3)(Xt.IMarkerService),E2=(0,It.f3)(Xt.IPopupService),l2(w2=(Cc=function(e){(0,yr.Z)(r,e);var i=p3(r);function r(){var o;return(0,Pt.Z)(this,r),o=i.call(this),(0,Ne.Z)((0,Ar.Z)(o),"destroyed",!1),(0,Ne.Z)((0,Ar.Z)(o),"loaded",!1),Da((0,Ar.Z)(o),"id",C2,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"iconService",A2,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"fontService",T2,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"controlService",M2,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"configService",R2,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"map",I2,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"coordinateSystemService",T_,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"rendererService",P2,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"layerService",Q0,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"debugService",jx,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"cameraService",l3,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"interactionService",c3,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"pickingService",O2,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"shaderModuleService",k2,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"markerService",f3,(0,Ar.Z)(o)),Da((0,Ar.Z)(o),"popupService",h3,(0,Ar.Z)(o)),(0,Ne.Z)((0,Ar.Z)(o),"inited",!1),(0,Ne.Z)((0,Ar.Z)(o),"initPromise",void 0),(0,Ne.Z)((0,Ar.Z)(o),"rendering",!1),(0,Ne.Z)((0,Ar.Z)(o),"$container",void 0),(0,Ne.Z)((0,Ar.Z)(o),"canvas",void 0),(0,Ne.Z)((0,Ar.Z)(o),"markerContainer",void 0),(0,Ne.Z)((0,Ar.Z)(o),"hooks",void 0),(0,Ne.Z)((0,Ar.Z)(o),"handleWindowResized",function(){o.emit("resize"),o.$container&&(o.initContainer(),sg(),o.coordinateSystemService.needRefresh=!0,o.render())}),(0,Ne.Z)((0,Ar.Z)(o),"handleMapCameraChanged",function(u){o.cameraService.update(u),o.render()}),o.hooks={init:new a3},o}return(0,st.Z)(r,[{key:"init",value:function(u){var c=this;this.configService.setSceneConfig(this.id,u),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return c.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Sn.Z)(nr().mark(function p(){return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c.debugService.log("map.mapInitStart",{type:c.map.version}),y.next=3,new Promise(function(w){c.map.onCameraChanged(function(O){c.cameraService.init(),c.cameraService.update(O),w()}),c.map.init()});case 3:c.map.onCameraChanged(c.handleMapCameraChanged),c.map.addMarkerContainer(),c.markerService.addMarkers(),c.markerService.addMarkerLayers(),c.popupService.initPopup(),c.interactionService.init(),c.interactionService.on(Iu.Drag,c.addSceneEvent.bind(c));case 10:case"end":return y.stop()}},p)}))),this.hooks.init.tapPromise("initRenderer",(0,Sn.Z)(nr().mark(function p(){var g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(y=((g=c.map)===null||g===void 0?void 0:g.getOverlayContainer())||void 0,y?c.$container=y:c.$container=Tm(c.configService.getSceneConfig(c.id).id||""),!c.$container){D.next=13;break}return c.canvas=Gs("canvas","",c.$container),c.setCanvas(),D.next=7,c.rendererService.init(c.canvas,c.configService.getSceneConfig(c.id),u.gl);case 7:c.registerContextLost(),c.initContainer(),u3()(c.$container,c.handleWindowResized),window.matchMedia&&((w=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||w===void 0||w.addListener(c.handleWindowResized)),D.next=14;break;case 13:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 14:c.pickingService.init(c.id);case 15:case"end":return D.stop()}},p)}))),this.render()}},{key:"registerContextLost",value:function(){var u=this,c=this.rendererService.getCanvas();c&&c.addEventListener("webglcontextlost",function(){return u.emit("webglcontextlost")})}},{key:"initMiniScene",value:function(u){var c=this;this.configService.setSceneConfig(this.id,u),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return c.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,Sn.Z)(nr().mark(function p(){return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,new Promise(function(w){c.map.onCameraChanged(function(O){c.cameraService.init(),c.cameraService.update(O),c.map.version!=="GAODE2.x"&&w()}),c.map.initMiniMap()});case 2:c.map.onCameraChanged(c.handleMapCameraChanged),c.interactionService.init(),c.interactionService.on(Iu.Drag,c.addSceneEvent.bind(c));case 5:case"end":return y.stop()}},p)}))),this.hooks.init.tapPromise("initRenderer",(0,Sn.Z)(nr().mark(function p(){var g;return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(g=u.canvas,c.$container=g||null,!c.$container){w.next=7;break}return w.next=5,c.rendererService.init(u.canvas,c.configService.getSceneConfig(c.id),void 0);case 5:w.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:c.pickingService.init(c.id);case 9:case"end":return w.stop()}},p)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(u){this.layerService.sceneService=this,this.layerService.add(u)}},{key:"addMask",value:function(u){this.layerService.sceneService=this,this.layerService.addMask(u)}},{key:"render",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.rendering||this.destroyed)){g.next=2;break}return g.abrupt("return");case 2:if(this.rendering=!0,this.inited){g.next=16;break}return g.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),g.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,g.next=20;break;case 16:return g.next=18,this.layerService.initLayers();case 18:return g.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"addFontFace",value:function(u,c){this.fontService.addFontFace(u,c)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p){var g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return y=(g=this.$container)===null||g===void 0?void 0:g.getElementsByTagName("canvas")[0],D.next=3,this.render();case 3:return w=p==="jpg"?y==null?void 0:y.toDataURL("image/jpeg"):y==null?void 0:y.toDataURL("image/png"),D.abrupt("return",w);case 5:case"end":return D.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var u=this.$container.parentElement;u!==null&&(this.markerContainer=Gs("div","l7-marker-container",u))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var u=this,c;if(!this.inited){this.destroyed=!0;return}if((0,u2.unbind)(this.$container,this.handleWindowResized),window.matchMedia){var p;(p=window.matchMedia("screen and (min-resolution: 2dppx)"))===null||p===void 0||p.removeListener(this.handleWindowResized)}this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var g;(g=u.$container)===null||g===void 0||g.removeChild(u.canvas),u.canvas=null,u.rendererService.destroy()}),(c=this.$container)===null||c===void 0||(c=c.parentNode)===null||c===void 0||c.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var u,c,p=Ms,g=((u=this.$container)===null||u===void 0?void 0:u.clientWidth)||400,y=((c=this.$container)===null||c===void 0?void 0:c.clientHeight)||300,w=this.canvas;w&&(w.width=g*p,w.height=y*p),this.rendererService.viewport({x:0,y:0,width:p*g,height:p*y})}},{key:"setCanvas",value:function(){var u,c,p=Ms,g=((u=this.$container)===null||u===void 0?void 0:u.clientWidth)||400,y=((c=this.$container)===null||c===void 0?void 0:c.clientHeight)||300,w=this.canvas;w.width=g*p,w.height=y*p,w.style.width="100%",w.style.height="100%"}},{key:"addSceneEvent",value:function(u){this.emit(u.type,u)}}]),r}(xs.EventEmitter),C2=Aa(Cc.prototype,"id",[c2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A2=Aa(Cc.prototype,"iconService",[f2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T2=Aa(Cc.prototype,"fontService",[Vx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M2=Aa(Cc.prototype,"controlService",[h2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R2=Aa(Cc.prototype,"configService",[p2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I2=Aa(Cc.prototype,"map",[d2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T_=Aa(Cc.prototype,"coordinateSystemService",[v2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P2=Aa(Cc.prototype,"rendererService",[g2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q0=Aa(Cc.prototype,"layerService",[m2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jx=Aa(Cc.prototype,"debugService",[y2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l3=Aa(Cc.prototype,"cameraService",[_2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c3=Aa(Cc.prototype,"interactionService",[x2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O2=Aa(Cc.prototype,"pickingService",[Hx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k2=Aa(Cc.prototype,"shaderModuleService",[b2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f3=Aa(Cc.prototype,"markerService",[S2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h3=Aa(Cc.prototype,"popupService",[E2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc))||w2);function m3(e){var i=0;switch(e){case"vec2":case"ivec2":i=2;break;case"vec3":case"ivec3":i=3;break;case"vec4":case"ivec4":case"mat2":i=4;break;case"mat3":i=9;break;case"mat4":i=16;break;default:}return i}var M_=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function R_(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r={};return e=e.replace(M_,function(o,u,c){var p=c.split(":"),g=p[0].trim(),y="";switch(p.length>1&&(y=p[1].trim()),u){case"bool":y=y==="true";break;case"float":case"int":y=Number(y);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":y?y=y.replace("[","").replace("]","").split(",").reduce(function(w,O){return w.push(Number(O.trim())),w},[]):y=new Array(m3(u)).fill(0);break;default:}return r[g]=y,"".concat(i?"uniform ":"").concat(u," ").concat(g,`;
`)}),{content:e,uniforms:r}}function I_(e){var i=R_(e,!0),r=i.content,o=i.uniforms;return r=r.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,function(u,c,p){p=p.trim().replace(/^.*$/gm,function(O){return"uniform ".concat(O)});var g=R_(p),y=g.content,w=g.uniforms;return Object.assign(o,w),"".concat(c,`{
`).concat(y,`
};`)}),{content:r,uniforms:o}}function Wx(e){var i={};return e.replace(M_,function(r,o,u){var c=u.trim();return i[c]?"":(i[c]=!0,"uniform ".concat(o," ").concat(c,`;
`))})}var L2,Gx,J0=Ta.uniq,D2="#define PI 3.14159265359",xB=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,y3=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};

layout(std140) uniform LayerUniforms {
  mat4 u_Mvp;
  vec2 u_sceneCenterMercator;
};
`,F2=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_EnableSelect;
  float u_activeMix;
};`,_3=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,$x=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,x3=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,b3=`layout(location = 3) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,S3=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,B2=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)
#define EARTH_CIRCUMFERENCE 40.03e6

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
#pragma include "scene_uniforms"


// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
   if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return lnglat;
  }
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  // if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
 

  //    return vec4(
  //     position.xy,
  //     project_scale(position.z),
  //     position.w);
  // }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}



float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }

  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
   return meter;
  } else  {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

// \u652F\u6301 GaodeV2\u3001Mapbox
vec4 project_common_position_to_clipspace_v2(vec4 position) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    return u_Mvp * position;
  } else {
    return project_common_position_to_clipspace(position);
  }
}
`,N2=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,E3=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,P_=/precision\s+(high|low|medium)p\s+float/,w3=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,bB=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,C3=/void\s+main\s*\([^)]*\)\s*\{\n?/,SB=/}\n?[^{}]*$/,A3=(L2=(0,It.b2)(),L2(Gx=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"moduleCache",{}),(0,Ne.Z)(this,"rawContentCache",{})}return(0,st.Z)(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:D2,fs:D2}),this.registerModule("decode",{vs:xB,fs:""}),this.registerModule("scene_uniforms",{vs:y3,fs:y3}),this.registerModule("picking_uniforms",{vs:F2,fs:F2}),this.registerModule("projection",{vs:B2,fs:B2}),this.registerModule("project",{vs:S3,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:E3}),this.registerModule("lighting",{vs:$x,fs:""}),this.registerModule("light",{vs:_3,fs:""}),this.registerModule("picking",{vs:b3,fs:x3}),this.registerModule("rotation_2d",{vs:N2,fs:""})}},{key:"registerModule",value:function(r,o){o.vs=o.vs.replace(/\r\n/g,`
`),o.fs=o.fs.replace(/\r\n/g,`
`);var u=o.vs,c=o.fs,p=o.uniforms,g=o.inject,y=I_(u),w=y.content,O=y.uniforms,D=I_(c),V=D.content,X=D.uniforms;this.rawContentCache[r]={fs:V,inject:g,uniforms:(0,ne.Z)((0,ne.Z)((0,ne.Z)({},O),X),p),vs:w}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(r){var o=this,u=this.rawContentCache[r].vs,c=this.rawContentCache[r].fs,p=this.rawContentCache[r].inject,g={};p!=null&&p["vs:#decl"]&&(u=(p==null?void 0:p["vs:#decl"])+u,g=I_(p==null?void 0:p["vs:#decl"]).uniforms),p!=null&&p["vs:#main-start"]&&(u=u.replace(C3,function(je){return je+(p==null?void 0:p["vs:#main-start"])})),p!=null&&p["fs:#decl"]&&(c=(p==null?void 0:p["fs:#decl"])+c);var y=this.processModule(u,[],"vs"),w=y.content,O=y.includeList,D=this.processModule(c,[],"fs"),V=D.content,X=D.includeList,ce="",de=J0(O.concat(X).concat(r)).reduce(function(je,ht){return(0,ne.Z)((0,ne.Z)({},je),o.rawContentCache[ht].uniforms)},(0,ne.Z)({},g));P_.test(V)||(ce=ce+w3),ce=ce+V;var we="";return P_.test(w)||(we=we+w3),we=we+w,this.moduleCache[r]={fs:ce.trim(),uniforms:de,vs:we.trim()},this.moduleCache[r]}},{key:"processModule",value:function(r,o,u){var c=this,p=r.replace(bB,function(g,y){var w=y.split(" "),O=w[0].replace(/"/g,"");if(o.indexOf(O)>-1)return"";var D=c.rawContentCache[O][u];o.push(O);var V=c.processModule(D,o,u),X=V.content;return X});return{content:p,includeList:o}}},{key:"injectDefines",value:function(r){var o=Object.keys(r).reduce(function(u,c){return u+"#define ".concat(c.toUpperCase()," ").concat(r[c],`;
`)},`
`);return o}}]),e}())||Gx);function EB(e,i){for(;!Object.prototype.hasOwnProperty.call(e,i)&&(e=(0,Ft.Z)(e),e!==null););return e}function Cf(){return typeof Reflect!="undefined"&&Reflect.get?Cf=Reflect.get.bind():Cf=function(i,r,o){var u=EB(i,r);if(u){var c=Object.getOwnPropertyDescriptor(u,r);return c.get?c.get.call(arguments.length<3?i:o):c.value}},Cf.apply(this,arguments)}var Im=function(e){return e.Normal="normal",e.PostProcessing="post-processing",e}({}),z2,T3,Xx=(z2=(0,It.b2)(),z2(T3=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"shaderModuleService",void 0),(0,Ne.Z)(this,"rendererService",void 0),(0,Ne.Z)(this,"cameraService",void 0),(0,Ne.Z)(this,"mapService",void 0),(0,Ne.Z)(this,"interactionService",void 0),(0,Ne.Z)(this,"layerService",void 0),(0,Ne.Z)(this,"config",void 0)}return(0,st.Z)(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Im.Normal}},{key:"init",value:function(r,o){this.config=o,this.rendererService=r.getContainer().get(Xt.IRendererService),this.cameraService=r.getContainer().get(Xt.ICameraService),this.mapService=r.getContainer().get(Xt.IMapService),this.interactionService=r.getContainer().get(Xt.IInteractionService),this.layerService=r.getContainer().get(Xt.ILayerService),this.shaderModuleService=r.getContainer().get(Xt.IShaderModuleService)}},{key:"render",value:function(r){}}]),e}())||T3),U2,Z2;function M3(e){var i=wB();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function wB(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var CB=(U2=(0,It.b2)(),U2(Z2=function(e){(0,yr.Z)(r,e);var i=M3(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(u,c){Cf((0,Ft.Z)(r.prototype),"init",this).call(this,u,c)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),r}(Xx))||Z2),V2,H2,O_,ey,j2;function R3(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=I3(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function I3(e,i){if(e){if(typeof e=="string")return ty(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ty(e,i)}}function ty(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var P3=(V2=(0,It.b2)(),H2=(0,It.f3)(Xt.IPostProcessor),V2(O_=(ey=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"passes",[]),Da(this,"postProcessor",j2,this),(0,Ne.Z)(this,"layer",void 0),(0,Ne.Z)(this,"renderFlag",void 0),(0,Ne.Z)(this,"width",0),(0,Ne.Z)(this,"height",0)}return(0,st.Z)(e,[{key:"setLayer",value:function(r){this.layer=r}},{key:"setRenderFlag",value:function(r){this.renderFlag=r}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var i=(0,Sn.Z)(nr().mark(function o(){var u,c,p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:u=R3(this.passes),y.prev=1,u.s();case 3:if((c=u.n()).done){y.next=9;break}return p=c.value,y.next=7,p.render(this.layer);case 7:y.next=3;break;case 9:y.next=14;break;case 11:y.prev=11,y.t0=y.catch(1),u.e(y.t0);case 14:return y.prev=14,u.f(),y.finish(14);case 17:return y.next=19,this.postProcessor.render(this.layer);case 19:case"end":return y.stop()}},o,this,[[1,11,14,17]])}));function r(){return i.apply(this,arguments)}return r}()},{key:"resize",value:function(r,o){(this.width!==r||this.height!==o)&&(this.postProcessor.resize(r,o),this.width=r,this.height=o)}},{key:"add",value:function(r,o){r.getType()===Im.PostProcessing?this.postProcessor.add(r,this.layer,o):(r.init(this.layer,o),this.passes.push(r))}},{key:"insert",value:function(r,o,u){r.init(this.layer,o),this.passes.splice(u,0,r)}},{key:"destroy",value:function(){this.passes.length=0}}]),e}(),j2=Aa(ey.prototype,"postProcessor",[H2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ey))||O_),W2,G2;function O3(e){var i=k3();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function k3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var L3=(W2=(0,It.b2)(),W2(G2=function(e){(0,yr.Z)(r,e);var i=O3(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"pickingFBO",void 0),(0,Ne.Z)((0,Ar.Z)(o),"layer",void 0),(0,Ne.Z)((0,Ar.Z)(o),"width",0),(0,Ne.Z)((0,Ar.Z)(o),"height",0),(0,Ne.Z)((0,Ar.Z)(o),"alreadyInRendering",!1),(0,Ne.Z)((0,Ar.Z)(o),"pickFromPickingFBO",function(g){var y=g.x,w=g.y,O=g.lngLat,D=g.type;if(!(!o.layer.isVisible()||!o.layer.needPick(D))){var V=o.rendererService,X=V.getViewportSize,ce=V.readPixels,de=V.useFramebuffer,we=X(),je=we.width,ht=we.height,_t=o.layer.getLayerConfig(),Dt=_t.enableHighlight,Yt=_t.enableSelect,ir=y*Ms,sr=w*Ms;if(!(ir>je||ir<0||sr>ht||sr<0)){var Tr;de(o.pickingFBO,function(){var Vr;if(Tr=ce({x:Math.round(ir),y:Math.round(ht-(w+1)*Ms),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:o.pickingFBO}),Tr[0]!==0||Tr[1]!==0||Tr[2]!==0){var sn=Jl(Tr),ln=o.layer.getSource().getFeatureById(sn),Zn={x:y,y:w,type:D,lngLat:O,featureId:sn,feature:ln};ln&&(o.layer.setCurrentPickId(sn),o.triggerHoverOnLayer(Zn))}else{var ci={x:y,y:w,lngLat:O,type:o.layer.getCurrentPickId()===null?"un"+D:"mouseout",featureId:null,feature:null};o.triggerHoverOnLayer((0,ne.Z)((0,ne.Z)({},ci),{},{type:"unpick"})),o.triggerHoverOnLayer(ci),o.layer.setCurrentPickId(null)}Dt&&o.highlightPickedFeature(Tr),Yt&&D==="click"&&((Vr=Tr)===null||Vr===void 0?void 0:Vr.toString())!==[0,0,0,0].toString()&&o.selectFeature(Tr)})}}}),o}return(0,st.Z)(r,[{key:"getType",value:function(){return Im.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(u,c){Cf((0,Ft.Z)(r.prototype),"init",this).call(this,u,c),this.layer=u;var p=this.rendererService,g=p.createTexture2D,y=p.createFramebuffer,w=p.getViewportSize,O=w(),D=O.width,V=O.height;this.pickingFBO=y({color:g({width:D,height:V,wrapS:yt.CLAMP_TO_EDGE,wrapT:yt.CLAMP_TO_EDGE})}),this.interactionService.on(Iu.Hover,this.pickFromPickingFBO),this.interactionService.on(Iu.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Iu.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(u){var c=this;if(!this.alreadyInRendering){var p=this.rendererService,g=p.getViewportSize,y=p.useFramebuffer,w=p.clear,O=g(),D=O.width,V=O.height;this.alreadyInRendering=!0,(this.width!==D||this.height!==V)&&(this.pickingFBO.resize({width:D,height:V}),this.width=D,this.height=V),y(this.pickingFBO,function(){w({framebuffer:c.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var X=c.layer.multiPassRenderer.getRenderFlag();c.layer.multiPassRenderer.setRenderFlag(!1),u.hooks.beforePickingEncode.call(),u.render(),u.hooks.afterPickingEncode.call(),c.layer.multiPassRenderer.setRenderFlag(X),c.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(u){this.layer.emit(u.type,u)}},{key:"highlightPickedFeature",value:function(u){var c=(0,Zi.Z)(u,3),p=c[0],g=c[1],y=c[2];this.layer.hooks.beforeHighlight.call([p,g,y]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(u){var c=(0,Zi.Z)(u,3),p=c[0],g=c[1],y=c[2];this.layer.hooks.beforeSelect.call([p,g,y]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(u){var c=u.featureId,p=As(c);this.selectFeature(new Uint8Array(p))}},{key:"highlightFeatureHandle",value:function(u){var c=u.featureId,p=As(c);this.highlightPickedFeature(new Uint8Array(p))}}]),r}(Xx))||G2),$2,X2,Yx,k_,Y2,D3=Ta.camelCase,K2=Ta.isNil,F3=Ta.upperFirst,B3=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,rv=($2=(0,It.b2)(),X2=(0,It.f3)(Xt.IShaderModuleService),$2(Yx=(k_=function(){function e(){(0,Pt.Z)(this,e),Da(this,"shaderModuleService",Y2,this),(0,Ne.Z)(this,"rendererService",void 0),(0,Ne.Z)(this,"config",void 0),(0,Ne.Z)(this,"quad",B3),(0,Ne.Z)(this,"enabled",!0),(0,Ne.Z)(this,"renderToScreen",!1),(0,Ne.Z)(this,"model",void 0),(0,Ne.Z)(this,"name",void 0),(0,Ne.Z)(this,"optionsToUpdate",{})}return(0,st.Z)(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(r){this.name=r}},{key:"getType",value:function(){return Im.PostProcessing}},{key:"init",value:function(r,o){this.config=o,this.rendererService=r.getContainer().get(Xt.IRendererService),this.shaderModuleService=r.getContainer().get(Xt.IShaderModuleService);var u=this.rendererService,c=u.createAttribute,p=u.createBuffer,g=u.createModel,y=this.setupShaders(),w=y.vs,O=y.fs,D=y.uniforms;this.model=g({vs:w,fs:O,attributes:{a_Position:c({buffer:p({data:[-4,-4,4,-4,0,4],type:yt.FLOAT}),size:2})},uniforms:(0,ne.Z)((0,ne.Z)({u_Texture:null},D),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(r,o){var u=this,c=r.multiPassRenderer.getPostProcessor(),p=this.rendererService,g=p.useFramebuffer,y=p.getViewportSize,w=p.clear,O=y(),D=O.width,V=O.height;g(this.renderToScreen?null:c.getWriteFBO(),function(){w({framebuffer:c.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var X=(0,ne.Z)({u_BloomFinal:0,u_Texture:c.getReadFBO(),u_ViewportSize:[D,V]},u.convertOptionsToUniforms(u.optionsToUpdate));o&&(X.u_BloomFinal=1,X.u_Texture2=o),u.model.draw({uniforms:X})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(r){this.enabled=r}},{key:"setRenderToScreen",value:function(r){this.renderToScreen=r}},{key:"updateOptions",value:function(r){this.optionsToUpdate=(0,ne.Z)((0,ne.Z)({},this.optionsToUpdate),r)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(r){var o={};return Object.keys(r).forEach(function(u){K2(r[u])||(o["u_".concat(F3(D3(u)))]=r[u])}),o}}]),e}(),Y2=Aa(k_.prototype,"shaderModuleService",[X2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k_))||Yx),q2,ry;function N3(e){var i=Q2();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function Q2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var z3=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,U3=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,L_=Ta.isNil,Z3=(q2=(0,It.b2)(),q2(ry=function(e){(0,yr.Z)(r,e);var i=N3(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:U3,fs:z3});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),w=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[w,O]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return L_(u.bloomRadius)||(c.u_radius=u.bloomRadius),L_(u.bloomIntensity)||(c.u_intensity=u.bloomIntensity),L_(u.bloomBaseRadio)||(c.u_baseRadio=u.bloomBaseRadio),c}}]),r}(rv))||ry),J2,Kx;function ew(e){var i=V3();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function V3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var H3=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,qx=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,j3=Ta.isNil,tw=(J2=(0,It.b2)(),J2(Kx=function(e){(0,yr.Z)(r,e);var i=ew(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:qx,fs:H3});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),w=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[w,O]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return j3(u.blurRadius)||(c.u_BlurDir=[u.blurRadius,0]),c}}]),r}(rv))||Kx),rw,nw;function W3(e){var i=G3();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function G3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $3=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,iw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,X3=Ta.isNil,Y3=(rw=(0,It.b2)(),rw(nw=function(e){(0,yr.Z)(r,e);var i=W3(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:iw,fs:$3});var u=this.shaderModuleService.getModule("blur-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),w=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[w,O]})}}},{key:"convertOptionsToUniforms",value:function(u){var c={};return X3(u.blurRadius)||(c.u_BlurDir=[0,u.blurRadius]),c}}]),r}(rv))||nw),aw,ow;function K3(e){var i=sw();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function sw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var D_=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,uw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,lw=(aw=(0,It.b2)(),aw(ow=function(e){(0,yr.Z)(r,e);var i=K3(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:uw,fs:D_});var u=this.shaderModuleService.getModule("colorhalftone-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),w=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[w,O]})}}}]),r}(rv))||ow),cw,fw;function hw(e){var i=q3();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function q3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Q3=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,J3=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,eI=(cw=(0,It.b2)(),cw(fw=function(e){(0,yr.Z)(r,e);var i=hw(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:J3,fs:Q3}),this.shaderModuleService.getModule("copy-pass")}}]),r}(rv))||fw),pw,dw;function Qx(e){var i=Jx();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function Jx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vw=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,tI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,gw=(pw=(0,It.b2)(),pw(dw=function(e){(0,yr.Z)(r,e);var i=Qx(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:tI,fs:vw});var u=this.shaderModuleService.getModule("hexagonalpixelate-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),w=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[w,O]})}}}]),r}(rv))||dw),mw,yw;function rI(e){var i=nI();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function nI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var iI=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,aI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,oI=(mw=(0,It.b2)(),mw(yw=function(e){(0,yr.Z)(r,e);var i=rI(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:aI,fs:iI});var u=this.shaderModuleService.getModule("ink-pass"),c=u.vs,p=u.fs,g=u.uniforms,y=this.rendererService.getViewportSize(),w=y.width,O=y.height;return{vs:c,fs:p,uniforms:(0,ne.Z)((0,ne.Z)({},g),{},{u_ViewportSize:[w,O]})}}}]),r}(rv))||yw),_w,xw;function bw(e){var i=sI();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function sI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Sw=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,uI=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,lI=(_w=(0,It.b2)(),_w(xw=function(e){(0,yr.Z)(r,e);var i=bw(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:uI,fs:Sw}),this.shaderModuleService.getModule("noise-pass")}}]),r}(rv))||xw),eb,Ew;function ww(e){var i=cI();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function cI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var tb=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fI=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,F_=(eb=(0,It.b2)(),eb(Ew=function(e){(0,yr.Z)(r,e);var i=ww(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:tb,fs:fI}),this.shaderModuleService.getModule("sepia-pass")}}]),r}(rv))||Ew),Cw,Aw,Tw,Mw,Pm,B_,hI=(Cw=(0,It.b2)(),Aw=(0,It.f3)(Xt.IRendererService),Tw=(0,It.zY)(),Cw(Mw=(Pm=function(){function e(){(0,Pt.Z)(this,e),Da(this,"rendererService",B_,this),(0,Ne.Z)(this,"passes",[]),(0,Ne.Z)(this,"readFBO",void 0),(0,Ne.Z)(this,"writeFBO",void 0)}return(0,st.Z)(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var r=this.rendererService,o=r.getViewportSize,u=r.createTexture2D,c=o(),p=c.width,g=c.height;return u({x:0,y:0,width:p,height:g,copy:!0})}},{key:"getReadFBOTex",value:function(){var r=this,o=this.rendererService.useFramebuffer;return new Promise(function(u){o(r.readFBO,(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:u(r.getCurrentFBOTex());case 1:case"end":return g.stop()}},c)})))})}},{key:"renderBloomPass",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u,c){var p,g;return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this.getReadFBOTex();case 2:p=w.sent,g=0;case 4:if(!(g<4)){w.next=11;break}return w.next=7,c.render(u,p);case 7:this.swap(),g++,w.next=4;break;case 11:case"end":return w.stop()}},o,this)}));function r(o,u){return i.apply(this,arguments)}return r}()},{key:"render",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u){var c,p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:c=0;case 1:if(!(c<this.passes.length)){y.next=15;break}if(p=this.passes[c],p.setRenderToScreen(this.isLastEnabledPass(c)),p.getName()!=="bloom"){y.next=9;break}return y.next=7,this.renderBloomPass(u,p);case 7:y.next=12;break;case 9:return y.next=11,p.render(u);case 11:c!==this.passes.length-1&&this.swap();case 12:c++,y.next=1;break;case 15:case"end":return y.stop()}},o,this)}));function r(o){return i.apply(this,arguments)}return r}()},{key:"resize",value:function(r,o){this.readFBO.resize({width:r,height:o}),this.writeFBO.resize({width:r,height:o})}},{key:"add",value:function(r,o,u){r.init(o,u),this.passes.push(r)}},{key:"insert",value:function(r,o,u,c){r.init(u,c),this.passes.splice(o,0,r)}},{key:"getPostProcessingPassByName",value:function(r){return this.passes.find(function(o){return o.getName()===r})}},{key:"init",value:function(){var r=this.rendererService,o=r.createFramebuffer,u=r.createTexture2D;this.readFBO=o({color:u({width:1,height:1,wrapS:yt.CLAMP_TO_EDGE,wrapT:yt.CLAMP_TO_EDGE})}),this.writeFBO=o({color:u({width:1,height:1,wrapS:yt.CLAMP_TO_EDGE,wrapT:yt.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(r){for(var o=r+1;o<this.passes.length;o++)if(this.passes[o].isEnabled())return!1;return!0}},{key:"swap",value:function(){var r=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=r}}]),e}(),B_=Aa(Pm.prototype,"rendererService",[Aw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Aa(Pm.prototype,"init",[Tw],Object.getOwnPropertyDescriptor(Pm.prototype,"init"),Pm.prototype),Pm))||Mw),Rw,Iw;function pI(e){var i=dI();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function dI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vI=(Rw=(0,It.b2)(),Rw(Iw=function(e){(0,yr.Z)(r,e);var i=pI(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getType",value:function(){return Im.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(u,c){Cf((0,Ft.Z)(r.prototype),"init",this).call(this,u,c)}},{key:"render",value:function(u){var c=this.rendererService,p=c.useFramebuffer,g=c.clear,y=u.multiPassRenderer.getPostProcessor().getReadFBO();p(y,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:y}),u.multiPassRenderer.setRenderFlag(!1),u.models.forEach(function(w){w.draw({uniforms:u.layerModel.getUninforms()})}),u.multiPassRenderer.setRenderFlag(!0)})}}]),r}(Xx))||Iw),Pw,rb,nb,N_,Ow;function gI(e){var i=ib();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function ib(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var mI=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,kw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,nv=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function z_(e,i){for(var r=0,o=1/i,u=e;u>0;)r=r+o*(u%i),u=Math.floor(u/i),o=o/i;return r}var yI=1,_I=(Pw=(0,It.b2)(),rb=(0,It.f3)(Xt.IShaderModuleService),Pw(nb=(N_=function(e){(0,yr.Z)(r,e);var i=gI(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),Da((0,Ar.Z)(o),"shaderModuleService",Ow,(0,Ar.Z)(o)),(0,Ne.Z)((0,Ar.Z)(o),"haltonSequence",[]),(0,Ne.Z)((0,Ar.Z)(o),"accumulatingId",0),(0,Ne.Z)((0,Ar.Z)(o),"frame",0),(0,Ne.Z)((0,Ar.Z)(o),"timer",void 0),(0,Ne.Z)((0,Ar.Z)(o),"sampleRenderTarget",void 0),(0,Ne.Z)((0,Ar.Z)(o),"prevRenderTarget",void 0),(0,Ne.Z)((0,Ar.Z)(o),"outputRenderTarget",void 0),(0,Ne.Z)((0,Ar.Z)(o),"copyRenderTarget",void 0),(0,Ne.Z)((0,Ar.Z)(o),"blendModel",void 0),(0,Ne.Z)((0,Ar.Z)(o),"outputModel",void 0),(0,Ne.Z)((0,Ar.Z)(o),"copyModel",void 0),o}return(0,st.Z)(r,[{key:"getType",value:function(){return Im.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(u,c){Cf((0,Ft.Z)(r.prototype),"init",this).call(this,u,c);var p=this.rendererService,g=p.createFramebuffer,y=p.createTexture2D;this.sampleRenderTarget=g({color:y({width:1,height:1,wrapS:yt.CLAMP_TO_EDGE,wrapT:yt.CLAMP_TO_EDGE})}),this.prevRenderTarget=g({color:y({width:1,height:1,wrapS:yt.CLAMP_TO_EDGE,wrapT:yt.CLAMP_TO_EDGE})}),this.outputRenderTarget=g({color:y({width:1,height:1,wrapS:yt.CLAMP_TO_EDGE,wrapT:yt.CLAMP_TO_EDGE})}),this.copyRenderTarget=g({color:y({width:1,height:1,wrapS:yt.CLAMP_TO_EDGE,wrapT:yt.CLAMP_TO_EDGE})});for(var w=0;w<30;w++)this.haltonSequence.push([z_(w,2),z_(w,3)]);this.blendModel=this.createTriangleModel("blend-pass",mI),this.outputModel=this.createTriangleModel("copy-pass",kw,{blend:{enable:!0,func:{srcRGB:yt.ONE,dstRGB:yt.ONE_MINUS_SRC_ALPHA,srcAlpha:yt.ONE,dstAlpha:yt.ONE_MINUS_SRC_ALPHA},equation:{rgb:yt.FUNC_ADD,alpha:yt.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",kw)}},{key:"render",value:function(u){var c=this,p=this.rendererService,g=p.clear,y=p.getViewportSize,w=p.useFramebuffer,O=y(),D=O.width,V=O.height;this.sampleRenderTarget.resize({width:D,height:V}),this.prevRenderTarget.resize({width:D,height:V}),this.outputRenderTarget.resize({width:D,height:V}),this.copyRenderTarget.resize({width:D,height:V}),this.resetFrame(),this.stopAccumulating();var X=u.multiPassRenderer.getPostProcessor().getReadFBO();w(X,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:X}),u.multiPassRenderer.setRenderFlag(!1),u.render(),u.multiPassRenderer.setRenderFlag(!0)});var ce=function de(we){!c.accumulatingId||we!==c.accumulatingId||c.isFinished()||(c.doRender(u),window.requestAnimationFrame(function(){de(we)}))};this.accumulatingId=yI++,this.timer=window.setTimeout(function(){ce(c.accumulatingId)},50)}},{key:"doRender",value:function(u){var c=this,p=this.rendererService,g=p.clear,y=p.getViewportSize,w=p.useFramebuffer,O=y(),D=O.width,V=O.height,X=u.getLayerConfig(),ce=X.jitterScale,de=ce===void 0?1:ce,we=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((we[0]*2-1)/D*de,(we[1]*2-1)/V*de),u.multiPassRenderer.setRenderFlag(!1),u.hooks.beforeRender.call(),w(this.sampleRenderTarget,function(){g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:c.sampleRenderTarget}),u.render()}),u.hooks.afterRender.call(),u.multiPassRenderer.setRenderFlag(!0);var je=u.getLayerConfig();w(this.outputRenderTarget,function(){c.blendModel.draw({uniforms:{u_opacity:je.opacity||1,u_MixRatio:c.frame===0?1:.9,u_Diffuse1:c.sampleRenderTarget,u_Diffuse2:c.frame===0?u.multiPassRenderer.getPostProcessor().getReadFBO():c.prevRenderTarget}})}),this.frame===0&&g({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(w(this.copyRenderTarget,function(){c.outputModel.draw({uniforms:{u_Texture:c.outputRenderTarget}})}),w(u.multiPassRenderer.getPostProcessor().getReadFBO(),function(){c.copyModel.draw({uniforms:{u_Texture:c.copyRenderTarget}})}),u.multiPassRenderer.getPostProcessor().render(u));var ht=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=ht,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(u,c,p){this.shaderModuleService.registerModule(u,{vs:nv,fs:c});var g=this.shaderModuleService.getModule(u),y=g.vs,w=g.fs,O=g.uniforms,D=this.rendererService,V=D.createAttribute,X=D.createBuffer,ce=D.createModel;return ce((0,ne.Z)({vs:y,fs:w,attributes:{a_Position:V({buffer:X({data:[-4,-4,4,-4,0,4],type:yt.FLOAT}),size:2})},uniforms:(0,ne.Z)({},O),depth:{enable:!1},count:3},p))}}]),r}(Xx),Ow=Aa(N_.prototype,"shaderModuleService",[rb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N_))||nb),ny=new It.W2;ny.bind(Xt.IGlobalConfigService).to(yu).inSingletonScope(),(0,It.GW)((0,It.b2)(),xs.EventEmitter),ny.bind(Xt.IEventEmitter).to(xs.EventEmitter);var Lw=(0,xr.Z)(ny,!1),ab=function(i){var r=Lw.lazyInject(i);return function(o,u,c){r.call(this,o,u),c&&(c.initializer=function(){return o[u]})}},AB=function(i){var r=Lw.lazyMultiInject(i);return function(o,u,c){r.call(this,o,u),c&&(c.initializer=function(){return o[u]})}},Xf=ny,xI=0;function bI(){var e=new It.W2;return e.parent=ny,e.bind(Xt.SceneID).toConstantValue("".concat(xI++)),e.bind(Xt.IShaderModuleService).to(A3).inSingletonScope(),e.bind(Xt.ILayerService).to(WR).inSingletonScope(),e.bind(Xt.IDebugService).to(zc).inSingletonScope(),e.bind(Xt.ISceneService).to(g3).inSingletonScope(),e.bind(Xt.ICameraService).to(Bo).inSingletonScope(),e.bind(Xt.ICoordinateSystemService).to(D0).inSingletonScope(),e.bind(Xt.IInteractionService).to(v_).inSingletonScope(),e.bind(Xt.IPickingService).to(y_).inSingletonScope(),e.bind(Xt.IControlService).to(qu).inSingletonScope(),e.bind(Xt.IMarkerService).to(Mu).inSingletonScope(),e.bind(Xt.IIconService).to(M0).inSingletonScope(),e.bind(Xt.IFontService).to(Rv).inSingletonScope(),e.bind(Xt.IPopupService).to(ts).inSingletonScope(),e.bind(Xt.INormalPass).to(CB).whenTargetNamed("clear"),e.bind(Xt.INormalPass).to(L3).whenTargetNamed("pixelPicking"),e.bind(Xt.INormalPass).to(vI).whenTargetNamed("render"),e.bind(Xt.INormalPass).to(_I).whenTargetNamed("taa"),e.bind(Xt.IFactoryNormalPass).toFactory(function(i){return function(r){return i.container.getNamed(Xt.INormalPass,r)}}),e.bind(Xt.IPostProcessingPass).to(eI).whenTargetNamed("copy"),e.bind(Xt.IPostProcessingPass).to(Z3).whenTargetNamed("bloom"),e.bind(Xt.IPostProcessingPass).to(tw).whenTargetNamed("blurH"),e.bind(Xt.IPostProcessingPass).to(Y3).whenTargetNamed("blurV"),e.bind(Xt.IPostProcessingPass).to(lI).whenTargetNamed("noise"),e.bind(Xt.IPostProcessingPass).to(F_).whenTargetNamed("sepia"),e.bind(Xt.IPostProcessingPass).to(lw).whenTargetNamed("colorHalftone"),e.bind(Xt.IPostProcessingPass).to(gw).whenTargetNamed("hexagonalPixelate"),e.bind(Xt.IPostProcessingPass).to(oI).whenTargetNamed("ink"),e.bind(Xt.IFactoryPostProcessingPass).toFactory(function(i){return function(r){var o=i.container.getNamed(Xt.IPostProcessingPass,r);return o.setName(r),o}}),e}function iy(e){var i=new It.W2;return i.parent=e,i.bind(Xt.IStyleAttributeService).to(KR).inSingletonScope(),i.bind(Xt.IMultiPassRenderer).to(P3).inSingletonScope(),i.bind(Xt.IPostProcessor).to(hI).inSingletonScope(),i}var SI=null;function TB(e){return SI.indexOf(e)}var ob=Ta.clamp,EI=2,sb=4,U_=64,MB=128,wI=256,Dw=512,ub=8192,Fw=16384,CI=32768,Uv=null,lb=131072,RB=262144,AI=524288,Fg=1048576,TI=2097152,MI=4194304,Bw=8388608,RI=16777216,II=null;function cb(e,i){return e=ob(Math.floor(e),0,255),i=ob(Math.floor(i),0,255),256*e+i}function PI(e){var i=e.color,r=e.radius,o=e.tileX,u=e.tileY,c=e.shape,p=e.opacity,g=e.stroke,y=e.strokeWidth,w=e.strokeOpacity,O=[],D=[],V=[],X=[cb(i[0],i[1]),cb(i[2],i[3])],ce=[cb(g[0],g[1]),cb(g[2],g[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(de){var we=_slicedToArray(de,2),je=we[0],ht=we[1];O.push([].concat(X,[(je+1)*Bw+(ht+1)*TI+getShapeIndex(c)*lb+r,(o+512)*AI+(u+512)*U_])),D.push([].concat(ce,[y,w])),V.push([p,0,0,0])}),{packedBuffer:O,packedBuffer2:D,packedBuffer3:V}}function fb(e,i){if(e===0&&!i)return 0;if(e===1&&i)return 4294967295;var r=i?1:0,o=Math.floor(e*127);return o*II+r*RI+o*lb+r*Uv+o*Dw+r*wI+o*EI+r}var Bg={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},Pl={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"},Hs=function(e){return e.LINEAR="linear",e.SEQUENTIAL="sequential",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat",e.DIVERGING="diverging",e}({}),Om=function(e){return e.CONSTANT="constant",e.VARIABLE="variable",e}({}),ia=function(e){return e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform",e}({}),Z_=["mapload","mapchange","mapAfterFrameChange"],V_=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],Zc=function(e){return e.IMAGE="image",e.CUSTOMIMAGE="customImage",e.ARRAYBUFFER="arraybuffer",e.RGB="rgb",e.TERRAINRGB="terrainRGB",e.CUSTOMRGB="customRGB",e.CUSTOMARRAYBUFFER="customArrayBuffer",e.CUSTOMTERRAINRGB="customTerrainRGB",e}({}),OI=function(){var e=(0,Sn.Z)(nr().mark(function i(r,o,u,c){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",new Promise(function(y,w){o({x:r.x,y:r.y,z:r.z},function(O,D){if(O||D.length===0){w(O);return}D&&Pi([{data:D,bands:[0]}],u,c,function(V,X){V?w(V):X&&y(X)})})}));case 1:case"end":return g.stop()}},i)}));return function(r,o,u,c){return e.apply(this,arguments)}}(),kI=function(){var e=(0,Sn.Z)(nr().mark(function i(r,o){return nr().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new Promise(function(p,g){o({x:r.x,y:r.y,z:r.z},function(y,w){if(y||!w){g(y);return}w instanceof ArrayBuffer?ho(w,function(O,D){O&&g(O),p(D)}):w instanceof HTMLImageElement?p(w):g(y)})}));case 1:case"end":return c.stop()}},i)}));return function(r,o){return e.apply(this,arguments)}}();function LI(e,i){return Array.isArray(e)?typeof e[0]=="string"?e.map(function(r){return pa(r,i)}):e.map(function(r){return{url:pa(r.url,i),bands:r.bands||[0]}}):pa(e,i)}function DI(e){return typeof e=="string"?[{url:e,bands:[0]}]:typeof e[0]=="string"?e.map(function(i){return{url:i,bands:[0]}}):e}function Nw(e,i){e.xhrCancel=function(){i.map(function(r){r.abort()})}}var FI=function(){var e=(0,Sn.Z)(nr().mark(function i(r,o,u,c,p){var g,y,w,O,D,V;return nr().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(g=DI(o.url),!(g.length>1)){ce.next=15;break}return ce.next=4,BI(g,o);case 4:if(y=ce.sent,w=y.rasterFiles,O=y.xhrList,D=y.errList,Nw(r,O),!(D.length>0)){ce.next=12;break}return u(D,null),ce.abrupt("return");case 12:Pi(w,c,p,u),ce.next=17;break;case 15:V=gs(o,function(de,we){if(de)u(de);else if(we){var je=[{data:we,bands:g[0].bands}];Pi(je,c,p,u)}}),Nw(r,[V]);case 17:case"end":return ce.stop()}},i)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}();function BI(e,i){return H_.apply(this,arguments)}function H_(){return H_=(0,Sn.Z)(nr().mark(function e(i,r){var o,u,c,p,g,y,w,O,D,V,X;return nr().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:o=[],u=[],c=[],p=0;case 4:if(!(p<i.length)){de.next=20;break}return g=i[p],y=(0,ne.Z)((0,ne.Z)({},r),{},{url:g.url}),w=g.bands,de.next=10,ya((0,ne.Z)((0,ne.Z)({},y),{},{type:"arrayBuffer"}));case 10:O=de.sent,D=O.err,V=O.data,X=O.xhr,D&&c.push(D),u.push(X),o.push({data:V,bands:w});case 17:p++,de.next=4;break;case 20:return de.abrupt("return",{rasterFiles:o,xhrList:u,errList:c});case 21:case"end":return de.stop()}},e)})),H_.apply(this,arguments)}var NI=function(){var e=(0,Sn.Z)(nr().mark(function i(r,o,u,c,p){var g;return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return g={url:LI(r,o)},w.abrupt("return",new Promise(function(O,D){FI(u,g,function(V,X){V?D(V):X&&O(X)},c,p)}));case 2:case"end":return w.stop()}},i)}));return function(r,o,u,c,p){return e.apply(this,arguments)}}(),zw=function(){var e=(0,Sn.Z)(nr().mark(function i(r,o,u,c){var p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return g=Array.isArray(r)?r[0]:r,c.wmtsOptions?(y=(c==null?void 0:c.getURLFromTemplate)||Sa,p=y(g,(0,ne.Z)((0,ne.Z)({},o),c.wmtsOptions))):(w=(c==null?void 0:c.getURLFromTemplate)||pa,p=w(g,o)),D.abrupt("return",new Promise(function(V,X){var ce,de=ms({url:p,type:(c==null||(ce=c.requestParameters)===null||ce===void 0?void 0:ce.type)||"arrayBuffer"},function(we,je){we?X(we):je&&V(je)},c.transformResponse);u.xhrCancel=function(){return de.cancel()}}));case 3:case"end":return D.stop()}},i)}));return function(r,o,u,c){return e.apply(this,arguments)}}(),Uw=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},zI={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},IB=[Zc.ARRAYBUFFER,Zc.RGB];function hb(e){return!!(Array.isArray(e)&&e.length===0||!Array.isArray(e)&&typeof e!="string")}function Zw(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(hb(e))throw new Error("tile server url is error");var r=(i==null?void 0:i.dataType)||Zc.IMAGE;r===Zc.RGB&&(r=Zc.ARRAYBUFFER);var o=function(p,g){switch(r){case Zc.IMAGE:return zw(e,p,g,i);case Zc.CUSTOMIMAGE:case Zc.CUSTOMTERRAINRGB:return kI(g,i==null?void 0:i.getCustomData);case Zc.ARRAYBUFFER:return NI(e,p,g,(i==null?void 0:i.format)||Uw,i==null?void 0:i.operation);case Zc.CUSTOMARRAYBUFFER:case Zc.CUSTOMRGB:return OI(g,i==null?void 0:i.getCustomData,(i==null?void 0:i.format)||Uw,i==null?void 0:i.operation);default:return zw(e,p,g,i)}},u=(0,ne.Z)((0,ne.Z)((0,ne.Z)({},zI),i),{},{getTileData:o});return{data:e,dataArray:[],tilesetOptions:u,isTile:!0}}var UI=["extent","min","max","width","height","format","operation"];function pb(e,i){var r=i.extent,o=i.min,u=i.max,c=i.width,p=i.height,g=i.format,y=i.operation,w=(0,Uc.Z)(i,UI),O;if(g===void 0||Av(e))O=Array.from(e);else{var D=Array.isArray(e)?e:[e];O=vu(D,g,y)}var V={_id:1,dataArray:[(0,ne.Z)((0,ne.Z)({_id:1,data:O,width:c,height:p},w),{},{min:o,max:u,coordinates:[[r[0],r[1]],[r[2],r[3]]]})]};return V}var ZI={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},VI=function(){var e=(0,Sn.Z)(nr().mark(function i(r){return nr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(c){var p=(0,Zi.Z)(r.bounds,4),g=p[0],y=p[1],w=p[2],O=p[3],D={layers:{testTile:{features:[{type:"Feature",properties:{key:r.x+"/"+r.y+"/"+r.z,x:(g+w)/2,y:(y+O)/2},geometry:{type:"LineString",coordinates:[[w,O],[w,y],[g,y],[g,y]]}}]}}};c(D)}));case 1:case"end":return u.stop()}},i)}));return function(r){return e.apply(this,arguments)}}();function HI(e,i){var r=function(c){return VI(c)},o=(0,ne.Z)((0,ne.Z)((0,ne.Z)({},ZI),i),{},{getTileData:r});return{data:e,dataArray:[],tilesetOptions:o,isTile:!0}}var jI=["extent","width","height"];function WI(e,i){var r=i.extent,o=i.width,u=i.height,c=(0,Uc.Z)(i,jI);e.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");for(var p=c.bands||[0,1,2],g=(0,Zi.Z)(p,3),y=g[0],w=g[1],O=g[2],D=[e[y],e[w],e[O]],V=[],X=(c==null?void 0:c.countCut)||[2,98],ce=(0,Zi.Z)(X,2),de=ce[0],we=ce[1],je=(c==null?void 0:c.RMinMax)||Es(D[0],de,we),ht=(c==null?void 0:c.GMinMax)||Es(D[1],de,we),_t=(c==null?void 0:c.BMinMax)||Es(D[2],de,we),Dt=0;Dt<D[0].length;Dt++)V.push(Math.max(0,D[0][Dt]-je[0])),V.push(Math.max(0,D[1][Dt]-ht[0])),V.push(Math.max(0,D[2][Dt]-_t[0]));var Yt={_id:1,dataArray:[(0,ne.Z)((0,ne.Z)({_id:1,data:V,width:o,height:u,rMinMax:je,gMinMax:ht,bMinMax:_t},c),{},{coordinates:[[r[0],r[1]],[r[2],r[3]]]})]};return Yt}var db=["extent","width","height"];function GI(e,i){var r=i.extent,o=i.width,u=i.height,c=(0,Uc.Z)(i,db);e.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");for(var p=c.bands||[0,1],g=(0,Zi.Z)(p,2),y=g[0],w=g[1],O=[e[y],e[w]],D=[],V=0;V<O[0].length;V++)D.push((O[1][V]-O[0][V])/(O[1][V]+O[0][V]));var X={_id:1,dataArray:[(0,ne.Z)((0,ne.Z)({_id:1,data:D,width:o,height:u},c),{},{coordinates:[[r[0],r[1]],[r[2],r[3]]]})]};return X}var $I=k(69848),XI=k.n($I);function j_(e,i){var r=i.radius,o=r===void 0?40:r,u=i.maxZoom,c=u===void 0?18:u,p=i.minZoom,g=p===void 0?0:p,y=i.zoom,w=y===void 0?2:y;if(e.pointIndex){var O=e.pointIndex.getClusters(e.extent,Math.floor(w));return e.dataArray=YI(O),e}var D=new(XI())({radius:o,minZoom:g,maxZoom:c}),V={type:"FeatureCollection",features:[]};return V.features=e.dataArray.map(function(X){return{type:"Feature",geometry:{type:"Point",coordinates:X.coordinates},properties:(0,ne.Z)({},X)}}),D.load(V.features),D}function YI(e){return e.map(function(i,r){return(0,ne.Z)({coordinates:i.geometry.coordinates,_id:r+1},i.properties)})}function KI(e){if(e.length===0)throw new Error("max requires at least one data point");for(var i=e[0],r=1;r<e.length;r++)e[r]>i&&(i=e[r]);return i}function ay(e){if(e.length===0)throw new Error("min requires at least one data point");for(var i=e[0],r=1;r<e.length;r++)e[r]<i&&(i=e[r]);return i}function km(e){if(e.length===0)return 0;for(var i=e[0],r=0,o,u=1;u<e.length;u++)o=i+e[u]*1,Math.abs(i)>=Math.abs(e[u])?r+=i-o+e[u]:r+=e[u]-o+i,i=o;return i+r*1}function vb(e){if(e.length===0)throw new Error("mean requires at least one data point");return km(e)/e.length}var Vw={min:ay,max:KI,mean:vb,sum:km};function Ng(e){var i=iv();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function iv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var qI=Ta.cloneDeep,W_=Ta.isFunction,QI=Ta.isString,JI=Ta.mergeWith;function eP(e,i){if(Array.isArray(i))return i}var tP=function(e){(0,yr.Z)(r,e);var i=Ng(r);function r(o,u){var c;return(0,Pt.Z)(this,r),c=i.call(this),(0,Ne.Z)((0,Ar.Z)(c),"type","source"),(0,Ne.Z)((0,Ar.Z)(c),"isTile",!1),(0,Ne.Z)((0,Ar.Z)(c),"inited",!1),(0,Ne.Z)((0,Ar.Z)(c),"hooks",{init:new _d}),(0,Ne.Z)((0,Ar.Z)(c),"parser",{type:"geojson"}),(0,Ne.Z)((0,Ar.Z)(c),"transforms",[]),(0,Ne.Z)((0,Ar.Z)(c),"cluster",!1),(0,Ne.Z)((0,Ar.Z)(c),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),(0,Ne.Z)((0,Ar.Z)(c),"invalidExtent",!1),(0,Ne.Z)((0,Ar.Z)(c),"dataArrayChanged",!1),(0,Ne.Z)((0,Ar.Z)(c),"cfg",{autoRender:!0}),c.originData=o,c.initCfg(u),c.init().then(function(){c.inited=!0,c.emit("update",{type:"inited"})}),c}return(0,st.Z)(r,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(u){return this.clusterIndex.getClusters(this.caculClusterExtent(2),u)}},{key:"getClustersLeaves",value:function(u){return this.clusterIndex.getLeaves(u,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(u){var c=this,p=this.clusterOptions,g=p.method,y=g===void 0?"sum":g,w=p.field,O=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(u));this.clusterOptions.zoom=u,O.forEach(function(D){D.id||(D.properties.point_count=1)}),(w||W_(y))&&(O=O.map(function(D){var V=D.id;if(V){var X=c.clusterIndex.getLeaves(V,1/0),ce=X.map(function(je){return je.properties}),de;if(QI(y)&&w){var we=$h(ce,w);de=Vw[y](we)}W_(y)&&(de=y(ce)),D.properties.stat=de}else D.properties.point_count=1;return D})),this.data=Q("geojson")({type:"FeatureCollection",features:O}),this.executeTrans()}},{key:"getFeatureById",value:function(u){var c=this.parser,p=c.type,g=p===void 0?"geojson":p,y=c.geometry;if(g==="geojson"&&!this.cluster){var w=u<this.originData.features.length?this.originData.features[u]:"null",O=qI(w);if(O!=null&&O.properties&&(this.transforms.length!==0||this.dataArrayChanged)){var D=this.data.dataArray.find(function(V){return V._id===u});O.properties=D}return O}else return g==="json"&&y?this.data.dataArray.find(function(V){return V._id===u}):u<this.data.dataArray.length?this.data.dataArray[u]:"null"}},{key:"updateFeaturePropertiesById",value:function(u,c){this.data.dataArray=this.data.dataArray.map(function(p){return p._id===u?(0,ne.Z)((0,ne.Z)({},p),c):p}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(u,c){var p=this.data.dataArray.find(function(g){return g[u]===c});return p==null?void 0:p._id}},{key:"setData",value:function(u,c){var p=this;this.originData=u,this.dataArrayChanged=!1,this.initCfg(c),this.init().then(function(){p.emit("update",{type:"update"})})}},{key:"reloadAllTile",value:function(){var u;(u=this.tileset)===null||u===void 0||u.reloadAll()}},{key:"reloadTilebyId",value:function(u,c,p){var g;(g=this.tileset)===null||g===void 0||g.reloadTileById(u,c,p)}},{key:"reloadTileByLnglat",value:function(u,c,p){var g;(g=this.tileset)===null||g===void 0||g.reloadTileByLnglat(u,c,p)}},{key:"getTileExtent",value:function(u,c){var p;return(p=this.tileset)===null||p===void 0?void 0:p.getTileExtent(u,c)}},{key:"getTileByZXY",value:function(u,c,p){var g;return(g=this.tileset)===null||g===void 0?void 0:g.getTileByZXY(u,c,p)}},{key:"reloadTileByExtent",value:function(u,c){var p;(p=this.tileset)===null||p===void 0||p.reloadTileByExtent(u,c)}},{key:"destroy",value:function(){var u;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(u=this.tileset)===null||u===void 0||u.destroy()}},{key:"processData",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p=this;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",new Promise(function(w,O){try{p.excuteParser(),p.initCluster(),p.executeTrans(),w({})}catch(D){O(D)}}));case 1:case"end":return y.stop()}},c)}));function u(){return o.apply(this,arguments)}return u}()},{key:"initCfg",value:function(u){this.cfg=JI(this.cfg,u,eP);var c=this.cfg;c&&(c.parser&&(this.parser=c.parser),c.transforms&&(this.transforms=c.transforms),this.cluster=c.cluster||!1,c.clusterOptions&&(this.cluster=!0,this.clusterOptions=(0,ne.Z)((0,ne.Z)({},this.clusterOptions),c.clusterOptions)))}},{key:"init",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.inited=!1,g.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"excuteParser",value:function(){var u=this.parser,c=u.type||"geojson",p=Q(c);this.data=p(this.originData,u),this.tileset=this.initTileset(),!u.cancelExtent&&(this.extent=Nd(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(u){this.center=[(u[0]+u[2])/2,(u[1]+u[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var u=this.data.tilesetOptions;if(u){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(u),this.tileset;var c=new Fi((0,ne.Z)({},u));return c}}},{key:"executeTrans",value:function(){var u=this,c=this.transforms;c.forEach(function(p){var g=p.type,y=te(g)(u.data,p);Object.assign(u.data,y)})}},{key:"initCluster",value:function(){if(this.cluster){var u=this.clusterOptions||{};this.clusterIndex=j_(this.data,u)}}},{key:"caculClusterExtent",value:function(u){var c=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(c=Bh(Bs(this.extent),u)),c[0].concat(c[1])}}]),r}(xs.EventEmitter);function xd(e,i){var r=i.callback;return r&&(e.dataArray=e.dataArray.filter(r)),e}function Hw(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=jw(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function jw(e,i){if(e){if(typeof e=="string")return Ww(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ww(e,i)}}function Ww(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var gb=6378e3;function rP(e,i){var r=e.dataArray,o=i.size,u=o===void 0?10:o,c=u/(2*Math.PI*gb)*(256<<20)/2,p=nP(r,u),g=p.gridHash,y=p.gridOffset,w=sP(g,y,i);return{yOffset:c,xOffset:c,radius:c,type:"grid",dataArray:w}}function nP(e,i){var r=1/0,o=-1/0,u,c=Hw(e),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;u=g.coordinates[1],Number.isFinite(u)&&(r=u<r?u:r,o=u>o?u:o)}}catch(_t){c.e(_t)}finally{c.f()}var y=(r+o)/2,w=iP(i,y);if(w.xOffset<=0||w.yOffset<=0)return{gridHash:{},gridOffset:w};var O={},D=Hw(e),V;try{for(D.s();!(V=D.n()).done;){var X=V.value,ce=X.coordinates[1],de=X.coordinates[0];if(Number.isFinite(ce)&&Number.isFinite(de)){var we=Math.floor((ce+90)/w.yOffset),je=Math.floor((de+180)/w.xOffset),ht="".concat(we,"-").concat(je);O[ht]=O[ht]||{count:0,points:[]},O[ht].count+=1,O[ht].points.push(X)}}}catch(_t){D.e(_t)}finally{D.f()}return{gridHash:O,gridOffset:w}}function iP(e,i){var r=aP(e),o=oP(i,e);return{yOffset:r,xOffset:o}}function aP(e){return e/gb*(180/Math.PI)}function oP(e,i){return i/gb*(180/Math.PI)/Math.cos(e*Math.PI/180)}function sP(e,i,r){return Object.keys(e).reduce(function(o,u,c){var p=u.split("-"),g=parseInt(p[0],10),y=parseInt(p[1],10),w={};if(r.field&&r.method){var O=bp(e[u].points,r.field);w[r.method]=hh[r.method](O)}return Object.assign(w,{_id:c,coordinates:Yn([-180+i.xOffset*(y+.5),-90+i.yOffset*(g+.5)]),rawData:e[u].points,count:e[u].count}),o.push(w),o},[])}var Lm=Math.PI/3,zg=[0,Lm,2*Lm,3*Lm,4*Lm,5*Lm];function uP(e){return e[0]}function lP(e){return e[1]}function Gw(){var e=0,i=0,r=1,o=1,u=uP,c=lP,p,g,y;function w(D){var V={},X=[],ce,de=D.length;for(ce=0;ce<de;++ce)if(!(isNaN(je=+u.call(null,we=D[ce],ce,D))||isNaN(ht=+c.call(null,we,ce,D)))){var we,je,ht,_t=Math.round(ht=ht/y),Dt=Math.round(je=je/g-(_t&1)/2),Yt=ht-_t;if(Math.abs(Yt)*3>1){var ir=je-Dt,sr=Dt+(je<Dt?-1:1)/2,Tr=_t+(ht<_t?-1:1),Vr=je-sr,sn=ht-Tr;ir*ir+Yt*Yt>Vr*Vr+sn*sn&&(Dt=sr+(_t&1?1:-1)/2,_t=Tr)}var ln=Dt+"-"+_t,Zn=V[ln];Zn?Zn.push(we):(X.push(Zn=V[ln]=[we]),Zn.x=(Dt+(_t&1)/2)*g,Zn.y=_t*y)}return X}function O(D){var V=0,X=0;return zg.map(function(ce){var de=Math.sin(ce)*D,we=-Math.cos(ce)*D,je=de-V,ht=we-X;return V=de,X=we,[je,ht]})}return w.hexagon=function(D){return"m"+O(D==null?p:+D).join("l")+"z"},w.centers=function(){for(var D=[],V=Math.round(i/y),X=Math.round(e/g),ce=V*y;ce<o+p;ce+=y,++V)for(var de=X*g+(V&1)*g/2;de<r+g/2;de+=g)D.push([de,ce]);return D},w.mesh=function(){var D=O(p).slice(0,4).join("l");return w.centers().map(function(V){return"M"+V+"m"+D}).join("")},w.x=function(D){return arguments.length?(u=D,w):u},w.y=function(D){return arguments.length?(c=D,w):c},w.radius=function(D){return arguments.length?(p=+D,g=p*2*Math.sin(Lm),y=p*1.5,w):p},w.size=function(D){return arguments.length?(e=i=0,r=+D[0],o=+D[1],w):[r-e,o-i]},w.extent=function(D){return arguments.length?(e=+D[0][0],i=+D[0][1],r=+D[1][0],o=+D[1][1],w):[[e,i],[r,o]]},w.radius(1)}var $w=6378e3;function cP(e,i){var r=e.dataArray,o=i.size,u=o===void 0?10:o,c=i.method,p=c===void 0?"sum":c,g=u/(2*Math.PI*$w)*(256<<20)/2,y=r.map(function(V){var X=Yn(V.coordinates),ce=(0,Zi.Z)(X,2),de=ce[0],we=ce[1];return(0,ne.Z)((0,ne.Z)({},V),{},{coordinates:[de,we]})}),w=Gw().radius(g).x(function(V){return V.coordinates[0]}).y(function(V){return V.coordinates[1]}),O=w(y),D={dataArray:O.map(function(V,X){var ce;if(i.field&&p){var de=bp(V,i.field);V[p]=hh[p](de)}return ce={},(0,Ne.Z)(ce,i.method,V[p]),(0,Ne.Z)(ce,"count",V.length),(0,Ne.Z)(ce,"rawData",V),(0,Ne.Z)(ce,"coordinates",[V.x,V.y]),(0,Ne.Z)(ce,"_id",X),ce}),radius:g,xOffset:g,yOffset:g,type:"hexagon"};return D}function oy(e,i){var r=i.sourceField,o=i.targetField,u=i.data,c={};return u.forEach(function(p){c[p[r]]=p}),e.dataArray=e.dataArray.map(function(p){var g=p[o];return(0,ne.Z)((0,ne.Z)({},p),c[g])}),e}function Ug(e,i){var r=i.callback;return r&&(e.dataArray=e.dataArray.map(r)),e}ie("rasterTile",Zw),ie("mvt",zu),ie("geojsonvt",_a),ie("testTile",HI),ie("geojson",Ip),ie("jsonTile",vo),ie("image",So),ie("csv",hm),ie("json",fm),ie("raster",Go),ie("rasterRgb",pb),ie("rgb",WI),ie("ndi",GI),Ce("cluster",j_),Ce("filter",xd),Ce("join",oy),Ce("map",Ug),Ce("grid",rP),Ce("hexagon",cP);var G_=tP;function mb(e){var i=fP();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function fP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Xw=function(e){(0,yr.Z)(r,e);var i=mb(r);function r(o){var u;return(0,Pt.Z)(this,r),u=i.call(this),(0,Ne.Z)((0,Ar.Z)(u),"added",!1),(0,Ne.Z)((0,Ar.Z)(u),"eventHandle",function(c){u.polyfillEvent(c),u.emit(c.type,{target:c,data:u.markerOption.extData,lngLat:u.lngLat})}),u.markerOption=(0,ne.Z)((0,ne.Z)({},u.getDefault()),o),Bd(["update","onMove","onMapClick"],(0,Ar.Z)(u)),u.init(),u}return(0,st.Z)(r,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:Po.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(u){this.scene=u,this.mapsService=u.get(Xt.IMapService),this.sceneSerive=u.get(Xt.ISceneService);var c=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(c),this.registerMarkerEvent(c),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var u=this.markerOption.element;return u&&dc(u),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(u){return this.lngLat=u,Array.isArray(u)&&(this.lngLat={lng:u[0],lat:u[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(u){var c=this;if(!this.added)return this.once("added",function(){c.setElement(u)}),this;var p=this.markerOption.element;return p&&dc(p),this.markerOption.element=u,this.init(),this.mapsService.getMarkerContainer().appendChild(u),this.registerMarkerEvent(u),this.update(),this}},{key:"openPopup",value:function(){var u=this;if(!this.added)return this.once("added",function(){u.openPopup()}),this;var c=this.popup;return c?(c.isOpen()||c.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var u=this;this.added||this.once("added",function(){u.closePopup()});var c=this.popup;return c&&c.remove(),this}},{key:"setPopup",value:function(u){return this.popup=u,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var u=this.popup;if(u)u.isOpen()?u.remove():u.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(u){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(u){this.markerOption.extData=u}},{key:"update",value:function(){if(this.mapsService){var u=this.markerOption,c=u.element,p=u.anchor;this.updatePosition(),Of(c,"".concat(cr[p]))}}},{key:"onMapClick",value:function(u){var c=this.markerOption.element;this.popup&&c&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var u=this.mapsService.getContainer();return{containerHeight:(u==null?void 0:u.scrollHeight)||0,containerWidth:(u==null?void 0:u.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updatePosition",value:function(){if(this.mapsService){var u=this.markerOption,c=u.element,p=u.offsets,g=this.lngLat,y=g.lng,w=g.lat,O=this.mapsService.lngLatToContainer([y,w]);if(c){c.style.display="block",c.style.whiteSpace="nowrap";var D=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),V=D.containerHeight,X=D.containerWidth,ce=D.bounds;if(!ce)return;if(Math.abs(ce[0][0])>180||Math.abs(ce[1][0])>180){if(O.x>X){var de=this.mapsService.lngLatToContainer([y-360,w]);O.x=de.x}if(O.x<0){var we=this.mapsService.lngLatToContainer([y+360,w]);O.x=we.x}}(O.x>X||O.x<0||O.y>V||O.y<0)&&(c.style.display="none"),c.style.left=O.x+p[0]+"px",c.style.top=O.y-p[1]+"px"}}}},{key:"init",value:function(){var u=this,c=this.markerOption.element,p=this.markerOption,g=p.color,y=p.anchor;if(!c){this.defaultMarker=!0,c=Gs("div"),this.markerOption.element=c;var w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height","48px"),w.setAttributeNS(null,"width","48px"),w.setAttributeNS(null,"viewBox","0 0 1024 1024");var O=document.createElementNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),O.setAttributeNS(null,"fill",g),w.appendChild(O),c.appendChild(w)}Du(c,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(D){var V,X,ce=((V=u.markerOption)===null||V===void 0?void 0:V.style)&&((X=u.markerOption)===null||X===void 0?void 0:X.style[D]);c&&(c.style[D]=ce)}),Ot(c,y,"marker")}},{key:"registerMarkerEvent",value:function(u){u.addEventListener("click",this.onMapClick),u.addEventListener("mousemove",this.eventHandle),u.addEventListener("click",this.eventHandle),u.addEventListener("mousedown",this.eventHandle),u.addEventListener("mouseup",this.eventHandle),u.addEventListener("dblclick",this.eventHandle),u.addEventListener("contextmenu",this.eventHandle),u.addEventListener("mouseover",this.eventHandle),u.addEventListener("mouseout",this.eventHandle),u.addEventListener("touchstart",this.eventHandle),u.addEventListener("touchend",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var u=this.getElement();u.removeEventListener("click",this.onMapClick),u.removeEventListener("mousemove",this.eventHandle),u.removeEventListener("click",this.eventHandle),u.removeEventListener("mousedown",this.eventHandle),u.removeEventListener("mouseup",this.eventHandle),u.removeEventListener("dblclick",this.eventHandle),u.removeEventListener("contextmenu",this.eventHandle),u.removeEventListener("mouseover",this.eventHandle),u.removeEventListener("mouseout",this.eventHandle),u.removeEventListener("touchstart",this.eventHandle),u.removeEventListener("touchend",this.eventHandle)}},{key:"polyfillEvent",value:function(u){!this.mapsService||this.mapsService.version!=="GAODE2.x"||yp()||(u.type==="touchstart"&&(this.touchStartTime=Date.now()),u.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:u,data:this.markerOption.extData,lngLat:this.lngLat}))}},{key:"addDragHandler",value:function(u){return null}},{key:"onUp",value:function(u){throw new Error("Method not implemented.")}}]),r}(xs.EventEmitter);function PB(e){var i=hP();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function hP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var sy=Ta.merge,yb=null,OB=k(4157);function pP(e){var i=Dm();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function Dm(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var uy=function(e){(0,yr.Z)(r,e);var i=pP(r);function r(o){var u;return(0,Pt.Z)(this,r),u=i.call(this),r.controlCount++,u.controlOption=(0,ne.Z)((0,ne.Z)({},u.getDefault(o)),o||{}),u}return(0,st.Z)(r,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(u){var c=this.getDefault(u);Object.entries(u).forEach(function(p){var g=(0,Zi.Z)(p,2),y=g[0],w=g[1];w===void 0&&(u[y]=c[y])}),"position"in u&&this.setPosition(u.position),"className"in u&&this.setClassName(u.className),"style"in u&&this.setStyle(u.style),this.controlOption=(0,ne.Z)((0,ne.Z)({},this.controlOption),u)}},{key:"addTo",value:function(u){this.mapsService=u.get(Xt.IMapService),this.renderService=u.get(Xt.IRendererService),this.layerService=u.get(Xt.ILayerService),this.controlService=u.get(Xt.IControlService),this.configService=u.get(Xt.IGlobalConfigService),this.scene=u.get(Xt.ISceneService),this.sceneContainer=u,this.isShow=!0,this.container=this.onAdd(),Du(this.container,"l7-control");var c=this.controlOption,p=c.className,g=c.style;return p&&this.setClassName(p),g&&this.setStyle(g),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;dc(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return Gs("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var u=this.container;ah(u,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var u=this.container;Du(u,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(u){return{position:es.TOPRIGHT,name:"".concat(r.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(u){if(this.mapsService&&u&&u.screenX>0&&u.screenY>0){var c=this.mapsService.getContainer();c!==null&&c.focus()}}},{key:"setPosition",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:es.TOPLEFT,c=this.controlService;return c&&c.removeControl(this),this.controlOption.position=u,c&&c.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(u){var c=this.container,p=this.controlOption.className;p&&ah(c,p),u&&Du(c,u)}},{key:"setStyle",value:function(u){var c=this.container;u?c.setAttribute("style",u):c.removeAttribute("style")}},{key:"insertContainer",value:function(){var u=this.controlOption.position,c=this.container;if(u instanceof Element)u.appendChild(c);else{var p=this.controlService.controlCorners[u];["bottomleft","bottomright","righttop","rightbottom"].includes(u)?p.insertBefore(c,p.firstChild):p.appendChild(c)}}},{key:"checkUpdateOption",value:function(u,c){return c.some(function(p){return p in u})}}]),r}(Sp());(0,Ne.Z)(uy,"controlCount",0);function kB(e){var i=Yw();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function Yw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Kw=null;function dP(e){var i=vP();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function vP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var gP=function(e){(0,yr.Z)(r,e);var i=dP(r);function r(o,u){var c;return(0,Pt.Z)(this,r),c=i.call(this),(0,Ne.Z)((0,Ar.Z)(c),"isShow",!1),(0,Ne.Z)((0,Ar.Z)(c),"timeout",null),(0,Ne.Z)((0,Ar.Z)(c),"show",function(){return c.isShow||!c.contentDOM.innerHTML||(c.resetPopperPosition(),ah(c.popperDOM,"l7-popper-hide"),c.isShow=!0,c.option.unique&&r.conflictPopperList.forEach(function(p){p!==(0,Ar.Z)(c)&&p.isShow&&p.hide()}),c.emit("show"),window.addEventListener("pointerdown",c.onPopperUnClick)),(0,Ar.Z)(c)}),(0,Ne.Z)((0,Ar.Z)(c),"hide",function(){return c.isShow&&(Du(c.popperDOM,"l7-popper-hide"),c.isShow=!1,c.emit("hide"),window.removeEventListener("pointerdown",c.onPopperUnClick)),(0,Ar.Z)(c)}),(0,Ne.Z)((0,Ar.Z)(c),"setHideTimeout",function(){c.timeout||(c.timeout=window.setTimeout(function(){c.isShow&&(c.hide(),c.timeout=null)},300))}),(0,Ne.Z)((0,Ar.Z)(c),"clearHideTimeout",function(){c.timeout&&(window.clearTimeout(c.timeout),c.timeout=null)}),(0,Ne.Z)((0,Ar.Z)(c),"onBtnClick",function(){c.isShow?c.hide():c.show()}),(0,Ne.Z)((0,Ar.Z)(c),"onPopperUnClick",function(p){mp(p.target,[".l7-button-control",".l7-popper-content"])||c.hide()}),(0,Ne.Z)((0,Ar.Z)(c),"onBtnMouseLeave",function(){c.setHideTimeout()}),(0,Ne.Z)((0,Ar.Z)(c),"onBtnMouseMove",function(){c.clearHideTimeout(),!c.isShow&&c.show()}),c.button=o,c.option=u,c.init(),u.unique&&r.conflictPopperList.push((0,Ar.Z)(c)),c}return(0,st.Z)(r,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(u){typeof u=="string"?this.contentDOM.innerHTML=u:u instanceof HTMLElement&&(Fh(this.contentDOM),this.contentDOM.appendChild(u)),this.content=u}},{key:"init",value:function(){var u=this.option.trigger;this.popperDOM=this.createPopper(),u==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),dc(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var u={},c=this.option,p=c.container,g=c.offset,y=g===void 0?[0,0]:g,w=c.placement,O=(0,Zi.Z)(y,2),D=O[0],V=O[1],X=this.button.getBoundingClientRect(),ce=p.getBoundingClientRect(),de=Fd(X,ce),we=de.left,je=de.right,ht=de.top,_t=de.bottom,Dt=!1,Yt=!1;/^(left|right)/.test(w)?(w.includes("left")?u.right="".concat(X.width+je,"px"):w.includes("right")&&(u.left="".concat(X.width+we,"px")),w.includes("start")?u.top="".concat(ht,"px"):w.includes("end")?u.bottom="".concat(_t,"px"):(u.top="".concat(ht+X.height/2,"px"),Yt=!0,u.transform="translate(".concat(D,"px, calc(").concat(V,"px - 50%))"))):/^(top|bottom)/.test(w)&&(w.includes("top")?u.bottom="".concat(X.height+_t,"px"):w.includes("bottom")&&(u.top="".concat(X.height+ht,"px")),w.includes("start")?u.left="".concat(we,"px"):w.includes("end")?u.right="".concat(je,"px"):(u.left="".concat(we+X.width/2,"px"),Dt=!0,u.transform="translate(calc(".concat(D,"px - 50%), ").concat(V,"px)"))),u.transform="translate(calc(".concat(D,"px - ").concat(Dt?"50%":"0%","), calc(").concat(V,"px - ").concat(Yt?"50%":"0%",")");var ir=w.split("-");ir.length&&Du(this.popperDOM,ir.map(function(sr){return"l7-popper-".concat(sr)}).join(" ")),Lh(this.popperDOM,gp(u))}},{key:"createPopper",value:function(){var u=this.option,c=u.container,p=u.className,g=p===void 0?"":p,y=u.content,w=Gs("div","l7-popper l7-popper-hide ".concat(g)),O=Gs("div","l7-popper-content"),D=Gs("div","l7-popper-arrow");return w.appendChild(O),w.appendChild(D),c.appendChild(w),this.popperDOM=w,this.contentDOM=O,y&&this.setContent(y),w}}]),r}(xs.EventEmitter);(0,Ne.Z)(gP,"conflictPopperList",[]);function qw(e){var i=Qw();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function Qw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var LB={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},DB=null;function mP(e){var i=Jw();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function Jw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var yP=function(e){return e.ActiveOptionClassName="l7-select-control-item-active",e.OptionValueAttrKey="data-option-value",e.OptionIndexAttrKey="data-option-index",e}(yP||{}),_P=null,_b=function(i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("l7-iconfont"),r.setAttribute("aria-hidden","true");var o=document.createElementNS("http://www.w3.org/2000/svg","use");return o.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(i)),r.appendChild(o),r};function xP(e){var i=bP();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function bP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var SP=null;function xb(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=eC(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function eC(e,i){if(e){if(typeof e=="string")return tC(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tC(e,i)}}function tC(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var bb=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Np=function(){if(typeof document=="undefined")return!1;for(var e=bb[0],i={},r=0,o=bb;r<o.length;r++){var u=o[r],c=u==null?void 0:u[1];if(c in document){var p=xb(u.entries()),g;try{for(p.s();!(g=p.n()).done;){var y=(0,Zi.Z)(g.value,2),w=y[0],O=y[1];i[e[w]]=O}}catch(D){p.e(D)}finally{p.f()}return i}}return!1}(),Sb={change:Np.fullscreenchange,error:Np.fullscreenerror},Jh={request:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.documentElement,r=arguments.length>1?arguments[1]:void 0;return new Promise(function(o,u){var c=function g(){Jh.off("change",g),o()};Jh.on("change",c);var p=i[Np.requestFullscreen](r);p instanceof Promise&&p.then(c).catch(u)})},exit:function(){return new Promise(function(i,r){if(!Jh.isFullscreen){i();return}var o=function c(){Jh.off("change",c),i()};Jh.on("change",o);var u=document[Np.exitFullscreen]();u instanceof Promise&&u.then(o).catch(r)})},toggle:function(i,r){return Jh.isFullscreen?Jh.exit():Jh.request(i,r)},onchange:function(i){Jh.on("change",i)},onerror:function(i){Jh.on("error",i)},on:function(i,r){var o=Sb[i];o&&document.addEventListener(o,r,!1)},off:function(i,r){var o=Sb[i];o&&document.removeEventListener(o,r,!1)},raw:Np};Object.defineProperties(Jh,{isFullscreen:{get:function(){return!!document[Np.fullscreenElement]}},element:{enumerable:!0,get:function(){var i;return(i=document[Np.fullscreenElement])!==null&&i!==void 0?i:void 0}},isEnabled:{enumerable:!0,get:function(){return!!document[Np.fullscreenEnabled]}}}),Np||(Jh={isEnabled:!1});var FB=null;function BB(e){var i=Eb();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function Eb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var NB=null;function EP(e){var i=wP();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function wP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var CP=null;function zB(e){var i=AP();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function AP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function UB(e){return Object.keys(e!=null?e:{}).every(function(i){return["layer","name","img"].includes(i)})}var TP=null;function MP(e){var i=RP();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function RP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var IP=function(e){(0,yr.Z)(r,e);var i=MP(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getDefault",value:function(){return{position:es.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var u=Gs("div","l7-control-logo");return this.setLogoContent(u),u}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(u){Cf((0,Ft.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["img","href"])&&(Fh(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(u){var c=this.controlOption,p=c.href,g=c.img,y=Gs("img");if(y.setAttribute("src",g),y.setAttribute("aria-label","AntV logo"),kf(y),p){var w=Gs("a","l7-control-logo-link");w.target="_blank",w.href=p,w.rel="noopener nofollow",w.setAttribute("rel","noopener nofollow"),w.appendChild(y),u.appendChild(w)}else u.appendChild(y)}}]),r}(uy),ZB={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},VB={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};function HB(e){var i=rC();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function rC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Sh=null;function jB(e){var i=$_();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function $_(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var WB=null;function wb(e){var i=PP();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function PP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var OP=function(e){(0,yr.Z)(r,e);var i=wb(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"update",function(){var g=o.mapsService,y=o.controlOption.maxWidth,w=g.getSize()[1]/2,O=g.containerToLngLat([0,w]),D=g.containerToLngLat([y,w]),V=mc([O.lng,O.lat],[D.lng,D.lat]);o.updateScales(V)}),o}return(0,st.Z)(r,[{key:"getDefault",value:function(u){return(0,ne.Z)((0,ne.Z)({},Cf((0,Ft.Z)(r.prototype),"getDefault",this).call(this,u)),{},{name:"scale",position:es.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}},{key:"onAdd",value:function(){var u="l7-control-scale",c=Gs("div",u);this.resetScaleLines(c);var p=this.controlOption.updateWhenIdle;return this.mapsService.on(p?"moveend":"mapmove",this.update),this.mapsService.on(p?"zoomend":"zoomchange",this.update),c}},{key:"onRemove",value:function(){var u=this.controlOption.updateWhenIdle;this.mapsService.off(u?"zoomend":"zoomchange",this.update),this.mapsService.off(u?"moveend":"mapmove",this.update)}},{key:"setOptions",value:function(u){Cf((0,Ft.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}},{key:"updateScales",value:function(u){var c=this.controlOption,p=c.metric,g=c.imperial;p&&u&&this.updateMetric(u),g&&u&&this.updateImperial(u)}},{key:"resetScaleLines",value:function(u){Fh(u);var c=this.controlOption,p=c.metric,g=c.imperial,y=c.maxWidth,w=c.lockWidth;w&&Lh(u,"width: ".concat(y,"px")),p&&(this.mScale=Gs("div","l7-control-scale-line",u)),g&&(this.iScale=Gs("div","l7-control-scale-line",u)),this.update()}},{key:"updateScale",value:function(u,c,p){var g=this.controlOption.maxWidth;u.style.width=Math.round(g*p)+"px",u.innerHTML=c}},{key:"getRoundNum",value:function(u){var c=Math.pow(10,(Math.floor(u)+"").length-1),p=u/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}},{key:"updateMetric",value:function(u){var c=this.getRoundNum(u),p=c<1e3?c+" m":c/1e3+" km";this.updateScale(this.mScale,p,c/u)}},{key:"updateImperial",value:function(u){var c=u*3.2808399,p,g,y;c>5280?(p=c/5280,g=this.getRoundNum(p),this.updateScale(this.iScale,g+" mi",g/p)):(y=this.getRoundNum(c),this.updateScale(this.iScale,y+" ft",y/c))}}]),r}(uy),Zv,Cb=(Zv={},(0,Ne.Z)(Zv,To.additive,{enable:!0,func:{srcRGB:yt.ONE,dstRGB:yt.ONE,srcAlpha:1,dstAlpha:1}}),(0,Ne.Z)(Zv,To.none,{enable:!1}),(0,Ne.Z)(Zv,To.normal,{enable:!0,func:{srcRGB:yt.SRC_ALPHA,dstRGB:yt.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,Ne.Z)(Zv,To.subtractive,{enable:!0,func:{srcRGB:yt.ONE,dstRGB:yt.ONE,srcAlpha:yt.ZERO,dstAlpha:yt.ONE_MINUS_SRC_COLOR},equation:{rgb:yt.FUNC_SUBTRACT,alpha:yt.FUNC_SUBTRACT}}),(0,Ne.Z)(Zv,To.max,{enable:!0,func:{srcRGB:yt.ONE,dstRGB:yt.ONE},equation:{rgb:yt.MAX_EXT}}),(0,Ne.Z)(Zv,To.min,{enable:!0,func:{srcRGB:yt.ONE,dstRGB:yt.ONE},equation:{rgb:yt.MIN_EXT}}),Zv);function nC(e){return e.map(function(i){return typeof i=="string"&&(i=[i,{}]),i})}function iC(e,i,r,o){var u=e.multiPassRenderer,c=e.getLayerConfig(),p=c.enableTAA;return p?u.add(o("taa")):u.add(o("render")),nC(i).forEach(function(g){var y=(0,Zi.Z)(g,2),w=y[0],O=y[1];u.add(r(w),O)}),u.add(r("copy")),u}var kP=function(){function e(i){(0,Pt.Z)(this,e),this.layer=i}return(0,st.Z)(e,[{key:"pickRender",value:function(r){var o=this.layer.getContainer(),u=o.get(Xt.ILayerService),c=this.layer;if(c.tileLayer)return c.tileLayer.pickRender(r);c.hooks.beforePickingEncode.call(),u.renderTileLayerMask(c),c.renderModels({ispick:!0}),c.hooks.afterPickingEncode.call()}},{key:"pick",value:function(r,o){var u=this.layer.getContainer(),c=u.get(Xt.IPickingService);return r.type==="RasterLayer"?this.pickRasterLayer(r,o):(this.pickRender(o),c.pickFromPickingFBO(r,o))}},{key:"pickRasterLayer",value:function(r,o,u){var c=this.layer.getContainer(),p=c.get(Xt.IPickingService),g=c.get(Xt.IMapService),y=this.layer.getSource().extent,w=lh(o.lngLat,y),O={x:o.x,y:o.y,type:o.type,lngLat:o.lngLat,target:o,rasterValue:null},D=u||r;if(w){var V=this.readRasterValue(r,y,g,o.x,o.y);return O.rasterValue=V,p.triggerHoverOnLayer(D,O),!0}else return O.type=o.type==="mousemove"?"mouseout":"un"+o.type,p.triggerHoverOnLayer(D,(0,ne.Z)((0,ne.Z)({},O),{},{type:"unpick"})),p.triggerHoverOnLayer(D,O),!1}},{key:"readRasterValue",value:function(r,o,u,c,p){var g=r.getSource().data.dataArray[0],y=(0,Zi.Z)(o,4),w=y[0],O=w===void 0?0:w,D=y[1],V=D===void 0?0:D,X=y[2],ce=X===void 0?10:X,de=y[3],we=de===void 0?-10:de,je=u.lngLatToContainer([O,V]),ht=u.lngLatToContainer([ce,we]),_t=ht.x-je.x,Dt=je.y-ht.y,Yt=[(c-je.x)/_t,(p-ht.y)/Dt],ir=g.width||1,sr=g.height||1,Tr=Math.floor(Yt[0]*ir),Vr=Math.floor(Yt[1]*sr),sn=Math.max(0,Vr-1)*ir+Tr,ln=g.data[sn];return ln}},{key:"selectFeature",value:function(r){var o=this.layer,u=(0,Zi.Z)(r,3),c=u[0],p=u[1],g=u[2];o.hooks.beforeSelect.call([c,p,g])}},{key:"highlightPickedFeature",value:function(r){var o=(0,Zi.Z)(r,3),u=o[0],c=o[1],p=o[2];this.layer.hooks.beforeHighlight.call([u,c,p])}},{key:"getFeatureById",value:function(r){return this.layer.getSource().getFeatureById(r)}}]),e}(),LP=function(){function e(i){(0,Pt.Z)(this,e),this.layer=i;var r=this.layer.getContainer();this.rendererService=r.get(Xt.IRendererService)}return(0,st.Z)(e,[{key:"getColorTexture",value:function(r,o){var u=this.getTextureKey(r,o);return this.key===u?this.colorTexture:(this.createColorTexture(r,o),this.key=u,this.colorTexture)}},{key:"createColorTexture",value:function(r,o){var u=this.rendererService.createTexture2D,c=this.getColorRampBar(r,o),p=u({data:new Uint8Array(c.data),width:c.width,height:c.height,flipY:!1});return this.colorTexture=p,p}},{key:"setColorTexture",value:function(r,o,u){this.key=this.getTextureKey(o,u),this.colorTexture=r}},{key:"destroy",value:function(){var r;(r=this.colorTexture)===null||r===void 0||r.destroy()}},{key:"getColorRampBar",value:function(r,o){switch(r.type){case"cat":return Rc(r);case"quantize":return If(r);case"custom":return Ll(r,o);case"linear":return Mc(r,o);default:return Ts(r)}}},{key:"getTextureKey",value:function(r,o){var u;return"".concat(r.colors.join("_"),"_").concat(r==null||(u=r.positions)===null||u===void 0?void 0:u.join("_"),"_").concat(r.type,"_").concat(o==null?void 0:o.join("_"))}}]),e}(),DP=["passes"],FP=["moduleName","vertexShader","fragmentShader","inject","triangulation","styleOption"],aC,Ab,oC;function BP(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=sC(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function sC(e,i){if(e){if(typeof e=="string")return Tb(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tb(e,i)}}function Tb(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}function NP(e){var i=uC();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function uC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Mb=Ta.isEqual,lC=Ta.isFunction,cC=Ta.isNumber,Vc=Ta.isObject,zP=Ta.isPlainObject,UP=Ta.isUndefined,fC=0,Fm=(aC=ab(Xt.IGlobalConfigService),Ab=function(e){(0,yr.Z)(r,e);var i=NP(r);function r(){var o,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,Pt.Z)(this,r),o=i.call(this),(0,Ne.Z)((0,Ar.Z)(o),"id","".concat(fC++)),(0,Ne.Z)((0,Ar.Z)(o),"name","".concat(fC)),(0,Ne.Z)((0,Ar.Z)(o),"visible",!0),(0,Ne.Z)((0,Ar.Z)(o),"zIndex",0),(0,Ne.Z)((0,Ar.Z)(o),"inited",!1),(0,Ne.Z)((0,Ar.Z)(o),"layerModelNeedUpdate",!1),(0,Ne.Z)((0,Ar.Z)(o),"pickedFeatureID",null),(0,Ne.Z)((0,Ar.Z)(o),"selectedFeatureID",null),(0,Ne.Z)((0,Ar.Z)(o),"styleNeedUpdate",!1),(0,Ne.Z)((0,Ar.Z)(o),"forceRender",!1),(0,Ne.Z)((0,Ar.Z)(o),"clusterZoom",0),(0,Ne.Z)((0,Ar.Z)(o),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,Ne.Z)((0,Ar.Z)(o),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,Ne.Z)((0,Ar.Z)(o),"hooks",{init:new o3,afterInit:new Zx,beforeRender:new Zx,beforeRenderData:new s3,afterRender:new _d,beforePickingEncode:new _d,afterPickingEncode:new _d,beforeHighlight:new _d(["pickedColor"]),afterHighlight:new _d,beforeSelect:new _d(["pickedColor"]),afterSelect:new _d,beforeDestroy:new _d,afterDestroy:new _d}),(0,Ne.Z)((0,Ar.Z)(o),"models",[]),(0,Ne.Z)((0,Ar.Z)(o),"startInit",!1),(0,Ne.Z)((0,Ar.Z)(o),"layerChildren",[]),(0,Ne.Z)((0,Ar.Z)(o),"masks",[]),Da((0,Ar.Z)(o),"configService",oC,(0,Ar.Z)(o)),(0,Ne.Z)((0,Ar.Z)(o),"animateOptions",{enable:!1}),(0,Ne.Z)((0,Ar.Z)(o),"currentPickId",null),(0,Ne.Z)((0,Ar.Z)(o),"encodeStyleAttribute",{}),(0,Ne.Z)((0,Ar.Z)(o),"enableShaderEncodeStyles",[]),(0,Ne.Z)((0,Ar.Z)(o),"enableDataEncodeStyles",[]),(0,Ne.Z)((0,Ar.Z)(o),"enablg",[]),(0,Ne.Z)((0,Ar.Z)(o),"pendingStyleAttributes",[]),(0,Ne.Z)((0,Ar.Z)(o),"scaleOptions",{}),(0,Ne.Z)((0,Ar.Z)(o),"animateStatus",!1),(0,Ne.Z)((0,Ar.Z)(o),"isDestroyed",!1),(0,Ne.Z)((0,Ar.Z)(o),"uniformBuffers",[]),(0,Ne.Z)((0,Ar.Z)(o),"encodeDataLength",0),(0,Ne.Z)((0,Ar.Z)(o),"sourceEvent",function(){o.dataState.dataSourceNeedUpdate=!0;var c=o.getLayerConfig();c&&c.autoFit&&o.fitBounds(c.fitBoundsOptions);var p=o.layerSource.getSourceCfg().autoRender;p&&setTimeout(function(){o.reRender()},10)}),o.name=u.name||o.id,o.zIndex=u.zIndex||0,o.rawConfig=u,o}return(0,st.Z)(r,[{key:"addMask",value:function(u){this.masks.push(u),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}},{key:"removeMask",value:function(u){var c=this.masks.indexOf(u);c>-1&&this.masks.splice(c,1),this.updateLayerConfig({maskLayers:this.masks})}},{key:"disableMask",value:function(){this.updateLayerConfig({enableMask:!1})}},{key:"enableMask",value:function(){this.updateLayerConfig({enableMask:!0})}},{key:"addMaskLayer",value:function(u){this.masks.push(u)}},{key:"removeMaskLayer",value:function(u){var c=this.masks.indexOf(u);c>-1&&this.masks.splice(c,1),u.destroy()}},{key:"getAttribute",value:function(u){return this.styleAttributeService.getLayerStyleAttribute(u)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(u){var c=this;if(Object.keys(u).map(function(g){g in c.rawConfig&&(c.rawConfig[g]=u[g])}),!this.startInit)this.needUpdateConfig=(0,ne.Z)((0,ne.Z)({},this.needUpdateConfig),u);else{var p=this.container.get(Xt.SceneID);this.configService.setLayerConfig(p,this.id,(0,ne.Z)((0,ne.Z)((0,ne.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),u)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(u,c){this.container=u,this.sceneContainer=c}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(u){return this.plugins.push(u),this}},{key:"init",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p=this,g,y,w,O,D,V,X;return nr().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:g=this.container.get(Xt.SceneID),this.startInit=!0,this.configService.setLayerConfig(g,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(Xt.IIconService),this.fontService=this.container.get(Xt.IFontService),this.rendererService=this.container.get(Xt.IRendererService),this.layerService=this.container.get(Xt.ILayerService),this.debugService=this.container.get(Xt.IDebugService),this.interactionService=this.container.get(Xt.IInteractionService),this.pickingService=this.container.get(Xt.IPickingService),this.mapService=this.container.get(Xt.IMapService),y=this.getLayerConfig(),w=y.enableMultiPassRenderer,O=y.passes,w&&O!==null&&O!==void 0&&O.length&&O.length>0&&this.mapService.on("mapAfterFrameChange",function(){p.renderLayers()}),this.cameraService=this.container.get(Xt.ICameraService),this.coordinateService=this.container.get(Xt.ICoordinateSystemService),this.shaderModuleService=this.container.get(Xt.IShaderModuleService),this.postProcessingPassFactory=this.container.get(Xt.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(Xt.IFactoryNormalPass),this.styleAttributeService=this.container.get(Xt.IStyleAttributeService),w&&(this.multiPassRenderer=this.container.get(Xt.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach(function(we){var je=we.attributeName,ht=we.attributeField,_t=we.attributeValues,Dt=we.updateOptions;p.styleAttributeService.updateStyleAttribute(je,{scale:(0,ne.Z)({field:ht},p.splitValuesAndCallbackInAttribute(_t,ht?void 0:p.getLayerConfig()[je]))},Dt)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(Xt.ILayerPlugin),D=BP(this.plugins);try{for(D.s();!(V=D.n()).done;)X=V.value,X.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(we){D.e(we)}finally{D.f()}return this.layerPickService=new kP(this),this.textureService=new LP(this),this.log(Pl.LayerInitStart),de.next=31,this.hooks.init.promise();case 31:this.log(Pl.LayerInitEnd),this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 36:case"end":return de.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"log",value:function(u){var c,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"init";if(!(this.tileLayer||this.isTileLayer)){var g="".concat(this.id,".").concat(p,".").concat(u),y={id:this.id,type:this.type};(c=this.debugService)===null||c===void 0||c.log(g,y)}}},{key:"updateModelData",value:function(u){u.attributes&&u.elements?this.models.map(function(c){c.updateAttributesAndElements(u.attributes,u.elements)}):console.warn("data error")}},{key:"setLayerPickService",value:function(u){this.layerPickService=u}},{key:"prepareBuildModel",value:function(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});var u=this.getLayerConfig(),c=u.animateOption;c!=null&&c.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(u,c,p){return this.updateStyleAttribute("color",u,c,p),this}},{key:"texture",value:function(u,c,p){return this.updateStyleAttribute("texture",u,c,p),this}},{key:"rotate",value:function(u,c,p){return this.updateStyleAttribute("rotate",u,c,p),this}},{key:"size",value:function(u,c,p){return this.updateStyleAttribute("size",u,c,p),this}},{key:"filter",value:function(u,c,p){var g=this.updateStyleAttribute("filter",u,c,p);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}},{key:"shape",value:function(u,c,p){this.shapeOption={field:u,values:c};var g=this.updateStyleAttribute("shape",u,c,p);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}},{key:"label",value:function(u,c,p){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:u,attributeValues:c,updateOptions:p}),this}},{key:"animate",value:function(u){var c={};return Vc(u)?(c.enable=!0,c=(0,ne.Z)((0,ne.Z)({},c),u)):c.enable=u,this.updateLayerConfig({animateOption:c}),this}},{key:"source",value:function(u,c){return(u==null?void 0:u.type)==="source"?(this.setSource(u),this):(this.sourceOption={data:u,options:c},this.clusterZoom=0,this)}},{key:"setData",value:function(u,c){var p=this;return this.inited?(this.log(Pl.SourceInitStart,$o.UPDATE),this.layerSource.setData(u,c),this.log(Pl.SourceInitEnd,$o.UPDATE)):this.on("inited",function(){p.log(Pl.SourceInitStart,$o.UPDATE);var g=p.getSource();g?p.layerSource.setData(u,c):p.source(new G_(u,c)),p.layerSource.once("update",function(){p.log(Pl.SourceInitEnd,$o.UPDATE)})}),this}},{key:"style",value:function(u){var c=this,p=u.passes,g=(0,Uc.Z)(u,DP);p&&nC(p).forEach(function(w){var O=c.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(w[0]);O&&O.updateOptions(w[1])}),g.borderColor&&(g.stroke=g.borderColor),g.borderWidth&&(g.strokeWidth=g.borderWidth);var y=g;return Object.keys(g).forEach(function(w){var O=g[w];Array.isArray(O)&&O.length===2&&!cC(O[0])&&!cC(O[1])&&(y[w]={field:O[0],value:O[1]})}),this.encodeStyle(y),this.updateLayerConfig(y),this}},{key:"encodeStyle",value:function(u){var c=this;Object.keys(u).forEach(function(p){[].concat((0,In.Z)(c.enableShaderEncodeStyles),(0,In.Z)(c.enableDataEncodeStyles)).includes(p)&&zP(u[p])&&(u[p].field||u[p].value)&&!Mb(c.encodeStyleAttribute[p],u[p])?(c.encodeStyleAttribute[p]=u[p],c.updateStyleAttribute(p,u[p].field,u[p].value),c.inited&&(c.dataState.dataMappingNeedUpdate=!0)):c.encodeStyleAttribute[p]&&(delete c.encodeStyleAttribute[p],c.dataState.dataSourceNeedUpdate=!0)})}},{key:"scale",value:function(u,c){var p=(0,ne.Z)({},this.scaleOptions);if(Vc(u)?this.scaleOptions=(0,ne.Z)((0,ne.Z)({},this.scaleOptions),u):this.scaleOptions[u]=c,this.styleAttributeService&&!Mb(p,this.scaleOptions)){var g=Vc(u)?u:(0,Ne.Z)({},u,c);this.styleAttributeService.updateScaleAttribute(g)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}},{key:"prerender",value:function(){}},{key:"render",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(u),this))}},{key:"renderMultiPass",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(this.encodeDataLength<=0&&!this.forceRender)){g.next=2;break}return g.abrupt("return");case 2:if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){g.next=7;break}return g.next=5,this.multiPassRenderer.render();case 5:g.next=8;break;case 7:this.multiPassRenderer?this.renderModels():this.renderModels();case 8:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"active",value:function(u){var c={};return c.enableHighlight=Vc(u)?!0:u,Vc(u)?(c.enableHighlight=!0,u.color&&(c.highlightColor=u.color),u.mix&&(c.activeMix=u.mix)):c.enableHighlight=!!u,this.updateLayerConfig(c),this}},{key:"setActive",value:function(u,c){var p=this;if(Vc(u)){var g=u.x,y=g===void 0?0:g,w=u.y,O=w===void 0?0:w;this.updateLayerConfig({highlightColor:Vc(c)?c.color:this.getLayerConfig().highlightColor,activeMix:Vc(c)?c.mix:this.getLayerConfig().activeMix}),this.pick({x:y,y:O})}else this.updateLayerConfig({pickedFeatureID:u,highlightColor:Vc(c)?c.color:this.getLayerConfig().highlightColor,activeMix:Vc(c)?c.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(As(u)).then(function(){setTimeout(function(){p.reRender()},1)})}},{key:"select",value:function(u){var c={};return c.enableSelect=Vc(u)?!0:u,Vc(u)?(c.enableSelect=!0,u.color&&(c.selectColor=u.color),u.mix&&(c.selectMix=u.mix)):c.enableSelect=!!u,this.updateLayerConfig(c),this}},{key:"setSelect",value:function(u,c){var p=this;if(Vc(u)){var g=u.x,y=g===void 0?0:g,w=u.y,O=w===void 0?0:w;this.updateLayerConfig({selectColor:Vc(c)?c.color:this.getLayerConfig().selectColor,selectMix:Vc(c)?c.mix:this.getLayerConfig().selectMix}),this.pick({x:y,y:O})}else this.updateLayerConfig({pickedFeatureID:u,selectColor:Vc(c)?c.color:this.getLayerConfig().selectColor,selectMix:Vc(c)?c.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(As(u)).then(function(){setTimeout(function(){p.reRender()},1)})}},{key:"setBlend",value:function(u){return this.updateLayerConfig({blend:u}),this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(u){return this.zIndex=u,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(u){this.currentPickId=u}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(u){this.selectedFeatureID=u}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var u=this.mapService.getZoom(),c=this.getLayerConfig(),p=c.visible,g=c.minZoom,y=g===void 0?-1/0:g,w=c.maxZoom,O=w===void 0?1/0:w;return!!p&&u>=y&&u<O}},{key:"setMultiPass",value:function(u,c){if(this.updateLayerConfig({enableMultiPassRenderer:u}),c&&this.updateLayerConfig({passes:c}),u){var p=this.getLayerConfig(),g=p.passes,y=g===void 0?[]:g;this.multiPassRenderer=iC(this,y,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var w=this.rendererService.getViewportSize(),O=w.width,D=w.height;this.multiPassRenderer.resize(O,D)}return this}},{key:"setMinZoom",value:function(u){return this.updateLayerConfig({minZoom:u}),this}},{key:"getMinZoom",value:function(){var u=this.getLayerConfig(),c=u.minZoom;return c}},{key:"getMaxZoom",value:function(){var u=this.getLayerConfig(),c=u.maxZoom;return c}},{key:"get",value:function(u){var c=this.getLayerConfig();return c[u]}},{key:"setMaxZoom",value:function(u){return this.updateLayerConfig({maxZoom:u}),this}},{key:"setAutoFit",value:function(u){return this.updateLayerConfig({autoFit:u}),this}},{key:"fitBounds",value:function(u){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var c=this.getSource(),p=c.extent,g=p.some(function(y){return Math.abs(y)===1/0});return g?this:(this.mapService.fitBounds([[p[0],p[1]],[p[2],p[3]]],u),this)}},{key:"destroy",value:function(){var u,c,p,g,y,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.isDestroyed){(u=this.layerModel)===null||u===void 0||u.uniformBuffers.forEach(function(V){V.destroy()}),this.layerChildren.map(function(V){return V.destroy(!1)}),this.layerChildren=[];var O=this.getLayerConfig(),D=O.maskfence;D&&(this.masks.map(function(V){return V.destroy(!1)}),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(c=this.multiPassRenderer)===null||c===void 0||c.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(p=this.layerModel)===null||p===void 0||p.clearModels(w),(g=this.tileLayer)===null||g===void 0||g.destroy(),this.models=[],(y=this.debugService)===null||y===void 0||y.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var u;this.models.forEach(function(c){return c.destroy()}),(u=this.layerModel)===null||u===void 0||u.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(u){return u.needRescale||u.needRemapping||u.needRegenerateVertices}).length}},{key:"setSource",value:function(u){var c=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=u,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var p=this.mapService.getZoom();this.layerSource.updateClusterData(p)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(g){var y=g.type;if(c.coordCenter===void 0){var w,O=c.layerSource.center;c.coordCenter=O,(w=c.mapService)!==null&&w!==void 0&&w.setCoordCenter&&c.mapService.setCoordCenter(O)}if(y==="update"){if(c.tileLayer){c.tileLayer.reload();return}c.sourceEvent()}})}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(u){this.encodedData=u,this.encodeDataLength=u.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(u){return this.styleAttributeService.getLayerAttributeScale(u)}},{key:"getLegend",value:function(u){var c,p,g,y=this.styleAttributeService.getLayerStyleAttribute(u),w=(y==null||(c=y.scale)===null||c===void 0?void 0:c.scalers)||[];return{type:(p=w[0].option)===null||p===void 0?void 0:p.type,field:y==null||(g=y.scale)===null||g===void 0?void 0:g.field,items:this.getLegendItems(u)}}},{key:"getLegendItems",value:function(u){var c=this.styleAttributeService.getLayerAttributeScale(u);if(!c)return[];if(c.invertExtent){var p=c.range().map(function(w){return(0,Ne.Z)({value:c.invertExtent(w)},u,w)});return p}else if(c.ticks){var g=c.ticks().map(function(w){return(0,Ne.Z)({value:w},u,c(w))});return g}else if(c!=null&&c.domain){var y=c.domain().filter(function(w){return!UP(w)}).map(function(w){return(0,Ne.Z)({value:w},u,c(w))});return y}return[]}},{key:"pick",value:function(u){var c=u.x,p=u.y;this.interactionService.triggerHover({x:c,y:p})}},{key:"boxSelect",value:function(u,c){this.pickingService.boxPickLayer(this,u,c)}},{key:"buildLayerModel",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p){var g=this,y,w,O,D,V,X,ce,de,we,je,ht,_t;return nr().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return y=p.moduleName,w=p.vertexShader,O=p.fragmentShader,D=p.inject,V=p.triangulation,X=p.styleOption,ce=(0,Uc.Z)(p,FP),this.shaderModuleService.registerModule(y,{vs:w,fs:O,inject:D}),de=this.shaderModuleService.getModule(y),we=de.vs,je=de.fs,ht=de.uniforms,_t=this.rendererService.createModel,Yt.abrupt("return",new Promise(function(ir){var sr=g.styleAttributeService.createAttributesAndIndices(g.encodedData,V,X),Tr=sr.attributes,Vr=sr.elements,sn=sr.count,ln=(0,ne.Z)({attributes:Tr,uniforms:ht,fs:je,vs:we,elements:Vr,blend:Cb[To.normal],uniformBuffers:[].concat((0,In.Z)(g.layerModel.uniformBuffers),(0,In.Z)(g.rendererService.uniformBuffers),[g.getLayerUniformBuffer(),g.getPickingUniformBuffer()]),textures:g.layerModel.textures},ce);sn&&(ln.count=sn);var Zn=_t(ln);ir(Zn)}));case 5:case"end":return Yt.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"createAttributes",value:function(u){var c=u.triangulation,p=this.styleAttributeService.createAttributes(this.encodedData,c),g=p.attributes;return g}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(u){var c=this.getLayerConfig(),p=c.enableHighlight,g=p===void 0?!0:p,y=c.enableSelect,w=y===void 0?!0:y,O=this.eventNames().indexOf(u)!==-1||this.eventNames().indexOf("un"+u)!==-1;return(u==="click"||u==="dblclick")&&w&&(O=!0),u==="mousemove"&&(g||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(O=!0),this.isVisible()&&O}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return g.stop()}},c)}));function u(){return o.apply(this,arguments)}return u}()},{key:"rebuildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.buildModels();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"renderMulPass",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p){return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,p.render();case 2:case"end":return y.stop()}},c)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"renderModels",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(function(p){p.draw({uniforms:u.layerModel.getUninforms(),blend:u.layerModel.getBlend(),stencil:u.layerModel.getStencil(c),textures:u.layerModel.textures},(c==null?void 0:c.ispick)||!1)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(u,c,p,g){var y=this.configService.getAttributeConfig(this.id)||{};return Mb(y[u],{field:c,values:p})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(u)!==-1&&this.configService.setAttributeConfig(this.id,(0,Ne.Z)({},u,{field:c,values:p})),this.startInit?this.styleAttributeService.updateStyleAttribute(u,{scale:(0,ne.Z)({field:c},this.splitValuesAndCallbackInAttribute(p,this.getLayerConfig()[c]))},g):this.pendingStyleAttributes.push({attributeName:u,attributeField:c,attributeValues:p,updateOptions:g}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(u){console.warn("empty fn")}},{key:"processData",value:function(u){return u}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g;return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return this.models.forEach(function(O){return O.destroy()}),this.models=[],this.uniformBuffers.forEach(function(O){O.destroy()}),this.uniformBuffers=[],p=this.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0}),this.uniformBuffers.push(p),g=this.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0}),this.uniformBuffers.push(g),w.next=10,this.layerModel.initModels();case 10:this.models=w.sent;case 11:case"end":return w.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getLayerUniformBuffer",value:function(){return this.uniformBuffers[0]}},{key:"getPickingUniformBuffer",value:function(){return this.uniformBuffers[1]}},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(u){return{values:lC(u)?void 0:u,callback:lC(u)?u:void 0}}}]),r}(xs.EventEmitter),oC=Aa(Ab.prototype,"configService",[aC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ab);function ZP(e,i){return{enable:e,mask:255,func:{cmp:yt.EQUAL,ref:i?1:0,mask:1}}}function hC(e){return e.maskOperation===ll.OR?{enable:!0,mask:255,func:{cmp:yt.ALWAYS,ref:1,mask:255},opFront:{fail:yt.KEEP,zfail:yt.REPLACE,zpass:yt.REPLACE}}:{enable:!0,mask:255,func:{cmp:e.stencilType===mo.SINGLE||e.stencilIndex===0?yt.ALWAYS:yt.LESS,ref:e.stencilType===mo.SINGLE?1:e.stencilIndex===0?2:1,mask:255},opFront:{fail:yt.KEEP,zfail:yt.REPLACE,zpass:yt.REPLACE}}}var Za=function(e){return e[e.POSITION=0]="POSITION",e[e.COLOR=1]="COLOR",e[e.VERTEX_ID=2]="VERTEX_ID",e[e.PICKING_COLOR=3]="PICKING_COLOR",e[e.STROKE=4]="STROKE",e[e.OPACITY=5]="OPACITY",e[e.OFFSETS=6]="OFFSETS",e[e.ROTATION=7]="ROTATION",e[e.EXTRUSION_BASE=8]="EXTRUSION_BASE",e[e.SIZE=9]="SIZE",e[e.SHAPE=10]="SHAPE",e[e.EXTRUDE=11]="EXTRUDE",e[e.MAX=12]="MAX",e[e.NORMAL=13]="NORMAL",e[e.UV=14]="UV",e[e.LINEAR=15]="LINEAR",e}({});function av(e){switch(e){case"rotation":return{name:"Rotation",type:ia.Attribute,descriptor:{name:"a_Rotation",shaderLocation:Za.ROTATION,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(r){var o=r.rotation,u=o===void 0?0:o;return Array.isArray(u)?[u[0]]:[u]}}};case"stroke":return{name:"stroke",type:ia.Attribute,descriptor:{name:"a_Stroke",shaderLocation:Za.STROKE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:4,update:function(r){var o=r.stroke,u=o===void 0?[1,1,1,1]:o;return u}}};case"opacity":return{name:"opacity",type:ia.Attribute,descriptor:{name:"a_Opacity",shaderLocation:Za.OPACITY,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(r){var o=r.opacity,u=o===void 0?1:o;return[u]}}};case"extrusionBase":return{name:"extrusionBase",type:ia.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:Za.EXTRUSION_BASE,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(r){var o=r.extrusionBase,u=o===void 0?0:o;return[u]}}};case"offsets":return{name:"offsets",type:ia.Attribute,descriptor:{name:"a_Offsets",shaderLocation:Za.OFFSETS,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(r){var o=r.offsets;return o}}};case"thetaOffset":return{name:"thetaOffset",type:ia.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:15,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(r){var o=r.thetaOffset,u=o===void 0?1:o;return[u]}}};default:return}}var pC={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},Hc={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};function bd(e){var i="";return Object.keys(e).forEach(function(r){var o=e[r];Array.isArray(o)?i+="vec".concat(o.length," ").concat(r,`;
`):i+="flot ".concat(r,`;
`)}),i}function Rb(e){return Math.max(Math.ceil(e/4)*4,4)}var Ib,dC,Sd,ns={opacity:Za.OPACITY,stroke:Za.STROKE,offsets:Za.OFFSETS,rotation:Za.ROTATION,extrusionBase:Za.EXTRUSION_BASE,thetaOffset:15},eu=(Ib=ab(Xt.IGlobalConfigService),dC=function(){function e(i){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"uniformBuffers",[]),(0,Ne.Z)(this,"textures",[]),(0,Ne.Z)(this,"preStyleAttribute",{}),(0,Ne.Z)(this,"encodeStyleAttribute",{}),Da(this,"configService",Sd,this),this.layer=i,this.rendererService=i.getContainer().get(Xt.IRendererService),this.pickingService=i.getContainer().get(Xt.IPickingService),this.shaderModuleService=i.getContainer().get(Xt.IShaderModuleService),this.styleAttributeService=i.getContainer().get(Xt.IStyleAttributeService),this.mapService=i.getContainer().get(Xt.IMapService),this.iconService=i.getContainer().get(Xt.IIconService),this.fontService=i.getContainer().get(Xt.IFontService),this.cameraService=i.getContainer().get(Xt.ICameraService),this.layerService=i.getContainer().get(Xt.ILayerService),this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();var r=this.rendererService.createTexture2D;this.createTexture2D=r}return(0,st.Z)(e,[{key:"getBlend",value:function(){var r=this.layer.getLayerConfig(),o=r.blend,u=o===void 0?"normal":o;return Cb[To[u]]}},{key:"getStencil",value:function(r){var o=this.layer.getLayerConfig(),u=o.mask,c=u===void 0?!1:u,p=o.maskInside,g=p===void 0?!0:p,y=o.enableMask,w=o.maskOperation,O=w===void 0?ll.AND:w;if(this.layer.type==="MaskLayer")return hC({isStencil:!0,stencilType:mo.SINGLE});if(r.isStencil)return hC((0,ne.Z)((0,ne.Z)({},r),{},{maskOperation:O}));var D=c||y&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return ZP(D,g)}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){var r=this.getCommonUniformsInfo(),o=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();var u=(0,ne.Z)((0,ne.Z)({},o.uniformsOption),r.uniformsOption);return!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(u.u_texture=this.textures[0]),u}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){var i=(0,Sn.Z)(nr().mark(function o(){return nr().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",!1);case 1:case"end":return c.stop()}},o)}));function r(){return i.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var i=(0,Sn.Z)(nr().mark(function o(){return nr().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return c.stop()}},o)}));function r(){return i.apply(this,arguments)}return r}()},{key:"initModels",value:function(){var i=(0,Sn.Z)(nr().mark(function o(){return nr().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return c.stop()}},o)}));function r(){return i.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"prerender",value:function(){}},{key:"render",value:function(r){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(r){return[r.enable?0:1,r.duration||4,r.interval||.2,r.trailLength||.1]}},{key:"startModelAnimate",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption;o.enable&&this.layer.setAnimateStartTime()}},{key:"getInject",value:function(){var r=this.layer.encodeStyleAttribute,o="",u=[];this.layer.enableShaderEncodeStyles.forEach(function(g){r[g]?o+="#define USE_ATTRIBUTE_".concat(g.toUpperCase(),` 0.0; 

`):u.push("  ".concat(Hc[g]," u_").concat(g,";"));var y=ns[g];!y&&g==="THETA_OFFSET"&&(y=15),o+=`
          #ifdef USE_ATTRIBUTE_`.concat(g.toUpperCase(),`
          layout(location = `).concat(ns[g],") in ").concat(Hc[g]," a_").concat(g.charAt(0).toUpperCase()+g.slice(1),`;
        #endif

        `)});var c=u.length?`
layout(std140) uniform AttributeUniforms {
`.concat(u.join(`
`),`
};
    `):"";o+=c;var p="";return this.layer.enableShaderEncodeStyles.forEach(function(g){p+=`

    #ifdef USE_ATTRIBUTE_`.concat(g.toUpperCase(),`
      `).concat(Hc[g]," ").concat(g,"  = a_").concat(g.charAt(0).toUpperCase()+g.slice(1),`;
    #else
      `).concat(Hc[g]," ").concat(g," = u_").concat(g,`;
    #endif

    `)}),{"vs:#decl":o,"fs:#decl":c,"vs:#main-start":p}}},{key:"getStyleAttribute",value:function(){var r=this,o={};return this.layer.enableShaderEncodeStyles.forEach(function(u){if(!r.layer.encodeStyleAttribute[u]){var c=r.layer.getLayerConfig()[u],p=typeof c=="undefined"?pC[u]:c;u==="stroke"&&(p=yo(p)),o["u_"+u]=p}}),o}},{key:"registerStyleAttribute",value:function(){var r=this;Object.keys(this.layer.encodeStyleAttribute).forEach(function(o){var u=av(o);u&&(r.styleAttributeService.registerStyleAttribute(u),u.descriptor&&(u.descriptor.shaderLocation=ns[o]))})}},{key:"updateEncodeAttribute",value:function(r,o){this.encodeStyleAttribute[r]=o}},{key:"initUniformsBuffer",value:function(){var r=this.getUniformsBufferInfo(this.getStyleAttribute()),o=this.getCommonUniformsInfo();r.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(Rb(r.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.attributeUnifoms)),o.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(Rb(o.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.commonUnifoms))}},{key:"getUniformsBufferInfo",value:function(r){var o=0,u=[];return Object.values(r).forEach(function(c){Array.isArray(c)?(u.push.apply(u,(0,In.Z)(c)),o+=c.length):typeof c=="number"?(u.push(c),o+=1):typeof c=="boolean"&&(u.push(Number(c)),o+=1)}),{uniformsOption:r,uniformsLength:o,uniformsArray:u}}},{key:"getCommonUniformsInfo",value:function(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}},{key:"updateStyleUnifoms",value:function(){var r,o,u=this.getUniformsBufferInfo(this.getStyleAttribute()),c=u.uniformsArray,p=this.getCommonUniformsInfo(),g=p.uniformsArray;(r=this.attributeUnifoms)===null||r===void 0||r.subData({offset:0,data:new Uint8Array(new Float32Array(c).buffer)}),(o=this.commonUnifoms)===null||o===void 0||o.subData({offset:0,data:new Uint8Array(new Float32Array(g).buffer)})}}]),e}(),Sd=Aa(dC.prototype,"configService",[Ib],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dC),Pb=100,ly=36,GB=40;function vC(e){return e/180*Math.acos(-1)}function Ob(e){var i=vC(e[0])+Math.PI/2,r=vC(e[1]),o=Pb+Math.random()*.4,u=o*Math.cos(r)*Math.cos(i),c=o*Math.cos(r)*Math.sin(i),p=o*Math.sin(r);return[c,p,u]}function $B(e,i){var r=mat4.create(),o=mat4.create(),u=vec3.fromValues(0,1,0),c=vec3.fromValues(0,0,0);i=i||{},e=typeof e!="undefined"?e:1;for(var p=typeof i.segments!="undefined"?i.segments:32,g=2+p,y=2*g,w=[],O=[],D=[],V=[],X=[],ce=[],de=0;de<=g;de++){for(var we=de/g,je=we*Math.PI,ht=0;ht<=y;ht++){var _t=ht/y,Dt=_t*Math.PI*2;mat4.identity(o),mat4.rotateZ(o,o,-je),mat4.identity(r),mat4.rotateY(r,r,Dt),vec3.transformMat4(c,u,o),vec3.transformMat4(c,c,r),vec3.scale(c,c,-e),D.push(c.slice()),V.push.apply(V,_toConsumableArray(c.slice())),vec3.normalize(c,c),X.push.apply(X,_toConsumableArray(c.slice())),ce.push([_t,1-we]),V.push(_t,1-we)}if(de>0)for(var Yt=D.length,ir=Yt-2*(y+1);ir+y+2<Yt;ir++)w.push([ir,ir+1,ir+y+1]),O.push(ir,ir+1,ir+y+1),w.push([ir+y+1,ir+1,ir+y+2]),O.push(ir+y+1,ir+1,ir+y+2)}return{cells:w,positions:D,uvs:ce,positionsArr:V,indicesArr:O,normalArr:X}}var X_=Kn.Ue(),VP=Kn.Ue(),Ol=Kn.Ue(),hn=Kn.Ue(),Vv=Kn.Ue();function Fa(e,i,r,o,u){Kn.IH(e,r,o),Kn.Fv(e,e),i=Kn.al(-e[1],e[0]);var c=Kn.al(-r[1],r[0]);return[u/Kn.AK(i,c),i]}function el(e,i){return Kn.t8(e,-i[1],i[0])}function ov(e,i,r){return Kn.lu(e,i,r),Kn.Fv(e,e),e}function Zg(e,i){return e[0]===i[0]&&e[1]===i[1]}function XB(e){for(var i=new Map,r=0;r<e.length;r++){var o=e[0].toString()+"-"+e[1].toString();i.get(o)?(e.splice(r,1),r++):i.set(o,o)}return e}var uc=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Pt.Z)(this,e),(0,Ne.Z)(this,"lastFlip",-1),(0,Ne.Z)(this,"miter",Kn.al(0,0)),(0,Ne.Z)(this,"started",!1),(0,Ne.Z)(this,"dash",!1),(0,Ne.Z)(this,"totalDistance",0),(0,Ne.Z)(this,"currentIndex",0),this.join=i.join||"miter",this.cap=i.cap||"butt",this.miterLimit=i.miterLimit||10,this.thickness=i.thickness||1,this.dash=i.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,st.Z)(e,[{key:"simpleExtrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],w=p<r.length-1?r[p+1]:null,O=this.simpleSegment(o,c,g,y,w);c+=O}if(this.dash)for(var D=0;D<o.positions.length/6;D++)o.positions[D*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleExtrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,w,O,D=r[g-1];D.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],X=r[g];X.push((w=o[g][2])!==null&&w!==void 0?w:0);var ce=o[g],de=g<r.length-1?[].concat((0,In.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,we=g<o.length-1?o[g+1]:null,je=this.simpleSegment(u,p,D,X,de,V,ce,we);p+=je}if(this.dash)for(var ht=0;ht<u.positions.length/6;ht++)u.positions[ht*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude_gaode2",value:function(r,o){var u=this.complex;if(r.length<=1)return u;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var c=r.length,p=u.startIndex,g=1;g<c;g++){var y,w,O,D=r[g-1];D.push((y=o[g-1][2])!==null&&y!==void 0?y:0);var V=o[g-1],X=r[g];X.push((w=o[g][2])!==null&&w!==void 0?w:0);var ce=o[g],de=g<r.length-1?[].concat((0,In.Z)(r[g+1]),[(O=o[g+1][2])!==null&&O!==void 0?O:0]):null,we=g<o.length-1?o[g+1]:null,je=this.segment_gaode2(u,p,D,X,de,V,ce,we);p+=je}if(this.dash)for(var ht=0;ht<u.positions.length/6;ht++)u.positions[ht*6+5]=this.totalDistance;return u.startIndex=u.positions.length/6,u}},{key:"extrude",value:function(r){var o=this.complex;if(r.length<=1)return o;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var u=r.length,c=o.startIndex,p=1;p<u;p++){var g=r[p-1],y=r[p],w=p<r.length-1?r[p+1]:null,O=this.segment(o,c,g,y,w);c+=O}if(this.dash)for(var D=0;D<o.positions.length/6;D++)o.positions[D*6+5]=this.totalDistance;return o.startIndex=o.positions.length/6,o}},{key:"simpleSegment",value:function(r,o,u,c,p){var g=0,y=r.indices,w=r.positions,O=r.normals,D=Yn([c[0],c[1]]),V=Yn([u[0],u[1]]);ov(Ol,D,V);var X=0;if(this.dash&&(X=this.lineSegmentDistance(D,V),this.totalDistance+=X),this.normal||(this.normal=Kn.Ue(),el(this.normal,Ol)),this.started||(this.started=!0,this.extrusions(w,O,u,this.normal,this.thickness,this.totalDistance-X)),y.push(o+0,o+1,o+2),!p)el(this.normal,Ol),this.extrusions(w,O,c,this.normal,this.thickness,this.totalDistance),y.push.apply(y,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2;else{var ce=Yn([p[0],p[1]]);Zg(D,ce)&&Kn.IH(ce,D,Kn.Fv(ce,Kn.$X(ce,D,V))),ov(hn,ce,D);var de=Fa(Vv,Kn.Ue(),Ol,hn,this.thickness),we=(0,Zi.Z)(de,2),je=we[0],ht=we[1],_t=Kn.AK(Vv,this.normal)<0?-1:1;this.extrusions(w,O,c,ht,je,this.totalDistance),y.push.apply(y,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),_t=-1,Kn.JG(this.normal,ht),g+=2,this.lastFlip=_t}return g}},{key:"segment_gaode2",value:function(r,o,u,c,p,g,y,w){var O=0,D=r.indices,V=r.positions,X=r.normals,ce=this.cap==="square",de=this.join==="bevel",we=Yn([y[0],y[1]]),je=Yn([g[0],g[1]]);ov(Ol,c,u);var ht=0;if(this.dash&&(ht=this.lineSegmentDistance(we,je),this.totalDistance+=ht),this.normal||(this.normal=Kn.Ue(),el(this.normal,Ol)),!this.started)if(this.started=!0,ce){var _t=Kn.Ue(),Dt=Kn.Ue();Kn.IH(_t,this.normal,Ol),Kn.IH(Dt,this.normal,Ol),X.push(Dt[0],Dt[1],0),X.push(_t[0],_t[1],0),V.push(u[0],u[1],u[2]|0,this.totalDistance-ht,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),V.push(u[0],u[1],u[2]|0,this.totalDistance-ht,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,X,u,this.normal,this.thickness,this.totalDistance-ht);if(D.push(o+0,o+1,o+2),p){Zg(c,p)&&Kn.IH(p,c,Kn.Fv(p,Kn.$X(p,c,u))),ov(hn,p,c);var sr=Fa(Vv,Kn.Ue(),Ol,hn,this.thickness),Tr=(0,Zi.Z)(sr,2),Vr=Tr[0],sn=Tr[1],ln=Kn.AK(Vv,this.normal)<0?-1:1,Zn=de;if(!Zn&&this.join==="miter"){var ci=Vr;ci>this.miterLimit&&(Zn=!0)}Zn?(X.push(this.normal[0],this.normal[1],0),X.push(sn[0],sn[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,D.push.apply(D,(0,In.Z)(this.lastFlip!==-ln?[o,o+2,o+3]:[o+2,o+1,o+3])),D.push(o+2,o+3,o+4),el(X_,hn),Kn.JG(this.normal,X_),X.push(this.normal[0],this.normal[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*ln,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,O+=3):(this.extrusions(V,X,c,sn,Vr,this.totalDistance),D.push.apply(D,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),ln=-1,Kn.JG(this.normal,sn),O+=2),this.lastFlip=ln}else{if(el(this.normal,Ol),ce){var Yt=Kn.Ue(),ir=Kn.Ue();Kn.lu(ir,Ol,this.normal),Kn.IH(Yt,Ol,this.normal),X.push(ir[0],ir[1],0),X.push(Yt[0],Yt[1],0),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),V.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,X,c,this.normal,this.thickness,this.totalDistance);D.push.apply(D,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),O+=2}return O}},{key:"segment",value:function(r,o,u,c,p){var g=0,y=r.indices,w=r.positions,O=r.normals,D=this.cap==="square",V=this.join==="bevel",X=Yn([c[0],c[1]]),ce=Yn([u[0],u[1]]);ov(Ol,X,ce);var de=0;if(this.dash&&(de=this.lineSegmentDistance(X,ce),this.totalDistance+=de),this.normal||(this.normal=Kn.Ue(),el(this.normal,Ol)),!this.started)if(this.started=!0,D){var we=Kn.Ue(),je=Kn.Ue();Kn.IH(we,this.normal,Ol),Kn.IH(je,this.normal,Ol),O.push(je[0],je[1],0),O.push(we[0],we[1],0),w.push(u[0],u[1],u[2]|0,this.totalDistance-de,-this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),w.push(u[0],u[1],u[2]|0,this.totalDistance-de,this.thickness,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(w,O,u,this.normal,this.thickness,this.totalDistance-de);if(y.push(o+0,o+1,o+2),p){var Dt=Yn([p[0],p[1]]);Zg(X,Dt)&&Kn.IH(Dt,X,Kn.Fv(Dt,Kn.$X(Dt,X,ce))),ov(hn,Dt,X);var Yt=Fa(Vv,Kn.Ue(),Ol,hn,this.thickness),ir=(0,Zi.Z)(Yt,2),sr=ir[0],Tr=ir[1],Vr=Kn.AK(Vv,this.normal)<0?-1:1,sn=V;if(!sn&&this.join==="miter"){var ln=sr;ln>this.miterLimit&&(sn=!0)}sn?(O.push(this.normal[0],this.normal[1],0),O.push(Tr[0],Tr[1],0),w.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Vr,c[2]|0),this.complex.indexes.push(this.currentIndex),w.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness*Vr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,y.push.apply(y,(0,In.Z)(this.lastFlip!==-Vr?[o,o+2,o+3]:[o+2,o+1,o+3])),y.push(o+2,o+3,o+4),el(X_,hn),Kn.JG(this.normal,X_),O.push(this.normal[0],this.normal[1],0),w.push(c[0],c[1],c[2]|0,this.totalDistance,-this.thickness*Vr,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,g+=3):(this.extrusions(w,O,c,Tr,sr,this.totalDistance),y.push.apply(y,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),Vr=-1,Kn.JG(this.normal,Tr),g+=2),this.lastFlip=Vr}else{if(el(this.normal,Ol),D){var ht=Kn.Ue(),_t=Kn.Ue();Kn.lu(_t,Ol,this.normal),Kn.IH(ht,Ol,this.normal),O.push(_t[0],_t[1],0),O.push(ht[0],ht[1],0),w.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),w.push(c[0],c[1],c[2]|0,this.totalDistance,this.thickness,c[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(w,O,c,this.normal,this.thickness,this.totalDistance);y.push.apply(y,(0,In.Z)(this.lastFlip===1?[o,o+2,o+3]:[o+2,o+1,o+3])),g+=2}return g}},{key:"extrusions",value:function(r,o,u,c,p,g){o.push(c[0],c[1],0),o.push(c[0],c[1],0),r.push(u[0],u[1],u[2]|0,g,-p,u[2]|0),this.complex.indexes.push(this.currentIndex),r.push(u[0],u[1],u[2]|0,g,p,u[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(r,o){var u=o[0]-r[0],c=o[1]-r[1];return Math.sqrt(u*u+c*c)}}]),e}(),Ja=k(77160);function YB(e){var i=e[0][0],r=e[0][e[0].length-1];i[0]===r[0]&&i[1]===r[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var o=e[0].length,u=earcut.flatten(e),c=u.vertices,p=u.dimensions,g=[],y=[],w=0;w<c.length/p;w++)p===2?g.push(c[w*2],c[w*2+1],1):g.push(c[w*3],c[w*3+1],1);var O=earcut(u.vertices,u.holes,u.dimensions);y.push.apply(y,_toConsumableArray(O));for(var D=function(){var ce=u.vertices.slice(V*p,(V+1)*p),de=u.vertices.slice((V+1)*p,(V+2)*p);de.length===0&&(de=u.vertices.slice(0,p));var we=g.length/3;g.push(ce[0],ce[1],1,de[0],de[1],1,ce[0],ce[1],0,de[0],de[1],0),y.push.apply(y,_toConsumableArray([0,2,1,2,3,1].map(function(je){return je+we})))},V=0;V<o;V++)D();return{positions:g,index:y}}function f8(e){var i=earcut.flatten(e),r=earcut(i.vertices,i.holes,i.dimensions);return{positions:i.vertices,index:r}}function Hv(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e[0][0],o=e[0][e[0].length-1];r[0]===o[0]&&r[1]===o[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var u=e[0].length,c=Wl().flatten(e),p=c.vertices,g=c.dimensions,y=[],w=[],O=[],D=0;D<p.length/g;D++)y.push(p[D*g],p[D*g+1],1,-1,-1),O.push(0,0,1);var V=Wl()(c.vertices,c.holes,c.dimensions);w.push.apply(w,(0,In.Z)(V));for(var X=function(){var we=c.vertices.slice(ce*g,(ce+1)*g),je=c.vertices.slice((ce+1)*g,(ce+2)*g);je.length===0&&(je=c.vertices.slice(0,g));var ht=y.length/5;y.push(we[0],we[1],1,0,0,je[0],je[1],1,.1,0,we[0],we[1],0,0,.8,je[0],je[1],0,.1,.8);var _t=HP([je[0],je[1],1],[we[0],we[1],0],[we[0],we[1],1],i);O.push.apply(O,(0,In.Z)(_t).concat((0,In.Z)(_t),(0,In.Z)(_t),(0,In.Z)(_t))),w.push.apply(w,(0,In.Z)([1,2,0,3,2,1].map(function(Dt){return Dt+ht})))},ce=0;ce<u;ce++)X();return{positions:y,index:w,normals:O}}function HP(e,i,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=Ja.create(),c=Ja.create(),p=Ja.create();o&&(e=rc(e),i=rc(i),r=rc(r));var g=Ja.fromValues.apply(Ja,(0,In.Z)(e)),y=Ja.fromValues.apply(Ja,(0,In.Z)(i)),w=Ja.fromValues.apply(Ja,(0,In.Z)(r));Ja.sub(u,w,y),Ja.sub(c,g,y),Ja.cross(p,u,c);var O=Ja.create();return Ja.normalize(O,p),O}var lc,jv=function(e){return e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn",e}({}),Vg=function(e){return e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon",e}({});function cy(e){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=Math.PI*2/e,o=[],u=0;u<e;u++)o.push(r*u+i*Math.PI/12);var c=o.map(function(p){var g=Math.sin(p+Math.PI/4),y=Math.cos(p+Math.PI/4);return[g,y,0]});return c}function kb(){return cy(30)}function gC(){return cy(4)}function mC(){return cy(3)}function Lb(){return cy(6,1)}function Db(){return cy(5)}var Y_=(lc={},(0,Ne.Z)(lc,Vg.CIRCLE,kb),(0,Ne.Z)(lc,Vg.HEXAGON,Lb),(0,Ne.Z)(lc,Vg.TRIANGLE,mC),(0,Ne.Z)(lc,Vg.SQUARE,gC),(0,Ne.Z)(lc,Vg.PENTAGON,Db),(0,Ne.Z)(lc,jv.CYLINDER,kb),(0,Ne.Z)(lc,jv.HEXAGONCOLUMN,Lb),(0,Ne.Z)(lc,jv.TRIANGLECOLUMN,mC),(0,Ne.Z)(lc,jv.SQUARECOLUMN,gC),(0,Ne.Z)(lc,jv.PENTAGONCOLUMN,Db),lc),Hg={};function K_(e){var i=wa(e.coordinates);return{vertices:[].concat((0,In.Z)(i),(0,In.Z)(i),(0,In.Z)(i),(0,In.Z)(i)),indices:[0,1,2,2,3,0],size:i.length}}function Fb(e){var i=wa(e.coordinates),r=Ob(i);return{vertices:[].concat((0,In.Z)(r),(0,In.Z)(r),(0,In.Z)(r),(0,In.Z)(r)),indices:[0,1,2,2,3,0],size:r.length}}function xo(e){var i=e.shape,r=GP(i,!1),o=r.positions,u=r.index,c=r.normals;return{vertices:o,indices:u,normals:c,size:5}}function fy(e){var i=wa(e.coordinates);return{vertices:(0,In.Z)(i),indices:[0],size:i.length}}function yC(e){var i=e.coordinates,r=e.originCoordinates,o=e.version,u=new uc({dash:!0,join:"bevel"});if(o==="GAODE2.x"){var c=i;Array.isArray(c[0][0])||(c=[i]);var p=r;Array.isArray(p[0][0])||(p=[r]);for(var g=0;g<c.length;g++){var y=c[g],w=p[g];u.extrude_gaode2(y,w)}}else{var O=i;O[0]&&!Array.isArray(O[0][0])&&(O=[i]),O.forEach(function(V){u.extrude(V)})}var D=u.complex;return{vertices:D.positions,indices:D.indices,normals:D.normals,indexes:D.indexes,size:6}}function q_(e){var i=e.coordinates.flat(),r=1,o=1;return{vertices:[1,0,0].concat(_toConsumableArray(i),[1,2,-3],_toConsumableArray(i),[1,1,-3],_toConsumableArray(i),[0,1,0],_toConsumableArray(i),[0,0,0],_toConsumableArray(i),[1,0,0],_toConsumableArray(i),[1,2,-3],_toConsumableArray(i),[1,1,-3],_toConsumableArray(i),[0,1,0],_toConsumableArray(i),[0,0,0],_toConsumableArray(i)),normals:[-r,2*o,1,2*o,-o,1,o,-o,1,o,-o,1,-r,-o,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function Q_(e){var i=e.coordinates,r=e.originCoordinates,o=[];if(!Array.isArray(i[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var u=xC(i,r),c=u.results,p=u.totalDistance;return c.map(function(g){o.push(g[0],g[1],g[2],g[3],0,p)}),{vertices:o,indices:[],normals:[],size:6,count:c.length}}function _C(e){var i=e.coordinates,r=[];if(!Array.isArray(i[0]))return{vertices:[],indices:[],size:4,count:0};var o=Bb(i),u=o.results;return u.map(function(c){r.push(c[0],c[1],c[2],c[3])}),{vertices:r,indices:[],size:4,count:u.length}}function J_(e,i){var r=i[0]-e[0],o=i[1]-e[1];return Math.sqrt(r*r+o*o)}function jg(e,i){return e.length<3&&e.push(0),i!==void 0&&e.push(i),e}function xC(e,i){var r=e,o=i||e;Array.isArray(r)&&Array.isArray(r[0])&&Array.isArray(r[0][0])&&(r=i.flat(),o=i.flat());var u=0;if(r.length<2)return{results:r,totalDistance:0};var c=[],p=jg(r[0],u);c.push(p);for(var g=1;g<r.length-1;g++){var y=J_(Yn(o[g-1]),Yn(o[g]));u+=y;var w=jg(r[g],u);c.push(w),c.push(w)}var O=J_(Yn(o[o.length-2]),Yn(o[o.length-1]));return u+=O,c.push(jg(r[r.length-1],u)),{results:c,totalDistance:u}}function Bb(e){if(e.length<2)return{results:e};var i=[],r=jg(e[0]);i.push(r);for(var o=1;o<e.length-1;o++){var u=jg(e[o]);i.push(u),i.push(u)}return i.push(jg(e[e.length-1])),{results:i}}function Nb(e){var i=e.coordinates,r=Wl().flatten(i),o=r.vertices,u=r.dimensions,c=r.holes;return{indices:Wl()(o,c,u),vertices:o,size:u}}function jP(e){var i=e.coordinates,r=Wl().flatten(i),o=r.vertices,u=r.dimensions,c=r.holes;return{indices:Wl()(o,c,u),vertices:WP(o),size:u+4}}function WP(e){for(var i=[],r=Rs(e),o=r.center,u=r.radius,c=0;c<e.length;c+=2){var p=e[c],g=e[c+1];i.push.apply(i,[p,g,0].concat((0,In.Z)(o),[u]))}return i}function bC(e){var i=e.coordinates,r=Hv(i,!0),o=r.positions,u=r.index,c=r.normals;return{vertices:o,indices:u,normals:c,size:5}}function KB(e){var i=e.shape,r=kl(i),o=r.positions,u=r.index;return{vertices:o,indices:u,size:3}}function e1(e){var i=e.coordinates,r=[].concat((0,In.Z)(i[0]),[0,0,1,i[1][0],i[0][1],0,1,1],(0,In.Z)(i[1]),[0,1,0],(0,In.Z)(i[0]),[0,0,1],(0,In.Z)(i[1]),[0,1,0,i[0][0],i[1][1],0,0,0]),o=[0,1,2,3,4,5];return{vertices:r,indices:o,size:5}}function zb(e,i){for(var r=i.segmentNumber,o=r===void 0?30:r,u=e.coordinates,c=[],p=[],g=function(O){c.push(O,1,O,u[0][0],u[0][1],u[1][0],u[1][1],O,-1,O,u[0][0],u[0][1],u[1][0],u[1][1]),O!==o-1&&p.push.apply(p,(0,In.Z)([0,1,2,1,3,2].map(function(D){return O*2+D})))},y=0;y<o;y++)g(y);return{vertices:c,indices:p,size:7}}function qB(e){var i=e.coordinates;i.length===2&&i.push(0);var r=js(-1,1),o=js(1,1),u=js(-1,-1),c=js(1,-1),p=[].concat(_toConsumableArray(i),_toConsumableArray(r),_toConsumableArray(i),_toConsumableArray(u),_toConsumableArray(i),_toConsumableArray(c),_toConsumableArray(i),_toConsumableArray(o)),g=[0,1,2,3,0,2];return{vertices:p,indices:g,size:5}}function GP(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Hg&&Hg[e])return Hg[e];var r=Y_[e]?Y_[e]():Y_.cylinder(),o=Hv([r],i);return Hg[e]=o,o}function QB(e,i){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=new Float32Array(e.length/r*3),c,p,g,y=vec3.create(),w=vec3.create(),O=vec3.create(),D=0,V=i.length;D<V;D+=3){c=i[D+0]*3,p=i[D+1]*3,g=i[D+2]*3;var X=[e[c],e[c+1]],ce=[e[p],e[p+1]],de=[e[g],e[g+1]];o&&(X=lngLatToMeters(X),ce=lngLatToMeters(ce),de=lngLatToMeters(de));var we=X,je=_slicedToArray(we,2),ht=je[0],_t=je[1],Dt=vec3.fromValues(ht,_t,e[c+2]),Yt=ce,ir=_slicedToArray(Yt,2),sr=ir[0],Tr=ir[1],Vr=vec3.fromValues(sr,Tr,e[p+2]),sn=de,ln=_slicedToArray(sn,2),Zn=ln[0],ci=ln[1],ki=vec3.fromValues(Zn,ci,e[g+2]);vec3.sub(y,ki,Vr),vec3.sub(w,Dt,Vr),vec3.cross(O,y,w),u[c]+=y[0],u[c+1]+=y[1],u[c+2]+=y[2],u[p]+=y[0],u[p+1]+=y[1],u[p+2]+=y[2],u[g]+=y[0],u[g+1]+=y[1],u[g+2]+=y[2]}return Eh(u),u}function Eh(e){for(var i=0,r=e.length;i<r;i+=3){var o=vec3.fromValues(e[i],e[i+1],e[i+2]),u=vec3.create();vec3.normalize(u,o),e.set(u,i)}}function Bm(e){var i=e[0][0],r=e[0][e[0].length-1];return i[0]===r[0]&&i[1]===r[1]}function kl(e){var i=["cylinder","triangleColumn","hexagonColumn","squareColumn"],r=geometryShape[e]?geometryShape[e]():geometryShape.circle(),o=i.indexOf(e)===-1?fillPolygon([r]):extrudePolygon([r]);return o}function js(e,i){var r=(e+1)/2,o=(i+1)/2;return[r,o]}function ws(){var e=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),i=e.positionsArr,r=e.indicesArr,o=e.normalArr;return{vertices:i,indices:r,size:5,normals:o}}function Ko(){var e=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),i=e.positionsArr,r=e.indicesArr,o=e.normalArr;return{vertices:i,indices:r,size:5,normals:o}}function Wv(e){var i=hy();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function hy(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ub=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};
in vec2 v_iconMapUV;
in vec4 v_lineData;
in vec4 v_color;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,Vu=`#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;


#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9



  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  //\u8BA1\u7B97dashArray\u548CdistanceRatio \u8F93\u51FA\u5230\u7247\u5143
  vec2 s = source;
  vec2 t = target;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, thetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, thetaOffset), 0.0, 1.0));

  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,bu={solid:0,dash:1},Nm=Ta.isNumber,SC=function(e){(0,yr.Z)(r,e);var i=Wv(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:yt.NEAREST,min:yt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,w=u.lineType,O=w===void 0?"solid":w,D=u.dashArray,V=D===void 0?[10,5]:D,X=u.forward,ce=X===void 0?!0:X,de=u.lineTexture,we=de===void 0?!1:de,je=u.iconStep,ht=je===void 0?100:je,_t=u.segmentNumber,Dt=_t===void 0?30:_t,Yt=this.layer.getLayerConfig(),ir=Yt.animateOption,sr=V;O!=="dash"&&(sr=[0,0]),sr.length===2&&sr.push(0,0);var Tr=0,Vr=[0,0,0,0],sn=[0,0,0,0];c&&p&&(Vr=yo(c),sn=yo(p),Tr=1),this.rendererService.getDirty()&&this.texture.bind();var ln={u_animate:this.animateOption2Array(ir),u_dash_array:sr,u_sourceColor:Vr,u_targetColor:sn,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:Dt,u_lineDir:ce?1:-1,u_icon_step:ht,u_line_texture:we?1:0,u_textureBlend:y==="normal"?0:1,u_blur:.9,u_line_type:bu[O||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Tr},Zn=this.getUniformsBufferInfo(ln);return Zn}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){return{frag:Ub,vert:Vu,type:""}}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D,V,X;return nr().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return this.initUniformsBuffer(),p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,w=this.getShaders(),O=w.frag,D=w.vert,V=w.type,de.next=5,this.layer.buildLayerModel({moduleName:"lineArc2d"+V,vertexShader:D,fragmentShader:O,inject:this.getInject(),triangulation:zb,depth:{enable:!1},styleOption:{segmentNumber:y}});case 5:return X=de.sent,de.abrupt("return",[X]);case 7:case"end":return de.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ia.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,w=g[y]||{x:0,y:0},O=w.x,D=w.y;return[O,D]}}})}}]),r}(eu);function EC(e){var i=JB();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function JB(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var t1=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

// varying vec2 v_normal;
in vec4 v_dash_array;
in vec4 v_color;
in vec4 v_line_data;
in float v_segmentIndex;
in vec2 v_iconMapUV;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,wC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,r1={solid:0,dash:1},CC=function(e){(0,yr.Z)(r,e);var i=EC(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:yt.NEAREST,min:yt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,w=u.lineType,O=w===void 0?"solid":w,D=u.dashArray,V=D===void 0?[10,5]:D,X=u.lineTexture,ce=X===void 0?!1:X,de=u.iconStep,we=de===void 0?100:de,je=u.segmentNumber,ht=je===void 0?30:je,_t=u.globalArcHeight,Dt=_t===void 0?10:_t,Yt=this.layer.getLayerConfig(),ir=Yt.animateOption;V.length===2&&V.push(0,0);var sr=0,Tr=[0,0,0,0],Vr=[0,0,0,0];c&&p&&(Tr=yo(c),Vr=yo(p),sr=1),this.rendererService.getDirty()&&this.texture.bind();var sn={u_animate:this.animateOption2Array(ir),u_dash_array:V,u_sourceColor:Tr,u_targetColor:Vr,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:Pb,u_global_height:Dt,segmentNumber:ht,u_line_type:r1[O]||0,u_icon_step:we,u_line_texture:ce?1:0,u_textureBlend:y==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:sr},ln=this.getUniformsBufferInfo(sn);return ln}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){return{frag:t1,vert:wC,type:""}}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D,V,X;return nr().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,w=this.getShaders(),O=w.frag,D=w.vert,V=w.type,de.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+V,vertexShader:D,fragmentShader:O,inject:this.getInject(),triangulation:zb,styleOption:{segmentNumber:y}});case 4:return X=de.sent,de.abrupt("return",[X]);case 6:case"end":return de.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ia.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,w=g[y]||{x:0,y:0},O=w.x,D=w.y;return[O,D]}}})}}]),r}(eu),AC={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},Hu=1/2;function n1(e,i){var r=i.width,o=r===void 0?2:r,u=i.height,c=u===void 0?1:u;return{vertices:[0,Hu*e,1*e*o,-(c+Hu)*e,1*e*o,(c-Hu)*e,0,Hu*e,1*e*o,-(c+Hu)*e,1*e*o,(c-Hu)*e],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*e,-2*e,1,-2*e,1.5*e,1,1*e,1.5*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function zm(e,i){var r=i.width,o=r===void 0?2:r,u=i.height,c=u===void 0?3:u;return{vertices:[0,0,1*e*o,1*c,1*e*o,-1*c,0,0,1*e*o,1*c,1*e*o,-1*c],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*e,1,2,1*e,1,-2,1*e,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Yf(e,i){var r=i.width,o=r===void 0?2:r,u=i.height,c=u===void 0?2:u;return{vertices:[0,c/2,e*o*1,c/2,e*o*1,-c/2,0,-c/2,0,c/2,e*o*1,c/2,e*o*1,-c/2,0,-c/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function i1(e,i){var r=i.width,o=r===void 0?2:r,u=i.height,c=u===void 0?3:u;return{vertices:[0,0,1*o*e,.5*c,2*o*e,0,1*o*e,-.5*c,0,0,1*o*e,.5*c,2*o*e,0,1*o*e,-.5*c],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function TC(e,i){var r=i.width,o=r===void 0?2:r,u=i.height,c=u===void 0?3:u;return{vertices:[0,0,2*e*o,1*c,1.5*e*o,0,2*e*o,-1*c,0,0,2*e*o,1*c,1.5*e*o,0,2*e*o,-1*c],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-e,1,1,0,1,0,-e,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function $P(e,i){var r=i.width,o=r===void 0?2:r,u=i.height,c=u===void 0?2:u,p=kb(),g=Wl().flatten([p]),y=Wl()(g.vertices,g.holes,g.dimensions),w=p.map(function(O){return[O[0]*o*e,O[1]*c]}).flat();return{vertices:[].concat((0,In.Z)(w),(0,In.Z)(w)),dimensions:2,indices:y.map(function(O){return O+p.length}),outLineIndices:y,normals:[].concat((0,In.Z)(p.map(function(O){return[O[1]*c,O[0]*o*e,1]}).flat()),(0,In.Z)(new Array(p.length*3).fill(0)))}}function jc(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,o=(0,Ps.Z)(r.source)==="object"?r.source.type:r.source,u=(0,Ps.Z)(r.target)==="object"?r.target.type:r.target,c=(0,Ps.Z)(r.source)==="object"?r.source:{},p=c.width,g=p===void 0?o?AC[o]:0:p,y=c.height,w=y===void 0?2:y,O=(0,Ps.Z)(r.target)==="object"?r.target:{},D=O.width,V=D===void 0?u?AC[u]:0:D,X=O.height,ce=X===void 0?2:X;return{vertices:[0,Hu,1*g].concat((0,In.Z)(e),[1,Hu,-1*V],(0,In.Z)(e),[1,-Hu,-1*V],(0,In.Z)(e),[0,-Hu,1*g],(0,In.Z)(e),[0,Hu,1*g],(0,In.Z)(e),[1,Hu,-1*V],(0,In.Z)(e),[1,-Hu,-1*V],(0,In.Z)(e),[0,-Hu,1*g],(0,In.Z)(e)),outLineIndices:[0,1,2,0,2,3].map(function(de){return de+i}),indices:[4,5,6,4,6,7].map(function(de){return de+i}),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function Wg(e,i){var r=(0,Ps.Z)(e)==="object"?e.type:e,o=i==="source"?1:-1,u=(0,Ps.Z)(e)==="object"?e:{};switch(r){case"circle":return $P(o,u);case"triangle":return zm(o,u);case"diamond":return i1(o,u);case"rect":return Yf(o,u);case"classic":return TC(o,u);case"halfTriangle":return n1(o,u);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function wh(e){var i=e.coordinates.flat(),r=1,o=1;return{vertices:[1,0,0].concat((0,In.Z)(i),[1,2,-3],(0,In.Z)(i),[1,1,-3],(0,In.Z)(i),[0,1,0],(0,In.Z)(i),[0,0,0],(0,In.Z)(i),[1,0,0],(0,In.Z)(i),[1,2,-3],(0,In.Z)(i),[1,1,-3],(0,In.Z)(i),[0,1,0],(0,In.Z)(i),[0,0,0],(0,In.Z)(i)),normals:[-r,2*o,1,2*o,-o,1,o,-o,1,o,-o,1,-r,-o,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function a1(e,i){return i?Zb(e,i):wh(e)}function Zb(e,i){var r=e.coordinates.flat(),o=i,u=o.target,c=u===void 0?"classic":u,p=o.source,g=p===void 0?"circle":p,y=MC(Wg(g,"source"),r,0,0),w=jc(r,y.vertices.length/7,i),O=MC(Wg(c,"target"),r,1,y.vertices.length/7+w.vertices.length/7),D={vertices:[].concat((0,In.Z)(y.vertices),(0,In.Z)(w.vertices),(0,In.Z)(O.vertices)),indices:[].concat((0,In.Z)(y.outLineIndices),(0,In.Z)(w.outLineIndices),(0,In.Z)(O.outLineIndices),(0,In.Z)(y.indices),(0,In.Z)(w.indices),(0,In.Z)(O.indices)),normals:[].concat((0,In.Z)(y.normals),(0,In.Z)(w.normals),(0,In.Z)(O.normals)),size:7};return D}function MC(e,i){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=[],c=e.vertices,p=e.indices,g=e.dimensions,y=e.outLineIndices,w=0;w<c.length;w+=g)u.push.apply(u,[r,c[w+1],c[w]].concat((0,In.Z)(i)));return(0,ne.Z)((0,ne.Z)({},e),{},{vertices:u,indices:p.map(function(O){return O+o}),outLineIndices:y.map(function(O){return O+o})})}function XP(e){var i=RC();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function RC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var IC=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,so=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {

   vec2 data = project_pixel(offsets);
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return data;
  }

  return vec2(data.x, -data.y);;
}

vec2 line_dir(vec2 target, vec2 source) {

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return normalize(target - source);
  }
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}

float flag_gap() {
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return 1.;
  }
  return -1.;

}


void main() {

// \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target,source);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x); // mapbox || \u9AD8\u5FB7
   
  vec2 position = mix(source, target, a_Position.x);
  
  float lengthCommon = length(project_position(vec4(target,0,1)) - project_position(vec4(source,0,1)));  //    
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(   
   offsetDistances,
   project_pixel(-lengthCommon*.2), project_pixel(lengthCommon*.2)
  );


  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    a_Position.x
  );

  vec2 normalsCommon =  u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y)); // mapbox || \u9AD8\u5FB7

  float gapCommon = flag_gap() * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir *  (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0));

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));



  setPickingColor(a_PickingColor);
}
`,PC=function(e){(0,yr.Z)(r,e);var i=XP(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.gapWidth,p=c===void 0?2:c,g=u.strokeWidth,y=g===void 0?1:g,w=u.strokeOpacity,O=w===void 0?1:w,D={u_gap_width:p,u_stroke_width:y,u_stroke_opacity:O},V=this.getUniformsBufferInfo(D);return V}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"flow_line",vertexShader:so,fragmentShader:IC,inject:this.getInject(),triangulation:a1,styleOption:this.layer.getLayerConfig().symbol,primitive:yt.TRIANGLES,depth:{enable:!1},pick:!1});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0],g[1]]:[g,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ia.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:4,update:function(c,p,g){return[g[3],g[4],g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ia.Attribute,descriptor:{name:"a_Normal",shaderLocation:Za.NORMAL,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(c,p,g,y,w){return w}}})}}]),r}(eu);function YP(e){var i=py();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function py(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var KP=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_line_data;
in vec2 v_iconMapUV;
in vec4 v_dash_array;
in float v_distance_ratio;
in vec4 v_color;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,o1=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
  mix(source, target, segmentRatio),
  sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }
  else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    v_line_data.b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,qP={solid:0,dash:1},OC=function(e){(0,yr.Z)(r,e);var i=YP(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:yt.NEAREST,min:yt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,w=u.lineType,O=w===void 0?"solid":w,D=u.dashArray,V=D===void 0?[10,5]:D,X=u.lineTexture,ce=X===void 0?!1:X,de=u.iconStep,we=de===void 0?100:de,je=u.segmentNumber,ht=je===void 0?30:je,_t=this.layer.getLayerConfig(),Dt=_t.animateOption;V.length===2&&V.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var Yt=0,ir=[0,0,0,0],sr=[0,0,0,0];c&&p&&(ir=yo(c),sr=yo(p),Yt=1);var Tr=this.layer.getLayerAnimateTime();isNaN(Tr)&&(Tr=0);var Vr={u_animate:this.animateOption2Array(Dt),u_dash_array:V,u_sourceColor:ir,u_targetColor:sr,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:ht,u_line_type:qP[O]||0,u_icon_step:we,u_line_texture:ce?1:0,u_textureBlend:y==="normal"?0:1,u_time:Tr,u_linearColor:Yt},sn=this.getUniformsBufferInfo(Vr);return sn}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.layer.getLayerConfig(),g=p.segmentNumber,y=g===void 0?30:g,D.next=3,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:o1,fragmentShader:KP,triangulation:zb,styleOption:{segmentNumber:y},inject:this.getInject(),depth:{enable:!1}});case 3:return w=D.sent,D.abrupt("return",[w]);case 5:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ia.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:4,update:function(p,g,y){return[y[3],y[4],y[5],y[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,w=g[y]||{x:0,y:0},O=w.x,D=w.y;return[O,D]}}})}}]),r}(eu),QP=function(e){return e[e.solid=0]="solid",e[e.dash=1]="dash",e}({}),kC=function(e){return e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e}({}),JP=function(e){return e.NORMAL="normal",e.REPLACE="replace",e}({}),s1=function(e){return e[e.pixel=0]="pixel",e[e.meter=1]="meter",e}({}),e4=function(e){return e.ALWAYS="always",e.DRAGEND="dragend",e}({});function eO(e){var i=tO();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function tO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var LC=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
in vec2 v_iconMapUV;
in vec4 v_texture_data;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,rO=`
#define Animate 0.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 10) in vec2 a_DistanceAndIndex;
layout(location = 9) in vec2 a_Size;
layout(location = 11) in float a_Total_Distance;
layout(location = 13) in vec3 a_Normal;
layout(location = 15) in float a_Miter;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};
#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  
  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,t4={solid:0,dash:1},DC=function(e){(0,yr.Z)(r,e);var i=eO(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"textureEventFlag",!1),(0,Ne.Z)((0,Ar.Z)(o),"texture",o.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,Ne.Z)((0,Ar.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.textures.length===0&&(o.textures=[o.texture]),o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:yt.NEAREST,min:yt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128})}),o}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,w=u.lineType,O=w===void 0?"solid":w,D=u.dashArray,V=D===void 0?[10,5,0,0]:D,X=u.lineTexture,ce=X===void 0?!1:X,de=u.iconStep,we=de===void 0?100:de,je=u.vertexHeightScale,ht=je===void 0?20:je,_t=u.strokeWidth,Dt=_t===void 0?0:_t,Yt=u.raisingHeight,ir=Yt===void 0?0:Yt,sr=u.heightfixed,Tr=sr===void 0?!1:sr,Vr=u.linearDir,sn=Vr===void 0?kC.VERTICAL:Vr,ln=u.blur,Zn=ln===void 0?[1,1,1,0]:ln,ci=V;O!=="dash"&&(ci=[0,0,0,0]),ci.length===2&&ci.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var ki=this.layer.getLayerConfig(),eo=ki.animateOption,Xo=0,as=[0,0,0,0],tu=[0,0,0,0];c&&p&&(as=yo(c),tu=yo(p),Xo=1);var lu={u_animate:this.animateOption2Array(eo),u_dash_array:ci,u_blur:Zn,u_sourceColor:as,u_targetColor:tu,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:we,u_heightfixed:Number(Tr),u_vertexScale:ht,u_raisingHeight:Number(ir),u_strokeWidth:Dt,u_textureBlend:y===JP.NORMAL?0:1,u_line_texture:ce?1:0,u_linearDir:sn===kC.VERTICAL?1:0,u_linearColor:Xo,u_time:this.layer.getLayerAnimateTime()||0},ff=this.getUniformsBufferInfo(lu);return ff}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.textureEventFlag||(this.textureEventFlag=!0,this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture)),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D,V,X;return nr().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return p=this.layer.getLayerConfig(),g=p.depth,y=g===void 0?!1:g,w=this.getShaders(),O=w.frag,D=w.vert,V=w.type,this.layer.triangulation=Hd,de.next=5,this.layer.buildLayerModel({moduleName:"line"+V,vertexShader:D,fragmentShader:O,triangulation:Hd,inject:this.getInject(),depth:{enable:y}});case 5:return X=de.sent,de.abrupt("return",[X]);case 7:case"end":return de.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){return{frag:LC,vert:rO,type:""}}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:ia.Attribute,descriptor:{name:"a_DistanceAndIndex",shaderLocation:10,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(p,g,y,w,O,D){return D===void 0?[y[3],10]:[y[3],D]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ia.Attribute,descriptor:{name:"a_Total_Distance",shaderLocation:11,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p,g,y){return[y[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0],y[1]]:[y,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ia.Attribute,descriptor:{name:"a_Normal",shaderLocation:Za.NORMAL,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(p,g,y,w,O){return O}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ia.Attribute,descriptor:{shaderLocation:15,name:"a_Miter",buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p,g,y){return[y[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:Za.UV,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,w=g[y]||{x:0,y:0},O=w.x,D=w.y;return[O,D]}}})}}]),r}(eu);function nO(e){var i=iO();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function iO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var aO=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,sv=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color; 
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_SizeDistanceAndTotalDistance.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_SizeDistanceAndTotalDistance.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`,Um=Ta.isNumber,FC=function(e){(0,yr.Z)(r,e);var i=nO(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.lineType,y=g===void 0?"solid":g,w=u.dashArray,O=w===void 0?[10,5,0,0]:w,D=u.vertexHeightScale,V=D===void 0?20:D,X=O;y!=="dash"&&(X=[0,0,0,0]),X.length===2&&X.push(0,0);var ce=0,de=[0,0,0,0],we=[0,0,0,0];c&&p&&(de=yo(c),we=yo(p),ce=1);var je={u_sourceColor:de,u_targetColor:we,u_dash_array:X,u_vertexScale:V,u_linearColor:ce},ht=this.getUniformsBufferInfo(je);return ht}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){return{frag:aO,vert:sv,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O;return nr().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return this.initUniformsBuffer(),p=this.getShaders(),g=p.frag,y=p.vert,w=p.type,V.next=4,this.layer.buildLayerModel({moduleName:w,vertexShader:y,fragmentShader:g,triangulation:Q_,inject:this.getInject(),primitive:yt.LINES,depth:{enable:!1},pick:!1});case 4:return O=V.sent,V.abrupt("return",[O]);case 6:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:ia.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:Za.SIZE,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:4,update:function(c,p,g){var y=c.size,w=y===void 0?1:y,O=Array.isArray(w)?[w[0],w[1]]:[w,0];return[O[0],O[1],g[3],g[5]]}}})}}]),r}(eu);function BC(e){var i=Gg();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function Gg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Vb=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
in vec2 v_iconMapUV;
in float v_blur;
in float v_radio;
in vec4 v_color;
in vec4 v_dataset;

out vec4 outputColor;
#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,oO=`#define Animate 0.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in float a_Miter;
layout(location = 11) in float a_Total_Distance;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec2 a_iconMapUV;
layout(location = 15) in float a_Distance;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out float v_radio;
out vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {    
     originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }


  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,NC=function(e){(0,yr.Z)(r,e);var i=BC(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas()}),o.layer.render();return}o.texture=g({data:o.iconService.getCanvas(),mag:yt.NEAREST,min:yt.NEAREST,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128}),o.textures=[o.texture]}),o}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.sourceColor,p=u.targetColor,g=u.textureBlend,y=g===void 0?"normal":g,w=u.heightfixed,O=w===void 0?!1:w,D=u.lineTexture,V=D===void 0?!1:D,X=u.iconStep,ce=X===void 0?100:X,de=u.iconStepCount,we=de===void 0?1:de,je=this.layer.getLayerConfig(),ht=je.animateOption;this.rendererService.getDirty()&&this.texture.bind();var _t=0,Dt=[0,0,0,0],Yt=[0,0,0,0];c&&p&&(Dt=yo(c),Yt=yo(p),_t=1);var ir={u_animate:this.animateOption2Array(ht),u_sourceColor:Dt,u_targetColor:Yt,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:ce,u_heightfixed:Number(O),u_linearColor:_t,u_line_texture:V?1:0,u_textureBlend:y==="normal"?0:1,u_iconStepCount:we,u_time:this.layer.getLayerAnimateTime()||0},sr=this.getUniformsBufferInfo(ir);return sr}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),g.abrupt("return",this.buildModels());case 4:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:oO,fragmentShader:Vb,triangulation:yC,inject:this.getInject(),depth:{enable:!1},blend:this.getBlend()});case 2:return p=y.sent,y.abrupt("return",[p]);case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:ia.Attribute,descriptor:{name:"a_Distance",shaderLocation:15,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p,g,y){return[y[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ia.Attribute,descriptor:{name:"a_Total_Distance",shaderLocation:11,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p,g,y){return[y[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(p){var g=p.size,y=g===void 0?1:g;return Array.isArray(y)?[y[0],y[1]]:[y,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ia.Attribute,descriptor:{name:"a_Normal",shaderLocation:Za.NORMAL,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(p,g,y,w,O){return O}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ia.Attribute,descriptor:{name:"a_Miter",shaderLocation:10,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p,g,y){return[y[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.texture,w=g[y]||{x:0,y:0},O=w.x,D=w.y;return[O,D]}}})}}]),r}(eu),sO={arc:SC,arc3d:CC,greatcircle:OC,wall:NC,line:DC,simple:FC,flowline:PC,earthArc3d:CC},u1=sO;function uO(e){var i=lO();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function lO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var dy=function(e){(0,yr.Z)(r,e);var i=uO(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"type","LineLayer"),(0,Ne.Z)((0,Ar.Z)(o),"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,Ne.Z)((0,Ar.Z)(o),"arrowInsertCount",0),(0,Ne.Z)((0,Ar.Z)(o),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),o}return(0,st.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new u1[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}};return c[u]}},{key:"getModelType",value:function(){var u;if(this.layerType)return this.layerType;var c=this.styleAttributeService.getLayerStyleAttribute("shape"),p=c==null||(u=c.scale)===null||u===void 0?void 0:u.field;return p||"line"}},{key:"processData",value:function(u){if(this.getModelType()!=="simple")return u;var c=[];return u.map(function(p){if(Array.isArray(p.coordinates)&&Array.isArray(p.coordinates[0])&&Array.isArray(p.coordinates[0][0])){var g=(0,ne.Z)({},p);p.coordinates.map(function(y){c.push((0,ne.Z)((0,ne.Z)({},g),{},{coordinates:y}))})}else c.push(p)}),c}}]),r}(Fm);function cO(e){var i=fO();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function fO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var hO=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,Hb=`
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);
  
  vec2 offset = project_pixel(u_offsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }
  
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function zC(e){var i=e.coordinates;return{vertices:(0,In.Z)(i),indices:[0],size:i.length}}var pO=function(e){(0,yr.Z)(r,e);var i=cO(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.blend,p=u.strokeOpacity,g=p===void 0?1:p,y=u.strokeWidth,w=y===void 0?0:y,O=u.stroke,D=O===void 0?"#fff":O,V={u_stroke_color:yo(D),u_additive:c==="additive"?1:0,u_stroke_opacity:g,u_stroke_width:w},X=this.getUniformsBufferInfo(V);return X}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=zC,this.initUniformsBuffer(),y.next=4,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:Hb,fragmentShader:hO,inject:this.getInject(),triangulation:zC,depth:{enable:!1},primitive:yt.POINTS});case 4:return p=y.sent,y.abrupt("return",[p]);case 6:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(eu);function dO(e){var i=vO();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function vO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var l1=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,gO=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Pos;
layout(location = 13) in vec3 a_Normal;


layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;

    
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,mO=Ta.isNumber,yO=function(e){(0,yr.Z)(r,e);var i=dO(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"raiseCount",0),(0,Ne.Z)((0,Ar.Z)(o),"raiseRepeat",0),o}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1,speed:.01,repeat:!1}:c,g=u.opacity,y=g===void 0?1:g,w=u.sourceColor,O=u.targetColor,D=u.pickLight,V=D===void 0?!1:D,X=u.heightfixed,ce=X===void 0?!0:X,de=u.opacityLinear,we=de===void 0?{enable:!1,dir:"up"}:de,je=u.lightEnable,ht=je===void 0?!0:je,_t=0,Dt=[0,0,0,0],Yt=[0,0,0,0];if(w&&O&&(Dt=yo(w),Yt=yo(O),_t=1),this.raiseCount<1&&this.raiseRepeat>0&&p.enable){var ir=p.speed,sr=ir===void 0?.01:ir;this.raiseCount+=sr,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}var Tr={u_sourceColor:Dt,u_targetColor:Yt,u_linearColor:_t,u_pickLight:Number(V),u_heightfixed:Number(ce),u_r:p.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:mO(y)?y:1,u_opacitylinear:Number(we.enable),u_opacitylinear_dir:we.dir==="up"?1:0,u_lightEnable:Number(ht)},Vr=this.getUniformsBufferInfo(Tr);return Vr}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.layer.getLayerConfig(),g=p.animateOption.repeat,y=g===void 0?1:g,this.raiseRepeat=y,D.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:gO,fragmentShader:l1,triangulation:xo,depth:{enable:!0},inject:this.getInject(),cull:{enable:!0,face:Ic(this.mapService.version)},blend:this.getBlend()});case 4:return w=D.sent,D.abrupt("return",[w]);case 6:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(c){var p=c.size;if(p){var g=[];return Array.isArray(p)&&(g=p.length===2?[p[0],p[0],p[1]]:p),Array.isArray(p)||(g=[p,p,p]),g}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ia.Attribute,descriptor:{name:"a_Normal",shaderLocation:Za.NORMAL,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(c,p,g,y,w){return w}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:ia.Attribute,descriptor:{name:"a_Pos",shaderLocation:15,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(c){var p=wa(c.coordinates);return Ob([p[0],p[1]])}}})}}]),r}(eu);function _O(e){var i=xO();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function xO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var UC=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,bO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}`,ZC=function(e){(0,yr.Z)(r,e);var i=_O(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.strokeOpacity,p=c===void 0?1:c,g=u.strokeWidth,y=g===void 0?0:g,w=u.blend,O=u.blur,D=O===void 0?0:O;this.layer.getLayerConfig();var V={u_additive:w==="additive"?1:0,u_stroke_opacity:p,u_stroke_width:y,u_blur:D},X=this.getUniformsBufferInfo(V);return X}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=Fb,y.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:bO,fragmentShader:UC,triangulation:Fb,inject:this.getInject(),depth:{enable:!0},blend:this.getBlend()});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ia.Attribute,descriptor:{name:"a_Extrude",shaderLocation:Za.EXTRUDE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(p,g,y,w){var O=(0,Zi.Z)(y,3),D=O[0],V=O[1],X=O[2],ce=Ja.fromValues(0,0,1),de=Ja.fromValues(D,0,X),we=D>=0?Ja.angle(ce,de):Math.PI*2-Ja.angle(ce,de),je=Math.PI*2-Math.asin(V/100),ht=Os();sf(ht,ht,we),Ka(ht,ht,je);var _t=Ja.fromValues(1,1,0);Ja.transformMat4(_t,_t,ht),Ja.normalize(_t,_t);var Dt=Ja.fromValues(-1,1,0);Ja.transformMat4(Dt,Dt,ht),Ja.normalize(Dt,Dt);var Yt=Ja.fromValues(-1,-1,0);Ja.transformMat4(Yt,Yt,ht),Ja.normalize(Yt,Yt);var ir=Ja.fromValues(1,-1,0);Ja.transformMat4(ir,ir,ht),Ja.normalize(ir,ir);var sr=[].concat((0,In.Z)(_t),(0,In.Z)(Dt),(0,In.Z)(Yt),(0,In.Z)(ir)),Tr=w%4*3;return[sr[Tr],sr[Tr+1],sr[Tr+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:ia.Attribute,descriptor:{name:"a_Shape",shaderLocation:Za.SHAPE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p){var g=p.shape,y=g===void 0?2:g,w=u.layer.getLayerConfig().shape2d,O=w.indexOf(y);return[O]}}})}}]),r}(eu);function SO(e){var i=VC();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function VC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var jb=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,Gv=`#define pi 3.1415926535

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {


  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Extrude.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

    // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a =  v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

    if(u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? (1.0 - a_Position.z): a_Position.z;
  }


  gl_Position = project_common_position_to_clipspace_v2(pos);

  setPickingColor(a_PickingColor);
}
`,uv=function(e){(0,yr.Z)(r,e);var i=SO(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"raiseCount",0),(0,Ne.Z)((0,Ar.Z)(o),"raiseRepeat",0),o}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1,speed:.01,repeat:!1}:c,g=u.sourceColor,y=u.targetColor,w=u.pickLight,O=w===void 0?!1:w,D=u.heightfixed,V=D===void 0?!1:D,X=u.opacityLinear,ce=X===void 0?{enable:!1,dir:"up"}:X,de=u.lightEnable,we=de===void 0?!0:de,je=0,ht=[0,0,0,0],_t=[0,0,0,0];if(g&&y&&(ht=yo(g),_t=yo(y),je=1),this.raiseCount<1&&this.raiseRepeat>0&&p.enable){var Dt=p.speed,Yt=Dt===void 0?.01:Dt;this.raiseCount+=Yt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}var ir={u_pickLight:Number(O),u_heightfixed:Number(V),u_r:p.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:je,u_sourceColor:ht,u_targetColor:_t,u_opacitylinear:Number(ce.enable),u_opacitylinear_dir:ce.dir==="up"?1:0,u_lightEnable:Number(we)},sr=this.getUniformsBufferInfo(ir);return sr}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D;return nr().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return p=this.layer.getLayerConfig(),g=p.depth,y=g===void 0?!0:g,w=p.animateOption.repeat,O=w===void 0?1:w,this.raiseRepeat=O,this.initUniformsBuffer(),X.next=5,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:Gv,fragmentShader:jb,triangulation:xo,inject:this.getInject(),cull:{enable:!0,face:Ic(this.mapService.version)},depth:{enable:y}});case 5:return D=X.sent,X.abrupt("return",[D]);case 7:case"end":return X.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(c){var p=c.size;if(p){var g=[];return Array.isArray(p)&&(g=p.length===2?[p[0],p[0],p[1]]:p),Array.isArray(p)||(g=[p,p,p]),g}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ia.Attribute,descriptor:{name:"a_Normal",shaderLocation:Za.NORMAL,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(c,p,g,y,w){return w}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ia.Attribute,descriptor:{name:"a_Extrude",shaderLocation:Za.EXTRUDE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(c){var p=wa(c.coordinates);return[p[0],p[1],0]}}})}}]),r}(eu);function lv(e){var i=Wb();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function Wb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vy=`layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};


in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,gy=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;   
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;  
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }
  
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`,HC=function(e){(0,yr.Z)(r,e);var i=lv(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.strokeOpacity,p=c===void 0?1:c,g=u.strokeWidth,y=g===void 0?0:g,w=u.blend,O=u.blur,D=O===void 0?0:O,V=u.raisingHeight,X=V===void 0?0:V,ce=u.heightfixed,de=ce===void 0?!1:ce,we=u.unit,je=we===void 0?"pixel":we,ht=this.getAnimateUniforms().u_time;isNaN(ht)&&(ht=-1);var _t={u_blur_height_fixed:[D,Number(X),Number(de)],u_stroke_width:y,u_additive:w==="additive"?1:0,u_stroke_opacity:p,u_size_unit:s1[je],u_time:ht,u_animate:this.getAnimateUniforms().u_animate},Dt=this.getUniformsBufferInfo(_t);return Dt}},{key:"getAnimateUniforms",value:function(){var u=this.layer.getLayerConfig(),c=u.animateOption,p=c===void 0?{enable:!1}:c;return{u_animate:this.animateOption2Array(p),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),nd)}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D,V,X;return nr().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return p=this.layer.getLayerConfig(),g=p.animateOption,y=g===void 0?{enable:!1}:g,w=this.getShaders(y),O=w.frag,D=w.vert,V=w.type,this.layer.triangulation=nd,this.initUniformsBuffer(),de.next=6,this.layer.buildLayerModel({moduleName:V,vertexShader:D,fragmentShader:O,inject:this.getInject(),triangulation:nd,depth:{enable:!1}});case 6:return X=de.sent,de.abrupt("return",[X]);case 8:case"end":return de.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(u){return{frag:vy,vert:gy,type:"pointFill"}}},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ia.Attribute,descriptor:{name:"a_Extrude",shaderLocation:Za.EXTRUDE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(p,g,y,w){var O=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],D=w%4*3;return[O[D],O[D+1],O[D+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:ia.Attribute,descriptor:{name:"a_Shape",shaderLocation:Za.SHAPE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p){var g=p.shape,y=g===void 0?2:g,w=u.indexOf(y);return[w]}}})}}]),r}(eu);function jC(e){var i=Gb();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function Gb(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $b=`in vec4 v_color;
in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,EO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;


#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  
  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (extrude.xy * (newSize) + offsets);

  offset = rotate_matrix(offset,rotation);

  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,wO=function(e){(0,yr.Z)(r,e);var i=jC(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"meter2coord",1),(0,Ne.Z)((0,Ar.Z)(o),"isMeter",!1),(0,Ne.Z)((0,Ar.Z)(o),"radian",0),(0,Ne.Z)((0,Ar.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),o.layerService.throttleRenderLayers();return}o.texture=g({data:o.iconService.getCanvas(),mag:yt.LINEAR,min:yt.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128,mipmap:!0}),o.textures=[o.texture]}),o}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.heightfixed,y=g===void 0?!1:g,w=u.unit,O=w===void 0?"pixel":w;this.rendererService.getDirty()&&this.texture.bind();var D={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(y),u_raisingHeight:Number(p),u_size_unit:s1[O],u_texture:this.texture};this.textures=[this.texture];var V=this.getUniformsBufferInfo(D);return V}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),K_)}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:EO,fragmentShader:$b,triangulation:K_,depth:{enable:!1},inject:this.getInject(),cull:{enable:!0,face:Ic(this.mapService.version)}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;this.iconService.off("imageUpdate",this.updateTexture),(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{name:"a_Uv",shaderLocation:Za.UV,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.shape,w=g[y]||{x:-64,y:-64},O=w.x,D=w.y;return[O,D]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ia.Attribute,descriptor:{name:"a_Extrude",shaderLocation:Za.EXTRUDE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(p,g,y,w){var O=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],D=w%4*3;return[O[D],O[D+1],O[D+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}})}}]),r}(eu);function CO(e){var i=WC();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function WC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var GC=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,AO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`,$C=function(e){(0,yr.Z)(r,e);var i=CO(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"updateTexture",function(){var g=o.rendererService.createTexture2D;if(o.texture){o.texture.update({data:o.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(function(){o.layerService.throttleRenderLayers()});return}o.texture=g({data:o.iconService.getCanvas(),mag:yt.LINEAR,min:yt.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:o.iconService.canvasHeight||128,mipmap:!0})}),o}return(0,st.Z)(r,[{key:"getUninforms",value:function(){this.rendererService.getDirty()&&this.texture.bind();var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.heightfixed,y=g===void 0?!1:g,w={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(p),u_heightfixed:Number(y),u_texture:this.texture};this.textures=[this.texture];var O=this.getUniformsBufferInfo(w);return O}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:AO,fragmentShader:GC,triangulation:fy,inject:this.getInject(),depth:{enable:!1},primitive:yt.POINTS});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(p){var g=p.size,y=g===void 0?5:g;return Array.isArray(y)?[y[0]]:[y]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{name:"a_Uv",shaderLocation:Za.UV,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(p){var g=u.iconService.getIconMap(),y=p.shape,w=g[y]||{x:-64,y:-64},O=w.x,D=w.y;return[O,D]}}})}}]),r}(eu);function XC(e){var i=TO();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function TO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var MO=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,RO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2., -a_Size /2., 0., 0.);
    gl_Position = project_common_position_to_clipspace(project_pos);
  }

  gl_PointSize = a_Size * u_size_scale *  2.0  * u_DevicePixelRatio;
}
`;function YC(e){var i=e.coordinates;return{vertices:(0,In.Z)(i),indices:[0],size:i.length}}var KC=function(e){(0,yr.Z)(r,e);var i=XC(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getCommonUniformsInfo",value:function(){var u={u_size_scale:.5},c=this.getUniformsBufferInfo(u);return c}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.layer.triangulation=YC,this.initUniformsBuffer(),y.next=4,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:RO,fragmentShader:MO,triangulation:YC,inject:this.getInject(),depth:{enable:!1},primitive:yt.POINTS,pick:!1});case 4:return p=y.sent,y.abrupt("return",[p]);case 6:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?1:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(eu);function IO(e){var i=PO();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function PO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var OO=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,kO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
  offset = project_pixel(offset);
  
  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`,LO=function(e){(0,yr.Z)(r,e);var i=IO(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.blend,p=u.speed,g=p===void 0?1:p,y=u.unit,w=y===void 0?"pixel":y,O={u_additive:c==="additive"?1:0,u_size_unit:s1[w],u_speed:g,u_time:this.layer.getLayerAnimateTime()},D=this.getUniformsBufferInfo(O);return D}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),K_)}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:kO,fragmentShader:OO,triangulation:K_,inject:this.getInject(),depth:{enable:!1}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"animateOption2Array",value:function(u){return[u.enable?0:1,u.speed||1,u.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ia.Attribute,descriptor:{name:"a_Extrude",shaderLocation:Za.EXTRUDE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(c,p,g,y){var w=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],O=y%4*3;return[w[O],w[O+1],w[O+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{shaderLocation:Za.SIZE,name:"a_Size",buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?5:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(eu);function DO(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=qC(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function qC(e,i){if(e){if(typeof e=="string")return c1(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c1(e,i)}}function c1(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var QC=function(){function e(i,r,o){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"boxCells",[]);var u=this.boxCells;this.xCellCount=Math.ceil(i/o),this.yCellCount=Math.ceil(r/o);for(var c=0;c<this.xCellCount*this.yCellCount;c++)u.push([]);this.boxKeys=[],this.bboxes=[],this.width=i,this.height=r,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/r,this.boxUid=0}return(0,st.Z)(e,[{key:"insert",value:function(r,o,u,c,p){this.forEachCell(o,u,c,p,this.insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(c),this.bboxes.push(p)}},{key:"query",value:function(r,o,u,c,p){return this.queryHitTest(r,o,u,c,!1,p)}},{key:"hitTest",value:function(r,o,u,c,p){return this.queryHitTest(r,o,u,c,!0,p)}},{key:"insertBoxCell",value:function(r,o,u,c,p,g){this.boxCells[p].push(g)}},{key:"queryHitTest",value:function(r,o,u,c,p,g){if(u<0||r>this.width||c<0||o>this.height)return p?!1:[];var y=[];if(r<=0&&o<=0&&this.width<=u&&this.height<=c){if(p)return!0;for(var w=0;w<this.boxKeys.length;w++)y.push({key:this.boxKeys[w],x1:this.bboxes[w*4],y1:this.bboxes[w*4+1],x2:this.bboxes[w*4+2],y2:this.bboxes[w*4+3]});return g?y.filter(g):y}var O={hitTest:p,seenUids:{box:{},circle:{}}};return this.forEachCell(r,o,u,c,this.queryCell,y,O,g),p?y.length>0:y}},{key:"queryCell",value:function(r,o,u,c,p,g,y,w){var O=y.seenUids,D=this.boxCells[p];if(D!==null){var V=this.bboxes,X=DO(D),ce;try{for(X.s();!(ce=X.n()).done;){var de=ce.value;if(!O.box[de]){O.box[de]=!0;var we=de*4;if(r<=V[we+2]&&o<=V[we+3]&&u>=V[we+0]&&c>=V[we+1]&&(!w||w(this.boxKeys[de]))){if(y.hitTest)return g.push(!0),!0;g.push({key:this.boxKeys[de],x1:V[we],y1:V[we+1],x2:V[we+2],y2:V[we+3]})}}}}catch(je){X.e(je)}finally{X.f()}}return!1}},{key:"forEachCell",value:function(r,o,u,c,p,g,y,w){for(var O=this.convertToXCellCoord(r),D=this.convertToYCellCoord(o),V=this.convertToXCellCoord(u),X=this.convertToYCellCoord(c),ce=O;ce<=V;ce++)for(var de=D;de<=X;de++){var we=this.xCellCount*de+ce;if(p.call(this,r,o,u,c,we,g,y,w))return}}},{key:"convertToXCellCoord",value:function(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}},{key:"convertToYCellCoord",value:function(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}}]),e}(),FO=QC,BO=function(){function e(i,r){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"viewportPadding",100),this.width=i,this.height=r,this.viewportPadding=Math.max(i,r),this.grid=new FO(i+this.viewportPadding,r+this.viewportPadding,25),this.screenRightBoundary=i+this.viewportPadding,this.screenBottomBoundary=r+this.viewportPadding,this.gridRightBoundary=i+2*this.viewportPadding,this.gridBottomBoundary=r+2*this.viewportPadding}return(0,st.Z)(e,[{key:"placeCollisionBox",value:function(r){var o=r.x1+r.anchorPointX+this.viewportPadding,u=r.y1+r.anchorPointY+this.viewportPadding,c=r.x2+r.anchorPointX+this.viewportPadding,p=r.y2+r.anchorPointY+this.viewportPadding;return!this.isInsideGrid(o,u,c,p)||this.grid.hitTest(o,u,c,p)?{box:[]}:{box:[o,u,c,p]}}},{key:"insertCollisionBox",value:function(r,o){var u={featureIndex:o};this.grid.insert(u,r[0],r[1],r[2],r[3])}},{key:"project",value:function(r,o,u){var c=Kd(o,u,0,1),p=kp(),g=Tu.apply(W,(0,In.Z)(r));return yh(p,c,g),{x:(p[0]/p[3]+1)/2*this.width+this.viewportPadding,y:(-p[1]/p[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(r,o,u,c){return u>=0&&r<this.gridRightBoundary&&c>=0&&o<this.gridBottomBoundary}}]),e}();function JC(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=NO(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function NO(e,i){if(e){if(typeof e=="string")return eA(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eA(e,i)}}function eA(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}function tA(e){var i=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0;break;default:i=.5}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;break;default:r=.5}return{horizontalAlign:i,verticalAlign:r}}function Xb(e,i,r,o,u){if(u){var c=e[o],p=c.glyph;if(p)for(var g=i[p].advance*c.scale,y=(e[o].x+g)*u,w=r;w<=o;w++)e[w].x-=y}}function rA(e,i,r,o,u,c,p){var g=(i-r)*u,y=(-o*p+.5)*c,w=JC(e),O;try{for(w.s();!(O=w.n()).done;){var D=O.value;D.x+=g,D.y+=y}}catch(V){w.e(V)}finally{w.f()}}function f1(e,i,r,o,u,c,p){var g=-8,y=0,w=g,O=0,D=e.positionedGlyphs,V=c==="right"?1:c==="left"?0:.5,X=D.length;r.forEach(function(ht){if(ht.split("").forEach(function(Dt){var Yt=i[Dt],ir=0;Yt&&(D.push({glyph:Dt,x:y,y:w+ir,vertical:!1,scale:1,metrics:Yt}),y+=Yt.advance+p)}),D.length!==X){var _t=y-p;O=Math.max(_t,O),Xb(D,i,X,D.length-1,V)}y=0,w-=o+5});var ce=tA(u),de=ce.horizontalAlign,we=ce.verticalAlign;rA(D,V,de,we,O,o,r.length);var je=w-g;e.top+=-we*je,e.bottom=e.top-je,e.left+=-de*O,e.right=e.left+O}function Yb(e,i,r,o,u,c,p){var g=-8,y=0,w=g,O=0,D=e.positionedGlyphs,V=c==="right"?1:c==="left"?0:.5,X=D.length;r.forEach(function(ht){var _t=i[ht],Dt=0;if(_t&&(D.push({glyph:ht,x:_t.advance/2,y:w+Dt,vertical:!1,scale:1,metrics:_t}),y+=_t.advance+p),D.length!==X){var Yt=y-p;O=Math.max(Yt,O),Xb(D,i,X,D.length-1,V)}y=0,w-=o+5});var ce=tA(u),de=ce.horizontalAlign,we=ce.verticalAlign;rA(D,V,de,we,O,o,r.length);var je=w-g;e.top+=-we*je,e.bottom=e.top-je,e.left+=-de*O,e.right=e.left+O}function nA(e,i,r,o,u,c){var p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],g=arguments.length>7?arguments[7]:void 0,y=e.split(`
`),w=[],O={positionedGlyphs:w,top:p[1],bottom:p[1],left:p[0],right:p[0],lineCount:y.length,text:e};return g?Yb(O,i,y,r,o,u,c):f1(O,i,y,r,o,u,c),w.length?O:!1}function cv(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],r=arguments.length>2?arguments[2]:void 0,o=e.positionedGlyphs,u=o===void 0?[]:o,c=[],p=JC(u),g;try{for(p.s();!(g=p.n()).done;){var y=g.value,w=y.metrics,O=4,D=w.advance*y.scale/2,V=r?[y.x+D,y.y]:[0,0],X=r?[0,0]:[y.x+D+i[0],y.y+i[1]],ce=(0-O)*y.scale-D+X[0],de=(0-O)*y.scale+X[1],we=ce+w.width*y.scale,je=de+w.height*y.scale,ht={x:ce,y:de},_t={x:we,y:de},Dt={x:ce,y:je},Yt={x:we,y:je};c.push({tl:ht,tr:_t,bl:Dt,br:Yt,tex:w,glyphOffset:V})}}catch(ir){p.e(ir)}finally{p.f()}return c}function zO(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=iA(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function iA(e,i){if(e){if(typeof e=="string")return Kb(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kb(e,i)}}function Kb(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}function UO(e){var i=ZO();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function ZO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var qb=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec4 v_color;
in vec4 v_stroke_color;
in vec2 v_uv;
in float v_gamma_scale;
in float v_fontScale;
out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,Qb=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in vec2 a_textOffsets;
layout(location = 14) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;



#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  
  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,yy=Ta.isEqual;function aA(e){var i=this,r=e.id,o=[],u=[];if(!i.glyphInfoMap||!i.glyphInfoMap[r])return{vertices:[],indices:[],size:7};var c=i.glyphInfoMap[r].centroid,p=c.length===2?[c[0],c[1],0]:c;return i.glyphInfoMap[r].glyphQuads.forEach(function(g,y){o.push.apply(o,(0,In.Z)(p).concat([g.tex.x,g.tex.y+g.tex.height,g.tl.x,g.tl.y],(0,In.Z)(p),[g.tex.x+g.tex.width,g.tex.y+g.tex.height,g.tr.x,g.tr.y],(0,In.Z)(p),[g.tex.x+g.tex.width,g.tex.y,g.br.x,g.br.y],(0,In.Z)(p),[g.tex.x,g.tex.y,g.bl.x,g.bl.y])),u.push(0+y*4,1+y*4,2+y*4,2+y*4,3+y*4,0+y*4)}),{vertices:o,indices:u,size:7}}var Jb=function(e){(0,yr.Z)(r,e);var i=UO(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"glyphInfoMap",{}),(0,Ne.Z)((0,Ar.Z)(o),"currentZoom",-1),(0,Ne.Z)((0,Ar.Z)(o),"textureHeight",0),(0,Ne.Z)((0,Ar.Z)(o),"textCount",0),(0,Ne.Z)((0,Ar.Z)(o),"preTextStyle",{}),(0,Ne.Z)((0,Ar.Z)(o),"mapping",(0,Sn.Z)(nr().mark(function g(){return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return o.initGlyph(),o.updateTexture(),w.next=4,o.reBuildModel();case 4:case"end":return w.stop()}},g)}))),o}return(0,st.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption),{u_sdf_map:this.textures[0]})}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.stroke,p=c===void 0?"#fff":c,g=u.strokeWidth,y=g===void 0?0:g,w=u.halo,O=w===void 0?.5:w,D=u.gamma,V=D===void 0?2:D,X=u.raisingHeight,ce=X===void 0?0:X,de=this.getFontServiceMapping(),we=this.getFontServiceCanvas();de&&Object.keys(de).length!==this.textCount&&we&&(this.updateTexture(),this.textCount=Object.keys(de).length),this.preTextStyle=this.getTextStyle();var je={u_stroke_color:yo(p),u_sdf_map_size:[(we==null?void 0:we.width)||1,(we==null?void 0:we.height)||1],u_raisingHeight:Number(ce),u_stroke_width:y,u_gamma_scale:V,u_halo_blur:O},ht=this.getUniformsBufferInfo(je);return ht}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),this.rawEncodeData=this.layer.getEncodedData(),this.preTextStyle=this.getTextStyle(),this.initUniformsBuffer(),g.abrupt("return",this.buildModels());case 6:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.layer.getLayerConfig(),g=p.textAllowOverlap,y=g===void 0?!1:g,this.initGlyph(),this.updateTexture(),y||this.filterGlyphs(),D.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:Qb,fragmentShader:qb,inject:this.getInject(),triangulation:aA.bind(this),depth:{enable:!1}});case 6:return w=D.sent,D.abrupt("return",[w]);case 8:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"needUpdate",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D,V,X,ce,de,we,je;return nr().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(p=this.getTextStyle(),g=p.textAllowOverlap,y=g===void 0?!1:g,w=p.textAnchor,O=w===void 0?"center":w,D=p.textOffset,V=p.padding,X=p.fontFamily,ce=p.fontWeight,!(!yy(V,this.preTextStyle.padding)||!yy(D,this.preTextStyle.textOffset)||!yy(O,this.preTextStyle.textAnchor)||!yy(X,this.preTextStyle.fontFamily)||!yy(ce,this.preTextStyle.fontWeight))){_t.next=5;break}return _t.next=4,this.mapping();case 4:return _t.abrupt("return",!0);case 5:if(!y){_t.next=7;break}return _t.abrupt("return",!1);case 7:if(de=this.mapService.getZoom(),we=this.mapService.getBounds(),je=gf(this.extent,we),!(Math.abs(this.currentZoom-de)>.5||!je||y!==this.preTextStyle.textAllowOverlap)){_t.next=14;break}return _t.next=13,this.reBuildModel();case 13:return _t.abrupt("return",!0);case 14:return _t.abrupt("return",!1);case 15:case"end":return _t.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:ia.Attribute,descriptor:{shaderLocation:10,name:"a_textOffsets",buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(c,p,g){return[g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:ia.Attribute,descriptor:{name:"a_tex",shaderLocation:Za.UV,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?12:p;return Array.isArray(g)?[g[0]]:[g]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var u=this.mapService.getBounds();return Bh(u,.5)}},{key:"initTextFont",value:function(){var u=this.getTextStyle(),c=u.fontWeight,p=u.fontFamily,g=this.rawEncodeData,y=[];g.forEach(function(w){var O=w.shape,D=O===void 0?"":O;D=D.toString();var V=zO(D),X;try{for(V.s();!(X=V.n()).done;){var ce=X.value;y.indexOf(ce)===-1&&y.push(ce)}}catch(de){V.e(de)}finally{V.f()}}),this.fontService.setFontOptions({characterSet:y,fontWeight:c,fontFamily:p,iconfont:!1})}},{key:"initIconFontTex",value:function(){var u=this.getTextStyle(),c=u.fontWeight,p=u.fontFamily,g=this.rawEncodeData,y=[];g.forEach(function(w){var O=w.shape,D=O===void 0?"":O;D="".concat(D),y.indexOf(D)===-1&&y.push(D)}),this.fontService.setFontOptions({characterSet:y,fontWeight:c,fontFamily:p,iconfont:!0})}},{key:"getTextStyle",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g,w=u.textAllowOverlap,O=w===void 0?!1:w,D=u.padding,V=D===void 0?[0,0]:D,X=u.textAnchor,ce=X===void 0?"center":X,de=u.textOffset,we=de===void 0?[0,0]:de,je=u.opacity,ht=je===void 0?1:je,_t=u.strokeOpacity,Dt=_t===void 0?1:_t,Yt=u.strokeWidth,ir=Yt===void 0?0:Yt,sr=u.stroke,Tr=sr===void 0?"#000":sr;return{fontWeight:p,fontFamily:y,textAllowOverlap:O,padding:V,textAnchor:ce,textOffset:we,opacity:ht,strokeOpacity:Dt,strokeWidth:ir,stroke:Tr}}},{key:"generateGlyphLayout",value:function(u){var c=this,p=this.getFontServiceMapping(),g=this.layer.getLayerConfig(),y=g.spacing,w=y===void 0?2:y,O=g.textAnchor,D=O===void 0?"center":O,V=g.textOffset,X=this.rawEncodeData;this.glyphInfo=X.map(function(ce){var de=ce.shape,we=de===void 0?"":de,je=ce.id,ht=ce.size,_t=ht===void 0?1:ht,Dt=ce.textOffset?ce.textOffset:V||[0,0],Yt=ce.textAnchor?ce.textAnchor:D||"center",ir=nA(we.toString(),p,_t,Yt,"left",w,Dt,u),sr=cv(ir,Dt,!1);return ce.shaping=ir,ce.glyphQuads=sr,ce.centroid=wa(ce.coordinates),ce.originCentroid=ce.version==="GAODE2.x"?wa(ce.originCoordinates):ce.originCentroid=ce.centroid,c.glyphInfoMap[je]={shaping:ir,glyphQuads:sr,centroid:wa(ce.coordinates)},ce})}},{key:"getFontServiceMapping",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g;return this.fontService.getMappingByKey("".concat(y,"_").concat(p))}},{key:"getFontServiceCanvas",value:function(){var u=this.layer.getLayerConfig(),c=u.fontWeight,p=c===void 0?"400":c,g=u.fontFamily,y=g===void 0?"sans-serif":g;return this.fontService.getCanvasByKey("".concat(y,"_").concat(p))}},{key:"filterGlyphs",value:function(){var u=this,c=this.layer.getLayerConfig(),p=c.padding,g=p===void 0?[0,0]:p,y=c.textAllowOverlap,w=y===void 0?!1:y;if(!w){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var O=this.rendererService.getViewportSize(),D=O.width,V=O.height,X=new BO(D,V),ce=this.glyphInfo.filter(function(de){var we=de.shaping,je=de.id,ht=je===void 0?0:je,_t=de.version==="GAODE2.x"?de.originCentroid:de.centroid,Dt=de.size,Yt=Dt/16,ir=u.mapService.lngLatToContainer(_t),sr=X.placeCollisionBox({x1:we.left*Yt-g[0],x2:we.right*Yt+g[0],y1:we.top*Yt-g[1],y2:we.bottom*Yt+g[1],anchorPointX:ir.x,anchorPointY:ir.y}),Tr=sr.box;return Tr&&Tr.length?(X.insertCollisionBox(Tr,ht),!0):!1});ce.forEach(function(de){u.glyphInfoMap[de.id]=de})}}},{key:"initGlyph",value:function(){var u=this.layer.getLayerConfig(),c=u.iconfont,p=c===void 0?!1:c;p?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(p)}},{key:"updateTexture",value:function(){var u=this.rendererService.createTexture2D,c=this.getFontServiceCanvas();this.textureHeight=c.height,this.texture&&this.texture.destroy(),this.texture=u({data:c,mag:yt.LINEAR,min:yt.LINEAR,width:c.width,height:c.height}),this.textures=[this.texture]}},{key:"reBuildModel",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.filterGlyphs(),y.next=3,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:Qb,fragmentShader:qb,triangulation:aA.bind(this),inject:this.getInject(),depth:{enable:!1}});case 3:p=y.sent,this.layer.models=[p];case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()}]),r}(eu),VO={fillImage:wO,fill:HC,radar:LO,image:$C,normal:KC,simplePoint:pO,extrude:uv,text:Jb,earthFill:ZC,earthExtrude:yO},HO=VO;function oA(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=jO(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function jO(e,i){if(e){if(typeof e=="string")return eS(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eS(e,i)}}function eS(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}function WO(e){var i=sA();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function sA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $g=function(e){(0,yr.Z)(r,e);var i=WO(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"type","PointLayer"),(0,Ne.Z)((0,Ar.Z)(o),"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,Ne.Z)((0,Ar.Z)(o),"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,Ne.Z)((0,Ar.Z)(o),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),o}return(0,st.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new HO[p](this),y.next=5,this.initLayerModels();case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"rebuildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.buildModels();case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var u=this.shapeOption,c=u.field,p=u.values,g=this.getLayerConfig(),y=g.shape2d,w=this.iconService.getIconMap();if(c&&(y==null?void 0:y.indexOf(c))!==-1)return"fill";if(p==="text")return"text";if(p&&p instanceof Array){var O=oA(p),D;try{for(O.s();!(D=O.n()).done;){var V=D.value;if(typeof V=="string"&&w.hasOwnProperty(V))return"image"}}catch(X){O.e(X)}finally{O.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return c[u]}},{key:"getModelType",value:function(){var u=this.getEncodedData(),c=this.getLayerConfig(),p=c.shape2d,g=c.shape3d,y=c.billboard,w=y===void 0?!0:y,O=this.iconService.getIconMap(),D=u.find(function(X){return X.hasOwnProperty("shape")});if(D){var V=D.shape;return V==="dot"?"normal":V==="simple"?"simplePoint":V==="radar"?"radar":this.layerType==="fillImage"||w===!1?"fillImage":(p==null?void 0:p.indexOf(V))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(g==null?void 0:g.indexOf(V))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":O.hasOwnProperty(V)?"image":"text"}else return this.getModelTypeWillEmptyData()}}]),r}(Fm);function _y(e){var i=GO();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function GO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $O=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,XO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
float isSide = a_Position.z;
 float topU = a_uvs[0];
 float topV = 1.0 - a_uvs[1];
 float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);

  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


 gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);


  setPickingColor(a_PickingColor);
}
`,YO=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;


#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  }
  

  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,KO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

out vec2 v_texture_data;
out vec3 v_uvs;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);
  vec4 project_pos = project_position(pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;
   
  v_texture_data = vec2(a_Position.z, lightWeight);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


    gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));



  setPickingColor(a_PickingColor);
}
`,uA=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,qO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec2 v_texture_data;
out vec3 v_uvs;
out vec4 v_Color;


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {


  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(pos);
  v_texture_data = vec2(a_Position.z,lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,QO=function(e){(0,yr.Z)(r,e);var i=_y(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.heightfixed,p=c===void 0?!1:c,g=u.raisingHeight,y=g===void 0?0:g,w=u.topsurface,O=w===void 0?!0:w,D=u.sidesurface,V=D===void 0?!0:D,X=u.sourceColor,ce=u.targetColor,de=0,we=[1,1,1,1],je=[1,1,1,1];X&&ce&&(we=yo(X),je=yo(ce),de=1);var ht={u_sourceColor:we,u_targetColor:je,u_linearColor:de,u_topsurface:Number(O),u_sidesurface:Number(V),u_heightfixed:Number(p),u_raisingHeight:Number(y),u_texture:this.texture};this.texture&&(this.textures=[this.texture]);var _t=this.getUniformsBufferInfo(ht);return _t}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.loadTexture();case 2:return g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O;return nr().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return p=this.getShaders(),g=p.frag,y=p.vert,w=p.type,this.initUniformsBuffer(),V.next=4,this.layer.buildLayerModel({moduleName:w,vertexShader:y,fragmentShader:g,depth:{enable:!0},inject:this.getInject(),triangulation:bC});case 4:return O=V.sent,V.abrupt("return",[O]);case 6:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){var u=this.layer.getLayerConfig(),c=u.pickLight,p=u.mapTexture;return p?{frag:YO,vert:KO,type:"polygonExtrudeTexture"}:c?{frag:uA,vert:qO,type:"polygonExtrudePickLight"}:{frag:$O,vert:XO,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy(),this.textures=[]}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=u,p=this.layer.coordCenter||this.layer.getSource().center,g=c[2]-c[0],y=c[3]-c[1];if(this.mapService.version==="GAODE2.x"){var w=this.mapService.coordToAMap2RelativeCoordinates([u[0],u[1]],p),O=(0,Zi.Z)(w,2),D=O[0],V=O[1],X=this.mapService.coordToAMap2RelativeCoordinates([u[2],u[3]],p),ce=(0,Zi.Z)(X,2),de=ce[0],we=ce[1];g=de-D,y=we-V,c=[D,V,de,we]}this.styleAttributeService.registerStyleAttribute({name:"uvs",type:ia.Attribute,descriptor:{name:"a_uvs",shaderLocation:Za.UV,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(ht,_t,Dt){var Yt=Dt[0],ir=Dt[1];return[(Yt-c[0])/g,(ir-c[1])/y,Dt[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ia.Attribute,descriptor:{name:"a_Normal",shaderLocation:Za.NORMAL,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(ht,_t,Dt,Yt,ir){return ir}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(ht){var _t=ht.size,Dt=_t===void 0?10:_t;return Array.isArray(Dt)?[Dt[0]]:[Dt]}}})}},{key:"loadTexture",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p=this,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(g=this.layer.getLayerConfig(),y=g.mapTexture,w=this.rendererService.createTexture2D,this.texture=w({height:0,width:0}),!y){D.next=5;break}return D.abrupt("return",new Promise(function(V,X){var ce=new Image;ce.crossOrigin="anonymous",ce.src=y,ce.onload=function(){return p.texture=w({data:ce,width:ce.width,height:ce.height,wrapS:yt.CLAMP_TO_EDGE,wrapT:yt.CLAMP_TO_EDGE,min:yt.LINEAR,mag:yt.LINEAR}),V(null)},ce.onerror=function(){X(new Error("image load error"))}}));case 5:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()}]),r}(eu);function JO(e){var i=lA();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function lA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var cA=`
in vec4 v_Color;
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,ek=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos);
   float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`,tS=function(e){(0,yr.Z)(r,e);var i=JO(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u={},c=this.getUniformsBufferInfo(u);return c}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O;return nr().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return p=this.getShaders(),g=p.frag,y=p.vert,w=p.type,this.initUniformsBuffer(),V.next=4,this.layer.buildLayerModel({moduleName:w,vertexShader:y,fragmentShader:g,inject:this.getInject(),triangulation:bC,depth:{enable:!0}});case 4:return O=V.sent,V.abrupt("return",[O]);case 6:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getShaders",value:function(){return{frag:cA,vert:ek,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:ia.Attribute,descriptor:{name:"a_Normal",shaderLocation:Za.NORMAL,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(c,p,g,y,w){return w}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ia.Attribute,descriptor:{name:"a_Size",shaderLocation:Za.SIZE,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(c){var p=c.size,g=p===void 0?10:p;return Array.isArray(g)?[g[0]]:[g]}}})}}]),r}(eu);function tk(e){var i=rk();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function rk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var nk=`in vec4 v_color;
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,fA=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec3 v_linear;
in vec2 v_pos;
in vec4 v_color;
out vec4 outputColor;
#pragma include "picking"

void main() {
   outputColor = v_color;
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,ik=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 15) in vec3 a_linear;


layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};


out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

out vec3 v_linear;
out vec2 v_pos;

void main() {
  if(u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}`,ak=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};


out vec4 v_color;


#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

 
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`,h1=function(e){(0,yr.Z)(r,e);var i=tk(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.raisingHeight,p=c===void 0?0:c,g=u.opacityLinear,y=g===void 0?{enable:!1,dir:"in"}:g,w={u_raisingHeight:Number(p),u_opacitylinear:Number(y.enable),u_dir:y.dir==="in"?1:0},O=this.getUniformsBufferInfo(w);return O}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D;return nr().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return p=this.getModelParams(),g=p.frag,y=p.vert,w=p.triangulation,O=p.type,this.initUniformsBuffer(),this.layer.triangulation=w,X.next=5,this.layer.buildLayerModel({moduleName:O,vertexShader:y,fragmentShader:g,inject:this.getInject(),triangulation:w,primitive:yt.TRIANGLES,depth:{enable:!1}});case 5:return D=X.sent,X.abrupt("return",[D]);case 7:case"end":return X.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getLayerConfig(),c=u.opacityLinear,p=c===void 0?{enable:!1,dir:"in"}:c;p.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:ia.Attribute,descriptor:{name:"a_linear",shaderLocation:Za.LINEAR,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:3,update:function(y,w,O){return[O[3],O[4],O[5]]}}})}},{key:"getModelParams",value:function(){var u=this.layer.getLayerConfig(),c=u.opacityLinear,p=c===void 0?{enable:!1}:c;return p.enable?{frag:fA,vert:ik,type:"polygonLinear",triangulation:jP}:{frag:nk,vert:ak,type:"polygonFill",triangulation:Fc}}}]),r}(eu);function ok(e){var i=sk();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function sk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var uk=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,lk=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};


out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`,ck=Ta.isNumber,hA=function(e){(0,yr.Z)(r,e);var i=ok(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.watercolor,p=c===void 0?"#6D99A8":c,g=u.watercolor2,y=g===void 0?"#0F121C":g,w={u_watercolor:yo(p),u_watercolor2:yo(y),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};this.textures=[this.texture1,this.texture2,this.texture3];var O=this.getUniformsBufferInfo(w);return O}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.loadTexture(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:lk,fragmentShader:uk,inject:this.getInject(),triangulation:Nb,primitive:yt.TRIANGLES,depth:{enable:!1}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u,c,p;(u=this.texture1)===null||u===void 0||u.destroy(),(c=this.texture2)===null||c===void 0||c.destroy(),(p=this.texture3)===null||p===void 0||p.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=(0,Zi.Z)(u,4),p=c[0],g=c[1],y=c[2],w=c[3],O=y-p,D=w-g;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:ia.Attribute,descriptor:{name:"a_uv",shaderLocation:Za.UV,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(X,ce,de,we){var je=X.version==="GAODE2.x"?X.originCoordinates[0][we]:de,ht=(0,Zi.Z)(je,2),_t=ht[0],Dt=ht[1];return[(_t-p)/O,(Dt-g)/D]}}})}},{key:"loadTexture",value:function(){var u=this,c=this.rendererService.createTexture2D,p={height:0,width:0};this.texture1=c(p),this.texture2=c(p),this.texture3=c(p),g(function(w){u.texture1=y(w[0]),u.texture2=y(w[1]),u.texture3=y(w[2]),u.layerService.reRender()});function g(w){var O=0,D=[],V=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];V.map(function(X){var ce=new Image;ce.crossOrigin="",ce.src=X,D.push(ce),ce.onload=function(){O++,O===3&&w(D)}})}function y(w){return c({data:w,width:w.width,height:w.height,wrapS:yt.MIRRORED_REPEAT,wrapT:yt.MIRRORED_REPEAT,min:yt.LINEAR,mag:yt.LINEAR})}}}]),r}(eu);function fk(e){var i=hk();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function hk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var pA=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,dA=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 14) in vec2 a_uv;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;


#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`,pk=Ta.isNumber,dk=function(e){(0,yr.Z)(r,e);var i=fk(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.speed,p=c===void 0?.5:c,g={u_speed:p,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};this.textures=[this.texture];var y=this.getUniformsBufferInfo(g);return y}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.loadTexture(),g.abrupt("return",this.buildModels());case 2:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:dA,fragmentShader:pA,triangulation:Nb,inject:this.getInject(),primitive:yt.TRIANGLES,depth:{enable:!1}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var u=this.layer.getSource().extent,c=(0,Zi.Z)(u,4),p=c[0],g=c[1],y=c[2],w=c[3],O=y-p,D=w-g;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:ia.Attribute,descriptor:{name:"a_uv",shaderLocation:Za.UV,buffer:{usage:yt.STATIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(X,ce,de,we){var je=X.version==="GAODE2.x"?X.originCoordinates[0][we]:de,ht=(0,Zi.Z)(je,2),_t=ht[0],Dt=ht[1];return[(_t-p)/O,(Dt-g)/D]}}})}},{key:"loadTexture",value:function(){var u=this,c=this.layer.getLayerConfig(),p=c.waterTexture,g=this.rendererService.createTexture2D;this.texture=g({height:0,width:0});var y=new Image;y.crossOrigin="",p?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),y.src=p):y.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",y.onload=function(){u.texture=g({data:y,width:y.width,height:y.height,wrapS:yt.MIRRORED_REPEAT,wrapT:yt.MIRRORED_REPEAT,min:yt.LINEAR,mag:yt.LINEAR}),u.layerService.reRender()}}}]),r}(eu),rS={fill:h1,line:DC,extrude:QO,text:Jb,point_fill:HC,point_image:$C,point_normal:KC,point_extrude:uv,water:dk,ocean:hA,extrusion:tS},vA=rS;function vk(e){var i=gA();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function gA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var p1=function(e){(0,yr.Z)(r,e);var i=vk(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"type","PolygonLayer"),(0,Ne.Z)((0,Ar.Z)(o),"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"]),o}return(0,st.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new vA[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelType",value:function(){var u,c=this.styleAttributeService.getLayerStyleAttribute("shape"),p=c==null||(u=c.scale)===null||u===void 0?void 0:u.field;return p==="fill"||!p?"fill":p==="extrude"?"extrude":p==="extrusion"?"extrusion":p==="water"?"water":p==="ocean"?"ocean":p==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var u=this.getEncodedData(),c=this.getLayerConfig(),p=c.shape2d,g=c.shape3d,y=this.iconService.getIconMap(),w=u.find(function(D){return D.hasOwnProperty("shape")});if(w){var O=w.shape;return O==="dot"?"point_normal":(p==null?void 0:p.indexOf(O))!==-1?"point_fill":(g==null?void 0:g.indexOf(O))!==-1?"point_extrude":y.hasOwnProperty(O)?"point_image":"text"}else return"fill"}}]),r}(Fm);function gk(e){var i=mA();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function mA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var yA=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,mk=`layout(location = 0) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,yk=function(e){(0,yr.Z)(r,e);var i=gk(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.color,y=g===void 0?"#000":g,w={u_color:yo(y),u_opacity:p||1},O=this.getUniformsBufferInfo(w);return O}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"mask",vertexShader:mk,fragmentShader:yA,triangulation:Nb,depth:{enable:!1},pick:!1});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;u&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),r}(eu),Xg={fill:yk},_k=Xg;function xk(e){var i=bk();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function bk(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var _A=function(e){(0,yr.Z)(r,e);var i=xk(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"type","MaskLayer"),o}return(0,st.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new _k[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getModelType",value:function(){return"fill"}}]),r}(Fm),r4=k(28660),xA,nS,bA,xy,d1,SA,EA,Sk=Ta.cloneDeep,Ek=(xA=(0,It.b2)(),nS=(0,It.f3)(Xt.IMapService),bA=(0,It.f3)(Xt.IFontService),xA(xy=(d1=function(){function e(){(0,Pt.Z)(this,e),Da(this,"mapService",SA,this),Da(this,"fontService",EA,this)}return(0,st.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("DataMappingPlugin",(0,Sn.Z)(nr().mark(function p(){return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:r.log(Pl.MappingStart,$o.INIT),u.generateMaping(r,{styleAttributeService:c}),r.log(Pl.MappingEnd,$o.INIT);case 3:case"end":return y.stop()}},p)}))),r.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var p=(0,Sn.Z)(nr().mark(function g(y){var w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(y){D.next=2;break}return D.abrupt("return",y);case 2:return r.dataState.dataMappingNeedUpdate=!1,r.log(Pl.MappingStart,$o.UPDATE),w=u.generateMaping(r,{styleAttributeService:c}),r.log(Pl.MappingEnd,$o.UPDATE),D.abrupt("return",w);case 7:case"end":return D.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()),r.hooks.beforeRender.tap("DataMappingPlugin",function(){var p=r.getSource();if(!(r.layerModelNeedUpdate||!p||!p.inited)){var g=c.getLayerStyleAttributes()||[],y=c.getLayerStyleAttribute("filter"),w=p.data.dataArray;if(!(Array.isArray(w)&&w.length===0)){var O=g.filter(function(X){return X.needRemapping}),D=w;if(y!=null&&y.needRemapping&&y!==null&&y!==void 0&&y.scale&&(D=w.filter(function(X){return u.applyAttributeMapping(y,X)[0]})),O.length){var V=u.mapping(r,O,D,r.getEncodedData());r.setEncodedData(V)}}}})}},{key:"generateMaping",value:function(r,o){var u=this,c=o.styleAttributeService,p=c.getLayerStyleAttributes()||[],g=c.getLayerStyleAttribute("filter"),y=r.getSource().data.dataArray,w=y;g!=null&&g.scale&&(w=y.filter(function(D){return u.applyAttributeMapping(g,D)[0]})),w=r.processData(w);var O=this.mapping(r,p,w,void 0);return r.setEncodedData(O),r.emit("dataUpdate",null),!0}},{key:"mapping",value:function(r,o,u,c){var p=this,g=o.filter(function(w){return w.scale!==void 0}).filter(function(w){return w.name!=="filter"}),y=u.map(function(w,O){var D=c?c[O]:{},V=(0,ne.Z)({id:w._id,coordinates:w.coordinates},D);return g.forEach(function(X){var ce=p.applyAttributeMapping(X,w);(X.name==="color"||X.name==="stroke")&&(ce=ce.map(function(de){return yo(de)})),V[X.name]=Array.isArray(ce)&&ce.length===1?ce[0]:ce,X.name==="shape"&&(V.shape=p.fontService.getIconFontKey(V[X.name]))}),V});return o.forEach(function(w){w.needRemapping=!1}),this.adjustData2Amap2Coordinates(y,r),this.adjustData2SimpleCoordinates(y),y}},{key:"adjustData2Amap2Coordinates",value:function(r,o){var u=this;if(r.length>0&&this.mapService.version==="GAODE2.x"){var c=o.coordCenter||o.getSource().center;r.filter(function(p){return!p.originCoordinates}).map(function(p){p.version="GAODE2.x",p.originCoordinates=Sk(p.coordinates),p.coordinates=u.mapService.coordToAMap2RelativeCoordinates(p.coordinates,c)})}}},{key:"adjustData2SimpleCoordinates",value:function(r){var o=this;r.length>0&&this.mapService.version==="SIMPLE"&&r.map(function(u){u.simpleCoordinate||(u.coordinates=o.unProjectCoordinates(u.coordinates),u.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(r){var o=this;if(typeof r[0]=="number")return this.mapService.simpleMapCoord.unproject(r);if(r[0]&&r[0][0]instanceof Array){var u=[];return r.map(function(p){var g=[];p.map(function(y){g.push(o.mapService.simpleMapCoord.unproject(y))}),u.push(g)}),u}else{var c=[];return r.map(function(p){c.push(o.mapService.simpleMapCoord.unproject(p))}),c}}},{key:"applyAttributeMapping",value:function(r,o){var u;if(!r.scale)return[];var c=(r==null||(u=r.scale)===null||u===void 0?void 0:u.scalers)||[],p=[];c.forEach(function(y){var w,O=y.field;(o.hasOwnProperty(O)||((w=r.scale)===null||w===void 0?void 0:w.type)==="variable")&&p.push(o[O])});var g=r.mapping?r.mapping(p):[];return g}},{key:"getArrowPoints",value:function(r,o){var u=[o[0]-r[0],o[1]-r[1]],c=Ml(u),p=[r[0]+c[0]*1e-4,r[1]+c[1]*1e-4];return p}}]),e}(),SA=Aa(d1.prototype,"mapService",[nS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),EA=Aa(d1.prototype,"fontService",[bA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d1))||xy),wA,iS,wk=(wA=(0,It.b2)(),wA(iS=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"apply",value:function(r){var o=this;this.mapService=r.getContainer().get(Xt.IMapService),r.hooks.init.tapPromise("DataSourcePlugin",(0,Sn.Z)(nr().mark(function u(){var c,p,g,y;return nr().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(r.log(Pl.SourceInitStart,$o.INIT),c=r.getSource(),c||(p=r.sourceOption||r.defaultSourceConfig,g=p.data,y=p.options,c=new G_(g,y),r.setSource(c)),!c.inited){O.next=8;break}o.updateClusterData(r),r.log(Pl.SourceInitEnd,$o.INIT),O.next=10;break;case 8:return O.next=10,new Promise(function(D){c.on("update",function(V){V.type==="inited"&&(o.updateClusterData(r),r.log(Pl.SourceInitEnd,$o.INIT)),D(null)})});case 10:case"end":return O.stop()}},u)}))),r.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,Sn.Z)(nr().mark(function u(){var c,p,g;return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return c=o.updateClusterData(r),p=r.dataState.dataSourceNeedUpdate,r.dataState.dataSourceNeedUpdate=!1,g=c||p,w.abrupt("return",g);case 5:case"end":return w.stop()}},u)})))}},{key:"updateClusterData",value:function(r){if(r.isTileLayer||r.tileLayer||!r.getSource())return!1;var o=r.getSource(),u=o.cluster,c=o.clusterOptions.zoom,p=c===void 0?0:c,g=this.mapService.getZoom()-1,y=r.dataState.dataSourceNeedUpdate;return u&&y&&o.updateClusterData(Math.floor(g)),u&&Math.abs(r.clusterZoom-g)>=1?(p!==Math.floor(g)&&o.updateClusterData(Math.floor(g)),r.clusterZoom=g,!0):!1}}]),e}())||iS);function aS(e,i){return e<i?-1:e>i?1:e>=i?0:NaN}function Zm(e){return e.length===1&&(e=v1(e)),{left:function(i,r,o,u){for(o==null&&(o=0),u==null&&(u=i.length);o<u;){var c=o+u>>>1;e(i[c],r)<0?o=c+1:u=c}return o},right:function(i,r,o,u){for(o==null&&(o=0),u==null&&(u=i.length);o<u;){var c=o+u>>>1;e(i[c],r)>0?u=c:o=c+1}return o}}}function v1(e){return function(i,r){return aS(e(i),r)}}var oS=Zm(aS),CA=oS.right,n4=oS.left,g1=CA;function sS(e,i){var r=e.length,o=-1,u,c,p;if(i==null){for(;++o<r;)if((u=e[o])!=null&&u>=u)for(c=p=u;++o<r;)(u=e[o])!=null&&(c>u&&(c=u),p<u&&(p=u))}else for(;++o<r;)if((u=i(e[o],o,e))!=null&&u>=u)for(c=p=u;++o<r;)(u=i(e[o],o,e))!=null&&(c>u&&(c=u),p<u&&(p=u));return[c,p]}var AA=Array.prototype,i4=AA.slice,a4=AA.map,uS=Math.sqrt(50),lS=Math.sqrt(10),m1=Math.sqrt(2);function TA(e,i,r){var o,u=-1,c,p,g;if(i=+i,e=+e,r=+r,e===i&&r>0)return[e];if((o=i<e)&&(c=e,e=i,i=c),(g=Ed(e,i,r))===0||!isFinite(g))return[];if(g>0)for(e=Math.ceil(e/g),i=Math.floor(i/g),p=new Array(c=Math.ceil(i-e+1));++u<c;)p[u]=(e+u)*g;else for(e=Math.floor(e*g),i=Math.ceil(i*g),p=new Array(c=Math.ceil(e-i+1));++u<c;)p[u]=(e-u)/g;return o&&p.reverse(),p}function Ed(e,i,r){var o=(i-e)/Math.max(0,r),u=Math.floor(Math.log(o)/Math.LN10),c=o/Math.pow(10,u);return u>=0?(c>=uS?10:c>=lS?5:c>=m1?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(c>=uS?10:c>=lS?5:c>=m1?2:1)}function Yg(e,i,r){var o=Math.abs(i-e)/Math.max(0,r),u=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),c=o/u;return c>=uS?u*=10:c>=lS?u*=5:c>=m1&&(u*=2),i<e?-u:u}function by(){var e=identity,i=extent,r=sturges;function o(u){var c,p=u.length,g,y=new Array(p);for(c=0;c<p;++c)y[c]=e(u[c],c,u);var w=i(y),O=w[0],D=w[1],V=r(y,O,D);Array.isArray(V)||(V=tickStep(O,D,V),V=range(Math.ceil(O/V)*V,D,V));for(var X=V.length;V[0]<=O;)V.shift(),--X;for(;V[X-1]>D;)V.pop(),--X;var ce=new Array(X+1),de;for(c=0;c<=X;++c)de=ce[c]=[],de.x0=c>0?V[c-1]:O,de.x1=c<X?V[c]:D;for(c=0;c<p;++c)g=y[c],O<=g&&g<=D&&ce[bisect(V,g,0,X)].push(u[c]);return ce}return o.value=function(u){return arguments.length?(e=typeof u=="function"?u:constant(u),o):e},o.domain=function(u){return arguments.length?(i=typeof u=="function"?u:constant([u[0],u[1]]),o):i},o.thresholds=function(u){return arguments.length?(r=typeof u=="function"?u:Array.isArray(u)?constant(slice.call(u)):constant(u),o):r},o}function Ck(e,i,r){return e=map.call(e,number).sort(ascending),Math.ceil((r-i)/(2*(quantile(e,.75)-quantile(e,.25))*Math.pow(e.length,-1/3)))}function Ak(e){return e===null?NaN:+e}function Tk(e,i,r){if(r==null&&(r=Ak),!!(o=e.length)){if((i=+i)<=0||o<2)return+r(e[0],0,e);if(i>=1)return+r(e[o-1],o-1,e);var o,u=(o-1)*i,c=Math.floor(u),p=+r(e[c],c,e),g=+r(e[c+1],c+1,e);return p+(g-p)*(u-c)}}function Kg(e,i,r,o,u){var c=e*e,p=c*e;return((1-3*e+3*c-p)*i+(4-6*c+3*p)*r+(1+3*e+3*c-3*p)*o+p*u)/6}function MA(e){var i=e.length-1;return function(r){var o=r<=0?r=0:r>=1?(r=1,i-1):Math.floor(r*i),u=e[o],c=e[o+1],p=o>0?e[o-1]:2*u-c,g=o<i-1?e[o+2]:2*c-u;return Kg((r-o/i)*i,p,u,c,g)}}function Mk(e){var i=e.length;return function(r){var o=Math.floor(((r%=1)<0?++r:r)*i),u=e[(o+i-1)%i],c=e[o%i],p=e[(o+1)%i],g=e[(o+2)%i];return Kg((r-o/i)*i,u,c,p,g)}}function cS(e){return function(){return e}}function RA(e,i){return function(r){return e+r*i}}function IA(e,i,r){return e=Math.pow(e,r),i=Math.pow(i,r)-e,r=1/r,function(o){return Math.pow(e+o*i,r)}}function o4(e,i){var r=i-e;return r?RA(e,r>180||r<-180?r-360*Math.round(r/360):r):constant(isNaN(e)?i:e)}function Rk(e){return(e=+e)==1?PA:function(i,r){return r-i?IA(i,r,e):cS(isNaN(i)?r:i)}}function PA(e,i){var r=i-e;return r?RA(e,r):cS(isNaN(e)?i:e)}var OA=function e(i){var r=Rk(i);function o(u,c){var p=r((u=Co(u)).r,(c=Co(c)).r),g=r(u.g,c.g),y=r(u.b,c.b),w=PA(u.opacity,c.opacity);return function(O){return u.r=p(O),u.g=g(O),u.b=y(O),u.opacity=w(O),u+""}}return o.gamma=e,o}(1);function fS(e){return function(i){var r=i.length,o=new Array(r),u=new Array(r),c=new Array(r),p,g;for(p=0;p<r;++p)g=Co(i[p]),o[p]=g.r||0,u[p]=g.g||0,c[p]=g.b||0;return o=e(o),u=e(u),c=e(c),g.opacity=1,function(y){return g.r=o(y),g.g=u(y),g.b=c(y),g+""}}}var Ik=fS(MA),s4=fS(Mk),ep="$";function y1(){}y1.prototype=_1.prototype={constructor:y1,has:function(e){return ep+e in this},get:function(e){return this[ep+e]},set:function(e,i){return this[ep+e]=i,this},remove:function(e){var i=ep+e;return i in this&&delete this[i]},clear:function(){for(var e in this)e[0]===ep&&delete this[e]},keys:function(){var e=[];for(var i in this)i[0]===ep&&e.push(i.slice(1));return e},values:function(){var e=[];for(var i in this)i[0]===ep&&e.push(this[i]);return e},entries:function(){var e=[];for(var i in this)i[0]===ep&&e.push({key:i.slice(1),value:this[i]});return e},size:function(){var e=0;for(var i in this)i[0]===ep&&++e;return e},empty:function(){for(var e in this)if(e[0]===ep)return!1;return!0},each:function(e){for(var i in this)i[0]===ep&&e(this[i],i.slice(1),this)}};function _1(e,i){var r=new y1;if(e instanceof y1)e.each(function(g,y){r.set(y,g)});else if(Array.isArray(e)){var o=-1,u=e.length,c;if(i==null)for(;++o<u;)r.set(o,e[o]);else for(;++o<u;)r.set(i(c=e[o],o,e),c)}else if(e)for(var p in e)r.set(p,e[p]);return r}var hS=_1;function u4(){var e=[],i=[],r,o,u;function c(g,y,w,O){if(y>=e.length)return r!=null&&g.sort(r),o!=null?o(g):g;for(var D=-1,V=g.length,X=e[y++],ce,de,we=map(),je,ht=w();++D<V;)(je=we.get(ce=X(de=g[D])+""))?je.push(de):we.set(ce,[de]);return we.each(function(_t,Dt){O(ht,Dt,c(_t,y,w,O))}),ht}function p(g,y){if(++y>e.length)return g;var w,O=i[y-1];return o!=null&&y>=e.length?w=g.entries():(w=[],g.each(function(D,V){w.push({key:V,values:p(D,y)})})),O!=null?w.sort(function(D,V){return O(D.key,V.key)}):w}return u={object:function(g){return c(g,0,Pk,Ok)},map:function(g){return c(g,0,kA,LA)},entries:function(g){return p(c(g,0,kA,LA),0)},key:function(g){return e.push(g),u},sortKeys:function(g){return i[e.length-1]=g,u},sortValues:function(g){return r=g,u},rollup:function(g){return o=g,u}}}function Pk(){return{}}function Ok(e,i,r){e[i]=r}function kA(){return map()}function LA(e,i,r){e.set(i,r)}function x1(){}var qg=hS.prototype;x1.prototype=Vm.prototype={constructor:x1,has:qg.has,add:function(e){return e+="",this[ep+e]=e,this},remove:qg.remove,clear:qg.clear,values:qg.keys,size:qg.size,empty:qg.empty,each:qg.each};function Vm(e,i){var r=new x1;if(e instanceof x1)e.each(function(c){r.add(c)});else if(e){var o=-1,u=e.length;if(i==null)for(;++o<u;)r.add(e[o]);else for(;++o<u;)r.add(i(e[o],o,e))}return r}var l4=null,kk=Array.prototype,zp=kk.map,uf=kk.slice;function Kf(e,i){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(i).domain(e);break}return this}function pS(e,i){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(i).domain(e);break}return this}var wd={name:"implicit"};function b1(){var e=hS(),i=[],r=[],o=wd;function u(c){var p=c+"",g=e.get(p);if(!g){if(o!==wd)return o;e.set(p,g=i.push(c))}return r[(g-1)%r.length]}return u.domain=function(c){if(!arguments.length)return i.slice();i=[],e=hS();for(var p=-1,g=c.length,y,w;++p<g;)e.has(w=(y=c[p])+"")||e.set(w,i.push(y));return u},u.range=function(c){return arguments.length?(r=uf.call(c),u):r.slice()},u.unknown=function(c){return arguments.length?(o=c,u):o},u.copy=function(){return b1(i,r).unknown(o)},Kf.apply(u,arguments),u}function DA(){var e=ordinal().unknown(void 0),i=e.domain,r=e.range,o=[0,1],u,c,p=!1,g=0,y=0,w=.5;delete e.unknown;function O(){var D=i().length,V=o[1]<o[0],X=o[V-0],ce=o[1-V];u=(ce-X)/Math.max(1,D-g+y*2),p&&(u=Math.floor(u)),X+=(ce-X-u*(D-g))*w,c=u*(1-g),p&&(X=Math.round(X),c=Math.round(c));var de=sequence(D).map(function(we){return X+u*we});return r(V?de.reverse():de)}return e.domain=function(D){return arguments.length?(i(D),O()):i()},e.range=function(D){return arguments.length?(o=[+D[0],+D[1]],O()):o.slice()},e.rangeRound=function(D){return o=[+D[0],+D[1]],p=!0,O()},e.bandwidth=function(){return c},e.step=function(){return u},e.round=function(D){return arguments.length?(p=!!D,O()):p},e.padding=function(D){return arguments.length?(g=Math.min(1,y=+D),O()):g},e.paddingInner=function(D){return arguments.length?(g=Math.min(1,D),O()):g},e.paddingOuter=function(D){return arguments.length?(y=+D,O()):y},e.align=function(D){return arguments.length?(w=Math.max(0,Math.min(1,D)),O()):w},e.copy=function(){return DA(i(),o).round(p).paddingInner(g).paddingOuter(y).align(w)},initRange.apply(O(),arguments)}function FA(e){var i=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return FA(i())},e}function c4(){return FA(DA.apply(null,arguments).paddingInner(1))}function f4(e,i){return(isNumberArray(i)?numberArray:BA)(e,i)}function BA(e,i){var r=i?i.length:0,o=e?Math.min(r,e.length):0,u=new Array(o),c=new Array(r),p;for(p=0;p<o;++p)u[p]=gS(e[p],i[p]);for(;p<r;++p)c[p]=i[p];return function(g){for(p=0;p<o;++p)c[p]=u[p](g);return c}}function Lk(e,i){var r=new Date;return e=+e,i=+i,function(o){return r.setTime(e*(1-o)+i*o),r}}function S1(e,i){return e=+e,i=+i,function(r){return e*(1-r)+i*r}}function Dk(e,i){var r={},o={},u;(e===null||typeof e!="object")&&(e={}),(i===null||typeof i!="object")&&(i={});for(u in i)u in e?r[u]=gS(e[u],i[u]):o[u]=i[u];return function(c){for(u in r)o[u]=r[u](c);return o}}var dS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,NA=new RegExp(dS.source,"g");function vS(e){return function(){return e}}function Hm(e){return function(i){return e(i)+""}}function Fk(e,i){var r=dS.lastIndex=NA.lastIndex=0,o,u,c,p=-1,g=[],y=[];for(e=e+"",i=i+"";(o=dS.exec(e))&&(u=NA.exec(i));)(c=u.index)>r&&(c=i.slice(r,c),g[p]?g[p]+=c:g[++p]=c),(o=o[0])===(u=u[0])?g[p]?g[p]+=u:g[++p]=u:(g[++p]=null,y.push({i:p,x:S1(o,u)})),r=NA.lastIndex;return r<i.length&&(c=i.slice(r),g[p]?g[p]+=c:g[++p]=c),g.length<2?y[0]?Hm(y[0].x):vS(i):(i=y.length,function(w){for(var O=0,D;O<i;++O)g[(D=y[O]).i]=D.x(w);return g.join("")})}function Bk(e,i){i||(i=[]);var r=e?Math.min(i.length,e.length):0,o=i.slice(),u;return function(c){for(u=0;u<r;++u)o[u]=e[u]*(1-c)+i[u]*c;return o}}function zA(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gS(e,i){var r=typeof i,o;return i==null||r==="boolean"?cS(i):(r==="number"?S1:r==="string"?(o=fi(i))?(i=o,OA):Fk:i instanceof fi?OA:i instanceof Date?Lk:zA(i)?Bk:Array.isArray(i)?BA:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?Dk:S1)(e,i)}function UA(e,i){return e=+e,i=+i,function(r){return Math.round(e*(1-r)+i*r)}}function Nk(e){return function(){return e}}function zk(e){return+e}var ZA=[0,1];function lf(e){return e}function mS(e,i){return(i-=e=+e)?function(r){return(r-e)/i}:Nk(isNaN(i)?NaN:.5)}function VA(e){var i=e[0],r=e[e.length-1],o;return i>r&&(o=i,i=r,r=o),function(u){return Math.max(i,Math.min(r,u))}}function h4(e,i,r){var o=e[0],u=e[1],c=i[0],p=i[1];return u<o?(o=mS(u,o),c=r(p,c)):(o=mS(o,u),c=r(c,p)),function(g){return c(o(g))}}function HA(e,i,r){var o=Math.min(e.length,i.length)-1,u=new Array(o),c=new Array(o),p=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),i=i.slice().reverse());++p<o;)u[p]=mS(e[p],e[p+1]),c[p]=r(i[p],i[p+1]);return function(g){var y=g1(e,g,1,o)-1;return c[y](u[y](g))}}function Sy(e,i){return i.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function yS(){var e=ZA,i=ZA,r=gS,o,u,c,p=lf,g,y,w;function O(){return g=Math.min(e.length,i.length)>2?HA:h4,y=w=null,D}function D(V){return isNaN(V=+V)?c:(y||(y=g(e.map(o),i,r)))(o(p(V)))}return D.invert=function(V){return p(u((w||(w=g(i,e.map(o),S1)))(V)))},D.domain=function(V){return arguments.length?(e=zp.call(V,zk),p===lf||(p=VA(e)),O()):e.slice()},D.range=function(V){return arguments.length?(i=uf.call(V),O()):i.slice()},D.rangeRound=function(V){return i=uf.call(V),r=UA,O()},D.clamp=function(V){return arguments.length?(p=V?VA(e):lf,D):p!==lf},D.interpolate=function(V){return arguments.length?(r=V,O()):r},D.unknown=function(V){return arguments.length?(c=V,D):c},function(V,X){return o=V,u=X,O()}}function _S(e,i){return yS()(e,i)}var Uk=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function E1(e){if(!(i=Uk.exec(e)))throw new Error("invalid format: "+e);var i;return new xS({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}E1.prototype=xS.prototype;function xS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}xS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zk(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function w1(e,i){if((r=(e=i?e.toExponential(i-1):e.toExponential()).indexOf("e"))<0)return null;var r,o=e.slice(0,r);return[o.length>1?o[0]+o.slice(2):o,+e.slice(r+1)]}function Ey(e){return e=w1(Math.abs(e)),e?e[1]:NaN}function Vk(e,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ey(i)/3)))*3-Ey(Math.abs(e)))}function Hk(e,i){return function(r,o){for(var u=r.length,c=[],p=0,g=e[0],y=0;u>0&&g>0&&(y+g+1>o&&(g=Math.max(1,o-y)),c.push(r.substring(u-=g,u+g)),!((y+=g+1)>o));)g=e[p=(p+1)%e.length];return c.reverse().join(i)}}function jk(e){return function(i){return i.replace(/[0-9]/g,function(r){return e[+r]})}}function Wk(e){e:for(var i=e.length,r=1,o=-1,u;r<i;++r)switch(e[r]){case".":o=u=r;break;case"0":o===0&&(o=r),u=r;break;default:if(!+e[r])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(u+1):e}var jA;function Gk(e,i){var r=w1(e,i);if(!r)return e+"";var o=r[0],u=r[1],c=u-(jA=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,p=o.length;return c===p?o:c>p?o+new Array(c-p+1).join("0"):c>0?o.slice(0,c)+"."+o.slice(c):"0."+new Array(1-c).join("0")+w1(e,Math.max(0,i+c-1))[0]}function WA(e,i){var r=w1(e,i);if(!r)return e+"";var o=r[0],u=r[1];return u<0?"0."+new Array(-u).join("0")+o:o.length>u+1?o.slice(0,u+1)+"."+o.slice(u+1):o+new Array(u-o.length+2).join("0")}var bS={"%":function(e,i){return(e*100).toFixed(i)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:Zk,e:function(e,i){return e.toExponential(i)},f:function(e,i){return e.toFixed(i)},g:function(e,i){return e.toPrecision(i)},o:function(e){return Math.round(e).toString(8)},p:function(e,i){return WA(e*100,i)},r:WA,s:Gk,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function SS(e){return e}var ES=Array.prototype.map,wS=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function $k(e){var i=e.grouping===void 0||e.thousands===void 0?SS:Hk(ES.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",c=e.numerals===void 0?SS:jk(ES.call(e.numerals,String)),p=e.percent===void 0?"%":e.percent+"",g=e.minus===void 0?"-":e.minus+"",y=e.nan===void 0?"NaN":e.nan+"";function w(D){D=E1(D);var V=D.fill,X=D.align,ce=D.sign,de=D.symbol,we=D.zero,je=D.width,ht=D.comma,_t=D.precision,Dt=D.trim,Yt=D.type;Yt==="n"?(ht=!0,Yt="g"):bS[Yt]||(_t===void 0&&(_t=12),Dt=!0,Yt="g"),(we||V==="0"&&X==="=")&&(we=!0,V="0",X="=");var ir=de==="$"?r:de==="#"&&/[boxX]/.test(Yt)?"0"+Yt.toLowerCase():"",sr=de==="$"?o:/[%p]/.test(Yt)?p:"",Tr=bS[Yt],Vr=/[defgprs%]/.test(Yt);_t=_t===void 0?6:/[gprs]/.test(Yt)?Math.max(1,Math.min(21,_t)):Math.max(0,Math.min(20,_t));function sn(ln){var Zn=ir,ci=sr,ki,eo,Xo;if(Yt==="c")ci=Tr(ln)+ci,ln="";else{ln=+ln;var as=ln<0||1/ln<0;if(ln=isNaN(ln)?y:Tr(Math.abs(ln),_t),Dt&&(ln=Wk(ln)),as&&+ln==0&&ce!=="+"&&(as=!1),Zn=(as?ce==="("?ce:g:ce==="-"||ce==="("?"":ce)+Zn,ci=(Yt==="s"?wS[8+jA/3]:"")+ci+(as&&ce==="("?")":""),Vr){for(ki=-1,eo=ln.length;++ki<eo;)if(Xo=ln.charCodeAt(ki),48>Xo||Xo>57){ci=(Xo===46?u+ln.slice(ki+1):ln.slice(ki))+ci,ln=ln.slice(0,ki);break}}}ht&&!we&&(ln=i(ln,1/0));var tu=Zn.length+ln.length+ci.length,lu=tu<je?new Array(je-tu+1).join(V):"";switch(ht&&we&&(ln=i(lu+ln,lu.length?je-ci.length:1/0),lu=""),X){case"<":ln=Zn+ln+ci+lu;break;case"=":ln=Zn+lu+ln+ci;break;case"^":ln=lu.slice(0,tu=lu.length>>1)+Zn+ln+ci+lu.slice(tu);break;default:ln=lu+Zn+ln+ci;break}return c(ln)}return sn.toString=function(){return D+""},sn}function O(D,V){var X=w((D=E1(D),D.type="f",D)),ce=Math.max(-8,Math.min(8,Math.floor(Ey(V)/3)))*3,de=Math.pow(10,-ce),we=wS[8+ce/3];return function(je){return X(de*je)+we}}return{format:w,formatPrefix:O}}var C1,CS,GA;Xk({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Xk(e){return C1=$k(e),CS=C1.format,GA=C1.formatPrefix,C1}function Yk(e,i){return e=Math.abs(e),i=Math.abs(i)-e,Math.max(0,Ey(i)-Ey(e))+1}function Kk(e){return Math.max(0,-Ey(Math.abs(e)))}function qk(e,i,r,o){var u=Yg(e,i,r),c;switch(o=E1(o==null?",f":o),o.type){case"s":{var p=Math.max(Math.abs(e),Math.abs(i));return o.precision==null&&!isNaN(c=Vk(u,p))&&(o.precision=c),GA(o,p)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(c=Yk(u,Math.max(Math.abs(e),Math.abs(i))))&&(o.precision=c-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(c=Kk(u))&&(o.precision=c-(o.type==="%")*2);break}}return CS(o)}function wy(e){var i=e.domain;return e.ticks=function(r){var o=i();return TA(o[0],o[o.length-1],r==null?10:r)},e.tickFormat=function(r,o){var u=i();return qk(u[0],u[u.length-1],r==null?10:r,o)},e.nice=function(r){r==null&&(r=10);var o=i(),u=0,c=o.length-1,p=o[u],g=o[c],y;return g<p&&(y=p,p=g,g=y,y=u,u=c,c=y),y=Ed(p,g,r),y>0?(p=Math.floor(p/y)*y,g=Math.ceil(g/y)*y,y=Ed(p,g,r)):y<0&&(p=Math.ceil(p*y)/y,g=Math.floor(g*y)/y,y=Ed(p,g,r)),y>0?(o[u]=Math.floor(p/y)*y,o[c]=Math.ceil(g/y)*y,i(o)):y<0&&(o[u]=Math.ceil(p*y)/y,o[c]=Math.floor(g*y)/y,i(o)),e},e}function $A(){var e=_S(lf,lf);return e.copy=function(){return Sy(e,$A())},Kf.apply(e,arguments),wy(e)}function Qk(e){var i;function r(o){return isNaN(o=+o)?i:o}return r.invert=r,r.domain=r.range=function(o){return arguments.length?(e=map.call(o,number),r):e.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Qk(e).unknown(i)},e=arguments.length?map.call(e,number):[0,1],linearish(r)}function Jk(e,i){e=e.slice();var r=0,o=e.length-1,u=e[r],c=e[o],p;return c<u&&(p=r,r=o,o=p,p=u,u=c,c=p),e[r]=i.floor(u),e[o]=i.ceil(c),e}function XA(e){return Math.log(e)}function YA(e){return Math.exp(e)}function KA(e){return-Math.log(-e)}function eL(e){return-Math.exp(-e)}function qA(e){return isFinite(e)?+("1e"+e):e<0?0:e}function QA(e){return e===10?qA:e===Math.E?Math.exp:function(i){return Math.pow(e,i)}}function tL(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(i){return Math.log(i)/e})}function jm(e){return function(i){return-e(-i)}}function rL(e){var i=e(XA,YA),r=i.domain,o=10,u,c;function p(){return u=tL(o),c=QA(o),r()[0]<0?(u=jm(u),c=jm(c),e(KA,eL)):e(XA,YA),i}return i.base=function(g){return arguments.length?(o=+g,p()):o},i.domain=function(g){return arguments.length?(r(g),p()):r()},i.ticks=function(g){var y=r(),w=y[0],O=y[y.length-1],D;(D=O<w)&&(V=w,w=O,O=V);var V=u(w),X=u(O),ce,de,we,je=g==null?10:+g,ht=[];if(!(o%1)&&X-V<je){if(V=Math.round(V)-1,X=Math.round(X)+1,w>0){for(;V<X;++V)for(de=1,ce=c(V);de<o;++de)if(we=ce*de,!(we<w)){if(we>O)break;ht.push(we)}}else for(;V<X;++V)for(de=o-1,ce=c(V);de>=1;--de)if(we=ce*de,!(we<w)){if(we>O)break;ht.push(we)}}else ht=TA(V,X,Math.min(X-V,je)).map(c);return D?ht.reverse():ht},i.tickFormat=function(g,y){if(y==null&&(y=o===10?".0e":","),typeof y!="function"&&(y=CS(y)),g===1/0)return y;g==null&&(g=10);var w=Math.max(1,o*g/i.ticks().length);return function(O){var D=O/c(Math.round(u(O)));return D*o<o-.5&&(D*=o),D<=w?y(O):""}},i.nice=function(){return r(Jk(r(),{floor:function(g){return c(Math.floor(u(g)))},ceil:function(g){return c(Math.ceil(u(g)))}}))},i}function JA(){var e=rL(yS()).domain([1,10]);return e.copy=function(){return Sy(e,JA()).base(e.base())},Kf.apply(e,arguments),e}function eT(e){return function(i){return Math.sign(i)*Math.log1p(Math.abs(i/e))}}function AS(e){return function(i){return Math.sign(i)*Math.expm1(Math.abs(i))*e}}function nL(e){var i=1,r=e(eT(i),AS(i));return r.constant=function(o){return arguments.length?e(eT(i=+o),AS(i)):i},linearish(r)}function A1(){var e=nL(transformer());return e.copy=function(){return copy(e,A1()).constant(e.constant())},initRange.apply(e,arguments)}function TS(e){return function(i){return i<0?-Math.pow(-i,e):Math.pow(i,e)}}function MS(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function iL(e){return e<0?-e*e:e*e}function aL(e){var i=e(lf,lf),r=1;function o(){return r===1?e(lf,lf):r===.5?e(MS,iL):e(TS(r),TS(1/r))}return i.exponent=function(u){return arguments.length?(r=+u,o()):r},wy(i)}function Qg(){var e=aL(yS());return e.copy=function(){return Sy(e,Qg()).exponent(e.exponent())},Kf.apply(e,arguments),e}function oL(){return Qg.apply(null,arguments).exponent(.5)}function RS(){var e=[],i=[],r=[],o;function u(){var p=0,g=Math.max(1,i.length);for(r=new Array(g-1);++p<g;)r[p-1]=Tk(e,p/g);return c}function c(p){return isNaN(p=+p)?o:i[g1(r,p)]}return c.invertExtent=function(p){var g=i.indexOf(p);return g<0?[NaN,NaN]:[g>0?r[g-1]:e[0],g<r.length?r[g]:e[e.length-1]]},c.domain=function(p){if(!arguments.length)return e.slice();e=[];for(var g=0,y=p.length,w;g<y;++g)w=p[g],w!=null&&!isNaN(w=+w)&&e.push(w);return e.sort(aS),u()},c.range=function(p){return arguments.length?(i=uf.call(p),u()):i.slice()},c.unknown=function(p){return arguments.length?(o=p,c):o},c.quantiles=function(){return r.slice()},c.copy=function(){return RS().domain(e).range(i).unknown(o)},Kf.apply(c,arguments)}function IS(){var e=0,i=1,r=1,o=[.5],u=[0,1],c;function p(y){return y<=y?u[g1(o,y,0,r)]:c}function g(){var y=-1;for(o=new Array(r);++y<r;)o[y]=((y+1)*i-(y-r)*e)/(r+1);return p}return p.domain=function(y){return arguments.length?(e=+y[0],i=+y[1],g()):[e,i]},p.range=function(y){return arguments.length?(r=(u=uf.call(y)).length-1,g()):u.slice()},p.invertExtent=function(y){var w=u.indexOf(y);return w<0?[NaN,NaN]:w<1?[e,o[0]]:w>=r?[o[r-1],i]:[o[w-1],o[w]]},p.unknown=function(y){return arguments.length&&(c=y),p},p.thresholds=function(){return o.slice()},p.copy=function(){return IS().domain([e,i]).range(u).unknown(c)},Kf.apply(wy(p),arguments)}function PS(){var e=[.5],i=[0,1],r,o=1;function u(c){return c<=c?i[g1(e,c,0,o)]:r}return u.domain=function(c){return arguments.length?(e=uf.call(c),o=Math.min(e.length,i.length-1),u):e.slice()},u.range=function(c){return arguments.length?(i=uf.call(c),o=Math.min(e.length,i.length-1),u):i.slice()},u.invertExtent=function(c){var p=i.indexOf(c);return[e[p-1],e[p]]},u.unknown=function(c){return arguments.length?(r=c,u):r},u.copy=function(){return PS().domain(e).range(i).unknown(r)},Kf.apply(u,arguments)}var Wm=new Date,T1=new Date;function Af(e,i,r,o){function u(c){return e(c=arguments.length===0?new Date:new Date(+c)),c}return u.floor=function(c){return e(c=new Date(+c)),c},u.ceil=function(c){return e(c=new Date(c-1)),i(c,1),e(c),c},u.round=function(c){var p=u(c),g=u.ceil(c);return c-p<g-c?p:g},u.offset=function(c,p){return i(c=new Date(+c),p==null?1:Math.floor(p)),c},u.range=function(c,p,g){var y=[],w;if(c=u.ceil(c),g=g==null?1:Math.floor(g),!(c<p)||!(g>0))return y;do y.push(w=new Date(+c)),i(c,g),e(c);while(w<c&&c<p);return y},u.filter=function(c){return Af(function(p){if(p>=p)for(;e(p),!c(p);)p.setTime(p-1)},function(p,g){if(p>=p)if(g<0)for(;++g<=0;)for(;i(p,-1),!c(p););else for(;--g>=0;)for(;i(p,1),!c(p););})},r&&(u.count=function(c,p){return Wm.setTime(+c),T1.setTime(+p),e(Wm),e(T1),Math.floor(r(Wm,T1))},u.every=function(c){return c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?u.filter(o?function(p){return o(p)%c===0}:function(p){return u.count(0,p)%c===0}):u}),u}var OS=Af(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,i){e.setFullYear(e.getFullYear()+i)},function(e,i){return i.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});OS.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Af(function(i){i.setFullYear(Math.floor(i.getFullYear()/e)*e),i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,r){i.setFullYear(i.getFullYear()+r*e)})};var fv=OS,Gm=OS.range,Jg=Af(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,i){e.setMonth(e.getMonth()+i)},function(e,i){return i.getMonth()-e.getMonth()+(i.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),sL=Jg,uL=Jg.range,Cy=1e3,em=6e4,kS=36e5,tT=864e5,rT=6048e5;function tm(e){return Af(function(i){i.setDate(i.getDate()-(i.getDay()+7-e)%7),i.setHours(0,0,0,0)},function(i,r){i.setDate(i.getDate()+r*7)},function(i,r){return(r-i-(r.getTimezoneOffset()-i.getTimezoneOffset())*em)/rT})}var LS=tm(0),M1=tm(1),nT=tm(2),lL=tm(3),$m=tm(4),cL=tm(5),fL=tm(6),p4=LS.range,d4=M1.range,v4=nT.range,g4=lL.range,m4=$m.range,y4=cL.range,_4=fL.range,iT=Af(function(e){e.setHours(0,0,0,0)},function(e,i){e.setDate(e.getDate()+i)},function(e,i){return(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*em)/tT},function(e){return e.getDate()-1}),DS=iT,hL=iT.range,aT=Af(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cy-e.getMinutes()*em)},function(e,i){e.setTime(+e+i*kS)},function(e,i){return(i-e)/kS},function(e){return e.getHours()}),oT=aT,Ay=aT.range,sT=Af(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cy)},function(e,i){e.setTime(+e+i*em)},function(e,i){return(i-e)/em},function(e){return e.getMinutes()}),pL=sT,x4=sT.range,uT=Af(function(e){e.setTime(e-e.getMilliseconds())},function(e,i){e.setTime(+e+i*Cy)},function(e,i){return(i-e)/Cy},function(e){return e.getUTCSeconds()}),lT=uT,Ty=uT.range,My=Af(function(){},function(e,i){e.setTime(+e+i)},function(e,i){return i-e});My.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Af(function(i){i.setTime(Math.floor(i/e)*e)},function(i,r){i.setTime(+i+r*e)},function(i,r){return(r-i)/e}):My};var cT=My,fT=My.range;function hv(e){return Af(function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-e)%7),i.setUTCHours(0,0,0,0)},function(i,r){i.setUTCDate(i.getUTCDate()+r*7)},function(i,r){return(r-i)/rT})}var R1=hv(0),Xm=hv(1),dL=hv(2),vL=hv(3),rm=hv(4),hT=hv(5),gL=hv(6),b4=R1.range,S4=Xm.range,E4=dL.range,w4=vL.range,C4=rm.range,A4=hT.range,T4=gL.range,pT=Af(function(e){e.setUTCHours(0,0,0,0)},function(e,i){e.setUTCDate(e.getUTCDate()+i)},function(e,i){return(i-e)/tT},function(e){return e.getUTCDate()-1}),FS=pT,mL=pT.range,dT=Af(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i)},function(e,i){return i.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});dT.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Af(function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/e)*e),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,r){i.setUTCFullYear(i.getUTCFullYear()+r*e)})};var Wc=dT,tp=dT.range;function I1(e){if(0<=e.y&&e.y<100){var i=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return i.setFullYear(e.y),i}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function BS(e){if(0<=e.y&&e.y<100){var i=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return i.setUTCFullYear(e.y),i}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ry(e,i,r){return{y:e,m:i,d:r,H:0,M:0,S:0,L:0}}function Ym(e){var i=e.dateTime,r=e.date,o=e.time,u=e.periods,c=e.days,p=e.shortDays,g=e.months,y=e.shortMonths,w=Iy(u),O=Km(u),D=Iy(c),V=Km(c),X=Iy(p),ce=Km(p),de=Iy(g),we=Km(g),je=Iy(y),ht=Km(y),_t={a:as,A:tu,b:lu,B:ff,c:null,d:ST,e:ST,f:LL,g:HL,G:AT,H:OL,I:R4,j:kL,L:ET,m:DL,M:FL,p:VR,q:Ax,Q:PT,s:OT,S:BL,u:NL,U:zL,V:ZL,w:wT,W:VL,x:null,X:null,y:CT,Y:jL,Z:TT,"%":uD},Dt={a:gB,A:mB,b:Cl,B:up,c:null,d:MT,e:MT,f:XL,g:iD,G:oD,H:WL,I:GL,j:$L,L:RT,m:YL,M:KL,p:HR,q:jR,Q:PT,s:OT,S:qL,u:QL,U:IT,V:eD,w:tD,W:rD,x:null,X:null,y:nD,Y:aD,Z:sD,"%":uD},Yt={a:sn,A:ln,b:Zn,B:ci,c:ki,d:xT,e:xT,f:M4,g:_T,G:yT,H:bT,I:bT,j:CL,L:ML,m:wL,M:AL,p:Vr,q:EL,Q:IL,s:PL,S:TL,u:yL,U:_L,V:xL,w:mT,W:bL,x:eo,X:Xo,y:_T,Y:yT,Z:SL,"%":RL};_t.x=ir(r,_t),_t.X=ir(o,_t),_t.c=ir(i,_t),Dt.x=ir(r,Dt),Dt.X=ir(o,Dt),Dt.c=ir(i,Dt);function ir(Ba,vs){return function(Ys){var Ui=[],lp=-1,tl=0,Hp=Ba.length,jp,a_,l8;for(Ys instanceof Date||(Ys=new Date(+Ys));++lp<Hp;)Ba.charCodeAt(lp)===37&&(Ui.push(Ba.slice(tl,lp)),(a_=$v[jp=Ba.charAt(++lp)])!=null?jp=Ba.charAt(++lp):a_=jp==="e"?" ":"0",(l8=vs[jp])&&(jp=l8(Ys,a_)),Ui.push(jp),tl=lp+1);return Ui.push(Ba.slice(tl,lp)),Ui.join("")}}function sr(Ba,vs){return function(Ys){var Ui=Ry(1900,void 0,1),lp=Tr(Ui,Ba,Ys+="",0),tl,Hp;if(lp!=Ys.length)return null;if("Q"in Ui)return new Date(Ui.Q);if("s"in Ui)return new Date(Ui.s*1e3+("L"in Ui?Ui.L:0));if(vs&&!("Z"in Ui)&&(Ui.Z=0),"p"in Ui&&(Ui.H=Ui.H%12+Ui.p*12),Ui.m===void 0&&(Ui.m="q"in Ui?Ui.q:0),"V"in Ui){if(Ui.V<1||Ui.V>53)return null;"w"in Ui||(Ui.w=1),"Z"in Ui?(tl=BS(Ry(Ui.y,0,1)),Hp=tl.getUTCDay(),tl=Hp>4||Hp===0?Xm.ceil(tl):Xm(tl),tl=FS.offset(tl,(Ui.V-1)*7),Ui.y=tl.getUTCFullYear(),Ui.m=tl.getUTCMonth(),Ui.d=tl.getUTCDate()+(Ui.w+6)%7):(tl=I1(Ry(Ui.y,0,1)),Hp=tl.getDay(),tl=Hp>4||Hp===0?M1.ceil(tl):M1(tl),tl=DS.offset(tl,(Ui.V-1)*7),Ui.y=tl.getFullYear(),Ui.m=tl.getMonth(),Ui.d=tl.getDate()+(Ui.w+6)%7)}else("W"in Ui||"U"in Ui)&&("w"in Ui||(Ui.w="u"in Ui?Ui.u%7:"W"in Ui?1:0),Hp="Z"in Ui?BS(Ry(Ui.y,0,1)).getUTCDay():I1(Ry(Ui.y,0,1)).getDay(),Ui.m=0,Ui.d="W"in Ui?(Ui.w+6)%7+Ui.W*7-(Hp+5)%7:Ui.w+Ui.U*7-(Hp+6)%7);return"Z"in Ui?(Ui.H+=Ui.Z/100|0,Ui.M+=Ui.Z%100,BS(Ui)):I1(Ui)}}function Tr(Ba,vs,Ys,Ui){for(var lp=0,tl=vs.length,Hp=Ys.length,jp,a_;lp<tl;){if(Ui>=Hp)return-1;if(jp=vs.charCodeAt(lp++),jp===37){if(jp=vs.charAt(lp++),a_=Yt[jp in $v?vs.charAt(lp++):jp],!a_||(Ui=a_(Ba,Ys,Ui))<0)return-1}else if(jp!=Ys.charCodeAt(Ui++))return-1}return Ui}function Vr(Ba,vs,Ys){var Ui=w.exec(vs.slice(Ys));return Ui?(Ba.p=O[Ui[0].toLowerCase()],Ys+Ui[0].length):-1}function sn(Ba,vs,Ys){var Ui=X.exec(vs.slice(Ys));return Ui?(Ba.w=ce[Ui[0].toLowerCase()],Ys+Ui[0].length):-1}function ln(Ba,vs,Ys){var Ui=D.exec(vs.slice(Ys));return Ui?(Ba.w=V[Ui[0].toLowerCase()],Ys+Ui[0].length):-1}function Zn(Ba,vs,Ys){var Ui=je.exec(vs.slice(Ys));return Ui?(Ba.m=ht[Ui[0].toLowerCase()],Ys+Ui[0].length):-1}function ci(Ba,vs,Ys){var Ui=de.exec(vs.slice(Ys));return Ui?(Ba.m=we[Ui[0].toLowerCase()],Ys+Ui[0].length):-1}function ki(Ba,vs,Ys){return Tr(Ba,i,vs,Ys)}function eo(Ba,vs,Ys){return Tr(Ba,r,vs,Ys)}function Xo(Ba,vs,Ys){return Tr(Ba,o,vs,Ys)}function as(Ba){return p[Ba.getDay()]}function tu(Ba){return c[Ba.getDay()]}function lu(Ba){return y[Ba.getMonth()]}function ff(Ba){return g[Ba.getMonth()]}function VR(Ba){return u[+(Ba.getHours()>=12)]}function Ax(Ba){return 1+~~(Ba.getMonth()/3)}function gB(Ba){return p[Ba.getUTCDay()]}function mB(Ba){return c[Ba.getUTCDay()]}function Cl(Ba){return y[Ba.getUTCMonth()]}function up(Ba){return g[Ba.getUTCMonth()]}function HR(Ba){return u[+(Ba.getUTCHours()>=12)]}function jR(Ba){return 1+~~(Ba.getUTCMonth()/3)}return{format:function(Ba){var vs=ir(Ba+="",_t);return vs.toString=function(){return Ba},vs},parse:function(Ba){var vs=sr(Ba+="",!1);return vs.toString=function(){return Ba},vs},utcFormat:function(Ba){var vs=ir(Ba+="",Dt);return vs.toString=function(){return Ba},vs},utcParse:function(Ba){var vs=sr(Ba+="",!0);return vs.toString=function(){return Ba},vs}}}var $v={"-":"",_:" ",0:"0"},Kl=/^\s*\d+/,NS=/^%/,vT=/[\\^$*+?|[\]().{}]/g;function Cs(e,i,r){var o=e<0?"-":"",u=(o?-e:e)+"",c=u.length;return o+(c<r?new Array(r-c+1).join(i)+u:u)}function gT(e){return e.replace(vT,"\\$&")}function Iy(e){return new RegExp("^(?:"+e.map(gT).join("|")+")","i")}function Km(e){for(var i={},r=-1,o=e.length;++r<o;)i[e[r].toLowerCase()]=r;return i}function mT(e,i,r){var o=Kl.exec(i.slice(r,r+1));return o?(e.w=+o[0],r+o[0].length):-1}function yL(e,i,r){var o=Kl.exec(i.slice(r,r+1));return o?(e.u=+o[0],r+o[0].length):-1}function _L(e,i,r){var o=Kl.exec(i.slice(r,r+2));return o?(e.U=+o[0],r+o[0].length):-1}function xL(e,i,r){var o=Kl.exec(i.slice(r,r+2));return o?(e.V=+o[0],r+o[0].length):-1}function bL(e,i,r){var o=Kl.exec(i.slice(r,r+2));return o?(e.W=+o[0],r+o[0].length):-1}function yT(e,i,r){var o=Kl.exec(i.slice(r,r+4));return o?(e.y=+o[0],r+o[0].length):-1}function _T(e,i,r){var o=Kl.exec(i.slice(r,r+2));return o?(e.y=+o[0]+(+o[0]>68?1900:2e3),r+o[0].length):-1}function SL(e,i,r){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(r,r+6));return o?(e.Z=o[1]?0:-(o[2]+(o[3]||"00")),r+o[0].length):-1}function EL(e,i,r){var o=Kl.exec(i.slice(r,r+1));return o?(e.q=o[0]*3-3,r+o[0].length):-1}function wL(e,i,r){var o=Kl.exec(i.slice(r,r+2));return o?(e.m=o[0]-1,r+o[0].length):-1}function xT(e,i,r){var o=Kl.exec(i.slice(r,r+2));return o?(e.d=+o[0],r+o[0].length):-1}function CL(e,i,r){var o=Kl.exec(i.slice(r,r+3));return o?(e.m=0,e.d=+o[0],r+o[0].length):-1}function bT(e,i,r){var o=Kl.exec(i.slice(r,r+2));return o?(e.H=+o[0],r+o[0].length):-1}function AL(e,i,r){var o=Kl.exec(i.slice(r,r+2));return o?(e.M=+o[0],r+o[0].length):-1}function TL(e,i,r){var o=Kl.exec(i.slice(r,r+2));return o?(e.S=+o[0],r+o[0].length):-1}function ML(e,i,r){var o=Kl.exec(i.slice(r,r+3));return o?(e.L=+o[0],r+o[0].length):-1}function M4(e,i,r){var o=Kl.exec(i.slice(r,r+6));return o?(e.L=Math.floor(o[0]/1e3),r+o[0].length):-1}function RL(e,i,r){var o=NS.exec(i.slice(r,r+1));return o?r+o[0].length:-1}function IL(e,i,r){var o=Kl.exec(i.slice(r));return o?(e.Q=+o[0],r+o[0].length):-1}function PL(e,i,r){var o=Kl.exec(i.slice(r));return o?(e.s=+o[0],r+o[0].length):-1}function ST(e,i){return Cs(e.getDate(),i,2)}function OL(e,i){return Cs(e.getHours(),i,2)}function R4(e,i){return Cs(e.getHours()%12||12,i,2)}function kL(e,i){return Cs(1+DS.count(fv(e),e),i,3)}function ET(e,i){return Cs(e.getMilliseconds(),i,3)}function LL(e,i){return ET(e,i)+"000"}function DL(e,i){return Cs(e.getMonth()+1,i,2)}function FL(e,i){return Cs(e.getMinutes(),i,2)}function BL(e,i){return Cs(e.getSeconds(),i,2)}function NL(e){var i=e.getDay();return i===0?7:i}function zL(e,i){return Cs(LS.count(fv(e)-1,e),i,2)}function UL(e){var i=e.getDay();return i>=4||i===0?$m(e):$m.ceil(e)}function ZL(e,i){return e=UL(e),Cs($m.count(fv(e),e)+(fv(e).getDay()===4),i,2)}function wT(e){return e.getDay()}function VL(e,i){return Cs(M1.count(fv(e)-1,e),i,2)}function CT(e,i){return Cs(e.getFullYear()%100,i,2)}function HL(e,i){return e=UL(e),Cs(e.getFullYear()%100,i,2)}function jL(e,i){return Cs(e.getFullYear()%1e4,i,4)}function AT(e,i){var r=e.getDay();return e=r>=4||r===0?$m(e):$m.ceil(e),Cs(e.getFullYear()%1e4,i,4)}function TT(e){var i=e.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+Cs(i/60|0,"0",2)+Cs(i%60,"0",2)}function MT(e,i){return Cs(e.getUTCDate(),i,2)}function WL(e,i){return Cs(e.getUTCHours(),i,2)}function GL(e,i){return Cs(e.getUTCHours()%12||12,i,2)}function $L(e,i){return Cs(1+FS.count(Wc(e),e),i,3)}function RT(e,i){return Cs(e.getUTCMilliseconds(),i,3)}function XL(e,i){return RT(e,i)+"000"}function YL(e,i){return Cs(e.getUTCMonth()+1,i,2)}function KL(e,i){return Cs(e.getUTCMinutes(),i,2)}function qL(e,i){return Cs(e.getUTCSeconds(),i,2)}function QL(e){var i=e.getUTCDay();return i===0?7:i}function IT(e,i){return Cs(R1.count(Wc(e)-1,e),i,2)}function JL(e){var i=e.getUTCDay();return i>=4||i===0?rm(e):rm.ceil(e)}function eD(e,i){return e=JL(e),Cs(rm.count(Wc(e),e)+(Wc(e).getUTCDay()===4),i,2)}function tD(e){return e.getUTCDay()}function rD(e,i){return Cs(Xm.count(Wc(e)-1,e),i,2)}function nD(e,i){return Cs(e.getUTCFullYear()%100,i,2)}function iD(e,i){return e=JL(e),Cs(e.getUTCFullYear()%100,i,2)}function aD(e,i){return Cs(e.getUTCFullYear()%1e4,i,4)}function oD(e,i){var r=e.getUTCDay();return e=r>=4||r===0?rm(e):rm.ceil(e),Cs(e.getUTCFullYear()%1e4,i,4)}function sD(){return"+0000"}function uD(){return"%"}function PT(e){return+e}function OT(e){return Math.floor(+e/1e3)}var qm,zS,lD,cD,fD;hD({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hD(e){return qm=Ym(e),zS=qm.format,lD=qm.parse,cD=qm.utcFormat,fD=qm.utcParse,qm}var Py=1e3,P1=Py*60,Oy=P1*60,ky=Oy*24,pD=ky*7,kT=ky*30,US=ky*365;function dD(e){return new Date(e)}function vD(e){return e instanceof Date?+e:+new Date(+e)}function LT(e,i,r,o,u,c,p,g,y){var w=_S(lf,lf),O=w.invert,D=w.domain,V=y(".%L"),X=y(":%S"),ce=y("%I:%M"),de=y("%I %p"),we=y("%a %d"),je=y("%b %d"),ht=y("%B"),_t=y("%Y"),Dt=[[p,1,Py],[p,5,5*Py],[p,15,15*Py],[p,30,30*Py],[c,1,P1],[c,5,5*P1],[c,15,15*P1],[c,30,30*P1],[u,1,Oy],[u,3,3*Oy],[u,6,6*Oy],[u,12,12*Oy],[o,1,ky],[o,2,2*ky],[r,1,pD],[i,1,kT],[i,3,3*kT],[e,1,US]];function Yt(sr){return(p(sr)<sr?V:c(sr)<sr?X:u(sr)<sr?ce:o(sr)<sr?de:i(sr)<sr?r(sr)<sr?we:je:e(sr)<sr?ht:_t)(sr)}function ir(sr,Tr,Vr,sn){if(sr==null&&(sr=10),typeof sr=="number"){var ln=Math.abs(Vr-Tr)/sr,Zn=Zm(function(ci){return ci[2]}).right(Dt,ln);Zn===Dt.length?(sn=Yg(Tr/US,Vr/US,sr),sr=e):Zn?(Zn=Dt[ln/Dt[Zn-1][2]<Dt[Zn][2]/ln?Zn-1:Zn],sn=Zn[1],sr=Zn[0]):(sn=Math.max(Yg(Tr,Vr,sr),1),sr=g)}return sn==null?sr:sr.every(sn)}return w.invert=function(sr){return new Date(O(sr))},w.domain=function(sr){return arguments.length?D(zp.call(sr,vD)):D().map(dD)},w.ticks=function(sr,Tr){var Vr=D(),sn=Vr[0],ln=Vr[Vr.length-1],Zn=ln<sn,ci;return Zn&&(ci=sn,sn=ln,ln=ci),ci=ir(sr,sn,ln,Tr),ci=ci?ci.range(sn,ln+1):[],Zn?ci.reverse():ci},w.tickFormat=function(sr,Tr){return Tr==null?Yt:y(Tr)},w.nice=function(sr,Tr){var Vr=D();return(sr=ir(sr,Vr[0],Vr[Vr.length-1],Tr))?D(Jk(Vr,sr)):w},w.copy=function(){return Sy(w,LT(e,i,r,o,u,c,p,g,y))},w}function I4(){return Kf.apply(LT(fv,sL,LS,DS,oT,pL,lT,cT,zS).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gD(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ly(){var e=0,i=1,r,o,u,c,p=lf,g=!1,y;function w(O){return isNaN(O=+O)?y:p(u===0?.5:(O=(c(O)-r)*u,g?Math.max(0,Math.min(1,O)):O))}return w.domain=function(O){return arguments.length?(r=c(e=+O[0]),o=c(i=+O[1]),u=r===o?0:1/(o-r),w):[e,i]},w.clamp=function(O){return arguments.length?(g=!!O,w):g},w.interpolator=function(O){return arguments.length?(p=O,w):p},w.unknown=function(O){return arguments.length?(y=O,w):y},function(O){return c=O,r=O(e),o=O(i),u=r===o?0:1/(o-r),w}}function Qm(e,i){return i.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Dy(){var e=wy(Ly()(lf));return e.copy=function(){return Qm(e,Dy())},pS.apply(e,arguments)}function O1(){var e=loggish(Ly()).domain([1,10]);return e.copy=function(){return Qm(e,O1()).base(e.base())},initInterpolator.apply(e,arguments)}function mD(){var e=symlogish(Ly());return e.copy=function(){return Qm(e,mD()).constant(e.constant())},initInterpolator.apply(e,arguments)}function DT(){var e=powish(Ly());return e.copy=function(){return Qm(e,DT()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function P4(){return DT.apply(null,arguments).exponent(.5)}function yD(){var e=[],i=identity;function r(o){if(!isNaN(o=+o))return i((bisect(e,o)-1)/(e.length-1))}return r.domain=function(o){if(!arguments.length)return e.slice();e=[];for(var u=0,c=o.length,p;u<c;++u)p=o[u],p!=null&&!isNaN(p=+p)&&e.push(p);return e.sort(ascending),r},r.interpolator=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return yD(i).domain(e)},initInterpolator.apply(r,arguments)}function k1(){var e=0,i=.5,r=1,o,u,c,p,g,y=lf,w,O=!1,D;function V(X){return isNaN(X=+X)?D:(X=.5+((X=+w(X))-u)*(X<u?p:g),y(O?Math.max(0,Math.min(1,X)):X))}return V.domain=function(X){return arguments.length?(o=w(e=+X[0]),u=w(i=+X[1]),c=w(r=+X[2]),p=o===u?0:.5/(u-o),g=u===c?0:.5/(c-u),V):[e,i,r]},V.clamp=function(X){return arguments.length?(O=!!X,V):O},V.interpolator=function(X){return arguments.length?(y=X,V):y},V.unknown=function(X){return arguments.length?(D=X,V):D},function(X){return w=X,o=X(e),u=X(i),c=X(r),p=o===u?0:.5/(u-o),g=u===c?0:.5/(c-u),V}}function FT(){var e=wy(k1()(lf));return e.copy=function(){return Qm(e,FT())},pS.apply(e,arguments)}function ZS(){var e=loggish(k1()).domain([.1,1,10]);return e.copy=function(){return copy(e,ZS()).base(e.base())},initInterpolator.apply(e,arguments)}function _D(){var e=symlogish(k1());return e.copy=function(){return copy(e,_D()).constant(e.constant())},initInterpolator.apply(e,arguments)}function Fy(){var e=powish(k1());return e.copy=function(){return copy(e,Fy()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function BT(){return Fy.apply(null,arguments).exponent(.5)}function L1(e){var i,r=[];function o(u){return u==null?i:u}return o.invert=o,o.domain=o.range=function(u){return u?(r=u,u):r},o.unknown=function(u){return u?(i=u,u):i},o.copy=function(){return L1(e).unknown(i)},o}var Ch,VS,HS,Jm=Ta.isNil,jS=Ta.isString,xD=Ta.uniq,bD=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,SD=(Ch={},(0,Ne.Z)(Ch,Hs.LINEAR,$A),(0,Ne.Z)(Ch,Hs.POWER,Qg),(0,Ne.Z)(Ch,Hs.LOG,JA),(0,Ne.Z)(Ch,Hs.IDENTITY,L1),(0,Ne.Z)(Ch,Hs.SEQUENTIAL,Dy),(0,Ne.Z)(Ch,Hs.TIME,I4),(0,Ne.Z)(Ch,Hs.QUANTILE,RS),(0,Ne.Z)(Ch,Hs.QUANTIZE,IS),(0,Ne.Z)(Ch,Hs.THRESHOLD,PS),(0,Ne.Z)(Ch,Hs.CAT,b1),(0,Ne.Z)(Ch,Hs.DIVERGING,FT),Ch),NT=(VS=(0,It.b2)(),VS(HS=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"scaleOptions",{})}return(0,st.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("FeatureScalePlugin",(0,Sn.Z)(nr().mark(function p(){var g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(r.log(Pl.ScaleInitStart,$o.INIT),u.scaleOptions=r.getScaleOptions(),y=c.getLayerStyleAttributes(),w=(g=r.getSource())===null||g===void 0?void 0:g.data.dataArray,!(Array.isArray(w)&&w.length===0)){D.next=8;break}return D.abrupt("return");case 8:u.caculateScalesForAttributes(y||[],w);case 9:r.log(Pl.ScaleInitEnd,$o.INIT);case 10:case"end":return D.stop()}},p)}))),r.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var p=(0,Sn.Z)(nr().mark(function g(y){var w,O;return nr().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(y){V.next=2;break}return V.abrupt("return",y);case 2:if(r.log(Pl.ScaleInitStart,$o.UPDATE),u.scaleOptions=r.getScaleOptions(),w=c.getLayerStyleAttributes(),O=r.getSource().data.dataArray,!(Array.isArray(O)&&O.length===0)){V.next=8;break}return V.abrupt("return",!0);case 8:return u.caculateScalesForAttributes(w||[],O),r.log(Pl.ScaleInitEnd,$o.UPDATE),r.layerModelNeedUpdate=!0,V.abrupt("return",!0);case 12:case"end":return V.stop()}},g)}));return function(g){return p.apply(this,arguments)}}()),r.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!r.layerModelNeedUpdate){u.scaleOptions=r.getScaleOptions();var p=c.getLayerStyleAttributes(),g=r.getSource().data.dataArray;if(!(Array.isArray(g)&&g.length===0)&&p){var y=p.filter(function(w){return w.needRescale});y.length&&u.caculateScalesForAttributes(y,g)}}})}},{key:"isNumber",value:function(r){return!isNaN(parseFloat(r))&&isFinite(r)}},{key:"caculateScalesForAttributes",value:function(r,o){var u=this;r.forEach(function(c){if(c.scale){var p=c.scale,g=c.scale.field;p.names=u.parseFields(Jm(g)?[]:g);var y=[];p.names.forEach(function(w){var O;y.push(u.createScale(w,c.name,(O=c.scale)===null||O===void 0?void 0:O.values,o))}),y.some(function(w){return w.type===Om.VARIABLE})?(p.type=Om.VARIABLE,y.forEach(function(w){if(!p.callback&&p.values!=="text"){var O;switch((O=w.option)===null||O===void 0?void 0:O.type){case Hs.LOG:case Hs.LINEAR:case Hs.POWER:if(p.values&&p.values.length>2){var D=w.scale.ticks(p.values.length);w.scale.domain(D)}p.values?w.scale.range(p.values):w.scale.range(w.option.domain);break;case Hs.QUANTILE:case Hs.QUANTIZE:case Hs.THRESHOLD:w.scale.range(p.values);break;case Hs.IDENTITY:break;case Hs.CAT:p.values?w.scale.range(p.values):w.scale.range(w.option.domain);break;case Hs.DIVERGING:case Hs.SEQUENTIAL:w.scale.interpolator(Ik(p.values));break}}if(p.values==="text"){var V;w.scale.range((V=w.option)===null||V===void 0?void 0:V.domain)}})):(p.type=Om.CONSTANT,p.defaultValues=y.map(function(w,O){return w.scale(p.names[O])})),p.scalers=y.map(function(w){return{field:w.field,func:w.scale,option:w.option}}),c.needRescale=!1}})}},{key:"parseFields",value:function(r){return Array.isArray(r)?r:jS(r)?r.split("*"):[r]}},{key:"createScale",value:function(r,o,u,c){var p,g,y=this.scaleOptions[o]&&((p=this.scaleOptions[o])===null||p===void 0?void 0:p.field)===r?this.scaleOptions[o]:this.scaleOptions[r],w={field:r,scale:void 0,type:Om.VARIABLE,option:y};if(!c||!c.length)return y&&y.type?w.scale=this.createDefaultScale(y):(w.scale=b1([r]),w.type=Om.CONSTANT),w;var O=(g=c.find(function(X){return!Jm(X[r])}))===null||g===void 0?void 0:g[r];if(this.isNumber(r)||Jm(O)&&!y)w.scale=b1([r]),w.type=Om.CONSTANT;else{var D=y&&y.type||this.getDefaultType(O);u==="text"&&(D=Hs.CAT),u===void 0&&(D=Hs.IDENTITY);var V=this.createScaleConfig(D,r,y,c);w.scale=this.createDefaultScale(V),w.option=V}return w}},{key:"getDefaultType",value:function(r){var o=Hs.LINEAR;return typeof r=="string"&&(o=bD.test(r)?Hs.TIME:Hs.CAT),o}},{key:"createScaleConfig",value:function(r,o,u,c){var p={type:r},g=[];if(r===Hs.QUANTILE){var y=new Map;c==null||c.forEach(function(D){y.set(D._id,D[o])}),g=Array.from(y.values())}else g=(c==null?void 0:c.map(function(D){return D[o]}))||[];if(u!=null&&u.domain)p.domain=u==null?void 0:u.domain;else if(r===Hs.CAT||r===Hs.IDENTITY)p.domain=xD(g);else if(r===Hs.QUANTILE)p.domain=g;else if(r===Hs.DIVERGING){var w=sS(g),O=(u==null?void 0:u.neutral)!==void 0?u==null?void 0:u.neutral:(w[0]+w[1])/2;p.domain=[w[0],O,w[1]]}else p.domain=sS(g);return(0,ne.Z)((0,ne.Z)({},p),u)}},{key:"createDefaultScale",value:function(r){var o=r.type,u=r.domain,c=r.unknown,p=r.clamp,g=r.nice,y=SD[o]();return u&&y.domain&&y.domain(u),c&&y.unknown(c),p!==void 0&&y.clamp&&y.clamp(p),g!==void 0&&y.nice&&y.nice(g),y}}]),e}())||HS),WS,zT,ED=(WS=(0,It.b2)(),WS(zT=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){var o=r.animateStatus;o&&r.models.forEach(function(u){u.addUniforms((0,ne.Z)({},r.layerModel.getAnimateUniforms()))})})}}]),e}())||zT),UT,ZT,wD=(UT=(0,It.b2)(),UT(ZT=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"apply",value:function(r){r.hooks.afterInit.tap("LayerMaskPlugin",function(){var o=r.getLayerConfig(),u=o.maskLayers,c=o.enableMask;if(!r.tileLayer&&u&&u.length>0){var p;(p=r.masks).push.apply(p,(0,In.Z)(u)),r.updateLayerConfig({mask:c})}})}}]),e}())||ZT),CD=function(){function e(i){var r=i.rendererService,o=i.layerService,u=i.parent;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"tileResource",new Map),(0,Ne.Z)(this,"layerTiles",[]),this.rendererService=r,this.layerService=o,this.parent=u}return(0,st.Z)(e,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(r){return this.layerTiles.some(function(o){return o.key===r})}},{key:"addTile",value:function(r){this.layerTiles.push(r)}},{key:"getTile",value:function(r){return this.layerTiles.find(function(o){return o.key===r})}},{key:"getVisibleTileBylngLat",value:function(r){return this.layerTiles.find(function(o){return o.isLoaded&&o.visible&&o.lnglatInBounds(r)})}},{key:"removeTile",value:function(r){var o=this.layerTiles.findIndex(function(c){return c.key===r}),u=this.layerTiles.splice(o,1);u[0]&&u[0].destroy()}},{key:"updateTileVisible",value:function(r){var o=this.getTile(r.key);if(r.isVisible)if(r.parent){var u=this.isChildrenLoaded(r.parent);o==null||o.updateVisible(u)}else o==null||o.updateVisible(!0);else if(r.parent){var c=this.isChildrenLoaded(r.parent);o==null||o.updateVisible(!c)}else o==null||o.updateVisible(!1)}},{key:"isParentLoaded",value:function(r){var o=r.parent;if(!o)return!0;var u=this.getTile(o==null?void 0:o.key);return!!(u!=null&&u.isLoaded)}},{key:"isChildrenLoaded",value:function(r){var o=this,u=r==null?void 0:r.children;return u.length===0?!0:u.every(function(c){var p=o.getTile(c==null?void 0:c.key);return p?(p==null?void 0:p.isLoaded)===!0:!0})}},{key:"render",value:function(){var i=(0,Sn.Z)(nr().mark(function o(){var u=this,c,p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c=this.getRenderLayers(),p=c.map(function(){var w=(0,Sn.Z)(nr().mark(function O(D){return nr().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,u.layerService.renderTileLayer(D);case 2:case"end":return X.stop()}},O)}));return function(O){return w.apply(this,arguments)}}()),y.next=4,Promise.all(p);case 4:case"end":return y.stop()}},o,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"getRenderLayers",value:function(){var r=this.layerTiles.filter(function(u){return u.visible&&u.isLoaded}),o=[];return r.map(function(u){return o.push.apply(o,(0,In.Z)(u.getLayers()))}),o}},{key:"getLayers",value:function(){var r=this.layerTiles.filter(function(u){return u.isLoaded}),o=[];return r.map(function(u){return o.push.apply(o,(0,In.Z)(u.getLayers()))}),o}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach(function(r){return r.destroy()}),this.tileResource.clear()}}]),e}(),AD=k(32676);function TD(e,i,r){r===void 0&&(r={});var o=zr(e),u=zr(i),c=AD.union(o.coordinates,u.coordinates);return c.length===0?null:c.length===1?me(c[0],r.properties):Te(c,r.properties)}var MD=TD,VT=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"getCombineFeature",value:function(r){var o=null,u=r[0];return r.map(function(c){var p=me(c.coordinates);o===null?o=p:o=MD(o,p)}),u&&(o.properties=(0,ne.Z)({},u)),o}}]),e}(),By="select",Ny="active",RD=function(){function e(i){var r=i.layerService,o=i.tileLayerService,u=i.parent;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"tilePickID",new Map),this.layerService=r,this.tileLayerService=o,this.parent=u,this.tileSourceService=new VT}return(0,st.Z)(e,[{key:"pickRender",value:function(r){var o=this.tileLayerService.getVisibleTileBylngLat(r.lngLat);if(o){var u=o.getMainLayer();u==null||u.layerPickService.pickRender(r)}}},{key:"pick",value:function(r,o){var u=this.parent.getContainer(),c=u.get(Xt.IPickingService);if(r.type==="RasterLayer"){var p=this.tileLayerService.getVisibleTileBylngLat(o.lngLat);if(p&&p.getMainLayer()!==void 0){var g=p.getMainLayer();return g.layerPickService.pickRasterLayer(g,o,this.parent)}return!1}return this.pickRender(o),c.pickFromPickingFBO(r,o)}},{key:"selectFeature",value:function(r){var o=(0,Zi.Z)(r,3),u=o[0],c=o[1],p=o[2],g=this.color2PickId(u,c,p);this.tilePickID.set(By,g),this.updateHighLight(u,c,p,By)}},{key:"highlightPickedFeature",value:function(r){var o=(0,Zi.Z)(r,3),u=o[0],c=o[1],p=o[2],g=this.color2PickId(u,c,p);this.tilePickID.set(Ny,g),this.updateHighLight(u,c,p,Ny)}},{key:"updateHighLight",value:function(r,o,u,c){this.tileLayerService.tiles.map(function(p){var g=p.getMainLayer();switch(c){case By:g==null||g.hooks.beforeSelect.call([r,o,u]);break;case Ny:g==null||g.hooks.beforeHighlight.call([r,o,u]);break}})}},{key:"setPickState",value:function(){var r=this.tilePickID.get(By),o=this.tilePickID.get(Ny);if(r){var u=this.pickId2Color(r),c=(0,Zi.Z)(u,3),p=c[0],g=c[1],y=c[2];this.updateHighLight(p,g,y,By);return}if(o){var w=this.pickId2Color(o),O=(0,Zi.Z)(w,3),D=O[0],V=O[1],X=O[2];this.updateHighLight(D,V,X,Ny);return}}},{key:"color2PickId",value:function(r,o,u){return Jl(new Uint8Array([r,o,u]))}},{key:"pickId2Color",value:function(r){return As(r)}},{key:"getFeatureById",value:function(r){var o=this.tileLayerService.getTiles().filter(function(c){return c.visible}),u=[];return o.forEach(function(c){u.push.apply(u,(0,In.Z)(c.getFeatureById(r)))}),u}},{key:"pickRasterLayer",value:function(r,o,u){return!1}}]),e}();function ID(e){return e==="PolygonLayer"?p1:e==="LineLayer"?dy:$g}function PD(e){return["PolygonLayer","LineLayer"].indexOf(e)!==-1}function OD(e){var i=kD();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function kD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var e0=function(e){(0,yr.Z)(r,e);var i=OD(r);function r(o,u){var c;return(0,Pt.Z)(this,r),c=i.call(this),(0,Ne.Z)((0,Ar.Z)(c),"visible",!0),(0,Ne.Z)((0,Ar.Z)(c),"layers",[]),(0,Ne.Z)((0,Ar.Z)(c),"isLoaded",!1),(0,Ne.Z)((0,Ar.Z)(c),"tileMaskLayers",[]),c.parent=u,c.sourceTile=o,c.x=o.x,c.y=o.y,c.z=o.z,c.key="".concat(c.x,"_").concat(c.y,"_").concat(c.z),c}return(0,st.Z)(r,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(u){var c=(0,Zi.Z)(this.sourceTile.bounds,4),p=c[0],g=c[1],y=c[2],w=c[3],O=u.lng,D=u.lat;return O>=p&&O<=y&&D>=g&&D<=w}},{key:"getLayerOptions",value:function(){var u,c=this.parent.getLayerConfig();return(0,ne.Z)((0,ne.Z)({},c),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:PD(this.parent.type),mask:c.mask||((u=c.maskLayers)===null||u===void 0?void 0:u.length)!==0&&c.enableMask})}},{key:"getMaskLayer",value:function(){var u=this,c=this.parent.getLayerConfig(),p=c.maskLayers,g=[];return p==null||p.forEach(function(y){if(!y.tileLayer)return g.push(y),y;var w=y.tileLayer,O=w.getTile(u.sourceTile.key),D=O==null?void 0:O.getLayers()[0];D&&g.push(D)}),g}},{key:"addTileMask",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y;return nr().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return p=new p1({visible:!1,enablePicking:!1}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").style({opacity:.5}),g=iy(this.parent.sceneContainer),p.setContainer(g,this.parent.sceneContainer),O.next=5,p.init();case 5:return this.tileMask=p,y=this.getMainLayer(),y!==void 0&&(y.tileMask=p),O.abrupt("return",p);case 9:case"end":return O.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"addMask",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p,g){var y;return nr().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return y=iy(this.parent.sceneContainer),g.setContainer(y,this.parent.sceneContainer),O.next=4,g.init();case 4:p.addMask(g),this.tileMaskLayers.push(g);case 6:case"end":return O.stop()}},c,this)}));function u(c,p){return o.apply(this,arguments)}return u}()},{key:"addLayer",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p){var g;return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return p.isTileLayer=!0,g=iy(this.parent.sceneContainer),p.setContainer(g,this.parent.sceneContainer),this.layers.push(p),w.next=6,p.init();case 6:case"end":return w.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"updateVisible",value:function(u){this.visible=u,this.updateOptions("visible",u)}},{key:"updateOptions",value:function(u,c){this.layers.forEach(function(p){p.updateLayerConfig((0,Ne.Z)({},u,c))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(u){return[]}},{key:"getFeatureById",value:function(u){return[]}},{key:"destroy",value:function(){var u;(u=this.tileMask)===null||u===void 0||u.destroy(),this.layers.forEach(function(c){return c.destroy()})}}]),r}(xs.EventEmitter);function GS(e){var i=HT();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function HT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var zy=function(e){(0,yr.Z)(r,e);var i=GS(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.getSourceOption(),g=p.data.features[0].properties,y=new dy().source(p.data,p.options).size(1).shape("line").color("red"),w=new $g({minZoom:this.z-1,maxZoom:this.z+1,textAllowOverlap:!0}).source([g],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),D.next=6,this.addLayer(y);case 6:return D.next=8,this.addLayer(w);case 8:this.isLoaded=!0;case 9:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:c},options:{parser:{type:"geojson"},transforms:u.transforms}}}}]),r}(e0);function LD(e){var i=DD();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function DD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var jT=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,Uy=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
 
}
`,WT=function(e){(0,yr.Z)(r,e);var i=LD(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.color,p=c===void 0?"rgb(255,255,255)":c,g=u.opacity,y=u.brightness,w=u.contrast,O=u.saturation,D=u.gamma,V=yo(p),X={u_opacity:$s(g,1),u_brightness:$s(y,1),u_contrast:$s(w,1),u_saturation:$s(O,1),u_gamma:$s(D,1)};this.textures=[this.texture];var ce=this.getUniformsBufferInfo(X);return ce}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.loadTexture();case 2:return g.abrupt("return",this.buildModels());case 3:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"loadTexture",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y;return nr().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return p=this.rendererService.createTexture2D,this.texture=p({height:0,width:0}),g=this.layer.getSource(),O.next=5,g.data.images;case 5:y=O.sent,this.texture=p({data:y[0],width:y[0].width,height:y[0].height,mag:yt.LINEAR,min:yt.LINEAR});case 7:case"end":return O.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return this.initUniformsBuffer(),y.next=3,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:Uy,fragmentShader:jT,triangulation:e1,primitive:yt.TRIANGLES,blend:{enable:!0},depth:{enable:!1}});case 3:return p=y.sent,y.abrupt("return",[p]);case 5:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{name:"a_Uv",shaderLocation:Za.UV,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(eu),FD={image:WT},BD=FD;function ND(e){var i=zD();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function zD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var UD=function(e){(0,yr.Z)(r,e);var i=ND(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"type","ImageLayer"),o}return(0,st.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new BD[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={image:{}};return c[u]}},{key:"getModelType",value:function(){return"image"}}]),r}(Fm);function ZD(e){var i=VD();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function VD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var HD=function(e){(0,yr.Z)(r,e);var i=ZD(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),w=new UD((0,ne.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var X,ce,de=V;w[de]((X=p[de])===null||X===void 0?void 0:X.field,(ce=p[de])===null||ce===void 0?void 0:ce.values)}),D.next=7,this.addLayer(w);case 7:this.isLoaded=!0;case 8:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:u.transforms}}}}]),r}(e0);function jD(e){var i=WD();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function WD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var GD=function(e){(0,yr.Z)(r,e);var i=jD(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),w=new _A((0,ne.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var X,ce,de=V;w[de]((X=p[de])===null||X===void 0?void 0:X.field,(ce=p[de])===null||ce===void 0?void 0:ce.values)}),D.next=7,this.addLayer(w);case 7:this.isLoaded=!0;case 8:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getFeatures",value:function(u){if(!u)return[];var c=this.sourceTile.data;return c.getTileData(u)}},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.parent.getLayerConfig(),p=c.sourceLayer,g=c.featureId,y=this.getFeatures(p);return{data:{type:"FeatureCollection",features:y},options:{parser:{type:"geojson",featureId:g},transforms:u.transforms}}}}]),r}(e0);function GT(e){var i=$D();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function $D(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var XD=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  bool u_clampLow;
  bool u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,YD=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  bool u_clampLow;
  bool u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,$T=function(e){(0,yr.Z)(r,e);var i=GT(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.clampLow,y=g===void 0?!0:g,w=u.clampHigh,O=w===void 0?!0:w,D=u.noDataValue,V=D===void 0?-9999999:D,X=u.domain,ce=u.rampColors,de=X||ec(ce);this.colorTexture=this.layer.textureService.getColorTexture(ce,de);var we={u_domain:de,u_opacity:p||1,u_noDataValue:V,u_clampLow:y,u_clampHigh:typeof O!="undefined"?O:y,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};this.textures=[this.texture,this.colorTexture];var je=this.getUniformsBufferInfo(we);return je}},{key:"getRasterData",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p){var g,y,w,O;return nr().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!Array.isArray(p.data)){V.next=4;break}return V.abrupt("return",{data:p.data,width:p.width,height:p.height});case 4:return V.next=6,p.data;case 6:return g=V.sent,y=g.rasterData,w=g.width,O=g.height,V.abrupt("return",{data:Array.from(y),width:w,height:O});case 11:case"end":return V.stop()}},c)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.buildModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D,V,X,ce,de;return nr().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return this.initUniformsBuffer(),p=this.layer.getSource(),g=this.rendererService,y=g.createTexture2D,w=g.queryVerdorInfo,O=p.data.dataArray[0],je.next=6,this.getRasterData(O);case 6:return D=je.sent,V=D.data,X=D.width,ce=D.height,this.texture=y({data:new Float32Array(V),width:X,height:ce,format:w()==="WebGL1"?yt.LUMINANCE:yt.RED,type:yt.FLOAT,alignment:1}),je.next=13,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:YD,fragmentShader:XD,triangulation:e1,primitive:yt.TRIANGLES,depth:{enable:!1}});case 13:return de=je.sent,je.abrupt("return",[de]);case 15:case"end":return je.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u,c;(u=this.texture)===null||u===void 0||u.destroy(),(c=this.colorTexture)===null||c===void 0||c.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{shaderLocation:Za.UV,name:"a_Uv",buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(eu),$S=["data"],XS=["rasterData"];function KD(e){var i=qD();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function qD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var QD=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }
  if(outputColor.a < 0.01)
    discard;
 
}`,D1=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,JD=function(e){(0,yr.Z)(r,e);var i=KD(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"dataOption",{}),o}return(0,st.Z)(r,[{key:"getUninforms",value:function(){var u=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,ne.Z)((0,ne.Z)({},u.uniformsOption),c.uniformsOption)}},{key:"getCommonUniformsInfo",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=c===void 0?1:c,g=u.noDataValue,y=g===void 0?0:g,w=this.dataOption,O=w.rMinMax,D=O===void 0?[0,255]:O,V=w.gMinMax,X=V===void 0?[0,255]:V,ce=w.bMinMax,de=ce===void 0?[0,255]:ce,we={u_rminmax:D,u_gminmax:X,u_bminmax:de,u_opacity:p||1,u_noDataValue:y,u_texture:this.texture};this.textures=[this.texture];var je=this.getUniformsBufferInfo(we);return je}},{key:"getRasterData",value:function(){var o=(0,Sn.Z)(nr().mark(function c(p){var g,y,w,O,D;return nr().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(!Array.isArray(p.data)){X.next=4;break}return g=p.data,y=(0,Uc.Z)(p,$S),this.dataOption=y,X.abrupt("return",(0,ne.Z)({data:g},y));case 4:return X.next=6,p.data;case 6:if(w=X.sent,O=w.rasterData,D=(0,Uc.Z)(w,XS),this.dataOption=D,!Array.isArray(O)){X.next=14;break}return X.abrupt("return",(0,ne.Z)({data:O},D));case 14:return X.abrupt("return",(0,ne.Z)({data:Array.from(O)},D));case 15:case"end":return X.stop()}},c,this)}));function u(c){return o.apply(this,arguments)}return u}()},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D,V,X;return nr().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return this.initUniformsBuffer(),p=this.layer.getSource(),g=this.rendererService.createTexture2D,y=p.data.dataArray[0],de.next=6,this.getRasterData(y);case 6:return w=de.sent,O=w.data,D=w.width,V=w.height,this.texture=g({data:new Float32Array(O),width:D,height:V,format:yt.RGB,type:yt.FLOAT}),de.next=13,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:D1,fragmentShader:QD,triangulation:e1,primitive:yt.TRIANGLES,depth:{enable:!1}});case 13:return X=de.sent,de.abrupt("return",[X]);case 15:case"end":return de.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.initModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{name:"a_Uv",shaderLocation:Za.UV,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(eu);function eF(e){var i=F1();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function F1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var XT=`precision mediump float;
uniform float u_opacity: 1.0;

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

varying vec2 v_texCoord;

uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
uniform vec4 u_unpack;

float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data = texture2D(u_texture, coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return texture2D(u_colorTexture, coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {
     gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    gl_FragColor = getColor(value);
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
      if(gl_FragColor.a < 0.01)
      discard;
  }
}
`,YT=`precision highp float;
uniform mat4 u_ModelMatrix;

attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`,KT=function(e){(0,yr.Z)(r,e);var i=eF(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getUninforms",value:function(){var u=this.layer.getLayerConfig(),c=u.opacity,p=u.clampLow,g=p===void 0?!0:p,y=u.clampHigh,w=y===void 0?!0:y,O=u.noDataValue,D=O===void 0?-9999999:O,V=u.domain,X=u.rampColors,ce=u.colorTexture,de=u.rScaler,we=de===void 0?6553.6:de,je=u.gScaler,ht=je===void 0?25.6:je,_t=u.bScaler,Dt=_t===void 0?.1:_t,Yt=u.offset,ir=Yt===void 0?1e4:Yt,sr=V||ec(X),Tr=ce;return ce?this.layer.textureService.setColorTexture(ce,X,sr):Tr=this.layer.textureService.getColorTexture(X,sr),{u_opacity:c||1,u_texture:this.texture,u_domain:sr,u_clampLow:g,u_clampHigh:typeof w!="undefined"?w:g,u_noDataValue:D,u_unpack:[we,ht,Dt,ir],u_colorTexture:Tr}}},{key:"initModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.layer.getSource(),g=this.rendererService.createTexture2D,D.next=4,p.data.images;case 4:return y=D.sent,this.texture=g({data:y[0],width:y[0].width,height:y[0].height,min:yt.LINEAR,mag:yt.LINEAR}),D.next=8,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:YT,fragmentShader:XT,triangulation:e1,primitive:yt.TRIANGLES,depth:{enable:!1}});case 8:return w=D.sent,D.abrupt("return",[w]);case 10:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"clearModels",value:function(){var u;(u=this.texture)===null||u===void 0||u.destroy()}},{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",this.initModels());case 1:case"end":return g.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ia.Attribute,descriptor:{name:"a_Uv",buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:2,update:function(c,p,g){return[g[3],g[4]]}}})}}]),r}(eu),qT={raster:$T,rasterRgb:JD,raster3d:$T,rasterTerrainRgb:KT},tF=qT;function rF(e){var i=nF();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function nF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var YS=function(e){(0,yr.Z)(r,e);var i=rF(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"type","RasterLayer"),o}return(0,st.Z)(r,[{key:"buildModels",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=this.getModelType(),this.layerModel=new tF[p](this),y.next=4,this.initLayerModels();case 4:case"end":return y.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getDefaultConfig",value:function(){var u=this.getModelType(),c={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return c[u]}},{key:"getModelType",value:function(){var u=this.layerSource.getParserType();switch(u){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}}]),r}(Fm),iF=["rasterData"];function QT(e){var i=JT();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function JT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var aF=function(e){(0,yr.Z)(r,e);var i=QT(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),w=new YS((0,ne.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var X,ce,de=V;w[de]((X=p[de])===null||X===void 0?void 0:X.field,(ce=p[de])===null||ce===void 0?void 0:ce.values)}),D.next=7,this.addLayer(w);case 7:this.isLoaded=!0;case 8:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.data,p=c.rasterData,g=(0,Uc.Z)(c,iF);return{data:p,options:{parser:(0,ne.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},g),transforms:u.transforms}}}}]),r}(e0);function oF(e){var i=sF();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function sF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var uF=function(e){(0,yr.Z)(r,e);var i=oF(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w;return nr().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),w=new YS((0,ne.Z)({},g)).source(y.data,y.options),p&&Object.keys(p).forEach(function(V){var X,ce,de=V;w[de]((X=p[de])===null||X===void 0?void 0:X.field,(ce=p[de])===null||ce===void 0?void 0:ce.values)}),D.next=7,this.addLayer(w);case 7:this.isLoaded=!0;case 8:case"end":return D.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:u.transforms}}}}]),r}(e0),lF=["rasterData"];function cF(e){var i=fF();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function fF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var hF={positions:[0,1],colors:["#000","#fff"]},pF=function(e){(0,yr.Z)(r,e);var i=cF(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D,V;return nr().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=this.getSourceOption(),w=this.getLayerOptions(),O=w.rampColors,D=w.domain,this.colorTexture=this.parent.textureService.getColorTexture(O,D),V=new YS((0,ne.Z)((0,ne.Z)({},g),{},{colorTexture:this.colorTexture})).source(y.data,y.options),p&&Object.keys(p).forEach(function(de){var we,je,ht=de;V[ht]((we=p[ht])===null||we===void 0?void 0:we.field,(je=p[ht])===null||je===void 0?void 0:je.values)}),ce.next=9,this.addLayer(V);case 9:this.isLoaded=!0;case 10:case"end":return ce.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.sourceTile.data.data,p=c.rasterData,g=(0,Uc.Z)(c,lF);return{data:p,options:{parser:(0,ne.Z)({type:"raster",extent:this.sourceTile.bounds},g),transforms:u.transforms}}}},{key:"styleUpdate",value:function(){for(var u=this,c=arguments.length,p=new Array(c),g=0;g<c;g++)p[g]=arguments[g];var y=p,w=y.rampColors,O=w===void 0?hF:w,D=y.domain;this.colorTexture=this.parent.textureService.getColorTexture(O,D||ec(O)),this.layers.forEach(function(V){return V.style({colorTexture:u.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(u){return u.destroy()})}}]),r}(e0);function O4(e){var i=eM();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function eM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Zy=function(e){(0,yr.Z)(r,e);var i=O4(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"initTileLayer",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O;return nr().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(p=this.parent.getLayerAttributeConfig(),g=this.getLayerOptions(),y=ID(this.parent.type),w=this.getSourceOption(),w){V.next=8;break}return this.isLoaded=!0,this.emit("loaded"),V.abrupt("return");case 8:return O=new y((0,ne.Z)({},g)).source(w.data,w.options),Object.keys(p).forEach(function(X){var ce,de,we=X;O[we]((ce=p[we])===null||ce===void 0?void 0:ce.field,(de=p[we])===null||de===void 0?void 0:de.values)}),V.next=12,this.addLayer(O);case 12:if(!g.tileMask){V.next=15;break}return V.next=15,this.addTileMask();case 15:this.setLayerMinMaxZoom(O),this.isLoaded=!0,this.emit("loaded");case 18:case"end":return V.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getSourceOption",value:function(){var u=this.parent.getSource(),c=this.parent.getLayerConfig(),p=c.sourceLayer,g=p===void 0?"defaultLayer":p,y=c.featureId,w=y===void 0?"id":y,O=this.getFeatures(g);return{data:{type:"FeatureCollection",features:O},options:{parser:{type:"geojson",featureId:w},transforms:u.transforms}}}},{key:"setLayerMinMaxZoom",value:function(u){u.getModelType()==="text"&&u.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(u){var c=this.sourceTile.data;return c.getTileData(u)}},{key:"getFeatureById",value:function(u){var c=this.getMainLayer();if(!c)return[];var p=c.getSource().data.dataArray.filter(function(g){return g._id===u});return p}}]),r}(e0);function KS(e){var i=e.type;switch(i){case"PolygonLayer":return Zy;case"LineLayer":return Zy;case"PointLayer":return Zy;case"TileDebugLayer":return zy;case"MaskLayer":return GD;case"RasterLayer":var r=e.getSource().parser.dataType;switch(r){case Zc.RGB:case Zc.CUSTOMRGB:return aF;case Zc.ARRAYBUFFER:case Zc.CUSTOMARRAYBUFFER:return pF;case Zc.TERRAINRGB:case Zc.CUSTOMTERRAINRGB:return uF;default:return HD}default:return Zy}}var dF=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],qS=Ta.debounce,tM=function(){function e(i){var r=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"initedTileset",!1),(0,Ne.Z)(this,"mapchange",function(){var u;if(r.parent.isVisible()!==!1){var c=r.getCurrentView(),p=c.latLonBounds,g=c.zoom;if(r.mapService.version==="GAODE1.x"){var y=r.parent.getLayerConfig(),w=y.visible;g<2&&w?(r.parent.updateLayerConfig({visible:!1}),r.layerService.reRender()):g>=2&&!w&&(r.parent.updateLayerConfig({visible:!0}),r.layerService.reRender())}r.lastViewStates&&r.lastViewStates.zoom===g&&r.lastViewStates.latLonBounds.toString()===p.toString()||(r.lastViewStates={zoom:g,latLonBounds:p},(u=r.tilesetManager)===null||u===void 0||u.throttleUpdate(g,p))}}),(0,Ne.Z)(this,"viewchange",qS(this.mapchange,24)),this.parent=i;var o=this.parent.getContainer();this.rendererService=o.get(Xt.IRendererService),this.layerService=o.get(Xt.ILayerService),this.mapService=o.get(Xt.IMapService),this.pickingService=o.get(Xt.IPickingService),this.tileLayerService=new CD({rendererService:this.rendererService,layerService:this.layerService,parent:i}),this.tilePickService=new RD({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:i}),this.parent.setLayerPickService(this.tilePickService),this.proxy(i),this.initTileSetManager()}return(0,st.Z)(e,[{key:"initTileSetManager",value:function(){var r,o=this.parent.getSource();if(this.tilesetManager=o.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()!==!1){var u=this.getCurrentView(),c=u.latLonBounds,p=u.zoom;(r=this.tilesetManager)===null||r===void 0||r.update(p,c)}}},{key:"getCurrentView",value:function(){var r=this.mapService.getBounds(),o=[r[0][0],r[0][1],r[1][0],r[1][1]],u=this.mapService.getZoom();return{latLonBounds:o,zoom:u}}},{key:"bindTilesetEvent",value:function(){var r=this;this.tilesetManager.on("tile-loaded",function(o){}),this.tilesetManager.on("tile-unload",function(o){r.tileUnLoad(o)}),this.tilesetManager.on("tile-error",function(o,u){r.tileError(o)}),this.tilesetManager.on("tile-update",function(){r.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"getTile",value:function(r){return this.tileLayerService.getTile(r)}},{key:"tileLoaded",value:function(r){}},{key:"tileError",value:function(r){console.warn("error:",r)}},{key:"destroy",value:function(){var r;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(r=this.tilesetManager)===null||r===void 0||r.destroy(),this.tileLayerService.destroy()}},{key:"reload",value:function(){var r;this.tilesetManager.clear();var o=this.getCurrentView(),u=o.latLonBounds,c=o.zoom;(r=this.tilesetManager)===null||r===void 0||r.update(c,u)}},{key:"tileUnLoad",value:function(r){this.tileLayerService.removeTile(r.key)}},{key:"tileUpdate",value:function(){var i=(0,Sn.Z)(nr().mark(function o(){var u=this,c,p;return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.tilesetManager){y.next=2;break}return y.abrupt("return");case 2:return c=this.parent.getMinZoom(),p=this.parent.getMaxZoom(),y.next=6,Promise.all(this.tilesetManager.tiles.filter(function(w){return w.isLoaded}).filter(function(w){return w.isVisibleChange}).filter(function(w){return w.data}).filter(function(w){return w.z>=c&&w.z<p}).map(function(){var w=(0,Sn.Z)(nr().mark(function O(D){var V,X;return nr().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(u.tileLayerService.hasTile(D.key)){de.next=9;break}return V=KS(u.parent),X=new V(D,u.parent),de.next=5,X.initTileLayer();case 5:u.tilePickService.setPickState(),X.getLayers().length!==0&&(u.tileLayerService.addTile(X),u.tileLayerService.updateTileVisible(D),u.layerService.reRender()),de.next=12;break;case 9:u.tileLayerService.updateTileVisible(D),u.tilePickService.setPickState(),u.layerService.reRender();case 12:case"end":return de.stop()}},O)}));return function(O){return w.apply(this,arguments)}}()));case 6:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 7:case"end":return y.stop()}},o,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"setPickState",value:function(r){}},{key:"pickRender",value:function(r){this.tilePickService.pickRender(r)}},{key:"selectFeature",value:function(r){this.tilePickService.selectFeature(r)}},{key:"highlightPickedFeature",value:function(r){this.tilePickService.highlightPickedFeature(r)}},{key:"proxy",value:function(r){var o=this;dF.forEach(function(u){var c=r[u].bind(r);r[u]=function(){for(var p=arguments.length,g=new Array(p),y=0;y<p;y++)g[y]=arguments[y];return c.apply(void 0,g),o.getLayers().map(function(w){w[u].apply(w,g)}),u==="style"&&o.getTiles().forEach(function(w){return w.styleUpdate.apply(w,g)}),r}})}}]),e}(),rM,nM,vF=(rM=(0,It.b2)(),rM(nM=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"build",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u){return nr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u.prepareBuildModel(),p.next=3,u.buildModels();case 3:case"end":return p.stop()}},o)}));function r(o){return i.apply(this,arguments)}return r}()},{key:"initLayerModel",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u){return nr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.build(u);case 2:u.styleNeedUpdate=!1;case 3:case"end":return p.stop()}},o,this)}));function r(o){return i.apply(this,arguments)}return r}()},{key:"prepareLayerModel",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u){return nr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.build(u);case 2:u.styleNeedUpdate=!1;case 3:case"end":return p.stop()}},o,this)}));function r(o){return i.apply(this,arguments)}return r}()},{key:"apply",value:function(r){var o=this;r.hooks.init.tapPromise("LayerModelPlugin",(0,Sn.Z)(nr().mark(function u(){return nr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!r.getSource().isTile){p.next=4;break}return r.prepareBuildModel(),r.tileLayer=new tM(r),p.abrupt("return");case 4:return r.log(Pl.BuildModelStart,$o.INIT),p.next=7,o.initLayerModel(r);case 7:r.log(Pl.BuildModelEnd,$o.INIT);case 8:case"end":return p.stop()}},u)}))),r.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var u=(0,Sn.Z)(nr().mark(function c(p){return nr().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(p){y.next=2;break}return y.abrupt("return",!1);case 2:if(!r.getSource().isTile){y.next=5;break}return r.tileLayer=new tM(r),y.abrupt("return",!1);case 5:return r.log(Pl.BuildModelStart,$o.UPDATE),y.next=8,o.prepareLayerModel(r);case 8:return r.log(Pl.BuildModelEnd,$o.UPDATE),y.abrupt("return",!0);case 10:case"end":return y.stop()}},c)}));return function(c){return u.apply(this,arguments)}}())}}]),e}())||nM),iM,aM,gF=(iM=(0,It.b2)(),iM(aM=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"apply",value:function(r){r.hooks.afterInit.tap("LayerStylePlugin",function(){var o=r.getLayerConfig(),u=o.autoFit,c=o.fitBoundsOptions;u&&r.fitBounds(c),r.styleNeedUpdate=!1})}}]),e}())||aM),mF,Cd,QS=["type"],oM={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},B1={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},yF={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},_F={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function xF(e){var i={u_DirectionalLights:new Array(3).fill((0,ne.Z)({},yF)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,ne.Z)({},_F)),u_NumOfSpotLights:0};return(!e||!e.length)&&(e=[B1]),e.forEach(function(r){var o=r.type,u=o===void 0?"directional":o,c=(0,Uc.Z)(r,QS),p=oM[u].lights,g=oM[u].num,y=i[g];i[p][y]=(0,ne.Z)((0,ne.Z)({},i[p][y]),c),i[g]++}),i}var bF=(mF=(0,It.b2)(),mF(Cd=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("LightingPlugin",function(){var o=r.getLayerConfig(),u=o.enableLighting;u&&r.models.forEach(function(c){return c.addUniforms((0,ne.Z)({},xF()))})})}}]),e}())||Cd),sM,uM,SF=(sM=(0,It.b2)(),sM(uM=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.rendererService,p=o.postProcessingPassFactory,g=o.normalPassFactory;r.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var y=r.getLayerConfig(),w=y.enableMultiPassRenderer,O=y.passes,D=O===void 0?[]:O;u.enabled=!!w&&r.getLayerConfig().enableMultiPassRenderer!==!1,u.enabled&&(r.multiPassRenderer=iC(r,D,p,g),r.multiPassRenderer.setRenderFlag(!0))}),r.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(u.enabled){var y=c.getViewportSize(),w=y.width,O=y.height;r.multiPassRenderer.resize(w,O)}})}}]),e}())||uM),lM,cM,EF=Ta.isNumber,Ad={NONE:0,ENCODE:1,HIGHLIGHT:2},wF=(lM=(0,It.b2)(),lM(cM=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"pickOption2Array",value:function(){var r=[];return this.pickingUniformMap.forEach(function(o,u){EF(o)?r.push(o):r.push.apply(r,(0,In.Z)(o))}),r}},{key:"updatePickOption",value:function(r,o){var u=this;Object.keys(r).forEach(function(y){u.pickingUniformMap.set(y,r[y])});var c=o.getLayerConfig().pickingBuffer||0,p=Number(o.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",c),this.pickingUniformMap.set("u_shaderPick",p);var g=o.getPickingUniformBuffer();g.subData({offset:0,data:this.pickOption2Array()})}},{key:"apply",value:function(r,o){var u=this,c=o.rendererService,p=o.styleAttributeService,g;this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_EnableSelect",0],["u_activeMix",0]]),r.hooks.init.tapPromise("PixelPickingPlugin",function(){var y=r.getLayerConfig(),w=y.enablePicking;p.registerStyleAttribute({name:"pickingColor",type:ia.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:Za.PICKING_COLOR,buffer:{data:[],type:yt.FLOAT},size:3,update:function(D){var V=D.id;return w?As(V):[0,0,0]}}})}),r.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var y=r.getLayerConfig(),w=y.enablePicking;w&&r.isVisible()&&(u.updatePickOption({u_PickingStage:Ad.ENCODE},r),r.models.forEach(function(O){return O.addUniforms({u_PickingStage:Ad.ENCODE})}))}),r.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var y=r.getLayerConfig(),w=y.enablePicking;w&&r.isVisible()&&(u.updatePickOption({u_PickingStage:Ad.HIGHLIGHT},r),r.models.forEach(function(O){return O.addUniforms({u_PickingStage:Ad.HIGHLIGHT})}))}),r.hooks.beforeHighlight.tap("PixelPickingPlugin",function(y){var w=r.getLayerConfig(),O=w.highlightColor,D=w.activeMix,V=D===void 0?0:D,X=typeof O=="string"?yo(O):O||[1,0,0,1];r.updateLayerConfig({pickedFeatureID:Jl(new Uint8Array(y))});var ce={u_PickingStage:Ad.HIGHLIGHT,u_PickingColor:y,u_HighlightColor:X.map(function(de){return de*255}),u_activeMix:V};u.updatePickOption(ce,r),r.models.forEach(function(de){return de.addUniforms(ce)})}),r.hooks.beforeSelect.tap("PixelPickingPlugin",function(y){var w=r.getLayerConfig(),O=w.selectColor,D=w.selectMix,V=D===void 0?0:D,X=typeof O=="string"?yo(O):O||[1,0,0,1];r.updateLayerConfig({pickedFeatureID:Jl(new Uint8Array(y))});var ce={u_PickingStage:Ad.HIGHLIGHT,u_PickingColor:y,u_HighlightColor:X.map(function(de){return de*255}),u_activeMix:V,u_CurrentSelectedId:y,u_SelectColor:X.map(function(de){return de*255}),u_EnableSelect:1};u.updatePickOption(ce,r),r.models.forEach(function(de){return de.addUniforms(ce)})})}}]),e}())||cM),CF=["mvt","geojsonvt","testTile"];function AF(e){var i=e.getSource();return CF.includes(i.parser.type)}function k4(e){return e.getContext?{width:e.width/DOM.DPR,height:e.height/DOM.DPR}:e.getBoundingClientRect()}var JS,TF,Vy=(JS=(0,It.b2)(),JS(TF=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){AF(r)||u.registerBuiltinAttributes(c,r)})}},{key:"registerBuiltinAttributes",value:function(r,o){if(o.type==="MaskLayer"){this.registerPositionAttribute(r);return}this.registerPositionAttribute(r),this.registerColorAttribute(r),this.registerVertexIdAttribute(r)}},{key:"registerPositionAttribute",value:function(r){r.registerStyleAttribute({name:"position",type:ia.Attribute,descriptor:{name:"a_Position",shaderLocation:Za.POSITION,buffer:{data:[],type:yt.FLOAT},size:3,update:function(u,c,p){return p.length===2?[p[0],p[1],0]:[p[0],p[1],p[2]]}}})}},{key:"registerColorAttribute",value:function(r){r.registerStyleAttribute({name:"color",type:ia.Attribute,descriptor:{name:"a_Color",shaderLocation:Za.COLOR,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:4,update:function(u){var c=u.color;return!c||!c.length?[1,1,1,1]:c}}})}},{key:"registerVertexIdAttribute",value:function(r){r.registerStyleAttribute({name:"vertexId",type:ia.Attribute,descriptor:{name:"a_vertexId",shaderLocation:Za.VERTEX_ID,buffer:{usage:yt.DYNAMIC_DRAW,data:[],type:yt.FLOAT},size:1,update:function(u,c){return[c]}}})}}]),e}())||TF),N1,fM,eE,hM,pM,MF,RF,t0,dM,tE,rE,vM,gM,Xv=(N1=(0,It.b2)(),fM=(0,It.f3)(Xt.ICameraService),eE=(0,It.f3)(Xt.ICoordinateSystemService),hM=(0,It.f3)(Xt.IRendererService),pM=(0,It.f3)(Xt.IMapService),MF=(0,It.f3)(Xt.ILayerService),N1(RF=(t0=function(){function e(){(0,Pt.Z)(this,e),Da(this,"cameraService",dM,this),Da(this,"coordinateSystemService",tE,this),Da(this,"rendererService",rE,this),Da(this,"mapService",vM,this),Da(this,"layerService",gM,this)}return(0,st.Z)(e,[{key:"apply",value:function(r){var o=this,u=this.mapService.version,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=[0,0],g;this.rendererService.uniformBuffers[0]||(g=this.rendererService.createBuffer({data:new Float32Array(16*4+4*7),isUBO:!0}),this.rendererService.uniformBuffers[0]=g),r.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var y=r.getLayerConfig().tileOrigin;if(o.coordinateSystemService.refresh(y),u==="GAODE2.x"){o.setLayerCenter(r),c=o.mapService.map.customCoords.getMVPMatrix(),p=o.mapService.getCustomCoordCenter();var w=r.getLayerUniformBuffer();w.subData({offset:0,data:new Uint8Array(new Float32Array([].concat((0,In.Z)(c),(0,In.Z)(p))).buffer)})}var O=o.rendererService.getViewportSize(),D=O.width,V=O.height,X=o.generateUBO(c,p,D,V),ce=X.data,de=X.uniforms;o.layerService.alreadyInRendering&&g&&g.subData({offset:0,data:ce}),r.models.forEach(function(we){we.addUniforms((0,ne.Z)((0,ne.Z)({},de),{},{u_PickingBuffer:r.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(r.getShaderPickStat())}))})})}},{key:"setLayerCenter",value:function(r){r.coordCenter===void 0&&(r.coordCenter=r.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(r.coordCenter)}},{key:"generateUBO",value:function(r,o,u,c){var p,g=this.cameraService.getProjectionMatrix(),y=this.cameraService.getViewMatrix(),w=this.cameraService.getViewProjectionMatrix(),O=this.cameraService.getModelMatrix(),D=this.coordinateSystemService.getViewportCenterProjection(),V=this.coordinateSystemService.getPixelsPerDegree(),X=this.cameraService.getZoom(),ce=this.coordinateSystemService.getPixelsPerDegree2(),de=this.cameraService.getZoomScale(),we=this.coordinateSystemService.getPixelsPerMeter(),je=this.coordinateSystemService.getCoordinateSystem(),ht=this.cameraService.getCameraPosition(),_t=window.devicePixelRatio,Dt=this.coordinateSystemService.getViewportCenter(),Yt=[u,c],ir=this.cameraService.getFocalDistance(),sr=[].concat((0,In.Z)(y),(0,In.Z)(g),(0,In.Z)(w),(0,In.Z)(O),(0,In.Z)(D),(0,In.Z)(V),[X],(0,In.Z)(ce),[de],(0,In.Z)(we),[je],(0,In.Z)(ht),[_t],(0,In.Z)(Dt),Yt,[ir,0,0,0]);return{data:sr,uniforms:(p={},(0,Ne.Z)(p,Bg.ProjectionMatrix,g),(0,Ne.Z)(p,Bg.ViewMatrix,y),(0,Ne.Z)(p,Bg.ViewProjectionMatrix,w),(0,Ne.Z)(p,Bg.Zoom,X),(0,Ne.Z)(p,Bg.ZoomScale,de),(0,Ne.Z)(p,Bg.FocalDistance,ir),(0,Ne.Z)(p,Bg.CameraPosition,ht),(0,Ne.Z)(p,jf.CoordinateSystem,je),(0,Ne.Z)(p,jf.ViewportCenter,Dt),(0,Ne.Z)(p,jf.ViewportCenterProjection,D),(0,Ne.Z)(p,jf.PixelsPerDegree,V),(0,Ne.Z)(p,jf.PixelsPerDegree2,ce),(0,Ne.Z)(p,jf.PixelsPerMeter,we),(0,Ne.Z)(p,jf.Mvp,r),(0,Ne.Z)(p,"u_sceneCenterMercator",o),(0,Ne.Z)(p,"u_ViewportSize",Yt),(0,Ne.Z)(p,"u_ModelMatrix",O),(0,Ne.Z)(p,"u_DevicePixelRatio",_t),p)}}}]),e}(),dM=Aa(t0.prototype,"cameraService",[fM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tE=Aa(t0.prototype,"coordinateSystemService",[eE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rE=Aa(t0.prototype,"rendererService",[hM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vM=Aa(t0.prototype,"mapService",[pM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gM=Aa(t0.prototype,"layerService",[MF],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t0))||RF),z1,mM,yM=(z1=(0,It.b2)(),z1(mM=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"apply",value:function(r){r.hooks.beforeRender.tap("UpdateModelPlugin",function(){r.layerModel&&r.layerModel.needUpdate().then(function(o){o&&r.renderLayers()})}),r.hooks.afterRender.tap("UpdateModelPlugin",function(){r.layerModelNeedUpdate=!1})}}]),e}())||mM),nE,_M,IF=(nE=(0,It.b2)(),nE(_M=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"apply",value:function(r,o){var u=this,c=o.styleAttributeService;r.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){u.initStyleAttribute(r,{styleAttributeService:c})}),r.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){r.layerModelNeedUpdate||r.inited&&u.updateStyleAttribute(r,{styleAttributeService:c})})}},{key:"updateStyleAttribute",value:function(r,o){var u=o.styleAttributeService,c=u.getLayerStyleAttributes()||[],p=u.getLayerStyleAttribute("filter");if(p&&p.needRegenerateVertices){r.layerModelNeedUpdate=!0,c.forEach(function(g){return g.needRegenerateVertices=!1});return}c.filter(function(g){return g.needRegenerateVertices}).forEach(function(g){u.updateAttributeByFeatureRange(g.name,r.getEncodedData(),g.featureRange.startIndex,g.featureRange.endIndex,r),g.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(r,o){var u=o.styleAttributeService,c=u.getLayerStyleAttributes()||[];c.filter(function(p){return p.needRegenerateVertices}).forEach(function(p){u.updateAttributeByFeatureRange(p.name,r.getEncodedData(),p.featureRange.startIndex,p.featureRange.endIndex),p.needRegenerateVertices=!1})}}]),e}())||_M);Xf.bind(Xt.ILayerPlugin).to(wk).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(Vy).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(NT).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(Ek).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(gF).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(wD).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(IF).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(yM).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(SF).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(Xv).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(ED).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(bF).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(wF).inRequestScope(),Xf.bind(Xt.ILayerPlugin).to(vF).inRequestScope();function h8(e){var i=PF();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function PF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var L4=null;function xM(e){var i=OF();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function OF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var kF=function(e){(0,yr.Z)(r,e);var i=xM(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"zoomIn",function(){!o.disabled&&o.mapsService.getZoom()<o.mapsService.getMaxZoom()&&o.mapsService.zoomIn()}),(0,Ne.Z)((0,Ar.Z)(o),"zoomOut",function(){!o.disabled&&o.mapsService.getZoom()>o.mapsService.getMinZoom()&&o.mapsService.zoomOut()}),(0,Ne.Z)((0,Ar.Z)(o),"updateDisabled",function(){var g=o.mapsService;o.zoomInButton.removeAttribute("disabled"),o.zoomOutButton.removeAttribute("disabled"),(o.disabled||g.getZoom()<=g.getMinZoom())&&o.zoomOutButton.setAttribute("disabled","true"),o.controlOption.showZoom&&o.zoomNumDiv&&(o.zoomNumDiv.innerText=String(Math.floor(g.getZoom()))),(o.disabled||g.getZoom()>=g.getMaxZoom())&&o.zoomInButton.setAttribute("disabled","true")}),o}return(0,st.Z)(r,[{key:"getDefault",value:function(u){return(0,ne.Z)((0,ne.Z)({},Cf((0,Ft.Z)(r.prototype),"getDefault",this).call(this,u)),{},{position:es.BOTTOMRIGHT,name:"zoom",zoomInText:_b("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:_b("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}},{key:"setOptions",value:function(u){Cf((0,Ft.Z)(r.prototype),"setOptions",this).call(this,u),this.checkUpdateOption(u,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var u=Gs("div","l7-control-zoom");return this.resetButtonGroup(u),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),u}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(u){Fh(u),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",u,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",u)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",u,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(u,c,p,g,y){var w=Gs("button",p,g);return typeof u=="string"?w.innerHTML=u:w.append(u),w.title=c,y&&w.addEventListener("click",y),w}}]),r}(uy);function iE(e){var i=Td();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function Td(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var LF=null;function bM(e){var i=DF();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function DF(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var D4=Ta.get,SM=null;function Up(e,i){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(i||(i=document),!!i)){var u=i.head||i.getElementsByTagName("head")[0];if(!u){u=i.createElement("head");var c=i.body||i.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):i.documentElement.appendChild(u)}var p=i.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(i.createTextNode(e)),u.appendChild(p),p}}Up(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
}
.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-control-container .l7-column {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 6px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-popper.l7-popper-end {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-flex: 0;
      -ms-flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
          flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item input[type='radio'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  -webkit-box-shadow: 0 0 0;
          box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  -webkit-transition: width 0.1s;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -ms-touch-action: none;
      touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var aE,U1,oE,r0=(aE=ab(Xt.IGlobalConfigService),U1=function(){function e(i){(0,Pt.Z)(this,e),Da(this,"configService",oE,this),this.config=i}return(0,st.Z)(e,[{key:"setContainer",value:function(r,o,u){r.bind(Xt.MapConfig).toConstantValue((0,ne.Z)((0,ne.Z)({},this.config),{},{id:o,canvas:u})),r.bind(Xt.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),e}(),oE=Aa(U1.prototype,"configService",[aE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U1),FF=k(59858),BF=k(81618),EM=k.n(BF);function Hy(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function sE(e,i){var r=yh([],i,e);return kv(r,r,1/r[3]),r}function F4(e,i){var r=e%i;return r<0?i+r:r}function B4(e,i,r){return r*i+(1-r)*e}function Yv(e,i){if(!e)throw new Error(i||"viewport-mercator-project: assertion failed.")}var Ah=Math.PI,wM=Ah/4,pv=Ah/180,CM=180/Ah,uE=512,lE=4003e4,NF=1.5;function Z1(e){return Math.pow(2,e)}function zF(e){return Math.log2(e)}function V1(e,i){var r=(0,Zi.Z)(e,2),o=r[0],u=r[1];Yv(Number.isFinite(o)&&Number.isFinite(i)),Yv(Number.isFinite(u)&&u>=-90&&u<=90,"invalid latitude"),i*=uE;var c=o*pv,p=u*pv,g=i*(c+Ah)/(2*Ah),y=i*(Ah-Math.log(Math.tan(wM+p*.5)))/(2*Ah);return[g,y]}function jy(e,i){var r=(0,Zi.Z)(e,2),o=r[0],u=r[1];i*=uE;var c=o/i*(2*Ah)-Ah,p=2*(Math.atan(Math.exp(Ah-u/i*(2*Ah)))-wM);return[c*CM,p*CM]}function p8(e){var i=e.latitude;assert(Number.isFinite(i));var r=Math.cos(i*pv);return zF(lE*r)-9}function AM(e){var i=e.latitude,r=e.longitude,o=e.zoom,u=e.scale,c=e.highPrecision,p=c===void 0?!1:c;u=u!==void 0?u:Z1(o),Yv(Number.isFinite(i)&&Number.isFinite(r)&&Number.isFinite(u));var g={},y=uE*u,w=Math.cos(i*pv),O=y/360,D=O/w,V=y/lE/w;if(g.pixelsPerMeter=[V,-V,V],g.metersPerPixel=[1/V,-1/V,1/V],g.pixelsPerDegree=[O,-D,V],g.degreesPerPixel=[1/O,-1/D,1/V],p){var X=pv*Math.tan(i*pv)/w,ce=O*X/2,de=y/lE*X,we=de/D*V;g.pixelsPerDegree2=[0,-ce,de],g.pixelsPerMeter2=[we,0,we]}return g}function N4(e,i){var r=_slicedToArray(e,3),o=r[0],u=r[1],c=r[2],p=_slicedToArray(i,3),g=p[0],y=p[1],w=p[2],O=1,D=AM({longitude:o,latitude:u,scale:O,highPrecision:!0}),V=D.pixelsPerMeter,X=D.pixelsPerMeter2,ce=V1(e,O);ce[0]+=g*(V[0]+X[0]*y),ce[1]+=y*(V[1]+X[1]*y);var de=jy(ce,O),we=(c||0)+(w||0);return Number.isFinite(c)||Number.isFinite(w)?[de[0],de[1],we]:de}function UF(e){var i=e.height,r=e.pitch,o=e.bearing,u=e.altitude,c=e.center,p=c===void 0?null:c,g=e.flipY,y=g===void 0?!1:g,w=Hy();return oc(w,w,[0,0,-u]),wc(w,w,[1,1,1/i]),Ka(w,w,-r*pv),Op(w,w,o*pv),y&&wc(w,w,[1,-1,1]),p&&oc(w,w,Ja.negate([],p)),w}function ZF(e){var i=e.width,r=e.height,o=e.altitude,u=o===void 0?NF:o,c=e.pitch,p=c===void 0?0:c,g=e.nearZMultiplier,y=g===void 0?1:g,w=e.farZMultiplier,O=w===void 0?1:w,D=p*pv,V=Math.atan(.5/u),X=Math.sin(V)*u/Math.sin(Math.PI/2-D-V),ce=Math.cos(Math.PI/2-D)*X+u;return{fov:2*Math.atan(r/2/u),aspect:i/r,focalDistance:u,near:y,far:ce*O}}function VF(e){var i=e.width,r=e.height,o=e.pitch,u=e.altitude,c=e.nearZMultiplier,p=e.farZMultiplier,g=ZF({width:i,height:r,altitude:u,pitch:o,nearZMultiplier:c,farZMultiplier:p}),y=g.fov,w=g.aspect,O=g.near,D=g.far,V=Lr([],y,w,O,D);return V}function TM(e,i){var r=(0,Zi.Z)(e,3),o=r[0],u=r[1],c=r[2],p=c===void 0?0:c;return Yv(Number.isFinite(o)&&Number.isFinite(u)&&Number.isFinite(p)),sE(i,[o,u,p,1])}function MM(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=(0,Zi.Z)(e,3),u=o[0],c=o[1],p=o[2];if(Yv(Number.isFinite(u)&&Number.isFinite(c),"invalid pixel coordinate"),Number.isFinite(p)){var g=sE(i,[u,c,p,1]);return g}var y=sE(i,[u,c,0,1]),w=sE(i,[u,c,1,1]),O=y[2],D=w[2],V=O===D?0:((r||0)-O)/(D-O);return Kn.t7([],y,w,V)}var RM=Hy(),HF=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=i.width,o=i.height,u=i.viewMatrix,c=u===void 0?RM:u,p=i.projectionMatrix,g=p===void 0?RM:p;(0,Pt.Z)(this,e),this.width=r||1,this.height=o||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=c,this.projectionMatrix=g;var y=Hy();Zu(y,y,this.projectionMatrix),Zu(y,y,this.viewMatrix),this.viewProjectionMatrix=y;var w=Hy();wc(w,w,[this.width/2,-this.height/2,1]),oc(w,w,[1,-1,0]),Zu(w,w,this.viewProjectionMatrix);var O=of(Hy(),w);if(!O)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=w,this.pixelUnprojectionMatrix=O,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,st.Z)(e,[{key:"equals",value:function(r){return r instanceof e?r.width===this.width&&r.height===this.height&&ji(r.projectionMatrix,this.projectionMatrix)&&ji(r.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.topLeft,c=u===void 0?!0:u,p=this.projectPosition(r),g=TM(p,this.pixelProjectionMatrix),y=(0,Zi.Z)(g,2),w=y[0],O=y[1],D=c?O:this.height-O;return r.length===2?[w,D]:[w,D,g[2]]}},{key:"unproject",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.topLeft,c=u===void 0?!0:u,p=o.targetZ,g=(0,Zi.Z)(r,3),y=g[0],w=g[1],O=g[2],D=c?w:this.height-w,V=p&&p*this.pixelsPerMeter,X=MM([y,D,O],this.pixelUnprojectionMatrix,V),ce=this.unprojectPosition(X),de=(0,Zi.Z)(ce,3),we=de[0],je=de[1],ht=de[2];return Number.isFinite(O)?[we,je,ht]:Number.isFinite(p)?[we,je,p]:[we,je]}},{key:"projectPosition",value:function(r){var o=this.projectFlat(r),u=(0,Zi.Z)(o,2),c=u[0],p=u[1],g=(r[2]||0)*this.pixelsPerMeter;return[c,p,g]}},{key:"unprojectPosition",value:function(r){var o=this.unprojectFlat(r),u=(0,Zi.Z)(o,2),c=u[0],p=u[1],g=(r[2]||0)/this.pixelsPerMeter;return[c,p,g]}},{key:"projectFlat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return r}},{key:"unprojectFlat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return r}}]),e}();function jF(e){var i=e.width,r=e.height,o=e.bounds,u=e.minExtent,c=u===void 0?0:u,p=e.maxZoom,g=p===void 0?24:p,y=e.padding,w=y===void 0?0:y,O=e.offset,D=O===void 0?[0,0]:O,V=(0,Zi.Z)(o,2),X=(0,Zi.Z)(V[0],2),ce=X[0],de=X[1],we=(0,Zi.Z)(V[1],2),je=we[0],ht=we[1];if(Number.isFinite(w)){var _t=w;w={top:_t,bottom:_t,left:_t,right:_t}}else Yv(Number.isFinite(w.top)&&Number.isFinite(w.bottom)&&Number.isFinite(w.left)&&Number.isFinite(w.right));var Dt=new cE({width:i,height:r,longitude:0,latitude:0,zoom:0}),Yt=Dt.project([ce,ht]),ir=Dt.project([je,de]),sr=[Math.max(Math.abs(ir[0]-Yt[0]),c),Math.max(Math.abs(ir[1]-Yt[1]),c)],Tr=[i-w.left-w.right-Math.abs(D[0])*2,r-w.top-w.bottom-Math.abs(D[1])*2];Yv(Tr[0]>0&&Tr[1]>0);var Vr=Tr[0]/sr[0],sn=Tr[1]/sr[1],ln=(w.right-w.left)/2/Vr,Zn=(w.bottom-w.top)/2/sn,ci=[(ir[0]+Yt[0])/2+ln,(ir[1]+Yt[1])/2+Zn],ki=Dt.unproject(ci),eo=Dt.zoom+Math.log2(Math.abs(Math.min(Vr,sn)));return{longitude:ki[0],latitude:ki[1],zoom:Math.min(eo,g)}}var cE=function(e){(0,yr.Z)(i,e);function i(){var r,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=o.width,c=o.height,p=o.latitude,g=p===void 0?0:p,y=o.longitude,w=y===void 0?0:y,O=o.zoom,D=O===void 0?0:O,V=o.pitch,X=V===void 0?0:V,ce=o.bearing,de=ce===void 0?0:ce,we=o.altitude,je=we===void 0?1.5:we,ht=o.nearZMultiplier,_t=o.farZMultiplier;(0,Pt.Z)(this,i),u=u||1,c=c||1;var Dt=Z1(D);je=Math.max(.75,je);var Yt=V1([w,g],Dt);Yt[2]=0;var ir=VF({width:u,height:c,pitch:X,bearing:de,altitude:je,nearZMultiplier:ht||1/c,farZMultiplier:_t||1.01}),sr=UF({height:c,center:Yt,pitch:X,bearing:de,altitude:je,flipY:!0});return r=(0,Fr.Z)(this,(0,Ft.Z)(i).call(this,{width:u,height:c,viewMatrix:sr,projectionMatrix:ir})),r.latitude=g,r.longitude=w,r.zoom=D,r.pitch=X,r.bearing=de,r.altitude=je,r.scale=Dt,r.center=Yt,r.pixelsPerMeter=AM((0,Ar.Z)((0,Ar.Z)(r))).pixelsPerMeter[2],Object.freeze((0,Ar.Z)((0,Ar.Z)(r))),r}return(0,st.Z)(i,[{key:"projectFlat",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return V1(o,u)}},{key:"unprojectFlat",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return jy(o,u)}},{key:"getMapCenterByLngLatPosition",value:function(o){var u=o.lngLat,c=o.pos,p=MM(c,this.pixelUnprojectionMatrix),g=V1(u,this.scale),y=Kn.IH([],g,Kn.tk([],p)),w=Kn.IH([],this.center,y);return jy(w,this.scale)}},{key:"getLocationAtPoint",value:function(o){var u=o.lngLat,c=o.pos;return this.getMapCenterByLngLatPosition({lngLat:u,pos:c})}},{key:"fitBounds",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=this.width,p=this.height,g=jF(Object.assign({width:c,height:p,bounds:o},u)),y=g.longitude,w=g.latitude,O=g.zoom;return new i({width:c,height:p,longitude:y,latitude:w,zoom:O})}}]),i}(HF),IM=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.center,u=r.zoom,c=r.pitch,p=r.bearing,g=r.viewportHeight,y=r.viewportWidth,w=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new cE((0,ne.Z)((0,ne.Z)({},w),{},{width:y,height:g,longitude:o&&o[0],latitude:o&&o[1],zoom:u,pitch:c,bearing:p}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}}]),e}(),PM=function(){function e(i){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"size",1e4),this.size=i||1e4}return(0,st.Z)(e,[{key:"setSize",value:function(r){this.size=r}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(r){return(180+r)/360*this.size}},{key:"mercatorYfromLat",value:function(r){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(r){return r/this.size*360-180}},{key:"latFromMercatorY",value:function(r){var o=180-(1-r/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90}},{key:"project",value:function(r){var o=this.mercatorXfromLng(r[0]),u=this.mercatorYfromLat(r[1]);return[o,u]}},{key:"unproject",value:function(r){var o=this.lngFromMercatorX(r[0]),u=this.latFromMercatorY(r[1]);return[o,u]}}]),e}();function OM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={top:0,right:0,bottom:0,left:0};if(typeof e=="number")return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(e.length===4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return(0,ne.Z)((0,ne.Z)({},i),e)}var WF={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},z4=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],Th,Kv,kM,fE,hE,pE,qv,LM,DM,FM,BM;function GF(e,i){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(i||(i=document),!!i)){var u=i.head||i.getElementsByTagName("head")[0];if(!u){u=i.createElement("head");var c=i.body||i.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):i.documentElement.appendChild(u)}var p=i.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(i.createTextNode(e)),u.appendChild(p),p}}GF(`.amap-logo{
 display: none !important;
}
.amap-copyright {
  display: none !important;
}
`);var $F={contextmenu:"rightclick"},NM={contextmenu:"rightclick",camerachange:"viewchange"},n0={"GAODE1.x":$F,"GAODE2.x":NM},H1=0;window.forceWebGL=!0;var i0="15cd8a57710d40c9b7c0e3cc120f1200",zM="1.4.15",XF="amap-script",dE=!1,Wy=[],UM=12,vE=(Th=(0,It.b2)(),Kv=(0,It.f3)(Xt.IGlobalConfigService),kM=(0,It.f3)(Xt.MapConfig),fE=(0,It.f3)(Xt.ICoordinateSystemService),hE=(0,It.f3)(Xt.IEventEmitter),Th(pE=(qv=function(){function e(){var i=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"version",Fu["GAODE1.x"]),(0,Ne.Z)(this,"simpleMapCoord",new PM),(0,Ne.Z)(this,"bgColor","rgba(0, 0, 0, 0)"),Da(this,"configService",LM,this),Da(this,"config",DM,this),Da(this,"coordinateSystemService",FM,this),Da(this,"eventEmitter",BM,this),(0,Ne.Z)(this,"handleCameraChanged",function(r){var o=r.camera,u=o.fov,c=o.near,p=o.far,g=o.height,y=o.pitch,w=o.rotation,O=o.aspect,D=o.position,V=i.getCenter(),X=V.lng,ce=V.lat;if(i.emit("mapchange"),i.cameraChangedCallback){i.viewport.syncWithMapCamera({aspect:O,bearing:360-w,far:p,fov:u,cameraHeight:g,near:c,pitch:y,zoom:i.map.getZoom()-1,center:[X,ce],offsetOrigin:[D.x,D.y]});var de=i.config.offsetZoom,we=de===void 0?UM:de;i.viewport.getZoom()>we?i.coordinateSystemService.setCoordinateSystem(Ru.P20_OFFSET):i.coordinateSystemService.setCoordinateSystem(Ru.P20),i.cameraChangedCallback(i.viewport)}})}return(0,st.Z)(e,[{key:"setBgColor",value:function(r){this.bgColor=r}},{key:"addMarkerContainer",value:function(){var r=this.map.getContainer();if(r!==null){var o=r.getElementsByClassName("amap-maps")[0];this.markerContainer=Gs("div","l7-marker-container",o)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(r,o){Z_.indexOf(r)!==-1?this.eventEmitter.on(r,o):this.map.on(n0[this.version][r]||r,o)}},{key:"off",value:function(r,o){Z_.indexOf(r)!==-1?this.eventEmitter.off(r,o):this.map.off(n0[this.version][r]||r,o)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var r;return(r=this.map.getContainer())===null||r===void 0?void 0:r.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var r=this.map.getSize();return[r.getWidth(),r.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(r){return this.map.setZoom(r+1)}},{key:"getCenter",value:function(r){if(r!=null&&r.padding){var o=this.getCenter(),u=OM(r.padding),c=this.lngLatToPixel([o.lng,o.lat]),p=[(u.right-u.left)/2,(u.bottom-u.top)/2],g=this.pixelToLngLat([c.x-p[0],c.y-p[1]]);return g}var y=this.map.getCenter();return{lng:y.getLng(),lat:y.getLat()}}},{key:"setCenter",value:function(r,o){if(o!=null&&o.padding){var u=OM(o.padding),c=this.lngLatToPixel(r),p=[(u.right-u.left)/2,(u.bottom-u.top)/2],g=this.pixelToLngLat([c.x+p[0],c.y+p[1]]);this.map.setCenter([g.lng,g.lat])}else this.map.setCenter(r)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var r=this.map.getBounds().toBounds(),o=r.getNorthEast(),u=r.getSouthWest(),c=this.getCenter(),p=c.lng>o.getLng()||c.lng<u.getLng()?180-o.getLng():o.getLng(),g=c.lng<u.getLng()?u.getLng()-180:u.getLng();return[[g,u.getLat()],[p,o.getLat()]]}},{key:"getMinZoom",value:function(){var r=this.map.get("zooms");return r[0]-1}},{key:"getMaxZoom",value:function(){var r=this.map.get("zooms");return r[1]-1}},{key:"setRotation",value:function(r){return this.map.setRotation(r)}},{key:"setPitch",value:function(r){return this.map.setPitch(r)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(r){this.map.panTo(r)}},{key:"panBy",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy(r,o)}},{key:"fitBounds",value:function(r){this.map.setBounds(new AMap.Bounds([r[0][0],r[0][1],r[1][0],r[1][1]]))}},{key:"setZoomAndCenter",value:function(r,o){this.map.setZoomAndCenter(r+1,o)}},{key:"setMapStyle",value:function(r){this.map.setMapStyle(this.getMapStyleValue(r))}},{key:"setMapStatus",value:function(r){this.map.setStatus(r)}},{key:"getMapStyleConfig",value:function(){return WF}},{key:"getMapStyleValue",value:function(r){return this.getMapStyleConfig()[r]||r}},{key:"getMapStyle",value:function(){return this.map.getMapStyle()}},{key:"pixelToLngLat",value:function(r){var o=this.map.pixelToLngLat(new AMap.Pixel(r[0],r[1]));return{lng:o.getLng(),lat:o.getLat()}}},{key:"lngLatToPixel",value:function(r){var o=this.map.lnglatToPixel(new AMap.LngLat(r[0],r[1]));return{x:o.getX(),y:o.getY()}}},{key:"containerToLngLat",value:function(r){var o=new AMap.Pixel(r[0],r[1]),u=this.map.containerToLngLat(o);return{lng:u==null?void 0:u.getLng(),lat:u==null?void 0:u.getLat()}}},{key:"lngLatToContainer",value:function(r){var o=new AMap.LngLat(r[0],r[1]),u=this.map.lngLatToContainer(o);return{x:u.getX(),y:u.getY()}}},{key:"lngLatToCoord",value:function(r){var o=this.map.lngLatToGeodeticCoord(r),u=o.x,c=o.y;return[u,-c]}},{key:"lngLatToMercator",value:function(r,o){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(r,o,u){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],p=this.viewport.projectFlat(r),g=Os();return oc(g,g,Ja.fromValues(p[0],p[1],o)),wc(g,g,Ja.fromValues(c[0],c[1],c[2])),Ka(g,g,u[0]),sf(g,g,u[1]),Op(g,g,u[2]),g}},{key:"init",value:function(){var i=(0,Sn.Z)(nr().mark(function o(){var u=this,c,p,g,y,w,O,D,V,X,ce,de,we,je,ht;return nr().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return c=this.config,p=c.id,g=c.style,y=g===void 0?"light":g,w=c.minZoom,O=w===void 0?0:w,D=c.maxZoom,V=D===void 0?18:D,X=c.token,ce=X===void 0?i0:X,de=c.mapInstance,we=c.plugin,je=we===void 0?[]:we,ht=(0,Uc.Z)(c,z4),Dt.next=3,new Promise(function(Yt){var ir=function(){if(de)u.map=de,u.$mapContainer=u.map.getContainer(),setTimeout(function(){u.map.on("camerachange",u.handleCameraChanged),Yt()},30);else{u.$mapContainer=u.creatMapContainer(p);var Tr=(0,ne.Z)({mapStyle:u.getMapStyleValue(y),zooms:[O,V],viewMode:"3D"},ht);Tr.zoom&&(Tr.zoom+=1);var Vr=new AMap.Map(u.$mapContainer,Tr);Vr.on("camerachange",u.handleCameraChanged),Vr.on("camerachange",function(){setTimeout(function(){return u.handleAfterMapChange()})}),u.map=Vr,setTimeout(function(){Yt()},10)}};!dE&&!de?(ce===i0&&console.warn("%c".concat(u.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),dE=!0,je.push("Map3D"),EM().load({key:ce,version:zM,plugins:je}).then(function(){ir(),Wy.length&&(Wy.forEach(function(sr){return sr()}),Wy=[])}).catch(function(sr){throw new Error(sr)})):dE&&window.AMap||de?ir():Wy.push(ir)});case 3:this.viewport=new IM;case 4:case"end":return Dt.stop()}},o,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"meterToCoord",value:function(r,o){var u=AMap.GeometryUtil.distance(un(AMap.LngLat,(0,In.Z)(r)),un(AMap.LngLat,(0,In.Z)(o))),c=this.lngLatToCoord(r),p=(0,Zi.Z)(c,2),g=p[0],y=p[1],w=this.lngLatToCoord(o),O=(0,Zi.Z)(w,2),D=O[0],V=O[1],X=Math.sqrt(Math.pow(g-D,2)+Math.pow(y-V,2));return X/u}},{key:"updateView",value:function(r){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(r){var o,u=(o=this.getContainer())===null||o===void 0?void 0:o.getElementsByClassName("amap-layer")[0],c=r==="jpg"?u==null?void 0:u.toDataURL("image/jpeg"):u==null?void 0:u.toDataURL("image/png");return c}},{key:"emit",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).emit.apply(o,[r].concat(c))}},{key:"once",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).once.apply(o,[r].concat(c))}},{key:"destroy",value:function(){var r;(r=this.$mapContainer)===null||r===void 0||(r=r.parentNode)===null||r===void 0||r.removeChild(this.$mapContainer),delete window.initAMap;var o=document.getElementById(XF);o&&document.head.removeChild(o),this.map.destroy()}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(r){this.cameraChangedCallback=r}},{key:"handleAfterMapChange",value:function(){this.emit("mapAfterFrameChange")}},{key:"creatMapContainer",value:function(r){var o=r;typeof r=="string"&&(o=document.getElementById(r));var u=document.createElement("div");return u.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,u.id="l7_amap_div"+H1++,o.appendChild(u),u}}]),e}(),LM=Aa(qv.prototype,"configService",[Kv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DM=Aa(qv.prototype,"config",[kM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FM=Aa(qv.prototype,"coordinateSystemService",[fE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BM=Aa(qv.prototype,"eventEmitter",[hE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qv))||pE);if(!window)throw Error("AMap JSAPI can only be used in Browser.");var rp=function(e){return e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed",e}(rp||{}),Gc={key:"",AMap:{version:"2.0",plugins:[]}},np={AMap:rp.notload},YF=[],KF=function(i){if(typeof i=="function"){if(np.AMap===rp.loaded){i(window.AMap);return}YF.push(i)}},qF=function(){var e=(0,Sn.Z)(nr().mark(function i(r){return nr().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(c,p){if(np.AMap===rp.failed)p("");else if(np.AMap===rp.notload){var g=r.key,y=r.version,w=r.plugins;if(!g){p("\u8BF7\u586B\u5199key");return}window.AMap&&location.host!=="lbs.amap.com"&&p("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),Gc.key=g,Gc.AMap.version=y||Gc.AMap.version,Gc.AMap.plugins=w||Gc.AMap.plugins,np.AMap=rp.loading;var O=document.body||document.head;window._onAPILoaded=function(ce){ce?(np.AMap=rp.failed,p(ce)):(np.AMap=rp.loaded,c(null))};var D=document.createElement("script");D.type="text/javascript",D.async=!1,D.src="https://webapi.amap.com/maps?callback=_onAPILoaded&v="+Gc.AMap.version+"&key="+g+"&plugin="+Gc.AMap.plugins.join(","),D.onerror=function(ce){np.AMap=rp.failed,p(ce)},O.appendChild(D)}else if(np.AMap===rp.loaded){if(r.key&&r.key!==Gc.key){p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(r.version&&r.version!==Gc.AMap.version){p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var V=[];r.plugins&&r.plugins.forEach(function(ce){Gc.AMap.plugins.indexOf(ce)===-1&&V.push(ce)}),V.length&&window.AMap.plugin(V,function(){c(window.AMap)})}else{if(r.key&&r.key!==Gc.key){p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(r.version&&r.version!==Gc.AMap.version){p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var X=[];r.plugins&&r.plugins.forEach(function(ce){Gc.AMap.plugins.indexOf(ce)===-1&&X.push(ce)}),KF(function(){X.length&&window.AMap.plugin(X,function(){c(window.AMap)})})}}));case 1:case"end":return u.stop()}},i)}));return function(r){return e.apply(this,arguments)}}();function QF(){delete window.AMap,Gc={key:"",AMap:{version:"1.4.15",plugins:[]}},np={AMap:rp.notload}}var JF={load:qF,reset:QF},ZM=Math.PI/180,e5=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"projectionMatrix",Os()),(0,Ne.Z)(this,"viewMatrix",Os()),(0,Ne.Z)(this,"viewProjectionMatrix",Os()),(0,Ne.Z)(this,"ViewProjectionMatrixUncentered",Os()),(0,Ne.Z)(this,"viewUncenteredMatrix",Os())}return(0,st.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.zoom,u=o===void 0?1:o,c=r.pitch,p=c===void 0?0:c,g=r.bearing,y=g===void 0?0:g,w=r.center,O=w===void 0?[0,0]:w,D=r.offsetOrigin,V=D===void 0?[0,0]:D,X=r.cameraHeight,ce=X===void 0?1:X,de=r.aspect,we=de===void 0?1:de,je=r.near,ht=je===void 0?.1:je,_t=r.far,Dt=_t===void 0?1e3:_t,Yt=r.fov,ir=Yt===void 0?0:Yt;this.zoom=u,this.center=O;var sr=p*ZM,Tr=(360-y)*ZM;Lr(this.projectionMatrix,ir,we,ht,Dt);var Vr=Ja.fromValues(ce*Math.sin(sr)*Math.sin(Tr),-ce*Math.sin(sr)*Math.cos(Tr),ce*Math.cos(sr)),sn=Ja.fromValues(-Math.cos(sr)*Math.sin(Tr),Math.cos(sr)*Math.cos(Tr),Math.sin(sr));Dn(this.viewMatrix,Vr,Ja.fromValues(0,0,0),sn),this.viewUncenteredMatrix=Xh(this.viewMatrix),oc(this.viewMatrix,this.viewMatrix,Ja.fromValues(-V[0],V[1],0)),Zu(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Zu(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var r=(0,Zi.Z)(this.center,2),o=r[0],u=r[1];return[o,u]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r){var o=85.0511287798,u=Math.max(Math.min(o,r[1]),-o),c=256<<20,p=Math.PI/180,g=r[0]*p,y=u*p;y=Math.log(Math.tan(Math.PI/4+y/2));var w=.5/Math.PI,O=.5,D=-.5/Math.PI;return p=.5,g=c*(w*g+O)-215440491,y=-(c*(D*y+p)-106744817),[g,y]}}]),e}(),t5=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],VM,r5;function ip(e){var i=j1();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function j1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}window.forceWebGL=!0;var W1="15cd8a57710d40c9b7c0e3cc120f1200",gE="1.4.15",mE=!1,G1=[],n5=12,i5=(VM=(0,It.b2)(),VM(r5=function(e){(0,yr.Z)(r,e);var i=ip(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"version","GAODE1.x"),(0,Ne.Z)((0,Ar.Z)(o),"handleCameraChanged",function(g){var y=g.camera,w=y.fov,O=y.near,D=y.far,V=y.height,X=y.pitch,ce=y.rotation,de=y.aspect,we=y.position,je=o.getCenter(),ht=je.lng,_t=je.lat;if(o.emit("mapchange"),o.cameraChangedCallback){o.viewport.syncWithMapCamera({aspect:de,bearing:360-ce,far:D,fov:w,cameraHeight:V,near:O,pitch:X,zoom:o.map.getZoom()-1,center:[ht,_t],offsetOrigin:[we.x,we.y]});var Dt=o.config.offsetZoom,Yt=Dt===void 0?n5:Dt;o.viewport.getZoom()>Yt?o.coordinateSystemService.setCoordinateSystem(Ru.P20_OFFSET):o.coordinateSystemService.setCoordinateSystem(Ru.P20),o.cameraChangedCallback(o.viewport)}}),o}return(0,st.Z)(r,[{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=this.viewport.projectFlat(u),w=Os();return oc(w,w,Ja.fromValues(y[0],y[1],c)),wc(w,w,Ja.fromValues(g[0],g[1],g[2])),Ka(w,w,p[0]),sf(w,w,p[1]),Op(w,w,p[2]),w}},{key:"init",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p=this,g,y,w,O,D,V,X,ce,de,we,je,ht,_t,Dt;return nr().wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return g=this.config,y=g.id,w=g.style,O=w===void 0?"light":w,D=g.minZoom,V=D===void 0?0:D,X=g.maxZoom,ce=X===void 0?18:X,de=g.token,we=de===void 0?W1:de,je=g.mapInstance,ht=g.plugin,_t=ht===void 0?[]:ht,Dt=(0,Uc.Z)(g,t5),ir.next=3,new Promise(function(sr){var Tr=function(){if(je)p.map=je,p.$mapContainer=p.map.getContainer(),setTimeout(function(){p.map.on("camerachange",p.handleCameraChanged),sr()},30);else{p.$mapContainer=p.creatMapContainer(y);var sn=(0,ne.Z)({mapStyle:p.getMapStyleValue(O),zooms:[V,ce],viewMode:"3D"},Dt);sn.zoom&&(sn.zoom+=1);var ln=new AMap.Map(p.$mapContainer,sn);ln.on("camerachange",p.handleCameraChanged),ln.on("camerachange",function(){setTimeout(function(){return p.handleAfterMapChange()})}),p.map=ln,setTimeout(function(){sr()},10)}};!mE&&!je?(we===W1&&console.warn(p.configService.getSceneWarninfo("MapToken")),mE=!0,_t.push("Map3D"),JF.load({key:we,version:gE,plugins:_t}).then(function(Vr){Tr(),G1.length&&(G1.forEach(function(sn){return sn()}),G1=[])}).catch(function(Vr){throw new Error(Vr)})):mE&&window.AMap||je?Tr():G1.push(Tr)});case 3:this.viewport=new e5;case 4:case"end":return ir.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"meterToCoord",value:function(u,c){var p=AMap.GeometryUtil.distance(un(AMap.LngLat,(0,In.Z)(u)),un(AMap.LngLat,(0,In.Z)(c))),g=this.lngLatToCoord(u),y=(0,Zi.Z)(g,2),w=y[0],O=y[1],D=this.lngLatToCoord(c),V=(0,Zi.Z)(D,2),X=V[0],ce=V[1],de=Math.sqrt(Math.pow(w-X,2)+Math.pow(O-ce,2));return de/p}},{key:"updateView",value:function(u){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(u){var c,p=(c=this.getContainer())===null||c===void 0?void 0:c.getElementsByClassName("amap-layer")[0],g=u==="jpg"?p==null?void 0:p.toDataURL("image/jpeg"):p==null?void 0:p.toDataURL("image/png");return g}},{key:"onCameraChanged",value:function(u){this.cameraChangedCallback=u}}]),r}(vE))||r5);function HM(e){var i=a5();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function a5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var o5=function(e){(0,yr.Z)(r,e);var i=HM(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getServiceConstructor",value:function(){return i5}}]),r}(r0),s5=function(){function e(){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"projectionMatrix",Os()),(0,Ne.Z)(this,"viewMatrix",Os()),(0,Ne.Z)(this,"viewProjectionMatrix",Os()),(0,Ne.Z)(this,"ViewProjectionMatrixUncentered",Os()),(0,Ne.Z)(this,"viewUncenteredMatrix",Os())}return(0,st.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.zoom,u=o===void 0?1:o,c=r.center,p=c===void 0?[0,0]:c,g=r.offsetOrigin,y=g===void 0?[0,0]:g,w=r.cameraPosition,O=w===void 0?[0,0,0]:w,D=r.up,V=D===void 0?[0,1,0]:D,X=r.lookAt,ce=X===void 0?[0,0,0]:X,de=r.aspect,we=de===void 0?1:de,je=r.near,ht=je===void 0?.1:je,_t=r.far,Dt=_t===void 0?1e3:_t,Yt=r.fov,ir=Yt===void 0?45:Yt;this.zoom=u,this.center=p,Lr(this.projectionMatrix,ir/180*Math.PI,we,ht,Dt);var sr=Ja.fromValues.apply(Ja,(0,In.Z)(O)),Tr=Ja.fromValues.apply(Ja,(0,In.Z)(ce)),Vr=Ja.fromValues.apply(Ja,(0,In.Z)(V));Dn(this.viewMatrix,sr,Tr,Vr),this.viewUncenteredMatrix=Xh(this.viewMatrix),oc(this.viewMatrix,this.viewMatrix,Ja.fromValues(-y[0],y[1],0)),Zu(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Zu(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var r=(0,Zi.Z)(this.center,2),o=r[0],u=r[1];return[o,u]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1.2}},{key:"projectFlat",value:function(r){var o=85.0511287798,u=Math.max(Math.min(o,r[1]),-o),c=256<<20,p=Math.PI/180,g=r[0]*p,y=u*p;y=Math.log(Math.tan(Math.PI/4+y/2));var w=.5/Math.PI,O=.5,D=-.5/Math.PI;return p=.5,g=c*(w*g+O)-215440491,y=-(c*(D*y+p)-106744817),[g,y]}}]),e}(),u5=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"],jM,WM;function l5(e){var i=c5();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function c5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function U4(e,i){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(i||(i=document),!!i)){var u=i.head||i.getElementsByTagName("head")[0];if(!u){u=i.createElement("head");var c=i.body||i.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):i.documentElement.appendChild(u)}var p=i.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(i.createTextNode(e)),u.appendChild(p),p}}U4(`.amap-logo{
 display: none !important;
}
.amap-copyright {
  display: none !important;
}
`);var $1=[108.92361,34.54083];window.forceWebGL=!0;var GM="f59bcf249433f8b05caaee19f349b3d7",$M="2.0",Z4=!1,V4=null,yE=(jM=(0,It.b2)(),jM(WM=function(e){(0,yr.Z)(r,e);var i=l5(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"version","GAODE2.x"),(0,Ne.Z)((0,Ar.Z)(o),"handleViewChanged",function(g){var y=o.map.customCoords.getCameraParams(),w=y.fov,O=y.near,D=y.far,V=y.aspect,X=y.position,ce=y.lookAt,de=y.up;o.emit("mapchange");var we=o.map.customCoords.getCenter();o.cameraChangedCallback&&(o.viewport.syncWithMapCamera({aspect:V,far:D,fov:w,cameraPosition:X,lookAt:ce,up:de,near:O,zoom:o.map.getZoom()-1,center:we,offsetOrigin:[X[0],X[1]]}),o.coordinateSystemService.setCoordinateSystem(Ru.P20_2),o.cameraChangedCallback(o.viewport))}),o}return(0,st.Z)(r,[{key:"setCustomCoordCenter",value:function(u){this.sceneCenter=u,this.sceneCenterMercator=kc.apply(void 0,(0,In.Z)(u))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMercator}},{key:"lngLatToCoordByLayer",value:function(u,c){var p=c||this.sceneCenterMercator,g=this._sub(kc(u[0],u[1]),p);return u[2]&&g.push(u[2]),g}},{key:"coordToAMap2RelativeCoordinates",value:function(u,c){var p=this,g=kc(c[0],c[1]);return typeof u[0]=="number"?this.lngLatToCoordByLayer(u,g):u.map(function(y){return Array.isArray(y)&&typeof y[0]=="number"?p.lngLatToCoordByLayer(y,g):y.map(function(w){return p.lngLatToCoordByLayer(w,g)})})}},{key:"setCoordCenter",value:function(u){this.map.customCoords.setCenter(u||$1),this.setCustomCoordCenter(u||$1)}},{key:"lngLatToCoord",value:function(u){return this.sceneCenter||(this.map.customCoords.setCenter(u),this.setCustomCoordCenter(u)),this._sub(kc(u[0],u[1]),this.sceneCenterMercator)}},{key:"lngLatToCoords",value:function(u){var c=this;return u.map(function(p){return typeof p[0]=="number"?c.lngLatToCoord(p):p.map(function(g){return c.lngLatToCoord(g)})})}},{key:"addMarkerContainer",value:function(){if(this.map){var u=this.map.getContainer();if(u!==null){var c=u.getElementsByClassName("amap-maps")[0];c.style.zIndex="auto",this.markerContainer=Gs("div","l7-marker-container2",c)}}}},{key:"updateView",value:function(u){}},{key:"getOverlayContainer",value:function(){}},{key:"getType",value:function(){return"amap2"}},{key:"getBounds",value:function(){var u=this.map.getBounds(),c=u.getNorthEast(),p=u.getSouthWest(),g=this.getCenter(),y=g.lng>c.getLng()||g.lng<p.getLng()?180-c.getLng():c.getLng(),w=g.lng<p.getLng()?p.getLng()-180:p.getLng();return[[w,p.getLat()],[y,c.getLat()]]}},{key:"getMinZoom",value:function(){var u=this.map.getZooms();return u[0]-1}},{key:"getMaxZoom",value:function(){var u=this.map.getZooms();return u[1]-1}},{key:"lngLatToContainer",value:function(u){var c=this.map.lngLatToContainer(u);return{x:c.getX(),y:c.getY()}}},{key:"lngLatToPixel",value:function(u){var c=this.map.lngLatToPixel(new AMap.LngLat(u[0],u[1]));return{x:c.getX(),y:c.getY()}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=this.map.customCoords.lngLatToCoord(u),w=Os();return oc(w,w,Ja.fromValues(y[0],y[1],c)),wc(w,w,Ja.fromValues(g[0],g[1],g[2])),Ka(w,w,p[0]),sf(w,w,p[1]),Op(w,w,p[2]),w}},{key:"init",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p,g,y,w,O,D,V,X,ce,de,we,je,ht,_t,Dt,Yt,ir,sr,Tr,Vr,sn,ln;return nr().wrap(function(ci){for(;;)switch(ci.prev=ci.next){case 0:if(p=this.config,g=p.id,y=p.style,w=y===void 0?"light":y,O=p.minZoom,D=O===void 0?0:O,V=p.maxZoom,X=V===void 0?18:V,ce=p.token,de=ce===void 0?GM:ce,we=p.mapInstance,je=p.plugin,ht=je===void 0?[]:je,_t=p.version,Dt=_t===void 0?$M:_t,Yt=(0,Uc.Z)(p,u5),this.viewport=new s5,window.AMap||we){ci.next=6;break}return ht.push("Map3D"),ci.next=6,EM().load({key:de,version:$M,plugins:ht});case 6:we?(this.map=we,this.$mapContainer=this.map.getContainer(),sr=this.map.getCenter(),(ir=this.map.customCoords)===null||ir===void 0||ir.setCenter([sr.lng,sr.lat]),this.setCustomCoordCenter([sr.lng,sr.lat]),this.map.on("viewchange",this.handleViewChanged)):(this.$mapContainer=this.creatMapContainer(g),Vr=(0,ne.Z)({mapStyle:this.getMapStyleValue(w),zooms:[D,X],viewMode:"3D"},Yt),Vr.zoom&&(Vr.zoom+=1),de===GM&&(window._AMapSecurityConfig={securityJsCode:"2653011adeb04230b3a26cc9a780a800"},console.warn("%c".concat(this.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;")),sn=new AMap.Map(this.$mapContainer,Vr),this.map=sn,ln=sn.getCenter(),(Tr=this.map.customCoords)===null||Tr===void 0||Tr.setCenter([ln.lng,ln.lat]),this.setCustomCoordCenter([ln.lng,ln.lat]),sn.on("viewchange",this.handleViewChanged)),this.initViewPort();case 8:case"end":return ci.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(u){this.cameraChangedCallback=u}},{key:"initViewPort",value:function(){var u,c=((u=this.map.customCoords)===null||u===void 0?void 0:u.getCameraParams())||{},p=c.fov,g=c.near,y=c.far,w=c.aspect,O=c.position,D=c.lookAt,V=c.up;this.emit("mapchange");var X=this.map.customCoords.getCenter(),ce=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:w,far:y,fov:p,cameraPosition:O,lookAt:D,near:g,up:V,zoom:ce-1,center:X,offsetOrigin:[O[0],O[1]]}),this.coordinateSystemService.setCoordinateSystem(Ru.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(u,c){var p=[0,0];return p[0]=u[0]-c[0],p[1]=u[1]-c[1],p}}]),r}(vE))||WM);function Gy(e){var i=X1();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function X1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var XM=function(e){(0,yr.Z)(r,e);var i=Gy(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getServiceConstructor",value:function(){return yE}}]),r}(r0),f5=k(99874),YM=k.n(f5);function h5(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p5(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function p5(e,i){if(e){if(typeof e=="string")return KM(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KM(e,i)}}function KM(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var _E;function xE(e,i,r){var o=r-i,u=((e-i)%o+o)%o+i;return u===i?r:u}function dv(e,i,r){return Math.min(r,Math.max(i,e))}function ap(e,i,r){return e*(1-r)+i*r}function Y1(e,i,r,o){var u=new(YM())(e,i,r,o);return function(c){return u.solve(c)}}var bE=Y1(.25,.1,.25,1);function SE(){return _E==null&&(_E=window.matchMedia("(prefers-reduced-motion: reduce)")),_E.matches}function d5(e,i){var r={},o=h5(i),u;try{for(o.s();!(u=o.n()).done;){var c=u.value;c in e&&(r[c]=e[c])}}catch(p){o.e(p)}finally{o.f()}return r}var $c=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),v5=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,g5=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function EE(e){var i=v5(e);return{cancel:function(){return g5(i)}}}function m5(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];for(var u=0,c=r;u<c.length;u++){var p=c[u];for(var g in p)p[g]!==void 0&&(e[g]=p[g])}return e}var qM=63710088e-1,Ou=function(){function e(i,r){if((0,Pt.Z)(this,e),isNaN(i)||isNaN(r))throw new Error("Invalid LngLat object: (".concat(i,", ").concat(r,")"));if(this.lng=+i,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return(0,st.Z)(e,[{key:"wrap",value:function(){return new e(xE(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(r){var o=Math.PI/180,u=this.lat*o,c=r.lat*o,p=Math.sin(u)*Math.sin(c)+Math.cos(u)*Math.cos(c)*Math.cos((r.lng-this.lng)*o),g=qM*Math.acos(Math.min(p,1));return g}}],[{key:"convert",value:function(r){if(r instanceof e)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new e(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&(0,Ps.Z)(r)==="object"&&r!==null){var o="lng"in r?r.lng:r.lon;return new e(Number(o),Number(r.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),K1=function(){function e(i,r){(0,Pt.Z)(this,e),i&&(r?this.setSouthWest(i).setNorthEast(r):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}return(0,st.Z)(e,[{key:"setNorthEast",value:function(r){return this.ne=r instanceof Ou?new Ou(r.lng,r.lat):Ou.convert(r),this}},{key:"setSouthWest",value:function(r){return this.sw=r instanceof Ou?new Ou(r.lng,r.lat):Ou.convert(r),this}},{key:"extend",value:function(r){var o=this.sw,u=this.ne,c,p;if(r instanceof Ou)c=r,p=r;else if(r instanceof e){if(c=r.sw,p=r.ne,!c||!p)return this}else{if(Array.isArray(r))if(r.length===4||r.every(Array.isArray)){var g=r;return this.extend(e.convert(g))}else{var y=r;return this.extend(Ou.convert(y))}return this}return!o&&!u?(this.sw=new Ou(c.lng,c.lat),this.ne=new Ou(p.lng,p.lat)):(o.lng=Math.min(c.lng,o.lng),o.lat=Math.min(c.lat,o.lat),u.lng=Math.max(p.lng,u.lng),u.lat=Math.max(p.lat,u.lat)),this}},{key:"getCenter",value:function(){return new Ou((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new Ou(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Ou(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(r){var o=Ou.convert(r),u=o.lng,c=o.lat,p=this.sw.lat<=c&&c<=this.ne.lat,g=this.sw.lng<=u&&u<=this.ne.lng;return this.sw.lng>this.ne.lng&&(g=this.sw.lng>=u&&u>=this.ne.lng),p&&g}}],[{key:"convert",value:function(r){return r instanceof e?r:new e(r)}}]),e}(),is=function(){function e(i,r){(0,Pt.Z)(this,e),this.x=i,this.y=r}return(0,st.Z)(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"_add",value:function(r){return this.x+=r.x,this.y+=r.y,this}},{key:"add",value:function(r){return this.clone()._add(r)}},{key:"_sub",value:function(r){return this.x-=r.x,this.y-=r.y,this}},{key:"sub",value:function(r){return this.clone()._sub(r)}},{key:"_multByPoint",value:function(r){return this.x*=r.x,this.y*=r.y,this}},{key:"multByPoint",value:function(r){return this.clone()._multByPoint(r)}},{key:"_divByPoint",value:function(r){return this.x/=r.x,this.y/=r.y,this}},{key:"divByPoint",value:function(r){return this.clone()._divByPoint(r)}},{key:"_mult",value:function(r){return this.x*=r,this.y*=r,this}},{key:"mult",value:function(r){return this.clone()._mult(r)}},{key:"_div",value:function(r){return this.x/=r,this.y/=r,this}},{key:"div",value:function(r){return this.clone()._div(r)}},{key:"_rotate",value:function(r){var o=Math.cos(r),u=Math.sin(r),c=o*this.x-u*this.y,p=u*this.x+o*this.y;return this.x=c,this.y=p,this}},{key:"rotate",value:function(r){return this.clone()._rotate(r)}},{key:"_rotateAround",value:function(r,o){var u=Math.cos(r),c=Math.sin(r),p=o.x+u*(this.x-o.x)-c*(this.y-o.y),g=o.y+c*(this.x-o.x)+u*(this.y-o.y);return this.x=p,this.y=g,this}},{key:"roateAround",value:function(r,o){return this.clone()._rotateAround(r,o)}},{key:"_matMult",value:function(r){var o=r[0]*this.x+r[1]*this.y,u=r[2]*this.x+r[3]*this.y;return this.x=o,this.y=u,this}},{key:"matMult",value:function(r){return this.clone()._matMult(r)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var r=this.y;return this.y=this.x,this.x=-r,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(r){return this.x===r.x&&this.y===r.y}},{key:"dist",value:function(r){return Math.sqrt(this.distSqr(r))}},{key:"distSqr",value:function(r){var o=r.x-this.x,u=r.y-this.y;return o*o+u*u}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(r){return Math.atan2(this.y-r.y,this.x-r.x)}},{key:"angleWith",value:function(r){return this.angleWithSep(r.x,r.y)}},{key:"angleWithSep",value:function(r,o){return Math.atan2(this.x*o-this.y*r,this.x*r+this.y*o)}}],[{key:"convert",value:function(r){return r instanceof e?r:Array.isArray(r)?new e(r[0],r[1]):r}}]),e}();function y5(){var e=new Yo.WT(4);return Yo.WT!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function H4(e){var i=new glMatrix.ARRAY_TYPE(4);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i}function j4(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e}function W4(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function G4(e,i,r,o){var u=new glMatrix.ARRAY_TYPE(4);return u[0]=e,u[1]=i,u[2]=r,u[3]=o,u}function $4(e,i,r,o,u){return e[0]=i,e[1]=r,e[2]=o,e[3]=u,e}function X4(e,i){if(e===i){var r=i[1];e[1]=i[2],e[2]=r}else e[0]=i[0],e[1]=i[2],e[2]=i[1],e[3]=i[3];return e}function Y4(e,i){var r=i[0],o=i[1],u=i[2],c=i[3],p=r*c-u*o;return p?(p=1/p,e[0]=c*p,e[1]=-o*p,e[2]=-u*p,e[3]=r*p,e):null}function K4(e,i){var r=i[0];return e[0]=i[3],e[1]=-i[1],e[2]=-i[2],e[3]=r,e}function d8(e){return e[0]*e[3]-e[2]*e[1]}function v8(e,i,r){var o=i[0],u=i[1],c=i[2],p=i[3],g=r[0],y=r[1],w=r[2],O=r[3];return e[0]=o*g+c*y,e[1]=u*g+p*y,e[2]=o*w+c*O,e[3]=u*w+p*O,e}function q4(e,i,r){var o=i[0],u=i[1],c=i[2],p=i[3],g=Math.sin(r),y=Math.cos(r);return e[0]=o*y+c*g,e[1]=u*y+p*g,e[2]=o*-g+c*y,e[3]=u*-g+p*y,e}function g8(e,i,r){var o=i[0],u=i[1],c=i[2],p=i[3],g=r[0],y=r[1];return e[0]=o*g,e[1]=u*g,e[2]=c*y,e[3]=p*y,e}function a(e,i){var r=Math.sin(i),o=Math.cos(i);return e[0]=o,e[1]=r,e[2]=-r,e[3]=o,e}function n(e,i){return e[0]=i[0],e[1]=0,e[2]=0,e[3]=i[1],e}function t(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function s(e){return Math.hypot(e[0],e[1],e[2],e[3])}function l(e,i,r,o){return e[2]=o[2]/o[0],r[0]=o[0],r[1]=o[1],r[3]=o[3]-e[2]*r[1],[e,i,r]}function f(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e[3]=i[3]+r[3],e}function d(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e[3]=i[3]-r[3],e}function m(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]}function x(e,i){var r=e[0],o=e[1],u=e[2],c=e[3],p=i[0],g=i[1],y=i[2],w=i[3];return Math.abs(r-p)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-g)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-w)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))}function A(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=i[3]*r,e}function P(e,i,r,o){return e[0]=i[0]+r[0]*o,e[1]=i[1]+r[1]*o,e[2]=i[2]+r[2]*o,e[3]=i[3]+r[3]*o,e}var L=null,B=null,U=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if((0,Pt.Z)(this,e),isNaN(i)||i<0||isNaN(r)||r<0||isNaN(o)||o<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=r,this.left=o,this.right=u}return(0,st.Z)(e,[{key:"interpolate",value:function(r,o,u){return o.top!=null&&r.top!=null&&(this.top=ap(r.top,o.top,u)),o.bottom!=null&&r.bottom!=null&&(this.bottom=ap(r.bottom,o.bottom,u)),o.left!=null&&r.left!=null&&(this.left=ap(r.left,o.left,u)),o.right!=null&&r.right!=null&&(this.right=ap(r.right,o.right,u)),this}},{key:"getCenter",value:function(r,o){var u=dv((this.left+r-this.right)/2,0,r),c=dv((this.top+o-this.bottom)/2,0,o);return new is(u,c)}},{key:"equals",value:function(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}},{key:"clone",value:function(){return new e(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),e}(),Y=2*Math.PI*qM;function se(e){return Y*Math.cos(e*Math.PI/180)}function be(e){return(180+e)/360}function Ee(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function it(e,i){return e/se(i)}function gt(e){return e*360-180}function xt(e){var i=180-e*360;return 360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90}function Bt(e,i){return e*se(xt(i))}function _r(e){return 1/Math.cos(e*Math.PI/180)}var Or=function(){function e(i,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;(0,Pt.Z)(this,e),this.x=+i,this.y=+r,this.z=+o}return(0,st.Z)(e,[{key:"toLngLat",value:function(){return new Ou(gt(this.x),xt(this.y))}},{key:"toAltitude",value:function(){return Bt(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/Y*_r(xt(this.y))}}],[{key:"fromLngLat",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=Ou.convert(r);return new e(be(u.lng),Ee(u.lat),it(o,u.lat))}}]),e}();function Gr(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=mn(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function mn(e,i){if(e){if(typeof e=="string")return cn(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cn(e,i)}}function cn(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var Nn=8192,hi=function(){function e(i,r,o,u,c){(0,Pt.Z)(this,e),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=c===void 0?!0:c,this._minZoom=i||0,this._maxZoom=r||22,this._minPitch=o==null?0:o,this._maxPitch=u==null?60:u,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Ou(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new U,this.posMatrixCache={},this.alignedPosMatrixCache={}}return(0,st.Z)(e,[{key:"minZoom",get:function(){return this._minZoom},set:function(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}},{key:"minPitch",get:function(){return this._minPitch},set:function(r){this._minPitch!==r&&(this._minPitch=r,this._pitch=Math.max(this._pitch,r))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(r){this._maxPitch!==r&&(this._maxPitch=r,this._pitch=Math.min(this._pitch,r))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new is(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(r){var o=-xE(r,-180,180)*Math.PI/180;this.angle!==o&&(this.unmodified=!1,this.angle=o,this.calcMatrices(),this.rotationMatrix=y5(),q4(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(r){var o=dv(r,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==o&&(this.unmodified=!1,this._pitch=o,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this.unmodified=!1,this._fov=r/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(r){var o=Math.min(Math.max(r,this._minZoom),this._maxZoom);this._zoom!==o&&(this.unmodified=!1,this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this.unmodified=!1,this._center=r,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(r){this.edgeInsets.equals(r)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,r,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var r=new e(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r.center=this._center,r.zoom=this.zoom,r.angle=this.angle,r.fov=this._fov,r.pitch=this._pitch,r.unmodified=this.unmodified,r.edgeInsets=this.edgeInsets.clone(),r.calcMatrices(),r}},{key:"isPaddingEqual",value:function(r){return this.edgeInsets.equals(r)}},{key:"interpolatePadding",value:function(r,o,u){this.unmodified=!1,this.edgeInsets.interpolate(r,o,u),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(r){var o=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,o)}},{key:"resize",value:function(r,o){this.width=r,this.height=o,this.pixelsToGLUnits=[2/r,-2/o],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(r){return Math.pow(2,r)}},{key:"scaleZoom",value:function(r){return Math.log(r)/Math.LN2}},{key:"project",value:function(r){var o=dv(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new is(be(r.lng)*this.worldSize,Ee(o)*this.worldSize)}},{key:"unproject",value:function(r){return new Or(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(r,o){var u=this.pointCoordinate(o),c=this.pointCoordinate(this.centerPoint),p=this.locationCoordinate(r),g=new Or(p.x-(u.x-c.x),p.y-(u.y-c.y));this.center=this.coordinateLocation(g),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(r){var o=0,u=new Float64Array([r.x,r.y,0,1]),c=new Float64Array([r.x,r.y,1,1]);yh(u,u,this.pixelMatrixInverse),yh(c,c,this.pixelMatrixInverse);var p=u[3],g=c[3],y=u[0]/p,w=c[0]/g,O=u[1]/p,D=c[1]/g,V=u[2]/p,X=c[2]/g,ce=V===X?0:(o-V)/(X-V);return new Or(ap(y,w,ce)/this.worldSize,ap(O,D,ce)/this.worldSize)}},{key:"getBounds",value:function(){return new K1().extend(this.pointLocation(new is(0,0))).extend(this.pointLocation(new is(this.width,0))).extend(this.pointLocation(new is(this.width,this.height))).extend(this.pointLocation(new is(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new K1([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var r=this.pointCoordinate(new is(0,0)),o=new Float32Array([r.x*this.worldSize,r.y*this.worldSize,0,1]),u=yh(o,o,this.pixelMatrix);return u[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var r=this._pitch,o=Math.tan(r)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new is(0,o))}},{key:"getCameraQueryGeometry",value:function(r){var o=this.getCameraPoint();if(r.length===1)return[r[0],o];var u=o.x,c=o.y,p=o.x,g=o.y,y=Gr(r),w;try{for(y.s();!(w=y.n()).done;){var O=w.value;u=Math.min(u,O.x),c=Math.min(c,O.y),p=Math.max(p,O.x),g=Math.max(g,O.y)}}catch(D){y.e(D)}finally{y.f()}return[new is(u,c),new is(p,c),new is(p,g),new is(u,g),new is(u,c)]}},{key:"coordinatePoint",value:function(r){var o=Kd(r.x*this.worldSize,r.y*this.worldSize,0,1);return yh(o,o,this.pixelMatrix),new is(o[0]/o[3],o[1]/o[3])}},{key:"locationPoint",value:function(r){return this.coordinatePoint(this.locationCoordinate(r))}},{key:"pointLocation",value:function(r){return this.coordinateLocation(this.pointCoordinate(r))}},{key:"locationCoordinate",value:function(r){return Or.fromLngLat(r)}},{key:"coordinateLocation",value:function(r){return r.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var r=-90,o=90,u=-180,c=180,p,g,y,w,O=this.size,D=this.unmodified;if(this.latRange){var V=this.latRange;r=Ee(V[1])*this.worldSize,o=Ee(V[0])*this.worldSize,p=o-r<O.y?O.y/(o-r):0}if(this.lngRange){var X=this.lngRange;u=be(X[0])*this.worldSize,c=be(X[1])*this.worldSize,g=c-u<O.x?O.x/(c-u):0}var ce=this.point,de=Math.max(g||0,p||0);if(de){this.center=this.unproject(new is(g?(c+u)/2:ce.x,p?(o+r)/2:ce.y)),this.zoom+=this.scaleZoom(de),this.unmodified=D,this.constraining=!1;return}if(this.latRange){var we=ce.y,je=O.y/2;we-je<r&&(w=r+je),we+je>o&&(w=o-je)}if(this.lngRange){var ht=ce.x,_t=O.x/2;ht-_t<u&&(y=u+_t),ht+_t>c&&(y=c-_t)}(y!==void 0||w!==void 0)&&(this.center=this.unproject(new is(y!==void 0?y:ce.x,w!==void 0?w:ce.y))),this.unmodified=D,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var r=this._fov/2,o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(r)*this.height;var u=Math.PI/2+this._pitch,c=this._fov*(.5+o.y/this.height),p=Math.sin(c)*this.cameraToCenterDistance/Math.sin(dv(Math.PI-u-c,.01,Math.PI-.01)),g=this.point,y=g.x,w=g.y,O=Math.cos(Math.PI/2-this._pitch)*p+this.cameraToCenterDistance,D=O*1.01,V=this.height/50,X=new Float64Array(16);Lr(X,this._fov,this.width/this.height,V,D),X[8]=-o.x*2/this.width,X[9]=o.y*2/this.height,wc(X,X,[1,-1,1]),oc(X,X,[0,0,-this.cameraToCenterDistance]),Ka(X,X,this._pitch),Op(X,X,this.angle),oc(X,X,[-y,-w,0]),this.mercatorMatrix=wc([],X,[this.worldSize,this.worldSize,this.worldSize]),wc(X,X,[1,1,it(1,this.center.lat)*this.worldSize,1]),this.projMatrix=X,this.invProjMatrix=of([],this.projMatrix);var ce=this.width%2/2,de=this.height%2/2,we=Math.cos(this.angle),je=Math.sin(this.angle),ht=y-Math.round(y)+we*ce+je*de,_t=w-Math.round(w)+we*de+je*ce,Dt=new Float64Array(X);if(oc(Dt,Dt,[ht>.5?ht-1:ht,_t>.5?_t-1:_t,0]),this.alignedProjMatrix=Dt,X=Os(),wc(X,X,[this.width/2,-this.height/2,1]),oc(X,X,[1,-1,0]),this.labelPlaneMatrix=X,X=Os(),wc(X,X,[1,-1,1]),oc(X,X,[-1,-1,0]),wc(X,X,[2/this.width,2/this.height,1]),this.glCoordMatrix=X,this.pixelMatrix=Zu(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),X=of(new Float64Array(16),this.pixelMatrix),!X)throw new Error("failed to invert matrix");this.pixelMatrixInverse=X,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),e}(),Wi=Ta.merge,bi=(0,st.Z)(function e(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,Pt.Z)(this,e),Wi(this,r),this.type=i});function to(e){var i=jn();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function jn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ci=Ta.merge,aa=function(e){(0,yr.Z)(r,e);var i=to(r);function r(o){var u;(0,Pt.Z)(this,r),u=i.call(this),(0,Ne.Z)((0,Ar.Z)(u),"renderFrameCallback",function(){var O=Math.min(($c()-u.easeStart)/u.easeOptions.duration,1);u.onEaseFrame(u.easeOptions.easing(O)),O<1?u.easeFrameId=u.requestRenderFrame(u.renderFrameCallback):u.stop()}),u.options=o;var c=o.minZoom,p=o.maxZoom,g=o.minPitch,y=o.maxPitch,w=o.renderWorldCopies;return u.moving=!1,u.zooming=!1,u.bearingSnap=o.bearingSnap,u.pitchEnabled=o.pitchEnabled,u.rotateEnabled=o.rotateEnabled,u.transform=new hi(c,p,g,y,w),u}return(0,st.Z)(r,[{key:"requestRenderFrame",value:function(u){return 0}},{key:"cancelRenderFrame",value:function(u){}},{key:"getCenter",value:function(){var u=this.transform.center,c=u.lng,p=u.lat;return new Ou(c,p)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(u,c){return this.jumpTo({center:u},c)}},{key:"setPitch",value:function(u,c){return this.jumpTo({pitch:u},c),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(u,c,p){return this.easeTo(Ci({center:u},c),p)}},{key:"panBy",value:function(u,c,p){return u=is.convert(u).mult(-1),this.panTo(this.transform.center,m5({offset:u},c||{}),p)}},{key:"zoomOut",value:function(u,c){return this.zoomTo(this.getZoom()-1,u,c),this}},{key:"setBearing",value:function(u,c){return this.jumpTo({bearing:u},c),this}},{key:"setZoom",value:function(u,c){return this.jumpTo({zoom:u},c),this}},{key:"zoomIn",value:function(u,c){return this.zoomTo(this.getZoom()+1,u,c),this}},{key:"zoomTo",value:function(u,c,p){return this.easeTo(Ci({zoom:u},c),p)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(u,c){return this.jumpTo({padding:u},c),this}},{key:"rotateTo",value:function(u,c,p){return this.easeTo(Ci({bearing:u},c),p)}},{key:"resetNorth",value:function(u,c){return this.rotateTo(0,Ci({duration:1e3},u),c),this}},{key:"resetNorthPitch",value:function(u,c){return this.easeTo(Ci({bearing:0,pitch:0,duration:1e3},u),c),this}},{key:"fitBounds",value:function(u,c,p){return this.fitInternal(this.cameraForBounds(u,c),c,p)}},{key:"cameraForBounds",value:function(u,c){return u=K1.convert(u),this.cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),0,c)}},{key:"snapToNorth",value:function(u,c){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(u,c):this}},{key:"jumpTo",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;this.stop();var p=this.transform,g=!1,y=!1,w=!1;return u.zoom!==void 0&&p.zoom!==+u.zoom&&(g=!0,p.zoom=+u.zoom),u.center!==void 0&&(p.center=Ou.convert(u.center)),u.bearing!==void 0&&p.bearing!==+u.bearing&&(y=!0,p.bearing=+u.bearing),u.pitch!==void 0&&p.pitch!==+u.pitch&&(w=!0,p.pitch=+u.pitch),u.padding!==void 0&&!p.isPaddingEqual(u.padding)&&(p.padding=u.padding),this.emit("movestart",new bi("movestart",c)),this.emit("move",new bi("move",c)),g&&(this.emit("zoomstart",new bi("zoomstart",c)),this.emit("zoom",new bi("zoom",c)),this.emit("zoomend",new bi("zoomend",c))),y&&(this.emit("rotatestart",new bi("rotatestart",c)),this.emit("rotate",new bi("rotate",c)),this.emit("rotateend",new bi("rotateend",c))),w&&(this.emit("pitchstart",new bi("pitchstart",c)),this.emit("pitch",new bi("pitch",c)),this.emit("pitchend",new bi("pitchend",c))),this.emit("moveend",new bi("moveend",c))}},{key:"easeTo",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;c=Ci({offset:[0,0],duration:500,easing:bE},c),(c.animate===!1||!c.essential&&SE())&&(c.duration=0);var g=this.transform,y=this.getZoom(),w=this.getBearing(),O=this.getPitch(),D=this.getPadding(),V=c.zoom?+c.zoom:y,X=c.bearing?this.normalizeBearing(c.bearing,w):w,ce=c.pitch?+c.pitch:O,de=c.padding?c.padding:g.padding,we=is.convert(c.offset),je=g.centerPoint.add(we),ht=g.pointLocation(je),_t=Ou.convert(c.center||ht);this.normalizeCenter(_t);var Dt=g.project(ht),Yt=g.project(_t).sub(Dt),ir=g.zoomScale(V-y),sr,Tr;c.around&&(sr=Ou.convert(c.around),Tr=g.locationPoint(sr));var Vr={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||V!==y,this.rotating=this.rotating||w!==X,this.pitching=this.pitching||ce!==O,this.padding=!g.isPaddingEqual(de),this.easeId=c.easeId,this.prepareEase(p,c.noMoveStart,Vr),clearTimeout(this.easeEndTimeoutID),this.ease(function(sn){if(u.zooming&&(g.zoom=ap(y,V,sn)),u.rotating&&u.rotateEnabled&&(g.bearing=ap(w,X,sn)),u.pitching&&u.pitchEnabled&&(g.pitch=ap(O,ce,sn)),u.padding&&(g.interpolatePadding(D,de,sn),je=g.centerPoint.add(we)),sr)g.setLocationAtPoint(sr,Tr);else{var ln=g.zoomScale(g.zoom-y),Zn=V>y?Math.min(2,ir):Math.max(.5,ir),ci=Math.pow(Zn,1-sn),ki=g.unproject(Dt.add(Yt.mult(sn*ci)).mult(ln));g.setLocationAtPoint(g.renderWorldCopies?ki.wrap():ki,je)}u.fireMoveEvents(p)},function(sn){u.afterEase(p,sn)},c),this}},{key:"flyTo",value:function(){var u=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;if(!c.essential&&SE()){var g=d5(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,p)}this.stop(),c=Ci({offset:[0,0],speed:1.2,curve:1.42,easing:bE},c);var y=this.transform,w=this.getZoom(),O=this.getBearing(),D=this.getPitch(),V=this.getPadding(),X=c.zoom?dv(+c.zoom,y.minZoom,y.maxZoom):w,ce=c.bearing?this.normalizeBearing(c.bearing,O):O,de=c.pitch?+c.pitch:D,we="padding"in c?c.padding:y.padding,je=y.zoomScale(X-w),ht=is.convert(c.offset),_t=y.centerPoint.add(ht),Dt=y.pointLocation(_t),Yt=Ou.convert(c.center||Dt);this.normalizeCenter(Yt);var ir=y.project(Dt),sr=y.project(Yt).sub(ir),Tr=c.curve,Vr=Math.max(y.width,y.height),sn=Vr/je,ln=sr.mag();if("minZoom"in c){var Zn=dv(Math.min(c.minZoom,w,X),y.minZoom,y.maxZoom),ci=Vr/y.zoomScale(Zn-w);Tr=Math.sqrt(ci/ln*2)}var ki=Tr*Tr;function eo(Cl){var up=(sn*sn-Vr*Vr+(Cl?-1:1)*ki*ki*ln*ln)/(2*(Cl?sn:Vr)*ki*ln);return Math.log(Math.sqrt(up*up+1)-up)}function Xo(Cl){return(Math.exp(Cl)-Math.exp(-Cl))/2}function as(Cl){return(Math.exp(Cl)+Math.exp(-Cl))/2}function tu(Cl){return Xo(Cl)/as(Cl)}var lu=eo(0),ff=function(up){return as(lu)/as(lu+Tr*up)},VR=function(up){return Vr*((as(lu)*tu(lu+Tr*up)-Xo(lu))/ki)/ln},Ax=(eo(1)-lu)/Tr;if(Math.abs(ln)<1e-6||!isFinite(Ax)){if(Math.abs(Vr-sn)<1e-6)return this.easeTo(c,p);var gB=sn<Vr?-1:1;Ax=Math.abs(Math.log(sn/Vr))/Tr,VR=function(){return 0},ff=function(up){return Math.exp(gB*Tr*up)}}if("duration"in c)c.duration=+c.duration;else{var mB="screenSpeed"in c?+c.screenSpeed/Tr:+c.speed;c.duration=1e3*Ax/mB}return c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this.zooming=!0,this.rotating=O!==ce,this.pitching=de!==D,this.padding=!y.isPaddingEqual(we),this.prepareEase(p,!1),this.ease(function(Cl){var up=Cl*Ax,HR=1/ff(up);y.zoom=Cl===1?X:w+y.scaleZoom(HR),u.rotating&&(y.bearing=ap(O,ce,Cl)),u.pitching&&(y.pitch=ap(D,de,Cl)),u.padding&&(y.interpolatePadding(V,we,Cl),_t=y.centerPoint.add(ht));var jR=Cl===1?Yt:y.unproject(ir.add(sr.mult(VR(up))).mult(HR));y.setLocationAtPoint(y.renderWorldCopies?jR.wrap():jR,_t),u.fireMoveEvents(p)},function(){return u.afterEase(p)},c),this}},{key:"fitScreenCoordinates",value:function(u,c,p,g,y){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(is.convert(u)),this.transform.pointLocation(is.convert(c)),p,g),g,y)}},{key:"stop",value:function(u,c){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var p=this.onEaseEnd;delete this.onEaseEnd,p.call(this,c)}return this}},{key:"normalizeBearing",value:function(u,c){u=xE(u,-180,180);var p=Math.abs(u-c);return Math.abs(u-360-c)<p&&(u-=360),Math.abs(u+360-c)<p&&(u+=360),u}},{key:"normalizeCenter",value:function(u){var c=this.transform;if(!(!c.renderWorldCopies||c.lngRange)){var p=u.lng-c.center.lng;u.lng+=p>180?-360:p<-180?360:0}}},{key:"fireMoveEvents",value:function(u){this.emit("move",new bi("move",u)),this.zooming&&this.emit("zoom",new bi("zoom",u)),this.rotating&&this.emit("rotate",new bi("rotate",u)),this.pitching&&this.emit("rotate",new bi("pitch",u))}},{key:"prepareEase",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!c&&!p.moving&&this.emit("movestart",new bi("movestart",u)),this.zooming&&!p.zooming&&this.emit("zoomstart",new bi("zoomstart",u)),this.rotating&&!p.rotating&&this.emit("rotatestart",new bi("rotatestart",u)),this.pitching&&!p.pitching&&this.emit("pitchstart",new bi("pitchstart",u))}},{key:"afterEase",value:function(u,c){if(!(this.easeId&&c&&this.easeId===c)){delete this.easeId;var p=this.zooming,g=this.rotating,y=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,p&&this.emit("zoomend",new bi("zoomend",u)),g&&this.emit("rotateend",new bi("rotateend",u)),y&&this.emit("pitchend",new bi("pitchend",u)),this.emit("moveend",new bi("moveend",u))}}},{key:"ease",value:function(u,c,p){p.animate===!1||p.duration===0?(u(1),c()):(this.easeStart=$c(),this.easeOptions=p,this.onEaseFrame=u,this.onEaseEnd=c,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(u,c,p,g){var y={top:0,bottom:0,right:0,left:0};if(g=Ci({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},g),typeof g.padding=="number"){var w=g.padding;g.padding={top:w,bottom:w,right:w,left:w}}g.padding=Ci(y,g.padding);var O=this.transform,D=O.padding,V=O.project(Ou.convert(u)),X=O.project(Ou.convert(c)),ce=V.rotate(-p*Math.PI/180),de=X.rotate(-p*Math.PI/180),we=new is(Math.max(ce.x,de.x),Math.max(ce.y,de.y)),je=new is(Math.min(ce.x,de.x),Math.min(ce.y,de.y)),ht=we.sub(je),_t=(O.width-(D.left+D.right+g.padding.left+g.padding.right))/ht.x,Dt=(O.height-(D.top+D.bottom+g.padding.top+g.padding.bottom))/ht.y;if(!(Dt<0||_t<0)){var Yt=Math.min(O.scaleZoom(O.scale*Math.min(_t,Dt)),g.maxZoom),ir=is.convert(g.offset),sr=(g.padding.left-g.padding.right)/2,Tr=(g.padding.top-g.padding.bottom)/2,Vr=new is(ir.x+sr,ir.y+Tr),sn=Vr.mult(O.scale/O.zoomScale(Yt)),ln=O.unproject(V.add(X).div(2).sub(sn));return{center:ln,zoom:Yt,bearing:p}}}},{key:"fitInternal",value:function(u,c,p){return u?(c=Ci(u,c),delete c.padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}}]),r}(xs.EventEmitter);function Ni(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=$i(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function $i(e,i){if(e){if(typeof e=="string")return Ma(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ma(e,i)}}function Ma(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var Va={},za=Va;Va.create=function(e,i,r){var o=window.document.createElement(e);return i!==void 0&&(o.className=i),r&&r.appendChild(o),o},Va.createNS=function(e,i){var r=window.document.createElementNS(e,i);return r};var $a=window.document&&window.document.documentElement.style;function Mo(e){if(!$a)return e[0];var i=Ni(e),r;try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o in $a)return o}}catch(u){i.e(u)}finally{i.f()}return e[0]}var qo=Mo(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),cl;Va.disableDrag=function(){$a&&qo&&(cl=$a[qo],$a[qo]="none")},Va.enableDrag=function(){$a&&qo&&($a[qo]=cl)};var El=Mo(["transform","WebkitTransform"]);Va.setTransform=function(e,i){e.style[El]=i};var Mh=!1;try{var Md=Object.defineProperty({},"passive",{get:function(){Mh=!0}});window.addEventListener("test",Md,Md),window.removeEventListener("test",Md,Md)}catch(e){Mh=!1}Va.addEventListener=function(e,i,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in o&&Mh?e.addEventListener(i,r,o):e.addEventListener(i,r,o.capture)},Va.removeEventListener=function(e,i,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in o&&Mh?e.removeEventListener(i,r,o):e.removeEventListener(i,r,o.capture)};var Rd=function e(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",e,!0)};Va.suppressClick=function(){window.addEventListener("click",Rd,!0),setTimeout(function(){window.removeEventListener("click",Rd,!0)},0)},Va.mousePos=function(e,i){var r=e.getBoundingClientRect();return new is(i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop)},Va.touchPos=function(e,i){var r=e.getBoundingClientRect(),o=[],u=Ni(i),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;o.push(new is(p.clientX-r.left-e.clientLeft,p.clientY-r.top-e.clientTop))}}catch(g){u.e(g)}finally{u.f()}return o},Va.mouseButton=function(e){return e.button},Va.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};function a0(e){var i=o0();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function o0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var QM=Ta.merge,vv=function(e){(0,yr.Z)(r,e);var i=a0(r);function r(o,u,c){var p,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(0,Pt.Z)(this,r);var y=za.mousePos(u.getCanvasContainer(),c),w=u.unproject(y);return p=i.call(this,o,QM({point:y,lngLat:w,originalEvent:c},g)),p.defaultPrevented=!1,p.target=u,p}return(0,st.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}(bi);function _5(e){var i=JM();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function JM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var s0=function(e){(0,yr.Z)(r,e);var i=_5(r);function r(o,u,c){var p;(0,Pt.Z)(this,r);var g=o==="touchend"?c.changedTouches:c.touches,y=za.touchPos(u.getCanvasContainer(),g),w=y.map(function(V){return u.unproject(V)}),O=y.reduce(function(V,X,ce,de){return V.add(X.div(de.length))},new is(0,0)),D=u.unproject(O);return p=i.call(this,o,{points:y,point:O,lngLats:w,lngLat:D,originalEvent:c}),p.defaultPrevented=!1,p}return(0,st.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}(bi);function eR(e){var i=x5();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function x5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var wE=function(e){(0,yr.Z)(r,e);var i=eR(r);function r(o,u,c){var p;return(0,Pt.Z)(this,r),p=i.call(this,o,{originalEvent:c}),p.defaultPrevented=!1,p}return(0,st.Z)(r,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),r}(bi),b5=function(){function e(i){(0,Pt.Z)(this,e),this.map=i}return(0,st.Z)(e,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(r){this.map.emit(r.type,new vv(r.type,this.map,r))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new vv("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(r){this.delayContextMenu?this.contextMenuEvent=r:this.map.emit(r.type,new vv(r.type,this.map,r)),this.map.listeners("contextmenu")&&r.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),e}(),CE=function(){function e(i,r){(0,Pt.Z)(this,e),this.map=i,this.el=i.getCanvasContainer(),this.container=i.getContainer(),this.clickTolerance=r.clickTolerance||1}return(0,st.Z)(e,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"mousedown",value:function(r,o){this.isEnabled()&&r.shiftKey&&r.button===0&&(za.disableDrag(),this.startPos=this.lastPos=o,this.active=!0)}},{key:"mousemoveWindow",value:function(r,o){if(this.active){var u=o;if(!(this.lastPos.equals(u)||!this.box&&u.dist(this.startPos)<this.clickTolerance)){var c=this.startPos;this.lastPos=u,this.box||(this.box=za.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",r));var p=Math.min(c.x,u.x),g=Math.max(c.x,u.x),y=Math.min(c.y,u.y),w=Math.max(c.y,u.y);za.setTransform(this.box,"translate(".concat(p,"px,").concat(y,"px)")),this.box&&(this.box.style.width="".concat(g-p,"px"),this.box.style.height="".concat(w-y,"px"))}}}},{key:"mouseupWindow",value:function(r,o){var u=this;if(this.active&&r.button===0){var c=this.startPos,p=o;if(this.reset(),za.suppressClick(),c.x===p.x&&c.y===p.y)this.fireEvent("boxzoomcancel",r);else return this.map.emit("boxzoomend",new bi("boxzoomend",{originalEvent:r})),{cameraAnimation:function(y){return y.fitScreenCoordinates(c,p,u.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(r){this.active&&r.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",r))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(za.remove(this.box),this.box=null),za.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(r,o){return this.map.emit(r,new bi(r,{originalEvent:o}))}}]),e}(),AE=CE,Q4=function(){function e(){(0,Pt.Z)(this,e),this.reset()}return(0,st.Z)(e,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(r,o){return r.preventDefault(),{cameraAnimation:function(c){c.easeTo({duration:300,zoom:c.getZoom()+(r.shiftKey?-1:1),around:c.unproject(o)},{originalEvent:r})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function S5(e){var i=Qv();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function Qv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var E5=function(e){(0,yr.Z)(r,e);var i=S5(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"type","renderFrame"),o}return(0,st.Z)(r)}(bi);function Id(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=$y(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function $y(e,i){if(e){if(typeof e=="string")return J4(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J4(e,i)}}function J4(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var q1=Ta.merge,tR={linearity:.3,easing:Y1(0,0,.3,1)},m8=q1({deceleration:2500,maxSpeed:1400},tR),y8=q1({deceleration:20,maxSpeed:1400},tR),_8=q1({deceleration:1e3,maxSpeed:360},tR),x8=q1({deceleration:1e3,maxSpeed:90},tR),b8=function(){function e(i){(0,Pt.Z)(this,e),this.map=i,this.clear()}return(0,st.Z)(e,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(r){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:$c(),settings:r})}},{key:"drainInertiaBuffer",value:function(){for(var r=this.inertiaBuffer,o=$c(),u=160;r.length>0&&o-r[0].time>u;)r.shift()}},{key:"onMoveEnd",value:function(r){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var o={zoom:0,bearing:0,pitch:0,pan:new is(0,0),pinchAround:void 0,around:void 0},u=Id(this.inertiaBuffer),c;try{for(u.s();!(c=u.n()).done;){var p=c.value.settings;o.zoom+=p.zoomDelta||0,o.bearing+=p.bearingDelta||0,o.pitch+=p.pitchDelta||0,p.panDelta&&o.pan._add(p.panDelta),p.around&&(o.around=p.around),p.pinchAround&&(o.pinchAround=p.pinchAround)}}catch(de){u.e(de)}finally{u.f()}var g=this.inertiaBuffer[this.inertiaBuffer.length-1],y=g.time-this.inertiaBuffer[0].time,w={};if(o.pan.mag()){var O=nR(o.pan.mag(),y,q1({},m8,r||{}));w.offset=o.pan.mult(O.amount/o.pan.mag()),w.center=this.map.transform.center,rR(w,O)}if(o.zoom){var D=nR(o.zoom,y,y8);w.zoom=this.map.transform.zoom+D.amount,rR(w,D)}if(o.bearing){var V=nR(o.bearing,y,_8);w.bearing=this.map.transform.bearing+dv(V.amount,-179,179),rR(w,V)}if(o.pitch){var X=nR(o.pitch,y,x8);w.pitch=this.map.transform.pitch+X.amount,rR(w,X)}if(w.zoom||w.bearing){var ce=o.pinchAround===void 0?o.around:o.pinchAround;w.around=ce?this.map.unproject(ce):this.map.getCenter()}return this.clear(),q1(w,{noMoveStart:!0})}}}]),e}();function rR(e,i){(!e.duration||e.duration<i.duration)&&(e.duration=i.duration,e.easing=i.easing)}function nR(e,i,r){var o=r.maxSpeed,u=r.linearity,c=r.deceleration,p=dv(e*u/(i/1e3),-o,o),g=Math.abs(p)/(c*u);return{easing:r.easing,duration:g*1e3,amount:p*(g/2)}}var S8={panStep:100,bearingStep:15,pitchStep:10},E8=function(){function e(){(0,Pt.Z)(this,e);var i=S8;this.panStep=i.panStep,this.bearingStep=i.bearingStep,this.pitchStep=i.pitchStep}return(0,st.Z)(e,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(r){var o=this;if(!(r.altKey||r.ctrlKey||r.metaKey)){var u=0,c=0,p=0,g=0,y=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?c=-1:(r.preventDefault(),g=-1);break;case 39:r.shiftKey?c=1:(r.preventDefault(),g=1);break;case 38:r.shiftKey?p=1:(r.preventDefault(),y=-1);break;case 40:r.shiftKey?p=-1:(r.preventDefault(),y=1);break;default:return}return{cameraAnimation:function(O){var D=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:w8,zoom:u?Math.round(D)+u*(r.shiftKey?2:1):D,bearing:O.getBearing()+c*o.bearingStep,pitch:O.getPitch()+p*o.pitchStep,offset:[-g*o.panStep,-y*o.panStep],center:O.getCenter()},{originalEvent:r})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function w8(e){return e*(2-e)}var C8=E8,A8=function(){function e(i,r){(0,Pt.Z)(this,e),this.map=i,this.clickTolerance=r.clickTolerance}return(0,st.Z)(e,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(r){return this.firePreventable(new wE(r.type,this.map,r))}},{key:"mousedown",value:function(r,o){return this.mousedownPos=o,this.firePreventable(new vv(r.type,this.map,r))}},{key:"mouseup",value:function(r){this.map.emit(r.type,new vv(r.type,this.map,r))}},{key:"click",value:function(r,o){this.mousedownPos&&this.mousedownPos.dist(o)>=this.clickTolerance||this.map.emit(r.type,new vv(r.type,this.map,r))}},{key:"dblclick",value:function(r){return this.firePreventable(new vv(r.type,this.map,r))}},{key:"mouseover",value:function(r){this.map.emit(r.type,new vv(r.type,this.map,r))}},{key:"mouseout",value:function(r){this.map.emit(r.type,new vv(r.type,this.map,r))}},{key:"touchstart",value:function(r){return this.firePreventable(new s0(r.type,this.map,r))}},{key:"touchmove",value:function(r){this.map.emit(r.type,new s0(r.type,this.map,r))}},{key:"touchend",value:function(r){this.map.emit(r.type,new s0(r.type,this.map,r))}},{key:"touchcancel",value:function(r){this.map.emit(r.type,new s0(r.type,this.map,r))}},{key:"firePreventable",value:function(r){if(this.map.emit(r.type,r),r.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),e}(),iR,aR=0,w5=2,T8=(iR={},(0,Ne.Z)(iR,aR,1),(0,Ne.Z)(iR,w5,2),iR);function M8(e,i){var r=T8[i];return e.buttons===void 0||(e.buttons&r)!==r}var C5=function(){function e(i){(0,Pt.Z)(this,e),this.reset(),this.clickTolerance=i.clickTolerance||1}return(0,st.Z)(e,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(r,o){if(!this.lastPoint){var u=za.mouseButton(r);this.correctButton(r,u)&&(this.lastPoint=o,this.eventButton=u)}}},{key:"mousemoveWindow",value:function(r,o){var u=this.lastPoint;if(u){if(r.preventDefault(),M8(r,this.eventButton)){this.reset();return}if(!(!this.moved&&o.dist(u)<this.clickTolerance))return this.moved=!0,this.lastPoint=o,this.move(u,o)}}},{key:"mouseupWindow",value:function(r){if(this.lastPoint){var o=za.mouseButton(r);o===this.eventButton&&(this.moved&&za.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(r,o){return!1}},{key:"move",value:function(r,o){}}]),e}();function R8(e){var i=I8();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function I8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var P8=function(e){(0,yr.Z)(r,e);var i=R8(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"mousedown",value:function(u,c){Cf((0,Ft.Z)(r.prototype),"mousedown",this).call(this,u,c),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(u,c){return{around:c,panDelta:c.sub(u)}}},{key:"correctButton",value:function(u,c){return c===aR&&!u.ctrlKey}}]),r}(C5);function O8(e){var i=k8();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function k8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var L8=function(e){(0,yr.Z)(r,e);var i=O8(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"correctButton",value:function(u,c){return c===aR&&u.ctrlKey||c===w5}},{key:"move",value:function(u,c){var p=-.5,g=(c.y-u.y)*p;if(g)return this.active=!0,{pitchDelta:g}}},{key:"contextmenu",value:function(u){u.preventDefault()}}]),r}(C5);function D8(e){var i=F8();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function F8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var B8=function(e){(0,yr.Z)(r,e);var i=D8(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"contextmenu",value:function(u){u.preventDefault()}},{key:"correctButton",value:function(u,c){return c===aR&&u.ctrlKey||c===w5}},{key:"move",value:function(u,c){var p=.8,g=(c.x-u.x)*p;if(g)return this.active=!0,{bearingDelta:g}}}]),r}(C5),e6=4.000244140625,N8=1/100,z8=1/450,U8=2,Z8=function(){function e(i,r){var o=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"onScrollFrame",function(){if(o.frameId&&(o.frameId=null,!!o.isActive())){var u=o.map.transform;if(o.delta!==0){var c=o.type==="wheel"&&Math.abs(o.delta)>e6?o.wheelZoomRate:o.defaultZoomRate,p=U8/(1+Math.exp(-Math.abs(o.delta*c)));o.delta<0&&p!==0&&(p=1/p);var g=typeof o.targetZoom=="number"?u.zoomScale(o.targetZoom):u.scale;o.targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(g*p))),o.type==="wheel"&&(o.startZoom=u.zoom,o.easing=o.smoothOutEasing(200)),o.delta=0}var y=typeof o.targetZoom=="number"?o.targetZoom:u.zoom,w=o.startZoom,O=o.easing,D=!1,V;if(o.type==="wheel"&&w&&O){var X=Math.min(($c()-o.lastWheelEventTime)/200,1),ce=O(X);V=ap(w,y,ce),X<1?o.frameId||(o.frameId=!0):D=!0}else V=y,D=!0;return o.active=!0,D&&(o.active=!1,o.finishTimeout=setTimeout(function(){o.zooming=!1,o.handler.triggerRenderFrame(),delete o.targetZoom,delete o.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:V-u.zoom,around:o.aroundPoint,originalEvent:o.lastWheelEvent}}}),this.map=i,this.el=i.getCanvasContainer(),this.handler=r,this.delta=0,this.defaultZoomRate=N8,this.wheelZoomRate=z8}return(0,st.Z)(e,[{key:"setZoomRate",value:function(r){this.defaultZoomRate=r}},{key:"setWheelZoomRate",value:function(r){this.wheelZoomRate=r}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(r){this.isEnabled()||(this.enabled=!0,this.aroundCenter=r&&r.around==="center")}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"wheel",value:function(r){if(this.isEnabled()){var o=r.deltaMode===window.WheelEvent.DOM_DELTA_LINE?r.deltaY*40:r.deltaY,u=$c(),c=u-(this.lastWheelEventTime||0);this.lastWheelEventTime=u,o!==0&&o%e6===0?this.type="wheel":o!==0&&Math.abs(o)<4?this.type="trackpad":c>400?(this.type=null,this.lastValue=o,this.timeout=setTimeout(this.onTimeout,40,r)):this.type||(this.type=Math.abs(c*o)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,o+=this.lastValue)),r.shiftKey&&o&&(o=o/4),this.type&&(this.lastWheelEvent=r,this.delta-=o,this.active||this.start(r)),r.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(r){this.type="wheel",this.delta-=this.lastValue,!this.active&&this.start&&this.start(r)}},{key:"start",value:function(r){if(this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var o=za.mousePos(this.el,r);this.around=Ou.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(o)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(r){var o=bE;if(this.prevEase){var u=this.prevEase,c=($c()-u.start)/u.duration,p=u.easing(c+.01)-u.easing(c),g=.27/Math.sqrt(p*p+1e-4)*.01,y=Math.sqrt(.27*.27-g*g);o=Y1(g,y,.25,1)}return this.prevEase={start:$c(),duration:r,easing:o},o}}]),e}(),V8=Z8,H8=function(){function e(i,r){(0,Pt.Z)(this,e),this.clickZoom=i,this.tapZoom=r}return(0,st.Z)(e,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),e}(),j8=function(){function e(i,r,o){(0,Pt.Z)(this,e),this.el=i,this.mousePan=r,this.touchPan=o}return(0,st.Z)(e,[{key:"enable",value:function(r){this.inertiaOptions=r||{},this.mousePan.enable(),this.touchPan.enable(),this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),e}(),W8=function(){function e(i,r,o){(0,Pt.Z)(this,e),this.pitchWithRotate=i.pitchWithRotate,this.mouseRotate=r,this.mousePitch=o}return(0,st.Z)(e,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),e}(),G8=function(){function e(i,r,o,u){(0,Pt.Z)(this,e),this.el=i,this.touchZoom=r,this.touchRotate=o,this.tapDragZoom=u,this.rotationDisabled=!1,this.enabled=!0}return(0,st.Z)(e,[{key:"enable",value:function(r){this.touchZoom.enable(r),this.rotationDisabled||this.touchRotate.enable(r),this.tapDragZoom.enable(),this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),e}();function A5(e,i){for(var r={},o=0;o<e.length;o++)r[e[o].identifier]=i[o];return r}function $8(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=X8(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function X8(e,i){if(e){if(typeof e=="string")return t6(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t6(e,i)}}function t6(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}function Y8(e){var i=new is(0,0),r=$8(e),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;i._add(u)}}catch(c){r.e(c)}finally{r.f()}return i.div(e.length)}var r6=500,K8=500,n6=30,q8=function(){function e(i){(0,Pt.Z)(this,e),this.reset(),this.numTouches=i.numTouches}return(0,st.Z)(e,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(r,o,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=r.timeStamp),u.length===this.numTouches&&(this.centroid=Y8(o),this.touches=A5(u,o)))}},{key:"touchmove",value:function(r,o,u){if(!(this.aborted||!this.centroid)){var c=A5(u,o);for(var p in this.touches)if(this.touches[p]){var g=this.touches[p],y=c[p];(!y||y.dist(g)>n6)&&(this.aborted=!0)}}}},{key:"touchend",value:function(r,o,u){if((!this.centroid||r.timeStamp-this.startTime>K8)&&(this.aborted=!0),u.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}}}]),e}(),T5=function(){function e(i){(0,Pt.Z)(this,e),this.singleTap=new q8(i),this.numTaps=i.numTaps,this.reset()}return(0,st.Z)(e,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(r,o,u){this.singleTap.touchstart(r,o,u)}},{key:"touchmove",value:function(r,o,u){this.singleTap.touchmove(r,o,u)}},{key:"touchend",value:function(r,o,u){var c=this.singleTap.touchend(r,o,u);if(c){var p=r.timeStamp-this.lastTime<r6,g=!this.lastTap||this.lastTap.dist(c)<n6;if((!p||!g)&&this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}}}]),e}(),Q8=function(){function e(){(0,Pt.Z)(this,e),this.tap=new T5({numTouches:1,numTaps:1}),this.reset()}return(0,st.Z)(e,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(r,o,u){this.swipePoint||(this.tapTime&&r.timeStamp-this.tapTime>r6&&this.reset(),this.tapTime?u.length>0&&(this.swipePoint=o[0],this.swipeTouch=u[0].identifier):this.tap.touchstart(r,o,u))}},{key:"touchmove",value:function(r,o,u){if(!this.tapTime)this.tap.touchmove(r,o,u);else if(this.swipePoint){if(u[0].identifier!==this.swipeTouch)return;var c=o[0],p=c.y-this.swipePoint.y;return this.swipePoint=c,r.preventDefault(),this.active=!0,{zoomDelta:p/128}}}},{key:"touchend",value:function(r,o,u){if(this.tapTime)this.swipePoint&&u.length===0&&this.reset();else{var c=this.tap.touchend(r,o,u);c&&(this.tapTime=r.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}(),J8=function(){function e(){(0,Pt.Z)(this,e),this.zoomIn=new T5({numTouches:1,numTaps:2}),this.zoomOut=new T5({numTouches:2,numTaps:1}),this.reset()}return(0,st.Z)(e,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(r,o,u){this.zoomIn.touchstart(r,o,u),this.zoomOut.touchstart(r,o,u)}},{key:"touchmove",value:function(r,o,u){this.zoomIn.touchmove(r,o,u),this.zoomOut.touchmove(r,o,u)}},{key:"touchend",value:function(r,o,u){var c=this,p=this.zoomIn.touchend(r,o,u),g=this.zoomOut.touchend(r,o,u);if(p)return this.active=!0,r.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()+1,around:w.unproject(p)},{originalEvent:r})}};if(g)return this.active=!0,r.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()-1,around:w.unproject(g)},{originalEvent:r})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}(),e7=function(){function e(i){(0,Pt.Z)(this,e),this.minTouches=1,this.clickTolerance=i.clickTolerance||1,this.reset()}return(0,st.Z)(e,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new is(0,0)}},{key:"touchstart",value:function(r,o,u){return this.calculateTransform(r,o,u)}},{key:"touchmove",value:function(r,o,u){if(this.active)return r.preventDefault(),this.calculateTransform(r,o,u)}},{key:"touchend",value:function(r,o,u){this.calculateTransform(r,o,u),this.active&&u.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(r,o,u){u.length>0&&(this.active=!0);var c=A5(u,o),p=new is(0,0),g=new is(0,0),y=0;for(var w in c)if(c[w]){var O=c[w],D=this.touches[w];D&&(p._add(O),g._add(O.sub(D)),y++,c[w]=O)}if(this.touches=c,!(y<this.minTouches||!g.mag())){var V=g.div(y);if(this.sum._add(V),!(this.sum.mag()<this.clickTolerance)){var X=p.div(y);return{around:X,panDelta:V}}}}}]),e}(),M5=function(){function e(){(0,Pt.Z)(this,e),this.reset()}return(0,st.Z)(e,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(r){}},{key:"move",value:function(r,o,u){}},{key:"touchstart",value:function(r,o,u){this.firstTwoTouches||u.length<2||(this.firstTwoTouches=[u[0].identifier,u[1].identifier],this.start([o[0],o[1]]))}},{key:"touchmove",value:function(r,o,u){if(this.firstTwoTouches){r.preventDefault();var c=(0,Zi.Z)(this.firstTwoTouches,2),p=c[0],g=c[1],y=oR(u,o,p),w=oR(u,o,g);if(!(!y||!w)){var O=this.aroundCenter?null:y.add(w).div(2);return this.move([y,w],O,r)}}}},{key:"touchend",value:function(r,o,u){if(this.firstTwoTouches){var c=(0,Zi.Z)(this.firstTwoTouches,2),p=c[0],g=c[1],y=oR(u,o,p),w=oR(u,o,g);y&&w||(this.active&&za.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(r){this.enabled=!0,this.aroundCenter=!!r&&r.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),e}();function oR(e,i,r){for(var o=0;o<e.length;o++)if(e[o].identifier===r)return i[o]}function t7(e){var i=r7();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function r7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function R5(e){return Math.abs(e.y)>Math.abs(e.x)}var n7=100,i7=function(e){(0,yr.Z)(r,e);var i=t7(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"reset",value:function(){Cf((0,Ft.Z)(r.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(u){this.lastPoints=u,R5(u[0].sub(u[1]))&&(this.valid=!1)}},{key:"move",value:function(u,c,p){var g=u[0].sub(this.lastPoints[0]),y=u[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(g,y,p.timeStamp),!!this.valid){this.lastPoints=u,this.active=!0;var w=(g.y+y.y)/2,O=-.5;return{pitchDelta:w*O}}}},{key:"gestureBeginsVertically",value:function(u,c,p){if(this.valid!==void 0)return this.valid;var g=2,y=u.mag()>=g,w=c.mag()>=g;if(!(!y&&!w)){if(!y||!w)return this.firstMove===void 0&&(this.firstMove=p),p-this.firstMove<n7?void 0:!1;var O=u.y>0==c.y>0;return R5(u)&&R5(c)&&O}}}]),r}(M5);function a7(e){var i=o7();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function o7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var s7=25;function i6(e,i){return e.angleWith(i)*180/Math.PI}var u7=function(e){(0,yr.Z)(r,e);var i=a7(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"reset",value:function(){Cf((0,Ft.Z)(r.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(u){this.startVector=this.vector=u[0].sub(u[1]),this.minDiameter=u[0].dist(u[1])}},{key:"move",value:function(u,c){var p=this.vector;if(this.vector=u[0].sub(u[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:i6(this.vector,p),pinchAround:c}}},{key:"isBelowThreshold",value:function(u){this.minDiameter=Math.min(this.minDiameter,u.mag());var c=Math.PI*this.minDiameter,p=s7/c*360,g=i6(u,this.startVector);return Math.abs(g)<p}}]),r}(M5);function l7(e){var i=c7();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function c7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var f7=.1;function a6(e,i){return Math.log(e/i)/Math.LN2}var h7=function(e){(0,yr.Z)(r,e);var i=l7(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"reset",value:function(){Cf((0,Ft.Z)(r.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(u){this.startDistance=this.distance=u[0].dist(u[1])}},{key:"move",value:function(u,c){var p=this.distance;if(this.distance=u[0].dist(u[1]),!(!this.active&&Math.abs(a6(this.distance,this.startDistance))<f7))return this.active=!0,{zoomDelta:a6(this.distance,p),pinchAround:c}}}]),r}(M5);function Xy(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p7(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function p7(e,i){if(e){if(typeof e=="string")return o6(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o6(e,i)}}function o6(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var I5=Ta.merge,sR=function(i){return i.zoom||i.drag||i.pitch||i.rotate};function P5(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var d7=function(){function e(i,r){var o=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"handleWindowEvent",function(D){o.handleEvent(D,"".concat(D.type,"Window"))}),(0,Ne.Z)(this,"handleEvent",function(D,V){if(D.type==="blur"){o.stop();return}o.updatingCamera=!0;var X=D.type==="renderFrame"?void 0:D,ce={needsRenderFrame:!1},de={},we={},je=D.touches?o.getMapTouches(D.touches):void 0,ht=je?za.touchPos(o.el,je):za.mousePos(o.el,D),_t=Xy(o.handlers),Dt;try{for(_t.s();!(Dt=_t.n()).done;){var Yt=Dt.value,ir=Yt.handlerName,sr=Yt.handler,Tr=Yt.allowed;if(sr.isEnabled()){var Vr=void 0;if(o.blockedByActive(we,Tr,ir))sr.reset();else{var sn=V||D.type;sr&&sr[sn]&&(Vr=sr[sn](D,ht,je),o.mergeIHandlerResult(ce,de,Vr,ir,X),Vr&&Vr.needsRenderFrame&&o.triggerRenderFrame())}(Vr||sr.isActive())&&(we[ir]=sr)}}}catch(ki){_t.e(ki)}finally{_t.f()}var ln={};for(var Zn in o.previousActiveHandlers)we[Zn]||(ln[Zn]=X);o.previousActiveHandlers=we,(Object.keys(ln).length||P5(ce))&&(o.changes.push([ce,de,ln]),o.triggerRenderFrame()),(Object.keys(we).length||P5(ce))&&o.map.stop(!0),o.updatingCamera=!1;var ci=ce.cameraAnimation;ci&&(o.inertia.clear(),o.fireEvents({},{}),o.changes=[],ci(o.map))}),this.map=i,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new b8(i),this.bearingSnap=r.bearingSnap,this.rotateEnabled=r.rotateEnabled,this.pitchEnabled=r.pitchEnabled,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(r);var u=this.el;this.listeners=[],this.listeners=[[u,"touchstart",{passive:!1}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[window,"blur",void 0]];var c=Xy(this.listeners),p;try{for(c.s();!(p=c.n()).done;){var g=(0,Zi.Z)(p.value,3),y=g[0],w=g[1],O=g[2];za.addEventListener(y,w,y===window.document?this.handleWindowEvent:this.handleEvent,O)}}catch(D){c.e(D)}finally{c.f()}}return(0,st.Z)(e,[{key:"destroy",value:function(){var r=Xy(this.listeners),o;try{for(r.s();!(o=r.n()).done;){var u=(0,Zi.Z)(o.value,3),c=u[0],p=u[1],g=u[2];za.removeEventListener(c,p,c===window.document?this.handleWindowEvent:this.handleEvent,g)}}catch(y){r.e(y)}finally{r.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var r=Xy(this.handlers),o;try{for(r.s();!(o=r.n()).done;){var u=o.value.handler;u.reset()}}catch(c){r.e(c)}finally{r.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var r=Xy(this.handlers),o;try{for(r.s();!(o=r.n()).done;){var u=o.value.handler;if(u.isActive())return!0}}catch(c){r.e(c)}finally{r.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!sR(this.eventsInProgress)||this.isZooming()}},{key:"mergeIHandlerResult",value:function(r,o,u,c,p){if(u){I5(r,u);var g={handlerName:c,originalEvent:u.originalEvent||p};u.zoomDelta!==void 0&&(o.zoom=g),u.panDelta!==void 0&&(o.drag=g),u.pitchDelta!==void 0&&(o.pitch=g),u.bearingDelta!==void 0&&(o.rotate=g)}}},{key:"triggerRenderFrame",value:function(){var r=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(o){delete r.frameId,r.handleEvent(new E5("renderFrame",{timeStamp:o})),r.applyChanges()}))}},{key:"addDefaultHandlers",value:function(r){var o=this.map,u=o.getCanvasContainer();this.add("mapEvent",new A8(o,r));var c=o.boxZoom=new AE(o,r);this.add("boxZoom",c);var p=new J8,g=new Q4;o.doubleClickZoom=new H8(g,p),this.add("tapZoom",p),this.add("clickZoom",g);var y=new Q8;this.add("tapDragZoom",y);var w=o.touchPitch=new i7;this.add("touchPitch",w);var O=new L8(r),D=new B8(r);o.dragRotate=new W8(r,O,D),this.add("mouseRotate",O,["mousePitch"]),this.add("mousePitch",D,["mouseRotate"]);var V=new P8(r),X=new e7(r);o.dragPan=new j8(u,V,X),this.add("mousePan",V),this.add("touchPan",X,["touchZoom","touchRotate"]);var ce=new u7,de=new h7;o.touchZoomRotate=new G8(u,de,ce,y),this.add("touchRotate",ce,["touchPan","touchZoom"]),this.add("touchZoom",de,["touchPan","touchRotate"]);var we=o.scrollZoom=new V8(o,this);this.add("scrollZoom",we,["mousePan"]);var je=o.keyboard=new C8;this.add("keyboard",je),this.add("blockableMapEvent",new b5(o));for(var ht=0,_t=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ht<_t.length;ht++){var Dt=_t[ht];r.interactive&&r[Dt]&&o[Dt].enable(r[Dt])}}},{key:"add",value:function(r,o,u){this.handlers.push({handlerName:r,handler:o,allowed:u}),this.handlersById[r]=o}},{key:"blockedByActive",value:function(r,o,u){for(var c in r)if(c!==u&&(!o||o.indexOf(c)<0))return!0;return!1}},{key:"getMapTouches",value:function(r){var o=[],u=Xy(r),c;try{for(u.s();!(c=u.n()).done;){var p=c.value,g=p.target;this.el.contains(g)&&o.push(p)}}catch(y){u.e(y)}finally{u.f()}return o}},{key:"applyChanges",value:function(){var r={},o={},u={},c=Xy(this.changes),p;try{for(c.s();!(p=c.n()).done;){var g=(0,Zi.Z)(p.value,3),y=g[0],w=g[1],O=g[2];y.panDelta&&(r.panDelta=(r.panDelta||new is(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),I5(o,w),I5(u,O)}}catch(D){c.e(D)}finally{c.f()}this.updateMapTransform(r,o,u),this.changes=[]}},{key:"updateMapTransform",value:function(r,o,u){var c=this.map,p=c.transform;if(!P5(r))return this.fireEvents(o,u);var g=r.panDelta,y=r.zoomDelta,w=r.bearingDelta,O=r.pitchDelta,D=r.pinchAround,V=r.around;D!==void 0&&(V=D),c.stop(!0),V=V||c.transform.centerPoint;var X=p.pointLocation(g?V.sub(g):V);w&&this.rotateEnabled&&(p.bearing+=w),O&&this.pitchEnabled&&(p.pitch+=O),y&&(p.zoom+=y),p.setLocationAtPoint(X,V),this.map.update(),r.noInertia||this.inertia.record(r),this.fireEvents(o,u)}},{key:"fireEvents",value:function(r,o){var u=this,c=sR(this.eventsInProgress),p=sR(r),g={};for(var y in r)if(r[y]){var w=r[y].originalEvent;this.eventsInProgress[y]||(g["".concat(y,"start")]=w),this.eventsInProgress[y]=r[y]}!c&&p&&this.fireEvent("movestart",p.originalEvent);for(var O in g)g[O]&&this.fireEvent(O,g[O]);r.rotate&&(this.bearingChanged=!0),p&&this.fireEvent("move",p.originalEvent);for(var D in r)if(r[D]){var V=r[D].originalEvent;this.fireEvent(D,V)}var X={},ce;for(var de in this.eventsInProgress)if(this.eventsInProgress[de]){var we=this.eventsInProgress[de],je=we.handlerName,ht=we.originalEvent;this.handlersById[je].isActive()||(delete this.eventsInProgress[de],ce=o[je]||ht,X["".concat(de,"end")]=ce)}for(var _t in X)X[_t]&&this.fireEvent(_t,X[_t]);var Dt=sR(this.eventsInProgress);if((c||p)&&!Dt){this.updatingCamera=!0;var Yt=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),ir=function(Tr){return Tr!==0&&-u.bearingSnap<Tr&&Tr<u.bearingSnap};Yt?(ir(Yt.bearing||this.map.getBearing())&&(Yt.bearing=0),this.map.easeTo(Yt,{originalEvent:ce})):(this.map.emit("moveend",new bi("moveend",{originalEvent:ce})),ir(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(r,o){this.map.emit(r,new bi(r,o?{originalEvent:o}:{}))}}]),e}(),v7=d7,uR=null,TE=[],g7=30,O5=1e3/g7,Q1=window.performance,J1={create:"create",load:"load",fullLoad:"fullLoad"},s6={mark:function(i){Q1.mark(i)},frame:function(i){var r=i;if(uR!=null){var o=r-uR;TE.push(o)}uR=r},clearMetrics:function(){uR=null,TE=[],Q1.clearMeasures("loadTime"),Q1.clearMeasures("fullLoadTime");for(var i in J1)Q1.clearMarks(J1[i])},getPerformanceMetrics:function(){var i=Q1.measure("loadTime",J1.create,J1.load).duration,r=Q1.measure("fullLoadTime",J1.create,J1.fullLoad).duration,o=TE.length,u=TE.reduce(function(y,w){return y+w},0)/o/1e3,c=1/u,p=TE.filter(function(y){return y>O5}).reduce(function(y,w){return y+(w-O5)/O5},0),g=p/(o+p)*100;return{loadTime:i,fullLoadTime:r,fps:c,percentDroppedFrames:g}}};function u6(e,i){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=m7(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(w){throw w},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,p=!1,g;return{s:function(){r=r.call(e)},n:function(){var w=r.next();return c=w.done,w},e:function(w){p=!0,g=w},f:function(){try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}}}function m7(e,i){if(e){if(typeof e=="string")return l6(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l6(e,i)}}function l6(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}var y7=function(){function e(){(0,Pt.Z)(this,e),this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return(0,st.Z)(e,[{key:"add",value:function(r){var o=++this.id,u=this.queue;return u.push({callback:r,id:o,cancelled:!1}),o}},{key:"remove",value:function(r){var o=this.currentlyRunning,u=o?this.queue.concat(o):this.queue,c=u6(u),p;try{for(c.s();!(p=c.n()).done;){var g=p.value;if(g.id===r){g.cancelled=!0;return}}}catch(y){c.e(y)}finally{c.f()}}},{key:"run",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=this.currentlyRunning=this.queue;this.queue=[];var u=u6(o),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;if(!p.cancelled&&(p.callback(r),this.cleared))break}}catch(g){u.e(g)}finally{u.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),e}(),_7=y7;function dj(e){var i=x7();return function(){var o=_getPrototypeOf(e),u;if(i){var c=_getPrototypeOf(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return _possibleConstructorReturn(this,u)}}function x7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b7(e,i){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(i||(i=document),!!i)){var u=i.head||i.getElementsByTagName("head")[0];if(!u){u=i.createElement("head");var c=i.body||i.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):i.documentElement.appendChild(u)}var p=i.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(i.createTextNode(e)),u.appendChild(p),p}}b7(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var S7=-2,E7=22,vj=Ta.merge,w7=0,C7=60,gj={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:S7,maxZoom:E7,minPitch:w7,maxPitch:C7,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},mj=null,A7=Ta.throttle,T7=function(){function e(i){var r=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"onHashChange",function(){var o=r.getCurrentHash();if(o.length>=3&&!o.some(function(c){return isNaN(+c)})){var u=r.map.dragRotate.isEnabled()&&r.map.touchZoomRotate.isEnabled()?+(o[3]||0):r.map.getBearing();return r.map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:u,pitch:+(o[4]||0)}),!0}return!1}),(0,Ne.Z)(this,"getCurrentHash",function(){var o=window.location.hash.replace("#","");if(r.hashName){var u;return o.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===r.hashName&&(u=c)}),(u&&u[1]||"").split("/")}return o.split("/")}),(0,Ne.Z)(this,"updateHashUnthrottled",function(){var o=r.getHashString();try{window.history.replaceState(window.history.state,"",o)}catch(u){}}),this.hashName=i&&encodeURIComponent(i),this.updateHash=A7(this.updateHashUnthrottled,30*1e3/100)}return(0,st.Z)(e,[{key:"addTo",value:function(r){return this.map=r,window.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return window.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(r){var o=this.map.getCenter(),u=Math.round(this.map.getZoom()*100)/100,c=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),p=Math.pow(10,c),g=Math.round(o.lng*p)/p,y=Math.round(o.lat*p)/p,w=this.map.getBearing(),O=this.map.getPitch(),D="";if(r?D+="/".concat(g,"/").concat(y,"/").concat(u):D+="".concat(u,"/").concat(y,"/").concat(g),(w||O)&&(D+="/".concat(Math.round(w*10)/10)),O&&(D+="/".concat(Math.round(O))),this.hashName){var V=this.hashName,X=!1,ce=window.location.hash.slice(1).split("&").map(function(de){var we=de.split("=")[0];return we===V?(X=!0,"".concat(we,"=").concat(D)):de}).filter(function(de){return de});return X||ce.push("".concat(V,"=").concat(D)),"#".concat(ce.join("&"))}return"#".concat(D)}}]),e}(),M7=T7;function R7(e){var i=I7();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function I7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P7(e,i){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(i||(i=document),!!i)){var u=i.head||i.getElementsByTagName("head")[0];if(!u){u=i.createElement("head");var c=i.body||i.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):i.documentElement.appendChild(u)}var p=i.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(i.createTextNode(e)),u.appendChild(p),p}}P7(`.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`),function(){if(typeof window.CustomEvent=="function")return!1;function e(i,r){r=r||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(i,r.bubbles,r.cancelable,r.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e}();var lR=-2,c6=22,f6=Ta.merge,ex=0,cR=60,O7={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:lR,maxZoom:c6,minPitch:ex,maxPitch:cR,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},k7=function(e){(0,yr.Z)(r,e);var i=R7(r);function r(o){var u;(0,Pt.Z)(this,r),u=i.call(this,f6({},O7,o)),(0,Ne.Z)((0,Ar.Z)(u),"renderTaskQueue",new _7),(0,Ne.Z)((0,Ar.Z)(u),"trackResize",!0),(0,Ne.Z)((0,Ar.Z)(u),"onWindowOnline",function(){u.update()}),(0,Ne.Z)((0,Ar.Z)(u),"onWindowResize",function(p){u.trackResize&&u.resize({originalEvent:p}).update()}),u.initContainer(),u.resize(),u.handlers=new v7((0,Ar.Z)(u),u.options),typeof window!="undefined"&&(window.addEventListener("online",u.onWindowOnline,!1),window.addEventListener("resize",u.onWindowResize,!1),window.addEventListener("orientationchange",u.onWindowResize,!1));var c=typeof o.hash=="string"&&o.hash||void 0;return o.hash&&(u.hash=new M7(c).addTo((0,Ar.Z)(u))),(!u.hash||!u.hash.onHashChange())&&(u.jumpTo({center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch}),o.bounds&&(u.resize(),u.fitBounds(o.bounds,f6({},o.fitBoundsOptions,{duration:0})))),u}return(0,st.Z)(r,[{key:"resize",value:function(u){var c=this.containerDimensions(),p=(0,Zi.Z)(c,2),g=p[0],y=p[1];this.transform.resize(g,y);var w=!this.moving;return w&&(this.stop(),this.emit("movestart",new window.CustomEvent("movestart",u)),this.emit("move",new window.CustomEvent("move",u))),this.emit("resize",new window.CustomEvent("resize",u)),w&&this.emit("moveend",new window.CustomEvent("moveend",u)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(u){return this.transform.locationPoint(Ou.convert(u))}},{key:"unproject",value:function(u){return this.transform.pointLocation(is.convert(u))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(u){this.transform.setMaxBounds(K1.convert(u))}},{key:"setStyle",value:function(u){}},{key:"setMinZoom",value:function(u){if(u=u==null?lR:u,u>=lR&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this.getZoom()<u&&this.setZoom(u),this;throw new Error("minZoom must be between ".concat(lR," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(u){if(u=u==null?c6:u,u>=this.transform.minZoom)return this.transform.maxZoom=u,this.getZoom()>u&&this.setZoom(u),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(u){if(u=u==null?ex:u,u<ex)throw new Error("minPitch must be greater than or equal to ".concat(ex));if(u>=ex&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this.getPitch()<u&&this.setPitch(u),this;throw new Error("minPitch must be between ".concat(ex," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(u){if(u=u==null?cR:u,u>cR)throw new Error("maxPitch must be less than or equal to ".concat(cR));if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this.getPitch()>u&&this.setPitch(u),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(u){this.transform.renderWorldCopies=!!u}},{key:"remove",value:function(){this.container.removeChild(this.canvasContainer),this.canvasContainer=null,this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear(),this.handlers.destroy(),typeof window!="undefined"&&(window.removeEventListener("online",this.onWindowOnline,!1),window.removeEventListener("resize",this.onWindowResize,!1),window.removeEventListener("orientationchange",this.onWindowResize,!1))}},{key:"requestRenderFrame",value:function(u){return this.update(),this.renderTaskQueue.add(u)}},{key:"cancelRenderFrame",value:function(u){return this.renderTaskQueue.remove(u)}},{key:"triggerRepaint",value:function(){var u=this;this.frame||(this.frame=EE(function(c){s6.frame(c),u.frame=null,u.update(c)}))}},{key:"update",value:function(u){var c=this;this.frame||(this.frame=EE(function(p){s6.frame(p),c.frame=null,c.renderTaskQueue.run(u)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var u=this.container;u.classList.add("l7-map");var c=this.canvasContainer=Gs("div","l7-canvas-container",u);this.options.interactive&&c.classList.add("l7-interactive")}},{key:"initMiniContainer",value:function(){this.container=this.options.canvas,this.canvasContainer=this.container}},{key:"containerDimensions",value:function(){var u=0,c=0;return this.container&&(u=this.container.clientWidth,c=this.container.clientHeight,u=u===0?400:u,c=c===0?300:c),[u,c]}}]),r}(aa),L7={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},h6,p6,d6,v6,g6,m6,tx,y6,_6,x6,b6,S6={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},D7=12,E6=(h6=(0,It.b2)(),p6=(0,It.f3)(Xt.MapConfig),d6=(0,It.f3)(Xt.IGlobalConfigService),v6=(0,It.f3)(Xt.ICoordinateSystemService),g6=(0,It.f3)(Xt.IEventEmitter),h6(m6=(tx=function(){function e(){var i=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"version","DEFAUlTMAP"),(0,Ne.Z)(this,"simpleMapCoord",new PM),(0,Ne.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Da(this,"config",y6,this),Da(this,"configService",_6,this),Da(this,"coordinateSystemService",x6,this),Da(this,"eventEmitter",b6,this),(0,Ne.Z)(this,"handleCameraChanged",function(r){var o=i.map.getCenter(),u=o.lat,c=o.lng;i.emit("mapchange"),i.viewport.syncWithMapCamera({bearing:i.map.getBearing(),center:[c,u],viewportHeight:i.map.transform.height,pitch:i.map.getPitch(),viewportWidth:i.map.transform.width,zoom:i.map.getZoom(),cameraHeight:0}),i.updateCoordinateSystemService(),i.cameraChangedCallback(i.viewport)})}return(0,st.Z)(e,[{key:"setBgColor",value:function(r){this.bgColor=r}},{key:"addMarkerContainer",value:function(){var r=this.map.getCanvasContainer();this.markerContainer=Gs("div","l7-marker-container",r),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(r,o){Z_.indexOf(r)!==-1?this.eventEmitter.on(r,o):this.map.on(S6[r]||r,o)}},{key:"off",value:function(r,o){this.map.off(S6[r]||r,o),this.eventEmitter.off(r,o)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();var r=this.map.transform;return[r.width,r.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(r){return this.map.setZoom(r)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(r){this.map.setCenter(r)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(r){this.map.setBearing(r)}},{key:"zoomIn",value:function(r,o){this.map.zoomIn(r,o)}},{key:"zoomOut",value:function(r,o){this.map.zoomOut(r,o)}},{key:"setPitch",value:function(r){return this.map.setPitch(r)}},{key:"panTo",value:function(r){this.map.panTo(r)}},{key:"panBy",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy([r,o])}},{key:"fitBounds",value:function(r,o){this.map.fitBounds(r,o)}},{key:"setMaxZoom",value:function(r){this.map.setMaxZoom(r)}},{key:"setMinZoom",value:function(r){this.map.setMinZoom(r)}},{key:"setMapStatus",value:function(r){r.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),r.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),r.dragEnable===!1&&this.map.dragPan.disable(),r.dragEnable===!0&&this.map.dragPan.enable(),r.rotateEnable===!1&&this.map.dragRotate.disable(),r.dragEnable===!0&&this.map.dragRotate.enable(),r.keyboardEnable===!1&&this.map.keyboard.disable(),r.keyboardEnable===!0&&this.map.keyboard.enable(),r.zoomEnable===!1&&this.map.scrollZoom.disable(),r.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(r,o){this.map.flyTo({zoom:r,center:o})}},{key:"setMapStyle",value:function(r){this.map.setStyle(this.getMapStyleValue(r))}},{key:"meterToCoord",value:function(r,o){return 1}},{key:"pixelToLngLat",value:function(r){return this.map.unproject(r)}},{key:"lngLatToPixel",value:function(r){return this.map.project(r)}},{key:"containerToLngLat",value:function(r){return this.map.unproject(r)}},{key:"lngLatToContainer",value:function(r){return this.map.project(r)}},{key:"getMapStyle",value:function(){try{var r,o=(r=this.map.getStyle().sprite)!==null&&r!==void 0?r:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(o)?o==null?void 0:o.replace(/\/\w+$/,"").replace(/sprites/,"styles"):o}catch(u){return""}}},{key:"getMapStyleConfig",value:function(){return L7}},{key:"getMapStyleValue",value:function(r){var o;return(o=this.getMapStyleConfig()[r])!==null&&o!==void 0?o:r}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).emit.apply(o,[r].concat(c))}},{key:"once",value:function(r){for(var o,u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];(o=this.eventEmitter).once.apply(o,[r].concat(c))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(r){var o=this.map.getCanvas(),u=r==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return u}},{key:"onCameraChanged",value:function(r){this.cameraChangedCallback=r}},{key:"creatMapContainer",value:function(r){var o=r;return typeof r=="string"&&(o=document.getElementById(r)),o}},{key:"updateView",value:function(r){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:r.bearing,center:r.center,viewportHeight:r.viewportHeight,pitch:r.pitch,viewportWidth:r.viewportWidth,zoom:r.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var r=this.config.offsetCoordinate,o=r===void 0?!0:r;this.viewport.getZoom()>D7&&o?this.coordinateSystemService.setCoordinateSystem(Ru.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Ru.LNGLAT)}}]),e}(),y6=Aa(tx.prototype,"config",[p6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_6=Aa(tx.prototype,"configService",[d6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x6=Aa(tx.prototype,"coordinateSystemService",[v6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b6=Aa(tx.prototype,"eventEmitter",[g6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tx))||m6),F7=["id","style","rotation","mapInstance","version","mapSize","interactive"],w6,C6;function B7(e){var i=N7();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function N7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var z7=(w6=(0,It.b2)(),w6(C6=function(e){(0,yr.Z)(r,e);var i=B7(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"version",Fu.DEFAULT),o}return(0,st.Z)(r,[{key:"lngLatToCoord",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},p=this.lngLatToMercator(u,0),g=p.x,y=p.y;return[g-c.x,y-c.y]}},{key:"lngLatToMercator",value:function(u,c){var p=Or.fromLngLat(u,c),g=p.x,y=g===void 0?0:g,w=p.y,O=w===void 0?0:w,D=p.z,V=D===void 0?0:D;return{x:y,y:O,z:V}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},w=Or.fromLngLat(u,c),O=w.meterInMercatorCoordinateUnits(),D=Os();return oc(D,D,Ja.fromValues(w.x-y.x,w.y-y.y,w.z||0-y.z)),wc(D,D,Ja.fromValues(O*g[0],-O*g[1],O*g[2])),Ka(D,D,p[0]),sf(D,D,p[1]),Op(D,D,p[2]),D}},{key:"init",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p=this,g,y,w,O,D,V,X,ce,de,we,je,ht,_t,Dt,Yt;return nr().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:g=this.config,y=g.id,w=y===void 0?"map":y,O=g.style,D=O===void 0?"light":O,V=g.rotation,X=V===void 0?0:V,ce=g.mapInstance,de=g.version,we=de===void 0?"DEFAULTMAP":de,je=g.mapSize,ht=je===void 0?1e4:je,_t=g.interactive,Dt=_t===void 0?!0:_t,Yt=(0,Uc.Z)(g,F7),this.viewport=new IM,this.version=we,this.simpleMapCoord.setSize(ht),we==="SIMPLE"&&Yt.center&&(Yt.center=this.simpleMapCoord.unproject(Yt.center)),ce?(this.map=ce,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(w),this.map=new k7((0,ne.Z)({container:this.$mapContainer,style:this.getMapStyleValue(D),bearing:X},Yt))),this.map.on("load",function(){p.handleCameraChanged()}),Dt&&this.map.on("move",this.handleCameraChanged),setTimeout(function(){p.handleCameraChanged()},100),this.handleCameraChanged();case 10:case"end":return sr.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"exportMap",value:function(u){var c=this.map.getCanvas(),p=u==="jpg"?c==null?void 0:c.toDataURL("image/jpeg"):c==null?void 0:c.toDataURL("image/png");return p}}]),r}(E6))||C6);function U7(e){var i=Z7();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function Z7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var V7=function(e){(0,yr.Z)(r,e);var i=U7(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getServiceConstructor",value:function(){return z7}}]),r}(r0),H7=k(6158),ME=k.n(H7),j7=function(){function e(){(0,Pt.Z)(this,e)}return(0,st.Z)(e,[{key:"syncWithMapCamera",value:function(r){var o=r.center,u=r.zoom,c=r.pitch,p=r.bearing,g=r.viewportHeight,y=r.viewportWidth;this.viewport=new cE({width:y,height:g,longitude:o&&o[0],latitude:o&&o[1],zoom:u,pitch:c,bearing:p})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(r,o){return this.viewport.projectFlat(r,o)}}]),e}(),W7=["id","attributionControl","style","token","rotation","mapInstance"],A6,T6;function G7(e){var i=$7();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function $7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function X7(e,i){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(i||(i=document),!!i)){var u=i.head||i.getElementsByTagName("head")[0];if(!u){u=i.createElement("head");var c=i.body||i.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):i.documentElement.appendChild(u)}var p=i.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(i.createTextNode(e)),u.appendChild(p),p}}X7(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=ME();var Y7=0,M6="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg",K7=(A6=(0,It.b2)(),A6(T6=function(e){(0,yr.Z)(r,e);var i=G7(r);function r(){var o;(0,Pt.Z)(this,r);for(var u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];return o=i.call.apply(i,[this].concat(c)),(0,Ne.Z)((0,Ar.Z)(o),"version","MAPBOX"),o}return(0,st.Z)(r,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},p=this.lngLatToMercator(u,0),g=p.x,y=p.y;return[g-c.x,y-c.y]}},{key:"lngLatToMercator",value:function(u,c){var p=window.mapboxgl.MercatorCoordinate.fromLngLat(u,c),g=p.x,y=g===void 0?0:g,w=p.y,O=w===void 0?0:w,D=p.z,V=D===void 0?0:D;return{x:y,y:O,z:V}}},{key:"getModelMatrix",value:function(u,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},w=window.mapboxgl.MercatorCoordinate.fromLngLat(u,c),O=w.meterInMercatorCoordinateUnits(),D=Os();return oc(D,D,Ja.fromValues(w.x-y.x,w.y-y.y,w.z||0-y.z)),wc(D,D,Ja.fromValues(O*g[0],-O*g[1],O*g[2])),Ka(D,D,p[0]),sf(D,D,p[1]),Op(D,D,p[2]),D}},{key:"init",value:function(){var o=(0,Sn.Z)(nr().mark(function c(){var p=this,g,y,w,O,D,V,X,ce,de,we,je,ht,_t;return nr().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:g=this.config,y=g.id,w=y===void 0?"map":y,O=g.attributionControl,D=O===void 0?!1:O,V=g.style,X=V===void 0?"light":V,ce=g.token,de=ce===void 0?M6:ce,we=g.rotation,je=we===void 0?0:we,ht=g.mapInstance,_t=(0,Uc.Z)(g,W7),this.viewport=new j7,!ht&&!window.mapboxgl&&console.error(this.configService.getSceneWarninfo("SDK")),de===M6&&X!=="blank"&&!window.mapboxgl.accessToken&&!ht&&console.warn(this.configService.getSceneWarninfo("MapToken")),!ht&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=de),ht?(this.map=ht,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(w),this.map=new window.mapboxgl.Map((0,ne.Z)({container:this.$mapContainer,style:this.getMapStyleValue(X),attributionControl:D,bearing:je},_t))),this.map.on("load",function(){p.handleCameraChanged()}),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return Yt.stop()}},c,this)}));function u(){return o.apply(this,arguments)}return u}()},{key:"destroy",value:function(){var u;(u=this.$mapContainer)===null||u===void 0||(u=u.parentNode)===null||u===void 0||u.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(u){for(var c,p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];(c=this.eventEmitter).emit.apply(c,[u].concat(g))}},{key:"once",value:function(u){for(var c,p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];(c=this.eventEmitter).once.apply(c,[u].concat(g))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"meterToCoord",value:function(u,c){var p=new(ME()).LngLat(u[0],u[1]),g=new(ME()).LngLat(c[0],c[1]),y=p.distanceTo(g),w=ME().MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]}),O=ME().MercatorCoordinate.fromLngLat({lng:c[0],lat:c[1]}),D=w.x,V=w.y,X=O.x,ce=O.y,de=Math.sqrt(Math.pow(D-X,2)+Math.pow(V-ce,2))*4194304*2;return de/y}},{key:"exportMap",value:function(u){var c=this.map.getCanvas(),p=u==="jpg"?c==null?void 0:c.toDataURL("image/jpeg"):c==null?void 0:c.toDataURL("image/png");return p}},{key:"creatMapContainer",value:function(u){var c=u;typeof u=="string"&&(c=document.getElementById(u));var p=document.createElement("div");return p.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,p.id="l7_mapbox_div"+Y7++,c.appendChild(p),p}}]),r}(E6))||T6);function q7(e){var i=Q7();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function Q7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function J7(e,i){var r=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(r||o)&&(i||(i=document),!!i)){var u=i.head||i.getElementsByTagName("head")[0];if(!u){u=i.createElement("head");var c=i.body||i.getElementsByTagName("body")[0];c?c.parentNode.insertBefore(u,c):i.documentElement.appendChild(u)}var p=i.createElement("style");return p.type="text/css",p.styleSheet?p.styleSheet.cssText=e:p.appendChild(i.createTextNode(e)),u.appendChild(p),p}}J7(`.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var ez=function(e){(0,yr.Z)(r,e);var i=q7(r);function r(){return(0,Pt.Z)(this,r),i.apply(this,arguments)}return(0,st.Z)(r,[{key:"getServiceConstructor",value:function(){return K7}}]),r}(r0),yj=k(31857),tz=k(36556),rz=k.n(tz),nz=function(){function e(i,r){(0,Pt.Z)(this,e);var o=r.buffer,u=r.offset,c=r.stride,p=r.normalized,g=r.size,y=r.divisor;this.buffer=o,this.attribute={buffer:o.get(),offset:u||0,stride:c||0,normalized:p||!1,divisor:y||0},g&&(this.attribute.size=g)}return(0,st.Z)(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),nm,RE,u0,Pd,IE,l0,PE,fR,Jv,Yy,Tf,eg,tg,hR,iz=(nm={},(0,Ne.Z)(nm,yt.POINTS,"points"),(0,Ne.Z)(nm,yt.LINES,"lines"),(0,Ne.Z)(nm,yt.LINE_LOOP,"line loop"),(0,Ne.Z)(nm,yt.LINE_STRIP,"line strip"),(0,Ne.Z)(nm,yt.TRIANGLES,"triangles"),(0,Ne.Z)(nm,yt.TRIANGLE_FAN,"triangle fan"),(0,Ne.Z)(nm,yt.TRIANGLE_STRIP,"triangle strip"),nm),R6=(RE={},(0,Ne.Z)(RE,yt.STATIC_DRAW,"static"),(0,Ne.Z)(RE,yt.DYNAMIC_DRAW,"dynamic"),(0,Ne.Z)(RE,yt.STREAM_DRAW,"stream"),RE),k5=(u0={},(0,Ne.Z)(u0,yt.BYTE,"int8"),(0,Ne.Z)(u0,yt.INT,"int32"),(0,Ne.Z)(u0,yt.UNSIGNED_BYTE,"uint8"),(0,Ne.Z)(u0,yt.UNSIGNED_SHORT,"uint16"),(0,Ne.Z)(u0,yt.UNSIGNED_INT,"uint32"),(0,Ne.Z)(u0,yt.FLOAT,"float"),u0),az=(Pd={},(0,Ne.Z)(Pd,yt.ALPHA,"alpha"),(0,Ne.Z)(Pd,yt.LUMINANCE,"luminance"),(0,Ne.Z)(Pd,yt.LUMINANCE_ALPHA,"luminance alpha"),(0,Ne.Z)(Pd,yt.RGB,"rgb"),(0,Ne.Z)(Pd,yt.RGBA,"rgba"),(0,Ne.Z)(Pd,yt.RGBA4,"rgba4"),(0,Ne.Z)(Pd,yt.RGB5_A1,"rgb5 a1"),(0,Ne.Z)(Pd,yt.RGB565,"rgb565"),(0,Ne.Z)(Pd,yt.DEPTH_COMPONENT,"depth"),(0,Ne.Z)(Pd,yt.DEPTH_STENCIL,"depth stencil"),Pd),oz=(IE={},(0,Ne.Z)(IE,yt.DONT_CARE,"dont care"),(0,Ne.Z)(IE,yt.NICEST,"nice"),(0,Ne.Z)(IE,yt.FASTEST,"fast"),IE),I6=(l0={},(0,Ne.Z)(l0,yt.NEAREST,"nearest"),(0,Ne.Z)(l0,yt.LINEAR,"linear"),(0,Ne.Z)(l0,yt.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Ne.Z)(l0,yt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Ne.Z)(l0,yt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Ne.Z)(l0,yt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),l0),P6=(PE={},(0,Ne.Z)(PE,yt.REPEAT,"repeat"),(0,Ne.Z)(PE,yt.CLAMP_TO_EDGE,"clamp"),(0,Ne.Z)(PE,yt.MIRRORED_REPEAT,"mirror"),PE),sz=(fR={},(0,Ne.Z)(fR,yt.NONE,"none"),(0,Ne.Z)(fR,yt.BROWSER_DEFAULT_WEBGL,"browser"),fR),uz=(Jv={},(0,Ne.Z)(Jv,yt.NEVER,"never"),(0,Ne.Z)(Jv,yt.ALWAYS,"always"),(0,Ne.Z)(Jv,yt.LESS,"less"),(0,Ne.Z)(Jv,yt.LEQUAL,"lequal"),(0,Ne.Z)(Jv,yt.GREATER,"greater"),(0,Ne.Z)(Jv,yt.GEQUAL,"gequal"),(0,Ne.Z)(Jv,yt.EQUAL,"equal"),(0,Ne.Z)(Jv,yt.NOTEQUAL,"notequal"),Jv),O6=(Yy={},(0,Ne.Z)(Yy,yt.FUNC_ADD,"add"),(0,Ne.Z)(Yy,yt.MIN_EXT,"min"),(0,Ne.Z)(Yy,yt.MAX_EXT,"max"),(0,Ne.Z)(Yy,yt.FUNC_SUBTRACT,"subtract"),(0,Ne.Z)(Yy,yt.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Yy),pR=(Tf={},(0,Ne.Z)(Tf,yt.ZERO,"zero"),(0,Ne.Z)(Tf,yt.ONE,"one"),(0,Ne.Z)(Tf,yt.SRC_COLOR,"src color"),(0,Ne.Z)(Tf,yt.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Ne.Z)(Tf,yt.SRC_ALPHA,"src alpha"),(0,Ne.Z)(Tf,yt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Ne.Z)(Tf,yt.DST_COLOR,"dst color"),(0,Ne.Z)(Tf,yt.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Ne.Z)(Tf,yt.DST_ALPHA,"dst alpha"),(0,Ne.Z)(Tf,yt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Ne.Z)(Tf,yt.CONSTANT_COLOR,"constant color"),(0,Ne.Z)(Tf,yt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Ne.Z)(Tf,yt.CONSTANT_ALPHA,"constant alpha"),(0,Ne.Z)(Tf,yt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Ne.Z)(Tf,yt.SRC_ALPHA_SATURATE,"src alpha saturate"),Tf),lz=(eg={},(0,Ne.Z)(eg,yt.NEVER,"never"),(0,Ne.Z)(eg,yt.ALWAYS,"always"),(0,Ne.Z)(eg,yt.LESS,"less"),(0,Ne.Z)(eg,yt.LEQUAL,"lequal"),(0,Ne.Z)(eg,yt.GREATER,"greater"),(0,Ne.Z)(eg,yt.GEQUAL,"gequal"),(0,Ne.Z)(eg,yt.EQUAL,"equal"),(0,Ne.Z)(eg,yt.NOTEQUAL,"notequal"),eg),rx=(tg={},(0,Ne.Z)(tg,yt.ZERO,"zero"),(0,Ne.Z)(tg,yt.KEEP,"keep"),(0,Ne.Z)(tg,yt.REPLACE,"replace"),(0,Ne.Z)(tg,yt.INVERT,"invert"),(0,Ne.Z)(tg,yt.INCR,"increment"),(0,Ne.Z)(tg,yt.DECR,"decrement"),(0,Ne.Z)(tg,yt.INCR_WRAP,"increment wrap"),(0,Ne.Z)(tg,yt.DECR_WRAP,"decrement wrap"),tg),cz=(hR={},(0,Ne.Z)(hR,yt.FRONT,"front"),(0,Ne.Z)(hR,yt.BACK,"back"),hR),fz=function(){function e(i,r){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"isDestroyed",!1);var o=r.data,u=r.usage,c=r.type;this.buffer=i.buffer({data:o,usage:R6[u||yt.STATIC_DRAW],type:k5[c||yt.UNSIGNED_BYTE]})}return(0,st.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(r){var o=r.data,u=r.offset;this.buffer.subdata(o,u)}}]),e}(),hz=function(){function e(i,r){(0,Pt.Z)(this,e);var o=r.data,u=r.usage,c=r.type,p=r.count;this.elements=i.elements({data:o,usage:R6[u||yt.STATIC_DRAW],type:k5[c||yt.UNSIGNED_BYTE],count:p})}return(0,st.Z)(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(r){var o=r.data;this.elements.subdata(o)}},{key:"destroy",value:function(){}}]),e}(),pz=function(){function e(i,r){(0,Pt.Z)(this,e);var o=r.width,u=r.height,c=r.color,p=r.colors,g={width:o,height:u};Array.isArray(p)&&(g.colors=p.map(function(y){return y.get()})),c&&typeof c!="boolean"&&(g.color=c.get()),this.framebuffer=i.framebuffer(g)}return(0,st.Z)(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.framebuffer.resize(o,u)}}]),e}(),dz={}.toString,vz=function(e,i){return dz.call(e)==="[object "+i+"]"},gz=vz,mz=function(e){return gz(e,"Number")},nx=mz,yz=function(e){return e==null},c0=yz,_z=function(e,i,r){return e<i?i:e>r?r:e},xz=_z,bz=k(90857),k6=bz,Cr;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.ALWAYS=519]="ALWAYS",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.GEQUAL=518]="GEQUAL",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",e[e.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",e[e.RGBA32F_EXT=34836]="RGBA32F_EXT",e[e.RGB32F_EXT=34837]="RGB32F_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",e[e.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.SRGB_EXT=35904]="SRGB_EXT",e[e.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",e[e.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",e[e.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",e[e.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",e[e.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",e[e.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",e[e.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",e[e.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",e[e.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",e[e.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",e[e.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",e[e.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",e[e.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",e[e.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",e[e.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",e[e.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",e[e.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",e[e.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",e[e.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",e[e.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",e[e.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",e[e.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",e[e.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",e[e.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",e[e.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",e[e.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",e[e.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",e[e.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",e[e.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",e[e.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",e[e.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",e[e.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",e[e.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",e[e.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",e[e.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",e[e.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",e[e.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(Cr||(Cr={}));var ds;(function(e){e[e.Buffer=0]="Buffer",e[e.Texture=1]="Texture",e[e.RenderTarget=2]="RenderTarget",e[e.Sampler=3]="Sampler",e[e.Program=4]="Program",e[e.Bindings=5]="Bindings",e[e.InputLayout=6]="InputLayout",e[e.RenderPipeline=7]="RenderPipeline",e[e.ComputePipeline=8]="ComputePipeline",e[e.Readback=9]="Readback",e[e.QueryPool=10]="QueryPool"})(ds||(ds={}));var wo;(function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"})(wo||(wo={}));var OE;(function(e){e[e.CCW=2305]="CCW",e[e.CW=2304]="CW"})(OE||(OE={}));var op;(function(e){e[e.NONE=0]="NONE",e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK",e[e.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(op||(op={}));var No;(function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC=768]="SRC",e[e.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",e[e.DST=774]="DST",e[e.ONE_MINUS_DST=775]="ONE_MINUS_DST",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONST=32769]="CONST",e[e.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(No||(No={}));var Xc;(function(e){e[e.ADD=32774]="ADD",e[e.SUBSTRACT=32778]="SUBSTRACT",e[e.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX"})(Xc||(Xc={}));var Rh;(function(e){e[e.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",e[e.REPEAT=1]="REPEAT",e[e.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(Rh||(Rh={}));var wl;(function(e){e[e.POINT=0]="POINT",e[e.BILINEAR=1]="BILINEAR"})(wl||(wl={}));var Ac;(function(e){e[e.NO_MIP=0]="NO_MIP",e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR"})(Ac||(Ac={}));var ql;(function(e){e[e.POINTS=0]="POINTS",e[e.TRIANGLES=1]="TRIANGLES",e[e.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",e[e.LINES=3]="LINES",e[e.LINE_STRIP=4]="LINE_STRIP"})(ql||(ql={}));var uu;(function(e){e[e.MAP_READ=1]="MAP_READ",e[e.MAP_WRITE=2]="MAP_WRITE",e[e.COPY_SRC=4]="COPY_SRC",e[e.COPY_DST=8]="COPY_DST",e[e.INDEX=16]="INDEX",e[e.VERTEX=32]="VERTEX",e[e.UNIFORM=64]="UNIFORM",e[e.STORAGE=128]="STORAGE",e[e.INDIRECT=256]="INDIRECT",e[e.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(uu||(uu={}));var gv;(function(e){e[e.STATIC=1]="STATIC",e[e.DYNAMIC=2]="DYNAMIC"})(gv||(gv={}));var Ky;(function(e){e[e.VERTEX=1]="VERTEX",e[e.INSTANCE=2]="INSTANCE"})(Ky||(Ky={}));var L6;(function(e){e.LOADED="loaded"})(L6||(L6={}));var Ro;(function(e){e[e.TEXTURE_2D=0]="TEXTURE_2D",e[e.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",e[e.TEXTURE_3D=2]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(Ro||(Ro={}));var Mf;(function(e){e[e.SAMPLED=1]="SAMPLED",e[e.RENDER_TARGET=2]="RENDER_TARGET",e[e.STORAGE=4]="STORAGE"})(Mf||(Mf={}));var Yc;(function(e){e[e.NONE=0]="NONE",e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e[e.RGB=7]="RGB",e[e.ALL=15]="ALL"})(Yc||(Yc={}));var fl;(function(e){e[e.KEEP=7680]="KEEP",e[e.ZERO=0]="ZERO",e[e.REPLACE=7681]="REPLACE",e[e.INVERT=5386]="INVERT",e[e.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",e[e.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",e[e.INCREMENT_WRAP=34055]="INCREMENT_WRAP",e[e.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(fl||(fl={}));function _j(e,i,r,o){var u=Ro.TEXTURE_2D,c=1,p=Mf.SAMPLED;return{dimension:u,format:e,width:i,height:r,depthOrArrayLayers:c,mipLevelCount:o,usage:p}}var hl;(function(e){e[e.Float=0]="Float",e[e.Uint=1]="Uint",e[e.Sint=2]="Sint",e[e.Depth=3]="Depth"})(hl||(hl={}));var ix;(function(e){e[e.LOWER_LEFT=0]="LOWER_LEFT",e[e.UPPER_LEFT=1]="UPPER_LEFT"})(ix||(ix={}));var ax;(function(e){e[e.NEGATIVE_ONE=0]="NEGATIVE_ONE",e[e.ZERO=1]="ZERO"})(ax||(ax={}));var dR;(function(e){e[e.OcclusionConservative=0]="OcclusionConservative"})(dR||(dR={}));var Qn;(function(e){e[e.U8=1]="U8",e[e.U16=2]="U16",e[e.U32=3]="U32",e[e.S8=4]="S8",e[e.S16=5]="S16",e[e.S32=6]="S32",e[e.F16=7]="F16",e[e.F32=8]="F32",e[e.BC1=65]="BC1",e[e.BC2=66]="BC2",e[e.BC3=67]="BC3",e[e.BC4_UNORM=68]="BC4_UNORM",e[e.BC4_SNORM=69]="BC4_SNORM",e[e.BC5_UNORM=70]="BC5_UNORM",e[e.BC5_SNORM=71]="BC5_SNORM",e[e.U16_PACKED_5551=97]="U16_PACKED_5551",e[e.U16_PACKED_565=98]="U16_PACKED_565",e[e.D24=129]="D24",e[e.D32F=130]="D32F",e[e.D24S8=131]="D24S8",e[e.D32FS8=132]="D32FS8"})(Qn||(Qn={}));var va;(function(e){e[e.R=1]="R",e[e.RG=2]="RG",e[e.RGB=3]="RGB",e[e.RGBA=4]="RGBA",e[e.A=5]="A"})(va||(va={}));function xj(e){return e}var Gi;(function(e){e[e.None=0]="None",e[e.Normalized=1]="Normalized",e[e.sRGB=2]="sRGB",e[e.Depth=4]="Depth",e[e.Stencil=8]="Stencil",e[e.RenderTarget=16]="RenderTarget",e[e.Luminance=32]="Luminance"})(Gi||(Gi={}));function Ha(e,i,r){return e<<16|i<<8|r}var qr;(function(e){e[e.ALPHA=Ha(Qn.U8,va.A,Gi.None)]="ALPHA",e[e.U8_LUMINANCE=Ha(Qn.U8,va.A,Gi.Luminance)]="U8_LUMINANCE",e[e.F16_LUMINANCE=Ha(Qn.F16,va.A,Gi.Luminance)]="F16_LUMINANCE",e[e.F32_LUMINANCE=Ha(Qn.F32,va.A,Gi.Luminance)]="F32_LUMINANCE",e[e.F16_R=Ha(Qn.F16,va.R,Gi.None)]="F16_R",e[e.F16_RG=Ha(Qn.F16,va.RG,Gi.None)]="F16_RG",e[e.F16_RGB=Ha(Qn.F16,va.RGB,Gi.None)]="F16_RGB",e[e.F16_RGBA=Ha(Qn.F16,va.RGBA,Gi.None)]="F16_RGBA",e[e.F32_R=Ha(Qn.F32,va.R,Gi.None)]="F32_R",e[e.F32_RG=Ha(Qn.F32,va.RG,Gi.None)]="F32_RG",e[e.F32_RGB=Ha(Qn.F32,va.RGB,Gi.None)]="F32_RGB",e[e.F32_RGBA=Ha(Qn.F32,va.RGBA,Gi.None)]="F32_RGBA",e[e.U8_R=Ha(Qn.U8,va.R,Gi.None)]="U8_R",e[e.U8_R_NORM=Ha(Qn.U8,va.R,Gi.Normalized)]="U8_R_NORM",e[e.U8_RG=Ha(Qn.U8,va.RG,Gi.None)]="U8_RG",e[e.U8_RG_NORM=Ha(Qn.U8,va.RG,Gi.Normalized)]="U8_RG_NORM",e[e.U8_RGB=Ha(Qn.U8,va.RGB,Gi.None)]="U8_RGB",e[e.U8_RGB_NORM=Ha(Qn.U8,va.RGB,Gi.Normalized)]="U8_RGB_NORM",e[e.U8_RGB_SRGB=Ha(Qn.U8,va.RGB,Gi.sRGB|Gi.Normalized)]="U8_RGB_SRGB",e[e.U8_RGBA=Ha(Qn.U8,va.RGBA,Gi.None)]="U8_RGBA",e[e.U8_RGBA_NORM=Ha(Qn.U8,va.RGBA,Gi.Normalized)]="U8_RGBA_NORM",e[e.U8_RGBA_SRGB=Ha(Qn.U8,va.RGBA,Gi.sRGB|Gi.Normalized)]="U8_RGBA_SRGB",e[e.U16_R=Ha(Qn.U16,va.R,Gi.None)]="U16_R",e[e.U16_R_NORM=Ha(Qn.U16,va.R,Gi.Normalized)]="U16_R_NORM",e[e.U16_RG_NORM=Ha(Qn.U16,va.RG,Gi.Normalized)]="U16_RG_NORM",e[e.U16_RGBA_NORM=Ha(Qn.U16,va.RGBA,Gi.Normalized)]="U16_RGBA_NORM",e[e.U16_RGB=Ha(Qn.U16,va.RGB,Gi.None)]="U16_RGB",e[e.U32_R=Ha(Qn.U32,va.R,Gi.None)]="U32_R",e[e.U32_RG=Ha(Qn.U32,va.RG,Gi.None)]="U32_RG",e[e.S8_R=Ha(Qn.S8,va.R,Gi.None)]="S8_R",e[e.S8_R_NORM=Ha(Qn.S8,va.R,Gi.Normalized)]="S8_R_NORM",e[e.S8_RG_NORM=Ha(Qn.S8,va.RG,Gi.Normalized)]="S8_RG_NORM",e[e.S8_RGB_NORM=Ha(Qn.S8,va.RGB,Gi.Normalized)]="S8_RGB_NORM",e[e.S8_RGBA_NORM=Ha(Qn.S8,va.RGBA,Gi.Normalized)]="S8_RGBA_NORM",e[e.S16_R=Ha(Qn.S16,va.R,Gi.None)]="S16_R",e[e.S16_RG=Ha(Qn.S16,va.RG,Gi.None)]="S16_RG",e[e.S16_RG_NORM=Ha(Qn.S16,va.RG,Gi.Normalized)]="S16_RG_NORM",e[e.S16_RGB_NORM=Ha(Qn.S16,va.RGB,Gi.Normalized)]="S16_RGB_NORM",e[e.S16_RGBA=Ha(Qn.S16,va.RGBA,Gi.None)]="S16_RGBA",e[e.S16_RGBA_NORM=Ha(Qn.S16,va.RGBA,Gi.Normalized)]="S16_RGBA_NORM",e[e.S32_R=Ha(Qn.S32,va.R,Gi.None)]="S32_R",e[e.U16_RGBA_5551=Ha(Qn.U16_PACKED_5551,va.RGBA,Gi.Normalized)]="U16_RGBA_5551",e[e.U16_RGB_565=Ha(Qn.U16_PACKED_565,va.RGB,Gi.Normalized)]="U16_RGB_565",e[e.BC1=Ha(Qn.BC1,va.RGBA,Gi.Normalized)]="BC1",e[e.BC1_SRGB=Ha(Qn.BC1,va.RGBA,Gi.Normalized|Gi.sRGB)]="BC1_SRGB",e[e.BC2=Ha(Qn.BC2,va.RGBA,Gi.Normalized)]="BC2",e[e.BC2_SRGB=Ha(Qn.BC2,va.RGBA,Gi.Normalized|Gi.sRGB)]="BC2_SRGB",e[e.BC3=Ha(Qn.BC3,va.RGBA,Gi.Normalized)]="BC3",e[e.BC3_SRGB=Ha(Qn.BC3,va.RGBA,Gi.Normalized|Gi.sRGB)]="BC3_SRGB",e[e.BC4_UNORM=Ha(Qn.BC4_UNORM,va.R,Gi.Normalized)]="BC4_UNORM",e[e.BC4_SNORM=Ha(Qn.BC4_SNORM,va.R,Gi.Normalized)]="BC4_SNORM",e[e.BC5_UNORM=Ha(Qn.BC5_UNORM,va.RG,Gi.Normalized)]="BC5_UNORM",e[e.BC5_SNORM=Ha(Qn.BC5_SNORM,va.RG,Gi.Normalized)]="BC5_SNORM",e[e.D24=Ha(Qn.D24,va.R,Gi.Depth)]="D24",e[e.D24_S8=Ha(Qn.D24S8,va.RG,Gi.Depth|Gi.Stencil)]="D24_S8",e[e.D32F=Ha(Qn.D32F,va.R,Gi.Depth)]="D32F",e[e.D32F_S8=Ha(Qn.D32FS8,va.RG,Gi.Depth|Gi.Stencil)]="D32F_S8",e[e.U8_RGB_RT=Ha(Qn.U8,va.RGB,Gi.RenderTarget|Gi.Normalized)]="U8_RGB_RT",e[e.U8_RGBA_RT=Ha(Qn.U8,va.RGBA,Gi.RenderTarget|Gi.Normalized)]="U8_RGBA_RT",e[e.U8_RGBA_RT_SRGB=Ha(Qn.U8,va.RGBA,Gi.RenderTarget|Gi.Normalized|Gi.sRGB)]="U8_RGBA_RT_SRGB"})(qr||(qr={}));function vR(e){return e>>>8&255}function rg(e){return e>>>16&255}function ox(e){return e&255}function D6(e){switch(e){case Qn.F32:case Qn.U32:case Qn.S32:return 4;case Qn.U16:case Qn.S16:case Qn.F16:return 2;case Qn.U8:case Qn.S8:return 1;default:throw new Error("whoops")}}function F6(e){return D6(rg(e))}function bj(e){return vR(e)}function Sz(e){var i=D6(rg(e)),r=vR(e);return i*r}function Sj(e,i){return e&4294967040|i}function Ej(e,i){return e&4294902015|i<<8}function B6(e){var i=ox(e);if(i&Gi.Depth)return hl.Depth;if(i&Gi.Normalized)return hl.Float;var r=rg(e);if(r===Qn.F16||r===Qn.F32)return hl.Float;if(r===Qn.U8||r===Qn.U16||r===Qn.U32)return hl.Uint;if(r===Qn.S8||r===Qn.S16||r===Qn.S32)return hl.Sint;throw new Error("whoops")}function bo(e,i){if(i===void 0&&(i=""),!e)throw new Error("Assert fail: ".concat(i))}function qy(e){if(e!=null)return e;throw new Error("Missing object")}function N6(e,i){return e.r===i.r&&e.g===i.g&&e.b===i.b&&e.a===i.a}function z6(e,i){e.r=i.r,e.g=i.g,e.b=i.b,e.a=i.a}function U6(e){var i=e.r,r=e.g,o=e.b,u=e.a;return{r:i,g:r,b:o,a:u}}function kE(e,i,r,o){return o===void 0&&(o=1),{r:e,g:i,b:r,a:o}}var L5=kE(0,0,0,0),wj=kE(0,0,0,1),Ez=kE(1,1,1,0),Cj=kE(1,1,1,1),sx=!0;function Aj(e,i){i===void 0&&(i=sx),i&&(e[10]=-e[10],e[14]=-e[14])}function Tj(e,i){i===void 0&&(i=sx),i&&(e[10]=-e[10],e[14]=-e[14]+1)}function wz(e,i){if(i===void 0&&(i=sx),i)switch(e){case wo.LESS:return wo.GREATER;case wo.LEQUAL:return wo.GEQUAL;case wo.GEQUAL:return wo.LEQUAL;case wo.GREATER:return wo.LESS;default:return e}else return e}function Mj(e,i){return i===void 0&&(i=sx),i?1-e:e}function Rj(e,i){return i===void 0&&(i=sx),i?-e:e}function Ij(e,i,r,o){if(o===void 0&&(o=sx),r=wz(r,o),r===wo.LESS)return e<i;if(r===wo.LEQUAL)return e<=i;if(r===wo.GREATER)return e>i;if(r===wo.GEQUAL)return e>=i;throw new Error("whoops")}function gR(e){return!!(e&&!(e&e-1))}function ux(e,i){return e!=null?e:i}function Cz(e){return e===void 0?null:e}function Pj(e,i,r){e.length=i,e.fill(r)}function mR(e,i){var r=i-1;return e+r&~r}function Oj(e,i){return((e+i-1)/i|0)*i}function Az(e,i,r){for(var o=0,u=e.length;o<u;){var c=o+(u-o>>>1),p=r(i,e[c]);p<0?u=c:o=c+1}return o}function kj(e,i,r){var o=Az(e,i,r);e.splice(o,0,i)}function Lj(e,i,r){return r?e|=i:e&=~i,e}function Tz(e,i){for(var r=new Array(e),o=0;o<e;o++)r[o]=i();return r}function Mz(e,i){i===void 0&&(i=1);var r=e.split(`
`);return r.map(function(o,u){return"".concat(Rz(""+(i+u),4," "),"  ").concat(o)}).join(`
`)}function Rz(e,i,r){for(r===void 0&&(r="0");e.length<i;)e="".concat(r).concat(e);return e}function Dj(e,i){for(var r=[],o=e;o<e+i;o++)r.push(o);return r}function Z6(e,i){e.blendDstFactor=i.blendDstFactor,e.blendSrcFactor=i.blendSrcFactor,e.blendMode=i.blendMode}function yR(e,i){return e===void 0&&(e={}),e.compare=i.compare,e.depthFailOp=i.depthFailOp,e.passOp=i.passOp,e.failOp=i.failOp,e}function V6(e,i){return e===void 0&&(e={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),Z6(e.rgbBlendState,i.rgbBlendState),Z6(e.alphaBlendState,i.alphaBlendState),e.channelWriteMask=i.channelWriteMask,e}function D5(e,i){e.length!==i.length&&(e.length=i.length);for(var r=0;r<i.length;r++)e[r]=V6(e[r],i[r])}function Iz(e,i){i.attachmentsState!==void 0&&D5(e.attachmentsState,i.attachmentsState),e.blendConstant&&i.blendConstant&&z6(e.blendConstant,i.blendConstant),e.depthCompare=ux(i.depthCompare,e.depthCompare),e.depthWrite=ux(i.depthWrite,e.depthWrite),e.stencilWrite=ux(i.stencilWrite,e.stencilWrite),e.stencilFront&&i.stencilFront&&yR(e.stencilFront,i.stencilFront),e.stencilBack&&i.stencilBack&&yR(e.stencilBack,i.stencilBack),e.cullMode=ux(i.cullMode,e.cullMode),e.frontFace=ux(i.frontFace,e.frontFace),e.polygonOffset=ux(i.polygonOffset,e.polygonOffset)}function lx(e){var i=Object.assign({},e);return i.attachmentsState=[],D5(i.attachmentsState,e.attachmentsState),i.blendConstant=i.blendConstant&&U6(i.blendConstant),i.stencilFront=yR(void 0,e.stencilFront),i.stencilBack=yR(void 0,e.stencilBack),i}function Pz(e,i){i.channelWriteMask!==void 0&&(e.channelWriteMask=i.channelWriteMask),i.rgbBlendMode!==void 0&&(e.rgbBlendState.blendMode=i.rgbBlendMode),i.alphaBlendMode!==void 0&&(e.alphaBlendState.blendMode=i.alphaBlendMode),i.rgbBlendSrcFactor!==void 0&&(e.rgbBlendState.blendSrcFactor=i.rgbBlendSrcFactor),i.alphaBlendSrcFactor!==void 0&&(e.alphaBlendState.blendSrcFactor=i.alphaBlendSrcFactor),i.rgbBlendDstFactor!==void 0&&(e.rgbBlendState.blendDstFactor=i.rgbBlendDstFactor),i.alphaBlendDstFactor!==void 0&&(e.alphaBlendState.blendDstFactor=i.alphaBlendDstFactor)}var H6={blendMode:Xc.ADD,blendSrcFactor:No.ONE,blendDstFactor:No.ZERO},Qy={attachmentsState:[{channelWriteMask:Yc.ALL,rgbBlendState:H6,alphaBlendState:H6}],blendConstant:U6(L5),depthWrite:!0,depthCompare:wo.LEQUAL,stencilWrite:!1,stencilFront:{compare:wo.ALWAYS,passOp:fl.KEEP,depthFailOp:fl.KEEP,failOp:fl.KEEP},stencilBack:{compare:wo.ALWAYS,passOp:fl.KEEP,depthFailOp:fl.KEEP,failOp:fl.KEEP},cullMode:op.NONE,frontFace:OE.CCW,polygonOffset:!1};function Oz(e,i){e===void 0&&(e=null),i===void 0&&(i=Qy);var r=lx(i);return e!==null&&Iz(r,e),r}var Fj=Oz({depthCompare:wo.ALWAYS,depthWrite:!1},Qy);function Bj(e,i){return e.attachmentsState===void 0&&(e.attachmentsState=[],D5(e.attachmentsState,Qy.attachmentsState)),Pz(e.attachmentsState[0],i),e}var j6={texture:null,sampler:null,formatKind:hl.Float,dimension:Ro.TEXTURE_2D};function cx(e,i,r){if(e.length!==i.length)return!1;for(var o=0;o<e.length;o++)if(!r(e[o],i[o]))return!1;return!0}function fx(e,i){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]=i(e[o]);return r}function kz(e,i){return e.buffer===i.buffer&&e.size===i.size&&e.binding===i.binding&&e.offset===i.offset}function Lz(e,i){return e===null?i===null:i===null?!1:e.sampler===i.sampler&&e.texture===i.texture&&e.dimension===i.dimension&&e.formatKind===i.formatKind&&e.comparison===i.comparison}function Nj(e,i){return e.samplerBindings=e.samplerBindings||[],e.uniformBufferBindings=e.uniformBufferBindings||[],i.samplerBindings=i.samplerBindings||[],i.uniformBufferBindings=i.uniformBufferBindings||[],!(e.samplerBindings.length!==i.samplerBindings.length||!cx(e.samplerBindings,i.samplerBindings,Lz)||!cx(e.uniformBufferBindings,i.uniformBufferBindings,kz))}function W6(e,i){return e.blendMode==i.blendMode&&e.blendSrcFactor===i.blendSrcFactor&&e.blendDstFactor===i.blendDstFactor}function Dz(e,i){return!(!W6(e.rgbBlendState,i.rgbBlendState)||!W6(e.alphaBlendState,i.alphaBlendState)||e.channelWriteMask!==i.channelWriteMask)}function _R(e,i){return e.compare==i.compare&&e.depthFailOp===i.depthFailOp&&e.failOp===i.failOp&&e.passOp===i.passOp}function Fz(e,i){return!cx(e.attachmentsState,i.attachmentsState,Dz)||e.blendConstant&&i.blendConstant&&!N6(e.blendConstant,i.blendConstant)||e.stencilFront&&i.stencilFront&&!_R(e.stencilFront,i.stencilFront)||e.stencilBack&&i.stencilBack&&!_R(e.stencilBack,i.stencilBack)?!1:e.depthCompare===i.depthCompare&&e.depthWrite===i.depthWrite&&e.stencilWrite===i.stencilWrite&&e.cullMode===i.cullMode&&e.frontFace===i.frontFace&&e.polygonOffset===i.polygonOffset}function G6(e,i){return e.id===i.id}function Bz(e,i){return e===i}function zj(e,i){return!(e.topology!==i.topology||e.inputLayout!==i.inputLayout||e.sampleCount!==i.sampleCount||e.megaStateDescriptor&&i.megaStateDescriptor&&!Fz(e.megaStateDescriptor,i.megaStateDescriptor)||!G6(e.program,i.program)||!cx(e.colorAttachmentFormats,i.colorAttachmentFormats,Bz)||e.depthStencilAttachmentFormat!==i.depthStencilAttachmentFormat)}function Nz(e,i){return e.offset===i.offset&&e.shaderLocation===i.shaderLocation&&e.format===i.format&&e.divisor===i.divisor}function zz(e,i){return isNil(e)?isNil(i):isNil(i)?!1:e.arrayStride===i.arrayStride&&e.stepMode===i.stepMode&&cx(e.attributes,i.attributes,Nz)}function Uj(e,i){return!(e.indexBufferFormat!==i.indexBufferFormat||!cx(e.vertexBufferDescriptors,i.vertexBufferDescriptors,zz)||!G6(e.program,i.program))}function Zj(e,i){return e.addressModeU===i.addressModeU&&e.addressModeV===i.addressModeV&&e.minFilter===i.minFilter&&e.magFilter===i.magFilter&&e.mipmapFilter===i.mipmapFilter&&e.lodMinClamp===i.lodMinClamp&&e.lodMaxClamp===i.lodMaxClamp&&e.maxAnisotropy===i.maxAnisotropy&&e.compareFunction===i.compareFunction}function Uz(e){var i=e.sampler,r=e.texture,o=e.dimension,u=e.formatKind,c=e.comparison;return{sampler:i,texture:r,dimension:o,formatKind:u,comparison:c}}function $6(e){var i=e.buffer,r=e.size,o=e.binding,u=e.offset;return{binding:o,buffer:i,offset:u,size:r}}function Zz(e){var i=e.binding,r=e.texture;return{binding:i,texture:r}}function Vj(e){var i=e.samplerBindings&&fx(e.samplerBindings,Uz),r=e.uniformBufferBindings&&fx(e.uniformBufferBindings,$6),o=e.storageBufferBindings&&fx(e.storageBufferBindings,$6),u=e.storageTextureBindings&&fx(e.storageTextureBindings,Zz);return{samplerBindings:i,uniformBufferBindings:r,storageBufferBindings:o,storageTextureBindings:u,pipeline:e.pipeline}}function Hj(e){var i=e.inputLayout,r=e.program,o=e.topology,u=e.megaStateDescriptor&&lx(e.megaStateDescriptor),c=e.colorAttachmentFormats.slice(),p=e.depthStencilAttachmentFormat,g=e.sampleCount;return{inputLayout:i,megaStateDescriptor:u,program:r,topology:o,colorAttachmentFormats:c,depthStencilAttachmentFormat:p,sampleCount:g}}function Vz(e){var i=e.shaderLocation,r=e.format,o=e.offset,u=e.divisor;return{shaderLocation:i,format:r,offset:o,divisor:u}}function Hz(e){if(isNil(e))return e;var i=e.arrayStride,r=e.stepMode,o=fx(e.attributes,Vz);return{arrayStride:i,stepMode:r,attributes:o}}function jj(e){var i=fx(e.vertexBufferDescriptors,Hz),r=e.indexBufferFormat,o=e.program;return{vertexBufferDescriptors:i,indexBufferFormat:r,program:o}}var jo,jz=/([^[]*)(\[[0-9]+\])?/;function Wz(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};var i=e.match(jz);if(!i||i.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:i[1],length:Number(i[2])||1,isArray:!!i[2]}}function Ih(){var e=null;return function(i,r,o){var u=e!==o;return u&&(i.uniform1i(r,o),e=o),u}}function pl(e,i,r,o){var u=null,c=null;return function(p,g,y){var w=i(y,r),O=w.length,D=!1;if(u===null)u=new Float32Array(O),c=O,D=!0;else{bo(c===O,"Uniform length cannot change.");for(var V=0;V<O;++V)if(w[V]!==u[V]){D=!0;break}}return D&&(o(p,e,g,w),u.set(w)),D}}function qf(e,i,r,o){e[i](r,o)}function im(e,i,r,o){e[i](r,!1,o)}var Gz={},$z={},Xz={},X6=[0];function F5(e,i,r,o){i===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(X6[0]=e,e=X6);var u=e.length;if(e instanceof r)return e;var c=o[u];c||(c=new r(u),o[u]=c);for(var p=0;p<u;p++)c[p]=e[p];return c}function Zp(e,i){return F5(e,i,Float32Array,Gz)}function f0(e,i){return F5(e,i,Int32Array,$z)}function xR(e,i){return F5(e,i,Uint32Array,Xz)}var Yz=(jo={},jo[Cr.FLOAT]=pl.bind(null,"uniform1fv",Zp,1,qf),jo[Cr.FLOAT_VEC2]=pl.bind(null,"uniform2fv",Zp,2,qf),jo[Cr.FLOAT_VEC3]=pl.bind(null,"uniform3fv",Zp,3,qf),jo[Cr.FLOAT_VEC4]=pl.bind(null,"uniform4fv",Zp,4,qf),jo[Cr.INT]=pl.bind(null,"uniform1iv",f0,1,qf),jo[Cr.INT_VEC2]=pl.bind(null,"uniform2iv",f0,2,qf),jo[Cr.INT_VEC3]=pl.bind(null,"uniform3iv",f0,3,qf),jo[Cr.INT_VEC4]=pl.bind(null,"uniform4iv",f0,4,qf),jo[Cr.BOOL]=pl.bind(null,"uniform1iv",f0,1,qf),jo[Cr.BOOL_VEC2]=pl.bind(null,"uniform2iv",f0,2,qf),jo[Cr.BOOL_VEC3]=pl.bind(null,"uniform3iv",f0,3,qf),jo[Cr.BOOL_VEC4]=pl.bind(null,"uniform4iv",f0,4,qf),jo[Cr.FLOAT_MAT2]=pl.bind(null,"uniformMatrix2fv",Zp,4,im),jo[Cr.FLOAT_MAT3]=pl.bind(null,"uniformMatrix3fv",Zp,9,im),jo[Cr.FLOAT_MAT4]=pl.bind(null,"uniformMatrix4fv",Zp,16,im),jo[Cr.UNSIGNED_INT]=pl.bind(null,"uniform1uiv",xR,1,qf),jo[Cr.UNSIGNED_INT_VEC2]=pl.bind(null,"uniform2uiv",xR,2,qf),jo[Cr.UNSIGNED_INT_VEC3]=pl.bind(null,"uniform3uiv",xR,3,qf),jo[Cr.UNSIGNED_INT_VEC4]=pl.bind(null,"uniform4uiv",xR,4,qf),jo[Cr.FLOAT_MAT2x3]=pl.bind(null,"uniformMatrix2x3fv",Zp,6,im),jo[Cr.FLOAT_MAT2x4]=pl.bind(null,"uniformMatrix2x4fv",Zp,8,im),jo[Cr.FLOAT_MAT3x2]=pl.bind(null,"uniformMatrix3x2fv",Zp,6,im),jo[Cr.FLOAT_MAT3x4]=pl.bind(null,"uniformMatrix3x4fv",Zp,12,im),jo[Cr.FLOAT_MAT4x2]=pl.bind(null,"uniformMatrix4x2fv",Zp,8,im),jo[Cr.FLOAT_MAT4x3]=pl.bind(null,"uniformMatrix4x3fv",Zp,12,im),jo[Cr.SAMPLER_2D]=Ih,jo[Cr.SAMPLER_CUBE]=Ih,jo[Cr.SAMPLER_3D]=Ih,jo[Cr.SAMPLER_2D_SHADOW]=Ih,jo[Cr.SAMPLER_2D_ARRAY]=Ih,jo[Cr.SAMPLER_2D_ARRAY_SHADOW]=Ih,jo[Cr.SAMPLER_CUBE_SHADOW]=Ih,jo[Cr.INT_SAMPLER_2D]=Ih,jo[Cr.INT_SAMPLER_3D]=Ih,jo[Cr.INT_SAMPLER_CUBE]=Ih,jo[Cr.INT_SAMPLER_2D_ARRAY]=Ih,jo[Cr.UNSIGNED_INT_SAMPLER_2D]=Ih,jo[Cr.UNSIGNED_INT_SAMPLER_3D]=Ih,jo[Cr.UNSIGNED_INT_SAMPLER_CUBE]=Ih,jo[Cr.UNSIGNED_INT_SAMPLER_2D_ARRAY]=Ih,jo);function Y6(e,i,r){var o=Yz[r.type];if(!o)throw new Error("Unknown GLSL uniform type ".concat(r.type));return o().bind(null,e,i)}var Kz={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function qz(e){return Object.prototype.toString.call(e)in Kz}function LE(e,i){return"#define ".concat(e," ").concat(i)}function Qz(e){var i={};return e.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(r,o,u){var c=Number(u);return i[o]=isNaN(c)?u:c,""}),i}function Jz(e,i){var r=[];return e.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(o,u,c){var p=Number(u);return r.push({location:isNaN(p)?i[u]:p,name:c}),""}),r}function Wj(e){var i=[],r=[];return e.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(o,u,c){var p=[];return c.trim().replace(`\r
`,`
`).split(`
`).forEach(function(g){var y=__read(g.trim().split(/\s+/),2),w=y[0],O=y[1];p.push({type:w.trim(),name:O.replace(";","").trim()})}),r.push({type:u.trim(),uniforms:p}),""}),e.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(o,u){return u.trim().replace(`\r
`,`
`).split(`
`).forEach(function(c){var p=c.trim().split(" "),g=p[0]||"",y=p[1]||"",w=y.indexOf("[")>-1;if(y=y.replace(";","").replace("[","").trim(),!g.startsWith("#")){if(g){var O=r.find(function(X){return g===X.type});if(O)if(w)for(var D=function(X){O.uniforms.forEach(function(ce){i.push("".concat(y,"[").concat(X,"].").concat(ce.name))})},V=0;V<5;V++)D(V);else O.uniforms.forEach(function(X){i.push("".concat(y,".").concat(X.name))})}y&&i.push(y)}}),""}),i}function K6(e){if(e===void 0)return null;var i=/binding\s*=\s*(\d+)/.exec(e);if(i!==null){var r=parseInt(i[1],10);if(!Number.isNaN(r))return r}return null}function eU(e){var i="",r=e;return[r,i]}function h0(e,i,r,o,u){var c;o===void 0&&(o=null),u===void 0&&(u=!0);var p=e.glslVersion==="#version 100",g=i==="frag"&&((c=r.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||c===void 0?void 0:c.length)>1,y=r.replace(`\r
`,`
`).split(`
`).map(function(ir){return ir.replace(/[/][/].*$/,"")}).filter(function(ir){var sr=!ir||/^\s+$/.test(ir);return!sr}),w="";o!==null&&(w=Object.keys(o).map(function(ir){return LE(ir,o[ir])}).join(`
`));var O=y.find(function(ir){return ir.startsWith("precision")})||"precision mediump float;",D=u?y.filter(function(ir){return!ir.startsWith("precision")}).join(`
`):y.join(`
`),V="";if(e.viewportOrigin===ix.UPPER_LEFT&&(V+="".concat(LE("VIEWPORT_ORIGIN_TL","1"),`
`)),e.clipSpaceNearZ===ax.ZERO&&(V+="".concat(LE("CLIPSPACE_NEAR_ZERO","1"),`
`)),e.explicitBindingLocations){var X=0,ce=0,de=0;D=D.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(ir,sr,Tr,Vr){var sn=Tr?"".concat(Tr,", "):"";return"layout(".concat(sn,"set = ").concat(X,", binding = ").concat(ce++,") uniform ").concat(Vr)}),X++,ce=0,bo(e.separateSamplerTextures),D=D.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(ir,sr,Tr,Vr,sn){var ln=K6(Tr);ln===null&&(ln=ce++);var Zn=(0,b.CR)(eU(Vr),2),ci=Zn[0],ki=Zn[1];return i==="frag"?`
layout(set = `.concat(X,", binding = ").concat(ln*2+0,") uniform texture").concat(ci," T_").concat(sn,`;
layout(set = `).concat(X,", binding = ").concat(ln*2+1,") uniform sampler").concat(ki," S_").concat(sn,";").trim():""}),D=D.replace(i==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(ir,sr){return"layout(location = ".concat(de++,") ").concat(sr)}),V+="".concat(LE("gl_VertexID","gl_VertexIndex"),`
`),V+="".concat(LE("gl_InstanceID","gl_InstanceIndex"),`
`),O=O.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var we=0;D=D.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(ir,sr,Tr,Vr,sn){var ln=K6(Tr);return ln===null&&(ln=we++),"uniform sampler".concat(Vr," ").concat(sn,"; // BINDING=").concat(ln)})}if(e.separateSamplerTextures)D=D.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(ir,sr,Tr){return"sampler".concat(sr,"(T_").concat(Tr,", S_").concat(Tr,")")}),D=D.replace(/\bTEXTURE\((.*?)\)/g,function(ir,sr){return"T_".concat(sr)});else{var je=[];D=D.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(ir,sr,Tr){return je.push([Tr,sr]),Tr}),p&&je.forEach(function(ir){var sr=(0,b.CR)(ir,2),Tr=sr[0],Vr=sr[1];D=D.replace(new RegExp("texture\\(".concat(Tr),"g"),function(){return"texture".concat(Vr,"(").concat(Tr)})}),D=D.replace(/\bTEXTURE\((.*?)\)/g,function(ir,sr){return sr})}var ht="".concat(p?"":e.glslVersion,`
`).concat(p&&g?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(p&&i==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(u?O:"",`
`).concat(V||"").concat(w?w+`
`:"",`
`).concat(D,`
`).trim();if(e.explicitBindingLocations&&i==="frag"&&(ht=ht.replace(/^\b(out)\b/g,function(ir,sr){return"layout(location = 0) ".concat(sr)})),p){if(i==="frag"&&(ht=ht.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(ir,sr,Tr){return"varying ".concat(sr," ").concat(Tr,`;
`)})),i==="vert"&&(ht=ht.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(ir,sr,Tr){return"varying ".concat(sr," ").concat(Tr,`;
`)}),ht=ht.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(ir,sr,Tr){return"attribute ".concat(sr," ").concat(Tr,`;
`)})),ht=ht.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(ir,sr){return sr.trim().replace(/^.*$/gm,function(Tr){var Vr=Tr.trim();return Vr.startsWith("#")?Vr:Tr?"uniform ".concat(Vr):""})}),i==="frag")if(g){var _t=[];ht=ht.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(ir,sr){return _t.push(sr),"vec4 ".concat(sr,`;
`)});var Dt=ht.lastIndexOf("}");ht=ht.substring(0,Dt)+`
    `.concat(_t.map(function(ir,sr){return"gl_FragData[".concat(sr,"] = ").concat(ir,`;
    `)}).join(`
`))+ht.substring(Dt)}else{var Yt;if(ht=ht.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(ir,sr,Tr){return Yt=Tr,"".concat(sr," ").concat(Tr,`;
`)}),Yt){var Dt=ht.lastIndexOf("}");ht=ht.substring(0,Dt)+`
  gl_FragColor = vec4(`.concat(Yt,`);
`)+ht.substring(Dt)}}ht=ht.replace(/^\s*layout\((.*)\)/gm,"")}return ht}function Gj(e,i,r,o){o===void 0&&(o=null);var u=h0(e,"vert",i,o),c=h0(e,"frag",r,o);return{vert:i,frag:r,preprocessedVert:u,preprocessedFrag:c}}var mv=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=e.call(this)||this;return c.id=o,c.device=u,c.device.resourceCreationTracker!==null&&c.device.resourceCreationTracker.trackResourceCreated(c),c}return i.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},i}(k6),tU=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.Bindings;var g=c.uniformBufferBindings,y=c.samplerBindings;return p.uniformBufferBindings=g||[],p.samplerBindings=y||[],p.bindingLayouts=p.createBindingLayouts(),p}return i.prototype.createBindingLayouts=function(){var r=0,o=0,u=[],c=this.uniformBufferBindings.length,p=this.samplerBindings.length;return u.push({firstUniformBuffer:r,numUniformBuffers:c,firstSampler:o,numSamplers:p}),r+=c,o+=p,{numUniformBuffers:r,numSamplers:o,bindingLayoutTables:u}},i}(mv);function fa(e){return typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext?!0:!!(e&&e._version===2)}function q6(e){var i=rg(e);switch(i){case Qn.BC1:case Qn.BC2:case Qn.BC3:case Qn.BC4_UNORM:case Qn.BC4_SNORM:case Qn.BC5_UNORM:case Qn.BC5_SNORM:return!0;default:return!1}}function Q6(e){var i=ox(e);if(i&Gi.Normalized)return!1;var r=rg(e);return r===Qn.S8||r===Qn.S16||r===Qn.S32||r===Qn.U8||r===Qn.U16||r===Qn.U32}function rU(e){switch(e){case gv.STATIC:return Cr.STATIC_DRAW;case gv.DYNAMIC:return Cr.DYNAMIC_DRAW}}function J6(e){if(e&uu.INDEX)return Cr.ELEMENT_ARRAY_BUFFER;if(e&uu.VERTEX)return Cr.ARRAY_BUFFER;if(e&uu.UNIFORM)return Cr.UNIFORM_BUFFER}function nU(e){switch(e){case ql.TRIANGLES:return Cr.TRIANGLES;case ql.POINTS:return Cr.POINTS;case ql.TRIANGLE_STRIP:return Cr.TRIANGLE_STRIP;case ql.LINES:return Cr.LINES;case ql.LINE_STRIP:return Cr.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function iU(e){switch(e){case Qn.U8:return Cr.UNSIGNED_BYTE;case Qn.U16:return Cr.UNSIGNED_SHORT;case Qn.U32:return Cr.UNSIGNED_INT;case Qn.S8:return Cr.BYTE;case Qn.S16:return Cr.SHORT;case Qn.S32:return Cr.INT;case Qn.F16:return Cr.HALF_FLOAT;case Qn.F32:return Cr.FLOAT;default:throw new Error("whoops")}}function aU(e){switch(e){case va.R:return 1;case va.RG:return 2;case va.RGB:return 3;case va.RGBA:return 4;default:return 1}}function oU(e){var i=rg(e),r=vR(e),o=ox(e),u=iU(i),c=aU(r),p=!!(o&Gi.Normalized);return{size:c,type:u,normalized:p}}function sU(e){switch(e){case qr.U8_R:return Cr.UNSIGNED_BYTE;case qr.U16_R:return Cr.UNSIGNED_SHORT;case qr.U32_R:return Cr.UNSIGNED_INT;default:throw new Error("whoops")}}function DE(e){switch(e){case Rh.CLAMP_TO_EDGE:return Cr.CLAMP_TO_EDGE;case Rh.REPEAT:return Cr.REPEAT;case Rh.MIRRORED_REPEAT:return Cr.MIRRORED_REPEAT;default:throw new Error("whoops")}}function bR(e,i){if(i===Ac.LINEAR&&e===wl.BILINEAR)return Cr.LINEAR_MIPMAP_LINEAR;if(i===Ac.LINEAR&&e===wl.POINT)return Cr.NEAREST_MIPMAP_LINEAR;if(i===Ac.NEAREST&&e===wl.BILINEAR)return Cr.LINEAR_MIPMAP_NEAREST;if(i===Ac.NEAREST&&e===wl.POINT)return Cr.NEAREST_MIPMAP_NEAREST;if(i===Ac.NO_MIP&&e===wl.BILINEAR)return Cr.LINEAR;if(i===Ac.NO_MIP&&e===wl.POINT)return Cr.NEAREST;throw new Error("Unknown texture filter mode")}function hx(e,i){i===void 0&&(i=0);var r=e;return r.gl_buffer_pages[i/r.pageByteSize|0]}function px(e){var i=e;return i.gl_texture}function B5(e){var i=e;return i.gl_sampler}function FE(e,i){e.name=i,e.__SPECTOR_Metadata={name:i}}function eN(e,i){for(var r=[];;){var o=i.exec(e);if(!o)break;r.push(o)}return r}function p0(e){return e.blendMode==Xc.ADD&&e.blendSrcFactor==No.ONE&&e.blendDstFactor===No.ZERO}function uU(e){switch(e){case dR.OcclusionConservative:return Cr.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function lU(e){if(e===Ro.TEXTURE_2D)return Cr.TEXTURE_2D;if(e===Ro.TEXTURE_2D_ARRAY)return Cr.TEXTURE_2D_ARRAY;if(e===Ro.TEXTURE_CUBE_MAP)return Cr.TEXTURE_CUBE_MAP;if(e===Ro.TEXTURE_3D)return Cr.TEXTURE_3D;throw new Error("whoops")}function N5(e,i,r,o){return!(e%r!==0||i%o!==0)}var cU=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.Buffer;var g=c.viewOrSize,y=c.usage,w=c.hint,O=w===void 0?gv.STATIC:w,D=u.uniformBufferMaxPageByteSize,V=u.gl,X=y&uu.UNIFORM;X||(fa(V)?V.bindVertexArray(null):u.OES_vertex_array_object.bindVertexArrayOES(null));var ce=nx(g)?mR(g,4):mR(g.byteLength,4);p.gl_buffer_pages=[];var de;if(X){for(var we=ce;we>0;)p.gl_buffer_pages.push(p.createBufferPage(Math.min(we,D),y,O)),we-=D;de=D}else p.gl_buffer_pages.push(p.createBufferPage(ce,y,O)),de=ce;return p.pageByteSize=de,p.byteSize=ce,p.usage=y,p.gl_target=J6(y),nx(g)||p.setSubData(0,new Uint8Array(g.buffer)),X||(fa(V)?V.bindVertexArray(p.device.currentBoundVAO):u.OES_vertex_array_object.bindVertexArrayOES(p.device.currentBoundVAO)),p}return i.prototype.setSubData=function(r,o,u,c){u===void 0&&(u=0),c===void 0&&(c=o.byteLength-u);for(var p=this.device.gl,g=this.pageByteSize,y=r+c,w=r,O=r%g;w<y;){var D=fa(p)?p.COPY_WRITE_BUFFER:this.gl_target,V=hx(this,w);if(V.ubo)return;p.bindBuffer(D,V),fa(p)?p.bufferSubData(D,O,o,u,Math.min(y-w,g)):p.bufferSubData(D,O,o),w+=g,O=0,u+=g,this.device.debugGroupStatisticsBufferUpload()}},i.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.gl_buffer_pages.length;r++)this.gl_buffer_pages[r].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[r]);this.gl_buffer_pages=[]},i.prototype.createBufferPage=function(r,o,u){var c=this.device.gl,p=o&uu.UNIFORM;if(!fa(c)&&p)return{ubo:!0};var g=this.device.ensureResourceExists(c.createBuffer()),y=J6(o),w=rU(u);return c.bindBuffer(y,g),c.bufferData(y,r,w),g},i}(mv),fU=function(e){(0,b.ZT)(i,e);function i(r){var o,u,c,p,g=r.id,y=r.device,w=r.descriptor,O,D=e.call(this,{id:g,device:y})||this;D.type=ds.InputLayout;var V=w.vertexBufferDescriptors,X=w.indexBufferFormat,ce=w.program;bo(X===qr.U16_R||X===qr.U32_R||X===null);var de=X!==null?sU(X):null,we=X!==null?F6(X):null,je=D.device.gl,ht=D.device.ensureResourceExists(fa(je)?je.createVertexArray():y.OES_vertex_array_object.createVertexArrayOES());fa(je)?je.bindVertexArray(ht):y.OES_vertex_array_object.bindVertexArrayOES(ht),je.bindBuffer(je.ARRAY_BUFFER,hx(D.device.fallbackVertexBuffer));try{for(var _t=(0,b.XA)(w.vertexBufferDescriptors),Dt=_t.next();!Dt.done;Dt=_t.next()){var Yt=Dt.value,ir=Yt.stepMode,sr=Yt.attributes;try{for(var Tr=(c=void 0,(0,b.XA)(sr)),Vr=Tr.next();!Vr.done;Vr=Tr.next()){var sn=Vr.value,ln=sn.shaderLocation,Zn=sn.format,ci=sn.divisor,ki=ci===void 0?1:ci,eo=fa(je)?ln:(O=ce.attributes[ln])===null||O===void 0?void 0:O.location,Xo=oU(Zn);if(sn.vertexFormat=Xo,!c0(eo)){Q6(Zn);var as=Xo.size,tu=Xo.type,lu=Xo.normalized;je.vertexAttribPointer(eo,as,tu,lu,0,0),ir===Ky.INSTANCE&&(fa(je)?je.vertexAttribDivisor(eo,ki):y.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(eo,ki)),je.enableVertexAttribArray(eo)}}}catch(ff){c={error:ff}}finally{try{Vr&&!Vr.done&&(p=Tr.return)&&p.call(Tr)}finally{if(c)throw c.error}}}}catch(ff){o={error:ff}}finally{try{Dt&&!Dt.done&&(u=_t.return)&&u.call(_t)}finally{if(o)throw o.error}}return fa(je)?je.bindVertexArray(null):y.OES_vertex_array_object.bindVertexArrayOES(null),D.vertexBufferDescriptors=V,D.vao=ht,D.indexBufferFormat=X,D.indexBufferType=de,D.indexBufferCompByteSize=we,D.program=ce,D}return i.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(fa(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},i}(mv),z5=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=r.fake,g=e.call(this,{id:o,device:u})||this;g.type=ds.Texture,c=(0,b.pi)({dimension:Ro.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},c);var y=g.device.gl,w,O,D=g.clampmipLevelCount(c);if(g.immutable=c.usage===Mf.RENDER_TARGET,g.pixelStore=c.pixelStore,g.format=c.format,g.dimension=c.dimension,g.formatKind=B6(c.format),g.width=c.width,g.height=c.height,g.depthOrArrayLayers=c.depthOrArrayLayers,g.mipmaps=D>=1,!p){O=g.device.ensureResourceExists(y.createTexture());var V=g.device.translateTextureType(c.format),X=g.device.translateTextureInternalFormat(c.format);if(g.device.setActiveTexture(y.TEXTURE0),g.device.currentTextures[0]=null,g.preprocessImage(),c.dimension===Ro.TEXTURE_2D){if(w=Cr.TEXTURE_2D,y.bindTexture(w,O),g.immutable)if(fa(y))y.texStorage2D(w,D,X,c.width,c.height);else{var ce=(X===Cr.DEPTH_COMPONENT||g.isNPOT(),0);(g.format===qr.D32F||g.format===qr.D24_S8)&&!fa(y)&&!u.WEBGL_depth_texture||(y.texImage2D(w,ce,X,c.width,c.height,0,X,V,null),g.mipmaps&&(g.mipmaps=!1,y.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_MIN_FILTER,Cr.LINEAR),y.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_WRAP_S,Cr.CLAMP_TO_EDGE),y.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_WRAP_T,Cr.CLAMP_TO_EDGE)))}bo(c.depthOrArrayLayers===1)}else if(c.dimension===Ro.TEXTURE_2D_ARRAY)w=Cr.TEXTURE_2D_ARRAY,y.bindTexture(w,O),g.immutable&&fa(y)&&y.texStorage3D(w,D,X,c.width,c.height,c.depthOrArrayLayers);else if(c.dimension===Ro.TEXTURE_3D)w=Cr.TEXTURE_3D,y.bindTexture(w,O),g.immutable&&fa(y)&&y.texStorage3D(w,D,X,c.width,c.height,c.depthOrArrayLayers);else if(c.dimension===Ro.TEXTURE_CUBE_MAP)w=Cr.TEXTURE_CUBE_MAP,y.bindTexture(w,O),g.immutable&&fa(y)&&y.texStorage2D(w,D,X,c.width,c.height),bo(c.depthOrArrayLayers===6);else throw new Error("whoops")}return g.gl_texture=O,g.gl_target=w,g.mipLevelCount=D,g}return i.prototype.setImageData=function(r,o){o===void 0&&(o=0);var u=this.device.gl;q6(this.format);var c=this.gl_target===Cr.TEXTURE_3D||this.gl_target===Cr.TEXTURE_2D_ARRAY,p=this.gl_target===Cr.TEXTURE_CUBE_MAP,g=qz(r[0]);this.device.setActiveTexture(u.TEXTURE0),this.device.currentTextures[0]=null;var y=r[0],w,O;g?(w=this.width,O=this.height):(w=y.width,O=y.height,this.width=w,this.height=O),u.bindTexture(this.gl_target,this.gl_texture);var D=this.device.translateTextureFormat(this.format),V=fa(u)?this.device.translateInternalTextureFormat(this.format):D,X=this.device.translateTextureType(this.format);this.preprocessImage();for(var ce=0;ce<this.depthOrArrayLayers;ce++){var de=r[ce],we=this.gl_target;p&&(we=Cr.TEXTURE_CUBE_MAP_POSITIVE_X+ce%6),this.immutable?u.texSubImage2D(we,o,0,0,w,O,D,X,de):fa(u)?c?u.texImage3D(we,o,V,w,O,this.depthOrArrayLayers,0,D,X,de):u.texImage2D(we,o,V,w,O,0,D,X,de):g?u.texImage2D(we,o,D,w,O,0,D,X,de):u.texImage2D(we,o,D,D,X,de)}this.mipmaps&&this.generateMipmap(c)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteTexture(px(this))},i.prototype.clampmipLevelCount=function(r){if(r.dimension===Ro.TEXTURE_2D_ARRAY&&r.depthOrArrayLayers>1){var o=rg(r.format);if(o===Qn.BC1)for(var u=r.width,c=r.height,p=0;p<r.mipLevelCount;p++){if(u<=2||c<=2)return p-1;u=Math.max(u/2|0,1),c=Math.max(c/2|0,1)}}return r.mipLevelCount},i.prototype.preprocessImage=function(){var r=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&r.pixelStorei(Cr.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&r.pixelStorei(Cr.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&r.pixelStorei(Cr.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},i.prototype.generateMipmap=function(r){r===void 0&&(r=!1);var o=this.device.gl;return!fa(o)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(o.bindTexture(this.gl_target,this.gl_texture),r?(o.texParameteri(this.gl_target,Cr.TEXTURE_BASE_LEVEL,0),o.texParameteri(this.gl_target,Cr.TEXTURE_MAX_LEVEL,Math.log2(this.width)),o.texParameteri(this.gl_target,Cr.TEXTURE_MIN_FILTER,Cr.LINEAR_MIPMAP_LINEAR),o.texParameteri(this.gl_target,Cr.TEXTURE_MAG_FILTER,Cr.LINEAR)):o.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_MIN_FILTER,Cr.NEAREST_MIPMAP_LINEAR),o.generateMipmap(this.gl_target),o.bindTexture(this.gl_target,null)),this)},i.prototype.isNPOT=function(){var r=this.device.gl;return fa(r)?!1:!gR(this.width)||!gR(this.height)},i}(mv),hU=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.RenderTarget,p.gl_renderbuffer=null,p.texture=null;var g=p.device.gl,y=c.format,w=c.width,O=c.height,D=c.sampleCount,V=D===void 0?1:D,X=c.texture,ce=!1;if((y===qr.D32F||y===qr.D24_S8)&&X&&!fa(g)&&!u.WEBGL_depth_texture&&(X.destroy(),p.texture=null,ce=!0),!ce&&X)p.texture=X;else{p.gl_renderbuffer=p.device.ensureResourceExists(g.createRenderbuffer()),g.bindRenderbuffer(g.RENDERBUFFER,p.gl_renderbuffer);var de=p.device.translateTextureInternalFormat(y,!0);fa(g)&&V>1?g.renderbufferStorageMultisample(Cr.RENDERBUFFER,V,de,w,O):g.renderbufferStorage(Cr.RENDERBUFFER,de,w,O)}return p.format=y,p.width=w,p.height=O,p.sampleCount=V,p}return i.prototype.destroy=function(){e.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},i}(mv),sp;(function(e){e[e.NeedsCompile=0]="NeedsCompile",e[e.Compiling=1]="Compiling",e[e.NeedsBind=2]="NeedsBind",e[e.ReadyToUse=3]="ReadyToUse"})(sp||(sp={}));var pU=function(e){(0,b.ZT)(i,e);function i(r,o){var u=r.id,c=r.device,p=r.descriptor,g=e.call(this,{id:u,device:c})||this;g.rawVertexGLSL=o,g.type=ds.Program,g.uniformSetters={},g.attributes=[];var y=g.device.gl;return g.descriptor=p,g.gl_program=g.device.ensureResourceExists(y.createProgram()),g.gl_shader_vert=null,g.gl_shader_frag=null,g.compileState=sp.NeedsCompile,g.tryCompileProgram(),g}return i.prototype.destroy=function(){e.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},i.prototype.tryCompileProgram=function(){var r,o;bo(this.compileState===sp.NeedsCompile);var u=this.descriptor,c=this.device.gl;!((r=u.vertex)===null||r===void 0)&&r.glsl&&(!((o=u.fragment)===null||o===void 0)&&o.glsl)&&(this.gl_shader_vert=this.compileShader(u.vertex.glsl,c.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(u.fragment.glsl,c.FRAGMENT_SHADER),c.attachShader(this.gl_program,this.gl_shader_vert),c.attachShader(this.gl_program,this.gl_shader_frag),c.linkProgram(this.gl_program),this.compileState=sp.Compiling,fa(c)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},i.prototype.readAttributesFromLinkedProgram=function(){for(var r,o=this.device.gl,u=o.getProgramParameter(this.gl_program,o.ACTIVE_ATTRIBUTES),c=Qz(this.descriptor.vertex.glsl),p=Jz(this.rawVertexGLSL,c),g=function(O){var D=o.getActiveAttrib(y.gl_program,O),V=D.name,X=D.type,ce=D.size,de=o.getAttribLocation(y.gl_program,V),we=(r=p.find(function(je){return je.name===V}))===null||r===void 0?void 0:r.location;de>=0&&!c0(we)&&(y.attributes[we]={name:V,location:de,type:X,size:ce})},y=this,w=0;w<u;w++)g(w)},i.prototype.readUniformLocationsFromLinkedProgram=function(){for(var r=this.device.gl,o=r.getProgramParameter(this.gl_program,r.ACTIVE_UNIFORMS),u=0;u<o;u++){var c=r.getActiveUniform(this.gl_program,u),p=Wz(c.name).name,g=r.getUniformLocation(this.gl_program,p);if(this.uniformSetters[p]=Y6(r,g,c),c&&c.size>1)for(var y=0;y<c.size;y++)g=r.getUniformLocation(this.gl_program,"".concat(p,"[").concat(y,"]")),this.uniformSetters["".concat(p,"[").concat(y,"]")]=Y6(r,g,c)}},i.prototype.compileShader=function(r,o){var u=this.device.gl,c=this.device.ensureResourceExists(u.createShader(o));return u.shaderSource(c,r),u.compileShader(c),c},i.prototype.setUniformsLegacy=function(r){r===void 0&&(r={});var o=this.device.gl;if(!fa(o)){var u=!1;for(var c in r){u||(o.useProgram(this.gl_program),u=!0);var p=r[c],g=this.uniformSetters[c];if(g){var y=p;y instanceof z5&&(y=y.textureIndex),g(y)}}}return this},i}(mv),dU=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.QueryPool;var g=p.device.gl;if(fa(g)){var y=c.elemCount,w=c.type;p.gl_query=Tz(y,function(){return p.device.ensureResourceExists(g.createQuery())}),p.gl_query_type=uU(w)}return p}return i.prototype.queryResultOcclusion=function(r){var o=this.device.gl;if(fa(o)){var u=this.gl_query[r];return o.getQueryParameter(u,o.QUERY_RESULT_AVAILABLE)?!!o.getQueryParameter(u,o.QUERY_RESULT):null}return null},i.prototype.destroy=function(){e.prototype.destroy.call(this);var r=this.device.gl;if(fa(r))for(var o=0;o<this.gl_query.length;o++)r.deleteQuery(this.gl_query[o])},i}(mv),vU=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=e.call(this,{id:o,device:u})||this;return c.type=ds.Readback,c.gl_pbo=null,c.gl_sync=null,c}return i.prototype.clientWaitAsync=function(r,o,u){o===void 0&&(o=0),u===void 0&&(u=10);var c=this.device.gl;return new Promise(function(p,g){function y(){var w=c.clientWaitSync(r,o,0);if(w==c.WAIT_FAILED){g();return}if(w==c.TIMEOUT_EXPIRED){setTimeout(y,xz(u,0,c.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}p()}y()})},i.prototype.getBufferSubDataAsync=function(r,o,u,c,p,g){return(0,b.mG)(this,void 0,void 0,function(){var y;return(0,b.Jh)(this,function(w){switch(w.label){case 0:return y=this.device.gl,fa(y)?(this.gl_sync=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0),y.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return w.sent(),y.bindBuffer(r,o),y.getBufferSubData(r,u,c,p,g),y.bindBuffer(r,null),[2,c];case 2:return[2]}})})},i.prototype.readTexture=function(r,o,u,c,p,g,y,w){return y===void 0&&(y=0),w===void 0&&(w=g.byteLength||0),(0,b.mG)(this,void 0,void 0,function(){var O,D,V,X,ce;return(0,b.Jh)(this,function(de){return O=this.device.gl,D=r,V=this.device.translateTextureFormat(D.format),X=this.device.translateTextureType(D.format),ce=Sz(D.format),fa(O)?(this.gl_pbo=this.device.ensureResourceExists(O.createBuffer()),O.bindBuffer(O.PIXEL_PACK_BUFFER,this.gl_pbo),O.bufferData(O.PIXEL_PACK_BUFFER,w,O.STREAM_READ),O.bindBuffer(O.PIXEL_PACK_BUFFER,null),O.bindFramebuffer(Cr.READ_FRAMEBUFFER,this.device.readbackFramebuffer),O.framebufferTexture2D(Cr.READ_FRAMEBUFFER,Cr.COLOR_ATTACHMENT0,Cr.TEXTURE_2D,D.gl_texture,0),O.bindBuffer(O.PIXEL_PACK_BUFFER,this.gl_pbo),O.readPixels(o,u,c,p,V,X,y*ce),O.bindBuffer(O.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(O.PIXEL_PACK_BUFFER,this.gl_pbo,0,g,y,0)]):[2,this.readTextureSync(r,o,u,c,p,g,y,w)]})})},i.prototype.readTextureSync=function(r,o,u,c,p,g,y,w){w===void 0&&(w=g.byteLength||0);var O=this.device.gl,D=r,V=this.device.translateTextureType(D.format);return O.bindFramebuffer(Cr.FRAMEBUFFER,this.device.readbackFramebuffer),O.framebufferTexture2D(Cr.FRAMEBUFFER,Cr.COLOR_ATTACHMENT0,Cr.TEXTURE_2D,D.gl_texture,0),O.pixelStorei(O.PACK_ALIGNMENT,4),O.readPixels(o,u,c,p,O.RGBA,V,g),g},i.prototype.readBuffer=function(r,o,u,c,p){return(0,b.mG)(this,void 0,void 0,function(){var g;return(0,b.Jh)(this,function(y){return g=this.device.gl,fa(g)?[2,this.getBufferSubDataAsync(g.ARRAY_BUFFER,hx(r,o),o,u,c,p)]:[2,Promise.reject()]})})},i.prototype.destroy=function(){e.prototype.destroy.call(this),fa(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},i}(mv),gU=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;return y.type=ds.RenderPipeline,y.drawMode=nU((p=c.topology)!==null&&p!==void 0?p:ql.TRIANGLES),y.program=c.program,y.inputLayout=c.inputLayout,y.megaState=(0,b.pi)((0,b.pi)({},lx(Qy)),c.megaStateDescriptor),y.colorAttachmentFormats=c.colorAttachmentFormats.slice(),y.depthStencilAttachmentFormat=c.depthStencilAttachmentFormat,y.sampleCount=(g=c.sampleCount)!==null&&g!==void 0?g:1,y}return i}(mv),mU=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=ds.ComputePipeline,p.descriptor=c,p}return i}(mv),yU=function(){function e(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return e.prototype.trackResourceCreated=function(i){this.creationStacks.set(i,new Error().stack),this.liveObjects.add(i)},e.prototype.trackResourceDestroyed=function(i){this.deletionStacks.has(i)&&console.warn("Object double freed:",i,`

Creation stack: `,this.creationStacks.get(i),`

Deletion stack: `,this.deletionStacks.get(i),`

This stack: `,new Error().stack),this.deletionStacks.set(i,new Error().stack),this.liveObjects.delete(i)},e.prototype.checkForLeaks=function(){var i,r;try{for(var o=(0,b.XA)(this.liveObjects.values()),u=o.next();!u.done;u=o.next()){var c=u.value;console.warn("Object leaked:",c,"Creation stack:",this.creationStacks.get(c))}}catch(p){i={error:p}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},e.prototype.setResourceLeakCheck=function(i,r){r?this.liveObjects.add(i):this.liveObjects.delete(i)},e}(),_U=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;y.type=ds.Sampler;var w=y.device.gl;if(fa(w)){var O=y.device.ensureResourceExists(w.createSampler());w.samplerParameteri(O,Cr.TEXTURE_WRAP_S,DE(c.addressModeU)),w.samplerParameteri(O,Cr.TEXTURE_WRAP_T,DE(c.addressModeV)),w.samplerParameteri(O,Cr.TEXTURE_WRAP_R,DE((p=c.addressModeW)!==null&&p!==void 0?p:c.addressModeU)),w.samplerParameteri(O,Cr.TEXTURE_MIN_FILTER,bR(c.minFilter,c.mipmapFilter)),w.samplerParameteri(O,Cr.TEXTURE_MAG_FILTER,bR(c.magFilter,Ac.NO_MIP)),c.lodMinClamp!==void 0&&w.samplerParameterf(O,Cr.TEXTURE_MIN_LOD,c.lodMinClamp),c.lodMaxClamp!==void 0&&w.samplerParameterf(O,Cr.TEXTURE_MAX_LOD,c.lodMaxClamp),c.compareFunction!==void 0&&(w.samplerParameteri(O,w.TEXTURE_COMPARE_MODE,w.COMPARE_REF_TO_TEXTURE),w.samplerParameteri(O,w.TEXTURE_COMPARE_FUNC,c.compareFunction));var D=(g=c.maxAnisotropy)!==null&&g!==void 0?g:1;D>1&&y.device.EXT_texture_filter_anisotropic!==null&&(bo(c.minFilter===wl.BILINEAR&&c.magFilter===wl.BILINEAR&&c.mipmapFilter===Ac.LINEAR),w.samplerParameterf(O,y.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,D)),y.gl_sampler=O}else y.descriptor=c;return y}return i.prototype.setTextureParameters=function(r,o,u){var c,p=this.device.gl,g=this.descriptor;this.isNPOT(o,u)?p.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_MIN_FILTER,Cr.LINEAR):p.texParameteri(r,Cr.TEXTURE_MIN_FILTER,bR(g.minFilter,g.mipmapFilter)),p.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_WRAP_S,DE(g.addressModeU)),p.texParameteri(Cr.TEXTURE_2D,Cr.TEXTURE_WRAP_T,DE(g.addressModeV)),p.texParameteri(r,Cr.TEXTURE_MAG_FILTER,bR(g.magFilter,Ac.NO_MIP));var y=(c=g.maxAnisotropy)!==null&&c!==void 0?c:1;y>1&&this.device.EXT_texture_filter_anisotropic!==null&&(bo(g.minFilter===wl.BILINEAR&&g.magFilter===wl.BILINEAR&&g.mipmapFilter===Ac.LINEAR),p.texParameteri(r,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,y))},i.prototype.destroy=function(){e.prototype.destroy.call(this),fa(this.device.gl)&&this.device.gl.deleteSampler(B5(this))},i.prototype.isNPOT=function(r,o){return!gR(r)||!gR(o)},i}(mv),xU=function(){function e(){}return e.prototype.dispatchWorkgroups=function(i,r,o){},e.prototype.dispatchWorkgroupsIndirect=function(i,r){},e.prototype.setPipeline=function(i){},e.prototype.setBindings=function(i){},e.prototype.pushDebugGroup=function(i){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(i){},e}(),tN=65536,bU=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,SU=function(){function e(i,r){this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=lx(Qy),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=ix.LOWER_LEFT,this.clipSpaceNearZ=ax.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=i,this.contextAttributes=qy(i.getContextAttributes()),fa(i)?(this.EXT_texture_norm16=i.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=i.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=i.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=i.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=i.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=i.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=i.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=i.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=i.getExtension("EXT_color_buffer_half_float"),i.getExtension("EXT_frag_depth"),i.getExtension("OES_element_index_uint"),i.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=i.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=i.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=i.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=i.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=i.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=i.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=i.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=i.getExtension("KHR_parallel_shader_compile"),fa(i)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new z5({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:Ro.TEXTURE_2D,mipLevelCount:1,usage:Mf.RENDER_TARGET,format:this.contextAttributes.alpha===!1?qr.U8_RGB_RT:qr.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=hl.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(i.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(i.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(i.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(i.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(i.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(i.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(Ro.TEXTURE_2D,hl.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(Ro.TEXTURE_2D,hl.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:uu.VERTEX,hint:gv.STATIC}),fa(i)&&(this.fallbackTexture2DArray=this.createFallbackTexture(Ro.TEXTURE_2D_ARRAY,hl.Float),this.fallbackTexture3D=this.createFallbackTexture(Ro.TEXTURE_3D,hl.Float),this.fallbackTextureCube=this.createFallbackTexture(Ro.TEXTURE_CUBE_MAP,hl.Float)),this.currentMegaState.depthCompare=wo.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=Yc.ALL,i.enable(i.DEPTH_TEST),i.enable(i.STENCIL_TEST),this.checkLimits(),r.shaderDebug&&(this.shaderDebug=!0),r.trackResources&&(this.resourceCreationTracker=new yU)}return e.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},e.prototype.createFallbackTexture=function(i,r){var o=i===Ro.TEXTURE_CUBE_MAP?6:1,u=r===hl.Depth?qr.D32F:qr.U8_RGBA_NORM,c=this.createTexture({dimension:i,format:u,usage:Mf.SAMPLED,width:1,height:1,depthOrArrayLayers:o,mipLevelCount:1});return r===hl.Float&&c.setImageData([new Uint8Array(4*o)]),px(c)},e.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},e.prototype.checkLimits=function(){var i=this.gl;if(this.maxVertexAttribs=i.getParameter(Cr.MAX_VERTEX_ATTRIBS),fa(i)){this.uniformBufferMaxPageByteSize=Math.min(i.getParameter(Cr.MAX_UNIFORM_BLOCK_SIZE),tN),this.uniformBufferWordAlignment=i.getParameter(i.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var r=i.getInternalformatParameter(i.RENDERBUFFER,i.DEPTH32F_STENCIL8,i.SAMPLES);this.supportedSampleCounts=r?(0,b.ev)([],(0,b.CR)(r),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=tN;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(o,u){return o-u})},e.prototype.configureSwapChain=function(i,r,o){var u=this.scTexture;u.width=i,u.height=r,this.scPlatformFramebuffer=Cz(o)},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.gl.canvas},e.prototype.getOnscreenTexture=function(){return this.scTexture},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.translateTextureInternalFormat=function(i,r){switch(r===void 0&&(r=!1),i){case qr.ALPHA:return Cr.ALPHA;case qr.U8_LUMINANCE:case qr.F16_LUMINANCE:case qr.F32_LUMINANCE:return Cr.LUMINANCE;case qr.F16_R:return Cr.R16F;case qr.F16_RG:return Cr.RG16F;case qr.F16_RGB:return Cr.RGB16F;case qr.F16_RGBA:return Cr.RGBA16F;case qr.F32_R:return Cr.R32F;case qr.F32_RG:return Cr.RG32F;case qr.F32_RGB:return Cr.RGB32F;case qr.F32_RGBA:return fa(this.gl)?Cr.RGBA32F:r?this.WEBGL_color_buffer_float.RGBA32F_EXT:Cr.RGBA;case qr.U8_R_NORM:return Cr.R8;case qr.U8_RG_NORM:return Cr.RG8;case qr.U8_RGB_NORM:case qr.U8_RGB_RT:return Cr.RGB8;case qr.U8_RGB_SRGB:return Cr.SRGB8;case qr.U8_RGBA_NORM:case qr.U8_RGBA_RT:return fa(this.gl)?Cr.RGBA8:r?Cr.RGBA4:Cr.RGBA;case qr.U8_RGBA:return Cr.RGBA;case qr.U8_RGBA_SRGB:case qr.U8_RGBA_RT_SRGB:return Cr.SRGB8_ALPHA8;case qr.U16_R:return Cr.R16UI;case qr.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case qr.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case qr.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case qr.U16_RGBA_5551:return Cr.RGB5_A1;case qr.U16_RGB_565:return Cr.RGB565;case qr.U32_R:return Cr.R32UI;case qr.S8_RGBA_NORM:return Cr.RGBA8_SNORM;case qr.S8_RG_NORM:return Cr.RG8_SNORM;case qr.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case qr.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case qr.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case qr.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case qr.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case qr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case qr.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case qr.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case qr.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case qr.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case qr.D32F_S8:return fa(this.gl)?Cr.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?Cr.DEPTH_STENCIL:Cr.DEPTH_COMPONENT16;case qr.D24_S8:return fa(this.gl)?Cr.DEPTH24_STENCIL8:this.WEBGL_depth_texture?Cr.DEPTH_STENCIL:Cr.DEPTH_COMPONENT16;case qr.D32F:return fa(this.gl)?Cr.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?Cr.DEPTH_COMPONENT:Cr.DEPTH_COMPONENT16;case qr.D24:return fa(this.gl)?Cr.DEPTH_COMPONENT24:this.WEBGL_depth_texture?Cr.DEPTH_COMPONENT:Cr.DEPTH_COMPONENT16;default:throw new Error("whoops")}},e.prototype.translateTextureType=function(i){var r=rg(i);switch(r){case Qn.U8:return Cr.UNSIGNED_BYTE;case Qn.U16:return Cr.UNSIGNED_SHORT;case Qn.U32:return Cr.UNSIGNED_INT;case Qn.S8:return Cr.BYTE;case Qn.F16:return Cr.HALF_FLOAT;case Qn.F32:return Cr.FLOAT;case Qn.U16_PACKED_5551:return Cr.UNSIGNED_SHORT_5_5_5_1;case Qn.D32F:return fa(this.gl)?Cr.FLOAT:this.WEBGL_depth_texture?Cr.UNSIGNED_INT:Cr.UNSIGNED_BYTE;case Qn.D24:return fa(this.gl)?Cr.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Cr.UNSIGNED_SHORT:Cr.UNSIGNED_BYTE;case Qn.D24S8:return fa(this.gl)?Cr.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Cr.UNSIGNED_INT_24_8_WEBGL:Cr.UNSIGNED_BYTE;case Qn.D32FS8:return Cr.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},e.prototype.translateInternalTextureFormat=function(i){switch(i){case qr.F32_R:return Cr.R32F;case qr.F32_RG:return Cr.RG32F;case qr.F32_RGB:return Cr.RGB32F;case qr.F32_RGBA:return Cr.RGBA32F;case qr.F16_R:return Cr.R16F;case qr.F16_RG:return Cr.RG16F;case qr.F16_RGB:return Cr.RGB16F;case qr.F16_RGBA:return Cr.RGBA16F}return this.translateTextureFormat(i)},e.prototype.translateTextureFormat=function(i){if(q6(i)||i===qr.F32_LUMINANCE||i===qr.U8_LUMINANCE)return this.translateTextureInternalFormat(i);var r=fa(this.gl)||!fa(this.gl)&&!!this.WEBGL_depth_texture;switch(i){case qr.D24_S8:case qr.D32F_S8:return r?Cr.DEPTH_STENCIL:Cr.RGBA;case qr.D24:case qr.D32F:return r?Cr.DEPTH_COMPONENT:Cr.RGBA}var o=Q6(i),u=vR(i);switch(u){case va.A:return Cr.ALPHA;case va.R:return o?Cr.RED_INTEGER:Cr.RED;case va.RG:return o?Cr.RG_INTEGER:Cr.RG;case va.RGB:return o?Cr.RGB_INTEGER:Cr.RGB;case va.RGBA:return Cr.RGBA}},e.prototype.setActiveTexture=function(i){this.currentActiveTexture!==i&&(this.gl.activeTexture(i),this.currentActiveTexture=i)},e.prototype.bindVAO=function(i){this.currentBoundVAO!==i&&(fa(this.gl)?this.gl.bindVertexArray(i):this.OES_vertex_array_object.bindVertexArrayOES(i),this.currentBoundVAO=i)},e.prototype.programCompiled=function(i){bo(i.compileState!==sp.NeedsCompile),i.compileState===sp.Compiling&&(i.compileState=sp.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(i))},e.prototype.useProgram=function(i){this.currentProgram!==i&&(this.programCompiled(i),this.gl.useProgram(i.gl_program),this.currentProgram=i)},e.prototype.ensureResourceExists=function(i){if(i===null){var r=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(r))}else return i},e.prototype.createBuffer=function(i){return new cU({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createTexture=function(i){return new z5({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createSampler=function(i){return new _U({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createRenderTarget=function(i){return new hU({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createRenderTargetFromTexture=function(i){var r=i,o=r.format,u=r.width,c=r.height,p=r.mipLevelCount;return bo(p===1),this.createRenderTarget({format:o,width:u,height:c,sampleCount:1,texture:i})},e.prototype.createProgram=function(i){var r,o,u,c=(r=i.vertex)===null||r===void 0?void 0:r.glsl;return!((o=i.vertex)===null||o===void 0)&&o.glsl&&(i.vertex.glsl=h0(this.queryVendorInfo(),"vert",i.vertex.glsl)),!((u=i.fragment)===null||u===void 0)&&u.glsl&&(i.fragment.glsl=h0(this.queryVendorInfo(),"frag",i.fragment.glsl)),this.createProgramSimple(i,c)},e.prototype.createProgramSimple=function(i,r){var o=new pU({id:this.getNextUniqueId(),device:this,descriptor:i},r);return o},e.prototype.createBindings=function(i){return new tU({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createInputLayout=function(i){return new fU({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createRenderPipeline=function(i){return new gU({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createComputePass=function(){return new xU},e.prototype.createComputePipeline=function(i){return new mU({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createReadback=function(){return new vU({id:this.getNextUniqueId(),device:this})},e.prototype.createQueryPool=function(i,r){return new dU({id:this.getNextUniqueId(),device:this,descriptor:{type:i,elemCount:r}})},e.prototype.formatRenderPassDescriptor=function(i){var r,o,u,c,p,g,y=i.colorAttachment;i.depthClearValue=(r=i.depthClearValue)!==null&&r!==void 0?r:"load",i.stencilClearValue=(o=i.stencilClearValue)!==null&&o!==void 0?o:"load";for(var w=0;w<y.length;w++)i.colorAttachmentLevel||(i.colorAttachmentLevel=[]),i.colorAttachmentLevel[w]=(u=i.colorAttachmentLevel[w])!==null&&u!==void 0?u:0,i.colorResolveToLevel||(i.colorResolveToLevel=[]),i.colorResolveToLevel[w]=(c=i.colorResolveToLevel[w])!==null&&c!==void 0?c:0,i.colorClearColor||(i.colorClearColor=[]),i.colorClearColor[w]=(p=i.colorClearColor[w])!==null&&p!==void 0?p:"load",i.colorStore||(i.colorStore=[]),i.colorStore[w]=(g=i.colorStore[w])!==null&&g!==void 0?g:!1},e.prototype.createRenderPass=function(i){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=i,this.formatRenderPassDescriptor(i);var r=i.colorAttachment,o=i.colorAttachmentLevel,u=i.colorClearColor,c=i.colorResolveTo,p=i.colorResolveToLevel,g=i.depthStencilAttachment,y=i.depthClearValue,w=i.stencilClearValue,O=i.depthStencilResolveTo;this.setRenderPassParametersBegin(r.length);for(var D=0;D<r.length;D++)this.setRenderPassParametersColor(D,r[D],o[D],c[D],p[D]);this.setRenderPassParametersDepthStencil(g,O),this.validateCurrentAttachments();for(var D=0;D<r.length;D++){var V=u[D];V!=="load"&&this.setRenderPassParametersClearColor(D,V.r,V.g,V.b,V.a)}return this.setRenderPassParametersClearDepthStencil(y,w),this},e.prototype.submitPass=function(i){bo(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},e.prototype.copySubTexture2D=function(i,r,o,u,c,p){var g=this.gl,y=i,w=u;if(bo(w.mipLevelCount===1),bo(y.mipLevelCount===1),fa(g))y===this.scTexture?g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0,y,0)),g.bindFramebuffer(g.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(g.READ_FRAMEBUFFER,g.COLOR_ATTACHMENT0,w,0),g.blitFramebuffer(c,p,c+w.width,p+w.height,r,o,r+w.width,o+w.height,g.COLOR_BUFFER_BIT,g.LINEAR),g.bindFramebuffer(g.READ_FRAMEBUFFER,null),g.bindFramebuffer(g.DRAW_FRAMEBUFFER,null);else if(y===this.scTexture){var O=this.createRenderTargetFromTexture(u);this.submitBlitRenderPass(O,y)}},e.prototype.queryLimits=function(){return this},e.prototype.queryTextureFormatSupported=function(i,r,o){switch(i){case qr.BC1_SRGB:case qr.BC2_SRGB:case qr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?N5(r,o,4,4):!1;case qr.BC1:case qr.BC2:case qr.BC3:return this.WEBGL_compressed_texture_s3tc!==null?N5(r,o,4,4):!1;case qr.BC4_UNORM:case qr.BC4_SNORM:case qr.BC5_UNORM:case qr.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?N5(r,o,4,4):!1;case qr.U16_R_NORM:case qr.U16_RG_NORM:case qr.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case qr.F32_R:case qr.F32_RG:case qr.F32_RGB:case qr.F32_RGBA:return this.OES_texture_float_linear!==null;case qr.F16_R:case qr.F16_RG:case qr.F16_RGB:case qr.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},e.prototype.queryProgramReady=function(i){var r=this.gl;if(i.compileState===sp.NeedsCompile)throw new Error("whoops");if(i.compileState===sp.Compiling){var o=void 0;return this.KHR_parallel_shader_compile!==null?o=r.getProgramParameter(i.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):o=!0,o&&this.programCompiled(i),o}return i.compileState===sp.NeedsBind||i.compileState===sp.ReadyToUse},e.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(i){return this.currentRenderPassDescriptor},e.prototype.queryRenderTarget=function(i){var r=i;return r},e.prototype.setResourceName=function(i,r){if(i.name=r,i.type===ds.Buffer)for(var o=i.gl_buffer_pages,u=0;u<o.length;u++)FE(o[u],"".concat(r," Page ").concat(u));else if(i.type===ds.Texture)FE(px(i),r);else if(i.type===ds.Sampler)FE(B5(i),r);else if(i.type===ds.RenderTarget){var c=i.gl_renderbuffer;c!==null&&FE(c,r)}else i.type===ds.InputLayout&&FE(i.vao,r)},e.prototype.setResourceLeakCheck=function(i,r){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(i,r)},e.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},e.prototype.pushDebugGroup=function(i){},e.prototype.popDebugGroup=function(){},e.prototype.insertDebugMarker=function(i){},e.prototype.programPatched=function(i,r){bo(this.shaderDebug)},e.prototype.getBufferData=function(i,r,o){o===void 0&&(o=0);var u=this.gl;fa(u)&&(u.bindBuffer(u.COPY_READ_BUFFER,hx(i,o*4)),u.getBufferSubData(u.COPY_READ_BUFFER,o*4,r))},e.prototype.debugGroupStatisticsDrawCall=function(i){i===void 0&&(i=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].drawCallCount+=i},e.prototype.debugGroupStatisticsBufferUpload=function(i){i===void 0&&(i=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].bufferUploadCount+=i},e.prototype.debugGroupStatisticsTextureBind=function(i){i===void 0&&(i=1);for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].textureBindCount+=i},e.prototype.debugGroupStatisticsTriangles=function(i){for(var r=this.debugGroupStack.length-1;r>=0;r--)this.debugGroupStack[r].triangleCount+=i},e.prototype.reportShaderError=function(i,r){var o=this.gl,u=o.getShaderParameter(i,o.COMPILE_STATUS);if(!u){console.error(Mz(r));var c=o.getExtension("WEBGL_debug_shaders");c&&console.error(c.getTranslatedShaderSource(i)),console.error(o.getShaderInfoLog(i))}return u},e.prototype.checkProgramCompilationForErrors=function(i){var r=this.gl,o=i.gl_program;if(!r.getProgramParameter(o,r.LINK_STATUS)){var u=i.descriptor;if(!this.reportShaderError(i.gl_shader_vert,u.vertex.glsl)||!this.reportShaderError(i.gl_shader_frag,u.fragment.glsl))return;console.error(r.getProgramInfoLog(i.gl_program))}},e.prototype.bindFramebufferAttachment=function(i,r,o,u){var c=this.gl;if(c0(o))c.framebufferRenderbuffer(i,r,c.RENDERBUFFER,null);else if(o.type===ds.RenderTarget)o.gl_renderbuffer!==null?c.framebufferRenderbuffer(i,r,c.RENDERBUFFER,o.gl_renderbuffer):o.texture!==null&&c.framebufferTexture2D(i,r,Cr.TEXTURE_2D,px(o.texture),u);else if(o.type===ds.Texture){var p=px(o);o.dimension===Ro.TEXTURE_2D?c.framebufferTexture2D(i,r,Cr.TEXTURE_2D,p,u):fa(c)&&(o.dimension,Ro.TEXTURE_2D_ARRAY)}},e.prototype.bindFramebufferDepthStencilAttachment=function(i,r){var o=this.gl,u=c0(r)?Gi.Depth|Gi.Stencil:ox(r.format),c=!!(u&Gi.Depth),p=!!(u&Gi.Stencil);if(c&&p){var g=fa(this.gl)||!fa(this.gl)&&!!this.WEBGL_depth_texture;g?this.bindFramebufferAttachment(i,o.DEPTH_STENCIL_ATTACHMENT,r,0):this.bindFramebufferAttachment(i,o.DEPTH_ATTACHMENT,r,0)}else c?(this.bindFramebufferAttachment(i,o.DEPTH_ATTACHMENT,r,0),this.bindFramebufferAttachment(i,o.STENCIL_ATTACHMENT,null,0)):p&&(this.bindFramebufferAttachment(i,o.STENCIL_ATTACHMENT,r,0),this.bindFramebufferAttachment(i,o.DEPTH_ATTACHMENT,null,0))},e.prototype.validateCurrentAttachments=function(){for(var i=-1,r=-1,o=-1,u=0;u<this.currentColorAttachments.length;u++){var c=this.currentColorAttachments[u];c!==null&&(i===-1?(i=c.sampleCount,r=c.width,o=c.height):(bo(i===c.sampleCount),bo(r===c.width),bo(o===c.height)))}this.currentDepthStencilAttachment&&(i===-1?i=this.currentDepthStencilAttachment.sampleCount:(bo(i===this.currentDepthStencilAttachment.sampleCount),bo(r===this.currentDepthStencilAttachment.width),bo(o===this.currentDepthStencilAttachment.height))),this.currentSampleCount=i},e.prototype.setRenderPassParametersBegin=function(i){var r=this.gl;if(fa(r)?r.bindFramebuffer(Cr.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||r.bindFramebuffer(Cr.FRAMEBUFFER,this.renderPassDrawFramebuffer),fa(r)?r.drawBuffers([Cr.COLOR_ATTACHMENT0,Cr.COLOR_ATTACHMENT1,Cr.COLOR_ATTACHMENT2,Cr.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([Cr.COLOR_ATTACHMENT0_WEBGL,Cr.COLOR_ATTACHMENT1_WEBGL,Cr.COLOR_ATTACHMENT2_WEBGL,Cr.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var o=i;o<this.currentColorAttachments.length;o++){var u=fa(r)?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,c=fa(r)?Cr.COLOR_ATTACHMENT0:Cr.COLOR_ATTACHMENT0_WEBGL;r.framebufferRenderbuffer(u,c+o,Cr.RENDERBUFFER,null),r.framebufferTexture2D(u,c+o,Cr.TEXTURE_2D,null,0)}this.currentColorAttachments.length=i},e.prototype.setRenderPassParametersColor=function(i,r,o,u,c){var p=this.gl,g=fa(p);(this.currentColorAttachments[i]!==r||this.currentColorAttachmentLevels[i]!==o)&&(this.currentColorAttachments[i]=r,this.currentColorAttachmentLevels[i]=o,(g||!g&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(g?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,(g?Cr.COLOR_ATTACHMENT0:Cr.COLOR_ATTACHMENT0_WEBGL)+i,r,o),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[i]!==u||this.currentColorResolveToLevels[i]!==c)&&(this.currentColorResolveTos[i]=u,this.currentColorResolveToLevels[i]=c,u!==null&&(this.resolveColorAttachmentsChanged=!0))},e.prototype.setRenderPassParametersDepthStencil=function(i,r){var o=this.gl;this.currentDepthStencilAttachment!==i&&(this.currentDepthStencilAttachment=i,this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(fa(o)?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==r&&(this.currentDepthStencilResolveTo=r,r&&(this.resolveDepthStencilAttachmentsChanged=!0))},e.prototype.setRenderPassParametersClearColor=function(i,r,o,u,c){var p=this.gl;if(this.OES_draw_buffers_indexed!==null){var g=this.currentMegaState.attachmentsState[i];g&&g.channelWriteMask!==Yc.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(i,!0,!0,!0,!0),g.channelWriteMask=Yc.ALL)}else{var g=this.currentMegaState.attachmentsState[0];g&&g.channelWriteMask!==Yc.ALL&&(p.colorMask(!0,!0,!0,!0),g.channelWriteMask=Yc.ALL)}this.setScissorRectEnabled(!1),fa(p)?p.clearBufferfv(p.COLOR,i,[r,o,u,c]):(p.clearColor(r,o,u,c),p.clear(p.COLOR_BUFFER_BIT))},e.prototype.setRenderPassParametersClearDepthStencil=function(i,r){i===void 0&&(i="load"),r===void 0&&(r="load");var o=this.gl;i!=="load"&&(bo(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(o.depthMask(!0),this.currentMegaState.depthWrite=!0),fa(o)?o.clearBufferfv(o.DEPTH,0,[i]):(o.clearDepth(i),o.clear(o.DEPTH_BUFFER_BIT))),r!=="load"&&(bo(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(o.enable(o.STENCIL_TEST),o.stencilMask(255),this.currentMegaState.stencilWrite=!0),fa(o)?o.clearBufferiv(o.STENCIL,0,[r]):(o.clearStencil(r),o.clear(o.STENCIL_BUFFER_BIT)))},e.prototype.setBindings=function(i){var r,o=this.gl,u=i,c=u.uniformBufferBindings,p=u.samplerBindings,g=u.bindingLayouts;bo(0<g.bindingLayoutTables.length);var y=g.bindingLayoutTables[0];bo(c.length>=y.numUniformBuffers),bo(p.length>=y.numSamplers);for(var w=0;w<c.length;w++){var O=c[w];if(O.size!==0){var D=y.firstUniformBuffer+w,V=O.buffer,X=O.offset||0,ce=O.size||V.byteSize;if(V!==this.currentUniformBuffers[D]||X!==this.currentUniformBufferByteOffsets[D]||ce!==this.currentUniformBufferByteSizes[D]){var de=X%V.pageByteSize,we=V.gl_buffer_pages[X/V.pageByteSize|0];bo(de+ce<=V.pageByteSize),fa(o)&&o.bindBufferRange(o.UNIFORM_BUFFER,D,we,de,ce),this.currentUniformBuffers[D]=V,this.currentUniformBufferByteOffsets[D]=X,this.currentUniformBufferByteSizes[D]=ce}}}for(var w=0;w<y.numSamplers;w++){var O=p[w],je=y.firstSampler+w,ht=O!==null&&O.sampler!==null?B5(O.sampler):null,_t=O!==null&&O.texture!==null?px(O.texture):null;if(this.currentSamplers[je]!==ht&&(fa(o)&&o.bindSampler(je,ht),this.currentSamplers[je]=ht),this.currentTextures[je]!==_t){if(this.setActiveTexture(o.TEXTURE0+je),_t!==null){var Dt=qy(O).texture,Yt=Dt.gl_target,ir=Dt.width,sr=Dt.height;O.texture.textureIndex=je,o.bindTexture(Yt,_t),fa(o)||(r=O.sampler)===null||r===void 0||r.setTextureParameters(Yt,ir,sr),this.debugGroupStatisticsTextureBind()}else{var Tr=(0,b.pi)((0,b.pi)({},O),j6),Vr=Tr.dimension,sn=Tr.formatKind,Yt=lU(Vr);o.bindTexture(Yt,this.getFallbackTexture((0,b.pi)({gl_target:Yt,formatKind:sn},Tr)))}this.currentTextures[je]=_t}}},e.prototype.setViewport=function(i,r,o,u){var c=this.gl;c.viewport(i,r,o,u)},e.prototype.setScissorRect=function(i,r,o,u){var c=this.gl;this.setScissorRectEnabled(!0),c.scissor(i,r,o,u)},e.prototype.applyAttachmentStateIndexed=function(i,r,o){var u=this.gl,c=this.OES_draw_buffers_indexed;r.channelWriteMask!==o.channelWriteMask&&(c.colorMaskiOES(i,!!(o.channelWriteMask&Yc.RED),!!(o.channelWriteMask&Yc.GREEN),!!(o.channelWriteMask&Yc.BLUE),!!(o.channelWriteMask&Yc.ALPHA)),r.channelWriteMask=o.channelWriteMask);var p=r.rgbBlendState.blendMode!==o.rgbBlendState.blendMode||r.alphaBlendState.blendMode!==o.alphaBlendState.blendMode,g=r.rgbBlendState.blendSrcFactor!==o.rgbBlendState.blendSrcFactor||r.alphaBlendState.blendSrcFactor!==o.alphaBlendState.blendSrcFactor||r.rgbBlendState.blendDstFactor!==o.rgbBlendState.blendDstFactor||r.alphaBlendState.blendDstFactor!==o.alphaBlendState.blendDstFactor;(g||p)&&(p0(r.rgbBlendState)&&p0(r.alphaBlendState)?c.enableiOES(i,u.BLEND):p0(o.rgbBlendState)&&p0(o.alphaBlendState)&&c.disableiOES(i,u.BLEND)),p&&(c.blendEquationSeparateiOES(i,o.rgbBlendState.blendMode,o.alphaBlendState.blendMode),r.rgbBlendState.blendMode=o.rgbBlendState.blendMode,r.alphaBlendState.blendMode=o.alphaBlendState.blendMode),g&&(c.blendFuncSeparateiOES(i,o.rgbBlendState.blendSrcFactor,o.rgbBlendState.blendDstFactor,o.alphaBlendState.blendSrcFactor,o.alphaBlendState.blendDstFactor),r.rgbBlendState.blendSrcFactor=o.rgbBlendState.blendSrcFactor,r.alphaBlendState.blendSrcFactor=o.alphaBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor=o.rgbBlendState.blendDstFactor,r.alphaBlendState.blendDstFactor=o.alphaBlendState.blendDstFactor)},e.prototype.applyAttachmentState=function(i,r){var o=this.gl;i.channelWriteMask!==r.channelWriteMask&&(o.colorMask(!!(r.channelWriteMask&Yc.RED),!!(r.channelWriteMask&Yc.GREEN),!!(r.channelWriteMask&Yc.BLUE),!!(r.channelWriteMask&Yc.ALPHA)),i.channelWriteMask=r.channelWriteMask);var u=i.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||i.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,c=i.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||i.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||i.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||i.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(c||u)&&(p0(i.rgbBlendState)&&p0(i.alphaBlendState)?o.enable(o.BLEND):p0(r.rgbBlendState)&&p0(r.alphaBlendState)&&o.disable(o.BLEND)),u&&(o.blendEquationSeparate(r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),i.rgbBlendState.blendMode=r.rgbBlendState.blendMode,i.alphaBlendState.blendMode=r.alphaBlendState.blendMode),c&&(o.blendFuncSeparate(r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),i.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,i.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,i.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,i.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},e.prototype.setMegaState=function(i){var r=this.gl,o=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var u=0;u<i.attachmentsState.length;u++)this.applyAttachmentStateIndexed(u,o.attachmentsState[0],i.attachmentsState[0]);else bo(i.attachmentsState.length===1),this.applyAttachmentState(o.attachmentsState[0],i.attachmentsState[0]);if(N6(o.blendConstant,i.blendConstant)||(r.blendColor(i.blendConstant.r,i.blendConstant.g,i.blendConstant.b,i.blendConstant.a),z6(o.blendConstant,i.blendConstant)),o.depthCompare!==i.depthCompare&&(r.depthFunc(i.depthCompare),o.depthCompare=i.depthCompare),!!o.depthWrite!=!!i.depthWrite&&(r.depthMask(i.depthWrite),o.depthWrite=i.depthWrite),!!o.stencilWrite!=!!i.stencilWrite&&(r.stencilMask(i.stencilWrite?255:0),o.stencilWrite=i.stencilWrite),!_R(o.stencilFront,i.stencilFront)){var c=i.stencilFront,p=c.passOp,g=c.failOp,y=c.depthFailOp,w=c.compare;(o.stencilFront.passOp!==p||o.stencilFront.failOp!==g||o.stencilFront.depthFailOp!==y)&&(r.stencilOpSeparate(r.FRONT,g,y,p),o.stencilFront.passOp=p,o.stencilFront.failOp=g,o.stencilFront.depthFailOp=y),o.stencilFront.compare!==w&&(this.setStencilReference(0),o.stencilFront.compare=w)}if(!_R(o.stencilBack,i.stencilBack)){var O=i.stencilBack,p=O.passOp,g=O.failOp,y=O.depthFailOp,w=O.compare;(o.stencilBack.passOp!==p||o.stencilBack.failOp!==g||o.stencilBack.depthFailOp!==y)&&(r.stencilOpSeparate(r.BACK,g,y,p),o.stencilBack.passOp=p,o.stencilBack.failOp=g,o.stencilBack.depthFailOp=y),o.stencilBack.compare!==w&&(this.setStencilReference(0),o.stencilBack.compare=w)}o.cullMode!==i.cullMode&&(o.cullMode===op.NONE?r.enable(r.CULL_FACE):i.cullMode===op.NONE&&r.disable(r.CULL_FACE),i.cullMode===op.BACK?r.cullFace(r.BACK):i.cullMode===op.FRONT?r.cullFace(r.FRONT):i.cullMode===op.FRONT_AND_BACK&&r.cullFace(r.FRONT_AND_BACK),o.cullMode=i.cullMode),o.frontFace!==i.frontFace&&(r.frontFace(i.frontFace),o.frontFace=i.frontFace),o.polygonOffset!==i.polygonOffset&&(i.polygonOffset?(r.polygonOffset(1,1),r.enable(r.POLYGON_OFFSET_FILL)):r.disable(r.POLYGON_OFFSET_FILL),o.polygonOffset=i.polygonOffset)},e.prototype.validatePipelineFormats=function(i){for(var r=0;r<this.currentColorAttachments.length;r++)var o=this.currentColorAttachments[r];this.currentDepthStencilAttachment&&bo(this.currentDepthStencilAttachment.format===i.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&bo(this.currentSampleCount===i.sampleCount)},e.prototype.setPipeline=function(i){this.currentPipeline=i,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var r=this.currentPipeline.program;if(this.useProgram(r),r.compileState===sp.NeedsBind){var o=this.gl,u=r.gl_program,c=r.descriptor,p=eN(c.vertex.glsl,bU);if(fa(o))for(var g=0;g<p.length;g++){var y=(0,b.CR)(p[g],2),w=y[1],O=o.getUniformBlockIndex(u,w);O!==-1&&O!==4294967295&&o.uniformBlockBinding(u,O,g)}for(var D=eN(c.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),g=0;g<D.length;g++){var V=(0,b.CR)(D[g],3),X=V[1],ce=V[2],de=o.getUniformLocation(u,X);o.uniform1i(de,parseInt(ce))}r.compileState=sp.ReadyToUse}},e.prototype.setVertexInput=function(i,r,o){var u,c,p;if(i!==null){bo(this.currentPipeline.inputLayout===i);var g=i;this.bindVAO(g.vao);for(var y=this.gl,w=0;w<g.vertexBufferDescriptors.length;w++){var O=g.vertexBufferDescriptors[w],D=O.arrayStride,V=O.attributes;try{for(var X=(u=void 0,(0,b.XA)(V)),ce=X.next();!ce.done;ce=X.next()){var de=ce.value,we=de.shaderLocation,je=de.offset,ht=fa(y)?we:(p=g.program.attributes[we])===null||p===void 0?void 0:p.location;if(!c0(ht)){var _t=r[w];if(_t===null)continue;var Dt=de.vertexFormat;y.bindBuffer(y.ARRAY_BUFFER,hx(_t.buffer));var Yt=(_t.offset||0)+je;y.vertexAttribPointer(ht,Dt.size,Dt.type,Dt.normalized,D,Yt)}}}catch(sr){u={error:sr}}finally{try{ce&&!ce.done&&(c=X.return)&&c.call(X)}finally{if(u)throw u.error}}}if(bo(o!==null==(g.indexBufferFormat!==null)),o!==null){var ir=o.buffer;bo(ir.usage===uu.INDEX),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,hx(ir)),this.currentIndexBufferByteOffset=o.offset||0}else this.currentIndexBufferByteOffset=null}else bo(this.currentPipeline.inputLayout===null),bo(o===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},e.prototype.setStencilReference=function(i){this.currentStencilRef!==i&&(this.currentStencilRef=i,this.applyStencil())},e.prototype.draw=function(i,r,o,u){var c,p=this.gl,g=this.currentPipeline;if(r){var y=[g.drawMode,o||0,i,r];fa(p)?p.drawArraysInstanced.apply(p,(0,b.ev)([],(0,b.CR)(y),!1)):(c=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(c,(0,b.ev)([],(0,b.CR)(y),!1))}else p.drawArrays(g.drawMode,o,i);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(i/3*Math.max(r,1))},e.prototype.drawIndexed=function(i,r,o,u,c){var p,g=this.gl,y=this.currentPipeline,w=qy(y.inputLayout),O=qy(this.currentIndexBufferByteOffset)+o*w.indexBufferCompByteSize;if(r){var D=[y.drawMode,i,w.indexBufferType,O,r];fa(g)?g.drawElementsInstanced.apply(g,(0,b.ev)([],(0,b.CR)(D),!1)):(p=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(p,(0,b.ev)([],(0,b.CR)(D),!1))}else g.drawElements(y.drawMode,i,w.indexBufferType,O);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(i/3*Math.max(r,1))},e.prototype.drawIndirect=function(i,r){},e.prototype.drawIndexedIndirect=function(i,r){},e.prototype.beginOcclusionQuery=function(i){var r=this.gl;if(fa(r)){var o=this.currentRenderPassDescriptor.occlusionQueryPool;r.beginQuery(o.gl_query_type,o.gl_query[i])}},e.prototype.endOcclusionQuery=function(){var i=this.gl;if(fa(i)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;i.endQuery(r.gl_query_type)}},e.prototype.pipelineQueryReady=function(i){var r=i;return this.queryProgramReady(r.program)},e.prototype.pipelineForceReady=function(i){},e.prototype.endPass=function(){for(var i=this.gl,r=fa(i),o=!1,u=0;u<this.currentColorAttachments.length;u++){var c=this.currentColorAttachments[u];if(c!==null){var p=this.currentColorResolveTos[u],g=!1;p!==null&&(bo(c.width===p.width&&c.height===p.height),this.setScissorRectEnabled(!1),r&&i.bindFramebuffer(i.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&r&&this.bindFramebufferAttachment(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,c,this.currentColorAttachmentLevels[u]),g=!0,p===this.scTexture?i.bindFramebuffer(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,this.scPlatformFramebuffer):(i.bindFramebuffer(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&i.framebufferTexture2D(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,p.gl_texture,this.currentColorResolveToLevels[u])),r?(i.blitFramebuffer(0,0,c.width,c.height,0,0,p.width,p.height,i.COLOR_BUFFER_BIT,i.LINEAR),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(c,p),o=!0),this.currentRenderPassDescriptor.colorStore[u]||g||(i.bindFramebuffer(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,i.COLOR_ATTACHMENT0,c,this.currentColorAttachmentLevels[u])),i.bindFramebuffer(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var y=this.currentDepthStencilAttachment;if(y){var w=this.currentDepthStencilResolveTo,g=!1;w&&(bo(y.width===w.width&&y.height===w.height),this.setScissorRectEnabled(!1),i.bindFramebuffer(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),i.bindFramebuffer(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,y),this.bindFramebufferDepthStencilAttachment(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,w)),g=!0,r&&i.blitFramebuffer(0,0,y.width,y.height,0,0,w.width,w.height,i.DEPTH_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,null),o=!0),this.currentRenderPassDescriptor.depthStencilStore||(g||(i.bindFramebuffer(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,y),g=!0),r&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[i.DEPTH_STENCIL_ATTACHMENT])),g&&i.bindFramebuffer(r?Cr.READ_FRAMEBUFFER:Cr.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}o||i.bindFramebuffer(r?Cr.DRAW_FRAMEBUFFER:Cr.FRAMEBUFFER,null)},e.prototype.setScissorRectEnabled=function(i){if(this.currentScissorEnabled!==i){var r=this.gl;i?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST),this.currentScissorEnabled=i}},e.prototype.applyStencil=function(){c0(this.currentStencilRef)||(this.gl.stencilFuncSeparate(Cr.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,255),this.gl.stencilFuncSeparate(Cr.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,255))},e.prototype.getFallbackTexture=function(i){var r=i.gl_target,o=i.formatKind;if(r===Cr.TEXTURE_2D)return o===hl.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===Cr.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===Cr.TEXTURE_3D)return this.fallbackTexture3D;if(r===Cr.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.submitBlitRenderPass=function(i,r){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:uu.VERTEX|uu.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Ky.VERTEX,attributes:[{format:qr.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:ql.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[qr.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:lx(Qy)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:i.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:i}));var o=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var u=this.createRenderPass({colorAttachment:[i],colorResolveTo:[r],colorClearColor:[Ez]}),c=this.getCanvas(),p=c.width,g=c.height;u.setPipeline(this.blitRenderPipeline),u.setBindings(this.blitBindings),u.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),u.setViewport(0,0,p,g),this.gl.disable(this.gl.BLEND),u.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=o,this.inBlitRenderPass=!1},e}(),EU=function(){function e(i){this.pluginOptions=i}return e.prototype.createSwapChain=function(i){return(0,b.mG)(this,void 0,void 0,function(){var r,o,u,c,p,g,y,w,O,D,V;return(0,b.Jh)(this,function(X){return r=this.pluginOptions,o=r.targets,u=r.xrCompatible,c=r.antialias,p=c===void 0?!1:c,g=r.preserveDrawingBuffer,y=g===void 0?!1:g,w=r.premultipliedAlpha,O=w===void 0?!0:w,D={antialias:p,preserveDrawingBuffer:y,stencil:!0,premultipliedAlpha:O,xrCompatible:u},this.handleContextEvents(i),o.includes("webgl2")&&(V=i.getContext("webgl2",D)||i.getContext("experimental-webgl2",D)),!V&&o.includes("webgl1")&&(V=i.getContext("webgl",D)||i.getContext("experimental-webgl",D)),[2,new SU(V,{shaderDebug:!0,trackResources:!0})]})})},e.prototype.handleContextEvents=function(i){var r=this.pluginOptions,o=r.onContextLost,u=r.onContextRestored,c=r.onContextCreationError;c&&i.addEventListener("webglcontextcreationerror",c,!1),o&&i.addEventListener("webglcontextlost",o,!1),u&&i.addEventListener("webglcontextrestored",u,!1)},e}();let Ql;const rN=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&rN.decode();let BE=null;function SR(){return(BE===null||BE.byteLength===0)&&(BE=new Uint8Array(Ql.memory.buffer)),BE}function ER(e,i){return e=e>>>0,rN.decode(SR().subarray(e,e+i))}const am=new Array(128).fill(void 0);am.push(void 0,null,!0,!1);let NE=am.length;function wU(e){NE===am.length&&am.push(am.length+1);const i=NE;return NE=am[i],am[i]=e,i}function wR(e){return am[e]}function CU(e){e<132||(am[e]=NE,NE=e)}function AU(e){const i=wR(e);return CU(e),i}let zE=0;const CR=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},TU=typeof CR.encodeInto=="function"?function(e,i){return CR.encodeInto(e,i)}:function(e,i){const r=CR.encode(e);return i.set(r),{read:e.length,written:r.length}};function U5(e,i,r){if(r===void 0){const g=CR.encode(e),y=i(g.length,1)>>>0;return SR().subarray(y,y+g.length).set(g),zE=g.length,y}let o=e.length,u=i(o,1)>>>0;const c=SR();let p=0;for(;p<o;p++){const g=e.charCodeAt(p);if(g>127)break;c[u+p]=g}if(p!==o){p!==0&&(e=e.slice(p)),u=r(u,o,o=p+e.length*3,1)>>>0;const g=SR().subarray(u+p,u+o),y=TU(e,g);p+=y.written}return zE=p,u}let UE=null;function AR(){return(UE===null||UE.byteLength===0)&&(UE=new Int32Array(Ql.memory.buffer)),UE}function MU(e,i,r){let o,u;try{const g=Ql.__wbindgen_add_to_stack_pointer(-16),y=U5(e,Ql.__wbindgen_malloc,Ql.__wbindgen_realloc),w=zE,O=U5(i,Ql.__wbindgen_malloc,Ql.__wbindgen_realloc),D=zE;Ql.glsl_compile(g,y,w,O,D,r);var c=AR()[g/4+0],p=AR()[g/4+1];return o=c,u=p,ER(c,p)}finally{Ql.__wbindgen_add_to_stack_pointer(16),Ql.__wbindgen_free(o,u,1)}}class ZE{static __wrap(i){i=i>>>0;const r=Object.create(ZE.prototype);return r.__wbg_ptr=i,r}__destroy_into_raw(){const i=this.__wbg_ptr;return this.__wbg_ptr=0,i}free(){const i=this.__destroy_into_raw();Ql.__wbg_wgslcomposer_free(i)}constructor(){const i=Ql.wgslcomposer_new();return ZE.__wrap(i)}wgsl_compile(i){let r,o;try{const p=Ql.__wbindgen_add_to_stack_pointer(-16),g=U5(i,Ql.__wbindgen_malloc,Ql.__wbindgen_realloc),y=zE;Ql.wgslcomposer_wgsl_compile(p,this.__wbg_ptr,g,y);var u=AR()[p/4+0],c=AR()[p/4+1];return r=u,o=c,ER(u,c)}finally{Ql.__wbindgen_add_to_stack_pointer(16),Ql.__wbindgen_free(r,o,1)}}}function RU(e,i){return yB(this,null,function*(){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(e,i)}catch(o){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const r=yield e.arrayBuffer();return yield WebAssembly.instantiate(r,i)}else{const r=yield WebAssembly.instantiate(e,i);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}})}function IU(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(i,r){const o=ER(i,r);return wU(o)},e.wbg.__wbindgen_object_drop_ref=function(i){AU(i)},e.wbg.__wbg_log_1d3ae0273d8f4f8a=function(i){console.log(wR(i))},e.wbg.__wbg_log_576ca876af0d4a77=function(i,r){console.log(wR(i),wR(r))},e.wbg.__wbindgen_throw=function(i,r){throw new Error(ER(i,r))},e}function PU(e,i){return Ql=e.exports,nN.__wbindgen_wasm_module=i,UE=null,BE=null,Ql}function nN(e){return yB(this,null,function*(){if(Ql!==void 0)return Ql;const i=IU();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:o}=yield RU(yield e,i);return PU(r,o)})}var Tc;(function(e){e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.TEXTURE_BINDING=4]="TEXTURE_BINDING",e[e.STORAGE_BINDING=8]="STORAGE_BINDING",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Tc||(Tc={}));var Z5;(function(e){e[e.READ=1]="READ",e[e.WRITE=2]="WRITE"})(Z5||(Z5={}));function OU(e){var i=0;return e&Mf.SAMPLED&&(i|=Tc.TEXTURE_BINDING|Tc.COPY_DST|Tc.COPY_SRC),e&Mf.STORAGE&&(i|=Tc.TEXTURE_BINDING|Tc.STORAGE_BINDING|Tc.COPY_SRC|Tc.COPY_DST),e&Mf.RENDER_TARGET&&(i|=Tc.RENDER_ATTACHMENT|Tc.TEXTURE_BINDING|Tc.COPY_SRC|Tc.COPY_DST),i}function V5(e){if(e===qr.U8_R_NORM)return"r8unorm";if(e===qr.U8_RG_NORM)return"rg8unorm";if(e===qr.U8_RGBA_RT)return"bgra8unorm";if(e===qr.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(e===qr.U8_RGBA_NORM)return"rgba8unorm";if(e===qr.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(e===qr.S8_R_NORM)return"r8snorm";if(e===qr.S8_RG_NORM)return"rg8snorm";if(e===qr.S8_RGBA_NORM)return"rgba8snorm";if(e===qr.U32_R)return"r32uint";if(e===qr.F16_RGBA)return"rgba16float";if(e===qr.F32_RGBA)return"rgba32float";if(e===qr.D24)return"depth24plus";if(e===qr.D24_S8)return"depth24plus-stencil8";if(e===qr.D32F)return"depth32float";if(e===qr.D32F_S8)return"depth32float-stencil8";if(e===qr.BC1)return"bc1-rgba-unorm";if(e===qr.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(e===qr.BC2)return"bc2-rgba-unorm";if(e===qr.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(e===qr.BC3)return"bc3-rgba-unorm";if(e===qr.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(e===qr.BC4_SNORM)return"bc4-r-snorm";if(e===qr.BC4_UNORM)return"bc4-r-unorm";if(e===qr.BC5_SNORM)return"bc5-rg-snorm";if(e===qr.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function kU(e){if(e===Ro.TEXTURE_2D)return"2d";if(e===Ro.TEXTURE_CUBE_MAP)return"2d";if(e===Ro.TEXTURE_2D_ARRAY)return"2d";if(e===Ro.TEXTURE_3D)return"3d";throw new Error("whoops")}function LU(e){if(e===Ro.TEXTURE_2D)return"2d";if(e===Ro.TEXTURE_CUBE_MAP)return"cube";if(e===Ro.TEXTURE_2D_ARRAY)return"2d-array";if(e===Ro.TEXTURE_3D)return"3d";throw new Error("whoops")}function DU(e){var i=0;return e&uu.INDEX&&(i|=GPUBufferUsage.INDEX),e&uu.VERTEX&&(i|=GPUBufferUsage.VERTEX),e&uu.UNIFORM&&(i|=GPUBufferUsage.UNIFORM),e&uu.STORAGE&&(i|=GPUBufferUsage.STORAGE),e&uu.COPY_SRC&&(i|=GPUBufferUsage.COPY_SRC),i|=GPUBufferUsage.COPY_DST,i}function H5(e){if(e===Rh.CLAMP_TO_EDGE)return"clamp-to-edge";if(e===Rh.REPEAT)return"repeat";if(e===Rh.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function iN(e){if(e===wl.BILINEAR)return"linear";if(e===wl.POINT)return"nearest";throw new Error("whoops")}function FU(e){if(e===Ac.LINEAR)return"linear";if(e===Ac.NEAREST)return"nearest";if(e===Ac.NO_MIP)return"nearest";throw new Error("whoops")}function dx(e){var i=e;return i.gpuBuffer}function BU(e){var i=e;return i.gpuSampler}function NU(e){var i=e;return i.querySet}function zU(e){if(e===dR.OcclusionConservative)return"occlusion";throw new Error("whoops")}function UU(e){switch(e){case ql.TRIANGLES:return"triangle-list";case ql.POINTS:return"point-list";case ql.TRIANGLE_STRIP:return"triangle-strip";case ql.LINES:return"line-list";case ql.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function ZU(e){if(e===op.NONE)return"none";if(e===op.FRONT)return"front";if(e===op.BACK)return"back";throw new Error("whoops")}function VU(e){if(e===OE.CCW)return"ccw";if(e===OE.CW)return"cw";throw new Error("whoops")}function HU(e,i){return{topology:UU(e),cullMode:ZU(i.cullMode),frontFace:VU(i.frontFace)}}function aN(e){if(e===No.ZERO)return"zero";if(e===No.ONE)return"one";if(e===No.SRC)return"src";if(e===No.ONE_MINUS_SRC)return"one-minus-src";if(e===No.DST)return"dst";if(e===No.ONE_MINUS_DST)return"one-minus-dst";if(e===No.SRC_ALPHA)return"src-alpha";if(e===No.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(e===No.DST_ALPHA)return"dst-alpha";if(e===No.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(e===No.CONST)return"constant";if(e===No.ONE_MINUS_CONSTANT)return"one-minus-constant";if(e===No.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function jU(e){if(e===Xc.ADD)return"add";if(e===Xc.SUBSTRACT)return"subtract";if(e===Xc.REVERSE_SUBSTRACT)return"reverse-subtract";if(e===Xc.MIN)return"min";if(e===Xc.MAX)return"max";throw new Error("whoops")}function oN(e){return{operation:jU(e.blendMode),srcFactor:aN(e.blendSrcFactor),dstFactor:aN(e.blendDstFactor)}}function sN(e){return e.blendMode===Xc.ADD&&e.blendSrcFactor===No.ONE&&e.blendDstFactor===No.ZERO}function WU(e){if(!(sN(e.rgbBlendState)&&sN(e.alphaBlendState)))return{color:oN(e.rgbBlendState),alpha:oN(e.alphaBlendState)}}function GU(e,i){return{format:V5(i),blend:WU(e),writeMask:e.channelWriteMask}}function $U(e,i){return i.attachmentsState.map(function(r,o){return GU(r,e[o])})}function TR(e){if(e===wo.NEVER)return"never";if(e===wo.LESS)return"less";if(e===wo.EQUAL)return"equal";if(e===wo.LEQUAL)return"less-equal";if(e===wo.GREATER)return"greater";if(e===wo.NOTEQUAL)return"not-equal";if(e===wo.GEQUAL)return"greater-equal";if(e===wo.ALWAYS)return"always";throw new Error("whoops")}function vx(e){if(e===fl.KEEP)return"keep";if(e===fl.REPLACE)return"replace";if(e===fl.ZERO)return"zero";if(e===fl.DECREMENT_CLAMP)return"decrement-clamp";if(e===fl.DECREMENT_WRAP)return"decrement-wrap";if(e===fl.INCREMENT_CLAMP)return"increment-clamp";if(e===fl.INCREMENT_WRAP)return"increment-wrap";if(e===fl.INVERT)return"invert";throw new Error("whoops")}function XU(e,i){if(!c0(e))return{format:V5(e),depthWriteEnabled:!!i.depthWrite,depthCompare:TR(i.depthCompare),depthBias:i.polygonOffset?1:0,depthBiasSlopeScale:i.polygonOffset?1:0,stencilFront:{compare:TR(i.stencilFront.compare),passOp:vx(i.stencilFront.passOp),failOp:vx(i.stencilFront.failOp),depthFailOp:vx(i.stencilFront.depthFailOp)},stencilBack:{compare:TR(i.stencilBack.compare),passOp:vx(i.stencilBack.passOp),failOp:vx(i.stencilBack.failOp),depthFailOp:vx(i.stencilBack.depthFailOp)},stencilReadMask:1,stencilWriteMask:1}}function YU(e){if(e!==null){if(e===qr.U16_R)return"uint16";if(e===qr.U32_R)return"uint32";throw new Error("whoops")}}function KU(e){if(e===Ky.VERTEX)return"vertex";if(e===Ky.INSTANCE)return"instance";throw new Error("whoops")}function qU(e){if(e===qr.U8_R)return"uint8x2";if(e===qr.U8_RG)return"uint8x2";if(e===qr.U8_RGB)return"uint8x4";if(e===qr.U8_RGBA)return"uint8x4";if(e===qr.U8_RG_NORM)return"unorm8x2";if(e===qr.U8_RGBA_NORM)return"unorm8x4";if(e===qr.S8_RGB_NORM)return"snorm8x4";if(e===qr.S8_RGBA_NORM)return"snorm8x4";if(e===qr.U16_RG_NORM)return"unorm16x2";if(e===qr.U16_RGBA_NORM)return"unorm16x4";if(e===qr.S16_RG_NORM)return"snorm16x2";if(e===qr.S16_RGBA_NORM)return"snorm16x4";if(e===qr.S16_RG)return"uint16x2";if(e===qr.F16_RG)return"float16x2";if(e===qr.F16_RGBA)return"float16x4";if(e===qr.F32_R)return"float32";if(e===qr.F32_RG)return"float32x2";if(e===qr.F32_RGB)return"float32x3";if(e===qr.F32_RGBA)return"float32x4";throw"whoops"}function QU(e){var i=rg(e);switch(i){case Qn.BC1:case Qn.BC2:case Qn.BC3:case Qn.BC4_SNORM:case Qn.BC4_UNORM:case Qn.BC5_SNORM:case Qn.BC5_UNORM:return!0;default:return!1}}function JU(e){var i=rg(e);switch(i){case Qn.BC1:case Qn.BC2:case Qn.BC3:case Qn.BC4_SNORM:case Qn.BC4_UNORM:case Qn.BC5_SNORM:case Qn.BC5_UNORM:return 4;default:return 1}}function uN(e,i,r,o){switch(r===void 0&&(r=!1),e){case qr.S8_R:case qr.S8_R_NORM:case qr.S8_RG_NORM:case qr.S8_RGB_NORM:case qr.S8_RGBA_NORM:{var u=i instanceof ArrayBuffer?new Int8Array(i):new Int8Array(i);return o&&u.set(new Int8Array(o)),u}case qr.U8_R:case qr.U8_R_NORM:case qr.U8_RG:case qr.U8_RG_NORM:case qr.U8_RGB:case qr.U8_RGB_NORM:case qr.U8_RGB_SRGB:case qr.U8_RGBA:case qr.U8_RGBA_NORM:case qr.U8_RGBA_SRGB:{var c=i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i);return o&&c.set(new Uint8Array(o)),c}case qr.S16_R:case qr.S16_RG:case qr.S16_RG_NORM:case qr.S16_RGB_NORM:case qr.S16_RGBA:case qr.S16_RGBA_NORM:{var p=i instanceof ArrayBuffer?new Int16Array(i):new Int16Array(r?i/2:i);return o&&p.set(new Int16Array(o)),p}case qr.U16_R:case qr.U16_RGB:case qr.U16_RGBA_5551:case qr.U16_RGBA_NORM:case qr.U16_RG_NORM:case qr.U16_R_NORM:{var g=i instanceof ArrayBuffer?new Uint16Array(i):new Uint16Array(r?i/2:i);return o&&g.set(new Uint16Array(o)),g}case qr.S32_R:{var y=i instanceof ArrayBuffer?new Int32Array(i):new Int32Array(r?i/4:i);return o&&y.set(new Int32Array(o)),y}case qr.U32_R:case qr.U32_RG:{var w=i instanceof ArrayBuffer?new Uint32Array(i):new Uint32Array(r?i/4:i);return o&&w.set(new Uint32Array(o)),w}case qr.F32_R:case qr.F32_RG:case qr.F32_RGB:case qr.F32_RGBA:{var O=i instanceof ArrayBuffer?new Float32Array(i):new Float32Array(r?i/4:i);return o&&O.set(new Float32Array(o)),O}}var D=i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i);return o&&D.set(new Uint8Array(o)),D}function eZ(e){var i=(e&32768)>>15,r=(e&31744)>>10,o=e&1023;return r===0?(i?-1:1)*Math.pow(2,-14)*(o/Math.pow(2,10)):r==31?o?NaN:(i?-1:1)*(1/0):(i?-1:1)*Math.pow(2,r-15)*(1+o/Math.pow(2,10))}var ng=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=e.call(this)||this;return c.id=o,c.device=u,c}return i.prototype.destroy=function(){},i}(k6),tZ=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;y.type=ds.Bindings;var w=c.pipeline;bo(!!w);var O=c.uniformBufferBindings,D=c.storageBufferBindings,V=c.samplerBindings,X=c.storageTextureBindings;y.numUniformBuffers=(O==null?void 0:O.length)||0;var ce=[[],[],[],[]],de=0;if(O&&O.length)for(var we=0;we<O.length;we++){var je=c.uniformBufferBindings[we],ht=je.binding,_t=je.size,Dt=je.offset,Yt=je.buffer,ir={buffer:dx(Yt),offset:Dt!=null?Dt:0,size:_t};ce[0].push({binding:ht!=null?ht:de++,resource:ir})}if(V&&V.length){de=0;for(var we=0;we<V.length;we++){var sr=(0,b.pi)((0,b.pi)({},V[we]),j6),ht=c.samplerBindings[we],Tr=ht.texture!==null?ht.texture:y.device.getFallbackTexture(sr);sr.dimension=Tr.dimension,sr.formatKind=B6(Tr.format);var Vr=Tr.gpuTextureView;if(ce[1].push({binding:(p=ht.textureBinding)!==null&&p!==void 0?p:de++,resource:Vr}),ht.samplerBinding!==-1){var sn=ht.sampler!==null?ht.sampler:y.device.getFallbackSampler(sr),ln=BU(sn);ce[1].push({binding:(g=ht.samplerBinding)!==null&&g!==void 0?g:de++,resource:ln})}}}if(D&&D.length){de=0;for(var we=0;we<D.length;we++){var Zn=c.storageBufferBindings[we],ht=Zn.binding,_t=Zn.size,Dt=Zn.offset,Yt=Zn.buffer,ir={buffer:dx(Yt),offset:Dt!=null?Dt:0,size:_t};ce[2].push({binding:ht!=null?ht:de++,resource:ir})}}if(X&&X.length){de=0;for(var we=0;we<X.length;we++){var ci=c.storageTextureBindings[we],ht=ci.binding,Tr=ci.texture,Vr=Tr.gpuTextureView;ce[3].push({binding:ht!=null?ht:de++,resource:Vr})}}var ki=ce.findLastIndex(function(eo){return!!eo.length});return y.gpuBindGroup=ce.map(function(eo,Xo){return Xo<=ki&&y.device.device.createBindGroup({layout:w.getBindGroupLayout(Xo),entries:eo})}),y}return i}(ng),rZ=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.Buffer;var g=c.usage,y=c.viewOrSize,w=!!(g&uu.MAP_READ);p.usage=DU(g),w&&(p.usage=uu.MAP_READ|uu.COPY_DST);var O=!nx(y);if(p.view=nx(y)?null:y,p.size=nx(y)?mR(y,4):mR(y.byteLength,4),nx(y))p.gpuBuffer=p.device.device.createBuffer({usage:p.usage,size:p.size,mappedAtCreation:w?O:!1});else{p.gpuBuffer=p.device.device.createBuffer({usage:p.usage,size:p.size,mappedAtCreation:!0});var D=y&&y.constructor||Float32Array;new D(p.gpuBuffer.getMappedRange()).set(y),p.gpuBuffer.unmap()}return p}return i.prototype.setSubData=function(r,o,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var p=this.gpuBuffer;c=c||o.byteLength,c=Math.min(c,this.size-r);var g=o.byteOffset+u,y=g+c,w=c+3&-4;if(w!==c){var O=new Uint8Array(o.buffer.slice(g,y));o=new Uint8Array(w),o.set(O),u=0,g=0,y=w,c=w}for(var D=1024*1024*15,V=0;y-(g+V)>D;)this.device.device.queue.writeBuffer(p,r+V,o.buffer,g+V,D),V+=D;this.device.device.queue.writeBuffer(p,r+V,o.buffer,g+V,c-V)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuBuffer.destroy()},i}(ng),nZ=function(){function e(){this.commandEncoder=null,this.gpuComputePassEncoder=null}return e.prototype.dispatchWorkgroups=function(i,r,o){this.gpuComputePassEncoder.dispatchWorkgroups(i,r,o)},e.prototype.dispatchWorkgroupsIndirect=function(i,r){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(i.gpuBuffer,r)},e.prototype.finish=function(){return this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.commandEncoder.finish()},e.prototype.beginComputePass=function(){bo(this.gpuComputePassEncoder===null),this.gpuComputePassEncoder=this.commandEncoder.beginComputePass(this.gpuComputePassDescriptor)},e.prototype.setPipeline=function(i){var r=i,o=qy(r.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(o)},e.prototype.setBindings=function(i){var r=this,o=i;o.gpuBindGroup.forEach(function(u,c){u&&r.gpuComputePassEncoder.setBindGroup(c,o.gpuBindGroup[c])})},e.prototype.pushDebugGroup=function(i){this.gpuComputePassEncoder.pushDebugGroup(i)},e.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(i){this.gpuComputePassEncoder.insertDebugMarker(i)},e}(),iZ=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.ComputePipeline,p.gpuComputePipeline=null,p.descriptor=c;var g=c.program,y=g.computeStage;if(y===null)return p;var w={layout:"auto",compute:(0,b.pi)({},y)};return p.gpuComputePipeline=p.device.device.createComputePipeline(w),p.name!==void 0&&(p.gpuComputePipeline.label=p.name),p}return i.prototype.getBindGroupLayout=function(r){return this.gpuComputePipeline.getBindGroupLayout(r)},i}(ng),aZ=function(e){(0,b.ZT)(i,e);function i(r){var o,u,c,p,g=r.id,y=r.device,w=r.descriptor,O=e.call(this,{id:g,device:y})||this;O.type=ds.InputLayout;var D=[];try{for(var V=(0,b.XA)(w.vertexBufferDescriptors),X=V.next();!X.done;X=V.next()){var ce=X.value,de=ce.arrayStride,we=ce.stepMode,je=ce.attributes;D.push({arrayStride:de,stepMode:KU(we),attributes:[]});try{for(var ht=(c=void 0,(0,b.XA)(je)),_t=ht.next();!_t.done;_t=ht.next()){var Dt=_t.value,Yt=Dt.shaderLocation,ir=Dt.format,sr=Dt.offset;D[D.length-1].attributes.push({shaderLocation:Yt,format:qU(ir),offset:sr})}}catch(Tr){c={error:Tr}}finally{try{_t&&!_t.done&&(p=ht.return)&&p.call(ht)}finally{if(c)throw c.error}}}}catch(Tr){o={error:Tr}}finally{try{X&&!X.done&&(u=V.return)&&u.call(V)}finally{if(o)throw o.error}}return O.indexFormat=YU(w.indexBufferFormat),O.buffers=D,O}return i}(ng),lN=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=ds.Program,p.vertexStage=null,p.fragmentStage=null,p.computeStage=null,p.descriptor=c,c.vertex&&(p.vertexStage=p.createShaderStage(c.vertex,"vertex")),c.fragment&&(p.fragmentStage=p.createShaderStage(c.fragment,"fragment")),c.compute&&(p.computeStage=p.createShaderStage(c.compute,"compute")),p}return i.prototype.setUniformsLegacy=function(r){},i.prototype.createShaderStage=function(r,o){var u,c,p=r.glsl,g=r.wgsl,y=r.entryPoint,w=!1,O=g;if(!O)try{O=this.device.glsl_compile(p,o,w)}catch(we){throw console.error(we,p),new Error("whoops")}var D=function(we){if(!O.includes(we))return"continue";O=O.replace("var T_".concat(we,": texture_2d<f32>;"),"var T_".concat(we,": texture_depth_2d;")),O=O.replace(new RegExp("textureSample\\(T_".concat(we,"(.*)\\);$"),"gm"),function(je,ht){return"vec4<f32>(textureSample(T_".concat(we).concat(ht,"), 0.0, 0.0, 0.0);")})};try{for(var V=(0,b.XA)(["u_TextureFramebufferDepth"]),X=V.next();!X.done;X=V.next()){var ce=X.value;D(ce)}}catch(we){u={error:we}}finally{try{X&&!X.done&&(c=V.return)&&c.call(V)}finally{if(u)throw u.error}}var de=this.device.device.createShaderModule({code:O});return{module:de,entryPoint:y||"main"}},i}(ng),oZ=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;p.type=ds.QueryPool;var g=c.elemCount,y=c.type;return p.querySet=p.device.device.createQuerySet({type:zU(y),count:g}),p.resolveBuffer=p.device.device.createBuffer({size:g*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),p.cpuBuffer=p.device.device.createBuffer({size:g*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),p.results=null,p}return i.prototype.queryResultOcclusion=function(r){return this.results===null?null:this.results[r]!==BigInt(0)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},i}(ng),sZ=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=e.call(this,{id:o,device:u})||this;return c.type=ds.Readback,c}return i.prototype.readTexture=function(r,o,u,c,p,g,y,w){return y===void 0&&(y=0),(0,b.mG)(this,void 0,void 0,function(){var O,D,V,X,ce,de,we,je;return(0,b.Jh)(this,function(ht){return O=r,D=0,V=this.getBlockInformationFromFormat(O.gpuTextureformat),X=Math.ceil(c/V.width)*V.length,ce=Math.ceil(X/256)*256,de=ce*p,we=this.device.createBuffer({usage:uu.STORAGE|uu.MAP_READ|uu.COPY_DST,hint:gv.STATIC,viewOrSize:de}),je=this.device.device.createCommandEncoder(),je.copyTextureToBuffer({texture:O.gpuTexture,mipLevel:0,origin:{x:o,y:u,z:Math.max(D,0)}},{buffer:we.gpuBuffer,offset:0,bytesPerRow:ce},{width:c,height:p,depthOrArrayLayers:1}),this.device.device.queue.submit([je.finish()]),[2,this.readBuffer(we,0,g.byteLength===de?g:null,y,de,O.format)]})})},i.prototype.readTextureSync=function(r,o,u,c,p,g,y,w){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},i.prototype.readBuffer=function(r,o,u,c,p,g,y,w){var O=this;o===void 0&&(o=0),u===void 0&&(u=null),p===void 0&&(p=0),g===void 0&&(g=qr.U8_RGB),y===void 0&&(y=!1);var D=r,V=p||D.size,X=u||D.view,ce=X&&X.constructor&&X.constructor.BYTES_PER_ELEMENT||F6(g),de=D;if(!(D.usage&uu.MAP_READ&&D.usage&uu.COPY_DST)){var we=this.device.device.createCommandEncoder();de=this.device.createBuffer({usage:uu.STORAGE|uu.MAP_READ|uu.COPY_DST,hint:gv.STATIC,viewOrSize:V}),we.copyBufferToBuffer(D.gpuBuffer,o,de.gpuBuffer,0,V),this.device.device.queue.submit([we.finish()])}return new Promise(function(je,ht){de.gpuBuffer.mapAsync(Z5.READ,o,V).then(function(){var _t=de.gpuBuffer.getMappedRange(o,V),Dt=X;if(y)Dt===null?Dt=uN(g,V,!0,_t):Dt=uN(g,Dt.buffer,void 0,_t);else if(Dt===null)switch(ce){case 1:Dt=new Uint8Array(V),Dt.set(new Uint8Array(_t));break;case 2:Dt=O.getHalfFloatAsFloatRGBAArrayBuffer(V/2,_t);break;case 4:Dt=new Float32Array(V/4),Dt.set(new Float32Array(_t));break}else switch(ce){case 1:Dt=new Uint8Array(Dt.buffer),Dt.set(new Uint8Array(_t));break;case 2:Dt=O.getHalfFloatAsFloatRGBAArrayBuffer(V/2,_t,X);break;case 4:var Yt=X&&X.constructor||Float32Array;Dt=new Yt(Dt.buffer),Dt.set(new Yt(_t));break}de.gpuBuffer.unmap(),je(Dt)},function(_t){return ht(_t)})})},i.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(r,o,u){u||(u=new Float32Array(r));for(var c=new Uint16Array(o);r--;)u[r]=eZ(c[r]);return u},i.prototype.getBlockInformationFromFormat=function(r){switch(r){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}},i}(ng),uZ=function(){function e(i){this.device=i,this.commandEncoder=null,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return e.prototype.getTextureView=function(i,r){return bo(r<i.mipLevelCount),i.mipLevelCount===1?i.gpuTextureView:i.gpuTexture.createView({baseMipLevel:r,mipLevelCount:1})},e.prototype.setRenderPassDescriptor=function(i){var r,o,u,c,p,g;this.descriptor=i,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var y=i.colorAttachment.length;this.gfxColorAttachment.length=y,this.gfxColorResolveTo.length=y;for(var w=0;w<i.colorAttachment.length;w++){var O=i.colorAttachment[w],D=i.colorResolveTo[w];if(O===null&&D!==null&&(O=D,D=null),this.gfxColorAttachment[w]=O,this.gfxColorResolveTo[w]=D,this.gfxColorAttachmentLevel[w]=((r=i.colorAttachmentLevel)===null||r===void 0?void 0:r[w])||0,this.gfxColorResolveToLevel[w]=((o=i.colorResolveToLevel)===null||o===void 0?void 0:o[w])||0,O!==null){this.gpuColorAttachments[w]===void 0&&(this.gpuColorAttachments[w]={});var V=this.gpuColorAttachments[w];V.view=this.getTextureView(O,((u=this.gfxColorAttachmentLevel)===null||u===void 0?void 0:u[w])||0);var X=(p=(c=i.colorClearColor)===null||c===void 0?void 0:c[w])!==null&&p!==void 0?p:"load";X==="load"?V.loadOp="load":(V.loadOp="clear",V.clearValue=X),V.storeOp=!((g=i.colorStore)===null||g===void 0)&&g[w]?"store":"discard",V.resolveTarget=void 0,D!==null&&(O.sampleCount>1?V.resolveTarget=this.getTextureView(D,this.gfxColorResolveToLevel[w]):V.storeOp="store")}else{this.gpuColorAttachments.length=w,this.gfxColorAttachment.length=w,this.gfxColorResolveTo.length=w;break}}if(this.gfxDepthStencilAttachment=i.depthStencilAttachment,this.gfxDepthStencilResolveTo=i.depthStencilResolveTo,i.depthStencilAttachment){var ce=i.depthStencilAttachment,V=this.gpuDepthStencilAttachment;V.view=ce.gpuTextureView;var de=!!(ox(ce.format)&Gi.Depth);de?(i.depthClearValue==="load"?V.depthLoadOp="load":(V.depthLoadOp="clear",V.depthClearValue=i.depthClearValue),i.depthStencilStore||this.gfxDepthStencilResolveTo!==null?V.depthStoreOp="store":V.depthStoreOp="discard"):(V.depthLoadOp=void 0,V.depthStoreOp=void 0);var we=!!(ox(ce.format)&Gi.Stencil);we?(i.stencilClearValue==="load"?V.stencilLoadOp="load":(V.stencilLoadOp="clear",V.stencilClearValue=i.stencilClearValue),i.depthStencilStore||this.gfxDepthStencilResolveTo!==null?V.stencilStoreOp="store":V.stencilStoreOp="discard"):(V.stencilLoadOp=void 0,V.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=c0(i.occlusionQueryPool)?void 0:NU(i.occlusionQueryPool)},e.prototype.beginRenderPass=function(i){bo(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(i),this.gpuRenderPassEncoder=this.commandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},e.prototype.flipY=function(i,r){var o=this.device.swapChainHeight;return o-i-r},e.prototype.setViewport=function(i,r,o,u,c,p){c===void 0&&(c=0),p===void 0&&(p=1),this.gpuRenderPassEncoder.setViewport(i,this.flipY(r,u),o,u,c,p)},e.prototype.setScissorRect=function(i,r,o,u){this.gpuRenderPassEncoder.setScissorRect(i,this.flipY(r,u),o,u)},e.prototype.setPipeline=function(i){var r=i,o=qy(r.gpuRenderPipeline);this.gpuRenderPassEncoder.setPipeline(o)},e.prototype.setVertexInput=function(i,r,o){if(i!==null){var u=i;o!==null&&this.gpuRenderPassEncoder.setIndexBuffer(dx(o.buffer),qy(u.indexFormat),o.offset);for(var c=0;c<r.length;c++){var p=r[c];p!==null&&this.gpuRenderPassEncoder.setVertexBuffer(c,dx(p.buffer),p.offset)}}},e.prototype.setBindings=function(i){var r=this,o=i;o.gpuBindGroup.forEach(function(u,c){u&&r.gpuRenderPassEncoder.setBindGroup(c,o.gpuBindGroup[c])})},e.prototype.setStencilReference=function(i){this.gpuRenderPassEncoder.setStencilReference(i)},e.prototype.draw=function(i,r,o,u){this.gpuRenderPassEncoder.draw(i,r,o,u)},e.prototype.drawIndexed=function(i,r,o,u,c){this.gpuRenderPassEncoder.drawIndexed(i,r,o,u,c)},e.prototype.drawIndirect=function(i,r){this.gpuRenderPassEncoder.drawIndirect(dx(i),r)},e.prototype.drawIndexedIndirect=function(i,r){this.gpuRenderPassEncoder.drawIndexedIndirect(dx(i),r)},e.prototype.beginOcclusionQuery=function(i){this.gpuRenderPassEncoder.beginOcclusionQuery(i)},e.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},e.prototype.pushDebugGroup=function(i){this.gpuRenderPassEncoder.pushDebugGroup(i)},e.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},e.prototype.insertDebugMarker=function(i){this.gpuRenderPassEncoder.insertDebugMarker(i)},e.prototype.finish=function(){this.gpuRenderPassEncoder.end(),this.gpuRenderPassEncoder=null;for(var i=0;i<this.gfxColorAttachment.length;i++){var r=this.gfxColorAttachment[i],o=this.gfxColorResolveTo[i];r!==null&&o!==null&&r.sampleCount===1&&this.copyAttachment(o,this.gfxColorAttachmentLevel[i],r,this.gfxColorResolveToLevel[i])}return this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.commandEncoder.finish()},e.prototype.copyAttachment=function(i,r,o,u){bo(o.sampleCount===1);var c={texture:o.gpuTexture,mipLevel:u},p={texture:i.gpuTexture,mipLevel:r};bo(o.width>>>u===i.width>>>r),bo(o.height>>>u===i.height>>>r),bo(!!(o.usage&Tc.COPY_SRC)),bo(!!(i.usage&Tc.COPY_DST)),this.commandEncoder.copyTextureToTexture(c,p,[i.width,i.height,1])},e}(),lZ=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=e.call(this,{id:o,device:u})||this;return p.type=ds.RenderPipeline,p.isCreatingAsync=!1,p.gpuRenderPipeline=null,p.descriptor=c,p.device.createRenderPipelineInternal(p,!1),p}return i.prototype.getBindGroupLayout=function(r){return this.gpuRenderPipeline.getBindGroupLayout(r)},i}(ng),cZ=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p,g,y=e.call(this,{id:o,device:u})||this;y.type=ds.Sampler;var w=c.lodMinClamp,O=c.mipmapFilter===Ac.NO_MIP?c.lodMinClamp:c.lodMaxClamp,D=(p=c.maxAnisotropy)!==null&&p!==void 0?p:1;return D>1&&bo(c.minFilter===wl.BILINEAR&&c.magFilter===wl.BILINEAR&&c.mipmapFilter===Ac.LINEAR),y.gpuSampler=y.device.device.createSampler({addressModeU:H5(c.addressModeU),addressModeV:H5(c.addressModeV),addressModeW:H5((g=c.addressModeW)!==null&&g!==void 0?g:c.addressModeU),lodMinClamp:w,lodMaxClamp:O,minFilter:iN(c.minFilter),magFilter:iN(c.magFilter),mipmapFilter:FU(c.mipmapFilter),compare:c.compareFunction!==void 0?TR(c.compareFunction):void 0,maxAnisotropy:D}),y}return i}(ng),MR=function(e){(0,b.ZT)(i,e);function i(r){var o=r.id,u=r.device,c=r.descriptor,p=r.skipCreate,g=r.sampleCount,y=e.call(this,{id:o,device:u})||this;y.type=ds.Texture,y.flipY=!1;var w=c.format,O=c.dimension,D=c.width,V=c.height,X=c.depthOrArrayLayers,ce=c.mipLevelCount,de=c.usage,we=c.pixelStore;return y.flipY=!!(we!=null&&we.unpackFlipY),y.device.createTextureShared({format:w,dimension:O!=null?O:Ro.TEXTURE_2D,width:D,height:V,depthOrArrayLayers:X!=null?X:1,mipLevelCount:ce!=null?ce:1,usage:de,sampleCount:g!=null?g:1},y,p),y}return i.prototype.textureFromImageBitmapOrCanvas=function(r,o,u){for(var c=o[0].width,p=o[0].height,g={size:{width:c,height:p,depthOrArrayLayers:u},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},y=r.createTexture(g),w=0;w<o.length;w++)r.queue.copyExternalImageToTexture({source:o[w],flipY:this.flipY},{texture:y,origin:[0,0,w]},[c,p]);return[y,c,p]},i.prototype.isImageBitmapOrCanvases=function(r){var o=r[0];return o instanceof ImageBitmap||o instanceof HTMLCanvasElement||o instanceof OffscreenCanvas},i.prototype.isVideo=function(r){var o=r[0];return o instanceof HTMLVideoElement},i.prototype.setImageData=function(r,o){var u,c=this,p=this.device.device,g,y,w;this.isImageBitmapOrCanvases(r)?(u=(0,b.CR)(this.textureFromImageBitmapOrCanvas(p,r,this.depthOrArrayLayers),3),g=u[0],y=u[1],w=u[2]):this.isVideo(r)?g=p.importExternalTexture({source:r[0]}):r.forEach(function(O){p.queue.writeTexture({texture:c.gpuTexture},O,{},{width:c.width,height:c.height})}),this.width=y,this.height=w,this.gpuTexture=g,this.gpuTextureView=g.createView({dimension:LU(this.dimension)})},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.gpuTexture.destroy()},i}(ng),fZ=function(){function e(i,r,o,u,c,p){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=Tc.RENDER_ATTACHMENT|Tc.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=ix.UPPER_LEFT,this.clipSpaceNearZ=ax.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=r,this.canvas=o,this.canvasContext=u,this.glsl_compile=c,this.WGSLComposer=p,this.fallbackTexture2D=this.createFallbackTexture(Ro.TEXTURE_2D,hl.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(Ro.TEXTURE_2D,hl.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(Ro.TEXTURE_2D_ARRAY,hl.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(Ro.TEXTURE_3D,hl.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(Ro.TEXTURE_CUBE_MAP,hl.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:Rh.REPEAT,addressModeV:Rh.REPEAT,minFilter:wl.POINT,magFilter:wl.POINT,mipmapFilter:Ac.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:Rh.REPEAT,addressModeV:Rh.REPEAT,minFilter:wl.POINT,magFilter:wl.POINT,mipmapFilter:Ac.NEAREST,compareFunction:wo.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(g){console.error(g.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return e.prototype.destroy=function(){},e.prototype.configureSwapChain=function(i,r){this.swapChainWidth===i&&this.swapChainHeight===r||(this.swapChainWidth=i,this.swapChainHeight=r)},e.prototype.getOnscreenTexture=function(){var i=this.canvasContext.getCurrentTexture(),r=i.createView(),o=new MR({id:0,device:this,descriptor:{format:qr.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:Ro.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return o.depthOrArrayLayers=1,o.sampleCount=1,o.gpuTexture=i,o.gpuTextureView=r,o.name="Onscreen",this.setResourceName(o,"Onscreen Texture"),o},e.prototype.getDevice=function(){return this},e.prototype.getCanvas=function(){return this.canvas},e.prototype.beginFrame=function(){},e.prototype.endFrame=function(){},e.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},e.prototype.createBuffer=function(i){return new rZ({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createTexture=function(i){return new MR({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createSampler=function(i){return new cZ({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createRenderTarget=function(i){var r=new MR({id:this.getNextUniqueId(),device:this,descriptor:(0,b.pi)((0,b.pi)({},i),{dimension:Ro.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:Mf.RENDER_TARGET}),sampleCount:i.sampleCount});return r.depthOrArrayLayers=1,r.type=ds.RenderTarget,r},e.prototype.createRenderTargetFromTexture=function(i){var r=i,o=r.format,u=r.width,c=r.height,p=r.depthOrArrayLayers,g=r.sampleCount,y=r.mipLevelCount,w=r.gpuTexture,O=r.gpuTextureView,D=r.usage;bo(!!(D&Tc.RENDER_ATTACHMENT));var V=new MR({id:this.getNextUniqueId(),device:this,descriptor:{format:o,width:u,height:c,depthOrArrayLayers:p,dimension:Ro.TEXTURE_2D,mipLevelCount:y,usage:D},skipCreate:!0});return V.depthOrArrayLayers=p,V.sampleCount=g,V.gpuTexture=w,V.gpuTextureView=O,V},e.prototype.createProgram=function(i){var r,o;return!((r=i.vertex)===null||r===void 0)&&r.glsl&&(i.vertex.glsl=h0(this.queryVendorInfo(),"vert",i.vertex.glsl)),!((o=i.fragment)===null||o===void 0)&&o.glsl&&(i.fragment.glsl=h0(this.queryVendorInfo(),"frag",i.fragment.glsl)),new lN({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createProgramSimple=function(i){return new lN({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createTextureShared=function(i,r,o){var u={width:i.width,height:i.height,depthOrArrayLayers:i.depthOrArrayLayers},c=i.mipLevelCount,p=V5(i.format),g=kU(i.dimension),y=OU(i.usage);if(r.gpuTextureformat=p,r.dimension=i.dimension,r.format=i.format,r.width=i.width,r.height=i.height,r.depthOrArrayLayers=i.depthOrArrayLayers,r.mipLevelCount=c,r.usage=y,r.sampleCount=i.sampleCount,!o){var w=this.device.createTexture({size:u,mipLevelCount:c,format:p,dimension:g,sampleCount:i.sampleCount,usage:y}),O=w.createView();r.gpuTexture=w,r.gpuTextureView=O}},e.prototype.getFallbackSampler=function(i){var r=i.formatKind;return r===hl.Depth&&i.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},e.prototype.getFallbackTexture=function(i){var r=i.dimension,o=i.formatKind;if(r===Ro.TEXTURE_2D)return o===hl.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(r===Ro.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(r===Ro.TEXTURE_3D)return this.fallbackTexture3D;if(r===Ro.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},e.prototype.createFallbackTexture=function(i,r){var o=i===Ro.TEXTURE_CUBE_MAP?6:1,u=r===hl.Float?qr.U8_RGBA_NORM:qr.D24;return this.createTexture({dimension:i,format:u,usage:Mf.SAMPLED,width:1,height:1,depthOrArrayLayers:o,mipLevelCount:1})},e.prototype.createBindings=function(i){return new tZ({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createInputLayout=function(i){return new aZ({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createComputePipeline=function(i){return new iZ({id:this.getNextUniqueId(),device:this,descriptor:i})},e.prototype.createRenderPipeline=function(i){return new lZ({id:this.getNextUniqueId(),device:this,descriptor:(0,b.pi)({},i)})},e.prototype.createQueryPool=function(i,r){return new oZ({id:this.getNextUniqueId(),device:this,descriptor:{type:i,elemCount:r}})},e.prototype.createRenderPipelineInternal=function(i,r){var o;if(i.gpuRenderPipeline===null){var u=i.descriptor,c=u.program,p=c.vertexStage,g=c.fragmentStage;if(!(p===null||g===null)){var y=u.megaStateDescriptor||{},w=y.stencilBack,O=y.stencilFront,D=(0,b._T)(y,["stencilBack","stencilFront"]),V=lx(Qy);u.megaStateDescriptor=(0,b.pi)((0,b.pi)((0,b.pi)({},V),{stencilBack:(0,b.pi)((0,b.pi)({},V.stencilBack),w),stencilFront:(0,b.pi)((0,b.pi)({},V.stencilFront),O)}),D);var X=u.megaStateDescriptor.attachmentsState[0];u.colorAttachmentFormats.forEach(function(Dt,Yt){u.megaStateDescriptor.attachmentsState[Yt]||(u.megaStateDescriptor.attachmentsState[Yt]=V6(void 0,X))});var ce=HU((o=u.topology)!==null&&o!==void 0?o:ql.TRIANGLES,u.megaStateDescriptor),de=$U(u.colorAttachmentFormats,u.megaStateDescriptor),we=XU(u.depthStencilAttachmentFormat,u.megaStateDescriptor),je=void 0;u.inputLayout!==null&&(je=u.inputLayout.buffers);var ht=u.sampleCount,_t={layout:"auto",vertex:(0,b.pi)((0,b.pi)({},p),{buffers:je}),primitive:ce,depthStencil:we,multisample:{count:ht},fragment:(0,b.pi)((0,b.pi)({},g),{targets:de})};i.gpuRenderPipeline=this.device.createRenderPipeline(_t)}}},e.prototype.createReadback=function(){return new sZ({id:this.getNextUniqueId(),device:this})},e.prototype.createRenderPass=function(i){var r=this.renderPassPool.pop();return r===void 0&&(r=new uZ(this)),r.commandEncoder=this.device.createCommandEncoder(),r.beginRenderPass(i),r},e.prototype.createComputePass=function(){var i=this.computePassPool.pop();return i===void 0&&(i=new nZ),i.commandEncoder=this.device.createCommandEncoder(),i.beginComputePass(),i},e.prototype.submitPass=function(i){var r=this.device.queue,o=i,u=o.finish();r.submit([u]),o.commandEncoder=null},e.prototype.copySubTexture2D=function(i,r,o,u,c,p,g){var y=this.device.createCommandEncoder(),w=i,O=u,D={texture:O.gpuTexture,origin:[c,p,0],mipLevel:0,aspect:"all"},V={texture:w.gpuTexture,origin:[r,o,0],mipLevel:0,aspect:"all"};bo(!!(O.usage&Tc.COPY_SRC)),bo(!!(w.usage&Tc.COPY_DST)),y.copyTextureToTexture(D,V,[O.width,O.height,g||1]),this.device.queue.submit([y.finish()])},e.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},e.prototype.queryTextureFormatSupported=function(i,r,o){if(QU(i)){if(!this.featureTextureCompressionBC)return!1;var u=JU(i);return r%u!==0||o%u!==0?!1:this.featureTextureCompressionBC}switch(i){case qr.U16_RGBA_NORM:return!1;case qr.F32_RGBA:return!1}return!0},e.prototype.queryPlatformAvailable=function(){return!0},e.prototype.queryVendorInfo=function(){return this},e.prototype.queryRenderPass=function(i){var r=i;return r.descriptor},e.prototype.queryRenderTarget=function(i){var r=i;return r},e.prototype.setResourceName=function(i,r){if(i.name=r,i.type===ds.Buffer){var o=i;o.gpuBuffer.label=r}else if(i.type===ds.Texture){var o=i;o.gpuTexture.label=r,o.gpuTextureView.label=r}else if(i.type===ds.RenderTarget){var o=i;o.gpuTexture.label=r,o.gpuTextureView.label=r}else if(i.type===ds.Sampler){var o=i;o.gpuSampler.label=r}else if(i.type===ds.RenderPipeline){var o=i;o.gpuRenderPipeline!==null&&(o.gpuRenderPipeline.label=r)}},e.prototype.setResourceLeakCheck=function(i,r){},e.prototype.checkForLeaks=function(){},e.prototype.programPatched=function(i){},e.prototype.pipelineQueryReady=function(i){var r=i;return r.gpuRenderPipeline!==null},e.prototype.pipelineForceReady=function(i){var r=i;this.createRenderPipelineInternal(r,!1)},e}(),hZ=function(){function e(i){this.pluginOptions=i}return e.prototype.createSwapChain=function(i){return(0,b.mG)(this,void 0,void 0,function(){var r,o,u,c,p,g,y,w;return(0,b.Jh)(this,function(O){switch(O.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];r=null,O.label=1;case 1:return O.trys.push([1,3,,4]),o=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:o})];case 2:return r=O.sent(),[3,4];case 3:return u=O.sent(),console.log(u),[3,4];case 4:return r===null?[2,null]:(c=["depth32float-stencil8","texture-compression-bc"],p=c.filter(function(D){return r.features.has(D)}),[4,r.requestDevice({requiredFeatures:p})]);case 5:if(g=O.sent(),g&&(y=this.pluginOptions.onContextLost,g.lost.then(function(){y&&y()})),g===null)return[2,null];if(w=i.getContext("webgpu"),!w)return[2,null];O.label=6;case 6:return O.trys.push([6,8,,9]),[4,nN(this.pluginOptions.shaderCompilerPath)];case 7:return O.sent(),[3,9];case 8:return O.sent(),[3,9];case 9:return[2,new fZ(r,g,i,w,MU,ZE&&new ZE)]}})})},e}(),pZ=Ta.isPlainObject,dZ=Ta.isTypedArray,vZ=function(){function e(i,r){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"destroyed",!1),(0,Ne.Z)(this,"uniforms",{}),this.reGl=i;var o=r.vs,u=r.fs,c=r.attributes,p=r.uniforms,g=r.primitive,y=r.count,w=r.elements,O=r.depth,D=r.cull,V=r.instances,X={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:ix.LOWER_LEFT,clipSpaceNearZ:ax.NEGATIVE_ONE,supportMRT:!1},ce={};this.options=r,p&&(this.uniforms=this.extractUniforms(p),Object.keys(p).forEach(function(_t){ce[_t]=i.prop(_t)}));var de={};Object.keys(c).forEach(function(_t){de[_t]=c[_t].get()});var we=Wx(h0(X,"frag",u,null,!1)),je=Wx(h0(X,"vert",o,null,!1)),ht={attributes:de,frag:we,uniforms:ce,vert:je,colorMask:i.prop("colorMask"),lineWidth:1,blend:{enable:i.prop("blend.enable"),func:i.prop("blend.func"),equation:i.prop("blend.equation"),color:i.prop("blend.color")},stencil:{enable:i.prop("stencil.enable"),mask:i.prop("stencil.mask"),func:i.prop("stencil.func"),opFront:i.prop("stencil.opFront"),opBack:i.prop("stencil.opBack")},primitive:iz[g===void 0?yt.TRIANGLES:g]};V&&(ht.instances=V),y?ht.count=y:w&&(ht.elements=w.get()),this.initDepthDrawParams({depth:O},ht),this.initCullDrawParams({cull:D},ht),this.drawCommand=i(ht),this.drawParams=ht}return(0,st.Z)(e,[{key:"updateAttributesAndElements",value:function(r,o){var u={};Object.keys(r).forEach(function(c){u[c]=r[c].get()}),this.drawParams.attributes=u,this.drawParams.elements=o.get(),this.drawCommand=this.reGl(this.drawParams)}},{key:"updateAttributes",value:function(r){var o={};Object.keys(r).forEach(function(u){o[u]=r[u].get()}),this.drawParams.attributes=o,this.drawCommand=this.reGl(this.drawParams)}},{key:"addUniforms",value:function(r){this.uniforms=(0,ne.Z)((0,ne.Z)({},this.uniforms),this.extractUniforms(r))}},{key:"draw",value:function(r,o){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var u=(0,ne.Z)((0,ne.Z)({},this.uniforms),this.extractUniforms(r.uniforms||{})),c={};Object.keys(u).forEach(function(p){var g=(0,Ps.Z)(u[p]);g==="boolean"||g==="number"||Array.isArray(u[p])||u[p].BYTES_PER_ELEMENT?c[p]=u[p]:c[p]=u[p].get()}),c.blend=o?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(r),c.stencil=this.getStencilDrawParams(r),c.colorMask=this.getColorMaskDrawParams(r,o),this.drawCommand(c)}}},{key:"destroy",value:function(){var r;(r=this.drawParams)===null||r===void 0||(r=r.elements)===null||r===void 0||r.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(o){o==null||o.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(r,o){var u=r.depth;u&&(o.depth={enable:u.enable===void 0?!0:!!u.enable,mask:u.mask===void 0?!0:!!u.mask,func:uz[u.func||yt.LESS],range:u.range||[0,1]})}},{key:"getBlendDrawParams",value:function(r){var o=r.blend,u=o||{},c=u.enable,p=u.func,g=u.equation,y=u.color,w=y===void 0?[0,0,0,0]:y;return{enable:!!c,func:{srcRGB:pR[p&&p.srcRGB||yt.SRC_ALPHA],srcAlpha:pR[p&&p.srcAlpha||yt.SRC_ALPHA],dstRGB:pR[p&&p.dstRGB||yt.ONE_MINUS_SRC_ALPHA],dstAlpha:pR[p&&p.dstAlpha||yt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:O6[g&&g.rgb||yt.FUNC_ADD],alpha:O6[g&&g.alpha||yt.FUNC_ADD]},color:w}}},{key:"getStencilDrawParams",value:function(r){var o=r.stencil,u=o||{},c=u.enable,p=u.mask,g=p===void 0?-1:p,y=u.func,w=y===void 0?{cmp:yt.ALWAYS,ref:0,mask:-1}:y,O=u.opFront,D=O===void 0?{fail:yt.KEEP,zfail:yt.KEEP,zpass:yt.KEEP}:O,V=u.opBack,X=V===void 0?{fail:yt.KEEP,zfail:yt.KEEP,zpass:yt.KEEP}:V;return{enable:!!c,mask:g,func:(0,ne.Z)((0,ne.Z)({},w),{},{cmp:lz[w.cmp]}),opFront:{fail:rx[D.fail],zfail:rx[D.zfail],zpass:rx[D.zpass]},opBack:{fail:rx[X.fail],zfail:rx[X.zfail],zpass:rx[X.zpass]}}}},{key:"getColorMaskDrawParams",value:function(r,o){var u=r.stencil,c=u!=null&&u.enable&&u.opFront&&!o?[!1,!1,!1,!1]:[!0,!0,!0,!0];return c}},{key:"initCullDrawParams",value:function(r,o){var u=r.cull;if(u){var c=u.enable,p=u.face,g=p===void 0?yt.BACK:p;o.cull={enable:!!c,face:cz[g]}}}},{key:"extractUniforms",value:function(r){var o=this,u={};return Object.keys(r).forEach(function(c){o.extractUniformsRecursively(c,r[c],u,"")}),u}},{key:"extractUniformsRecursively",value:function(r,o,u,c){var p=this;if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||dZ(o)||o===""||"resize"in o){u["".concat(c&&c+".").concat(r)]=o;return}pZ(o)&&Object.keys(o).forEach(function(g){p.extractUniformsRecursively(g,o[g],u,"".concat(c&&c+".").concat(r))}),Array.isArray(o)&&o.forEach(function(g,y){Object.keys(g).forEach(function(w){p.extractUniformsRecursively(w,g[w],u,"".concat(c&&c+".").concat(r,"[").concat(y,"]"))})})}}]),e}(),gZ=function(){function e(i,r){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"isDestroy",!1);var o=r.data,u=r.type,c=u===void 0?yt.UNSIGNED_BYTE:u,p=r.width,g=r.height,y=r.flipY,w=y===void 0?!1:y,O=r.format,D=O===void 0?yt.RGBA:O,V=r.mipmap,X=V===void 0?!1:V,ce=r.wrapS,de=ce===void 0?yt.CLAMP_TO_EDGE:ce,we=r.wrapT,je=we===void 0?yt.CLAMP_TO_EDGE:we,ht=r.aniso,_t=ht===void 0?0:ht,Dt=r.alignment,Yt=Dt===void 0?1:Dt,ir=r.premultiplyAlpha,sr=ir===void 0?!1:ir,Tr=r.mag,Vr=Tr===void 0?yt.NEAREST:Tr,sn=r.min,ln=sn===void 0?yt.NEAREST:sn,Zn=r.colorSpace,ci=Zn===void 0?yt.BROWSER_DEFAULT_WEBGL:Zn,ki=r.x,eo=ki===void 0?0:ki,Xo=r.y,as=Xo===void 0?0:Xo,tu=r.copy,lu=tu===void 0?!1:tu;this.width=p,this.height=g;var ff={width:p,height:g,type:k5[c],format:az[D],wrapS:P6[de],wrapT:P6[je],mag:I6[Vr],min:I6[ln],alignment:Yt,flipY:w,colorSpace:sz[ci],premultiplyAlpha:sr,aniso:_t,x:eo,y:as,copy:lu};o&&(ff.data=o),typeof X=="number"?ff.mipmap=oz[X]:typeof X=="boolean"&&(ff.mipmap=X),this.texture=i.texture(ff)}return(0,st.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(r)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.texture.resize(o,u),this.width=o,this.height=u}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var r;(r=this.texture)===null||r===void 0||r.destroy()}this.isDestroy=!0}}]),e}(),cN,fN,mZ=(cN=(0,It.b2)(),cN(fN=function(){function e(){var i=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"uniformBuffers",[]),(0,Ne.Z)(this,"queryVerdorInfo",function(){return"WebGL1"}),(0,Ne.Z)(this,"createModel",function(r){return new vZ(i.gl,r)}),(0,Ne.Z)(this,"createAttribute",function(r){return new nz(i.gl,r)}),(0,Ne.Z)(this,"createBuffer",function(r){return new fz(i.gl,r)}),(0,Ne.Z)(this,"createElements",function(r){return new hz(i.gl,r)}),(0,Ne.Z)(this,"createTexture2D",function(r){return new gZ(i.gl,r)}),(0,Ne.Z)(this,"createFramebuffer",function(r){return new pz(i.gl,r)}),(0,Ne.Z)(this,"useFramebuffer",function(r,o){i.gl({framebuffer:r?r.get():null})(o)}),(0,Ne.Z)(this,"clear",function(r){var o,u=r.color,c=r.depth,p=r.stencil,g=r.framebuffer,y=g===void 0?null:g,w={color:u,depth:c,stencil:p};w.framebuffer=y===null?y:y.get(),(o=i.gl)===null||o===void 0||o.clear(w)}),(0,Ne.Z)(this,"viewport",function(r){var o=r.x,u=r.y,c=r.width,p=r.height;i.gl._gl.viewport(o,u,c,p),i.width=c,i.height=p,i.gl._refresh()}),(0,Ne.Z)(this,"readPixels",function(r){var o=r.framebuffer,u=r.x,c=r.y,p=r.width,g=r.height,y={x:u,y:c,width:p,height:g};return o&&(y.framebuffer=o.get()),i.gl.read(y)}),(0,Ne.Z)(this,"getViewportSize",function(){return{width:i.gl._gl.drawingBufferWidth,height:i.gl._gl.drawingBufferHeight}}),(0,Ne.Z)(this,"getContainer",function(){var r;return(r=i.canvas)===null||r===void 0?void 0:r.parentElement}),(0,Ne.Z)(this,"getCanvas",function(){return i.canvas}),(0,Ne.Z)(this,"getGLContext",function(){return i.gl._gl}),(0,Ne.Z)(this,"destroy",function(){var r;i.canvas=null,(r=i.gl)===null||r===void 0||(r=r._gl)===null||r===void 0||(r=r.getExtension("WEBGL_lose_context"))===null||r===void 0||r.loseContext(),i.gl.destroy(),i.gl=null})}return(0,st.Z)(e,[{key:"init",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u,c,p){var g=this;return nr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(this.canvas=u,!p){w.next=5;break}this.gl=p,w.next=8;break;case 5:return w.next=7,new Promise(function(O,D){rz()({canvas:g.canvas,attributes:{alpha:!0,antialias:c.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:c.preserveDrawingBuffer,stencil:c.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(X,ce){(X||!ce)&&D(X),O(ce)}})});case 7:this.gl=w.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return w.stop()}},o,this)}));function r(o,u,c){return i.apply(this,arguments)}return r}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(r){return!!this.getGLContext().getExtension(r)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var r=this.getGLContext();r.disable(r.CULL_FACE)}},{key:"setDirty",value:function(r){this.isDirty=r}},{key:"getDirty",value:function(){return this.isDirty}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}())||fN),yZ=function(){function e(i,r){(0,Pt.Z)(this,e);var o=r.buffer,u=r.offset,c=r.stride,p=r.normalized,g=r.size,y=r.divisor,w=r.shaderLocation;this.buffer=o,this.attribute={shaderLocation:w,buffer:o.get(),offset:u||0,stride:c||0,normalized:p||!1,divisor:y||0},g&&(this.attribute.size=g)}return(0,st.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),d0,om,gx,VE,HE,ig,RR,Jy,Rf,ag,og,IR=(d0={},(0,Ne.Z)(d0,yt.FLOAT,Float32Array),(0,Ne.Z)(d0,yt.UNSIGNED_BYTE,Uint8Array),(0,Ne.Z)(d0,yt.SHORT,Int16Array),(0,Ne.Z)(d0,yt.UNSIGNED_SHORT,Uint16Array),(0,Ne.Z)(d0,yt.INT,Int32Array),(0,Ne.Z)(d0,yt.UNSIGNED_INT,Uint32Array),d0),_Z=(om={},(0,Ne.Z)(om,yt.POINTS,ql.POINTS),(0,Ne.Z)(om,yt.LINES,ql.LINES),(0,Ne.Z)(om,yt.LINE_LOOP,ql.LINES),(0,Ne.Z)(om,yt.LINE_STRIP,ql.LINE_STRIP),(0,Ne.Z)(om,yt.TRIANGLES,ql.TRIANGLES),(0,Ne.Z)(om,yt.TRIANGLE_FAN,ql.TRIANGLES),(0,Ne.Z)(om,yt.TRIANGLE_STRIP,ql.TRIANGLE_STRIP),om),xZ=(gx={},(0,Ne.Z)(gx,1,qr.F32_R),(0,Ne.Z)(gx,2,qr.F32_RG),(0,Ne.Z)(gx,3,qr.F32_RGB),(0,Ne.Z)(gx,4,qr.F32_RGBA),gx),bZ=(VE={},(0,Ne.Z)(VE,yt.STATIC_DRAW,gv.STATIC),(0,Ne.Z)(VE,yt.DYNAMIC_DRAW,gv.DYNAMIC),(0,Ne.Z)(VE,yt.STREAM_DRAW,gv.DYNAMIC),VE),hN=(HE={},(0,Ne.Z)(HE,yt.REPEAT,Rh.REPEAT),(0,Ne.Z)(HE,yt.CLAMP_TO_EDGE,Rh.CLAMP_TO_EDGE),(0,Ne.Z)(HE,yt.MIRRORED_REPEAT,Rh.MIRRORED_REPEAT),HE),SZ=(ig={},(0,Ne.Z)(ig,yt.NEVER,wo.NEVER),(0,Ne.Z)(ig,yt.ALWAYS,wo.ALWAYS),(0,Ne.Z)(ig,yt.LESS,wo.LESS),(0,Ne.Z)(ig,yt.LEQUAL,wo.LEQUAL),(0,Ne.Z)(ig,yt.GREATER,wo.GREATER),(0,Ne.Z)(ig,yt.GEQUAL,wo.GEQUAL),(0,Ne.Z)(ig,yt.EQUAL,wo.EQUAL),(0,Ne.Z)(ig,yt.NOTEQUAL,wo.NOTEQUAL),ig),EZ=(RR={},(0,Ne.Z)(RR,yt.FRONT,op.FRONT),(0,Ne.Z)(RR,yt.BACK,op.BACK),RR),pN=(Jy={},(0,Ne.Z)(Jy,yt.FUNC_ADD,Xc.ADD),(0,Ne.Z)(Jy,yt.MIN_EXT,Xc.MIN),(0,Ne.Z)(Jy,yt.MAX_EXT,Xc.MAX),(0,Ne.Z)(Jy,yt.FUNC_SUBTRACT,Xc.SUBSTRACT),(0,Ne.Z)(Jy,yt.FUNC_REVERSE_SUBTRACT,Xc.REVERSE_SUBSTRACT),Jy),PR=(Rf={},(0,Ne.Z)(Rf,yt.ZERO,No.ZERO),(0,Ne.Z)(Rf,yt.ONE,No.ONE),(0,Ne.Z)(Rf,yt.SRC_COLOR,No.SRC),(0,Ne.Z)(Rf,yt.ONE_MINUS_SRC_COLOR,No.ONE_MINUS_SRC),(0,Ne.Z)(Rf,yt.SRC_ALPHA,No.SRC_ALPHA),(0,Ne.Z)(Rf,yt.ONE_MINUS_SRC_ALPHA,No.ONE_MINUS_SRC_ALPHA),(0,Ne.Z)(Rf,yt.DST_COLOR,No.DST),(0,Ne.Z)(Rf,yt.ONE_MINUS_DST_COLOR,No.ONE_MINUS_DST),(0,Ne.Z)(Rf,yt.DST_ALPHA,No.DST_ALPHA),(0,Ne.Z)(Rf,yt.ONE_MINUS_DST_ALPHA,No.ONE_MINUS_DST_ALPHA),(0,Ne.Z)(Rf,yt.CONSTANT_COLOR,No.CONST),(0,Ne.Z)(Rf,yt.ONE_MINUS_CONSTANT_COLOR,No.ONE_MINUS_CONSTANT),(0,Ne.Z)(Rf,yt.CONSTANT_ALPHA,No.CONST),(0,Ne.Z)(Rf,yt.ONE_MINUS_CONSTANT_ALPHA,No.ONE_MINUS_CONSTANT),(0,Ne.Z)(Rf,yt.SRC_ALPHA_SATURATE,No.SRC_ALPHA_SATURATE),Rf),mx=(ag={},(0,Ne.Z)(ag,yt.REPLACE,fl.REPLACE),(0,Ne.Z)(ag,yt.KEEP,fl.KEEP),(0,Ne.Z)(ag,yt.ZERO,fl.ZERO),(0,Ne.Z)(ag,yt.INVERT,fl.INVERT),(0,Ne.Z)(ag,yt.INCR,fl.INCREMENT_CLAMP),(0,Ne.Z)(ag,yt.DECR,fl.DECREMENT_CLAMP),(0,Ne.Z)(ag,yt.INCR_WRAP,fl.INCREMENT_WRAP),(0,Ne.Z)(ag,yt.DECR_WRAP,fl.DECREMENT_WRAP),ag),wZ=(og={},(0,Ne.Z)(og,yt.ALWAYS,wo.ALWAYS),(0,Ne.Z)(og,yt.EQUAL,wo.EQUAL),(0,Ne.Z)(og,yt.GEQUAL,wo.GEQUAL),(0,Ne.Z)(og,yt.GREATER,wo.GREATER),(0,Ne.Z)(og,yt.LEQUAL,wo.LEQUAL),(0,Ne.Z)(og,yt.LESS,wo.LESS),(0,Ne.Z)(og,yt.NEVER,wo.NEVER),(0,Ne.Z)(og,yt.NOTEQUAL,wo.NOTEQUAL),og),CZ={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function OR(e){return Object.prototype.toString.call(e)in CZ}var AZ=function(){function e(i,r){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"isDestroyed",!1);var o=r.data,u=r.usage,c=r.type,p=r.isUBO,g=r.label,y;OR(o)?y=o:y=new IR[this.type||yt.FLOAT](o),this.type=c,this.size=y.byteLength,this.buffer=i.createBuffer({viewOrSize:y,usage:p?uu.UNIFORM:uu.VERTEX,hint:bZ[u||yt.STATIC_DRAW]}),g&&i.setResourceName(this.buffer,g)}return(0,st.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}},{key:"subData",value:function(r){var o=r.data,u=r.offset,c;OR(o)?c=o:c=new IR[this.type||yt.FLOAT](o),this.buffer.setSubData(u,new Uint8Array(c.buffer))}}]),e}(),TZ=function(){function e(i,r){(0,Pt.Z)(this,e);var o=r.data,u=r.type,c=r.count,p=c===void 0?0:c,g;OR(o)?g=o:g=new IR[this.type||yt.UNSIGNED_INT](o),this.type=u,this.count=p,this.indexBuffer=i.createBuffer({viewOrSize:g,usage:uu.INDEX})}return(0,st.Z)(e,[{key:"get",value:function(){return this.indexBuffer}},{key:"subData",value:function(r){var o=r.data,u;OR(o)?u=o:u=new IR[this.type||yt.UNSIGNED_INT](o),this.indexBuffer.setSubData(0,new Uint8Array(u.buffer))}},{key:"destroy",value:function(){this.indexBuffer.destroy()}}]),e}();function dN(e){return!!(e&&e.texture)}var vN=function(){function e(i,r){(0,Pt.Z)(this,e),(0,Ne.Z)(this,"isDestroy",!1);var o=r.data,u=r.type,c=u===void 0?yt.UNSIGNED_BYTE:u,p=r.width,g=r.height,y=r.flipY,w=y===void 0?!1:y,O=r.format,D=O===void 0?yt.RGBA:O,V=r.wrapS,X=V===void 0?yt.CLAMP_TO_EDGE:V,ce=r.wrapT,de=ce===void 0?yt.CLAMP_TO_EDGE:ce,we=r.aniso,je=we===void 0?0:we,ht=r.alignment,_t=ht===void 0?1:ht,Dt=r.usage,Yt=Dt===void 0?Wf.SAMPLED:Dt,ir=r.mipmap,sr=ir===void 0?!1:ir,Tr=r.mag,Vr=Tr===void 0?yt.NEAREST:Tr,sn=r.min,ln=sn===void 0?yt.NEAREST:sn;this.width=p,this.height=g;var Zn=qr.U8_RGBA_RT;if(c===yt.UNSIGNED_BYTE&&D===yt.RGBA)Zn=qr.U8_RGBA_RT;else if(c===yt.UNSIGNED_BYTE&&D===yt.LUMINANCE)Zn=qr.U8_LUMINANCE;else if(c===yt.FLOAT&&D===yt.RGB)Zn=qr.F32_RGB;else if(c===yt.FLOAT&&D===yt.RGBA)Zn=qr.F32_RGBA;else if(c===yt.FLOAT&&D===yt.RED)Zn=qr.F32_R;else throw new Error("create texture error, type: ".concat(c,", format: ").concat(D));this.texture=i.createTexture({format:Zn,width:p,height:g,usage:Yt===Wf.SAMPLED?Mf.SAMPLED:Mf.RENDER_TARGET,pixelStore:{unpackFlipY:w,packAlignment:_t},mipLevelCount:Yt===Wf.RENDER_TARGET||sr?1:0}),o&&this.texture.setImageData([o]),this.sampler=i.createSampler({addressModeU:hN[X],addressModeV:hN[de],minFilter:ln===yt.NEAREST?wl.POINT:wl.BILINEAR,magFilter:Vr===yt.NEAREST?wl.POINT:wl.BILINEAR,mipmapFilter:Ac.NO_MIP,maxAnisotropy:je})}return(0,st.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(r){var o=r.data;this.texture.setImageData([o])}},{key:"bind",value:function(){}},{key:"resize",value:function(r){var o=r.width,u=r.height;this.width=o,this.height=u}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var r;(r=this.texture)===null||r===void 0||r.destroy()}this.isDestroy=!0}}]),e}(),gN=function(){function e(i,r){(0,Pt.Z)(this,e),this.device=i,this.options=r,this.createColorRenderTarget(),this.createDepthRenderTarget()}return(0,st.Z)(e,[{key:"createColorRenderTarget",value:function(){var r=this.options,o=r.width,u=r.height,c=r.color;c&&(dN(c)?(this.colorTexture=c.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=c.width,this.height=c.height):o&&u&&(this.colorTexture=this.device.createTexture({format:qr.U8_RGBA_RT,usage:Mf.RENDER_TARGET,width:o,height:u}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=o,this.height=u))}},{key:"createDepthRenderTarget",value:function(){var r=this.options,o=r.width,u=r.height,c=r.depth;c&&(dN(c)?(this.depthTexture=c.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=c.width,this.height=c.height):o&&u&&(this.depthTexture=this.device.createTexture({format:qr.D24_S8,usage:Mf.RENDER_TARGET,width:o,height:u}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=o,this.height=u))}},{key:"get",value:function(){return this.colorRenderTarget}},{key:"destroy",value:function(){var r,o;(r=this.colorRenderTarget)===null||r===void 0||r.destroy(),(o=this.depthRenderTarget)===null||o===void 0||o.destroy()}},{key:"resize",value:function(r){var o=r.width,u=r.height;(this.width!==o||this.height!==u)&&(this.destroy(),this.options.width=o,this.options.height=u,this.createColorRenderTarget(),this.createDepthRenderTarget())}}]),e}(),MZ=Ta.isPlainObject,RZ=Ta.isTypedArray,IZ=function(){function e(i,r,o){var u=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"destroyed",!1),(0,Ne.Z)(this,"uniforms",{}),(0,Ne.Z)(this,"vertexBuffers",[]),this.device=i,this.options=r,this.service=o;var c=r.vs,p=r.fs,g=r.attributes,y=r.uniforms,w=r.count,O=r.elements;this.options=r;var D=i.createProgram({vertex:{glsl:c},fragment:{glsl:p}});this.program=D,y&&(this.uniforms=this.extractUniforms(y));var V=[],X=0;Object.keys(g).forEach(function(de){var we=g[de],je=we.get();u.vertexBuffers.push(je.get());var ht=we.attribute,_t=ht.offset,Dt=_t===void 0?0:_t,Yt=ht.stride,ir=Yt===void 0?0:Yt,sr=ht.size,Tr=sr===void 0?1:sr,Vr=ht.divisor,sn=Vr===void 0?0:Vr,ln=ht.shaderLocation,Zn=ln===void 0?0:ln;V.push({arrayStride:ir||Tr*4,stepMode:Ky.VERTEX,attributes:[{format:xZ[Tr],shaderLocation:Zn,offset:Dt,divisor:sn}]}),X=je.size/Tr}),w||(this.options.count=X),O&&(this.indexBuffer=O.get());var ce=i.createInputLayout({vertexBufferDescriptors:V,indexBufferFormat:O?qr.U32_R:null,program:D});this.inputLayout=ce,this.pipeline=this.createPipeline(r)}return(0,st.Z)(e,[{key:"createPipeline",value:function(r,o){var u=r.primitive,c=u===void 0?yt.TRIANGLES:u,p=r.depth,g=r.cull,y=r.blend,w=r.stencil,O=this.initDepthDrawParams({depth:p}),D=!!(O&&O.enable),V=this.initCullDrawParams({cull:g}),X=!!(V&&V.enable),ce=this.getBlendDrawParams({blend:y}),de=!!(ce&&ce.enable),we=this.getStencilDrawParams({stencil:w}),je=!!(we&&we.enable);return this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:_Z[c],colorAttachmentFormats:[qr.U8_RGBA_RT],depthStencilAttachmentFormat:qr.D24_S8,megaStateDescriptor:{attachmentsState:[o?{channelWriteMask:Yc.ALL,rgbBlendState:{blendMode:Xc.ADD,blendSrcFactor:No.ONE,blendDstFactor:No.ZERO},alphaBlendState:{blendMode:Xc.ADD,blendSrcFactor:No.ONE,blendDstFactor:No.ZERO}}:{channelWriteMask:je&&we.opFront.zpass===fl.REPLACE?Yc.NONE:Yc.ALL,rgbBlendState:{blendMode:de&&ce.equation.rgb||Xc.ADD,blendSrcFactor:de&&ce.func.srcRGB||No.SRC_ALPHA,blendDstFactor:de&&ce.func.dstRGB||No.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:de&&ce.equation.alpha||Xc.ADD,blendSrcFactor:de&&ce.func.srcAlpha||No.ONE,blendDstFactor:de&&ce.func.dstAlpha||No.ONE}}],blendConstant:de?L5:void 0,depthWrite:D,depthCompare:D&&O.func||wo.LESS,cullMode:X&&V.face||op.NONE,stencilWrite:je,stencilFront:{compare:je?we.func.cmp:wo.ALWAYS,passOp:we.opFront.zpass},stencilBack:{compare:je?we.func.cmp:wo.ALWAYS,passOp:we.opBack.zpass}}})}},{key:"updateAttributesAndElements",value:function(){}},{key:"updateAttributes",value:function(){}},{key:"addUniforms",value:function(r){this.uniforms=(0,ne.Z)((0,ne.Z)({},this.uniforms),this.extractUniforms(r))}},{key:"draw",value:function(r,o){var u=this,c=(0,ne.Z)((0,ne.Z)({},this.options),r),p=c.count,g=p===void 0?0:p,y=c.instances,w=c.elements,O=c.uniforms,D=O===void 0?{}:O,V=c.uniformBuffers,X=c.textures;this.uniforms=(0,ne.Z)((0,ne.Z)({},this.uniforms),this.extractUniforms(D));var ce=this.service,de=ce.renderPass,we=ce.currentFramebuffer,je=ce.width,ht=ce.height;if(this.pipeline=this.createPipeline(c,o),de.setViewport(0,0,(we==null?void 0:we.width)||je,(we==null?void 0:we.height)||ht),de.setPipeline(this.pipeline),de.setStencilReference(1),de.setVertexInput(this.inputLayout,this.vertexBuffers.map(function(Dt){return{buffer:Dt}}),w?{buffer:this.indexBuffer,offset:0}:null),V&&(this.bindings=this.device.createBindings({pipeline:this.pipeline,uniformBufferBindings:V.map(function(Dt,Yt){var ir=Dt;return{binding:Yt,buffer:ir.get(),size:ir.size}}),samplerBindings:X==null?void 0:X.map(function(Dt){return{texture:Dt.texture,sampler:Dt.sampler}})})),this.bindings&&(de.setBindings(this.bindings),Object.keys(this.uniforms).forEach(function(Dt){var Yt=u.uniforms[Dt];Yt instanceof vN?u.uniforms[Dt]=Yt.get():Yt instanceof gN&&(u.uniforms[Dt]=Yt.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),w){var _t=w.count;_t===0?de.draw(g,y):de.drawIndexed(_t,y)}else de.draw(g,y)}},{key:"destroy",value:function(){var r,o,u;this.program.destroy(),(r=this.vertexBuffers)===null||r===void 0||r.forEach(function(c){return c.destroy()}),(o=this.indexBuffer)===null||o===void 0||o.destroy(),(u=this.bindings)===null||u===void 0||u.destroy(),this.inputLayout.destroy(),this.pipeline.destroy(),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(r){var o=r.depth;if(o)return{enable:o.enable===void 0?!0:!!o.enable,mask:o.mask===void 0?!0:!!o.mask,func:SZ[o.func||yt.LESS],range:o.range||[0,1]}}},{key:"getBlendDrawParams",value:function(r){var o=r.blend,u=o||{},c=u.enable,p=u.func,g=u.equation,y=u.color,w=y===void 0?[0,0,0,0]:y;return{enable:!!c,func:{srcRGB:PR[p&&p.srcRGB||yt.SRC_ALPHA],srcAlpha:PR[p&&p.srcAlpha||yt.SRC_ALPHA],dstRGB:PR[p&&p.dstRGB||yt.ONE_MINUS_SRC_ALPHA],dstAlpha:PR[p&&p.dstAlpha||yt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:pN[g&&g.rgb||yt.FUNC_ADD],alpha:pN[g&&g.alpha||yt.FUNC_ADD]},color:w}}},{key:"getStencilDrawParams",value:function(r){var o=r.stencil,u=o||{},c=u.enable,p=u.mask,g=p===void 0?-1:p,y=u.func,w=y===void 0?{cmp:yt.ALWAYS,ref:0,mask:-1}:y,O=u.opFront,D=O===void 0?{fail:yt.KEEP,zfail:yt.KEEP,zpass:yt.KEEP}:O,V=u.opBack,X=V===void 0?{fail:yt.KEEP,zfail:yt.KEEP,zpass:yt.KEEP}:V;return{enable:!!c,mask:g,func:(0,ne.Z)((0,ne.Z)({},w),{},{cmp:wZ[w.cmp]}),opFront:{fail:mx[D.fail],zfail:mx[D.zfail],zpass:mx[D.zpass]},opBack:{fail:mx[X.fail],zfail:mx[X.zfail],zpass:mx[X.zpass]}}}},{key:"initCullDrawParams",value:function(r){var o=r.cull;if(o){var u=o.enable,c=o.face,p=c===void 0?yt.BACK:c;return{enable:!!u,face:EZ[p]}}}},{key:"extractUniforms",value:function(r){var o=this,u={};return Object.keys(r).forEach(function(c){o.extractUniformsRecursively(c,r[c],u,"")}),u}},{key:"extractUniformsRecursively",value:function(r,o,u,c){var p=this;if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||RZ(o)||o===""||"resize"in o){u["".concat(c&&c+".").concat(r)]=o;return}MZ(o)&&Object.keys(o).forEach(function(g){p.extractUniformsRecursively(g,o[g],u,"".concat(c&&c+".").concat(r))}),Array.isArray(o)&&o.forEach(function(g,y){Object.keys(g).forEach(function(w){p.extractUniformsRecursively(w,g[w],u,"".concat(c&&c+".").concat(r,"[").concat(y,"]"))})})}}]),e}();function PZ(e){return typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext?!0:!!(e&&e._version===2)}var mN,yN,OZ=(mN=(0,It.b2)(),mN(yN=function(){function e(){var i=this;(0,Pt.Z)(this,e),(0,Ne.Z)(this,"uniformBuffers",[]),(0,Ne.Z)(this,"queryVerdorInfo",function(){return i.device.queryVendorInfo().platformString}),(0,Ne.Z)(this,"createModel",function(r){return new IZ(i.device,r,i)}),(0,Ne.Z)(this,"createAttribute",function(r){return new yZ(i.device,r)}),(0,Ne.Z)(this,"createBuffer",function(r){return new AZ(i.device,r)}),(0,Ne.Z)(this,"createElements",function(r){return new TZ(i.device,r)}),(0,Ne.Z)(this,"createTexture2D",function(r){return new vN(i.device,r)}),(0,Ne.Z)(this,"createFramebuffer",function(r){return new gN(i.device,r)}),(0,Ne.Z)(this,"useFramebuffer",function(r,o){i.currentFramebuffer=r,i.beginFrame(),o(),i.endFrame(),i.currentFramebuffer=null}),(0,Ne.Z)(this,"clear",function(r){var o=r.color,u=r.depth,c=r.stencil,p=r.framebuffer,g=p===void 0?null:p;g&&(g.clearOptions={color:o,depth:u,stencil:c})}),(0,Ne.Z)(this,"viewport",function(r){var o=r.width,u=r.height;i.width=o,i.height=u}),(0,Ne.Z)(this,"readPixels",function(r){var o=r.framebuffer,u=r.x,c=r.y,p=r.width,g=r.height,y=i.device.createReadback(),w=o.colorTexture;return y.readTextureSync(w,u,c,p,g,new Uint8Array(p*g*4))}),(0,Ne.Z)(this,"getViewportSize",function(){return{width:i.width,height:i.height}}),(0,Ne.Z)(this,"getContainer",function(){var r;return(r=i.canvas)===null||r===void 0?void 0:r.parentElement}),(0,Ne.Z)(this,"getCanvas",function(){return i.canvas}),(0,Ne.Z)(this,"getGLContext",function(){return i.device.gl}),(0,Ne.Z)(this,"destroy",function(){var r;i.canvas=null,(r=i.uniformBuffers)===null||r===void 0||r.forEach(function(o){o.destroy()}),i.device.destroy()})}return(0,st.Z)(e,[{key:"init",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u,c){var p,g,y,w,O;return nr().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return p=c.enableWebGPU,g=c.shaderCompilerPath,this.canvas=u,y=p?new hZ({shaderCompilerPath:g}):new EU({targets:["webgl2","webgl1"],onContextLost:function(ce){console.warn("context lost",ce)},onContextCreationError:function(ce){console.warn("context creation error",ce)},onContextRestored:function(ce){console.warn("context restored",ce)}}),V.next=5,y.createSwapChain(u);case 5:w=V.sent,w.configureSwapChain(u.width,u.height),this.device=w.getDevice(),this.swapChain=w,this.currentFramebuffer=null,O=this.device.gl,this.extensionObject={OES_texture_float:!PZ(O)&&this.device.OES_texture_float},this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:qr.U8_RGBA_RT,width:u.width,height:u.height,usage:Mf.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:qr.D24_S8,width:u.width,height:u.height,usage:Mf.RENDER_TARGET}));case 14:case"end":return V.stop()}},o,this)}));function r(o,u){return i.apply(this,arguments)}return r}()},{key:"beginFrame",value:function(){var r=this.currentFramebuffer,o=this.swapChain,u=this.mainColorRT,c=this.mainDepthRT,p=o.getOnscreenTexture(),g=r?r.colorRenderTarget:u,y=r?null:p,w=r?r.depthRenderTarget:c,O=(r==null?void 0:r.clearOptions)||{},D=O.color,V=D===void 0?[0,0,0,0]:D,X=O.depth,ce=X===void 0?1:X,de=O.stencil,we=de===void 0?0:de,je=g?kE(V[0]*255,V[1]*255,V[2]*255,V[3]):L5,ht=w?ce:void 0,_t=w?we:void 0,Dt=this.device.createRenderPass({colorAttachment:[g],colorResolveTo:[y],colorClearColor:[je],depthStencilAttachment:w,depthClearValue:ht,stencilClearValue:_t});this.renderPass=Dt}},{key:"endFrame",value:function(){this.device.submitPass(this.renderPass)}},{key:"getPointSizeRange",value:function(){var r=this.device.gl;return r.getParameter(r.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(r){return!!this.getGLContext().getExtension(r)}},{key:"setState",value:function(){}},{key:"setBaseState",value:function(){}},{key:"setCustomLayerDefaults",value:function(){}},{key:"setDirty",value:function(r){this.isDirty=r}},{key:"getDirty",value:function(){return this.isDirty}}]),e}())||yN);function kZ(e){var i=LZ();return function(){var o=(0,Ft.Z)(e),u;if(i){var c=(0,Ft.Z)(this).constructor;u=Reflect.construct(o,arguments,c)}else u=o.apply(this,arguments);return(0,Fr.Z)(this,u)}}function LZ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var j5=["selectstart","selecting","selectend"],DZ=function(e){(0,yr.Z)(r,e);var i=kZ(r);function r(o){var u,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,Pt.Z)(this,r),u=i.call(this),(0,Ne.Z)((0,Ar.Z)(u),"isEnable",!1),(0,Ne.Z)((0,Ar.Z)(u),"onDragStart",function(p){u.box.style.display="block",u.startEvent=u.endEvent=p,u.syncBoxBound(),u.emit("selectstart",u.getLngLatBox(),u.startEvent,u.endEvent)}),(0,Ne.Z)((0,Ar.Z)(u),"onDragging",function(p){u.endEvent=p,u.syncBoxBound(),u.emit("selecting",u.getLngLatBox(),u.startEvent,u.endEvent)}),(0,Ne.Z)((0,Ar.Z)(u),"onDragEnd",function(p){u.endEvent=p,u.box.style.display="none",u.emit("selectend",u.getLngLatBox(),u.startEvent,u.endEvent)}),u.scene=o,u.options=c,u}return(0,st.Z)(r,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var u=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var c=Gs("div",void 0,this.container);c.classList.add("l7-select-box"),u&&c.classList.add(u),c.style.display="none",this.box=c}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var u=this.startEvent,c=u.x,p=u.y,g=this.endEvent,y=g.x,w=g.y,O=Math.min(c,y),D=Math.min(p,w),V=Math.abs(c-y),X=Math.abs(p-w);this.box.style.top="".concat(D,"px"),this.box.style.left="".concat(O,"px"),this.box.style.width="".concat(V,"px"),this.box.style.height="".concat(X,"px")}},{key:"getLngLatBox",value:function(){var u=this.startEvent.lngLat,c=u.lng,p=u.lat,g=this.endEvent.lngLat,y=g.lng,w=g.lat;return Nl([[c,p],[y,w]])}}]),r}(xs.EventEmitter),FZ=function(){function e(i){(0,Pt.Z)(this,e);var r=i.id,o=i.map,u=i.canvas,c=i.renderer,p=c===void 0?"regl":c,g=bI();this.container=g,o.setContainer(g,r,u),g.bind(Xt.IRendererService).to(p==="regl"?mZ:OZ).inSingletonScope(),this.sceneService=g.get(Xt.ISceneService),this.mapService=g.get(Xt.IMapService),this.iconService=g.get(Xt.IIconService),this.fontService=g.get(Xt.IFontService),this.controlService=g.get(Xt.IControlService),this.layerService=g.get(Xt.ILayerService),this.debugService=g.get(Xt.IDebugService),this.debugService.setEnable(i.debug),this.markerService=g.get(Xt.IMarkerService),this.interactionService=g.get(Xt.IInteractionService),this.popupService=g.get(Xt.IPopupService),this.boxSelect=new DZ(this,{}),this.initComponent(r),this.sceneService.init(i),this.initControl()}return(0,st.Z)(e,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u){return nr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.sceneService.exportPng(u));case 1:case"end":return p.stop()}},o,this)}));function r(o){return i.apply(this,arguments)}return r}()},{key:"exportMap",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u){return nr().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.sceneService.exportPng(u));case 1:case"end":return p.stop()}},o,this)}));function r(o){return i.apply(this,arguments)}return r}()},{key:"registerRenderService",value:function(r){var o=this;if(this.sceneService.loaded){var u=new r(this);u.init()}else this.on("loaded",function(){var c=new r(o);c.init()})}},{key:"setBgColor",value:function(r){this.mapService.setBgColor(r)}},{key:"addLayer",value:function(r){var o=this,u=iy(this.container);if(r.setContainer(u,this.container),this.sceneService.addLayer(r),r.inited){var c=this.initMask(r);this.addMask(c,r.id)}else r.on("inited",function(){var p=o.initMask(r);o.addMask(p,r.id)})}},{key:"initMask",value:function(r){var o=r.getLayerConfig(),u=o.mask,c=o.maskfence,p=o.maskColor,g=p===void 0?"#000":p,y=o.maskOpacity,w=y===void 0?0:y;if(!(!u||!c)){var O=new _A().source(c).shape("fill").style({color:g,opacity:w});return O}}},{key:"addMask",value:function(r,o){if(r){var u=this.getLayer(o);if(u){var c=iy(this.container);r.setContainer(c,this.container),u.addMaskLayer(r),this.sceneService.addMask(r)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(r){return this.layerService.getLayer(r)}},{key:"getLayerByName",value:function(r){return this.layerService.getLayerByName(r)}},{key:"removeLayer",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u,c){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.layerService.remove(u,c);case 2:case"end":return g.stop()}},o,this)}));function r(o,u){return i.apply(this,arguments)}return r}()},{key:"removeAllLayer",value:function(){var i=(0,Sn.Z)(nr().mark(function o(){return nr().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.layerService.removeAllLayers();case 2:case"end":return c.stop()}},o,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(r){this.layerService.setEnableRender(r)}},{key:"addIconFont",value:function(r,o){this.fontService.addIconFont(r,o)}},{key:"addIconFonts",value:function(r){var o=this;r.forEach(function(u){var c=(0,Zi.Z)(u,2),p=c[0],g=c[1];o.fontService.addIconFont(p,g)})}},{key:"addFontFace",value:function(r,o){var u=this;this.fontService.once("fontloaded",function(c){u.emit("fontloaded",c)}),this.fontService.addFontFace(r,o)}},{key:"addImage",value:function(){var i=(0,Sn.Z)(nr().mark(function o(u,c){return nr().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.iconService.addImage(u,c);case 2:case"end":return g.stop()}},o,this)}));function r(o,u){return i.apply(this,arguments)}return r}()},{key:"hasImage",value:function(r){return this.iconService.hasImage(r)}},{key:"removeImage",value:function(r){this.iconService.removeImage(r)}},{key:"addIconFontGlyphs",value:function(r,o){this.fontService.addIconGlyphs(o)}},{key:"addControl",value:function(r){this.controlService.addControl(r,this.container)}},{key:"removeControl",value:function(r){this.controlService.removeControl(r)}},{key:"getControlByName",value:function(r){return this.controlService.getControlByName(r)}},{key:"addMarker",value:function(r){this.markerService.addMarker(r)}},{key:"addMarkerLayer",value:function(r){this.markerService.addMarkerLayer(r)}},{key:"removeMarkerLayer",value:function(r){this.markerService.removeMarkerLayer(r)}},{key:"removeAllMarkers",value:function(){this.markerService.removeAllMarkers()}},{key:"removeAllMakers",value:function(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(r){this.popupService.addPopup(r)}},{key:"removePopup",value:function(r){this.popupService.removePopup(r)}},{key:"on",value:function(r,o){if(j5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.on(r,o)}else V_.includes(r)?this.sceneService.on(r,o):this.mapService.on(r,o)}},{key:"once",value:function(r,o){if(j5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.once(r,o)}else V_.includes(r)?this.sceneService.once(r,o):this.mapService.once(r,o)}},{key:"emit",value:function(r,o){V_.indexOf(r)===-1?this.mapService.on(r,o):this.sceneService.emit(r,o)}},{key:"off",value:function(r,o){if(j5.includes(r)){var u;(u=this.boxSelect)===null||u===void 0||u.off(r,o)}else V_.includes(r)?this.sceneService.off(r,o):this.mapService.off(r,o)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(r){return this.mapService.getCenter(r)}},{key:"setCenter",value:function(r,o){return this.mapService.setCenter(r,o)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(r){return this.mapService.setPitch(r)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(r){this.mapService.setRotation(r)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(r){this.mapService.panTo(r)}},{key:"panBy",value:function(r,o){this.mapService.panBy(r,o)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(r){this.mapService.setZoom(r)}},{key:"fitBounds",value:function(r,o){var u=this.sceneService.getSceneConfig(),c=u.fitBoundsOptions,p=u.animate;this.mapService.fitBounds(r,o||(0,ne.Z)((0,ne.Z)({},c),{},{animate:p}))}},{key:"setZoomAndCenter",value:function(r,o){this.mapService.setZoomAndCenter(r,o)}},{key:"setMapStyle",value:function(r){this.mapService.setMapStyle(r)}},{key:"setMapStatus",value:function(r){this.mapService.setMapStatus(r)}},{key:"pixelToLngLat",value:function(r){return this.mapService.pixelToLngLat(r)}},{key:"lngLatToPixel",value:function(r){return this.mapService.lngLatToPixel(r)}},{key:"containerToLngLat",value:function(r){return this.mapService.containerToLngLat(r)}},{key:"lngLatToContainer",value:function(r){return this.mapService.lngLatToContainer(r)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(r,o){this.container.bind(Xt.IPostProcessingPass).to(r).whenTargetNamed(o)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var r=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.boxSelect.enable(),o&&this.boxSelect.once("selectend",function(){r.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getProtocol",value:function(r){return Wn.REGISTERED_PROTOCOLS[r]}},{key:"startAnimate",value:function(){this.layerService.startAnimate()}},{key:"stopAnimate",value:function(){this.layerService.stopAnimate()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(r){this.controlService.init({container:rh(r)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var r=this.sceneService.getSceneConfig(),o=r.logoVisible,u=r.logoPosition;o&&this.addControl(new IP({position:u}))}}],[{key:"addProtocol",value:function(r,o){Wn.REGISTERED_PROTOCOLS[r]=o}},{key:"removeProtocol",value:function(r){delete Wn.REGISTERED_PROTOCOLS[r]}}]),e}(),$j="2.20.13",kR=k(90494),Ph=k(45442),W5={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`},G5="l7plot-legend l7plot-legend__category",$5="l7plot-legend__title",X5="l7plot-legend__category-list",_N="l7plot-legend__list-item",xN="l7plot-legend__category-marker",bN="l7plot-legend__category-value",BZ='<div class="'.concat(G5,`">
  <div class="`).concat($5,`"></div>
  <ul class="`).concat(X5,`"></ul>
</div>`),SN='<li class="'.concat(_N,`" data-index={index}>
  <span class="`).concat(xN,`" style="background:{color}"></span>
  <span class="`).concat(bN,`">{value}</span>
</li>`),v0,NZ=(v0={},v0[G5]={visibility:"visible",zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontFamily:W5.fontFamily,padding:"10px 10px 6px 10px",lineHeight:1,fontSize:"12px"},v0[$5]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},v0[X5]={margin:"0px",listStyleType:"none",padding:"0px"},v0[_N]={listStyleType:"none",display:"flex",alignItems:"center",marginBottom:"2px"},v0[xN]={width:"10px",height:"10px"},v0[bN]={paddingLeft:"8px"},v0),zZ=k(6056);function UZ(e,i){return!!e.className.match(new RegExp("(\\s|^)".concat(i,"(\\s|$)")))}function Y5(e){for(var i=e.childNodes,r=i.length,o=r-1;o>=0;o--)e.removeChild(i[o])}var K5=function(){function e(i){this.destroyed=!1,this.options=(0,G.b$)({},this.getDefaultOptions(),i),this.container=this.initContainer(),this.initDom(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible(),this.render()}return e.prototype.getDefaultOptions=function(){return{name:"",containerTpl:"<div></div>",visible:!0,capture:!0,domStyles:{}}},e.prototype.getContainer=function(){return this.container},e.prototype.getParentContainer=function(){var i=this.options.parent,r;if(!i)return r;if((0,G.HD)(i)){var o=document.getElementById(i);if(o)r=o;else throw new Error("No parent id ".concat(i))}else r=i;return r},e.prototype.initContainer=function(){var i=this.createDom(this.options.containerTpl),r=this.getParentContainer();return r&&r.appendChild(i),i},e.prototype.initVisible=function(){this.options.visible?this.show():this.hide()},e.prototype.initCapture=function(){this.setCapture(this.options.capture)},e.prototype.update=function(i){this.options=(0,G.b$)({},this.options,i),this.updateInner(i),this.afterUpdate(i)},e.prototype.updateInner=function(i){i.domStyles&&this.applyStyles()},e.prototype.afterUpdate=function(i){i.capture&&this.setCapture(i.capture)},e.prototype.setCapture=function(i){var r=this.container,o=i?"auto":"none";r.style.pointerEvents=o},e.prototype.applyStyles=function(){var i=this.options.domStyles;if(i){var r=this.container;this.applyChildrenStyles(r,i);var o=this.options.className;if(o&&UZ(r,o)){var u=i[o];(0,Ph.Z)(r,u)}}},e.prototype.applyChildrenStyles=function(i,r){(0,G.S6)(r,function(o,u){var c=i.getElementsByClassName(u);(0,G.S6)(c,function(p){(0,Ph.Z)(p,o)})})},e.prototype.applyStyle=function(i,r){var o=this.options.domStyles;o&&(0,Ph.Z)(r,o[i])},e.prototype.createDom=function(i){return i===void 0&&(i="<div></div>"),(0,zZ.Z)(i)},e.prototype.removeDom=function(){var i=this.container;i&&i.parentNode&&i.parentNode.removeChild(i)},e.prototype.destroy=function(){this.removeEvent(),this.removeDom(),this.destroyed=!0},e}(),ZZ=function(e){(0,b.ZT)(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getDefaultOptions=function(){return(0,G.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-category-legend",name:"l7plot-category-legend",title:"",items:[],containerTpl:BZ,itemTpl:SN,domStyles:NZ,className:G5})},i.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},i.prototype.initDom=function(){this.cacheDoms()},i.prototype.initEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName($5)[0],u=r.getElementsByClassName(X5)[0];this.titleDom=o,this.listDom=u},i.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderItems())},i.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,Ph.Z)(r,{visibility:"visible"})},i.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,Ph.Z)(r,{visibility:"hidden"})},i.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.items&&this.renderItems()),e.prototype.updateInner.call(this,r)},i.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},i.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.items);return(0,G.HD)(u)?o=this.createDom(u):o=u,o},i.prototype.resetTitle=function(){var r=this.options.title;r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},i.prototype.showTitle=function(){var r=this.titleDom;r&&(0,Ph.Z)(r,{display:"block"})},i.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,Ph.Z)(r,{display:"none"})},i.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},i.prototype.renderItems=function(){var r=this;this.clearItemDoms();var o=this.options.items.length>30?this.options.items.slice(0,30):this.options.items,u=this.options.itemTpl||SN,c=this.listDom;c&&(o.forEach(function(p){var g=p.value==="",y=g?"\u2014":Array.isArray(p.value)?p.value.join(" - "):p.value,w=(0,b.pi)((0,b.pi)({},p),{value:y}),O=(0,G.ng)(u,w),D=r.createDom(O);c.appendChild(D)}),this.applyChildrenStyles(c,this.options.domStyles))},i.prototype.clearItemDoms=function(){this.listDom&&Y5(this.listDom)},i.prototype.clear=function(){this.setTitle(""),this.clearItemDoms()},i}(K5),q5="l7plot-legend l7plot-legend__continue",Q5="l7plot-legend__title",EN="l7plot-legend__ribbon-container",wN="l7plot-legend__ribbon",CN="l7plot-legend__gradient-bar",J5="l7plot-legend__value-range",VZ='<div class="'.concat(q5,`">
  <div class="`).concat(Q5,`"></div>
  <div class="`).concat(EN,`"></div>
</div>`),AN='<div class="'.concat(wN,`">
  <span class="`).concat(J5,`">{min}</span>
  <div class="`).concat(CN,`" style="background-image: {backgroundImage}"></div>
  <span class="`).concat(J5,`">{max}</span>
</div>`),e_,HZ=(e_={},e_[q5]={visibility:"visible",zIndex:1,backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontFamily:W5.fontFamily,padding:"10px",lineHeight:1,fontSize:"12px"},e_[Q5]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},e_[wN]={display:"flex",alignItems:"center"},e_[CN]={width:"140px",height:"14px",margin:"0px 5px"},e_[J5]={padding:"0px"},e_),jZ=function(e){(0,b.ZT)(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getDefaultOptions=function(){return(0,G.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-continue-legend",name:"l7plot-continue-legend",title:"",containerTpl:VZ,ribbonTpl:AN,domStyles:HZ,className:q5})},i.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},i.prototype.initDom=function(){this.cacheDoms()},i.prototype.initEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(Q5)[0],u=r.getElementsByClassName(EN)[0];this.titleDom=o,this.ribbonContainerDom=u},i.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderRibbon())},i.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,Ph.Z)(r,{visibility:"visible"})},i.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,Ph.Z)(r,{visibility:"hidden"})},i.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.colors&&this.renderRibbon()),e.prototype.updateInner.call(this,r)},i.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},i.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.min,this.options.max,this.options.colors);return(0,G.HD)(u)?o=this.createDom(u):o=u,o},i.prototype.resetTitle=function(){var r=this.options.title;r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},i.prototype.showTitle=function(){var r=this.titleDom;r&&(0,Ph.Z)(r,{display:"block"})},i.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,Ph.Z)(r,{display:"none"})},i.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},i.prototype.renderRibbon=function(){this.clearRibbonContainerDoms();var r=this.options,o=r.min,u=r.max,c=r.colors,p=r.ribbonTpl,g=p===void 0?AN:p,y=this.ribbonContainerDom;if(y){var w="linear-gradient(to right, ".concat(c.join(", "),")"),O={min:o,max:u,backgroundImage:w},D=(0,G.ng)(g,O),V=this.createDom(D);y.appendChild(V),this.applyChildrenStyles(y,this.options.domStyles)}},i.prototype.clearRibbonContainerDoms=function(){this.ribbonContainerDom&&Y5(this.ribbonContainerDom)},i.prototype.clear=function(){this.setTitle(""),this.clearRibbonContainerDoms()},i}(K5),WZ=function(e){(0,b.ZT)(i,e);function i(r){var o=e.call(this,r)||this;return o.legendComponents=[],o.options=r,o.legendComponents=o.initLegendComponents(r.items),o}return i.prototype.initLegendComponents=function(r){for(var o=[],u=0;u<r.length;u++){var c=r[u];if(c.type==="category"){var p=new ZZ({title:c.options.title,items:c.options.items,className:c.options.className,customContent:c.options.customContent,domStyles:c.options.domStyles});o.push(p)}else if(c.type==="continue"){var p=new jZ({title:c.options.title,min:c.options.min,max:c.options.max,colors:c.options.colors,className:c.options.className,customContent:c.options.customContent,domStyles:c.options.domStyles});o.push(p)}}return o},i.prototype.getDefaultOptions=function(){return{position:"bottomleft"}},i.prototype.onAdd=function(){var r=window.document.createElement("div");return r.className="l7plot-legend-container",this.legendComponents.forEach(function(o){var u=o.getContainer();r.appendChild(u)}),r},i.prototype.onRemove=function(){this.legendComponents.forEach(function(r){r.destroy()})},i}(uy),eB="l7plot-tooltip",tB="l7plot-tooltip__title",rB="l7plot-tooltip__list",TN="l7plot-tooltip__list-item",MN="l7plot-tooltip__name",RN="l7plot-tooltip__value",GZ='<div class="'.concat(eB,`">
  <div class="`).concat(tB,`"></div>
  <ul class="`).concat(rB,`"></ul>
</div>`),IN='<li class="'.concat(TN,`" data-index={index}>
  <span class="`).concat(MN,`">{name}</span>
  <span class="`).concat(RN,`">{value}</span>
</li>`),g0,$Z=(g0={},g0[eB]={visibility:"visible",zIndex:999,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",borderRadius:"2px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:W5.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},g0[tB]={marginBottom:"4px"},g0[rB]={margin:"0px",listStyleType:"none",padding:"0px"},g0[TN]={listStyleType:"none",marginBottom:"4px",whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"},g0[MN]={},g0[RN]={marginLeft:"30px"},g0),XZ=function(e){(0,b.ZT)(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getDefaultOptions=function(){return(0,G.b$)({},e.prototype.getDefaultOptions.call(this),{id:"l7plot-tooltip",name:"l7plot-tooltip",title:"",showTitle:!0,items:[],containerTpl:GZ,itemTpl:IN,domStyles:$Z,className:eB})},i.prototype.initContainer=function(){var r=this.options.customContent;if(r){var o=this.getHtmlContentNode(r),u=this.getParentContainer();return u&&u.appendChild(o),o}else return e.prototype.initContainer.call(this)},i.prototype.initDom=function(){this.cacheDoms()},i.prototype.initEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.cacheDoms=function(){var r=this.container,o=r.getElementsByClassName(tB)[0],u=r.getElementsByClassName(rB)[0];this.titleDom=o,this.listDom=u},i.prototype.render=function(){this.options.customContent?this.renderCustomContent(this.options.customContent):(this.resetTitle(),this.renderItems())},i.prototype.show=function(){var r=this.container;!r||this.destroyed||(0,Ph.Z)(r,{visibility:"visible"})},i.prototype.hide=function(){var r=this.container;!r||this.destroyed||(0,Ph.Z)(r,{visibility:"hidden"})},i.prototype.updateInner=function(r){this.options.customContent?this.renderCustomContent(this.options.customContent):(r.title&&this.resetTitle(),r.items&&this.renderItems()),e.prototype.updateInner.call(this,r)},i.prototype.renderCustomContent=function(r){var o=this.container.parentNode,u=this.getHtmlContentNode(r),c=this.container;o&&o.replaceChild(u,c),this.container=u,this.applyStyles()},i.prototype.getHtmlContentNode=function(r){var o,u=r(this.options.title||"",this.options.items);return(0,G.HD)(u)?o=this.createDom(u):o=u,o},i.prototype.resetTitle=function(){var r=this.options.title,o=this.options.showTitle;o&&r?(this.showTitle(),this.setTitle(r)):this.hideTitle()},i.prototype.showTitle=function(){var r=this.titleDom;r&&(0,Ph.Z)(r,{display:"block"})},i.prototype.hideTitle=function(){var r=this.titleDom;r&&(0,Ph.Z)(r,{display:"none"})},i.prototype.setTitle=function(r){var o=this.titleDom;o&&(o.innerHTML=r)},i.prototype.renderItems=function(){var r=this;this.clearItemDoms();var o=this.options.items,u=this.options.itemTpl||IN,c=this.listDom;c&&(o.forEach(function(p){var g=(0,b.pi)({},p),y=(0,G.ng)(u,g),w=r.createDom(y);c.appendChild(w)}),this.applyChildrenStyles(c,this.options.domStyles))},i.prototype.clearItemDoms=function(){this.listDom&&Y5(this.listDom)},i.prototype.clear=function(){this.setTitle(""),this.clearItemDoms()},i}(K5),nB=k(27771),YZ=typeof global=="object"&&global&&global.Object===Object&&global,KZ=YZ,qZ=typeof self=="object"&&self&&self.Object===Object&&self,QZ=KZ||qZ||Function("return this")(),LR=QZ,JZ=LR.Symbol,yx=JZ,PN=Object.prototype,e9=PN.hasOwnProperty,t9=PN.toString,jE=yx?yx.toStringTag:void 0;function r9(e){var i=e9.call(e,jE),r=e[jE];try{e[jE]=void 0;var o=!0}catch(c){}var u=t9.call(e);return o&&(i?e[jE]=r:delete e[jE]),u}var n9=r9,i9=Object.prototype,a9=i9.toString;function o9(e){return a9.call(e)}var s9=o9,u9="[object Null]",l9="[object Undefined]",ON=yx?yx.toStringTag:void 0;function c9(e){return e==null?e===void 0?l9:u9:ON&&ON in Object(e)?n9(e):s9(e)}var kN=c9;function f9(e){return e!=null&&typeof e=="object"}var h9=f9,p9="[object Symbol]";function d9(e){return typeof e=="symbol"||h9(e)&&kN(e)==p9}var DR=d9,v9=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g9=/^\w*$/;function m9(e,i){if((0,nB.Z)(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||DR(e)?!0:g9.test(e)||!v9.test(e)||i!=null&&e in Object(i)}var y9=m9;function _9(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}var FR=_9,x9="[object AsyncFunction]",b9="[object Function]",S9="[object GeneratorFunction]",E9="[object Proxy]";function w9(e){if(!FR(e))return!1;var i=kN(e);return i==b9||i==S9||i==x9||i==E9}var C9=w9,A9=LR["__core-js_shared__"],iB=A9,LN=function(){var e=/[^.]+$/.exec(iB&&iB.keys&&iB.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function T9(e){return!!LN&&LN in e}var M9=T9,R9=Function.prototype,I9=R9.toString;function P9(e){if(e!=null){try{return I9.call(e)}catch(i){}try{return e+""}catch(i){}}return""}var O9=P9,k9=/[\\^$.*+?()[\]{}|]/g,L9=/^\[object .+?Constructor\]$/,D9=Function.prototype,F9=Object.prototype,B9=D9.toString,N9=F9.hasOwnProperty,z9=RegExp("^"+B9.call(N9).replace(k9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function U9(e){if(!FR(e)||M9(e))return!1;var i=C9(e)?z9:L9;return i.test(O9(e))}var Z9=U9;function V9(e,i){return e==null?void 0:e[i]}var H9=V9;function j9(e,i){var r=H9(e,i);return Z9(r)?r:void 0}var DN=j9,W9=DN(Object,"create"),WE=W9;function G9(){this.__data__=WE?WE(null):{},this.size=0}var $9=G9;function X9(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}var Y9=X9,K9="__lodash_hash_undefined__",q9=Object.prototype,Q9=q9.hasOwnProperty;function J9(e){var i=this.__data__;if(WE){var r=i[e];return r===K9?void 0:r}return Q9.call(i,e)?i[e]:void 0}var eV=J9,tV=Object.prototype,rV=tV.hasOwnProperty;function nV(e){var i=this.__data__;return WE?i[e]!==void 0:rV.call(i,e)}var iV=nV,aV="__lodash_hash_undefined__";function oV(e,i){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=WE&&i===void 0?aV:i,this}var sV=oV;function _x(e){var i=-1,r=e==null?0:e.length;for(this.clear();++i<r;){var o=e[i];this.set(o[0],o[1])}}_x.prototype.clear=$9,_x.prototype.delete=Y9,_x.prototype.get=eV,_x.prototype.has=iV,_x.prototype.set=sV;var FN=_x;function uV(){this.__data__=[],this.size=0}var lV=uV;function cV(e,i){return e===i||e!==e&&i!==i}var fV=cV;function hV(e,i){for(var r=e.length;r--;)if(fV(e[r][0],i))return r;return-1}var BR=hV,pV=Array.prototype,dV=pV.splice;function vV(e){var i=this.__data__,r=BR(i,e);if(r<0)return!1;var o=i.length-1;return r==o?i.pop():dV.call(i,r,1),--this.size,!0}var gV=vV;function mV(e){var i=this.__data__,r=BR(i,e);return r<0?void 0:i[r][1]}var yV=mV;function _V(e){return BR(this.__data__,e)>-1}var xV=_V;function bV(e,i){var r=this.__data__,o=BR(r,e);return o<0?(++this.size,r.push([e,i])):r[o][1]=i,this}var SV=bV;function xx(e){var i=-1,r=e==null?0:e.length;for(this.clear();++i<r;){var o=e[i];this.set(o[0],o[1])}}xx.prototype.clear=lV,xx.prototype.delete=gV,xx.prototype.get=yV,xx.prototype.has=xV,xx.prototype.set=SV;var EV=xx,wV=DN(LR,"Map"),CV=wV;function AV(){this.size=0,this.__data__={hash:new FN,map:new(CV||EV),string:new FN}}var TV=AV;function MV(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}var RV=MV;function IV(e,i){var r=e.__data__;return RV(i)?r[typeof i=="string"?"string":"hash"]:r.map}var NR=IV;function PV(e){var i=NR(this,e).delete(e);return this.size-=i?1:0,i}var OV=PV;function kV(e){return NR(this,e).get(e)}var LV=kV;function DV(e){return NR(this,e).has(e)}var FV=DV;function BV(e,i){var r=NR(this,e),o=r.size;return r.set(e,i),this.size+=r.size==o?0:1,this}var NV=BV;function bx(e){var i=-1,r=e==null?0:e.length;for(this.clear();++i<r;){var o=e[i];this.set(o[0],o[1])}}bx.prototype.clear=TV,bx.prototype.delete=OV,bx.prototype.get=LV,bx.prototype.has=FV,bx.prototype.set=NV;var BN=bx,zV="Expected a function";function aB(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new TypeError(zV);var r=function(){var o=arguments,u=i?i.apply(this,o):o[0],c=r.cache;if(c.has(u))return c.get(u);var p=e.apply(this,o);return r.cache=c.set(u,p)||c,p};return r.cache=new(aB.Cache||BN),r}aB.Cache=BN;var UV=aB,ZV=500;function VV(e){var i=UV(e,function(o){return r.size===ZV&&r.clear(),o}),r=i.cache;return i}var HV=VV,jV=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,WV=/\\(\\)?/g,GV=HV(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(jV,function(r,o,u,c){i.push(u?c.replace(WV,"$1"):o||r)}),i}),$V=GV;function XV(e,i){for(var r=-1,o=e==null?0:e.length,u=Array(o);++r<o;)u[r]=i(e[r],r,e);return u}var YV=XV,KV=1/0,NN=yx?yx.prototype:void 0,zN=NN?NN.toString:void 0;function UN(e){if(typeof e=="string")return e;if((0,nB.Z)(e))return YV(e,UN)+"";if(DR(e))return zN?zN.call(e):"";var i=e+"";return i=="0"&&1/e==-KV?"-0":i}var qV=UN;function QV(e){return e==null?"":qV(e)}var oB=QV;function JV(e,i){return(0,nB.Z)(e)?e:y9(e,i)?[e]:$V(oB(e))}var eH=JV,tH=1/0;function rH(e){if(typeof e=="string"||DR(e))return e;var i=e+"";return i=="0"&&1/e==-tH?"-0":i}var nH=rH;function iH(e,i){i=eH(i,e);for(var r=0,o=i.length;e!=null&&r<o;)e=e[nH(i[r++])];return r&&r==o?e:void 0}var aH=iH;function oH(e,i,r){var o=e==null?void 0:aH(e,i);return o===void 0?r:o}var ZN=oH,sH=5,uH=new Object().toString,VN=function(e,i){return uH.call(e)==="[object "+i+"]"},lH=function(e){return VN(e,"Array")},cH=function(e){return typeof e=="object"&&e!==null},HN=function(e){if(!cH(e)||!VN(e,"Object"))return!1;for(var i=e;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(e)===i},jN=function(e,i,r,o){r=r||0,o=o||sH;for(var u in i)if(Object.prototype.hasOwnProperty.call(i,u)){var c=i[u];c?HN(c)?(HN(e[u])||(e[u]={}),r<o?jN(e[u],c,r+1,o):e[u]=i[u]):lH(c)?(e[u]=[],e[u]=e[u].concat(c)):e[u]=c:e[u]=c}},Vp=function(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];for(var o=0;o<i.length;o+=1)jN(e,i[o]);return e},fH=["mousemove","click"],hH=function(e){(0,b.ZT)(i,e);function i(r,o,u){var c=e.call(this)||this;c.currentVisible=!1,c.interactionTriggerHander=function(ce){var de=ce.feature,we=ce.featureId,je=c.options,ht=je.title,_t=je.customTitle,Dt=je.items,Yt=je.customItems,ir=de.type==="Feature"&&de.geometry&&de.properties,sr=ir?de.properties:de,Tr=[];if(Yt){var Vr=Yt(de);if(Array.isArray(Vr))Tr=Vr;else throw new Error("customItems return array")}else Dt&&Dt.forEach(function(ln){if((0,G.HD)(ln)){var Zn=ln.split(".").pop()||ln,ci=ZN(sr,ln);ci!==void 0&&Tr.push({name:Zn,value:ci})}else{var ki=ln.field,eo=ln.alias,Xo=ln.customValue,as=eo||ki.split(".").pop()||ki,ci=ZN(sr,ki);ci!==void 0&&Tr.push({name:as,value:Xo?Xo(ci,sr,we):ci})}});var sn={title:_t?_t(sr):ht,items:Tr};c.updateTooltip(ce,sn)},c.interactionUntriggerHander=function(){c.hideTooltip()},c.scene=r,c.interactionLayers=o,c.options=Vp({},c.getDefaultOptions(),u);var p=c.options,g=p.offsets,y=p.title,w=p.showTitle,O=p.customContent,D=p.domStyles,V=p.anchor,X=p.className;return c.marker=new Xw({offsets:g,anchor:V,draggable:!1}),c.tooltipComponent=new XZ({title:y,showTitle:w,items:[],customContent:O,domStyles:D,className:X}),c.setComponent(),c.initInteractionEvent(),c}return i.prototype.getDefaultOptions=function(){return{showTitle:!0,showComponent:!0,items:[],offsets:[15,0],trigger:"mousemove",anchor:Po["TOP-LEFT"]}},i.prototype.update=function(r){this.marker.remove(),this.currentVisible=!1,this.options=Vp({},this.options,r);var o=this.options,u=o.offsets,c=o.showTitle,p=o.customContent,g=o.domStyles,y=o.anchor,w=o.className;this.marker=new Xw({offsets:u,anchor:y,draggable:!1}),this.tooltipComponent.update({showTitle:c,customContent:p,domStyles:g,className:w}),this.setComponent()},i.prototype.initInteractionEvent=function(){var r=this,o=this.options.trigger||"mousemove";if(!fH.includes(o))throw new Error("trigger is mousemove or click");this.interactionLayers.forEach(function(u){var c=u.layer;c.on(o,r.interactionTriggerHander),c.on("un".concat(o),r.interactionUntriggerHander)})},i.prototype.unBindInteractionEvent=function(){var r=this,o=this.options.trigger||"mousemove";this.interactionLayers.forEach(function(u){var c=u.layer;c.off(o,r.interactionTriggerHander),c.off("un".concat(o),r.interactionUntriggerHander)})},i.prototype.updateTooltip=function(r,o){var u=r.lngLat,c=r.x,p=r.y;if(this.options.showComponent&&(this.updateComponent(o),this.setPostion(u)),this.currentVisible){var g={type:"tooltip:change",data:o,lngLat:u,x:c,y:p};this.emit("tooltip:change",g)}else{this.showTooltip();var y={type:"tooltip:show",data:o,lngLat:u,x:c,y:p};this.emit("tooltip:show",y)}},i.prototype.showTooltip=function(){this.currentVisible||(this.options.showComponent&&this.scene.addMarker(this.marker),this.currentVisible=!0)},i.prototype.hideTooltip=function(){if(this.currentVisible){this.options.showComponent&&this.marker.remove(),this.currentVisible=!1;var r={type:"tooltip:hide"};this.emit("tooltip:hide",r)}},i.prototype.updateComponent=function(r){(0,G.Xy)(this.lastComponentOptions,r)||(this.tooltipComponent.update(r),this.lastComponentOptions=r)},i.prototype.setComponent=function(){var r=this.tooltipComponent.getContainer(),o=window.document.createElement("div");o.style.cursor="auto",o.style.userSelect="text",o.className="l7plot-tooltip-container",["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(u){o.addEventListener(u,function(c){return c.stopPropagation()})}),o.appendChild(r),this.marker.setElement(o)},i.prototype.setPostion=function(r){this.marker.setLnglat(r)},i.prototype.destroy=function(){this.unBindInteractionEvent(),this.off(),this.marker.remove(),this.tooltipComponent.destroy()},i}(kR.Z),Sx=k(77972),Ex=k(3876),GE=k(56992);function WN(e){var i,r,o,u={point:{default:{fill:e.pointFillColor,size:e.pointSize,stroke:e.pointBorderColor,lineWidth:e.pointBorder,fillOpacity:e.pointFillOpacity},active:{fill:e.pointActiveFillColor},selected:{fill:e.pointSelectedFillColor}}};return{mapStyle:e.mapStyle,defaultColor:e.brandColor,subColor:e.subColor,semanticRed:e.paletteSemanticRed,semanticGreen:e.paletteSemanticGreen,fontFamily:e.fontFamily,colors10:e.paletteQualitative10,colors20:e.paletteQualitative20,sequenceColors:e.paletteSequence,shapes:{point:["circle","square"],line:["line"]},sizes:[1,10],geometries:{point:{circle:{default:{style:u.point.default},active:{style:u.point.active},selected:{style:u.point.selected}}},line:{},polygon:{}},components:{legend:{category:{domStyles:(i={},i[Ex.rC]={visibility:"visible",zIndex:1,backgroundColor:e.legendContainerFillColor,boxShadow:e.legendContainerShadow,borderRadius:"".concat(e.legendContainerBorderRadius,"px"),color:e.legendTextFillColor,fontFamily:e.fontFamily,padding:"10px",lineHeight:"1",fontSize:"".concat(e.legendTextFontSize,"px")},i[Ex.O6]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},i[Ex.fL]={margin:"0px",padding:"0px"},i[Ex.jp]={marginBottom:"2px"},i[Ex.Bc]={width:"10px",height:"10px"},i[Ex.Tf]={paddingLeft:"8px"},i)},continue:{domStyles:(r={},r[GE.rC]={visibility:"visible",zIndex:1,backgroundColor:e.legendContainerFillColor,boxShadow:e.legendContainerShadow,borderRadius:"".concat(e.legendContainerBorderRadius,"px"),color:e.legendTextFillColor,fontFamily:e.fontFamily,padding:"10px",lineHeight:1,fontSize:"".concat(e.legendTextFontSize,"px")},r[GE.O6]={fontSize:"13px",lineHeight:"19px",marginBottom:"8px"},r[GE.el]={display:"flex",alignItems:"center"},r[GE.bl]={width:"140px",height:"14px",margin:"0px 5px"},r[GE.VI]={padding:"0px"},r)}},tooltip:{domStyles:(o={},o[Sx.rC]={visibility:"visible",zIndex:999,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:e.tooltipContainerFillColor,boxShadow:e.tooltipContainerShadow,borderRadius:"".concat(e.tooltipContainerBorderRadius,"px"),color:e.tooltipTextFillColor,fontSize:"".concat(e.tooltipTextFontSize,"px"),fontFamily:e.fontFamily,lineHeight:e.tooltipTextLineHeight},o[Sx.O6]={marginBottom:"4px"},o[Sx.fL]={margin:"0px",padding:"0px"},o[Sx.jp]={marginBottom:"4px"},o[Sx.bX]={color:e.tooltipItemNameFillColor},o[Sx.Tf]={color:e.tooltipItemValueFillColor,marginLeft:"30px"},o)},label:{style:{textAnchor:"center",textOffset:[0,0],fill:e.labelFillColor,fontSize:e.labelFontSize,fontFamily:e.fontFamily,fillColorDark:e.labelFillColorDark,fillColorLight:e.labelFillColorLight}}}}}var t_={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},pH={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},dH=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],vH=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],gH=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],GN=function(e){e===void 0&&(e={});var i=e.mapStyle,r=i===void 0?"light":i,o=e.subColor,u=o===void 0?"rgba(0,0,0,0.05)":o,c=e.paletteQualitative10,p=c===void 0?dH:c,g=e.paletteQualitative20,y=g===void 0?vH:g,w=e.paletteSemanticRed,O=w===void 0?"#F4664A":w,D=e.paletteSemanticGreen,V=D===void 0?"#30BF78":D,X=e.paletteSemanticYellow,ce=X===void 0?"#FAAD14":X,de=e.paletteSequence,we=de===void 0?gH:de,je=e.fontFamily,ht=je===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:je,_t=e.brandColor,Dt=_t===void 0?p[0]:_t;return{mapStyle:r,brandColor:Dt,subColor:u,paletteQualitative10:p,paletteQualitative20:y,paletteSemanticRed:O,paletteSemanticGreen:V,paletteSemanticYellow:ce,paletteSequence:we,fontFamily:ht,legendContainerFillColor:"rgba(255, 255, 255, 0.85)",legendContainerShadow:"0 2px 8px 0 rgba(166, 166, 166, 0.20)",legendContainerBorderRadius:2,legendTextFillColor:t_[65],legendTextFontSize:12,tooltipContainerFillColor:"rgba(255, 255, 255, 0.9)",tooltipContainerShadow:"rgb(0 0 0 / 16%) 0px 6px 12px 0px",tooltipContainerBorderRadius:2,tooltipTextFillColor:t_[65],tooltipItemNameFillColor:t_[65],tooltipItemValueFillColor:t_[65],tooltipTextFontSize:12,tooltipTextLineHeight:"20px",labelFillColor:t_[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,pointFillColor:Dt,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:pH[100],pointActiveBorderColor:t_[100],pointSelectedBorderColor:t_[100]}},Xj=GN(),mH={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},r_={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},$N=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],yH=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],_H=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],XN=function(e){e===void 0&&(e={});var i=e.mapStyle,r=i===void 0?"dark":i,o=e.subColor,u=o===void 0?"rgba(255,255,255,0.05)":o,c=e.paletteQualitative10,p=c===void 0?$N:c,g=e.paletteQualitative20,y=g===void 0?yH:g,w=e.paletteSemanticRed,O=w===void 0?"#F4664A":w,D=e.paletteSemanticGreen,V=D===void 0?"#30BF78":D,X=e.paletteSemanticYellow,ce=X===void 0?"#FAAD14":X,de=e.paletteSequence,we=de===void 0?_H:de,je=e.fontFamily,ht=je===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:je,_t=e.brandColor,Dt=_t===void 0?p[0]:_t;return{mapStyle:r,brandColor:Dt,subColor:u,paletteQualitative10:p,paletteQualitative20:y,paletteSemanticRed:O,paletteSemanticGreen:V,paletteSemanticYellow:ce,paletteSequence:we,fontFamily:ht,legendContainerFillColor:"rgba(31, 31, 31, 0.85)",legendContainerShadow:"0 2px 8px 0 rgba(166, 166, 166, 0.20)",legendContainerBorderRadius:2,legendTextFillColor:r_[65],legendTextFontSize:12,tooltipContainerFillColor:"rgba(31, 31, 31, 0.9)",tooltipContainerShadow:"0px 2px 4px rgba(0, 0, 0, 0.5)",tooltipContainerBorderRadius:2,tooltipTextFillColor:r_[65],tooltipItemNameFillColor:r_[65],tooltipItemValueFillColor:r_[65],tooltipTextFontSize:12,tooltipTextLineHeight:"20px",labelFillColor:r_[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,pointFillColor:$N[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:mH[100],pointActiveBorderColor:r_[100],pointSelectedBorderColor:r_[100]}},Yj=XN();function YN(e){var i=e.styleSheet,r=i===void 0?{}:i,o=(0,b._T)(e,["styleSheet"]),u=GN(r);return(0,G.b$)({},WN(u),o)}function xH(e){var i=e.styleSheet,r=i===void 0?{}:i,o=(0,b._T)(e,["styleSheet"]),u=XN(r);return(0,G.b$)({},WN(u),o)}var KN=YN({}),bH=xH({}),sB={default:KN,light:KN,dark:bH};function uB(e){return e===void 0&&(e="default"),(0,G.U2)(sB,(0,G.vl)(e),sB.default)}function Kj(e,i,r){r===void 0&&(r="light"),sB[lowerCase(e)]=r==="light"?createTheme(i):createDarkTheme(i)}var yv;(function(e){e.Map="map",e.Amap="amap",e.AmapV1="amapv1",e.AmapV2="amapv2",e.Mapbox="mapbox"})(yv||(yv={}));var qN=function(e){(0,b.ZT)(i,e);function i(r,o){r===void 0&&(r=[]),o===void 0&&(o={});var u=e.call(this)||this;return u.name=o.name?o.name:(0,G.EL)("layerGroup"),u.layers=r,u}return i.prototype.addTo=function(r){var o=this;this.scene=r;var u=0,c=this.layers.length;this.layers.forEach(function(p){p.once("inited",function(g){u++,o.emit("inited",g),u===c&&o.emit("inited-all")}),p.addTo(r)})},i.prototype.hasLayer=function(r){return this.layers.some(function(o){return o===r})},i.prototype.addLayer=function(r){var o=this;this.layers.push(r),this.scene&&(r.once("inited",function(u){return o.emit("inited",u)}),r.addTo(this.scene))},i.prototype.removeLayer=function(r){var o=this.layers.findIndex(function(u){return u===r});return o===-1?!1:(this.layers.splice(o,1),this.scene&&r.remove(this.scene),!0)},i.prototype.getLayers=function(){return this.layers},i.prototype.getInteractionLayers=function(){return this.layers.filter(function(r){var o=r.interaction;return o})},i.prototype.getLayer=function(r){return this.layers.find(function(o){var u=o.layer;return u.id===r})},i.prototype.getLayerByName=function(r){return this.layers.find(function(o){return o.name===r})},i.prototype.removeAllLayer=function(){var r=this;this.layers.forEach(function(o){r.scene&&o.remove(r.scene)}),this.layers=[]},i.prototype.isEmpty=function(){return this.layers.length===0},i}(kR.Z),SH=[{original:"loaded",adaptation:"scene-loaded"},{original:"resize",adaptation:"resize"},{original:"destroy",adaptation:"destroy"},{original:"resize",adaptation:"resize"}],EH=["mapmove","movestart","moveend","zoomchange","zoomstart","zoomend","click","dblclick","contextmenu","mousemove","mousewheel","mouseover","mouseout","mouseup","mousedown","dragstart","dragging","dragend"],zR=["inited","add","remove","dataUpdate","click","unclick","dblclick","undblclick","contextmenu","uncontextmenu","mouseenter","mousemove","unmousemove","mouseout","mouseup","unmouseup","mousedown","uncontextmenu","unpick"],n_=new Map;function qj(e,i){n_.set(e,i)}function Qj(e){e.forEach(function(i){n_.set(i.id,i.image)})}function Jj(e){return n_.get(e)}function eW(e){return n_.has(e)}function tW(e){return n_.delete(e)}var UR=new Map;function rW(e,i){UR.set(e,i)}function nW(e){return UR.delete(e)}var $E=new Map;function iW(e,i){$E.set(e,i)}function aW(e){e.forEach(function(i){$E.set(i.name,i.fontUnicode)})}function oW(e){return $E.delete(e)}var QN={map:{type:yv.Amap},logo:!0},wH=function(e){(0,b.ZT)(i,e);function i(r){var o=e.call(this)||this;return o.inited=!1,o.sceneLoaded=!1,o.layersLoaded=!1,o.loaded=!1,o.layerGroup=new qN,o.options=Vp({},o.getDefaultOptions(),r),o.lastOptions=o.options,o}return i.prototype.getDefaultOptions=function(){return i.DefaultOptions},i.prototype.createContainer=function(r){var o=this.options,u=o.width,c=o.height,p=typeof r=="string"?document.getElementById(r):r;return p.style.position||(p.style.position="relative"),u&&(p.style.width||(p.style.width="".concat(u,"px"))),c&&(p.style.height||(p.style.height="".concat(c,"px"))),p},i.prototype.createTheme=function(){var r=(0,G.Kn)(this.options.theme)?Vp({},uB("default"),YN(this.options.theme)):uB(this.options.theme);return r},i.prototype.createMap=function(){var r=this.options.map?this.options.map:QN.map,o=r.type,u=(0,b._T)(r,["type"]),c=Object.assign({style:this.theme.mapStyle},u);return o===yv.Amap?new XM(c):o===yv.AmapV1?new o5(c):o===yv.AmapV2?new XM(c):o===yv.Mapbox?new ez(c):new V7(c)},i.prototype.createScene=function(){var r=this.options,o=r.logo,u=r.antialias,c=r.preserveDrawingBuffer,p=(0,G.jn)(o)?{logoVisible:o}:{logoVisible:o==null?void 0:o.visible,logoPosition:o==null?void 0:o.position},g=Object.assign({antialias:u,preserveDrawingBuffer:c},p),y=this.createMap(),w=new FZ((0,b.pi)({id:this.container,map:y},g));return w},i.prototype.registerResources=function(){var r=this;n_.size&&n_.forEach(function(o,u){!r.scene.hasImage(u)&&r.scene.addImage(u,o)}),UR.size&&UR.forEach(function(o,u){r.scene.addFontFace(u,o)}),$E.size&&$E.forEach(function(o,u){r.scene.addIconFont(u,o)})},i.prototype.update=function(r){this.updateOption(r),r.map&&!(0,G.Xy)(this.lastOptions.map,this.options.map)&&this.updateMap(r.map),this.render(),this.emit("update")},i.prototype.updateOption=function(r){this.lastOptions=this.options,this.options=Vp({},this.options,r)},i.prototype.updateMap=function(r){var o;if(this.scene){var u=r.style,c=r.center,p=r.zoom,g=r.rotation,y=r.pitch;(0,G.o8)(y)||this.scene.setPitch(y),(0,G.o8)(g)||this.scene.setRotation(g),u&&u!==((o=this.lastOptions.map)===null||o===void 0?void 0:o.style)&&this.scene.setMapStyle(u),p&&c&&this.scene.setZoomAndCenter(p,c)}},i.prototype.changeSize=function(r,o){this.options.width===r&&this.options.height===o||(this.container.style.width="".concat(r,"px"),this.container.style.height="".concat(o,"px"),this.options=Object.assign(this.options,{width:r,height:o}))},i.prototype.on=function(r,o,u){return this.proxyEventHander("on",r,o,u),this},i.prototype.once=function(r,o){return this.proxyEventHander("once",r,o),this},i.prototype.off=function(r,o){return this.proxyEventHander("off",r,o),this},i.prototype.proxyEventHander=function(r,o,u,c){var p=SH.find(function(D){return D.adaptation===o});if(p)this.scene[r](p.original,u);else if(EH.indexOf(o)!==-1)this.scene[r](o,u);else if(o.includes("Layer:")){var g=(0,b.CR)(o.split(":"),2),y=g[0],w=g[1],O=this[y]&&this[y][r];if(O&&zR.indexOf(w)!==-1)this[y][r](w,u);else throw new Error('No event name "'.concat(o,'"'))}else e.prototype[r].call(this,o,u,c)},i.prototype.getScene=function(){return this.scene},i.prototype.getMap=function(){var r,o,u,c;return((r=this.options.map)===null||r===void 0?void 0:r.type)===yv.Amap?this.scene.map:((o=this.options.map)===null||o===void 0?void 0:o.type)===yv.AmapV2?this.scene.map:((u=this.options.map)===null||u===void 0?void 0:u.type)===yv.Mapbox?this.scene.map:((c=this.options.map)===null||c===void 0?void 0:c.type)===yv.Map?this.scene.map:this.scene.map},i.prototype.addLayer=function(r){this.layerGroup.addLayer(r)},i.prototype.getLayes=function(){return console.warn("Replace to use getLayers()"),this.getLayers()},i.prototype.getLayers=function(){return this.layerGroup.getLayers()},i.prototype.getLayerByName=function(r){return this.layerGroup.getLayerByName(r)},i.prototype.removeLayer=function(r){return this.layerGroup.removeLayer(r)},i.prototype.removeAllLayer=function(){this.layerGroup.removeAllLayer()},i.prototype.zoomIn=function(){this.scene.zoomIn()},i.prototype.zoomOut=function(){this.scene.zoomOut()},i.prototype.setPitch=function(r){this.scene.setPitch(r)},i.prototype.fitBounds=function(r){this.scene.fitBounds(r)},i.prototype.setMapStatus=function(r){this.scene.setMapStatus(r)},i.prototype.setBgColor=function(r){this.scene.setBgColor(r)},i.prototype.initComponents=function(){this.initControls(),this.initTooltip()},i.prototype.updateComponents=function(){this.updateControls(),this.initTooltip()},i.prototype.initControls=function(){var r=this.options,o=r.zoom,u=r.scale,c=r.layerMenu,p=r.legend;u&&this.addScaleControl(u),o&&this.addZoomControl(o),c&&this.addLayerMenuControl(c),p&&(this.addLegendControl(p),this.emit("add-legend"))},i.prototype.updateControls=function(){var r=this.options,o=r.zoom,u=r.scale,c=r.layerMenu,p=r.legend;(0,G.Xy)(this.lastOptions.zoom,o)||(o?this.updateZoomControl(o):this.removeZoomControl()),(0,G.Xy)(this.lastOptions.scale,u)||(u?this.updateScaleControl(u):this.removeScaleControl()),(0,G.Xy)(this.lastOptions.layerMenu,c)||(c?this.updateLayerMenuControl(c):this.removeLayerMenuControl()),(0,G.Xy)(this.lastOptions.legend,p)||(p?this.updateLegendControl(p):this.removeLegendControl())},i.prototype.addZoomControl=function(r){this.zoomControl||(this.zoomControl=new kF(r),this.scene.addControl(this.zoomControl))},i.prototype.updateZoomControl=function(r){if(!this.zoomControl){this.addZoomControl(r);return}this.removeZoomControl(),this.addZoomControl(r)},i.prototype.removeZoomControl=function(){this.zoomControl&&(this.zoomControl.remove(),this.zoomControl=void 0)},i.prototype.addScaleControl=function(r){this.scaleControl||(this.scaleControl=new OP(r),this.scene.addControl(this.scaleControl))},i.prototype.updateScaleControl=function(r){if(!this.scaleControl){this.addScaleControl(r);return}this.removeScaleControl(),this.addScaleControl(r)},i.prototype.removeScaleControl=function(){this.scaleControl&&(this.scaleControl.remove(),this.scaleControl=void 0)},i.prototype.addLayerMenuControl=function(r){var o={},u={};this.layerGroup.getLayers().forEach(function(c){var p=c.name,g=c.layer;u[p]=g})},i.prototype.updateLayerMenuControl=function(r){this.removeLayerMenuControl(),this.addLayerMenuControl(r)},i.prototype.removeLayerMenuControl=function(){},i.prototype.getLegendOptions=function(){return{}},i.prototype.addLegendControl=function(r){if(!this.legendControl){var o=this.theme.components.legend,u=Vp({},this.getLegendOptions(),r),c=u.type,p=u.position,g=(0,b._T)(u,["type","position"]),y=[];if(c==="category"){var w=Vp({},{domStyles:o.category.domStyles},g);y.push({type:c,options:w})}else if(c==="continue"){var O=Vp({},{domStyles:o.continue.domStyles},g);y.push({type:c,options:O})}y.length&&(this.legendControl=new WZ({position:p,items:y}),this.scene.addControl(this.legendControl))}},i.prototype.updateLegendControl=function(r){if(!this.legendControl){this.addLegendControl(r);return}this.removeLegendControl(),this.addLegendControl(r)},i.prototype.removeLegendControl=function(){this.legendControl&&(this.legendControl.remove(),this.legendControl=void 0)},i.prototype.initTooltip=function(){var r=this;this.tooltip&&this.tooltip.destroy();var o=this.options.tooltip;if(o){var u=Vp({},{domStyles:this.theme.components.tooltip.domStyles},o),c=this.layerGroup.getInteractionLayers();this.tooltip=new hH(this.scene,c,u),this.tooltip.on("*",function(p){return r.emit(p.type,p)})}},i.prototype.exportPng=function(r){return this.scene.exportPng(r)},i.prototype.destroy=function(){var r;e.prototype.off.call(this,"*"),this.removeScaleControl(),this.removeZoomControl(),this.removeLayerMenuControl(),this.removeLegendControl(),(r=this.tooltip)===null||r===void 0||r.destroy(),this.scene.destroy()},i.DefaultOptions=QN,i}(kR.Z),JN;(function(e){e[e.solid=0]="solid",e[e.dash=1]="dash"})(JN||(JN={}));var lB;(function(e){e.TextLayer="textLayer",e.DotLayer="dotLayer",e.IconLayer="iconLayer",e.DotDensity="dotDensityLayer",e.ColumnLayer="columnLayer",e.HeatmapLayer="heatmapLayer",e.GridLayer="gridLayer",e.HexbinLayer="hexbinLayer",e.LinesLayer="linesLayer",e.PathLayer="pathLayer",e.ArcLayer="arcLayer",e.AreaLayer="areaLayer",e.PrismLayer="prismLayer"})(lB||(lB={}));var cB=function(){function e(){}return e.aggregation=function(i,r){var o=r.type,u=o===void 0?"grid":o,c=r.radius,p=r.method,g=r.field,y={type:u,size:c,method:p,field:g};i.transforms?(i.transforms=i.transforms.filter(function(w){return w.type!==y.type}),i.transforms.push(y)):i.transforms=[y]},e}(),e8=["name","zIndex","visible","minZoom","maxZoom","pickingBuffer","autoFit","blend"],Cx=function(e){(0,b.ZT)(i,e);function i(r){var o=e.call(this)||this;return o.options=Vp({},o.getDefaultOptions(),r),o.lastOptions=o.options,o}return i.prototype.getDefaultOptions=function(){return{}},i.prototype.pickLayerConfig=function(r){var o=(0,G.ei)(r,e8);return o},i.prototype.addTo=function(r){r.addLayer(this.layer)},i.prototype.remove=function(r){r.removeLayer(this.layer)},i.prototype.update=function(r){this.updateOption(r),this.updateConfig(r)},i.prototype.updateOption=function(r){this.lastOptions=this.options,this.options=Vp({},this.options,r)},i.prototype.updateConfig=function(r){!(0,G.o8)(r.zIndex)&&!(0,G.Xy)(this.lastOptions.zIndex,this.options.zIndex)&&this.setIndex(r.zIndex),!(0,G.o8)(r.blend)&&!(0,G.Xy)(this.lastOptions.blend,this.options.blend)&&this.setBlend(r.blend),!(0,G.o8)(r.minZoom)&&!(0,G.Xy)(this.lastOptions.minZoom,this.options.minZoom)&&this.setMinZoom(r.minZoom),!(0,G.o8)(r.maxZoom)&&!(0,G.Xy)(this.lastOptions.maxZoom,this.options.maxZoom)&&this.setMinZoom(r.maxZoom),!(0,G.o8)(r.visible)&&!(0,G.Xy)(this.lastOptions.visible,this.options.visible)&&(r.visible?this.show():this.hide())},i.prototype.render=function(){this.layer.renderLayers()},i.prototype.setSource=function(r){if(r instanceof G_)this.layer.setSource(r);else{var o=r.data,u=r.aggregation,c=(0,b._T)(r,["data","aggregation"]);u&&cB.aggregation(c,u);var p=this.layer.getSource();p?this.layer.setData(o,c):this.layer.source(o,c)}},i.prototype.changeData=function(r){this.setSource(r)},i.prototype.setIndex=function(r){this.layer.setIndex(r)},i.prototype.setBlend=function(r){this.layer.setBlend(r)},i.prototype.setMinZoom=function(r){this.layer.setMinZoom(r)},i.prototype.setMaxZoom=function(r){this.layer.setMaxZoom(r)},i.prototype.show=function(){this.layer.inited&&this.layer.show()},i.prototype.hide=function(){this.layer.inited&&this.layer.hide()},i.prototype.toggleVisible=function(){this.isVisible()?this.hide():this.show()},i.prototype.isVisible=function(){return this.layer.inited?this.layer.isVisible():this.options.visible},i.prototype.fitBounds=function(r){this.layer.fitBounds(r)},i.prototype.on=function(r,o){return zR.indexOf(r)!==-1?this.layer.on(r,o):e.prototype.on.call(this,r,o),this},i.prototype.once=function(r,o){return zR.indexOf(r)!==-1?this.layer.once(r,o):e.prototype.once.call(this,r,o),this},i.prototype.off=function(r,o){return zR.indexOf(r)!==-1?this.layer.off(r,o):e.prototype.off.call(this,r,o),this},i.LayerType=lB,i.LayerConfigkeys=e8,i}(kR.Z);function i_(e,i){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var u={};return e.forEach(function(c,p){u[c]=r[p]}),delete u.undefined,i(u)}}var dl=function(){function e(){}return e.shape=function(i,r){if((0,G.HD)(r))i.shape(r);else if((0,G.mf)(r)){var o=[];i.shape(o.join("*"),i_(o,r))}else if((0,G.Kn)(r)){var u=r.field?r.field:"";if((0,G.mf)(r.value)){var o=(0,G.kJ)(u)?u:u.split("*");i.shape(u,i_(o,r.value))}else i.shape(u,r.value);(0,G.HD)(u)&&r.scale&&e.scale(i,u,r.scale)}},e.size=function(i,r){if((0,G.hj)(r))i.size(r);else if((0,G.kJ)(r))i.size(r);else if((0,G.mf)(r)){var o=[];i.size(o.join("*"),i_(o,r))}else if((0,G.Kn)(r)){var u=r.field?r.field:"";if((0,G.mf)(r.value)){var o=(0,G.kJ)(u)?u:u.split("*");i.size(u,i_(o,r.value))}else i.size(u,r.value);(0,G.HD)(u)&&r.scale&&e.scale(i,u,r.scale)}},e.color=function(i,r){if((0,G.HD)(r))i.color(r);else if((0,G.mf)(r)){var o=[];i.color(o.join("*"),i_(o,r))}else if((0,G.Kn)(r)){var u=r.field?r.field:"";if((0,G.mf)(r.value)){var o=(0,G.kJ)(u)?u:u.split("*");i.color(u,i_(o,r.value))}else i.color(u,r.value);(0,G.HD)(u)&&r.scale&&e.scale(i,u,r.scale)}},e.style=function(i,r){r&&i.style(r)},e.state=function(i,r){var o=r.active,u=r.select;o&&i.active(o),u&&i.select(u)},e.rotate=function(i,r){(0,G.HD)(r)||(0,G.mf)(r)||(0,G.Kn)(r)},e.texture=function(i,r){(0,G.HD)(r)&&i.texture(r)},e.animate=function(i,r){((0,G.jn)(r)||(0,G.Kn)(r))&&i.animate(r)},e.scale=function(i,r,o){i.scale(r,o)},e.filter=function(i,r){var o=r.field?r.field:"",u=(0,G.kJ)(o)?o:o.split("*");i.filter(u.join("*"),i_(u,r.value))},e}();function CH(e,i){var r=i.field,o=i.content,u=i.style,c=u===void 0?{}:u,p=i.state,g=c.fontSize,y=c.fill,w=r||o||"",O={field:w,value:"text"};dl.shape(e,O),g&&dl.size(e,g),y&&dl.color(e,y),c&&dl.style(e,c),p&&dl.state(e,p)}var t8={style:{fontSize:12}},AH=[],TH=function(e){(0,b.ZT)(i,e);function i(r){var o=e.call(this,r)||this;o.type=Cx.LayerType.TextLayer,o.interaction=!1;var u=o.options,c=u.name,p=u.source,g=o.pickLayerConfig(o.options);return o.name=c||(0,G.EL)(o.type),o.layer=new $g((0,b.pi)((0,b.pi)({},g),{name:o.name})),o.mappingLayer(o.layer,o.options),o.setSource(p),o}return i.prototype.getDefaultOptions=function(){return t8},i.prototype.mappingLayer=function(r,o){CH(r,o)},i.prototype.update=function(r){e.prototype.update.call(this,r),this.mappingLayer(this.layer,this.options)},i.DefaultOptions=t8,i.LayerOptionsKeys=Cx.LayerConfigkeys.concat(AH),i}(Cx),fB;(function(e){e.Dot="dot",e.DotDensity="dotDensity",e.Heatmap="heatmap",e.Grid="grid",e.Hexbin="hexbin",e.Path="path",e.Flow="flow",e.Area="area",e.Choropleth="choropleth"})(fB||(fB={}));var MH={autoFit:!1},hB=function(e){(0,b.ZT)(i,e);function i(r,o){var u=this;if(typeof r=="string"||r instanceof Element){if(o===void 0)throw new Error("options is undefined");u=e.call(this,o)||this,u.container=u.createContainer(r),u.theme=u.createTheme(),u.scene=u.createScene(),u.registerResources(),u.initSource()}else u=e.call(this,r)||this;return u}return i.prototype.initSource=function(){this.source=this.createSource(),this.render(),this.inited=!0},i.prototype.initLayersEvent=function(){},i.prototype.getDefaultOptions=function(){return i.DefaultOptions},i.prototype.createSource=function(){var r=this.options.source,o=r.data,u=r.aggregation,c=(0,b._T)(r,["data","aggregation"]);u&&cB.aggregation(c,u);var p=new G_(o,c);return p},i.prototype.createLabelLayer=function(r,o,u){var c=u||{},p=c.visible,g=c.minZoom,y=c.maxZoom,w=c.zIndex,O=w===void 0?0:w,D=new TH((0,b.pi)({name:"labelLayer",visible:p,minZoom:g,maxZoom:y,zIndex:O+.1,source:r},o));return D},i.prototype.updateLabelLayer=function(r,o,u,c){o?c?c.update((0,b.pi)({},o)):(c=this.createLabelLayer(r,o,u),this.layerGroup.addLayer(c)):o===!1&&c&&this.layerGroup.removeLayer(c)},i.prototype.render=function(){var r=this,o=this.createLayers(this.source);this.inited?(this.layerGroup.removeAllLayer(),o.addTo(this.scene),this.layerGroup=o):(this.layerGroup=o,this.scene.sceneService.loaded?this.onSceneLoaded():this.scene.once("loaded",function(){r.onSceneLoaded()})),this.initLayersEvent()},i.prototype.onSceneLoaded=function(){var r=this;this.sceneLoaded=!0,this.layerGroup.isEmpty()?this.onLayersLoaded():this.layerGroup.once("inited-all",function(){r.onLayersLoaded()}),this.layerGroup.addTo(this.scene)},i.prototype.onLayersLoaded=function(){this.layersLoaded=!0,this.initComponents(),this.loaded=!0,this.emit("loaded")},i.prototype.attachToScene=function(r,o){this.scene=r,this.theme=o||uB("default"),this.registerResources(),this.initSource()},i.prototype.unattachFromScene=function(){var r;this.removeAllLayer(),(r=this.tooltip)===null||r===void 0||r.destroy()},i.prototype.addToScene=function(r){this.attachToScene(r)},i.prototype.removeFromScene=function(){var r;this.removeAllLayer(),this.removeScaleControl(),this.removeZoomControl(),this.removeLayerMenuControl(),this.removeLegendControl(),(r=this.tooltip)===null||r===void 0||r.destroy()},i.prototype.update=function(r){if(this.updateOption(r),r.map&&!(0,G.Xy)(this.lastOptions.map,this.options.map)&&this.updateMap(r.map),this.scene.setEnableRender(!1),r.source&&!(0,G.Xy)(this.lastOptions.source,this.options.source)){var o=r.source,u=o.data,c=(0,b._T)(o,["data"]);this.changeData(u,c)}this.scene.setEnableRender(!0),this.render(),this.updateComponents(),this.emit("update")},i.prototype.changeData=function(r,o){var u=this;this.options.source=Vp({},this.options.source,(0,b.pi)({data:r},o));var c=this.options.source,p=c.aggregation,g=(0,b._T)(c,["aggregation"]);p&&cB.aggregation(g,p),this.source.setData(this.options.source.data,g);var y=this.options.legend;y&&setTimeout(function(){u.updateLegendControl(y)}),this.emit("change-data")},i.DefaultOptions=MH,i.PlotType=fB,i}(wH),RH=Vp({},hB.DefaultOptions,{source:{data:{type:"FeatureCollection",features:[]},parser:{type:"geojson"}}}),r8="#2f54eb",cf={active:{fill:!1,stroke:r8,lineWidth:1.5,lineOpacity:.8},select:{fill:!1,stroke:r8,lineWidth:1.5,lineOpacity:.8}},XE=function(e){return(0,G.o8)(e)||(e.active===!1?cf.active=Object.assign(cf.active,{fill:!1,stroke:!1}):typeof e.active=="object"&&(e.active.fill===!1?cf.active.fill=!1:typeof e.active.fill=="string"&&(cf.active.fill=e.active.fill),e.active.stroke===!1?cf.active.stroke=!1:typeof e.active.stroke=="string"&&(cf.active.stroke=e.active.stroke),typeof e.active.lineWidth=="number"&&(cf.active.lineWidth=e.active.lineWidth),typeof e.active.lineOpacity=="number"&&(cf.active.lineOpacity=e.active.lineOpacity)),e.select===!1?cf.select=Object.assign(cf.select,{fill:!1,stroke:!1}):typeof e.select=="object"&&(e.select.fill===!1?cf.select.fill=!1:typeof e.select.fill=="string"&&(cf.select.fill=e.select.fill),e.select.stroke===!1?cf.select.stroke=!1:typeof e.select.stroke=="string"&&(cf.select.stroke=e.select.stroke),typeof e.select.lineWidth=="number"&&(cf.select.lineWidth=e.select.lineWidth),typeof e.select.lineOpacity=="number"&&(cf.select.lineOpacity=e.select.lineOpacity))),cf};function IH(e,i,r,o,u,c){var p=c.color,g=c.style,y=c.state,w=XE(y),O={active:w.active.fill===!1?!1:{color:w.active.fill},select:!1},D={opacity:g==null?void 0:g.opacity},V=g==null?void 0:g.lineWidth,X=g==null?void 0:g.stroke,ce={opacity:g==null?void 0:g.lineOpacity,dashArray:g==null?void 0:g.lineDash,lineType:g==null?void 0:g.lineType};if(dl.shape(e,"fill"),p&&dl.color(e,p),D&&dl.style(e,D),O&&dl.state(e,O),dl.shape(i,"line"),V&&dl.size(i,V),X&&dl.color(i,X),ce&&dl.style(i,ce),w.active.stroke){var de=w.active.stroke,we=w.active.lineWidth||V,je={opacity:w.active.lineOpacity};dl.shape(r,"line"),we&&dl.size(r,we),de&&dl.color(r,de),je&&dl.style(r,je)}if(w.select.fill){var ht=w.select.fill;dl.shape(o,"fill"),ht&&dl.color(o,ht),D&&dl.style(o,D),dl.state(o,{select:!1,active:!1})}if(w.select.stroke){var _t=w.select.stroke,we=w.select.lineWidth||V,Dt={opacity:w.select.lineOpacity};dl.shape(u,"line"),we&&dl.size(u,we),_t&&dl.color(u,_t),Dt&&dl.style(u,Dt)}}var PH=/\s/;function OH(e){for(var i=e.length;i--&&PH.test(e.charAt(i)););return i}var kH=OH,LH=/^\s+/;function DH(e){return e&&e.slice(0,kH(e)+1).replace(LH,"")}var FH=DH,n8=0/0,BH=/^[-+]0x[0-9a-f]+$/i,NH=/^0b[01]+$/i,zH=/^0o[0-7]+$/i,UH=parseInt;function ZH(e){if(typeof e=="number")return e;if(DR(e))return n8;if(FR(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=FR(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=FH(e);var r=NH.test(e);return r||zH.test(e)?UH(e.slice(2),r?2:8):BH.test(e)?n8:+e}var i8=ZH,a8=1/0,VH=17976931348623157e292;function HH(e){if(!e)return e===0?e:0;if(e=i8(e),e===a8||e===-a8){var i=e<0?-1:1;return i*VH}return e===e?e:0}var jH=HH;function WH(e){var i=jH(e),r=i%1;return i===i?r?i-r:i:0}var GH=WH,$H=LR.isFinite,XH=Math.min;function YH(e){var i=Math[e];return function(r,o){if(r=i8(r),o=o==null?0:XH(GH(o),292),o&&$H(r)){var u=(oB(r)+"e").split("e"),c=i(u[0]+"e"+(+u[1]+o));return u=(oB(c)+"e").split("e"),+(u[0]+"e"+(+u[1]-o))}return i(r)}}var KH=YH,qH=KH("round"),o8=qH,QH=function(e){return!Array.isArray(e[0].value)},JH=function(e){if(QH(e))return e;var i=e.map(function(r){return(0,b.pi)((0,b.pi)({},r),{value:[o8(r.value[0],2),o8(r.value[1],2)]})});return i},s8={visible:!0,state:{active:!1,select:!1},enabledMultiSelect:!1},ej=["color","style","state","enabledMultiSelect"],pB=function(e){(0,b.ZT)(i,e);function i(r){var o=e.call(this,r)||this;o.selectData=[],o.type=Cx.LayerType.AreaLayer,o.interaction=!0,o.onHighlighHandle=function(ce){var de=ce.feature,we=ce.featureId;o.setHighlightLayerSource(de,we)},o.onUnhighlighHandle=function(){o.setHighlightLayerSource()},o.onSelectHandle=function(ce){var de=o.options.enabledMultiSelect,we=ce.feature,je=ce.featureId,ht=(0,G.d9)(o.selectData),_t=ht.findIndex(function(Yt){return Yt.featureId===je});if(_t===-1)de?ht.push({feature:we,featureId:je}):ht=[{feature:we,featureId:je}],o.emit("select",we,(0,G.d9)(ht));else{var Dt=ht[_t];de?ht.splice(_t,1):ht=[],o.emit("unselect",Dt,(0,G.d9)(ht))}o.setSelectLayerSource(ht)};var u=o.options,c=u.name,p=u.source,g=u.visible,y=u.minZoom,w=u.maxZoom,O=u.zIndex,D=O===void 0?0:O,V=o.pickLayerConfig(o.options),X=XE(o.options.state);return o.name=c||(0,G.EL)(o.type),o.layer=new p1((0,b.pi)((0,b.pi)({},V),{name:o.name})),o.strokeLayer=new dy({name:"strokeLayer",visible:g,zIndex:D,minZoom:y,maxZoom:w}),o.highlightLayer=new dy({name:"highlightLayer",visible:g&&!!X.active.stroke,zIndex:D+.1,minZoom:y,maxZoom:w}),o.selectFillLayer=new p1({name:"selectFillLayer",visible:g&&!!X.select.fill,zIndex:D+.1,minZoom:y,maxZoom:w}),o.selectStrokeLayer=new dy({name:"selectStrokeLayer",visible:g&&!!X.select.stroke,zIndex:D+.1,minZoom:y,maxZoom:w}),o.mappingLayer(o.options),o.setSource(p),o.initEvent(),o}return i.prototype.getDefaultOptions=function(){return s8},i.prototype.mappingLayer=function(r){IH(this.layer,this.strokeLayer,this.highlightLayer,this.selectFillLayer,this.selectStrokeLayer,r)},i.prototype.setSource=function(r){e.prototype.setSource.call(this,r),this.setStrokeLayerSource(),this.setHighlightLayerSource(),this.selectFillLayer.source({type:"FeatureCollection",features:[]},{parser:{type:"geojson"}}),this.selectStrokeLayer.source({type:"FeatureCollection",features:[]},{parser:{type:"geojson"}})},i.prototype.setStrokeLayerSource=function(){var r=this.layer.getSource();if(r)this.strokeLayer.setSource(r);else{var o=this.layer.sourceOption,u=o.data,c=o.options;this.strokeLayer.source(u,c)}},i.prototype.setHighlightLayerSource=function(r,o){if(o===void 0&&(o=-999),this.highlightLayerData!==o){var u=r?[r]:[];this.highlightLayer.setData({type:"FeatureCollection",features:u},{parser:{type:"geojson"}}),this.highlightLayerData=o}},i.prototype.setSelectLayerSource=function(r){if(r===void 0&&(r=[]),!(this.selectData.length===r.length&&(0,G.Xy)(this.selectData.map(function(u){var c=u.featureId;return c}),r.map(function(u){var c=u.featureId;return c})))){var o=r.map(function(u){var c=u.feature;return c});this.selectFillLayer.setData({type:"FeatureCollection",features:o},{parser:{type:"geojson"}}),this.selectStrokeLayer.setData({type:"FeatureCollection",features:o},{parser:{type:"geojson"}}),this.selectData=r}},i.prototype.initEvent=function(){this.layer.off("mousemove",this.onHighlighHandle),this.layer.off("unmousemove",this.onHighlighHandle),this.layer.off("click",this.onSelectHandle),this.selectData=[],this.highlightLayerData=null,this.options.state&&(this.options.state.active&&(this.layer.on("mousemove",this.onHighlighHandle),this.layer.on("unmousemove",this.onUnhighlighHandle)),this.options.state.select&&this.layer.on("click",this.onSelectHandle))},i.prototype.addTo=function(r){r.addLayer(this.layer),r.addLayer(this.strokeLayer),r.addLayer(this.highlightLayer),r.addLayer(this.selectFillLayer),r.addLayer(this.selectStrokeLayer)},i.prototype.remove=function(r){r.removeLayer(this.layer),r.removeLayer(this.strokeLayer),r.removeLayer(this.highlightLayer),r.removeLayer(this.selectFillLayer),r.removeLayer(this.selectStrokeLayer)},i.prototype.update=function(r){if(e.prototype.update.call(this,r),this.mappingLayer(this.options),this.options.visible){!(0,G.o8)(r.state)&&!(0,G.Xy)(this.lastOptions.state,this.options.state)&&this.updateHighlightLayer();var o=XE(this.options.state);o.active.stroke&&this.setHighlightLayerSource(),(o.select.fill||o.select.stroke)&&this.setSelectLayerSource()}this.initEvent()},i.prototype.updateHighlightLayer=function(){var r=XE(this.options.state),o=XE(this.lastOptions.state);o.active.stroke!==r.active.stroke&&(r.active.stroke?this.highlightLayer.show():this.highlightLayer.hide()),o.select.fill!==r.select.fill&&(r.select.fill?this.selectFillLayer.show():this.selectFillLayer.hide()),o.select.stroke!==r.select.stroke&&(r.select.stroke?this.selectStrokeLayer.show():this.selectStrokeLayer.hide())},i.prototype.setIndex=function(r){this.layer.setIndex(r),this.strokeLayer.setIndex(r),this.highlightLayer.setIndex(r+.1),this.selectFillLayer.setIndex(r+.1),this.selectStrokeLayer.setIndex(r+.1)},i.prototype.setMinZoom=function(r){this.layer.setMinZoom(r),this.strokeLayer.setMinZoom(r),this.highlightLayer.setMinZoom(r),this.selectFillLayer.setMinZoom(r),this.selectStrokeLayer.setMinZoom(r)},i.prototype.setMaxZoom=function(r){this.layer.setMaxZoom(r),this.strokeLayer.setMaxZoom(r),this.highlightLayer.setMaxZoom(r),this.selectFillLayer.setMaxZoom(r),this.selectStrokeLayer.setMaxZoom(r)},i.prototype.show=function(){this.layer.inited&&(this.layer.show(),this.strokeLayer.show(),this.selectFillLayer.show(),this.selectStrokeLayer.show())},i.prototype.hide=function(){this.layer.inited&&(this.layer.hide(),this.strokeLayer.hide(),this.selectFillLayer.hide(),this.selectStrokeLayer.hide())},i.prototype.getColorLegendItems=function(){var r=this.layer.getLegendItems("color");if(Array.isArray(r)&&r.length!==0){var o=JH(r);return o}return[]},i.prototype.setActive=function(r){},i.prototype.setSelect=function(r){},i.DefaultOptions=s8,i.LayerOptionsKeys=Cx.LayerConfigkeys.concat(ej),i}(Cx),tj=function(e){(0,b.ZT)(i,e);function i(){var r=e.apply(this,(0,b.ev)([],(0,b.CR)(arguments),!1))||this;return r.type=hB.PlotType.Area,r}return i.prototype.getDefaultOptions=function(){return i.DefaultOptions},i.prototype.createLayers=function(r){this.areaLayer=new pB((0,b.pi)({source:r},(0,G.ei)(this.options,pB.LayerOptionsKeys)));var o=new qN([this.areaLayer]);return this.options.label&&(this.labelLayer=this.createLabelLayer(r,this.options.label,this.options),o.addLayer(this.labelLayer)),o},i.prototype.updateLayers=function(r){var o=(0,G.ei)(r,pB.LayerOptionsKeys);this.areaLayer.update(o),this.updateLabelLayer(this.source,r.label,this.options,this.labelLayer)},i.prototype.initLayersEvent=function(){},i.prototype.getLegendOptions=function(){var r=this.areaLayer.getColorLegendItems();return r.length!==0?{type:"category",items:r}:{}},i.DefaultOptions=RH,i}(hB),sW=function(e,i){var r={}.toString;return r.call(e)==="[object ".concat(i,"]")},uW=function(e){return Object.prototype.toString.call(e).slice(8,-1)},dB=function(e){if(!e||typeof e!="object")return e;var i;return Array.isArray(e)?i=e.map(function(r){return dB(r)}):(i={},Object.keys(e).forEach(function(r){return i[r]=dB(e[r])})),i},lW=function(e){if(!e)return e;var i={};for(var r in e)i[r]=e[r];return i},YE=function(){return YE=Object.assign||function(e){for(var i,r=1,o=arguments.length;r<o;r++){i=arguments[r];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(e[u]=i[u])}return e},YE.apply(this,arguments)},rj=function(e,i){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)i.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r},u8=function(e){var i=e.source,r=rj(e,["source"]),o=YE(YE({},dB(r)),{source:YE({},i)});return o},vB=function(){return vB=Object.assign||function(e){for(var i,r=1,o=arguments.length;r<o;r++){i=arguments[r];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(e[u]=i[u])}return e},vB.apply(this,arguments)},ZR=function(e,i){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)i.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r};function nj(e,i){var r=(0,K.useRef)(),o=(0,K.useRef)(),u=(0,K.useRef)(null),c=i.onReady;return(0,K.useEffect)(function(){if(!(!r.current||!o.current||(0,G.Xy)(o.current,i))){var p=!1,g=!1,y=!1,w=o.current,O=w.onReady,D=w.map,V=w.source,X=V.data,ce=ZR(V,["data"]),de=ZR(w,["onReady","map","source"]),we=i.onReady,je=i.map,ht=i.source,_t=ht.data,Dt=ZR(ht,["data"]),Yt=ZR(i,["onReady","map","source"]);if(g=!(0,G.Xy)(D,je),p=!(0,G.Xy)(ce,Dt)||X!==_t,y=!(0,G.Xy)(de,Yt),o.current=u8(i),g){var ir=(0,G.ei)(je,["center","pitch","rotation","zoom","style"]);r.current.updateMap(ir)}p&&(r.current.loaded?r.current.changeData(_t,Dt):r.current.once("loaded",function(){var sr;(sr=r.current)===null||sr===void 0||sr.changeData(_t,Dt)})),y&&(r.current.loaded?r.current.update(Yt):r.current.once("loaded",function(){var sr;(sr=r.current)===null||sr===void 0||sr.update(Yt)}))}},[i]),(0,K.useEffect)(function(){return u.current?(o.current||(o.current=u8(i)),r.current=new e(u.current,vB({},i)),c&&r.current.once("loaded",function(){c(r.current)}),function(){r.current&&(r.current.destroy(),r.current=void 0)}):function(){return null}},[]),{plotRef:r,containerRef:u}}var ij=function(e,i){e&&((0,G.mf)(e)?e(i):e.current=i)},aj=function(){var e=function(i,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(o[c]=u[c])},e(i,r)};return function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(i,r);function o(){this.constructor=i}i.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),oj=function(e){aj(i,e);function i(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={hasError:!1},r.renderError=function(o){var u=r.props.errorTemplate;switch(o){default:return typeof u=="function"?u(o):u||K.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",o.message)}},r}return i.getDerivedStateFromError=function(r){return{hasError:!0,error:r}},i.getDerivedStateFromProps=function(r,o){return o.children!==r.children?{children:r.children,hasError:!1,error:void 0}:null},i.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):K.createElement(K.Fragment,null,this.props.children)},i}(K.Component),sj=oj,uj=k(24561),lj=function(e){var i=e.loadingTemplate,r=function(){return i||K.createElement(uj.ZP,{viewBox:"0 0 400 180",width:200,height:90,speed:1},K.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),K.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),K.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),K.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),K.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),K.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),K.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),K.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),K.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),K.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return K.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},r())},cj=lj,fj=function(e,i){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&i.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)i.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(r[o[u]]=e[o[u]]);return r},hj=(0,K.forwardRef)(function(e,i){var r=e.chartRef,o=e.containerStyle,u=o===void 0?{height:"inherit"}:o,c=e.className,p=e.loading,g=e.loadingTemplate,y=e.errorTemplate,w=fj(e,["chartRef","containerStyle","className","loading","loadingTemplate","errorTemplate"]),O=nj(tj,w),D=O.plotRef,V=O.containerRef;return(0,K.useEffect)(function(){ij(r,D.current)},[D.current]),(0,K.useImperativeHandle)(i,function(){return{getChart:function(){return D.current}}}),K.createElement(sj,{errorTemplate:y},p&&K.createElement(cj,{loadingTemplate:g}),K.createElement("div",{className:c,style:u,ref:V}))}),pj=hj},79611:function(ft,N,k){"use strict";var W=k(67294),K=k(19372),b=k(11924),G=k(79360),j=k(24770),q=k(80803),Q=function(te,Ce){var pe={};for(var fe in te)Object.prototype.hasOwnProperty.call(te,fe)&&Ce.indexOf(fe)<0&&(pe[fe]=te[fe]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,fe=Object.getOwnPropertySymbols(te);J<fe.length;J++)Ce.indexOf(fe[J])<0&&Object.prototype.propertyIsEnumerable.call(te,fe[J])&&(pe[fe[J]]=te[fe[J]]);return pe},ie=(0,W.forwardRef)(function(te,Ce){var pe=te.chartRef,fe=te.style,J=fe===void 0?{height:"inherit"}:fe,M=te.className,E=te.loading,ge=te.loadingTemplate,Se=te.errorTemplate,ze=Q(te,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),De=(0,b.Z)(K.$Q,ze),Ue=De.chart,at=De.container;return(0,W.useEffect)(function(){(0,G.J)(pe,Ue.current)},[Ue.current]),(0,W.useImperativeHandle)(Ce,function(){return{getChart:function(){return Ue.current}}}),W.createElement(j.Z,{errorTemplate:Se},E&&W.createElement(q.Z,{loadingTemplate:ge,theme:te.theme}),W.createElement("div",{className:M,style:J,ref:at}))});N.Z=ie},78677:function(ft,N,k){"use strict";var W=k(67294),K=k(19372),b=k(11924),G=k(79360),j=k(24770),q=k(80803),Q=function(te,Ce){var pe={};for(var fe in te)Object.prototype.hasOwnProperty.call(te,fe)&&Ce.indexOf(fe)<0&&(pe[fe]=te[fe]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,fe=Object.getOwnPropertySymbols(te);J<fe.length;J++)Ce.indexOf(fe[J])<0&&Object.prototype.propertyIsEnumerable.call(te,fe[J])&&(pe[fe[J]]=te[fe[J]]);return pe},ie=(0,W.forwardRef)(function(te,Ce){var pe=te.chartRef,fe=te.style,J=fe===void 0?{height:"inherit"}:fe,M=te.className,E=te.loading,ge=te.loadingTemplate,Se=te.errorTemplate,ze=Q(te,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),De=(0,b.Z)(K.sg,ze),Ue=De.chart,at=De.container;return(0,W.useEffect)(function(){(0,G.J)(pe,Ue.current)},[Ue.current]),(0,W.useImperativeHandle)(Ce,function(){return{getChart:function(){return Ue.current}}}),W.createElement(j.Z,{errorTemplate:Se},E&&W.createElement(q.Z,{loadingTemplate:ge,theme:te.theme}),W.createElement("div",{className:M,style:J,ref:at}))});N.Z=ie},80652:function(ft,N,k){"use strict";var W=k(67294),K=k(19372),b=k(11924),G=k(79360),j=k(24770),q=k(80803),Q=function(te,Ce){var pe={};for(var fe in te)Object.prototype.hasOwnProperty.call(te,fe)&&Ce.indexOf(fe)<0&&(pe[fe]=te[fe]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,fe=Object.getOwnPropertySymbols(te);J<fe.length;J++)Ce.indexOf(fe[J])<0&&Object.prototype.propertyIsEnumerable.call(te,fe[J])&&(pe[fe[J]]=te[fe[J]]);return pe},ie=(0,W.forwardRef)(function(te,Ce){var pe=te.chartRef,fe=te.style,J=fe===void 0?{height:"inherit"}:fe,M=te.className,E=te.loading,ge=te.loadingTemplate,Se=te.errorTemplate,ze=Q(te,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),De=(0,b.Z)(K.x1,ze),Ue=De.chart,at=De.container;return(0,W.useEffect)(function(){(0,G.J)(pe,Ue.current)},[Ue.current]),(0,W.useImperativeHandle)(Ce,function(){return{getChart:function(){return Ue.current}}}),W.createElement(j.Z,{errorTemplate:Se},E&&W.createElement(q.Z,{loadingTemplate:ge,theme:te.theme}),W.createElement("div",{className:M,style:J,ref:at}))});N.Z=ie},63430:function(ft,N,k){"use strict";var W=k(67294),K=k(19372),b=k(11924),G=k(79360),j=k(24770),q=k(80803),Q=function(te,Ce){var pe={};for(var fe in te)Object.prototype.hasOwnProperty.call(te,fe)&&Ce.indexOf(fe)<0&&(pe[fe]=te[fe]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,fe=Object.getOwnPropertySymbols(te);J<fe.length;J++)Ce.indexOf(fe[J])<0&&Object.prototype.propertyIsEnumerable.call(te,fe[J])&&(pe[fe[J]]=te[fe[J]]);return pe},ie=(0,W.forwardRef)(function(te,Ce){var pe=te.chartRef,fe=te.style,J=fe===void 0?{height:"inherit"}:fe,M=te.className,E=te.loading,ge=te.loadingTemplate,Se=te.errorTemplate,ze=Q(te,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),De=(0,b.Z)(K.by,ze),Ue=De.chart,at=De.container;return(0,W.useEffect)(function(){(0,G.J)(pe,Ue.current)},[Ue.current]),(0,W.useImperativeHandle)(Ce,function(){return{getChart:function(){return Ue.current}}}),W.createElement(j.Z,{errorTemplate:Se},E&&W.createElement(q.Z,{loadingTemplate:ge,theme:te.theme}),W.createElement("div",{className:M,style:J,ref:at}))});N.Z=ie},24770:function(ft,N,k){"use strict";var W=k(67294),K=function(){var G=function(j,q){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ie){Q.__proto__=ie}||function(Q,ie){for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(Q[te]=ie[te])},G(j,q)};return function(j,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");G(j,q);function Q(){this.constructor=j}j.prototype=q===null?Object.create(q):(Q.prototype=q.prototype,new Q)}}(),b=function(G){K(j,G);function j(){var q=G!==null&&G.apply(this,arguments)||this;return q.state={hasError:!1},q.renderError=function(Q){var ie=q.props.errorTemplate;switch(Q){default:return typeof ie=="function"?ie(Q):ie||W.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",Q.message)}},q}return j.getDerivedStateFromError=function(q){return{hasError:!0,error:q}},j.getDerivedStateFromProps=function(q,Q){return Q.children!==q.children?{children:q.children,hasError:!1,error:void 0}:null},j.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):W.createElement(W.Fragment,null,this.props.children)},j}(W.Component);N.Z=b},11924:function(ft,N,k){"use strict";k.d(N,{Z:function(){return Ae}});var W=k(67294),K=k(21030),b=k(73935),G=k.t(b,2),j=function(){return j=Object.assign||function(Le){for(var rt,ye=1,me=arguments.length;ye<me;ye++){rt=arguments[ye];for(var We in rt)Object.prototype.hasOwnProperty.call(rt,We)&&(Le[We]=rt[We])}return Le},j.apply(this,arguments)},q=function(Le,rt,ye,me){function We(Ve){return Ve instanceof ye?Ve:new ye(function(dt){dt(Ve)})}return new(ye||(ye=Promise))(function(Ve,dt){function Ht(Te){try{$e(me.next(Te))}catch(Xe){dt(Xe)}}function et(Te){try{$e(me.throw(Te))}catch(Xe){dt(Xe)}}function $e(Te){Te.done?Ve(Te.value):We(Te.value).then(Ht,et)}$e((me=me.apply(Le,rt||[])).next())})},Q=function(Le,rt){var ye={label:0,sent:function(){if(Ve[0]&1)throw Ve[1];return Ve[1]},trys:[],ops:[]},me,We,Ve,dt;return dt={next:Ht(0),throw:Ht(1),return:Ht(2)},typeof Symbol=="function"&&(dt[Symbol.iterator]=function(){return this}),dt;function Ht($e){return function(Te){return et([$e,Te])}}function et($e){if(me)throw new TypeError("Generator is already executing.");for(;dt&&(dt=0,$e[0]&&(ye=0)),ye;)try{if(me=1,We&&(Ve=$e[0]&2?We.return:$e[0]?We.throw||((Ve=We.return)&&Ve.call(We),0):We.next)&&!(Ve=Ve.call(We,$e[1])).done)return Ve;switch(We=0,Ve&&($e=[$e[0]&2,Ve.value]),$e[0]){case 0:case 1:Ve=$e;break;case 4:return ye.label++,{value:$e[1],done:!1};case 5:ye.label++,We=$e[1],$e=[0];continue;case 7:$e=ye.ops.pop(),ye.trys.pop();continue;default:if(Ve=ye.trys,!(Ve=Ve.length>0&&Ve[Ve.length-1])&&($e[0]===6||$e[0]===2)){ye=0;continue}if($e[0]===3&&(!Ve||$e[1]>Ve[0]&&$e[1]<Ve[3])){ye.label=$e[1];break}if($e[0]===6&&ye.label<Ve[1]){ye.label=Ve[1],Ve=$e;break}if(Ve&&ye.label<Ve[2]){ye.label=Ve[2],ye.ops.push($e);break}Ve[2]&&ye.ops.pop(),ye.trys.pop();continue}$e=rt.call(Le,ye)}catch(Te){$e=[6,Te],We=0}finally{me=Ve=0}if($e[0]&5)throw $e[1];return{value:$e[0]?$e[1]:void 0,done:!0}}},ie=j({},G),te=ie.version,Ce=ie.render,pe=ie.unmountComponentAtNode,fe;try{var J=Number((te||"").split(".")[0]);J>=18&&(fe=ie.createRoot)}catch(Le){}function M(Le){var rt=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;rt&&typeof rt=="object"&&(rt.usingClientEntryPoint=Le)}var E="__rc_react_root__";function ge(Le,rt){M(!0);var ye=rt[E]||fe(rt);M(!1),ye.render(Le),rt[E]=ye}function Se(Le,rt){Ce(Le,rt)}function ze(Le,rt){}function De(Le,rt){if(fe){ge(Le,rt);return}Se(Le,rt)}function Ue(Le){return q(this,void 0,void 0,function(){return Q(this,function(rt){return[2,Promise.resolve().then(function(){var ye;(ye=Le[E])===null||ye===void 0||ye.unmount(),delete Le[E]})]})})}function at(Le){pe(Le)}function Je(Le){}function Ze(Le){return q(this,void 0,void 0,function(){return Q(this,function(rt){return fe!==void 0?[2,Ue(Le)]:(at(Le),[2])})})}var xe=new Map,_e=function(Le,rt,ye){var me=document.createElement("div");return rt==="tooltip"&&(me.setAttribute("data-uuid",ye),xe.has(ye)?me=xe.get(ye):xe.set(ye,me),me.className="g2-tooltip"),De(Le,me),me},He=_e,Ke=function(Le,rt){var ye={}.toString;return ye.call(Le)==="[object ".concat(rt,"]")},Et=function(Le){if(!Le)return Le;var rt={};for(var ye in Le)rt[ye]=Le[ye];return rt},ke=function(Le){return Object.prototype.toString.call(Le).slice(8,-1)},qe=function(Le){if(!Le||typeof Le!="object")return Le;var rt;return Array.isArray(Le)?rt=Le.map(function(ye){return qe(ye)}):(rt={},Object.keys(Le).forEach(function(ye){return rt[ye]=qe(Le[ye])})),rt},ne=function(Le,rt){for(var ye=Le,me=0;me<rt.length;me+=1)if(ye!=null&&ye[rt[me]])ye=ye[rt[me]];else{ye=void 0;break}return ye},Ge=function(Le,rt,ye){if(!Le)return Le;var me=Le;return rt.forEach(function(We,Ve){Ve<rt.length-1?me=me[We]:me[We]=ye}),Le},oe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Le){var rt=Math.random()*16|0,ye=Le=="x"?rt:rt&3|8;return ye.toString(16)})},Fe=function(){return Fe=Object.assign||function(Le){for(var rt,ye=1,me=arguments.length;ye<me;ye++){rt=arguments[ye];for(var We in rt)Object.prototype.hasOwnProperty.call(rt,We)&&(Le[We]=rt[We])}return Le},Fe.apply(this,arguments)},ut=function(Le,rt){var ye={};for(var me in Le)Object.prototype.hasOwnProperty.call(Le,me)&&rt.indexOf(me)<0&&(ye[me]=Le[me]);if(Le!=null&&typeof Object.getOwnPropertySymbols=="function")for(var We=0,me=Object.getOwnPropertySymbols(Le);We<me.length;We++)rt.indexOf(me[We])<0&&Object.prototype.propertyIsEnumerable.call(Le,me[We])&&(ye[me[We]]=Le[me[We]]);return ye};function Ae(Le,rt){var ye=(0,W.useRef)(),me=(0,W.useRef)(),We=(0,W.useRef)(null),Ve=rt.onReady,dt=rt.onEvent,Ht=function(Xe,pt){var Oe;return Xe===void 0&&(Xe="image/png"),(Oe=ye.current)===null||Oe===void 0?void 0:Oe.chart.canvas.cfg.el.toDataURL(Xe,pt)},et=function(Xe,pt,Oe){var Be;Xe===void 0&&(Xe="download"),pt===void 0&&(pt="image/png");var vt=Xe;Xe.indexOf(".")===-1&&(vt="".concat(Xe,".").concat(pt.split("/")[1]));var Rt=(Be=ye.current)===null||Be===void 0?void 0:Be.chart.canvas.cfg.el.toDataURL(pt,Oe),rr=document.createElement("a");return rr.href=Rt,rr.download=vt,document.body.appendChild(rr),rr.click(),document.body.removeChild(rr),rr=null,vt},$e=function(Xe,pt,Oe,Be){var vt=ne(Xe,pt);Ge(Xe,pt,function(){for(var Rt=[],rr=0;rr<arguments.length;rr++)Rt[rr]=arguments[rr];var br=Ke(vt,"Function")?vt.apply(void 0,Rt):vt;return Ke(br,"String")||Ke(br,"Number")||Ke(br,"HTMLDivElement")?br:He(br,Oe,Be)})},Te=function(){var Xe=oe();ne(rt,["statistic","content","customHtml"])&&$e(rt,["statistic","content","customHtml"]),ne(rt,["statistic","title","customHtml"])&&$e(rt,["statistic","title","customHtml"]),typeof rt.tooltip=="object"&&(ne(rt,["tooltip","container"])&&$e(rt,["tooltip","container"],"tooltip",Xe),ne(rt,["tooltip","customContent"])&&$e(rt,["tooltip","customContent"],"tooltip",Xe))};return(0,W.useEffect)(function(){if(ye.current&&!(0,K.Xy)(me.current,rt)){var Xe=!1;if(me.current){var pt=me.current,Oe=pt.data,Be=pt.value,vt=pt.percent,Rt=ut(pt,["data","value","percent"]),rr=rt.data,br=rt.value,lt=rt.percent,an=ut(rt,["data","value","percent"]);Xe=(0,K.Xy)(Rt,an)}if(me.current=qe(rt),Xe&&(0,K.U2)(rt,"chartType")!=="Mix"){var $r="data",Xr=["percent"],Nt=Object.keys(rt);Xr.forEach(function(Kt){Nt.includes(Kt)&&($r=Kt)}),ye.current.changeData((rt==null?void 0:rt[$r])||[]),ye.current.render()}else Te(),ye.current.update(rt)}},[rt]),(0,W.useEffect)(function(){if(!We.current)return function(){return null};me.current||(me.current=qe(rt)),Te();var Xe=new Le(We.current,Fe({},rt));Xe.toDataURL=function(Oe,Be){return Ht(Oe,Be)},Xe.downloadImage=function(Oe,Be,vt){return et(Oe,Be,vt)},Xe.render(),ye.current=Et(Xe),Ve&&Ve(Xe);var pt=function(Oe){dt&&dt(Xe,Oe)};return Xe.on("*",pt),function(){ye.current&&(ye.current.destroy(),ye.current.off("*",pt),ye.current=void 0)}},[]),{chart:ye,container:We}}},80803:function(ft,N,k){"use strict";var W=k(67294),K=k(24561),b=function(G){var j=G.loadingTemplate,q=G.theme,Q=q===void 0?"light":q,ie=function(){return j||W.createElement(K.ZP,{viewBox:"0 0 400 180",width:200,height:90,speed:1,backgroundColor:Q==="dark"?"#262626":"#D9D9D9"},W.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),W.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),W.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),W.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),W.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),W.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),W.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),W.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),W.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),W.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return W.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:Q==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},ie())};N.Z=b},79360:function(ft,N,k){"use strict";k.d(N,{J:function(){return K}});var W=k(21030),K=function(b,G){b&&((0,W.mf)(b)?b(G):b.current=G)}},13943:function(ft,N,k){"use strict";k.d(N,{Z:function(){return Fe}});var W=k(4942),K=k(1413),b=k(91),G=k(28459),j=k(93967),q=k.n(j),Q=k(67294),ie=k(72120),te=k(44962),Ce=k(64847),pe=function(Ae){return(0,W.Z)({},Ae.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:Ae.marginLG,marginInline:0,color:Ae.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function fe(ut){return(0,Ce.Xj)("ProCardOperation",function(Ae){var Le=(0,K.Z)((0,K.Z)({},Ae),{},{componentCls:".".concat(ut)});return[pe(Le)]})}var J=k(85893),M=function(Ae){var Le=Ae.className,rt=Ae.style,ye=rt===void 0?{}:rt,me=Ae.children,We=(0,Q.useContext)(G.ZP.ConfigContext),Ve=We.getPrefixCls,dt=Ve("pro-card-operation"),Ht=fe(dt),et=Ht.wrapSSR,$e=Ht.hashId,Te=q()(dt,Le,$e);return et((0,J.jsx)("div",{className:Te,style:ye,children:me}))},E=M,ge=k(87462),Se=k(36688),ze=k(54343),De=function(Ae,Le){return Q.createElement(ze.Z,(0,ge.Z)({},Ae,{ref:Le,icon:Se.Z}))},Ue=Q.forwardRef(De),at=k(83062),Je=k(40411),Ze=k(55054),xe=function(Ae){var Le,rt,ye;return(0,W.Z)({},Ae.componentCls,(ye={display:"flex",fontSize:Ae.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,W.Z)({display:"flex",width:"100%"},"".concat(Ae.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,W.Z)({width:"100%"},"".concat(Ae.antCls,"-statistic-content"),{"&-value-int":{fontSize:Ae.fontSizeHeading3}}),"&-description":{width:"100%"}},(0,W.Z)(ye,"".concat(Ae.antCls,"-statistic-title"),{color:Ae.colorText}),(0,W.Z)(ye,"&-trend-up",(0,W.Z)({},"".concat(Ae.antCls,"-statistic-content"),(0,W.Z)({color:"#f5222d"},"".concat(Ae.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),(0,W.Z)(ye,"&-trend-down",(0,W.Z)({},"".concat(Ae.antCls,"-statistic-content"),(0,W.Z)({color:"#389e0d"},"".concat(Ae.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),(0,W.Z)(ye,"& &-layout-horizontal",(Le={display:"flex",justifyContent:"space-between"},(0,W.Z)(Le,"".concat(Ae.antCls,"-statistic-title"),{marginBlockEnd:0}),(0,W.Z)(Le,"".concat(Ae.antCls,"-statistic-content-value"),{fontWeight:500}),(0,W.Z)(Le,"".concat(Ae.antCls,"-statistic-title,").concat(Ae.antCls,"-statistic-content,").concat(Ae.antCls,"-statistic-content-suffix,").concat(Ae.antCls,"-statistic-content-prefix,").concat(Ae.antCls,"-statistic-content-value-decimal"),{fontSize:Ae.fontSize}),Le)),(0,W.Z)(ye,"& &-layout-inline",(rt={display:"inline-flex",color:Ae.colorTextSecondary},(0,W.Z)(rt,"".concat(Ae.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),(0,W.Z)(rt,"".concat(Ae.antCls,"-statistic-content"),{color:Ae.colorTextSecondary}),(0,W.Z)(rt,"".concat(Ae.antCls,"-statistic-title,").concat(Ae.antCls,"-statistic-content,").concat(Ae.antCls,"-statistic-content-suffix,").concat(Ae.antCls,"-statistic-content-prefix,").concat(Ae.antCls,"-statistic-content-value-decimal"),{fontSize:Ae.fontSizeSM}),rt)),ye))};function _e(ut){return(0,Ce.Xj)("Statistic",function(Ae){var Le=(0,K.Z)((0,K.Z)({},Ae),{},{componentCls:".".concat(ut)});return[xe(Le)]})}var He=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],Ke=function(Ae){var Le,rt=Ae.className,ye=Ae.layout,me=ye===void 0?"inline":ye,We=Ae.style,Ve=Ae.description,dt=Ae.children,Ht=Ae.title,et=Ae.tip,$e=Ae.status,Te=Ae.trend,Xe=Ae.prefix,pt=Ae.icon,Oe=(0,b.Z)(Ae,He),Be=(0,Q.useContext)(G.ZP.ConfigContext),vt=Be.getPrefixCls,Rt=vt("pro-card-statistic"),rr=_e(Rt),br=rr.wrapSSR,lt=rr.hashId,an=q()(Rt,rt,lt),$r=q()("".concat(Rt,"-status"),lt),Xr=q()("".concat(Rt,"-icon"),lt),Nt=q()("".concat(Rt,"-wrapper"),lt),Kt=q()("".concat(Rt,"-content"),lt),or=q()(lt,(Le={},(0,W.Z)(Le,"".concat(Rt,"-layout-").concat(me),me),(0,W.Z)(Le,"".concat(Rt,"-trend-").concat(Te),Te),Le)),kt=et&&(0,J.jsx)(at.Z,{title:et,children:(0,J.jsx)(Ue,{className:"".concat(Rt,"-tip ").concat(lt).trim()})}),Jt=q()("".concat(Rt,"-trend-icon"),lt,(0,W.Z)({},"".concat(Rt,"-trend-icon-").concat(Te),Te)),Er=Te&&(0,J.jsx)("div",{className:Jt}),wr=$e&&(0,J.jsx)("div",{className:$r,children:(0,J.jsx)(Je.Z,{status:$e,text:null})}),Br=pt&&(0,J.jsx)("div",{className:Xr,children:pt});return br((0,J.jsxs)("div",{className:an,style:We,children:[Br,(0,J.jsxs)("div",{className:Nt,children:[wr,(0,J.jsxs)("div",{className:Kt,children:[(0,J.jsx)(Ze.Z,(0,K.Z)({title:(Ht||kt)&&(0,J.jsxs)(J.Fragment,{children:[Ht,kt]}),prefix:(Er||Xe)&&(0,J.jsxs)(J.Fragment,{children:[Er,Xe]}),className:or},Oe)),Ve&&(0,J.jsx)("div",{className:"".concat(Rt,"-description ").concat(lt).trim(),children:Ve})]})]})]}))},Et=Ke,ke=function(Ae){return(0,W.Z)({},Ae.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,W.Z)({flexDirection:"row"},"".concat(Ae.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(Ae.colorBorder)}})};function qe(ut){return(0,Ce.Xj)("StatisticCard",function(Ae){var Le=(0,K.Z)((0,K.Z)({},Ae),{},{componentCls:".".concat(ut)});return[ke(Le)]})}var ne=["children","statistic","className","chart","chartPlacement","footer"],Ge=function(Ae){var Le,rt=Ae.children,ye=Ae.statistic,me=Ae.className,We=Ae.chart,Ve=Ae.chartPlacement,dt=Ae.footer,Ht=(0,b.Z)(Ae,ne),et=(0,Q.useContext)(G.ZP.ConfigContext),$e=et.getPrefixCls,Te=$e("pro-statistic-card"),Xe=qe(Te),pt=Xe.wrapSSR,Oe=Xe.hashId,Be=q()(Te,me,Oe),vt=ye&&(0,J.jsx)(Et,(0,K.Z)({layout:"vertical"},ye)),Rt=q()("".concat(Te,"-chart"),Oe,(Le={},(0,W.Z)(Le,"".concat(Te,"-chart-left"),Ve==="left"&&We&&ye),(0,W.Z)(Le,"".concat(Te,"-chart-right"),Ve==="right"&&We&&ye),Le)),rr=We&&(0,J.jsx)("div",{className:Rt,children:We}),br=q()("".concat(Te,"-content "),Oe,(0,W.Z)({},"".concat(Te,"-content-horizontal"),Ve==="left"||Ve==="right")),lt=(rr||vt)&&(Ve==="left"?(0,J.jsxs)("div",{className:br,children:[rr,vt]}):(0,J.jsxs)("div",{className:br,children:[vt,rr]})),an=dt&&(0,J.jsx)("div",{className:"".concat(Te,"-footer ").concat(Oe).trim(),children:dt});return pt((0,J.jsxs)(ie.Z,(0,K.Z)((0,K.Z)({className:Be},Ht),{},{children:[lt,rt,an]})))},oe=function(Ae){return(0,J.jsx)(Ge,(0,K.Z)({bodyStyle:{padding:0}},Ae))};Ge.Statistic=Et,Ge.Divider=te.Z,Ge.Operation=E,Ge.isProCard=!0,Ge.Group=oe;var Fe=Ge},6056:function(ft,N,k){"use strict";k.d(N,{Z:function(){return q}});var W,K,b,G;function j(){W=document.createElement("table"),K=document.createElement("tr"),b=/^\s*<(\w+|!)[^>]*>/,G={tr:document.createElement("tbody"),tbody:W,thead:W,tfoot:W,td:K,th:K,"*":document.createElement("div")}}function q(Q){W||j();var ie=b.test(Q)&&RegExp.$1;(!ie||!(ie in G))&&(ie="*");var te=G[ie];Q=typeof Q=="string"?Q.replace(/(^\s*)|(\s*$)/g,""):Q,te.innerHTML=""+Q;var Ce=te.childNodes[0];return Ce&&te.contains(Ce)&&te.removeChild(Ce),Ce}},45442:function(ft,N,k){"use strict";k.d(N,{Z:function(){return W}});function W(K,b){if(K)for(var G in b)b.hasOwnProperty(G)&&(K.style[G]=b[G]);return K}},90494:function(ft,N){"use strict";var k="*",W=function(){function K(){this._events={}}return K.prototype.on=function(b,G,j){return this._events[b]||(this._events[b]=[]),this._events[b].push({callback:G,once:!!j}),this},K.prototype.once=function(b,G){return this.on(b,G,!0)},K.prototype.emit=function(b){for(var G=this,j=[],q=1;q<arguments.length;q++)j[q-1]=arguments[q];var Q=this._events[b]||[],ie=this._events[k]||[],te=function(Ce){for(var pe=Ce.length,fe=0;fe<pe;fe++)if(Ce[fe]){var J=Ce[fe],M=J.callback,E=J.once;E&&(Ce.splice(fe,1),Ce.length===0&&delete G._events[b],pe--,fe--),M.apply(G,j)}};te(Q),te(ie)},K.prototype.off=function(b,G){if(!b)this._events={};else if(!G)delete this._events[b];else{for(var j=this._events[b]||[],q=j.length,Q=0;Q<q;Q++)j[Q].callback===G&&(j.splice(Q,1),q--,Q--);j.length===0&&delete this._events[b]}return this},K.prototype.getEvents=function(){return this._events},K}();N.Z=W},2667:function(ft,N,k){"use strict";var W=k(97582),K=k(90494),b=k(77341),G=function(j){(0,W.ZT)(q,j);function q(Q){var ie=j.call(this)||this;ie.destroyed=!1;var te=ie.getDefaultCfg();return ie.cfg=(0,b.CD)(te,Q),ie}return q.prototype.getDefaultCfg=function(){return{}},q.prototype.get=function(Q){return this.cfg[Q]},q.prototype.set=function(Q,ie){this.cfg[Q]=ie},q.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},q}(K.Z);N.Z=G},58906:function(ft,N,k){"use strict";k.d(N,{Z:function(){return Po}});var W=k(97582),K=k(43631),b=k(37153),G=k(77341),j=k(21030),q=0,Q=0,ie=0,te=1e3,Ce,pe,fe=0,J=0,M=0,E=typeof performance=="object"&&performance.now?performance:Date,ge=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(cr){setTimeout(cr,17)};function Se(){return J||(ge(ze),J=E.now()+M)}function ze(){J=0}function De(){this._call=this._time=this._next=null}De.prototype=Ue.prototype={constructor:De,restart:function(cr,Ot,qt){if(typeof cr!="function")throw new TypeError("callback is not a function");qt=(qt==null?Se():+qt)+(Ot==null?0:+Ot),!this._next&&pe!==this&&(pe?pe._next=this:Ce=this,pe=this),this._call=cr,this._time=qt,_e()},stop:function(){this._call&&(this._call=null,this._time=1/0,_e())}};function Ue(cr,Ot,qt){var Mr=new De;return Mr.restart(cr,Ot,qt),Mr}function at(){Se(),++q;for(var cr=Ce,Ot;cr;)(Ot=J-cr._time)>=0&&cr._call.call(null,Ot),cr=cr._next;--q}function Je(){J=(fe=E.now())+M,q=Q=0;try{at()}finally{q=0,xe(),J=0}}function Ze(){var cr=E.now(),Ot=cr-fe;Ot>te&&(M-=Ot,fe=cr)}function xe(){for(var cr,Ot=Ce,qt,Mr=1/0;Ot;)Ot._call?(Mr>Ot._time&&(Mr=Ot._time),cr=Ot,Ot=Ot._next):(qt=Ot._next,Ot._next=null,Ot=cr?cr._next=qt:Ce=qt);pe=cr,_e(Mr)}function _e(cr){if(!q){Q&&(Q=clearTimeout(Q));var Ot=cr-J;Ot>24?(cr<1/0&&(Q=setTimeout(Je,cr-E.now()-M)),ie&&(ie=clearInterval(ie))):(ie||(fe=E.now(),ie=setInterval(Ze,te)),q=1,ge(Je))}}var He=k(52677);function Ke(cr,Ot,qt){cr.prototype=Ot.prototype=qt,qt.constructor=cr}function Et(cr,Ot){var qt=Object.create(cr.prototype);for(var Mr in Ot)qt[Mr]=Ot[Mr];return qt}function ke(){}var qe=.7,ne=1/qe,Ge="\\s*([+-]?\\d+)\\s*",oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ut=/^#([0-9a-f]{3,8})$/,Ae=new RegExp("^rgb\\(".concat(Ge,",").concat(Ge,",").concat(Ge,"\\)$")),Le=new RegExp("^rgb\\(".concat(Fe,",").concat(Fe,",").concat(Fe,"\\)$")),rt=new RegExp("^rgba\\(".concat(Ge,",").concat(Ge,",").concat(Ge,",").concat(oe,"\\)$")),ye=new RegExp("^rgba\\(".concat(Fe,",").concat(Fe,",").concat(Fe,",").concat(oe,"\\)$")),me=new RegExp("^hsl\\(".concat(oe,",").concat(Fe,",").concat(Fe,"\\)$")),We=new RegExp("^hsla\\(".concat(oe,",").concat(Fe,",").concat(Fe,",").concat(oe,"\\)$")),Ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ke(ke,Te,{copy:function(Ot){return Object.assign(new this.constructor,this,Ot)},displayable:function(){return this.rgb().displayable()},hex:dt,formatHex:dt,formatHex8:Ht,formatHsl:et,formatRgb:$e,toString:$e});function dt(){return this.rgb().formatHex()}function Ht(){return this.rgb().formatHex8()}function et(){return Nt(this).formatHsl()}function $e(){return this.rgb().formatRgb()}function Te(cr){var Ot,qt;return cr=(cr+"").trim().toLowerCase(),(Ot=ut.exec(cr))?(qt=Ot[1].length,Ot=parseInt(Ot[1],16),qt===6?Xe(Ot):qt===3?new vt(Ot>>8&15|Ot>>4&240,Ot>>4&15|Ot&240,(Ot&15)<<4|Ot&15,1):qt===8?pt(Ot>>24&255,Ot>>16&255,Ot>>8&255,(Ot&255)/255):qt===4?pt(Ot>>12&15|Ot>>8&240,Ot>>8&15|Ot>>4&240,Ot>>4&15|Ot&240,((Ot&15)<<4|Ot&15)/255):null):(Ot=Ae.exec(cr))?new vt(Ot[1],Ot[2],Ot[3],1):(Ot=Le.exec(cr))?new vt(Ot[1]*255/100,Ot[2]*255/100,Ot[3]*255/100,1):(Ot=rt.exec(cr))?pt(Ot[1],Ot[2],Ot[3],Ot[4]):(Ot=ye.exec(cr))?pt(Ot[1]*255/100,Ot[2]*255/100,Ot[3]*255/100,Ot[4]):(Ot=me.exec(cr))?Xr(Ot[1],Ot[2]/100,Ot[3]/100,1):(Ot=We.exec(cr))?Xr(Ot[1],Ot[2]/100,Ot[3]/100,Ot[4]):Ve.hasOwnProperty(cr)?Xe(Ve[cr]):cr==="transparent"?new vt(NaN,NaN,NaN,0):null}function Xe(cr){return new vt(cr>>16&255,cr>>8&255,cr&255,1)}function pt(cr,Ot,qt,Mr){return Mr<=0&&(cr=Ot=qt=NaN),new vt(cr,Ot,qt,Mr)}function Oe(cr){return cr instanceof ke||(cr=Te(cr)),cr?(cr=cr.rgb(),new vt(cr.r,cr.g,cr.b,cr.opacity)):new vt}function Be(cr,Ot,qt,Mr){return arguments.length===1?Oe(cr):new vt(cr,Ot,qt,Mr==null?1:Mr)}function vt(cr,Ot,qt,Mr){this.r=+cr,this.g=+Ot,this.b=+qt,this.opacity=+Mr}Ke(vt,Be,Et(ke,{brighter:function(Ot){return Ot=Ot==null?ne:Math.pow(ne,Ot),new vt(this.r*Ot,this.g*Ot,this.b*Ot,this.opacity)},darker:function(Ot){return Ot=Ot==null?qe:Math.pow(qe,Ot),new vt(this.r*Ot,this.g*Ot,this.b*Ot,this.opacity)},rgb:function(){return this},clamp:function(){return new vt(an(this.r),an(this.g),an(this.b),lt(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rt,formatHex:Rt,formatHex8:rr,formatRgb:br,toString:br}));function Rt(){return"#".concat($r(this.r)).concat($r(this.g)).concat($r(this.b))}function rr(){return"#".concat($r(this.r)).concat($r(this.g)).concat($r(this.b)).concat($r((isNaN(this.opacity)?1:this.opacity)*255))}function br(){var cr=lt(this.opacity);return"".concat(cr===1?"rgb(":"rgba(").concat(an(this.r),", ").concat(an(this.g),", ").concat(an(this.b)).concat(cr===1?")":", ".concat(cr,")"))}function lt(cr){return isNaN(cr)?1:Math.max(0,Math.min(1,cr))}function an(cr){return Math.max(0,Math.min(255,Math.round(cr)||0))}function $r(cr){return cr=an(cr),(cr<16?"0":"")+cr.toString(16)}function Xr(cr,Ot,qt,Mr){return Mr<=0?cr=Ot=qt=NaN:qt<=0||qt>=1?cr=Ot=NaN:Ot<=0&&(cr=NaN),new or(cr,Ot,qt,Mr)}function Nt(cr){if(cr instanceof or)return new or(cr.h,cr.s,cr.l,cr.opacity);if(cr instanceof ke||(cr=Te(cr)),!cr)return new or;if(cr instanceof or)return cr;cr=cr.rgb();var Ot=cr.r/255,qt=cr.g/255,Mr=cr.b/255,rn=Math.min(Ot,qt,Mr),Pn=Math.max(Ot,qt,Mr),Bn=NaN,Cn=Pn-rn,Mi=(Pn+rn)/2;return Cn?(Ot===Pn?Bn=(qt-Mr)/Cn+(qt<Mr)*6:qt===Pn?Bn=(Mr-Ot)/Cn+2:Bn=(Ot-qt)/Cn+4,Cn/=Mi<.5?Pn+rn:2-Pn-rn,Bn*=60):Cn=Mi>0&&Mi<1?0:Bn,new or(Bn,Cn,Mi,cr.opacity)}function Kt(cr,Ot,qt,Mr){return arguments.length===1?Nt(cr):new or(cr,Ot,qt,Mr==null?1:Mr)}function or(cr,Ot,qt,Mr){this.h=+cr,this.s=+Ot,this.l=+qt,this.opacity=+Mr}Ke(or,Kt,Et(ke,{brighter:function(Ot){return Ot=Ot==null?ne:Math.pow(ne,Ot),new or(this.h,this.s,this.l*Ot,this.opacity)},darker:function(Ot){return Ot=Ot==null?qe:Math.pow(qe,Ot),new or(this.h,this.s,this.l*Ot,this.opacity)},rgb:function(){var Ot=this.h%360+(this.h<0)*360,qt=isNaN(Ot)||isNaN(this.s)?0:this.s,Mr=this.l,rn=Mr+(Mr<.5?Mr:1-Mr)*qt,Pn=2*Mr-rn;return new vt(Er(Ot>=240?Ot-240:Ot+120,Pn,rn),Er(Ot,Pn,rn),Er(Ot<120?Ot+240:Ot-120,Pn,rn),this.opacity)},clamp:function(){return new or(kt(this.h),Jt(this.s),Jt(this.l),lt(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ot=lt(this.opacity);return"".concat(Ot===1?"hsl(":"hsla(").concat(kt(this.h),", ").concat(Jt(this.s)*100,"%, ").concat(Jt(this.l)*100,"%").concat(Ot===1?")":", ".concat(Ot,")"))}}));function kt(cr){return cr=(cr||0)%360,cr<0?cr+360:cr}function Jt(cr){return Math.max(0,Math.min(1,cr||0))}function Er(cr,Ot,qt){return(cr<60?Ot+(qt-Ot)*cr/60:cr<180?qt:cr<240?Ot+(qt-Ot)*(240-cr)/60:Ot)*255}function wr(cr,Ot,qt,Mr,rn){var Pn=cr*cr,Bn=Pn*cr;return((1-3*cr+3*Pn-Bn)*Ot+(4-6*Pn+3*Bn)*qt+(1+3*cr+3*Pn-3*Bn)*Mr+Bn*rn)/6}function Br(cr){var Ot=cr.length-1;return function(qt){var Mr=qt<=0?qt=0:qt>=1?(qt=1,Ot-1):Math.floor(qt*Ot),rn=cr[Mr],Pn=cr[Mr+1],Bn=Mr>0?cr[Mr-1]:2*rn-Pn,Cn=Mr<Ot-1?cr[Mr+2]:2*Pn-rn;return wr((qt-Mr/Ot)*Ot,Bn,rn,Pn,Cn)}}function zr(cr){var Ot=cr.length;return function(qt){var Mr=Math.floor(((qt%=1)<0?++qt:qt)*Ot),rn=cr[(Mr+Ot-1)%Ot],Pn=cr[Mr%Ot],Bn=cr[(Mr+1)%Ot],Cn=cr[(Mr+2)%Ot];return wr((qt-Mr/Ot)*Ot,rn,Pn,Bn,Cn)}}var le=function(cr){return function(){return cr}};function H(cr,Ot){return function(qt){return cr+qt*Ot}}function re(cr,Ot,qt){return cr=Math.pow(cr,qt),Ot=Math.pow(Ot,qt)-cr,qt=1/qt,function(Mr){return Math.pow(cr+Mr*Ot,qt)}}function Ie(cr,Ot){var qt=Ot-cr;return qt?H(cr,qt>180||qt<-180?qt-360*Math.round(qt/360):qt):constant(isNaN(cr)?Ot:cr)}function Ye(cr){return(cr=+cr)==1?Ct:function(Ot,qt){return qt-Ot?re(Ot,qt,cr):le(isNaN(Ot)?qt:Ot)}}function Ct(cr,Ot){var qt=Ot-cr;return qt?H(cr,qt):le(isNaN(cr)?Ot:cr)}var ar=function cr(Ot){var qt=Ye(Ot);function Mr(rn,Pn){var Bn=qt((rn=Be(rn)).r,(Pn=Be(Pn)).r),Cn=qt(rn.g,Pn.g),Mi=qt(rn.b,Pn.b),Xi=Ct(rn.opacity,Pn.opacity);return function(Wo){return rn.r=Bn(Wo),rn.g=Cn(Wo),rn.b=Mi(Wo),rn.opacity=Xi(Wo),rn+""}}return Mr.gamma=cr,Mr}(1);function jt(cr){return function(Ot){var qt=Ot.length,Mr=new Array(qt),rn=new Array(qt),Pn=new Array(qt),Bn,Cn;for(Bn=0;Bn<qt;++Bn)Cn=Be(Ot[Bn]),Mr[Bn]=Cn.r||0,rn[Bn]=Cn.g||0,Pn[Bn]=Cn.b||0;return Mr=cr(Mr),rn=cr(rn),Pn=cr(Pn),Cn.opacity=1,function(Mi){return Cn.r=Mr(Mi),Cn.g=rn(Mi),Cn.b=Pn(Mi),Cn+""}}}var wt=jt(Br),Mt=jt(zr);function ve(cr,Ot){Ot||(Ot=[]);var qt=cr?Math.min(Ot.length,cr.length):0,Mr=Ot.slice(),rn;return function(Pn){for(rn=0;rn<qt;++rn)Mr[rn]=cr[rn]*(1-Pn)+Ot[rn]*Pn;return Mr}}function he(cr){return ArrayBuffer.isView(cr)&&!(cr instanceof DataView)}function Re(cr,Ot){return(he(Ot)?ve:tt)(cr,Ot)}function tt(cr,Ot){var qt=Ot?Ot.length:0,Mr=cr?Math.min(qt,cr.length):0,rn=new Array(Mr),Pn=new Array(qt),Bn;for(Bn=0;Bn<Mr;++Bn)rn[Bn]=Ft(cr[Bn],Ot[Bn]);for(;Bn<qt;++Bn)Pn[Bn]=Ot[Bn];return function(Cn){for(Bn=0;Bn<Mr;++Bn)Pn[Bn]=rn[Bn](Cn);return Pn}}function St(cr,Ot){var qt=new Date;return cr=+cr,Ot=+Ot,function(Mr){return qt.setTime(cr*(1-Mr)+Ot*Mr),qt}}function Gt(cr,Ot){return cr=+cr,Ot=+Ot,function(qt){return cr*(1-qt)+Ot*qt}}function gr(cr,Ot){var qt={},Mr={},rn;(cr===null||He(cr)!=="object")&&(cr={}),(Ot===null||He(Ot)!=="object")&&(Ot={});for(rn in Ot)rn in cr?qt[rn]=Ft(cr[rn],Ot[rn]):Mr[rn]=Ot[rn];return function(Pn){for(rn in qt)Mr[rn]=qt[rn](Pn);return Mr}}var At=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,st=new RegExp(At.source,"g");function Pt(cr){return function(){return cr}}function yr(cr){return function(Ot){return cr(Ot)+""}}function Fr(cr,Ot){var qt=At.lastIndex=st.lastIndex=0,Mr,rn,Pn,Bn=-1,Cn=[],Mi=[];for(cr=cr+"",Ot=Ot+"";(Mr=At.exec(cr))&&(rn=st.exec(Ot));)(Pn=rn.index)>qt&&(Pn=Ot.slice(qt,Pn),Cn[Bn]?Cn[Bn]+=Pn:Cn[++Bn]=Pn),(Mr=Mr[0])===(rn=rn[0])?Cn[Bn]?Cn[Bn]+=rn:Cn[++Bn]=rn:(Cn[++Bn]=null,Mi.push({i:Bn,x:Gt(Mr,rn)})),qt=st.lastIndex;return qt<Ot.length&&(Pn=Ot.slice(qt),Cn[Bn]?Cn[Bn]+=Pn:Cn[++Bn]=Pn),Cn.length<2?Mi[0]?yr(Mi[0].x):Pt(Ot):(Ot=Mi.length,function(Xi){for(var Wo=0,os;Wo<Ot;++Wo)Cn[(os=Mi[Wo]).i]=os.x(Xi);return Cn.join("")})}function Ft(cr,Ot){var qt=He(Ot),Mr;return Ot==null||qt==="boolean"?le(Ot):(qt==="number"?Gt:qt==="string"?(Mr=Te(Ot))?(Ot=Mr,ar):Fr:Ot instanceof Te?ar:Ot instanceof Date?St:he(Ot)?ve:Array.isArray(Ot)?tt:typeof Ot.valueOf!="function"&&typeof Ot.toString!="function"||isNaN(Ot)?gr:Gt)(cr,Ot)}var Mn=k(93924),ei=k(47575),ni=function(cr){return["fill","stroke","fillStyle","strokeStyle"].includes(cr)},un=function(cr){return/^[r,R,L,l]{1}[\s]*\(/.test(cr)},Xn=[1,0,0,0,1,0,0,0,1];function Wn(cr,Ot,qt){var Mr={},rn=Ot.fromAttrs,Pn=Ot.toAttrs;if(!cr.destroyed){var Bn;for(var Cn in Pn)if(!(0,j.Xy)(rn[Cn],Pn[Cn]))if(Cn==="path"){var Mi=Pn[Cn],Xi=rn[Cn];Mi.length>Xi.length?(Mi=ei.parsePathString(Pn[Cn]),Xi=ei.parsePathString(rn[Cn]),Xi=ei.fillPathByDiff(Xi,Mi),Xi=ei.formatPath(Xi,Mi),Ot.fromAttrs.path=Xi,Ot.toAttrs.path=Mi):Ot.pathFormatted||(Mi=ei.parsePathString(Pn[Cn]),Xi=ei.parsePathString(rn[Cn]),Xi=ei.formatPath(Xi,Mi),Ot.fromAttrs.path=Xi,Ot.toAttrs.path=Mi,Ot.pathFormatted=!0),Mr[Cn]=[];for(var Wo=0;Wo<Mi.length;Wo++){for(var os=Mi[Wo],Su=Xi[Wo],Oo=[],ro=0;ro<os.length;ro++)(0,j.hj)(os[ro])&&Su&&(0,j.hj)(Su[ro])?(Bn=Ft(Su[ro],os[ro]),Oo.push(Bn(qt))):Oo.push(os[ro]);Mr[Cn].push(Oo)}}else if(Cn==="matrix"){var cu=Re(rn[Cn]||Xn,Pn[Cn]||Xn),Qo=cu(qt);Mr[Cn]=Qo}else ni(Cn)&&un(Pn[Cn])?Mr[Cn]=Pn[Cn]:(0,j.mf)(Pn[Cn])||(Bn=Ft(rn[Cn],Pn[Cn]),Mr[Cn]=Bn(qt));cr.attr(Mr)}}function Jn(cr,Ot,qt){var Mr=Ot.startTime,rn=Ot.delay;if(qt<Mr+rn||Ot._paused)return!1;var Pn,Bn=Ot.duration,Cn=Ot.easing,Mi=(0,Mn._)(Cn);if(qt=qt-Mr-Ot.delay,Ot.repeat)Pn=qt%Bn/Bn,Pn=Mi(Pn);else if(Pn=qt/Bn,Pn<1)Pn=Mi(Pn);else return Ot.onFrame?cr.attr(Ot.onFrame(1)):cr.attr(Ot.toAttrs),!0;if(Ot.onFrame){var Xi=Ot.onFrame(Pn);cr.attr(Xi)}else Wn(cr,Ot,Pn);return!1}var sa=function(){function cr(Ot){this.animators=[],this.current=0,this.timer=null,this.canvas=Ot}return cr.prototype.initTimer=function(){var Ot=this,qt=!1,Mr,rn,Pn;this.timer=Ue(function(Bn){if(Ot.current=Bn,Ot.animators.length>0){for(var Cn=Ot.animators.length-1;Cn>=0;Cn--){if(Mr=Ot.animators[Cn],Mr.destroyed){Ot.removeAnimator(Cn);continue}if(!Mr.isAnimatePaused()){rn=Mr.get("animations");for(var Mi=rn.length-1;Mi>=0;Mi--)Pn=rn[Mi],qt=Jn(Mr,Pn,Bn),qt&&(rn.splice(Mi,1),qt=!1,Pn.callback&&Pn.callback())}rn.length===0&&Ot.removeAnimator(Cn)}var Xi=Ot.canvas.get("autoDraw");Xi||Ot.canvas.draw()}})},cr.prototype.addAnimator=function(Ot){this.animators.push(Ot)},cr.prototype.removeAnimator=function(Ot){this.animators.splice(Ot,1)},cr.prototype.isAnimating=function(){return!!this.animators.length},cr.prototype.stop=function(){this.timer&&this.timer.stop()},cr.prototype.stopAllAnimations=function(Ot){Ot===void 0&&(Ot=!0),this.animators.forEach(function(qt){qt.stopAnimate(Ot)}),this.animators=[],this.canvas.draw()},cr.prototype.getTime=function(){return this.current},cr}(),vi=sa,ga=k(89473),Ra=40,ya=0,ja=":",ba=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function gs(cr,Ot){for(var qt in cr)if(cr.hasOwnProperty(qt)&&qt.indexOf(ja+Ot)>=0)return!0;return!1}function co(cr,Ot,qt){qt.name=Ot,qt.target=cr,qt.currentTarget=cr,qt.delegateTarget=cr,cr.emit(Ot,qt)}function Io(cr,Ot,qt){if(qt.bubbles){var Mr=void 0,rn=!1;if(Ot==="mouseenter"?(Mr=qt.fromShape,rn=!0):Ot==="mouseleave"&&(rn=!0,Mr=qt.toShape),cr.isCanvas()&&rn)return;if(Mr&&(0,G.UY)(cr,Mr)){qt.bubbles=!1;return}qt.name=Ot,qt.currentTarget=cr,qt.delegateTarget=cr,cr.emit(Ot,qt)}}var oi=function(){function cr(Ot){var qt=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(Mr){var rn=Mr.type;qt._triggerEvent(rn,Mr)},this._onDocumentMove=function(Mr){var rn=qt.canvas,Pn=rn.get("el");if(Pn!==Mr.target&&(qt.dragging||qt.currentShape)){var Bn=qt._getPointInfo(Mr);qt.dragging&&qt._emitEvent("drag",Mr,Bn,qt.draggingShape)}},this._onDocumentMouseUp=function(Mr){var rn=qt.canvas,Pn=rn.get("el");if(Pn!==Mr.target&&qt.dragging){var Bn=qt._getPointInfo(Mr);qt.draggingShape&&qt._emitEvent("drop",Mr,Bn,null),qt._emitEvent("dragend",Mr,Bn,qt.draggingShape),qt._afterDrag(qt.draggingShape,Bn,Mr)}},this.canvas=Ot.canvas}return cr.prototype.init=function(){this._bindEvents()},cr.prototype._bindEvents=function(){var Ot=this,qt=this.canvas.get("el");(0,G.S6)(ba,function(Mr){qt.addEventListener(Mr,Ot._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},cr.prototype._clearEvents=function(){var Ot=this,qt=this.canvas.get("el");(0,G.S6)(ba,function(Mr){qt.removeEventListener(Mr,Ot._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},cr.prototype._getEventObj=function(Ot,qt,Mr,rn,Pn,Bn){var Cn=new ga.Z(Ot,qt);return Cn.fromShape=Pn,Cn.toShape=Bn,Cn.x=Mr.x,Cn.y=Mr.y,Cn.clientX=Mr.clientX,Cn.clientY=Mr.clientY,Cn.propagationPath.push(rn),Cn},cr.prototype._getShape=function(Ot,qt){return this.canvas.getShape(Ot.x,Ot.y,qt)},cr.prototype._getPointInfo=function(Ot){var qt=this.canvas,Mr=qt.getClientByEvent(Ot),rn=qt.getPointByEvent(Ot);return{x:rn.x,y:rn.y,clientX:Mr.x,clientY:Mr.y}},cr.prototype._triggerEvent=function(Ot,qt){var Mr=this._getPointInfo(qt),rn=this._getShape(Mr,qt),Pn=this["_on"+Ot],Bn=!1;if(Pn)Pn.call(this,Mr,rn,qt);else{var Cn=this.currentShape;Ot==="mouseenter"||Ot==="dragenter"||Ot==="mouseover"?(this._emitEvent(Ot,qt,Mr,null,null,rn),rn&&this._emitEvent(Ot,qt,Mr,rn,null,rn),Ot==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",qt,Mr,null)):Ot==="mouseleave"||Ot==="dragleave"||Ot==="mouseout"?(Bn=!0,Cn&&this._emitEvent(Ot,qt,Mr,Cn,Cn,null),this._emitEvent(Ot,qt,Mr,null,Cn,null),Ot==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",qt,Mr,null)):this._emitEvent(Ot,qt,Mr,rn,null,null)}if(Bn||(this.currentShape=rn),rn&&!rn.get("destroyed")){var Mi=this.canvas,Xi=Mi.get("el");Xi.style.cursor=rn.attr("cursor")||Mi.get("cursor")}},cr.prototype._onmousedown=function(Ot,qt,Mr){Mr.button===ya&&(this.mousedownShape=qt,this.mousedownPoint=Ot,this.mousedownTimeStamp=Mr.timeStamp),this._emitEvent("mousedown",Mr,Ot,qt,null,null)},cr.prototype._emitMouseoverEvents=function(Ot,qt,Mr,rn){var Pn=this.canvas.get("el");Mr!==rn&&(Mr&&(this._emitEvent("mouseout",Ot,qt,Mr,Mr,rn),this._emitEvent("mouseleave",Ot,qt,Mr,Mr,rn),(!rn||rn.get("destroyed"))&&(Pn.style.cursor=this.canvas.get("cursor"))),rn&&(this._emitEvent("mouseover",Ot,qt,rn,Mr,rn),this._emitEvent("mouseenter",Ot,qt,rn,Mr,rn)))},cr.prototype._emitDragoverEvents=function(Ot,qt,Mr,rn,Pn){rn?(rn!==Mr&&(Mr&&this._emitEvent("dragleave",Ot,qt,Mr,Mr,rn),this._emitEvent("dragenter",Ot,qt,rn,Mr,rn)),Pn||this._emitEvent("dragover",Ot,qt,rn)):Mr&&this._emitEvent("dragleave",Ot,qt,Mr,Mr,rn),Pn&&this._emitEvent("dragover",Ot,qt,rn)},cr.prototype._afterDrag=function(Ot,qt,Mr){Ot&&(Ot.set("capture",!0),this.draggingShape=null),this.dragging=!1;var rn=this._getShape(qt,Mr);rn!==Ot&&this._emitMouseoverEvents(Mr,qt,Ot,rn),this.currentShape=rn},cr.prototype._onmouseup=function(Ot,qt,Mr){if(Mr.button===ya){var rn=this.draggingShape;this.dragging?(rn&&this._emitEvent("drop",Mr,Ot,qt),this._emitEvent("dragend",Mr,Ot,rn),this._afterDrag(rn,Ot,Mr)):(this._emitEvent("mouseup",Mr,Ot,qt),qt===this.mousedownShape&&this._emitEvent("click",Mr,Ot,qt),this.mousedownShape=null,this.mousedownPoint=null)}},cr.prototype._ondragover=function(Ot,qt,Mr){Mr.preventDefault();var rn=this.currentShape;this._emitDragoverEvents(Mr,Ot,rn,qt,!0)},cr.prototype._onmousemove=function(Ot,qt,Mr){var rn=this.canvas,Pn=this.currentShape,Bn=this.draggingShape;if(this.dragging)Bn&&this._emitDragoverEvents(Mr,Ot,Pn,qt,!1),this._emitEvent("drag",Mr,Ot,Bn);else{var Cn=this.mousedownPoint;if(Cn){var Mi=this.mousedownShape,Xi=Mr.timeStamp,Wo=Xi-this.mousedownTimeStamp,os=Cn.clientX-Ot.clientX,Su=Cn.clientY-Ot.clientY,Oo=os*os+Su*Su;Wo>120||Oo>Ra?Mi&&Mi.get("draggable")?(Bn=this.mousedownShape,Bn.set("capture",!1),this.draggingShape=Bn,this.dragging=!0,this._emitEvent("dragstart",Mr,Ot,Bn),this.mousedownShape=null,this.mousedownPoint=null):!Mi&&rn.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",Mr,Ot,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(Mr,Ot,Pn,qt),this._emitEvent("mousemove",Mr,Ot,qt)):(this._emitMouseoverEvents(Mr,Ot,Pn,qt),this._emitEvent("mousemove",Mr,Ot,qt))}else this._emitMouseoverEvents(Mr,Ot,Pn,qt),this._emitEvent("mousemove",Mr,Ot,qt)}},cr.prototype._emitEvent=function(Ot,qt,Mr,rn,Pn,Bn){var Cn=this._getEventObj(Ot,qt,Mr,rn,Pn,Bn);if(rn){Cn.shape=rn,co(rn,Ot,Cn);for(var Mi=rn.getParent();Mi;)Mi.emitDelegation(Ot,Cn),Cn.propagationStopped||Io(Mi,Ot,Cn),Cn.propagationPath.push(Mi),Mi=Mi.getParent()}else{var Xi=this.canvas;co(Xi,Ot,Cn)}},cr.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},cr}(),Si=oi,Qi="px",Wa=(0,K.qY)(),ms=Wa&&Wa.name==="firefox",ho=function(cr){(0,W.ZT)(Ot,cr);function Ot(qt){var Mr=cr.call(this,qt)||this;return Mr.initContainer(),Mr.initDom(),Mr.initEvents(),Mr.initTimeline(),Mr}return Ot.prototype.getDefaultCfg=function(){var qt=cr.prototype.getDefaultCfg.call(this);return qt.cursor="default",qt.supportCSSTransform=!1,qt},Ot.prototype.initContainer=function(){var qt=this.get("container");(0,G.HD)(qt)&&(qt=document.getElementById(qt),this.set("container",qt))},Ot.prototype.initDom=function(){var qt=this.createDom();this.set("el",qt);var Mr=this.get("container");Mr.appendChild(qt),this.setDOMSize(this.get("width"),this.get("height"))},Ot.prototype.initEvents=function(){var qt=new Si({canvas:this});qt.init(),this.set("eventController",qt)},Ot.prototype.initTimeline=function(){var qt=new vi(this);this.set("timeline",qt)},Ot.prototype.setDOMSize=function(qt,Mr){var rn=this.get("el");G.jU&&(rn.style.width=qt+Qi,rn.style.height=Mr+Qi)},Ot.prototype.changeSize=function(qt,Mr){this.setDOMSize(qt,Mr),this.set("width",qt),this.set("height",Mr),this.onCanvasChange("changeSize")},Ot.prototype.getRenderer=function(){return this.get("renderer")},Ot.prototype.getCursor=function(){return this.get("cursor")},Ot.prototype.setCursor=function(qt){this.set("cursor",qt);var Mr=this.get("el");G.jU&&Mr&&(Mr.style.cursor=qt)},Ot.prototype.getPointByEvent=function(qt){var Mr=this.get("supportCSSTransform");if(Mr){if(ms&&!(0,G.kK)(qt.layerX)&&qt.layerX!==qt.offsetX)return{x:qt.layerX,y:qt.layerY};if(!(0,G.kK)(qt.offsetX))return{x:qt.offsetX,y:qt.offsetY}}var rn=this.getClientByEvent(qt),Pn=rn.x,Bn=rn.y;return this.getPointByClient(Pn,Bn)},Ot.prototype.getClientByEvent=function(qt){var Mr=qt;return qt.touches&&(qt.type==="touchend"?Mr=qt.changedTouches[0]:Mr=qt.touches[0]),{x:Mr.clientX,y:Mr.clientY}},Ot.prototype.getPointByClient=function(qt,Mr){var rn=this.get("el"),Pn=rn.getBoundingClientRect();return{x:qt-Pn.left,y:Mr-Pn.top}},Ot.prototype.getClientByPoint=function(qt,Mr){var rn=this.get("el"),Pn=rn.getBoundingClientRect();return{x:qt+Pn.left,y:Mr+Pn.top}},Ot.prototype.draw=function(){},Ot.prototype.removeDom=function(){var qt=this.get("el");qt.parentNode.removeChild(qt)},Ot.prototype.clearEvents=function(){var qt=this.get("eventController");qt.destroy()},Ot.prototype.isCanvas=function(){return!0},Ot.prototype.getParent=function(){return null},Ot.prototype.destroy=function(){var qt=this.get("timeline");this.get("destroyed")||(this.clear(),qt&&qt.stop(),this.clearEvents(),this.removeDom(),cr.prototype.destroy.call(this))},Ot}(b.Z),Po=ho},37153:function(ft,N,k){"use strict";var W=k(97582),K=k(29881),b=k(77341),G={},j="_INDEX";function q(fe,J){if(fe.set("canvas",J),fe.isGroup()){var M=fe.get("children");M.length&&M.forEach(function(E){q(E,J)})}}function Q(fe,J){if(fe.set("timeline",J),fe.isGroup()){var M=fe.get("children");M.length&&M.forEach(function(E){Q(E,J)})}}function ie(fe,J){var M=fe.getChildren();return M.indexOf(J)>=0}function te(fe,J,M){M===void 0&&(M=!0),M?J.destroy():(J.set("parent",null),J.set("canvas",null)),(0,b.As)(fe.getChildren(),J)}function Ce(fe){return function(J,M){var E=fe(J,M);return E===0?J[j]-M[j]:E}}var pe=function(fe){(0,W.ZT)(J,fe);function J(){return fe!==null&&fe.apply(this,arguments)||this}return J.prototype.isCanvas=function(){return!1},J.prototype.getBBox=function(){var M=1/0,E=-1/0,ge=1/0,Se=-1/0,ze=this.getChildren().filter(function(Ue){return Ue.get("visible")&&(!Ue.isGroup()||Ue.isGroup()&&Ue.getChildren().length>0)});ze.length>0?(0,b.S6)(ze,function(Ue){var at=Ue.getBBox(),Je=at.minX,Ze=at.maxX,xe=at.minY,_e=at.maxY;Je<M&&(M=Je),Ze>E&&(E=Ze),xe<ge&&(ge=xe),_e>Se&&(Se=_e)}):(M=0,E=0,ge=0,Se=0);var De={x:M,y:ge,minX:M,minY:ge,maxX:E,maxY:Se,width:E-M,height:Se-ge};return De},J.prototype.getCanvasBBox=function(){var M=1/0,E=-1/0,ge=1/0,Se=-1/0,ze=this.getChildren().filter(function(Ue){return Ue.get("visible")&&(!Ue.isGroup()||Ue.isGroup()&&Ue.getChildren().length>0)});ze.length>0?(0,b.S6)(ze,function(Ue){var at=Ue.getCanvasBBox(),Je=at.minX,Ze=at.maxX,xe=at.minY,_e=at.maxY;Je<M&&(M=Je),Ze>E&&(E=Ze),xe<ge&&(ge=xe),_e>Se&&(Se=_e)}):(M=0,E=0,ge=0,Se=0);var De={x:M,y:ge,minX:M,minY:ge,maxX:E,maxY:Se,width:E-M,height:Se-ge};return De},J.prototype.getDefaultCfg=function(){var M=fe.prototype.getDefaultCfg.call(this);return M.children=[],M},J.prototype.onAttrChange=function(M,E,ge){if(fe.prototype.onAttrChange.call(this,M,E,ge),M==="matrix"){var Se=this.getTotalMatrix();this._applyChildrenMarix(Se)}},J.prototype.applyMatrix=function(M){var E=this.getTotalMatrix();fe.prototype.applyMatrix.call(this,M);var ge=this.getTotalMatrix();ge!==E&&this._applyChildrenMarix(ge)},J.prototype._applyChildrenMarix=function(M){var E=this.getChildren();(0,b.S6)(E,function(ge){ge.applyMatrix(M)})},J.prototype.addShape=function(){for(var M=[],E=0;E<arguments.length;E++)M[E]=arguments[E];var ge=M[0],Se=M[1];(0,b.Kn)(ge)?Se=ge:Se.type=ge;var ze=G[Se.type];ze||(ze=(0,b.jC)(Se.type),G[Se.type]=ze);var De=this.getShapeBase(),Ue=new De[ze](Se);return this.add(Ue),Ue},J.prototype.addGroup=function(){for(var M=[],E=0;E<arguments.length;E++)M[E]=arguments[E];var ge=M[0],Se=M[1],ze;if((0,b.mf)(ge))Se?ze=new ge(Se):ze=new ge({parent:this});else{var De=ge||{},Ue=this.getGroupBase();ze=new Ue(De)}return this.add(ze),ze},J.prototype.getCanvas=function(){var M;return this.isCanvas()?M=this:M=this.get("canvas"),M},J.prototype.getShape=function(M,E,ge){if(!(0,b.pP)(this))return null;var Se=this.getChildren(),ze;if(this.isCanvas())ze=this._findShape(Se,M,E,ge);else{var De=[M,E,1];De=this.invertFromMatrix(De),this.isClipped(De[0],De[1])||(ze=this._findShape(Se,De[0],De[1],ge))}return ze},J.prototype._findShape=function(M,E,ge,Se){for(var ze=null,De=M.length-1;De>=0;De--){var Ue=M[De];if((0,b.pP)(Ue)&&(Ue.isGroup()?ze=Ue.getShape(E,ge,Se):Ue.isHit(E,ge)&&(ze=Ue)),ze)break}return ze},J.prototype.add=function(M){var E=this.getCanvas(),ge=this.getChildren(),Se=this.get("timeline"),ze=M.getParent();ze&&te(ze,M,!1),M.set("parent",this),E&&q(M,E),Se&&Q(M,Se),ge.push(M),M.onCanvasChange("add"),this._applyElementMatrix(M)},J.prototype._applyElementMatrix=function(M){var E=this.getTotalMatrix();E&&M.applyMatrix(E)},J.prototype.getChildren=function(){return this.get("children")},J.prototype.sort=function(){var M=this.getChildren();(0,b.S6)(M,function(E,ge){return E[j]=ge,E}),M.sort(Ce(function(E,ge){return E.get("zIndex")-ge.get("zIndex")})),this.onCanvasChange("sort")},J.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var M=this.getChildren(),E=M.length-1;E>=0;E--)M[E].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},J.prototype.destroy=function(){this.get("destroyed")||(this.clear(),fe.prototype.destroy.call(this))},J.prototype.getFirst=function(){return this.getChildByIndex(0)},J.prototype.getLast=function(){var M=this.getChildren();return this.getChildByIndex(M.length-1)},J.prototype.getChildByIndex=function(M){var E=this.getChildren();return E[M]},J.prototype.getCount=function(){var M=this.getChildren();return M.length},J.prototype.contain=function(M){var E=this.getChildren();return E.indexOf(M)>-1},J.prototype.removeChild=function(M,E){E===void 0&&(E=!0),this.contain(M)&&M.remove(E)},J.prototype.findAll=function(M){var E=[],ge=this.getChildren();return(0,b.S6)(ge,function(Se){M(Se)&&E.push(Se),Se.isGroup()&&(E=E.concat(Se.findAll(M)))}),E},J.prototype.find=function(M){var E=null,ge=this.getChildren();return(0,b.S6)(ge,function(Se){if(M(Se)?E=Se:Se.isGroup()&&(E=Se.find(M)),E)return!1}),E},J.prototype.findById=function(M){return this.find(function(E){return E.get("id")===M})},J.prototype.findByClassName=function(M){return this.find(function(E){return E.get("className")===M})},J.prototype.findAllByName=function(M){return this.findAll(function(E){return E.get("name")===M})},J}(K.Z);N.Z=pe},29881:function(ft,N,k){"use strict";var W=k(97582),K=k(21030),b=k(31506),G=k(77341),j=k(41482),q=k(2667),Q=b.vs,ie="matrix",te=["zIndex","capture","visible","type"],Ce=["repeat"],pe=":",fe="*";function J(ze){for(var De=[],Ue=0;Ue<ze.length;Ue++)(0,K.kJ)(ze[Ue])?De.push([].concat(ze[Ue])):De.push(ze[Ue]);return De}function M(ze,De){var Ue={},at=De.attrs;for(var Je in ze)Ue[Je]=at[Je];return Ue}function E(ze,De){var Ue={},at=De.attr();return(0,K.S6)(ze,function(Je,Ze){Ce.indexOf(Ze)===-1&&!(0,K.Xy)(at[Ze],Je)&&(Ue[Ze]=Je)}),Ue}function ge(ze,De){if(De.onFrame)return ze;var Ue=De.startTime,at=De.delay,Je=De.duration,Ze=Object.prototype.hasOwnProperty;return(0,K.S6)(ze,function(xe){Ue+at<xe.startTime+xe.delay+xe.duration&&Je>xe.delay&&(0,K.S6)(De.toAttrs,function(_e,He){Ze.call(xe.toAttrs,He)&&(delete xe.toAttrs[He],delete xe.fromAttrs[He])})}),ze}var Se=function(ze){(0,W.ZT)(De,ze);function De(Ue){var at=ze.call(this,Ue)||this;at.attrs={};var Je=at.getDefaultAttrs();return(0,K.CD)(Je,Ue.attrs),at.attrs=Je,at.initAttrs(Je),at.initAnimate(),at}return De.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},De.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},De.prototype.onCanvasChange=function(Ue){},De.prototype.initAttrs=function(Ue){},De.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},De.prototype.isGroup=function(){return!1},De.prototype.getParent=function(){return this.get("parent")},De.prototype.getCanvas=function(){return this.get("canvas")},De.prototype.attr=function(){for(var Ue,at=[],Je=0;Je<arguments.length;Je++)at[Je]=arguments[Je];var Ze=at[0],xe=at[1];if(!Ze)return this.attrs;if((0,K.Kn)(Ze)){for(var _e in Ze)this.setAttr(_e,Ze[_e]);return this.afterAttrsChange(Ze),this}return at.length===2?(this.setAttr(Ze,xe),this.afterAttrsChange((Ue={},Ue[Ze]=xe,Ue)),this):this.attrs[Ze]},De.prototype.isClipped=function(Ue,at){var Je=this.getClip();return Je&&!Je.isHit(Ue,at)},De.prototype.setAttr=function(Ue,at){var Je=this.attrs[Ue];Je!==at&&(this.attrs[Ue]=at,this.onAttrChange(Ue,at,Je))},De.prototype.onAttrChange=function(Ue,at,Je){Ue==="matrix"&&this.set("totalMatrix",null)},De.prototype.afterAttrsChange=function(Ue){if(this.cfg.isClipShape){var at=this.cfg.applyTo;at&&at.onCanvasChange("clip")}else this.onCanvasChange("attr")},De.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},De.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},De.prototype.setZIndex=function(Ue){this.set("zIndex",Ue);var at=this.getParent();return at&&at.sort(),this},De.prototype.toFront=function(){var Ue=this.getParent();if(Ue){var at=Ue.getChildren(),Je=this.get("el"),Ze=at.indexOf(this);at.splice(Ze,1),at.push(this),this.onCanvasChange("zIndex")}},De.prototype.toBack=function(){var Ue=this.getParent();if(Ue){var at=Ue.getChildren(),Je=this.get("el"),Ze=at.indexOf(this);at.splice(Ze,1),at.unshift(this),this.onCanvasChange("zIndex")}},De.prototype.remove=function(Ue){Ue===void 0&&(Ue=!0);var at=this.getParent();at?((0,G.As)(at.getChildren(),this),at.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),Ue&&this.destroy()},De.prototype.resetMatrix=function(){this.attr(ie,this.getDefaultMatrix()),this.onCanvasChange("matrix")},De.prototype.getMatrix=function(){return this.attr(ie)},De.prototype.setMatrix=function(Ue){this.attr(ie,Ue),this.onCanvasChange("matrix")},De.prototype.getTotalMatrix=function(){var Ue=this.cfg.totalMatrix;if(!Ue){var at=this.attr("matrix"),Je=this.cfg.parentMatrix;Je&&at?Ue=(0,j.xq)(Je,at):Ue=at||Je,this.set("totalMatrix",Ue)}return Ue},De.prototype.applyMatrix=function(Ue){var at=this.attr("matrix"),Je=null;Ue&&at?Je=(0,j.xq)(Ue,at):Je=at||Ue,this.set("totalMatrix",Je),this.set("parentMatrix",Ue)},De.prototype.getDefaultMatrix=function(){return null},De.prototype.applyToMatrix=function(Ue){var at=this.attr("matrix");return at?(0,j.rG)(at,Ue):Ue},De.prototype.invertFromMatrix=function(Ue){var at=this.attr("matrix");if(at){var Je=(0,j.U_)(at);if(Je)return(0,j.rG)(Je,Ue)}return Ue},De.prototype.setClip=function(Ue){var at=this.getCanvas(),Je=null;if(Ue){var Ze=this.getShapeBase(),xe=(0,K.jC)(Ue.type),_e=Ze[xe];_e&&(Je=new _e({type:Ue.type,isClipShape:!0,applyTo:this,attrs:Ue.attrs,canvas:at}))}return this.set("clipShape",Je),this.onCanvasChange("clip"),Je},De.prototype.getClip=function(){var Ue=this.cfg.clipShape;return Ue||null},De.prototype.clone=function(){var Ue=this,at=this.attrs,Je={};(0,K.S6)(at,function(_e,He){(0,K.kJ)(at[He])?Je[He]=J(at[He]):Je[He]=at[He]});var Ze=this.constructor,xe=new Ze({attrs:Je});return(0,K.S6)(te,function(_e){xe.set(_e,Ue.get(_e))}),xe},De.prototype.destroy=function(){var Ue=this.destroyed;Ue||(this.attrs={},ze.prototype.destroy.call(this))},De.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},De.prototype.animate=function(){for(var Ue=[],at=0;at<arguments.length;at++)Ue[at]=arguments[at];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var Je=this.get("timeline");Je||(Je=this.get("canvas").get("timeline"),this.set("timeline",Je));var Ze=this.get("animations")||[];Je.timer||Je.initTimer();var xe=Ue[0],_e=Ue[1],He=Ue[2],Ke=He===void 0?"easeLinear":He,Et=Ue[3],ke=Et===void 0?K.ZT:Et,qe=Ue[4],ne=qe===void 0?0:qe,Ge,oe,Fe,ut,Ae;(0,K.mf)(xe)?(Ge=xe,xe={}):(0,K.Kn)(xe)&&xe.onFrame&&(Ge=xe.onFrame,oe=xe.repeat),(0,K.Kn)(_e)?(Ae=_e,_e=Ae.duration,Ke=Ae.easing||"easeLinear",ne=Ae.delay||0,oe=Ae.repeat||oe||!1,ke=Ae.callback||K.ZT,Fe=Ae.pauseCallback||K.ZT,ut=Ae.resumeCallback||K.ZT):((0,K.hj)(ke)&&(ne=ke,ke=null),(0,K.mf)(Ke)?(ke=Ke,Ke="easeLinear"):Ke=Ke||"easeLinear");var Le=E(xe,this),rt={fromAttrs:M(Le,this),toAttrs:Le,duration:_e,easing:Ke,repeat:oe,callback:ke,pauseCallback:Fe,resumeCallback:ut,delay:ne,startTime:Je.getTime(),id:(0,K.EL)(),onFrame:Ge,pathFormatted:!1};Ze.length>0?Ze=ge(Ze,rt):Je.addAnimator(this),Ze.push(rt),this.set("animations",Ze),this.set("_pause",{isPaused:!1})}},De.prototype.stopAnimate=function(Ue){var at=this;Ue===void 0&&(Ue=!0);var Je=this.get("animations");(0,K.S6)(Je,function(Ze){Ue&&(Ze.onFrame?at.attr(Ze.onFrame(1)):at.attr(Ze.toAttrs)),Ze.callback&&Ze.callback()}),this.set("animating",!1),this.set("animations",[])},De.prototype.pauseAnimate=function(){var Ue=this.get("timeline"),at=this.get("animations"),Je=Ue.getTime();return(0,K.S6)(at,function(Ze){Ze._paused=!0,Ze._pauseTime=Je,Ze.pauseCallback&&Ze.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:Je}),this},De.prototype.resumeAnimate=function(){var Ue=this.get("timeline"),at=Ue.getTime(),Je=this.get("animations"),Ze=this.get("_pause").pauseTime;return(0,K.S6)(Je,function(xe){xe.startTime=xe.startTime+(at-Ze),xe._paused=!1,xe._pauseTime=null,xe.resumeCallback&&xe.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",Je),this},De.prototype.emitDelegation=function(Ue,at){var Je=this,Ze=at.propagationPath,xe=this.getEvents(),_e;Ue==="mouseenter"?_e=at.fromShape:Ue==="mouseleave"&&(_e=at.toShape);for(var He=function(qe){var ne=Ze[qe],Ge=ne.get("name");if(Ge){if((ne.isGroup()||ne.isCanvas&&ne.isCanvas())&&_e&&(0,G.UY)(ne,_e))return"break";(0,K.kJ)(Ge)?(0,K.S6)(Ge,function(oe){Je.emitDelegateEvent(ne,oe,at)}):Ke.emitDelegateEvent(ne,Ge,at)}},Ke=this,Et=0;Et<Ze.length;Et++){var ke=He(Et);if(ke==="break")break}},De.prototype.emitDelegateEvent=function(Ue,at,Je){var Ze=this.getEvents(),xe=at+pe+Je.type;(Ze[xe]||Ze[fe])&&(Je.name=xe,Je.currentTarget=Ue,Je.delegateTarget=this,Je.delegateObject=Ue.get("delegateObject"),this.emit(xe,Je))},De.prototype.translate=function(Ue,at){Ue===void 0&&(Ue=0),at===void 0&&(at=0);var Je=this.getMatrix(),Ze=Q(Je,[["t",Ue,at]]);return this.setMatrix(Ze),this},De.prototype.move=function(Ue,at){var Je=this.attr("x")||0,Ze=this.attr("y")||0;return this.translate(Ue-Je,at-Ze),this},De.prototype.moveTo=function(Ue,at){return this.move(Ue,at)},De.prototype.scale=function(Ue,at){var Je=this.getMatrix(),Ze=Q(Je,[["s",Ue,at||Ue]]);return this.setMatrix(Ze),this},De.prototype.rotate=function(Ue){var at=this.getMatrix(),Je=Q(at,[["r",Ue]]);return this.setMatrix(Je),this},De.prototype.rotateAtStart=function(Ue){var at=this.attr(),Je=at.x,Ze=at.y,xe=this.getMatrix(),_e=Q(xe,[["t",-Je,-Ze],["r",Ue],["t",Je,Ze]]);return this.setMatrix(_e),this},De.prototype.rotateAtPoint=function(Ue,at,Je){var Ze=this.getMatrix(),xe=Q(Ze,[["t",-Ue,-at],["r",Je],["t",Ue,at]]);return this.setMatrix(xe),this},De}(q.Z);N.Z=Se},31841:function(ft,N,k){"use strict";var W=k(97582),K=k(37153),b=function(G){(0,W.ZT)(j,G);function j(){return G!==null&&G.apply(this,arguments)||this}return j.prototype.isGroup=function(){return!0},j.prototype.isEntityGroup=function(){return!1},j.prototype.clone=function(){for(var q=G.prototype.clone.call(this),Q=this.getChildren(),ie=0;ie<Q.length;ie++){var te=Q[ie];q.add(te.clone())}return q},j}(K.Z);N.Z=b},15032:function(ft,N,k){"use strict";var W=k(97582),K=k(29881),b=k(41482),G=function(j){(0,W.ZT)(q,j);function q(Q){return j.call(this,Q)||this}return q.prototype._isInBBox=function(Q,ie){var te=this.getBBox();return te.minX<=Q&&te.maxX>=Q&&te.minY<=ie&&te.maxY>=ie},q.prototype.afterAttrsChange=function(Q){j.prototype.afterAttrsChange.call(this,Q),this.clearCacheBBox()},q.prototype.getBBox=function(){var Q=this.cfg.bbox;return Q||(Q=this.calculateBBox(),this.set("bbox",Q)),Q},q.prototype.getCanvasBBox=function(){var Q=this.cfg.canvasBBox;return Q||(Q=this.calculateCanvasBBox(),this.set("canvasBBox",Q)),Q},q.prototype.applyMatrix=function(Q){j.prototype.applyMatrix.call(this,Q),this.set("canvasBBox",null)},q.prototype.calculateCanvasBBox=function(){var Q=this.getBBox(),ie=this.getTotalMatrix(),te=Q.minX,Ce=Q.minY,pe=Q.maxX,fe=Q.maxY;if(ie){var J=(0,b.rG)(ie,[Q.minX,Q.minY]),M=(0,b.rG)(ie,[Q.maxX,Q.minY]),E=(0,b.rG)(ie,[Q.minX,Q.maxY]),ge=(0,b.rG)(ie,[Q.maxX,Q.maxY]);te=Math.min(J[0],M[0],E[0],ge[0]),pe=Math.max(J[0],M[0],E[0],ge[0]),Ce=Math.min(J[1],M[1],E[1],ge[1]),fe=Math.max(J[1],M[1],E[1],ge[1])}var Se=this.attrs;if(Se.shadowColor){var ze=Se.shadowBlur,De=ze===void 0?0:ze,Ue=Se.shadowOffsetX,at=Ue===void 0?0:Ue,Je=Se.shadowOffsetY,Ze=Je===void 0?0:Je,xe=te-De+at,_e=pe+De+at,He=Ce-De+Ze,Ke=fe+De+Ze;te=Math.min(te,xe),pe=Math.max(pe,_e),Ce=Math.min(Ce,He),fe=Math.max(fe,Ke)}return{x:te,y:Ce,minX:te,minY:Ce,maxX:pe,maxY:fe,width:pe-te,height:fe-Ce}},q.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},q.prototype.isClipShape=function(){return this.get("isClipShape")},q.prototype.isInShape=function(Q,ie){return!1},q.prototype.isOnlyHitBox=function(){return!1},q.prototype.isHit=function(Q,ie){var te=this.get("startArrowShape"),Ce=this.get("endArrowShape"),pe=[Q,ie,1];pe=this.invertFromMatrix(pe);var fe=pe[0],J=pe[1],M=this._isInBBox(fe,J);return this.isOnlyHitBox()?M:!!(M&&!this.isClipped(fe,J)&&(this.isInShape(fe,J)||te&&te.isHit(fe,J)||Ce&&Ce.isHit(fe,J)))},q}(K.Z);N.Z=G},93924:function(ft,N,k){"use strict";k.d(N,{_:function(){return pt},C:function(){return Oe}});var W={};k.r(W),k.d(W,{easeBack:function(){return We},easeBackIn:function(){return ye},easeBackInOut:function(){return We},easeBackOut:function(){return me},easeBounce:function(){return Ae},easeBounceIn:function(){return ut},easeBounceInOut:function(){return Le},easeBounceOut:function(){return Ae},easeCircle:function(){return xe},easeCircleIn:function(){return Je},easeCircleInOut:function(){return xe},easeCircleOut:function(){return Ze},easeCubic:function(){return ie},easeCubicIn:function(){return q},easeCubicInOut:function(){return ie},easeCubicOut:function(){return Q},easeElastic:function(){return $e},easeElasticIn:function(){return et},easeElasticInOut:function(){return Te},easeElasticOut:function(){return $e},easeExp:function(){return at},easeExpIn:function(){return De},easeExpInOut:function(){return at},easeExpOut:function(){return Ue},easeLinear:function(){return K},easePoly:function(){return fe},easePolyIn:function(){return Ce},easePolyInOut:function(){return fe},easePolyOut:function(){return pe},easeQuad:function(){return j},easeQuadIn:function(){return b},easeQuadInOut:function(){return j},easeQuadOut:function(){return G},easeSin:function(){return Se},easeSinIn:function(){return E},easeSinInOut:function(){return Se},easeSinOut:function(){return ge}});function K(Be){return+Be}function b(Be){return Be*Be}function G(Be){return Be*(2-Be)}function j(Be){return((Be*=2)<=1?Be*Be:--Be*(2-Be)+1)/2}function q(Be){return Be*Be*Be}function Q(Be){return--Be*Be*Be+1}function ie(Be){return((Be*=2)<=1?Be*Be*Be:(Be-=2)*Be*Be+2)/2}var te=3,Ce=function Be(vt){vt=+vt;function Rt(rr){return Math.pow(rr,vt)}return Rt.exponent=Be,Rt}(te),pe=function Be(vt){vt=+vt;function Rt(rr){return 1-Math.pow(1-rr,vt)}return Rt.exponent=Be,Rt}(te),fe=function Be(vt){vt=+vt;function Rt(rr){return((rr*=2)<=1?Math.pow(rr,vt):2-Math.pow(2-rr,vt))/2}return Rt.exponent=Be,Rt}(te),J=Math.PI,M=J/2;function E(Be){return+Be==1?1:1-Math.cos(Be*M)}function ge(Be){return Math.sin(Be*M)}function Se(Be){return(1-Math.cos(J*Be))/2}function ze(Be){return(Math.pow(2,-10*Be)-.0009765625)*1.0009775171065494}function De(Be){return ze(1-+Be)}function Ue(Be){return 1-ze(Be)}function at(Be){return((Be*=2)<=1?ze(1-Be):2-ze(Be-1))/2}function Je(Be){return 1-Math.sqrt(1-Be*Be)}function Ze(Be){return Math.sqrt(1- --Be*Be)}function xe(Be){return((Be*=2)<=1?1-Math.sqrt(1-Be*Be):Math.sqrt(1-(Be-=2)*Be)+1)/2}var _e=4/11,He=6/11,Ke=8/11,Et=3/4,ke=9/11,qe=10/11,ne=15/16,Ge=21/22,oe=63/64,Fe=1/_e/_e;function ut(Be){return 1-Ae(1-Be)}function Ae(Be){return(Be=+Be)<_e?Fe*Be*Be:Be<Ke?Fe*(Be-=He)*Be+Et:Be<qe?Fe*(Be-=ke)*Be+ne:Fe*(Be-=Ge)*Be+oe}function Le(Be){return((Be*=2)<=1?1-Ae(1-Be):Ae(Be-1)+1)/2}var rt=1.70158,ye=function Be(vt){vt=+vt;function Rt(rr){return(rr=+rr)*rr*(vt*(rr-1)+rr)}return Rt.overshoot=Be,Rt}(rt),me=function Be(vt){vt=+vt;function Rt(rr){return--rr*rr*((rr+1)*vt+rr)+1}return Rt.overshoot=Be,Rt}(rt),We=function Be(vt){vt=+vt;function Rt(rr){return((rr*=2)<1?rr*rr*((vt+1)*rr-vt):(rr-=2)*rr*((vt+1)*rr+vt)+2)/2}return Rt.overshoot=Be,Rt}(rt),Ve=2*Math.PI,dt=1,Ht=.3,et=function Be(vt,Rt){var rr=Math.asin(1/(vt=Math.max(1,vt)))*(Rt/=Ve);function br(lt){return vt*ze(- --lt)*Math.sin((rr-lt)/Rt)}return br.amplitude=function(lt){return Be(lt,Rt*Ve)},br.period=function(lt){return Be(vt,lt)},br}(dt,Ht),$e=function Be(vt,Rt){var rr=Math.asin(1/(vt=Math.max(1,vt)))*(Rt/=Ve);function br(lt){return 1-vt*ze(lt=+lt)*Math.sin((lt+rr)/Rt)}return br.amplitude=function(lt){return Be(lt,Rt*Ve)},br.period=function(lt){return Be(vt,lt)},br}(dt,Ht),Te=function Be(vt,Rt){var rr=Math.asin(1/(vt=Math.max(1,vt)))*(Rt/=Ve);function br(lt){return((lt=lt*2-1)<0?vt*ze(-lt)*Math.sin((rr-lt)/Rt):2-vt*ze(lt)*Math.sin((rr+lt)/Rt))/2}return br.amplitude=function(lt){return Be(lt,Rt*Ve)},br.period=function(lt){return Be(vt,lt)},br}(dt,Ht),Xe={};function pt(Be){return Xe[Be.toLowerCase()]||W[Be]}function Oe(Be,vt){Xe[Be.toLowerCase()]=vt}},46556:function(ft,N,k){"use strict";k.d(N,{b:function(){return b},W:function(){return K}});var W=new Map;function K(Ue,at){W.set(Ue,at)}function b(Ue){return W.get(Ue)}function G(Ue){var at=Ue.attr(),Je=at.x,Ze=at.y,xe=at.width,_e=at.height;return{x:Je,y:Ze,width:xe,height:_e}}function j(Ue){var at=Ue.attr(),Je=at.x,Ze=at.y,xe=at.r;return{x:Je-xe,y:Ze-xe,width:xe*2,height:xe*2}}var q=k(32793);function Q(Ue,at){return!Ue||!at?Ue||at:{minX:Math.min(Ue.minX,at.minX),minY:Math.min(Ue.minY,at.minY),maxX:Math.max(Ue.maxX,at.maxX),maxY:Math.max(Ue.maxY,at.maxY)}}function ie(Ue,at){var Je=Ue.get("startArrowShape"),Ze=Ue.get("endArrowShape"),xe=null,_e=null;return Je&&(xe=Je.getCanvasBBox(),at=Q(at,xe)),Ze&&(_e=Ze.getCanvasBBox(),at=Q(at,_e)),at}function te(Ue){for(var at=Ue.attr(),Je=at.points,Ze=[],xe=[],_e=0;_e<Je.length;_e++){var He=Je[_e];Ze.push(He[0]),xe.push(He[1])}var Ke=q.Zr.getBBoxByArray(Ze,xe),Et=Ke.x,ke=Ke.y,qe=Ke.width,ne=Ke.height,Ge={minX:Et,minY:ke,maxX:Et+qe,maxY:ke+ne};return Ge=ie(Ue,Ge),{x:Ge.minX,y:Ge.minY,width:Ge.maxX-Ge.minX,height:Ge.maxY-Ge.minY}}function Ce(Ue){for(var at=Ue.attr(),Je=at.points,Ze=[],xe=[],_e=0;_e<Je.length;_e++){var He=Je[_e];Ze.push(He[0]),xe.push(He[1])}return q.Zr.getBBoxByArray(Ze,xe)}var pe=k(8723);function fe(Ue){var at=Ue.attr(),Je=at.x,Ze=at.y,xe=at.text,_e=at.fontSize,He=at.lineHeight,Ke=at.font;Ke||(Ke=(0,pe.$O)(at));var Et=(0,pe.mY)(xe,Ke),ke;if(!Et)ke={x:Je,y:Ze,width:0,height:0};else{var qe=at.textAlign,ne=at.textBaseline,Ge=(0,pe.FE)(xe,_e,He),oe={x:Je,y:Ze-Ge};qe&&(qe==="end"||qe==="right"?oe.x-=Et:qe==="center"&&(oe.x-=Et/2)),ne&&(ne==="top"?oe.y+=Ge:ne==="middle"&&(oe.y+=Ge/2)),ke={x:oe.x,y:oe.y,width:Et,height:Ge}}return ke}var J=k(39499),M=k(21030);function E(Ue,at){for(var Je=[],Ze=[],xe=[],_e=0;_e<Ue.length;_e++){var He=Ue[_e],Ke=He.currentPoint,Et=He.params,ke=He.prePoint,qe=void 0;switch(He.command){case"Q":qe=q.lD.box(ke[0],ke[1],Et[1],Et[2],Et[3],Et[4]);break;case"C":qe=q.Ll.box(ke[0],ke[1],Et[1],Et[2],Et[3],Et[4],Et[5],Et[6]);break;case"A":var ne=He.arcParams;qe=q.wN.box(ne.cx,ne.cy,ne.rx,ne.ry,ne.xRotation,ne.startAngle,ne.endAngle);break;default:Je.push(Ke[0]),Ze.push(Ke[1]);break}qe&&(He.box=qe,Je.push(qe.x,qe.x+qe.width),Ze.push(qe.y,qe.y+qe.height)),at&&(He.command==="L"||He.command==="M")&&He.prePoint&&He.nextPoint&&xe.push(He)}Je=Je.filter(function(Le){return!Number.isNaN(Le)&&Le!==1/0&&Le!==-1/0}),Ze=Ze.filter(function(Le){return!Number.isNaN(Le)&&Le!==1/0&&Le!==-1/0});var Ge=(0,M.VV)(Je),oe=(0,M.VV)(Ze),Fe=(0,M.Fp)(Je),ut=(0,M.Fp)(Ze);if(xe.length===0)return{x:Ge,y:oe,width:Fe-Ge,height:ut-oe};for(var _e=0;_e<xe.length;_e++){var He=xe[_e],Ke=He.currentPoint,Ae=void 0;Ke[0]===Ge?(Ae=ge(He,at),Ge=Ge-Ae.xExtra):Ke[0]===Fe&&(Ae=ge(He,at),Fe=Fe+Ae.xExtra),Ke[1]===oe?(Ae=ge(He,at),oe=oe-Ae.yExtra):Ke[1]===ut&&(Ae=ge(He,at),ut=ut+Ae.yExtra)}return{x:Ge,y:oe,width:Fe-Ge,height:ut-oe}}function ge(Ue,at){var Je=Ue.prePoint,Ze=Ue.currentPoint,xe=Ue.nextPoint,_e=Math.pow(Ze[0]-Je[0],2)+Math.pow(Ze[1]-Je[1],2),He=Math.pow(Ze[0]-xe[0],2)+Math.pow(Ze[1]-xe[1],2),Ke=Math.pow(Je[0]-xe[0],2)+Math.pow(Je[1]-xe[1],2),Et=Math.acos((_e+He-Ke)/(2*Math.sqrt(_e)*Math.sqrt(He)));if(!Et||Math.sin(Et)===0||(0,M.vQ)(Et,0))return{xExtra:0,yExtra:0};var ke=Math.abs(Math.atan2(xe[1]-Ze[1],xe[0]-Ze[0])),qe=Math.abs(Math.atan2(xe[0]-Ze[0],xe[1]-Ze[1]));ke=ke>Math.PI/2?Math.PI-ke:ke,qe=qe>Math.PI/2?Math.PI-qe:qe;var ne={xExtra:Math.cos(Et/2-ke)*(at/2*(1/Math.sin(Et/2)))-at/2||0,yExtra:Math.cos(qe-Et/2)*(at/2*(1/Math.sin(Et/2)))-at/2||0};return ne}function Se(Ue){var at=Ue.attr(),Je=at.path,Ze=at.stroke,xe=Ze?at.lineWidth:0,_e=Ue.get("segments")||(0,J.zx)(Je),He=E(_e,xe),Ke=He.x,Et=He.y,ke=He.width,qe=He.height,ne={minX:Ke,minY:Et,maxX:Ke+ke,maxY:Et+qe};return ne=ie(Ue,ne),{x:ne.minX,y:ne.minY,width:ne.maxX-ne.minX,height:ne.maxY-ne.minY}}function ze(Ue){var at=Ue.attr(),Je=at.x1,Ze=at.y1,xe=at.x2,_e=at.y2,He=Math.min(Je,xe),Ke=Math.max(Je,xe),Et=Math.min(Ze,_e),ke=Math.max(Ze,_e),qe={minX:He,maxX:Ke,minY:Et,maxY:ke};return qe=ie(Ue,qe),{x:qe.minX,y:qe.minY,width:qe.maxX-qe.minX,height:qe.maxY-qe.minY}}function De(Ue){var at=Ue.attr(),Je=at.x,Ze=at.y,xe=at.rx,_e=at.ry;return{x:Je-xe,y:Ze-_e,width:xe*2,height:_e*2}}K("rect",G),K("image",G),K("circle",j),K("marker",j),K("polyline",te),K("polygon",Ce),K("text",fe),K("path",Se),K("line",ze),K("ellipse",De)},89473:function(ft,N){"use strict";var k=function(){function W(K,b){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=K,this.name=K,this.originalEvent=b,this.timeStamp=b.timeStamp}return W.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},W.prototype.stopPropagation=function(){this.propagationStopped=!0},W.prototype.toString=function(){var K=this.type;return"[Event (type="+K+")]"},W.prototype.save=function(){},W.prototype.restore=function(){},W}();N.Z=k},98190:function(ft,N,k){"use strict";k.r(N),k.d(N,{AbstractCanvas:function(){return Ce.Z},AbstractGroup:function(){return pe.Z},AbstractShape:function(){return fe.Z},Base:function(){return te.Z},Event:function(){return ie.Z},PathUtil:function(){return W},assembleFont:function(){return M.$O},getBBoxMethod:function(){return J.b},getOffScreenContext:function(){return Se.L},getTextHeight:function(){return M.FE},invert:function(){return ge.U_},isAllowCapture:function(){return E.pP},multiplyVec2:function(){return ge.rG},registerBBox:function(){return J.W},registerEasing:function(){return ze.C},version:function(){return De}});var W=k(47575),K=k(52),b=k.n(K),Q={};for(var G in K)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(G)<0&&(Q[G]=function(Ue){return K[Ue]}.bind(0,G));k.d(N,Q);var j=k(19641),q=k.n(j),Q={};for(var G in j)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(G)<0&&(Q[G]=function(at){return j[at]}.bind(0,G));k.d(N,Q);var ie=k(89473),te=k(2667),Ce=k(58906),pe=k(31841),fe=k(15032),J=k(46556),M=k(8723),E=k(77341),ge=k(41482),Se=k(67052),ze=k(93924),De="0.5.11"},19641:function(){},52:function(){},41482:function(ft,N,k){"use strict";k.d(N,{U_:function(){return b},rG:function(){return K},xq:function(){return W}});function W(G,j){var q=[],Q=G[0],ie=G[1],te=G[2],Ce=G[3],pe=G[4],fe=G[5],J=G[6],M=G[7],E=G[8],ge=j[0],Se=j[1],ze=j[2],De=j[3],Ue=j[4],at=j[5],Je=j[6],Ze=j[7],xe=j[8];return q[0]=ge*Q+Se*Ce+ze*J,q[1]=ge*ie+Se*pe+ze*M,q[2]=ge*te+Se*fe+ze*E,q[3]=De*Q+Ue*Ce+at*J,q[4]=De*ie+Ue*pe+at*M,q[5]=De*te+Ue*fe+at*E,q[6]=Je*Q+Ze*Ce+xe*J,q[7]=Je*ie+Ze*pe+xe*M,q[8]=Je*te+Ze*fe+xe*E,q}function K(G,j){var q=[],Q=j[0],ie=j[1];return q[0]=G[0]*Q+G[3]*ie+G[6],q[1]=G[1]*Q+G[4]*ie+G[7],q}function b(G){var j=[],q=G[0],Q=G[1],ie=G[2],te=G[3],Ce=G[4],pe=G[5],fe=G[6],J=G[7],M=G[8],E=M*Ce-pe*J,ge=-M*te+pe*fe,Se=J*te-Ce*fe,ze=q*E+Q*ge+ie*Se;return ze?(ze=1/ze,j[0]=E*ze,j[1]=(-M*Q+ie*J)*ze,j[2]=(pe*Q-ie*Ce)*ze,j[3]=ge*ze,j[4]=(M*q-ie*fe)*ze,j[5]=(-pe*q+ie*te)*ze,j[6]=Se*ze,j[7]=(-J*q+Q*fe)*ze,j[8]=(Ce*q-Q*te)*ze,j):null}},67052:function(ft,N,k){"use strict";k.d(N,{L:function(){return K}});var W=null;function K(){if(!W){var b=document.createElement("canvas");b.width=1,b.height=1,W=b.getContext("2d")}return W}},47575:function(ft,N,k){"use strict";k.r(N),k.d(N,{catmullRomToBezier:function(){return q},fillPath:function(){return ne},fillPathByDiff:function(){return ut},formatPath:function(){return rt},intersection:function(){return Ke},parsePathArray:function(){return M},parsePathString:function(){return j},pathToAbsolute:function(){return ie},pathToCurve:function(){return fe},rectPath:function(){return Ue}});var W=k(21030),K=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,b=new RegExp("([a-z])["+K+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+K+"]*,?["+K+"]*)+)","ig"),G=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+K+"]*,?["+K+"]*","ig"),j=function(ye){if(!ye)return null;if((0,W.kJ)(ye))return ye;var me={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},We=[];return String(ye).replace(b,function(Ve,dt,Ht){var et=[],$e=dt.toLowerCase();if(Ht.replace(G,function(Te,Xe){Xe&&et.push(+Xe)}),$e==="m"&&et.length>2&&(We.push([dt].concat(et.splice(0,2))),$e="l",dt=dt==="m"?"l":"L"),$e==="o"&&et.length===1&&We.push([dt,et[0]]),$e==="r")We.push([dt].concat(et));else for(;et.length>=me[$e]&&(We.push([dt].concat(et.splice(0,me[$e]))),!!me[$e]););return ye}),We},q=function(ye,me){for(var We=[],Ve=0,dt=ye.length;dt-2*!me>Ve;Ve+=2){var Ht=[{x:+ye[Ve-2],y:+ye[Ve-1]},{x:+ye[Ve],y:+ye[Ve+1]},{x:+ye[Ve+2],y:+ye[Ve+3]},{x:+ye[Ve+4],y:+ye[Ve+5]}];me?Ve?dt-4===Ve?Ht[3]={x:+ye[0],y:+ye[1]}:dt-2===Ve&&(Ht[2]={x:+ye[0],y:+ye[1]},Ht[3]={x:+ye[2],y:+ye[3]}):Ht[0]={x:+ye[dt-2],y:+ye[dt-1]}:dt-4===Ve?Ht[3]=Ht[2]:Ve||(Ht[0]={x:+ye[Ve],y:+ye[Ve+1]}),We.push(["C",(-Ht[0].x+6*Ht[1].x+Ht[2].x)/6,(-Ht[0].y+6*Ht[1].y+Ht[2].y)/6,(Ht[1].x+6*Ht[2].x-Ht[3].x)/6,(Ht[1].y+6*Ht[2].y-Ht[3].y)/6,Ht[2].x,Ht[2].y])}return We},Q=function(ye,me,We,Ve,dt){var Ht=[];if(dt===null&&Ve===null&&(Ve=We),ye=+ye,me=+me,We=+We,Ve=+Ve,dt!==null){var et=Math.PI/180,$e=ye+We*Math.cos(-Ve*et),Te=ye+We*Math.cos(-dt*et),Xe=me+We*Math.sin(-Ve*et),pt=me+We*Math.sin(-dt*et);Ht=[["M",$e,Xe],["A",We,We,0,+(dt-Ve>180),0,Te,pt]]}else Ht=[["M",ye,me],["m",0,-Ve],["a",We,Ve,0,1,1,0,2*Ve],["a",We,Ve,0,1,1,0,-2*Ve],["z"]];return Ht},ie=function(ye){if(ye=j(ye),!ye||!ye.length)return[["M",0,0]];var me=[],We=0,Ve=0,dt=0,Ht=0,et=0,$e,Te;ye[0][0]==="M"&&(We=+ye[0][1],Ve=+ye[0][2],dt=We,Ht=Ve,et++,me[0]=["M",We,Ve]);for(var Xe=ye.length===3&&ye[0][0]==="M"&&ye[1][0].toUpperCase()==="R"&&ye[2][0].toUpperCase()==="Z",pt=void 0,Oe=void 0,Be=et,vt=ye.length;Be<vt;Be++){if(me.push(pt=[]),Oe=ye[Be],$e=Oe[0],$e!==$e.toUpperCase())switch(pt[0]=$e.toUpperCase(),pt[0]){case"A":pt[1]=Oe[1],pt[2]=Oe[2],pt[3]=Oe[3],pt[4]=Oe[4],pt[5]=Oe[5],pt[6]=+Oe[6]+We,pt[7]=+Oe[7]+Ve;break;case"V":pt[1]=+Oe[1]+Ve;break;case"H":pt[1]=+Oe[1]+We;break;case"R":Te=[We,Ve].concat(Oe.slice(1));for(var Rt=2,rr=Te.length;Rt<rr;Rt++)Te[Rt]=+Te[Rt]+We,Te[++Rt]=+Te[Rt]+Ve;me.pop(),me=me.concat(q(Te,Xe));break;case"O":me.pop(),Te=Q(We,Ve,Oe[1],Oe[2]),Te.push(Te[0]),me=me.concat(Te);break;case"U":me.pop(),me=me.concat(Q(We,Ve,Oe[1],Oe[2],Oe[3])),pt=["U"].concat(me[me.length-1].slice(-2));break;case"M":dt=+Oe[1]+We,Ht=+Oe[2]+Ve;break;default:for(var Rt=1,rr=Oe.length;Rt<rr;Rt++)pt[Rt]=+Oe[Rt]+(Rt%2?We:Ve)}else if($e==="R")Te=[We,Ve].concat(Oe.slice(1)),me.pop(),me=me.concat(q(Te,Xe)),pt=["R"].concat(Oe.slice(-2));else if($e==="O")me.pop(),Te=Q(We,Ve,Oe[1],Oe[2]),Te.push(Te[0]),me=me.concat(Te);else if($e==="U")me.pop(),me=me.concat(Q(We,Ve,Oe[1],Oe[2],Oe[3])),pt=["U"].concat(me[me.length-1].slice(-2));else for(var br=0,lt=Oe.length;br<lt;br++)pt[br]=Oe[br];if($e=$e.toUpperCase(),$e!=="O")switch(pt[0]){case"Z":We=+dt,Ve=+Ht;break;case"H":We=pt[1];break;case"V":Ve=pt[1];break;case"M":dt=pt[pt.length-2],Ht=pt[pt.length-1];break;default:We=pt[pt.length-2],Ve=pt[pt.length-1]}}return me},te=function(ye,me,We,Ve){return[ye,me,We,Ve,We,Ve]},Ce=function(ye,me,We,Ve,dt,Ht){var et=.3333333333333333,$e=2/3;return[et*ye+$e*We,et*me+$e*Ve,et*dt+$e*We,et*Ht+$e*Ve,dt,Ht]},pe=function(ye,me,We,Ve,dt,Ht,et,$e,Te,Xe){We===Ve&&(We+=1);var pt=Math.PI*120/180,Oe=Math.PI/180*(+dt||0),Be=[],vt,Rt,rr,br,lt,an=function(tt,St,Gt){var gr=tt*Math.cos(Gt)-St*Math.sin(Gt),At=tt*Math.sin(Gt)+St*Math.cos(Gt);return{x:gr,y:At}};if(Xe)Rt=Xe[0],rr=Xe[1],br=Xe[2],lt=Xe[3];else{vt=an(ye,me,-Oe),ye=vt.x,me=vt.y,vt=an($e,Te,-Oe),$e=vt.x,Te=vt.y,ye===$e&&me===Te&&($e+=1,Te+=1);var $r=(ye-$e)/2,Xr=(me-Te)/2,Nt=$r*$r/(We*We)+Xr*Xr/(Ve*Ve);Nt>1&&(Nt=Math.sqrt(Nt),We=Nt*We,Ve=Nt*Ve);var Kt=We*We,or=Ve*Ve,kt=(Ht===et?-1:1)*Math.sqrt(Math.abs((Kt*or-Kt*Xr*Xr-or*$r*$r)/(Kt*Xr*Xr+or*$r*$r)));br=kt*We*Xr/Ve+(ye+$e)/2,lt=kt*-Ve*$r/We+(me+Te)/2,Rt=Math.asin(((me-lt)/Ve).toFixed(9)),rr=Math.asin(((Te-lt)/Ve).toFixed(9)),Rt=ye<br?Math.PI-Rt:Rt,rr=$e<br?Math.PI-rr:rr,Rt<0&&(Rt=Math.PI*2+Rt),rr<0&&(rr=Math.PI*2+rr),et&&Rt>rr&&(Rt=Rt-Math.PI*2),!et&&rr>Rt&&(rr=rr-Math.PI*2)}var Jt=rr-Rt;if(Math.abs(Jt)>pt){var Er=rr,wr=$e,Br=Te;rr=Rt+pt*(et&&rr>Rt?1:-1),$e=br+We*Math.cos(rr),Te=lt+Ve*Math.sin(rr),Be=pe($e,Te,We,Ve,dt,0,et,wr,Br,[rr,Er,br,lt])}Jt=rr-Rt;var zr=Math.cos(Rt),le=Math.sin(Rt),H=Math.cos(rr),re=Math.sin(rr),Ie=Math.tan(Jt/4),Ye=4/3*We*Ie,Ct=4/3*Ve*Ie,ar=[ye,me],jt=[ye+Ye*le,me-Ct*zr],wt=[$e+Ye*re,Te-Ct*H],Mt=[$e,Te];if(jt[0]=2*ar[0]-jt[0],jt[1]=2*ar[1]-jt[1],Xe)return[jt,wt,Mt].concat(Be);Be=[jt,wt,Mt].concat(Be).join().split(",");for(var ve=[],he=0,Re=Be.length;he<Re;he++)ve[he]=he%2?an(Be[he-1],Be[he],Oe).y:an(Be[he],Be[he+1],Oe).x;return ve},fe=function(ye,me){var We=ie(ye),Ve=me&&ie(me),dt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Ht={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},et=[],$e=[],Te="",Xe="",pt,Oe=function($r,Xr,Nt){var Kt,or;if(!$r)return["C",Xr.x,Xr.y,Xr.x,Xr.y,Xr.x,Xr.y];switch(!($r[0]in{T:1,Q:1})&&(Xr.qx=Xr.qy=null),$r[0]){case"M":Xr.X=$r[1],Xr.Y=$r[2];break;case"A":$r=["C"].concat(pe.apply(0,[Xr.x,Xr.y].concat($r.slice(1))));break;case"S":Nt==="C"||Nt==="S"?(Kt=Xr.x*2-Xr.bx,or=Xr.y*2-Xr.by):(Kt=Xr.x,or=Xr.y),$r=["C",Kt,or].concat($r.slice(1));break;case"T":Nt==="Q"||Nt==="T"?(Xr.qx=Xr.x*2-Xr.qx,Xr.qy=Xr.y*2-Xr.qy):(Xr.qx=Xr.x,Xr.qy=Xr.y),$r=["C"].concat(Ce(Xr.x,Xr.y,Xr.qx,Xr.qy,$r[1],$r[2]));break;case"Q":Xr.qx=$r[1],Xr.qy=$r[2],$r=["C"].concat(Ce(Xr.x,Xr.y,$r[1],$r[2],$r[3],$r[4]));break;case"L":$r=["C"].concat(te(Xr.x,Xr.y,$r[1],$r[2]));break;case"H":$r=["C"].concat(te(Xr.x,Xr.y,$r[1],Xr.y));break;case"V":$r=["C"].concat(te(Xr.x,Xr.y,Xr.x,$r[1]));break;case"Z":$r=["C"].concat(te(Xr.x,Xr.y,Xr.X,Xr.Y));break;default:break}return $r},Be=function($r,Xr){if($r[Xr].length>7){$r[Xr].shift();for(var Nt=$r[Xr];Nt.length;)et[Xr]="A",Ve&&($e[Xr]="A"),$r.splice(Xr++,0,["C"].concat(Nt.splice(0,6)));$r.splice(Xr,1),pt=Math.max(We.length,Ve&&Ve.length||0)}},vt=function($r,Xr,Nt,Kt,or){$r&&Xr&&$r[or][0]==="M"&&Xr[or][0]!=="M"&&(Xr.splice(or,0,["M",Kt.x,Kt.y]),Nt.bx=0,Nt.by=0,Nt.x=$r[or][1],Nt.y=$r[or][2],pt=Math.max(We.length,Ve&&Ve.length||0))};pt=Math.max(We.length,Ve&&Ve.length||0);for(var Rt=0;Rt<pt;Rt++){We[Rt]&&(Te=We[Rt][0]),Te!=="C"&&(et[Rt]=Te,Rt&&(Xe=et[Rt-1])),We[Rt]=Oe(We[Rt],dt,Xe),et[Rt]!=="A"&&Te==="C"&&(et[Rt]="C"),Be(We,Rt),Ve&&(Ve[Rt]&&(Te=Ve[Rt][0]),Te!=="C"&&($e[Rt]=Te,Rt&&(Xe=$e[Rt-1])),Ve[Rt]=Oe(Ve[Rt],Ht,Xe),$e[Rt]!=="A"&&Te==="C"&&($e[Rt]="C"),Be(Ve,Rt)),vt(We,Ve,dt,Ht,Rt),vt(Ve,We,Ht,dt,Rt);var rr=We[Rt],br=Ve&&Ve[Rt],lt=rr.length,an=Ve&&br.length;dt.x=rr[lt-2],dt.y=rr[lt-1],dt.bx=parseFloat(rr[lt-4])||dt.x,dt.by=parseFloat(rr[lt-3])||dt.y,Ht.bx=Ve&&(parseFloat(br[an-4])||Ht.x),Ht.by=Ve&&(parseFloat(br[an-3])||Ht.y),Ht.x=Ve&&br[an-2],Ht.y=Ve&&br[an-1]}return Ve?[We,Ve]:We},J=/,?([a-z]),?/gi,M=function(ye){return ye.join(",").replace(J,"$1")},E=function(ye,me,We,Ve,dt){var Ht=-3*me+9*We-9*Ve+3*dt,et=ye*Ht+6*me-12*We+6*Ve;return ye*et-3*me+3*We},ge=function(ye,me,We,Ve,dt,Ht,et,$e,Te){Te===null&&(Te=1),Te=Te>1?1:Te<0?0:Te;for(var Xe=Te/2,pt=12,Oe=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Be=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],vt=0,Rt=0;Rt<pt;Rt++){var rr=Xe*Oe[Rt]+Xe,br=E(rr,ye,We,dt,et),lt=E(rr,me,Ve,Ht,$e),an=br*br+lt*lt;vt+=Be[Rt]*Math.sqrt(an)}return Xe*vt},Se=function(ye,me,We,Ve,dt,Ht,et,$e){for(var Te=[],Xe=[[],[]],pt,Oe,Be,vt,Rt=0;Rt<2;++Rt){if(Rt===0?(Oe=6*ye-12*We+6*dt,pt=-3*ye+9*We-9*dt+3*et,Be=3*We-3*ye):(Oe=6*me-12*Ve+6*Ht,pt=-3*me+9*Ve-9*Ht+3*$e,Be=3*Ve-3*me),Math.abs(pt)<1e-12){if(Math.abs(Oe)<1e-12)continue;vt=-Be/Oe,vt>0&&vt<1&&Te.push(vt);continue}var rr=Oe*Oe-4*Be*pt,br=Math.sqrt(rr);if(!(rr<0)){var lt=(-Oe+br)/(2*pt);lt>0&&lt<1&&Te.push(lt);var an=(-Oe-br)/(2*pt);an>0&&an<1&&Te.push(an)}}for(var $r=Te.length,Xr=$r,Nt;$r--;)vt=Te[$r],Nt=1-vt,Xe[0][$r]=Nt*Nt*Nt*ye+3*Nt*Nt*vt*We+3*Nt*vt*vt*dt+vt*vt*vt*et,Xe[1][$r]=Nt*Nt*Nt*me+3*Nt*Nt*vt*Ve+3*Nt*vt*vt*Ht+vt*vt*vt*$e;return Xe[0][Xr]=ye,Xe[1][Xr]=me,Xe[0][Xr+1]=et,Xe[1][Xr+1]=$e,Xe[0].length=Xe[1].length=Xr+2,{min:{x:Math.min.apply(0,Xe[0]),y:Math.min.apply(0,Xe[1])},max:{x:Math.max.apply(0,Xe[0]),y:Math.max.apply(0,Xe[1])}}},ze=function(ye,me,We,Ve,dt,Ht,et,$e){if(!(Math.max(ye,We)<Math.min(dt,et)||Math.min(ye,We)>Math.max(dt,et)||Math.max(me,Ve)<Math.min(Ht,$e)||Math.min(me,Ve)>Math.max(Ht,$e))){var Te=(ye*Ve-me*We)*(dt-et)-(ye-We)*(dt*$e-Ht*et),Xe=(ye*Ve-me*We)*(Ht-$e)-(me-Ve)*(dt*$e-Ht*et),pt=(ye-We)*(Ht-$e)-(me-Ve)*(dt-et);if(pt){var Oe=Te/pt,Be=Xe/pt,vt=+Oe.toFixed(2),Rt=+Be.toFixed(2);if(!(vt<+Math.min(ye,We).toFixed(2)||vt>+Math.max(ye,We).toFixed(2)||vt<+Math.min(dt,et).toFixed(2)||vt>+Math.max(dt,et).toFixed(2)||Rt<+Math.min(me,Ve).toFixed(2)||Rt>+Math.max(me,Ve).toFixed(2)||Rt<+Math.min(Ht,$e).toFixed(2)||Rt>+Math.max(Ht,$e).toFixed(2)))return{x:Oe,y:Be}}}},De=function(ye,me,We){return me>=ye.x&&me<=ye.x+ye.width&&We>=ye.y&&We<=ye.y+ye.height},Ue=function(ye,me,We,Ve,dt){if(dt)return[["M",+ye+ +dt,me],["l",We-dt*2,0],["a",dt,dt,0,0,1,dt,dt],["l",0,Ve-dt*2],["a",dt,dt,0,0,1,-dt,dt],["l",dt*2-We,0],["a",dt,dt,0,0,1,-dt,-dt],["l",0,dt*2-Ve],["a",dt,dt,0,0,1,dt,-dt],["z"]];var Ht=[["M",ye,me],["l",We,0],["l",0,Ve],["l",-We,0],["z"]];return Ht.parsePathArray=M,Ht},at=function(ye,me,We,Ve){return ye===null&&(ye=me=We=Ve=0),me===null&&(me=ye.y,We=ye.width,Ve=ye.height,ye=ye.x),{x:ye,y:me,width:We,w:We,height:Ve,h:Ve,x2:ye+We,y2:me+Ve,cx:ye+We/2,cy:me+Ve/2,r1:Math.min(We,Ve)/2,r2:Math.max(We,Ve)/2,r0:Math.sqrt(We*We+Ve*Ve)/2,path:Ue(ye,me,We,Ve),vb:[ye,me,We,Ve].join(" ")}},Je=function(ye,me){return ye=at(ye),me=at(me),De(me,ye.x,ye.y)||De(me,ye.x2,ye.y)||De(me,ye.x,ye.y2)||De(me,ye.x2,ye.y2)||De(ye,me.x,me.y)||De(ye,me.x2,me.y)||De(ye,me.x,me.y2)||De(ye,me.x2,me.y2)||(ye.x<me.x2&&ye.x>me.x||me.x<ye.x2&&me.x>ye.x)&&(ye.y<me.y2&&ye.y>me.y||me.y<ye.y2&&me.y>ye.y)},Ze=function(ye,me,We,Ve,dt,Ht,et,$e){(0,W.kJ)(ye)||(ye=[ye,me,We,Ve,dt,Ht,et,$e]);var Te=Se.apply(null,ye);return at(Te.min.x,Te.min.y,Te.max.x-Te.min.x,Te.max.y-Te.min.y)},xe=function(ye,me,We,Ve,dt,Ht,et,$e,Te){var Xe=1-Te,pt=Math.pow(Xe,3),Oe=Math.pow(Xe,2),Be=Te*Te,vt=Be*Te,Rt=pt*ye+Oe*3*Te*We+Xe*3*Te*Te*dt+vt*et,rr=pt*me+Oe*3*Te*Ve+Xe*3*Te*Te*Ht+vt*$e,br=ye+2*Te*(We-ye)+Be*(dt-2*We+ye),lt=me+2*Te*(Ve-me)+Be*(Ht-2*Ve+me),an=We+2*Te*(dt-We)+Be*(et-2*dt+We),$r=Ve+2*Te*(Ht-Ve)+Be*($e-2*Ht+Ve),Xr=Xe*ye+Te*We,Nt=Xe*me+Te*Ve,Kt=Xe*dt+Te*et,or=Xe*Ht+Te*$e,kt=90-Math.atan2(br-an,lt-$r)*180/Math.PI;return{x:Rt,y:rr,m:{x:br,y:lt},n:{x:an,y:$r},start:{x:Xr,y:Nt},end:{x:Kt,y:or},alpha:kt}},_e=function(ye,me,We){var Ve=Ze(ye),dt=Ze(me);if(!Je(Ve,dt))return We?0:[];for(var Ht=ge.apply(0,ye),et=ge.apply(0,me),$e=~~(Ht/8),Te=~~(et/8),Xe=[],pt=[],Oe={},Be=We?0:[],vt=0;vt<$e+1;vt++){var Rt=xe.apply(0,ye.concat(vt/$e));Xe.push({x:Rt.x,y:Rt.y,t:vt/$e})}for(var vt=0;vt<Te+1;vt++){var Rt=xe.apply(0,me.concat(vt/Te));pt.push({x:Rt.x,y:Rt.y,t:vt/Te})}for(var vt=0;vt<$e;vt++)for(var rr=0;rr<Te;rr++){var br=Xe[vt],lt=Xe[vt+1],an=pt[rr],$r=pt[rr+1],Xr=Math.abs(lt.x-br.x)<.001?"y":"x",Nt=Math.abs($r.x-an.x)<.001?"y":"x",Kt=ze(br.x,br.y,lt.x,lt.y,an.x,an.y,$r.x,$r.y);if(Kt){if(Oe[Kt.x.toFixed(4)]===Kt.y.toFixed(4))continue;Oe[Kt.x.toFixed(4)]=Kt.y.toFixed(4);var or=br.t+Math.abs((Kt[Xr]-br[Xr])/(lt[Xr]-br[Xr]))*(lt.t-br.t),kt=an.t+Math.abs((Kt[Nt]-an[Nt])/($r[Nt]-an[Nt]))*($r.t-an.t);or>=0&&or<=1&&kt>=0&&kt<=1&&(We?Be+=1:Be.push({x:Kt.x,y:Kt.y,t1:or,t2:kt}))}}return Be},He=function(ye,me,We){ye=fe(ye),me=fe(me);for(var Ve,dt,Ht,et,$e,Te,Xe,pt,Oe,Be,vt=We?0:[],Rt=0,rr=ye.length;Rt<rr;Rt++){var br=ye[Rt];if(br[0]==="M")Ve=$e=br[1],dt=Te=br[2];else{br[0]==="C"?(Oe=[Ve,dt].concat(br.slice(1)),Ve=Oe[6],dt=Oe[7]):(Oe=[Ve,dt,Ve,dt,$e,Te,$e,Te],Ve=$e,dt=Te);for(var lt=0,an=me.length;lt<an;lt++){var $r=me[lt];if($r[0]==="M")Ht=Xe=$r[1],et=pt=$r[2];else{$r[0]==="C"?(Be=[Ht,et].concat($r.slice(1)),Ht=Be[6],et=Be[7]):(Be=[Ht,et,Ht,et,Xe,pt,Xe,pt],Ht=Xe,et=pt);var Xr=_e(Oe,Be,We);if(We)vt+=Xr;else{for(var Nt=0,Kt=Xr.length;Nt<Kt;Nt++)Xr[Nt].segment1=Rt,Xr[Nt].segment2=lt,Xr[Nt].bez1=Oe,Xr[Nt].bez2=Be;vt=vt.concat(Xr)}}}}}return vt},Ke=function(ye,me){return He(ye,me)};function Et(ye,me){var We=[],Ve=[];function dt(Ht,et){if(Ht.length===1)We.push(Ht[0]),Ve.push(Ht[0]);else{for(var $e=[],Te=0;Te<Ht.length-1;Te++)Te===0&&We.push(Ht[0]),Te===Ht.length-2&&Ve.push(Ht[Te+1]),$e[Te]=[(1-et)*Ht[Te][0]+et*Ht[Te+1][0],(1-et)*Ht[Te][1]+et*Ht[Te+1][1]];dt($e,et)}}return ye.length&&dt(ye,me),{left:We,right:Ve.reverse()}}function ke(ye,me,We){var Ve=[[ye[1],ye[2]]];We=We||2;var dt=[];me[0]==="A"?(Ve.push(me[6]),Ve.push(me[7])):me[0]==="C"?(Ve.push([me[1],me[2]]),Ve.push([me[3],me[4]]),Ve.push([me[5],me[6]])):me[0]==="S"||me[0]==="Q"?(Ve.push([me[1],me[2]]),Ve.push([me[3],me[4]])):Ve.push([me[1],me[2]]);for(var Ht=Ve,et=1/We,$e=0;$e<We-1;$e++){var Te=et/(1-et*$e),Xe=Et(Ht,Te);dt.push(Xe.left),Ht=Xe.right}dt.push(Ht);var pt=dt.map(function(Oe){var Be=[];return Oe.length===4&&(Be.push("C"),Be=Be.concat(Oe[2])),Oe.length>=3&&(Oe.length===3&&Be.push("Q"),Be=Be.concat(Oe[1])),Oe.length===2&&Be.push("L"),Be=Be.concat(Oe[Oe.length-1]),Be});return pt}var qe=function(ye,me,We){if(We===1)return[[].concat(ye)];var Ve=[];if(me[0]==="L"||me[0]==="C"||me[0]==="Q")Ve=Ve.concat(ke(ye,me,We));else{var dt=[].concat(ye);dt[0]==="M"&&(dt[0]="L");for(var Ht=0;Ht<=We-1;Ht++)Ve.push(dt)}return Ve},ne=function(ye,me){if(ye.length===1)return ye;var We=ye.length-1,Ve=me.length-1,dt=We/Ve,Ht=[];if(ye.length===1&&ye[0][0]==="M"){for(var et=0;et<Ve-We;et++)ye.push(ye[0]);return ye}for(var et=0;et<Ve;et++){var $e=Math.floor(dt*et);Ht[$e]=(Ht[$e]||0)+1}var Te=Ht.reduce(function(Xe,pt,Oe){return Oe===We?Xe.concat(ye[We]):Xe.concat(qe(ye[Oe],ye[Oe+1],pt))},[]);return Te.unshift(ye[0]),(me[Ve]==="Z"||me[Ve]==="z")&&Te.push("Z"),Te},Ge=function(ye,me){if(ye.length!==me.length)return!1;var We=!0;return(0,W.S6)(ye,function(Ve,dt){if(Ve!==me[dt])return We=!1,!1}),We};function oe(ye,me,We){var Ve=null,dt=We;return me<dt&&(dt=me,Ve="add"),ye<dt&&(dt=ye,Ve="del"),{type:Ve,min:dt}}var Fe=function(ye,me){var We=ye.length,Ve=me.length,dt,Ht,et=0;if(We===0||Ve===0)return null;for(var $e=[],Te=0;Te<=We;Te++)$e[Te]=[],$e[Te][0]={min:Te};for(var Xe=0;Xe<=Ve;Xe++)$e[0][Xe]={min:Xe};for(var Te=1;Te<=We;Te++){dt=ye[Te-1];for(var Xe=1;Xe<=Ve;Xe++){Ht=me[Xe-1],Ge(dt,Ht)?et=0:et=1;var pt=$e[Te-1][Xe].min+1,Oe=$e[Te][Xe-1].min+1,Be=$e[Te-1][Xe-1].min+et;$e[Te][Xe]=oe(pt,Oe,Be)}}return $e},ut=function(ye,me){var We=Fe(ye,me),Ve=ye.length,dt=me.length,Ht=[],et=1,$e=1;if(We[Ve][dt].min!==Ve){for(var Te=1;Te<=Ve;Te++){var Xe=We[Te][Te].min;$e=Te;for(var pt=et;pt<=dt;pt++)We[Te][pt].min<Xe&&(Xe=We[Te][pt].min,$e=pt);et=$e,We[Te][et].type&&Ht.push({index:Te-1,type:We[Te][et].type})}for(var Te=Ht.length-1;Te>=0;Te--)et=Ht[Te].index,Ht[Te].type==="add"?ye.splice(et,0,[].concat(ye[et])):ye.splice(et,1)}Ve=ye.length;var Oe=dt-Ve;if(Ve<dt)for(var Te=0;Te<Oe;Te++)ye[Ve-1][0]==="z"||ye[Ve-1][0]==="Z"?ye.splice(Ve-2,0,ye[Ve-2]):ye.push(ye[Ve-1]),Ve+=1;return ye};function Ae(ye,me,We){for(var Ve=[].concat(ye),dt,Ht=1/(We+1),et=Le(me)[0],$e=1;$e<=We;$e++)Ht*=$e,dt=Math.floor(ye.length*Ht),dt===0?Ve.unshift([et[0]*Ht+ye[dt][0]*(1-Ht),et[1]*Ht+ye[dt][1]*(1-Ht)]):Ve.splice(dt,0,[et[0]*Ht+ye[dt][0]*(1-Ht),et[1]*Ht+ye[dt][1]*(1-Ht)]);return Ve}function Le(ye){var me=[];switch(ye[0]){case"M":me.push([ye[1],ye[2]]);break;case"L":me.push([ye[1],ye[2]]);break;case"A":me.push([ye[6],ye[7]]);break;case"Q":me.push([ye[3],ye[4]]),me.push([ye[1],ye[2]]);break;case"T":me.push([ye[1],ye[2]]);break;case"C":me.push([ye[5],ye[6]]),me.push([ye[1],ye[2]]),me.push([ye[3],ye[4]]);break;case"S":me.push([ye[3],ye[4]]),me.push([ye[1],ye[2]]);break;case"H":me.push([ye[1],ye[1]]);break;case"V":me.push([ye[1],ye[1]]);break;default:}return me}var rt=function(ye,me){if(ye.length<=1)return ye;for(var We,Ve=0;Ve<me.length;Ve++)if(ye[Ve][0]!==me[Ve][0])switch(We=Le(ye[Ve]),me[Ve][0]){case"M":ye[Ve]=["M"].concat(We[0]);break;case"L":ye[Ve]=["L"].concat(We[0]);break;case"A":ye[Ve]=[].concat(me[Ve]),ye[Ve][6]=We[0][0],ye[Ve][7]=We[0][1];break;case"Q":if(We.length<2)if(Ve>0)We=Ae(We,ye[Ve-1],1);else{ye[Ve]=me[Ve];break}ye[Ve]=["Q"].concat(We.reduce(function(dt,Ht){return dt.concat(Ht)},[]));break;case"T":ye[Ve]=["T"].concat(We[0]);break;case"C":if(We.length<3)if(Ve>0)We=Ae(We,ye[Ve-1],2);else{ye[Ve]=me[Ve];break}ye[Ve]=["C"].concat(We.reduce(function(dt,Ht){return dt.concat(Ht)},[]));break;case"S":if(We.length<2)if(Ve>0)We=Ae(We,ye[Ve-1],1);else{ye[Ve]=me[Ve];break}ye[Ve]=["S"].concat(We.reduce(function(dt,Ht){return dt.concat(Ht)},[]));break;default:ye[Ve]=me[Ve]}return ye}},8723:function(ft,N,k){"use strict";k.d(N,{$O:function(){return q},FE:function(){return b},mY:function(){return j}});var W=k(77341),K=k(67052);function b(Q,ie,te){var Ce=1;if((0,W.HD)(Q)&&(Ce=Q.split(`
`).length),Ce>1){var pe=G(ie,te);return ie*Ce+pe*(Ce-1)}return ie}function G(Q,ie){return ie?ie-Q:Q*.14}function j(Q,ie){var te=(0,K.L)(),Ce=0;if((0,W.kK)(Q)||Q==="")return Ce;if(te.save(),te.font=ie,(0,W.HD)(Q)&&Q.includes(`
`)){var pe=Q.split(`
`);(0,W.S6)(pe,function(fe){var J=te.measureText(fe).width;Ce<J&&(Ce=J)})}else Ce=te.measureText(Q).width;return te.restore(),Ce}function q(Q){var ie=Q.fontSize,te=Q.fontFamily,Ce=Q.fontWeight,pe=Q.fontStyle,fe=Q.fontVariant;return[pe,fe,Ce,ie+"px",te].join(" ").trim()}},77341:function(ft,N,k){"use strict";k.d(N,{As:function(){return K},CD:function(){return W.CD},HD:function(){return W.HD},Kn:function(){return W.Kn},S6:function(){return W.S6},UY:function(){return G},jC:function(){return W.jC},jU:function(){return b},kK:function(){return W.UM},mf:function(){return W.mf},pP:function(){return j}});var W=k(21030);function K(q,Q){var ie=q.indexOf(Q);ie!==-1&&q.splice(ie,1)}var b=typeof window!="undefined"&&typeof window.document!="undefined";function G(q,Q){if(q.isCanvas())return!0;for(var ie=Q.getParent(),te=!1;ie;){if(ie===q){te=!0;break}ie=ie.getParent()}return te}function j(q){return q.cfg.visible&&q.cfg.capture}},90857:function(ft){"use strict";var N=Object.prototype.hasOwnProperty,k="~";function W(){}Object.create&&(W.prototype=Object.create(null),new W().__proto__||(k=!1));function K(q,Q,ie){this.fn=q,this.context=Q,this.once=ie||!1}function b(q,Q,ie,te,Ce){if(typeof ie!="function")throw new TypeError("The listener must be a function");var pe=new K(ie,te||q,Ce),fe=k?k+Q:Q;return q._events[fe]?q._events[fe].fn?q._events[fe]=[q._events[fe],pe]:q._events[fe].push(pe):(q._events[fe]=pe,q._eventsCount++),q}function G(q,Q){--q._eventsCount===0?q._events=new W:delete q._events[Q]}function j(){this._events=new W,this._eventsCount=0}j.prototype.eventNames=function(){var Q=[],ie,te;if(this._eventsCount===0)return Q;for(te in ie=this._events)N.call(ie,te)&&Q.push(k?te.slice(1):te);return Object.getOwnPropertySymbols?Q.concat(Object.getOwnPropertySymbols(ie)):Q},j.prototype.listeners=function(Q){var ie=k?k+Q:Q,te=this._events[ie];if(!te)return[];if(te.fn)return[te.fn];for(var Ce=0,pe=te.length,fe=new Array(pe);Ce<pe;Ce++)fe[Ce]=te[Ce].fn;return fe},j.prototype.listenerCount=function(Q){var ie=k?k+Q:Q,te=this._events[ie];return te?te.fn?1:te.length:0},j.prototype.emit=function(Q,ie,te,Ce,pe,fe){var J=k?k+Q:Q;if(!this._events[J])return!1;var M=this._events[J],E=arguments.length,ge,Se;if(M.fn){switch(M.once&&this.removeListener(Q,M.fn,void 0,!0),E){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,ie),!0;case 3:return M.fn.call(M.context,ie,te),!0;case 4:return M.fn.call(M.context,ie,te,Ce),!0;case 5:return M.fn.call(M.context,ie,te,Ce,pe),!0;case 6:return M.fn.call(M.context,ie,te,Ce,pe,fe),!0}for(Se=1,ge=new Array(E-1);Se<E;Se++)ge[Se-1]=arguments[Se];M.fn.apply(M.context,ge)}else{var ze=M.length,De;for(Se=0;Se<ze;Se++)switch(M[Se].once&&this.removeListener(Q,M[Se].fn,void 0,!0),E){case 1:M[Se].fn.call(M[Se].context);break;case 2:M[Se].fn.call(M[Se].context,ie);break;case 3:M[Se].fn.call(M[Se].context,ie,te);break;case 4:M[Se].fn.call(M[Se].context,ie,te,Ce);break;default:if(!ge)for(De=1,ge=new Array(E-1);De<E;De++)ge[De-1]=arguments[De];M[Se].fn.apply(M[Se].context,ge)}}return!0},j.prototype.on=function(Q,ie,te){return b(this,Q,ie,te,!1)},j.prototype.once=function(Q,ie,te){return b(this,Q,ie,te,!0)},j.prototype.removeListener=function(Q,ie,te,Ce){var pe=k?k+Q:Q;if(!this._events[pe])return this;if(!ie)return G(this,pe),this;var fe=this._events[pe];if(fe.fn)fe.fn===ie&&(!Ce||fe.once)&&(!te||fe.context===te)&&G(this,pe);else{for(var J=0,M=[],E=fe.length;J<E;J++)(fe[J].fn!==ie||Ce&&!fe[J].once||te&&fe[J].context!==te)&&M.push(fe[J]);M.length?this._events[pe]=M.length===1?M[0]:M:G(this,pe)}return this},j.prototype.removeAllListeners=function(Q){var ie;return Q?(ie=k?k+Q:Q,this._events[ie]&&G(this,ie)):(this._events=new W,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=k,j.EventEmitter=j,ft.exports=j},32793:function(ft,N,k){"use strict";k.d(N,{wN:function(){return Ae},Ll:function(){return xe},x1:function(){return te},aH:function(){return Ve},lD:function(){return ze},Zr:function(){return W}});var W={};k.r(W),k.d(W,{distance:function(){return b},getBBoxByArray:function(){return j},getBBoxRange:function(){return q},isNumberEqual:function(){return G},piMod:function(){return Q}});var K=k(21030);function b(et,$e,Te,Xe){var pt=et-Te,Oe=$e-Xe;return Math.sqrt(pt*pt+Oe*Oe)}function G(et,$e){return Math.abs(et-$e)<.001}function j(et,$e){var Te=(0,K.VV)(et),Xe=(0,K.VV)($e),pt=(0,K.Fp)(et),Oe=(0,K.Fp)($e);return{x:Te,y:Xe,width:pt-Te,height:Oe-Xe}}function q(et,$e,Te,Xe){return{minX:(0,K.VV)([et,Te]),maxX:(0,K.Fp)([et,Te]),minY:(0,K.VV)([$e,Xe]),maxY:(0,K.Fp)([$e,Xe])}}function Q(et){return(et+Math.PI*2)%(Math.PI*2)}var ie=k(31437),te={box:function(et,$e,Te,Xe){return j([et,Te],[$e,Xe])},length:function(et,$e,Te,Xe){return b(et,$e,Te,Xe)},pointAt:function(et,$e,Te,Xe,pt){return{x:(1-pt)*et+pt*Te,y:(1-pt)*$e+pt*Xe}},pointDistance:function(et,$e,Te,Xe,pt,Oe){var Be=(Te-et)*(pt-et)+(Xe-$e)*(Oe-$e);if(Be<0)return b(et,$e,pt,Oe);var vt=(Te-et)*(Te-et)+(Xe-$e)*(Xe-$e);return Be>vt?b(Te,Xe,pt,Oe):this.pointToLine(et,$e,Te,Xe,pt,Oe)},pointToLine:function(et,$e,Te,Xe,pt,Oe){var Be=[Te-et,Xe-$e];if(ie.I6(Be,[0,0]))return Math.sqrt((pt-et)*(pt-et)+(Oe-$e)*(Oe-$e));var vt=[-Be[1],Be[0]];ie.Fv(vt,vt);var Rt=[pt-et,Oe-$e];return Math.abs(ie.AK(Rt,vt))},tangentAngle:function(et,$e,Te,Xe){return Math.atan2(Xe-$e,Te-et)}},Ce=1e-4;function pe(et,$e,Te,Xe,pt,Oe){var Be,vt=1/0,Rt=[Te,Xe],rr=20;Oe&&Oe>200&&(rr=Oe/10);for(var br=1/rr,lt=br/10,an=0;an<=rr;an++){var $r=an*br,Xr=[pt.apply(null,et.concat([$r])),pt.apply(null,$e.concat([$r]))],Nt=b(Rt[0],Rt[1],Xr[0],Xr[1]);Nt<vt&&(Be=$r,vt=Nt)}if(Be===0)return{x:et[0],y:$e[0]};if(Be===1){var Kt=et.length;return{x:et[Kt-1],y:$e[Kt-1]}}vt=1/0;for(var an=0;an<32&&!(lt<Ce);an++){var or=Be-lt,kt=Be+lt,Xr=[pt.apply(null,et.concat([or])),pt.apply(null,$e.concat([or]))],Nt=b(Rt[0],Rt[1],Xr[0],Xr[1]);if(or>=0&&Nt<vt)Be=or,vt=Nt;else{var Jt=[pt.apply(null,et.concat([kt])),pt.apply(null,$e.concat([kt]))],Er=b(Rt[0],Rt[1],Jt[0],Jt[1]);kt<=1&&Er<vt?(Be=kt,vt=Er):lt*=.5}}return{x:pt.apply(null,et.concat([Be])),y:pt.apply(null,$e.concat([Be]))}}function fe(et,$e){for(var Te=0,Xe=et.length,pt=0;pt<Xe;pt++){var Oe=et[pt],Be=$e[pt],vt=et[(pt+1)%Xe],Rt=$e[(pt+1)%Xe];Te+=b(Oe,Be,vt,Rt)}return Te/2}function J(et,$e,Te,Xe){var pt=1-Xe;return pt*pt*et+2*Xe*pt*$e+Xe*Xe*Te}function M(et,$e,Te){var Xe=et+Te-2*$e;if(G(Xe,0))return[.5];var pt=(et-$e)/Xe;return pt<=1&&pt>=0?[pt]:[]}function E(et,$e,Te,Xe){return 2*(1-Xe)*($e-et)+2*Xe*(Te-$e)}function ge(et,$e,Te,Xe,pt,Oe,Be){var vt=J(et,Te,pt,Be),Rt=J($e,Xe,Oe,Be),rr=te.pointAt(et,$e,Te,Xe,Be),br=te.pointAt(Te,Xe,pt,Oe,Be);return[[et,$e,rr.x,rr.y,vt,Rt],[vt,Rt,br.x,br.y,pt,Oe]]}function Se(et,$e,Te,Xe,pt,Oe,Be){if(Be===0)return(b(et,$e,Te,Xe)+b(Te,Xe,pt,Oe)+b(et,$e,pt,Oe))/2;var vt=ge(et,$e,Te,Xe,pt,Oe,.5),Rt=vt[0],rr=vt[1];return Rt.push(Be-1),rr.push(Be-1),Se.apply(null,Rt)+Se.apply(null,rr)}var ze={box:function(et,$e,Te,Xe,pt,Oe){var Be=M(et,Te,pt)[0],vt=M($e,Xe,Oe)[0],Rt=[et,pt],rr=[$e,Oe];return Be!==void 0&&Rt.push(J(et,Te,pt,Be)),vt!==void 0&&rr.push(J($e,Xe,Oe,vt)),j(Rt,rr)},length:function(et,$e,Te,Xe,pt,Oe){return Se(et,$e,Te,Xe,pt,Oe,3)},nearestPoint:function(et,$e,Te,Xe,pt,Oe,Be,vt){return pe([et,Te,pt],[$e,Xe,Oe],Be,vt,J)},pointDistance:function(et,$e,Te,Xe,pt,Oe,Be,vt){var Rt=this.nearestPoint(et,$e,Te,Xe,pt,Oe,Be,vt);return b(Rt.x,Rt.y,Be,vt)},interpolationAt:J,pointAt:function(et,$e,Te,Xe,pt,Oe,Be){return{x:J(et,Te,pt,Be),y:J($e,Xe,Oe,Be)}},divide:function(et,$e,Te,Xe,pt,Oe,Be){return ge(et,$e,Te,Xe,pt,Oe,Be)},tangentAngle:function(et,$e,Te,Xe,pt,Oe,Be){var vt=E(et,Te,pt,Be),Rt=E($e,Xe,Oe,Be),rr=Math.atan2(Rt,vt);return Q(rr)}};function De(et,$e,Te,Xe,pt){var Oe=1-pt;return Oe*Oe*Oe*et+3*$e*pt*Oe*Oe+3*Te*pt*pt*Oe+Xe*pt*pt*pt}function Ue(et,$e,Te,Xe,pt){var Oe=1-pt;return 3*(Oe*Oe*($e-et)+2*Oe*pt*(Te-$e)+pt*pt*(Xe-Te))}function at(et,$e,Te,Xe){var pt=-3*et+9*$e-9*Te+3*Xe,Oe=6*et-12*$e+6*Te,Be=3*$e-3*et,vt=[],Rt,rr,br;if(G(pt,0))G(Oe,0)||(Rt=-Be/Oe,Rt>=0&&Rt<=1&&vt.push(Rt));else{var lt=Oe*Oe-4*pt*Be;G(lt,0)?vt.push(-Oe/(2*pt)):lt>0&&(br=Math.sqrt(lt),Rt=(-Oe+br)/(2*pt),rr=(-Oe-br)/(2*pt),Rt>=0&&Rt<=1&&vt.push(Rt),rr>=0&&rr<=1&&vt.push(rr))}return vt}function Je(et,$e,Te,Xe,pt,Oe,Be,vt,Rt){var rr=De(et,Te,pt,Be,Rt),br=De($e,Xe,Oe,vt,Rt),lt=te.pointAt(et,$e,Te,Xe,Rt),an=te.pointAt(Te,Xe,pt,Oe,Rt),$r=te.pointAt(pt,Oe,Be,vt,Rt),Xr=te.pointAt(lt.x,lt.y,an.x,an.y,Rt),Nt=te.pointAt(an.x,an.y,$r.x,$r.y,Rt);return[[et,$e,lt.x,lt.y,Xr.x,Xr.y,rr,br],[rr,br,Nt.x,Nt.y,$r.x,$r.y,Be,vt]]}function Ze(et,$e,Te,Xe,pt,Oe,Be,vt,Rt){if(Rt===0)return fe([et,Te,pt,Be],[$e,Xe,Oe,vt]);var rr=Je(et,$e,Te,Xe,pt,Oe,Be,vt,.5),br=rr[0],lt=rr[1];return br.push(Rt-1),lt.push(Rt-1),Ze.apply(null,br)+Ze.apply(null,lt)}var xe={extrema:at,box:function(et,$e,Te,Xe,pt,Oe,Be,vt){for(var Rt=[et,Be],rr=[$e,vt],br=at(et,Te,pt,Be),lt=at($e,Xe,Oe,vt),an=0;an<br.length;an++)Rt.push(De(et,Te,pt,Be,br[an]));for(var an=0;an<lt.length;an++)rr.push(De($e,Xe,Oe,vt,lt[an]));return j(Rt,rr)},length:function(et,$e,Te,Xe,pt,Oe,Be,vt){return Ze(et,$e,Te,Xe,pt,Oe,Be,vt,3)},nearestPoint:function(et,$e,Te,Xe,pt,Oe,Be,vt,Rt,rr,br){return pe([et,Te,pt,Be],[$e,Xe,Oe,vt],Rt,rr,De,br)},pointDistance:function(et,$e,Te,Xe,pt,Oe,Be,vt,Rt,rr,br){var lt=this.nearestPoint(et,$e,Te,Xe,pt,Oe,Be,vt,Rt,rr,br);return b(lt.x,lt.y,Rt,rr)},interpolationAt:De,pointAt:function(et,$e,Te,Xe,pt,Oe,Be,vt,Rt){return{x:De(et,Te,pt,Be,Rt),y:De($e,Xe,Oe,vt,Rt)}},divide:function(et,$e,Te,Xe,pt,Oe,Be,vt,Rt){return Je(et,$e,Te,Xe,pt,Oe,Be,vt,Rt)},tangentAngle:function(et,$e,Te,Xe,pt,Oe,Be,vt,Rt){var rr=Ue(et,Te,pt,Be,Rt),br=Ue($e,Xe,Oe,vt,Rt);return Q(Math.atan2(br,rr))}};function _e(et,$e){var Te=Math.abs(et);return $e>0?Te:Te*-1}var He={box:function(et,$e,Te,Xe){return{x:et-Te,y:$e-Xe,width:Te*2,height:Xe*2}},length:function(et,$e,Te,Xe){return Math.PI*(3*(Te+Xe)-Math.sqrt((3*Te+Xe)*(Te+3*Xe)))},nearestPoint:function(et,$e,Te,Xe,pt,Oe){var Be=Te,vt=Xe;if(Be===0||vt===0)return{x:et,y:$e};for(var Rt=pt-et,rr=Oe-$e,br=Math.abs(Rt),lt=Math.abs(rr),an=Be*Be,$r=vt*vt,Xr=Math.PI/4,Nt,Kt,or=0;or<4;or++){Nt=Be*Math.cos(Xr),Kt=vt*Math.sin(Xr);var kt=(an-$r)*Math.pow(Math.cos(Xr),3)/Be,Jt=($r-an)*Math.pow(Math.sin(Xr),3)/vt,Er=Nt-kt,wr=Kt-Jt,Br=br-kt,zr=lt-Jt,le=Math.hypot(wr,Er),H=Math.hypot(zr,Br),re=le*Math.asin((Er*zr-wr*Br)/(le*H)),Ie=re/Math.sqrt(an+$r-Nt*Nt-Kt*Kt);Xr+=Ie,Xr=Math.min(Math.PI/2,Math.max(0,Xr))}return{x:et+_e(Nt,Rt),y:$e+_e(Kt,rr)}},pointDistance:function(et,$e,Te,Xe,pt,Oe){var Be=this.nearestPoint(et,$e,Te,Xe,pt,Oe);return b(Be.x,Be.y,pt,Oe)},pointAt:function(et,$e,Te,Xe,pt){var Oe=2*Math.PI*pt;return{x:et+Te*Math.cos(Oe),y:$e+Xe*Math.sin(Oe)}},tangentAngle:function(et,$e,Te,Xe,pt){var Oe=2*Math.PI*pt,Be=Math.atan2(Xe*Math.cos(Oe),-Te*Math.sin(Oe));return Q(Be)}};function Ke(et,$e,Te,Xe,pt,Oe,Be,vt){return-1*Te*Math.cos(pt)*Math.sin(vt)-Xe*Math.sin(pt)*Math.cos(vt)}function Et(et,$e,Te,Xe,pt,Oe,Be,vt){return-1*Te*Math.sin(pt)*Math.sin(vt)+Xe*Math.cos(pt)*Math.cos(vt)}function ke(et,$e,Te){return Math.atan(-$e/et*Math.tan(Te))}function qe(et,$e,Te){return Math.atan($e/(et*Math.tan(Te)))}function ne(et,$e,Te,Xe,pt,Oe){return Te*Math.cos(pt)*Math.cos(Oe)-Xe*Math.sin(pt)*Math.sin(Oe)+et}function Ge(et,$e,Te,Xe,pt,Oe){return Te*Math.sin(pt)*Math.cos(Oe)+Xe*Math.cos(pt)*Math.sin(Oe)+$e}function oe(et,$e,Te,Xe){var pt=Math.atan2(Xe*et,Te*$e);return(pt+Math.PI*2)%(Math.PI*2)}function Fe(et,$e,Te){return{x:et*Math.cos(Te),y:$e*Math.sin(Te)}}function ut(et,$e,Te){var Xe=Math.cos(Te),pt=Math.sin(Te);return[et*Xe-$e*pt,et*pt+$e*Xe]}var Ae={box:function(et,$e,Te,Xe,pt,Oe,Be){for(var vt=ke(Te,Xe,pt),Rt=1/0,rr=-1/0,br=[Oe,Be],lt=-Math.PI*2;lt<=Math.PI*2;lt+=Math.PI){var an=vt+lt;Oe<Be?Oe<an&&an<Be&&br.push(an):Be<an&&an<Oe&&br.push(an)}for(var lt=0;lt<br.length;lt++){var $r=ne(et,$e,Te,Xe,pt,br[lt]);$r<Rt&&(Rt=$r),$r>rr&&(rr=$r)}for(var Xr=qe(Te,Xe,pt),Nt=1/0,Kt=-1/0,or=[Oe,Be],lt=-Math.PI*2;lt<=Math.PI*2;lt+=Math.PI){var kt=Xr+lt;Oe<Be?Oe<kt&&kt<Be&&or.push(kt):Be<kt&&kt<Oe&&or.push(kt)}for(var lt=0;lt<or.length;lt++){var Jt=Ge(et,$e,Te,Xe,pt,or[lt]);Jt<Nt&&(Nt=Jt),Jt>Kt&&(Kt=Jt)}return{x:Rt,y:Nt,width:rr-Rt,height:Kt-Nt}},length:function(et,$e,Te,Xe,pt,Oe,Be){},nearestPoint:function(et,$e,Te,Xe,pt,Oe,Be,vt,Rt){var rr=ut(vt-et,Rt-$e,-pt),br=rr[0],lt=rr[1],an=He.nearestPoint(0,0,Te,Xe,br,lt),$r=oe(Te,Xe,an.x,an.y);$r<Oe?an=Fe(Te,Xe,Oe):$r>Be&&(an=Fe(Te,Xe,Be));var Xr=ut(an.x,an.y,pt);return{x:Xr[0]+et,y:Xr[1]+$e}},pointDistance:function(et,$e,Te,Xe,pt,Oe,Be,vt,Rt){var rr=this.nearestPoint(et,$e,Te,Xe,vt,Rt);return b(rr.x,rr.y,vt,Rt)},pointAt:function(et,$e,Te,Xe,pt,Oe,Be,vt){var Rt=(Be-Oe)*vt+Oe;return{x:ne(et,$e,Te,Xe,pt,Rt),y:Ge(et,$e,Te,Xe,pt,Rt)}},tangentAngle:function(et,$e,Te,Xe,pt,Oe,Be,vt){var Rt=(Be-Oe)*vt+Oe,rr=Ke(et,$e,Te,Xe,pt,Oe,Be,Rt),br=Et(et,$e,Te,Xe,pt,Oe,Be,Rt);return Q(Math.atan2(br,rr))}};function Le(et){for(var $e=0,Te=[],Xe=0;Xe<et.length-1;Xe++){var pt=et[Xe],Oe=et[Xe+1],Be=b(pt[0],pt[1],Oe[0],Oe[1]),vt={from:pt,to:Oe,length:Be};Te.push(vt),$e+=Be}return{segments:Te,totalLength:$e}}function rt(et){if(et.length<2)return 0;for(var $e=0,Te=0;Te<et.length-1;Te++){var Xe=et[Te],pt=et[Te+1];$e+=b(Xe[0],Xe[1],pt[0],pt[1])}return $e}function ye(et,$e){if($e>1||$e<0||et.length<2)return null;var Te=Le(et),Xe=Te.segments,pt=Te.totalLength;if(pt===0)return{x:et[0][0],y:et[0][1]};for(var Oe=0,Be=null,vt=0;vt<Xe.length;vt++){var Rt=Xe[vt],rr=Rt.from,br=Rt.to,lt=Rt.length/pt;if($e>=Oe&&$e<=Oe+lt){var an=($e-Oe)/lt;Be=te.pointAt(rr[0],rr[1],br[0],br[1],an);break}Oe+=lt}return Be}function me(et,$e){if($e>1||$e<0||et.length<2)return 0;for(var Te=Le(et),Xe=Te.segments,pt=Te.totalLength,Oe=0,Be=0,vt=0;vt<Xe.length;vt++){var Rt=Xe[vt],rr=Rt.from,br=Rt.to,lt=Rt.length/pt;if($e>=Oe&&$e<=Oe+lt){Be=Math.atan2(br[1]-rr[1],br[0]-rr[0]);break}Oe+=lt}return Be}function We(et,$e,Te){for(var Xe=1/0,pt=0;pt<et.length-1;pt++){var Oe=et[pt],Be=et[pt+1],vt=te.pointDistance(Oe[0],Oe[1],Be[0],Be[1],$e,Te);vt<Xe&&(Xe=vt)}return Xe}var Ve={box:function(et){for(var $e=[],Te=[],Xe=0;Xe<et.length;Xe++){var pt=et[Xe];$e.push(pt[0]),Te.push(pt[1])}return j($e,Te)},length:function(et){return rt(et)},pointAt:function(et,$e){return ye(et,$e)},pointDistance:function(et,$e,Te){return We(et,$e,Te)},tangentAngle:function(et,$e){return me(et,$e)}};function dt(et){var $e=et.slice(0);return et.length&&$e.push(et[0]),$e}var Ht={box:function(et){return Ve.box(et)},length:function(et){return rt(dt(et))},pointAt:function(et,$e){return ye(dt(et),$e)},pointDistance:function(et,$e,Te){return We(dt(et),$e,Te)},tangentAngle:function(et,$e){return me(dt(et),$e)}}},19372:function(ft,N,k){"use strict";k.d(N,{$Q:function(){return ZC},sg:function(){return VC},x1:function(){return lA},by:function(){return dA}});var W={};k.r(W),k.d(W,{assign:function(){return Qo},default:function(){return As},defaultI18n:function(){return fi},format:function(){return fc},parse:function(){return yo},setGlobalDateI18n:function(){return fo},setGlobalDateMasks:function(){return Al}});var K={};k.r(K),k.d(K,{Arc:function(){return bp},DataMarker:function(){return nr},DataRegion:function(){return xs},Html:function(){return ot},Image:function(){return Ne},Line:function(){return Lc},Region:function(){return Sn},RegionFilter:function(){return Nf},Shape:function(){return Ep},Text:function(){return Zh}});var b={};k.r(b),k.d(b,{ellipsisHead:function(){return hr},ellipsisMiddle:function(){return lr},ellipsisTail:function(){return Ir},getDefault:function(){return vr}});var G={};k.r(G),k.d(G,{equidistance:function(){return Ii},equidistanceWithReverseBoth:function(){return ea},getDefault:function(){return Tn},reserveBoth:function(){return li},reserveFirst:function(){return Un},reserveLast:function(){return si}});var j={};k.r(j),k.d(j,{fixedAngle:function(){return Fi},getDefault:function(){return lo},unfixedAngle:function(){return Ia}});var q={};k.r(q),k.d(q,{autoEllipsis:function(){return b},autoHide:function(){return G},autoRotate:function(){return j}});var Q={};k.r(Q),k.d(Q,{Base:function(){return da},Circle:function(){return Bu},Html:function(){return ac},Line:function(){return Ns}});var ie={};k.r(ie),k.d(ie,{CONTAINER_CLASS:function(){return Hl},CROSSHAIR_X:function(){return ug},CROSSHAIR_Y:function(){return bv},LIST_CLASS:function(){return jl},LIST_ITEM_CLASS:function(){return Hh},MARKER_CLASS:function(){return wp},NAME_CLASS:function(){return Il},TITLE_CLASS:function(){return Rl},VALUE_CLASS:function(){return rf}});var te={};k.r(te),k.d(te,{Base:function(){return yt},Circle:function(){return B0},Ellipse:function(){return N0},Image:function(){return U0},Line:function(){return Z0},Marker:function(){return y_},Path:function(){return Mx},Polygon:function(){return WR},Polyline:function(){return GR},Rect:function(){return j0},Text:function(){return t2}});var Ce={};k.r(Ce),k.d(Ce,{Canvas:function(){return Ix},Group:function(){return Tm},Shape:function(){return te},getArcParams:function(){return fd},version:function(){return Px}});var pe={};k.r(pe),k.d(pe,{Base:function(){return bh},Circle:function(){return QR},Dom:function(){return e3},Ellipse:function(){return t3},Image:function(){return n3},Line:function(){return Lx},Marker:function(){return Dx},Path:function(){return K0},Polygon:function(){return q0},Polyline:function(){return _d},Rect:function(){return s2},Text:function(){return u3}});var fe={};k.r(fe),k.d(fe,{Canvas:function(){return M2},Group:function(){return kx},Shape:function(){return pe},version:function(){return R2}});var J={};k.r(J),k.d(J,{cluster:function(){return WD},hierarchy:function(){return Ay},pack:function(){return uL},packEnclose:function(){return AS},packSiblings:function(){return Af},partition:function(){return WT},stratify:function(){return YD},tree:function(){return eF},treemap:function(){return qT},treemapBinary:function(){return tF},treemapDice:function(){return Uy},treemapResquarify:function(){return nF},treemapSlice:function(){return F1},treemapSliceDice:function(){return rF},treemapSquarify:function(){return KT}});var M=k(97582),E=k(21030),ge;(function(a){a.FORE="fore",a.MID="mid",a.BG="bg"})(ge||(ge={}));var Se;(function(a){a.TOP="top",a.TOP_LEFT="top-left",a.TOP_RIGHT="top-right",a.RIGHT="right",a.RIGHT_TOP="right-top",a.RIGHT_BOTTOM="right-bottom",a.LEFT="left",a.LEFT_TOP="left-top",a.LEFT_BOTTOM="left-bottom",a.BOTTOM="bottom",a.BOTTOM_LEFT="bottom-left",a.BOTTOM_RIGHT="bottom-right",a.RADIUS="radius",a.CIRCLE="circle",a.NONE="none"})(Se||(Se={}));var ze;(function(a){a.AXIS="axis",a.GRID="grid",a.LEGEND="legend",a.TOOLTIP="tooltip",a.ANNOTATION="annotation",a.SLIDER="slider",a.SCROLLBAR="scrollbar",a.OTHER="other"})(ze||(ze={}));var De={FORE:3,MID:2,BG:1},Ue;(function(a){a.BEFORE_RENDER="beforerender",a.AFTER_RENDER="afterrender",a.BEFORE_PAINT="beforepaint",a.AFTER_PAINT="afterpaint",a.BEFORE_CHANGE_DATA="beforechangedata",a.AFTER_CHANGE_DATA="afterchangedata",a.BEFORE_CLEAR="beforeclear",a.AFTER_CLEAR="afterclear",a.BEFORE_DESTROY="beforedestroy",a.BEFORE_CHANGE_SIZE="beforechangesize",a.AFTER_CHANGE_SIZE="afterchangesize"})(Ue||(Ue={}));var at;(function(a){a.BEFORE_DRAW_ANIMATE="beforeanimate",a.AFTER_DRAW_ANIMATE="afteranimate",a.BEFORE_RENDER_LABEL="beforerenderlabel",a.AFTER_RENDER_LABEL="afterrenderlabel"})(at||(at={}));var Je;(function(a){a.MOUSE_ENTER="plot:mouseenter",a.MOUSE_DOWN="plot:mousedown",a.MOUSE_MOVE="plot:mousemove",a.MOUSE_UP="plot:mouseup",a.MOUSE_LEAVE="plot:mouseleave",a.TOUCH_START="plot:touchstart",a.TOUCH_MOVE="plot:touchmove",a.TOUCH_END="plot:touchend",a.TOUCH_CANCEL="plot:touchcancel",a.CLICK="plot:click",a.DBLCLICK="plot:dblclick",a.CONTEXTMENU="plot:contextmenu",a.LEAVE="plot:leave",a.ENTER="plot:enter"})(Je||(Je={}));var Ze;(function(a){a.ACTIVE="active",a.INACTIVE="inactive",a.SELECTED="selected",a.DEFAULT="default"})(Ze||(Ze={}));var xe=["color","shape","size"],_e="_origin",He=1,Ke=1,Et=.25,ke={};function qe(a){var n=ke[a];if(!n)throw new Error("G engine '".concat(a,"' is not exist, please register it at first."));return n}function ne(a,n){ke[a]=n}var Ge=k(6056),oe=k(45442);function Fe(a){var n=getComputedStyle(a);return{width:(a.clientWidth||parseInt(n.width,10))-parseInt(n.paddingLeft,10)-parseInt(n.paddingRight,10),height:(a.clientHeight||parseInt(n.height,10))-parseInt(n.paddingTop,10)-parseInt(n.paddingBottom,10)}}function ut(a){return typeof a=="number"&&!isNaN(a)}function Ae(a,n,t,s){var l=t,f=s;if(n){var d=Fe(a);l=d.width?d.width:l,f=d.height?d.height:f}return{width:Math.max(ut(l)?l:He,He),height:Math.max(ut(f)?f:Ke,Ke)}}function Le(a){var n=a.parentNode;n&&n.removeChild(a)}var rt=k(90494),ye=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this)||this;s.destroyed=!1;var l=t.visible,f=l===void 0?!0:l;return s.visible=f,s}return n.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},n.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},n.prototype.destroy=function(){this.off(),this.destroyed=!0},n.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},n}(rt.Z),me=ye,We=k(98190),Ve=0,dt=1/2,Ht=1/2,et=.05,$e=function(){function a(n){var t=n.xField,s=n.yField,l=n.adjustNames,f=l===void 0?["x","y"]:l,d=n.dimValuesMap;this.adjustNames=f,this.xField=t,this.yField=s,this.dimValuesMap=d}return a.prototype.isAdjust=function(n){return this.adjustNames.indexOf(n)>=0},a.prototype.getAdjustRange=function(n,t,s){var l=this.yField,f=s.indexOf(t),d=s.length,m,x;return!l&&this.isAdjust("y")?(m=0,x=1):d>1?(m=s[f===0?0:f-1],x=s[f===d-1?d-1:f+1],f!==0?m+=(t-m)/2:m-=(x-t)/2,f!==d-1?x-=(x-t)/2:x+=(t-s[d-2])/2):(m=t===0?0:t-.5,x=t===0?1:t+.5),{pre:m,next:x}},a.prototype.adjustData=function(n,t){var s=this,l=this.getDimValues(t);E.S6(n,function(f,d){E.S6(l,function(m,x){s.adjustDim(x,m,f,d)})})},a.prototype.groupData=function(n,t){return E.S6(n,function(s){s[t]===void 0&&(s[t]=Ve)}),E.vM(n,t)},a.prototype.adjustDim=function(n,t,s,l){},a.prototype.getDimValues=function(n){var t=this,s=t.xField,l=t.yField,f=E.f0({},this.dimValuesMap),d=[];if(s&&this.isAdjust("x")&&d.push(s),l&&this.isAdjust("y")&&d.push(l),d.forEach(function(x){f&&f[x]||(f[x]=E.I(n,x).sort(function(A,P){return A-P}))}),!l&&this.isAdjust("y")){var m="y";f[m]=[Ve,1]}return f},a}(),Te=$e,Xe={},pt=function(a){return Xe[a.toLowerCase()]},Oe=function(a,n){if(pt(a))throw new Error("Adjust type '"+a+"' existed.");Xe[a.toLowerCase()]=n},Be=k(52677),vt=k.n(Be);var Rt=function(n,t){return Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)l.hasOwnProperty(f)&&(s[f]=l[f])},Rt(n,t)};function rr(a,n){Rt(a,n);function t(){this.constructor=a}a.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var br=function(){return br=Object.assign||function(t){for(var s,l=1,f=arguments.length;l<f;l++){s=arguments[l];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(t[d]=s[d])}return t},br.apply(this,arguments)};function lt(a,n){var t={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(t[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(t[s[l]]=a[s[l]]);return t}function an(a,n,t,s){var l=arguments.length,f=l<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,t):s,d;if((typeof Reflect=="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(a,n,t,s);else for(var m=a.length-1;m>=0;m--)(d=a[m])&&(f=(l<3?d(f):l>3?d(n,t,f):d(n,t))||f);return l>3&&f&&Object.defineProperty(n,t,f),f}function $r(a,n){return function(t,s){n(t,s,a)}}function Xr(a,n){if((typeof Reflect=="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,n)}function Nt(a,n,t,s){function l(f){return f instanceof t?f:new t(function(d){d(f)})}return new(t||(t=Promise))(function(f,d){function m(P){try{A(s.next(P))}catch(L){d(L)}}function x(P){try{A(s.throw(P))}catch(L){d(L)}}function A(P){P.done?f(P.value):l(P.value).then(m,x)}A((s=s.apply(a,n||[])).next())})}function Kt(a,n){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},s,l,f,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(A){return function(P){return x([A,P])}}function x(A){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,l&&(f=A[0]&2?l.return:A[0]?l.throw||((f=l.return)&&f.call(l),0):l.next)&&!(f=f.call(l,A[1])).done)return f;switch(l=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,l=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){t.label=A[1];break}if(A[0]===6&&t.label<f[1]){t.label=f[1],f=A;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(A);break}f[2]&&t.ops.pop(),t.trys.pop();continue}A=n.call(a,t)}catch(P){A=[6,P],l=0}finally{s=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function or(a,n,t,s){s===void 0&&(s=t),a[s]=n[t]}function kt(a,n){for(var t in a)t!=="default"&&!n.hasOwnProperty(t)&&(n[t]=a[t])}function Jt(a){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&a[n],s=0;if(t)return t.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&s>=a.length&&(a=void 0),{value:a&&a[s++],done:!a}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Er(a,n){var t=typeof Symbol=="function"&&a[Symbol.iterator];if(!t)return a;var s=t.call(a),l,f=[],d;try{for(;(n===void 0||n-- >0)&&!(l=s.next()).done;)f.push(l.value)}catch(m){d={error:m}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(d)throw d.error}}return f}function wr(){for(var a=[],n=0;n<arguments.length;n++)a=a.concat(Er(arguments[n]));return a}function Br(){for(var a=0,n=0,t=arguments.length;n<t;n++)a+=arguments[n].length;for(var s=Array(a),l=0,n=0;n<t;n++)for(var f=arguments[n],d=0,m=f.length;d<m;d++,l++)s[l]=f[d];return s}function zr(a){return this instanceof zr?(this.v=a,this):new zr(a)}function le(a,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(a,n||[]),l,f=[];return l={},d("next"),d("throw"),d("return"),l[Symbol.asyncIterator]=function(){return this},l;function d(B){s[B]&&(l[B]=function(U){return new Promise(function(Y,se){f.push([B,U,Y,se])>1||m(B,U)})})}function m(B,U){try{x(s[B](U))}catch(Y){L(f[0][3],Y)}}function x(B){B.value instanceof zr?Promise.resolve(B.value.v).then(A,P):L(f[0][2],B)}function A(B){m("next",B)}function P(B){m("throw",B)}function L(B,U){B(U),f.shift(),f.length&&m(f[0][0],f[0][1])}}function H(a){var n,t;return n={},s("next"),s("throw",function(l){throw l}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(l,f){n[l]=a[l]?function(d){return(t=!t)?{value:zr(a[l](d)),done:l==="return"}:f?f(d):d}:f}}function re(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=a[Symbol.asyncIterator],t;return n?n.call(a):(a=typeof Jt=="function"?Jt(a):a[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(f){t[f]=a[f]&&function(d){return new Promise(function(m,x){d=a[f](d),l(m,x,d.done,d.value)})}}function l(f,d,m,x){Promise.resolve(x).then(function(A){f({value:A,done:m})},d)}}function Ie(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a}function Ye(a){if(a&&a.__esModule)return a;var n={};if(a!=null)for(var t in a)Object.hasOwnProperty.call(a,t)&&(n[t]=a[t]);return n.default=a,n}function Ct(a){return a&&a.__esModule?a:{default:a}}function ar(a,n){if(!n.has(a))throw new TypeError("attempted to get private field on non-instance");return n.get(a)}function jt(a,n,t){if(!n.has(a))throw new TypeError("attempted to set private field on non-instance");return n.set(a,t),t}var wt=function(a){rr(n,a);function n(t){var s=a.call(this,t)||this;s.cacheMap={},s.adjustDataArray=[],s.mergeData=[];var l=t.marginRatio,f=l===void 0?dt:l,d=t.dodgeRatio,m=d===void 0?Ht:d,x=t.dodgeBy,A=t.intervalPadding,P=t.dodgePadding,L=t.xDimensionLength,B=t.groupNum,U=t.defaultSize,Y=t.maxColumnWidth,se=t.minColumnWidth,be=t.columnWidthRatio,Ee=t.customOffset;return s.marginRatio=f,s.dodgeRatio=m,s.dodgeBy=x,s.intervalPadding=A,s.dodgePadding=P,s.xDimensionLegenth=L,s.groupNum=B,s.defaultSize=U,s.maxColumnWidth=Y,s.minColumnWidth=se,s.columnWidthRatio=be,s.customOffset=Ee,s}return n.prototype.process=function(t){var s=E.d9(t),l=E.xH(s),f=this.dodgeBy,d=f?E.ru(l,f):s;return this.cacheMap={},this.adjustDataArray=d,this.mergeData=l,this.adjustData(d,l),this.adjustDataArray=[],this.mergeData=[],s},n.prototype.adjustDim=function(t,s,l,f){var d=this,m=this.customOffset,x=this.getDistribution(t),A=this.groupData(l,t);return E.S6(A,function(P,L){var B;s.length===1?B={pre:s[0]-1,next:s[0]+1}:B=d.getAdjustRange(t,parseFloat(L),s),E.S6(P,function(U){var Y=U[t],se=x[Y],be=se.indexOf(f);if(E.UM(m))U[t]=d.getDodgeOffset(B,be,se.length);else{var Ee=B.pre,it=B.next;U[t]=E.mf(m)?m(U,B):(Ee+it)/2+m}})}),[]},n.prototype.getDodgeOffset=function(t,s,l){var f=this,d=f.dodgeRatio,m=f.marginRatio,x=f.intervalPadding,A=f.dodgePadding,P=t.pre,L=t.next,B=L-P,U;if(!E.UM(x)&&E.UM(A)&&x>=0){var Y=this.getIntervalOnlyOffset(l,s);U=P+Y}else if(!E.UM(A)&&E.UM(x)&&A>=0){var Y=this.getDodgeOnlyOffset(l,s);U=P+Y}else if(!E.UM(x)&&!E.UM(A)&&x>=0&&A>=0){var Y=this.getIntervalAndDodgeOffset(l,s);U=P+Y}else{var se=B*d/l,be=m*se,Y=1/2*(B-l*se-(l-1)*be)+((s+1)*se+s*be)-1/2*se-1/2*B;U=(P+L)/2+Y}return U},n.prototype.getIntervalOnlyOffset=function(t,s){var l=this,f=l.defaultSize,d=l.intervalPadding,m=l.xDimensionLegenth,x=l.groupNum,A=l.dodgeRatio,P=l.maxColumnWidth,L=l.minColumnWidth,B=l.columnWidthRatio,U=d/m,Y=(1-(x-1)*U)/x*A/(t-1),se=((1-U*(x-1))/x-Y*(t-1))/t;if(se=E.UM(B)?se:1/x/t*B,!E.UM(P)){var be=P/m;se=Math.min(se,be)}if(!E.UM(L)){var Ee=L/m;se=Math.max(se,Ee)}se=f?f/m:se,Y=((1-(x-1)*U)/x-t*se)/(t-1);var it=((1/2+s)*se+s*Y+1/2*U)*x-U/2;return it},n.prototype.getDodgeOnlyOffset=function(t,s){var l=this,f=l.defaultSize,d=l.dodgePadding,m=l.xDimensionLegenth,x=l.groupNum,A=l.marginRatio,P=l.maxColumnWidth,L=l.minColumnWidth,B=l.columnWidthRatio,U=d/m,Y=1*A/(x-1),se=((1-Y*(x-1))/x-U*(t-1))/t;if(se=B?1/x/t*B:se,!E.UM(P)){var be=P/m;se=Math.min(se,be)}if(!E.UM(L)){var Ee=L/m;se=Math.max(se,Ee)}se=f?f/m:se,Y=(1-(se*t+U*(t-1))*x)/(x-1);var it=((1/2+s)*se+s*U+1/2*Y)*x-Y/2;return it},n.prototype.getIntervalAndDodgeOffset=function(t,s){var l=this,f=l.intervalPadding,d=l.dodgePadding,m=l.xDimensionLegenth,x=l.groupNum,A=f/m,P=d/m,L=((1-A*(x-1))/x-P*(t-1))/t,B=((1/2+s)*L+s*P+1/2*A)*x-A/2;return B},n.prototype.getDistribution=function(t){var s=this.adjustDataArray,l=this.cacheMap,f=l[t];return f||(f={},E.S6(s,function(d,m){var x=E.I(d,t);x.length||x.push(0),E.S6(x,function(A){f[A]||(f[A]=[]),f[A].push(m)})}),l[t]=f),f},n}(Te),Mt=wt;function ve(a,n){return(n-a)*Math.random()+a}var he=function(a){rr(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.process=function(t){var s=E.d9(t),l=E.xH(s);return this.adjustData(s,l),s},n.prototype.adjustDim=function(t,s,l){var f=this,d=this.groupData(l,t);return E.S6(d,function(m,x){return f.adjustGroup(m,t,parseFloat(x),s)})},n.prototype.getAdjustOffset=function(t){var s=t.pre,l=t.next,f=(l-s)*et;return ve(s+f,l-f)},n.prototype.adjustGroup=function(t,s,l,f){var d=this,m=this.getAdjustRange(s,l,f);return E.S6(t,function(x){x[s]=d.getAdjustOffset(m)}),t},n}(Te),Re=he,tt=E.Ct,St=function(a){rr(n,a);function n(t){var s=a.call(this,t)||this,l=t.adjustNames,f=l===void 0?["y"]:l,d=t.height,m=d===void 0?NaN:d,x=t.size,A=x===void 0?10:x,P=t.reverseOrder,L=P===void 0?!1:P;return s.adjustNames=f,s.height=m,s.size=A,s.reverseOrder=L,s}return n.prototype.process=function(t){var s=this,l=s.yField,f=s.reverseOrder,d=l?this.processStack(t):this.processOneDimStack(t);return f?this.reverse(d):d},n.prototype.reverse=function(t){return t.slice(0).reverse()},n.prototype.processStack=function(t){var s=this,l=s.xField,f=s.yField,d=s.reverseOrder,m=d?this.reverse(t):t,x=new tt,A=new tt;return m.map(function(P){return P.map(function(L){var B,U=E.U2(L,l,0),Y=E.U2(L,[f]),se=U.toString();if(Y=E.kJ(Y)?Y[1]:Y,!E.UM(Y)){var be=Y>=0?x:A;be.has(se)||be.set(se,0);var Ee=be.get(se),it=Y+Ee;return be.set(se,it),br(br({},L),(B={},B[f]=[Ee,it],B))}return L})})},n.prototype.processOneDimStack=function(t){var s=this,l=this,f=l.xField,d=l.height,m=l.reverseOrder,x="y",A=m?this.reverse(t):t,P=new tt;return A.map(function(L){return L.map(function(B){var U,Y=s.size,se=B[f],be=Y*2/d;P.has(se)||P.set(se,be/2);var Ee=P.get(se);return P.set(se,Ee+be),br(br({},B),(U={},U[x]=Ee,U))})})},n}(Te),Gt=St,gr=function(a){rr(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.process=function(t){var s=E.xH(t),l=this,f=l.xField,d=l.yField,m=this.getXValuesMaxMap(s),x=Math.max.apply(Math,Object.keys(m).map(function(A){return m[A]}));return E.UI(t,function(A){return E.UI(A,function(P){var L,B,U=P[d],Y=P[f];if(E.kJ(U)){var se=(x-m[Y])/2;return br(br({},P),(L={},L[d]=E.UI(U,function(Ee){return se+Ee}),L))}var be=(x-U)/2;return br(br({},P),(B={},B[d]=[be,U+be],B))})})},n.prototype.getXValuesMaxMap=function(t){var s=this,l=this,f=l.xField,d=l.yField,m=E.vM(t,function(x){return x[f]});return E.Q8(m,function(x){return s.getDimMaxValue(x,d)})},n.prototype.getDimMaxValue=function(t,s){var l=E.UI(t,function(d){return E.U2(d,s,[])}),f=E.xH(l);return Math.max.apply(Math,f)},n}(Te),At=gr;Oe("Dodge",Mt),Oe("Jitter",Re),Oe("Stack",Gt),Oe("Symmetric",At);var st=function(a,n){return(0,E.HD)(n)?n:a.invert(a.scale(n))},Pt=function(){function a(n){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(n)}return a.prototype.mapping=function(){for(var n=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=t.map(function(f,d){return n._toOriginParam(f,n.scales[d])});return this.callback.apply(this,l)},a.prototype.getLinearValue=function(n){var t=this.values.length-1,s=Math.floor(t*n),l=t*n-s,f=this.values[s],d=s===t?f:this.values[s+1];return f+(d-f)*l},a.prototype.getNames=function(){for(var n=this.scales,t=this.names,s=Math.min(n.length,t.length),l=[],f=0;f<s;f+=1)l.push(t[f]);return l},a.prototype.getFields=function(){return this.scales.map(function(n){return n.field})},a.prototype.getScale=function(n){return this.scales[this.names.indexOf(n)]},a.prototype.defaultCallback=function(){for(var n=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return t.length===0?this.values:t.map(function(l,f){var d=n.scales[f];return d.type==="identity"?d.values[0]:n._getAttributeValue(d,l)})},a.prototype._parseCfg=function(n){var t=this,s=n.type,l=s===void 0?"base":s,f=n.names,d=f===void 0?[]:f,m=n.scales,x=m===void 0?[]:m,A=n.values,P=A===void 0?[]:A,L=n.callback;this.type=l,this.scales=x,this.values=P,this.names=d,this.callback=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];if(L){var Y=L.apply(void 0,B);if(!(0,E.UM)(Y))return[Y]}return t.defaultCallback.apply(t,B)}},a.prototype._getAttributeValue=function(n,t){if(n.isCategory&&!this.linear){var s=n.translate(t);return this.values[s%this.values.length]}var l=n.scale(t);return this.getLinearValue(l)},a.prototype._toOriginParam=function(n,t){return t.isLinear?n:(0,E.kJ)(n)?n.map(function(s){return st(t,s)}):st(t,n)},a}(),yr=Pt,Fr=/rgba?\(([\s.,0-9]+)\)/,Ft=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Mn=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ei=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,ni=function(a){return/^[r,R,L,l]{1}[\s]*\(/.test(a)},un=function(){var a=document.createElement("i");return a.title="Web Colour Picker",a.style.display="none",document.body.appendChild(a),a},Xn=function(a,n,t,s){return a[s]+(n[s]-a[s])*t};function Wn(a){return"#"+sa(a[0])+sa(a[1])+sa(a[2])}var Jn=function(a){return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]},sa=function(a){var n=Math.round(a).toString(16);return n.length===1?"0"+n:n},vi=function(a,n){var t=isNaN(Number(n))||n<0?0:n>1?1:Number(n),s=a.length-1,l=Math.floor(s*t),f=s*t-l,d=a[l],m=l===s?d:a[l+1];return Wn([Xn(d,m,f,0),Xn(d,m,f,1),Xn(d,m,f,2)])},ga,Ra=function(a){if(a[0]==="#"&&a.length===7)return a;ga||(ga=un()),ga.style.color=a;var n=document.defaultView.getComputedStyle(ga,"").getPropertyValue("color"),t=Fr.exec(n),s=t[1].split(/\s*,\s*/).map(function(l){return Number(l)});return n=Wn(s),n},ya=function(a){var n=(0,E.HD)(a)?a.split("-"):a,t=(0,E.UI)(n,function(s){return Jn(s.indexOf("#")===-1?Ra(s):s)});return function(s){return vi(t,s)}},ja=function(a){if(ni(a)){var n,t=void 0;if(a[0]==="l"){var s=Ft.exec(a),l=+s[1]+90;t=s[2],n="linear-gradient("+l+"deg, "}else if(a[0]==="r"){n="radial-gradient(";var s=Mn.exec(a);t=s[4]}var f=t.match(ei);return(0,E.S6)(f,function(d,m){var x=d.split(":");n+=x[1]+" "+x[0]*100+"%",m!==f.length-1&&(n+=", ")}),n+=")",n}return a},ba={rgb2arr:Jn,gradient:ya,toRGB:(0,E.HP)(Ra),toCSSGradient:ja},gs=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.type="color",s.names=["color"],(0,E.HD)(s.values)&&(s.linear=!0),s.gradient=ba.gradient(s.values),s}return n.prototype.getLinearValue=function(t){return this.gradient(t)},n}(yr),co=gs,Io=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.type="opacity",s.names=["opacity"],s}return n}(yr),oi=Io,Si=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.names=["x","y"],s.type="position",s}return n.prototype.mapping=function(t,s){var l=this.scales,f=l[0],d=l[1];return(0,E.UM)(t)||(0,E.UM)(s)?[]:[(0,E.kJ)(t)?t.map(function(m){return f.scale(m)}):f.scale(t),(0,E.kJ)(s)?s.map(function(m){return d.scale(m)}):d.scale(s)]},n}(yr),Qi=Si,Wa=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.type="shape",s.names=["shape"],s}return n.prototype.getLinearValue=function(t){var s=Math.round((this.values.length-1)*t);return this.values[s]},n}(yr),ms=Wa,ho=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.type="size",s.names=["size"],s}return n}(yr),Po=ho,cr={};function Ot(a){return cr[a]}function qt(a,n){cr[a]=n}var Mr=function(){function a(n){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=n,this.initCfg(),this.init()}return a.prototype.translate=function(n){return n},a.prototype.change=function(n){(0,E.f0)(this.__cfg__,n),this.init()},a.prototype.clone=function(){return this.constructor(this.__cfg__)},a.prototype.getTicks=function(){var n=this;return(0,E.UI)(this.ticks,function(t,s){return(0,E.Kn)(t)?t:{text:n.getText(t,s),tickValue:t,value:n.scale(t)}})},a.prototype.getText=function(n,t){var s=this.formatter,l=s?s(n,t):n;return(0,E.UM)(l)||!(0,E.mf)(l.toString)?"":l.toString()},a.prototype.getConfig=function(n){return this.__cfg__[n]},a.prototype.init=function(){(0,E.f0)(this,this.__cfg__),this.setDomain(),(0,E.xb)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},a.prototype.initCfg=function(){},a.prototype.setDomain=function(){},a.prototype.calculateTicks=function(){var n=this.tickMethod,t=[];if((0,E.HD)(n)){var s=Ot(n);if(!s)throw new Error("There is no method to to calculate ticks!");t=s(this)}else(0,E.mf)(n)&&(t=n(this));return t},a.prototype.rangeMin=function(){return this.range[0]},a.prototype.rangeMax=function(){return this.range[1]},a.prototype.calcPercent=function(n,t,s){return(0,E.hj)(n)?(n-t)/(s-t):NaN},a.prototype.calcValue=function(n,t,s){return t+n*(s-t)},a}(),rn=Mr,Pn=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return n.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},n.prototype.translate=function(t){this.buildIndexMap();var s=this.translateIndexMap.get(t);return s===void 0&&(s=(0,E.hj)(t)?t:NaN),s},n.prototype.scale=function(t){var s=this.translate(t),l=this.calcPercent(s,this.min,this.max);return this.calcValue(l,this.rangeMin(),this.rangeMax())},n.prototype.invert=function(t){var s=this.max-this.min,l=this.calcPercent(t,this.rangeMin(),this.rangeMax()),f=Math.round(s*l)+this.min;return f<this.min||f>this.max?NaN:this.values[f]},n.prototype.getText=function(t){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];var f=t;return(0,E.hj)(t)&&!this.values.includes(t)&&(f=this.values[f]),a.prototype.getText.apply(this,(0,M.pr)([f],s))},n.prototype.initCfg=function(){this.tickMethod="cat"},n.prototype.setDomain=function(){if((0,E.UM)(this.getConfig("min"))&&(this.min=0),(0,E.UM)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},n}(rn),Bn=Pn,Cn=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Mi="\\d\\d?",Xi="\\d\\d",Wo="\\d{3}",os="\\d{4}",Su="[^\\s]+",Oo=/\[([^]*?)\]/gm;function ro(a,n){for(var t=[],s=0,l=a.length;s<l;s++)t.push(a[s].substr(0,n));return t}var cu=function(a){return function(n,t){var s=t[a].map(function(f){return f.toLowerCase()}),l=s.indexOf(n.toLowerCase());return l>-1?l:null}};function Qo(a){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var s=0,l=n;s<l.length;s++){var f=l[s];for(var d in f)a[d]=f[d]}return a}var Zt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],er=["January","February","March","April","May","June","July","August","September","October","November","December"],Ur=ro(er,3),An=ro(Zt,3),fi={dayNamesShort:An,dayNames:Zt,monthNamesShort:Ur,monthNames:er,amPm:["am","pm"],DoFn:function(a){return a+["th","st","nd","rd"][a%10>3?0:(a-a%10!==10?1:0)*a%10]}},Vi=Qo({},fi),fo=function(a){return Vi=Qo(Vi,a)},Ws=function(a){return a.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Co=function(a,n){for(n===void 0&&(n=2),a=String(a);a.length<n;)a="0"+a;return a},ko={D:function(a){return String(a.getDate())},DD:function(a){return Co(a.getDate())},Do:function(a,n){return n.DoFn(a.getDate())},d:function(a){return String(a.getDay())},dd:function(a){return Co(a.getDay())},ddd:function(a,n){return n.dayNamesShort[a.getDay()]},dddd:function(a,n){return n.dayNames[a.getDay()]},M:function(a){return String(a.getMonth()+1)},MM:function(a){return Co(a.getMonth()+1)},MMM:function(a,n){return n.monthNamesShort[a.getMonth()]},MMMM:function(a,n){return n.monthNames[a.getMonth()]},YY:function(a){return Co(String(a.getFullYear()),4).substr(2)},YYYY:function(a){return Co(a.getFullYear(),4)},h:function(a){return String(a.getHours()%12||12)},hh:function(a){return Co(a.getHours()%12||12)},H:function(a){return String(a.getHours())},HH:function(a){return Co(a.getHours())},m:function(a){return String(a.getMinutes())},mm:function(a){return Co(a.getMinutes())},s:function(a){return String(a.getSeconds())},ss:function(a){return Co(a.getSeconds())},S:function(a){return String(Math.round(a.getMilliseconds()/100))},SS:function(a){return Co(Math.round(a.getMilliseconds()/10),2)},SSS:function(a){return Co(a.getMilliseconds(),3)},a:function(a,n){return a.getHours()<12?n.amPm[0]:n.amPm[1]},A:function(a,n){return a.getHours()<12?n.amPm[0].toUpperCase():n.amPm[1].toUpperCase()},ZZ:function(a){var n=a.getTimezoneOffset();return(n>0?"-":"+")+Co(Math.floor(Math.abs(n)/60)*100+Math.abs(n)%60,4)},Z:function(a){var n=a.getTimezoneOffset();return(n>0?"-":"+")+Co(Math.floor(Math.abs(n)/60),2)+":"+Co(Math.abs(n)%60,2)}},ju=function(a){return+a-1},hf=[null,Mi],Qf=[null,Su],Jf=["isPm",Su,function(a,n){var t=a.toLowerCase();return t===n.amPm[0]?0:t===n.amPm[1]?1:null}],fu=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(a){var n=(a+"").match(/([+-]|\d\d)/gi);if(n){var t=+n[1]*60+parseInt(n[2],10);return n[0]==="+"?t:-t}return 0}],cc={D:["day",Mi],DD:["day",Xi],Do:["day",Mi+Su,function(a){return parseInt(a,10)}],M:["month",Mi,ju],MM:["month",Xi,ju],YY:["year",Xi,function(a){var n=new Date,t=+(""+n.getFullYear()).substr(0,2);return+(""+(+a>68?t-1:t)+a)}],h:["hour",Mi,void 0,"isPm"],hh:["hour",Xi,void 0,"isPm"],H:["hour",Mi],HH:["hour",Xi],m:["minute",Mi],mm:["minute",Xi],s:["second",Mi],ss:["second",Xi],YYYY:["year",os],S:["millisecond","\\d",function(a){return+a*100}],SS:["millisecond",Xi,function(a){return+a*10}],SSS:["millisecond",Wo],d:hf,dd:hf,ddd:Qf,dddd:Qf,MMM:["month",Su,cu("monthNamesShort")],MMMM:["month",Su,cu("monthNames")],a:Jf,A:Jf,ZZ:fu,Z:fu},ru={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Al=function(a){return Qo(ru,a)},fc=function(a,n,t){if(n===void 0&&(n=ru.default),t===void 0&&(t={}),typeof a=="number"&&(a=new Date(a)),Object.prototype.toString.call(a)!=="[object Date]"||isNaN(a.getTime()))throw new Error("Invalid Date pass to format");n=ru[n]||n;var s=[];n=n.replace(Oo,function(f,d){return s.push(d),"@@@"});var l=Qo(Qo({},Vi),t);return n=n.replace(Cn,function(f){return ko[f](a,l)}),n.replace(/@@@/g,function(){return s.shift()})};function yo(a,n,t){if(t===void 0&&(t={}),typeof n!="string")throw new Error("Invalid format in fecha parse");if(n=ru[n]||n,a.length>1e3)return null;var s=new Date,l={year:s.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},f=[],d=[],m=n.replace(Oo,function(xt,Bt){return d.push(Ws(Bt)),"@@@"}),x={},A={};m=Ws(m).replace(Cn,function(xt){var Bt=cc[xt],_r=Bt[0],Or=Bt[1],Gr=Bt[3];if(x[_r])throw new Error("Invalid format. "+_r+" specified twice in format");return x[_r]=!0,Gr&&(A[Gr]=!0),f.push(Bt),"("+Or+")"}),Object.keys(A).forEach(function(xt){if(!x[xt])throw new Error("Invalid format. "+xt+" is required in specified format")}),m=m.replace(/@@@/g,function(){return d.shift()});var P=a.match(new RegExp(m,"i"));if(!P)return null;for(var L=Qo(Qo({},Vi),t),B=1;B<P.length;B++){var U=f[B-1],Y=U[0],se=U[2],be=se?se(P[B],L):+P[B];if(be==null)return null;l[Y]=be}l.isPm===1&&l.hour!=null&&+l.hour!=12?l.hour=+l.hour+12:l.isPm===0&&+l.hour==12&&(l.hour=0);var Ee;if(l.timezoneOffset==null){Ee=new Date(l.year,l.month,l.day,l.hour,l.minute,l.second,l.millisecond);for(var it=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],B=0,gt=it.length;B<gt;B++)if(x[it[B][0]]&&l[it[B][0]]!==Ee[it[B][1]]())return null}else if(Ee=new Date(Date.UTC(l.year,l.month,l.day,l.hour,l.minute-l.timezoneOffset,l.second,l.millisecond)),l.month>11||l.month<0||l.day>31||l.day<1||l.hour>23||l.hour<0||l.minute>59||l.minute<0||l.second>59||l.second<0)return null;return Ee}var Jl={format:fc,parse:yo,defaultI18n:fi,setGlobalDateI18n:fo,setGlobalDateMasks:Al},As=Jl;function Ts(a){return function(n,t,s,l){for(var f=(0,E.UM)(s)?0:s,d=(0,E.UM)(l)?n.length:l;f<d;){var m=f+d>>>1;a(n[m])>t?d=m:f=m+1}return f}}var Mc="format";function Rc(a,n){var t=W[Mc]||As[Mc];return t(a,n)}function If(a){return(0,E.HD)(a)&&(a.indexOf("T")>0?a=new Date(a).getTime():a=new Date(a.replace(/-/gi,"/")).getTime()),(0,E.J_)(a)&&(a=a.getTime()),a}var Ll=1e3,Dl=60*Ll,ec=60*Dl,ku=24*ec,Ic=ku*31,In=ku*365,Zi=[["HH:mm:ss",Ll],["HH:mm:ss",Ll*10],["HH:mm:ss",Ll*30],["HH:mm",Dl],["HH:mm",Dl*10],["HH:mm",Dl*30],["HH",ec],["HH",ec*6],["HH",ec*12],["YYYY-MM-DD",ku],["YYYY-MM-DD",ku*4],["YYYY-WW",ku*7],["YYYY-MM",Ic],["YYYY-MM",Ic*4],["YYYY-MM",Ic*6],["YYYY",ku*380]];function _v(a,n,t){var s=(n-a)/t,l=Ts(function(d){return d[1]})(Zi,s)-1,f=Zi[l];return l<0?f=Zi[0]:l>=Zi.length&&(f=(0,E.Z$)(Zi)),f}var eh=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="timeCat",t}return n.prototype.translate=function(t){t=If(t);var s=this.values.indexOf(t);return s===-1&&((0,E.hj)(t)&&t<this.values.length?s=t:s=NaN),s},n.prototype.getText=function(t,s){var l=this.translate(t);if(l>-1){var f=this.values[l],d=this.formatter;return f=d?d(f,s):Rc(f,this.mask),f}return t},n.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},n.prototype.setDomain=function(){var t=this.values;(0,E.S6)(t,function(s,l){t[l]=If(s)}),t.sort(function(s,l){return s-l}),a.prototype.setDomain.call(this)},n}(Bn),hc=eh,Wp=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.isContinuous=!0,t}return n.prototype.scale=function(t){if((0,E.UM)(t))return NaN;var s=this.rangeMin(),l=this.rangeMax(),f=this.max,d=this.min;if(f===d)return s;var m=this.getScalePercent(t);return s+m*(l-s)},n.prototype.init=function(){a.prototype.init.call(this);var t=this.ticks,s=(0,E.YM)(t),l=(0,E.Z$)(t);s<this.min&&(this.min=s),l>this.max&&(this.max=l),(0,E.UM)(this.minLimit)||(this.min=s),(0,E.UM)(this.maxLimit)||(this.max=l)},n.prototype.setDomain=function(){var t=(0,E.rx)(this.values),s=t.min,l=t.max;(0,E.UM)(this.min)&&(this.min=s),(0,E.UM)(this.max)&&(this.max=l),this.min>this.max&&(this.min=s,this.max=l)},n.prototype.calculateTicks=function(){var t=this,s=a.prototype.calculateTicks.call(this);return this.nice||(s=(0,E.hX)(s,function(l){return l>=t.min&&l<=t.max})),s},n.prototype.getScalePercent=function(t){var s=this.max,l=this.min;return(t-l)/(s-l)},n.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},n}(rn),Ks=Wp,Pc=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return n.prototype.invert=function(t){var s=this.getInvertPercent(t);return this.min+s*(this.max-this.min)},n.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},n}(Ks),Fl=Pc;function nu(a,n){var t=Math.E,s;return n>=0?s=Math.pow(t,Math.log(n)/a):s=Math.pow(t,Math.log(-n)/a)*-1,s}function hu(a,n){return a===1?1:Math.log(n)/Math.log(a)}function Tl(a,n,t){(0,E.UM)(t)&&(t=Math.max.apply(null,a));var s=t;return(0,E.S6)(a,function(l){l>0&&l<s&&(s=l)}),s===t&&(s=t/n),s>1&&(s=1),s}function pc(a){var n=a.toString().split(/[eE]/),t=(n[0].split(".")[1]||"").length-+(n[1]||0);return t>0?t:0}function Bl(a,n){var t=pc(a),s=pc(n),l=Math.pow(10,Math.max(t,s));return(a*l+n*l)/l}var Oc=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="log",t}return n.prototype.invert=function(t){var s=this.base,l=hu(s,this.max),f=this.rangeMin(),d=this.rangeMax()-f,m,x=this.positiveMin;if(x){if(t===0)return 0;m=hu(s,x/s);var A=1/(l-m)*d;if(t<A)return t/A*x}else m=hu(s,this.min);var P=(t-f)/d,L=P*(l-m)+m;return Math.pow(s,L)},n.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},n.prototype.setDomain=function(){a.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=Tl(this.values,this.base,this.max))},n.prototype.getScalePercent=function(t){var s=this.max,l=this.min;if(s===l||t<=0)return 0;var f=this.base,d=this.positiveMin;d&&(l=d*1/f);var m;return t<d?m=t/d/(hu(f,s)-hu(f,l)):m=(hu(f,t)-hu(f,l))/(hu(f,s)-hu(f,l)),m},n}(Ks),Kc=Oc,th=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="pow",t}return n.prototype.invert=function(t){var s=this.getInvertPercent(t),l=this.exponent,f=nu(l,this.max),d=nu(l,this.min),m=s*(f-d)+d,x=m>=0?1:-1;return Math.pow(m,l)*x},n.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},n.prototype.getScalePercent=function(t){var s=this.max,l=this.min;if(s===l)return 0;var f=this.exponent,d=(nu(f,t)-nu(f,l))/(nu(f,s)-nu(f,l));return d},n}(Ks),Gp=th,Uo=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="time",t}return n.prototype.getText=function(t,s){var l=this.translate(t),f=this.formatter;return f?f(l,s):Rc(l,this.mask)},n.prototype.scale=function(t){var s=t;return((0,E.HD)(s)||(0,E.J_)(s))&&(s=this.translate(s)),a.prototype.scale.call(this,s)},n.prototype.translate=function(t){return If(t)},n.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},n.prototype.setDomain=function(){var t=this.values,s=this.getConfig("min"),l=this.getConfig("max");if((!(0,E.UM)(s)||!(0,E.hj)(s))&&(this.min=this.translate(this.min)),(!(0,E.UM)(l)||!(0,E.hj)(l))&&(this.max=this.translate(this.max)),t&&t.length){var f=[],d=1/0,m=d,x=0;(0,E.S6)(t,function(A){var P=If(A);if(isNaN(P))throw new TypeError("Invalid Time: "+A+" in time scale!");d>P?(m=d,d=P):m>P&&(m=P),x<P&&(x=P),f.push(P)}),t.length>1&&(this.minTickInterval=m-d),(0,E.UM)(s)&&(this.min=d),(0,E.UM)(l)&&(this.max=x)}},n}(Fl),Od=Uo,Oh=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="quantize",t}return n.prototype.invert=function(t){var s=this.ticks,l=s.length,f=this.getInvertPercent(t),d=Math.floor(f*(l-1));if(d>=l-1)return(0,E.Z$)(s);if(d<0)return(0,E.YM)(s);var m=s[d],x=s[d+1],A=d/(l-1),P=(d+1)/(l-1);return m+(f-A)/(P-A)*(x-m)},n.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},n.prototype.calculateTicks=function(){var t=a.prototype.calculateTicks.call(this);return this.nice||((0,E.Z$)(t)!==this.max&&t.push(this.max),(0,E.YM)(t)!==this.min&&t.unshift(this.min)),t},n.prototype.getScalePercent=function(t){var s=this.ticks;if(t<(0,E.YM)(s))return 0;if(t>(0,E.Z$)(s))return 1;var l=0;return(0,E.S6)(s,function(f,d){if(t>=f)l=d;else return!1}),l/(s.length-1)},n}(Ks),pf=Oh,ss=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="quantile",t}return n.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},n}(pf),cp=ss,fp={};function Lu(a){return fp[a]}function Tt(a,n){if(Lu(a))throw new Error("type '"+a+"' existed.");fp[a]=n}var mr=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return n.prototype.calculateTicks=function(){return this.values},n.prototype.scale=function(t){return this.values[0]!==t&&(0,E.hj)(t)?t:this.range[0]},n.prototype.invert=function(t){var s=this.range;return t<s[0]||t>s[1]?NaN:this.values[0]},n}(rn),Hr=mr;function Qr(a){var n=a.values,t=a.tickInterval,s=a.tickCount,l=a.showLast;if((0,E.hj)(t)){var f=(0,E.hX)(n,function(Y,se){return se%t===0}),d=(0,E.Z$)(n);return l&&(0,E.Z$)(f)!==d&&f.push(d),f}var m=n.length,x=a.min,A=a.max;if((0,E.UM)(x)&&(x=0),(0,E.UM)(A)&&(A=n.length-1),!(0,E.hj)(s)||s>=m)return n.slice(x,A+1);if(s<=0||A<=0)return[];for(var P=s===1?m:Math.floor(m/(s-1)),L=[],B=x,U=0;U<s&&!(B>=A);U++)B=Math.min(x+U*P,A),U===s-1&&l?L.push(n[A]):L.push(n[B]);return L}function On(a){var n=a.min,t=a.max,s=a.nice,l=a.tickCount,f=new vl;return f.domain([n,t]),s&&f.nice(l),f.ticks(l)}var gi=5,ua=Math.sqrt(50),_o=Math.sqrt(10),Fs=Math.sqrt(2),vl=function(){function a(){this._domain=[0,1]}return a.prototype.domain=function(n){return n?(this._domain=Array.from(n,Number),this):this._domain.slice()},a.prototype.nice=function(n){var t,s;n===void 0&&(n=gi);var l=this._domain.slice(),f=0,d=this._domain.length-1,m=this._domain[f],x=this._domain[d],A;return x<m&&(t=[x,m],m=t[0],x=t[1],s=[d,f],f=s[0],d=s[1]),A=Lo(m,x,n),A>0?(m=Math.floor(m/A)*A,x=Math.ceil(x/A)*A,A=Lo(m,x,n)):A<0&&(m=Math.ceil(m*A)/A,x=Math.floor(x*A)/A,A=Lo(m,x,n)),A>0?(l[f]=Math.floor(m/A)*A,l[d]=Math.ceil(x/A)*A,this.domain(l)):A<0&&(l[f]=Math.ceil(m*A)/A,l[d]=Math.floor(x*A)/A,this.domain(l)),this},a.prototype.ticks=function(n){return n===void 0&&(n=gi),rl(this._domain[0],this._domain[this._domain.length-1],n||gi)},a}();function rl(a,n,t){var s,l=-1,f,d,m;if(n=+n,a=+a,t=+t,a===n&&t>0)return[a];if((s=n<a)&&(f=a,a=n,n=f),(m=Lo(a,n,t))===0||!isFinite(m))return[];if(m>0)for(a=Math.ceil(a/m),n=Math.floor(n/m),d=new Array(f=Math.ceil(n-a+1));++l<f;)d[l]=(a+l)*m;else for(a=Math.floor(a*m),n=Math.ceil(n*m),d=new Array(f=Math.ceil(a-n+1));++l<f;)d[l]=(a-l)/m;return s&&d.reverse(),d}function Lo(a,n,t){var s=(n-a)/Math.max(0,t),l=Math.floor(Math.log(s)/Math.LN10),f=s/Math.pow(10,l);return l>=0?(f>=ua?10:f>=_o?5:f>=Fs?2:1)*Math.pow(10,l):-Math.pow(10,-l)/(f>=ua?10:f>=_o?5:f>=Fs?2:1)}function hp(a,n,t){var s;return t==="ceil"?s=Math.ceil(a/n):t==="floor"?s=Math.floor(a/n):s=Math.round(a/n),s*n}function kd(a,n,t){var s=hp(a,t,"floor"),l=hp(n,t,"ceil");s=(0,E.ri)(s,t),l=(0,E.ri)(l,t);for(var f=[],d=Math.max((l-s)/(Math.pow(2,12)-1),t),m=s;m<=l;m=m+d){var x=(0,E.ri)(m,d);f.push(x)}return{min:s,max:l,ticks:f}}function qc(a,n,t){var s,l=a.minLimit,f=a.maxLimit,d=a.min,m=a.max,x=a.tickCount,A=x===void 0?5:x,P=(0,E.UM)(l)?(0,E.UM)(n)?d:n:l,L=(0,E.UM)(f)?(0,E.UM)(t)?m:t:f;if(P>L&&(s=[P,L],L=s[0],P=s[1]),A<=2)return[P,L];for(var B=(L-P)/(A-1),U=[],Y=0;Y<A;Y++)U.push(P+B*Y);return U}function pp(a){var n=a.min,t=a.max,s=a.tickInterval,l=a.minLimit,f=a.maxLimit,d=On(a);return!(0,E.UM)(l)||!(0,E.UM)(f)?qc(a,(0,E.YM)(d),(0,E.Z$)(d)):s?kd(n,t,s).ticks:d}function df(a){return Math.abs(a)<1e-15?a:parseFloat(a.toFixed(15))}var $p=[1,5,2,2.5,4,3],Ta=null,vf=Number.EPSILON*100;function rh(a,n){return(a%n+n)%n}function nh(a){return Math.round(a*1e12)/1e12}function Pf(a,n,t,s,l,f){var d=(0,E.dp)(n),m=(0,E.cq)(n,a),x=0,A=rh(s,f);return(A<vf||f-A<vf)&&s<=0&&l>=0&&(x=1),1-m/(d-1)-t+x}function ih(a,n,t){var s=(0,E.dp)(n),l=(0,E.cq)(n,a),f=1;return 1-l/(s-1)-t+f}function Gs(a,n,t,s,l,f){var d=(a-1)/(f-l),m=(n-1)/(Math.max(f,s)-Math.min(t,l));return 2-Math.max(d/m,m/d)}function dc(a,n){return a>=n?2-(a-1)/(n-1):1}function Du(a,n,t,s){var l=n-a;return 1-.5*(Math.pow(n-s,2)+Math.pow(a-t,2))/Math.pow(.1*l,2)}function ah(a,n,t){var s=n-a;if(t>s){var l=(t-s)/2;return 1-Math.pow(l,2)/Math.pow(.1*s,2)}return 1}function Xp(){return 1}function Yp(a,n,t,s,l,f){t===void 0&&(t=5),s===void 0&&(s=!0),l===void 0&&(l=$p),f===void 0&&(f=[.25,.2,.5,.05]);var d=t<0?0:Math.round(t);if(Number.isNaN(a)||Number.isNaN(n)||typeof a!="number"||typeof n!="number"||!d)return{min:0,max:0,ticks:[]};if(n-a<1e-15||d===1)return{min:a,max:n,ticks:[a]};if(n-a>1e148){var m=t||5,x=(n-a)/m;return{min:a,max:n,ticks:Array(m).fill(null).map(function(Ma,Va){return df(a+x*Va)})}}for(var A={score:-2,lmin:0,lmax:0,lstep:0},P=1;P<1/0;){for(var L=0;L<l.length;L+=1){var B=l[L],U=ih(B,l,P);if(f[0]*U+f[1]+f[2]+f[3]<A.score){P=1/0;break}for(var Y=2;Y<1/0;){var se=dc(Y,d);if(f[0]*U+f[1]+f[2]*se+f[3]<A.score)break;for(var be=(n-a)/(Y+1)/P/B,Ee=Math.ceil(Math.log10(be));Ee<1/0;){var it=P*B*Math.pow(10,Ee),gt=ah(a,n,it*(Y-1));if(f[0]*U+f[1]*gt+f[2]*se+f[3]<A.score)break;var xt=Math.floor(n/it)*P-(Y-1)*P,Bt=Math.ceil(a/it)*P;if(xt<=Bt)for(var m=Bt-xt,_r=0;_r<=m;_r+=1){var Or=xt+_r,Gr=Or*(it/P),mn=Gr+it*(Y-1),cn=it,Nn=Pf(B,l,P,Gr,mn,cn),hi=Du(a,n,Gr,mn),Wi=Gs(Y,d,a,n,Gr,mn),bi=Xp(),to=f[0]*Nn+f[1]*hi+f[2]*Wi+f[3]*bi;to>A.score&&(!s||Gr<=a&&mn>=n)&&(A.lmin=Gr,A.lmax=mn,A.lstep=cn,A.score=to)}Ee+=1}Y+=1}}P+=1}var jn=df(A.lmax),Ci=df(A.lmin),aa=df(A.lstep),Ni=Math.floor(nh((jn-Ci)/aa))+1,$i=new Array(Ni);$i[0]=df(Ci);for(var L=1;L<Ni;L++)$i[L]=df($i[L-1]+aa);return{min:Math.min(a,(0,E.YM)($i)),max:Math.max(n,(0,E.Z$)($i)),ticks:$i}}function oh(a){var n=a.min,t=a.max,s=a.tickCount,l=a.nice,f=a.tickInterval,d=a.minLimit,m=a.maxLimit,x=Yp(n,t,s,l).ticks;return!(0,E.UM)(d)||!(0,E.UM)(m)?qc(a,(0,E.YM)(x),(0,E.Z$)(x)):f?kd(n,t,f).ticks:x}function vc(a){var n=a.base,t=a.tickCount,s=a.min,l=a.max,f=a.values,d,m=hu(n,l);if(s>0)d=Math.floor(hu(n,s));else{var x=Tl(f,n,l);d=Math.floor(hu(n,x))}for(var A=m-d,P=Math.ceil(A/t),L=[],B=d;B<m+P;B=B+P)L.push(Math.pow(n,B));return s<=0&&L.unshift(0),L}function kh(a,n,t){if(t===void 0&&(t=5),a===n)return{max:n,min:a,ticks:[a]};var s=t<0?0:Math.round(t);if(s===0)return{max:n,min:a,ticks:[]};var l=1.5,f=.5+1.5*l,d=n-a,m=d/s,x=Math.pow(10,Math.floor(Math.log10(m))),A=x;2*x-m<l*(m-A)&&(A=2*x,5*x-m<f*(m-A)&&(A=5*x,10*x-m<l*(m-A)&&(A=10*x)));for(var P=Math.ceil(n/A),L=Math.floor(a/A),B=Math.max(P*A,n),U=Math.min(L*A,a),Y=Math.floor((B-U)/A)+1,se=new Array(Y),be=0;be<Y;be++)se[be]=df(U+be*A);return{min:U,max:B,ticks:se}}function dp(a){var n=a.exponent,t=a.tickCount,s=Math.ceil(nu(n,a.max)),l=Math.floor(nu(n,a.min)),f=kh(l,s,t).ticks;return f.map(function(d){var m=d>=0?1:-1;return Math.pow(d,n)*m})}function Of(a,n){var t=a.length*n;return n===1?a[a.length-1]:n===0?a[0]:t%1!==0?a[Math.ceil(t)-1]:a.length%2===0?(a[t-1]+a[t])/2:a[t]}function sg(a){var n=a.tickCount,t=a.values;if(!t||!t.length)return[];for(var s=t.slice().sort(function(m,x){return m-x}),l=[],f=0;f<n;f++){var d=f/(n-1);l.push(Of(s,d))}return l}function Ld(a){var n=a.min,t=a.max,s=a.tickCount,l=a.tickInterval,f=a.minLimit,d=a.maxLimit,m=kh(n,t,s).ticks;return!(0,E.UM)(f)||!(0,E.UM)(d)?qc(a,(0,E.YM)(m),(0,E.Z$)(m)):l?kd(n,t,l).ticks:m}function Dd(a){var n=a.min,t=a.max,s=a.minTickInterval,l=a.tickInterval,f=a.tickCount;if(l)f=Math.ceil((t-n)/l);else{l=_v(n,t,f)[1];var d=(t-n)/l,m=d/f;m>1&&(l=l*Math.ceil(m)),s&&l<s&&(l=s)}l=Math.max(Math.floor((t-n)/(Math.pow(2,12)-1)),l);for(var x=[],A=n;A<t+l;A+=l)x.push(A);return x}function Ms(a){var n=Qr((0,M.pi)({showLast:!0},a));return n}function Lh(a){return new Date(a).getFullYear()}function vp(a){return new Date(a,0,1).getTime()}function Kp(a){return new Date(a).getMonth()}function gp(a,n){var t=Lh(a),s=Lh(n),l=Kp(a),f=Kp(n);return(s-t)*12+(f-l)%12}function Fd(a,n){return new Date(a,n,1).getTime()}function Dh(a,n){return Math.ceil((n-a)/ku)}function Fh(a,n){return Math.ceil((n-a)/ec)}function kf(a,n){return Math.ceil((n-a)/(60*1e3))}function cs(a){var n=a.min,t=a.max,s=a.minTickInterval,l=a.tickCount,f=a.tickInterval,d=[];f||(f=(t-n)/l,s&&f<s&&(f=s)),f=Math.max(Math.floor((t-n)/(Math.pow(2,12)-1)),f);var m=Lh(n);if(f>In)for(var x=Lh(t),A=Math.ceil(f/In),P=m;P<=x+A;P=P+A)d.push(vp(P));else if(f>Ic)for(var L=Math.ceil(f/Ic),B=Kp(n),U=gp(n,t),P=0;P<=U+L;P=P+L)d.push(Fd(m,P+B));else if(f>ku)for(var Y=new Date(n),se=Y.getFullYear(),be=Y.getMonth(),Ee=Y.getDate(),it=Math.ceil(f/ku),gt=Dh(n,t),P=0;P<gt+it;P=P+it)d.push(new Date(se,be,Ee+P).getTime());else if(f>ec)for(var Y=new Date(n),se=Y.getFullYear(),be=Y.getMonth(),it=Y.getDate(),xt=Y.getHours(),Bt=Math.ceil(f/ec),_r=Fh(n,t),P=0;P<=_r+Bt;P=P+Bt)d.push(new Date(se,be,it,xt+P).getTime());else if(f>Dl)for(var Or=kf(n,t),Gr=Math.ceil(f/Dl),P=0;P<=Or+Gr;P=P+Gr)d.push(n+P*Dl);else{var mn=f;mn<Ll&&(mn=Ll);for(var cn=Math.floor(n/Ll)*Ll,Nn=Math.ceil((t-n)/Ll),hi=Math.ceil(mn/Ll),P=0;P<Nn+hi;P=P+hi)d.push(cn+P*Ll)}return d.length>=512&&console.warn("Notice: current ticks length("+d.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+f+") is too small, increase the value to solve the problem!"),d}qt("cat",Qr),qt("time-cat",Ms),qt("wilkinson-extended",oh),qt("r-pretty",Ld),qt("time",Dd),qt("time-pretty",cs),qt("log",vc),qt("pow",dp),qt("quantile",sg),qt("d3-linear",pp),Tt("cat",Bn),Tt("category",Bn),Tt("identity",Hr),Tt("linear",Fl),Tt("log",Kc),Tt("pow",Gp),Tt("time",Od),Tt("timeCat",hc),Tt("quantize",pf),Tt("quantile",cp);var mp={},tc=function(a){return mp[a.toLowerCase()]},gc=function(a,n){if(tc(a))throw new Error("Attribute type '".concat(a,"' existed."));mp[a.toLowerCase()]=n};gc("Color",co),gc("Opacity",oi),gc("Position",Qi),gc("Shape",ms),gc("Size",Po);var uo=k(77160),fs=k(35600),no=k(31506),qp=function(){function a(n){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=n.start,s=n.end,l=n.matrix,f=l===void 0?[1,0,0,0,1,0,0,0,1]:l,d=n.isTransposed,m=d===void 0?!1:d;this.start=t,this.end=s,this.matrix=f,this.originalMatrix=(0,M.ev)([],f),this.isTransposed=m}return a.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},a.prototype.update=function(n){(0,E.f0)(this,n),this.initial()},a.prototype.convertDim=function(n,t){var s,l=this[t],f=l.start,d=l.end;return this.isReflect(t)&&(s=[d,f],f=s[0],d=s[1]),f+n*(d-f)},a.prototype.invertDim=function(n,t){var s,l=this[t],f=l.start,d=l.end;return this.isReflect(t)&&(s=[d,f],f=s[0],d=s[1]),(n-f)/(d-f)},a.prototype.applyMatrix=function(n,t,s){s===void 0&&(s=0);var l=this.matrix,f=[n,t,s];return uo.transformMat3(f,f,l),f},a.prototype.invertMatrix=function(n,t,s){s===void 0&&(s=0);var l=this.matrix,f=fs.U_([0,0,0,0,0,0,0,0,0],l),d=[n,t,s];return f&&uo.transformMat3(d,d,f),d},a.prototype.convert=function(n){var t=this.convertPoint(n),s=t.x,l=t.y,f=this.applyMatrix(s,l,1);return{x:f[0],y:f[1]}},a.prototype.invert=function(n){var t=this.invertMatrix(n.x,n.y,1);return this.invertPoint({x:t[0],y:t[1]})},a.prototype.rotate=function(n){var t=this.matrix,s=this.center;return no.m$(t,t,[-s.x,-s.y]),no.zu(t,t,n),no.m$(t,t,[s.x,s.y]),this},a.prototype.reflect=function(n){return n==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},a.prototype.scale=function(n,t){var s=this.matrix,l=this.center;return no.m$(s,s,[-l.x,-l.y]),no.lh(s,s,[n,t]),no.m$(s,s,[l.x,l.y]),this},a.prototype.translate=function(n,t){var s=this.matrix;return no.m$(s,s,[n,t]),this},a.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},a.prototype.getCenter=function(){return this.center},a.prototype.getWidth=function(){return this.width},a.prototype.getHeight=function(){return this.height},a.prototype.getRadius=function(){return this.radius},a.prototype.isReflect=function(n){return n==="x"?this.isReflectX:this.isReflectY},a.prototype.resetMatrix=function(n){this.matrix=n||(0,M.ev)([],this.originalMatrix)},a}(),sh=qp,yp=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.isRect=!0,s.type="cartesian",s.initial(),s}return n.prototype.initial=function(){a.prototype.initial.call(this);var t=this.start,s=this.end;this.x={start:t.x,end:s.x},this.y={start:t.y,end:s.y}},n.prototype.convertPoint=function(t){var s,l=t.x,f=t.y;return this.isTransposed&&(s=[f,l],l=s[0],f=s[1]),{x:this.convertDim(l,"x"),y:this.convertDim(f,"y")}},n.prototype.invertPoint=function(t){var s,l=this.invertDim(t.x,"x"),f=this.invertDim(t.y,"y");return this.isTransposed&&(s=[f,l],l=s[0],f=s[1]),{x:l,y:f}},n}(sh),Bd=yp,Ea=k(31437),uh=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;s.isHelix=!0,s.type="helix";var l=t.startAngle,f=l===void 0?1.25*Math.PI:l,d=t.endAngle,m=d===void 0?7.25*Math.PI:d,x=t.innerRadius,A=x===void 0?0:x,P=t.radius;return s.startAngle=f,s.endAngle=m,s.innerRadius=A,s.radius=P,s.initial(),s}return n.prototype.initial=function(){a.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,s=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(s=s*this.radius),this.d=Math.floor(s*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*s,end:this.innerRadius*s+this.d*.99}},n.prototype.convertPoint=function(t){var s,l=t.x,f=t.y;this.isTransposed&&(s=[f,l],l=s[0],f=s[1]);var d=this.convertDim(l,"x"),m=this.a*d,x=this.convertDim(f,"y");return{x:this.center.x+Math.cos(d)*(m+x),y:this.center.y+Math.sin(d)*(m+x)}},n.prototype.invertPoint=function(t){var s,l=this.d+this.y.start,f=Ea.$X([0,0],[t.x,t.y],[this.center.x,this.center.y]),d=no.Dg(f,[1,0],!0),m=d*this.a;Ea.kE(f)<m&&(m=Ea.kE(f));var x=Math.floor((Ea.kE(f)-m)/l);d=2*x*Math.PI+d;var A=this.a*d,P=Ea.kE(f)-A;P=(0,E.vQ)(P,0)?0:P;var L=this.invertDim(d,"x"),B=this.invertDim(P,"y");return L=(0,E.vQ)(L,0)?0:L,B=(0,E.vQ)(B,0)?0:B,this.isTransposed&&(s=[B,L],L=s[0],B=s[1]),{x:L,y:B}},n}(sh),Lf=uh,iu=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;s.isPolar=!0,s.type="polar";var l=t.startAngle,f=l===void 0?-Math.PI/2:l,d=t.endAngle,m=d===void 0?Math.PI*3/2:d,x=t.innerRadius,A=x===void 0?0:x,P=t.radius;return s.startAngle=f,s.endAngle=m,s.innerRadius=A,s.radius=P,s.initial(),s}return n.prototype.initial=function(){for(a.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),s=t.maxX-t.minX,l=t.maxY-t.minY,f=Math.abs(t.minX)/s,d=Math.abs(t.minY)/l,m;this.height/l>this.width/s?(m=this.width/s,this.circleCenter={x:this.center.x-(.5-f)*this.width,y:this.center.y-(.5-d)*m*l}):(m=this.height/l,this.circleCenter={x:this.center.x-(.5-f)*m*s,y:this.center.y-(.5-d)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=m*this.radius:(this.radius<=0||this.radius>m)&&(this.polarRadius=m):this.polarRadius=m,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},n.prototype.getRadius=function(){return this.polarRadius},n.prototype.convertPoint=function(t){var s,l=this.getCenter(),f=t.x,d=t.y;return this.isTransposed&&(s=[d,f],f=s[0],d=s[1]),f=this.convertDim(f,"x"),d=this.convertDim(d,"y"),{x:l.x+Math.cos(f)*d,y:l.y+Math.sin(f)*d}},n.prototype.invertPoint=function(t){var s,l=this.getCenter(),f=[t.x-l.x,t.y-l.y],d=this,m=d.startAngle,x=d.endAngle;this.isReflect("x")&&(s=[x,m],m=s[0],x=s[1]);var A=[1,0,0,0,1,0,0,0,1];no.zu(A,A,m);var P=[1,0,0];uo.transformMat3(P,P,A);var L=[P[0],P[1]],B=no.Dg(L,f,x<m);(0,E.vQ)(B,Math.PI*2)&&(B=0);var U=Ea.kE(f),Y=B/(x-m);Y=x-m>0?Y:-Y;var se=this.invertDim(U,"y"),be={x:0,y:0};return be.x=this.isTransposed?se:Y,be.y=this.isTransposed?Y:se,be},n.prototype.getCenter=function(){return this.circleCenter},n.prototype.getOneBox=function(){var t=this.startAngle,s=this.endAngle;if(Math.abs(s-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var l=[0,Math.cos(t),Math.cos(s)],f=[0,Math.sin(t),Math.sin(s)],d=Math.min(t,s);d<Math.max(t,s);d+=Math.PI/18)l.push(Math.cos(d)),f.push(Math.sin(d));return{minX:Math.min.apply(Math,l),maxX:Math.max.apply(Math,l),minY:Math.min.apply(Math,f),maxY:Math.max.apply(Math,f)}},n}(sh),us=iu,lh={},Nd=function(a){return lh[a.toLowerCase()]},ys=function(a,n){lh[a.toLowerCase()]=n};ys("rect",Bd),ys("cartesian",Bd),ys("polar",us),ys("helix",Lf);function zi(a,n,t){var s=new We.Event(n,t);s.target=a,s.propagationPath.push(a),a.emitDelegation(n,s);for(var l=a.getParent();l;)l.emitDelegation(n,s),s.propagationPath.push(l),l=l.getParent()}var nl=[1,0,0,0,1,0,0,0,1];function rc(a,n,t){if(t===void 0&&(t=nl),!n)return null;var s=no.vs(t,[["t",-a.x,-a.y],["r",n],["t",a.x,a.y]]);return s}function ch(a,n){return!a.x&&!a.y?null:no.vs(n||nl,[["t",a.x,a.y]])}function gl(a){var n=[1,0,0],t=[0,0,0];return uo.transformMat3(t,n,a),Math.atan2(t[1],t[0])}function Zo(a,n){var t=[0,0];return Ea.kK(t,n,a),t}function Qp(a,n){var t=Zo(a,[n.minX,n.minY]),s=Zo(a,[n.maxX,n.minY]),l=Zo(a,[n.minX,n.maxY]),f=Zo(a,[n.maxX,n.maxY]),d=Math.min(t[0],s[0],l[0],f[0]),m=Math.max(t[0],s[0],l[0],f[0]),x=Math.min(t[1],s[1],l[1],f[1]),A=Math.max(t[1],s[1],l[1],f[1]);return{x:d,y:x,minX:d,minY:x,maxX:m,maxY:A,width:m-d,height:A-x}}function Yn(a,n,t,s){if(n){var l=rc({x:t,y:s},n,a.getMatrix());a.setMatrix(l)}}function Qc(a,n,t){var s=ch({x:n,y:t});a.attr("matrix",s)}function kc(a){var n=0,t=0,s=0,l=0;return(0,E.hj)(a)?n=t=s=l=a:(0,E.kJ)(a)&&(n=a[0],s=(0,E.UM)(a[1])?a[0]:a[1],l=(0,E.UM)(a[2])?a[0]:a[2],t=(0,E.UM)(a[3])?s:a[3]),[n,s,l,t]}function _p(a){for(var n=a.childNodes,t=n.length,s=t-1;s>=0;s--)a.removeChild(n[s])}function mc(a,n){return!!a.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function il(a){var n=a.start,t=a.end,s=Math.min(n.x,t.x),l=Math.min(n.y,t.y),f=Math.max(n.x,t.x),d=Math.max(n.y,t.y);return{x:s,y:l,minX:s,minY:l,maxX:f,maxY:d,width:f-s,height:d-l}}function Bh(a){var n=a.map(function(m){return m.x}),t=a.map(function(m){return m.y}),s=Math.min.apply(Math,n),l=Math.min.apply(Math,t),f=Math.max.apply(Math,n),d=Math.max.apply(Math,t);return{x:s,y:l,minX:s,minY:l,maxX:f,maxY:d,width:f-s,height:d-l}}function gf(a,n,t,s){var l=a+t,f=n+s;return{x:a,y:n,width:t,height:s,minX:a,minY:n,maxX:isNaN(l)?0:l,maxY:isNaN(f)?0:f}}function Bs(a,n,t){return(1-t)*a+n*t}function Ml(a,n,t){return{x:a.x+Math.cos(t)*n,y:a.y+Math.sin(t)*n}}function zd(a,n){var t=n.x-a.x,s=n.y-a.y;return Math.sqrt(t*t+s*s)}var xp=function(a){return new Promise(function(n){setTimeout(n,a)})},Df=function(a,n,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[a,n].includes(1/0)?Math.abs(a)===Math.abs(n):Math.abs(a-n)<t};function xv(a,n){var t=Math.max(a.minX,n.minX),s=Math.max(a.minY,n.minY),l=Math.min(a.maxX,n.maxX),f=Math.min(a.maxY,n.maxY);return gf(t,s,l-t,f-s)}function nc(a,n){var t=Math.min(a.minX,n.minX),s=Math.min(a.minY,n.minY),l=Math.max(a.maxX,n.maxX),f=Math.max(a.maxY,n.maxY);return gf(t,s,l-t,f-s)}function ic(a){var n=a.getClip(),t=n&&n.getBBox(),s;if(!a.isGroup())s=a.getBBox();else{var l=1/0,f=-1/0,d=1/0,m=-1/0,x=a.getChildren();x.length>0?(0,E.S6)(x,function(A){if(A.get("visible")){if(A.isGroup()&&A.get("children").length===0)return!0;var P=ic(A),L=A.applyToMatrix([P.minX,P.minY,1]),B=A.applyToMatrix([P.minX,P.maxY,1]),U=A.applyToMatrix([P.maxX,P.minY,1]),Y=A.applyToMatrix([P.maxX,P.maxY,1]),se=Math.min(L[0],B[0],U[0],Y[0]),be=Math.max(L[0],B[0],U[0],Y[0]),Ee=Math.min(L[1],B[1],U[1],Y[1]),it=Math.max(L[1],B[1],U[1],Y[1]);se<l&&(l=se),be>f&&(f=be),Ee<d&&(d=Ee),it>m&&(m=it)}}):(l=0,f=0,d=0,m=0),s=gf(l,d,f-l,m-d)}return t?xv(s,t):s}function wa(a,n){if(!(!a.getClip()&&!n.getClip())){var t=n.getClip();if(!t){a.setClip(null);return}var s={type:t.get("type"),attrs:t.attr()};a.setClip(s)}}function Rs(a){return a+"px"}function Nl(a,n,t,s){var l=zd(a,n),f=s/l,d=0;return t==="start"?d=0-f:t==="end"&&(d=1+f),{x:Bs(a.x,n.x,d),y:Bs(a.y,n.y,d)}}var Wu={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},fh=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.initCfg(),s}return n.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},n.prototype.clear=function(){},n.prototype.update=function(t){var s=this,l=this.get("defaultCfg")||{};(0,E.S6)(t,function(f,d){var m=s.get(d),x=f;m!==f&&((0,E.Kn)(f)&&l[d]&&(x=(0,E.b$)({},l[d],f)),s.set(d,x))}),this.updateInner(t),this.afterUpdate(t)},n.prototype.updateInner=function(t){},n.prototype.afterUpdate=function(t){(0,E.wH)(t,"visible")&&(t.visible?this.show():this.hide()),(0,E.wH)(t,"capture")&&this.setCapture(t.capture)},n.prototype.getLayoutBBox=function(){return this.getBBox()},n.prototype.getLocationType=function(){return this.get("locationType")},n.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},n.prototype.setOffset=function(t,s){this.update({offsetX:t,offsetY:s})},n.prototype.setLocation=function(t){var s=(0,M.pi)({},t);this.update(s)},n.prototype.getLocation=function(){var t=this,s={},l=this.get("locationType"),f=Wu[l];return(0,E.S6)(f,function(d){s[d]=t.get(d)}),s},n.prototype.isList=function(){return!1},n.prototype.isSlider=function(){return!1},n.prototype.init=function(){},n.prototype.initCfg=function(){var t=this,s=this.get("defaultCfg");(0,E.S6)(s,function(l,f){var d=t.get(f);if((0,E.Kn)(d)){var m=(0,E.b$)({},l,d);t.set(f,m)}})},n}(We.Base),Jc=fh,Fu="update_status",ml=["visible","tip","delegateObject"],mf=["container","group","shapesMap","isRegister","isUpdating","destroyed"],Ji=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},n.prototype.remove=function(){this.clear();var t=this.get("group");t.remove()},n.prototype.clear=function(){var t=this.get("group");t.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},n.prototype.getChildComponentById=function(t){var s=this.getElementById(t),l=s&&s.get("component");return l},n.prototype.getElementById=function(t){return this.get("shapesMap")[t]},n.prototype.getElementByLocalId=function(t){var s=this.getElementId(t);return this.getElementById(s)},n.prototype.getElementsByName=function(t){var s=[];return(0,E.S6)(this.get("shapesMap"),function(l){l.get("name")===t&&s.push(l)}),s},n.prototype.getContainer=function(){return this.get("container")},n.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},n.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var s=this.get("group");this.updateElements(t,s),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},n.prototype.show=function(){var t=this.get("group");t.show(),this.set("visible",!0)},n.prototype.hide=function(){var t=this.get("group");t.hide(),this.set("visible",!1)},n.prototype.setCapture=function(t){var s=this.get("group");s.set("capture",t),this.set("capture",t)},n.prototype.destroy=function(){this.removeEvent(),this.remove(),a.prototype.destroy.call(this)},n.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},n.prototype.getLayoutBBox=function(){var t=this.get("group"),s=this.getInnerLayoutBBox(),l=t.getTotalMatrix();return l&&(s=Qp(l,s)),s},n.prototype.on=function(t,s,l){var f=this.get("group");return f.on(t,s,l),this},n.prototype.off=function(t,s){var l=this.get("group");return l&&l.off(t,s),this},n.prototype.emit=function(t,s){var l=this.get("group");l.emit(t,s)},n.prototype.init=function(){a.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},n.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},n.prototype.delegateEmit=function(t,s){var l=this.get("group");s.target=l,l.emit(t,s),zi(l,t,s)},n.prototype.createOffScreenGroup=function(){var t=this.get("group"),s=t.getGroupBase(),l=new s({delegateObject:this.getDelegateObject()});return l},n.prototype.applyOffset=function(){var t=this.get("offsetX"),s=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:s})},n.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},n.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",ic(t)),t},n.prototype.addGroup=function(t,s){this.appendDelegateObject(t,s);var l=t.addGroup(s);return this.get("isRegister")&&this.registerElement(l),l},n.prototype.addShape=function(t,s){this.appendDelegateObject(t,s);var l=t.addShape(s);return this.get("isRegister")&&this.registerElement(l),l},n.prototype.addComponent=function(t,s){var l=s.id,f=s.component,d=(0,M._T)(s,["id","component"]),m=new f((0,M.pi)((0,M.pi)({},d),{id:l,container:t,updateAutoRender:this.get("updateAutoRender")}));return m.init(),m.render(),this.get("isRegister")&&this.registerElement(m.get("group")),m},n.prototype.initEvent=function(){},n.prototype.removeEvent=function(){var t=this.get("group");t.off()},n.prototype.getElementId=function(t){var s=this.get("id"),l=this.get("name");return s+"-"+l+"-"+t},n.prototype.registerElement=function(t){var s=t.get("id");this.get("shapesMap")[s]=t},n.prototype.unregisterElement=function(t){var s=t.get("id");delete this.get("shapesMap")[s]},n.prototype.moveElementTo=function(t,s){var l=ch(s);t.attr("matrix",l)},n.prototype.addAnimation=function(t,s,l){var f=s.attr("opacity");(0,E.UM)(f)&&(f=1),s.attr("opacity",0),s.animate({opacity:f},l)},n.prototype.removeAnimation=function(t,s,l){s.animate({opacity:0},l)},n.prototype.updateAnimation=function(t,s,l,f){s.animate(l,f)},n.prototype.updateElements=function(t,s){var l=this,f=this.get("animate"),d=this.get("animateOption"),m=t.getChildren().slice(0),x;(0,E.S6)(m,function(A){var P=A.get("id"),L=l.getElementById(P),B=A.get("name");if(L)if(A.get("isComponent")){var U=A.get("component"),Y=L.get("component"),se=(0,E.ei)(U.cfg,(0,E.e5)((0,E.XP)(U.cfg),mf));Y.update(se),L.set(Fu,"update")}else{var be=l.getReplaceAttrs(L,A);f&&d.update?l.updateAnimation(B,L,be,d.update):L.attr(be),A.isGroup()&&l.updateElements(A,L),(0,E.S6)(ml,function(xt){L.set(xt,A.get(xt))}),wa(L,A),x=L,L.set(Fu,"update")}else{s.add(A);var Ee=s.getChildren();if(Ee.splice(Ee.length-1,1),x){var it=Ee.indexOf(x);Ee.splice(it+1,0,A)}else Ee.unshift(A);if(l.registerElement(A),A.set(Fu,"add"),A.get("isComponent")){var U=A.get("component");U.set("container",s)}else A.isGroup()&&l.registerNewGroup(A);if(x=A,f){var gt=l.get("isInit")?d.appear:d.enter;gt&&l.addAnimation(B,A,gt)}}})},n.prototype.clearUpdateStatus=function(t){var s=t.getChildren();(0,E.S6)(s,function(l){l.set(Fu,null)})},n.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},n.prototype.getDelegateObject=function(){var t,s=this.get("name"),l=(t={},t[s]=this,t.component=this,t);return l},n.prototype.appendDelegateObject=function(t,s){var l=t.get("delegateObject");s.delegateObject||(s.delegateObject={}),(0,E.CD)(s.delegateObject,l)},n.prototype.getReplaceAttrs=function(t,s){var l=t.attr(),f=s.attr();return(0,E.S6)(l,function(d,m){f[m]===void 0&&(f[m]=void 0)}),f},n.prototype.registerNewGroup=function(t){var s=this,l=t.getChildren();(0,E.S6)(l,function(f){s.registerElement(f),f.set(Fu,"add"),f.isGroup()&&s.registerNewGroup(f)})},n.prototype.deleteElements=function(){var t=this,s=this.get("shapesMap"),l=[];(0,E.S6)(s,function(m,x){!m.get(Fu)||m.destroyed?l.push([x,m]):m.set(Fu,null)});var f=this.get("animate"),d=this.get("animateOption");(0,E.S6)(l,function(m){var x=m[0],A=m[1];if(!A.destroyed){var P=A.get("name");if(f&&d.leave){var L=(0,E.CD)({callback:function(){t.removeElement(A)}},d.leave);t.removeAnimation(P,A,L)}else t.removeElement(A)}delete s[x]})},n.prototype.removeElement=function(t){if(t.get("isGroup")){var s=t.get("component");s&&s.destroy()}t.remove()},n}(Jc),Ai=Ji,al="\u2026";function yl(a){for(var n=0,t=0;t<a.length;t++)n+=ol(a,t);return n}function ol(a,n){return a.charCodeAt(n)>0&&a.charCodeAt(n)<128?1:2}function _s(a,n,t){t===void 0&&(t="tail");var s=a.length,l="";if(t==="tail"){for(var f=0,d=0;f<n;){var m=ol(a,d);if(f+m<=n)l+=a[d],f+=ol(a,d),d++;else break}l+=al}else if(t==="head"){for(var f=0,d=s-1;f<n;){var m=ol(a,d);if(f+m<=n)l+=a[d],f+=ol(a,d),d--;else break}l=al+l}else{for(var x="",A="",f=0,P=0,L=s-1;f<n;){var B=ol(a,P),U=!1;B+f<=n&&(x+=a[P],P++,f+=B,U=!0);var Y=ol(a,L);if(Y+f<=n&&(A=a[L]+A,f+=Y,L--,U=!0),!U)break}l=x+al+A}return l}var yc="\u2026",yf=2,Nh=400;function zo(a){for(var n=a.map(function(x){var A=x.attr("text");return(0,E.UM)(A)?"":""+A}),t=0,s=0,l=0;l<n.length;l+=1){for(var f=0,d=0;d<=n[l].length;d+=1){var m=n[l].charCodeAt(d);m>=19968&&m<=40869?f+=2:f+=1}f>t&&(t=f,s=l)}return a[s].getBBox().width}function au(a){if(a.length>Nh)return zo(a);var n=0;return(0,E.S6)(a,function(t){var s=t.getBBox(),l=s.width;n<l&&(n=l)}),n}function Jp(a,n){var t=n.getCanvasBBox();return a?t.width:t.height}function zh(a,n){return a.getBBox().width<n}function Ff(a,n,t,s){var l;s===void 0&&(s="tail");var f=(l=n.attr("text"))!==null&&l!==void 0?l:"";if(s==="tail"){var d=(0,E.ei)(n.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),m=(0,E.Lo)(f,t,d,"\u2026");return f!==m?(n.attr("text",m),n.set("tip",f),!0):(n.set("tip",null),!1)}var x=Jp(a,n),A=yl(f),P=!1;if(t<x){var L=Math.floor(t/x*A)-yf,B=void 0;L>=0?B=_s(f,L,s):B=yc,B&&(n.attr("text",B),P=!0)}return P?n.set("tip",f):n.set("tip",null),P}function _c(a,n){var t=n.x,s=n.y,l=n.content,f=n.style,d=n.id,m=n.name,x=n.rotate,A=n.maxLength,P=n.autoEllipsis,L=n.isVertical,B=n.ellipsisPosition,U=n.background,Y=a.addGroup({id:d+"-group",name:m+"-group",attrs:{x:t,y:s}}),se=Y.addShape({type:"text",id:d,name:m,attrs:(0,M.pi)({x:0,y:0,text:l},f)}),be=kc((0,E.U2)(U,"padding",0));if(A&&P){var Ee=A-(be[1]+be[3]);Ff(!L,se,Ee,B)}if(U){var it=(0,E.U2)(U,"style",{}),gt=se.getCanvasBBox(),xt=gt.minX,Bt=gt.minY,_r=gt.width,Or=gt.height,Gr=Y.addShape("rect",{id:d+"-bg",name:d+"-bg",attrs:(0,M.pi)({x:xt-be[3],y:Bt-be[0],width:_r+be[1]+be[3],height:Or+be[0]+be[2]},it)});Gr.toBack()}Qc(Y,t,s),Yn(Y,x,t,s)}var Ca={fontFamily:`
  BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4,descriptionIconStroke:"#fff",descriptionIconFill:"rgba(58, 73, 101, .25)"},Uh=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:Ca.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:Ca.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:Ca.lineColor,lineWidth:1}}}})},n.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},n.prototype.renderLine=function(t){var s=this.get("start"),l=this.get("end"),f=this.get("style");this.addShape(t,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,M.pi)({x1:s.x,y1:s.y,x2:l.x,y2:l.y},f)})},n.prototype.getLabelPoint=function(t,s,l){var f;return l==="start"?f=0:l==="center"?f=.5:(0,E.HD)(l)&&l.indexOf("%")!==-1?f=parseInt(l,10)/100:(0,E.hj)(l)?f=l:f=1,(f>1||f<0)&&(f=1),{x:Bs(t.x,s.x,f),y:Bs(t.y,s.y,f)}},n.prototype.renderLabel=function(t){var s=this.get("text"),l=this.get("start"),f=this.get("end"),d=s.position,m=s.content,x=s.style,A=s.offsetX,P=s.offsetY,L=s.autoRotate,B=s.maxLength,U=s.autoEllipsis,Y=s.ellipsisPosition,se=s.background,be=s.isVertical,Ee=be===void 0?!1:be,it=this.getLabelPoint(l,f,d),gt=it.x+A,xt=it.y+P,Bt={id:this.getElementId("line-text"),name:"annotation-line-text",x:gt,y:xt,content:m,style:x,maxLength:B,autoEllipsis:U,ellipsisPosition:Y,background:se,isVertical:Ee};if(L){var _r=[f.x-l.x,f.y-l.y];Bt.rotate=Math.atan2(_r[1],_r[0])}_c(t,Bt)},n}(Ai),Lc=Uh,ed=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:Ca.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:Ca.fontFamily}}})},n.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},n.prototype.renderInner=function(t){var s=this.getLocation(),l=s.x,f=s.y,d=this.get("content"),m=this.get("style"),x=this.getElementId("text"),A=this.get("name")+"-text",P=this.get("maxLength"),L=this.get("autoEllipsis"),B=this.get("isVertical"),U=this.get("ellipsisPosition"),Y=this.get("background"),se=this.get("rotate"),be={id:x,name:A,x:l,y:f,content:d,style:m,maxLength:P,autoEllipsis:L,isVertical:B,ellipsisPosition:U,background:Y,rotate:se};_c(t,be)},n.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var s=this.getLocation(),l=s.x,f=s.y,d=this.get("rotate");Qc(t,l,f),Yn(t,d,l,f)}},n}(Ai),Zh=ed,hh=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},n.prototype.renderInner=function(t){this.renderArc(t)},n.prototype.getArcPath=function(){var t=this.getLocation(),s=t.center,l=t.radius,f=t.startAngle,d=t.endAngle,m=Ml(s,l,f),x=Ml(s,l,d),A=d-f>Math.PI?1:0,P=[["M",m.x,m.y]];if(d-f===Math.PI*2){var L=Ml(s,l,f+Math.PI);P.push(["A",l,l,0,A,1,L.x,L.y]),P.push(["A",l,l,0,A,1,x.x,x.y])}else P.push(["A",l,l,0,A,1,x.x,x.y]);return P},n.prototype.renderArc=function(t){var s=this.getArcPath(),l=this.get("style");this.addShape(t,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,M.pi)({path:s},l)})},n}(Ai),bp=hh,Vh=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:Ca.regionColor,opacity:.4}}})},n.prototype.renderInner=function(t){this.renderRegion(t)},n.prototype.renderRegion=function(t){var s=this.get("start"),l=this.get("end"),f=this.get("style"),d=il({start:s,end:l});this.addShape(t,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,M.pi)({x:d.x,y:d.y,width:d.width,height:d.height},f)})},n}(Ai),Sn=Vh,Ar=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},n.prototype.renderInner=function(t){this.renderImage(t)},n.prototype.getImageAttrs=function(){var t=this.get("start"),s=this.get("end"),l=this.get("style"),f=il({start:t,end:s}),d=this.get("src");return(0,M.pi)({x:f.x,y:f.y,img:d,width:f.width,height:f.height},l)},n.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},n}(Ai),Ne=Ar,Dc=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:Ca.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:Ca.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:Ca.fontFamily}}}})},n.prototype.renderInner=function(t){(0,E.U2)(this.get("line"),"display")&&this.renderLine(t),(0,E.U2)(this.get("text"),"display")&&this.renderText(t),(0,E.U2)(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},n.prototype.renderPoint=function(t){var s=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:s})},n.prototype.renderLine=function(t){var s=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:s})},n.prototype.renderText=function(t){var s=this.getShapeAttrs().text,l=s.x,f=s.y,d=s.text,m=(0,M._T)(s,["x","y","text"]),x=this.get("text"),A=x.background,P=x.maxLength,L=x.autoEllipsis,B=x.isVertival,U=x.ellipsisPosition,Y={x:l,y:f,id:this.getElementId("text"),name:"annotation-text",content:d,style:m,background:A,maxLength:P,autoEllipsis:L,isVertival:B,ellipsisPosition:U};_c(t,Y)},n.prototype.autoAdjust=function(t){var s=this.get("direction"),l=this.get("x"),f=this.get("y"),d=(0,E.U2)(this.get("line"),"length",0),m=this.get("coordinateBBox"),x=t.getBBox(),A=x.minX,P=x.maxX,L=x.minY,B=x.maxY,U=t.findById(this.getElementId("text-group")),Y=t.findById(this.getElementId("text")),se=t.findById(this.getElementId("line"));if(m&&U){var be=U.attr("x"),Ee=U.attr("y"),it=Y.getCanvasBBox(),gt=it.width,xt=it.height,Bt=0,_r=0;if(l+A<=m.minX)if(s==="leftward")Bt=1;else{var Or=m.minX-(l+A);be=U.attr("x")+Or}else if(l+P>=m.maxX)if(s==="rightward")Bt=-1;else{var Or=l+P-m.maxX;be=U.attr("x")-Or}if(Bt&&(se&&se.attr("path",[["M",0,0],["L",d*Bt,0]]),be=(d+2+gt)*Bt),f+L<=m.minY)if(s==="upward")_r=1;else{var Or=m.minY-(f+L);Ee=U.attr("y")+Or}else if(f+B>=m.maxY)if(s==="downward")_r=-1;else{var Or=f+B-m.maxY;Ee=U.attr("y")-Or}_r&&(se&&se.attr("path",[["M",0,0],["L",0,d*_r]]),Ee=(d+2+xt)*_r),(be!==U.attr("x")||Ee!==U.attr("y"))&&Qc(U,be,Ee)}},n.prototype.getShapeAttrs=function(){var t=(0,E.U2)(this.get("line"),"display"),s=(0,E.U2)(this.get("point"),"style",{}),l=(0,E.U2)(this.get("line"),"style",{}),f=(0,E.U2)(this.get("text"),"style",{}),d=this.get("direction"),m=t?(0,E.U2)(this.get("line"),"length",0):0,x=0,A=0,P="top",L="start";switch(d){case"upward":A=-1,P="bottom";break;case"downward":A=1,P="top";break;case"leftward":x=-1,L="end";break;case"rightward":x=1,L="start";break}return{point:(0,M.pi)({x:0,y:0},s),line:(0,M.pi)({path:[["M",0,0],["L",m*x,m*A]]},l),text:(0,M.pi)({x:(m+2)*x,y:(m+2)*A,text:(0,E.U2)(this.get("text"),"content",""),textBaseline:P,textAlign:L},f)}},n}(Ai),nr=Dc,Bf=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:Ca.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:Ca.textColor,fontFamily:Ca.fontFamily}}}})},n.prototype.renderInner=function(t){var s=(0,E.U2)(this.get("region"),"style",{}),l=(0,E.U2)(this.get("text"),"style",{}),f=this.get("lineLength")||0,d=this.get("points");if(d.length){var m=Bh(d),x=[];x.push(["M",d[0].x,m.minY-f]),d.forEach(function(P){x.push(["L",P.x,P.y])}),x.push(["L",d[d.length-1].x,d[d.length-1].y-f]),this.addShape(t,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,M.pi)({path:x},s)});var A=(0,M.pi)({id:this.getElementId("text"),name:"annotation-text",x:(m.minX+m.maxX)/2,y:m.minY-f},this.get("text"));_c(t,A)}},n}(Ai),xs=Bf,Sp=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},n.prototype.renderInner=function(t){var s=this,l=this.get("start"),f=this.get("end"),d=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});(0,E.S6)(this.get("shapes"),function(x,A){var P=x.get("type"),L=(0,E.d9)(x.attr());s.adjustShapeAttrs(L),s.addShape(d,{id:s.getElementId("shape-"+P+"-"+A),capture:!1,type:P,attrs:L})});var m=il({start:l,end:f});d.setClip({type:"rect",attrs:{x:m.minX,y:m.minY,width:m.width,height:m.height}})},n.prototype.adjustShapeAttrs=function(t){var s=this.get("color");t.fill&&(t.fill=t.fillStyle=s),t.stroke=t.strokeStyle=s},n}(Ai),Nf=Sp,zl=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"shape",draw:E.ZT})},n.prototype.renderInner=function(t){var s=this.get("render");(0,E.mf)(s)&&s(t)},n}(Ai),Ep=zl;function S(a,n,t){var s;try{s=window.getComputedStyle?window.getComputedStyle(a,null)[n]:a.style[n]}catch(l){}finally{s=s===void 0?t:s}return s}function T(a,n){var t=S(a,"width",n);return t==="auto"&&(t=a.offsetWidth),parseFloat(t)}function C(a,n){var t=T(a,n),s=parseFloat(S(a,"borderLeftWidth"))||0,l=parseFloat(S(a,"paddingLeft"))||0,f=parseFloat(S(a,"paddingRight"))||0,d=parseFloat(S(a,"borderRightWidth"))||0,m=parseFloat(S(a,"marginRight"))||0,x=parseFloat(S(a,"marginLeft"))||0;return t+s+d+l+f+x+m}function I(a,n){var t=S(a,"height",n);return t==="auto"&&(t=a.offsetHeight),parseFloat(t)}function Z(a,n){var t=I(a,n),s=parseFloat(S(a,"borderTopWidth"))||0,l=parseFloat(S(a,"paddingTop"))||0,f=parseFloat(S(a,"paddingBottom"))||0,d=parseFloat(S(a,"borderBottomWidth"))||0,m=parseFloat(S(a,"marginTop"))||0,x=parseFloat(S(a,"marginBottom"))||0;return t+s+d+l+f+m+x}var ee=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},n.prototype.getContainer=function(){return this.get("container")},n.prototype.show=function(){var t=this.get("container");t.style.display="",this.set("visible",!0)},n.prototype.hide=function(){var t=this.get("container");t.style.display="none",this.set("visible",!1)},n.prototype.setCapture=function(t){var s=this.getContainer(),l=t?"auto":"none";s.style.pointerEvents=l,this.set("capture",t)},n.prototype.getBBox=function(){var t=this.getContainer(),s=parseFloat(t.style.left)||0,l=parseFloat(t.style.top)||0;return gf(s,l,t.clientWidth,t.clientHeight)},n.prototype.clear=function(){var t=this.get("container");_p(t)},n.prototype.destroy=function(){this.removeEvent(),this.removeDom(),a.prototype.destroy.call(this)},n.prototype.init=function(){a.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},n.prototype.initCapture=function(){this.setCapture(this.get("capture"))},n.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},n.prototype.initDom=function(){},n.prototype.initContainer=function(){var t=this.get("container");if((0,E.UM)(t)){t=this.createDom();var s=this.get("parent");(0,E.HD)(s)&&(s=document.getElementById(s),this.set("parent",s)),s.appendChild(t),this.get("containerId")&&t.setAttribute("id",this.get("containerId")),this.set("container",t)}else(0,E.HD)(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},n.prototype.resetStyles=function(){var t=this.get("domStyles"),s=this.get("defaultStyles");t?t=(0,E.b$)({},s,t):t=s,this.set("domStyles",t)},n.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var s=this.getContainer();this.applyChildrenStyles(s,t);var l=this.get("containerClassName");if(l&&mc(s,l)){var f=t[l];(0,oe.Z)(s,f)}}},n.prototype.applyChildrenStyles=function(t,s){(0,E.S6)(s,function(l,f){var d=t.getElementsByClassName(f);(0,E.S6)(d,function(m){(0,oe.Z)(m,l)})})},n.prototype.applyStyle=function(t,s){var l=this.get("domStyles");(0,oe.Z)(s,l[t])},n.prototype.createDom=function(){var t=this.get("containerTpl");return(0,Ge.Z)(t)},n.prototype.initEvent=function(){},n.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode&&t.parentNode.removeChild(t)},n.prototype.removeEvent=function(){},n.prototype.updateInner=function(t){(0,E.wH)(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},n.prototype.resetPosition=function(){},n}(Jc),ae=ee,Me=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation" style="position:absolute"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},n.prototype.render=function(){var t=this.getContainer(),s=this.get("html");_p(t);var l=(0,E.mf)(s)?s(t):s;if((0,E.kK)(l))t.appendChild(l);else if((0,E.HD)(l)||(0,E.hj)(l)){var f=(0,Ge.Z)(""+l);f&&t.appendChild(f)}this.resetPosition()},n.prototype.resetPosition=function(){var t=this.getContainer(),s=this.getLocation(),l=s.x,f=s.y,d=this.get("alignX"),m=this.get("alignY"),x=this.get("offsetX"),A=this.get("offsetY"),P=C(t),L=Z(t),B={x:l,y:f};d==="middle"?B.x-=Math.round(P/2):d==="right"&&(B.x-=Math.round(P)),m==="middle"?B.y-=Math.round(L/2):m==="bottom"&&(B.y-=Math.round(L)),x&&(B.x+=x),A&&(B.y+=A),(0,oe.Z)(t,{position:"absolute",left:B.x+"px",top:B.y+"px",zIndex:this.get("zIndex")})},n}(ae),ot=Me;function bt(a,n,t){var s=n+"Style",l=null;return(0,E.S6)(t,function(f,d){a[d]&&f[s]&&(l||(l={}),(0,E.CD)(l,f[s]))}),l}var Vt=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:Ca.lineColor}},tickLine:{style:{lineWidth:1,stroke:Ca.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:Ca.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:Ca.textColor,fontFamily:Ca.fontFamily,fontWeight:"normal"},offset:10,offsetX:0,offsetY:0},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:Ca.textColor,textBaseline:"middle",fontFamily:Ca.fontFamily,textAlign:"center"},iconStyle:{fill:Ca.descriptionIconFill,stroke:Ca.descriptionIconStroke},description:""},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:Ca.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},n.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},n.prototype.isList=function(){return!0},n.prototype.getItems=function(){return this.get("ticks")},n.prototype.setItems=function(t){this.update({ticks:t})},n.prototype.updateItem=function(t,s){(0,E.CD)(t,s),this.clear(),this.render()},n.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},n.prototype.setItemState=function(t,s,l){t[s]=l,this.updateTickStates(t)},n.prototype.hasState=function(t,s){return!!t[s]},n.prototype.getItemStates=function(t){var s=this.get("tickStates"),l=[];return(0,E.S6)(s,function(f,d){t[d]&&l.push(d)}),l},n.prototype.clearItemsState=function(t){var s=this,l=this.getItemsByState(t);(0,E.S6)(l,function(f){s.setItemState(f,t,!1)})},n.prototype.getItemsByState=function(t){var s=this,l=this.getItems();return(0,E.hX)(l,function(f){return s.hasState(f,t)})},n.prototype.getSidePoint=function(t,s){var l=this,f=l.getSideVector(s,t);return{x:t.x+f[0],y:t.y+f[1]}},n.prototype.getTextAnchor=function(t){var s;return(0,E.vQ)(t[0],0)?s="center":t[0]>0?s="start":t[0]<0&&(s="end"),s},n.prototype.getTextBaseline=function(t){var s;return(0,E.vQ)(t[1],0)?s="middle":t[1]>0?s="top":t[1]<0&&(s="bottom"),s},n.prototype.processOverlap=function(t){},n.prototype.drawLine=function(t){var s=this.getLinePath(),l=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,E.CD)({path:s},l.style)})},n.prototype.getTickLineItems=function(t){var s=this,l=[],f=this.get("tickLine"),d=f.alignTick,m=f.length,x=1,A=t.length;return A>=2&&(x=t[1].value-t[0].value),(0,E.S6)(t,function(P){var L=P.point;d||(L=s.getTickPoint(P.value-x/2));var B=s.getSidePoint(L,m);l.push({startPoint:L,tickValue:P.value,endPoint:B,tickId:P.id,id:"tickline-"+P.id})}),l},n.prototype.getSubTickLineItems=function(t){var s=[],l=this.get("subTickLine"),f=l.count,d=t.length;if(d>=2)for(var m=0;m<d-1;m++)for(var x=t[m],A=t[m+1],P=0;P<f;P++){var L=(P+1)/(f+1),B=(1-L)*x.tickValue+L*A.tickValue,U=this.getTickPoint(B),Y=this.getSidePoint(U,l.length);s.push({startPoint:U,endPoint:Y,tickValue:B,id:"sub-"+x.id+"-"+P})}return s},n.prototype.getTickLineAttrs=function(t,s,l,f){var d=this.get(s).style,m={points:[t.startPoint,t.endPoint]},x=(0,E.U2)(this.get("theme"),["tickLine","style"],{});d=(0,E.mf)(d)?(0,E.CD)({},x,d(m,l,f)):d;var A=t.startPoint,P=t.endPoint;return(0,M.pi)({x1:A.x,y1:A.y,x2:P.x,y2:P.y},d)},n.prototype.drawTick=function(t,s,l,f,d){this.addShape(s,{type:"line",id:this.getElementId(t.id),name:"axis-"+l,attrs:this.getTickLineAttrs(t,l,f,d)})},n.prototype.drawTickLines=function(t){var s=this,l=this.get("ticks"),f=this.get("subTickLine"),d=this.getTickLineItems(l),m=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),x=this.get("tickLine");if((0,E.S6)(d,function(P,L){if(x.displayWithLabel){var B=s.getElementId("label-"+P.tickId);t.findById(B)&&s.drawTick(P,m,"tickLine",L,d)}else s.drawTick(P,m,"tickLine",L,d)}),f){var A=this.getSubTickLineItems(d);(0,E.S6)(A,function(P,L){s.drawTick(P,m,"subTickLine",L,A)})}},n.prototype.processTicks=function(){var t=this,s=this.get("ticks");(0,E.S6)(s,function(l){l.point=t.getTickPoint(l.value),(0,E.UM)(l.id)&&(l.id=l.name)})},n.prototype.drawTicks=function(t){var s=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var l=this.get("ticks");(0,E.S6)(l,function(f){s.applyTickStates(f,t)})},n.prototype.optimizeTicks=function(){var t=this.get("optimize"),s=this.get("ticks");if(t&&t.enable&&t.threshold>0){var l=(0,E.dp)(s);if(l>t.threshold){var f=Math.ceil(l/t.threshold),d=s.filter(function(m,x){return x%f===0});this.set("ticks",d),this.set("originalTicks",s)}}},n.prototype.getLabelAttrs=function(t,s,l){var f=this.get("label"),d=f.offset,m=f.offsetX,x=f.offsetY,A=f.rotate,P=f.formatter,L=this.getSidePoint(t.point,d),B=this.getSideVector(d,L),U=P?P(t.name,t,s):t.name,Y=f.style;Y=(0,E.mf)(Y)?(0,E.U2)(this.get("theme"),["label","style"],{}):Y;var se=(0,E.CD)({x:L.x+m,y:L.y+x,text:U,textAlign:this.getTextAnchor(B),textBaseline:this.getTextBaseline(B)},Y);return A&&(se.matrix=rc(L,A)),se},n.prototype.drawLabels=function(t){var s=this,l=this.get("ticks"),f=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});(0,E.S6)(l,function(B,U){s.addShape(f,{type:"text",name:"axis-label",id:s.getElementId("label-"+B.id),attrs:s.getLabelAttrs(B,U,l),delegateObject:{tick:B,item:B,index:U}})}),this.processOverlap(f);var d=f.getChildren(),m=(0,E.U2)(this.get("theme"),["label","style"],{}),x=this.get("label"),A=x.style,P=x.formatter;if((0,E.mf)(A)){var L=d.map(function(B){return(0,E.U2)(B.get("delegateObject"),"tick")});(0,E.S6)(d,function(B,U){var Y=B.get("delegateObject").tick,se=P?P(Y.name,Y,U):Y.name,be=(0,E.CD)({},m,A(se,U,L));B.attr(be)})}},n.prototype.getTitleAttrs=function(){var t=this.get("title"),s=t.style,l=t.position,f=t.offset,d=t.spacing,m=d===void 0?0:d,x=t.autoRotate,A=s.fontSize,P=.5;l==="start"?P=0:l==="end"&&(P=1);var L=this.getTickPoint(P),B=this.getSidePoint(L,f||m+A/2),U=(0,E.CD)({x:B.x,y:B.y,text:t.text},s),Y=t.rotate,se=Y;if((0,E.UM)(Y)&&x){var be=this.getAxisVector(L),Ee=[1,0];se=no.Dg(be,Ee,!0)}if(se){var it=rc(B,se);U.matrix=it}return U},n.prototype.drawTitle=function(t){var s,l=this.getTitleAttrs(),f=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:l});!((s=this.get("title"))===null||s===void 0)&&s.description&&this.drawDescriptionIcon(t,f,l.matrix)},n.prototype.drawDescriptionIcon=function(t,s,l){var f=this.addGroup(t,{name:"axis-description",id:this.getElementById("description")}),d=s.getBBox(),m=d.maxX,x=d.maxY,A=d.height,P=this.get("title").iconStyle,L=4,B=A/2,U=B/6,Y=m+L,se=x-A/2,be=[Y+B,se-B],Ee=be[0],it=be[1],gt=[Ee+B,it+B],xt=gt[0],Bt=gt[1],_r=[Ee,Bt+B],Or=_r[0],Gr=_r[1],mn=[Y,it+B],cn=mn[0],Nn=mn[1],hi=[Y+B,se-A/4],Wi=hi[0],bi=hi[1],to=[Wi,bi+U],jn=to[0],Ci=to[1],aa=[jn,Ci+U],Ni=aa[0],$i=aa[1],Ma=[Ni,$i+B*3/4],Va=Ma[0],za=Ma[1];this.addShape(f,{type:"path",id:this.getElementId("title-description-icon"),name:"axis-title-description-icon",attrs:(0,M.pi)({path:[["M",Ee,it],["A",B,B,0,0,1,xt,Bt],["A",B,B,0,0,1,Or,Gr],["A",B,B,0,0,1,cn,Nn],["A",B,B,0,0,1,Ee,it],["M",Wi,bi],["L",jn,Ci],["M",Ni,$i],["L",Va,za]],lineWidth:U,matrix:l},P)}),this.addShape(f,{type:"rect",id:this.getElementId("title-description-rect"),name:"axis-title-description-rect",attrs:{x:Y,y:se-A/2,width:A,height:A,stroke:"#000",fill:"#000",opacity:0,matrix:l,cursor:"pointer"}})},n.prototype.applyTickStates=function(t,s){var l=this.getItemStates(t);if(l.length){var f=this.get("tickStates"),d=this.getElementId("label-"+t.id),m=s.findById(d);if(m){var x=bt(t,"label",f);x&&m.attr(x)}var A=this.getElementId("tickline-"+t.id),P=s.findById(A);if(P){var L=bt(t,"tickLine",f);L&&P.attr(L)}}},n.prototype.updateTickStates=function(t){var s=this.getItemStates(t),l=this.get("tickStates"),f=this.get("label"),d=this.getElementByLocalId("label-"+t.id),m=this.get("tickLine"),x=this.getElementByLocalId("tickline-"+t.id);if(s.length){if(d){var A=bt(t,"label",l);A&&d.attr(A)}if(x){var P=bt(t,"tickLine",l);P&&x.attr(P)}}else d&&d.attr(f.style),x&&x.attr(m.style)},n}(Ai),Wt=Vt;function $t(a,n,t,s){var l=n.getChildren(),f=!1;return(0,E.S6)(l,function(d){var m=Ff(a,d,t,s);f=f||m}),f}function vr(){return Ir}function hr(a,n,t){return $t(a,n,t,"head")}function Ir(a,n,t){return $t(a,n,t,"tail")}function lr(a,n,t){return $t(a,n,t,"middle")}function Pr(a){var n=a.attr("matrix");return n&&n[0]!==1}function jr(a){var n=Pr(a)?gl(a.attr("matrix")):0;return n%360}function tn(a,n,t,s){var l=!1,f=jr(n),d=Math.abs(a?t.attr("y")-n.attr("y"):t.attr("x")-n.attr("x")),m=(a?t.attr("y")>n.attr("y"):t.attr("x")>n.attr("x"))?n.getBBox():t.getBBox();if(a){var x=Math.abs(Math.cos(f));Df(x,0,Math.PI/180)?l=m.width+s>d:l=m.height/x+s>d}else{var x=Math.abs(Math.sin(f));Df(x,0,Math.PI/180)?l=m.width+s>d:l=m.height/x+s>d}return l}function _n(a,n,t,s){var l=(s==null?void 0:s.minGap)||0,f=n.getChildren().slice().filter(function(Y){return Y.get("visible")});if(!f.length)return!1;var d=!1;t&&f.reverse();for(var m=f.length,x=f[0],A=x,P=1;P<m;P++){var L=f[P],B=L.getBBox(),U=tn(a,A,L,l);U?(L.hide(),d=!0):A=L}return d}function dn(a,n,t){var s=(t==null?void 0:t.minGap)||0,l=n.getChildren().slice();if(l.length<2)return!1;var f=!1,d=l[0],m=d.getBBox(),x=l[1],A=l.length,P=jr(d),L=Math.abs(a?x.attr("y")-d.attr("y"):x.attr("x")-d.attr("x")),B=0;if(a){var U=Math.abs(Math.cos(P));if(Df(U,0,Math.PI/180)){var Y=au(l);B=(Y+s)/L}else B=(m.height/U+s)/L}else{var U=Math.abs(Math.sin(P));if(Df(U,0,Math.PI/180)){var Y=au(l);B=(Y+s)/L}else B=(m.height/U+s)/L}if(B>1){B=Math.ceil(B);for(var se=0;se<A;se++)se%B!==0&&(l[se].hide(),f=!0)}return f}function Tn(){return Ii}function Un(a,n,t,s){return _n(a,n,!1,s)}function si(a,n,t,s){return _n(a,n,!0,s)}function li(a,n,t,s){var l=(s==null?void 0:s.minGap)||0,f=n.getChildren().slice();if(f.length<=2)return!1;for(var d=!1,m=f.length,x=f[0],A=f[m-1],P=x,L=1;L<m-1;L++){var B=f[L],U=B.getBBox(),Y=tn(a,P,B,l);Y?(B.hide(),d=!0):P=B}var se=tn(a,P,A,l);return se&&(P.hide(),d=!0),d}function Ii(a,n,t,s){var l=dn(a,n,s);return _n(a,n,!1)&&(l=!0),l}function ea(a,n,t,s){var l=n.getChildren().slice(),f=dn(a,n,s);if(l.length>2){var d=l[0],m=l[l.length-1];d.get("visible")||(d.show(),_n(a,n,!1,s)&&(f=!0)),m.get("visible")||(m.show(),_n(a,n,!0,s)&&(f=!0))}return f}function la(a,n){(0,E.S6)(a,function(t){var s=t.attr("x"),l=t.attr("y"),f=rc({x:s,y:l},n);t.attr("matrix",f)})}function ra(a,n,t,s){var l=n.getChildren();if(!l.length||!a&&l.length<2)return!1;var f=au(l),d=!1;if(a)d=!!t&&f>t;else{var m=Math.abs(l[1].attr("x")-l[0].attr("x"));d=f>m}if(d){var x=s(t,f);la(l,x)}return d}function lo(){return Fi}function Fi(a,n,t,s){return ra(a,n,t,function(){return(0,E.hj)(s)?s:a?Ca.verticalAxisRotate:Ca.horizontalAxisRotate})}function Ia(a,n,t){return ra(a,n,t,function(s,l){if(!s)return a?Ca.verticalAxisRotate:Ca.horizontalAxisRotate;if(a)return-Math.acos(s/l);var f=0;return s>l?f=Math.PI/4:(f=Math.asin(s/l),f>Math.PI/4&&(f=Math.PI/4)),f})}var Xa=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"line",locationType:"region",start:null,end:null})},n.prototype.getLinePath=function(){var t=this.get("start"),s=this.get("end"),l=[];return l.push(["M",t.x,t.y]),l.push(["L",s.x,s.y]),l},n.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),s=this.get("end"),l=a.prototype.getInnerLayoutBBox.call(this),f=Math.min(t.x,s.x,l.x),d=Math.min(t.y,s.y,l.y),m=Math.max(t.x,s.x,l.maxX),x=Math.max(t.y,s.y,l.maxY);return{x:f,y:d,minX:f,minY:d,maxX:m,maxY:x,width:m-f,height:x-d}},n.prototype.isVertical=function(){var t=this.get("start"),s=this.get("end");return(0,E.vQ)(t.x,s.x)},n.prototype.isHorizontal=function(){var t=this.get("start"),s=this.get("end");return(0,E.vQ)(t.y,s.y)},n.prototype.getTickPoint=function(t){var s=this,l=s.get("start"),f=s.get("end"),d=f.x-l.x,m=f.y-l.y;return{x:l.x+d*t,y:l.y+m*t}},n.prototype.getSideVector=function(t){var s=this.getAxisVector(),l=Ea.Fv([0,0],s),f=this.get("verticalFactor"),d=[l[1],l[0]*-1];return Ea.bA([0,0],d,t*f)},n.prototype.getAxisVector=function(){var t=this.get("start"),s=this.get("end");return[s.x-t.x,s.y-t.y]},n.prototype.processOverlap=function(t){var s=this,l=this.isVertical(),f=this.isHorizontal();if(!(!l&&!f)){var d=this.get("label"),m=this.get("title"),x=this.get("verticalLimitLength"),A=d.offset,P=x,L=0,B=0;m&&(L=m.style.fontSize,B=m.spacing),P&&(P=P-A-B-L);var U=this.get("overlapOrder");if((0,E.S6)(U,function(be){d[be]&&s.canProcessOverlap(be)&&s.autoProcessOverlap(be,d[be],t,P)}),m&&(0,E.UM)(m.offset)){var Y=t.getCanvasBBox(),se=l?Y.width:Y.height;m.offset=A+se+B+L/2}}},n.prototype.canProcessOverlap=function(t){var s=this.get("label");return t==="autoRotate"?(0,E.UM)(s.rotate):!0},n.prototype.autoProcessOverlap=function(t,s,l,f){var d=this,m=this.isVertical(),x=!1,A=q[t];if(s===!0){var P=this.get("label");x=A.getDefault()(m,l,f)}else if((0,E.mf)(s))x=s(m,l,f);else if((0,E.Kn)(s)){var L=s;A[L.type]&&(x=A[L.type](m,l,f,L.cfg))}else A[s]&&(x=A[s](m,l,f));if(t==="autoRotate"){if(x){var B=l.getChildren(),U=this.get("verticalFactor");(0,E.S6)(B,function(se){var be=se.attr("textAlign");if(be==="center"){var Ee=U>0?"end":"start";se.attr("textAlign",Ee)}})}}else if(t==="autoHide"){var Y=l.getChildren().slice(0);(0,E.S6)(Y,function(se){se.get("visible")||(d.get("isRegister")&&d.unregisterElement(se),se.remove())})}},n}(Wt),pa=Xa,Sa=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},n.prototype.getLinePath=function(){var t=this.get("center"),s=t.x,l=t.y,f=this.get("radius"),d=f,m=this.get("startAngle"),x=this.get("endAngle"),A=[];if(Math.abs(x-m)===Math.PI*2)A=[["M",s,l-d],["A",f,d,0,1,1,s,l+d],["A",f,d,0,1,1,s,l-d],["Z"]];else{var P=this.getCirclePoint(m),L=this.getCirclePoint(x),B=Math.abs(x-m)>Math.PI?1:0,U=m>x?0:1;A=[["M",s,l],["L",P.x,P.y],["A",f,d,0,B,U,L.x,L.y],["L",s,l]]}return A},n.prototype.getTickPoint=function(t){var s=this.get("startAngle"),l=this.get("endAngle"),f=s+(l-s)*t;return this.getCirclePoint(f)},n.prototype.getSideVector=function(t,s){var l=this.get("center"),f=[s.x-l.x,s.y-l.y],d=this.get("verticalFactor"),m=Ea.kE(f);return Ea.bA(f,f,d*t/m),f},n.prototype.getAxisVector=function(t){var s=this.get("center"),l=[t.x-s.x,t.y-s.y];return[l[1],-1*l[0]]},n.prototype.getCirclePoint=function(t,s){var l=this.get("center");return s=s||this.get("radius"),{x:l.x+Math.cos(t)*s,y:l.y+Math.sin(t)*s}},n.prototype.canProcessOverlap=function(t){var s=this.get("label");return t==="autoRotate"?(0,E.UM)(s.rotate):!0},n.prototype.processOverlap=function(t){var s=this,l=this.get("label"),f=this.get("title"),d=this.get("verticalLimitLength"),m=l.offset,x=d,A=0,P=0;f&&(A=f.style.fontSize,P=f.spacing),x&&(x=x-m-P-A);var L=this.get("overlapOrder");if((0,E.S6)(L,function(U){l[U]&&s.canProcessOverlap(U)&&s.autoProcessOverlap(U,l[U],t,x)}),f&&(0,E.UM)(f.offset)){var B=t.getCanvasBBox().height;f.offset=m+B+P+A/2}},n.prototype.autoProcessOverlap=function(t,s,l,f){var d=this,m=!1,x=q[t];if(f>0)if(s===!0)m=x.getDefault()(!1,l,f);else if((0,E.mf)(s))m=s(!1,l,f);else if((0,E.Kn)(s)){var A=s;x[A.type]&&(m=x[A.type](!1,l,f,A.cfg))}else x[s]&&(m=x[s](!1,l,f));if(t==="autoRotate"){if(m){var P=l.getChildren(),L=this.get("verticalFactor");(0,E.S6)(P,function(U){var Y=U.attr("textAlign");if(Y==="center"){var se=L>0?"end":"start";U.attr("textAlign",se)}})}}else if(t==="autoHide"){var B=l.getChildren().slice(0);(0,E.S6)(B,function(U){U.get("visible")||(d.get("isRegister")&&d.unregisterElement(U),U.remove())})}},n}(Wt),Pa=Sa,ca=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:Ca.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:Ca.textColor,textAlign:"center",textBaseline:"middle",fontFamily:Ca.fontFamily}},textBackground:{padding:5,style:{stroke:Ca.lineColor}}}})},n.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},n.prototype.renderText=function(t){var s=this.get("text"),l=s.style,f=s.autoRotate,d=s.content;if(!(0,E.UM)(d)){var m=this.getTextPoint(),x=null;if(f){var A=this.getRotateAngle();x=rc(m,A)}this.addShape(t,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},m),{text:d,matrix:x}),l)})}},n.prototype.renderLine=function(t){var s=this.getLinePath(),l=this.get("line"),f=l.style;this.addShape(t,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,M.pi)({path:s},f)})},n.prototype.renderBackground=function(t){var s=this.getElementId("text"),l=t.findById(s),f=this.get("textBackground");if(f&&l){var d=l.getBBox(),m=kc(f.padding),x=f.style,A=this.addShape(t,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,M.pi)({x:d.x-m[3],y:d.y-m[0],width:d.width+m[1]+m[3],height:d.height+m[0]+m[2],matrix:l.attr("matrix")},x)});A.toBack()}},n}(Ai),da=ca,Eu=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"line",locationType:"region",start:null,end:null})},n.prototype.getRotateAngle=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text").position,d=Math.atan2(l.y-s.y,l.x-s.x),m=f==="start"?d-Math.PI/2:d+Math.PI/2;return m},n.prototype.getTextPoint=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text"),d=f.position,m=f.offset;return Nl(s,l,d,m)},n.prototype.getLinePath=function(){var t=this.getLocation(),s=t.start,l=t.end;return[["M",s.x,s.y],["L",l.x,l.y]]},n}(da),Ns=Eu,Gu=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},n.prototype.getRotateAngle=function(){var t=this.getLocation(),s=t.startAngle,l=t.endAngle,f=this.get("text").position,d=f==="start"?s+Math.PI/2:l-Math.PI/2;return d},n.prototype.getTextPoint=function(){var t=this.get("text"),s=t.position,l=t.offset,f=this.getLocation(),d=f.center,m=f.radius,x=f.startAngle,A=f.endAngle,P=s==="start"?x:A,L=this.getRotateAngle()-Math.PI,B=Ml(d,m,P),U=Math.cos(L)*l,Y=Math.sin(L)*l;return{x:B.x+U,y:B.y+Y}},n.prototype.getLinePath=function(){var t=this.getLocation(),s=t.center,l=t.radius,f=t.startAngle,d=t.endAngle,m=null;if(d-f===Math.PI*2){var x=s.x,A=s.y;m=[["M",x,A-l],["A",l,l,0,1,1,x,A+l],["A",l,l,0,1,1,x,A-l],["Z"]]}else{var P=Ml(s,l,f),L=Ml(s,l,d),B=Math.abs(d-f)>Math.PI?1:0,U=f>d?0:1;m=[["M",P.x,P.y],["A",l,l,0,B,U,L.x,L.y]]}return m},n}(da),Bu=Gu,Jo="g2-crosshair",bs=Jo+"-line",$u=Jo+"-text",qs,ef=(qs={},qs[""+Jo]={position:"relative"},qs[""+bs]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},qs[""+$u]={position:"absolute",color:Ca.textColor,fontFamily:Ca.fontFamily},qs),_l=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+Jo+'"></div>',crosshairTpl:'<div class="'+bs+'"></div>',textTpl:'<span class="'+$u+'">{content}</span>',domStyles:null,containerClassName:Jo,defaultStyles:ef,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},n.prototype.render=function(){this.resetText(),this.resetPosition()},n.prototype.initCrossHair=function(){var t=this.getContainer(),s=this.get("crosshairTpl"),l=(0,Ge.Z)(s);t.appendChild(l),this.applyStyle(bs,l),this.set("crosshairEl",l)},n.prototype.getTextPoint=function(){var t=this.getLocation(),s=t.start,l=t.end,f=this.get("text"),d=f.position,m=f.offset;return Nl(s,l,d,m)},n.prototype.resetText=function(){var t=this.get("text"),s=this.get("textEl");if(t){var l=t.content;if(!s){var f=this.getContainer(),d=(0,E.ng)(this.get("textTpl"),t);s=(0,Ge.Z)(d),f.appendChild(s),this.applyStyle($u,s),this.set("textEl",s)}s.innerHTML=l}else s&&s.remove()},n.prototype.isVertical=function(t,s){return t.x===s.x},n.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var s=this.get("start"),l=this.get("end"),f=Math.min(s.x,l.x),d=Math.min(s.y,l.y);this.isVertical(s,l)?(0,oe.Z)(t,{width:"1px",height:Rs(Math.abs(l.y-s.y))}):(0,oe.Z)(t,{height:"1px",width:Rs(Math.abs(l.x-s.x))}),(0,oe.Z)(t,{top:Rs(d),left:Rs(f)}),this.alignText()},n.prototype.alignText=function(){var t=this.get("textEl");if(t){var s=this.get("text").align,l=t.clientWidth,f=this.getTextPoint();switch(s){case"center":f.x=f.x-l/2;break;case"right":f.x=f.x-l;case"left":break}(0,oe.Z)(t,{top:Rs(f.y),left:Rs(f.x)})}},n.prototype.updateInner=function(t){(0,E.wH)(t,"text")&&this.resetText(),a.prototype.updateInner.call(this,t)},n}(ae),ac=_l,Ul=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:Ca.lineColor}}}})},n.prototype.getLineType=function(){var t=this.get("line")||this.get("defaultCfg").line;return t.type},n.prototype.renderInner=function(t){this.drawGrid(t)},n.prototype.getAlternatePath=function(t,s){var l=this.getGridPath(t),f=s.slice(0).reverse(),d=this.getGridPath(f,!0),m=this.get("closed");return m?l=l.concat(d):(d[0][0]="L",l=l.concat(d),l.push(["Z"])),l},n.prototype.getPathStyle=function(){return this.get("line").style},n.prototype.drawGrid=function(t){var s=this,l=this.get("line"),f=this.get("items"),d=this.get("alternateColor"),m=null;(0,E.S6)(f,function(x,A){var P=x.id||A;if(l){var L=s.getPathStyle();L=(0,E.mf)(L)?L(x,A,f):L;var B=s.getElementId("line-"+P),U=s.getGridPath(x.points);s.addShape(t,{type:"path",name:"grid-line",id:B,attrs:(0,E.CD)({path:U},L)})}if(d&&A>0){var Y=s.getElementId("region-"+P),se=A%2===0;if((0,E.HD)(d))se&&s.drawAlternateRegion(Y,t,m.points,x.points,d);else{var be=se?d[1]:d[0];s.drawAlternateRegion(Y,t,m.points,x.points,be)}}m=x})},n.prototype.drawAlternateRegion=function(t,s,l,f,d){var m=this.getAlternatePath(l,f);this.addShape(s,{type:"path",id:t,name:"grid-region",attrs:{path:m,fill:d}})},n}(Ai),_f=Ul;function zf(a,n,t,s){var l=t-a,f=s-n;return Math.sqrt(l*l+f*f)}var xc=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"circle",center:null,closed:!0})},n.prototype.getGridPath=function(t,s){var l=this.getLineType(),f=this.get("closed"),d=[];if(t.length)if(l==="circle"){var m=this.get("center"),x=t[0],A=zf(m.x,m.y,x.x,x.y),P=s?0:1;f?(d.push(["M",m.x,m.y-A]),d.push(["A",A,A,0,0,P,m.x,m.y+A]),d.push(["A",A,A,0,0,P,m.x,m.y-A]),d.push(["Z"])):(0,E.S6)(t,function(L,B){B===0?d.push(["M",L.x,L.y]):d.push(["A",A,A,0,0,P,L.x,L.y])})}else(0,E.S6)(t,function(L,B){B===0?d.push(["M",L.x,L.y]):d.push(["L",L.x,L.y])}),f&&d.push(["Z"]);return d},n}(_f),Uf=xc,tf=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"line"})},n.prototype.getGridPath=function(t){var s=[];return(0,E.S6)(t,function(l,f){f===0?s.push(["M",l.x,l.y]):s.push(["L",l.x,l.y])}),s},n}(_f),Zl=tf,xf=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},n.prototype.getLayoutBBox=function(){var t=a.prototype.getLayoutBBox.call(this),s=this.get("maxWidth"),l=this.get("maxHeight"),f=t.width,d=t.height;return s&&(f=Math.min(f,s)),l&&(d=Math.min(d,l)),gf(t.minX,t.minY,f,d)},n.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},n.prototype.resetLocation=function(){var t=this.get("x"),s=this.get("y"),l=this.get("offsetX"),f=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+l,y:s+f})},n.prototype.applyOffset=function(){this.resetLocation()},n.prototype.getDrawPoint=function(){return this.get("currentPoint")},n.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},n.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},n.prototype.drawBackground=function(t){var s=this.get("background"),l=t.getBBox(),f=kc(s.padding),d=(0,M.pi)({x:0,y:0,width:l.width+f[1]+f[3],height:l.height+f[0]+f[2]},s.style),m=this.addShape(t,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:d});m.toBack()},n.prototype.drawTitle=function(t){var s=this.get("currentPoint"),l=this.get("title"),f=l.spacing,d=l.style,m=l.text,x=this.addShape(t,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,M.pi)({text:m,x:s.x,y:s.y},d)}),A=x.getBBox();this.set("currentPoint",{x:s.x,y:A.maxY+f})},n.prototype.resetDraw=function(){var t=this.get("background"),s={x:0,y:0};if(t){var l=kc(t.padding);s.x=l[3],s.y=l[0]}this.set("currentPoint",s)},n}(Ai),wu=xf,Is={marker:{style:{inactiveFill:"#000",inactiveOpacity:.45,fill:"#000",opacity:1,size:12}},text:{style:{fill:"#ccc",fontSize:12}}},Xu={fill:Ca.textColor,fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:Ca.fontFamily,fontWeight:"normal",lineHeight:12},Yu="navigation-arrow-right",Vl="navigation-arrow-left",po={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},Ku=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var s=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var l=t.getCurrentNavigationMatrix();t.get("animate")?s.animate({matrix:l},100):s.attr({matrix:l})}},t.onNavigationAfter=function(){var s=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var l=t.getCurrentNavigationMatrix();t.get("animate")?s.animate({matrix:l},100):s.attr({matrix:l})}},t}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},radio:null,items:[],itemStates:{},itemBackground:{},pageNavigator:{},defaultCfg:{title:{spacing:5,style:{fill:Ca.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:Ca.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},pageNavigator:Is,itemName:{spacing:16,style:Xu},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:Xu,spacing:6},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:Ca.uncheckedColor},markerStyle:{fill:Ca.uncheckedColor,stroke:Ca.uncheckedColor}},inactive:{nameStyle:{fill:Ca.uncheckedColor},markerStyle:{opacity:.2}}}}})},n.prototype.isList=function(){return!0},n.prototype.getItems=function(){return this.get("items")},n.prototype.setItems=function(t){this.update({items:t})},n.prototype.updateItem=function(t,s){(0,E.CD)(t,s),this.clear(),this.render()},n.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},n.prototype.setItemState=function(t,s,l){t[s]=l;var f=this.getElementByLocalId("item-"+t.id);if(f){var d=this.getItems(),m=d.indexOf(t),x=this.createOffScreenGroup(),A=this.drawItem(t,m,this.getItemHeight(),x);this.updateElements(A,f),this.clearUpdateStatus(f)}},n.prototype.hasState=function(t,s){return!!t[s]},n.prototype.getItemStates=function(t){var s=this.get("itemStates"),l=[];return(0,E.S6)(s,function(f,d){t[d]&&l.push(d)}),l},n.prototype.clearItemsState=function(t){var s=this,l=this.getItemsByState(t);(0,E.S6)(l,function(f){s.setItemState(f,t,!1)})},n.prototype.getItemsByState=function(t){var s=this,l=this.getItems();return(0,E.hX)(l,function(f){return s.hasState(f,t)})},n.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},n.prototype.processItems=function(){var t=this.get("items");(0,E.S6)(t,function(s){s.id||(s.id=s.name)})},n.prototype.drawItems=function(t){var s=this,l=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),f=this.addGroup(l,{id:this.getElementId("item-group"),name:"legend-item-group"}),d=this.getItemHeight(),m=this.get("itemWidth"),x=this.get("itemSpacing"),A=this.get("itemMarginBottom"),P=this.get("currentPoint"),L=P.x,B=P.y,U=this.get("layout"),Y=this.get("items"),se=!1,be=0,Ee=this.get("maxWidth"),it=this.get("maxHeight");(0,E.S6)(Y,function(gt,xt){var Bt=s.drawItem(gt,xt,d,f),_r=Bt.getBBox(),Or=m||_r.width;Or>be&&(be=Or),U==="horizontal"?(Ee&&Ee<P.x+Or-L&&(se=!0,P.x=L,P.y+=d+A),s.moveElementTo(Bt,P),P.x+=Or+x):(it&&it<P.y+d+A-B&&(se=!0,P.x+=be+x,P.y=B,be=0),s.moveElementTo(Bt,P),P.y+=d+A)}),se&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=L,this.startY=B,this.adjustNavigation(t,f))},n.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var s=(this.get("itemName")||{}).style;if((0,E.mf)(s)){var l=this.getItems();l.forEach(function(f,d){var m=(0,M.pi)((0,M.pi)({},Xu),s(f,d,l)).fontSize;t<m&&(t=m)})}else s&&(t=s.fontSize)}return t},n.prototype.drawMarker=function(t,s,l,f){var d=(0,M.pi)((0,M.pi)((0,M.pi)({x:0,y:f/2},s.style),{symbol:(0,E.U2)(l.marker,"symbol","circle")}),(0,E.U2)(l.marker,"style",{})),m=this.addShape(t,{type:"marker",id:this.getElementId("item-"+l.id+"-marker"),name:"legend-item-marker",attrs:d}),x=m.getBBox();m.attr("x",x.width/2);var A=m.attr(),P=A.stroke,L=A.fill;return P&&m.set("isStroke",!0),L&&m.set("isFill",!0),m},n.prototype.drawItemText=function(t,s,l,f,d,m,x){var A=l.formatter,P=l.style,L=(0,M.pi)((0,M.pi)({x:m,y:d/2,text:A?A(f[s],f,x):f[s]},Xu),(0,E.mf)(P)?P(f,x,this.getItems()):P);return this.addShape(t,{type:"text",id:this.getElementId("item-"+f.id+"-"+s),name:"legend-item-"+s,attrs:L})},n.prototype.drawRadio=function(t,s,l,f,d){var m,x,A=s.style||{},P=(m=A.r)!==null&&m!==void 0?m:f/2,L=P*3.6/8,B=[d+P,f/2-P],U=B[0],Y=B[1],se=[U+P,Y+P],be=se[0],Ee=se[1],it=[U,Ee+P],gt=it[0],xt=it[1],Bt=[d,Y+P],_r=Bt[0],Or=Bt[1],Gr=l.showRadio,mn=(0,M.pi)((0,M.pi)({path:[["M",U,Y],["A",P,P,0,0,1,be,Ee],["L",be-L,Ee],["L",be,Ee],["A",P,P,0,0,1,gt,xt],["L",gt,xt-L],["L",gt,xt],["A",P,P,0,0,1,_r,Or],["L",_r+L,Or],["L",_r,Or],["A",P,P,0,0,1,U,Y],["L",U,Y+L]],stroke:"#000000",fill:"#ffffff"},A),{opacity:Gr?(x=A==null?void 0:A.opacity)!==null&&x!==void 0?x:.45:0}),cn=this.addShape(t,{type:"path",id:this.getElementId("item-"+l.id+"-radio"),name:"legend-item-radio",attrs:mn});return cn.set("tip",s.tip),cn},n.prototype.drawItem=function(t,s,l,f){var d="item-"+t.id,m=this.addGroup(f,{name:"legend-item-container",id:this.getElementId("item-container-"+d),delegateObject:{item:t,index:s}}),x=this.addGroup(m,{name:"legend-item",id:this.getElementId(d),delegateObject:{item:t,index:s}}),A=this.get("marker"),P=this.get("itemName"),L=this.get("itemValue"),B=this.get("itemBackground"),U=this.get("radio"),Y=this.getLimitItemWidth(),se=0;if(A){var be=this.drawMarker(x,A,t,l),Ee=A.spacing,it=(0,E.U2)(t,["marker","spacing"]);(0,E.hj)(it)&&(Ee=it),se=be.getBBox().maxX+Ee}if(P){var gt=this.drawItemText(x,"name",P,t,l,se,s);Y&&Ff(!0,gt,(0,E.uZ)(Y-se,0,Y)),se=gt.getBBox().maxX+P.spacing}if(L){var xt=this.drawItemText(x,"value",L,t,l,se,s);Y&&(L.alignRight?(xt.attr({textAlign:"right",x:Y}),Ff(!0,xt,(0,E.uZ)(Y-se,0,Y),"head")):Ff(!0,xt,(0,E.uZ)(Y-se,0,Y))),se=xt.getBBox().maxX+L.spacing}if(U&&this.drawRadio(x,U,t,l,se),B){var Bt=x.getBBox(),_r=this.addShape(x,{type:"rect",name:"legend-item-background",id:this.getElementId(d+"-background"),attrs:(0,M.pi)({x:0,y:0,width:Bt.width,height:l},B.style)});_r.toBack()}return this.applyItemStates(t,x),x},n.prototype.adjustNavigation=function(t,s){var l=this,f=this.startX,d=this.startY,m=this.get("layout"),x=s.findAll(function(hi){return hi.get("name")==="legend-item"}),A=this.get("maxWidth"),P=this.get("maxHeight"),L=this.get("itemWidth"),B=this.get("itemSpacing"),U=this.getItemHeight(),Y=(0,E.b$)({},Is,this.get("pageNavigator")),se=this.drawNavigation(t,m,"00/00",Y),be=se.getBBox(),Ee={x:f,y:d},it=1,gt=0,xt=0,Bt=0,_r=this.get("itemMarginBottom");function Or(hi,Wi){var bi=hi.getBBox(),to=L||bi.width,jn=Wi.x+to+B+be.width;return jn>A}if(m==="horizontal"){var Gr=this.get("maxRow")||1,mn=U+(Gr===1?0:_r),cn=A-B-be.width-be.minX;this.pageHeight=mn*Gr,this.pageWidth=cn,(0,E.S6)(x,function(hi){var Wi=hi.getBBox(),bi=L||Wi.width;(gt&&gt<Ee.x+bi+B||Or(hi,Ee))&&(it===1&&(gt=Ee.x+B,l.moveElementTo(se,{x:cn,y:Ee.y+U/2-be.height/2-be.minY})),it+=1,Ee.x=f,Ee.y+=mn),l.moveElementTo(hi,Ee),hi.getParent().setClip({type:"rect",attrs:{x:Ee.x,y:Ee.y,width:bi+B,height:U}}),Ee.x+=bi+B})}else{(0,E.S6)(x,function(hi){var Wi=hi.getBBox();Wi.width>xt&&(xt=Wi.width)}),Bt=xt,xt+=B,A&&(xt=Math.min(A,xt),Bt=Math.min(A,Bt)),this.pageWidth=xt,this.pageHeight=P-Math.max(be.height,U+_r);var Nn=Math.floor(this.pageHeight/(U+_r));(0,E.S6)(x,function(hi,Wi){Wi!==0&&Wi%Nn===0&&(it+=1,Ee.x+=xt,Ee.y=d),l.moveElementTo(hi,Ee),hi.getParent().setClip({type:"rect",attrs:{x:Ee.x,y:Ee.y,width:xt,height:U}}),Ee.y+=U+_r}),this.totalPagesCnt=it,this.moveElementTo(se,{x:f+Bt/2-be.width/2-be.minX,y:P-be.height-be.minY})}this.pageHeight&&this.pageWidth&&s.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),m==="horizontal"&&this.get("maxRow")?this.totalPagesCnt=Math.ceil(it/this.get("maxRow")):this.totalPagesCnt=it,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(se),s.attr("matrix",this.getCurrentNavigationMatrix())},n.prototype.drawNavigation=function(t,s,l,f){var d={x:0,y:0},m=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),x=(0,E.U2)(f.marker,"style",{}),A=x.size,P=A===void 0?12:A,L=(0,M._T)(x,["size"]),B=this.drawArrow(m,d,Vl,s==="horizontal"?"up":"left",P,L);B.on("click",this.onNavigationBack);var U=B.getBBox();d.x+=U.width+2;var Y=this.addShape(m,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:(0,M.pi)({x:d.x,y:d.y+P/2,text:l,textBaseline:"middle"},(0,E.U2)(f.text,"style"))}),se=Y.getBBox();d.x+=se.width+2;var be=this.drawArrow(m,d,Yu,s==="horizontal"?"down":"right",P,L);return be.on("click",this.onNavigationAfter),m},n.prototype.updateNavigation=function(t){var s=(0,E.b$)({},Is,this.get("pageNavigator")),l=s.marker.style,f=l.fill,d=l.opacity,m=l.inactiveFill,x=l.inactiveOpacity,A=this.currentPageIndex+"/"+this.totalPagesCnt,P=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),L=t?t.findById(this.getElementId(Vl)):this.getElementByLocalId(Vl),B=t?t.findById(this.getElementId(Yu)):this.getElementByLocalId(Yu);P.attr("text",A),L.attr("opacity",this.currentPageIndex===1?x:d),L.attr("fill",this.currentPageIndex===1?m:f),L.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),B.attr("opacity",this.currentPageIndex===this.totalPagesCnt?x:d),B.attr("fill",this.currentPageIndex===this.totalPagesCnt?m:f),B.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer");var U=L.getBBox().maxX+2;P.attr("x",U),U+=P.getBBox().width+2,this.updateArrowPath(B,{x:U,y:0})},n.prototype.drawArrow=function(t,s,l,f,d,m){var x=s.x,A=s.y,P=this.addShape(t,{type:"path",id:this.getElementId(l),name:l,attrs:(0,M.pi)({size:d,direction:f,path:[["M",x+d/2,A],["L",x,A+d],["L",x+d,A+d],["Z"]],cursor:"pointer"},m)});return P.attr("matrix",rc({x:x+d/2,y:A+d/2},po[f])),P},n.prototype.updateArrowPath=function(t,s){var l=s.x,f=s.y,d=t.attr(),m=d.size,x=d.direction,A=rc({x:l+m/2,y:f+m/2},po[x]);t.attr("path",[["M",l+m/2,f],["L",l,f+m],["L",l+m,f+m],["Z"]]),t.attr("matrix",A)},n.prototype.getCurrentNavigationMatrix=function(){var t=this,s=t.currentPageIndex,l=t.pageWidth,f=t.pageHeight,d=this.get("layout"),m=d==="horizontal"?{x:0,y:f*(1-s)}:{x:l*(1-s),y:0};return ch(m)},n.prototype.applyItemStates=function(t,s){var l=this.getItemStates(t),f=l.length>0;if(f){var d=s.getChildren(),m=this.get("itemStates");(0,E.S6)(d,function(x){var A=x.get("name"),P=A.split("-")[2],L=bt(t,P,m);L&&(x.attr(L),P==="marker"&&!(x.get("isStroke")&&x.get("isFill"))&&(x.get("isStroke")&&x.attr("fill",null),x.get("isFill")&&x.attr("stroke",null)))})}},n.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),s=this.get("maxItemWidth");return s?t&&(s=t<=s?t:s):t&&(s=t),s},n}(wu),Cu=Ku,bc=1.4,td=.4,ph=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:Ca.textColor,textBaseline:"middle",fontFamily:Ca.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:Ca.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},n.prototype.isSlider=function(){return!0},n.prototype.getValue=function(){return this.getCurrentValue()},n.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},n.prototype.setRange=function(t,s){this.update({min:t,max:s})},n.prototype.setValue=function(t){var s=this.getValue();this.set("value",t);var l=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(l),this.delegateEmit("valuechanged",{originValue:s,value:t})},n.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},n.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},n.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},n.prototype.bindHandlersEvent=function(t){var s=this;t.on("legend-handler-min:drag",function(l){var f=s.getValueByCanvasPoint(l.x,l.y),d=s.getCurrentValue(),m=d[1];m<f&&(m=f),s.setValue([f,m])}),t.on("legend-handler-max:drag",function(l){var f=s.getValueByCanvasPoint(l.x,l.y),d=s.getCurrentValue(),m=d[0];m>f&&(m=f),s.setValue([m,f])})},n.prototype.bindRailEvent=function(t){},n.prototype.bindTrackEvent=function(t){var s=this,l=null;t.on("legend-track:dragstart",function(f){l={x:f.x,y:f.y}}),t.on("legend-track:drag",function(f){if(l){var d=s.getValueByCanvasPoint(l.x,l.y),m=s.getValueByCanvasPoint(f.x,f.y),x=s.getCurrentValue(),A=x[1]-x[0],P=s.getRange(),L=m-d;L<0?x[0]+L>P.min?s.setValue([x[0]+L,x[1]+L]):s.setValue([P.min,P.min+A]):L>0&&(L>0&&x[1]+L<P.max?s.setValue([x[0]+L,x[1]+L]):s.setValue([P.max-A,P.max])),l={x:f.x,y:f.y}}}),t.on("legend-track:dragend",function(f){l=null})},n.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},n.prototype.drawLabel=function(t,s){var l=this.get("label"),f=l.style,d=l.align,m=l.formatter,x=this.get(t),A=this.getLabelAlignAttrs(t,d),P="label-"+t;this.addShape(s,{type:"text",id:this.getElementId(P),name:"legend-label-"+t,attrs:(0,M.pi)((0,M.pi)({x:0,y:0,text:(0,E.mf)(m)?m(x):x},f),A)})},n.prototype.getLabelAlignAttrs=function(t,s){var l=this.isVertical(),f="center",d="middle";return l?(f="start",s!=="rail"?t==="min"?d="top":d="bottom":d="top"):s!=="rail"?(d="top",t==="min"?f="start":f="end"):(f="start",d="middle"),{textAlign:f,textBaseline:d}},n.prototype.getRailPath=function(t,s,l,f){var d=this.get("rail"),m=d.size,x=d.defaultLength,A=d.type,P=this.isVertical(),L=x,B=l,U=f;B||(B=P?m:L),U||(U=P?L:m);var Y=[];return A==="color"?(Y.push(["M",t,s]),Y.push(["L",t+B,s]),Y.push(["L",t+B,s+U]),Y.push(["L",t,s+U]),Y.push(["Z"])):(Y.push(["M",t+B,s]),Y.push(["L",t+B,s+U]),Y.push(["L",t,s+U]),Y.push(["Z"])),Y},n.prototype.drawRail=function(t){var s=this.get("rail"),l=s.style;this.addShape(t,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,M.pi)({path:this.getRailPath(0,0)},l)})},n.prototype.getTrackColor=function(t){var s=t.length;if(!s)return null;if(s===1)return t[0];var l;this.isVertical()?l="l(90)":l="l(0)";for(var f=0;f<s;f++){var d=f/(s-1);l+=" "+d+":"+t[f]}return l},n.prototype.getTrackPath=function(t){var s=this.getRailShape(t),l=s.attr("path");return(0,E.d9)(l)},n.prototype.getClipTrackAttrs=function(t){var s=this.getCurrentValue(),l=s[0],f=s[1],d=this.getRailBBox(t),m=this.getPointByValue(l,t),x=this.getPointByValue(f,t),A=this.isVertical(),P,L,B,U;return A?(P=d.minX,L=m.y,B=d.width,U=x.y-m.y):(P=m.x,L=d.minY,B=x.x-m.x,U=d.height),{x:P,y:L,width:B,height:U}},n.prototype.getTrackAttrs=function(t){var s=this.get("track"),l=this.get("colors"),f=this.getTrackPath(t);return(0,E.CD)({path:f,fill:this.getTrackColor(l)},s.style)},n.prototype.resetTrackClip=function(t){var s=t||this.get("group"),l=this.getElementId("track"),f=s.findById(l),d=f.getClip(),m=this.getClipTrackAttrs(t);d?d.attr(m):f.setClip({type:"rect",attrs:m})},n.prototype.resetTrack=function(t){var s=this.getElementId("track"),l=t.findById(s),f=this.getTrackAttrs(t);l?l.attr(f):this.addShape(t,{type:"path",id:s,draggable:this.get("slidable"),name:"legend-track",attrs:f})},n.prototype.getPointByValue=function(t,s){var l=this.getRange(),f=l.min,d=l.max,m=(t-f)/(d-f),x=this.getRailBBox(s),A=this.isVertical(),P={x:0,y:0};return A?(P.x=x.minX+x.width/2,P.y=Bs(x.minY,x.maxY,m)):(P.x=Bs(x.minX,x.maxX,m),P.y=x.minY+x.height/2),P},n.prototype.getRailShape=function(t){var s=t||this.get("group");return s.findById(this.getElementId("rail"))},n.prototype.getRailBBox=function(t){var s=this.getRailShape(t),l=s.getBBox();return l},n.prototype.getRailCanvasBBox=function(){var t=this.get("group"),s=t.findById(this.getElementId("rail")),l=s.getCanvasBBox();return l},n.prototype.isVertical=function(){return this.get("layout")==="vertical"},n.prototype.getValueByCanvasPoint=function(t,s){var l=this.getRange(),f=l.min,d=l.max,m=this.getRailCanvasBBox(),x=this.isVertical(),A=this.get("step"),P;x?P=(s-m.minY)/m.height:P=(t-m.minX)/m.width;var L=Bs(f,d,P);if(A){var B=Math.round((L-f)/A);L=f+B*A}return L>d&&(L=d),L<f&&(L=f),L},n.prototype.getCurrentValue=function(){var t=this.get("value");if(!t){var s=this.get("values");return s?[Math.max(Math.min.apply(Math,(0,M.pr)(s,[this.get("max")])),this.get("min")),Math.min(Math.max.apply(Math,(0,M.pr)(s,[this.get("min")])),this.get("max"))]:[this.get("min"),this.get("max")]}return t},n.prototype.resetHandlers=function(t){var s=this.getCurrentValue(),l=s[0],f=s[1];this.resetHandler(t,"min",l),this.resetHandler(t,"max",f)},n.prototype.getHandlerPath=function(t,s){var l=this.isVertical(),f=[],d=t.size,m=s.x,x=s.y,A=d*bc,P=d/2,L=d/6;if(l){var B=m+A*td;f.push(["M",m,x]),f.push(["L",B,x+P]),f.push(["L",m+A,x+P]),f.push(["L",m+A,x-P]),f.push(["L",B,x-P]),f.push(["Z"]),f.push(["M",B,x+L]),f.push(["L",m+A-2,x+L]),f.push(["M",B,x-L]),f.push(["L",m+A-2,x-L])}else{var U=x+A*td;f.push(["M",m,x]),f.push(["L",m-P,U]),f.push(["L",m-P,x+A]),f.push(["L",m+P,x+A]),f.push(["L",m+P,U]),f.push(["Z"]),f.push(["M",m-L,U]),f.push(["L",m-L,x+A-2]),f.push(["M",m+L,U]),f.push(["L",m+L,x+A-2])}return f},n.prototype.resetHandler=function(t,s,l){var f=this.getPointByValue(l,t),d=this.get("handler"),m=this.getHandlerPath(d,f),x=this.getElementId("handler-"+s),A=t.findById(x),P=this.isVertical();A?A.attr("path",m):this.addShape(t,{type:"path",name:"legend-handler-"+s,draggable:!0,id:x,attrs:(0,M.pi)((0,M.pi)({path:m},d.style),{cursor:P?"ns-resize":"ew-resize"})})},n.prototype.fixedElements=function(t){var s=t.findById(this.getElementId("rail")),l=t.findById(this.getElementId("label-min")),f=t.findById(this.getElementId("label-max")),d=this.getDrawPoint();this.isVertical()?this.fixedVertail(l,f,s,d):this.fixedHorizontal(l,f,s,d)},n.prototype.fitRailLength=function(t,s,l,f){var d=this.isVertical(),m=d?"height":"width",x=this.get("label"),A=x.align,P=x.spacing,L=this.get("max"+(0,E.jC)(m));if(L){var B=A==="rail"?l[m]+t[m]+s[m]+P*2:l[m],U=B-L;U>0&&this.changeRailLength(f,m,l[m]-U)}},n.prototype.changeRailLength=function(t,s,l){var f=t.getBBox(),d;s==="height"?d=this.getRailPath(f.x,f.y,f.width,l):d=this.getRailPath(f.x,f.y,l,f.height),t.attr("path",d)},n.prototype.changeRailPosition=function(t,s,l){var f=t.getBBox(),d=this.getRailPath(s,l,f.width,f.height);t.attr("path",d)},n.prototype.fixedHorizontal=function(t,s,l,f){var d=this.get("label"),m=d.align,x=d.spacing,A=l.getBBox(),P=t.getBBox(),L=s.getBBox(),B=A.height;this.fitRailLength(P,L,A,l),A=l.getBBox(),m==="rail"?(t.attr({x:f.x,y:f.y+B/2}),this.changeRailPosition(l,f.x+P.width+x,f.y),s.attr({x:f.x+P.width+A.width+x*2,y:f.y+B/2})):m==="top"?(t.attr({x:f.x,y:f.y}),s.attr({x:f.x+A.width,y:f.y}),this.changeRailPosition(l,f.x,f.y+P.height+x)):(this.changeRailPosition(l,f.x,f.y),t.attr({x:f.x,y:f.y+A.height+x}),s.attr({x:f.x+A.width,y:f.y+A.height+x}))},n.prototype.fixedVertail=function(t,s,l,f){var d=this.get("label"),m=d.align,x=d.spacing,A=l.getBBox(),P=t.getBBox(),L=s.getBBox();if(this.fitRailLength(P,L,A,l),A=l.getBBox(),m==="rail")t.attr({x:f.x,y:f.y}),this.changeRailPosition(l,f.x,f.y+P.height+x),s.attr({x:f.x,y:f.y+P.height+A.height+x*2});else if(m==="right")t.attr({x:f.x+A.width+x,y:f.y}),this.changeRailPosition(l,f.x,f.y),s.attr({x:f.x+A.width+x,y:f.y+A.height});else{var B=Math.max(P.width,L.width);t.attr({x:f.x,y:f.y}),this.changeRailPosition(l,f.x+B+x,f.y),s.attr({x:f.x,y:f.y+A.height})}},n}(wu),rd=ph,Hl="g2-tooltip",Rl="g2-tooltip-title",jl="g2-tooltip-list",Hh="g2-tooltip-list-item",wp="g2-tooltip-marker",rf="g2-tooltip-value",Il="g2-tooltip-name",ug="g2-tooltip-crosshair-x",bv="g2-tooltip-crosshair-y",Sc,o_=(Sc={},Sc[""+Hl]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:Ca.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},Sc[""+Rl]={marginBottom:"4px"},Sc[""+jl]={margin:"0px",listStyleType:"none",padding:"0px"},Sc[""+Hh]={listStyleType:"none",marginBottom:"4px"},Sc[""+wp]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},Sc[""+rf]={display:"inline-block",float:"right",marginLeft:"30px"},Sc[""+ug]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Sc[""+bv]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Sc);function m0(a,n,t,s,l){var f={left:a<l.x,right:a+t>l.x+l.width,top:n<l.y,bottom:n+s>l.y+l.height};return f}function y0(a,n,t,s,l,f){var d=a,m=n;switch(f){case"left":d=a-s-t,m=n-l/2;break;case"right":d=a+t,m=n-l/2;break;case"top":d=a-s/2,m=n-l-t;break;case"bottom":d=a-s/2,m=n+t;break;default:d=a+t,m=n-l-t;break}return{x:d,y:m}}function Sv(a,n,t,s,l,f,d){var m=y0(a,n,t,s,l,f);if(d){var x=m0(m.x,m.y,s,l,d);f==="auto"?(x.right&&(m.x=Math.max(0,a-s-t)),x.top&&(m.y=Math.max(0,n-l-t))):f==="top"||f==="bottom"?(x.left&&(m.x=d.x),x.right&&(m.x=d.x+d.width-s),f==="top"&&x.top&&(m.y=n+t),f==="bottom"&&x.bottom&&(m.y=n-l-t)):(x.top&&(m.y=d.y),x.bottom&&(m.y=d.y+d.height-l),f==="left"&&x.left&&(m.x=a+t),f==="right"&&x.right&&(m.x=a-s-t))}return m}function _0(a,n){var t=!1;return(0,E.S6)(n,function(s){if((0,E.wH)(a,s))return t=!0,!1}),t}var Cp=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+Hl+'"><div class="'+Rl+'"></div><ul class="'+jl+'"></ul></div>',itemTpl:'<li class="'+Hh+`" data-index={index}>
          <span class="`+wp+`" style="background:{color}"></span>
          <span class="`+Il+`">{name}</span>:
          <span class="`+rf+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+ug+'"></div>',yCrosshairTpl:'<div class="'+bv+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:Hl,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:o_})},n.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},n.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},n.prototype.show=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!0),(0,oe.Z)(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},n.prototype.hide=function(){var t=this.getContainer();!t||this.destroyed||(this.set("visible",!1),(0,oe.Z)(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},n.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},n.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},n.prototype.setCrossHairsVisible=function(t){var s=t?"":"none",l=this.get("xCrosshairDom"),f=this.get("yCrosshairDom");l&&(0,oe.Z)(l,{display:s}),f&&(0,oe.Z)(f,{display:s})},n.prototype.initContainer=function(){if(a.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},n.prototype.updateInner=function(t){this.get("customContent")?this.renderCustomContent():(_0(t,["title","showTitle"])&&this.resetTitle(),(0,E.wH)(t,"items")&&this.renderItems()),a.prototype.updateInner.call(this,t)},n.prototype.initDom=function(){this.cacheDoms()},n.prototype.removeDom=function(){a.prototype.removeDom.call(this),this.clearCrosshairs()},n.prototype.resetPosition=function(){var t=this.get("x"),s=this.get("y"),l=this.get("offset"),f=this.getOffset(),d=f.offsetX,m=f.offsetY,x=this.get("position"),A=this.get("region"),P=this.getContainer(),L=this.getBBox(),B=L.width,U=L.height,Y;A&&(Y=il(A));var se=Sv(t,s,l,B,U,x,Y);(0,oe.Z)(P,{left:Rs(se.x+d),top:Rs(se.y+m)}),this.resetCrosshairs()},n.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),s=this.get("parent"),l=this.get("container");l&&l.parentNode===s?s.replaceChild(t,l):s.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},n.prototype.getHtmlContentNode=function(){var t,s=this.get("customContent");if(s){var l=s(this.get("title"),this.get("items"));(0,E.kK)(l)?t=l:t=(0,Ge.Z)(l)}return t},n.prototype.cacheDoms=function(){var t=this.getContainer(),s=t.getElementsByClassName(Rl)[0],l=t.getElementsByClassName(jl)[0];this.set("titleDom",s),this.set("listDom",l)},n.prototype.resetTitle=function(){var t=this.get("title"),s=this.get("showTitle");s&&t?this.setTitle(t):this.setTitle("")},n.prototype.setTitle=function(t){var s=this.get("titleDom");s&&(s.innerText=t)},n.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),s=this.get("crosshairs");if(!t||!s)this.clearCrosshairs();else{var l=il(t),f=this.get("xCrosshairDom"),d=this.get("yCrosshairDom");s==="x"?(this.resetCrosshair("x",l),d&&(d.remove(),this.set("yCrosshairDom",null))):s==="y"?(this.resetCrosshair("y",l),f&&(f.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",l),this.resetCrosshair("y",l)),this.setCrossHairsVisible(this.get("visible"))}},n.prototype.resetCrosshair=function(t,s){var l=this.checkCrosshair(t),f=this.get(t);t==="x"?(0,oe.Z)(l,{left:Rs(f),top:Rs(s.y),height:Rs(s.height)}):(0,oe.Z)(l,{top:Rs(f),left:Rs(s.x),width:Rs(s.width)})},n.prototype.checkCrosshair=function(t){var s=t+"CrosshairDom",l=t+"CrosshairTpl",f="CROSSHAIR_"+t.toUpperCase(),d=ie[f],m=this.get(s),x=this.get("parent");return m||(m=(0,Ge.Z)(this.get(l)),this.applyStyle(d,m),x.appendChild(m),this.set(s,m)),m},n.prototype.renderItems=function(){this.clearItemDoms();var t=this.get("items"),s=this.get("itemTpl"),l=this.get("listDom");l&&((0,E.S6)(t,function(f){var d=ba.toCSSGradient(f.color),m=(0,M.pi)((0,M.pi)({},f),{color:d}),x=(0,E.ng)(s,m),A=(0,Ge.Z)(x);l.appendChild(A)}),this.applyChildrenStyles(l,this.get("domStyles")))},n.prototype.clearItemDoms=function(){this.get("listDom")&&_p(this.get("listDom"))},n.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),s=this.get("yCrosshairDom");t&&t.remove(),s&&s.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},n}(ae),lg=Cp,Ap={opacity:0},Ud={stroke:"#C5C5C5",strokeOpacity:.85},sm={fill:"#CACED4",opacity:.85},Tp=k(39499);function cg(a){return(0,E.UI)(a,function(n,t){var s=t===0?"M":"L",l=n[0],f=n[1];return[s,l,f]})}function x0(a){return cg(a)}function b0(a){if(a.length<=2)return x0(a);var n=[];(0,E.S6)(a,function(d){(0,E.Xy)(d,n.slice(n.length-2))||n.push(d[0],d[1])});var t=(0,Tp.e9)(n,!1),s=(0,E.YM)(a),l=s[0],f=s[1];return t.unshift(["M",l,f]),t}function fg(a,n,t,s){s===void 0&&(s=!0);var l=new Fl({values:a}),f=new Bn({values:(0,E.UI)(a,function(m,x){return x})}),d=(0,E.UI)(a,function(m,x){return[f.scale(x)*n,t-l.scale(m)*t]});return s?b0(d):x0(d)}function Ev(a,n){var t=new Fl({values:a}),s=t.max<0?t.max:Math.max(0,t.min);return n-t.scale(s)*n}function Zd(a,n,t,s){var l=(0,M.pr)(a),f=Ev(s,t);return l.push(["L",n,f]),l.push(["L",0,f]),l.push(["Z"]),l}var hg=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:Ap,lineStyle:Ud,areaStyle:sm})},n.prototype.renderInner=function(t){var s=this.cfg,l=s.width,f=s.height,d=s.data,m=s.smooth,x=s.isArea,A=s.backgroundStyle,P=s.lineStyle,L=s.areaStyle;this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,M.pi)({x:0,y:0,width:l,height:f},A)});var B=fg(d,l,f,m);if(this.addShape(t,{id:this.getElementId("line"),type:"path",attrs:(0,M.pi)({path:B},P)}),x){var U=Zd(B,l,f,d);this.addShape(t,{id:this.getElementId("area"),type:"path",attrs:(0,M.pi)({path:U},L)})}},n.prototype.applyOffset=function(){var t=this.cfg,s=t.x,l=t.y;this.moveElementTo(this.get("group"),{x:s,y:l})},n}(Ai),dh=null,Mp={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},Ss=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"handler",x:0,y:0,width:10,height:24,style:Mp})},n.prototype.renderInner=function(t){var s=this.cfg,l=s.width,f=s.height,d=s.style,m=d.fill,x=d.stroke,A=d.radius,P=d.opacity,L=d.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:l,height:f,fill:m,stroke:x,radius:A,opacity:P,cursor:L}});var B=1/3*l,U=2/3*l,Y=1/4*f,se=3/4*f;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:B,y1:Y,x2:B,y2:se,stroke:x,cursor:L}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:U,y1:Y,x2:U,y2:se,stroke:x,cursor:L}})},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",function(){var s=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",s),t.draw()}),this.get("group").on("mouseleave",function(){var s=t.get("style").fill;t.getElementByLocalId("background").attr("fill",s),t.draw()})},n.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},n}(Ai),jh=null,wv={fill:"#416180",opacity:.05},Wl={fill:"#5B8FF9",opacity:.15,cursor:"move"},Kn=10,bf={width:Kn,height:24},Vd={textBaseline:"middle",fill:"#000",opacity:.45},Qs="sliderchange",Gl=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.onMouseDown=function(s){return function(l){t.currentTarget=s;var f=l.originalEvent;f.stopPropagation(),f.preventDefault(),t.prevX=(0,E.U2)(f,"touches.0.pageX",f.pageX),t.prevY=(0,E.U2)(f,"touches.0.pageY",f.pageY);var d=t.getContainerDOM();d.addEventListener("mousemove",t.onMouseMove),d.addEventListener("mouseup",t.onMouseUp),d.addEventListener("mouseleave",t.onMouseUp),d.addEventListener("touchmove",t.onMouseMove),d.addEventListener("touchend",t.onMouseUp),d.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(s){var l=t.cfg.width,f=[t.get("start"),t.get("end")];s.stopPropagation(),s.preventDefault();var d=(0,E.U2)(s,"touches.0.pageX",s.pageX),m=(0,E.U2)(s,"touches.0.pageY",s.pageY),x=d-t.prevX,A=t.adjustOffsetRange(x/l);t.updateStartEnd(A),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=d,t.prevY=m,t.draw(),t.emit(Qs,[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:f,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var s=t.getContainerDOM();s&&(s.removeEventListener("mousemove",t.onMouseMove),s.removeEventListener("mouseup",t.onMouseUp),s.removeEventListener("mouseleave",t.onMouseUp),s.removeEventListener("touchmove",t.onMouseMove),s.removeEventListener("touchend",t.onMouseUp),s.removeEventListener("touchcancel",t.onMouseUp))},t}return n.prototype.setRange=function(t,s){this.set("minLimit",t),this.set("maxLimit",s);var l=this.get("start"),f=this.get("end"),d=(0,E.uZ)(l,t,s),m=(0,E.uZ)(f,t,s);!this.get("isInit")&&(l!==d||f!==m)&&this.setValue([d,m])},n.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},n.prototype.setValue=function(t){var s=this.getRange();if((0,E.kJ)(t)&&t.length===2){var l=[this.get("start"),this.get("end")];this.update({start:(0,E.uZ)(t[0],s.min,s.max),end:(0,E.uZ)(t[1],s.min,s.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:l,value:t})}},n.prototype.getValue=function(){return[this.get("start"),this.get("end")]},n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:wv,foregroundStyle:Wl,handlerStyle:bf,textStyle:Vd}})},n.prototype.update=function(t){var s=t.start,l=t.end,f=(0,M.pi)({},t);(0,E.UM)(s)||(f.start=(0,E.uZ)(s,0,1)),(0,E.UM)(l)||(f.end=(0,E.uZ)(l,0,1)),a.prototype.update.call(this,f),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},n.prototype.init=function(){this.set("start",(0,E.uZ)(this.get("start"),0,1)),this.set("end",(0,E.uZ)(this.get("end"),0,1)),a.prototype.init.call(this)},n.prototype.render=function(){a.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},n.prototype.renderInner=function(t){var s=this.cfg,l=s.start,f=s.end,d=s.width,m=s.height,x=s.trendCfg,A=x===void 0?{}:x,P=s.minText,L=s.maxText,B=s.backgroundStyle,U=B===void 0?{}:B,Y=s.foregroundStyle,se=Y===void 0?{}:Y,be=s.textStyle,Ee=be===void 0?{}:be,it=(0,E.b$)({},Mp,this.cfg.handlerStyle),gt=l*d,xt=f*d;(0,E.dp)((0,E.U2)(A,"data"))&&(this.trend=this.addComponent(t,(0,M.pi)({component:hg,id:this.getElementId("trend"),x:0,y:0,width:d,height:m},A))),this.addShape(t,{id:this.getElementId("background"),type:"rect",attrs:(0,M.pi)({x:0,y:0,width:d,height:m},U)});var Bt=this.addShape(t,{id:this.getElementId("minText"),type:"text",attrs:(0,M.pi)({y:m/2,textAlign:"right",text:P,silent:!1},Ee)}),_r=this.addShape(t,{id:this.getElementId("maxText"),type:"text",attrs:(0,M.pi)({y:m/2,textAlign:"left",text:L,silent:!1},Ee)}),Or=this.addShape(t,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,M.pi)({y:0,height:m},se)}),Gr=(0,E.U2)(it,"width",Kn),mn=(0,E.U2)(it,"height",24);this.minHandler=this.addComponent(t,{component:Ss,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(m-mn)/2,width:Gr,height:mn,cursor:"ew-resize",style:it}),this.maxHandler=this.addComponent(t,{component:Ss,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(m-mn)/2,width:Gr,height:mn,cursor:"ew-resize",style:it})},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.updateUI=function(t,s,l){var f=this.cfg,d=f.start,m=f.end,x=f.width,A=f.minText,P=f.maxText,L=f.handlerStyle,B=f.height,U=d*x,Y=m*x;this.trend&&(this.trend.update({width:x,height:B}),this.get("updateAutoRender")||this.trend.render()),t.attr("x",U),t.attr("width",Y-U);var se=(0,E.U2)(L,"width",Kn);s.attr("text",A),l.attr("text",P);var be=this._dodgeText([U,Y],s,l),Ee=be[0],it=be[1];this.minHandler&&(this.minHandler.update({x:U-se/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,E.S6)(Ee,function(gt,xt){return s.attr(xt,gt)}),this.maxHandler&&(this.maxHandler.update({x:Y-se/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,E.S6)(it,function(gt,xt){return l.attr(xt,gt)})},n.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var s=t.findById(this.getElementId("foreground"));s.on("mousedown",this.onMouseDown("foreground")),s.on("touchstart",this.onMouseDown("foreground"))},n.prototype.adjustOffsetRange=function(t){var s=this.cfg,l=s.start,f=s.end;switch(this.currentTarget){case"minHandler":{var d=0-l,m=1-l;return Math.min(m,Math.max(d,t))}case"maxHandler":{var d=0-f,m=1-f;return Math.min(m,Math.max(d,t))}case"foreground":{var d=0-l,m=1-f;return Math.min(m,Math.max(d,t))}}},n.prototype.updateStartEnd=function(t){var s=this.cfg,l=s.start,f=s.end;switch(this.currentTarget){case"minHandler":l+=t;break;case"maxHandler":f+=t;break;case"foreground":l+=t,f+=t;break}this.set("start",l),this.set("end",f)},n.prototype._dodgeText=function(t,s,l){var f,d,m=this.cfg,x=m.handlerStyle,A=m.width,P=2,L=(0,E.U2)(x,"width",Kn),B=t[0],U=t[1],Y=!1;B>U&&(f=[U,B],B=f[0],U=f[1],d=[l,s],s=d[0],l=d[1],Y=!0);var se=s.getBBox(),be=l.getBBox(),Ee=se.width>B-P?{x:B+L/2+P,textAlign:"left"}:{x:B-L/2-P,textAlign:"right"},it=be.width>A-U-P?{x:U-L/2-P,textAlign:"right"}:{x:U+L/2+P,textAlign:"left"};return Y?[it,Ee]:[Ee,it]},n.prototype.draw=function(){var t=this.get("container"),s=t&&t.get("canvas");s&&s.draw()},n.prototype.getContainerDOM=function(){var t=this.get("container"),s=t&&t.get("canvas");return s&&s.get("container")},n}(Ai),Sf=null;function Ec(a,n,t){if(a){if(typeof a.addEventListener=="function")return a.addEventListener(n,t,!1),{remove:function(){a.removeEventListener(n,t,!1)}};if(typeof a.attachEvent=="function")return a.attachEvent("on"+n,t),{remove:function(){a.detachEvent("on"+n,t)}}}}var vh={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},$l={default:vh,hover:{thumbColor:"rgba(0,0,0,0.2)"}},gh=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.clearEvents=E.ZT,t.onStartEvent=function(s){return function(l){t.isMobile=s,l.originalEvent.preventDefault();var f=s?(0,E.U2)(l.originalEvent,"touches.0.clientX"):l.clientX,d=s?(0,E.U2)(l.originalEvent,"touches.0.clientY"):l.clientY;t.startPos=t.cfg.isHorizontal?f:d,t.bindLaterEvent()}},t.bindLaterEvent=function(){var s=t.getContainerDOM(),l=[];t.isMobile?l=[Ec(s,"touchmove",t.onMouseMove),Ec(s,"touchend",t.onMouseUp),Ec(s,"touchcancel",t.onMouseUp)]:l=[Ec(s,"mousemove",t.onMouseMove),Ec(s,"mouseup",t.onMouseUp),Ec(s,"mouseleave",t.onMouseUp)],t.clearEvents=function(){l.forEach(function(f){f.remove()})}},t.onMouseMove=function(s){var l=t.cfg,f=l.isHorizontal,d=l.thumbOffset;s.preventDefault();var m=t.isMobile?(0,E.U2)(s,"touches.0.clientX"):s.clientX,x=t.isMobile?(0,E.U2)(s,"touches.0.clientY"):s.clientY,A=f?m:x,P=A-t.startPos;t.startPos=A,t.updateThumbOffset(d+P)},t.onMouseUp=function(s){s.preventDefault(),t.clearEvents()},t.onTrackClick=function(s){var l=t.cfg,f=l.isHorizontal,d=l.x,m=l.y,x=l.thumbLen,A=t.getContainerDOM(),P=A.getBoundingClientRect(),L=s.clientX,B=s.clientY,U=f?L-P.left-d-x/2:B-P.top-m-x/2,Y=t.validateRange(U);t.updateThumbOffset(Y)},t.onThumbMouseOver=function(){var s=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",s),t.draw()},t.onThumbMouseOut=function(){var s=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",s),t.draw()},t}return n.prototype.setRange=function(t,s){this.set("minLimit",t),this.set("maxLimit",s);var l=this.getValue(),f=(0,E.uZ)(l,t,s);l!==f&&!this.get("isInit")&&this.setValue(f)},n.prototype.getRange=function(){var t=this.get("minLimit")||0,s=this.get("maxLimit")||1;return{min:t,max:s}},n.prototype.setValue=function(t){var s=this.getRange(),l=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,E.uZ)(t,s.min,s.max)}),this.delegateEmit("valuechange",{originalValue:l,value:this.getValue()})},n.prototype.getValue=function(){return(0,E.uZ)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return(0,M.pi)((0,M.pi)({},t),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:$l})},n.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},n.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},n.prototype.initEvent=function(){this.bindEvents()},n.prototype.renderTrackShape=function(t){var s=this.cfg,l=s.trackLen,f=s.theme,d=f===void 0?{default:{}}:f,m=(0,E.b$)({},$l,d).default,x=m.lineCap,A=m.trackColor,P=m.size,L=(0,E.U2)(this.cfg,"size",P),B=this.get("isHorizontal")?{x1:0+L/2,y1:L/2,x2:l-L/2,y2:L/2,lineWidth:L,stroke:A,lineCap:x}:{x1:L/2,y1:0+L/2,x2:L/2,y2:l-L/2,lineWidth:L,stroke:A,lineCap:x};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:B})},n.prototype.renderThumbShape=function(t){var s=this.cfg,l=s.thumbOffset,f=s.thumbLen,d=s.theme,m=(0,E.b$)({},$l,d).default,x=m.size,A=m.lineCap,P=m.thumbColor,L=(0,E.U2)(this.cfg,"size",x),B=this.get("isHorizontal")?{x1:l+L/2,y1:L/2,x2:l+f-L/2,y2:L/2,lineWidth:L,stroke:P,lineCap:A,cursor:"default"}:{x1:L/2,y1:l+L/2,x2:L/2,y2:l+f-L/2,lineWidth:L,stroke:P,lineCap:A,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:B})},n.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp);var s=t.findById(this.getElementId("track"));s.on("click",this.onTrackClick);var l=t.findById(this.getElementId("thumb"));l.on("mouseover",this.onThumbMouseOver),l.on("mouseout",this.onThumbMouseOut)},n.prototype.getContainerDOM=function(){var t=this.get("container"),s=t&&t.get("canvas");return s&&s.get("container")},n.prototype.validateRange=function(t){var s=this.cfg,l=s.thumbLen,f=s.trackLen,d=t;return t+l>f?d=f-l:t+l<l&&(d=0),d},n.prototype.draw=function(){var t=this.get("container"),s=t&&t.get("canvas");s&&s.draw()},n.prototype.updateThumbOffset=function(t){var s=this.cfg,l=s.thumbOffset,f=s.isHorizontal,d=s.thumbLen,m=s.size,x=this.validateRange(t);if(x!==l){var A=this.getElementByLocalId("thumb");f?A.attr({x1:x+m/2,x2:x+d-m/2}):A.attr({y1:x+m/2,y2:x+d-m/2}),this.emitOffsetChange(x)}},n.prototype.emitOffsetChange=function(t){var s=this.cfg,l=s.thumbOffset,f=s.trackLen,d=s.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:(0,E.uZ)(t/(f-d),0,1)}),this.delegateEmit("valuechange",{originalValue:l,value:t})},n}(Ai),pg=pa,dg=Pa,Hd=Zl,nd=Uf,Fc=Cu,Wh=rd,jd=lg;function um(a){if((0,E.xb)(a))return null;var n=a[0].x,t=a[0].x,s=a[0].y,l=a[0].y;return(0,E.S6)(a,function(f){n=n>f.x?f.x:n,t=t<f.x?f.x:t,s=s>f.y?f.y:s,l=l<f.y?f.y:l}),{minX:n,maxX:t,minY:s,maxY:l,centerX:(n+t)/2,centerY:(s+l)/2}}function vg(a){return Array.from(new Set(a)).length===1}function Cv(a){return((0,E.VV)(a)+(0,E.Fp)(a))/2}function zs(a,n,t,s){return{x:a+t*Math.cos(s),y:n+t*Math.sin(s)}}function Zf(a,n,t,s,l,f){f===void 0&&(f=0);var d=zs(a,n,t,s),m=zs(a,n,t,l),x=zs(a,n,f,s),A=zs(a,n,f,l);if(l-s===Math.PI*2){var P=zs(a,n,t,s+Math.PI),L=zs(a,n,f,s+Math.PI),B=[["M",d.x,d.y],["A",t,t,0,1,1,P.x,P.y],["A",t,t,0,1,1,m.x,m.y],["M",x.x,x.y]];return f&&(B.push(["A",f,f,0,1,0,L.x,L.y]),B.push(["A",f,f,0,1,0,A.x,A.y])),B.push(["M",d.x,d.y]),B.push(["Z"]),B}var U=l-s<=Math.PI?0:1,Y=[["M",d.x,d.y],["A",t,t,0,U,1,m.x,m.y],["L",A.x,A.y]];return f&&Y.push(["A",f,f,0,U,0,x.x,x.y]),Y.push(["L",d.x,d.y]),Y.push(["Z"]),Y}function nf(a,n,t,s,l){var f=zs(a,n,t,s),d=zs(a,n,t,l);if((0,E.vQ)(l-s,Math.PI*2)){var m=zs(a,n,t,s+Math.PI);return[["M",f.x,f.y],["A",t,t,0,1,1,m.x,m.y],["A",t,t,0,1,1,f.x,f.y],["A",t,t,0,1,0,m.x,m.y],["A",t,t,0,1,0,f.x,f.y],["Z"]]}var x=l-s<=Math.PI?0:1;return[["M",f.x,f.y],["A",t,t,0,x,1,d.x,d.y]]}function id(a,n){var t=a.points,s=um(t),l,f,d=n.startAngle,m=n.endAngle,x=m-d;return n.isTransposed?(l=s.maxY*x,f=s.minY*x):(l=s.maxX*x,f=s.minX*x),l+=d,f+=d,{startAngle:f,endAngle:l}}function ad(a,n){if((0,E.hj)(a)&&(0,E.hj)(n))return[a,n];if(a=a,n=n,vg(a)||vg(n))return[Cv(a),Cv(n)];for(var t=-1,s=0,l=0,f,d=a.length-1,m,x=0;++t<a.length;)f=d,d=t,x+=m=a[f]*n[d]-a[d]*n[f],s+=(a[f]+a[d])*m,l+=(n[f]+n[d])*m;return x*=3,[s/x,l/x]}function Bc(a,n){var t=a.attr(),s=n.attr();return(0,E.S6)(t,function(l,f){s[f]===void 0&&(s[f]=void 0)}),s}function Rp(a,n,t){var s=Math.min(n,t),l=Math.max(n,t);return a>=s&&a<=l}function Gh(a,n,t){if((0,E.HD)(a))return a.padEnd(n,t);if((0,E.kJ)(a)){var s=a.length;if(s<n)for(var l=n-s,f=0;f<l;f++)a.push(t)}return a}function Xl(a,n){return typeof a=="object"&&n.forEach(function(t){delete a[t]}),a}function Ef(a,n,t){var s,l;n===void 0&&(n=[]),t===void 0&&(t=new Map);try{for(var f=(0,M.XA)(a),d=f.next();!d.done;d=f.next()){var m=d.value;t.has(m)||(n.push(m),t.set(m,!0))}}catch(x){s={error:x}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}return n}var ls=function(){function a(n,t,s,l){n===void 0&&(n=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),this.x=n,this.y=t,this.height=l,this.width=s}return a.fromRange=function(n,t,s,l){return new a(n,t,s-n,l-t)},a.fromObject=function(n){return new a(n.minX,n.minY,n.width,n.height)},Object.defineProperty(a.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(n){return this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height},a.prototype.contains=function(n){return n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY},a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.add=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var s=this.clone();return(0,E.S6)(n,function(l){s.x=Math.min(l.x,s.x),s.y=Math.min(l.y,s.y),s.width=Math.max(l.maxX,s.maxX)-s.x,s.height=Math.max(l.maxY,s.maxY)-s.y}),s},a.prototype.merge=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var s=this.clone();return(0,E.S6)(n,function(l){s.x=Math.max(l.x,s.x),s.y=Math.max(l.y,s.y),s.width=Math.min(l.maxX,s.maxX)-s.x,s.height=Math.min(l.maxY,s.maxY)-s.y}),s},a.prototype.cut=function(n,t){var s=n.width,l=n.height;switch(t){case Se.TOP:case Se.TOP_LEFT:case Se.TOP_RIGHT:return a.fromRange(this.minX,this.minY+l,this.maxX,this.maxY);case Se.RIGHT:case Se.RIGHT_TOP:case Se.RIGHT_BOTTOM:return a.fromRange(this.minX,this.minY,this.maxX-s,this.maxY);case Se.BOTTOM:case Se.BOTTOM_LEFT:case Se.BOTTOM_RIGHT:return a.fromRange(this.minX,this.minY,this.maxX,this.maxY-l);case Se.LEFT:case Se.LEFT_TOP:case Se.LEFT_BOTTOM:return a.fromRange(this.minX+s,this.minY,this.maxX,this.maxY);default:return this}},a.prototype.shrink=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return new a(this.x+d,this.y+s,this.width-d-l,this.height-s-f)},a.prototype.expand=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return new a(this.x-d,this.y-s,this.width+d+l,this.height+s+f)},a.prototype.exceed=function(n){return[Math.max(-this.minY+n.minY,0),Math.max(this.maxX-n.maxX,0),Math.max(this.maxY-n.maxY,0),Math.max(-this.minX+n.minX,0)]},a.prototype.collide=function(n){return this.minX<n.maxX&&this.maxX>n.minX&&this.minY<n.maxY&&this.maxY>n.minY},a.prototype.size=function(){return this.width*this.height},a.prototype.isPointIn=function(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY},a}(),sl=function(a,n){var t=n.start,s=n.end;return new ls(a.x+a.width*t.x,a.y+a.height*t.y,a.width*Math.abs(s.x-t.x),a.height*Math.abs(s.y-t.y))};function $s(a){return[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}function xl(a){if(a.isPolar&&!a.isTransposed)return(a.endAngle-a.startAngle)*a.getRadius();var n=a.convert({x:0,y:0}),t=a.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function lm(a){if(a.isPolar){var n=a.startAngle,t=a.endAngle;return t-n===Math.PI*2}return!1}function $h(a,n){var t=a.getCenter();return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function cm(a,n){var t=!1;if(a)if(a.type==="theta"){var s=a.start,l=a.end;t=Rp(n.x,s.x,l.x)&&Rp(n.y,s.y,l.y)}else{var f=a.invert(n);t=Rp(f.x,0,1)&&Rp(f.y,0,1)}return t}function Wd(a,n){var t=a.getCenter();return Math.atan2(n.y-t.y,n.x-t.x)}function Av(a,n){n===void 0&&(n=0);var t=a.start,s=a.end,l=a.getWidth(),f=a.getHeight();if(a.isPolar){var d=a.startAngle,m=a.endAngle,x=a.getCenter(),A=a.getRadius();return{type:"path",startState:{path:Zf(x.x,x.y,A+n,d,d)},endState:function(L){var B=(m-d)*L+d,U=Zf(x.x,x.y,A+n,d,B);return{path:U}},attrs:{path:Zf(x.x,x.y,A+n,d,m)}}}var P;return a.isTransposed?P={height:f+n*2}:P={width:l+n*2},{type:"rect",startState:{x:t.x-n,y:s.y-n,width:a.isTransposed?l+n*2:0,height:a.isTransposed?0:f+n*2},endState:P,attrs:{x:t.x-n,y:s.y-n,width:l+n*2,height:f+n*2}}}function Tv(a,n){n===void 0&&(n=0);var t=a.start,s=a.end,l=a.getWidth(),f=a.getHeight(),d=Math.min(t.x,s.x),m=Math.min(t.y,s.y);return ls.fromRange(d-n,m-n,d+l+n,m+f+n)}var fm=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function hm(a){var n="linear";return fm.test(a)?n="timeCat":(0,E.HD)(a)&&(n="cat"),n}function Ps(a,n,t,s){return n===void 0&&(n={}),n.type?n.type:a.type!=="identity"&&xe.includes(t)&&["interval"].includes(s)||a.isCategory?"cat":a.type}function S0(a,n,t){var s=n||[];if((0,E.hj)(a)||(0,E.UM)((0,E.Wx)(s,a))&&(0,E.xb)(t)){var l=Lu("identity");return new l({field:a.toString(),values:[a]})}var f=(0,E.I)(s,a),d=(0,E.U2)(t,"type",hm(f[0])),m=Lu(d);return new m((0,M.pi)({field:a,values:f},t))}function pm(a,n){if(a.type!=="identity"&&n.type!=="identity"){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);a.change(t)}}function Ip(a){return a.alias||a.field}function Gd(a,n,t){var s=a.values,l=s.length,f;if(l===1)f=[.5,1];else{var d=1,m=0;lm(n)?n.isTransposed?(d=(0,E.U2)(t,"widthRatio.multiplePie",1/1.3),m=1/l*d,f=[m/2,1-m/2]):f=[0,1-1/l]:(m=1/l/2,f=[m,1-m])}return f}function gg(a){var n=a.values.filter(function(t){return!(0,E.UM)(t)&&!isNaN(t)});return Math.max.apply(Math,(0,M.ev)((0,M.ev)([],(0,M.CR)(n),!1),[(0,E.UM)(a.max)?-1/0:a.max],!1))}function $d(a){var n,t;switch(a){case Se.TOP:n={x:0,y:1},t={x:1,y:1};break;case Se.RIGHT:n={x:1,y:0},t={x:1,y:1};break;case Se.BOTTOM:n={x:0,y:0},t={x:1,y:0};break;case Se.LEFT:n={x:0,y:0},t={x:0,y:1};break;default:n=t={x:0,y:0}}return{start:n,end:t}}function E0(a){var n,t;return a.isTransposed?(n={x:0,y:0},t={x:1,y:0}):(n={x:0,y:0},t={x:0,y:1}),{start:n,end:t}}function Pp(a,n){var t={start:{x:0,y:0},end:{x:0,y:0}};a.isRect?t=$d(n):a.isPolar&&(t=E0(a));var s=t.start,l=t.end;return{start:a.convert(s),end:a.convert(l)}}function w0(a,n){if(a.isRect)return a.isTransposed?[DIRECTION.RIGHT,DIRECTION.BOTTOM].includes(n)?1:-1:[DIRECTION.BOTTOM,DIRECTION.RIGHT].includes(n)?-1:1;if(a.isPolar){var t=a.x.start;return t<0?-1:1}return 1}function nt(a){var n=a.start,t=a.end;return n.x===t.x}function Qt(a,n){var t=a.start,s=a.end,l=nt(a);return l?(t.y-s.y)*(n.x-t.x)>0?1:-1:(s.x-t.x)*(t.y-n.y)>0?-1:1}function Sr(a,n){var t=(0,E.U2)(a,["components","axis"],{});return(0,E.b$)({},(0,E.U2)(t,["common"],{}),(0,E.b$)({},(0,E.U2)(t,[n],{})))}function pn(a,n,t){var s=(0,E.U2)(a,["components","axis"],{});return(0,E.b$)({},(0,E.U2)(s,["common","title"],{}),(0,E.b$)({},(0,E.U2)(s,[n,"title"],{})),t)}function kn(a){var n=a.x,t=a.y,s=a.circleCenter,l=t.start>t.end,f=a.isTransposed?a.convert({x:l?0:1,y:0}):a.convert({x:0,y:l?0:1}),d=[f.x-s.x,f.y-s.y],m=[1,0],x=f.y>s.y?Ea.EU(d,m):Ea.EU(d,m)*-1,A=x+(n.end-n.start),P=Math.sqrt(Math.pow(f.x-s.x,2)+Math.pow(f.y-s.y,2));return{center:s,radius:P,startAngle:x,endAngle:A}}function vn(a,n){return(0,E.jn)(a)?a===!1?!1:{}:(0,E.U2)(a,[n])}function en(a,n){return(0,E.U2)(a,"position",n)}function ri(a,n){return(0,E.U2)(n,["title","text"],Ip(a))}var Hn=function(){function a(n,t){this.destroyed=!1,this.facets=[],this.view=n,this.cfg=(0,E.b$)({},this.getDefaultCfg(),t)}return a.prototype.init=function(){this.container||(this.container=this.createContainer());var n=this.view.getData();this.facets=this.generateFacets(n)},a.prototype.render=function(){this.renderViews()},a.prototype.update=function(){},a.prototype.clear=function(){this.clearFacetViews()},a.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},a.prototype.facetToView=function(n){var t=n.region,s=n.data,l=n.padding,f=l===void 0?this.cfg.padding:l,d=this.view.createView({region:t,padding:f});d.data(s||[]),n.view=d,this.beforeEachView(d,n);var m=this.cfg.eachView;return m&&m(d,n),this.afterEachView(d,n),d},a.prototype.createContainer=function(){var n=this.view.getLayer(ge.FORE);return n.addGroup()},a.prototype.renderViews=function(){this.createFacetViews()},a.prototype.createFacetViews=function(){var n=this;return this.facets.map(function(t){return n.facetToView(t)})},a.prototype.clearFacetViews=function(){var n=this;(0,E.S6)(this.facets,function(t){t.view&&(n.view.removeView(t.view),t.view=void 0)})},a.prototype.parseSpacing=function(){var n=this.view.viewBBox,t=n.width,s=n.height,l=this.cfg.spacing;return l.map(function(f,d){return(0,E.hj)(f)?f/(d===0?t:s):parseFloat(f)/100})},a.prototype.getFieldValues=function(n,t){var s=[],l={};return(0,E.S6)(n,function(f){var d=f[t];!(0,E.UM)(d)&&!l[d]&&(s.push(d),l[d]=!0)}),s},a.prototype.getRegion=function(n,t,s,l){var f=(0,M.CR)(this.parseSpacing(),2),d=f[0],m=f[1],x=(1+d)/(t===0?1:t)-d,A=(1+m)/(n===0?1:n)-m,P={x:(x+d)*s,y:(A+m)*l},L={x:P.x+x,y:P.y+A};return{start:P,end:L}},a.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},a.prototype.getDefaultTitleCfg=function(){var n=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:n}}},a.prototype.processAxis=function(n,t){var s=n.getOptions(),l=s.coordinate,f=n.geometries,d=(0,E.U2)(l,"type","rect");if(d==="rect"&&f.length){(0,E.UM)(s.axes)&&(s.axes={});var m=s.axes,x=(0,M.CR)(f[0].getXYFields(),2),A=x[0],P=x[1],L=vn(m,A),B=vn(m,P);L!==!1&&(s.axes[A]=this.getXAxisOption(A,m,L,t)),B!==!1&&(s.axes[P]=this.getYAxisOption(P,m,B,t))}},a.prototype.getFacetDataFilter=function(n){return function(t){return(0,E.yW)(n,function(s){var l=s.field,f=s.value;return!(0,E.UM)(f)&&l?t[l]===f:!0})}},a}(),di={},ii=function(a){return di[(0,E.vl)(a)]},ui=function(a,n){di[(0,E.vl)(a)]=n},Ei=function(){function a(n,t){this.context=n,this.cfg=t,n.addAction(this)}return a.prototype.applyCfg=function(n){(0,E.f0)(this,n)},a.prototype.init=function(){this.applyCfg(this.cfg)},a.prototype.destroy=function(){this.context.removeAction(this),this.context=null},a}(),Rn=Ei,mi=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.execute=function(){this.callback&&this.callback(this.context)},n.prototype.destroy=function(){a.prototype.destroy.call(this),this.callback=null},n}(Rn),Jr=mi,En={};function ai(a,n){var t=En[a],s=null;if(t){var l=t.ActionClass,f=t.cfg;s=new l(n,f),s.name=a,s.init()}return s}function Ti(a){var n=En[a];return(0,E.U2)(n,"ActionClass")}function Kr(a,n,t){En[a]={ActionClass:n,cfg:t}}function Bi(a){delete En[a]}function qn(a,n){var t=new Jr(n);return t.callback=a,t.name="callback",t}function Ri(a,n){var t=[];if(a.length){t.push(["M",a[0].x,a[0].y]);for(var s=1,l=a.length;s<l;s+=1){var f=a[s];t.push(["L",f.x,f.y])}n&&t.push(["Z"])}return t}function Vn(a,n){for(var t=[a[0]],s=1,l=a.length;s<l;s=s+2){var f=n.convert({x:a[s],y:a[s+1]});t.push(f.x,f.y)}return t}function _i(a,n){var t=n.isTransposed,s=a[1],l=a[6],f=a[7],d=n.convert({x:l,y:f}),m=t?0:1;return["A",s,s,0,0,m,d.x,d.y]}function na(a,n,t){var s=t.isTransposed,l=t.startAngle,f=t.endAngle,d=a[0].toLowerCase()==="a"?{x:a[6],y:a[7]}:{x:a[1],y:a[2]},m={x:n[1],y:n[2]},x=[],A=s?"y":"x",P=Math.abs(m[A]-d[A])*(f-l),L=m[A]>=d[A]?1:0,B=P>Math.PI?1:0,U=t.convert(m),Y=$h(t,U);if(Y>=.5)if(P===Math.PI*2){var se={x:(m.x+d.x)/2,y:(m.y+d.y)/2},be=t.convert(se);x.push(["A",Y,Y,0,B,L,be.x,be.y]),x.push(["A",Y,Y,0,B,L,U.x,U.y])}else x.push(["A",Y,Y,0,B,L,U.x,U.y]);return x}function La(a){(0,E.S6)(a,function(n,t){var s=n;if(s[0].toLowerCase()==="a"){var l=a[t-1],f=a[t+1];f&&f[0].toLowerCase()==="a"?l&&l[0].toLowerCase()==="l"&&(l[0]="M"):l&&l[0].toLowerCase()==="a"&&f&&f[0].toLowerCase()==="l"&&(f[0]="M")}})}var xi=function(a,n,t,s){var l,f=[],d=!!s,m,x,A,P,L,B,U;if(d){l=(0,M.CR)(s,2),A=l[0],P=l[1];for(var Y=0,se=a.length;Y<se;Y++){var be=a[Y];A=Ea.VV([0,0],A,be),P=Ea.Fp([0,0],P,be)}}for(var Y=0,Ee=a.length;Y<Ee;Y++){var be=a[Y];if(Y===0&&!t)U=be;else if(Y===Ee-1&&!t)B=be,f.push(U),f.push(B);else{m=a[t?Y?Y-1:Ee-1:Y-1],x=a[t?(Y+1)%Ee:Y+1];var it=[0,0];it=Ea.lu(it,x,m),it=Ea.bA(it,it,n);var gt=Ea.TE(be,m),xt=Ea.TE(be,x),Bt=gt+xt;Bt!==0&&(gt/=Bt,xt/=Bt);var _r=Ea.bA([0,0],it,-gt),Or=Ea.bA([0,0],it,xt);B=Ea.IH([0,0],be,_r),L=Ea.IH([0,0],be,Or),L=Ea.VV([0,0],L,Ea.Fp([0,0],x,be)),L=Ea.Fp([0,0],L,Ea.VV([0,0],x,be)),_r=Ea.lu([0,0],L,be),_r=Ea.bA([0,0],_r,-gt/xt),B=Ea.IH([0,0],be,_r),B=Ea.VV([0,0],B,Ea.Fp([0,0],m,be)),B=Ea.Fp([0,0],B,Ea.VV([0,0],m,be)),Or=Ea.lu([0,0],be,B),Or=Ea.bA([0,0],Or,xt/gt),L=Ea.IH([0,0],be,Or),d&&(B=Ea.Fp([0,0],B,A),B=Ea.VV([0,0],B,P),L=Ea.Fp([0,0],L,A),L=Ea.VV([0,0],L,P)),f.push(U),f.push(B),U=L}}return t&&f.push(f.shift()),f};function ti(a,n,t){for(var s=!!n,l=[],f=0,d=a.length;f<d;f+=2)l.push([a[f],a[f+1]]);for(var m=xi(l,.4,s,t),x=l.length,A=[],P,L,B,f=0;f<x-1;f++)P=m[f*2],L=m[f*2+1],B=l[f+1],A.push(["C",P[0],P[1],L[0],L[1],B[0],B[1]]);return s&&(P=m[x],L=m[x+1],B=l[0],A.push(["C",P[0],P[1],L[0],L[1],B[0],B[1]])),A}function Ln(a,n){return Ri(a,n)}function ta(a,n,t){var s=[],l=a[0],f=null;if(a.length<=2)return Ln(a,n);for(var d=0,m=a.length;d<m;d++){var x=a[d];(!f||!(f.x===x.x&&f.y===x.y))&&(s.push(x.x),s.push(x.y),f=x)}var A=t||[[0,0],[1,1]],P=ti(s,n,A);return P.unshift(["M",l.x,l.y]),P}function io(a,n){var t=[];return(0,E.S6)(n,function(s){var l=s[0];switch(l.toLowerCase()){case"m":case"l":case"c":t.push(Vn(s,a));break;case"a":t.push(_i(s,a));break;case"z":default:t.push(s);break}}),t}function Li(a,n){var t=[],s,l,f,d;return(0,E.S6)(n,function(m,x){var A=m[0];switch(A.toLowerCase()){case"m":case"c":case"q":t.push(Vn(m,a));break;case"l":s=n[x-1],l=m,f=a.isTransposed,d=f?s[s.length-2]===l[1]:s[s.length-1]===l[2],d?t=t.concat(na(s,l,a)):t.push(Vn(m,a));break;case"a":t.push(_i(m,a));break;case"z":default:t.push(m);break}}),La(t),t}function Qa(a,n){var t=a.event,s=t.target;return _a(s,n)}function Oa(a,n){var t=a.getCanvasBBox(),s=t.width,l=t.height;return s>0&&l>0&&(s>=n||l>=n)}function _a(a,n){var t=a.getCanvasBBox();return Oa(a,n)?t:null}function So(a,n){var t=a.event.maskShapes;return t.map(function(s){return _a(s,n)}).filter(function(s){return!!s})}function pu(a,n){var t=a.event,s=t.target;return Nu(s,n)}function Nu(a,n){return Oa(a,n)?a.attr("path"):null}function vo(a,n){var t=a.event.maskShapes;return t.map(function(s){return Nu(s,n)})}function hs(a){var n=a.event,t,s=n.target;return s&&(t=s.get("element")),t}function Vo(a){var n=a.event,t=n.target,s;return t&&(s=t.get("delegateObject")),s}function du(a){var n=a.event.gEvent;return!(n&&n.fromShape&&n.toShape&&n.fromShape.get("element")===n.toShape.get("element"))}function Us(a){return a&&a.component&&a.component.isList()}function Zs(a){return a&&a.component&&a.component.isSlider()}function Js(a){var n=a.event,t=n.target;return t&&(t==null?void 0:t.get("name"))==="mask"||zu(a)}function zu(a){var n;return((n=a.event.target)===null||n===void 0?void 0:n.get("name"))==="multi-mask"}function ou(a,n){var t=a.event.target;if(zu(a))return Ua(a,n);if(t.get("type")==="path"){var s=pu(a,n);return s?Pi(a.view,s):void 0}var l=Qa(a,n);return l?yn(a.view,l):null}function Ua(a,n){var t=a.event.target;if(t.get("type")==="path"){var s=vo(a,n);return s.length>0?s.flatMap(function(f){return Pi(a.view,f)}):null}var l=So(a,n);return l.length>0?l.flatMap(function(f){return yn(a.view,f)}):null}function Uu(a,n,t){if(zu(a))return ha(a,n,t);var s=Qa(a,t);return s?Do(s,a,n):null}function Do(a,n,t){var s=n.view,l=on(s,t,{x:a.x,y:a.y}),f=on(s,t,{x:a.maxX,y:a.maxY}),d={minX:l.x,minY:l.y,maxX:f.x,maxY:f.y};return yn(t,d)}function ha(a,n,t){var s=So(a,t);return s.length>0?s.flatMap(function(l){return Do(l,a,n)}):null}function xa(a){var n=a.geometries,t=[];return(0,E.S6)(n,function(s){var l=s.elements;t=t.concat(l)}),a.views&&a.views.length&&(0,E.S6)(a.views,function(s){t=t.concat(xa(s))}),t}function Ao(a,n,t){var s=xa(a);return s.filter(function(l){return vu(l,n)===t})}function Es(a,n){var t=a.geometries,s=[];return(0,E.S6)(t,function(l){var f=l.getElementsBy(function(d){return d.hasState(n)});s=s.concat(f)}),s}function vu(a,n){var t=a.getModel(),s=t.data,l;return(0,E.kJ)(s)?l=s[0][n]:l=s[n],l}function pr(a,n){return!(n.minX>a.maxX||n.maxX<a.minX||n.minY>a.maxY||n.maxY<a.minY)}function yn(a,n){var t=xa(a),s=[];return(0,E.S6)(t,function(l){var f=l.shape,d=f.getCanvasBBox();pr(n,d)&&s.push(l)}),s}function fn(a){var n=[];return(0,E.S6)(a,function(t){var s=t[0];if(s!=="A")for(var l=1;l<t.length;l=l+2)n.push([t[l],t[l+1]]);else{var f=t.length;n.push([t[f-2],t[f-1]])}}),n}function Pi(a,n){var t=xa(a),s=fn(n),l=t.filter(function(f){var d=f.shape,m;if(d.get("type")==="path")m=fn(d.attr("path"));else{var x=d.getCanvasBBox();m=$s(x)}return(0,Tp.Wq)(s,m)});return l}function Ya(a){return a.getComponents().map(function(n){return n.component})}function Go(a,n){var t=n.x-a.x,s=n.y-a.y;return Math.sqrt(t*t+s*s)}function zt(a,n){if(a.length<=2)return Ln(a,!1);var t=a[0],s=[];(0,E.S6)(a,function(f){s.push(f.x),s.push(f.y)});var l=ti(s,n,null);return l.unshift(["M",t.x,t.y]),l}function It(a,n){return a.x<=n.x&&a.maxX>=n.x&&a.y<=n.y&&a.maxY>n.y}function xr(a){var n=a.parent,t=null;return n&&(t=n.views.filter(function(s){return s!==a})),t}function Xt(a,n){var t=a.getCoordinate();return t.invert(n)}function on(a,n,t){var s=Xt(a,t);return n.getCoordinate().convert(s)}function kr(a,n,t,s){var l=!1;return(0,E.S6)(a,function(f){if(f[t]===n[t]&&f[s]===n[s])return l=!0,!1}),l}function Nr(a,n){var t=a.getScaleByField(n);return!t&&a.views&&(0,E.S6)(a.views,function(s){if(t=Nr(s,n),t)return!1}),t}var Wr=function(){function a(n){this.actions=[],this.event=null,this.cacheMap={},this.view=n}return a.prototype.cache=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(n.length===1)return this.cacheMap[n[0]];n.length===2&&(this.cacheMap[n[0]]=n[1])},a.prototype.getAction=function(n){return this.actions.find(function(t){return t.name===n})},a.prototype.addAction=function(n){this.actions.push(n)},a.prototype.removeAction=function(n){var t=this.actions,s=this.actions.indexOf(n);s>=0&&t.splice(s,1)},a.prototype.getCurrentPoint=function(){var n=this.event;if(n)if(n.target instanceof HTMLElement){var t=this.view.getCanvas(),s=t.getPointByClient(n.clientX,n.clientY);return s}else return{x:n.x,y:n.y};return null},a.prototype.getCurrentShape=function(){return(0,E.U2)(this.event,["gEvent","shape"])},a.prototype.isInPlot=function(){var n=this.getCurrentPoint();return n?this.view.isPointInPlot(n):!1},a.prototype.isInShape=function(n){var t=this.getCurrentShape();return t?t.get("name")===n:!1},a.prototype.isInComponent=function(n){var t=Ya(this.view),s=this.getCurrentPoint();return s?!!t.find(function(l){var f=l.getBBox();return n?l.get("name")===n&&It(f,s):It(f,s)}):!1},a.prototype.destroy=function(){(0,E.S6)(this.actions.slice(),function(n){n.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},a}(),dr=Wr,Dr=function(){function a(n,t){this.view=n,this.cfg=t}return a.prototype.init=function(){this.initEvents()},a.prototype.initEvents=function(){},a.prototype.clearEvents=function(){},a.prototype.destroy=function(){this.clearEvents()},a}(),tr=Dr;function Zr(a,n,t){var s=a.split(":"),l=s[0],f=n.getAction(l)||ai(l,n);if(!f)throw new Error("There is no action named ".concat(l));var d=s[1];return{action:f,methodName:d,arg:t}}function xn(a){var n=a.action,t=a.methodName,s=a.arg;if(n[t])n[t](s);else throw new Error("Action(".concat(n.name,") doesn't have a method called ").concat(t))}var bn={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},Gn=function(a){(0,M.ZT)(n,a);function n(t,s){var l=a.call(this,t,s)||this;return l.callbackCaches={},l.emitCaches={},l.steps=s,l}return n.prototype.init=function(){this.initContext(),a.prototype.init.call(this)},n.prototype.destroy=function(){a.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},n.prototype.initEvents=function(){var t=this;(0,E.S6)(this.steps,function(s,l){(0,E.S6)(s,function(f){var d=t.getActionCallback(l,f);d&&t.bindEvent(f.trigger,d)})})},n.prototype.clearEvents=function(){var t=this;(0,E.S6)(this.steps,function(s,l){(0,E.S6)(s,function(f){var d=t.getActionCallback(l,f);d&&t.offEvent(f.trigger,d)})})},n.prototype.initContext=function(){var t=this.view,s=new dr(t);this.context=s;var l=this.steps;(0,E.S6)(l,function(f){(0,E.S6)(f,function(d){if((0,E.mf)(d.action))d.actionObject={action:qn(d.action,s),methodName:"execute"};else if((0,E.HD)(d.action))d.actionObject=Zr(d.action,s,d.arg);else if((0,E.kJ)(d.action)){var m=d.action,x=(0,E.kJ)(d.arg)?d.arg:[d.arg];d.actionObject=[],(0,E.S6)(m,function(A,P){d.actionObject.push(Zr(A,s,x[P]))})}})})},n.prototype.isAllowStep=function(t){var s=this.currentStepName,l=this.steps;if(s===t||t===bn.SHOW_ENABLE)return!0;if(t===bn.PROCESSING)return s===bn.START;if(t===bn.START)return s!==bn.PROCESSING;if(t===bn.END)return s===bn.PROCESSING||s===bn.START;if(t===bn.ROLLBACK){if(l[bn.END])return s===bn.END;if(s===bn.START)return!0}return!1},n.prototype.isAllowExecute=function(t,s){if(this.isAllowStep(t)){var l=this.getKey(t,s);return s.once&&this.emitCaches[l]?!1:s.isEnable?s.isEnable(this.context):!0}return!1},n.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},n.prototype.afterExecute=function(t,s){t!==bn.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var l=this.getKey(t,s);this.emitCaches[l]=!0},n.prototype.getKey=function(t,s){return t+s.trigger+s.action},n.prototype.getActionCallback=function(t,s){var l=this,f=this.context,d=this.callbackCaches,m=s.actionObject;if(s.action&&m){var x=this.getKey(t,s);if(!d[x]){var A=function(P){f.event=P,l.isAllowExecute(t,s)?((0,E.kJ)(m)?(0,E.S6)(m,function(L){f.event=P,xn(L)}):(f.event=P,xn(m)),l.afterExecute(t,s),s.callback&&(f.event=P,s.callback(f))):f.event=null};s.debounce?d[x]=(0,E.Ds)(A,s.debounce.wait,s.debounce.immediate):s.throttle?d[x]=(0,E.P2)(A,s.throttle.wait,{leading:s.throttle.leading,trailing:s.throttle.trailing}):d[x]=A}return d[x]}return null},n.prototype.bindEvent=function(t,s){var l=t.split(":");l[0]==="window"?window.addEventListener(l[1],s):l[0]==="document"?document.addEventListener(l[1],s):this.view.on(t,s)},n.prototype.offEvent=function(t,s){var l=t.split(":");l[0]==="window"?window.removeEventListener(l[1],s):l[0]==="document"?document.removeEventListener(l[1],s):this.view.off(t,s)},n}(tr),zn=Gn,$n={};function Yi(a){return $n[(0,E.vl)(a)]}function Fn(a,n){$n[(0,E.vl)(a)]=n}function Hi(a,n,t){var s=Yi(a);if(!s)return null;if((0,E.PO)(s)){var l=(0,E.CD)((0,E.d9)(s),t);return new zn(n,l)}else{var f=s;return new f(n,t)}}function ma(a){return{title:{autoRotate:!0,position:"center",spacing:a.axisTitleSpacing,style:{fill:a.axisTitleTextFillColor,fontSize:a.axisTitleTextFontSize,lineHeight:a.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:a.fontFamily},iconStyle:{fill:a.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:a.axisLabelOffset,style:{fill:a.axisLabelFillColor,fontSize:a.axisLabelFontSize,lineHeight:a.axisLabelLineHeight,fontFamily:a.fontFamily}},line:{style:{lineWidth:a.axisLineBorder,stroke:a.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:a.axisGridBorderColor,lineWidth:a.axisGridBorder,lineDash:a.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:a.axisTickLineBorder,stroke:a.axisTickLineBorderColor},alignTick:!0,length:a.axisTickLineLength},subTickLine:null,animate:!0}}function ka(a){return{title:null,marker:{symbol:"circle",spacing:a.legendMarkerSpacing,style:{r:a.legendCircleMarkerSize,fill:a.legendMarkerColor}},itemName:{spacing:5,style:{fill:a.legendItemNameFillColor,fontFamily:a.fontFamily,fontSize:a.legendItemNameFontSize,lineHeight:a.legendItemNameLineHeight,fontWeight:a.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:a.legendPageNavigatorMarkerSize,inactiveFill:a.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:a.legendPageNavigatorMarkerInactiveFillOpacity,fill:a.legendPageNavigatorMarkerFillColor,opacity:a.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:a.legendPageNavigatorTextFillColor,fontSize:a.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:a.legendItemSpacing,itemMarginBottom:a.legendItemMarginBottom,padding:a.legendPadding}}function Fo(a){var n,t={point:{default:{fill:a.pointFillColor,r:a.pointSize,stroke:a.pointBorderColor,lineWidth:a.pointBorder,fillOpacity:a.pointFillOpacity},active:{stroke:a.pointActiveBorderColor,lineWidth:a.pointActiveBorder},selected:{stroke:a.pointSelectedBorderColor,lineWidth:a.pointSelectedBorder},inactive:{fillOpacity:a.pointInactiveFillOpacity,strokeOpacity:a.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:a.hollowPointFillColor,lineWidth:a.hollowPointBorder,stroke:a.hollowPointBorderColor,strokeOpacity:a.hollowPointBorderOpacity,r:a.hollowPointSize},active:{stroke:a.hollowPointActiveBorderColor,strokeOpacity:a.hollowPointActiveBorderOpacity},selected:{lineWidth:a.hollowPointSelectedBorder,stroke:a.hollowPointSelectedBorderColor,strokeOpacity:a.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:a.hollowPointInactiveBorderOpacity}},area:{default:{fill:a.areaFillColor,fillOpacity:a.areaFillOpacity,stroke:null},active:{fillOpacity:a.areaActiveFillOpacity},selected:{fillOpacity:a.areaSelectedFillOpacity},inactive:{fillOpacity:a.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:a.hollowAreaBorderColor,lineWidth:a.hollowAreaBorder,strokeOpacity:a.hollowAreaBorderOpacity},active:{fill:null,lineWidth:a.hollowAreaActiveBorder},selected:{fill:null,lineWidth:a.hollowAreaSelectedBorder},inactive:{strokeOpacity:a.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:a.intervalFillColor,fillOpacity:a.intervalFillOpacity},active:{stroke:a.intervalActiveBorderColor,lineWidth:a.intervalActiveBorder},selected:{stroke:a.intervalSelectedBorderColor,lineWidth:a.intervalSelectedBorder},inactive:{fillOpacity:a.intervalInactiveFillOpacity,strokeOpacity:a.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:a.hollowIntervalFillColor,stroke:a.hollowIntervalBorderColor,lineWidth:a.hollowIntervalBorder,strokeOpacity:a.hollowIntervalBorderOpacity},active:{stroke:a.hollowIntervalActiveBorderColor,lineWidth:a.hollowIntervalActiveBorder,strokeOpacity:a.hollowIntervalActiveBorderOpacity},selected:{stroke:a.hollowIntervalSelectedBorderColor,lineWidth:a.hollowIntervalSelectedBorder,strokeOpacity:a.hollowIntervalSelectedBorderOpacity},inactive:{stroke:a.hollowIntervalInactiveBorderColor,lineWidth:a.hollowIntervalInactiveBorder,strokeOpacity:a.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:a.lineBorderColor,lineWidth:a.lineBorder,strokeOpacity:a.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:a.lineActiveBorder},selected:{lineWidth:a.lineSelectedBorder},inactive:{strokeOpacity:a.lineInactiveBorderOpacity}}},s=ma(a),l=ka(a);return{background:a.backgroundColor,defaultColor:a.brandColor,subColor:a.subColor,semanticRed:a.paletteSemanticRed,semanticGreen:a.paletteSemanticGreen,padding:"auto",fontFamily:a.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:a.paletteQualitative10,colors20:a.paletteQualitative20,sequenceColors:a.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(f){var d=f.geometry.coordinate;if(d.isPolar&&d.isTransposed){var m=id(f.getModel(),d),x=m.startAngle,A=m.endAngle,P=(x+A)/2,L=7.5,B=L*Math.cos(P),U=L*Math.sin(P);return{matrix:no.vs(null,[["t",B,U]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:(0,M.pi)((0,M.pi)({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:(0,M.pi)((0,M.pi)({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:(0,M.pi)((0,M.pi)({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:(0,M.pi)((0,M.pi)({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:(0,M.pi)((0,M.pi)({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:(0,M.pi)((0,M.pi)({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:(0,M.pi)((0,M.pi)({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:(0,M.pi)((0,M.pi)({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},violin:{violin:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hollow:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"hollow-smooth":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}}},components:{axis:{common:s,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:(0,E.b$)({},s.grid,{line:{type:"line"}})},radius:{title:null,grid:(0,E.b$)({},s.grid,{line:{type:"circle"}})}},legend:{common:l,right:{layout:"vertical",padding:a.legendVerticalPadding},left:{layout:"vertical",padding:a.legendVerticalPadding},top:{layout:"horizontal",padding:a.legendHorizontalPadding},bottom:{layout:"horizontal",padding:a.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:a.sliderRailHeight,defaultLength:a.sliderRailWidth,style:{fill:a.sliderRailFillColor,stroke:a.sliderRailBorderColor,lineWidth:a.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:a.sliderLabelTextFillColor,fontSize:a.sliderLabelTextFontSize,lineHeight:a.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:a.fontFamily}},handler:{size:a.sliderHandlerWidth,style:{fill:a.sliderHandlerFillColor,stroke:a.sliderHandlerBorderColor}},slidable:!0,padding:l.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:a.tooltipCrosshairsBorderColor,lineWidth:a.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(n={},n["".concat(Hl)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:a.tooltipContainerFillColor,opacity:a.tooltipContainerFillOpacity,boxShadow:a.tooltipContainerShadow,borderRadius:"".concat(a.tooltipContainerBorderRadius,"px"),color:a.tooltipTextFillColor,fontSize:"".concat(a.tooltipTextFontSize,"px"),fontFamily:a.fontFamily,lineHeight:"".concat(a.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},n["".concat(Rl)]={marginBottom:"12px",marginTop:"12px"},n["".concat(jl)]={margin:0,listStyleType:"none",padding:0},n["".concat(Hh)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},n["".concat(wp)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},n["".concat(rf)]={display:"inline-block",float:"right",marginLeft:"30px"},n)},annotation:{arc:{style:{stroke:a.annotationArcBorderColor,lineWidth:a.annotationArcBorder},animate:!0},line:{style:{stroke:a.annotationLineBorderColor,lineDash:a.annotationLineDash,lineWidth:a.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,textAlign:"start",fontFamily:a.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:a.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:a.annotationRegionBorder,stroke:a.annotationRegionBorderColor,fill:a.annotationRegionFillColor,fillOpacity:a.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:a.brandColor,lineWidth:2}},line:{style:{stroke:a.annotationLineBorderColor,lineWidth:a.annotationLineBorder},length:a.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,fontFamily:a.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:a.annotationRegionFillColor,fillOpacity:a.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,fontFamily:a.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:a.cSliderBackgroundFillColor,opacity:a.cSliderBackgroundFillOpacity},foregroundStyle:{fill:a.cSliderForegroundFillColor,opacity:a.cSliderForegroundFillOpacity},handlerStyle:{width:a.cSliderHandlerWidth,height:a.cSliderHandlerHeight,fill:a.cSliderHandlerFillColor,opacity:a.cSliderHandlerFillOpacity,stroke:a.cSliderHandlerBorderColor,lineWidth:a.cSliderHandlerBorder,radius:a.cSliderHandlerBorderRadius,highLightFill:a.cSliderHandlerHighlightFillColor},textStyle:{fill:a.cSliderTextFillColor,opacity:a.cSliderTextFillOpacity,fontSize:a.cSliderTextFontSize,lineHeight:a.cSliderTextLineHeight,fontWeight:a.cSliderTextFontWeight,stroke:a.cSliderTextBorderColor,lineWidth:a.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:a.scrollbarTrackFillColor,thumbColor:a.scrollbarThumbFillColor}},hover:{style:{thumbColor:a.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:a.labelFillColor,fontSize:a.labelFontSize,fontFamily:a.fontFamily,stroke:a.labelBorderColor,lineWidth:a.labelBorder},fillColorDark:a.labelFillColorDark,fillColorLight:a.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:a.innerLabelFillColor,fontSize:a.innerLabelFontSize,fontFamily:a.fontFamily,stroke:a.innerLabelBorderColor,lineWidth:a.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:a.overflowLabelFillColor,fontSize:a.overflowLabelFontSize,fontFamily:a.fontFamily,stroke:a.overflowLabelBorderColor,lineWidth:a.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:a.labelLineBorder}},autoRotate:!0}}}var Na={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Yl={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},mg=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],af=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],dm=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],wf=function(a){a===void 0&&(a={});var n=a.paletteQualitative10,t=n===void 0?mg:n,s=a.paletteQualitative20,l=s===void 0?af:s,f=a.brandColor,d=f===void 0?t[0]:f,m={backgroundColor:"transparent",brandColor:d,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:t,paletteQualitative20:l,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:dm,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:Na[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Na[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:Yl[85],axisTickLineBorderColor:Na[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Na[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Na[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Na[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Na[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:d,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Na[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Na[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Na[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Na[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:Na[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Na[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Na[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Na[25],annotationArcBorderColor:Na[15],annotationArcBorder:1,annotationLineBorderColor:Na[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Na[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Na[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Na[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:Na[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Na[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Yl[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Na[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Yl[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Na[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:d,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Yl[100],pointBorderOpacity:1,pointActiveBorderColor:Na[100],pointSelectedBorder:2,pointSelectedBorderColor:Na[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:d,hollowPointBorderOpacity:.95,hollowPointFillColor:Yl[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Na[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Na[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:d,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:d,areaFillOpacity:.25,areaActiveFillColor:d,areaActiveFillOpacity:.5,areaSelectedFillColor:d,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:d,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Na[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Na[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:d,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Na[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Na[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:d,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Yl[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Na[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Na[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,M.pi)((0,M.pi)({},m),a)},vm=wf();function Mv(a){var n=a.styleSheet,t=n===void 0?{}:n,s=(0,M._T)(a,["styleSheet"]),l=wf(t);return(0,E.b$)({},Fo(l),s)}var s_=Mv({}),C0={default:s_};function od(a){return(0,E.U2)(C0,(0,E.vl)(a),C0.default)}function sd(a,n){C0[(0,E.vl)(a)]=Mv(n)}function yg(a,n,t){var s=t.translate(a),l=t.translate(n);return(0,E.vQ)(s,l)}function Rv(a,n){var t=n.coordinate,s=n.getXScale(),l=s.range,f=l[l.length-1],d=l[0],m=t.invert(a),x=m.x;return t.isPolar&&x>(1+f)/2&&(x=d),s.translate(s.invert(x))}function gm(a,n,t){var s=t.coordinate,l=t.getYScale(),f=l.field,d=s.invert(n),m=l.invert(d.y),x=(0,E.sE)(a,function(A){var P=A[_e];return P[f][0]<=m&&P[f][1]>=m});return x||a[a.length-1]}var Au=(0,E.HP)(function(a){if(a.isCategory)return 1;for(var n=a.values,t=n.length,s=a.translate(n[0]),l=s,f=0;f<t;f++){var d=n[f],m=a.translate(d);m<s&&(s=m),m>l&&(l=m)}return(l-s)/(t-1)});function Vs(a,n,t){var s=n.getAttribute("position"),l=s.getFields(),f=n.scales,d=(0,E.mf)(t)||!t?l[0]:t,m=f[d],x=m?m.getText(a[d]):a[d]||d;return(0,E.mf)(t)?t(x,a):x}function u_(a){var n=(0,E.VO)(a.attributes);return(0,E.hX)(n,function(t){return(0,E.FX)(xe,t.type)})}function A0(a){var n,t,s=u_(a),l;try{for(var f=(0,M.XA)(s),d=f.next();!d.done;d=f.next()){var m=d.value,x=m.getScale(m.type);if(x&&x.isLinear){var A=(0,E.U2)(a.scaleDefs,x.field),P=Ps(x,A,m.type,a.type);if(P!=="cat"){l=x;break}}}}catch(U){n={error:U}}finally{try{d&&!d.done&&(t=f.return)&&t.call(f)}finally{if(n)throw n.error}}var L=a.getXScale(),B=a.getYScale();return l||B||L}function T0(a,n){var t=n.field,s=a[t];if((0,E.kJ)(s)){var l=s.map(function(f){return n.getText(f)});return l.join("-")}return n.getText(s)}function Iv(a,n){var t,s=n.getGroupScales();if(s.length&&(t=s[0]),t){var l=t.field;return t.getText(a[l])}var f=A0(n);return Ip(f)}function M0(a,n,t){if(n.length===0)return null;var s=t.type,l=t.getXScale(),f=t.getYScale(),d=l.field,m=f.field,x=null;if(s==="heatmap"||s==="point"){for(var A=t.coordinate,P=A.invert(a),L=l.invert(P.x),B=f.invert(P.y),U=1/0,Y=0;Y<n.length;Y++){var se=n[Y],be=se[_e],Ee=Math.pow(be[d]-L,2)+Math.pow(be[m]-B,2);Ee<U&&(U=Ee,x=se)}return x}var it=n[0],gt=n[n.length-1],xt=Rv(a,t),Bt=it[_e][d],_r=it[_e][m],Or=gt[_e][d],Gr=f.isLinear&&(0,E.kJ)(_r);if((0,E.kJ)(Bt)){for(var Y=0;Y<n.length;Y++){var mn=n[Y],be=mn[_e];if(l.translate(be[d][0])<=xt&&l.translate(be[d][1])>=xt)if(Gr)(0,E.kJ)(x)||(x=[]),x.push(mn);else{x=mn;break}}(0,E.kJ)(x)&&(x=gm(x,a,t))}else{var cn=void 0;if(!l.isLinear&&l.type!=="timeCat"){for(var Y=0;Y<n.length;Y++){var mn=n[Y],be=mn[_e];if(yg(be[d],xt,l))if(Gr)(0,E.kJ)(x)||(x=[]),x.push(mn);else{x=mn;break}else l.translate(be[d])<=xt&&(gt=mn,cn=n[Y+1])}(0,E.kJ)(x)&&(x=gm(x,a,t))}else{if((xt>l.translate(Or)||xt<l.translate(Bt))&&(xt>l.max||xt<l.min))return null;for(var Nn=0,hi=n.length-1,Wi=void 0;Nn<=hi;){Wi=Math.floor((Nn+hi)/2);var bi=n[Wi][_e][d];if(yg(bi,xt,l))return n[Wi];l.translate(bi)<=l.translate(xt)?(Nn=Wi+1,gt=n[Wi],cn=n[Wi+1]):(hi===0&&(gt=n[0]),hi=Wi-1)}}gt&&cn&&Math.abs(l.translate(gt[_e][d])-xt)>Math.abs(l.translate(cn[_e][d])-xt)&&(gt=cn)}var to=Au(t.getXScale());return!x&&Math.abs(l.translate(gt[_e][d])-xt)<=to/2&&(x=gt),x}function Yo(a,n,t,s){var l,f;t===void 0&&(t=""),s===void 0&&(s=!1);var d=a[_e],m=Vs(d,n,t),x=n.tooltipOption,A=n.theme.defaultColor,P=[],L,B;function U(mn,cn){if(s||!(0,E.UM)(cn)&&cn!==""){var Nn={title:m,data:d,mappingData:a,name:mn,value:cn,color:a.color||A,marker:!0};P.push(Nn)}}if((0,E.Kn)(x)){var Y=x.fields,se=x.callback;if(se){var be=Y.map(function(mn){return a[_e][mn]}),Ee=se.apply(void 0,(0,M.ev)([],(0,M.CR)(be),!1)),it=(0,M.pi)({data:a[_e],mappingData:a,title:m,color:a.color||A,marker:!0},Ee);P.push(it)}else{var gt=n.scales;try{for(var xt=(0,M.XA)(Y),Bt=xt.next();!Bt.done;Bt=xt.next()){var _r=Bt.value;if(!(0,E.UM)(d[_r])){var Or=gt[_r];L=Ip(Or),B=Or.getText(d[_r]),U(L,B)}}}catch(mn){l={error:mn}}finally{try{Bt&&!Bt.done&&(f=xt.return)&&f.call(xt)}finally{if(l)throw l.error}}}}else{var Gr=A0(n);B=T0(d,Gr),L=Iv(d,n),U(L,B)}return P}function Os(a,n,t,s){var l,f,d=s.showNil,m=[],x=a.dataArray;if(!(0,E.xb)(x)){a.sort(x);try{for(var A=(0,M.XA)(x),P=A.next();!P.done;P=A.next()){var L=P.value,B=M0(n,L,a);if(B){var U=a.getElementId(B),Y=a.elementsMap[U];if(a.type==="heatmap"||Y.visible){var se=Yo(B,a,t,d);se.length&&m.push(se)}}}}catch(be){l={error:be}}finally{try{P&&!P.done&&(f=A.return)&&f.call(A)}finally{if(l)throw l.error}}}return m}function Xh(a,n,t,s){var l=s.showNil,f=[],d=a.container,m=d.getShape(n.x,n.y);if(m&&m.get("visible")&&m.get("origin")){var x=m.get("origin").mappingData,A=Yo(x,a,t,l);A.length&&f.push(A)}return f}function mm(a,n,t){var s,l,f=[],d=a.geometries,m=t.shared,x=t.title,A=t.reversed;try{for(var P=(0,M.XA)(d),L=P.next();!L.done;L=P.next()){var B=L.value;if(B.visible&&B.tooltipOption!==!1){var U=B.type,Y=void 0;["point","edge","polygon"].includes(U)?Y=Xh(B,n,x,t):["area","line","path","heatmap"].includes(U)||m!==!1?Y=Os(B,n,x,t):Y=Xh(B,n,x,t),Y.length&&(A&&Y.reverse(),f.push(Y))}}}catch(se){s={error:se}}finally{try{L&&!L.done&&(l=P.return)&&l.call(P)}finally{if(s)throw s.error}}return f}function Tu(a,n,t){var s,l,f=mm(a,n,t);try{for(var d=(0,M.XA)(a.views),m=d.next();!m.done;m=d.next()){var x=m.value;f=f.concat(mm(x,n,t))}}catch(A){s={error:A}}finally{try{m&&!m.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return f}function _g(a){return!(0,E.hj)(a)&&!(0,E.kJ)(a)}function Vf(a){a===void 0&&(a=0);var n=(0,E.kJ)(a)?a:[a];switch(n.length){case 0:n=[0,0,0,0];break;case 1:n=new Array(4).fill(n[0]);break;case 2:n=(0,M.ev)((0,M.ev)([],(0,M.CR)(n),!1),(0,M.CR)(n),!1);break;case 3:n=(0,M.ev)((0,M.ev)([],(0,M.CR)(n),!1),[n[1]],!1);break;default:n=n.slice(0,4);break}return n}var Xd={};function of(a,n){Xd[a]=n}function l_(a){delete Xd[a]}function Pv(){return Object.keys(Xd)}function Zu(a){return Xd[a]}var oc=function(){function a(n){this.option=this.wrapperOption(n)}return a.prototype.update=function(n){return this.option=this.wrapperOption(n),this},a.prototype.hasAction=function(n){var t=this.option.actions;return(0,E.G)(t,function(s){return s[0]===n})},a.prototype.create=function(n,t){var s=this.option,l=s.type,f=s.cfg,d=l==="theta",m=(0,M.pi)({start:n,end:t},f),x=Nd(d?"polar":l);return this.coordinate=new x(m),this.coordinate.type=l,d&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},a.prototype.adjust=function(n,t){return this.coordinate.update({start:n,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},a.prototype.rotate=function(n){return this.option.actions.push(["rotate",n]),this},a.prototype.reflect=function(n){return this.option.actions.push(["reflect",n]),this},a.prototype.scale=function(n,t){return this.option.actions.push(["scale",n,t]),this},a.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},a.prototype.getOption=function(){return this.option},a.prototype.getCoordinate=function(){return this.coordinate},a.prototype.wrapperOption=function(n){return(0,M.pi)({type:"rect",actions:[],cfg:{}},n)},a.prototype.execActions=function(n){var t=this,s=this.option.actions;(0,E.S6)(s,function(l){var f,d=(0,M.CR)(l),m=d[0],x=d.slice(1),A=(0,E.UM)(n)?!0:n.includes(m);A&&(f=t.coordinate)[m].apply(f,(0,M.ev)([],(0,M.CR)(x),!1))})},a}(),wc=oc,Tx=function(){function a(n,t,s){this.view=n,this.gEvent=t,this.data=s,this.type=t.type}return a.fromData=function(n,t,s){return new a(n,new We.Event(t,{}),s)},Object.defineProperty(a.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),a.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},a.prototype.clone=function(){return new a(this.view,this.gEvent,this.data)},a}(),Ka=Tx;function sf(a){var n=a.getController("axis"),t=a.getController("legend"),s=a.getController("annotation"),l=a.getController("slider"),f=a.getController("scrollbar");[n,l,f,t,s].forEach(function(d){d&&d.layout()})}var Op=function(){function a(){this.scales=new Map,this.syncScales=new Map}return a.prototype.createScale=function(n,t,s,l){var f=s,d=this.getScaleMeta(l);if(t.length===0&&d){var m=d.scale,x={type:m.type};m.isCategory&&(x.values=m.values),f=(0,E.b$)(x,d.scaleDef,s)}var A=S0(n,t,f);return this.cacheScale(A,s,l),A},a.prototype.sync=function(n,t){var s=this;this.syncScales.forEach(function(l,f){var d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,x=[];(0,E.S6)(l,function(A){var P=s.getScale(A);m=(0,E.hj)(P.max)?Math.max(m,P.max):m,d=(0,E.hj)(P.min)?Math.min(d,P.min):d,(0,E.S6)(P.values,function(L){x.includes(L)||x.push(L)})}),(0,E.S6)(l,function(A){var P=s.getScale(A);if(P.isContinuous)P.change({min:d,max:m,values:x});else if(P.isCategory){var L=P.range,B=s.getScaleMeta(A);x&&!(0,E.U2)(B,["scaleDef","range"])&&(L=Gd((0,E.b$)({},P,{values:x}),n,t)),P.change({values:x,range:L})}})})},a.prototype.cacheScale=function(n,t,s){var l=this.getScaleMeta(s);l&&l.scale.type===n.type?(pm(l.scale,n),l.scaleDef=t):(l={key:s,scale:n,scaleDef:t},this.scales.set(s,l));var f=this.getSyncKey(l);if(l.syncKey=f,this.removeFromSyncScales(s),f){var d=this.syncScales.get(f);d||(d=[],this.syncScales.set(f,d)),d.push(s)}},a.prototype.getScale=function(n){var t=this.getScaleMeta(n);if(!t){var s=(0,E.Z$)(n.split("-")),l=this.syncScales.get(s);l&&l.length&&(t=this.getScaleMeta(l[0]))}return t&&t.scale},a.prototype.deleteScale=function(n){var t=this.getScaleMeta(n);if(t){var s=t.syncKey,l=this.syncScales.get(s);if(l&&l.length){var f=l.indexOf(n);f!==-1&&l.splice(f,1)}}this.scales.delete(n)},a.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},a.prototype.removeFromSyncScales=function(n){var t=this;this.syncScales.forEach(function(s,l){var f=s.indexOf(n);if(f!==-1)return s.splice(f,1),s.length===0&&t.syncScales.delete(l),!1})},a.prototype.getSyncKey=function(n){var t=n.scale,s=n.scaleDef,l=t.field,f=(0,E.U2)(s,["sync"]);return f===!0?l:f===!1?void 0:f},a.prototype.getScaleMeta=function(n){return this.scales.get(n)},a}(),h=function(){function a(n,t,s,l){n===void 0&&(n=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),this.top=n,this.right=t,this.bottom=s,this.left=l}return a.instance=function(n,t,s,l){return n===void 0&&(n=0),t===void 0&&(t=0),s===void 0&&(s=0),l===void 0&&(l=0),new a(n,t,s,l)},a.prototype.max=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return this.top=Math.max(this.top,s),this.right=Math.max(this.right,l),this.bottom=Math.max(this.bottom,f),this.left=Math.max(this.left,d),this},a.prototype.shrink=function(n){var t=(0,M.CR)(n,4),s=t[0],l=t[1],f=t[2],d=t[3];return this.top+=s,this.right+=l,this.bottom+=f,this.left+=d,this},a.prototype.inc=function(n,t){var s=n.width,l=n.height;switch(t){case Se.TOP:case Se.TOP_LEFT:case Se.TOP_RIGHT:this.top+=l;break;case Se.RIGHT:case Se.RIGHT_TOP:case Se.RIGHT_BOTTOM:this.right+=s;break;case Se.BOTTOM:case Se.BOTTOM_LEFT:case Se.BOTTOM_RIGHT:this.bottom+=l;break;case Se.LEFT:case Se.LEFT_TOP:case Se.LEFT_BOTTOM:this.left+=s;break;default:break}return this},a.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},a.prototype.clone=function(){return new(a.bind.apply(a,(0,M.ev)([void 0],(0,M.CR)(this.getPadding()),!1)))},a}();function v(a){var n=a.padding;if(!_g(n))return new(h.bind.apply(h,(0,M.ev)([void 0],(0,M.CR)(Vf(n)),!1)));var t=a.viewBBox,s=new h,l=[],f=[],d=[];return(0,E.S6)(a.getComponents(),function(m){var x=m.type;x===ze.AXIS?l.push(m):[ze.LEGEND,ze.SLIDER,ze.SCROLLBAR].includes(x)?f.push(m):x!==ze.GRID&&x!==ze.TOOLTIP&&d.push(m)}),(0,E.S6)(l,function(m){var x=m.component,A=x.getLayoutBBox(),P=new ls(A.x,A.y,A.width,A.height),L=P.exceed(t);s.max(L)}),(0,E.S6)(f,function(m){var x=m.component,A=m.direction,P=x.getLayoutBBox(),L=x.get("padding"),B=new ls(P.x,P.y,P.width,P.height).expand(L);s.inc(B,A)}),(0,E.S6)(d,function(m){var x=m.component,A=m.direction,P=x.getLayoutBBox(),L=new ls(P.x,P.y,P.width,P.height);s.inc(L,A)}),s}function _(a,n,t){var s=t.instance();n.forEach(function(l){l.autoPadding=s.max(l.autoPadding.getPadding())})}var R=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,{visible:t.visible})||this;s.views=[],s.geometries=[],s.controllers=[],s.interactions={},s.limitInPlot=!1,s.options={data:[],animate:!0},s.usedControllers=Pv(),s.scalePool=new Op,s.layoutFunc=sf,s.isPreMouseInPlot=!1,s.isDataChanged=!1,s.isCoordinateChanged=!1,s.createdScaleKeys=new Map,s.onCanvasEvent=function(gt){var xt=gt.name;if(!xt.includes(":")){var Bt=s.createViewEvent(gt);s.doPlotEvent(Bt),s.emit(xt,Bt)}},s.onDelegateEvents=function(gt){var xt=gt.name;if(xt.includes(":")){var Bt=s.createViewEvent(gt);s.emit(xt,Bt)}};var l=t.id,f=l===void 0?(0,E.EL)("view"):l,d=t.parent,m=t.canvas,x=t.backgroundGroup,A=t.middleGroup,P=t.foregroundGroup,L=t.region,B=L===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:L,U=t.padding,Y=t.appendPadding,se=t.theme,be=t.options,Ee=t.limitInPlot,it=t.syncViewPadding;return s.parent=d,s.canvas=m,s.backgroundGroup=x,s.middleGroup=A,s.foregroundGroup=P,s.region=B,s.padding=U,s.appendPadding=Y,s.options=(0,M.pi)((0,M.pi)({},s.options),be),s.limitInPlot=Ee,s.id=f,s.syncViewPadding=it,s.themeObject=(0,E.Kn)(se)?(0,E.b$)({},od("default"),Mv(se)):od(se),s.init(),s}return n.prototype.setLayout=function(t){this.layoutFunc=t},n.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},n.prototype.render=function(t,s){t===void 0&&(t=!1),this.emit(Ue.BEFORE_RENDER,Ka.fromData(this,Ue.BEFORE_RENDER,s)),this.paint(t),this.emit(Ue.AFTER_RENDER,Ka.fromData(this,Ue.AFTER_RENDER,s)),this.visible===!1&&this.changeVisible(!1)},n.prototype.clear=function(){var t=this;this.emit(Ue.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var s=this.geometries,l=0;l<s.length;l++)s[l].clear(),s[l].container.remove(!0),s[l].labelsContainer.remove(!0);this.geometries=[];for(var f=this.controllers,l=0;l<f.length;l++)f[l].name==="annotation"?f[l].clear(!0):f[l].clear();this.createdScaleKeys.forEach(function(m,x){t.getRootView().scalePool.deleteScale(x)}),this.createdScaleKeys.clear();for(var d=this.views,l=0;l<d.length;l++)d[l].clear();this.emit(Ue.AFTER_CLEAR)},n.prototype.destroy=function(){this.emit(Ue.BEFORE_DESTROY);var t=this.interactions;(0,E.S6)(t,function(m){m&&m.destroy()}),this.clear();for(var s=this.controllers,l=0,f=s.length;l<f;l++){var d=s[l];d.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),a.prototype.destroy.call(this)},n.prototype.changeVisible=function(t){a.prototype.changeVisible.call(this,t);for(var s=this.geometries,l=0,f=s.length;l<f;l++){var d=s[l];d.changeVisible(t)}for(var m=this.controllers,l=0,f=m.length;l<f;l++){var x=m[l];x.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},n.prototype.data=function(t){return(0,E.t8)(this.options,"data",t),this.isDataChanged=!0,this},n.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},n.prototype.filter=function(t,s){return(0,E.mf)(s)?((0,E.t8)(this.options,["filters",t],s),this):(!s&&(0,E.U2)(this.options,["filters",t])&&delete this.options.filters[t],this)},n.prototype.axis=function(t,s){return(0,E.jn)(t)?(0,E.t8)(this.options,["axes"],t):(0,E.t8)(this.options,["axes",t],s),this},n.prototype.legend=function(t,s){return(0,E.jn)(t)?(0,E.t8)(this.options,["legends"],t):(0,E.HD)(t)?((0,E.t8)(this.options,["legends",t],s),(0,E.PO)(s)&&(s!=null&&s.selected)&&(0,E.t8)(this.options,["filters",t],function(l){var f;return(f=s==null?void 0:s.selected[l])!==null&&f!==void 0?f:!0})):(0,E.t8)(this.options,["legends"],t),this},n.prototype.scale=function(t,s){var l=this;return(0,E.HD)(t)?(0,E.t8)(this.options,["scales",t],s):(0,E.Kn)(t)&&(0,E.S6)(t,function(f,d){(0,E.t8)(l.options,["scales",d],f)}),this},n.prototype.tooltip=function(t){return(0,E.t8)(this.options,"tooltip",t),this},n.prototype.annotation=function(){return this.getController("annotation")},n.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},n.prototype.coordinate=function(t,s){return(0,E.HD)(t)?(0,E.t8)(this.options,"coordinate",{type:t,cfg:s}):(0,E.t8)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},n.prototype.coord=function(t,s){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,s)},n.prototype.facet=function(t,s){this.facetInstance&&this.facetInstance.destroy();var l=ii(t);if(!l)throw new Error("facet '".concat(t,"' is not exist!"));return this.facetInstance=new l(this,(0,M.pi)((0,M.pi)({},s),{type:t})),this},n.prototype.animate=function(t){return(0,E.t8)(this.options,"animate",t),this},n.prototype.updateOptions=function(t){return this.clear(),(0,E.CD)(this.options,t),this.views.forEach(function(s){return s.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},n.prototype.option=function(t,s){if(n.prototype[t])throw new Error(`Can't use built in variable name "`.concat(t,'", please change another one.'));return(0,E.t8)(this.options,t,s),this},n.prototype.theme=function(t){return this.themeObject=(0,E.Kn)(t)?(0,E.b$)({},this.themeObject,Mv(t)):od(t),this},n.prototype.interaction=function(t,s){var l=this.interactions[t];l&&l.destroy();var f=Hi(t,this,s);return f&&(f.init(),this.interactions[t]=f),this},n.prototype.removeInteraction=function(t){var s=this.interactions[t];s&&(s.destroy(),this.interactions[t]=void 0)},n.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(Ue.BEFORE_CHANGE_DATA,Ka.fromData(this,Ue.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var s=this.views,l=0,f=s.length;l<f;l++){var d=s[l];d.changeData(t)}this.emit(Ue.AFTER_CHANGE_DATA,Ka.fromData(this,Ue.AFTER_CHANGE_DATA,null))},n.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var s={data:this.options.data,scales:(0,E.d9)(this.options.scales),axes:(0,E.d9)(this.options.axes),coordinate:(0,E.d9)(this.coordinateController.getOption()),tooltip:(0,E.d9)(this.options.tooltip),legends:(0,E.d9)(this.options.legends),animate:this.options.animate,visible:this.visible},l=new n((0,M.pi)((0,M.pi)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:De.BG}),middleGroup:this.middleGroup.addGroup({zIndex:De.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:De.FORE}),theme:this.themeObject,padding:this.padding},t),{options:(0,M.pi)((0,M.pi)({},s),(0,E.U2)(t,"options",{}))}));return this.views.push(l),l},n.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},n.prototype.removeView=function(t){var s=(0,E.Od)(this.views,function(l){return l===t})[0];return s&&s.destroy(),s},n.prototype.getCoordinate=function(){return this.coordinateInstance},n.prototype.getTheme=function(){return this.themeObject},n.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},n.prototype.getYScales=function(){var t={},s=[];return this.geometries.forEach(function(l){var f=l.getYScale(),d=f.field;t[d]||(t[d]=!0,s.push(f))}),s},n.prototype.getScalesByDim=function(t){for(var s=this.geometries,l={},f=0,d=s.length;f<d;f++){var m=s[f],x=t==="x"?m.getXScale():m.getYScale();x&&!l[x.field]&&(l[x.field]=x)}return l},n.prototype.getScale=function(t,s){var l=s||this.getScaleKey(t);return this.getRootView().scalePool.getScale(l)},n.prototype.getScaleByField=function(t,s){return this.getScale(t,s)},n.prototype.getOptions=function(){return this.options},n.prototype.getData=function(){return this.filteredData},n.prototype.getOriginalData=function(){return this.options.data},n.prototype.getPadding=function(){return this.autoPadding.getPadding()},n.prototype.getGeometries=function(){return this.geometries},n.prototype.getElements=function(){return(0,E.u4)(this.geometries,function(t,s){return t.concat(s.getElements())},[])},n.prototype.getElementsBy=function(t){return this.getElements().filter(function(s){return t(s)})},n.prototype.getLayer=function(t){return t===ge.BG?this.backgroundGroup:t===ge.MID?this.middleGroup:t===ge.FORE?this.foregroundGroup:this.foregroundGroup},n.prototype.isPointInPlot=function(t){return cm(this.getCoordinate(),t)},n.prototype.getLegendAttributes=function(){return(0,E.xH)(this.geometries.map(function(t){return t.getGroupAttributes()}))},n.prototype.getGroupScales=function(){var t=this.geometries.map(function(s){return s.getGroupScales()});return Ef((0,E.xH)(t))},n.prototype.getCanvas=function(){return this.getRootView().canvas},n.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},n.prototype.getXY=function(t){var s=this.getCoordinate(),l=this.getScalesByDim("x"),f=this.getScalesByDim("y"),d,m;if((0,E.S6)(t,function(x,A){l[A]&&(d=l[A].scale(x)),f[A]&&(m=f[A].scale(x))}),!(0,E.UM)(d)&&!(0,E.UM)(m))return s.convert({x:d,y:m})},n.prototype.getController=function(t){return(0,E.sE)(this.controllers,function(s){return s.name===t})},n.prototype.showTooltip=function(t){var s=this.getController("tooltip");return s&&s.showTooltip(t),this},n.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},n.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},n.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},n.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},n.prototype.getTooltipItems=function(t){var s=this.getController("tooltip");return s?s.getTooltipItems(t):[]},n.prototype.getSnapRecords=function(t){for(var s=this.geometries,l=[],f=0,d=s.length;f<d;f++){var m=s[f],x=m.dataArray;m.sort(x);for(var A=void 0,P=0,L=x.length;P<L;P++){var B=x[P];A=M0(t,B,m),A&&l.push(A)}}for(var U=this.views,f=0,d=U.length;f<d;f++){var Y=U[f],se=Y.getSnapRecords(t);l=l.concat(se)}return l},n.prototype.getComponents=function(){for(var t=[],s=this.controllers,l=0,f=s.length;l<f;l++){var d=s[l];t=t.concat(d.getComponents())}return t},n.prototype.filterData=function(t){var s=this.options.filters;return(0,E.dp)(s)===0?t:(0,E.hX)(t,function(l,f){var d=Object.keys(s);return d.every(function(m){var x=s[m];return x(l[m],l,f)})})},n.prototype.filterFieldData=function(t,s){var l=this.options.filters,f=(0,E.U2)(l,t);return(0,E.o8)(f)?s:s.filter(function(d,m){return f(d[t],d,m)})},n.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),s=t.start,l=t.end,f=this.coordinateBBox.bl,d=this.coordinateBBox.tr;if((0,E.Xy)(s,f)&&(0,E.Xy)(l,d)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(f,d)},n.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(Ue.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(Ue.AFTER_PAINT),this.isDataChanged=!1},n.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,E.U2)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var s=this.viewBBox,l=s.x,f=s.y,d=s.width,m=s.height;this.backgroundStyleRectShape.attr({fill:t,x:l,y:f,width:d,height:m})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},n.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=v(this).shrink(Vf(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();var s=this.controllers.find(function(x){return x.name==="tooltip"});s.update();for(var l=this.views,f=0,d=l.length;f<d;f++){var m=l[f];m.renderPaddingRecursive(t)}},n.prototype.renderLayoutRecursive=function(t){var s=this.syncViewPadding===!0?_:(0,E.mf)(this.syncViewPadding)?this.syncViewPadding:void 0;s&&(s(this,this.views,h),this.views.forEach(function(x){x.coordinateBBox=x.viewBBox.shrink(x.autoPadding.getPadding()),x.adjustCoordinate()})),this.doLayout();for(var l=this.views,f=0,d=l.length;f<d;f++){var m=l[f];m.renderLayoutRecursive(t)}},n.prototype.renderPaintRecursive=function(t){var s=this.middleGroup;if(this.limitInPlot){var l=Av(this.coordinateInstance),f=l.type,d=l.attrs;s.setClip({type:f,attrs:d})}else s.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var m=this.views,x=0,A=m.length;x<A;x++){var P=m[x];P.renderPaintRecursive(t)}},n.prototype.createScale=function(t,s,l,f){var d=(0,E.U2)(this.options.scales,[t]),m=(0,M.pi)((0,M.pi)({},d),l);return this.parent?this.parent.createScale(t,s,m,f):this.scalePool.createScale(t,s,m,f)},n.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var s=this.views,l=0,f=s.length;l<f;l++){var d=s[l];d.renderDataRecursive(t)}},n.prototype.calculateViewBBox=function(){var t,s,l,f;if(this.parent){var d=this.parent.coordinateBBox;t=d.x,s=d.y,l=d.width,f=d.height}else t=0,s=0,l=this.canvas.get("width"),f=this.canvas.get("height");var m=this.region,x=m.start,A=m.end,P=new ls(t+l*x.x,s+f*x.y,l*(A.x-x.x),f*(A.y-x.y));(!this.viewBBox||!this.viewBBox.isEqual(P))&&(this.viewBBox=new ls(t+l*x.x,s+f*x.y,l*(A.x-x.x),f*(A.y-x.y))),this.coordinateBBox=this.viewBBox},n.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},n.prototype.initComponentController=function(){for(var t=this.usedControllers,s=0,l=t.length;s<l;s++){var f=t[s],d=Zu(f);d&&this.controllers.push(new d(this))}},n.prototype.createViewEvent=function(t){var s=t.shape,l=t.name,f=s?s.get("origin"):null,d=new Ka(this,t,f);return d.type=l,d},n.prototype.doPlotEvent=function(t){var s=t.type,l=t.x,f=t.y,d={x:l,y:f},m=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(m.includes(s)){var x=this.isPointInPlot(d),A=t.clone();if(x){var P="plot:".concat(s);A.type=P,this.emit(P,A),(s==="mouseleave"||s==="touchend")&&(this.isPreMouseInPlot=!1)}s==="mousemove"||s==="touchmove"?(this.isPreMouseInPlot&&!x?(s==="mousemove"&&(A.type=Je.MOUSE_LEAVE,this.emit(Je.MOUSE_LEAVE,A)),A.type=Je.LEAVE,this.emit(Je.LEAVE,A)):!this.isPreMouseInPlot&&x&&(s==="mousemove"&&(A.type=Je.MOUSE_ENTER,this.emit(Je.MOUSE_ENTER,A)),A.type=Je.ENTER,this.emit(Je.ENTER,A)),this.isPreMouseInPlot=x):(s==="mouseleave"||s==="touchend")&&this.isPreMouseInPlot&&(s==="mouseleave"&&(A.type=Je.MOUSE_LEAVE,this.emit(Je.MOUSE_LEAVE,A)),A.type=Je.LEAVE,this.emit(Je.LEAVE,A),this.isPreMouseInPlot=!1)}},n.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},n.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var s=this.getCoordinate(),l=(0,E.U2)(this.options,"scales",{}),f=this.geometries,d=0,m=f.length;d<m;d++){var x=f[d];x.scales=this.getGeometryScales();var A={coordinate:s,scaleDefs:l,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?x.update(A):x.init(A)}this.adjustScales()},n.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),s=this.getGroupedFields(),l=this.getOptions(),f=l.data,d=l.scales,m=d===void 0?{}:d,x=this.filteredData,A=0,P=t.length;A<P;A++){var L=t[A],B=m[L],U=this.getScaleKey(L);this.createScale(L,s.includes(L)?f:x,B,U),this.createdScaleKeys.set(U,!0)}},n.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},n.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),s={},l=0;l<t.length;l++){var f=t[l];s[f]=this.getScaleByField(f)}return s},n.prototype.getScaleFields=function(){for(var t=[],s=new Map,l=this.geometries,f=0;f<l.length;f++){var d=l[f],m=d.getScaleFields();Ef(m,t,s)}return t},n.prototype.getGroupedFields=function(){for(var t=[],s=new Map,l=this.geometries,f=0;f<l.length;f++){var d=l[f],m=d.getGroupFields();Ef(m,t,s)}return t},n.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},n.prototype.adjustCategoryScaleRange=function(){var t=this,s=(0,M.ev)([this.getXScale()],(0,M.CR)(this.getYScales()),!1).filter(function(d){return!!d}),l=this.getCoordinate(),f=this.options.scales;(0,E.S6)(s,function(d){var m=d.field,x=d.values,A=d.isCategory,P=d.isIdentity;(A||P)&&x&&!(0,E.U2)(f,[m,"range"])&&(d.range=Gd(d,l,t.theme))})},n.prototype.initComponents=function(t){for(var s=this.controllers,l=0;l<s.length;l++){var f=s[l];t?f.update():(f.clear(),f.render())}},n.prototype.doLayout=function(){this.layoutFunc(this)},n.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,s=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,s)},n.prototype.paintGeometries=function(t){for(var s=this.options.animate,l=this.getCoordinate(),f={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},d=this.geometries,m=0;m<d.length;m++){var x=d[m];x.coordinate=l,x.canvasRegion=f,s||x.animate(!1),x.paint(t)}},n.prototype.renderComponents=function(t){for(var s=this.getComponents(),l=0;l<s.length;l++){var f=s[l];f.component.render()}},n.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},n.prototype.initOptions=function(){var t=this,s=this.options,l=s.geometries,f=l===void 0?[]:l,d=s.interactions,m=d===void 0?[]:d,x=s.views,A=x===void 0?[]:x,P=s.annotations,L=P===void 0?[]:P,B=s.coordinate,U=s.events,Y=s.facets;this.coordinateController?B&&this.coordinateController.update(B):this.coordinateController=new wc(B);for(var se=0;se<f.length;se++){var be=f[se];this.createGeometry(be)}for(var Ee=0;Ee<m.length;Ee++){var it=m[Ee],gt=it.type,xt=it.cfg;this.interaction(gt,xt)}for(var Bt=0;Bt<A.length;Bt++){var _r=A[Bt];this.createView(_r)}for(var Or=this.getController("annotation"),Gr=0;Gr<L.length;Gr++){var mn=L[Gr];Or.annotation(mn)}U&&(0,E.S6)(U,function(cn,Nn){t.on(Nn,cn)}),Y&&(0,E.S6)(Y,function(cn){var Nn=cn.type,hi=(0,M._T)(cn,["type"]);t.facet(Nn,hi)})},n.prototype.createGeometry=function(t){var s=t.type,l=t.cfg,f=l===void 0?{}:l;if(this[s]){var d=this[s](f);(0,E.S6)(t,function(m,x){(0,E.mf)(d[x])&&d[x](m)})}},n.prototype.getScaleKey=function(t){return"".concat(this.id,"-").concat(t)},n}(me);function F(a,n){R.prototype[a.toLowerCase()]=function(t){t===void 0&&(t={});var s=(0,M.pi)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),l=new n(s);return this.geometries.push(l),l}}var z=R,$=function(a){(0,M.ZT)(n,a);function n(t){var s=this,l=t.container,f=t.width,d=t.height,m=t.autoFit,x=m===void 0?!1:m,A=t.padding,P=t.appendPadding,L=t.renderer,B=L===void 0?"canvas":L,U=t.pixelRatio,Y=t.localRefresh,se=Y===void 0?!0:Y,be=t.visible,Ee=be===void 0?!0:be,it=t.supportCSSTransform,gt=it===void 0?!1:it,xt=t.defaultInteractions,Bt=xt===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:xt,_r=t.options,Or=t.limitInPlot,Gr=t.theme,mn=t.syncViewPadding,cn=(0,E.HD)(l)?document.getElementById(l):l,Nn=(0,Ge.Z)('<div style="position:relative;"></div>');cn.appendChild(Nn);var hi=Ae(cn,x,f,d),Wi=qe(B),bi=new Wi.Canvas((0,M.pi)({container:Nn,pixelRatio:U,localRefresh:se,supportCSSTransform:gt},hi));return s=a.call(this,{parent:null,canvas:bi,backgroundGroup:bi.addGroup({zIndex:De.BG}),middleGroup:bi.addGroup({zIndex:De.MID}),foregroundGroup:bi.addGroup({zIndex:De.FORE}),padding:A,appendPadding:P,visible:Ee,options:_r,limitInPlot:Or,theme:Gr,syncViewPadding:mn})||this,s.onResize=(0,E.Ds)(function(){s.forceFit()},300),s.ele=cn,s.canvas=bi,s.width=hi.width,s.height=hi.height,s.autoFit=x,s.localRefresh=se,s.renderer=B,s.wrapperElement=Nn,s.updateCanvasStyle(),s.bindAutoFit(),s.initDefaultInteractions(Bt),s}return n.prototype.initDefaultInteractions=function(t){var s=this;(0,E.S6)(t,function(l){s.interaction(l)})},n.prototype.aria=function(t){var s="aria-label";t===!1?this.ele.removeAttribute(s):this.ele.setAttribute(s,t.label)},n.prototype.changeSize=function(t,s){return this.width===t&&this.height===s?this:(this.emit(Ue.BEFORE_CHANGE_SIZE),this.width=t,this.height=s,this.canvas.changeSize(t,s),this.render(!0),this.emit(Ue.AFTER_CHANGE_SIZE),this)},n.prototype.clear=function(){a.prototype.clear.call(this),this.aria(!1)},n.prototype.destroy=function(){a.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),Le(this.wrapperElement),this.wrapperElement=null},n.prototype.changeVisible=function(t){return a.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},n.prototype.forceFit=function(){if(!this.destroyed){var t=Ae(this.ele,!0,this.width,this.height),s=t.width,l=t.height;this.changeSize(s,l)}},n.prototype.updateCanvasStyle=function(){(0,oe.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},n.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},n.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},n}(z),ue=$,Pe=function(){function a(n){this.visible=!0,this.components=[],this.view=n}return a.prototype.clear=function(n){(0,E.S6)(this.components,function(t){t.component.destroy()}),this.components=[]},a.prototype.destroy=function(){this.clear()},a.prototype.getComponents=function(){return this.components},a.prototype.changeVisible=function(n){this.visible!==n&&(this.components.forEach(function(t){n?t.component.show():t.component.hide()}),this.visible=n)},a}();function Qe(a){for(var n=[],t=function(l){var f=a[l],d=(0,E.sE)(n,function(m){return m.color===f.color&&m.name===f.name&&m.value===f.value&&m.title===f.title});d||n.push(f)},s=0;s<a.length;s++)t(s);return n}var ct=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(n.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},n.prototype.render=function(){},n.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var s=this.view,l=this.getTooltipItems(t);if(!l.length){this.hideTooltip();return}var f=this.getTitle(l),d={x:l[0].x,y:l[0].y};s.emit("tooltip:show",Ka.fromData(s,"tooltip:show",(0,M.pi)({items:l,title:f},t)));var m=this.getTooltipCfg(),x=m.follow,A=m.showMarkers,P=m.showCrosshairs,L=m.showContent,B=m.marker,U=this.items,Y=this.title;if(!(0,E.Xy)(Y,f)||!(0,E.Xy)(U,l)?(s.emit("tooltip:change",Ka.fromData(s,"tooltip:change",(0,M.pi)({items:l,title:f},t))),((0,E.mf)(L)?L(l):L)&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,E.CD)({},m,{items:this.getItemsAfterProcess(l),title:f},x?t:{})),this.tooltip.show()),A&&this.renderTooltipMarkers(l,B)):(this.tooltip&&x&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=l,this.title=f,P){var se=(0,E.U2)(m,["crosshairs","follow"],!1);this.renderCrosshairs(se?t:d,m)}}},n.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var s=this.tooltipMarkersGroup;s&&s.hide();var l=this.xCrosshair,f=this.yCrosshair;l&&l.hide(),f&&f.hide();var d=this.tooltip;d&&d.hide(),this.view.emit("tooltip:hide",Ka.fromData(this.view,"tooltip:hide",{})),this.point=null},n.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},n.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},n.prototype.isTooltipLocked=function(){return this.isLocked},n.prototype.clear=function(){var t=this,s=t.tooltip,l=t.xCrosshair,f=t.yCrosshair,d=t.tooltipMarkersGroup;s&&(s.hide(),s.clear()),l&&l.clear(),f&&f.clear(),d&&d.clear(),s!=null&&s.get("customContent")&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},n.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},n.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},n.prototype.changeVisible=function(t){if(this.visible!==t){var s=this,l=s.tooltip,f=s.tooltipMarkersGroup,d=s.xCrosshair,m=s.yCrosshair;t?(l&&l.show(),f&&f.show(),d&&d.show(),m&&m.show()):(l&&l.hide(),f&&f.hide(),d&&d.hide(),m&&m.hide()),this.visible=t}},n.prototype.getTooltipItems=function(t){var s,l,f,d,m,x,A=this.findItemsFromView(this.view,t);if(A.length){A=(0,E.xH)(A);try{for(var P=(0,M.XA)(A),L=P.next();!L.done;L=P.next()){var B=L.value;try{for(var U=(f=void 0,(0,M.XA)(B)),Y=U.next();!Y.done;Y=U.next()){var se=Y.value,be=se.mappingData,Ee=be.x,it=be.y;se.x=(0,E.kJ)(Ee)?Ee[Ee.length-1]:Ee,se.y=(0,E.kJ)(it)?it[it.length-1]:it}}catch(cn){f={error:cn}}finally{try{Y&&!Y.done&&(d=U.return)&&d.call(U)}finally{if(f)throw f.error}}}}catch(cn){s={error:cn}}finally{try{L&&!L.done&&(l=P.return)&&l.call(P)}finally{if(s)throw s.error}}var gt=this.getTooltipCfg().shared;if(gt===!1&&A.length>1){var xt=A[0],Bt=Math.abs(t.y-xt[0].y);try{for(var _r=(0,M.XA)(A),Or=_r.next();!Or.done;Or=_r.next()){var Gr=Or.value,mn=Math.abs(t.y-Gr[0].y);mn<=Bt&&(xt=Gr,Bt=mn)}}catch(cn){m={error:cn}}finally{try{Or&&!Or.done&&(x=_r.return)&&x.call(_r)}finally{if(m)throw m.error}}A=[xt]}return Qe((0,E.xH)(A))}return[]},n.prototype.layout=function(){},n.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},n.prototype.isCursorEntered=function(t){if(this.tooltip){var s=this.tooltip.getContainer(),l=this.tooltip.get("capture");if(s&&l){var f=s.getBoundingClientRect(),d=f.x,m=f.y,x=f.width,A=f.height;return new ls(d,m,x,A).isPointIn(t)}}return!1},n.prototype.getTooltipCfg=function(){var t=this.view,s=t.getOptions().tooltip,l=this.processCustomContent(s),f=t.getTheme(),d=(0,E.U2)(f,["components","tooltip"],{}),m=(0,E.U2)(l,"enterable",d.enterable);return(0,E.b$)({},d,l,{capture:!!(m||this.isLocked)})},n.prototype.processCustomContent=function(t){if((0,E.jn)(t)||!(0,E.U2)(t,"customContent"))return t;var s=t.customContent,l=function(f,d){var m=s(f,d)||"";return(0,E.HD)(m)?'<div class="g2-tooltip">'+m+"</div>":m};return(0,M.pi)((0,M.pi)({},t),{customContent:l})},n.prototype.getTitle=function(t){var s=t[0].title||t[0].name;return this.title=s,s},n.prototype.renderTooltip=function(){var t=this.view.getCanvas(),s={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},l=this.getTooltipCfg(),f=new jd((0,M.pi)((0,M.pi)({parent:t.get("el").parentNode,region:s},l),{visible:!1,crosshairs:null}));f.init(),this.tooltip=f},n.prototype.renderTooltipMarkers=function(t,s){var l,f,d=this.getTooltipMarkersGroup(),m=this.view.getRootView(),x=m.limitInPlot;try{for(var A=(0,M.XA)(t),P=A.next();!P.done;P=A.next()){var L=P.value,B=L.x,U=L.y;if(x||d!=null&&d.getClip()){var Y=Av(m.getCoordinate()),se=Y.type,be=Y.attrs;d==null||d.setClip({type:se,attrs:be})}else d==null||d.setClip(void 0);var Ee=this.view.getTheme(),it=(0,E.U2)(Ee,["components","tooltip","marker"],{}),gt=(0,M.pi)((0,M.pi)({fill:L.color,symbol:"circle",shadowColor:L.color},(0,E.mf)(s)?(0,M.pi)((0,M.pi)({},it),s(L)):s),{x:B,y:U});d.addShape("marker",{attrs:gt})}}catch(xt){l={error:xt}}finally{try{P&&!P.done&&(f=A.return)&&f.call(A)}finally{if(l)throw l.error}}},n.prototype.renderCrosshairs=function(t,s){var l=(0,E.U2)(s,["crosshairs","type"],"x");l==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,s)):l==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,s)):l==="xy"&&(this.renderXCrosshairs(t,s),this.renderYCrosshairs(t,s))},n.prototype.renderXCrosshairs=function(t,s){var l=this.getViewWithGeometry(this.view).getCoordinate(),f,d;if(l.isRect)l.isTransposed?(f={x:l.start.x,y:t.y},d={x:l.end.x,y:t.y}):(f={x:t.x,y:l.end.y},d={x:t.x,y:l.start.y});else{var m=Wd(l,t),x=l.getCenter(),A=l.getRadius();d=zs(x.x,x.y,A,m),f=x}var P=(0,E.b$)({start:f,end:d,container:this.getTooltipCrosshairsGroup()},(0,E.U2)(s,"crosshairs",{}),this.getCrosshairsText("x",t,s));delete P.type;var L=this.xCrosshair;L?L.update(P):(L=new Ns(P),L.init()),L.render(),L.show(),this.xCrosshair=L},n.prototype.renderYCrosshairs=function(t,s){var l=this.getViewWithGeometry(this.view).getCoordinate(),f,d;if(l.isRect){var m=void 0,x=void 0;l.isTransposed?(m={x:t.x,y:l.end.y},x={x:t.x,y:l.start.y}):(m={x:l.start.x,y:t.y},x={x:l.end.x,y:t.y}),f={start:m,end:x},d="Line"}else f={center:l.getCenter(),radius:$h(l,t),startAngle:l.startAngle,endAngle:l.endAngle},d="Circle";f=(0,E.b$)({container:this.getTooltipCrosshairsGroup()},f,(0,E.U2)(s,"crosshairs",{}),this.getCrosshairsText("y",t,s)),delete f.type;var A=this.yCrosshair;A?l.isRect&&A.get("type")==="circle"||!l.isRect&&A.get("type")==="line"?(A=new Q[d](f),A.init()):A.update(f):(A=new Q[d](f),A.init()),A.render(),A.show(),this.yCrosshair=A},n.prototype.getCrosshairsText=function(t,s,l){var f=(0,E.U2)(l,["crosshairs","text"]),d=(0,E.U2)(l,["crosshairs","follow"]),m=this.items;if(f){var x=this.getViewWithGeometry(this.view),A=m[0],P=x.getXScale(),L=x.getYScales()[0],B=void 0,U=void 0;if(d){var Y=this.view.getCoordinate().invert(s);B=P.invert(Y.x),U=L.invert(Y.y)}else B=A.data[P.field],U=A.data[L.field];var se=t==="x"?B:U;return(0,E.mf)(f)?f=f(t,se,m,s):f.content=se,{text:f}}},n.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},n.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},n.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},n.prototype.findItemsFromView=function(t,s){var l,f;if(t.getOptions().tooltip===!1)return[];var d=this.getTooltipCfg(),m=mm(t,s,d);try{for(var x=(0,M.XA)(t.views),A=x.next();!A.done;A=x.next()){var P=A.value;m=m.concat(this.findItemsFromView(P,s))}}catch(L){l={error:L}}finally{try{A&&!A.done&&(f=x.return)&&f.call(x)}finally{if(l)throw l.error}}return m},n.prototype.getViewWithGeometry=function(t){var s=this;return t.geometries.length?t:(0,E.sE)(t.views,function(l){return s.getViewWithGeometry(l)})},n.prototype.getItemsAfterProcess=function(t){var s=this.getTooltipCfg().customItems,l=s||function(f){return f};return l(t)},n}(Pe),mt=ct,Lt={};function Ut(a){return Lt[a.toLowerCase()]}function ur(a,n){Lt[a.toLowerCase()]=n}var fr={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},Lr={interval:function(a){return{enter:{animation:a.isRect?a.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:a.isPolar&&a.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},Rr={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(a){var n;return a.isRect?n=a.isTransposed?"grow-in-x":"grow-in-y":(n="grow-in-xy",a.isPolar&&a.isTransposed&&(n="wave-in")),{animation:n}},schema:function(a){var n;return a.isRect?n=a.isTransposed?"grow-in-x":"grow-in-y":n="grow-in-xy",{animation:n}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Yr(a,n){return{delay:(0,E.mf)(a.delay)?a.delay(n):a.delay,easing:(0,E.mf)(a.easing)?a.easing(n):a.easing,duration:(0,E.mf)(a.duration)?a.duration(n):a.duration,callback:a.callback,repeat:a.repeat}}function nn(a,n,t){var s=Lr[a];return s&&((0,E.mf)(s)&&(s=s(n)),s=(0,E.b$)({},fr,s),t)?s[t]:s}function gn(a,n,t){var s=(0,E.U2)(a.get("origin"),"data",_e),l=n.animation,f=Yr(n,s);if(l){var d=Ut(l);d&&d(a,f,t)}else a.animate(t.toAttrs,f)}function wn(a,n,t,s,l){if(Rr[t]){var f=Rr[t](s),d=Ut((0,E.U2)(f,"animation",""));if(d){var m=(0,M.pi)((0,M.pi)((0,M.pi)({},fr.appear),f),n);a.stopAnimate(),d(a,m,{coordinate:s,minYPoint:l,toAttrs:null})}}}var Dn="element-background",pi=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;s.labelShape=[],s.states=[];var l=t.shapeFactory,f=t.container,d=t.offscreenGroup,m=t.elementIndex,x=t.visible,A=x===void 0?!0:x;return s.shapeFactory=l,s.container=f,s.offscreenGroup=d,s.visible=A,s.elementIndex=m,s}return n.prototype.draw=function(t,s){s===void 0&&(s=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,s),this.visible===!1&&this.changeVisible(!1)},n.prototype.update=function(t){var s=this,l=s.shapeFactory,f=s.shape;if(f){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(f,t);var d=this.getOffscreenGroup(),m=l.drawShape(this.shapeType,t,d);m.cfg.data=this.data,m.cfg.origin=t,m.cfg.element=this,this.syncShapeStyle(f,m,this.getStates(),this.getAnimateCfg("update"))}},n.prototype.destroy=function(){var t=this,s=t.shapeFactory,l=t.shape;if(l){var f=this.getAnimateCfg("leave");f?gn(l,f,{coordinate:s.coordinate,toAttrs:(0,M.pi)({},l.attr())}):l.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,a.prototype.destroy.call(this)},n.prototype.changeVisible=function(t){a.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(s){s.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(s){s.hide()}))},n.prototype.setState=function(t,s){var l=this,f=l.states,d=l.shapeFactory,m=l.model,x=l.shape,A=l.shapeType,P=f.indexOf(t);if(s){if(P>-1)return;f.push(t),(t==="active"||t==="selected")&&(x==null||x.toFront())}else{if(P===-1)return;if(f.splice(P,1),t==="active"||t==="selected"){var L=this.geometry,B=L.sortZIndex,U=L.zIndexReversed,Y=U?this.geometry.elements.length-this.elementIndex:this.elementIndex;B?x.setZIndex(Y):x.set("zIndex",Y)}}var se=d.drawShape(A,m,this.getOffscreenGroup());f.length?this.syncShapeStyle(x,se,f,null):this.syncShapeStyle(x,se,["reset"],null),se.remove(!0);var be={state:t,stateStatus:s,element:this,target:this.container};this.container.emit("statechange",be),zi(this.shape,"statechange",be)},n.prototype.clearStates=function(){var t=this,s=this.states;(0,E.S6)(s,function(l){t.setState(l,!1)}),this.states=[]},n.prototype.hasState=function(t){return this.states.includes(t)},n.prototype.getStates=function(){return this.states},n.prototype.getData=function(){return this.data},n.prototype.getModel=function(){return this.model},n.prototype.getBBox=function(){var t=this,s=t.shape,l=t.labelShape,f={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return s&&(f=s.getCanvasBBox()),l&&l.forEach(function(d){var m=d.getCanvasBBox();f.x=Math.min(m.x,f.x),f.y=Math.min(m.y,f.y),f.minX=Math.min(m.minX,f.minX),f.minY=Math.min(m.minY,f.minY),f.maxX=Math.max(m.maxX,f.maxX),f.maxY=Math.max(m.maxY,f.maxY)}),f.width=f.maxX-f.minX,f.height=f.maxY-f.minY,f},n.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,s=t.shapeType,l=t.geometry,f=t.shapeFactory,d=l.stateOption,m=f.defaultShapeType,x=f.theme[s]||f.theme[m];this.statesStyle=(0,E.b$)({},x,d)}return this.statesStyle},n.prototype.getStateStyle=function(t,s){var l=this.getStatesStyle(),f=(0,E.U2)(l,[t,"style"],{}),d=f[s]||f;return(0,E.mf)(d)?d(this):d},n.prototype.getAnimateCfg=function(t){var s=this,l=this.animate;if(l){var f=l[t];return f&&(0,M.pi)((0,M.pi)({},f),{callback:function(){var d;(0,E.mf)(f.callback)&&f.callback(),(d=s.geometry)===null||d===void 0||d.emit(at.AFTER_DRAW_ANIMATE)}})}return null},n.prototype.drawShape=function(t,s){var l;s===void 0&&(s=!1);var f=this,d=f.shapeFactory,m=f.container,x=f.shapeType;if(this.shape=d.drawShape(x,t,m),this.shape){this.setShapeInfo(this.shape,t);var A=this.shape.cfg.name;A?(0,E.HD)(A)&&(this.shape.cfg.name=["element",A]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var P=s?"enter":"appear",L=this.getAnimateCfg(P);L&&((l=this.geometry)===null||l===void 0||l.emit(at.BEFORE_DRAW_ANIMATE),gn(this.shape,L,{coordinate:d.coordinate,toAttrs:(0,M.pi)({},this.shape.attr())}))}},n.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},n.prototype.setShapeInfo=function(t,s){var l=this;if(t.cfg.origin=s,t.cfg.element=this,t.isGroup()){var f=t.get("children");f.forEach(function(d){l.setShapeInfo(d,s)})}},n.prototype.syncShapeStyle=function(t,s,l,f,d){var m=this,x;if(l===void 0&&(l=[]),d===void 0&&(d=0),!(!t||!s)){var A=t.get("clipShape"),P=s.get("clipShape");if(this.syncShapeStyle(A,P,l,f),t.isGroup())for(var L=t.get("children"),B=s.get("children"),U=0;U<L.length;U++)this.syncShapeStyle(L[U],B[U],l,f,d+U);else{if(!(0,E.xb)(l)&&!(0,E.Xy)(l,["reset"])){var Y=t.get("name");(0,E.kJ)(Y)&&(Y=Y[1]),(0,E.S6)(l,function(be){if(s.get("name")!==Dn){var Ee=m.getStateStyle(be,Y||d);s.attr(Ee)}})}var se=Bc(t,s);this.animate?f?((x=this.geometry)===null||x===void 0||x.emit(at.BEFORE_DRAW_ANIMATE),gn(t,f,{coordinate:this.shapeFactory.coordinate,toAttrs:se,shapeModel:this.model})):(0,E.xb)(l)?t.attr(se):(t.stopAnimate(),t.animate(se,{duration:300})):t.attr(se)}}},n.prototype.getShapeType=function(t){var s=(0,E.U2)(t,"shape");return(0,E.kJ)(s)?s[0]:s},n}(me),wi=pi,qi={},Di={};function oa(a){return qi[a.toLowerCase()]}function Oi(a,n){qi[a.toLowerCase()]=n}function ao(a){return Di[a.toLowerCase()]}function Ki(a,n){Di[a.toLowerCase()]=n}var ji={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(a,n){var t=this.getShape(a);return t.getPoints?t.getPoints(n):this.getDefaultPoints(n)},getShape:function(a){var n=this[a]||this[this.defaultShapeType];return n.coordinate=this.coordinate,n},getDefaultPoints:function(){return[]},getDefaultStyle:function(a){return(0,E.U2)(a,[this.defaultShapeType,"default","style"],{})},getMarker:function(a,n){var t=this.getShape(a);if(!t.getMarker){var s=this.defaultShapeType;t=this.getShape(s)}var l=this.theme,f=(0,E.U2)(l,[a,"default"],{}),d=t.getMarker(n);return(0,E.b$)({},f,d)},drawShape:function(a,n,t){var s=this.getShape(a);return s.draw(n,t)}},go={coordinate:null,parsePath:function(a){var n=this.coordinate,t=(0,Tp.tr)(a);return n.isPolar?t=Li(n,t):t=io(n,t),t},parsePoint:function(a){var n=this.coordinate;return n.convert(a)},parsePoints:function(a){var n=this.coordinate;return a.map(function(t){return n.convert(t)})},draw:function(a,n){}},Ga={};function oo(a,n){var t=(0,E.jC)(a),s=(0,M.pi)((0,M.pi)((0,M.pi)({},ji),n),{geometryType:a});return Ga[t]=s,s}function yi(a,n,t){var s=(0,E.jC)(a),l=Ga[s],f=(0,M.pi)((0,M.pi)({},go),t);return l[n]=f,f}function Bo(a){var n=(0,E.jC)(a);return Ga[n]}function es(a,n,t){var s,l;if(t===void 0&&(t={}),!n)return[a];var f=(0,E.Ms)(a,n),d=[];if(n.length===1&&t[n[0]]){var m=t[n[0]];try{for(var x=(0,M.XA)(m),A=x.next();!A.done;A=x.next()){var P=A.value,L=f["_".concat(P)];L&&d.push(L)}}catch(Y){s={error:Y}}finally{try{A&&!A.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}}else for(var B in f)if(f.hasOwnProperty(B)){var U=f[B];d.push(U)}return d}function Xs(a,n){return(0,E.G)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!(0,E.Xy)(a[t],n[t])})}function ps(a){return(0,E.kJ)(a)?a:a.split("*")}function ks(a,n){for(var t=[],s=[],l=[],f=new Map,d=0;d<n.length;d++){var m=n[d];a[m]?s.push(m):t.push(m),f.set(m,!0)}return Object.keys(a).forEach(function(x){f.has(x)||l.push(x)}),{added:t,updated:s,removed:l}}var su=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;s.type="base",s.attributes={},s.elements=[],s.elementsMap={},s.animateOption=!0,s.attributeOption={},s.lastElementsMap={},s.generatePoints=!1,s.beforeMappingData=null,s.adjusts={},s.idFields=[],s.hasSorted=!1,s.isCoordinateChanged=!1;var l=t.container,f=t.labelsContainer,d=t.coordinate,m=t.data,x=t.sortable,A=x===void 0?!1:x,P=t.visible,L=P===void 0?!0:P,B=t.theme,U=t.scales,Y=U===void 0?{}:U,se=t.scaleDefs,be=se===void 0?{}:se,Ee=t.intervalPadding,it=t.dodgePadding,gt=t.maxColumnWidth,xt=t.minColumnWidth,Bt=t.columnWidthRatio,_r=t.roseWidthRatio,Or=t.multiplePieWidthRatio,Gr=t.zIndexReversed,mn=t.sortZIndex,cn=t.useDeferredLabel;return s.container=l,s.labelsContainer=f,s.coordinate=d,s.data=m,s.sortable=A,s.visible=L,s.userTheme=B,s.scales=Y,s.scaleDefs=be,s.intervalPadding=Ee,s.dodgePadding=it,s.maxColumnWidth=gt,s.minColumnWidth=xt,s.columnWidthRatio=Bt,s.roseWidthRatio=_r,s.multiplePieWidthRatio=Or,s.zIndexReversed=Gr,s.sortZIndex=mn,s.useDeferredLabel=cn?typeof cn=="number"?cn:1/0:null,s}return n.prototype.position=function(t){var s=t;(0,E.PO)(t)||(s={fields:ps(t)});var l=(0,E.U2)(s,"fields");return l.length===1&&(l.unshift("1"),(0,E.t8)(s,"fields",l)),(0,E.t8)(this.attributeOption,"position",s),this},n.prototype.color=function(t,s){return this.createAttrOption("color",t,s),this},n.prototype.shape=function(t,s){return this.createAttrOption("shape",t,s),this},n.prototype.size=function(t,s){return this.createAttrOption("size",t,s),this},n.prototype.adjust=function(t){var s=t;return((0,E.HD)(t)||(0,E.PO)(t))&&(s=[t]),(0,E.S6)(s,function(l,f){(0,E.Kn)(l)||(s[f]={type:l})}),this.adjustOption=s,this},n.prototype.style=function(t,s){if((0,E.HD)(t)){var l=ps(t);this.styleOption={fields:l,callback:s}}else{var f=t,l=f.fields,d=f.callback,m=f.cfg;l||d||m?this.styleOption=t:this.styleOption={cfg:t}}return this},n.prototype.tooltip=function(t,s){if((0,E.HD)(t)){var l=ps(t);this.tooltipOption={fields:l,callback:s}}else this.tooltipOption=t;return this},n.prototype.animate=function(t){return this.animateOption=t,this},n.prototype.label=function(t,s,l){if((0,E.HD)(t)){var f={},d=ps(t);f.fields=d,(0,E.mf)(s)?f.callback=s:(0,E.PO)(s)&&(f.cfg=s),l&&(f.cfg=l),this.labelOption=f}else this.labelOption=t;return this},n.prototype.state=function(t){return this.stateOption=t,this},n.prototype.customInfo=function(t){return this.customOption=t,this},n.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},n.prototype.update=function(t){t===void 0&&(t={});var s=t.data,l=t.isDataChanged,f=t.isCoordinateChanged,d=this,m=d.attributeOption,x=d.lastAttributeOption;(0,E.Xy)(m,x)?s&&(l||!(0,E.Xy)(s,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(s)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=f},n.prototype.paint=function(t){var s=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=(0,E.b$)({},nn(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var l=this.getOffscreenGroup();l.clear();var f=this.beforeMappingData,d=this.beforeMapping(f);this.dataArray=new Array(d.length);for(var m=0;m<d.length;m++){var x=d[m];this.dataArray[m]=this.mapping(x)}if(this.updateElements(this.dataArray,t),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(t)){var A=this.container,P=this.type,L=this.coordinate,B=(0,E.U2)(this.animateOption,"appear"),U=this.getYScale(),Y=L.convert({x:0,y:U.scale(this.getYMinValue())});wn(A,B,P,L,Y)}if(this.labelOption){var se=this.useDeferredLabel,be=function(){return s.renderLabels((0,E.xH)(s.dataArray),t)}.bind(this);if(typeof se=="number"){var Ee=typeof se=="number"&&se!==1/0?se:0;if(!window.requestIdleCallback)setTimeout(be,Ee);else{var it=Ee&&Ee!==1/0?{timeout:Ee}:void 0;window.requestIdleCallback(be,it)}}else be()}this.lastAttributeOption=(0,M.pi)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},n.prototype.clear=function(){var t=this,s=t.container,l=t.geometryLabel,f=t.offscreenGroup;s&&s.clear(),l&&l.clear(),f&&f.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},n.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,a.prototype.destroy.call(this)},n.prototype.getGroupScales=function(){return this.groupScales},n.prototype.getAttribute=function(t){return this.attributes[t]},n.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},n.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},n.prototype.getGroupAttributes=function(){var t=[];return(0,E.S6)(this.attributes,function(s){xe.includes(s.type)&&t.push(s)}),t},n.prototype.getDefaultValue=function(t){var s,l=this.getAttribute(t);return l&&(0,E.xb)(l.scales)&&(s=l.values[0]),s},n.prototype.getAttributeValues=function(t,s){for(var l=[],f=t.scales,d=0,m=f.length;d<m;d++){var x=f[d],A=x.field;x.isIdentity?l.push(x.values):l.push(s[A])}return t.mapping.apply(t,(0,M.ev)([],(0,M.CR)(l),!1))},n.prototype.getAdjust=function(t){return this.adjusts[t]},n.prototype.getCoordinate=function(){return this.coordinate},n.prototype.getData=function(){return this.data},n.prototype.getShapeMarker=function(t,s){var l=this.getShapeFactory();return l.getMarker(t,s)},n.prototype.getElementsBy=function(t){return this.elements.filter(function(s){return t(s)})},n.prototype.getElements=function(){return this.elements},n.prototype.getElementId=function(t){t=(0,E.kJ)(t)?t[0]:t;var s=t[_e];if(this.idFields.length){for(var l=s[this.idFields[0]],f=1;f<this.idFields.length;f++)l+="-"+s[this.idFields[f]];return l}var d=this.type,m=this.getXScale(),x=this.getYScale(),A=m.field||"x",P=x.field||"y",L=s[P],B;m.type==="identity"?B=m.values[0]:B=s[A];var U;d==="interval"||d==="schema"?U="".concat(B):d==="line"||d==="area"||d==="path"?U=d:U="".concat(B,"-").concat(L);for(var Y=this.groupScales,f=0,se=Y.length;f<se;f++){var be=Y[f],Ee=be.field;U="".concat(U,"-").concat(s[Ee])}var it=this.getAdjust("dodge");if(it){var gt=it.dodgeBy;gt&&(U="".concat(U,"-").concat(s[gt]))}return this.getAdjust("jitter")&&(U="".concat(U,"-").concat(t.x,"-").concat(t.y)),U},n.prototype.getScaleFields=function(){var t=[],s=new Map,l=this,f=l.attributeOption,d=l.labelOption,m=l.tooltipOption;for(var x in f)if(f.hasOwnProperty(x)){var A=f[x];A.fields?Ef(A.fields,t,s):A.values&&Ef(A.values,t,s)}return d&&d.fields&&Ef(d.fields,t,s),(0,E.Kn)(m)&&m.fields&&Ef(m.fields,t,s),t},n.prototype.changeVisible=function(t){a.prototype.changeVisible.call(this,t);for(var s=this.elements,l=0,f=s.length;l<f;l++){var d=s[l];d.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},n.prototype.getFields=function(){var t=new Map,s=[];return Object.values(this.attributeOption).forEach(function(l){var f=(l==null?void 0:l.fields)||[];f.forEach(function(d){t.has(d)||s.push(d),t.set(d,!0)})},[]),s},n.prototype.getGroupFields=function(){for(var t=[],s=new Map,l=0,f=xe.length;l<f;l++){var d=xe[l],m=this.attributeOption[d];m&&m.fields&&Ef(m.fields,t,s)}return t},n.prototype.getXYFields=function(){var t=(0,M.CR)(this.attributeOption.position.fields,2),s=t[0],l=t[1];return[s,l]},n.prototype.getXField=function(){return(0,E.U2)(this.getXYFields(),[0])},n.prototype.getYField=function(){return(0,E.U2)(this.getXYFields(),[1])},n.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},n.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},n.prototype.sort=function(t){if(!this.hasSorted)for(var s=this.getXScale(),l=s.field,f=0;f<t.length;f++){var d=t[f];d.sort(function(m,x){return s.translate(m[_e][l])-s.translate(x[_e][l])})}this.hasSorted=!0},n.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},n.prototype.getShapeFactory=function(){var t=this.shapeType;if(Bo(t))return this.shapeFactory||(this.shapeFactory=(0,E.d9)(Bo(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},n.prototype.createShapePointsCfg=function(t){var s=this.getXScale(),l=this.getYScale(),f=this.normalizeValues(t[s.field],s),d;return l?d=this.normalizeValues(t[l.field],l):d=t.y?t.y:.1,{x:f,y:d,y0:l?l.scale(this.getYMinValue()):void 0}},n.prototype.createElement=function(t,s,l){l===void 0&&(l=!1);var f=this.container,d=this.getDrawCfg(t),m=this.getShapeFactory(),x=new wi({shapeFactory:m,container:f,offscreenGroup:this.getOffscreenGroup(),elementIndex:s});return x.animate=this.animateOption,x.geometry=this,x.draw(d,l),x},n.prototype.getDrawCfg=function(t){var s=t[_e],l={mappingData:t,data:s,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},f=t.shape;!f&&this.getShapeFactory()&&(f=this.getShapeFactory().defaultShapeType),l.shape=f;var d=this.theme.geometries[this.shapeType];l.defaultStyle=(0,E.U2)(d,[f,"default"],{}).style,!l.defaultStyle&&this.getShapeFactory()&&(l.defaultStyle=this.getShapeFactory().getDefaultStyle(d));var m=this.styleOption;return m&&(l.style=this.getStyleCfg(m,s)),this.generatePoints&&(l.points=t.points,l.nextPoints=t.nextPoints),l},n.prototype.updateElements=function(t,s){var l,f,d,m,x,A;s===void 0&&(s=!1);for(var P=new Map,L=[],B=new Map,U=0,Y=0;Y<t.length;Y++)for(var se=t[Y],be=0;be<se.length;be++){var Ee=se[be],it=this.getElementId(Ee),gt=P.has(it)?"".concat(it,"-").concat(Y,"-").concat(be):it;L.push(gt),P.set(gt,Ee),B.set(gt,U),U++}this.elements=new Array(U);var xt=ks(this.lastElementsMap,L),Bt=xt.added,_r=xt.updated,Or=xt.removed;try{for(var Gr=(0,M.XA)(Bt),mn=Gr.next();!mn.done;mn=Gr.next()){var it=mn.value,Ee=P.get(it),Y=B.get(it),cn=this.createElement(Ee,Y,s);this.elements[Y]=cn,this.elementsMap[it]=cn,cn.shape&&cn.shape.set("zIndex",this.zIndexReversed?this.elements.length-Y:Y)}}catch(Ci){l={error:Ci}}finally{try{mn&&!mn.done&&(f=Gr.return)&&f.call(Gr)}finally{if(l)throw l.error}}try{for(var Nn=(0,M.XA)(_r),hi=Nn.next();!hi.done;hi=Nn.next()){var it=hi.value,cn=this.lastElementsMap[it],Ee=P.get(it),Wi=this.getDrawCfg(Ee),bi=cn.getModel(),Y=B.get(it);(this.isCoordinateChanged||Xs(Wi,bi))&&(cn.animate=this.animateOption,cn.update(Wi)),this.elements[Y]=cn,this.elementsMap[it]=cn,cn.shape&&cn.shape.set("zIndex",this.zIndexReversed?this.elements.length-Y:Y)}}catch(Ci){d={error:Ci}}finally{try{hi&&!hi.done&&(m=Nn.return)&&m.call(Nn)}finally{if(d)throw d.error}}this.container&&this.container.sort();try{for(var to=(0,M.XA)(Or),jn=to.next();!jn.done;jn=to.next()){var it=jn.value,cn=this.lastElementsMap[it];cn.animate=this.animateOption,cn.destroy()}}catch(Ci){x={error:Ci}}finally{try{jn&&!jn.done&&(A=to.return)&&A.call(to)}finally{if(x)throw x.error}}},n.prototype.getLabelType=function(){var t=this,s=t.labelOption,l=t.coordinate,f=t.type,d=l.type,m=l.isTransposed,x=(0,E.U2)(s,["cfg","type"]);return x||(d==="polar"?x=m?"pie":"polar":d==="theta"?x="pie":f==="interval"||f==="polygon"?x="interval":x="base"),x},n.prototype.getYMinValue=function(){var t=this.getYScale(),s=t.min,l=t.max,f;return s>=0?f=s:l<=0?f=l:f=0,f},n.prototype.createAttrOption=function(t,s,l){if((0,E.UM)(s)||(0,E.Kn)(s))(0,E.Kn)(s)&&(0,E.Xy)(Object.keys(s),["values"])?(0,E.t8)(this.attributeOption,t,{fields:s.values}):(0,E.t8)(this.attributeOption,t,s);else{var f={};(0,E.hj)(s)?f.values=[s]:f.fields=ps(s),l&&((0,E.mf)(l)?f.callback=l:f.values=l),(0,E.t8)(this.attributeOption,t,f)}},n.prototype.initAttributes=function(){var t=this,s=this,l=s.attributes,f=s.attributeOption,d=s.theme,m=s.shapeType;this.groupScales=[];var x={},A=function(B){if(f.hasOwnProperty(B)){var U=f[B];if(!U)return{value:void 0};var Y=(0,M.pi)({},U),se=Y.callback,be=Y.values,Ee=Y.fields,it=Ee===void 0?[]:Ee,gt=it.map(function(Bt){var _r=t.scales[Bt];if(!x[Bt]&&xe.includes(B)){var Or=Ps(_r,(0,E.U2)(t.scaleDefs,Bt),B,t.type);Or==="cat"&&(t.groupScales.push(_r),x[Bt]=!0)}return _r});Y.scales=gt,B!=="position"&&gt.length===1&&gt[0].type==="identity"?Y.values=gt[0].values:!se&&!be&&(B==="size"?Y.values=d.sizes:B==="shape"?Y.values=d.shapes[m]||[]:B==="color"&&(gt.length?Y.values=gt[0].values.length<=10?d.colors10:d.colors20:Y.values=d.colors10));var xt=tc(B);l[B]=new xt(Y)}};for(var P in f){var L=A(P);if(typeof L=="object")return L.value}},n.prototype.processData=function(t){var s,l;this.hasSorted=!1;for(var f=this.getAttribute("position").scales,d=f.filter(function(Or){return Or.isCategory}),m=this.groupData(t),x=[],A=0,P=m.length;A<P;A++){for(var L=m[A],B=[],U=0,Y=L.length;U<Y;U++){var se=L[U],be={};for(var Ee in se)be[Ee]=se[Ee];be[_e]=se;try{for(var it=(s=void 0,(0,M.XA)(d)),gt=it.next();!gt.done;gt=it.next()){var xt=gt.value,Bt=xt.field;be[Bt]=xt.translate(be[Bt])}}catch(Or){s={error:Or}}finally{try{gt&&!gt.done&&(l=it.return)&&l.call(it)}finally{if(s)throw s.error}}B.push(be)}x.push(B)}var _r=this.adjustData(x);return this.beforeMappingData=_r,_r},n.prototype.adjustData=function(t){var s=this.adjustOption,l=this,f=l.intervalPadding,d=l.dodgePadding,m=l.theme,x=this.maxColumnWidth||m.maxColumnWidth,A=this.minColumnWidth||m.minColumnWidth,P=this.columnWidthRatio||m.columnWidthRatio,L=t;if(s){var B=this.getXScale(),U=this.getYScale(),Y=B.field,se=U?U.field:null,be=xl(this.coordinate),Ee=B.values.length,it=this.getAttribute("size"),gt=void 0;it&&(gt=it.values[0]);for(var xt=0,Bt=s.length;xt<Bt;xt++){var _r=s[xt],Or=(0,M.pi)({xField:Y,yField:se,intervalPadding:f,dodgePadding:d,xDimensionLength:be,groupNum:Ee,defaultSize:gt,maxColumnWidth:x,minColumnWidth:A,columnWidthRatio:P},_r),Gr=_r.type;if(Gr==="dodge"){var mn=[];if(B.isCategory||B.type==="identity")mn.push("x");else if(!U)mn.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Or.adjustNames=mn,Or.dodgeRatio=P}else if(Gr==="stack"){var cn=this.coordinate;if(!U){Or.height=cn.getHeight();var Nn=this.getDefaultValue("size")||3;Or.size=Nn}!cn.isTransposed&&(0,E.UM)(Or.reverseOrder)&&(Or.reverseOrder=!0)}var hi=pt(Gr);Or.dimValuesMap={},B&&B.values&&(Or.dimValuesMap[B.field]=B.values.map(function(bi){return B.translate(bi)}));var Wi=new hi(Or);L=Wi.process(L),this.adjusts[Gr]=Wi}}return L},n.prototype.groupData=function(t){for(var s=this.getGroupScales(),l=this.scaleDefs,f={},d=[],m=0;m<s.length;m++){var x=s[m],A=x.field;d.push(A),(0,E.U2)(l,[A,"values"])&&(f[A]=l[A].values)}return es(t,d,f)},n.prototype.updateStackRange=function(t,s){for(var l=(0,E.xH)(s),f=t.field,d=t.min,m=t.max,x=0;x<l.length;x++){var A=l[x],P=Math.min.apply(null,A[f]),L=Math.max.apply(null,A[f]);P<d&&(d=P),L>m&&(m=L)}var B=this.scaleDefs,U={};d<t.min&&!(0,E.U2)(B,[f,"min"])&&(U.min=d),m>t.max&&!(0,E.U2)(B,[f,"max"])&&(U.max=m),t.change(U)},n.prototype.beforeMapping=function(t){var s=t;if(this.sortable&&this.sort(s),this.generatePoints)for(var l=0,f=s.length;l<f;l++){var d=s[l];this.generateShapePoints(d);var m=s[l+1];m&&(this.generateShapePoints(m),d[0].nextPoints=m[0].points)}return s},n.prototype.generateShapePoints=function(t){for(var s=this.getShapeFactory(),l=this.getAttribute("shape"),f=0;f<t.length;f++){var d=t[f],m=this.createShapePointsCfg(d),x=l?this.getAttributeValues(l,d):null,A=s.getShapePoints(x,m);d.points=A}},n.prototype.normalizeValues=function(t,s){var l=[];if((0,E.kJ)(t))for(var f=0;f<t.length;f++){var d=t[f];l.push(s.scale(d))}else l=s.scale(t);return l},n.prototype.mapping=function(t){for(var s=this.attributes,l=[],f=0;f<t.length;f++){var d=t[f],m={_origin:d[_e],points:d.points,nextPoints:d.nextPoints};for(var x in s)if(s.hasOwnProperty(x)){var A=s[x],P=A.names,L=this.getAttributeValues(A,d);if(P.length>1)for(var B=0;B<L.length;B+=1){var U=L[B],Y=P[B];m[Y]=(0,E.kJ)(U)&&U.length===1?U[0]:U}else m[P[0]]=L.length===1?L[0]:L}this.convertPoint(m),l.push(m)}return l},n.prototype.convertPoint=function(t){var s=t.x,l=t.y,f,d,m,x=this.coordinate;if((0,E.kJ)(s)&&(0,E.kJ)(l)){f=[],d=[];for(var A=0,P=0,L=s.length,B=l.length;A<L&&P<B;A+=1,P+=1)m=x.convert({x:s[A],y:l[P]}),f.push(m.x),d.push(m.y)}else if((0,E.kJ)(l)){d=[];for(var U=0;U<l.length;U++){var Y=l[U];m=x.convert({x:s,y:Y}),f&&f!==m.x?((0,E.kJ)(f)||(f=[f]),f.push(m.x)):f=m.x,d.push(m.y)}}else if((0,E.kJ)(s)){f=[];for(var U=0;U<s.length;U++){var se=s[U];m=x.convert({x:se,y:l}),d&&d!==m.y?((0,E.kJ)(d)||(d=[d]),d.push(m.y)):d=m.y,f.push(m.x)}}else{var be=x.convert({x:s,y:l});f=be.x,d=be.y}t.x=f,t.y=d},n.prototype.getStyleCfg=function(t,s){var l=t.fields,f=l===void 0?[]:l,d=t.callback,m=t.cfg;if(m)return m;var x=f.map(function(A){return s[A]});return d.apply(void 0,(0,M.ev)([],(0,M.CR)(x),!1))},n.prototype.setCfg=function(t){var s=this,l=t.coordinate,f=t.data,d=t.theme,m=t.scaleDefs;l&&(this.coordinate=l),f&&(this.data=f),m&&(this.scaleDefs=m,this.idFields=[],(0,E.S6)(m,function(x,A){x&&x.key&&s.idFields.push(A)})),d&&(this.theme=this.userTheme?(0,E.b$)({},d,this.userTheme):d)},n.prototype.renderLabels=function(t,s){return s===void 0&&(s=!1),(0,M.mG)(this,void 0,void 0,function(){var l,f,d,m,x,A,P,L,B,U,Y,se,be=this;return(0,M.Jh)(this,function(Ee){switch(Ee.label){case 0:return l=this.geometryLabel,this.emit(at.BEFORE_RENDER_LABEL),l||(f=this.getLabelType(),d=oa(f),l=new d(this),this.geometryLabel=l),[4,l.render(t,s)];case 1:Ee.sent(),m=l.labelsRenderer.shapesMap,x=new Map,(0,E.S6)(m,function(it,gt){for(var xt=it.getChildren()||[],Bt=0;Bt<xt.length;Bt++){var _r=xt[Bt],Or=be.elementsMap[_r.get("elementId")||gt.split(" ")[0]];if(Or){_r.cfg.name=["element","label"],_r.cfg.element=Or;var Gr=x.get(Or)||new Set;Gr.add(it),x.set(Or,Gr)}}});try{for(A=(0,M.XA)(x.entries()),P=A.next();!P.done;P=A.next())L=(0,M.CR)(P.value,2),B=L[0],U=L[1],B.labelShape=(0,M.ev)([],(0,M.CR)(U),!1)}catch(it){Y={error:it}}finally{try{P&&!P.done&&(se=A.return)&&se.call(A)}finally{if(Y)throw Y.error}}return this.emit(at.AFTER_RENDER_LABEL),[2]}})})},n.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&((0,E.U2)(this.animateOption,"appear")===void 0||(0,E.U2)(this.animateOption,"appear")&&(0,E.U2)(this.animateOption,["appear","animation"])===void 0)},n}(me),Ls=su,gu=no.vs;function qu(a,n,t){var s=gu(a.getMatrix(),[["t",n,t]]);a.setMatrix(s)}function Qu(a,n){var t=a.attr(),s=t.x,l=t.y,f=gu(a.getMatrix(),[["t",-s,-l],["r",n],["t",s,l]]);return f}function ul(a,n){var t=Qu(a,n);a.setMatrix(t)}function Mu(){return[1,0,0,0,1,0,0,0,1]}function Ju(a,n){var t=a.getBBox(),s=(t.minX+t.maxX)/2,l=(t.minY+t.maxY)/2;a.applyToMatrix([s,l,1]);var f=gu(a.getMatrix(),[["t",-s,-l],["s",n,n],["t",s,l]]);a.setMatrix(f)}function qa(a){return a.find(function(n){return n.get("type")==="text"})}function ts(a,n,t){t===void 0&&(t=[0,0,0,0]);var s=a&&a.getChildren()[0];if(s){var l=s.clone();n!=null&&n.rotate&&ul(l,-n.rotate);var f=l.getCanvasBBox(),d=f.x,m=f.y,x=f.width,A=f.height;l.destroy();var P=t;return(0,E.UM)(P)?P=[2,2,2,2]:(0,E.hj)(P)&&(P=new Array(4).fill(P)),{x:d-P[3],y:m-P[0],width:x+P[1]+P[3],height:A+P[0]+P[2],rotation:(n==null?void 0:n.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function To(a,n,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(a.x+a.width+t,n.x+n.width+t)-Math.max(a.x-t,n.x-t)),l=Math.max(0,Math.min(a.y+a.height+t,n.y+n.height+t)-Math.max(a.y-t,n.y-t));return s*l}function mo(a,n){var t=a.getBBox();return(0,E.G)(n,function(s){var l=s.getBBox();return To(t,l,2)>0})}function ll(a,n,t){var s=t.data,l=t.origin,f=t.animateCfg,d=t.coordinate,m=(0,E.U2)(f,"update");a.set("data",s),a.set("origin",l),a.set("animateCfg",f),a.set("coordinate",d),a.set("visible",n.get("visible")),(a.getChildren()||[]).forEach(function(x,A){var P=n.getChildByIndex(A);if(!P)a.removeChild(x),x.remove(!0);else{x.set("data",s),x.set("origin",l),x.set("animateCfg",f),x.set("coordinate",d);var L=Bc(x,P);m?gn(x,m,{toAttrs:L,coordinate:d}):x.attr(L),P.isGroup()&&ll(x,P,t)}}),(0,E.S6)(n.getChildren(),function(x,A){A>=a.getCount()&&(x.destroyed||a.add(x))})}var $o=function(){function a(n){this.shapesMap={};var t=n.layout,s=n.container;this.layout=t,this.container=s}return a.prototype.render=function(n,t,s){return s===void 0&&(s=!1),(0,M.mG)(this,void 0,void 0,function(){var l,f,d,m,x,A,P,L,B=this;return(0,M.Jh)(this,function(U){switch(U.label){case 0:if(l={},f=this.createOffscreenGroup(),!n.length)return[3,2];try{for(d=(0,M.XA)(n),m=d.next();!m.done;m=d.next())x=m.value,x&&(l[x.id]=this.renderLabel(x,f))}catch(Y){P={error:Y}}finally{try{m&&!m.done&&(L=d.return)&&L.call(d)}finally{if(P)throw P.error}}return[4,this.doLayout(n,t,l)];case 1:U.sent(),this.renderLabelLine(n,l),this.renderLabelBackground(n,l),this.adjustLabel(n,l),U.label=2;case 2:return A=this.shapesMap,(0,E.S6)(l,function(Y,se){if(Y.destroyed)delete l[se];else{if(A[se]){var be=Y.get("data"),Ee=Y.get("origin"),it=Y.get("coordinate"),gt=Y.get("animateCfg"),xt=A[se];ll(xt,l[se],{data:be,origin:Ee,animateCfg:gt,coordinate:it}),l[se]=xt}else{if(B.container.destroyed)return;B.container.add(Y);var Bt=(0,E.U2)(Y.get("animateCfg"),s?"enter":"appear");Bt&&gn(Y,Bt,{toAttrs:(0,M.pi)({},Y.attr()),coordinate:Y.get("coordinate")})}delete A[se]}}),(0,E.S6)(A,function(Y){var se=(0,E.U2)(Y.get("animateCfg"),"leave");se?gn(Y,se,{toAttrs:null,coordinate:Y.get("coordinate")}):Y.remove(!0)}),this.shapesMap=l,f.destroy(),[2]}})})},a.prototype.clear=function(){this.container.clear(),this.shapesMap={}},a.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},a.prototype.renderLabel=function(n,t){var s=n.id,l=n.elementId,f=n.data,d=n.mappingData,m=n.coordinate,x=n.animate,A=n.content,P=n.capture,L={id:s,elementId:l,capture:P,data:f,origin:(0,M.pi)((0,M.pi)({},d),{data:d[_e]}),coordinate:m},B=t.addGroup((0,M.pi)({name:"label",animateCfg:this.animate===!1||x===null||x===!1?!1:(0,E.b$)({},this.animate,x)},L)),U;if(A.isGroup&&A.isGroup()||A.isShape&&A.isShape()){var Y=A.getCanvasBBox(),se=Y.width,be=Y.height,Ee=(0,E.U2)(n,"textAlign","left"),it=n.x,gt=n.y-be/2;Ee==="center"?it=it-se/2:(Ee==="right"||Ee==="end")&&(it=it-se),qu(A,it,gt),U=A,B.add(A)}else{var xt=(0,E.U2)(n,["style","fill"]);U=B.addShape("text",(0,M.pi)({attrs:(0,M.pi)((0,M.pi)({x:n.x,y:n.y,textAlign:n.textAlign,textBaseline:(0,E.U2)(n,"textBaseline","middle"),text:n.content},n.style),{fill:(0,E.Ft)(xt)?n.color:xt})},L))}return n.rotate&&ul(U,n.rotate),B},a.prototype.doLayout=function(n,t,s){return(0,M.mG)(this,void 0,void 0,function(){var l,f=this;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return this.layout?(l=(0,E.kJ)(this.layout)?this.layout:[this.layout],[4,Promise.all(l.map(function(m){var x=ao((0,E.U2)(m,"type",""));if(x){var A=[],P=[];return(0,E.S6)(s,function(L,B){A.push(L),P.push(t[L.get("elementId")])}),x(n,A,P,f.region,m.cfg)}}))]):[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}})})},a.prototype.renderLabelLine=function(n,t){(0,E.S6)(n,function(s){var l=(0,E.U2)(s,"coordinate");if(!(!s||!l)){var f=l.getCenter(),d=l.getRadius();if(s.labelLine){var m=(0,E.U2)(s,"labelLine",{}),x=s.id,A=m.path;if(!A){var P=zs(f.x,f.y,d,s.angle);A=[["M",P.x,P.y],["L",s.x,s.y]]}var L=t[x];L.destroyed||L.addShape("path",{capture:!1,attrs:(0,M.pi)({path:A,stroke:s.color?s.color:(0,E.U2)(s,["style","fill"],"#000"),fill:null},m.style),id:x,origin:s.mappingData,data:s.data,coordinate:s.coordinate})}}})},a.prototype.renderLabelBackground=function(n,t){(0,E.S6)(n,function(s){var l=(0,E.U2)(s,"coordinate"),f=(0,E.U2)(s,"background");if(!(!f||!l)){var d=s.id,m=t[d];if(!m.destroyed){var x=m.getChildren()[0];if(x){var A=ts(m,s,f.padding),P=A.rotation,L=(0,M._T)(A,["rotation"]),B=m.addShape("rect",{attrs:(0,M.pi)((0,M.pi)({},L),f.style||{}),id:d,origin:s.mappingData,data:s.data,coordinate:s.coordinate});if(B.setZIndex(-1),P){var U=x.getMatrix();B.setMatrix(U)}}}}})},a.prototype.createOffscreenGroup=function(){var n=this.container,t=n.getGroupBase(),s=new t({});return s},a.prototype.adjustLabel=function(n,t){(0,E.S6)(n,function(s){if(s){var l=s.id,f=t[l];if(!f.destroyed){var d=f.findAll(function(m){return m.get("type")!=="path"});(0,E.S6)(d,function(m){m&&(s.offsetX&&m.attr("x",m.attr("x")+s.offsetX),s.offsetY&&m.attr("y",m.attr("y")+s.offsetY))})}}})},a}(),Ds=$o;function mu(a){var n=0;return(0,E.S6)(a,function(t){n+=t}),n/a.length}var bl=function(){function a(n){this.geometry=n}return a.prototype.getLabelItems=function(n){var t=this,s=[],l=this.getLabelCfgs(n);return(0,E.S6)(n,function(f,d){var m=l[d];if(!m||(0,E.UM)(f.x)||(0,E.UM)(f.y)){s.push(null);return}var x=(0,E.kJ)(m.content)?m.content:[m.content];m.content=x;var A=x.length;(0,E.S6)(x,function(P,L){if((0,E.UM)(P)||P===""){s.push(null);return}var B=(0,M.pi)((0,M.pi)({},m),t.getLabelPoint(m,f,L));B.textAlign||(B.textAlign=t.getLabelAlign(B,L,A)),B.offset<=0&&(B.labelLine=null),s.push(B)})}),s},a.prototype.render=function(n,t){return t===void 0&&(t=!1),(0,M.mG)(this,void 0,void 0,function(){var s,l,f;return(0,M.Jh)(this,function(d){switch(d.label){case 0:return s=this.getLabelItems(n),l=this.getLabelsRenderer(),f=this.getGeometryShapes(),[4,l.render(s,f,t)];case 1:return d.sent(),[2]}})})},a.prototype.clear=function(){var n=this.labelsRenderer;n&&n.clear()},a.prototype.destroy=function(){var n=this.labelsRenderer;n&&n.destroy(),this.labelsRenderer=null},a.prototype.getCoordinate=function(){return this.geometry.coordinate},a.prototype.getDefaultLabelCfg=function(n,t){var s=this.geometry,l=s.type,f=s.theme;return l==="polygon"||l==="interval"&&t==="middle"||n<0&&!["line","point","path"].includes(l)?(0,E.U2)(f,"innerLabels",{}):(0,E.U2)(f,"labels",{})},a.prototype.getThemedLabelCfg=function(n){var t=this.geometry,s=this.getDefaultLabelCfg(),l=t.type,f=t.theme,d;return l==="polygon"||n.offset<0&&!["line","point","path"].includes(l)?d=(0,E.b$)({},s,f.innerLabels,n):d=(0,E.b$)({},s,f.labels,n),d},a.prototype.setLabelPosition=function(n,t,s,l){},a.prototype.getLabelOffset=function(n){var t=this.getCoordinate(),s=this.getOffsetVector(n);return t.isTransposed?s[0]:s[1]},a.prototype.getLabelOffsetPoint=function(n,t,s){var l=n.offset,f=this.getCoordinate(),d=f.isTransposed,m=d?"x":"y",x=d?1:-1,A={x:0,y:0};return t>0||s===1?A[m]=l*x:A[m]=l*x*-1,A},a.prototype.getLabelPoint=function(n,t,s){var l=this.getCoordinate(),f=n.content.length;function d(be,Ee,it){it===void 0&&(it=!1);var gt=be;return(0,E.kJ)(gt)&&(n.content.length===1?it?gt=mu(gt):gt.length<=2?gt=gt[be.length-1]:gt=mu(gt):gt=gt[Ee]),gt}var m={content:n.content[s],x:0,y:0,start:{x:0,y:0},color:"#fff"},x=(0,E.kJ)(t.shape)?t.shape[0]:t.shape,A=x==="funnel"||x==="pyramid";if(this.geometry.type==="polygon"){var P=ad(t.x,t.y);m.x=P[0],m.y=P[1]}else this.geometry.type==="interval"&&!A?(m.x=d(t.x,s,!0),m.y=d(t.y,s)):(m.x=d(t.x,s),m.y=d(t.y,s));if(A){var L=(0,E.U2)(t,"nextPoints"),B=(0,E.U2)(t,"points");if(L){var U=l.convert(B[1]),Y=l.convert(L[1]);m.x=(U.x+Y.x)/2,m.y=(U.y+Y.y)/2}else if(x==="pyramid"){var U=l.convert(B[1]),Y=l.convert(B[2]);m.x=(U.x+Y.x)/2,m.y=(U.y+Y.y)/2}}n.position&&this.setLabelPosition(m,t,s,n.position);var se=this.getLabelOffsetPoint(n,s,f);return m.start={x:m.x,y:m.y},m.x+=se.x,m.y+=se.y,m.color=t.color,m},a.prototype.getLabelAlign=function(n,t,s){var l="center",f=this.getCoordinate();if(f.isTransposed){var d=n.offset;d<0?l="right":d===0?l="center":l="left",s>1&&t===0&&(l==="right"?l="left":l==="left"&&(l="right"))}return l},a.prototype.getLabelId=function(n){var t=this.geometry,s=t.type,l=t.getXScale(),f=t.getYScale(),d=n[_e],m=t.getElementId(n);return s==="line"||s==="area"?m+=" ".concat(d[l.field]):s==="path"&&(m+=" ".concat(d[l.field],"-").concat(d[f.field])),m},a.prototype.getLabelsRenderer=function(){var n=this.geometry,t=n.labelsContainer,s=n.labelOption,l=n.canvasRegion,f=n.animateOption,d=this.geometry.coordinate,m=this.labelsRenderer;return m||(m=new Ds({container:t,layout:(0,E.U2)(s,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=m),m.region=l,m.animate=f?nn("label",d):!1,m},a.prototype.getLabelCfgs=function(n){var t=this,s=this.geometry,l=s.labelOption,f=s.scales,d=s.coordinate,m=l,x=m.fields,A=m.callback,P=m.cfg,L=x.map(function(U){return f[U]}),B=[];return(0,E.S6)(n,function(U,Y){var se=U[_e],be=t.getLabelText(se,L),Ee;if(A){var it=x.map(function(Or){return se[Or]});if(Ee=A.apply(void 0,(0,M.ev)([],(0,M.CR)(it),!1)),(0,E.UM)(Ee)){B.push(null);return}}var gt=(0,M.pi)((0,M.pi)({id:t.getLabelId(U),elementId:t.geometry.getElementId(U),data:se,mappingData:U,coordinate:d},P),Ee);(0,E.mf)(gt.position)&&(gt.position=gt.position(se,U,Y));var xt=t.getLabelOffset(gt.offset||0),Bt=t.getDefaultLabelCfg(xt,gt.position);gt=(0,E.b$)({},Bt,gt),gt.offset=t.getLabelOffset(gt.offset||0);var _r=gt.content;(0,E.mf)(_r)?gt.content=_r(se,U,Y):(0,E.o8)(_r)&&(gt.content=be[0]),B.push(gt)}),B},a.prototype.getLabelText=function(n,t){var s=[];return(0,E.S6)(t,function(l){var f=n[l.field];(0,E.kJ)(f)?f=f.map(function(d){return l.getText(d)}):f=l.getText(f),(0,E.UM)(f)||f===""?s.push(null):s.push(f)}),s},a.prototype.getOffsetVector=function(n){n===void 0&&(n=0);var t=this.getCoordinate(),s=0;return(0,E.hj)(n)&&(s=n),t.isTransposed?t.applyMatrix(s,0):t.applyMatrix(0,s)},a.prototype.getGeometryShapes=function(){var n=this.geometry,t={};return(0,E.S6)(n.elementsMap,function(s,l){t[l]=s.shape}),(0,E.S6)(n.getOffscreenGroup().getChildren(),function(s){var l=n.getElementId(s.get("origin").mappingData);t[l]=s}),t},a}(),Eo=bl;function Hf(a,n,t){if(!a)return t;var s;if(a.callback&&a.callback.length>1){var l=Array(a.callback.length-1).fill("");s=a.mapping.apply(a,(0,M.ev)([n],(0,M.CR)(l),!1)).join("")}else s=a.mapping(n).join("");return s||t}var Sl={hexagon:function(a,n,t){var s=t/2*Math.sqrt(3);return[["M",a,n-t],["L",a+s,n-t/2],["L",a+s,n+t/2],["L",a,n+t],["L",a-s,n+t/2],["L",a-s,n-t/2],["Z"]]},bowtie:function(a,n,t){var s=t-1.5;return[["M",a-t,n-s],["L",a+t,n+s],["L",a+t,n-s],["L",a-t,n+s],["Z"]]},cross:function(a,n,t){return[["M",a-t,n-t],["L",a+t,n+t],["M",a+t,n-t],["L",a-t,n+t]]},tick:function(a,n,t){return[["M",a-t/2,n-t],["L",a+t/2,n-t],["M",a,n-t],["L",a,n+t],["M",a-t/2,n+t],["L",a+t/2,n+t]]},plus:function(a,n,t){return[["M",a-t,n],["L",a+t,n],["M",a,n-t],["L",a,n+t]]},hyphen:function(a,n,t){return[["M",a-t,n],["L",a+t,n]]},line:function(a,n,t){return[["M",a,n-t],["L",a,n+t]]}},Yh=["line","cross","tick","plus","hyphen"];function yu(a,n){return(0,E.mf)(n)?n(a):(0,E.b$)({},a,n)}function Da(a,n){var t=a.symbol;if((0,E.HD)(t)&&Yh.indexOf(t)!==-1){var s=(0,E.U2)(a,"style",{}),l=(0,E.U2)(s,"lineWidth",1),f=s.stroke||s.fill||n;a.style=(0,E.b$)({},a.style,{lineWidth:l,stroke:f,fill:null})}}function Aa(a){var n=a.symbol;(0,E.HD)(n)&&Sl[n]&&(a.symbol=Sl[n])}function kp(a){return a.startsWith(Se.LEFT)||a.startsWith(Se.RIGHT)?"vertical":"horizontal"}function Yd(a,n,t,s,l){var f=t.getScale(t.type);if(f.isCategory){var d=f.field,m=n.getAttribute("color"),x=n.getAttribute("shape"),A=a.getTheme().defaultColor,P=n.coordinate.isPolar;return f.getTicks().map(function(L,B){var U,Y=L.text,se=L.value,be=Y,Ee=f.invert(se),it=a.filterFieldData(d,[(U={},U[d]=Ee,U)]).length===0;(0,E.S6)(a.views,function(Or){var Gr;Or.filterFieldData(d,[(Gr={},Gr[d]=Ee,Gr)]).length||(it=!0)});var gt=Hf(m,Ee,A),xt=Hf(x,Ee,"point"),Bt=n.getShapeMarker(xt,{color:gt,isInPolar:P}),_r=l;return(0,E.mf)(_r)&&(_r=_r(be,B,(0,M.pi)({name:be,value:Ee},(0,E.b$)({},s,Bt)))),Bt=(0,E.b$)({},s,Bt,Xl((0,M.pi)({},_r),["style"])),Da(Bt,gt),_r&&_r.style&&(Bt.style=yu(Bt.style,_r.style)),Aa(Bt),{id:Ee,name:be,value:Ee,marker:Bt,unchecked:it}})}return[]}function Kd(a,n,t){return t.map(function(s,l){var f=n;(0,E.mf)(f)&&(f=f(s.name,l,(0,E.b$)({},a,s)));var d=(0,E.mf)(s.marker)?s.marker(s.name,l,(0,E.b$)({},a,s)):s.marker,m=(0,E.b$)({},a,f,d);return Aa(m),s.marker=m,s})}function Lp(a,n){var t=(0,E.U2)(a,["components","legend"],{});return(0,E.b$)({},(0,E.U2)(t,["common"],{}),(0,E.b$)({},(0,E.U2)(t,[n],{})))}function qd(a){return a?!1:a==null||isNaN(a)}function ym(a){if((0,E.kJ)(a))return qd(a[1].y);var n=a.y;return(0,E.kJ)(n)?qd(n[0]):qd(n)}function ud(a,n,t){if(n===void 0&&(n=!1),t===void 0&&(t=!0),!a.length||a.length===1&&!t)return[];if(n){for(var s=[],l=0,f=a.length;l<f;l++){var d=a[l];ym(d)||s.push(d)}return[s]}for(var m=[],x=[],l=0,f=a.length;l<f;l++){var d=a[l];ym(d)?x.length&&(x.length===1&&!t||m.push(x),x=[]):x.push(d)}return x.length&&m.push(x),m}function xg(a){for(var n=[],t=0;t<a.length;t++){var s=a[t];if(s){var l=t===0?"M":"L";n.push([l,s.x,s.y])}}var f=a[0];return f&&(n.push(["L",f.x,f.y]),n.push(["z"])),n}function _m(a){for(var n=a.length/2,t=[],s=[],l=0;l<a.length;l++)l<n?t.push(a[l]):s.push(a[l]);var f=ta(t,!1),d=ta(s,!1);s.length&&f.push(["L",s[0].x,s[0].y]),d.shift();var m=f.concat(d);return t.length&&m.push(["L",t[0].x,t[0].y]),m.push(["z"]),m}function _u(a,n,t,s){s===void 0&&(s="");var l=a.style,f=l===void 0?{}:l,d=a.defaultStyle,m=a.color,x=a.size,A=(0,M.pi)((0,M.pi)({},d),f);return m&&(n&&(f.stroke||(A.stroke=m)),t&&(f.fill||(A.fill=m))),s&&(0,E.UM)(f[s])&&!(0,E.UM)(x)&&(A[s]=x),A}function Dp(a){return(0,E.b$)({},{fill:"#CCD6EC",fillOpacity:.3},(0,E.U2)(a,["background","style"]))}function Ov(a){var n=a.x,t=(0,E.kJ)(a.y)?a.y:[a.y];return t.map(function(s,l){return{x:(0,E.kJ)(n)?n[l]:n,y:s}})}var bg={line:function(a,n,t){return[["M",a-t,n],["L",a+t,n]]},dot:function(a,n,t){return[["M",a-t,n],["L",a+t,n]]},dash:function(a,n,t){return[["M",a-t,n],["L",a+t,n]]},smooth:function(a,n,t){return[["M",a-t,n],["A",t/2,t/2,0,1,1,a,n],["A",t/2,t/2,0,1,0,a+t,n]]},hv:function(a,n,t){return[["M",a-t-1,n-2.5],["L",a,n-2.5],["L",a,n+2.5],["L",a+t+1,n+2.5]]},vh:function(a,n,t){return[["M",a-t-1,n+2.5],["L",a,n+2.5],["L",a,n-2.5],["L",a+t+1,n-2.5]]},hvh:function(a,n,t){return[["M",a-(t+1),n+2.5],["L",a-t/2,n+2.5],["L",a-t/2,n-2.5],["L",a+t/2,n-2.5],["L",a+t/2,n+2.5],["L",a+t+1,n+2.5]]},vhv:function(a,n){return[["M",a-5,n+2.5],["L",a-5,n],["L",a,n],["L",a,n-3],["L",a,n+3],["L",a+6.5,n+3]]}};function ld(a,n){var t=a.color;return{symbol:bg[n],style:{lineWidth:2,r:6,stroke:t}}}function kv(a,n,t){for(var s=a.isStack,l=a.connectNulls,f=a.isInCircle,d=a.showSinglePoint,m=_u(a,!0,!1,"lineWidth"),x=ud(a.points,l,d),A=[],P=0,L=x.length;P<L;P++){var B=x[P];A=A.concat(Eg(B,f,s,n,t,m))}return m.path=A,m}function Sg(a,n,t,s,l){if(a.length===1)return[["M",a[0].x,a[0].y-l.lineWidth/2],["L",a[0].x,a[0].y],["L",a[0].x,a[0].y+l.lineWidth/2]];var f;return t?(n&&a.length&&a.push({x:a[0].x,y:a[0].y}),f=ta(a,!1,s)):(f=Ln(a,!1),n&&f.push(["Z"])),f}function R0(a,n,t,s,l,f){var d=[],m=[];(0,E.S6)(a,function(P){var L=Ov(P);d.push(L[1]),m.push(L[0])});var x=Sg(d,n,s,l,f),A=Sg(m,n,s,l,f);return t?x:x.concat(A)}function Eg(a,n,t,s,l,f){if(a.length){var d=a[0];return(0,E.kJ)(d.y)?R0(a,n,t,s,l,f):Sg(a,n,s,l,f)}return[]}var I0=oo("line",{defaultShapeType:"line"});(0,E.S6)(["line","dot","dash","smooth"],function(a){yi("line",a,{draw:function(n,t){var s=a==="smooth",l;if(s){var f=this.coordinate,d=f.start,m=f.end;l=[[d.x,m.y],[m.x,d.y]]}var x=kv(n,s,l),A=t.addShape({type:"path",attrs:x,name:"line",capture:!s});return A},getMarker:function(n){return ld(n,a)}})});var c_=null,P0="4.2.10",sc={getLegendItems:Yd,translate:qu,rotate:ul,zoom:Ju,transform:gu,getAngle:id,getSectorPath:Zf,polarToCartesian:zs,getDelegationObject:Vo,getTooltipItems:Yo,getMappingValue:Hf,getPath:Eg,getPathPoints:ud},mh={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},rs={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Nc=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],O0=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],wg=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],yh=function(a){a===void 0&&(a={});var n=a.paletteQualitative10,t=n===void 0?Nc:n,s=a.paletteQualitative20,l=s===void 0?O0:s,f=a.brandColor,d=f===void 0?t[0]:f,m={backgroundColor:"#141414",brandColor:d,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:t,paletteQualitative20:l,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:wg,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:rs[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:rs[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:mh[85],axisTickLineBorderColor:rs[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:rs[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:rs[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:rs[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:rs[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Nc[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:rs[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:rs[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:rs[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:rs[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:rs[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:rs[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:mh[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:mh[25],annotationArcBorderColor:rs[15],annotationArcBorder:1,annotationLineBorderColor:rs[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:rs[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:rs[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:rs[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:rs[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:rs[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:mh[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:rs[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:mh[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:rs[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:Nc[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:mh[100],pointBorderOpacity:1,pointActiveBorderColor:rs[100],pointSelectedBorder:2,pointSelectedBorderColor:rs[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Nc[0],hollowPointBorderOpacity:.95,hollowPointFillColor:mh[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:rs[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:rs[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Nc[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Nc[0],areaFillOpacity:.25,areaActiveFillColor:Nc[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Nc[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Nc[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:rs[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:rs[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Nc[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:rs[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:rs[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Nc[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:mh[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:rs[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:rs[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return(0,M.pi)((0,M.pi)({},m),a)},Lv=yh();function xm(){return window?window.devicePixelRatio:1}function Dv(a,n,t,s){var l=a-t,f=n-s;return Math.sqrt(l*l+f*f)}function cd(a,n,t,s,l,f){return l>=a&&l<=a+t&&f>=n&&f<=n+s}function Cg(a,n){return!(n.minX>a.maxX||n.maxX<a.minX||n.minY>a.maxY||n.maxY<a.minY)}function f_(a,n){return!a||!n?a||n:{minX:Math.min(a.minX,n.minX),minY:Math.min(a.minY,n.minY),maxX:Math.max(a.maxX,n.maxX),maxY:Math.max(a.maxY,n.maxY)}}function h_(a,n){return a[0]===n[0]&&a[1]===n[1]}var p_=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,KE=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,bm=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,xu=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function _h(a,n){var t=a.match(xu);(0,E.S6)(t,function(s){var l=s.split(":");n.addColorStop(l[0],l[1])})}function qE(a,n,t){var s=p_.exec(t),l=parseFloat(s[1])%360*(Math.PI/180),f=s[2],d=n.getBBox(),m,x;l>=0&&l<1/2*Math.PI?(m={x:d.minX,y:d.minY},x={x:d.maxX,y:d.maxY}):1/2*Math.PI<=l&&l<Math.PI?(m={x:d.maxX,y:d.minY},x={x:d.minX,y:d.maxY}):Math.PI<=l&&l<3/2*Math.PI?(m={x:d.maxX,y:d.maxY},x={x:d.minX,y:d.minY}):(m={x:d.minX,y:d.maxY},x={x:d.maxX,y:d.minY});var A=Math.tan(l),P=A*A,L=(x.x-m.x+A*(x.y-m.y))/(P+1)+m.x,B=A*(x.x-m.x+A*(x.y-m.y))/(P+1)+m.y,U=a.createLinearGradient(m.x,m.y,L,B);return _h(f,U),U}function Kh(a,n,t){var s=KE.exec(t),l=parseFloat(s[1]),f=parseFloat(s[2]),d=parseFloat(s[3]),m=s[4];if(d===0){var x=m.match(xu);return x[x.length-1].split(":")[1]}var A=n.getBBox(),P=A.maxX-A.minX,L=A.maxY-A.minY,B=Math.sqrt(P*P+L*L)/2,U=a.createRadialGradient(A.minX+P*l,A.minY+L*f,0,A.minX+P/2,A.minY+L/2,d*B);return _h(m,U),U}function k0(a,n,t){if(n.get("patternSource")&&n.get("patternSource")===t)return n.get("pattern");var s,l,f=bm.exec(t),d=f[1],m=f[2];function x(){s=a.createPattern(l,d),n.set("pattern",s),n.set("patternSource",t)}switch(d){case"a":d="repeat";break;case"x":d="repeat-x";break;case"y":d="repeat-y";break;case"n":d="no-repeat";break;default:d="no-repeat"}return l=new Image,m.match(/^data:/i)||(l.crossOrigin="Anonymous"),l.src=m,l.complete?x():(l.onload=x,l.src=l.src),s}function L0(a,n,t){var s=n.getBBox();if(isNaN(s.x)||isNaN(s.y)||isNaN(s.width)||isNaN(s.height))return t;if((0,E.HD)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return qE(a,n,t);if(t[0]==="r")return Kh(a,n,t);if(t[0]==="p")return k0(a,n,t)}return t}if(t instanceof CanvasPattern)return t}function Ag(a){var n=0,t=0,s=0,l=0;return(0,E.kJ)(a)?a.length===1?n=t=s=l=a[0]:a.length===2?(n=s=a[0],t=l=a[1]):a.length===3?(n=a[0],t=l=a[1],s=a[2]):(n=a[0],t=a[1],s=a[2],l=a[3]):n=t=s=l=a,[n,t,s,l]}function Ru(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function jf(a,n){return Ru(a)*Ru(n)?(a[0]*n[0]+a[1]*n[1])/(Ru(a)*Ru(n)):1}function Qd(a,n){return(a[0]*n[1]<a[1]*n[0]?-1:1)*Math.acos(jf(a,n))}function fd(a,n){var t=n[1],s=n[2],l=(0,E.wQ)((0,E.c$)(n[3]),Math.PI*2),f=n[4],d=n[5],m=a[0],x=a[1],A=n[6],P=n[7],L=Math.cos(l)*(m-A)/2+Math.sin(l)*(x-P)/2,B=-1*Math.sin(l)*(m-A)/2+Math.cos(l)*(x-P)/2,U=L*L/(t*t)+B*B/(s*s);U>1&&(t*=Math.sqrt(U),s*=Math.sqrt(U));var Y=t*t*(B*B)+s*s*(L*L),se=Y?Math.sqrt((t*t*(s*s)-Y)/Y):1;f===d&&(se*=-1),isNaN(se)&&(se=0);var be=s?se*t*B/s:0,Ee=t?se*-s*L/t:0,it=(m+A)/2+Math.cos(l)*be-Math.sin(l)*Ee,gt=(x+P)/2+Math.sin(l)*be+Math.cos(l)*Ee,xt=[(L-be)/t,(B-Ee)/s],Bt=[(-1*L-be)/t,(-1*B-Ee)/s],_r=Qd([1,0],xt),Or=Qd(xt,Bt);return jf(xt,Bt)<=-1&&(Or=Math.PI),jf(xt,Bt)>=1&&(Or=0),d===0&&Or>0&&(Or=Or-2*Math.PI),d===1&&Or<0&&(Or=Or+2*Math.PI),{cx:it,cy:gt,rx:h_(a,[A,P])?0:t,ry:h_(a,[A,P])?0:s,startAngle:_r,endAngle:_r+Or,xRotation:l,arcFlag:f,sweepFlag:d}}var hd=Math.sin,pd=Math.cos,Tg=Math.atan2,dd=Math.PI;function D0(a,n,t,s,l,f,d){var m=n.stroke,x=n.lineWidth,A=t-l,P=s-f,L=Tg(P,A),B=new Mx({type:"path",canvas:a.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*pd(dd/6)+","+10*hd(dd/6)+" L0,0 L"+10*pd(dd/6)+",-"+10*hd(dd/6),stroke:m,lineWidth:x}});B.translate(l,f),B.rotateAtPoint(l,f,L),a.set(d?"startArrowShape":"endArrowShape",B)}function Sm(a,n,t,s,l,f,d){var m=n.startArrow,x=n.endArrow,A=n.stroke,P=n.lineWidth,L=d?m:x,B=L.d,U=L.fill,Y=L.stroke,se=L.lineWidth,be=(0,M._T)(L,["d","fill","stroke","lineWidth"]),Ee=t-l,it=s-f,gt=Tg(it,Ee);B&&(l=l-pd(gt)*B,f=f-hd(gt)*B);var xt=new Mx({type:"path",canvas:a.get("canvas"),isArrowShape:!0,attrs:(0,M.pi)((0,M.pi)({},be),{stroke:Y||A,lineWidth:se||P,fill:U})});xt.translate(l,f),xt.rotateAtPoint(l,f,gt),a.set(d?"startArrowShape":"endArrowShape",xt)}function Fp(a,n,t,s,l){var f=Tg(s-n,t-a);return{dx:pd(f)*l,dy:hd(f)*l}}function Em(a,n,t,s,l,f){typeof n.startArrow=="object"?Sm(a,n,t,s,l,f,!0):n.startArrow?D0(a,n,t,s,l,f,!0):a.set("startArrowShape",null)}function wm(a,n,t,s,l,f){typeof n.endArrow=="object"?Sm(a,n,t,s,l,f,!1):n.endArrow?D0(a,n,t,s,l,f,!1):a.set("startArrowShape",null)}var zc={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Bp(a,n){var t=n.attr();for(var s in t){var l=t[s],f=zc[s]?zc[s]:s;f==="matrix"&&l?a.transform(l[0],l[1],l[3],l[4],l[6],l[7]):f==="lineDash"&&a.setLineDash?(0,E.kJ)(l)&&a.setLineDash(l):(f==="strokeStyle"||f==="fillStyle"?l=L0(a,n,l):f==="globalAlpha"&&(l=l*a.globalAlpha),a[f]=l)}}function vd(a,n,t){for(var s=0;s<n.length;s++){var l=n[s];l.cfg.visible?l.draw(a,t):l.skipDraw()}}function Iu(a,n,t){var s=a.get("refreshElements");(0,E.S6)(s,function(l){if(l!==a)for(var f=l.cfg.parent;f&&f!==a&&!f.cfg.refresh;)f.cfg.refresh=!0,f=f.cfg.parent}),s[0]===a?qh(n,t):Cm(n,t)}function Cm(a,n){for(var t=0;t<a.length;t++){var s=a[t];if(s.cfg.visible)if(s.cfg.hasChanged)s.cfg.refresh=!0,s.isGroup()&&qh(s.cfg.children,n);else if(s.cfg.refresh)s.isGroup()&&Cm(s.cfg.children,n);else{var l=gd(s,n);s.cfg.refresh=l,l&&s.isGroup()&&Cm(s.cfg.children,n)}}}function Am(a){for(var n=0;n<a.length;n++){var t=a[n];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Am(t.cfg.children)}}function qh(a,n){for(var t=0;t<a.length;t++){var s=a[t];s.cfg.visible&&(s.cfg.refresh=!0,s.isGroup()&&qh(s.get("children"),n))}}function gd(a,n){var t=a.cfg.cacheCanvasBBox,s=a.cfg.isInView&&t&&Cg(t,n);return s}function md(a,n,t,s){var l=t.path,f=t.startArrow,d=t.endArrow;if(l){var m=[0,0],x=[0,0],A={dx:0,dy:0};n.beginPath();for(var P=0;P<l.length;P++){var L=l[P],B=L[0];if(P===0&&f&&f.d){var U=a.getStartTangent();A=Fp(U[0][0],U[0][1],U[1][0],U[1][1],f.d)}else if(P===l.length-2&&l[P+1][0]==="Z"&&d&&d.d){var Y=l[P+1];if(Y[0]==="Z"){var U=a.getEndTangent();A=Fp(U[0][0],U[0][1],U[1][0],U[1][1],d.d)}}else if(P===l.length-1&&d&&d.d&&l[0]!=="Z"){var U=a.getEndTangent();A=Fp(U[0][0],U[0][1],U[1][0],U[1][1],d.d)}var se=A.dx,be=A.dy;switch(B){case"M":n.moveTo(L[1]-se,L[2]-be),x=[L[1],L[2]];break;case"L":n.lineTo(L[1]-se,L[2]-be);break;case"Q":n.quadraticCurveTo(L[1],L[2],L[3]-se,L[4]-be);break;case"C":n.bezierCurveTo(L[1],L[2],L[3],L[4],L[5]-se,L[6]-be);break;case"A":{var Ee=void 0;s?(Ee=s[P],Ee||(Ee=fd(m,L),s[P]=Ee)):Ee=fd(m,L);var it=Ee.cx,gt=Ee.cy,xt=Ee.rx,Bt=Ee.ry,_r=Ee.startAngle,Or=Ee.endAngle,Gr=Ee.xRotation,mn=Ee.sweepFlag;if(n.ellipse)n.ellipse(it,gt,xt,Bt,Gr,_r,Or,1-mn);else{var cn=xt>Bt?xt:Bt,Nn=xt>Bt?1:xt/Bt,hi=xt>Bt?Bt/xt:1;n.translate(it,gt),n.rotate(Gr),n.scale(Nn,hi),n.arc(0,0,cn,_r,Or,1-mn),n.scale(1/Nn,1/hi),n.rotate(-Gr),n.translate(-it,-gt)}break}case"Z":n.closePath();break;default:break}if(B==="Z")m=x;else{var Wi=L.length;m=[L[Wi-2],L[Wi-1]]}}}}function Jd(a,n){var t=a.get("canvas");t&&(n==="remove"&&(a._cacheCanvasBBox=a.get("cacheCanvasBBox")),a.get("hasChanged")||(a.set("hasChanged",!0),a.cfg.parent&&a.cfg.parent.get("hasChanged")||(t.refreshElement(a,n,t),t.get("autoDraw")&&t.draw())))}function Fv(a){var n;if(a.destroyed)n=a._cacheCanvasBBox;else{var t=a.get("cacheCanvasBBox"),s=t&&!!(t.width&&t.height),l=a.getCanvasBBox(),f=l&&!!(l.width&&l.height);s&&f?n=f_(t,l):s?n=t:f&&(n=l)}return n}function d_(a){if(!a.length)return null;var n=[],t=[],s=[],l=[];return(0,E.S6)(a,function(f){var d=Fv(f);d&&(n.push(d.minX),t.push(d.minY),s.push(d.maxX),l.push(d.maxY))}),{minX:(0,E.VV)(n),minY:(0,E.VV)(t),maxX:(0,E.Fp)(s),maxY:(0,E.Fp)(l)}}function v_(a,n){return!a||!n||!Cg(a,n)?null:{minX:Math.max(a.minX,n.minX),minY:Math.max(a.minY,n.minY),maxX:Math.min(a.maxX,n.maxX),maxY:Math.min(a.maxY,n.maxY)}}var g_=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.onCanvasChange=function(t){Jd(this,t)},n.prototype.getShapeBase=function(){return te},n.prototype.getGroupBase=function(){return n},n.prototype._applyClip=function(t,s){s&&(t.save(),Bp(t,s),s.createPath(t),t.restore(),t.clip(),s._afterDraw())},n.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,s=[],l=[];(0,E.S6)(t,function(B){var U=B.cfg.cacheCanvasBBox;U&&B.cfg.isInView&&(s.push(U.minX,U.maxX),l.push(U.minY,U.maxY))});var f=null;if(s.length){var d=(0,E.VV)(s),m=(0,E.Fp)(s),x=(0,E.VV)(l),A=(0,E.Fp)(l);f={minX:d,minY:x,x:d,y:x,maxX:m,maxY:A,width:m-d,height:A-x};var P=this.cfg.canvas;if(P){var L=P.getViewRange();this.set("isInView",Cg(f,L))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",f)},n.prototype.draw=function(t,s){var l=this.cfg.children,f=s?this.cfg.refresh:!0;l.length&&f&&(t.save(),Bp(t,this),this._applyClip(t,this.getClip()),vd(t,l,s),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},n}(We.AbstractGroup),Tm=g_,F0=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.getShapeBase=function(){return te},n.prototype.getGroupBase=function(){return Tm},n.prototype.onCanvasChange=function(t){Jd(this,t)},n.prototype.calculateBBox=function(){var t=this.get("type"),s=this.getHitLineWidth(),l=(0,We.getBBoxMethod)(t),f=l(this),d=s/2,m=f.x-d,x=f.y-d,A=f.x+f.width+d,P=f.y+f.height+d;return{x:m,minX:m,y:x,minY:x,width:f.width+s,height:f.height+s,maxX:A,maxY:P}},n.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},n.prototype.isStroke=function(){return!!this.attrs.stroke},n.prototype._applyClip=function(t,s){s&&(t.save(),Bp(t,s),s.createPath(t),t.restore(),t.clip(),s._afterDraw())},n.prototype.draw=function(t,s){var l=this.cfg.clipShape;if(s){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var f=this.getCanvasBBox();if(!Cg(s,f)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),Bp(t,this),this._applyClip(t,l),this.drawPath(t),t.restore(),this._afterDraw()},n.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},n.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var s=this.getCanvasBBox(),l=Cg(s,t);this.set("isInView",l),l?this.set("cacheCanvasBBox",s):this.set("cacheCanvasBBox",null)}},n.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},n.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},n.prototype.fill=function(t){t.fill()},n.prototype.stroke=function(t){t.stroke()},n.prototype.strokeAndFill=function(t){var s=this.attrs,l=s.lineWidth,f=s.opacity,d=s.strokeOpacity,m=s.fillOpacity;this.isFill()&&(!(0,E.UM)(m)&&m!==1?(t.globalAlpha=m,this.fill(t),t.globalAlpha=f):this.fill(t)),this.isStroke()&&l>0&&(!(0,E.UM)(d)&&d!==1&&(t.globalAlpha=d),this.stroke(t)),this.afterDrawPath(t)},n.prototype.createPath=function(t){},n.prototype.afterDrawPath=function(t){},n.prototype.isInShape=function(t,s){var l=this.isStroke(),f=this.isFill(),d=this.getHitLineWidth();return this.isInStrokeOrPath(t,s,l,f,d)},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){return!1},n.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},n}(We.AbstractShape),yt=F0,Wf=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,r:0})},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=m.x,A=m.y,P=m.r,L=d/2,B=Dv(x,A,t,s);return f&&l?B<=P+L:f?B<=P:l?B>=P-L&&B<=P+L:!1},n.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.r;t.beginPath(),t.arc(l,f,d,0,Math.PI*2,!1),t.closePath()},n}(yt),B0=Wf;function ev(a,n,t,s){return a/(t*t)+n/(s*s)}var Mm=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,rx:0,ry:0})},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=d/2,A=m.x,P=m.y,L=m.rx,B=m.ry,U=(t-A)*(t-A),Y=(s-P)*(s-P);return f&&l?ev(U,Y,L+x,B+x)<=1:f?ev(U,Y,L,B)<=1:l?ev(U,Y,L-x,B-x)>=1&&ev(U,Y,L+x,B+x)<=1:!1},n.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.rx,m=s.ry;if(t.beginPath(),t.ellipse)t.ellipse(l,f,d,m,0,0,Math.PI*2,!1);else{var x=d>m?d:m,A=d>m?1:d/m,P=d>m?m/d:1;t.save(),t.translate(l,f),t.scale(A,P),t.arc(0,0,x,0,Math.PI*2),t.restore(),t.closePath()}},n}(yt),N0=Mm;function Mg(a){return a instanceof HTMLElement&&(0,E.HD)(a.nodeName)&&a.nodeName.toUpperCase()==="CANVAS"}var z0=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0})},n.prototype.initAttrs=function(t){this._setImage(t.img)},n.prototype.isStroke=function(){return!1},n.prototype.isOnlyHitBox=function(){return!0},n.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},n.prototype._setImage=function(t){var s=this,l=this.attrs;if((0,E.HD)(t)){var f=new Image;f.onload=function(){if(s.destroyed)return!1;s.attr("img",f),s.set("loading",!1),s._afterLoading();var d=s.get("callback");d&&d.call(s)},f.crossOrigin="Anonymous",f.src=t,this.set("loading",!0)}else t instanceof Image?(l.width||(l.width=t.width),l.height||(l.height=t.height)):Mg(t)&&(l.width||(l.width=Number(t.getAttribute("width"))),l.height||(l.height,Number(t.getAttribute("height"))))},n.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),t==="img"&&this._setImage(s)},n.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var s=this.attr(),l=s.x,f=s.y,d=s.width,m=s.height,x=s.sx,A=s.sy,P=s.swidth,L=s.sheight,B=s.img;(B instanceof Image||Mg(B))&&(!(0,E.UM)(x)&&!(0,E.UM)(A)&&!(0,E.UM)(P)&&!(0,E.UM)(L)?t.drawImage(B,x,A,P,L,l,f,d,m):t.drawImage(B,l,f,d,m))},n}(yt),U0=z0,Pu=k(32793);function Qh(a,n,t,s,l,f,d){var m=Math.min(a,t),x=Math.max(a,t),A=Math.min(n,s),P=Math.max(n,s),L=l/2;return f>=m-L&&f<=x+L&&d>=A-L&&d<=P+L?Pu.x1.pointToLine(a,n,t,s,f,d)<=l/2:!1}var Bv=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this.setArrow()},n.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),this.setArrow()},n.prototype.setArrow=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2,m=t.startArrow,x=t.endArrow;m&&Em(this,t,f,d,s,l),x&&wm(this,t,s,l,f,d)},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){if(!l||!d)return!1;var m=this.attr(),x=m.x1,A=m.y1,P=m.x2,L=m.y2;return Qh(x,A,P,L,d,t,s)},n.prototype.createPath=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2,x=s.startArrow,A=s.endArrow,P={dx:0,dy:0},L={dx:0,dy:0};x&&x.d&&(P=Fp(l,f,d,m,s.startArrow.d)),A&&A.d&&(L=Fp(l,f,d,m,s.endArrow.d)),t.beginPath(),t.moveTo(l+P.dx,f+P.dy),t.lineTo(d-L.dx,m-L.dy)},n.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},n.prototype.getTotalLength=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2;return Pu.x1.length(s,l,f,d)},n.prototype.getPoint=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2;return Pu.x1.pointAt(l,f,d,m,t)},n}(yt),Z0=Bv,Rg={circle:function(a,n,t){return[["M",a-t,n],["A",t,t,0,1,0,a+t,n],["A",t,t,0,1,0,a-t,n]]},square:function(a,n,t){return[["M",a-t,n-t],["L",a+t,n-t],["L",a+t,n+t],["L",a-t,n+t],["Z"]]},diamond:function(a,n,t){return[["M",a-t,n],["L",a,n-t],["L",a+t,n],["L",a,n+t],["Z"]]},triangle:function(a,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,n+s],["L",a,n-s],["L",a+t,n+s],["Z"]]},"triangle-down":function(a,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,n-s],["L",a+t,n-s],["L",a,n+s],["Z"]]}},m_=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initAttrs=function(t){this._resetParamsCache()},n.prototype._resetParamsCache=function(){this.set("paramsCache",{})},n.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},n.prototype.isOnlyHitBox=function(){return!0},n.prototype._getR=function(t){return(0,E.UM)(t.r)?t.radius:t.r},n.prototype._getPath=function(){var t=this.attr(),s=t.x,l=t.y,f=t.symbol||"circle",d=this._getR(t),m,x;if((0,E.mf)(f))m=f,x=m(s,l,d),x=(0,Tp.wb)(x);else{if(m=n.Symbols[f],!m)return console.warn(f+" marker is not supported."),null;x=m(s,l,d)}return x},n.prototype.createPath=function(t){var s=this._getPath(),l=this.get("paramsCache");md(this,t,{path:s},l)},n.Symbols=Rg,n}(yt),y_=m_;function __(a,n,t){var s=(0,We.getOffScreenContext)();return a.createPath(s),s.isPointInPath(n,t)}var x_=1e-6;function Rm(a){return Math.abs(a)<x_?0:a<0?-1:1}function b_(a,n,t){return(t[0]-a[0])*(n[1]-a[1])===(n[0]-a[0])*(t[1]-a[1])&&Math.min(a[0],n[0])<=t[0]&&t[0]<=Math.max(a[0],n[0])&&Math.min(a[1],n[1])<=t[1]&&t[1]<=Math.max(a[1],n[1])}function V0(a,n,t){var s=!1,l=a.length;if(l<=2)return!1;for(var f=0;f<l;f++){var d=a[f],m=a[(f+1)%l];if(b_(d,m,[n,t]))return!0;Rm(d[1]-t)>0!=Rm(m[1]-t)>0&&Rm(n-(t-d[1])*(d[0]-m[0])/(d[1]-m[1])-d[0])<0&&(s=!s)}return s}function Nv(a,n,t,s,l,f,d,m){var x=(Math.atan2(m-n,d-a)+Math.PI*2)%(Math.PI*2);if(x<s||x>l)return!1;var A={x:a+t*Math.cos(x),y:n+t*Math.sin(x)};return Dv(A.x,A.y,d,m)<=f/2}var Ig=no.vs;function S_(a){for(var n=!1,t=a.length,s=0;s<t;s++){var l=a[s],f=l[0];if(f==="C"||f==="A"||f==="Q"){n=!0;break}}return n}function xh(a,n,t,s,l){for(var f=!1,d=n/2,m=0;m<a.length;m++){var x=a[m],A=x.currentPoint,P=x.params,L=x.prePoint,B=x.box;if(!(B&&!cd(B.x-d,B.y-d,B.width+n,B.height+n,t,s))){switch(x.command){case"L":case"Z":f=Qh(L[0],L[1],A[0],A[1],n,t,s);break;case"Q":var U=Pu.lD.pointDistance(L[0],L[1],P[1],P[2],P[3],P[4],t,s);f=U<=n/2;break;case"C":var Y=Pu.Ll.pointDistance(L[0],L[1],P[1],P[2],P[3],P[4],P[5],P[6],t,s,l);f=Y<=n/2;break;case"A":var se=x.arcParams,be=se.cx,Ee=se.cy,it=se.rx,gt=se.ry,xt=se.startAngle,Bt=se.endAngle,_r=se.xRotation,Or=[t,s,1],Gr=it>gt?it:gt,mn=it>gt?1:it/gt,cn=it>gt?gt/it:1,Nn=Ig(null,[["t",-be,-Ee],["r",-_r],["s",1/mn,1/cn]]);uo.transformMat3(Or,Or,Nn),f=Nv(0,0,Gr,xt,Bt,n,Or[0],Or[1]);break;default:break}if(f)break}}return f}function Pg(a){for(var n=a.length,t=[],s=[],l=[],f=0;f<n;f++){var d=a[f],m=d[0];m==="M"?(l.length&&(s.push(l),l=[]),l.push([d[1],d[2]])):m==="Z"?l.length&&(t.push(l),l=[]):l.push([d[1],d[2]])}return l.length>0&&s.push(l),{polygons:t,polylines:s}}var yd=(0,M.pi)({hasArc:S_,extractPolygons:Pg,isPointInStroke:xh},We.PathUtil);function zv(a,n,t){for(var s=!1,l=0;l<a.length;l++){var f=a[l];if(s=V0(f,n,t),s)break}return s}var H0=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},n.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),t==="path"&&this._setPathArr(s),this.setArrow()},n.prototype._setPathArr=function(t){this.attrs.path=(0,Tp.wb)(t);var s=yd.hasArc(t);this.set("hasArc",s),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},n.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,Tp.zx)(this.attr("path")),this.set("segments",t)),t},n.prototype.setArrow=function(){var t=this.attr(),s=t.startArrow,l=t.endArrow;if(s){var f=this.getStartTangent();Em(this,t,f[0][0],f[0][1],f[1][0],f[1][1])}if(l){var f=this.getEndTangent();wm(this,t,f[0][0],f[0][1],f[1][0],f[1][1])}},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.getSegments(),x=this.get("hasArc"),A=!1;if(l){var P=this.getTotalLength();A=yd.isPointInStroke(m,d,t,s,P)}if(!A&&f)if(x)A=__(this,t,s);else{var L=this.attr("path"),B=yd.extractPolygons(L);A=zv(B.polygons,t,s)||zv(B.polylines,t,s)}return A},n.prototype.createPath=function(t){var s=this.attr(),l=this.get("paramsCache");md(this,t,s,l)},n.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},n.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,E.UM)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},n.prototype.getPoint=function(t){var s=this.get("tCache");s||(this._calculateCurve(),this._setTcache(),s=this.get("tCache"));var l,f,d=this.get("curve");if(!s||s.length===0)return d?{x:d[0][1],y:d[0][2]}:null;(0,E.S6)(s,function(P,L){t>=P[0]&&t<=P[1]&&(l=(t-P[0])/(P[1]-P[0]),f=L)});var m=d[f];if((0,E.UM)(m)||(0,E.UM)(f))return null;var x=m.length,A=d[f+1];return Pu.Ll.pointAt(m[x-2],m[x-1],A[1],A[2],A[3],A[4],A[5],A[6],l)},n.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",yd.pathToCurve(t))},n.prototype._setTcache=function(){var t=0,s=0,l=[],f,d,m,x,A=this.get("curve");if(A){if((0,E.S6)(A,function(P,L){m=A[L+1],x=P.length,m&&(t+=Pu.Ll.length(P[x-2],P[x-1],m[1],m[2],m[3],m[4],m[5],m[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,E.S6)(A,function(P,L){m=A[L+1],x=P.length,m&&(f=[],f[0]=s/t,d=Pu.Ll.length(P[x-2],P[x-1],m[1],m[2],m[3],m[4],m[5],m[6]),s+=d||0,f[1]=s/t,l.push(f))}),this.set("tCache",l)}},n.prototype.getStartTangent=function(){var t=this.getSegments(),s;if(t.length>1){var l=t[0].currentPoint,f=t[1].currentPoint,d=t[1].startTangent;s=[],d?(s.push([l[0]-d[0],l[1]-d[1]]),s.push([l[0],l[1]])):(s.push([f[0],f[1]]),s.push([l[0],l[1]]))}return s},n.prototype.getEndTangent=function(){var t=this.getSegments(),s=t.length,l;if(s>1){var f=t[s-2].currentPoint,d=t[s-1].currentPoint,m=t[s-1].endTangent;l=[],m?(l.push([d[0]-m[0],d[1]-m[1]]),l.push([d[0],d[1]])):(l.push([f[0],f[1]]),l.push([d[0],d[1]]))}return l},n}(yt),Mx=H0;function QE(a,n,t,s,l){var f=a.length;if(f<2)return!1;for(var d=0;d<f-1;d++){var m=a[d][0],x=a[d][1],A=a[d+1][0],P=a[d+1][1];if(Qh(m,x,A,P,n,t,s))return!0}if(l){var L=a[0],B=a[f-1];if(Qh(L[0],L[1],B[0],B[1],n,t,s))return!0}return!1}var JE=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr().points,x=!1;return l&&(x=QE(m,d,t,s,!0)),!x&&f&&(x=V0(m,t,s)),x},n.prototype.createPath=function(t){var s=this.attr(),l=s.points;if(!(l.length<2)){t.beginPath();for(var f=0;f<l.length;f++){var d=l[f];f===0?t.moveTo(d[0],d[1]):t.lineTo(d[0],d[1])}t.closePath()}},n}(yt),WR=JE,Uc=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.initAttrs=function(t){this.setArrow()},n.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},n.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},n.prototype.setArrow=function(){var t=this.attr(),s=this.attrs,l=s.points,f=s.startArrow,d=s.endArrow,m=l.length,x=l[0][0],A=l[0][1],P=l[m-1][0],L=l[m-1][1];f&&Em(this,t,l[1][0],l[1][1],x,A),d&&wm(this,t,l[m-2][0],l[m-2][1],P,L)},n.prototype.isFill=function(){return!1},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){if(!l||!d)return!1;var m=this.attr().points;return QE(m,d,t,s,!1)},n.prototype.isStroke=function(){return!0},n.prototype.createPath=function(t){var s=this.attr(),l=s.points,f=s.startArrow,d=s.endArrow,m=l.length;if(!(l.length<2)){var x=l[0][0],A=l[0][1],P=l[m-1][0],L=l[m-1][1];if(f&&f.d){var B=Fp(x,A,l[1][0],l[1][1],f.d);x+=B.dx,A+=B.dy}if(d&&d.d){var B=Fp(l[m-2][0],l[m-2][1],P,L,d.d);P-=B.dx,L-=B.dy}t.beginPath(),t.moveTo(x,A);for(var U=0;U<m-1;U++){var Y=l[U];t.lineTo(Y[0],Y[1])}t.lineTo(P,L)}},n.prototype.afterDrawPath=function(t){var s=this.get("startArrowShape"),l=this.get("endArrowShape");s&&s.draw(t),l&&l.draw(t)},n.prototype.getTotalLength=function(){var t=this.attr().points,s=this.get("totalLength");return(0,E.UM)(s)?(this.set("totalLength",Pu.aH.length(t)),this.get("totalLength")):s},n.prototype.getPoint=function(t){var s=this.attr().points,l=this.get("tCache");l||(this._setTcache(),l=this.get("tCache"));var f,d;return(0,E.S6)(l,function(m,x){t>=m[0]&&t<=m[1]&&(f=(t-m[0])/(m[1]-m[0]),d=x)}),Pu.x1.pointAt(s[d][0],s[d][1],s[d+1][0],s[d+1][1],f)},n.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var s=this.getTotalLength();if(!(s<=0)){var l=0,f=[],d,m;(0,E.S6)(t,function(x,A){t[A+1]&&(d=[],d[0]=l/s,m=Pu.x1.length(x[0],x[1],t[A+1][0],t[A+1][1]),l+=m,d[1]=l/s,f.push(d))}),this.set("tCache",f)}}},n.prototype.getStartTangent=function(){var t=this.attr().points,s=[];return s.push([t[1][0],t[1][1]]),s.push([t[0][0],t[0][1]]),s},n.prototype.getEndTangent=function(){var t=this.attr().points,s=t.length-1,l=[];return l.push([t[s-1][0],t[s-1][1]]),l.push([t[s][0],t[s][1]]),l},n}(yt),GR=Uc;function $R(a,n,t,s,l,f,d){var m=l/2;return cd(a-m,n-m,t,l,f,d)||cd(a+t-m,n-m,l,s,f,d)||cd(a+m,n+s-m,t,l,f,d)||cd(a-m,n+m,l,s,f,d)}function XR(a,n,t,s,l,f,d,m){var x=f/2;return Qh(a+l,n,a+t-l,n,f,d,m)||Qh(a+t,n+l,a+t,n+s-l,f,d,m)||Qh(a+t-l,n+s,a+l,n+s,f,d,m)||Qh(a,n+s-l,a,n+l,f,d,m)||Nv(a+t-l,n+l,l,1.5*Math.PI,2*Math.PI,f,d,m)||Nv(a+t-l,n+s-l,l,0,.5*Math.PI,f,d,m)||Nv(a+l,n+s-l,l,.5*Math.PI,Math.PI,f,d,m)||Nv(a+l,n+l,l,Math.PI,1.5*Math.PI,f,d,m)}var YR=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0,radius:0})},n.prototype.isInStrokeOrPath=function(t,s,l,f,d){var m=this.attr(),x=m.x,A=m.y,P=m.width,L=m.height,B=m.radius;if(B){var Y=!1;return l&&(Y=XR(x,A,P,L,B,d,t,s)),!Y&&f&&(Y=__(this,t,s)),Y}else{var U=d/2;if(f&&l)return cd(x-U,A-U,P+U,L+U,t,s);if(f)return cd(x,A,P,L,t,s);if(l)return $R(x,A,P,L,d,t,s)}},n.prototype.createPath=function(t){var s=this.attr(),l=s.x,f=s.y,d=s.width,m=s.height,x=s.radius;if(t.beginPath(),x===0)t.rect(l,f,d,m);else{var A=Ag(x),P=A[0],L=A[1],B=A[2],U=A[3];t.moveTo(l+P,f),t.lineTo(l+d-L,f),L!==0&&t.arc(l+d-L,f+L,L,-Math.PI/2,0),t.lineTo(l+d,f+m-B),B!==0&&t.arc(l+d-B,f+m-B,B,0,Math.PI/2),t.lineTo(l+U,f+m),U!==0&&t.arc(l+U,f+m-U,U,Math.PI/2,Math.PI),t.lineTo(l,f+P),P!==0&&t.arc(l+P,f+P,P,Math.PI,Math.PI*1.5),t.closePath()}},n}(yt),j0=YR,e2=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},n.prototype.isOnlyHitBox=function(){return!0},n.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},n.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,We.assembleFont)(t)},n.prototype._setText=function(t){var s=null;(0,E.HD)(t)&&t.indexOf(`
`)!==-1&&(s=t.split(`
`)),this.set("textArr",s)},n.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(s)},n.prototype._getSpaceingY=function(){var t=this.attrs,s=t.lineHeight,l=t.fontSize*1;return s?s-l:l*.14},n.prototype._drawTextArr=function(t,s,l){var f=this.attrs,d=f.textBaseline,m=f.x,x=f.y,A=f.fontSize*1,P=this._getSpaceingY(),L=(0,We.getTextHeight)(f.text,f.fontSize,f.lineHeight),B;(0,E.S6)(s,function(U,Y){B=x+Y*(P+A)-L+A,d==="middle"&&(B+=L-A-(L-A)/2),d==="top"&&(B+=L-A),(0,E.UM)(U)||(l?t.fillText(U,m,B):t.strokeText(U,m,B))})},n.prototype._drawText=function(t,s){var l=this.attr(),f=l.x,d=l.y,m=this.get("textArr");if(m)this._drawTextArr(t,m,s);else{var x=l.text;(0,E.UM)(x)||(s?t.fillText(x,f,d):t.strokeText(x,f,d))}},n.prototype.strokeAndFill=function(t){var s=this.attrs,l=s.lineWidth,f=s.opacity,d=s.strokeOpacity,m=s.fillOpacity;this.isStroke()&&l>0&&(!(0,E.UM)(d)&&d!==1&&(t.globalAlpha=f),this.stroke(t)),this.isFill()&&(!(0,E.UM)(m)&&m!==1?(t.globalAlpha=m,this.fill(t),t.globalAlpha=f):this.fill(t)),this.afterDrawPath(t)},n.prototype.fill=function(t){this._drawText(t,!0)},n.prototype.stroke=function(t){this._drawText(t,!1)},n}(yt),t2=e2;function r2(a,n){if(n){var t=(0,We.invert)(n);return(0,We.multiplyVec2)(t,a)}return a}function E_(a,n,t){var s=a.getTotalMatrix();if(s){var l=r2([n,t,1],s),f=l[0],d=l[1];return[f,d]}return[n,t]}function Rx(a,n,t){if(a.isCanvas&&a.isCanvas())return!0;if(!(0,We.isAllowCapture)(a)||a.cfg.isInView===!1)return!1;if(a.cfg.clipShape){var s=E_(a,n,t),l=s[0],f=s[1];if(a.isClipped(l,f))return!1}var d=a.cfg.cacheCanvasBBox||a.getCanvasBBox();return n>=d.minX&&n<=d.maxX&&t>=d.minY&&t<=d.maxY}function n2(a,n,t){if(!Rx(a,n,t))return null;for(var s=null,l=a.getChildren(),f=l.length,d=f-1;d>=0;d--){var m=l[d];if(m.isGroup())s=n2(m,n,t);else if(Rx(m,n,t)){var x=m,A=E_(m,n,t),P=A[0],L=A[1];x.isInShape(P,L)&&(s=m)}if(s)break}return s}var KR=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},n.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},n.prototype.getShapeBase=function(){return te},n.prototype.getGroupBase=function(){return Tm},n.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||xm();return t>=1?Math.ceil(t):1},n.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},n.prototype.createDom=function(){var t=document.createElement("canvas"),s=t.getContext("2d");return this.set("context",s),t},n.prototype.setDOMSize=function(t,s){a.prototype.setDOMSize.call(this,t,s);var l=this.get("context"),f=this.get("el"),d=this.getPixelRatio();f.width=d*t,f.height=d*s,d>1&&l.scale(d,d)},n.prototype.clear=function(){a.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),s=this.get("el");t.clearRect(0,0,s.width,s.height)},n.prototype.getShape=function(t,s){var l;return this.get("quickHit")?l=n2(this,t,s):l=a.prototype.getShape.call(this,t,s,null),l},n.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),s=this.getViewRange(),l;if(t.length&&t[0]===this)l=s;else if(l=d_(t),l){l.minX=Math.floor(l.minX),l.minY=Math.floor(l.minY),l.maxX=Math.ceil(l.maxX),l.maxY=Math.ceil(l.maxY),l.maxY+=1;var f=this.get("clipView");f&&(l=v_(l,s))}return l},n.prototype.refreshElement=function(t){var s=this.get("refreshElements");s.push(t)},n.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,E.VS)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},n.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},n.prototype._drawAll=function(){var t=this.get("context"),s=this.get("el"),l=this.getChildren();t.clearRect(0,0,s.width,s.height),Bp(t,this),vd(t,l),this.set("refreshElements",[])},n.prototype._drawRegion=function(){var t=this.get("context"),s=this.get("refreshElements"),l=this.getChildren(),f=this._getRefreshRegion();f?(t.clearRect(f.minX,f.minY,f.maxX-f.minX,f.maxY-f.minY),t.save(),t.beginPath(),t.rect(f.minX,f.minY,f.maxX-f.minX,f.maxY-f.minY),t.clip(),Bp(t,this),Iu(this,l,f),vd(t,l,f),t.restore()):s.length&&Am(s),(0,E.S6)(s,function(d){d.get("hasChanged")&&d.set("hasChanged",!1)}),this.set("refreshElements",[])},n.prototype._startDraw=function(){var t=this,s=this.get("drawFrame");s||(s=(0,E.U7)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",s))},n.prototype.skipDraw=function(){},n.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},n}(We.AbstractCanvas),Ix=KR,Px="0.5.12",W0={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Ho={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},Ox=null;function Gf(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function w_(a){var n=W0[a.type],t=a.getParent();if(!n)throw new Error("the type "+a.type+" is not supported by svg");var s=Gf(n);if(a.get("id")&&(s.id=a.get("id")),a.set("el",s),a.set("attrs",{}),t){var l=t.get("el");l||(l=t.createDom(),t.set("el",l)),l.appendChild(s)}return s}function G0(a,n){var t=a.get("el"),s=(0,E.qo)(t.children).sort(n),l=document.createDocumentFragment();s.forEach(function(f){l.appendChild(f)}),t.appendChild(l)}function $0(a,n){var t=a.parentNode,s=Array.from(t.childNodes).filter(function(m){return m.nodeType===1&&m.nodeName.toLowerCase()!=="defs"}),l=s[n],f=s.indexOf(a);if(l){if(f>n)t.insertBefore(a,l);else if(f<n){var d=s[n+1];d?t.insertBefore(a,d):t.appendChild(a)}}else t.appendChild(a)}function $f(a,n){var t=a.cfg.el,s=a.attr(),l={dx:s.shadowOffsetX,dy:s.shadowOffsetY,blur:s.shadowBlur,color:s.shadowColor};if(!l.dx&&!l.dy&&!l.blur&&!l.color)t.removeAttribute("filter");else{var f=n.find("filter",l);f||(f=n.addShadow(l)),t.setAttribute("filter","url(#"+f+")")}}function Og(a){var n=a.attr().matrix;if(n){for(var t=a.cfg.el,s=[],l=0;l<9;l+=3)s.push(n[l]+","+n[l+1]);s=s.join(","),s.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+s+")"):console.warn("invalid matrix:",n)}}function kg(a,n){var t=a.getClip(),s=a.get("el");if(!t)s.removeAttribute("clip-path");else if(t&&!s.hasAttribute("clip-path")){w_(t),t.createPath(n);var l=n.addClip(t);s.setAttribute("clip-path","url(#"+l+")")}}function tv(a,n){n.forEach(function(t){t.draw(a)})}function i2(a,n){var t=a.get("canvas");if(t&&t.get("autoDraw")){var s=t.get("context"),l=a.getParent(),f=l?l.getChildren():[t],d=a.get("el");if(n==="remove"){var m=a.get("isClipShape");if(m){var x=d&&d.parentNode,A=x&&x.parentNode;x&&A&&A.removeChild(x)}else d&&d.parentNode&&d.parentNode.removeChild(d)}else if(n==="show")d.setAttribute("visibility","visible");else if(n==="hide")d.setAttribute("visibility","hidden");else if(n==="zIndex")$0(d,f.indexOf(a));else if(n==="sort"){var P=a.get("children");P&&P.length&&G0(a,function(L,B){return P.indexOf(L)-P.indexOf(B)?1:0})}else n==="clear"?d&&(d.innerHTML=""):n==="matrix"?Og(a):n==="clip"?kg(a,s):n==="attr"||n==="add"&&a.draw(s)}}var qR=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.isEntityGroup=function(){return!0},n.prototype.createDom=function(){var t=Gf("g");this.set("el",t);var s=this.getParent();if(s){var l=s.get("el");l||(l=s.createDom(),s.set("el",l)),l.appendChild(t)}return t},n.prototype.afterAttrsChange=function(t){a.prototype.afterAttrsChange.call(this,t);var s=this.get("canvas");if(s&&s.get("autoDraw")){var l=s.get("context");this.createPath(l,t)}},n.prototype.onCanvasChange=function(t){i2(this,t)},n.prototype.getShapeBase=function(){return pe},n.prototype.getGroupBase=function(){return n},n.prototype.draw=function(t){var s=this.getChildren(),l=this.get("el");this.get("destroyed")?l&&l.parentNode.removeChild(l):(l||this.createDom(),kg(this,t),this.createPath(t),s.length&&tv(t,s))},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){Ho[m]&&f.setAttribute(Ho[m],d)}),Og(this)},n}(We.AbstractGroup),kx=qR,a2=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},n.prototype.afterAttrsChange=function(t){a.prototype.afterAttrsChange.call(this,t);var s=this.get("canvas");if(s&&s.get("autoDraw")){var l=s.get("context");this.draw(l,t)}},n.prototype.getShapeBase=function(){return pe},n.prototype.getGroupBase=function(){return kx},n.prototype.onCanvasChange=function(t){i2(this,t)},n.prototype.calculateBBox=function(){var t=this.get("el"),s=null;if(t)s=t.getBBox();else{var l=(0,We.getBBoxMethod)(this.get("type"));l&&(s=l(this))}if(s){var f=s.x,d=s.y,m=s.width,x=s.height,A=this.getHitLineWidth(),P=A/2,L=f-P,B=d-P,U=f+m+P,Y=d+x+P;return{x:L,y:B,minX:L,minY:B,maxX:U,maxY:Y,width:m+A,height:x+A}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},n.prototype.isFill=function(){var t=this.attr(),s=t.fill,l=t.fillStyle;return(s||l||this.isClipShape())&&this.canFill},n.prototype.isStroke=function(){var t=this.attr(),s=t.stroke,l=t.strokeStyle;return(s||l)&&this.canStroke},n.prototype.draw=function(t,s){var l=this.get("el");this.get("destroyed")?l&&l.parentNode.removeChild(l):(l||w_(this),kg(this,t),this.createPath(t,s),this.shadow(t,s),this.strokeAndFill(t,s),this.transform(s))},n.prototype.createPath=function(t,s){},n.prototype.strokeAndFill=function(t,s){var l=s||this.attr(),f=l.fill,d=l.fillStyle,m=l.stroke,x=l.strokeStyle,A=l.fillOpacity,P=l.strokeOpacity,L=l.lineWidth,B=this.get("el");this.canFill&&(s?"fill"in l?this._setColor(t,"fill",f):"fillStyle"in l&&this._setColor(t,"fill",d):this._setColor(t,"fill",f||d),A&&B.setAttribute(Ho.fillOpacity,A)),this.canStroke&&L>0&&(s?"stroke"in l?this._setColor(t,"stroke",m):"strokeStyle"in l&&this._setColor(t,"stroke",x):this._setColor(t,"stroke",m||x),P&&B.setAttribute(Ho.strokeOpacity,P),L&&B.setAttribute(Ho.lineWidth,L))},n.prototype._setColor=function(t,s,l){var f=this.get("el");if(!l){f.setAttribute(Ho[s],"none");return}if(l=l.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(l)){var d=t.find("gradient",l);d||(d=t.addGradient(l)),f.setAttribute(Ho[s],"url(#"+d+")")}else if(/^[p,P]{1}[\s]*\(/.test(l)){var d=t.find("pattern",l);d||(d=t.addPattern(l)),f.setAttribute(Ho[s],"url(#"+d+")")}else f.setAttribute(Ho[s],l)},n.prototype.shadow=function(t,s){var l=this.attr(),f=s||l,d=f.shadowOffsetX,m=f.shadowOffsetY,x=f.shadowBlur,A=f.shadowColor;(d||m||x||A)&&$f(this,t)},n.prototype.transform=function(t){var s=this.attr(),l=(t||s).matrix;l&&Og(this)},n.prototype.isInShape=function(t,s){return this.isPointInPath(t,s)},n.prototype.isPointInPath=function(t,s){var l=this.get("el"),f=this.get("canvas"),d=f.get("el").getBoundingClientRect(),m=t+d.left,x=s+d.top,A=document.elementFromPoint(m,x);return!!(A&&A.isEqualNode(l))},n.prototype.getHitLineWidth=function(){var t=this.attrs,s=t.lineWidth,l=t.lineAppendWidth;return this.isStroke()?s+l:0},n}(We.AbstractShape),bh=a2,X0=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,r:0})},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="x"||m==="y"?f.setAttribute("c"+m,d):Ho[m]&&f.setAttribute(Ho[m],d)})},n}(bh),QR=X0,JR=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");if((0,E.S6)(s||l,function(A,P){Ho[P]&&f.setAttribute(Ho[P],A)}),typeof l.html=="function"){var d=l.html.call(this,l);if(d instanceof Element||d instanceof HTMLDocument){for(var m=f.childNodes,x=m.length-1;x>=0;x--)f.removeChild(m[x]);f.appendChild(d)}else f.innerHTML=d}else f.innerHTML=l.html},n}(bh),e3=JR,o2=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,rx:0,ry:0})},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="x"||m==="y"?f.setAttribute("c"+m,d):Ho[m]&&f.setAttribute(Ho[m],d)})},n}(bh),t3=o2,r3=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");(0,E.S6)(s||f,function(m,x){x==="img"?l._setImage(f.img):Ho[x]&&d.setAttribute(Ho[x],m)})},n.prototype.setAttr=function(t,s){this.attrs[t]=s,t==="img"&&this._setImage(s)},n.prototype._setImage=function(t){var s=this.attr(),l=this.get("el");if((0,E.HD)(t))l.setAttribute("href",t);else if(t instanceof window.Image)s.width||(l.setAttribute("width",t.width),this.attr("width",t.width)),s.height||(l.setAttribute("height",t.height),this.attr("height",t.height)),l.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,E.HD)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")l.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var f=document.createElement("canvas");f.setAttribute("width",""+t.width),f.setAttribute("height",""+t.height),f.getContext("2d").putImageData(t,0,0),s.width||(l.setAttribute("width",""+t.width),this.attr("width",t.width)),s.height||(l.setAttribute("height",""+t.height),this.attr("height",t.height)),l.setAttribute("href",f.toDataURL())}},n}(bh),n3=r3,Lg=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){if(m==="startArrow"||m==="endArrow")if(d){var x=(0,E.Kn)(d)?t.addArrow(l,Ho[m]):t.getDefaultArrow(l,Ho[m]);f.setAttribute(Ho[m],"url(#"+x+")")}else f.removeAttribute(Ho[m]);else Ho[m]&&f.setAttribute(Ho[m],d)})},n.prototype.getTotalLength=function(){var t=this.attr(),s=t.x1,l=t.y1,f=t.x2,d=t.y2;return Pu.x1.length(s,l,f,d)},n.prototype.getPoint=function(t){var s=this.attr(),l=s.x1,f=s.y1,d=s.x2,m=s.y2;return Pu.x1.pointAt(l,f,d,m,t)},n}(bh),Lx=Lg,Dg={circle:function(a,n,t){return[["M",a,n],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(a,n,t){return[["M",a-t,n-t],["L",a+t,n-t],["L",a+t,n+t],["L",a-t,n+t],["Z"]]},diamond:function(a,n,t){return[["M",a-t,n],["L",a,n-t],["L",a+t,n],["L",a,n+t],["Z"]]},triangle:function(a,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,n+s],["L",a,n-s],["L",a+t,n+s],["z"]]},triangleDown:function(a,n,t){var s=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,n-s],["L",a+t,n-s],["L",a,n+s],["Z"]]}},C_={get:function(a){return Dg[a]},register:function(a,n){Dg[a]=n},remove:function(a){delete Dg[a]},getAll:function(){return Dg}},Y0=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return n.prototype.createPath=function(t){var s=this.get("el");s.setAttribute("d",this._assembleMarker())},n.prototype._assembleMarker=function(){var t=this._getPath();return(0,E.kJ)(t)?t.map(function(s){return s.join(" ")}).join(""):t},n.prototype._getPath=function(){var t=this.attr(),s=t.x,l=t.y,f=t.r||t.radius,d=t.symbol||"circle",m;return(0,E.mf)(d)?m=d:m=C_.get(d),m?m(s,l,f):(console.warn(m+" symbol is not exist."),null)},n.symbolsFactory=C_,n}(bh),Dx=Y0,Fx=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");(0,E.S6)(s||f,function(m,x){if(x==="path"&&(0,E.kJ)(m))d.setAttribute("d",l._formatPath(m));else if(x==="startArrow"||x==="endArrow")if(m){var A=(0,E.Kn)(m)?t.addArrow(f,Ho[x]):t.getDefaultArrow(f,Ho[x]);d.setAttribute(Ho[x],"url(#"+A+")")}else d.removeAttribute(Ho[x]);else Ho[x]&&d.setAttribute(Ho[x],m)})},n.prototype._formatPath=function(t){var s=t.map(function(l){return l.join(" ")}).join("");return~s.indexOf("NaN")?"":s},n.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},n.prototype.getPoint=function(t){var s=this.get("el"),l=this.getTotalLength();if(l===0)return null;var f=s?s.getPointAtLength(t*l):null;return f?{x:f.x,y:f.y}:null},n}(bh),K0=Fx,Bx=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="points"&&(0,E.kJ)(d)&&d.length>=2?f.setAttribute("points",d.map(function(x){return x[0]+","+x[1]}).join(" ")):Ho[m]&&f.setAttribute(Ho[m],d)})},n}(bh),q0=Bx,A_=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{startArrow:!1,endArrow:!1})},n.prototype.onAttrChange=function(t,s,l){a.prototype.onAttrChange.call(this,t,s,l),["points"].indexOf(t)!==-1&&this._resetCache()},n.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},n.prototype.createPath=function(t,s){var l=this.attr(),f=this.get("el");(0,E.S6)(s||l,function(d,m){m==="points"&&(0,E.kJ)(d)&&d.length>=2?f.setAttribute("points",d.map(function(x){return x[0]+","+x[1]}).join(" ")):Ho[m]&&f.setAttribute(Ho[m],d)})},n.prototype.getTotalLength=function(){var t=this.attr().points,s=this.get("totalLength");return(0,E.UM)(s)?(this.set("totalLength",Pu.aH.length(t)),this.get("totalLength")):s},n.prototype.getPoint=function(t){var s=this.attr().points,l=this.get("tCache");l||(this._setTcache(),l=this.get("tCache"));var f,d;return(0,E.S6)(l,function(m,x){t>=m[0]&&t<=m[1]&&(f=(t-m[0])/(m[1]-m[0]),d=x)}),Pu.x1.pointAt(s[d][0],s[d][1],s[d+1][0],s[d+1][1],f)},n.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var s=this.getTotalLength();if(!(s<=0)){var l=0,f=[],d,m;(0,E.S6)(t,function(x,A){t[A+1]&&(d=[],d[0]=l/s,m=Pu.x1.length(x[0],x[1],t[A+1][0],t[A+1][1]),l+=m,d[1]=l/s,f.push(d))}),this.set("tCache",f)}}},n.prototype.getStartTangent=function(){var t=this.attr().points,s=[];return s.push([t[1][0],t[1][1]]),s.push([t[0][0],t[0][1]]),s},n.prototype.getEndTangent=function(){var t=this.attr().points,s=t.length-1,l=[];return l.push([t[s-1][0],t[s-1][1]]),l.push([t[s][0],t[s][1]]),l},n}(bh),_d=A_,Nx=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,zx=/[^\s,]+/gi;function i3(a){var n=0,t=0,s=0,l=0;return(0,E.kJ)(a)?a.length===1?n=t=s=l=a[0]:a.length===2?(n=s=a[0],t=l=a[1]):a.length===3?(n=a[0],t=l=a[1],s=a[2]):(n=a[0],t=a[1],s=a[2],l=a[3]):n=t=s=l=a,{r1:n,r2:t,r3:s,r4:l}}function c8(a){if(a=a||[],isArray(a))return a;if(isString(a))return a=a.match(Nx),each(a,function(n,t){if(n=n.match(zx),n[0].length>1){var s=n[0].charAt(0);n.splice(1,0,n[0].substr(1)),n[0]=s}each(n,function(l,f){isNaN(l)||(n[f]=+l)}),a[t]=n}),a}var Ux=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,width:0,height:0,radius:0})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el"),m=!1,x=["x","y","width","height","radius"];(0,E.S6)(s||f,function(A,P){x.indexOf(P)!==-1&&!m?(d.setAttribute("d",l._assembleRect(f)),m=!0):x.indexOf(P)===-1&&Ho[P]&&d.setAttribute(Ho[P],A)})},n.prototype._assembleRect=function(t){var s=t.x,l=t.y,f=t.width,d=t.height,m=t.radius;if(!m)return"M "+s+","+l+" l "+f+",0 l 0,"+d+" l"+-f+" 0 z";var x=i3(m);(0,E.kJ)(m)?m.length===1?x.r1=x.r2=x.r3=x.r4=m[0]:m.length===2?(x.r1=x.r3=m[0],x.r2=x.r4=m[1]):m.length===3?(x.r1=m[0],x.r2=x.r4=m[1],x.r3=m[2]):(x.r1=m[0],x.r2=m[1],x.r3=m[2],x.r4=m[3]):x.r1=x.r2=x.r3=x.r4=m;var A=[["M "+(s+x.r1)+","+l],["l "+(f-x.r1-x.r2)+",0"],["a "+x.r2+","+x.r2+",0,0,1,"+x.r2+","+x.r2],["l 0,"+(d-x.r2-x.r3)],["a "+x.r3+","+x.r3+",0,0,1,"+-x.r3+","+x.r3],["l "+(x.r3+x.r4-f)+",0"],["a "+x.r4+","+x.r4+",0,0,1,"+-x.r4+","+-x.r4],["l 0,"+(x.r4+x.r1-d)],["a "+x.r1+","+x.r1+",0,0,1,"+x.r1+","+-x.r1],["z"]];return A.join(" ")},n}(bh),s2=Ux,_B=k(43631),Zx=.3,a3={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},o3={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},s3={left:"left",start:"left",center:"middle",right:"end",end:"end"},u2=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return n.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,M.pi)((0,M.pi)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},n.prototype.createPath=function(t,s){var l=this,f=this.attr(),d=this.get("el");this._setFont(),(0,E.S6)(s||f,function(m,x){x==="text"?l._setText(""+m):x==="matrix"&&m?Og(l):Ho[x]&&d.setAttribute(Ho[x],m)}),d.setAttribute("paint-order","stroke"),d.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},n.prototype._setFont=function(){var t=this.get("el"),s=this.attr(),l=s.textBaseline,f=s.textAlign,d=(0,_B.qY)();d&&d.name==="firefox"?t.setAttribute("dominant-baseline",o3[l]||"alphabetic"):t.setAttribute("alignment-baseline",a3[l]||"baseline"),t.setAttribute("text-anchor",s3[f]||"left")},n.prototype._setText=function(t){var s=this.get("el"),l=this.attr(),f=l.x,d=l.textBaseline,m=d===void 0?"bottom":d;if(!t)s.innerHTML="";else if(~t.indexOf(`
`)){var x=t.split(`
`),A=x.length-1,P="";(0,E.S6)(x,function(L,B){B===0?m==="alphabetic"?P+='<tspan x="'+f+'" dy="'+-A+'em">'+L+"</tspan>":m==="top"?P+='<tspan x="'+f+'" dy="0.9em">'+L+"</tspan>":m==="middle"?P+='<tspan x="'+f+'" dy="'+-(A-1)/2+'em">'+L+"</tspan>":m==="bottom"?P+='<tspan x="'+f+'" dy="-'+(A+Zx)+'em">'+L+"</tspan>":m==="hanging"&&(P+='<tspan x="'+f+'" dy="'+(-(A-1)-Zx)+'em">'+L+"</tspan>"):P+='<tspan x="'+f+'" dy="1em">'+L+"</tspan>"}),s.innerHTML=P}else s.innerHTML=t},n}(bh),u3=u2,l2=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,c2=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,f2=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Vx(a){var n=a.match(f2);if(!n)return"";var t="";return n.sort(function(s,l){return s=s.split(":"),l=l.split(":"),Number(s[0])-Number(l[0])}),(0,E.S6)(n,function(s){s=s.split(":"),t+='<stop offset="'+s[0]+'" stop-color="'+s[1]+'"></stop>'}),t}function h2(a,n){var t=l2.exec(a),s=(0,E.wQ)((0,E.c$)(parseFloat(t[1])),Math.PI*2),l=t[2],f,d;s>=0&&s<.5*Math.PI?(f={x:0,y:0},d={x:1,y:1}):.5*Math.PI<=s&&s<Math.PI?(f={x:1,y:0},d={x:0,y:1}):Math.PI<=s&&s<1.5*Math.PI?(f={x:1,y:1},d={x:0,y:0}):(f={x:0,y:1},d={x:1,y:0});var m=Math.tan(s),x=m*m,A=(d.x-f.x+m*(d.y-f.y))/(x+1)+f.x,P=m*(d.x-f.x+m*(d.y-f.y))/(x+1)+f.y;n.setAttribute("x1",f.x),n.setAttribute("y1",f.y),n.setAttribute("x2",A),n.setAttribute("y2",P),n.innerHTML=Vx(l)}function p2(a,n){var t=c2.exec(a),s=parseFloat(t[1]),l=parseFloat(t[2]),f=parseFloat(t[3]),d=t[4];n.setAttribute("cx",s),n.setAttribute("cy",l),n.setAttribute("r",f),n.innerHTML=Vx(d)}var d2=function(){function a(n){this.cfg={};var t=null,s=(0,E.EL)("gradient_");return n.toLowerCase()[0]==="l"?(t=Gf("linearGradient"),h2(n,t)):(t=Gf("radialGradient"),p2(n,t)),t.setAttribute("id",s),this.el=t,this.id=s,this.cfg=n,this}return a.prototype.match=function(n,t){return this.cfg===t},a}(),v2=d2,g2={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},m2={x:"-40%",y:"-40%",width:"200%",height:"200%"},y2=function(){function a(n){this.type="filter",this.cfg={},this.type="filter";var t=Gf("filter");return(0,E.S6)(m2,function(s,l){t.setAttribute(l,s)}),this.el=t,this.id=(0,E.EL)("filter_"),this.el.id=this.id,this.cfg=n,this._parseShadow(n,t),this}return a.prototype.match=function(n,t){if(this.type!==n)return!1;var s=!0,l=this.cfg;return(0,E.S6)(Object.keys(l),function(f){if(l[f]!==t[f])return s=!1,!1}),s},a.prototype.update=function(n,t){var s=this.cfg;return s[g2[n]]=t,this._parseShadow(s,this.el),this},a.prototype._parseShadow=function(n,t){var s=`<feDropShadow
      dx="`+(n.dx||0)+`"
      dy="`+(n.dy||0)+`"
      stdDeviation="`+(n.blur?n.blur/10:0)+`"
      flood-color="`+(n.color?n.color:"#000")+`"
      flood-opacity="`+(n.opacity?n.opacity:1)+`"
      />`;t.innerHTML=s},a}(),_2=y2,x2=function(){function a(n,t){this.cfg={};var s=Gf("marker"),l=(0,E.EL)("marker_");s.setAttribute("id",l);var f=Gf("path");f.setAttribute("stroke",n.stroke||"none"),f.setAttribute("fill",n.fill||"none"),s.appendChild(f),s.setAttribute("overflow","visible"),s.setAttribute("orient","auto-start-reverse"),this.el=s,this.child=f,this.id=l;var d=n[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=n.stroke||"#000",d===!0?this._setDefaultPath(t,f):(this.cfg=d,this._setMarker(n.lineWidth,f)),this}return a.prototype.match=function(){return!1},a.prototype._setDefaultPath=function(n,t){var s=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),s.setAttribute("refX",""+10*Math.cos(Math.PI/6)),s.setAttribute("refY","5")},a.prototype._setMarker=function(n,t){var s=this.el,l=this.cfg.path,f=this.cfg.d;(0,E.kJ)(l)&&(l=l.map(function(d){return d.join(" ")}).join("")),t.setAttribute("d",l),s.appendChild(t),f&&s.setAttribute("refX",""+f/n)},a.prototype.update=function(n){var t=this.child;t.attr?t.attr("fill",n):t.setAttribute("fill",n)},a}(),Hx=x2,b2=function(){function a(n){this.type="clip",this.cfg={};var t=Gf("clipPath");this.el=t,this.id=(0,E.EL)("clip_"),t.id=this.id;var s=n.cfg.el;return t.appendChild(s),this.cfg=n,this}return a.prototype.match=function(){return!1},a.prototype.remove=function(){var n=this.el;n.parentNode.removeChild(n)},a}(),S2=b2,E2=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,w2=function(){function a(n){this.cfg={};var t=Gf("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var s=Gf("image");t.appendChild(s);var l=(0,E.EL)("pattern_");t.id=l,this.el=t,this.id=l,this.cfg=n;var f=E2.exec(n),d=f[2];s.setAttribute("href",d);var m=new Image;d.match(/^data:/i)||(m.crossOrigin="Anonymous"),m.src=d;function x(){t.setAttribute("width",""+m.width),t.setAttribute("height",""+m.height)}return m.complete?x():(m.onload=x,m.src=m.src),this}return a.prototype.match=function(n,t){return this.cfg===t},a}(),Cc=w2,C2=function(){function a(n){var t=Gf("defs"),s=(0,E.EL)("defs_");t.id=s,n.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=n}return a.prototype.find=function(n,t){for(var s=this.children,l=null,f=0;f<s.length;f++)if(s[f].match(n,t)){l=s[f].id;break}return l},a.prototype.findById=function(n){for(var t=this.children,s=null,l=0;l<t.length;l++)if(t[l].id===n){s=t[l];break}return s},a.prototype.add=function(n){this.children.push(n),n.canvas=this.canvas,n.parent=this},a.prototype.getDefaultArrow=function(n,t){var s=n.stroke||n.strokeStyle;if(this.defaultArrow[s])return this.defaultArrow[s].id;var l=new Hx(n,t);return this.defaultArrow[s]=l,this.el.appendChild(l.el),this.add(l),l.id},a.prototype.addGradient=function(n){var t=new v2(n);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addArrow=function(n,t){var s=new Hx(n,t);return this.el.appendChild(s.el),this.add(s),s.id},a.prototype.addShadow=function(n){var t=new _2(n);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addPattern=function(n){var t=new Cc(n);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addClip=function(n){var t=new S2(n);return this.el.appendChild(t.el),this.add(t),t.id},a}(),A2=C2,T2=function(a){(0,M.ZT)(n,a);function n(t){return a.call(this,(0,M.pi)((0,M.pi)({},t),{autoDraw:!0,renderer:"svg"}))||this}return n.prototype.getShapeBase=function(){return pe},n.prototype.getGroupBase=function(){return kx},n.prototype.getShape=function(t,s,l){var f=l.target||l.srcElement;if(!W0[f.tagName]){for(var d=f.parentNode;d&&!W0[d.tagName];)d=d.parentNode;f=d}return this.find(function(m){return m.get("el")===f})},n.prototype.createDom=function(){var t=Gf("svg"),s=new A2(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",s),t},n.prototype.onCanvasChange=function(t){var s=this.get("context"),l=this.get("el");if(t==="sort"){var f=this.get("children");f&&f.length&&G0(this,function(m,x){return f.indexOf(m)-f.indexOf(x)?1:0})}else if(t==="clear"){if(l){l.innerHTML="";var d=s.el;d.innerHTML="",l.appendChild(d)}}else t==="matrix"?Og(this):t==="clip"?kg(this,s):t==="changeSize"&&(l.setAttribute("width",""+this.get("width")),l.setAttribute("height",""+this.get("height")))},n.prototype.draw=function(){var t=this.get("context"),s=this.getChildren();kg(this,t),s.length&&tv(t,s)},n}(We.AbstractCanvas),M2=T2,R2="0.5.6",I2=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;s.type="path",s.shapeType="line";var l=t.connectNulls,f=l===void 0?!1:l,d=t.showSinglePoint,m=d===void 0?!0:d;return s.connectNulls=f,s.showSinglePoint=m,s}return n.prototype.updateElements=function(t,s){var l,f,d,m,x,A;s===void 0&&(s=!1);for(var P=new Map,L=new Map,B=[],U=0,Y=0;Y<t.length;Y++){var se=t[Y],be=this.getElementId(se);B.push(be),P.set(be,se),L.set(be,U),U++}this.elements=new Array(U);var Ee=ks(this.lastElementsMap,B),it=Ee.added,gt=Ee.updated,xt=Ee.removed;try{for(var Bt=(0,M.XA)(it),_r=Bt.next();!_r.done;_r=Bt.next()){var be=_r.value,se=P.get(be),Or=this.getShapeFactory(),Gr=this.getShapeInfo(se),Y=L.get(be),mn=new wi({shapeFactory:Or,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:Y});mn.geometry=this,mn.animate=this.animateOption,mn.draw(Gr,s),this.elementsMap[be]=mn,this.elements[Y]=mn}}catch(to){l={error:to}}finally{try{_r&&!_r.done&&(f=Bt.return)&&f.call(Bt)}finally{if(l)throw l.error}}try{for(var cn=(0,M.XA)(gt),Nn=cn.next();!Nn.done;Nn=cn.next()){var be=Nn.value,se=P.get(be),mn=this.lastElementsMap[be],Y=L.get(be),Gr=this.getShapeInfo(se),hi=mn.getModel();(this.isCoordinateChanged||Xs(hi,Gr))&&(mn.animate=this.animateOption,mn.update(Gr)),this.elementsMap[be]=mn,this.elements[Y]=mn}}catch(to){d={error:to}}finally{try{Nn&&!Nn.done&&(m=cn.return)&&m.call(cn)}finally{if(d)throw d.error}}try{for(var Wi=(0,M.XA)(xt),bi=Wi.next();!bi.done;bi=Wi.next()){var be=bi.value,mn=this.lastElementsMap[be];mn.animate=this.animateOption,mn.destroy()}}catch(to){x={error:to}}finally{try{bi&&!bi.done&&(A=Wi.return)&&A.call(Wi)}finally{if(x)throw x.error}}},n.prototype.getPointsAndData=function(t){for(var s=[],l=[],f=0,d=t.length;f<d;f++){var m=t[f];s.push({x:m.x,y:m.y}),l.push(m[_e])}return{points:s,data:l}},n.prototype.getShapeInfo=function(t){var s=this.getDrawCfg(t[0]),l=this.getPointsAndData(t),f=l.points,d=l.data;return s.mappingData=t,s.data=d,s.isStack=!!this.getAdjust("stack"),s.points=f,s.connectNulls=this.connectNulls,s.showSinglePoint=this.showSinglePoint,s},n}(Ls),T_=I2;function P2(a,n,t,s,l){var f=[];if(a.length){for(var d=[],m=[],x=0,A=a.length;x<A;x++){var P=a[x];d.push(P[1]),m.push(P[0])}m=m.reverse(),(0,E.S6)([d,m],function(L,B){var U=[],Y=s.parsePoints(L),se=Y[0];d.length===1&&m.length===1?U=B===0?[["M",se.x-.5,se.y],["L",se.x+.5,se.y]]:[["L",se.x+.5,se.y],["L",se.x-.5,se.y]]:(n&&Y.push({x:se.x,y:se.y}),t?U=ta(Y,!1,l):U=Ln(Y,!1),B>0&&(U[0][0]="L")),f=f.concat(U)}),f.push(["Z"])}return f}function Q0(a,n,t,s,l){for(var f=_u(a,n,!n,"lineWidth"),d=a.connectNulls,m=a.isInCircle,x=a.points,A=a.showSinglePoint,P=ud(x,d,A),L=[],B=0,U=P.length;B<U;B++){var Y=P[B];L=L.concat(P2(Y,m,t,s,l))}return f.path=L,f}function jx(a){var n=a.start,t=a.end;return[[n.x,t.y],[t.x,n.y]]}var l3=oo("area",{defaultShapeType:"area",getDefaultPoints:function(a){var n=a.x,t=a.y0,s=(0,E.kJ)(a.y)?a.y:[t,a.y];return s.map(function(l){return{x:n,y:l}})}});yi("area","area",{draw:function(a,n){var t=Q0(a,!1,!1,this),s=n.addShape({type:"path",attrs:t,name:"area"});return s},getMarker:function(a){var n=a.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,fill:n,fillOpacity:1}}}});var c3=null,O2=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;s.type="area",s.shapeType="area",s.generatePoints=!0,s.startOnZero=!0;var l=t.startOnZero,f=l===void 0?!0:l,d=t.sortable,m=d===void 0?!1:d,x=t.showSinglePoint,A=x===void 0?!1:x;return s.startOnZero=f,s.sortable=m,s.showSinglePoint=A,s}return n.prototype.getPointsAndData=function(t){for(var s=[],l=[],f=0,d=t.length;f<d;f++){var m=t[f];s.push(m.points),l.push(m[_e])}return{points:s,data:l}},n.prototype.getYMinValue=function(){if(this.startOnZero)return a.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},n}(T_),k2=O2,f3=oo("edge",{defaultShapeType:"line",getDefaultPoints:function(a){return Ov(a)}});yi("edge","line",{draw:function(a,n){var t=_u(a,!0,!1,"lineWidth"),s=Ln(this.parsePoints(a.points),this.coordinate.isPolar);return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(a){return{symbol:"circle",style:{r:4.5,fill:a.color}}}});var h3=null,p3=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return n}(Ls),v3=p3,g3=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return n.prototype.updateElements=function(t,s){s===void 0&&(s=!1);for(var l=0;l<t.length;l++){var f=t[l],d=this.prepareRange(f),m=this.prepareSize(),x=(0,E.U2)(this.styleOption,["cfg","shadowBlur"]);(0,E.hj)(x)||(x=m/2),this.prepareGreyScaleBlurredCircle(m,x),this.drawWithRange(f,d,m,x)}},n.prototype.color=function(t,s){return this.createAttrOption("color",t,typeof s!="function"?s:""),this},n.prototype.clear=function(){a.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},n.prototype.prepareRange=function(t){var s=this.getAttribute("color"),l=s.getFields()[0],f=1/0,d=-1/0;return t.forEach(function(m){var x=m[_e][l];x>d&&(d=x),x<f&&(f=x)}),f===d&&(f=d-1),[f,d]},n.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,E.hj)(t)||(t=this.getDefaultSize()),t},n.prototype.prepareGreyScaleBlurredCircle=function(t,s){var l=this.getGrayScaleBlurredCanvas(),f=t+s,d=l.getContext("2d");l.width=l.height=f*2,d.clearRect(0,0,l.width,l.height),d.shadowOffsetX=d.shadowOffsetY=f*2,d.shadowBlur=s,d.shadowColor="black",d.beginPath(),d.arc(-f,-f,t,0,Math.PI*2,!0),d.closePath(),d.fill()},n.prototype.drawWithRange=function(t,s,l,f){var d,m,x=this.coordinate,A=x.start,P=x.end,L=this.coordinate.getWidth(),B=this.coordinate.getHeight(),U=this.getAttribute("color"),Y=U.getFields()[0];this.clearShadowCanvasCtx();var se=this.getShadowCanvasCtx();s&&(t=t.filter(function(cn){return cn[_e][Y]<=s[1]&&cn[_e][Y]>=s[0]}));var be=this.scales[Y];try{for(var Ee=(0,M.XA)(t),it=Ee.next();!it.done;it=Ee.next()){var gt=it.value,xt=this.getDrawCfg(gt),Bt=xt.x,_r=xt.y,Or=be.scale(gt[_e][Y]);this.drawGrayScaleBlurredCircle(Bt-A.x,_r-P.y,l+f,Or,se)}}catch(cn){d={error:cn}}finally{try{it&&!it.done&&(m=Ee.return)&&m.call(Ee)}finally{if(d)throw d.error}}var Gr=se.getImageData(0,0,L,B);this.clearShadowCanvasCtx(),this.colorize(Gr),se.putImageData(Gr,0,0);var mn=this.getImageShape();mn.attr("x",A.x),mn.attr("y",P.y),mn.attr("width",L),mn.attr("height",B),mn.attr("img",se.canvas),mn.set("origin",this.getShapeInfo(t))},n.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),s=this.coordinate;return Math.min(s.getWidth()/(t.scales[0].ticks.length*4),s.getHeight()/(t.scales[1].ticks.length*4))},n.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},n.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},n.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},n.prototype.drawGrayScaleBlurredCircle=function(t,s,l,f,d){var m=this.getGrayScaleBlurredCanvas();d.globalAlpha=f,d.drawImage(m,t-l,s-l)},n.prototype.colorize=function(t){for(var s=this.getAttribute("color"),l=t.data,f=this.paletteCache,d=3;d<l.length;d+=4){var m=l[d];if((0,E.hj)(m)){var x=f[m]?f[m]:ba.rgb2arr(s.gradient(m/256));l[d-3]=x[0],l[d-2]=x[1],l[d-1]=x[2],l[d]=m}}},n.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var s=this.container;return t=s.addShape({type:"image",attrs:{}}),this.imageShape=t,t},n.prototype.getShapeInfo=function(t){var s=this.getDrawCfg(t[0]),l=t.map(function(f){return f[_e]});return(0,M.pi)((0,M.pi)({},s),{mappingData:t,data:l})},n}(Ls),m3=g3;function M_(a){var n,t,s=a.x,l=a.y,f=a.y0,d=a.size,m,x;(0,E.kJ)(l)?(n=(0,M.CR)(l,2),m=n[0],x=n[1]):(m=f,x=l);var A,P;(0,E.kJ)(s)?(t=(0,M.CR)(s,2),A=t[0],P=t[1]):(A=s-d/2,P=s+d/2);var L=[{x:A,y:m},{x:A,y:x}];return L.push({x:P,y:x},{x:P,y:m}),L}function R_(a,n){n===void 0&&(n=!0);var t=[],s=a[0];t.push(["M",s.x,s.y]);for(var l=1,f=a.length;l<f;l++)t.push(["L",a[l].x,a[l].y]);return n&&(t.push(["L",s.x,s.y]),t.push(["z"])),t}function I_(a,n){var t=0,s=0,l=0,f=0;return(0,E.kJ)(a)?a.length===1?t=s=l=f=a[0]:a.length===2?(t=l=a[0],s=f=a[1]):a.length===3?(t=a[0],s=f=a[1],l=a[2]):(t=a[0],s=a[1],l=a[2],f=a[3]):t=s=l=f=a,t+s>n&&(t=t?n/(1+s/t):0,s=n-t),l+f>n&&(l=l?n/(1+f/l):0,f=n-l),[t||0,s||0,l||0,f||0]}function Wx(a,n,t){var s=[];if(t.isRect){var l=t.isTransposed?{x:t.start.x,y:n[0].y}:{x:n[0].x,y:t.start.y},f=t.isTransposed?{x:t.end.x,y:n[2].y}:{x:n[3].x,y:t.end.y},d=(0,E.U2)(a,["background","style","radius"]);if(d){var m=t.isTransposed?Math.abs(n[0].y-n[2].y):n[2].x-n[1].x,x=t.isTransposed?t.getWidth():t.getHeight(),A=(0,M.CR)(I_(d,Math.min(m,x)),4),P=A[0],L=A[1],B=A[2],U=A[3],Y=t.isTransposed&&t.isReflect("y"),se=Y?0:1,be=function(_r){return Y?-_r:_r};s.push(["M",l.x,f.y+be(P)]),P!==0&&s.push(["A",P,P,0,0,se,l.x+P,f.y]),s.push(["L",f.x-L,f.y]),L!==0&&s.push(["A",L,L,0,0,se,f.x,f.y+be(L)]),s.push(["L",f.x,l.y-be(B)]),B!==0&&s.push(["A",B,B,0,0,se,f.x-B,l.y]),s.push(["L",l.x+U,l.y]),U!==0&&s.push(["A",U,U,0,0,se,l.x,l.y-be(U)])}else s.push(["M",l.x,l.y]),s.push(["L",f.x,l.y]),s.push(["L",f.x,f.y]),s.push(["L",l.x,f.y]),s.push(["L",l.x,l.y]);s.push(["z"])}if(t.isPolar){var Ee=t.getCenter(),it=id(a,t),gt=it.startAngle,xt=it.endAngle;if(t.type!=="theta"&&!t.isTransposed)s=Zf(Ee.x,Ee.y,t.getRadius(),gt,xt);else{var Bt=function(Gr){return Math.pow(Gr,2)},P=Math.sqrt(Bt(Ee.x-n[0].x)+Bt(Ee.y-n[0].y)),L=Math.sqrt(Bt(Ee.x-n[2].x)+Bt(Ee.y-n[2].y));s=Zf(Ee.x,Ee.y,P,t.startAngle,t.endAngle,L)}}return s}function L2(a,n,t){var s=t.getWidth(),l=t.getHeight(),f=t.type==="rect",d=[],m=(a[2].x-a[1].x)/2,x=t.isTransposed?m*l/s:m*s/l;return n==="round"?(f?(d.push(["M",a[0].x,a[0].y+x]),d.push(["L",a[1].x,a[1].y-x]),d.push(["A",m,m,0,0,1,a[2].x,a[2].y-x]),d.push(["L",a[3].x,a[3].y+x]),d.push(["A",m,m,0,0,1,a[0].x,a[0].y+x])):(d.push(["M",a[0].x,a[0].y]),d.push(["L",a[1].x,a[1].y]),d.push(["A",m,m,0,0,1,a[2].x,a[2].y]),d.push(["L",a[3].x,a[3].y]),d.push(["A",m,m,0,0,1,a[0].x,a[0].y])),d.push(["z"])):d=R_(a),d}function Gx(a,n,t){var s=[];return(0,E.UM)(n)?t?s.push(["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["L",(a[2].x+a[3].x)/2,(a[2].y+a[3].y)/2],["Z"]):s.push(["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["L",a[2].x,a[2].y],["L",a[3].x,a[3].y],["Z"]):s.push(["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["L",n[1].x,n[1].y],["L",n[0].x,n[0].y],["Z"]),s}function J0(a,n){return[n,a]}function D2(a,n,t){var s,l,f,d,m,x,A,P=(0,M.CR)((0,M.ev)([],(0,M.CR)(a),!1),4),L=P[0],B=P[1],U=P[2],Y=P[3],se=(0,M.CR)(typeof t=="number"?Array(4).fill(t):t,4),be=se[0],Ee=se[1],it=se[2],gt=se[3];n.isTransposed&&(s=(0,M.CR)(J0(B,Y),2),B=s[0],Y=s[1]),n.isReflect("y")&&(l=(0,M.CR)(J0(L,B),2),L=l[0],B=l[1],f=(0,M.CR)(J0(U,Y),2),U=f[0],Y=f[1]),n.isReflect("x")&&(d=(0,M.CR)(J0(L,Y),2),L=d[0],Y=d[1],m=(0,M.CR)(J0(B,U),2),B=m[0],U=m[1]);var xt=[],Bt=function(_r){return Math.abs(_r)};return x=(0,M.CR)(I_([be,Ee,it,gt],Math.min(Bt(Y.x-L.x),Bt(B.y-L.y))).map(function(_r){return Bt(_r)}),4),be=x[0],Ee=x[1],it=x[2],gt=x[3],n.isTransposed&&(A=(0,M.CR)([gt,be,Ee,it],4),be=A[0],Ee=A[1],it=A[2],gt=A[3]),L.y<B.y?(xt.push(["M",Y.x,Y.y+it]),it!==0&&xt.push(["A",it,it,0,0,0,Y.x-it,Y.y]),xt.push(["L",L.x+gt,L.y]),gt!==0&&xt.push(["A",gt,gt,0,0,0,L.x,L.y+gt]),xt.push(["L",B.x,B.y-be]),be!==0&&xt.push(["A",be,be,0,0,0,B.x+be,B.y]),xt.push(["L",U.x-Ee,U.y]),Ee!==0&&xt.push(["A",Ee,Ee,0,0,0,U.x,U.y-Ee]),xt.push(["L",Y.x,Y.y+it]),xt.push(["z"])):Y.x<L.x?(xt.push(["M",U.x+Ee,U.y]),Ee!==0&&xt.push(["A",Ee,Ee,0,0,0,U.x,U.y+Ee]),xt.push(["L",Y.x,Y.y-it]),it!==0&&xt.push(["A",it,it,0,0,0,Y.x+it,Y.y]),xt.push(["L",L.x-gt,L.y]),gt!==0&&xt.push(["A",gt,gt,0,0,0,L.x,L.y-gt]),xt.push(["L",B.x,B.y+be]),be!==0&&xt.push(["A",be,be,0,0,0,B.x-be,B.y]),xt.push(["L",U.x+Ee,U.y]),xt.push(["z"])):(xt.push(["M",B.x,B.y+be]),be!==0&&xt.push(["A",be,be,0,0,1,B.x+be,B.y]),xt.push(["L",U.x-Ee,U.y]),Ee!==0&&xt.push(["A",Ee,Ee,0,0,1,U.x,U.y+Ee]),xt.push(["L",Y.x,Y.y-it]),it!==0&&xt.push(["A",it,it,0,0,1,Y.x-it,Y.y]),xt.push(["L",L.x+gt,L.y]),gt!==0&&xt.push(["A",gt,gt,0,0,1,L.x,L.y-gt]),xt.push(["L",B.x,B.y+be]),xt.push(["z"])),xt}var xB=oo("interval",{defaultShapeType:"rect",getDefaultPoints:function(a){return M_(a)}});yi("interval","rect",{draw:function(a,n){var t=_u(a,!1,!0),s=n,l=a==null?void 0:a.background;if(l){s=n.addGroup({name:"interval-group"});var f=Dp(a),d=Wx(a,this.parsePoints(a.points),this.coordinate);s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},f),{path:d}),capture:!1,zIndex:-1,name:Dn})}var m;t.radius&&this.coordinate.isRect?m=D2(this.parsePoints(a.points),this.coordinate,t.radius):m=this.parsePath(L2(a.points,t.lineCap,this.coordinate));var x=s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:m}),name:"interval"});return l?s:x},getMarker:function(a){var n=a.color,t=a.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:n}}:{symbol:"square",style:{r:4,fill:n}}}});var y3=null;function F2(a,n){var t=a.length,s=a;(0,E.HD)(s[0])&&(s=a.map(function(m){return n.translate(m)}));for(var l=s[1]-s[0],f=2;f<t;f++){var d=s[f]-s[f-1];l>d&&(l=d)}return l}function _3(a,n){if(n){var t=(0,E.xH)(a),s=(0,E.I)(t,n);return s.length}return a.length}function $x(a){var n=a.theme,t=a.coordinate,s=a.getXScale(),l=s.values,f=a.beforeMappingData,d=l.length,m=xl(a.coordinate),x=a.intervalPadding,A=a.dodgePadding,P=a.maxColumnWidth||n.maxColumnWidth,L=a.minColumnWidth||n.minColumnWidth,B=a.columnWidthRatio||n.columnWidthRatio,U=a.multiplePieWidthRatio||n.multiplePieWidthRatio,Y=a.roseWidthRatio||n.roseWidthRatio;if(s.isLinear&&l.length>1){l.sort();var se=F2(l,s);d=(s.max-s.min)/se,l.length>d&&(d=l.length)}var be=s.range,Ee=1/d,it=1;if(t.isPolar?t.isTransposed&&d>1?it=U:it=Y:(s.isLinear&&(Ee*=be[1]-be[0]),it=B),!(0,E.UM)(x)&&x>=0){var gt=x/m;Ee=(1-(d-1)*gt)/d}else Ee*=it;if(a.getAdjust("dodge")){var xt=a.getAdjust("dodge"),Bt=xt.dodgeBy,_r=_3(f,Bt);if(!(0,E.UM)(A)&&A>=0){var Or=A/m;Ee=(Ee-Or*(_r-1))/_r}else!(0,E.UM)(x)&&x>=0&&(Ee*=it),Ee=Ee/_r;Ee=Ee>=0?Ee:0}if(!(0,E.UM)(P)&&P>=0){var Gr=P/m;Ee>Gr&&(Ee=Gr)}if(!(0,E.UM)(L)&&L>=0){var mn=L/m;Ee<mn&&(Ee=mn)}return Ee}var x3=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;s.type="interval",s.shapeType="interval",s.generatePoints=!0;var l=t.background;return s.background=l,s}return n.prototype.createShapePointsCfg=function(t){var s=a.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=xl(d);l=l/m}else this.defaultSize||(this.defaultSize=$x(this)),l=this.defaultSize;return s.size=l,s},n.prototype.adjustScale=function(){a.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:gg(t)});else{var s=this.scaleDefs,l=t.field,f=t.min,d=t.max,m=t.type;m!=="time"&&(f>0&&!(0,E.U2)(s,[l,"min"])&&t.change({min:0}),d<=0&&!(0,E.U2)(s,[l,"max"])&&t.change({max:0}))}},n.prototype.getDrawCfg=function(t){var s=a.prototype.getDrawCfg.call(this,t);return s.background=this.background,s},n}(Ls),b3=x3,S3=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;s.type="line";var l=t.sortable,f=l===void 0?!1:l;return s.sortable=f,s}return n}(T_),B2=S3,N2=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],E3=["cross","tick","plus","hyphen","line"];function P_(a,n,t,s,l){var f,d,m=_u(n,l,!l,"r"),x=a.parsePoints(n.points),A=x[0];if(n.isStack)A=x[1];else if(x.length>1){var P=t.addGroup();try{for(var L=(0,M.XA)(x),B=L.next();!B.done;B=L.next()){var U=B.value;P.addShape({type:"marker",attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},m),{symbol:Sl[s]||s}),U)})}}catch(Y){f={error:Y}}finally{try{B&&!B.done&&(d=L.return)&&d.call(L)}finally{if(f)throw f.error}}return P}return t.addShape({type:"marker",attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},m),{symbol:Sl[s]||s}),A)})}var w3=oo("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(a){return Ov(a)}});(0,E.S6)(N2,function(a){yi("point","hollow-".concat(a),{draw:function(n,t){return P_(this,n,t,a,!0)},getMarker:function(n){var t=n.color;return{symbol:Sl[a]||a,style:{r:4.5,stroke:t,fill:null}}}})});var bB=null,C3=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return n.prototype.getDrawCfg=function(t){var s=a.prototype.getDrawCfg.call(this,t);return(0,M.pi)((0,M.pi)({},s),{isStack:!!this.getAdjust("stack")})},n}(Ls),SB=C3;function A3(a){for(var n=a[0],t=1,s=[["M",n.x,n.y]];t<a.length;){var l=a[t];(l.x!==a[t-1].x||l.y!==a[t-1].y)&&(s.push(["L",l.x,l.y]),l.x===n.x&&l.y===n.y&&t<a.length-1&&(n=a[t+1],s.push(["Z"]),s.push(["M",n.x,n.y]),t++)),t++}return(0,E.Xy)((0,E.Z$)(s),n)||s.push(["L",n.x,n.y]),s.push(["Z"]),s}var EB=oo("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(a){var n=[];return(0,E.S6)(a.x,function(t,s){var l=a.y[s];n.push({x:t,y:l})}),n}});yi("polygon","polygon",{draw:function(a,n){if(!(0,E.xb)(a.points)){var t=_u(a,!0,!0),s=this.parsePath(A3(a.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"polygon"})}},getMarker:function(a){var n=a.color;return{symbol:"square",style:{r:4,fill:n}}}});var Cf=null,Im=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return n.prototype.createShapePointsCfg=function(t){var s=a.prototype.createShapePointsCfg.call(this,t),l=s.x,f=s.y,d;if(!((0,E.kJ)(l)&&(0,E.kJ)(f))){var m=this.getXScale(),x=this.getYScale(),A=m.values.length,P=x.values.length,L=.5*1/A,B=.5*1/P;m.isCategory&&x.isCategory?(l=[l-L,l-L,l+L,l+L],f=[f-B,f+B,f+B,f-B]):(0,E.kJ)(l)?(d=l,l=[d[0],d[0],d[1],d[1]],f=[f-B/2,f+B/2,f+B/2,f-B/2]):(0,E.kJ)(f)&&(d=f,f=[d[0],d[1],d[1],d[0]],l=[l-L/2,l-L/2,l+L/2,l+L/2]),s.x=l,s.y=f}return s},n}(Ls),z2=Im,T3=oo("schema",{defaultShapeType:""}),Xx=null,U2=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return n.prototype.createShapePointsCfg=function(t){var s=a.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=xl(d);l=l/m}else this.defaultSize||(this.defaultSize=$x(this)),l=this.defaultSize;return s.size=l,s},n}(Ls),Z2=U2;function M3(a){if(!(0,E.kJ)(a))return[];var n=(0,E.Fp)(a);return(0,E.UI)(a,function(t){return t/n})}var wB=oo("violin",{defaultShapeType:"violin",getDefaultPoints:function(a){var n=a.size/2,t=[],s=M3(a._size);return(0,E.S6)(a.y,function(l,f){var d=s[f]*n,m=f===0,x=f===a.y.length-1;t.push({isMin:m,isMax:x,x:a.x-d,y:l}),t.unshift({isMin:m,isMax:x,x:a.x+d,y:l})}),t}});yi("violin","violin",{draw:function(a,n){var t=_u(a,!0,!0),s=this.parsePath(xg(a.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"violin"})},getMarker:function(a){var n=a.color;return{symbol:"circle",style:{r:4,fill:n}}}});var CB=null,V2=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return n.prototype.createShapePointsCfg=function(t){var s=a.prototype.createShapePointsCfg.call(this,t),l,f=this.getAttribute("size");if(f){l=this.getAttributeValues(f,t)[0];var d=this.coordinate,m=xl(d);l=l/m}else this.defaultSize||(this.defaultSize=$x(this)),l=this.defaultSize;return s.size=l,s._size=(0,E.U2)(t[_e],[this._sizeField]),s},n.prototype.initAttributes=function(){var t=this.attributeOption,s=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=s,delete t.size,a.prototype.initAttributes.call(this)},n}(Ls),H2=V2;yi("area","line",{draw:function(a,n){var t=Q0(a,!0,!1,this),s=n.addShape({type:"path",attrs:t,name:"area"});return s},getMarker:function(a){var n=a.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,stroke:n,fill:null}}}}),yi("area","smooth",{draw:function(a,n){var t=this.coordinate,s=Q0(a,!1,!0,this,jx(t)),l=n.addShape({type:"path",attrs:s,name:"area"});return l},getMarker:function(a){var n=a.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,fill:n,fillOpacity:1}}}}),yi("area","smooth-line",{draw:function(a,n){var t=this.coordinate,s=Q0(a,!0,!0,this,jx(t)),l=n.addShape({type:"path",attrs:s,name:"area"});return l},getMarker:function(a){var n=a.color;return{symbol:function(t,s,l){return l===void 0&&(l=5.5),[["M",t-l,s-4],["L",t+l,s-4],["L",t+l,s+4],["L",t-l,s+4],["Z"]]},style:{r:5,stroke:n,fill:null}}}});function O_(a,n){return["C",a.x*1/2+n.x*1/2,a.y,a.x*1/2+n.x*1/2,n.y,n.x,n.y]}function ey(a,n){var t=[];t.push({x:n.x,y:n.y}),t.push(a);var s=["Q"];return(0,E.S6)(t,function(l){s.push(l.x,l.y)}),s}function j2(a,n,t){var s=ey(n,t),l=[["M",a.x,a.y]];return l.push(s),l}function R3(a,n){var t=ey(a[1],n),s=ey(a[3],n),l=[["M",a[0].x,a[0].y]];return l.push(s),l.push(["L",a[3].x,a[3].y]),l.push(["L",a[2].x,a[2].y]),l.push(t),l.push(["L",a[1].x,a[1].y]),l.push(["L",a[0].x,a[0].y]),l.push(["Z"]),l}yi("edge","arc",{draw:function(a,n){var t=_u(a,!0,!1,"lineWidth"),s=a.points,l=s.length>2?"weight":"normal",f;if(a.isInCircle){var d={x:0,y:1};return l==="normal"?f=j2(s[0],s[1],d):(t.fill=t.stroke,f=R3(s,d)),f=this.parsePath(f),n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:f})})}else{if(l==="normal")return s=this.parsePoints(s),f=nf((s[1].x+s[0].x)/2,s[0].y,Math.abs(s[1].x-s[0].x)/2,Math.PI,Math.PI*2),n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:f})});var m=O_(s[1],s[3]),x=O_(s[2],s[0]);return f=[["M",s[0].x,s[0].y],["L",s[1].x,s[1].y],m,["L",s[3].x,s[3].y],["L",s[2].x,s[2].y],x,["Z"]],f=this.parsePath(f),t.fill=t.stroke,n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:f})})}},getMarker:function(a){return{symbol:"circle",style:{r:4.5,fill:a.color}}}});function I3(a,n){var t=O_(a,n),s=[["M",a.x,a.y]];return s.push(t),s}yi("edge","smooth",{draw:function(a,n){var t=_u(a,!0,!1,"lineWidth"),s=a.points,l=this.parsePath(I3(s[0],s[1]));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:l})})},getMarker:function(a){return{symbol:"circle",style:{r:4.5,fill:a.color}}}});var ty=1/3;function P3(a,n){var t=[];t.push({x:a.x,y:a.y*(1-ty)+n.y*ty}),t.push({x:n.x,y:a.y*(1-ty)+n.y*ty}),t.push(n);var s=[["M",a.x,a.y]];return(0,E.S6)(t,function(l){s.push(["L",l.x,l.y])}),s}yi("edge","vhv",{draw:function(a,n){var t=_u(a,!0,!1,"lineWidth"),s=a.points,l=this.parsePath(P3(s[0],s[1]));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:l})})},getMarker:function(a){return{symbol:"circle",style:{r:4.5,fill:a.color}}}}),yi("interval","funnel",{getPoints:function(a){return a.size=a.size*2,M_(a)},draw:function(a,n){var t=_u(a,!1,!0),s=this.parsePath(Gx(a.points,a.nextPoints,!1)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(a){var n=a.color;return{symbol:"square",style:{r:4,fill:n}}}}),yi("interval","hollow-rect",{draw:function(a,n){var t=_u(a,!0,!1),s=n,l=a==null?void 0:a.background;if(l){s=n.addGroup();var f=Dp(a),d=Wx(a,this.parsePoints(a.points),this.coordinate);s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},f),{path:d}),capture:!1,zIndex:-1,name:Dn})}var m=this.parsePath(R_(a.points)),x=s.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:m}),name:"interval"});return l?s:x},getMarker:function(a){var n=a.color,t=a.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:n,fill:null}}:{symbol:"square",style:{r:4,stroke:n,fill:null}}}});function W2(a){var n=a.x,t=a.y,s=a.y0;return(0,E.kJ)(t)?t.map(function(l,f){return{x:(0,E.kJ)(n)?n[f]:n,y:l}}):[{x:n,y:s},{x:n,y:t}]}yi("interval","line",{getPoints:function(a){return W2(a)},draw:function(a,n){var t=_u(a,!0,!1,"lineWidth"),s=Xl((0,M.pi)({},t),["fill"]),l=this.parsePath(R_(a.points,!1)),f=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},s),{path:l}),name:"interval"});return f},getMarker:function(a){var n=a.color;return{symbol:function(t,s,l){return[["M",t,s-l],["L",t,s+l]]},style:{r:5,stroke:n}}}}),yi("interval","pyramid",{getPoints:function(a){return a.size=a.size*2,M_(a)},draw:function(a,n){var t=_u(a,!1,!0),s=this.parsePath(Gx(a.points,a.nextPoints,!0)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(a){var n=a.color;return{symbol:"square",style:{r:4,fill:n}}}});function G2(a){var n,t=a.x,s=a.y,l=a.y0,f=a.size,d,m;(0,E.kJ)(s)?(n=(0,M.CR)(s,2),d=n[0],m=n[1]):(d=l,m=s);var x=t+f/2,A=t-f/2;return[{x:t,y:d},{x:t,y:m},{x:A,y:d},{x,y:d},{x:A,y:m},{x,y:m}]}function O3(a){return[["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["M",a[2].x,a[2].y],["L",a[3].x,a[3].y],["M",a[4].x,a[4].y],["L",a[5].x,a[5].y]]}yi("interval","tick",{getPoints:function(a){return G2(a)},draw:function(a,n){var t=_u(a,!0,!1),s=this.parsePath(O3(a.points)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s}),name:"interval"});return l},getMarker:function(a){var n=a.color;return{symbol:function(t,s,l){return[["M",t-l/2,s-l],["L",t+l/2,s-l],["M",t,s-l],["L",t,s+l],["M",t-l/2,s+l],["L",t+l/2,s+l]]},style:{r:5,stroke:n}}}});var k3=function(a,n,t){var s=a.x,l=a.y,f=n.x,d=n.y,m;switch(t){case"hv":m=[{x:f,y:l}];break;case"vh":m=[{x:s,y:d}];break;case"hvh":var x=(f+s)/2;m=[{x,y:l},{x,y:d}];break;case"vhv":var A=(l+d)/2;m=[{x:s,y:A},{x:f,y:A}];break;default:break}return m};function L3(a,n){var t=[];return(0,E.S6)(a,function(s,l){var f=a[l+1];if(t.push(s),f){var d=k3(s,f,n);t=t.concat(d)}}),t}function $2(a){return a.map(function(n,t){return t===0?["M",n.x,n.y]:["L",n.x,n.y]})}function X2(a,n){var t=ud(a.points,a.connectNulls,a.showSinglePoint),s=[];return(0,E.S6)(t,function(l){var f=L3(l,n);s=s.concat($2(f))}),(0,M.pi)((0,M.pi)({},_u(a,!0,!1,"lineWidth")),{path:s})}(0,E.S6)(["hv","vh","hvh","vhv"],function(a){yi("line",a,{draw:function(n,t){var s=X2(n,a),l=t.addShape({type:"path",attrs:s,name:"line"});return l},getMarker:function(n){return ld(n,a)}})}),(0,E.S6)(E3,function(a){yi("point",a,{draw:function(n,t){return P_(this,n,t,a,!0)},getMarker:function(n){var t=n.color;return{symbol:Sl[a],style:{r:4.5,stroke:t,fill:null}}}})}),yi("point","image",{draw:function(a,n){var t,s,l=_u(a,!1,!1,"r").r,f=this.parsePoints(a.points),d=f[0];if(a.isStack)d=f[1];else if(f.length>1){var m=n.addGroup();try{for(var x=(0,M.XA)(f),A=x.next();!A.done;A=x.next()){var P=A.value;m.addShape("image",{attrs:{x:P.x-l/2,y:P.y-l,width:l,height:l,img:a.shape[1]}})}}catch(L){t={error:L}}finally{try{A&&!A.done&&(s=x.return)&&s.call(x)}finally{if(t)throw t.error}}return m}return n.addShape("image",{attrs:{x:d.x-l/2,y:d.y-l,width:l,height:l,img:a.shape[1]}})},getMarker:function(a){var n=a.color;return{symbol:"circle",style:{r:4.5,fill:n}}}}),(0,E.S6)(N2,function(a){yi("point",a,{draw:function(n,t){return P_(this,n,t,a,!1)},getMarker:function(n){var t=n.color;return{symbol:Sl[a]||a,style:{r:4.5,fill:t}}}})});function Yx(a){var n=(0,E.kJ)(a)?a:[a],t=n[0],s=n[n.length-1],l=n.length>1?n[1]:t,f=n.length>3?n[3]:s,d=n.length>2?n[2]:l;return{min:t,max:s,min1:l,max1:f,median:d}}function k_(a,n,t){var s=t/2,l;if((0,E.kJ)(n)){var f=Yx(n),d=f.min,m=f.max,x=f.median,A=f.min1,P=f.max1,L=a-s,B=a+s;l=[[L,m],[B,m],[a,m],[a,P],[L,A],[L,P],[B,P],[B,A],[a,A],[a,d],[L,d],[B,d],[L,x],[B,x]]}else{n=(0,E.UM)(n)?.5:n;var U=Yx(a),d=U.min,m=U.max,x=U.median,A=U.min1,P=U.max1,Y=n-s,se=n+s;l=[[d,Y],[d,se],[d,n],[A,n],[A,Y],[A,se],[P,se],[P,Y],[P,n],[m,n],[m,Y],[m,se],[x,Y],[x,se]]}return l.map(function(be){return{x:be[0],y:be[1]}})}function Y2(a){return[["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["M",a[2].x,a[2].y],["L",a[3].x,a[3].y],["M",a[4].x,a[4].y],["L",a[5].x,a[5].y],["L",a[6].x,a[6].y],["L",a[7].x,a[7].y],["L",a[4].x,a[4].y],["Z"],["M",a[8].x,a[8].y],["L",a[9].x,a[9].y],["M",a[10].x,a[10].y],["L",a[11].x,a[11].y],["M",a[12].x,a[12].y],["L",a[13].x,a[13].y]]}yi("schema","box",{getPoints:function(a){var n=a.x,t=a.y,s=a.size;return k_(n,t,s)},draw:function(a,n){var t=_u(a,!0,!1),s=this.parsePath(Y2(a.points)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s,name:"schema"})});return l},getMarker:function(a){var n=a.color;return{symbol:function(t,s,l){var f=[s-6,s-3,s,s+3,s+6],d=k_(t,f,l);return[["M",d[0].x+1,d[0].y],["L",d[1].x-1,d[1].y],["M",d[2].x,d[2].y],["L",d[3].x,d[3].y],["M",d[4].x,d[4].y],["L",d[5].x,d[5].y],["L",d[6].x,d[6].y],["L",d[7].x,d[7].y],["L",d[4].x,d[4].y],["Z"],["M",d[8].x,d[8].y],["L",d[9].x,d[9].y],["M",d[10].x+1,d[10].y],["L",d[11].x-1,d[11].y],["M",d[12].x,d[12].y],["L",d[13].x,d[13].y]]},style:{r:6,lineWidth:1,stroke:n}}}});function D3(a){var n=(0,E.kJ)(a)?a:[a],t=n.sort(function(s,l){return l-s});return Gh(t,4,t[t.length-1])}function K2(a,n,t){var s=D3(n);return[{x:a,y:s[0]},{x:a,y:s[1]},{x:a-t/2,y:s[2]},{x:a-t/2,y:s[1]},{x:a+t/2,y:s[1]},{x:a+t/2,y:s[2]},{x:a,y:s[2]},{x:a,y:s[3]}]}function F3(a){return[["M",a[0].x,a[0].y],["L",a[1].x,a[1].y],["M",a[2].x,a[2].y],["L",a[3].x,a[3].y],["L",a[4].x,a[4].y],["L",a[5].x,a[5].y],["Z"],["M",a[6].x,a[6].y],["L",a[7].x,a[7].y]]}yi("schema","candle",{getPoints:function(a){var n=a.x,t=a.y,s=a.size;return K2(n,t,s)},draw:function(a,n){var t=_u(a,!0,!0),s=this.parsePath(F3(a.points)),l=n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s,name:"schema"})});return l},getMarker:function(a){var n=a.color;return{symbol:function(t,s,l){var f=[s+7.5,s+3,s-3,s-7.5],d=K2(t,f,l);return[["M",d[0].x,d[0].y],["L",d[1].x,d[1].y],["M",d[2].x,d[2].y],["L",d[3].x,d[3].y],["L",d[4].x,d[4].y],["L",d[5].x,d[5].y],["Z"],["M",d[6].x,d[6].y],["L",d[7].x,d[7].y]]},style:{lineWidth:1,stroke:n,fill:n,r:6}}}});function B3(a,n){var t=Math.abs(a[0].x-a[2].x),s=Math.abs(a[0].y-a[2].y),l=Math.min(t,s);n&&(l=(0,E.uZ)(n,0,Math.min(t,s))),l=l/2;var f=(a[0].x+a[2].x)/2,d=(a[0].y+a[2].y)/2;return{x:f-l,y:d-l,width:l*2,height:l*2}}yi("polygon","square",{draw:function(a,n){if(!(0,E.xb)(a.points)){var t=_u(a,!0,!0),s=this.parsePoints(a.points);return n.addShape("rect",{attrs:(0,M.pi)((0,M.pi)({},t),B3(s,a.size)),name:"polygon"})}},getMarker:function(a){var n=a.color;return{symbol:"square",style:{r:4,fill:n}}}}),yi("violin","smooth",{draw:function(a,n){var t=_u(a,!0,!0),s=this.parsePath(_m(a.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(a){var n=a.color;return{symbol:"circle",style:{stroke:null,r:4,fill:n}}}}),yi("violin","hollow",{draw:function(a,n){var t=_u(a,!0,!1),s=this.parsePath(xg(a.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(a){var n=a.color;return{symbol:"circle",style:{r:4,fill:null,stroke:n}}}}),yi("violin","hollow-smooth",{draw:function(a,n){var t=_u(a,!0,!1),s=this.parsePath(_m(a.points));return n.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},t),{path:s})})},getMarker:function(a){var n=a.color;return{symbol:"circle",style:{r:4,fill:null,stroke:n}}}});var rv=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getLabelValueDir=function(t){var s="y",l=t.points;return l[0][s]<=l[2][s]?1:-1},n.prototype.getLabelOffsetPoint=function(t,s,l,f){var d,m=a.prototype.getLabelOffsetPoint.call(this,t,s,l),x=this.getCoordinate(),A=x.isTransposed,P=A?"x":"y",L=this.getLabelValueDir(t.mappingData);return m=(0,M.pi)((0,M.pi)({},m),(d={},d[P]=m[P]*L,d)),x.isReflect("x")&&(m=(0,M.pi)((0,M.pi)({},m),{x:m.x*-1})),x.isReflect("y")&&(m=(0,M.pi)((0,M.pi)({},m),{y:m.y*-1})),m},n.prototype.getThemedLabelCfg=function(t){var s=this.geometry,l=this.getDefaultLabelCfg(),f=s.theme;return(0,E.b$)({},l,f.labels,t.position==="middle"?{offset:0}:{},t)},n.prototype.setLabelPosition=function(t,s,l,f){var d=this.getCoordinate(),m=d.isTransposed,x=s.points,A=d.convert(x[0]),P=d.convert(x[2]),L=this.getLabelValueDir(s),B,U,Y,se,be=(0,E.kJ)(s.shape)?s.shape[0]:s.shape;if(be==="funnel"||be==="pyramid"){var Ee=(0,E.U2)(s,"nextPoints"),it=(0,E.U2)(s,"points");if(Ee){var gt=d.convert(it[0]),xt=d.convert(it[1]),Bt=d.convert(Ee[0]),_r=d.convert(Ee[1]);m?(B=Math.min(Bt.y,gt.y),Y=Math.max(Bt.y,gt.y),U=(xt.x+_r.x)/2,se=(gt.x+Bt.x)/2):(B=Math.min((xt.y+_r.y)/2,(gt.y+Bt.y)/2),Y=Math.max((xt.y+_r.y)/2,(gt.y+Bt.y)/2),U=_r.x,se=gt.x)}else B=Math.min(P.y,A.y),Y=Math.max(P.y,A.y),U=P.x,se=A.x}else B=Math.min(P.y,A.y),Y=Math.max(P.y,A.y),U=P.x,se=A.x;switch(f){case"right":t.x=U,t.y=(B+Y)/2,t.textAlign=(0,E.U2)(t,"textAlign",L>0?"left":"right");break;case"left":t.x=se,t.y=(B+Y)/2,t.textAlign=(0,E.U2)(t,"textAlign",L>0?"left":"right");break;case"bottom":m&&(t.x=(U+se)/2),t.y=Y,t.textAlign=(0,E.U2)(t,"textAlign","center"),t.textBaseline=(0,E.U2)(t,"textBaseline",L>0?"bottom":"top");break;case"middle":m&&(t.x=(U+se)/2),t.y=(B+Y)/2,t.textAlign=(0,E.U2)(t,"textAlign","center"),t.textBaseline=(0,E.U2)(t,"textBaseline","middle");break;case"top":m&&(t.x=(U+se)/2),t.y=B,t.textAlign=(0,E.U2)(t,"textAlign","center"),t.textBaseline=(0,E.U2)(t,"textBaseline",L>0?"bottom":"top");break;default:break}},n}(Eo),q2=rv,ry=Math.PI/2,N3=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getLabelOffset=function(t){var s=this.getCoordinate(),l=0;if((0,E.hj)(t))l=t;else if((0,E.HD)(t)&&t.indexOf("%")!==-1){var f=s.getRadius();s.innerRadius>0&&(f=f*(1-s.innerRadius)),l=parseFloat(t)*.01*f}return l},n.prototype.getLabelItems=function(t){var s=a.prototype.getLabelItems.call(this,t),l=this.geometry.getYScale();return(0,E.UI)(s,function(f){if(f&&l){var d=l.scale((0,E.U2)(f.data,l.field));return(0,M.pi)((0,M.pi)({},f),{percent:d})}return f})},n.prototype.getLabelAlign=function(t){var s=this.getCoordinate(),l;if(t.labelEmit)l=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!s.isTransposed)l="center";else{var f=s.getCenter(),d=t.offset;Math.abs(t.x-f.x)<1?l="center":t.angle>Math.PI||t.angle<=0?l=d>0?"left":"right":l=d>0?"right":"left"}return l},n.prototype.getLabelPoint=function(t,s,l){var f=1,d,m=t.content[l];this.isToMiddle(s)?d=this.getMiddlePoint(s.points):(t.content.length===1&&l===0?l=1:l===0&&(f=-1),d=this.getArcPoint(s,l));var x=t.offset*f,A=this.getPointAngle(d),P=t.labelEmit,L=this.getCirclePoint(A,x,d,P);return L.r===0?L.content="":(L.content=m,L.angle=A,L.color=s.color),L.rotate=t.autoRotate?this.getLabelRotate(A,x,P):t.rotate,L.start={x:d.x,y:d.y},L},n.prototype.getArcPoint=function(t,s){return s===void 0&&(s=0),!(0,E.kJ)(t.x)&&!(0,E.kJ)(t.y)?{x:t.x,y:t.y}:{x:(0,E.kJ)(t.x)?t.x[s]:t.x,y:(0,E.kJ)(t.y)?t.y[s]:t.y}},n.prototype.getPointAngle=function(t){return Wd(this.getCoordinate(),t)},n.prototype.getCirclePoint=function(t,s,l,f){var d=this.getCoordinate(),m=d.getCenter(),x=$h(d,l);if(x===0)return(0,M.pi)((0,M.pi)({},m),{r:x});var A=t;if(d.isTransposed&&x>s&&!f){var P=Math.asin(s/(2*x));A=t+P*2}else x=x+s;return{x:m.x+x*Math.cos(A),y:m.y+x*Math.sin(A),r:x}},n.prototype.getLabelRotate=function(t,s,l){var f=t+ry;return l&&(f-=ry),f&&(f>ry?f=f-Math.PI:f<-ry&&(f=f+Math.PI)),f},n.prototype.getMiddlePoint=function(t){var s=this.getCoordinate(),l=t.length,f={x:0,y:0};return(0,E.S6)(t,function(d){f.x+=d.x,f.y+=d.y}),f.x/=l,f.y/=l,f=s.convert(f),f},n.prototype.isToMiddle=function(t){return t.x.length>2},n}(Eo),Q2=N3,z3=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return n.prototype.getDefaultLabelCfg=function(t,s){var l=a.prototype.getDefaultLabelCfg.call(this,t,s);return(0,E.b$)({},l,(0,E.U2)(this.geometry.theme,"pieLabels",{}))},n.prototype.getLabelOffset=function(t){return a.prototype.getLabelOffset.call(this,t)||0},n.prototype.getLabelRotate=function(t,s,l){var f;return s<0&&(f=t,f>Math.PI/2&&(f=f-Math.PI),f<-Math.PI/2&&(f=f+Math.PI)),f},n.prototype.getLabelAlign=function(t){var s=this.getCoordinate(),l=s.getCenter(),f;return t.angle<=Math.PI/2&&t.x>=l.x?f="left":f="right",t.offset<=0&&(f==="right"?f="left":f="right"),f},n.prototype.getArcPoint=function(t){return t},n.prototype.getPointAngle=function(t){var s=this.getCoordinate(),l={x:(0,E.kJ)(t.x)?t.x[0]:t.x,y:t.y[0]},f={x:(0,E.kJ)(t.x)?t.x[1]:t.x,y:t.y[1]},d,m=Wd(s,l);if(t.points&&t.points[0].y===t.points[1].y)d=m;else{var x=Wd(s,f);m>=x&&(x=x+Math.PI*2),d=m+(x-m)/2}return d},n.prototype.getCirclePoint=function(t,s){var l=this.getCoordinate(),f=l.getCenter(),d=l.getRadius()+s;return(0,M.pi)((0,M.pi)({},zs(f.x,f.y,d,t)),{angle:t,r:d})},n}(Q2),U3=z3,L_=4;function Z3(a,n,t,s,l,f){var d,m,x=!0,A=s.start,P=s.end,L=Math.min(A.y,P.y),B=Math.abs(A.y-P.y),U,Y=0,se=Number.MIN_VALUE,be=n.map(function(Or){return Or.y>Y&&(Y=Or.y),Or.y<se&&(se=Or.y),{size:t,targets:[Or.y-L]}});for(se-=L,Y-L>B&&(B=Y-L);x;)for(be.forEach(function(Or){var Gr=(Math.min.apply(se,Or.targets)+Math.max.apply(se,Or.targets))/2;Or.pos=Math.min(Math.max(se,Gr-Or.size/2),B-Or.size)}),x=!1,U=be.length;U--;)if(U>0){var Ee=be[U-1],it=be[U];Ee.pos+Ee.size>it.pos&&(Ee.size+=it.size,Ee.targets=Ee.targets.concat(it.targets),Ee.pos+Ee.size>B&&(Ee.pos=B-Ee.size),be.splice(U,1),x=!0)}U=0,be.forEach(function(Or){var Gr=L+t/2;Or.targets.forEach(function(){n[U].y=Or.pos+Gr,Gr+=t,U++})});var gt={};try{for(var xt=(0,M.XA)(a),Bt=xt.next();!Bt.done;Bt=xt.next()){var _r=Bt.value;gt[_r.get("id")]=_r}}catch(Or){d={error:Or}}finally{try{Bt&&!Bt.done&&(m=xt.return)&&m.call(xt)}finally{if(d)throw d.error}}n.forEach(function(Or){var Gr=Or.r*Or.r,mn=Math.pow(Math.abs(Or.y-l.y),2);if(Gr<mn)Or.x=l.x;else{var cn=Math.sqrt(Gr-mn);f?Or.x=l.x+cn:Or.x=l.x-cn}var Nn=gt[Or.id];Nn.attr("x",Or.x),Nn.attr("y",Or.y);var hi=(0,E.sE)(Nn.getChildren(),function(Wi){return Wi.get("type")==="text"});hi&&(hi.attr("y",Or.y),hi.attr("x",Or.x))})}function J2(a,n,t,s){if(!(!a.length||!n.length)){var l=a[0]?a[0].offset:0,f=n[0].get("coordinate"),d=f.getRadius(),m=f.getCenter();if(l>0){var x=14,A=d+l,P=A*2+x*2,L={start:f.start,end:f.end},B=[[],[]];a.forEach(function(U){U&&(U.textAlign==="right"?B[0].push(U):B[1].push(U))}),B.forEach(function(U,Y){var se=P/x;U.length>se&&(U.sort(function(be,Ee){return Ee["..percent"]-be["..percent"]}),U.splice(se,U.length-se)),U.sort(function(be,Ee){return be.y-Ee.y}),Z3(n,U,x,L,m,Y)})}(0,E.S6)(a,function(U){if(U&&U.labelLine){var Y=U.offset,se=U.angle,be=zs(m.x,m.y,d,se),Ee=zs(m.x,m.y,d+Y/2,se),it=U.x+(0,E.U2)(U,"offsetX",0),gt=U.y+(0,E.U2)(U,"offsetY",0),xt={x:it-Math.cos(se)*L_,y:gt-Math.sin(se)*L_};(0,E.Kn)(U.labelLine)||(U.labelLine={}),U.labelLine.path=["M ".concat(be.x),"".concat(be.y," Q").concat(Ee.x),"".concat(Ee.y," ").concat(xt.x),xt.y].join(",")}})}}function Kx(a,n,t){var s=a.filter(function(Y){return!Y.invisible});s.sort(function(Y,se){return Y.y-se.y});var l=!0,f=t.minY,d=t.maxY,m=Math.abs(f-d),x,A=0,P=Number.MIN_VALUE,L=s.map(function(Y){return Y.y>A&&(A=Y.y),Y.y<P&&(P=Y.y),{content:Y.content,size:n,targets:[Y.y-f],pos:null}});for(P-=f,A-f>m&&(m=A-f);l;)for(L.forEach(function(Y){var se=(Math.min.apply(P,Y.targets)+Math.max.apply(P,Y.targets))/2;Y.pos=Math.min(Math.max(P,se-Y.size/2),m-Y.size),Y.pos=Math.max(0,Y.pos)}),l=!1,x=L.length;x--;)if(x>0){var B=L[x-1],U=L[x];B.pos+B.size>U.pos&&(B.size+=U.size,B.targets=B.targets.concat(U.targets),B.pos+B.size>m&&(B.pos=m-B.size),L.splice(x,1),l=!0)}x=0,L.forEach(function(Y){var se=f+n/2;Y.targets.forEach(function(){s[x].y=Y.pos+se,se+=n,x++})})}var ew=4;function V3(a,n){var t=n.getCenter(),s=n.getRadius();if(a&&a.labelLine){var l=a.angle,f=a.offset,d=zs(t.x,t.y,s,l),m=a.x+(0,E.U2)(a,"offsetX",0)*(Math.cos(l)>0?1:-1),x=a.y+(0,E.U2)(a,"offsetY",0)*(Math.sin(l)>0?1:-1),A={x:m-Math.cos(l)*ew,y:x-Math.sin(l)*ew},P=a.labelLine.smooth,L=[],B=A.x-t.x,U=A.y-t.y,Y=Math.atan(U/B);if(B<0&&(Y+=Math.PI),P===!1){(0,E.Kn)(a.labelLine)||(a.labelLine={});var se=0;(l<0&&l>-Math.PI/2||l>Math.PI*1.5)&&A.y>d.y&&(se=1),l>=0&&l<Math.PI/2&&A.y>d.y&&(se=1),l>=Math.PI/2&&l<Math.PI&&d.y>A.y&&(se=1),(l<-Math.PI/2||l>=Math.PI&&l<Math.PI*1.5)&&d.y>A.y&&(se=1);var be=f/2>4?4:Math.max(f/2-1,0),Ee=zs(t.x,t.y,s+be,l),it=zs(t.x,t.y,s+f/2,Y),gt=0;L.push("M ".concat(d.x," ").concat(d.y)),L.push("L ".concat(Ee.x," ").concat(Ee.y)),L.push("A ".concat(t.x," ").concat(t.y," 0 ").concat(gt," ").concat(se," ").concat(it.x," ").concat(it.y)),L.push("L ".concat(A.x," ").concat(A.y))}else{var Ee=zs(t.x,t.y,s+(f/2>4?4:Math.max(f/2-1,0)),l),xt=d.x<t.x?1:-1;L.push("M ".concat(A.x," ").concat(A.y));var Bt=(d.y-t.y)/(d.x-t.x),_r=(A.y-t.y)/(A.x-t.x);Math.abs(Bt-_r)>Math.pow(Math.E,-16)&&L.push.apply(L,["C",A.x+xt*4,A.y,2*Ee.x-d.x,2*Ee.y-d.y,d.x,d.y]),L.push("L ".concat(d.x," ").concat(d.y))}a.labelLine.path=L.join(" ")}}function H3(a,n,t,s){var l,f,d=(0,E.hX)(a,function(Gr){return!(0,E.UM)(Gr)}),m=n[0]&&n[0].get("coordinate");if(m){var x=m.getCenter(),A=m.getRadius(),P={};try{for(var L=(0,M.XA)(n),B=L.next();!B.done;B=L.next()){var U=B.value;P[U.get("id")]=U}}catch(Gr){l={error:Gr}}finally{try{B&&!B.done&&(f=L.return)&&f.call(L)}finally{if(l)throw l.error}}var Y=(0,E.U2)(d[0],"labelHeight",14),se=(0,E.U2)(d[0],"offset",0);if(!(se<=0)){var be="left",Ee="right",it=(0,E.vM)(d,function(Gr){return Gr.x<x.x?be:Ee}),gt=m.start,xt=m.end,Bt=Math.min((A+se+Y)*2,m.getHeight()),_r=Bt/2,Or={minX:gt.x,maxX:xt.x,minY:x.y-_r,maxY:x.y+_r};(0,E.S6)(it,function(Gr,mn){var cn=Math.floor(Bt/Y);Gr.length>cn&&(Gr.sort(function(Nn,hi){return hi.percent-Nn.percent}),(0,E.S6)(Gr,function(Nn,hi){hi+1>cn&&(P[Nn.id].set("visible",!1),Nn.invisible=!0)})),Kx(Gr,Y,Or)}),(0,E.S6)(it,function(Gr,mn){(0,E.S6)(Gr,function(cn){var Nn=mn===Ee,hi=P[cn.id],Wi=hi.getChildByIndex(0);if(Wi){var bi=A+se,to=cn.y-x.y,jn=Math.pow(bi,2),Ci=Math.pow(to,2),aa=jn-Ci>0?jn-Ci:0,Ni=Math.sqrt(aa),$i=Math.abs(Math.cos(cn.angle)*bi);Nn?cn.x=x.x+Math.max(Ni,$i):cn.x=x.x-Math.max(Ni,$i)}Wi&&(Wi.attr("y",cn.y),Wi.attr("x",cn.x)),V3(cn,m)})})}}}var qx=4,j3=4,tw=4;function rw(a,n,t){var s=n.getCenter(),l=n.getRadius(),f={x:a.x-(t?tw:-tw),y:a.y},d=zs(s.x,s.y,l+qx,a.angle),m={x:f.x,y:f.y},x={x:d.x,y:d.y},A=zs(s.x,s.y,l,a.angle),P="";if(f.y!==d.y){var L=t?4:-4;m.y=f.y,a.angle<0&&a.angle>=-Math.PI/2&&(m.x=Math.max(d.x,f.x-L),f.y<d.y?x.y=m.y:(x.y=d.y,x.x=Math.max(x.x,m.x-L))),a.angle>0&&a.angle<Math.PI/2&&(m.x=Math.max(d.x,f.x-L),f.y>d.y?x.y=m.y:(x.y=d.y,x.x=Math.max(x.x,m.x-L))),a.angle>Math.PI/2&&(m.x=Math.min(d.x,f.x-L),f.y>d.y?x.y=m.y:(x.y=d.y,x.x=Math.min(x.x,m.x-L))),a.angle<-Math.PI/2&&(m.x=Math.min(d.x,f.x-L),f.y<d.y?x.y=m.y:(x.y=d.y,x.x=Math.min(x.x,m.x-L)))}P=["M ".concat(f.x,",").concat(f.y),"L ".concat(m.x,",").concat(m.y),"L ".concat(x.x,",").concat(x.y),"L ".concat(d.x,",").concat(d.y),"L ".concat(A.x,",").concat(A.y)].join(" "),a.labelLine=(0,E.b$)({},a.labelLine,{path:P})}function nw(a,n,t,s){var l,f,d=n[0]&&n[0].get("coordinate");if(d){var m=d.getCenter(),x=d.getRadius(),A={};try{for(var P=(0,M.XA)(n),L=P.next();!L.done;L=P.next()){var B=L.value;A[B.get("id")]=B}}catch(Gr){l={error:Gr}}finally{try{L&&!L.done&&(f=P.return)&&f.call(P)}finally{if(l)throw l.error}}var U=(0,E.U2)(a[0],"labelHeight",14),Y=Math.max((0,E.U2)(a[0],"offset",0),qx);(0,E.S6)(a,function(Gr){if(Gr){var mn=(0,E.U2)(A,[Gr.id]);if(mn){var cn=Gr.x>m.x||Gr.x===m.x&&Gr.y>m.y,Nn=(0,E.UM)(Gr.offsetX)?j3:Gr.offsetX,hi=zs(m.x,m.y,x+qx,Gr.angle),Wi=Y+Nn;Gr.x=m.x+(cn?1:-1)*(x+Wi),Gr.y=hi.y}}});var se=d.start,be=d.end,Ee="left",it="right",gt=(0,E.vM)(a,function(Gr){return Gr.x<m.x?Ee:it}),xt=(x+Y)*2+U;(0,E.S6)(gt,function(Gr){var mn=Gr.length*U;mn>xt&&(xt=Math.min(mn,Math.abs(se.y-be.y)))});var Bt={minX:se.x,maxX:be.x,minY:m.y-xt/2,maxY:m.y+xt/2};(0,E.S6)(gt,function(Gr,mn){var cn=xt/U;Gr.length>cn&&(Gr.sort(function(Nn,hi){return hi.percent-Nn.percent}),(0,E.S6)(Gr,function(Nn,hi){hi>cn&&(A[Nn.id].set("visible",!1),Nn.invisible=!0)})),Kx(Gr,U,Bt)});var _r=Bt.minY,Or=Bt.maxY;(0,E.S6)(gt,function(Gr,mn){var cn=mn===it;(0,E.S6)(Gr,function(Nn){var hi=(0,E.U2)(A,Nn&&[Nn.id]);if(hi){if(Nn.y<_r||Nn.y>Or){hi.set("visible",!1);return}var Wi=hi.getChildByIndex(0),bi=Wi.getCanvasBBox(),to={x:cn?bi.x:bi.maxX,y:bi.y+bi.height/2};qu(Wi,Nn.x-to.x,Nn.y-to.y),Nn.labelLine&&rw(Nn,d,cn)}})})}}function W3(a,n,t,s){(0,E.S6)(n,function(l){var f=s.minX,d=s.minY,m=s.maxX,x=s.maxY,A=l.getCanvasBBox(),P=A.minX,L=A.minY,B=A.maxX,U=A.maxY,Y=A.x,se=A.y,be=A.width,Ee=A.height,it=Y,gt=se;(P<f||B<f)&&(it=f),(L<d||U<d)&&(gt=d),P>m?it=m-be:B>m&&(it=it-(B-m)),L>x?gt=x-Ee:U>x&&(gt=gt-(U-x)),(it!==Y||gt!==se)&&qu(l,it-Y,gt-se)})}function G3(a,n,t,s){(0,E.S6)(n,function(l,f){var d=l.getCanvasBBox(),m=t[f].getBBox();(d.minX<m.minX||d.minY<m.minY||d.maxX>m.maxX||d.maxY>m.maxY)&&l.remove(!0)})}var $3=100,iw=function(){function a(n){n===void 0&&(n={}),this.bitmap={};var t=n.xGap,s=t===void 0?1:t,l=n.yGap,f=l===void 0?8:l;this.xGap=s,this.yGap=f}return a.prototype.hasGap=function(n){for(var t=!0,s=this.bitmap,l=Math.round(n.minX),f=Math.round(n.maxX),d=Math.round(n.minY),m=Math.round(n.maxY),x=l;x<=f;x+=1){if(!s[x]){s[x]={};continue}if(x===l||x===f){for(var A=d;A<=m;A++)if(s[x][A]){t=!1;break}}else if(s[x][d]||s[x][m]){t=!1;break}}return t},a.prototype.fillGap=function(n){for(var t=this.bitmap,s=Math.round(n.minX),l=Math.round(n.maxX),f=Math.round(n.minY),d=Math.round(n.maxY),m=s;m<=l;m+=1)t[m]||(t[m]={});for(var m=s;m<=l;m+=this.xGap){for(var x=f;x<=d;x+=this.yGap)t[m][x]=!0;t[m][d]=!0}if(this.yGap!==1)for(var m=f;m<=d;m+=1)t[s][m]=!0,t[l][m]=!0;if(this.xGap!==1)for(var m=s;m<=l;m+=1)t[m][f]=!0,t[m][d]=!0},a.prototype.destroy=function(){this.bitmap={}},a}();function X3(a,n,t){t===void 0&&(t=$3);var s=-1,l=a.attr(),f=l.x,d=l.y,m=a.getCanvasBBox(),x=Math.sqrt(m.width*m.width+m.height*m.height),A,P=-s,L=0,B=0,U=function(Ee){var it=Ee*.1;return[it*Math.cos(it),it*Math.sin(it)]};if(n.hasGap(m))return n.fillGap(m),!0;for(var Y=!1,se=0,be={};Math.min(Math.abs(L),Math.abs(B))<x&&se<t;)if(A=U(P+=s),L=~~A[0],B=~~A[1],!(!L&&!B||be["".concat(L,"-").concat(B)])&&(a.attr({x:f+L,y:d+B}),L+B<0&&a.attr("textAlign","right"),se++,n.hasGap(a.getCanvasBBox()))){n.fillGap(a.getCanvasBBox()),Y=!0,be["".concat(L,"-").concat(B)]=!0;break}return Y}function Y3(a,n,t,s){var l=a.getCanvasBBox(),f=l.width,d=l.height,m={x:n,y:t,textAlign:"center"};switch(s){case 0:m.y-=d+1,m.x+=1,m.textAlign="left";break;case 1:m.y-=d+1,m.x-=1,m.textAlign="right";break;case 2:m.y+=d+1,m.x-=1,m.textAlign="right";break;case 3:m.y+=d+1,m.x+=1,m.textAlign="left";break;case 5:m.y-=d*2+2;break;case 6:m.y+=d*2+2;break;case 7:m.x+=f+1,m.textAlign="left";break;case 8:m.x-=f+1,m.textAlign="right";break;default:break}return a.attr(m),a.getCanvasBBox()}function aw(a,n,t,s){var l=new iw;(0,E.S6)(n,function(f){var d=f.find(function(m){return m.get("type")==="text"});X3(d,l)||f.remove(!0)}),l.destroy()}function ow(a,n,t,s){var l=new iw;(0,E.S6)(n,function(f){for(var d=f.find(function(U){return U.get("type")==="text"}),m=d.attr(),x=m.x,A=m.y,P=!1,L=0;L<=8;L++){var B=Y3(d,x,A,L);if(l.hasGap(B)){l.fillGap(B),P=!0;break}}P||f.remove(!0)}),l.destroy()}function K3(a,n){return(a[0]||0)*(n[0]||0)+(a[1]||0)*(n[1]||0)+(a[2]||0)*(n[2]||0)}function sw(a){if(a.length>4)return[];var n=function(l,f){return[f.x-l.x,f.y-l.y]},t=n(a[0],a[1]),s=n(a[1],a[2]);return[t,s]}function D_(a,n,t){n===void 0&&(n=0),t===void 0&&(t={x:0,y:0});var s=a.x,l=a.y;return{x:(s-t.x)*Math.cos(-n)+(l-t.y)*Math.sin(-n)+t.x,y:(t.x-s)*Math.sin(-n)+(l-t.y)*Math.cos(-n)+t.y}}function uw(a){var n=[{x:a.x,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width,y:a.y+a.height},{x:a.x,y:a.y+a.height}],t=a.rotation;return t?[D_(n[0],t,n[0]),D_(n[1],t,n[0]),D_(n[2],t,n[0]),D_(n[3],t,n[0])]:n}function lw(a,n){if(a.length>4)return{min:0,max:0};var t=[];return a.forEach(function(s){t.push(K3([s.x,s.y],n))}),{min:Math.min.apply(Math,(0,M.ev)([],(0,M.CR)(t),!1)),max:Math.max.apply(Math,(0,M.ev)([],(0,M.CR)(t),!1))}}function cw(a,n){return a.max>n.min&&a.min<n.max}function fw(a){return typeof a=="number"&&!Number.isNaN(a)&&a!==1/0&&a!==-1/0}function hw(a){return["x","y","width","height"].every(function(n){return fw(a[n])})}function q3(a,n,t){return t===void 0&&(t=0),!(n.x>a.x+a.width+t||n.x+n.width<a.x-t||n.y>a.y+a.height+t||n.y+n.height<a.y-t)}function Q3(a,n,t){if(t===void 0&&(t=0),!hw(a)||!hw(n))return!1;if(!a.rotation&&!n.rotation)return q3(a,n,t);for(var s=uw(a),l=uw(n),f=sw(s).concat(sw(l)),d=0;d<f.length;d++){var m=f[d],x=lw(s,m),A=lw(l,m);if(!cw(x,A))return!1}return!0}var J3=function(){function a(n){var t=this;this.queue=[],this.worker=new Worker(n),this.worker.onmessage=function(s){var l;(l=t.queue.shift())===null||l===void 0||l.resolve(s)},this.worker.onmessageerror=function(s){var l;console.warn("[AntV G2] Web worker is not available"),(l=t.queue.shift())===null||l===void 0||l.reject(s)}}return a.prototype.post=function(n,t){var s=this;return new Promise(function(l,f){s.queue.push({resolve:l,reject:f});try{s.worker.postMessage(n)}catch(d){console.warn("[AntV G2] Web worker is not available"),(0,E.mf)(t)&&t()}})},a.prototype.destroy=function(){this.worker.terminate()},a}();function eI(a){if(typeof window!="undefined"){var n;try{n=new Blob([a.toString()],{type:"application/javascript"})}catch(t){n=new window.BlobBuilder,n.append(a.toString()),n=n.getBlob()}return new J3(URL.createObjectURL(n))}}var pw=function(a){function n(){function A(gt,xt){return(gt[0]||0)*(xt[0]||0)+(gt[1]||0)*(xt[1]||0)+(gt[2]||0)*(xt[2]||0)}function P(gt){if(gt.length>4)return[];var xt=function(Or,Gr){return[Gr.x-Or.x,Gr.y-Or.y]},Bt=xt(gt[0],gt[1]),_r=xt(gt[1],gt[2]);return[Bt,_r]}function L(gt,xt,Bt){xt===void 0&&(xt=0),Bt===void 0&&(Bt={x:0,y:0});var _r=gt.x,Or=gt.y;return{x:(_r-Bt.x)*Math.cos(-xt)+(Or-Bt.y)*Math.sin(-xt)+Bt.x,y:(Bt.x-_r)*Math.sin(-xt)+(Or-Bt.y)*Math.cos(-xt)+Bt.y}}function B(gt){var xt=[{x:gt.x,y:gt.y},{x:gt.x+gt.width,y:gt.y},{x:gt.x+gt.width,y:gt.y+gt.height},{x:gt.x,y:gt.y+gt.height}],Bt=gt.rotation;return Bt?[L(xt[0],Bt,xt[0]),L(xt[1],Bt,xt[0]),L(xt[2],Bt,xt[0]),L(xt[3],Bt,xt[0])]:xt}function U(gt,xt){if(gt.length>4)return{min:0,max:0};var Bt=[];return gt.forEach(function(_r){Bt.push(A([_r.x,_r.y],xt))}),{min:Math.min.apply(null,Bt),max:Math.max.apply(null,Bt)}}function Y(gt,xt){return gt.max>xt.min&&gt.min<xt.max}function se(gt){return typeof gt=="number"&&!Number.isNaN(gt)&&gt!==1/0&&gt!==-1/0}function be(gt){return["x","y","width","height"].every(function(xt){return se(gt[xt])})}function Ee(gt,xt,Bt){return Bt===void 0&&(Bt=0),!(xt.x>gt.x+gt.width+Bt||xt.x+xt.width<gt.x-Bt||xt.y>gt.y+gt.height+Bt||xt.y+xt.height<gt.y-Bt)}function it(gt,xt,Bt){if(Bt===void 0&&(Bt=0),!be(gt)||!be(xt))return!1;if(!gt.rotation&&!xt.rotation)return Ee(gt,xt,Bt);for(var _r=B(gt),Or=B(xt),Gr=P(_r).concat(P(Or)),mn=0;mn<Gr.length;mn++){var cn=Gr[mn],Nn=U(_r,cn),hi=U(Or,cn);if(!Y(Nn,hi))return!1}return!0}return{intersect:it}}var t=n().intersect;function s(A){for(var P=A.slice(),L=0;L<P.length;L++){var B=P[L];if(B.visible)for(var U=L+1;U<P.length;U++){var Y=P[U];B!==Y&&Y.visible&&t(B,Y)&&(Y.visible=!1)}}return P}var l={"hide-overlap":s};try{var f=JSON.parse(a.data);if(!f||!f.type||!l[f.type])return;var d=f.type,m=f.items,x=l[d](m);self.postMessage(x)}catch(A){throw A}},dw=`
   self.onmessage = `.concat(pw.toString(),`
`),Qx=function(a){for(var n=a.slice(),t=0;t<n.length;t++){var s=n[t];if(s.visible)for(var l=t+1;l<n.length;l++){var f=n[l];s!==f&&f.visible&&Q3(s,f)&&(f.visible=!1)}}return n},Jx=new Map,vw=eI(dw);function tI(a,n,t,s){return(0,M.mG)(this,void 0,void 0,function(){var l,f,d,m,x,A;return(0,M.Jh)(this,function(P){switch(P.label){case 0:return l=n.map(function(L,B){return(0,M.pi)((0,M.pi)({},ts(L,a[B],(0,E.U2)(a[B],"background.padding"))),{visible:!0})}),f=JSON.stringify(l),d=function(L){return Jx.set(f,L),(0,E.S6)(L,function(B,U){var Y=B.visible,se=n[U];Y?se==null||se.show():se==null||se.hide()}),L},Jx.get(f)?(d(Jx.get(f)),[3,7]):[3,1];case 1:if(!vw)return[3,6];P.label=2;case 2:return P.trys.push([2,4,,5]),m=JSON.stringify({type:"hide-overlap",items:l}),[4,vw.post(m,function(){return d(Qx(l))})];case 3:return x=P.sent(),d(Array.isArray(x.data)?x.data:[]),[3,5];case 4:return A=P.sent(),console.error(A),d(Qx(l)),[3,5];case 5:return[3,7];case 6:d(Qx(l)),P.label=7;case 7:return[2]}})})}var gw={"#5B8FF9":!0},mw=function(a){var n=ba.toRGB(a).toUpperCase();if(gw[n])return gw[n];var t=(0,M.CR)(ba.rgb2arr(n),3),s=t[0],l=t[1],f=t[2],d=(s*299+l*587+f*114)/1e3<128;return d};function yw(a,n,t){if(t.length!==0){var s=t[0].get("element"),l=s.geometry.theme,f=l.labels||{},d=f.fillColorLight,m=f.fillColorDark;t.forEach(function(x,A){var P=n[A],L=P.find(function(Ee){return Ee.get("type")==="text"}),B=ls.fromObject(x.getBBox()),U=ls.fromObject(L.getCanvasBBox()),Y=!B.contains(U),se=x.attr("fill"),be=mw(se);Y?L.attr(l.overflowLabels.style):be?d&&L.attr("fill",d):m&&L.attr("fill",m)})}}function rI(a,n,t){var s=a.coordinate,l=qa(n),f=ls.fromObject(l.getCanvasBBox()),d=ls.fromObject(t.getBBox());return s.isTransposed?d.height>=f.height:d.width>=f.width}function nI(a,n,t){var s=!!a.getAdjust("stack");return s||n.every(function(l,f){var d=t[f];return rI(a,l,d)})}function iI(a,n,t){var s=a.coordinate,l=ls.fromObject(t.getBBox()),f=qa(n);s.isTransposed?f.attr({x:l.minX+l.width/2,textAlign:"center"}):f.attr({y:l.minY+l.height/2,textBaseline:"middle"})}function aI(a,n,t){var s;if(t.length!==0){var l=(s=t[0])===null||s===void 0?void 0:s.get("element"),f=l==null?void 0:l.geometry;if(!(!f||f.type!=="interval")){var d=nI(f,n,t);d&&t.forEach(function(m,x){var A=n[x];iI(f,A,m)})}}}function oI(a){var n=500,t=[],s=Math.max(Math.floor(a.length/n),1);return(0,E.S6)(a,function(l,f){f%s===0?t.push(l):l.set("visible",!1)}),t}function _w(a,n,t){var s;if(t.length!==0){var l=(s=t[0])===null||s===void 0?void 0:s.get("element"),f=l==null?void 0:l.geometry;if(!(!f||f.type!=="interval")){var d=oI(n),m=(0,M.CR)(f.getXYFields(),1),x=m[0],A=[],P=[],L=(0,E.vM)(d,function(be){return be.get("data")[x]}),B=(0,E.jj)((0,E.UI)(d,function(be){return be.get("data")[x]})),U;d.forEach(function(be){be.set("visible",!0)});var Y=function(be){be&&(be.length&&P.push(be.pop()),P.push.apply(P,(0,M.ev)([],(0,M.CR)(be),!1)))};for((0,E.dp)(B)>0&&(U=B.shift(),Y(L[U])),(0,E.dp)(B)>0&&(U=B.pop(),Y(L[U])),(0,E.S6)(B.reverse(),function(be){Y(L[be])});P.length>0;){var se=P.shift();se.get("visible")&&(mo(se,A)?se.set("visible",!1):A.push(se))}}}}function xw(a,n){var t=a.getXYFields()[1],s=[],l=n.sort(function(f,d){return f.get("data")[t]-f.get("data")[t]});return l.length>0&&s.push(l.shift()),l.length>0&&s.push(l.pop()),s.push.apply(s,(0,M.ev)([],(0,M.CR)(l),!1)),s}function bw(a,n,t){return a.some(function(s){return t(s,n)})}function sI(a,n,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(a.x+a.width+t,n.x+n.width+t)-Math.max(a.x-t,n.x-t)),l=Math.max(0,Math.min(a.y+a.height+t,n.y+n.height+t)-Math.max(a.y-t,n.y-t));return s*l}function Sw(a,n){return bw(a,n,function(t,s){var l=qa(t),f=qa(s);return sI(l.getCanvasBBox(),f.getCanvasBBox(),2)>0})}function uI(a,n,t,s,l){var f,d;if(t.length!==0){var m=(f=t[0])===null||f===void 0?void 0:f.get("element"),x=m==null?void 0:m.geometry;if(!(!x||x.type!=="point")){var A=(0,M.CR)(x.getXYFields(),2),P=A[0],L=A[1],B=(0,E.vM)(n,function(se){return se.get("data")[P]}),U=[],Y=l&&l.offset||((d=a[0])===null||d===void 0?void 0:d.offset)||12;(0,E.UI)((0,E.XP)(B).reverse(),function(se){for(var be=xw(x,B[se]);be.length;){var Ee=be.shift(),it=qa(Ee);if(bw(U,Ee,function(Bt,_r){return Bt.get("data")[P]===_r.get("data")[P]&&Bt.get("data")[L]===_r.get("data")[L]})){it.set("visible",!1);continue}var gt=Sw(U,Ee),xt=!1;if(gt&&(it.attr("y",it.attr("y")+2*Y),xt=Sw(U,Ee)),xt){it.set("visible",!1);continue}U.push(Ee)}})}}}function lI(a,n){var t=a.getXYFields()[1],s=[],l=n.sort(function(f,d){return f.get("data")[t]-f.get("data")[t]});return l.length>0&&s.push(l.shift()),l.length>0&&s.push(l.pop()),s.push.apply(s,(0,M.ev)([],(0,M.CR)(l),!1)),s}function eb(a,n,t){return a.some(function(s){return t(s,n)})}function Ew(a,n,t){t===void 0&&(t=0);var s=Math.max(0,Math.min(a.x+a.width+t,n.x+n.width+t)-Math.max(a.x-t,n.x-t)),l=Math.max(0,Math.min(a.y+a.height+t,n.y+n.height+t)-Math.max(a.y-t,n.y-t));return s*l}function ww(a,n){return eb(a,n,function(t,s){var l=qa(t),f=qa(s);return Ew(l.getCanvasBBox(),f.getCanvasBBox(),2)>0})}function cI(a,n,t,s,l){var f,d;if(t.length!==0){var m=(f=t[0])===null||f===void 0?void 0:f.get("element"),x=m==null?void 0:m.geometry;if(!(!x||["path","line","area"].indexOf(x.type)<0)){var A=(0,M.CR)(x.getXYFields(),2),P=A[0],L=A[1],B=(0,E.vM)(n,function(se){return se.get("data")[P]}),U=[],Y=l&&l.offset||((d=a[0])===null||d===void 0?void 0:d.offset)||12;(0,E.UI)((0,E.XP)(B).reverse(),function(se){for(var be=lI(x,B[se]);be.length;){var Ee=be.shift(),it=qa(Ee);if(eb(U,Ee,function(Bt,_r){return Bt.get("data")[P]===_r.get("data")[P]&&Bt.get("data")[L]===_r.get("data")[L]})){it.set("visible",!1);continue}var gt=ww(U,Ee),xt=!1;if(gt&&(it.attr("y",it.attr("y")+2*Y),xt=ww(U,Ee)),xt){it.set("visible",!1);continue}U.push(Ee)}})}}}var tb;function fI(){return tb||(tb=document.createElement("canvas").getContext("2d")),tb}var F_=(0,E.HP)(function(a,n){n===void 0&&(n={});var t=n.fontSize,s=n.fontFamily,l=n.fontWeight,f=n.fontStyle,d=n.fontVariant,m=fI();return m.font=[f,d,l,"".concat(t,"px"),s].join(" "),m.measureText((0,E.HD)(a)?a:"").width},function(a,n){return n===void 0&&(n={}),(0,M.ev)([a],(0,M.CR)((0,E.VO)(n)),!1).join("")}),Cw=function(a,n,t){var s=16,l=F_("...",t),f;(0,E.HD)(a)?f=a:f=(0,E.BB)(a);var d=n,m=[],x,A;if(F_(a,t)<=n)return a;for(;x=f.substr(0,s),A=F_(x,t),!(A+l>d&&A>d);)if(m.push(x),d-=A,f=f.substr(s),!f)return m.join("");for(;x=f.substr(0,1),A=F_(x,t),!(A+l>d);)if(m.push(x),d-=A,f=f.substr(1),!f)return m.join("");return"".concat(m.join(""),"...")};function Aw(a,n,t,s,l){if(!(n.length<=0)){var f=(l==null?void 0:l.direction)||["top","right","bottom","left"],d=(l==null?void 0:l.action)||"translate",m=(l==null?void 0:l.margin)||0,x=n[0].get("coordinate");if(x){var A=Tv(x,m),P=A.minX,L=A.minY,B=A.maxX,U=A.maxY;(0,E.S6)(n,function(Y){var se=Y.getCanvasBBox(),be=se.minX,Ee=se.minY,it=se.maxX,gt=se.maxY,xt=se.x,Bt=se.y,_r=se.width,Or=se.height,Gr=xt,mn=Bt;if(f.indexOf("left")>=0&&(be<P||it<P)&&(Gr=P),f.indexOf("top")>=0&&(Ee<L||gt<L)&&(mn=L),f.indexOf("right")>=0&&(be>B?Gr=B-_r:it>B&&(Gr=Gr-(it-B))),f.indexOf("bottom")>=0&&(Ee>U?mn=U-Or:gt>U&&(mn=mn-(gt-U))),Gr!==xt||mn!==Bt){var cn=Gr-xt;if(d==="translate")qu(Y,cn,mn-Bt);else if(d==="ellipsis"){var Nn=Y.findAll(function(hi){return hi.get("type")==="text"});Nn.forEach(function(hi){var Wi=(0,E.ei)(hi.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),bi=hi.getCanvasBBox(),to=Cw(hi.attr("text"),bi.width-Math.abs(cn),Wi);hi.attr("text",to)})}else Y.hide()}})}}}function Tw(a,n,t){var s={fillOpacity:(0,E.UM)(a.attr("fillOpacity"))?1:a.attr("fillOpacity"),strokeOpacity:(0,E.UM)(a.attr("strokeOpacity"))?1:a.attr("strokeOpacity"),opacity:(0,E.UM)(a.attr("opacity"))?1:a.attr("opacity")};a.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),a.animate(s,n)}function Mw(a,n,t){var s={fillOpacity:0,strokeOpacity:0,opacity:0},l=n.easing,f=n.duration,d=n.delay;a.animate(s,f,l,function(){a.remove(!0)},d)}function Pm(a,n,t){var s,l=(0,M.CR)(n,2),f=l[0],d=l[1];return a.applyToMatrix([f,d,1]),t==="x"?(a.setMatrix(no.vs(a.getMatrix(),[["t",-f,-d],["s",.01,1],["t",f,d]])),s=no.vs(a.getMatrix(),[["t",-f,-d],["s",100,1],["t",f,d]])):t==="y"?(a.setMatrix(no.vs(a.getMatrix(),[["t",-f,-d],["s",1,.01],["t",f,d]])),s=no.vs(a.getMatrix(),[["t",-f,-d],["s",1,100],["t",f,d]])):t==="xy"&&(a.setMatrix(no.vs(a.getMatrix(),[["t",-f,-d],["s",.01,.01],["t",f,d]])),s=no.vs(a.getMatrix(),[["t",-f,-d],["s",100,100],["t",f,d]])),s}function B_(a,n,t,s,l){var f=t.start,d=t.end,m=t.getWidth(),x=t.getHeight(),A,P;l==="y"?(A=f.x+m/2,P=s.y<f.y?s.y:f.y):l==="x"?(A=s.x>f.x?s.x:f.x,P=f.y+x/2):l==="xy"&&(t.isPolar?(A=t.getCenter().x,P=t.getCenter().y):(A=(f.x+d.x)/2,P=(f.y+d.y)/2));var L=Pm(a,[A,P],l);a.animate({matrix:L},n)}function hI(a,n,t){var s=t.coordinate,l=t.minYPoint;B_(a,n,s,l,"x")}function Rw(a,n,t){var s=t.coordinate,l=t.minYPoint;B_(a,n,s,l,"y")}function Iw(a,n,t){var s=t.coordinate,l=t.minYPoint;B_(a,n,s,l,"xy")}function pI(a,n,t){var s=a.getTotalLength();a.attr("lineDash",[s]),a.animate(function(l){return{lineDashOffset:(1-l)*s}},n)}function dI(a,n,t){var s=t.toAttrs,l=s.x,f=s.y;delete s.x,delete s.y,a.attr(s),a.animate({x:l,y:f},n)}function vI(a,n,t){var s=a.getBBox(),l=a.get("origin").mappingData,f=l.points,d=f[0].y-f[1].y>0?s.maxX:s.minX,m=(s.minY+s.maxY)/2;a.applyToMatrix([d,m,1]);var x=no.vs(a.getMatrix(),[["t",-d,-m],["s",.01,1],["t",d,m]]);a.setMatrix(x),a.animate({matrix:no.vs(a.getMatrix(),[["t",-d,-m],["s",100,1],["t",d,m]])},n)}function Pw(a,n,t){var s=a.getBBox(),l=a.get("origin").mappingData,f=(s.minX+s.maxX)/2,d=l.points,m=d[0].y-d[1].y<=0?s.maxY:s.minY;a.applyToMatrix([f,m,1]);var x=no.vs(a.getMatrix(),[["t",-f,-m],["s",1,.01],["t",f,m]]);a.setMatrix(x),a.animate({matrix:no.vs(a.getMatrix(),[["t",-f,-m],["s",1,100],["t",f,m]])},n)}function rb(a,n){var t,s=fd(a,n),l=s.startAngle,f=s.endAngle;return!(0,E.vQ)(l,-Math.PI*.5)&&l<-Math.PI*.5&&(l+=Math.PI*2),!(0,E.vQ)(f,-Math.PI*.5)&&f<-Math.PI*.5&&(f+=Math.PI*2),n[5]===0&&(t=(0,M.CR)([f,l],2),l=t[0],f=t[1]),(0,E.vQ)(l,Math.PI*1.5)&&(l=Math.PI*-.5),(0,E.vQ)(f,Math.PI*-.5)&&!(0,E.vQ)(l,f)&&(f=Math.PI*1.5),{startAngle:l,endAngle:f}}function nb(a){var n;return a[0]==="M"||a[0]==="L"?n=[a[1],a[2]]:(a[0]==="a"||a[0]==="A"||a[0]==="C")&&(n=[a[a.length-2],a[a.length-1]]),n}function N_(a){var n,t,s,l=a.filter(function(gt){return gt[0]==="A"||gt[0]==="a"});if(l.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var f=l[0],d=l.length>1?l[1]:l[0],m=a.indexOf(f),x=a.indexOf(d),A=nb(a[m-1]),P=nb(a[x-1]),L=rb(A,f),B=L.startAngle,U=L.endAngle,Y=rb(P,d),se=Y.startAngle,be=Y.endAngle;(0,E.vQ)(B,se)&&(0,E.vQ)(U,be)?(t=B,s=U):(t=Math.min(B,se),s=Math.max(U,be));var Ee=f[1],it=l[l.length-1][1];return Ee<it?(n=(0,M.CR)([it,Ee],2),Ee=n[0],it=n[1]):Ee===it&&(it=0),{startAngle:t,endAngle:s,radius:Ee,innerRadius:it}}function Ow(a,n,t){var s=t.toAttrs,l=t.coordinate,f=s.path||[],d=f.map(function(it){return it[0]});if(!(f.length<1)){var m=N_(f),x=m.startAngle,A=m.endAngle,P=m.radius,L=m.innerRadius,B=N_(a.attr("path")),U=B.startAngle,Y=B.endAngle,se=l.getCenter(),be=x-U,Ee=A-Y;if(be===0&&Ee===0){a.attr("path",f);return}a.animate(function(it){var gt=U+it*be,xt=Y+it*Ee;return(0,M.pi)((0,M.pi)({},s),{path:(0,E.Xy)(d,["M","A","A","Z"])?nf(se.x,se.y,P,gt,xt):Zf(se.x,se.y,P,gt,xt,L)})},(0,M.pi)((0,M.pi)({},n),{callback:function(){a.attr("path",f),(0,E.mf)(n.callback)&&n.callback()}}))}}function gI(a,n,t){var s=Av(t.coordinate,20),l=s.type,f=s.startState,d=s.endState,m=a.setClip({type:l,attrs:f});t.toAttrs&&a.attr(t.toAttrs),m.animate(d,(0,M.pi)((0,M.pi)({},n),{callback:function(){a&&!a.get("destroyed")&&a.set("clipShape",null),m.remove(!0),(0,E.mf)(n.callback)&&n.callback()}}))}function ib(a,n,t){if(a.isGroup())(0,E.S6)(a.getChildren(),function(m){ib(m,n,t)});else{var s=a.getBBox(),l=(s.minX+s.maxX)/2,f=(s.minY+s.maxY)/2;if(a.applyToMatrix([l,f,1]),t==="zoomIn"){var d=no.vs(a.getMatrix(),[["t",-l,-f],["s",.01,.01],["t",l,f]]);a.setMatrix(d),a.animate({matrix:no.vs(a.getMatrix(),[["t",-l,-f],["s",100,100],["t",l,f]])},n)}else a.animate({matrix:no.vs(a.getMatrix(),[["t",-l,-f],["s",.01,.01],["t",l,f]])},(0,M.pi)((0,M.pi)({},n),{callback:function(){a.remove(!0),(0,E.mf)(n.callback)&&n.callback()}}))}}function mI(a,n,t){ib(a,n,"zoomIn")}function kw(a,n,t){ib(a,n,"zoomOut")}function nv(a){return[Se.TOP,Se.BOTTOM].includes(a)?{offsetX:0,offsetY:a===Se.TOP?-8:8,style:{textAlign:"center",textBaseline:a===Se.TOP?"bottom":"top"}}:[Se.LEFT,Se.RIGHT].includes(a)?{offsetX:a===Se.LEFT?-8:8,offsetY:0,style:{textAlign:a===Se.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function z_(a,n,t){return{x:a.x+n*Math.cos(t),y:a.y+n*Math.sin(t)}}var yI=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},a.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:a.prototype.getDefaultTitleCfg.call(this)})},n.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.getRegion=function(t,s){var l=.5,f={x:.5,y:.5},d=Math.PI*2/t,m=-1*Math.PI/2+d*s,x=l/(1+1/Math.sin(d/2)),A=z_(f,l-x,m),P=Math.PI*5/4,L=Math.PI*1/4;return{start:z_(A,x,P),end:z_(A,x,L)}},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.generateFacets=function(t){var s=this,l=this.cfg,f=l.fields,d=l.type,m=(0,M.CR)(f,1),x=m[0];if(!x)throw new Error("No `fields` specified!");var A=this.getFieldValues(t,x),P=A.length,L=[];return A.forEach(function(B,U){var Y=[{field:x,value:B,values:A}],se=(0,E.hX)(t,s.getFacetDataFilter(Y)),be={type:d,data:se,region:s.getRegion(P,U),columnValue:B,columnField:x,columnIndex:U,columnValuesLength:P,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};L.push(be)}),L},n.prototype.getXAxisOption=function(t,s,l,f){return l},n.prototype.getYAxisOption=function(t,s,l,f){return l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,E.U2)(t.cfg.title,"formatter"),m=(0,E.b$)({position:["50%","0%"],content:d?d(l):l},nv(Se.TOP),t.cfg.title);f.annotation().text(m)})},n}(Hn),_I=yI,ny=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},a.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:a.prototype.getDefaultTitleCfg.call(this)})},n.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.generateFacets=function(t){var s=this,l=this.cfg.fields,f=this.cfg.cols,d=(0,M.CR)(l,1),m=d[0];if(!m)throw new Error("No `fields` specified!");var x=this.getFieldValues(t,m),A=x.length;f=f||A;var P=this.getPageCount(A,f),L=[];return x.forEach(function(B,U){var Y=s.getRowCol(U,f),se=Y.row,be=Y.col,Ee=[{field:m,value:B,values:x}],it=(0,E.hX)(t,s.getFacetDataFilter(Ee)),gt={type:s.cfg.type,data:it,region:s.getRegion(P,f,be,se),columnValue:B,rowValue:B,columnField:m,rowField:null,columnIndex:be,rowIndex:se,columnValuesLength:f,rowValuesLength:P,total:A};L.push(gt)}),L},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1&&f.columnValuesLength*f.rowIndex+f.columnIndex+1+f.columnValuesLength<=f.total?(0,M.pi)((0,M.pi)({},l),{label:null,title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,E.U2)(t.cfg.title,"formatter"),m=(0,E.b$)({position:["50%","0%"],content:d?d(l):l},nv(Se.TOP),t.cfg.title);f.annotation().text(m)})},n.prototype.getPageCount=function(t,s){return Math.floor((t+s-1)/s)},n.prototype.getRowCol=function(t,s){var l=Math.floor(t/s),f=t%s;return{row:l,col:f}},n}(Hn),Lw=ny,ab=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},a.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,M.pi)({},a.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,M.pi)({},a.prototype.getDefaultTitleCfg.call(this))})},n.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.generateFacets=function(t){for(var s=this.cfg,l=s.fields,f=s.type,d=l.length,m=d,x=[],A=0;A<m;A++)for(var P=l[A],L=0;L<d;L++){var B=l[L],U={type:f,data:t,region:this.getRegion(d,m,A,L),columnValue:P,rowValue:B,columnField:P,rowField:B,columnIndex:A,rowIndex:L,columnValuesLength:m,rowValuesLength:d};x.push(U)}return x},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,M.pi)((0,M.pi)({},l),{label:null,title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s,l){var f=s.columnIndex,d=s.rowIndex,m=s.columnValuesLength,x=s.rowValuesLength,A=s.columnValue,P=s.rowValue,L=s.view;if(d===0){var B=(0,E.U2)(t.cfg.columnTitle,"formatter"),U=(0,E.b$)({position:["50%","0%"],content:B?B(A):A},nv(Se.TOP),t.cfg.columnTitle);L.annotation().text(U)}if(f===m-1){var B=(0,E.U2)(t.cfg.rowTitle,"formatter"),U=(0,E.b$)({position:["100%","50%"],content:B?B(P):P},nv(Se.RIGHT),t.cfg.rowTitle);L.annotation().text(U)}})},n}(Hn),AB=ab,Xf=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){return(0,E.b$)({},a.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:a.prototype.getDefaultTitleCfg.call(this),transpose:!1})},n.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.beforeEachView=function(t,s){this.cfg.transpose?s.columnIndex%2===0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():s.rowIndex%2!==0&&t.coordinate().reflect("y")},n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.generateFacets=function(t){var s=this,l=(0,M.CR)(this.cfg.fields,1),f=l[0],d=[],m=1,x=1,A=[""],P=[""],L,B;return this.cfg.transpose?(L=f,A=this.getFieldValues(t,L).slice(0,2),m=A.length):(B=f,P=this.getFieldValues(t,B).slice(0,2),x=P.length),A.forEach(function(U,Y){P.forEach(function(se,be){var Ee=[{field:L,value:U,values:A},{field:B,value:se,values:P}],it=(0,E.hX)(t,s.getFacetDataFilter(Ee)),gt={type:s.cfg.type,data:it,region:s.getRegion(x,m,Y,be),columnValue:U,rowValue:se,columnField:L,rowField:B,columnIndex:Y,rowIndex:be,columnValuesLength:m,rowValuesLength:x};d.push(gt)})}),d},n.prototype.getXAxisOption=function(t,s,l,f){return f.columnIndex===1||f.rowIndex===1?(0,M.pi)((0,M.pi)({},l),{label:null,title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return l},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s,l){var f=s.columnValue,d=s.rowValue,m=s.view,x=(0,E.U2)(t.cfg.title,"formatter");if(t.cfg.transpose){var A=(0,E.b$)({position:["50%","0%"],content:x?x(f):f},nv(Se.TOP),t.cfg.title);m.annotation().text(A)}else{var A=(0,E.b$)({position:["100%","50%"],content:x?x(d):d},nv(Se.RIGHT),t.cfg.title);m.annotation().text(A)}})},n}(Hn),xI=Xf,bI=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.getDefaultCfg=function(){return(0,E.b$)({},a.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,M.pi)({},a.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,M.pi)({},a.prototype.getDefaultTitleCfg.call(this))})},n.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.generateFacets=function(t){var s=this,l=(0,M.CR)(this.cfg.fields,2),f=l[0],d=l[1],m=[],x=1,A=1,P=[""],L=[""];return f&&(P=this.getFieldValues(t,f),x=P.length),d&&(L=this.getFieldValues(t,d),A=L.length),P.forEach(function(B,U){L.forEach(function(Y,se){var be=[{field:f,value:B,values:P},{field:d,value:Y,values:L}],Ee=(0,E.hX)(t,s.getFacetDataFilter(be)),it={type:s.cfg.type,data:Ee,region:s.getRegion(A,x,U,se),columnValue:B,rowValue:Y,columnField:f,rowField:d,columnIndex:U,rowIndex:se,columnValuesLength:x,rowValuesLength:A};m.push(it)})}),m},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s,l){var f=s.columnIndex,d=s.rowIndex,m=s.columnValuesLength,x=s.columnValue,A=s.rowValue,P=s.view;if(d===0){var L=(0,E.U2)(t.cfg.columnTitle,"formatter"),B=(0,E.b$)({position:["50%","0%"],content:L?L(x):x},nv(Se.TOP),t.cfg.columnTitle);P.annotation().text(B)}if(f===m-1){var L=(0,E.U2)(t.cfg.rowTitle,"formatter"),B=(0,E.b$)({position:["100%","50%"],content:L?L(A):A},nv(Se.RIGHT),t.cfg.rowTitle);P.annotation().text(B)}})},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):f.columnIndex!==Math.floor((f.columnValuesLength-1)/2)?(0,M.pi)((0,M.pi)({},l),{title:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):f.rowIndex!==Math.floor((f.rowValuesLength-1)/2)?(0,M.pi)((0,M.pi)({},l),{title:null}):l},n}(Hn),iy=bI,SI=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return n.prototype.afterEachView=function(t,s){this.processAxis(t,s)},n.prototype.beforeEachView=function(t,s){},n.prototype.init=function(){a.prototype.init.call(this),this.view.on(Ue.AFTER_RENDER,this.afterChartRender)},n.prototype.getDefaultCfg=function(){return(0,E.b$)({},a.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:a.prototype.getDefaultTitleCfg.call(this)})},n.prototype.generateFacets=function(t){var s=this.cfg.fields;if(!s.length)throw new Error("Please specify for the fields for rootFacet!");var l=[],f={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return l.push(f),f.children=this.getChildFacets(t,1,l),this.setRegion(l),l},n.prototype.setRegion=function(t){var s=this;this.forceColIndex(t),t.forEach(function(l){l.region=s.getRegion(l.rowValuesLength,l.columnValuesLength,l.columnIndex,l.rowIndex)})},n.prototype.getRegion=function(t,s,l,f){var d=1/s,m=1/t,x={x:d*l,y:m*f},A={x:x.x+d,y:x.y+m*2/3};return{start:x,end:A}},n.prototype.forceColIndex=function(t){var s,l,f=this,d=[],m=0;t.forEach(function(Y){f.isLeaf(Y)&&(d.push(Y),Y.columnIndex=m,m++)}),d.forEach(function(Y){Y.columnValuesLength=d.length});for(var x=this.cfg.fields.length,A=x-1;A>=0;A--){var P=this.getFacetsByLevel(t,A);try{for(var L=(s=void 0,(0,M.XA)(P)),B=L.next();!B.done;B=L.next()){var U=B.value;this.isLeaf(U)||(U.originColIndex=U.columnIndex,U.columnIndex=this.getRegionIndex(U.children),U.columnValuesLength=d.length)}}catch(Y){s={error:Y}}finally{try{B&&!B.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}}},n.prototype.getFacetsByLevel=function(t,s){var l=[];return t.forEach(function(f){f.rowIndex===s&&l.push(f)}),l},n.prototype.getRegionIndex=function(t){var s=t[0],l=t[t.length-1];return(l.columnIndex-s.columnIndex)/2+s.columnIndex},n.prototype.isLeaf=function(t){return!t.children||!t.children.length},n.prototype.getRows=function(){return this.cfg.fields.length+1},n.prototype.getChildFacets=function(t,s,l){var f=this,d=this.cfg.fields,m=d.length;if(!(m<s)){var x=[],A=d[s-1],P=this.getFieldValues(t,A);return P.forEach(function(L,B){var U=[{field:A,value:L,values:P}],Y=t.filter(f.getFacetDataFilter(U));if(Y.length){var se={type:f.cfg.type,data:Y,region:null,columnValue:L,rowValue:"",columnField:A,rowField:"",columnIndex:B,rowValuesLength:f.getRows(),columnValuesLength:1,rowIndex:s,children:f.getChildFacets(Y,s+1,l)};x.push(se),l.push(se)}}),x}},n.prototype.render=function(){a.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},n.prototype.renderTitle=function(){var t=this;(0,E.S6)(this.facets,function(s){var l=s.columnValue,f=s.view,d=(0,E.U2)(t.cfg.title,"formatter"),m=(0,E.b$)({position:["50%","0%"],content:d?d(l):l},nv(Se.TOP),t.cfg.title);f.annotation().text(m)})},n.prototype.drawLines=function(t){var s=this;t.forEach(function(l){if(!s.isLeaf(l)){var f=l.children;s.addFacetLines(l,f)}})},n.prototype.addFacetLines=function(t,s){var l=this,f=t.view,d=f.coordinateBBox,m={x:d.x+d.width/2,y:d.y+d.height};s.forEach(function(x){var A=x.view.coordinateBBox,P={x:A.bl.x+(A.tr.x-A.bl.x)/2,y:A.tr.y},L={x:m.x,y:m.y+(P.y-m.y)/2},B={x:P.x,y:L.y};l.drawLine([m,L,B,P])})},n.prototype.getPath=function(t){var s=[],l=this.cfg.line.smooth;return l?(s.push(["M",t[0].x,t[0].y]),s.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(f,d){d===0?s.push(["M",f.x,f.y]):s.push(["L",f.x,f.y])}),s},n.prototype.drawLine=function(t){var s=this.getPath(t),l=this.cfg.line.style;this.container.addShape("path",{attrs:(0,E.f0)({path:s},l)})},n.prototype.getXAxisOption=function(t,s,l,f){return f.rowIndex!==f.rowValuesLength-1?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n.prototype.getYAxisOption=function(t,s,l,f){return f.originColIndex!==0&&f.columnIndex!==0?(0,M.pi)((0,M.pi)({},l),{title:null,label:null}):l},n}(Hn),TB=SI;function ob(a){var n=(0,M.ev)([],(0,M.CR)(a),!1);n.sort(function(s,l){return s-l});var t=n.length;return t===0?0:t%2===1?n[(t-1)/2]:(n[t/2]+n[t/2-1])/2}function EI(a){var n=(0,E.u4)(a,function(t,s){return t+=isNaN(s)||!(0,E.hj)(s)?0:s},0);return a.length===0?0:n/a.length}function sb(a,n){if(!n)return null;var t;switch(a){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{t=n.isCategory?ob(n.values.map(function(s,l){return l})):ob(n.values);break}case"mean":{t=n.isCategory?(n.values.length-1)/2:EI(n.values);break}case"min":t=n.isCategory?0:n[a];break;case"max":t=n.isCategory?n.values.length-1:n[a];break;default:t=a;break}return n.scale(t)}var U_=["regionFilter","shape"],MB=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.cache=new Map,s.foregroundContainer=s.view.getLayer(ge.FORE).addGroup(),s.backgroundContainer=s.view.getLayer(ge.BG).addGroup(),s.option=[],s}return Object.defineProperty(n.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.layout=function(){this.update()},n.prototype.render=function(){},n.prototype.update=function(){var t=this;this.onAfterRender(function(){var l=new Map;(0,E.S6)(t.option,function(f){if((0,E.q9)(U_,f.type)){var d=t.updateOrCreate(f);d&&l.set(t.getCacheKey(f),d)}}),t.cache=t.syncCache(l)});var s=new Map;(0,E.S6)(this.option,function(l){if(!(0,E.q9)(U_,l.type)){var f=t.updateOrCreate(l);f&&s.set(t.getCacheKey(l),f)}}),this.cache=this.syncCache(s)},n.prototype.clear=function(t){t===void 0&&(t=!1),a.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},n.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},n.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(s){t.push(s)}),t},n.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},n.prototype.onAfterRender=function(t){var s=!1;this.view.getOptions().animate&&this.view.geometries.forEach(function(l){l.animateOption&&(l.once(at.AFTER_DRAW_ANIMATE,function(){t()}),s=!0)}),s||this.view.getRootView().once(Ue.AFTER_RENDER,function(){t()})},n.prototype.createAnnotation=function(t){var s=t.type,l=K[(0,E.jC)(s)];if(l){var f=this.getAnnotationTheme(s),d=this.getAnnotationCfg(s,t,f);if(!d)return null;var m=new l(d);return{component:m,layer:this.isTop(d)?ge.FORE:ge.BG,direction:Se.NONE,type:ze.ANNOTATION,extra:t}}},n.prototype.annotation=function(t){this.option.push(t)},n.prototype.arc=function(t){return this.annotation((0,M.pi)({type:"arc"},t)),this},n.prototype.image=function(t){return this.annotation((0,M.pi)({type:"image"},t)),this},n.prototype.line=function(t){return this.annotation((0,M.pi)({type:"line"},t)),this},n.prototype.region=function(t){return this.annotation((0,M.pi)({type:"region"},t)),this},n.prototype.text=function(t){return this.annotation((0,M.pi)({type:"text"},t)),this},n.prototype.dataMarker=function(t){return this.annotation((0,M.pi)({type:"dataMarker"},t)),this},n.prototype.dataRegion=function(t){this.annotation((0,M.pi)({type:"dataRegion"},t))},n.prototype.regionFilter=function(t){this.annotation((0,M.pi)({type:"regionFilter"},t))},n.prototype.shape=function(t){this.annotation((0,M.pi)({type:"shape"},t))},n.prototype.html=function(t){this.annotation((0,M.pi)({type:"html"},t))},n.prototype.parsePosition=function(t){var s,l,f=this.view.getXScale(),d=this.view.getScalesByDim("y"),m=(0,E.mf)(t)?t.call(null,f,d):t,x=0,A=0;if((0,E.kJ)(m)){var P=(0,M.CR)(m,2),L=P[0],B=P[1];if((0,E.HD)(L)&&L.indexOf("%")!==-1&&!isNaN(L.slice(0,-1)))return this.parsePercentPosition(m);x=sb(L,f),A=sb(B,Object.values(d)[0])}else if(!(0,E.UM)(m))try{for(var U=(0,M.XA)((0,E.XP)(m)),Y=U.next();!Y.done;Y=U.next()){var se=Y.value,be=m[se];se===f.field&&(x=sb(be,f)),d[se]&&(A=sb(be,d[se]))}}catch(Ee){s={error:Ee}}finally{try{Y&&!Y.done&&(l=U.return)&&l.call(U)}finally{if(s)throw s.error}}return isNaN(x)||isNaN(A)?null:this.view.getCoordinate().convert({x,y:A})},n.prototype.getRegionPoints=function(t,s){var l=this,f=this.view.getXScale(),d=this.view.getScalesByDim("y"),m=Object.values(d)[0],x=f.field,A=this.view.getData(),P=(0,E.kJ)(t)?t[0]:t[x],L=(0,E.kJ)(s)?s[0]:s[x],B=[],U;return(0,E.S6)(A,function(Y,se){if(Y[x]===P&&(U=se),se>=U){var be=l.parsePosition([Y[x],Y[m.field]]);be&&B.push(be)}if(Y[x]===L)return!1}),B},n.prototype.parsePercentPosition=function(t){var s=parseFloat(t[0])/100,l=parseFloat(t[1])/100,f=this.view.getCoordinate(),d=f.start,m=f.end,x={x:Math.min(d.x,m.x),y:Math.min(d.y,m.y)},A=f.getWidth()*s+x.x,P=f.getHeight()*l+x.y;return{x:A,y:P}},n.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),s=t.start,l=t.end,f=t.getWidth(),d=t.getHeight(),m={x:Math.min(s.x,l.x),y:Math.min(s.y,l.y)};return{x:m.x,y:m.y,minX:m.x,minY:m.y,maxX:m.x+f,maxY:m.y+d,width:f,height:d}},n.prototype.getAnnotationCfg=function(t,s,l){var f=this,d=this.view.getCoordinate(),m=this.view.getCanvas(),x={};if((0,E.UM)(s))return null;var A=s.start,P=s.end,L=s.position,B=this.parsePosition(A),U=this.parsePosition(P),Y=this.parsePosition(L);if(["arc","image","line","region","regionFilter"].includes(t)&&(!B||!U))return null;if(["text","dataMarker","html"].includes(t)&&!Y)return null;if(t==="arc"){var se=s,be=se.start,Ee=se.end,it=(0,M._T)(se,["start","end"]),gt=Wd(d,B),xt=Wd(d,U);gt>xt&&(xt=Math.PI*2+xt),x=(0,M.pi)((0,M.pi)({},it),{center:d.getCenter(),radius:$h(d,B),startAngle:gt,endAngle:xt})}else if(t==="image"){var Bt=s,_r=Bt.start,Or=Bt.end,it=(0,M._T)(Bt,["start","end"]);x=(0,M.pi)((0,M.pi)({},it),{start:B,end:U,src:s.src})}else if(t==="line"){var Gr=s,mn=Gr.start,cn=Gr.end,it=(0,M._T)(Gr,["start","end"]);x=(0,M.pi)((0,M.pi)({},it),{start:B,end:U,text:(0,E.U2)(s,"text",null)})}else if(t==="region"){var Nn=s,hi=Nn.start,Wi=Nn.end,it=(0,M._T)(Nn,["start","end"]);x=(0,M.pi)((0,M.pi)({},it),{start:B,end:U})}else if(t==="text"){var bi=this.view.getData(),to=s,jn=to.position,Ci=to.content,it=(0,M._T)(to,["position","content"]),aa=Ci;(0,E.mf)(Ci)&&(aa=Ci(bi)),x=(0,M.pi)((0,M.pi)((0,M.pi)({},Y),it),{content:aa})}else if(t==="dataMarker"){var Ni=s,$i=Ni.position,Ma=Ni.point,Va=Ni.line,za=Ni.text,$a=Ni.autoAdjust,Mo=Ni.direction,it=(0,M._T)(Ni,["position","point","line","text","autoAdjust","direction"]);x=(0,M.pi)((0,M.pi)((0,M.pi)({},it),Y),{coordinateBBox:this.getCoordinateBBox(),point:Ma,line:Va,text:za,autoAdjust:$a,direction:Mo})}else if(t==="dataRegion"){var qo=s,cl=qo.start,El=qo.end,Mh=qo.region,za=qo.text,Md=qo.lineLength,it=(0,M._T)(qo,["start","end","region","text","lineLength"]);x=(0,M.pi)((0,M.pi)({},it),{points:this.getRegionPoints(cl,El),region:Mh,text:za,lineLength:Md})}else if(t==="regionFilter"){var Rd=s,a0=Rd.start,o0=Rd.end,QM=Rd.apply,vv=Rd.color,it=(0,M._T)(Rd,["start","end","apply","color"]),_5=this.view.geometries,JM=[],s0=function(Id){Id&&(Id.isGroup()?Id.getChildren().forEach(function($y){return s0($y)}):JM.push(Id))};(0,E.S6)(_5,function(Id){QM?(0,E.FX)(QM,Id.type)&&(0,E.S6)(Id.elements,function($y){s0($y.shape)}):(0,E.S6)(Id.elements,function($y){s0($y.shape)})}),x=(0,M.pi)((0,M.pi)({},it),{color:vv,shapes:JM,start:B,end:U})}else if(t==="shape"){var eR=s,x5=eR.render,wE=(0,M._T)(eR,["render"]),b5=function(E5){if((0,E.mf)(s.render))return x5(E5,f.view,{parsePosition:f.parsePosition.bind(f)})};x=(0,M.pi)((0,M.pi)({},wE),{render:b5})}else if(t==="html"){var CE=s,AE=CE.html,Q4=CE.position,wE=(0,M._T)(CE,["html","position"]),S5=function(Id){return(0,E.mf)(AE)?AE(Id,f.view):AE};x=(0,M.pi)((0,M.pi)((0,M.pi)({},wE),Y),{parent:m.get("el").parentNode,html:S5})}var Qv=(0,E.b$)({},l,(0,M.pi)((0,M.pi)({},x),{top:s.top,style:s.style,offsetX:s.offsetX,offsetY:s.offsetY}));return t!=="html"&&(Qv.container=this.getComponentContainer(Qv)),Qv.animate=this.view.getOptions().animate&&Qv.animate&&(0,E.U2)(s,"animate",Qv.animate),Qv.animateOption=(0,E.b$)({},fr,Qv.animateOption,s.animateOption),Qv},n.prototype.isTop=function(t){return(0,E.U2)(t,"top",!0)},n.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},n.prototype.getAnnotationTheme=function(t){return(0,E.U2)(this.view.getTheme(),["components","annotation",t],{})},n.prototype.updateOrCreate=function(t){var s=this.cache.get(this.getCacheKey(t));if(s){var l=t.type,f=this.getAnnotationTheme(l),d=this.getAnnotationCfg(l,t,f);d&&Xl(d,["container"]),s.component.update((0,M.pi)((0,M.pi)({},d||{}),{visible:!!d})),(0,E.q9)(U_,t.type)&&s.component.render()}else s=this.createAnnotation(t),s&&(s.component.init(),(0,E.q9)(U_,t.type)&&s.component.render());return s},n.prototype.syncCache=function(t){var s=this,l=new Map(this.cache);return t.forEach(function(f,d){l.set(d,f)}),l.forEach(function(f,d){(0,E.sE)(s.option,function(m){return d===s.getCacheKey(m)})||(f.component.destroy(),l.delete(d))}),l},n.prototype.getCacheKey=function(t){return t},n}(Pe),wI=MB;function Dw(a,n){var t=(0,E.b$)({},(0,E.U2)(a,["components","axis","common"]),(0,E.U2)(a,["components","axis",n]));return(0,E.U2)(t,["grid"],{})}function ub(a,n,t,s){var l=[],f=n.getTicks();return a.isPolar&&f.push({value:1,text:"",tickValue:""}),f.reduce(function(d,m,x){var A=m.value;if(s)l.push({points:[a.convert(t==="y"?{x:0,y:A}:{x:A,y:0}),a.convert(t==="y"?{x:1,y:A}:{x:A,y:1})]});else if(x){var P=d.value,L=(P+A)/2;l.push({points:[a.convert(t==="y"?{x:0,y:L}:{x:L,y:0}),a.convert(t==="y"?{x:1,y:L}:{x:L,y:1})]})}return m},f[0]),l}function Fw(a,n,t,s,l){var f=n.values.length,d=[],m=t.getTicks();return m.reduce(function(x,A){var P=x?x.value:A.value,L=A.value,B=(P+L)/2;return l==="x"?d.push({points:[a.convert({x:s?L:B,y:0}),a.convert({x:s?L:B,y:1})]}):d.push({points:(0,E.UI)(Array(f+1),function(U,Y){return a.convert({x:Y/f,y:s?L:B})})}),A},m[0]),d}function CI(a,n){var t=(0,E.U2)(n,"grid");if(t===null)return!1;var s=(0,E.U2)(a,"grid");return!(t===void 0&&s===null)}var Uv=["container"],lb=(0,M.pi)((0,M.pi)({},fr),{appear:null}),RB=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.cache=new Map,s.gridContainer=s.view.getLayer(ge.BG).addGroup(),s.gridForeContainer=s.view.getLayer(ge.FORE).addGroup(),s.axisContainer=s.view.getLayer(ge.BG).addGroup(),s.axisForeContainer=s.view.getLayer(ge.FORE).addGroup(),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.render=function(){this.update()},n.prototype.layout=function(){var t=this,s=this.view.getCoordinate();(0,E.S6)(this.getComponents(),function(l){var f=l.component,d=l.direction,m=l.type,x=l.extra,A=x.dim,P=x.scale,L=x.alignTick,B;if(m===ze.AXIS)s.isPolar?A==="x"?B=s.isTransposed?Pp(s,d):kn(s):A==="y"&&(B=s.isTransposed?kn(s):Pp(s,d)):B=Pp(s,d);else if(m===ze.GRID)if(s.isPolar){var U=void 0;s.isTransposed?U=A==="x"?Fw(s,t.view.getYScales()[0],P,L,A):ub(s,P,A,L):U=A==="x"?ub(s,P,A,L):Fw(s,t.view.getXScale(),P,L,A),B={items:U,center:t.view.getCoordinate().getCenter()}}else B={items:ub(s,P,A,L)};f.update(B)})},n.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var s=new Map;this.cache.forEach(function(l,f){t.has(f)?s.set(f,l):l.component.destroy()}),this.cache=s},n.prototype.clear=function(){a.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},n.prototype.destroy=function(){a.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},n.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(s){t.push(s)}),t},n.prototype.updateXAxes=function(t){var s=this.view.getXScale();if(!(!s||s.isIdentity)){var l=vn(this.option,s.field);if(l!==!1){var f=en(l,Se.BOTTOM),d=ge.BG,m="x",x=this.view.getCoordinate(),A=this.getId("axis",s.field),P=this.getId("grid",s.field);if(x.isRect){var L=this.cache.get(A);if(L){var B=this.getLineAxisCfg(s,l,f);Xl(B,Uv),L.component.update(B),t.set(A,L)}else L=this.createLineAxis(s,l,d,f,m),this.cache.set(A,L),t.set(A,L);var U=this.cache.get(P);if(U){var B=this.getLineGridCfg(s,l,f,m);Xl(B,Uv),U.component.update(B),t.set(P,U)}else U=this.createLineGrid(s,l,d,f,m),U&&(this.cache.set(P,U),t.set(P,U))}else if(x.isPolar){var L=this.cache.get(A);if(L){var B=x.isTransposed?this.getLineAxisCfg(s,l,Se.RADIUS):this.getCircleAxisCfg(s,l,f);Xl(B,Uv),L.component.update(B),t.set(A,L)}else{if(x.isTransposed){if((0,E.o8)(l))return;L=this.createLineAxis(s,l,d,Se.RADIUS,m)}else L=this.createCircleAxis(s,l,d,f,m);this.cache.set(A,L),t.set(A,L)}var U=this.cache.get(P);if(U){var B=x.isTransposed?this.getCircleGridCfg(s,l,Se.RADIUS,m):this.getLineGridCfg(s,l,Se.CIRCLE,m);Xl(B,Uv),U.component.update(B),t.set(P,U)}else{if(x.isTransposed){if((0,E.o8)(l))return;U=this.createCircleGrid(s,l,d,Se.RADIUS,m)}else U=this.createLineGrid(s,l,d,Se.CIRCLE,m);U&&(this.cache.set(P,U),t.set(P,U))}}}}},n.prototype.updateYAxes=function(t){var s=this,l=this.view.getYScales();(0,E.S6)(l,function(f,d){if(!(!f||f.isIdentity)){var m=f.field,x=vn(s.option,m);if(x!==!1){var A=ge.BG,P="y",L=s.getId("axis",m),B=s.getId("grid",m),U=s.view.getCoordinate();if(U.isRect){var Y=en(x,d===0?Se.LEFT:Se.RIGHT),se=s.cache.get(L);if(se){var be=s.getLineAxisCfg(f,x,Y);Xl(be,Uv),se.component.update(be),t.set(L,se)}else se=s.createLineAxis(f,x,A,Y,P),s.cache.set(L,se),t.set(L,se);var Ee=s.cache.get(B);if(Ee){var be=s.getLineGridCfg(f,x,Y,P);Xl(be,Uv),Ee.component.update(be),t.set(B,Ee)}else Ee=s.createLineGrid(f,x,A,Y,P),Ee&&(s.cache.set(B,Ee),t.set(B,Ee))}else if(U.isPolar){var se=s.cache.get(L);if(se){var be=U.isTransposed?s.getCircleAxisCfg(f,x,Se.CIRCLE):s.getLineAxisCfg(f,x,Se.RADIUS);Xl(be,Uv),se.component.update(be),t.set(L,se)}else{if(U.isTransposed){if((0,E.o8)(x))return;se=s.createCircleAxis(f,x,A,Se.CIRCLE,P)}else se=s.createLineAxis(f,x,A,Se.RADIUS,P);s.cache.set(L,se),t.set(L,se)}var Ee=s.cache.get(B);if(Ee){var be=U.isTransposed?s.getLineGridCfg(f,x,Se.CIRCLE,P):s.getCircleGridCfg(f,x,Se.RADIUS,P);Xl(be,Uv),Ee.component.update(be),t.set(B,Ee)}else{if(U.isTransposed){if((0,E.o8)(x))return;Ee=s.createLineGrid(f,x,A,Se.CIRCLE,P)}else Ee=s.createCircleGrid(f,x,A,Se.RADIUS,P);Ee&&(s.cache.set(B,Ee),t.set(B,Ee))}}}}})},n.prototype.createLineAxis=function(t,s,l,f,d){var m={component:new pg(this.getLineAxisCfg(t,s,f)),layer:l,direction:f===Se.RADIUS?Se.NONE:f,type:ze.AXIS,extra:{dim:d,scale:t}};return m.component.set("field",t.field),m.component.init(),m},n.prototype.createLineGrid=function(t,s,l,f,d){var m=this.getLineGridCfg(t,s,f,d);if(m){var x={component:new Hd(m),layer:l,direction:Se.NONE,type:ze.GRID,extra:{dim:d,scale:t,alignTick:(0,E.U2)(m,"alignTick",!0)}};return x.component.init(),x}},n.prototype.createCircleAxis=function(t,s,l,f,d){var m={component:new dg(this.getCircleAxisCfg(t,s,f)),layer:l,direction:f,type:ze.AXIS,extra:{dim:d,scale:t}};return m.component.set("field",t.field),m.component.init(),m},n.prototype.createCircleGrid=function(t,s,l,f,d){var m=this.getCircleGridCfg(t,s,f,d);if(m){var x={component:new nd(m),layer:l,direction:Se.NONE,type:ze.GRID,extra:{dim:d,scale:t,alignTick:(0,E.U2)(m,"alignTick",!0)}};return x.component.init(),x}},n.prototype.getLineAxisCfg=function(t,s,l){var f=(0,E.U2)(s,["top"])?this.axisForeContainer:this.axisContainer,d=this.view.getCoordinate(),m=Pp(d,l),x=ri(t,s),A=Sr(this.view.getTheme(),l),P=(0,E.U2)(s,["title"])?(0,E.b$)({title:{style:{text:x}}},{title:pn(this.view.getTheme(),l,s.title)},s):s,L=(0,E.b$)((0,M.pi)((0,M.pi)({container:f},m),{ticks:t.getTicks().map(function(gt){return{id:"".concat(gt.tickValue),name:gt.text,value:gt.value}}),verticalFactor:d.isPolar?Qt(m,d.getCenter())*-1:Qt(m,d.getCenter()),theme:A}),A,P),B=this.getAnimateCfg(L),U=B.animate,Y=B.animateOption;L.animateOption=Y,L.animate=U;var se=nt(m),be=(0,E.U2)(L,"verticalLimitLength",se?1/3:1/2);if(be<=1){var Ee=this.view.getCanvas().get("width"),it=this.view.getCanvas().get("height");L.verticalLimitLength=be*(se?Ee:it)}return L},n.prototype.getLineGridCfg=function(t,s,l,f){if(CI(Sr(this.view.getTheme(),l),s)){var d=Dw(this.view.getTheme(),l),m=(0,E.b$)({container:(0,E.U2)(s,["top"])?this.gridForeContainer:this.gridContainer},d,(0,E.U2)(s,"grid"),this.getAnimateCfg(s));return m.items=ub(this.view.getCoordinate(),t,f,(0,E.U2)(m,"alignTick",!0)),m}},n.prototype.getCircleAxisCfg=function(t,s,l){var f=(0,E.U2)(s,["top"])?this.axisForeContainer:this.axisContainer,d=this.view.getCoordinate(),m=t.getTicks().map(function(se){return{id:"".concat(se.tickValue),name:se.text,value:se.value}});!t.isCategory&&Math.abs(d.endAngle-d.startAngle)===Math.PI*2&&m.length&&(m[m.length-1].name="");var x=ri(t,s),A=Sr(this.view.getTheme(),Se.CIRCLE),P=(0,E.U2)(s,["title"])?(0,E.b$)({title:{style:{text:x}}},{title:pn(this.view.getTheme(),l,s.title)},s):s,L=(0,E.b$)((0,M.pi)((0,M.pi)({container:f},kn(this.view.getCoordinate())),{ticks:m,verticalFactor:1,theme:A}),A,P),B=this.getAnimateCfg(L),U=B.animate,Y=B.animateOption;return L.animate=U,L.animateOption=Y,L},n.prototype.getCircleGridCfg=function(t,s,l,f){if(CI(Sr(this.view.getTheme(),l),s)){var d=Dw(this.view.getTheme(),Se.RADIUS),m=(0,E.b$)({container:(0,E.U2)(s,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},d,(0,E.U2)(s,"grid"),this.getAnimateCfg(s)),x=(0,E.U2)(m,"alignTick",!0),A=f==="x"?this.view.getYScales()[0]:this.view.getXScale();return m.items=Fw(this.view.getCoordinate(),A,t,x,f),m}},n.prototype.getId=function(t,s){var l=this.view.getCoordinate();return"".concat(t,"-").concat(s,"-").concat(l.type)},n.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&(0,E.U2)(t,"animate"),animateOption:t&&t.animateOption?(0,E.b$)({},lb,t.animateOption):lb}},n}(Pe),AI=RB;function Fg(a,n,t){return t===Se.TOP?[a.minX+a.width/2-n.width/2,a.minY]:t===Se.BOTTOM?[a.minX+a.width/2-n.width/2,a.maxY-n.height]:t===Se.LEFT?[a.minX,a.minY+a.height/2-n.height/2]:t===Se.RIGHT?[a.maxX-n.width,a.minY+a.height/2-n.height/2]:t===Se.TOP_LEFT||t===Se.LEFT_TOP?[a.tl.x,a.tl.y]:t===Se.TOP_RIGHT||t===Se.RIGHT_TOP?[a.tr.x-n.width,a.tr.y]:t===Se.BOTTOM_LEFT||t===Se.LEFT_BOTTOM?[a.bl.x,a.bl.y-n.height]:t===Se.BOTTOM_RIGHT||t===Se.RIGHT_BOTTOM?[a.br.x-n.width,a.br.y-n.height]:[0,0]}function TI(a,n){if(n.isTransposed)switch(a){case DIRECTION.BOTTOM:return DIRECTION.LEFT;case DIRECTION.LEFT:return DIRECTION.BOTTOM;case DIRECTION.RIGHT:return DIRECTION.TOP;case DIRECTION.TOP:return DIRECTION.RIGHT}return a}function MI(a){return a===DIRECTION.LEFT?DIRECTION.RIGHT:a===DIRECTION.RIGHT?DIRECTION.LEFT:a}function Bw(a){return a===DIRECTION.TOP?DIRECTION.BOTTOM:a===DIRECTION.BOTTOM?DIRECTION.TOP:a}function RI(a,n){var t=n.matrix[0],s=n.matrix[4],l=a;return t<0&&(l=MI(l)),s<0&&(l=Bw(l)),l}function II(a,n){var t=a;return n.isReflect("x")&&(t=MI(t)),n.isReflect("y")&&(t=Bw(t)),t}function cb(a,n){var t=a;return t=TI(t,n),t=RI(t,n),t=II(t,n),t}function PI(a,n){return(0,E.jn)(a)?a===!1?!1:{}:(0,E.U2)(a,[n],a)}function fb(a){return(0,E.U2)(a,"position",Se.BOTTOM)}var Bg=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.container=s.view.getLayer(ge.FORE).addGroup(),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.render=function(){this.update()},n.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,(0,E.S6)(this.components,function(s){var l=s.component,f=s.direction,d=kp(f),m=l.get("maxWidthRatio"),x=l.get("maxHeightRatio"),A=t.getCategoryLegendSizeCfg(d,m,x),P=l.get("maxWidth"),L=l.get("maxHeight");l.update({maxWidth:Math.min(A.maxWidth,P||0),maxHeight:Math.min(A.maxHeight,L||0)});var B=l.get("padding"),U=l.getLayoutBBox(),Y=new ls(U.x,U.y,U.width,U.height).expand(B),se=(0,M.CR)(Fg(t.view.viewBBox,Y,f),2),be=se[0],Ee=se[1],it=(0,M.CR)(Fg(t.layoutBBox,Y,f),2),gt=it[0],xt=it[1],Bt=0,_r=0;f.startsWith("top")||f.startsWith("bottom")?(Bt=be,_r=xt):(Bt=gt,_r=Ee),l.setLocation({x:Bt+B[3],y:_r+B[0]}),t.layoutBBox=t.layoutBBox.cut(Y,f)})},n.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var s={},l=function(B,U,Y){var se=t.getId(Y.field),be=t.getComponentById(se);if(be){var Ee=void 0,it=PI(t.option,Y.field);it!==!1&&((0,E.U2)(it,"custom")?Ee=t.getCategoryCfg(B,U,Y,it,!0):Y.isLinear?Ee=t.getContinuousCfg(B,U,Y,it):Y.isCategory&&(Ee=t.getCategoryCfg(B,U,Y,it))),Ee&&(Xl(Ee,["container"]),be.direction=fb(it),be.component.update(Ee),s[se]=!0)}else{var gt=t.createFieldLegend(B,U,Y);gt&&(gt.component.init(),t.components.push(gt),s[se]=!0)}};if((0,E.U2)(this.option,"custom")){var f="global-custom",d=this.getComponentById(f);if(d){var m=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Xl(m,["container"]),d.component.update(m),s[f]=!0}else{var x=this.createCustomLegend(void 0,void 0,void 0,this.option);if(x){x.init();var A=ge.FORE,P=fb(this.option);this.components.push({id:f,component:x,layer:A,direction:P,type:ze.LEGEND,extra:void 0}),s[f]=!0}}}else this.loopLegends(l);var L=[];(0,E.S6)(this.getComponents(),function(B){s[B.id]?L.push(B):B.component.destroy()}),this.components=L},n.prototype.clear=function(){a.prototype.clear.call(this),this.container.clear()},n.prototype.destroy=function(){a.prototype.destroy.call(this),this.container.remove(!0)},n.prototype.getGeometries=function(t){var s=this,l=t.geometries;return(0,E.S6)(t.views,function(f){l=l.concat(s.getGeometries(f))}),l},n.prototype.loopLegends=function(t){var s=this.view.getRootView()===this.view;if(s){var l=this.getGeometries(this.view),f={};(0,E.S6)(l,function(d){var m=d.getGroupAttributes();(0,E.S6)(m,function(x){var A=x.getScale(x.type);!A||A.type==="identity"||f[A.field]||(t(d,x,A),f[A.field]=!0)})})}},n.prototype.createFieldLegend=function(t,s,l){var f,d=PI(this.option,l.field),m=ge.FORE,x=fb(d);if(d!==!1&&((0,E.U2)(d,"custom")?f=this.createCustomLegend(t,s,l,d):l.isLinear?f=this.createContinuousLegend(t,s,l,d):l.isCategory&&(f=this.createCategoryLegend(t,s,l,d))),f)return f.set("field",l.field),{id:this.getId(l.field),component:f,layer:m,direction:x,type:ze.LEGEND,extra:{scale:l}}},n.prototype.createCustomLegend=function(t,s,l,f){var d=this.getCategoryCfg(t,s,l,f,!0);return new Fc(d)},n.prototype.createContinuousLegend=function(t,s,l,f){var d=this.getContinuousCfg(t,s,l,Xl(f,["value"]));return new Wh(d)},n.prototype.createCategoryLegend=function(t,s,l,f){var d=this.getCategoryCfg(t,s,l,f);return new Fc(d)},n.prototype.getContinuousCfg=function(t,s,l,f){var d=l.getTicks(),m=(0,E.sE)(d,function(se){return se.value===0}),x=(0,E.sE)(d,function(se){return se.value===1}),A=d.map(function(se){var be=se.value,Ee=se.tickValue,it=s.mapping(l.invert(be)).join("");return{value:Ee,attrValue:it,color:it,scaleValue:be}});m||A.push({value:l.min,attrValue:s.mapping(l.invert(0)).join(""),color:s.mapping(l.invert(0)).join(""),scaleValue:0}),x||A.push({value:l.max,attrValue:s.mapping(l.invert(1)).join(""),color:s.mapping(l.invert(1)).join(""),scaleValue:1}),A.sort(function(se,be){return se.value-be.value});var P={min:(0,E.YM)(A).value,max:(0,E.Z$)(A).value,colors:[],rail:{type:s.type},track:{}};s.type==="size"&&(P.track={style:{fill:s.type==="size"?this.view.getTheme().defaultColor:void 0}}),s.type==="color"&&(P.colors=A.map(function(se){return se.attrValue}));var L=this.container,B=fb(f),U=kp(B),Y=(0,E.U2)(f,"title");return Y&&(Y=(0,E.b$)({text:Ip(l)},Y)),P.container=L,P.layout=U,P.title=Y,P.animateOption=fr,this.mergeLegendCfg(P,f,"continuous")},n.prototype.getCategoryCfg=function(t,s,l,f,d){var m=this.container,x=(0,E.U2)(f,"position",Se.BOTTOM),A=Lp(this.view.getTheme(),x),P=(0,E.U2)(A,["marker"]),L=(0,E.U2)(f,"marker"),B=kp(x),U=(0,E.U2)(A,["pageNavigator"]),Y=(0,E.U2)(f,"pageNavigator"),se=d?Kd(P,L,f.items):Yd(this.view,t,s,P,L),be=(0,E.U2)(f,"title");be&&(be=(0,E.b$)({text:l?Ip(l):""},be));var Ee=(0,E.U2)(f,"maxWidthRatio"),it=(0,E.U2)(f,"maxHeightRatio"),gt=this.getCategoryLegendSizeCfg(B,Ee,it);gt.container=m,gt.layout=B,gt.items=se,gt.title=be,gt.animateOption=fr,gt.pageNavigator=(0,E.b$)({},U,Y);var xt=this.mergeLegendCfg(gt,f,x);xt.reversed&&xt.items.reverse();var Bt=(0,E.U2)(xt,"maxItemWidth");return Bt&&Bt<=1&&(xt.maxItemWidth=this.view.viewBBox.width*Bt),xt},n.prototype.mergeLegendCfg=function(t,s,l){var f=l.split("-")[0],d=Lp(this.view.getTheme(),f);return(0,E.b$)({},d,t,s)},n.prototype.getId=function(t){return"".concat(this.name,"-").concat(t)},n.prototype.getComponentById=function(t){return(0,E.sE)(this.components,function(s){return s.id===t})},n.prototype.getCategoryLegendSizeCfg=function(t,s,l){s===void 0&&(s=Et),l===void 0&&(l=Et);var f=this.view.viewBBox,d=f.width,m=f.height;return t==="vertical"?{maxWidth:d*s,maxHeight:m}:{maxWidth:d,maxHeight:m*l}},n}(Pe),Pl=Bg,Hs=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.onChangeFn=E.ZT,s.resetMeasure=function(){s.clear()},s.onValueChange=function(l){var f=(0,M.CR)(l,2),d=f[0],m=f[1];s.start=d,s.end=m,s.changeViewData(d,m)},s.container=s.view.getLayer(ge.FORE).addGroup(),s.onChangeFn=(0,E.P2)(s.onValueChange,20,{leading:!0}),s.width=0,s.view.on(Ue.BEFORE_CHANGE_DATA,s.resetMeasure),s.view.on(Ue.BEFORE_CHANGE_SIZE,s.resetMeasure),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){a.prototype.destroy.call(this),this.view.off(Ue.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Ue.BEFORE_CHANGE_SIZE,this.resetMeasure)},n.prototype.init=function(){},n.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),s=t.start,l=t.end;(0,E.UM)(this.start)&&(this.start=s,this.end=l);var f=this.view.getOptions().data;this.option&&!(0,E.xb)(f)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},n.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var s=this.view.coordinateBBox.width,l=this.slider.component.get("padding"),f=(0,M.CR)(l,4),d=f[0],m=f[1],x=f[2],A=f[3],P=this.slider.component.getLayoutBBox(),L=new ls(P.x,P.y,Math.min(P.width,s),P.height).expand(l),B=this.getMinMaxText(this.start,this.end),U=B.minText,Y=B.maxText,se=(0,M.CR)(Fg(this.view.viewBBox,L,Se.BOTTOM),2),be=se[0],Ee=se[1],it=(0,M.CR)(Fg(this.view.coordinateBBox,L,Se.BOTTOM),2),gt=it[0],xt=it[1];this.slider.component.update((0,M.pi)((0,M.pi)({},this.getSliderCfg()),{x:gt+A,y:Ee+d,width:this.width,start:this.start,end:this.end,minText:U,maxText:Y})),this.view.viewBBox=this.view.viewBBox.cut(L,Se.BOTTOM)}},n.prototype.update=function(){this.render()},n.prototype.createSlider=function(){var t=this.getSliderCfg(),s=new Gl((0,M.pi)({container:this.container},t));return s.init(),{component:s,layer:ge.FORE,direction:Se.BOTTOM,type:ze.SLIDER}},n.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var s=this.getMinMaxText(this.start,this.end),l=s.minText,f=s.maxText;t=(0,M.pi)((0,M.pi)({},t),{width:this.width,start:this.start,end:this.end,minText:l,maxText:f})}return this.slider.component.update(t),this.slider},n.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},n.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if((0,E.Kn)(this.option)){var s=(0,M.pi)({data:this.getData()},(0,E.U2)(this.option,"trendCfg",{}));t=(0,E.b$)({},t,this.getThemeOptions(),this.option),t=(0,M.pi)((0,M.pi)({},t),{trendCfg:s})}return t.start=(0,E.uZ)(Math.min((0,E.UM)(t.start)?0:t.start,(0,E.UM)(t.end)?1:t.end),0,1),t.end=(0,E.uZ)(Math.max((0,E.UM)(t.start)?0:t.start,(0,E.UM)(t.end)?1:t.end),0,1),t},n.prototype.getData=function(){var t=this.view.getOptions().data,s=(0,M.CR)(this.view.getYScales(),1),l=s[0],f=this.view.getGroupScales();if(f.length){var d=f[0],m=d.field,x=d.ticks;return t.reduce(function(A,P){return P[m]===x[0]&&A.push(P[l.field]),A},[])}return t.map(function(A){return A[l.field]||0})},n.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,E.U2)(t,["components","slider","common"],{})},n.prototype.getMinMaxText=function(t,s){var l=this.view.getOptions().data,f=this.view.getXScale(),d=!0,m=(0,E.I)(l,f.field);f.isLinear&&(m=m.sort());var x=d?m:m.reverse(),A=(0,E.dp)(l);if(!f||!A)return{};var P=(0,E.dp)(x),L=Math.round(t*(P-1)),B=Math.round(s*(P-1)),U=(0,E.U2)(x,[L]),Y=(0,E.U2)(x,[B]),se=this.getSliderCfg().formatter;return se&&(U=se(U,l[L],L),Y=se(Y,l[B],B)),{minText:U,maxText:Y}},n.prototype.changeViewData=function(t,s){var l=this.view.getOptions().data,f=this.view.getXScale(),d=(0,E.dp)(l);if(!(!f||!d)){var m=!0,x=(0,E.I)(l,f.field),A=this.view.getXScale().isLinear?x.sort(function(Y,se){return Number(Y)-Number(se)}):x,P=m?A:A.reverse(),L=(0,E.dp)(P),B=Math.round(t*(L-1)),U=Math.round(s*(L-1));this.view.filter(f.field,function(Y,se){var be=P.indexOf(Y);return be>-1?Rp(be,B,U):!0}),this.view.render(!0)}},n.prototype.getComponents=function(){return this.slider?[this.slider]:[]},n.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},n}(Pe),Om=Hs,ia=0,Z_=8,V_=32,Zc=20,OI=function(a){(0,M.ZT)(n,a);function n(t){var s=a.call(this,t)||this;return s.onChangeFn=E.ZT,s.resetMeasure=function(){s.clear()},s.onValueChange=function(l){var f=l.ratio,d=s.getValidScrollbarCfg().animate;s.ratio=(0,E.uZ)(f,0,1);var m=s.view.getOptions().animate;d||s.view.animate(!1),s.changeViewData(s.getScrollRange(),!0),s.view.animate(m)},s.container=s.view.getLayer(ge.FORE).addGroup(),s.onChangeFn=(0,E.P2)(s.onValueChange,20,{leading:!0}),s.trackLen=0,s.thumbLen=0,s.ratio=0,s.view.on(Ue.BEFORE_CHANGE_DATA,s.resetMeasure),s.view.on(Ue.BEFORE_CHANGE_SIZE,s.resetMeasure),s}return Object.defineProperty(n.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){a.prototype.destroy.call(this),this.view.off(Ue.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(Ue.BEFORE_CHANGE_SIZE,this.resetMeasure)},n.prototype.init=function(){},n.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},n.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var s=this.view.coordinateBBox.width,l=this.scrollbar.component.get("padding"),f=this.scrollbar.component.getLayoutBBox(),d=new ls(f.x,f.y,Math.min(f.width,s),f.height).expand(l),m=this.getScrollbarComponentCfg(),x=void 0,A=void 0;if(m.isHorizontal){var P=(0,M.CR)(Fg(this.view.viewBBox,d,Se.BOTTOM),2),L=P[0],B=P[1],U=(0,M.CR)(Fg(this.view.coordinateBBox,d,Se.BOTTOM),2),Y=U[0],se=U[1];x=Y,A=B}else{var be=(0,M.CR)(Fg(this.view.viewBBox,d,Se.RIGHT),2),L=be[0],B=be[1],Ee=(0,M.CR)(Fg(this.view.viewBBox,d,Se.RIGHT),2),Y=Ee[0],se=Ee[1];x=Y,A=B}x+=l[3],A+=l[0],this.trackLen?this.scrollbar.component.update((0,M.pi)((0,M.pi)({},m),{x,y:A,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update((0,M.pi)((0,M.pi)({},m),{x,y:A})),this.view.viewBBox=this.view.viewBBox.cut(d,m.isHorizontal?Se.BOTTOM:Se.RIGHT)}},n.prototype.update=function(){this.render()},n.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},n.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},n.prototype.setValue=function(t){this.onValueChange({ratio:t})},n.prototype.getValue=function(){return this.ratio},n.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,E.U2)(t,["components","scrollbar","common"],{})},n.prototype.getScrollbarTheme=function(t){var s=(0,E.U2)(this.view.getTheme(),["components","scrollbar"]),l=t||{},f=l.thumbHighlightColor,d=(0,M._T)(l,["thumbHighlightColor"]);return{default:(0,E.b$)({},(0,E.U2)(s,["default","style"],{}),d),hover:(0,E.b$)({},(0,E.U2)(s,["hover","style"],{}),{thumbColor:f})}},n.prototype.measureScrollbar=function(){var t=this.view.getXScale(),s=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var l=this.getScrollbarComponentCfg(),f=l.trackLen,d=l.thumbLen;this.trackLen=f,this.thumbLen=d,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=s},n.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,E.uZ)(this.ratio,0,1)),s=Math.min(t+this.step-1,this.cnt-1);return[t,s]},n.prototype.changeViewData=function(t,s){var l=this,f=(0,M.CR)(t,2),d=f[0],m=f[1],x=this.getValidScrollbarCfg().type,A=x!=="vertical",P=(0,E.I)(this.data,this.xScaleCfg.field),L=this.view.getXScale().isLinear?P.sort(function(U,Y){return Number(U)-Number(Y)}):P,B=A?L:L.reverse();this.yScalesCfg.forEach(function(U){l.view.scale(U.field,{formatter:U.formatter,type:U.type,min:U.min,max:U.max,tickMethod:U.tickMethod})}),this.view.filter(this.xScaleCfg.field,function(U){var Y=B.indexOf(U);return Y>-1?Rp(Y,d,m):!0}),this.view.render(!0)},n.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,s=t!=="vertical",l=new gh((0,M.pi)((0,M.pi)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return l.init(),{component:l,layer:ge.FORE,direction:s?Se.BOTTOM:Se.RIGHT,type:ze.SCROLLBAR}},n.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),s=this.trackLen?(0,M.pi)((0,M.pi)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):(0,M.pi)({},t);return this.scrollbar.component.update(s),this.scrollbar},n.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,s=this.getValidScrollbarCfg(),l=s.type,f=s.categorySize,d=l!=="vertical";return Math.floor((d?t.width:t.height)/f)},n.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),s=this.getScrollbarData(),l=(0,E.I)(s,t.field);return(0,E.dp)(l)},n.prototype.getScrollbarComponentCfg=function(){var t=this.view,s=t.coordinateBBox,l=t.viewBBox,f=this.getValidScrollbarCfg(),d=f.type,m=f.padding,x=f.width,A=f.height,P=f.style,L=d!=="vertical",B=(0,M.CR)(m,4),U=B[0],Y=B[1],se=B[2],be=B[3],Ee=L?{x:s.minX+be,y:l.maxY-A-se}:{x:l.maxX-x-Y,y:s.minY+U},it=this.getStep(),gt=this.getCnt(),xt=L?s.width-be-Y:s.height-U-se,Bt=Math.max(xt*(0,E.uZ)(it/gt,0,1),Zc);return(0,M.pi)((0,M.pi)({},this.getThemeOptions()),{x:Ee.x,y:Ee.y,size:L?A:x,isHorizontal:L,trackLen:xt,thumbLen:Bt,thumbOffset:0,theme:this.getScrollbarTheme(P)})},n.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:V_,width:Z_,height:Z_,padding:[0,0,0,0],animate:!0,style:{}};return(0,E.Kn)(this.option)&&(t=(0,M.pi)((0,M.pi)({},t),this.option)),(!(0,E.Kn)(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[ia,0,ia,0]:[0,ia,0,ia]),t},n.prototype.getScrollbarData=function(){var t=this.view.getCoordinate(),s=this.getValidScrollbarCfg(),l=this.view.getOptions().data||[];return t.isReflect("y")&&s.type==="vertical"&&(l=(0,M.ev)([],(0,M.CR)(l),!1).reverse()),l},n}(Pe),kI=OI,LI={fill:"#CCD6EC",opacity:.3};function DI(a,n,t){var s,l,f,d,m,x,A=Tu(a,n,t);if(A.length){A=(0,E.xH)(A);try{for(var P=(0,M.XA)(A),L=P.next();!L.done;L=P.next()){var B=L.value;try{for(var U=(f=void 0,(0,M.XA)(B)),Y=U.next();!Y.done;Y=U.next()){var se=Y.value,be=se.mappingData,Ee=be.x,it=be.y;se.x=(0,E.kJ)(Ee)?Ee[Ee.length-1]:Ee,se.y=(0,E.kJ)(it)?it[it.length-1]:it}}catch(cn){f={error:cn}}finally{try{Y&&!Y.done&&(d=U.return)&&d.call(U)}finally{if(f)throw f.error}}}}catch(cn){s={error:cn}}finally{try{L&&!L.done&&(l=P.return)&&l.call(P)}finally{if(s)throw s.error}}var gt=t.shared;if(gt===!1&&A.length>1){var xt=A[0],Bt=Math.abs(n.y-xt[0].y);try{for(var _r=(0,M.XA)(A),Or=_r.next();!Or.done;Or=_r.next()){var Gr=Or.value,mn=Math.abs(n.y-Gr[0].y);mn<=Bt&&(xt=Gr,Bt=mn)}}catch(cn){m={error:cn}}finally{try{Or&&!Or.done&&(x=_r.return)&&x.call(_r)}finally{if(m)throw m.error}}A=[xt]}return(0,E.jj)((0,E.xH)(A))}return[]}var Nw=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.show=function(t){var s=this.context.view,l=this.context.event,f=s.getController("tooltip").getTooltipCfg(),d=DI(s,{x:l.x,y:l.y},f);if(!(0,E.Xy)(d,this.items)&&(this.items=d,d.length)){var m=s.getXScale().field,x=d[0].data[m],A=[],P=s.geometries;if((0,E.S6)(P,function(aa){if(aa.type==="interval"||aa.type==="schema"){var Ni=aa.getElementsBy(function($i){var Ma=$i.getData();return Ma[m]===x});A=A.concat(Ni)}}),A.length){var L=s.getCoordinate(),B=A[0].shape.getCanvasBBox(),U=A[0].shape.getCanvasBBox(),Y=B;(0,E.S6)(A,function(aa){var Ni=aa.shape.getCanvasBBox();L.isTransposed?(Ni.minY<B.minY&&(B=Ni),Ni.maxY>U.maxY&&(U=Ni)):(Ni.minX<B.minX&&(B=Ni),Ni.maxX>U.maxX&&(U=Ni)),Y.x=Math.min(Ni.minX,Y.minX),Y.y=Math.min(Ni.minY,Y.minY),Y.width=Math.max(Ni.maxX,Y.maxX)-Y.x,Y.height=Math.max(Ni.maxY,Y.maxY)-Y.y});var se=s.backgroundGroup,be=s.coordinateBBox,Ee=void 0;if(L.isRect){var it=s.getXScale(),gt=t||{},xt=gt.appendRatio,Bt=gt.appendWidth;(0,E.UM)(Bt)&&(xt=(0,E.UM)(xt)?it.isLinear?0:.25:xt,Bt=L.isTransposed?xt*U.height:xt*B.width);var _r=void 0,Or=void 0,Gr=void 0,mn=void 0;L.isTransposed?(_r=be.minX,Or=Math.min(U.minY,B.minY)-Bt,Gr=be.width,mn=Y.height+Bt*2):(_r=Math.min(B.minX,U.minX)-Bt,Or=be.minY,Gr=Y.width+Bt*2,mn=be.height),Ee=[["M",_r,Or],["L",_r+Gr,Or],["L",_r+Gr,Or+mn],["L",_r,Or+mn],["Z"]]}else{var cn=(0,E.YM)(A),Nn=(0,E.Z$)(A),hi=id(cn.getModel(),L).startAngle,Wi=id(Nn.getModel(),L).endAngle,bi=L.getCenter(),to=L.getRadius(),jn=L.innerRadius*to;Ee=Zf(bi.x,bi.y,to,hi,Wi,jn)}if(this.regionPath)this.regionPath.attr("path",Ee),this.regionPath.show();else{var Ci=(0,E.U2)(t,"style",LI);this.regionPath=se.addShape({type:"path",name:"active-region",capture:!1,attrs:(0,M.pi)((0,M.pi)({},Ci),{path:Ee})})}}}},n.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},n.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),a.prototype.destroy.call(this)},n}(Rn),FI=Nw,BI=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.timeStamp=0,t}return n.prototype.show=function(){var t=this.context,s=t.event,l=t.view,f=l.isTooltipLocked();if(!f){var d=this.timeStamp,m=+new Date,x=(0,E.U2)(t.view.getOptions(),"tooltip.showDelay",16);if(m-d>x){var A=this.location,P={x:s.x,y:s.y};(!A||!(0,E.Xy)(A,P))&&this.showTooltip(l,P),this.timeStamp=m,this.location=P}}},n.prototype.hide=function(){var t=this.context.view,s=t.getController("tooltip"),l=this.context.event,f=l.clientX,d=l.clientY;s.isCursorEntered({x:f,y:d})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},n.prototype.showTooltip=function(t,s){t.showTooltip(s)},n.prototype.hideTooltip=function(t){t.hideTooltip()},n}(Rn),H_=BI,NI=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.showTooltip=function(t,s){var l=xr(t);(0,E.S6)(l,function(f){var d=on(t,f,s);f.showTooltip(d)})},n.prototype.hideTooltip=function(t){var s=xr(t);(0,E.S6)(s,function(l){l.hideTooltip()})},n}(H_),zw=NI,Uw=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.timeStamp=0,t}return n.prototype.destroy=function(){a.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.show=function(){var t=this.context,s=t.event,l=this.timeStamp,f=+new Date;if(f-l>16){var d=this.location,m={x:s.x,y:s.y};(!d||!(0,E.Xy)(d,m))&&this.showTooltip(m),this.timeStamp=f,this.location=m}},n.prototype.hide=function(){this.hideTooltip(),this.location=null},n.prototype.showTooltip=function(t){var s=this.context,l=s.event,f=l.target;if(f&&f.get("tip")){this.tooltip||this.renderTooltip();var d=f.get("tip");this.tooltip.update((0,M.pi)({title:d},t)),this.tooltip.show()}},n.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var t,s=this.context.view,l=s.canvas,f={start:{x:0,y:0},end:{x:l.get("width"),y:l.get("height")}},d=s.getTheme(),m=(0,E.U2)(d,["components","tooltip","domStyles"],{}),x=new jd({parent:l.get("el").parentNode,region:f,visible:!1,crosshairs:null,domStyles:(0,M.pi)({},(0,E.b$)({},m,(t={},t[Hl]={"max-width":"50%"},t[Rl]={"word-break":"break-all"},t)))});x.init(),x.setCapture(!1),this.tooltip=x},n}(Rn),zI=Uw,IB=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="",t}return n.prototype.hasState=function(t){return t.hasState(this.stateName)},n.prototype.setElementState=function(t,s){t.setState(this.stateName,s)},n.prototype.setState=function(){this.setStateEnable(!0)},n.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},n.prototype.clearViewState=function(t){var s=this,l=Es(t,this.stateName);(0,E.S6)(l,function(f){s.setElementState(f,!1)})},n}(Rn),hb=IB;function Zw(a){return(0,E.U2)(a.get("delegateObject"),"item")}var UI=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return n.prototype.isItemIgnore=function(t,s){var l=this.ignoreListItemStates,f=l.filter(function(d){return s.hasState(t,d)});return!!f.length},n.prototype.setStateByComponent=function(t,s,l){var f=this.context.view,d=t.get("field"),m=xa(f);this.setElementsStateByItem(m,d,s,l)},n.prototype.setStateByElement=function(t,s){this.setElementState(t,s)},n.prototype.isMathItem=function(t,s,l){var f=this.context.view,d=Nr(f,s),m=vu(t,s);return!(0,E.UM)(m)&&l.name===d.getText(m)},n.prototype.setElementsStateByItem=function(t,s,l,f){var d=this;(0,E.S6)(t,function(m){d.isMathItem(m,s,l)&&m.setState(d.stateName,f)})},n.prototype.setStateEnable=function(t){var s=hs(this.context);if(s)du(this.context)&&this.setStateByElement(s,t);else{var l=Vo(this.context);if(Us(l)){var f=l.item,d=l.component;if(f&&d&&!this.isItemIgnore(f,d)){var m=this.context.event.gEvent;if(m&&m.fromShape&&m.toShape&&Zw(m.fromShape)===Zw(m.toShape))return;this.setStateByComponent(d,f,t)}}}},n.prototype.toggle=function(){var t=hs(this.context);if(t){var s=t.hasState(this.stateName);this.setElementState(t,!s)}},n.prototype.reset=function(){this.setStateEnable(!1)},n}(hb),pb=UI,ZI=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(pb),VI=ZI,HI=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.cache={},t}return n.prototype.getColorScale=function(t,s){var l=s.geometry.getAttribute("color");if(!l)return null;var f=t.getScaleByField(l.getFields()[0]);return f},n.prototype.getLinkPath=function(t,s){var l=this.context.view,f=l.getCoordinate().isTransposed,d=t.shape.getCanvasBBox(),m=s.shape.getCanvasBBox(),x=f?[["M",d.minX,d.minY],["L",m.minX,m.maxY],["L",m.maxX,m.maxY],["L",d.maxX,d.minY],["Z"]]:[["M",d.maxX,d.minY],["L",m.minX,m.minY],["L",m.minX,m.maxY],["L",d.maxX,d.maxY],["Z"]];return x},n.prototype.addLinkShape=function(t,s,l,f){var d={opacity:.4,fill:s.shape.attr("fill")};t.addShape({type:"path",attrs:(0,M.pi)((0,M.pi)({},(0,E.b$)({},d,(0,E.mf)(f)?f(d,s):f)),{path:this.getLinkPath(s,l)})})},n.prototype.linkByElement=function(t,s){var l=this,f=this.context.view,d=this.getColorScale(f,t);if(d){var m=vu(t,d.field);if(!this.cache[m]){var x=Ao(f,d.field,m),A=this.linkGroup,P=A.addGroup();this.cache[m]=P;var L=x.length;(0,E.S6)(x,function(B,U){if(U<L-1){var Y=x[U+1];l.addLinkShape(P,B,Y,s)}})}}},n.prototype.removeLink=function(t){var s=this.getColorScale(this.context.view,t);if(s){var l=vu(t,s.field);this.cache[l]&&(this.cache[l].remove(),this.cache[l]=null)}},n.prototype.link=function(t){var s=this.context;this.linkGroup||(this.linkGroup=s.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var l=hs(s);l&&this.linkByElement(l,t==null?void 0:t.style)},n.prototype.unlink=function(){var t=hs(this.context);t&&this.removeLink(t)},n.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},n.prototype.destroy=function(){a.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},n}(Rn),jI=HI,WI=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},n.prototype.getIntersectElements=function(){var t=null;if(Js(this.context))t=ou(this.context,10);else{var s=this.startPoint,l=this.isStarted?this.getCurrentPoint():this.endPoint;if(!s||!l)return;var f={minX:Math.min(s.x,l.x),minY:Math.min(s.y,l.y),maxX:Math.max(s.x,l.x),maxY:Math.max(s.y,l.y)},d=this.context.view;t=yn(d,f)}return t},n.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var s=xa(this.context.view),l=this.getIntersectElements();l&&l.length?this.effectByRecord?this.setSiblingsStateByRecord(l,t):this.setElementsState(l,t,s):this.clear()}},n.prototype.setSiblingsStateByRecord=function(t,s){var l=this,f=this.context.view,d=xr(f),m=t.map(function(P){return P.getModel().data}),x=f.getXScale().field,A=f.getYScales()[0].field;(0,E.S6)(d,function(P){var L=xa(P),B=L.filter(function(U){var Y=U.getModel().data;return kr(m,Y,x,A)});l.setElementsState(B,s,L)})},n.prototype.setSiblingsState=function(t){var s=this,l=this.context.view,f=xr(l);Js(this.context)&&(0,E.S6)(f,function(d){var m=xa(d),x=Uu(s.context,d,10);x&&x.length?s.setElementsState(x,t,m):s.clearViewState(d)})},n.prototype.setElementsState=function(t,s,l){var f=this;(0,E.S6)(l,function(d){t.includes(d)?f.setElementState(d,s):f.setElementState(d,!1)})},n.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},n.prototype.clear=function(){var t=this,s=this.context.view;if(this.effectSiblings){var l=xr(s);(0,E.S6)(l,function(f){t.clearViewState(f)})}else this.clearViewState(s)},n}(hb),db=WI,GI=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(db),$I=GI,XI=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.setStateEnable=function(t){var s=hs(this.context);if(s){if(!du(this.context))return;t?(this.clear(),this.setElementState(s,!0)):this.hasState(s)&&this.setElementState(s,!1)}},n.prototype.toggle=function(){var t=hs(this.context);if(t){var s=this.hasState(t);s||this.clear(),this.setElementState(t,!s)}},n.prototype.reset=function(){this.setStateEnable(!1)},n}(hb),j_=XI,YI=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(j_),KI=YI,ay="inactive",km="active";function vb(a){var n=xa(a);(0,E.S6)(n,function(t){t.hasState(km)&&t.setState(km,!1),t.hasState(ay)&&t.setState(ay,!1)})}function Vw(a,n,t){(0,E.S6)(a,function(s){n(s)?(s.hasState(ay)&&s.setState(ay,!1),s.setState(km,t)):(s.hasState(km)&&s.setState(km,!1),s.setState(ay,t))})}var Ng=Ze.INACTIVE,iv=Ze.ACTIVE,qI=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName=iv,t}return n.prototype.setElementsStateByItem=function(t,s,l,f){var d=this,m=function(x){return d.isMathItem(x,s,l)};this.setHighlightBy(t,m,f)},n.prototype.setElementHighlight=function(t,s){s(t)?(t.hasState(Ng)&&t.setState(Ng,!1),t.setState(iv,!0)):t.hasState(iv)||t.setState(Ng,!0)},n.prototype.setHighlightBy=function(t,s,l){var f=this;if(l)(0,E.S6)(t,function(x){f.setElementHighlight(x,s)});else{var d=Es(this.context.view,iv),m=!0;(0,E.S6)(d,function(x){if(!s(x))return m=!1,!1}),m?this.clear():(0,E.S6)(t,function(x){s(x)&&(x.hasState(iv)&&x.setState(iv,!1),x.setState(Ng,!0))})}},n.prototype.setElementState=function(t,s){var l=this.context.view,f=xa(l);this.setHighlightBy(f,function(d){return t===d},s)},n.prototype.highlight=function(){this.setState()},n.prototype.clear=function(){var t=this.context.view;vb(t)},n}(pb),W_=qI,QI=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.setStateByElement=function(t,s){var l=this.context.view,f=t.geometry.getAttribute("color");if(f){var d=l.getScaleByField(f.getFields()[0]),m=vu(t,d.field),x=xa(l),A=x.filter(function(P){return vu(P,d.field)===m});this.setHighlightBy(x,function(P){return A.includes(P)},s)}},n}(W_),JI=QI,eP=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.setElementHighlight=function(t,s){s(t)?(t.hasState(Ng)&&t.setState(Ng,!1),t.setState(iv,!0)):(t.setState(Ng,!0),t.hasState(iv)&&t.setState(iv,!1))},n.prototype.setStateByElement=function(t,s){var l=this.context.view,f=l.getXScale(),d=vu(t,f.field),m=xa(l),x=m.filter(function(A){return vu(A,f.field)===d});this.setHighlightBy(m,function(A){return x.includes(A)},s)},n.prototype.toggle=function(){var t=hs(this.context);if(t){var s=t.hasState(this.stateName);this.setStateByElement(t,!s)}},n}(W_),tP=eP,xd;(function(a){a.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",a.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",a.BEFORE_CLEAR="element-range-highlight:beforeclear",a.AFTER_CLEAR="element-range-highlight:afterclear"})(xd||(xd={}));var Hw=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.clearViewState=function(t){vb(t)},n.prototype.highlight=function(){var t=this.context,s=t.view,l=t.event,f=this.getIntersectElements(),d={view:s,event:l,highlightElements:f};s.emit(xd.BEFORE_HIGHLIGHT,Ka.fromData(s,xd.BEFORE_HIGHLIGHT,d)),this.setState(),s.emit(xd.AFTER_HIGHLIGHT,Ka.fromData(s,xd.AFTER_HIGHLIGHT,d))},n.prototype.clear=function(){var t=this.context.view;t.emit(xd.BEFORE_CLEAR,Ka.fromData(t,xd.BEFORE_CLEAR,{})),a.prototype.clear.call(this),t.emit(xd.AFTER_CLEAR,Ka.fromData(t,xd.AFTER_CLEAR,{}))},n.prototype.setElementsState=function(t,s,l){Vw(l,function(f){return t.indexOf(f)>=0},s)},n}(db),jw=Hw,Ww=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.highlight=function(){this.setState()},n.prototype.setElementState=function(t,s){var l=this.context.view,f=xa(l);Vw(f,function(d){return t===d},s)},n.prototype.clear=function(){var t=this.context.view;vb(t)},n}(j_),gb=Ww,rP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(db),nP=rP,iP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(pb),aP=iP,oP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(j_),sP=oP,Lm=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return n.prototype.getTriggerListInfo=function(){var t=Vo(this.context),s=null;return Us(t)&&(s={item:t.item,list:t.component}),s},n.prototype.getAllowComponents=function(){var t=this,s=this.context.view,l=Ya(s),f=[];return(0,E.S6)(l,function(d){d.isList()&&t.allowSetStateByElement(d)&&f.push(d)}),f},n.prototype.hasState=function(t,s){return t.hasState(s,this.stateName)},n.prototype.clearAllComponentsState=function(){var t=this,s=this.getAllowComponents();(0,E.S6)(s,function(l){l.clearItemsState(t.stateName)})},n.prototype.allowSetStateByElement=function(t){var s=t.get("field");if(!s)return!1;if(this.cfg&&this.cfg.componentNames){var l=t.get("name");if(this.cfg.componentNames.indexOf(l)===-1)return!1}var f=this.context.view,d=Nr(f,s);return d&&d.isCategory},n.prototype.allowSetStateByItem=function(t,s){var l=this.ignoreItemStates;if(l.length){var f=l.filter(function(d){return s.hasState(t,d)});return f.length===0}return!0},n.prototype.setStateByElement=function(t,s,l){var f=t.get("field"),d=this.context.view,m=Nr(d,f),x=vu(s,f),A=m.getText(x);this.setItemsState(t,A,l)},n.prototype.setStateEnable=function(t){var s=this,l=hs(this.context);if(l){var f=this.getAllowComponents();(0,E.S6)(f,function(A){s.setStateByElement(A,l,t)})}else{var d=Vo(this.context);if(Us(d)){var m=d.item,x=d.component;this.allowSetStateByElement(x)&&this.allowSetStateByItem(m,x)&&this.setItemState(x,m,t)}}},n.prototype.setItemsState=function(t,s,l){var f=this,d=t.getItems();(0,E.S6)(d,function(m){m.name===s&&f.setItemState(t,m,l)})},n.prototype.setItemState=function(t,s,l){t.setItemState(s,this.stateName,l)},n.prototype.setState=function(){this.setStateEnable(!0)},n.prototype.reset=function(){this.setStateEnable(!1)},n.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var s=t.list,l=t.item,f=this.hasState(s,l);this.setItemState(s,l,!f)}},n.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},n}(Rn),zg=Lm,uP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="active",t}return n.prototype.active=function(){this.setState()},n}(zg),lP=uP,Gw="inactive",$w="active";function cP(a){var n=a.getItems();(0,E.S6)(n,function(t){a.hasState(t,$w)&&a.setItemState(t,$w,!1),a.hasState(t,Gw)&&a.setItemState(t,Gw,!1)})}var oy="inactive",Ug="active",G_=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName=Ug,t.ignoreItemStates=["unchecked"],t}return n.prototype.setItemsState=function(t,s,l){this.setHighlightBy(t,function(f){return f.name===s},l)},n.prototype.setItemState=function(t,s,l){var f=t.getItems();this.setHighlightBy(t,function(d){return d===s},l)},n.prototype.setHighlightBy=function(t,s,l){var f=t.getItems();if(l)(0,E.S6)(f,function(x){s(x)?(t.hasState(x,oy)&&t.setItemState(x,oy,!1),t.setItemState(x,Ug,!0)):t.hasState(x,Ug)||t.setItemState(x,oy,!0)});else{var d=t.getItemsByState(Ug),m=!0;(0,E.S6)(d,function(x){if(!s(x))return m=!1,!1}),m?this.clear():(0,E.S6)(f,function(x){s(x)&&(t.hasState(x,Ug)&&t.setItemState(x,Ug,!1),t.setItemState(x,oy,!0))})}},n.prototype.highlight=function(){this.setState()},n.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)cP(t.list);else{var s=this.getAllowComponents();(0,E.S6)(s,function(l){l.clearItemsState(Ug),l.clearItemsState(oy)})}},n}(zg),mb=G_,fP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="selected",t}return n.prototype.selected=function(){this.setState()},n}(zg),Xw=fP,PB=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName="unchecked",t}return n.prototype.unchecked=function(){this.setState()},n}(zg),hP=PB,sy="unchecked",yb="checked",OB=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.stateName=yb,t}return n.prototype.setItemState=function(t,s,l){this.setCheckedBy(t,function(f){return f===s},l)},n.prototype.setCheckedBy=function(t,s,l){var f=t.getItems();l&&(0,E.S6)(f,function(d){s(d)?(t.hasState(d,sy)&&t.setItemState(d,sy,!1),t.setItemState(d,yb,!0)):t.hasState(d,yb)||t.setItemState(d,sy,!0)})},n.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var s=t.list,l=t.item,f=!(0,E.G)(s.getItems(),function(d){return s.hasState(d,sy)});f||s.hasState(l,sy)?this.setItemState(s,l,!0):this.reset()}},n.prototype.checked=function(){this.setState()},n.prototype.reset=function(){var t=this.getAllowComponents();(0,E.S6)(t,function(s){s.clearItemsState(yb),s.clearItemsState(sy)})},n}(zg),pP=OB,Dm="unchecked",uy=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.toggle=function(){var t,s,l,f,d,m,x,A,P=this.getTriggerListInfo();if(P!=null&&P.item){var L=P.list,B=P.item,U=L.getItems(),Y=U.filter(function(cn){return!L.hasState(cn,Dm)}),se=U.filter(function(cn){return L.hasState(cn,Dm)}),be=Y[0];if(U.length===Y.length)try{for(var Ee=(0,M.XA)(U),it=Ee.next();!it.done;it=Ee.next()){var gt=it.value;L.setItemState(gt,Dm,gt.id!==B.id)}}catch(cn){t={error:cn}}finally{try{it&&!it.done&&(s=Ee.return)&&s.call(Ee)}finally{if(t)throw t.error}}else if(U.length-se.length===1)if(be.id===B.id)try{for(var xt=(0,M.XA)(U),Bt=xt.next();!Bt.done;Bt=xt.next()){var gt=Bt.value;L.setItemState(gt,Dm,!1)}}catch(cn){l={error:cn}}finally{try{Bt&&!Bt.done&&(f=xt.return)&&f.call(xt)}finally{if(l)throw l.error}}else try{for(var _r=(0,M.XA)(U),Or=_r.next();!Or.done;Or=_r.next()){var gt=Or.value;L.setItemState(gt,Dm,gt.id!==B.id)}}catch(cn){d={error:cn}}finally{try{Or&&!Or.done&&(m=_r.return)&&m.call(_r)}finally{if(d)throw d.error}}else try{for(var Gr=(0,M.XA)(U),mn=Gr.next();!mn.done;mn=Gr.next()){var gt=mn.value;L.setItemState(gt,Dm,gt.id!==B.id)}}catch(cn){x={error:cn}}finally{try{mn&&!mn.done&&(A=Gr.return)&&A.call(Gr)}finally{if(x)throw x.error}}}},n}(zg),kB=uy,Yw="showRadio",Kw="legend-radio-tip",dP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.timeStamp=0,t}return n.prototype.show=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var s=t.list,l=t.item;s.setItemState(l,Yw,!0)}},n.prototype.hide=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var s=t.list,l=t.item;s.setItemState(l,Yw,!1)}},n.prototype.destroy=function(){a.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.showTip=function(){var t=this.context,s=t.event,l=this.timeStamp,f=+new Date,d=this.context.event.target;if(f-l>16&&d.get("name")==="legend-item-radio"){var m=this.location,x={x:s.x,y:s.y};this.timeStamp=f,this.location=x,(!m||!(0,E.Xy)(m,x))&&this.showTooltip(x)}},n.prototype.hideTip=function(){this.hideTooltip(),this.location=null},n.prototype.showTooltip=function(t){var s=this.context,l=s.event,f=l.target;if(f&&f.get("tip")){this.tooltip||this.renderTooltip();var d=s.view.getCanvas().get("el").getBoundingClientRect(),m=d.x,x=d.y;this.tooltip.update((0,M.pi)((0,M.pi)({title:f.get("tip")},t),{x:t.x+m,y:t.y+x})),this.tooltip.show()}},n.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var t,s=(t={},t[Hl]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},t[Rl]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},t);document.getElementById(Kw)&&document.body.removeChild(document.getElementById(Kw));var l=new jd({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:s,containerId:Kw});l.init(),l.setCapture(!1),this.tooltip=l},n}(zg),vP=dP,gP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.emitEvent=function(t){var s="mask:".concat(t),l=this.context.view,f=this.context.event;l.emit(s,{target:this.maskShape,shape:this.maskShape,points:this.points,x:f.x,y:f.y})},n.prototype.createMask=function(){var t=this.context.view,s=this.getMaskAttrs(),l=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,M.pi)({fill:"#C5D4EB",opacity:.3},s)});return l},n.prototype.getMaskPath=function(){return[]},n.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},n.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},n.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},n.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),s=this.preMovePoint,l=t.x-s.x,f=t.y-s.y,d=this.points;(0,E.S6)(d,function(m){m.x+=l,m.y+=f}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},n.prototype.updateMask=function(t){var s=(0,E.b$)({},this.getMaskAttrs(),t);this.maskShape.attr(s)},n.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},n.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},n.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},n.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},n.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,a.prototype.destroy.call(this)},n}(Rn),qw=gP;function Qw(a){var n=(0,E.Z$)(a),t=0,s=0,l=0;if(a.length){var f=a[0];t=Go(f,n)/2,s=(n.x+f.x)/2,l=(n.y+f.y)/2}return{x:s,y:l,r:t}}var LB=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.shapeType="circle",t}return n.prototype.getMaskAttrs=function(){return Qw(this.points)},n}(qw),DB=LB;function mP(a){return{start:(0,E.YM)(a),end:(0,E.Z$)(a)}}function Jw(a,n){var t=Math.min(a.x,n.x),s=Math.min(a.y,n.y),l=Math.abs(n.x-a.x),f=Math.abs(n.y-a.y);return{x:t,y:s,width:l,height:f}}var yP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.shapeType="rect",t}return n.prototype.getRegion=function(){return mP(this.points)},n.prototype.getMaskAttrs=function(){var t=this.getRegion(),s=t.start,l=t.end;return Jw(s,l)},n}(qw),_P=yP;function _b(a){a.x=(0,E.uZ)(a.x,0,1),a.y=(0,E.uZ)(a.y,0,1)}function xP(a,n,t,s){var l=null,f=null,d=s.invert((0,E.YM)(a)),m=s.invert((0,E.Z$)(a));return t&&(_b(d),_b(m)),n==="x"?(l=s.convert({x:d.x,y:0}),f=s.convert({x:m.x,y:1})):(l=s.convert({x:0,y:d.y}),f=s.convert({x:1,y:m.y})),{start:l,end:f}}var bP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return n.prototype.getRegion=function(){var t=this.context.view.getCoordinate();return xP(this.points,this.dim,this.inPlot,t)},n}(_P),SP=bP;function xb(a){var n=[];return a.length&&((0,E.S6)(a,function(t,s){s===0?n.push(["M",t.x,t.y]):n.push(["L",t.x,t.y])}),n.push(["L",a[0].x,a[0].y])),n}function eC(a){return{path:xb(a)}}var tC=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getMaskPath=function(){return xb(this.points)},n.prototype.getMaskAttrs=function(){return eC(this.points)},n.prototype.addPoint=function(){this.resize()},n}(qw),bb=tC;function Np(a){return zt(a,!0)}function Sb(a){return{path:Np(a)}}var Jh=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getMaskPath=function(){return Np(this.points)},n.prototype.getMaskAttrs=function(){return Sb(this.points)},n}(bb),FB=Jh,BB=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.maskShapes=[],t.starting=!1,t.moving=!1,t.recordPoints=null,t.preMovePoint=null,t.shapeType="path",t.maskType="multi-mask",t}return n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.emitEvent=function(t){var s="".concat(this.maskType,":").concat(t),l=this.context.view,f=this.context.event,d={type:this.shapeType,name:this.maskType,get:function(m){return d.hasOwnProperty(m)?d[m]:void 0}};l.emit(s,{target:d,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:f.x,y:f.y})},n.prototype.createMask=function(t){var s=this.context.view,l=this.recordPoints[t],f=this.getMaskAttrs(l),d=s.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,M.pi)({fill:"#C5D4EB",opacity:.3},f)});this.maskShapes.push(d)},n.prototype.getMaskPath=function(t){return[]},n.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.show()}),this.emitEvent("show"))},n.prototype.start=function(t){this.recordPointStart(),this.starting=!0,this.moving=!1;var s=this.recordPoints.length-1;this.createMask(s),this.updateShapesCapture(!1),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},n.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},n.prototype.move=function(){if(!(!this.moving||this.maskShapes.length===0)){var t=this.getCurrentPoint(),s=this.preMovePoint,l=t.x-s.x,f=t.y-s.y,d=this.getCurMaskShapeIndex();d>-1&&(this.recordPoints[d].forEach(function(m){m.x+=l,m.y+=f}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t)}},n.prototype.updateMask=function(t){var s=this;this.recordPoints.forEach(function(l,f){var d=(0,E.b$)({},s.getMaskAttrs(l),t);s.maskShapes[f].attr(d)})},n.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},n.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},n.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},n.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach(function(t){return t.hide()}),this.emitEvent("hide"))},n.prototype.remove=function(){var t=this.getCurMaskShapeIndex();t>-1&&(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},n.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach(function(t){return t.remove()}),this.maskShapes=[],this.preMovePoint=null},n.prototype.clear=function(){var t=this.getCurMaskShapeIndex();t===-1?(this.recordPointClear(),this.maskShapes.forEach(function(s){return s.remove()}),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},n.prototype.destroy=function(){this.clear(),a.prototype.destroy.call(this)},n.prototype.getRecordPoints=function(){var t;return(0,M.ev)([],(0,M.CR)((t=this.recordPoints)!==null&&t!==void 0?t:[]),!1)},n.prototype.recordPointStart=function(){var t=this.getRecordPoints(),s=this.getCurrentPoint();this.recordPoints=(0,M.ev)((0,M.ev)([],(0,M.CR)(t),!1),[[s]],!1)},n.prototype.recordPointContinue=function(){var t=this.getRecordPoints(),s=this.getCurrentPoint(),l=t.splice(-1,1)[0]||[];l.push(s),this.recordPoints=(0,M.ev)((0,M.ev)([],(0,M.CR)(t),!1),[l],!1)},n.prototype.recordPointClear=function(){this.recordPoints=[]},n.prototype.updateShapesCapture=function(t){this.maskShapes.forEach(function(s){return s.set("capture",t)})},n.prototype.getCurMaskShapeIndex=function(){var t=this.getCurrentPoint();return this.maskShapes.findIndex(function(s){var l=s.attrs,f=l.width,d=l.height,m=l.r,x=f===0||d===0||m===0;return!x&&s.isHit(t.x,t.y)})},n}(Rn),Eb=BB,NB=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.shapeType="rect",t}return n.prototype.getRegion=function(t){return mP(t)},n.prototype.getMaskAttrs=function(t){var s=this.getRegion(t),l=s.start,f=s.end;return Jw(l,f)},n}(Eb),EP=NB,wP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return n.prototype.getRegion=function(t){var s=this.context.view.getCoordinate();return xP(t,this.dim,this.inPlot,s)},n}(EP),CP=wP,zB=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.shapeType="circle",t.getMaskAttrs=Qw,t}return n}(Eb),AP=zB,UB=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.getMaskPath=xb,t.getMaskAttrs=eC,t}return n.prototype.addPoint=function(){this.resize()},n}(Eb),TP=UB,MP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.getMaskPath=Np,t.getMaskAttrs=Sb,t}return n}(TP),RP=MP,IP=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.setCursor=function(t){var s=this.context.view;s.getCanvas().setCursor(t)},n.prototype.default=function(){this.setCursor("default")},n.prototype.pointer=function(){this.setCursor("pointer")},n.prototype.move=function(){this.setCursor("move")},n.prototype.crosshair=function(){this.setCursor("crosshair")},n.prototype.wait=function(){this.setCursor("wait")},n.prototype.help=function(){this.setCursor("help")},n.prototype.text=function(){this.setCursor("text")},n.prototype.eResize=function(){this.setCursor("e-resize")},n.prototype.wResize=function(){this.setCursor("w-resize")},n.prototype.nResize=function(){this.setCursor("n-resize")},n.prototype.sResize=function(){this.setCursor("s-resize")},n.prototype.neResize=function(){this.setCursor("ne-resize")},n.prototype.nwResize=function(){this.setCursor("nw-resize")},n.prototype.seResize=function(){this.setCursor("se-resize")},n.prototype.swResize=function(){this.setCursor("sw-resize")},n.prototype.nsResize=function(){this.setCursor("ns-resize")},n.prototype.ewResize=function(){this.setCursor("ew-resize")},n.prototype.zoomIn=function(){this.setCursor("zoom-in")},n.prototype.zoomOut=function(){this.setCursor("zoom-out")},n}(Rn),ZB=IP,VB=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.filterView=function(t,s,l){var f=this;t.getScaleByField(s)&&t.filter(s,l),t.views&&t.views.length&&(0,E.S6)(t.views,function(d){f.filterView(d,s,l)})},n.prototype.filter=function(){var t=Vo(this.context);if(t){var s=this.context.view,l=t.component,f=l.get("field");if(Us(t)){if(f){var d=l.getItemsByState("unchecked"),m=Nr(s,f),x=d.map(function(U){return U.name});x.length?this.filterView(s,f,function(U){var Y=m.getText(U);return!x.includes(Y)}):this.filterView(s,f,null),s.render(!0)}}else if(Zs(t)){var A=l.getValue(),P=(0,M.CR)(A,2),L=P[0],B=P[1];this.filterView(s,f,function(U){return U>=L&&U<=B}),s.render(!0)}}},n}(Rn),HB=VB;function rC(a,n,t,s){var l=Math.min(t[n],s[n]),f=Math.max(t[n],s[n]),d=(0,M.CR)(a.range,2),m=d[0],x=d[1];if(l<m&&(l=m),f>x&&(f=x),l===x&&f===x)return null;var A=a.invert(l),P=a.invert(f);if(a.isCategory){var L=a.values.indexOf(A),B=a.values.indexOf(P),U=a.values.slice(L,B+1);return function(Y){return U.includes(Y)}}else return function(Y){return Y>=A&&Y<=P}}var Sh;(function(a){a.FILTER="brush-filter-processing",a.RESET="brush-filter-reset",a.BEFORE_FILTER="brush-filter:beforefilter",a.AFTER_FILTER="brush-filter:afterfilter",a.BEFORE_RESET="brush-filter:beforereset",a.AFTER_RESET="brush-filter:afterreset"})(Sh||(Sh={}));var jB=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return n.prototype.hasDim=function(t){return this.dims.includes(t)},n.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},n.prototype.filter=function(){var t,s;if(Js(this.context)){var l=this.context.event.target,f=l.getCanvasBBox();t={x:f.x,y:f.y},s={x:f.maxX,y:f.maxY}}else{if(!this.isStarted)return;t=this.startPoint,s=this.context.getCurrentPoint()}if(!(Math.abs(t.x-s.x)<5||Math.abs(t.x-s.y)<5)){var d=this.context,m=d.view,x=d.event,A={view:m,event:x,dims:this.dims};m.emit(Sh.BEFORE_FILTER,Ka.fromData(m,Sh.BEFORE_FILTER,A));var P=m.getCoordinate(),L=P.invert(s),B=P.invert(t);if(this.hasDim("x")){var U=m.getXScale(),Y=rC(U,"x",L,B);this.filterView(m,U.field,Y)}if(this.hasDim("y")){var se=m.getYScales()[0],Y=rC(se,"y",L,B);this.filterView(m,se.field,Y)}this.reRender(m,{source:Sh.FILTER}),m.emit(Sh.AFTER_FILTER,Ka.fromData(m,Sh.AFTER_FILTER,A))}},n.prototype.end=function(){this.isStarted=!1},n.prototype.reset=function(){var t=this.context.view;if(t.emit(Sh.BEFORE_RESET,Ka.fromData(t,Sh.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var s=t.getXScale();this.filterView(t,s.field,null)}if(this.hasDim("y")){var l=t.getYScales()[0];this.filterView(t,l.field,null)}this.reRender(t,{source:Sh.RESET}),t.emit(Sh.AFTER_RESET,Ka.fromData(t,Sh.AFTER_RESET,{}))},n.prototype.filterView=function(t,s,l){t.filter(s,l)},n.prototype.reRender=function(t,s){t.render(!0,s)},n}(Rn),$_=jB,WB=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.filterView=function(t,s,l){var f=xr(t);(0,E.S6)(f,function(d){d.filter(s,l)})},n.prototype.reRender=function(t){var s=xr(t);(0,E.S6)(s,function(l){l.render(!0)})},n}($_),wb=WB,PP=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.filter=function(){var t=Vo(this.context),s=this.context.view,l=xa(s);if(Js(this.context)){var f=ou(this.context,10);f&&(0,E.S6)(l,function(se){f.includes(se)?se.show():se.hide()})}else if(t){var d=t.component,m=d.get("field");if(Us(t)){if(m){var x=d.getItemsByState("unchecked"),A=Nr(s,m),P=x.map(function(se){return se.name});(0,E.S6)(l,function(se){var be=vu(se,m),Ee=A.getText(be);P.indexOf(Ee)>=0?se.hide():se.show()})}}else if(Zs(t)){var L=d.getValue(),B=(0,M.CR)(L,2),U=B[0],Y=B[1];(0,E.S6)(l,function(se){var be=vu(se,m);be>=U&&be<=Y?se.show():se.hide()})}}},n.prototype.clear=function(){var t=xa(this.context.view);(0,E.S6)(t,function(s){s.show()})},n.prototype.reset=function(){this.clear()},n}(Rn),OP=PP,Zv=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.byRecord=!1,t}return n.prototype.filter=function(){Js(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},n.prototype.filterByRecord=function(){var t=this.context.view,s=ou(this.context,10);if(s){var l=t.getXScale().field,f=t.getYScales()[0].field,d=s.map(function(x){return x.getModel().data}),m=xr(t);(0,E.S6)(m,function(x){var A=xa(x);(0,E.S6)(A,function(P){var L=P.getModel().data;kr(d,L,l,f)?P.show():P.hide()})})}},n.prototype.filterByBBox=function(){var t=this,s=this.context.view,l=xr(s);(0,E.S6)(l,function(f){var d=Uu(t.context,f,10),m=xa(f);d&&(0,E.S6)(m,function(x){d.includes(x)?x.show():x.hide()})})},n.prototype.reset=function(){var t=xr(this.context.view);(0,E.S6)(t,function(s){var l=xa(s);(0,E.S6)(l,function(f){f.show()})})},n}(Rn),Cb=Zv,nC=10,iC=5,kP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return n.prototype.getButtonCfg=function(){return(0,E.b$)(this.buttonCfg,this.cfg)},n.prototype.drawButton=function(){var t=this.getButtonCfg(),s=this.context.view.foregroundGroup.addGroup({name:t.name}),l=s.addShape({type:"text",name:"button-text",attrs:(0,M.pi)({text:t.text},t.textStyle)}),f=l.getBBox(),d=Vf(t.padding),m=s.addShape({type:"rect",name:"button-rect",attrs:(0,M.pi)({x:f.x-d[3],y:f.y-d[0],width:f.width+d[1]+d[3],height:f.height+d[0]+d[2]},t.style)});m.toBack(),s.on("mouseenter",function(){m.attr(t.activeStyle)}),s.on("mouseleave",function(){m.attr(t.style)}),this.buttonGroup=s},n.prototype.resetPosition=function(){var t=this.context.view,s=t.getCoordinate(),l=s.convert({x:1,y:1}),f=this.buttonGroup,d=f.getBBox(),m=no.vs(null,[["t",l.x-d.width-nC,l.y+d.height+iC]]);f.setMatrix(m)},n.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},n.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},n.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),a.prototype.destroy.call(this)},n}(Rn),LP=kP,DP=4,FP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},n.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),s=this.context.view,l=this.context.event;this.dragStart?s.emit("drag",{target:l.target,x:l.x,y:l.y}):Go(t,this.startPoint)>DP&&(s.emit("dragstart",{target:l.target,x:l.x,y:l.y}),this.dragStart=!0)}},n.prototype.end=function(){if(this.dragStart){var t=this.context.view,s=this.context.event;t.emit("dragend",{target:s.target,x:s.x,y:s.y})}this.starting=!1,this.dragStart=!1},n}(Rn),aC=FP,Ab=5,oC=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},n.prototype.move=function(){if(this.starting){var t=this.startPoint,s=this.context.getCurrentPoint(),l=Go(t,s);if(l>Ab&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var f=this.context.view,d=no.vs(this.startMatrix,[["t",s.x-t.x,s.y-t.y]]);f.backgroundGroup.setMatrix(d),f.foregroundGroup.setMatrix(d),f.middleGroup.setMatrix(d)}}},n.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},n.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},n}(Rn),BP=oC,sC="x",Tb="y",NP=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.dims=[sC,Tb],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return n.prototype.hasDim=function(t){return this.dims.includes(t)},n.prototype.getScale=function(t){var s=this.context.view;return t==="x"?s.getXScale():s.getYScales()[0]},n.prototype.resetDim=function(t){var s=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var l=this.getScale(t);s.scale(l.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},n.prototype.reset=function(){this.resetDim(sC),this.resetDim(Tb);var t=this.context.view;t.render(!0)},n}(Rn),uC=NP,Mb=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return n.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var s=this.dims;(0,E.S6)(s,function(l){var f=t.getScale(l),d=f.min,m=f.max,x=f.values;t.startCache[l]={min:d,max:m,values:x}})},n.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},n.prototype.translate=function(){var t=this;if(this.starting){var s=this.startPoint,l=this.context.view.getCoordinate(),f=this.context.getCurrentPoint(),d=l.invert(s),m=l.invert(f),x=m.x-d.x,A=m.y-d.y,P=this.context.view,L=this.dims;(0,E.S6)(L,function(B){t.translateDim(B,{x:x*-1,y:A*-1})}),P.render(!0)}},n.prototype.translateDim=function(t,s){if(this.hasDim(t)){var l=this.getScale(t);l.isLinear&&this.translateLinear(t,l,s)}},n.prototype.translateLinear=function(t,s,l){var f=this.context.view,d=this.startCache[t],m=d.min,x=d.max,A=x-m,P=l[t]*A;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:s.nice,min:m,max:x}),f.scale(s.field,{nice:!1,min:m+P,max:x+P})},n.prototype.reset=function(){a.prototype.reset.call(this),this.startPoint=null,this.starting=!1},n}(uC),lC=Mb,cC=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.zoomRatio=.05,t}return n.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},n.prototype.zoom=function(t){var s=this,l=this.dims;(0,E.S6)(l,function(f){s.zoomDim(f,t)}),this.context.view.render(!0)},n.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},n.prototype.zoomDim=function(t,s){if(this.hasDim(t)){var l=this.getScale(t);l.isLinear&&this.zoomLinear(t,l,s)}},n.prototype.zoomLinear=function(t,s,l){var f=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:s.nice,min:s.min,max:s.max});var d=this.cacheScaleDefs[t],m=d.max-d.min,x=s.min,A=s.max,P=l*m,L=x-P,B=A+P,U=B-L,Y=U/m;B>L&&Y<100&&Y>.01&&f.scale(s.field,{nice:!1,min:x-P,max:A+P})},n}(uC),Vc=cC;function zP(a){var n=a.gEvent.originalEvent;return n.deltaY>0}var UP=1,fC=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.scroll=function(t){var s=this.context,l=s.view,f=s.event;if(l.getOptions().scrollbar){var d=(t==null?void 0:t.wheelDelta)||UP,m=l.getController("scrollbar"),x=l.getXScale(),A=l.getOptions().data,P=(0,E.dp)((0,E.I)(A,x.field)),L=(0,E.dp)(x.values),B=m.getValue(),U=Math.floor((P-L)*B),Y=U+(zP(f)?d:-d),se=d/(P-L)/1e4,be=(0,E.uZ)(Y/(P-L)+se,0,1);m.setValue(be)}},n}(Rn),Fm=fC,ZP="aixs-description-tooltip",hC=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.show=function(){var t=this.context,s=Vo(t).axis,l=s.cfg.title,f=l.description,d=l.text,m=l.descriptionTooltipStyle,x=t.event,A=x.x,P=x.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:d||"",customContent:function(){return`
          <div class="`.concat(Hl,'" style={').concat(m,`}>
            <div class="`).concat(Rl,`">
              \u5B57\u6BB5\u8BF4\u660E\uFF1A`).concat(f,`
            </div>
          </div>
        `)},x:A,y:P}),this.tooltip.show()},n.prototype.destroy=function(){a.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},n.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},n.prototype.renderTooltip=function(){var t,s=this.context.view,l=s.canvas,f={start:{x:0,y:0},end:{x:l.get("width"),y:l.get("height")}},d=new jd({parent:l.get("el").parentNode,region:f,visible:!1,containerId:ZP,domStyles:(0,M.pi)({},(0,E.b$)({},(t={},t[Hl]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},t[Rl]={"word-break":"break-all","margin-bottom":"3px"},t)))});d.init(),d.setCapture(!1),this.tooltip=d},n}(Rn),Za=hC;sd("dark",Fo(Lv)),ne("canvas",Ce),ne("svg",fe),F("Polygon",z2),F("Interval",b3),F("Schema",Z2),F("Path",T_),F("Point",SB),F("Line",B2),F("Area",k2),F("Edge",v3),F("Heatmap",m3),F("Violin",H2),Oi("base",Eo),Oi("interval",q2),Oi("pie",U3),Oi("polar",Q2),Ki("overlap",ow),Ki("distribute",J2),Ki("fixed-overlap",aw),Ki("hide-overlap",tI),Ki("limit-in-shape",G3),Ki("limit-in-canvas",W3),Ki("limit-in-plot",Aw),Ki("pie-outer",H3),Ki("adjust-color",yw),Ki("interval-adjust-position",aI),Ki("interval-hide-overlap",_w),Ki("point-adjust-position",uI),Ki("pie-spider",nw),Ki("path-adjust-position",cI),ur("fade-in",Tw),ur("fade-out",Mw),ur("grow-in-x",hI),ur("grow-in-xy",Iw),ur("grow-in-y",Rw),ur("scale-in-x",vI),ur("scale-in-y",Pw),ur("wave-in",gI),ur("zoom-in",mI),ur("zoom-out",kw),ur("position-update",dI),ur("sector-path-update",Ow),ur("path-in",pI),ui("rect",iy),ui("mirror",xI),ui("list",Lw),ui("matrix",AB),ui("circle",_I),ui("tree",TB),of("axis",AI),of("legend",Pl),of("tooltip",mt),of("annotation",wI),of("slider",Om),of("scrollbar",kI),Kr("tooltip",H_),Kr("sibling-tooltip",zw),Kr("ellipsis-text",zI),Kr("element-active",VI),Kr("element-single-active",KI),Kr("element-range-active",$I),Kr("element-highlight",W_),Kr("element-highlight-by-x",tP),Kr("element-highlight-by-color",JI),Kr("element-single-highlight",gb),Kr("element-range-highlight",jw),Kr("element-sibling-highlight",jw,{effectSiblings:!0,effectByRecord:!0}),Kr("element-selected",aP),Kr("element-single-selected",sP),Kr("element-range-selected",nP),Kr("element-link-by-color",jI),Kr("active-region",FI),Kr("list-active",lP),Kr("list-selected",Xw),Kr("list-highlight",mb),Kr("list-unchecked",hP),Kr("list-checked",pP),Kr("list-focus",kB),Kr("list-radio",vP),Kr("legend-item-highlight",mb,{componentNames:["legend"]}),Kr("axis-label-highlight",mb,{componentNames:["axis"]}),Kr("axis-description",Za),Kr("rect-mask",_P),Kr("x-rect-mask",SP,{dim:"x"}),Kr("y-rect-mask",SP,{dim:"y"}),Kr("circle-mask",DB),Kr("path-mask",bb),Kr("smooth-path-mask",FB),Kr("rect-multi-mask",EP),Kr("x-rect-multi-mask",CP,{dim:"x"}),Kr("y-rect-multi-mask",CP,{dim:"y"}),Kr("circle-multi-mask",AP),Kr("path-multi-mask",TP),Kr("smooth-path-multi-mask",RP),Kr("cursor",ZB),Kr("data-filter",HB),Kr("brush",$_),Kr("brush-x",$_,{dims:["x"]}),Kr("brush-y",$_,{dims:["y"]}),Kr("sibling-filter",wb),Kr("sibling-x-filter",wb,{dims:"x"}),Kr("sibling-y-filter",wb,{dims:"y"}),Kr("element-filter",OP),Kr("element-sibling-filter",Cb),Kr("element-sibling-filter-record",Cb,{byRecord:!0}),Kr("view-drag",aC),Kr("view-move",BP),Kr("scale-translate",lC),Kr("scale-zoom",Vc),Kr("reset-button",LP,{name:"reset-button",text:"reset"}),Kr("mousewheel-scroll",Fm);function av(a){return a.isInPlot()}Fn("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),Fn("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),Fn("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),Fn("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),Fn("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),Fn("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),Fn("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),Fn("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),Fn("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),Fn("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),Fn("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),Fn("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(a){return!a.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(a){return!a.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),Fn("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:av,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:av,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:av,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),Fn("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),Fn("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:av,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:av,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:av,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),Fn("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:av,action:"path-mask:start"},{trigger:"mousedown",isEnable:av,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),Fn("brush-x-multi",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"mousedown",isEnable:av,action:["x-rect-multi-mask:start","x-rect-multi-mask:show"]},{trigger:"mask:dragstart",action:["x-rect-multi-mask:moveStart"]}],processing:[{trigger:"mousemove",isEnable:function(a){return!zu(a)},action:["x-rect-multi-mask:resize"]},{trigger:"multi-mask:change",action:"element-range-highlight:highlight"},{trigger:"mask:drag",action:["x-rect-multi-mask:move"]}],end:[{trigger:"mouseup",action:["x-rect-multi-mask:end"]},{trigger:"mask:dragend",action:["x-rect-multi-mask:moveEnd"]}],rollback:[{trigger:"dblclick",action:["x-rect-multi-mask:clear","cursor:crosshair"]},{trigger:"multi-mask:clearAll",action:["element-range-highlight:clear"]},{trigger:"multi-mask:clearSingle",action:["element-range-highlight:highlight"]}]}),Fn("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),Fn("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(a){return!a.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]}),Fn("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),Fn("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),Fn("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]}),Fn("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),Fn("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]});function pC(a){return a.gEvent.preventDefault(),a.gEvent.originalEvent.deltaY>0}Fn("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(a){return pC(a.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(a){return!pC(a.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),Fn("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]}),Fn("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});var Hc=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"],bd;(function(a){a.ERROR="error",a.WARN="warn",a.INFO="log"})(bd||(bd={}));var Rb="AntV/G2Plot";function Ib(a){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var s=0;return"".concat(Rb,": ").concat(a.replace(/%s/g,function(){return"".concat(n[s++])}))}function dC(a,n){for(var t=[],s=2;s<arguments.length;s++)t[s-2]=arguments[s];if(!a){var l=new Error(Ib.apply(void 0,__spreadArray([n],t,!1)));throw l.name=Rb,l}}function Sd(a,n,t){for(var s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];n||console[a](Ib.apply(void 0,(0,M.ev)([t],s,!1)))}function ns(a,n){var t={};return a!==null&&typeof a=="object"&&n.forEach(function(s){var l=a[s];l!==void 0&&(t[s]=l)}),t}function eu(a,n){if(!a)return{};var t=a.filter(function(f){var d=(0,E.U2)(f,[n]);return(0,E.hj)(d)&&!isNaN(d)}),s=t.every(function(f){return(0,E.U2)(f,[n])>=0}),l=t.every(function(f){return(0,E.U2)(f,[n])<=0});return s?{min:0}:l?{max:0}:{}}function Pb(a,n,t,s,l){if(l===void 0&&(l=[]),!Array.isArray(a))return{nodes:[],links:[]};var f=[],d={},m=-1;return a.forEach(function(x){var A=x[n],P=x[t],L=x[s],B=ns(x,l);d[A]||(d[A]=(0,M.pi)({id:++m,name:A},B)),d[P]||(d[P]=(0,M.pi)({id:++m,name:P},B)),f.push((0,M.pi)({source:d[A].id,target:d[P].id,value:L},B))}),{nodes:Object.values(d).sort(function(x,A){return x.id-A.id}),links:f}}function ly(a,n){var t=(0,E.hX)(a,function(s){var l=s[n];return l===null||typeof l=="number"&&!isNaN(l)});return Sd(bd.WARN,t.length===a.length,"illegal data existed in chart data."),t}var GB=5,vC={}.toString,Ob=function(a,n){return vC.call(a)==="[object "+n+"]"},$B=function(a){return Ob(a,"Array")},X_=function(a){return typeof a=="object"&&a!==null},VP=function(a){if(!X_(a)||!Ob(a,"Object"))return!1;for(var n=a;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(a)===n},Ol=function(a,n,t,s){t=t||0,s=s||GB;for(var l in n)if(Object.prototype.hasOwnProperty.call(n,l)){var f=n[l];f?VP(f)?(VP(a[l])||(a[l]={}),t<s?Ol(a[l],f,t+1,s):a[l]=n[l]):$B(f)?(a[l]=[],a[l]=a[l].concat(f)):a[l]=f:a[l]=f}},hn=function(a){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var s=0;s<n.length;s+=1)Ol(a,n[s]);return a};function Vv(a){if(!a)return{width:0,height:0};var n=getComputedStyle(a);return{width:(a.clientWidth||parseInt(n.width,10))-parseInt(n.paddingLeft,10)-parseInt(n.paddingRight,10),height:(a.clientHeight||parseInt(n.height,10))-parseInt(n.paddingTop,10)-parseInt(n.paddingBottom,10)}}function Fa(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];return function(t){return a.reduce(function(s,l){return l(s)},t)}}function el(a,n){return a.geometries.find(function(t){return t.type===n})}function ov(a){return(0,E.u4)(a.geometries,function(n,t){return n.concat(t.elements)},[])}function Zg(a){return(0,E.U2)(a,["views","length"],0)<=0?ov(a):(0,E.u4)(a.views,function(n,t){return n.concat(Zg(t))},ov(a))}function XB(a){return(0,E.U2)(a,["views","length"],0)<=0?a.geometries:(0,E.u4)(a.views,function(n,t){return n.concat(t.geometries)},a.geometries)}function uc(a){if(!(0,E.P9)(a,"Object"))return a;var n=(0,M.pi)({},a);return n.formatter&&!n.content&&(n.content=n.formatter),n}var Ja;function YB(){return Ja||(Ja=document.createElement("canvas").getContext("2d")),Ja}var f8=(0,E.HP)(function(a,n){n===void 0&&(n={});var t=n.fontSize,s=n.fontFamily,l=s===void 0?"sans-serif":s,f=n.fontWeight,d=n.fontStyle,m=n.fontVariant,x=YB();x.font=[d,f,m,"".concat(t,"px"),l].join(" ");var A=x.measureText((0,E.HD)(a)?a:"");return A.width},function(a,n){return n===void 0&&(n={}),(0,M.ev)([a],(0,E.VO)(n),!0).join("")});function Hv(a){return typeof a=="number"&&!isNaN(a)}function HP(a,n,t){var s=Math.min(n,t),l=Math.max(n,t);return a>=s&&a<=l}function lc(a){if((0,E.hj)(a))return[a,a,a,a];if((0,E.kJ)(a)){var n=a.length;if(n===1)return[a[0],a[0],a[0],a[0]];if(n===2)return[a[0],a[1],a[0],a[1]];if(n===3)return[a[0],a[1],a[2],a[1]];if(n===4)return a}return[0,0,0,0]}function jv(a,n,t){n===void 0&&(n="bottom"),t===void 0&&(t=25);var s=lc(a),l=[n.startsWith("top")?t:0,n.startsWith("right")?t:0,n.startsWith("bottom")?t:0,n.startsWith("left")?t:0];return[s[0]+l[0],s[1]+l[1],s[2]+l[2],s[3]+l[3]]}function Vg(a){var n=a.map(function(s){return lc(s)}),t=[0,0,0,0];return n.length>0&&(t=t.map(function(s,l){return n.forEach(function(f,d){s+=n[d][l]}),s})),t}function cy(a,n){var t=[];if(a.length){t.push(["M",a[0].x,a[0].y]);for(var s=1,l=a.length;s<l;s+=1){var f=a[s];t.push(["L",f.x,f.y])}n&&t.push(["Z"])}return t}var kb=function(a,n,t,s){var l=[],f,d,m=!!s,x,A;if(m){x=[1/0,1/0],A=[-1/0,-1/0];for(var P=0,L=a.length;P<L;P++){var B=a[P];x=Ea.VV([0,0],x,B),A=Ea.Fp([0,0],A,B)}x=Ea.VV([0,0],x,s[0]),A=Ea.Fp([0,0],A,s[1])}for(var P=0,U=a.length;P<U;P++){var B=a[P];if(t)f=a[P?P-1:U-1],d=a[(P+1)%U];else if(P===0||P===U-1){l.push(B);continue}else f=a[P-1],d=a[P+1];var Y=[0,0];Y=Ea.lu(Y,d,f),Y=Ea.bA(Y,Y,n);var se=Ea.TE(B,f),be=Ea.TE(B,d),Ee=se+be;Ee!==0&&(se/=Ee,be/=Ee);var it=Ea.bA([0,0],Y,-se),gt=Ea.bA([0,0],Y,be),xt=Ea.IH([0,0],B,it),Bt=Ea.IH([0,0],B,gt);m&&(xt=Ea.Fp([0,0],xt,x),xt=Ea.VV([0,0],xt,A),Bt=Ea.Fp([0,0],Bt,x),Bt=Ea.VV([0,0],Bt,A)),l.push(xt),l.push(Bt)}return t&&l.push(l.shift()),l};function gC(a,n,t){for(var s=!!n,l=[],f=0,d=a.length;f<d;f+=2)l.push([a[f],a[f+1]]);for(var m=kb(l,.4,s,t),x=l.length,A=[],P,L,B,f=0;f<x-1;f++)P=m[f*2],L=m[f*2+1],B=l[f+1],A.push(["C",P[0],P[1],L[0],L[1],B[0],B[1]]);return s&&(P=m[x],L=m[x+1],B=l[0],A.push(["C",P[0],P[1],L[0],L[1],B[0],B[1]])),A}function mC(a,n,t){var s=[],l=a[0],f=null;if(a.length<=2)return cy(a,n);for(var d=0,m=a.length;d<m;d++){var x=a[d];(!f||!(f.x===x.x&&f.y===x.y))&&(s.push(x.x),s.push(x.y),f=x)}var A=t||[[0,0],[1,1]],P=gC(s,n,A);return P.unshift(["M",l.x,l.y]),P}function Lb(a){if(!a)return a;var n=a.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return n.map(function(t){return t.toLowerCase()}).join("-")}function Db(a){var n={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},t=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];(0,E.U2)(a,"fill")&&(n.color=a.fill);var s=ns(a,t),l=s.shadowColor,f=s.shadowBlur,d=f===void 0?0:f,m=s.shadowOffsetX,x=m===void 0?0:m,A=s.shadowOffsetY,P=A===void 0?0:A;n["text-shadow"]="".concat([l,"".concat(x,"px"),"".concat(P,"px"),"".concat(d,"px")].join(" "));var L=ns(a,t),B=L.stroke,U=L.lineWidth,Y=U===void 0?0:U;return n["-webkit-text-stroke"]="".concat(["".concat(Y,"px"),B].join(" ")),(0,E.S6)(a,function(se,be){["fontSize"].includes(be)&&(0,E.hj)(se)?n[Lb(be)]="".concat(se,"px"):be&&!t.includes(be)&&(n[Lb(be)]="".concat(se))}),n}function Y_(a,n){a.style["pointer-events"]="none",(0,E.S6)(n,function(t,s){s&&t&&(a.style[s]=t)})}var Hg=function(a,n,t){var s=n.statistic,l=n.plotType,f=s.title,d=s.content;[f,d].forEach(function(m,x){if(m){var A="";x===0?A=d?"translate(-50%, -100%)":"translate(-50%, -50%)":A=f?"translate(-50%, 0)":"translate(-50%, -50%)";var P=(0,E.mf)(m.style)?m.style(t):m.style;a.annotation().html((0,M.pi)({position:["50%","50%"],html:function(L,B){var U=B.getCoordinate(),Y=0;if(l==="pie"||l==="ring-progress")Y=U.getRadius()*U.innerRadius*2;else if(l==="liquid"){var se=(0,E.U2)(B.geometries,[0,"elements",0,"shape"]);if(se){var be=se.find(function(xt){return xt.get("name")==="wrap"}),Ee=be.getCanvasBBox().width;Y=Ee}}else Y||(Y=U.getWidth());Y_(L,(0,M.pi)({width:"".concat(Y,"px"),transform:A},Db(P)));var it=B.getData();if(m.customHtml)return m.customHtml(L,B,t,it);var gt=m.content;return m.formatter&&(gt=m.formatter(t,it)),gt?(0,E.HD)(gt)?gt:"".concat(gt):"<div></div>"},key:"".concat(x===0?"top":"bottom","-statistic")},ns(m,["offsetX","offsetY","rotate","style","formatter"])))}})},K_=function(a,n,t){var s=n.statistic,l=s.title,f=s.content;[l,f].forEach(function(d){if(d){var m=(0,E.mf)(d.style)?d.style(t):d.style;a.annotation().html((0,M.pi)({position:["50%","100%"],html:function(x,A){var P=A.getCoordinate(),L=A.views[0].getCoordinate(),B=L.getCenter(),U=L.getRadius(),Y=Math.max(Math.sin(L.startAngle),Math.sin(L.endAngle))*U,se=B.y+Y-P.y.start-parseFloat((0,E.U2)(m,"fontSize",0)),be=P.getRadius()*P.innerRadius*2;Y_(x,(0,M.pi)({width:"".concat(be,"px"),transform:"translate(-50%, ".concat(se,"px)")},Db(m)));var Ee=A.getData();if(d.customHtml)return d.customHtml(x,A,t,Ee);var it=d.content;return d.formatter&&(it=d.formatter(t,Ee)),it?(0,E.HD)(it)?it:"".concat(it):"<div></div>"}},ns(d,["offsetX","offsetY","rotate","style","formatter"])))}})};function Fb(a,n){return n?(0,E.u4)(n,function(t,s,l){return t.replace(new RegExp("{\\s*".concat(l,"\\s*}"),"g"),s)},a):a}function xo(a,n){return a.views.find(function(t){return t.id===n})}function fy(a){var n=a.parent;return n?n.views:[]}function yC(a){return fy(a).filter(function(n){return n!==a})}function q_(a,n,t){t===void 0&&(t=a.geometries),typeof n=="boolean"?a.animate(n):a.animate(!0),(0,E.S6)(t,function(s){var l;(0,E.mf)(n)?l=n(s.type||s.shapeType,s)||!0:l=n,s.animate(l)})}function Q_(){return typeof window=="object"?window==null?void 0:window.devicePixelRatio:2}function _C(a,n){n===void 0&&(n=a);var t=document.createElement("canvas"),s=Q_();t.width=a*s,t.height=n*s,t.style.width="".concat(a,"px"),t.style.height="".concat(n,"px");var l=t.getContext("2d");return l.scale(s,s),t}function J_(a,n,t,s){s===void 0&&(s=t);var l=n.backgroundColor,f=n.opacity;a.globalAlpha=f,a.fillStyle=l,a.beginPath(),a.fillRect(0,0,t,s),a.closePath()}function jg(a,n,t){var s=a+n;return t?s*2:s}function xC(a,n){var t=n?[[a*.25,a*.25],[a*.75,a*.75]]:[[a*.5,a*.5]];return t}function Bb(a,n){var t=n*Math.PI/180,s={a:Math.cos(t)*(1/a),b:Math.sin(t)*(1/a),c:-Math.sin(t)*(1/a),d:Math.cos(t)*(1/a),e:0,f:0};return s}var Nb={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function jP(a,n,t,s){var l=n.size,f=n.fill,d=n.lineWidth,m=n.stroke,x=n.fillOpacity;a.beginPath(),a.globalAlpha=x,a.fillStyle=f,a.strokeStyle=m,a.lineWidth=d,a.arc(t,s,l/2,0,2*Math.PI,!1),a.fill(),d&&a.stroke(),a.closePath()}function WP(a){var n=hn({},Nb,a),t=n.size,s=n.padding,l=n.isStagger,f=n.rotation,d=jg(t,s,l),m=xC(d,l),x=_C(d,d),A=x.getContext("2d");J_(A,n,d);for(var P=0,L=m;P<L.length;P++){var B=L[P],U=B[0],Y=B[1];jP(A,n,U,Y)}var se=A.createPattern(x,"repeat");if(se){var be=Q_(),Ee=Bb(be,f);se.setTransform(Ee)}return se}var bC={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function KB(a,n,t){var s=n.stroke,l=n.lineWidth,f=n.strokeOpacity,d=new Path2D(t);a.globalAlpha=f,a.lineCap="square",a.strokeStyle=l?s:"transparent",a.lineWidth=l,a.stroke(d)}function e1(a){var n=hn({},bC,a),t=n.spacing,s=n.rotation,l=n.lineWidth,f=t+l||1,d=t+l||1,m=`
            M 0 0 L `.concat(f,` 0
            M 0 `).concat(d," L ").concat(f," ").concat(d,`
            `),x=_C(f,d),A=x.getContext("2d");J_(A,n,f,d),KB(A,n,m);var P=A.createPattern(x,"repeat");if(P){var L=Q_(),B=Bb(L,s);P.setTransform(B)}return P}var zb={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function qB(a,n,t,s){var l=n.stroke,f=n.size,d=n.fill,m=n.lineWidth,x=n.fillOpacity;a.globalAlpha=x,a.strokeStyle=l,a.lineWidth=m,a.fillStyle=d,a.strokeRect(t-f/2,s-f/2,f,f),a.fillRect(t-f/2,s-f/2,f,f)}function GP(a){var n=hn({},zb,a),t=n.size,s=n.padding,l=n.isStagger,f=n.rotation,d=jg(t,s,l),m=xC(d,l),x=_C(d,d),A=x.getContext("2d");J_(A,n,d);for(var P=0,L=m;P<L.length;P++){var B=L[P],U=B[0],Y=B[1];qB(A,n,U,Y)}var se=A.createPattern(x,"repeat");if(se){var be=Q_(),Ee=Bb(be,f);se.setTransform(Ee)}return se}function QB(a){var n=a.type,t=a.cfg,s;switch(n){case"dot":s=WP(t);break;case"line":s=e1(t);break;case"square":s=GP(t);break;default:break}return s}function Eh(a){var n=this;return function(t){var s,l=t.options,f=t.chart,d=l.pattern;if(!d)return t;var m=function(x){for(var A,P,L,B=[],U=1;U<arguments.length;U++)B[U-1]=arguments[U];var Y=f.getTheme().defaultColor,se=Y,be=(P=(A=f.geometries)===null||A===void 0?void 0:A[0])===null||P===void 0?void 0:P.getAttribute("color");if(be){var Ee=be.getFields()[0],it=(0,E.U2)(x,Ee);se=sc.getMappingValue(be,it,((L=be.values)===null||L===void 0?void 0:L[0])||Y)}var gt=d;typeof d=="function"&&(gt=d.call(n,x,se)),gt instanceof CanvasPattern||(gt=QB(hn({},{cfg:{backgroundColor:se}},gt)));var xt=l[a];return(0,M.pi)((0,M.pi)({},typeof xt=="function"?xt.call.apply(xt,(0,M.ev)([n,x],B,!1)):xt||{}),{fill:gt||se})};return hn({},t,{options:(s={},s[a]=m,s)})}}function Bm(a){var n=a.chart,t=a.options,s=t.legend,l=t.colorField,f=t.seriesField;return s===!1?n.legend(!1):(l||f)&&n.legend(l||f,s),a}function kl(a){var n=a.chart,t=a.options,s=t.tooltip;return s!==void 0&&n.tooltip(s),a}function js(a){var n=a.chart,t=a.options,s=t.interactions;return(0,E.S6)(s,function(l){l.enable===!1?n.removeInteraction(l.type):n.interaction(l.type,l.cfg||{})}),a}function ws(a){var n=a.chart,t=a.options,s=t.animation;return q_(n,s),a}function Ko(a){var n=a.chart,t=a.options,s=t.theme;return s&&n.theme(s),a}function Wv(a){var n=a.chart,t=a.options,s=t.state;return s&&(0,E.S6)(n.geometries,function(l){l.state(s)}),a}function hy(a){var n=a.chart,t=a.options,s=t.slider;return n.option("slider",s),a}function Ub(a){var n=a.chart,t=a.options,s=t.scrollbar;return n.option("scrollbar",s),a}function Vu(a,n){return function(t){var s=t.chart,l=t.options,f={};return(0,E.S6)(a,function(d,m){f[m]=ns(d,Hc)}),f=hn({},n,l.meta,f),s.scale(f),t}}function bu(a){return function(n){var t=n.chart,s=n.options,l=t.getController("annotation");return(0,E.S6)((0,M.ev)((0,M.ev)([],s.annotations||[],!0),a||[],!0),function(f){l.annotation(f)}),n}}function Nm(a){var n=a.chart,t=a.options,s=t.yAxis,l=t.limitInPlot,f=l;return(0,E.Kn)(s)&&(0,E.UM)(l)&&(Object.values(ns(s,["min","max","minLimit","maxLimit"])).some(function(d){return!(0,E.UM)(d)})?f=!0:f=!1),n.limitInPlot=f,a}function SC(a){return a===void 0&&(a="rect"),function(n){var t=n.chart,s=n.options,l=s.coordinate,f=Array.from(l||[]).map(function(d){return d.type==="reflectX"?["reflect","x"]:d.type==="reflectY"?["reflect","y"]:d.type==="transpose"?["transpose"]:null}).filter(function(d){return!!d});return f.length!==0&&t.coordinate({type:a,actions:f}),n}}var EC={locale:"en-US"};function JB(a){each(a,function(n,t){return EC[t]=n})}var t1={};function wC(a,n){t1[a]=n}function r1(a){return{get:function(n,t){return Fb((0,E.U2)(t1[a],n)||(0,E.U2)(t1[EC.locale],n)||(0,E.U2)(t1["en-US"],n)||n,t)}}}var CC={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},AC={locale:"zh-CN",general:{increase:"\u589E\u52A0",decrease:"\u51CF\u5C11",root:"\u521D\u59CB"},statistic:{total:"\u603B\u8BA1"},conversionTag:{label:"\u8F6C\u5316\u7387"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"\u603B\u8BA1"}};function Hu(a,n){if(a===!1)return{fields:!1};var t=(0,E.U2)(a,"fields"),s=(0,E.U2)(a,"formatter");return s&&!t&&(t=n),{fields:t,formatter:s}}function n1(a,n){var t=a.type,s=a.xField,l=a.yField,f=a.colorField,d=a.shapeField,m=a.sizeField,x=a.styleField,A=a.rawFields,P=[];if(A=((0,E.mf)(A)?A(t,n):A)||[],n==="color")P=(0,M.ev)([f||s],A,!0);else if(n==="shape")P=(0,M.ev)([d||s],A,!0);else if(n==="size")P=(0,M.ev)([m||s],A,!0);else{P=(0,M.ev)([s,l,f,d,m,x],A,!0);var L=["x","y","color","shape","size","style"].indexOf(n),B=P[L];P.splice(L,1),P.unshift(B)}var U=(0,E.jj)(P.filter(function(se){return!!se})),Y=t==="line"&&[s,l].includes(U.join("*"))?"":U.join("*");return{mappingFields:U,tileMappingField:Y}}function zm(a,n){if(n)return function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l={};return a.forEach(function(f,d){l[f]=t[d]}),delete l.undefined,n(l)}}function Yf(a){var n=a.chart,t=a.options,s=t.type,l=t.args,f=t.mapping,d=t.xField,m=t.yField,x=t.colorField,A=t.shapeField,P=t.sizeField,L=t.tooltipFields,B=t.label,U=t.state,Y=t.customInfo;if(!f)return a;var se=f.color,be=f.shape,Ee=f.size,it=f.style,gt=f.tooltip,xt=n[s](l).position("".concat(d,"*").concat(m));if((0,E.HD)(se))x?xt.color(x,se):xt.color(se);else if((0,E.mf)(se)){var Bt=n1(t,"color"),_r=Bt.mappingFields,Or=Bt.tileMappingField;xt.color(Or,zm(_r,se))}else x&&xt.color(x,se);if((0,E.HD)(be))A?xt.shape(A,[be]):xt.shape(be);else if((0,E.mf)(be)){var Gr=n1(t,"shape"),_r=Gr.mappingFields,Or=Gr.tileMappingField;xt.shape(Or,zm(_r,be))}else A&&xt.shape(A,be);if((0,E.hj)(Ee))P?xt.size(P,Ee):xt.size(Ee);else if((0,E.mf)(Ee)){var mn=n1(t,"size"),_r=mn.mappingFields,Or=mn.tileMappingField;xt.size(Or,zm(_r,Ee))}else P&&xt.size(P,Ee);if((0,E.mf)(it)){var cn=n1(t,"style"),_r=cn.mappingFields,Or=cn.tileMappingField;xt.style(Or,zm(_r,it))}else(0,E.Kn)(it)&&xt.style(it);if(L===!1?xt.tooltip(!1):(0,E.xb)(L)||xt.tooltip(L.join("*"),zm(L,gt)),B===!1)xt.label(!1);else if(B){var Nn=B.callback,hi=B.fields,Wi=(0,M._T)(B,["callback","fields"]);xt.label({fields:hi||[m],callback:Nn,cfg:uc(Wi)})}return U&&xt.state(U),Y&&xt.customInfo(Y),[d,m].filter(function(bi){return bi!==x}).forEach(function(bi){n.legend(bi,!1)}),(0,M.pi)((0,M.pi)({},a),{ext:{geometry:xt}})}function i1(a){var n=a.options,t=n.area,s=n.xField,l=n.yField,f=n.seriesField,d=n.smooth,m=n.tooltip,x=n.useDeferredLabel,A=Hu(m,[s,l,f]),P=A.fields,L=A.formatter;return t?Yf(hn({},a,{options:{type:"area",colorField:f,tooltipFields:P,mapping:(0,E.b$)({shape:d?"smooth":"area",tooltip:L},t),args:{useDeferredLabel:x}}})):a}function TC(a){var n=a.options,t=n.edge,s=n.xField,l=n.yField,f=n.seriesField,d=n.tooltip,m=n.useDeferredLabel,x=Hu(d,[s,l,f]),A=x.fields,P=x.formatter;return t?Yf(hn({},a,{options:{type:"edge",colorField:f,tooltipFields:A,mapping:(0,M.pi)({tooltip:P},t),args:{useDeferredLabel:m}}})):a}function $P(a){var n=a.chart,t=a.options,s=a.ext,l=t.seriesField,f=t.isGroup,d=t.isStack,m=t.marginRatio,x=t.widthRatio,A=t.groupField,P=t.theme,L=[];if(l&&(f&&L.push({type:"dodge",dodgeBy:A||l,marginRatio:m}),d&&L.push({type:"stack",marginRatio:m})),L.length&&(s!=null&&s.geometry)){var B=s==null?void 0:s.geometry;B.adjust(L)}return(0,E.UM)(x)||n.theme(hn({},(0,E.Kn)(P)?P:od(P),{columnWidthRatio:x})),a}function jc(a){var n=a.options,t=n.xField,s=n.yField,l=n.interval,f=n.seriesField,d=n.tooltip,m=n.minColumnWidth,x=n.maxColumnWidth,A=n.columnBackground,P=n.dodgePadding,L=n.intervalPadding,B=n.useDeferredLabel,U=Hu(d,[t,s,f]),Y=U.fields,se=U.formatter,be=(l?Yf(hn({},a,{options:{type:"interval",colorField:f,tooltipFields:Y,mapping:(0,M.pi)({tooltip:se},l),args:{dodgePadding:P,intervalPadding:L,minColumnWidth:m,maxColumnWidth:x,background:A,useDeferredLabel:B}}})):a).ext;return $P((0,M.pi)((0,M.pi)({},a),{ext:be}))}function Wg(a){var n=a.options,t=n.line,s=n.stepType,l=n.xField,f=n.yField,d=n.seriesField,m=n.smooth,x=n.connectNulls,A=n.tooltip,P=n.useDeferredLabel,L=Hu(A,[l,f,d]),B=L.fields,U=L.formatter;return t?Yf(hn({},a,{options:{type:"line",colorField:d,tooltipFields:B,mapping:(0,E.b$)({shape:s||(m?"smooth":"line"),tooltip:U},t),args:{connectNulls:x,useDeferredLabel:P}}})):a}function wh(a){var n=a.options,t=n.point,s=n.xField,l=n.yField,f=n.seriesField,d=n.sizeField,m=n.shapeField,x=n.tooltip,A=n.useDeferredLabel,P=Hu(x,[s,l,f,d,m]),L=P.fields,B=P.formatter;return t?Yf(hn({},a,{options:{type:"point",colorField:f,shapeField:m,tooltipFields:L,mapping:(0,M.pi)({tooltip:B},t),args:{useDeferredLabel:A}}})):a}function a1(a){var n=a.options,t=n.polygon,s=n.xField,l=n.yField,f=n.seriesField,d=n.tooltip,m=n.useDeferredLabel,x=Hu(d,[s,l,f]),A=x.fields,P=x.formatter;return t?Yf(hn({},a,{options:{type:"polygon",colorField:f,tooltipFields:A,mapping:(0,M.pi)({tooltip:P},t),args:{useDeferredLabel:m}}})):a}function Zb(a){var n=a.options,t=n.schema,s=n.xField,l=n.yField,f=n.seriesField,d=n.tooltip,m=n.useDeferredLabel,x=Hu(d,[s,l,f]),A=x.fields,P=x.formatter;return t?Yf(hn({},a,{options:{type:"schema",colorField:f,tooltipFields:A,mapping:(0,M.pi)({tooltip:P},t),args:{useDeferredLabel:m}}})):a}function MC(a){var n=a.options,t=n.violin,s=n.xField,l=n.yField,f=n.seriesField,d=n.sizeField,m=n.tooltip,x=Hu(m,[s,l,f,d]),A=x.fields,P=x.formatter;return t?Yf(hn({},a,{options:{type:"violin",colorField:f,tooltipFields:A,mapping:(0,M.pi)({tooltip:P},t)}})):a}var XP=k(18587),RC="data-chart-source-type",IC=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],so=function(a){(0,M.ZT)(n,a);function n(t,s){var l=a.call(this)||this;return l.container=typeof t=="string"?document.getElementById(t):t,l.options=hn({},l.getDefaultOptions(),s),l.createG2(),l.bindEvents(),l}return n.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},n.prototype.createG2=function(){var t=this.options,s=t.width,l=t.height,f=t.defaultInteractions;this.chart=new ue((0,M.pi)((0,M.pi)((0,M.pi)((0,M.pi)({container:this.container,autoFit:!1},this.getChartSize(s,l)),{localRefresh:!1}),ns(this.options,IC)),{defaultInteractions:f})),this.container.setAttribute(RC,"G2Plot")},n.prototype.getChartSize=function(t,s){var l=Vv(this.container);return{width:t||l.width||400,height:s||l.height||400}},n.prototype.bindEvents=function(){var t=this;this.chart&&this.chart.on("*",function(s){s!=null&&s.type&&t.emit(s.type,s)})},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},n.prototype.update=function(t){this.updateOption(t),this.render()},n.prototype.updateOption=function(t){this.options=hn({},this.options,t)},n.prototype.setState=function(t,s,l){l===void 0&&(l=!0);var f=Zg(this.chart);(0,E.S6)(f,function(d){s(d.getData())&&d.setState(t,l)})},n.prototype.getStates=function(){var t=Zg(this.chart),s=[];return(0,E.S6)(t,function(l){var f=l.getData(),d=l.getStates();(0,E.S6)(d,function(m){s.push({data:f,state:m,geometry:l.geometry,element:l})})}),s},n.prototype.changeData=function(t){this.update({data:t})},n.prototype.changeSize=function(t,s){this.chart.changeSize(t,s)},n.prototype.addAnnotations=function(t,s){s=s||this.chart;var l=(0,M.ev)([],t,!0),f=s.getController("annotation"),d=f.getComponents().map(function(A){return A.extra});f.clear(!0);for(var m=function(A){var P=d[A],L=l.findIndex(function(B){return B.id&&B.id===P.id});L!==-1&&(P=hn({},P,l[L]),l.splice(L,1)),f.annotation(P)},x=0;x<d.length;x++)m(x);l.forEach(function(A){return f.annotation(A)}),s.render(!0)},n.prototype.removeAnnotations=function(t){var s=this.chart.getController("annotation"),l=s.getComponents().map(function(m){return m.extra});s.clear(!0);for(var f=function(m){var x=l[m];t.find(function(A){return A.id&&A.id===x.id})||s.annotation(x)},d=0;d<l.length;d++)f(d);this.chart.render(!0)},n.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(RC)},n.prototype.execAdaptor=function(){var t=this.getSchemaAdaptor(),s=this.options,l=s.padding,f=s.appendPadding;this.chart.padding=l,this.chart.appendPadding=f,t({chart:this.chart,options:this.options})},n.prototype.triggerResize=function(){this.chart.forceFit()},n.prototype.bindSizeSensor=function(){var t=this;if(!this.unbind){var s=this.options.autoFit,l=s===void 0?!0:s;l&&(this.unbind=(0,XP.ak)(this.container,function(){var f=Vv(t.container),d=f.width,m=f.height;(d!==t.chart.width||m!==t.chart.height)&&t.triggerResize()}))}},n.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},n}(rt.Z);function PC(a,n,t,s){var l=(0,E.u4)(a,function(f,d){var m=d[t],x=f.has(m)?f.get(m):0,A=d[n];return x=Hv(A)?x+A:x,f.set(m,x),f},new Map);return(0,E.UI)(a,function(f){var d,m=f[n],x=f[t],A=Hv(m)&&l.get(x)!==0?m/l.get(x):0;return(0,M.pi)((0,M.pi)({},f),(d={},d[s]=A,d))})}function YP(a,n,t,s){var l=(0,E.u4)(a,function(f,d){var m=(0,E.u4)(t,function(P,L){return"".concat(P).concat(d[L])},""),x=f.has(m)?f.get(m):0,A=d[n];return x=Hv(A)?x+A:x,f.set(m,x),f},new Map);return(0,E.UI)(a,function(f){var d,m=f[n],x=(0,E.u4)(t,function(P,L){return"".concat(P).concat(f[L])},""),A=Hv(m)&&l.get(x)!==0?m/l.get(x):0;return(0,M.pi)((0,M.pi)({},f),(d={},d[s]=A,d))})}function py(a,n,t,s,l){return l?PC(a,n,t,s):a}function KP(a){var n=a.chart,t=a.options,s=t.data,l=t.color,f=t.lineStyle,d=t.lineShape,m=t.point,x=t.area,A=t.seriesField,P=m==null?void 0:m.state,L=x==null?void 0:x.state;n.data(s);var B=hn({},a,{options:{shapeField:A,line:{color:l,style:f,shape:d},point:m&&(0,M.pi)({color:l,shape:"circle"},m),area:x&&(0,M.pi)({color:l},x),label:void 0}}),U=hn({},B,{options:{tooltip:!1,state:P}}),Y=hn({},B,{options:{tooltip:!1,state:L}});return Wg(B),wh(U),i1(Y),a}function o1(a){var n,t,s=a.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.data;return Fa(Vu((n={},n[d]=l,n[m]=f,n),(t={},t[d]={type:"cat"},t[m]=eu(x,m),t)))(a)}function qP(a){var n=a.chart,t=a.options,s=t.reflect;if(s){var l=s;(0,E.kJ)(l)||(l=[l]);var f=l.map(function(d){return["reflect",d]});n.coordinate({type:"rect",actions:f})}return a}function OC(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(d,!1):n.axis(d,l),a}function QP(a){var n=a.chart,t=a.options,s=t.legend,l=t.seriesField;return s&&l?n.legend(l,s):s===!1&&n.legend(!1),a}function kC(a){var n=a.chart,t=a.options,s=t.label,l=t.yField,f=el(n,"line");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,M.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},uc(m))})}return a}function JP(a){var n=a.chart,t=a.options,s=t.isStack;return s&&(0,E.S6)(n.geometries,function(l){l.adjust("stack")}),a}function s1(a){return Fa(KP,o1,JP,Ko,qP,OC,QP,kl,kC,hy,Ub,js,ws,bu(),Nm)(a)}function e4(a){var n=a.chart,t=a.options,s=t.data,l=t.areaStyle,f=t.areaShape,d=t.color,m=t.point,x=t.line,A=t.isPercent,P=t.xField,L=t.yField,B=t.tooltip,U=t.seriesField,Y=t.startOnZero,se=m==null?void 0:m.state,be=py(s,L,P,L,A);n.data(be);var Ee=A?(0,M.pi)({formatter:function(Bt){return{name:Bt[U]||Bt[P],value:(Number(Bt[L])*100).toFixed(2)+"%"}}},B):B,it=hn({},a,{options:{area:{color:d,style:l,shape:f},point:m&&(0,M.pi)({color:d},m),tooltip:Ee,label:void 0,args:{startOnZero:Y}}}),gt={chart:n,options:hn({line:{size:2}},(0,E.CE)(t,["state"]),{line:x&&(0,M.pi)({color:d},x),sizeField:U,state:x==null?void 0:x.state,tooltip:!1,label:void 0,args:{startOnZero:Y}})},xt=hn({},it,{options:{tooltip:!1,state:se}});return i1(it),Wg(gt),wh(xt),a}function eO(a){var n=a.chart,t=a.options,s=t.label,l=t.yField,f=el(n,"area");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,M.pi)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},uc(m))})}return a}function tO(a){var n=a.chart,t=a.options,s=t.isStack,l=t.isPercent,f=t.seriesField;return(l||s)&&f&&(0,E.S6)(n.geometries,function(d){d.adjust("stack")}),a}function LC(a){return Fa(Ko,Eh("areaStyle"),SC("rect"),e4,o1,tO,OC,QP,kl,eO,hy,bu(),js,ws,Nm)(a)}var rO=hn({},so.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),t4=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="area",t}return n.getDefaultOptions=function(){return rO},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.isPercent,f=s.xField,d=s.yField,m=this,x=m.chart,A=m.options;o1({chart:x,options:A}),this.chart.changeData(py(t,d,f,d,l))},n.prototype.getSchemaAdaptor=function(){return LC},n}(so),DC=10,nO=5,iO={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},aO=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg=(0,M.pi)({name:"button"},iO),t}return n.prototype.getButtonCfg=function(){var t=this.context.view,s=(0,E.U2)(t,["interactions","filter-action","cfg","buttonConfig"]);return hn(this.buttonCfg,s,this.cfg)},n.prototype.drawButton=function(){var t=this.getButtonCfg(),s=this.context.view.foregroundGroup.addGroup({name:t.name}),l=this.drawText(s);this.drawBackground(s,l.getBBox()),this.buttonGroup=s},n.prototype.drawText=function(t){var s,l=this.getButtonCfg();return t.addShape({type:"text",name:"button-text",attrs:(0,M.pi)({text:l.text},(s=l.textStyle)===null||s===void 0?void 0:s.default)})},n.prototype.drawBackground=function(t,s){var l,f=this.getButtonCfg(),d=lc(f.padding),m=t.addShape({type:"rect",name:"button-rect",attrs:(0,M.pi)({x:s.x-d[3],y:s.y-d[0],width:s.width+d[1]+d[3],height:s.height+d[0]+d[2]},(l=f.buttonStyle)===null||l===void 0?void 0:l.default)});return m.toBack(),t.on("mouseenter",function(){var x;m.attr((x=f.buttonStyle)===null||x===void 0?void 0:x.active)}),t.on("mouseleave",function(){var x;m.attr((x=f.buttonStyle)===null||x===void 0?void 0:x.default)}),m},n.prototype.resetPosition=function(){var t=this.context.view,s=t.getCoordinate(),l=s.convert({x:1,y:1}),f=this.buttonGroup,d=f.getBBox(),m=sc.transform(null,[["t",l.x-d.width-DC,l.y+d.height+nO]]);f.setMatrix(m)},n.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},n.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},n.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),a.prototype.destroy.call(this)},n}(Rn);Kr("brush-reset-button",aO,{name:"brush-reset-button"}),Fn("filter-action",{});function sv(a){return a.isInPlot()}function Um(a,n,t){var s=t||{},l=s.mask,f=s.isStartEnable,d=n||"rect";switch(a){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||sv,action:["brush:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:sv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:sv,action:["brush:filter","brush:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide"),"brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(m){return f?!f(m):!1}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||sv,action:["brush-x:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:sv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:sv,action:["brush-x:filter","brush-x:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:f||sv,action:["brush-y:start","".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[null,{maskStyle:l==null?void 0:l.style}]}],processing:[{trigger:"mousemove",isEnable:sv,action:["".concat(d,"-mask:resize")]}],end:[{trigger:"mouseup",isEnable:sv,action:["brush-y:filter","brush-y:end","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:f||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:f||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:f||function(m){return!m.isInShape("mask")},action:["".concat(d,"-mask:start"),"".concat(d,"-mask:show")],arg:[{maskStyle:l==null?void 0:l.style}]},{trigger:"mask:dragstart",action:["".concat(d,"-mask:moveStart")]}],processing:[{trigger:"plot:mousemove",action:["".concat(d,"-mask:resize")]},{trigger:"mask:drag",action:["".concat(d,"-mask:move")]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["".concat(d,"-mask:end")]},{trigger:"mask:dragend",action:["".concat(d,"-mask:moveEnd")]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","".concat(d,"-mask:end"),"".concat(d,"-mask:hide")]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","".concat(d,"-mask:hide")]}]};default:return{}}}Fn("brush",Um("brush")),Fn("brush-highlight",Um("brush-highlight")),Fn("brush-x",Um("brush-x","x-rect")),Fn("brush-y",Um("brush-y","y-rect")),Fn("brush-x-highlight",Um("brush-x-highlight","x-rect")),Fn("brush-y-highlight",Um("brush-y-highlight","y-rect"));var FC=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function BC(a){var n=a.options,t=n.brush,s=(0,E.hX)(n.interactions||[],function(l){return FC.indexOf(l.type)===-1});return t!=null&&t.enabled&&(FC.forEach(function(l){var f=!1;switch(t.type){case"x-rect":f=l===(t.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":f=l===(t.action==="highlight"?"brush-y-highlight":"brush-y");break;default:f=l===(t.action==="highlight"?"brush-highlight":"brush");break}var d={type:l,enable:f};t&&(d.cfg=Um(l,t.type,t)),s.push(d)}),(t==null?void 0:t.action)!=="highlight"&&s.push({type:"filter-action",cfg:{buttonConfig:t.button}})),hn({},a,{options:{interactions:s}})}var Gg={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},Vb=function(a,n){return a==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:n}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:n}]}]};Fn(Gg.hover,{start:Vb(Gg.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Fn(Gg.click,{start:Vb(Gg.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function oO(a){return a===void 0&&(a=!1),function(n){var t=n.chart,s=n.options,l=s.connectedArea,f=function(){t.removeInteraction(Gg.hover),t.removeInteraction(Gg.click)};if(!a&&l){var d=l.trigger||"hover";f(),t.interaction(Gg[d],{start:Vb(d,l.style)})}else f();return n}}function NC(a,n){return!(0,E.hj)(a)||!(0,E.hj)(n)||a===0&&n===0?"-":a===n?"100%":a===0?"\u221E":"".concat((100*n/a).toFixed(2),"%")}function sO(a,n){return hn({size:n?32:80,spacing:n?8:12,offset:n?32:0,arrow:a.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:a.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:NC}},a)}function u1(a,n){return(0,E.UI)(n.getModel().points,function(t){return a.convertPoint(t)})}function uO(a,n,t){var s=a.view,l=a.geometry,f=a.group,d=a.options,m=a.horizontal,x=d.offset,A=d.size,P=d.arrow,L=s.getCoordinate(),B=u1(L,n)[3],U=u1(L,t)[0],Y=U.y-B.y,se=U.x-B.x;if(typeof P!="boolean"){var be=P.headSize,Ee=d.spacing,it;m?(se-be)/2<Ee?(Ee=Math.max(1,(se-be)/2),it=[[B.x+Ee,B.y-x],[B.x+Ee,B.y-x-A],[U.x-Ee,U.y-x-A/2]]):it=[[B.x+Ee,B.y-x],[B.x+Ee,B.y-x-A],[U.x-Ee-be,U.y-x-A],[U.x-Ee,U.y-x-A/2],[U.x-Ee-be,U.y-x]]:(Y-be)/2<Ee?(Ee=Math.max(1,(Y-be)/2),it=[[B.x+x,B.y+Ee],[B.x+x+A,B.y+Ee],[U.x+x+A/2,U.y-Ee]]):it=[[B.x+x,B.y+Ee],[B.x+x+A,B.y+Ee],[U.x+x+A,U.y-Ee-be],[U.x+x+A/2,U.y-Ee],[U.x+x,U.y-Ee-be]],f.addShape("polygon",{id:"".concat(s.id,"-conversion-tag-arrow-").concat(l.getElementId(n.getModel().mappingData)),name:"conversion-tag-arrow",origin:{element:n,nextElement:t},attrs:(0,M.pi)((0,M.pi)({},P.style||{}),{points:it})})}}function lO(a,n,t){var s,l,f,d=a.view,m=a.geometry,x=a.group,A=a.options,P=a.field,L=a.horizontal,B=A.offset,U=A.size;if(typeof A.text!="boolean"){var Y=d.getCoordinate(),se=((s=A.text)===null||s===void 0?void 0:s.formatter)&&((l=A.text)===null||l===void 0?void 0:l.formatter(n.getData()[P],t.getData()[P])),be=u1(Y,n)[L?3:0],Ee=u1(Y,t)[L?0:3],it=x.addShape("text",{id:"".concat(d.id,"-conversion-tag-text-").concat(m.getElementId(n.getModel().mappingData)),name:"conversion-tag-text",origin:{element:n,nextElement:t},attrs:(0,M.pi)((0,M.pi)({},((f=A.text)===null||f===void 0?void 0:f.style)||{}),{text:se,x:L?(be.x+Ee.x)/2:be.x+B+U/2,y:L?be.y-B-U/2:(be.y+Ee.y)/2})});if(L){var gt=Ee.x-be.x,xt=it.getBBox().width;if(xt>gt){var Bt=xt/se.length,_r=Math.max(1,Math.ceil(gt/Bt)-1),Or="".concat(se.slice(0,_r),"...");it.attr("text",Or)}}}}function dy(a,n,t){uO(a,n,t),lO(a,n,t)}function cO(a,n,t){return n===void 0&&(n=!0),t===void 0&&(t=!1),function(s){var l=s.options,f=s.chart,d=l.conversionTag,m=l.theme;return d&&!t&&(f.theme(hn({},(0,E.Kn)(m)?m:od(m),{columnWidthRatio:1/3})),f.annotation().shape({render:function(x,A){var P=x.addGroup({id:"".concat(f.id,"-conversion-tag-group"),name:"conversion-tag-group"}),L=(0,E.sE)(f.geometries,function(Y){return Y.type==="interval"}),B={view:A,geometry:L,group:P,field:a,horizontal:n,options:sO(d,n)},U=L.elements;(0,E.S6)(U,function(Y,se){se>0&&dy(B,U[se-1],Y)})}})),s}}function fO(a){var n=a.options,t=n.legend,s=n.seriesField,l=n.isStack;return s?t!==!1&&(t=(0,M.pi)({position:l?"right-top":"top-left"},t)):t=!1,a.options.legend=t,a}function hO(a){var n=a.chart,t=a.options,s=t.data,l=t.columnStyle,f=t.color,d=t.columnWidthRatio,m=t.isPercent,x=t.isGroup,A=t.isStack,P=t.xField,L=t.yField,B=t.seriesField,U=t.groupField,Y=t.tooltip,se=t.shape,be=m&&x&&A?YP(s,L,[P,U],L):py(s,L,P,L,m),Ee=[];A&&B&&!x?be.forEach(function(xt){var Bt=Ee.find(function(_r){return _r[P]===xt[P]&&_r[B]===xt[B]});Bt?Bt[L]+=xt[L]||0:Ee.push((0,M.pi)({},xt))}):Ee=be,n.data(Ee);var it=m?(0,M.pi)({formatter:function(xt){var Bt;return{name:x&&A?"".concat(xt[B]," - ").concat(xt[U]):(Bt=xt[B])!==null&&Bt!==void 0?Bt:xt[P],value:(Number(xt[L])*100).toFixed(2)+"%"}}},Y):Y,gt=hn({},a,{options:{data:Ee,widthRatio:d,tooltip:it,interval:{shape:se,style:l,color:f}}});return jc(gt),gt}function Hb(a){var n,t,s=a.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.data,A=s.isPercent,P=A?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Fa(Vu((n={},n[d]=l,n[m]=f,n),(t={},t[d]={type:"cat"},t[m]=(0,M.pi)((0,M.pi)({},eu(x,m)),P),t)))(a)}function zC(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(d,!1):n.axis(d,l),a}function pO(a){var n=a.chart,t=a.options,s=t.legend,l=t.seriesField;return s&&l?n.legend(l,s):s===!1&&n.legend(!1),a}function dO(a){var n=a.chart,t=a.options,s=t.label,l=t.yField,f=t.isRange,d=el(n,"interval");if(!s)d.label(!1);else{var m=s.callback,x=(0,M._T)(s,["callback"]);d.label({fields:[l],callback:m,cfg:(0,M.pi)({layout:x!=null&&x.position?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},uc(f?(0,M.pi)({content:function(A){var P;return(P=A[l])===null||P===void 0?void 0:P.join("-")}},x):x))})}return a}function vO(a){var n=a.chart,t=a.options,s=t.tooltip,l=t.isGroup,f=t.isStack,d=t.groupField,m=t.data,x=t.xField,A=t.yField,P=t.seriesField;if(s===!1)n.tooltip(!1);else{var L=s;if(l&&f){var B=L.customItems,U=(L==null?void 0:L.formatter)||function(Y){return{name:"".concat(Y[P]," - ").concat(Y[d]),value:Y[A]}};L=(0,M.pi)((0,M.pi)({},L),{customItems:function(Y){var se=[];return(0,E.S6)(Y,function(be){var Ee=(0,E.hX)(m,function(it){return(0,E.BD)(it,ns(be.data,[x,P]))});Ee.forEach(function(it){se.push((0,M.pi)((0,M.pi)((0,M.pi)({},be),{value:it[A],data:it,mappingData:{_origin:it}}),U(it)))})}),B?B(se):se}})}n.tooltip(L)}return a}function l1(a,n){n===void 0&&(n=!1);var t=a.options,s=t.seriesField;return Fa(fO,Ko,Eh("columnStyle"),Wv,SC("rect"),hO,Hb,zC,pO,vO,hy,Ub,dO,BC,js,ws,bu(),cO(t.yField,!n,!!s),oO(!t.isStack),Nm)(a)}function gO(a){var n=a.options,t=n.xField,s=n.yField,l=n.xAxis,f=n.yAxis,d={left:"bottom",right:"top",top:"left",bottom:"right"},m=f!==!1?(0,M.pi)({position:d[(f==null?void 0:f.position)||"left"]},f):!1,x=l!==!1?(0,M.pi)({position:d[(l==null?void 0:l.position)||"bottom"]},l):!1;return(0,M.pi)((0,M.pi)({},a),{options:(0,M.pi)((0,M.pi)({},n),{xField:s,yField:t,xAxis:m,yAxis:x})})}function mO(a){var n=a.options,t=n.label;return t&&!t.position&&(t.position="left",t.layout||(t.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),hn({},a,{options:{label:t}})}function yO(a){var n=a.options,t=n.seriesField,s=n.isStack,l=n.legend;return t?l!==!1&&(l=(0,M.pi)({position:s?"top-left":"right-top"},l||{})):l=!1,hn({},a,{options:{legend:l}})}function _O(a){var n=a.options,t=[{type:"transpose"},{type:"reflectY"}].concat(n.coordinate||[]);return hn({},a,{options:{coordinate:t}})}function xO(a){var n=a.chart,t=a.options,s=t.barStyle,l=t.barWidthRatio,f=t.minBarWidth,d=t.maxBarWidth,m=t.barBackground;return l1({chart:n,options:(0,M.pi)((0,M.pi)({},t),{columnStyle:s,columnWidthRatio:l,minColumnWidth:f,maxColumnWidth:d,columnBackground:m})},!0)}function UC(a){return Fa(gO,mO,yO,kl,_O,xO)(a)}var bO=hn({},so.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),ZC=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="bar",t}return n.getDefaultOptions=function(){return bO},n.prototype.changeData=function(t){var s,l;this.updateOption({data:t});var f=this,d=f.chart,m=f.options,x=m.isPercent,A=m.xField,P=m.yField,L=m.xAxis,B=m.yAxis;s=[P,A],A=s[0],P=s[1],l=[B,L],L=l[0],B=l[1];var U=(0,M.pi)((0,M.pi)({},m),{xField:A,yField:P,yAxis:B,xAxis:L});Hb({chart:d,options:U}),d.changeData(py(t,A,P,A,x))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return UC},n}(so),SO=hn({},so.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),VC=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="column",t}return n.getDefaultOptions=function(){return SO},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.yField,f=s.xField,d=s.isPercent,m=this,x=m.chart,A=m.options;Hb({chart:x,options:A}),this.chart.changeData(py(t,l,f,l,d))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return l1},n}(so),jb,Gv="$$percentage$$",uv="$$mappingValue$$",lv="$$conversion$$",Wb="$$totalPercentage$$",vy="$$x$$",gy="$$y$$",HC={appendPadding:[0,80],minSize:0,maxSize:1,meta:(jb={},jb[uv]={min:0,max:1,nice:!1},jb),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},jC="CONVERSION_TAG_NAME";function Gb(a,n,t){var s=[],l=t.yField,f=t.maxSize,d=t.minSize,m=(0,E.U2)((0,E.UT)(n,l),[l]),x=(0,E.hj)(f)?f:1,A=(0,E.hj)(d)?d:0;return s=(0,E.UI)(a,function(P,L){var B=(P[l]||0)/m;return P[Gv]=B,P[uv]=(x-A)*B+A,P[lv]=[(0,E.U2)(a,[L-1,l]),P[l]],P}),s}function $b(a){return function(n){var t=n.chart,s=n.options,l=s.conversionTag,f=s.filteredData,d=f||t.getOptions().data;if(l){var m=l.formatter;d.forEach(function(x,A){if(!(A<=0||Number.isNaN(x[uv]))){var P=a(x,A,d,{top:!0,name:jC,text:{content:(0,E.mf)(m)?m(x,d):m,offsetX:l.offsetX,offsetY:l.offsetY,position:"end",autoRotate:!1,style:(0,M.pi)({textAlign:"start",textBaseline:"middle"},l.style)}});t.annotation().line(P)}})}return n}}function EO(a){var n=a.chart,t=a.options,s=t.data,l=s===void 0?[]:s,f=t.yField,d=t.maxSize,m=t.minSize,x=Gb(l,l,{yField:f,maxSize:d,minSize:m});return n.data(x),a}function wO(a){var n=a.chart,t=a.options,s=t.xField,l=t.yField,f=t.color,d=t.tooltip,m=t.label,x=t.shape,A=x===void 0?"funnel":x,P=t.funnelStyle,L=t.state,B=Hu(d,[s,l]),U=B.fields,Y=B.formatter;Yf({chart:n,options:{type:"interval",xField:s,yField:uv,colorField:s,tooltipFields:(0,E.kJ)(U)&&U.concat([Gv,lv]),mapping:{shape:A,tooltip:Y,color:f,style:P},label:m,state:L}});var se=el(a.chart,"interval");return se.adjust("symmetric"),a}function CO(a){var n=a.chart,t=a.options,s=t.isTransposed;return n.coordinate({type:"rect",actions:s?[]:[["transpose"],["scale",1,-1]]}),a}function WC(a){var n=a.options,t=a.chart,s=n.maxSize,l=(0,E.U2)(t,["geometries","0","dataArray"],[]),f=(0,E.U2)(t,["options","data","length"]),d=(0,E.UI)(l,function(x){return(0,E.U2)(x,["0","nextPoints","0","x"])*f-.5}),m=function(x,A,P,L){var B=s-(s-x[uv])/2;return(0,M.pi)((0,M.pi)({},L),{start:[d[A-1]||A-.5,B],end:[d[A-1]||A-.5,B+.05]})};return $b(m)(a),a}function GC(a){return Fa(EO,wO,CO,WC)(a)}function AO(a){var n,t=a.chart,s=a.options,l=s.data,f=l===void 0?[]:l,d=s.yField;return t.data(f),t.scale((n={},n[d]={sync:!0},n)),a}function $C(a){var n=a.chart,t=a.options,s=t.data,l=t.xField,f=t.yField,d=t.color,m=t.compareField,x=t.isTransposed,A=t.tooltip,P=t.maxSize,L=t.minSize,B=t.label,U=t.funnelStyle,Y=t.state,se=t.showFacetTitle;return n.facet("mirror",{fields:[m],transpose:!x,padding:x?0:[32,0,0,0],showTitle:se,eachView:function(be,Ee){var it=x?Ee.rowIndex:Ee.columnIndex;x||be.coordinate({type:"rect",actions:[["transpose"],["scale",it===0?-1:1,-1]]});var gt=Gb(Ee.data,s,{yField:f,maxSize:P,minSize:L});be.data(gt);var xt=Hu(A,[l,f,m]),Bt=xt.fields,_r=xt.formatter,Or=x?{offset:it===0?10:-23,position:it===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:it===0?"end":"start"}};Yf({chart:be,options:{type:"interval",xField:l,yField:uv,colorField:l,tooltipFields:(0,E.kJ)(Bt)&&Bt.concat([Gv,lv]),mapping:{shape:"funnel",tooltip:_r,color:d,style:U},label:B===!1?!1:hn({},Or,B),state:Y}})}}),a}function XC(a){var n=a.chart,t=a.index,s=a.options,l=s.conversionTag,f=s.isTransposed;((0,E.hj)(t)?[n]:n.views).forEach(function(d,m){var x=(0,E.U2)(d,["geometries","0","dataArray"],[]),A=(0,E.U2)(d,["options","data","length"]),P=(0,E.UI)(x,function(B){return(0,E.U2)(B,["0","nextPoints","0","x"])*A-.5}),L=function(B,U,Y,se){var be=(t||m)===0?-1:1;return hn({},se,{start:[P[U-1]||U-.5,B[uv]],end:[P[U-1]||U-.5,B[uv]+.05],text:f?{style:{textAlign:"start"}}:{offsetX:l!==!1?be*l.offsetX:0,style:{textAlign:(t||m)===0?"end":"start"}}})};$b(L)(hn({},{chart:d,options:s}))})}function TO(a){var n=a.chart;return n.once("beforepaint",function(){return XC(a)}),a}function MO(a){return Fa(AO,$C,TO)(a)}function RO(a){var n=a.chart,t=a.options,s=t.data,l=s===void 0?[]:s,f=t.yField,d=(0,E.u4)(l,function(A,P){return A+(P[f]||0)},0),m=(0,E.UT)(l,f)[f],x=(0,E.UI)(l,function(A,P){var L=[],B=[];if(A[Wb]=(A[f]||0)/d,P){var U=l[P-1][vy],Y=l[P-1][gy];L[0]=U[3],B[0]=Y[3],L[1]=U[2],B[1]=Y[2]}else L[0]=-.5,B[0]=1,L[1]=.5,B[1]=1;return B[2]=B[1]-A[Wb],L[2]=(B[2]+1)/4,B[3]=B[2],L[3]=-L[2],A[vy]=L,A[gy]=B,A[Gv]=(A[f]||0)/m,A[lv]=[(0,E.U2)(l,[P-1,f]),A[f]],A});return n.data(x),a}function YC(a){var n=a.chart,t=a.options,s=t.xField,l=t.yField,f=t.color,d=t.tooltip,m=t.label,x=t.funnelStyle,A=t.state,P=Hu(d,[s,l]),L=P.fields,B=P.formatter;return Yf({chart:n,options:{type:"polygon",xField:vy,yField:gy,colorField:s,tooltipFields:(0,E.kJ)(L)&&L.concat([Gv,lv]),label:m,state:A,mapping:{tooltip:B,color:f,style:x}}}),a}function KC(a){var n=a.chart,t=a.options,s=t.isTransposed;return n.coordinate({type:"rect",actions:s?[["transpose"],["reflect","x"]]:[]}),a}function IO(a){var n=function(t,s,l,f){return(0,M.pi)((0,M.pi)({},f),{start:[t[vy][1],t[gy][1]],end:[t[vy][1]+.05,t[gy][1]]})};return $b(n)(a),a}function PO(a){return Fa(RO,YC,KC,IO)(a)}function OO(a){var n,t=a.chart,s=a.options,l=s.data,f=l===void 0?[]:l,d=s.yField;return t.data(f),t.scale((n={},n[d]={sync:!0},n)),a}function kO(a){var n=a.chart,t=a.options,s=t.seriesField,l=t.isTransposed,f=t.showFacetTitle;return n.facet("rect",{fields:[s],padding:[l?0:32,10,0,10],showTitle:f,eachView:function(d,m){GC(hn({},a,{chart:d,options:{data:m.data}}))}}),a}function LO(a){return Fa(OO,kO)(a)}var DO=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.rendering=!1,t}return n.prototype.change=function(t){var s=this;if(!this.rendering){var l=t.seriesField,f=t.compareField,d=f?XC:WC,m=this.context.view,x=l||f?m.views:[m];(0,E.UI)(x,function(A,P){var L=A.getController("annotation"),B=(0,E.hX)((0,E.U2)(L,["option"],[]),function(Y){var se=Y.name;return se!==jC});L.clear(!0),(0,E.S6)(B,function(Y){typeof Y=="object"&&A.annotation()[Y.type](Y)});var U=(0,E.U2)(A,["filteredData"],A.getOptions().data);d({chart:A,index:P,options:(0,M.pi)((0,M.pi)({},t),{filteredData:Gb(U,U,t)})}),A.filterData(U),s.rendering=!0,A.render(!0)})}this.rendering=!1},n}(Rn),qC="funnel-conversion-tag",c1="funnel-afterrender",QC={trigger:"afterrender",action:"".concat(qC,":change")};Kr(qC,DO),Fn(c1,{start:[QC]});function FO(a){var n=a.options,t=n.compareField,s=n.xField,l=n.yField,f=n.locale,d=n.funnelStyle,m=n.data,x=r1(f),A={label:t?{fields:[s,l,t,Gv,lv],formatter:function(L){return"".concat(L[l])}}:{fields:[s,l,Gv,lv],offset:0,position:"middle",formatter:function(L){return"".concat(L[s]," ").concat(L[l])}},tooltip:{title:s,formatter:function(L){return{name:L[s],value:L[l]}}},conversionTag:{formatter:function(L){return"".concat(x.get(["conversionTag","label"]),": ").concat(NC.apply(void 0,L[lv]))}}},P;return(t||d)&&(P=function(L){return hn({},t&&{lineWidth:1,stroke:"#fff"},(0,E.mf)(d)?d(L):d)}),hn({options:A},a,{options:{funnelStyle:P,data:(0,E.d9)(m)}})}function BO(a){var n=a.options,t=n.compareField,s=n.dynamicHeight,l=n.seriesField;return l?LO(a):t?MO(a):s?PO(a):GC(a)}function JC(a){var n,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Fa(Vu((n={},n[f]=s,n[d]=l,n)))(a)}function NO(a){var n=a.chart;return n.axis(!1),a}function eA(a){var n=a.chart,t=a.options,s=t.legend;return s===!1?n.legend(!1):n.legend(s),a}function tA(a){var n=a.chart,t=a.options,s=t.interactions,l=t.dynamicHeight;return(0,E.S6)(s,function(f){f.enable===!1?n.removeInteraction(f.type):n.interaction(f.type,f.cfg||{})}),l?n.removeInteraction(c1):n.interaction(c1,{start:[(0,M.pi)((0,M.pi)({},QC),{arg:t})]}),a}function Xb(a){return Fa(FO,BO,JC,NO,kl,tA,eA,ws,Ko,bu())(a)}var rA=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="funnel",t}return n.getDefaultOptions=function(){return HC},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Xb},n.prototype.setState=function(t,s,l){l===void 0&&(l=!0);var f=Zg(this.chart);(0,E.S6)(f,function(d){s(d.getData())&&d.setState(t,l)})},n.prototype.getStates=function(){var t=Zg(this.chart),s=[];return(0,E.S6)(t,function(l){var f=l.getData(),d=l.getStates();(0,E.S6)(d,function(m){s.push({data:f,state:m,geometry:l.geometry,element:l})})}),s},n.CONVERSATION_FIELD=lv,n.PERCENT_FIELD=Gv,n.TOTAL_PERCENT_FIELD=Wb,n}(so),f1,Yb="range",nA="type",cv="percent",zO="#f0f0f0",iA="indicator-view",Kb="range-view",UO={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(f1={},f1[Yb]={sync:"v"},f1[cv]={sync:"v",tickCount:5,tickInterval:.2},f1),animation:!1};function ZO(a,n){return a.map(function(t,s){var l;return l={},l[Yb]=t-(a[s-1]||0),l[nA]="".concat(s),l[cv]=n,l})}function qb(a){var n;return[(n={},n[cv]=(0,E.uZ)(a,0,1),n)]}function Qb(a,n){var t=(0,E.U2)(n,["ticks"],[]),s=(0,E.dp)(t)?(0,E.jj)(t):[0,(0,E.uZ)(a,0,1),1];return s[0]||s.shift(),ZO(s,a)}function yy(a){var n=a.chart,t=a.options,s=t.percent,l=t.range,f=t.radius,d=t.innerRadius,m=t.startAngle,x=t.endAngle,A=t.axis,P=t.indicator,L=t.gaugeStyle,B=t.type,U=t.meter,Y=l.color,se=l.width;if(P){var be=qb(s),Ee=n.createView({id:iA});Ee.data(be),Ee.point().position("".concat(cv,"*1")).shape(P.shape||"gauge-indicator").customInfo({defaultColor:n.getTheme().defaultColor,indicator:P}),Ee.coordinate("polar",{startAngle:m,endAngle:x,radius:d*f}),Ee.axis(cv,A),Ee.scale(cv,ns(A,Hc))}var it=Qb(s,t.range),gt=n.createView({id:Kb});gt.data(it);var xt=(0,E.HD)(Y)?[Y,zO]:Y,Bt=jc({chart:gt,options:{xField:"1",yField:Yb,seriesField:nA,rawFields:[cv],isStack:!0,interval:{color:xt,style:L,shape:B==="meter"?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:se,maxColumnWidth:se}}).ext,_r=Bt.geometry;return _r.customInfo({meter:U}),gt.coordinate("polar",{innerRadius:d,radius:f,startAngle:m,endAngle:x}).transpose(),a}function aA(a){var n;return Fa(Vu((n={range:{min:0,max:1,maxLimit:1,minLimit:0}},n[cv]={},n)))(a)}function Jb(a,n){var t=a.chart,s=a.options,l=s.statistic,f=s.percent;if(t.getController("annotation").clear(!0),l){var d=l.content,m=void 0;d&&(m=hn({},{content:"".concat((f*100).toFixed(2),"%"),style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},d)),K_(t,{statistic:(0,M.pi)((0,M.pi)({},l),{content:m})},{percent:f})}return n&&t.render(!0),a}function VO(a){var n=a.chart,t=a.options,s=t.tooltip;return s?n.tooltip(hn({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(l,f){var d=(0,E.U2)(f,[0,"data",cv],0);return"".concat((d*100).toFixed(2),"%")}},s)):n.tooltip(!1),a}function HO(a){var n=a.chart;return n.legend(!1),a}function oA(a){return Fa(Ko,ws,yy,aA,VO,Jb,js,bu(),HO)(a)}yi("point","gauge-indicator",{draw:function(a,n){var t=a.customInfo,s=t.indicator,l=t.defaultColor,f=s,d=f.pointer,m=f.pin,x=n.addGroup(),A=this.parsePoint({x:0,y:0});return d&&x.addShape("line",{name:"pointer",attrs:(0,M.pi)({x1:A.x,y1:A.y,x2:a.x,y2:a.y,stroke:l},d.style)}),m&&x.addShape("circle",{name:"pin",attrs:(0,M.pi)({x:A.x,y:A.y,stroke:l},m.style)}),x}}),yi("interval","meter-gauge",{draw:function(a,n){var t=a.customInfo.meter,s=t===void 0?{}:t,l=s.steps,f=l===void 0?50:l,d=s.stepRatio,m=d===void 0?.5:d;f=f<1?1:f,m=(0,E.uZ)(m,0,1);var x=this.coordinate,A=x.startAngle,P=x.endAngle,L=0;if(m>0&&m<1){var B=P-A;L=B/f/(m/(1-m)+1-1/f)}for(var U=L/(1-m)*m,Y=n.addGroup(),se=this.coordinate.getCenter(),be=this.coordinate.getRadius(),Ee=sc.getAngle(a,this.coordinate),it=Ee.startAngle,gt=Ee.endAngle,xt=it;xt<gt;){var Bt=void 0,_r=(xt-A)%(U+L);_r<U?Bt=xt+(U-_r):(xt+=U+L-_r,Bt=xt+U);var Or=sc.getSectorPath(se.x,se.y,be,xt,Math.min(Bt,gt),be*this.coordinate.innerRadius);Y.addShape("path",{name:"meter-gauge",attrs:{path:Or,fill:a.color,stroke:a.color,lineWidth:.5}}),xt=Bt+L}return Y}});var jO=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="gauge",t}return n.getDefaultOptions=function(){return UO},n.prototype.changeData=function(t){this.chart.emit(Ue.BEFORE_CHANGE_DATA,Ka.fromData(this.chart,Ue.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t});var s=this.chart.views.find(function(f){return f.id===iA});s&&s.data(qb(t));var l=this.chart.views.find(function(f){return f.id===Kb});l&&l.data(Qb(t,this.options.range)),Jb({chart:this.chart,options:this.options},!0),this.chart.emit(Ue.AFTER_CHANGE_DATA,Ka.fromData(this.chart,Ue.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return oA},n}(so);function eS(a,n,t){if(t===1)return[0,n];var s=Math.floor(a/n);return[n*s,n*(s+1)]}function WO(a){return Math.ceil(Math.log(a.length)/Math.LN2)+1}function sA(a,n,t,s,l){var f=(0,E.d9)(a);(0,E.MR)(f,n);var d=(0,E.I)(f,n),m=(0,E.rx)(d),x=m.max-m.min,A=t;if(!t&&s&&(A=s>1?x/(s-1):m.max),!t&&!s){var P=WO(d);A=x/P}var L={},B=(0,E.vM)(f,l);(0,E.xb)(B)?(0,E.S6)(f,function(Y){var se=Y[n],be=eS(se,A,s),Ee="".concat(be[0],"-").concat(be[1]);(0,E.wH)(L,Ee)||(L[Ee]={range:be,count:0}),L[Ee].count+=1}):Object.keys(B).forEach(function(Y){(0,E.S6)(B[Y],function(se){var be=se[n],Ee=eS(be,A,s),it="".concat(Ee[0],"-").concat(Ee[1]),gt="".concat(it,"-").concat(Y);(0,E.wH)(L,gt)||(L[gt]={range:Ee,count:0},L[gt][l]=Y),L[gt].count+=1})});var U=[];return(0,E.S6)(L,function(Y){U.push(Y)}),U}var $g="range",_y="count",GO=hn({},so.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function $O(a){var n=a.chart,t=a.options,s=t.data,l=t.binField,f=t.binNumber,d=t.binWidth,m=t.color,x=t.stackField,A=t.legend,P=t.columnStyle,L=sA(s,l,d,f,x);n.data(L);var B=hn({},a,{options:{xField:$g,yField:_y,seriesField:x,isStack:!0,interval:{color:m,style:P}}});return jc(B),A&&x?n.legend(x,A):n.legend(!1),a}function XO(a){var n,t=a.options,s=t.xAxis,l=t.yAxis;return Fa(Vu((n={},n[$g]=s,n[_y]=l,n)))(a)}function YO(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis;return s===!1?n.axis($g,!1):n.axis($g,s),l===!1?n.axis(_y,!1):n.axis(_y,l),a}function KO(a){var n=a.chart,t=a.options,s=t.label,l=el(n,"interval");if(!s)l.label(!1);else{var f=s.callback,d=(0,M._T)(s,["callback"]);l.label({fields:[_y],callback:f,cfg:uc(d)})}return a}function uA(a){return Fa(Ko,Eh("columnStyle"),$O,XO,YO,Wv,KO,kl,js,ws)(a)}var qO=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="histogram",t}return n.getDefaultOptions=function(){return GO},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options,l=s.binField,f=s.binNumber,d=s.binWidth,m=s.stackField;this.chart.changeData(sA(t,l,d,f,m))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return uA},n}(so),QO=hn({},so.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),JO=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.active=function(){var t=this.getView(),s=this.context.event;if(s.data){var l=s.data.items,f=t.geometries.filter(function(d){return d.type==="point"});(0,E.S6)(f,function(d){(0,E.S6)(d.elements,function(m){var x=(0,E.cx)(l,function(A){return A.data===m.data})!==-1;m.setState("active",x)})})}},n.prototype.reset=function(){var t=this.getView(),s=t.geometries.filter(function(l){return l.type==="point"});(0,E.S6)(s,function(l){(0,E.S6)(l.elements,function(f){f.setState("active",!1)})})},n.prototype.getView=function(){return this.context.view},n}(Rn);Kr("marker-active",JO),Fn("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var lA=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="line",t}return n.getDefaultOptions=function(){return QO},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;o1({chart:l,options:f}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return s1},n}(so),cA=hn({},so.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}}),ek=[1,0,0,0,1,0,0,0,1];function tS(a,n){var t=n?(0,M.ev)([],n,!0):(0,M.ev)([],ek,!0);return sc.transform(t,a)}var tk=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getActiveElements=function(){var t=sc.getDelegationObject(this.context);if(t){var s=this.context.view,l=t.component,f=t.item,d=l.get("field");if(d){var m=s.geometries[0].elements;return m.filter(function(x){return x.getModel().data[d]===f.value})}}return[]},n.prototype.getActiveElementLabels=function(){var t=this.context.view,s=this.getActiveElements(),l=t.geometries[0].labelsContainer.getChildren();return l.filter(function(f){return s.find(function(d){return(0,E.Xy)(d.getData(),f.get("data"))})})},n.prototype.transfrom=function(t){t===void 0&&(t=7.5);var s=this.getActiveElements(),l=this.getActiveElementLabels();s.forEach(function(f,d){var m=l[d],x=f.geometry.coordinate;if(x.isPolar&&x.isTransposed){var A=sc.getAngle(f.getModel(),x),P=A.startAngle,L=A.endAngle,B=(P+L)/2,U=t,Y=U*Math.cos(B),se=U*Math.sin(B);f.shape.setMatrix(tS([["t",Y,se]])),m.setMatrix(tS([["t",Y,se]]))}})},n.prototype.active=function(){this.transfrom()},n.prototype.reset=function(){this.transfrom(0)},n}(Rn);function rk(a){var n=a.event,t,s=n.target;return s&&(t=s.get("element")),t}var nk=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getAnnotations=function(t){var s=t||this.context.view;return s.getController("annotation").option},n.prototype.getInitialAnnotation=function(){return this.initialAnnotation},n.prototype.init=function(){var t=this,s=this.context.view;s.removeInteraction("tooltip"),s.on("afterchangesize",function(){var l=t.getAnnotations(s);t.initialAnnotation=l})},n.prototype.change=function(t){var s=this.context,l=s.view,f=s.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var d=(0,E.U2)(f,["data","data"]);if(f.type.match("legend-item")){var m=sc.getDelegationObject(this.context),x=l.getGroupedFields()[0];if(m&&x){var A=m.item;d=l.getData().find(function(U){return U[x]===A.value})}}if(d){var P=(0,E.U2)(t,"annotations",[]),L=(0,E.U2)(t,"statistic",{});l.getController("annotation").clear(!0),(0,E.S6)(P,function(U){typeof U=="object"&&l.annotation()[U.type](U)}),Hg(l,{statistic:L,plotType:"pie"},d),l.render(!0)}var B=rk(this.context);B&&B.shape.toFront()},n.prototype.reset=function(){var t=this.context.view,s=t.getController("annotation");s.clear(!0);var l=this.getInitialAnnotation();(0,E.S6)(l,function(f){t.annotation()[f.type](f)}),t.render(!0)},n}(Rn),fA="pie-statistic";Kr(fA,nk),Fn("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Kr("pie-legend",tk),Fn("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function ik(a,n){var t=null;return(0,E.S6)(a,function(s){typeof s[n]=="number"&&(t+=s[n])}),t}function ak(a,n){var t;switch(a){case"inner":return t="-30%",(0,E.HD)(n)&&n.endsWith("%")?parseFloat(n)*.01>0?t:n:n<0?n:t;case"outer":return t=12,(0,E.HD)(n)&&n.endsWith("%")?parseFloat(n)*.01<0?t:n:n>0?n:t;default:return n}}function h1(a,n){return(0,E.yW)(ly(a,n),function(t){return t[n]===0})}function ok(a){var n=a.chart,t=a.options,s=t.data,l=t.angleField,f=t.colorField,d=t.color,m=t.pieStyle,x=t.shape,A=ly(s,l);if(h1(A,l)){var P="$$percentage$$";A=A.map(function(B){var U;return(0,M.pi)((0,M.pi)({},B),(U={},U[P]=1/A.length,U))}),n.data(A);var L=hn({},a,{options:{xField:"1",yField:P,seriesField:f,isStack:!0,interval:{color:d,shape:x,style:m},args:{zIndexReversed:!0,sortZIndex:!0}}});jc(L)}else{n.data(A);var L=hn({},a,{options:{xField:"1",yField:l,seriesField:f,isStack:!0,interval:{color:d,shape:x,style:m},args:{zIndexReversed:!0,sortZIndex:!0}}});jc(L)}return a}function sk(a){var n,t=a.chart,s=a.options,l=s.meta,f=s.colorField,d=hn({},l);return t.scale(d,(n={},n[f]={type:"cat"},n)),a}function uk(a){var n=a.chart,t=a.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return n.coordinate({type:"theta",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}),a}function lk(a){var n=a.chart,t=a.options,s=t.label,l=t.colorField,f=t.angleField,d=n.geometries[0];if(!s)d.label(!1);else{var m=s.callback,x=(0,M._T)(s,["callback"]),A=uc(x);if(A.content){var P=A.content;A.content=function(Y,se,be){var Ee=Y[l],it=Y[f],gt=n.getScaleByField(f),xt=gt==null?void 0:gt.scale(it);return(0,E.mf)(P)?P((0,M.pi)((0,M.pi)({},Y),{percent:xt}),se,be):(0,E.HD)(P)?Fb(P,{value:it,name:Ee,percentage:(0,E.hj)(xt)&&!(0,E.UM)(it)?"".concat((xt*100).toFixed(2),"%"):null}):P}}var L={inner:"",outer:"pie-outer",spider:"pie-spider"},B=A.type?L[A.type]:"pie-outer",U=A.layout?(0,E.kJ)(A.layout)?A.layout:[A.layout]:[];A.layout=(B?[{type:B}]:[]).concat(U),d.label({fields:l?[f,l]:[f],callback:m,cfg:(0,M.pi)((0,M.pi)({},A),{offset:ak(A.type,A.offset),type:"pie"})})}return a}function ck(a){var n=a.innerRadius,t=a.statistic,s=a.angleField,l=a.colorField,f=a.meta,d=a.locale,m=r1(d);if(n&&t){var x=hn({},cA.statistic,t),A=x.title,P=x.content;return A!==!1&&(A=hn({},{formatter:function(L){var B=L?L[l]:(0,E.UM)(A.content)?m.get(["statistic","total"]):A.content,U=(0,E.U2)(f,[l,"formatter"])||function(Y){return Y};return U(B)}},A)),P!==!1&&(P=hn({},{formatter:function(L,B){var U=L?L[s]:ik(B,s),Y=(0,E.U2)(f,[s,"formatter"])||function(se){return se};return L||(0,E.UM)(P.content)?Y(U):P.content}},P)),hn({},{statistic:{title:A,content:P}},a)}return a}function hA(a){var n=a.chart,t=a.options,s=ck(t),l=s.innerRadius,f=s.statistic;return n.getController("annotation").clear(!0),Fa(bu())(a),l&&f&&Hg(n,{statistic:f,plotType:"pie"}),a}function fk(a){var n=a.chart,t=a.options,s=t.tooltip,l=t.colorField,f=t.angleField,d=t.data;if(s===!1)n.tooltip(s);else if(n.tooltip(hn({},s,{shared:!1})),h1(d,f)){var m=(0,E.U2)(s,"fields"),x=(0,E.U2)(s,"formatter");(0,E.xb)((0,E.U2)(s,"fields"))&&(m=[l,f],x=x||function(A){return{name:A[l],value:(0,E.BB)(A[f])}}),n.geometries[0].tooltip(m.join("*"),zm(m,x))}return a}function hk(a){var n=a.chart,t=a.options,s=ck(t),l=s.interactions,f=s.statistic,d=s.annotations;return(0,E.S6)(l,function(m){var x,A;if(m.enable===!1)n.removeInteraction(m.type);else if(m.type==="pie-statistic-active"){var P=[];!((x=m.cfg)===null||x===void 0)&&x.start||(P=[{trigger:"element:mouseenter",action:"".concat(fA,":change"),arg:{statistic:f,annotations:d}}]),(0,E.S6)((A=m.cfg)===null||A===void 0?void 0:A.start,function(L){P.push((0,M.pi)((0,M.pi)({},L),{arg:{statistic:f,annotations:d}}))}),n.interaction(m.type,hn({},m.cfg,{start:P}))}else n.interaction(m.type,m.cfg||{})}),a}function pA(a){return Fa(Eh("pieStyle"),ok,sk,Ko,uk,Bm,fk,lk,Wv,hA,hk,ws)(a)}var dA=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="pie",t}return n.getDefaultOptions=function(){return cA},n.prototype.changeData=function(t){this.chart.emit(Ue.BEFORE_CHANGE_DATA,Ka.fromData(this.chart,Ue.BEFORE_CHANGE_DATA,null));var s=this.options,l=this.options.angleField,f=ly(s.data,l),d=ly(t,l);h1(f,l)||h1(d,l)?this.update({data:t}):(this.updateOption({data:t}),this.chart.data(d),hA({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(Ue.AFTER_CHANGE_DATA,Ka.fromData(this.chart,Ue.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return pA},n}(so),pk=["#FAAD14","#E8EDF3"],dk={percent:.2,color:pk,animation:{}};function rS(a){var n=(0,E.uZ)(Hv(a)?a:0,0,1);return[{current:"".concat(n),type:"current",percent:n},{current:"".concat(n),type:"target",percent:1}]}function vA(a){var n=a.chart,t=a.options,s=t.percent,l=t.progressStyle,f=t.color,d=t.barWidthRatio;n.data(rS(s));var m=hn({},a,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:d,interval:{style:l,color:(0,E.HD)(f)?[f,pk[1]]:f},args:{zIndexReversed:!0,sortZIndex:!0}}});return jc(m),n.tooltip(!1),n.axis(!1),n.legend(!1),a}function vk(a){var n=a.chart;return n.coordinate("rect").transpose(),a}function gA(a){return Fa(vA,Vu({}),vk,ws,Ko,bu())(a)}var p1=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="process",t}return n.getDefaultOptions=function(){return dk},n.prototype.changeData=function(t){this.updateOption({percent:t}),this.chart.changeData(rS(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return gA},n}(so);function gk(a){var n=a.chart,t=a.options,s=t.innerRadius,l=t.radius;return n.coordinate("theta",{innerRadius:s,radius:l}),a}function mA(a,n){var t=a.chart,s=a.options,l=s.innerRadius,f=s.statistic,d=s.percent,m=s.meta;if(t.getController("annotation").clear(!0),l&&f){var x=(0,E.U2)(m,["percent","formatter"])||function(P){return"".concat((P*100).toFixed(2),"%")},A=f.content;A&&(A=hn({},A,{content:(0,E.UM)(A.content)?x(d):A.content})),Hg(t,{statistic:(0,M.pi)((0,M.pi)({},f),{content:A}),plotType:"ring-progress"},{percent:d})}return n&&t.render(!0),a}function yA(a){return Fa(vA,Vu({}),gk,mA,ws,Ko,bu())(a)}var mk={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},yk=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="ring-process",t}return n.getDefaultOptions=function(){return mk},n.prototype.changeData=function(t){this.chart.emit(Ue.BEFORE_CHANGE_DATA,Ka.fromData(this.chart,Ue.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(rS(t)),mA({chart:this.chart,options:this.options},!0),this.chart.emit(Ue.AFTER_CHANGE_DATA,Ka.fromData(this.chart,Ue.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return yA},n}(so),Xg=k(56645),_k={exp:Xg.regressionExp,linear:Xg.regressionLinear,loess:Xg.regressionLoess,log:Xg.regressionLog,poly:Xg.regressionPoly,pow:Xg.regressionPow,quad:Xg.regressionQuad};function xk(a,n){var t=10,s={regionStyle:[{position:{start:[a,"max"],end:["max",n]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[a,n]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",n],end:[a,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[a,n],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",n],offsetX:-t,offsetY:-t,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",n],offsetX:t,offsetY:-t,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",n],offsetX:t,offsetY:t,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",n],offsetX:-t,offsetY:t,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return s}var bk=function(a,n){var t=n.view,s=n.options,l=s.xField,f=s.yField,d=t.getScaleByField(l),m=t.getScaleByField(f),x=a.map(function(A){return t.getCoordinate().convert({x:d.scale(A[0]),y:m.scale(A[1])})});return mC(x,!1)},_A=function(a){var n=a.options,t=n.xField,s=n.yField,l=n.data,f=n.regressionLine,d=f.type,m=d===void 0?"linear":d,x=f.algorithm,A=f.equation,P,L=null;if(x)P=(0,E.kJ)(x)?x:x(l),L=A;else{var B=_k[m]().x(function(U){return U[t]}).y(function(U){return U[s]});P=B(l),L=xA(m,P)}return[bk(P,a),L]},r4=function(a){var n,t=a.meta,s=t===void 0?{}:t,l=a.xField,f=a.yField,d=a.data,m=d[0][l],x=d[0][f],A=m>0,P=x>0;function L(B,U){var Y=(0,E.U2)(s,[B]);function se(Ee){return(0,E.U2)(Y,Ee)}var be={};return U==="x"?((0,E.hj)(m)&&((0,E.hj)(se("min"))||(be.min=A?0:m*2),(0,E.hj)(se("max"))||(be.max=A?m*2:0)),be):((0,E.hj)(x)&&((0,E.hj)(se("min"))||(be.min=P?0:x*2),(0,E.hj)(se("max"))||(be.max=P?x*2:0)),be)}return(0,M.pi)((0,M.pi)({},s),(n={},n[l]=(0,M.pi)((0,M.pi)({},s[l]),L(l,"x")),n[f]=(0,M.pi)((0,M.pi)({},s[f]),L(f,"y")),n))};function xA(a,n){var t,s,l,f=function(A,P){return P===void 0&&(P=4),Math.round(A*Math.pow(10,P))/Math.pow(10,P)},d=function(A){return Number.isFinite(A)?f(A):"?"};switch(a){case"linear":return"y = ".concat(d(n.a),"x + ").concat(d(n.b),", R^2 = ").concat(d(n.rSquared));case"exp":return"y = ".concat(d(n.a),"e^(").concat(d(n.b),"x), R^2 = ").concat(d(n.rSquared));case"log":return"y = ".concat(d(n.a),"ln(x) + ").concat(d(n.b),", R^2 = ").concat(d(n.rSquared));case"quad":return"y = ".concat(d(n.a),"x^2 + ").concat(d(n.b),"x + ").concat(d(n.c),", R^2 = ").concat(d(n.rSquared));case"poly":for(var m="y = ".concat(d((t=n.coefficients)===null||t===void 0?void 0:t[0])," + ").concat(d((s=n.coefficients)===null||s===void 0?void 0:s[1]),"x + ").concat(d((l=n.coefficients)===null||l===void 0?void 0:l[2]),"x^2"),x=3;x<n.coefficients.length;++x)m+=" + ".concat(d(n.coefficients[x]),"x^").concat(x);return"".concat(m,", R^2 = ").concat(d(n.rSquared));case"pow":return"y = ".concat(d(n.a),"x^").concat(d(n.b),", R^2 = ").concat(d(n.rSquared))}return null}function nS(a){var n=a.data,t=n===void 0?[]:n,s=a.xField,l=a.yField;if(t.length){for(var f=!0,d=!0,m=t[0],x=void 0,A=1;A<t.length&&(x=t[A],m[s]!==x[s]&&(f=!1),m[l]!==x[l]&&(d=!1),!(!f&&!d));A++)m=x;var P=[];f&&P.push(s),d&&P.push(l);var L=ns(r4(a),P);return hn({},a,{meta:L})}return a}function bA(a){var n=a.chart,t=a.options,s=t.data,l=t.type,f=t.color,d=t.shape,m=t.pointStyle,x=t.shapeField,A=t.colorField,P=t.xField,L=t.yField,B=t.sizeField,U=t.size,Y=t.tooltip;B&&(U||(U=[2,8]),(0,E.hj)(U)&&(U=[U,U])),Y&&!Y.fields&&(Y=(0,M.pi)((0,M.pi)({},Y),{fields:[P,L,A,B,x]})),n.data(s),wh(hn({},a,{options:{seriesField:A,point:{color:f,shape:d,size:U,style:m},tooltip:Y}}));var se=el(n,"point");return l&&se.adjust(l),a}function xy(a){var n,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=nS(t);return Fa(Vu((n={},n[f]=s,n[d]=l,n)))(hn({},a,{options:m}))}function d1(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return n.axis(f,s),n.axis(d,l),a}function SA(a){var n=a.chart,t=a.options,s=t.legend,l=t.colorField,f=t.shapeField,d=t.sizeField,m=t.shapeLegend,x=t.sizeLegend,A=s!==!1;return l&&n.legend(l,A?s:!1),f&&(m?n.legend(f,m):n.legend(f,m===!1?!1:s)),d&&n.legend(d,x||!1),!A&&!m&&!x&&n.legend(!1),a}function EA(a){var n=a.chart,t=a.options,s=t.label,l=t.yField,f=el(n,"point");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:uc(m)})}return a}function Sk(a){var n=a.options,t=n.quadrant,s=[];if(t){var l=t.xBaseline,f=l===void 0?0:l,d=t.yBaseline,m=d===void 0?0:d,x=t.labels,A=t.regionStyle,P=t.lineStyle,L=xk(f,m),B=new Array(4).join(",").split(",");B.forEach(function(U,Y){s.push((0,M.pi)((0,M.pi)({type:"region",top:!1},L.regionStyle[Y].position),{style:hn({},L.regionStyle[Y].style,A==null?void 0:A[Y])}),(0,M.pi)({type:"text",top:!0},hn({},L.labelStyle[Y],x==null?void 0:x[Y])))}),s.push({type:"line",top:!1,start:["min",m],end:["max",m],style:hn({},L.lineStyle,P)},{type:"line",top:!1,start:[f,"min"],end:[f,"max"],style:hn({},L.lineStyle,P)})}return Fa(bu(s))(a)}function Ek(a){var n=a.options,t=a.chart,s=n.regressionLine;if(s){var l=s.style,f=s.equationStyle,d=f===void 0?{}:f,m=s.top,x=m===void 0?!1:m,A=s.showEquation,P=A===void 0?!1:A,L={stroke:"#9ba29a",lineWidth:2,opacity:.5},B={x:20,y:20,textAlign:"left",textBaseline:"middle",fontSize:14,fillOpacity:.5};t.annotation().shape({top:x,render:function(U,Y){var se=U.addGroup({id:"".concat(t.id,"-regression-line"),name:"regression-line-group"}),be=_A({view:Y,options:n}),Ee=be[0],it=be[1];se.addShape("path",{name:"regression-line",attrs:(0,M.pi)((0,M.pi)({path:Ee},L),l)}),P&&se.addShape("text",{name:"regression-equation",attrs:(0,M.pi)((0,M.pi)((0,M.pi)({},B),d),{text:it})})}})}return a}function wA(a){var n=a.chart,t=a.options,s=t.tooltip;return s?n.tooltip(s):s===!1&&n.tooltip(!1),a}function iS(a){return Fa(bA,xy,d1,SA,wA,EA,BC,hy,Ub,js,Sk,ws,Ko,Ek)(a)}var wk=hn({},so.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});Fn("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var aS=function(a){(0,M.ZT)(n,a);function n(t,s){var l=a.call(this,t,s)||this;return l.type="scatter",l.on(Ue.BEFORE_RENDER,function(f){var d,m,x=l,A=x.options,P=x.chart;if(((d=f.data)===null||d===void 0?void 0:d.source)===Sh.FILTER){var L=l.chart.filterData(l.chart.getData());xy({chart:P,options:(0,M.pi)((0,M.pi)({},A),{data:L})})}((m=f.data)===null||m===void 0?void 0:m.source)===Sh.RESET&&xy({chart:P,options:A})}),l}return n.getDefaultOptions=function(){return wk},n.prototype.changeData=function(t){this.updateOption(nS(hn({},this.options,{data:t})));var s=this,l=s.options,f=s.chart;xy({chart:f,options:l}),this.chart.changeData(t)},n.prototype.getSchemaAdaptor=function(){return iS},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(so),Zm="$$stock-range$$",v1="trend",oS="up",CA="down",n4={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(a,n,t){var s;if(a==="x"){var l=t[0];s=l?l.title:n}else s=n;return{position:a==="y"?"start":"end",content:s,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},g1=hn({},so.getDefaultOptions(),{tooltip:n4,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function sS(a,n){return(0,E.UI)(a,function(t){var s=t&&(0,M.pi)({},t);if((0,E.kJ)(n)&&s){var l=n[0],f=n[1],d=n[2],m=n[3];s[v1]=s[l]<=s[f]?oS:CA,s[Zm]=[s[l],s[f],s[d],s[m]]}return s})}function AA(a){var n=a.chart,t=a.options,s=t.yField,l=t.data,f=t.risingFill,d=t.fallingFill,m=t.tooltip,x=t.stockStyle;n.data(sS(l,s));var A=m;return A!==!1&&(A=hn({},{fields:s},A)),Zb(hn({},a,{options:{schema:{shape:"candle",color:[f,d],style:x},yField:Zm,seriesField:v1,rawFields:s,tooltip:A}})),a}function i4(a){var n,t,s=a.chart,l=a.options,f=l.meta,d=l.xAxis,m=l.yAxis,x=l.xField,A=(n={},n[x]={type:"timeCat",tickCount:6},n[v1]={values:[oS,CA]},n),P=hn(A,f,(t={},t[x]=ns(d,Hc),t[Zm]=ns(m,Hc),t));return s.scale(P),a}function a4(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(Zm,!1):n.axis(Zm,l),a}function uS(a){var n=a.chart,t=a.options,s=t.tooltip;return s!==!1?n.tooltip(s):n.tooltip(!1),a}function lS(a){var n=a.chart,t=a.options,s=t.legend;return s?n.legend(v1,s):s===!1&&n.legend(!1),a}function m1(a){Fa(Ko,AA,i4,a4,uS,lS,js,ws,bu(),hy)(a)}var TA=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="stock",t}return n.getDefaultOptions=function(){return g1},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return m1},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options.yField;this.chart.changeData(sS(t,s))},n}(so);function Ed(a){return(0,E.UI)(a||[],function(n,t){return{x:"".concat(t),y:n}})}var Yg="x",by="y",Ck={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(a,n){return"".concat((0,E.U2)(n,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},Ak={appendPadding:2,tooltip:(0,M.pi)({},Ck),animation:{}};function Tk(a){var n=a.chart,t=a.options,s=t.data,l=t.color,f=t.areaStyle,d=t.point,m=t.line,x=d==null?void 0:d.state,A=Ed(s);n.data(A);var P=hn({},a,{options:{xField:Yg,yField:by,area:{color:l,style:f},line:m,point:d}}),L=hn({},P,{options:{tooltip:!1}}),B=hn({},P,{options:{tooltip:!1,state:x}});return i1(P),Wg(L),wh(B),n.axis(!1),n.legend(!1),a}function Kg(a){var n,t,s=a.options,l=s.xAxis,f=s.yAxis,d=s.data,m=Ed(d);return Fa(Vu((n={},n[Yg]=l,n[by]=f,n),(t={},t[Yg]={type:"cat"},t[by]=eu(m,by),t)))(a)}function MA(a){return Fa(Eh("areaStyle"),Tk,Kg,kl,Ko,ws,bu())(a)}var Mk={appendPadding:2,tooltip:(0,M.pi)({},Ck),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},cS=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="tiny-area",t}return n.getDefaultOptions=function(){return Mk},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;Kg({chart:l,options:f}),l.changeData(Ed(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return MA},n}(so);function RA(a){var n=a.chart,t=a.options,s=t.data,l=t.color,f=t.columnStyle,d=t.columnWidthRatio,m=Ed(s);n.data(m);var x=hn({},a,{options:{xField:Yg,yField:by,widthRatio:d,interval:{style:f,color:l}}});return jc(x),n.axis(!1),n.legend(!1),n.interaction("element-active"),a}function IA(a){return Fa(Ko,Eh("columnStyle"),RA,Kg,kl,ws,bu())(a)}var o4={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(a,n){return"".concat((0,E.U2)(n,[0,"data","y"],0))},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},Rk={appendPadding:2,tooltip:(0,M.pi)({},o4),animation:{}},PA=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="tiny-column",t}return n.getDefaultOptions=function(){return Rk},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;Kg({chart:l,options:f}),l.changeData(Ed(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return IA},n}(so);function OA(a){var n=a.chart,t=a.options,s=t.data,l=t.color,f=t.lineStyle,d=t.point,m=d==null?void 0:d.state,x=Ed(s);n.data(x);var A=hn({},a,{options:{xField:Yg,yField:by,line:{color:l,style:f},point:d}}),P=hn({},A,{options:{tooltip:!1,state:m}});return Wg(A),wh(P),n.axis(!1),n.legend(!1),a}function fS(a){return Fa(OA,Kg,Ko,kl,ws,bu())(a)}var Ik=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="tiny-line",t}return n.getDefaultOptions=function(){return Ak},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this,l=s.chart,f=s.options;Kg({chart:l,options:f}),l.changeData(Ed(t))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return fS},n}(so),s4={line:s1,pie:pA,column:l1,bar:UC,area:LC,gauge:oA,"tiny-line":fS,"tiny-column":IA,"tiny-area":MA,"ring-progress":yA,progress:gA,scatter:iS,histogram:uA,funnel:Xb,stock:m1},ep={line:lA,pie:dA,column:VC,bar:ZC,area:t4,gauge:jO,"tiny-line":Ik,"tiny-column":PA,"tiny-area":cS,"ring-progress":yk,progress:p1,scatter:aS,histogram:qO,funnel:rA,stock:TA},y1={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function _1(a,n,t){var s=ep[a];if(!s){console.error("could not find ".concat(a," plot"));return}var l=s4[a];l({chart:n,options:hn({},s.getDefaultOptions(),(0,E.U2)(y1,a,{}),t)})}function hS(a){var n=a.chart,t=a.options,s=t.views,l=t.legend;return(0,E.S6)(s,function(f){var d=f.region,m=f.data,x=f.meta,A=f.axes,P=f.coordinate,L=f.interactions,B=f.annotations,U=f.tooltip,Y=f.geometries,se=n.createView({region:d});se.data(m);var be={};A&&(0,E.S6)(A,function(Ee,it){be[it]=ns(Ee,Hc)}),be=hn({},x,be),se.scale(be),A?(0,E.S6)(A,function(Ee,it){se.axis(it,Ee)}):se.axis(!1),se.coordinate(P),(0,E.S6)(Y,function(Ee){var it=Yf({chart:se,options:Ee}).ext,gt=Ee.adjust;gt&&it.geometry.adjust(gt)}),(0,E.S6)(L,function(Ee){Ee.enable===!1?se.removeInteraction(Ee.type):se.interaction(Ee.type,Ee.cfg)}),(0,E.S6)(B,function(Ee){se.annotation()[Ee.type]((0,M.pi)({},Ee))}),typeof f.animation=="boolean"?se.animate(!1):(se.animate(!0),(0,E.S6)(se.geometries,function(Ee){Ee.animate(f.animation)})),U&&(se.interaction("tooltip"),se.tooltip(U))}),l?(0,E.S6)(l,function(f,d){n.legend(d,f)}):n.legend(!1),n.tooltip(t.tooltip),a}function u4(a){var n=a.chart,t=a.options,s=t.plots,l=t.data,f=l===void 0?[]:l;return(0,E.S6)(s,function(d){var m=d.type,x=d.region,A=d.options,P=A===void 0?{}:A,L=d.top,B=P.tooltip;if(L){_1(m,n,(0,M.pi)((0,M.pi)({},P),{data:f}));return}var U=n.createView((0,M.pi)({region:x},ns(P,IC)));B&&U.interaction("tooltip"),_1(m,U,(0,M.pi)({data:f},P))}),a}function Pk(a){var n=a.chart,t=a.options;return n.option("slider",t.slider),a}function Ok(a){return Fa(ws,hS,u4,js,ws,Ko,kl,Pk,bu())(a)}function kA(a,n){var t=a.getModel(),s=t.data,l;return(0,E.kJ)(s)?l=s[0][n]:l=s[n],l}function LA(a){var n=ov(a);(0,E.S6)(n,function(t){t.hasState("active")&&t.setState("active",!1),t.hasState("selected")&&t.setState("selected",!1),t.hasState("inactive")&&t.setState("inactive",!1)})}var x1=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getAssociationItems=function(t,s){var l,f=this.context.event,d=s||{},m=d.linkField,x=d.dim,A=[];if(!((l=f.data)===null||l===void 0)&&l.data){var P=f.data.data;(0,E.S6)(t,function(L){var B,U,Y=m;if(x==="x"?Y=L.getXScale().field:x==="y"?Y=(B=L.getYScales().find(function(be){return be.field===Y}))===null||B===void 0?void 0:B.field:Y||(Y=(U=L.getGroupScales()[0])===null||U===void 0?void 0:U.field),!!Y){var se=(0,E.UI)(ov(L),function(be){var Ee=!1,it=!1,gt=(0,E.kJ)(P)?(0,E.U2)(P[0],Y):(0,E.U2)(P,Y);return kA(be,Y)===gt?Ee=!0:it=!0,{element:be,view:L,active:Ee,inactive:it}});A.push.apply(A,se)}})}return A},n.prototype.showTooltip=function(t){var s=yC(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){if(f.active){var d=f.element.shape.getCanvasBBox();f.view.showTooltip({x:d.minX+d.width/2,y:d.minY+d.height/2})}})},n.prototype.hideTooltip=function(){var t=yC(this.context.view);(0,E.S6)(t,function(s){s.hideTooltip()})},n.prototype.active=function(t){var s=fy(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){var d=f.active,m=f.element;d&&m.setState("active",!0)})},n.prototype.selected=function(t){var s=fy(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){var d=f.active,m=f.element;d&&m.setState("selected",!0)})},n.prototype.highlight=function(t){var s=fy(this.context.view),l=this.getAssociationItems(s,t);(0,E.S6)(l,function(f){var d=f.inactive,m=f.element;d&&m.setState("inactive",!0)})},n.prototype.reset=function(){var t=fy(this.context.view);(0,E.S6)(t,function(s){LA(s)})},n}(Rn);Kr("association",x1),Fn("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Fn("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Fn("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]}),Fn("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});var qg=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="mix",t}return n.prototype.getSchemaAdaptor=function(){return Ok},n}(so),Vm;(function(a){a.DEV="DEV",a.BETA="BETA",a.STABLE="STABLE"})(Vm||(Vm={}));function l4(a,n){console.warn(a===Vm.DEV?"Plot '".concat(n,"' is in DEV stage, just give us issues."):a===Vm.BETA?"Plot '".concat(n,"' is in BETA stage, DO NOT use it in production env."):a===Vm.STABLE?"Plot '".concat(n,`' is in STABLE stage, import it by "import { `).concat(n,` } from '@antv/g2plot'".`):"invalid Stage type.")}var kk=function(){function a(){}return Object.defineProperty(a,"MultiView",{get:function(){return l4(Vm.STABLE,"MultiView"),qg},enumerable:!1,configurable:!0}),a}(),zp="first-axes-view",uf="second-axes-view",Kf="series-field-key";function pS(a,n,t,s,l){var f=[];n.forEach(function(L){s.forEach(function(B){var U,Y=(U={},U[a]=B[a],U[t]=L,U[L]=B[L],U);f.push(Y)})});var d=Object.values((0,E.vM)(f,t)),m=d[0],x=m===void 0?[]:m,A=d[1],P=A===void 0?[]:A;return l?[x.reverse(),P.reverse()]:[x,P]}function wd(a){return a!=="vertical"}function b1(a,n,t){var s=n[0],l=n[1],f=s.autoPadding,d=l.autoPadding,m=a.__axisPosition,x=m.layout,A=m.position;if(wd(x)&&A==="top"&&(s.autoPadding=t.instance(f.top,0,f.bottom,f.left),l.autoPadding=t.instance(d.top,f.left,d.bottom,0)),wd(x)&&A==="bottom"&&(s.autoPadding=t.instance(f.top,f.right/2+5,f.bottom,f.left),l.autoPadding=t.instance(d.top,d.right,d.bottom,f.right/2+5)),!wd(x)&&A==="bottom"){var P=f.left>=d.left?f.left:d.left;s.autoPadding=t.instance(f.top,f.right,f.bottom/2+5,P),l.autoPadding=t.instance(f.bottom/2+5,d.right,d.bottom,P)}if(!wd(x)&&A==="top"){var P=f.left>=d.left?f.left:d.left;s.autoPadding=t.instance(f.top,f.right,0,P),l.autoPadding=t.instance(0,d.right,f.top,P)}}function DA(a){var n=a.chart,t=a.options,s=t.data,l=t.xField,f=t.yField,d=t.color,m=t.barStyle,x=t.widthRatio,A=t.legend,P=t.layout,L=pS(l,f,Kf,s,wd(P));A?n.legend(Kf,A):A===!1&&n.legend(!1);var B,U,Y=L[0],se=L[1];wd(P)?(B=n.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:zp}),B.coordinate().transpose().reflect("x"),U=n.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:uf}),U.coordinate().transpose(),B.data(Y),U.data(se)):(B=n.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:zp}),U=n.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:uf}),U.coordinate().reflect("y"),B.data(Y),U.data(se));var be=hn({},a,{chart:B,options:{widthRatio:x,xField:l,yField:f[0],seriesField:Kf,interval:{color:d,style:m}}});jc(be);var Ee=hn({},a,{chart:U,options:{xField:l,yField:f[1],seriesField:Kf,widthRatio:x,interval:{color:d,style:m}}});return jc(Ee),a}function FA(a){var n,t,s,l=a.options,f=a.chart,d=l.xAxis,m=l.yAxis,x=l.xField,A=l.yField,P=xo(f,zp),L=xo(f,uf),B={};return(0,E.XP)((l==null?void 0:l.meta)||{}).map(function(U){(0,E.U2)(l==null?void 0:l.meta,[U,"alias"])&&(B[U]=l.meta[U].alias)}),f.scale((n={},n[Kf]={sync:!0,formatter:function(U){return(0,E.U2)(B,U,U)}},n)),Vu((t={},t[x]=d,t[A[0]]=m[A[0]],t))(hn({},a,{chart:P})),Vu((s={},s[x]=d,s[A[1]]=m[A[1]],s))(hn({},a,{chart:L})),a}function c4(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=t.layout,x=xo(n,zp),A=xo(n,uf);return(s==null?void 0:s.position)==="bottom"?A.axis(f,(0,M.pi)((0,M.pi)({},s),{label:{formatter:function(){return""}}})):A.axis(f,!1),s===!1?x.axis(f,!1):x.axis(f,(0,M.pi)({position:wd(m)?"top":"bottom"},s)),l===!1?(x.axis(d[0],!1),A.axis(d[1],!1)):(x.axis(d[0],l[d[0]]),A.axis(d[1],l[d[1]])),n.__axisPosition={position:x.getOptions().axes[f].position,layout:m},a}function f4(a){var n=a.chart;return js(hn({},a,{chart:xo(n,zp)})),js(hn({},a,{chart:xo(n,uf)})),a}function BA(a){var n=a.chart,t=a.options,s=t.yField,l=t.yAxis;return Nm(hn({},a,{chart:xo(n,zp),options:{yAxis:l[s[0]]}})),Nm(hn({},a,{chart:xo(n,uf),options:{yAxis:l[s[1]]}})),a}function Lk(a){var n=a.chart;return Ko(hn({},a,{chart:xo(n,zp)})),Ko(hn({},a,{chart:xo(n,uf)})),Ko(a),a}function S1(a){var n=a.chart;return ws(hn({},a,{chart:xo(n,zp)})),ws(hn({},a,{chart:xo(n,uf)})),a}function Dk(a){var n=this,t,s,l=a.chart,f=a.options,d=f.label,m=f.yField,x=f.layout,A=xo(l,zp),P=xo(l,uf),L=el(A,"interval"),B=el(P,"interval");if(!d)L.label(!1),B.label(!1);else{var U=d.callback,Y=(0,M._T)(d,["callback"]);Y.position||(Y.position="middle"),Y.offset===void 0&&(Y.offset=2);var se=(0,M.pi)({},Y);if(wd(x)){var be=((t=se.style)===null||t===void 0?void 0:t.textAlign)||(Y.position==="middle"?"center":"left");Y.style=hn({},Y.style,{textAlign:be});var Ee={left:"right",right:"left",center:"center"};se.style=hn({},se.style,{textAlign:Ee[be]})}else{var it={top:"bottom",bottom:"top",middle:"middle"};typeof Y.position=="string"?Y.position=it[Y.position]:typeof Y.position=="function"&&(Y.position=function(){for(var Bt=[],_r=0;_r<arguments.length;_r++)Bt[_r]=arguments[_r];return it[Y.position.apply(n,Bt)]});var gt=((s=se.style)===null||s===void 0?void 0:s.textBaseline)||"bottom";se.style=hn({},se.style,{textBaseline:gt});var xt={top:"bottom",bottom:"top",middle:"middle"};Y.style=hn({},Y.style,{textBaseline:xt[gt]})}L.label({fields:[m[0]],callback:U,cfg:uc(se)}),B.label({fields:[m[1]],callback:U,cfg:uc(Y)})}return a}function dS(a){return Fa(DA,FA,c4,BA,Lk,Dk,kl,f4,S1)(a)}var NA=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="bidirectional-bar",t}return n.getDefaultOptions=function(){return hn({},a.getDefaultOptions.call(this),{syncViewPadding:b1})},n.prototype.changeData=function(t){t===void 0&&(t=[]),this.chart.emit(Ue.BEFORE_CHANGE_DATA,Ka.fromData(this.chart,Ue.BEFORE_CHANGE_DATA,null)),this.updateOption({data:t});var s=this.options,l=s.xField,f=s.yField,d=s.layout,m=pS(l,f,Kf,t,wd(d)),x=m[0],A=m[1],P=xo(this.chart,zp),L=xo(this.chart,uf);P.data(x),L.data(A),this.chart.render(!0),this.chart.emit(Ue.AFTER_CHANGE_DATA,Ka.fromData(this.chart,Ue.AFTER_CHANGE_DATA,null))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return dS},n.SERIES_FIELD_KEY=Kf,n}(so),vS,Hm="$$range$$",Fk="low-q1-median-q3-high",Bk="$$y_outliers$$",zA="outliers_view",gS=hn({},so.getDefaultOptions(),{meta:(vS={},vS[Hm]={min:0,alias:Fk},vS),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),UA=function(a,n){var t=a;if(Array.isArray(n)){var s=n[0],l=n[1],f=n[2],d=n[3],m=n[4];t=(0,E.UI)(a,function(x){return x[Hm]=[x[s],x[l],x[f],x[d],x[m]],x})}return t};function Nk(a){var n=a.chart,t=a.options,s=t.xField,l=t.yField,f=t.groupField,d=t.color,m=t.tooltip,x=t.boxStyle;n.data(UA(t.data,l));var A=(0,E.kJ)(l)?Hm:l,P=l?(0,E.kJ)(l)?l:[l]:[],L=m;L!==!1&&(L=hn({},{fields:(0,E.kJ)(l)?l:[]},L));var B=Zb(hn({},a,{options:{xField:s,yField:A,seriesField:f,tooltip:L,rawFields:P,label:!1,schema:{shape:"box",color:d,style:x}}})).ext;return f&&B.geometry.adjust("dodge"),a}function zk(a){var n=a.chart,t=a.options,s=t.xField,l=t.data,f=t.outliersField,d=t.outliersStyle,m=t.padding,x=t.label;if(!f)return a;var A=n.createView({padding:m,id:zA}),P=l.reduce(function(L,B){var U=B[f];return U.forEach(function(Y){var se;return L.push((0,M.pi)((0,M.pi)({},B),(se={},se[f]=Y,se)))}),L},[]);return A.data(P),wh({chart:A,options:{xField:s,yField:f,point:{shape:"circle",style:d},label:x}}),A.axis(!1),a}function ZA(a){var n,t,s=a.chart,l=a.options,f=l.meta,d=l.xAxis,m=l.yAxis,x=l.xField,A=l.yField,P=l.outliersField,L=Array.isArray(A)?Hm:A,B={};if(P){var U=Bk;B=(n={},n[P]={sync:U,nice:!0},n[L]={sync:U,nice:!0},n)}var Y=hn(B,f,(t={},t[x]=ns(d,Hc),t[L]=ns(m,Hc),t));return s.scale(Y),a}function lf(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField,m=Array.isArray(d)?Hm:d;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(Hm,!1):n.axis(m,l),a}function mS(a){var n=a.chart,t=a.options,s=t.legend,l=t.groupField;return l?s?n.legend(l,s):n.legend(l,{position:"bottom"}):n.legend(!1),a}function VA(a){return Fa(Nk,zk,ZA,lf,mS,kl,bu(),js,ws,Ko)(a)}var h4=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="box",t}return n.getDefaultOptions=function(){return gS},n.prototype.changeData=function(t){this.updateOption({data:t});var s=this.options.yField,l=this.chart.views.find(function(f){return f.id===zA});l&&l.data(t),this.chart.changeData(UA(t,s))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return VA},n}(so);function HA(a,n,t){return a.length>1?"".concat(n,"_").concat(t):"".concat(n)}function Sy(a){var n=a.data,t=a.xField,s=a.measureField,l=a.rangeField,f=a.targetField,d=a.layout,m=[],x=[];n.forEach(function(L,B){var U=[L[l]].flat();U.sort(function(be,Ee){return be-Ee}),U.forEach(function(be,Ee){var it,gt=Ee===0?be:U[Ee]-U[Ee-1];m.push((it={rKey:"".concat(l,"_").concat(Ee)},it[t]=t?L[t]:String(B),it[l]=gt,it))});var Y=[L[s]].flat();Y.forEach(function(be,Ee){var it;m.push((it={mKey:HA(Y,s,Ee)},it[t]=t?L[t]:String(B),it[s]=be,it))});var se=[L[f]].flat();se.forEach(function(be,Ee){var it;m.push((it={tKey:HA(se,f,Ee)},it[t]=t?L[t]:String(B),it[f]=be,it))}),x.push(L[l],L[s],L[f])});var A=Math.min.apply(Math,x.flat(1/0)),P=Math.max.apply(Math,x.flat(1/0));return A=A>0?0:A,d==="vertical"&&m.reverse(),{min:A,max:P,ds:m}}function yS(a){var n=a.chart,t=a.options,s=t.bulletStyle,l=t.targetField,f=t.rangeField,d=t.measureField,m=t.xField,x=t.color,A=t.layout,P=t.size,L=t.label,B=Sy(t),U=B.min,Y=B.max,se=B.ds;n.data(se);var be=hn({},a,{options:{xField:m,yField:f,seriesField:"rKey",isStack:!0,label:(0,E.U2)(L,"range"),interval:{color:(0,E.U2)(x,"range"),style:(0,E.U2)(s,"range"),size:(0,E.U2)(P,"range")}}});jc(be),n.geometries[0].tooltip(!1);var Ee=hn({},a,{options:{xField:m,yField:d,seriesField:"mKey",isStack:!0,label:(0,E.U2)(L,"measure"),interval:{color:(0,E.U2)(x,"measure"),style:(0,E.U2)(s,"measure"),size:(0,E.U2)(P,"measure")}}});jc(Ee);var it=hn({},a,{options:{xField:m,yField:l,seriesField:"tKey",label:(0,E.U2)(L,"target"),point:{color:(0,E.U2)(x,"target"),style:(0,E.U2)(s,"target"),size:(0,E.mf)((0,E.U2)(P,"target"))?function(gt){return(0,E.U2)(P,"target")(gt)/2}:(0,E.U2)(P,"target")/2,shape:A==="horizontal"?"line":"hyphen"}}});return wh(it),A==="horizontal"&&n.coordinate().transpose(),(0,M.pi)((0,M.pi)({},a),{ext:{data:{min:U,max:Y}}})}function _S(a){var n,t,s=a.options,l=a.ext,f=s.xAxis,d=s.yAxis,m=s.targetField,x=s.rangeField,A=s.measureField,P=s.xField,L=l.data;return Fa(Vu((n={},n[P]=f,n[A]=d,n),(t={},t[A]={min:L==null?void 0:L.min,max:L==null?void 0:L.max,sync:!0},t[m]={sync:"".concat(A)},t[x]={sync:"".concat(A)},t)))(a)}function Uk(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.measureField,m=t.rangeField,x=t.targetField;return n.axis("".concat(m),!1),n.axis("".concat(x),!1),s===!1?n.axis("".concat(f),!1):n.axis("".concat(f),s),l===!1?n.axis("".concat(d),!1):n.axis("".concat(d),l),a}function E1(a){var n=a.chart,t=a.options,s=t.legend;return n.removeInteraction("legend-filter"),n.legend(s),n.legend("rKey",!1),n.legend("mKey",!1),n.legend("tKey",!1),a}function xS(a){var n=a.chart,t=a.options,s=t.label,l=t.measureField,f=t.targetField,d=t.rangeField,m=n.geometries,x=m[0],A=m[1],P=m[2];return(0,E.U2)(s,"range")?x.label("".concat(d),(0,M.pi)({layout:[{type:"limit-in-plot"}]},uc(s.range))):x.label(!1),(0,E.U2)(s,"measure")?A.label("".concat(l),(0,M.pi)({layout:[{type:"limit-in-plot"}]},uc(s.measure))):A.label(!1),(0,E.U2)(s,"target")?P.label("".concat(f),(0,M.pi)({layout:[{type:"limit-in-plot"}]},uc(s.target))):P.label(!1),a}function Zk(a){Fa(yS,_S,Uk,E1,Ko,xS,kl,js,ws)(a)}var w1=hn({},so.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}}),Ey=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="bullet",t}return n.getDefaultOptions=function(){return w1},n.prototype.changeData=function(t){this.updateOption({data:t});var s=Sy(this.options),l=s.min,f=s.max,d=s.ds;_S({options:this.options,ext:{data:{min:l,max:f}},chart:this.chart}),this.chart.changeData(d)},n.prototype.getSchemaAdaptor=function(){return Zk},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(so),Vk={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(a){return a.id},source:function(a){return a.source},target:function(a){return a.target},sourceWeight:function(a){return a.value||1},targetWeight:function(a){return a.value||1},sortBy:null};function Hk(a,n,t){(0,E.U5)(a,function(s,l){s.inEdges=n.filter(function(f){return"".concat(t.target(f))==="".concat(l)}),s.outEdges=n.filter(function(f){return"".concat(t.source(f))==="".concat(l)}),s.edges=s.outEdges.concat(s.inEdges),s.frequency=s.edges.length,s.value=0,s.inEdges.forEach(function(f){s.value+=t.targetWeight(f)}),s.outEdges.forEach(function(f){s.value+=t.sourceWeight(f)})})}function jk(a,n){var t={weight:function(l,f){return f.value-l.value},frequency:function(l,f){return f.frequency-l.frequency},id:function(l,f){return"".concat(n.id(l)).localeCompare("".concat(n.id(f)))}},s=t[n.sortBy];!s&&(0,E.mf)(n.sortBy)&&(s=n.sortBy),s&&a.sort(s)}function Wk(a,n){var t=a.length;if(!t)throw new TypeError("Invalid nodes: it's empty!");if(n.weight){var s=n.nodePaddingRatio;if(s<0||s>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var l=s/(2*t),f=n.nodeWidthRatio;if(f<=0||f>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var d=0;a.forEach(function(x){d+=x.value}),a.forEach(function(x){x.weight=x.value/d,x.width=x.weight*(1-s),x.height=f}),a.forEach(function(x,A){for(var P=0,L=A-1;L>=0;L--)P+=a[L].width+2*l;var B=x.minX=l+P,U=x.maxX=x.minX+x.width,Y=x.minY=n.y-f/2,se=x.maxY=Y+f;x.x=[B,U,U,B],x.y=[Y,Y,se,se]})}else{var m=1/t;a.forEach(function(x,A){x.x=(A+.5)*m,x.y=n.y})}return a}function jA(a,n,t){if(t.weight){var s={};(0,E.U5)(a,function(l,f){s[f]=l.value}),n.forEach(function(l){var f=t.source(l),d=t.target(l),m=a[f],x=a[d];if(m&&x){var A=s[f],P=t.sourceWeight(l),L=m.minX+(m.value-A)/m.value*m.width,B=L+P/m.value*m.width;s[f]-=P;var U=s[d],Y=t.targetWeight(l),se=x.minX+(x.value-U)/x.value*x.width,be=se+Y/x.value*x.width;s[d]-=Y;var Ee=t.y;l.x=[L,B,se,be],l.y=[Ee,Ee,Ee,Ee],l.source=m,l.target=x}})}else n.forEach(function(l){var f=a[t.source(l)],d=a[t.target(l)];f&&d&&(l.x=[f.x,d.x],l.y=[f.y,d.y],l.source=f,l.target=d)});return n}function Gk(a){return(0,E.f0)({},Vk,a)}function WA(a,n){var t=Gk(a),s={},l=n.nodes,f=n.links;l.forEach(function(x){var A=t.id(x);s[A]=x}),Hk(s,f,t),jk(l,t);var d=Wk(l,t),m=jA(s,f,t);return{nodes:d,links:m}}var bS="x",SS="y",ES="name",wS="source",$k={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(a,n){var t=(a[0]+a[1])/2,s=t>.5?-4:4;return{offsetX:s,content:n}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(a){return!(0,E.U2)(a,[0,"data","isNode"])},formatter:function(a){var n=a.source,t=a.target,s=a.value;return{name:"".concat(n," -> ").concat(t),value:s}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function C1(a){var n=a.options,t=n.data,s=n.sourceField,l=n.targetField,f=n.weightField,d=n.nodePaddingRatio,m=n.nodeWidthRatio,x=n.rawFields,A=x===void 0?[]:x,P=Pb(t,s,l,f),L=WA({weight:!0,nodePaddingRatio:d,nodeWidthRatio:m},P),B=L.nodes,U=L.links,Y=B.map(function(be){return(0,M.pi)((0,M.pi)({},ns(be,(0,M.ev)(["id","x","y","name"],A,!0))),{isNode:!0})}),se=U.map(function(be){return(0,M.pi)((0,M.pi)({source:be.source.name,target:be.target.name,name:be.source.name||be.target.name},ns(be,(0,M.ev)(["x","y","value"],A,!0))),{isNode:!1})});return(0,M.pi)((0,M.pi)({},a),{ext:(0,M.pi)((0,M.pi)({},a.ext),{chordData:{nodesData:Y,edgesData:se}})})}function CS(a){var n,t=a.chart;return t.scale((n={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},n[ES]={sync:"color"},n[wS]={sync:"color"},n)),a}function GA(a){var n=a.chart;return n.axis(!1),a}function Xk(a){var n=a.chart;return n.legend(!1),a}function Yk(a){var n=a.chart,t=a.options,s=t.tooltip;return n.tooltip(s),a}function Kk(a){var n=a.chart;return n.coordinate("polar").reflect("y"),a}function qk(a){var n=a.chart,t=a.options,s=a.ext.chordData.nodesData,l=t.nodeStyle,f=t.label,d=t.tooltip,m=n.createView();return m.data(s),a1({chart:m,options:{xField:bS,yField:SS,seriesField:ES,polygon:{style:l},label:f,tooltip:d}}),a}function wy(a){var n=a.chart,t=a.options,s=a.ext.chordData.edgesData,l=t.edgeStyle,f=t.tooltip,d=n.createView();d.data(s);var m={xField:bS,yField:SS,seriesField:wS,edge:{style:l,shape:"arc"},tooltip:f};return TC({chart:d,options:m}),a}function $A(a){var n=a.chart,t=a.options,s=t.animation;return q_(n,s,XB(n)),a}function Qk(a){return Fa(Ko,C1,Kk,CS,GA,Xk,Yk,wy,qk,js,Wv,$A)(a)}var Jk=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="chord",t}return n.getDefaultOptions=function(){return $k},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return Qk},n}(so),XA=["x","y","r","name","value","path","depth"],YA={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}},KA=4,eL=0,qA=5,QA="drilldown-bread-crumb",tL={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},jm="hierarchy-data-transform-params",rL=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.name="drill-down",t.historyCache=[],t.breadCrumbGroup=null,t.breadCrumbCfg=tL,t}return n.prototype.click=function(){var t=(0,E.U2)(this.context,["event","data","data"]);if(!t)return!1;this.drill(t),this.drawBreadCrumb()},n.prototype.resetPosition=function(){if(this.breadCrumbGroup){var t=this.context.view.getCoordinate(),s=this.breadCrumbGroup,l=s.getBBox(),f=this.getButtonCfg().position,d={x:t.start.x,y:t.end.y-(l.height+qA*2)};t.isPolar&&(d={x:0,y:0}),f==="bottom-left"&&(d={x:t.start.x,y:t.start.y});var m=sc.transform(null,[["t",d.x+eL,d.y+l.height+qA]]);s.setMatrix(m)}},n.prototype.back=function(){(0,E.dp)(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},n.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},n.prototype.drill=function(t){var s=this.context.view,l=(0,E.U2)(s,["interactions","drill-down","cfg","transformData"],function(A){return A}),f=l((0,M.pi)({data:t.data},t[jm]));s.changeData(f);for(var d=[],m=t;m;){var x=m.data;d.unshift({id:"".concat(x.name,"_").concat(m.height,"_").concat(m.depth),name:x.name,children:l((0,M.pi)({data:x},t[jm]))}),m=m.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(d)},n.prototype.backTo=function(t){if(!(!t||t.length<=0)){var s=this.context.view,l=(0,E.Z$)(t).children;s.changeData(l),t.length>1?(this.historyCache=t,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},n.prototype.getButtonCfg=function(){var t=this.context.view,s=(0,E.U2)(t,["interactions","drill-down","cfg","drillDownConfig"]);return hn(this.breadCrumbCfg,s==null?void 0:s.breadCrumb,this.cfg)},n.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},n.prototype.drawBreadCrumbGroup=function(){var t=this,s=this.getButtonCfg(),l=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:QA});var f=0;l.forEach(function(d,m){var x=t.breadCrumbGroup.addShape({type:"text",id:d.id,name:"".concat(QA,"_").concat(d.name,"_text"),attrs:(0,M.pi)((0,M.pi)({text:m===0&&!(0,E.UM)(s.rootText)?s.rootText:d.name},s.textStyle),{x:f,y:0})}),A=x.getBBox();if(f+=A.width+KA,x.on("click",function(B){var U,Y=B.target.get("id");if(Y!==((U=(0,E.Z$)(l))===null||U===void 0?void 0:U.id)){var se=l.slice(0,l.findIndex(function(be){return be.id===Y})+1);t.backTo(se)}}),x.on("mouseenter",function(B){var U,Y=B.target.get("id");Y!==((U=(0,E.Z$)(l))===null||U===void 0?void 0:U.id)?x.attr(s.activeTextStyle):x.attr({cursor:"default"})}),x.on("mouseleave",function(){x.attr(s.textStyle)}),m<l.length-1){var P=t.breadCrumbGroup.addShape({type:"text",name:"".concat(s.name,"_").concat(d.name,"_divider"),attrs:(0,M.pi)((0,M.pi)({text:s.dividerText},s.textStyle),{x:f,y:0})}),L=P.getBBox();f+=L.width+KA}})},n.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},n.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),a.prototype.destroy.call(this)},n}(Rn);function JA(a){return vt()(a)==="object"&&"length"in a?a:Array.from(a)}function eT(a){for(var n=a.length,t,s;n;)s=Math.random()*n--|0,t=a[n],a[n]=a[s],a[s]=t;return a}function AS(a){for(var n=0,t=(a=eT(Array.from(a))).length,s=[],l,f;n<t;)l=a[n],f&&TS(f,l)?++n:(f=iL(s=nL(s,l)),n=0);return f}function nL(a,n){var t,s;if(MS(n,a))return[n];for(t=0;t<a.length;++t)if(A1(n,a[t])&&MS(Qg(a[t],n),a))return[a[t],n];for(t=0;t<a.length-1;++t)for(s=t+1;s<a.length;++s)if(A1(Qg(a[t],a[s]),n)&&A1(Qg(a[t],n),a[s])&&A1(Qg(a[s],n),a[t])&&MS(oL(a[t],a[s],n),a))return[a[t],a[s],n];throw new Error}function A1(a,n){var t=a.r-n.r,s=n.x-a.x,l=n.y-a.y;return t<0||t*t<s*s+l*l}function TS(a,n){var t=a.r-n.r+Math.max(a.r,n.r,1)*1e-9,s=n.x-a.x,l=n.y-a.y;return t>0&&t*t>s*s+l*l}function MS(a,n){for(var t=0;t<n.length;++t)if(!TS(a,n[t]))return!1;return!0}function iL(a){switch(a.length){case 1:return aL(a[0]);case 2:return Qg(a[0],a[1]);case 3:return oL(a[0],a[1],a[2])}}function aL(a){return{x:a.x,y:a.y,r:a.r}}function Qg(a,n){var t=a.x,s=a.y,l=a.r,f=n.x,d=n.y,m=n.r,x=f-t,A=d-s,P=m-l,L=Math.sqrt(x*x+A*A);return{x:(t+f+x/L*P)/2,y:(s+d+A/L*P)/2,r:(L+l+m)/2}}function oL(a,n,t){var s=a.x,l=a.y,f=a.r,d=n.x,m=n.y,x=n.r,A=t.x,P=t.y,L=t.r,B=s-d,U=s-A,Y=l-m,se=l-P,be=x-f,Ee=L-f,it=s*s+l*l-f*f,gt=it-d*d-m*m+x*x,xt=it-A*A-P*P+L*L,Bt=U*Y-B*se,_r=(Y*xt-se*gt)/(Bt*2)-s,Or=(se*be-Y*Ee)/Bt,Gr=(U*gt-B*xt)/(Bt*2)-l,mn=(B*Ee-U*be)/Bt,cn=Or*Or+mn*mn-1,Nn=2*(f+_r*Or+Gr*mn),hi=_r*_r+Gr*Gr-f*f,Wi=-(cn?(Nn+Math.sqrt(Nn*Nn-4*cn*hi))/(2*cn):hi/Nn);return{x:s+_r+Or*Wi,y:l+Gr+mn*Wi,r:Wi}}function RS(a,n,t){var s=a.x-n.x,l,f,d=a.y-n.y,m,x,A=s*s+d*d;A?(f=n.r+t.r,f*=f,x=a.r+t.r,x*=x,f>x?(l=(A+x-f)/(2*A),m=Math.sqrt(Math.max(0,x/A-l*l)),t.x=a.x-l*s-m*d,t.y=a.y-l*d+m*s):(l=(A+f-x)/(2*A),m=Math.sqrt(Math.max(0,f/A-l*l)),t.x=n.x+l*s-m*d,t.y=n.y+l*d+m*s)):(t.x=n.x+t.r,t.y=n.y)}function IS(a,n){var t=a.r+n.r-1e-6,s=n.x-a.x,l=n.y-a.y;return t>0&&t*t>s*s+l*l}function PS(a){var n=a._,t=a.next._,s=n.r+t.r,l=(n.x*t.r+t.x*n.r)/s,f=(n.y*t.r+t.y*n.r)/s;return l*l+f*f}function Wm(a){this._=a,this.next=null,this.previous=null}function T1(a){if(!(l=(a=JA(a)).length))return 0;var n,t,s,l,f,d,m,x,A,P,L;if(n=a[0],n.x=0,n.y=0,!(l>1))return n.r;if(t=a[1],n.x=-t.r,t.x=n.r,t.y=0,!(l>2))return n.r+t.r;RS(t,n,s=a[2]),n=new Wm(n),t=new Wm(t),s=new Wm(s),n.next=s.previous=t,t.next=n.previous=s,s.next=t.previous=n;e:for(m=3;m<l;++m){RS(n._,t._,s=a[m]),s=new Wm(s),x=t.next,A=n.previous,P=t._.r,L=n._.r;do if(P<=L){if(IS(x._,s._)){t=x,n.next=t,t.previous=n,--m;continue e}P+=x._.r,x=x.next}else{if(IS(A._,s._)){n=A,n.next=t,t.previous=n,--m;continue e}L+=A._.r,A=A.previous}while(x!==A.next);for(s.previous=n,s.next=t,n.next=t.previous=t=s,f=PS(n);(s=s.next)!==t;)(d=PS(s))<f&&(n=s,f=d);t=n.next}for(n=[t._],s=t;(s=s.next)!==t;)n.push(s._);for(s=AS(n),m=0;m<l;++m)n=a[m],n.x-=s.x,n.y-=s.y;return s.r}function Af(a){return T1(a),a}function OS(a){return a==null?null:fv(a)}function fv(a){if(typeof a!="function")throw new Error;return a}function Gm(){return 0}function Jg(a){return function(){return a}}function sL(a){return Math.sqrt(a.value)}function uL(){var a=null,n=1,t=1,s=Gm;function l(f){return f.x=n/2,f.y=t/2,a?f.eachBefore(Cy(a)).eachAfter(em(s,.5)).eachBefore(kS(1)):f.eachBefore(Cy(sL)).eachAfter(em(Gm,1)).eachAfter(em(s,f.r/Math.min(n,t))).eachBefore(kS(Math.min(n,t)/(2*f.r))),f}return l.radius=function(f){return arguments.length?(a=OS(f),l):a},l.size=function(f){return arguments.length?(n=+f[0],t=+f[1],l):[n,t]},l.padding=function(f){return arguments.length?(s=typeof f=="function"?f:Jg(+f),l):s},l}function Cy(a){return function(n){n.children||(n.r=Math.max(0,+a(n)||0))}}function em(a,n){return function(t){if(s=t.children){var s,l,f=s.length,d=a(t)*n||0,m;if(d)for(l=0;l<f;++l)s[l].r+=d;if(m=T1(s),d)for(l=0;l<f;++l)s[l].r-=d;t.r=m+d}}}function kS(a){return function(n){var t=n.parent;n.r*=a,t&&(n.x=t.x+a*n.x,n.y=t.y+a*n.y)}}var tT=k(9783),rT=k.n(tT);function tm(a){var n=0,t=a.children,s=t&&t.length;if(!s)n=1;else for(;--s>=0;)n+=t[s].value;a.value=n}function LS(){return this.eachAfter(tm)}var M1=k(96695),nT=k.n(M1);function lL(a,n){var t=-1,s=nT()(this),l;try{for(s.s();!(l=s.n()).done;){var f=l.value;a.call(n,f,++t,this)}}catch(d){s.e(d)}finally{s.f()}return this}function $m(a,n){for(var t=this,s=[t],l,f,d=-1;t=s.pop();)if(a.call(n,t,++d,this),l=t.children)for(f=l.length-1;f>=0;--f)s.push(l[f]);return this}function cL(a,n){for(var t=this,s=[t],l=[],f,d,m,x=-1;t=s.pop();)if(l.push(t),f=t.children)for(d=0,m=f.length;d<m;++d)s.push(f[d]);for(;t=l.pop();)a.call(n,t,++x,this);return this}function fL(a,n){var t=-1,s=nT()(this),l;try{for(s.s();!(l=s.n()).done;){var f=l.value;if(a.call(n,f,++t,this))return f}}catch(d){s.e(d)}finally{s.f()}}function p4(a){return this.eachAfter(function(n){for(var t=+a(n.data)||0,s=n.children,l=s&&s.length;--l>=0;)t+=s[l].value;n.value=t})}function d4(a){return this.eachBefore(function(n){n.children&&n.children.sort(a)})}function v4(a){for(var n=this,t=g4(n,a),s=[n];n!==t;)n=n.parent,s.push(n);for(var l=s.length;a!==t;)s.splice(l,0,a),a=a.parent;return s}function g4(a,n){if(a===n)return a;var t=a.ancestors(),s=n.ancestors(),l=null;for(a=t.pop(),n=s.pop();a===n;)l=a,a=t.pop(),n=s.pop();return l}function m4(){for(var a=this,n=[a];a=a.parent;)n.push(a);return n}function y4(){return Array.from(this)}function _4(){var a=[];return this.eachBefore(function(n){n.children||a.push(n)}),a}function iT(){var a=this,n=[];return a.each(function(t){t!==a&&n.push({source:t.parent,target:t})}),n}var DS=k(15009),hL=k.n(DS),aT=hL()().mark(oT);function oT(){var a,n,t,s,l,f;return hL()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:a=this,t=[a];case 1:n=t.reverse(),t=[];case 2:if(!(a=n.pop())){m.next=8;break}return m.next=5,a;case 5:if(s=a.children)for(l=0,f=s.length;l<f;++l)t.push(s[l]);m.next=2;break;case 8:if(t.length){m.next=1;break}case 9:case"end":return m.stop()}},aT,this)}function Ay(a,n){a instanceof Map?(a=[void 0,a],n===void 0&&(n=x4)):n===void 0&&(n=pL);for(var t=new Ty(a),s,l=[t],f,d,m,x;s=l.pop();)if((d=n(s.data))&&(x=(d=Array.from(d)).length))for(s.children=d,m=x-1;m>=0;--m)l.push(f=d[m]=new Ty(d[m])),f.parent=s,f.depth=s.depth+1;return t.eachBefore(lT)}function sT(){return Ay(this).eachBefore(uT)}function pL(a){return a.children}function x4(a){return Array.isArray(a)?a[1]:null}function uT(a){a.data.value!==void 0&&(a.value=a.data.value),a.data=a.data.data}function lT(a){var n=0;do a.height=n;while((a=a.parent)&&a.height<++n)}function Ty(a){this.data=a,this.depth=this.height=0,this.parent=null}Ty.prototype=Ay.prototype=rT()({constructor:Ty,count:LS,each:lL,eachAfter:cL,eachBefore:$m,find:fL,sum:p4,sort:d4,path:v4,ancestors:m4,descendants:y4,leaves:_4,links:iT,copy:sT},Symbol.iterator,oT);var My="nodeIndex",cT="childNodeCount",fT="nodeAncestor",hv="Invalid field: it must be a string!";function R1(a,n){var t=a.field,s=a.fields;if((0,E.HD)(t))return t;if((0,E.kJ)(t))return console.warn(hv),t[0];if(console.warn("".concat(hv," will try to get fields instead.")),(0,E.HD)(s))return s;if((0,E.kJ)(s)&&s.length)return s[0];if(n)return n;throw new TypeError(hv)}function Xm(a){var n=[];if(a&&a.each){var t,s;a.each(function(l){var f,d;l.parent!==t?(t=l.parent,s=0):s+=1;var m=(0,E.hX)((((f=l.ancestors)===null||f===void 0?void 0:f.call(l))||[]).map(function(x){return n.find(function(A){return A.name===x.name})||x}),function(x){var A=x.depth;return A>0&&A<l.depth});l[fT]=m,l[cT]=((d=l.children)===null||d===void 0?void 0:d.length)||0,l[My]=s,n.push(l)})}else a&&a.eachNode&&a.eachNode(function(l){n.push(l)});return n}var dL={field:"value",as:["x","y","r"],sort:function(a,n){return n.value-a.value}};function vL(a,n){n=(0,E.f0)({},dL,n);var t=n.as;if(!(0,E.kJ)(t)||t.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var s;try{s=R1(n)}catch(A){console.warn(A)}var l=function(A){return uL().size(n.size).padding(n.padding)(Ay(A).sum(function(P){return P[s]}).sort(n.sort))},f=l(a),d=t[0],m=t[1],x=t[2];return f.each(function(A){A[d]=A.x,A[m]=A.y,A[x]=A.r}),Xm(f)}function rm(a){var n=a.data,t=a.hierarchyConfig,s=a.rawFields,l=s===void 0?[]:s,f=a.enableDrillDown,d=vL(n,(0,M.pi)((0,M.pi)({},t),{field:"value",as:["x","y","r"]})),m=[];return d.forEach(function(x){for(var A,P=x.data.name,L=(0,M.pi)({},x);L.depth>1;)P="".concat((A=L.parent.data)===null||A===void 0?void 0:A.name," / ").concat(P),L=L.parent;if(f&&x.depth>2)return null;var B=hn({},x.data,(0,M.pi)((0,M.pi)((0,M.pi)({},ns(x.data,l)),{path:P}),x));B.ext=t,B[jm]={hierarchyConfig:t,rawFields:l,enableDrillDown:f},m.push(B)}),m}function hT(a,n,t){var s=Vg([a,n]),l=s[0],f=s[1],d=s[2],m=s[3],x=t.width,A=t.height,P=x-(m+f),L=A-(l+d),B=Math.min(P,L),U=(P-B)/2,Y=(L-B)/2,se=l+Y,be=f+U,Ee=d+Y,it=m+U,gt=[se,be,Ee,it],xt=B<0?0:B;return{finalPadding:gt,finalSize:xt}}function gL(a){var n=a.chart,t=Math.min(n.viewBBox.width,n.viewBBox.height);return hn({options:{size:function(s){var l=s.r;return l*t}}},a)}function b4(a){var n=a.options,t=a.chart,s=t.viewBBox,l=n.padding,f=n.appendPadding,d=n.drilldown,m=f;if(d!=null&&d.enabled){var x=jv(t.appendPadding,(0,E.U2)(d,["breadCrumb","position"]));m=Vg([x,f])}var A=hT(l,m,s).finalPadding;return t.padding=A,t.appendPadding=0,a}function S4(a){var n=a.chart,t=a.options,s=n.padding,l=n.appendPadding,f=t.color,d=t.colorField,m=t.pointStyle,x=t.hierarchyConfig,A=t.sizeField,P=t.rawFields,L=P===void 0?[]:P,B=t.drilldown,U=rm({data:t.data,hierarchyConfig:x,enableDrillDown:B==null?void 0:B.enabled,rawFields:L});n.data(U);var Y=n.viewBBox,se=hT(s,l,Y).finalSize,be=function(Ee){var it=Ee.r;return it*se};return A&&(be=function(Ee){return Ee[A]*se}),wh(hn({},a,{options:{xField:"x",yField:"y",seriesField:d,sizeField:A,rawFields:(0,M.ev)((0,M.ev)([],XA,!0),L,!0),point:{color:f,style:m,shape:"circle",size:be}}})),a}function E4(a){return Fa(Vu({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(a)}function w4(a){var n=a.chart,t=a.options,s=t.tooltip;if(s===!1)n.tooltip(!1);else{var l=s;(0,E.U2)(s,"fields")||(l=hn({},{customItems:function(f){return f.map(function(d){var m=(0,E.U2)(n.getOptions(),"scales"),x=(0,E.U2)(m,["name","formatter"],function(P){return P}),A=(0,E.U2)(m,["value","formatter"],function(P){return P});return(0,M.pi)((0,M.pi)({},d),{name:x(d.data.name),value:A(d.data.value)})})}},l)),n.tooltip(l)}return a}function C4(a){var n=a.chart;return n.axis(!1),a}function A4(a){var n=a.drilldown,t=a.interactions,s=t===void 0?[]:t;return n!=null&&n.enabled?hn({},a,{interactions:(0,M.ev)((0,M.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:rm,enableDrillDown:!0}}],!1)}):a}function T4(a){var n=a.chart,t=a.options;return js({chart:n,options:A4(t)}),a}function pT(a){return Fa(Eh("pointStyle"),gL,b4,Ko,E4,S4,C4,Bm,w4,T4,ws,bu())(a)}function FS(a){var n=(0,E.U2)(a,["event","data","data"],{});return(0,E.kJ)(n.children)&&n.children.length>0}function mL(a){var n=a.view.getCoordinate(),t=n.innerRadius;if(t){var s=a.event,l=s.x,f=s.y,d=n.center,m=d.x,x=d.y,A=n.getRadius()*t,P=Math.sqrt(Math.pow(m-l,2)+Math.pow(x-f,2));return P<A}return!1}Kr("drill-down-action",rL),Fn("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:FS},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:mL}],start:[{trigger:"element:click",isEnable:FS,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:mL,action:["drill-down-action:back"]}]});var dT=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="circle-packing",t}return n.getDefaultOptions=function(){return YA},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return pT},n.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},n}(so),Wc="left-axes-view",tp="right-axes-view",I1={nice:!0,label:{autoHide:!0,autoRotate:!1}},BS=(0,M.pi)((0,M.pi)({},I1),{position:"left"}),Ry=(0,M.pi)((0,M.pi)({},I1),{position:"right",grid:null}),Ym;(function(a){a.Left="Left",a.Right="Right"})(Ym||(Ym={}));var $v;(function(a){a.Line="line",a.Column="column"})($v||($v={}));function Kl(a){return(0,E.U2)(a,"geometry")===$v.Line}function NS(a){return(0,E.U2)(a,"geometry")===$v.Column}function vT(a,n,t){return NS(t)?hn({},{geometry:$v.Column,label:t.label&&t.isRange?{content:function(s){var l;return(l=s[n])===null||l===void 0?void 0:l.join("-")}}:void 0},t):(0,M.pi)({geometry:$v.Line},t)}function Cs(a,n){var t=a[0],s=a[1];if((0,E.kJ)(n)){var l=n[0],f=n[1];return[l,f]}var d=(0,E.U2)(n,t),m=(0,E.U2)(n,s);return[d,m]}function gT(a,n){return n===Ym.Left?a===!1?!1:hn({},BS,a):n===Ym.Right?a===!1?!1:hn({},Ry,a):a}function Iy(a){var n=a.options,t=a.chart,s=n.geometryOption,l=s.isStack,f=s.color,d=s.seriesField,m=s.groupField,x=s.isGroup,A=["xField","yField"];if(Kl(s)){Wg(hn({},a,{options:(0,M.pi)((0,M.pi)((0,M.pi)({},ns(n,A)),s),{line:{color:s.color,style:s.lineStyle}})})),wh(hn({},a,{options:(0,M.pi)((0,M.pi)((0,M.pi)({},ns(n,A)),s),{point:s.point&&(0,M.pi)({color:f,shape:"circle"},s.point)})}));var P=[];x&&P.push({type:"dodge",dodgeBy:m||d,customOffset:0}),l&&P.push({type:"stack"}),P.length&&(0,E.S6)(t.geometries,function(L){L.adjust(P)})}return NS(s)&&l1(hn({},a,{options:(0,M.pi)((0,M.pi)((0,M.pi)({},ns(n,A)),s),{widthRatio:s.columnWidthRatio,interval:(0,M.pi)((0,M.pi)({},ns(s,["color"])),{style:s.columnStyle})})})),a}function Km(a){var n=a.view,t=a.geometryOption,s=a.yField,l=a.legend,f=(0,E.U2)(l,"marker"),d=el(n,Kl(t)?"line":"interval");if(!t.seriesField){var m=(0,E.U2)(n,"options.scales.".concat(s,".alias"))||s,x=d.getAttribute("color"),A=n.getTheme().defaultColor;x&&(A=sc.getMappingValue(x,m,(0,E.U2)(x,["values",0],A)));var P=((0,E.mf)(f)?f:!(0,E.xb)(f)&&hn({},{style:{stroke:A,fill:A}},f))||(Kl(t)?{symbol:function(B,U,Y){return[["M",B-Y,U],["L",B+Y,U]]},style:{lineWidth:2,r:6,stroke:A}}:{symbol:"square",style:{fill:A}});return[{value:s,name:m,marker:P,isGeometry:!0,viewId:n.id}]}var L=d.getGroupAttributes();return(0,E.u4)(L,function(B,U){var Y=sc.getLegendItems(n,d,U,n.getTheme(),f);return B.concat(Y)},[])}var mT=function(a,n){var t=n[0],s=n[1],l=a.getOptions().data,f=a.getXScale(),d=(0,E.dp)(l);if(!(!f||!d)){var m=!0,x=(0,E.I)(l,f.field),A=m?x:x.reverse(),P=(0,E.dp)(A),L=Math.floor(t*(P-1)),B=Math.floor(s*(P-1));a.filter(f.field,function(U){var Y=A.indexOf(U);return Y>-1?HP(Y,L,B):!0}),a.getRootView().render(!0)}};function yL(a){var n,t=a.options,s=t.geometryOptions,l=s===void 0?[]:s,f=t.xField,d=t.yField,m=(0,E.yW)(l,function(x){var A=x.geometry;return A===$v.Line||A===void 0});return hn({},{options:{geometryOptions:[],meta:(n={},n[f]={type:"cat",sync:!0,range:m?[0,1]:void 0},n),tooltip:{showMarkers:m,showCrosshairs:m,shared:!0,crosshairs:{type:"x"}},interactions:m?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},a,{options:{yAxis:Cs(d,t.yAxis),geometryOptions:[vT(f,d[0],l[0]),vT(f,d[1],l[1])],annotations:Cs(d,t.annotations)}})}function _L(a){var n,t,s=a.chart,l=a.options,f=l.geometryOptions,d={line:0,column:1},m=[{type:(n=f[0])===null||n===void 0?void 0:n.geometry,id:Wc},{type:(t=f[1])===null||t===void 0?void 0:t.geometry,id:tp}];return m.sort(function(x,A){return-d[x.type]+d[A.type]}).forEach(function(x){return s.createView({id:x.id})}),a}function xL(a){var n=a.chart,t=a.options,s=t.xField,l=t.yField,f=t.geometryOptions,d=t.data,m=t.tooltip,x=[(0,M.pi)((0,M.pi)({},f[0]),{id:Wc,data:d[0],yField:l[0]}),(0,M.pi)((0,M.pi)({},f[1]),{id:tp,data:d[1],yField:l[1]})];return x.forEach(function(A){var P=A.id,L=A.data,B=A.yField,U=NS(A)&&A.isPercent,Y=U?PC(L,B,s,B):L,se=xo(n,P).data(Y),be=U?(0,M.pi)({formatter:function(Ee){return{name:Ee[A.seriesField]||B,value:(Number(Ee[B])*100).toFixed(2)+"%"}}},m):m;Iy({chart:se,options:{xField:s,yField:B,tooltip:be,geometryOption:A}})}),a}function bL(a){var n,t=a.chart,s=a.options,l=s.geometryOptions,f=((n=t.getTheme())===null||n===void 0?void 0:n.colors10)||[],d=0;return t.once("beforepaint",function(){(0,E.S6)(l,function(m,x){var A=xo(t,x===0?Wc:tp);if(!m.color){var P=A.getGroupScales(),L=(0,E.U2)(P,[0,"values","length"],1),B=f.slice(d,d+L).concat(x===0?[]:f);A.geometries.forEach(function(U){m.seriesField?U.color(m.seriesField,B):U.color(B[0])}),d+=L}}),t.render(!0)}),a}function yT(a){var n,t,s=a.chart,l=a.options,f=l.xAxis,d=l.yAxis,m=l.xField,x=l.yField;return Vu((n={},n[m]=f,n[x[0]]=d[0],n))(hn({},a,{chart:xo(s,Wc)})),Vu((t={},t[m]=f,t[x[1]]=d[1],t))(hn({},a,{chart:xo(s,tp)})),a}function _T(a){var n=a.chart,t=a.options,s=xo(n,Wc),l=xo(n,tp),f=t.xField,d=t.yField,m=t.xAxis,x=t.yAxis;return n.axis(f,!1),n.axis(d[0],!1),n.axis(d[1],!1),s.axis(f,m),s.axis(d[0],gT(x[0],Ym.Left)),l.axis(f,!1),l.axis(d[1],gT(x[1],Ym.Right)),a}function SL(a){var n=a.chart,t=a.options,s=t.tooltip,l=xo(n,Wc),f=xo(n,tp);return n.tooltip(s),l.tooltip({shared:!0}),f.tooltip({shared:!0}),a}function EL(a){var n=a.chart;return js(hn({},a,{chart:xo(n,Wc)})),js(hn({},a,{chart:xo(n,tp)})),a}function wL(a){var n=a.chart,t=a.options,s=t.annotations,l=(0,E.U2)(s,[0]),f=(0,E.U2)(s,[1]);return bu(l)(hn({},a,{chart:xo(n,Wc),options:{annotations:l}})),bu(f)(hn({},a,{chart:xo(n,tp),options:{annotations:f}})),a}function xT(a){var n=a.chart;return Ko(hn({},a,{chart:xo(n,Wc)})),Ko(hn({},a,{chart:xo(n,tp)})),Ko(a),a}function CL(a){var n=a.chart;return ws(hn({},a,{chart:xo(n,Wc)})),ws(hn({},a,{chart:xo(n,tp)})),a}function bT(a){var n=a.chart,t=a.options,s=t.yAxis;return Nm(hn({},a,{chart:xo(n,Wc),options:{yAxis:s[0]}})),Nm(hn({},a,{chart:xo(n,tp),options:{yAxis:s[1]}})),a}function AL(a){var n=a.chart,t=a.options,s=t.legend,l=t.geometryOptions,f=t.yField,d=t.data,m=xo(n,Wc),x=xo(n,tp);if(s===!1)n.legend(!1);else if((0,E.Kn)(s)&&s.custom===!0)n.legend(s);else{var A=(0,E.U2)(l,[0,"legend"],s),P=(0,E.U2)(l,[1,"legend"],s);n.once("beforepaint",function(){var L=d[0].length?Km({view:m,geometryOption:l[0],yField:f[0],legend:A}):[],B=d[1].length?Km({view:x,geometryOption:l[1],yField:f[1],legend:P}):[];n.legend(hn({},s,{custom:!0,items:L.concat(B)}))}),l[0].seriesField&&m.legend(l[0].seriesField,A),l[1].seriesField&&x.legend(l[1].seriesField,P),n.on("legend-item:click",function(L){var B=(0,E.U2)(L,"gEvent.delegateObject",{});if(B&&B.item){var U=B.item,Y=U.value,se=U.isGeometry,be=U.viewId;if(se){var Ee=(0,E.cx)(f,function(xt){return xt===Y});if(Ee>-1){var it=(0,E.U2)(xo(n,be),"geometries");(0,E.S6)(it,function(xt){xt.changeVisible(!B.item.unchecked)})}}else{var gt=(0,E.U2)(n.getController("legend"),"option.items",[]);(0,E.S6)(n.views,function(xt){var Bt=xt.getGroupScales();(0,E.S6)(Bt,function(_r){_r.values&&_r.values.indexOf(Y)>-1&&xt.filter(_r.field,function(Or){var Gr=(0,E.sE)(gt,function(mn){return mn.value===Or});return!Gr.unchecked})}),n.render(!0)})}}})}return a}function TL(a){var n=a.chart,t=a.options,s=t.slider,l=xo(n,Wc),f=xo(n,tp);return s&&(l.option("slider",s),l.on("slider:valuechanged",function(d){var m=d.event,x=m.value,A=m.originValue;(0,E.Xy)(x,A)||mT(f,x)}),n.once("afterpaint",function(){if(!(0,E.jn)(s)){var d=s.start,m=s.end;(d||m)&&mT(f,[d,m])}})),a}function ML(a){return Fa(yL,_L,xT,xL,yT,_T,bT,SL,EL,wL,CL,bL,AL,TL)(a)}var M4=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dual-axes",t}return n.prototype.getDefaultOptions=function(){return hn({},a.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},n.prototype.getSchemaAdaptor=function(){return ML},n}(so);function RL(a,n){var t=n.data,s=n.coordinate,l=n.interactions,f=n.annotations,d=n.animation,m=n.tooltip,x=n.axes,A=n.meta,P=n.geometries;t&&a.data(t);var L={};x&&(0,E.S6)(x,function(B,U){L[U]=ns(B,Hc)}),L=hn({},A,L),a.scale(L),s&&a.coordinate(s),x===!1?a.axis(!1):(0,E.S6)(x,function(B,U){a.axis(U,B)}),(0,E.S6)(P,function(B){var U=Yf({chart:a,options:B}).ext,Y=B.adjust;Y&&U.geometry.adjust(Y)}),(0,E.S6)(l,function(B){B.enable===!1?a.removeInteraction(B.type):a.interaction(B.type,B.cfg)}),(0,E.S6)(f,function(B){a.annotation()[B.type]((0,M.pi)({},B))}),q_(a,d),m?(a.interaction("tooltip"),a.tooltip(m)):m===!1&&a.removeInteraction("tooltip")}function IL(a){var n=a.chart,t=a.options,s=t.type,l=t.data,f=t.fields,d=t.eachView,m=(0,E.CE)(t,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return n.data(l),n.facet(s,(0,M.pi)((0,M.pi)({},m),{fields:f,eachView:function(x,A){var P=d(x,A);if(P.geometries)RL(x,P);else{var L=P,B=L.options;B.tooltip&&x.interaction("tooltip"),_1(L.type,x,B)}}})),a}function PL(a){var n=a.chart,t=a.options,s=t.axes,l=t.meta,f=t.tooltip,d=t.coordinate,m=t.theme,x=t.legend,A=t.interactions,P=t.annotations,L={};return s&&(0,E.S6)(s,function(B,U){L[U]=ns(B,Hc)}),L=hn({},l,L),n.scale(L),n.coordinate(d),s?(0,E.S6)(s,function(B,U){n.axis(U,B)}):n.axis(!1),f?(n.interaction("tooltip"),n.tooltip(f)):f===!1&&n.removeInteraction("tooltip"),n.legend(x),m&&n.theme(m),(0,E.S6)(A,function(B){B.enable===!1?n.removeInteraction(B.type):n.interaction(B.type,B.cfg)}),(0,E.S6)(P,function(B){n.annotation()[B.type]((0,M.pi)({},B))}),a}function ST(a){return Fa(Ko,IL,PL)(a)}var OL={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}},R4=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="area",t}return n.getDefaultOptions=function(){return OL},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return ST},n}(so);function kL(a){var n=a.chart,t=a.options,s=t.data,l=t.type,f=t.xField,d=t.yField,m=t.colorField,x=t.sizeField,A=t.sizeRatio,P=t.shape,L=t.color,B=t.tooltip,U=t.heatmapStyle,Y=t.meta;n.data(s);var se="polygon";l==="density"&&(se="heatmap");var be=Hu(B,[f,d,m]),Ee=be.fields,it=be.formatter,gt=1;return(A||A===0)&&(!P&&!x?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):A<0||A>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):gt=A),Yf(hn({},a,{options:{type:se,colorField:m,tooltipFields:Ee,shapeField:x||"",label:void 0,mapping:{tooltip:it,shape:P&&(x?function(xt){var Bt=s.map(function(mn){return mn[x]}),_r=(Y==null?void 0:Y[x])||{},Or=_r.min,Gr=_r.max;return Or=(0,E.hj)(Or)?Or:Math.min.apply(Math,Bt),Gr=(0,E.hj)(Gr)?Gr:Math.max.apply(Math,Bt),[P,((0,E.U2)(xt,x)-Or)/(Gr-Or),gt]}:function(){return[P,1,gt]}),color:L||m&&n.getTheme().sequenceColors.join("-"),style:U}}})),a}function ET(a){var n,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Fa(Vu((n={},n[f]=s,n[d]=l,n)))(a)}function LL(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?n.axis(d,!1):n.axis(d,l),a}function DL(a){var n=a.chart,t=a.options,s=t.legend,l=t.colorField,f=t.sizeField,d=t.sizeLegend,m=s!==!1;return l&&n.legend(l,m?s:!1),f&&n.legend(f,d===void 0?s:d),!m&&!d&&n.legend(!1),a}function FL(a){var n=a.chart,t=a.options,s=t.label,l=t.colorField,f=t.type,d=el(n,f==="density"?"heatmap":"polygon");if(!s)d.label(!1);else if(l){var m=s.callback,x=(0,M._T)(s,["callback"]);d.label({fields:[l],callback:m,cfg:uc(x)})}return a}function BL(a){var n,t,s=a.chart,l=a.options,f=l.coordinate,d=l.reflect,m=hn({actions:[]},f!=null?f:{type:"rect"});return d&&((t=(n=m.actions)===null||n===void 0?void 0:n.push)===null||t===void 0||t.call(n,["reflect",d])),s.coordinate(m),a}function NL(a){return Fa(Ko,Eh("heatmapStyle"),ET,BL,kL,LL,DL,kl,FL,bu(),js,ws,Wv)(a)}var zL=hn({},so.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});yi("polygon","circle",{draw:function(a,n){var t,s,l=a.x,f=a.y,d=this.parsePoints(a.points),m=Math.abs(d[2].x-d[1].x),x=Math.abs(d[1].y-d[0].y),A=Math.min(m,x)/2,P=Number(a.shape[1]),L=Number(a.shape[2]),B=Math.sqrt(L),U=A*B*Math.sqrt(P),Y=((t=a.style)===null||t===void 0?void 0:t.fill)||a.color||((s=a.defaultStyle)===null||s===void 0?void 0:s.fill),se=n.addShape("circle",{attrs:(0,M.pi)((0,M.pi)((0,M.pi)({x:l,y:f,r:U},a.defaultStyle),a.style),{fill:Y})});return se}}),yi("polygon","square",{draw:function(a,n){var t,s,l=a.x,f=a.y,d=this.parsePoints(a.points),m=Math.abs(d[2].x-d[1].x),x=Math.abs(d[1].y-d[0].y),A=Math.min(m,x),P=Number(a.shape[1]),L=Number(a.shape[2]),B=Math.sqrt(L),U=A*B*Math.sqrt(P),Y=((t=a.style)===null||t===void 0?void 0:t.fill)||a.color||((s=a.defaultStyle)===null||s===void 0?void 0:s.fill),se=n.addShape("rect",{attrs:(0,M.pi)((0,M.pi)((0,M.pi)({x:l-U/2,y:f-U/2,width:U,height:U},a.defaultStyle),a.style),{fill:Y})});return se}});var UL=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="heatmap",t}return n.getDefaultOptions=function(){return zL},n.prototype.getSchemaAdaptor=function(){return NL},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(so),ZL="liquid";function wT(a){return[{percent:a,type:ZL}]}function VL(a){var n=a.chart,t=a.options,s=t.percent,l=t.liquidStyle,f=t.radius,d=t.outline,m=t.wave,x=t.shape,A=t.shapeStyle,P=t.animation;n.scale({percent:{min:0,max:1}}),n.data(wT(s));var L=t.color||n.getTheme().defaultColor,B=hn({},a,{options:{xField:"type",yField:"percent",widthRatio:f,interval:{color:L,style:l,shape:"liquid-fill-gauge"}}}),U=jc(B).ext,Y=U.geometry,se=n.getTheme().background,be={percent:s,radius:f,outline:d,wave:m,shape:x,shapeStyle:A,background:se,animation:P};return Y.customInfo(be),n.legend(!1),n.axis(!1),n.tooltip(!1),a}function CT(a,n){var t=a.chart,s=a.options,l=s.statistic,f=s.percent,d=s.meta;t.getController("annotation").clear(!0);var m=(0,E.U2)(d,["percent","formatter"])||function(A){return"".concat((A*100).toFixed(2),"%")},x=l.content;return x&&(x=hn({},x,{content:(0,E.UM)(x.content)?m(f):x.content})),Hg(t,{statistic:(0,M.pi)((0,M.pi)({},l),{content:x}),plotType:"liquid"},{percent:f}),n&&t.render(!0),a}function HL(a){return Fa(Ko,Eh("liquidStyle"),VL,CT,Vu({}),ws,js)(a)}var jL={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},AT=5e3;function TT(a,n,t){return a+(n-a)*t}function MT(a){var n=(0,M.pi)({opacity:1},a.style);return a.color&&!n.fill&&(n.fill=a.color),n}function WL(a){var n={fill:"#fff",fillOpacity:0,lineWidth:4},t=(0,E.CD)({},n,a.style);return a.color&&!t.stroke&&(t.stroke=a.color),(0,E.hj)(a.opacity)&&(t.opacity=t.strokeOpacity=a.opacity),t}function GL(a,n,t,s){return n===0?[[a+1/2*t/Math.PI/2,s/2],[a+1/2*t/Math.PI,s],[a+t/4,s]]:n===1?[[a+1/2*t/Math.PI/2*(Math.PI-2),s],[a+1/2*t/Math.PI/2*(Math.PI-1),s/2],[a+t/4,0]]:n===2?[[a+1/2*t/Math.PI/2,-s/2],[a+1/2*t/Math.PI,-s],[a+t/4,-s]]:[[a+1/2*t/Math.PI/2*(Math.PI-2),-s],[a+1/2*t/Math.PI/2*(Math.PI-1),-s/2],[a+t/4,0]]}function $L(a,n,t,s,l,f,d){for(var m=Math.ceil(2*a/t*4)*4,x=[],A=s;A<-Math.PI*2;)A+=Math.PI*2;for(;A>0;)A-=Math.PI*2;A=A/Math.PI/2*t;var P=f-a+A-a*2;x.push(["M",P,n]);for(var L=0,B=0;B<m;++B){var U=B%4,Y=GL(B*t/4,U,t,l);x.push(["C",Y[0][0]+P,-Y[0][1]+n,Y[1][0]+P,-Y[1][1]+n,Y[2][0]+P,-Y[2][1]+n]),B===m-1&&(L=Y[2][0])}return x.push(["L",L+P,d+a]),x.push(["L",P,d+a]),x.push(["Z"]),x}function RT(a,n,t,s,l,f,d,m,x,A){for(var P=l.fill,L=l.opacity,B=d.getBBox(),U=B.maxX-B.minX,Y=B.maxY-B.minY,se=0;se<s;se++){var be=s<=1?1:se/(s-1),Ee=f.addShape("path",{name:"waterwave-path",attrs:{path:$L(m,B.minY+Y*t,x,0,U/32,a,n),fill:P,opacity:TT(.2,.9,be)*L}});try{if(A===!1)return;var it=tS([["t",x,0]]);Ee.stopAnimate(),Ee.animate({matrix:it},{duration:TT(.5*AT,AT,be),repeat:!0})}catch(gt){console.warn("off-screen group animate error!")}}}function XL(a,n,t,s){var l=t*2/3,f=Math.max(l,s),d=l/2,m=a,x=d+n-f/2,A=Math.asin(d/((f-d)*.85)),P=Math.sin(A)*d,L=Math.cos(A)*d,B=m-L,U=x+P,Y=a,se=x+d/Math.sin(A);return`
      M `.concat(B," ").concat(U,`
      A `).concat(d," ").concat(d," 0 1 1 ").concat(B+L*2," ").concat(U,`
      Q `).concat(Y," ").concat(se," ").concat(a," ").concat(n+f/2,`
      Q `).concat(Y," ").concat(se," ").concat(B," ").concat(U,`
      Z 
    `)}function YL(a,n,t,s){var l=t/2,f=s/2;return`
      M `.concat(a," ").concat(n-f,` 
      a `).concat(l," ").concat(f," 0 1 0 0 ").concat(f*2,`
      a `).concat(l," ").concat(f," 0 1 0 0 ").concat(-f*2,`
      Z
    `)}function KL(a,n,t,s){var l=s/2,f=t/2;return`
      M `.concat(a," ").concat(n-l,`
      L `).concat(a+f," ").concat(n,`
      L `).concat(a," ").concat(n+l,`
      L `).concat(a-f," ").concat(n,`
      Z
    `)}function qL(a,n,t,s){var l=s/2,f=t/2;return`
      M `.concat(a," ").concat(n-l,`
      L `).concat(a+f," ").concat(n+l,`
      L `).concat(a-f," ").concat(n+l,`
      Z
    `)}function QL(a,n,t,s){var l=.618,f=s/2,d=t/2*l;return`
      M `.concat(a-d," ").concat(n-f,`
      L `).concat(a+d," ").concat(n-f,`
      L `).concat(a+d," ").concat(n+f,`
      L `).concat(a-d," ").concat(n+f,`
      Z
    `)}var IT={pin:XL,circle:YL,diamond:KL,triangle:qL,rect:QL};yi("interval","liquid-fill-gauge",{draw:function(a,n){var t=.5,s=.5,l=a.customInfo,f=l,d=f.percent,m=f.radius,x=f.shape,A=f.shapeStyle,P=f.background,L=f.animation,B=l.outline,U=l.wave,Y=B.border,se=B.distance,be=U.count,Ee=U.length,it=(0,E.u4)(a.points,function(bi,to){return Math.min(bi,to.x)},1/0),gt=this.parsePoint({x:t,y:s}),xt=this.parsePoint({x:it,y:s}),Bt=gt.x-xt.x,_r=Math.min(Bt,xt.y*m),Or=MT(a),Gr=WL((0,E.CD)({},a,B)),mn=_r-Y/2,cn=typeof x=="function"?x:IT[x]||IT.circle,Nn=cn(gt.x,gt.y,mn*2,mn*2);if(A&&n.addShape("path",{name:"shape",attrs:(0,M.pi)({path:Nn},A)}),d>0){var hi=n.addGroup({name:"waves"}),Wi=hi.setClip({type:"path",attrs:{path:Nn}});RT(gt.x,gt.y,1-a.points[1].y,be,Or,hi,Wi,_r*2,Ee,L)}return n.addShape("path",{name:"distance",attrs:{path:Nn,fill:"transparent",lineWidth:Y+se*2,stroke:P==="transparent"?"#fff":P}}),n.addShape("path",{name:"wrap",attrs:(0,E.CD)(Gr,{path:Nn,fill:"transparent",lineWidth:Y})}),n}});var JL=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="liquid",t}return n.getDefaultOptions=function(){return jL},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.changeData=function(t){this.chart.emit(Ue.BEFORE_CHANGE_DATA,Ka.fromData(this.chart,Ue.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:t}),this.chart.data(wT(t)),CT({chart:this.chart,options:this.options},!0),this.chart.emit(Ue.AFTER_CHANGE_DATA,Ka.fromData(this.chart,Ue.AFTER_CHANGE_DATA,null))},n.prototype.getSchemaAdaptor=function(){return HL},n}(so);function eD(a){var n=a.chart,t=a.options,s=t.data,l=t.lineStyle,f=t.color,d=t.point,m=t.area;n.data(s);var x=hn({},a,{options:{line:{style:l,color:f},point:d&&(0,M.pi)({color:f},d),area:m&&(0,M.pi)({color:f},m),label:void 0}}),A=hn({},x,{options:{tooltip:!1}}),P=(d==null?void 0:d.state)||t.state,L=hn({},x,{options:{tooltip:!1,state:P}});return Wg(x),wh(L),i1(A),a}function tD(a){var n,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Fa(Vu((n={},n[f]=s,n[d]=l,n)))(a)}function rD(a){var n=a.chart,t=a.options,s=t.radius,l=t.startAngle,f=t.endAngle;return n.coordinate("polar",{radius:s,startAngle:l,endAngle:f}),a}function nD(a){var n=a.chart,t=a.options,s=t.xField,l=t.xAxis,f=t.yField,d=t.yAxis;return n.axis(s,l),n.axis(f,d),a}function iD(a){var n=a.chart,t=a.options,s=t.label,l=t.yField,f=el(n,"line");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:uc(m)})}return a}function aD(a){return Fa(eD,tD,Ko,rD,nD,Bm,kl,iD,js,ws,bu())(a)}var oD=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),n.prototype.getTooltipItems=function(t){var s=this.getTooltipCfg(),l=s.shared,f=s.title,d=a.prototype.getTooltipItems.call(this,t);if(d.length>0){var m=this.view.geometries[0],x=m.dataArray,A=d[0].name,P=[];return x.forEach(function(L){L.forEach(function(B){var U=sc.getTooltipItems(B,m),Y=U[0];if(!l&&Y&&Y.name===A){var se=(0,E.UM)(f)?A:f;P.push((0,M.pi)((0,M.pi)({},Y),{name:Y.title,title:se}))}else if(l&&Y){var se=(0,E.UM)(f)?Y.name||A:f;P.push((0,M.pi)((0,M.pi)({},Y),{name:Y.title,title:se}))}})}),P}return[]},n}(mt);of("radar-tooltip",oD);var sD=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.init=function(){var t=this.context.view;t.removeInteraction("tooltip")},n.prototype.show=function(){var t=this.context.event,s=this.getTooltipController();s.showTooltip({x:t.x,y:t.y})},n.prototype.hide=function(){var t=this.getTooltipController();t.hideTooltip()},n.prototype.getTooltipController=function(){var t=this.context.view;return t.getController("radar-tooltip")},n}(Rn);Kr("radar-tooltip",sD),Fn("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var uD=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="radar",t}return n.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return hn({},a.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},n.prototype.getSchemaAdaptor=function(){return aD},n}(so);function PT(a,n,t){var s=t.map(function(d){return d[n]}).filter(function(d){return d!==void 0}),l=s.length>0?Math.max.apply(Math,s):0,f=Math.abs(a)%360;return f?l*360/f:l}function OT(a,n,t){var s=[];return a.forEach(function(l){var f=s.find(function(d){return d[n]===l[n]});f?f[t]+=l[t]||null:s.push((0,M.pi)({},l))}),s}function qm(a){var n=a.chart,t=a.options,s=t.barStyle,l=t.color,f=t.tooltip,d=t.colorField,m=t.type,x=t.xField,A=t.yField,P=t.data,L=t.shape,B=ly(P,A);n.data(B);var U=hn({},a,{options:{tooltip:f,seriesField:d,interval:{style:s,color:l,shape:L||(m==="line"?"line":"intervel")},minColumnWidth:t.minBarWidth,maxColumnWidth:t.maxBarWidth,columnBackground:t.barBackground}});return jc(U),m==="line"&&wh({chart:n,options:{xField:x,yField:A,seriesField:d,point:{shape:"circle",color:l}}}),a}function zS(a){var n,t=a.options,s=t.yField,l=t.xField,f=t.data,d=t.isStack,m=t.isGroup,x=t.colorField,A=t.maxAngle,P=d&&!m&&x?OT(f,l,s):f,L=ly(P,s);return Fa(Vu((n={},n[s]={min:0,max:PT(A,s,L)},n)))(a)}function lD(a){var n=a.chart,t=a.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return n.coordinate({type:"polar",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}).transpose(),a}function cD(a){var n=a.chart,t=a.options,s=t.xField,l=t.xAxis;return n.axis(s,l),a}function fD(a){var n=a.chart,t=a.options,s=t.label,l=t.yField,f=el(n,"interval");if(!s)f.label(!1);else{var d=s.callback,m=(0,M._T)(s,["callback"]);f.label({fields:[l],callback:d,cfg:(0,M.pi)((0,M.pi)({},uc(m)),{type:"polar"})})}return a}function hD(a){return Fa(Eh("barStyle"),qm,zS,cD,lD,js,ws,Ko,kl,Bm,bu(),fD)(a)}var Py=hn({},so.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240}),P1=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="radial-bar",t}return n.getDefaultOptions=function(){return Py},n.prototype.changeData=function(t){this.updateOption({data:t}),zS({chart:this.chart,options:this.options}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return hD},n}(so);function Oy(a){var n=a.chart,t=a.options,s=t.data,l=t.sectorStyle,f=t.shape,d=t.color;return n.data(s),Fa(jc)(hn({},a,{options:{marginRatio:1,interval:{style:l,color:d,shape:f}}})),a}function ky(a){var n=a.chart,t=a.options,s=t.label,l=t.xField,f=el(n,"interval");if(s===!1)f.label(!1);else if((0,E.Kn)(s)){var d=s.callback,m=s.fields,x=(0,M._T)(s,["callback","fields"]),A=x.offset,P=x.layout;(A===void 0||A>=0)&&(P=P?(0,E.kJ)(P)?P:[P]:[],x.layout=(0,E.hX)(P,function(L){return L.type!=="limit-in-shape"}),x.layout.length||delete x.layout),f.label({fields:m||[l],callback:d,cfg:uc(x)})}else Sd(bd.WARN,s===null,"the label option must be an Object."),f.label({fields:[l]});return a}function pD(a){var n=a.chart,t=a.options,s=t.legend,l=t.seriesField;return s===!1?n.legend(!1):l&&n.legend(l,s),a}function kT(a){var n=a.chart,t=a.options,s=t.radius,l=t.innerRadius,f=t.startAngle,d=t.endAngle;return n.coordinate({type:"polar",cfg:{radius:s,innerRadius:l,startAngle:f,endAngle:d}}),a}function US(a){var n,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return Fa(Vu((n={},n[f]=s,n[d]=l,n)))(a)}function dD(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s?n.axis(f,s):n.axis(f,!1),l?n.axis(d,l):n.axis(d,!1),a}function vD(a){Fa(Eh("sectorStyle"),Oy,US,ky,kT,dD,pD,kl,js,ws,Ko,bu(),Wv)(a)}var LT=hn({},so.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]}),I4=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="rose",t}return n.getDefaultOptions=function(){return LT},n.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(t)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return vD},n}(so),gD="x",Ly="y",Qm="name",Dy="nodes",O1="edges";function mD(a,n,t){var s=[];return a.forEach(function(l){var f=l[n],d=l[t];s.includes(f)||s.push(f),s.includes(d)||s.push(d)}),s}function DT(a,n,t,s){var l={};return n.forEach(function(f){l[f]={},n.forEach(function(d){l[f][d]=0})}),a.forEach(function(f){l[f[t]][f[s]]=1}),l}function P4(a,n,t){if(!(0,E.kJ)(a))return[];var s=[],l=mD(a,n,t),f=DT(a,l,n,t),d={};l.forEach(function(x){d[x]=0});function m(x){d[x]=1,l.forEach(function(A){if(f[x][A]!=0)if(d[A]==1)s.push("".concat(x,"_").concat(A));else{if(d[A]==-1)return;m(A)}}),d[x]=-1}return l.forEach(function(x){d[x]!=-1&&m(x)}),s.length!==0&&console.warn("sankey data contains circle, ".concat(s.length," records removed."),s),a.filter(function(x){return s.findIndex(function(A){return A==="".concat(x[n],"_").concat(x[t])})<0})}function yD(a){return a.target.depth}function k1(a){return a.depth}function FT(a,n){return n-1-a.height}function ZS(a,n){return a.sourceLinks.length?a.depth:n-1}function _D(a){return a.targetLinks.length?a.depth:a.sourceLinks.length?(0,E.F)(a.sourceLinks,yD)-1:0}function Fy(a){return function(){return a}}function BT(a,n){for(var t=0,s=0;s<a.length;s++)t+=n(a[s]);return t}function L1(a,n){for(var t=-1/0,s=0;s<a.length;s++)t=Math.max(n(a[s]),t);return t}function Ch(a,n){for(var t=1/0,s=0;s<a.length;s++)t=Math.min(n(a[s]),t);return t}function VS(a,n){return Jm(a.source,n.source)||a.index-n.index}function HS(a,n){return Jm(a.target,n.target)||a.index-n.index}function Jm(a,n){return a.y0-n.y0}function jS(a){return a.value}function xD(a){return a.index}function bD(a){return a.nodes}function SD(a){return a.links}function NT(a,n){var t=a.get(n);if(!t)throw new Error("missing: "+n);return t}function WS(a){for(var n=a.nodes,t=0,s=n;t<s.length;t++){for(var l=s[t],f=l.y0,d=f,m=0,x=l.sourceLinks;m<x.length;m++){var A=x[m];A.y0=f+A.width/2,f+=A.width}for(var P=0,L=l.targetLinks;P<L.length;P++){var A=L[P];A.y1=d+A.width/2,d+=A.width}}}function zT(){var a=0,n=0,t=1,s=1,l=24,f=8,d,m=xD,x=ZS,A,P,L,B=bD,U=SD,Y=6;function se(jn){var Ci={nodes:B(jn),links:U(jn)};return be(Ci),Ee(Ci),it(Ci),gt(Ci),_r(Ci),WS(Ci),Ci}se.update=function(jn){return WS(jn),jn},se.nodeId=function(jn){return arguments.length?(m=typeof jn=="function"?jn:Fy(jn),se):m},se.nodeAlign=function(jn){return arguments.length?(x=typeof jn=="function"?jn:Fy(jn),se):x},se.nodeDepth=function(jn){return arguments.length?(A=jn,se):A},se.nodeSort=function(jn){return arguments.length?(P=jn,se):P},se.nodeWidth=function(jn){return arguments.length?(l=+jn,se):l},se.nodePadding=function(jn){return arguments.length?(f=d=+jn,se):f},se.nodes=function(jn){return arguments.length?(B=typeof jn=="function"?jn:Fy(jn),se):B},se.links=function(jn){return arguments.length?(U=typeof jn=="function"?jn:Fy(jn),se):U},se.linkSort=function(jn){return arguments.length?(L=jn,se):L},se.size=function(jn){return arguments.length?(a=n=0,t=+jn[0],s=+jn[1],se):[t-a,s-n]},se.extent=function(jn){return arguments.length?(a=+jn[0][0],t=+jn[1][0],n=+jn[0][1],s=+jn[1][1],se):[[a,n],[t,s]]},se.iterations=function(jn){return arguments.length?(Y=+jn,se):Y};function be(jn){var Ci=jn.nodes,aa=jn.links;Ci.forEach(function(Mo,qo){Mo.index=qo,Mo.sourceLinks=[],Mo.targetLinks=[]});var Ni=new Map(Ci.map(function(Mo){return[m(Mo),Mo]}));if(aa.forEach(function(Mo,qo){Mo.index=qo;var cl=Mo.source,El=Mo.target;typeof cl!="object"&&(cl=Mo.source=NT(Ni,cl)),typeof El!="object"&&(El=Mo.target=NT(Ni,El)),cl.sourceLinks.push(Mo),El.targetLinks.push(Mo)}),L!=null)for(var $i=0,Ma=Ci;$i<Ma.length;$i++){var Va=Ma[$i],za=Va.sourceLinks,$a=Va.targetLinks;za.sort(L),$a.sort(L)}}function Ee(jn){for(var Ci=jn.nodes,aa=0,Ni=Ci;aa<Ni.length;aa++){var $i=Ni[aa];$i.value=$i.fixedValue===void 0?Math.max(BT($i.sourceLinks,jS),BT($i.targetLinks,jS)):$i.fixedValue}}function it(jn){for(var Ci=jn.nodes,aa=Ci.length,Ni=new Set(Ci),$i=new Set,Ma=0;Ni.size;){if(Ni.forEach(function(Mo){Mo.depth=Ma;for(var qo=0,cl=Mo.sourceLinks;qo<cl.length;qo++){var El=cl[qo].target;$i.add(El)}}),++Ma>aa)throw new Error("circular link");Ni=$i,$i=new Set}if(A)for(var Va=Math.max(L1(Ci,function(Mo){return Mo.depth})+1,0),za=void 0,$a=0;$a<Ci.length;$a++)za=Ci[$a],za.depth=A.call(null,za,Va)}function gt(jn){for(var Ci=jn.nodes,aa=Ci.length,Ni=new Set(Ci),$i=new Set,Ma=0;Ni.size;){if(Ni.forEach(function(Va){Va.height=Ma;for(var za=0,$a=Va.targetLinks;za<$a.length;za++){var Mo=$a[za].source;$i.add(Mo)}}),++Ma>aa)throw new Error("circular link");Ni=$i,$i=new Set}}function xt(jn){for(var Ci=jn.nodes,aa=Math.max(L1(Ci,function(El){return El.depth})+1,0),Ni=(t-a-l)/(aa-1),$i=new Array(aa).fill(0).map(function(){return[]}),Ma=0,Va=Ci;Ma<Va.length;Ma++){var za=Va[Ma],$a=Math.max(0,Math.min(aa-1,Math.floor(x.call(null,za,aa))));za.layer=$a,za.x0=a+$a*Ni,za.x1=za.x0+l,$i[$a]?$i[$a].push(za):$i[$a]=[za]}if(P)for(var Mo=0,qo=$i;Mo<qo.length;Mo++){var cl=qo[Mo];cl.sort(P)}return $i}function Bt(jn){for(var Ci=Ch(jn,function(Mh){return(s-n-(Mh.length-1)*d)/BT(Mh,jS)}),aa=0,Ni=jn;aa<Ni.length;aa++){for(var $i=Ni[aa],Ma=n,Va=0,za=$i;Va<za.length;Va++){var $a=za[Va];$a.y0=Ma,$a.y1=Ma+$a.value*Ci,Ma=$a.y1+d;for(var Mo=0,qo=$a.sourceLinks;Mo<qo.length;Mo++){var cl=qo[Mo];cl.width=cl.value*Ci}}Ma=(s-Ma+d)/($i.length+1);for(var El=0;El<$i.length;++El){var $a=$i[El];$a.y0+=Ma*(El+1),$a.y1+=Ma*(El+1)}Wi($i)}}function _r(jn){var Ci=xt(jn);d=Math.min(f,(s-n)/(L1(Ci,function(Ma){return Ma.length})-1)),Bt(Ci);for(var aa=0;aa<Y;++aa){var Ni=Math.pow(.99,aa),$i=Math.max(1-Ni,(aa+1)/Y);Gr(Ci,Ni,$i),Or(Ci,Ni,$i)}}function Or(jn,Ci,aa){for(var Ni=1,$i=jn.length;Ni<$i;++Ni){for(var Ma=jn[Ni],Va=0,za=Ma;Va<za.length;Va++){for(var $a=za[Va],Mo=0,qo=0,cl=0,El=$a.targetLinks;cl<El.length;cl++){var Mh=El[cl],Md=Mh.source,Rd=Mh.value,a0=Rd*($a.layer-Md.layer);Mo+=bi(Md,$a)*a0,qo+=a0}if(qo>0){var o0=(Mo/qo-$a.y0)*Ci;$a.y0+=o0,$a.y1+=o0,hi($a)}}P===void 0&&Ma.sort(Jm),Ma.length&&mn(Ma,aa)}}function Gr(jn,Ci,aa){for(var Ni=jn.length,$i=Ni-2;$i>=0;--$i){for(var Ma=jn[$i],Va=0,za=Ma;Va<za.length;Va++){for(var $a=za[Va],Mo=0,qo=0,cl=0,El=$a.sourceLinks;cl<El.length;cl++){var Mh=El[cl],Md=Mh.target,Rd=Mh.value,a0=Rd*(Md.layer-$a.layer);Mo+=to($a,Md)*a0,qo+=a0}if(qo>0){var o0=(Mo/qo-$a.y0)*Ci;$a.y0+=o0,$a.y1+=o0,hi($a)}}P===void 0&&Ma.sort(Jm),Ma.length&&mn(Ma,aa)}}function mn(jn,Ci){var aa=jn.length>>1,Ni=jn[aa];Nn(jn,Ni.y0-d,aa-1,Ci),cn(jn,Ni.y1+d,aa+1,Ci),Nn(jn,s,jn.length-1,Ci),cn(jn,n,0,Ci)}function cn(jn,Ci,aa,Ni){for(;aa<jn.length;++aa){var $i=jn[aa],Ma=(Ci-$i.y0)*Ni;Ma>1e-6&&($i.y0+=Ma,$i.y1+=Ma),Ci=$i.y1+d}}function Nn(jn,Ci,aa,Ni){for(;aa>=0;--aa){var $i=jn[aa],Ma=($i.y1-Ci)*Ni;Ma>1e-6&&($i.y0-=Ma,$i.y1-=Ma),Ci=$i.y0-d}}function hi(jn){var Ci=jn.sourceLinks,aa=jn.targetLinks;if(L===void 0){for(var Ni=0,$i=aa;Ni<$i.length;Ni++){var Ma=$i[Ni].source.sourceLinks;Ma.sort(HS)}for(var Va=0,za=Ci;Va<za.length;Va++){var $a=za[Va].target.targetLinks;$a.sort(VS)}}}function Wi(jn){if(L===void 0)for(var Ci=0,aa=jn;Ci<aa.length;Ci++){var Ni=aa[Ci],$i=Ni.sourceLinks,Ma=Ni.targetLinks;$i.sort(HS),Ma.sort(VS)}}function bi(jn,Ci){for(var aa=jn.y0-(jn.sourceLinks.length-1)*d/2,Ni=0,$i=jn.sourceLinks;Ni<$i.length;Ni++){var Ma=$i[Ni],Va=Ma.target,za=Ma.width;if(Va===Ci)break;aa+=za+d}for(var $a=0,Mo=Ci.targetLinks;$a<Mo.length;$a++){var qo=Mo[$a],Va=qo.source,za=qo.width;if(Va===jn)break;aa-=za}return aa}function to(jn,Ci){for(var aa=Ci.y0-(Ci.targetLinks.length-1)*d/2,Ni=0,$i=Ci.targetLinks;Ni<$i.length;Ni++){var Ma=$i[Ni],Va=Ma.source,za=Ma.width;if(Va===jn)break;aa+=za+d}for(var $a=0,Mo=jn.sourceLinks;$a<Mo.length;$a++){var qo=Mo[$a],Va=qo.target,za=qo.width;if(Va===Ci)break;aa-=za}return aa}return se}var ED={left:k1,right:FT,center:_D,justify:ZS},UT={nodeId:function(a){return a.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function ZT(a){var n=(0,E.HD)(a)?ED[a]:(0,E.mf)(a)?a:null;return n||ZS}function wD(a){return(0,E.f0)({},UT,a)}function CD(a,n){var t=wD(a),s=t.nodeId,l=t.nodeSort,f=t.nodeAlign,d=t.nodeWidth,m=t.nodePadding,x=t.nodeDepth,A=zT().nodeSort(l).nodeWidth(d).nodePadding(m).nodeDepth(x).nodeAlign(ZT(f)).extent([[0,0],[1,1]]).nodeId(s),P=A(n),L=P.nodes.map(function(U){var Y=U.x0,se=U.x1,be=U.y0,Ee=U.y1;return U.x=[Y,se,se,Y],U.y=[be,be,Ee,Ee],U}).filter(function(U){return U.name!==null}),B=P.links.map(function(U){var Y=U.source,se=U.target,be=Y.x1,Ee=se.x0;U.x=[be,be,Ee,Ee];var it=U.width/2;return U.y=[U.y0+it,U.y0-it,U.y1+it,U.y1-it],U}).filter(function(U){var Y=U.source,se=U.target;return Y.name!==null&&se.name!==null});return{nodes:L,links:B}}function AD(a){return a==="node-link"}function TD(a,n,t){return Hv(a)?a/t:n}function MD(a,n,t){return Hv(a)?a/t:n}function VT(a,n,t){var s=a.dataType,l=a.data,f=a.sourceField,d=a.targetField,m=a.weightField,x=a.nodeAlign,A=a.nodeSort,P=a.nodePadding,L=a.nodePaddingRatio,B=a.nodeWidth,U=a.nodeWidthRatio,Y=a.nodeDepth,se=a.rawFields,be=se===void 0?[]:se,Ee;AD(s)?Ee=l:Ee=Pb(P4(l,f,d),f,d,m,be);var it=CD({nodeAlign:x,nodePadding:MD(P,L,t),nodeWidth:TD(B,U,n),nodeSort:A,nodeDepth:Y},Ee),gt=it.nodes,xt=it.links;return{nodes:gt.map(function(Bt){return(0,M.pi)((0,M.pi)({},ns(Bt,(0,M.ev)(["x","y","name"],be,!0))),{isNode:!0})}),edges:xt.map(function(Bt){return(0,M.pi)((0,M.pi)({source:Bt.source.name,target:Bt.target.name,name:Bt.source.name||Bt.target.name},ns(Bt,(0,M.ev)(["x","y","value"],be,!0))),{isNode:!1})})}}function By(a){var n=a.options,t=n.rawFields,s=t===void 0?[]:t;return hn({},{options:{tooltip:{fields:(0,E.jj)((0,M.ev)(["name","source","target","value","isNode"],s,!0))},label:{fields:(0,E.jj)((0,M.ev)(["x","name"],s,!0))}}},a)}function Ny(a){var n=a.chart,t=a.options,s=t.color,l=t.nodeStyle,f=t.edgeStyle,d=t.label,m=t.tooltip,x=t.nodeState,A=t.edgeState,P=t.rawFields,L=P===void 0?[]:P;n.legend(!1),n.tooltip(m),n.axis(!1),n.coordinate().reflect("y");var B=VT(t,n.width,n.height),U=B.nodes,Y=B.edges,se=n.createView({id:O1});se.data(Y),TC({chart:se,options:{xField:gD,yField:Ly,seriesField:Qm,rawFields:(0,M.ev)(["source","target"],L,!0),edge:{color:s,style:f,shape:"arc"},tooltip:m,state:A}});var be=n.createView({id:Dy});return be.data(U),a1({chart:be,options:{xField:gD,yField:Ly,seriesField:Qm,polygon:{color:s,style:l},label:d,tooltip:m,state:x}}),n.interaction("element-active"),n.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),a}function RD(a){var n=a.chart,t=a.options,s=t.animation,l=(0,M.ev)((0,M.ev)([],n.views[0].geometries,!0),n.views[1].geometries,!0);return q_(n,s,l),a}function ID(a){var n=a.chart,t=a.options,s=t.nodeDraggable,l="sankey-node-draggable";return s?n.interaction(l):n.removeInteraction(l),a}function PD(a){var n=a.chart,t=a.options,s=t.interactions,l=s===void 0?[]:s,f=[].concat(l,t.nodeInteractions||[]),d=[].concat(l,t.edgeInteractions||[]),m=xo(n,Dy),x=xo(n,O1);return f.forEach(function(A){(A==null?void 0:A.enable)===!1?m.removeInteraction(A.type):m.interaction(A.type,A.cfg||{})}),d.forEach(function(A){(A==null?void 0:A.enable)===!1?x.removeInteraction(A.type):x.interaction(A.type,A.cfg||{})}),a}function OD(a){return Fa(By,Ny,PD,ID,RD,Ko)(a)}var kD=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.isDragging=!1,t}return n.prototype.isNodeElement=function(){var t=(0,E.U2)(this.context,"event.target");if(t){var s=t.get("element");return s&&s.getModel().data.isNode}return!1},n.prototype.getNodeView=function(){return xo(this.context.view,Dy)},n.prototype.getEdgeView=function(){return xo(this.context.view,O1)},n.prototype.getCurrentDatumIdx=function(t){return this.getNodeView().geometries[0].elements.indexOf(t)},n.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:(0,E.U2)(this.context,"event.x"),y:(0,E.U2)(this.context,"event.y")};var t=this.context.event.target.get("element"),s=this.getCurrentDatumIdx(t);if(s===-1)return;this.currentElementIdx=s,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},n.prototype.translate=function(){if(this.isDragging){var t=this.context.view,s={x:(0,E.U2)(this.context,"event.x"),y:(0,E.U2)(this.context,"event.y")},l=s.x-this.prevPoint.x,f=s.y-this.prevPoint.y,d=this.getNodeView(),m=d.geometries[0].elements[this.currentElementIdx];if(m&&m.getModel()){var x=m.getModel().data,A=d.getOptions().data,P=d.getCoordinate(),L={x:l/P.getWidth(),y:f/P.getHeight()},B=(0,M.pi)((0,M.pi)({},x),{x:x.x.map(function(Ee){return Ee+=L.x}),y:x.y.map(function(Ee){return Ee+=L.y})}),U=(0,M.ev)([],A,!0);U[this.currentElementIdx]=B,d.data(U);var Y=x.name,se=this.getEdgeView(),be=se.getOptions().data;be.forEach(function(Ee){Ee.source===Y&&(Ee.x[0]+=L.x,Ee.x[1]+=L.x,Ee.y[0]+=L.y,Ee.y[1]+=L.y),Ee.target===Y&&(Ee.x[2]+=L.x,Ee.x[3]+=L.x,Ee.y[2]+=L.y,Ee.y[3]+=L.y)}),se.data(be),this.prevPoint=s,t.render(!0)}}},n.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},n}(Rn);Kr("sankey-node-drag",kD),Fn("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(a){return a.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});var e0=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="sankey",t}return n.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(t){var s=t.name;return s},callback:function(t){var s=t[1]===1;return{style:{fill:"#545454",textAlign:s?"end":"start"},offsetX:s?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(t){return!(0,E.U2)(t,[0,"data","isNode"])},formatter:function(t){var s=t.source,l=t.target,f=t.value;return{name:s+" -> "+l,value:f}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},n.prototype.changeData=function(t){this.updateOption({data:t});var s=VT(this.options,this.chart.width,this.chart.height),l=s.nodes,f=s.edges,d=xo(this.chart,Dy),m=xo(this.chart,O1);d.changeData(l),m.changeData(f)},n.prototype.getSchemaAdaptor=function(){return OD},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(so),GS="ancestor-node",HT="value",zy="path",LD=[zy,My,fT,cT,"name","depth","height"],DD=hn({},so.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}});function jT(a){a.x0=Math.round(a.x0),a.y0=Math.round(a.y0),a.x1=Math.round(a.x1),a.y1=Math.round(a.y1)}function Uy(a,n,t,s,l){for(var f=a.children,d,m=-1,x=f.length,A=a.value&&(s-n)/a.value;++m<x;)d=f[m],d.y0=t,d.y1=l,d.x0=n,d.x1=n+=d.value*A}function WT(){var a=1,n=1,t=0,s=!1;function l(d){var m=d.height+1;return d.x0=d.y0=t,d.x1=a,d.y1=n/m,d.eachBefore(f(n,m)),s&&d.eachBefore(jT),d}function f(d,m){return function(x){x.children&&Uy(x,x.x0,d*(x.depth+1)/m,x.x1,d*(x.depth+2)/m);var A=x.x0,P=x.y0,L=x.x1-t,B=x.y1-t;L<A&&(A=L=(A+L)/2),B<P&&(P=B=(P+B)/2),x.x0=A,x.y0=P,x.x1=L,x.y1=B}}return l.round=function(d){return arguments.length?(s=!!d,l):s},l.size=function(d){return arguments.length?(a=+d[0],n=+d[1],l):[a,n]},l.padding=function(d){return arguments.length?(t=+d,l):t},l}var FD={field:"value",size:[1,1],round:!1,padding:0,sort:function(a,n){return n.value-a.value},as:["x","y"],ignoreParentValue:!0};function BD(a,n){n=(0,E.f0)({},FD,n);var t=n.as;if(!(0,E.kJ)(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s;try{s=R1(n)}catch(x){console.warn(x)}var l=function(x){return WT().size(n.size).round(n.round).padding(n.padding)(Ay(x).sum(function(A){return(0,E.dp)(A.children)?n.ignoreParentValue?0:A[s]-(0,E.u4)(A.children,function(P,L){return P+L[s]},0):A[s]}).sort(n.sort))},f=l(a),d=t[0],m=t[1];return f.each(function(x){var A,P;x[d]=[x.x0,x.x1,x.x1,x.x0],x[m]=[x.y1,x.y1,x.y0,x.y0],x.name=x.name||((A=x.data)===null||A===void 0?void 0:A.name)||((P=x.data)===null||P===void 0?void 0:P.label),x.data.name=x.name,["x0","x1","y0","y1"].forEach(function(L){t.indexOf(L)===-1&&delete x[L]})}),Xm(f)}function ND(a,n){return a.parent===n.parent?1:2}function zD(a){return a.reduce(UD,0)/a.length}function UD(a,n){return a+n.x}function ZD(a){return 1+a.reduce(VD,0)}function VD(a,n){return Math.max(a,n.y)}function HD(a){for(var n;n=a.children;)a=n[0];return a}function jD(a){for(var n;n=a.children;)a=n[n.length-1];return a}function WD(){var a=ND,n=1,t=1,s=!1;function l(f){var d,m=0;f.eachAfter(function(B){var U=B.children;U?(B.x=zD(U),B.y=ZD(U)):(B.x=d?m+=a(B,d):0,B.y=0,d=B)});var x=HD(f),A=jD(f),P=x.x-a(x,A)/2,L=A.x+a(A,x)/2;return f.eachAfter(s?function(B){B.x=(B.x-f.x)*n,B.y=(f.y-B.y)*t}:function(B){B.x=(B.x-P)/(L-P)*n,B.y=(1-(f.y?B.y/f.y:1))*t})}return l.separation=function(f){return arguments.length?(a=f,l):a},l.size=function(f){return arguments.length?(s=!1,n=+f[0],t=+f[1],l):s?null:[n,t]},l.nodeSize=function(f){return arguments.length?(s=!0,n=+f[0],t=+f[1],l):s?[n,t]:null},l}var GD={depth:-1},GT={};function $D(a){return a.id}function XD(a){return a.parentId}function YD(){var a=$D,n=XD;function t(s){var l=Array.from(s),f=l.length,d,m,x,A,P,L,B,U=new Map;for(m=0;m<f;++m)d=l[m],P=l[m]=new Ty(d),(L=a(d,m,s))!=null&&(L+="")&&(B=P.id=L,U.set(B,U.has(B)?GT:P)),(L=n(d,m,s))!=null&&(L+="")&&(P.parent=L);for(m=0;m<f;++m)if(P=l[m],L=P.parent){if(A=U.get(L),!A)throw new Error("missing: "+L);if(A===GT)throw new Error("ambiguous: "+L);A.children?A.children.push(P):A.children=[P],P.parent=A}else{if(x)throw new Error("multiple roots");x=P}if(!x)throw new Error("no root");if(x.parent=GD,x.eachBefore(function(Y){Y.depth=Y.parent.depth+1,--f}).eachBefore(lT),x.parent=null,f>0)throw new Error("cycle");return x}return t.id=function(s){return arguments.length?(a=fv(s),t):a},t.parentId=function(s){return arguments.length?(n=fv(s),t):n},t}function $T(a,n){return a.parent===n.parent?1:2}function $S(a){var n=a.children;return n?n[0]:a.t}function XS(a){var n=a.children;return n?n[n.length-1]:a.t}function KD(a,n,t){var s=t/(n.i-a.i);n.c-=s,n.s+=t,a.c+=s,n.z+=t,n.m+=t}function qD(a){for(var n=0,t=0,s=a.children,l=s.length,f;--l>=0;)f=s[l],f.z+=n,f.m+=n,n+=f.s+(t+=f.c)}function QD(a,n,t){return a.a.parent===n.parent?a.a:t}function D1(a,n){this._=a,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}D1.prototype=Object.create(Ty.prototype);function JD(a){for(var n=new D1(a,0),t,s=[n],l,f,d,m;t=s.pop();)if(f=t._.children)for(t.children=new Array(m=f.length),d=m-1;d>=0;--d)s.push(l=t.children[d]=new D1(f[d],d)),l.parent=t;return(n.parent=new D1(null,0)).children=[n],n}function eF(){var a=$T,n=1,t=1,s=null;function l(A){var P=JD(A);if(P.eachAfter(f),P.parent.m=-P.z,P.eachBefore(d),s)A.eachBefore(x);else{var L=A,B=A,U=A;A.eachBefore(function(it){it.x<L.x&&(L=it),it.x>B.x&&(B=it),it.depth>U.depth&&(U=it)});var Y=L===B?1:a(L,B)/2,se=Y-L.x,be=n/(B.x+Y+se),Ee=t/(U.depth||1);A.eachBefore(function(it){it.x=(it.x+se)*be,it.y=it.depth*Ee})}return A}function f(A){var P=A.children,L=A.parent.children,B=A.i?L[A.i-1]:null;if(P){qD(A);var U=(P[0].z+P[P.length-1].z)/2;B?(A.z=B.z+a(A._,B._),A.m=A.z-U):A.z=U}else B&&(A.z=B.z+a(A._,B._));A.parent.A=m(A,B,A.parent.A||L[0])}function d(A){A._.x=A.z+A.parent.m,A.m+=A.parent.m}function m(A,P,L){if(P){for(var B=A,U=A,Y=P,se=B.parent.children[0],be=B.m,Ee=U.m,it=Y.m,gt=se.m,xt;Y=XS(Y),B=$S(B),Y&&B;)se=$S(se),U=XS(U),U.a=A,xt=Y.z+it-B.z-be+a(Y._,B._),xt>0&&(KD(QD(Y,A,L),A,xt),be+=xt,Ee+=xt),it+=Y.m,be+=B.m,gt+=se.m,Ee+=U.m;Y&&!XS(U)&&(U.t=Y,U.m+=it-Ee),B&&!$S(se)&&(se.t=B,se.m+=be-gt,L=A)}return L}function x(A){A.x*=n,A.y=A.depth*t}return l.separation=function(A){return arguments.length?(a=A,l):a},l.size=function(A){return arguments.length?(s=!1,n=+A[0],t=+A[1],l):s?null:[n,t]},l.nodeSize=function(A){return arguments.length?(s=!0,n=+A[0],t=+A[1],l):s?[n,t]:null},l}function F1(a,n,t,s,l){for(var f=a.children,d,m=-1,x=f.length,A=a.value&&(l-t)/a.value;++m<x;)d=f[m],d.x0=n,d.x1=s,d.y0=t,d.y1=t+=d.value*A}var XT=(1+Math.sqrt(5))/2;function YT(a,n,t,s,l,f){for(var d=[],m=n.children,x,A,P=0,L=0,B=m.length,U,Y,se=n.value,be,Ee,it,gt,xt,Bt,_r;P<B;){U=l-t,Y=f-s;do be=m[L++].value;while(!be&&L<B);for(Ee=it=be,Bt=Math.max(Y/U,U/Y)/(se*a),_r=be*be*Bt,xt=Math.max(it/_r,_r/Ee);L<B;++L){if(be+=A=m[L].value,A<Ee&&(Ee=A),A>it&&(it=A),_r=be*be*Bt,gt=Math.max(it/_r,_r/Ee),gt>xt){be-=A;break}xt=gt}d.push(x={value:be,dice:U<Y,children:m.slice(P,L)}),x.dice?Uy(x,t,s,l,se?s+=Y*be/se:f):F1(x,t,s,se?t+=U*be/se:l,f),se-=be,P=L}return d}var KT=function a(n){function t(s,l,f,d,m){YT(n,s,l,f,d,m)}return t.ratio=function(s){return a((s=+s)>1?s:1)},t}(XT);function qT(){var a=KT,n=!1,t=1,s=1,l=[0],f=Gm,d=Gm,m=Gm,x=Gm,A=Gm;function P(B){return B.x0=B.y0=0,B.x1=t,B.y1=s,B.eachBefore(L),l=[0],n&&B.eachBefore(jT),B}function L(B){var U=l[B.depth],Y=B.x0+U,se=B.y0+U,be=B.x1-U,Ee=B.y1-U;be<Y&&(Y=be=(Y+be)/2),Ee<se&&(se=Ee=(se+Ee)/2),B.x0=Y,B.y0=se,B.x1=be,B.y1=Ee,B.children&&(U=l[B.depth+1]=f(B)/2,Y+=A(B)-U,se+=d(B)-U,be-=m(B)-U,Ee-=x(B)-U,be<Y&&(Y=be=(Y+be)/2),Ee<se&&(se=Ee=(se+Ee)/2),a(B,Y,se,be,Ee))}return P.round=function(B){return arguments.length?(n=!!B,P):n},P.size=function(B){return arguments.length?(t=+B[0],s=+B[1],P):[t,s]},P.tile=function(B){return arguments.length?(a=fv(B),P):a},P.padding=function(B){return arguments.length?P.paddingInner(B).paddingOuter(B):P.paddingInner()},P.paddingInner=function(B){return arguments.length?(f=typeof B=="function"?B:Jg(+B),P):f},P.paddingOuter=function(B){return arguments.length?P.paddingTop(B).paddingRight(B).paddingBottom(B).paddingLeft(B):P.paddingTop()},P.paddingTop=function(B){return arguments.length?(d=typeof B=="function"?B:Jg(+B),P):d},P.paddingRight=function(B){return arguments.length?(m=typeof B=="function"?B:Jg(+B),P):m},P.paddingBottom=function(B){return arguments.length?(x=typeof B=="function"?B:Jg(+B),P):x},P.paddingLeft=function(B){return arguments.length?(A=typeof B=="function"?B:Jg(+B),P):A},P}function tF(a,n,t,s,l){var f=a.children,d,m=f.length,x,A=new Array(m+1);for(A[0]=x=d=0;d<m;++d)A[d+1]=x+=f[d].value;P(0,m,a.value,n,t,s,l);function P(L,B,U,Y,se,be,Ee){if(L>=B-1){var it=f[L];it.x0=Y,it.y0=se,it.x1=be,it.y1=Ee;return}for(var gt=A[L],xt=U/2+gt,Bt=L+1,_r=B-1;Bt<_r;){var Or=Bt+_r>>>1;A[Or]<xt?Bt=Or+1:_r=Or}xt-A[Bt-1]<A[Bt]-xt&&L+1<Bt&&--Bt;var Gr=A[Bt]-gt,mn=U-Gr;if(be-Y>Ee-se){var cn=U?(Y*mn+be*Gr)/U:be;P(L,Bt,Gr,Y,se,cn,Ee),P(Bt,B,mn,cn,se,be,Ee)}else{var Nn=U?(se*mn+Ee*Gr)/U:Ee;P(L,Bt,Gr,Y,se,be,Nn),P(Bt,B,mn,Y,Nn,be,Ee)}}}function rF(a,n,t,s,l){(a.depth&1?F1:Uy)(a,n,t,s,l)}var nF=function a(n){function t(s,l,f,d,m){if((x=s._squarify)&&x.ratio===n)for(var x,A,P,L,B=-1,U,Y=x.length,se=s.value;++B<Y;){for(A=x[B],P=A.children,L=A.value=0,U=P.length;L<U;++L)A.value+=P[L].value;A.dice?Uy(A,l,f,d,se?f+=(m-f)*A.value/se:m):F1(A,l,f,se?l+=(d-l)*A.value/se:d,m),se-=A.value}else s._squarify=x=YT(n,s,l,f,d,m),x.ratio=n}return t.ratio=function(s){return a((s=+s)>1?s:1)},t}(XT),YS={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(a,n){return n.value-a.value},ratio:.5*(1+Math.sqrt(5))};function iF(a,n){return a==="treemapSquarify"?J[a].ratio(n):J[a]}function QT(a,n){n=(0,E.f0)({},YS,n);var t=n.as;if(!(0,E.kJ)(t)||t.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s;try{s=R1(n)}catch(A){console.warn(A)}var l=iF(n.tile,n.ratio),f=function(A){return qT().tile(l).size(n.size).round(n.round).padding(n.padding).paddingInner(n.paddingInner).paddingOuter(n.paddingOuter).paddingTop(n.paddingTop).paddingRight(n.paddingRight).paddingBottom(n.paddingBottom).paddingLeft(n.paddingLeft)(Ay(A).sum(function(P){return n.ignoreParentValue&&P.children?0:P[s]}).sort(n.sort))},d=f(a),m=t[0],x=t[1];return d.each(function(A){A[m]=[A.x0,A.x1,A.x1,A.x0],A[x]=[A.y1,A.y1,A.y0,A.y0],["x0","x1","y0","y1"].forEach(function(P){t.indexOf(P)===-1&&delete A[P]})}),Xm(d)}function JT(a){var n=a.data,t=a.colorField,s=a.rawFields,l=a.hierarchyConfig,f=l===void 0?{}:l,d=f.activeDepth,m={partition:BD,treemap:QT},x=a.seriesField,A=a.type||"partition",P=m[A](n,(0,M.pi)((0,M.pi)({field:x||"value"},(0,E.CE)(f,["activeDepth"])),{type:"hierarchy.".concat(A),as:["x","y"]})),L=[];return P.forEach(function(B){var U,Y,se,be,Ee,it;if(B.depth===0||d>0&&B.depth>d)return null;for(var gt=B.data.name,xt=(0,M.pi)({},B);xt.depth>1;)gt="".concat((Y=xt.parent.data)===null||Y===void 0?void 0:Y.name," / ").concat(gt),xt=xt.parent;var Bt=(0,M.pi)((0,M.pi)((0,M.pi)({},ns(B.data,(0,M.ev)((0,M.ev)([],s||[],!0),[f.field],!1))),(U={},U[zy]=gt,U[GS]=xt.data.name,U)),B);x&&(Bt[x]=B.data[x]||((be=(se=B.parent)===null||se===void 0?void 0:se.data)===null||be===void 0?void 0:be[x])),t&&(Bt[t]=B.data[t]||((it=(Ee=B.parent)===null||Ee===void 0?void 0:Ee.data)===null||it===void 0?void 0:it[t])),Bt.ext=f,Bt[jm]={hierarchyConfig:f,colorField:t,rawFields:s},L.push(Bt)}),L}function aF(a){var n=a.chart,t=a.options,s=t.color,l=t.colorField,f=l===void 0?GS:l,d=t.sunburstStyle,m=t.rawFields,x=m===void 0?[]:m,A=t.shape,P=JT(t);n.data(P);var L;return d&&(L=function(B){return hn({},{fillOpacity:Math.pow(.85,B.depth)},(0,E.mf)(d)?d(B):d)}),a1(hn({},a,{options:{xField:"x",yField:"y",seriesField:f,rawFields:(0,E.jj)((0,M.ev)((0,M.ev)([],LD,!0),x,!0)),polygon:{color:s,style:L,shape:A}}})),a}function oF(a){var n=a.chart;return n.axis(!1),a}function sF(a){var n=a.chart,t=a.options,s=t.label,l=el(n,"polygon");if(!s)l.label(!1);else{var f=s.fields,d=f===void 0?["name"]:f,m=s.callback,x=(0,M._T)(s,["fields","callback"]);l.label({fields:d,callback:m,cfg:uc(x)})}return a}function uF(a){var n=a.chart,t=a.options,s=t.innerRadius,l=t.radius,f=t.reflect,d=n.coordinate({type:"polar",cfg:{innerRadius:s,radius:l}});return f&&d.reflect(f),a}function lF(a){var n,t=a.options,s=t.hierarchyConfig,l=t.meta;return Fa(Vu({},(n={},n[HT]=(0,E.U2)(l,(0,E.U2)(s,["field"],"value")),n)))(a)}function cF(a){var n=a.chart,t=a.options,s=t.tooltip;if(s===!1)n.tooltip(!1);else{var l=s;(0,E.U2)(s,"fields")||(l=hn({},{customItems:function(f){return f.map(function(d){var m=(0,E.U2)(n.getOptions(),"scales"),x=(0,E.U2)(m,[zy,"formatter"],function(P){return P}),A=(0,E.U2)(m,[HT,"formatter"],function(P){return P});return(0,M.pi)((0,M.pi)({},d),{name:x(d.data[zy]),value:A(d.data.value)})})}},l)),n.tooltip(l)}return a}function fF(a){var n=a.drilldown,t=a.interactions,s=t===void 0?[]:t;return n!=null&&n.enabled?hn({},a,{interactions:(0,M.ev)((0,M.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:JT}}],!1)}):a}function hF(a){var n=a.chart,t=a.options,s=t.drilldown;return js({chart:n,options:fF(t)}),s!=null&&s.enabled&&(n.appendPadding=jv(n.appendPadding,(0,E.U2)(s,["breadCrumb","position"]))),a}function pF(a){return Fa(Ko,Eh("sunburstStyle"),aF,oF,lF,Bm,uF,cF,sF,hF,ws,bu())(a)}var O4=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="sunburst",t}return n.getDefaultOptions=function(){return DD},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return pF},n.SUNBURST_ANCESTOR_FIELD=GS,n.SUNBURST_PATH_FIELD=zy,n.NODE_ANCESTORS_FIELD=fT,n}(so);function eM(a,n){if((0,E.kJ)(a))return a.find(function(t){return t.type===n})}function Zy(a,n){var t=eM(a,n);return t&&t.enable!==!1}function KS(a){var n=a.interactions,t=a.drilldown;return(0,E.U2)(t,"enabled")||Zy(n,"treemap-drill-down")}function dF(a){var n=a.interactions["drill-down"];if(n){var t=n.context.actions.find(function(s){return s.name==="drill-down-action"});t.reset()}}function qS(a){var n=a.data,t=a.colorField,s=a.enableDrillDown,l=a.hierarchyConfig,f=QT(n,(0,M.pi)((0,M.pi)({},l),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),d=[];return f.forEach(function(m){if(m.depth===0||s&&m.depth!==1||!s&&m.children)return null;var x=m.ancestors().map(function(B){return{data:B.data,height:B.height,value:B.value}}),A=s&&(0,E.kJ)(n.path)?x.concat(n.path.slice(1)):x,P=Object.assign({},m.data,(0,M.pi)({x:m.x,y:m.y,depth:m.depth,value:m.value,path:A},m));if(!m.data[t]&&m.parent){var L=m.ancestors().find(function(B){return B.data[t]});P[t]=L==null?void 0:L.data[t]}else P[t]=m.data[t];P[jm]={hierarchyConfig:l,colorField:t,enableDrillDown:s},d.push(P)}),d}function tM(a){var n=a.options,t=n.colorField;return hn({options:{rawFields:["value"],tooltip:{fields:["name","value",t,"path"],formatter:function(s){return{name:s.name,value:s.value}}}}},a)}function rM(a){var n=a.chart,t=a.options,s=t.color,l=t.colorField,f=t.rectStyle,d=t.hierarchyConfig,m=t.rawFields,x=qS({data:t.data,colorField:t.colorField,enableDrillDown:KS(t),hierarchyConfig:d});return n.data(x),a1(hn({},a,{options:{xField:"x",yField:"y",seriesField:l,rawFields:m,polygon:{color:s,style:f}}})),n.coordinate().reflect("y"),a}function nM(a){var n=a.chart;return n.axis(!1),a}function vF(a){var n=a.drilldown,t=a.interactions,s=t===void 0?[]:t,l=KS(a);return l?hn({},a,{interactions:(0,M.ev)((0,M.ev)([],s,!0),[{type:"drill-down",cfg:{drillDownConfig:n,transformData:qS}}],!1)}):a}function iM(a){var n=a.chart,t=a.options,s=t.interactions,l=t.drilldown;js({chart:n,options:vF(t)});var f=eM(s,"view-zoom");f&&(f.enable!==!1?n.getCanvas().on("mousewheel",function(m){m.preventDefault()}):n.getCanvas().off("mousewheel"));var d=KS(t);return d&&(n.appendPadding=jv(n.appendPadding,(0,E.U2)(l,["breadCrumb","position"]))),a}function aM(a){return Fa(tM,Ko,Eh("rectStyle"),rM,nM,Bm,kl,iM,ws,bu())(a)}var gF={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"\u521D\u59CB",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}},mF=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="treemap",t}return n.getDefaultOptions=function(){return gF},n.prototype.changeData=function(t){var s=this.options,l=s.colorField,f=s.interactions,d=s.hierarchyConfig;this.updateOption({data:t});var m=qS({data:t,colorField:l,enableDrillDown:Zy(f,"treemap-drill-down"),hierarchyConfig:d});this.chart.changeData(m),dF(this.chart)},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return aM},n}(so),Cd="id",QS="path",oM={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(a){return{name:a.id,value:a.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]};function B1(a){if(a){var n=a.geometries[0].elements;n.forEach(function(t){t.shape.toFront()})}}var yF=Ti("element-active"),_F=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){B1(this.context.view)},n.prototype.active=function(){a.prototype.active.call(this),this.syncElementsPos()},n.prototype.toggle=function(){a.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){a.prototype.reset.call(this),this.syncElementsPos()},n}(yF),xF=Ti("element-highlight"),bF=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){B1(this.context.view)},n.prototype.highlight=function(){a.prototype.highlight.call(this),this.syncElementsPos()},n.prototype.toggle=function(){a.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.clear=function(){a.prototype.clear.call(this),this.syncElementsPos()},n.prototype.reset=function(){a.prototype.reset.call(this),this.syncElementsPos()},n}(xF),sM=Ti("element-selected"),uM=Ti("element-single-selected"),SF=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){B1(this.context.view)},n.prototype.selected=function(){a.prototype.selected.call(this),this.syncElementsPos()},n.prototype.toggle=function(){a.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){a.prototype.reset.call(this),this.syncElementsPos()},n}(sM),lM=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.syncElementsPos=function(){B1(this.context.view)},n.prototype.selected=function(){a.prototype.selected.call(this),this.syncElementsPos()},n.prototype.toggle=function(){a.prototype.toggle.call(this),this.syncElementsPos()},n.prototype.reset=function(){a.prototype.reset.call(this),this.syncElementsPos()},n}(uM);Kr("venn-element-active",_F),Kr("venn-element-highlight",bF),Kr("venn-element-selected",SF),Kr("venn-element-single-selected",lM),Fn("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]}),Fn("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]}),Fn("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]}),Fn("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]}),Fn("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]}),Fn("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var cM=function(a){(0,M.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getLabelPoint=function(t,s,l){var f=t.data,d=f.x,m=f.y,x=t.customLabelInfo,A=x.offsetX,P=x.offsetY;return{content:t.content[l],x:d+A,y:m+P}},n}(Eo);Oi("venn",cM);var EF=k(27771),Ad=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,wF=new RegExp("([a-z])["+Ad+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ad+"]*,?["+Ad+"]*)+)","ig"),CF=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ad+"]*,?["+Ad+"]*","ig");function AF(a){if(!a)return null;if((0,EF.Z)(a))return a;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(a).replace(wF,function(s,l,f){var d=[],m=l.toLowerCase();if(f.replace(CF,function(x,A){A&&d.push(+A)}),m==="m"&&d.length>2&&(t.push([l].concat(d.splice(0,2))),m="l",l=l==="m"?"l":"L"),m==="o"&&d.length===1&&t.push([l,d[0]]),m==="r")t.push([l].concat(d));else for(;d.length>=n[m]&&(t.push([l].concat(d.splice(0,n[m]))),!!n[m]););return""}),t}var k4=/[a-z]/;function JS(a,n){return[n[0]+(n[0]-a[0]),n[1]+(n[1]-a[1])]}function TF(a){var n=parsePathString(a);if(!n||!n.length)return[["M",0,0]];for(var t=!1,s=0;s<n.length;s++){var l=n[s][0];if(k4.test(l)||["V","H","T","S"].indexOf(l)>=0){t=!0;break}}if(!t)return n;var f=[],d=0,m=0,x=0,A=0,P=0,L,B,U=n[0];(U[0]==="M"||U[0]==="m")&&(d=+U[1],m=+U[2],x=d,A=m,P++,f[0]=["M",d,m]);for(var s=P,Y=n.length;s<Y;s++){var se=n[s],be=f[s-1],Ee=[],l=se[0],it=l.toUpperCase();if(l!==it)switch(Ee[0]=it,it){case"A":Ee[1]=se[1],Ee[2]=se[2],Ee[3]=se[3],Ee[4]=se[4],Ee[5]=se[5],Ee[6]=+se[6]+d,Ee[7]=+se[7]+m;break;case"V":Ee[1]=+se[1]+m;break;case"H":Ee[1]=+se[1]+d;break;case"M":x=+se[1]+d,A=+se[2]+m,Ee[1]=x,Ee[2]=A;break;default:for(var gt=1,xt=se.length;gt<xt;gt++)Ee[gt]=+se[gt]+(gt%2?d:m)}else Ee=n[s];switch(it){case"Z":d=+x,m=+A;break;case"H":d=Ee[1],Ee=["L",d,m];break;case"V":m=Ee[1],Ee=["L",d,m];break;case"T":d=Ee[1],m=Ee[2];var Bt=JS([be[1],be[2]],[be[3],be[4]]);Ee=["Q",Bt[0],Bt[1],d,m];break;case"S":d=Ee[Ee.length-2],m=Ee[Ee.length-1];var _r=be.length,Or=JS([be[_r-4],be[_r-3]],[be[_r-2],be[_r-1]]);Ee=["C",Or[0],Or[1],Ee[1],Ee[2],d,m];break;case"M":x=Ee[Ee.length-2],A=Ee[Ee.length-1];break;default:d=Ee[Ee.length-2],m=Ee[Ee.length-1]}f.push(Ee)}return f}var Vy=Math.PI*2,N1=function(a,n,t,s,l,f,d){var m=a.x,x=a.y;m*=n,x*=t;var A=s*m-l*x,P=l*m+s*x;return{x:A+f,y:P+d}},fM=function(a,n){var t=n===1.5707963267948966?.551915024494:n===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(n/4),s=Math.cos(a),l=Math.sin(a),f=Math.cos(a+n),d=Math.sin(a+n);return[{x:s-l*t,y:l+s*t},{x:f+d*t,y:d-f*t},{x:f,y:d}]},eE=function(a,n,t,s){var l=a*s-n*t<0?-1:1,f=a*t+n*s;return f>1&&(f=1),f<-1&&(f=-1),l*Math.acos(f)},hM=function(a,n,t,s,l,f,d,m,x,A,P,L){var B=Math.pow(l,2),U=Math.pow(f,2),Y=Math.pow(P,2),se=Math.pow(L,2),be=B*U-B*se-U*Y;be<0&&(be=0),be/=B*se+U*Y,be=Math.sqrt(be)*(d===m?-1:1);var Ee=be*l/f*L,it=be*-f/l*P,gt=A*Ee-x*it+(a+t)/2,xt=x*Ee+A*it+(n+s)/2,Bt=(P-Ee)/l,_r=(L-it)/f,Or=(-P-Ee)/l,Gr=(-L-it)/f,mn=eE(1,0,Bt,_r),cn=eE(Bt,_r,Or,Gr);return m===0&&cn>0&&(cn-=Vy),m===1&&cn<0&&(cn+=Vy),[gt,xt,mn,cn]},pM=function(a){var n=a.px,t=a.py,s=a.cx,l=a.cy,f=a.rx,d=a.ry,m=a.xAxisRotation,x=m===void 0?0:m,A=a.largeArcFlag,P=A===void 0?0:A,L=a.sweepFlag,B=L===void 0?0:L,U=[];if(f===0||d===0)return[{x1:0,y1:0,x2:0,y2:0,x:s,y:l}];var Y=Math.sin(x*Vy/360),se=Math.cos(x*Vy/360),be=se*(n-s)/2+Y*(t-l)/2,Ee=-Y*(n-s)/2+se*(t-l)/2;if(be===0&&Ee===0)return[{x1:0,y1:0,x2:0,y2:0,x:s,y:l}];f=Math.abs(f),d=Math.abs(d);var it=Math.pow(be,2)/Math.pow(f,2)+Math.pow(Ee,2)/Math.pow(d,2);it>1&&(f*=Math.sqrt(it),d*=Math.sqrt(it));var gt=hM(n,t,s,l,f,d,P,B,Y,se,be,Ee),xt=gt[0],Bt=gt[1],_r=gt[2],Or=gt[3],Gr=Math.abs(Or)/(Vy/4);Math.abs(1-Gr)<1e-7&&(Gr=1);var mn=Math.max(Math.ceil(Gr),1);Or/=mn;for(var cn=0;cn<mn;cn++)U.push(fM(_r,Or)),_r+=Or;return U.map(function(Nn){var hi=N1(Nn[0],f,d,se,Y,xt,Bt),Wi=hi.x,bi=hi.y,to=N1(Nn[1],f,d,se,Y,xt,Bt),jn=to.x,Ci=to.y,aa=N1(Nn[2],f,d,se,Y,xt,Bt),Ni=aa.x,$i=aa.y;return{x1:Wi,y1:bi,x2:jn,y2:Ci,x:Ni,y:$i}})};function MF(a,n,t,s,l,f,d,m,x){var A=pM({px:a,py:n,cx:m,cy:x,rx:t,ry:s,xAxisRotation:l,largeArcFlag:f,sweepFlag:d});return A.reduce(function(P,L){var B=L.x1,U=L.y1,Y=L.x2,se=L.y2,be=L.x,Ee=L.y;return P.push(B,U,Y,se,be,Ee),P},[])}function RF(a,n){"TQ".indexOf(a[0])<0&&(n.qx=null,n.qy=null);var t=a.slice(1),s=t[0],l=t[1];switch(a[0]){case"M":return n.x=s,n.y=l,a;case"A":return["C"].concat(arcToCubic.apply(0,[n.x1,n.y1].concat(a.slice(1))));case"Q":return n.qx=s,n.qy=l,["C"].concat(quadToCubic.apply(0,[n.x1,n.y1].concat(a.slice(1))));case"L":return["C"].concat(lineToCubic(n.x1,n.y1,a[1],a[2]));case"H":return["C"].concat(lineToCubic(n.x1,n.y1,a[1],n.y1));case"V":return["C"].concat(lineToCubic(n.x1,n.y1,n.x1,a[1]));case"Z":return["C"].concat(lineToCubic(n.x1,n.y1,n.x,n.y));default:}return a}function t0(a,n){n===void 0&&(n=!1);for(var t=path2Absolute(a),s={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},l=[],f="",d=t.length,m,x,A=[],P=0;P<d;P+=1)t[P]&&(f=t[P][0]),l[P]=f,t[P]=segmentToCubic(t[P],s),dM(t,l,P),d=t.length,f==="Z"&&A.push(P),m=t[P],x=m.length,s.x1=+m[x-2],s.y1=+m[x-1],s.x2=+m[x-4]||s.x1,s.y2=+m[x-3]||s.y1;return n?[t,A]:t}function dM(a,n,t){if(a[t].length>7){a[t].shift();for(var s=a[t],l=t;s.length;)n[t]="A",a.splice(l+=1,0,["C"].concat(s.splice(0,6)));a.splice(t,1)}}var tE=function(a,n,t,s,l){var f=-3*n+9*t-9*s+3*l,d=a*f+6*n-12*t+6*s;return a*d-3*n+3*t},rE=function(a,n,t,s,l,f,d,m,x){x===null&&(x=1),x=x>1?1:x<0?0:x;for(var A=x/2,P=12,L=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],B=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],U=0,Y=0;Y<P;Y++){var se=A*L[Y]+A,be=tE(se,a,t,l,d),Ee=tE(se,n,s,f,m),it=be*be+Ee*Ee;U+=B[Y]*Math.sqrt(it)}return A*U},vM=function(a,n,t,s,l,f,d,m){for(var x=[],A=[[],[]],P,L,B,U,Y=0;Y<2;++Y){if(Y===0?(L=6*a-12*t+6*l,P=-3*a+9*t-9*l+3*d,B=3*t-3*a):(L=6*n-12*s+6*f,P=-3*n+9*s-9*f+3*m,B=3*s-3*n),Math.abs(P)<1e-12){if(Math.abs(L)<1e-12)continue;U=-B/L,U>0&&U<1&&x.push(U);continue}var se=L*L-4*B*P,be=Math.sqrt(se);if(!(se<0)){var Ee=(-L+be)/(2*P);Ee>0&&Ee<1&&x.push(Ee);var it=(-L-be)/(2*P);it>0&&it<1&&x.push(it)}}for(var gt=x.length,xt=gt,Bt;gt--;)U=x[gt],Bt=1-U,A[0][gt]=Bt*Bt*Bt*a+3*Bt*Bt*U*t+3*Bt*U*U*l+U*U*U*d,A[1][gt]=Bt*Bt*Bt*n+3*Bt*Bt*U*s+3*Bt*U*U*f+U*U*U*m;return A[0][xt]=a,A[1][xt]=n,A[0][xt+1]=d,A[1][xt+1]=m,A[0].length=A[1].length=xt+2,{min:{x:Math.min.apply(0,A[0]),y:Math.min.apply(0,A[1])},max:{x:Math.max.apply(0,A[0]),y:Math.max.apply(0,A[1])}}},gM=function(a,n,t,s,l,f,d,m){if(!(Math.max(a,t)<Math.min(l,d)||Math.min(a,t)>Math.max(l,d)||Math.max(n,s)<Math.min(f,m)||Math.min(n,s)>Math.max(f,m))){var x=(a*s-n*t)*(l-d)-(a-t)*(l*m-f*d),A=(a*s-n*t)*(f-m)-(n-s)*(l*m-f*d),P=(a-t)*(f-m)-(n-s)*(l-d);if(P){var L=x/P,B=A/P,U=+L.toFixed(2),Y=+B.toFixed(2);if(!(U<+Math.min(a,t).toFixed(2)||U>+Math.max(a,t).toFixed(2)||U<+Math.min(l,d).toFixed(2)||U>+Math.max(l,d).toFixed(2)||Y<+Math.min(n,s).toFixed(2)||Y>+Math.max(n,s).toFixed(2)||Y<+Math.min(f,m).toFixed(2)||Y>+Math.max(f,m).toFixed(2)))return{x:L,y:B}}}},Xv=function(a,n,t){return n>=a.x&&n<=a.x+a.width&&t>=a.y&&t<=a.y+a.height},z1=function(a,n,t,s){return a===null&&(a=n=t=s=0),n===null&&(n=a.y,t=a.width,s=a.height,a=a.x),{x:a,y:n,width:t,w:t,height:s,h:s,x2:a+t,y2:n+s,cx:a+t/2,cy:n+s/2,r1:Math.min(t,s)/2,r2:Math.max(t,s)/2,r0:Math.sqrt(t*t+s*s)/2,path:rectPath(a,n,t,s),vb:[a,n,t,s].join(" ")}},mM=function(a,n){return a=z1(a),n=z1(n),Xv(n,a.x,a.y)||Xv(n,a.x2,a.y)||Xv(n,a.x,a.y2)||Xv(n,a.x2,a.y2)||Xv(a,n.x,n.y)||Xv(a,n.x2,n.y)||Xv(a,n.x,n.y2)||Xv(a,n.x2,n.y2)||(a.x<n.x2&&a.x>n.x||n.x<a.x2&&n.x>a.x)&&(a.y<n.y2&&a.y>n.y||n.y<a.y2&&n.y>a.y)},yM=function(a,n,t,s,l,f,d,m){isArray(a)||(a=[a,n,t,s,l,f,d,m]);var x=vM.apply(null,a);return z1(x.min.x,x.min.y,x.max.x-x.min.x,x.max.y-x.min.y)},nE=function(a,n,t,s,l,f,d,m,x){var A=1-x,P=Math.pow(A,3),L=Math.pow(A,2),B=x*x,U=B*x,Y=P*a+L*3*x*t+A*3*x*x*l+U*d,se=P*n+L*3*x*s+A*3*x*x*f+U*m,be=a+2*x*(t-a)+B*(l-2*t+a),Ee=n+2*x*(s-n)+B*(f-2*s+n),it=t+2*x*(l-t)+B*(d-2*l+t),gt=s+2*x*(f-s)+B*(m-2*f+s),xt=A*a+x*t,Bt=A*n+x*s,_r=A*l+x*d,Or=A*f+x*m,Gr=90-Math.atan2(be-it,Ee-gt)*180/Math.PI;return{x:Y,y:se,m:{x:be,y:Ee},n:{x:it,y:gt},start:{x:xt,y:Bt},end:{x:_r,y:Or},alpha:Gr}},_M=function(a,n,t){var s=yM(a),l=yM(n);if(!mM(s,l))return t?0:[];for(var f=rE.apply(0,a),d=rE.apply(0,n),m=~~(f/8),x=~~(d/8),A=[],P=[],L={},B=t?0:[],U=0;U<m+1;U++){var Y=nE.apply(0,a.concat(U/m));A.push({x:Y.x,y:Y.y,t:U/m})}for(var U=0;U<x+1;U++){var Y=nE.apply(0,n.concat(U/x));P.push({x:Y.x,y:Y.y,t:U/x})}for(var U=0;U<m;U++)for(var se=0;se<x;se++){var be=A[U],Ee=A[U+1],it=P[se],gt=P[se+1],xt=Math.abs(Ee.x-be.x)<.001?"y":"x",Bt=Math.abs(gt.x-it.x)<.001?"y":"x",_r=gM(be.x,be.y,Ee.x,Ee.y,it.x,it.y,gt.x,gt.y);if(_r){if(L[_r.x.toFixed(4)]===_r.y.toFixed(4))continue;L[_r.x.toFixed(4)]=_r.y.toFixed(4);var Or=be.t+Math.abs((_r[xt]-be[xt])/(Ee[xt]-be[xt]))*(Ee.t-be.t),Gr=it.t+Math.abs((_r[Bt]-it[Bt])/(gt[Bt]-it[Bt]))*(gt.t-it.t);Or>=0&&Or<=1&&Gr>=0&&Gr<=1&&(t?B++:B.push({x:_r.x,y:_r.y,t1:Or,t2:Gr}))}}return B},IF=function(a,n,t){a=path2Curve(a),n=path2Curve(n);for(var s,l,f,d,m,x,A,P,L,B,U=t?0:[],Y=0,se=a.length;Y<se;Y++){var be=a[Y];if(be[0]==="M")s=m=be[1],l=x=be[2];else{be[0]==="C"?(L=[s,l].concat(be.slice(1)),s=L[6],l=L[7]):(L=[s,l,s,l,m,x,m,x],s=m,l=x);for(var Ee=0,it=n.length;Ee<it;Ee++){var gt=n[Ee];if(gt[0]==="M")f=A=gt[1],d=P=gt[2];else{gt[0]==="C"?(B=[f,d].concat(gt.slice(1)),f=B[6],d=B[7]):(B=[f,d,f,d,A,P,A,P],f=A,d=P);var xt=_M(L,B,t);if(t)U+=xt;else{for(var Bt=0,_r=xt.length;Bt<_r;Bt++)xt[Bt].segment1=Y,xt[Bt].segment2=Ee,xt[Bt].bez1=L,xt[Bt].bez2=B;U=U.concat(xt)}}}}}return U};function h8(a,n){return IF(a,n)}function PF(a){return hn({},a.defaultStyle,{fill:a.color},a.style)}yi("schema","venn",{draw:function(a,n){var t=a.data,s=AF(t[QS]),l=PF(a),f=n.addGroup({name:"venn-shape"});f.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},l),{path:s}),name:"venn-path"});var d=a.customInfo,m=d.offsetX,x=d.offsetY,A=sc.transform(null,[["t",m,x]]);return f.setMatrix(A),f},getMarker:function(a){var n=a.color;return{symbol:"circle",style:{lineWidth:0,stroke:n,fill:n,r:4}}}});var L4=function(a){return function(n,t){var s=[];return s[0]=a(n[0],t[0]),s[1]=a(n[1],t[1]),s[2]=a(n[2],t[2]),s}},xM={normal:function(a){return a},multiply:function(a,n){return a*n/255},screen:function(a,n){return 255*(1-(1-a/255)*(1-n/255))},overlay:function(a,n){return n<128?2*a*n/255:255*(1-2*(1-a/255)*(1-n/255))},darken:function(a,n){return a>n?n:a},lighten:function(a,n){return a>n?a:n},dodge:function(a,n){return a===255?255:(a=255*(n/255)/(1-a/255),a>255?255:a)},burn:function(a,n){return n===255?255:a===0?0:255*(1-Math.min(1,(1-n/255)/(a/255)))}},OF=function(a){if(!xM[a])throw new Error("unknown blend mode "+a);return xM[a]};function kF(a,n,t){t===void 0&&(t="normal");var s=L4(OF(t))(iE(a),iE(n)),l=iE(a),f=l[0],d=l[1],m=l[2],x=l[3],A=iE(n),P=A[0],L=A[1],B=A[2],U=A[3],Y=Number((x+U*(1-x)).toFixed(2)),se=Math.round((x*(1-U)*(f/255)+x*U*(s[0]/255)+(1-x)*U*(P/255))/Y*255),be=Math.round((x*(1-U)*(d/255)+x*U*(s[1]/255)+(1-x)*U*(L/255))/Y*255),Ee=Math.round((x*(1-U)*(m/255)+x*U*(s[2]/255)+(1-x)*U*(B/255))/Y*255);return"rgba(".concat(se,", ").concat(be,", ").concat(Ee,", ").concat(Y,")")}function iE(a){var n=a.replace("/s+/g",""),t;return typeof n=="string"&&!n.startsWith("rgba")&&!n.startsWith("#")?t=ba.rgb2arr(ba.toRGB(n)).concat([1]):(n.startsWith("rgba")&&(t=n.replace("rgba(","").replace(")","").split(",")),n.startsWith("#")&&(t=ba.rgb2arr(n).concat([1])),t.map(function(s,l){return l===3?Number(s):s|0}))}var Td=k(87026),LF=1e-10;function bM(a,n){var t=D4(a),s=t.filter(function(Or){return DF(Or,a)}),l=0,f=0,d,m=[];if(s.length>1){var x=oE(s);for(d=0;d<s.length;++d){var A=s[d];A.angle=Math.atan2(A.x-x.x,A.y-x.y)}s.sort(function(Or,Gr){return Gr.angle-Or.angle});var P=s[s.length-1];for(d=0;d<s.length;++d){var L=s[d];f+=(P.x+L.x)*(L.y-P.y);for(var B={x:(L.x+P.x)/2,y:(L.y+P.y)/2},U=null,Y=0;Y<L.parentIndex.length;++Y)if(P.parentIndex.indexOf(L.parentIndex[Y])>-1){var se=a[L.parentIndex[Y]],be=Math.atan2(L.x-se.x,L.y-se.y),Ee=Math.atan2(P.x-se.x,P.y-se.y),it=Ee-be;it<0&&(it+=2*Math.PI);var gt=Ee-it/2,xt=Up(B,{x:se.x+se.radius*Math.sin(gt),y:se.y+se.radius*Math.cos(gt)});xt>se.radius*2&&(xt=se.radius*2),(U===null||U.width>xt)&&(U={circle:se,width:xt,p1:L,p2:P})}U!==null&&(m.push(U),l+=SM(U.circle.radius,U.width),P=L)}}else{var Bt=a[0];for(d=1;d<a.length;++d)a[d].radius<Bt.radius&&(Bt=a[d]);var _r=!1;for(d=0;d<a.length;++d)if(Up(a[d],Bt)>Math.abs(Bt.radius-a[d].radius)){_r=!0;break}_r?l=f=0:(l=Bt.radius*Bt.radius*Math.PI,m.push({circle:Bt,p1:{x:Bt.x,y:Bt.y+Bt.radius},p2:{x:Bt.x-LF,y:Bt.y+Bt.radius},width:Bt.radius*2}))}return f/=2,n&&(n.area=l+f,n.arcArea=l,n.polygonArea=f,n.arcs=m,n.innerPoints=s,n.intersectionPoints=t),l+f}function DF(a,n){for(var t=0;t<n.length;++t)if(Up(a,n[t])>n[t].radius+LF)return!1;return!0}function D4(a){for(var n=[],t=0;t<a.length;++t)for(var s=t+1;s<a.length;++s)for(var l=U1(a[t],a[s]),f=0;f<l.length;++f){var d=l[f];d.parentIndex=[t,s],n.push(d)}return n}function SM(a,n){return a*a*Math.acos(1-n/a)-(a-n)*Math.sqrt(n*(2*a-n))}function Up(a,n){return Math.sqrt((a.x-n.x)*(a.x-n.x)+(a.y-n.y)*(a.y-n.y))}function aE(a,n,t){if(t>=a+n)return 0;if(t<=Math.abs(a-n))return Math.PI*Math.min(a,n)*Math.min(a,n);var s=a-(t*t-n*n+a*a)/(2*t),l=n-(t*t-a*a+n*n)/(2*t);return SM(a,s)+SM(n,l)}function U1(a,n){var t=Up(a,n),s=a.radius,l=n.radius;if(t>=s+l||t<=Math.abs(s-l))return[];var f=(s*s-l*l+t*t)/(2*t),d=Math.sqrt(s*s-f*f),m=a.x+f*(n.x-a.x)/t,x=a.y+f*(n.y-a.y)/t,A=-(n.y-a.y)*(d/t),P=-(n.x-a.x)*(d/t);return[{x:m+A,y:x-P},{x:m-A,y:x+P}]}function oE(a){for(var n={x:0,y:0},t=0;t<a.length;++t)n.x+=a[t].x,n.y+=a[t].y;return n.x/=a.length,n.y/=a.length,n}function r0(a,n,t){var s=n[0].radius-Up(n[0],a),l,f;for(l=1;l<n.length;++l)f=n[l].radius-Up(n[l],a),f<=s&&(s=f);for(l=0;l<t.length;++l)f=Up(t[l],a)-t[l].radius,f<=s&&(s=f);return s}function FF(a,n){var t=[],s;for(s=0;s<a.length;++s){var l=a[s];t.push({x:l.x,y:l.y}),t.push({x:l.x+l.radius/2,y:l.y}),t.push({x:l.x-l.radius/2,y:l.y}),t.push({x:l.x,y:l.y+l.radius/2}),t.push({x:l.x,y:l.y-l.radius/2})}var f=t[0],d=r0(t[0],a,n);for(s=1;s<t.length;++s){var m=r0(t[s],a,n);m>=d&&(f=t[s],d=m)}var x=(0,Td.nelderMead)(function(B){return-1*r0({x:B[0],y:B[1]},a,n)},[f.x,f.y],{maxIterations:500,minErrorDelta:1e-10}).x,A={x:x[0],y:x[1]},P=!0;for(s=0;s<a.length;++s)if(Up(A,a[s])>a[s].radius){P=!1;break}for(s=0;s<n.length;++s)if(Up(A,n[s])<n[s].radius){P=!1;break}if(!P)if(a.length==1)A={x:a[0].x,y:a[0].y};else{var L={};bM(a,L),L.arcs.length===0?A={x:0,y:-1e3,disjoint:!0}:L.arcs.length==1?A={x:L.arcs[0].circle.x,y:L.arcs[0].circle.y}:n.length?A=FF(a,[]):A=oE(L.arcs.map(function(B){return B.p1}))}return A}function BF(a){var n={},t=[];for(var s in a)t.push(s),n[s]=[];for(var l=0;l<t.length;l++)for(var f=a[t[l]],d=l+1;d<t.length;++d){var m=a[t[d]],x=Up(f,m);x+m.radius<=f.radius+1e-10?n[t[d]].push(t[l]):x+f.radius<=m.radius+1e-10&&n[t[l]].push(t[d])}return n}function EM(a,n){for(var t={},s=BF(a),l=0;l<n.length;++l){for(var f=n[l].sets,d={},m={},x=0;x<f.length;++x){d[f[x]]=!0;for(var A=s[f[x]],P=0;P<A.length;++P)m[A[P]]=!0}var L=[],B=[];for(var U in a)U in d?L.push(a[U]):U in m||B.push(a[U]);var Y=FF(L,B);t[f]=Y,Y.disjoint&&n[l].size>0&&console.log("WARNING: area "+f+" not represented on screen")}return t}function Hy(a,n,t){var s=[],l=a-t,f=n;return s.push("M",l,f),s.push("A",t,t,0,1,0,l+2*t,f),s.push("A",t,t,0,1,0,l,f),s.join(" ")}function sE(a){var n=a.split(" ");return{x:parseFloat(n[1]),y:parseFloat(n[2]),radius:-parseFloat(n[4])}}function F4(a){var n={};bM(a,n);var t=n.arcs;if(t.length===0)return"M 0 0";if(t.length==1){var s=t[0].circle;return Hy(s.x,s.y,s.radius)}else{for(var l=[`
M`,t[0].p2.x,t[0].p2.y],f=0;f<t.length;++f){var d=t[f],m=d.circle.radius,x=d.width>m;l.push(`
A`,m,m,0,x?1:0,1,d.p1.x,d.p1.y)}return l.join(" ")}}function B4(a,n){n=n||{},n.maxIterations=n.maxIterations||500;var t=n.initialLayout||uE,s=n.lossFunction||Z1;a=wM(a);var l=t(a,n),f=[],d=[],m;for(m in l)l.hasOwnProperty(m)&&(f.push(l[m].x),f.push(l[m].y),d.push(m));for(var x=(0,Td.nelderMead)(function(L){for(var B={},U=0;U<d.length;++U){var Y=d[U];B[Y]={x:L[2*U],y:L[2*U+1],radius:l[Y].radius}}return s(B,a)},f,n),A=x.x,P=0;P<d.length;++P)m=d[P],l[m].x=A[2*P],l[m].y=A[2*P+1];return l}var Yv=1e-10;function Ah(a,n,t){return Math.min(a,n)*Math.min(a,n)*Math.PI<=t+Yv?Math.abs(a-n):(0,Td.bisect)(function(s){return aE(a,n,s)-t},0,a+n)}function wM(a){a=a.slice();var n=[],t={},s,l,f,d;for(s=0;s<a.length;++s){var m=a[s];m.sets.length==1?n.push(m.sets[0]):m.sets.length==2&&(f=m.sets[0],d=m.sets[1],t[[f,d]]=!0,t[[d,f]]=!0)}for(n.sort(function(x,A){return x>A?1:-1}),s=0;s<n.length;++s)for(f=n[s],l=s+1;l<n.length;++l)d=n[l],[f,d]in t||a.push({sets:[f,d],size:0});return a}function pv(a,n,t){var s=(0,Td.zerosM)(n.length,n.length),l=(0,Td.zerosM)(n.length,n.length);return a.filter(function(f){return f.sets.length==2}).map(function(f){var d=t[f.sets[0]],m=t[f.sets[1]],x=Math.sqrt(n[d].size/Math.PI),A=Math.sqrt(n[m].size/Math.PI),P=Ah(x,A,f.size);s[d][m]=s[m][d]=P;var L=0;f.size+1e-10>=Math.min(n[d].size,n[m].size)?L=1:f.size<=1e-10&&(L=-1),l[d][m]=l[m][d]=L}),{distances:s,constraints:l}}function CM(a,n,t,s){var l=0,f;for(f=0;f<n.length;++f)n[f]=0;for(f=0;f<t.length;++f)for(var d=a[2*f],m=a[2*f+1],x=f+1;x<t.length;++x){var A=a[2*x],P=a[2*x+1],L=t[f][x],B=s[f][x],U=(A-d)*(A-d)+(P-m)*(P-m),Y=Math.sqrt(U),se=U-L*L;B>0&&Y<=L||B<0&&Y>=L||(l+=2*se*se,n[2*f]+=4*se*(d-A),n[2*f+1]+=4*se*(m-P),n[2*x]+=4*se*(A-d),n[2*x+1]+=4*se*(P-m))}return l}function uE(a,n){var t=NF(a,n),s=n.lossFunction||Z1;if(a.length>=8){var l=lE(a,n),f=s(l,a),d=s(t,a);f+1e-8<d&&(t=l)}return t}function lE(a,n){n=n||{};var t=n.restarts||10,s=[],l={},f;for(f=0;f<a.length;++f){var d=a[f];d.sets.length==1&&(l[d.sets[0]]=s.length,s.push(d))}var m=pv(a,s,l),x=m.distances,A=m.constraints,P=(0,Td.norm2)(x.map(Td.norm2))/x.length;x=x.map(function(it){return it.map(function(gt){return gt/P})});var L=function(it,gt){return CM(it,gt,x,A)},B,U;for(f=0;f<t;++f){var Y=(0,Td.zeros)(x.length*2).map(Math.random);U=(0,Td.conjugateGradient)(L,Y,n),(!B||U.fx<B.fx)&&(B=U)}var se=B.x,be={};for(f=0;f<s.length;++f){var Ee=s[f];be[Ee.sets[0]]={x:se[2*f]*P,y:se[2*f+1]*P,radius:Math.sqrt(Ee.size/Math.PI)}}if(n.history)for(f=0;f<n.history.length;++f)(0,Td.scale)(n.history[f].x,P);return be}function NF(a,n){for(var t=n&&n.lossFunction?n.lossFunction:Z1,s={},l={},f,d=0;d<a.length;++d){var m=a[d];m.sets.length==1&&(f=m.sets[0],s[f]={x:1e10,y:1e10,rowid:Object.keys(s).length,size:m.size,radius:Math.sqrt(m.size/Math.PI)},l[f]=[])}a=a.filter(function(jn){return jn.sets.length==2});for(var d=0;d<a.length;++d){var x=a[d],A=x.hasOwnProperty("weight")?x.weight:1,P=x.sets[0],L=x.sets[1];x.size+Yv>=Math.min(s[P].size,s[L].size)&&(A=0),l[P].push({set:L,size:x.size,weight:A}),l[L].push({set:P,size:x.size,weight:A})}var B=[];for(f in l)if(l.hasOwnProperty(f)){for(var U=0,d=0;d<l[f].length;++d)U+=l[f][d].size*l[f][d].weight;B.push({set:f,size:U})}function Y(jn,Ci){return Ci.size-jn.size}B.sort(Y);var se={};function be(jn){return jn.set in se}function Ee(jn,Ci){s[Ci].x=jn.x,s[Ci].y=jn.y,se[Ci]=!0}Ee({x:0,y:0},B[0].set);for(var d=1;d<B.length;++d){var it=B[d].set,gt=l[it].filter(be);if(f=s[it],gt.sort(Y),gt.length===0)throw"ERROR: missing pairwise overlap information";for(var xt=[],Bt=0;Bt<gt.length;++Bt){var _r=s[gt[Bt].set],Or=Ah(f.radius,_r.radius,gt[Bt].size);xt.push({x:_r.x+Or,y:_r.y}),xt.push({x:_r.x-Or,y:_r.y}),xt.push({y:_r.y+Or,x:_r.x}),xt.push({y:_r.y-Or,x:_r.x});for(var Gr=Bt+1;Gr<gt.length;++Gr)for(var mn=s[gt[Gr].set],cn=Ah(f.radius,mn.radius,gt[Gr].size),Nn=U1({x:_r.x,y:_r.y,radius:Or},{x:mn.x,y:mn.y,radius:cn}),hi=0;hi<Nn.length;++hi)xt.push(Nn[hi])}for(var Wi=1e50,bi=xt[0],Bt=0;Bt<xt.length;++Bt){s[it].x=xt[Bt].x,s[it].y=xt[Bt].y;var to=t(s,a);to<Wi&&(Wi=to,bi=xt[Bt])}Ee(bi,it)}return s}function Z1(a,n){var t=0;function s(P){return P.map(function(L){return a[L]})}for(var l=0;l<n.length;++l){var f=n[l],d=void 0;if(f.sets.length!=1){if(f.sets.length==2){var m=a[f.sets[0]],x=a[f.sets[1]];d=aE(m.radius,x.radius,Up(m,x))}else d=bM(s(f.sets));var A=f.hasOwnProperty("weight")?f.weight:1;t+=A*(d-f.size)*(d-f.size)}}return t}function zF(a,n,t){t===null?a.sort(function(se,be){return be.radius-se.radius}):a.sort(t);var s;if(a.length>0){var l=a[0].x,f=a[0].y;for(s=0;s<a.length;++s)a[s].x-=l,a[s].y-=f}if(a.length==2){var d=distance(a[0],a[1]);d<Math.abs(a[1].radius-a[0].radius)&&(a[1].x=a[0].x+a[0].radius-a[1].radius-1e-10,a[1].y=a[0].y)}if(a.length>1){var m=Math.atan2(a[1].x,a[1].y)-n,x=void 0,A=void 0,P=Math.cos(m),L=Math.sin(m);for(s=0;s<a.length;++s)x=a[s].x,A=a[s].y,a[s].x=P*x-L*A,a[s].y=L*x+P*A}if(a.length>2){for(var B=Math.atan2(a[2].x,a[2].y)-n;B<0;)B+=2*Math.PI;for(;B>2*Math.PI;)B-=2*Math.PI;if(B>Math.PI){var U=a[1].y/(1e-10+a[1].x);for(s=0;s<a.length;++s){var Y=(a[s].x+U*a[s].y)/(1+U*U);a[s].x=2*Y-a[s].x,a[s].y=2*Y*U-a[s].y}}}}function V1(a){a.map(function(A){A.parent=A});function n(A){return A.parent!==A&&(A.parent=n(A.parent)),A.parent}function t(A,P){var L=n(A),B=n(P);L.parent=B}for(var s=0;s<a.length;++s)for(var l=s+1;l<a.length;++l){var f=a[s].radius+a[l].radius;distance(a[s],a[l])+1e-10<f&&t(a[l],a[s])}for(var d={},m,s=0;s<a.length;++s)m=n(a[s]).parent.setid,m in d||(d[m]=[]),d[m].push(a[s]);a.map(function(A){delete A.parent});var x=[];for(m in d)d.hasOwnProperty(m)&&x.push(d[m]);return x}function jy(a){var n=function(t){var s=Math.max.apply(null,a.map(function(f){return f[t]+f.radius})),l=Math.min.apply(null,a.map(function(f){return f[t]-f.radius}));return{max:s,min:l}};return{xRange:n("x"),yRange:n("y")}}function p8(a,n,t){n===null&&(n=Math.PI/2);var s=[],l,f;for(f in a)if(a.hasOwnProperty(f)){var d=a[f];s.push({x:d.x,y:d.y,radius:d.radius,setid:f})}var m=V1(s);for(l=0;l<m.length;++l){zF(m[l],n,t);var x=jy(m[l]);m[l].size=(x.xRange.max-x.xRange.min)*(x.yRange.max-x.yRange.min),m[l].bounds=x}m.sort(function(Y,se){return se.size-Y.size}),s=m[0];var A=s.bounds,P=(A.xRange.max-A.xRange.min)/50;function L(Y,se,be){if(Y){var Ee=Y.bounds,it,gt,xt;se?it=A.xRange.max-Ee.xRange.min+P:(it=A.xRange.max-Ee.xRange.max,xt=(Ee.xRange.max-Ee.xRange.min)/2-(A.xRange.max-A.xRange.min)/2,xt<0&&(it+=xt)),be?gt=A.yRange.max-Ee.yRange.min+P:(gt=A.yRange.max-Ee.yRange.max,xt=(Ee.yRange.max-Ee.yRange.min)/2-(A.yRange.max-A.yRange.min)/2,xt<0&&(gt+=xt));for(var Bt=0;Bt<Y.length;++Bt)Y[Bt].x+=it,Y[Bt].y+=gt,s.push(Y[Bt])}}for(var B=1;B<m.length;)L(m[B],!0,!1),L(m[B+1],!1,!0),L(m[B+2],!0,!0),B+=3,A=jy(s);var U={};for(l=0;l<s.length;++l)U[s[l].setid]=s[l];return U}function AM(a,n,t,s){var l=[],f=[];for(var d in a)a.hasOwnProperty(d)&&(f.push(d),l.push(a[d]));n-=2*s,t-=2*s;var m=jy(l),x=m.xRange,A=m.yRange;if(x.max==x.min||A.max==A.min)return console.log("not scaling solution: zero size detected"),a;for(var P=n/(x.max-x.min),L=t/(A.max-A.min),B=Math.min(L,P),U=(n-(x.max-x.min)*B)/2,Y=(t-(A.max-A.min)*B)/2,se={},be=0;be<l.length;++be){var Ee=l[be];se[f[be]]={radius:B*Ee.radius,x:s+U+(Ee.x-x.min)*B,y:s+Y+(Ee.y-A.min)*B}}return se}var N4=(0,E.HP)(function(a,n,t,s){var l=new Map,f=a.length;return n.forEach(function(d,m){if(d[s].length===1)l.set(d[Cd],a[(m+f)%f]);else{var x=d[s].map(function(A){return l.get(A)});l.set(d[Cd],x.slice(1).reduce(function(A,P){return kF(A,P,t)},x[0]))}}),l},function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];return JSON.stringify(a)});function UF(a,n,t,s){s===void 0&&(s=0);var l=a.data,f=a.setsField,d=a.sizeField;if(l.length===0)return Sd(bd.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),[];var m=l.map(function(L){var B;return(0,M.pi)((0,M.pi)({},L),(B={sets:L[f]||[],size:L[d]},B[QS]="",B[Cd]="",B))});m.sort(function(L,B){return L.sets.length-B.sets.length});var x=B4(m),A=AM(x,n,t,s),P=EM(A,m);return m.forEach(function(L){var B=L.sets,U=B.join(",");L[Cd]=U;var Y=B.map(function(Ee){return A[Ee]}),se=F4(Y);/[zZ]$/.test(se)||(se+=" Z"),L[QS]=se;var be=P[U]||{x:0,y:0};(0,E.f0)(L,be)}),m}function ZF(a,n){for(var t=0;t<n.length;t++)if(!a.includes(n[t]))return!1;return!0}var VF=40;function TM(a,n,t){var s=a.chart,l=a.options,f=l.blendMode,d=l.setsField,m=s.getTheme(),x=m.colors10,A=m.colors20,P=t;(0,E.kJ)(P)||(P=n.filter(function(B){return B[d].length===1}).length<=10?x:A);var L=N4(P,n,f,d);return function(B){return L.get(B)||P[0]}}function MM(a,n){var t=a.options,s=t.color;if(typeof s!="function"){var l=typeof s=="string"?[s]:s,f=TM(a,n,l);return function(d){return f(d[Cd])}}return s}function RM(a){var n=a.chart,t=a.options,s=t.legend,l=t.appendPadding,f=t.padding,d=lc(l);return s!==!1&&(d=jv(l,(0,E.U2)(s,"position"),VF)),n.appendPadding=Vg([d,f]),a}function HF(a){var n=a.options,t=n.data;t||(Sd(bd.WARN,!1,"warn: %s","\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A"),t=[]);var s=t.filter(function(f){return f.sets.length===1}).map(function(f){return f.sets[0]}),l=t.filter(function(f){var d=f.sets;return ZF(s,d)});return(0,E.Xy)(l,t)||Sd(bd.WARN,!1,"warn: %s","\u4EA4\u96C6\u4E2D\u4E0D\u80FD\u51FA\u73B0\u4E0D\u5B58\u5728\u7684\u96C6\u5408, \u8BF7\u8F93\u5165\u5408\u6CD5\u6570\u636E"),(0,E.b$)({},a,{options:{data:l}})}function jF(a){var n=a.chart,t=a.options,s=t.pointStyle,l=t.setsField,f=t.sizeField,d=lc(n.appendPadding),m=d[0],x=d[1],A=d[2],P=d[3],L={offsetX:P,offsetY:m},B=n.viewBBox,U=B.width,Y=B.height,se=UF(t,Math.max(U-(x+P),0),Math.max(Y-(m+A),0),0);n.data(se);var be=Zb(hn({},a,{options:{xField:"x",yField:"y",sizeField:f,seriesField:Cd,rawFields:[l,f],schema:{shape:"venn",style:s}}})).ext,Ee=be.geometry;Ee.customInfo(L);var it=MM(a,se);return typeof it=="function"&&Ee.color(Cd,function(gt){var xt=se.find(function(_r){return _r[Cd]===gt}),Bt=TM(a,se)(gt);return it(xt,Bt)}),a}function cE(a){var n=a.chart,t=a.options,s=t.label,l=lc(n.appendPadding),f=l[0],d=l[3],m={offsetX:d,offsetY:f},x=el(n,"schema");if(!s)x.label(!1);else{var A=s.callback,P=(0,M._T)(s,["callback"]);x.label({fields:["id"],callback:A,cfg:(0,E.b$)({},uc(P),{type:"venn",customLabelInfo:m})})}return a}function IM(a){var n=a.chart,t=a.options,s=t.legend,l=t.sizeField;return n.legend(Cd,s),n.legend(l,!1),a}function PM(a){var n=a.chart;return n.axis(!1),a}function OM(a){var n=a.options,t=a.chart,s=n.interactions;if(s){var l={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};js(hn({},a,{options:{interactions:s.map(function(f){return(0,M.pi)((0,M.pi)({},f),{type:l[f.type]||f.type})})}}))}return t.removeInteraction("legend-active"),t.removeInteraction("legend-highlight"),a}function WF(a){return Fa(RM,Ko,HF,jF,cE,Vu({}),IM,PM,kl,OM,ws)(a)}var z4=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="venn",t}return n.getDefaultOptions=function(){return oM},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return WF},n.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},n}(so),Th="x",Kv="violinY",kM="violinSize",fE="minMax",hE="quantile",pE="median",qv="violin_view",LM="min_max_view",DM="quantile_view",FM="median_view",BM=hn({},so.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),GF=k(53843),$F=k.n(GF);function NM(a,n){var t=a.length*n;if(a.length===0)throw new Error("quantile requires at least one data point.");if(n<0||n>1)throw new Error("quantiles must be between 0 and 1");return n===1?a[a.length-1]:n===0?a[0]:t%1!==0?a[Math.ceil(t)-1]:a.length%2===0?(a[t-1]+a[t])/2:a[t]}function n0(a,n,t){var s=a[n];a[n]=a[t],a[t]=s}function H1(a,n,t,s){for(t=t||0,s=s||a.length-1;s>t;){if(s-t>600){var l=s-t+1,f=n-t+1,d=Math.log(l),m=.5*Math.exp(2*d/3),x=.5*Math.sqrt(d*m*(l-m)/l);f-l/2<0&&(x*=-1);var A=Math.max(t,Math.floor(n-f*m/l+x)),P=Math.min(s,Math.floor(n+(l-f)*m/l+x));H1(a,n,A,P)}var L=a[n],B=t,U=s;for(n0(a,t,n),a[s]>L&&n0(a,t,s);B<U;){for(n0(a,B,U),B++,U--;a[B]<L;)B++;for(;a[U]>L;)U--}a[t]===L?n0(a,t,U):(U++,n0(a,U,s)),U<=n&&(t=U+1),n<=U&&(s=U-1)}}function i0(a,n){var t=a.slice();if(Array.isArray(n)){XF(t,n);for(var s=[],l=0;l<n.length;l++)s[l]=NM(t,n[l]);return s}else{var f=Wy(t.length,n);return zM(t,f,0,t.length-1),NM(t,n)}}function zM(a,n,t,s){n%1===0?H1(a,n,t,s):(n=Math.floor(n),H1(a,n,t,s),H1(a,n+1,n+1,s))}function XF(a,n){for(var t=[0],s=0;s<n.length;s++)t.push(Wy(a.length,n[s]));t.push(a.length-1),t.sort(dE);for(var l=[0,t.length-1];l.length;){var f=Math.ceil(l.pop()),d=Math.floor(l.pop());if(!(f-d<=1)){var m=Math.floor((d+f)/2);zM(a,t[m],Math.floor(t[d]),Math.ceil(t[f])),l.push(d,m,m,f)}}}function dE(a,n){return a-n}function Wy(a,n){var t=a*n;return n===1?a-1:n===0?0:t%1!==0?Math.ceil(t)-1:a%2===0?t-.5:t}var UM=function(a){return{low:(0,E.VV)(a),high:(0,E.Fp)(a),q1:i0(a,.25),q3:i0(a,.75),median:i0(a,[.5]),minMax:[(0,E.VV)(a),(0,E.Fp)(a)],quantile:[i0(a,.25),i0(a,.75)]}},vE=function(a,n){var t=$F().create(a,n);return{violinSize:t.map(function(s){return s.y}),violinY:t.map(function(s){return s.x})}},rp=function(a){var n=a.xField,t=a.yField,s=a.seriesField,l=a.data,f=a.kde,d={min:f.min,max:f.max,size:f.sampleSize,width:f.width};if(!s){var m=(0,E.vM)(l,n);return Object.keys(m).map(function(P){var L=m[P],B=L.map(function(U){return U[t]});return(0,M.pi)((0,M.pi)({x:P},vE(B,d)),UM(B))})}var x=[],A=(0,E.vM)(l,s);return Object.keys(A).forEach(function(P){var L=(0,E.vM)(A[P],n);return Object.keys(L).forEach(function(B){var U,Y=L[B],se=Y.map(function(be){return be[t]});x.push((0,M.pi)((0,M.pi)((U={x:B},U[s]=P,U),vE(se,d)),UM(se)))})}),x},Gc=["low","high","q1","q3","median"],np=[{type:"dodge",marginRatio:1/32}];function YF(a){var n=a.chart,t=a.options;return n.data(rp(t)),a}function KF(a){var n=a.chart,t=a.options,s=t.seriesField,l=t.color,f=t.shape,d=f===void 0?"violin":f,m=t.violinStyle,x=t.tooltip,A=t.state,P=n.createView({id:qv});return MC({chart:P,options:{xField:Th,yField:Kv,seriesField:s||Th,sizeField:kM,tooltip:(0,M.pi)({fields:Gc},x),violin:{style:m,color:l,shape:d},state:A}}),P.geometries[0].adjust(np),a}function qF(a){var n=a.chart,t=a.options,s=t.seriesField,l=t.color,f=t.tooltip,d=t.box;if(d===!1)return a;var m=n.createView({id:LM});jc({chart:m,options:{xField:Th,yField:fE,seriesField:s||Th,tooltip:(0,M.pi)({fields:Gc},f),state:typeof d=="object"?d.state:{},interval:{color:l,size:1,style:{lineWidth:0}}}}),m.geometries[0].adjust(np);var x=n.createView({id:DM});jc({chart:x,options:{xField:Th,yField:hE,seriesField:s||Th,tooltip:(0,M.pi)({fields:Gc},f),state:typeof d=="object"?d.state:{},interval:{color:l,size:8,style:{fillOpacity:1}}}}),x.geometries[0].adjust(np);var A=n.createView({id:FM});return wh({chart:A,options:{xField:Th,yField:pE,seriesField:s||Th,tooltip:(0,M.pi)({fields:Gc},f),state:typeof d=="object"?d.state:{},point:{color:l,size:1,style:{fill:"white",lineWidth:0}}}}),A.geometries[0].adjust(np),x.axis(!1),m.axis(!1),A.axis(!1),A.legend(!1),m.legend(!1),x.legend(!1),a}function QF(a){var n,t=a.chart,s=a.options,l=s.meta,f=s.xAxis,d=s.yAxis,m={},x=hn(m,l,(n={},n[Th]=(0,M.pi)((0,M.pi)({sync:!0},ns(f,Hc)),{type:"cat"}),n[Kv]=(0,M.pi)({sync:!0},ns(d,Hc)),n[fE]=(0,M.pi)({sync:Kv},ns(d,Hc)),n[hE]=(0,M.pi)({sync:Kv},ns(d,Hc)),n[pE]=(0,M.pi)({sync:Kv},ns(d,Hc)),n));return t.scale(x),a}function JF(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=xo(n,qv);return s===!1?f.axis(Th,!1):f.axis(Th,s),l===!1?f.axis(Kv,!1):f.axis(Kv,l),n.axis(!1),a}function ZM(a){var n=a.chart,t=a.options,s=t.legend,l=t.seriesField,f=t.shape;if(s===!1)n.legend(!1);else{var d=l||Th,m=(0,E.CE)(s,["selected"]);(!f||!f.startsWith("hollow"))&&((0,E.U2)(m,["marker","style","lineWidth"])||(0,E.t8)(m,["marker","style","lineWidth"],0)),n.legend(d,m),(0,E.U2)(s,"selected")&&(0,E.S6)(n.views,function(x){return x.legend(d,s)})}return a}function e5(a){var n=a.chart,t=xo(n,qv);return bu()((0,M.pi)((0,M.pi)({},a),{chart:t})),a}function t5(a){var n=a.chart,t=a.options,s=t.animation;return(0,E.S6)(n.views,function(l){q_(l,s)}),a}function VM(a){return Fa(Ko,YF,KF,qF,QF,kl,JF,ZM,js,e5,t5)(a)}var r5=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="violin",t}return n.getDefaultOptions=function(){return BM},n.prototype.changeData=function(t){this.updateOption({data:t}),this.chart.changeData(rp(this.options))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.getSchemaAdaptor=function(){return VM},n}(so),ip="$$yField$$",j1="$$diffField$$",W1="$$absoluteField$$",gE="$$isTotal$$",mE={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function G1(a){for(var n=[],t=0;t<a.length;t++){var s=a[t];if(s){var l=t===0?"M":"L";n.push([l,s.x,s.y])}}var f=a[0];return n.push(["L",f.x,f.y]),n.push(["z"]),n}function n5(a){return hn({},a.defaultStyle,a.style,{fill:a.color})}yi("interval","waterfall",{draw:function(a,n){var t=a.customInfo,s=a.points,l=a.nextPoints,f=n.addGroup(),d=this.parsePath(G1(s)),m=n5(a);f.addShape("path",{attrs:(0,M.pi)((0,M.pi)({},m),{path:d})});var x=(0,E.U2)(t,"leaderLine");if(x&&l){var A=[["M",s[2].x,s[2].y],["L",l[0].x,l[0].y]];s[2].y===l[1].y&&(A[1]=["L",l[1].x,l[1].y]),A=this.parsePath(A),f.addShape("path",{attrs:(0,M.pi)({path:A},x.style||{})})}return f}});function i5(a,n,t,s,l){var f,d=[];if((0,E.u4)(a,function(x,A){var P;Sd(bd.WARN,(0,E.hj)(A[t]),"".concat(A[t]," is not a valid number"));var L=(0,E.o8)(A[t])?null:A[t];return d.push((0,M.pi)((0,M.pi)({},A),(P={},P[s]=[x,x+L],P))),x+L},0),d.length&&l){var m=(0,E.U2)(d,[[a.length-1],s,[1]]);d.push((f={},f[n]=l.label,f[t]=m,f[s]=[0,m],f))}return d}function HM(a,n,t,s){var l=i5(a,n,t,ip,s);return l.map(function(f,d){var m;return(0,E.Kn)(f)?(0,M.pi)((0,M.pi)({},f),(m={},m[W1]=f[ip][1],m[j1]=f[ip][1]-f[ip][0],m[gE]=d===a.length,m)):f})}function a5(a){var n=a.options,t=n.locale,s=n.total,l=r1(t).get(["waterfall","total"]);return s&&typeof s.label!="string"&&l&&(a.options.total.label=l),a}function o5(a){var n=a.chart,t=a.options,s=t.data,l=t.xField,f=t.yField,d=t.total,m=t.leaderLine,x=t.columnWidthRatio,A=t.waterfallStyle,P=t.risingFill,L=t.fallingFill,B=t.color,U=t.shape,Y=t.customInfo;n.data(HM(s,l,f,d));var se=B||function(gt){return(0,E.U2)(gt,[gE])?(0,E.U2)(d,["style","fill"],""):(0,E.U2)(gt,[ip,1])-(0,E.U2)(gt,[ip,0])>0?P:L},be=hn({},a,{options:{xField:l,yField:ip,seriesField:l,rawFields:[f,j1,gE,ip],widthRatio:x,interval:{style:A,shape:U||"waterfall",color:se}}}),Ee=jc(be).ext,it=Ee.geometry;return it.customInfo((0,M.pi)((0,M.pi)({},Y),{leaderLine:m})),a}function s5(a){var n,t,s=a.options,l=s.xAxis,f=s.yAxis,d=s.xField,m=s.yField,x=s.meta,A=hn({},{alias:m},(0,E.U2)(x,m));return Fa(Vu((n={},n[d]=l,n[m]=f,n[ip]=f,n),hn({},x,(t={},t[ip]=A,t[j1]=A,t[W1]=A,t))))(a)}function u5(a){var n=a.chart,t=a.options,s=t.xAxis,l=t.yAxis,f=t.xField,d=t.yField;return s===!1?n.axis(f,!1):n.axis(f,s),l===!1?(n.axis(d,!1),n.axis(ip,!1)):(n.axis(d,l),n.axis(ip,l)),a}function jM(a){var n=a.chart,t=a.options,s=t.legend,l=t.total,f=t.risingFill,d=t.fallingFill,m=t.locale,x=r1(m);if(s===!1)n.legend(!1);else{var A=[{name:x.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:f}}},{name:x.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:d}}}];l&&A.push({name:l.label||"",value:"total",marker:{symbol:"square",style:hn({},{r:5},(0,E.U2)(l,"style"))}}),n.legend(hn({},{custom:!0,position:"top",items:A},s)),n.removeInteraction("legend-filter")}return a}function WM(a){var n=a.chart,t=a.options,s=t.label,l=t.labelMode,f=t.xField,d=el(n,"interval");if(!s)d.label(!1);else{var m=s.callback,x=(0,M._T)(s,["callback"]);d.label({fields:l==="absolute"?[W1,f]:[j1,f],callback:m,cfg:uc(x)})}return a}function l5(a){var n=a.chart,t=a.options,s=t.tooltip,l=t.xField,f=t.yField;if(s!==!1){n.tooltip((0,M.pi)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[f]},s));var d=n.geometries[0];s!=null&&s.formatter?d.tooltip("".concat(l,"*").concat(f),s.formatter):d.tooltip(f)}else n.tooltip(!1);return a}function c5(a){return Fa(a5,Ko,o5,s5,u5,jM,l5,WM,Wv,js,ws,bu())(a)}var U4=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="waterfall",t}return n.getDefaultOptions=function(){return mE},n.prototype.changeData=function(t){var s=this.options,l=s.xField,f=s.yField,d=s.total;this.updateOption({data:t}),this.chart.changeData(HM(t,l,f,d))},n.prototype.getSchemaAdaptor=function(){return c5},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n}(so),$1="color",GM=hn({},so.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",$1],formatter:function(a){return{name:a.text,value:a.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}}),$M={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function Z4(a,n){return n=(0,E.f0)({},$M,n),V4(a,n)}function V4(a,n){var t=g5();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(x){(0,E.UM)(n[x])||t[x](n[x])}),t.words(a),n.imageMask&&t.createMask(n.imageMask);var s=t.start(),l=s._tags;l.forEach(function(x){x.x+=n.size[0]/2,x.y+=n.size[1]/2});var f=n.size,d=f[0],m=f[1];return l.push({text:"",value:0,x:0,y:0,opacity:0}),l.push({text:"",value:0,x:d,y:m,opacity:0}),l}var yE=Math.PI/180,Gy=64,X1=2048;function XM(a){return a.text}function f5(){return"serif"}function YM(){return"normal"}function h5(a){return a.value}function p5(){return~~(Math.random()*2)*90}function KM(){return 1}function _E(a,n,t,s){if(!n.sprite){var l=a.context,f=a.ratio;l.clearRect(0,0,(Gy<<5)/f,X1/f);var d=0,m=0,x=0,A=t.length;for(--s;++s<A;){n=t[s],l.save(),l.font=n.style+" "+n.weight+" "+~~((n.size+1)/f)+"px "+n.font;var P=l.measureText(n.text+"m").width*f,L=n.size<<1;if(n.rotate){var B=Math.sin(n.rotate*yE),U=Math.cos(n.rotate*yE),Y=P*U,se=P*B,be=L*U,Ee=L*B;P=Math.max(Math.abs(Y+Ee),Math.abs(Y-Ee))+31>>5<<5,L=~~Math.max(Math.abs(se+be),Math.abs(se-be))}else P=P+31>>5<<5;if(L>x&&(x=L),d+P>=Gy<<5&&(d=0,m+=x,x=0),m+L>=X1)break;l.translate((d+(P>>1))/f,(m+(L>>1))/f),n.rotate&&l.rotate(n.rotate*yE),l.fillText(n.text,0,0),n.padding&&(l.lineWidth=2*n.padding,l.strokeText(n.text,0,0)),l.restore(),n.width=P,n.height=L,n.xoff=d,n.yoff=m,n.x1=P>>1,n.y1=L>>1,n.x0=-n.x1,n.y0=-n.y1,n.hasText=!0,d+=P}for(var it=l.getImageData(0,0,(Gy<<5)/f,X1/f).data,gt=[];--s>=0;)if(n=t[s],!!n.hasText){for(var P=n.width,xt=P>>5,L=n.y1-n.y0,Bt=0;Bt<L*xt;Bt++)gt[Bt]=0;if(d=n.xoff,d==null)return;m=n.yoff;for(var _r=0,Or=-1,Gr=0;Gr<L;Gr++){for(var Bt=0;Bt<P;Bt++){var mn=xt*Gr+(Bt>>5),cn=it[(m+Gr)*(Gy<<5)+(d+Bt)<<2]?1<<31-Bt%32:0;gt[mn]|=cn,_r|=cn}_r?Or=Gr:(n.y0++,L--,Gr--,m++)}n.y1=n.y0+Or,n.sprite=gt.slice(0,(n.y1-n.y0)*xt)}}}function xE(a,n,t){t>>=5;for(var s=a.sprite,l=a.width>>5,f=a.x-(l<<4),d=f&127,m=32-d,x=a.y1-a.y0,A=(a.y+a.y0)*t+(f>>5),P,L=0;L<x;L++){P=0;for(var B=0;B<=l;B++)if((P<<m|(B<l?(P=s[L*l+B])>>>d:0))&n[A+B])return!0;A+=t}return!1}function dv(a,n){var t=a[0],s=a[1];n.x+n.x0<t.x&&(t.x=n.x+n.x0),n.y+n.y0<t.y&&(t.y=n.y+n.y0),n.x+n.x1>s.x&&(s.x=n.x+n.x1),n.y+n.y1>s.y&&(s.y=n.y+n.y1)}function ap(a,n){return a.x+a.x1>n[0].x&&a.x+a.x0<n[1].x&&a.y+a.y1>n[0].y&&a.y+a.y0<n[1].y}function Y1(a){var n=a[0]/a[1];return function(t){return[n*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function bE(a){var n=4,t=n*a[0]/a[1],s=0,l=0;return function(f){var d=f<0?-1:1;switch(Math.sqrt(1+4*d*f)-d&3){case 0:s+=t;break;case 1:l+=n;break;case 2:s-=t;break;default:l-=n;break}return[s,l]}}function SE(a){for(var n=[],t=-1;++t<a;)n[t]=0;return n}function d5(){return document.createElement("canvas")}function $c(a){return(0,E.mf)(a)?a:function(){return a}}var v5={archimedean:Y1,rectangular:bE};function g5(){var a=[256,256],n=f5,t=h5,s=YM,l=p5,f=KM,d=Y1,m=Math.random,x=[],A=1/0,P=XM,L=YM,B=d5,U={};U.start=function(){var be=a[0],Ee=a[1],it=Y(B()),gt=U.board?U.board:SE((a[0]>>5)*a[1]),xt=x.length,Bt=[],_r=x.map(function(cn,Nn,hi){return cn.text=P.call(this,cn,Nn,hi),cn.font=n.call(this,cn,Nn,hi),cn.style=L.call(this,cn,Nn,hi),cn.weight=s.call(this,cn,Nn,hi),cn.rotate=l.call(this,cn,Nn,hi),cn.size=~~t.call(this,cn,Nn,hi),cn.padding=f.call(this,cn,Nn,hi),cn}).sort(function(cn,Nn){return Nn.size-cn.size}),Or=-1,Gr=U.board?[{x:0,y:0},{x:be,y:Ee}]:null;mn();function mn(){for(var cn=Date.now();Date.now()-cn<A&&++Or<xt;){var Nn=_r[Or];Nn.x=be*(m()+.5)>>1,Nn.y=Ee*(m()+.5)>>1,_E(it,Nn,_r,Or),Nn.hasText&&se(gt,Nn,Gr)&&(Bt.push(Nn),Gr?U.hasImage||dv(Gr,Nn):Gr=[{x:Nn.x+Nn.x0,y:Nn.y+Nn.y0},{x:Nn.x+Nn.x1,y:Nn.y+Nn.y1}],Nn.x-=a[0]>>1,Nn.y-=a[1]>>1)}U._tags=Bt,U._bounds=Gr}return U};function Y(be){be.width=be.height=1;var Ee=Math.sqrt(be.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);be.width=(Gy<<5)/Ee,be.height=X1/Ee;var it=be.getContext("2d",{willReadFrequently:!0});return it.fillStyle=it.strokeStyle="red",it.textAlign="center",{context:it,ratio:Ee}}function se(be,Ee,it){for(var gt=Ee.x,xt=Ee.y,Bt=Math.sqrt(a[0]*a[0]+a[1]*a[1]),_r=d(a),Or=m()<.5?1:-1,Gr,mn=-Or,cn,Nn;(Gr=_r(mn+=Or))&&(cn=~~Gr[0],Nn=~~Gr[1],!(Math.min(Math.abs(cn),Math.abs(Nn))>=Bt));)if(Ee.x=gt+cn,Ee.y=xt+Nn,!(Ee.x+Ee.x0<0||Ee.y+Ee.y0<0||Ee.x+Ee.x1>a[0]||Ee.y+Ee.y1>a[1])&&(!it||!xE(Ee,be,a[0]))&&(!it||ap(Ee,it))){for(var hi=Ee.sprite,Wi=Ee.width>>5,bi=a[0]>>5,to=Ee.x-(Wi<<4),jn=to&127,Ci=32-jn,aa=Ee.y1-Ee.y0,Ni=void 0,$i=(Ee.y+Ee.y0)*bi+(to>>5),Ma=0;Ma<aa;Ma++){Ni=0;for(var Va=0;Va<=Wi;Va++)be[$i+Va]|=Ni<<Ci|(Va<Wi?(Ni=hi[Ma*Wi+Va])>>>jn:0);$i+=bi}return delete Ee.sprite,!0}return!1}return U.createMask=function(be){var Ee=document.createElement("canvas"),it=a[0],gt=a[1];if(!(!it||!gt)){var xt=it>>5,Bt=SE((it>>5)*gt);Ee.width=it,Ee.height=gt;var _r=Ee.getContext("2d");_r.drawImage(be,0,0,be.width,be.height,0,0,it,gt);for(var Or=_r.getImageData(0,0,it,gt).data,Gr=0;Gr<gt;Gr++)for(var mn=0;mn<it;mn++){var cn=xt*Gr+(mn>>5),Nn=Gr*it+mn<<2,hi=Or[Nn]>=250&&Or[Nn+1]>=250&&Or[Nn+2]>=250,Wi=hi?1<<31-mn%32:0;Bt[cn]|=Wi}U.board=Bt,U.hasImage=!0}},U.timeInterval=function(be){A=be==null?1/0:be},U.words=function(be){x=be},U.size=function(be){a=[+be[0],+be[1]]},U.font=function(be){n=$c(be)},U.fontWeight=function(be){s=$c(be)},U.rotate=function(be){l=$c(be)},U.spiral=function(be){d=v5[be]||be},U.fontSize=function(be){t=$c(be)},U.padding=function(be){f=$c(be)},U.random=function(be){m=$c(be)},U}function EE(a){var n=a.options,t=a.chart,s=t,l=s.width,f=s.height,d=s.padding,m=s.appendPadding,x=s.ele,A=n.data,P=n.imageMask,L=n.wordField,B=n.weightField,U=n.colorField,Y=n.wordStyle,se=n.timeInterval,be=n.random,Ee=n.spiral,it=n.autoFit,gt=it===void 0?!0:it,xt=n.placementStrategy;if(!A||!A.length)return[];var Bt=Y.fontFamily,_r=Y.fontWeight,Or=Y.padding,Gr=Y.fontSize,mn=is(A,B),cn=[j4(mn),W4(mn)],Nn=A.map(function(bi){return{text:bi[L],value:bi[B],color:bi[U],datum:bi}}),hi={imageMask:P,font:Bt,fontSize:K1(Gr,cn),fontWeight:_r,size:m5({width:l,height:f,padding:d,appendPadding:m,autoFit:gt,container:x}),padding:Or,timeInterval:se,random:be,spiral:Ee,rotate:y5(n)};if((0,E.mf)(xt)){var Wi=Nn.map(function(bi,to,jn){return(0,M.pi)((0,M.pi)((0,M.pi)({},bi),{hasText:!!bi.text,font:$c(hi.font)(bi,to,jn),weight:$c(hi.fontWeight)(bi,to,jn),rotate:$c(hi.rotate)(bi,to,jn),size:$c(hi.fontSize)(bi,to,jn),style:"normal"}),xt.call(t,bi,to,jn))});return Wi.push({text:"",value:0,x:0,y:0,opacity:0}),Wi.push({text:"",value:0,x:hi.size[0],y:hi.size[1],opacity:0}),Wi}return Z4(Nn,hi)}function m5(a){var n=a.width,t=a.height,s=a.container,l=a.autoFit,f=a.padding,d=a.appendPadding;if(l){var m=Vv(s);n=m.width,t=m.height}n=n||400,t=t||400;var x=qM({padding:f,appendPadding:d}),A=x[0],P=x[1],L=x[2],B=x[3],U=[n-(B+P),t-(A+L)];return U}function qM(a){var n=lc(a.padding),t=lc(a.appendPadding),s=n[0]+t[0],l=n[1]+t[1],f=n[2]+t[2],d=n[3]+t[3];return[s,l,f,d]}function Ou(a){return new Promise(function(n,t){if(a instanceof HTMLImageElement){n(a);return}if((0,E.HD)(a)){var s=new Image;s.crossOrigin="anonymous",s.src=a,s.onload=function(){n(s)},s.onerror=function(){Sd(bd.ERROR,!1,"image %s load failed !!!",a),t()};return}Sd(bd.WARN,a===void 0,"The type of imageMask option must be String or HTMLImageElement."),t()})}function K1(a,n){if((0,E.mf)(a))return a;if((0,E.kJ)(a)){var t=a[0],s=a[1];if(!n)return function(){return(s+t)/2};var l=n[0],f=n[1];return f===l?function(){return(s+t)/2}:function(m){var x=m.value;return(s-t)/(f-l)*(x-l)+t}}return function(){return a}}function is(a,n){return a.map(function(t){return t[n]}).filter(function(t){return typeof t=="number"&&!isNaN(t)})}function y5(a){var n=H4(a),t=n.rotation,s=n.rotationSteps;if(!(0,E.kJ)(t))return t;var l=t[0],f=t[1],d=s===1?0:(f-l)/(s-1);return function(){return f===l?f:Math.floor(Math.random()*s)*d}}function H4(a){var n=a.wordStyle.rotationSteps;return n<1&&(Sd(bd.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),n=1),{rotation:a.wordStyle.rotation,rotationSteps:n}}function j4(a){return Math.min.apply(Math,a)}function W4(a){return Math.max.apply(Math,a)}function G4(a){var n=a.chart,t=a.options,s=t.colorField,l=t.color,f=EE(a);n.data(f);var d=hn({},a,{options:{xField:"x",yField:"y",seriesField:s&&$1,rawFields:(0,E.mf)(l)&&(0,M.ev)((0,M.ev)([],(0,E.U2)(t,"rawFields",[]),!0),["datum"],!1),point:{color:l,shape:"word-cloud"}}}),m=wh(d).ext;return m.geometry.label(!1),n.coordinate().reflect("y"),n.axis(!1),a}function $4(a){return Fa(Vu({x:{nice:!1},y:{nice:!1}}))(a)}function X4(a){var n=a.chart,t=a.options,s=t.legend,l=t.colorField;return s===!1?n.legend(!1):l&&n.legend($1,s),a}function Y4(a){Fa(G4,$4,kl,X4,js,ws,Ko,Wv)(a)}yi("point","word-cloud",{draw:function(a,n){var t=a.x,s=a.y,l=n.addShape("text",{attrs:(0,M.pi)((0,M.pi)({},K4(a)),{x:t,y:s})}),f=a.data.rotate;return typeof f=="number"&&sc.rotate(l,f*Math.PI/180),l}});function K4(a){return{fontSize:a.data.size,text:a.data.text,textAlign:"center",fontFamily:a.data.font,fontWeight:a.data.weight,fill:a.color||a.defaultStyle.stroke,textBaseline:"alphabetic"}}var d8=function(a){(0,M.ZT)(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="word-cloud",t}return n.getDefaultOptions=function(){return GM},n.prototype.changeData=function(t){this.updateOption({data:t}),this.options.imageMask?this.render():this.chart.changeData(EE({chart:this.chart,options:this.options}))},n.prototype.getDefaultOptions=function(){return n.getDefaultOptions()},n.prototype.render=function(){var t=this;return new Promise(function(s){var l=t.options.imageMask;if(!l){a.prototype.render.call(t),s();return}var f=function(d){t.options=(0,M.pi)((0,M.pi)({},t.options),{imageMask:d||null}),a.prototype.render.call(t),s()};Ou(l).then(f).catch(f)})},n.prototype.getSchemaAdaptor=function(){return Y4},n.prototype.triggerResize=function(){var t=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){a.prototype.triggerResize.call(t)}))},n}(so),v8=function(a){(0,M.ZT)(n,a);function n(t,s,l,f){var d=a.call(this,t,hn({},f,s))||this;return d.type="g2-plot",d.defaultOptions=f,d.adaptor=l,d}return n.prototype.getDefaultOptions=function(){return this.defaultOptions},n.prototype.getSchemaAdaptor=function(){return this.adaptor},n}(so),q4="2.4.31";wC("en-US",CC),wC("zh-CN",AC);var g8={scale:Vu,legend:Bm,tooltip:kl,annotation:bu,interaction:js,theme:Ko,animation:ws}},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(ft){try{let te=function(){j||(j=!0,b())},Ce=function(){try{G.documentElement.doScroll("left")}catch(pe){return void setTimeout(Ce,50)}te()};var Q=te,ie=Ce,k=(k=document.getElementsByTagName("script"))[k.length-1],N=k.getAttribute("data-injectcss"),k=k.getAttribute("data-disable-injectsvg");if(!k){var W,K,b,G,j,q=function(fe,J){J.parentNode.insertBefore(fe,J)};if(N&&!ft.__iconfont__svg__cssinject__){ft.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(pe){console&&console.log(pe)}}W=function(){var fe,J=document.createElement("div");J.innerHTML=ft._iconfont_svg_string_3580659,(J=J.getElementsByTagName("svg")[0])&&(J.setAttribute("aria-hidden","true"),J.style.position="absolute",J.style.width=0,J.style.height=0,J.style.overflow="hidden",J=J,(fe=document.body).firstChild?q(J,fe.firstChild):fe.appendChild(J))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(W,0):(K=function(){document.removeEventListener("DOMContentLoaded",K,!1),W()},document.addEventListener("DOMContentLoaded",K,!1)):document.attachEvent&&(b=W,G=ft.document,j=!1,Ce(),G.onreadystatechange=function(){G.readyState=="complete"&&(G.onreadystatechange=null,te())})}}catch(te){}}(window)},36556:function(ft){(function(N,k){ft.exports=k()})(this,function(){"use strict";var N=function(nt){return nt instanceof Uint8Array||nt instanceof Uint16Array||nt instanceof Uint32Array||nt instanceof Int8Array||nt instanceof Int16Array||nt instanceof Int32Array||nt instanceof Float32Array||nt instanceof Float64Array||nt instanceof Uint8ClampedArray},k=function(nt,Qt){for(var Sr=Object.keys(Qt),pn=0;pn<Sr.length;++pn)nt[Sr[pn]]=Qt[Sr[pn]];return nt},W=`
`;function K(nt){return typeof atob!="undefined"?atob(nt):"base64:"+nt}function b(nt){var Qt=new Error("(regl) "+nt);throw console.error(Qt),Qt}function G(nt,Qt){nt||b(Qt)}function j(nt){return nt?": "+nt:""}function q(nt,Qt,Sr){nt in Qt||b("unknown parameter ("+nt+")"+j(Sr)+". possible values: "+Object.keys(Qt).join())}function Q(nt,Qt){N(nt)||b("invalid parameter type"+j(Qt)+". must be a typed array")}function ie(nt,Qt){switch(Qt){case"number":return typeof nt=="number";case"object":return typeof nt=="object";case"string":return typeof nt=="string";case"boolean":return typeof nt=="boolean";case"function":return typeof nt=="function";case"undefined":return typeof nt=="undefined";case"symbol":return typeof nt=="symbol"}}function te(nt,Qt,Sr){ie(nt,Qt)||b("invalid parameter type"+j(Sr)+". expected "+Qt+", got "+typeof nt)}function Ce(nt,Qt){nt>=0&&(nt|0)===nt||b("invalid parameter type, ("+nt+")"+j(Qt)+". must be a nonnegative integer")}function pe(nt,Qt,Sr){Qt.indexOf(nt)<0&&b("invalid value"+j(Sr)+". must be one of: "+Qt)}var fe=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function J(nt){Object.keys(nt).forEach(function(Qt){fe.indexOf(Qt)<0&&b('invalid regl constructor argument "'+Qt+'". must be one of '+fe)})}function M(nt,Qt){for(nt=nt+"";nt.length<Qt;)nt=" "+nt;return nt}function E(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ge(nt,Qt){this.number=nt,this.line=Qt,this.errors=[]}function Se(nt,Qt,Sr){this.file=nt,this.line=Qt,this.message=Sr}function ze(){var nt=new Error,Qt=(nt.stack||nt).toString(),Sr=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Qt);if(Sr)return Sr[1];var pn=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Qt);return pn?pn[1]:"unknown"}function De(){var nt=new Error,Qt=(nt.stack||nt).toString(),Sr=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Qt);if(Sr)return Sr[1];var pn=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Qt);return pn?pn[1]:"unknown"}function Ue(nt,Qt){var Sr=nt.split(`
`),pn=1,kn=0,vn={unknown:new E,0:new E};vn.unknown.name=vn[0].name=Qt||ze(),vn.unknown.lines.push(new ge(0,""));for(var en=0;en<Sr.length;++en){var ri=Sr[en],Hn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ri);if(Hn)switch(Hn[1]){case"line":var di=/(\d+)(\s+\d+)?/.exec(Hn[2]);di&&(pn=di[1]|0,di[2]&&(kn=di[2]|0,kn in vn||(vn[kn]=new E)));break;case"define":var ii=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Hn[2]);ii&&(vn[kn].name=ii[1]?K(ii[2]):ii[2]);break}vn[kn].lines.push(new ge(pn++,ri))}return Object.keys(vn).forEach(function(ui){var Ei=vn[ui];Ei.lines.forEach(function(Rn){Ei.index[Rn.number]=Rn})}),vn}function at(nt){var Qt=[];return nt.split(`
`).forEach(function(Sr){if(!(Sr.length<5)){var pn=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Sr);pn?Qt.push(new Se(pn[1]|0,pn[2]|0,pn[3].trim())):Sr.length>0&&Qt.push(new Se("unknown",0,Sr))}}),Qt}function Je(nt,Qt){Qt.forEach(function(Sr){var pn=nt[Sr.file];if(pn){var kn=pn.index[Sr.line];if(kn){kn.errors.push(Sr),pn.hasErrors=!0;return}}nt.unknown.hasErrors=!0,nt.unknown.lines[0].errors.push(Sr)})}function Ze(nt,Qt,Sr,pn,kn){if(!nt.getShaderParameter(Qt,nt.COMPILE_STATUS)){var vn=nt.getShaderInfoLog(Qt),en=pn===nt.FRAGMENT_SHADER?"fragment":"vertex";qe(Sr,"string",en+" shader source must be a string",kn);var ri=Ue(Sr,kn),Hn=at(vn);Je(ri,Hn),Object.keys(ri).forEach(function(di){var ii=ri[di];if(!ii.hasErrors)return;var ui=[""],Ei=[""];function Rn(mi,Jr){ui.push(mi),Ei.push(Jr||"")}Rn("file number "+di+": "+ii.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ii.lines.forEach(function(mi){if(mi.errors.length>0){Rn(M(mi.number,4)+"|  ","background-color:yellow; font-weight:bold"),Rn(mi.line+W,"color:red; background-color:yellow; font-weight:bold");var Jr=0;mi.errors.forEach(function(En){var ai=En.message,Ti=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ai);if(Ti){var Kr=Ti[1];switch(ai=Ti[2],Kr){case"assign":Kr="=";break}Jr=Math.max(mi.line.indexOf(Kr,Jr),0)}else Jr=0;Rn(M("| ",6)),Rn(M("^^^",Jr+3)+W,"font-weight:bold"),Rn(M("| ",6)),Rn(ai+W,"font-weight:bold")}),Rn(M("| ",6)+W)}else Rn(M(mi.number,4)+"|  "),Rn(mi.line+W,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ei[0]=ui.join("%c"),console.log.apply(console,Ei)):console.log(ui.join(""))}),G.raise("Error compiling "+en+" shader, "+ri[0].name)}}function xe(nt,Qt,Sr,pn,kn){if(!nt.getProgramParameter(Qt,nt.LINK_STATUS)){var vn=nt.getProgramInfoLog(Qt),en=Ue(Sr,kn),ri=Ue(pn,kn),Hn='Error linking program with vertex shader, "'+ri[0].name+'", and fragment shader "'+en[0].name+'"';typeof document!="undefined"?console.log("%c"+Hn+W+"%c"+vn,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Hn+W+vn),G.raise(Hn)}}function _e(nt){nt._commandRef=ze()}function He(nt,Qt,Sr,pn){_e(nt);function kn(Hn){return Hn?pn.id(Hn):0}nt._fragId=kn(nt.static.frag),nt._vertId=kn(nt.static.vert);function vn(Hn,di){Object.keys(di).forEach(function(ii){Hn[pn.id(ii)]=!0})}var en=nt._uniformSet={};vn(en,Qt.static),vn(en,Qt.dynamic);var ri=nt._attributeSet={};vn(ri,Sr.static),vn(ri,Sr.dynamic),nt._hasCount="count"in nt.static||"count"in nt.dynamic||"elements"in nt.static||"elements"in nt.dynamic}function Ke(nt,Qt){var Sr=De();b(nt+" in command "+(Qt||ze())+(Sr==="unknown"?"":" called from "+Sr))}function Et(nt,Qt,Sr){nt||Ke(Qt,Sr||ze())}function ke(nt,Qt,Sr,pn){nt in Qt||Ke("unknown parameter ("+nt+")"+j(Sr)+". possible values: "+Object.keys(Qt).join(),pn||ze())}function qe(nt,Qt,Sr,pn){ie(nt,Qt)||Ke("invalid parameter type"+j(Sr)+". expected "+Qt+", got "+typeof nt,pn||ze())}function ne(nt){nt()}function Ge(nt,Qt,Sr){nt.texture?pe(nt.texture._texture.internalformat,Qt,"unsupported texture format for attachment"):pe(nt.renderbuffer._renderbuffer.format,Sr,"unsupported renderbuffer format for attachment")}var oe=33071,Fe=9728,ut=9984,Ae=9985,Le=9986,rt=9987,ye=5120,me=5121,We=5122,Ve=5123,dt=5124,Ht=5125,et=5126,$e=32819,Te=32820,Xe=33635,pt=34042,Oe=36193,Be={};Be[ye]=Be[me]=1,Be[We]=Be[Ve]=Be[Oe]=Be[Xe]=Be[$e]=Be[Te]=2,Be[dt]=Be[Ht]=Be[et]=Be[pt]=4;function vt(nt,Qt){return nt===Te||nt===$e||nt===Xe?2:nt===pt?4:Be[nt]*Qt}function Rt(nt){return!(nt&nt-1)&&!!nt}function rr(nt,Qt,Sr){var pn,kn=Qt.width,vn=Qt.height,en=Qt.channels;G(kn>0&&kn<=Sr.maxTextureSize&&vn>0&&vn<=Sr.maxTextureSize,"invalid texture shape"),(nt.wrapS!==oe||nt.wrapT!==oe)&&G(Rt(kn)&&Rt(vn),"incompatible wrap mode for texture, both width and height must be power of 2"),Qt.mipmask===1?kn!==1&&vn!==1&&G(nt.minFilter!==ut&&nt.minFilter!==Le&&nt.minFilter!==Ae&&nt.minFilter!==rt,"min filter requires mipmap"):(G(Rt(kn)&&Rt(vn),"texture must be a square power of 2 to support mipmapping"),G(Qt.mipmask===(kn<<1)-1,"missing or incomplete mipmap data")),Qt.type===et&&(Sr.extensions.indexOf("oes_texture_float_linear")<0&&G(nt.minFilter===Fe&&nt.magFilter===Fe,"filter not supported, must enable oes_texture_float_linear"),G(!nt.genMipmaps,"mipmap generation not supported with float textures"));var ri=Qt.images;for(pn=0;pn<16;++pn)if(ri[pn]){var Hn=kn>>pn,di=vn>>pn;G(Qt.mipmask&1<<pn,"missing mipmap data");var ii=ri[pn];if(G(ii.width===Hn&&ii.height===di,"invalid shape for mip images"),G(ii.format===Qt.format&&ii.internalformat===Qt.internalformat&&ii.type===Qt.type,"incompatible type for mip image"),!ii.compressed)if(ii.data){var ui=Math.ceil(vt(ii.type,en)*Hn/ii.unpackAlignment)*ii.unpackAlignment;G(ii.data.byteLength===ui*di,"invalid data for image, buffer size is inconsistent with image format")}else ii.element||ii.copy}else nt.genMipmaps||G((Qt.mipmask&1<<pn)===0,"extra mipmap data");Qt.compressed&&G(!nt.genMipmaps,"mipmap generation for compressed images not supported")}function br(nt,Qt,Sr,pn){var kn=nt.width,vn=nt.height,en=nt.channels;G(kn>0&&kn<=pn.maxTextureSize&&vn>0&&vn<=pn.maxTextureSize,"invalid texture shape"),G(kn===vn,"cube map must be square"),G(Qt.wrapS===oe&&Qt.wrapT===oe,"wrap mode not supported by cube map");for(var ri=0;ri<Sr.length;++ri){var Hn=Sr[ri];G(Hn.width===kn&&Hn.height===vn,"inconsistent cube map face shape"),Qt.genMipmaps&&(G(!Hn.compressed,"can not generate mipmap for compressed textures"),G(Hn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var di=Hn.images,ii=0;ii<16;++ii){var ui=di[ii];if(ui){var Ei=kn>>ii,Rn=vn>>ii;G(Hn.mipmask&1<<ii,"missing mipmap data"),G(ui.width===Ei&&ui.height===Rn,"invalid shape for mip images"),G(ui.format===nt.format&&ui.internalformat===nt.internalformat&&ui.type===nt.type,"incompatible type for mip image"),ui.compressed||(ui.data?G(ui.data.byteLength===Ei*Rn*Math.max(vt(ui.type,en),ui.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ui.element||ui.copy)}}}}var lt=k(G,{optional:ne,raise:b,commandRaise:Ke,command:Et,parameter:q,commandParameter:ke,constructor:J,type:te,commandType:qe,isTypedArray:Q,nni:Ce,oneOf:pe,shaderError:Ze,linkError:xe,callSite:De,saveCommandRef:_e,saveDrawInfo:He,framebufferFormat:Ge,guessCommand:ze,texture2D:rr,textureCube:br}),an=0,$r=0;function Xr(nt,Qt){this.id=an++,this.type=nt,this.data=Qt}function Nt(nt){return nt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Kt(nt){if(nt.length===0)return[];var Qt=nt.charAt(0),Sr=nt.charAt(nt.length-1);if(nt.length>1&&Qt===Sr&&(Qt==='"'||Qt==="'"))return['"'+Nt(nt.substr(1,nt.length-2))+'"'];var pn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(nt);if(pn)return Kt(nt.substr(0,pn.index)).concat(Kt(pn[1])).concat(Kt(nt.substr(pn.index+pn[0].length)));var kn=nt.split(".");if(kn.length===1)return['"'+Nt(nt)+'"'];for(var vn=[],en=0;en<kn.length;++en)vn=vn.concat(Kt(kn[en]));return vn}function or(nt){return"["+Kt(nt).join("][")+"]"}function kt(nt,Qt){return new Xr(nt,or(Qt+""))}function Jt(nt){return typeof nt=="function"&&!nt._reglType||nt instanceof Xr}function Er(nt,Qt){return typeof nt=="function"?new Xr($r,nt):nt}var wr={DynamicVariable:Xr,define:kt,isDynamic:Jt,unbox:Er,accessor:or},Br={next:typeof requestAnimationFrame=="function"?function(nt){return requestAnimationFrame(nt)}:function(nt){return setTimeout(nt,16)},cancel:typeof cancelAnimationFrame=="function"?function(nt){return cancelAnimationFrame(nt)}:clearTimeout},zr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function le(){var nt={"":0},Qt=[""];return{id:function(Sr){var pn=nt[Sr];return pn||(pn=nt[Sr]=Qt.length,Qt.push(Sr),pn)},str:function(Sr){return Qt[Sr]}}}function H(nt,Qt,Sr){var pn=document.createElement("canvas");k(pn.style,{border:0,margin:0,padding:0,top:0,left:0}),nt.appendChild(pn),nt===document.body&&(pn.style.position="absolute",k(nt.style,{margin:0,padding:0}));function kn(){var ri=window.innerWidth,Hn=window.innerHeight;if(nt!==document.body){var di=nt.getBoundingClientRect();ri=di.right-di.left,Hn=di.bottom-di.top}pn.width=Sr*ri,pn.height=Sr*Hn,k(pn.style,{width:ri+"px",height:Hn+"px"})}var vn;nt!==document.body&&typeof ResizeObserver=="function"?(vn=new ResizeObserver(function(){setTimeout(kn)}),vn.observe(nt)):window.addEventListener("resize",kn,!1);function en(){vn?vn.disconnect():window.removeEventListener("resize",kn),nt.removeChild(pn)}return kn(),{canvas:pn,onDestroy:en}}function re(nt,Qt){function Sr(pn){try{return nt.getContext(pn,Qt)}catch(kn){return null}}return Sr("webgl")||Sr("experimental-webgl")||Sr("webgl-experimental")}function Ie(nt){return typeof nt.nodeName=="string"&&typeof nt.appendChild=="function"&&typeof nt.getBoundingClientRect=="function"}function Ye(nt){return typeof nt.drawArrays=="function"||typeof nt.drawElements=="function"}function Ct(nt){return typeof nt=="string"?nt.split():(lt(Array.isArray(nt),"invalid extension array"),nt)}function ar(nt){return typeof nt=="string"?(lt(typeof document!="undefined","not supported outside of DOM"),document.querySelector(nt)):nt}function jt(nt){var Qt=nt||{},Sr,pn,kn,vn,en={},ri=[],Hn=[],di=typeof window=="undefined"?1:window.devicePixelRatio,ii=!1,ui=function(mi){mi&&lt.raise(mi)},Ei=function(){};if(typeof Qt=="string"?(lt(typeof document!="undefined","selector queries only supported in DOM enviroments"),Sr=document.querySelector(Qt),lt(Sr,"invalid query string for element")):typeof Qt=="object"?Ie(Qt)?Sr=Qt:Ye(Qt)?(vn=Qt,kn=vn.canvas):(lt.constructor(Qt),"gl"in Qt?vn=Qt.gl:"canvas"in Qt?kn=ar(Qt.canvas):"container"in Qt&&(pn=ar(Qt.container)),"attributes"in Qt&&(en=Qt.attributes,lt.type(en,"object","invalid context attributes")),"extensions"in Qt&&(ri=Ct(Qt.extensions)),"optionalExtensions"in Qt&&(Hn=Ct(Qt.optionalExtensions)),"onDone"in Qt&&(lt.type(Qt.onDone,"function","invalid or missing onDone callback"),ui=Qt.onDone),"profile"in Qt&&(ii=!!Qt.profile),"pixelRatio"in Qt&&(di=+Qt.pixelRatio,lt(di>0,"invalid pixel ratio"))):lt.raise("invalid arguments to regl"),Sr&&(Sr.nodeName.toLowerCase()==="canvas"?kn=Sr:pn=Sr),!vn){if(!kn){lt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Rn=H(pn||document.body,ui,di);if(!Rn)return null;kn=Rn.canvas,Ei=Rn.onDestroy}en.premultipliedAlpha===void 0&&(en.premultipliedAlpha=!0),vn=re(kn,en)}return vn?{gl:vn,canvas:kn,container:pn,extensions:ri,optionalExtensions:Hn,pixelRatio:di,profile:ii,onDone:ui,onDestroy:Ei}:(Ei(),ui("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function wt(nt,Qt){var Sr={};function pn(en){lt.type(en,"string","extension name must be string");var ri=en.toLowerCase(),Hn;try{Hn=Sr[ri]=nt.getExtension(ri)}catch(di){}return!!Hn}for(var kn=0;kn<Qt.extensions.length;++kn){var vn=Qt.extensions[kn];if(!pn(vn))return Qt.onDestroy(),Qt.onDone('"'+vn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Qt.optionalExtensions.forEach(pn),{extensions:Sr,restore:function(){Object.keys(Sr).forEach(function(en){if(Sr[en]&&!pn(en))throw new Error("(regl): error restoring extension "+en)})}}}function Mt(nt,Qt){for(var Sr=Array(nt),pn=0;pn<nt;++pn)Sr[pn]=Qt(pn);return Sr}var ve=5120,he=5121,Re=5122,tt=5123,St=5124,Gt=5125,gr=5126;function At(nt){for(var Qt=16;Qt<=1<<28;Qt*=16)if(nt<=Qt)return Qt;return 0}function st(nt){var Qt,Sr;return Qt=(nt>65535)<<4,nt>>>=Qt,Sr=(nt>255)<<3,nt>>>=Sr,Qt|=Sr,Sr=(nt>15)<<2,nt>>>=Sr,Qt|=Sr,Sr=(nt>3)<<1,nt>>>=Sr,Qt|=Sr,Qt|nt>>1}function Pt(){var nt=Mt(8,function(){return[]});function Qt(vn){var en=At(vn),ri=nt[st(en)>>2];return ri.length>0?ri.pop():new ArrayBuffer(en)}function Sr(vn){nt[st(vn.byteLength)>>2].push(vn)}function pn(vn,en){var ri=null;switch(vn){case ve:ri=new Int8Array(Qt(en),0,en);break;case he:ri=new Uint8Array(Qt(en),0,en);break;case Re:ri=new Int16Array(Qt(2*en),0,en);break;case tt:ri=new Uint16Array(Qt(2*en),0,en);break;case St:ri=new Int32Array(Qt(4*en),0,en);break;case Gt:ri=new Uint32Array(Qt(4*en),0,en);break;case gr:ri=new Float32Array(Qt(4*en),0,en);break;default:return null}return ri.length!==en?ri.subarray(0,en):ri}function kn(vn){Sr(vn.buffer)}return{alloc:Qt,free:Sr,allocType:pn,freeType:kn}}var yr=Pt();yr.zero=Pt();var Fr=3408,Ft=3410,Mn=3411,ei=3412,ni=3413,un=3414,Xn=3415,Wn=33901,Jn=33902,sa=3379,vi=3386,ga=34921,Ra=36347,ya=36348,ja=35661,ba=35660,gs=34930,co=36349,Io=34076,oi=34024,Si=7936,Qi=7937,Wa=7938,ms=35724,ho=34047,Po=36063,cr=34852,Ot=3553,qt=34067,Mr=34069,rn=33984,Pn=6408,Bn=5126,Cn=5121,Mi=36160,Xi=36053,Wo=36064,os=16384,Su=function(nt,Qt){var Sr=1;Qt.ext_texture_filter_anisotropic&&(Sr=nt.getParameter(ho));var pn=1,kn=1;Qt.webgl_draw_buffers&&(pn=nt.getParameter(cr),kn=nt.getParameter(Po));var vn=!!Qt.oes_texture_float;if(vn){var en=nt.createTexture();nt.bindTexture(Ot,en),nt.texImage2D(Ot,0,Pn,1,1,0,Pn,Bn,null);var ri=nt.createFramebuffer();if(nt.bindFramebuffer(Mi,ri),nt.framebufferTexture2D(Mi,Wo,Ot,en,0),nt.bindTexture(Ot,null),nt.checkFramebufferStatus(Mi)!==Xi)vn=!1;else{nt.viewport(0,0,1,1),nt.clearColor(1,0,0,1),nt.clear(os);var Hn=yr.allocType(Bn,4);nt.readPixels(0,0,1,1,Pn,Bn,Hn),nt.getError()?vn=!1:(nt.deleteFramebuffer(ri),nt.deleteTexture(en),vn=Hn[0]===1),yr.freeType(Hn)}}var di=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ii=!0;if(!di){var ui=nt.createTexture(),Ei=yr.allocType(Cn,36);nt.activeTexture(rn),nt.bindTexture(qt,ui),nt.texImage2D(Mr,0,Pn,3,3,0,Pn,Cn,Ei),yr.freeType(Ei),nt.bindTexture(qt,null),nt.deleteTexture(ui),ii=!nt.getError()}return{colorBits:[nt.getParameter(Ft),nt.getParameter(Mn),nt.getParameter(ei),nt.getParameter(ni)],depthBits:nt.getParameter(un),stencilBits:nt.getParameter(Xn),subpixelBits:nt.getParameter(Fr),extensions:Object.keys(Qt).filter(function(Rn){return!!Qt[Rn]}),maxAnisotropic:Sr,maxDrawbuffers:pn,maxColorAttachments:kn,pointSizeDims:nt.getParameter(Wn),lineWidthDims:nt.getParameter(Jn),maxViewportDims:nt.getParameter(vi),maxCombinedTextureUnits:nt.getParameter(ja),maxCubeMapSize:nt.getParameter(Io),maxRenderbufferSize:nt.getParameter(oi),maxTextureUnits:nt.getParameter(gs),maxTextureSize:nt.getParameter(sa),maxAttributes:nt.getParameter(ga),maxVertexUniforms:nt.getParameter(Ra),maxVertexTextureUnits:nt.getParameter(ba),maxVaryingVectors:nt.getParameter(ya),maxFragmentUniforms:nt.getParameter(co),glsl:nt.getParameter(ms),renderer:nt.getParameter(Qi),vendor:nt.getParameter(Si),version:nt.getParameter(Wa),readFloat:vn,npotTextureCube:ii}};function Oo(nt){return!!nt&&typeof nt=="object"&&Array.isArray(nt.shape)&&Array.isArray(nt.stride)&&typeof nt.offset=="number"&&nt.shape.length===nt.stride.length&&(Array.isArray(nt.data)||N(nt.data))}var ro=function(nt){return Object.keys(nt).map(function(Qt){return nt[Qt]})},cu={shape:fi,flatten:An};function Qo(nt,Qt,Sr){for(var pn=0;pn<Qt;++pn)Sr[pn]=nt[pn]}function Zt(nt,Qt,Sr,pn){for(var kn=0,vn=0;vn<Qt;++vn)for(var en=nt[vn],ri=0;ri<Sr;++ri)pn[kn++]=en[ri]}function er(nt,Qt,Sr,pn,kn,vn){for(var en=vn,ri=0;ri<Qt;++ri)for(var Hn=nt[ri],di=0;di<Sr;++di)for(var ii=Hn[di],ui=0;ui<pn;++ui)kn[en++]=ii[ui]}function Ur(nt,Qt,Sr,pn,kn){for(var vn=1,en=Sr+1;en<Qt.length;++en)vn*=Qt[en];var ri=Qt[Sr];if(Qt.length-Sr===4){var Hn=Qt[Sr+1],di=Qt[Sr+2],ii=Qt[Sr+3];for(en=0;en<ri;++en)er(nt[en],Hn,di,ii,pn,kn),kn+=vn}else for(en=0;en<ri;++en)Ur(nt[en],Qt,Sr+1,pn,kn),kn+=vn}function An(nt,Qt,Sr,pn){var kn=1;if(Qt.length)for(var vn=0;vn<Qt.length;++vn)kn*=Qt[vn];else kn=0;var en=pn||yr.allocType(Sr,kn);switch(Qt.length){case 0:break;case 1:Qo(nt,Qt[0],en);break;case 2:Zt(nt,Qt[0],Qt[1],en);break;case 3:er(nt,Qt[0],Qt[1],Qt[2],en,0);break;default:Ur(nt,Qt,0,en,0)}return en}function fi(nt){for(var Qt=[],Sr=nt;Sr.length;Sr=Sr[0])Qt.push(Sr.length);return Qt}var Vi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},fo=5120,Ws=5122,Co=5124,ko=5121,ju=5123,hf=5125,Qf=5126,Jf=5126,fu={int8:fo,int16:Ws,int32:Co,uint8:ko,uint16:ju,uint32:hf,float:Qf,float32:Jf},cc=35048,ru=35040,Al={dynamic:cc,stream:ru,static:35044},fc=cu.flatten,yo=cu.shape,Jl=35044,As=35040,Ts=5121,Mc=5126,Rc=[];Rc[5120]=1,Rc[5122]=2,Rc[5124]=4,Rc[5121]=1,Rc[5123]=2,Rc[5125]=4,Rc[5126]=4;function If(nt){return Vi[Object.prototype.toString.call(nt)]|0}function Ll(nt,Qt){for(var Sr=0;Sr<Qt.length;++Sr)nt[Sr]=Qt[Sr]}function Dl(nt,Qt,Sr,pn,kn,vn,en){for(var ri=0,Hn=0;Hn<Sr;++Hn)for(var di=0;di<pn;++di)nt[ri++]=Qt[kn*Hn+vn*di+en]}function ec(nt,Qt,Sr,pn){var kn=0,vn={};function en(Jr){this.id=kn++,this.buffer=nt.createBuffer(),this.type=Jr,this.usage=Jl,this.byteLength=0,this.dimension=1,this.dtype=Ts,this.persistentData=null,Sr.profile&&(this.stats={size:0})}en.prototype.bind=function(){nt.bindBuffer(this.type,this.buffer)},en.prototype.destroy=function(){Ei(this)};var ri=[];function Hn(Jr,En){var ai=ri.pop();return ai||(ai=new en(Jr)),ai.bind(),ui(ai,En,As,0,1,!1),ai}function di(Jr){ri.push(Jr)}function ii(Jr,En,ai){Jr.byteLength=En.byteLength,nt.bufferData(Jr.type,En,ai)}function ui(Jr,En,ai,Ti,Kr,Bi){var qn;if(Jr.usage=ai,Array.isArray(En)){if(Jr.dtype=Ti||Mc,En.length>0){var Ri;if(Array.isArray(En[0])){qn=yo(En);for(var Vn=1,_i=1;_i<qn.length;++_i)Vn*=qn[_i];Jr.dimension=Vn,Ri=fc(En,qn,Jr.dtype),ii(Jr,Ri,ai),Bi?Jr.persistentData=Ri:yr.freeType(Ri)}else if(typeof En[0]=="number"){Jr.dimension=Kr;var na=yr.allocType(Jr.dtype,En.length);Ll(na,En),ii(Jr,na,ai),Bi?Jr.persistentData=na:yr.freeType(na)}else N(En[0])?(Jr.dimension=En[0].length,Jr.dtype=Ti||If(En[0])||Mc,Ri=fc(En,[En.length,En[0].length],Jr.dtype),ii(Jr,Ri,ai),Bi?Jr.persistentData=Ri:yr.freeType(Ri)):lt.raise("invalid buffer data")}}else if(N(En))Jr.dtype=Ti||If(En),Jr.dimension=Kr,ii(Jr,En,ai),Bi&&(Jr.persistentData=new Uint8Array(new Uint8Array(En.buffer)));else if(Oo(En)){qn=En.shape;var La=En.stride,xi=En.offset,ti=0,Ln=0,ta=0,io=0;qn.length===1?(ti=qn[0],Ln=1,ta=La[0],io=0):qn.length===2?(ti=qn[0],Ln=qn[1],ta=La[0],io=La[1]):lt.raise("invalid shape"),Jr.dtype=Ti||If(En.data)||Mc,Jr.dimension=Ln;var Li=yr.allocType(Jr.dtype,ti*Ln);Dl(Li,En.data,ti,Ln,ta,io,xi),ii(Jr,Li,ai),Bi?Jr.persistentData=Li:yr.freeType(Li)}else En instanceof ArrayBuffer?(Jr.dtype=Ts,Jr.dimension=Kr,ii(Jr,En,ai),Bi&&(Jr.persistentData=new Uint8Array(new Uint8Array(En)))):lt.raise("invalid buffer data")}function Ei(Jr){Qt.bufferCount--,pn(Jr);var En=Jr.buffer;lt(En,"buffer must not be deleted already"),nt.deleteBuffer(En),Jr.buffer=null,delete vn[Jr.id]}function Rn(Jr,En,ai,Ti){Qt.bufferCount++;var Kr=new en(En);vn[Kr.id]=Kr;function Bi(Vn){var _i=Jl,na=null,La=0,xi=0,ti=1;return Array.isArray(Vn)||N(Vn)||Oo(Vn)||Vn instanceof ArrayBuffer?na=Vn:typeof Vn=="number"?La=Vn|0:Vn&&(lt.type(Vn,"object","buffer arguments must be an object, a number or an array"),"data"in Vn&&(lt(na===null||Array.isArray(na)||N(na)||Oo(na),"invalid data for buffer"),na=Vn.data),"usage"in Vn&&(lt.parameter(Vn.usage,Al,"invalid buffer usage"),_i=Al[Vn.usage]),"type"in Vn&&(lt.parameter(Vn.type,fu,"invalid buffer type"),xi=fu[Vn.type]),"dimension"in Vn&&(lt.type(Vn.dimension,"number","invalid dimension"),ti=Vn.dimension|0),"length"in Vn&&(lt.nni(La,"buffer length must be a nonnegative integer"),La=Vn.length|0)),Kr.bind(),na?ui(Kr,na,_i,xi,ti,Ti):(La&&nt.bufferData(Kr.type,La,_i),Kr.dtype=xi||Ts,Kr.usage=_i,Kr.dimension=ti,Kr.byteLength=La),Sr.profile&&(Kr.stats.size=Kr.byteLength*Rc[Kr.dtype]),Bi}function qn(Vn,_i){lt(_i+Vn.byteLength<=Kr.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Vn.byteLength+" starting from offset "+_i+" to a buffer of size "+Kr.byteLength),nt.bufferSubData(Kr.type,_i,Vn)}function Ri(Vn,_i){var na=(_i||0)|0,La;if(Kr.bind(),N(Vn)||Vn instanceof ArrayBuffer)qn(Vn,na);else if(Array.isArray(Vn)){if(Vn.length>0)if(typeof Vn[0]=="number"){var xi=yr.allocType(Kr.dtype,Vn.length);Ll(xi,Vn),qn(xi,na),yr.freeType(xi)}else if(Array.isArray(Vn[0])||N(Vn[0])){La=yo(Vn);var ti=fc(Vn,La,Kr.dtype);qn(ti,na),yr.freeType(ti)}else lt.raise("invalid buffer data")}else if(Oo(Vn)){La=Vn.shape;var Ln=Vn.stride,ta=0,io=0,Li=0,Qa=0;La.length===1?(ta=La[0],io=1,Li=Ln[0],Qa=0):La.length===2?(ta=La[0],io=La[1],Li=Ln[0],Qa=Ln[1]):lt.raise("invalid shape");var Oa=Array.isArray(Vn.data)?Kr.dtype:If(Vn.data),_a=yr.allocType(Oa,ta*io);Dl(_a,Vn.data,ta,io,Li,Qa,Vn.offset),qn(_a,na),yr.freeType(_a)}else lt.raise("invalid data for buffer subdata");return Bi}return ai||Bi(Jr),Bi._reglType="buffer",Bi._buffer=Kr,Bi.subdata=Ri,Sr.profile&&(Bi.stats=Kr.stats),Bi.destroy=function(){Ei(Kr)},Bi}function mi(){ro(vn).forEach(function(Jr){Jr.buffer=nt.createBuffer(),nt.bindBuffer(Jr.type,Jr.buffer),nt.bufferData(Jr.type,Jr.persistentData||Jr.byteLength,Jr.usage)})}return Sr.profile&&(Qt.getTotalBufferSize=function(){var Jr=0;return Object.keys(vn).forEach(function(En){Jr+=vn[En].stats.size}),Jr}),{create:Rn,createStream:Hn,destroyStream:di,clear:function(){ro(vn).forEach(Ei),ri.forEach(Ei)},getBuffer:function(Jr){return Jr&&Jr._buffer instanceof en?Jr._buffer:null},restore:mi,_initBuffer:ui}}var ku=0,Ic=0,In=1,Zi=1,_v=4,eh=4,hc={points:ku,point:Ic,lines:In,line:Zi,triangles:_v,triangle:eh,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Wp=0,Ks=1,Pc=4,Fl=5120,nu=5121,hu=5122,Tl=5123,pc=5124,Bl=5125,Oc=34963,Kc=35040,th=35044;function Gp(nt,Qt,Sr,pn){var kn={},vn=0,en={uint8:nu,uint16:Tl};Qt.oes_element_index_uint&&(en.uint32=Bl);function ri(mi){this.id=vn++,kn[this.id]=this,this.buffer=mi,this.primType=Pc,this.vertCount=0,this.type=0}ri.prototype.bind=function(){this.buffer.bind()};var Hn=[];function di(mi){var Jr=Hn.pop();return Jr||(Jr=new ri(Sr.create(null,Oc,!0,!1)._buffer)),ui(Jr,mi,Kc,-1,-1,0,0),Jr}function ii(mi){Hn.push(mi)}function ui(mi,Jr,En,ai,Ti,Kr,Bi){mi.buffer.bind();var qn;if(Jr){var Ri=Bi;!Bi&&(!N(Jr)||Oo(Jr)&&!N(Jr.data))&&(Ri=Qt.oes_element_index_uint?Bl:Tl),Sr._initBuffer(mi.buffer,Jr,En,Ri,3)}else nt.bufferData(Oc,Kr,En),mi.buffer.dtype=qn||nu,mi.buffer.usage=En,mi.buffer.dimension=3,mi.buffer.byteLength=Kr;if(qn=Bi,!Bi){switch(mi.buffer.dtype){case nu:case Fl:qn=nu;break;case Tl:case hu:qn=Tl;break;case Bl:case pc:qn=Bl;break;default:lt.raise("unsupported type for element array")}mi.buffer.dtype=qn}mi.type=qn,lt(qn!==Bl||!!Qt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Vn=Ti;Vn<0&&(Vn=mi.buffer.byteLength,qn===Tl?Vn>>=1:qn===Bl&&(Vn>>=2)),mi.vertCount=Vn;var _i=ai;if(ai<0){_i=Pc;var na=mi.buffer.dimension;na===1&&(_i=Wp),na===2&&(_i=Ks),na===3&&(_i=Pc)}mi.primType=_i}function Ei(mi){pn.elementsCount--,lt(mi.buffer!==null,"must not double destroy elements"),delete kn[mi.id],mi.buffer.destroy(),mi.buffer=null}function Rn(mi,Jr){var En=Sr.create(null,Oc,!0),ai=new ri(En._buffer);pn.elementsCount++;function Ti(Kr){if(!Kr)En(),ai.primType=Pc,ai.vertCount=0,ai.type=nu;else if(typeof Kr=="number")En(Kr),ai.primType=Pc,ai.vertCount=Kr|0,ai.type=nu;else{var Bi=null,qn=th,Ri=-1,Vn=-1,_i=0,na=0;Array.isArray(Kr)||N(Kr)||Oo(Kr)?Bi=Kr:(lt.type(Kr,"object","invalid arguments for elements"),"data"in Kr&&(Bi=Kr.data,lt(Array.isArray(Bi)||N(Bi)||Oo(Bi),"invalid data for element buffer")),"usage"in Kr&&(lt.parameter(Kr.usage,Al,"invalid element buffer usage"),qn=Al[Kr.usage]),"primitive"in Kr&&(lt.parameter(Kr.primitive,hc,"invalid element buffer primitive"),Ri=hc[Kr.primitive]),"count"in Kr&&(lt(typeof Kr.count=="number"&&Kr.count>=0,"invalid vertex count for elements"),Vn=Kr.count|0),"type"in Kr&&(lt.parameter(Kr.type,en,"invalid buffer type"),na=en[Kr.type]),"length"in Kr?_i=Kr.length|0:(_i=Vn,na===Tl||na===hu?_i*=2:(na===Bl||na===pc)&&(_i*=4))),ui(ai,Bi,qn,Ri,Vn,_i,na)}return Ti}return Ti(mi),Ti._reglType="elements",Ti._elements=ai,Ti.subdata=function(Kr,Bi){return En.subdata(Kr,Bi),Ti},Ti.destroy=function(){Ei(ai)},Ti}return{create:Rn,createStream:di,destroyStream:ii,getElements:function(mi){return typeof mi=="function"&&mi._elements instanceof ri?mi._elements:null},clear:function(){ro(kn).forEach(Ei)}}}var Uo=new Float32Array(1),Od=new Uint32Array(Uo.buffer),Oh=5123;function pf(nt){for(var Qt=yr.allocType(Oh,nt.length),Sr=0;Sr<nt.length;++Sr)if(isNaN(nt[Sr]))Qt[Sr]=65535;else if(nt[Sr]===1/0)Qt[Sr]=31744;else if(nt[Sr]===-1/0)Qt[Sr]=64512;else{Uo[0]=nt[Sr];var pn=Od[0],kn=pn>>>31<<15,vn=(pn<<1>>>24)-127,en=pn>>13&1024-1;if(vn<-24)Qt[Sr]=kn;else if(vn<-14){var ri=-14-vn;Qt[Sr]=kn+(en+1024>>ri)}else vn>15?Qt[Sr]=kn+31744:Qt[Sr]=kn+(vn+15<<10)+en}return Qt}function ss(nt){return Array.isArray(nt)||N(nt)}var cp=function(nt){return!(nt&nt-1)&&!!nt},fp=34467,Lu=3553,Tt=34067,mr=34069,Hr=6408,Qr=6406,On=6407,gi=6409,ua=6410,_o=32854,Fs=32855,vl=36194,rl=32819,Lo=32820,hp=33635,kd=34042,qc=6402,pp=34041,df=35904,$p=35906,Ta=36193,vf=33776,rh=33777,nh=33778,Pf=33779,ih=35986,Gs=35987,dc=34798,Du=35840,ah=35841,Xp=35842,Yp=35843,oh=36196,vc=5121,kh=5123,dp=5125,Of=5126,sg=10242,Ld=10243,Dd=10497,Ms=33071,Lh=33648,vp=10240,Kp=10241,gp=9728,Fd=9729,Dh=9984,Fh=9985,kf=9986,cs=9987,mp=33170,tc=4352,gc=4353,uo=4354,fs=34046,no=3317,qp=37440,sh=37441,yp=37443,Bd=37444,Ea=33984,uh=[Dh,kf,Fh,cs],Lf=[0,gi,ua,On,Hr],iu={};iu[gi]=iu[Qr]=iu[qc]=1,iu[pp]=iu[ua]=2,iu[On]=iu[df]=3,iu[Hr]=iu[$p]=4;function us(nt){return"[object "+nt+"]"}var lh=us("HTMLCanvasElement"),Nd=us("OffscreenCanvas"),ys=us("CanvasRenderingContext2D"),zi=us("ImageBitmap"),nl=us("HTMLImageElement"),rc=us("HTMLVideoElement"),ch=Object.keys(Vi).concat([lh,Nd,ys,zi,nl,rc]),gl=[];gl[vc]=1,gl[Of]=4,gl[Ta]=2,gl[kh]=2,gl[dp]=4;var Zo=[];Zo[_o]=2,Zo[Fs]=2,Zo[vl]=2,Zo[pp]=4,Zo[vf]=.5,Zo[rh]=.5,Zo[nh]=1,Zo[Pf]=1,Zo[ih]=.5,Zo[Gs]=1,Zo[dc]=1,Zo[Du]=.5,Zo[ah]=.25,Zo[Xp]=.5,Zo[Yp]=.25,Zo[oh]=.5;function Qp(nt){return Array.isArray(nt)&&(nt.length===0||typeof nt[0]=="number")}function Yn(nt){if(!Array.isArray(nt))return!1;var Qt=nt.length;return!(Qt===0||!ss(nt[0]))}function Qc(nt){return Object.prototype.toString.call(nt)}function kc(nt){return Qc(nt)===lh}function _p(nt){return Qc(nt)===Nd}function mc(nt){return Qc(nt)===ys}function il(nt){return Qc(nt)===zi}function Bh(nt){return Qc(nt)===nl}function gf(nt){return Qc(nt)===rc}function Bs(nt){if(!nt)return!1;var Qt=Qc(nt);return ch.indexOf(Qt)>=0?!0:Qp(nt)||Yn(nt)||Oo(nt)}function Ml(nt){return Vi[Object.prototype.toString.call(nt)]|0}function zd(nt,Qt){var Sr=Qt.length;switch(nt.type){case vc:case kh:case dp:case Of:var pn=yr.allocType(nt.type,Sr);pn.set(Qt),nt.data=pn;break;case Ta:nt.data=pf(Qt);break;default:lt.raise("unsupported texture type, must specify a typed array")}}function xp(nt,Qt){return yr.allocType(nt.type===Ta?Of:nt.type,Qt)}function Df(nt,Qt){nt.type===Ta?(nt.data=pf(Qt),yr.freeType(Qt)):nt.data=Qt}function xv(nt,Qt,Sr,pn,kn,vn){for(var en=nt.width,ri=nt.height,Hn=nt.channels,di=en*ri*Hn,ii=xp(nt,di),ui=0,Ei=0;Ei<ri;++Ei)for(var Rn=0;Rn<en;++Rn)for(var mi=0;mi<Hn;++mi)ii[ui++]=Qt[Sr*Rn+pn*Ei+kn*mi+vn];Df(nt,ii)}function nc(nt,Qt,Sr,pn,kn,vn){var en;if(typeof Zo[nt]!="undefined"?en=Zo[nt]:en=iu[nt]*gl[Qt],vn&&(en*=6),kn){for(var ri=0,Hn=Sr;Hn>=1;)ri+=en*Hn*Hn,Hn/=2;return ri}else return en*Sr*pn}function ic(nt,Qt,Sr,pn,kn,vn,en){var ri={"don't care":tc,"dont care":tc,nice:uo,fast:gc},Hn={repeat:Dd,clamp:Ms,mirror:Lh},di={nearest:gp,linear:Fd},ii=k({mipmap:cs,"nearest mipmap nearest":Dh,"linear mipmap nearest":Fh,"nearest mipmap linear":kf,"linear mipmap linear":cs},di),ui={none:0,browser:Bd},Ei={uint8:vc,rgba4:rl,rgb565:hp,"rgb5 a1":Lo},Rn={alpha:Qr,luminance:gi,"luminance alpha":ua,rgb:On,rgba:Hr,rgba4:_o,"rgb5 a1":Fs,rgb565:vl},mi={};Qt.ext_srgb&&(Rn.srgb=df,Rn.srgba=$p),Qt.oes_texture_float&&(Ei.float32=Ei.float=Of),Qt.oes_texture_half_float&&(Ei.float16=Ei["half float"]=Ta),Qt.webgl_depth_texture&&(k(Rn,{depth:qc,"depth stencil":pp}),k(Ei,{uint16:kh,uint32:dp,"depth stencil":kd})),Qt.webgl_compressed_texture_s3tc&&k(mi,{"rgb s3tc dxt1":vf,"rgba s3tc dxt1":rh,"rgba s3tc dxt3":nh,"rgba s3tc dxt5":Pf}),Qt.webgl_compressed_texture_atc&&k(mi,{"rgb atc":ih,"rgba atc explicit alpha":Gs,"rgba atc interpolated alpha":dc}),Qt.webgl_compressed_texture_pvrtc&&k(mi,{"rgb pvrtc 4bppv1":Du,"rgb pvrtc 2bppv1":ah,"rgba pvrtc 4bppv1":Xp,"rgba pvrtc 2bppv1":Yp}),Qt.webgl_compressed_texture_etc1&&(mi["rgb etc1"]=oh);var Jr=Array.prototype.slice.call(nt.getParameter(fp));Object.keys(mi).forEach(function(pr){var yn=mi[pr];Jr.indexOf(yn)>=0&&(Rn[pr]=yn)});var En=Object.keys(Rn);Sr.textureFormats=En;var ai=[];Object.keys(Rn).forEach(function(pr){var yn=Rn[pr];ai[yn]=pr});var Ti=[];Object.keys(Ei).forEach(function(pr){var yn=Ei[pr];Ti[yn]=pr});var Kr=[];Object.keys(di).forEach(function(pr){var yn=di[pr];Kr[yn]=pr});var Bi=[];Object.keys(ii).forEach(function(pr){var yn=ii[pr];Bi[yn]=pr});var qn=[];Object.keys(Hn).forEach(function(pr){var yn=Hn[pr];qn[yn]=pr});var Ri=En.reduce(function(pr,yn){var fn=Rn[yn];return fn===gi||fn===Qr||fn===gi||fn===ua||fn===qc||fn===pp||Qt.ext_srgb&&(fn===df||fn===$p)?pr[fn]=fn:fn===Fs||yn.indexOf("rgba")>=0?pr[fn]=Hr:pr[fn]=On,pr},{});function Vn(){this.internalformat=Hr,this.format=Hr,this.type=vc,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Bd,this.width=0,this.height=0,this.channels=0}function _i(pr,yn){pr.internalformat=yn.internalformat,pr.format=yn.format,pr.type=yn.type,pr.compressed=yn.compressed,pr.premultiplyAlpha=yn.premultiplyAlpha,pr.flipY=yn.flipY,pr.unpackAlignment=yn.unpackAlignment,pr.colorSpace=yn.colorSpace,pr.width=yn.width,pr.height=yn.height,pr.channels=yn.channels}function na(pr,yn){if(!(typeof yn!="object"||!yn)){if("premultiplyAlpha"in yn&&(lt.type(yn.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),pr.premultiplyAlpha=yn.premultiplyAlpha),"flipY"in yn&&(lt.type(yn.flipY,"boolean","invalid texture flip"),pr.flipY=yn.flipY),"alignment"in yn&&(lt.oneOf(yn.alignment,[1,2,4,8],"invalid texture unpack alignment"),pr.unpackAlignment=yn.alignment),"colorSpace"in yn&&(lt.parameter(yn.colorSpace,ui,"invalid colorSpace"),pr.colorSpace=ui[yn.colorSpace]),"type"in yn){var fn=yn.type;lt(Qt.oes_texture_float||!(fn==="float"||fn==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),lt(Qt.oes_texture_half_float||!(fn==="half float"||fn==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),lt(Qt.webgl_depth_texture||!(fn==="uint16"||fn==="uint32"||fn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),lt.parameter(fn,Ei,"invalid texture type"),pr.type=Ei[fn]}var Pi=pr.width,Ya=pr.height,Go=pr.channels,zt=!1;"shape"in yn?(lt(Array.isArray(yn.shape)&&yn.shape.length>=2,"shape must be an array"),Pi=yn.shape[0],Ya=yn.shape[1],yn.shape.length===3&&(Go=yn.shape[2],lt(Go>0&&Go<=4,"invalid number of channels"),zt=!0),lt(Pi>=0&&Pi<=Sr.maxTextureSize,"invalid width"),lt(Ya>=0&&Ya<=Sr.maxTextureSize,"invalid height")):("radius"in yn&&(Pi=Ya=yn.radius,lt(Pi>=0&&Pi<=Sr.maxTextureSize,"invalid radius")),"width"in yn&&(Pi=yn.width,lt(Pi>=0&&Pi<=Sr.maxTextureSize,"invalid width")),"height"in yn&&(Ya=yn.height,lt(Ya>=0&&Ya<=Sr.maxTextureSize,"invalid height")),"channels"in yn&&(Go=yn.channels,lt(Go>0&&Go<=4,"invalid number of channels"),zt=!0)),pr.width=Pi|0,pr.height=Ya|0,pr.channels=Go|0;var It=!1;if("format"in yn){var xr=yn.format;lt(Qt.webgl_depth_texture||!(xr==="depth"||xr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),lt.parameter(xr,Rn,"invalid texture format");var Xt=pr.internalformat=Rn[xr];pr.format=Ri[Xt],xr in Ei&&("type"in yn||(pr.type=Ei[xr])),xr in mi&&(pr.compressed=!0),It=!0}!zt&&It?pr.channels=iu[pr.format]:zt&&!It?pr.channels!==Lf[pr.format]&&(pr.format=pr.internalformat=Lf[pr.channels]):It&&zt&&lt(pr.channels===iu[pr.format],"number of channels inconsistent with specified format")}}function La(pr){nt.pixelStorei(qp,pr.flipY),nt.pixelStorei(sh,pr.premultiplyAlpha),nt.pixelStorei(yp,pr.colorSpace),nt.pixelStorei(no,pr.unpackAlignment)}function xi(){Vn.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ti(pr,yn){var fn=null;if(Bs(yn)?fn=yn:yn&&(lt.type(yn,"object","invalid pixel data type"),na(pr,yn),"x"in yn&&(pr.xOffset=yn.x|0),"y"in yn&&(pr.yOffset=yn.y|0),Bs(yn.data)&&(fn=yn.data)),lt(!pr.compressed||fn instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),yn.copy){lt(!fn,"can not specify copy and data field for the same texture");var Pi=kn.viewportWidth,Ya=kn.viewportHeight;pr.width=pr.width||Pi-pr.xOffset,pr.height=pr.height||Ya-pr.yOffset,pr.needsCopy=!0,lt(pr.xOffset>=0&&pr.xOffset<Pi&&pr.yOffset>=0&&pr.yOffset<Ya&&pr.width>0&&pr.width<=Pi&&pr.height>0&&pr.height<=Ya,"copy texture read out of bounds")}else if(!fn)pr.width=pr.width||1,pr.height=pr.height||1,pr.channels=pr.channels||4;else if(N(fn))pr.channels=pr.channels||4,pr.data=fn,!("type"in yn)&&pr.type===vc&&(pr.type=Ml(fn));else if(Qp(fn))pr.channels=pr.channels||4,zd(pr,fn),pr.alignment=1,pr.needsFree=!0;else if(Oo(fn)){var Go=fn.data;!Array.isArray(Go)&&pr.type===vc&&(pr.type=Ml(Go));var zt=fn.shape,It=fn.stride,xr,Xt,on,kr,Nr,Wr;zt.length===3?(on=zt[2],Wr=It[2]):(lt(zt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),on=1,Wr=1),xr=zt[0],Xt=zt[1],kr=It[0],Nr=It[1],pr.alignment=1,pr.width=xr,pr.height=Xt,pr.channels=on,pr.format=pr.internalformat=Lf[on],pr.needsFree=!0,xv(pr,Go,kr,Nr,Wr,fn.offset)}else if(kc(fn)||_p(fn)||mc(fn))kc(fn)||_p(fn)?pr.element=fn:pr.element=fn.canvas,pr.width=pr.element.width,pr.height=pr.element.height,pr.channels=4;else if(il(fn))pr.element=fn,pr.width=fn.width,pr.height=fn.height,pr.channels=4;else if(Bh(fn))pr.element=fn,pr.width=fn.naturalWidth,pr.height=fn.naturalHeight,pr.channels=4;else if(gf(fn))pr.element=fn,pr.width=fn.videoWidth,pr.height=fn.videoHeight,pr.channels=4;else if(Yn(fn)){var dr=pr.width||fn[0].length,Dr=pr.height||fn.length,tr=pr.channels;ss(fn[0][0])?tr=tr||fn[0][0].length:tr=tr||1;for(var Zr=cu.shape(fn),xn=1,bn=0;bn<Zr.length;++bn)xn*=Zr[bn];var Gn=xp(pr,xn);cu.flatten(fn,Zr,"",Gn),Df(pr,Gn),pr.alignment=1,pr.width=dr,pr.height=Dr,pr.channels=tr,pr.format=pr.internalformat=Lf[tr],pr.needsFree=!0}pr.type===Of?lt(Sr.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):pr.type===Ta&&lt(Sr.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ln(pr,yn,fn){var Pi=pr.element,Ya=pr.data,Go=pr.internalformat,zt=pr.format,It=pr.type,xr=pr.width,Xt=pr.height;La(pr),Pi?nt.texImage2D(yn,fn,zt,zt,It,Pi):pr.compressed?nt.compressedTexImage2D(yn,fn,Go,xr,Xt,0,Ya):pr.needsCopy?(pn(),nt.copyTexImage2D(yn,fn,zt,pr.xOffset,pr.yOffset,xr,Xt,0)):nt.texImage2D(yn,fn,zt,xr,Xt,0,zt,It,Ya||null)}function ta(pr,yn,fn,Pi,Ya){var Go=pr.element,zt=pr.data,It=pr.internalformat,xr=pr.format,Xt=pr.type,on=pr.width,kr=pr.height;La(pr),Go?nt.texSubImage2D(yn,Ya,fn,Pi,xr,Xt,Go):pr.compressed?nt.compressedTexSubImage2D(yn,Ya,fn,Pi,It,on,kr,zt):pr.needsCopy?(pn(),nt.copyTexSubImage2D(yn,Ya,fn,Pi,pr.xOffset,pr.yOffset,on,kr)):nt.texSubImage2D(yn,Ya,fn,Pi,on,kr,xr,Xt,zt)}var io=[];function Li(){return io.pop()||new xi}function Qa(pr){pr.needsFree&&yr.freeType(pr.data),xi.call(pr),io.push(pr)}function Oa(){Vn.call(this),this.genMipmaps=!1,this.mipmapHint=tc,this.mipmask=0,this.images=Array(16)}function _a(pr,yn,fn){var Pi=pr.images[0]=Li();pr.mipmask=1,Pi.width=pr.width=yn,Pi.height=pr.height=fn,Pi.channels=pr.channels=4}function So(pr,yn){var fn=null;if(Bs(yn))fn=pr.images[0]=Li(),_i(fn,pr),ti(fn,yn),pr.mipmask=1;else if(na(pr,yn),Array.isArray(yn.mipmap))for(var Pi=yn.mipmap,Ya=0;Ya<Pi.length;++Ya)fn=pr.images[Ya]=Li(),_i(fn,pr),fn.width>>=Ya,fn.height>>=Ya,ti(fn,Pi[Ya]),pr.mipmask|=1<<Ya;else fn=pr.images[0]=Li(),_i(fn,pr),ti(fn,yn),pr.mipmask=1;_i(pr,pr.images[0]),pr.compressed&&(pr.internalformat===vf||pr.internalformat===rh||pr.internalformat===nh||pr.internalformat===Pf)&&lt(pr.width%4===0&&pr.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function pu(pr,yn){for(var fn=pr.images,Pi=0;Pi<fn.length;++Pi){if(!fn[Pi])return;Ln(fn[Pi],yn,Pi)}}var Nu=[];function vo(){var pr=Nu.pop()||new Oa;Vn.call(pr),pr.mipmask=0;for(var yn=0;yn<16;++yn)pr.images[yn]=null;return pr}function hs(pr){for(var yn=pr.images,fn=0;fn<yn.length;++fn)yn[fn]&&Qa(yn[fn]),yn[fn]=null;Nu.push(pr)}function Vo(){this.minFilter=gp,this.magFilter=gp,this.wrapS=Ms,this.wrapT=Ms,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=tc}function du(pr,yn){if("min"in yn){var fn=yn.min;lt.parameter(fn,ii),pr.minFilter=ii[fn],uh.indexOf(pr.minFilter)>=0&&!("faces"in yn)&&(pr.genMipmaps=!0)}if("mag"in yn){var Pi=yn.mag;lt.parameter(Pi,di),pr.magFilter=di[Pi]}var Ya=pr.wrapS,Go=pr.wrapT;if("wrap"in yn){var zt=yn.wrap;typeof zt=="string"?(lt.parameter(zt,Hn),Ya=Go=Hn[zt]):Array.isArray(zt)&&(lt.parameter(zt[0],Hn),lt.parameter(zt[1],Hn),Ya=Hn[zt[0]],Go=Hn[zt[1]])}else{if("wrapS"in yn){var It=yn.wrapS;lt.parameter(It,Hn),Ya=Hn[It]}if("wrapT"in yn){var xr=yn.wrapT;lt.parameter(xr,Hn),Go=Hn[xr]}}if(pr.wrapS=Ya,pr.wrapT=Go,"anisotropic"in yn){var Xt=yn.anisotropic;lt(typeof Xt=="number"&&Xt>=1&&Xt<=Sr.maxAnisotropic,"aniso samples must be between 1 and "),pr.anisotropic=yn.anisotropic}if("mipmap"in yn){var on=!1;switch(typeof yn.mipmap){case"string":lt.parameter(yn.mipmap,ri,"invalid mipmap hint"),pr.mipmapHint=ri[yn.mipmap],pr.genMipmaps=!0,on=!0;break;case"boolean":on=pr.genMipmaps=yn.mipmap;break;case"object":lt(Array.isArray(yn.mipmap),"invalid mipmap type"),pr.genMipmaps=!1,on=!0;break;default:lt.raise("invalid mipmap type")}on&&!("min"in yn)&&(pr.minFilter=Dh)}}function Us(pr,yn){nt.texParameteri(yn,Kp,pr.minFilter),nt.texParameteri(yn,vp,pr.magFilter),nt.texParameteri(yn,sg,pr.wrapS),nt.texParameteri(yn,Ld,pr.wrapT),Qt.ext_texture_filter_anisotropic&&nt.texParameteri(yn,fs,pr.anisotropic),pr.genMipmaps&&(nt.hint(mp,pr.mipmapHint),nt.generateMipmap(yn))}var Zs=0,Js={},zu=Sr.maxTextureUnits,ou=Array(zu).map(function(){return null});function Ua(pr){Vn.call(this),this.mipmask=0,this.internalformat=Hr,this.id=Zs++,this.refCount=1,this.target=pr,this.texture=nt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Vo,en.profile&&(this.stats={size:0})}function Uu(pr){nt.activeTexture(Ea),nt.bindTexture(pr.target,pr.texture)}function Do(){var pr=ou[0];pr?nt.bindTexture(pr.target,pr.texture):nt.bindTexture(Lu,null)}function ha(pr){var yn=pr.texture;lt(yn,"must not double destroy texture");var fn=pr.unit,Pi=pr.target;fn>=0&&(nt.activeTexture(Ea+fn),nt.bindTexture(Pi,null),ou[fn]=null),nt.deleteTexture(yn),pr.texture=null,pr.params=null,pr.pixels=null,pr.refCount=0,delete Js[pr.id],vn.textureCount--}k(Ua.prototype,{bind:function(){var pr=this;pr.bindCount+=1;var yn=pr.unit;if(yn<0){for(var fn=0;fn<zu;++fn){var Pi=ou[fn];if(Pi){if(Pi.bindCount>0)continue;Pi.unit=-1}ou[fn]=pr,yn=fn;break}yn>=zu&&lt.raise("insufficient number of texture units"),en.profile&&vn.maxTextureUnits<yn+1&&(vn.maxTextureUnits=yn+1),pr.unit=yn,nt.activeTexture(Ea+yn),nt.bindTexture(pr.target,pr.texture)}return yn},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ha(this)}});function xa(pr,yn){var fn=new Ua(Lu);Js[fn.id]=fn,vn.textureCount++;function Pi(zt,It){var xr=fn.texInfo;Vo.call(xr);var Xt=vo();return typeof zt=="number"?typeof It=="number"?_a(Xt,zt|0,It|0):_a(Xt,zt|0,zt|0):zt?(lt.type(zt,"object","invalid arguments to regl.texture"),du(xr,zt),So(Xt,zt)):_a(Xt,1,1),xr.genMipmaps&&(Xt.mipmask=(Xt.width<<1)-1),fn.mipmask=Xt.mipmask,_i(fn,Xt),lt.texture2D(xr,Xt,Sr),fn.internalformat=Xt.internalformat,Pi.width=Xt.width,Pi.height=Xt.height,Uu(fn),pu(Xt,Lu),Us(xr,Lu),Do(),hs(Xt),en.profile&&(fn.stats.size=nc(fn.internalformat,fn.type,Xt.width,Xt.height,xr.genMipmaps,!1)),Pi.format=ai[fn.internalformat],Pi.type=Ti[fn.type],Pi.mag=Kr[xr.magFilter],Pi.min=Bi[xr.minFilter],Pi.wrapS=qn[xr.wrapS],Pi.wrapT=qn[xr.wrapT],Pi}function Ya(zt,It,xr,Xt){lt(!!zt,"must specify image data");var on=It|0,kr=xr|0,Nr=Xt|0,Wr=Li();return _i(Wr,fn),Wr.width=0,Wr.height=0,ti(Wr,zt),Wr.width=Wr.width||(fn.width>>Nr)-on,Wr.height=Wr.height||(fn.height>>Nr)-kr,lt(fn.type===Wr.type&&fn.format===Wr.format&&fn.internalformat===Wr.internalformat,"incompatible format for texture.subimage"),lt(on>=0&&kr>=0&&on+Wr.width<=fn.width&&kr+Wr.height<=fn.height,"texture.subimage write out of bounds"),lt(fn.mipmask&1<<Nr,"missing mipmap data"),lt(Wr.data||Wr.element||Wr.needsCopy,"missing image data"),Uu(fn),ta(Wr,Lu,on,kr,Nr),Do(),Qa(Wr),Pi}function Go(zt,It){var xr=zt|0,Xt=It|0||xr;if(xr===fn.width&&Xt===fn.height)return Pi;Pi.width=fn.width=xr,Pi.height=fn.height=Xt,Uu(fn);for(var on=0;fn.mipmask>>on;++on){var kr=xr>>on,Nr=Xt>>on;if(!kr||!Nr)break;nt.texImage2D(Lu,on,fn.format,kr,Nr,0,fn.format,fn.type,null)}return Do(),en.profile&&(fn.stats.size=nc(fn.internalformat,fn.type,xr,Xt,!1,!1)),Pi}return Pi(pr,yn),Pi.subimage=Ya,Pi.resize=Go,Pi._reglType="texture2d",Pi._texture=fn,en.profile&&(Pi.stats=fn.stats),Pi.destroy=function(){fn.decRef()},Pi}function Ao(pr,yn,fn,Pi,Ya,Go){var zt=new Ua(Tt);Js[zt.id]=zt,vn.cubeCount++;var It=new Array(6);function xr(kr,Nr,Wr,dr,Dr,tr){var Zr,xn=zt.texInfo;for(Vo.call(xn),Zr=0;Zr<6;++Zr)It[Zr]=vo();if(typeof kr=="number"||!kr){var bn=kr|0||1;for(Zr=0;Zr<6;++Zr)_a(It[Zr],bn,bn)}else if(typeof kr=="object")if(Nr)So(It[0],kr),So(It[1],Nr),So(It[2],Wr),So(It[3],dr),So(It[4],Dr),So(It[5],tr);else if(du(xn,kr),na(zt,kr),"faces"in kr){var Gn=kr.faces;for(lt(Array.isArray(Gn)&&Gn.length===6,"cube faces must be a length 6 array"),Zr=0;Zr<6;++Zr)lt(typeof Gn[Zr]=="object"&&!!Gn[Zr],"invalid input for cube map face"),_i(It[Zr],zt),So(It[Zr],Gn[Zr])}else for(Zr=0;Zr<6;++Zr)So(It[Zr],kr);else lt.raise("invalid arguments to cube map");for(_i(zt,It[0]),Sr.npotTextureCube||lt(cp(zt.width)&&cp(zt.height),"your browser does not support non power or two texture dimensions"),xn.genMipmaps?zt.mipmask=(It[0].width<<1)-1:zt.mipmask=It[0].mipmask,lt.textureCube(zt,xn,It,Sr),zt.internalformat=It[0].internalformat,xr.width=It[0].width,xr.height=It[0].height,Uu(zt),Zr=0;Zr<6;++Zr)pu(It[Zr],mr+Zr);for(Us(xn,Tt),Do(),en.profile&&(zt.stats.size=nc(zt.internalformat,zt.type,xr.width,xr.height,xn.genMipmaps,!0)),xr.format=ai[zt.internalformat],xr.type=Ti[zt.type],xr.mag=Kr[xn.magFilter],xr.min=Bi[xn.minFilter],xr.wrapS=qn[xn.wrapS],xr.wrapT=qn[xn.wrapT],Zr=0;Zr<6;++Zr)hs(It[Zr]);return xr}function Xt(kr,Nr,Wr,dr,Dr){lt(!!Nr,"must specify image data"),lt(typeof kr=="number"&&kr===(kr|0)&&kr>=0&&kr<6,"invalid face");var tr=Wr|0,Zr=dr|0,xn=Dr|0,bn=Li();return _i(bn,zt),bn.width=0,bn.height=0,ti(bn,Nr),bn.width=bn.width||(zt.width>>xn)-tr,bn.height=bn.height||(zt.height>>xn)-Zr,lt(zt.type===bn.type&&zt.format===bn.format&&zt.internalformat===bn.internalformat,"incompatible format for texture.subimage"),lt(tr>=0&&Zr>=0&&tr+bn.width<=zt.width&&Zr+bn.height<=zt.height,"texture.subimage write out of bounds"),lt(zt.mipmask&1<<xn,"missing mipmap data"),lt(bn.data||bn.element||bn.needsCopy,"missing image data"),Uu(zt),ta(bn,mr+kr,tr,Zr,xn),Do(),Qa(bn),xr}function on(kr){var Nr=kr|0;if(Nr!==zt.width){xr.width=zt.width=Nr,xr.height=zt.height=Nr,Uu(zt);for(var Wr=0;Wr<6;++Wr)for(var dr=0;zt.mipmask>>dr;++dr)nt.texImage2D(mr+Wr,dr,zt.format,Nr>>dr,Nr>>dr,0,zt.format,zt.type,null);return Do(),en.profile&&(zt.stats.size=nc(zt.internalformat,zt.type,xr.width,xr.height,!1,!0)),xr}}return xr(pr,yn,fn,Pi,Ya,Go),xr.subimage=Xt,xr.resize=on,xr._reglType="textureCube",xr._texture=zt,en.profile&&(xr.stats=zt.stats),xr.destroy=function(){zt.decRef()},xr}function Es(){for(var pr=0;pr<zu;++pr)nt.activeTexture(Ea+pr),nt.bindTexture(Lu,null),ou[pr]=null;ro(Js).forEach(ha),vn.cubeCount=0,vn.textureCount=0}en.profile&&(vn.getTotalTextureSize=function(){var pr=0;return Object.keys(Js).forEach(function(yn){pr+=Js[yn].stats.size}),pr});function vu(){for(var pr=0;pr<zu;++pr){var yn=ou[pr];yn&&(yn.bindCount=0,yn.unit=-1,ou[pr]=null)}ro(Js).forEach(function(fn){fn.texture=nt.createTexture(),nt.bindTexture(fn.target,fn.texture);for(var Pi=0;Pi<32;++Pi)if(fn.mipmask&1<<Pi)if(fn.target===Lu)nt.texImage2D(Lu,Pi,fn.internalformat,fn.width>>Pi,fn.height>>Pi,0,fn.internalformat,fn.type,null);else for(var Ya=0;Ya<6;++Ya)nt.texImage2D(mr+Ya,Pi,fn.internalformat,fn.width>>Pi,fn.height>>Pi,0,fn.internalformat,fn.type,null);Us(fn.texInfo,fn.target)})}return{create2D:xa,createCube:Ao,clear:Es,getTexture:function(pr){return null},restore:vu}}var wa=36161,Rs=32854,Nl=32855,Wu=36194,fh=33189,Jc=36168,Fu=34041,ml=35907,mf=34836,Ji=34842,Ai=34843,al=[];al[Rs]=2,al[Nl]=2,al[Wu]=2,al[fh]=2,al[Jc]=1,al[Fu]=4,al[ml]=4,al[mf]=16,al[Ji]=8,al[Ai]=6;function yl(nt,Qt,Sr){return al[nt]*Qt*Sr}var ol=function(nt,Qt,Sr,pn,kn){var vn={rgba4:Rs,rgb565:Wu,"rgb5 a1":Nl,depth:fh,stencil:Jc,"depth stencil":Fu};Qt.ext_srgb&&(vn.srgba=ml),Qt.ext_color_buffer_half_float&&(vn.rgba16f=Ji,vn.rgb16f=Ai),Qt.webgl_color_buffer_float&&(vn.rgba32f=mf);var en=[];Object.keys(vn).forEach(function(Rn){var mi=vn[Rn];en[mi]=Rn});var ri=0,Hn={};function di(Rn){this.id=ri++,this.refCount=1,this.renderbuffer=Rn,this.format=Rs,this.width=0,this.height=0,kn.profile&&(this.stats={size:0})}di.prototype.decRef=function(){--this.refCount<=0&&ii(this)};function ii(Rn){var mi=Rn.renderbuffer;lt(mi,"must not double destroy renderbuffer"),nt.bindRenderbuffer(wa,null),nt.deleteRenderbuffer(mi),Rn.renderbuffer=null,Rn.refCount=0,delete Hn[Rn.id],pn.renderbufferCount--}function ui(Rn,mi){var Jr=new di(nt.createRenderbuffer());Hn[Jr.id]=Jr,pn.renderbufferCount++;function En(Ti,Kr){var Bi=0,qn=0,Ri=Rs;if(typeof Ti=="object"&&Ti){var Vn=Ti;if("shape"in Vn){var _i=Vn.shape;lt(Array.isArray(_i)&&_i.length>=2,"invalid renderbuffer shape"),Bi=_i[0]|0,qn=_i[1]|0}else"radius"in Vn&&(Bi=qn=Vn.radius|0),"width"in Vn&&(Bi=Vn.width|0),"height"in Vn&&(qn=Vn.height|0);"format"in Vn&&(lt.parameter(Vn.format,vn,"invalid renderbuffer format"),Ri=vn[Vn.format])}else typeof Ti=="number"?(Bi=Ti|0,typeof Kr=="number"?qn=Kr|0:qn=Bi):Ti?lt.raise("invalid arguments to renderbuffer constructor"):Bi=qn=1;if(lt(Bi>0&&qn>0&&Bi<=Sr.maxRenderbufferSize&&qn<=Sr.maxRenderbufferSize,"invalid renderbuffer size"),!(Bi===Jr.width&&qn===Jr.height&&Ri===Jr.format))return En.width=Jr.width=Bi,En.height=Jr.height=qn,Jr.format=Ri,nt.bindRenderbuffer(wa,Jr.renderbuffer),nt.renderbufferStorage(wa,Ri,Bi,qn),lt(nt.getError()===0,"invalid render buffer format"),kn.profile&&(Jr.stats.size=yl(Jr.format,Jr.width,Jr.height)),En.format=en[Jr.format],En}function ai(Ti,Kr){var Bi=Ti|0,qn=Kr|0||Bi;return Bi===Jr.width&&qn===Jr.height||(lt(Bi>0&&qn>0&&Bi<=Sr.maxRenderbufferSize&&qn<=Sr.maxRenderbufferSize,"invalid renderbuffer size"),En.width=Jr.width=Bi,En.height=Jr.height=qn,nt.bindRenderbuffer(wa,Jr.renderbuffer),nt.renderbufferStorage(wa,Jr.format,Bi,qn),lt(nt.getError()===0,"invalid render buffer format"),kn.profile&&(Jr.stats.size=yl(Jr.format,Jr.width,Jr.height))),En}return En(Rn,mi),En.resize=ai,En._reglType="renderbuffer",En._renderbuffer=Jr,kn.profile&&(En.stats=Jr.stats),En.destroy=function(){Jr.decRef()},En}kn.profile&&(pn.getTotalRenderbufferSize=function(){var Rn=0;return Object.keys(Hn).forEach(function(mi){Rn+=Hn[mi].stats.size}),Rn});function Ei(){ro(Hn).forEach(function(Rn){Rn.renderbuffer=nt.createRenderbuffer(),nt.bindRenderbuffer(wa,Rn.renderbuffer),nt.renderbufferStorage(wa,Rn.format,Rn.width,Rn.height)}),nt.bindRenderbuffer(wa,null)}return{create:ui,clear:function(){ro(Hn).forEach(ii)},restore:Ei}},_s=36160,yc=36161,yf=3553,Nh=34069,zo=36064,au=36096,Jp=36128,zh=33306,Ff=36053,_c=36054,Ca=36055,Uh=36057,Lc=36061,ed=36193,Zh=5121,hh=5126,bp=6407,Vh=6408,Sn=6402,Ar=[bp,Vh],Ne=[];Ne[Vh]=4,Ne[bp]=3;var Dc=[];Dc[Zh]=1,Dc[hh]=4,Dc[ed]=2;var nr=32854,Bf=32855,xs=36194,Sp=33189,Nf=36168,zl=34041,Ep=35907,S=34836,T=34842,C=34843,I=[nr,Bf,xs,Ep,T,C,S],Z={};Z[Ff]="complete",Z[_c]="incomplete attachment",Z[Uh]="incomplete dimensions",Z[Ca]="incomplete, missing attachment",Z[Lc]="unsupported";function ee(nt,Qt,Sr,pn,kn,vn){var en={cur:null,next:null,dirty:!1,setFBO:null},ri=["rgba"],Hn=["rgba4","rgb565","rgb5 a1"];Qt.ext_srgb&&Hn.push("srgba"),Qt.ext_color_buffer_half_float&&Hn.push("rgba16f","rgb16f"),Qt.webgl_color_buffer_float&&Hn.push("rgba32f");var di=["uint8"];Qt.oes_texture_half_float&&di.push("half float","float16"),Qt.oes_texture_float&&di.push("float","float32");function ii(xi,ti,Ln){this.target=xi,this.texture=ti,this.renderbuffer=Ln;var ta=0,io=0;ti?(ta=ti.width,io=ti.height):Ln&&(ta=Ln.width,io=Ln.height),this.width=ta,this.height=io}function ui(xi){xi&&(xi.texture&&xi.texture._texture.decRef(),xi.renderbuffer&&xi.renderbuffer._renderbuffer.decRef())}function Ei(xi,ti,Ln){if(xi)if(xi.texture){var ta=xi.texture._texture,io=Math.max(1,ta.width),Li=Math.max(1,ta.height);lt(io===ti&&Li===Ln,"inconsistent width/height for supplied texture"),ta.refCount+=1}else{var Qa=xi.renderbuffer._renderbuffer;lt(Qa.width===ti&&Qa.height===Ln,"inconsistent width/height for renderbuffer"),Qa.refCount+=1}}function Rn(xi,ti){ti&&(ti.texture?nt.framebufferTexture2D(_s,xi,ti.target,ti.texture._texture.texture,0):nt.framebufferRenderbuffer(_s,xi,yc,ti.renderbuffer._renderbuffer.renderbuffer))}function mi(xi){var ti=yf,Ln=null,ta=null,io=xi;typeof xi=="object"&&(io=xi.data,"target"in xi&&(ti=xi.target|0)),lt.type(io,"function","invalid attachment data");var Li=io._reglType;return Li==="texture2d"?(Ln=io,lt(ti===yf)):Li==="textureCube"?(Ln=io,lt(ti>=Nh&&ti<Nh+6,"invalid cube map target")):Li==="renderbuffer"?(ta=io,ti=yc):lt.raise("invalid regl object for attachment"),new ii(ti,Ln,ta)}function Jr(xi,ti,Ln,ta,io){if(Ln){var Li=pn.create2D({width:xi,height:ti,format:ta,type:io});return Li._texture.refCount=0,new ii(yf,Li,null)}else{var Qa=kn.create({width:xi,height:ti,format:ta});return Qa._renderbuffer.refCount=0,new ii(yc,null,Qa)}}function En(xi){return xi&&(xi.texture||xi.renderbuffer)}function ai(xi,ti,Ln){xi&&(xi.texture?xi.texture.resize(ti,Ln):xi.renderbuffer&&xi.renderbuffer.resize(ti,Ln),xi.width=ti,xi.height=Ln)}var Ti=0,Kr={};function Bi(){this.id=Ti++,Kr[this.id]=this,this.framebuffer=nt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function qn(xi){xi.colorAttachments.forEach(ui),ui(xi.depthAttachment),ui(xi.stencilAttachment),ui(xi.depthStencilAttachment)}function Ri(xi){var ti=xi.framebuffer;lt(ti,"must not double destroy framebuffer"),nt.deleteFramebuffer(ti),xi.framebuffer=null,vn.framebufferCount--,delete Kr[xi.id]}function Vn(xi){var ti;nt.bindFramebuffer(_s,xi.framebuffer);var Ln=xi.colorAttachments;for(ti=0;ti<Ln.length;++ti)Rn(zo+ti,Ln[ti]);for(ti=Ln.length;ti<Sr.maxColorAttachments;++ti)nt.framebufferTexture2D(_s,zo+ti,yf,null,0);nt.framebufferTexture2D(_s,zh,yf,null,0),nt.framebufferTexture2D(_s,au,yf,null,0),nt.framebufferTexture2D(_s,Jp,yf,null,0),Rn(au,xi.depthAttachment),Rn(Jp,xi.stencilAttachment),Rn(zh,xi.depthStencilAttachment);var ta=nt.checkFramebufferStatus(_s);!nt.isContextLost()&&ta!==Ff&&lt.raise("framebuffer configuration not supported, status = "+Z[ta]),nt.bindFramebuffer(_s,en.next?en.next.framebuffer:null),en.cur=en.next,nt.getError()}function _i(xi,ti){var Ln=new Bi;vn.framebufferCount++;function ta(Li,Qa){var Oa;lt(en.next!==Ln,"can not update framebuffer which is currently in use");var _a=0,So=0,pu=!0,Nu=!0,vo=null,hs=!0,Vo="rgba",du="uint8",Us=1,Zs=null,Js=null,zu=null,ou=!1;if(typeof Li=="number")_a=Li|0,So=Qa|0||_a;else if(!Li)_a=So=1;else{lt.type(Li,"object","invalid arguments for framebuffer");var Ua=Li;if("shape"in Ua){var Uu=Ua.shape;lt(Array.isArray(Uu)&&Uu.length>=2,"invalid shape for framebuffer"),_a=Uu[0],So=Uu[1]}else"radius"in Ua&&(_a=So=Ua.radius),"width"in Ua&&(_a=Ua.width),"height"in Ua&&(So=Ua.height);("color"in Ua||"colors"in Ua)&&(vo=Ua.color||Ua.colors,Array.isArray(vo)&&lt(vo.length===1||Qt.webgl_draw_buffers,"multiple render targets not supported")),vo||("colorCount"in Ua&&(Us=Ua.colorCount|0,lt(Us>0,"invalid color buffer count")),"colorTexture"in Ua&&(hs=!!Ua.colorTexture,Vo="rgba4"),"colorType"in Ua&&(du=Ua.colorType,hs?(lt(Qt.oes_texture_float||!(du==="float"||du==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),lt(Qt.oes_texture_half_float||!(du==="half float"||du==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):du==="half float"||du==="float16"?(lt(Qt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Vo="rgba16f"):(du==="float"||du==="float32")&&(lt(Qt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Vo="rgba32f"),lt.oneOf(du,di,"invalid color type")),"colorFormat"in Ua&&(Vo=Ua.colorFormat,ri.indexOf(Vo)>=0?hs=!0:Hn.indexOf(Vo)>=0?hs=!1:hs?lt.oneOf(Ua.colorFormat,ri,"invalid color format for texture"):lt.oneOf(Ua.colorFormat,Hn,"invalid color format for renderbuffer"))),("depthTexture"in Ua||"depthStencilTexture"in Ua)&&(ou=!!(Ua.depthTexture||Ua.depthStencilTexture),lt(!ou||Qt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ua&&(typeof Ua.depth=="boolean"?pu=Ua.depth:(Zs=Ua.depth,Nu=!1)),"stencil"in Ua&&(typeof Ua.stencil=="boolean"?Nu=Ua.stencil:(Js=Ua.stencil,pu=!1)),"depthStencil"in Ua&&(typeof Ua.depthStencil=="boolean"?pu=Nu=Ua.depthStencil:(zu=Ua.depthStencil,pu=!1,Nu=!1))}var Do=null,ha=null,xa=null,Ao=null;if(Array.isArray(vo))Do=vo.map(mi);else if(vo)Do=[mi(vo)];else for(Do=new Array(Us),Oa=0;Oa<Us;++Oa)Do[Oa]=Jr(_a,So,hs,Vo,du);lt(Qt.webgl_draw_buffers||Do.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),lt(Do.length<=Sr.maxColorAttachments,"too many color attachments, not supported"),_a=_a||Do[0].width,So=So||Do[0].height,Zs?ha=mi(Zs):pu&&!Nu&&(ha=Jr(_a,So,ou,"depth","uint32")),Js?xa=mi(Js):Nu&&!pu&&(xa=Jr(_a,So,!1,"stencil","uint8")),zu?Ao=mi(zu):!Zs&&!Js&&Nu&&pu&&(Ao=Jr(_a,So,ou,"depth stencil","depth stencil")),lt(!!Zs+!!Js+!!zu<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Es=null;for(Oa=0;Oa<Do.length;++Oa)if(Ei(Do[Oa],_a,So),lt(!Do[Oa]||Do[Oa].texture&&Ar.indexOf(Do[Oa].texture._texture.format)>=0||Do[Oa].renderbuffer&&I.indexOf(Do[Oa].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Oa+" is invalid"),Do[Oa]&&Do[Oa].texture){var vu=Ne[Do[Oa].texture._texture.format]*Dc[Do[Oa].texture._texture.type];Es===null?Es=vu:lt(Es===vu,"all color attachments much have the same number of bits per pixel.")}return Ei(ha,_a,So),lt(!ha||ha.texture&&ha.texture._texture.format===Sn||ha.renderbuffer&&ha.renderbuffer._renderbuffer.format===Sp,"invalid depth attachment for framebuffer object"),Ei(xa,_a,So),lt(!xa||xa.renderbuffer&&xa.renderbuffer._renderbuffer.format===Nf,"invalid stencil attachment for framebuffer object"),Ei(Ao,_a,So),lt(!Ao||Ao.texture&&Ao.texture._texture.format===zl||Ao.renderbuffer&&Ao.renderbuffer._renderbuffer.format===zl,"invalid depth-stencil attachment for framebuffer object"),qn(Ln),Ln.width=_a,Ln.height=So,Ln.colorAttachments=Do,Ln.depthAttachment=ha,Ln.stencilAttachment=xa,Ln.depthStencilAttachment=Ao,ta.color=Do.map(En),ta.depth=En(ha),ta.stencil=En(xa),ta.depthStencil=En(Ao),ta.width=Ln.width,ta.height=Ln.height,Vn(Ln),ta}function io(Li,Qa){lt(en.next!==Ln,"can not resize a framebuffer which is currently in use");var Oa=Math.max(Li|0,1),_a=Math.max(Qa|0||Oa,1);if(Oa===Ln.width&&_a===Ln.height)return ta;for(var So=Ln.colorAttachments,pu=0;pu<So.length;++pu)ai(So[pu],Oa,_a);return ai(Ln.depthAttachment,Oa,_a),ai(Ln.stencilAttachment,Oa,_a),ai(Ln.depthStencilAttachment,Oa,_a),Ln.width=ta.width=Oa,Ln.height=ta.height=_a,Vn(Ln),ta}return ta(xi,ti),k(ta,{resize:io,_reglType:"framebuffer",_framebuffer:Ln,destroy:function(){Ri(Ln),qn(Ln)},use:function(Li){en.setFBO({framebuffer:ta},Li)}})}function na(xi){var ti=Array(6);function Ln(io){var Li;lt(ti.indexOf(en.next)<0,"can not update framebuffer which is currently in use");var Qa={color:null},Oa=0,_a=null,So="rgba",pu="uint8",Nu=1;if(typeof io=="number")Oa=io|0;else if(!io)Oa=1;else{lt.type(io,"object","invalid arguments for framebuffer");var vo=io;if("shape"in vo){var hs=vo.shape;lt(Array.isArray(hs)&&hs.length>=2,"invalid shape for framebuffer"),lt(hs[0]===hs[1],"cube framebuffer must be square"),Oa=hs[0]}else"radius"in vo&&(Oa=vo.radius|0),"width"in vo?(Oa=vo.width|0,"height"in vo&&lt(vo.height===Oa,"must be square")):"height"in vo&&(Oa=vo.height|0);("color"in vo||"colors"in vo)&&(_a=vo.color||vo.colors,Array.isArray(_a)&&lt(_a.length===1||Qt.webgl_draw_buffers,"multiple render targets not supported")),_a||("colorCount"in vo&&(Nu=vo.colorCount|0,lt(Nu>0,"invalid color buffer count")),"colorType"in vo&&(lt.oneOf(vo.colorType,di,"invalid color type"),pu=vo.colorType),"colorFormat"in vo&&(So=vo.colorFormat,lt.oneOf(vo.colorFormat,ri,"invalid color format for texture"))),"depth"in vo&&(Qa.depth=vo.depth),"stencil"in vo&&(Qa.stencil=vo.stencil),"depthStencil"in vo&&(Qa.depthStencil=vo.depthStencil)}var Vo;if(_a)if(Array.isArray(_a))for(Vo=[],Li=0;Li<_a.length;++Li)Vo[Li]=_a[Li];else Vo=[_a];else{Vo=Array(Nu);var du={radius:Oa,format:So,type:pu};for(Li=0;Li<Nu;++Li)Vo[Li]=pn.createCube(du)}for(Qa.color=Array(Vo.length),Li=0;Li<Vo.length;++Li){var Us=Vo[Li];lt(typeof Us=="function"&&Us._reglType==="textureCube","invalid cube map"),Oa=Oa||Us.width,lt(Us.width===Oa&&Us.height===Oa,"invalid cube map shape"),Qa.color[Li]={target:Nh,data:Vo[Li]}}for(Li=0;Li<6;++Li){for(var Zs=0;Zs<Vo.length;++Zs)Qa.color[Zs].target=Nh+Li;Li>0&&(Qa.depth=ti[0].depth,Qa.stencil=ti[0].stencil,Qa.depthStencil=ti[0].depthStencil),ti[Li]?ti[Li](Qa):ti[Li]=_i(Qa)}return k(Ln,{width:Oa,height:Oa,color:Vo})}function ta(io){var Li,Qa=io|0;if(lt(Qa>0&&Qa<=Sr.maxCubeMapSize,"invalid radius for cube fbo"),Qa===Ln.width)return Ln;var Oa=Ln.color;for(Li=0;Li<Oa.length;++Li)Oa[Li].resize(Qa);for(Li=0;Li<6;++Li)ti[Li].resize(Qa);return Ln.width=Ln.height=Qa,Ln}return Ln(xi),k(Ln,{faces:ti,resize:ta,_reglType:"framebufferCube",destroy:function(){ti.forEach(function(io){io.destroy()})}})}function La(){en.cur=null,en.next=null,en.dirty=!0,ro(Kr).forEach(function(xi){xi.framebuffer=nt.createFramebuffer(),Vn(xi)})}return k(en,{getFramebuffer:function(xi){if(typeof xi=="function"&&xi._reglType==="framebuffer"){var ti=xi._framebuffer;if(ti instanceof Bi)return ti}return null},create:_i,createCube:na,clear:function(){ro(Kr).forEach(Ri)},restore:La})}var ae=5126,Me=34962;function ot(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ae,this.offset=0,this.stride=0,this.divisor=0}function bt(nt,Qt,Sr,pn,kn){for(var vn=Sr.maxAttributes,en=new Array(vn),ri=0;ri<vn;++ri)en[ri]=new ot;var Hn=0,di={},ii={Record:ot,scope:{},state:en,currentVAO:null,targetVAO:null,restore:Ei()?Kr:function(){},createVAO:Bi,getVAO:mi,destroyBuffer:ui,setVAO:Ei()?Jr:En,clear:Ei()?ai:function(){}};function ui(qn){for(var Ri=0;Ri<en.length;++Ri){var Vn=en[Ri];Vn.buffer===qn&&(nt.disableVertexAttribArray(Ri),Vn.buffer=null)}}function Ei(){return Qt.oes_vertex_array_object}function Rn(){return Qt.angle_instanced_arrays}function mi(qn){return typeof qn=="function"&&qn._vao?qn._vao:null}function Jr(qn){if(qn!==ii.currentVAO){var Ri=Ei();qn?Ri.bindVertexArrayOES(qn.vao):Ri.bindVertexArrayOES(null),ii.currentVAO=qn}}function En(qn){if(qn!==ii.currentVAO){if(qn)qn.bindAttrs();else for(var Ri=Rn(),Vn=0;Vn<en.length;++Vn){var _i=en[Vn];_i.buffer?(nt.enableVertexAttribArray(Vn),nt.vertexAttribPointer(Vn,_i.size,_i.type,_i.normalized,_i.stride,_i.offfset),Ri&&Ri.vertexAttribDivisorANGLE(Vn,_i.divisor)):(nt.disableVertexAttribArray(Vn),nt.vertexAttrib4f(Vn,_i.x,_i.y,_i.z,_i.w))}ii.currentVAO=qn}}function ai(){ro(di).forEach(function(qn){qn.destroy()})}function Ti(){this.id=++Hn,this.attributes=[];var qn=Ei();qn?this.vao=qn.createVertexArrayOES():this.vao=null,di[this.id]=this,this.buffers=[]}Ti.prototype.bindAttrs=function(){for(var qn=Rn(),Ri=this.attributes,Vn=0;Vn<Ri.length;++Vn){var _i=Ri[Vn];_i.buffer?(nt.enableVertexAttribArray(Vn),nt.bindBuffer(Me,_i.buffer.buffer),nt.vertexAttribPointer(Vn,_i.size,_i.type,_i.normalized,_i.stride,_i.offset),qn&&qn.vertexAttribDivisorANGLE(Vn,_i.divisor)):(nt.disableVertexAttribArray(Vn),nt.vertexAttrib4f(Vn,_i.x,_i.y,_i.z,_i.w))}for(var na=Ri.length;na<vn;++na)nt.disableVertexAttribArray(na)},Ti.prototype.refresh=function(){var qn=Ei();qn&&(qn.bindVertexArrayOES(this.vao),this.bindAttrs(),ii.currentVAO=this)},Ti.prototype.destroy=function(){if(this.vao){var qn=Ei();this===ii.currentVAO&&(ii.currentVAO=null,qn.bindVertexArrayOES(null)),qn.deleteVertexArrayOES(this.vao),this.vao=null}di[this.id]&&(delete di[this.id],pn.vaoCount-=1)};function Kr(){var qn=Ei();qn&&ro(di).forEach(function(Ri){Ri.refresh()})}function Bi(qn){var Ri=new Ti;pn.vaoCount+=1;function Vn(_i){lt(Array.isArray(_i),"arguments to vertex array constructor must be an array"),lt(_i.length<vn,"too many attributes"),lt(_i.length>0,"must specify at least one attribute");for(var na=0;na<Ri.buffers.length;++na)Ri.buffers[na].destroy();Ri.buffers.length=0;var La=Ri.attributes;La.length=_i.length;for(var xi=0;xi<_i.length;++xi){var ti=_i[xi],Ln=La[xi]=new ot;if(Array.isArray(ti)||N(ti)||Oo(ti)){var ta=kn.create(ti,Me,!1,!0);Ln.buffer=kn.getBuffer(ta),Ln.size=Ln.buffer.dimension|0,Ln.normalized=!1,Ln.type=Ln.buffer.dtype,Ln.offset=0,Ln.stride=0,Ln.divisor=0,Ln.state=1,Ri.buffers.push(ta)}else kn.getBuffer(ti)?(Ln.buffer=kn.getBuffer(ti),Ln.size=Ln.buffer.dimension|0,Ln.normalized=!1,Ln.type=Ln.buffer.dtype,Ln.offset=0,Ln.stride=0,Ln.divisor=0,Ln.state=1):kn.getBuffer(ti.buffer)?(Ln.buffer=kn.getBuffer(ti.buffer),Ln.size=(+ti.size||Ln.buffer.dimension)|0,Ln.normalized=!!ti.normalized||!1,"type"in ti?(lt.parameter(ti.type,fu,"invalid buffer type"),Ln.type=fu[ti.type]):Ln.type=Ln.buffer.dtype,Ln.offset=(ti.offset||0)|0,Ln.stride=(ti.stride||0)|0,Ln.divisor=(ti.divisor||0)|0,Ln.state=1,lt(Ln.size>=1&&Ln.size<=4,"size must be between 1 and 4"),lt(Ln.offset>=0,"invalid offset"),lt(Ln.stride>=0&&Ln.stride<=255,"stride must be between 0 and 255"),lt(Ln.divisor>=0,"divisor must be positive"),lt(!Ln.divisor||!!Qt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in ti?(lt(xi>0,"first attribute must not be a constant"),Ln.x=+ti.x||0,Ln.y=+ti.y||0,Ln.z=+ti.z||0,Ln.w=+ti.w||0,Ln.state=2):lt(!1,"invalid attribute spec for location "+xi)}return Ri.refresh(),Vn}return Vn.destroy=function(){Ri.destroy()},Vn._vao=Ri,Vn._reglType="vao",Vn(qn)}return ii}var Vt=35632,Wt=35633,$t=35718,vr=35721;function hr(nt,Qt,Sr,pn){var kn={},vn={};function en(Jr,En,ai,Ti){this.name=Jr,this.id=En,this.location=ai,this.info=Ti}function ri(Jr,En){for(var ai=0;ai<Jr.length;++ai)if(Jr[ai].id===En.id){Jr[ai].location=En.location;return}Jr.push(En)}function Hn(Jr,En,ai){var Ti=Jr===Vt?kn:vn,Kr=Ti[En];if(!Kr){var Bi=Qt.str(En);Kr=nt.createShader(Jr),nt.shaderSource(Kr,Bi),nt.compileShader(Kr),lt.shaderError(nt,Kr,Bi,Jr,ai),Ti[En]=Kr}return Kr}var di={},ii=[],ui=0;function Ei(Jr,En){this.id=ui++,this.fragId=Jr,this.vertId=En,this.program=null,this.uniforms=[],this.attributes=[],pn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Rn(Jr,En,ai){var Ti,Kr,Bi=Hn(Vt,Jr.fragId),qn=Hn(Wt,Jr.vertId),Ri=Jr.program=nt.createProgram();if(nt.attachShader(Ri,Bi),nt.attachShader(Ri,qn),ai)for(Ti=0;Ti<ai.length;++Ti){var Vn=ai[Ti];nt.bindAttribLocation(Ri,Vn[0],Vn[1])}nt.linkProgram(Ri),lt.linkError(nt,Ri,Qt.str(Jr.fragId),Qt.str(Jr.vertId),En);var _i=nt.getProgramParameter(Ri,$t);pn.profile&&(Jr.stats.uniformsCount=_i);var na=Jr.uniforms;for(Ti=0;Ti<_i;++Ti)if(Kr=nt.getActiveUniform(Ri,Ti),Kr)if(Kr.size>1)for(var La=0;La<Kr.size;++La){var xi=Kr.name.replace("[0]","["+La+"]");ri(na,new en(xi,Qt.id(xi),nt.getUniformLocation(Ri,xi),Kr))}else ri(na,new en(Kr.name,Qt.id(Kr.name),nt.getUniformLocation(Ri,Kr.name),Kr));var ti=nt.getProgramParameter(Ri,vr);pn.profile&&(Jr.stats.attributesCount=ti);var Ln=Jr.attributes;for(Ti=0;Ti<ti;++Ti)Kr=nt.getActiveAttrib(Ri,Ti),Kr&&ri(Ln,new en(Kr.name,Qt.id(Kr.name),nt.getAttribLocation(Ri,Kr.name),Kr))}pn.profile&&(Sr.getMaxUniformsCount=function(){var Jr=0;return ii.forEach(function(En){En.stats.uniformsCount>Jr&&(Jr=En.stats.uniformsCount)}),Jr},Sr.getMaxAttributesCount=function(){var Jr=0;return ii.forEach(function(En){En.stats.attributesCount>Jr&&(Jr=En.stats.attributesCount)}),Jr});function mi(){kn={},vn={};for(var Jr=0;Jr<ii.length;++Jr)Rn(ii[Jr],null,ii[Jr].attributes.map(function(En){return[En.location,En.name]}))}return{clear:function(){var Jr=nt.deleteShader.bind(nt);ro(kn).forEach(Jr),kn={},ro(vn).forEach(Jr),vn={},ii.forEach(function(En){nt.deleteProgram(En.program)}),ii.length=0,di={},Sr.shaderCount=0},program:function(Jr,En,ai,Ti){lt.command(Jr>=0,"missing vertex shader",ai),lt.command(En>=0,"missing fragment shader",ai);var Kr=di[En];Kr||(Kr=di[En]={});var Bi=Kr[Jr];if(Bi&&!Ti)return Bi;var qn=new Ei(En,Jr);return Sr.shaderCount++,Rn(qn,ai,Ti),Bi||(Kr[Jr]=qn),ii.push(qn),qn},restore:mi,shader:Hn,frag:-1,vert:-1}}var Ir=6408,lr=5121,Pr=3333,jr=5126;function tn(nt,Qt,Sr,pn,kn,vn,en){function ri(ii){var ui;Qt.next===null?(lt(kn.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ui=lr):(lt(Qt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ui=Qt.next.colorAttachments[0].texture._texture.type,vn.oes_texture_float?(lt(ui===lr||ui===jr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ui===jr&&lt(en.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):lt(ui===lr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ei=0,Rn=0,mi=pn.framebufferWidth,Jr=pn.framebufferHeight,En=null;N(ii)?En=ii:ii&&(lt.type(ii,"object","invalid arguments to regl.read()"),Ei=ii.x|0,Rn=ii.y|0,lt(Ei>=0&&Ei<pn.framebufferWidth,"invalid x offset for regl.read"),lt(Rn>=0&&Rn<pn.framebufferHeight,"invalid y offset for regl.read"),mi=(ii.width||pn.framebufferWidth-Ei)|0,Jr=(ii.height||pn.framebufferHeight-Rn)|0,En=ii.data||null),En&&(ui===lr?lt(En instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ui===jr&&lt(En instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),lt(mi>0&&mi+Ei<=pn.framebufferWidth,"invalid width for read pixels"),lt(Jr>0&&Jr+Rn<=pn.framebufferHeight,"invalid height for read pixels"),Sr();var ai=mi*Jr*4;return En||(ui===lr?En=new Uint8Array(ai):ui===jr&&(En=En||new Float32Array(ai))),lt.isTypedArray(En,"data buffer for regl.read() must be a typedarray"),lt(En.byteLength>=ai,"data buffer for regl.read() too small"),nt.pixelStorei(Pr,4),nt.readPixels(Ei,Rn,mi,Jr,Ir,ui,En),En}function Hn(ii){var ui;return Qt.setFBO({framebuffer:ii.framebuffer},function(){ui=ri(ii)}),ui}function di(ii){return!ii||!("framebuffer"in ii)?ri(ii):Hn(ii)}return di}function _n(nt){return Array.prototype.slice.call(nt)}function dn(nt){return _n(nt).join("")}function Tn(){var nt=0,Qt=[],Sr=[];function pn(ui){for(var Ei=0;Ei<Sr.length;++Ei)if(Sr[Ei]===ui)return Qt[Ei];var Rn="g"+nt++;return Qt.push(Rn),Sr.push(ui),Rn}function kn(){var ui=[];function Ei(){ui.push.apply(ui,_n(arguments))}var Rn=[];function mi(){var Jr="v"+nt++;return Rn.push(Jr),arguments.length>0&&(ui.push(Jr,"="),ui.push.apply(ui,_n(arguments)),ui.push(";")),Jr}return k(Ei,{def:mi,toString:function(){return dn([Rn.length>0?"var "+Rn.join(",")+";":"",dn(ui)])}})}function vn(){var ui=kn(),Ei=kn(),Rn=ui.toString,mi=Ei.toString;function Jr(En,ai){Ei(En,ai,"=",ui.def(En,ai),";")}return k(function(){ui.apply(ui,_n(arguments))},{def:ui.def,entry:ui,exit:Ei,save:Jr,set:function(En,ai,Ti){Jr(En,ai),ui(En,ai,"=",Ti,";")},toString:function(){return Rn()+mi()}})}function en(){var ui=dn(arguments),Ei=vn(),Rn=vn(),mi=Ei.toString,Jr=Rn.toString;return k(Ei,{then:function(){return Ei.apply(Ei,_n(arguments)),this},else:function(){return Rn.apply(Rn,_n(arguments)),this},toString:function(){var En=Jr();return En&&(En="else{"+En+"}"),dn(["if(",ui,"){",mi(),"}",En])}})}var ri=kn(),Hn={};function di(ui,Ei){var Rn=[];function mi(){var Kr="a"+Rn.length;return Rn.push(Kr),Kr}Ei=Ei||0;for(var Jr=0;Jr<Ei;++Jr)mi();var En=vn(),ai=En.toString,Ti=Hn[ui]=k(En,{arg:mi,toString:function(){return dn(["function(",Rn.join(),"){",ai(),"}"])}});return Ti}function ii(){var ui=['"use strict";',ri,"return {"];Object.keys(Hn).forEach(function(mi){ui.push('"',mi,'":',Hn[mi].toString(),",")}),ui.push("}");var Ei=dn(ui).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Rn=Function.apply(null,Qt.concat(Ei));return Rn.apply(null,Sr)}return{global:ri,link:pn,block:kn,proc:di,scope:vn,cond:en,compile:ii}}var Un="xyzw".split(""),si=5121,li=1,Ii=2,ea=0,la=1,ra=2,lo=3,Fi=4,Ia="dither",Xa="blend.enable",pa="blend.color",Sa="blend.equation",Pa="blend.func",ca="depth.enable",da="depth.func",Eu="depth.range",Ns="depth.mask",Gu="colorMask",Bu="cull.enable",Jo="cull.face",bs="frontFace",$u="lineWidth",qs="polygonOffset.enable",ef="polygonOffset.offset",_l="sample.alpha",ac="sample.enable",Ul="sample.coverage",_f="stencil.enable",zf="stencil.mask",xc="stencil.func",Uf="stencil.opFront",tf="stencil.opBack",Zl="scissor.enable",xf="scissor.box",wu="viewport",Is="profile",Xu="framebuffer",Yu="vert",Vl="frag",po="elements",Ku="primitive",Cu="count",bc="offset",td="instances",ph="vao",rd="Width",Hl="Height",Rl=Xu+rd,jl=Xu+Hl,Hh=wu+rd,wp=wu+Hl,rf="drawingBuffer",Il=rf+rd,ug=rf+Hl,bv=[Pa,Sa,xc,Uf,tf,Ul,wu,xf,ef],Sc=34962,o_=34963,m0=35632,y0=35633,Sv=3553,_0=34067,Cp=2884,lg=3042,Ap=3024,Ud=2960,sm=2929,Tp=3089,cg=32823,x0=32926,b0=32928,fg=5126,Ev=35664,Zd=35665,hg=35666,dh=5124,Mp=35667,Ss=35668,jh=35669,wv=35670,Wl=35671,Kn=35672,bf=35673,Vd=35674,Qs=35675,Gl=35676,Sf=35678,Ec=35680,vh=4,$l=1028,gh=1029,pg=2304,dg=2305,Hd=32775,nd=32776,Fc=519,Wh=7680,jd=0,um=1,vg=32774,Cv=513,zs=36160,Zf=36064,nf={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},id=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ad={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Bc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Rp={frag:m0,vert:y0},Gh={cw:pg,ccw:dg};function Xl(nt){return Array.isArray(nt)||N(nt)||Oo(nt)}function Ef(nt){return nt.sort(function(Qt,Sr){return Qt===wu?-1:Sr===wu?1:Qt<Sr?-1:1})}function ls(nt,Qt,Sr,pn){this.thisDep=nt,this.contextDep=Qt,this.propDep=Sr,this.append=pn}function sl(nt){return nt&&!(nt.thisDep||nt.contextDep||nt.propDep)}function $s(nt){return new ls(!1,!1,!1,nt)}function xl(nt,Qt){var Sr=nt.type;if(Sr===ea){var pn=nt.data.length;return new ls(!0,pn>=1,pn>=2,Qt)}else if(Sr===Fi){var kn=nt.data;return new ls(kn.thisDep,kn.contextDep,kn.propDep,Qt)}else return new ls(Sr===lo,Sr===ra,Sr===la,Qt)}var lm=new ls(!1,!1,!1,function(){});function $h(nt,Qt,Sr,pn,kn,vn,en,ri,Hn,di,ii,ui,Ei,Rn,mi){var Jr=di.Record,En={add:32774,subtract:32778,"reverse subtract":32779};Sr.ext_blend_minmax&&(En.min=Hd,En.max=nd);var ai=Sr.angle_instanced_arrays,Ti=Sr.webgl_draw_buffers,Kr={dirty:!0,profile:mi.profile},Bi={},qn=[],Ri={},Vn={};function _i(zt){return zt.replace(".","_")}function na(zt,It,xr){var Xt=_i(zt);qn.push(zt),Bi[Xt]=Kr[Xt]=!!xr,Ri[Xt]=It}function La(zt,It,xr){var Xt=_i(zt);qn.push(zt),Array.isArray(xr)?(Kr[Xt]=xr.slice(),Bi[Xt]=xr.slice()):Kr[Xt]=Bi[Xt]=xr,Vn[Xt]=It}na(Ia,Ap),na(Xa,lg),La(pa,"blendColor",[0,0,0,0]),La(Sa,"blendEquationSeparate",[vg,vg]),La(Pa,"blendFuncSeparate",[um,jd,um,jd]),na(ca,sm,!0),La(da,"depthFunc",Cv),La(Eu,"depthRange",[0,1]),La(Ns,"depthMask",!0),La(Gu,Gu,[!0,!0,!0,!0]),na(Bu,Cp),La(Jo,"cullFace",gh),La(bs,bs,dg),La($u,$u,1),na(qs,cg),La(ef,"polygonOffset",[0,0]),na(_l,x0),na(ac,b0),La(Ul,"sampleCoverage",[1,!1]),na(_f,Ud),La(zf,"stencilMask",-1),La(xc,"stencilFunc",[Fc,0,-1]),La(Uf,"stencilOpSeparate",[$l,Wh,Wh,Wh]),La(tf,"stencilOpSeparate",[gh,Wh,Wh,Wh]),na(Zl,Tp),La(xf,"scissor",[0,0,nt.drawingBufferWidth,nt.drawingBufferHeight]),La(wu,wu,[0,0,nt.drawingBufferWidth,nt.drawingBufferHeight]);var xi={gl:nt,context:Ei,strings:Qt,next:Bi,current:Kr,draw:ui,elements:vn,buffer:kn,shader:ii,attributes:di.state,vao:di,uniforms:Hn,framebuffer:ri,extensions:Sr,timer:Rn,isBufferArgs:Xl},ti={primTypes:hc,compareFuncs:ad,blendFuncs:nf,blendEquations:En,stencilOps:Bc,glTypes:fu,orientationType:Gh};lt.optional(function(){xi.isArrayLike=ss}),Ti&&(ti.backBuffer=[gh],ti.drawBuffer=Mt(pn.maxDrawbuffers,function(zt){return zt===0?[0]:Mt(zt,function(It){return Zf+It})}));var Ln=0;function ta(){var zt=Tn(),It=zt.link,xr=zt.global;zt.id=Ln++,zt.batchId="0";var Xt=It(xi),on=zt.shared={props:"a0"};Object.keys(xi).forEach(function(Dr){on[Dr]=xr.def(Xt,".",Dr)}),lt.optional(function(){zt.CHECK=It(lt),zt.commandStr=lt.guessCommand(),zt.command=It(zt.commandStr),zt.assert=function(Dr,tr,Zr){Dr("if(!(",tr,"))",this.CHECK,".commandRaise(",It(Zr),",",this.command,");")},ti.invalidBlendCombinations=id});var kr=zt.next={},Nr=zt.current={};Object.keys(Vn).forEach(function(Dr){Array.isArray(Kr[Dr])&&(kr[Dr]=xr.def(on.next,".",Dr),Nr[Dr]=xr.def(on.current,".",Dr))});var Wr=zt.constants={};Object.keys(ti).forEach(function(Dr){Wr[Dr]=xr.def(JSON.stringify(ti[Dr]))}),zt.invoke=function(Dr,tr){switch(tr.type){case ea:var Zr=["this",on.context,on.props,zt.batchId];return Dr.def(It(tr.data),".call(",Zr.slice(0,Math.max(tr.data.length+1,4)),")");case la:return Dr.def(on.props,tr.data);case ra:return Dr.def(on.context,tr.data);case lo:return Dr.def("this",tr.data);case Fi:return tr.data.append(zt,Dr),tr.data.ref}},zt.attribCache={};var dr={};return zt.scopeAttrib=function(Dr){var tr=Qt.id(Dr);if(tr in dr)return dr[tr];var Zr=di.scope[tr];Zr||(Zr=di.scope[tr]=new Jr);var xn=dr[tr]=It(Zr);return xn},zt}function io(zt){var It=zt.static,xr=zt.dynamic,Xt;if(Is in It){var on=!!It[Is];Xt=$s(function(Nr,Wr){return on}),Xt.enable=on}else if(Is in xr){var kr=xr[Is];Xt=xl(kr,function(Nr,Wr){return Nr.invoke(Wr,kr)})}return Xt}function Li(zt,It){var xr=zt.static,Xt=zt.dynamic;if(Xu in xr){var on=xr[Xu];return on?(on=ri.getFramebuffer(on),lt.command(on,"invalid framebuffer object"),$s(function(Nr,Wr){var dr=Nr.link(on),Dr=Nr.shared;Wr.set(Dr.framebuffer,".next",dr);var tr=Dr.context;return Wr.set(tr,"."+Rl,dr+".width"),Wr.set(tr,"."+jl,dr+".height"),dr})):$s(function(Nr,Wr){var dr=Nr.shared;Wr.set(dr.framebuffer,".next","null");var Dr=dr.context;return Wr.set(Dr,"."+Rl,Dr+"."+Il),Wr.set(Dr,"."+jl,Dr+"."+ug),"null"})}else if(Xu in Xt){var kr=Xt[Xu];return xl(kr,function(Nr,Wr){var dr=Nr.invoke(Wr,kr),Dr=Nr.shared,tr=Dr.framebuffer,Zr=Wr.def(tr,".getFramebuffer(",dr,")");lt.optional(function(){Nr.assert(Wr,"!"+dr+"||"+Zr,"invalid framebuffer object")}),Wr.set(tr,".next",Zr);var xn=Dr.context;return Wr.set(xn,"."+Rl,Zr+"?"+Zr+".width:"+xn+"."+Il),Wr.set(xn,"."+jl,Zr+"?"+Zr+".height:"+xn+"."+ug),Zr})}else return null}function Qa(zt,It,xr){var Xt=zt.static,on=zt.dynamic;function kr(dr){if(dr in Xt){var Dr=Xt[dr];lt.commandType(Dr,"object","invalid "+dr,xr.commandStr);var tr=!0,Zr=Dr.x|0,xn=Dr.y|0,bn,Gn;return"width"in Dr?(bn=Dr.width|0,lt.command(bn>=0,"invalid "+dr,xr.commandStr)):tr=!1,"height"in Dr?(Gn=Dr.height|0,lt.command(Gn>=0,"invalid "+dr,xr.commandStr)):tr=!1,new ls(!tr&&It&&It.thisDep,!tr&&It&&It.contextDep,!tr&&It&&It.propDep,function(Yi,Fn){var Hi=Yi.shared.context,ma=bn;"width"in Dr||(ma=Fn.def(Hi,".",Rl,"-",Zr));var ka=Gn;return"height"in Dr||(ka=Fn.def(Hi,".",jl,"-",xn)),[Zr,xn,ma,ka]})}else if(dr in on){var zn=on[dr],$n=xl(zn,function(Yi,Fn){var Hi=Yi.invoke(Fn,zn);lt.optional(function(){Yi.assert(Fn,Hi+"&&typeof "+Hi+'==="object"',"invalid "+dr)});var ma=Yi.shared.context,ka=Fn.def(Hi,".x|0"),Fo=Fn.def(Hi,".y|0"),Na=Fn.def('"width" in ',Hi,"?",Hi,".width|0:","(",ma,".",Rl,"-",ka,")"),Yl=Fn.def('"height" in ',Hi,"?",Hi,".height|0:","(",ma,".",jl,"-",Fo,")");return lt.optional(function(){Yi.assert(Fn,Na+">=0&&"+Yl+">=0","invalid "+dr)}),[ka,Fo,Na,Yl]});return It&&($n.thisDep=$n.thisDep||It.thisDep,$n.contextDep=$n.contextDep||It.contextDep,$n.propDep=$n.propDep||It.propDep),$n}else return It?new ls(It.thisDep,It.contextDep,It.propDep,function(Yi,Fn){var Hi=Yi.shared.context;return[0,0,Fn.def(Hi,".",Rl),Fn.def(Hi,".",jl)]}):null}var Nr=kr(wu);if(Nr){var Wr=Nr;Nr=new ls(Nr.thisDep,Nr.contextDep,Nr.propDep,function(dr,Dr){var tr=Wr.append(dr,Dr),Zr=dr.shared.context;return Dr.set(Zr,"."+Hh,tr[2]),Dr.set(Zr,"."+wp,tr[3]),tr})}return{viewport:Nr,scissor_box:kr(xf)}}function Oa(zt,It){var xr=zt.static,Xt=typeof xr[Vl]=="string"&&typeof xr[Yu]=="string";if(Xt){if(Object.keys(It.dynamic).length>0)return null;var on=It.static,kr=Object.keys(on);if(kr.length>0&&typeof on[kr[0]]=="number"){for(var Nr=[],Wr=0;Wr<kr.length;++Wr)lt(typeof on[kr[Wr]]=="number","must specify all vertex attribute locations when using vaos"),Nr.push([on[kr[Wr]]|0,kr[Wr]]);return Nr}}return null}function _a(zt,It,xr){var Xt=zt.static,on=zt.dynamic;function kr(tr){if(tr in Xt){var Zr=Qt.id(Xt[tr]);lt.optional(function(){ii.shader(Rp[tr],Zr,lt.guessCommand())});var xn=$s(function(){return Zr});return xn.id=Zr,xn}else if(tr in on){var bn=on[tr];return xl(bn,function(Gn,zn){var $n=Gn.invoke(zn,bn),Yi=zn.def(Gn.shared.strings,".id(",$n,")");return lt.optional(function(){zn(Gn.shared.shader,".shader(",Rp[tr],",",Yi,",",Gn.command,");")}),Yi})}return null}var Nr=kr(Vl),Wr=kr(Yu),dr=null,Dr;return sl(Nr)&&sl(Wr)?(dr=ii.program(Wr.id,Nr.id,null,xr),Dr=$s(function(tr,Zr){return tr.link(dr)})):Dr=new ls(Nr&&Nr.thisDep||Wr&&Wr.thisDep,Nr&&Nr.contextDep||Wr&&Wr.contextDep,Nr&&Nr.propDep||Wr&&Wr.propDep,function(tr,Zr){var xn=tr.shared.shader,bn;Nr?bn=Nr.append(tr,Zr):bn=Zr.def(xn,".",Vl);var Gn;Wr?Gn=Wr.append(tr,Zr):Gn=Zr.def(xn,".",Yu);var zn=xn+".program("+Gn+","+bn;return lt.optional(function(){zn+=","+tr.command}),Zr.def(zn+")")}),{frag:Nr,vert:Wr,progVar:Dr,program:dr}}function So(zt,It){var xr=zt.static,Xt=zt.dynamic;function on(){if(po in xr){var tr=xr[po];Xl(tr)?tr=vn.getElements(vn.create(tr,!0)):tr&&(tr=vn.getElements(tr),lt.command(tr,"invalid elements",It.commandStr));var Zr=$s(function(bn,Gn){if(tr){var zn=bn.link(tr);return bn.ELEMENTS=zn,zn}return bn.ELEMENTS=null,null});return Zr.value=tr,Zr}else if(po in Xt){var xn=Xt[po];return xl(xn,function(bn,Gn){var zn=bn.shared,$n=zn.isBufferArgs,Yi=zn.elements,Fn=bn.invoke(Gn,xn),Hi=Gn.def("null"),ma=Gn.def($n,"(",Fn,")"),ka=bn.cond(ma).then(Hi,"=",Yi,".createStream(",Fn,");").else(Hi,"=",Yi,".getElements(",Fn,");");return lt.optional(function(){bn.assert(ka.else,"!"+Fn+"||"+Hi,"invalid elements")}),Gn.entry(ka),Gn.exit(bn.cond(ma).then(Yi,".destroyStream(",Hi,");")),bn.ELEMENTS=Hi,Hi})}return null}var kr=on();function Nr(){if(Ku in xr){var tr=xr[Ku];return lt.commandParameter(tr,hc,"invalid primitve",It.commandStr),$s(function(xn,bn){return hc[tr]})}else if(Ku in Xt){var Zr=Xt[Ku];return xl(Zr,function(xn,bn){var Gn=xn.constants.primTypes,zn=xn.invoke(bn,Zr);return lt.optional(function(){xn.assert(bn,zn+" in "+Gn,"invalid primitive, must be one of "+Object.keys(hc))}),bn.def(Gn,"[",zn,"]")})}else if(kr)return sl(kr)?kr.value?$s(function(xn,bn){return bn.def(xn.ELEMENTS,".primType")}):$s(function(){return vh}):new ls(kr.thisDep,kr.contextDep,kr.propDep,function(xn,bn){var Gn=xn.ELEMENTS;return bn.def(Gn,"?",Gn,".primType:",vh)});return null}function Wr(tr,Zr){if(tr in xr){var xn=xr[tr]|0;return lt.command(!Zr||xn>=0,"invalid "+tr,It.commandStr),$s(function(Gn,zn){return Zr&&(Gn.OFFSET=xn),xn})}else if(tr in Xt){var bn=Xt[tr];return xl(bn,function(Gn,zn){var $n=Gn.invoke(zn,bn);return Zr&&(Gn.OFFSET=$n,lt.optional(function(){Gn.assert(zn,$n+">=0","invalid "+tr)})),$n})}else if(Zr&&kr)return $s(function(Gn,zn){return Gn.OFFSET="0",0});return null}var dr=Wr(bc,!0);function Dr(){if(Cu in xr){var tr=xr[Cu]|0;return lt.command(typeof tr=="number"&&tr>=0,"invalid vertex count",It.commandStr),$s(function(){return tr})}else if(Cu in Xt){var Zr=Xt[Cu];return xl(Zr,function(Gn,zn){var $n=Gn.invoke(zn,Zr);return lt.optional(function(){Gn.assert(zn,"typeof "+$n+'==="number"&&'+$n+">=0&&"+$n+"===("+$n+"|0)","invalid vertex count")}),$n})}else if(kr)if(sl(kr)){if(kr)return dr?new ls(dr.thisDep,dr.contextDep,dr.propDep,function(Gn,zn){var $n=zn.def(Gn.ELEMENTS,".vertCount-",Gn.OFFSET);return lt.optional(function(){Gn.assert(zn,$n+">=0","invalid vertex offset/element buffer too small")}),$n}):$s(function(Gn,zn){return zn.def(Gn.ELEMENTS,".vertCount")});var xn=$s(function(){return-1});return lt.optional(function(){xn.MISSING=!0}),xn}else{var bn=new ls(kr.thisDep||dr.thisDep,kr.contextDep||dr.contextDep,kr.propDep||dr.propDep,function(Gn,zn){var $n=Gn.ELEMENTS;return Gn.OFFSET?zn.def($n,"?",$n,".vertCount-",Gn.OFFSET,":-1"):zn.def($n,"?",$n,".vertCount:-1")});return lt.optional(function(){bn.DYNAMIC=!0}),bn}return null}return{elements:kr,primitive:Nr(),count:Dr(),instances:Wr(td,!1),offset:dr}}function pu(zt,It){var xr=zt.static,Xt=zt.dynamic,on={};return qn.forEach(function(kr){var Nr=_i(kr);function Wr(dr,Dr){if(kr in xr){var tr=dr(xr[kr]);on[Nr]=$s(function(){return tr})}else if(kr in Xt){var Zr=Xt[kr];on[Nr]=xl(Zr,function(xn,bn){return Dr(xn,bn,xn.invoke(bn,Zr))})}}switch(kr){case Bu:case Xa:case Ia:case _f:case ca:case Zl:case qs:case _l:case ac:case Ns:return Wr(function(dr){return lt.commandType(dr,"boolean",kr,It.commandStr),dr},function(dr,Dr,tr){return lt.optional(function(){dr.assert(Dr,"typeof "+tr+'==="boolean"',"invalid flag "+kr,dr.commandStr)}),tr});case da:return Wr(function(dr){return lt.commandParameter(dr,ad,"invalid "+kr,It.commandStr),ad[dr]},function(dr,Dr,tr){var Zr=dr.constants.compareFuncs;return lt.optional(function(){dr.assert(Dr,tr+" in "+Zr,"invalid "+kr+", must be one of "+Object.keys(ad))}),Dr.def(Zr,"[",tr,"]")});case Eu:return Wr(function(dr){return lt.command(ss(dr)&&dr.length===2&&typeof dr[0]=="number"&&typeof dr[1]=="number"&&dr[0]<=dr[1],"depth range is 2d array",It.commandStr),dr},function(dr,Dr,tr){lt.optional(function(){dr.assert(Dr,dr.shared.isArrayLike+"("+tr+")&&"+tr+".length===2&&typeof "+tr+'[0]==="number"&&typeof '+tr+'[1]==="number"&&'+tr+"[0]<="+tr+"[1]","depth range must be a 2d array")});var Zr=Dr.def("+",tr,"[0]"),xn=Dr.def("+",tr,"[1]");return[Zr,xn]});case Pa:return Wr(function(dr){lt.commandType(dr,"object","blend.func",It.commandStr);var Dr="srcRGB"in dr?dr.srcRGB:dr.src,tr="srcAlpha"in dr?dr.srcAlpha:dr.src,Zr="dstRGB"in dr?dr.dstRGB:dr.dst,xn="dstAlpha"in dr?dr.dstAlpha:dr.dst;return lt.commandParameter(Dr,nf,Nr+".srcRGB",It.commandStr),lt.commandParameter(tr,nf,Nr+".srcAlpha",It.commandStr),lt.commandParameter(Zr,nf,Nr+".dstRGB",It.commandStr),lt.commandParameter(xn,nf,Nr+".dstAlpha",It.commandStr),lt.command(id.indexOf(Dr+", "+Zr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Dr+", "+Zr+")",It.commandStr),[nf[Dr],nf[Zr],nf[tr],nf[xn]]},function(dr,Dr,tr){var Zr=dr.constants.blendFuncs;lt.optional(function(){dr.assert(Dr,tr+"&&typeof "+tr+'==="object"',"invalid blend func, must be an object")});function xn(Hi,ma){var ka=Dr.def('"',Hi,ma,'" in ',tr,"?",tr,".",Hi,ma,":",tr,".",Hi);return lt.optional(function(){dr.assert(Dr,ka+" in "+Zr,"invalid "+kr+"."+Hi+ma+", must be one of "+Object.keys(nf))}),ka}var bn=xn("src","RGB"),Gn=xn("dst","RGB");lt.optional(function(){var Hi=dr.constants.invalidBlendCombinations;dr.assert(Dr,Hi+".indexOf("+bn+'+", "+'+Gn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var zn=Dr.def(Zr,"[",bn,"]"),$n=Dr.def(Zr,"[",xn("src","Alpha"),"]"),Yi=Dr.def(Zr,"[",Gn,"]"),Fn=Dr.def(Zr,"[",xn("dst","Alpha"),"]");return[zn,Yi,$n,Fn]});case Sa:return Wr(function(dr){if(typeof dr=="string")return lt.commandParameter(dr,En,"invalid "+kr,It.commandStr),[En[dr],En[dr]];if(typeof dr=="object")return lt.commandParameter(dr.rgb,En,kr+".rgb",It.commandStr),lt.commandParameter(dr.alpha,En,kr+".alpha",It.commandStr),[En[dr.rgb],En[dr.alpha]];lt.commandRaise("invalid blend.equation",It.commandStr)},function(dr,Dr,tr){var Zr=dr.constants.blendEquations,xn=Dr.def(),bn=Dr.def(),Gn=dr.cond("typeof ",tr,'==="string"');return lt.optional(function(){function zn($n,Yi,Fn){dr.assert($n,Fn+" in "+Zr,"invalid "+Yi+", must be one of "+Object.keys(En))}zn(Gn.then,kr,tr),dr.assert(Gn.else,tr+"&&typeof "+tr+'==="object"',"invalid "+kr),zn(Gn.else,kr+".rgb",tr+".rgb"),zn(Gn.else,kr+".alpha",tr+".alpha")}),Gn.then(xn,"=",bn,"=",Zr,"[",tr,"];"),Gn.else(xn,"=",Zr,"[",tr,".rgb];",bn,"=",Zr,"[",tr,".alpha];"),Dr(Gn),[xn,bn]});case pa:return Wr(function(dr){return lt.command(ss(dr)&&dr.length===4,"blend.color must be a 4d array",It.commandStr),Mt(4,function(Dr){return+dr[Dr]})},function(dr,Dr,tr){return lt.optional(function(){dr.assert(Dr,dr.shared.isArrayLike+"("+tr+")&&"+tr+".length===4","blend.color must be a 4d array")}),Mt(4,function(Zr){return Dr.def("+",tr,"[",Zr,"]")})});case zf:return Wr(function(dr){return lt.commandType(dr,"number",Nr,It.commandStr),dr|0},function(dr,Dr,tr){return lt.optional(function(){dr.assert(Dr,"typeof "+tr+'==="number"',"invalid stencil.mask")}),Dr.def(tr,"|0")});case xc:return Wr(function(dr){lt.commandType(dr,"object",Nr,It.commandStr);var Dr=dr.cmp||"keep",tr=dr.ref||0,Zr="mask"in dr?dr.mask:-1;return lt.commandParameter(Dr,ad,kr+".cmp",It.commandStr),lt.commandType(tr,"number",kr+".ref",It.commandStr),lt.commandType(Zr,"number",kr+".mask",It.commandStr),[ad[Dr],tr,Zr]},function(dr,Dr,tr){var Zr=dr.constants.compareFuncs;lt.optional(function(){function zn(){dr.assert(Dr,Array.prototype.join.call(arguments,""),"invalid stencil.func")}zn(tr+"&&typeof ",tr,'==="object"'),zn('!("cmp" in ',tr,")||(",tr,".cmp in ",Zr,")")});var xn=Dr.def('"cmp" in ',tr,"?",Zr,"[",tr,".cmp]",":",Wh),bn=Dr.def(tr,".ref|0"),Gn=Dr.def('"mask" in ',tr,"?",tr,".mask|0:-1");return[xn,bn,Gn]});case Uf:case tf:return Wr(function(dr){lt.commandType(dr,"object",Nr,It.commandStr);var Dr=dr.fail||"keep",tr=dr.zfail||"keep",Zr=dr.zpass||"keep";return lt.commandParameter(Dr,Bc,kr+".fail",It.commandStr),lt.commandParameter(tr,Bc,kr+".zfail",It.commandStr),lt.commandParameter(Zr,Bc,kr+".zpass",It.commandStr),[kr===tf?gh:$l,Bc[Dr],Bc[tr],Bc[Zr]]},function(dr,Dr,tr){var Zr=dr.constants.stencilOps;lt.optional(function(){dr.assert(Dr,tr+"&&typeof "+tr+'==="object"',"invalid "+kr)});function xn(bn){return lt.optional(function(){dr.assert(Dr,'!("'+bn+'" in '+tr+")||("+tr+"."+bn+" in "+Zr+")","invalid "+kr+"."+bn+", must be one of "+Object.keys(Bc))}),Dr.def('"',bn,'" in ',tr,"?",Zr,"[",tr,".",bn,"]:",Wh)}return[kr===tf?gh:$l,xn("fail"),xn("zfail"),xn("zpass")]});case ef:return Wr(function(dr){lt.commandType(dr,"object",Nr,It.commandStr);var Dr=dr.factor|0,tr=dr.units|0;return lt.commandType(Dr,"number",Nr+".factor",It.commandStr),lt.commandType(tr,"number",Nr+".units",It.commandStr),[Dr,tr]},function(dr,Dr,tr){lt.optional(function(){dr.assert(Dr,tr+"&&typeof "+tr+'==="object"',"invalid "+kr)});var Zr=Dr.def(tr,".factor|0"),xn=Dr.def(tr,".units|0");return[Zr,xn]});case Jo:return Wr(function(dr){var Dr=0;return dr==="front"?Dr=$l:dr==="back"&&(Dr=gh),lt.command(!!Dr,Nr,It.commandStr),Dr},function(dr,Dr,tr){return lt.optional(function(){dr.assert(Dr,tr+'==="front"||'+tr+'==="back"',"invalid cull.face")}),Dr.def(tr,'==="front"?',$l,":",gh)});case $u:return Wr(function(dr){return lt.command(typeof dr=="number"&&dr>=pn.lineWidthDims[0]&&dr<=pn.lineWidthDims[1],"invalid line width, must be a positive number between "+pn.lineWidthDims[0]+" and "+pn.lineWidthDims[1],It.commandStr),dr},function(dr,Dr,tr){return lt.optional(function(){dr.assert(Dr,"typeof "+tr+'==="number"&&'+tr+">="+pn.lineWidthDims[0]+"&&"+tr+"<="+pn.lineWidthDims[1],"invalid line width")}),tr});case bs:return Wr(function(dr){return lt.commandParameter(dr,Gh,Nr,It.commandStr),Gh[dr]},function(dr,Dr,tr){return lt.optional(function(){dr.assert(Dr,tr+'==="cw"||'+tr+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Dr.def(tr+'==="cw"?'+pg+":"+dg)});case Gu:return Wr(function(dr){return lt.command(ss(dr)&&dr.length===4,"color.mask must be length 4 array",It.commandStr),dr.map(function(Dr){return!!Dr})},function(dr,Dr,tr){return lt.optional(function(){dr.assert(Dr,dr.shared.isArrayLike+"("+tr+")&&"+tr+".length===4","invalid color.mask")}),Mt(4,function(Zr){return"!!"+tr+"["+Zr+"]"})});case Ul:return Wr(function(dr){lt.command(typeof dr=="object"&&dr,Nr,It.commandStr);var Dr="value"in dr?dr.value:1,tr=!!dr.invert;return lt.command(typeof Dr=="number"&&Dr>=0&&Dr<=1,"sample.coverage.value must be a number between 0 and 1",It.commandStr),[Dr,tr]},function(dr,Dr,tr){lt.optional(function(){dr.assert(Dr,tr+"&&typeof "+tr+'==="object"',"invalid sample.coverage")});var Zr=Dr.def('"value" in ',tr,"?+",tr,".value:1"),xn=Dr.def("!!",tr,".invert");return[Zr,xn]})}}),on}function Nu(zt,It){var xr=zt.static,Xt=zt.dynamic,on={};return Object.keys(xr).forEach(function(kr){var Nr=xr[kr],Wr;if(typeof Nr=="number"||typeof Nr=="boolean")Wr=$s(function(){return Nr});else if(typeof Nr=="function"){var dr=Nr._reglType;dr==="texture2d"||dr==="textureCube"?Wr=$s(function(Dr){return Dr.link(Nr)}):dr==="framebuffer"||dr==="framebufferCube"?(lt.command(Nr.color.length>0,'missing color attachment for framebuffer sent to uniform "'+kr+'"',It.commandStr),Wr=$s(function(Dr){return Dr.link(Nr.color[0])})):lt.commandRaise('invalid data for uniform "'+kr+'"',It.commandStr)}else ss(Nr)?Wr=$s(function(Dr){var tr=Dr.global.def("[",Mt(Nr.length,function(Zr){return lt.command(typeof Nr[Zr]=="number"||typeof Nr[Zr]=="boolean","invalid uniform "+kr,Dr.commandStr),Nr[Zr]}),"]");return tr}):lt.commandRaise('invalid or missing data for uniform "'+kr+'"',It.commandStr);Wr.value=Nr,on[kr]=Wr}),Object.keys(Xt).forEach(function(kr){var Nr=Xt[kr];on[kr]=xl(Nr,function(Wr,dr){return Wr.invoke(dr,Nr)})}),on}function vo(zt,It){var xr=zt.static,Xt=zt.dynamic,on={};return Object.keys(xr).forEach(function(kr){var Nr=xr[kr],Wr=Qt.id(kr),dr=new Jr;if(Xl(Nr))dr.state=li,dr.buffer=kn.getBuffer(kn.create(Nr,Sc,!1,!0)),dr.type=0;else{var Dr=kn.getBuffer(Nr);if(Dr)dr.state=li,dr.buffer=Dr,dr.type=0;else if(lt.command(typeof Nr=="object"&&Nr,"invalid data for attribute "+kr,It.commandStr),"constant"in Nr){var tr=Nr.constant;dr.buffer="null",dr.state=Ii,typeof tr=="number"?dr.x=tr:(lt.command(ss(tr)&&tr.length>0&&tr.length<=4,"invalid constant for attribute "+kr,It.commandStr),Un.forEach(function(Yi,Fn){Fn<tr.length&&(dr[Yi]=tr[Fn])}))}else{Xl(Nr.buffer)?Dr=kn.getBuffer(kn.create(Nr.buffer,Sc,!1,!0)):Dr=kn.getBuffer(Nr.buffer),lt.command(!!Dr,'missing buffer for attribute "'+kr+'"',It.commandStr);var Zr=Nr.offset|0;lt.command(Zr>=0,'invalid offset for attribute "'+kr+'"',It.commandStr);var xn=Nr.stride|0;lt.command(xn>=0&&xn<256,'invalid stride for attribute "'+kr+'", must be integer betweeen [0, 255]',It.commandStr);var bn=Nr.size|0;lt.command(!("size"in Nr)||bn>0&&bn<=4,'invalid size for attribute "'+kr+'", must be 1,2,3,4',It.commandStr);var Gn=!!Nr.normalized,zn=0;"type"in Nr&&(lt.commandParameter(Nr.type,fu,"invalid type for attribute "+kr,It.commandStr),zn=fu[Nr.type]);var $n=Nr.divisor|0;"divisor"in Nr&&(lt.command($n===0||ai,'cannot specify divisor for attribute "'+kr+'", instancing not supported',It.commandStr),lt.command($n>=0,'invalid divisor for attribute "'+kr+'"',It.commandStr)),lt.optional(function(){var Yi=It.commandStr,Fn=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Nr).forEach(function(Hi){lt.command(Fn.indexOf(Hi)>=0,'unknown parameter "'+Hi+'" for attribute pointer "'+kr+'" (valid parameters are '+Fn+")",Yi)})}),dr.buffer=Dr,dr.state=li,dr.size=bn,dr.normalized=Gn,dr.type=zn||Dr.dtype,dr.offset=Zr,dr.stride=xn,dr.divisor=$n}}on[kr]=$s(function(Yi,Fn){var Hi=Yi.attribCache;if(Wr in Hi)return Hi[Wr];var ma={isStream:!1};return Object.keys(dr).forEach(function(ka){ma[ka]=dr[ka]}),dr.buffer&&(ma.buffer=Yi.link(dr.buffer),ma.type=ma.type||ma.buffer+".dtype"),Hi[Wr]=ma,ma})}),Object.keys(Xt).forEach(function(kr){var Nr=Xt[kr];function Wr(dr,Dr){var tr=dr.invoke(Dr,Nr),Zr=dr.shared,xn=dr.constants,bn=Zr.isBufferArgs,Gn=Zr.buffer;lt.optional(function(){dr.assert(Dr,tr+"&&(typeof "+tr+'==="object"||typeof '+tr+'==="function")&&('+bn+"("+tr+")||"+Gn+".getBuffer("+tr+")||"+Gn+".getBuffer("+tr+".buffer)||"+bn+"("+tr+'.buffer)||("constant" in '+tr+"&&(typeof "+tr+'.constant==="number"||'+Zr.isArrayLike+"("+tr+".constant))))",'invalid dynamic attribute "'+kr+'"')});var zn={isStream:Dr.def(!1)},$n=new Jr;$n.state=li,Object.keys($n).forEach(function(ma){zn[ma]=Dr.def(""+$n[ma])});var Yi=zn.buffer,Fn=zn.type;Dr("if(",bn,"(",tr,")){",zn.isStream,"=true;",Yi,"=",Gn,".createStream(",Sc,",",tr,");",Fn,"=",Yi,".dtype;","}else{",Yi,"=",Gn,".getBuffer(",tr,");","if(",Yi,"){",Fn,"=",Yi,".dtype;",'}else if("constant" in ',tr,"){",zn.state,"=",Ii,";","if(typeof "+tr+'.constant === "number"){',zn[Un[0]],"=",tr,".constant;",Un.slice(1).map(function(ma){return zn[ma]}).join("="),"=0;","}else{",Un.map(function(ma,ka){return zn[ma]+"="+tr+".constant.length>"+ka+"?"+tr+".constant["+ka+"]:0;"}).join(""),"}}else{","if(",bn,"(",tr,".buffer)){",Yi,"=",Gn,".createStream(",Sc,",",tr,".buffer);","}else{",Yi,"=",Gn,".getBuffer(",tr,".buffer);","}",Fn,'="type" in ',tr,"?",xn.glTypes,"[",tr,".type]:",Yi,".dtype;",zn.normalized,"=!!",tr,".normalized;");function Hi(ma){Dr(zn[ma],"=",tr,".",ma,"|0;")}return Hi("size"),Hi("offset"),Hi("stride"),Hi("divisor"),Dr("}}"),Dr.exit("if(",zn.isStream,"){",Gn,".destroyStream(",Yi,");","}"),zn}on[kr]=xl(Nr,Wr)}),on}function hs(zt,It){var xr=zt.static,Xt=zt.dynamic;if(ph in xr){var on=xr[ph];return on!==null&&di.getVAO(on)===null&&(on=di.createVAO(on)),$s(function(Nr){return Nr.link(di.getVAO(on))})}else if(ph in Xt){var kr=Xt[ph];return xl(kr,function(Nr,Wr){var dr=Nr.invoke(Wr,kr);return Wr.def(Nr.shared.vao+".getVAO("+dr+")")})}return null}function Vo(zt){var It=zt.static,xr=zt.dynamic,Xt={};return Object.keys(It).forEach(function(on){var kr=It[on];Xt[on]=$s(function(Nr,Wr){return typeof kr=="number"||typeof kr=="boolean"?""+kr:Nr.link(kr)})}),Object.keys(xr).forEach(function(on){var kr=xr[on];Xt[on]=xl(kr,function(Nr,Wr){return Nr.invoke(Wr,kr)})}),Xt}function du(zt,It,xr,Xt,on){var kr=zt.static,Nr=zt.dynamic;lt.optional(function(){var Hi=[Xu,Yu,Vl,po,Ku,bc,Cu,td,Is,ph].concat(qn);function ma(ka){Object.keys(ka).forEach(function(Fo){lt.command(Hi.indexOf(Fo)>=0,'unknown parameter "'+Fo+'"',on.commandStr)})}ma(kr),ma(Nr)});var Wr=Oa(zt,It),dr=Li(zt,on),Dr=Qa(zt,dr,on),tr=So(zt,on),Zr=pu(zt,on),xn=_a(zt,on,Wr);function bn(Hi){var ma=Dr[Hi];ma&&(Zr[Hi]=ma)}bn(wu),bn(_i(xf));var Gn=Object.keys(Zr).length>0,zn={framebuffer:dr,draw:tr,shader:xn,state:Zr,dirty:Gn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(zn.profile=io(zt,on),zn.uniforms=Nu(xr,on),zn.drawVAO=zn.scopeVAO=hs(zt,on),!zn.drawVAO&&xn.program&&!Wr&&Sr.angle_instanced_arrays){var $n=!0,Yi=xn.program.attributes.map(function(Hi){var ma=It.static[Hi];return $n=$n&&!!ma,ma});if($n&&Yi.length>0){var Fn=di.getVAO(di.createVAO(Yi));zn.drawVAO=new ls(null,null,null,function(Hi,ma){return Hi.link(Fn)}),zn.useVAO=!0}}return Wr?zn.useVAO=!0:zn.attributes=vo(It,on),zn.context=Vo(Xt,on),zn}function Us(zt,It,xr){var Xt=zt.shared,on=Xt.context,kr=zt.scope();Object.keys(xr).forEach(function(Nr){It.save(on,"."+Nr);var Wr=xr[Nr];kr(on,".",Nr,"=",Wr.append(zt,It),";")}),It(kr)}function Zs(zt,It,xr,Xt){var on=zt.shared,kr=on.gl,Nr=on.framebuffer,Wr;Ti&&(Wr=It.def(on.extensions,".webgl_draw_buffers"));var dr=zt.constants,Dr=dr.drawBuffer,tr=dr.backBuffer,Zr;xr?Zr=xr.append(zt,It):Zr=It.def(Nr,".next"),Xt||It("if(",Zr,"!==",Nr,".cur){"),It("if(",Zr,"){",kr,".bindFramebuffer(",zs,",",Zr,".framebuffer);"),Ti&&It(Wr,".drawBuffersWEBGL(",Dr,"[",Zr,".colorAttachments.length]);"),It("}else{",kr,".bindFramebuffer(",zs,",null);"),Ti&&It(Wr,".drawBuffersWEBGL(",tr,");"),It("}",Nr,".cur=",Zr,";"),Xt||It("}")}function Js(zt,It,xr){var Xt=zt.shared,on=Xt.gl,kr=zt.current,Nr=zt.next,Wr=Xt.current,dr=Xt.next,Dr=zt.cond(Wr,".dirty");qn.forEach(function(tr){var Zr=_i(tr);if(!(Zr in xr.state)){var xn,bn;if(Zr in Nr){xn=Nr[Zr],bn=kr[Zr];var Gn=Mt(Kr[Zr].length,function($n){return Dr.def(xn,"[",$n,"]")});Dr(zt.cond(Gn.map(function($n,Yi){return $n+"!=="+bn+"["+Yi+"]"}).join("||")).then(on,".",Vn[Zr],"(",Gn,");",Gn.map(function($n,Yi){return bn+"["+Yi+"]="+$n}).join(";"),";"))}else{xn=Dr.def(dr,".",Zr);var zn=zt.cond(xn,"!==",Wr,".",Zr);Dr(zn),Zr in Ri?zn(zt.cond(xn).then(on,".enable(",Ri[Zr],");").else(on,".disable(",Ri[Zr],");"),Wr,".",Zr,"=",xn,";"):zn(on,".",Vn[Zr],"(",xn,");",Wr,".",Zr,"=",xn,";")}}}),Object.keys(xr.state).length===0&&Dr(Wr,".dirty=false;"),It(Dr)}function zu(zt,It,xr,Xt){var on=zt.shared,kr=zt.current,Nr=on.current,Wr=on.gl;Ef(Object.keys(xr)).forEach(function(dr){var Dr=xr[dr];if(!(Xt&&!Xt(Dr))){var tr=Dr.append(zt,It);if(Ri[dr]){var Zr=Ri[dr];sl(Dr)?tr?It(Wr,".enable(",Zr,");"):It(Wr,".disable(",Zr,");"):It(zt.cond(tr).then(Wr,".enable(",Zr,");").else(Wr,".disable(",Zr,");")),It(Nr,".",dr,"=",tr,";")}else if(ss(tr)){var xn=kr[dr];It(Wr,".",Vn[dr],"(",tr,");",tr.map(function(bn,Gn){return xn+"["+Gn+"]="+bn}).join(";"),";")}else It(Wr,".",Vn[dr],"(",tr,");",Nr,".",dr,"=",tr,";")}})}function ou(zt,It){ai&&(zt.instancing=It.def(zt.shared.extensions,".angle_instanced_arrays"))}function Ua(zt,It,xr,Xt,on){var kr=zt.shared,Nr=zt.stats,Wr=kr.current,dr=kr.timer,Dr=xr.profile;function tr(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Zr,xn;function bn(Hi){Zr=It.def(),Hi(Zr,"=",tr(),";"),typeof on=="string"?Hi(Nr,".count+=",on,";"):Hi(Nr,".count++;"),Rn&&(Xt?(xn=It.def(),Hi(xn,"=",dr,".getNumPendingQueries();")):Hi(dr,".beginQuery(",Nr,");"))}function Gn(Hi){Hi(Nr,".cpuTime+=",tr(),"-",Zr,";"),Rn&&(Xt?Hi(dr,".pushScopeStats(",xn,",",dr,".getNumPendingQueries(),",Nr,");"):Hi(dr,".endQuery();"))}function zn(Hi){var ma=It.def(Wr,".profile");It(Wr,".profile=",Hi,";"),It.exit(Wr,".profile=",ma,";")}var $n;if(Dr){if(sl(Dr)){Dr.enable?(bn(It),Gn(It.exit),zn("true")):zn("false");return}$n=Dr.append(zt,It),zn($n)}else $n=It.def(Wr,".profile");var Yi=zt.block();bn(Yi),It("if(",$n,"){",Yi,"}");var Fn=zt.block();Gn(Fn),It.exit("if(",$n,"){",Fn,"}")}function Uu(zt,It,xr,Xt,on){var kr=zt.shared;function Nr(dr){switch(dr){case Ev:case Mp:case Wl:return 2;case Zd:case Ss:case Kn:return 3;case hg:case jh:case bf:return 4;default:return 1}}function Wr(dr,Dr,tr){var Zr=kr.gl,xn=It.def(dr,".location"),bn=It.def(kr.attributes,"[",xn,"]"),Gn=tr.state,zn=tr.buffer,$n=[tr.x,tr.y,tr.z,tr.w],Yi=["buffer","normalized","offset","stride"];function Fn(){It("if(!",bn,".buffer){",Zr,".enableVertexAttribArray(",xn,");}");var ma=tr.type,ka;if(tr.size?ka=It.def(tr.size,"||",Dr):ka=Dr,It("if(",bn,".type!==",ma,"||",bn,".size!==",ka,"||",Yi.map(function(Na){return bn+"."+Na+"!=="+tr[Na]}).join("||"),"){",Zr,".bindBuffer(",Sc,",",zn,".buffer);",Zr,".vertexAttribPointer(",[xn,ka,ma,tr.normalized,tr.stride,tr.offset],");",bn,".type=",ma,";",bn,".size=",ka,";",Yi.map(function(Na){return bn+"."+Na+"="+tr[Na]+";"}).join(""),"}"),ai){var Fo=tr.divisor;It("if(",bn,".divisor!==",Fo,"){",zt.instancing,".vertexAttribDivisorANGLE(",[xn,Fo],");",bn,".divisor=",Fo,";}")}}function Hi(){It("if(",bn,".buffer){",Zr,".disableVertexAttribArray(",xn,");",bn,".buffer=null;","}if(",Un.map(function(ma,ka){return bn+"."+ma+"!=="+$n[ka]}).join("||"),"){",Zr,".vertexAttrib4f(",xn,",",$n,");",Un.map(function(ma,ka){return bn+"."+ma+"="+$n[ka]+";"}).join(""),"}")}Gn===li?Fn():Gn===Ii?Hi():(It("if(",Gn,"===",li,"){"),Fn(),It("}else{"),Hi(),It("}"))}Xt.forEach(function(dr){var Dr=dr.name,tr=xr.attributes[Dr],Zr;if(tr){if(!on(tr))return;Zr=tr.append(zt,It)}else{if(!on(lm))return;var xn=zt.scopeAttrib(Dr);lt.optional(function(){zt.assert(It,xn+".state","missing attribute "+Dr)}),Zr={},Object.keys(new Jr).forEach(function(bn){Zr[bn]=It.def(xn,".",bn)})}Wr(zt.link(dr),Nr(dr.info.type),Zr)})}function Do(zt,It,xr,Xt,on){for(var kr=zt.shared,Nr=kr.gl,Wr,dr=0;dr<Xt.length;++dr){var Dr=Xt[dr],tr=Dr.name,Zr=Dr.info.type,xn=xr.uniforms[tr],bn=zt.link(Dr),Gn=bn+".location",zn;if(xn){if(!on(xn))continue;if(sl(xn)){var $n=xn.value;if(lt.command($n!==null&&typeof $n!="undefined",'missing uniform "'+tr+'"',zt.commandStr),Zr===Sf||Zr===Ec){lt.command(typeof $n=="function"&&(Zr===Sf&&($n._reglType==="texture2d"||$n._reglType==="framebuffer")||Zr===Ec&&($n._reglType==="textureCube"||$n._reglType==="framebufferCube")),"invalid texture for uniform "+tr,zt.commandStr);var Yi=zt.link($n._texture||$n.color[0]._texture);It(Nr,".uniform1i(",Gn,",",Yi+".bind());"),It.exit(Yi,".unbind();")}else if(Zr===Vd||Zr===Qs||Zr===Gl){lt.optional(function(){lt.command(ss($n),"invalid matrix for uniform "+tr,zt.commandStr),lt.command(Zr===Vd&&$n.length===4||Zr===Qs&&$n.length===9||Zr===Gl&&$n.length===16,"invalid length for matrix uniform "+tr,zt.commandStr)});var Fn=zt.global.def("new Float32Array(["+Array.prototype.slice.call($n)+"])"),Hi=2;Zr===Qs?Hi=3:Zr===Gl&&(Hi=4),It(Nr,".uniformMatrix",Hi,"fv(",Gn,",false,",Fn,");")}else{switch(Zr){case fg:lt.commandType($n,"number","uniform "+tr,zt.commandStr),Wr="1f";break;case Ev:lt.command(ss($n)&&$n.length===2,"uniform "+tr,zt.commandStr),Wr="2f";break;case Zd:lt.command(ss($n)&&$n.length===3,"uniform "+tr,zt.commandStr),Wr="3f";break;case hg:lt.command(ss($n)&&$n.length===4,"uniform "+tr,zt.commandStr),Wr="4f";break;case wv:lt.commandType($n,"boolean","uniform "+tr,zt.commandStr),Wr="1i";break;case dh:lt.commandType($n,"number","uniform "+tr,zt.commandStr),Wr="1i";break;case Wl:lt.command(ss($n)&&$n.length===2,"uniform "+tr,zt.commandStr),Wr="2i";break;case Mp:lt.command(ss($n)&&$n.length===2,"uniform "+tr,zt.commandStr),Wr="2i";break;case Kn:lt.command(ss($n)&&$n.length===3,"uniform "+tr,zt.commandStr),Wr="3i";break;case Ss:lt.command(ss($n)&&$n.length===3,"uniform "+tr,zt.commandStr),Wr="3i";break;case bf:lt.command(ss($n)&&$n.length===4,"uniform "+tr,zt.commandStr),Wr="4i";break;case jh:lt.command(ss($n)&&$n.length===4,"uniform "+tr,zt.commandStr),Wr="4i";break}It(Nr,".uniform",Wr,"(",Gn,",",ss($n)?Array.prototype.slice.call($n):$n,");")}continue}else zn=xn.append(zt,It)}else{if(!on(lm))continue;zn=It.def(kr.uniforms,"[",Qt.id(tr),"]")}Zr===Sf?It("if(",zn,"&&",zn,'._reglType==="framebuffer"){',zn,"=",zn,".color[0];","}"):Zr===Ec&&It("if(",zn,"&&",zn,'._reglType==="framebufferCube"){',zn,"=",zn,".color[0];","}"),lt.optional(function(){function Yl(wf,vm){zt.assert(It,wf,'bad data or missing for uniform "'+tr+'".  '+vm)}function mg(wf){Yl("typeof "+zn+'==="'+wf+'"',"invalid type, expected "+wf)}function af(wf,vm){Yl(kr.isArrayLike+"("+zn+")&&"+zn+".length==="+wf,"invalid vector, should have length "+wf,zt.commandStr)}function dm(wf){Yl("typeof "+zn+'==="function"&&'+zn+'._reglType==="texture'+(wf===Sv?"2d":"Cube")+'"',"invalid texture type",zt.commandStr)}switch(Zr){case dh:mg("number");break;case Mp:af(2,"number");break;case Ss:af(3,"number");break;case jh:af(4,"number");break;case fg:mg("number");break;case Ev:af(2,"number");break;case Zd:af(3,"number");break;case hg:af(4,"number");break;case wv:mg("boolean");break;case Wl:af(2,"boolean");break;case Kn:af(3,"boolean");break;case bf:af(4,"boolean");break;case Vd:af(4,"number");break;case Qs:af(9,"number");break;case Gl:af(16,"number");break;case Sf:dm(Sv);break;case Ec:dm(_0);break}});var ma=1;switch(Zr){case Sf:case Ec:var ka=It.def(zn,"._texture");It(Nr,".uniform1i(",Gn,",",ka,".bind());"),It.exit(ka,".unbind();");continue;case dh:case wv:Wr="1i";break;case Mp:case Wl:Wr="2i",ma=2;break;case Ss:case Kn:Wr="3i",ma=3;break;case jh:case bf:Wr="4i",ma=4;break;case fg:Wr="1f";break;case Ev:Wr="2f",ma=2;break;case Zd:Wr="3f",ma=3;break;case hg:Wr="4f",ma=4;break;case Vd:Wr="Matrix2fv";break;case Qs:Wr="Matrix3fv";break;case Gl:Wr="Matrix4fv";break}if(It(Nr,".uniform",Wr,"(",Gn,","),Wr.charAt(0)==="M"){var Fo=Math.pow(Zr-Vd+2,2),Na=zt.global.def("new Float32Array(",Fo,")");It("false,(Array.isArray(",zn,")||",zn," instanceof Float32Array)?",zn,":(",Mt(Fo,function(Yl){return Na+"["+Yl+"]="+zn+"["+Yl+"]"}),",",Na,")")}else ma>1?It(Mt(ma,function(Yl){return zn+"["+Yl+"]"})):It(zn);It(");")}}function ha(zt,It,xr,Xt){var on=zt.shared,kr=on.gl,Nr=on.draw,Wr=Xt.draw;function dr(){var ka=Wr.elements,Fo,Na=It;return ka?((ka.contextDep&&Xt.contextDynamic||ka.propDep)&&(Na=xr),Fo=ka.append(zt,Na)):Fo=Na.def(Nr,".",po),Fo&&Na("if("+Fo+")"+kr+".bindBuffer("+o_+","+Fo+".buffer.buffer);"),Fo}function Dr(){var ka=Wr.count,Fo,Na=It;return ka?((ka.contextDep&&Xt.contextDynamic||ka.propDep)&&(Na=xr),Fo=ka.append(zt,Na),lt.optional(function(){ka.MISSING&&zt.assert(It,"false","missing vertex count"),ka.DYNAMIC&&zt.assert(Na,Fo+">=0","missing vertex count")})):(Fo=Na.def(Nr,".",Cu),lt.optional(function(){zt.assert(Na,Fo+">=0","missing vertex count")})),Fo}var tr=dr();function Zr(ka){var Fo=Wr[ka];return Fo?Fo.contextDep&&Xt.contextDynamic||Fo.propDep?Fo.append(zt,xr):Fo.append(zt,It):It.def(Nr,".",ka)}var xn=Zr(Ku),bn=Zr(bc),Gn=Dr();if(typeof Gn=="number"){if(Gn===0)return}else xr("if(",Gn,"){"),xr.exit("}");var zn,$n;ai&&(zn=Zr(td),$n=zt.instancing);var Yi=tr+".type",Fn=Wr.elements&&sl(Wr.elements);function Hi(){function ka(){xr($n,".drawElementsInstancedANGLE(",[xn,Gn,Yi,bn+"<<(("+Yi+"-"+si+")>>1)",zn],");")}function Fo(){xr($n,".drawArraysInstancedANGLE(",[xn,bn,Gn,zn],");")}tr?Fn?ka():(xr("if(",tr,"){"),ka(),xr("}else{"),Fo(),xr("}")):Fo()}function ma(){function ka(){xr(kr+".drawElements("+[xn,Gn,Yi,bn+"<<(("+Yi+"-"+si+")>>1)"]+");")}function Fo(){xr(kr+".drawArrays("+[xn,bn,Gn]+");")}tr?Fn?ka():(xr("if(",tr,"){"),ka(),xr("}else{"),Fo(),xr("}")):Fo()}ai&&(typeof zn!="number"||zn>=0)?typeof zn=="string"?(xr("if(",zn,">0){"),Hi(),xr("}else if(",zn,"<0){"),ma(),xr("}")):Hi():ma()}function xa(zt,It,xr,Xt,on){var kr=ta(),Nr=kr.proc("body",on);return lt.optional(function(){kr.commandStr=It.commandStr,kr.command=kr.link(It.commandStr)}),ai&&(kr.instancing=Nr.def(kr.shared.extensions,".angle_instanced_arrays")),zt(kr,Nr,xr,Xt),kr.compile().body}function Ao(zt,It,xr,Xt){ou(zt,It),xr.useVAO?xr.drawVAO?It(zt.shared.vao,".setVAO(",xr.drawVAO.append(zt,It),");"):It(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(It(zt.shared.vao,".setVAO(null);"),Uu(zt,It,xr,Xt.attributes,function(){return!0})),Do(zt,It,xr,Xt.uniforms,function(){return!0}),ha(zt,It,It,xr)}function Es(zt,It){var xr=zt.proc("draw",1);ou(zt,xr),Us(zt,xr,It.context),Zs(zt,xr,It.framebuffer),Js(zt,xr,It),zu(zt,xr,It.state),Ua(zt,xr,It,!1,!0);var Xt=It.shader.progVar.append(zt,xr);if(xr(zt.shared.gl,".useProgram(",Xt,".program);"),It.shader.program)Ao(zt,xr,It,It.shader.program);else{xr(zt.shared.vao,".setVAO(null);");var on=zt.global.def("{}"),kr=xr.def(Xt,".id"),Nr=xr.def(on,"[",kr,"]");xr(zt.cond(Nr).then(Nr,".call(this,a0);").else(Nr,"=",on,"[",kr,"]=",zt.link(function(Wr){return xa(Ao,zt,It,Wr,1)}),"(",Xt,");",Nr,".call(this,a0);"))}Object.keys(It.state).length>0&&xr(zt.shared.current,".dirty=true;")}function vu(zt,It,xr,Xt){zt.batchId="a1",ou(zt,It);function on(){return!0}Uu(zt,It,xr,Xt.attributes,on),Do(zt,It,xr,Xt.uniforms,on),ha(zt,It,It,xr)}function pr(zt,It,xr,Xt){ou(zt,It);var on=xr.contextDep,kr=It.def(),Nr="a0",Wr="a1",dr=It.def();zt.shared.props=dr,zt.batchId=kr;var Dr=zt.scope(),tr=zt.scope();It(Dr.entry,"for(",kr,"=0;",kr,"<",Wr,";++",kr,"){",dr,"=",Nr,"[",kr,"];",tr,"}",Dr.exit);function Zr(Yi){return Yi.contextDep&&on||Yi.propDep}function xn(Yi){return!Zr(Yi)}if(xr.needsContext&&Us(zt,tr,xr.context),xr.needsFramebuffer&&Zs(zt,tr,xr.framebuffer),zu(zt,tr,xr.state,Zr),xr.profile&&Zr(xr.profile)&&Ua(zt,tr,xr,!1,!0),Xt)xr.useVAO?xr.drawVAO?Zr(xr.drawVAO)?tr(zt.shared.vao,".setVAO(",xr.drawVAO.append(zt,tr),");"):Dr(zt.shared.vao,".setVAO(",xr.drawVAO.append(zt,Dr),");"):Dr(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(Dr(zt.shared.vao,".setVAO(null);"),Uu(zt,Dr,xr,Xt.attributes,xn),Uu(zt,tr,xr,Xt.attributes,Zr)),Do(zt,Dr,xr,Xt.uniforms,xn),Do(zt,tr,xr,Xt.uniforms,Zr),ha(zt,Dr,tr,xr);else{var bn=zt.global.def("{}"),Gn=xr.shader.progVar.append(zt,tr),zn=tr.def(Gn,".id"),$n=tr.def(bn,"[",zn,"]");tr(zt.shared.gl,".useProgram(",Gn,".program);","if(!",$n,"){",$n,"=",bn,"[",zn,"]=",zt.link(function(Yi){return xa(vu,zt,xr,Yi,2)}),"(",Gn,");}",$n,".call(this,a0[",kr,"],",kr,");")}}function yn(zt,It){var xr=zt.proc("batch",2);zt.batchId="0",ou(zt,xr);var Xt=!1,on=!0;Object.keys(It.context).forEach(function(bn){Xt=Xt||It.context[bn].propDep}),Xt||(Us(zt,xr,It.context),on=!1);var kr=It.framebuffer,Nr=!1;kr?(kr.propDep?Xt=Nr=!0:kr.contextDep&&Xt&&(Nr=!0),Nr||Zs(zt,xr,kr)):Zs(zt,xr,null),It.state.viewport&&It.state.viewport.propDep&&(Xt=!0);function Wr(bn){return bn.contextDep&&Xt||bn.propDep}Js(zt,xr,It),zu(zt,xr,It.state,function(bn){return!Wr(bn)}),(!It.profile||!Wr(It.profile))&&Ua(zt,xr,It,!1,"a1"),It.contextDep=Xt,It.needsContext=on,It.needsFramebuffer=Nr;var dr=It.shader.progVar;if(dr.contextDep&&Xt||dr.propDep)pr(zt,xr,It,null);else{var Dr=dr.append(zt,xr);if(xr(zt.shared.gl,".useProgram(",Dr,".program);"),It.shader.program)pr(zt,xr,It,It.shader.program);else{xr(zt.shared.vao,".setVAO(null);");var tr=zt.global.def("{}"),Zr=xr.def(Dr,".id"),xn=xr.def(tr,"[",Zr,"]");xr(zt.cond(xn).then(xn,".call(this,a0,a1);").else(xn,"=",tr,"[",Zr,"]=",zt.link(function(bn){return xa(pr,zt,It,bn,2)}),"(",Dr,");",xn,".call(this,a0,a1);"))}}Object.keys(It.state).length>0&&xr(zt.shared.current,".dirty=true;")}function fn(zt,It){var xr=zt.proc("scope",3);zt.batchId="a2";var Xt=zt.shared,on=Xt.current;Us(zt,xr,It.context),It.framebuffer&&It.framebuffer.append(zt,xr),Ef(Object.keys(It.state)).forEach(function(Nr){var Wr=It.state[Nr],dr=Wr.append(zt,xr);ss(dr)?dr.forEach(function(Dr,tr){xr.set(zt.next[Nr],"["+tr+"]",Dr)}):xr.set(Xt.next,"."+Nr,dr)}),Ua(zt,xr,It,!0,!0),[po,bc,Cu,td,Ku].forEach(function(Nr){var Wr=It.draw[Nr];Wr&&xr.set(Xt.draw,"."+Nr,""+Wr.append(zt,xr))}),Object.keys(It.uniforms).forEach(function(Nr){xr.set(Xt.uniforms,"["+Qt.id(Nr)+"]",It.uniforms[Nr].append(zt,xr))}),Object.keys(It.attributes).forEach(function(Nr){var Wr=It.attributes[Nr].append(zt,xr),dr=zt.scopeAttrib(Nr);Object.keys(new Jr).forEach(function(Dr){xr.set(dr,"."+Dr,Wr[Dr])})}),It.scopeVAO&&xr.set(Xt.vao,".targetVAO",It.scopeVAO.append(zt,xr));function kr(Nr){var Wr=It.shader[Nr];Wr&&xr.set(Xt.shader,"."+Nr,Wr.append(zt,xr))}kr(Yu),kr(Vl),Object.keys(It.state).length>0&&(xr(on,".dirty=true;"),xr.exit(on,".dirty=true;")),xr("a1(",zt.shared.context,",a0,",zt.batchId,");")}function Pi(zt){if(!(typeof zt!="object"||ss(zt))){for(var It=Object.keys(zt),xr=0;xr<It.length;++xr)if(wr.isDynamic(zt[It[xr]]))return!0;return!1}}function Ya(zt,It,xr){var Xt=It.static[xr];if(!Xt||!Pi(Xt))return;var on=zt.global,kr=Object.keys(Xt),Nr=!1,Wr=!1,dr=!1,Dr=zt.global.def("{}");kr.forEach(function(Zr){var xn=Xt[Zr];if(wr.isDynamic(xn)){typeof xn=="function"&&(xn=Xt[Zr]=wr.unbox(xn));var bn=xl(xn,null);Nr=Nr||bn.thisDep,dr=dr||bn.propDep,Wr=Wr||bn.contextDep}else{switch(on(Dr,".",Zr,"="),typeof xn){case"number":on(xn);break;case"string":on('"',xn,'"');break;case"object":Array.isArray(xn)&&on("[",xn.join(),"]");break;default:on(zt.link(xn));break}on(";")}});function tr(Zr,xn){kr.forEach(function(bn){var Gn=Xt[bn];if(wr.isDynamic(Gn)){var zn=Zr.invoke(xn,Gn);xn(Dr,".",bn,"=",zn,";")}})}It.dynamic[xr]=new wr.DynamicVariable(Fi,{thisDep:Nr,contextDep:Wr,propDep:dr,ref:Dr,append:tr}),delete It.static[xr]}function Go(zt,It,xr,Xt,on){var kr=ta();kr.stats=kr.link(on),Object.keys(It.static).forEach(function(Wr){Ya(kr,It,Wr)}),bv.forEach(function(Wr){Ya(kr,zt,Wr)});var Nr=du(zt,It,xr,Xt,kr);return Es(kr,Nr),fn(kr,Nr),yn(kr,Nr),kr.compile()}return{next:Bi,current:Kr,procs:function(){var zt=ta(),It=zt.proc("poll"),xr=zt.proc("refresh"),Xt=zt.block();It(Xt),xr(Xt);var on=zt.shared,kr=on.gl,Nr=on.next,Wr=on.current;Xt(Wr,".dirty=false;"),Zs(zt,It),Zs(zt,xr,null,!0);var dr;ai&&(dr=zt.link(ai)),Sr.oes_vertex_array_object&&xr(zt.link(Sr.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Dr=0;Dr<pn.maxAttributes;++Dr){var tr=xr.def(on.attributes,"[",Dr,"]"),Zr=zt.cond(tr,".buffer");Zr.then(kr,".enableVertexAttribArray(",Dr,");",kr,".bindBuffer(",Sc,",",tr,".buffer.buffer);",kr,".vertexAttribPointer(",Dr,",",tr,".size,",tr,".type,",tr,".normalized,",tr,".stride,",tr,".offset);").else(kr,".disableVertexAttribArray(",Dr,");",kr,".vertexAttrib4f(",Dr,",",tr,".x,",tr,".y,",tr,".z,",tr,".w);",tr,".buffer=null;"),xr(Zr),ai&&xr(dr,".vertexAttribDivisorANGLE(",Dr,",",tr,".divisor);")}return xr(zt.shared.vao,".currentVAO=null;",zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"),Object.keys(Ri).forEach(function(xn){var bn=Ri[xn],Gn=Xt.def(Nr,".",xn),zn=zt.block();zn("if(",Gn,"){",kr,".enable(",bn,")}else{",kr,".disable(",bn,")}",Wr,".",xn,"=",Gn,";"),xr(zn),It("if(",Gn,"!==",Wr,".",xn,"){",zn,"}")}),Object.keys(Vn).forEach(function(xn){var bn=Vn[xn],Gn=Kr[xn],zn,$n,Yi=zt.block();if(Yi(kr,".",bn,"("),ss(Gn)){var Fn=Gn.length;zn=zt.global.def(Nr,".",xn),$n=zt.global.def(Wr,".",xn),Yi(Mt(Fn,function(Hi){return zn+"["+Hi+"]"}),");",Mt(Fn,function(Hi){return $n+"["+Hi+"]="+zn+"["+Hi+"];"}).join("")),It("if(",Mt(Fn,function(Hi){return zn+"["+Hi+"]!=="+$n+"["+Hi+"]"}).join("||"),"){",Yi,"}")}else zn=Xt.def(Nr,".",xn),$n=Xt.def(Wr,".",xn),Yi(zn,");",Wr,".",xn,"=",zn,";"),It("if(",zn,"!==",$n,"){",Yi,"}");xr(Yi)}),zt.compile()}(),compile:Go}}function cm(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Wd=34918,Av=34919,Tv=35007,fm=function(nt,Qt){if(!Qt.ext_disjoint_timer_query)return null;var Sr=[];function pn(){return Sr.pop()||Qt.ext_disjoint_timer_query.createQueryEXT()}function kn(ai){Sr.push(ai)}var vn=[];function en(ai){var Ti=pn();Qt.ext_disjoint_timer_query.beginQueryEXT(Tv,Ti),vn.push(Ti),Rn(vn.length-1,vn.length,ai)}function ri(){Qt.ext_disjoint_timer_query.endQueryEXT(Tv)}function Hn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var di=[];function ii(){return di.pop()||new Hn}function ui(ai){di.push(ai)}var Ei=[];function Rn(ai,Ti,Kr){var Bi=ii();Bi.startQueryIndex=ai,Bi.endQueryIndex=Ti,Bi.sum=0,Bi.stats=Kr,Ei.push(Bi)}var mi=[],Jr=[];function En(){var ai,Ti,Kr=vn.length;if(Kr!==0){Jr.length=Math.max(Jr.length,Kr+1),mi.length=Math.max(mi.length,Kr+1),mi[0]=0,Jr[0]=0;var Bi=0;for(ai=0,Ti=0;Ti<vn.length;++Ti){var qn=vn[Ti];Qt.ext_disjoint_timer_query.getQueryObjectEXT(qn,Av)?(Bi+=Qt.ext_disjoint_timer_query.getQueryObjectEXT(qn,Wd),kn(qn)):vn[ai++]=qn,mi[Ti+1]=Bi,Jr[Ti+1]=ai}for(vn.length=ai,ai=0,Ti=0;Ti<Ei.length;++Ti){var Ri=Ei[Ti],Vn=Ri.startQueryIndex,_i=Ri.endQueryIndex;Ri.sum+=mi[_i]-mi[Vn];var na=Jr[Vn],La=Jr[_i];La===na?(Ri.stats.gpuTime+=Ri.sum/1e6,ui(Ri)):(Ri.startQueryIndex=na,Ri.endQueryIndex=La,Ei[ai++]=Ri)}Ei.length=ai}}return{beginQuery:en,endQuery:ri,pushScopeStats:Rn,update:En,getNumPendingQueries:function(){return vn.length},clear:function(){Sr.push.apply(Sr,vn);for(var ai=0;ai<Sr.length;ai++)Qt.ext_disjoint_timer_query.deleteQueryEXT(Sr[ai]);vn.length=0,Sr.length=0},restore:function(){vn.length=0,Sr.length=0}}},hm=16384,Ps=256,S0=1024,pm=34962,Ip="webglcontextlost",Gd="webglcontextrestored",gg=1,$d=2,E0=3;function Pp(nt,Qt){for(var Sr=0;Sr<nt.length;++Sr)if(nt[Sr]===Qt)return Sr;return-1}function w0(nt){var Qt=jt(nt);if(!Qt)return null;var Sr=Qt.gl,pn=Sr.getContextAttributes(),kn=Sr.isContextLost(),vn=wt(Sr,Qt);if(!vn)return null;var en=le(),ri=cm(),Hn=vn.extensions,di=fm(Sr,Hn),ii=zr(),ui=Sr.drawingBufferWidth,Ei=Sr.drawingBufferHeight,Rn={tick:0,time:0,viewportWidth:ui,viewportHeight:Ei,framebufferWidth:ui,framebufferHeight:Ei,drawingBufferWidth:ui,drawingBufferHeight:Ei,pixelRatio:Qt.pixelRatio},mi={},Jr={elements:null,primitive:4,count:-1,offset:0,instances:-1},En=Su(Sr,Hn),ai=ec(Sr,ri,Qt,Kr),Ti=bt(Sr,Hn,En,ri,ai);function Kr(ha){return Ti.destroyBuffer(ha)}var Bi=Gp(Sr,Hn,ai,ri),qn=hr(Sr,en,ri,Qt),Ri=ic(Sr,Hn,En,function(){na.procs.poll()},Rn,ri,Qt),Vn=ol(Sr,Hn,En,ri,Qt),_i=ee(Sr,Hn,En,Ri,Vn,ri),na=$h(Sr,en,Hn,En,ai,Bi,Ri,_i,mi,Ti,qn,Jr,Rn,di,Qt),La=tn(Sr,_i,na.procs.poll,Rn,pn,Hn,En),xi=na.next,ti=Sr.canvas,Ln=[],ta=[],io=[],Li=[Qt.onDestroy],Qa=null;function Oa(){if(Ln.length===0){di&&di.update(),Qa=null;return}Qa=Br.next(Oa),zu();for(var ha=Ln.length-1;ha>=0;--ha){var xa=Ln[ha];xa&&xa(Rn,null,0)}Sr.flush(),di&&di.update()}function _a(){!Qa&&Ln.length>0&&(Qa=Br.next(Oa))}function So(){Qa&&(Br.cancel(Oa),Qa=null)}function pu(ha){ha.preventDefault(),kn=!0,So(),ta.forEach(function(xa){xa()})}function Nu(ha){Sr.getError(),kn=!1,vn.restore(),qn.restore(),ai.restore(),Ri.restore(),Vn.restore(),_i.restore(),Ti.restore(),di&&di.restore(),na.procs.refresh(),_a(),io.forEach(function(xa){xa()})}ti&&(ti.addEventListener(Ip,pu,!1),ti.addEventListener(Gd,Nu,!1));function vo(){Ln.length=0,So(),ti&&(ti.removeEventListener(Ip,pu),ti.removeEventListener(Gd,Nu)),qn.clear(),_i.clear(),Vn.clear(),Ri.clear(),Bi.clear(),ai.clear(),Ti.clear(),di&&di.clear(),Li.forEach(function(ha){ha()})}function hs(ha){lt(!!ha,"invalid args to regl({...})"),lt.type(ha,"object","invalid args to regl({...})");function xa(on){var kr=k({},on);delete kr.uniforms,delete kr.attributes,delete kr.context,delete kr.vao,"stencil"in kr&&kr.stencil.op&&(kr.stencil.opBack=kr.stencil.opFront=kr.stencil.op,delete kr.stencil.op);function Nr(Wr){if(Wr in kr){var dr=kr[Wr];delete kr[Wr],Object.keys(dr).forEach(function(Dr){kr[Wr+"."+Dr]=dr[Dr]})}}return Nr("blend"),Nr("depth"),Nr("cull"),Nr("stencil"),Nr("polygonOffset"),Nr("scissor"),Nr("sample"),"vao"in on&&(kr.vao=on.vao),kr}function Ao(on){var kr={},Nr={};return Object.keys(on).forEach(function(Wr){var dr=on[Wr];wr.isDynamic(dr)?Nr[Wr]=wr.unbox(dr,Wr):kr[Wr]=dr}),{dynamic:Nr,static:kr}}var Es=Ao(ha.context||{}),vu=Ao(ha.uniforms||{}),pr=Ao(ha.attributes||{}),yn=Ao(xa(ha)),fn={gpuTime:0,cpuTime:0,count:0},Pi=na.compile(yn,pr,vu,Es,fn),Ya=Pi.draw,Go=Pi.batch,zt=Pi.scope,It=[];function xr(on){for(;It.length<on;)It.push(null);return It}function Xt(on,kr){var Nr;if(kn&&lt.raise("context lost"),typeof on=="function")return zt.call(this,null,on,0);if(typeof kr=="function")if(typeof on=="number")for(Nr=0;Nr<on;++Nr)zt.call(this,null,kr,Nr);else if(Array.isArray(on))for(Nr=0;Nr<on.length;++Nr)zt.call(this,on[Nr],kr,Nr);else return zt.call(this,on,kr,0);else if(typeof on=="number"){if(on>0)return Go.call(this,xr(on|0),on|0)}else if(Array.isArray(on)){if(on.length)return Go.call(this,on,on.length)}else return Ya.call(this,on)}return k(Xt,{stats:fn})}var Vo=_i.setFBO=hs({framebuffer:wr.define.call(null,gg,"framebuffer")});function du(ha,xa){var Ao=0;na.procs.poll();var Es=xa.color;Es&&(Sr.clearColor(+Es[0]||0,+Es[1]||0,+Es[2]||0,+Es[3]||0),Ao|=hm),"depth"in xa&&(Sr.clearDepth(+xa.depth),Ao|=Ps),"stencil"in xa&&(Sr.clearStencil(xa.stencil|0),Ao|=S0),lt(!!Ao,"called regl.clear with no buffer specified"),Sr.clear(Ao)}function Us(ha){if(lt(typeof ha=="object"&&ha,"regl.clear() takes an object as input"),"framebuffer"in ha)if(ha.framebuffer&&ha.framebuffer_reglType==="framebufferCube")for(var xa=0;xa<6;++xa)Vo(k({framebuffer:ha.framebuffer.faces[xa]},ha),du);else Vo(ha,du);else du(null,ha)}function Zs(ha){lt.type(ha,"function","regl.frame() callback must be a function"),Ln.push(ha);function xa(){var Ao=Pp(Ln,ha);lt(Ao>=0,"cannot cancel a frame twice");function Es(){var vu=Pp(Ln,Es);Ln[vu]=Ln[Ln.length-1],Ln.length-=1,Ln.length<=0&&So()}Ln[Ao]=Es}return _a(),{cancel:xa}}function Js(){var ha=xi.viewport,xa=xi.scissor_box;ha[0]=ha[1]=xa[0]=xa[1]=0,Rn.viewportWidth=Rn.framebufferWidth=Rn.drawingBufferWidth=ha[2]=xa[2]=Sr.drawingBufferWidth,Rn.viewportHeight=Rn.framebufferHeight=Rn.drawingBufferHeight=ha[3]=xa[3]=Sr.drawingBufferHeight}function zu(){Rn.tick+=1,Rn.time=Ua(),Js(),na.procs.poll()}function ou(){Js(),na.procs.refresh(),di&&di.update()}function Ua(){return(zr()-ii)/1e3}ou();function Uu(ha,xa){lt.type(xa,"function","listener callback must be a function");var Ao;switch(ha){case"frame":return Zs(xa);case"lost":Ao=ta;break;case"restore":Ao=io;break;case"destroy":Ao=Li;break;default:lt.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ao.push(xa),{cancel:function(){for(var Es=0;Es<Ao.length;++Es)if(Ao[Es]===xa){Ao[Es]=Ao[Ao.length-1],Ao.pop();return}}}}var Do=k(hs,{clear:Us,prop:wr.define.bind(null,gg),context:wr.define.bind(null,$d),this:wr.define.bind(null,E0),draw:hs({}),buffer:function(ha){return ai.create(ha,pm,!1,!1)},elements:function(ha){return Bi.create(ha,!1)},texture:Ri.create2D,cube:Ri.createCube,renderbuffer:Vn.create,framebuffer:_i.create,framebufferCube:_i.createCube,vao:Ti.createVAO,attributes:pn,frame:Zs,on:Uu,limits:En,hasExtension:function(ha){return En.extensions.indexOf(ha.toLowerCase())>=0},read:La,destroy:vo,_gl:Sr,_refresh:ou,poll:function(){zu(),di&&di.update()},now:Ua,stats:ri});return Qt.onDone(null,Do),Do}return w0})},3876:function(ft,N){"use strict";var k;k={value:!0},k=k=N.Tf=N.Bc=N.jp=N.fL=N.O6=N.rC=void 0,N.rC="l7plot-legend l7plot-legend__category",N.O6="l7plot-legend__title",N.fL="l7plot-legend__category-list",N.jp="l7plot-legend__list-item",N.Bc="l7plot-legend__category-marker",N.Tf="l7plot-legend__category-value",k='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <ul class="`).concat(N.fL,`"></ul>
</div>`),k='<li class="'.concat(N.jp,`" data-index={index}>
  <span class="`).concat(N.Bc,`" style="background:{color}"></span>
  <span class="`).concat(N.Tf,`">{value}</span>
</li>`)},56992:function(ft,N){"use strict";var k;k={value:!0},k=k=N.VI=N.bl=N.el=N.I8=N.O6=N.rC=void 0,N.rC="l7plot-legend l7plot-legend__continue",N.O6="l7plot-legend__title",N.I8="l7plot-legend__ribbon-container",N.el="l7plot-legend__ribbon",N.bl="l7plot-legend__gradient-bar",N.VI="l7plot-legend__value-range",k='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <div class="`).concat(N.I8,`"></div>
</div>`),k='<div class="'.concat(N.el,`">
  <span class="`).concat(N.VI,`">{min}</span>
  <div class="`).concat(N.bl,`" style="background-image: {backgroundImage}"></div>
  <span class="`).concat(N.VI,`">{max}</span>
</div>`)},77972:function(ft,N){"use strict";var k;k={value:!0},k=k=N.Tf=N.bX=N.jp=N.fL=N.O6=N.rC=void 0,N.rC="l7plot-tooltip",N.O6="l7plot-tooltip__title",N.fL="l7plot-tooltip__list",N.jp="l7plot-tooltip__list-item",N.bX="l7plot-tooltip__name",N.Tf="l7plot-tooltip__value",k='<div class="'.concat(N.rC,`">
  <div class="`).concat(N.O6,`"></div>
  <ul class="`).concat(N.fL,`"></ul>
</div>`),k='<li class="'.concat(N.jp,`" data-index={index}>
  <span class="`).concat(N.bX,`">{name}</span>
  <span class="`).concat(N.Tf,`">{value}</span>
</li>`)},31506:function(ft,N,k){"use strict";k.d(N,{Dg:function(){return te},lh:function(){return j},m$:function(){return b},vs:function(){return Q},zu:function(){return G}});var W=k(35600),K=k(31437);function b(pe,fe,J){var M=[0,0,0,0,0,0,0,0,0];return W.vc(M,J),W.Jp(pe,M,fe)}function G(pe,fe,J){var M=[0,0,0,0,0,0,0,0,0];return W.Us(M,J),W.Jp(pe,M,fe)}function j(pe,fe,J){var M=[0,0,0,0,0,0,0,0,0];return W.xJ(M,J),W.Jp(pe,M,fe)}function q(pe,fe,J){return W.Jp(pe,J,fe)}function Q(pe,fe){for(var J=pe?[].concat(pe):[1,0,0,0,1,0,0,0,1],M=0,E=fe.length;M<E;M++){var ge=fe[M];switch(ge[0]){case"t":b(J,J,[ge[1],ge[2]]);break;case"s":j(J,J,[ge[1],ge[2]]);break;case"r":G(J,J,ge[1]);break;case"m":q(J,J,ge[1]);break;default:break}}return J}function ie(pe,fe){return pe[0]*fe[1]-fe[0]*pe[1]}function te(pe,fe,J){var M=K.EU(pe,fe),E=ie(pe,fe)>=0;return J?E?Math.PI*2-M:M:E?M:Math.PI*2-M}function Ce(pe,fe,J){return J?(pe[0]=fe[1],pe[1]=-1*fe[0]):(pe[0]=-1*fe[1],pe[1]=fe[0]),pe}},39499:function(ft,N,k){"use strict";k.d(N,{e9:function(){return te},Wq:function(){return Xr},tr:function(){return ge},wb:function(){return De},zx:function(){return Xe}});var W=k(21030),K=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,b=/[^\s\,]+/ig;function G(Nt){var Kt=Nt||[];if((0,W.kJ)(Kt))return Kt;if((0,W.HD)(Kt))return Kt=Kt.match(K),(0,W.S6)(Kt,function(or,kt){if(or=or.match(b),or[0].length>1){var Jt=or[0].charAt(0);or.splice(1,0,or[0].substr(1)),or[0]=Jt}(0,W.S6)(or,function(Er,wr){isNaN(Er)||(or[wr]=+Er)}),Kt[kt]=or}),Kt}var j=G,q=k(31437);function Q(Nt,Kt,or,kt){var Jt=[],Er=!!kt,wr,Br,zr,le,H,re,Ie;if(Er){zr=kt[0],le=kt[1];for(var Ye=0,Ct=Nt.length;Ye<Ct;Ye+=1){var ar=Nt[Ye];zr=q.VV([0,0],zr,ar),le=q.Fp([0,0],le,ar)}}for(var Ye=0,jt=Nt.length;Ye<jt;Ye+=1){var ar=Nt[Ye];if(Ye===0&&!or)Ie=ar;else if(Ye===jt-1&&!or)re=ar,Jt.push(Ie),Jt.push(re);else{var wt=[Ye?Ye-1:jt-1,Ye-1][or?0:1];wr=Nt[wt],Br=Nt[or?(Ye+1)%jt:Ye+1];var Mt=[0,0];Mt=q.lu(Mt,Br,wr),Mt=q.bA(Mt,Mt,Kt);var ve=q.TE(ar,wr),he=q.TE(ar,Br),Re=ve+he;Re!==0&&(ve/=Re,he/=Re);var tt=q.bA([0,0],Mt,-ve),St=q.bA([0,0],Mt,he);re=q.IH([0,0],ar,tt),H=q.IH([0,0],ar,St),H=q.VV([0,0],H,q.Fp([0,0],Br,ar)),H=q.Fp([0,0],H,q.VV([0,0],Br,ar)),tt=q.lu([0,0],H,ar),tt=q.bA([0,0],tt,-ve/he),re=q.IH([0,0],ar,tt),re=q.VV([0,0],re,q.Fp([0,0],wr,ar)),re=q.Fp([0,0],re,q.VV([0,0],wr,ar)),St=q.lu([0,0],ar,re),St=q.bA([0,0],St,he/ve),H=q.IH([0,0],ar,St),Er&&(re=q.Fp([0,0],re,zr),re=q.VV([0,0],re,le),H=q.Fp([0,0],H,zr),H=q.VV([0,0],H,le)),Jt.push(Ie),Jt.push(re),Ie=H}}return or&&Jt.push(Jt.shift()),Jt}function ie(Nt,Kt,or){Kt===void 0&&(Kt=!1),or===void 0&&(or=[[0,0],[1,1]]);for(var kt=!!Kt,Jt=[],Er=0,wr=Nt.length;Er<wr;Er+=2)Jt.push([Nt[Er],Nt[Er+1]]);for(var Br=Q(Jt,.4,kt,or),zr=Jt.length,le=[],H,re,Ie,Er=0;Er<zr-1;Er+=1)H=Br[Er*2],re=Br[Er*2+1],Ie=Jt[Er+1],le.push(["C",H[0],H[1],re[0],re[1],Ie[0],Ie[1]]);return kt&&(H=Br[zr],re=Br[zr+1],Ie=Jt[0],le.push(["C",H[0],H[1],re[0],re[1],Ie[0],Ie[1]])),le}var te=ie;function Ce(Nt,Kt,or){var kt=null,Jt=or;return Kt<Jt&&(Jt=Kt,kt="add"),Nt<Jt&&(Jt=Nt,kt="del"),{type:kt,min:Jt}}var pe=function(Nt,Kt){var or=Nt.length,kt=Kt.length,Jt,Er,wr=0;if(or===0||kt===0)return null;for(var Br=[],zr=0;zr<=or;zr++)Br[zr]=[],Br[zr][0]={min:zr};for(var le=0;le<=kt;le++)Br[0][le]={min:le};for(var zr=1;zr<=or;zr++){Jt=Nt[zr-1];for(var le=1;le<=kt;le++){Er=Kt[le-1],isEqual(Jt,Er)?wr=0:wr=1;var H=Br[zr-1][le].min+1,re=Br[zr][le-1].min+1,Ie=Br[zr-1][le-1].min+wr;Br[zr][le]=Ce(H,re,Ie)}}return Br};function fe(Nt,Kt){var or=pe(Nt,Kt),kt=Nt.length,Jt=Kt.length,Er=[],wr=1,Br=1;if(or[kt][Jt]!==kt){for(var zr=1;zr<=kt;zr++){var le=or[zr][zr].min;Br=zr;for(var H=wr;H<=Jt;H++)or[zr][H].min<le&&(le=or[zr][H].min,Br=H);wr=Br,or[zr][wr].type&&Er.push({index:zr-1,type:or[zr][wr].type})}for(var zr=Er.length-1;zr>=0;zr--)wr=Er[zr].index,Er[zr].type==="add"?Nt.splice(wr,0,[].concat(Nt[wr])):Nt.splice(wr,1)}if(kt=Nt.length,kt<Jt)for(var zr=0;zr<Jt-kt;zr++)Nt[kt-1][0]==="z"||Nt[kt-1][0]==="Z"?Nt.splice(kt-2,0,Nt[kt-2]):Nt.push(Nt[kt-1]);return Nt}var J=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,M=new RegExp("([a-z])["+J+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+J+"]*,?["+J+"]*)+)","ig"),E=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+J+"]*,?["+J+"]*","ig");function ge(Nt){if(!Nt)return null;if((0,W.kJ)(Nt))return Nt;var Kt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},or=[];return String(Nt).replace(M,function(kt,Jt,Er){var wr=[],Br=Jt.toLowerCase();if(Er.replace(E,function(zr,le){le&&wr.push(+le)}),Br==="m"&&wr.length>2&&(or.push([Jt].concat(wr.splice(0,2))),Br="l",Jt=Jt==="m"?"l":"L"),Br==="o"&&wr.length===1&&or.push([Jt,wr[0]]),Br==="r")or.push([Jt].concat(wr));else for(;wr.length>=Kt[Br]&&(or.push([Jt].concat(wr.splice(0,Kt[Br]))),!!Kt[Br]););return""}),or}var Se=/[a-z]/;function ze(Nt,Kt){return[Kt[0]+(Kt[0]-Nt[0]),Kt[1]+(Kt[1]-Nt[1])]}function De(Nt){var Kt=ge(Nt);if(!Kt||!Kt.length)return[["M",0,0]];for(var or=!1,kt=0;kt<Kt.length;kt++){var Jt=Kt[kt][0];if(Se.test(Jt)||["V","H","T","S"].indexOf(Jt)>=0){or=!0;break}}if(!or)return Kt;var Er=[],wr=0,Br=0,zr=0,le=0,H=0,re,Ie,Ye=Kt[0];(Ye[0]==="M"||Ye[0]==="m")&&(wr=+Ye[1],Br=+Ye[2],zr=wr,le=Br,H++,Er[0]=["M",wr,Br]);for(var kt=H,Ct=Kt.length;kt<Ct;kt++){var ar=Kt[kt],jt=Er[kt-1],wt=[],Jt=ar[0],Mt=Jt.toUpperCase();if(Jt!==Mt)switch(wt[0]=Mt,Mt){case"A":wt[1]=ar[1],wt[2]=ar[2],wt[3]=ar[3],wt[4]=ar[4],wt[5]=ar[5],wt[6]=+ar[6]+wr,wt[7]=+ar[7]+Br;break;case"V":wt[1]=+ar[1]+Br;break;case"H":wt[1]=+ar[1]+wr;break;case"M":zr=+ar[1]+wr,le=+ar[2]+Br,wt[1]=zr,wt[2]=le;break;default:for(var ve=1,he=ar.length;ve<he;ve++)wt[ve]=+ar[ve]+(ve%2?wr:Br)}else wt=Kt[kt];switch(Mt){case"Z":wr=+zr,Br=+le;break;case"H":wr=wt[1],wt=["L",wr,Br];break;case"V":Br=wt[1],wt=["L",wr,Br];break;case"T":wr=wt[1],Br=wt[2];var Re=ze([jt[1],jt[2]],[jt[3],jt[4]]);wt=["Q",Re[0],Re[1],wr,Br];break;case"S":wr=wt[wt.length-2],Br=wt[wt.length-1];var tt=jt.length,St=ze([jt[tt-4],jt[tt-3]],[jt[tt-2],jt[tt-1]]);wt=["C",St[0],St[1],wt[1],wt[2],wr,Br];break;case"M":zr=wt[wt.length-2],le=wt[wt.length-1];break;default:wr=wt[wt.length-2],Br=wt[wt.length-1]}Er.push(wt)}return Er}var Ue=Math.PI*2,at=function(Nt,Kt,or,kt,Jt,Er,wr){var Br=Nt.x,zr=Nt.y;Br*=Kt,zr*=or;var le=kt*Br-Jt*zr,H=Jt*Br+kt*zr;return{x:le+Er,y:H+wr}},Je=function(Nt,Kt){var or=Kt===1.5707963267948966?.551915024494:Kt===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(Kt/4),kt=Math.cos(Nt),Jt=Math.sin(Nt),Er=Math.cos(Nt+Kt),wr=Math.sin(Nt+Kt);return[{x:kt-Jt*or,y:Jt+kt*or},{x:Er+wr*or,y:wr-Er*or},{x:Er,y:wr}]},Ze=function(Nt,Kt,or,kt){var Jt=Nt*kt-Kt*or<0?-1:1,Er=Nt*or+Kt*kt;return Er>1&&(Er=1),Er<-1&&(Er=-1),Jt*Math.acos(Er)},xe=function(Nt,Kt,or,kt,Jt,Er,wr,Br,zr,le,H,re){var Ie=Math.pow(Jt,2),Ye=Math.pow(Er,2),Ct=Math.pow(H,2),ar=Math.pow(re,2),jt=Ie*Ye-Ie*ar-Ye*Ct;jt<0&&(jt=0),jt/=Ie*ar+Ye*Ct,jt=Math.sqrt(jt)*(wr===Br?-1:1);var wt=jt*Jt/Er*re,Mt=jt*-Er/Jt*H,ve=le*wt-zr*Mt+(Nt+or)/2,he=zr*wt+le*Mt+(Kt+kt)/2,Re=(H-wt)/Jt,tt=(re-Mt)/Er,St=(-H-wt)/Jt,Gt=(-re-Mt)/Er,gr=Ze(1,0,Re,tt),At=Ze(Re,tt,St,Gt);return Br===0&&At>0&&(At-=Ue),Br===1&&At<0&&(At+=Ue),[ve,he,gr,At]},_e=function(Nt){var Kt=Nt.px,or=Nt.py,kt=Nt.cx,Jt=Nt.cy,Er=Nt.rx,wr=Nt.ry,Br=Nt.xAxisRotation,zr=Br===void 0?0:Br,le=Nt.largeArcFlag,H=le===void 0?0:le,re=Nt.sweepFlag,Ie=re===void 0?0:re,Ye=[];if(Er===0||wr===0)return[{x1:0,y1:0,x2:0,y2:0,x:kt,y:Jt}];var Ct=Math.sin(zr*Ue/360),ar=Math.cos(zr*Ue/360),jt=ar*(Kt-kt)/2+Ct*(or-Jt)/2,wt=-Ct*(Kt-kt)/2+ar*(or-Jt)/2;if(jt===0&&wt===0)return[{x1:0,y1:0,x2:0,y2:0,x:kt,y:Jt}];Er=Math.abs(Er),wr=Math.abs(wr);var Mt=Math.pow(jt,2)/Math.pow(Er,2)+Math.pow(wt,2)/Math.pow(wr,2);Mt>1&&(Er*=Math.sqrt(Mt),wr*=Math.sqrt(Mt));var ve=xe(Kt,or,kt,Jt,Er,wr,H,Ie,Ct,ar,jt,wt),he=ve[0],Re=ve[1],tt=ve[2],St=ve[3],Gt=Math.abs(St)/(Ue/4);Math.abs(1-Gt)<1e-7&&(Gt=1);var gr=Math.max(Math.ceil(Gt),1);St/=gr;for(var At=0;At<gr;At++)Ye.push(Je(tt,St)),tt+=St;return Ye.map(function(st){var Pt=at(st[0],Er,wr,ar,Ct,he,Re),yr=Pt.x,Fr=Pt.y,Ft=at(st[1],Er,wr,ar,Ct,he,Re),Mn=Ft.x,ei=Ft.y,ni=at(st[2],Er,wr,ar,Ct,he,Re),un=ni.x,Xn=ni.y;return{x1:yr,y1:Fr,x2:Mn,y2:ei,x:un,y:Xn}})};function He(Nt,Kt,or,kt,Jt,Er,wr,Br,zr){var le=_e({px:Nt,py:Kt,cx:Br,cy:zr,rx:or,ry:kt,xAxisRotation:Jt,largeArcFlag:Er,sweepFlag:wr});return le.reduce(function(H,re){var Ie=re.x1,Ye=re.y1,Ct=re.x2,ar=re.y2,jt=re.x,wt=re.y;return H.push(Ie,Ye,Ct,ar,jt,wt),H},[])}function Ke(Nt,Kt){"TQ".indexOf(Nt[0])<0&&(Kt.qx=null,Kt.qy=null);var or=Nt.slice(1),kt=or[0],Jt=or[1];switch(Nt[0]){case"M":return Kt.x=kt,Kt.y=Jt,Nt;case"A":return["C"].concat(arcToCubic.apply(0,[Kt.x1,Kt.y1].concat(Nt.slice(1))));case"Q":return Kt.qx=kt,Kt.qy=Jt,["C"].concat(quadToCubic.apply(0,[Kt.x1,Kt.y1].concat(Nt.slice(1))));case"L":return["C"].concat(lineToCubic(Kt.x1,Kt.y1,Nt[1],Nt[2]));case"H":return["C"].concat(lineToCubic(Kt.x1,Kt.y1,Nt[1],Kt.y1));case"V":return["C"].concat(lineToCubic(Kt.x1,Kt.y1,Kt.x1,Nt[1]));case"Z":return["C"].concat(lineToCubic(Kt.x1,Kt.y1,Kt.x,Kt.y));default:}return Nt}function Et(Nt,Kt){Kt===void 0&&(Kt=!1);for(var or=path2Absolute(Nt),kt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},Jt=[],Er="",wr=or.length,Br,zr,le=[],H=0;H<wr;H+=1)or[H]&&(Er=or[H][0]),Jt[H]=Er,or[H]=segmentToCubic(or[H],kt),ke(or,Jt,H),wr=or.length,Er==="Z"&&le.push(H),Br=or[H],zr=Br.length,kt.x1=+Br[zr-2],kt.y1=+Br[zr-1],kt.x2=+Br[zr-4]||kt.x1,kt.y2=+Br[zr-3]||kt.y1;return Kt?[or,le]:or}function ke(Nt,Kt,or){if(Nt[or].length>7){Nt[or].shift();for(var kt=Nt[or],Jt=or;kt.length;)Kt[or]="A",Nt.splice(Jt+=1,0,["C"].concat(kt.splice(0,6)));Nt.splice(or,1)}}var qe=function(Nt,Kt,or,kt,Jt){var Er=-3*Kt+9*or-9*kt+3*Jt,wr=Nt*Er+6*Kt-12*or+6*kt;return Nt*wr-3*Kt+3*or},ne=function(Nt,Kt,or,kt,Jt,Er,wr,Br,zr){zr===null&&(zr=1),zr=zr>1?1:zr<0?0:zr;for(var le=zr/2,H=12,re=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ie=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Ye=0,Ct=0;Ct<H;Ct++){var ar=le*re[Ct]+le,jt=qe(ar,Nt,or,Jt,wr),wt=qe(ar,Kt,kt,Er,Br),Mt=jt*jt+wt*wt;Ye+=Ie[Ct]*Math.sqrt(Mt)}return le*Ye},Ge=function(Nt,Kt,or,kt,Jt,Er,wr,Br){for(var zr=[],le=[[],[]],H,re,Ie,Ye,Ct=0;Ct<2;++Ct){if(Ct===0?(re=6*Nt-12*or+6*Jt,H=-3*Nt+9*or-9*Jt+3*wr,Ie=3*or-3*Nt):(re=6*Kt-12*kt+6*Er,H=-3*Kt+9*kt-9*Er+3*Br,Ie=3*kt-3*Kt),Math.abs(H)<1e-12){if(Math.abs(re)<1e-12)continue;Ye=-Ie/re,Ye>0&&Ye<1&&zr.push(Ye);continue}var ar=re*re-4*Ie*H,jt=Math.sqrt(ar);if(!(ar<0)){var wt=(-re+jt)/(2*H);wt>0&&wt<1&&zr.push(wt);var Mt=(-re-jt)/(2*H);Mt>0&&Mt<1&&zr.push(Mt)}}for(var ve=zr.length,he=ve,Re;ve--;)Ye=zr[ve],Re=1-Ye,le[0][ve]=Re*Re*Re*Nt+3*Re*Re*Ye*or+3*Re*Ye*Ye*Jt+Ye*Ye*Ye*wr,le[1][ve]=Re*Re*Re*Kt+3*Re*Re*Ye*kt+3*Re*Ye*Ye*Er+Ye*Ye*Ye*Br;return le[0][he]=Nt,le[1][he]=Kt,le[0][he+1]=wr,le[1][he+1]=Br,le[0].length=le[1].length=he+2,{min:{x:Math.min.apply(0,le[0]),y:Math.min.apply(0,le[1])},max:{x:Math.max.apply(0,le[0]),y:Math.max.apply(0,le[1])}}},oe=function(Nt,Kt,or,kt,Jt,Er,wr,Br){if(!(Math.max(Nt,or)<Math.min(Jt,wr)||Math.min(Nt,or)>Math.max(Jt,wr)||Math.max(Kt,kt)<Math.min(Er,Br)||Math.min(Kt,kt)>Math.max(Er,Br))){var zr=(Nt*kt-Kt*or)*(Jt-wr)-(Nt-or)*(Jt*Br-Er*wr),le=(Nt*kt-Kt*or)*(Er-Br)-(Kt-kt)*(Jt*Br-Er*wr),H=(Nt-or)*(Er-Br)-(Kt-kt)*(Jt-wr);if(H){var re=zr/H,Ie=le/H,Ye=+re.toFixed(2),Ct=+Ie.toFixed(2);if(!(Ye<+Math.min(Nt,or).toFixed(2)||Ye>+Math.max(Nt,or).toFixed(2)||Ye<+Math.min(Jt,wr).toFixed(2)||Ye>+Math.max(Jt,wr).toFixed(2)||Ct<+Math.min(Kt,kt).toFixed(2)||Ct>+Math.max(Kt,kt).toFixed(2)||Ct<+Math.min(Er,Br).toFixed(2)||Ct>+Math.max(Er,Br).toFixed(2)))return{x:re,y:Ie}}}},Fe=function(Nt,Kt,or){return Kt>=Nt.x&&Kt<=Nt.x+Nt.width&&or>=Nt.y&&or<=Nt.y+Nt.height},ut=function(Nt,Kt,or,kt){return Nt===null&&(Nt=Kt=or=kt=0),Kt===null&&(Kt=Nt.y,or=Nt.width,kt=Nt.height,Nt=Nt.x),{x:Nt,y:Kt,width:or,w:or,height:kt,h:kt,x2:Nt+or,y2:Kt+kt,cx:Nt+or/2,cy:Kt+kt/2,r1:Math.min(or,kt)/2,r2:Math.max(or,kt)/2,r0:Math.sqrt(or*or+kt*kt)/2,path:rectPath(Nt,Kt,or,kt),vb:[Nt,Kt,or,kt].join(" ")}},Ae=function(Nt,Kt){return Nt=ut(Nt),Kt=ut(Kt),Fe(Kt,Nt.x,Nt.y)||Fe(Kt,Nt.x2,Nt.y)||Fe(Kt,Nt.x,Nt.y2)||Fe(Kt,Nt.x2,Nt.y2)||Fe(Nt,Kt.x,Kt.y)||Fe(Nt,Kt.x2,Kt.y)||Fe(Nt,Kt.x,Kt.y2)||Fe(Nt,Kt.x2,Kt.y2)||(Nt.x<Kt.x2&&Nt.x>Kt.x||Kt.x<Nt.x2&&Kt.x>Nt.x)&&(Nt.y<Kt.y2&&Nt.y>Kt.y||Kt.y<Nt.y2&&Kt.y>Nt.y)},Le=function(Nt,Kt,or,kt,Jt,Er,wr,Br){isArray(Nt)||(Nt=[Nt,Kt,or,kt,Jt,Er,wr,Br]);var zr=Ge.apply(null,Nt);return ut(zr.min.x,zr.min.y,zr.max.x-zr.min.x,zr.max.y-zr.min.y)},rt=function(Nt,Kt,or,kt,Jt,Er,wr,Br,zr){var le=1-zr,H=Math.pow(le,3),re=Math.pow(le,2),Ie=zr*zr,Ye=Ie*zr,Ct=H*Nt+re*3*zr*or+le*3*zr*zr*Jt+Ye*wr,ar=H*Kt+re*3*zr*kt+le*3*zr*zr*Er+Ye*Br,jt=Nt+2*zr*(or-Nt)+Ie*(Jt-2*or+Nt),wt=Kt+2*zr*(kt-Kt)+Ie*(Er-2*kt+Kt),Mt=or+2*zr*(Jt-or)+Ie*(wr-2*Jt+or),ve=kt+2*zr*(Er-kt)+Ie*(Br-2*Er+kt),he=le*Nt+zr*or,Re=le*Kt+zr*kt,tt=le*Jt+zr*wr,St=le*Er+zr*Br,Gt=90-Math.atan2(jt-Mt,wt-ve)*180/Math.PI;return{x:Ct,y:ar,m:{x:jt,y:wt},n:{x:Mt,y:ve},start:{x:he,y:Re},end:{x:tt,y:St},alpha:Gt}},ye=function(Nt,Kt,or){var kt=Le(Nt),Jt=Le(Kt);if(!Ae(kt,Jt))return or?0:[];for(var Er=ne.apply(0,Nt),wr=ne.apply(0,Kt),Br=~~(Er/8),zr=~~(wr/8),le=[],H=[],re={},Ie=or?0:[],Ye=0;Ye<Br+1;Ye++){var Ct=rt.apply(0,Nt.concat(Ye/Br));le.push({x:Ct.x,y:Ct.y,t:Ye/Br})}for(var Ye=0;Ye<zr+1;Ye++){var Ct=rt.apply(0,Kt.concat(Ye/zr));H.push({x:Ct.x,y:Ct.y,t:Ye/zr})}for(var Ye=0;Ye<Br;Ye++)for(var ar=0;ar<zr;ar++){var jt=le[Ye],wt=le[Ye+1],Mt=H[ar],ve=H[ar+1],he=Math.abs(wt.x-jt.x)<.001?"y":"x",Re=Math.abs(ve.x-Mt.x)<.001?"y":"x",tt=oe(jt.x,jt.y,wt.x,wt.y,Mt.x,Mt.y,ve.x,ve.y);if(tt){if(re[tt.x.toFixed(4)]===tt.y.toFixed(4))continue;re[tt.x.toFixed(4)]=tt.y.toFixed(4);var St=jt.t+Math.abs((tt[he]-jt[he])/(wt[he]-jt[he]))*(wt.t-jt.t),Gt=Mt.t+Math.abs((tt[Re]-Mt[Re])/(ve[Re]-Mt[Re]))*(ve.t-Mt.t);St>=0&&St<=1&&Gt>=0&&Gt<=1&&(or?Ie++:Ie.push({x:tt.x,y:tt.y,t1:St,t2:Gt}))}}return Ie},me=function(Nt,Kt,or){Nt=path2Curve(Nt),Kt=path2Curve(Kt);for(var kt,Jt,Er,wr,Br,zr,le,H,re,Ie,Ye=or?0:[],Ct=0,ar=Nt.length;Ct<ar;Ct++){var jt=Nt[Ct];if(jt[0]==="M")kt=Br=jt[1],Jt=zr=jt[2];else{jt[0]==="C"?(re=[kt,Jt].concat(jt.slice(1)),kt=re[6],Jt=re[7]):(re=[kt,Jt,kt,Jt,Br,zr,Br,zr],kt=Br,Jt=zr);for(var wt=0,Mt=Kt.length;wt<Mt;wt++){var ve=Kt[wt];if(ve[0]==="M")Er=le=ve[1],wr=H=ve[2];else{ve[0]==="C"?(Ie=[Er,wr].concat(ve.slice(1)),Er=Ie[6],wr=Ie[7]):(Ie=[Er,wr,Er,wr,le,H,le,H],Er=le,wr=H);var he=ye(re,Ie,or);if(or)Ye+=he;else{for(var Re=0,tt=he.length;Re<tt;Re++)he[Re].segment1=Ct,he[Re].segment2=wt,he[Re].bez1=re,he[Re].bez2=Ie;Ye=Ye.concat(he)}}}}}return Ye};function We(Nt,Kt){return me(Nt,Kt)}function Ve(Nt){return Math.sqrt(Nt[0]*Nt[0]+Nt[1]*Nt[1])}function dt(Nt,Kt){return Ve(Nt)*Ve(Kt)?(Nt[0]*Kt[0]+Nt[1]*Kt[1])/(Ve(Nt)*Ve(Kt)):1}function Ht(Nt,Kt){return(Nt[0]*Kt[1]<Nt[1]*Kt[0]?-1:1)*Math.acos(dt(Nt,Kt))}function et(Nt,Kt){return Nt[0]===Kt[0]&&Nt[1]===Kt[1]}function $e(Nt,Kt){var or=Kt[1],kt=Kt[2],Jt=(0,W.wQ)((0,W.c$)(Kt[3]),Math.PI*2),Er=Kt[4],wr=Kt[5],Br=Nt[0],zr=Nt[1],le=Kt[6],H=Kt[7],re=Math.cos(Jt)*(Br-le)/2+Math.sin(Jt)*(zr-H)/2,Ie=-1*Math.sin(Jt)*(Br-le)/2+Math.cos(Jt)*(zr-H)/2,Ye=re*re/(or*or)+Ie*Ie/(kt*kt);Ye>1&&(or*=Math.sqrt(Ye),kt*=Math.sqrt(Ye));var Ct=or*or*(Ie*Ie)+kt*kt*(re*re),ar=Ct?Math.sqrt((or*or*(kt*kt)-Ct)/Ct):1;Er===wr&&(ar*=-1),isNaN(ar)&&(ar=0);var jt=kt?ar*or*Ie/kt:0,wt=or?ar*-kt*re/or:0,Mt=(Br+le)/2+Math.cos(Jt)*jt-Math.sin(Jt)*wt,ve=(zr+H)/2+Math.sin(Jt)*jt+Math.cos(Jt)*wt,he=[(re-jt)/or,(Ie-wt)/kt],Re=[(-1*re-jt)/or,(-1*Ie-wt)/kt],tt=Ht([1,0],he),St=Ht(he,Re);return dt(he,Re)<=-1&&(St=Math.PI),dt(he,Re)>=1&&(St=0),wr===0&&St>0&&(St=St-2*Math.PI),wr===1&&St<0&&(St=St+2*Math.PI),{cx:Mt,cy:ve,rx:et(Nt,[le,H])?0:or,ry:et(Nt,[le,H])?0:kt,startAngle:tt,endAngle:tt+St,xRotation:Jt,arcFlag:Er,sweepFlag:wr}}function Te(Nt,Kt){return[Kt[0]+(Kt[0]-Nt[0]),Kt[1]+(Kt[1]-Nt[1])]}function Xe(Nt){Nt=j(Nt);for(var Kt=[],or=null,kt=null,Jt=null,Er=0,wr=Nt.length,Br=0;Br<wr;Br++){var zr=Nt[Br];kt=Nt[Br+1];var le=zr[0],H={command:le,prePoint:or,params:zr,startTangent:null,endTangent:null};switch(le){case"M":Jt=[zr[1],zr[2]],Er=Br;break;case"A":var re=$e(or,zr);H.arcParams=re;break;default:break}if(le==="Z")or=Jt,kt=Nt[Er+1];else{var Ie=zr.length;or=[zr[Ie-2],zr[Ie-1]]}kt&&kt[0]==="Z"&&(kt=Nt[Er],Kt[Er]&&(Kt[Er].prePoint=or)),H.currentPoint=or,Kt[Er]&&et(or,Kt[Er].currentPoint)&&(Kt[Er].prePoint=H.prePoint);var Ye=kt?[kt[kt.length-2],kt[kt.length-1]]:null;H.nextPoint=Ye;var Ct=H.prePoint;if(["L","H","V"].includes(le))H.startTangent=[Ct[0]-or[0],Ct[1]-or[1]],H.endTangent=[or[0]-Ct[0],or[1]-Ct[1]];else if(le==="Q"){var ar=[zr[1],zr[2]];H.startTangent=[Ct[0]-ar[0],Ct[1]-ar[1]],H.endTangent=[or[0]-ar[0],or[1]-ar[1]]}else if(le==="T"){var jt=Kt[Br-1],ar=Te(jt.currentPoint,Ct);jt.command==="Q"?(H.command="Q",H.startTangent=[Ct[0]-ar[0],Ct[1]-ar[1]],H.endTangent=[or[0]-ar[0],or[1]-ar[1]]):(H.command="TL",H.startTangent=[Ct[0]-or[0],Ct[1]-or[1]],H.endTangent=[or[0]-Ct[0],or[1]-Ct[1]])}else if(le==="C"){var wt=[zr[1],zr[2]],Mt=[zr[3],zr[4]];H.startTangent=[Ct[0]-wt[0],Ct[1]-wt[1]],H.endTangent=[or[0]-Mt[0],or[1]-Mt[1]],H.startTangent[0]===0&&H.startTangent[1]===0&&(H.startTangent=[wt[0]-Mt[0],wt[1]-Mt[1]]),H.endTangent[0]===0&&H.endTangent[1]===0&&(H.endTangent=[Mt[0]-wt[0],Mt[1]-wt[1]])}else if(le==="S"){var jt=Kt[Br-1],wt=Te(jt.currentPoint,Ct),Mt=[zr[1],zr[2]];jt.command==="C"?(H.command="C",H.startTangent=[Ct[0]-wt[0],Ct[1]-wt[1]],H.endTangent=[or[0]-Mt[0],or[1]-Mt[1]]):(H.command="SQ",H.startTangent=[Ct[0]-Mt[0],Ct[1]-Mt[1]],H.endTangent=[or[0]-Mt[0],or[1]-Mt[1]])}else if(le==="A"){var ve=.001,he=H.arcParams||{},Re=he.cx,tt=Re===void 0?0:Re,St=he.cy,Gt=St===void 0?0:St,gr=he.rx,At=gr===void 0?0:gr,st=he.ry,Pt=st===void 0?0:st,yr=he.sweepFlag,Fr=yr===void 0?0:yr,Ft=he.startAngle,Mn=Ft===void 0?0:Ft,ei=he.endAngle,ni=ei===void 0?0:ei;Fr===0&&(ve*=-1);var un=At*Math.cos(Mn-ve)+tt,Xn=Pt*Math.sin(Mn-ve)+Gt;H.startTangent=[un-Jt[0],Xn-Jt[1]];var Wn=At*Math.cos(Mn+ni+ve)+tt,Jn=Pt*Math.sin(Mn+ni-ve)+Gt;H.endTangent=[Ct[0]-Wn,Ct[1]-Jn]}Kt.push(H)}return Kt}var pt=1e-6;function Oe(Nt){return Math.abs(Nt)<pt?0:Nt<0?-1:1}function Be(Nt,Kt,or){return(or[0]-Nt[0])*(Kt[1]-Nt[1])===(Kt[0]-Nt[0])*(or[1]-Nt[1])&&Math.min(Nt[0],Kt[0])<=or[0]&&or[0]<=Math.max(Nt[0],Kt[0])&&Math.min(Nt[1],Kt[1])<=or[1]&&or[1]<=Math.max(Nt[1],Kt[1])}function vt(Nt,Kt,or){var kt=!1,Jt=Nt.length;if(Jt<=2)return!1;for(var Er=0;Er<Jt;Er++){var wr=Nt[Er],Br=Nt[(Er+1)%Jt];if(Be(wr,Br,[Kt,or]))return!0;Oe(wr[1]-or)>0!=Oe(Br[1]-or)>0&&Oe(Kt-(or-wr[1])*(wr[0]-Br[0])/(wr[1]-Br[1])-wr[0])<0&&(kt=!kt)}return kt}var Rt=function(Nt,Kt,or){return Nt>=Kt&&Nt<=or};function rr(Nt,Kt,or,kt){var Jt=.001,Er={x:or.x-Nt.x,y:or.y-Nt.y},wr={x:Kt.x-Nt.x,y:Kt.y-Nt.y},Br={x:kt.x-or.x,y:kt.y-or.y},zr=wr.x*Br.y-wr.y*Br.x,le=zr*zr,H=wr.x*wr.x+wr.y*wr.y,re=Br.x*Br.x+Br.y*Br.y,Ie=null;if(le>Jt*H*re){var Ye=(Er.x*Br.y-Er.y*Br.x)/zr,Ct=(Er.x*wr.y-Er.y*wr.x)/zr;Rt(Ye,0,1)&&Rt(Ct,0,1)&&(Ie={x:Nt.x+Ye*wr.x,y:Nt.y+Ye*wr.y})}return Ie}function br(Nt){for(var Kt=[],or=Nt.length,kt=0;kt<or-1;kt++){var Jt=Nt[kt],Er=Nt[kt+1];Kt.push({from:{x:Jt[0],y:Jt[1]},to:{x:Er[0],y:Er[1]}})}if(Kt.length>1){var wr=Nt[0],Br=Nt[or-1];Kt.push({from:{x:Br[0],y:Br[1]},to:{x:wr[0],y:wr[1]}})}return Kt}function lt(Nt,Kt){var or=!1;return(0,W.S6)(Nt,function(kt){if(rr(kt.from,kt.to,Kt.from,Kt.to))return or=!0,!1}),or}function an(Nt){var Kt=Nt.map(function(kt){return kt[0]}),or=Nt.map(function(kt){return kt[1]});return{minX:Math.min.apply(null,Kt),maxX:Math.max.apply(null,Kt),minY:Math.min.apply(null,or),maxY:Math.max.apply(null,or)}}function $r(Nt,Kt){return!(Kt.minX>Nt.maxX||Kt.maxX<Nt.minX||Kt.minY>Nt.maxY||Kt.maxY<Nt.minY)}function Xr(Nt,Kt){if(Nt.length<2||Kt.length<2)return!1;var or=an(Nt),kt=an(Kt);if(!$r(or,kt))return!1;var Jt=!1;if((0,W.S6)(Kt,function(zr){if(vt(Nt,zr[0],zr[1]))return Jt=!0,!1}),Jt||((0,W.S6)(Nt,function(zr){if(vt(Kt,zr[0],zr[1]))return Jt=!0,!1}),Jt))return!0;var Er=br(Nt),wr=br(Kt),Br=!1;return(0,W.S6)(wr,function(zr){if(lt(Er,zr))return Br=!0,!1}),Br}},21030:function(ft,N,k){"use strict";k.d(N,{Ct:function(){return Lu},f0:function(){return Fl},uZ:function(){return ve},VS:function(){return Qf},d9:function(){return ru},FX:function(){return G},Ds:function(){return fc},b$:function(){return Mc},e5:function(){return ie},S6:function(){return ze},yW:function(){return Er},hX:function(){return q},sE:function(){return Et},cx:function(){return qe},Wx:function(){return Ge},ri:function(){return Re},xH:function(){return Fe},U5:function(){return Io},U2:function(){return nu},Lo:function(){return cp},rx:function(){return me},ru:function(){return Ie},vM:function(){return H},Ms:function(){return re},wH:function(){return Si},YM:function(){return $r},q9:function(){return G},cq:function(){return Dl},kJ:function(){return E},jn:function(){return os},J_:function(){return Oo},kK:function(){return ju},xb:function(){return Ic},Xy:function(){return Zi},mf:function(){return fe},BD:function(){return Je},UM:function(){return M},Ft:function(){return er},hj:function(){return St},vQ:function(){return ei},Kn:function(){return ge},PO:function(){return He},HD:function(){return Rt},P9:function(){return pe},o8:function(){return Co},XP:function(){return Ue},Z$:function(){return Xr},vl:function(){return cr},UI:function(){return hc},Q8:function(){return Ks},Fp:function(){return Le},UT:function(){return Jn},HP:function(){return yo},VV:function(){return rt},F:function(){return sa},CD:function(){return Fl},wQ:function(){return ga},ZT:function(){return Uo},CE:function(){return Bl},ei:function(){return pc},u4:function(){return Oe},Od:function(){return vt},U7:function(){return hf},t8:function(){return hu},dp:function(){return Od},G:function(){return Br},MR:function(){return br},ng:function(){return qt},P2:function(){return Oc},qo:function(){return Kc},c$:function(){return co},BB:function(){return ho},jj:function(){return lt},EL:function(){return Gp},jC:function(){return rn},VO:function(){return Wa},I:function(){return an}});var W=function(Tt){return Tt!==null&&typeof Tt!="function"&&isFinite(Tt.length)},K=W,b=function(Tt,mr){return K(Tt)?Tt.indexOf(mr)>-1:!1},G=b,j=function(Tt,mr){if(!K(Tt))return Tt;for(var Hr=[],Qr=0;Qr<Tt.length;Qr++){var On=Tt[Qr];mr(On,Qr)&&Hr.push(On)}return Hr},q=j,Q=function(Tt,mr){return mr===void 0&&(mr=[]),q(Tt,function(Hr){return!G(mr,Hr)})},ie=Q,te={}.toString,Ce=function(Tt,mr){return te.call(Tt)==="[object "+mr+"]"},pe=Ce,fe=function(Tt){return pe(Tt,"Function")},J=function(Tt){return Tt==null},M=J,E=function(Tt){return Array.isArray?Array.isArray(Tt):pe(Tt,"Array")},ge=function(Tt){var mr=typeof Tt;return Tt!==null&&mr==="object"||mr==="function"};function Se(Tt,mr){if(Tt){var Hr;if(E(Tt))for(var Qr=0,On=Tt.length;Qr<On&&(Hr=mr(Tt[Qr],Qr),Hr!==!1);Qr++);else if(ge(Tt)){for(var gi in Tt)if(Tt.hasOwnProperty(gi)&&(Hr=mr(Tt[gi],gi),Hr===!1))break}}}var ze=Se,De=Object.keys?function(Tt){return Object.keys(Tt)}:function(Tt){var mr=[];return ze(Tt,function(Hr,Qr){fe(Tt)&&Qr==="prototype"||mr.push(Qr)}),mr},Ue=De;function at(Tt,mr){var Hr=Ue(mr),Qr=Hr.length;if(M(Tt))return!Qr;for(var On=0;On<Qr;On+=1){var gi=Hr[On];if(mr[gi]!==Tt[gi]||!(gi in Tt))return!1}return!0}var Je=at,Ze=function(Tt){return typeof Tt=="object"&&Tt!==null},xe=Ze,_e=function(Tt){if(!xe(Tt)||!pe(Tt,"Object"))return!1;if(Object.getPrototypeOf(Tt)===null)return!0;for(var mr=Tt;Object.getPrototypeOf(mr)!==null;)mr=Object.getPrototypeOf(mr);return Object.getPrototypeOf(Tt)===mr},He=_e;function Ke(Tt,mr){if(!E(Tt))return null;var Hr;if(fe(mr)&&(Hr=mr),He(mr)&&(Hr=function(On){return Je(On,mr)}),Hr){for(var Qr=0;Qr<Tt.length;Qr+=1)if(Hr(Tt[Qr]))return Tt[Qr]}return null}var Et=Ke;function ke(Tt,mr,Hr){Hr===void 0&&(Hr=0);for(var Qr=Hr;Qr<Tt.length;Qr++)if(mr(Tt[Qr],Qr))return Qr;return-1}var qe=ke,ne=function(Tt,mr){for(var Hr=null,Qr=0;Qr<Tt.length;Qr++){var On=Tt[Qr],gi=On[mr];if(!M(gi)){E(gi)?Hr=gi[0]:Hr=gi;break}}return Hr},Ge=ne,oe=function(Tt){if(!E(Tt))return[];for(var mr=[],Hr=0;Hr<Tt.length;Hr++)mr=mr.concat(Tt[Hr]);return mr},Fe=oe,ut=function(Tt,mr){if(mr===void 0&&(mr=[]),!isArray(Tt))mr.push(Tt);else for(var Hr=0;Hr<Tt.length;Hr+=1)ut(Tt[Hr],mr);return mr},Ae=null,Le=function(Tt){if(E(Tt))return Tt.reduce(function(mr,Hr){return Math.max(mr,Hr)},Tt[0])},rt=function(Tt){if(E(Tt))return Tt.reduce(function(mr,Hr){return Math.min(mr,Hr)},Tt[0])},ye=function(Tt){var mr=Tt.filter(function(ua){return!isNaN(ua)});if(!mr.length)return{min:0,max:0};if(E(Tt[0])){for(var Hr=[],Qr=0;Qr<Tt.length;Qr++)Hr=Hr.concat(Tt[Qr]);mr=Hr}var On=Le(mr),gi=rt(mr);return{min:gi,max:On}},me=ye,We=Array.prototype,Ve=We.splice,dt=We.indexOf,Ht=function(Tt){for(var mr=[],Hr=1;Hr<arguments.length;Hr++)mr[Hr-1]=arguments[Hr];for(var Qr=0;Qr<mr.length;Qr++)for(var On=mr[Qr],gi=-1;(gi=dt.call(Tt,On))>-1;)Ve.call(Tt,gi,1);return Tt},et=null,$e=Array.prototype.splice,Te=function(mr,Hr){if(!K(mr))return[];for(var Qr=mr?Hr.length:0,On=Qr-1;Qr--;){var gi=void 0,ua=Hr[Qr];(Qr===On||ua!==gi)&&(gi=ua,$e.call(mr,ua,1))}return mr},Xe=Te,pt=function(Tt,mr,Hr){if(!E(Tt)&&!He(Tt))return Tt;var Qr=Hr;return ze(Tt,function(On,gi){Qr=mr(Qr,On,gi)}),Qr},Oe=pt,Be=function(Tt,mr){var Hr=[];if(!K(Tt))return Hr;for(var Qr=-1,On=[],gi=Tt.length;++Qr<gi;){var ua=Tt[Qr];mr(ua,Qr,Tt)&&(Hr.push(ua),On.push(Qr))}return Xe(Tt,On),Hr},vt=Be,Rt=function(Tt){return pe(Tt,"String")};function rr(Tt,mr){var Hr;if(fe(mr))Hr=function(On,gi){return mr(On)-mr(gi)};else{var Qr=[];Rt(mr)?Qr.push(mr):E(mr)&&(Qr=mr),Hr=function(On,gi){for(var ua=0;ua<Qr.length;ua+=1){var _o=Qr[ua];if(On[_o]>gi[_o])return 1;if(On[_o]<gi[_o])return-1}return 0}}return Tt.sort(Hr),Tt}var br=rr;function lt(Tt,mr){mr===void 0&&(mr=new Map);var Hr=[];if(Array.isArray(Tt))for(var Qr=0,On=Tt.length;Qr<On;Qr++){var gi=Tt[Qr];mr.has(gi)||(Hr.push(gi),mr.set(gi,!0))}return Hr}var an=function(Tt,mr){for(var Hr=[],Qr={},On=0;On<Tt.length;On++){var gi=Tt[On],ua=gi[mr];if(!M(ua)){E(ua)||(ua=[ua]);for(var _o=0;_o<ua.length;_o++){var Fs=ua[_o];Qr[Fs]||(Hr.push(Fs),Qr[Fs]=!0)}}}return Hr};function $r(Tt){if(K(Tt))return Tt[0]}function Xr(Tt){if(K(Tt)){var mr=Tt;return mr[mr.length-1]}}function Nt(Tt,mr){return isArray(Tt)||isString(Tt)?Tt[0]===mr:!1}var Kt=null;function or(Tt,mr){return isArray(Tt)||isString(Tt)?Tt[Tt.length-1]===mr:!1}var kt=null,Jt=function(Tt,mr){for(var Hr=0;Hr<Tt.length;Hr++)if(!mr(Tt[Hr],Hr))return!1;return!0},Er=Jt,wr=function(Tt,mr){for(var Hr=0;Hr<Tt.length;Hr++)if(mr(Tt[Hr],Hr))return!0;return!1},Br=wr,zr=Object.prototype.hasOwnProperty;function le(Tt,mr){if(!mr||!E(Tt))return{};for(var Hr={},Qr=fe(mr)?mr:function(_o){return _o[mr]},On,gi=0;gi<Tt.length;gi++){var ua=Tt[gi];On=Qr(ua),zr.call(Hr,On)?Hr[On].push(ua):Hr[On]=[ua]}return Hr}var H=le;function re(Tt,mr){if(!mr)return{0:Tt};if(!fe(mr)){var Hr=E(mr)?mr:mr.replace(/\s+/g,"").split("*");mr=function(Qr){for(var On="_",gi=0,ua=Hr.length;gi<ua;gi++)On+=Qr[Hr[gi]]&&Qr[Hr[gi]].toString();return On}}return H(Tt,mr)}var Ie=function(Tt,mr){if(!mr)return[Tt];var Hr=re(Tt,mr),Qr=[];for(var On in Hr)Qr.push(Hr[On]);return Qr},Ye={};function Ct(Tt){var mr=Ye[Tt];if(!mr){for(var Hr=Tt.toString(16),Qr=Hr.length;Qr<6;Qr++)Hr="0"+Hr;mr="#"+Hr,Ye[Tt]=mr}return mr}var ar=null;function jt(Tt){var mr=0,Hr=0,Qr=0,On=0;return isArray(Tt)?Tt.length===1?mr=Hr=Qr=On=Tt[0]:Tt.length===2?(mr=Qr=Tt[0],Hr=On=Tt[1]):Tt.length===3?(mr=Tt[0],Hr=On=Tt[1],Qr=Tt[2]):(mr=Tt[0],Hr=Tt[1],Qr=Tt[2],On=Tt[3]):mr=Hr=Qr=On=Tt,{r1:mr,r2:Hr,r3:Qr,r4:On}}var wt=null,Mt=function(Tt,mr,Hr){return Tt<mr?mr:Tt>Hr?Hr:Tt},ve=Mt,he=function(Tt,mr){var Hr=mr.toString(),Qr=Hr.indexOf(".");if(Qr===-1)return Math.round(Tt);var On=Hr.substr(Qr+1).length;return On>20&&(On=20),parseFloat(Tt.toFixed(On))},Re=he,tt=function(Tt){return pe(Tt,"Number")},St=tt,Gt=function(Tt){return isNumber(Tt)&&Tt%1!==0},gr=null,At=function(Tt){return isNumber(Tt)&&Tt%2===0},st=null,Pt=Number.isInteger?Number.isInteger:function(Tt){return St(Tt)&&Tt%1===0},yr=null,Fr=function(Tt){return isNumber(Tt)&&Tt<0},Ft=null,Mn=1e-5;function ei(Tt,mr,Hr){return Hr===void 0&&(Hr=Mn),Math.abs(Tt-mr)<Hr}var ni=function(Tt){return isNumber(Tt)&&Tt%2!==0},un=null,Xn=function(Tt){return isNumber(Tt)&&Tt>0},Wn=null,Jn=function(Tt,mr){if(E(Tt)){for(var Hr,Qr=-1/0,On=0;On<Tt.length;On++){var gi=Tt[On],ua=fe(mr)?mr(gi):gi[mr];ua>Qr&&(Hr=gi,Qr=ua)}return Hr}},sa=function(Tt,mr){if(E(Tt)){for(var Hr,Qr=1/0,On=0;On<Tt.length;On++){var gi=Tt[On],ua=fe(mr)?mr(gi):gi[mr];ua<Qr&&(Hr=gi,Qr=ua)}return Hr}},vi=function(Tt,mr){return(Tt%mr+mr)%mr},ga=vi,Ra=180/Math.PI,ya=function(Tt){return Ra*Tt},ja=null,ba=Math.PI/180,gs=function(Tt){return ba*Tt},co=gs,Io=ze,oi=function(Tt,mr){return Tt.hasOwnProperty(mr)},Si=oi,Qi=Object.values?function(Tt){return Object.values(Tt)}:function(Tt){var mr=[];return ze(Tt,function(Hr,Qr){fe(Tt)&&Qr==="prototype"||mr.push(Hr)}),mr},Wa=Qi,ms=function(Tt,mr){return contains(values(Tt),mr)},ho=function(Tt){return M(Tt)?"":Tt.toString()},Po=function(Tt){return ho(Tt).toLowerCase()},cr=Po;function Ot(Tt,mr){return!Tt||!mr?Tt:Tt.replace(/\\?\{([^{}]+)\}/g,function(Hr,Qr){return Hr.charAt(0)==="\\"?Hr.slice(1):mr[Qr]===void 0?"":mr[Qr]})}var qt=Ot,Mr=function(Tt){var mr=ho(Tt);return mr.charAt(0).toUpperCase()+mr.substring(1)},rn=Mr,Pn={}.toString,Bn=function(Tt){return Pn.call(Tt).replace(/^\[object /,"").replace(/]$/,"")},Cn=Bn,Mi=function(Tt){return isType(Tt,"Arguments")},Xi=null,Wo=function(Tt){return pe(Tt,"Boolean")},os=Wo,Su=function(Tt){return pe(Tt,"Date")},Oo=Su,ro=function(Tt){return isType(Tt,"Error")},cu=null;function Qo(Tt){return isNumber(Tt)&&isFinite(Tt)}var Zt=function(Tt){return Tt===null},er=Zt,Ur=Object.prototype,An=function(Tt){var mr=Tt&&Tt.constructor,Hr=typeof mr=="function"&&mr.prototype||Ur;return Tt===Hr},fi=An,Vi=function(Tt){return isType(Tt,"RegExp")},fo=null,Ws=function(Tt){return Tt===void 0},Co=Ws,ko=function(Tt){return Tt instanceof Element||Tt instanceof HTMLDocument},ju=ko;function hf(Tt){var mr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Hr){return setTimeout(Hr,16)};return mr(Tt)}function Qf(Tt){var mr=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;mr(Tt)}var Jf=function(){for(var Tt=[],mr=0;mr<arguments.length;mr++)Tt[mr]=arguments[mr];for(var Hr=Tt[0],Qr=1;Qr<Tt.length;Qr++){var On=Tt[Qr];isFunction(On)&&(On=On.prototype),mix(Hr.prototype,On)}},fu=null,cc=function(Tt){if(typeof Tt!="object"||Tt===null)return Tt;var mr;if(E(Tt)){mr=[];for(var Hr=0,Qr=Tt.length;Hr<Qr;Hr++)typeof Tt[Hr]=="object"&&Tt[Hr]!=null?mr[Hr]=cc(Tt[Hr]):mr[Hr]=Tt[Hr]}else{mr={};for(var On in Tt)typeof Tt[On]=="object"&&Tt[On]!=null?mr[On]=cc(Tt[On]):mr[On]=Tt[On]}return mr},ru=cc;function Al(Tt,mr,Hr){var Qr;return function(){var On=this,gi=arguments,ua=function(){Qr=null,Hr||Tt.apply(On,gi)},_o=Hr&&!Qr;clearTimeout(Qr),Qr=setTimeout(ua,mr),_o&&Tt.apply(On,gi)}}var fc=Al,yo=function(Tt,mr){if(!fe(Tt))throw new TypeError("Expected a function");var Hr=function(){for(var Qr=[],On=0;On<arguments.length;On++)Qr[On]=arguments[On];var gi=mr?mr.apply(this,Qr):Qr[0],ua=Hr.cache;if(ua.has(gi))return ua.get(gi);var _o=Tt.apply(this,Qr);return ua.set(gi,_o),_o};return Hr.cache=new Map,Hr},Jl=5;function As(Tt,mr,Hr,Qr){Hr=Hr||0,Qr=Qr||Jl;for(var On in mr)if(mr.hasOwnProperty(On)){var gi=mr[On];gi!==null&&He(gi)?(He(Tt[On])||(Tt[On]={}),Hr<Qr?As(Tt[On],gi,Hr+1,Qr):Tt[On]=mr[On]):E(gi)?(Tt[On]=[],Tt[On]=Tt[On].concat(gi)):gi!==void 0&&(Tt[On]=gi)}}var Ts=function(Tt){for(var mr=[],Hr=1;Hr<arguments.length;Hr++)mr[Hr-1]=arguments[Hr];for(var Qr=0;Qr<mr.length;Qr+=1)As(Tt,mr[Qr]);return Tt},Mc=Ts,Rc=function(Tt,mr,Hr,Qr){isFunction(mr)||(Hr=mr,mr=Tt,Tt=function(){});var On=Object.create?function(ua,_o){return Object.create(ua,{constructor:{value:_o}})}:function(ua,_o){function Fs(){}Fs.prototype=ua;var vl=new Fs;return vl.constructor=_o,vl},gi=On(mr.prototype,Tt);return Tt.prototype=mix(gi,Tt.prototype),Tt.superclass=On(mr.prototype,mr),mix(gi,Hr),mix(Tt,Qr),Tt},If=null,Ll=function(Tt,mr){if(!K(Tt))return-1;var Hr=Array.prototype.indexOf;if(Hr)return Hr.call(Tt,mr);for(var Qr=-1,On=0;On<Tt.length;On++)if(Tt[On]===mr){Qr=On;break}return Qr},Dl=Ll,ec=Object.prototype.hasOwnProperty;function ku(Tt){if(M(Tt))return!0;if(K(Tt))return!Tt.length;var mr=Cn(Tt);if(mr==="Map"||mr==="Set")return!Tt.size;if(fi(Tt))return!Object.keys(Tt).length;for(var Hr in Tt)if(ec.call(Tt,Hr))return!1;return!0}var Ic=ku,In=function(Tt,mr){if(Tt===mr)return!0;if(!Tt||!mr||Rt(Tt)||Rt(mr))return!1;if(K(Tt)||K(mr)){if(Tt.length!==mr.length)return!1;for(var Hr=!0,Qr=0;Qr<Tt.length&&(Hr=In(Tt[Qr],mr[Qr]),!!Hr);Qr++);return Hr}if(xe(Tt)||xe(mr)){var On=Object.keys(Tt),gi=Object.keys(mr);if(On.length!==gi.length)return!1;for(var Hr=!0,Qr=0;Qr<On.length&&(Hr=In(Tt[On[Qr]],mr[On[Qr]]),!!Hr);Qr++);return Hr}return!1},Zi=In,_v=function(Tt,mr,Hr){return isFunction(Hr)?!!Hr(Tt,mr):isEqual(Tt,mr)},eh=function(Tt,mr){if(!K(Tt))return Tt;for(var Hr=[],Qr=0;Qr<Tt.length;Qr++){var On=Tt[Qr];Hr.push(mr(On,Qr))}return Hr},hc=eh,Wp=function(Tt){return Tt},Ks=function(Tt,mr){mr===void 0&&(mr=Wp);var Hr={};return ge(Tt)&&!M(Tt)&&Object.keys(Tt).forEach(function(Qr){Hr[Qr]=mr(Tt[Qr],Qr)}),Hr};function Pc(Tt,mr){for(var Hr in mr)mr.hasOwnProperty(Hr)&&Hr!=="constructor"&&mr[Hr]!==void 0&&(Tt[Hr]=mr[Hr])}function Fl(Tt,mr,Hr,Qr){return mr&&Pc(Tt,mr),Hr&&Pc(Tt,Hr),Qr&&Pc(Tt,Qr),Tt}var nu=function(Tt,mr,Hr){for(var Qr=0,On=Rt(mr)?mr.split("."):mr;Tt&&Qr<On.length;)Tt=Tt[On[Qr++]];return Tt===void 0||Qr<On.length?Hr:Tt},hu=function(Tt,mr,Hr){var Qr=Tt,On=Rt(mr)?mr.split("."):mr;return On.forEach(function(gi,ua){ua<On.length-1?(ge(Qr[gi])||(Qr[gi]=St(On[ua+1])?[]:{}),Qr=Qr[gi]):Qr[gi]=Hr}),Tt},Tl=Object.prototype.hasOwnProperty,pc=function(Tt,mr){if(Tt===null||!He(Tt))return{};var Hr={};return ze(mr,function(Qr){Tl.call(Tt,Qr)&&(Hr[Qr]=Tt[Qr])}),Hr},Bl=function(Tt,mr){return Oe(Tt,function(Hr,Qr,On){return mr.includes(On)||(Hr[On]=Qr),Hr},{})},Oc=function(Tt,mr,Hr){var Qr,On,gi,ua,_o=0;Hr||(Hr={});var Fs=function(){_o=Hr.leading===!1?0:Date.now(),Qr=null,ua=Tt.apply(On,gi),Qr||(On=gi=null)},vl=function(){var rl=Date.now();!_o&&Hr.leading===!1&&(_o=rl);var Lo=mr-(rl-_o);return On=this,gi=arguments,Lo<=0||Lo>mr?(Qr&&(clearTimeout(Qr),Qr=null),_o=rl,ua=Tt.apply(On,gi),Qr||(On=gi=null)):!Qr&&Hr.trailing!==!1&&(Qr=setTimeout(Fs,Lo)),ua};return vl.cancel=function(){clearTimeout(Qr),_o=0,Qr=On=gi=null},vl},Kc=function(Tt){return K(Tt)?Array.prototype.slice.call(Tt):[]},th={},Gp=function(Tt){return Tt=Tt||"g",th[Tt]?th[Tt]+=1:th[Tt]=1,Tt+th[Tt]},Uo=function(){};function Od(Tt){return M(Tt)?0:K(Tt)?Tt.length:Object.keys(Tt).length}var Oh=k(97582),pf,ss=yo(function(Tt,mr){mr===void 0&&(mr={});var Hr=mr.fontSize,Qr=mr.fontFamily,On=mr.fontWeight,gi=mr.fontStyle,ua=mr.fontVariant;return pf||(pf=document.createElement("canvas").getContext("2d")),pf.font=[gi,ua,On,Hr+"px",Qr].join(" "),pf.measureText(Rt(Tt)?Tt:"").width},function(Tt,mr){return mr===void 0&&(mr={}),(0,Oh.pr)([Tt],Wa(mr)).join("")}),cp=function(Tt,mr,Hr,Qr){Qr===void 0&&(Qr="...");var On=16,gi=ss(Qr,Hr),ua=Rt(Tt)?Tt:ho(Tt),_o=mr,Fs=[],vl,rl;if(ss(Tt,Hr)<=mr)return Tt;for(;vl=ua.substr(0,On),rl=ss(vl,Hr),!(rl+gi>_o&&rl>_o);)if(Fs.push(vl),_o-=rl,ua=ua.substr(On),!ua)return Fs.join("");for(;vl=ua.substr(0,1),rl=ss(vl,Hr),!(rl+gi>_o);)if(Fs.push(vl),_o-=rl,ua=ua.substr(1),!ua)return Fs.join("");return""+Fs.join("")+Qr},fp=function(){function Tt(){this.map={}}return Tt.prototype.has=function(mr){return this.map[mr]!==void 0},Tt.prototype.get=function(mr,Hr){var Qr=this.map[mr];return Qr===void 0?Hr:Qr},Tt.prototype.set=function(mr,Hr){this.map[mr]=Hr},Tt.prototype.clear=function(){this.map={}},Tt.prototype.delete=function(mr){delete this.map[mr]},Tt.prototype.size=function(){return Object.keys(this.map).length},Tt}(),Lu=fp},38163:function(ft){ft.exports=N;function N(K,b){var G=K&&K.type,j;if(G==="FeatureCollection")for(j=0;j<K.features.length;j++)N(K.features[j],b);else if(G==="GeometryCollection")for(j=0;j<K.geometries.length;j++)N(K.geometries[j],b);else if(G==="Feature")N(K.geometry,b);else if(G==="Polygon")k(K.coordinates,b);else if(G==="MultiPolygon")for(j=0;j<K.coordinates.length;j++)k(K.coordinates[j],b);return K}function k(K,b){if(K.length!==0){W(K[0],b);for(var G=1;G<K.length;G++)W(K[G],!b)}}function W(K,b){for(var G=0,j=0,q=0,Q=K.length,ie=Q-1;q<Q;ie=q++){var te=(K[q][0]-K[ie][0])*(K[ie][1]+K[q][1]),Ce=G+te;j+=Math.abs(G)>=Math.abs(te)?G-Ce+te:te-Ce+G,G=Ce}G+j>=0!=!!b&&K.reverse()}},75550:function(ft){"use strict";ft.exports=N;function N(k,W){this.x=k,this.y=W}N.prototype={clone:function(){return new N(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,W){return this.clone()._rotateAround(k,W)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var W=k.x-this.x,K=k.y-this.y;return W*W+K*K},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,W){return Math.atan2(this.x*W-this.y*k,this.x*k+this.y*W)},_matMult:function(k){var W=k[0]*this.x+k[1]*this.y,K=k[2]*this.x+k[3]*this.y;return this.x=W,this.y=K,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var W=Math.cos(k),K=Math.sin(k),b=W*this.x-K*this.y,G=K*this.x+W*this.y;return this.x=b,this.y=G,this},_rotateAround:function(k,W){var K=Math.cos(k),b=Math.sin(k),G=W.x+K*(this.x-W.x)-b*(this.y-W.y),j=W.y+b*(this.x-W.x)+K*(this.y-W.y);return this.x=G,this.y=j,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},N.convert=function(k){return k instanceof N?k:Array.isArray(k)?new N(k[0],k[1]):k}},49296:function(ft){"use strict";ft.exports=k,ft.exports.default=k;var N=1e20;function k(j,q,Q,ie,te,Ce){this.fontSize=j||24,this.buffer=q===void 0?3:q,this.cutoff=ie||.25,this.fontFamily=te||"sans-serif",this.fontWeight=Ce||"normal",this.radius=Q||8;var pe=this.size=this.fontSize+this.buffer*2,fe=pe+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=pe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(fe*fe),this.gridInner=new Float64Array(fe*fe),this.f=new Float64Array(fe),this.z=new Float64Array(fe+1),this.v=new Uint16Array(fe),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(pe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function W(j,q,Q,ie,te,Ce,pe){Ce.fill(N,0,q*Q),pe.fill(0,0,q*Q);for(var fe=(q-ie)/2,J=0;J<te;J++)for(var M=0;M<ie;M++){var E=(J+fe)*q+M+fe,ge=j.data[4*(J*ie+M)+3]/255;if(ge===1)Ce[E]=0,pe[E]=N;else if(ge===0)Ce[E]=N,pe[E]=0;else{var Se=Math.max(0,.5-ge),ze=Math.max(0,ge-.5);Ce[E]=Se*Se,pe[E]=ze*ze}}}function K(j,q,Q,ie,te,Ce,pe){for(var fe=0;fe<q*Q;fe++){var J=Math.sqrt(ie[fe])-Math.sqrt(te[fe]);j[fe]=Math.round(255-255*(J/Ce+pe))}}k.prototype._draw=function(j,q){var Q=this.ctx.measureText(j),ie=Q.width,te=2*this.buffer,Ce,pe,fe,J,M,E,ge,Se;q&&this.useMetrics?(M=Math.floor(Q.actualBoundingBoxAscent),Se=this.buffer+Math.ceil(Q.actualBoundingBoxAscent),E=this.buffer,ge=this.buffer,pe=Math.min(this.size,Math.ceil(Q.actualBoundingBoxRight-Q.actualBoundingBoxLeft)),J=Math.min(this.size-E,Math.ceil(Q.actualBoundingBoxAscent+Q.actualBoundingBoxDescent)),Ce=pe+te,fe=J+te,this.ctx.textBaseline="alphabetic"):(Ce=pe=this.size,fe=J=this.size,M=19*this.fontSize/24,E=ge=0,Se=this.middle,this.ctx.textBaseline="middle");var ze;pe&&J&&(this.ctx.clearRect(ge,E,pe,J),this.ctx.fillText(j,this.buffer,Se),ze=this.ctx.getImageData(ge,E,pe,J));var De=new Uint8ClampedArray(Ce*fe);return W(ze,Ce,fe,pe,J,this.gridOuter,this.gridInner),b(this.gridOuter,Ce,fe,this.f,this.v,this.z),b(this.gridInner,Ce,fe,this.f,this.v,this.z),K(De,Ce,fe,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:De,metrics:{width:pe,height:J,sdfWidth:Ce,sdfHeight:fe,top:M,left:0,advance:ie}}},k.prototype.draw=function(j){return this._draw(j,!1).data},k.prototype.drawWithMetrics=function(j){return this._draw(j,!0)};function b(j,q,Q,ie,te,Ce){for(var pe=0;pe<q;pe++)G(j,pe,q,Q,ie,te,Ce);for(var fe=0;fe<Q;fe++)G(j,fe*q,1,q,ie,te,Ce)}function G(j,q,Q,ie,te,Ce,pe){var fe,J,M,E;for(Ce[0]=0,pe[0]=-N,pe[1]=N,fe=0;fe<ie;fe++)te[fe]=j[q+fe*Q];for(fe=1,J=0,M=0;fe<ie;fe++){do E=Ce[J],M=(te[fe]-te[E]+fe*fe-E*E)/(fe-E)/2;while(M<=pe[J]&&--J>-1);J++,Ce[J]=fe,pe[J]=M,pe[J+1]=N}for(fe=0,J=0;fe<ie;fe++){for(;pe[J+1]<fe;)J++;E=Ce[J],j[q+fe*Q]=te[E]+(fe-E)*(fe-E)}}},99874:function(ft){ft.exports=N;function N(k,W,K,b){this.cx=3*k,this.bx=3*(K-k)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*W,this.by=3*(b-W)-this.cy,this.ay=1-this.cy-this.by,this.p1x=k,this.p1y=b,this.p2x=K,this.p2y=b}N.prototype.sampleCurveX=function(k){return((this.ax*k+this.bx)*k+this.cx)*k},N.prototype.sampleCurveY=function(k){return((this.ay*k+this.by)*k+this.cy)*k},N.prototype.sampleCurveDerivativeX=function(k){return(3*this.ax*k+2*this.bx)*k+this.cx},N.prototype.solveCurveX=function(k,W){typeof W=="undefined"&&(W=1e-6);var K,b,G,j,q;for(G=k,q=0;q<8;q++){if(j=this.sampleCurveX(G)-k,Math.abs(j)<W)return G;var Q=this.sampleCurveDerivativeX(G);if(Math.abs(Q)<1e-6)break;G=G-j/Q}if(K=0,b=1,G=k,G<K)return K;if(G>b)return b;for(;K<b;){if(j=this.sampleCurveX(G),Math.abs(j-k)<W)return G;k>j?K=G:b=G,G=(b-K)*.5+K}return G},N.prototype.solve=function(k,W){return this.sampleCurveY(this.solveCurveX(k,W))}},38929:function(ft,N,k){ft.exports.VectorTile=k(22779),k(66024),k(59701)},22779:function(ft,N,k){"use strict";var W=k(59701);ft.exports=K;function K(G,j){this.layers=G.readFields(b,{},j)}function b(G,j,q){if(G===3){var Q=new W(q,q.readVarint()+q.pos);Q.length&&(j[Q.name]=Q)}}},66024:function(ft,N,k){"use strict";var W=k(75550);ft.exports=K;function K(Q,ie,te,Ce,pe){this.properties={},this.extent=te,this.type=0,this._pbf=Q,this._geometry=-1,this._keys=Ce,this._values=pe,Q.readFields(b,this,ie)}function b(Q,ie,te){Q==1?ie.id=te.readVarint():Q==2?G(te,ie):Q==3?ie.type=te.readVarint():Q==4&&(ie._geometry=te.pos)}function G(Q,ie){for(var te=Q.readVarint()+Q.pos;Q.pos<te;){var Ce=ie._keys[Q.readVarint()],pe=ie._values[Q.readVarint()];ie.properties[Ce]=pe}}K.types=["Unknown","Point","LineString","Polygon"],K.prototype.loadGeometry=function(){var Q=this._pbf;Q.pos=this._geometry;for(var ie=Q.readVarint()+Q.pos,te=1,Ce=0,pe=0,fe=0,J=[],M;Q.pos<ie;){if(Ce<=0){var E=Q.readVarint();te=E&7,Ce=E>>3}if(Ce--,te===1||te===2)pe+=Q.readSVarint(),fe+=Q.readSVarint(),te===1&&(M&&J.push(M),M=[]),M.push(new W(pe,fe));else if(te===7)M&&M.push(M[0].clone());else throw new Error("unknown command "+te)}return M&&J.push(M),J},K.prototype.bbox=function(){var Q=this._pbf;Q.pos=this._geometry;for(var ie=Q.readVarint()+Q.pos,te=1,Ce=0,pe=0,fe=0,J=1/0,M=-1/0,E=1/0,ge=-1/0;Q.pos<ie;){if(Ce<=0){var Se=Q.readVarint();te=Se&7,Ce=Se>>3}if(Ce--,te===1||te===2)pe+=Q.readSVarint(),fe+=Q.readSVarint(),pe<J&&(J=pe),pe>M&&(M=pe),fe<E&&(E=fe),fe>ge&&(ge=fe);else if(te!==7)throw new Error("unknown command "+te)}return[J,E,M,ge]},K.prototype.toGeoJSON=function(Q,ie,te){var Ce=this.extent*Math.pow(2,te),pe=this.extent*Q,fe=this.extent*ie,J=this.loadGeometry(),M=K.types[this.type],E,ge;function Se(Ue){for(var at=0;at<Ue.length;at++){var Je=Ue[at],Ze=180-(Je.y+fe)*360/Ce;Ue[at]=[(Je.x+pe)*360/Ce-180,360/Math.PI*Math.atan(Math.exp(Ze*Math.PI/180))-90]}}switch(this.type){case 1:var ze=[];for(E=0;E<J.length;E++)ze[E]=J[E][0];J=ze,Se(J);break;case 2:for(E=0;E<J.length;E++)Se(J[E]);break;case 3:for(J=j(J),E=0;E<J.length;E++)for(ge=0;ge<J[E].length;ge++)Se(J[E][ge]);break}J.length===1?J=J[0]:M="Multi"+M;var De={type:"Feature",geometry:{type:M,coordinates:J},properties:this.properties};return"id"in this&&(De.id=this.id),De};function j(Q){var ie=Q.length;if(ie<=1)return[Q];for(var te=[],Ce,pe,fe=0;fe<ie;fe++){var J=q(Q[fe]);J!==0&&(pe===void 0&&(pe=J<0),pe===J<0?(Ce&&te.push(Ce),Ce=[Q[fe]]):Ce.push(Q[fe]))}return Ce&&te.push(Ce),te}function q(Q){for(var ie=0,te=0,Ce=Q.length,pe=Ce-1,fe,J;te<Ce;pe=te++)fe=Q[te],J=Q[pe],ie+=(J.x-fe.x)*(fe.y+J.y);return ie}},59701:function(ft,N,k){"use strict";var W=k(66024);ft.exports=K;function K(j,q){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=j,this._keys=[],this._values=[],this._features=[],j.readFields(b,this,q),this.length=this._features.length}function b(j,q,Q){j===15?q.version=Q.readVarint():j===1?q.name=Q.readString():j===5?q.extent=Q.readVarint():j===2?q._features.push(Q.pos):j===3?q._keys.push(Q.readString()):j===4&&q._values.push(G(Q))}function G(j){for(var q=null,Q=j.readVarint()+j.pos;j.pos<Q;){var ie=j.readVarint()>>3;q=ie===1?j.readString():ie===2?j.readFloat():ie===3?j.readDouble():ie===4?j.readVarint64():ie===5?j.readVarint():ie===6?j.readSVarint():ie===7?j.readBoolean():null}return q}K.prototype.feature=function(j){if(j<0||j>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[j];var q=this._pbf.readVarint()+this._pbf.pos;return new W(this._pbf,q,this.extent,this._keys,this._values)}},45471:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.PresetStatusColorTypes=void 0,N.isPresetColor=q,N.isPresetStatusColor=Q;var K=W(k(861)),b=k(36496);const G=b.PresetColors.map(ie=>`${ie}-inverse`),j=N.PresetStatusColorTypes=["success","processing","error","default","warning"];function q(ie){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,K.default)(G),(0,K.default)(b.PresetColors)).includes(ie):b.PresetColors.includes(ie)}function Q(ie){return j.includes(ie)}},56333:function(ft,N,k){"use strict";"use client";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.containerBaseZIndexOffset=N.consumerBaseZIndexOffset=N.CONTAINER_MAX_OFFSET=void 0,N.useZIndex=pe;var K=W(k(67294)),b=W(k(41401)),G=W(k(96877));const j=100,q=10,Q=N.CONTAINER_MAX_OFFSET=j*q,ie=N.containerBaseZIndexOffset={Modal:j,Drawer:j,Popover:j,Popconfirm:j,Tooltip:j,Tour:j},te=N.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function Ce(fe){return fe in ie}function pe(fe,J){const[,M]=(0,b.default)(),E=K.default.useContext(G.default),ge=Ce(fe);if(J!==void 0)return[J,J];let Se=E!=null?E:0;return ge?(Se+=(E?0:M.zIndexPopupBase)+ie[fe],Se=Math.min(Se,M.zIndexPopupBase+Q)):Se+=te[fe],[E===void 0?J:Se,Se]}},53683:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getTransitionName=N.default=void 0;const k=()=>({height:0,opacity:0}),W=ie=>{const{scrollHeight:te}=ie;return{height:te,opacity:1}},K=ie=>({height:ie?ie.offsetHeight:0}),b=(ie,te)=>(te==null?void 0:te.deadline)===!0||te.propertyName==="height",G=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:k,onEnterStart:k,onAppearActive:W,onEnterActive:W,onLeaveStart:K,onLeaveActive:k,onAppearEnd:b,onEnterEnd:b,onLeaveEnd:b,motionDeadline:500}},j=null,q=(ie,te,Ce)=>Ce!==void 0?Ce:`${ie}-${te}`;N.getTransitionName=q;var Q=N.default=G},74132:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=q,N.getOverflowOptions=K;var W=k(9064);function K(Q,ie,te,Ce){if(Ce===!1)return{adjustX:!1,adjustY:!1};const pe=Ce&&typeof Ce=="object"?Ce:{},fe={};switch(Q){case"top":case"bottom":fe.shiftX=ie.arrowOffsetHorizontal*2+te,fe.shiftY=!0,fe.adjustY=!0;break;case"left":case"right":fe.shiftY=ie.arrowOffsetVertical*2+te,fe.shiftX=!0,fe.adjustX=!0;break}const J=Object.assign(Object.assign({},fe),pe);return J.shiftX||(J.adjustX=!0),J.shiftY||(J.adjustY=!0),J}const b={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},G={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},j=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function q(Q){const{arrowWidth:ie,autoAdjustOverflow:te,arrowPointAtCenter:Ce,offset:pe,borderRadius:fe,visibleFirst:J}=Q,M=ie/2,E={};return Object.keys(b).forEach(ge=>{const Se=Ce&&G[ge]||b[ge],ze=Object.assign(Object.assign({},Se),{offset:[0,0],dynamicInset:!0});switch(E[ge]=ze,j.has(ge)&&(ze.autoArrow=!1),ge){case"top":case"topLeft":case"topRight":ze.offset[1]=-M-pe;break;case"bottom":case"bottomLeft":case"bottomRight":ze.offset[1]=M+pe;break;case"left":case"leftTop":case"leftBottom":ze.offset[0]=-M-pe;break;case"right":case"rightTop":case"rightBottom":ze.offset[0]=M+pe;break}const De=(0,W.getArrowOffsetToken)({contentRadius:fe,limitVerticalRadius:!0});if(Ce)switch(ge){case"topLeft":case"bottomLeft":ze.offset[0]=-De.arrowOffsetHorizontal-M;break;case"topRight":case"bottomRight":ze.offset[0]=De.arrowOffsetHorizontal+M;break;case"leftTop":case"rightTop":ze.offset[1]=-De.arrowOffsetHorizontal-M;break;case"leftBottom":case"rightBottom":ze.offset[1]=De.arrowOffsetHorizontal+M;break}ze.overflow=K(ge,De,ie,te),J&&(ze.htmlRegion="visibleFirst")}),E}},47419:function(ft,N,k){"use strict";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.cloneElement=q,N.isFragment=G,N.isValidElement=void 0,N.replaceElement=j;var K=W(k(67294));const{isValidElement:b}=K;N.isValidElement=b;function G(Q){return Q&&b(Q)&&Q.type===K.Fragment}function j(Q,ie,te){return b(Q)?K.cloneElement(Q,typeof te=="function"?te(Q.props||{}):te):ie}function q(Q,ie){return j(Q,Q,ie)}},71434:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.getMergedStatus=void 0,N.getStatusClassNames=G;var K=W(k(93967));const b=null;function G(q,Q,ie){return(0,K.default)({[`${q}-status-success`]:Q==="success",[`${q}-status-warning`]:Q==="warning",[`${q}-status-error`]:Q==="error",[`${q}-status-validating`]:Q==="validating",[`${q}-has-feedback`]:ie})}const j=(q,Q)=>Q||q;N.getMergedStatus=j},38882:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.canUseDocElement=void 0,Object.defineProperty(N,"isStyleSupport",{enumerable:!0,get:function(){return b.isStyleSupport}});var K=W(k(19158)),b=k(3481);const G=()=>(0,K.default)()&&window.document.documentElement;N.canUseDocElement=G},60938:function(ft,N,k){"use strict";"use client";var W=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var b=K(k(27712)),G=W(k(67294)),j=function(te,Ce){var pe={};for(var fe in te)Object.prototype.hasOwnProperty.call(te,fe)&&Ce.indexOf(fe)<0&&(pe[fe]=te[fe]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,fe=Object.getOwnPropertySymbols(te);J<fe.length;J++)Ce.indexOf(fe[J])<0&&Object.prototype.propertyIsEnumerable.call(te,fe[J])&&(pe[fe[J]]=te[fe[J]]);return pe};const q={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},Q=G.forwardRef((te,Ce)=>{const pe=ze=>{const{keyCode:De}=ze;De===b.default.ENTER&&ze.preventDefault()},fe=ze=>{const{keyCode:De}=ze,{onClick:Ue}=te;De===b.default.ENTER&&Ue&&Ue()},{style:J,noStyle:M,disabled:E}=te,ge=j(te,["style","noStyle","disabled"]);let Se={};return M||(Se=Object.assign({},q)),E&&(Se.pointerEvents="none"),Se=Object.assign(Object.assign({},Se),J),G.createElement("div",Object.assign({role:"button",tabIndex:0,ref:Ce},ge,{onKeyDown:pe,onKeyUp:fe,style:Se}))});var ie=N.default=Q},13594:function(ft,N,k){"use strict";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.devUseWarning=N.default=N.WarningContext=void 0,N.noop=G,N.resetWarned=q;var K=W(k(67294)),b=W(k(45520));function G(){}let j=null;function q(){j=null,(0,b.resetWarned)()}let Q=G;const ie=N.WarningContext=K.createContext({}),te=N.devUseWarning=()=>{const pe=()=>{};return pe.deprecated=G,pe};var Ce=N.default=Q},96877:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(67294));const b=K.default.createContext(void 0);var G=N.default=b},1028:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(25633)),b=N.default=K.default},93319:function(ft,N,k){"use strict";"use client";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.DisabledContextProvider=void 0;var K=W(k(67294));const b=K.createContext(!1),G=q=>{let{children:Q,disabled:ie}=q;const te=K.useContext(b);return K.createElement(b.Provider,{value:ie!=null?ie:te},Q)};N.DisabledContextProvider=G;var j=N.default=b},16722:function(ft,N,k){"use strict";"use client";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=j;var K=k(82225),b=W(k(67294)),G=k(3184);function j(q){const{children:Q}=q,[,ie]=(0,G.useToken)(),{motion:te}=ie,Ce=b.useRef(!1);return Ce.current=Ce.current||te===!1,Ce.current?b.createElement(K.Provider,{motion:te},Q):Q}},11380:function(ft,N,k){"use strict";"use client";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(67294)),b=k(13594);const G=null;var j=N.default=()=>null},3236:function(ft,N,k){"use strict";"use client";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.SizeContextProvider=void 0;var K=W(k(67294));const b=K.createContext(void 0),G=q=>{let{children:Q,size:ie}=q;const te=K.useContext(b);return K.createElement(b.Provider,{value:ie||te},Q)};N.SizeContextProvider=G;var j=N.default=b},7177:function(ft,N,k){"use strict";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.defaultIconPrefixCls=N.ConfigContext=N.ConfigConsumer=void 0;var K=W(k(67294));const b=N.defaultIconPrefixCls="anticon",G=(Q,ie)=>ie||(Q?`ant-${Q}`:"ant"),j=N.ConfigContext=K.createContext({getPrefixCls:G,iconPrefixCls:b}),{Consumer:q}=j;N.ConfigConsumer=q},56301:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.getStyle=ie,N.registerTheme=te;var K=k(78589),b=k(77204),G=W(k(19158)),j=k(93399),q=W(k(13594));const Q=`-ant-${Date.now()}-${Math.random()}`;function ie(Ce,pe){const fe={},J=(ge,Se)=>{let ze=ge.clone();return ze=(Se==null?void 0:Se(ze))||ze,ze.toRgbString()},M=(ge,Se)=>{const ze=new b.TinyColor(ge),De=(0,K.generate)(ze.toRgbString());fe[`${Se}-color`]=J(ze),fe[`${Se}-color-disabled`]=De[1],fe[`${Se}-color-hover`]=De[4],fe[`${Se}-color-active`]=De[6],fe[`${Se}-color-outline`]=ze.clone().setAlpha(.2).toRgbString(),fe[`${Se}-color-deprecated-bg`]=De[0],fe[`${Se}-color-deprecated-border`]=De[2]};if(pe.primaryColor){M(pe.primaryColor,"primary");const ge=new b.TinyColor(pe.primaryColor),Se=(0,K.generate)(ge.toRgbString());Se.forEach((De,Ue)=>{fe[`primary-${Ue+1}`]=De}),fe["primary-color-deprecated-l-35"]=J(ge,De=>De.lighten(35)),fe["primary-color-deprecated-l-20"]=J(ge,De=>De.lighten(20)),fe["primary-color-deprecated-t-20"]=J(ge,De=>De.tint(20)),fe["primary-color-deprecated-t-50"]=J(ge,De=>De.tint(50)),fe["primary-color-deprecated-f-12"]=J(ge,De=>De.setAlpha(De.getAlpha()*.12));const ze=new b.TinyColor(Se[0]);fe["primary-color-active-deprecated-f-30"]=J(ze,De=>De.setAlpha(De.getAlpha()*.3)),fe["primary-color-active-deprecated-d-02"]=J(ze,De=>De.darken(2))}return pe.successColor&&M(pe.successColor,"success"),pe.warningColor&&M(pe.warningColor,"warning"),pe.errorColor&&M(pe.errorColor,"error"),pe.infoColor&&M(pe.infoColor,"info"),`
  :root {
    ${Object.keys(fe).map(ge=>`--${Ce}-${ge}: ${fe[ge]};`).join(`
`)}
  }
  `.trim()}function te(Ce,pe){const fe=ie(Ce,pe);(0,G.default)()&&(0,j.updateCSS)(fe,`${Q}-dynamic-theme`)}},14893:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=k(3184);const K=G=>{const[,,,,j]=(0,W.useToken)();return j?`${G}-css-var`:""};var b=N.default=K},5819:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=k(67294),b=W(k(93319)),G=W(k(3236));function j(){const Q=(0,K.useContext)(b.default),ie=(0,K.useContext)(G.default);return{componentDisabled:Q,componentSize:ie}}var q=N.default=j},65693:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(67294)),b=W(k(3236));const G=q=>{const Q=K.default.useContext(b.default);return K.default.useMemo(()=>q?typeof q=="string"?q!=null?q:Q:q instanceof Function?q(Q):Q:Q,[q,Q])};var j=N.default=G},25494:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=Q;var K=W(k(67265)),b=W(k(11102)),G=k(3184),j=W(k(78459)),q=k(13594);function Q(ie,te){var Ce;const pe=(0,q.devUseWarning)("ConfigProvider"),fe=ie||{},J=fe.inherit===!1||!te?G.defaultConfig:te,M=(0,j.default)();return(0,K.default)(()=>{var E,ge;if(!ie)return te;const Se=Object.assign({},J.components);Object.keys(ie.components||{}).forEach(Ue=>{Se[Ue]=Object.assign(Object.assign({},Se[Ue]),ie.components[Ue])});const ze=`css-var-${M.replace(/:/g,"")}`,De=((E=fe.cssVar)!==null&&E!==void 0?E:J.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:"ant"},typeof J.cssVar=="object"?J.cssVar:{}),typeof fe.cssVar=="object"?fe.cssVar:{}),{key:typeof fe.cssVar=="object"&&((ge=fe.cssVar)===null||ge===void 0?void 0:ge.key)||ze});return Object.assign(Object.assign(Object.assign({},J),fe),{token:Object.assign(Object.assign({},J.token),fe.token),components:Se,cssVar:De})},[fe,J],(E,ge)=>E.some((Se,ze)=>{const De=ge[ze];return!(0,b.default)(Se,De,!0)}))}},78459:function(ft,N,k){"use strict";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(67294));const b=Object.assign({},K),{useId:G}=b,q=typeof G=="undefined"?()=>"":G;var Q=N.default=q},31929:function(ft,N,k){"use strict";"use client";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"ConfigConsumer",{enumerable:!0,get:function(){return E.ConfigConsumer}}),Object.defineProperty(N,"ConfigContext",{enumerable:!0,get:function(){return E.ConfigContext}}),N.default=N.configConsumerProps=void 0,Object.defineProperty(N,"defaultIconPrefixCls",{enumerable:!0,get:function(){return E.defaultIconPrefixCls}}),N.warnContext=N.globalConfig=N.defaultPrefixCls=void 0;var b=K(k(67294)),G=k(36939),j=W(k(13357)),q=W(k(67265)),Q=k(20059),ie=K(k(13594)),te=W(k(2197)),Ce=K(k(24522)),pe=W(k(44805)),fe=W(k(18253)),J=k(89329),M=W(k(98411)),E=k(7177),ge=k(56301),Se=k(93319),ze=W(k(5819)),De=W(k(25494)),Ue=W(k(16722)),at=W(k(11380)),Je=K(k(3236)),Ze=W(k(82932)),xe=function(We,Ve){var dt={};for(var Ht in We)Object.prototype.hasOwnProperty.call(We,Ht)&&Ve.indexOf(Ht)<0&&(dt[Ht]=We[Ht]);if(We!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,Ht=Object.getOwnPropertySymbols(We);et<Ht.length;et++)Ve.indexOf(Ht[et])<0&&Object.prototype.propertyIsEnumerable.call(We,Ht[et])&&(dt[Ht[et]]=We[Ht[et]]);return dt};let _e=!1;const He=N.warnContext=null,Ke=N.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale","pageHeader"],Et=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],ke=N.defaultPrefixCls="ant";let qe,ne,Ge;function oe(){return qe||ke}function Fe(){return ne||E.defaultIconPrefixCls}function ut(We){return Object.keys(We).some(Ve=>Ve.endsWith("Color"))}const Ae=We=>{let{prefixCls:Ve,iconPrefixCls:dt,theme:Ht}=We;Ve!==void 0&&(qe=Ve),dt!==void 0&&(ne=dt),Ht&&(ut(Ht)?(0,ge.registerTheme)(oe(),Ht):Ge=Ht)},Le=()=>({getPrefixCls:(We,Ve)=>Ve||(We?`${oe()}-${We}`:oe()),getIconPrefixCls:Fe,getRootPrefixCls:()=>qe||oe(),getTheme:()=>Ge});N.globalConfig=Le;const rt=We=>{const{children:Ve,csp:dt,autoInsertSpaceInButton:Ht,alert:et,anchor:$e,form:Te,locale:Xe,componentSize:pt,direction:Oe,space:Be,virtual:vt,dropdownMatchSelectWidth:Rt,popupMatchSelectWidth:rr,popupOverflow:br,legacyLocale:lt,parentContext:an,iconPrefixCls:$r,theme:Xr,componentDisabled:Nt,segmented:Kt,statistic:or,spin:kt,calendar:Jt,carousel:Er,cascader:wr,collapse:Br,typography:zr,checkbox:le,descriptions:H,divider:re,drawer:Ie,skeleton:Ye,steps:Ct,image:ar,layout:jt,list:wt,mentions:Mt,modal:ve,progress:he,result:Re,slider:tt,breadcrumb:St,menu:Gt,pagination:gr,input:At,empty:st,badge:Pt,radio:yr,rate:Fr,switch:Ft,transfer:Mn,avatar:ei,message:ni,tag:un,table:Xn,card:Wn,tabs:Jn,timeline:sa,timePicker:vi,upload:ga,notification:Ra,tree:ya,colorPicker:ja,datePicker:ba,rangePicker:gs,flex:co,wave:Io,dropdown:oi,warning:Si}=We,Qi=b.useCallback((Bn,Cn)=>{const{prefixCls:Mi}=We;if(Cn)return Cn;const Xi=Mi||an.getPrefixCls("");return Bn?`${Xi}-${Bn}`:Xi},[an.getPrefixCls,We.prefixCls]),Wa=$r||an.iconPrefixCls||E.defaultIconPrefixCls,ms=dt||an.csp;(0,Ze.default)(Wa,ms);const ho=(0,De.default)(Xr,an.theme),Po={csp:ms,autoInsertSpaceInButton:Ht,alert:et,anchor:$e,locale:Xe||lt,direction:Oe,space:Be,virtual:vt,popupMatchSelectWidth:rr!=null?rr:Rt,popupOverflow:br,getPrefixCls:Qi,iconPrefixCls:Wa,theme:ho,segmented:Kt,statistic:or,spin:kt,calendar:Jt,carousel:Er,cascader:wr,collapse:Br,typography:zr,checkbox:le,descriptions:H,divider:re,drawer:Ie,skeleton:Ye,steps:Ct,image:ar,input:At,layout:jt,list:wt,mentions:Mt,modal:ve,progress:he,result:Re,slider:tt,breadcrumb:St,menu:Gt,pagination:gr,empty:st,badge:Pt,radio:yr,rate:Fr,switch:Ft,transfer:Mn,avatar:ei,message:ni,tag:un,table:Xn,card:Wn,tabs:Jn,timeline:sa,timePicker:vi,upload:ga,notification:Ra,tree:ya,colorPicker:ja,datePicker:ba,rangePicker:gs,flex:co,wave:Io,dropdown:oi,warning:Si},cr=Object.assign({},an);Object.keys(Po).forEach(Bn=>{Po[Bn]!==void 0&&(cr[Bn]=Po[Bn])}),Et.forEach(Bn=>{const Cn=We[Bn];Cn&&(cr[Bn]=Cn)});const Ot=(0,q.default)(()=>cr,cr,(Bn,Cn)=>{const Mi=Object.keys(Bn),Xi=Object.keys(Cn);return Mi.length!==Xi.length||Mi.some(Wo=>Bn[Wo]!==Cn[Wo])}),qt=b.useMemo(()=>({prefixCls:Wa,csp:ms}),[Wa,ms]);let Mr=b.createElement(b.Fragment,null,b.createElement(at.default,{dropdownMatchSelectWidth:Rt}),Ve);const rn=b.useMemo(()=>{var Bn,Cn,Mi,Xi;return(0,Q.merge)(((Bn=fe.default.Form)===null||Bn===void 0?void 0:Bn.defaultValidateMessages)||{},((Mi=(Cn=Ot.locale)===null||Cn===void 0?void 0:Cn.Form)===null||Mi===void 0?void 0:Mi.defaultValidateMessages)||{},((Xi=Ot.form)===null||Xi===void 0?void 0:Xi.validateMessages)||{},(Te==null?void 0:Te.validateMessages)||{})},[Ot,Te==null?void 0:Te.validateMessages]);Object.keys(rn).length>0&&(Mr=b.createElement(te.default.Provider,{value:rn},Mr)),Xe&&(Mr=b.createElement(Ce.default,{locale:Xe,_ANT_MARK__:Ce.ANT_MARK},Mr)),(Wa||ms)&&(Mr=b.createElement(j.default.Provider,{value:qt},Mr)),pt&&(Mr=b.createElement(Je.SizeContextProvider,{size:pt},Mr)),Mr=b.createElement(Ue.default,null,Mr);const Pn=b.useMemo(()=>{const Bn=ho||{},{algorithm:Cn,token:Mi,components:Xi,cssVar:Wo}=Bn,os=xe(Bn,["algorithm","token","components","cssVar"]),Su=Cn&&(!Array.isArray(Cn)||Cn.length>0)?(0,G.createTheme)(Cn):J.defaultTheme,Oo={};Object.entries(Xi||{}).forEach(cu=>{let[Qo,Zt]=cu;const er=Object.assign({},Zt);"algorithm"in er&&(er.algorithm===!0?er.theme=Su:(Array.isArray(er.algorithm)||typeof er.algorithm=="function")&&(er.theme=(0,G.createTheme)(er.algorithm)),delete er.algorithm),Oo[Qo]=er});const ro=Object.assign(Object.assign({},M.default),Mi);return Object.assign(Object.assign({},os),{theme:Su,token:ro,components:Oo,override:Object.assign({override:ro},Oo),cssVar:Wo})},[ho]);return Xr&&(Mr=b.createElement(J.DesignTokenContext.Provider,{value:Pn},Mr)),Ot.warning&&(Mr=b.createElement(ie.WarningContext.Provider,{value:Ot.warning},Mr)),Nt!==void 0&&(Mr=b.createElement(Se.DisabledContextProvider,{disabled:Nt},Mr)),b.createElement(E.ConfigContext.Provider,{value:Ot},Mr)},ye=We=>{const Ve=b.useContext(E.ConfigContext),dt=b.useContext(pe.default);return b.createElement(rt,Object.assign({parentContext:Ve,legacyLocale:dt},We))};ye.ConfigContext=E.ConfigContext,ye.SizeContext=Je.default,ye.config=Ae,ye.useConfig=ze.default,Object.defineProperty(ye,"SizeContext",{get:()=>Je.default});var me=N.default=ye},82932:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return W.useResetIconStyle}});var W=k(3184)},25633:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(27590)),b=W(k(52040));const G={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},K.default),timePickerLocale:Object.assign({},b.default)};var j=N.default=G},51130:function(ft,N,k){"use strict";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.NoStyleItemContext=N.NoFormStyle=N.FormProvider=N.FormItemPrefixContext=N.FormItemInputContext=N.FormContext=void 0;var b=K(k(67294)),G=b,j=k(43589),q=W(k(18475));const Q=N.FormContext=G.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),ie=N.NoStyleItemContext=G.createContext(null),te=J=>{const M=(0,q.default)(J,["prefixCls"]);return G.createElement(j.FormProvider,Object.assign({},M))};N.FormProvider=te;const Ce=N.FormItemPrefixContext=G.createContext({prefixCls:""}),pe=N.FormItemInputContext=G.createContext({}),fe=J=>{let{children:M,status:E,override:ge}=J;const Se=(0,b.useContext)(pe),ze=(0,b.useMemo)(()=>{const De=Object.assign({},Se);return ge&&delete De.isFormItemInput,E&&(delete De.status,delete De.hasFeedback,delete De.feedbackIcon),De},[E,ge,Se]);return G.createElement(pe.Provider,{value:ze},M)};N.NoFormStyle=fe},2197:function(ft,N,k){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=k(67294),K=N.default=(0,W.createContext)(void 0)},10815:function(ft,N,k){"use strict";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0,N.triggerFocus=Ue;var b=K(k(67294)),G=W(k(43273)),j=W(k(93967)),q=W(k(67656)),Q=k(75531),ie=k(71434),te=k(13594),Ce=k(31929),pe=W(k(93319)),fe=W(k(65693)),J=k(51130),M=k(46549),E=W(k(81722)),ge=W(k(89858)),Se=k(36714),ze=W(k(14893)),De=function(Ze,xe){var _e={};for(var He in Ze)Object.prototype.hasOwnProperty.call(Ze,He)&&xe.indexOf(He)<0&&(_e[He]=Ze[He]);if(Ze!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ke=0,He=Object.getOwnPropertySymbols(Ze);Ke<He.length;Ke++)xe.indexOf(He[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Ze,He[Ke])&&(_e[He[Ke]]=Ze[He[Ke]]);return _e};function Ue(Ze,xe){if(!Ze)return;Ze.focus(xe);const{cursor:_e}=xe||{};if(_e){const He=Ze.value.length;switch(_e){case"start":Ze.setSelectionRange(0,0);break;case"end":Ze.setSelectionRange(He,He);break;default:Ze.setSelectionRange(0,He);break}}}const at=(0,b.forwardRef)((Ze,xe)=>{var _e;const{prefixCls:He,bordered:Ke=!0,status:Et,size:ke,disabled:qe,onBlur:ne,onFocus:Ge,suffix:oe,allowClear:Fe,addonAfter:ut,addonBefore:Ae,className:Le,style:rt,styles:ye,rootClassName:me,onChange:We,classNames:Ve}=Ze,dt=De(Ze,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames"]),{getPrefixCls:Ht,direction:et,input:$e}=b.default.useContext(Ce.ConfigContext),Te=Ht("input",He),Xe=(0,b.useRef)(null),pt=(0,ze.default)(Te),[Oe,Be,vt]=(0,ge.default)(Te,pt),{compactSize:Rt,compactItemClassnames:rr}=(0,M.useCompactItemContext)(Te,et),br=(0,fe.default)(H=>{var re;return(re=ke!=null?ke:Rt)!==null&&re!==void 0?re:H}),lt=b.default.useContext(pe.default),an=qe!=null?qe:lt,{status:$r,hasFeedback:Xr,feedbackIcon:Nt}=(0,b.useContext)(J.FormItemInputContext),Kt=(0,ie.getMergedStatus)($r,Et),or=(0,Se.hasPrefixSuffix)(Ze)||!!Xr,kt=(0,b.useRef)(or),Jt=(0,E.default)(Xe,!0),Er=H=>{Jt(),ne==null||ne(H)},wr=H=>{Jt(),Ge==null||Ge(H)},Br=H=>{Jt(),We==null||We(H)},zr=(Xr||oe)&&b.default.createElement(b.default.Fragment,null,oe,Xr&&Nt);let le;return typeof Fe=="object"&&(Fe!=null&&Fe.clearIcon)?le=Fe:Fe&&(le={clearIcon:b.default.createElement(G.default,null)}),Oe(b.default.createElement(q.default,Object.assign({ref:(0,Q.composeRef)(xe,Xe),prefixCls:Te,autoComplete:$e==null?void 0:$e.autoComplete},dt,{disabled:an,onBlur:Er,onFocus:wr,style:Object.assign(Object.assign({},$e==null?void 0:$e.style),rt),styles:Object.assign(Object.assign({},$e==null?void 0:$e.styles),ye),suffix:zr,allowClear:le,className:(0,j.default)(Le,me,vt,pt,Be,rr,$e==null?void 0:$e.className),onChange:Br,addonAfter:ut&&b.default.createElement(M.NoCompactStyle,null,b.default.createElement(J.NoFormStyle,{override:!0,status:!0},ut)),addonBefore:Ae&&b.default.createElement(M.NoCompactStyle,null,b.default.createElement(J.NoFormStyle,{override:!0,status:!0},Ae)),classNames:Object.assign(Object.assign(Object.assign({},Ve),$e==null?void 0:$e.classNames),{input:(0,j.default)({[`${Te}-sm`]:br==="small",[`${Te}-lg`]:br==="large",[`${Te}-rtl`]:et==="rtl",[`${Te}-borderless`]:!Ke},!or&&(0,ie.getStatusClassNames)(Te,Kt),Ve==null?void 0:Ve.input,(_e=$e==null?void 0:$e.classNames)===null||_e===void 0?void 0:_e.input,Be)}),classes:{affixWrapper:(0,j.default)({[`${Te}-affix-wrapper-sm`]:br==="small",[`${Te}-affix-wrapper-lg`]:br==="large",[`${Te}-affix-wrapper-rtl`]:et==="rtl",[`${Te}-affix-wrapper-borderless`]:!Ke},(0,ie.getStatusClassNames)(`${Te}-affix-wrapper`,Kt,Xr),Be),wrapper:(0,j.default)({[`${Te}-group-rtl`]:et==="rtl"},Be),group:(0,j.default)({[`${Te}-group-wrapper-sm`]:br==="small",[`${Te}-group-wrapper-lg`]:br==="large",[`${Te}-group-wrapper-rtl`]:et==="rtl",[`${Te}-group-wrapper-disabled`]:an},(0,ie.getStatusClassNames)(`${Te}-group-wrapper`,Kt,Xr),Be)}})))});var Je=N.default=at},14104:function(ft,N,k){"use strict";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var b=K(k(67294)),G=b,j=W(k(43273)),q=W(k(93967)),Q=W(k(43961)),ie=k(71434),te=k(31929),Ce=W(k(93319)),pe=W(k(65693)),fe=k(51130),J=k(10815),M=W(k(89858)),E=W(k(14893)),ge=function(De,Ue){var at={};for(var Je in De)Object.prototype.hasOwnProperty.call(De,Je)&&Ue.indexOf(Je)<0&&(at[Je]=De[Je]);if(De!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ze=0,Je=Object.getOwnPropertySymbols(De);Ze<Je.length;Ze++)Ue.indexOf(Je[Ze])<0&&Object.prototype.propertyIsEnumerable.call(De,Je[Ze])&&(at[Je[Ze]]=De[Je[Ze]]);return at};const Se=(0,b.forwardRef)((De,Ue)=>{var at;const{prefixCls:Je,bordered:Ze=!0,size:xe,disabled:_e,status:He,allowClear:Ke,classNames:Et,rootClassName:ke,className:qe}=De,ne=ge(De,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className"]),{getPrefixCls:Ge,direction:oe}=G.useContext(te.ConfigContext),Fe=(0,pe.default)(xe),ut=G.useContext(Ce.default),Ae=_e!=null?_e:ut,{status:Le,hasFeedback:rt,feedbackIcon:ye}=G.useContext(fe.FormItemInputContext),me=(0,ie.getMergedStatus)(Le,He),We=G.useRef(null);G.useImperativeHandle(Ue,()=>{var Xe;return{resizableTextArea:(Xe=We.current)===null||Xe===void 0?void 0:Xe.resizableTextArea,focus:pt=>{var Oe,Be;(0,J.triggerFocus)((Be=(Oe=We.current)===null||Oe===void 0?void 0:Oe.resizableTextArea)===null||Be===void 0?void 0:Be.textArea,pt)},blur:()=>{var pt;return(pt=We.current)===null||pt===void 0?void 0:pt.blur()}}});const Ve=Ge("input",Je);let dt;typeof Ke=="object"&&(Ke!=null&&Ke.clearIcon)?dt=Ke:Ke&&(dt={clearIcon:G.createElement(j.default,null)});const Ht=(0,E.default)(Ve),[et,$e,Te]=(0,M.default)(Ve,Ht);return et(G.createElement(Q.default,Object.assign({},ne,{disabled:Ae,allowClear:dt,className:(0,q.default)(Te,Ht,qe,ke),classes:{affixWrapper:(0,q.default)(`${Ve}-textarea-affix-wrapper`,{[`${Ve}-affix-wrapper-rtl`]:oe==="rtl",[`${Ve}-affix-wrapper-borderless`]:!Ze,[`${Ve}-affix-wrapper-sm`]:Fe==="small",[`${Ve}-affix-wrapper-lg`]:Fe==="large",[`${Ve}-textarea-show-count`]:De.showCount||((at=De.count)===null||at===void 0?void 0:at.show)},(0,ie.getStatusClassNames)(`${Ve}-affix-wrapper`,me),$e)},classNames:Object.assign(Object.assign({},Et),{textarea:(0,q.default)({[`${Ve}-borderless`]:!Ze,[`${Ve}-sm`]:Fe==="small",[`${Ve}-lg`]:Fe==="large"},(0,ie.getStatusClassNames)(Ve,me),$e,Et==null?void 0:Et.textarea)}),prefixCls:Ve,suffix:rt&&G.createElement("span",{className:`${Ve}-textarea-suffix`},ye),ref:We})))});var ze=N.default=Se},81722:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=K;var W=k(67294);function K(b,G){const j=(0,W.useRef)([]),q=()=>{j.current.push(setTimeout(()=>{var Q,ie,te,Ce;!((Q=b.current)===null||Q===void 0)&&Q.input&&((ie=b.current)===null||ie===void 0?void 0:ie.input.getAttribute("type"))==="password"&&(!((te=b.current)===null||te===void 0)&&te.input.hasAttribute("value"))&&((Ce=b.current)===null||Ce===void 0||Ce.input.removeAttribute("value"))}))};return(0,W.useEffect)(()=>(G&&q(),()=>j.current.forEach(Q=>{Q&&clearTimeout(Q)})),[]),q}},89858:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initComponentToken=N.genStatusStyle=N.genPlaceholderStyle=N.genInputSmallStyle=N.genInputGroupStyle=N.genHoverStyle=N.genDisabledStyle=N.genBasicInputStyle=N.genActiveStyle=N.default=void 0,N.initInputToken=at;var W=k(36939),K=k(98078),b=k(78793),G=k(3184);const j=xe=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:xe,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});N.genPlaceholderStyle=j;const q=xe=>({borderColor:xe.hoverBorderColor,backgroundColor:xe.hoverBg});N.genHoverStyle=q;const Q=xe=>({borderColor:xe.activeBorderColor,boxShadow:xe.activeShadow,outline:0,backgroundColor:xe.activeBg});N.genActiveStyle=Q;const ie=xe=>({color:xe.colorTextDisabled,backgroundColor:xe.colorBgContainerDisabled,borderColor:xe.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover:not([disabled])":Object.assign({},q((0,G.mergeToken)(xe,{hoverBorderColor:xe.colorBorder,hoverBg:xe.colorBgContainerDisabled})))});N.genDisabledStyle=ie;const te=xe=>{const{paddingBlockLG:_e,fontSizeLG:He,lineHeightLG:Ke,borderRadiusLG:Et,paddingInlineLG:ke}=xe;return{padding:`${(0,W.unit)(_e)} ${(0,W.unit)(ke)}`,fontSize:He,lineHeight:Ke,borderRadius:Et}},Ce=xe=>({padding:`${(0,W.unit)(xe.paddingBlockSM)} ${(0,W.unit)(xe.paddingInlineSM)}`,borderRadius:xe.borderRadiusSM});N.genInputSmallStyle=Ce;const pe=(xe,_e)=>{const{componentCls:He,colorError:Ke,colorWarning:Et,errorActiveShadow:ke,warningActiveShadow:qe,colorErrorBorderHover:ne,colorWarningBorderHover:Ge}=xe;return{[`&-status-error:not(${_e}-disabled):not(${_e}-borderless)${_e}`]:{borderColor:Ke,"&:hover":{borderColor:ne},"&:focus, &:focus-within":Object.assign({},Q((0,G.mergeToken)(xe,{activeBorderColor:Ke,activeShadow:ke}))),[`${He}-prefix, ${He}-suffix`]:{color:Ke}},[`&-status-warning:not(${_e}-disabled):not(${_e}-borderless)${_e}`]:{borderColor:Et,"&:hover":{borderColor:Ge},"&:focus, &:focus-within":Object.assign({},Q((0,G.mergeToken)(xe,{activeBorderColor:Et,activeShadow:qe}))),[`${He}-prefix, ${He}-suffix`]:{color:Et}}}};N.genStatusStyle=pe;const fe=xe=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,W.unit)(xe.paddingBlock)} ${(0,W.unit)(xe.paddingInline)}`,color:xe.colorText,fontSize:xe.fontSize,lineHeight:xe.lineHeight,backgroundColor:xe.colorBgContainer,backgroundImage:"none",borderWidth:xe.lineWidth,borderStyle:xe.lineType,borderColor:xe.colorBorder,borderRadius:xe.borderRadius,transition:`all ${xe.motionDurationMid}`},j(xe.colorTextPlaceholder)),{"&:hover":Object.assign({},q(xe)),"&:focus, &:focus-within":Object.assign({},Q(xe)),"&-disabled, &[disabled]":Object.assign({},ie(xe)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:xe.controlHeight,lineHeight:xe.lineHeight,verticalAlign:"bottom",transition:`all ${xe.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},te(xe)),"&-sm":Object.assign({},Ce(xe)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}});N.genBasicInputStyle=fe;const J=xe=>{const{componentCls:_e,antCls:He}=xe;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:xe.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${_e}, &-lg > ${_e}-group-addon`]:Object.assign({},te(xe)),[`&-sm ${_e}, &-sm > ${_e}-group-addon`]:Object.assign({},Ce(xe)),[`&-lg ${He}-select-single ${He}-select-selector`]:{height:xe.controlHeightLG},[`&-sm ${He}-select-single ${He}-select-selector`]:{height:xe.controlHeightSM},[`> ${_e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${_e}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,W.unit)(xe.paddingInline)}`,color:xe.colorText,fontWeight:"normal",fontSize:xe.fontSize,textAlign:"center",backgroundColor:xe.addonBg,border:`${(0,W.unit)(xe.lineWidth)} ${xe.lineType} ${xe.colorBorder}`,borderRadius:xe.borderRadius,transition:`all ${xe.motionDurationSlow}`,lineHeight:1,[`${He}-select`]:{margin:`${(0,W.unit)(xe.calc(xe.paddingBlock).add(1).mul(-1).equal())} ${(0,W.unit)(xe.calc(xe.paddingInline).mul(-1).equal())}`,[`&${He}-select-single:not(${He}-select-customize-input):not(${He}-pagination-size-changer)`]:{[`${He}-select-selector`]:{backgroundColor:"inherit",border:`${(0,W.unit)(xe.lineWidth)} ${xe.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${He}-select-selector`]:{color:xe.colorPrimary}}},[`${He}-cascader-picker`]:{margin:`-9px ${(0,W.unit)(xe.calc(xe.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${He}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},[`${_e}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${_e}-search-with-button &`]:{zIndex:0}}},[`> ${_e}:first-child, ${_e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${He}-select ${He}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${_e}-affix-wrapper`]:{[`&:not(:first-child) ${_e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${_e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${_e}:last-child, ${_e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${He}-select ${He}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${_e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${_e}-search &`]:{borderStartStartRadius:xe.borderRadius,borderEndStartRadius:xe.borderRadius}},[`&:not(:first-child), ${_e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${_e}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,K.clearFix)()),{[`${_e}-group-addon, ${_e}-group-wrap, > ${_e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:xe.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${_e}-affix-wrapper,
        & > ${_e}-number-affix-wrapper,
        & > ${He}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:xe.calc(xe.lineWidth).mul(-1).equal(),borderInlineEndWidth:xe.lineWidth},[`${_e}`]:{float:"none"},[`& > ${He}-select > ${He}-select-selector,
      & > ${He}-select-auto-complete ${_e},
      & > ${He}-cascader-picker ${_e},
      & > ${_e}-group-wrapper ${_e}`]:{borderInlineEndWidth:xe.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${He}-select-focused`]:{zIndex:1},[`& > ${He}-select > ${He}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${He}-select:first-child > ${He}-select-selector,
      & > ${He}-select-auto-complete:first-child ${_e},
      & > ${He}-cascader-picker:first-child ${_e}`]:{borderStartStartRadius:xe.borderRadius,borderEndStartRadius:xe.borderRadius},[`& > *:last-child,
      & > ${He}-select:last-child > ${He}-select-selector,
      & > ${He}-cascader-picker:last-child ${_e},
      & > ${He}-cascader-picker-focused:last-child ${_e}`]:{borderInlineEndWidth:xe.lineWidth,borderStartEndRadius:xe.borderRadius,borderEndEndRadius:xe.borderRadius},[`& > ${He}-select-auto-complete ${_e}`]:{verticalAlign:"top"},[`${_e}-group-wrapper + ${_e}-group-wrapper`]:{marginInlineStart:xe.calc(xe.lineWidth).mul(-1).equal(),[`${_e}-affix-wrapper`]:{borderRadius:0}},[`${_e}-group-wrapper:not(:last-child)`]:{[`&${_e}-search > ${_e}-group`]:{[`& > ${_e}-group-addon > ${_e}-search-button`]:{borderRadius:0},[`& > ${_e}`]:{borderStartStartRadius:xe.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:xe.borderRadius}}}})}};N.genInputGroupStyle=J;const M=xe=>{const{componentCls:_e,controlHeightSM:He,lineWidth:Ke,calc:Et}=xe,ke=16,qe=Et(He).sub(Et(Ke).mul(2)).sub(ke).div(2).equal();return{[_e]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,K.resetComponent)(xe)),fe(xe)),pe(xe,_e)),{'&[type="color"]':{height:xe.controlHeight,[`&${_e}-lg`]:{height:xe.controlHeightLG},[`&${_e}-sm`]:{height:He,paddingTop:qe,paddingBottom:qe}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},E=xe=>{const{componentCls:_e}=xe;return{[`${_e}-clear-icon`]:{margin:0,color:xe.colorTextQuaternary,fontSize:xe.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${xe.motionDurationSlow}`,"&:hover":{color:xe.colorTextTertiary},"&:active":{color:xe.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,W.unit)(xe.inputAffixPadding)}`}}}},ge=xe=>{const{componentCls:_e,inputAffixPadding:He,colorTextDescription:Ke,motionDurationSlow:Et,colorIcon:ke,colorIconHover:qe,iconCls:ne}=xe;return{[`${_e}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fe(xe)),{display:"inline-flex",[`&:not(${_e}-affix-wrapper-disabled):hover`]:{zIndex:1,[`${_e}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${_e}[disabled]`]:{background:"transparent"}},[`> input${_e}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${_e}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:xe.paddingXS}},"&-show-count-suffix":{color:Ke},"&-show-count-has-suffix":{marginInlineEnd:xe.paddingXXS},"&-prefix":{marginInlineEnd:He},"&-suffix":{marginInlineStart:He}}}),E(xe)),{[`${ne}${_e}-password-icon`]:{color:ke,cursor:"pointer",transition:`all ${Et}`,"&:hover":{color:qe}}}),pe(xe,`${_e}-affix-wrapper`))}},Se=xe=>{const{componentCls:_e,colorError:He,colorWarning:Ke,borderRadiusLG:Et,borderRadiusSM:ke}=xe;return{[`${_e}-group`]:Object.assign(Object.assign(Object.assign({},(0,K.resetComponent)(xe)),J(xe)),{"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${_e}-group-addon`]:{borderRadius:Et,fontSize:xe.fontSizeLG}},"&-sm":{[`${_e}-group-addon`]:{borderRadius:ke}},"&-status-error":{[`${_e}-group-addon`]:{color:He,borderColor:He}},"&-status-warning":{[`${_e}-group-addon`]:{color:Ke,borderColor:Ke}},"&-disabled":{[`${_e}-group-addon`]:Object.assign({},ie(xe))},[`&:not(${_e}-compact-first-item):not(${_e}-compact-last-item)${_e}-compact-item`]:{[`${_e}, ${_e}-group-addon`]:{borderRadius:0}},[`&:not(${_e}-compact-last-item)${_e}-compact-first-item`]:{[`${_e}, ${_e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${_e}-compact-first-item)${_e}-compact-last-item`]:{[`${_e}, ${_e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}})}},ze=xe=>{const{componentCls:_e,antCls:He}=xe,Ke=`${_e}-search`;return{[Ke]:{[`${_e}`]:{"&:hover, &:focus":{borderColor:xe.colorPrimaryHover,[`+ ${_e}-group-addon ${Ke}-button:not(${He}-btn-primary)`]:{borderInlineStartColor:xe.colorPrimaryHover}}},[`${_e}-affix-wrapper`]:{borderRadius:0},[`${_e}-lg`]:{lineHeight:xe.calc(xe.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${_e}-group`]:{[`> ${_e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${Ke}-button`]:{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:xe.borderRadius,borderEndEndRadius:xe.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${Ke}-button:not(${He}-btn-primary)`]:{color:xe.colorTextDescription,"&:hover":{color:xe.colorPrimaryHover},"&:active":{color:xe.colorPrimaryActive},[`&${He}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${Ke}-button`]:{height:xe.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${Ke}-button`]:{height:xe.controlHeightLG},[`&-small ${Ke}-button`]:{height:xe.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${_e}-compact-item`]:{[`&:not(${_e}-compact-last-item)`]:{[`${_e}-group-addon`]:{[`${_e}-search-button`]:{marginInlineEnd:xe.calc(xe.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${_e}-compact-first-item)`]:{[`${_e},${_e}-affix-wrapper`]:{borderRadius:0}},[`> ${_e}-group-addon ${_e}-search-button,
        > ${_e},
        ${_e}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${_e}-affix-wrapper-focused`]:{zIndex:2}}}}},De=xe=>{const{componentCls:_e,paddingLG:He}=xe,Ke=`${_e}-textarea`;return{[Ke]:{position:"relative","&-show-count":{[`> ${_e}`]:{height:"100%"},[`${_e}-data-count`]:{position:"absolute",bottom:xe.calc(xe.fontSize).mul(xe.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:xe.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${_e}`]:{paddingInlineEnd:He}},[`&-affix-wrapper${Ke}-has-feedback`]:{[`${_e}`]:{paddingInlineEnd:He}},[`&-affix-wrapper${_e}-affix-wrapper`]:{padding:0,[`> textarea${_e}`]:{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}},[`${_e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${_e}-clear-icon`]:{position:"absolute",insetInlineEnd:xe.paddingXS,insetBlockStart:xe.paddingXS},[`${Ke}-suffix`]:{position:"absolute",top:0,insetInlineEnd:xe.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},Ue=xe=>{const{componentCls:_e}=xe;return{[`${_e}-out-of-range`]:{[`&, & input, & textarea, ${_e}-show-count-suffix, ${_e}-data-count`]:{color:xe.colorError}}}};function at(xe){return(0,G.mergeToken)(xe,{inputAffixPadding:xe.paddingXXS})}const Je=xe=>{const{controlHeight:_e,fontSize:He,lineHeight:Ke,lineWidth:Et,controlHeightSM:ke,controlHeightLG:qe,fontSizeLG:ne,lineHeightLG:Ge,paddingSM:oe,controlPaddingHorizontalSM:Fe,controlPaddingHorizontal:ut,colorFillAlter:Ae,colorPrimaryHover:Le,colorPrimary:rt,controlOutlineWidth:ye,controlOutline:me,colorErrorOutline:We,colorWarningOutline:Ve}=xe;return{paddingBlock:Math.max(Math.round((_e-He*Ke)/2*10)/10-Et,0),paddingBlockSM:Math.max(Math.round((ke-He*Ke)/2*10)/10-Et,0),paddingBlockLG:Math.ceil((qe-ne*Ge)/2*10)/10-Et,paddingInline:oe-Et,paddingInlineSM:Fe-Et,paddingInlineLG:ut-Et,addonBg:Ae,activeBorderColor:rt,hoverBorderColor:Le,activeShadow:`0 0 0 ${ye}px ${me}`,errorActiveShadow:`0 0 0 ${ye}px ${We}`,warningActiveShadow:`0 0 0 ${ye}px ${Ve}`,hoverBg:"",activeBg:""}};N.initComponentToken=Je;var Ze=N.default=(0,G.genStyleHooks)("Input",xe=>{const _e=(0,G.mergeToken)(xe,at(xe));return[M(_e),De(_e),ge(_e),Se(_e),ze(_e),Ue(_e),(0,b.genCompactItemStyle)(_e)]},Je)},36714:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.hasPrefixSuffix=k;function k(W){return!!(W.prefix||W.suffix||W.allowClear)}},44805:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=k(67294);const K=(0,W.createContext)(void 0);var b=N.default=K},18253:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(62273)),b=W(k(1028)),G=W(k(25633)),j=W(k(52040));const q="${label} is not a valid ${type}",Q={locale:"en",Pagination:K.default,DatePicker:G.default,TimePicker:j.default,Calendar:b.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:q,method:q,array:q,object:q,number:q,date:q,boolean:q,integer:q,float:q,regexp:q,email:q,url:q,hex:q},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}};var ie=N.default=Q},24522:function(ft,N,k){"use strict";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=N.ANT_MARK=void 0,Object.defineProperty(N,"useLocale",{enumerable:!0,get:function(){return Q.default}});var b=K(k(67294)),G=k(13594),j=k(10625),q=W(k(44805)),Q=W(k(76647));const ie=N.ANT_MARK="internalMark",te=pe=>{const{locale:fe={},children:J,_ANT_MARK__:M}=pe;b.useEffect(()=>(0,j.changeConfirmLocale)(fe&&fe.Modal),[fe]);const E=b.useMemo(()=>Object.assign(Object.assign({},fe),{exist:!0}),[fe]);return b.createElement(q.default.Provider,{value:E},J)};var Ce=N.default=te},76647:function(ft,N,k){"use strict";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var b=K(k(67294)),G=W(k(44805)),j=W(k(18253));const q=(ie,te)=>{const Ce=b.useContext(G.default),pe=b.useMemo(()=>{var J;const M=te||j.default[ie],E=(J=Ce==null?void 0:Ce[ie])!==null&&J!==void 0?J:{};return Object.assign(Object.assign({},typeof M=="function"?M():M),E||{})},[ie,te,Ce]),fe=b.useMemo(()=>{const J=Ce==null?void 0:Ce.locale;return Ce!=null&&Ce.exist&&!J?j.default.locale:J},[Ce]);return[pe,fe]};var Q=N.default=q},10625:function(ft,N,k){"use strict";"use client";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.changeConfirmLocale=q,N.getConfirmLocale=Q;var K=W(k(18253));let b=Object.assign({},K.default.Modal),G=[];const j=()=>G.reduce((ie,te)=>Object.assign(Object.assign({},ie),te),K.default.Modal);function q(ie){if(ie){const te=Object.assign({},ie);return G.push(te),b=j(),()=>{G=G.filter(Ce=>Ce!==te),b=j()}}b=Object.assign({},K.default.Modal)}function Q(){return b}},46549:function(ft,N,k){"use strict";"use client";var W=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.useCompactItemContext=N.default=N.SpaceCompactItemContext=N.NoCompactStyle=void 0;var b=K(k(93967)),G=K(k(45598)),j=W(k(67294)),q=k(31929),Q=K(k(65693)),ie=K(k(54277)),te=function(ge,Se){var ze={};for(var De in ge)Object.prototype.hasOwnProperty.call(ge,De)&&Se.indexOf(De)<0&&(ze[De]=ge[De]);if(ge!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ue=0,De=Object.getOwnPropertySymbols(ge);Ue<De.length;Ue++)Se.indexOf(De[Ue])<0&&Object.prototype.propertyIsEnumerable.call(ge,De[Ue])&&(ze[De[Ue]]=ge[De[Ue]]);return ze};const Ce=N.SpaceCompactItemContext=j.createContext(null),pe=(ge,Se)=>{const ze=j.useContext(Ce),De=j.useMemo(()=>{if(!ze)return"";const{compactDirection:Ue,isFirstItem:at,isLastItem:Je}=ze,Ze=Ue==="vertical"?"-vertical-":"-";return(0,b.default)(`${ge}-compact${Ze}item`,{[`${ge}-compact${Ze}first-item`]:at,[`${ge}-compact${Ze}last-item`]:Je,[`${ge}-compact${Ze}item-rtl`]:Se==="rtl"})},[ge,Se,ze]);return{compactSize:ze==null?void 0:ze.compactSize,compactDirection:ze==null?void 0:ze.compactDirection,compactItemClassnames:De}};N.useCompactItemContext=pe;const fe=ge=>{let{children:Se}=ge;return j.createElement(Ce.Provider,{value:null},Se)};N.NoCompactStyle=fe;const J=ge=>{var{children:Se}=ge,ze=te(ge,["children"]);return j.createElement(Ce.Provider,{value:ze},Se)},M=ge=>{const{getPrefixCls:Se,direction:ze}=j.useContext(q.ConfigContext),{size:De,direction:Ue,block:at,prefixCls:Je,className:Ze,rootClassName:xe,children:_e}=ge,He=te(ge,["size","direction","block","prefixCls","className","rootClassName","children"]),Ke=(0,Q.default)(ut=>De!=null?De:ut),Et=Se("space-compact",Je),[ke,qe]=(0,ie.default)(Et),ne=(0,b.default)(Et,qe,{[`${Et}-rtl`]:ze==="rtl",[`${Et}-block`]:at,[`${Et}-vertical`]:Ue==="vertical"},Ze,xe),Ge=j.useContext(Ce),oe=(0,G.default)(_e),Fe=j.useMemo(()=>oe.map((ut,Ae)=>{const Le=ut&&ut.key||`${Et}-item-${Ae}`;return j.createElement(J,{key:Le,compactSize:Ke,compactDirection:Ue,isFirstItem:Ae===0&&(!Ge||(Ge==null?void 0:Ge.isFirstItem)),isLastItem:Ae===oe.length-1&&(!Ge||(Ge==null?void 0:Ge.isLastItem))},ut)}),[De,oe,Ge]);return oe.length===0?null:ke(j.createElement("div",Object.assign({className:ne},He),Fe))};var E=N.default=M},35969:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=K=>{const{componentCls:b}=K;return{[b]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};var W=N.default=k},54277:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.prepareComponentToken=N.default=void 0;var K=k(3184),b=W(k(35969));const G=ie=>{const{componentCls:te}=ie;return{[te]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${te}-item:empty`]:{display:"none"}}}},j=ie=>{const{componentCls:te}=ie;return{[te]:{"&-gap-row-small":{rowGap:ie.spaceGapSmallSize},"&-gap-row-middle":{rowGap:ie.spaceGapMiddleSize},"&-gap-row-large":{rowGap:ie.spaceGapLargeSize},"&-gap-col-small":{columnGap:ie.spaceGapSmallSize},"&-gap-col-middle":{columnGap:ie.spaceGapMiddleSize},"&-gap-col-large":{columnGap:ie.spaceGapLargeSize}}}},q=()=>({});N.prepareComponentToken=q;var Q=N.default=(0,K.genStyleHooks)("Space",ie=>{const te=(0,K.mergeToken)(ie,{spaceGapSmallSize:ie.paddingXS,spaceGapMiddleSize:ie.padding,spaceGapLargeSize:ie.paddingLG});return[G(te),j(te),(0,b.default)(te)]},()=>({}),{resetStyle:!1})},78793:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.genCompactItemStyle=K;function k(b,G,j){const{focusElCls:q,focus:Q,borderElCls:ie}=j,te=ie?"> *":"",Ce=["hover",Q?"focus":null,"active"].filter(Boolean).map(pe=>`&:${pe} ${te}`).join(",");return{[`&-item:not(${G}-last-item)`]:{marginInlineEnd:b.calc(b.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[Ce]:{zIndex:2}},q?{[`&${q}`]:{zIndex:2}}:{}),{[`&[disabled] ${te}`]:{zIndex:0}})}}function W(b,G,j){const{borderElCls:q}=j,Q=q?`> ${q}`:"";return{[`&-item:not(${G}-first-item):not(${G}-last-item) ${Q}`]:{borderRadius:0},[`&-item:not(${G}-last-item)${G}-first-item`]:{[`& ${Q}, &${b}-sm ${Q}, &${b}-lg ${Q}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${G}-first-item)${G}-last-item`]:{[`& ${Q}, &${b}-sm ${Q}, &${b}-lg ${Q}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function K(b){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:j}=b,q=`${j}-compact`;return{[q]:Object.assign(Object.assign({},k(b,q,G)),W(j,q,G))}}},98078:function(ft,N,k){"use strict";"use client";Object.defineProperty(N,"__esModule",{value:!0}),N.genLinkStyle=N.genFocusStyle=N.genFocusOutline=N.genCommonStyle=N.clearFix=void 0,Object.defineProperty(N,"operationUnit",{enumerable:!0,get:function(){return K.operationUnit}}),N.textEllipsis=N.resetIcon=N.resetComponent=void 0;var W=k(36939),K=k(22548);const b=N.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},G=function(pe){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:pe.colorText,fontSize:pe.fontSize,lineHeight:pe.lineHeight,listStyle:"none",fontFamily:fe?"inherit":pe.fontFamily}};N.resetComponent=G;const j=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});N.resetIcon=j;const q=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});N.clearFix=q;const Q=pe=>({a:{color:pe.colorLink,textDecoration:pe.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${pe.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:pe.colorLinkHover},"&:active":{color:pe.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:pe.linkHoverDecoration,outline:0},"&:focus":{textDecoration:pe.linkFocusDecoration,outline:0},"&[disabled]":{color:pe.colorTextDisabled,cursor:"not-allowed"}}});N.genLinkStyle=Q;const ie=(pe,fe)=>{const{fontFamily:J,fontSize:M}=pe,E=`[class^="${fe}"], [class*=" ${fe}"]`;return{[E]:{fontFamily:J,fontSize:M,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[E]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}};N.genCommonStyle=ie;const te=pe=>({outline:`${(0,W.unit)(pe.lineWidthFocus)} solid ${pe.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});N.genFocusOutline=te;const Ce=pe=>({"&:focus-visible":Object.assign({},te(pe))});N.genFocusStyle=Ce},57253:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=K=>({[K.componentCls]:{[`${K.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${K.motionDurationMid} ${K.motionEaseInOut},
        opacity ${K.motionDurationMid} ${K.motionEaseInOut} !important`}},[`${K.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${K.motionDurationMid} ${K.motionEaseInOut},
        opacity ${K.motionDurationMid} ${K.motionEaseInOut} !important`}}});var W=N.default=k},84460:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initFadeMotion=N.fadeOut=N.fadeIn=void 0;var W=k(36939),K=k(94631);const b=N.fadeIn=new W.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),G=N.fadeOut=new W.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),j=function(q){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:ie}=q,te=`${ie}-fade`,Ce=Q?"&":"";return[(0,K.initMotion)(te,b,G,q.motionDurationMid,Q),{[`
        ${Ce}${te}-enter,
        ${Ce}${te}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${Ce}${te}-leave`]:{animationTimingFunction:"linear"}}]};N.initFadeMotion=j},42836:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"fadeIn",{enumerable:!0,get:function(){return K.fadeIn}}),Object.defineProperty(N,"fadeOut",{enumerable:!0,get:function(){return K.fadeOut}}),Object.defineProperty(N,"genCollapseMotion",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(N,"initFadeMotion",{enumerable:!0,get:function(){return K.initFadeMotion}}),Object.defineProperty(N,"initMoveMotion",{enumerable:!0,get:function(){return b.initMoveMotion}}),Object.defineProperty(N,"initSlideMotion",{enumerable:!0,get:function(){return G.initSlideMotion}}),Object.defineProperty(N,"initZoomMotion",{enumerable:!0,get:function(){return j.initZoomMotion}}),Object.defineProperty(N,"moveDownIn",{enumerable:!0,get:function(){return b.moveDownIn}}),Object.defineProperty(N,"moveDownOut",{enumerable:!0,get:function(){return b.moveDownOut}}),Object.defineProperty(N,"moveLeftIn",{enumerable:!0,get:function(){return b.moveLeftIn}}),Object.defineProperty(N,"moveLeftOut",{enumerable:!0,get:function(){return b.moveLeftOut}}),Object.defineProperty(N,"moveRightIn",{enumerable:!0,get:function(){return b.moveRightIn}}),Object.defineProperty(N,"moveRightOut",{enumerable:!0,get:function(){return b.moveRightOut}}),Object.defineProperty(N,"moveUpIn",{enumerable:!0,get:function(){return b.moveUpIn}}),Object.defineProperty(N,"moveUpOut",{enumerable:!0,get:function(){return b.moveUpOut}}),Object.defineProperty(N,"slideDownIn",{enumerable:!0,get:function(){return G.slideDownIn}}),Object.defineProperty(N,"slideDownOut",{enumerable:!0,get:function(){return G.slideDownOut}}),Object.defineProperty(N,"slideLeftIn",{enumerable:!0,get:function(){return G.slideLeftIn}}),Object.defineProperty(N,"slideLeftOut",{enumerable:!0,get:function(){return G.slideLeftOut}}),Object.defineProperty(N,"slideRightIn",{enumerable:!0,get:function(){return G.slideRightIn}}),Object.defineProperty(N,"slideRightOut",{enumerable:!0,get:function(){return G.slideRightOut}}),Object.defineProperty(N,"slideUpIn",{enumerable:!0,get:function(){return G.slideUpIn}}),Object.defineProperty(N,"slideUpOut",{enumerable:!0,get:function(){return G.slideUpOut}}),Object.defineProperty(N,"zoomBigIn",{enumerable:!0,get:function(){return j.zoomBigIn}}),Object.defineProperty(N,"zoomBigOut",{enumerable:!0,get:function(){return j.zoomBigOut}}),Object.defineProperty(N,"zoomDownIn",{enumerable:!0,get:function(){return j.zoomDownIn}}),Object.defineProperty(N,"zoomDownOut",{enumerable:!0,get:function(){return j.zoomDownOut}}),Object.defineProperty(N,"zoomIn",{enumerable:!0,get:function(){return j.zoomIn}}),Object.defineProperty(N,"zoomLeftIn",{enumerable:!0,get:function(){return j.zoomLeftIn}}),Object.defineProperty(N,"zoomLeftOut",{enumerable:!0,get:function(){return j.zoomLeftOut}}),Object.defineProperty(N,"zoomOut",{enumerable:!0,get:function(){return j.zoomOut}}),Object.defineProperty(N,"zoomRightIn",{enumerable:!0,get:function(){return j.zoomRightIn}}),Object.defineProperty(N,"zoomRightOut",{enumerable:!0,get:function(){return j.zoomRightOut}}),Object.defineProperty(N,"zoomUpIn",{enumerable:!0,get:function(){return j.zoomUpIn}}),Object.defineProperty(N,"zoomUpOut",{enumerable:!0,get:function(){return j.zoomUpOut}});var K=k(84460),b=k(17060),G=k(17581),j=k(99269),q=W(k(57253))},94631:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.initMotion=void 0;const k=b=>({animationDuration:b,animationFillMode:"both"}),W=b=>({animationDuration:b,animationFillMode:"both"}),K=function(b,G,j,q){const ie=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${ie}${b}-enter,
      ${ie}${b}-appear
    `]:Object.assign(Object.assign({},k(q)),{animationPlayState:"paused"}),[`${ie}${b}-leave`]:Object.assign(Object.assign({},W(q)),{animationPlayState:"paused"}),[`
      ${ie}${b}-enter${b}-enter-active,
      ${ie}${b}-appear${b}-appear-active
    `]:{animationName:G,animationPlayState:"running"},[`${ie}${b}-leave${b}-leave-active`]:{animationName:j,animationPlayState:"running",pointerEvents:"none"}}};N.initMotion=K},17060:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.moveUpOut=N.moveUpIn=N.moveRightOut=N.moveRightIn=N.moveLeftOut=N.moveLeftIn=N.moveDownOut=N.moveDownIn=N.initMoveMotion=void 0;var W=k(36939),K=k(94631);const b=N.moveDownIn=new W.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),G=N.moveDownOut=new W.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),j=N.moveLeftIn=new W.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),q=N.moveLeftOut=new W.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),Q=N.moveRightIn=new W.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ie=N.moveRightOut=new W.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),te=N.moveUpIn=new W.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Ce=N.moveUpOut=new W.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),pe={"move-up":{inKeyframes:te,outKeyframes:Ce},"move-down":{inKeyframes:b,outKeyframes:G},"move-left":{inKeyframes:j,outKeyframes:q},"move-right":{inKeyframes:Q,outKeyframes:ie}},fe=(J,M)=>{const{antCls:E}=J,ge=`${E}-${M}`,{inKeyframes:Se,outKeyframes:ze}=pe[M];return[(0,K.initMotion)(ge,Se,ze,J.motionDurationMid),{[`
        ${ge}-enter,
        ${ge}-appear
      `]:{opacity:0,animationTimingFunction:J.motionEaseOutCirc},[`${ge}-leave`]:{animationTimingFunction:J.motionEaseInOutCirc}}]};N.initMoveMotion=fe},17581:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.slideUpOut=N.slideUpIn=N.slideRightOut=N.slideRightIn=N.slideLeftOut=N.slideLeftIn=N.slideDownOut=N.slideDownIn=N.initSlideMotion=void 0;var W=k(36939),K=k(94631);const b=N.slideUpIn=new W.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),G=N.slideUpOut=new W.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),j=N.slideDownIn=new W.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),q=N.slideDownOut=new W.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Q=N.slideLeftIn=new W.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),ie=N.slideLeftOut=new W.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),te=N.slideRightIn=new W.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),Ce=N.slideRightOut=new W.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),pe={"slide-up":{inKeyframes:b,outKeyframes:G},"slide-down":{inKeyframes:j,outKeyframes:q},"slide-left":{inKeyframes:Q,outKeyframes:ie},"slide-right":{inKeyframes:te,outKeyframes:Ce}},fe=(J,M)=>{const{antCls:E}=J,ge=`${E}-${M}`,{inKeyframes:Se,outKeyframes:ze}=pe[M];return[(0,K.initMotion)(ge,Se,ze,J.motionDurationMid),{[`
      ${ge}-enter,
      ${ge}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:J.motionEaseOutQuint,["&-prepare"]:{transform:"scale(1)"}},[`${ge}-leave`]:{animationTimingFunction:J.motionEaseInQuint}}]};N.initSlideMotion=fe},99269:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.zoomUpOut=N.zoomUpIn=N.zoomRightOut=N.zoomRightIn=N.zoomOut=N.zoomLeftOut=N.zoomLeftIn=N.zoomIn=N.zoomDownOut=N.zoomDownIn=N.zoomBigOut=N.zoomBigIn=N.initZoomMotion=void 0;var W=k(36939),K=k(94631);const b=N.zoomIn=new W.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),G=N.zoomOut=new W.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),j=N.zoomBigIn=new W.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),q=N.zoomBigOut=new W.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),Q=N.zoomUpIn=new W.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),ie=N.zoomUpOut=new W.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),te=N.zoomLeftIn=new W.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),Ce=N.zoomLeftOut=new W.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),pe=N.zoomRightIn=new W.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),fe=N.zoomRightOut=new W.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),J=N.zoomDownIn=new W.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),M=N.zoomDownOut=new W.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),E={zoom:{inKeyframes:b,outKeyframes:G},"zoom-big":{inKeyframes:j,outKeyframes:q},"zoom-big-fast":{inKeyframes:j,outKeyframes:q},"zoom-left":{inKeyframes:te,outKeyframes:Ce},"zoom-right":{inKeyframes:pe,outKeyframes:fe},"zoom-up":{inKeyframes:Q,outKeyframes:ie},"zoom-down":{inKeyframes:J,outKeyframes:M}},ge=(Se,ze)=>{const{antCls:De}=Se,Ue=`${De}-${ze}`,{inKeyframes:at,outKeyframes:Je}=E[ze];return[(0,K.initMotion)(Ue,at,Je,ze==="zoom-big-fast"?Se.motionDurationFast:Se.motionDurationMid),{[`
        ${Ue}-enter,
        ${Ue}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:Se.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${Ue}-leave`]:{animationTimingFunction:Se.motionEaseInOutCirc}}]};N.initZoomMotion=ge},22548:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.operationUnit=void 0;const k=W=>({color:W.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${W.motionDurationSlow}`,"&:focus, &:hover":{color:W.colorLinkHover},"&:active":{color:W.colorLinkActive}});N.operationUnit=k},9064:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.MAX_VERTICAL_CONTENT_RADIUS=void 0,N.default=j,N.getArrowOffsetToken=b;var W=k(51337);const K=N.MAX_VERTICAL_CONTENT_RADIUS=8;function b(q){const{contentRadius:Q,limitVerticalRadius:ie}=q,te=Q>12?Q+2:12;return{arrowOffsetHorizontal:te,arrowOffsetVertical:ie?K:te}}function G(q,Q){return q?Q:{}}function j(q,Q,ie){const{componentCls:te,boxShadowPopoverArrow:Ce,arrowOffsetVertical:pe,arrowOffsetHorizontal:fe}=q,{arrowDistance:J=0,arrowPlacement:M={left:!0,right:!0,top:!0,bottom:!0}}=ie||{};return{[te]:Object.assign(Object.assign(Object.assign(Object.assign({[`${te}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,W.genRoundedArrow)(q,Q,Ce)),{"&:before":{background:Q}})]},G(!!M.top,{[[`&-placement-top > ${te}-arrow`,`&-placement-topLeft > ${te}-arrow`,`&-placement-topRight > ${te}-arrow`].join(",")]:{bottom:J,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${te}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${te}-arrow`]:{left:{_skip_check_:!0,value:fe}},[`&-placement-topRight > ${te}-arrow`]:{right:{_skip_check_:!0,value:fe}}})),G(!!M.bottom,{[[`&-placement-bottom > ${te}-arrow`,`&-placement-bottomLeft > ${te}-arrow`,`&-placement-bottomRight > ${te}-arrow`].join(",")]:{top:J,transform:"translateY(-100%)"},[`&-placement-bottom > ${te}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${te}-arrow`]:{left:{_skip_check_:!0,value:fe}},[`&-placement-bottomRight > ${te}-arrow`]:{right:{_skip_check_:!0,value:fe}}})),G(!!M.left,{[[`&-placement-left > ${te}-arrow`,`&-placement-leftTop > ${te}-arrow`,`&-placement-leftBottom > ${te}-arrow`].join(",")]:{right:{_skip_check_:!0,value:J},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${te}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${te}-arrow`]:{top:pe},[`&-placement-leftBottom > ${te}-arrow`]:{bottom:pe}})),G(!!M.right,{[[`&-placement-right > ${te}-arrow`,`&-placement-rightTop > ${te}-arrow`,`&-placement-rightBottom > ${te}-arrow`].join(",")]:{left:{_skip_check_:!0,value:J},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${te}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${te}-arrow`]:{top:pe},[`&-placement-rightBottom > ${te}-arrow`]:{bottom:pe}}))}}},51337:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.genRoundedArrow=void 0,N.getArrowToken=K;var W=k(36939);function K(G){const{sizePopupArrow:j,borderRadiusXS:q,borderRadiusOuter:Q}=G,ie=j/2,te=0,Ce=ie,pe=Q*1/Math.sqrt(2),fe=ie-Q*(1-1/Math.sqrt(2)),J=ie-q*(1/Math.sqrt(2)),M=Q*(Math.sqrt(2)-1)+q*(1/Math.sqrt(2)),E=2*ie-J,ge=M,Se=2*ie-pe,ze=fe,De=2*ie-te,Ue=Ce,at=ie*Math.sqrt(2)+Q*(Math.sqrt(2)-2),Je=Q*(Math.sqrt(2)-1),Ze=`polygon(${Je}px 100%, 50% ${Je}px, ${2*ie-Je}px 100%, ${Je}px 100%)`,xe=`path('M ${te} ${Ce} A ${Q} ${Q} 0 0 0 ${pe} ${fe} L ${J} ${M} A ${q} ${q} 0 0 1 ${E} ${ge} L ${Se} ${ze} A ${Q} ${Q} 0 0 0 ${De} ${Ue} Z')`;return{arrowShadowWidth:at,arrowPath:xe,arrowPolygon:Ze}}const b=(G,j,q)=>{const{sizePopupArrow:Q,arrowPolygon:ie,arrowPath:te,arrowShadowWidth:Ce,borderRadiusXS:pe,calc:fe}=G;return{pointerEvents:"none",width:Q,height:Q,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:Q,height:fe(Q).div(2).equal(),background:j,clipPath:{_multi_value_:!0,value:[ie,te]},content:'""'},"&::after":{content:'""',position:"absolute",width:Ce,height:Ce,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,W.unit)(pe)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:q,zIndex:0,background:"transparent"}}};N.genRoundedArrow=b},89329:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.defaultTheme=N.defaultConfig=N.DesignTokenContext=void 0;var K=W(k(67294)),b=k(36939),G=W(k(91085)),j=W(k(98411));const q=N.defaultTheme=(0,b.createTheme)(G.default),Q=N.defaultConfig={token:j.default,override:{override:j.default},hashed:!0},ie=N.DesignTokenContext=K.default.createContext(Q)},36496:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"PresetColors",{enumerable:!0,get:function(){return W.PresetColors}});var W=k(81342)},81342:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.PresetColors=void 0;const k=N.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},3184:function(ft,N,k){"use strict";var W=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"DesignTokenContext",{enumerable:!0,get:function(){return pe.DesignTokenContext}}),Object.defineProperty(N,"PresetColors",{enumerable:!0,get:function(){return G.PresetColors}}),Object.defineProperty(N,"calc",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(N,"defaultConfig",{enumerable:!0,get:function(){return pe.defaultConfig}}),Object.defineProperty(N,"genComponentStyleHook",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(N,"genPresetColor",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(N,"genStyleHooks",{enumerable:!0,get:function(){return q.genStyleHooks}}),Object.defineProperty(N,"genSubStyleComponent",{enumerable:!0,get:function(){return q.genSubStyleComponent}}),Object.defineProperty(N,"mergeToken",{enumerable:!0,get:function(){return ie.merge}}),Object.defineProperty(N,"statisticToken",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(N,"useResetIconStyle",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(N,"useStyleRegister",{enumerable:!0,get:function(){return b.useStyleRegister}}),Object.defineProperty(N,"useToken",{enumerable:!0,get:function(){return j.default}});var b=k(36939),G=k(36496),j=K(k(41401)),q=W(k(3737)),Q=K(k(36219)),ie=W(k(99636)),te=K(k(54894)),Ce=K(k(22996)),pe=k(89329)},26162:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getSolidColor=N.getAlphaColor=void 0;var W=k(77204);const K=(G,j)=>new W.TinyColor(G).setAlpha(j).toRgbString();N.getAlphaColor=K;const b=(G,j)=>new W.TinyColor(G).darken(j).toHexString();N.getSolidColor=b},80373:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.generateNeutralColorPalettes=N.generateColorPalettes=void 0;var W=k(78589),K=k(26162);const b=j=>{const q=(0,W.generate)(j);return{1:q[0],2:q[1],3:q[2],4:q[3],5:q[4],6:q[5],7:q[6],8:q[4],9:q[5],10:q[6]}};N.generateColorPalettes=b;const G=(j,q)=>{const Q=j||"#fff",ie=q||"#000";return{colorBgBase:Q,colorTextBase:ie,colorText:(0,K.getAlphaColor)(ie,.88),colorTextSecondary:(0,K.getAlphaColor)(ie,.65),colorTextTertiary:(0,K.getAlphaColor)(ie,.45),colorTextQuaternary:(0,K.getAlphaColor)(ie,.25),colorFill:(0,K.getAlphaColor)(ie,.15),colorFillSecondary:(0,K.getAlphaColor)(ie,.06),colorFillTertiary:(0,K.getAlphaColor)(ie,.04),colorFillQuaternary:(0,K.getAlphaColor)(ie,.02),colorBgLayout:(0,K.getSolidColor)(Q,4),colorBgContainer:(0,K.getSolidColor)(Q,0),colorBgElevated:(0,K.getSolidColor)(Q,0),colorBgSpotlight:(0,K.getAlphaColor)(ie,.85),colorBgBlur:"transparent",colorBorder:(0,K.getSolidColor)(Q,15),colorBorderSecondary:(0,K.getSolidColor)(Q,6)}};N.generateNeutralColorPalettes=G},91085:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=Ce;var K=k(78589),b=W(k(54730)),G=W(k(19216)),j=k(98411),q=W(k(10805)),Q=W(k(81594)),ie=k(80373),te=W(k(69853));function Ce(pe){const fe=Object.keys(j.defaultPresetColors).map(J=>{const M=(0,K.generate)(pe[J]);return new Array(10).fill(1).reduce((E,ge,Se)=>(E[`${J}-${Se+1}`]=M[Se],E[`${J}${Se+1}`]=M[Se],E),{})}).reduce((J,M)=>(J=Object.assign(Object.assign({},J),M),J),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},pe),fe),(0,q.default)(pe,{generateColorPalettes:ie.generateColorPalettes,generateNeutralColorPalettes:ie.generateNeutralColorPalettes})),(0,te.default)(pe.fontSize)),(0,G.default)(pe)),(0,b.default)(pe)),(0,Q.default)(pe))}},98411:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.defaultPresetColors=N.default=void 0;const k=N.defaultPresetColors={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},W=Object.assign(Object.assign({},k),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var K=N.default=W},10805:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=K;var W=k(77204);function K(b,G){let{generateColorPalettes:j,generateNeutralColorPalettes:q}=G;const{colorSuccess:Q,colorWarning:ie,colorError:te,colorInfo:Ce,colorPrimary:pe,colorBgBase:fe,colorTextBase:J}=b,M=j(pe),E=j(Q),ge=j(ie),Se=j(te),ze=j(Ce),De=q(fe,J),Ue=b.colorLink||b.colorInfo,at=j(Ue);return Object.assign(Object.assign({},De),{colorPrimaryBg:M[1],colorPrimaryBgHover:M[2],colorPrimaryBorder:M[3],colorPrimaryBorderHover:M[4],colorPrimaryHover:M[5],colorPrimary:M[6],colorPrimaryActive:M[7],colorPrimaryTextHover:M[8],colorPrimaryText:M[9],colorPrimaryTextActive:M[10],colorSuccessBg:E[1],colorSuccessBgHover:E[2],colorSuccessBorder:E[3],colorSuccessBorderHover:E[4],colorSuccessHover:E[4],colorSuccess:E[6],colorSuccessActive:E[7],colorSuccessTextHover:E[8],colorSuccessText:E[9],colorSuccessTextActive:E[10],colorErrorBg:Se[1],colorErrorBgHover:Se[2],colorErrorBorder:Se[3],colorErrorBorderHover:Se[4],colorErrorHover:Se[5],colorError:Se[6],colorErrorActive:Se[7],colorErrorTextHover:Se[8],colorErrorText:Se[9],colorErrorTextActive:Se[10],colorWarningBg:ge[1],colorWarningBgHover:ge[2],colorWarningBorder:ge[3],colorWarningBorderHover:ge[4],colorWarningHover:ge[4],colorWarning:ge[6],colorWarningActive:ge[7],colorWarningTextHover:ge[8],colorWarningText:ge[9],colorWarningTextActive:ge[10],colorInfoBg:ze[1],colorInfoBgHover:ze[2],colorInfoBorder:ze[3],colorInfoBorderHover:ze[4],colorInfoHover:ze[4],colorInfo:ze[6],colorInfoActive:ze[7],colorInfoTextHover:ze[8],colorInfoText:ze[9],colorInfoTextActive:ze[10],colorLinkHover:at[4],colorLink:at[6],colorLinkActive:at[7],colorBgMask:new W.TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},81594:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=b;var K=W(k(78117));function b(G){const{motionUnit:j,motionBase:q,borderRadius:Q,lineWidth:ie}=G;return Object.assign({motionDurationFast:`${(q+j).toFixed(1)}s`,motionDurationMid:`${(q+j*2).toFixed(1)}s`,motionDurationSlow:`${(q+j*3).toFixed(1)}s`,lineWidthBold:ie+1},(0,K.default)(Q))}},54730:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=K=>{const{controlHeight:b}=K;return{controlHeightSM:b*.75,controlHeightXS:b*.5,controlHeightLG:b*1.25}};var W=N.default=k},69853:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(62231));const b=j=>{const q=(0,K.default)(j),Q=q.map(E=>E.size),ie=q.map(E=>E.lineHeight),te=Q[1],Ce=Q[0],pe=Q[2],fe=ie[1],J=ie[0],M=ie[2];return{fontSizeSM:Ce,fontSize:te,fontSizeLG:pe,fontSizeXL:Q[3],fontSizeHeading1:Q[6],fontSizeHeading2:Q[5],fontSizeHeading3:Q[4],fontSizeHeading4:Q[3],fontSizeHeading5:Q[2],lineHeight:fe,lineHeightLG:M,lineHeightSM:J,fontHeight:Math.round(fe*te),fontHeightLG:Math.round(M*pe),fontHeightSM:Math.round(J*Ce),lineHeightHeading1:ie[6],lineHeightHeading2:ie[5],lineHeightHeading3:ie[4],lineHeightHeading4:ie[3],lineHeightHeading5:ie[2]}};var G=N.default=b},62231:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=k;function k(W){const K=new Array(10).fill(null).map((b,G)=>{const j=G-1,q=W*Math.pow(2.71828,j/5),Q=G>1?Math.floor(q):Math.ceil(q);return Math.floor(Q/2)*2});return K[1]=W,K.map(b=>{const G=b+8;return{size:b,lineHeight:G/b}})}},78117:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k=K=>{let b=K,G=K,j=K,q=K;return K<6&&K>=5?b=K+1:K<16&&K>=6?b=K+2:K>=16&&(b=16),K<7&&K>=5?G=4:K<8&&K>=7?G=5:K<14&&K>=8?G=6:K<16&&K>=14?G=7:K>=16&&(G=8),K<6&&K>=2?j=1:K>=6&&(j=2),K>4&&K<8?q=4:K>=8&&(q=6),{borderRadius:K,borderRadiusXS:j,borderRadiusSM:G,borderRadiusLG:b,borderRadiusOuter:q}};var W=N.default=k},19216:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=k;function k(W){const{sizeUnit:K,sizeStep:b}=W;return{sizeXXL:K*(b+8),sizeXL:K*(b+4),sizeLG:K*(b+2),sizeMD:K*(b+1),sizeMS:K*b,size:K*b,sizeSM:K*(b-1),sizeXS:K*(b-2),sizeXXS:K*(b-3)}}},41401:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=J,N.unitless=N.ignore=N.getComputedToken=void 0;var K=W(k(67294)),b=k(36939),G=W(k(87629)),j=k(89329),q=W(k(98411)),Q=W(k(27722)),ie=function(M,E){var ge={};for(var Se in M)Object.prototype.hasOwnProperty.call(M,Se)&&E.indexOf(Se)<0&&(ge[Se]=M[Se]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ze=0,Se=Object.getOwnPropertySymbols(M);ze<Se.length;ze++)E.indexOf(Se[ze])<0&&Object.prototype.propertyIsEnumerable.call(M,Se[ze])&&(ge[Se[ze]]=M[Se[ze]]);return ge};const te=N.unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},Ce=N.ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},pe={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},fe=(M,E,ge)=>{const Se=ge.getDerivativeToken(M),{override:ze}=E,De=ie(E,["override"]);let Ue=Object.assign(Object.assign({},Se),{override:ze});return Ue=(0,Q.default)(Ue),De&&Object.entries(De).forEach(at=>{let[Je,Ze]=at;const{theme:xe}=Ze,_e=ie(Ze,["theme"]);let He=_e;xe&&(He=fe(Object.assign(Object.assign({},Ue),_e),{override:_e},xe)),Ue[Je]=He}),Ue};N.getComputedToken=fe;function J(){const{token:M,hashed:E,theme:ge,override:Se,cssVar:ze}=K.default.useContext(j.DesignTokenContext),De=`${G.default}-${E||""}`,Ue=ge||j.defaultTheme,[at,Je,Ze]=(0,b.useCacheToken)(Ue,[q.default,M],{salt:De,override:Se,getComputedToken:fe,formatToken:Q.default,cssVar:ze&&{prefix:ze.prefix,key:ze.key,unitless:te,ignore:Ce,preserve:pe}});return[Ue,Ze,E?Je:"",at,ze]}},27722:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=q;var K=k(77204),b=W(k(98411)),G=W(k(83609)),j=function(Q,ie){var te={};for(var Ce in Q)Object.prototype.hasOwnProperty.call(Q,Ce)&&ie.indexOf(Ce)<0&&(te[Ce]=Q[Ce]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var pe=0,Ce=Object.getOwnPropertySymbols(Q);pe<Ce.length;pe++)ie.indexOf(Ce[pe])<0&&Object.prototype.propertyIsEnumerable.call(Q,Ce[pe])&&(te[Ce[pe]]=Q[Ce[pe]]);return te};function q(Q){const{override:ie}=Q,te=j(Q,["override"]),Ce=Object.assign({},ie);Object.keys(b.default).forEach(De=>{delete Ce[De]});const pe=Object.assign(Object.assign({},te),Ce),fe=480,J=576,M=768,E=992,ge=1200,Se=1600;if(pe.motion===!1){const De="0s";pe.motionDurationFast=De,pe.motionDurationMid=De,pe.motionDurationSlow=De}return Object.assign(Object.assign(Object.assign({},pe),{colorFillContent:pe.colorFillSecondary,colorFillContentHover:pe.colorFill,colorFillAlter:pe.colorFillQuaternary,colorBgContainerDisabled:pe.colorFillTertiary,colorBorderBg:pe.colorBgContainer,colorSplit:(0,G.default)(pe.colorBorderSecondary,pe.colorBgContainer),colorTextPlaceholder:pe.colorTextQuaternary,colorTextDisabled:pe.colorTextQuaternary,colorTextHeading:pe.colorText,colorTextLabel:pe.colorTextSecondary,colorTextDescription:pe.colorTextTertiary,colorTextLightSolid:pe.colorWhite,colorHighlight:pe.colorError,colorBgTextHover:pe.colorFillSecondary,colorBgTextActive:pe.colorFill,colorIcon:pe.colorTextTertiary,colorIconHover:pe.colorText,colorErrorOutline:(0,G.default)(pe.colorErrorBg,pe.colorBgContainer),colorWarningOutline:(0,G.default)(pe.colorWarningBg,pe.colorBgContainer),fontSizeIcon:pe.fontSizeSM,lineWidthFocus:pe.lineWidth*4,lineWidth:pe.lineWidth,controlOutlineWidth:pe.lineWidth*2,controlInteractiveSize:pe.controlHeight/2,controlItemBgHover:pe.colorFillTertiary,controlItemBgActive:pe.colorPrimaryBg,controlItemBgActiveHover:pe.colorPrimaryBgHover,controlItemBgActiveDisabled:pe.colorFill,controlTmpOutline:pe.colorFillQuaternary,controlOutline:(0,G.default)(pe.colorPrimaryBg,pe.colorBgContainer),lineType:pe.lineType,borderRadius:pe.borderRadius,borderRadiusXS:pe.borderRadiusXS,borderRadiusSM:pe.borderRadiusSM,borderRadiusLG:pe.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:pe.sizeXXS,paddingXS:pe.sizeXS,paddingSM:pe.sizeSM,padding:pe.size,paddingMD:pe.sizeMD,paddingLG:pe.sizeLG,paddingXL:pe.sizeXL,paddingContentHorizontalLG:pe.sizeLG,paddingContentVerticalLG:pe.sizeMS,paddingContentHorizontal:pe.sizeMS,paddingContentVertical:pe.sizeSM,paddingContentHorizontalSM:pe.size,paddingContentVerticalSM:pe.sizeXS,marginXXS:pe.sizeXXS,marginXS:pe.sizeXS,marginSM:pe.sizeSM,margin:pe.size,marginMD:pe.sizeMD,marginLG:pe.sizeLG,marginXL:pe.sizeXL,marginXXL:pe.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:fe,screenXSMin:fe,screenXSMax:J-1,screenSM:J,screenSMMin:J,screenSMMax:M-1,screenMD:M,screenMDMin:M,screenMDMax:E-1,screenLG:E,screenLGMin:E,screenLGMax:ge-1,screenXL:ge,screenXLMin:ge,screenXLMax:Se-1,screenXXL:Se,screenXXLMin:Se,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new K.TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new K.TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new K.TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),Ce)}},24312:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(56690)),b=W(k(89728)),G=W(k(61655)),j=W(k(26389)),q=W(k(38194));const Q="CALC_UNIT";function ie(Ce){return typeof Ce=="number"?`${Ce}${Q}`:Ce}let te=N.default=function(Ce){(0,G.default)(fe,Ce);var pe=(0,j.default)(fe);function fe(J){var M;return(0,K.default)(this,fe),M=pe.call(this),M.result="",J instanceof fe?M.result=`(${J.result})`:typeof J=="number"?M.result=ie(J):typeof J=="string"&&(M.result=J),M}return(0,b.default)(fe,[{key:"add",value:function(M){return M instanceof fe?this.result=`${this.result} + ${M.getResult()}`:(typeof M=="number"||typeof M=="string")&&(this.result=`${this.result} + ${ie(M)}`),this.lowPriority=!0,this}},{key:"sub",value:function(M){return M instanceof fe?this.result=`${this.result} - ${M.getResult()}`:(typeof M=="number"||typeof M=="string")&&(this.result=`${this.result} - ${ie(M)}`),this.lowPriority=!0,this}},{key:"mul",value:function(M){return this.lowPriority&&(this.result=`(${this.result})`),M instanceof fe?this.result=`${this.result} * ${M.getResult(!0)}`:(typeof M=="number"||typeof M=="string")&&(this.result=`${this.result} * ${M}`),this.lowPriority=!1,this}},{key:"div",value:function(M){return this.lowPriority&&(this.result=`(${this.result})`),M instanceof fe?this.result=`${this.result} / ${M.getResult(!0)}`:(typeof M=="number"||typeof M=="string")&&(this.result=`${this.result} / ${M}`),this.lowPriority=!1,this}},{key:"getResult",value:function(M){return this.lowPriority||M?`(${this.result})`:this.result}},{key:"equal",value:function(M){const{unit:E=!0}=M||{},ge=new RegExp(`${Q}`,"g");return this.result=this.result.replace(ge,E?"px":""),typeof this.lowPriority!="undefined"?`calc(${this.result})`:this.result}}]),fe}(q.default)},14774:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(56690)),b=W(k(89728)),G=W(k(61655)),j=W(k(26389)),q=W(k(38194));let Q=N.default=function(ie){(0,G.default)(Ce,ie);var te=(0,j.default)(Ce);function Ce(pe){var fe;return(0,K.default)(this,Ce),fe=te.call(this),fe.result=0,pe instanceof Ce?fe.result=pe.result:typeof pe=="number"&&(fe.result=pe),fe}return(0,b.default)(Ce,[{key:"add",value:function(fe){return fe instanceof Ce?this.result+=fe.result:typeof fe=="number"&&(this.result+=fe),this}},{key:"sub",value:function(fe){return fe instanceof Ce?this.result-=fe.result:typeof fe=="number"&&(this.result-=fe),this}},{key:"mul",value:function(fe){return fe instanceof Ce?this.result*=fe.result:typeof fe=="number"&&(this.result*=fe),this}},{key:"div",value:function(fe){return fe instanceof Ce?this.result/=fe.result:typeof fe=="number"&&(this.result/=fe),this}},{key:"equal",value:function(){return this.result}}]),Ce}(q.default)},38194:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(89728)),b=W(k(56690));let G=(0,K.default)(function q(){(0,b.default)(this,q)});var j=N.default=G},22996:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(14774)),b=W(k(24312));const G=q=>{const Q=q==="css"?b.default:K.default;return ie=>new Q(ie)};var j=N.default=G},3737:function(ft,N,k){"use strict";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=ge,N.genSubStyleComponent=N.genStyleHooks=void 0;var b=K(k(67294)),G=k(36939),j=k(56790),q=k(7177),Q=k(98078),ie=K(k(41401)),te=W(k(22996)),Ce=W(k(1657)),pe=K(k(99636)),fe=W(k(54894));const J=(Ue,at,Je)=>{var Ze;return typeof Je=="function"?Je((0,pe.merge)(at,(Ze=at[Ue])!==null&&Ze!==void 0?Ze:{})):Je!=null?Je:{}},M=(Ue,at,Je,Ze)=>{const xe=Object.assign({},at[Ue]);if(Ze!=null&&Ze.deprecatedTokens){const{deprecatedTokens:He}=Ze;He.forEach(Ke=>{let[Et,ke]=Ke;var qe;(xe!=null&&xe[Et]||xe!=null&&xe[ke])&&((qe=xe[ke])!==null&&qe!==void 0||(xe[ke]=xe==null?void 0:xe[Et]))})}let _e=Object.assign(Object.assign({},Je),xe);return Ze!=null&&Ze.format&&(_e=Ze.format(_e)),Object.keys(_e).forEach(He=>{_e[He]===at[He]&&delete _e[He]}),_e},E=(Ue,at)=>`${[at,Ue.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function ge(Ue,at,Je){let Ze=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const xe=Array.isArray(Ue)?Ue:[Ue,Ue],[_e]=xe,He=xe.join("-");return Ke=>{const[Et,ke,qe,ne,Ge]=(0,ie.default)(),{getPrefixCls:oe,iconPrefixCls:Fe,csp:ut}=(0,b.useContext)(q.ConfigContext),Ae=oe(),Le=Ge?"css":"js",rt=(0,te.default)(Le),{max:ye,min:me}=(0,Ce.default)(Le),We={theme:Et,token:ne,hashId:qe,nonce:()=>ut==null?void 0:ut.nonce,clientOnly:Ze.clientOnly,order:Ze.order||-999};return(0,G.useStyleRegister)(Object.assign(Object.assign({},We),{clientOnly:!1,path:["Shared",Ae]}),()=>[{"&":(0,Q.genLinkStyle)(ne)}]),(0,fe.default)(Fe,ut),[(0,G.useStyleRegister)(Object.assign(Object.assign({},We),{path:[He,Ke,Fe]}),()=>{if(Ze.injectStyle===!1)return[];const{token:dt,flush:Ht}=(0,pe.default)(ne),et=J(_e,ke,Je),$e=`.${Ke}`,Te=M(_e,ke,et,{deprecatedTokens:Ze.deprecatedTokens,format:Ze.format});Ge&&Object.keys(et).forEach(Oe=>{et[Oe]=`var(${(0,G.token2CSSVar)(Oe,E(_e,Ge.prefix))})`});const Xe=(0,pe.merge)(dt,{componentCls:$e,prefixCls:Ke,iconCls:`.${Fe}`,antCls:`.${Ae}`,calc:rt,max:ye,min:me},Ge?et:Te),pt=at(Xe,{hashId:qe,prefixCls:Ke,rootPrefixCls:Ae,iconPrefixCls:Fe});return Ht(_e,Te),[Ze.resetStyle===!1?null:(0,Q.genCommonStyle)(Xe,Ke),pt]}),qe]}}const Se=(Ue,at,Je,Ze)=>{const xe=ge(Ue,at,Je,Object.assign({resetStyle:!1,order:-998},Ze));return He=>{let{prefixCls:Ke}=He;return xe(Ke),null}};N.genSubStyleComponent=Se;const ze=(Ue,at,Je)=>{function Ze(ke){return`${Ue}${ke.slice(0,1).toUpperCase()}${ke.slice(1)}`}const{unitless:xe={},injectStyle:_e=!0}=Je!=null?Je:{},He={[Ze("zIndexPopup")]:!0};Object.keys(xe).forEach(ke=>{He[Ze(ke)]=xe[ke]});const Ke=ke=>{let{rootCls:qe,cssVar:ne}=ke;const[,Ge]=(0,ie.default)();return(0,G.useCSSVarRegister)({path:[Ue],prefix:ne.prefix,key:ne==null?void 0:ne.key,unitless:Object.assign(Object.assign({},ie.unitless),He),ignore:ie.ignore,token:Ge,scope:qe},()=>{const oe=J(Ue,Ge,at),Fe=M(Ue,Ge,oe,{format:Je==null?void 0:Je.format,deprecatedTokens:Je==null?void 0:Je.deprecatedTokens});return Object.keys(oe).forEach(ut=>{Fe[Ze(ut)]=Fe[ut],delete Fe[ut]}),Fe}),null};return ke=>{const[,,,,qe]=(0,ie.default)();return[ne=>_e&&qe?b.default.createElement(b.default.Fragment,null,b.default.createElement(Ke,{rootCls:ke,cssVar:qe,component:Ue}),ne):ne,qe==null?void 0:qe.key]}},De=(Ue,at,Je,Ze)=>{const xe=ge(Ue,at,Je,Ze),_e=ze(Array.isArray(Ue)?Ue[0]:Ue,Je,Ze);return function(He){let Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:He;const[,Et]=xe(He),[ke,qe]=_e(Ke);return[ke,Et,qe]}};N.genStyleHooks=De},36219:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=K;var W=k(36496);function K(b,G){return W.PresetColors.reduce((j,q)=>{const Q=b[`${q}1`],ie=b[`${q}3`],te=b[`${q}6`],Ce=b[`${q}7`];return Object.assign(Object.assign({},j),G(q,{lightColor:Q,lightBorderColor:ie,darkColor:te,textColor:Ce}))},{})}},83609:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var W=k(77204);function K(j){return j>=0&&j<=255}function b(j,q){const{r:Q,g:ie,b:te,a:Ce}=new W.TinyColor(j).toRgb();if(Ce<1)return j;const{r:pe,g:fe,b:J}=new W.TinyColor(q).toRgb();for(let M=.01;M<=1;M+=.01){const E=Math.round((Q-pe*(1-M))/M),ge=Math.round((ie-fe*(1-M))/M),Se=Math.round((te-J*(1-M))/M);if(K(E)&&K(ge)&&K(Se))return new W.TinyColor({r:E,g:ge,b:Se,a:Math.round(M*100)/100}).toRgbString()}return new W.TinyColor({r:Q,g:ie,b:te,a:1}).toRgbString()}var G=N.default=b},1657:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=K;var W=k(36939);function K(b){return b==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var G=arguments.length,j=new Array(G),q=0;q<G;q++)j[q]=arguments[q];return`max(${j.map(Q=>(0,W.unit)(Q)).join(",")})`},min:function(){for(var G=arguments.length,j=new Array(G),q=0;q<G;q++)j[q]=arguments[q];return`min(${j.map(Q=>(0,W.unit)(Q)).join(",")})`}}}},99636:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=N._statistic_build_=void 0,N.merge=K,N.statistic=void 0;const k=typeof CSSINJS_STATISTIC!="undefined";let W=!0;function K(){for(var ie=arguments.length,te=new Array(ie),Ce=0;Ce<ie;Ce++)te[Ce]=arguments[Ce];if(!k)return Object.assign.apply(Object,[{}].concat(te));W=!1;const pe={};return te.forEach(fe=>{Object.keys(fe).forEach(M=>{Object.defineProperty(pe,M,{configurable:!0,enumerable:!0,get:()=>fe[M]})})}),W=!0,pe}const b=N.statistic={},G=N._statistic_build_={};function j(){}const q=ie=>{let te,Ce=ie,pe=j;return k&&typeof Proxy!="undefined"&&(te=new Set,Ce=new Proxy(ie,{get(fe,J){return W&&te.add(J),fe[J]}}),pe=(fe,J)=>{var M;b[fe]={global:Array.from(te),component:Object.assign(Object.assign({},(M=b[fe])===null||M===void 0?void 0:M.component),J)}}),{token:Ce,keys:te,flush:pe}};var Q=N.default=q},54894:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=k(36939),b=k(98078),G=W(k(41401));const j=(Q,ie)=>{const[te,Ce]=(0,G.default)();return(0,K.useStyleRegister)({theme:te,token:Ce,hashId:"",path:["ant-design-icons",Q],nonce:()=>ie==null?void 0:ie.nonce},()=>[{[`.${Q}`]:Object.assign(Object.assign({},(0,b.resetIcon)()),{[`.${Q} .${Q}-icon`]:{display:"block"}})}])};var q=N.default=j},52040:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const k={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var W=N.default=k},92125:function(ft,N,k){"use strict";"use client";var W=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var b=K(k(93967)),G=k(92419),j=W(k(67294)),q=k(31929),Q=K(k(15086)),ie=k(48125);const te=pe=>{const{prefixCls:fe,className:J,placement:M="top",title:E,color:ge,overlayInnerStyle:Se}=pe,{getPrefixCls:ze}=j.useContext(q.ConfigContext),De=ze("tooltip",fe),[Ue,at,Je]=(0,Q.default)(De),Ze=(0,ie.parseColor)(De,ge),xe=Ze.arrowStyle,_e=Object.assign(Object.assign({},Se),Ze.overlayStyle),He=(0,b.default)(at,Je,De,`${De}-pure`,`${De}-placement-${M}`,J,Ze.className);return Ue(j.createElement("div",{className:He,style:xe},j.createElement("div",{className:`${De}-arrow`}),j.createElement(G.Popup,Object.assign({},pe,{className:at,prefixCls:De,overlayInnerStyle:_e}),E)))};var Ce=N.default=te},94055:function(ft,N,k){"use strict";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var b=K(k(67294)),G=W(k(93967)),j=W(k(92419)),q=W(k(60869)),Q=k(56333),ie=k(53683),te=W(k(74132)),Ce=k(47419),pe=k(13594),fe=W(k(96877)),J=k(31929),M=k(46549),E=k(3184),ge=W(k(92125)),Se=W(k(15086)),ze=k(48125),De=function(Je,Ze){var xe={};for(var _e in Je)Object.prototype.hasOwnProperty.call(Je,_e)&&Ze.indexOf(_e)<0&&(xe[_e]=Je[_e]);if(Je!=null&&typeof Object.getOwnPropertySymbols=="function")for(var He=0,_e=Object.getOwnPropertySymbols(Je);He<_e.length;He++)Ze.indexOf(_e[He])<0&&Object.prototype.propertyIsEnumerable.call(Je,_e[He])&&(xe[_e[He]]=Je[_e[He]]);return xe};const Ue=b.forwardRef((Je,Ze)=>{var xe,_e;const{prefixCls:He,openClassName:Ke,getTooltipContainer:Et,overlayClassName:ke,color:qe,overlayInnerStyle:ne,children:Ge,afterOpenChange:oe,afterVisibleChange:Fe,destroyTooltipOnHide:ut,arrow:Ae=!0,title:Le,overlay:rt,builtinPlacements:ye,arrowPointAtCenter:me=!1,autoAdjustOverflow:We=!0}=Je,Ve=!!Ae,[,dt]=(0,E.useToken)(),{getPopupContainer:Ht,getPrefixCls:et,direction:$e}=b.useContext(J.ConfigContext),Te=(0,pe.devUseWarning)("Tooltip"),Xe=b.useRef(null),pt=()=>{var Re;(Re=Xe.current)===null||Re===void 0||Re.forceAlign()};b.useImperativeHandle(Ze,()=>({forceAlign:pt,forcePopupAlign:()=>{Te.deprecated(!1,"forcePopupAlign","forceAlign"),pt()}}));const[Oe,Be]=(0,q.default)(!1,{value:(xe=Je.open)!==null&&xe!==void 0?xe:Je.visible,defaultValue:(_e=Je.defaultOpen)!==null&&_e!==void 0?_e:Je.defaultVisible}),vt=!Le&&!rt&&Le!==0,Rt=Re=>{var tt,St;Be(vt?!1:Re),vt||((tt=Je.onOpenChange)===null||tt===void 0||tt.call(Je,Re),(St=Je.onVisibleChange)===null||St===void 0||St.call(Je,Re))},rr=b.useMemo(()=>{var Re,tt;let St=me;return typeof Ae=="object"&&(St=(tt=(Re=Ae.pointAtCenter)!==null&&Re!==void 0?Re:Ae.arrowPointAtCenter)!==null&&tt!==void 0?tt:me),ye||(0,te.default)({arrowPointAtCenter:St,autoAdjustOverflow:We,arrowWidth:Ve?dt.sizePopupArrow:0,borderRadius:dt.borderRadius,offset:dt.marginXXS,visibleFirst:!0})},[me,Ae,ye,dt]),br=b.useMemo(()=>Le===0?Le:rt||Le||"",[rt,Le]),lt=b.createElement(M.NoCompactStyle,null,typeof br=="function"?br():br),{getPopupContainer:an,placement:$r="top",mouseEnterDelay:Xr=.1,mouseLeaveDelay:Nt=.1,overlayStyle:Kt,rootClassName:or}=Je,kt=De(Je,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Jt=et("tooltip",He),Er=et(),wr=Je["data-popover-inject"];let Br=Oe;!("open"in Je)&&!("visible"in Je)&&vt&&(Br=!1);const zr=(0,Ce.isValidElement)(Ge)&&!(0,Ce.isFragment)(Ge)?Ge:b.createElement("span",null,Ge),le=zr.props,H=!le.className||typeof le.className=="string"?(0,G.default)(le.className,Ke||`${Jt}-open`):le.className,[re,Ie,Ye]=(0,Se.default)(Jt,!wr),Ct=(0,ze.parseColor)(Jt,qe),ar=Ct.arrowStyle,jt=Object.assign(Object.assign({},ne),Ct.overlayStyle),wt=(0,G.default)(ke,{[`${Jt}-rtl`]:$e==="rtl"},Ct.className,or,Ie,Ye),[Mt,ve]=(0,Q.useZIndex)("Tooltip",kt.zIndex),he=b.createElement(j.default,Object.assign({},kt,{zIndex:Mt,showArrow:Ve,placement:$r,mouseEnterDelay:Xr,mouseLeaveDelay:Nt,prefixCls:Jt,overlayClassName:wt,overlayStyle:Object.assign(Object.assign({},ar),Kt),getTooltipContainer:an||Et||Ht,ref:Xe,builtinPlacements:rr,overlay:lt,visible:Br,onVisibleChange:Rt,afterVisibleChange:oe!=null?oe:Fe,overlayInnerStyle:jt,arrowContent:b.createElement("span",{className:`${Jt}-arrow-content`}),motion:{motionName:(0,ie.getTransitionName)(Er,"zoom-big-fast",Je.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!ut}),Br?(0,Ce.cloneElement)(zr,{className:H}):zr);return re(b.createElement(fe.default.Provider,{value:ve},he))});Ue._InternalPanelDoNotUseOrYouWillBeFired=ge.default;var at=N.default=Ue},15086:function(ft,N,k){"use strict";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.prepareComponentToken=N.default=void 0;var K=k(98078),b=k(42836),G=W(k(9064)),j=k(3184),q=k(36939),Q=k(51337);const ie=pe=>{const{componentCls:fe,tooltipMaxWidth:J,tooltipColor:M,tooltipBg:E,tooltipBorderRadius:ge,zIndexPopup:Se,controlHeight:ze,boxShadowSecondary:De,paddingSM:Ue,paddingXS:at}=pe;return[{[fe]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,K.resetComponent)(pe)),{position:"absolute",zIndex:Se,display:"block",width:"max-content",maxWidth:J,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":E,[`${fe}-inner`]:{minWidth:ze,minHeight:ze,padding:`${(0,q.unit)(pe.calc(Ue).div(2).equal())} ${(0,q.unit)(at)}`,color:M,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:E,borderRadius:ge,boxShadow:De,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${fe}-inner`]:{borderRadius:pe.min(ge,G.MAX_VERTICAL_CONTENT_RADIUS)}},[`${fe}-content`]:{position:"relative"}}),(0,j.genPresetColor)(pe,(Je,Ze)=>{let{darkColor:xe}=Ze;return{[`&${fe}-${Je}`]:{[`${fe}-inner`]:{backgroundColor:xe},[`${fe}-arrow`]:{"--antd-arrow-background-color":xe}}}})),{"&-rtl":{direction:"rtl"}})},(0,G.default)(pe,"var(--antd-arrow-background-color)"),{[`${fe}-pure`]:{position:"relative",maxWidth:"none",margin:pe.sizePopupArrow}}]},te=pe=>Object.assign(Object.assign({zIndexPopup:pe.zIndexPopupBase+70},(0,G.getArrowOffsetToken)({contentRadius:pe.borderRadius,limitVerticalRadius:!0})),(0,Q.getArrowToken)((0,j.mergeToken)(pe,{borderRadiusOuter:Math.min(pe.borderRadiusOuter,4)})));N.prepareComponentToken=te;var Ce=N.default=function(fe){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,j.genStyleHooks)("Tooltip",E=>{const{borderRadius:ge,colorTextLightSolid:Se,colorBgSpotlight:ze}=E,De=(0,j.mergeToken)(E,{tooltipMaxWidth:250,tooltipColor:Se,tooltipBorderRadius:ge,tooltipBg:ze});return[ie(De),(0,b.initZoomMotion)(E,"zoom-big-fast")]},te,{resetStyle:!1,injectStyle:J})(fe)}},48125:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.parseColor=G;var K=W(k(93967)),b=k(45471);function G(j,q){const Q=(0,b.isPresetColor)(q),ie=(0,K.default)({[`${j}-${q}`]:q&&Q}),te={},Ce={};return q&&!Q&&(te.background=q,Ce["--antd-arrow-background-color"]=q),{className:ie,overlayStyle:te,arrowStyle:Ce}}},12385:function(ft,N,k){"use strict";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var b=K(k(67294)),G=W(k(45598)),j=W(k(82546));function q(ge){const Se=typeof ge;return Se==="string"||Se==="number"}function Q(ge){let Se=0;return ge.forEach(ze=>{q(ze)?Se+=String(ze).length:Se+=1}),Se}function ie(ge,Se){let ze=0;const De=[];for(let Ue=0;Ue<ge.length;Ue+=1){if(ze===Se)return De;const at=ge[Ue],Ze=q(at)?String(at).length:1,xe=ze+Ze;if(xe>Se){const _e=Se-ze;return De.push(String(at).slice(0,_e)),De}De.push(at),ze=xe}return ge}const te=0,Ce=1,pe=2,fe=3,J=4,M=ge=>{let{enabledMeasure:Se,children:ze,text:De,width:Ue,fontSize:at,rows:Je,onEllipsis:Ze}=ge;const[[xe,_e,He],Ke]=b.useState([0,0,0]),[Et,ke]=b.useState(0),[qe,ne]=b.useState(te),[Ge,oe]=b.useState(0),Fe=b.useRef(null),ut=b.useRef(null),Ae=b.useMemo(()=>(0,G.default)(De),[De]),Le=b.useMemo(()=>Q(Ae),[Ae]),rt=b.useMemo(()=>!Se||qe!==fe?Et&&qe!==J&&Se?ze(ie(Ae,Et),Et<Le):ze(Ae,!1):ze(ie(Ae,_e),_e<Le),[Se,qe,ze,Ae,_e,Le]);(0,j.default)(()=>{Se&&Ue&&at&&Le&&(ne(Ce),Ke([0,Math.ceil(Le/2),Le]))},[Se,Ue,at,De,Le,Je]),(0,j.default)(()=>{var Ve;qe===Ce&&oe(((Ve=Fe.current)===null||Ve===void 0?void 0:Ve.offsetHeight)||0)},[qe]),(0,j.default)(()=>{var Ve,dt;if(Ge){if(qe===Ce){const Ht=((Ve=ut.current)===null||Ve===void 0?void 0:Ve.offsetHeight)||0,et=Je*Ge;Ht<=et?(ne(J),Ze(!1)):ne(pe)}else if(qe===pe)if(xe!==He){const Ht=((dt=ut.current)===null||dt===void 0?void 0:dt.offsetHeight)||0,et=Je*Ge;let $e=xe,Te=He;xe===He-1?Te=xe:Ht<=et?$e=_e:Te=_e;const Xe=Math.ceil(($e+Te)/2);Ke([$e,Xe,Te])}else ne(fe),ke(_e),Ze(!0)}},[qe,xe,He,Je,Ge]);const ye={width:Ue,whiteSpace:"normal",margin:0,padding:0},me=(Ve,dt,Ht)=>b.createElement("span",{"aria-hidden":!0,ref:dt,style:Object.assign({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.ceil(at/2)*2},Ht)},Ve),We=(Ve,dt)=>{const Ht=ie(Ae,Ve);return me(ze(Ht,!0),dt,ye)};return b.createElement(b.Fragment,null,rt,Se&&qe!==fe&&qe!==J&&b.createElement(b.Fragment,null,me("lg",Fe,{wordBreak:"keep-all",whiteSpace:"nowrap"}),qe===Ce?me(ze(Ae,!1),ut,ye):We(_e,ut)))};var E=N.default=M},69274:function(ft,N,k){"use strict";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var b=K(k(67294)),G=W(k(94055));const j=Q=>{let{enabledEllipsis:ie,isEllipsis:te,children:Ce,tooltipProps:pe}=Q;return!(pe!=null&&pe.title)||!ie?Ce:b.createElement(G.default,Object.assign({open:te?void 0:!1},pe),Ce)};var q=N.default=j},28460:function(ft,N,k){"use strict";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var b=K(k(67294)),G=W(k(83874)),j=W(k(90091)),q=W(k(10875)),Q=W(k(93967)),ie=W(k(20640)),te=W(k(48555)),Ce=W(k(45598)),pe=W(k(82546)),fe=W(k(60869)),J=W(k(18475)),M=k(75531),E=k(38882),ge=W(k(60938)),Se=k(31929),ze=W(k(76647)),De=W(k(94055)),Ue=W(k(69425)),at=W(k(92759)),Je=W(k(67312)),Ze=W(k(89652)),xe=W(k(12385)),_e=W(k(69274)),He=function(oe,Fe){var ut={};for(var Ae in oe)Object.prototype.hasOwnProperty.call(oe,Ae)&&Fe.indexOf(Ae)<0&&(ut[Ae]=oe[Ae]);if(oe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Le=0,Ae=Object.getOwnPropertySymbols(oe);Le<Ae.length;Le++)Fe.indexOf(Ae[Le])<0&&Object.prototype.propertyIsEnumerable.call(oe,Ae[Le])&&(ut[Ae[Le]]=oe[Ae[Le]]);return ut};function Ke(oe,Fe){let{mark:ut,code:Ae,underline:Le,delete:rt,strong:ye,keyboard:me,italic:We}=oe,Ve=Fe;function dt(Ht,et){et&&(Ve=b.createElement(Ht,{},Ve))}return dt("strong",ye),dt("u",Le),dt("del",rt),dt("code",Ae),dt("mark",ut),dt("kbd",me),dt("i",We),Ve}function Et(oe,Fe,ut){return oe===!0||oe===void 0?Fe:oe||ut&&Fe}function ke(oe){return oe===!1?[!1,!1]:Array.isArray(oe)?oe:[oe]}const qe="...",ne=b.forwardRef((oe,Fe)=>{var ut,Ae,Le;const{prefixCls:rt,className:ye,style:me,type:We,disabled:Ve,children:dt,ellipsis:Ht,editable:et,copyable:$e,component:Te,title:Xe}=oe,pt=He(oe,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:Oe,direction:Be}=b.useContext(Se.ConfigContext),[vt]=(0,ze.default)("Text"),Rt=b.useRef(null),rr=b.useRef(null),br=Oe("typography",rt),lt=(0,J.default)(pt,["mark","code","delete","underline","strong","keyboard","italic"]),[an,$r]=(0,at.default)(et),[Xr,Nt]=(0,fe.default)(!1,{value:$r.editing}),{triggerType:Kt=["icon"]}=$r,or=oi=>{var Si;oi&&((Si=$r.onStart)===null||Si===void 0||Si.call($r)),Nt(oi)};(0,Je.default)(()=>{var oi;Xr||(oi=rr.current)===null||oi===void 0||oi.focus()},[Xr]);const kt=oi=>{oi==null||oi.preventDefault(),or(!0)},Jt=oi=>{var Si;(Si=$r.onChange)===null||Si===void 0||Si.call($r,oi),or(!1)},Er=()=>{var oi;(oi=$r.onCancel)===null||oi===void 0||oi.call($r),or(!1)},[wr,Br]=(0,at.default)($e),[zr,le]=b.useState(!1),H=b.useRef(null),re={};Br.format&&(re.format=Br.format);const Ie=()=>{H.current&&clearTimeout(H.current)},Ye=oi=>{var Si;oi==null||oi.preventDefault(),oi==null||oi.stopPropagation(),(0,ie.default)(Br.text||String(dt)||"",re),le(!0),Ie(),H.current=setTimeout(()=>{le(!1)},3e3),(Si=Br.onCopy)===null||Si===void 0||Si.call(Br,oi)};b.useEffect(()=>Ie,[]);const[Ct,ar]=b.useState(!1),[jt,wt]=b.useState(!1),[Mt,ve]=b.useState(!1),[he,Re]=b.useState(!1),[tt,St]=b.useState(!1),[Gt,gr]=b.useState(!0),[At,st]=(0,at.default)(Ht,{expandable:!1}),Pt=At&&!Mt,{rows:yr=1}=st,Fr=b.useMemo(()=>!Pt||st.suffix!==void 0||st.onEllipsis||st.expandable||an||wr,[Pt,st,an,wr]);(0,pe.default)(()=>{At&&!Fr&&(ar((0,E.isStyleSupport)("webkitLineClamp")),wt((0,E.isStyleSupport)("textOverflow")))},[Fr,At]);const Ft=b.useMemo(()=>Fr?!1:yr===1?jt:Ct,[Fr,jt,Ct]),Mn=Pt&&(Ft?tt:he),ei=Pt&&yr===1&&Ft,ni=Pt&&yr>1&&Ft,un=oi=>{var Si;ve(!0),(Si=st.onExpand)===null||Si===void 0||Si.call(st,oi)},[Xn,Wn]=b.useState(0),[Jn,sa]=b.useState(0),vi=(oi,Si)=>{let{offsetWidth:Qi}=oi;var Wa;Wn(Qi),sa(parseInt((Wa=window.getComputedStyle)===null||Wa===void 0?void 0:Wa.call(window,Si).fontSize,10)||0)},ga=oi=>{var Si;Re(oi),he!==oi&&((Si=st.onEllipsis)===null||Si===void 0||Si.call(st,oi))};b.useEffect(()=>{const oi=Rt.current;if(At&&Ft&&oi){const Si=ni?oi.offsetHeight<oi.scrollHeight:oi.offsetWidth<oi.scrollWidth;tt!==Si&&St(Si)}},[At,Ft,dt,ni,Gt,Xn]),b.useEffect(()=>{const oi=Rt.current;if(typeof IntersectionObserver=="undefined"||!oi||!Ft||!Pt)return;const Si=new IntersectionObserver(()=>{gr(!!oi.offsetParent)});return Si.observe(oi),()=>{Si.disconnect()}},[Ft,Pt]);let Ra={};st.tooltip===!0?Ra={title:(ut=$r.text)!==null&&ut!==void 0?ut:dt}:b.isValidElement(st.tooltip)?Ra={title:st.tooltip}:typeof st.tooltip=="object"?Ra=Object.assign({title:(Ae=$r.text)!==null&&Ae!==void 0?Ae:dt},st.tooltip):Ra={title:st.tooltip};const ya=b.useMemo(()=>{const oi=Si=>["string","number"].includes(typeof Si);if(!(!At||Ft)){if(oi($r.text))return $r.text;if(oi(dt))return dt;if(oi(Xe))return Xe;if(oi(Ra.title))return Ra.title}},[At,Ft,Xe,Ra.title,Mn]);if(Xr)return b.createElement(Ue.default,{value:(Le=$r.text)!==null&&Le!==void 0?Le:typeof dt=="string"?dt:"",onSave:Jt,onCancel:Er,onEnd:$r.onEnd,prefixCls:br,className:ye,style:me,direction:Be,component:Te,maxLength:$r.maxLength,autoSize:$r.autoSize,enterIcon:$r.enterIcon});const ja=()=>{const{expandable:oi,symbol:Si}=st;if(!oi)return null;let Qi;return Si?Qi=Si:Qi=vt==null?void 0:vt.expand,b.createElement("a",{key:"expand",className:`${br}-expand`,onClick:un,"aria-label":vt==null?void 0:vt.expand},Qi)},ba=()=>{if(!an)return;const{icon:oi,tooltip:Si}=$r,Qi=(0,Ce.default)(Si)[0]||(vt==null?void 0:vt.edit),Wa=typeof Qi=="string"?Qi:"";return Kt.includes("icon")?b.createElement(De.default,{key:"edit",title:Si===!1?"":Qi},b.createElement(ge.default,{ref:rr,className:`${br}-edit`,onClick:kt,"aria-label":Wa},oi||b.createElement(q.default,{role:"button"}))):null},gs=()=>{if(!wr)return;const{tooltips:oi,icon:Si}=Br,Qi=ke(oi),Wa=ke(Si),ms=zr?Et(Qi[1],vt==null?void 0:vt.copied):Et(Qi[0],vt==null?void 0:vt.copy),ho=zr?vt==null?void 0:vt.copied:vt==null?void 0:vt.copy,Po=typeof ms=="string"?ms:ho;return b.createElement(De.default,{key:"copy",title:ms},b.createElement(ge.default,{className:(0,Q.default)(`${br}-copy`,zr&&`${br}-copy-success`),onClick:Ye,"aria-label":Po},zr?Et(Wa[1],b.createElement(G.default,null),!0):Et(Wa[0],b.createElement(j.default,null),!0)))},co=oi=>[oi&&ja(),ba(),gs()],Io=oi=>[oi&&b.createElement("span",{"aria-hidden":!0,key:"ellipsis"},qe),st.suffix,co(oi)];return b.createElement(te.default,{onResize:vi,disabled:!Pt},oi=>b.createElement(_e.default,{tooltipProps:Ra,enabledEllipsis:Pt,isEllipsis:Mn},b.createElement(Ze.default,Object.assign({className:(0,Q.default)({[`${br}-${We}`]:We,[`${br}-disabled`]:Ve,[`${br}-ellipsis`]:At,[`${br}-single-line`]:Pt&&yr===1,[`${br}-ellipsis-single-line`]:ei,[`${br}-ellipsis-multiple-line`]:ni},ye),prefixCls:rt,style:Object.assign(Object.assign({},me),{WebkitLineClamp:ni?yr:void 0}),component:Te,ref:(0,M.composeRef)(oi,Rt,Fe),direction:Be,onClick:Kt.includes("text")?kt:void 0,"aria-label":ya==null?void 0:ya.toString(),title:Xe},lt),b.createElement(xe.default,{enabledMeasure:Pt&&!Ft,text:dt,rows:yr,width:Xn,fontSize:Jn,onEllipsis:ga},(Si,Qi)=>{let Wa=Si;return Si.length&&Qi&&ya&&(Wa=b.createElement("span",{key:"show-content","aria-hidden":!0},Wa)),Ke(oe,b.createElement(b.Fragment,null,Wa,Io(Qi)))}))))});var Ge=N.default=ne},69425:function(ft,N,k){"use strict";"use client";var W=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var b=K(k(7224)),G=K(k(93967)),j=K(k(27712)),q=W(k(67294)),Q=k(47419),ie=K(k(14104)),te=K(k(23461));const Ce=fe=>{const{prefixCls:J,"aria-label":M,className:E,style:ge,direction:Se,maxLength:ze,autoSize:De=!0,value:Ue,onSave:at,onCancel:Je,onEnd:Ze,component:xe,enterIcon:_e=q.createElement(b.default,null)}=fe,He=q.useRef(null),Ke=q.useRef(!1),Et=q.useRef(),[ke,qe]=q.useState(Ue);q.useEffect(()=>{qe(Ue)},[Ue]),q.useEffect(()=>{if(He.current&&He.current.resizableTextArea){const{textArea:dt}=He.current.resizableTextArea;dt.focus();const{length:Ht}=dt.value;dt.setSelectionRange(Ht,Ht)}},[]);const ne=dt=>{let{target:Ht}=dt;qe(Ht.value.replace(/[\n\r]/g,""))},Ge=()=>{Ke.current=!0},oe=()=>{Ke.current=!1},Fe=dt=>{let{keyCode:Ht}=dt;Ke.current||(Et.current=Ht)},ut=()=>{at(ke.trim())},Ae=dt=>{let{keyCode:Ht,ctrlKey:et,altKey:$e,metaKey:Te,shiftKey:Xe}=dt;Et.current===Ht&&!Ke.current&&!et&&!$e&&!Te&&!Xe&&(Ht===j.default.ENTER?(ut(),Ze==null||Ze()):Ht===j.default.ESC&&Je())},Le=()=>{ut()},rt=xe?`${J}-${xe}`:"",[ye,me,We]=(0,te.default)(J),Ve=(0,G.default)(J,`${J}-edit-content`,{[`${J}-rtl`]:Se==="rtl"},E,rt,me,We);return ye(q.createElement("div",{className:Ve,style:ge},q.createElement(ie.default,{ref:He,maxLength:ze,value:ke,onChange:ne,onKeyDown:Fe,onKeyUp:Ae,onCompositionStart:Ge,onCompositionEnd:oe,onBlur:Le,"aria-label":M,rows:1,autoSize:De}),_e!==null?(0,Q.cloneElement)(_e,{className:`${J}-edit-content-confirm`}):null))};var pe=N.default=Ce},34528:function(ft,N,k){"use strict";var W,K=k(64836).default,b=k(75263).default;W={value:!0},N.Z=void 0;var G=b(k(67294)),j=k(13594),q=K(k(28460)),Q=function(pe,fe){var J={};for(var M in pe)Object.prototype.hasOwnProperty.call(pe,M)&&fe.indexOf(M)<0&&(J[M]=pe[M]);if(pe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,M=Object.getOwnPropertySymbols(pe);E<M.length;E++)fe.indexOf(M[E])<0&&Object.prototype.propertyIsEnumerable.call(pe,M[E])&&(J[M[E]]=pe[M[E]]);return J};const ie=[1,2,3,4,5],te=G.forwardRef((pe,fe)=>{const{level:J=1}=pe,M=Q(pe,["level"]);let E;return ie.includes(J)?E=`h${J}`:E="h1",G.createElement(q.default,Object.assign({ref:fe},M,{component:E}))});var Ce=N.Z=te},89652:function(ft,N,k){"use strict";"use client";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var b=K(k(67294)),G=W(k(93967)),j=k(75531),q=k(13594),Q=k(31929),ie=W(k(23461)),te=function(fe,J){var M={};for(var E in fe)Object.prototype.hasOwnProperty.call(fe,E)&&J.indexOf(E)<0&&(M[E]=fe[E]);if(fe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ge=0,E=Object.getOwnPropertySymbols(fe);ge<E.length;ge++)J.indexOf(E[ge])<0&&Object.prototype.propertyIsEnumerable.call(fe,E[ge])&&(M[E[ge]]=fe[E[ge]]);return M};const Ce=b.forwardRef((fe,J)=>{const{prefixCls:M,component:E="article",className:ge,rootClassName:Se,setContentRef:ze,children:De,direction:Ue,style:at}=fe,Je=te(fe,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:Ze,direction:xe,typography:_e}=b.useContext(Q.ConfigContext),He=Ue!=null?Ue:xe;let Ke=J;ze&&(Ke=(0,j.composeRef)(J,ze));const Et=Ze("typography",M),[ke,qe,ne]=(0,ie.default)(Et),Ge=(0,G.default)(Et,_e==null?void 0:_e.className,{[`${Et}-rtl`]:He==="rtl"},ge,Se,qe,ne),oe=Object.assign(Object.assign({},_e==null?void 0:_e.style),at);return ke(b.createElement(E,Object.assign({className:Ge,style:oe,ref:Ke},Je),De))});var pe=N.default=Ce},92759:function(ft,N,k){"use strict";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=b;var K=W(k(67294));function b(G,j){return K.useMemo(()=>{const q=!!G;return[q,Object.assign(Object.assign({},j),q&&typeof G=="object"?G:null)]},[G])}},67312:function(ft,N,k){"use strict";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(67294));const b=(j,q)=>{const Q=K.useRef(!1);K.useEffect(()=>{Q.current?j():Q.current=!0},q)};var G=N.default=b},23461:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.prepareComponentToken=N.default=void 0;var W=k(98078),K=k(3184),b=k(48385);const G=Q=>{const{componentCls:ie,titleMarginTop:te}=Q;return{[ie]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:Q.colorText,wordBreak:"break-word",lineHeight:Q.lineHeight,[`&${ie}-secondary`]:{color:Q.colorTextDescription},[`&${ie}-success`]:{color:Q.colorSuccess},[`&${ie}-warning`]:{color:Q.colorWarning},[`&${ie}-danger`]:{color:Q.colorError,"a&:active, a&:focus":{color:Q.colorErrorActive},"a&:hover":{color:Q.colorErrorHover}},[`&${ie}-disabled`]:{color:Q.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},[`
        div&,
        p
      `]:{marginBottom:"1em"}},(0,b.getTitleStyles)(Q)),{[`
      & + h1${ie},
      & + h2${ie},
      & + h3${ie},
      & + h4${ie},
      & + h5${ie}
      `]:{marginTop:te},[`
      div,
      ul,
      li,
      p,
      h1,
      h2,
      h3,
      h4,
      h5`]:{[`
        + h1,
        + h2,
        + h3,
        + h4,
        + h5
        `]:{marginTop:te}}}),(0,b.getResetStyles)(Q)),(0,b.getLinkStyles)(Q)),{[`
        ${ie}-expand,
        ${ie}-edit,
        ${ie}-copy
      `]:Object.assign(Object.assign({},(0,W.operationUnit)(Q)),{marginInlineStart:Q.marginXXS})}),(0,b.getEditableStyles)(Q)),(0,b.getCopyableStyles)(Q)),(0,b.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}},j=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});N.prepareComponentToken=j;var q=N.default=(0,K.genStyleHooks)("Typography",Q=>[G(Q)],j)},48385:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getTitleStyles=N.getResetStyles=N.getLinkStyles=N.getEllipsisStyles=N.getEditableStyles=N.getCopyableStyles=void 0;var W=k(78589),K=k(36939),b=k(98078);const G=(pe,fe,J,M)=>{const{titleMarginBottom:E,fontWeightStrong:ge}=M;return{marginBottom:E,color:J,fontWeight:ge,fontSize:pe,lineHeight:fe}},j=pe=>{const fe=[1,2,3,4,5],J={};return fe.forEach(M=>{J[`
      h${M}&,
      div&-h${M},
      div&-h${M} > textarea,
      h${M}
    `]=G(pe[`fontSizeHeading${M}`],pe[`lineHeightHeading${M}`],pe.colorTextHeading,pe)}),J};N.getTitleStyles=j;const q=pe=>{const{componentCls:fe}=pe;return{"a&, a":Object.assign(Object.assign({},(0,b.operationUnit)(pe)),{textDecoration:pe.linkDecoration,"&:active, &:hover":{textDecoration:pe.linkHoverDecoration},[`&[disabled], &${fe}-disabled`]:{color:pe.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:pe.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};N.getLinkStyles=q;const Q=pe=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:pe.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:pe.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:W.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:pe.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});N.getResetStyles=Q;const ie=pe=>{const{componentCls:fe,paddingSM:J}=pe,M=J;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:pe.calc(pe.paddingSM).mul(-1).equal(),marginTop:pe.calc(M).mul(-1).equal(),marginBottom:`calc(1em - ${(0,K.unit)(M)})`},[`${fe}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:pe.calc(pe.marginXS).add(2).equal(),insetBlockEnd:pe.marginXS,color:pe.colorTextDescription,fontWeight:"normal",fontSize:pe.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};N.getEditableStyles=ie;const te=pe=>({"&-copy-success":{[`
    &,
    &:hover,
    &:focus`]:{color:pe.colorSuccess}}});N.getCopyableStyles=te;const Ce=()=>({[`
  a&-ellipsis,
  span&-ellipsis
  `]:{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});N.getEllipsisStyles=Ce},87629:function(ft,N,k){"use strict";"use client";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(36245)),b=N.default=K.default},36245:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k=N.default="5.12.6"},83874:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const W=K(k(71079));function K(G){return G&&G.__esModule?G:{default:G}}const b=W;N.default=b,ft.exports=b},43273:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const W=K(k(72225));function K(G){return G&&G.__esModule?G:{default:G}}const b=W;N.default=b,ft.exports=b},90091:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const W=K(k(29539));function K(G){return G&&G.__esModule?G:{default:G}}const b=W;N.default=b,ft.exports=b},10875:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const W=K(k(54825));function K(G){return G&&G.__esModule?G:{default:G}}const b=W;N.default=b,ft.exports=b},7224:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const W=K(k(43552));function K(G){return G&&G.__esModule?G:{default:G}}const b=W;N.default=b,ft.exports=b},26545:function(ft,N,k){"use client";"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return xe}});var W=J(k(67294)),K=pe(k(93967)),b=k(78589),G=pe(k(13357)),j=pe(k(46648)),q=k(46338),Q=k(49458);function ie(_e,He){(He==null||He>_e.length)&&(He=_e.length);for(var Ke=0,Et=new Array(He);Ke<He;Ke++)Et[Ke]=_e[Ke];return Et}function te(_e){if(Array.isArray(_e))return _e}function Ce(_e,He,Ke){return He in _e?Object.defineProperty(_e,He,{value:Ke,enumerable:!0,configurable:!0,writable:!0}):_e[He]=Ke,_e}function pe(_e){return _e&&_e.__esModule?_e:{default:_e}}function fe(_e){if(typeof WeakMap!="function")return null;var He=new WeakMap,Ke=new WeakMap;return(fe=function(Et){return Et?Ke:He})(_e)}function J(_e,He){if(!He&&_e&&_e.__esModule)return _e;if(_e===null||typeof _e!="object"&&typeof _e!="function")return{default:_e};var Ke=fe(He);if(Ke&&Ke.has(_e))return Ke.get(_e);var Et={},ke=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var qe in _e)if(qe!=="default"&&Object.prototype.hasOwnProperty.call(_e,qe)){var ne=ke?Object.getOwnPropertyDescriptor(_e,qe):null;ne&&(ne.get||ne.set)?Object.defineProperty(Et,qe,ne):Et[qe]=_e[qe]}return Et.default=_e,Ke&&Ke.set(_e,Et),Et}function M(_e,He){var Ke=_e==null?null:typeof Symbol!="undefined"&&_e[Symbol.iterator]||_e["@@iterator"];if(Ke!=null){var Et=[],ke=!0,qe=!1,ne,Ge;try{for(Ke=Ke.call(_e);!(ke=(ne=Ke.next()).done)&&(Et.push(ne.value),!(He&&Et.length===He));ke=!0);}catch(oe){qe=!0,Ge=oe}finally{try{!ke&&Ke.return!=null&&Ke.return()}finally{if(qe)throw Ge}}return Et}}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ge(_e){for(var He=1;He<arguments.length;He++){var Ke=arguments[He]!=null?arguments[He]:{},Et=Object.keys(Ke);typeof Object.getOwnPropertySymbols=="function"&&(Et=Et.concat(Object.getOwnPropertySymbols(Ke).filter(function(ke){return Object.getOwnPropertyDescriptor(Ke,ke).enumerable}))),Et.forEach(function(ke){Ce(_e,ke,Ke[ke])})}return _e}function Se(_e,He){var Ke=Object.keys(_e);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(_e);He&&(Et=Et.filter(function(ke){return Object.getOwnPropertyDescriptor(_e,ke).enumerable})),Ke.push.apply(Ke,Et)}return Ke}function ze(_e,He){return He=He!=null?He:{},Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(He)):Se(Object(He)).forEach(function(Ke){Object.defineProperty(_e,Ke,Object.getOwnPropertyDescriptor(He,Ke))}),_e}function De(_e,He){if(_e==null)return{};var Ke=Ue(_e,He),Et,ke;if(Object.getOwnPropertySymbols){var qe=Object.getOwnPropertySymbols(_e);for(ke=0;ke<qe.length;ke++)Et=qe[ke],!(He.indexOf(Et)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,Et)&&(Ke[Et]=_e[Et])}return Ke}function Ue(_e,He){if(_e==null)return{};var Ke={},Et=Object.keys(_e),ke,qe;for(qe=0;qe<Et.length;qe++)ke=Et[qe],!(He.indexOf(ke)>=0)&&(Ke[ke]=_e[ke]);return Ke}function at(_e,He){return te(_e)||M(_e,He)||Je(_e,He)||E()}function Je(_e,He){if(_e){if(typeof _e=="string")return ie(_e,He);var Ke=Object.prototype.toString.call(_e).slice(8,-1);if(Ke==="Object"&&_e.constructor&&(Ke=_e.constructor.name),Ke==="Map"||Ke==="Set")return Array.from(Ke);if(Ke==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ke))return ie(_e,He)}}(0,q.setTwoToneColor)(b.blue.primary);var Ze=W.forwardRef(function(_e,He){var Ke=_e.className,Et=_e.icon,ke=_e.spin,qe=_e.rotate,ne=_e.tabIndex,Ge=_e.onClick,oe=_e.twoToneColor,Fe=De(_e,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),ut=W.useContext(G.default),Ae=ut.prefixCls,Le=Ae===void 0?"anticon":Ae,rt=ut.rootClassName,ye,me=(0,K.default)(rt,Le,(ye={},Ce(ye,"".concat(Le,"-").concat(Et.name),!!Et.name),Ce(ye,"".concat(Le,"-spin"),!!ke||Et.name==="loading"),ye),Ke),We=ne;We===void 0&&Ge&&(We=-1);var Ve=qe?{msTransform:"rotate(".concat(qe,"deg)"),transform:"rotate(".concat(qe,"deg)")}:void 0,dt=at((0,Q.normalizeTwoToneColors)(oe),2),Ht=dt[0],et=dt[1];return W.createElement("span",ze(ge({role:"img","aria-label":Et.name},Fe),{ref:He,tabIndex:We,onClick:Ge,className:me}),W.createElement(j.default,{icon:Et,primaryColor:Ht,secondaryColor:et,style:Ve}))});Ze.displayName="AntdIcon",Ze.getTwoToneColor=q.getTwoToneColor,Ze.setTwoToneColor=q.setTwoToneColor;var xe=Ze},13357:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return b}});var W=k(67294),K=(0,W.createContext)({}),b=K},46648:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return E}});var W=j(k(67294)),K=k(49458);function b(ge,Se,ze){return Se in ge?Object.defineProperty(ge,Se,{value:ze,enumerable:!0,configurable:!0,writable:!0}):ge[Se]=ze,ge}function G(ge){if(typeof WeakMap!="function")return null;var Se=new WeakMap,ze=new WeakMap;return(G=function(De){return De?ze:Se})(ge)}function j(ge,Se){if(!Se&&ge&&ge.__esModule)return ge;if(ge===null||typeof ge!="object"&&typeof ge!="function")return{default:ge};var ze=G(Se);if(ze&&ze.has(ge))return ze.get(ge);var De={},Ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var at in ge)if(at!=="default"&&Object.prototype.hasOwnProperty.call(ge,at)){var Je=Ue?Object.getOwnPropertyDescriptor(ge,at):null;Je&&(Je.get||Je.set)?Object.defineProperty(De,at,Je):De[at]=ge[at]}return De.default=ge,ze&&ze.set(ge,De),De}function q(ge){for(var Se=1;Se<arguments.length;Se++){var ze=arguments[Se]!=null?arguments[Se]:{},De=Object.keys(ze);typeof Object.getOwnPropertySymbols=="function"&&(De=De.concat(Object.getOwnPropertySymbols(ze).filter(function(Ue){return Object.getOwnPropertyDescriptor(ze,Ue).enumerable}))),De.forEach(function(Ue){b(ge,Ue,ze[Ue])})}return ge}function Q(ge,Se){var ze=Object.keys(ge);if(Object.getOwnPropertySymbols){var De=Object.getOwnPropertySymbols(ge);Se&&(De=De.filter(function(Ue){return Object.getOwnPropertyDescriptor(ge,Ue).enumerable})),ze.push.apply(ze,De)}return ze}function ie(ge,Se){return Se=Se!=null?Se:{},Object.getOwnPropertyDescriptors?Object.defineProperties(ge,Object.getOwnPropertyDescriptors(Se)):Q(Object(Se)).forEach(function(ze){Object.defineProperty(ge,ze,Object.getOwnPropertyDescriptor(Se,ze))}),ge}function te(ge,Se){if(ge==null)return{};var ze=Ce(ge,Se),De,Ue;if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(ge);for(Ue=0;Ue<at.length;Ue++)De=at[Ue],!(Se.indexOf(De)>=0)&&Object.prototype.propertyIsEnumerable.call(ge,De)&&(ze[De]=ge[De])}return ze}function Ce(ge,Se){if(ge==null)return{};var ze={},De=Object.keys(ge),Ue,at;for(at=0;at<De.length;at++)Ue=De[at],!(Se.indexOf(Ue)>=0)&&(ze[Ue]=ge[Ue]);return ze}var pe={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function fe(ge){var Se=ge.primaryColor,ze=ge.secondaryColor;pe.primaryColor=Se,pe.secondaryColor=ze||(0,K.getSecondaryColor)(Se),pe.calculated=!!ze}function J(){return q({},pe)}var M=function(ge){var Se=ge.icon,ze=ge.className,De=ge.onClick,Ue=ge.style,at=ge.primaryColor,Je=ge.secondaryColor,Ze=te(ge,["icon","className","onClick","style","primaryColor","secondaryColor"]),xe=W.useRef(),_e=pe;if(at&&(_e={primaryColor:at,secondaryColor:Je||(0,K.getSecondaryColor)(at)}),(0,K.useInsertStyles)(xe),(0,K.warning)((0,K.isIconDefinition)(Se),"icon should be icon definiton, but got ".concat(Se)),!(0,K.isIconDefinition)(Se))return null;var He=Se;return He&&typeof He.icon=="function"&&(He=ie(q({},He),{icon:He.icon(_e.primaryColor,_e.secondaryColor)})),(0,K.generate)(He.icon,"svg-".concat(He.name),ie(q({className:ze,onClick:De,style:Ue,"data-icon":He.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Ze),{ref:xe}))};M.displayName="IconReact",M.getTwoToneColors=J,M.setTwoToneColors=fe;var E=M},46338:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0});function W(J,M){for(var E in M)Object.defineProperty(J,E,{enumerable:!0,get:M[E]})}W(N,{setTwoToneColor:function(){return pe},getTwoToneColor:function(){return fe}});var K=q(k(46648)),b=k(49458);function G(J,M){(M==null||M>J.length)&&(M=J.length);for(var E=0,ge=new Array(M);E<M;E++)ge[E]=J[E];return ge}function j(J){if(Array.isArray(J))return J}function q(J){return J&&J.__esModule?J:{default:J}}function Q(J,M){var E=J==null?null:typeof Symbol!="undefined"&&J[Symbol.iterator]||J["@@iterator"];if(E!=null){var ge=[],Se=!0,ze=!1,De,Ue;try{for(E=E.call(J);!(Se=(De=E.next()).done)&&(ge.push(De.value),!(M&&ge.length===M));Se=!0);}catch(at){ze=!0,Ue=at}finally{try{!Se&&E.return!=null&&E.return()}finally{if(ze)throw Ue}}return ge}}function ie(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function te(J,M){return j(J)||Q(J,M)||Ce(J,M)||ie()}function Ce(J,M){if(J){if(typeof J=="string")return G(J,M);var E=Object.prototype.toString.call(J).slice(8,-1);if(E==="Object"&&J.constructor&&(E=J.constructor.name),E==="Map"||E==="Set")return Array.from(E);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return G(J,M)}}function pe(J){var M=te((0,b.normalizeTwoToneColors)(J),2),E=M[0],ge=M[1];return K.default.setTwoToneColors({primaryColor:E,secondaryColor:ge})}function fe(){var J=K.default.getTwoToneColors();return J.calculated?[J.primaryColor,J.secondaryColor]:J.primaryColor}},71079:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return fe}});var W=Q(k(67294)),K=j(k(25330)),b=j(k(26545));function G(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function j(J){return J&&J.__esModule?J:{default:J}}function q(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(q=function(ge){return ge?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=q(M);if(E&&E.has(J))return E.get(J);var ge={},Se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in J)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(J,ze)){var De=Se?Object.getOwnPropertyDescriptor(J,ze):null;De&&(De.get||De.set)?Object.defineProperty(ge,ze,De):ge[ze]=J[ze]}return ge.default=J,E&&E.set(J,ge),ge}function ie(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},ge=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(ge=ge.concat(Object.getOwnPropertySymbols(E).filter(function(Se){return Object.getOwnPropertyDescriptor(E,Se).enumerable}))),ge.forEach(function(Se){G(J,Se,E[Se])})}return J}function te(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(J);M&&(ge=ge.filter(function(Se){return Object.getOwnPropertyDescriptor(J,Se).enumerable})),E.push.apply(E,ge)}return E}function Ce(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):te(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var pe=function(J,M){return W.createElement(b.default,Ce(ie({},J),{ref:M,icon:K.default}))},fe=W.forwardRef(pe)},72225:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return fe}});var W=Q(k(67294)),K=j(k(67303)),b=j(k(26545));function G(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function j(J){return J&&J.__esModule?J:{default:J}}function q(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(q=function(ge){return ge?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=q(M);if(E&&E.has(J))return E.get(J);var ge={},Se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in J)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(J,ze)){var De=Se?Object.getOwnPropertyDescriptor(J,ze):null;De&&(De.get||De.set)?Object.defineProperty(ge,ze,De):ge[ze]=J[ze]}return ge.default=J,E&&E.set(J,ge),ge}function ie(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},ge=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(ge=ge.concat(Object.getOwnPropertySymbols(E).filter(function(Se){return Object.getOwnPropertyDescriptor(E,Se).enumerable}))),ge.forEach(function(Se){G(J,Se,E[Se])})}return J}function te(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(J);M&&(ge=ge.filter(function(Se){return Object.getOwnPropertyDescriptor(J,Se).enumerable})),E.push.apply(E,ge)}return E}function Ce(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):te(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var pe=function(J,M){return W.createElement(b.default,Ce(ie({},J),{ref:M,icon:K.default}))},fe=W.forwardRef(pe)},29539:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return fe}});var W=Q(k(67294)),K=j(k(83647)),b=j(k(26545));function G(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function j(J){return J&&J.__esModule?J:{default:J}}function q(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(q=function(ge){return ge?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=q(M);if(E&&E.has(J))return E.get(J);var ge={},Se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in J)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(J,ze)){var De=Se?Object.getOwnPropertyDescriptor(J,ze):null;De&&(De.get||De.set)?Object.defineProperty(ge,ze,De):ge[ze]=J[ze]}return ge.default=J,E&&E.set(J,ge),ge}function ie(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},ge=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(ge=ge.concat(Object.getOwnPropertySymbols(E).filter(function(Se){return Object.getOwnPropertyDescriptor(E,Se).enumerable}))),ge.forEach(function(Se){G(J,Se,E[Se])})}return J}function te(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(J);M&&(ge=ge.filter(function(Se){return Object.getOwnPropertyDescriptor(J,Se).enumerable})),E.push.apply(E,ge)}return E}function Ce(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):te(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var pe=function(J,M){return W.createElement(b.default,Ce(ie({},J),{ref:M,icon:K.default}))},fe=W.forwardRef(pe)},54825:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return fe}});var W=Q(k(67294)),K=j(k(57583)),b=j(k(26545));function G(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function j(J){return J&&J.__esModule?J:{default:J}}function q(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(q=function(ge){return ge?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=q(M);if(E&&E.has(J))return E.get(J);var ge={},Se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in J)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(J,ze)){var De=Se?Object.getOwnPropertyDescriptor(J,ze):null;De&&(De.get||De.set)?Object.defineProperty(ge,ze,De):ge[ze]=J[ze]}return ge.default=J,E&&E.set(J,ge),ge}function ie(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},ge=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(ge=ge.concat(Object.getOwnPropertySymbols(E).filter(function(Se){return Object.getOwnPropertyDescriptor(E,Se).enumerable}))),ge.forEach(function(Se){G(J,Se,E[Se])})}return J}function te(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(J);M&&(ge=ge.filter(function(Se){return Object.getOwnPropertyDescriptor(J,Se).enumerable})),E.push.apply(E,ge)}return E}function Ce(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):te(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var pe=function(J,M){return W.createElement(b.default,Ce(ie({},J),{ref:M,icon:K.default}))},fe=W.forwardRef(pe)},43552:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),Object.defineProperty(N,"default",{enumerable:!0,get:function(){return fe}});var W=Q(k(67294)),K=j(k(29260)),b=j(k(26545));function G(J,M,E){return M in J?Object.defineProperty(J,M,{value:E,enumerable:!0,configurable:!0,writable:!0}):J[M]=E,J}function j(J){return J&&J.__esModule?J:{default:J}}function q(J){if(typeof WeakMap!="function")return null;var M=new WeakMap,E=new WeakMap;return(q=function(ge){return ge?E:M})(J)}function Q(J,M){if(!M&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var E=q(M);if(E&&E.has(J))return E.get(J);var ge={},Se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ze in J)if(ze!=="default"&&Object.prototype.hasOwnProperty.call(J,ze)){var De=Se?Object.getOwnPropertyDescriptor(J,ze):null;De&&(De.get||De.set)?Object.defineProperty(ge,ze,De):ge[ze]=J[ze]}return ge.default=J,E&&E.set(J,ge),ge}function ie(J){for(var M=1;M<arguments.length;M++){var E=arguments[M]!=null?arguments[M]:{},ge=Object.keys(E);typeof Object.getOwnPropertySymbols=="function"&&(ge=ge.concat(Object.getOwnPropertySymbols(E).filter(function(Se){return Object.getOwnPropertyDescriptor(E,Se).enumerable}))),ge.forEach(function(Se){G(J,Se,E[Se])})}return J}function te(J,M){var E=Object.keys(J);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(J);M&&(ge=ge.filter(function(Se){return Object.getOwnPropertyDescriptor(J,Se).enumerable})),E.push.apply(E,ge)}return E}function Ce(J,M){return M=M!=null?M:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(M)):te(Object(M)).forEach(function(E){Object.defineProperty(J,E,Object.getOwnPropertyDescriptor(M,E))}),J}var pe=function(J,M){return W.createElement(b.default,Ce(ie({},J),{ref:M,icon:K.default}))},fe=W.forwardRef(pe)},49458:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0});function W(Ze,xe){for(var _e in xe)Object.defineProperty(Ze,_e,{enumerable:!0,get:xe[_e]})}W(N,{warning:function(){return M},isIconDefinition:function(){return E},normalizeAttrs:function(){return ge},generate:function(){return Se},getSecondaryColor:function(){return ze},normalizeTwoToneColors:function(){return De},svgBaseProps:function(){return Ue},iconStyles:function(){return at},useInsertStyles:function(){return Je}});var K=k(78589),b=k(93399),G=k(63298),j=te(k(45520)),q=pe(k(67294)),Q=te(k(13357));function ie(Ze,xe,_e){return xe in Ze?Object.defineProperty(Ze,xe,{value:_e,enumerable:!0,configurable:!0,writable:!0}):Ze[xe]=_e,Ze}function te(Ze){return Ze&&Ze.__esModule?Ze:{default:Ze}}function Ce(Ze){if(typeof WeakMap!="function")return null;var xe=new WeakMap,_e=new WeakMap;return(Ce=function(He){return He?_e:xe})(Ze)}function pe(Ze,xe){if(!xe&&Ze&&Ze.__esModule)return Ze;if(Ze===null||typeof Ze!="object"&&typeof Ze!="function")return{default:Ze};var _e=Ce(xe);if(_e&&_e.has(Ze))return _e.get(Ze);var He={},Ke=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in Ze)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(Ze,Et)){var ke=Ke?Object.getOwnPropertyDescriptor(Ze,Et):null;ke&&(ke.get||ke.set)?Object.defineProperty(He,Et,ke):He[Et]=Ze[Et]}return He.default=Ze,_e&&_e.set(Ze,He),He}function fe(Ze){for(var xe=1;xe<arguments.length;xe++){var _e=arguments[xe]!=null?arguments[xe]:{},He=Object.keys(_e);typeof Object.getOwnPropertySymbols=="function"&&(He=He.concat(Object.getOwnPropertySymbols(_e).filter(function(Ke){return Object.getOwnPropertyDescriptor(_e,Ke).enumerable}))),He.forEach(function(Ke){ie(Ze,Ke,_e[Ke])})}return Ze}function J(Ze){return Ze.replace(/-(.)/g,function(xe,_e){return _e.toUpperCase()})}function M(Ze,xe){(0,j.default)(Ze,"[@ant-design/icons] ".concat(xe))}function E(Ze){return typeof Ze=="object"&&typeof Ze.name=="string"&&typeof Ze.theme=="string"&&(typeof Ze.icon=="object"||typeof Ze.icon=="function")}function ge(){var Ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(Ze).reduce(function(xe,_e){var He=Ze[_e];switch(_e){case"class":xe.className=He,delete xe.class;break;default:delete xe[_e],xe[J(_e)]=He}return xe},{})}function Se(Ze,xe,_e){return _e?q.default.createElement(Ze.tag,fe({key:xe},ge(Ze.attrs),_e),(Ze.children||[]).map(function(He,Ke){return Se(He,"".concat(xe,"-").concat(Ze.tag,"-").concat(Ke))})):q.default.createElement(Ze.tag,fe({key:xe},ge(Ze.attrs)),(Ze.children||[]).map(function(He,Ke){return Se(He,"".concat(xe,"-").concat(Ze.tag,"-").concat(Ke))}))}function ze(Ze){return(0,K.generate)(Ze)[0]}function De(Ze){return Ze?Array.isArray(Ze)?Ze:[Ze]:[]}var Ue={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},at=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Je=function(Ze){var xe=(0,q.useContext)(Q.default),_e=xe.csp,He=xe.prefixCls,Ke=at;He&&(Ke=Ke.replace(/anticon/g,He)),(0,q.useEffect)(function(){var Et=Ze.current,ke=(0,G.getShadowRoot)(Et);(0,b.updateCSS)(Ke,"@ant-design-icons",{prepend:!0,csp:_e,attachTo:ke})},[])}},77204:function(ft,N,k){"use strict";k.r(N),k.d(N,{TinyColor:function(){return W.C},bounds:function(){return at},convertDecimalToHex:function(){return q.Wl},convertHexToDecimal:function(){return q.T6},fromRatio:function(){return te},hslToRgb:function(){return q.ve},hsvToRgb:function(){return q.WE},inputToRGB:function(){return pe.uA},isReadable:function(){return G},isValidCSSUnit:function(){return pe.ky},legacyRandom:function(){return Ce},mostReadable:function(){return j},names:function(){return K.R},numberInputToObject:function(){return q.Yt},parseIntFromHex:function(){return q.VD},random:function(){return fe},readability:function(){return b},rgbToHex:function(){return q.vq},rgbToHsl:function(){return q.lC},rgbToHsv:function(){return q.py},rgbToRgb:function(){return q.rW},rgbaToArgbHex:function(){return q.GC},rgbaToHex:function(){return q.s},stringInputToObject:function(){return pe.uz},toMsFilter:function(){return Q}});var W=k(84780),K=k(72006);function b(Je,Ze){const xe=new W.C(Je),_e=new W.C(Ze);return(Math.max(xe.getLuminance(),_e.getLuminance())+.05)/(Math.min(xe.getLuminance(),_e.getLuminance())+.05)}function G(Je,Ze,xe={level:"AA",size:"small"}){var He,Ke;const _e=b(Je,Ze);switch(((He=xe.level)!=null?He:"AA")+((Ke=xe.size)!=null?Ke:"small")){case"AAsmall":case"AAAlarge":return _e>=4.5;case"AAlarge":return _e>=3;case"AAAsmall":return _e>=7;default:return!1}}function j(Je,Ze,xe={includeFallbackColors:!1,level:"AA",size:"small"}){let _e=null,He=0;const{includeFallbackColors:Ke,level:Et,size:ke}=xe;for(const qe of Ze){const ne=b(Je,qe);ne>He&&(He=ne,_e=new W.C(qe))}return G(Je,_e,{level:Et,size:ke})||!Ke?_e:(xe.includeFallbackColors=!1,j(Je,["#fff","#000"],xe))}var q=k(59374);function Q(Je,Ze){const xe=new W.C(Je),_e="#"+(0,q.GC)(xe.r,xe.g,xe.b,xe.a);let He=_e;const Ke=xe.gradientType?"GradientType = 1, ":"";if(Ze){const Et=new W.C(Ze);He="#"+(0,q.GC)(Et.r,Et.g,Et.b,Et.a)}return`progid:DXImageTransform.Microsoft.gradient(${Ke}startColorstr=${_e},endColorstr=${He})`}var ie=k(55312);function te(Je,Ze){const xe={r:(0,ie.JX)(Je.r),g:(0,ie.JX)(Je.g),b:(0,ie.JX)(Je.b)};return Je.a!==void 0&&(xe.a=Number(Je.a)),new W.C(xe,Ze)}function Ce(){return new W.C({r:Math.random(),g:Math.random(),b:Math.random()})}var pe=k(27594);function fe(Je={}){if(Je.count!==void 0&&Je.count!==null){const Ke=Je.count,Et=[];for(Je.count=void 0;Ke>Et.length;)Je.count=null,Je.seed&&(Je.seed+=1),Et.push(fe(Je));return Je.count=Ke,Et}const Ze=J(Je.hue,Je.seed),xe=M(Ze,Je),_e=E(Ze,xe,Je),He={h:Ze,s:xe,v:_e};return Je.alpha!==void 0&&(He.a=Je.alpha),new W.C(He)}function J(Je,Ze){const xe=Se(Je);let _e=De(xe,Ze);return _e<0&&(_e=360+_e),_e}function M(Je,Ze){if(Ze.hue==="monochrome")return 0;if(Ze.luminosity==="random")return De([0,100],Ze.seed);const{saturationRange:xe}=ze(Je);let _e=xe[0],He=xe[1];switch(Ze.luminosity){case"bright":_e=55;break;case"dark":_e=He-10;break;case"light":He=55;break;default:break}return De([_e,He],Ze.seed)}function E(Je,Ze,xe){let _e=ge(Je,Ze),He=100;switch(xe.luminosity){case"dark":He=_e+20;break;case"light":_e=(He+_e)/2;break;case"random":_e=0,He=100;break;default:break}return De([_e,He],xe.seed)}function ge(Je,Ze){const{lowerBounds:xe}=ze(Je);for(let _e=0;_e<xe.length-1;_e++){const He=xe[_e][0],Ke=xe[_e][1],Et=xe[_e+1][0],ke=xe[_e+1][1];if(Ze>=He&&Ze<=Et){const qe=(ke-Ke)/(Et-He),ne=Ke-qe*He;return qe*Ze+ne}}return 0}function Se(Je){const Ze=parseInt(Je,10);if(!Number.isNaN(Ze)&&Ze<360&&Ze>0)return[Ze,Ze];if(typeof Je=="string"){const xe=at.find(He=>He.name===Je);if(xe){const He=Ue(xe);if(He.hueRange)return He.hueRange}const _e=new W.C(Je);if(_e.isValid){const He=_e.toHsv().h;return[He,He]}}return[0,360]}function ze(Je){Je>=334&&Je<=360&&(Je-=360);for(const Ze of at){const xe=Ue(Ze);if(xe.hueRange&&Je>=xe.hueRange[0]&&Je<=xe.hueRange[1])return xe}throw Error("Color not found")}function De(Je,Ze){if(Ze===void 0)return Math.floor(Je[0]+Math.random()*(Je[1]+1-Je[0]));const xe=Je[1]||1,_e=Je[0]||0;Ze=(Ze*9301+49297)%233280;const He=Ze/233280;return Math.floor(_e+He*(xe-_e))}function Ue(Je){const Ze=Je.lowerBounds[0][0],xe=Je.lowerBounds[Je.lowerBounds.length-1][0],_e=Je.lowerBounds[Je.lowerBounds.length-1][1],He=Je.lowerBounds[0][1];return{name:Je.name,hueRange:Je.hueRange,lowerBounds:Je.lowerBounds,saturationRange:[Ze,xe],brightnessRange:[_e,He]}}const at=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}]},56645:function(ft,N){(function(k,W){W(N)})(this,function(k){"use strict";function W(Ke,Et){return K(Ke)||b(Ke,Et)||G()}function K(Ke){if(Array.isArray(Ke))return Ke}function b(Ke,Et){var ke=[],qe=!0,ne=!1,Ge=void 0;try{for(var oe=Ke[Symbol.iterator](),Fe;!(qe=(Fe=oe.next()).done)&&(ke.push(Fe.value),!(Et&&ke.length===Et));qe=!0);}catch(ut){ne=!0,Ge=ut}finally{try{!qe&&oe.return!=null&&oe.return()}finally{if(ne)throw Ge}}return ke}function G(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function j(Ke,Et,ke,qe){Ke=Ke.filter(function(We,Ve){var dt=Et(We,Ve),Ht=ke(We,Ve);return dt!=null&&isFinite(dt)&&Ht!=null&&isFinite(Ht)}),qe&&Ke.sort(function(We,Ve){return Et(We)-Et(Ve)});for(var ne=Ke.length,Ge=new Float64Array(ne),oe=new Float64Array(ne),Fe=0,ut=0,Ae,Le,rt,ye=0;ye<ne;)rt=Ke[ye],Ge[ye]=Ae=+Et(rt,ye,Ke),oe[ye]=Le=+ke(rt,ye,Ke),++ye,Fe+=(Ae-Fe)/ye,ut+=(Le-ut)/ye;for(var me=0;me<ne;++me)Ge[me]-=Fe,oe[me]-=ut;return[Ge,oe,Fe,ut]}function q(Ke,Et,ke,qe){for(var ne=0,Ge=0,oe=Ke.length;Ge<oe;Ge++){var Fe=Ke[Ge],ut=+Et(Fe,Ge,Ke),Ae=+ke(Fe,Ge,Ke);ut!=null&&isFinite(ut)&&Ae!=null&&isFinite(Ae)&&qe(ut,Ae,ne++)}}function Q(Ke,Et,ke,qe,ne){var Ge=0,oe=0;return q(Ke,Et,ke,function(Fe,ut){var Ae=ut-ne(Fe),Le=ut-qe;Ge+=Ae*Ae,oe+=Le*Le}),1-Ge/oe}function ie(Ke){return Math.atan2(Ke[1][1]-Ke[0][1],Ke[1][0]-Ke[0][0])*180/Math.PI}function te(Ke){return[(Ke[0][0]+Ke[1][0])/2,(Ke[0][1]+Ke[1][1])/2]}function Ce(Ke,Et,ke){for(var qe=Math.log(Et-Ke)*Math.LOG10E+1|0,ne=1*Math.pow(10,-qe/2-1),Ge=1e4,oe=[ut(Ke),ut(Et)],Fe=0;Ae(oe)&&Fe<Ge;);return oe;function ut(Le){return[Le,ke(Le)]}function Ae(Le){Fe++;for(var rt=Le.length,ye=!1,me=0;me<rt-1;me++){var We=Le[me],Ve=Le[me+1],dt=te([We,Ve]),Ht=ut(dt[0]),et=ie([We,dt]),$e=ie([We,Ht]),Te=Math.abs(et-$e);Te>ne&&(Le.splice(me+1,0,Ht),ye=!0)}return ye}}function pe(Ke,Et,ke,qe){var ne=qe-Ke*Ke,Ge=Math.abs(ne)<1e-24?0:(ke-Ke*Et)/ne,oe=Et-Ge*Ke;return[oe,Ge]}function fe(){var Ke=function(Ge){return Ge[0]},Et=function(Ge){return Ge[1]},ke;function qe(ne){var Ge=0,oe=0,Fe=0,ut=0,Ae=0,Le=0,rt=ke?+ke[0]:1/0,ye=ke?+ke[1]:-1/0;q(ne,Ke,Et,function($e,Te){var Xe=Math.log(Te),pt=$e*Te;++Ge,oe+=(Te-oe)/Ge,ut+=(pt-ut)/Ge,Le+=($e*pt-Le)/Ge,Fe+=(Te*Xe-Fe)/Ge,Ae+=(pt*Xe-Ae)/Ge,ke||($e<rt&&(rt=$e),$e>ye&&(ye=$e))});var me=pe(ut/oe,Fe/oe,Ae/oe,Le/oe),We=W(me,2),Ve=We[0],dt=We[1];Ve=Math.exp(Ve);var Ht=function(Te){return Ve*Math.exp(dt*Te)},et=Ce(rt,ye,Ht);return et.a=Ve,et.b=dt,et.predict=Ht,et.rSquared=Q(ne,Ke,Et,oe,Ht),et}return qe.domain=function(ne){return arguments.length?(ke=ne,qe):ke},qe.x=function(ne){return arguments.length?(Ke=ne,qe):Ke},qe.y=function(ne){return arguments.length?(Et=ne,qe):Et},qe}function J(){var Ke=function(Ge){return Ge[0]},Et=function(Ge){return Ge[1]},ke;function qe(ne){var Ge=0,oe=0,Fe=0,ut=0,Ae=0,Le=ke?+ke[0]:1/0,rt=ke?+ke[1]:-1/0;q(ne,Ke,Et,function(et,$e){++Ge,oe+=(et-oe)/Ge,Fe+=($e-Fe)/Ge,ut+=(et*$e-ut)/Ge,Ae+=(et*et-Ae)/Ge,ke||(et<Le&&(Le=et),et>rt&&(rt=et))});var ye=pe(oe,Fe,ut,Ae),me=W(ye,2),We=me[0],Ve=me[1],dt=function($e){return Ve*$e+We},Ht=[[Le,dt(Le)],[rt,dt(rt)]];return Ht.a=Ve,Ht.b=We,Ht.predict=dt,Ht.rSquared=Q(ne,Ke,Et,Fe,dt),Ht}return qe.domain=function(ne){return arguments.length?(ke=ne,qe):ke},qe.x=function(ne){return arguments.length?(Ke=ne,qe):Ke},qe.y=function(ne){return arguments.length?(Et=ne,qe):Et},qe}function M(Ke){Ke.sort(function(ke,qe){return ke-qe});var Et=Ke.length/2;return Et%1===0?(Ke[Et-1]+Ke[Et])/2:Ke[Math.floor(Et)]}var E=2,ge=1e-12;function Se(){var Ke=function(Ge){return Ge[0]},Et=function(Ge){return Ge[1]},ke=.3;function qe(ne){for(var Ge=j(ne,Ke,Et,!0),oe=W(Ge,4),Fe=oe[0],ut=oe[1],Ae=oe[2],Le=oe[3],rt=Fe.length,ye=Math.max(2,~~(ke*rt)),me=new Float64Array(rt),We=new Float64Array(rt),Ve=new Float64Array(rt).fill(1),dt=-1;++dt<=E;){for(var Ht=[0,ye-1],et=0;et<rt;++et){for(var $e=Fe[et],Te=Ht[0],Xe=Ht[1],pt=$e-Fe[Te]>Fe[Xe]-$e?Te:Xe,Oe=0,Be=0,vt=0,Rt=0,rr=0,br=1/Math.abs(Fe[pt]-$e||1),lt=Te;lt<=Xe;++lt){var an=Fe[lt],$r=ut[lt],Xr=ze(Math.abs($e-an)*br)*Ve[lt],Nt=an*Xr;Oe+=Xr,Be+=Nt,vt+=$r*Xr,Rt+=$r*Nt,rr+=an*Nt}var Kt=pe(Be/Oe,vt/Oe,Rt/Oe,rr/Oe),or=W(Kt,2),kt=or[0],Jt=or[1];me[et]=kt+Jt*$e,We[et]=Math.abs(ut[et]-me[et]),De(Fe,et+1,Ht)}if(dt===E)break;var Er=M(We);if(Math.abs(Er)<ge)break;for(var wr=0,Br,zr;wr<rt;++wr)Br=We[wr]/(6*Er),Ve[wr]=Br>=1?ge:(zr=1-Br*Br)*zr}return Ue(Fe,me,Ae,Le)}return qe.bandwidth=function(ne){return arguments.length?(ke=ne,qe):ke},qe.x=function(ne){return arguments.length?(Ke=ne,qe):Ke},qe.y=function(ne){return arguments.length?(Et=ne,qe):Et},qe}function ze(Ke){return(Ke=1-Ke*Ke*Ke)*Ke*Ke}function De(Ke,Et,ke){var qe=Ke[Et],ne=ke[0],Ge=ke[1]+1;if(!(Ge>=Ke.length))for(;Et>ne&&Ke[Ge]-qe<=qe-Ke[ne];)ke[0]=++ne,ke[1]=Ge,++Ge}function Ue(Ke,Et,ke,qe){for(var ne=Ke.length,Ge=[],oe=0,Fe=0,ut=[],Ae;oe<ne;++oe)Ae=Ke[oe]+ke,ut[0]===Ae?ut[1]+=(Et[oe]-ut[1])/++Fe:(Fe=0,ut[1]+=qe,ut=[Ae,Et[oe]],Ge.push(ut));return ut[1]+=qe,Ge}function at(){var Ke=function(oe){return oe[0]},Et=function(oe){return oe[1]},ke=Math.E,qe;function ne(Ge){var oe=0,Fe=0,ut=0,Ae=0,Le=0,rt=qe?+qe[0]:1/0,ye=qe?+qe[1]:-1/0,me=Math.log(ke);q(Ge,Ke,Et,function(Te,Xe){var pt=Math.log(Te)/me;++oe,Fe+=(pt-Fe)/oe,ut+=(Xe-ut)/oe,Ae+=(pt*Xe-Ae)/oe,Le+=(pt*pt-Le)/oe,qe||(Te<rt&&(rt=Te),Te>ye&&(ye=Te))});var We=pe(Fe,ut,Ae,Le),Ve=W(We,2),dt=Ve[0],Ht=Ve[1],et=function(Xe){return Ht*Math.log(Xe)/me+dt},$e=Ce(rt,ye,et);return $e.a=Ht,$e.b=dt,$e.predict=et,$e.rSquared=Q(Ge,Ke,Et,ut,et),$e}return ne.domain=function(Ge){return arguments.length?(qe=Ge,ne):qe},ne.x=function(Ge){return arguments.length?(Ke=Ge,ne):Ke},ne.y=function(Ge){return arguments.length?(Et=Ge,ne):Et},ne.base=function(Ge){return arguments.length?(ke=Ge,ne):ke},ne}function Je(){var Ke=function(Ge){return Ge[0]},Et=function(Ge){return Ge[1]},ke;function qe(ne){var Ge=j(ne,Ke,Et),oe=W(Ge,4),Fe=oe[0],ut=oe[1],Ae=oe[2],Le=oe[3],rt=Fe.length,ye=0,me=0,We=0,Ve=0,dt=0,Ht,et,$e,Te;for(Ht=0;Ht<rt;)et=Fe[Ht],$e=ut[Ht++],Te=et*et,ye+=(Te-ye)/Ht,me+=(Te*et-me)/Ht,We+=(Te*Te-We)/Ht,Ve+=(et*$e-Ve)/Ht,dt+=(Te*$e-dt)/Ht;var Xe=0,pt=0,Oe=ke?+ke[0]:1/0,Be=ke?+ke[1]:-1/0;q(ne,Ke,Et,function(Xr,Nt){pt++,Xe+=(Nt-Xe)/pt,ke||(Xr<Oe&&(Oe=Xr),Xr>Be&&(Be=Xr))});var vt=We-ye*ye,Rt=ye*vt-me*me,rr=(dt*ye-Ve*me)/Rt,br=(Ve*vt-dt*me)/Rt,lt=-rr*ye,an=function(Nt){return Nt=Nt-Ae,rr*Nt*Nt+br*Nt+lt+Le},$r=Ce(Oe,Be,an);return $r.a=rr,$r.b=br-2*rr*Ae,$r.c=lt-br*Ae+rr*Ae*Ae+Le,$r.predict=an,$r.rSquared=Q(ne,Ke,Et,Xe,an),$r}return qe.domain=function(ne){return arguments.length?(ke=ne,qe):ke},qe.x=function(ne){return arguments.length?(Ke=ne,qe):Ke},qe.y=function(ne){return arguments.length?(Et=ne,qe):Et},qe}function Ze(){var Ke=function(oe){return oe[0]},Et=function(oe){return oe[1]},ke=3,qe;function ne(Ge){if(ke===1){var oe=J().x(Ke).y(Et).domain(qe)(Ge);return oe.coefficients=[oe.b,oe.a],delete oe.a,delete oe.b,oe}if(ke===2){var Fe=Je().x(Ke).y(Et).domain(qe)(Ge);return Fe.coefficients=[Fe.c,Fe.b,Fe.a],delete Fe.a,delete Fe.b,delete Fe.c,Fe}var ut=j(Ge,Ke,Et),Ae=W(ut,4),Le=Ae[0],rt=Ae[1],ye=Ae[2],me=Ae[3],We=Le.length,Ve=[],dt=[],Ht=ke+1,et=0,$e=0,Te=qe?+qe[0]:1/0,Xe=qe?+qe[1]:-1/0;q(Ge,Ke,Et,function(an,$r){++$e,et+=($r-et)/$e,qe||(an<Te&&(Te=an),an>Xe&&(Xe=an))});var pt,Oe,Be,vt,Rt;for(pt=0;pt<Ht;++pt){for(Be=0,vt=0;Be<We;++Be)vt+=Math.pow(Le[Be],pt)*rt[Be];for(Ve.push(vt),Rt=new Float64Array(Ht),Oe=0;Oe<Ht;++Oe){for(Be=0,vt=0;Be<We;++Be)vt+=Math.pow(Le[Be],pt+Oe);Rt[Oe]=vt}dt.push(Rt)}dt.push(Ve);var rr=_e(dt),br=function($r){$r-=ye;var Xr=me+rr[0]+rr[1]*$r+rr[2]*$r*$r;for(pt=3;pt<Ht;++pt)Xr+=rr[pt]*Math.pow($r,pt);return Xr},lt=Ce(Te,Xe,br);return lt.coefficients=xe(Ht,rr,-ye,me),lt.predict=br,lt.rSquared=Q(Ge,Ke,Et,et,br),lt}return ne.domain=function(Ge){return arguments.length?(qe=Ge,ne):qe},ne.x=function(Ge){return arguments.length?(Ke=Ge,ne):Ke},ne.y=function(Ge){return arguments.length?(Et=Ge,ne):Et},ne.order=function(Ge){return arguments.length?(ke=Ge,ne):ke},ne}function xe(Ke,Et,ke,qe){var ne=Array(Ke),Ge,oe,Fe,ut;for(Ge=0;Ge<Ke;++Ge)ne[Ge]=0;for(Ge=Ke-1;Ge>=0;--Ge)for(Fe=Et[Ge],ut=1,ne[Ge]+=Fe,oe=1;oe<=Ge;++oe)ut*=(Ge+1-oe)/oe,ne[Ge-oe]+=Fe*Math.pow(ke,oe)*ut;return ne[0]+=qe,ne}function _e(Ke){var Et=Ke.length-1,ke=[],qe,ne,Ge,oe,Fe;for(qe=0;qe<Et;++qe){for(oe=qe,ne=qe+1;ne<Et;++ne)Math.abs(Ke[qe][ne])>Math.abs(Ke[qe][oe])&&(oe=ne);for(Ge=qe;Ge<Et+1;++Ge)Fe=Ke[Ge][qe],Ke[Ge][qe]=Ke[Ge][oe],Ke[Ge][oe]=Fe;for(ne=qe+1;ne<Et;++ne)for(Ge=Et;Ge>=qe;Ge--)Ke[Ge][ne]-=Ke[Ge][qe]*Ke[qe][ne]/Ke[qe][qe]}for(ne=Et-1;ne>=0;--ne){for(Fe=0,Ge=ne+1;Ge<Et;++Ge)Fe+=Ke[Ge][ne]*ke[Ge];ke[ne]=(Ke[Et][ne]-Fe)/Ke[ne][ne]}return ke}function He(){var Ke=function(Ge){return Ge[0]},Et=function(Ge){return Ge[1]},ke;function qe(ne){var Ge=0,oe=0,Fe=0,ut=0,Ae=0,Le=0,rt=ke?+ke[0]:1/0,ye=ke?+ke[1]:-1/0;q(ne,Ke,Et,function($e,Te){var Xe=Math.log($e),pt=Math.log(Te);++Ge,oe+=(Xe-oe)/Ge,Fe+=(pt-Fe)/Ge,ut+=(Xe*pt-ut)/Ge,Ae+=(Xe*Xe-Ae)/Ge,Le+=(Te-Le)/Ge,ke||($e<rt&&(rt=$e),$e>ye&&(ye=$e))});var me=pe(oe,Fe,ut,Ae),We=W(me,2),Ve=We[0],dt=We[1];Ve=Math.exp(Ve);var Ht=function(Te){return Ve*Math.pow(Te,dt)},et=Ce(rt,ye,Ht);return et.a=Ve,et.b=dt,et.predict=Ht,et.rSquared=Q(ne,Ke,Et,Le,Ht),et}return qe.domain=function(ne){return arguments.length?(ke=ne,qe):ke},qe.x=function(ne){return arguments.length?(Ke=ne,qe):Ke},qe.y=function(ne){return arguments.length?(Et=ne,qe):Et},qe}k.regressionExp=fe,k.regressionLinear=J,k.regressionLoess=Se,k.regressionLog=at,k.regressionPoly=Ze,k.regressionPow=He,k.regressionQuad=Je,Object.defineProperty(k,"__esModule",{value:!0})})},43631:function(ft,N,k){"use strict";k.d(N,{qY:function(){return J}});var W=k(34155),K=function(Ue,at,Je){if(Je||arguments.length===2)for(var Ze=0,xe=at.length,_e;Ze<xe;Ze++)(_e||!(Ze in at))&&(_e||(_e=Array.prototype.slice.call(at,0,Ze)),_e[Ze]=at[Ze]);return Ue.concat(_e||Array.prototype.slice.call(at))},b=function(){function Ue(at,Je,Ze){this.name=at,this.version=Je,this.os=Ze,this.type="browser"}return Ue}(),G=function(){function Ue(at){this.version=at,this.type="node",this.name="node",this.os=W.platform}return Ue}(),j=function(){function Ue(at,Je,Ze,xe){this.name=at,this.version=Je,this.os=Ze,this.bot=xe,this.type="bot-device"}return Ue}(),q=function(){function Ue(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return Ue}(),Q=function(){function Ue(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return Ue}(),ie=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,te=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ce=3,pe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ie]],fe=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function J(Ue){return Ue?ge(Ue):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new Q:typeof navigator!="undefined"?ge(navigator.userAgent):ze()}function M(Ue){return Ue!==""&&pe.reduce(function(at,Je){var Ze=Je[0],xe=Je[1];if(at)return at;var _e=xe.exec(Ue);return!!_e&&[Ze,_e]},!1)}function E(Ue){var at=M(Ue);return at?at[0]:null}function ge(Ue){var at=M(Ue);if(!at)return null;var Je=at[0],Ze=at[1];if(Je==="searchbot")return new q;var xe=Ze[1]&&Ze[1].split(".").join("_").split("_").slice(0,3);xe?xe.length<Ce&&(xe=K(K([],xe,!0),De(Ce-xe.length),!0)):xe=[];var _e=xe.join("."),He=Se(Ue),Ke=te.exec(Ue);return Ke&&Ke[1]?new j(Je,_e,He,Ke[1]):new b(Je,_e,He)}function Se(Ue){for(var at=0,Je=fe.length;at<Je;at++){var Ze=fe[at],xe=Ze[0],_e=Ze[1],He=_e.exec(Ue);if(He)return xe}return null}function ze(){var Ue=typeof W!="undefined"&&W.version;return Ue?new G(W.version.slice(1)):null}function De(Ue){for(var at=[],Je=0;Je<Ue;Je++)at.push("0");return at}},9187:function(ft){"use strict";ft.exports=N,ft.exports.default=N;function N(ne,Ge,oe){oe=oe||2;var Fe=Ge&&Ge.length,ut=Fe?Ge[0]*oe:ne.length,Ae=k(ne,0,ut,oe,!0),Le=[];if(!Ae||Ae.next===Ae.prev)return Le;var rt,ye,me,We,Ve,dt,Ht;if(Fe&&(Ae=Q(ne,Ge,Ae,oe)),ne.length>80*oe){rt=me=ne[0],ye=We=ne[1];for(var et=oe;et<ut;et+=oe)Ve=ne[et],dt=ne[et+1],Ve<rt&&(rt=Ve),dt<ye&&(ye=dt),Ve>me&&(me=Ve),dt>We&&(We=dt);Ht=Math.max(me-rt,We-ye),Ht=Ht!==0?32767/Ht:0}return K(Ae,Le,oe,rt,ye,Ht,0),Le}function k(ne,Ge,oe,Fe,ut){var Ae,Le;if(ut===qe(ne,Ge,oe,Fe)>0)for(Ae=Ge;Ae<oe;Ae+=Fe)Le=Ke(Ae,ne[Ae],ne[Ae+1],Le);else for(Ae=oe-Fe;Ae>=Ge;Ae-=Fe)Le=Ke(Ae,ne[Ae],ne[Ae+1],Le);return Le&&De(Le,Le.next)&&(Et(Le),Le=Le.next),Le}function W(ne,Ge){if(!ne)return ne;Ge||(Ge=ne);var oe=ne,Fe;do if(Fe=!1,!oe.steiner&&(De(oe,oe.next)||ze(oe.prev,oe,oe.next)===0)){if(Et(oe),oe=Ge=oe.prev,oe===oe.next)break;Fe=!0}else oe=oe.next;while(Fe||oe!==Ge);return Ge}function K(ne,Ge,oe,Fe,ut,Ae,Le){if(ne){!Le&&Ae&&fe(ne,Fe,ut,Ae);for(var rt=ne,ye,me;ne.prev!==ne.next;){if(ye=ne.prev,me=ne.next,Ae?G(ne,Fe,ut,Ae):b(ne)){Ge.push(ye.i/oe|0),Ge.push(ne.i/oe|0),Ge.push(me.i/oe|0),Et(ne),ne=me.next,rt=me.next;continue}if(ne=me,ne===rt){Le?Le===1?(ne=j(W(ne),Ge,oe),K(ne,Ge,oe,Fe,ut,Ae,2)):Le===2&&q(ne,Ge,oe,Fe,ut,Ae):K(W(ne),Ge,oe,Fe,ut,Ae,1);break}}}}function b(ne){var Ge=ne.prev,oe=ne,Fe=ne.next;if(ze(Ge,oe,Fe)>=0)return!1;for(var ut=Ge.x,Ae=oe.x,Le=Fe.x,rt=Ge.y,ye=oe.y,me=Fe.y,We=ut<Ae?ut<Le?ut:Le:Ae<Le?Ae:Le,Ve=rt<ye?rt<me?rt:me:ye<me?ye:me,dt=ut>Ae?ut>Le?ut:Le:Ae>Le?Ae:Le,Ht=rt>ye?rt>me?rt:me:ye>me?ye:me,et=Fe.next;et!==Ge;){if(et.x>=We&&et.x<=dt&&et.y>=Ve&&et.y<=Ht&&ge(ut,rt,Ae,ye,Le,me,et.x,et.y)&&ze(et.prev,et,et.next)>=0)return!1;et=et.next}return!0}function G(ne,Ge,oe,Fe){var ut=ne.prev,Ae=ne,Le=ne.next;if(ze(ut,Ae,Le)>=0)return!1;for(var rt=ut.x,ye=Ae.x,me=Le.x,We=ut.y,Ve=Ae.y,dt=Le.y,Ht=rt<ye?rt<me?rt:me:ye<me?ye:me,et=We<Ve?We<dt?We:dt:Ve<dt?Ve:dt,$e=rt>ye?rt>me?rt:me:ye>me?ye:me,Te=We>Ve?We>dt?We:dt:Ve>dt?Ve:dt,Xe=M(Ht,et,Ge,oe,Fe),pt=M($e,Te,Ge,oe,Fe),Oe=ne.prevZ,Be=ne.nextZ;Oe&&Oe.z>=Xe&&Be&&Be.z<=pt;){if(Oe.x>=Ht&&Oe.x<=$e&&Oe.y>=et&&Oe.y<=Te&&Oe!==ut&&Oe!==Le&&ge(rt,We,ye,Ve,me,dt,Oe.x,Oe.y)&&ze(Oe.prev,Oe,Oe.next)>=0||(Oe=Oe.prevZ,Be.x>=Ht&&Be.x<=$e&&Be.y>=et&&Be.y<=Te&&Be!==ut&&Be!==Le&&ge(rt,We,ye,Ve,me,dt,Be.x,Be.y)&&ze(Be.prev,Be,Be.next)>=0))return!1;Be=Be.nextZ}for(;Oe&&Oe.z>=Xe;){if(Oe.x>=Ht&&Oe.x<=$e&&Oe.y>=et&&Oe.y<=Te&&Oe!==ut&&Oe!==Le&&ge(rt,We,ye,Ve,me,dt,Oe.x,Oe.y)&&ze(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.prevZ}for(;Be&&Be.z<=pt;){if(Be.x>=Ht&&Be.x<=$e&&Be.y>=et&&Be.y<=Te&&Be!==ut&&Be!==Le&&ge(rt,We,ye,Ve,me,dt,Be.x,Be.y)&&ze(Be.prev,Be,Be.next)>=0)return!1;Be=Be.nextZ}return!0}function j(ne,Ge,oe){var Fe=ne;do{var ut=Fe.prev,Ae=Fe.next.next;!De(ut,Ae)&&Ue(ut,Fe,Fe.next,Ae)&&xe(ut,Ae)&&xe(Ae,ut)&&(Ge.push(ut.i/oe|0),Ge.push(Fe.i/oe|0),Ge.push(Ae.i/oe|0),Et(Fe),Et(Fe.next),Fe=ne=Ae),Fe=Fe.next}while(Fe!==ne);return W(Fe)}function q(ne,Ge,oe,Fe,ut,Ae){var Le=ne;do{for(var rt=Le.next.next;rt!==Le.prev;){if(Le.i!==rt.i&&Se(Le,rt)){var ye=He(Le,rt);Le=W(Le,Le.next),ye=W(ye,ye.next),K(Le,Ge,oe,Fe,ut,Ae,0),K(ye,Ge,oe,Fe,ut,Ae,0);return}rt=rt.next}Le=Le.next}while(Le!==ne)}function Q(ne,Ge,oe,Fe){var ut=[],Ae,Le,rt,ye,me;for(Ae=0,Le=Ge.length;Ae<Le;Ae++)rt=Ge[Ae]*Fe,ye=Ae<Le-1?Ge[Ae+1]*Fe:ne.length,me=k(ne,rt,ye,Fe,!1),me===me.next&&(me.steiner=!0),ut.push(E(me));for(ut.sort(ie),Ae=0;Ae<ut.length;Ae++)oe=te(ut[Ae],oe);return oe}function ie(ne,Ge){return ne.x-Ge.x}function te(ne,Ge){var oe=Ce(ne,Ge);if(!oe)return Ge;var Fe=He(oe,ne);return W(Fe,Fe.next),W(oe,oe.next)}function Ce(ne,Ge){var oe=Ge,Fe=ne.x,ut=ne.y,Ae=-1/0,Le;do{if(ut<=oe.y&&ut>=oe.next.y&&oe.next.y!==oe.y){var rt=oe.x+(ut-oe.y)*(oe.next.x-oe.x)/(oe.next.y-oe.y);if(rt<=Fe&&rt>Ae&&(Ae=rt,Le=oe.x<oe.next.x?oe:oe.next,rt===Fe))return Le}oe=oe.next}while(oe!==Ge);if(!Le)return null;var ye=Le,me=Le.x,We=Le.y,Ve=1/0,dt;oe=Le;do Fe>=oe.x&&oe.x>=me&&Fe!==oe.x&&ge(ut<We?Fe:Ae,ut,me,We,ut<We?Ae:Fe,ut,oe.x,oe.y)&&(dt=Math.abs(ut-oe.y)/(Fe-oe.x),xe(oe,ne)&&(dt<Ve||dt===Ve&&(oe.x>Le.x||oe.x===Le.x&&pe(Le,oe)))&&(Le=oe,Ve=dt)),oe=oe.next;while(oe!==ye);return Le}function pe(ne,Ge){return ze(ne.prev,ne,Ge.prev)<0&&ze(Ge.next,ne,ne.next)<0}function fe(ne,Ge,oe,Fe){var ut=ne;do ut.z===0&&(ut.z=M(ut.x,ut.y,Ge,oe,Fe)),ut.prevZ=ut.prev,ut.nextZ=ut.next,ut=ut.next;while(ut!==ne);ut.prevZ.nextZ=null,ut.prevZ=null,J(ut)}function J(ne){var Ge,oe,Fe,ut,Ae,Le,rt,ye,me=1;do{for(oe=ne,ne=null,Ae=null,Le=0;oe;){for(Le++,Fe=oe,rt=0,Ge=0;Ge<me&&(rt++,Fe=Fe.nextZ,!!Fe);Ge++);for(ye=me;rt>0||ye>0&&Fe;)rt!==0&&(ye===0||!Fe||oe.z<=Fe.z)?(ut=oe,oe=oe.nextZ,rt--):(ut=Fe,Fe=Fe.nextZ,ye--),Ae?Ae.nextZ=ut:ne=ut,ut.prevZ=Ae,Ae=ut;oe=Fe}Ae.nextZ=null,me*=2}while(Le>1);return ne}function M(ne,Ge,oe,Fe,ut){return ne=(ne-oe)*ut|0,Ge=(Ge-Fe)*ut|0,ne=(ne|ne<<8)&16711935,ne=(ne|ne<<4)&252645135,ne=(ne|ne<<2)&858993459,ne=(ne|ne<<1)&1431655765,Ge=(Ge|Ge<<8)&16711935,Ge=(Ge|Ge<<4)&252645135,Ge=(Ge|Ge<<2)&858993459,Ge=(Ge|Ge<<1)&1431655765,ne|Ge<<1}function E(ne){var Ge=ne,oe=ne;do(Ge.x<oe.x||Ge.x===oe.x&&Ge.y<oe.y)&&(oe=Ge),Ge=Ge.next;while(Ge!==ne);return oe}function ge(ne,Ge,oe,Fe,ut,Ae,Le,rt){return(ut-Le)*(Ge-rt)>=(ne-Le)*(Ae-rt)&&(ne-Le)*(Fe-rt)>=(oe-Le)*(Ge-rt)&&(oe-Le)*(Ae-rt)>=(ut-Le)*(Fe-rt)}function Se(ne,Ge){return ne.next.i!==Ge.i&&ne.prev.i!==Ge.i&&!Ze(ne,Ge)&&(xe(ne,Ge)&&xe(Ge,ne)&&_e(ne,Ge)&&(ze(ne.prev,ne,Ge.prev)||ze(ne,Ge.prev,Ge))||De(ne,Ge)&&ze(ne.prev,ne,ne.next)>0&&ze(Ge.prev,Ge,Ge.next)>0)}function ze(ne,Ge,oe){return(Ge.y-ne.y)*(oe.x-Ge.x)-(Ge.x-ne.x)*(oe.y-Ge.y)}function De(ne,Ge){return ne.x===Ge.x&&ne.y===Ge.y}function Ue(ne,Ge,oe,Fe){var ut=Je(ze(ne,Ge,oe)),Ae=Je(ze(ne,Ge,Fe)),Le=Je(ze(oe,Fe,ne)),rt=Je(ze(oe,Fe,Ge));return!!(ut!==Ae&&Le!==rt||ut===0&&at(ne,oe,Ge)||Ae===0&&at(ne,Fe,Ge)||Le===0&&at(oe,ne,Fe)||rt===0&&at(oe,Ge,Fe))}function at(ne,Ge,oe){return Ge.x<=Math.max(ne.x,oe.x)&&Ge.x>=Math.min(ne.x,oe.x)&&Ge.y<=Math.max(ne.y,oe.y)&&Ge.y>=Math.min(ne.y,oe.y)}function Je(ne){return ne>0?1:ne<0?-1:0}function Ze(ne,Ge){var oe=ne;do{if(oe.i!==ne.i&&oe.next.i!==ne.i&&oe.i!==Ge.i&&oe.next.i!==Ge.i&&Ue(oe,oe.next,ne,Ge))return!0;oe=oe.next}while(oe!==ne);return!1}function xe(ne,Ge){return ze(ne.prev,ne,ne.next)<0?ze(ne,Ge,ne.next)>=0&&ze(ne,ne.prev,Ge)>=0:ze(ne,Ge,ne.prev)<0||ze(ne,ne.next,Ge)<0}function _e(ne,Ge){var oe=ne,Fe=!1,ut=(ne.x+Ge.x)/2,Ae=(ne.y+Ge.y)/2;do oe.y>Ae!=oe.next.y>Ae&&oe.next.y!==oe.y&&ut<(oe.next.x-oe.x)*(Ae-oe.y)/(oe.next.y-oe.y)+oe.x&&(Fe=!Fe),oe=oe.next;while(oe!==ne);return Fe}function He(ne,Ge){var oe=new ke(ne.i,ne.x,ne.y),Fe=new ke(Ge.i,Ge.x,Ge.y),ut=ne.next,Ae=Ge.prev;return ne.next=Ge,Ge.prev=ne,oe.next=ut,ut.prev=oe,Fe.next=oe,oe.prev=Fe,Ae.next=Fe,Fe.prev=Ae,Fe}function Ke(ne,Ge,oe,Fe){var ut=new ke(ne,Ge,oe);return Fe?(ut.next=Fe.next,ut.prev=Fe,Fe.next.prev=ut,Fe.next=ut):(ut.prev=ut,ut.next=ut),ut}function Et(ne){ne.next.prev=ne.prev,ne.prev.next=ne.next,ne.prevZ&&(ne.prevZ.nextZ=ne.nextZ),ne.nextZ&&(ne.nextZ.prevZ=ne.prevZ)}function ke(ne,Ge,oe){this.i=ne,this.x=Ge,this.y=oe,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}N.deviation=function(ne,Ge,oe,Fe){var ut=Ge&&Ge.length,Ae=ut?Ge[0]*oe:ne.length,Le=Math.abs(qe(ne,0,Ae,oe));if(ut)for(var rt=0,ye=Ge.length;rt<ye;rt++){var me=Ge[rt]*oe,We=rt<ye-1?Ge[rt+1]*oe:ne.length;Le-=Math.abs(qe(ne,me,We,oe))}var Ve=0;for(rt=0;rt<Fe.length;rt+=3){var dt=Fe[rt]*oe,Ht=Fe[rt+1]*oe,et=Fe[rt+2]*oe;Ve+=Math.abs((ne[dt]-ne[et])*(ne[Ht+1]-ne[dt+1])-(ne[dt]-ne[Ht])*(ne[et+1]-ne[dt+1]))}return Le===0&&Ve===0?0:Math.abs((Ve-Le)/Le)};function qe(ne,Ge,oe,Fe){for(var ut=0,Ae=Ge,Le=oe-Fe;Ae<oe;Ae+=Fe)ut+=(ne[Le]-ne[Ae])*(ne[Ae+1]+ne[Le+1]),Le=Ae;return ut}N.flatten=function(ne){for(var Ge=ne[0][0].length,oe={vertices:[],holes:[],dimensions:Ge},Fe=0,ut=0;ut<ne.length;ut++){for(var Ae=0;Ae<ne[ut].length;Ae++)for(var Le=0;Le<Ge;Le++)oe.vertices.push(ne[ut][Ae][Le]);ut>0&&(Fe+=ne[ut-1].length,oe.holes.push(Fe))}return oe}},67709:function(ft){function N(W){var K=W.target||W.srcElement;K.__resizeRAF__&&cancelAnimationFrame(K.__resizeRAF__),K.__resizeRAF__=requestAnimationFrame(function(){var b=K.__resizeTrigger__,G=b&&b.__resizeListeners__;G&&G.forEach(function(j){j.call(b,W)})})}var k=function(K,b){var G=this,j=G.document,q,Q=j.attachEvent;typeof navigator!="undefined"&&(q=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function ie(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",N)}if(!K.__resizeListeners__)if(K.__resizeListeners__=[],Q)K.__resizeTrigger__=K,K.attachEvent("onresize",N);else{getComputedStyle(K).position==="static"&&(K.style.position="relative");var te=K.__resizeTrigger__=j.createElement("object");te.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),te.setAttribute("class","resize-sensor"),te.setAttribute("tabindex","-1"),te.setAttribute("title",""),te.__resizeElement__=K,te.onload=ie,te.type="text/html",q&&K.appendChild(te),te.data="about:blank",q||K.appendChild(te)}K.__resizeListeners__.push(b)};ft.exports=typeof window=="undefined"?k:k.bind(window),ft.exports.unbind=function(W,K){var b=document.attachEvent,G=W.__resizeListeners__||[];if(K){var j=G.indexOf(K);j!==-1&&G.splice(j,1)}else G=W.__resizeListeners__=[];if(!G.length){if(b)W.detachEvent("onresize",N);else if(W.__resizeTrigger__){var q=W.__resizeTrigger__.contentDocument,Q=q&&q.defaultView;Q&&(Q.removeEventListener("resize",N),delete Q.__resizeTrigger__),W.__resizeTrigger__=!W.removeChild(W.__resizeTrigger__)}delete W.__resizeListeners__}}},26729:function(ft){"use strict";var N=Object.prototype.hasOwnProperty,k="~";function W(){}Object.create&&(W.prototype=Object.create(null),new W().__proto__||(k=!1));function K(q,Q,ie){this.fn=q,this.context=Q,this.once=ie||!1}function b(q,Q,ie,te,Ce){if(typeof ie!="function")throw new TypeError("The listener must be a function");var pe=new K(ie,te||q,Ce),fe=k?k+Q:Q;return q._events[fe]?q._events[fe].fn?q._events[fe]=[q._events[fe],pe]:q._events[fe].push(pe):(q._events[fe]=pe,q._eventsCount++),q}function G(q,Q){--q._eventsCount===0?q._events=new W:delete q._events[Q]}function j(){this._events=new W,this._eventsCount=0}j.prototype.eventNames=function(){var Q=[],ie,te;if(this._eventsCount===0)return Q;for(te in ie=this._events)N.call(ie,te)&&Q.push(k?te.slice(1):te);return Object.getOwnPropertySymbols?Q.concat(Object.getOwnPropertySymbols(ie)):Q},j.prototype.listeners=function(Q){var ie=k?k+Q:Q,te=this._events[ie];if(!te)return[];if(te.fn)return[te.fn];for(var Ce=0,pe=te.length,fe=new Array(pe);Ce<pe;Ce++)fe[Ce]=te[Ce].fn;return fe},j.prototype.listenerCount=function(Q){var ie=k?k+Q:Q,te=this._events[ie];return te?te.fn?1:te.length:0},j.prototype.emit=function(Q,ie,te,Ce,pe,fe){var J=k?k+Q:Q;if(!this._events[J])return!1;var M=this._events[J],E=arguments.length,ge,Se;if(M.fn){switch(M.once&&this.removeListener(Q,M.fn,void 0,!0),E){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,ie),!0;case 3:return M.fn.call(M.context,ie,te),!0;case 4:return M.fn.call(M.context,ie,te,Ce),!0;case 5:return M.fn.call(M.context,ie,te,Ce,pe),!0;case 6:return M.fn.call(M.context,ie,te,Ce,pe,fe),!0}for(Se=1,ge=new Array(E-1);Se<E;Se++)ge[Se-1]=arguments[Se];M.fn.apply(M.context,ge)}else{var ze=M.length,De;for(Se=0;Se<ze;Se++)switch(M[Se].once&&this.removeListener(Q,M[Se].fn,void 0,!0),E){case 1:M[Se].fn.call(M[Se].context);break;case 2:M[Se].fn.call(M[Se].context,ie);break;case 3:M[Se].fn.call(M[Se].context,ie,te);break;case 4:M[Se].fn.call(M[Se].context,ie,te,Ce);break;default:if(!ge)for(De=1,ge=new Array(E-1);De<E;De++)ge[De-1]=arguments[De];M[Se].fn.apply(M[Se].context,ge)}}return!0},j.prototype.on=function(Q,ie,te){return b(this,Q,ie,te,!1)},j.prototype.once=function(Q,ie,te){return b(this,Q,ie,te,!0)},j.prototype.removeListener=function(Q,ie,te,Ce){var pe=k?k+Q:Q;if(!this._events[pe])return this;if(!ie)return G(this,pe),this;var fe=this._events[pe];if(fe.fn)fe.fn===ie&&(!Ce||fe.once)&&(!te||fe.context===te)&&G(this,pe);else{for(var J=0,M=[],E=fe.length;J<E;J++)(fe[J].fn!==ie||Ce&&!fe[J].once||te&&fe[J].context!==te)&&M.push(fe[J]);M.length?this._events[pe]=M.length===1?M[0]:M:G(this,pe)}return this},j.prototype.removeAllListeners=function(Q){var ie;return Q?(ie=k?k+Q:Q,this._events[ie]&&G(this,ie)):(this._events=new W,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=k,j.EventEmitter=j,ft.exports=j},87026:function(ft,N){(function(k,W){W(N)})(this,function(k){"use strict";function W(J,M,E,ge){ge=ge||{};var Se=ge.maxIterations||100,ze=ge.tolerance||1e-10,De=J(M),Ue=J(E),at=E-M;if(De*Ue>0)throw"Initial bisect points must have opposite signs";if(De===0)return M;if(Ue===0)return E;for(var Je=0;Je<Se;++Je){at/=2;var Ze=M+at,xe=J(Ze);if(xe*De>=0&&(M=Ze),Math.abs(at)<ze||xe===0)return Ze}return M+at}function K(J){for(var M=new Array(J),E=0;E<J;++E)M[E]=0;return M}function b(J,M){return K(J).map(function(){return K(M)})}function G(J,M){for(var E=0,ge=0;ge<J.length;++ge)E+=J[ge]*M[ge];return E}function j(J){return Math.sqrt(G(J,J))}function q(J,M,E){for(var ge=0;ge<M.length;++ge)J[ge]=M[ge]*E}function Q(J,M,E,ge,Se){for(var ze=0;ze<J.length;++ze)J[ze]=M*E[ze]+ge*Se[ze]}function ie(J,M,E){E=E||{};var ge=E.maxIterations||M.length*200,Se=E.nonZeroDelta||1.05,ze=E.zeroDelta||.001,De=E.minErrorDelta||1e-6,Ue=E.minErrorDelta||1e-5,at=E.rho!==void 0?E.rho:1,Je=E.chi!==void 0?E.chi:2,Ze=E.psi!==void 0?E.psi:-.5,xe=E.sigma!==void 0?E.sigma:.5,_e,He=M.length,Ke=new Array(He+1);Ke[0]=M,Ke[0].fx=J(M),Ke[0].id=0;for(var Et=0;Et<He;++Et){var ke=M.slice();ke[Et]=ke[Et]?ke[Et]*Se:ze,Ke[Et+1]=ke,Ke[Et+1].fx=J(ke),Ke[Et+1].id=Et+1}function qe(We){for(var Ve=0;Ve<We.length;Ve++)Ke[He][Ve]=We[Ve];Ke[He].fx=We.fx}for(var ne=function(We,Ve){return We.fx-Ve.fx},Ge=M.slice(),oe=M.slice(),Fe=M.slice(),ut=M.slice(),Ae=0;Ae<ge;++Ae){if(Ke.sort(ne),E.history){var Le=Ke.map(function(We){var Ve=We.slice();return Ve.fx=We.fx,Ve.id=We.id,Ve});Le.sort(function(We,Ve){return We.id-Ve.id}),E.history.push({x:Ke[0].slice(),fx:Ke[0].fx,simplex:Le})}for(_e=0,Et=0;Et<He;++Et)_e=Math.max(_e,Math.abs(Ke[0][Et]-Ke[1][Et]));if(Math.abs(Ke[0].fx-Ke[He].fx)<De&&_e<Ue)break;for(Et=0;Et<He;++Et){Ge[Et]=0;for(var rt=0;rt<He;++rt)Ge[Et]+=Ke[rt][Et];Ge[Et]/=He}var ye=Ke[He];if(Q(oe,1+at,Ge,-at,ye),oe.fx=J(oe),oe.fx<Ke[0].fx)Q(ut,1+Je,Ge,-Je,ye),ut.fx=J(ut),ut.fx<oe.fx?qe(ut):qe(oe);else if(oe.fx>=Ke[He-1].fx){var me=!1;if(oe.fx>ye.fx?(Q(Fe,1+Ze,Ge,-Ze,ye),Fe.fx=J(Fe),Fe.fx<ye.fx?qe(Fe):me=!0):(Q(Fe,1-Ze*at,Ge,Ze*at,ye),Fe.fx=J(Fe),Fe.fx<oe.fx?qe(Fe):me=!0),me){if(xe>=1)break;for(Et=1;Et<Ke.length;++Et)Q(Ke[Et],1-xe,Ke[0],xe,Ke[Et]),Ke[Et].fx=J(Ke[Et])}}else qe(oe)}return Ke.sort(ne),{fx:Ke[0].fx,x:Ke[0]}}function te(J,M,E,ge,Se,ze,De){var Ue=E.fx,at=G(E.fxprime,M),Je=Ue,Ze=Ue,xe=at,_e=0;Se=Se||1,ze=ze||1e-6,De=De||.1;function He(Et,ke,qe){for(var ne=0;ne<16;++ne)if(Se=(Et+ke)/2,Q(ge.x,1,E.x,Se,M),Je=ge.fx=J(ge.x,ge.fxprime),xe=G(ge.fxprime,M),Je>Ue+ze*Se*at||Je>=qe)ke=Se;else{if(Math.abs(xe)<=-De*at)return Se;xe*(ke-Et)>=0&&(ke=Et),Et=Se,qe=Je}return 0}for(var Ke=0;Ke<10;++Ke){if(Q(ge.x,1,E.x,Se,M),Je=ge.fx=J(ge.x,ge.fxprime),xe=G(ge.fxprime,M),Je>Ue+ze*Se*at||Ke&&Je>=Ze)return He(_e,Se,Ze);if(Math.abs(xe)<=-De*at)return Se;if(xe>=0)return He(Se,_e,Je);Ze=Je,_e=Se,Se*=2}return Se}function Ce(J,M,E){var ge={x:M.slice(),fx:0,fxprime:M.slice()},Se={x:M.slice(),fx:0,fxprime:M.slice()},ze=M.slice(),De,Ue,at=1,Je;E=E||{},Je=E.maxIterations||M.length*20,ge.fx=J(ge.x,ge.fxprime),De=ge.fxprime.slice(),q(De,ge.fxprime,-1);for(var Ze=0;Ze<Je;++Ze){if(at=te(J,De,ge,Se,at),E.history&&E.history.push({x:ge.x.slice(),fx:ge.fx,fxprime:ge.fxprime.slice(),alpha:at}),!at)q(De,ge.fxprime,-1);else{Q(ze,1,Se.fxprime,-1,ge.fxprime);var xe=G(ge.fxprime,ge.fxprime),_e=Math.max(0,G(ze,Se.fxprime)/xe);Q(De,_e,De,-1,Se.fxprime),Ue=ge,ge=Se,Se=Ue}if(j(ge.fxprime)<=1e-5)break}return E.history&&E.history.push({x:ge.x.slice(),fx:ge.fx,fxprime:ge.fxprime.slice(),alpha:at}),ge}function pe(J,M,E){E=E||{};for(var ge=E.maxIterations||M.length*100,Se=E.learnRate||.001,ze={x:M.slice(),fx:0,fxprime:M.slice()},De=0;De<ge&&(ze.fx=J(ze.x,ze.fxprime),E.history&&E.history.push({x:ze.x.slice(),fx:ze.fx,fxprime:ze.fxprime.slice()}),Q(ze.x,1,ze.x,-Se,ze.fxprime),!(j(ze.fxprime)<=1e-5));++De);return ze}function fe(J,M,E){E=E||{};var ge={x:M.slice(),fx:0,fxprime:M.slice()},Se={x:M.slice(),fx:0,fxprime:M.slice()},ze=E.maxIterations||M.length*100,De=E.learnRate||1,Ue=M.slice(),at=E.c1||.001,Je=E.c2||.1,Ze,xe=[];if(E.history){var _e=J;J=function(Ke,Et){return xe.push(Ke.slice()),_e(Ke,Et)}}ge.fx=J(ge.x,ge.fxprime);for(var He=0;He<ze&&(q(Ue,ge.fxprime,-1),De=te(J,Ue,ge,Se,De,at,Je),E.history&&(E.history.push({x:ge.x.slice(),fx:ge.fx,fxprime:ge.fxprime.slice(),functionCalls:xe,learnRate:De,alpha:De}),xe=[]),Ze=ge,ge=Se,Se=Ze,!(De===0||j(ge.fxprime)<1e-5));++He);return ge}k.bisect=W,k.nelderMead=ie,k.conjugateGradient=Ce,k.gradientDescent=pe,k.gradientDescentLineSearch=fe,k.zeros=K,k.zerosM=b,k.norm2=j,k.weightedSum=Q,k.scale=q})},49685:function(ft,N,k){"use strict";k.d(N,{FD:function(){return b},Ib:function(){return W},WT:function(){return K}});var W=1e-6,K=typeof Float32Array!="undefined"?Float32Array:Array,b=Math.random;function G(ie){K=ie}var j=Math.PI/180;function q(ie){return ie*j}function Q(ie,te){return Math.abs(ie-te)<=W*Math.max(1,Math.abs(ie),Math.abs(te))}Math.hypot||(Math.hypot=function(){for(var ie=0,te=arguments.length;te--;)ie+=arguments[te]*arguments[te];return Math.sqrt(ie)})},35600:function(ft,N,k){"use strict";k.d(N,{Jp:function(){return fe},U_:function(){return te},Us:function(){return Se},vc:function(){return ge},xJ:function(){return ze}});function W(){var oe=new glMatrix.ARRAY_TYPE(9);return glMatrix.ARRAY_TYPE!=Float32Array&&(oe[1]=0,oe[2]=0,oe[3]=0,oe[5]=0,oe[6]=0,oe[7]=0),oe[0]=1,oe[4]=1,oe[8]=1,oe}function K(oe,Fe){return oe[0]=Fe[0],oe[1]=Fe[1],oe[2]=Fe[2],oe[3]=Fe[4],oe[4]=Fe[5],oe[5]=Fe[6],oe[6]=Fe[8],oe[7]=Fe[9],oe[8]=Fe[10],oe}function b(oe){var Fe=new glMatrix.ARRAY_TYPE(9);return Fe[0]=oe[0],Fe[1]=oe[1],Fe[2]=oe[2],Fe[3]=oe[3],Fe[4]=oe[4],Fe[5]=oe[5],Fe[6]=oe[6],Fe[7]=oe[7],Fe[8]=oe[8],Fe}function G(oe,Fe){return oe[0]=Fe[0],oe[1]=Fe[1],oe[2]=Fe[2],oe[3]=Fe[3],oe[4]=Fe[4],oe[5]=Fe[5],oe[6]=Fe[6],oe[7]=Fe[7],oe[8]=Fe[8],oe}function j(oe,Fe,ut,Ae,Le,rt,ye,me,We){var Ve=new glMatrix.ARRAY_TYPE(9);return Ve[0]=oe,Ve[1]=Fe,Ve[2]=ut,Ve[3]=Ae,Ve[4]=Le,Ve[5]=rt,Ve[6]=ye,Ve[7]=me,Ve[8]=We,Ve}function q(oe,Fe,ut,Ae,Le,rt,ye,me,We,Ve){return oe[0]=Fe,oe[1]=ut,oe[2]=Ae,oe[3]=Le,oe[4]=rt,oe[5]=ye,oe[6]=me,oe[7]=We,oe[8]=Ve,oe}function Q(oe){return oe[0]=1,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=1,oe[5]=0,oe[6]=0,oe[7]=0,oe[8]=1,oe}function ie(oe,Fe){if(oe===Fe){var ut=Fe[1],Ae=Fe[2],Le=Fe[5];oe[1]=Fe[3],oe[2]=Fe[6],oe[3]=ut,oe[5]=Fe[7],oe[6]=Ae,oe[7]=Le}else oe[0]=Fe[0],oe[1]=Fe[3],oe[2]=Fe[6],oe[3]=Fe[1],oe[4]=Fe[4],oe[5]=Fe[7],oe[6]=Fe[2],oe[7]=Fe[5],oe[8]=Fe[8];return oe}function te(oe,Fe){var ut=Fe[0],Ae=Fe[1],Le=Fe[2],rt=Fe[3],ye=Fe[4],me=Fe[5],We=Fe[6],Ve=Fe[7],dt=Fe[8],Ht=dt*ye-me*Ve,et=-dt*rt+me*We,$e=Ve*rt-ye*We,Te=ut*Ht+Ae*et+Le*$e;return Te?(Te=1/Te,oe[0]=Ht*Te,oe[1]=(-dt*Ae+Le*Ve)*Te,oe[2]=(me*Ae-Le*ye)*Te,oe[3]=et*Te,oe[4]=(dt*ut-Le*We)*Te,oe[5]=(-me*ut+Le*rt)*Te,oe[6]=$e*Te,oe[7]=(-Ve*ut+Ae*We)*Te,oe[8]=(ye*ut-Ae*rt)*Te,oe):null}function Ce(oe,Fe){var ut=Fe[0],Ae=Fe[1],Le=Fe[2],rt=Fe[3],ye=Fe[4],me=Fe[5],We=Fe[6],Ve=Fe[7],dt=Fe[8];return oe[0]=ye*dt-me*Ve,oe[1]=Le*Ve-Ae*dt,oe[2]=Ae*me-Le*ye,oe[3]=me*We-rt*dt,oe[4]=ut*dt-Le*We,oe[5]=Le*rt-ut*me,oe[6]=rt*Ve-ye*We,oe[7]=Ae*We-ut*Ve,oe[8]=ut*ye-Ae*rt,oe}function pe(oe){var Fe=oe[0],ut=oe[1],Ae=oe[2],Le=oe[3],rt=oe[4],ye=oe[5],me=oe[6],We=oe[7],Ve=oe[8];return Fe*(Ve*rt-ye*We)+ut*(-Ve*Le+ye*me)+Ae*(We*Le-rt*me)}function fe(oe,Fe,ut){var Ae=Fe[0],Le=Fe[1],rt=Fe[2],ye=Fe[3],me=Fe[4],We=Fe[5],Ve=Fe[6],dt=Fe[7],Ht=Fe[8],et=ut[0],$e=ut[1],Te=ut[2],Xe=ut[3],pt=ut[4],Oe=ut[5],Be=ut[6],vt=ut[7],Rt=ut[8];return oe[0]=et*Ae+$e*ye+Te*Ve,oe[1]=et*Le+$e*me+Te*dt,oe[2]=et*rt+$e*We+Te*Ht,oe[3]=Xe*Ae+pt*ye+Oe*Ve,oe[4]=Xe*Le+pt*me+Oe*dt,oe[5]=Xe*rt+pt*We+Oe*Ht,oe[6]=Be*Ae+vt*ye+Rt*Ve,oe[7]=Be*Le+vt*me+Rt*dt,oe[8]=Be*rt+vt*We+Rt*Ht,oe}function J(oe,Fe,ut){var Ae=Fe[0],Le=Fe[1],rt=Fe[2],ye=Fe[3],me=Fe[4],We=Fe[5],Ve=Fe[6],dt=Fe[7],Ht=Fe[8],et=ut[0],$e=ut[1];return oe[0]=Ae,oe[1]=Le,oe[2]=rt,oe[3]=ye,oe[4]=me,oe[5]=We,oe[6]=et*Ae+$e*ye+Ve,oe[7]=et*Le+$e*me+dt,oe[8]=et*rt+$e*We+Ht,oe}function M(oe,Fe,ut){var Ae=Fe[0],Le=Fe[1],rt=Fe[2],ye=Fe[3],me=Fe[4],We=Fe[5],Ve=Fe[6],dt=Fe[7],Ht=Fe[8],et=Math.sin(ut),$e=Math.cos(ut);return oe[0]=$e*Ae+et*ye,oe[1]=$e*Le+et*me,oe[2]=$e*rt+et*We,oe[3]=$e*ye-et*Ae,oe[4]=$e*me-et*Le,oe[5]=$e*We-et*rt,oe[6]=Ve,oe[7]=dt,oe[8]=Ht,oe}function E(oe,Fe,ut){var Ae=ut[0],Le=ut[1];return oe[0]=Ae*Fe[0],oe[1]=Ae*Fe[1],oe[2]=Ae*Fe[2],oe[3]=Le*Fe[3],oe[4]=Le*Fe[4],oe[5]=Le*Fe[5],oe[6]=Fe[6],oe[7]=Fe[7],oe[8]=Fe[8],oe}function ge(oe,Fe){return oe[0]=1,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=1,oe[5]=0,oe[6]=Fe[0],oe[7]=Fe[1],oe[8]=1,oe}function Se(oe,Fe){var ut=Math.sin(Fe),Ae=Math.cos(Fe);return oe[0]=Ae,oe[1]=ut,oe[2]=0,oe[3]=-ut,oe[4]=Ae,oe[5]=0,oe[6]=0,oe[7]=0,oe[8]=1,oe}function ze(oe,Fe){return oe[0]=Fe[0],oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=Fe[1],oe[5]=0,oe[6]=0,oe[7]=0,oe[8]=1,oe}function De(oe,Fe){return oe[0]=Fe[0],oe[1]=Fe[1],oe[2]=0,oe[3]=Fe[2],oe[4]=Fe[3],oe[5]=0,oe[6]=Fe[4],oe[7]=Fe[5],oe[8]=1,oe}function Ue(oe,Fe){var ut=Fe[0],Ae=Fe[1],Le=Fe[2],rt=Fe[3],ye=ut+ut,me=Ae+Ae,We=Le+Le,Ve=ut*ye,dt=Ae*ye,Ht=Ae*me,et=Le*ye,$e=Le*me,Te=Le*We,Xe=rt*ye,pt=rt*me,Oe=rt*We;return oe[0]=1-Ht-Te,oe[3]=dt-Oe,oe[6]=et+pt,oe[1]=dt+Oe,oe[4]=1-Ve-Te,oe[7]=$e-Xe,oe[2]=et-pt,oe[5]=$e+Xe,oe[8]=1-Ve-Ht,oe}function at(oe,Fe){var ut=Fe[0],Ae=Fe[1],Le=Fe[2],rt=Fe[3],ye=Fe[4],me=Fe[5],We=Fe[6],Ve=Fe[7],dt=Fe[8],Ht=Fe[9],et=Fe[10],$e=Fe[11],Te=Fe[12],Xe=Fe[13],pt=Fe[14],Oe=Fe[15],Be=ut*me-Ae*ye,vt=ut*We-Le*ye,Rt=ut*Ve-rt*ye,rr=Ae*We-Le*me,br=Ae*Ve-rt*me,lt=Le*Ve-rt*We,an=dt*Xe-Ht*Te,$r=dt*pt-et*Te,Xr=dt*Oe-$e*Te,Nt=Ht*pt-et*Xe,Kt=Ht*Oe-$e*Xe,or=et*Oe-$e*pt,kt=Be*or-vt*Kt+Rt*Nt+rr*Xr-br*$r+lt*an;return kt?(kt=1/kt,oe[0]=(me*or-We*Kt+Ve*Nt)*kt,oe[1]=(We*Xr-ye*or-Ve*$r)*kt,oe[2]=(ye*Kt-me*Xr+Ve*an)*kt,oe[3]=(Le*Kt-Ae*or-rt*Nt)*kt,oe[4]=(ut*or-Le*Xr+rt*$r)*kt,oe[5]=(Ae*Xr-ut*Kt-rt*an)*kt,oe[6]=(Xe*lt-pt*br+Oe*rr)*kt,oe[7]=(pt*Rt-Te*lt-Oe*vt)*kt,oe[8]=(Te*br-Xe*Rt+Oe*Be)*kt,oe):null}function Je(oe,Fe,ut){return oe[0]=2/Fe,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=-2/ut,oe[5]=0,oe[6]=-1,oe[7]=1,oe[8]=1,oe}function Ze(oe){return"mat3("+oe[0]+", "+oe[1]+", "+oe[2]+", "+oe[3]+", "+oe[4]+", "+oe[5]+", "+oe[6]+", "+oe[7]+", "+oe[8]+")"}function xe(oe){return Math.hypot(oe[0],oe[1],oe[2],oe[3],oe[4],oe[5],oe[6],oe[7],oe[8])}function _e(oe,Fe,ut){return oe[0]=Fe[0]+ut[0],oe[1]=Fe[1]+ut[1],oe[2]=Fe[2]+ut[2],oe[3]=Fe[3]+ut[3],oe[4]=Fe[4]+ut[4],oe[5]=Fe[5]+ut[5],oe[6]=Fe[6]+ut[6],oe[7]=Fe[7]+ut[7],oe[8]=Fe[8]+ut[8],oe}function He(oe,Fe,ut){return oe[0]=Fe[0]-ut[0],oe[1]=Fe[1]-ut[1],oe[2]=Fe[2]-ut[2],oe[3]=Fe[3]-ut[3],oe[4]=Fe[4]-ut[4],oe[5]=Fe[5]-ut[5],oe[6]=Fe[6]-ut[6],oe[7]=Fe[7]-ut[7],oe[8]=Fe[8]-ut[8],oe}function Ke(oe,Fe,ut){return oe[0]=Fe[0]*ut,oe[1]=Fe[1]*ut,oe[2]=Fe[2]*ut,oe[3]=Fe[3]*ut,oe[4]=Fe[4]*ut,oe[5]=Fe[5]*ut,oe[6]=Fe[6]*ut,oe[7]=Fe[7]*ut,oe[8]=Fe[8]*ut,oe}function Et(oe,Fe,ut,Ae){return oe[0]=Fe[0]+ut[0]*Ae,oe[1]=Fe[1]+ut[1]*Ae,oe[2]=Fe[2]+ut[2]*Ae,oe[3]=Fe[3]+ut[3]*Ae,oe[4]=Fe[4]+ut[4]*Ae,oe[5]=Fe[5]+ut[5]*Ae,oe[6]=Fe[6]+ut[6]*Ae,oe[7]=Fe[7]+ut[7]*Ae,oe[8]=Fe[8]+ut[8]*Ae,oe}function ke(oe,Fe){return oe[0]===Fe[0]&&oe[1]===Fe[1]&&oe[2]===Fe[2]&&oe[3]===Fe[3]&&oe[4]===Fe[4]&&oe[5]===Fe[5]&&oe[6]===Fe[6]&&oe[7]===Fe[7]&&oe[8]===Fe[8]}function qe(oe,Fe){var ut=oe[0],Ae=oe[1],Le=oe[2],rt=oe[3],ye=oe[4],me=oe[5],We=oe[6],Ve=oe[7],dt=oe[8],Ht=Fe[0],et=Fe[1],$e=Fe[2],Te=Fe[3],Xe=Fe[4],pt=Fe[5],Oe=Fe[6],Be=Fe[7],vt=Fe[8];return Math.abs(ut-Ht)<=glMatrix.EPSILON*Math.max(1,Math.abs(ut),Math.abs(Ht))&&Math.abs(Ae-et)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(et))&&Math.abs(Le-$e)<=glMatrix.EPSILON*Math.max(1,Math.abs(Le),Math.abs($e))&&Math.abs(rt-Te)<=glMatrix.EPSILON*Math.max(1,Math.abs(rt),Math.abs(Te))&&Math.abs(ye-Xe)<=glMatrix.EPSILON*Math.max(1,Math.abs(ye),Math.abs(Xe))&&Math.abs(me-pt)<=glMatrix.EPSILON*Math.max(1,Math.abs(me),Math.abs(pt))&&Math.abs(We-Oe)<=glMatrix.EPSILON*Math.max(1,Math.abs(We),Math.abs(Oe))&&Math.abs(Ve-Be)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ve),Math.abs(Be))&&Math.abs(dt-vt)<=glMatrix.EPSILON*Math.max(1,Math.abs(dt),Math.abs(vt))}var ne=null,Ge=null},31437:function(ft,N,k){"use strict";k.d(N,{$X:function(){return ie},AK:function(){return _e},EU:function(){return Fe},Fp:function(){return M},Fv:function(){return xe},I6:function(){return Le},IH:function(){return Q},JG:function(){return j},TE:function(){return ze},Ue:function(){return K},VV:function(){return J},al:function(){return G},bA:function(){return ge},kE:function(){return Ue},kK:function(){return ne},lu:function(){return me},t7:function(){return Ke},t8:function(){return q},tk:function(){return Je}});var W=k(49685);function K(){var Te=new W.WT(2);return W.WT!=Float32Array&&(Te[0]=0,Te[1]=0),Te}function b(Te){var Xe=new glMatrix.ARRAY_TYPE(2);return Xe[0]=Te[0],Xe[1]=Te[1],Xe}function G(Te,Xe){var pt=new W.WT(2);return pt[0]=Te,pt[1]=Xe,pt}function j(Te,Xe){return Te[0]=Xe[0],Te[1]=Xe[1],Te}function q(Te,Xe,pt){return Te[0]=Xe,Te[1]=pt,Te}function Q(Te,Xe,pt){return Te[0]=Xe[0]+pt[0],Te[1]=Xe[1]+pt[1],Te}function ie(Te,Xe,pt){return Te[0]=Xe[0]-pt[0],Te[1]=Xe[1]-pt[1],Te}function te(Te,Xe,pt){return Te[0]=Xe[0]*pt[0],Te[1]=Xe[1]*pt[1],Te}function Ce(Te,Xe,pt){return Te[0]=Xe[0]/pt[0],Te[1]=Xe[1]/pt[1],Te}function pe(Te,Xe){return Te[0]=Math.ceil(Xe[0]),Te[1]=Math.ceil(Xe[1]),Te}function fe(Te,Xe){return Te[0]=Math.floor(Xe[0]),Te[1]=Math.floor(Xe[1]),Te}function J(Te,Xe,pt){return Te[0]=Math.min(Xe[0],pt[0]),Te[1]=Math.min(Xe[1],pt[1]),Te}function M(Te,Xe,pt){return Te[0]=Math.max(Xe[0],pt[0]),Te[1]=Math.max(Xe[1],pt[1]),Te}function E(Te,Xe){return Te[0]=Math.round(Xe[0]),Te[1]=Math.round(Xe[1]),Te}function ge(Te,Xe,pt){return Te[0]=Xe[0]*pt,Te[1]=Xe[1]*pt,Te}function Se(Te,Xe,pt,Oe){return Te[0]=Xe[0]+pt[0]*Oe,Te[1]=Xe[1]+pt[1]*Oe,Te}function ze(Te,Xe){var pt=Xe[0]-Te[0],Oe=Xe[1]-Te[1];return Math.hypot(pt,Oe)}function De(Te,Xe){var pt=Xe[0]-Te[0],Oe=Xe[1]-Te[1];return pt*pt+Oe*Oe}function Ue(Te){var Xe=Te[0],pt=Te[1];return Math.hypot(Xe,pt)}function at(Te){var Xe=Te[0],pt=Te[1];return Xe*Xe+pt*pt}function Je(Te,Xe){return Te[0]=-Xe[0],Te[1]=-Xe[1],Te}function Ze(Te,Xe){return Te[0]=1/Xe[0],Te[1]=1/Xe[1],Te}function xe(Te,Xe){var pt=Xe[0],Oe=Xe[1],Be=pt*pt+Oe*Oe;return Be>0&&(Be=1/Math.sqrt(Be)),Te[0]=Xe[0]*Be,Te[1]=Xe[1]*Be,Te}function _e(Te,Xe){return Te[0]*Xe[0]+Te[1]*Xe[1]}function He(Te,Xe,pt){var Oe=Xe[0]*pt[1]-Xe[1]*pt[0];return Te[0]=Te[1]=0,Te[2]=Oe,Te}function Ke(Te,Xe,pt,Oe){var Be=Xe[0],vt=Xe[1];return Te[0]=Be+Oe*(pt[0]-Be),Te[1]=vt+Oe*(pt[1]-vt),Te}function Et(Te,Xe){Xe=Xe||1;var pt=glMatrix.RANDOM()*2*Math.PI;return Te[0]=Math.cos(pt)*Xe,Te[1]=Math.sin(pt)*Xe,Te}function ke(Te,Xe,pt){var Oe=Xe[0],Be=Xe[1];return Te[0]=pt[0]*Oe+pt[2]*Be,Te[1]=pt[1]*Oe+pt[3]*Be,Te}function qe(Te,Xe,pt){var Oe=Xe[0],Be=Xe[1];return Te[0]=pt[0]*Oe+pt[2]*Be+pt[4],Te[1]=pt[1]*Oe+pt[3]*Be+pt[5],Te}function ne(Te,Xe,pt){var Oe=Xe[0],Be=Xe[1];return Te[0]=pt[0]*Oe+pt[3]*Be+pt[6],Te[1]=pt[1]*Oe+pt[4]*Be+pt[7],Te}function Ge(Te,Xe,pt){var Oe=Xe[0],Be=Xe[1];return Te[0]=pt[0]*Oe+pt[4]*Be+pt[12],Te[1]=pt[1]*Oe+pt[5]*Be+pt[13],Te}function oe(Te,Xe,pt,Oe){var Be=Xe[0]-pt[0],vt=Xe[1]-pt[1],Rt=Math.sin(Oe),rr=Math.cos(Oe);return Te[0]=Be*rr-vt*Rt+pt[0],Te[1]=Be*Rt+vt*rr+pt[1],Te}function Fe(Te,Xe){var pt=Te[0],Oe=Te[1],Be=Xe[0],vt=Xe[1],Rt=Math.sqrt(pt*pt+Oe*Oe)*Math.sqrt(Be*Be+vt*vt),rr=Rt&&(pt*Be+Oe*vt)/Rt;return Math.acos(Math.min(Math.max(rr,-1),1))}function ut(Te){return Te[0]=0,Te[1]=0,Te}function Ae(Te){return"vec2("+Te[0]+", "+Te[1]+")"}function Le(Te,Xe){return Te[0]===Xe[0]&&Te[1]===Xe[1]}function rt(Te,Xe){var pt=Te[0],Oe=Te[1],Be=Xe[0],vt=Xe[1];return Math.abs(pt-Be)<=glMatrix.EPSILON*Math.max(1,Math.abs(pt),Math.abs(Be))&&Math.abs(Oe-vt)<=glMatrix.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(vt))}var ye=null,me=ie,We=null,Ve=null,dt=null,Ht=null,et=null,$e=function(){var Te=K();return function(Xe,pt,Oe,Be,vt,Rt){var rr,br;for(pt||(pt=2),Oe||(Oe=0),Be?br=Math.min(Be*pt+Oe,Xe.length):br=Xe.length,rr=Oe;rr<br;rr+=pt)Te[0]=Xe[rr],Te[1]=Xe[rr+1],vt(Te,Te,Rt),Xe[rr]=Te[0],Xe[rr+1]=Te[1];return Xe}}()},77160:function(ft,N,k){"use strict";k.r(N),k.d(N,{add:function(){return ie},angle:function(){return Le},bezier:function(){return ke},ceil:function(){return fe},clone:function(){return b},copy:function(){return q},create:function(){return K},cross:function(){return He},dist:function(){return et},distance:function(){return De},div:function(){return Ht},divide:function(){return pe},dot:function(){return _e},equals:function(){return We},exactEquals:function(){return me},floor:function(){return J},forEach:function(){return pt},fromValues:function(){return j},hermite:function(){return Et},inverse:function(){return Ze},len:function(){return Te},length:function(){return G},lerp:function(){return Ke},max:function(){return E},min:function(){return M},mul:function(){return dt},multiply:function(){return Ce},negate:function(){return Je},normalize:function(){return xe},random:function(){return qe},rotateX:function(){return Fe},rotateY:function(){return ut},rotateZ:function(){return Ae},round:function(){return ge},scale:function(){return Se},scaleAndAdd:function(){return ze},set:function(){return Q},sqrDist:function(){return $e},sqrLen:function(){return Xe},squaredDistance:function(){return Ue},squaredLength:function(){return at},str:function(){return ye},sub:function(){return Ve},subtract:function(){return te},transformMat3:function(){return Ge},transformMat4:function(){return ne},transformQuat:function(){return oe},zero:function(){return rt}});var W=k(49685);function K(){var Oe=new W.WT(3);return W.WT!=Float32Array&&(Oe[0]=0,Oe[1]=0,Oe[2]=0),Oe}function b(Oe){var Be=new W.WT(3);return Be[0]=Oe[0],Be[1]=Oe[1],Be[2]=Oe[2],Be}function G(Oe){var Be=Oe[0],vt=Oe[1],Rt=Oe[2];return Math.hypot(Be,vt,Rt)}function j(Oe,Be,vt){var Rt=new W.WT(3);return Rt[0]=Oe,Rt[1]=Be,Rt[2]=vt,Rt}function q(Oe,Be){return Oe[0]=Be[0],Oe[1]=Be[1],Oe[2]=Be[2],Oe}function Q(Oe,Be,vt,Rt){return Oe[0]=Be,Oe[1]=vt,Oe[2]=Rt,Oe}function ie(Oe,Be,vt){return Oe[0]=Be[0]+vt[0],Oe[1]=Be[1]+vt[1],Oe[2]=Be[2]+vt[2],Oe}function te(Oe,Be,vt){return Oe[0]=Be[0]-vt[0],Oe[1]=Be[1]-vt[1],Oe[2]=Be[2]-vt[2],Oe}function Ce(Oe,Be,vt){return Oe[0]=Be[0]*vt[0],Oe[1]=Be[1]*vt[1],Oe[2]=Be[2]*vt[2],Oe}function pe(Oe,Be,vt){return Oe[0]=Be[0]/vt[0],Oe[1]=Be[1]/vt[1],Oe[2]=Be[2]/vt[2],Oe}function fe(Oe,Be){return Oe[0]=Math.ceil(Be[0]),Oe[1]=Math.ceil(Be[1]),Oe[2]=Math.ceil(Be[2]),Oe}function J(Oe,Be){return Oe[0]=Math.floor(Be[0]),Oe[1]=Math.floor(Be[1]),Oe[2]=Math.floor(Be[2]),Oe}function M(Oe,Be,vt){return Oe[0]=Math.min(Be[0],vt[0]),Oe[1]=Math.min(Be[1],vt[1]),Oe[2]=Math.min(Be[2],vt[2]),Oe}function E(Oe,Be,vt){return Oe[0]=Math.max(Be[0],vt[0]),Oe[1]=Math.max(Be[1],vt[1]),Oe[2]=Math.max(Be[2],vt[2]),Oe}function ge(Oe,Be){return Oe[0]=Math.round(Be[0]),Oe[1]=Math.round(Be[1]),Oe[2]=Math.round(Be[2]),Oe}function Se(Oe,Be,vt){return Oe[0]=Be[0]*vt,Oe[1]=Be[1]*vt,Oe[2]=Be[2]*vt,Oe}function ze(Oe,Be,vt,Rt){return Oe[0]=Be[0]+vt[0]*Rt,Oe[1]=Be[1]+vt[1]*Rt,Oe[2]=Be[2]+vt[2]*Rt,Oe}function De(Oe,Be){var vt=Be[0]-Oe[0],Rt=Be[1]-Oe[1],rr=Be[2]-Oe[2];return Math.hypot(vt,Rt,rr)}function Ue(Oe,Be){var vt=Be[0]-Oe[0],Rt=Be[1]-Oe[1],rr=Be[2]-Oe[2];return vt*vt+Rt*Rt+rr*rr}function at(Oe){var Be=Oe[0],vt=Oe[1],Rt=Oe[2];return Be*Be+vt*vt+Rt*Rt}function Je(Oe,Be){return Oe[0]=-Be[0],Oe[1]=-Be[1],Oe[2]=-Be[2],Oe}function Ze(Oe,Be){return Oe[0]=1/Be[0],Oe[1]=1/Be[1],Oe[2]=1/Be[2],Oe}function xe(Oe,Be){var vt=Be[0],Rt=Be[1],rr=Be[2],br=vt*vt+Rt*Rt+rr*rr;return br>0&&(br=1/Math.sqrt(br)),Oe[0]=Be[0]*br,Oe[1]=Be[1]*br,Oe[2]=Be[2]*br,Oe}function _e(Oe,Be){return Oe[0]*Be[0]+Oe[1]*Be[1]+Oe[2]*Be[2]}function He(Oe,Be,vt){var Rt=Be[0],rr=Be[1],br=Be[2],lt=vt[0],an=vt[1],$r=vt[2];return Oe[0]=rr*$r-br*an,Oe[1]=br*lt-Rt*$r,Oe[2]=Rt*an-rr*lt,Oe}function Ke(Oe,Be,vt,Rt){var rr=Be[0],br=Be[1],lt=Be[2];return Oe[0]=rr+Rt*(vt[0]-rr),Oe[1]=br+Rt*(vt[1]-br),Oe[2]=lt+Rt*(vt[2]-lt),Oe}function Et(Oe,Be,vt,Rt,rr,br){var lt=br*br,an=lt*(2*br-3)+1,$r=lt*(br-2)+br,Xr=lt*(br-1),Nt=lt*(3-2*br);return Oe[0]=Be[0]*an+vt[0]*$r+Rt[0]*Xr+rr[0]*Nt,Oe[1]=Be[1]*an+vt[1]*$r+Rt[1]*Xr+rr[1]*Nt,Oe[2]=Be[2]*an+vt[2]*$r+Rt[2]*Xr+rr[2]*Nt,Oe}function ke(Oe,Be,vt,Rt,rr,br){var lt=1-br,an=lt*lt,$r=br*br,Xr=an*lt,Nt=3*br*an,Kt=3*$r*lt,or=$r*br;return Oe[0]=Be[0]*Xr+vt[0]*Nt+Rt[0]*Kt+rr[0]*or,Oe[1]=Be[1]*Xr+vt[1]*Nt+Rt[1]*Kt+rr[1]*or,Oe[2]=Be[2]*Xr+vt[2]*Nt+Rt[2]*Kt+rr[2]*or,Oe}function qe(Oe,Be){Be=Be||1;var vt=W.FD()*2*Math.PI,Rt=W.FD()*2-1,rr=Math.sqrt(1-Rt*Rt)*Be;return Oe[0]=Math.cos(vt)*rr,Oe[1]=Math.sin(vt)*rr,Oe[2]=Rt*Be,Oe}function ne(Oe,Be,vt){var Rt=Be[0],rr=Be[1],br=Be[2],lt=vt[3]*Rt+vt[7]*rr+vt[11]*br+vt[15];return lt=lt||1,Oe[0]=(vt[0]*Rt+vt[4]*rr+vt[8]*br+vt[12])/lt,Oe[1]=(vt[1]*Rt+vt[5]*rr+vt[9]*br+vt[13])/lt,Oe[2]=(vt[2]*Rt+vt[6]*rr+vt[10]*br+vt[14])/lt,Oe}function Ge(Oe,Be,vt){var Rt=Be[0],rr=Be[1],br=Be[2];return Oe[0]=Rt*vt[0]+rr*vt[3]+br*vt[6],Oe[1]=Rt*vt[1]+rr*vt[4]+br*vt[7],Oe[2]=Rt*vt[2]+rr*vt[5]+br*vt[8],Oe}function oe(Oe,Be,vt){var Rt=vt[0],rr=vt[1],br=vt[2],lt=vt[3],an=Be[0],$r=Be[1],Xr=Be[2],Nt=rr*Xr-br*$r,Kt=br*an-Rt*Xr,or=Rt*$r-rr*an,kt=rr*or-br*Kt,Jt=br*Nt-Rt*or,Er=Rt*Kt-rr*Nt,wr=lt*2;return Nt*=wr,Kt*=wr,or*=wr,kt*=2,Jt*=2,Er*=2,Oe[0]=an+Nt+kt,Oe[1]=$r+Kt+Jt,Oe[2]=Xr+or+Er,Oe}function Fe(Oe,Be,vt,Rt){var rr=[],br=[];return rr[0]=Be[0]-vt[0],rr[1]=Be[1]-vt[1],rr[2]=Be[2]-vt[2],br[0]=rr[0],br[1]=rr[1]*Math.cos(Rt)-rr[2]*Math.sin(Rt),br[2]=rr[1]*Math.sin(Rt)+rr[2]*Math.cos(Rt),Oe[0]=br[0]+vt[0],Oe[1]=br[1]+vt[1],Oe[2]=br[2]+vt[2],Oe}function ut(Oe,Be,vt,Rt){var rr=[],br=[];return rr[0]=Be[0]-vt[0],rr[1]=Be[1]-vt[1],rr[2]=Be[2]-vt[2],br[0]=rr[2]*Math.sin(Rt)+rr[0]*Math.cos(Rt),br[1]=rr[1],br[2]=rr[2]*Math.cos(Rt)-rr[0]*Math.sin(Rt),Oe[0]=br[0]+vt[0],Oe[1]=br[1]+vt[1],Oe[2]=br[2]+vt[2],Oe}function Ae(Oe,Be,vt,Rt){var rr=[],br=[];return rr[0]=Be[0]-vt[0],rr[1]=Be[1]-vt[1],rr[2]=Be[2]-vt[2],br[0]=rr[0]*Math.cos(Rt)-rr[1]*Math.sin(Rt),br[1]=rr[0]*Math.sin(Rt)+rr[1]*Math.cos(Rt),br[2]=rr[2],Oe[0]=br[0]+vt[0],Oe[1]=br[1]+vt[1],Oe[2]=br[2]+vt[2],Oe}function Le(Oe,Be){var vt=Oe[0],Rt=Oe[1],rr=Oe[2],br=Be[0],lt=Be[1],an=Be[2],$r=Math.sqrt(vt*vt+Rt*Rt+rr*rr),Xr=Math.sqrt(br*br+lt*lt+an*an),Nt=$r*Xr,Kt=Nt&&_e(Oe,Be)/Nt;return Math.acos(Math.min(Math.max(Kt,-1),1))}function rt(Oe){return Oe[0]=0,Oe[1]=0,Oe[2]=0,Oe}function ye(Oe){return"vec3("+Oe[0]+", "+Oe[1]+", "+Oe[2]+")"}function me(Oe,Be){return Oe[0]===Be[0]&&Oe[1]===Be[1]&&Oe[2]===Be[2]}function We(Oe,Be){var vt=Oe[0],Rt=Oe[1],rr=Oe[2],br=Be[0],lt=Be[1],an=Be[2];return Math.abs(vt-br)<=W.Ib*Math.max(1,Math.abs(vt),Math.abs(br))&&Math.abs(Rt-lt)<=W.Ib*Math.max(1,Math.abs(Rt),Math.abs(lt))&&Math.abs(rr-an)<=W.Ib*Math.max(1,Math.abs(rr),Math.abs(an))}var Ve=te,dt=Ce,Ht=pe,et=De,$e=Ue,Te=G,Xe=at,pt=function(){var Oe=K();return function(Be,vt,Rt,rr,br,lt){var an,$r;for(vt||(vt=3),Rt||(Rt=0),rr?$r=Math.min(rr*vt+Rt,Be.length):$r=Be.length,an=Rt;an<$r;an+=vt)Oe[0]=Be[an],Oe[1]=Be[an+1],Oe[2]=Be[an+2],br(Oe,Oe,lt),Be[an]=Oe[0],Be[an+1]=Oe[1],Be[an+2]=Oe[2];return Be}}()},50840:function(ft,N,k){var W;(function(K,b,G,j){"use strict";var q=["","webkit","Moz","MS","ms","o"],Q=b.createElement("div"),ie="function",te=Math.round,Ce=Math.abs,pe=Date.now;function fe(Zt,er,Ur){return setTimeout(Ue(Zt,Ur),er)}function J(Zt,er,Ur){return Array.isArray(Zt)?(M(Zt,Ur[er],Ur),!0):!1}function M(Zt,er,Ur){var An;if(Zt)if(Zt.forEach)Zt.forEach(er,Ur);else if(Zt.length!==j)for(An=0;An<Zt.length;)er.call(Ur,Zt[An],An,Zt),An++;else for(An in Zt)Zt.hasOwnProperty(An)&&er.call(Ur,Zt[An],An,Zt)}function E(Zt,er,Ur){var An="DEPRECATED METHOD: "+er+`
`+Ur+` AT 
`;return function(){var fi=new Error("get-stack-trace"),Vi=fi&&fi.stack?fi.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",fo=K.console&&(K.console.warn||K.console.log);return fo&&fo.call(K.console,An,Vi),Zt.apply(this,arguments)}}var ge;typeof Object.assign!="function"?ge=function(er){if(er===j||er===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ur=Object(er),An=1;An<arguments.length;An++){var fi=arguments[An];if(fi!==j&&fi!==null)for(var Vi in fi)fi.hasOwnProperty(Vi)&&(Ur[Vi]=fi[Vi])}return Ur}:ge=Object.assign;var Se=E(function(er,Ur,An){for(var fi=Object.keys(Ur),Vi=0;Vi<fi.length;)(!An||An&&er[fi[Vi]]===j)&&(er[fi[Vi]]=Ur[fi[Vi]]),Vi++;return er},"extend","Use `assign`."),ze=E(function(er,Ur){return Se(er,Ur,!0)},"merge","Use `assign`.");function De(Zt,er,Ur){var An=er.prototype,fi;fi=Zt.prototype=Object.create(An),fi.constructor=Zt,fi._super=An,Ur&&ge(fi,Ur)}function Ue(Zt,er){return function(){return Zt.apply(er,arguments)}}function at(Zt,er){return typeof Zt==ie?Zt.apply(er&&er[0]||j,er):Zt}function Je(Zt,er){return Zt===j?er:Zt}function Ze(Zt,er,Ur){M(Ke(er),function(An){Zt.addEventListener(An,Ur,!1)})}function xe(Zt,er,Ur){M(Ke(er),function(An){Zt.removeEventListener(An,Ur,!1)})}function _e(Zt,er){for(;Zt;){if(Zt==er)return!0;Zt=Zt.parentNode}return!1}function He(Zt,er){return Zt.indexOf(er)>-1}function Ke(Zt){return Zt.trim().split(/\s+/g)}function Et(Zt,er,Ur){if(Zt.indexOf&&!Ur)return Zt.indexOf(er);for(var An=0;An<Zt.length;){if(Ur&&Zt[An][Ur]==er||!Ur&&Zt[An]===er)return An;An++}return-1}function ke(Zt){return Array.prototype.slice.call(Zt,0)}function qe(Zt,er,Ur){for(var An=[],fi=[],Vi=0;Vi<Zt.length;){var fo=er?Zt[Vi][er]:Zt[Vi];Et(fi,fo)<0&&An.push(Zt[Vi]),fi[Vi]=fo,Vi++}return Ur&&(er?An=An.sort(function(Co,ko){return Co[er]>ko[er]}):An=An.sort()),An}function ne(Zt,er){for(var Ur,An,fi=er[0].toUpperCase()+er.slice(1),Vi=0;Vi<q.length;){if(Ur=q[Vi],An=Ur?Ur+fi:er,An in Zt)return An;Vi++}return j}var Ge=1;function oe(){return Ge++}function Fe(Zt){var er=Zt.ownerDocument||Zt;return er.defaultView||er.parentWindow||K}var ut=/mobile|tablet|ip(ad|hone|od)|android/i,Ae="ontouchstart"in K,Le=ne(K,"PointerEvent")!==j,rt=Ae&&ut.test(navigator.userAgent),ye="touch",me="pen",We="mouse",Ve="kinect",dt=25,Ht=1,et=2,$e=4,Te=8,Xe=1,pt=2,Oe=4,Be=8,vt=16,Rt=pt|Oe,rr=Be|vt,br=Rt|rr,lt=["x","y"],an=["clientX","clientY"];function $r(Zt,er){var Ur=this;this.manager=Zt,this.callback=er,this.element=Zt.element,this.target=Zt.options.inputTarget,this.domHandler=function(An){at(Zt.options.enable,[Zt])&&Ur.handler(An)},this.init()}$r.prototype={handler:function(){},init:function(){this.evEl&&Ze(this.element,this.evEl,this.domHandler),this.evTarget&&Ze(this.target,this.evTarget,this.domHandler),this.evWin&&Ze(Fe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&xe(this.element,this.evEl,this.domHandler),this.evTarget&&xe(this.target,this.evTarget,this.domHandler),this.evWin&&xe(Fe(this.element),this.evWin,this.domHandler)}};function Xr(Zt){var er,Ur=Zt.options.inputClass;return Ur?er=Ur:Le?er=he:rt?er=Pt:Ae?er=Mn:er=ar,new er(Zt,Nt)}function Nt(Zt,er,Ur){var An=Ur.pointers.length,fi=Ur.changedPointers.length,Vi=er&Ht&&An-fi===0,fo=er&($e|Te)&&An-fi===0;Ur.isFirst=!!Vi,Ur.isFinal=!!fo,Vi&&(Zt.session={}),Ur.eventType=er,Kt(Zt,Ur),Zt.emit("hammer.input",Ur),Zt.recognize(Ur),Zt.session.prevInput=Ur}function Kt(Zt,er){var Ur=Zt.session,An=er.pointers,fi=An.length;Ur.firstInput||(Ur.firstInput=Jt(er)),fi>1&&!Ur.firstMultiple?Ur.firstMultiple=Jt(er):fi===1&&(Ur.firstMultiple=!1);var Vi=Ur.firstInput,fo=Ur.firstMultiple,Ws=fo?fo.center:Vi.center,Co=er.center=Er(An);er.timeStamp=pe(),er.deltaTime=er.timeStamp-Vi.timeStamp,er.angle=le(Ws,Co),er.distance=zr(Ws,Co),or(Ur,er),er.offsetDirection=Br(er.deltaX,er.deltaY);var ko=wr(er.deltaTime,er.deltaX,er.deltaY);er.overallVelocityX=ko.x,er.overallVelocityY=ko.y,er.overallVelocity=Ce(ko.x)>Ce(ko.y)?ko.x:ko.y,er.scale=fo?re(fo.pointers,An):1,er.rotation=fo?H(fo.pointers,An):0,er.maxPointers=Ur.prevInput?er.pointers.length>Ur.prevInput.maxPointers?er.pointers.length:Ur.prevInput.maxPointers:er.pointers.length,kt(Ur,er);var ju=Zt.element;_e(er.srcEvent.target,ju)&&(ju=er.srcEvent.target),er.target=ju}function or(Zt,er){var Ur=er.center,An=Zt.offsetDelta||{},fi=Zt.prevDelta||{},Vi=Zt.prevInput||{};(er.eventType===Ht||Vi.eventType===$e)&&(fi=Zt.prevDelta={x:Vi.deltaX||0,y:Vi.deltaY||0},An=Zt.offsetDelta={x:Ur.x,y:Ur.y}),er.deltaX=fi.x+(Ur.x-An.x),er.deltaY=fi.y+(Ur.y-An.y)}function kt(Zt,er){var Ur=Zt.lastInterval||er,An=er.timeStamp-Ur.timeStamp,fi,Vi,fo,Ws;if(er.eventType!=Te&&(An>dt||Ur.velocity===j)){var Co=er.deltaX-Ur.deltaX,ko=er.deltaY-Ur.deltaY,ju=wr(An,Co,ko);Vi=ju.x,fo=ju.y,fi=Ce(ju.x)>Ce(ju.y)?ju.x:ju.y,Ws=Br(Co,ko),Zt.lastInterval=er}else fi=Ur.velocity,Vi=Ur.velocityX,fo=Ur.velocityY,Ws=Ur.direction;er.velocity=fi,er.velocityX=Vi,er.velocityY=fo,er.direction=Ws}function Jt(Zt){for(var er=[],Ur=0;Ur<Zt.pointers.length;)er[Ur]={clientX:te(Zt.pointers[Ur].clientX),clientY:te(Zt.pointers[Ur].clientY)},Ur++;return{timeStamp:pe(),pointers:er,center:Er(er),deltaX:Zt.deltaX,deltaY:Zt.deltaY}}function Er(Zt){var er=Zt.length;if(er===1)return{x:te(Zt[0].clientX),y:te(Zt[0].clientY)};for(var Ur=0,An=0,fi=0;fi<er;)Ur+=Zt[fi].clientX,An+=Zt[fi].clientY,fi++;return{x:te(Ur/er),y:te(An/er)}}function wr(Zt,er,Ur){return{x:er/Zt||0,y:Ur/Zt||0}}function Br(Zt,er){return Zt===er?Xe:Ce(Zt)>=Ce(er)?Zt<0?pt:Oe:er<0?Be:vt}function zr(Zt,er,Ur){Ur||(Ur=lt);var An=er[Ur[0]]-Zt[Ur[0]],fi=er[Ur[1]]-Zt[Ur[1]];return Math.sqrt(An*An+fi*fi)}function le(Zt,er,Ur){Ur||(Ur=lt);var An=er[Ur[0]]-Zt[Ur[0]],fi=er[Ur[1]]-Zt[Ur[1]];return Math.atan2(fi,An)*180/Math.PI}function H(Zt,er){return le(er[1],er[0],an)+le(Zt[1],Zt[0],an)}function re(Zt,er){return zr(er[0],er[1],an)/zr(Zt[0],Zt[1],an)}var Ie={mousedown:Ht,mousemove:et,mouseup:$e},Ye="mousedown",Ct="mousemove mouseup";function ar(){this.evEl=Ye,this.evWin=Ct,this.pressed=!1,$r.apply(this,arguments)}De(ar,$r,{handler:function(er){var Ur=Ie[er.type];Ur&Ht&&er.button===0&&(this.pressed=!0),Ur&et&&er.which!==1&&(Ur=$e),this.pressed&&(Ur&$e&&(this.pressed=!1),this.callback(this.manager,Ur,{pointers:[er],changedPointers:[er],pointerType:We,srcEvent:er}))}});var jt={pointerdown:Ht,pointermove:et,pointerup:$e,pointercancel:Te,pointerout:Te},wt={2:ye,3:me,4:We,5:Ve},Mt="pointerdown",ve="pointermove pointerup pointercancel";K.MSPointerEvent&&!K.PointerEvent&&(Mt="MSPointerDown",ve="MSPointerMove MSPointerUp MSPointerCancel");function he(){this.evEl=Mt,this.evWin=ve,$r.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}De(he,$r,{handler:function(er){var Ur=this.store,An=!1,fi=er.type.toLowerCase().replace("ms",""),Vi=jt[fi],fo=wt[er.pointerType]||er.pointerType,Ws=fo==ye,Co=Et(Ur,er.pointerId,"pointerId");Vi&Ht&&(er.button===0||Ws)?Co<0&&(Ur.push(er),Co=Ur.length-1):Vi&($e|Te)&&(An=!0),!(Co<0)&&(Ur[Co]=er,this.callback(this.manager,Vi,{pointers:Ur,changedPointers:[er],pointerType:fo,srcEvent:er}),An&&Ur.splice(Co,1))}});var Re={touchstart:Ht,touchmove:et,touchend:$e,touchcancel:Te},tt="touchstart",St="touchstart touchmove touchend touchcancel";function Gt(){this.evTarget=tt,this.evWin=St,this.started=!1,$r.apply(this,arguments)}De(Gt,$r,{handler:function(er){var Ur=Re[er.type];if(Ur===Ht&&(this.started=!0),!!this.started){var An=gr.call(this,er,Ur);Ur&($e|Te)&&An[0].length-An[1].length===0&&(this.started=!1),this.callback(this.manager,Ur,{pointers:An[0],changedPointers:An[1],pointerType:ye,srcEvent:er})}}});function gr(Zt,er){var Ur=ke(Zt.touches),An=ke(Zt.changedTouches);return er&($e|Te)&&(Ur=qe(Ur.concat(An),"identifier",!0)),[Ur,An]}var At={touchstart:Ht,touchmove:et,touchend:$e,touchcancel:Te},st="touchstart touchmove touchend touchcancel";function Pt(){this.evTarget=st,this.targetIds={},$r.apply(this,arguments)}De(Pt,$r,{handler:function(er){var Ur=At[er.type],An=yr.call(this,er,Ur);An&&this.callback(this.manager,Ur,{pointers:An[0],changedPointers:An[1],pointerType:ye,srcEvent:er})}});function yr(Zt,er){var Ur=ke(Zt.touches),An=this.targetIds;if(er&(Ht|et)&&Ur.length===1)return An[Ur[0].identifier]=!0,[Ur,Ur];var fi,Vi,fo=ke(Zt.changedTouches),Ws=[],Co=this.target;if(Vi=Ur.filter(function(ko){return _e(ko.target,Co)}),er===Ht)for(fi=0;fi<Vi.length;)An[Vi[fi].identifier]=!0,fi++;for(fi=0;fi<fo.length;)An[fo[fi].identifier]&&Ws.push(fo[fi]),er&($e|Te)&&delete An[fo[fi].identifier],fi++;if(Ws.length)return[qe(Vi.concat(Ws),"identifier",!0),Ws]}var Fr=2500,Ft=25;function Mn(){$r.apply(this,arguments);var Zt=Ue(this.handler,this);this.touch=new Pt(this.manager,Zt),this.mouse=new ar(this.manager,Zt),this.primaryTouch=null,this.lastTouches=[]}De(Mn,$r,{handler:function(er,Ur,An){var fi=An.pointerType==ye,Vi=An.pointerType==We;if(!(Vi&&An.sourceCapabilities&&An.sourceCapabilities.firesTouchEvents)){if(fi)ei.call(this,Ur,An);else if(Vi&&un.call(this,An))return;this.callback(er,Ur,An)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ei(Zt,er){Zt&Ht?(this.primaryTouch=er.changedPointers[0].identifier,ni.call(this,er)):Zt&($e|Te)&&ni.call(this,er)}function ni(Zt){var er=Zt.changedPointers[0];if(er.identifier===this.primaryTouch){var Ur={x:er.clientX,y:er.clientY};this.lastTouches.push(Ur);var An=this.lastTouches,fi=function(){var Vi=An.indexOf(Ur);Vi>-1&&An.splice(Vi,1)};setTimeout(fi,Fr)}}function un(Zt){for(var er=Zt.srcEvent.clientX,Ur=Zt.srcEvent.clientY,An=0;An<this.lastTouches.length;An++){var fi=this.lastTouches[An],Vi=Math.abs(er-fi.x),fo=Math.abs(Ur-fi.y);if(Vi<=Ft&&fo<=Ft)return!0}return!1}var Xn=ne(Q.style,"touchAction"),Wn=Xn!==j,Jn="compute",sa="auto",vi="manipulation",ga="none",Ra="pan-x",ya="pan-y",ja=co();function ba(Zt,er){this.manager=Zt,this.set(er)}ba.prototype={set:function(Zt){Zt==Jn&&(Zt=this.compute()),Wn&&this.manager.element.style&&ja[Zt]&&(this.manager.element.style[Xn]=Zt),this.actions=Zt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Zt=[];return M(this.manager.recognizers,function(er){at(er.options.enable,[er])&&(Zt=Zt.concat(er.getTouchAction()))}),gs(Zt.join(" "))},preventDefaults:function(Zt){var er=Zt.srcEvent,Ur=Zt.offsetDirection;if(this.manager.session.prevented){er.preventDefault();return}var An=this.actions,fi=He(An,ga)&&!ja[ga],Vi=He(An,ya)&&!ja[ya],fo=He(An,Ra)&&!ja[Ra];if(fi){var Ws=Zt.pointers.length===1,Co=Zt.distance<2,ko=Zt.deltaTime<250;if(Ws&&Co&&ko)return}if(!(fo&&Vi)&&(fi||Vi&&Ur&Rt||fo&&Ur&rr))return this.preventSrc(er)},preventSrc:function(Zt){this.manager.session.prevented=!0,Zt.preventDefault()}};function gs(Zt){if(He(Zt,ga))return ga;var er=He(Zt,Ra),Ur=He(Zt,ya);return er&&Ur?ga:er||Ur?er?Ra:ya:He(Zt,vi)?vi:sa}function co(){if(!Wn)return!1;var Zt={},er=K.CSS&&K.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ur){Zt[Ur]=er?K.CSS.supports("touch-action",Ur):!0}),Zt}var Io=1,oi=2,Si=4,Qi=8,Wa=Qi,ms=16,ho=32;function Po(Zt){this.options=ge({},this.defaults,Zt||{}),this.id=oe(),this.manager=null,this.options.enable=Je(this.options.enable,!0),this.state=Io,this.simultaneous={},this.requireFail=[]}Po.prototype={defaults:{},set:function(Zt){return ge(this.options,Zt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Zt){if(J(Zt,"recognizeWith",this))return this;var er=this.simultaneous;return Zt=qt(Zt,this),er[Zt.id]||(er[Zt.id]=Zt,Zt.recognizeWith(this)),this},dropRecognizeWith:function(Zt){return J(Zt,"dropRecognizeWith",this)?this:(Zt=qt(Zt,this),delete this.simultaneous[Zt.id],this)},requireFailure:function(Zt){if(J(Zt,"requireFailure",this))return this;var er=this.requireFail;return Zt=qt(Zt,this),Et(er,Zt)===-1&&(er.push(Zt),Zt.requireFailure(this)),this},dropRequireFailure:function(Zt){if(J(Zt,"dropRequireFailure",this))return this;Zt=qt(Zt,this);var er=Et(this.requireFail,Zt);return er>-1&&this.requireFail.splice(er,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Zt){return!!this.simultaneous[Zt.id]},emit:function(Zt){var er=this,Ur=this.state;function An(fi){er.manager.emit(fi,Zt)}Ur<Qi&&An(er.options.event+cr(Ur)),An(er.options.event),Zt.additionalEvent&&An(Zt.additionalEvent),Ur>=Qi&&An(er.options.event+cr(Ur))},tryEmit:function(Zt){if(this.canEmit())return this.emit(Zt);this.state=ho},canEmit:function(){for(var Zt=0;Zt<this.requireFail.length;){if(!(this.requireFail[Zt].state&(ho|Io)))return!1;Zt++}return!0},recognize:function(Zt){var er=ge({},Zt);if(!at(this.options.enable,[this,er])){this.reset(),this.state=ho;return}this.state&(Wa|ms|ho)&&(this.state=Io),this.state=this.process(er),this.state&(oi|Si|Qi|ms)&&this.tryEmit(er)},process:function(Zt){},getTouchAction:function(){},reset:function(){}};function cr(Zt){return Zt&ms?"cancel":Zt&Qi?"end":Zt&Si?"move":Zt&oi?"start":""}function Ot(Zt){return Zt==vt?"down":Zt==Be?"up":Zt==pt?"left":Zt==Oe?"right":""}function qt(Zt,er){var Ur=er.manager;return Ur?Ur.get(Zt):Zt}function Mr(){Po.apply(this,arguments)}De(Mr,Po,{defaults:{pointers:1},attrTest:function(Zt){var er=this.options.pointers;return er===0||Zt.pointers.length===er},process:function(Zt){var er=this.state,Ur=Zt.eventType,An=er&(oi|Si),fi=this.attrTest(Zt);return An&&(Ur&Te||!fi)?er|ms:An||fi?Ur&$e?er|Qi:er&oi?er|Si:oi:ho}});function rn(){Mr.apply(this,arguments),this.pX=null,this.pY=null}De(rn,Mr,{defaults:{event:"pan",threshold:10,pointers:1,direction:br},getTouchAction:function(){var Zt=this.options.direction,er=[];return Zt&Rt&&er.push(ya),Zt&rr&&er.push(Ra),er},directionTest:function(Zt){var er=this.options,Ur=!0,An=Zt.distance,fi=Zt.direction,Vi=Zt.deltaX,fo=Zt.deltaY;return fi&er.direction||(er.direction&Rt?(fi=Vi===0?Xe:Vi<0?pt:Oe,Ur=Vi!=this.pX,An=Math.abs(Zt.deltaX)):(fi=fo===0?Xe:fo<0?Be:vt,Ur=fo!=this.pY,An=Math.abs(Zt.deltaY))),Zt.direction=fi,Ur&&An>er.threshold&&fi&er.direction},attrTest:function(Zt){return Mr.prototype.attrTest.call(this,Zt)&&(this.state&oi||!(this.state&oi)&&this.directionTest(Zt))},emit:function(Zt){this.pX=Zt.deltaX,this.pY=Zt.deltaY;var er=Ot(Zt.direction);er&&(Zt.additionalEvent=this.options.event+er),this._super.emit.call(this,Zt)}});function Pn(){Mr.apply(this,arguments)}De(Pn,Mr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ga]},attrTest:function(Zt){return this._super.attrTest.call(this,Zt)&&(Math.abs(Zt.scale-1)>this.options.threshold||this.state&oi)},emit:function(Zt){if(Zt.scale!==1){var er=Zt.scale<1?"in":"out";Zt.additionalEvent=this.options.event+er}this._super.emit.call(this,Zt)}});function Bn(){Po.apply(this,arguments),this._timer=null,this._input=null}De(Bn,Po,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[sa]},process:function(Zt){var er=this.options,Ur=Zt.pointers.length===er.pointers,An=Zt.distance<er.threshold,fi=Zt.deltaTime>er.time;if(this._input=Zt,!An||!Ur||Zt.eventType&($e|Te)&&!fi)this.reset();else if(Zt.eventType&Ht)this.reset(),this._timer=fe(function(){this.state=Wa,this.tryEmit()},er.time,this);else if(Zt.eventType&$e)return Wa;return ho},reset:function(){clearTimeout(this._timer)},emit:function(Zt){this.state===Wa&&(Zt&&Zt.eventType&$e?this.manager.emit(this.options.event+"up",Zt):(this._input.timeStamp=pe(),this.manager.emit(this.options.event,this._input)))}});function Cn(){Mr.apply(this,arguments)}De(Cn,Mr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ga]},attrTest:function(Zt){return this._super.attrTest.call(this,Zt)&&(Math.abs(Zt.rotation)>this.options.threshold||this.state&oi)}});function Mi(){Mr.apply(this,arguments)}De(Mi,Mr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Rt|rr,pointers:1},getTouchAction:function(){return rn.prototype.getTouchAction.call(this)},attrTest:function(Zt){var er=this.options.direction,Ur;return er&(Rt|rr)?Ur=Zt.overallVelocity:er&Rt?Ur=Zt.overallVelocityX:er&rr&&(Ur=Zt.overallVelocityY),this._super.attrTest.call(this,Zt)&&er&Zt.offsetDirection&&Zt.distance>this.options.threshold&&Zt.maxPointers==this.options.pointers&&Ce(Ur)>this.options.velocity&&Zt.eventType&$e},emit:function(Zt){var er=Ot(Zt.offsetDirection);er&&this.manager.emit(this.options.event+er,Zt),this.manager.emit(this.options.event,Zt)}});function Xi(){Po.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}De(Xi,Po,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vi]},process:function(Zt){var er=this.options,Ur=Zt.pointers.length===er.pointers,An=Zt.distance<er.threshold,fi=Zt.deltaTime<er.time;if(this.reset(),Zt.eventType&Ht&&this.count===0)return this.failTimeout();if(An&&fi&&Ur){if(Zt.eventType!=$e)return this.failTimeout();var Vi=this.pTime?Zt.timeStamp-this.pTime<er.interval:!0,fo=!this.pCenter||zr(this.pCenter,Zt.center)<er.posThreshold;this.pTime=Zt.timeStamp,this.pCenter=Zt.center,!fo||!Vi?this.count=1:this.count+=1,this._input=Zt;var Ws=this.count%er.taps;if(Ws===0)return this.hasRequireFailures()?(this._timer=fe(function(){this.state=Wa,this.tryEmit()},er.interval,this),oi):Wa}return ho},failTimeout:function(){return this._timer=fe(function(){this.state=ho},this.options.interval,this),ho},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Wa&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Wo(Zt,er){return er=er||{},er.recognizers=Je(er.recognizers,Wo.defaults.preset),new Oo(Zt,er)}Wo.VERSION="2.0.7",Wo.defaults={domEvents:!1,touchAction:Jn,enable:!0,inputTarget:null,inputClass:null,preset:[[Cn,{enable:!1}],[Pn,{enable:!1},["rotate"]],[Mi,{direction:Rt}],[rn,{direction:Rt},["swipe"]],[Xi],[Xi,{event:"doubletap",taps:2},["tap"]],[Bn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var os=1,Su=2;function Oo(Zt,er){this.options=ge({},Wo.defaults,er||{}),this.options.inputTarget=this.options.inputTarget||Zt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Zt,this.input=Xr(this),this.touchAction=new ba(this,this.options.touchAction),ro(this,!0),M(this.options.recognizers,function(Ur){var An=this.add(new Ur[0](Ur[1]));Ur[2]&&An.recognizeWith(Ur[2]),Ur[3]&&An.requireFailure(Ur[3])},this)}Oo.prototype={set:function(Zt){return ge(this.options,Zt),Zt.touchAction&&this.touchAction.update(),Zt.inputTarget&&(this.input.destroy(),this.input.target=Zt.inputTarget,this.input.init()),this},stop:function(Zt){this.session.stopped=Zt?Su:os},recognize:function(Zt){var er=this.session;if(!er.stopped){this.touchAction.preventDefaults(Zt);var Ur,An=this.recognizers,fi=er.curRecognizer;(!fi||fi&&fi.state&Wa)&&(fi=er.curRecognizer=null);for(var Vi=0;Vi<An.length;)Ur=An[Vi],er.stopped!==Su&&(!fi||Ur==fi||Ur.canRecognizeWith(fi))?Ur.recognize(Zt):Ur.reset(),!fi&&Ur.state&(oi|Si|Qi)&&(fi=er.curRecognizer=Ur),Vi++}},get:function(Zt){if(Zt instanceof Po)return Zt;for(var er=this.recognizers,Ur=0;Ur<er.length;Ur++)if(er[Ur].options.event==Zt)return er[Ur];return null},add:function(Zt){if(J(Zt,"add",this))return this;var er=this.get(Zt.options.event);return er&&this.remove(er),this.recognizers.push(Zt),Zt.manager=this,this.touchAction.update(),Zt},remove:function(Zt){if(J(Zt,"remove",this))return this;if(Zt=this.get(Zt),Zt){var er=this.recognizers,Ur=Et(er,Zt);Ur!==-1&&(er.splice(Ur,1),this.touchAction.update())}return this},on:function(Zt,er){if(Zt!==j&&er!==j){var Ur=this.handlers;return M(Ke(Zt),function(An){Ur[An]=Ur[An]||[],Ur[An].push(er)}),this}},off:function(Zt,er){if(Zt!==j){var Ur=this.handlers;return M(Ke(Zt),function(An){er?Ur[An]&&Ur[An].splice(Et(Ur[An],er),1):delete Ur[An]}),this}},emit:function(Zt,er){this.options.domEvents&&cu(Zt,er);var Ur=this.handlers[Zt]&&this.handlers[Zt].slice();if(!(!Ur||!Ur.length)){er.type=Zt,er.preventDefault=function(){er.srcEvent.preventDefault()};for(var An=0;An<Ur.length;)Ur[An](er),An++}},destroy:function(){this.element&&ro(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ro(Zt,er){var Ur=Zt.element;if(Ur.style){var An;M(Zt.options.cssProps,function(fi,Vi){An=ne(Ur.style,Vi),er?(Zt.oldCssProps[An]=Ur.style[An],Ur.style[An]=fi):Ur.style[An]=Zt.oldCssProps[An]||""}),er||(Zt.oldCssProps={})}}function cu(Zt,er){var Ur=b.createEvent("Event");Ur.initEvent(Zt,!0,!0),Ur.gesture=er,er.target.dispatchEvent(Ur)}ge(Wo,{INPUT_START:Ht,INPUT_MOVE:et,INPUT_END:$e,INPUT_CANCEL:Te,STATE_POSSIBLE:Io,STATE_BEGAN:oi,STATE_CHANGED:Si,STATE_ENDED:Qi,STATE_RECOGNIZED:Wa,STATE_CANCELLED:ms,STATE_FAILED:ho,DIRECTION_NONE:Xe,DIRECTION_LEFT:pt,DIRECTION_RIGHT:Oe,DIRECTION_UP:Be,DIRECTION_DOWN:vt,DIRECTION_HORIZONTAL:Rt,DIRECTION_VERTICAL:rr,DIRECTION_ALL:br,Manager:Oo,Input:$r,TouchAction:ba,TouchInput:Pt,MouseInput:ar,PointerEventInput:he,TouchMouseInput:Mn,SingleTouchInput:Gt,Recognizer:Po,AttrRecognizer:Mr,Tap:Xi,Pan:rn,Swipe:Mi,Pinch:Pn,Rotate:Cn,Press:Bn,on:Ze,off:xe,each:M,merge:ze,extend:Se,assign:ge,inherit:De,bindFn:Ue,prefixed:ne});var Qo=typeof K!="undefined"?K:typeof self!="undefined"?self:{};Qo.Hammer=Wo,W=function(){return Wo}.call(N,k,N,ft),W!==j&&(ft.exports=W)})(window,document,"Hammer")},7375:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0});var k=Symbol.for("INJECTION");function W(q,Q,ie,te){function Ce(){return te&&!Reflect.hasMetadata(k,this,Q)&&Reflect.defineMetadata(k,ie(),this,Q),Reflect.hasMetadata(k,this,Q)?Reflect.getMetadata(k,this,Q):ie()}function pe(fe){Reflect.defineMetadata(k,fe,this,Q)}Object.defineProperty(q,Q,{configurable:!0,enumerable:!0,get:Ce,set:pe})}function K(q,Q){return function(ie){return function(te,Ce){var pe=function(){return q.get(ie)};W(te,Ce,pe,Q)}}}N.makePropertyInjectDecorator=K;function b(q,Q){return function(ie,te){return function(Ce,pe){var fe=function(){return q.getNamed(ie,te)};W(Ce,pe,fe,Q)}}}N.makePropertyInjectNamedDecorator=b;function G(q,Q){return function(ie,te,Ce){return function(pe,fe){var J=function(){return q.getTagged(ie,te,Ce)};W(pe,fe,J,Q)}}}N.makePropertyInjectTaggedDecorator=G;function j(q,Q){return function(ie){return function(te,Ce){var pe=function(){return q.getAll(ie)};W(te,Ce,pe,Q)}}}N.makePropertyMultiInjectDecorator=j},84879:function(ft,N,k){"use strict";var W;W={value:!0};var K=k(7375);function b(G,j){j===void 0&&(j=!0);var q=K.makePropertyInjectDecorator(G,j),Q=K.makePropertyInjectNamedDecorator(G,j),ie=K.makePropertyInjectTaggedDecorator(G,j),te=K.makePropertyMultiInjectDecorator(G,j);return{lazyInject:q,lazyInjectNamed:Q,lazyInjectTagged:ie,lazyMultiInject:te}}N.Z=b},99934:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.tagProperty=N.tagParameter=N.decorate=void 0;var W=k(16674),K=k(6867);function b(te,Ce,pe,fe){var J=K.TAGGED;j(J,te,Ce,fe,pe)}N.tagParameter=b;function G(te,Ce,pe){var fe=K.TAGGED_PROP;j(fe,te.constructor,Ce,pe)}N.tagProperty=G;function j(te,Ce,pe,fe,J){var M={},E=typeof J=="number",ge=J!==void 0&&E?J.toString():pe;if(E&&pe!==void 0)throw new Error(W.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(te,Ce)&&(M=Reflect.getMetadata(te,Ce));var Se=M[ge];if(!Array.isArray(Se))Se=[];else for(var ze=0,De=Se;ze<De.length;ze++){var Ue=De[ze];if(Ue.key===fe.key)throw new Error(W.DUPLICATED_METADATA+" "+Ue.key.toString())}Se.push(fe),M[ge]=Se,Reflect.defineMetadata(te,M,Ce)}function q(te,Ce){Reflect.decorate(te,Ce)}function Q(te,Ce){return function(pe,fe){Ce(pe,fe,te)}}function ie(te,Ce,pe){typeof pe=="number"?q([Q(pe,te)],Ce):typeof pe=="string"?Reflect.decorate([te],Ce,pe):q([te],Ce)}N.decorate=ie},5744:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.inject=N.LazyServiceIdentifer=void 0;var W=k(16674),K=k(6867),b=k(47738),G=k(99934),j=function(){function Q(ie){this._cb=ie}return Q.prototype.unwrap=function(){return this._cb()},Q}();N.LazyServiceIdentifer=j;function q(Q){return function(ie,te,Ce){if(Q===void 0)throw new Error(W.UNDEFINED_INJECT_ANNOTATION(ie.name));var pe=new b.Metadata(K.INJECT_TAG,Q);typeof Ce=="number"?G.tagParameter(ie,te,Ce,pe):G.tagProperty(ie,te,pe)}}N.inject=q},64315:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.injectable=void 0;var W=k(16674),K=k(6867);function b(){return function(G){if(Reflect.hasOwnMetadata(K.PARAM_TYPES,G))throw new Error(W.DUPLICATED_INJECTABLE_DECORATOR);var j=Reflect.getMetadata(K.DESIGN_PARAM_TYPES,G)||[];return Reflect.defineMetadata(K.PARAM_TYPES,j,G),G}}N.injectable=b},71693:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.multiInject=void 0;var W=k(6867),K=k(47738),b=k(99934);function G(j){return function(q,Q,ie){var te=new K.Metadata(W.MULTI_INJECT_TAG,j);typeof ie=="number"?b.tagParameter(q,Q,ie,te):b.tagProperty(q,Q,te)}}N.multiInject=G},38085:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.named=void 0;var W=k(6867),K=k(47738),b=k(99934);function G(j){return function(q,Q,ie){var te=new K.Metadata(W.NAMED_TAG,j);typeof ie=="number"?b.tagParameter(q,Q,ie,te):b.tagProperty(q,Q,te)}}N.named=G},6515:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.optional=void 0;var W=k(6867),K=k(47738),b=k(99934);function G(){return function(j,q,Q){var ie=new K.Metadata(W.OPTIONAL_TAG,!0);typeof Q=="number"?b.tagParameter(j,q,Q,ie):b.tagProperty(j,q,ie)}}N.optional=G},7014:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.postConstruct=void 0;var W=k(16674),K=k(6867),b=k(47738);function G(){return function(j,q,Q){var ie=new b.Metadata(K.POST_CONSTRUCT,q);if(Reflect.hasOwnMetadata(K.POST_CONSTRUCT,j.constructor))throw new Error(W.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(K.POST_CONSTRUCT,ie,j.constructor)}}N.postConstruct=G},32052:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.tagged=void 0;var W=k(47738),K=k(99934);function b(G,j){return function(q,Q,ie){var te=new W.Metadata(G,j);typeof ie=="number"?K.tagParameter(q,Q,ie,te):K.tagProperty(q,Q,te)}}N.tagged=b},55638:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.targetName=void 0;var W=k(6867),K=k(47738),b=k(99934);function G(j){return function(q,Q,ie){var te=new K.Metadata(W.NAME_TAG,j);b.tagParameter(q,Q,ie,te)}}N.targetName=G},86757:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.unmanaged=void 0;var W=k(6867),K=k(47738),b=k(99934);function G(){return function(j,q,Q){var ie=new K.Metadata(W.UNMANAGED_TAG,!0);b.tagParameter(j,q,Q,ie)}}N.unmanaged=G},44290:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Binding=void 0;var W=k(28421),K=k(37791),b=function(){function G(j,q){this.id=K.id(),this.activated=!1,this.serviceIdentifier=j,this.scope=q,this.type=W.BindingTypeEnum.Invalid,this.constraint=function(Q){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return G.prototype.clone=function(){var j=new G(this.serviceIdentifier,this.scope);return j.activated=j.scope===W.BindingScopeEnum.Singleton?this.activated:!1,j.implementationType=this.implementationType,j.dynamicValue=this.dynamicValue,j.scope=this.scope,j.type=this.type,j.factory=this.factory,j.provider=this.provider,j.constraint=this.constraint,j.onActivation=this.onActivation,j.cache=this.cache,j},G}();N.Binding=b},23184:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingCount=void 0;var k={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};N.BindingCount=k},16674:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.STACK_OVERFLOW=N.CIRCULAR_DEPENDENCY_IN_FACTORY=N.POST_CONSTRUCT_ERROR=N.MULTIPLE_POST_CONSTRUCT_METHODS=N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=N.ARGUMENTS_LENGTH_MISMATCH=N.INVALID_DECORATOR_OPERATION=N.INVALID_TO_SELF_VALUE=N.INVALID_FUNCTION_BINDING=N.INVALID_MIDDLEWARE_RETURN=N.NO_MORE_SNAPSHOTS_AVAILABLE=N.INVALID_BINDING_TYPE=N.NOT_IMPLEMENTED=N.CIRCULAR_DEPENDENCY=N.UNDEFINED_INJECT_ANNOTATION=N.MISSING_INJECT_ANNOTATION=N.MISSING_INJECTABLE_ANNOTATION=N.NOT_REGISTERED=N.CANNOT_UNBIND=N.AMBIGUOUS_MATCH=N.KEY_NOT_FOUND=N.NULL_ARGUMENT=N.DUPLICATED_METADATA=N.DUPLICATED_INJECTABLE_DECORATOR=void 0,N.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",N.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",N.NULL_ARGUMENT="NULL argument",N.KEY_NOT_FOUND="Key Not Found",N.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",N.CANNOT_UNBIND="Could not unbind serviceIdentifier:",N.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",N.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",N.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var k=function(G){return"@inject called with undefined this could mean that the class "+G+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};N.UNDEFINED_INJECT_ANNOTATION=k,N.CIRCULAR_DEPENDENCY="Circular dependency found:",N.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",N.INVALID_BINDING_TYPE="Invalid binding type:",N.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",N.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",N.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",N.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",N.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var W=function(){for(var G=[],j=0;j<arguments.length;j++)G[j]=arguments[j];return"The number of constructor arguments in the derived class "+(G[0]+" must be >= than the number of constructor arguments of its base class.")};N.ARGUMENTS_LENGTH_MISMATCH=W,N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",N.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var K=function(){for(var G=[],j=0;j<arguments.length;j++)G[j]=arguments[j];return"@postConstruct error in class "+G[0]+": "+G[1]};N.POST_CONSTRUCT_ERROR=K;var b=function(){for(var G=[],j=0;j<arguments.length;j++)G[j]=arguments[j];return"It looks like there is a circular dependency "+("in one of the '"+G[0]+"' bindings. Please investigate bindings with")+("service identifier '"+G[1]+"'.")};N.CIRCULAR_DEPENDENCY_IN_FACTORY=b,N.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.TargetTypeEnum=N.BindingTypeEnum=N.BindingScopeEnum=void 0;var k={Request:"Request",Singleton:"Singleton",Transient:"Transient"};N.BindingScopeEnum=k;var W={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};N.BindingTypeEnum=W;var K={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};N.TargetTypeEnum=K},6867:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.NON_CUSTOM_TAG_KEYS=N.POST_CONSTRUCT=N.DESIGN_PARAM_TYPES=N.PARAM_TYPES=N.TAGGED_PROP=N.TAGGED=N.MULTI_INJECT_TAG=N.INJECT_TAG=N.OPTIONAL_TAG=N.UNMANAGED_TAG=N.NAME_TAG=N.NAMED_TAG=void 0,N.NAMED_TAG="named",N.NAME_TAG="name",N.UNMANAGED_TAG="unmanaged",N.OPTIONAL_TAG="optional",N.INJECT_TAG="inject",N.MULTI_INJECT_TAG="multi_inject",N.TAGGED="inversify:tagged",N.TAGGED_PROP="inversify:tagged_props",N.PARAM_TYPES="inversify:paramtypes",N.DESIGN_PARAM_TYPES="design:paramtypes",N.POST_CONSTRUCT="post_construct";function k(){return[N.INJECT_TAG,N.MULTI_INJECT_TAG,N.NAME_TAG,N.UNMANAGED_TAG,N.NAMED_TAG,N.OPTIONAL_TAG]}N.NON_CUSTOM_TAG_KEYS=k()},51389:function(ft,N,k){"use strict";var W=this&&this.__awaiter||function(Se,ze,De,Ue){function at(Je){return Je instanceof De?Je:new De(function(Ze){Ze(Je)})}return new(De||(De=Promise))(function(Je,Ze){function xe(Ke){try{He(Ue.next(Ke))}catch(Et){Ze(Et)}}function _e(Ke){try{He(Ue.throw(Ke))}catch(Et){Ze(Et)}}function He(Ke){Ke.done?Je(Ke.value):at(Ke.value).then(xe,_e)}He((Ue=Ue.apply(Se,ze||[])).next())})},K=this&&this.__generator||function(Se,ze){var De={label:0,sent:function(){if(Je[0]&1)throw Je[1];return Je[1]},trys:[],ops:[]},Ue,at,Je,Ze;return Ze={next:xe(0),throw:xe(1),return:xe(2)},typeof Symbol=="function"&&(Ze[Symbol.iterator]=function(){return this}),Ze;function xe(He){return function(Ke){return _e([He,Ke])}}function _e(He){if(Ue)throw new TypeError("Generator is already executing.");for(;De;)try{if(Ue=1,at&&(Je=He[0]&2?at.return:He[0]?at.throw||((Je=at.return)&&Je.call(at),0):at.next)&&!(Je=Je.call(at,He[1])).done)return Je;switch(at=0,Je&&(He=[He[0]&2,Je.value]),He[0]){case 0:case 1:Je=He;break;case 4:return De.label++,{value:He[1],done:!1};case 5:De.label++,at=He[1],He=[0];continue;case 7:He=De.ops.pop(),De.trys.pop();continue;default:if(Je=De.trys,!(Je=Je.length>0&&Je[Je.length-1])&&(He[0]===6||He[0]===2)){De=0;continue}if(He[0]===3&&(!Je||He[1]>Je[0]&&He[1]<Je[3])){De.label=He[1];break}if(He[0]===6&&De.label<Je[1]){De.label=Je[1],Je=He;break}if(Je&&De.label<Je[2]){De.label=Je[2],De.ops.push(He);break}Je[2]&&De.ops.pop(),De.trys.pop();continue}He=ze.call(Se,De)}catch(Ke){He=[6,Ke],at=0}finally{Ue=Je=0}if(He[0]&5)throw He[1];return{value:He[0]?He[1]:void 0,done:!0}}},b=this&&this.__spreadArray||function(Se,ze){for(var De=0,Ue=ze.length,at=Se.length;De<Ue;De++,at++)Se[at]=ze[De];return Se};Object.defineProperty(N,"__esModule",{value:!0}),N.Container=void 0;var G=k(44290),j=k(16674),q=k(28421),Q=k(6867),ie=k(51377),te=k(86311),Ce=k(31927),pe=k(51860),fe=k(37791),J=k(55800),M=k(85700),E=k(80175),ge=function(){function Se(ze){this._appliedMiddleware=[];var De=ze||{};if(typeof De!="object")throw new Error(""+j.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(De.defaultScope===void 0)De.defaultScope=q.BindingScopeEnum.Transient;else if(De.defaultScope!==q.BindingScopeEnum.Singleton&&De.defaultScope!==q.BindingScopeEnum.Transient&&De.defaultScope!==q.BindingScopeEnum.Request)throw new Error(""+j.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(De.autoBindInjectable===void 0)De.autoBindInjectable=!1;else if(typeof De.autoBindInjectable!="boolean")throw new Error(""+j.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(De.skipBaseClassChecks===void 0)De.skipBaseClassChecks=!1;else if(typeof De.skipBaseClassChecks!="boolean")throw new Error(""+j.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:De.autoBindInjectable,defaultScope:De.defaultScope,skipBaseClassChecks:De.skipBaseClassChecks},this.id=fe.id(),this._bindingDictionary=new E.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new ie.MetadataReader}return Se.merge=function(ze,De){for(var Ue=[],at=2;at<arguments.length;at++)Ue[at-2]=arguments[at];var Je=new Se,Ze=b([ze,De],Ue).map(function(He){return te.getBindingDictionary(He)}),xe=te.getBindingDictionary(Je);function _e(He,Ke){He.traverse(function(Et,ke){ke.forEach(function(qe){Ke.add(qe.serviceIdentifier,qe.clone())})})}return Ze.forEach(function(He){_e(He,xe)}),Je},Se.prototype.load=function(){for(var ze=[],De=0;De<arguments.length;De++)ze[De]=arguments[De];for(var Ue=this._getContainerModuleHelpersFactory(),at=0,Je=ze;at<Je.length;at++){var Ze=Je[at],xe=Ue(Ze.id);Ze.registry(xe.bindFunction,xe.unbindFunction,xe.isboundFunction,xe.rebindFunction)}},Se.prototype.loadAsync=function(){for(var ze=[],De=0;De<arguments.length;De++)ze[De]=arguments[De];return W(this,void 0,void 0,function(){var Ue,at,Je,Ze,xe;return K(this,function(_e){switch(_e.label){case 0:Ue=this._getContainerModuleHelpersFactory(),at=0,Je=ze,_e.label=1;case 1:return at<Je.length?(Ze=Je[at],xe=Ue(Ze.id),[4,Ze.registry(xe.bindFunction,xe.unbindFunction,xe.isboundFunction,xe.rebindFunction)]):[3,4];case 2:_e.sent(),_e.label=3;case 3:return at++,[3,1];case 4:return[2]}})})},Se.prototype.unload=function(){for(var ze=this,De=[],Ue=0;Ue<arguments.length;Ue++)De[Ue]=arguments[Ue];var at=function(Je){return function(Ze){return Ze.moduleId===Je}};De.forEach(function(Je){var Ze=at(Je.id);ze._bindingDictionary.removeByCondition(Ze)})},Se.prototype.bind=function(ze){var De=this.options.defaultScope||q.BindingScopeEnum.Transient,Ue=new G.Binding(ze,De);return this._bindingDictionary.add(ze,Ue),new pe.BindingToSyntax(Ue)},Se.prototype.rebind=function(ze){return this.unbind(ze),this.bind(ze)},Se.prototype.unbind=function(ze){try{this._bindingDictionary.remove(ze)}catch(De){throw new Error(j.CANNOT_UNBIND+" "+J.getServiceIdentifierAsString(ze))}},Se.prototype.unbindAll=function(){this._bindingDictionary=new E.Lookup},Se.prototype.isBound=function(ze){var De=this._bindingDictionary.hasKey(ze);return!De&&this.parent&&(De=this.parent.isBound(ze)),De},Se.prototype.isBoundNamed=function(ze,De){return this.isBoundTagged(ze,Q.NAMED_TAG,De)},Se.prototype.isBoundTagged=function(ze,De,Ue){var at=!1;if(this._bindingDictionary.hasKey(ze)){var Je=this._bindingDictionary.get(ze),Ze=te.createMockRequest(this,ze,De,Ue);at=Je.some(function(xe){return xe.constraint(Ze)})}return!at&&this.parent&&(at=this.parent.isBoundTagged(ze,De,Ue)),at},Se.prototype.snapshot=function(){this._snapshots.push(M.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},Se.prototype.restore=function(){var ze=this._snapshots.pop();if(ze===void 0)throw new Error(j.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=ze.bindings,this._middleware=ze.middleware},Se.prototype.createChild=function(ze){var De=new Se(ze||this.options);return De.parent=this,De},Se.prototype.applyMiddleware=function(){for(var ze=[],De=0;De<arguments.length;De++)ze[De]=arguments[De];this._appliedMiddleware=this._appliedMiddleware.concat(ze);var Ue=this._middleware?this._middleware:this._planAndResolve();this._middleware=ze.reduce(function(at,Je){return Je(at)},Ue)},Se.prototype.applyCustomMetadataReader=function(ze){this._metadataReader=ze},Se.prototype.get=function(ze){return this._get(!1,!1,q.TargetTypeEnum.Variable,ze)},Se.prototype.getTagged=function(ze,De,Ue){return this._get(!1,!1,q.TargetTypeEnum.Variable,ze,De,Ue)},Se.prototype.getNamed=function(ze,De){return this.getTagged(ze,Q.NAMED_TAG,De)},Se.prototype.getAll=function(ze){return this._get(!0,!0,q.TargetTypeEnum.Variable,ze)},Se.prototype.getAllTagged=function(ze,De,Ue){return this._get(!1,!0,q.TargetTypeEnum.Variable,ze,De,Ue)},Se.prototype.getAllNamed=function(ze,De){return this.getAllTagged(ze,Q.NAMED_TAG,De)},Se.prototype.resolve=function(ze){var De=this.createChild();return De.bind(ze).toSelf(),this._appliedMiddleware.forEach(function(Ue){De.applyMiddleware(Ue)}),De.get(ze)},Se.prototype._getContainerModuleHelpersFactory=function(){var ze=this,De=function(xe,_e){xe._binding.moduleId=_e},Ue=function(xe){return function(_e){var He=ze.bind.bind(ze),Ke=He(_e);return De(Ke,xe),Ke}},at=function(xe){return function(_e){var He=ze.unbind.bind(ze);He(_e)}},Je=function(xe){return function(_e){var He=ze.isBound.bind(ze);return He(_e)}},Ze=function(xe){return function(_e){var He=ze.rebind.bind(ze),Ke=He(_e);return De(Ke,xe),Ke}};return function(xe){return{bindFunction:Ue(xe),isboundFunction:Je(xe),rebindFunction:Ze(xe),unbindFunction:at(xe)}}},Se.prototype._get=function(ze,De,Ue,at,Je,Ze){var xe=null,_e={avoidConstraints:ze,contextInterceptor:function(He){return He},isMultiInject:De,key:Je,serviceIdentifier:at,targetType:Ue,value:Ze};if(this._middleware){if(xe=this._middleware(_e),xe==null)throw new Error(j.INVALID_MIDDLEWARE_RETURN)}else xe=this._planAndResolve()(_e);return xe},Se.prototype._planAndResolve=function(){var ze=this;return function(De){var Ue=te.plan(ze._metadataReader,ze,De.isMultiInject,De.targetType,De.serviceIdentifier,De.key,De.value,De.avoidConstraints);Ue=De.contextInterceptor(Ue);var at=Ce.resolve(Ue);return at}},Se}();N.Container=ge},33244:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.AsyncContainerModule=N.ContainerModule=void 0;var W=k(37791),K=function(){function G(j){this.id=W.id(),this.registry=j}return G}();N.ContainerModule=K;var b=function(){function G(j){this.id=W.id(),this.registry=j}return G}();N.AsyncContainerModule=b},85700:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.ContainerSnapshot=void 0;var k=function(){function W(){}return W.of=function(K,b){var G=new W;return G.bindings=K,G.middleware=b,G},W}();N.ContainerSnapshot=k},80175:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Lookup=void 0;var W=k(16674),K=function(){function b(){this._map=new Map}return b.prototype.getMap=function(){return this._map},b.prototype.add=function(G,j){if(G==null)throw new Error(W.NULL_ARGUMENT);if(j==null)throw new Error(W.NULL_ARGUMENT);var q=this._map.get(G);q!==void 0?(q.push(j),this._map.set(G,q)):this._map.set(G,[j])},b.prototype.get=function(G){if(G==null)throw new Error(W.NULL_ARGUMENT);var j=this._map.get(G);if(j!==void 0)return j;throw new Error(W.KEY_NOT_FOUND)},b.prototype.remove=function(G){if(G==null)throw new Error(W.NULL_ARGUMENT);if(!this._map.delete(G))throw new Error(W.KEY_NOT_FOUND)},b.prototype.removeByCondition=function(G){var j=this;this._map.forEach(function(q,Q){var ie=q.filter(function(te){return!G(te)});ie.length>0?j._map.set(Q,ie):j._map.delete(Q)})},b.prototype.hasKey=function(G){if(G==null)throw new Error(W.NULL_ARGUMENT);return this._map.has(G)},b.prototype.clone=function(){var G=new b;return this._map.forEach(function(j,q){j.forEach(function(Q){return G.add(q,Q.clone())})}),G},b.prototype.traverse=function(G){this._map.forEach(function(j,q){G(q,j)})},b}();N.Lookup=K},86700:function(ft,N,k){"use strict";var W;W={value:!0},W=W=W=W=W=W=N.GW=W=W=N.zY=W=W=W=W=W=N.f3=W=W=N.b2=W=W=W=W=W=N.W2=W=void 0;var K=k(6867);W=K;var b=k(51389);Object.defineProperty(N,"W2",{enumerable:!0,get:function(){return b.Container}});var G=k(28421);W={enumerable:!0,get:function(){return G.BindingScopeEnum}},W={enumerable:!0,get:function(){return G.BindingTypeEnum}},W={enumerable:!0,get:function(){return G.TargetTypeEnum}};var j=k(33244);W={enumerable:!0,get:function(){return j.AsyncContainerModule}},W={enumerable:!0,get:function(){return j.ContainerModule}};var q=k(64315);Object.defineProperty(N,"b2",{enumerable:!0,get:function(){return q.injectable}});var Q=k(32052);W={enumerable:!0,get:function(){return Q.tagged}};var ie=k(38085);W={enumerable:!0,get:function(){return ie.named}};var te=k(5744);Object.defineProperty(N,"f3",{enumerable:!0,get:function(){return te.inject}}),W={enumerable:!0,get:function(){return te.LazyServiceIdentifer}};var Ce=k(6515);W={enumerable:!0,get:function(){return Ce.optional}};var pe=k(86757);W={enumerable:!0,get:function(){return pe.unmanaged}};var fe=k(71693);W={enumerable:!0,get:function(){return fe.multiInject}};var J=k(55638);W={enumerable:!0,get:function(){return J.targetName}};var M=k(7014);Object.defineProperty(N,"zY",{enumerable:!0,get:function(){return M.postConstruct}});var E=k(51377);W={enumerable:!0,get:function(){return E.MetadataReader}};var ge=k(37791);W={enumerable:!0,get:function(){return ge.id}};var Se=k(99934);Object.defineProperty(N,"GW",{enumerable:!0,get:function(){return Se.decorate}});var ze=k(80758);W={enumerable:!0,get:function(){return ze.traverseAncerstors}},W={enumerable:!0,get:function(){return ze.taggedConstraint}},W={enumerable:!0,get:function(){return ze.namedConstraint}},W={enumerable:!0,get:function(){return ze.typeConstraint}};var De=k(55800);W={enumerable:!0,get:function(){return De.getServiceIdentifierAsString}};var Ue=k(70600);W={enumerable:!0,get:function(){return Ue.multiBindToService}}},95228:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Context=void 0;var W=k(37791),K=function(){function b(G){this.id=W.id(),this.container=G}return b.prototype.addPlan=function(G){this.plan=G},b.prototype.setCurrentRequest=function(G){this.currentRequest=G},b}();N.Context=K},47738:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Metadata=void 0;var W=k(6867),K=function(){function b(G,j){this.key=G,this.value=j}return b.prototype.toString=function(){return this.key===W.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},b}();N.Metadata=K},51377:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.MetadataReader=void 0;var W=k(6867),K=function(){function b(){}return b.prototype.getConstructorMetadata=function(G){var j=Reflect.getMetadata(W.PARAM_TYPES,G),q=Reflect.getMetadata(W.TAGGED,G);return{compilerGeneratedMetadata:j,userGeneratedMetadata:q||{}}},b.prototype.getPropertiesMetadata=function(G){var j=Reflect.getMetadata(W.TAGGED_PROP,G)||[];return j},b}();N.MetadataReader=K},55314:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Plan=void 0;var k=function(){function W(K,b){this.parentContext=K,this.rootRequest=b}return W}();N.Plan=k},86311:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.getBindingDictionary=N.createMockRequest=N.plan=void 0;var W=k(23184),K=k(16674),b=k(28421),G=k(6867),j=k(54623),q=k(55800),Q=k(95228),ie=k(47738),te=k(55314),Ce=k(6e3),pe=k(6748),fe=k(18924);function J(at){return at._bindingDictionary}N.getBindingDictionary=J;function M(at,Je,Ze,xe,_e,He){var Ke=at?G.MULTI_INJECT_TAG:G.INJECT_TAG,Et=new ie.Metadata(Ke,Ze),ke=new fe.Target(Je,xe,Ze,Et);if(_e!==void 0){var qe=new ie.Metadata(_e,He);ke.metadata.push(qe)}return ke}function E(at,Je,Ze,xe,_e){var He=ze(Ze.container,_e.serviceIdentifier),Ke=[];return He.length===W.BindingCount.NoBindingsAvailable&&Ze.container.options.autoBindInjectable&&typeof _e.serviceIdentifier=="function"&&at.getConstructorMetadata(_e.serviceIdentifier).compilerGeneratedMetadata&&(Ze.container.bind(_e.serviceIdentifier).toSelf(),He=ze(Ze.container,_e.serviceIdentifier)),Je?Ke=He:Ke=He.filter(function(Et){var ke=new pe.Request(Et.serviceIdentifier,Ze,xe,Et,_e);return Et.constraint(ke)}),ge(_e.serviceIdentifier,Ke,_e,Ze.container),Ke}function ge(at,Je,Ze,xe){switch(Je.length){case W.BindingCount.NoBindingsAvailable:if(Ze.isOptional())return Je;var _e=q.getServiceIdentifierAsString(at),He=K.NOT_REGISTERED;throw He+=q.listMetadataForTarget(_e,Ze),He+=q.listRegisteredBindingsForServiceIdentifier(xe,_e,ze),new Error(He);case W.BindingCount.OnlyOneBindingAvailable:if(!Ze.isArray())return Je;case W.BindingCount.MultipleBindingsAvailable:default:if(Ze.isArray())return Je;var _e=q.getServiceIdentifierAsString(at),He=K.AMBIGUOUS_MATCH+" "+_e;throw He+=q.listRegisteredBindingsForServiceIdentifier(xe,_e,ze),new Error(He)}}function Se(at,Je,Ze,xe,_e,He){var Ke,Et;if(_e===null){Ke=E(at,Je,xe,null,He),Et=new pe.Request(Ze,xe,null,Ke,He);var ke=new te.Plan(xe,Et);xe.addPlan(ke)}else Ke=E(at,Je,xe,_e,He),Et=_e.addChildRequest(He.serviceIdentifier,Ke,He);Ke.forEach(function(qe){var ne=null;if(He.isArray())ne=Et.addChildRequest(qe.serviceIdentifier,qe,He);else{if(qe.cache)return;ne=Et}if(qe.type===b.BindingTypeEnum.Instance&&qe.implementationType!==null){var Ge=Ce.getDependencies(at,qe.implementationType);if(!xe.container.options.skipBaseClassChecks){var oe=Ce.getBaseClassDependencyCount(at,qe.implementationType);if(Ge.length<oe){var Fe=K.ARGUMENTS_LENGTH_MISMATCH(Ce.getFunctionName(qe.implementationType));throw new Error(Fe)}}Ge.forEach(function(ut){Se(at,!1,ut.serviceIdentifier,xe,ne,ut)})}})}function ze(at,Je){var Ze=[],xe=J(at);return xe.hasKey(Je)?Ze=xe.get(Je):at.parent!==null&&(Ze=ze(at.parent,Je)),Ze}function De(at,Je,Ze,xe,_e,He,Ke,Et){Et===void 0&&(Et=!1);var ke=new Q.Context(Je),qe=M(Ze,xe,_e,"",He,Ke);try{return Se(at,Et,_e,ke,null,qe),ke}catch(ne){throw j.isStackOverflowExeption(ne)&&ke.plan&&q.circularDependencyToException(ke.plan.rootRequest),ne}}N.plan=De;function Ue(at,Je,Ze,xe){var _e=new fe.Target(b.TargetTypeEnum.Variable,"",Je,new ie.Metadata(Ze,xe)),He=new Q.Context(at),Ke=new pe.Request(Je,He,null,[],_e);return Ke}N.createMockRequest=Ue},88460:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.QueryableString=void 0;var k=function(){function W(K){this.str=K}return W.prototype.startsWith=function(K){return this.str.indexOf(K)===0},W.prototype.endsWith=function(K){var b="",G=K.split("").reverse().join("");return b=this.str.split("").reverse().join(""),this.startsWith.call({str:b},G)},W.prototype.contains=function(K){return this.str.indexOf(K)!==-1},W.prototype.equals=function(K){return this.str===K},W.prototype.value=function(){return this.str},W}();N.QueryableString=k},6e3:function(ft,N,k){"use strict";var W=this&&this.__spreadArray||function(E,ge){for(var Se=0,ze=ge.length,De=E.length;Se<ze;Se++,De++)E[De]=ge[Se];return E};Object.defineProperty(N,"__esModule",{value:!0}),N.getFunctionName=N.getBaseClassDependencyCount=N.getDependencies=void 0;var K=k(5744),b=k(16674),G=k(28421),j=k(6867),q=k(55800);Object.defineProperty(N,"getFunctionName",{enumerable:!0,get:function(){return q.getFunctionName}});var Q=k(18924);function ie(E,ge){var Se=q.getFunctionName(ge),ze=te(E,Se,ge,!1);return ze}N.getDependencies=ie;function te(E,ge,Se,ze){var De=E.getConstructorMetadata(Se),Ue=De.compilerGeneratedMetadata;if(Ue===void 0){var at=b.MISSING_INJECTABLE_ANNOTATION+" "+ge+".";throw new Error(at)}var Je=De.userGeneratedMetadata,Ze=Object.keys(Je),xe=Se.length===0&&Ze.length>0,_e=Ze.length>Se.length,He=xe||_e?Ze.length:Se.length,Ke=pe(ze,ge,Ue,Je,He),Et=fe(E,Se),ke=W(W([],Ke),Et);return ke}function Ce(E,ge,Se,ze,De){var Ue=De[E.toString()]||[],at=M(Ue),Je=at.unmanaged!==!0,Ze=ze[E],xe=at.inject||at.multiInject;if(Ze=xe||Ze,Ze instanceof K.LazyServiceIdentifer&&(Ze=Ze.unwrap()),Je){var _e=Ze===Object,He=Ze===Function,Ke=Ze===void 0,Et=_e||He||Ke;if(!ge&&Et){var ke=b.MISSING_INJECT_ANNOTATION+" argument "+E+" in class "+Se+".";throw new Error(ke)}var qe=new Q.Target(G.TargetTypeEnum.ConstructorArgument,at.targetName,Ze);return qe.metadata=Ue,qe}return null}function pe(E,ge,Se,ze,De){for(var Ue=[],at=0;at<De;at++){var Je=at,Ze=Ce(Je,E,ge,Se,ze);Ze!==null&&Ue.push(Ze)}return Ue}function fe(E,ge){for(var Se=E.getPropertiesMetadata(ge),ze=[],De=Object.keys(Se),Ue=0,at=De;Ue<at.length;Ue++){var Je=at[Ue],Ze=Se[Je],xe=M(Se[Je]),_e=xe.targetName||Je,He=xe.inject||xe.multiInject,Ke=new Q.Target(G.TargetTypeEnum.ClassProperty,_e,He);Ke.metadata=Ze,ze.push(Ke)}var Et=Object.getPrototypeOf(ge.prototype).constructor;if(Et!==Object){var ke=fe(E,Et);ze=W(W([],ze),ke)}return ze}function J(E,ge){var Se=Object.getPrototypeOf(ge.prototype).constructor;if(Se!==Object){var ze=q.getFunctionName(Se),De=te(E,ze,Se,!0),Ue=De.map(function(Ze){return Ze.metadata.filter(function(xe){return xe.key===j.UNMANAGED_TAG})}),at=[].concat.apply([],Ue).length,Je=De.length-at;return Je>0?Je:J(E,Se)}else return 0}N.getBaseClassDependencyCount=J;function M(E){var ge={};return E.forEach(function(Se){ge[Se.key.toString()]=Se.value}),{inject:ge[j.INJECT_TAG],multiInject:ge[j.MULTI_INJECT_TAG],targetName:ge[j.NAME_TAG],unmanaged:ge[j.UNMANAGED_TAG]}}},6748:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Request=void 0;var W=k(37791),K=function(){function b(G,j,q,Q,ie){this.id=W.id(),this.serviceIdentifier=G,this.parentContext=j,this.parentRequest=q,this.target=ie,this.childRequests=[],this.bindings=Array.isArray(Q)?Q:[Q],this.requestScope=q===null?new Map:null}return b.prototype.addChildRequest=function(G,j,q){var Q=new b(G,this.parentContext,this,j,q);return this.childRequests.push(Q),Q},b}();N.Request=K},18924:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.Target=void 0;var W=k(6867),K=k(37791),b=k(47738),G=k(88460),j=function(){function q(Q,ie,te,Ce){this.id=K.id(),this.type=Q,this.serviceIdentifier=te,this.name=new G.QueryableString(ie||""),this.metadata=new Array;var pe=null;typeof Ce=="string"?pe=new b.Metadata(W.NAMED_TAG,Ce):Ce instanceof b.Metadata&&(pe=Ce),pe!==null&&this.metadata.push(pe)}return q.prototype.hasTag=function(Q){for(var ie=0,te=this.metadata;ie<te.length;ie++){var Ce=te[ie];if(Ce.key===Q)return!0}return!1},q.prototype.isArray=function(){return this.hasTag(W.MULTI_INJECT_TAG)},q.prototype.matchesArray=function(Q){return this.matchesTag(W.MULTI_INJECT_TAG)(Q)},q.prototype.isNamed=function(){return this.hasTag(W.NAMED_TAG)},q.prototype.isTagged=function(){return this.metadata.some(function(Q){return W.NON_CUSTOM_TAG_KEYS.every(function(ie){return Q.key!==ie})})},q.prototype.isOptional=function(){return this.matchesTag(W.OPTIONAL_TAG)(!0)},q.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(Q){return Q.key===W.NAMED_TAG})[0]:null},q.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(Q){return W.NON_CUSTOM_TAG_KEYS.every(function(ie){return Q.key!==ie})}):null},q.prototype.matchesNamedTag=function(Q){return this.matchesTag(W.NAMED_TAG)(Q)},q.prototype.matchesTag=function(Q){var ie=this;return function(te){for(var Ce=0,pe=ie.metadata;Ce<pe.length;Ce++){var fe=pe[Ce];if(fe.key===Q&&fe.value===te)return!0}return!1}},q}();N.Target=j},52279:function(ft,N,k){"use strict";var W=this&&this.__spreadArray||function(te,Ce){for(var pe=0,fe=Ce.length,J=te.length;pe<fe;pe++,J++)te[J]=Ce[pe];return te};Object.defineProperty(N,"__esModule",{value:!0}),N.resolveInstance=void 0;var K=k(16674),b=k(28421),G=k(6867);function j(te,Ce,pe){var fe=Ce.filter(function(M){return M.target!==null&&M.target.type===b.TargetTypeEnum.ClassProperty}),J=fe.map(pe);return fe.forEach(function(M,E){var ge="";ge=M.target.name.value();var Se=J[E];te[ge]=Se}),te}function q(te,Ce){return new(te.bind.apply(te,W([void 0],Ce)))}function Q(te,Ce){if(Reflect.hasMetadata(G.POST_CONSTRUCT,te)){var pe=Reflect.getMetadata(G.POST_CONSTRUCT,te);try{Ce[pe.value]()}catch(fe){throw new Error(K.POST_CONSTRUCT_ERROR(te.name,fe.message))}}}function ie(te,Ce,pe){var fe=null;if(Ce.length>0){var J=Ce.filter(function(E){return E.target!==null&&E.target.type===b.TargetTypeEnum.ConstructorArgument}),M=J.map(pe);fe=q(te,M),fe=j(fe,Ce,pe)}else fe=new te;return Q(te,fe),fe}N.resolveInstance=ie},31927:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.resolve=void 0;var W=k(16674),K=k(28421),b=k(54623),G=k(55800),j=k(52279),q=function(te,Ce,pe){try{return pe()}catch(fe){throw b.isStackOverflowExeption(fe)?new Error(W.CIRCULAR_DEPENDENCY_IN_FACTORY(te,Ce.toString())):fe}},Q=function(te){return function(Ce){Ce.parentContext.setCurrentRequest(Ce);var pe=Ce.bindings,fe=Ce.childRequests,J=Ce.target&&Ce.target.isArray(),M=!Ce.parentRequest||!Ce.parentRequest.target||!Ce.target||!Ce.parentRequest.target.matchesArray(Ce.target.serviceIdentifier);if(J&&M)return fe.map(function(Ue){var at=Q(te);return at(Ue)});var E=null;if(Ce.target.isOptional()&&pe.length===0)return;var ge=pe[0],Se=ge.scope===K.BindingScopeEnum.Singleton,ze=ge.scope===K.BindingScopeEnum.Request;if(Se&&ge.activated)return ge.cache;if(ze&&te!==null&&te.has(ge.id))return te.get(ge.id);if(ge.type===K.BindingTypeEnum.ConstantValue)E=ge.cache,ge.activated=!0;else if(ge.type===K.BindingTypeEnum.Function)E=ge.cache,ge.activated=!0;else if(ge.type===K.BindingTypeEnum.Constructor)E=ge.implementationType;else if(ge.type===K.BindingTypeEnum.DynamicValue&&ge.dynamicValue!==null)E=q("toDynamicValue",ge.serviceIdentifier,function(){return ge.dynamicValue(Ce.parentContext)});else if(ge.type===K.BindingTypeEnum.Factory&&ge.factory!==null)E=q("toFactory",ge.serviceIdentifier,function(){return ge.factory(Ce.parentContext)});else if(ge.type===K.BindingTypeEnum.Provider&&ge.provider!==null)E=q("toProvider",ge.serviceIdentifier,function(){return ge.provider(Ce.parentContext)});else if(ge.type===K.BindingTypeEnum.Instance&&ge.implementationType!==null)E=j.resolveInstance(ge.implementationType,fe,Q(te));else{var De=G.getServiceIdentifierAsString(Ce.serviceIdentifier);throw new Error(W.INVALID_BINDING_TYPE+" "+De)}return typeof ge.onActivation=="function"&&(E=ge.onActivation(Ce.parentContext,E)),Se&&(ge.cache=E,ge.activated=!0),ze&&te!==null&&!te.has(ge.id)&&te.set(ge.id,E),E}};function ie(te){var Ce=Q(te.plan.rootRequest.requestScope);return Ce(te.plan.rootRequest)}N.resolve=ie},83366:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingInSyntax=void 0;var W=k(28421),K=k(71325),b=function(){function G(j){this._binding=j}return G.prototype.inRequestScope=function(){return this._binding.scope=W.BindingScopeEnum.Request,new K.BindingWhenOnSyntax(this._binding)},G.prototype.inSingletonScope=function(){return this._binding.scope=W.BindingScopeEnum.Singleton,new K.BindingWhenOnSyntax(this._binding)},G.prototype.inTransientScope=function(){return this._binding.scope=W.BindingScopeEnum.Transient,new K.BindingWhenOnSyntax(this._binding)},G}();N.BindingInSyntax=b},99812:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingInWhenOnSyntax=void 0;var W=k(83366),K=k(51811),b=k(98370),G=function(){function j(q){this._binding=q,this._bindingWhenSyntax=new b.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new K.BindingOnSyntax(this._binding),this._bindingInSyntax=new W.BindingInSyntax(q)}return j.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},j.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},j.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},j.prototype.when=function(q){return this._bindingWhenSyntax.when(q)},j.prototype.whenTargetNamed=function(q){return this._bindingWhenSyntax.whenTargetNamed(q)},j.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},j.prototype.whenTargetTagged=function(q,Q){return this._bindingWhenSyntax.whenTargetTagged(q,Q)},j.prototype.whenInjectedInto=function(q){return this._bindingWhenSyntax.whenInjectedInto(q)},j.prototype.whenParentNamed=function(q){return this._bindingWhenSyntax.whenParentNamed(q)},j.prototype.whenParentTagged=function(q,Q){return this._bindingWhenSyntax.whenParentTagged(q,Q)},j.prototype.whenAnyAncestorIs=function(q){return this._bindingWhenSyntax.whenAnyAncestorIs(q)},j.prototype.whenNoAncestorIs=function(q){return this._bindingWhenSyntax.whenNoAncestorIs(q)},j.prototype.whenAnyAncestorNamed=function(q){return this._bindingWhenSyntax.whenAnyAncestorNamed(q)},j.prototype.whenAnyAncestorTagged=function(q,Q){return this._bindingWhenSyntax.whenAnyAncestorTagged(q,Q)},j.prototype.whenNoAncestorNamed=function(q){return this._bindingWhenSyntax.whenNoAncestorNamed(q)},j.prototype.whenNoAncestorTagged=function(q,Q){return this._bindingWhenSyntax.whenNoAncestorTagged(q,Q)},j.prototype.whenAnyAncestorMatches=function(q){return this._bindingWhenSyntax.whenAnyAncestorMatches(q)},j.prototype.whenNoAncestorMatches=function(q){return this._bindingWhenSyntax.whenNoAncestorMatches(q)},j.prototype.onActivation=function(q){return this._bindingOnSyntax.onActivation(q)},j}();N.BindingInWhenOnSyntax=G},51811:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingOnSyntax=void 0;var W=k(98370),K=function(){function b(G){this._binding=G}return b.prototype.onActivation=function(G){return this._binding.onActivation=G,new W.BindingWhenSyntax(this._binding)},b}();N.BindingOnSyntax=K},51860:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingToSyntax=void 0;var W=k(16674),K=k(28421),b=k(99812),G=k(71325),j=function(){function q(Q){this._binding=Q}return q.prototype.to=function(Q){return this._binding.type=K.BindingTypeEnum.Instance,this._binding.implementationType=Q,new b.BindingInWhenOnSyntax(this._binding)},q.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+W.INVALID_TO_SELF_VALUE);var Q=this._binding.serviceIdentifier;return this.to(Q)},q.prototype.toConstantValue=function(Q){return this._binding.type=K.BindingTypeEnum.ConstantValue,this._binding.cache=Q,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=K.BindingScopeEnum.Singleton,new G.BindingWhenOnSyntax(this._binding)},q.prototype.toDynamicValue=function(Q){return this._binding.type=K.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=Q,this._binding.implementationType=null,new b.BindingInWhenOnSyntax(this._binding)},q.prototype.toConstructor=function(Q){return this._binding.type=K.BindingTypeEnum.Constructor,this._binding.implementationType=Q,this._binding.scope=K.BindingScopeEnum.Singleton,new G.BindingWhenOnSyntax(this._binding)},q.prototype.toFactory=function(Q){return this._binding.type=K.BindingTypeEnum.Factory,this._binding.factory=Q,this._binding.scope=K.BindingScopeEnum.Singleton,new G.BindingWhenOnSyntax(this._binding)},q.prototype.toFunction=function(Q){if(typeof Q!="function")throw new Error(W.INVALID_FUNCTION_BINDING);var ie=this.toConstantValue(Q);return this._binding.type=K.BindingTypeEnum.Function,this._binding.scope=K.BindingScopeEnum.Singleton,ie},q.prototype.toAutoFactory=function(Q){return this._binding.type=K.BindingTypeEnum.Factory,this._binding.factory=function(ie){var te=function(){return ie.container.get(Q)};return te},this._binding.scope=K.BindingScopeEnum.Singleton,new G.BindingWhenOnSyntax(this._binding)},q.prototype.toProvider=function(Q){return this._binding.type=K.BindingTypeEnum.Provider,this._binding.provider=Q,this._binding.scope=K.BindingScopeEnum.Singleton,new G.BindingWhenOnSyntax(this._binding)},q.prototype.toService=function(Q){this.toDynamicValue(function(ie){return ie.container.get(Q)})},q}();N.BindingToSyntax=j},71325:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingWhenOnSyntax=void 0;var W=k(51811),K=k(98370),b=function(){function G(j){this._binding=j,this._bindingWhenSyntax=new K.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new W.BindingOnSyntax(this._binding)}return G.prototype.when=function(j){return this._bindingWhenSyntax.when(j)},G.prototype.whenTargetNamed=function(j){return this._bindingWhenSyntax.whenTargetNamed(j)},G.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},G.prototype.whenTargetTagged=function(j,q){return this._bindingWhenSyntax.whenTargetTagged(j,q)},G.prototype.whenInjectedInto=function(j){return this._bindingWhenSyntax.whenInjectedInto(j)},G.prototype.whenParentNamed=function(j){return this._bindingWhenSyntax.whenParentNamed(j)},G.prototype.whenParentTagged=function(j,q){return this._bindingWhenSyntax.whenParentTagged(j,q)},G.prototype.whenAnyAncestorIs=function(j){return this._bindingWhenSyntax.whenAnyAncestorIs(j)},G.prototype.whenNoAncestorIs=function(j){return this._bindingWhenSyntax.whenNoAncestorIs(j)},G.prototype.whenAnyAncestorNamed=function(j){return this._bindingWhenSyntax.whenAnyAncestorNamed(j)},G.prototype.whenAnyAncestorTagged=function(j,q){return this._bindingWhenSyntax.whenAnyAncestorTagged(j,q)},G.prototype.whenNoAncestorNamed=function(j){return this._bindingWhenSyntax.whenNoAncestorNamed(j)},G.prototype.whenNoAncestorTagged=function(j,q){return this._bindingWhenSyntax.whenNoAncestorTagged(j,q)},G.prototype.whenAnyAncestorMatches=function(j){return this._bindingWhenSyntax.whenAnyAncestorMatches(j)},G.prototype.whenNoAncestorMatches=function(j){return this._bindingWhenSyntax.whenNoAncestorMatches(j)},G.prototype.onActivation=function(j){return this._bindingOnSyntax.onActivation(j)},G}();N.BindingWhenOnSyntax=b},98370:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.BindingWhenSyntax=void 0;var W=k(51811),K=k(80758),b=function(){function G(j){this._binding=j}return G.prototype.when=function(j){return this._binding.constraint=j,new W.BindingOnSyntax(this._binding)},G.prototype.whenTargetNamed=function(j){return this._binding.constraint=K.namedConstraint(j),new W.BindingOnSyntax(this._binding)},G.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(j){var q=j.target!==null&&!j.target.isNamed()&&!j.target.isTagged();return q},new W.BindingOnSyntax(this._binding)},G.prototype.whenTargetTagged=function(j,q){return this._binding.constraint=K.taggedConstraint(j)(q),new W.BindingOnSyntax(this._binding)},G.prototype.whenInjectedInto=function(j){return this._binding.constraint=function(q){return K.typeConstraint(j)(q.parentRequest)},new W.BindingOnSyntax(this._binding)},G.prototype.whenParentNamed=function(j){return this._binding.constraint=function(q){return K.namedConstraint(j)(q.parentRequest)},new W.BindingOnSyntax(this._binding)},G.prototype.whenParentTagged=function(j,q){return this._binding.constraint=function(Q){return K.taggedConstraint(j)(q)(Q.parentRequest)},new W.BindingOnSyntax(this._binding)},G.prototype.whenAnyAncestorIs=function(j){return this._binding.constraint=function(q){return K.traverseAncerstors(q,K.typeConstraint(j))},new W.BindingOnSyntax(this._binding)},G.prototype.whenNoAncestorIs=function(j){return this._binding.constraint=function(q){return!K.traverseAncerstors(q,K.typeConstraint(j))},new W.BindingOnSyntax(this._binding)},G.prototype.whenAnyAncestorNamed=function(j){return this._binding.constraint=function(q){return K.traverseAncerstors(q,K.namedConstraint(j))},new W.BindingOnSyntax(this._binding)},G.prototype.whenNoAncestorNamed=function(j){return this._binding.constraint=function(q){return!K.traverseAncerstors(q,K.namedConstraint(j))},new W.BindingOnSyntax(this._binding)},G.prototype.whenAnyAncestorTagged=function(j,q){return this._binding.constraint=function(Q){return K.traverseAncerstors(Q,K.taggedConstraint(j)(q))},new W.BindingOnSyntax(this._binding)},G.prototype.whenNoAncestorTagged=function(j,q){return this._binding.constraint=function(Q){return!K.traverseAncerstors(Q,K.taggedConstraint(j)(q))},new W.BindingOnSyntax(this._binding)},G.prototype.whenAnyAncestorMatches=function(j){return this._binding.constraint=function(q){return K.traverseAncerstors(q,j)},new W.BindingOnSyntax(this._binding)},G.prototype.whenNoAncestorMatches=function(j){return this._binding.constraint=function(q){return!K.traverseAncerstors(q,j)},new W.BindingOnSyntax(this._binding)},G}();N.BindingWhenSyntax=b},80758:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.typeConstraint=N.namedConstraint=N.taggedConstraint=N.traverseAncerstors=void 0;var W=k(6867),K=k(47738),b=function(Q,ie){var te=Q.parentRequest;return te!==null?ie(te)?!0:b(te,ie):!1};N.traverseAncerstors=b;var G=function(Q){return function(ie){var te=function(Ce){return Ce!==null&&Ce.target!==null&&Ce.target.matchesTag(Q)(ie)};return te.metaData=new K.Metadata(Q,ie),te}};N.taggedConstraint=G;var j=G(W.NAMED_TAG);N.namedConstraint=j;var q=function(Q){return function(ie){var te=null;if(ie!==null)if(te=ie.bindings[0],typeof Q=="string"){var Ce=te.serviceIdentifier;return Ce===Q}else{var pe=ie.bindings[0].implementationType;return Q===pe}return!1}};N.typeConstraint=q},70600:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.multiBindToService=void 0;var k=function(W){return function(K){return function(){for(var b=[],G=0;G<arguments.length;G++)b[G]=arguments[G];return b.forEach(function(j){return W.bind(j).toService(K)})}}};N.multiBindToService=k},54623:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.isStackOverflowExeption=void 0;var W=k(16674);function K(b){return b instanceof RangeError||b.message===W.STACK_OVERFLOW}N.isStackOverflowExeption=K},37791:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.id=void 0;var k=0;function W(){return k++}N.id=W},55800:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.circularDependencyToException=N.listMetadataForTarget=N.listRegisteredBindingsForServiceIdentifier=N.getServiceIdentifierAsString=N.getFunctionName=void 0;var W=k(16674);function K(te){if(typeof te=="function"){var Ce=te;return Ce.name}else{if(typeof te=="symbol")return te.toString();var Ce=te;return Ce}}N.getServiceIdentifierAsString=K;function b(te,Ce,pe){var fe="",J=pe(te,Ce);return J.length!==0&&(fe=`
Registered bindings:`,J.forEach(function(M){var E="Object";M.implementationType!==null&&(E=ie(M.implementationType)),fe=fe+`
 `+E,M.constraint.metaData&&(fe=fe+" - "+M.constraint.metaData)})),fe}N.listRegisteredBindingsForServiceIdentifier=b;function G(te,Ce){return te.parentRequest===null?!1:te.parentRequest.serviceIdentifier===Ce?!0:G(te.parentRequest,Ce)}function j(te){function Ce(fe,J){J===void 0&&(J=[]);var M=K(fe.serviceIdentifier);return J.push(M),fe.parentRequest!==null?Ce(fe.parentRequest,J):J}var pe=Ce(te);return pe.reverse().join(" --> ")}function q(te){te.childRequests.forEach(function(Ce){if(G(Ce,Ce.serviceIdentifier)){var pe=j(Ce);throw new Error(W.CIRCULAR_DEPENDENCY+" "+pe)}else q(Ce)})}N.circularDependencyToException=q;function Q(te,Ce){if(Ce.isTagged()||Ce.isNamed()){var pe="",fe=Ce.getNamedTag(),J=Ce.getCustomTags();return fe!==null&&(pe+=fe.toString()+`
`),J!==null&&J.forEach(function(M){pe+=M.toString()+`
`})," "+te+`
 `+te+" - "+pe}else return" "+te}N.listMetadataForTarget=Q;function ie(te){if(te.name)return te.name;var Ce=te.toString(),pe=Ce.match(/^function\s*([^\s(]+)/);return pe?pe[1]:"Anonymous function: "+Ce}N.getFunctionName=ie},47443:function(ft,N,k){var W=k(42118);function K(b,G){var j=b==null?0:b.length;return!!j&&W(b,G,0)>-1}ft.exports=K},1196:function(ft){function N(k,W,K){for(var b=-1,G=k==null?0:k.length;++b<G;)if(K(W,k[b]))return!0;return!1}ft.exports=N},29750:function(ft){function N(k,W,K){return k===k&&(K!==void 0&&(k=k<=K?k:K),W!==void 0&&(k=k>=W?k:W)),k}ft.exports=N},41848:function(ft){function N(k,W,K,b){for(var G=k.length,j=K+(b?1:-1);b?j--:++j<G;)if(W(k[j],j,k))return j;return-1}ft.exports=N},42118:function(ft,N,k){var W=k(41848),K=k(62722),b=k(42351);function G(j,q,Q){return q===q?b(j,q,Q):W(j,K,Q)}ft.exports=G},74221:function(ft){function N(k,W,K,b){for(var G=K-1,j=k.length;++G<j;)if(b(k[G],W))return G;return-1}ft.exports=N},62722:function(ft){function N(k){return k!==k}ft.exports=N},65464:function(ft,N,k){var W=k(29932),K=k(42118),b=k(74221),G=k(7518),j=k(278),q=Array.prototype,Q=q.splice;function ie(te,Ce,pe,fe){var J=fe?b:K,M=-1,E=Ce.length,ge=te;for(te===Ce&&(Ce=j(Ce)),pe&&(ge=W(te,G(pe)));++M<E;)for(var Se=0,ze=Ce[M],De=pe?pe(ze):ze;(Se=J(ge,De,Se,fe))>-1;)ge!==te&&Q.call(ge,Se,1),Q.call(te,Se,1);return te}ft.exports=ie},45652:function(ft,N,k){var W=k(88668),K=k(47443),b=k(1196),G=k(74757),j=k(23593),q=k(21814),Q=200;function ie(te,Ce,pe){var fe=-1,J=K,M=te.length,E=!0,ge=[],Se=ge;if(pe)E=!1,J=b;else if(M>=Q){var ze=Ce?null:j(te);if(ze)return q(ze);E=!1,J=G,Se=new W}else Se=Ce?[]:ge;e:for(;++fe<M;){var De=te[fe],Ue=Ce?Ce(De):De;if(De=pe||De!==0?De:0,E&&Ue===Ue){for(var at=Se.length;at--;)if(Se[at]===Ue)continue e;Ce&&Se.push(Ue),ge.push(De)}else J(Se,Ue,pe)||(Se!==ge&&Se.push(Ue),ge.push(De))}return ge}ft.exports=ie},23593:function(ft,N,k){var W=k(58525),K=k(50308),b=k(21814),G=1/0,j=W&&1/b(new W([,-0]))[1]==G?function(q){return new W(q)}:K;ft.exports=j},42351:function(ft){function N(k,W,K){for(var b=K-1,G=k.length;++b<G;)if(k[b]===W)return b;return-1}ft.exports=N},74691:function(ft,N,k){var W=k(29750),K=k(14841);function b(G,j,q){return q===void 0&&(q=j,j=void 0),q!==void 0&&(q=K(q),q=q===q?q:0),j!==void 0&&(j=K(j),j=j===j?j:0),W(K(G),j,q)}ft.exports=b},51584:function(ft,N,k){var W=k(44239),K=k(37005),b="[object Boolean]";function G(j){return j===!0||j===!1||K(j)&&W(j)==b}ft.exports=G},18446:function(ft,N,k){var W=k(90939);function K(b,G){return W(b,G)}ft.exports=K},14293:function(ft){function N(k){return k==null}ft.exports=N},81763:function(ft,N,k){var W=k(44239),K=k(37005),b="[object Number]";function G(j){return typeof j=="number"||K(j)&&W(j)==b}ft.exports=G},52353:function(ft){function N(k){return k===void 0}ft.exports=N},30236:function(ft,N,k){var W=k(42980),K=k(21463),b=K(function(G,j,q,Q){W(G,j,q,Q)});ft.exports=b},50308:function(ft){function N(){}ft.exports=N},97019:function(ft,N,k){var W=k(5976),K=k(45604),b=W(K);ft.exports=b},45604:function(ft,N,k){var W=k(65464);function K(b,G){return b&&b.length&&G&&G.length?W(b,G):b}ft.exports=K},44908:function(ft,N,k){var W=k(45652);function K(b){return b&&b.length?W(b):[]}ft.exports=K},6158:function(ft){(function(N,k){ft.exports=k()})(this,function(){"use strict";var N,k,W;function K(b,G){if(!N)N=G;else if(!k)k=G;else{var j="var sharedChunk = {}; ("+N+")(sharedChunk); ("+k+")(sharedChunk);",q={};N(q),W=G(q),typeof window!="undefined"&&(W.workerUrl=window.URL.createObjectURL(new Blob([j],{type:"text/javascript"})))}}return K(["exports"],function(b){"use strict";function G(h,v){return h(v={exports:{}},v.exports),v.exports}var j=q;function q(h,v,_,R){this.cx=3*h,this.bx=3*(_-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*v,this.by=3*(R-v)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=R,this.p2x=_,this.p2y=R}q.prototype.sampleCurveX=function(h){return((this.ax*h+this.bx)*h+this.cx)*h},q.prototype.sampleCurveY=function(h){return((this.ay*h+this.by)*h+this.cy)*h},q.prototype.sampleCurveDerivativeX=function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},q.prototype.solveCurveX=function(h,v){var _,R,F,z,$;for(v===void 0&&(v=1e-6),F=h,$=0;$<8;$++){if(z=this.sampleCurveX(F)-h,Math.abs(z)<v)return F;var ue=this.sampleCurveDerivativeX(F);if(Math.abs(ue)<1e-6)break;F-=z/ue}if((F=h)<(_=0))return _;if(F>(R=1))return R;for(;_<R;){if(z=this.sampleCurveX(F),Math.abs(z-h)<v)return F;h>z?_=F:R=F,F=.5*(R-_)+_}return F},q.prototype.solve=function(h,v){return this.sampleCurveY(this.solveCurveX(h,v))};var Q=ie;function ie(h,v){this.x=h,this.y=v}ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(h){return this.clone()._add(h)},sub:function(h){return this.clone()._sub(h)},multByPoint:function(h){return this.clone()._multByPoint(h)},divByPoint:function(h){return this.clone()._divByPoint(h)},mult:function(h){return this.clone()._mult(h)},div:function(h){return this.clone()._div(h)},rotate:function(h){return this.clone()._rotate(h)},rotateAround:function(h,v){return this.clone()._rotateAround(h,v)},matMult:function(h){return this.clone()._matMult(h)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(h){return this.x===h.x&&this.y===h.y},dist:function(h){return Math.sqrt(this.distSqr(h))},distSqr:function(h){var v=h.x-this.x,_=h.y-this.y;return v*v+_*_},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith:function(h){return this.angleWithSep(h.x,h.y)},angleWithSep:function(h,v){return Math.atan2(this.x*v-this.y*h,this.x*h+this.y*v)},_matMult:function(h){var v=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=v,this},_add:function(h){return this.x+=h.x,this.y+=h.y,this},_sub:function(h){return this.x-=h.x,this.y-=h.y,this},_mult:function(h){return this.x*=h,this.y*=h,this},_div:function(h){return this.x/=h,this.y/=h,this},_multByPoint:function(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint:function(h){return this.x/=h.x,this.y/=h.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var h=this.y;return this.y=this.x,this.x=-h,this},_rotate:function(h){var v=Math.cos(h),_=Math.sin(h),R=_*this.x+v*this.y;return this.x=v*this.x-_*this.y,this.y=R,this},_rotateAround:function(h,v){var _=Math.cos(h),R=Math.sin(h),F=v.y+R*(this.x-v.x)+_*(this.y-v.y);return this.x=v.x+_*(this.x-v.x)-R*(this.y-v.y),this.y=F,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ie.convert=function(h){return h instanceof ie?h:Array.isArray(h)?new ie(h[0],h[1]):h};var te=typeof self!="undefined"?self:{},Ce=Math.pow(2,53)-1;function pe(h,v,_,R){var F=new j(h,v,_,R);return function(z){return F.solve(z)}}var fe=pe(.25,.1,.25,1);function J(h,v,_){return Math.min(_,Math.max(v,h))}function M(h,v,_){var R=_-v,F=((h-v)%R+R)%R+v;return F===v?_:F}function E(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];for(var R=0,F=v;R<F.length;R+=1){var z=F[R];for(var $ in z)h[$]=z[$]}return h}var ge=1;function Se(){return ge++}function ze(){return function h(v){return v?(v^16*Math.random()>>v/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,h)}()}function De(h){return!!h&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h)}function Ue(h,v){h.forEach(function(_){v[_]&&(v[_]=v[_].bind(v))})}function at(h,v){return h.indexOf(v,h.length-v.length)!==-1}function Je(h,v,_){var R={};for(var F in h)R[F]=v.call(_||this,h[F],F,h);return R}function Ze(h,v,_){var R={};for(var F in h)v.call(_||this,h[F],F,h)&&(R[F]=h[F]);return R}function xe(h){return Array.isArray(h)?h.map(xe):typeof h=="object"&&h?Je(h,xe):h}var _e={};function He(h){_e[h]||(typeof console!="undefined"&&console.warn(h),_e[h]=!0)}function Ke(h,v,_){return(_.y-h.y)*(v.x-h.x)>(v.y-h.y)*(_.x-h.x)}function Et(h){for(var v=0,_=0,R=h.length,F=R-1,z=void 0,$=void 0;_<R;F=_++)v+=(($=h[F]).x-(z=h[_]).x)*(z.y+$.y);return v}function ke(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function qe(h){var v={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(R,F,z,$){var ue=z||$;return v[F]=!ue||ue.toLowerCase(),""}),v["max-age"]){var _=parseInt(v["max-age"],10);isNaN(_)?delete v["max-age"]:v["max-age"]=_}return v}var ne=null;function Ge(h){if(ne==null){var v=h.navigator?h.navigator.userAgent:null;ne=!!h.safari||!(!v||!(/\b(iPad|iPhone|iPod)\b/.test(v)||v.match("Safari")&&!v.match("Chrome")))}return ne}function oe(h){try{var v=te[h];return v.setItem("_mapbox_test_",1),v.removeItem("_mapbox_test_"),!0}catch(_){return!1}}var Fe,ut,Ae,Le,rt=te.performance&&te.performance.now?te.performance.now.bind(te.performance):Date.now.bind(Date),ye=te.requestAnimationFrame||te.mozRequestAnimationFrame||te.webkitRequestAnimationFrame||te.msRequestAnimationFrame,me=te.cancelAnimationFrame||te.mozCancelAnimationFrame||te.webkitCancelAnimationFrame||te.msCancelAnimationFrame,We={now:rt,frame:function(h){var v=ye(h);return{cancel:function(){return me(v)}}},getImageData:function(h,v){v===void 0&&(v=0);var _=te.document.createElement("canvas"),R=_.getContext("2d");if(!R)throw new Error("failed to create canvas 2d context");return _.width=h.width,_.height=h.height,R.drawImage(h,0,0,h.width,h.height),R.getImageData(-v,-v,h.width+2*v,h.height+2*v)},resolveURL:function(h){return Fe||(Fe=te.document.createElement("a")),Fe.href=h,Fe.href},hardwareConcurrency:te.navigator&&te.navigator.hardwareConcurrency||4,get devicePixelRatio(){return te.devicePixelRatio},get prefersReducedMotion(){return!!te.matchMedia&&(ut==null&&(ut=te.matchMedia("(prefers-reduced-motion: reduce)")),ut.matches)}},Ve={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},dt={supported:!1,testSupport:function(h){!Ht&&Le&&(et?$e(h):Ae=h)}},Ht=!1,et=!1;function $e(h){var v=h.createTexture();h.bindTexture(h.TEXTURE_2D,v);try{if(h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,Le),h.isContextLost())return;dt.supported=!0}catch(_){}h.deleteTexture(v),Ht=!0}te.document&&((Le=te.document.createElement("img")).onload=function(){Ae&&$e(Ae),Ae=null,et=!0},Le.onerror=function(){Ht=!0,Ae=null},Le.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Te="01",Xe=function(h,v){this._transformRequestFn=h,this._customAccessToken=v,this._createSkuToken()};function pt(h){return h.indexOf("mapbox:")===0}Xe.prototype._createSkuToken=function(){var h=function(){for(var v="",_=0;_<10;_++)v+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Te,v].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=h.token,this._skuTokenExpiresAt=h.tokenExpiresAt},Xe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Xe.prototype.transformRequest=function(h,v){return this._transformRequestFn&&this._transformRequestFn(h,v)||{url:h}},Xe.prototype.normalizeStyleURL=function(h,v){if(!pt(h))return h;var _=Rt(h);return _.path="/styles/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||v)},Xe.prototype.normalizeGlyphsURL=function(h,v){if(!pt(h))return h;var _=Rt(h);return _.path="/fonts/v1"+_.path,this._makeAPIURL(_,this._customAccessToken||v)},Xe.prototype.normalizeSourceURL=function(h,v){if(!pt(h))return h;var _=Rt(h);return _.path="/v4/"+_.authority+".json",_.params.push("secure"),this._makeAPIURL(_,this._customAccessToken||v)},Xe.prototype.normalizeSpriteURL=function(h,v,_,R){var F=Rt(h);return pt(h)?(F.path="/styles/v1"+F.path+"/sprite"+v+_,this._makeAPIURL(F,this._customAccessToken||R)):(F.path+=""+v+_,rr(F))},Xe.prototype.normalizeTileURL=function(h,v){if(this._isSkuTokenExpired()&&this._createSkuToken(),h&&!pt(h))return h;var _=Rt(h);_.path=_.path.replace(/(\.(png|jpg)\d*)(?=$)/,(We.devicePixelRatio>=2||v===512?"@2x":"")+(dt.supported?".webp":"$1")),_.path=_.path.replace(/^.+\/v4\//,"/"),_.path="/v4"+_.path;var R=this._customAccessToken||function(F){for(var z=0,$=F;z<$.length;z+=1){var ue=$[z].match(/^access_token=(.*)$/);if(ue)return ue[1]}return null}(_.params)||Ve.ACCESS_TOKEN;return Ve.REQUIRE_ACCESS_TOKEN&&R&&this._skuToken&&_.params.push("sku="+this._skuToken),this._makeAPIURL(_,R)},Xe.prototype.canonicalizeTileURL=function(h,v){var _=Rt(h);if(!_.path.match(/(^\/v4\/)/)||!_.path.match(/\.[\w]+$/))return h;var R="mapbox://tiles/";R+=_.path.replace("/v4/","");var F=_.params;return v&&(F=F.filter(function(z){return!z.match(/^access_token=/)})),F.length&&(R+="?"+F.join("&")),R},Xe.prototype.canonicalizeTileset=function(h,v){for(var _=!!v&&pt(v),R=[],F=0,z=h.tiles||[];F<z.length;F+=1){var $=z[F];Be($)?R.push(this.canonicalizeTileURL($,_)):R.push($)}return R},Xe.prototype._makeAPIURL=function(h,v){var _="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",R=Rt(Ve.API_URL);if(h.protocol=R.protocol,h.authority=R.authority,h.protocol==="http"){var F=h.params.indexOf("secure");F>=0&&h.params.splice(F,1)}if(R.path!=="/"&&(h.path=""+R.path+h.path),!Ve.REQUIRE_ACCESS_TOKEN)return rr(h);if(!(v=v||Ve.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+_);if(v[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+_);return h.params=h.params.filter(function(z){return z.indexOf("access_token")===-1}),h.params.push("access_token="+v),rr(h)};var Oe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Be(h){return Oe.test(h)}var vt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Rt(h){var v=h.match(vt);if(!v)throw new Error("Unable to parse URL object");return{protocol:v[1],authority:v[2],path:v[3]||"/",params:v[4]?v[4].split("&"):[]}}function rr(h){var v=h.params.length?"?"+h.params.join("&"):"";return h.protocol+"://"+h.authority+h.path+v}function br(h){if(!h)return null;var v=h.split(".");if(!v||v.length!==3)return null;try{return JSON.parse(decodeURIComponent(te.atob(v[1]).split("").map(function(_){return"%"+("00"+_.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(_){return null}}var lt=function(h){this.type=h,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};lt.prototype.getStorageKey=function(h){var v,_=br(Ve.ACCESS_TOKEN);return v=_&&_.u?te.btoa(encodeURIComponent(_.u).replace(/%([0-9A-F]{2})/g,function(R,F){return String.fromCharCode(+("0x"+F))})):Ve.ACCESS_TOKEN||"",h?"mapbox.eventData."+h+":"+v:"mapbox.eventData:"+v},lt.prototype.fetchEventData=function(){var h=oe("localStorage"),v=this.getStorageKey(),_=this.getStorageKey("uuid");if(h)try{var R=te.localStorage.getItem(v);R&&(this.eventData=JSON.parse(R));var F=te.localStorage.getItem(_);F&&(this.anonId=F)}catch(z){He("Unable to read from LocalStorage")}},lt.prototype.saveEventData=function(){var h=oe("localStorage"),v=this.getStorageKey(),_=this.getStorageKey("uuid");if(h)try{te.localStorage.setItem(_,this.anonId),Object.keys(this.eventData).length>=1&&te.localStorage.setItem(v,JSON.stringify(this.eventData))}catch(R){He("Unable to write to LocalStorage")}},lt.prototype.processRequests=function(h){},lt.prototype.postEvent=function(h,v,_,R){var F=this;if(Ve.EVENTS_URL){var z=Rt(Ve.EVENTS_URL);z.params.push("access_token="+(R||Ve.ACCESS_TOKEN||""));var $={event:this.type,created:new Date(h).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Te,userId:this.anonId},ue=v?E($,v):$,Pe={url:rr(z),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ue])};this.pendingRequest=Mt(Pe,function(Qe){F.pendingRequest=null,_(Qe),F.saveEventData(),F.processRequests(R)})}},lt.prototype.queueRequest=function(h,v){this.queue.push(h),this.processRequests(v)};var an,$r,Xr=function(h){function v(){h.call(this,"map.load"),this.success={},this.skuToken=""}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.postMapLoadEvent=function(_,R,F,z){this.skuToken=F;var $=!(!z&&!Ve.ACCESS_TOKEN),ue=Array.isArray(_)&&_.some(function(Pe){return pt(Pe)||Be(Pe)});Ve.EVENTS_URL&&$&&ue&&this.queueRequest({id:R,timestamp:Date.now()},z)},v.prototype.processRequests=function(_){var R=this;if(!this.pendingRequest&&this.queue.length!==0){var F=this.queue.shift(),z=F.id,$=F.timestamp;z&&this.success[z]||(this.anonId||this.fetchEventData(),De(this.anonId)||(this.anonId=ze()),this.postEvent($,{skuToken:this.skuToken},function(ue){ue||z&&(R.success[z]=!0)},_))}},v}(lt),Nt=new(function(h){function v(_){h.call(this,"appUserTurnstile"),this._customAccessToken=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.postTurnstileEvent=function(_,R){Ve.EVENTS_URL&&Ve.ACCESS_TOKEN&&Array.isArray(_)&&_.some(function(F){return pt(F)||Be(F)})&&this.queueRequest(Date.now(),R)},v.prototype.processRequests=function(_){var R=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var F=br(Ve.ACCESS_TOKEN),z=F?F.u:Ve.ACCESS_TOKEN,$=z!==this.eventData.tokenU;De(this.anonId)||(this.anonId=ze(),$=!0);var ue=this.queue.shift();if(this.eventData.lastSuccess){var Pe=new Date(this.eventData.lastSuccess),Qe=new Date(ue),ct=(ue-this.eventData.lastSuccess)/864e5;$=$||ct>=1||ct<-1||Pe.getDate()!==Qe.getDate()}else $=!0;if(!$)return this.processRequests();this.postEvent(ue,{"enabled.telemetry":!1},function(mt){mt||(R.eventData.lastSuccess=ue,R.eventData.tokenU=z)},_)}},v}(lt)),Kt=Nt.postTurnstileEvent.bind(Nt),or=new Xr,kt=or.postMapLoadEvent.bind(or),Jt=500,Er=50;function wr(){te.caches&&!an&&(an=te.caches.open("mapbox-tiles"))}function Br(h){var v=h.indexOf("?");return v<0?h:h.slice(0,v)}var zr,le=1/0;function H(){return zr==null&&(zr=te.OffscreenCanvas&&new te.OffscreenCanvas(1,1).getContext("2d")&&typeof te.createImageBitmap=="function"),zr}var re={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(re);var Ie=function(h){function v(_,R,F){R===401&&Be(F)&&(_+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),h.call(this,_),this.status=R,this.url=F,this.name=this.constructor.name,this.message=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},v}(Error),Ye=ke()?function(){return self.worker&&self.worker.referrer}:function(){return(te.location.protocol==="blob:"?te.parent:te).location.href},Ct,ar,jt=function(h,v){if(!(/^file:/.test(_=h.url)||/^file:/.test(Ye())&&!/^\w+:/.test(_))){if(te.fetch&&te.Request&&te.AbortController&&te.Request.prototype.hasOwnProperty("signal"))return function(R,F){var z,$=new te.AbortController,ue=new te.Request(R.url,{method:R.method||"GET",body:R.body,credentials:R.credentials,headers:R.headers,referrer:Ye(),signal:$.signal}),Pe=!1,Qe=!1,ct=(z=ue.url).indexOf("sku=")>0&&Be(z);R.type==="json"&&ue.headers.set("Accept","application/json");var mt=function(Ut,ur,fr){if(!Qe){if(Ut&&Ut.message!=="SecurityError"&&He(Ut),ur&&fr)return Lt(ur);var Lr=Date.now();te.fetch(ue).then(function(Rr){if(Rr.ok){var Yr=ct?Rr.clone():null;return Lt(Rr,Yr,Lr)}return F(new Ie(Rr.statusText,Rr.status,R.url))}).catch(function(Rr){Rr.code!==20&&F(new Error(Rr.message))})}},Lt=function(Ut,ur,fr){(R.type==="arrayBuffer"?Ut.arrayBuffer():R.type==="json"?Ut.json():Ut.text()).then(function(Lr){Qe||(ur&&fr&&function(Rr,Yr,nn){if(wr(),an){var gn={status:Yr.status,statusText:Yr.statusText,headers:new te.Headers};Yr.headers.forEach(function(Dn,pi){return gn.headers.set(pi,Dn)});var wn=qe(Yr.headers.get("Cache-Control")||"");wn["no-store"]||(wn["max-age"]&&gn.headers.set("Expires",new Date(nn+1e3*wn["max-age"]).toUTCString()),new Date(gn.headers.get("Expires")).getTime()-nn<42e4||function(Dn,pi){if($r===void 0)try{new Response(new ReadableStream),$r=!0}catch(wi){$r=!1}$r?pi(Dn.body):Dn.blob().then(pi)}(Yr,function(Dn){var pi=new te.Response(Dn,gn);wr(),an&&an.then(function(wi){return wi.put(Br(Rr.url),pi)}).catch(function(wi){return He(wi.message)})}))}}(ue,ur,fr),Pe=!0,F(null,Lr,Ut.headers.get("Cache-Control"),Ut.headers.get("Expires")))}).catch(function(Lr){Qe||F(new Error(Lr.message))})};return ct?function(Ut,ur){if(wr(),!an)return ur(null);var fr=Br(Ut.url);an.then(function(Lr){Lr.match(fr).then(function(Rr){var Yr=function(nn){if(!nn)return!1;var gn=new Date(nn.headers.get("Expires")||0),wn=qe(nn.headers.get("Cache-Control")||"");return gn>Date.now()&&!wn["no-cache"]}(Rr);Lr.delete(fr),Yr&&Lr.put(fr,Rr.clone()),ur(null,Rr,Yr)}).catch(ur)}).catch(ur)}(ue,mt):mt(null,null),{cancel:function(){Qe=!0,Pe||$.abort()}}}(h,v);if(ke()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,v,void 0,!0)}var _;return function(R,F){var z=new te.XMLHttpRequest;for(var $ in z.open(R.method||"GET",R.url,!0),R.type==="arrayBuffer"&&(z.responseType="arraybuffer"),R.headers)z.setRequestHeader($,R.headers[$]);return R.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=R.credentials==="include",z.onerror=function(){F(new Error(z.statusText))},z.onload=function(){if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){var ue=z.response;if(R.type==="json")try{ue=JSON.parse(z.response)}catch(Pe){return F(Pe)}F(null,ue,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else F(new Ie(z.statusText,z.status,R.url))},z.send(R.body),{cancel:function(){return z.abort()}}}(h,v)},wt=function(h,v){return jt(E(h,{type:"arrayBuffer"}),v)},Mt=function(h,v){return jt(E(h,{method:"POST"}),v)},ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ct=[],ar=0;var he=function(h,v){if(dt.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*"),ar>=Ve.MAX_PARALLEL_IMAGE_REQUESTS){var _={requestParameters:h,callback:v,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ct.push(_),_}ar++;var R=!1,F=function(){if(!R)for(R=!0,ar--;Ct.length&&ar<Ve.MAX_PARALLEL_IMAGE_REQUESTS;){var $=Ct.shift();$.cancelled||($.cancel=he($.requestParameters,$.callback).cancel)}},z=wt(h,function($,ue,Pe,Qe){F(),$?v($):ue&&(H()?function(ct,mt){var Lt=new te.Blob([new Uint8Array(ct)],{type:"image/png"});te.createImageBitmap(Lt).then(function(Ut){mt(null,Ut)}).catch(function(Ut){mt(new Error("Could not load image because of "+Ut.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(ue,v):function(ct,mt,Lt,Ut){var ur=new te.Image,fr=te.URL;ur.onload=function(){mt(null,ur),fr.revokeObjectURL(ur.src),ur.onload=null,te.requestAnimationFrame(function(){ur.src=ve})},ur.onerror=function(){return mt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Lr=new te.Blob([new Uint8Array(ct)],{type:"image/png"});ur.cacheControl=Lt,ur.expires=Ut,ur.src=ct.byteLength?fr.createObjectURL(Lr):ve}(ue,v,Pe,Qe))});return{cancel:function(){z.cancel(),F()}}};function Re(h,v,_){_[h]&&_[h].indexOf(v)!==-1||(_[h]=_[h]||[],_[h].push(v))}function tt(h,v,_){if(_&&_[h]){var R=_[h].indexOf(v);R!==-1&&_[h].splice(R,1)}}var St=function(h,v){v===void 0&&(v={}),E(this,v),this.type=h},Gt=function(h){function v(_,R){R===void 0&&(R={}),h.call(this,"error",E({error:_},R))}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(St),gr=function(){};gr.prototype.on=function(h,v){return this._listeners=this._listeners||{},Re(h,v,this._listeners),this},gr.prototype.off=function(h,v){return tt(h,v,this._listeners),tt(h,v,this._oneTimeListeners),this},gr.prototype.once=function(h,v){return this._oneTimeListeners=this._oneTimeListeners||{},Re(h,v,this._oneTimeListeners),this},gr.prototype.fire=function(h,v){typeof h=="string"&&(h=new St(h,v||{}));var _=h.type;if(this.listens(_)){h.target=this;for(var R=0,F=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];R<F.length;R+=1)F[R].call(this,h);for(var z=0,$=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];z<$.length;z+=1){var ue=$[z];tt(_,ue,this._oneTimeListeners),ue.call(this,h)}var Pe=this._eventedParent;Pe&&(E(h,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Pe.fire(h))}else h instanceof Gt&&console.error(h.error);return this},gr.prototype.listens=function(h){return this._listeners&&this._listeners[h]&&this._listeners[h].length>0||this._oneTimeListeners&&this._oneTimeListeners[h]&&this._oneTimeListeners[h].length>0||this._eventedParent&&this._eventedParent.listens(h)},gr.prototype.setEventedParent=function(h,v){return this._eventedParent=h,this._eventedParentData=v,this};var At={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},st=function(h,v,_,R){this.message=(h?h+": ":"")+_,R&&(this.identifier=R),v!=null&&v.__line__&&(this.line=v.__line__)};function Pt(h){var v=h.value;return v?[new st(h.key,v,"constants have been deprecated as of v8")]:[]}function yr(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];for(var R=0,F=v;R<F.length;R+=1){var z=F[R];for(var $ in z)h[$]=z[$]}return h}function Fr(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Ft(h){if(Array.isArray(h))return h.map(Ft);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){var v={};for(var _ in h)v[_]=Ft(h[_]);return v}return Fr(h)}var Mn=function(h){function v(_,R){h.call(this,R),this.message=R,this.key=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(Error),ei=function(h,v){v===void 0&&(v=[]),this.parent=h,this.bindings={};for(var _=0,R=v;_<R.length;_+=1){var F=R[_];this.bindings[F[0]]=F[1]}};ei.prototype.concat=function(h){return new ei(this,h)},ei.prototype.get=function(h){if(this.bindings[h])return this.bindings[h];if(this.parent)return this.parent.get(h);throw new Error(h+" not found in scope.")},ei.prototype.has=function(h){return!!this.bindings[h]||!!this.parent&&this.parent.has(h)};var ni={kind:"null"},un={kind:"number"},Xn={kind:"string"},Wn={kind:"boolean"},Jn={kind:"color"},sa={kind:"object"},vi={kind:"value"},ga={kind:"collator"},Ra={kind:"formatted"},ya={kind:"resolvedImage"};function ja(h,v){return{kind:"array",itemType:h,N:v}}function ba(h){if(h.kind==="array"){var v=ba(h.itemType);return typeof h.N=="number"?"array<"+v+", "+h.N+">":h.itemType.kind==="value"?"array":"array<"+v+">"}return h.kind}var gs=[ni,un,Xn,Wn,Jn,Ra,sa,ja(vi),ya];function co(h,v){if(v.kind==="error")return null;if(h.kind==="array"){if(v.kind==="array"&&(v.N===0&&v.itemType.kind==="value"||!co(h.itemType,v.itemType))&&(typeof h.N!="number"||h.N===v.N))return null}else{if(h.kind===v.kind)return null;if(h.kind==="value"){for(var _=0,R=gs;_<R.length;_+=1)if(!co(R[_],v))return null}}return"Expected "+ba(h)+" but found "+ba(v)+" instead."}function Io(h,v){return v.some(function(_){return _.kind===h.kind})}function oi(h,v){return v.some(function(_){return _==="null"?h===null:_==="array"?Array.isArray(h):_==="object"?h&&!Array.isArray(h)&&typeof h=="object":_===typeof h})}var Si=G(function(h,v){var _={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function R(ue){return(ue=Math.round(ue))<0?0:ue>255?255:ue}function F(ue){return R(ue[ue.length-1]==="%"?parseFloat(ue)/100*255:parseInt(ue))}function z(ue){return(Pe=ue[ue.length-1]==="%"?parseFloat(ue)/100:parseFloat(ue))<0?0:Pe>1?1:Pe;var Pe}function $(ue,Pe,Qe){return Qe<0?Qe+=1:Qe>1&&(Qe-=1),6*Qe<1?ue+(Pe-ue)*Qe*6:2*Qe<1?Pe:3*Qe<2?ue+(Pe-ue)*(2/3-Qe)*6:ue}try{v.parseCSSColor=function(ue){var Pe,Qe=ue.replace(/ /g,"").toLowerCase();if(Qe in _)return _[Qe].slice();if(Qe[0]==="#")return Qe.length===4?(Pe=parseInt(Qe.substr(1),16))>=0&&Pe<=4095?[(3840&Pe)>>4|(3840&Pe)>>8,240&Pe|(240&Pe)>>4,15&Pe|(15&Pe)<<4,1]:null:Qe.length===7&&(Pe=parseInt(Qe.substr(1),16))>=0&&Pe<=16777215?[(16711680&Pe)>>16,(65280&Pe)>>8,255&Pe,1]:null;var ct=Qe.indexOf("("),mt=Qe.indexOf(")");if(ct!==-1&&mt+1===Qe.length){var Lt=Qe.substr(0,ct),Ut=Qe.substr(ct+1,mt-(ct+1)).split(","),ur=1;switch(Lt){case"rgba":if(Ut.length!==4)return null;ur=z(Ut.pop());case"rgb":return Ut.length!==3?null:[F(Ut[0]),F(Ut[1]),F(Ut[2]),ur];case"hsla":if(Ut.length!==4)return null;ur=z(Ut.pop());case"hsl":if(Ut.length!==3)return null;var fr=(parseFloat(Ut[0])%360+360)%360/360,Lr=z(Ut[1]),Rr=z(Ut[2]),Yr=Rr<=.5?Rr*(Lr+1):Rr+Lr-Rr*Lr,nn=2*Rr-Yr;return[R(255*$(nn,Yr,fr+1/3)),R(255*$(nn,Yr,fr)),R(255*$(nn,Yr,fr-1/3)),ur];default:return null}}return null}}catch(ue){}}).parseCSSColor,Qi=function(h,v,_,R){R===void 0&&(R=1),this.r=h,this.g=v,this.b=_,this.a=R};Qi.parse=function(h){if(h){if(h instanceof Qi)return h;if(typeof h=="string"){var v=Si(h);if(v)return new Qi(v[0]/255*v[3],v[1]/255*v[3],v[2]/255*v[3],v[3])}}},Qi.prototype.toString=function(){var h=this.toArray(),v=h[1],_=h[2],R=h[3];return"rgba("+Math.round(h[0])+","+Math.round(v)+","+Math.round(_)+","+R+")"},Qi.prototype.toArray=function(){var h=this.a;return h===0?[0,0,0,0]:[255*this.r/h,255*this.g/h,255*this.b/h,h]},Qi.black=new Qi(0,0,0,1),Qi.white=new Qi(1,1,1,1),Qi.transparent=new Qi(0,0,0,0),Qi.red=new Qi(1,0,0,1);var Wa=function(h,v,_){this.sensitivity=h?v?"variant":"case":v?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Wa.prototype.compare=function(h,v){return this.collator.compare(h,v)},Wa.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ms=function(h,v,_,R,F){this.text=h,this.image=v,this.scale=_,this.fontStack=R,this.textColor=F},ho=function(h){this.sections=h};ho.fromString=function(h){return new ho([new ms(h,null,null,null,null)])},ho.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(h){return h.text.length!==0||h.image&&h.image.name.length!==0})},ho.factory=function(h){return h instanceof ho?h:ho.fromString(h)},ho.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(h){return h.text}).join("")},ho.prototype.serialize=function(){for(var h=["format"],v=0,_=this.sections;v<_.length;v+=1){var R=_[v];if(R.image)h.push(["image",R.image.name]);else{h.push(R.text);var F={};R.fontStack&&(F["text-font"]=["literal",R.fontStack.split(",")]),R.scale&&(F["font-scale"]=R.scale),R.textColor&&(F["text-color"]=["rgba"].concat(R.textColor.toArray())),h.push(F)}}return h};var Po=function(h){this.name=h.name,this.available=h.available};function cr(h,v,_,R){return typeof h=="number"&&h>=0&&h<=255&&typeof v=="number"&&v>=0&&v<=255&&typeof _=="number"&&_>=0&&_<=255?R===void 0||typeof R=="number"&&R>=0&&R<=1?null:"Invalid rgba value ["+[h,v,_,R].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof R=="number"?[h,v,_,R]:[h,v,_]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ot(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Qi||h instanceof Wa||h instanceof ho||h instanceof Po)return!0;if(Array.isArray(h)){for(var v=0,_=h;v<_.length;v+=1)if(!Ot(_[v]))return!1;return!0}if(typeof h=="object"){for(var R in h)if(!Ot(h[R]))return!1;return!0}return!1}function qt(h){if(h===null)return ni;if(typeof h=="string")return Xn;if(typeof h=="boolean")return Wn;if(typeof h=="number")return un;if(h instanceof Qi)return Jn;if(h instanceof Wa)return ga;if(h instanceof ho)return Ra;if(h instanceof Po)return ya;if(Array.isArray(h)){for(var v,_=h.length,R=0,F=h;R<F.length;R+=1){var z=qt(F[R]);if(v){if(v===z)continue;v=vi;break}v=z}return ja(v||vi,_)}return sa}function Mr(h){var v=typeof h;return h===null?"":v==="string"||v==="number"||v==="boolean"?String(h):h instanceof Qi||h instanceof ho||h instanceof Po?h.toString():JSON.stringify(h)}Po.prototype.toString=function(){return this.name},Po.fromString=function(h){return h?new Po({name:h,available:!1}):null},Po.prototype.serialize=function(){return["image",this.name]};var rn=function(h,v){this.type=h,this.value=v};rn.parse=function(h,v){if(h.length!==2)return v.error("'literal' expression requires exactly one argument, but found "+(h.length-1)+" instead.");if(!Ot(h[1]))return v.error("invalid value");var _=h[1],R=qt(_),F=v.expectedType;return R.kind!=="array"||R.N!==0||!F||F.kind!=="array"||typeof F.N=="number"&&F.N!==0||(R=F),new rn(R,_)},rn.prototype.evaluate=function(){return this.value},rn.prototype.eachChild=function(){},rn.prototype.outputDefined=function(){return!0},rn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Qi?["rgba"].concat(this.value.toArray()):this.value instanceof ho?this.value.serialize():this.value};var Pn=function(h){this.name="ExpressionEvaluationError",this.message=h};Pn.prototype.toJSON=function(){return this.message};var Bn={string:Xn,number:un,boolean:Wn,object:sa},Cn=function(h,v){this.type=h,this.args=v};Cn.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _,R=1,F=h[0];if(F==="array"){var z,$;if(h.length>2){var ue=h[1];if(typeof ue!="string"||!(ue in Bn)||ue==="object")return v.error('The item type argument of "array" must be one of string, number, boolean',1);z=Bn[ue],R++}else z=vi;if(h.length>3){if(h[2]!==null&&(typeof h[2]!="number"||h[2]<0||h[2]!==Math.floor(h[2])))return v.error('The length argument to "array" must be a positive integer literal',2);$=h[2],R++}_=ja(z,$)}else _=Bn[F];for(var Pe=[];R<h.length;R++){var Qe=v.parse(h[R],R,vi);if(!Qe)return null;Pe.push(Qe)}return new Cn(_,Pe)},Cn.prototype.evaluate=function(h){for(var v=0;v<this.args.length;v++){var _=this.args[v].evaluate(h);if(!co(this.type,qt(_)))return _;if(v===this.args.length-1)throw new Pn("Expected value to be of type "+ba(this.type)+", but found "+ba(qt(_))+" instead.")}return null},Cn.prototype.eachChild=function(h){this.args.forEach(h)},Cn.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},Cn.prototype.serialize=function(){var h=this.type,v=[h.kind];if(h.kind==="array"){var _=h.itemType;if(_.kind==="string"||_.kind==="number"||_.kind==="boolean"){v.push(_.kind);var R=h.N;(typeof R=="number"||this.args.length>1)&&v.push(R)}}return v.concat(this.args.map(function(F){return F.serialize()}))};var Mi=function(h){this.type=Ra,this.sections=h};Mi.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _=h[1];if(!Array.isArray(_)&&typeof _=="object")return v.error("First argument must be an image or text section.");for(var R=[],F=!1,z=1;z<=h.length-1;++z){var $=h[z];if(F&&typeof $=="object"&&!Array.isArray($)){F=!1;var ue=null;if($["font-scale"]&&!(ue=v.parse($["font-scale"],1,un)))return null;var Pe=null;if($["text-font"]&&!(Pe=v.parse($["text-font"],1,ja(Xn))))return null;var Qe=null;if($["text-color"]&&!(Qe=v.parse($["text-color"],1,Jn)))return null;var ct=R[R.length-1];ct.scale=ue,ct.font=Pe,ct.textColor=Qe}else{var mt=v.parse(h[z],1,vi);if(!mt)return null;var Lt=mt.type.kind;if(Lt!=="string"&&Lt!=="value"&&Lt!=="null"&&Lt!=="resolvedImage")return v.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");F=!0,R.push({content:mt,scale:null,font:null,textColor:null})}}return new Mi(R)},Mi.prototype.evaluate=function(h){return new ho(this.sections.map(function(v){var _=v.content.evaluate(h);return qt(_)===ya?new ms("",_,null,null,null):new ms(Mr(_),null,v.scale?v.scale.evaluate(h):null,v.font?v.font.evaluate(h).join(","):null,v.textColor?v.textColor.evaluate(h):null)}))},Mi.prototype.eachChild=function(h){for(var v=0,_=this.sections;v<_.length;v+=1){var R=_[v];h(R.content),R.scale&&h(R.scale),R.font&&h(R.font),R.textColor&&h(R.textColor)}},Mi.prototype.outputDefined=function(){return!1},Mi.prototype.serialize=function(){for(var h=["format"],v=0,_=this.sections;v<_.length;v+=1){var R=_[v];h.push(R.content.serialize());var F={};R.scale&&(F["font-scale"]=R.scale.serialize()),R.font&&(F["text-font"]=R.font.serialize()),R.textColor&&(F["text-color"]=R.textColor.serialize()),h.push(F)}return h};var Xi=function(h){this.type=ya,this.input=h};Xi.parse=function(h,v){if(h.length!==2)return v.error("Expected two arguments.");var _=v.parse(h[1],1,Xn);return _?new Xi(_):v.error("No image name provided.")},Xi.prototype.evaluate=function(h){var v=this.input.evaluate(h),_=Po.fromString(v);return _&&h.availableImages&&(_.available=h.availableImages.indexOf(v)>-1),_},Xi.prototype.eachChild=function(h){h(this.input)},Xi.prototype.outputDefined=function(){return!1},Xi.prototype.serialize=function(){return["image",this.input.serialize()]};var Wo={"to-boolean":Wn,"to-color":Jn,"to-number":un,"to-string":Xn},os=function(h,v){this.type=h,this.args=v};os.parse=function(h,v){if(h.length<2)return v.error("Expected at least one argument.");var _=h[0];if((_==="to-boolean"||_==="to-string")&&h.length!==2)return v.error("Expected one argument.");for(var R=Wo[_],F=[],z=1;z<h.length;z++){var $=v.parse(h[z],z,vi);if(!$)return null;F.push($)}return new os(R,F)},os.prototype.evaluate=function(h){if(this.type.kind==="boolean")return!!this.args[0].evaluate(h);if(this.type.kind==="color"){for(var v,_,R=0,F=this.args;R<F.length;R+=1){if(_=null,(v=F[R].evaluate(h))instanceof Qi)return v;if(typeof v=="string"){var z=h.parseColor(v);if(z)return z}else if(Array.isArray(v)&&!(_=v.length<3||v.length>4?"Invalid rbga value "+JSON.stringify(v)+": expected an array containing either three or four numeric values.":cr(v[0],v[1],v[2],v[3])))return new Qi(v[0]/255,v[1]/255,v[2]/255,v[3])}throw new Pn(_||"Could not parse color from value '"+(typeof v=="string"?v:String(JSON.stringify(v)))+"'")}if(this.type.kind==="number"){for(var $=null,ue=0,Pe=this.args;ue<Pe.length;ue+=1){if(($=Pe[ue].evaluate(h))===null)return 0;var Qe=Number($);if(!isNaN(Qe))return Qe}throw new Pn("Could not convert "+JSON.stringify($)+" to number.")}return this.type.kind==="formatted"?ho.fromString(Mr(this.args[0].evaluate(h))):this.type.kind==="resolvedImage"?Po.fromString(Mr(this.args[0].evaluate(h))):Mr(this.args[0].evaluate(h))},os.prototype.eachChild=function(h){this.args.forEach(h)},os.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},os.prototype.serialize=function(){if(this.type.kind==="formatted")return new Mi([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Xi(this.args[0]).serialize();var h=["to-"+this.type.kind];return this.eachChild(function(v){h.push(v.serialize())}),h};var Su=["Unknown","Point","LineString","Polygon"],Oo=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Oo.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Oo.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Su[this.feature.type]:this.feature.type:null},Oo.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Oo.prototype.canonicalID=function(){return this.canonical},Oo.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Oo.prototype.parseColor=function(h){var v=this._parseColorCache[h];return v||(v=this._parseColorCache[h]=Qi.parse(h)),v};var ro=function(h,v,_,R){this.name=h,this.type=v,this._evaluate=_,this.args=R};ro.prototype.evaluate=function(h){return this._evaluate(h,this.args)},ro.prototype.eachChild=function(h){this.args.forEach(h)},ro.prototype.outputDefined=function(){return!1},ro.prototype.serialize=function(){return[this.name].concat(this.args.map(function(h){return h.serialize()}))},ro.parse=function(h,v){var _,R=h[0],F=ro.definitions[R];if(!F)return v.error('Unknown expression "'+R+'". If you wanted a literal array, use ["literal", [...]].',0);for(var z=Array.isArray(F)?F[0]:F.type,$=Array.isArray(F)?[[F[1],F[2]]]:F.overloads,ue=$.filter(function(oa){var Oi=oa[0];return!Array.isArray(Oi)||Oi.length===h.length-1}),Pe=null,Qe=0,ct=ue;Qe<ct.length;Qe+=1){var mt=ct[Qe],Lt=mt[0],Ut=mt[1];Pe=new yo(v.registry,v.path,null,v.scope);for(var ur=[],fr=!1,Lr=1;Lr<h.length;Lr++){var Rr=h[Lr],Yr=Array.isArray(Lt)?Lt[Lr-1]:Lt.type,nn=Pe.parse(Rr,1+ur.length,Yr);if(!nn){fr=!0;break}ur.push(nn)}if(!fr)if(Array.isArray(Lt)&&Lt.length!==ur.length)Pe.error("Expected "+Lt.length+" arguments, but found "+ur.length+" instead.");else{for(var gn=0;gn<ur.length;gn++){var wn=Array.isArray(Lt)?Lt[gn]:Lt.type,Dn=ur[gn];Pe.concat(gn+1).checkSubtype(wn,Dn.type)}if(Pe.errors.length===0)return new ro(R,z,Ut,ur)}}if(ue.length===1)(_=v.errors).push.apply(_,Pe.errors);else{for(var pi=(ue.length?ue:$).map(function(oa){var Oi;return Oi=oa[0],Array.isArray(Oi)?"("+Oi.map(ba).join(", ")+")":"("+ba(Oi.type)+"...)"}).join(" | "),wi=[],qi=1;qi<h.length;qi++){var Di=v.parse(h[qi],1+wi.length);if(!Di)return null;wi.push(ba(Di.type))}v.error("Expected arguments of type "+pi+", but found ("+wi.join(", ")+") instead.")}return null},ro.register=function(h,v){for(var _ in ro.definitions=v,v)h[_]=ro};var cu=function(h,v,_){this.type=ga,this.locale=_,this.caseSensitive=h,this.diacriticSensitive=v};function Qo(h,v){h[0]=Math.min(h[0],v[0]),h[1]=Math.min(h[1],v[1]),h[2]=Math.max(h[2],v[0]),h[3]=Math.max(h[3],v[1])}function Zt(h,v){return!(h[0]<=v[0]||h[2]>=v[2]||h[1]<=v[1]||h[3]>=v[3])}function er(h,v){var _=(180+h[0])/360,R=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,F=Math.pow(2,v.z);return[Math.round(_*F*8192),Math.round(R*F*8192)]}function Ur(h,v,_){return v[1]>h[1]!=_[1]>h[1]&&h[0]<(_[0]-v[0])*(h[1]-v[1])/(_[1]-v[1])+v[0]}function An(h,v){for(var _,R,F,z,$,ue,Pe,Qe=!1,ct=0,mt=v.length;ct<mt;ct++)for(var Lt=v[ct],Ut=0,ur=Lt.length;Ut<ur-1;Ut++){if((z=(_=h)[0]-(R=Lt[Ut])[0])*(Pe=_[1]-(F=Lt[Ut+1])[1])-(ue=_[0]-F[0])*($=_[1]-R[1])==0&&z*ue<=0&&$*Pe<=0)return!1;Ur(h,Lt[Ut],Lt[Ut+1])&&(Qe=!Qe)}return Qe}function fi(h,v){for(var _=0;_<v.length;_++)if(An(h,v[_]))return!0;return!1}function Vi(h,v,_,R){var F=R[0]-_[0],z=R[1]-_[1],$=(h[0]-_[0])*z-F*(h[1]-_[1]),ue=(v[0]-_[0])*z-F*(v[1]-_[1]);return $>0&&ue<0||$<0&&ue>0}function fo(h,v,_){for(var R=0,F=_;R<F.length;R+=1)for(var z=F[R],$=0;$<z.length-1;++$)if((mt=[(ct=z[$+1])[0]-(Qe=z[$])[0],ct[1]-Qe[1]])[0]*(Lt=[(Pe=v)[0]-(ue=h)[0],Pe[1]-ue[1]])[1]-mt[1]*Lt[0]!=0&&Vi(ue,Pe,Qe,ct)&&Vi(Qe,ct,ue,Pe))return!0;var ue,Pe,Qe,ct,mt,Lt;return!1}function Ws(h,v){for(var _=0;_<h.length;++_)if(!An(h[_],v))return!1;for(var R=0;R<h.length-1;++R)if(fo(h[R],h[R+1],v))return!1;return!0}function Co(h,v){for(var _=0;_<v.length;_++)if(Ws(h,v[_]))return!0;return!1}function ko(h,v,_){for(var R=[],F=0;F<h.length;F++){for(var z=[],$=0;$<h[F].length;$++){var ue=er(h[F][$],_);Qo(v,ue),z.push(ue)}R.push(z)}return R}function ju(h,v,_){for(var R=[],F=0;F<h.length;F++){var z=ko(h[F],v,_);R.push(z)}return R}function hf(h,v,_,R){if(h[0]<_[0]||h[0]>_[2]){var F=.5*R,z=h[0]-_[0]>F?-R:_[0]-h[0]>F?R:0;z===0&&(z=h[0]-_[2]>F?-R:_[2]-h[0]>F?R:0),h[0]+=z}Qo(v,h)}function Qf(h,v,_,R){for(var F=8192*Math.pow(2,R.z),z=[8192*R.x,8192*R.y],$=[],ue=0,Pe=h;ue<Pe.length;ue+=1)for(var Qe=0,ct=Pe[ue];Qe<ct.length;Qe+=1){var mt=ct[Qe],Lt=[mt.x+z[0],mt.y+z[1]];hf(Lt,v,_,F),$.push(Lt)}return $}function Jf(h,v,_,R){for(var F,z=8192*Math.pow(2,R.z),$=[8192*R.x,8192*R.y],ue=[],Pe=0,Qe=h;Pe<Qe.length;Pe+=1){for(var ct=[],mt=0,Lt=Qe[Pe];mt<Lt.length;mt+=1){var Ut=Lt[mt],ur=[Ut.x+$[0],Ut.y+$[1]];Qo(v,ur),ct.push(ur)}ue.push(ct)}if(v[2]-v[0]<=z/2){(F=v)[0]=F[1]=1/0,F[2]=F[3]=-1/0;for(var fr=0,Lr=ue;fr<Lr.length;fr+=1)for(var Rr=0,Yr=Lr[fr];Rr<Yr.length;Rr+=1)hf(Yr[Rr],v,_,z)}return ue}cu.parse=function(h,v){if(h.length!==2)return v.error("Expected one argument.");var _=h[1];if(typeof _!="object"||Array.isArray(_))return v.error("Collator options argument must be an object.");var R=v.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,Wn);if(!R)return null;var F=v.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,Wn);if(!F)return null;var z=null;return _.locale&&!(z=v.parse(_.locale,1,Xn))?null:new cu(R,F,z)},cu.prototype.evaluate=function(h){return new Wa(this.caseSensitive.evaluate(h),this.diacriticSensitive.evaluate(h),this.locale?this.locale.evaluate(h):null)},cu.prototype.eachChild=function(h){h(this.caseSensitive),h(this.diacriticSensitive),this.locale&&h(this.locale)},cu.prototype.outputDefined=function(){return!1},cu.prototype.serialize=function(){var h={};return h["case-sensitive"]=this.caseSensitive.serialize(),h["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(h.locale=this.locale.serialize()),["collator",h]};var fu=function(h,v){this.type=Wn,this.geojson=h,this.geometries=v};function cc(h){if(h instanceof ro&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof fu)return!1;var v=!0;return h.eachChild(function(_){v&&!cc(_)&&(v=!1)}),v}function ru(h){if(h instanceof ro&&h.name==="feature-state")return!1;var v=!0;return h.eachChild(function(_){v&&!ru(_)&&(v=!1)}),v}function Al(h,v){if(h instanceof ro&&v.indexOf(h.name)>=0)return!1;var _=!0;return h.eachChild(function(R){_&&!Al(R,v)&&(_=!1)}),_}fu.parse=function(h,v){if(h.length!==2)return v.error("'within' expression requires exactly one argument, but found "+(h.length-1)+" instead.");if(Ot(h[1])){var _=h[1];if(_.type==="FeatureCollection")for(var R=0;R<_.features.length;++R){var F=_.features[R].geometry.type;if(F==="Polygon"||F==="MultiPolygon")return new fu(_,_.features[R].geometry)}else if(_.type==="Feature"){var z=_.geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new fu(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new fu(_,_)}return v.error("'within' expression requires valid geojson object that contains polygon geometry type.")},fu.prototype.evaluate=function(h){if(h.geometry()!=null&&h.canonicalID()!=null){if(h.geometryType()==="Point")return function(v,_){var R=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],z=v.canonicalID();if(_.type==="Polygon"){var $=ko(_.coordinates,F,z),ue=Qf(v.geometry(),R,F,z);if(!Zt(R,F))return!1;for(var Pe=0,Qe=ue;Pe<Qe.length;Pe+=1)if(!An(Qe[Pe],$))return!1}if(_.type==="MultiPolygon"){var ct=ju(_.coordinates,F,z),mt=Qf(v.geometry(),R,F,z);if(!Zt(R,F))return!1;for(var Lt=0,Ut=mt;Lt<Ut.length;Lt+=1)if(!fi(Ut[Lt],ct))return!1}return!0}(h,this.geometries);if(h.geometryType()==="LineString")return function(v,_){var R=[1/0,1/0,-1/0,-1/0],F=[1/0,1/0,-1/0,-1/0],z=v.canonicalID();if(_.type==="Polygon"){var $=ko(_.coordinates,F,z),ue=Jf(v.geometry(),R,F,z);if(!Zt(R,F))return!1;for(var Pe=0,Qe=ue;Pe<Qe.length;Pe+=1)if(!Ws(Qe[Pe],$))return!1}if(_.type==="MultiPolygon"){var ct=ju(_.coordinates,F,z),mt=Jf(v.geometry(),R,F,z);if(!Zt(R,F))return!1;for(var Lt=0,Ut=mt;Lt<Ut.length;Lt+=1)if(!Co(Ut[Lt],ct))return!1}return!0}(h,this.geometries)}return!1},fu.prototype.eachChild=function(){},fu.prototype.outputDefined=function(){return!0},fu.prototype.serialize=function(){return["within",this.geojson]};var fc=function(h,v){this.type=v.type,this.name=h,this.boundExpression=v};fc.parse=function(h,v){if(h.length!==2||typeof h[1]!="string")return v.error("'var' expression requires exactly one string literal argument.");var _=h[1];return v.scope.has(_)?new fc(_,v.scope.get(_)):v.error('Unknown variable "'+_+'". Make sure "'+_+'" has been bound in an enclosing "let" expression before using it.',1)},fc.prototype.evaluate=function(h){return this.boundExpression.evaluate(h)},fc.prototype.eachChild=function(){},fc.prototype.outputDefined=function(){return!1},fc.prototype.serialize=function(){return["var",this.name]};var yo=function(h,v,_,R,F){v===void 0&&(v=[]),R===void 0&&(R=new ei),F===void 0&&(F=[]),this.registry=h,this.path=v,this.key=v.map(function(z){return"["+z+"]"}).join(""),this.scope=R,this.errors=F,this.expectedType=_};function Jl(h,v){for(var _,R=h.length-1,F=0,z=R,$=0;F<=z;)if((_=h[$=Math.floor((F+z)/2)])<=v){if($===R||v<h[$+1])return $;F=$+1}else{if(!(_>v))throw new Pn("Input is not a number.");z=$-1}return 0}yo.prototype.parse=function(h,v,_,R,F){return F===void 0&&(F={}),v?this.concat(v,_,R)._parse(h,F):this._parse(h,F)},yo.prototype._parse=function(h,v){function _(Qe,ct,mt){return mt==="assert"?new Cn(ct,[Qe]):mt==="coerce"?new os(ct,[Qe]):Qe}if(h!==null&&typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"||(h=["literal",h]),Array.isArray(h)){if(h.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var R=h[0];if(typeof R!="string")return this.error("Expression name must be a string, but found "+typeof R+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var F=this.registry[R];if(F){var z=F.parse(h,this);if(!z)return null;if(this.expectedType){var $=this.expectedType,ue=z.type;if($.kind!=="string"&&$.kind!=="number"&&$.kind!=="boolean"&&$.kind!=="object"&&$.kind!=="array"||ue.kind!=="value")if($.kind!=="color"&&$.kind!=="formatted"&&$.kind!=="resolvedImage"||ue.kind!=="value"&&ue.kind!=="string"){if(this.checkSubtype($,ue))return null}else z=_(z,$,v.typeAnnotation||"coerce");else z=_(z,$,v.typeAnnotation||"assert")}if(!(z instanceof rn)&&z.type.kind!=="resolvedImage"&&function Qe(ct){if(ct instanceof fc)return Qe(ct.boundExpression);if(ct instanceof ro&&ct.name==="error"||ct instanceof cu||ct instanceof fu)return!1;var mt=ct instanceof os||ct instanceof Cn,Lt=!0;return ct.eachChild(function(Ut){Lt=mt?Lt&&Qe(Ut):Lt&&Ut instanceof rn}),!!Lt&&cc(ct)&&Al(ct,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(z)){var Pe=new Oo;try{z=new rn(z.type,z.evaluate(Pe))}catch(Qe){return this.error(Qe.message),null}}return z}return this.error('Unknown expression "'+R+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(h===void 0?"'undefined' value invalid. Use null instead.":typeof h=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof h+" instead.")},yo.prototype.concat=function(h,v,_){var R=typeof h=="number"?this.path.concat(h):this.path,F=_?this.scope.concat(_):this.scope;return new yo(this.registry,R,v||null,F,this.errors)},yo.prototype.error=function(h){for(var v=[],_=arguments.length-1;_-- >0;)v[_]=arguments[_+1];var R=""+this.key+v.map(function(F){return"["+F+"]"}).join("");this.errors.push(new Mn(R,h))},yo.prototype.checkSubtype=function(h,v){var _=co(h,v);return _&&this.error(_),_};var As=function(h,v,_){this.type=h,this.input=v,this.labels=[],this.outputs=[];for(var R=0,F=_;R<F.length;R+=1){var z=F[R],$=z[1];this.labels.push(z[0]),this.outputs.push($)}};function Ts(h,v,_){return h*(1-_)+v*_}As.parse=function(h,v){if(h.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if((h.length-1)%2!=0)return v.error("Expected an even number of arguments.");var _=v.parse(h[1],1,un);if(!_)return null;var R=[],F=null;v.expectedType&&v.expectedType.kind!=="value"&&(F=v.expectedType);for(var z=1;z<h.length;z+=2){var $=z===1?-1/0:h[z],ue=h[z+1],Pe=z,Qe=z+1;if(typeof $!="number")return v.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Pe);if(R.length&&R[R.length-1][0]>=$)return v.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Pe);var ct=v.parse(ue,Qe,F);if(!ct)return null;F=F||ct.type,R.push([$,ct])}return new As(F,_,R)},As.prototype.evaluate=function(h){var v=this.labels,_=this.outputs;if(v.length===1)return _[0].evaluate(h);var R=this.input.evaluate(h);if(R<=v[0])return _[0].evaluate(h);var F=v.length;return R>=v[F-1]?_[F-1].evaluate(h):_[Jl(v,R)].evaluate(h)},As.prototype.eachChild=function(h){h(this.input);for(var v=0,_=this.outputs;v<_.length;v+=1)h(_[v])},As.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})},As.prototype.serialize=function(){for(var h=["step",this.input.serialize()],v=0;v<this.labels.length;v++)v>0&&h.push(this.labels[v]),h.push(this.outputs[v].serialize());return h};var Mc=Object.freeze({__proto__:null,number:Ts,color:function(h,v,_){return new Qi(Ts(h.r,v.r,_),Ts(h.g,v.g,_),Ts(h.b,v.b,_),Ts(h.a,v.a,_))},array:function(h,v,_){return h.map(function(R,F){return Ts(R,v[F],_)})}}),Rc=6/29*3*(6/29),If=Math.PI/180,Ll=180/Math.PI;function Dl(h){return h>.008856451679035631?Math.pow(h,1/3):h/Rc+4/29}function ec(h){return h>6/29?h*h*h:Rc*(h-4/29)}function ku(h){return 255*(h<=.0031308?12.92*h:1.055*Math.pow(h,1/2.4)-.055)}function Ic(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function In(h){var v=Ic(h.r),_=Ic(h.g),R=Ic(h.b),F=Dl((.4124564*v+.3575761*_+.1804375*R)/.95047),z=Dl((.2126729*v+.7151522*_+.072175*R)/1);return{l:116*z-16,a:500*(F-z),b:200*(z-Dl((.0193339*v+.119192*_+.9503041*R)/1.08883)),alpha:h.a}}function Zi(h){var v=(h.l+16)/116,_=isNaN(h.a)?v:v+h.a/500,R=isNaN(h.b)?v:v-h.b/200;return v=1*ec(v),_=.95047*ec(_),R=1.08883*ec(R),new Qi(ku(3.2404542*_-1.5371385*v-.4985314*R),ku(-.969266*_+1.8760108*v+.041556*R),ku(.0556434*_-.2040259*v+1.0572252*R),h.alpha)}function _v(h,v,_){var R=v-h;return h+_*(R>180||R<-180?R-360*Math.round(R/360):R)}var eh={forward:In,reverse:Zi,interpolate:function(h,v,_){return{l:Ts(h.l,v.l,_),a:Ts(h.a,v.a,_),b:Ts(h.b,v.b,_),alpha:Ts(h.alpha,v.alpha,_)}}},hc={forward:function(h){var v=In(h),_=v.l,R=v.a,F=v.b,z=Math.atan2(F,R)*Ll;return{h:z<0?z+360:z,c:Math.sqrt(R*R+F*F),l:_,alpha:h.a}},reverse:function(h){var v=h.h*If,_=h.c;return Zi({l:h.l,a:Math.cos(v)*_,b:Math.sin(v)*_,alpha:h.alpha})},interpolate:function(h,v,_){return{h:_v(h.h,v.h,_),c:Ts(h.c,v.c,_),l:Ts(h.l,v.l,_),alpha:Ts(h.alpha,v.alpha,_)}}},Wp=Object.freeze({__proto__:null,lab:eh,hcl:hc}),Ks=function(h,v,_,R,F){this.type=h,this.operator=v,this.interpolation=_,this.input=R,this.labels=[],this.outputs=[];for(var z=0,$=F;z<$.length;z+=1){var ue=$[z],Pe=ue[1];this.labels.push(ue[0]),this.outputs.push(Pe)}};function Pc(h,v,_,R){var F=R-_,z=h-_;return F===0?0:v===1?z/F:(Math.pow(v,z)-1)/(Math.pow(v,F)-1)}Ks.interpolationFactor=function(h,v,_,R){var F=0;if(h.name==="exponential")F=Pc(v,h.base,_,R);else if(h.name==="linear")F=Pc(v,1,_,R);else if(h.name==="cubic-bezier"){var z=h.controlPoints;F=new j(z[0],z[1],z[2],z[3]).solve(Pc(v,1,_,R))}return F},Ks.parse=function(h,v){var _=h[0],R=h[1],F=h[2],z=h.slice(3);if(!Array.isArray(R)||R.length===0)return v.error("Expected an interpolation type expression.",1);if(R[0]==="linear")R={name:"linear"};else if(R[0]==="exponential"){var $=R[1];if(typeof $!="number")return v.error("Exponential interpolation requires a numeric base.",1,1);R={name:"exponential",base:$}}else{if(R[0]!=="cubic-bezier")return v.error("Unknown interpolation type "+String(R[0]),1,0);var ue=R.slice(1);if(ue.length!==4||ue.some(function(Lr){return typeof Lr!="number"||Lr<0||Lr>1}))return v.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);R={name:"cubic-bezier",controlPoints:ue}}if(h.length-1<4)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if((h.length-1)%2!=0)return v.error("Expected an even number of arguments.");if(!(F=v.parse(F,2,un)))return null;var Pe=[],Qe=null;_==="interpolate-hcl"||_==="interpolate-lab"?Qe=Jn:v.expectedType&&v.expectedType.kind!=="value"&&(Qe=v.expectedType);for(var ct=0;ct<z.length;ct+=2){var mt=z[ct],Lt=z[ct+1],Ut=ct+3,ur=ct+4;if(typeof mt!="number")return v.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ut);if(Pe.length&&Pe[Pe.length-1][0]>=mt)return v.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ut);var fr=v.parse(Lt,ur,Qe);if(!fr)return null;Qe=Qe||fr.type,Pe.push([mt,fr])}return Qe.kind==="number"||Qe.kind==="color"||Qe.kind==="array"&&Qe.itemType.kind==="number"&&typeof Qe.N=="number"?new Ks(Qe,_,R,F,Pe):v.error("Type "+ba(Qe)+" is not interpolatable.")},Ks.prototype.evaluate=function(h){var v=this.labels,_=this.outputs;if(v.length===1)return _[0].evaluate(h);var R=this.input.evaluate(h);if(R<=v[0])return _[0].evaluate(h);var F=v.length;if(R>=v[F-1])return _[F-1].evaluate(h);var z=Jl(v,R),$=Ks.interpolationFactor(this.interpolation,R,v[z],v[z+1]),ue=_[z].evaluate(h),Pe=_[z+1].evaluate(h);return this.operator==="interpolate"?Mc[this.type.kind.toLowerCase()](ue,Pe,$):this.operator==="interpolate-hcl"?hc.reverse(hc.interpolate(hc.forward(ue),hc.forward(Pe),$)):eh.reverse(eh.interpolate(eh.forward(ue),eh.forward(Pe),$))},Ks.prototype.eachChild=function(h){h(this.input);for(var v=0,_=this.outputs;v<_.length;v+=1)h(_[v])},Ks.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})},Ks.prototype.serialize=function(){var h;h=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var v=[this.operator,h,this.input.serialize()],_=0;_<this.labels.length;_++)v.push(this.labels[_],this.outputs[_].serialize());return v};var Fl=function(h,v){this.type=h,this.args=v};Fl.parse=function(h,v){if(h.length<2)return v.error("Expectected at least one argument.");var _=null,R=v.expectedType;R&&R.kind!=="value"&&(_=R);for(var F=[],z=0,$=h.slice(1);z<$.length;z+=1){var ue=v.parse($[z],1+F.length,_,void 0,{typeAnnotation:"omit"});if(!ue)return null;_=_||ue.type,F.push(ue)}var Pe=R&&F.some(function(Qe){return co(R,Qe.type)});return new Fl(Pe?vi:_,F)},Fl.prototype.evaluate=function(h){for(var v,_=null,R=0,F=0,z=this.args;F<z.length&&(R++,(_=z[F].evaluate(h))&&_ instanceof Po&&!_.available&&(v||(v=_.name),_=null,R===this.args.length&&(_=v)),_===null);F+=1);return _},Fl.prototype.eachChild=function(h){this.args.forEach(h)},Fl.prototype.outputDefined=function(){return this.args.every(function(h){return h.outputDefined()})},Fl.prototype.serialize=function(){var h=["coalesce"];return this.eachChild(function(v){h.push(v.serialize())}),h};var nu=function(h,v){this.type=v.type,this.bindings=[].concat(h),this.result=v};nu.prototype.evaluate=function(h){return this.result.evaluate(h)},nu.prototype.eachChild=function(h){for(var v=0,_=this.bindings;v<_.length;v+=1)h(_[v][1]);h(this.result)},nu.parse=function(h,v){if(h.length<4)return v.error("Expected at least 3 arguments, but found "+(h.length-1)+" instead.");for(var _=[],R=1;R<h.length-1;R+=2){var F=h[R];if(typeof F!="string")return v.error("Expected string, but found "+typeof F+" instead.",R);if(/[^a-zA-Z0-9_]/.test(F))return v.error("Variable names must contain only alphanumeric characters or '_'.",R);var z=v.parse(h[R+1],R+1);if(!z)return null;_.push([F,z])}var $=v.parse(h[h.length-1],h.length-1,v.expectedType,_);return $?new nu(_,$):null},nu.prototype.outputDefined=function(){return this.result.outputDefined()},nu.prototype.serialize=function(){for(var h=["let"],v=0,_=this.bindings;v<_.length;v+=1){var R=_[v];h.push(R[0],R[1].serialize())}return h.push(this.result.serialize()),h};var hu=function(h,v,_){this.type=h,this.index=v,this.input=_};hu.parse=function(h,v){if(h.length!==3)return v.error("Expected 2 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,un),R=v.parse(h[2],2,ja(v.expectedType||vi));return _&&R?new hu(R.type.itemType,_,R):null},hu.prototype.evaluate=function(h){var v=this.index.evaluate(h),_=this.input.evaluate(h);if(v<0)throw new Pn("Array index out of bounds: "+v+" < 0.");if(v>=_.length)throw new Pn("Array index out of bounds: "+v+" > "+(_.length-1)+".");if(v!==Math.floor(v))throw new Pn("Array index must be an integer, but found "+v+" instead.");return _[v]},hu.prototype.eachChild=function(h){h(this.index),h(this.input)},hu.prototype.outputDefined=function(){return!1},hu.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Tl=function(h,v){this.type=Wn,this.needle=h,this.haystack=v};Tl.parse=function(h,v){if(h.length!==3)return v.error("Expected 2 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,vi),R=v.parse(h[2],2,vi);return _&&R?Io(_.type,[Wn,Xn,un,ni,vi])?new Tl(_,R):v.error("Expected first argument to be of type boolean, string, number or null, but found "+ba(_.type)+" instead"):null},Tl.prototype.evaluate=function(h){var v=this.needle.evaluate(h),_=this.haystack.evaluate(h);if(!_)return!1;if(!oi(v,["boolean","string","number","null"]))throw new Pn("Expected first argument to be of type boolean, string, number or null, but found "+ba(qt(v))+" instead.");if(!oi(_,["string","array"]))throw new Pn("Expected second argument to be of type array or string, but found "+ba(qt(_))+" instead.");return _.indexOf(v)>=0},Tl.prototype.eachChild=function(h){h(this.needle),h(this.haystack)},Tl.prototype.outputDefined=function(){return!0},Tl.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var pc=function(h,v,_){this.type=un,this.needle=h,this.haystack=v,this.fromIndex=_};pc.parse=function(h,v){if(h.length<=2||h.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,vi),R=v.parse(h[2],2,vi);if(!_||!R)return null;if(!Io(_.type,[Wn,Xn,un,ni,vi]))return v.error("Expected first argument to be of type boolean, string, number or null, but found "+ba(_.type)+" instead");if(h.length===4){var F=v.parse(h[3],3,un);return F?new pc(_,R,F):null}return new pc(_,R)},pc.prototype.evaluate=function(h){var v=this.needle.evaluate(h),_=this.haystack.evaluate(h);if(!oi(v,["boolean","string","number","null"]))throw new Pn("Expected first argument to be of type boolean, string, number or null, but found "+ba(qt(v))+" instead.");if(!oi(_,["string","array"]))throw new Pn("Expected second argument to be of type array or string, but found "+ba(qt(_))+" instead.");if(this.fromIndex){var R=this.fromIndex.evaluate(h);return _.indexOf(v,R)}return _.indexOf(v)},pc.prototype.eachChild=function(h){h(this.needle),h(this.haystack),this.fromIndex&&h(this.fromIndex)},pc.prototype.outputDefined=function(){return!1},pc.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var h=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),h]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Bl=function(h,v,_,R,F,z){this.inputType=h,this.type=v,this.input=_,this.cases=R,this.outputs=F,this.otherwise=z};Bl.parse=function(h,v){if(h.length<5)return v.error("Expected at least 4 arguments, but found only "+(h.length-1)+".");if(h.length%2!=1)return v.error("Expected an even number of arguments.");var _,R;v.expectedType&&v.expectedType.kind!=="value"&&(R=v.expectedType);for(var F={},z=[],$=2;$<h.length-1;$+=2){var ue=h[$],Pe=h[$+1];Array.isArray(ue)||(ue=[ue]);var Qe=v.concat($);if(ue.length===0)return Qe.error("Expected at least one branch label.");for(var ct=0,mt=ue;ct<mt.length;ct+=1){var Lt=mt[ct];if(typeof Lt!="number"&&typeof Lt!="string")return Qe.error("Branch labels must be numbers or strings.");if(typeof Lt=="number"&&Math.abs(Lt)>Number.MAX_SAFE_INTEGER)return Qe.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Lt=="number"&&Math.floor(Lt)!==Lt)return Qe.error("Numeric branch labels must be integer values.");if(_){if(Qe.checkSubtype(_,qt(Lt)))return null}else _=qt(Lt);if(F[String(Lt)]!==void 0)return Qe.error("Branch labels must be unique.");F[String(Lt)]=z.length}var Ut=v.parse(Pe,$,R);if(!Ut)return null;R=R||Ut.type,z.push(Ut)}var ur=v.parse(h[1],1,vi);if(!ur)return null;var fr=v.parse(h[h.length-1],h.length-1,R);return fr?ur.type.kind!=="value"&&v.concat(1).checkSubtype(_,ur.type)?null:new Bl(_,R,ur,F,z,fr):null},Bl.prototype.evaluate=function(h){var v=this.input.evaluate(h);return(qt(v)===this.inputType&&this.outputs[this.cases[v]]||this.otherwise).evaluate(h)},Bl.prototype.eachChild=function(h){h(this.input),this.outputs.forEach(h),h(this.otherwise)},Bl.prototype.outputDefined=function(){return this.outputs.every(function(h){return h.outputDefined()})&&this.otherwise.outputDefined()},Bl.prototype.serialize=function(){for(var h=this,v=["match",this.input.serialize()],_=[],R={},F=0,z=Object.keys(this.cases).sort();F<z.length;F+=1){var $=z[F];(mt=R[this.cases[$]])===void 0?(R[this.cases[$]]=_.length,_.push([this.cases[$],[$]])):_[mt][1].push($)}for(var ue=function(Ut){return h.inputType.kind==="number"?Number(Ut):Ut},Pe=0,Qe=_;Pe<Qe.length;Pe+=1){var ct=Qe[Pe],mt=ct[0],Lt=ct[1];v.push(Lt.length===1?ue(Lt[0]):Lt.map(ue)),v.push(this.outputs[outputIndex$1].serialize())}return v.push(this.otherwise.serialize()),v};var Oc=function(h,v,_){this.type=h,this.branches=v,this.otherwise=_};Oc.parse=function(h,v){if(h.length<4)return v.error("Expected at least 3 arguments, but found only "+(h.length-1)+".");if(h.length%2!=0)return v.error("Expected an odd number of arguments.");var _;v.expectedType&&v.expectedType.kind!=="value"&&(_=v.expectedType);for(var R=[],F=1;F<h.length-1;F+=2){var z=v.parse(h[F],F,Wn);if(!z)return null;var $=v.parse(h[F+1],F+1,_);if(!$)return null;R.push([z,$]),_=_||$.type}var ue=v.parse(h[h.length-1],h.length-1,_);return ue?new Oc(_,R,ue):null},Oc.prototype.evaluate=function(h){for(var v=0,_=this.branches;v<_.length;v+=1){var R=_[v],F=R[1];if(R[0].evaluate(h))return F.evaluate(h)}return this.otherwise.evaluate(h)},Oc.prototype.eachChild=function(h){for(var v=0,_=this.branches;v<_.length;v+=1){var R=_[v],F=R[1];h(R[0]),h(F)}h(this.otherwise)},Oc.prototype.outputDefined=function(){return this.branches.every(function(h){return h[1].outputDefined()})&&this.otherwise.outputDefined()},Oc.prototype.serialize=function(){var h=["case"];return this.eachChild(function(v){h.push(v.serialize())}),h};var Kc=function(h,v,_,R){this.type=h,this.input=v,this.beginIndex=_,this.endIndex=R};function th(h,v){return h==="=="||h==="!="?v.kind==="boolean"||v.kind==="string"||v.kind==="number"||v.kind==="null"||v.kind==="value":v.kind==="string"||v.kind==="number"||v.kind==="value"}function Gp(h,v,_,R){return R.compare(v,_)===0}function Uo(h,v,_){var R=h!=="=="&&h!=="!=";return function(){function F(z,$,ue){this.type=Wn,this.lhs=z,this.rhs=$,this.collator=ue,this.hasUntypedArgument=z.type.kind==="value"||$.type.kind==="value"}return F.parse=function(z,$){if(z.length!==3&&z.length!==4)return $.error("Expected two or three arguments.");var ue=z[0],Pe=$.parse(z[1],1,vi);if(!Pe)return null;if(!th(ue,Pe.type))return $.concat(1).error('"'+ue+`" comparisons are not supported for type '`+ba(Pe.type)+"'.");var Qe=$.parse(z[2],2,vi);if(!Qe)return null;if(!th(ue,Qe.type))return $.concat(2).error('"'+ue+`" comparisons are not supported for type '`+ba(Qe.type)+"'.");if(Pe.type.kind!==Qe.type.kind&&Pe.type.kind!=="value"&&Qe.type.kind!=="value")return $.error("Cannot compare types '"+ba(Pe.type)+"' and '"+ba(Qe.type)+"'.");R&&(Pe.type.kind==="value"&&Qe.type.kind!=="value"?Pe=new Cn(Qe.type,[Pe]):Pe.type.kind!=="value"&&Qe.type.kind==="value"&&(Qe=new Cn(Pe.type,[Qe])));var ct=null;if(z.length===4){if(Pe.type.kind!=="string"&&Qe.type.kind!=="string"&&Pe.type.kind!=="value"&&Qe.type.kind!=="value")return $.error("Cannot use collator to compare non-string types.");if(!(ct=$.parse(z[3],3,ga)))return null}return new F(Pe,Qe,ct)},F.prototype.evaluate=function(z){var $=this.lhs.evaluate(z),ue=this.rhs.evaluate(z);if(R&&this.hasUntypedArgument){var Pe=qt($),Qe=qt(ue);if(Pe.kind!==Qe.kind||Pe.kind!=="string"&&Pe.kind!=="number")throw new Pn('Expected arguments for "'+h+'" to be (string, string) or (number, number), but found ('+Pe.kind+", "+Qe.kind+") instead.")}if(this.collator&&!R&&this.hasUntypedArgument){var ct=qt($),mt=qt(ue);if(ct.kind!=="string"||mt.kind!=="string")return v(z,$,ue)}return this.collator?_(z,$,ue,this.collator.evaluate(z)):v(z,$,ue)},F.prototype.eachChild=function(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)},F.prototype.outputDefined=function(){return!0},F.prototype.serialize=function(){var z=[h];return this.eachChild(function($){z.push($.serialize())}),z},F}()}Kc.parse=function(h,v){if(h.length<=2||h.length>=5)return v.error("Expected 3 or 4 arguments, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1,vi),R=v.parse(h[2],2,un);if(!_||!R)return null;if(!Io(_.type,[ja(vi),Xn,vi]))return v.error("Expected first argument to be of type array or string, but found "+ba(_.type)+" instead");if(h.length===4){var F=v.parse(h[3],3,un);return F?new Kc(_.type,_,R,F):null}return new Kc(_.type,_,R)},Kc.prototype.evaluate=function(h){var v=this.input.evaluate(h),_=this.beginIndex.evaluate(h);if(!oi(v,["string","array"]))throw new Pn("Expected first argument to be of type array or string, but found "+ba(qt(v))+" instead.");if(this.endIndex){var R=this.endIndex.evaluate(h);return v.slice(_,R)}return v.slice(_)},Kc.prototype.eachChild=function(h){h(this.input),h(this.beginIndex),this.endIndex&&h(this.endIndex)},Kc.prototype.outputDefined=function(){return!1},Kc.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var h=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),h]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Od=Uo("==",function(h,v,_){return v===_},Gp),Oh=Uo("!=",function(h,v,_){return v!==_},function(h,v,_,R){return!Gp(0,v,_,R)}),pf=Uo("<",function(h,v,_){return v<_},function(h,v,_,R){return R.compare(v,_)<0}),ss=Uo(">",function(h,v,_){return v>_},function(h,v,_,R){return R.compare(v,_)>0}),cp=Uo("<=",function(h,v,_){return v<=_},function(h,v,_,R){return R.compare(v,_)<=0}),fp=Uo(">=",function(h,v,_){return v>=_},function(h,v,_,R){return R.compare(v,_)>=0}),Lu=function(h,v,_,R,F){this.type=Xn,this.number=h,this.locale=v,this.currency=_,this.minFractionDigits=R,this.maxFractionDigits=F};Lu.parse=function(h,v){if(h.length!==3)return v.error("Expected two arguments.");var _=v.parse(h[1],1,un);if(!_)return null;var R=h[2];if(typeof R!="object"||Array.isArray(R))return v.error("NumberFormat options argument must be an object.");var F=null;if(R.locale&&!(F=v.parse(R.locale,1,Xn)))return null;var z=null;if(R.currency&&!(z=v.parse(R.currency,1,Xn)))return null;var $=null;if(R["min-fraction-digits"]&&!($=v.parse(R["min-fraction-digits"],1,un)))return null;var ue=null;return R["max-fraction-digits"]&&!(ue=v.parse(R["max-fraction-digits"],1,un))?null:new Lu(_,F,z,$,ue)},Lu.prototype.evaluate=function(h){return new Intl.NumberFormat(this.locale?this.locale.evaluate(h):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(h):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(h):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(h):void 0}).format(this.number.evaluate(h))},Lu.prototype.eachChild=function(h){h(this.number),this.locale&&h(this.locale),this.currency&&h(this.currency),this.minFractionDigits&&h(this.minFractionDigits),this.maxFractionDigits&&h(this.maxFractionDigits)},Lu.prototype.outputDefined=function(){return!1},Lu.prototype.serialize=function(){var h={};return this.locale&&(h.locale=this.locale.serialize()),this.currency&&(h.currency=this.currency.serialize()),this.minFractionDigits&&(h["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(h["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),h]};var Tt=function(h){this.type=un,this.input=h};Tt.parse=function(h,v){if(h.length!==2)return v.error("Expected 1 argument, but found "+(h.length-1)+" instead.");var _=v.parse(h[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?v.error("Expected argument of type string or array, but found "+ba(_.type)+" instead."):new Tt(_):null},Tt.prototype.evaluate=function(h){var v=this.input.evaluate(h);if(typeof v=="string"||Array.isArray(v))return v.length;throw new Pn("Expected value to be of type string or array, but found "+ba(qt(v))+" instead.")},Tt.prototype.eachChild=function(h){h(this.input)},Tt.prototype.outputDefined=function(){return!1},Tt.prototype.serialize=function(){var h=["length"];return this.eachChild(function(v){h.push(v.serialize())}),h};var mr={"==":Od,"!=":Oh,">":ss,"<":pf,">=":fp,"<=":cp,array:Cn,at:hu,boolean:Cn,case:Oc,coalesce:Fl,collator:cu,format:Mi,image:Xi,in:Tl,"index-of":pc,interpolate:Ks,"interpolate-hcl":Ks,"interpolate-lab":Ks,length:Tt,let:nu,literal:rn,match:Bl,number:Cn,"number-format":Lu,object:Cn,slice:Kc,step:As,string:Cn,"to-boolean":os,"to-color":os,"to-number":os,"to-string":os,var:fc,within:fu};function Hr(h,v){var _=v[0],R=v[1],F=v[2],z=v[3];_=_.evaluate(h),R=R.evaluate(h),F=F.evaluate(h);var $=z?z.evaluate(h):1,ue=cr(_,R,F,$);if(ue)throw new Pn(ue);return new Qi(_/255*$,R/255*$,F/255*$,$)}function Qr(h,v){return h in v}function On(h,v){var _=v[h];return _===void 0?null:_}function gi(h){return{type:h}}function ua(h){return{result:"success",value:h}}function _o(h){return{result:"error",value:h}}function Fs(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function vl(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function rl(h){return!!h.expression&&h.expression.interpolated}function Lo(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function hp(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function kd(h){return h}function qc(h,v,_){return h!==void 0?h:v!==void 0?v:_!==void 0?_:void 0}function pp(h,v,_,R,F){return qc(typeof _===F?R[_]:void 0,h.default,v.default)}function df(h,v,_){if(Lo(_)!=="number")return qc(h.default,v.default);var R=h.stops.length;if(R===1||_<=h.stops[0][0])return h.stops[0][1];if(_>=h.stops[R-1][0])return h.stops[R-1][1];var F=Jl(h.stops.map(function(z){return z[0]}),_);return h.stops[F][1]}function $p(h,v,_){var R=h.base!==void 0?h.base:1;if(Lo(_)!=="number")return qc(h.default,v.default);var F=h.stops.length;if(F===1||_<=h.stops[0][0])return h.stops[0][1];if(_>=h.stops[F-1][0])return h.stops[F-1][1];var z=Jl(h.stops.map(function(mt){return mt[0]}),_),$=function(mt,Lt,Ut,ur){var fr=ur-Ut,Lr=mt-Ut;return fr===0?0:Lt===1?Lr/fr:(Math.pow(Lt,Lr)-1)/(Math.pow(Lt,fr)-1)}(_,R,h.stops[z][0],h.stops[z+1][0]),ue=h.stops[z][1],Pe=h.stops[z+1][1],Qe=Mc[v.type]||kd;if(h.colorSpace&&h.colorSpace!=="rgb"){var ct=Wp[h.colorSpace];Qe=function(mt,Lt){return ct.reverse(ct.interpolate(ct.forward(mt),ct.forward(Lt),$))}}return typeof ue.evaluate=="function"?{evaluate:function(){for(var mt=[],Lt=arguments.length;Lt--;)mt[Lt]=arguments[Lt];var Ut=ue.evaluate.apply(void 0,mt),ur=Pe.evaluate.apply(void 0,mt);if(Ut!==void 0&&ur!==void 0)return Qe(Ut,ur,$)}}:Qe(ue,Pe,$)}function Ta(h,v,_){return v.type==="color"?_=Qi.parse(_):v.type==="formatted"?_=ho.fromString(_.toString()):v.type==="resolvedImage"?_=Po.fromString(_.toString()):Lo(_)===v.type||v.type==="enum"&&v.values[_]||(_=void 0),qc(_,h.default,v.default)}ro.register(mr,{error:[{kind:"error"},[Xn],function(h,v){throw new Pn(v[0].evaluate(h))}],typeof:[Xn,[vi],function(h,v){return ba(qt(v[0].evaluate(h)))}],"to-rgba":[ja(un,4),[Jn],function(h,v){return v[0].evaluate(h).toArray()}],rgb:[Jn,[un,un,un],Hr],rgba:[Jn,[un,un,un,un],Hr],has:{type:Wn,overloads:[[[Xn],function(h,v){return Qr(v[0].evaluate(h),h.properties())}],[[Xn,sa],function(h,v){var _=v[1];return Qr(v[0].evaluate(h),_.evaluate(h))}]]},get:{type:vi,overloads:[[[Xn],function(h,v){return On(v[0].evaluate(h),h.properties())}],[[Xn,sa],function(h,v){var _=v[1];return On(v[0].evaluate(h),_.evaluate(h))}]]},"feature-state":[vi,[Xn],function(h,v){return On(v[0].evaluate(h),h.featureState||{})}],properties:[sa,[],function(h){return h.properties()}],"geometry-type":[Xn,[],function(h){return h.geometryType()}],id:[vi,[],function(h){return h.id()}],zoom:[un,[],function(h){return h.globals.zoom}],"heatmap-density":[un,[],function(h){return h.globals.heatmapDensity||0}],"line-progress":[un,[],function(h){return h.globals.lineProgress||0}],accumulated:[vi,[],function(h){return h.globals.accumulated===void 0?null:h.globals.accumulated}],"+":[un,gi(un),function(h,v){for(var _=0,R=0,F=v;R<F.length;R+=1)_+=F[R].evaluate(h);return _}],"*":[un,gi(un),function(h,v){for(var _=1,R=0,F=v;R<F.length;R+=1)_*=F[R].evaluate(h);return _}],"-":{type:un,overloads:[[[un,un],function(h,v){var _=v[1];return v[0].evaluate(h)-_.evaluate(h)}],[[un],function(h,v){return-v[0].evaluate(h)}]]},"/":[un,[un,un],function(h,v){var _=v[1];return v[0].evaluate(h)/_.evaluate(h)}],"%":[un,[un,un],function(h,v){var _=v[1];return v[0].evaluate(h)%_.evaluate(h)}],ln2:[un,[],function(){return Math.LN2}],pi:[un,[],function(){return Math.PI}],e:[un,[],function(){return Math.E}],"^":[un,[un,un],function(h,v){var _=v[1];return Math.pow(v[0].evaluate(h),_.evaluate(h))}],sqrt:[un,[un],function(h,v){return Math.sqrt(v[0].evaluate(h))}],log10:[un,[un],function(h,v){return Math.log(v[0].evaluate(h))/Math.LN10}],ln:[un,[un],function(h,v){return Math.log(v[0].evaluate(h))}],log2:[un,[un],function(h,v){return Math.log(v[0].evaluate(h))/Math.LN2}],sin:[un,[un],function(h,v){return Math.sin(v[0].evaluate(h))}],cos:[un,[un],function(h,v){return Math.cos(v[0].evaluate(h))}],tan:[un,[un],function(h,v){return Math.tan(v[0].evaluate(h))}],asin:[un,[un],function(h,v){return Math.asin(v[0].evaluate(h))}],acos:[un,[un],function(h,v){return Math.acos(v[0].evaluate(h))}],atan:[un,[un],function(h,v){return Math.atan(v[0].evaluate(h))}],min:[un,gi(un),function(h,v){return Math.min.apply(Math,v.map(function(_){return _.evaluate(h)}))}],max:[un,gi(un),function(h,v){return Math.max.apply(Math,v.map(function(_){return _.evaluate(h)}))}],abs:[un,[un],function(h,v){return Math.abs(v[0].evaluate(h))}],round:[un,[un],function(h,v){var _=v[0].evaluate(h);return _<0?-Math.round(-_):Math.round(_)}],floor:[un,[un],function(h,v){return Math.floor(v[0].evaluate(h))}],ceil:[un,[un],function(h,v){return Math.ceil(v[0].evaluate(h))}],"filter-==":[Wn,[Xn,vi],function(h,v){var _=v[0],R=v[1];return h.properties()[_.value]===R.value}],"filter-id-==":[Wn,[vi],function(h,v){var _=v[0];return h.id()===_.value}],"filter-type-==":[Wn,[Xn],function(h,v){var _=v[0];return h.geometryType()===_.value}],"filter-<":[Wn,[Xn,vi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F<z}],"filter-id-<":[Wn,[vi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R<F}],"filter->":[Wn,[Xn,vi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F>z}],"filter-id->":[Wn,[vi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R>F}],"filter-<=":[Wn,[Xn,vi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F<=z}],"filter-id-<=":[Wn,[vi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R<=F}],"filter->=":[Wn,[Xn,vi],function(h,v){var _=v[0],R=v[1],F=h.properties()[_.value],z=R.value;return typeof F==typeof z&&F>=z}],"filter-id->=":[Wn,[vi],function(h,v){var _=v[0],R=h.id(),F=_.value;return typeof R==typeof F&&R>=F}],"filter-has":[Wn,[vi],function(h,v){return v[0].value in h.properties()}],"filter-has-id":[Wn,[],function(h){return h.id()!==null&&h.id()!==void 0}],"filter-type-in":[Wn,[ja(Xn)],function(h,v){return v[0].value.indexOf(h.geometryType())>=0}],"filter-id-in":[Wn,[ja(vi)],function(h,v){return v[0].value.indexOf(h.id())>=0}],"filter-in-small":[Wn,[Xn,ja(vi)],function(h,v){var _=v[0];return v[1].value.indexOf(h.properties()[_.value])>=0}],"filter-in-large":[Wn,[Xn,ja(vi)],function(h,v){var _=v[0],R=v[1];return function(F,z,$,ue){for(;$<=ue;){var Pe=$+ue>>1;if(z[Pe]===F)return!0;z[Pe]>F?ue=Pe-1:$=Pe+1}return!1}(h.properties()[_.value],R.value,0,R.value.length-1)}],all:{type:Wn,overloads:[[[Wn,Wn],function(h,v){var _=v[1];return v[0].evaluate(h)&&_.evaluate(h)}],[gi(Wn),function(h,v){for(var _=0,R=v;_<R.length;_+=1)if(!R[_].evaluate(h))return!1;return!0}]]},any:{type:Wn,overloads:[[[Wn,Wn],function(h,v){var _=v[1];return v[0].evaluate(h)||_.evaluate(h)}],[gi(Wn),function(h,v){for(var _=0,R=v;_<R.length;_+=1)if(R[_].evaluate(h))return!0;return!1}]]},"!":[Wn,[Wn],function(h,v){return!v[0].evaluate(h)}],"is-supported-script":[Wn,[Xn],function(h,v){var _=h.globals&&h.globals.isSupportedScript;return!_||_(v[0].evaluate(h))}],upcase:[Xn,[Xn],function(h,v){return v[0].evaluate(h).toUpperCase()}],downcase:[Xn,[Xn],function(h,v){return v[0].evaluate(h).toLowerCase()}],concat:[Xn,gi(vi),function(h,v){return v.map(function(_){return Mr(_.evaluate(h))}).join("")}],"resolved-locale":[Xn,[ga],function(h,v){return v[0].evaluate(h).resolvedLocale()}]});var vf=function(h,v){this.expression=h,this._warningHistory={},this._evaluator=new Oo,this._defaultValue=v?function(_){return _.type==="color"&&hp(_.default)?new Qi(0,0,0,0):_.type==="color"?Qi.parse(_.default)||null:_.default===void 0?null:_.default}(v):null,this._enumValues=v&&v.type==="enum"?v.values:null};function rh(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in mr}function nh(h,v){var _=new yo(mr,[],v?function(F){var z={color:Jn,string:Xn,number:un,enum:Xn,boolean:Wn,formatted:Ra,resolvedImage:ya};return F.type==="array"?ja(z[F.value]||vi,F.length):z[F.type]}(v):void 0),R=_.parse(h,void 0,void 0,void 0,v&&v.type==="string"?{typeAnnotation:"coerce"}:void 0);return R?ua(new vf(R,v)):_o(_.errors)}vf.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,F,z){return this._evaluator.globals=h,this._evaluator.feature=v,this._evaluator.featureState=_,this._evaluator.canonical=R,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=z,this.expression.evaluate(this._evaluator)},vf.prototype.evaluate=function(h,v,_,R,F,z){this._evaluator.globals=h,this._evaluator.feature=v||null,this._evaluator.featureState=_||null,this._evaluator.canonical=R,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=z||null;try{var $=this.expression.evaluate(this._evaluator);if($==null||typeof $=="number"&&$!=$)return this._defaultValue;if(this._enumValues&&!($ in this._enumValues))throw new Pn("Expected value to be one of "+Object.keys(this._enumValues).map(function(ue){return JSON.stringify(ue)}).join(", ")+", but found "+JSON.stringify($)+" instead.");return $}catch(ue){return this._warningHistory[ue.message]||(this._warningHistory[ue.message]=!0,typeof console!="undefined"&&console.warn(ue.message)),this._defaultValue}};var Pf=function(h,v){this.kind=h,this._styleExpression=v,this.isStateDependent=h!=="constant"&&!ru(v.expression)};Pf.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,F,z){return this._styleExpression.evaluateWithoutErrorHandling(h,v,_,R,F,z)},Pf.prototype.evaluate=function(h,v,_,R,F,z){return this._styleExpression.evaluate(h,v,_,R,F,z)};var ih=function(h,v,_,R){this.kind=h,this.zoomStops=_,this._styleExpression=v,this.isStateDependent=h!=="camera"&&!ru(v.expression),this.interpolationType=R};function Gs(h,v){if((h=nh(h,v)).result==="error")return h;var _=h.value.expression,R=cc(_);if(!R&&!Fs(v))return _o([new Mn("","data expressions not supported")]);var F=Al(_,["zoom"]);if(!F&&!vl(v))return _o([new Mn("","zoom expressions not supported")]);var z=function $(ue){var Pe=null;if(ue instanceof nu)Pe=$(ue.result);else if(ue instanceof Fl)for(var Qe=0,ct=ue.args;Qe<ct.length&&!(Pe=$(ct[Qe]));Qe+=1);else(ue instanceof As||ue instanceof Ks)&&ue.input instanceof ro&&ue.input.name==="zoom"&&(Pe=ue);return Pe instanceof Mn||ue.eachChild(function(mt){var Lt=$(mt);Lt instanceof Mn?Pe=Lt:!Pe&&Lt?Pe=new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Pe&&Lt&&Pe!==Lt&&(Pe=new Mn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Pe}(_);return z||F?z instanceof Mn?_o([z]):z instanceof Ks&&!rl(v)?_o([new Mn("",'"interpolate" expressions cannot be used with this property')]):ua(z?new ih(R?"camera":"composite",h.value,z.labels,z instanceof Ks?z.interpolation:void 0):new Pf(R?"constant":"source",h.value)):_o([new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ih.prototype.evaluateWithoutErrorHandling=function(h,v,_,R,F,z){return this._styleExpression.evaluateWithoutErrorHandling(h,v,_,R,F,z)},ih.prototype.evaluate=function(h,v,_,R,F,z){return this._styleExpression.evaluate(h,v,_,R,F,z)},ih.prototype.interpolationFactor=function(h,v,_){return this.interpolationType?Ks.interpolationFactor(this.interpolationType,h,v,_):0};var dc=function(h,v){this._parameters=h,this._specification=v,yr(this,function _(R,F){var z,$,ue,Pe=F.type==="color",Qe=R.stops&&typeof R.stops[0][0]=="object",ct=Qe||!(Qe||R.property!==void 0),mt=R.type||(rl(F)?"exponential":"interval");if(Pe&&((R=yr({},R)).stops&&(R.stops=R.stops.map(function(Di){return[Di[0],Qi.parse(Di[1])]})),R.default=Qi.parse(R.default?R.default:F.default)),R.colorSpace&&R.colorSpace!=="rgb"&&!Wp[R.colorSpace])throw new Error("Unknown color space: "+R.colorSpace);if(mt==="exponential")z=$p;else if(mt==="interval")z=df;else if(mt==="categorical"){z=pp,$=Object.create(null);for(var Lt=0,Ut=R.stops;Lt<Ut.length;Lt+=1){var ur=Ut[Lt];$[ur[0]]=ur[1]}ue=typeof R.stops[0][0]}else{if(mt!=="identity")throw new Error('Unknown function type "'+mt+'"');z=Ta}if(Qe){for(var fr={},Lr=[],Rr=0;Rr<R.stops.length;Rr++){var Yr=R.stops[Rr],nn=Yr[0].zoom;fr[nn]===void 0&&(fr[nn]={zoom:nn,type:R.type,property:R.property,default:R.default,stops:[]},Lr.push(nn)),fr[nn].stops.push([Yr[0].value,Yr[1]])}for(var gn=[],wn=0,Dn=Lr;wn<Dn.length;wn+=1){var pi=Dn[wn];gn.push([fr[pi].zoom,_(fr[pi],F)])}var wi={name:"linear"};return{kind:"composite",interpolationType:wi,interpolationFactor:Ks.interpolationFactor.bind(void 0,wi),zoomStops:gn.map(function(Di){return Di[0]}),evaluate:function(Di,oa){var Oi=Di.zoom;return $p({stops:gn,base:R.base},F,Oi).evaluate(Oi,oa)}}}if(ct){var qi=mt==="exponential"?{name:"exponential",base:R.base!==void 0?R.base:1}:null;return{kind:"camera",interpolationType:qi,interpolationFactor:Ks.interpolationFactor.bind(void 0,qi),zoomStops:R.stops.map(function(Di){return Di[0]}),evaluate:function(Di){return z(R,F,Di.zoom,$,ue)}}}return{kind:"source",evaluate:function(Di,oa){var Oi=oa&&oa.properties?oa.properties[R.property]:void 0;return Oi===void 0?qc(R.default,F.default):z(R,F,Oi,$,ue)}}}(this._parameters,this._specification))};function Du(h){var v=h.key,_=h.value,R=h.valueSpec||{},F=h.objectElementValidators||{},z=h.style,$=h.styleSpec,ue=[],Pe=Lo(_);if(Pe!=="object")return[new st(v,_,"object expected, "+Pe+" found")];for(var Qe in _){var ct=Qe.split(".")[0],mt=R[ct]||R["*"],Lt=void 0;if(F[ct])Lt=F[ct];else if(R[ct])Lt=uo;else if(F["*"])Lt=F["*"];else{if(!R["*"]){ue.push(new st(v,_[Qe],'unknown property "'+Qe+'"'));continue}Lt=uo}ue=ue.concat(Lt({key:(v&&v+".")+Qe,value:_[Qe],valueSpec:mt,style:z,styleSpec:$,object:_,objectKey:Qe},_))}for(var Ut in R)F[Ut]||R[Ut].required&&R[Ut].default===void 0&&_[Ut]===void 0&&ue.push(new st(v,_,'missing required property "'+Ut+'"'));return ue}function ah(h){var v=h.value,_=h.valueSpec,R=h.style,F=h.styleSpec,z=h.key,$=h.arrayElementValidator||uo;if(Lo(v)!=="array")return[new st(z,v,"array expected, "+Lo(v)+" found")];if(_.length&&v.length!==_.length)return[new st(z,v,"array length "+_.length+" expected, length "+v.length+" found")];if(_["min-length"]&&v.length<_["min-length"])return[new st(z,v,"array length at least "+_["min-length"]+" expected, length "+v.length+" found")];var ue={type:_.value,values:_.values};F.$version<7&&(ue.function=_.function),Lo(_.value)==="object"&&(ue=_.value);for(var Pe=[],Qe=0;Qe<v.length;Qe++)Pe=Pe.concat($({array:v,arrayIndex:Qe,value:v[Qe],valueSpec:ue,style:R,styleSpec:F,key:z+"["+Qe+"]"}));return Pe}function Xp(h){var v=h.key,_=h.value,R=h.valueSpec,F=Lo(_);return F==="number"&&_!=_&&(F="NaN"),F!=="number"?[new st(v,_,"number expected, "+F+" found")]:"minimum"in R&&_<R.minimum?[new st(v,_,_+" is less than the minimum value "+R.minimum)]:"maximum"in R&&_>R.maximum?[new st(v,_,_+" is greater than the maximum value "+R.maximum)]:[]}function Yp(h){var v,_,R,F=h.valueSpec,z=Fr(h.value.type),$={},ue=z!=="categorical"&&h.value.property===void 0,Pe=!ue,Qe=Lo(h.value.stops)==="array"&&Lo(h.value.stops[0])==="array"&&Lo(h.value.stops[0][0])==="object",ct=Du({key:h.key,value:h.value,valueSpec:h.styleSpec.function,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(Ut){if(z==="identity")return[new st(Ut.key,Ut.value,'identity function may not have a "stops" property')];var ur=[],fr=Ut.value;return ur=ur.concat(ah({key:Ut.key,value:fr,valueSpec:Ut.valueSpec,style:Ut.style,styleSpec:Ut.styleSpec,arrayElementValidator:mt})),Lo(fr)==="array"&&fr.length===0&&ur.push(new st(Ut.key,fr,"array must have at least one stop")),ur},default:function(Ut){return uo({key:Ut.key,value:Ut.value,valueSpec:F,style:Ut.style,styleSpec:Ut.styleSpec})}}});return z==="identity"&&ue&&ct.push(new st(h.key,h.value,'missing required property "property"')),z==="identity"||h.value.stops||ct.push(new st(h.key,h.value,'missing required property "stops"')),z==="exponential"&&h.valueSpec.expression&&!rl(h.valueSpec)&&ct.push(new st(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(Pe&&!Fs(h.valueSpec)?ct.push(new st(h.key,h.value,"property functions not supported")):ue&&!vl(h.valueSpec)&&ct.push(new st(h.key,h.value,"zoom functions not supported"))),z!=="categorical"&&!Qe||h.value.property!==void 0||ct.push(new st(h.key,h.value,'"property" property is required')),ct;function mt(Ut){var ur=[],fr=Ut.value,Lr=Ut.key;if(Lo(fr)!=="array")return[new st(Lr,fr,"array expected, "+Lo(fr)+" found")];if(fr.length!==2)return[new st(Lr,fr,"array length 2 expected, length "+fr.length+" found")];if(Qe){if(Lo(fr[0])!=="object")return[new st(Lr,fr,"object expected, "+Lo(fr[0])+" found")];if(fr[0].zoom===void 0)return[new st(Lr,fr,"object stop key must have zoom")];if(fr[0].value===void 0)return[new st(Lr,fr,"object stop key must have value")];if(R&&R>Fr(fr[0].zoom))return[new st(Lr,fr[0].zoom,"stop zoom values must appear in ascending order")];Fr(fr[0].zoom)!==R&&(R=Fr(fr[0].zoom),_=void 0,$={}),ur=ur.concat(Du({key:Lr+"[0]",value:fr[0],valueSpec:{zoom:{}},style:Ut.style,styleSpec:Ut.styleSpec,objectElementValidators:{zoom:Xp,value:Lt}}))}else ur=ur.concat(Lt({key:Lr+"[0]",value:fr[0],valueSpec:{},style:Ut.style,styleSpec:Ut.styleSpec},fr));return rh(Ft(fr[1]))?ur.concat([new st(Lr+"[1]",fr[1],"expressions are not allowed in function stops.")]):ur.concat(uo({key:Lr+"[1]",value:fr[1],valueSpec:F,style:Ut.style,styleSpec:Ut.styleSpec}))}function Lt(Ut,ur){var fr=Lo(Ut.value),Lr=Fr(Ut.value),Rr=Ut.value!==null?Ut.value:ur;if(v){if(fr!==v)return[new st(Ut.key,Rr,fr+" stop domain type must match previous stop domain type "+v)]}else v=fr;if(fr!=="number"&&fr!=="string"&&fr!=="boolean")return[new st(Ut.key,Rr,"stop domain value must be a number, string, or boolean")];if(fr!=="number"&&z!=="categorical"){var Yr="number expected, "+fr+" found";return Fs(F)&&z===void 0&&(Yr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new st(Ut.key,Rr,Yr)]}return z!=="categorical"||fr!=="number"||isFinite(Lr)&&Math.floor(Lr)===Lr?z!=="categorical"&&fr==="number"&&_!==void 0&&Lr<_?[new st(Ut.key,Rr,"stop domain values must appear in ascending order")]:(_=Lr,z==="categorical"&&Lr in $?[new st(Ut.key,Rr,"stop domain values must be unique")]:($[Lr]=!0,[])):[new st(Ut.key,Rr,"integer expected, found "+Lr)]}}function oh(h){var v=(h.expressionContext==="property"?Gs:nh)(Ft(h.value),h.valueSpec);if(v.result==="error")return v.value.map(function(R){return new st(""+h.key+R.key,h.value,R.message)});var _=v.value.expression||v.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!_.outputDefined())return[new st(h.key,h.value,'Invalid data expression for "'+h.propertyKey+'". Output values must be contained as literals within the expression.')];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!ru(_))return[new st(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!ru(_))return[new st(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Al(_,["zoom","feature-state"]))return[new st(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!cc(_))return[new st(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vc(h){var v=h.key,_=h.value,R=h.valueSpec,F=[];return Array.isArray(R.values)?R.values.indexOf(Fr(_))===-1&&F.push(new st(v,_,"expected one of ["+R.values.join(", ")+"], "+JSON.stringify(_)+" found")):Object.keys(R.values).indexOf(Fr(_))===-1&&F.push(new st(v,_,"expected one of ["+Object.keys(R.values).join(", ")+"], "+JSON.stringify(_)+" found")),F}function kh(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(var v=0,_=h.slice(1);v<_.length;v+=1){var R=_[v];if(!kh(R)&&typeof R!="boolean")return!1}return!0;default:return!0}}dc.deserialize=function(h){return new dc(h._parameters,h._specification)},dc.serialize=function(h){return{_parameters:h._parameters,_specification:h._specification}};var dp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Of(h){if(h==null)return{filter:function(){return!0},needGeometry:!1};kh(h)||(h=Ld(h));var v=nh(h,dp);if(v.result==="error")throw new Error(v.value.map(function(_){return _.key+": "+_.message}).join(", "));return{filter:function(_,R,F){return v.value.evaluate(_,R,{},F)},needGeometry:function _(R){if(!Array.isArray(R))return!1;if(R[0]==="within")return!0;for(var F=1;F<R.length;F++)if(_(R[F]))return!0;return!1}(h)}}function sg(h,v){return h<v?-1:h>v?1:0}function Ld(h){if(!h)return!0;var v,_=h[0];return h.length<=1?_!=="any":_==="=="?Dd(h[1],h[2],"=="):_==="!="?vp(Dd(h[1],h[2],"==")):_==="<"||_===">"||_==="<="||_===">="?Dd(h[1],h[2],_):_==="any"?(v=h.slice(1),["any"].concat(v.map(Ld))):_==="all"?["all"].concat(h.slice(1).map(Ld)):_==="none"?["all"].concat(h.slice(1).map(Ld).map(vp)):_==="in"?Ms(h[1],h.slice(2)):_==="!in"?vp(Ms(h[1],h.slice(2))):_==="has"?Lh(h[1]):_==="!has"?vp(Lh(h[1])):_!=="within"||h}function Dd(h,v,_){switch(h){case"$type":return["filter-type-"+_,v];case"$id":return["filter-id-"+_,v];default:return["filter-"+_,h,v]}}function Ms(h,v){if(v.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",v]];case"$id":return["filter-id-in",["literal",v]];default:return v.length>200&&!v.some(function(_){return typeof _!=typeof v[0]})?["filter-in-large",h,["literal",v.sort(sg)]]:["filter-in-small",h,["literal",v]]}}function Lh(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function vp(h){return["!",h]}function Kp(h){return kh(Ft(h.value))?oh(yr({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function v(_){var R=_.value,F=_.key;if(Lo(R)!=="array")return[new st(F,R,"array expected, "+Lo(R)+" found")];var z,$=_.styleSpec,ue=[];if(R.length<1)return[new st(F,R,"filter array must have at least 1 element")];switch(ue=ue.concat(vc({key:F+"[0]",value:R[0],valueSpec:$.filter_operator,style:_.style,styleSpec:_.styleSpec})),Fr(R[0])){case"<":case"<=":case">":case">=":R.length>=2&&Fr(R[1])==="$type"&&ue.push(new st(F,R,'"$type" cannot be use with operator "'+R[0]+'"'));case"==":case"!=":R.length!==3&&ue.push(new st(F,R,'filter array for operator "'+R[0]+'" must have 3 elements'));case"in":case"!in":R.length>=2&&(z=Lo(R[1]))!=="string"&&ue.push(new st(F+"[1]",R[1],"string expected, "+z+" found"));for(var Pe=2;Pe<R.length;Pe++)z=Lo(R[Pe]),Fr(R[1])==="$type"?ue=ue.concat(vc({key:F+"["+Pe+"]",value:R[Pe],valueSpec:$.geometry_type,style:_.style,styleSpec:_.styleSpec})):z!=="string"&&z!=="number"&&z!=="boolean"&&ue.push(new st(F+"["+Pe+"]",R[Pe],"string, number, or boolean expected, "+z+" found"));break;case"any":case"all":case"none":for(var Qe=1;Qe<R.length;Qe++)ue=ue.concat(v({key:F+"["+Qe+"]",value:R[Qe],style:_.style,styleSpec:_.styleSpec}));break;case"has":case"!has":z=Lo(R[1]),R.length!==2?ue.push(new st(F,R,'filter array for "'+R[0]+'" operator must have 2 elements')):z!=="string"&&ue.push(new st(F+"[1]",R[1],"string expected, "+z+" found"));break;case"within":z=Lo(R[1]),R.length!==2?ue.push(new st(F,R,'filter array for "'+R[0]+'" operator must have 2 elements')):z!=="object"&&ue.push(new st(F+"[1]",R[1],"object expected, "+z+" found"))}return ue}(h)}function gp(h,v){var _=h.key,R=h.style,F=h.styleSpec,z=h.value,$=h.objectKey,ue=F[v+"_"+h.layerType];if(!ue)return[];var Pe=$.match(/^(.*)-transition$/);if(v==="paint"&&Pe&&ue[Pe[1]]&&ue[Pe[1]].transition)return uo({key:_,value:z,valueSpec:F.transition,style:R,styleSpec:F});var Qe,ct=h.valueSpec||ue[$];if(!ct)return[new st(_,z,'unknown property "'+$+'"')];if(Lo(z)==="string"&&Fs(ct)&&!ct.tokens&&(Qe=/^{([^}]+)}$/.exec(z)))return[new st(_,z,'"'+$+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Qe[1])+" }`.")];var mt=[];return h.layerType==="symbol"&&($==="text-field"&&R&&!R.glyphs&&mt.push(new st(_,z,'use of "text-field" requires a style "glyphs" property')),$==="text-font"&&hp(Ft(z))&&Fr(z.type)==="identity"&&mt.push(new st(_,z,'"text-font" does not support identity functions'))),mt.concat(uo({key:h.key,value:z,valueSpec:ct,style:R,styleSpec:F,expressionContext:"property",propertyType:v,propertyKey:$}))}function Fd(h){return gp(h,"paint")}function Dh(h){return gp(h,"layout")}function Fh(h){var v=[],_=h.value,R=h.key,F=h.style,z=h.styleSpec;_.type||_.ref||v.push(new st(R,_,'either "type" or "ref" is required'));var $,ue=Fr(_.type),Pe=Fr(_.ref);if(_.id)for(var Qe=Fr(_.id),ct=0;ct<h.arrayIndex;ct++){var mt=F.layers[ct];Fr(mt.id)===Qe&&v.push(new st(R,_.id,'duplicate layer id "'+_.id+'", previously used at line '+mt.id.__line__))}if("ref"in _)["type","source","source-layer","filter","layout"].forEach(function(ur){ur in _&&v.push(new st(R,_[ur],'"'+ur+'" is prohibited for ref layers'))}),F.layers.forEach(function(ur){Fr(ur.id)===Pe&&($=ur)}),$?$.ref?v.push(new st(R,_.ref,"ref cannot reference another ref layer")):ue=Fr($.type):v.push(new st(R,_.ref,'ref layer "'+Pe+'" not found'));else if(ue!=="background")if(_.source){var Lt=F.sources&&F.sources[_.source],Ut=Lt&&Fr(Lt.type);Lt?Ut==="vector"&&ue==="raster"?v.push(new st(R,_.source,'layer "'+_.id+'" requires a raster source')):Ut==="raster"&&ue!=="raster"?v.push(new st(R,_.source,'layer "'+_.id+'" requires a vector source')):Ut!=="vector"||_["source-layer"]?Ut==="raster-dem"&&ue!=="hillshade"?v.push(new st(R,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):ue!=="line"||!_.paint||!_.paint["line-gradient"]||Ut==="geojson"&&Lt.lineMetrics||v.push(new st(R,_,'layer "'+_.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):v.push(new st(R,_,'layer "'+_.id+'" must specify a "source-layer"')):v.push(new st(R,_.source,'source "'+_.source+'" not found'))}else v.push(new st(R,_,'missing required property "source"'));return v=v.concat(Du({key:R,value:_,valueSpec:z.layer,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return uo({key:R+".type",value:_.type,valueSpec:z.layer.type,style:h.style,styleSpec:h.styleSpec,object:_,objectKey:"type"})},filter:Kp,layout:function(ur){return Du({layer:_,key:ur.key,value:ur.value,style:ur.style,styleSpec:ur.styleSpec,objectElementValidators:{"*":function(fr){return Dh(yr({layerType:ue},fr))}}})},paint:function(ur){return Du({layer:_,key:ur.key,value:ur.value,style:ur.style,styleSpec:ur.styleSpec,objectElementValidators:{"*":function(fr){return Fd(yr({layerType:ue},fr))}}})}}}))}function kf(h){var v=h.value,_=h.key,R=Lo(v);return R!=="string"?[new st(_,v,"string expected, "+R+" found")]:[]}var cs={promoteId:function(h){var v=h.key,_=h.value;if(Lo(_)==="string")return kf({key:v,value:_});var R=[];for(var F in _)R.push.apply(R,kf({key:v+"."+F,value:_[F]}));return R}};function mp(h){var v=h.value,_=h.key,R=h.styleSpec,F=h.style;if(!v.type)return[new st(_,v,'"type" is required')];var z,$=Fr(v.type);switch($){case"vector":case"raster":case"raster-dem":return Du({key:_,value:v,valueSpec:R["source_"+$.replace("-","_")],style:h.style,styleSpec:R,objectElementValidators:cs});case"geojson":if(z=Du({key:_,value:v,valueSpec:R.source_geojson,style:F,styleSpec:R,objectElementValidators:cs}),v.cluster)for(var ue in v.clusterProperties){var Pe=v.clusterProperties[ue],Qe=Pe[0],ct=typeof Qe=="string"?[Qe,["accumulated"],["get",ue]]:Qe;z.push.apply(z,oh({key:_+"."+ue+".map",value:Pe[1],expressionContext:"cluster-map"})),z.push.apply(z,oh({key:_+"."+ue+".reduce",value:ct,expressionContext:"cluster-reduce"}))}return z;case"video":return Du({key:_,value:v,valueSpec:R.source_video,style:F,styleSpec:R});case"image":return Du({key:_,value:v,valueSpec:R.source_image,style:F,styleSpec:R});case"canvas":return[new st(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vc({key:_+".type",value:v.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:F,styleSpec:R})}}function tc(h){var v=h.value,_=h.styleSpec,R=_.light,F=h.style,z=[],$=Lo(v);if(v===void 0)return z;if($!=="object")return z.concat([new st("light",v,"object expected, "+$+" found")]);for(var ue in v){var Pe=ue.match(/^(.*)-transition$/);z=z.concat(Pe&&R[Pe[1]]&&R[Pe[1]].transition?uo({key:ue,value:v[ue],valueSpec:_.transition,style:F,styleSpec:_}):R[ue]?uo({key:ue,value:v[ue],valueSpec:R[ue],style:F,styleSpec:_}):[new st(ue,v[ue],'unknown property "'+ue+'"')])}return z}var gc={"*":function(){return[]},array:ah,boolean:function(h){var v=h.value,_=h.key,R=Lo(v);return R!=="boolean"?[new st(_,v,"boolean expected, "+R+" found")]:[]},number:Xp,color:function(h){var v=h.key,_=h.value,R=Lo(_);return R!=="string"?[new st(v,_,"color expected, "+R+" found")]:Si(_)===null?[new st(v,_,'color expected, "'+_+'" found')]:[]},constants:Pt,enum:vc,filter:Kp,function:Yp,layer:Fh,object:Du,source:mp,light:tc,string:kf,formatted:function(h){return kf(h).length===0?[]:oh(h)},resolvedImage:function(h){return kf(h).length===0?[]:oh(h)}};function uo(h){var v=h.value,_=h.valueSpec,R=h.styleSpec;return _.expression&&hp(Fr(v))?Yp(h):_.expression&&rh(Ft(v))?oh(h):_.type&&gc[_.type]?gc[_.type](h):Du(yr({},h,{valueSpec:_.type?R[_.type]:_}))}function fs(h){var v=h.value,_=h.key,R=kf(h);return R.length||(v.indexOf("{fontstack}")===-1&&R.push(new st(_,v,'"glyphs" url must include a "{fontstack}" token')),v.indexOf("{range}")===-1&&R.push(new st(_,v,'"glyphs" url must include a "{range}" token'))),R}function no(h,v){v===void 0&&(v=At);var _=[];return _=_.concat(uo({key:"",value:h,valueSpec:v.$root,styleSpec:v,style:h,objectElementValidators:{glyphs:fs,"*":function(){return[]}}})),h.constants&&(_=_.concat(Pt({key:"constants",value:h.constants,style:h,styleSpec:v}))),qp(_)}function qp(h){return[].concat(h).sort(function(v,_){return v.line-_.line})}function sh(h){return function(){for(var v=[],_=arguments.length;_--;)v[_]=arguments[_];return qp(h.apply(this,v))}}no.source=sh(mp),no.light=sh(tc),no.layer=sh(Fh),no.filter=sh(Kp),no.paintProperty=sh(Fd),no.layoutProperty=sh(Dh);var yp=no,Bd=yp.light,Ea=yp.paintProperty,uh=yp.layoutProperty;function Lf(h,v){var _=!1;if(v&&v.length)for(var R=0,F=v;R<F.length;R+=1)h.fire(new Gt(new Error(F[R].message))),_=!0;return _}var iu=us;function us(h,v,_){var R=this.cells=[];if(h instanceof ArrayBuffer){this.arrayBuffer=h;var F=new Int32Array(this.arrayBuffer);h=F[0],this.d=(v=F[1])+2*(_=F[2]);for(var z=0;z<this.d*this.d;z++){var $=F[3+z],ue=F[3+z+1];R.push($===ue?null:F.subarray($,ue))}var Pe=F[3+R.length+1];this.keys=F.subarray(F[3+R.length],Pe),this.bboxes=F.subarray(Pe),this.insert=this._insertReadonly}else{this.d=v+2*_;for(var Qe=0;Qe<this.d*this.d;Qe++)R.push([]);this.keys=[],this.bboxes=[]}this.n=v,this.extent=h,this.padding=_,this.scale=v/h,this.uid=0;var ct=_/v*h;this.min=-ct,this.max=h+ct}us.prototype.insert=function(h,v,_,R,F){this._forEachCell(v,_,R,F,this._insertCell,this.uid++),this.keys.push(h),this.bboxes.push(v),this.bboxes.push(_),this.bboxes.push(R),this.bboxes.push(F)},us.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},us.prototype._insertCell=function(h,v,_,R,F,z){this.cells[F].push(z)},us.prototype.query=function(h,v,_,R,F){var z=this.min,$=this.max;if(h<=z&&v<=z&&$<=_&&$<=R&&!F)return Array.prototype.slice.call(this.keys);var ue=[];return this._forEachCell(h,v,_,R,this._queryCell,ue,{},F),ue},us.prototype._queryCell=function(h,v,_,R,F,z,$,ue){var Pe=this.cells[F];if(Pe!==null)for(var Qe=this.keys,ct=this.bboxes,mt=0;mt<Pe.length;mt++){var Lt=Pe[mt];if($[Lt]===void 0){var Ut=4*Lt;(ue?ue(ct[Ut+0],ct[Ut+1],ct[Ut+2],ct[Ut+3]):h<=ct[Ut+2]&&v<=ct[Ut+3]&&_>=ct[Ut+0]&&R>=ct[Ut+1])?($[Lt]=!0,z.push(Qe[Lt])):$[Lt]=!1}}},us.prototype._forEachCell=function(h,v,_,R,F,z,$,ue){for(var Pe=this._convertToCellCoord(h),Qe=this._convertToCellCoord(v),ct=this._convertToCellCoord(_),mt=this._convertToCellCoord(R),Lt=Pe;Lt<=ct;Lt++)for(var Ut=Qe;Ut<=mt;Ut++){var ur=this.d*Ut+Lt;if((!ue||ue(this._convertFromCellCoord(Lt),this._convertFromCellCoord(Ut),this._convertFromCellCoord(Lt+1),this._convertFromCellCoord(Ut+1)))&&F.call(this,h,v,_,R,ur,z,$,ue))return}},us.prototype._convertFromCellCoord=function(h){return(h-this.padding)/this.scale},us.prototype._convertToCellCoord=function(h){return Math.max(0,Math.min(this.d-1,Math.floor(h*this.scale)+this.padding))},us.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var h=this.cells,v=3+this.cells.length+1+1,_=0,R=0;R<this.cells.length;R++)_+=this.cells[R].length;var F=new Int32Array(v+_+this.keys.length+this.bboxes.length);F[0]=this.extent,F[1]=this.n,F[2]=this.padding;for(var z=v,$=0;$<h.length;$++){var ue=h[$];F[3+$]=z,F.set(ue,z),z+=ue.length}return F[3+h.length]=z,F.set(this.keys,z),F[3+h.length+1]=z+=this.keys.length,F.set(this.bboxes,z),z+=this.bboxes.length,F.buffer};var lh=te.ImageData,Nd=te.ImageBitmap,ys={};function zi(h,v,_){_===void 0&&(_={}),Object.defineProperty(v,"_classRegistryKey",{value:h,writeable:!1}),ys[h]={klass:v,omit:_.omit||[],shallow:_.shallow||[]}}for(var nl in zi("Object",Object),iu.serialize=function(h,v){var _=h.toArrayBuffer();return v&&v.push(_),{buffer:_}},iu.deserialize=function(h){return new iu(h.buffer)},zi("Grid",iu),zi("Color",Qi),zi("Error",Error),zi("ResolvedImage",Po),zi("StylePropertyFunction",dc),zi("StyleExpression",vf,{omit:["_evaluator"]}),zi("ZoomDependentExpression",ih),zi("ZoomConstantExpression",Pf),zi("CompoundExpression",ro,{omit:["_evaluate"]}),mr)mr[nl]._classRegistryKey||zi("Expression_"+nl,mr[nl]);function rc(h){return h&&typeof ArrayBuffer!="undefined"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function ch(h){return Nd&&h instanceof Nd}function gl(h,v){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp)return h;if(rc(h)||ch(h))return v&&v.push(h),h;if(ArrayBuffer.isView(h)){var _=h;return v&&v.push(_.buffer),_}if(h instanceof lh)return v&&v.push(h.data.buffer),h;if(Array.isArray(h)){for(var R=[],F=0,z=h;F<z.length;F+=1)R.push(gl(z[F],v));return R}if(typeof h=="object"){var $=h.constructor,ue=$._classRegistryKey;if(!ue)throw new Error("can't serialize object of unregistered class");var Pe=$.serialize?$.serialize(h,v):{};if(!$.serialize){for(var Qe in h)if(h.hasOwnProperty(Qe)&&!(ys[ue].omit.indexOf(Qe)>=0)){var ct=h[Qe];Pe[Qe]=ys[ue].shallow.indexOf(Qe)>=0?ct:gl(ct,v)}h instanceof Error&&(Pe.message=h.message)}if(Pe.$name)throw new Error("$name property is reserved for worker serialization logic.");return ue!=="Object"&&(Pe.$name=ue),Pe}throw new Error("can't serialize object of type "+typeof h)}function Zo(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||rc(h)||ch(h)||ArrayBuffer.isView(h)||h instanceof lh)return h;if(Array.isArray(h))return h.map(Zo);if(typeof h=="object"){var v=h.$name||"Object",_=ys[v].klass;if(!_)throw new Error("can't deserialize unregistered class "+v);if(_.deserialize)return _.deserialize(h);for(var R=Object.create(_.prototype),F=0,z=Object.keys(h);F<z.length;F+=1){var $=z[F];if($!=="$name"){var ue=h[$];R[$]=ys[v].shallow.indexOf($)>=0?ue:Zo(ue)}}return R}throw new Error("can't deserialize object of type "+typeof h)}var Qp=function(){this.first=!0};Qp.prototype.update=function(h,v){var _=Math.floor(h);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=h,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=v):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=v),h!==this.lastZoom&&(this.lastZoom=h,this.lastFloorZoom=_,!0))};var Yn={"Latin-1 Supplement":function(h){return h>=128&&h<=255},Arabic:function(h){return h>=1536&&h<=1791},"Arabic Supplement":function(h){return h>=1872&&h<=1919},"Arabic Extended-A":function(h){return h>=2208&&h<=2303},"Hangul Jamo":function(h){return h>=4352&&h<=4607},"Unified Canadian Aboriginal Syllabics":function(h){return h>=5120&&h<=5759},Khmer:function(h){return h>=6016&&h<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(h){return h>=6320&&h<=6399},"General Punctuation":function(h){return h>=8192&&h<=8303},"Letterlike Symbols":function(h){return h>=8448&&h<=8527},"Number Forms":function(h){return h>=8528&&h<=8591},"Miscellaneous Technical":function(h){return h>=8960&&h<=9215},"Control Pictures":function(h){return h>=9216&&h<=9279},"Optical Character Recognition":function(h){return h>=9280&&h<=9311},"Enclosed Alphanumerics":function(h){return h>=9312&&h<=9471},"Geometric Shapes":function(h){return h>=9632&&h<=9727},"Miscellaneous Symbols":function(h){return h>=9728&&h<=9983},"Miscellaneous Symbols and Arrows":function(h){return h>=11008&&h<=11263},"CJK Radicals Supplement":function(h){return h>=11904&&h<=12031},"Kangxi Radicals":function(h){return h>=12032&&h<=12255},"Ideographic Description Characters":function(h){return h>=12272&&h<=12287},"CJK Symbols and Punctuation":function(h){return h>=12288&&h<=12351},Hiragana:function(h){return h>=12352&&h<=12447},Katakana:function(h){return h>=12448&&h<=12543},Bopomofo:function(h){return h>=12544&&h<=12591},"Hangul Compatibility Jamo":function(h){return h>=12592&&h<=12687},Kanbun:function(h){return h>=12688&&h<=12703},"Bopomofo Extended":function(h){return h>=12704&&h<=12735},"CJK Strokes":function(h){return h>=12736&&h<=12783},"Katakana Phonetic Extensions":function(h){return h>=12784&&h<=12799},"Enclosed CJK Letters and Months":function(h){return h>=12800&&h<=13055},"CJK Compatibility":function(h){return h>=13056&&h<=13311},"CJK Unified Ideographs Extension A":function(h){return h>=13312&&h<=19903},"Yijing Hexagram Symbols":function(h){return h>=19904&&h<=19967},"CJK Unified Ideographs":function(h){return h>=19968&&h<=40959},"Yi Syllables":function(h){return h>=40960&&h<=42127},"Yi Radicals":function(h){return h>=42128&&h<=42191},"Hangul Jamo Extended-A":function(h){return h>=43360&&h<=43391},"Hangul Syllables":function(h){return h>=44032&&h<=55215},"Hangul Jamo Extended-B":function(h){return h>=55216&&h<=55295},"Private Use Area":function(h){return h>=57344&&h<=63743},"CJK Compatibility Ideographs":function(h){return h>=63744&&h<=64255},"Arabic Presentation Forms-A":function(h){return h>=64336&&h<=65023},"Vertical Forms":function(h){return h>=65040&&h<=65055},"CJK Compatibility Forms":function(h){return h>=65072&&h<=65103},"Small Form Variants":function(h){return h>=65104&&h<=65135},"Arabic Presentation Forms-B":function(h){return h>=65136&&h<=65279},"Halfwidth and Fullwidth Forms":function(h){return h>=65280&&h<=65519}};function Qc(h){for(var v=0,_=h;v<_.length;v+=1)if(kc(_[v].charCodeAt(0)))return!0;return!1}function kc(h){return!(h!==746&&h!==747&&(h<4352||!(Yn["Bopomofo Extended"](h)||Yn.Bopomofo(h)||Yn["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Yn["CJK Compatibility Ideographs"](h)||Yn["CJK Compatibility"](h)||Yn["CJK Radicals Supplement"](h)||Yn["CJK Strokes"](h)||!(!Yn["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Yn["CJK Unified Ideographs Extension A"](h)||Yn["CJK Unified Ideographs"](h)||Yn["Enclosed CJK Letters and Months"](h)||Yn["Hangul Compatibility Jamo"](h)||Yn["Hangul Jamo Extended-A"](h)||Yn["Hangul Jamo Extended-B"](h)||Yn["Hangul Jamo"](h)||Yn["Hangul Syllables"](h)||Yn.Hiragana(h)||Yn["Ideographic Description Characters"](h)||Yn.Kanbun(h)||Yn["Kangxi Radicals"](h)||Yn["Katakana Phonetic Extensions"](h)||Yn.Katakana(h)&&h!==12540||!(!Yn["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Yn["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Yn["Unified Canadian Aboriginal Syllabics"](h)||Yn["Unified Canadian Aboriginal Syllabics Extended"](h)||Yn["Vertical Forms"](h)||Yn["Yijing Hexagram Symbols"](h)||Yn["Yi Syllables"](h)||Yn["Yi Radicals"](h))))}function _p(h){return!(kc(h)||function(v){return!!(Yn["Latin-1 Supplement"](v)&&(v===167||v===169||v===174||v===177||v===188||v===189||v===190||v===215||v===247)||Yn["General Punctuation"](v)&&(v===8214||v===8224||v===8225||v===8240||v===8241||v===8251||v===8252||v===8258||v===8263||v===8264||v===8265||v===8273)||Yn["Letterlike Symbols"](v)||Yn["Number Forms"](v)||Yn["Miscellaneous Technical"](v)&&(v>=8960&&v<=8967||v>=8972&&v<=8991||v>=8996&&v<=9e3||v===9003||v>=9085&&v<=9114||v>=9150&&v<=9165||v===9167||v>=9169&&v<=9179||v>=9186&&v<=9215)||Yn["Control Pictures"](v)&&v!==9251||Yn["Optical Character Recognition"](v)||Yn["Enclosed Alphanumerics"](v)||Yn["Geometric Shapes"](v)||Yn["Miscellaneous Symbols"](v)&&!(v>=9754&&v<=9759)||Yn["Miscellaneous Symbols and Arrows"](v)&&(v>=11026&&v<=11055||v>=11088&&v<=11097||v>=11192&&v<=11243)||Yn["CJK Symbols and Punctuation"](v)||Yn.Katakana(v)||Yn["Private Use Area"](v)||Yn["CJK Compatibility Forms"](v)||Yn["Small Form Variants"](v)||Yn["Halfwidth and Fullwidth Forms"](v)||v===8734||v===8756||v===8757||v>=9984&&v<=10087||v>=10102&&v<=10131||v===65532||v===65533)}(h))}function mc(h){return h>=1424&&h<=2303||Yn["Arabic Presentation Forms-A"](h)||Yn["Arabic Presentation Forms-B"](h)}function il(h,v){return!(!v&&mc(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Yn.Khmer(h))}function Bh(h){for(var v=0,_=h;v<_.length;v+=1)if(mc(_[v].charCodeAt(0)))return!0;return!1}var gf=null,Bs="unavailable",Ml=null,zd=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(Bs="error"),gf&&gf(h)};function xp(){Df.fire(new St("pluginStateChange",{pluginStatus:Bs,pluginURL:Ml}))}var Df=new gr,xv=function(){return Bs},nc=function(){if(Bs!=="deferred"||!Ml)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Bs="loading",xp(),Ml&&wt({url:Ml},function(h){h?zd(h):(Bs="loaded",xp())})},ic={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Bs==="loaded"||ic.applyArabicShaping!=null},isLoading:function(){return Bs==="loading"},setState:function(h){Bs=h.pluginStatus,Ml=h.pluginURL},isParsed:function(){return ic.applyArabicShaping!=null&&ic.processBidirectionalText!=null&&ic.processStyledBidirectionalText!=null},getPluginURL:function(){return Ml}},wa=function(h,v){this.zoom=h,v?(this.now=v.now,this.fadeDuration=v.fadeDuration,this.zoomHistory=v.zoomHistory,this.transition=v.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Qp,this.transition={})};wa.prototype.isSupportedScript=function(h){return function(v,_){for(var R=0,F=v;R<F.length;R+=1)if(!il(F[R].charCodeAt(0),_))return!1;return!0}(h,ic.isLoaded())},wa.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},wa.prototype.getCrossfadeParameters=function(){var h=this.zoom,v=h-Math.floor(h),_=this.crossFadingFactor();return h>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:v+(1-v)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*v}};var Rs=function(h,v){this.property=h,this.value=v,this.expression=function(_,R){if(hp(_))return new dc(_,R);if(rh(_)){var F=Gs(_,R);if(F.result==="error")throw new Error(F.value.map(function($){return $.key+": "+$.message}).join(", "));return F.value}var z=_;return typeof _=="string"&&R.type==="color"&&(z=Qi.parse(_)),{kind:"constant",evaluate:function(){return z}}}(v===void 0?h.specification.default:v,h.specification)};Rs.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Rs.prototype.possiblyEvaluate=function(h,v,_){return this.property.possiblyEvaluate(this,h,v,_)};var Nl=function(h){this.property=h,this.value=new Rs(h,void 0)};Nl.prototype.transitioned=function(h,v){return new fh(this.property,this.value,v,E({},h.transition,this.transition),h.now)},Nl.prototype.untransitioned=function(){return new fh(this.property,this.value,null,{},0)};var Wu=function(h){this._properties=h,this._values=Object.create(h.defaultTransitionablePropertyValues)};Wu.prototype.getValue=function(h){return xe(this._values[h].value.value)},Wu.prototype.setValue=function(h,v){this._values.hasOwnProperty(h)||(this._values[h]=new Nl(this._values[h].property)),this._values[h].value=new Rs(this._values[h].property,v===null?void 0:xe(v))},Wu.prototype.getTransition=function(h){return xe(this._values[h].transition)},Wu.prototype.setTransition=function(h,v){this._values.hasOwnProperty(h)||(this._values[h]=new Nl(this._values[h].property)),this._values[h].transition=xe(v)||void 0},Wu.prototype.serialize=function(){for(var h={},v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v],F=this.getValue(R);F!==void 0&&(h[R]=F);var z=this.getTransition(R);z!==void 0&&(h[R+"-transition"]=z)}return h},Wu.prototype.transitioned=function(h,v){for(var _=new Jc(this._properties),R=0,F=Object.keys(this._values);R<F.length;R+=1){var z=F[R];_._values[z]=this._values[z].transitioned(h,v._values[z])}return _},Wu.prototype.untransitioned=function(){for(var h=new Jc(this._properties),v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v];h._values[R]=this._values[R].untransitioned()}return h};var fh=function(h,v,_,R,F){this.property=h,this.value=v,this.begin=F+R.delay||0,this.end=this.begin+R.duration||0,h.specification.transition&&(R.delay||R.duration)&&(this.prior=_)};fh.prototype.possiblyEvaluate=function(h,v,_){var R=h.now||0,F=this.value.possiblyEvaluate(h,v,_),z=this.prior;if(z){if(R>this.end)return this.prior=null,F;if(this.value.isDataDriven())return this.prior=null,F;if(R<this.begin)return z.possiblyEvaluate(h,v,_);var $=(R-this.begin)/(this.end-this.begin);return this.property.interpolate(z.possiblyEvaluate(h,v,_),F,function(ue){if(ue<=0)return 0;if(ue>=1)return 1;var Pe=ue*ue,Qe=Pe*ue;return 4*(ue<.5?Qe:3*(ue-Pe)+Qe-.75)}($))}return F};var Jc=function(h){this._properties=h,this._values=Object.create(h.defaultTransitioningPropertyValues)};Jc.prototype.possiblyEvaluate=function(h,v,_){for(var R=new mf(this._properties),F=0,z=Object.keys(this._values);F<z.length;F+=1){var $=z[F];R._values[$]=this._values[$].possiblyEvaluate(h,v,_)}return R},Jc.prototype.hasTransition=function(){for(var h=0,v=Object.keys(this._values);h<v.length;h+=1)if(this._values[v[h]].prior)return!0;return!1};var Fu=function(h){this._properties=h,this._values=Object.create(h.defaultPropertyValues)};Fu.prototype.getValue=function(h){return xe(this._values[h].value)},Fu.prototype.setValue=function(h,v){this._values[h]=new Rs(this._values[h].property,v===null?void 0:xe(v))},Fu.prototype.serialize=function(){for(var h={},v=0,_=Object.keys(this._values);v<_.length;v+=1){var R=_[v],F=this.getValue(R);F!==void 0&&(h[R]=F)}return h},Fu.prototype.possiblyEvaluate=function(h,v,_){for(var R=new mf(this._properties),F=0,z=Object.keys(this._values);F<z.length;F+=1){var $=z[F];R._values[$]=this._values[$].possiblyEvaluate(h,v,_)}return R};var ml=function(h,v,_){this.property=h,this.value=v,this.parameters=_};ml.prototype.isConstant=function(){return this.value.kind==="constant"},ml.prototype.constantOr=function(h){return this.value.kind==="constant"?this.value.value:h},ml.prototype.evaluate=function(h,v,_,R){return this.property.evaluate(this.value,this.parameters,h,v,_,R)};var mf=function(h){this._properties=h,this._values=Object.create(h.defaultPossiblyEvaluatedValues)};mf.prototype.get=function(h){return this._values[h]};var Ji=function(h){this.specification=h};Ji.prototype.possiblyEvaluate=function(h,v){return h.expression.evaluate(v)},Ji.prototype.interpolate=function(h,v,_){var R=Mc[this.specification.type];return R?R(h,v,_):h};var Ai=function(h,v){this.specification=h,this.overrides=v};Ai.prototype.possiblyEvaluate=function(h,v,_,R){return new ml(this,h.expression.kind==="constant"||h.expression.kind==="camera"?{kind:"constant",value:h.expression.evaluate(v,null,{},_,R)}:h.expression,v)},Ai.prototype.interpolate=function(h,v,_){if(h.value.kind!=="constant"||v.value.kind!=="constant")return h;if(h.value.value===void 0||v.value.value===void 0)return new ml(this,{kind:"constant",value:void 0},h.parameters);var R=Mc[this.specification.type];return R?new ml(this,{kind:"constant",value:R(h.value.value,v.value.value,_)},h.parameters):h},Ai.prototype.evaluate=function(h,v,_,R,F,z){return h.kind==="constant"?h.value:h.evaluate(v,_,R,F,z)};var al=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(_,R,F,z){if(_.value===void 0)return new ml(this,{kind:"constant",value:void 0},R);if(_.expression.kind==="constant"){var $=_.expression.evaluate(R,null,{},F,z),ue=_.property.specification.type==="resolvedImage"&&typeof $!="string"?$.name:$,Pe=this._calculate(ue,ue,ue,R);return new ml(this,{kind:"constant",value:Pe},R)}if(_.expression.kind==="camera"){var Qe=this._calculate(_.expression.evaluate({zoom:R.zoom-1}),_.expression.evaluate({zoom:R.zoom}),_.expression.evaluate({zoom:R.zoom+1}),R);return new ml(this,{kind:"constant",value:Qe},R)}return new ml(this,_.expression,R)},v.prototype.evaluate=function(_,R,F,z,$,ue){if(_.kind==="source"){var Pe=_.evaluate(R,F,z,$,ue);return this._calculate(Pe,Pe,Pe,R)}return _.kind==="composite"?this._calculate(_.evaluate({zoom:Math.floor(R.zoom)-1},F,z),_.evaluate({zoom:Math.floor(R.zoom)},F,z),_.evaluate({zoom:Math.floor(R.zoom)+1},F,z),R):_.value},v.prototype._calculate=function(_,R,F,z){return z.zoom>z.zoomHistory.lastIntegerZoom?{from:_,to:R}:{from:F,to:R}},v.prototype.interpolate=function(_){return _},v}(Ai),yl=function(h){this.specification=h};yl.prototype.possiblyEvaluate=function(h,v,_,R){if(h.value!==void 0){if(h.expression.kind==="constant"){var F=h.expression.evaluate(v,null,{},_,R);return this._calculate(F,F,F,v)}return this._calculate(h.expression.evaluate(new wa(Math.floor(v.zoom-1),v)),h.expression.evaluate(new wa(Math.floor(v.zoom),v)),h.expression.evaluate(new wa(Math.floor(v.zoom+1),v)),v)}},yl.prototype._calculate=function(h,v,_,R){return R.zoom>R.zoomHistory.lastIntegerZoom?{from:h,to:v}:{from:_,to:v}},yl.prototype.interpolate=function(h){return h};var ol=function(h){this.specification=h};ol.prototype.possiblyEvaluate=function(h,v,_,R){return!!h.expression.evaluate(v,null,{},_,R)},ol.prototype.interpolate=function(){return!1};var _s=function(h){for(var v in this.properties=h,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],h){var _=h[v];_.specification.overridable&&this.overridableProperties.push(v);var R=this.defaultPropertyValues[v]=new Rs(_,void 0),F=this.defaultTransitionablePropertyValues[v]=new Nl(_);this.defaultTransitioningPropertyValues[v]=F.untransitioned(),this.defaultPossiblyEvaluatedValues[v]=R.possiblyEvaluate({})}};zi("DataDrivenProperty",Ai),zi("DataConstantProperty",Ji),zi("CrossFadedDataDrivenProperty",al),zi("CrossFadedProperty",yl),zi("ColorRampProperty",ol);var yc=function(h){function v(_,R){if(h.call(this),this.id=_.id,this.type=_.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},_.type!=="custom"&&(this.metadata=(_=_).metadata,this.minzoom=_.minzoom,this.maxzoom=_.maxzoom,_.type!=="background"&&(this.source=_.source,this.sourceLayer=_["source-layer"],this.filter=_.filter),R.layout&&(this._unevaluatedLayout=new Fu(R.layout)),R.paint)){for(var F in this._transitionablePaint=new Wu(R.paint),_.paint)this.setPaintProperty(F,_.paint[F],{validate:!1});for(var z in _.layout)this.setLayoutProperty(z,_.layout[z],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new mf(R.paint)}}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},v.prototype.getLayoutProperty=function(_){return _==="visibility"?this.visibility:this._unevaluatedLayout.getValue(_)},v.prototype.setLayoutProperty=function(_,R,F){F===void 0&&(F={}),R!=null&&this._validate(uh,"layers."+this.id+".layout."+_,_,R,F)||(_!=="visibility"?this._unevaluatedLayout.setValue(_,R):this.visibility=R)},v.prototype.getPaintProperty=function(_){return at(_,"-transition")?this._transitionablePaint.getTransition(_.slice(0,-11)):this._transitionablePaint.getValue(_)},v.prototype.setPaintProperty=function(_,R,F){if(F===void 0&&(F={}),R!=null&&this._validate(Ea,"layers."+this.id+".paint."+_,_,R,F))return!1;if(at(_,"-transition"))return this._transitionablePaint.setTransition(_.slice(0,-11),R||void 0),!1;var z=this._transitionablePaint._values[_],$=z.property.specification["property-type"]==="cross-faded-data-driven",ue=z.value.isDataDriven(),Pe=z.value;this._transitionablePaint.setValue(_,R),this._handleSpecialPaintPropertyUpdate(_);var Qe=this._transitionablePaint._values[_].value;return Qe.isDataDriven()||ue||$||this._handleOverridablePaintPropertyUpdate(_,Pe,Qe)},v.prototype._handleSpecialPaintPropertyUpdate=function(_){},v.prototype._handleOverridablePaintPropertyUpdate=function(_,R,F){return!1},v.prototype.isHidden=function(_){return!!(this.minzoom&&_<this.minzoom)||!!(this.maxzoom&&_>=this.maxzoom)||this.visibility==="none"},v.prototype.updateTransitions=function(_){this._transitioningPaint=this._transitionablePaint.transitioned(_,this._transitioningPaint)},v.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},v.prototype.recalculate=function(_,R){_.getCrossfadeParameters&&(this._crossfadeParameters=_.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(_,void 0,R)),this.paint=this._transitioningPaint.possiblyEvaluate(_,void 0,R)},v.prototype.serialize=function(){var _={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(_.layout=_.layout||{},_.layout.visibility=this.visibility),Ze(_,function(R,F){return!(R===void 0||F==="layout"&&!Object.keys(R).length||F==="paint"&&!Object.keys(R).length)})},v.prototype._validate=function(_,R,F,z,$){return $===void 0&&($={}),(!$||$.validate!==!1)&&Lf(this,_.call(yp,{key:R,layerType:this.type,objectKey:F,value:z,styleSpec:At,style:{glyphs:!0,sprite:!0}}))},v.prototype.is3D=function(){return!1},v.prototype.isTileClipped=function(){return!1},v.prototype.hasOffscreenPass=function(){return!1},v.prototype.resize=function(){},v.prototype.isStateDependent=function(){for(var _ in this.paint._values){var R=this.paint.get(_);if(R instanceof ml&&Fs(R.property.specification)&&(R.value.kind==="source"||R.value.kind==="composite")&&R.value.isStateDependent)return!0}return!1},v}(gr),yf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Nh=function(h,v){this._structArray=h,this._pos1=v*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},zo=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function au(h,v){v===void 0&&(v=1);var _=0,R=0;return{members:h.map(function(F){var z=yf[F.type].BYTES_PER_ELEMENT,$=_=Jp(_,Math.max(v,z)),ue=F.components||1;return R=Math.max(R,z),_+=z*ue,{name:F.name,type:F.type,components:ue,offset:$}}),size:Jp(_,Math.max(R,v)),alignment:v}}function Jp(h,v){return Math.ceil(h/v)*v}zo.serialize=function(h,v){return h._trim(),v&&(h.isTransferred=!0,v.push(h.arrayBuffer)),{length:h.length,arrayBuffer:h.arrayBuffer}},zo.deserialize=function(h){var v=Object.create(this.prototype);return v.arrayBuffer=h.arrayBuffer,v.length=h.length,v.capacity=h.arrayBuffer.byteLength/v.bytesPerElement,v._refreshViews(),v},zo.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},zo.prototype.clear=function(){this.length=0},zo.prototype.resize=function(h){this.reserve(h),this.length=h},zo.prototype.reserve=function(h){if(h>this.capacity){this.capacity=Math.max(h,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var v=this.uint8;this._refreshViews(),v&&this.uint8.set(v)}},zo.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var zh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var F=this.length;return this.resize(F+1),this.emplace(F,_,R)},v.prototype.emplace=function(_,R,F){var z=2*_;return this.int16[z+0]=R,this.int16[z+1]=F,_},v}(zo);zh.prototype.bytesPerElement=4,zi("StructArrayLayout2i4",zh);var Ff=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z){var $=this.length;return this.resize($+1),this.emplace($,_,R,F,z)},v.prototype.emplace=function(_,R,F,z,$){var ue=4*_;return this.int16[ue+0]=R,this.int16[ue+1]=F,this.int16[ue+2]=z,this.int16[ue+3]=$,_},v}(zo);Ff.prototype.bytesPerElement=8,zi("StructArrayLayout4i8",Ff);var _c=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,$,ue){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,_,R,F,z,$,ue)},v.prototype.emplace=function(_,R,F,z,$,ue,Pe){var Qe=6*_;return this.int16[Qe+0]=R,this.int16[Qe+1]=F,this.int16[Qe+2]=z,this.int16[Qe+3]=$,this.int16[Qe+4]=ue,this.int16[Qe+5]=Pe,_},v}(zo);_c.prototype.bytesPerElement=12,zi("StructArrayLayout2i4i12",_c);var Ca=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,$,ue){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,_,R,F,z,$,ue)},v.prototype.emplace=function(_,R,F,z,$,ue,Pe){var Qe=4*_,ct=8*_;return this.int16[Qe+0]=R,this.int16[Qe+1]=F,this.uint8[ct+4]=z,this.uint8[ct+5]=$,this.uint8[ct+6]=ue,this.uint8[ct+7]=Pe,_},v}(zo);Ca.prototype.bytesPerElement=8,zi("StructArrayLayout2i4ub8",Ca);var Uh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var F=this.length;return this.resize(F+1),this.emplace(F,_,R)},v.prototype.emplace=function(_,R,F){var z=2*_;return this.float32[z+0]=R,this.float32[z+1]=F,_},v}(zo);Uh.prototype.bytesPerElement=8,zi("StructArrayLayout2f8",Uh);var Lc=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,$,ue,Pe,Qe,ct,mt){var Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,_,R,F,z,$,ue,Pe,Qe,ct,mt)},v.prototype.emplace=function(_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt){var Ut=10*_;return this.uint16[Ut+0]=R,this.uint16[Ut+1]=F,this.uint16[Ut+2]=z,this.uint16[Ut+3]=$,this.uint16[Ut+4]=ue,this.uint16[Ut+5]=Pe,this.uint16[Ut+6]=Qe,this.uint16[Ut+7]=ct,this.uint16[Ut+8]=mt,this.uint16[Ut+9]=Lt,_},v}(zo);Lc.prototype.bytesPerElement=20,zi("StructArrayLayout10ui20",Lc);var ed=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut){var ur=this.length;return this.resize(ur+1),this.emplace(ur,_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut)},v.prototype.emplace=function(_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut,ur){var fr=12*_;return this.int16[fr+0]=R,this.int16[fr+1]=F,this.int16[fr+2]=z,this.int16[fr+3]=$,this.uint16[fr+4]=ue,this.uint16[fr+5]=Pe,this.uint16[fr+6]=Qe,this.uint16[fr+7]=ct,this.int16[fr+8]=mt,this.int16[fr+9]=Lt,this.int16[fr+10]=Ut,this.int16[fr+11]=ur,_},v}(zo);ed.prototype.bytesPerElement=24,zi("StructArrayLayout4i4ui4i24",ed);var Zh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var $=3*_;return this.float32[$+0]=R,this.float32[$+1]=F,this.float32[$+2]=z,_},v}(zo);Zh.prototype.bytesPerElement=12,zi("StructArrayLayout3f12",Zh);var hh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.uint32[1*_+0]=R,_},v}(zo);hh.prototype.bytesPerElement=4,zi("StructArrayLayout1ul4",hh);var bp=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,$,ue,Pe,Qe,ct){var mt=this.length;return this.resize(mt+1),this.emplace(mt,_,R,F,z,$,ue,Pe,Qe,ct)},v.prototype.emplace=function(_,R,F,z,$,ue,Pe,Qe,ct,mt){var Lt=10*_,Ut=5*_;return this.int16[Lt+0]=R,this.int16[Lt+1]=F,this.int16[Lt+2]=z,this.int16[Lt+3]=$,this.int16[Lt+4]=ue,this.int16[Lt+5]=Pe,this.uint32[Ut+3]=Qe,this.uint16[Lt+8]=ct,this.uint16[Lt+9]=mt,_},v}(zo);bp.prototype.bytesPerElement=20,zi("StructArrayLayout6i1ul2ui20",bp);var Vh=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,$,ue){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,_,R,F,z,$,ue)},v.prototype.emplace=function(_,R,F,z,$,ue,Pe){var Qe=6*_;return this.int16[Qe+0]=R,this.int16[Qe+1]=F,this.int16[Qe+2]=z,this.int16[Qe+3]=$,this.int16[Qe+4]=ue,this.int16[Qe+5]=Pe,_},v}(zo);Vh.prototype.bytesPerElement=12,zi("StructArrayLayout2i2i2i12",Vh);var Sn=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,$){var ue=this.length;return this.resize(ue+1),this.emplace(ue,_,R,F,z,$)},v.prototype.emplace=function(_,R,F,z,$,ue){var Pe=4*_,Qe=8*_;return this.float32[Pe+0]=R,this.float32[Pe+1]=F,this.float32[Pe+2]=z,this.int16[Qe+6]=$,this.int16[Qe+7]=ue,_},v}(zo);Sn.prototype.bytesPerElement=16,zi("StructArrayLayout2f1f2i16",Sn);var Ar=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z){var $=this.length;return this.resize($+1),this.emplace($,_,R,F,z)},v.prototype.emplace=function(_,R,F,z,$){var ue=12*_,Pe=3*_;return this.uint8[ue+0]=R,this.uint8[ue+1]=F,this.float32[Pe+1]=z,this.float32[Pe+2]=$,_},v}(zo);Ar.prototype.bytesPerElement=12,zi("StructArrayLayout2ub2f12",Ar);var Ne=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var $=3*_;return this.uint16[$+0]=R,this.uint16[$+1]=F,this.uint16[$+2]=z,_},v}(zo);Ne.prototype.bytesPerElement=6,zi("StructArrayLayout3ui6",Ne);var Dc=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut,ur,fr,Lr,Rr,Yr){var nn=this.length;return this.resize(nn+1),this.emplace(nn,_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut,ur,fr,Lr,Rr,Yr)},v.prototype.emplace=function(_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut,ur,fr,Lr,Rr,Yr,nn){var gn=24*_,wn=12*_,Dn=48*_;return this.int16[gn+0]=R,this.int16[gn+1]=F,this.uint16[gn+2]=z,this.uint16[gn+3]=$,this.uint32[wn+2]=ue,this.uint32[wn+3]=Pe,this.uint32[wn+4]=Qe,this.uint16[gn+10]=ct,this.uint16[gn+11]=mt,this.uint16[gn+12]=Lt,this.float32[wn+7]=Ut,this.float32[wn+8]=ur,this.uint8[Dn+36]=fr,this.uint8[Dn+37]=Lr,this.uint8[Dn+38]=Rr,this.uint32[wn+10]=Yr,this.int16[gn+22]=nn,_},v}(zo);Dc.prototype.bytesPerElement=48,zi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Dc);var nr=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut,ur,fr,Lr,Rr,Yr,nn,gn,wn,Dn,pi,wi,qi,Di,oa,Oi,ao){var Ki=this.length;return this.resize(Ki+1),this.emplace(Ki,_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut,ur,fr,Lr,Rr,Yr,nn,gn,wn,Dn,pi,wi,qi,Di,oa,Oi,ao)},v.prototype.emplace=function(_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut,ur,fr,Lr,Rr,Yr,nn,gn,wn,Dn,pi,wi,qi,Di,oa,Oi,ao,Ki){var ji=34*_,go=17*_;return this.int16[ji+0]=R,this.int16[ji+1]=F,this.int16[ji+2]=z,this.int16[ji+3]=$,this.int16[ji+4]=ue,this.int16[ji+5]=Pe,this.int16[ji+6]=Qe,this.int16[ji+7]=ct,this.uint16[ji+8]=mt,this.uint16[ji+9]=Lt,this.uint16[ji+10]=Ut,this.uint16[ji+11]=ur,this.uint16[ji+12]=fr,this.uint16[ji+13]=Lr,this.uint16[ji+14]=Rr,this.uint16[ji+15]=Yr,this.uint16[ji+16]=nn,this.uint16[ji+17]=gn,this.uint16[ji+18]=wn,this.uint16[ji+19]=Dn,this.uint16[ji+20]=pi,this.uint16[ji+21]=wi,this.uint16[ji+22]=qi,this.uint32[go+12]=Di,this.float32[go+13]=oa,this.float32[go+14]=Oi,this.float32[go+15]=ao,this.float32[go+16]=Ki,_},v}(zo);nr.prototype.bytesPerElement=68,zi("StructArrayLayout8i15ui1ul4f68",nr);var Bf=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.float32[1*_+0]=R,_},v}(zo);Bf.prototype.bytesPerElement=4,zi("StructArrayLayout1f4",Bf);var xs=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var $=3*_;return this.int16[$+0]=R,this.int16[$+1]=F,this.int16[$+2]=z,_},v}(zo);xs.prototype.bytesPerElement=6,zi("StructArrayLayout3i6",xs);var Sp=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F){var z=this.length;return this.resize(z+1),this.emplace(z,_,R,F)},v.prototype.emplace=function(_,R,F,z){var $=4*_;return this.uint32[2*_+0]=R,this.uint16[$+2]=F,this.uint16[$+3]=z,_},v}(zo);Sp.prototype.bytesPerElement=8,zi("StructArrayLayout1ul2ui8",Sp);var Nf=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R){var F=this.length;return this.resize(F+1),this.emplace(F,_,R)},v.prototype.emplace=function(_,R,F){var z=2*_;return this.uint16[z+0]=R,this.uint16[z+1]=F,_},v}(zo);Nf.prototype.bytesPerElement=4,zi("StructArrayLayout2ui4",Nf);var zl=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_){var R=this.length;return this.resize(R+1),this.emplace(R,_)},v.prototype.emplace=function(_,R){return this.uint16[1*_+0]=R,_},v}(zo);zl.prototype.bytesPerElement=2,zi("StructArrayLayout1ui2",zl);var Ep=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},v.prototype.emplaceBack=function(_,R,F,z){var $=this.length;return this.resize($+1),this.emplace($,_,R,F,z)},v.prototype.emplace=function(_,R,F,z,$){var ue=4*_;return this.float32[ue+0]=R,this.float32[ue+1]=F,this.float32[ue+2]=z,this.float32[ue+3]=$,_},v}(zo);Ep.prototype.bytesPerElement=16,zi("StructArrayLayout4f16",Ep);var S=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return _.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},_.x1.get=function(){return this._structArray.int16[this._pos2+2]},_.y1.get=function(){return this._structArray.int16[this._pos2+3]},_.x2.get=function(){return this._structArray.int16[this._pos2+4]},_.y2.get=function(){return this._structArray.int16[this._pos2+5]},_.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.anchorPoint.get=function(){return new Q(this.anchorPointX,this.anchorPointY)},Object.defineProperties(v.prototype,_),v}(Nh);S.prototype.size=20;var T=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new S(this,_)},v}(bp);zi("CollisionBoxArray",T);var C=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},_.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},_.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},_.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},_.segment.get=function(){return this._structArray.uint16[this._pos2+10]},_.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},_.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},_.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},_.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},_.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},_.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},_.placedOrientation.set=function(R){this._structArray.uint8[this._pos1+37]=R},_.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},_.hidden.set=function(R){this._structArray.uint8[this._pos1+38]=R},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},_.crossTileID.set=function(R){this._structArray.uint32[this._pos4+10]=R},_.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(v.prototype,_),v}(Nh);C.prototype.size=48;var I=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new C(this,_)},v}(Dc);zi("PlacedSymbolArray",I);var Z=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return _.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},_.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},_.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},_.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},_.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},_.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},_.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},_.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},_.key.get=function(){return this._structArray.uint16[this._pos2+8]},_.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},_.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},_.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},_.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},_.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},_.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},_.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},_.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},_.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},_.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},_.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},_.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},_.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},_.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},_.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},_.crossTileID.set=function(R){this._structArray.uint32[this._pos4+12]=R},_.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},_.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},_.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},_.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(v.prototype,_),v}(Nh);Z.prototype.size=68;var ee=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new Z(this,_)},v}(nr);zi("SymbolInstanceArray",ee);var ae=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getoffsetX=function(_){return this.float32[1*_+0]},v}(Bf);zi("GlyphOffsetArray",ae);var Me=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.getx=function(_){return this.int16[3*_+0]},v.prototype.gety=function(_){return this.int16[3*_+1]},v.prototype.gettileUnitDistanceFromAnchor=function(_){return this.int16[3*_+2]},v}(xs);zi("SymbolLineVertexArray",Me);var ot=function(h){function v(){h.apply(this,arguments)}h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v;var _={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return _.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},_.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},_.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(v.prototype,_),v}(Nh);ot.prototype.size=8;var bt=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.get=function(_){return new ot(this,_)},v}(Sp);zi("FeatureIndexArray",bt);var Vt=au([{name:"a_pos",components:2,type:"Int16"}],4).members,Wt=function(h){h===void 0&&(h=[]),this.segments=h};function $t(h,v){return 256*(h=J(Math.floor(h),0,255))+J(Math.floor(v),0,255)}Wt.prototype.prepareSegment=function(h,v,_,R){var F=this.segments[this.segments.length-1];return h>Wt.MAX_VERTEX_ARRAY_LENGTH&&He("Max vertices per segment is "+Wt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+h),(!F||F.vertexLength+h>Wt.MAX_VERTEX_ARRAY_LENGTH||F.sortKey!==R)&&(F={vertexOffset:v.length,primitiveOffset:_.length,vertexLength:0,primitiveLength:0},R!==void 0&&(F.sortKey=R),this.segments.push(F)),F},Wt.prototype.get=function(){return this.segments},Wt.prototype.destroy=function(){for(var h=0,v=this.segments;h<v.length;h+=1){var _=v[h];for(var R in _.vaos)_.vaos[R].destroy()}},Wt.simpleSegment=function(h,v,_,R){return new Wt([{vertexOffset:h,primitiveOffset:v,vertexLength:_,primitiveLength:R,vaos:{},sortKey:0}])},Wt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zi("SegmentVector",Wt);var vr=au([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),hr=G(function(h){h.exports=function(v,_){var R,F,z,$,ue,Pe,Qe,ct;for(F=v.length-(R=3&v.length),z=_,ue=3432918353,Pe=461845907,ct=0;ct<F;)Qe=255&v.charCodeAt(ct)|(255&v.charCodeAt(++ct))<<8|(255&v.charCodeAt(++ct))<<16|(255&v.charCodeAt(++ct))<<24,++ct,z=27492+(65535&($=5*(65535&(z=(z^=Qe=(65535&(Qe=(Qe=(65535&Qe)*ue+(((Qe>>>16)*ue&65535)<<16)&4294967295)<<15|Qe>>>17))*Pe+(((Qe>>>16)*Pe&65535)<<16)&4294967295)<<13|z>>>19))+((5*(z>>>16)&65535)<<16)&4294967295))+((58964+($>>>16)&65535)<<16);switch(Qe=0,R){case 3:Qe^=(255&v.charCodeAt(ct+2))<<16;case 2:Qe^=(255&v.charCodeAt(ct+1))<<8;case 1:z^=Qe=(65535&(Qe=(Qe=(65535&(Qe^=255&v.charCodeAt(ct)))*ue+(((Qe>>>16)*ue&65535)<<16)&4294967295)<<15|Qe>>>17))*Pe+(((Qe>>>16)*Pe&65535)<<16)&4294967295}return z^=v.length,z=2246822507*(65535&(z^=z>>>16))+((2246822507*(z>>>16)&65535)<<16)&4294967295,z=3266489909*(65535&(z^=z>>>13))+((3266489909*(z>>>16)&65535)<<16)&4294967295,(z^=z>>>16)>>>0}}),Ir=G(function(h){h.exports=function(v,_){for(var R,F=v.length,z=_^F,$=0;F>=4;)R=1540483477*(65535&(R=255&v.charCodeAt($)|(255&v.charCodeAt(++$))<<8|(255&v.charCodeAt(++$))<<16|(255&v.charCodeAt(++$))<<24))+((1540483477*(R>>>16)&65535)<<16),z=1540483477*(65535&z)+((1540483477*(z>>>16)&65535)<<16)^(R=1540483477*(65535&(R^=R>>>24))+((1540483477*(R>>>16)&65535)<<16)),F-=4,++$;switch(F){case 3:z^=(255&v.charCodeAt($+2))<<16;case 2:z^=(255&v.charCodeAt($+1))<<8;case 1:z=1540483477*(65535&(z^=255&v.charCodeAt($)))+((1540483477*(z>>>16)&65535)<<16)}return z=1540483477*(65535&(z^=z>>>13))+((1540483477*(z>>>16)&65535)<<16),(z^=z>>>15)>>>0}}),lr=hr,Pr=Ir;lr.murmur3=hr,lr.murmur2=Pr;var jr=function(){this.ids=[],this.positions=[],this.indexed=!1};jr.prototype.add=function(h,v,_,R){this.ids.push(_n(h)),this.positions.push(v,_,R)},jr.prototype.getPositions=function(h){for(var v=_n(h),_=0,R=this.ids.length-1;_<R;){var F=_+R>>1;this.ids[F]>=v?R=F:_=F+1}for(var z=[];this.ids[_]===v;)z.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return z},jr.serialize=function(h,v){var _=new Float64Array(h.ids),R=new Uint32Array(h.positions);return function F(z,$,ue,Pe){for(;ue<Pe;){for(var Qe=z[ue+Pe>>1],ct=ue-1,mt=Pe+1;;){do ct++;while(z[ct]<Qe);do mt--;while(z[mt]>Qe);if(ct>=mt)break;dn(z,ct,mt),dn($,3*ct,3*mt),dn($,3*ct+1,3*mt+1),dn($,3*ct+2,3*mt+2)}mt-ue<Pe-mt?(F(z,$,ue,mt),ue=mt+1):(F(z,$,mt+1,Pe),Pe=mt)}}(_,R,0,_.length-1),v&&v.push(_.buffer,R.buffer),{ids:_,positions:R}},jr.deserialize=function(h){var v=new jr;return v.ids=h.ids,v.positions=h.positions,v.indexed=!0,v};var tn=Math.pow(2,53)-1;function _n(h){var v=+h;return!isNaN(v)&&v<=tn?v:lr(String(h))}function dn(h,v,_){var R=h[v];h[v]=h[_],h[_]=R}zi("FeaturePositionMap",jr);var Tn=function(h,v){this.gl=h.gl,this.location=v},Un=function(h){function v(_,R){h.call(this,_,R),this.current=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1i(this.location,_))},v}(Tn),si=function(h){function v(_,R){h.call(this,_,R),this.current=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){this.current!==_&&(this.current=_,this.gl.uniform1f(this.location,_))},v}(Tn),li=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]||(this.current=_,this.gl.uniform2f(this.location,_[0],_[1]))},v}(Tn),Ii=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]||(this.current=_,this.gl.uniform3f(this.location,_[0],_[1],_[2]))},v}(Tn),ea=function(h){function v(_,R){h.call(this,_,R),this.current=[0,0,0,0]}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_[0]===this.current[0]&&_[1]===this.current[1]&&_[2]===this.current[2]&&_[3]===this.current[3]||(this.current=_,this.gl.uniform4f(this.location,_[0],_[1],_[2],_[3]))},v}(Tn),la=function(h){function v(_,R){h.call(this,_,R),this.current=Qi.transparent}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){_.r===this.current.r&&_.g===this.current.g&&_.b===this.current.b&&_.a===this.current.a||(this.current=_,this.gl.uniform4f(this.location,_.r,_.g,_.b,_.a))},v}(Tn),ra=new Float32Array(16),lo=function(h){function v(_,R){h.call(this,_,R),this.current=ra}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.set=function(_){if(_[12]!==this.current[12]||_[0]!==this.current[0])return this.current=_,void this.gl.uniformMatrix4fv(this.location,!1,_);for(var R=1;R<16;R++)if(_[R]!==this.current[R]){this.current=_,this.gl.uniformMatrix4fv(this.location,!1,_);break}},v}(Tn);function Fi(h){return[$t(255*h.r,255*h.g),$t(255*h.b,255*h.a)]}var Ia=function(h,v,_){this.value=h,this.uniformNames=v.map(function(R){return"u_"+R}),this.type=_};Ia.prototype.setUniform=function(h,v,_){h.set(_.constantOr(this.value))},Ia.prototype.getBinding=function(h,v,_){return this.type==="color"?new la(h,v):new si(h,v)};var Xa=function(h,v){this.uniformNames=v.map(function(_){return"u_"+_}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Xa.prototype.setConstantPatternPositions=function(h,v){this.pixelRatioFrom=v.pixelRatio,this.pixelRatioTo=h.pixelRatio,this.patternFrom=v.tlbr,this.patternTo=h.tlbr},Xa.prototype.setUniform=function(h,v,_,R){var F=R==="u_pattern_to"?this.patternTo:R==="u_pattern_from"?this.patternFrom:R==="u_pixel_ratio_to"?this.pixelRatioTo:R==="u_pixel_ratio_from"?this.pixelRatioFrom:null;F&&h.set(F)},Xa.prototype.getBinding=function(h,v,_){return _.substr(0,9)==="u_pattern"?new ea(h,v):new si(h,v)};var pa=function(h,v,_,R){this.expression=h,this.type=_,this.maxValue=0,this.paintVertexAttributes=v.map(function(F){return{name:"a_"+F,type:"Float32",components:_==="color"?2:1,offset:0}}),this.paintVertexArray=new R};pa.prototype.populatePaintArray=function(h,v,_,R,F){var z=this.paintVertexArray.length,$=this.expression.evaluate(new wa(0),v,{},R,[],F);this.paintVertexArray.resize(h),this._setPaintValue(z,h,$)},pa.prototype.updatePaintArray=function(h,v,_,R){var F=this.expression.evaluate({zoom:0},_,R);this._setPaintValue(h,v,F)},pa.prototype._setPaintValue=function(h,v,_){if(this.type==="color")for(var R=Fi(_),F=h;F<v;F++)this.paintVertexArray.emplace(F,R[0],R[1]);else{for(var z=h;z<v;z++)this.paintVertexArray.emplace(z,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}},pa.prototype.upload=function(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},pa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Sa=function(h,v,_,R,F,z){this.expression=h,this.uniformNames=v.map(function($){return"u_"+$+"_t"}),this.type=_,this.useIntegerZoom=R,this.zoom=F,this.maxValue=0,this.paintVertexAttributes=v.map(function($){return{name:"a_"+$,type:"Float32",components:_==="color"?4:2,offset:0}}),this.paintVertexArray=new z};Sa.prototype.populatePaintArray=function(h,v,_,R,F){var z=this.expression.evaluate(new wa(this.zoom),v,{},R,[],F),$=this.expression.evaluate(new wa(this.zoom+1),v,{},R,[],F),ue=this.paintVertexArray.length;this.paintVertexArray.resize(h),this._setPaintValue(ue,h,z,$)},Sa.prototype.updatePaintArray=function(h,v,_,R){var F=this.expression.evaluate({zoom:this.zoom},_,R),z=this.expression.evaluate({zoom:this.zoom+1},_,R);this._setPaintValue(h,v,F,z)},Sa.prototype._setPaintValue=function(h,v,_,R){if(this.type==="color")for(var F=Fi(_),z=Fi(R),$=h;$<v;$++)this.paintVertexArray.emplace($,F[0],F[1],z[0],z[1]);else{for(var ue=h;ue<v;ue++)this.paintVertexArray.emplace(ue,_,R);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(R))}},Sa.prototype.upload=function(h){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=h.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Sa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Sa.prototype.setUniform=function(h,v){var _=this.useIntegerZoom?Math.floor(v.zoom):v.zoom,R=J(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);h.set(R)},Sa.prototype.getBinding=function(h,v,_){return new si(h,v)};var Pa=function(h,v,_,R,F,z){this.expression=h,this.type=v,this.useIntegerZoom=_,this.zoom=R,this.layerId=z,this.zoomInPaintVertexArray=new F,this.zoomOutPaintVertexArray=new F};Pa.prototype.populatePaintArray=function(h,v,_){var R=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(h),this.zoomOutPaintVertexArray.resize(h),this._setPaintValues(R,h,v.patterns&&v.patterns[this.layerId],_)},Pa.prototype.updatePaintArray=function(h,v,_,R,F){this._setPaintValues(h,v,_.patterns&&_.patterns[this.layerId],F)},Pa.prototype._setPaintValues=function(h,v,_,R){if(R&&_){var F=R[_.min],z=R[_.mid],$=R[_.max];if(F&&z&&$)for(var ue=h;ue<v;ue++)this.zoomInPaintVertexArray.emplace(ue,z.tl[0],z.tl[1],z.br[0],z.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],z.pixelRatio,F.pixelRatio),this.zoomOutPaintVertexArray.emplace(ue,z.tl[0],z.tl[1],z.br[0],z.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],z.pixelRatio,$.pixelRatio)}},Pa.prototype.upload=function(h){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=h.createVertexBuffer(this.zoomInPaintVertexArray,vr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=h.createVertexBuffer(this.zoomOutPaintVertexArray,vr.members,this.expression.isStateDependent))},Pa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ca=function(h,v,_){this.binders={},this._buffers=[];var R=[];for(var F in h.paint._values)if(_(F)){var z=h.paint.get(F);if(z instanceof ml&&Fs(z.property.specification)){var $=Eu(F,h.type),ue=z.value,Pe=z.property.specification.type,Qe=z.property.useIntegerZoom,ct=z.property.specification["property-type"],mt=ct==="cross-faded"||ct==="cross-faded-data-driven";if(ue.kind==="constant")this.binders[F]=mt?new Xa(ue.value,$):new Ia(ue.value,$,Pe),R.push("/u_"+F);else if(ue.kind==="source"||mt){var Lt=Ns(F,Pe,"source");this.binders[F]=mt?new Pa(ue,Pe,Qe,v,Lt,h.id):new pa(ue,$,Pe,Lt),R.push("/a_"+F)}else{var Ut=Ns(F,Pe,"composite");this.binders[F]=new Sa(ue,$,Pe,Qe,v,Ut),R.push("/z_"+F)}}}this.cacheKey=R.sort().join("")};ca.prototype.getMaxValue=function(h){var v=this.binders[h];return v instanceof pa||v instanceof Sa?v.maxValue:0},ca.prototype.populatePaintArrays=function(h,v,_,R,F){for(var z in this.binders){var $=this.binders[z];($ instanceof pa||$ instanceof Sa||$ instanceof Pa)&&$.populatePaintArray(h,v,_,R,F)}},ca.prototype.setConstantPatternPositions=function(h,v){for(var _ in this.binders){var R=this.binders[_];R instanceof Xa&&R.setConstantPatternPositions(h,v)}},ca.prototype.updatePaintArrays=function(h,v,_,R,F){var z=!1;for(var $ in h)for(var ue=0,Pe=v.getPositions($);ue<Pe.length;ue+=1){var Qe=Pe[ue],ct=_.feature(Qe.index);for(var mt in this.binders){var Lt=this.binders[mt];if((Lt instanceof pa||Lt instanceof Sa||Lt instanceof Pa)&&Lt.expression.isStateDependent===!0){var Ut=R.paint.get(mt);Lt.expression=Ut.value,Lt.updatePaintArray(Qe.start,Qe.end,ct,h[$],F),z=!0}}}return z},ca.prototype.defines=function(){var h=[];for(var v in this.binders){var _=this.binders[v];(_ instanceof Ia||_ instanceof Xa)&&h.push.apply(h,_.uniformNames.map(function(R){return"#define HAS_UNIFORM_"+R}))}return h},ca.prototype.getBinderAttributes=function(){var h=[];for(var v in this.binders){var _=this.binders[v];if(_ instanceof pa||_ instanceof Sa)for(var R=0;R<_.paintVertexAttributes.length;R++)h.push(_.paintVertexAttributes[R].name);else if(_ instanceof Pa)for(var F=0;F<vr.members.length;F++)h.push(vr.members[F].name)}return h},ca.prototype.getBinderUniforms=function(){var h=[];for(var v in this.binders){var _=this.binders[v];if(_ instanceof Ia||_ instanceof Xa||_ instanceof Sa)for(var R=0,F=_.uniformNames;R<F.length;R+=1)h.push(F[R])}return h},ca.prototype.getPaintVertexBuffers=function(){return this._buffers},ca.prototype.getUniforms=function(h,v){var _=[];for(var R in this.binders){var F=this.binders[R];if(F instanceof Ia||F instanceof Xa||F instanceof Sa)for(var z=0,$=F.uniformNames;z<$.length;z+=1){var ue=$[z];if(v[ue]){var Pe=F.getBinding(h,v[ue],ue);_.push({name:ue,property:R,binding:Pe})}}}return _},ca.prototype.setUniforms=function(h,v,_,R){for(var F=0,z=v;F<z.length;F+=1){var $=z[F],ue=$.name,Pe=$.property;this.binders[Pe].setUniform($.binding,R,_.get(Pe),ue)}},ca.prototype.updatePaintBuffers=function(h){for(var v in this._buffers=[],this.binders){var _=this.binders[v];if(h&&_ instanceof Pa){var R=h.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;R&&this._buffers.push(R)}else(_ instanceof pa||_ instanceof Sa)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}},ca.prototype.upload=function(h){for(var v in this.binders){var _=this.binders[v];(_ instanceof pa||_ instanceof Sa||_ instanceof Pa)&&_.upload(h)}this.updatePaintBuffers()},ca.prototype.destroy=function(){for(var h in this.binders){var v=this.binders[h];(v instanceof pa||v instanceof Sa||v instanceof Pa)&&v.destroy()}};var da=function(h,v,_){_===void 0&&(_=function(){return!0}),this.programConfigurations={};for(var R=0,F=h;R<F.length;R+=1){var z=F[R];this.programConfigurations[z.id]=new ca(z,v,_)}this.needsUpload=!1,this._featureMap=new jr,this._bufferOffset=0};function Eu(h,v){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(v+"-","").replace(/-/g,"_")]}function Ns(h,v,_){var R={color:{source:Uh,composite:Ep},number:{source:Bf,composite:Uh}},F=function(z){return{"line-pattern":{source:Lc,composite:Lc},"fill-pattern":{source:Lc,composite:Lc},"fill-extrusion-pattern":{source:Lc,composite:Lc}}[z]}(h);return F&&F[_]||R[v][_]}da.prototype.populatePaintArrays=function(h,v,_,R,F,z){for(var $ in this.programConfigurations)this.programConfigurations[$].populatePaintArrays(h,v,R,F,z);v.id!==void 0&&this._featureMap.add(v.id,_,this._bufferOffset,h),this._bufferOffset=h,this.needsUpload=!0},da.prototype.updatePaintArrays=function(h,v,_,R){for(var F=0,z=_;F<z.length;F+=1){var $=z[F];this.needsUpload=this.programConfigurations[$.id].updatePaintArrays(h,this._featureMap,v,$,R)||this.needsUpload}},da.prototype.get=function(h){return this.programConfigurations[h]},da.prototype.upload=function(h){if(this.needsUpload){for(var v in this.programConfigurations)this.programConfigurations[v].upload(h);this.needsUpload=!1}},da.prototype.destroy=function(){for(var h in this.programConfigurations)this.programConfigurations[h].destroy()},zi("ConstantBinder",Ia),zi("CrossFadedConstantBinder",Xa),zi("SourceExpressionBinder",pa),zi("CrossFadedCompositeBinder",Pa),zi("CompositeExpressionBinder",Sa),zi("ProgramConfiguration",ca,{omit:["_buffers"]}),zi("ProgramConfigurationSet",da);var Gu=Math.pow(2,14)-1,Bu=-Gu-1;function Jo(h){for(var v=8192/h.extent,_=h.loadGeometry(),R=0;R<_.length;R++)for(var F=_[R],z=0;z<F.length;z++){var $=F[z],ue=Math.round($.x*v),Pe=Math.round($.y*v);$.x=J(ue,Bu,Gu),$.y=J(Pe,Bu,Gu),(ue<$.x||ue>$.x+1||Pe<$.y||Pe>$.y+1)&&He("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return _}function bs(h,v){return{type:h.type,id:h.id,properties:h.properties,geometry:v?Jo(h):[]}}function $u(h,v,_,R,F){h.emplaceBack(2*v+(R+1)/2,2*_+(F+1)/2)}var qs=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new zh,this.indexArray=new Ne,this.segments=new Wt,this.programConfigurations=new da(h.layers,h.zoom),this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function ef(h,v){for(var _=0;_<h.length;_++)if(Zl(v,h[_]))return!0;for(var R=0;R<v.length;R++)if(Zl(h,v[R]))return!0;return!!_f(h,v)}function _l(h,v,_){return!!Zl(h,v)||!!xc(v,h,_)}function ac(h,v){if(h.length===1)return tf(v,h[0]);for(var _=0;_<v.length;_++)for(var R=v[_],F=0;F<R.length;F++)if(Zl(h,R[F]))return!0;for(var z=0;z<h.length;z++)if(tf(v,h[z]))return!0;for(var $=0;$<v.length;$++)if(_f(h,v[$]))return!0;return!1}function Ul(h,v,_){if(h.length>1){if(_f(h,v))return!0;for(var R=0;R<v.length;R++)if(xc(v[R],h,_))return!0}for(var F=0;F<h.length;F++)if(xc(h[F],v,_))return!0;return!1}function _f(h,v){if(h.length===0||v.length===0)return!1;for(var _=0;_<h.length-1;_++)for(var R=h[_],F=h[_+1],z=0;z<v.length-1;z++)if(zf(R,F,v[z],v[z+1]))return!0;return!1}function zf(h,v,_,R){return Ke(h,_,R)!==Ke(v,_,R)&&Ke(h,v,_)!==Ke(h,v,R)}function xc(h,v,_){var R=_*_;if(v.length===1)return h.distSqr(v[0])<R;for(var F=1;F<v.length;F++)if(Uf(h,v[F-1],v[F])<R)return!0;return!1}function Uf(h,v,_){var R=v.distSqr(_);if(R===0)return h.distSqr(v);var F=((h.x-v.x)*(_.x-v.x)+(h.y-v.y)*(_.y-v.y))/R;return h.distSqr(F<0?v:F>1?_:_.sub(v)._mult(F)._add(v))}function tf(h,v){for(var _,R,F,z=!1,$=0;$<h.length;$++)for(var ue=0,Pe=(_=h[$]).length-1;ue<_.length;Pe=ue++)(R=_[ue]).y>v.y!=(F=_[Pe]).y>v.y&&v.x<(F.x-R.x)*(v.y-R.y)/(F.y-R.y)+R.x&&(z=!z);return z}function Zl(h,v){for(var _=!1,R=0,F=h.length-1;R<h.length;F=R++){var z=h[R],$=h[F];z.y>v.y!=$.y>v.y&&v.x<($.x-z.x)*(v.y-z.y)/($.y-z.y)+z.x&&(_=!_)}return _}function xf(h,v,_){var R=_[0],F=_[2];if(h.x<R.x&&v.x<R.x||h.x>F.x&&v.x>F.x||h.y<R.y&&v.y<R.y||h.y>F.y&&v.y>F.y)return!1;var z=Ke(h,v,_[0]);return z!==Ke(h,v,_[1])||z!==Ke(h,v,_[2])||z!==Ke(h,v,_[3])}function wu(h,v,_){var R=v.paint.get(h).value;return R.kind==="constant"?R.value:_.programConfigurations.get(v.id).getMaxValue(h)}function Is(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Xu(h,v,_,R,F){if(!v[0]&&!v[1])return h;var z=Q.convert(v)._mult(F);_==="viewport"&&z._rotate(-R);for(var $=[],ue=0;ue<h.length;ue++)$.push(h[ue].sub(z));return $}qs.prototype.populate=function(h,v,_){var R=this.layers[0],F=[],z=null;R.type==="circle"&&(z=R.layout.get("circle-sort-key"));for(var $=0,ue=h;$<ue.length;$+=1){var Pe=ue[$],Qe=Pe.feature,ct=Pe.id,mt=Pe.index,Lt=Pe.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,ur=bs(Qe,Ut);if(this.layers[0]._featureFilter.filter(new wa(this.zoom),ur,_)){var fr=z?z.evaluate(ur,{},_):void 0,Lr={id:ct,properties:Qe.properties,type:Qe.type,sourceLayerIndex:Lt,index:mt,geometry:Ut?ur.geometry:Jo(Qe),patterns:{},sortKey:fr};F.push(Lr)}}z&&F.sort(function(wi,qi){return wi.sortKey-qi.sortKey});for(var Rr=0,Yr=F;Rr<Yr.length;Rr+=1){var nn=Yr[Rr],gn=nn.geometry,wn=nn.index,Dn=nn.sourceLayerIndex,pi=h[wn].feature;this.addFeature(nn,gn,wn,_),v.featureIndex.insert(pi,gn,wn,Dn,this.index)}},qs.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},qs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},qs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qs.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Vt),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},qs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qs.prototype.addFeature=function(h,v,_,R){for(var F=0,z=v;F<z.length;F+=1)for(var $=0,ue=z[F];$<ue.length;$+=1){var Pe=ue[$],Qe=Pe.x,ct=Pe.y;if(!(Qe<0||Qe>=8192||ct<0||ct>=8192)){var mt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,h.sortKey),Lt=mt.vertexLength;$u(this.layoutVertexArray,Qe,ct,-1,-1),$u(this.layoutVertexArray,Qe,ct,1,-1),$u(this.layoutVertexArray,Qe,ct,1,1),$u(this.layoutVertexArray,Qe,ct,-1,1),this.indexArray.emplaceBack(Lt,Lt+1,Lt+2),this.indexArray.emplaceBack(Lt,Lt+3,Lt+2),mt.vertexLength+=4,mt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,{},R)},zi("CircleBucket",qs,{omit:["layers"]});var Yu=new _s({"circle-sort-key":new Ai(At.layout_circle["circle-sort-key"])}),Vl={paint:new _s({"circle-radius":new Ai(At.paint_circle["circle-radius"]),"circle-color":new Ai(At.paint_circle["circle-color"]),"circle-blur":new Ai(At.paint_circle["circle-blur"]),"circle-opacity":new Ai(At.paint_circle["circle-opacity"]),"circle-translate":new Ji(At.paint_circle["circle-translate"]),"circle-translate-anchor":new Ji(At.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ji(At.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ji(At.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ai(At.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ai(At.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ai(At.paint_circle["circle-stroke-opacity"])}),layout:Yu},po=typeof Float32Array!="undefined"?Float32Array:Array;function Ku(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Cu(h,v,_){var R=v[0],F=v[1],z=v[2],$=v[3],ue=v[4],Pe=v[5],Qe=v[6],ct=v[7],mt=v[8],Lt=v[9],Ut=v[10],ur=v[11],fr=v[12],Lr=v[13],Rr=v[14],Yr=v[15],nn=_[0],gn=_[1],wn=_[2],Dn=_[3];return h[0]=nn*R+gn*ue+wn*mt+Dn*fr,h[1]=nn*F+gn*Pe+wn*Lt+Dn*Lr,h[2]=nn*z+gn*Qe+wn*Ut+Dn*Rr,h[3]=nn*$+gn*ct+wn*ur+Dn*Yr,h[4]=(nn=_[4])*R+(gn=_[5])*ue+(wn=_[6])*mt+(Dn=_[7])*fr,h[5]=nn*F+gn*Pe+wn*Lt+Dn*Lr,h[6]=nn*z+gn*Qe+wn*Ut+Dn*Rr,h[7]=nn*$+gn*ct+wn*ur+Dn*Yr,h[8]=(nn=_[8])*R+(gn=_[9])*ue+(wn=_[10])*mt+(Dn=_[11])*fr,h[9]=nn*F+gn*Pe+wn*Lt+Dn*Lr,h[10]=nn*z+gn*Qe+wn*Ut+Dn*Rr,h[11]=nn*$+gn*ct+wn*ur+Dn*Yr,h[12]=(nn=_[12])*R+(gn=_[13])*ue+(wn=_[14])*mt+(Dn=_[15])*fr,h[13]=nn*F+gn*Pe+wn*Lt+Dn*Lr,h[14]=nn*z+gn*Qe+wn*Ut+Dn*Rr,h[15]=nn*$+gn*ct+wn*ur+Dn*Yr,h}Math.hypot||(Math.hypot=function(){for(var h=arguments,v=0,_=arguments.length;_--;)v+=h[_]*h[_];return Math.sqrt(v)});var bc,td=Cu;function ph(h,v,_){var R=v[0],F=v[1],z=v[2],$=v[3];return h[0]=_[0]*R+_[4]*F+_[8]*z+_[12]*$,h[1]=_[1]*R+_[5]*F+_[9]*z+_[13]*$,h[2]=_[2]*R+_[6]*F+_[10]*z+_[14]*$,h[3]=_[3]*R+_[7]*F+_[11]*z+_[15]*$,h}bc=new po(3),po!=Float32Array&&(bc[0]=0,bc[1]=0,bc[2]=0),function(){var h=new po(4);po!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0)}();var rd=(function(){var h=new po(2);po!=Float32Array&&(h[0]=0,h[1]=0)}(),function(h){function v(_){h.call(this,_,Vl)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new qs(_)},v.prototype.queryRadius=function(_){var R=_;return wu("circle-radius",this,R)+wu("circle-stroke-width",this,R)+Is(this.paint.get("circle-translate"))},v.prototype.queryIntersectsFeature=function(_,R,F,z,$,ue,Pe,Qe){for(var ct=Xu(_,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ue.angle,Pe),mt=this.paint.get("circle-radius").evaluate(R,F)+this.paint.get("circle-stroke-width").evaluate(R,F),Lt=this.paint.get("circle-pitch-alignment")==="map",Ut=Lt?ct:function(pi,wi){return pi.map(function(qi){return Hl(qi,wi)})}(ct,Qe),ur=Lt?mt*Pe:mt,fr=0,Lr=z;fr<Lr.length;fr+=1)for(var Rr=0,Yr=Lr[fr];Rr<Yr.length;Rr+=1){var nn=Yr[Rr],gn=Lt?nn:Hl(nn,Qe),wn=ur,Dn=ph([],[nn.x,nn.y,0,1],Qe);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?wn*=Dn[3]/ue.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(wn*=ue.cameraToCenterDistance/Dn[3]),_l(Ut,gn,wn))return!0}return!1},v}(yc));function Hl(h,v){var _=ph([],[h.x,h.y,0,1],v);return new Q(_[0]/_[3],_[1]/_[3])}var Rl=function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(qs);function jl(h,v,_,R){var F=v.width,z=v.height;if(R){if(R instanceof Uint8ClampedArray)R=new Uint8Array(R.buffer);else if(R.length!==F*z*_)throw new RangeError("mismatched image size")}else R=new Uint8Array(F*z*_);return h.width=F,h.height=z,h.data=R,h}function Hh(h,v,_){var R=v.width,F=v.height;if(R!==h.width||F!==h.height){var z=jl({},{width:R,height:F},_);wp(h,z,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,R),height:Math.min(h.height,F)},_),h.width=R,h.height=F,h.data=z.data}}function wp(h,v,_,R,F,z){if(F.width===0||F.height===0)return v;if(F.width>h.width||F.height>h.height||_.x>h.width-F.width||_.y>h.height-F.height)throw new RangeError("out of range source coordinates for image copy");if(F.width>v.width||F.height>v.height||R.x>v.width-F.width||R.y>v.height-F.height)throw new RangeError("out of range destination coordinates for image copy");for(var $=h.data,ue=v.data,Pe=0;Pe<F.height;Pe++)for(var Qe=((_.y+Pe)*h.width+_.x)*z,ct=((R.y+Pe)*v.width+R.x)*z,mt=0;mt<F.width*z;mt++)ue[ct+mt]=$[Qe+mt];return v}zi("HeatmapBucket",Rl,{omit:["layers"]});var rf=function(h,v){jl(this,h,1,v)};rf.prototype.resize=function(h){Hh(this,h,1)},rf.prototype.clone=function(){return new rf({width:this.width,height:this.height},new Uint8Array(this.data))},rf.copy=function(h,v,_,R,F){wp(h,v,_,R,F,1)};var Il=function(h,v){jl(this,h,4,v)};Il.prototype.resize=function(h){Hh(this,h,4)},Il.prototype.replace=function(h,v){v?this.data.set(h):this.data=h instanceof Uint8ClampedArray?new Uint8Array(h.buffer):h},Il.prototype.clone=function(){return new Il({width:this.width,height:this.height},new Uint8Array(this.data))},Il.copy=function(h,v,_,R,F){wp(h,v,_,R,F,4)},zi("AlphaImage",rf),zi("RGBAImage",Il);var ug={paint:new _s({"heatmap-radius":new Ai(At.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ai(At.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ji(At.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ol(At.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ji(At.paint_heatmap["heatmap-opacity"])})};function bv(h){var v={},_=h.resolution||256,R=h.clips?h.clips.length:1,F=h.image||new Il({width:_,height:R}),z=function(ur,fr,Lr){v[h.evaluationKey]=Lr;var Rr=h.expression.evaluate(v);F.data[ur+fr+0]=Math.floor(255*Rr.r/Rr.a),F.data[ur+fr+1]=Math.floor(255*Rr.g/Rr.a),F.data[ur+fr+2]=Math.floor(255*Rr.b/Rr.a),F.data[ur+fr+3]=Math.floor(255*Rr.a)};if(h.clips)for(var $=0,ue=0;$<R;++$,ue+=4*_)for(var Pe=0,Qe=0;Pe<_;Pe++,Qe+=4){var ct=Pe/(_-1),mt=h.clips[$];z(ue,Qe,mt.start*(1-ct)+mt.end*ct)}else for(var Lt=0,Ut=0;Lt<_;Lt++,Ut+=4)z(0,Ut,Lt/(_-1));return F}var Sc=function(h){function v(_){h.call(this,_,ug),this._updateColorRamp()}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new Rl(_)},v.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="heatmap-color"&&this._updateColorRamp()},v.prototype._updateColorRamp=function(){this.colorRamp=bv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},v.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},v}(yc),o_={paint:new _s({"hillshade-illumination-direction":new Ji(At.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ji(At.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ji(At.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ji(At.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ji(At.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ji(At.paint_hillshade["hillshade-accent-color"])})},m0=function(h){function v(_){h.call(this,_,o_)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},v}(yc),y0=au([{name:"a_pos",components:2,type:"Int16"}],4).members,Sv=Cp,_0=Cp;function Cp(h,v,_){_=_||2;var R,F,z,$,ue,Pe,Qe,ct=v&&v.length,mt=ct?v[0]*_:h.length,Lt=lg(h,0,mt,_,!0),Ut=[];if(!Lt||Lt.next===Lt.prev)return Ut;if(ct&&(Lt=function(fr,Lr,Rr,Yr){var nn,gn,wn,Dn=[];for(nn=0,gn=Lr.length;nn<gn;nn++)(wn=lg(fr,Lr[nn]*Yr,nn<gn-1?Lr[nn+1]*Yr:fr.length,Yr,!1))===wn.next&&(wn.steiner=!0),Dn.push(hg(wn));for(Dn.sort(b0),nn=0;nn<Dn.length;nn++)fg(Dn[nn],Rr),Rr=Ap(Rr,Rr.next);return Rr}(h,v,Lt,_)),h.length>80*_){R=z=h[0],F=$=h[1];for(var ur=_;ur<mt;ur+=_)(ue=h[ur])<R&&(R=ue),(Pe=h[ur+1])<F&&(F=Pe),ue>z&&(z=ue),Pe>$&&($=Pe);Qe=(Qe=Math.max(z-R,$-F))!==0?1/Qe:0}return Ud(Lt,Ut,_,R,F,Qe),Ut}function lg(h,v,_,R,F){var z,$;if(F===Ec(h,v,_,R)>0)for(z=v;z<_;z+=R)$=Qs(z,h[z],h[z+1],$);else for(z=_-R;z>=v;z-=R)$=Qs(z,h[z],h[z+1],$);return $&&jh($,$.next)&&(Gl($),$=$.next),$}function Ap(h,v){if(!h)return h;v||(v=h);var _,R=h;do if(_=!1,R.steiner||!jh(R,R.next)&&Ss(R.prev,R,R.next)!==0)R=R.next;else{if(Gl(R),(R=v=R.prev)===R.next)break;_=!0}while(_||R!==v);return v}function Ud(h,v,_,R,F,z,$){if(h){!$&&z&&function(ct,mt,Lt,Ut){var ur=ct;do ur.z===null&&(ur.z=Zd(ur.x,ur.y,mt,Lt,Ut)),ur.prevZ=ur.prev,ur.nextZ=ur.next,ur=ur.next;while(ur!==ct);ur.prevZ.nextZ=null,ur.prevZ=null,function(fr){var Lr,Rr,Yr,nn,gn,wn,Dn,pi,wi=1;do{for(Rr=fr,fr=null,gn=null,wn=0;Rr;){for(wn++,Yr=Rr,Dn=0,Lr=0;Lr<wi&&(Dn++,Yr=Yr.nextZ);Lr++);for(pi=wi;Dn>0||pi>0&&Yr;)Dn!==0&&(pi===0||!Yr||Rr.z<=Yr.z)?(nn=Rr,Rr=Rr.nextZ,Dn--):(nn=Yr,Yr=Yr.nextZ,pi--),gn?gn.nextZ=nn:fr=nn,nn.prevZ=gn,gn=nn;Rr=Yr}gn.nextZ=null,wi*=2}while(wn>1)}(ur)}(h,R,F,z);for(var ue,Pe,Qe=h;h.prev!==h.next;)if(ue=h.prev,Pe=h.next,z?Tp(h,R,F,z):sm(h))v.push(ue.i/_),v.push(h.i/_),v.push(Pe.i/_),Gl(h),h=Pe.next,Qe=Pe.next;else if((h=Pe)===Qe){$?$===1?Ud(h=cg(Ap(h),v,_),v,_,R,F,z,2):$===2&&x0(h,v,_,R,F,z):Ud(Ap(h),v,_,R,F,z,1);break}}}function sm(h){var v=h.prev,_=h,R=h.next;if(Ss(v,_,R)>=0)return!1;for(var F=h.next.next;F!==h.prev;){if(dh(v.x,v.y,_.x,_.y,R.x,R.y,F.x,F.y)&&Ss(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function Tp(h,v,_,R){var F=h.prev,z=h,$=h.next;if(Ss(F,z,$)>=0)return!1;for(var ue=F.x>z.x?F.x>$.x?F.x:$.x:z.x>$.x?z.x:$.x,Pe=F.y>z.y?F.y>$.y?F.y:$.y:z.y>$.y?z.y:$.y,Qe=Zd(F.x<z.x?F.x<$.x?F.x:$.x:z.x<$.x?z.x:$.x,F.y<z.y?F.y<$.y?F.y:$.y:z.y<$.y?z.y:$.y,v,_,R),ct=Zd(ue,Pe,v,_,R),mt=h.prevZ,Lt=h.nextZ;mt&&mt.z>=Qe&&Lt&&Lt.z<=ct;){if(mt!==h.prev&&mt!==h.next&&dh(F.x,F.y,z.x,z.y,$.x,$.y,mt.x,mt.y)&&Ss(mt.prev,mt,mt.next)>=0||(mt=mt.prevZ,Lt!==h.prev&&Lt!==h.next&&dh(F.x,F.y,z.x,z.y,$.x,$.y,Lt.x,Lt.y)&&Ss(Lt.prev,Lt,Lt.next)>=0))return!1;Lt=Lt.nextZ}for(;mt&&mt.z>=Qe;){if(mt!==h.prev&&mt!==h.next&&dh(F.x,F.y,z.x,z.y,$.x,$.y,mt.x,mt.y)&&Ss(mt.prev,mt,mt.next)>=0)return!1;mt=mt.prevZ}for(;Lt&&Lt.z<=ct;){if(Lt!==h.prev&&Lt!==h.next&&dh(F.x,F.y,z.x,z.y,$.x,$.y,Lt.x,Lt.y)&&Ss(Lt.prev,Lt,Lt.next)>=0)return!1;Lt=Lt.nextZ}return!0}function cg(h,v,_){var R=h;do{var F=R.prev,z=R.next.next;!jh(F,z)&&wv(F,R,R.next,z)&&bf(F,z)&&bf(z,F)&&(v.push(F.i/_),v.push(R.i/_),v.push(z.i/_),Gl(R),Gl(R.next),R=h=z),R=R.next}while(R!==h);return Ap(R)}function x0(h,v,_,R,F,z){var $=h;do{for(var ue=$.next.next;ue!==$.prev;){if($.i!==ue.i&&Mp($,ue)){var Pe=Vd($,ue);return $=Ap($,$.next),Pe=Ap(Pe,Pe.next),Ud($,v,_,R,F,z),void Ud(Pe,v,_,R,F,z)}ue=ue.next}$=$.next}while($!==h)}function b0(h,v){return h.x-v.x}function fg(h,v){if(v=function(R,F){var z,$=F,ue=R.x,Pe=R.y,Qe=-1/0;do{if(Pe<=$.y&&Pe>=$.next.y&&$.next.y!==$.y){var ct=$.x+(Pe-$.y)*($.next.x-$.x)/($.next.y-$.y);if(ct<=ue&&ct>Qe){if(Qe=ct,ct===ue){if(Pe===$.y)return $;if(Pe===$.next.y)return $.next}z=$.x<$.next.x?$:$.next}}$=$.next}while($!==F);if(!z)return null;if(ue===Qe)return z;var mt,Lt=z,Ut=z.x,ur=z.y,fr=1/0;$=z;do ue>=$.x&&$.x>=Ut&&ue!==$.x&&dh(Pe<ur?ue:Qe,Pe,Ut,ur,Pe<ur?Qe:ue,Pe,$.x,$.y)&&(mt=Math.abs(Pe-$.y)/(ue-$.x),bf($,R)&&(mt<fr||mt===fr&&($.x>z.x||$.x===z.x&&Ev(z,$)))&&(z=$,fr=mt)),$=$.next;while($!==Lt);return z}(h,v)){var _=Vd(v,h);Ap(v,v.next),Ap(_,_.next)}}function Ev(h,v){return Ss(h.prev,h,v.prev)<0&&Ss(v.next,h,h.next)<0}function Zd(h,v,_,R,F){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=32767*(h-_)*F)|h<<8))|h<<4))|h<<2))|h<<1))|(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v=32767*(v-R)*F)|v<<8))|v<<4))|v<<2))|v<<1))<<1}function hg(h){var v=h,_=h;do(v.x<_.x||v.x===_.x&&v.y<_.y)&&(_=v),v=v.next;while(v!==h);return _}function dh(h,v,_,R,F,z,$,ue){return(F-$)*(v-ue)-(h-$)*(z-ue)>=0&&(h-$)*(R-ue)-(_-$)*(v-ue)>=0&&(_-$)*(z-ue)-(F-$)*(R-ue)>=0}function Mp(h,v){return h.next.i!==v.i&&h.prev.i!==v.i&&!function(_,R){var F=_;do{if(F.i!==_.i&&F.next.i!==_.i&&F.i!==R.i&&F.next.i!==R.i&&wv(F,F.next,_,R))return!0;F=F.next}while(F!==_);return!1}(h,v)&&(bf(h,v)&&bf(v,h)&&function(_,R){var F=_,z=!1,$=(_.x+R.x)/2,ue=(_.y+R.y)/2;do F.y>ue!=F.next.y>ue&&F.next.y!==F.y&&$<(F.next.x-F.x)*(ue-F.y)/(F.next.y-F.y)+F.x&&(z=!z),F=F.next;while(F!==_);return z}(h,v)&&(Ss(h.prev,h,v.prev)||Ss(h,v.prev,v))||jh(h,v)&&Ss(h.prev,h,h.next)>0&&Ss(v.prev,v,v.next)>0)}function Ss(h,v,_){return(v.y-h.y)*(_.x-v.x)-(v.x-h.x)*(_.y-v.y)}function jh(h,v){return h.x===v.x&&h.y===v.y}function wv(h,v,_,R){var F=Kn(Ss(h,v,_)),z=Kn(Ss(h,v,R)),$=Kn(Ss(_,R,h)),ue=Kn(Ss(_,R,v));return F!==z&&$!==ue||!(F!==0||!Wl(h,_,v))||!(z!==0||!Wl(h,R,v))||!($!==0||!Wl(_,h,R))||!(ue!==0||!Wl(_,v,R))}function Wl(h,v,_){return v.x<=Math.max(h.x,_.x)&&v.x>=Math.min(h.x,_.x)&&v.y<=Math.max(h.y,_.y)&&v.y>=Math.min(h.y,_.y)}function Kn(h){return h>0?1:h<0?-1:0}function bf(h,v){return Ss(h.prev,h,h.next)<0?Ss(h,v,h.next)>=0&&Ss(h,h.prev,v)>=0:Ss(h,v,h.prev)<0||Ss(h,h.next,v)<0}function Vd(h,v){var _=new Sf(h.i,h.x,h.y),R=new Sf(v.i,v.x,v.y),F=h.next,z=v.prev;return h.next=v,v.prev=h,_.next=F,F.prev=_,R.next=_,_.prev=R,z.next=R,R.prev=z,R}function Qs(h,v,_,R){var F=new Sf(h,v,_);return R?(F.next=R.next,F.prev=R,R.next.prev=F,R.next=F):(F.prev=F,F.next=F),F}function Gl(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Sf(h,v,_){this.i=h,this.x=v,this.y=_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ec(h,v,_,R){for(var F=0,z=v,$=_-R;z<_;z+=R)F+=(h[$]-h[z])*(h[z+1]+h[$+1]),$=z;return F}function vh(h,v,_,R,F){(function z($,ue,Pe,Qe,ct){for(;Qe>Pe;){if(Qe-Pe>600){var mt=Qe-Pe+1,Lt=ue-Pe+1,Ut=Math.log(mt),ur=.5*Math.exp(2*Ut/3),fr=.5*Math.sqrt(Ut*ur*(mt-ur)/mt)*(Lt-mt/2<0?-1:1);z($,ue,Math.max(Pe,Math.floor(ue-Lt*ur/mt+fr)),Math.min(Qe,Math.floor(ue+(mt-Lt)*ur/mt+fr)),ct)}var Lr=$[ue],Rr=Pe,Yr=Qe;for($l($,Pe,ue),ct($[Qe],Lr)>0&&$l($,Pe,Qe);Rr<Yr;){for($l($,Rr,Yr),Rr++,Yr--;ct($[Rr],Lr)<0;)Rr++;for(;ct($[Yr],Lr)>0;)Yr--}ct($[Pe],Lr)===0?$l($,Pe,Yr):$l($,++Yr,Qe),Yr<=ue&&(Pe=Yr+1),ue<=Yr&&(Qe=Yr-1)}})(h,v,_||0,R||h.length-1,F||gh)}function $l(h,v,_){var R=h[v];h[v]=h[_],h[_]=R}function gh(h,v){return h<v?-1:h>v?1:0}function pg(h,v){var _=h.length;if(_<=1)return[h];for(var R,F,z=[],$=0;$<_;$++){var ue=Et(h[$]);ue!==0&&(h[$].area=Math.abs(ue),F===void 0&&(F=ue<0),F===ue<0?(R&&z.push(R),R=[h[$]]):R.push(h[$]))}if(R&&z.push(R),v>1)for(var Pe=0;Pe<z.length;Pe++)z[Pe].length<=v||(vh(z[Pe],v,1,z[Pe].length-1,dg),z[Pe]=z[Pe].slice(0,v));return z}function dg(h,v){return v.area-h.area}function Hd(h,v,_){for(var R=_.patternDependencies,F=!1,z=0,$=v;z<$.length;z+=1){var ue=$[z].paint.get(h+"-pattern");ue.isConstant()||(F=!0);var Pe=ue.constantOr(null);Pe&&(F=!0,R[Pe.to]=!0,R[Pe.from]=!0)}return F}function nd(h,v,_,R,F){for(var z=F.patternDependencies,$=0,ue=v;$<ue.length;$+=1){var Pe=ue[$],Qe=Pe.paint.get(h+"-pattern").value;if(Qe.kind!=="constant"){var ct=Qe.evaluate({zoom:R-1},_,{},F.availableImages),mt=Qe.evaluate({zoom:R},_,{},F.availableImages),Lt=Qe.evaluate({zoom:R+1},_,{},F.availableImages);mt=mt&&mt.name?mt.name:mt,Lt=Lt&&Lt.name?Lt.name:Lt,z[ct=ct&&ct.name?ct.name:ct]=!0,z[mt]=!0,z[Lt]=!0,_.patterns[Pe.id]={min:ct,mid:mt,max:Lt}}}return _}Cp.deviation=function(h,v,_,R){var F=v&&v.length,z=Math.abs(Ec(h,0,F?v[0]*_:h.length,_));if(F)for(var $=0,ue=v.length;$<ue;$++)z-=Math.abs(Ec(h,v[$]*_,$<ue-1?v[$+1]*_:h.length,_));var Pe=0;for($=0;$<R.length;$+=3){var Qe=R[$]*_,ct=R[$+1]*_,mt=R[$+2]*_;Pe+=Math.abs((h[Qe]-h[mt])*(h[ct+1]-h[Qe+1])-(h[Qe]-h[ct])*(h[mt+1]-h[Qe+1]))}return z===0&&Pe===0?0:Math.abs((Pe-z)/z)},Cp.flatten=function(h){for(var v=h[0][0].length,_={vertices:[],holes:[],dimensions:v},R=0,F=0;F<h.length;F++){for(var z=0;z<h[F].length;z++)for(var $=0;$<v;$++)_.vertices.push(h[F][z][$]);F>0&&_.holes.push(R+=h[F-1].length)}return _},Sv.default=_0;var Fc=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zh,this.indexArray=new Ne,this.indexArray2=new Nf,this.programConfigurations=new da(h.layers,h.zoom),this.segments=new Wt,this.segments2=new Wt,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};Fc.prototype.populate=function(h,v,_){this.hasPattern=Hd("fill",this.layers,v);for(var R=this.layers[0].layout.get("fill-sort-key"),F=[],z=0,$=h;z<$.length;z+=1){var ue=$[z],Pe=ue.feature,Qe=ue.id,ct=ue.index,mt=ue.sourceLayerIndex,Lt=this.layers[0]._featureFilter.needGeometry,Ut=bs(Pe,Lt);if(this.layers[0]._featureFilter.filter(new wa(this.zoom),Ut,_)){var ur=R?R.evaluate(Ut,{},_,v.availableImages):void 0,fr={id:Qe,properties:Pe.properties,type:Pe.type,sourceLayerIndex:mt,index:ct,geometry:Lt?Ut.geometry:Jo(Pe),patterns:{},sortKey:ur};F.push(fr)}}R&&F.sort(function(pi,wi){return pi.sortKey-wi.sortKey});for(var Lr=0,Rr=F;Lr<Rr.length;Lr+=1){var Yr=Rr[Lr],nn=Yr.geometry,gn=Yr.index,wn=Yr.sourceLayerIndex;if(this.hasPattern){var Dn=nd("fill",this.layers,Yr,this.zoom,v);this.patternFeatures.push(Dn)}else this.addFeature(Yr,nn,gn,_,{});v.featureIndex.insert(h[gn].feature,nn,gn,wn,this.index)}},Fc.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},Fc.prototype.addFeatures=function(h,v,_){for(var R=0,F=this.patternFeatures;R<F.length;R+=1){var z=F[R];this.addFeature(z,z.geometry,z.index,v,_)}},Fc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fc.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,y0),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.indexBuffer2=h.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(h),this.uploaded=!0},Fc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Fc.prototype.addFeature=function(h,v,_,R,F){for(var z=0,$=pg(v,500);z<$.length;z+=1){for(var ue=$[z],Pe=0,Qe=0,ct=ue;Qe<ct.length;Qe+=1)Pe+=ct[Qe].length;for(var mt=this.segments.prepareSegment(Pe,this.layoutVertexArray,this.indexArray),Lt=mt.vertexLength,Ut=[],ur=[],fr=0,Lr=ue;fr<Lr.length;fr+=1){var Rr=Lr[fr];if(Rr.length!==0){Rr!==ue[0]&&ur.push(Ut.length/2);var Yr=this.segments2.prepareSegment(Rr.length,this.layoutVertexArray,this.indexArray2),nn=Yr.vertexLength;this.layoutVertexArray.emplaceBack(Rr[0].x,Rr[0].y),this.indexArray2.emplaceBack(nn+Rr.length-1,nn),Ut.push(Rr[0].x),Ut.push(Rr[0].y);for(var gn=1;gn<Rr.length;gn++)this.layoutVertexArray.emplaceBack(Rr[gn].x,Rr[gn].y),this.indexArray2.emplaceBack(nn+gn-1,nn+gn),Ut.push(Rr[gn].x),Ut.push(Rr[gn].y);Yr.vertexLength+=Rr.length,Yr.primitiveLength+=Rr.length}}for(var wn=Sv(Ut,ur),Dn=0;Dn<wn.length;Dn+=3)this.indexArray.emplaceBack(Lt+wn[Dn],Lt+wn[Dn+1],Lt+wn[Dn+2]);mt.vertexLength+=Pe,mt.primitiveLength+=wn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,F,R)},zi("FillBucket",Fc,{omit:["layers","patternFeatures"]});var Wh=new _s({"fill-sort-key":new Ai(At.layout_fill["fill-sort-key"])}),jd={paint:new _s({"fill-antialias":new Ji(At.paint_fill["fill-antialias"]),"fill-opacity":new Ai(At.paint_fill["fill-opacity"]),"fill-color":new Ai(At.paint_fill["fill-color"]),"fill-outline-color":new Ai(At.paint_fill["fill-outline-color"]),"fill-translate":new Ji(At.paint_fill["fill-translate"]),"fill-translate-anchor":new Ji(At.paint_fill["fill-translate-anchor"]),"fill-pattern":new al(At.paint_fill["fill-pattern"])}),layout:Wh},um=function(h){function v(_){h.call(this,_,jd)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.recalculate=function(_,R){h.prototype.recalculate.call(this,_,R);var F=this.paint._values["fill-outline-color"];F.value.kind==="constant"&&F.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},v.prototype.createBucket=function(_){return new Fc(_)},v.prototype.queryRadius=function(){return Is(this.paint.get("fill-translate"))},v.prototype.queryIntersectsFeature=function(_,R,F,z,$,ue,Pe){return ac(Xu(_,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ue.angle,Pe),z)},v.prototype.isTileClipped=function(){return!0},v}(yc),vg=au([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Cv=zs;function zs(h,v,_,R,F){this.properties={},this.extent=_,this.type=0,this._pbf=h,this._geometry=-1,this._keys=R,this._values=F,h.readFields(Zf,this,v)}function Zf(h,v,_){h==1?v.id=_.readVarint():h==2?function(R,F){for(var z=R.readVarint()+R.pos;R.pos<z;){var $=F._keys[R.readVarint()],ue=F._values[R.readVarint()];F.properties[$]=ue}}(_,v):h==3?v.type=_.readVarint():h==4&&(v._geometry=_.pos)}function nf(h){for(var v,_,R=0,F=0,z=h.length,$=z-1;F<z;$=F++)R+=((_=h[$]).x-(v=h[F]).x)*(v.y+_.y);return R}zs.types=["Unknown","Point","LineString","Polygon"],zs.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var v,_=h.readVarint()+h.pos,R=1,F=0,z=0,$=0,ue=[];h.pos<_;){if(F<=0){var Pe=h.readVarint();R=7&Pe,F=Pe>>3}if(F--,R===1||R===2)z+=h.readSVarint(),$+=h.readSVarint(),R===1&&(v&&ue.push(v),v=[]),v.push(new Q(z,$));else{if(R!==7)throw new Error("unknown command "+R);v&&v.push(v[0].clone())}}return v&&ue.push(v),ue},zs.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var v=h.readVarint()+h.pos,_=1,R=0,F=0,z=0,$=1/0,ue=-1/0,Pe=1/0,Qe=-1/0;h.pos<v;){if(R<=0){var ct=h.readVarint();_=7&ct,R=ct>>3}if(R--,_===1||_===2)(F+=h.readSVarint())<$&&($=F),F>ue&&(ue=F),(z+=h.readSVarint())<Pe&&(Pe=z),z>Qe&&(Qe=z);else if(_!==7)throw new Error("unknown command "+_)}return[$,Pe,ue,Qe]},zs.prototype.toGeoJSON=function(h,v,_){var R,F,z=this.extent*Math.pow(2,_),$=this.extent*h,ue=this.extent*v,Pe=this.loadGeometry(),Qe=zs.types[this.type];function ct(Ut){for(var ur=0;ur<Ut.length;ur++){var fr=Ut[ur];Ut[ur]=[360*(fr.x+$)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(fr.y+ue)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var mt=[];for(R=0;R<Pe.length;R++)mt[R]=Pe[R][0];ct(Pe=mt);break;case 2:for(R=0;R<Pe.length;R++)ct(Pe[R]);break;case 3:for(Pe=function(Ut){var ur=Ut.length;if(ur<=1)return[Ut];for(var fr,Lr,Rr=[],Yr=0;Yr<ur;Yr++){var nn=nf(Ut[Yr]);nn!==0&&(Lr===void 0&&(Lr=nn<0),Lr===nn<0?(fr&&Rr.push(fr),fr=[Ut[Yr]]):fr.push(Ut[Yr]))}return fr&&Rr.push(fr),Rr}(Pe),R=0;R<Pe.length;R++)for(F=0;F<Pe[R].length;F++)ct(Pe[R][F])}Pe.length===1?Pe=Pe[0]:Qe="Multi"+Qe;var Lt={type:"Feature",geometry:{type:Qe,coordinates:Pe},properties:this.properties};return"id"in this&&(Lt.id=this.id),Lt};var id=ad;function ad(h,v){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(Bc,this,v),this.length=this._features.length}function Bc(h,v,_){h===15?v.version=_.readVarint():h===1?v.name=_.readString():h===5?v.extent=_.readVarint():h===2?v._features.push(_.pos):h===3?v._keys.push(_.readString()):h===4&&v._values.push(function(R){for(var F=null,z=R.readVarint()+R.pos;R.pos<z;){var $=R.readVarint()>>3;F=$===1?R.readString():$===2?R.readFloat():$===3?R.readDouble():$===4?R.readVarint64():$===5?R.readVarint():$===6?R.readSVarint():$===7?R.readBoolean():null}return F}(_))}function Rp(h,v,_){if(h===3){var R=new id(_,_.readVarint()+_.pos);R.length&&(v[R.name]=R)}}ad.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var v=this._pbf.readVarint()+this._pbf.pos;return new Cv(this._pbf,v,this.extent,this._keys,this._values)};var Gh={VectorTile:function(h,v){this.layers=h.readFields(Rp,{},v)},VectorTileFeature:Cv,VectorTileLayer:id},Xl=Gh.VectorTileFeature.types,Ef=Math.pow(2,13);function ls(h,v,_,R,F,z,$,ue){h.emplaceBack(v,_,2*Math.floor(R*Ef)+$,F*Ef*2,z*Ef*2,Math.round(ue))}var sl=function(h){this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(v){return v.id}),this.index=h.index,this.hasPattern=!1,this.layoutVertexArray=new _c,this.indexArray=new Ne,this.programConfigurations=new da(h.layers,h.zoom),this.segments=new Wt,this.stateDependentLayerIds=this.layers.filter(function(v){return v.isStateDependent()}).map(function(v){return v.id})};function $s(h,v){return h.x===v.x&&(h.x<0||h.x>8192)||h.y===v.y&&(h.y<0||h.y>8192)}sl.prototype.populate=function(h,v,_){this.features=[],this.hasPattern=Hd("fill-extrusion",this.layers,v);for(var R=0,F=h;R<F.length;R+=1){var z=F[R],$=z.feature,ue=z.id,Pe=z.index,Qe=z.sourceLayerIndex,ct=this.layers[0]._featureFilter.needGeometry,mt=bs($,ct);if(this.layers[0]._featureFilter.filter(new wa(this.zoom),mt,_)){var Lt={id:ue,sourceLayerIndex:Qe,index:Pe,geometry:ct?mt.geometry:Jo($),properties:$.properties,type:$.type,patterns:{}};this.hasPattern?this.features.push(nd("fill-extrusion",this.layers,Lt,this.zoom,v)):this.addFeature(Lt,Lt.geometry,Pe,_,{}),v.featureIndex.insert($,Lt.geometry,Pe,Qe,this.index,!0)}}},sl.prototype.addFeatures=function(h,v,_){for(var R=0,F=this.features;R<F.length;R+=1){var z=F[R];this.addFeature(z,z.geometry,z.index,v,_)}},sl.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},sl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},sl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},sl.prototype.upload=function(h){this.uploaded||(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,vg),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},sl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},sl.prototype.addFeature=function(h,v,_,R,F){for(var z=0,$=pg(v,500);z<$.length;z+=1){for(var ue=$[z],Pe=0,Qe=0,ct=ue;Qe<ct.length;Qe+=1)Pe+=ct[Qe].length;for(var mt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Lt=0,Ut=ue;Lt<Ut.length;Lt+=1){var ur=Ut[Lt];if(ur.length!==0&&!((go=ur).every(function(Ga){return Ga.x<0})||go.every(function(Ga){return Ga.x>8192})||go.every(function(Ga){return Ga.y<0})||go.every(function(Ga){return Ga.y>8192})))for(var fr=0,Lr=0;Lr<ur.length;Lr++){var Rr=ur[Lr];if(Lr>=1){var Yr=ur[Lr-1];if(!$s(Rr,Yr)){mt.vertexLength+4>Wt.MAX_VERTEX_ARRAY_LENGTH&&(mt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var nn=Rr.sub(Yr)._perp()._unit(),gn=Yr.dist(Rr);fr+gn>32768&&(fr=0),ls(this.layoutVertexArray,Rr.x,Rr.y,nn.x,nn.y,0,0,fr),ls(this.layoutVertexArray,Rr.x,Rr.y,nn.x,nn.y,0,1,fr),ls(this.layoutVertexArray,Yr.x,Yr.y,nn.x,nn.y,0,0,fr+=gn),ls(this.layoutVertexArray,Yr.x,Yr.y,nn.x,nn.y,0,1,fr);var wn=mt.vertexLength;this.indexArray.emplaceBack(wn,wn+2,wn+1),this.indexArray.emplaceBack(wn+1,wn+2,wn+3),mt.vertexLength+=4,mt.primitiveLength+=2}}}}if(mt.vertexLength+Pe>Wt.MAX_VERTEX_ARRAY_LENGTH&&(mt=this.segments.prepareSegment(Pe,this.layoutVertexArray,this.indexArray)),Xl[h.type]==="Polygon"){for(var Dn=[],pi=[],wi=mt.vertexLength,qi=0,Di=ue;qi<Di.length;qi+=1){var oa=Di[qi];if(oa.length!==0){oa!==ue[0]&&pi.push(Dn.length/2);for(var Oi=0;Oi<oa.length;Oi++){var ao=oa[Oi];ls(this.layoutVertexArray,ao.x,ao.y,0,0,1,1,0),Dn.push(ao.x),Dn.push(ao.y)}}}for(var Ki=Sv(Dn,pi),ji=0;ji<Ki.length;ji+=3)this.indexArray.emplaceBack(wi+Ki[ji],wi+Ki[ji+2],wi+Ki[ji+1]);mt.primitiveLength+=Ki.length/3,mt.vertexLength+=Pe}}var go;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,F,R)},zi("FillExtrusionBucket",sl,{omit:["layers","features"]});var xl={paint:new _s({"fill-extrusion-opacity":new Ji(At["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ai(At["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ji(At["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ji(At["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new al(At["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ai(At["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ai(At["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ji(At["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},lm=function(h){function v(_){h.call(this,_,xl)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.createBucket=function(_){return new sl(_)},v.prototype.queryRadius=function(){return Is(this.paint.get("fill-extrusion-translate"))},v.prototype.is3D=function(){return!0},v.prototype.queryIntersectsFeature=function(_,R,F,z,$,ue,Pe,Qe){var ct=Xu(_,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ue.angle,Pe),mt=this.paint.get("fill-extrusion-height").evaluate(R,F),Lt=this.paint.get("fill-extrusion-base").evaluate(R,F),Ut=function(fr,Lr,Rr,Yr){for(var nn=[],gn=0,wn=fr;gn<wn.length;gn+=1){var Dn=wn[gn],pi=[Dn.x,Dn.y,0,1];ph(pi,pi,Lr),nn.push(new Q(pi[0]/pi[3],pi[1]/pi[3]))}return nn}(ct,Qe),ur=function(fr,Lr,Rr,Yr){for(var nn=[],gn=[],wn=Yr[8]*Lr,Dn=Yr[9]*Lr,pi=Yr[10]*Lr,wi=Yr[11]*Lr,qi=Yr[8]*Rr,Di=Yr[9]*Rr,oa=Yr[10]*Rr,Oi=Yr[11]*Rr,ao=0,Ki=fr;ao<Ki.length;ao+=1){for(var ji=[],go=[],Ga=0,oo=Ki[ao];Ga<oo.length;Ga+=1){var yi=oo[Ga],Bo=yi.x,es=yi.y,Xs=Yr[0]*Bo+Yr[4]*es+Yr[12],ps=Yr[1]*Bo+Yr[5]*es+Yr[13],ks=Yr[2]*Bo+Yr[6]*es+Yr[14],su=Yr[3]*Bo+Yr[7]*es+Yr[15],Ls=ks+pi,gu=su+wi,qu=Xs+qi,Qu=ps+Di,ul=ks+oa,Mu=su+Oi,Ju=new Q((Xs+wn)/gu,(ps+Dn)/gu);Ju.z=Ls/gu,ji.push(Ju);var qa=new Q(qu/Mu,Qu/Mu);qa.z=ul/Mu,go.push(qa)}nn.push(ji),gn.push(go)}return[nn,gn]}(z,Lt,mt,Qe);return function(fr,Lr,Rr){var Yr=1/0;ac(Rr,Lr)&&(Yr=cm(Rr,Lr[0]));for(var nn=0;nn<Lr.length;nn++)for(var gn=Lr[nn],wn=fr[nn],Dn=0;Dn<gn.length-1;Dn++){var pi=gn[Dn],wi=[pi,gn[Dn+1],wn[Dn+1],wn[Dn],pi];ef(Rr,wi)&&(Yr=Math.min(Yr,cm(Rr,wi)))}return Yr!==1/0&&Yr}(ur[0],ur[1],Ut)},v}(yc);function $h(h,v){return h.x*v.x+h.y*v.y}function cm(h,v){if(h.length===1){for(var _,R=0,F=v[R++];!_||F.equals(_);)if(!(_=v[R++]))return 1/0;for(;R<v.length;R++){var z=v[R],$=h[0],ue=_.sub(F),Pe=z.sub(F),Qe=$.sub(F),ct=$h(ue,ue),mt=$h(ue,Pe),Lt=$h(Pe,Pe),Ut=$h(Qe,ue),ur=$h(Qe,Pe),fr=ct*Lt-mt*mt,Lr=(Lt*Ut-mt*ur)/fr,Rr=(ct*ur-mt*Ut)/fr,Yr=F.z*(1-Lr-Rr)+_.z*Lr+z.z*Rr;if(isFinite(Yr))return Yr}return 1/0}for(var nn=1/0,gn=0,wn=v;gn<wn.length;gn+=1)nn=Math.min(nn,wn[gn].z);return nn}var Wd=au([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Av=au([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Tv=Gh.VectorTileFeature.types,fm=Math.cos(Math.PI/180*37.5),hm=Math.pow(2,14)/.5,Ps=function(h){var v=this;this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(_){return _.id}),this.index=h.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(_){v.gradients[_.id]={}}),this.layoutVertexArray=new Ca,this.layoutVertexArray2=new Uh,this.indexArray=new Ne,this.programConfigurations=new da(h.layers,h.zoom),this.segments=new Wt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(_){return _.isStateDependent()}).map(function(_){return _.id})};Ps.prototype.populate=function(h,v,_){this.hasPattern=Hd("line",this.layers,v);for(var R=this.layers[0].layout.get("line-sort-key"),F=[],z=0,$=h;z<$.length;z+=1){var ue=$[z],Pe=ue.feature,Qe=ue.id,ct=ue.index,mt=ue.sourceLayerIndex,Lt=this.layers[0]._featureFilter.needGeometry,Ut=bs(Pe,Lt);if(this.layers[0]._featureFilter.filter(new wa(this.zoom),Ut,_)){var ur=R?R.evaluate(Ut,{},_):void 0,fr={id:Qe,properties:Pe.properties,type:Pe.type,sourceLayerIndex:mt,index:ct,geometry:Lt?Ut.geometry:Jo(Pe),patterns:{},sortKey:ur};F.push(fr)}}R&&F.sort(function(pi,wi){return pi.sortKey-wi.sortKey});for(var Lr=0,Rr=F;Lr<Rr.length;Lr+=1){var Yr=Rr[Lr],nn=Yr.geometry,gn=Yr.index,wn=Yr.sourceLayerIndex;if(this.hasPattern){var Dn=nd("line",this.layers,Yr,this.zoom,v);this.patternFeatures.push(Dn)}else this.addFeature(Yr,nn,gn,_,{});v.featureIndex.insert(h[gn].feature,nn,gn,wn,this.index)}},Ps.prototype.update=function(h,v,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(h,v,this.stateDependentLayers,_)},Ps.prototype.addFeatures=function(h,v,_){for(var R=0,F=this.patternFeatures;R<F.length;R+=1){var z=F[R];this.addFeature(z,z.geometry,z.index,v,_)}},Ps.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ps.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ps.prototype.upload=function(h){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=h.createVertexBuffer(this.layoutVertexArray2,Av)),this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,Wd),this.indexBuffer=h.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(h),this.uploaded=!0},Ps.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ps.prototype.lineFeatureClips=function(h){if(h.properties&&h.properties.hasOwnProperty("mapbox_clip_start")&&h.properties.hasOwnProperty("mapbox_clip_end"))return{start:+h.properties.mapbox_clip_start,end:+h.properties.mapbox_clip_end}},Ps.prototype.addFeature=function(h,v,_,R,F){var z=this.layers[0].layout,$=z.get("line-join").evaluate(h,{}),ue=z.get("line-cap"),Pe=z.get("line-miter-limit"),Qe=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(h);for(var ct=0,mt=v;ct<mt.length;ct+=1)this.addLine(mt[ct],h,$,ue,Pe,Qe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,h,_,F,R)},Ps.prototype.addLine=function(h,v,_,R,F,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var $=0;$<h.length-1;$++)this.totalDistance+=h[$].dist(h[$+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ue=Tv[v.type]==="Polygon",Pe=h.length;Pe>=2&&h[Pe-1].equals(h[Pe-2]);)Pe--;for(var Qe=0;Qe<Pe-1&&h[Qe].equals(h[Qe+1]);)Qe++;if(!(Pe<(ue?3:2))){_==="bevel"&&(F=1.05);var ct,mt=this.overscaling<=16?122880/(512*this.overscaling):0,Lt=this.segments.prepareSegment(10*Pe,this.layoutVertexArray,this.indexArray),Ut=void 0,ur=void 0,fr=void 0,Lr=void 0;this.e1=this.e2=-1,ue&&(Lr=h[Qe].sub(ct=h[Pe-2])._unit()._perp());for(var Rr=Qe;Rr<Pe;Rr++)if(!(ur=Rr===Pe-1?ue?h[Qe+1]:void 0:h[Rr+1])||!h[Rr].equals(ur)){Lr&&(fr=Lr),ct&&(Ut=ct),ct=h[Rr],Lr=ur?ur.sub(ct)._unit()._perp():fr;var Yr=(fr=fr||Lr).add(Lr);Yr.x===0&&Yr.y===0||Yr._unit();var nn=fr.x*Lr.x+fr.y*Lr.y,gn=Yr.x*Lr.x+Yr.y*Lr.y,wn=gn!==0?1/gn:1/0,Dn=2*Math.sqrt(2-2*gn),pi=gn<fm&&Ut&&ur,wi=fr.x*Lr.y-fr.y*Lr.x>0;if(pi&&Rr>Qe){var qi=ct.dist(Ut);if(qi>2*mt){var Di=ct.sub(ct.sub(Ut)._mult(mt/qi)._round());this.updateDistance(Ut,Di),this.addCurrentVertex(Di,fr,0,0,Lt),Ut=Di}}var oa=Ut&&ur,Oi=oa?_:ue?"butt":R;if(oa&&Oi==="round"&&(wn<z?Oi="miter":wn<=2&&(Oi="fakeround")),Oi==="miter"&&wn>F&&(Oi="bevel"),Oi==="bevel"&&(wn>2&&(Oi="flipbevel"),wn<F&&(Oi="miter")),Ut&&this.updateDistance(Ut,ct),Oi==="miter")Yr._mult(wn),this.addCurrentVertex(ct,Yr,0,0,Lt);else if(Oi==="flipbevel"){if(wn>100)Yr=Lr.mult(-1);else{var ao=wn*fr.add(Lr).mag()/fr.sub(Lr).mag();Yr._perp()._mult(ao*(wi?-1:1))}this.addCurrentVertex(ct,Yr,0,0,Lt),this.addCurrentVertex(ct,Yr.mult(-1),0,0,Lt)}else if(Oi==="bevel"||Oi==="fakeround"){var Ki=-Math.sqrt(wn*wn-1),ji=wi?Ki:0,go=wi?0:Ki;if(Ut&&this.addCurrentVertex(ct,fr,ji,go,Lt),Oi==="fakeround")for(var Ga=Math.round(180*Dn/Math.PI/20),oo=1;oo<Ga;oo++){var yi=oo/Ga;if(yi!==.5){var Bo=yi-.5;yi+=yi*Bo*(yi-1)*((1.0904+nn*(nn*(3.55645-1.43519*nn)-3.2452))*Bo*Bo+(.848013+nn*(.215638*nn-1.06021)))}var es=Lr.sub(fr)._mult(yi)._add(fr)._unit()._mult(wi?-1:1);this.addHalfVertex(ct,es.x,es.y,!1,wi,0,Lt)}ur&&this.addCurrentVertex(ct,Lr,-ji,-go,Lt)}else if(Oi==="butt")this.addCurrentVertex(ct,Yr,0,0,Lt);else if(Oi==="square"){var Xs=Ut?1:-1;this.addCurrentVertex(ct,Yr,Xs,Xs,Lt)}else Oi==="round"&&(Ut&&(this.addCurrentVertex(ct,fr,0,0,Lt),this.addCurrentVertex(ct,fr,1,1,Lt,!0)),ur&&(this.addCurrentVertex(ct,Lr,-1,-1,Lt,!0),this.addCurrentVertex(ct,Lr,0,0,Lt)));if(pi&&Rr<Pe-1){var ps=ct.dist(ur);if(ps>2*mt){var ks=ct.add(ur.sub(ct)._mult(mt/ps)._round());this.updateDistance(ct,ks),this.addCurrentVertex(ks,Lr,0,0,Lt),ct=ks}}}}},Ps.prototype.addCurrentVertex=function(h,v,_,R,F,z){z===void 0&&(z=!1);var $=v.y*R-v.x,ue=-v.y-v.x*R;this.addHalfVertex(h,v.x+v.y*_,v.y-v.x*_,z,!1,_,F),this.addHalfVertex(h,$,ue,z,!0,-R,F),this.distance>hm/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(h,v,_,R,F,z))},Ps.prototype.addHalfVertex=function(h,v,_,R,F,z,$){var ue=.5*(this.lineClips?this.scaledDistance*(hm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((h.x<<1)+(R?1:0),(h.y<<1)+(F?1:0),Math.round(63*v)+128,Math.round(63*_)+128,1+(z===0?0:z<0?-1:1)|(63&ue)<<2,ue>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Pe=$.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Pe),$.primitiveLength++),F?this.e2=Pe:this.e1=Pe},Ps.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ps.prototype.updateDistance=function(h,v){this.distance+=h.dist(v),this.updateScaledDistance()},zi("LineBucket",Ps,{omit:["layers","patternFeatures"]});var S0=new _s({"line-cap":new Ji(At.layout_line["line-cap"]),"line-join":new Ai(At.layout_line["line-join"]),"line-miter-limit":new Ji(At.layout_line["line-miter-limit"]),"line-round-limit":new Ji(At.layout_line["line-round-limit"]),"line-sort-key":new Ai(At.layout_line["line-sort-key"])}),pm={paint:new _s({"line-opacity":new Ai(At.paint_line["line-opacity"]),"line-color":new Ai(At.paint_line["line-color"]),"line-translate":new Ji(At.paint_line["line-translate"]),"line-translate-anchor":new Ji(At.paint_line["line-translate-anchor"]),"line-width":new Ai(At.paint_line["line-width"]),"line-gap-width":new Ai(At.paint_line["line-gap-width"]),"line-offset":new Ai(At.paint_line["line-offset"]),"line-blur":new Ai(At.paint_line["line-blur"]),"line-dasharray":new yl(At.paint_line["line-dasharray"]),"line-pattern":new al(At.paint_line["line-pattern"]),"line-gradient":new ol(At.paint_line["line-gradient"])}),layout:S0},Ip=new(function(h){function v(){h.apply(this,arguments)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.possiblyEvaluate=function(_,R){return R=new wa(Math.floor(R.zoom),{now:R.now,fadeDuration:R.fadeDuration,zoomHistory:R.zoomHistory,transition:R.transition}),h.prototype.possiblyEvaluate.call(this,_,R)},v.prototype.evaluate=function(_,R,F,z){return R=E({},R,{zoom:Math.floor(R.zoom)}),h.prototype.evaluate.call(this,_,R,F,z)},v}(Ai))(pm.paint.properties["line-width"].specification);Ip.useIntegerZoom=!0;var Gd=function(h){function v(_){h.call(this,_,pm),this.gradientVersion=0}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype._handleSpecialPaintPropertyUpdate=function(_){_==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof As,this.gradientVersion=(this.gradientVersion+1)%Ce)},v.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},v.prototype.recalculate=function(_,R){h.prototype.recalculate.call(this,_,R),this.paint._values["line-floorwidth"]=Ip.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,_)},v.prototype.createBucket=function(_){return new Ps(_)},v.prototype.queryRadius=function(_){var R=_,F=gg(wu("line-width",this,R),wu("line-gap-width",this,R)),z=wu("line-offset",this,R);return F/2+Math.abs(z)+Is(this.paint.get("line-translate"))},v.prototype.queryIntersectsFeature=function(_,R,F,z,$,ue,Pe){var Qe=Xu(_,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ue.angle,Pe),ct=Pe/2*gg(this.paint.get("line-width").evaluate(R,F),this.paint.get("line-gap-width").evaluate(R,F)),mt=this.paint.get("line-offset").evaluate(R,F);return mt&&(z=function(Lt,Ut){for(var ur=[],fr=new Q(0,0),Lr=0;Lr<Lt.length;Lr++){for(var Rr=Lt[Lr],Yr=[],nn=0;nn<Rr.length;nn++){var gn=Rr[nn],wn=Rr[nn+1],Dn=nn===0?fr:gn.sub(Rr[nn-1])._unit()._perp(),pi=nn===Rr.length-1?fr:wn.sub(gn)._unit()._perp(),wi=Dn._add(pi)._unit();wi._mult(1/(wi.x*pi.x+wi.y*pi.y)),Yr.push(wi._mult(Ut)._add(gn))}ur.push(Yr)}return ur}(z,mt*Pe)),function(Lt,Ut,ur){for(var fr=0;fr<Ut.length;fr++){var Lr=Ut[fr];if(Lt.length>=3){for(var Rr=0;Rr<Lr.length;Rr++)if(Zl(Lt,Lr[Rr]))return!0}if(Ul(Lt,Lr,ur))return!0}return!1}(Qe,z,ct)},v.prototype.isTileClipped=function(){return!0},v}(yc);function gg(h,v){return v>0?v+2*h:h}var $d=au([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),E0=au([{name:"a_projected_pos",components:3,type:"Float32"}],4),Pp=(au([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),au([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),w0=(au([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),au([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),nt=au([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Qt(h,v,_){return h.sections.forEach(function(R){R.text=function(F,z,$){var ue=z.layout.get("text-transform").evaluate($,{});return ue==="uppercase"?F=F.toLocaleUpperCase():ue==="lowercase"&&(F=F.toLocaleLowerCase()),ic.applyArabicShaping&&(F=ic.applyArabicShaping(F)),F}(R.text,v,_)}),h}au([{name:"triangle",components:3,type:"Uint16"}]),au([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),au([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),au([{type:"Float32",name:"offsetX"}]),au([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Sr={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},pn=function(h,v,_,R,F){var z,$,ue=8*F-R-1,Pe=(1<<ue)-1,Qe=Pe>>1,ct=-7,mt=_?F-1:0,Lt=_?-1:1,Ut=h[v+mt];for(mt+=Lt,z=Ut&(1<<-ct)-1,Ut>>=-ct,ct+=ue;ct>0;z=256*z+h[v+mt],mt+=Lt,ct-=8);for($=z&(1<<-ct)-1,z>>=-ct,ct+=R;ct>0;$=256*$+h[v+mt],mt+=Lt,ct-=8);if(z===0)z=1-Qe;else{if(z===Pe)return $?NaN:1/0*(Ut?-1:1);$+=Math.pow(2,R),z-=Qe}return(Ut?-1:1)*$*Math.pow(2,z-R)},kn=function(h,v,_,R,F,z){var $,ue,Pe,Qe=8*z-F-1,ct=(1<<Qe)-1,mt=ct>>1,Lt=F===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ut=R?0:z-1,ur=R?1:-1,fr=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(ue=isNaN(v)?1:0,$=ct):($=Math.floor(Math.log(v)/Math.LN2),v*(Pe=Math.pow(2,-$))<1&&($--,Pe*=2),(v+=$+mt>=1?Lt/Pe:Lt*Math.pow(2,1-mt))*Pe>=2&&($++,Pe/=2),$+mt>=ct?(ue=0,$=ct):$+mt>=1?(ue=(v*Pe-1)*Math.pow(2,F),$+=mt):(ue=v*Math.pow(2,mt-1)*Math.pow(2,F),$=0));F>=8;h[_+Ut]=255&ue,Ut+=ur,ue/=256,F-=8);for($=$<<F|ue,Qe+=F;Qe>0;h[_+Ut]=255&$,Ut+=ur,$/=256,Qe-=8);h[_+Ut-ur]|=128*fr},vn=en;function en(h){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(h)?h:new Uint8Array(h||0),this.pos=0,this.type=0,this.length=this.buf.length}en.Varint=0,en.Fixed64=1,en.Bytes=2,en.Fixed32=5;var ri=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Hn(h){return h.type===en.Bytes?h.readVarint()+h.pos:h.pos+1}function di(h,v,_){return _?4294967296*v+(h>>>0):4294967296*(v>>>0)+(h>>>0)}function ii(h,v,_){var R=v<=16383?1:v<=2097151?2:v<=268435455?3:Math.floor(Math.log(v)/(7*Math.LN2));_.realloc(R);for(var F=_.pos-1;F>=h;F--)_.buf[F+R]=_.buf[F]}function ui(h,v){for(var _=0;_<h.length;_++)v.writeVarint(h[_])}function Ei(h,v){for(var _=0;_<h.length;_++)v.writeSVarint(h[_])}function Rn(h,v){for(var _=0;_<h.length;_++)v.writeFloat(h[_])}function mi(h,v){for(var _=0;_<h.length;_++)v.writeDouble(h[_])}function Jr(h,v){for(var _=0;_<h.length;_++)v.writeBoolean(h[_])}function En(h,v){for(var _=0;_<h.length;_++)v.writeFixed32(h[_])}function ai(h,v){for(var _=0;_<h.length;_++)v.writeSFixed32(h[_])}function Ti(h,v){for(var _=0;_<h.length;_++)v.writeFixed64(h[_])}function Kr(h,v){for(var _=0;_<h.length;_++)v.writeSFixed64(h[_])}function Bi(h,v){return(h[v]|h[v+1]<<8|h[v+2]<<16)+16777216*h[v+3]}function qn(h,v,_){h[_]=v,h[_+1]=v>>>8,h[_+2]=v>>>16,h[_+3]=v>>>24}function Ri(h,v){return(h[v]|h[v+1]<<8|h[v+2]<<16)+(h[v+3]<<24)}function Vn(h,v,_){h===1&&_.readMessage(_i,v)}function _i(h,v,_){if(h===3){var R=_.readMessage(na,{}),F=R.width,z=R.height,$=R.left,ue=R.top,Pe=R.advance;v.push({id:R.id,bitmap:new rf({width:F+6,height:z+6},R.bitmap),metrics:{width:F,height:z,left:$,top:ue,advance:Pe}})}}function na(h,v,_){h===1?v.id=_.readVarint():h===2?v.bitmap=_.readBytes():h===3?v.width=_.readVarint():h===4?v.height=_.readVarint():h===5?v.left=_.readSVarint():h===6?v.top=_.readSVarint():h===7&&(v.advance=_.readVarint())}function La(h){for(var v=0,_=0,R=0,F=h;R<F.length;R+=1){var z=F[R];v+=z.w*z.h,_=Math.max(_,z.w)}h.sort(function(fr,Lr){return Lr.h-fr.h});for(var $=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(v/.95)),_),h:1/0}],ue=0,Pe=0,Qe=0,ct=h;Qe<ct.length;Qe+=1)for(var mt=ct[Qe],Lt=$.length-1;Lt>=0;Lt--){var Ut=$[Lt];if(!(mt.w>Ut.w||mt.h>Ut.h)){if(mt.x=Ut.x,mt.y=Ut.y,Pe=Math.max(Pe,mt.y+mt.h),ue=Math.max(ue,mt.x+mt.w),mt.w===Ut.w&&mt.h===Ut.h){var ur=$.pop();Lt<$.length&&($[Lt]=ur)}else mt.h===Ut.h?(Ut.x+=mt.w,Ut.w-=mt.w):mt.w===Ut.w?(Ut.y+=mt.h,Ut.h-=mt.h):($.push({x:Ut.x+mt.w,y:Ut.y,w:Ut.w-mt.w,h:mt.h}),Ut.y+=mt.h,Ut.h-=mt.h);break}}return{w:ue,h:Pe,fill:v/(ue*Pe)||0}}en.prototype={destroy:function(){this.buf=null},readFields:function(h,v,_){for(_=_||this.length;this.pos<_;){var R=this.readVarint(),F=R>>3,z=this.pos;this.type=7&R,h(F,v,this),this.pos===z&&this.skip(R)}return v},readMessage:function(h,v){return this.readFields(h,v,this.readVarint()+this.pos)},readFixed32:function(){var h=Bi(this.buf,this.pos);return this.pos+=4,h},readSFixed32:function(){var h=Ri(this.buf,this.pos);return this.pos+=4,h},readFixed64:function(){var h=Bi(this.buf,this.pos)+4294967296*Bi(this.buf,this.pos+4);return this.pos+=8,h},readSFixed64:function(){var h=Bi(this.buf,this.pos)+4294967296*Ri(this.buf,this.pos+4);return this.pos+=8,h},readFloat:function(){var h=pn(this.buf,this.pos,!0,23,4);return this.pos+=4,h},readDouble:function(){var h=pn(this.buf,this.pos,!0,52,8);return this.pos+=8,h},readVarint:function(h){var v,_,R=this.buf;return v=127&(_=R[this.pos++]),_<128?v:(v|=(127&(_=R[this.pos++]))<<7,_<128?v:(v|=(127&(_=R[this.pos++]))<<14,_<128?v:(v|=(127&(_=R[this.pos++]))<<21,_<128?v:function(F,z,$){var ue,Pe,Qe=$.buf;if(ue=(112&(Pe=Qe[$.pos++]))>>4,Pe<128||(ue|=(127&(Pe=Qe[$.pos++]))<<3,Pe<128)||(ue|=(127&(Pe=Qe[$.pos++]))<<10,Pe<128)||(ue|=(127&(Pe=Qe[$.pos++]))<<17,Pe<128)||(ue|=(127&(Pe=Qe[$.pos++]))<<24,Pe<128)||(ue|=(1&(Pe=Qe[$.pos++]))<<31,Pe<128))return di(F,ue,z);throw new Error("Expected varint not more than 10 bytes")}(v|=(15&(_=R[this.pos]))<<28,h,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var h=this.readVarint();return h%2==1?(h+1)/-2:h/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var h=this.readVarint()+this.pos,v=this.pos;return this.pos=h,h-v>=12&&ri?function(_,R,F){return ri.decode(_.subarray(R,F))}(this.buf,v,h):function(_,R,F){for(var z="",$=R;$<F;){var ue,Pe,Qe,ct=_[$],mt=null,Lt=ct>239?4:ct>223?3:ct>191?2:1;if($+Lt>F)break;Lt===1?ct<128&&(mt=ct):Lt===2?(192&(ue=_[$+1]))==128&&(mt=(31&ct)<<6|63&ue)<=127&&(mt=null):Lt===3?(Pe=_[$+2],(192&(ue=_[$+1]))==128&&(192&Pe)==128&&((mt=(15&ct)<<12|(63&ue)<<6|63&Pe)<=2047||mt>=55296&&mt<=57343)&&(mt=null)):Lt===4&&(Pe=_[$+2],Qe=_[$+3],(192&(ue=_[$+1]))==128&&(192&Pe)==128&&(192&Qe)==128&&((mt=(15&ct)<<18|(63&ue)<<12|(63&Pe)<<6|63&Qe)<=65535||mt>=1114112)&&(mt=null)),mt===null?(mt=65533,Lt=1):mt>65535&&(mt-=65536,z+=String.fromCharCode(mt>>>10&1023|55296),mt=56320|1023&mt),z+=String.fromCharCode(mt),$+=Lt}return z}(this.buf,v,h)},readBytes:function(){var h=this.readVarint()+this.pos,v=this.buf.subarray(this.pos,h);return this.pos=h,v},readPackedVarint:function(h,v){if(this.type!==en.Bytes)return h.push(this.readVarint(v));var _=Hn(this);for(h=h||[];this.pos<_;)h.push(this.readVarint(v));return h},readPackedSVarint:function(h){if(this.type!==en.Bytes)return h.push(this.readSVarint());var v=Hn(this);for(h=h||[];this.pos<v;)h.push(this.readSVarint());return h},readPackedBoolean:function(h){if(this.type!==en.Bytes)return h.push(this.readBoolean());var v=Hn(this);for(h=h||[];this.pos<v;)h.push(this.readBoolean());return h},readPackedFloat:function(h){if(this.type!==en.Bytes)return h.push(this.readFloat());var v=Hn(this);for(h=h||[];this.pos<v;)h.push(this.readFloat());return h},readPackedDouble:function(h){if(this.type!==en.Bytes)return h.push(this.readDouble());var v=Hn(this);for(h=h||[];this.pos<v;)h.push(this.readDouble());return h},readPackedFixed32:function(h){if(this.type!==en.Bytes)return h.push(this.readFixed32());var v=Hn(this);for(h=h||[];this.pos<v;)h.push(this.readFixed32());return h},readPackedSFixed32:function(h){if(this.type!==en.Bytes)return h.push(this.readSFixed32());var v=Hn(this);for(h=h||[];this.pos<v;)h.push(this.readSFixed32());return h},readPackedFixed64:function(h){if(this.type!==en.Bytes)return h.push(this.readFixed64());var v=Hn(this);for(h=h||[];this.pos<v;)h.push(this.readFixed64());return h},readPackedSFixed64:function(h){if(this.type!==en.Bytes)return h.push(this.readSFixed64());var v=Hn(this);for(h=h||[];this.pos<v;)h.push(this.readSFixed64());return h},skip:function(h){var v=7&h;if(v===en.Varint)for(;this.buf[this.pos++]>127;);else if(v===en.Bytes)this.pos=this.readVarint()+this.pos;else if(v===en.Fixed32)this.pos+=4;else{if(v!==en.Fixed64)throw new Error("Unimplemented type: "+v);this.pos+=8}},writeTag:function(h,v){this.writeVarint(h<<3|v)},realloc:function(h){for(var v=this.length||16;v<this.pos+h;)v*=2;if(v!==this.length){var _=new Uint8Array(v);_.set(this.buf),this.buf=_,this.length=v}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(h){this.realloc(4),qn(this.buf,h,this.pos),this.pos+=4},writeSFixed32:function(h){this.realloc(4),qn(this.buf,h,this.pos),this.pos+=4},writeFixed64:function(h){this.realloc(8),qn(this.buf,-1&h,this.pos),qn(this.buf,Math.floor(h*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(h){this.realloc(8),qn(this.buf,-1&h,this.pos),qn(this.buf,Math.floor(h*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(h){(h=+h||0)>268435455||h<0?function(v,_){var R,F;if(v>=0?(R=v%4294967296|0,F=v/4294967296|0):(F=~(-v/4294967296),4294967295^(R=~(-v%4294967296))?R=R+1|0:(R=0,F=F+1|0)),v>=18446744073709552e3||v<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_.realloc(10),function(z,$,ue){ue.buf[ue.pos++]=127&z|128,z>>>=7,ue.buf[ue.pos++]=127&z|128,z>>>=7,ue.buf[ue.pos++]=127&z|128,z>>>=7,ue.buf[ue.pos++]=127&z|128,ue.buf[ue.pos]=127&(z>>>=7)}(R,0,_),function(z,$){var ue=(7&z)<<4;$.buf[$.pos++]|=ue|((z>>>=3)?128:0),z&&($.buf[$.pos++]=127&z|((z>>>=7)?128:0),z&&($.buf[$.pos++]=127&z|((z>>>=7)?128:0),z&&($.buf[$.pos++]=127&z|((z>>>=7)?128:0),z&&($.buf[$.pos++]=127&z|((z>>>=7)?128:0),z&&($.buf[$.pos++]=127&z)))))}(F,_)}(h,this):(this.realloc(4),this.buf[this.pos++]=127&h|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=h>>>7&127))))},writeSVarint:function(h){this.writeVarint(h<0?2*-h-1:2*h)},writeBoolean:function(h){this.writeVarint(!!h)},writeString:function(h){h=String(h),this.realloc(4*h.length),this.pos++;var v=this.pos;this.pos=function(R,F,z){for(var $,ue,Pe=0;Pe<F.length;Pe++){if(($=F.charCodeAt(Pe))>55295&&$<57344){if(!ue){$>56319||Pe+1===F.length?(R[z++]=239,R[z++]=191,R[z++]=189):ue=$;continue}if($<56320){R[z++]=239,R[z++]=191,R[z++]=189,ue=$;continue}$=ue-55296<<10|$-56320|65536,ue=null}else ue&&(R[z++]=239,R[z++]=191,R[z++]=189,ue=null);$<128?R[z++]=$:($<2048?R[z++]=$>>6|192:($<65536?R[z++]=$>>12|224:(R[z++]=$>>18|240,R[z++]=$>>12&63|128),R[z++]=$>>6&63|128),R[z++]=63&$|128)}return z}(this.buf,h,this.pos);var _=this.pos-v;_>=128&&ii(v,_,this),this.pos=v-1,this.writeVarint(_),this.pos+=_},writeFloat:function(h){this.realloc(4),kn(this.buf,h,this.pos,!0,23,4),this.pos+=4},writeDouble:function(h){this.realloc(8),kn(this.buf,h,this.pos,!0,52,8),this.pos+=8},writeBytes:function(h){var v=h.length;this.writeVarint(v),this.realloc(v);for(var _=0;_<v;_++)this.buf[this.pos++]=h[_]},writeRawMessage:function(h,v){this.pos++;var _=this.pos;h(v,this);var R=this.pos-_;R>=128&&ii(_,R,this),this.pos=_-1,this.writeVarint(R),this.pos+=R},writeMessage:function(h,v,_){this.writeTag(h,en.Bytes),this.writeRawMessage(v,_)},writePackedVarint:function(h,v){v.length&&this.writeMessage(h,ui,v)},writePackedSVarint:function(h,v){v.length&&this.writeMessage(h,Ei,v)},writePackedBoolean:function(h,v){v.length&&this.writeMessage(h,Jr,v)},writePackedFloat:function(h,v){v.length&&this.writeMessage(h,Rn,v)},writePackedDouble:function(h,v){v.length&&this.writeMessage(h,mi,v)},writePackedFixed32:function(h,v){v.length&&this.writeMessage(h,En,v)},writePackedSFixed32:function(h,v){v.length&&this.writeMessage(h,ai,v)},writePackedFixed64:function(h,v){v.length&&this.writeMessage(h,Ti,v)},writePackedSFixed64:function(h,v){v.length&&this.writeMessage(h,Kr,v)},writeBytesField:function(h,v){this.writeTag(h,en.Bytes),this.writeBytes(v)},writeFixed32Field:function(h,v){this.writeTag(h,en.Fixed32),this.writeFixed32(v)},writeSFixed32Field:function(h,v){this.writeTag(h,en.Fixed32),this.writeSFixed32(v)},writeFixed64Field:function(h,v){this.writeTag(h,en.Fixed64),this.writeFixed64(v)},writeSFixed64Field:function(h,v){this.writeTag(h,en.Fixed64),this.writeSFixed64(v)},writeVarintField:function(h,v){this.writeTag(h,en.Varint),this.writeVarint(v)},writeSVarintField:function(h,v){this.writeTag(h,en.Varint),this.writeSVarint(v)},writeStringField:function(h,v){this.writeTag(h,en.Bytes),this.writeString(v)},writeFloatField:function(h,v){this.writeTag(h,en.Fixed32),this.writeFloat(v)},writeDoubleField:function(h,v){this.writeTag(h,en.Fixed64),this.writeDouble(v)},writeBooleanField:function(h,v){this.writeVarintField(h,!!v)}};var xi=function(h,v){var _=v.pixelRatio,R=v.version,F=v.stretchX,z=v.stretchY,$=v.content;this.paddedRect=h,this.pixelRatio=_,this.stretchX=F,this.stretchY=z,this.content=$,this.version=R},ti={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ti.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ti.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ti.tlbr.get=function(){return this.tl.concat(this.br)},ti.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(xi.prototype,ti);var Ln=function(h,v){var _={},R={};this.haveRenderCallbacks=[];var F=[];this.addImages(h,_,F),this.addImages(v,R,F);var z=La(F),$=new Il({width:z.w||1,height:z.h||1});for(var ue in h){var Pe=h[ue],Qe=_[ue].paddedRect;Il.copy(Pe.data,$,{x:0,y:0},{x:Qe.x+1,y:Qe.y+1},Pe.data)}for(var ct in v){var mt=v[ct],Lt=R[ct].paddedRect,Ut=Lt.x+1,ur=Lt.y+1,fr=mt.data.width,Lr=mt.data.height;Il.copy(mt.data,$,{x:0,y:0},{x:Ut,y:ur},mt.data),Il.copy(mt.data,$,{x:0,y:Lr-1},{x:Ut,y:ur-1},{width:fr,height:1}),Il.copy(mt.data,$,{x:0,y:0},{x:Ut,y:ur+Lr},{width:fr,height:1}),Il.copy(mt.data,$,{x:fr-1,y:0},{x:Ut-1,y:ur},{width:1,height:Lr}),Il.copy(mt.data,$,{x:0,y:0},{x:Ut+fr,y:ur},{width:1,height:Lr})}this.image=$,this.iconPositions=_,this.patternPositions=R};Ln.prototype.addImages=function(h,v,_){for(var R in h){var F=h[R],z={x:0,y:0,w:F.data.width+2,h:F.data.height+2};_.push(z),v[R]=new xi(z,F),F.hasRenderCallback&&this.haveRenderCallbacks.push(R)}},Ln.prototype.patchUpdatedImages=function(h,v){for(var _ in h.dispatchRenderCallbacks(this.haveRenderCallbacks),h.updatedImages)this.patchUpdatedImage(this.iconPositions[_],h.getImage(_),v),this.patchUpdatedImage(this.patternPositions[_],h.getImage(_),v)},Ln.prototype.patchUpdatedImage=function(h,v,_){if(h&&v&&h.version!==v.version){h.version=v.version;var R=h.tl;_.update(v.data,void 0,{x:R[0],y:R[1]})}},zi("ImagePosition",xi),zi("ImageAtlas",Ln);var ta={horizontal:1,vertical:2,horizontalOnly:3},io=function(){this.scale=1,this.fontStack="",this.imageName=null};io.forText=function(h,v){var _=new io;return _.scale=h||1,_.fontStack=v,_},io.forImage=function(h){var v=new io;return v.imageName=h,v};var Li=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Qa(h,v,_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut,ur,fr){var Lr,Rr=Li.fromFeature(h,F);mt===ta.vertical&&Rr.verticalizePunctuation();var Yr=ic.processBidirectionalText,nn=ic.processStyledBidirectionalText;if(Yr&&Rr.sections.length===1){Lr=[];for(var gn=0,wn=Yr(Rr.toString(),hs(Rr,Qe,z,v,R,Ut,ur));gn<wn.length;gn+=1){var Dn=wn[gn],pi=new Li;pi.text=Dn,pi.sections=Rr.sections;for(var wi=0;wi<Dn.length;wi++)pi.sectionIndex.push(0);Lr.push(pi)}}else if(nn){Lr=[];for(var qi=0,Di=nn(Rr.text,Rr.sectionIndex,hs(Rr,Qe,z,v,R,Ut,ur));qi<Di.length;qi+=1){var oa=Di[qi],Oi=new Li;Oi.text=oa[0],Oi.sectionIndex=oa[1],Oi.sections=Rr.sections,Lr.push(Oi)}}else Lr=function(ji,go){for(var Ga=[],oo=ji.text,yi=0,Bo=0,es=go;Bo<es.length;Bo+=1){var Xs=es[Bo];Ga.push(ji.substring(yi,Xs)),yi=Xs}return yi<oo.length&&Ga.push(ji.substring(yi,oo.length)),Ga}(Rr,hs(Rr,Qe,z,v,R,Ut,ur));var ao=[],Ki={positionedLines:ao,text:Rr.toString(),top:ct[1],bottom:ct[1],left:ct[0],right:ct[0],writingMode:mt,iconsInText:!1,verticalizable:!1};return function(ji,go,Ga,oo,yi,Bo,es,Xs,ps,ks,su,Ls){for(var gu=0,qu=-17,Qu=0,ul=0,Mu=Xs==="right"?1:Xs==="left"?0:.5,Ju=0,qa=0,ts=yi;qa<ts.length;qa+=1){var To=ts[qa];To.trim();var mo=To.getMaxScale(),ll=24*(mo-1),$o={positionedGlyphs:[],lineOffset:0};ji.positionedLines[Ju]=$o;var Ds=$o.positionedGlyphs,mu=0;if(To.length()){for(var bl=0;bl<To.length();bl++){var Eo=To.getSection(bl),Hf=To.getSectionIndex(bl),Sl=To.getCharCode(bl),Yh=0,yu=null,Da=null,Aa=null,kp=24,Yd=!(ps===ta.horizontal||!su&&!kc(Sl)||su&&(Oa[Sl]||(Dp=Sl,Yn.Arabic(Dp)||Yn["Arabic Supplement"](Dp)||Yn["Arabic Extended-A"](Dp)||Yn["Arabic Presentation Forms-A"](Dp)||Yn["Arabic Presentation Forms-B"](Dp))));if(Eo.imageName){var Kd=oo[Eo.imageName];if(!Kd)continue;Aa=Eo.imageName,ji.iconsInText=ji.iconsInText||!0,Da=Kd.paddedRect;var Lp=Kd.displaySize;Eo.scale=24*Eo.scale/Ls,Yh=ll+(24-Lp[1]*Eo.scale),kp=(yu={width:Lp[0],height:Lp[1],left:1,top:-3,advance:Yd?Lp[1]:Lp[0]}).advance;var qd=Yd?Lp[0]*Eo.scale-24*mo:Lp[1]*Eo.scale-24*mo;qd>0&&qd>mu&&(mu=qd)}else{var ym=Ga[Eo.fontStack],ud=ym&&ym[Sl];if(ud&&ud.rect)Da=ud.rect,yu=ud.metrics;else{var xg=go[Eo.fontStack],_m=xg&&xg[Sl];if(!_m)continue;yu=_m.metrics}Yh=24*(mo-Eo.scale)}Yd?(ji.verticalizable=!0,Ds.push({glyph:Sl,imageName:Aa,x:gu,y:qu+Yh,vertical:Yd,scale:Eo.scale,fontStack:Eo.fontStack,sectionIndex:Hf,metrics:yu,rect:Da}),gu+=kp*Eo.scale+ks):(Ds.push({glyph:Sl,imageName:Aa,x:gu,y:qu+Yh,vertical:Yd,scale:Eo.scale,fontStack:Eo.fontStack,sectionIndex:Hf,metrics:yu,rect:Da}),gu+=yu.advance*Eo.scale+ks)}Ds.length!==0&&(Qu=Math.max(gu-ks,Qu),du(Ds,0,Ds.length-1,Mu,mu)),gu=0;var _u=Bo*mo+mu;$o.lineOffset=Math.max(mu,ll),qu+=_u,ul=Math.max(_u,ul),++Ju}else qu+=Bo,++Ju}var Dp,Ov=qu- -17,bg=Vo(es),ld=bg.horizontalAlign,kv=bg.verticalAlign;(function(Sg,R0,Eg,I0,c_,P0,sc,mh,rs){var Nc,O0=(R0-Eg)*c_;Nc=P0!==sc?-mh*I0- -17:(-I0*rs+.5)*sc;for(var wg=0,yh=Sg;wg<yh.length;wg+=1)for(var Lv=0,xm=yh[wg].positionedGlyphs;Lv<xm.length;Lv+=1){var Dv=xm[Lv];Dv.x+=O0,Dv.y+=Nc}})(ji.positionedLines,Mu,ld,kv,Qu,ul,Bo,Ov,yi.length),ji.top+=-kv*Ov,ji.bottom=ji.top+Ov,ji.left+=-ld*Qu,ji.right=ji.left+Qu}(Ki,v,_,R,Lr,$,ue,Pe,mt,Qe,Lt,fr),!function(ji){for(var go=0,Ga=ji;go<Ga.length;go+=1)if(Ga[go].positionedGlyphs.length!==0)return!1;return!0}(ao)&&Ki}Li.fromFeature=function(h,v){for(var _=new Li,R=0;R<h.sections.length;R++){var F=h.sections[R];F.image?_.addImageSection(F):_.addTextSection(F,v)}return _},Li.prototype.length=function(){return this.text.length},Li.prototype.getSection=function(h){return this.sections[this.sectionIndex[h]]},Li.prototype.getSectionIndex=function(h){return this.sectionIndex[h]},Li.prototype.getCharCode=function(h){return this.text.charCodeAt(h)},Li.prototype.verticalizePunctuation=function(){this.text=function(h){for(var v="",_=0;_<h.length;_++){var R=h.charCodeAt(_+1)||null,F=h.charCodeAt(_-1)||null;v+=R&&_p(R)&&!Sr[h[_+1]]||F&&_p(F)&&!Sr[h[_-1]]||!Sr[h[_]]?h[_]:Sr[h[_]]}return v}(this.text)},Li.prototype.trim=function(){for(var h=0,v=0;v<this.text.length&&Oa[this.text.charCodeAt(v)];v++)h++;for(var _=this.text.length,R=this.text.length-1;R>=0&&R>=h&&Oa[this.text.charCodeAt(R)];R--)_--;this.text=this.text.substring(h,_),this.sectionIndex=this.sectionIndex.slice(h,_)},Li.prototype.substring=function(h,v){var _=new Li;return _.text=this.text.substring(h,v),_.sectionIndex=this.sectionIndex.slice(h,v),_.sections=this.sections,_},Li.prototype.toString=function(){return this.text},Li.prototype.getMaxScale=function(){var h=this;return this.sectionIndex.reduce(function(v,_){return Math.max(v,h.sections[_].scale)},0)},Li.prototype.addTextSection=function(h,v){this.text+=h.text,this.sections.push(io.forText(h.scale,h.fontStack||v));for(var _=this.sections.length-1,R=0;R<h.text.length;++R)this.sectionIndex.push(_)},Li.prototype.addImageSection=function(h){var v=h.image?h.image.name:"";if(v.length!==0){var _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(io.forImage(v)),this.sectionIndex.push(this.sections.length-1)):He("Reached maximum number of images 6401")}else He("Can't add FormattedSection with an empty image.")},Li.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Oa={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_a={};function So(h,v,_,R,F,z){if(v.imageName){var $=R[v.imageName];return $?$.displaySize[0]*v.scale*24/z+F:0}var ue=_[v.fontStack],Pe=ue&&ue[h];return Pe?Pe.metrics.advance*v.scale+F:0}function pu(h,v,_,R){var F=Math.pow(h-v,2);return R?h<v?F/2:2*F:F+Math.abs(_)*_}function Nu(h,v,_){var R=0;return h===10&&(R-=1e4),_&&(R+=150),h!==40&&h!==65288||(R+=50),v!==41&&v!==65289||(R+=50),R}function vo(h,v,_,R,F,z){for(var $=null,ue=pu(v,_,F,z),Pe=0,Qe=R;Pe<Qe.length;Pe+=1){var ct=Qe[Pe],mt=pu(v-ct.x,_,F,z)+ct.badness;mt<=ue&&($=ct,ue=mt)}return{index:h,x:v,priorBreak:$,badness:ue}}function hs(h,v,_,R,F,z,$){if(z!=="point")return[];if(!h)return[];for(var ue,Pe=[],Qe=function(Lr,Rr,Yr,nn,gn,wn){for(var Dn=0,pi=0;pi<Lr.length();pi++){var wi=Lr.getSection(pi);Dn+=So(Lr.getCharCode(pi),wi,nn,gn,Rr,wn)}return Dn/Math.max(1,Math.ceil(Dn/Yr))}(h,v,_,R,F,$),ct=h.text.indexOf("\u200B")>=0,mt=0,Lt=0;Lt<h.length();Lt++){var Ut=h.getSection(Lt),ur=h.getCharCode(Lt);if(Oa[ur]||(mt+=So(ur,Ut,R,F,v,$)),Lt<h.length()-1){var fr=!((ue=ur)<11904||!(Yn["Bopomofo Extended"](ue)||Yn.Bopomofo(ue)||Yn["CJK Compatibility Forms"](ue)||Yn["CJK Compatibility Ideographs"](ue)||Yn["CJK Compatibility"](ue)||Yn["CJK Radicals Supplement"](ue)||Yn["CJK Strokes"](ue)||Yn["CJK Symbols and Punctuation"](ue)||Yn["CJK Unified Ideographs Extension A"](ue)||Yn["CJK Unified Ideographs"](ue)||Yn["Enclosed CJK Letters and Months"](ue)||Yn["Halfwidth and Fullwidth Forms"](ue)||Yn.Hiragana(ue)||Yn["Ideographic Description Characters"](ue)||Yn["Kangxi Radicals"](ue)||Yn["Katakana Phonetic Extensions"](ue)||Yn.Katakana(ue)||Yn["Vertical Forms"](ue)||Yn["Yi Radicals"](ue)||Yn["Yi Syllables"](ue)));(_a[ur]||fr||Ut.imageName)&&Pe.push(vo(Lt+1,mt,Qe,Pe,Nu(ur,h.getCharCode(Lt+1),fr&&ct),!1))}}return function Lr(Rr){return Rr?Lr(Rr.priorBreak).concat(Rr.index):[]}(vo(h.length(),mt,Qe,Pe,0,!0))}function Vo(h){var v=.5,_=.5;switch(h){case"right":case"top-right":case"bottom-right":v=1;break;case"left":case"top-left":case"bottom-left":v=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":_=1;break;case"top":case"top-right":case"top-left":_=0}return{horizontalAlign:v,verticalAlign:_}}function du(h,v,_,R,F){if(R||F)for(var z=h[_],$=(h[_].x+z.metrics.advance*z.scale)*R,ue=v;ue<=_;ue++)h[ue].x-=$,h[ue].y+=F}function Us(h,v,_,R,F,z){var $,ue=h.image;if(ue.content){var Pe=ue.content,Qe=ue.pixelRatio||1;$=[Pe[0]/Qe,Pe[1]/Qe,ue.displaySize[0]-Pe[2]/Qe,ue.displaySize[1]-Pe[3]/Qe]}var ct,mt,Lt,Ut,ur=v.left*z,fr=v.right*z;_==="width"||_==="both"?(Ut=F[0]+ur-R[3],mt=F[0]+fr+R[1]):mt=(Ut=F[0]+(ur+fr-ue.displaySize[0])/2)+ue.displaySize[0];var Lr=v.top*z,Rr=v.bottom*z;return _==="height"||_==="both"?(ct=F[1]+Lr-R[0],Lt=F[1]+Rr+R[2]):Lt=(ct=F[1]+(Lr+Rr-ue.displaySize[1])/2)+ue.displaySize[1],{image:ue,top:ct,right:mt,bottom:Lt,left:Ut,collisionPadding:$}}_a[10]=!0,_a[32]=!0,_a[38]=!0,_a[40]=!0,_a[41]=!0,_a[43]=!0,_a[45]=!0,_a[47]=!0,_a[173]=!0,_a[183]=!0,_a[8203]=!0,_a[8208]=!0,_a[8211]=!0,_a[8231]=!0;var Zs=function(h){function v(_,R,F,z){h.call(this,_,R),this.angle=F,z!==void 0&&(this.segment=z)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.clone=function(){return new v(this.x,this.y,this.angle,this.segment)},v}(Q);function Js(h,v){var _=v.expression;if(_.kind==="constant")return{kind:"constant",layoutSize:_.evaluate(new wa(h+1))};if(_.kind==="source")return{kind:"source"};for(var R=_.zoomStops,F=_.interpolationType,z=0;z<R.length&&R[z]<=h;)z++;for(var $=z=Math.max(0,z-1);$<R.length&&R[$]<h+1;)$++;$=Math.min(R.length-1,$);var ue=R[z],Pe=R[$];return _.kind==="composite"?{kind:"composite",minZoom:ue,maxZoom:Pe,interpolationType:F}:{kind:"camera",minZoom:ue,maxZoom:Pe,minSize:_.evaluate(new wa(ue)),maxSize:_.evaluate(new wa(Pe)),interpolationType:F}}function zu(h,v,_){var R=v.uSize,F=_.lowerSize;return h.kind==="source"?F/128:h.kind==="composite"?Ts(F/128,_.upperSize/128,v.uSizeT):R}function ou(h,v){var _=0,R=0;if(h.kind==="constant")R=h.layoutSize;else if(h.kind!=="source"){var F=h.interpolationType,z=F?J(Ks.interpolationFactor(F,v,h.minZoom,h.maxZoom),0,1):0;h.kind==="camera"?R=Ts(h.minSize,h.maxSize,z):_=z}return{uSizeT:_,uSize:R}}zi("Anchor",Zs);var Ua=Object.freeze({__proto__:null,getSizeData:Js,evaluateSizeForFeature:zu,evaluateSizeForZoom:ou,SIZE_PACK_FACTOR:128});function Uu(h,v,_,R,F){if(v.segment===void 0)return!0;for(var z=v,$=v.segment+1,ue=0;ue>-_/2;){if(--$<0)return!1;ue-=h[$].dist(z),z=h[$]}ue+=h[$].dist(h[$+1]),$++;for(var Pe=[],Qe=0;ue<_/2;){var ct=h[$],mt=h[$+1];if(!mt)return!1;var Lt=h[$-1].angleTo(ct)-ct.angleTo(mt);for(Lt=Math.abs((Lt+3*Math.PI)%(2*Math.PI)-Math.PI),Pe.push({distance:ue,angleDelta:Lt}),Qe+=Lt;ue-Pe[0].distance>R;)Qe-=Pe.shift().angleDelta;if(Qe>F)return!1;$++,ue+=ct.dist(mt)}return!0}function Do(h){for(var v=0,_=0;_<h.length-1;_++)v+=h[_].dist(h[_+1]);return v}function ha(h,v,_){return h?.6*v*_:0}function xa(h,v){return Math.max(h?h.right-h.left:0,v?v.right-v.left:0)}function Ao(h,v,_,R,F,z){for(var $=ha(_,F,z),ue=xa(_,R)*z,Pe=0,Qe=Do(h)/2,ct=0;ct<h.length-1;ct++){var mt=h[ct],Lt=h[ct+1],Ut=mt.dist(Lt);if(Pe+Ut>Qe){var ur=(Qe-Pe)/Ut,fr=Ts(mt.x,Lt.x,ur),Lr=Ts(mt.y,Lt.y,ur),Rr=new Zs(fr,Lr,Lt.angleTo(mt),ct);return Rr._round(),!$||Uu(h,Rr,ue,$,v)?Rr:void 0}Pe+=Ut}}function Es(h,v,_,R,F,z,$,ue,Pe){var Qe=ha(R,z,$),ct=xa(R,F),mt=ct*$,Lt=h[0].x===0||h[0].x===Pe||h[0].y===0||h[0].y===Pe;return v-mt<v/4&&(v=mt+v/4),function Ut(ur,fr,Lr,Rr,Yr,nn,gn,wn,Dn){for(var pi=nn/2,wi=Do(ur),qi=0,Di=fr-Lr,oa=[],Oi=0;Oi<ur.length-1;Oi++){for(var ao=ur[Oi],Ki=ur[Oi+1],ji=ao.dist(Ki),go=Ki.angleTo(ao);Di+Lr<qi+ji;){var Ga=((Di+=Lr)-qi)/ji,oo=Ts(ao.x,Ki.x,Ga),yi=Ts(ao.y,Ki.y,Ga);if(oo>=0&&oo<Dn&&yi>=0&&yi<Dn&&Di-pi>=0&&Di+pi<=wi){var Bo=new Zs(oo,yi,go,Oi);Bo._round(),Rr&&!Uu(ur,Bo,nn,Rr,Yr)||oa.push(Bo)}}qi+=ji}return wn||oa.length||gn||(oa=Ut(ur,qi/2,Lr,Rr,Yr,nn,gn,!0,Dn)),oa}(h,Lt?v/2*ue%v:(ct/2+2*z)*$*ue%v,v,Qe,_,mt,Lt,!1,Pe)}function vu(h,v,_,R,F){for(var z=[],$=0;$<h.length;$++)for(var ue=h[$],Pe=void 0,Qe=0;Qe<ue.length-1;Qe++){var ct=ue[Qe],mt=ue[Qe+1];ct.x<v&&mt.x<v||(ct.x<v?ct=new Q(v,ct.y+(v-ct.x)/(mt.x-ct.x)*(mt.y-ct.y))._round():mt.x<v&&(mt=new Q(v,ct.y+(v-ct.x)/(mt.x-ct.x)*(mt.y-ct.y))._round()),ct.y<_&&mt.y<_||(ct.y<_?ct=new Q(ct.x+(_-ct.y)/(mt.y-ct.y)*(mt.x-ct.x),_)._round():mt.y<_&&(mt=new Q(ct.x+(_-ct.y)/(mt.y-ct.y)*(mt.x-ct.x),_)._round()),ct.x>=R&&mt.x>=R||(ct.x>=R?ct=new Q(R,ct.y+(R-ct.x)/(mt.x-ct.x)*(mt.y-ct.y))._round():mt.x>=R&&(mt=new Q(R,ct.y+(R-ct.x)/(mt.x-ct.x)*(mt.y-ct.y))._round()),ct.y>=F&&mt.y>=F||(ct.y>=F?ct=new Q(ct.x+(F-ct.y)/(mt.y-ct.y)*(mt.x-ct.x),F)._round():mt.y>=F&&(mt=new Q(ct.x+(F-ct.y)/(mt.y-ct.y)*(mt.x-ct.x),F)._round()),Pe&&ct.equals(Pe[Pe.length-1])||z.push(Pe=[ct]),Pe.push(mt)))))}return z}function pr(h,v,_,R){var F=[],z=h.image,$=z.pixelRatio,ue=z.paddedRect.w-2,Pe=z.paddedRect.h-2,Qe=h.right-h.left,ct=h.bottom-h.top,mt=z.stretchX||[[0,ue]],Lt=z.stretchY||[[0,Pe]],Ut=function(oo,yi){return oo+yi[1]-yi[0]},ur=mt.reduce(Ut,0),fr=Lt.reduce(Ut,0),Lr=ue-ur,Rr=Pe-fr,Yr=0,nn=ur,gn=0,wn=fr,Dn=0,pi=Lr,wi=0,qi=Rr;if(z.content&&R){var Di=z.content;Yr=yn(mt,0,Di[0]),gn=yn(Lt,0,Di[1]),nn=yn(mt,Di[0],Di[2]),wn=yn(Lt,Di[1],Di[3]),Dn=Di[0]-Yr,wi=Di[1]-gn,pi=Di[2]-Di[0]-nn,qi=Di[3]-Di[1]-wn}var oa=function(oo,yi,Bo,es){var Xs=Pi(oo.stretch-Yr,nn,Qe,h.left),ps=Ya(oo.fixed-Dn,pi,oo.stretch,ur),ks=Pi(yi.stretch-gn,wn,ct,h.top),su=Ya(yi.fixed-wi,qi,yi.stretch,fr),Ls=Pi(Bo.stretch-Yr,nn,Qe,h.left),gu=Ya(Bo.fixed-Dn,pi,Bo.stretch,ur),qu=Pi(es.stretch-gn,wn,ct,h.top),Qu=Ya(es.fixed-wi,qi,es.stretch,fr),ul=new Q(Xs,ks),Mu=new Q(Ls,ks),Ju=new Q(Ls,qu),qa=new Q(Xs,qu),ts=new Q(ps/$,su/$),To=new Q(gu/$,Qu/$),mo=v*Math.PI/180;if(mo){var ll=Math.sin(mo),$o=Math.cos(mo),Ds=[$o,-ll,ll,$o];ul._matMult(Ds),Mu._matMult(Ds),qa._matMult(Ds),Ju._matMult(Ds)}var mu=oo.stretch+oo.fixed,bl=yi.stretch+yi.fixed;return{tl:ul,tr:Mu,bl:qa,br:Ju,tex:{x:z.paddedRect.x+1+mu,y:z.paddedRect.y+1+bl,w:Bo.stretch+Bo.fixed-mu,h:es.stretch+es.fixed-bl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ts,pixelOffsetBR:To,minFontScaleX:pi/$/Qe,minFontScaleY:qi/$/ct,isSDF:_}};if(R&&(z.stretchX||z.stretchY))for(var Oi=fn(mt,Lr,ur),ao=fn(Lt,Rr,fr),Ki=0;Ki<Oi.length-1;Ki++)for(var ji=Oi[Ki],go=Oi[Ki+1],Ga=0;Ga<ao.length-1;Ga++)F.push(oa(ji,ao[Ga],go,ao[Ga+1]));else F.push(oa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ue+1},{fixed:0,stretch:Pe+1}));return F}function yn(h,v,_){for(var R=0,F=0,z=h;F<z.length;F+=1){var $=z[F];R+=Math.max(v,Math.min(_,$[1]))-Math.max(v,Math.min(_,$[0]))}return R}function fn(h,v,_){for(var R=[{fixed:-1,stretch:0}],F=0,z=h;F<z.length;F+=1){var $=z[F],ue=$[0],Pe=$[1],Qe=R[R.length-1];R.push({fixed:ue-Qe.stretch,stretch:Qe.stretch}),R.push({fixed:ue-Qe.stretch,stretch:Qe.stretch+(Pe-ue)})}return R.push({fixed:v+1,stretch:_}),R}function Pi(h,v,_,R){return h/v*_+R}function Ya(h,v,_,R){return h-v*_/R}var Go=function(h,v,_,R,F,z,$,ue,Pe,Qe){if(this.boxStartIndex=h.length,Pe){var ct=z.top,mt=z.bottom,Lt=z.collisionPadding;Lt&&(ct-=Lt[1],mt+=Lt[3]);var Ut=mt-ct;Ut>0&&(Ut=Math.max(10,Ut),this.circleDiameter=Ut)}else{var ur=z.top*$-ue,fr=z.bottom*$+ue,Lr=z.left*$-ue,Rr=z.right*$+ue,Yr=z.collisionPadding;if(Yr&&(Lr-=Yr[0]*$,ur-=Yr[1]*$,Rr+=Yr[2]*$,fr+=Yr[3]*$),Qe){var nn=new Q(Lr,ur),gn=new Q(Rr,ur),wn=new Q(Lr,fr),Dn=new Q(Rr,fr),pi=Qe*Math.PI/180;nn._rotate(pi),gn._rotate(pi),wn._rotate(pi),Dn._rotate(pi),Lr=Math.min(nn.x,gn.x,wn.x,Dn.x),Rr=Math.max(nn.x,gn.x,wn.x,Dn.x),ur=Math.min(nn.y,gn.y,wn.y,Dn.y),fr=Math.max(nn.y,gn.y,wn.y,Dn.y)}h.emplaceBack(v.x,v.y,Lr,ur,Rr,fr,_,R,F)}this.boxEndIndex=h.length},zt=function(h,v){if(h===void 0&&(h=[]),v===void 0&&(v=It),this.data=h,this.length=this.data.length,this.compare=v,this.length>0)for(var _=(this.length>>1)-1;_>=0;_--)this._down(_)};function It(h,v){return h<v?-1:h>v?1:0}function xr(h,v,_){v===void 0&&(v=1),_===void 0&&(_=!1);for(var R=1/0,F=1/0,z=-1/0,$=-1/0,ue=h[0],Pe=0;Pe<ue.length;Pe++){var Qe=ue[Pe];(!Pe||Qe.x<R)&&(R=Qe.x),(!Pe||Qe.y<F)&&(F=Qe.y),(!Pe||Qe.x>z)&&(z=Qe.x),(!Pe||Qe.y>$)&&($=Qe.y)}var ct=Math.min(z-R,$-F),mt=ct/2,Lt=new zt([],Xt);if(ct===0)return new Q(R,F);for(var Ut=R;Ut<z;Ut+=ct)for(var ur=F;ur<$;ur+=ct)Lt.push(new on(Ut+mt,ur+mt,mt,h));for(var fr=function(Yr){for(var nn=0,gn=0,wn=0,Dn=Yr[0],pi=0,wi=Dn.length,qi=wi-1;pi<wi;qi=pi++){var Di=Dn[pi],oa=Dn[qi],Oi=Di.x*oa.y-oa.x*Di.y;gn+=(Di.x+oa.x)*Oi,wn+=(Di.y+oa.y)*Oi,nn+=3*Oi}return new on(gn/nn,wn/nn,0,Yr)}(h),Lr=Lt.length;Lt.length;){var Rr=Lt.pop();(Rr.d>fr.d||!fr.d)&&(fr=Rr,_&&console.log("found best %d after %d probes",Math.round(1e4*Rr.d)/1e4,Lr)),Rr.max-fr.d<=v||(Lt.push(new on(Rr.p.x-(mt=Rr.h/2),Rr.p.y-mt,mt,h)),Lt.push(new on(Rr.p.x+mt,Rr.p.y-mt,mt,h)),Lt.push(new on(Rr.p.x-mt,Rr.p.y+mt,mt,h)),Lt.push(new on(Rr.p.x+mt,Rr.p.y+mt,mt,h)),Lr+=4)}return _&&(console.log("num probes: "+Lr),console.log("best distance: "+fr.d)),fr.p}function Xt(h,v){return v.max-h.max}function on(h,v,_,R){this.p=new Q(h,v),this.h=_,this.d=function(F,z){for(var $=!1,ue=1/0,Pe=0;Pe<z.length;Pe++)for(var Qe=z[Pe],ct=0,mt=Qe.length,Lt=mt-1;ct<mt;Lt=ct++){var Ut=Qe[ct],ur=Qe[Lt];Ut.y>F.y!=ur.y>F.y&&F.x<(ur.x-Ut.x)*(F.y-Ut.y)/(ur.y-Ut.y)+Ut.x&&($=!$),ue=Math.min(ue,Uf(F,Ut,ur))}return($?1:-1)*Math.sqrt(ue)}(this.p,R),this.max=this.d+this.h*Math.SQRT2}zt.prototype.push=function(h){this.data.push(h),this.length++,this._up(this.length-1)},zt.prototype.pop=function(){if(this.length!==0){var h=this.data[0],v=this.data.pop();return this.length--,this.length>0&&(this.data[0]=v,this._down(0)),h}},zt.prototype.peek=function(){return this.data[0]},zt.prototype._up=function(h){for(var v=this.data,_=this.compare,R=v[h];h>0;){var F=h-1>>1,z=v[F];if(_(R,z)>=0)break;v[h]=z,h=F}v[h]=R},zt.prototype._down=function(h){for(var v=this.data,_=this.compare,R=this.length>>1,F=v[h];h<R;){var z=1+(h<<1),$=v[z],ue=z+1;if(ue<this.length&&_(v[ue],$)<0&&(z=ue,$=v[ue]),_($,F)>=0)break;v[h]=$,h=z}v[h]=F};var kr=Number.POSITIVE_INFINITY;function Nr(h,v){return v[1]!==kr?function(_,R,F){var z=0,$=0;switch(R=Math.abs(R),F=Math.abs(F),_){case"top-right":case"top-left":case"top":$=F-7;break;case"bottom-right":case"bottom-left":case"bottom":$=7-F}switch(_){case"top-right":case"bottom-right":case"right":z=-R;break;case"top-left":case"bottom-left":case"left":z=R}return[z,$]}(h,v[0],v[1]):function(_,R){var F=0,z=0;R<0&&(R=0);var $=R/Math.sqrt(2);switch(_){case"top-right":case"top-left":z=$-7;break;case"bottom-right":case"bottom-left":z=7-$;break;case"bottom":z=7-R;break;case"top":z=R-7}switch(_){case"top-right":case"bottom-right":F=-$;break;case"top-left":case"bottom-left":F=$;break;case"left":F=R;break;case"right":F=-R}return[F,z]}(h,v[0])}function Wr(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function dr(h,v,_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut,ur){var fr=function(gn,wn,Dn,pi,wi,qi,Di,oa){for(var Oi=pi.layout.get("text-rotate").evaluate(qi,{})*Math.PI/180,ao=[],Ki=0,ji=wn.positionedLines;Ki<ji.length;Ki+=1)for(var go=ji[Ki],Ga=0,oo=go.positionedGlyphs;Ga<oo.length;Ga+=1){var yi=oo[Ga];if(yi.rect){var Bo=yi.rect||{},es=4,Xs=!0,ps=1,ks=0,su=(wi||oa)&&yi.vertical,Ls=yi.metrics.advance*yi.scale/2;if(oa&&wn.verticalizable&&(ks=go.lineOffset/2-(yi.imageName?-(24-yi.metrics.width*yi.scale)/2:24*(yi.scale-1))),yi.imageName){var gu=Di[yi.imageName];Xs=gu.sdf,es=1/(ps=gu.pixelRatio)}var qu=wi?[yi.x+Ls,yi.y]:[0,0],Qu=wi?[0,0]:[yi.x+Ls+Dn[0],yi.y+Dn[1]-ks],ul=[0,0];su&&(ul=Qu,Qu=[0,0]);var Mu=(yi.metrics.left-es)*yi.scale-Ls+Qu[0],Ju=(-yi.metrics.top-es)*yi.scale+Qu[1],qa=Mu+Bo.w*yi.scale/ps,ts=Ju+Bo.h*yi.scale/ps,To=new Q(Mu,Ju),mo=new Q(qa,Ju),ll=new Q(Mu,ts),$o=new Q(qa,ts);if(su){var Ds=new Q(-Ls,Ls- -17),mu=-Math.PI/2,bl=12-Ls,Eo=new Q(22-bl,-(yi.imageName?bl:0)),Hf=new(Function.prototype.bind.apply(Q,[null].concat(ul)));To._rotateAround(mu,Ds)._add(Eo)._add(Hf),mo._rotateAround(mu,Ds)._add(Eo)._add(Hf),ll._rotateAround(mu,Ds)._add(Eo)._add(Hf),$o._rotateAround(mu,Ds)._add(Eo)._add(Hf)}if(Oi){var Sl=Math.sin(Oi),Yh=Math.cos(Oi),yu=[Yh,-Sl,Sl,Yh];To._matMult(yu),mo._matMult(yu),ll._matMult(yu),$o._matMult(yu)}var Da=new Q(0,0),Aa=new Q(0,0);ao.push({tl:To,tr:mo,bl:ll,br:$o,tex:Bo,writingMode:wn.writingMode,glyphOffset:qu,sectionIndex:yi.sectionIndex,isSDF:Xs,pixelOffsetTL:Da,pixelOffsetBR:Aa,minFontScaleX:0,minFontScaleY:0})}}return ao}(0,_,ue,F,z,$,R,h.allowVerticalPlacement),Lr=h.textSizeData,Rr=null;Lr.kind==="source"?(Rr=[128*F.layout.get("text-size").evaluate($,{})])[0]>32640&&He(h.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Lr.kind==="composite"&&((Rr=[128*Ut.compositeTextSizes[0].evaluate($,{},ur),128*Ut.compositeTextSizes[1].evaluate($,{},ur)])[0]>32640||Rr[1]>32640)&&He(h.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),h.addSymbols(h.text,fr,Rr,ue,z,$,Qe,v,Pe.lineStartIndex,Pe.lineLength,Lt,ur);for(var Yr=0,nn=ct;Yr<nn.length;Yr+=1)mt[nn[Yr]]=h.text.placedSymbolArray.length-1;return 4*fr.length}function Dr(h){for(var v in h)return h[v];return null}function tr(h,v,_,R){var F=h.compareText;if(v in F){for(var z=F[v],$=z.length-1;$>=0;$--)if(R.dist(z[$])<_)return!0}else F[v]=[];return F[v].push(R),!1}var Zr=Gh.VectorTileFeature.types,xn=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function bn(h,v,_,R,F,z,$,ue,Pe,Qe,ct,mt,Lt){var Ut=ue?Math.min(32640,Math.round(ue[0])):0,ur=ue?Math.min(32640,Math.round(ue[1])):0;h.emplaceBack(v,_,Math.round(32*R),Math.round(32*F),z,$,(Ut<<1)+(Pe?1:0),ur,16*Qe,16*ct,256*mt,256*Lt)}function Gn(h,v,_){h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_),h.emplaceBack(v.x,v.y,_)}function zn(h){for(var v=0,_=h.sections;v<_.length;v+=1)if(Bh(_[v].text))return!0;return!1}var $n=function(h){this.layoutVertexArray=new ed,this.indexArray=new Ne,this.programConfigurations=h,this.segments=new Wt,this.dynamicLayoutVertexArray=new Zh,this.opacityVertexArray=new hh,this.placedSymbolArray=new I};$n.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},$n.prototype.upload=function(h,v,_,R){this.isEmpty()||(_&&(this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,$d.members),this.indexBuffer=h.createIndexBuffer(this.indexArray,v),this.dynamicLayoutVertexBuffer=h.createVertexBuffer(this.dynamicLayoutVertexArray,E0.members,!0),this.opacityVertexBuffer=h.createVertexBuffer(this.opacityVertexArray,xn,!0),this.opacityVertexBuffer.itemSize=1),(_||R)&&this.programConfigurations.upload(h))},$n.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},zi("SymbolBuffers",$n);var Yi=function(h,v,_){this.layoutVertexArray=new h,this.layoutAttributes=v,this.indexArray=new _,this.segments=new Wt,this.collisionVertexArray=new Ar};Yi.prototype.upload=function(h){this.layoutVertexBuffer=h.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=h.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=h.createVertexBuffer(this.collisionVertexArray,Pp.members,!0)},Yi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},zi("CollisionBuffers",Yi);var Fn=function(h){this.collisionBoxArray=h.collisionBoxArray,this.zoom=h.zoom,this.overscaling=h.overscaling,this.layers=h.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=h.index,this.pixelRatio=h.pixelRatio,this.sourceLayerIndex=h.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ku([]),this.placementViewportMatrix=Ku([]);var v=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Js(this.zoom,v["text-size"]),this.iconSizeData=Js(this.zoom,v["icon-size"]);var _=this.layers[0].layout,R=_.get("symbol-sort-key"),F=_.get("symbol-z-order");this.canOverlap=_.get("text-allow-overlap")||_.get("icon-allow-overlap")||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=F!=="viewport-y"&&R.constantOr(1)!==void 0,this.sortFeaturesByY=(F==="viewport-y"||F==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(function(z){return ta[z]})),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id}),this.sourceID=h.sourceID};Fn.prototype.createArrays=function(){this.text=new $n(new da(this.layers,this.zoom,function(h){return/^text/.test(h)})),this.icon=new $n(new da(this.layers,this.zoom,function(h){return/^icon/.test(h)})),this.glyphOffsetArray=new ae,this.lineVertexArray=new Me,this.symbolInstances=new ee},Fn.prototype.calculateGlyphDependencies=function(h,v,_,R,F){for(var z=0;z<h.length;z++)if(v[h.charCodeAt(z)]=!0,(_||R)&&F){var $=Sr[h.charAt(z)];$&&(v[$.charCodeAt(0)]=!0)}},Fn.prototype.populate=function(h,v,_){var R=this.layers[0],F=R.layout,z=F.get("text-font"),$=F.get("text-field"),ue=F.get("icon-image"),Pe=($.value.kind!=="constant"||$.value.value instanceof ho&&!$.value.value.isEmpty()||$.value.value.toString().length>0)&&(z.value.kind!=="constant"||z.value.value.length>0),Qe=ue.value.kind!=="constant"||!!ue.value.value||Object.keys(ue.parameters).length>0,ct=F.get("symbol-sort-key");if(this.features=[],Pe||Qe){for(var mt=v.iconDependencies,Lt=v.glyphDependencies,Ut=v.availableImages,ur=new wa(this.zoom),fr=0,Lr=h;fr<Lr.length;fr+=1){var Rr=Lr[fr],Yr=Rr.feature,nn=Rr.id,gn=Rr.index,wn=Rr.sourceLayerIndex,Dn=R._featureFilter.needGeometry,pi=bs(Yr,Dn);if(R._featureFilter.filter(ur,pi,_)){Dn||(pi.geometry=Jo(Yr));var wi=void 0;if(Pe){var qi=R.getValueAndResolveTokens("text-field",pi,_,Ut),Di=ho.factory(qi);zn(Di)&&(this.hasRTLText=!0),(!this.hasRTLText||xv()==="unavailable"||this.hasRTLText&&ic.isParsed())&&(wi=Qt(Di,R,pi))}var oa=void 0;if(Qe){var Oi=R.getValueAndResolveTokens("icon-image",pi,_,Ut);oa=Oi instanceof Po?Oi:Po.fromString(Oi)}if(wi||oa){var ao=this.sortFeaturesByKey?ct.evaluate(pi,{},_):void 0;if(this.features.push({id:nn,text:wi,icon:oa,index:gn,sourceLayerIndex:wn,geometry:pi.geometry,properties:Yr.properties,type:Zr[Yr.type],sortKey:ao}),oa&&(mt[oa.name]=!0),wi){var Ki=z.evaluate(pi,{},_).join(","),ji=F.get("text-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ta.vertical)>=0;for(var go=0,Ga=wi.sections;go<Ga.length;go+=1){var oo=Ga[go];if(oo.image)mt[oo.image.name]=!0;else{var yi=Qc(wi.toString()),Bo=oo.fontStack||Ki,es=Lt[Bo]=Lt[Bo]||{};this.calculateGlyphDependencies(oo.text,es,ji,this.allowVerticalPlacement,yi)}}}}}}F.get("symbol-placement")==="line"&&(this.features=function(Xs){var ps={},ks={},su=[],Ls=0;function gu(Ds){su.push(Xs[Ds]),Ls++}function qu(Ds,mu,bl){var Eo=ks[Ds];return delete ks[Ds],ks[mu]=Eo,su[Eo].geometry[0].pop(),su[Eo].geometry[0]=su[Eo].geometry[0].concat(bl[0]),Eo}function Qu(Ds,mu,bl){var Eo=ps[mu];return delete ps[mu],ps[Ds]=Eo,su[Eo].geometry[0].shift(),su[Eo].geometry[0]=bl[0].concat(su[Eo].geometry[0]),Eo}function ul(Ds,mu,bl){var Eo=bl?mu[0][mu[0].length-1]:mu[0][0];return Ds+":"+Eo.x+":"+Eo.y}for(var Mu=0;Mu<Xs.length;Mu++){var Ju=Xs[Mu],qa=Ju.geometry,ts=Ju.text?Ju.text.toString():null;if(ts){var To=ul(ts,qa),mo=ul(ts,qa,!0);if(To in ks&&mo in ps&&ks[To]!==ps[mo]){var ll=Qu(To,mo,qa),$o=qu(To,mo,su[ll].geometry);delete ps[To],delete ks[mo],ks[ul(ts,su[$o].geometry,!0)]=$o,su[ll].geometry=null}else To in ks?qu(To,mo,qa):mo in ps?Qu(To,mo,qa):(gu(Mu),ps[To]=Ls-1,ks[mo]=Ls-1)}else gu(Mu)}return su.filter(function(Ds){return Ds.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Xs,ps){return Xs.sortKey-ps.sortKey})}},Fn.prototype.update=function(h,v,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(h,v,this.layers,_),this.icon.programConfigurations.updatePaintArrays(h,v,this.layers,_))},Fn.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Fn.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Fn.prototype.upload=function(h){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(h),this.iconCollisionBox.upload(h)),this.text.upload(h,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(h,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Fn.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Fn.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Fn.prototype.addToLineVertexArray=function(h,v){var _=this.lineVertexArray.length;if(h.segment!==void 0){for(var R=h.dist(v[h.segment+1]),F=h.dist(v[h.segment]),z={},$=h.segment+1;$<v.length;$++)z[$]={x:v[$].x,y:v[$].y,tileUnitDistanceFromAnchor:R},$<v.length-1&&(R+=v[$+1].dist(v[$]));for(var ue=h.segment||0;ue>=0;ue--)z[ue]={x:v[ue].x,y:v[ue].y,tileUnitDistanceFromAnchor:F},ue>0&&(F+=v[ue-1].dist(v[ue]));for(var Pe=0;Pe<v.length;Pe++){var Qe=z[Pe];this.lineVertexArray.emplaceBack(Qe.x,Qe.y,Qe.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}},Fn.prototype.addSymbols=function(h,v,_,R,F,z,$,ue,Pe,Qe,ct,mt){for(var Lt=h.indexArray,Ut=h.layoutVertexArray,ur=h.segments.prepareSegment(4*v.length,Ut,Lt,this.canOverlap?z.sortKey:void 0),fr=this.glyphOffsetArray.length,Lr=ur.vertexLength,Rr=this.allowVerticalPlacement&&$===ta.vertical?Math.PI/2:0,Yr=z.text&&z.text.sections,nn=0;nn<v.length;nn++){var gn=v[nn],wn=gn.tl,Dn=gn.tr,pi=gn.bl,wi=gn.br,qi=gn.tex,Di=gn.pixelOffsetTL,oa=gn.pixelOffsetBR,Oi=gn.minFontScaleX,ao=gn.minFontScaleY,Ki=gn.glyphOffset,ji=gn.isSDF,go=gn.sectionIndex,Ga=ur.vertexLength,oo=Ki[1];bn(Ut,ue.x,ue.y,wn.x,oo+wn.y,qi.x,qi.y,_,ji,Di.x,Di.y,Oi,ao),bn(Ut,ue.x,ue.y,Dn.x,oo+Dn.y,qi.x+qi.w,qi.y,_,ji,oa.x,Di.y,Oi,ao),bn(Ut,ue.x,ue.y,pi.x,oo+pi.y,qi.x,qi.y+qi.h,_,ji,Di.x,oa.y,Oi,ao),bn(Ut,ue.x,ue.y,wi.x,oo+wi.y,qi.x+qi.w,qi.y+qi.h,_,ji,oa.x,oa.y,Oi,ao),Gn(h.dynamicLayoutVertexArray,ue,Rr),Lt.emplaceBack(Ga,Ga+1,Ga+2),Lt.emplaceBack(Ga+1,Ga+2,Ga+3),ur.vertexLength+=4,ur.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ki[0]),nn!==v.length-1&&go===v[nn+1].sectionIndex||h.programConfigurations.populatePaintArrays(Ut.length,z,z.index,{},mt,Yr&&Yr[go])}h.placedSymbolArray.emplaceBack(ue.x,ue.y,fr,this.glyphOffsetArray.length-fr,Lr,Pe,Qe,ue.segment,_?_[0]:0,_?_[1]:0,R[0],R[1],$,0,!1,0,ct)},Fn.prototype._addCollisionDebugVertex=function(h,v,_,R,F,z){return v.emplaceBack(0,0),h.emplaceBack(_.x,_.y,R,F,Math.round(z.x),Math.round(z.y))},Fn.prototype.addCollisionDebugVertices=function(h,v,_,R,F,z,$){var ue=F.segments.prepareSegment(4,F.layoutVertexArray,F.indexArray),Pe=ue.vertexLength,Qe=F.layoutVertexArray,ct=F.collisionVertexArray,mt=$.anchorX,Lt=$.anchorY;this._addCollisionDebugVertex(Qe,ct,z,mt,Lt,new Q(h,v)),this._addCollisionDebugVertex(Qe,ct,z,mt,Lt,new Q(_,v)),this._addCollisionDebugVertex(Qe,ct,z,mt,Lt,new Q(_,R)),this._addCollisionDebugVertex(Qe,ct,z,mt,Lt,new Q(h,R)),ue.vertexLength+=4;var Ut=F.indexArray;Ut.emplaceBack(Pe,Pe+1),Ut.emplaceBack(Pe+1,Pe+2),Ut.emplaceBack(Pe+2,Pe+3),Ut.emplaceBack(Pe+3,Pe),ue.primitiveLength+=4},Fn.prototype.addDebugCollisionBoxes=function(h,v,_,R){for(var F=h;F<v;F++){var z=this.collisionBoxArray.get(F);this.addCollisionDebugVertices(z.x1,z.y1,z.x2,z.y2,R?this.textCollisionBox:this.iconCollisionBox,z.anchorPoint,_)}},Fn.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Yi(Vh,w0.members,Nf),this.iconCollisionBox=new Yi(Vh,w0.members,Nf);for(var h=0;h<this.symbolInstances.length;h++){var v=this.symbolInstances.get(h);this.addDebugCollisionBoxes(v.textBoxStartIndex,v.textBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v,!0),this.addDebugCollisionBoxes(v.iconBoxStartIndex,v.iconBoxEndIndex,v,!1),this.addDebugCollisionBoxes(v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v,!1)}},Fn.prototype._deserializeCollisionBoxesForSymbol=function(h,v,_,R,F,z,$,ue,Pe){for(var Qe={},ct=v;ct<_;ct++){var mt=h.get(ct);Qe.textBox={x1:mt.x1,y1:mt.y1,x2:mt.x2,y2:mt.y2,anchorPointX:mt.anchorPointX,anchorPointY:mt.anchorPointY},Qe.textFeatureIndex=mt.featureIndex;break}for(var Lt=R;Lt<F;Lt++){var Ut=h.get(Lt);Qe.verticalTextBox={x1:Ut.x1,y1:Ut.y1,x2:Ut.x2,y2:Ut.y2,anchorPointX:Ut.anchorPointX,anchorPointY:Ut.anchorPointY},Qe.verticalTextFeatureIndex=Ut.featureIndex;break}for(var ur=z;ur<$;ur++){var fr=h.get(ur);Qe.iconBox={x1:fr.x1,y1:fr.y1,x2:fr.x2,y2:fr.y2,anchorPointX:fr.anchorPointX,anchorPointY:fr.anchorPointY},Qe.iconFeatureIndex=fr.featureIndex;break}for(var Lr=ue;Lr<Pe;Lr++){var Rr=h.get(Lr);Qe.verticalIconBox={x1:Rr.x1,y1:Rr.y1,x2:Rr.x2,y2:Rr.y2,anchorPointX:Rr.anchorPointX,anchorPointY:Rr.anchorPointY},Qe.verticalIconFeatureIndex=Rr.featureIndex;break}return Qe},Fn.prototype.deserializeCollisionBoxes=function(h){this.collisionArrays=[];for(var v=0;v<this.symbolInstances.length;v++){var _=this.symbolInstances.get(v);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(h,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}},Fn.prototype.hasTextData=function(){return this.text.segments.get().length>0},Fn.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Fn.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Fn.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Fn.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Fn.prototype.addIndicesForPlacedSymbol=function(h,v){for(var _=h.placedSymbolArray.get(v),R=_.vertexStartIndex+4*_.numGlyphs,F=_.vertexStartIndex;F<R;F+=4)h.indexArray.emplaceBack(F,F+1,F+2),h.indexArray.emplaceBack(F+1,F+2,F+3)},Fn.prototype.getSortedSymbolIndexes=function(h){if(this.sortedAngle===h&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var v=Math.sin(h),_=Math.cos(h),R=[],F=[],z=[],$=0;$<this.symbolInstances.length;++$){z.push($);var ue=this.symbolInstances.get($);R.push(0|Math.round(v*ue.anchorX+_*ue.anchorY)),F.push(ue.featureIndex)}return z.sort(function(Pe,Qe){return R[Pe]-R[Qe]||F[Qe]-F[Pe]}),z},Fn.prototype.addToSortKeyRanges=function(h,v){var _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===v?_.symbolInstanceEnd=h+1:this.sortKeyRanges.push({sortKey:v,symbolInstanceStart:h,symbolInstanceEnd:h+1})},Fn.prototype.sortFeatures=function(h){var v=this;if(this.sortFeaturesByY&&this.sortedAngle!==h&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(h),this.sortedAngle=h,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var _=0,R=this.symbolInstanceIndexes;_<R.length;_+=1){var F=this.symbolInstances.get(R[_]);this.featureSortOrder.push(F.featureIndex),[F.rightJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.leftJustifiedTextSymbolIndex].forEach(function(z,$,ue){z>=0&&ue.indexOf(z)===$&&v.addIndicesForPlacedSymbol(v.text,z)}),F.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,F.verticalPlacedTextSymbolIndex),F.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,F.placedIconSymbolIndex),F.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,F.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},zi("SymbolBucket",Fn,{omit:["layers","collisionBoxArray","features","compareText"]}),Fn.MAX_GLYPHS=65535,Fn.addDynamicAttributes=Gn;var Hi=new _s({"symbol-placement":new Ji(At.layout_symbol["symbol-placement"]),"symbol-spacing":new Ji(At.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ji(At.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ai(At.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ji(At.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ji(At.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ji(At.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ji(At.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ji(At.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ai(At.layout_symbol["icon-size"]),"icon-text-fit":new Ji(At.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ji(At.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ai(At.layout_symbol["icon-image"]),"icon-rotate":new Ai(At.layout_symbol["icon-rotate"]),"icon-padding":new Ji(At.layout_symbol["icon-padding"]),"icon-keep-upright":new Ji(At.layout_symbol["icon-keep-upright"]),"icon-offset":new Ai(At.layout_symbol["icon-offset"]),"icon-anchor":new Ai(At.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ji(At.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ji(At.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ji(At.layout_symbol["text-rotation-alignment"]),"text-field":new Ai(At.layout_symbol["text-field"]),"text-font":new Ai(At.layout_symbol["text-font"]),"text-size":new Ai(At.layout_symbol["text-size"]),"text-max-width":new Ai(At.layout_symbol["text-max-width"]),"text-line-height":new Ji(At.layout_symbol["text-line-height"]),"text-letter-spacing":new Ai(At.layout_symbol["text-letter-spacing"]),"text-justify":new Ai(At.layout_symbol["text-justify"]),"text-radial-offset":new Ai(At.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ji(At.layout_symbol["text-variable-anchor"]),"text-anchor":new Ai(At.layout_symbol["text-anchor"]),"text-max-angle":new Ji(At.layout_symbol["text-max-angle"]),"text-writing-mode":new Ji(At.layout_symbol["text-writing-mode"]),"text-rotate":new Ai(At.layout_symbol["text-rotate"]),"text-padding":new Ji(At.layout_symbol["text-padding"]),"text-keep-upright":new Ji(At.layout_symbol["text-keep-upright"]),"text-transform":new Ai(At.layout_symbol["text-transform"]),"text-offset":new Ai(At.layout_symbol["text-offset"]),"text-allow-overlap":new Ji(At.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ji(At.layout_symbol["text-ignore-placement"]),"text-optional":new Ji(At.layout_symbol["text-optional"])}),ma={paint:new _s({"icon-opacity":new Ai(At.paint_symbol["icon-opacity"]),"icon-color":new Ai(At.paint_symbol["icon-color"]),"icon-halo-color":new Ai(At.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ai(At.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ai(At.paint_symbol["icon-halo-blur"]),"icon-translate":new Ji(At.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ji(At.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ai(At.paint_symbol["text-opacity"]),"text-color":new Ai(At.paint_symbol["text-color"],{runtimeType:Jn,getOverride:function(h){return h.textColor},hasOverride:function(h){return!!h.textColor}}),"text-halo-color":new Ai(At.paint_symbol["text-halo-color"]),"text-halo-width":new Ai(At.paint_symbol["text-halo-width"]),"text-halo-blur":new Ai(At.paint_symbol["text-halo-blur"]),"text-translate":new Ji(At.paint_symbol["text-translate"]),"text-translate-anchor":new Ji(At.paint_symbol["text-translate-anchor"])}),layout:Hi},ka=function(h){this.type=h.property.overrides?h.property.overrides.runtimeType:ni,this.defaultValue=h};ka.prototype.evaluate=function(h){if(h.formattedSection){var v=this.defaultValue.property.overrides;if(v&&v.hasOverride(h.formattedSection))return v.getOverride(h.formattedSection)}return h.feature&&h.featureState?this.defaultValue.evaluate(h.feature,h.featureState):this.defaultValue.property.specification.default},ka.prototype.eachChild=function(h){this.defaultValue.isConstant()||h(this.defaultValue.value._styleExpression.expression)},ka.prototype.outputDefined=function(){return!1},ka.prototype.serialize=function(){return null},zi("FormatSectionOverride",ka,{omit:["defaultValue"]});var Fo=function(h){function v(_){h.call(this,_,ma)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.recalculate=function(_,R){if(h.prototype.recalculate.call(this,_,R),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var F=this.layout.get("text-writing-mode");if(F){for(var z=[],$=0,ue=F;$<ue.length;$+=1){var Pe=ue[$];z.indexOf(Pe)<0&&z.push(Pe)}this.layout._values["text-writing-mode"]=z}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},v.prototype.getValueAndResolveTokens=function(_,R,F,z){var $=this.layout.get(_).evaluate(R,{},F,z),ue=this._unevaluatedLayout._values[_];return ue.isDataDriven()||rh(ue.value)||!$?$:function(Pe,Qe){return Qe.replace(/{([^{}]+)}/g,function(ct,mt){return mt in Pe?String(Pe[mt]):""})}(R.properties,$)},v.prototype.createBucket=function(_){return new Fn(_)},v.prototype.queryRadius=function(){return 0},v.prototype.queryIntersectsFeature=function(){return!1},v.prototype._setPaintOverrides=function(){for(var _=0,R=ma.paint.overridableProperties;_<R.length;_+=1){var F=R[_];if(v.hasPaintOverride(this.layout,F)){var z,$=this.paint.get(F),ue=new ka($),Pe=new vf(ue,$.property.specification);z=$.value.kind==="constant"||$.value.kind==="source"?new Pf("source",Pe):new ih("composite",Pe,$.value.zoomStops,$.value._interpolationType),this.paint._values[F]=new ml($.property,z,$.parameters)}}},v.prototype._handleOverridablePaintPropertyUpdate=function(_,R,F){return!(!this.layout||R.isDataDriven()||F.isDataDriven())&&v.hasPaintOverride(this.layout,_)},v.hasPaintOverride=function(_,R){var F=_.get("text-field"),z=ma.paint.properties[R],$=!1,ue=function(ct){for(var mt=0,Lt=ct;mt<Lt.length;mt+=1)if(z.overrides&&z.overrides.hasOverride(Lt[mt]))return void($=!0)};if(F.value.kind==="constant"&&F.value.value instanceof ho)ue(F.value.value.sections);else if(F.value.kind==="source"){var Pe=function(ct){$||(ct instanceof rn&&qt(ct.value)===Ra?ue(ct.value.sections):ct instanceof Mi?ue(ct.sections):ct.eachChild(Pe))},Qe=F.value;Qe._styleExpression&&Pe(Qe._styleExpression.expression)}return $},v}(yc),Na={paint:new _s({"background-color":new Ji(At.paint_background["background-color"]),"background-pattern":new yl(At.paint_background["background-pattern"]),"background-opacity":new Ji(At.paint_background["background-opacity"])})},Yl=function(h){function v(_){h.call(this,_,Na)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(yc),mg={paint:new _s({"raster-opacity":new Ji(At.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ji(At.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ji(At.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ji(At.paint_raster["raster-brightness-max"]),"raster-saturation":new Ji(At.paint_raster["raster-saturation"]),"raster-contrast":new Ji(At.paint_raster["raster-contrast"]),"raster-resampling":new Ji(At.paint_raster["raster-resampling"]),"raster-fade-duration":new Ji(At.paint_raster["raster-fade-duration"])})},af=function(h){function v(_){h.call(this,_,mg)}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v}(yc),dm=function(h){function v(_){h.call(this,_,{}),this.implementation=_}return h&&(v.__proto__=h),(v.prototype=Object.create(h&&h.prototype)).constructor=v,v.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},v.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},v.prototype.recalculate=function(){},v.prototype.updateTransitions=function(){},v.prototype.hasTransition=function(){},v.prototype.serialize=function(){},v.prototype.onAdd=function(_){this.implementation.onAdd&&this.implementation.onAdd(_,_.painter.context.gl)},v.prototype.onRemove=function(_){this.implementation.onRemove&&this.implementation.onRemove(_,_.painter.context.gl)},v}(yc),wf={circle:rd,heatmap:Sc,hillshade:m0,fill:um,"fill-extrusion":lm,line:Gd,symbol:Fo,background:Yl,raster:af},vm=te.HTMLImageElement,Mv=te.HTMLCanvasElement,s_=te.HTMLVideoElement,C0=te.ImageData,od=te.ImageBitmap,sd=function(h,v,_,R){this.context=h,this.format=_,this.texture=h.gl.createTexture(),this.update(v,R)};sd.prototype.update=function(h,v,_){var R=h.width,F=h.height,z=!(this.size&&this.size[0]===R&&this.size[1]===F||_),$=this.context,ue=$.gl;if(this.useMipmap=!!(v&&v.useMipmap),ue.bindTexture(ue.TEXTURE_2D,this.texture),$.pixelStoreUnpackFlipY.set(!1),$.pixelStoreUnpack.set(1),$.pixelStoreUnpackPremultiplyAlpha.set(this.format===ue.RGBA&&(!v||v.premultiply!==!1)),z)this.size=[R,F],h instanceof vm||h instanceof Mv||h instanceof s_||h instanceof C0||od&&h instanceof od?ue.texImage2D(ue.TEXTURE_2D,0,this.format,this.format,ue.UNSIGNED_BYTE,h):ue.texImage2D(ue.TEXTURE_2D,0,this.format,R,F,0,this.format,ue.UNSIGNED_BYTE,h.data);else{var Pe=_||{x:0,y:0},Qe=Pe.x,ct=Pe.y;h instanceof vm||h instanceof Mv||h instanceof s_||h instanceof C0||od&&h instanceof od?ue.texSubImage2D(ue.TEXTURE_2D,0,Qe,ct,ue.RGBA,ue.UNSIGNED_BYTE,h):ue.texSubImage2D(ue.TEXTURE_2D,0,Qe,ct,R,F,ue.RGBA,ue.UNSIGNED_BYTE,h.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ue.generateMipmap(ue.TEXTURE_2D)},sd.prototype.bind=function(h,v,_){var R=this.context.gl;R.bindTexture(R.TEXTURE_2D,this.texture),_!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=R.LINEAR),h!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,h),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,_||h),this.filter=h),v!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,v),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,v),this.wrap=v)},sd.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},sd.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var yg=function(h){var v=this;this._callback=h,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){v._triggered=!1,v._callback()})};yg.prototype.trigger=function(){var h=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){h._triggered=!1,h._callback()},0))},yg.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Rv=function(h,v,_){this.target=h,this.parent=v,this.mapId=_,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ue(["receive","process"],this),this.invoker=new yg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ke()?h:te};function gm(h,v,_){var R=2*Math.PI*6378137/256/Math.pow(2,_);return[h*R-2*Math.PI*6378137/2,v*R-2*Math.PI*6378137/2]}Rv.prototype.send=function(h,v,_,R,F){var z=this;F===void 0&&(F=!1);var $=Math.round(1e18*Math.random()).toString(36).substring(0,10);_&&(this.callbacks[$]=_);var ue=Ge(this.globalScope)?void 0:[];return this.target.postMessage({id:$,type:h,hasCallback:!!_,targetMapId:R,mustQueue:F,sourceMapId:this.mapId,data:gl(v,ue)},ue),{cancel:function(){_&&delete z.callbacks[$],z.target.postMessage({id:$,type:"<cancel>",targetMapId:R,sourceMapId:z.mapId})}}},Rv.prototype.receive=function(h){var v=h.data,_=v.id;if(_&&(!v.targetMapId||this.mapId===v.targetMapId))if(v.type==="<cancel>"){delete this.tasks[_];var R=this.cancelCallbacks[_];delete this.cancelCallbacks[_],R&&R()}else ke()||v.mustQueue?(this.tasks[_]=v,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,v)},Rv.prototype.process=function(){if(this.taskQueue.length){var h=this.taskQueue.shift(),v=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),v&&this.processTask(h,v)}},Rv.prototype.processTask=function(h,v){var _=this;if(v.type==="<response>"){var R=this.callbacks[h];delete this.callbacks[h],R&&(v.error?R(Zo(v.error)):R(null,Zo(v.data)))}else{var F=!1,z=Ge(this.globalScope)?void 0:[],$=v.hasCallback?function(ct,mt){F=!0,delete _.cancelCallbacks[h],_.target.postMessage({id:h,type:"<response>",sourceMapId:_.mapId,error:ct?gl(ct):null,data:gl(mt,z)},z)}:function(ct){F=!0},ue=null,Pe=Zo(v.data);if(this.parent[v.type])ue=this.parent[v.type](v.sourceMapId,Pe,$);else if(this.parent.getWorkerSource){var Qe=v.type.split(".");ue=this.parent.getWorkerSource(v.sourceMapId,Qe[0],Pe.source)[Qe[1]](Pe,$)}else $(new Error("Could not find function "+v.type));!F&&ue&&ue.cancel&&(this.cancelCallbacks[h]=ue.cancel)}},Rv.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Au=function(h,v){h&&(v?this.setSouthWest(h).setNorthEast(v):h.length===4?this.setSouthWest([h[0],h[1]]).setNorthEast([h[2],h[3]]):this.setSouthWest(h[0]).setNorthEast(h[1]))};Au.prototype.setNorthEast=function(h){return this._ne=h instanceof Vs?new Vs(h.lng,h.lat):Vs.convert(h),this},Au.prototype.setSouthWest=function(h){return this._sw=h instanceof Vs?new Vs(h.lng,h.lat):Vs.convert(h),this},Au.prototype.extend=function(h){var v,_,R=this._sw,F=this._ne;if(h instanceof Vs)v=h,_=h;else{if(!(h instanceof Au))return Array.isArray(h)?h.length===4||h.every(Array.isArray)?this.extend(Au.convert(h)):this.extend(Vs.convert(h)):this;if(_=h._ne,!(v=h._sw)||!_)return this}return R||F?(R.lng=Math.min(v.lng,R.lng),R.lat=Math.min(v.lat,R.lat),F.lng=Math.max(_.lng,F.lng),F.lat=Math.max(_.lat,F.lat)):(this._sw=new Vs(v.lng,v.lat),this._ne=new Vs(_.lng,_.lat)),this},Au.prototype.getCenter=function(){return new Vs((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Au.prototype.getSouthWest=function(){return this._sw},Au.prototype.getNorthEast=function(){return this._ne},Au.prototype.getNorthWest=function(){return new Vs(this.getWest(),this.getNorth())},Au.prototype.getSouthEast=function(){return new Vs(this.getEast(),this.getSouth())},Au.prototype.getWest=function(){return this._sw.lng},Au.prototype.getSouth=function(){return this._sw.lat},Au.prototype.getEast=function(){return this._ne.lng},Au.prototype.getNorth=function(){return this._ne.lat},Au.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Au.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Au.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Au.prototype.contains=function(h){var v=Vs.convert(h),_=v.lng,R=v.lat,F=this._sw.lng<=_&&_<=this._ne.lng;return this._sw.lng>this._ne.lng&&(F=this._sw.lng>=_&&_>=this._ne.lng),this._sw.lat<=R&&R<=this._ne.lat&&F},Au.convert=function(h){return!h||h instanceof Au?h:new Au(h)};var Vs=function(h,v){if(isNaN(h)||isNaN(v))throw new Error("Invalid LngLat object: ("+h+", "+v+")");if(this.lng=+h,this.lat=+v,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Vs.prototype.wrap=function(){return new Vs(M(this.lng,-180,180),this.lat)},Vs.prototype.toArray=function(){return[this.lng,this.lat]},Vs.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Vs.prototype.distanceTo=function(h){var v=Math.PI/180,_=this.lat*v,R=h.lat*v,F=Math.sin(_)*Math.sin(R)+Math.cos(_)*Math.cos(R)*Math.cos((h.lng-this.lng)*v);return 63710088e-1*Math.acos(Math.min(F,1))},Vs.prototype.toBounds=function(h){h===void 0&&(h=0);var v=360*h/40075017,_=v/Math.cos(Math.PI/180*this.lat);return new Au(new Vs(this.lng-_,this.lat-v),new Vs(this.lng+_,this.lat+v))},Vs.convert=function(h){if(h instanceof Vs)return h;if(Array.isArray(h)&&(h.length===2||h.length===3))return new Vs(Number(h[0]),Number(h[1]));if(!Array.isArray(h)&&typeof h=="object"&&h!==null)return new Vs(Number("lng"in h?h.lng:h.lon),Number(h.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var u_=2*Math.PI*63710088e-1;function A0(h){return u_*Math.cos(h*Math.PI/180)}function T0(h){return(180+h)/360}function Iv(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function M0(h,v){return h/A0(v)}function Yo(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}var Os=function(h,v,_){_===void 0&&(_=0),this.x=+h,this.y=+v,this.z=+_};Os.fromLngLat=function(h,v){v===void 0&&(v=0);var _=Vs.convert(h);return new Os(T0(_.lng),Iv(_.lat),M0(v,_.lat))},Os.prototype.toLngLat=function(){return new Vs(360*this.x-180,Yo(this.y))},Os.prototype.toAltitude=function(){return this.z*A0(Yo(this.y))},Os.prototype.meterInMercatorCoordinateUnits=function(){return 1/u_*(h=Yo(this.y),1/Math.cos(h*Math.PI/180));var h};var Xh=function(h,v,_){this.z=h,this.x=v,this.y=_,this.key=_g(0,h,h,v,_)};Xh.prototype.equals=function(h){return this.z===h.z&&this.x===h.x&&this.y===h.y},Xh.prototype.url=function(h,v){var _,R,F,z,$,ue=(R=this.y,F=this.z,z=gm(256*(_=this.x),256*(R=Math.pow(2,F)-R-1),F),$=gm(256*(_+1),256*(R+1),F),z[0]+","+z[1]+","+$[0]+","+$[1]),Pe=function(Qe,ct,mt){for(var Lt,Ut="",ur=Qe;ur>0;ur--)Ut+=(ct&(Lt=1<<ur-1)?1:0)+(mt&Lt?2:0);return Ut}(this.z,this.x,this.y);return h[(this.x+this.y)%h.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Pe).replace("{bbox-epsg-3857}",ue)},Xh.prototype.getTilePoint=function(h){var v=Math.pow(2,this.z);return new Q(8192*(h.x*v-this.x),8192*(h.y*v-this.y))},Xh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var mm=function(h,v){this.wrap=h,this.canonical=v,this.key=_g(h,v.z,v.z,v.x,v.y)},Tu=function(h,v,_,R,F){this.overscaledZ=h,this.wrap=v,this.canonical=new Xh(_,+R,+F),this.key=_g(v,h,_,R,F)};function _g(h,v,_,R,F){(h*=2)<0&&(h=-1*h-1);var z=1<<_;return(z*z*h+z*F+R).toString(36)+_.toString(36)+v.toString(36)}Tu.prototype.equals=function(h){return this.overscaledZ===h.overscaledZ&&this.wrap===h.wrap&&this.canonical.equals(h.canonical)},Tu.prototype.scaledTo=function(h){var v=this.canonical.z-h;return h>this.canonical.z?new Tu(h,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Tu(h,this.wrap,h,this.canonical.x>>v,this.canonical.y>>v)},Tu.prototype.calculateScaledKey=function(h,v){var _=this.canonical.z-h;return h>this.canonical.z?_g(this.wrap*+v,h,this.canonical.z,this.canonical.x,this.canonical.y):_g(this.wrap*+v,h,h,this.canonical.x>>_,this.canonical.y>>_)},Tu.prototype.isChildOf=function(h){if(h.wrap!==this.wrap)return!1;var v=this.canonical.z-h.canonical.z;return h.overscaledZ===0||h.overscaledZ<this.overscaledZ&&h.canonical.x===this.canonical.x>>v&&h.canonical.y===this.canonical.y>>v},Tu.prototype.children=function(h){if(this.overscaledZ>=h)return[new Tu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var v=this.canonical.z+1,_=2*this.canonical.x,R=2*this.canonical.y;return[new Tu(v,this.wrap,v,_,R),new Tu(v,this.wrap,v,_+1,R),new Tu(v,this.wrap,v,_,R+1),new Tu(v,this.wrap,v,_+1,R+1)]},Tu.prototype.isLessThan=function(h){return this.wrap<h.wrap||!(this.wrap>h.wrap)&&(this.overscaledZ<h.overscaledZ||!(this.overscaledZ>h.overscaledZ)&&(this.canonical.x<h.canonical.x||!(this.canonical.x>h.canonical.x)&&this.canonical.y<h.canonical.y))},Tu.prototype.wrapped=function(){return new Tu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Tu.prototype.unwrapTo=function(h){return new Tu(this.overscaledZ,h,this.canonical.z,this.canonical.x,this.canonical.y)},Tu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Tu.prototype.toUnwrapped=function(){return new mm(this.wrap,this.canonical)},Tu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Tu.prototype.getTilePoint=function(h){return this.canonical.getTilePoint(new Os(h.x-this.wrap,h.y))},zi("CanonicalTileID",Xh),zi("OverscaledTileID",Tu,{omit:["posMatrix"]});var Vf=function(h,v,_){if(this.uid=h,v.height!==v.width)throw new RangeError("DEM tiles must be square");if(_&&_!=="mapbox"&&_!=="terrarium")return He('"'+_+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=v.height;var R=this.dim=v.height-2;this.data=new Uint32Array(v.data.buffer),this.encoding=_||"mapbox";for(var F=0;F<R;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(R,F)]=this.data[this._idx(R-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,R)]=this.data[this._idx(F,R-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(R,-1)]=this.data[this._idx(R-1,0)],this.data[this._idx(-1,R)]=this.data[this._idx(0,R-1)],this.data[this._idx(R,R)]=this.data[this._idx(R-1,R-1)]};Vf.prototype.get=function(h,v){var _=new Uint8Array(this.data.buffer),R=4*this._idx(h,v);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(_[R],_[R+1],_[R+2])},Vf.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Vf.prototype._idx=function(h,v){if(h<-1||h>=this.dim+1||v<-1||v>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(v+1)*this.stride+(h+1)},Vf.prototype._unpackMapbox=function(h,v,_){return(256*h*256+256*v+_)/10-1e4},Vf.prototype._unpackTerrarium=function(h,v,_){return 256*h+v+_/256-32768},Vf.prototype.getPixels=function(){return new Il({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Vf.prototype.backfillBorder=function(h,v,_){if(this.dim!==h.dim)throw new Error("dem dimension mismatch");var R=v*this.dim,F=v*this.dim+this.dim,z=_*this.dim,$=_*this.dim+this.dim;switch(v){case-1:R=F-1;break;case 1:F=R+1}switch(_){case-1:z=$-1;break;case 1:$=z+1}for(var ue=-v*this.dim,Pe=-_*this.dim,Qe=z;Qe<$;Qe++)for(var ct=R;ct<F;ct++)this.data[this._idx(ct,Qe)]=h.data[this._idx(ct+ue,Qe+Pe)]},zi("DEMData",Vf);var Xd=function(h){this._stringToNumber={},this._numberToString=[];for(var v=0;v<h.length;v++){var _=h[v];this._stringToNumber[_]=v,this._numberToString[v]=_}};Xd.prototype.encode=function(h){return this._stringToNumber[h]},Xd.prototype.decode=function(h){return this._numberToString[h]};var of=function(h,v,_,R,F){this.type="Feature",this._vectorTileFeature=h,h._z=v,h._x=_,h._y=R,this.properties=h.properties,this.id=F},l_={geometry:{configurable:!0}};l_.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},l_.geometry.set=function(h){this._geometry=h},of.prototype.toJSON=function(){var h={geometry:this.geometry};for(var v in this)v!=="_geometry"&&v!=="_vectorTileFeature"&&(h[v]=this[v]);return h},Object.defineProperties(of.prototype,l_);var Pv=function(){this.state={},this.stateChanges={},this.deletedStates={}};Pv.prototype.updateState=function(h,v,_){var R=String(v);if(this.stateChanges[h]=this.stateChanges[h]||{},this.stateChanges[h][R]=this.stateChanges[h][R]||{},E(this.stateChanges[h][R],_),this.deletedStates[h]===null)for(var F in this.deletedStates[h]={},this.state[h])F!==R&&(this.deletedStates[h][F]=null);else if(this.deletedStates[h]&&this.deletedStates[h][R]===null)for(var z in this.deletedStates[h][R]={},this.state[h][R])_[z]||(this.deletedStates[h][R][z]=null);else for(var $ in _)this.deletedStates[h]&&this.deletedStates[h][R]&&this.deletedStates[h][R][$]===null&&delete this.deletedStates[h][R][$]},Pv.prototype.removeFeatureState=function(h,v,_){if(this.deletedStates[h]!==null){var R=String(v);if(this.deletedStates[h]=this.deletedStates[h]||{},_&&v!==void 0)this.deletedStates[h][R]!==null&&(this.deletedStates[h][R]=this.deletedStates[h][R]||{},this.deletedStates[h][R][_]=null);else if(v!==void 0)if(this.stateChanges[h]&&this.stateChanges[h][R])for(_ in this.deletedStates[h][R]={},this.stateChanges[h][R])this.deletedStates[h][R][_]=null;else this.deletedStates[h][R]=null;else this.deletedStates[h]=null}},Pv.prototype.getState=function(h,v){var _=String(v),R=E({},(this.state[h]||{})[_],(this.stateChanges[h]||{})[_]);if(this.deletedStates[h]===null)return{};if(this.deletedStates[h]){var F=this.deletedStates[h][v];if(F===null)return{};for(var z in F)delete R[z]}return R},Pv.prototype.initializeTileState=function(h,v){h.setFeatureState(this.state,v)},Pv.prototype.coalesceChanges=function(h,v){var _={};for(var R in this.stateChanges){this.state[R]=this.state[R]||{};var F={};for(var z in this.stateChanges[R])this.state[R][z]||(this.state[R][z]={}),E(this.state[R][z],this.stateChanges[R][z]),F[z]=this.state[R][z];_[R]=F}for(var $ in this.deletedStates){this.state[$]=this.state[$]||{};var ue={};if(this.deletedStates[$]===null)for(var Pe in this.state[$])ue[Pe]={},this.state[$][Pe]={};else for(var Qe in this.deletedStates[$]){if(this.deletedStates[$][Qe]===null)this.state[$][Qe]={};else for(var ct=0,mt=Object.keys(this.deletedStates[$][Qe]);ct<mt.length;ct+=1)delete this.state[$][Qe][mt[ct]];ue[Qe]=this.state[$][Qe]}_[$]=_[$]||{},E(_[$],ue)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(var Lt in h)h[Lt].setFeatureState(_,v)};var Zu=function(h,v){this.tileID=h,this.x=h.canonical.x,this.y=h.canonical.y,this.z=h.canonical.z,this.grid=new iu(8192,16,0),this.grid3D=new iu(8192,16,0),this.featureIndexArray=new bt,this.promoteId=v};function oc(h,v,_,R,F){return Je(h,function(z,$){var ue=v instanceof mf?v.get($):null;return ue&&ue.evaluate?ue.evaluate(_,R,F):ue})}function wc(h){for(var v=1/0,_=1/0,R=-1/0,F=-1/0,z=0,$=h;z<$.length;z+=1){var ue=$[z];v=Math.min(v,ue.x),_=Math.min(_,ue.y),R=Math.max(R,ue.x),F=Math.max(F,ue.y)}return{minX:v,minY:_,maxX:R,maxY:F}}function Tx(h,v){return v-h}Zu.prototype.insert=function(h,v,_,R,F,z){var $=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,R,F);for(var ue=z?this.grid3D:this.grid,Pe=0;Pe<v.length;Pe++){for(var Qe=v[Pe],ct=[1/0,1/0,-1/0,-1/0],mt=0;mt<Qe.length;mt++){var Lt=Qe[mt];ct[0]=Math.min(ct[0],Lt.x),ct[1]=Math.min(ct[1],Lt.y),ct[2]=Math.max(ct[2],Lt.x),ct[3]=Math.max(ct[3],Lt.y)}ct[0]<8192&&ct[1]<8192&&ct[2]>=0&&ct[3]>=0&&ue.insert($,ct[0],ct[1],ct[2],ct[3])}},Zu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Gh.VectorTile(new vn(this.rawTileData)).layers,this.sourceLayerCoder=new Xd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Zu.prototype.query=function(h,v,_,R){var F=this;this.loadVTLayers();for(var z=h.params||{},$=8192/h.tileSize/h.scale,ue=Of(z.filter),Pe=h.queryGeometry,Qe=h.queryPadding*$,ct=wc(Pe),mt=this.grid.query(ct.minX-Qe,ct.minY-Qe,ct.maxX+Qe,ct.maxY+Qe),Lt=wc(h.cameraQueryGeometry),Ut=this.grid3D.query(Lt.minX-Qe,Lt.minY-Qe,Lt.maxX+Qe,Lt.maxY+Qe,function(gn,wn,Dn,pi){return function(wi,qi,Di,oa,Oi){for(var ao=0,Ki=wi;ao<Ki.length;ao+=1){var ji=Ki[ao];if(qi<=ji.x&&Di<=ji.y&&oa>=ji.x&&Oi>=ji.y)return!0}var go=[new Q(qi,Di),new Q(qi,Oi),new Q(oa,Oi),new Q(oa,Di)];if(wi.length>2){for(var Ga=0,oo=go;Ga<oo.length;Ga+=1)if(Zl(wi,oo[Ga]))return!0}for(var yi=0;yi<wi.length-1;yi++)if(xf(wi[yi],wi[yi+1],go))return!0;return!1}(h.cameraQueryGeometry,gn-Qe,wn-Qe,Dn+Qe,pi+Qe)}),ur=0,fr=Ut;ur<fr.length;ur+=1)mt.push(fr[ur]);mt.sort(Tx);for(var Lr,Rr={},Yr=function(gn){var wn=mt[gn];if(wn!==Lr){Lr=wn;var Dn=F.featureIndexArray.get(wn),pi=null;F.loadMatchingFeature(Rr,Dn.bucketIndex,Dn.sourceLayerIndex,Dn.featureIndex,ue,z.layers,z.availableImages,v,_,R,function(wi,qi,Di){return pi||(pi=Jo(wi)),qi.queryIntersectsFeature(Pe,wi,Di,pi,F.z,h.transform,$,h.pixelPosMatrix)})}},nn=0;nn<mt.length;nn++)Yr(nn);return Rr},Zu.prototype.loadMatchingFeature=function(h,v,_,R,F,z,$,ue,Pe,Qe,ct){var mt=this.bucketLayerIDs[v];if(!z||function(wi,qi){for(var Di=0;Di<wi.length;Di++)if(qi.indexOf(wi[Di])>=0)return!0;return!1}(z,mt)){var Lt=this.sourceLayerCoder.decode(_),Ut=this.vtLayers[Lt].feature(R);if(F.needGeometry){var ur=bs(Ut,!0);if(!F.filter(new wa(this.tileID.overscaledZ),ur,this.tileID.canonical))return}else if(!F.filter(new wa(this.tileID.overscaledZ),Ut))return;for(var fr=this.getId(Ut,Lt),Lr=0;Lr<mt.length;Lr++){var Rr=mt[Lr];if(!(z&&z.indexOf(Rr)<0)){var Yr=ue[Rr];if(Yr){var nn={};fr!==void 0&&Qe&&(nn=Qe.getState(Yr.sourceLayer||"_geojsonTileLayer",fr));var gn=E({},Pe[Rr]);gn.paint=oc(gn.paint,Yr.paint,Ut,nn,$),gn.layout=oc(gn.layout,Yr.layout,Ut,nn,$);var wn=!ct||ct(Ut,Yr,nn);if(wn){var Dn=new of(Ut,this.z,this.x,this.y,fr);Dn.layer=gn;var pi=h[Rr];pi===void 0&&(pi=h[Rr]=[]),pi.push({featureIndex:R,feature:Dn,intersectionZ:wn})}}}}}},Zu.prototype.lookupSymbolFeatures=function(h,v,_,R,F,z,$,ue){var Pe={};this.loadVTLayers();for(var Qe=Of(F),ct=0,mt=h;ct<mt.length;ct+=1)this.loadMatchingFeature(Pe,_,R,mt[ct],Qe,z,$,ue,v);return Pe},Zu.prototype.hasLayer=function(h){for(var v=0,_=this.bucketLayerIDs;v<_.length;v+=1)for(var R=0,F=_[v];R<F.length;R+=1)if(h===F[R])return!0;return!1},Zu.prototype.getId=function(h,v){var _=h.id;return this.promoteId&&typeof(_=h.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[v]])=="boolean"&&(_=Number(_)),_},zi("FeatureIndex",Zu,{omit:["rawTileData","sourceLayerCoder"]});var Ka=function(h,v){this.tileID=h,this.uid=Se(),this.uses=0,this.tileSize=v,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ka.prototype.registerFadeDuration=function(h){var v=h+this.timeAdded;v<We.now()||this.fadeEndTime&&v<this.fadeEndTime||(this.fadeEndTime=v)},Ka.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ka.prototype.loadVectorData=function(h,v,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",h){for(var R in h.featureIndex&&(this.latestFeatureIndex=h.featureIndex,h.rawTileData?(this.latestRawTileData=h.rawTileData,this.latestFeatureIndex.rawTileData=h.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=h.collisionBoxArray,this.buckets=function(Qe,ct){var mt={};if(!ct)return mt;for(var Lt=function(){var fr=ur[Ut],Lr=fr.layerIds.map(function(nn){return ct.getLayer(nn)}).filter(Boolean);if(Lr.length!==0){fr.layers=Lr,fr.stateDependentLayerIds&&(fr.stateDependentLayers=fr.stateDependentLayerIds.map(function(nn){return Lr.filter(function(gn){return gn.id===nn})[0]}));for(var Rr=0,Yr=Lr;Rr<Yr.length;Rr+=1)mt[Yr[Rr].id]=fr}},Ut=0,ur=Qe;Ut<ur.length;Ut+=1)Lt();return mt}(h.buckets,v.style),this.hasSymbolBuckets=!1,this.buckets){var F=this.buckets[R];if(F instanceof Fn){if(this.hasSymbolBuckets=!0,!_)break;F.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var z in this.buckets){var $=this.buckets[z];if($ instanceof Fn&&$.hasRTLText){this.hasRTLText=!0,ic.isLoading()||ic.isLoaded()||xv()!=="deferred"||nc();break}}for(var ue in this.queryPadding=0,this.buckets){var Pe=this.buckets[ue];this.queryPadding=Math.max(this.queryPadding,v.style.getLayer(ue).queryRadius(Pe))}h.imageAtlas&&(this.imageAtlas=h.imageAtlas),h.glyphAtlasImage&&(this.glyphAtlasImage=h.glyphAtlasImage)}else this.collisionBoxArray=new T},Ka.prototype.unloadVectorData=function(){for(var h in this.buckets)this.buckets[h].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ka.prototype.getBucket=function(h){return this.buckets[h.id]},Ka.prototype.upload=function(h){for(var v in this.buckets){var _=this.buckets[v];_.uploadPending()&&_.upload(h)}var R=h.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new sd(h,this.imageAtlas.image,R.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new sd(h,this.glyphAtlasImage,R.ALPHA),this.glyphAtlasImage=null)},Ka.prototype.prepare=function(h){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(h,this.imageAtlasTexture)},Ka.prototype.queryRenderedFeatures=function(h,v,_,R,F,z,$,ue,Pe,Qe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:R,cameraQueryGeometry:F,scale:z,tileSize:this.tileSize,pixelPosMatrix:Qe,transform:ue,params:$,queryPadding:this.queryPadding*Pe},h,v,_):{}},Ka.prototype.querySourceFeatures=function(h,v){var _=this.latestFeatureIndex;if(_&&_.rawTileData){var R=_.loadVTLayers(),F=v?v.sourceLayer:"",z=R._geojsonTileLayer||R[F];if(z)for(var $=Of(v&&v.filter),ue=this.tileID.canonical,Pe=ue.z,Qe=ue.x,ct=ue.y,mt={z:Pe,x:Qe,y:ct},Lt=0;Lt<z.length;Lt++){var Ut=z.feature(Lt);if($.needGeometry){var ur=bs(Ut,!0);if(!$.filter(new wa(this.tileID.overscaledZ),ur,this.tileID.canonical))continue}else if(!$.filter(new wa(this.tileID.overscaledZ),Ut))continue;var fr=_.getId(Ut,F),Lr=new of(Ut,Pe,Qe,ct,fr);Lr.tile=mt,h.push(Lr)}}},Ka.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ka.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ka.prototype.setExpiryData=function(h){var v=this.expirationTime;if(h.cacheControl){var _=qe(h.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else h.expires&&(this.expirationTime=new Date(h.expires).getTime());if(this.expirationTime){var R=Date.now(),F=!1;if(this.expirationTime>R)F=!1;else if(v)if(this.expirationTime<v)F=!0;else{var z=this.expirationTime-v;z?this.expirationTime=R+Math.max(z,3e4):F=!0}else F=!0;F?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ka.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ka.prototype.setFeatureState=function(h,v){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(h).length!==0){var _=this.latestFeatureIndex.loadVTLayers();for(var R in this.buckets)if(v.style.hasLayer(R)){var F=this.buckets[R],z=F.layers[0].sourceLayer||"_geojsonTileLayer",$=_[z],ue=h[z];if($&&ue&&Object.keys(ue).length!==0){F.update(ue,$,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Pe=v&&v.style&&v.style.getLayer(R);Pe&&(this.queryPadding=Math.max(this.queryPadding,Pe.queryRadius(F)))}}}},Ka.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ka.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<We.now()},Ka.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ka.prototype.setHoldDuration=function(h){this.symbolFadeHoldUntil=We.now()+h},Ka.prototype.setDependencies=function(h,v){for(var _={},R=0,F=v;R<F.length;R+=1)_[F[R]]=!0;this.dependencies[h]=_},Ka.prototype.hasDependency=function(h,v){for(var _=0,R=h;_<R.length;_+=1){var F=this.dependencies[R[_]];if(F){for(var z=0,$=v;z<$.length;z+=1)if(F[$[z]])return!0}}return!1};var sf=te.performance,Op=function(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},sf.mark(this._marks.start)};Op.prototype.finish=function(){sf.mark(this._marks.end);var h=sf.getEntriesByName(this._marks.measure);return h.length===0&&(sf.measure(this._marks.measure,this._marks.start,this._marks.end),h=sf.getEntriesByName(this._marks.measure),sf.clearMarks(this._marks.start),sf.clearMarks(this._marks.end),sf.clearMeasures(this._marks.measure)),h},b.Actor=Rv,b.AlphaImage=rf,b.CanonicalTileID=Xh,b.CollisionBoxArray=T,b.Color=Qi,b.DEMData=Vf,b.DataConstantProperty=Ji,b.DictionaryCoder=Xd,b.EXTENT=8192,b.ErrorEvent=Gt,b.EvaluationParameters=wa,b.Event=St,b.Evented=gr,b.FeatureIndex=Zu,b.FillBucket=Fc,b.FillExtrusionBucket=sl,b.ImageAtlas=Ln,b.ImagePosition=xi,b.LineBucket=Ps,b.LngLat=Vs,b.LngLatBounds=Au,b.MercatorCoordinate=Os,b.ONE_EM=24,b.OverscaledTileID=Tu,b.Point=Q,b.Point$1=Q,b.Properties=_s,b.Protobuf=vn,b.RGBAImage=Il,b.RequestManager=Xe,b.RequestPerformance=Op,b.ResourceType=re,b.SegmentVector=Wt,b.SourceFeatureState=Pv,b.StructArrayLayout1ui2=zl,b.StructArrayLayout2f1f2i16=Sn,b.StructArrayLayout2i4=zh,b.StructArrayLayout3ui6=Ne,b.StructArrayLayout4i8=Ff,b.SymbolBucket=Fn,b.Texture=sd,b.Tile=Ka,b.Transitionable=Wu,b.Uniform1f=si,b.Uniform1i=Un,b.Uniform2f=li,b.Uniform3f=Ii,b.Uniform4f=ea,b.UniformColor=la,b.UniformMatrix4f=lo,b.UnwrappedTileID=mm,b.ValidationError=st,b.WritingMode=ta,b.ZoomHistory=Qp,b.add=function(h,v,_){return h[0]=v[0]+_[0],h[1]=v[1]+_[1],h[2]=v[2]+_[2],h},b.addDynamicAttributes=Gn,b.asyncAll=function(h,v,_){if(!h.length)return _(null,[]);var R=h.length,F=new Array(h.length),z=null;h.forEach(function($,ue){v($,function(Pe,Qe){Pe&&(z=Pe),F[ue]=Qe,--R==0&&_(z,F)})})},b.bezier=pe,b.bindAll=Ue,b.browser=We,b.cacheEntryPossiblyAdded=function(h){++le>Er&&(h.getActor().send("enforceCacheSizeLimit",Jt),le=0)},b.clamp=J,b.clearTileCache=function(h){var v=te.caches.delete("mapbox-tiles");h&&v.catch(h).then(function(){return h()})},b.clipLine=vu,b.clone=function(h){var v=new po(16);return v[0]=h[0],v[1]=h[1],v[2]=h[2],v[3]=h[3],v[4]=h[4],v[5]=h[5],v[6]=h[6],v[7]=h[7],v[8]=h[8],v[9]=h[9],v[10]=h[10],v[11]=h[11],v[12]=h[12],v[13]=h[13],v[14]=h[14],v[15]=h[15],v},b.clone$1=xe,b.clone$2=function(h){var v=new po(3);return v[0]=h[0],v[1]=h[1],v[2]=h[2],v},b.collisionCircleLayout=nt,b.config=Ve,b.create=function(){var h=new po(16);return po!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},b.create$1=function(){var h=new po(9);return po!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h},b.create$2=function(){var h=new po(4);return po!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h},b.createCommonjsModule=G,b.createExpression=nh,b.createLayout=au,b.createStyleLayer=function(h){return h.type==="custom"?new dm(h):new wf[h.type](h)},b.cross=function(h,v,_){var R=v[0],F=v[1],z=v[2],$=_[0],ue=_[1],Pe=_[2];return h[0]=F*Pe-z*ue,h[1]=z*$-R*Pe,h[2]=R*ue-F*$,h},b.deepEqual=function h(v,_){if(Array.isArray(v)){if(!Array.isArray(_)||v.length!==_.length)return!1;for(var R=0;R<v.length;R++)if(!h(v[R],_[R]))return!1;return!0}if(typeof v=="object"&&v!==null&&_!==null){if(typeof _!="object"||Object.keys(v).length!==Object.keys(_).length)return!1;for(var F in v)if(!h(v[F],_[F]))return!1;return!0}return v===_},b.dot=function(h,v){return h[0]*v[0]+h[1]*v[1]+h[2]*v[2]},b.dot$1=function(h,v){return h[0]*v[0]+h[1]*v[1]+h[2]*v[2]+h[3]*v[3]},b.ease=fe,b.emitValidationErrors=Lf,b.endsWith=at,b.enforceCacheSizeLimit=function(h){wr(),an&&an.then(function(v){v.keys().then(function(_){for(var R=0;R<_.length-h;R++)v.delete(_[R])})})},b.evaluateSizeForFeature=zu,b.evaluateSizeForZoom=ou,b.evaluateVariableOffset=Nr,b.evented=Df,b.extend=E,b.featureFilter=Of,b.filterObject=Ze,b.fromRotation=function(h,v){var _=Math.sin(v),R=Math.cos(v);return h[0]=R,h[1]=_,h[2]=0,h[3]=-_,h[4]=R,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},b.getAnchorAlignment=Vo,b.getAnchorJustification=Wr,b.getArrayBuffer=wt,b.getImage=he,b.getJSON=function(h,v){return jt(E(h,{type:"json"}),v)},b.getRTLTextPluginStatus=xv,b.getReferrer=Ye,b.getVideo=function(h,v){var _,R,F=te.document.createElement("video");F.muted=!0,F.onloadstart=function(){v(null,F)};for(var z=0;z<h.length;z++){var $=te.document.createElement("source");_=h[z],R=void 0,(R=te.document.createElement("a")).href=_,(R.protocol!==te.document.location.protocol||R.host!==te.document.location.host)&&(F.crossOrigin="Anonymous"),$.src=h[z],F.appendChild($)}return{cancel:function(){}}},b.identity=Ku,b.invert=function(h,v){var _=v[0],R=v[1],F=v[2],z=v[3],$=v[4],ue=v[5],Pe=v[6],Qe=v[7],ct=v[8],mt=v[9],Lt=v[10],Ut=v[11],ur=v[12],fr=v[13],Lr=v[14],Rr=v[15],Yr=_*ue-R*$,nn=_*Pe-F*$,gn=_*Qe-z*$,wn=R*Pe-F*ue,Dn=R*Qe-z*ue,pi=F*Qe-z*Pe,wi=ct*fr-mt*ur,qi=ct*Lr-Lt*ur,Di=ct*Rr-Ut*ur,oa=mt*Lr-Lt*fr,Oi=mt*Rr-Ut*fr,ao=Lt*Rr-Ut*Lr,Ki=Yr*ao-nn*Oi+gn*oa+wn*Di-Dn*qi+pi*wi;return Ki?(h[0]=(ue*ao-Pe*Oi+Qe*oa)*(Ki=1/Ki),h[1]=(F*Oi-R*ao-z*oa)*Ki,h[2]=(fr*pi-Lr*Dn+Rr*wn)*Ki,h[3]=(Lt*Dn-mt*pi-Ut*wn)*Ki,h[4]=(Pe*Di-$*ao-Qe*qi)*Ki,h[5]=(_*ao-F*Di+z*qi)*Ki,h[6]=(Lr*gn-ur*pi-Rr*nn)*Ki,h[7]=(ct*pi-Lt*gn+Ut*nn)*Ki,h[8]=($*Oi-ue*Di+Qe*wi)*Ki,h[9]=(R*Di-_*Oi-z*wi)*Ki,h[10]=(ur*Dn-fr*gn+Rr*Yr)*Ki,h[11]=(mt*gn-ct*Dn-Ut*Yr)*Ki,h[12]=(ue*qi-$*oa-Pe*wi)*Ki,h[13]=(_*oa-R*qi+F*wi)*Ki,h[14]=(fr*nn-ur*wn-Lr*Yr)*Ki,h[15]=(ct*wn-mt*nn+Lt*Yr)*Ki,h):null},b.isChar=Yn,b.isMapboxURL=pt,b.keysDifference=function(h,v){var _=[];for(var R in h)R in v||_.push(R);return _},b.makeRequest=jt,b.mapObject=Je,b.mercatorXfromLng=T0,b.mercatorYfromLat=Iv,b.mercatorZfromAltitude=M0,b.mul=td,b.multiply=Cu,b.mvt=Gh,b.nextPowerOfTwo=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},b.normalize=function(h,v){var _=v[0],R=v[1],F=v[2],z=_*_+R*R+F*F;return z>0&&(z=1/Math.sqrt(z)),h[0]=v[0]*z,h[1]=v[1]*z,h[2]=v[2]*z,h},b.number=Ts,b.offscreenCanvasSupported=H,b.ortho=function(h,v,_,R,F,z,$){var ue=1/(v-_),Pe=1/(R-F),Qe=1/(z-$);return h[0]=-2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Pe,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*Qe,h[11]=0,h[12]=(v+_)*ue,h[13]=(F+R)*Pe,h[14]=($+z)*Qe,h[15]=1,h},b.parseGlyphPBF=function(h){return new vn(h).readFields(Vn,[])},b.pbf=vn,b.performSymbolLayout=function(h,v,_,R,F,z,$){h.createArrays(),h.tilePixelRatio=8192/(512*h.overscaling),h.compareText={},h.iconsNeedLinear=!1;var ue=h.layers[0].layout,Pe=h.layers[0]._unevaluatedLayout._values,Qe={};if(h.textSizeData.kind==="composite"){var ct=h.textSizeData,mt=ct.maxZoom;Qe.compositeTextSizes=[Pe["text-size"].possiblyEvaluate(new wa(ct.minZoom),$),Pe["text-size"].possiblyEvaluate(new wa(mt),$)]}if(h.iconSizeData.kind==="composite"){var Lt=h.iconSizeData,Ut=Lt.maxZoom;Qe.compositeIconSizes=[Pe["icon-size"].possiblyEvaluate(new wa(Lt.minZoom),$),Pe["icon-size"].possiblyEvaluate(new wa(Ut),$)]}Qe.layoutTextSize=Pe["text-size"].possiblyEvaluate(new wa(h.zoom+1),$),Qe.layoutIconSize=Pe["icon-size"].possiblyEvaluate(new wa(h.zoom+1),$),Qe.textMaxSize=Pe["text-size"].possiblyEvaluate(new wa(18));for(var ur=24*ue.get("text-line-height"),fr=ue.get("text-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",Lr=ue.get("text-keep-upright"),Rr=ue.get("text-size"),Yr=function(){var wn=gn[nn],Dn=ue.get("text-font").evaluate(wn,{},$).join(","),pi=Rr.evaluate(wn,{},$),wi=Qe.layoutTextSize.evaluate(wn,{},$),qi=Qe.layoutIconSize.evaluate(wn,{},$),Di={horizontal:{},vertical:void 0},oa=wn.text,Oi=[0,0];if(oa){var ao=oa.toString(),Ki=24*ue.get("text-letter-spacing").evaluate(wn,{},$),ji=function(qa){for(var ts=0,To=qa;ts<To.length;ts+=1)if(mo=To[ts].charCodeAt(0),Yn.Arabic(mo)||Yn["Arabic Supplement"](mo)||Yn["Arabic Extended-A"](mo)||Yn["Arabic Presentation Forms-A"](mo)||Yn["Arabic Presentation Forms-B"](mo))return!1;var mo;return!0}(ao)?Ki:0,go=ue.get("text-anchor").evaluate(wn,{},$),Ga=ue.get("text-variable-anchor");if(!Ga){var oo=ue.get("text-radial-offset").evaluate(wn,{},$);Oi=oo?Nr(go,[24*oo,kr]):ue.get("text-offset").evaluate(wn,{},$).map(function(qa){return 24*qa})}var yi=fr?"center":ue.get("text-justify").evaluate(wn,{},$),Bo=ue.get("symbol-placement"),es=Bo==="point"?24*ue.get("text-max-width").evaluate(wn,{},$):0,Xs=function(){h.allowVerticalPlacement&&Qc(ao)&&(Di.vertical=Qa(oa,v,_,F,Dn,es,ur,go,"left",ji,Oi,ta.vertical,!0,Bo,wi,pi))};if(!fr&&Ga){for(var ps=yi==="auto"?Ga.map(function(qa){return Wr(qa)}):[yi],ks=!1,su=0;su<ps.length;su++){var Ls=ps[su];if(!Di.horizontal[Ls])if(ks)Di.horizontal[Ls]=Di.horizontal[0];else{var gu=Qa(oa,v,_,F,Dn,es,ur,"center",Ls,ji,Oi,ta.horizontal,!1,Bo,wi,pi);gu&&(Di.horizontal[Ls]=gu,ks=gu.positionedLines.length===1)}}Xs()}else{yi==="auto"&&(yi=Wr(go));var qu=Qa(oa,v,_,F,Dn,es,ur,go,yi,ji,Oi,ta.horizontal,!1,Bo,wi,pi);qu&&(Di.horizontal[yi]=qu),Xs(),Qc(ao)&&fr&&Lr&&(Di.vertical=Qa(oa,v,_,F,Dn,es,ur,go,yi,ji,Oi,ta.vertical,!1,Bo,wi,pi))}}var Qu=void 0,ul=!1;if(wn.icon&&wn.icon.name){var Mu=R[wn.icon.name];Mu&&(Qu=function(qa,ts,To){var mo=Vo(To),ll=ts[0]-qa.displaySize[0]*mo.horizontalAlign,$o=ts[1]-qa.displaySize[1]*mo.verticalAlign;return{image:qa,top:$o,bottom:$o+qa.displaySize[1],left:ll,right:ll+qa.displaySize[0]}}(F[wn.icon.name],ue.get("icon-offset").evaluate(wn,{},$),ue.get("icon-anchor").evaluate(wn,{},$)),ul=Mu.sdf,h.sdfIcons===void 0?h.sdfIcons=Mu.sdf:h.sdfIcons!==Mu.sdf&&He("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Mu.pixelRatio!==h.pixelRatio||ue.get("icon-rotate").constantOr(1)!==0)&&(h.iconsNeedLinear=!0))}var Ju=Dr(Di.horizontal)||Di.vertical;h.iconsInText=!!Ju&&Ju.iconsInText,(Ju||Qu)&&function(qa,ts,To,mo,ll,$o,Ds,mu,bl,Eo,Hf){var Sl=$o.textMaxSize.evaluate(ts,{});Sl===void 0&&(Sl=Ds);var Yh,yu=qa.layers[0].layout,Da=yu.get("icon-offset").evaluate(ts,{},Hf),Aa=Dr(To.horizontal),kp=Ds/24,Yd=qa.tilePixelRatio*kp,Kd=qa.tilePixelRatio*Sl/24,Lp=qa.tilePixelRatio*mu,qd=qa.tilePixelRatio*yu.get("symbol-spacing"),ym=yu.get("text-padding")*qa.tilePixelRatio,ud=yu.get("icon-padding")*qa.tilePixelRatio,xg=yu.get("text-max-angle")/180*Math.PI,_m=yu.get("text-rotation-alignment")==="map"&&yu.get("symbol-placement")!=="point",_u=yu.get("icon-rotation-alignment")==="map"&&yu.get("symbol-placement")!=="point",Dp=yu.get("symbol-placement"),Ov=qd/2,bg=yu.get("icon-text-fit");mo&&bg!=="none"&&(qa.allowVerticalPlacement&&To.vertical&&(Yh=Us(mo,To.vertical,bg,yu.get("icon-text-fit-padding"),Da,kp)),Aa&&(mo=Us(mo,Aa,bg,yu.get("icon-text-fit-padding"),Da,kp)));var ld=function(KE,bm){bm.x<0||bm.x>=8192||bm.y<0||bm.y>=8192||function(xu,_h,qE,Kh,k0,L0,Ag,Ru,jf,Qd,fd,hd,pd,Tg,dd,D0,Sm,Fp,Em,wm,zc,Bp,vd,Iu,Cm){var Am,qh,gd,md,Jd,Fv=xu.addToLineVertexArray(_h,qE),d_=0,v_=0,g_=0,Tm=0,F0=-1,yt=-1,Wf={},B0=lr(""),ev=0,Mm=0;if(Ru._unevaluatedLayout.getValue("text-radial-offset")===void 0?(ev=(Am=Ru.layout.get("text-offset").evaluate(zc,{},Iu).map(function(zv){return 24*zv}))[0],Mm=Am[1]):(ev=24*Ru.layout.get("text-radial-offset").evaluate(zc,{},Iu),Mm=kr),xu.allowVerticalPlacement&&Kh.vertical){var N0=Ru.layout.get("text-rotate").evaluate(zc,{},Iu)+90;md=new Go(jf,_h,Qd,fd,hd,Kh.vertical,pd,Tg,dd,N0),Ag&&(Jd=new Go(jf,_h,Qd,fd,hd,Ag,Sm,Fp,dd,N0))}if(k0){var Mg=Ru.layout.get("icon-rotate").evaluate(zc,{}),z0=Ru.layout.get("icon-text-fit")!=="none",U0=pr(k0,Mg,vd,z0),Pu=Ag?pr(Ag,Mg,vd,z0):void 0;gd=new Go(jf,_h,Qd,fd,hd,k0,Sm,Fp,!1,Mg),d_=4*U0.length;var Qh=xu.iconSizeData,Bv=null;Qh.kind==="source"?(Bv=[128*Ru.layout.get("icon-size").evaluate(zc,{})])[0]>32640&&He(xu.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Qh.kind==="composite"&&((Bv=[128*Bp.compositeIconSizes[0].evaluate(zc,{},Iu),128*Bp.compositeIconSizes[1].evaluate(zc,{},Iu)])[0]>32640||Bv[1]>32640)&&He(xu.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),xu.addSymbols(xu.icon,U0,Bv,wm,Em,zc,!1,_h,Fv.lineStartIndex,Fv.lineLength,-1,Iu),F0=xu.icon.placedSymbolArray.length-1,Pu&&(v_=4*Pu.length,xu.addSymbols(xu.icon,Pu,Bv,wm,Em,zc,ta.vertical,_h,Fv.lineStartIndex,Fv.lineLength,-1,Iu),yt=xu.icon.placedSymbolArray.length-1)}for(var Z0 in Kh.horizontal){var Rg=Kh.horizontal[Z0];if(!qh){B0=lr(Rg.text);var m_=Ru.layout.get("text-rotate").evaluate(zc,{},Iu);qh=new Go(jf,_h,Qd,fd,hd,Rg,pd,Tg,dd,m_)}var y_=Rg.positionedLines.length===1;if(g_+=dr(xu,_h,Rg,L0,Ru,dd,zc,D0,Fv,Kh.vertical?ta.horizontal:ta.horizontalOnly,y_?Object.keys(Kh.horizontal):[Z0],Wf,F0,Bp,Iu),y_)break}Kh.vertical&&(Tm+=dr(xu,_h,Kh.vertical,L0,Ru,dd,zc,D0,Fv,ta.vertical,["vertical"],Wf,yt,Bp,Iu));var __=qh?qh.boxStartIndex:xu.collisionBoxArray.length,x_=qh?qh.boxEndIndex:xu.collisionBoxArray.length,Rm=md?md.boxStartIndex:xu.collisionBoxArray.length,b_=md?md.boxEndIndex:xu.collisionBoxArray.length,V0=gd?gd.boxStartIndex:xu.collisionBoxArray.length,Nv=gd?gd.boxEndIndex:xu.collisionBoxArray.length,Ig=Jd?Jd.boxStartIndex:xu.collisionBoxArray.length,S_=Jd?Jd.boxEndIndex:xu.collisionBoxArray.length,xh=-1,Pg=function(zv,H0){return zv&&zv.circleDiameter?Math.max(zv.circleDiameter,H0):H0};xh=Pg(qh,xh),xh=Pg(md,xh),xh=Pg(gd,xh);var yd=(xh=Pg(Jd,xh))>-1?1:0;yd&&(xh*=Cm/24),xu.glyphOffsetArray.length>=Fn.MAX_GLYPHS&&He("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zc.sortKey!==void 0&&xu.addToSortKeyRanges(xu.symbolInstances.length,zc.sortKey),xu.symbolInstances.emplaceBack(_h.x,_h.y,Wf.right>=0?Wf.right:-1,Wf.center>=0?Wf.center:-1,Wf.left>=0?Wf.left:-1,Wf.vertical||-1,F0,yt,B0,__,x_,Rm,b_,V0,Nv,Ig,S_,Qd,g_,Tm,d_,v_,yd,0,pd,ev,Mm,xh)}(qa,bm,KE,To,mo,ll,Yh,qa.layers[0],qa.collisionBoxArray,ts.index,ts.sourceLayerIndex,qa.index,Yd,ym,_m,bl,Lp,ud,_u,Da,ts,$o,Eo,Hf,Ds)};if(Dp==="line")for(var kv=0,Sg=vu(ts.geometry,0,0,8192,8192);kv<Sg.length;kv+=1)for(var R0=Sg[kv],Eg=0,I0=Es(R0,qd,xg,To.vertical||Aa,mo,24,Kd,qa.overscaling,8192);Eg<I0.length;Eg+=1){var c_=I0[Eg];Aa&&tr(qa,Aa.text,Ov,c_)||ld(R0,c_)}else if(Dp==="line-center")for(var P0=0,sc=ts.geometry;P0<sc.length;P0+=1){var mh=sc[P0];if(mh.length>1){var rs=Ao(mh,xg,To.vertical||Aa,mo,24,Kd);rs&&ld(mh,rs)}}else if(ts.type==="Polygon")for(var Nc=0,O0=pg(ts.geometry,0);Nc<O0.length;Nc+=1){var wg=O0[Nc],yh=xr(wg,16);ld(wg[0],new Zs(yh.x,yh.y,0))}else if(ts.type==="LineString")for(var Lv=0,xm=ts.geometry;Lv<xm.length;Lv+=1){var Dv=xm[Lv];ld(Dv,new Zs(Dv[0].x,Dv[0].y,0))}else if(ts.type==="Point")for(var cd=0,Cg=ts.geometry;cd<Cg.length;cd+=1)for(var f_=0,h_=Cg[cd];f_<h_.length;f_+=1){var p_=h_[f_];ld([p_],new Zs(p_.x,p_.y,0))}}(h,wn,Di,Qu,R,Qe,wi,qi,Oi,ul,$)},nn=0,gn=h.features;nn<gn.length;nn+=1)Yr();z&&h.generateCollisionDebugBuffers()},b.perspective=function(h,v,_,R,F){var z,$=1/Math.tan(v/2);return h[0]=$/_,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=$,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,F!=null&&F!==1/0?(h[10]=(F+R)*(z=1/(R-F)),h[14]=2*F*R*z):(h[10]=-1,h[14]=-2*R),h},b.pick=function(h,v){for(var _={},R=0;R<v.length;R++){var F=v[R];F in h&&(_[F]=h[F])}return _},b.plugin=ic,b.polygonIntersectsPolygon=ef,b.postMapLoadEvent=kt,b.postTurnstileEvent=Kt,b.potpack=La,b.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],b.register=zi,b.registerForPluginStateChange=function(h){return h({pluginStatus:Bs,pluginURL:Ml}),Df.on("pluginStateChange",h),h},b.renderColorRamp=bv,b.rotate=function(h,v,_){var R=v[0],F=v[1],z=v[2],$=v[3],ue=Math.sin(_),Pe=Math.cos(_);return h[0]=R*Pe+z*ue,h[1]=F*Pe+$*ue,h[2]=R*-ue+z*Pe,h[3]=F*-ue+$*Pe,h},b.rotateX=function(h,v,_){var R=Math.sin(_),F=Math.cos(_),z=v[4],$=v[5],ue=v[6],Pe=v[7],Qe=v[8],ct=v[9],mt=v[10],Lt=v[11];return v!==h&&(h[0]=v[0],h[1]=v[1],h[2]=v[2],h[3]=v[3],h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15]),h[4]=z*F+Qe*R,h[5]=$*F+ct*R,h[6]=ue*F+mt*R,h[7]=Pe*F+Lt*R,h[8]=Qe*F-z*R,h[9]=ct*F-$*R,h[10]=mt*F-ue*R,h[11]=Lt*F-Pe*R,h},b.rotateZ=function(h,v,_){var R=Math.sin(_),F=Math.cos(_),z=v[0],$=v[1],ue=v[2],Pe=v[3],Qe=v[4],ct=v[5],mt=v[6],Lt=v[7];return v!==h&&(h[8]=v[8],h[9]=v[9],h[10]=v[10],h[11]=v[11],h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15]),h[0]=z*F+Qe*R,h[1]=$*F+ct*R,h[2]=ue*F+mt*R,h[3]=Pe*F+Lt*R,h[4]=Qe*F-z*R,h[5]=ct*F-$*R,h[6]=mt*F-ue*R,h[7]=Lt*F-Pe*R,h},b.scale=function(h,v,_){var R=_[0],F=_[1],z=_[2];return h[0]=v[0]*R,h[1]=v[1]*R,h[2]=v[2]*R,h[3]=v[3]*R,h[4]=v[4]*F,h[5]=v[5]*F,h[6]=v[6]*F,h[7]=v[7]*F,h[8]=v[8]*z,h[9]=v[9]*z,h[10]=v[10]*z,h[11]=v[11]*z,h[12]=v[12],h[13]=v[13],h[14]=v[14],h[15]=v[15],h},b.scale$1=function(h,v,_){return h[0]=v[0]*_,h[1]=v[1]*_,h[2]=v[2]*_,h[3]=v[3]*_,h},b.scale$2=function(h,v,_){return h[0]=v[0]*_,h[1]=v[1]*_,h[2]=v[2]*_,h},b.setCacheLimits=function(h,v){Jt=h,Er=v},b.setRTLTextPlugin=function(h,v,_){if(_===void 0&&(_=!1),Bs==="deferred"||Bs==="loading"||Bs==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ml=We.resolveURL(h),Bs="deferred",gf=v,xp(),_||nc()},b.sphericalToCartesian=function(h){var v=h[0],_=h[1],R=h[2];return _+=90,_*=Math.PI/180,R*=Math.PI/180,{x:v*Math.cos(_)*Math.sin(R),y:v*Math.sin(_)*Math.sin(R),z:v*Math.cos(R)}},b.sqrLen=function(h){var v=h[0],_=h[1];return v*v+_*_},b.styleSpec=At,b.sub=function(h,v,_){return h[0]=v[0]-_[0],h[1]=v[1]-_[1],h[2]=v[2]-_[2],h},b.symbolSize=Ua,b.transformMat3=function(h,v,_){var R=v[0],F=v[1],z=v[2];return h[0]=R*_[0]+F*_[3]+z*_[6],h[1]=R*_[1]+F*_[4]+z*_[7],h[2]=R*_[2]+F*_[5]+z*_[8],h},b.transformMat4=ph,b.translate=function(h,v,_){var R,F,z,$,ue,Pe,Qe,ct,mt,Lt,Ut,ur,fr=_[0],Lr=_[1],Rr=_[2];return v===h?(h[12]=v[0]*fr+v[4]*Lr+v[8]*Rr+v[12],h[13]=v[1]*fr+v[5]*Lr+v[9]*Rr+v[13],h[14]=v[2]*fr+v[6]*Lr+v[10]*Rr+v[14],h[15]=v[3]*fr+v[7]*Lr+v[11]*Rr+v[15]):(F=v[1],z=v[2],$=v[3],ue=v[4],Pe=v[5],Qe=v[6],ct=v[7],mt=v[8],Lt=v[9],Ut=v[10],ur=v[11],h[0]=R=v[0],h[1]=F,h[2]=z,h[3]=$,h[4]=ue,h[5]=Pe,h[6]=Qe,h[7]=ct,h[8]=mt,h[9]=Lt,h[10]=Ut,h[11]=ur,h[12]=R*fr+ue*Lr+mt*Rr+v[12],h[13]=F*fr+Pe*Lr+Lt*Rr+v[13],h[14]=z*fr+Qe*Lr+Ut*Rr+v[14],h[15]=$*fr+ct*Lr+ur*Rr+v[15]),h},b.triggerPluginCompletionEvent=zd,b.uniqueId=Se,b.validateCustomStyleLayer=function(h){var v=[],_=h.id;return _===void 0&&v.push({message:"layers."+_+': missing required property "id"'}),h.render===void 0&&v.push({message:"layers."+_+': missing required method "render"'}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&v.push({message:"layers."+_+': property "renderingMode" must be either "2d" or "3d"'}),v},b.validateLight=Bd,b.validateStyle=yp,b.values=function(h){var v=[];for(var _ in h)v.push(h[_]);return v},b.vectorTile=Gh,b.version="1.13.3",b.warnOnce=He,b.webpSupported=dt,b.window=te,b.wrap=M}),K(["./shared"],function(b){"use strict";function G(ve){var he=typeof ve;if(he==="number"||he==="boolean"||he==="string"||ve==null)return JSON.stringify(ve);if(Array.isArray(ve)){for(var Re="[",tt=0,St=ve;tt<St.length;tt+=1)Re+=G(St[tt])+",";return Re+"]"}for(var Gt=Object.keys(ve).sort(),gr="{",At=0;At<Gt.length;At++)gr+=JSON.stringify(Gt[At])+":"+G(ve[Gt[At]])+",";return gr+"}"}function j(ve){for(var he="",Re=0,tt=b.refProperties;Re<tt.length;Re+=1)he+="/"+G(ve[tt[Re]]);return he}var q=function(ve){this.keyCache={},ve&&this.replace(ve)};q.prototype.replace=function(ve){this._layerConfigs={},this._layers={},this.update(ve,[])},q.prototype.update=function(ve,he){for(var Re=this,tt=0,St=ve;tt<St.length;tt+=1){var Gt=St[tt];this._layerConfigs[Gt.id]=Gt;var gr=this._layers[Gt.id]=b.createStyleLayer(Gt);gr._featureFilter=b.featureFilter(gr.filter),this.keyCache[Gt.id]&&delete this.keyCache[Gt.id]}for(var At=0,st=he;At<st.length;At+=1){var Pt=st[At];delete this.keyCache[Pt],delete this._layerConfigs[Pt],delete this._layers[Pt]}this.familiesBySource={};for(var yr=0,Fr=function(Wn,Jn){for(var sa={},vi=0;vi<Wn.length;vi++){var ga=Jn&&Jn[Wn[vi].id]||j(Wn[vi]);Jn&&(Jn[Wn[vi].id]=ga);var Ra=sa[ga];Ra||(Ra=sa[ga]=[]),Ra.push(Wn[vi])}var ya=[];for(var ja in sa)ya.push(sa[ja]);return ya}(b.values(this._layerConfigs),this.keyCache);yr<Fr.length;yr+=1){var Ft=Fr[yr].map(function(Wn){return Re._layers[Wn.id]}),Mn=Ft[0];if(Mn.visibility!=="none"){var ei=Mn.source||"",ni=this.familiesBySource[ei];ni||(ni=this.familiesBySource[ei]={});var un=Mn.sourceLayer||"_geojsonTileLayer",Xn=ni[un];Xn||(Xn=ni[un]=[]),Xn.push(Ft)}}};var Q=function(ve){var he={},Re=[];for(var tt in ve){var St=ve[tt],Gt=he[tt]={};for(var gr in St){var At=St[+gr];if(At&&At.bitmap.width!==0&&At.bitmap.height!==0){var st={x:0,y:0,w:At.bitmap.width+2,h:At.bitmap.height+2};Re.push(st),Gt[gr]={rect:st,metrics:At.metrics}}}}var Pt=b.potpack(Re),yr=new b.AlphaImage({width:Pt.w||1,height:Pt.h||1});for(var Fr in ve){var Ft=ve[Fr];for(var Mn in Ft){var ei=Ft[+Mn];if(ei&&ei.bitmap.width!==0&&ei.bitmap.height!==0){var ni=he[Fr][Mn].rect;b.AlphaImage.copy(ei.bitmap,yr,{x:0,y:0},{x:ni.x+1,y:ni.y+1},ei.bitmap)}}}this.image=yr,this.positions=he};b.register("GlyphAtlas",Q);var ie=function(ve){this.tileID=new b.OverscaledTileID(ve.tileID.overscaledZ,ve.tileID.wrap,ve.tileID.canonical.z,ve.tileID.canonical.x,ve.tileID.canonical.y),this.uid=ve.uid,this.zoom=ve.zoom,this.pixelRatio=ve.pixelRatio,this.tileSize=ve.tileSize,this.source=ve.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ve.showCollisionBoxes,this.collectResourceTiming=!!ve.collectResourceTiming,this.returnDependencies=!!ve.returnDependencies,this.promoteId=ve.promoteId};function te(ve,he,Re){for(var tt=new b.EvaluationParameters(he),St=0,Gt=ve;St<Gt.length;St+=1)Gt[St].recalculate(tt,Re)}function Ce(ve,he){var Re=b.getArrayBuffer(ve.request,function(tt,St,Gt,gr){tt?he(tt):St&&he(null,{vectorTile:new b.vectorTile.VectorTile(new b.pbf(St)),rawData:St,cacheControl:Gt,expires:gr})});return function(){Re.cancel(),he()}}ie.prototype.parse=function(ve,he,Re,tt,St){var Gt=this;this.status="parsing",this.data=ve,this.collisionBoxArray=new b.CollisionBoxArray;var gr=new b.DictionaryCoder(Object.keys(ve.layers).sort()),At=new b.FeatureIndex(this.tileID,this.promoteId);At.bucketLayerIDs=[];var st,Pt,yr,Fr,Ft={},Mn={featureIndex:At,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Re},ei=he.familiesBySource[this.source];for(var ni in ei){var un=ve.layers[ni];if(un){un.version===1&&b.warnOnce('Vector tile source "'+this.source+'" layer "'+ni+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Xn=gr.encode(ni),Wn=[],Jn=0;Jn<un.length;Jn++){var sa=un.feature(Jn),vi=At.getId(sa,ni);Wn.push({feature:sa,id:vi,index:Jn,sourceLayerIndex:Xn})}for(var ga=0,Ra=ei[ni];ga<Ra.length;ga+=1){var ya=Ra[ga],ja=ya[0];ja.minzoom&&this.zoom<Math.floor(ja.minzoom)||ja.maxzoom&&this.zoom>=ja.maxzoom||ja.visibility!=="none"&&(te(ya,this.zoom,Re),(Ft[ja.id]=ja.createBucket({index:At.bucketLayerIDs.length,layers:ya,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xn,sourceID:this.source})).populate(Wn,Mn,this.tileID.canonical),At.bucketLayerIDs.push(ya.map(function(oi){return oi.id})))}}}var ba=b.mapObject(Mn.glyphDependencies,function(oi){return Object.keys(oi).map(Number)});Object.keys(ba).length?tt.send("getGlyphs",{uid:this.uid,stacks:ba},function(oi,Si){st||(st=oi,Pt=Si,Io.call(Gt))}):Pt={};var gs=Object.keys(Mn.iconDependencies);gs.length?tt.send("getImages",{icons:gs,source:this.source,tileID:this.tileID,type:"icons"},function(oi,Si){st||(st=oi,yr=Si,Io.call(Gt))}):yr={};var co=Object.keys(Mn.patternDependencies);function Io(){if(st)return St(st);if(Pt&&yr&&Fr){var oi=new Q(Pt),Si=new b.ImageAtlas(yr,Fr);for(var Qi in Ft){var Wa=Ft[Qi];Wa instanceof b.SymbolBucket?(te(Wa.layers,this.zoom,Re),b.performSymbolLayout(Wa,Pt,oi.positions,yr,Si.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Wa.hasPattern&&(Wa instanceof b.LineBucket||Wa instanceof b.FillBucket||Wa instanceof b.FillExtrusionBucket)&&(te(Wa.layers,this.zoom,Re),Wa.addFeatures(Mn,this.tileID.canonical,Si.patternPositions))}this.status="done",St(null,{buckets:b.values(Ft).filter(function(ms){return!ms.isEmpty()}),featureIndex:At,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:oi.image,imageAtlas:Si,glyphMap:this.returnDependencies?Pt:null,iconMap:this.returnDependencies?yr:null,glyphPositions:this.returnDependencies?oi.positions:null})}}co.length?tt.send("getImages",{icons:co,source:this.source,tileID:this.tileID,type:"patterns"},function(oi,Si){st||(st=oi,Fr=Si,Io.call(Gt))}):Fr={},Io.call(this)};var pe=function(ve,he,Re,tt){this.actor=ve,this.layerIndex=he,this.availableImages=Re,this.loadVectorData=tt||Ce,this.loading={},this.loaded={}};pe.prototype.loadTile=function(ve,he){var Re=this,tt=ve.uid;this.loading||(this.loading={});var St=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new b.RequestPerformance(ve.request),Gt=this.loading[tt]=new ie(ve);Gt.abort=this.loadVectorData(ve,function(gr,At){if(delete Re.loading[tt],gr||!At)return Gt.status="done",Re.loaded[tt]=Gt,he(gr);var st=At.rawData,Pt={};At.expires&&(Pt.expires=At.expires),At.cacheControl&&(Pt.cacheControl=At.cacheControl);var yr={};if(St){var Fr=St.finish();Fr&&(yr.resourceTiming=JSON.parse(JSON.stringify(Fr)))}Gt.vectorTile=At.vectorTile,Gt.parse(At.vectorTile,Re.layerIndex,Re.availableImages,Re.actor,function(Ft,Mn){if(Ft||!Mn)return he(Ft);he(null,b.extend({rawTileData:st.slice(0)},Mn,Pt,yr))}),Re.loaded=Re.loaded||{},Re.loaded[tt]=Gt})},pe.prototype.reloadTile=function(ve,he){var Re=this,tt=this.loaded,St=ve.uid,Gt=this;if(tt&&tt[St]){var gr=tt[St];gr.showCollisionBoxes=ve.showCollisionBoxes;var At=function(st,Pt){var yr=gr.reloadCallback;yr&&(delete gr.reloadCallback,gr.parse(gr.vectorTile,Gt.layerIndex,Re.availableImages,Gt.actor,yr)),he(st,Pt)};gr.status==="parsing"?gr.reloadCallback=At:gr.status==="done"&&(gr.vectorTile?gr.parse(gr.vectorTile,this.layerIndex,this.availableImages,this.actor,At):At())}},pe.prototype.abortTile=function(ve,he){var Re=this.loading,tt=ve.uid;Re&&Re[tt]&&Re[tt].abort&&(Re[tt].abort(),delete Re[tt]),he()},pe.prototype.removeTile=function(ve,he){var Re=this.loaded,tt=ve.uid;Re&&Re[tt]&&delete Re[tt],he()};var fe=b.window.ImageBitmap,J=function(){this.loaded={}};function M(ve,he){if(ve.length!==0){E(ve[0],he);for(var Re=1;Re<ve.length;Re++)E(ve[Re],!he)}}function E(ve,he){for(var Re=0,tt=0,St=0,Gt=ve.length,gr=Gt-1;St<Gt;gr=St++){var At=(ve[St][0]-ve[gr][0])*(ve[gr][1]+ve[St][1]),st=Re+At;tt+=Math.abs(Re)>=Math.abs(At)?Re-st+At:At-st+Re,Re=st}Re+tt>=0!=!!he&&ve.reverse()}J.prototype.loadTile=function(ve,he){var Re=ve.uid,tt=ve.encoding,St=ve.rawImageData,Gt=fe&&St instanceof fe?this.getImageData(St):St,gr=new b.DEMData(Re,Gt,tt);this.loaded=this.loaded||{},this.loaded[Re]=gr,he(null,gr)},J.prototype.getImageData=function(ve){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ve.width,ve.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ve.width,this.offscreenCanvas.height=ve.height,this.offscreenCanvasContext.drawImage(ve,0,0,ve.width,ve.height);var he=this.offscreenCanvasContext.getImageData(-1,-1,ve.width+2,ve.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new b.RGBAImage({width:he.width,height:he.height},he.data)},J.prototype.removeTile=function(ve){var he=this.loaded,Re=ve.uid;he&&he[Re]&&delete he[Re]};var ge=b.vectorTile.VectorTileFeature.prototype.toGeoJSON,Se=function(ve){this._feature=ve,this.extent=b.EXTENT,this.type=ve.type,this.properties=ve.tags,"id"in ve&&!isNaN(ve.id)&&(this.id=parseInt(ve.id,10))};Se.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ve=[],he=0,Re=this._feature.geometry;he<Re.length;he+=1){var tt=Re[he];ve.push([new b.Point$1(tt[0],tt[1])])}return ve}for(var St=[],Gt=0,gr=this._feature.geometry;Gt<gr.length;Gt+=1){for(var At=[],st=0,Pt=gr[Gt];st<Pt.length;st+=1){var yr=Pt[st];At.push(new b.Point$1(yr[0],yr[1]))}St.push(At)}return St},Se.prototype.toGeoJSON=function(ve,he,Re){return ge.call(this,ve,he,Re)};var ze=function(ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=b.EXTENT,this.length=ve.length,this._features=ve};ze.prototype.feature=function(ve){return new Se(this._features[ve])};var De=b.vectorTile.VectorTileFeature,Ue=at;function at(ve,he){this.options=he||{},this.features=ve,this.length=ve.length}function Je(ve,he){this.id=typeof ve.id=="number"?ve.id:void 0,this.type=ve.type,this.rawGeometry=ve.type===1?[ve.geometry]:ve.geometry,this.properties=ve.tags,this.extent=he||4096}at.prototype.feature=function(ve){return new Je(this.features[ve],this.options.extent)},Je.prototype.loadGeometry=function(){var ve=this.rawGeometry;this.geometry=[];for(var he=0;he<ve.length;he++){for(var Re=ve[he],tt=[],St=0;St<Re.length;St++)tt.push(new b.Point$1(Re[St][0],Re[St][1]));this.geometry.push(tt)}return this.geometry},Je.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ve=this.geometry,he=1/0,Re=-1/0,tt=1/0,St=-1/0,Gt=0;Gt<ve.length;Gt++)for(var gr=ve[Gt],At=0;At<gr.length;At++){var st=gr[At];he=Math.min(he,st.x),Re=Math.max(Re,st.x),tt=Math.min(tt,st.y),St=Math.max(St,st.y)}return[he,tt,Re,St]},Je.prototype.toGeoJSON=De.prototype.toGeoJSON;var Ze=_e,xe=Ue;function _e(ve){var he=new b.pbf;return function(Re,tt){for(var St in Re.layers)tt.writeMessage(3,He,Re.layers[St])}(ve,he),he.finish()}function He(ve,he){var Re;he.writeVarintField(15,ve.version||1),he.writeStringField(1,ve.name||""),he.writeVarintField(5,ve.extent||4096);var tt={keys:[],values:[],keycache:{},valuecache:{}};for(Re=0;Re<ve.length;Re++)tt.feature=ve.feature(Re),he.writeMessage(2,Ke,tt);var St=tt.keys;for(Re=0;Re<St.length;Re++)he.writeStringField(3,St[Re]);var Gt=tt.values;for(Re=0;Re<Gt.length;Re++)he.writeMessage(4,Ge,Gt[Re])}function Ke(ve,he){var Re=ve.feature;Re.id!==void 0&&he.writeVarintField(1,Re.id),he.writeMessage(2,Et,ve),he.writeVarintField(3,Re.type),he.writeMessage(4,ne,Re)}function Et(ve,he){var Re=ve.feature,tt=ve.keys,St=ve.values,Gt=ve.keycache,gr=ve.valuecache;for(var At in Re.properties){var st=Gt[At];st===void 0&&(tt.push(At),Gt[At]=st=tt.length-1),he.writeVarint(st);var Pt=Re.properties[At],yr=typeof Pt;yr!=="string"&&yr!=="boolean"&&yr!=="number"&&(Pt=JSON.stringify(Pt));var Fr=yr+":"+Pt,Ft=gr[Fr];Ft===void 0&&(St.push(Pt),gr[Fr]=Ft=St.length-1),he.writeVarint(Ft)}}function ke(ve,he){return(he<<3)+(7&ve)}function qe(ve){return ve<<1^ve>>31}function ne(ve,he){for(var Re=ve.loadGeometry(),tt=ve.type,St=0,Gt=0,gr=Re.length,At=0;At<gr;At++){var st=Re[At],Pt=1;tt===1&&(Pt=st.length),he.writeVarint(ke(1,Pt));for(var yr=tt===3?st.length-1:st.length,Fr=0;Fr<yr;Fr++){Fr===1&&tt!==1&&he.writeVarint(ke(2,yr-1));var Ft=st[Fr].x-St,Mn=st[Fr].y-Gt;he.writeVarint(qe(Ft)),he.writeVarint(qe(Mn)),St+=Ft,Gt+=Mn}tt===3&&he.writeVarint(ke(7,1))}}function Ge(ve,he){var Re=typeof ve;Re==="string"?he.writeStringField(1,ve):Re==="boolean"?he.writeBooleanField(7,ve):Re==="number"&&(ve%1!=0?he.writeDoubleField(3,ve):ve<0?he.writeSVarintField(6,ve):he.writeVarintField(5,ve))}function oe(ve,he,Re,tt){Fe(ve,Re,tt),Fe(he,2*Re,2*tt),Fe(he,2*Re+1,2*tt+1)}function Fe(ve,he,Re){var tt=ve[he];ve[he]=ve[Re],ve[Re]=tt}function ut(ve,he,Re,tt){var St=ve-Re,Gt=he-tt;return St*St+Gt*Gt}Ze.fromVectorTileJs=_e,Ze.fromGeojsonVt=function(ve,he){he=he||{};var Re={};for(var tt in ve)Re[tt]=new Ue(ve[tt].features,he),Re[tt].name=tt,Re[tt].version=he.version,Re[tt].extent=he.extent;return _e({layers:Re})},Ze.GeoJSONWrapper=xe;var Ae=function(ve){return ve[0]},Le=function(ve){return ve[1]},rt=function(ve,he,Re,tt,St){he===void 0&&(he=Ae),Re===void 0&&(Re=Le),tt===void 0&&(tt=64),St===void 0&&(St=Float64Array),this.nodeSize=tt,this.points=ve;for(var Gt=ve.length<65536?Uint16Array:Uint32Array,gr=this.ids=new Gt(ve.length),At=this.coords=new St(2*ve.length),st=0;st<ve.length;st++)gr[st]=st,At[2*st]=he(ve[st]),At[2*st+1]=Re(ve[st]);(function Pt(yr,Fr,Ft,Mn,ei,ni){if(!(ei-Mn<=Ft)){var un=Mn+ei>>1;(function Xn(Wn,Jn,sa,vi,ga,Ra){for(;ga>vi;){if(ga-vi>600){var ya=ga-vi+1,ja=sa-vi+1,ba=Math.log(ya),gs=.5*Math.exp(2*ba/3),co=.5*Math.sqrt(ba*gs*(ya-gs)/ya)*(ja-ya/2<0?-1:1);Xn(Wn,Jn,sa,Math.max(vi,Math.floor(sa-ja*gs/ya+co)),Math.min(ga,Math.floor(sa+(ya-ja)*gs/ya+co)),Ra)}var Io=Jn[2*sa+Ra],oi=vi,Si=ga;for(oe(Wn,Jn,vi,sa),Jn[2*ga+Ra]>Io&&oe(Wn,Jn,vi,ga);oi<Si;){for(oe(Wn,Jn,oi,Si),oi++,Si--;Jn[2*oi+Ra]<Io;)oi++;for(;Jn[2*Si+Ra]>Io;)Si--}Jn[2*vi+Ra]===Io?oe(Wn,Jn,vi,Si):oe(Wn,Jn,++Si,ga),Si<=sa&&(vi=Si+1),sa<=Si&&(ga=Si-1)}})(yr,Fr,un,Mn,ei,ni%2),Pt(yr,Fr,Ft,Mn,un-1,ni+1),Pt(yr,Fr,Ft,un+1,ei,ni+1)}})(gr,At,tt,0,gr.length-1,0)};rt.prototype.range=function(ve,he,Re,tt){return function(St,Gt,gr,At,st,Pt,yr){for(var Fr,Ft,Mn=[0,St.length-1,0],ei=[];Mn.length;){var ni=Mn.pop(),un=Mn.pop(),Xn=Mn.pop();if(un-Xn<=yr)for(var Wn=Xn;Wn<=un;Wn++)Ft=Gt[2*Wn+1],(Fr=Gt[2*Wn])>=gr&&Fr<=st&&Ft>=At&&Ft<=Pt&&ei.push(St[Wn]);else{var Jn=Math.floor((Xn+un)/2);Ft=Gt[2*Jn+1],(Fr=Gt[2*Jn])>=gr&&Fr<=st&&Ft>=At&&Ft<=Pt&&ei.push(St[Jn]);var sa=(ni+1)%2;(ni===0?gr<=Fr:At<=Ft)&&(Mn.push(Xn),Mn.push(Jn-1),Mn.push(sa)),(ni===0?st>=Fr:Pt>=Ft)&&(Mn.push(Jn+1),Mn.push(un),Mn.push(sa))}}return ei}(this.ids,this.coords,ve,he,Re,tt,this.nodeSize)},rt.prototype.within=function(ve,he,Re){return function(tt,St,Gt,gr,At,st){for(var Pt=[0,tt.length-1,0],yr=[],Fr=At*At;Pt.length;){var Ft=Pt.pop(),Mn=Pt.pop(),ei=Pt.pop();if(Mn-ei<=st)for(var ni=ei;ni<=Mn;ni++)ut(St[2*ni],St[2*ni+1],Gt,gr)<=Fr&&yr.push(tt[ni]);else{var un=Math.floor((ei+Mn)/2),Xn=St[2*un],Wn=St[2*un+1];ut(Xn,Wn,Gt,gr)<=Fr&&yr.push(tt[un]);var Jn=(Ft+1)%2;(Ft===0?Gt-At<=Xn:gr-At<=Wn)&&(Pt.push(ei),Pt.push(un-1),Pt.push(Jn)),(Ft===0?Gt+At>=Xn:gr+At>=Wn)&&(Pt.push(un+1),Pt.push(Mn),Pt.push(Jn))}}return yr}(this.ids,this.coords,ve,he,Re,this.nodeSize)};var ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ve){return ve}},me=function(ve){this.options=Te(Object.create(ye),ve),this.trees=new Array(this.options.maxZoom+1)};function We(ve,he,Re,tt,St){return{x:ve,y:he,zoom:1/0,id:Re,parentId:-1,numPoints:tt,properties:St}}function Ve(ve,he){var Re=ve.geometry.coordinates,tt=Re[1];return{x:et(Re[0]),y:$e(tt),zoom:1/0,index:he,parentId:-1}}function dt(ve){return{type:"Feature",id:ve.id,properties:Ht(ve),geometry:{type:"Point",coordinates:[(tt=ve.x,360*(tt-.5)),(he=ve.y,Re=(180-360*he)*Math.PI/180,360*Math.atan(Math.exp(Re))/Math.PI-90)]}};var he,Re,tt}function Ht(ve){var he=ve.numPoints,Re=he>=1e4?Math.round(he/1e3)+"k":he>=1e3?Math.round(he/100)/10+"k":he;return Te(Te({},ve.properties),{cluster:!0,cluster_id:ve.id,point_count:he,point_count_abbreviated:Re})}function et(ve){return ve/360+.5}function $e(ve){var he=Math.sin(ve*Math.PI/180),Re=.5-.25*Math.log((1+he)/(1-he))/Math.PI;return Re<0?0:Re>1?1:Re}function Te(ve,he){for(var Re in he)ve[Re]=he[Re];return ve}function Xe(ve){return ve.x}function pt(ve){return ve.y}function Oe(ve,he,Re,tt,St,Gt){var gr=St-Re,At=Gt-tt;if(gr!==0||At!==0){var st=((ve-Re)*gr+(he-tt)*At)/(gr*gr+At*At);st>1?(Re=St,tt=Gt):st>0&&(Re+=gr*st,tt+=At*st)}return(gr=ve-Re)*gr+(At=he-tt)*At}function Be(ve,he,Re,tt){var St={id:ve===void 0?null:ve,type:he,geometry:Re,tags:tt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Gt){var gr=Gt.geometry,At=Gt.type;if(At==="Point"||At==="MultiPoint"||At==="LineString")vt(Gt,gr);else if(At==="Polygon"||At==="MultiLineString")for(var st=0;st<gr.length;st++)vt(Gt,gr[st]);else if(At==="MultiPolygon")for(st=0;st<gr.length;st++)for(var Pt=0;Pt<gr[st].length;Pt++)vt(Gt,gr[st][Pt])}(St),St}function vt(ve,he){for(var Re=0;Re<he.length;Re+=3)ve.minX=Math.min(ve.minX,he[Re]),ve.minY=Math.min(ve.minY,he[Re+1]),ve.maxX=Math.max(ve.maxX,he[Re]),ve.maxY=Math.max(ve.maxY,he[Re+1])}function Rt(ve,he,Re,tt){if(he.geometry){var St=he.geometry.coordinates,Gt=he.geometry.type,gr=Math.pow(Re.tolerance/((1<<Re.maxZoom)*Re.extent),2),At=[],st=he.id;if(Re.promoteId?st=he.properties[Re.promoteId]:Re.generateId&&(st=tt||0),Gt==="Point")rr(St,At);else if(Gt==="MultiPoint")for(var Pt=0;Pt<St.length;Pt++)rr(St[Pt],At);else if(Gt==="LineString")br(St,At,gr,!1);else if(Gt==="MultiLineString"){if(Re.lineMetrics){for(Pt=0;Pt<St.length;Pt++)br(St[Pt],At=[],gr,!1),ve.push(Be(st,"LineString",At,he.properties));return}lt(St,At,gr,!1)}else if(Gt==="Polygon")lt(St,At,gr,!0);else{if(Gt!=="MultiPolygon"){if(Gt==="GeometryCollection"){for(Pt=0;Pt<he.geometry.geometries.length;Pt++)Rt(ve,{id:st,geometry:he.geometry.geometries[Pt],properties:he.properties},Re,tt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Pt=0;Pt<St.length;Pt++){var yr=[];lt(St[Pt],yr,gr,!0),At.push(yr)}}ve.push(Be(st,Gt,At,he.properties))}}function rr(ve,he){he.push(an(ve[0])),he.push($r(ve[1])),he.push(0)}function br(ve,he,Re,tt){for(var St,Gt,gr=0,At=0;At<ve.length;At++){var st=an(ve[At][0]),Pt=$r(ve[At][1]);he.push(st),he.push(Pt),he.push(0),At>0&&(gr+=tt?(St*Pt-st*Gt)/2:Math.sqrt(Math.pow(st-St,2)+Math.pow(Pt-Gt,2))),St=st,Gt=Pt}var yr=he.length-3;he[2]=1,function Fr(Ft,Mn,ei,ni){for(var un,Xn=ni,Wn=ei-Mn>>1,Jn=ei-Mn,sa=Ft[Mn],vi=Ft[Mn+1],ga=Ft[ei],Ra=Ft[ei+1],ya=Mn+3;ya<ei;ya+=3){var ja=Oe(Ft[ya],Ft[ya+1],sa,vi,ga,Ra);if(ja>Xn)un=ya,Xn=ja;else if(ja===Xn){var ba=Math.abs(ya-Wn);ba<Jn&&(un=ya,Jn=ba)}}Xn>ni&&(un-Mn>3&&Fr(Ft,Mn,un,ni),Ft[un+2]=Xn,ei-un>3&&Fr(Ft,un,ei,ni))}(he,0,yr,Re),he[yr+2]=1,he.size=Math.abs(gr),he.start=0,he.end=he.size}function lt(ve,he,Re,tt){for(var St=0;St<ve.length;St++){var Gt=[];br(ve[St],Gt,Re,tt),he.push(Gt)}}function an(ve){return ve/360+.5}function $r(ve){var he=Math.sin(ve*Math.PI/180),Re=.5-.25*Math.log((1+he)/(1-he))/Math.PI;return Re<0?0:Re>1?1:Re}function Xr(ve,he,Re,tt,St,Gt,gr,At){if(tt/=he,Gt>=(Re/=he)&&gr<tt)return ve;if(gr<Re||Gt>=tt)return null;for(var st=[],Pt=0;Pt<ve.length;Pt++){var yr=ve[Pt],Fr=yr.geometry,Ft=yr.type,Mn=St===0?yr.minX:yr.minY,ei=St===0?yr.maxX:yr.maxY;if(Mn>=Re&&ei<tt)st.push(yr);else if(!(ei<Re||Mn>=tt)){var ni=[];if(Ft==="Point"||Ft==="MultiPoint")Nt(Fr,ni,Re,tt,St);else if(Ft==="LineString")Kt(Fr,ni,Re,tt,St,!1,At.lineMetrics);else if(Ft==="MultiLineString")kt(Fr,ni,Re,tt,St,!1);else if(Ft==="Polygon")kt(Fr,ni,Re,tt,St,!0);else if(Ft==="MultiPolygon")for(var un=0;un<Fr.length;un++){var Xn=[];kt(Fr[un],Xn,Re,tt,St,!0),Xn.length&&ni.push(Xn)}if(ni.length){if(At.lineMetrics&&Ft==="LineString"){for(un=0;un<ni.length;un++)st.push(Be(yr.id,Ft,ni[un],yr.tags));continue}Ft!=="LineString"&&Ft!=="MultiLineString"||(ni.length===1?(Ft="LineString",ni=ni[0]):Ft="MultiLineString"),Ft!=="Point"&&Ft!=="MultiPoint"||(Ft=ni.length===3?"Point":"MultiPoint"),st.push(Be(yr.id,Ft,ni,yr.tags))}}}return st.length?st:null}function Nt(ve,he,Re,tt,St){for(var Gt=0;Gt<ve.length;Gt+=3){var gr=ve[Gt+St];gr>=Re&&gr<=tt&&(he.push(ve[Gt]),he.push(ve[Gt+1]),he.push(ve[Gt+2]))}}function Kt(ve,he,Re,tt,St,Gt,gr){for(var At,st,Pt=or(ve),yr=St===0?Er:wr,Fr=ve.start,Ft=0;Ft<ve.length-3;Ft+=3){var Mn=ve[Ft],ei=ve[Ft+1],ni=ve[Ft+2],un=ve[Ft+3],Xn=ve[Ft+4],Wn=St===0?Mn:ei,Jn=St===0?un:Xn,sa=!1;gr&&(At=Math.sqrt(Math.pow(Mn-un,2)+Math.pow(ei-Xn,2))),Wn<Re?Jn>Re&&(st=yr(Pt,Mn,ei,un,Xn,Re),gr&&(Pt.start=Fr+At*st)):Wn>tt?Jn<tt&&(st=yr(Pt,Mn,ei,un,Xn,tt),gr&&(Pt.start=Fr+At*st)):Jt(Pt,Mn,ei,ni),Jn<Re&&Wn>=Re&&(st=yr(Pt,Mn,ei,un,Xn,Re),sa=!0),Jn>tt&&Wn<=tt&&(st=yr(Pt,Mn,ei,un,Xn,tt),sa=!0),!Gt&&sa&&(gr&&(Pt.end=Fr+At*st),he.push(Pt),Pt=or(ve)),gr&&(Fr+=At)}var vi=ve.length-3;Mn=ve[vi],ei=ve[vi+1],ni=ve[vi+2],(Wn=St===0?Mn:ei)>=Re&&Wn<=tt&&Jt(Pt,Mn,ei,ni),vi=Pt.length-3,Gt&&vi>=3&&(Pt[vi]!==Pt[0]||Pt[vi+1]!==Pt[1])&&Jt(Pt,Pt[0],Pt[1],Pt[2]),Pt.length&&he.push(Pt)}function or(ve){var he=[];return he.size=ve.size,he.start=ve.start,he.end=ve.end,he}function kt(ve,he,Re,tt,St,Gt){for(var gr=0;gr<ve.length;gr++)Kt(ve[gr],he,Re,tt,St,Gt,!1)}function Jt(ve,he,Re,tt){ve.push(he),ve.push(Re),ve.push(tt)}function Er(ve,he,Re,tt,St,Gt){var gr=(Gt-he)/(tt-he);return ve.push(Gt),ve.push(Re+(St-Re)*gr),ve.push(1),gr}function wr(ve,he,Re,tt,St,Gt){var gr=(Gt-Re)/(St-Re);return ve.push(he+(tt-he)*gr),ve.push(Gt),ve.push(1),gr}function Br(ve,he){for(var Re=[],tt=0;tt<ve.length;tt++){var St,Gt=ve[tt],gr=Gt.type;if(gr==="Point"||gr==="MultiPoint"||gr==="LineString")St=zr(Gt.geometry,he);else if(gr==="MultiLineString"||gr==="Polygon"){St=[];for(var At=0;At<Gt.geometry.length;At++)St.push(zr(Gt.geometry[At],he))}else if(gr==="MultiPolygon")for(St=[],At=0;At<Gt.geometry.length;At++){for(var st=[],Pt=0;Pt<Gt.geometry[At].length;Pt++)st.push(zr(Gt.geometry[At][Pt],he));St.push(st)}Re.push(Be(Gt.id,gr,St,Gt.tags))}return Re}function zr(ve,he){var Re=[];Re.size=ve.size,ve.start!==void 0&&(Re.start=ve.start,Re.end=ve.end);for(var tt=0;tt<ve.length;tt+=3)Re.push(ve[tt]+he,ve[tt+1],ve[tt+2]);return Re}function le(ve,he){if(ve.transformed)return ve;var Re,tt,St,Gt=1<<ve.z,gr=ve.x,At=ve.y;for(Re=0;Re<ve.features.length;Re++){var st=ve.features[Re],Pt=st.geometry,yr=st.type;if(st.geometry=[],yr===1)for(tt=0;tt<Pt.length;tt+=2)st.geometry.push(H(Pt[tt],Pt[tt+1],he,Gt,gr,At));else for(tt=0;tt<Pt.length;tt++){var Fr=[];for(St=0;St<Pt[tt].length;St+=2)Fr.push(H(Pt[tt][St],Pt[tt][St+1],he,Gt,gr,At));st.geometry.push(Fr)}}return ve.transformed=!0,ve}function H(ve,he,Re,tt,St,Gt){return[Math.round(Re*(ve*tt-St)),Math.round(Re*(he*tt-Gt))]}function re(ve,he,Re,tt,St){for(var Gt=he===St.maxZoom?0:St.tolerance/((1<<he)*St.extent),gr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Re,y:tt,z:he,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},At=0;At<ve.length;At++){gr.numFeatures++,Ie(gr,ve[At],Gt,St);var st=ve[At].minX,Pt=ve[At].minY,yr=ve[At].maxX,Fr=ve[At].maxY;st<gr.minX&&(gr.minX=st),Pt<gr.minY&&(gr.minY=Pt),yr>gr.maxX&&(gr.maxX=yr),Fr>gr.maxY&&(gr.maxY=Fr)}return gr}function Ie(ve,he,Re,tt){var St=he.geometry,Gt=he.type,gr=[];if(Gt==="Point"||Gt==="MultiPoint")for(var At=0;At<St.length;At+=3)gr.push(St[At]),gr.push(St[At+1]),ve.numPoints++,ve.numSimplified++;else if(Gt==="LineString")Ye(gr,St,ve,Re,!1,!1);else if(Gt==="MultiLineString"||Gt==="Polygon")for(At=0;At<St.length;At++)Ye(gr,St[At],ve,Re,Gt==="Polygon",At===0);else if(Gt==="MultiPolygon")for(var st=0;st<St.length;st++){var Pt=St[st];for(At=0;At<Pt.length;At++)Ye(gr,Pt[At],ve,Re,!0,At===0)}if(gr.length){var yr=he.tags||null;if(Gt==="LineString"&&tt.lineMetrics){for(var Fr in yr={},he.tags)yr[Fr]=he.tags[Fr];yr.mapbox_clip_start=St.start/St.size,yr.mapbox_clip_end=St.end/St.size}var Ft={geometry:gr,type:Gt==="Polygon"||Gt==="MultiPolygon"?3:Gt==="LineString"||Gt==="MultiLineString"?2:1,tags:yr};he.id!==null&&(Ft.id=he.id),ve.features.push(Ft)}}function Ye(ve,he,Re,tt,St,Gt){var gr=tt*tt;if(tt>0&&he.size<(St?gr:tt))Re.numPoints+=he.length/3;else{for(var At=[],st=0;st<he.length;st+=3)(tt===0||he[st+2]>gr)&&(Re.numSimplified++,At.push(he[st]),At.push(he[st+1])),Re.numPoints++;St&&function(Pt,yr){for(var Fr=0,Ft=0,Mn=Pt.length,ei=Mn-2;Ft<Mn;ei=Ft,Ft+=2)Fr+=(Pt[Ft]-Pt[ei])*(Pt[Ft+1]+Pt[ei+1]);if(Fr>0===yr)for(Ft=0,Mn=Pt.length;Ft<Mn/2;Ft+=2){var ni=Pt[Ft],un=Pt[Ft+1];Pt[Ft]=Pt[Mn-2-Ft],Pt[Ft+1]=Pt[Mn-1-Ft],Pt[Mn-2-Ft]=ni,Pt[Mn-1-Ft]=un}}(At,Gt),ve.push(At)}}function Ct(ve,he){var Re=(he=this.options=function(St,Gt){for(var gr in Gt)St[gr]=Gt[gr];return St}(Object.create(this.options),he)).debug;if(Re&&console.time("preprocess data"),he.maxZoom<0||he.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(he.promoteId&&he.generateId)throw new Error("promoteId and generateId cannot be used together.");var tt=function(St,Gt){var gr=[];if(St.type==="FeatureCollection")for(var At=0;At<St.features.length;At++)Rt(gr,St.features[At],Gt,At);else Rt(gr,St.type==="Feature"?St:{geometry:St},Gt);return gr}(ve,he);this.tiles={},this.tileCoords=[],Re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",he.indexMaxZoom,he.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(tt=function(St,Gt){var gr=Gt.buffer/Gt.extent,At=St,st=Xr(St,1,-1-gr,gr,0,-1,2,Gt),Pt=Xr(St,1,1-gr,2+gr,0,-1,2,Gt);return(st||Pt)&&(At=Xr(St,1,-gr,1+gr,0,-1,2,Gt)||[],st&&(At=Br(st,1).concat(At)),Pt&&(At=At.concat(Br(Pt,-1)))),At}(tt,he)).length&&this.splitTile(tt,0,0,0),Re&&(tt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ar(ve,he,Re){return 32*((1<<ve)*Re+he)+ve}function jt(ve,he){var Re=ve.tileID.canonical;if(!this._geoJSONIndex)return he(null,null);var tt=this._geoJSONIndex.getTile(Re.z,Re.x,Re.y);if(!tt)return he(null,null);var St=new ze(tt.features),Gt=Ze(St);Gt.byteOffset===0&&Gt.byteLength===Gt.buffer.byteLength||(Gt=new Uint8Array(Gt)),he(null,{vectorTile:St,rawData:Gt.buffer})}me.prototype.load=function(ve){var he=this.options,Re=he.log,tt=he.minZoom,St=he.maxZoom,Gt=he.nodeSize;Re&&console.time("total time");var gr="prepare "+ve.length+" points";Re&&console.time(gr),this.points=ve;for(var At=[],st=0;st<ve.length;st++)ve[st].geometry&&At.push(Ve(ve[st],st));this.trees[St+1]=new rt(At,Xe,pt,Gt,Float32Array),Re&&console.timeEnd(gr);for(var Pt=St;Pt>=tt;Pt--){var yr=+Date.now();At=this._cluster(At,Pt),this.trees[Pt]=new rt(At,Xe,pt,Gt,Float32Array),Re&&console.log("z%d: %d clusters in %dms",Pt,At.length,+Date.now()-yr)}return Re&&console.timeEnd("total time"),this},me.prototype.getClusters=function(ve,he){var Re=((ve[0]+180)%360+360)%360-180,tt=Math.max(-90,Math.min(90,ve[1])),St=ve[2]===180?180:((ve[2]+180)%360+360)%360-180,Gt=Math.max(-90,Math.min(90,ve[3]));if(ve[2]-ve[0]>=360)Re=-180,St=180;else if(Re>St){var gr=this.getClusters([Re,tt,180,Gt],he),At=this.getClusters([-180,tt,St,Gt],he);return gr.concat(At)}for(var st=this.trees[this._limitZoom(he)],Pt=[],yr=0,Fr=st.range(et(Re),$e(Gt),et(St),$e(tt));yr<Fr.length;yr+=1){var Ft=st.points[Fr[yr]];Pt.push(Ft.numPoints?dt(Ft):this.points[Ft.index])}return Pt},me.prototype.getChildren=function(ve){var he=this._getOriginId(ve),Re=this._getOriginZoom(ve),tt="No cluster with the specified id.",St=this.trees[Re];if(!St)throw new Error(tt);var Gt=St.points[he];if(!Gt)throw new Error(tt);for(var gr=this.options.radius/(this.options.extent*Math.pow(2,Re-1)),At=[],st=0,Pt=St.within(Gt.x,Gt.y,gr);st<Pt.length;st+=1){var yr=St.points[Pt[st]];yr.parentId===ve&&At.push(yr.numPoints?dt(yr):this.points[yr.index])}if(At.length===0)throw new Error(tt);return At},me.prototype.getLeaves=function(ve,he,Re){var tt=[];return this._appendLeaves(tt,ve,he=he||10,Re=Re||0,0),tt},me.prototype.getTile=function(ve,he,Re){var tt=this.trees[this._limitZoom(ve)],St=Math.pow(2,ve),Gt=this.options,gr=Gt.radius/Gt.extent,At=(Re-gr)/St,st=(Re+1+gr)/St,Pt={features:[]};return this._addTileFeatures(tt.range((he-gr)/St,At,(he+1+gr)/St,st),tt.points,he,Re,St,Pt),he===0&&this._addTileFeatures(tt.range(1-gr/St,At,1,st),tt.points,St,Re,St,Pt),he===St-1&&this._addTileFeatures(tt.range(0,At,gr/St,st),tt.points,-1,Re,St,Pt),Pt.features.length?Pt:null},me.prototype.getClusterExpansionZoom=function(ve){for(var he=this._getOriginZoom(ve)-1;he<=this.options.maxZoom;){var Re=this.getChildren(ve);if(he++,Re.length!==1)break;ve=Re[0].properties.cluster_id}return he},me.prototype._appendLeaves=function(ve,he,Re,tt,St){for(var Gt=0,gr=this.getChildren(he);Gt<gr.length;Gt+=1){var At=gr[Gt],st=At.properties;if(st&&st.cluster?St+st.point_count<=tt?St+=st.point_count:St=this._appendLeaves(ve,st.cluster_id,Re,tt,St):St<tt?St++:ve.push(At),ve.length===Re)break}return St},me.prototype._addTileFeatures=function(ve,he,Re,tt,St,Gt){for(var gr=0,At=ve;gr<At.length;gr+=1){var st=he[At[gr]],Pt=st.numPoints,yr={type:1,geometry:[[Math.round(this.options.extent*(st.x*St-Re)),Math.round(this.options.extent*(st.y*St-tt))]],tags:Pt?Ht(st):this.points[st.index].properties},Fr=void 0;Pt?Fr=st.id:this.options.generateId?Fr=st.index:this.points[st.index].id&&(Fr=this.points[st.index].id),Fr!==void 0&&(yr.id=Fr),Gt.features.push(yr)}},me.prototype._limitZoom=function(ve){return Math.max(this.options.minZoom,Math.min(+ve,this.options.maxZoom+1))},me.prototype._cluster=function(ve,he){for(var Re=[],tt=this.options,St=tt.reduce,Gt=tt.minPoints,gr=tt.radius/(tt.extent*Math.pow(2,he)),At=0;At<ve.length;At++){var st=ve[At];if(!(st.zoom<=he)){st.zoom=he;for(var Pt=this.trees[he+1],yr=Pt.within(st.x,st.y,gr),Fr=st.numPoints||1,Ft=Fr,Mn=0,ei=yr;Mn<ei.length;Mn+=1){var ni=Pt.points[ei[Mn]];ni.zoom>he&&(Ft+=ni.numPoints||1)}if(Ft>=Gt){for(var un=st.x*Fr,Xn=st.y*Fr,Wn=St&&Fr>1?this._map(st,!0):null,Jn=(At<<5)+(he+1)+this.points.length,sa=0,vi=yr;sa<vi.length;sa+=1){var ga=Pt.points[vi[sa]];if(!(ga.zoom<=he)){ga.zoom=he;var Ra=ga.numPoints||1;un+=ga.x*Ra,Xn+=ga.y*Ra,ga.parentId=Jn,St&&(Wn||(Wn=this._map(st,!0)),St(Wn,this._map(ga)))}}st.parentId=Jn,Re.push(We(un/Ft,Xn/Ft,Jn,Ft,Wn))}else if(Re.push(st),Ft>1)for(var ya=0,ja=yr;ya<ja.length;ya+=1){var ba=Pt.points[ja[ya]];ba.zoom<=he||(ba.zoom=he,Re.push(ba))}}}return Re},me.prototype._getOriginId=function(ve){return ve-this.points.length>>5},me.prototype._getOriginZoom=function(ve){return(ve-this.points.length)%32},me.prototype._map=function(ve,he){if(ve.numPoints)return he?Te({},ve.properties):ve.properties;var Re=this.points[ve.index].properties,tt=this.options.map(Re);return he&&tt===Re?Te({},tt):tt},Ct.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ct.prototype.splitTile=function(ve,he,Re,tt,St,Gt,gr){for(var At=[ve,he,Re,tt],st=this.options,Pt=st.debug;At.length;){tt=At.pop(),Re=At.pop(),he=At.pop(),ve=At.pop();var yr=1<<he,Fr=ar(he,Re,tt),Ft=this.tiles[Fr];if(!Ft&&(Pt>1&&console.time("creation"),Ft=this.tiles[Fr]=re(ve,he,Re,tt,st),this.tileCoords.push({z:he,x:Re,y:tt}),Pt)){Pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",he,Re,tt,Ft.numFeatures,Ft.numPoints,Ft.numSimplified),console.timeEnd("creation"));var Mn="z"+he;this.stats[Mn]=(this.stats[Mn]||0)+1,this.total++}if(Ft.source=ve,St){if(he===st.maxZoom||he===St)continue;var ei=1<<St-he;if(Re!==Math.floor(Gt/ei)||tt!==Math.floor(gr/ei))continue}else if(he===st.indexMaxZoom||Ft.numPoints<=st.indexMaxPoints)continue;if(Ft.source=null,ve.length!==0){Pt>1&&console.time("clipping");var ni,un,Xn,Wn,Jn,sa,vi=.5*st.buffer/st.extent,ga=.5-vi,Ra=.5+vi,ya=1+vi;ni=un=Xn=Wn=null,Jn=Xr(ve,yr,Re-vi,Re+Ra,0,Ft.minX,Ft.maxX,st),sa=Xr(ve,yr,Re+ga,Re+ya,0,Ft.minX,Ft.maxX,st),ve=null,Jn&&(ni=Xr(Jn,yr,tt-vi,tt+Ra,1,Ft.minY,Ft.maxY,st),un=Xr(Jn,yr,tt+ga,tt+ya,1,Ft.minY,Ft.maxY,st),Jn=null),sa&&(Xn=Xr(sa,yr,tt-vi,tt+Ra,1,Ft.minY,Ft.maxY,st),Wn=Xr(sa,yr,tt+ga,tt+ya,1,Ft.minY,Ft.maxY,st),sa=null),Pt>1&&console.timeEnd("clipping"),At.push(ni||[],he+1,2*Re,2*tt),At.push(un||[],he+1,2*Re,2*tt+1),At.push(Xn||[],he+1,2*Re+1,2*tt),At.push(Wn||[],he+1,2*Re+1,2*tt+1)}}},Ct.prototype.getTile=function(ve,he,Re){var tt=this.options,St=tt.extent,Gt=tt.debug;if(ve<0||ve>24)return null;var gr=1<<ve,At=ar(ve,he=(he%gr+gr)%gr,Re);if(this.tiles[At])return le(this.tiles[At],St);Gt>1&&console.log("drilling down to z%d-%d-%d",ve,he,Re);for(var st,Pt=ve,yr=he,Fr=Re;!st&&Pt>0;)Pt--,yr=Math.floor(yr/2),Fr=Math.floor(Fr/2),st=this.tiles[ar(Pt,yr,Fr)];return st&&st.source?(Gt>1&&console.log("found parent tile z%d-%d-%d",Pt,yr,Fr),Gt>1&&console.time("drilling down"),this.splitTile(st.source,Pt,yr,Fr,ve,he,Re),Gt>1&&console.timeEnd("drilling down"),this.tiles[At]?le(this.tiles[At],St):null):null};var wt=function(ve){function he(Re,tt,St,Gt){ve.call(this,Re,tt,St,jt),Gt&&(this.loadGeoJSON=Gt)}return ve&&(he.__proto__=ve),(he.prototype=Object.create(ve&&ve.prototype)).constructor=he,he.prototype.loadData=function(Re,tt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=tt,this._pendingLoadDataParams=Re,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},he.prototype._loadData=function(){var Re=this;if(this._pendingCallback&&this._pendingLoadDataParams){var tt=this._pendingCallback,St=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Gt=!!(St&&St.request&&St.request.collectResourceTiming)&&new b.RequestPerformance(St.request);this.loadGeoJSON(St,function(gr,At){if(gr||!At)return tt(gr);if(typeof At!="object")return tt(new Error("Input data given to '"+St.source+"' is not a valid GeoJSON object."));(function Ft(Mn,ei){var ni,un=Mn&&Mn.type;if(un==="FeatureCollection")for(ni=0;ni<Mn.features.length;ni++)Ft(Mn.features[ni],ei);else if(un==="GeometryCollection")for(ni=0;ni<Mn.geometries.length;ni++)Ft(Mn.geometries[ni],ei);else if(un==="Feature")Ft(Mn.geometry,ei);else if(un==="Polygon")M(Mn.coordinates,ei);else if(un==="MultiPolygon")for(ni=0;ni<Mn.coordinates.length;ni++)M(Mn.coordinates[ni],ei);return Mn})(At,!0);try{if(St.filter){var st=b.createExpression(St.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(st.result==="error")throw new Error(st.value.map(function(Ft){return Ft.key+": "+Ft.message}).join(", "));var Pt=At.features.filter(function(Ft){return st.value.evaluate({zoom:0},Ft)});At={type:"FeatureCollection",features:Pt}}Re._geoJSONIndex=St.cluster?new me(function(Ft){var Mn=Ft.superclusterOptions,ei=Ft.clusterProperties;if(!ei||!Mn)return Mn;for(var ni={},un={},Xn={accumulated:null,zoom:0},Wn={properties:null},Jn=Object.keys(ei),sa=0,vi=Jn;sa<vi.length;sa+=1){var ga=vi[sa],Ra=ei[ga],ya=Ra[0],ja=b.createExpression(Ra[1]),ba=b.createExpression(typeof ya=="string"?[ya,["accumulated"],["get",ga]]:ya);ni[ga]=ja.value,un[ga]=ba.value}return Mn.map=function(gs){Wn.properties=gs;for(var co={},Io=0,oi=Jn;Io<oi.length;Io+=1){var Si=oi[Io];co[Si]=ni[Si].evaluate(Xn,Wn)}return co},Mn.reduce=function(gs,co){Wn.properties=co;for(var Io=0,oi=Jn;Io<oi.length;Io+=1){var Si=oi[Io];Xn.accumulated=gs[Si],gs[Si]=un[Si].evaluate(Xn,Wn)}},Mn}(St)).load(At.features):function(Ft,Mn){return new Ct(Ft,Mn)}(At,St.geojsonVtOptions)}catch(Ft){return tt(Ft)}Re.loaded={};var yr={};if(Gt){var Fr=Gt.finish();Fr&&(yr.resourceTiming={},yr.resourceTiming[St.source]=JSON.parse(JSON.stringify(Fr)))}tt(null,yr)})}},he.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},he.prototype.reloadTile=function(Re,tt){var St=this.loaded;return St&&St[Re.uid]?ve.prototype.reloadTile.call(this,Re,tt):this.loadTile(Re,tt)},he.prototype.loadGeoJSON=function(Re,tt){if(Re.request)b.getJSON(Re.request,tt);else{if(typeof Re.data!="string")return tt(new Error("Input data given to '"+Re.source+"' is not a valid GeoJSON object."));try{return tt(null,JSON.parse(Re.data))}catch(St){return tt(new Error("Input data given to '"+Re.source+"' is not a valid GeoJSON object."))}}},he.prototype.removeSource=function(Re,tt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),tt()},he.prototype.getClusterExpansionZoom=function(Re,tt){try{tt(null,this._geoJSONIndex.getClusterExpansionZoom(Re.clusterId))}catch(St){tt(St)}},he.prototype.getClusterChildren=function(Re,tt){try{tt(null,this._geoJSONIndex.getChildren(Re.clusterId))}catch(St){tt(St)}},he.prototype.getClusterLeaves=function(Re,tt){try{tt(null,this._geoJSONIndex.getLeaves(Re.clusterId,Re.limit,Re.offset))}catch(St){tt(St)}},he}(pe),Mt=function(ve){var he=this;this.self=ve,this.actor=new b.Actor(ve,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:pe,geojson:wt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Re,tt){if(he.workerSourceTypes[Re])throw new Error('Worker source with name "'+Re+'" already registered.');he.workerSourceTypes[Re]=tt},this.self.registerRTLTextPlugin=function(Re){if(b.plugin.isParsed())throw new Error("RTL text plugin already registered.");b.plugin.applyArabicShaping=Re.applyArabicShaping,b.plugin.processBidirectionalText=Re.processBidirectionalText,b.plugin.processStyledBidirectionalText=Re.processStyledBidirectionalText}};return Mt.prototype.setReferrer=function(ve,he){this.referrer=he},Mt.prototype.setImages=function(ve,he,Re){for(var tt in this.availableImages[ve]=he,this.workerSources[ve]){var St=this.workerSources[ve][tt];for(var Gt in St)St[Gt].availableImages=he}Re()},Mt.prototype.setLayers=function(ve,he,Re){this.getLayerIndex(ve).replace(he),Re()},Mt.prototype.updateLayers=function(ve,he,Re){this.getLayerIndex(ve).update(he.layers,he.removedIds),Re()},Mt.prototype.loadTile=function(ve,he,Re){this.getWorkerSource(ve,he.type,he.source).loadTile(he,Re)},Mt.prototype.loadDEMTile=function(ve,he,Re){this.getDEMWorkerSource(ve,he.source).loadTile(he,Re)},Mt.prototype.reloadTile=function(ve,he,Re){this.getWorkerSource(ve,he.type,he.source).reloadTile(he,Re)},Mt.prototype.abortTile=function(ve,he,Re){this.getWorkerSource(ve,he.type,he.source).abortTile(he,Re)},Mt.prototype.removeTile=function(ve,he,Re){this.getWorkerSource(ve,he.type,he.source).removeTile(he,Re)},Mt.prototype.removeDEMTile=function(ve,he){this.getDEMWorkerSource(ve,he.source).removeTile(he)},Mt.prototype.removeSource=function(ve,he,Re){if(this.workerSources[ve]&&this.workerSources[ve][he.type]&&this.workerSources[ve][he.type][he.source]){var tt=this.workerSources[ve][he.type][he.source];delete this.workerSources[ve][he.type][he.source],tt.removeSource!==void 0?tt.removeSource(he,Re):Re()}},Mt.prototype.loadWorkerSource=function(ve,he,Re){try{this.self.importScripts(he.url),Re()}catch(tt){Re(tt.toString())}},Mt.prototype.syncRTLPluginState=function(ve,he,Re){try{b.plugin.setState(he);var tt=b.plugin.getPluginURL();if(b.plugin.isLoaded()&&!b.plugin.isParsed()&&tt!=null){this.self.importScripts(tt);var St=b.plugin.isParsed();Re(St?void 0:new Error("RTL Text Plugin failed to import scripts from "+tt),St)}}catch(Gt){Re(Gt.toString())}},Mt.prototype.getAvailableImages=function(ve){var he=this.availableImages[ve];return he||(he=[]),he},Mt.prototype.getLayerIndex=function(ve){var he=this.layerIndexes[ve];return he||(he=this.layerIndexes[ve]=new q),he},Mt.prototype.getWorkerSource=function(ve,he,Re){var tt=this;return this.workerSources[ve]||(this.workerSources[ve]={}),this.workerSources[ve][he]||(this.workerSources[ve][he]={}),this.workerSources[ve][he][Re]||(this.workerSources[ve][he][Re]=new this.workerSourceTypes[he]({send:function(St,Gt,gr){tt.actor.send(St,Gt,gr,ve)}},this.getLayerIndex(ve),this.getAvailableImages(ve))),this.workerSources[ve][he][Re]},Mt.prototype.getDEMWorkerSource=function(ve,he){return this.demWorkerSources[ve]||(this.demWorkerSources[ve]={}),this.demWorkerSources[ve][he]||(this.demWorkerSources[ve][he]=new J),this.demWorkerSources[ve][he]},Mt.prototype.enforceCacheSizeLimit=function(ve,he){b.enforceCacheSizeLimit(he)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Mt(self)),Mt}),K(["./shared"],function(b){"use strict";var G=b.createCommonjsModule(function(S){function T(Z){return!C(Z)}function C(Z){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ae,Me,ot=new Blob([""],{type:"text/javascript"}),bt=URL.createObjectURL(ot);try{Me=new Worker(bt),ae=!0}catch(Vt){ae=!1}return Me&&Me.terminate(),URL.revokeObjectURL(bt),ae}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ae=document.createElement("canvas");ae.width=ae.height=1;var Me=ae.getContext("2d");if(!Me)return!1;var ot=Me.getImageData(0,0,1,1);return ot&&ot.width===ae.width}()?(I[ee=Z&&Z.failIfMajorPerformanceCaveat]===void 0&&(I[ee]=function(ae){var Me=function(bt){var Vt=document.createElement("canvas"),Wt=Object.create(T.webGLContextAttributes);return Wt.failIfMajorPerformanceCaveat=bt,Vt.probablySupportsContext?Vt.probablySupportsContext("webgl",Wt)||Vt.probablySupportsContext("experimental-webgl",Wt):Vt.supportsContext?Vt.supportsContext("webgl",Wt)||Vt.supportsContext("experimental-webgl",Wt):Vt.getContext("webgl",Wt)||Vt.getContext("experimental-webgl",Wt)}(ae);if(!Me)return!1;var ot=Me.createShader(Me.VERTEX_SHADER);return!(!ot||Me.isContextLost())&&(Me.shaderSource(ot,"void main() {}"),Me.compileShader(ot),Me.getShaderParameter(ot,Me.COMPILE_STATUS)===!0)}(ee)),I[ee]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ee}S.exports?S.exports=T:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=T,window.mapboxgl.notSupportedReason=C);var I={};T.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),j={create:function(S,T,C){var I=b.window.document.createElement(S);return T!==void 0&&(I.className=T),C&&C.appendChild(I),I},createNS:function(S,T){return b.window.document.createElementNS(S,T)}},q=b.window.document&&b.window.document.documentElement.style;function Q(S){if(!q)return S[0];for(var T=0;T<S.length;T++)if(S[T]in q)return S[T];return S[0]}var ie,te=Q(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);j.disableDrag=function(){q&&te&&(ie=q[te],q[te]="none")},j.enableDrag=function(){q&&te&&(q[te]=ie)};var Ce=Q(["transform","WebkitTransform"]);j.setTransform=function(S,T){S.style[Ce]=T};var pe=!1;try{var fe=Object.defineProperty({},"passive",{get:function(){pe=!0}});b.window.addEventListener("test",fe,fe),b.window.removeEventListener("test",fe,fe)}catch(S){pe=!1}j.addEventListener=function(S,T,C,I){I===void 0&&(I={}),S.addEventListener(T,C,"passive"in I&&pe?I:I.capture)},j.removeEventListener=function(S,T,C,I){I===void 0&&(I={}),S.removeEventListener(T,C,"passive"in I&&pe?I:I.capture)};var J=function(S){S.preventDefault(),S.stopPropagation(),b.window.removeEventListener("click",J,!0)};function M(S){var T=S.userImage;return!!(T&&T.render&&T.render())&&(S.data.replace(new Uint8Array(T.data.buffer)),!0)}j.suppressClick=function(){b.window.addEventListener("click",J,!0),b.window.setTimeout(function(){b.window.removeEventListener("click",J,!0)},0)},j.mousePos=function(S,T){var C=S.getBoundingClientRect();return new b.Point(T.clientX-C.left-S.clientLeft,T.clientY-C.top-S.clientTop)},j.touchPos=function(S,T){for(var C=S.getBoundingClientRect(),I=[],Z=0;Z<T.length;Z++)I.push(new b.Point(T[Z].clientX-C.left-S.clientLeft,T[Z].clientY-C.top-S.clientTop));return I},j.mouseButton=function(S){return b.window.InstallTrigger!==void 0&&S.button===2&&S.ctrlKey&&b.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:S.button},j.remove=function(S){S.parentNode&&S.parentNode.removeChild(S)};var E=function(S){function T(){S.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new b.RGBAImage({width:1,height:1}),this.dirty=!0}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.isLoaded=function(){return this.loaded},T.prototype.setLoaded=function(C){if(this.loaded!==C&&(this.loaded=C,C)){for(var I=0,Z=this.requestors;I<Z.length;I+=1){var ee=Z[I];this._notify(ee.ids,ee.callback)}this.requestors=[]}},T.prototype.getImage=function(C){return this.images[C]},T.prototype.addImage=function(C,I){this._validate(C,I)&&(this.images[C]=I)},T.prototype._validate=function(C,I){var Z=!0;return this._validateStretch(I.stretchX,I.data&&I.data.width)||(this.fire(new b.ErrorEvent(new Error('Image "'+C+'" has invalid "stretchX" value'))),Z=!1),this._validateStretch(I.stretchY,I.data&&I.data.height)||(this.fire(new b.ErrorEvent(new Error('Image "'+C+'" has invalid "stretchY" value'))),Z=!1),this._validateContent(I.content,I)||(this.fire(new b.ErrorEvent(new Error('Image "'+C+'" has invalid "content" value'))),Z=!1),Z},T.prototype._validateStretch=function(C,I){if(!C)return!0;for(var Z=0,ee=0,ae=C;ee<ae.length;ee+=1){var Me=ae[ee];if(Me[0]<Z||Me[1]<Me[0]||I<Me[1])return!1;Z=Me[1]}return!0},T.prototype._validateContent=function(C,I){return!(C&&(C.length!==4||C[0]<0||I.data.width<C[0]||C[1]<0||I.data.height<C[1]||C[2]<0||I.data.width<C[2]||C[3]<0||I.data.height<C[3]||C[2]<C[0]||C[3]<C[1]))},T.prototype.updateImage=function(C,I){I.version=this.images[C].version+1,this.images[C]=I,this.updatedImages[C]=!0},T.prototype.removeImage=function(C){var I=this.images[C];delete this.images[C],delete this.patterns[C],I.userImage&&I.userImage.onRemove&&I.userImage.onRemove()},T.prototype.listImages=function(){return Object.keys(this.images)},T.prototype.getImages=function(C,I){var Z=!0;if(!this.isLoaded())for(var ee=0,ae=C;ee<ae.length;ee+=1)this.images[ae[ee]]||(Z=!1);this.isLoaded()||Z?this._notify(C,I):this.requestors.push({ids:C,callback:I})},T.prototype._notify=function(C,I){for(var Z={},ee=0,ae=C;ee<ae.length;ee+=1){var Me=ae[ee];this.images[Me]||this.fire(new b.Event("styleimagemissing",{id:Me}));var ot=this.images[Me];ot?Z[Me]={data:ot.data.clone(),pixelRatio:ot.pixelRatio,sdf:ot.sdf,version:ot.version,stretchX:ot.stretchX,stretchY:ot.stretchY,content:ot.content,hasRenderCallback:!!(ot.userImage&&ot.userImage.render)}:b.warnOnce('Image "'+Me+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}I(null,Z)},T.prototype.getPixelSize=function(){var C=this.atlasImage;return{width:C.width,height:C.height}},T.prototype.getPattern=function(C){var I=this.patterns[C],Z=this.getImage(C);if(!Z)return null;if(I&&I.position.version===Z.version)return I.position;if(I)I.position.version=Z.version;else{var ee={w:Z.data.width+2,h:Z.data.height+2,x:0,y:0},ae=new b.ImagePosition(ee,Z);this.patterns[C]={bin:ee,position:ae}}return this._updatePatternAtlas(),this.patterns[C].position},T.prototype.bind=function(C){var I=C.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new b.Texture(C,this.atlasImage,I.RGBA),this.atlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)},T.prototype._updatePatternAtlas=function(){var C=[];for(var I in this.patterns)C.push(this.patterns[I].bin);var Z=b.potpack(C),ee=Z.w,ae=Z.h,Me=this.atlasImage;for(var ot in Me.resize({width:ee||1,height:ae||1}),this.patterns){var bt=this.patterns[ot].bin,Vt=bt.x+1,Wt=bt.y+1,$t=this.images[ot].data,vr=$t.width,hr=$t.height;b.RGBAImage.copy($t,Me,{x:0,y:0},{x:Vt,y:Wt},{width:vr,height:hr}),b.RGBAImage.copy($t,Me,{x:0,y:hr-1},{x:Vt,y:Wt-1},{width:vr,height:1}),b.RGBAImage.copy($t,Me,{x:0,y:0},{x:Vt,y:Wt+hr},{width:vr,height:1}),b.RGBAImage.copy($t,Me,{x:vr-1,y:0},{x:Vt-1,y:Wt},{width:1,height:hr}),b.RGBAImage.copy($t,Me,{x:0,y:0},{x:Vt+vr,y:Wt},{width:1,height:hr})}this.dirty=!0},T.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},T.prototype.dispatchRenderCallbacks=function(C){for(var I=0,Z=C;I<Z.length;I+=1){var ee=Z[I];if(!this.callbackDispatchedThisFrame[ee]){this.callbackDispatchedThisFrame[ee]=!0;var ae=this.images[ee];M(ae)&&this.updateImage(ee,ae)}}},T}(b.Evented),ge=De,Se=De,ze=1e20;function De(S,T,C,I,Z,ee){this.fontSize=S||24,this.buffer=T===void 0?3:T,this.cutoff=I||.25,this.fontFamily=Z||"sans-serif",this.fontWeight=ee||"normal",this.radius=C||8;var ae=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ae,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ae*ae),this.gridInner=new Float64Array(ae*ae),this.f=new Float64Array(ae),this.d=new Float64Array(ae),this.z=new Float64Array(ae+1),this.v=new Int16Array(ae),this.middle=Math.round(ae/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ue(S,T,C,I,Z,ee,ae){for(var Me=0;Me<T;Me++){for(var ot=0;ot<C;ot++)I[ot]=S[ot*T+Me];for(at(I,Z,ee,ae,C),ot=0;ot<C;ot++)S[ot*T+Me]=Z[ot]}for(ot=0;ot<C;ot++){for(Me=0;Me<T;Me++)I[Me]=S[ot*T+Me];for(at(I,Z,ee,ae,T),Me=0;Me<T;Me++)S[ot*T+Me]=Math.sqrt(Z[Me])}}function at(S,T,C,I,Z){C[0]=0,I[0]=-ze,I[1]=+ze;for(var ee=1,ae=0;ee<Z;ee++){for(var Me=(S[ee]+ee*ee-(S[C[ae]]+C[ae]*C[ae]))/(2*ee-2*C[ae]);Me<=I[ae];)ae--,Me=(S[ee]+ee*ee-(S[C[ae]]+C[ae]*C[ae]))/(2*ee-2*C[ae]);C[++ae]=ee,I[ae]=Me,I[ae+1]=+ze}for(ee=0,ae=0;ee<Z;ee++){for(;I[ae+1]<ee;)ae++;T[ee]=(ee-C[ae])*(ee-C[ae])+S[C[ae]]}}De.prototype.draw=function(S){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(S,this.buffer,this.middle);for(var T=this.ctx.getImageData(0,0,this.size,this.size),C=new Uint8ClampedArray(this.size*this.size),I=0;I<this.size*this.size;I++){var Z=T.data[4*I+3]/255;this.gridOuter[I]=Z===1?0:Z===0?ze:Math.pow(Math.max(0,.5-Z),2),this.gridInner[I]=Z===1?ze:Z===0?0:Math.pow(Math.max(0,Z-.5),2)}for(Ue(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ue(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),I=0;I<this.size*this.size;I++)C[I]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[I]-this.gridInner[I])/this.radius+this.cutoff))));return C},ge.default=Se;var Je=function(S,T){this.requestManager=S,this.localIdeographFontFamily=T,this.entries={}};Je.prototype.setURL=function(S){this.url=S},Je.prototype.getGlyphs=function(S,T){var C=this,I=[];for(var Z in S)for(var ee=0,ae=S[Z];ee<ae.length;ee+=1)I.push({stack:Z,id:ae[ee]});b.asyncAll(I,function(Me,ot){var bt=Me.stack,Vt=Me.id,Wt=C.entries[bt];Wt||(Wt=C.entries[bt]={glyphs:{},requests:{},ranges:{}});var $t=Wt.glyphs[Vt];if($t===void 0){if($t=C._tinySDF(Wt,bt,Vt))return Wt.glyphs[Vt]=$t,void ot(null,{stack:bt,id:Vt,glyph:$t});var vr=Math.floor(Vt/256);if(256*vr>65535)ot(new Error("glyphs > 65535 not supported"));else if(Wt.ranges[vr])ot(null,{stack:bt,id:Vt,glyph:$t});else{var hr=Wt.requests[vr];hr||(hr=Wt.requests[vr]=[],Je.loadGlyphRange(bt,vr,C.url,C.requestManager,function(Ir,lr){if(lr){for(var Pr in lr)C._doesCharSupportLocalGlyph(+Pr)||(Wt.glyphs[+Pr]=lr[+Pr]);Wt.ranges[vr]=!0}for(var jr=0,tn=hr;jr<tn.length;jr+=1)(0,tn[jr])(Ir,lr);delete Wt.requests[vr]})),hr.push(function(Ir,lr){Ir?ot(Ir):lr&&ot(null,{stack:bt,id:Vt,glyph:lr[Vt]||null})})}}else ot(null,{stack:bt,id:Vt,glyph:$t})},function(Me,ot){if(Me)T(Me);else if(ot){for(var bt={},Vt=0,Wt=ot;Vt<Wt.length;Vt+=1){var $t=Wt[Vt],vr=$t.stack,hr=$t.id,Ir=$t.glyph;(bt[vr]||(bt[vr]={}))[hr]=Ir&&{id:Ir.id,bitmap:Ir.bitmap.clone(),metrics:Ir.metrics}}T(null,bt)}})},Je.prototype._doesCharSupportLocalGlyph=function(S){return!!this.localIdeographFontFamily&&(b.isChar["CJK Unified Ideographs"](S)||b.isChar["Hangul Syllables"](S)||b.isChar.Hiragana(S)||b.isChar.Katakana(S))},Je.prototype._tinySDF=function(S,T,C){var I=this.localIdeographFontFamily;if(I&&this._doesCharSupportLocalGlyph(C)){var Z=S.tinySDF;if(!Z){var ee="400";/bold/i.test(T)?ee="900":/medium/i.test(T)?ee="500":/light/i.test(T)&&(ee="200"),Z=S.tinySDF=new Je.TinySDF(24,3,8,.25,I,ee)}return{id:C,bitmap:new b.AlphaImage({width:30,height:30},Z.draw(String.fromCharCode(C))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Je.loadGlyphRange=function(S,T,C,I,Z){var ee=256*T,ae=ee+255,Me=I.transformRequest(I.normalizeGlyphsURL(C).replace("{fontstack}",S).replace("{range}",ee+"-"+ae),b.ResourceType.Glyphs);b.getArrayBuffer(Me,function(ot,bt){if(ot)Z(ot);else if(bt){for(var Vt={},Wt=0,$t=b.parseGlyphPBF(bt);Wt<$t.length;Wt+=1){var vr=$t[Wt];Vt[vr.id]=vr}Z(null,Vt)}})},Je.TinySDF=ge;var Ze=function(){this.specification=b.styleSpec.light.position};Ze.prototype.possiblyEvaluate=function(S,T){return b.sphericalToCartesian(S.expression.evaluate(T))},Ze.prototype.interpolate=function(S,T,C){return{x:b.number(S.x,T.x,C),y:b.number(S.y,T.y,C),z:b.number(S.z,T.z,C)}};var xe=new b.Properties({anchor:new b.DataConstantProperty(b.styleSpec.light.anchor),position:new Ze,color:new b.DataConstantProperty(b.styleSpec.light.color),intensity:new b.DataConstantProperty(b.styleSpec.light.intensity)}),_e=function(S){function T(C){S.call(this),this._transitionable=new b.Transitionable(xe),this.setLight(C),this._transitioning=this._transitionable.untransitioned()}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getLight=function(){return this._transitionable.serialize()},T.prototype.setLight=function(C,I){if(I===void 0&&(I={}),!this._validate(b.validateLight,C,I))for(var Z in C){var ee=C[Z];b.endsWith(Z,"-transition")?this._transitionable.setTransition(Z.slice(0,-11),ee):this._transitionable.setValue(Z,ee)}},T.prototype.updateTransitions=function(C){this._transitioning=this._transitionable.transitioned(C,this._transitioning)},T.prototype.hasTransition=function(){return this._transitioning.hasTransition()},T.prototype.recalculate=function(C){this.properties=this._transitioning.possiblyEvaluate(C)},T.prototype._validate=function(C,I,Z){return(!Z||Z.validate!==!1)&&b.emitValidationErrors(this,C.call(b.validateStyle,b.extend({value:I,style:{glyphs:!0,sprite:!0},styleSpec:b.styleSpec})))},T}(b.Evented),He=function(S,T){this.width=S,this.height=T,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};He.prototype.getDash=function(S,T){var C=S.join(",")+String(T);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(S,T)),this.dashEntry[C]},He.prototype.getDashRanges=function(S,T,C){var I=[],Z=S.length%2==1?-S[S.length-1]*C:0,ee=S[0]*C,ae=!0;I.push({left:Z,right:ee,isDash:ae,zeroLength:S[0]===0});for(var Me=S[0],ot=1;ot<S.length;ot++){var bt=S[ot];I.push({left:Z=Me*C,right:ee=(Me+=bt)*C,isDash:ae=!ae,zeroLength:bt===0})}return I},He.prototype.addRoundDash=function(S,T,C){for(var I=T/2,Z=-C;Z<=C;Z++)for(var ee=this.width*(this.nextRow+C+Z),ae=0,Me=S[ae],ot=0;ot<this.width;ot++){ot/Me.right>1&&(Me=S[++ae]);var bt=Math.abs(ot-Me.left),Vt=Math.abs(ot-Me.right),Wt=Math.min(bt,Vt),$t=void 0,vr=Z/C*(I+1);if(Me.isDash){var hr=I-Math.abs(vr);$t=Math.sqrt(Wt*Wt+hr*hr)}else $t=I-Math.sqrt(Wt*Wt+vr*vr);this.data[ee+ot]=Math.max(0,Math.min(255,$t+128))}},He.prototype.addRegularDash=function(S){for(var T=S.length-1;T>=0;--T){var C=S[T],I=S[T+1];C.zeroLength?S.splice(T,1):I&&I.isDash===C.isDash&&(I.left=C.left,S.splice(T,1))}var Z=S[0],ee=S[S.length-1];Z.isDash===ee.isDash&&(Z.left=ee.left-this.width,ee.right=Z.right+this.width);for(var ae=this.width*this.nextRow,Me=0,ot=S[Me],bt=0;bt<this.width;bt++){bt/ot.right>1&&(ot=S[++Me]);var Vt=Math.abs(bt-ot.left),Wt=Math.abs(bt-ot.right),$t=Math.min(Vt,Wt);this.data[ae+bt]=Math.max(0,Math.min(255,(ot.isDash?$t:-$t)+128))}},He.prototype.addDash=function(S,T){var C=T?7:0,I=2*C+1;if(this.nextRow+I>this.height)return b.warnOnce("LineAtlas out of space"),null;for(var Z=0,ee=0;ee<S.length;ee++)Z+=S[ee];if(Z!==0){var ae=this.width/Z,Me=this.getDashRanges(S,this.width,ae);T?this.addRoundDash(Me,ae,C):this.addRegularDash(Me)}var ot={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:Z};return this.nextRow+=I,this.dirty=!0,ot},He.prototype.bind=function(S){var T=S.gl;this.texture?(T.bindTexture(T.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,T.texSubImage2D(T.TEXTURE_2D,0,0,0,this.width,this.height,T.ALPHA,T.UNSIGNED_BYTE,this.data))):(this.texture=T.createTexture(),T.bindTexture(T.TEXTURE_2D,this.texture),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.REPEAT),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.REPEAT),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR),T.texImage2D(T.TEXTURE_2D,0,T.ALPHA,this.width,this.height,0,T.ALPHA,T.UNSIGNED_BYTE,this.data))};var Ke=function S(T,C){this.workerPool=T,this.actors=[],this.currentActor=0,this.id=b.uniqueId();for(var I=this.workerPool.acquire(this.id),Z=0;Z<I.length;Z++){var ee=new S.Actor(I[Z],C,this.id);ee.name="Worker "+Z,this.actors.push(ee)}};function Et(S,T,C){var I=function(Z,ee){if(Z)return C(Z);if(ee){var ae=b.pick(b.extend(ee,S),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ee.vector_layers&&(ae.vectorLayers=ee.vector_layers,ae.vectorLayerIds=ae.vectorLayers.map(function(Me){return Me.id})),ae.tiles=T.canonicalizeTileset(ae,S.url),C(null,ae)}};return S.url?b.getJSON(T.transformRequest(T.normalizeSourceURL(S.url),b.ResourceType.Source),I):b.browser.frame(function(){return I(null,S)})}Ke.prototype.broadcast=function(S,T,C){b.asyncAll(this.actors,function(I,Z){I.send(S,T,Z)},C=C||function(){})},Ke.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ke.prototype.remove=function(){this.actors.forEach(function(S){S.remove()}),this.actors=[],this.workerPool.release(this.id)},Ke.Actor=b.Actor;var ke=function(S,T,C){this.bounds=b.LngLatBounds.convert(this.validateBounds(S)),this.minzoom=T||0,this.maxzoom=C||24};ke.prototype.validateBounds=function(S){return Array.isArray(S)&&S.length===4?[Math.max(-180,S[0]),Math.max(-90,S[1]),Math.min(180,S[2]),Math.min(90,S[3])]:[-180,-90,180,90]},ke.prototype.contains=function(S){var T=Math.pow(2,S.z),C=Math.floor(b.mercatorXfromLng(this.bounds.getWest())*T),I=Math.floor(b.mercatorYfromLat(this.bounds.getNorth())*T),Z=Math.ceil(b.mercatorXfromLng(this.bounds.getEast())*T),ee=Math.ceil(b.mercatorYfromLat(this.bounds.getSouth())*T);return S.x>=C&&S.x<Z&&S.y>=I&&S.y<ee};var qe=function(S){function T(C,I,Z,ee){if(S.call(this),this.id=C,this.dispatcher=Z,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,b.extend(this,b.pick(I,["url","scheme","tileSize","promoteId"])),this._options=b.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ee)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.load=function(){var C=this;this._loaded=!1,this.fire(new b.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Et(this._options,this.map._requestManager,function(I,Z){C._tileJSONRequest=null,C._loaded=!0,I?C.fire(new b.ErrorEvent(I)):Z&&(b.extend(C,Z),Z.bounds&&(C.tileBounds=new ke(Z.bounds,C.minzoom,C.maxzoom)),b.postTurnstileEvent(Z.tiles,C.map._requestManager._customAccessToken),b.postMapLoadEvent(Z.tiles,C.map._getMapId(),C.map._requestManager._skuToken,C.map._requestManager._customAccessToken),C.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})),C.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})))})},T.prototype.loaded=function(){return this._loaded},T.prototype.hasTile=function(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)},T.prototype.onAdd=function(C){this.map=C,this.load()},T.prototype.setSourceProperty=function(C){this._tileJSONRequest&&this._tileJSONRequest.cancel(),C(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},T.prototype.setTiles=function(C){var I=this;return this.setSourceProperty(function(){I._options.tiles=C}),this},T.prototype.setUrl=function(C){var I=this;return this.setSourceProperty(function(){I.url=C,I._options.url=C}),this},T.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},T.prototype.serialize=function(){return b.extend({},this._options)},T.prototype.loadTile=function(C,I){var Z=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme)),ee={request:this.map._requestManager.transformRequest(Z,b.ResourceType.Tile),uid:C.uid,tileID:C.tileID,zoom:C.tileID.overscaledZ,tileSize:this.tileSize*C.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:b.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ae(Me,ot){return delete C.request,C.aborted?I(null):Me&&Me.status!==404?I(Me):(ot&&ot.resourceTiming&&(C.resourceTiming=ot.resourceTiming),this.map._refreshExpiredTiles&&ot&&C.setExpiryData(ot),C.loadVectorData(ot,this.map.painter),b.cacheEntryPossiblyAdded(this.dispatcher),I(null),void(C.reloadCallback&&(this.loadTile(C,C.reloadCallback),C.reloadCallback=null)))}ee.request.collectResourceTiming=this._collectResourceTiming,C.actor&&C.state!=="expired"?C.state==="loading"?C.reloadCallback=I:C.request=C.actor.send("reloadTile",ee,ae.bind(this)):(C.actor=this.dispatcher.getActor(),C.request=C.actor.send("loadTile",ee,ae.bind(this)))},T.prototype.abortTile=function(C){C.request&&(C.request.cancel(),delete C.request),C.actor&&C.actor.send("abortTile",{uid:C.uid,type:this.type,source:this.id},void 0)},T.prototype.unloadTile=function(C){C.unloadVectorData(),C.actor&&C.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id},void 0)},T.prototype.hasTransition=function(){return!1},T}(b.Evented),ne=function(S){function T(C,I,Z,ee){S.call(this),this.id=C,this.dispatcher=Z,this.setEventedParent(ee),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=b.extend({type:"raster"},I),b.extend(this,b.pick(I,["url","scheme","tileSize"]))}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.load=function(){var C=this;this._loaded=!1,this.fire(new b.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Et(this._options,this.map._requestManager,function(I,Z){C._tileJSONRequest=null,C._loaded=!0,I?C.fire(new b.ErrorEvent(I)):Z&&(b.extend(C,Z),Z.bounds&&(C.tileBounds=new ke(Z.bounds,C.minzoom,C.maxzoom)),b.postTurnstileEvent(Z.tiles),b.postMapLoadEvent(Z.tiles,C.map._getMapId(),C.map._requestManager._skuToken),C.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})),C.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})))})},T.prototype.loaded=function(){return this._loaded},T.prototype.onAdd=function(C){this.map=C,this.load()},T.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},T.prototype.serialize=function(){return b.extend({},this._options)},T.prototype.hasTile=function(C){return!this.tileBounds||this.tileBounds.contains(C.canonical)},T.prototype.loadTile=function(C,I){var Z=this,ee=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);C.request=b.getImage(this.map._requestManager.transformRequest(ee,b.ResourceType.Tile),function(ae,Me){if(delete C.request,C.aborted)C.state="unloaded",I(null);else if(ae)C.state="errored",I(ae);else if(Me){Z.map._refreshExpiredTiles&&C.setExpiryData(Me),delete Me.cacheControl,delete Me.expires;var ot=Z.map.painter.context,bt=ot.gl;C.texture=Z.map.painter.getTileTexture(Me.width),C.texture?C.texture.update(Me,{useMipmap:!0}):(C.texture=new b.Texture(ot,Me,bt.RGBA,{useMipmap:!0}),C.texture.bind(bt.LINEAR,bt.CLAMP_TO_EDGE,bt.LINEAR_MIPMAP_NEAREST),ot.extTextureFilterAnisotropic&&bt.texParameterf(bt.TEXTURE_2D,ot.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ot.extTextureFilterAnisotropicMax)),C.state="loaded",b.cacheEntryPossiblyAdded(Z.dispatcher),I(null)}})},T.prototype.abortTile=function(C,I){C.request&&(C.request.cancel(),delete C.request),I()},T.prototype.unloadTile=function(C,I){C.texture&&this.map.painter.saveTileTexture(C.texture),I()},T.prototype.hasTransition=function(){return!1},T}(b.Evented),Ge=function(S){function T(C,I,Z,ee){S.call(this,C,I,Z,ee),this.type="raster-dem",this.maxzoom=22,this._options=b.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},T.prototype.loadTile=function(C,I){var Z=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ee(ae,Me){ae&&(C.state="errored",I(ae)),Me&&(C.dem=Me,C.needsHillshadePrepare=!0,C.state="loaded",I(null))}C.request=b.getImage(this.map._requestManager.transformRequest(Z,b.ResourceType.Tile),function(ae,Me){if(delete C.request,C.aborted)C.state="unloaded",I(null);else if(ae)C.state="errored",I(ae);else if(Me){this.map._refreshExpiredTiles&&C.setExpiryData(Me),delete Me.cacheControl,delete Me.expires;var ot=b.window.ImageBitmap&&Me instanceof b.window.ImageBitmap&&b.offscreenCanvasSupported()?Me:b.browser.getImageData(Me,1),bt={uid:C.uid,coord:C.tileID,source:this.id,rawImageData:ot,encoding:this.encoding};C.actor&&C.state!=="expired"||(C.actor=this.dispatcher.getActor(),C.actor.send("loadDEMTile",bt,ee.bind(this)))}}.bind(this)),C.neighboringTiles=this._getNeighboringTiles(C.tileID)},T.prototype._getNeighboringTiles=function(C){var I=C.canonical,Z=Math.pow(2,I.z),ee=(I.x-1+Z)%Z,ae=I.x===0?C.wrap-1:C.wrap,Me=(I.x+1+Z)%Z,ot=I.x+1===Z?C.wrap+1:C.wrap,bt={};return bt[new b.OverscaledTileID(C.overscaledZ,ae,I.z,ee,I.y).key]={backfilled:!1},bt[new b.OverscaledTileID(C.overscaledZ,ot,I.z,Me,I.y).key]={backfilled:!1},I.y>0&&(bt[new b.OverscaledTileID(C.overscaledZ,ae,I.z,ee,I.y-1).key]={backfilled:!1},bt[new b.OverscaledTileID(C.overscaledZ,C.wrap,I.z,I.x,I.y-1).key]={backfilled:!1},bt[new b.OverscaledTileID(C.overscaledZ,ot,I.z,Me,I.y-1).key]={backfilled:!1}),I.y+1<Z&&(bt[new b.OverscaledTileID(C.overscaledZ,ae,I.z,ee,I.y+1).key]={backfilled:!1},bt[new b.OverscaledTileID(C.overscaledZ,C.wrap,I.z,I.x,I.y+1).key]={backfilled:!1},bt[new b.OverscaledTileID(C.overscaledZ,ot,I.z,Me,I.y+1).key]={backfilled:!1}),bt},T.prototype.unloadTile=function(C){C.demTexture&&this.map.painter.saveTileTexture(C.demTexture),C.fbo&&(C.fbo.destroy(),delete C.fbo),C.dem&&delete C.dem,delete C.neighboringTiles,C.state="unloaded",C.actor&&C.actor.send("removeDEMTile",{uid:C.uid,source:this.id})},T}(ne),oe=function(S){function T(C,I,Z,ee){S.call(this),this.id=C,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=Z.getActor(),this.setEventedParent(ee),this._data=I.data,this._options=b.extend({},I),this._collectResourceTiming=I.collectResourceTiming,this._resourceTiming=[],I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;var ae=b.EXTENT/this.tileSize;this.workerOptions=b.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*ae,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*ae,extent:b.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?Math.min(I.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:b.EXTENT,radius:(I.clusterRadius||50)*ae,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.load=function(){var C=this;this.fire(new b.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(I){if(I)C.fire(new b.ErrorEvent(I));else{var Z={dataType:"source",sourceDataType:"metadata"};C._collectResourceTiming&&C._resourceTiming&&C._resourceTiming.length>0&&(Z.resourceTiming=C._resourceTiming,C._resourceTiming=[]),C.fire(new b.Event("data",Z))}})},T.prototype.onAdd=function(C){this.map=C,this.load()},T.prototype.setData=function(C){var I=this;return this._data=C,this.fire(new b.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Z){if(Z)I.fire(new b.ErrorEvent(Z));else{var ee={dataType:"source",sourceDataType:"content"};I._collectResourceTiming&&I._resourceTiming&&I._resourceTiming.length>0&&(ee.resourceTiming=I._resourceTiming,I._resourceTiming=[]),I.fire(new b.Event("data",ee))}}),this},T.prototype.getClusterExpansionZoom=function(C,I){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:C,source:this.id},I),this},T.prototype.getClusterChildren=function(C,I){return this.actor.send("geojson.getClusterChildren",{clusterId:C,source:this.id},I),this},T.prototype.getClusterLeaves=function(C,I,Z,ee){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:C,limit:I,offset:Z},ee),this},T.prototype._updateWorkerData=function(C){var I=this;this._loaded=!1;var Z=b.extend({},this.workerOptions),ee=this._data;typeof ee=="string"?(Z.request=this.map._requestManager.transformRequest(b.browser.resolveURL(ee),b.ResourceType.Source),Z.request.collectResourceTiming=this._collectResourceTiming):Z.data=JSON.stringify(ee),this.actor.send(this.type+".loadData",Z,function(ae,Me){I._removed||Me&&Me.abandoned||(I._loaded=!0,Me&&Me.resourceTiming&&Me.resourceTiming[I.id]&&(I._resourceTiming=Me.resourceTiming[I.id].slice(0)),I.actor.send(I.type+".coalesce",{source:Z.source},null),C(ae))})},T.prototype.loaded=function(){return this._loaded},T.prototype.loadTile=function(C,I){var Z=this,ee=C.actor?"reloadTile":"loadTile";C.actor=this.actor,C.request=this.actor.send(ee,{type:this.type,uid:C.uid,tileID:C.tileID,zoom:C.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:b.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ae,Me){return delete C.request,C.unloadVectorData(),C.aborted?I(null):ae?I(ae):(C.loadVectorData(Me,Z.map.painter,ee==="reloadTile"),I(null))})},T.prototype.abortTile=function(C){C.request&&(C.request.cancel(),delete C.request),C.aborted=!0},T.prototype.unloadTile=function(C){C.unloadVectorData(),this.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id})},T.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},T.prototype.serialize=function(){return b.extend({},this._options,{type:this.type,data:this._data})},T.prototype.hasTransition=function(){return!1},T}(b.Evented),Fe=b.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ut=function(S){function T(C,I,Z,ee){S.call(this),this.id=C,this.dispatcher=Z,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ee),this.options=I}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.load=function(C,I){var Z=this;this._loaded=!1,this.fire(new b.Event("dataloading",{dataType:"source"})),this.url=this.options.url,b.getImage(this.map._requestManager.transformRequest(this.url,b.ResourceType.Image),function(ee,ae){Z._loaded=!0,ee?Z.fire(new b.ErrorEvent(ee)):ae&&(Z.image=ae,C&&(Z.coordinates=C),I&&I(),Z._finishLoading())})},T.prototype.loaded=function(){return this._loaded},T.prototype.updateImage=function(C){var I=this;return this.image&&C.url?(this.options.url=C.url,this.load(C.coordinates,function(){I.texture=null}),this):this},T.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})))},T.prototype.onAdd=function(C){this.map=C,this.load()},T.prototype.setCoordinates=function(C){var I=this;this.coordinates=C;var Z=C.map(b.MercatorCoordinate.fromLngLat);this.tileID=function(ae){for(var Me=1/0,ot=1/0,bt=-1/0,Vt=-1/0,Wt=0,$t=ae;Wt<$t.length;Wt+=1){var vr=$t[Wt];Me=Math.min(Me,vr.x),ot=Math.min(ot,vr.y),bt=Math.max(bt,vr.x),Vt=Math.max(Vt,vr.y)}var hr=Math.max(bt-Me,Vt-ot),Ir=Math.max(0,Math.floor(-Math.log(hr)/Math.LN2)),lr=Math.pow(2,Ir);return new b.CanonicalTileID(Ir,Math.floor((Me+bt)/2*lr),Math.floor((ot+Vt)/2*lr))}(Z),this.minzoom=this.maxzoom=this.tileID.z;var ee=Z.map(function(ae){return I.tileID.getTilePoint(ae)._round()});return this._boundsArray=new b.StructArrayLayout4i8,this._boundsArray.emplaceBack(ee[0].x,ee[0].y,0,0),this._boundsArray.emplaceBack(ee[1].x,ee[1].y,b.EXTENT,0),this._boundsArray.emplaceBack(ee[3].x,ee[3].y,0,b.EXTENT),this._boundsArray.emplaceBack(ee[2].x,ee[2].y,b.EXTENT,b.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})),this},T.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var C=this.map.painter.context,I=C.gl;for(var Z in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new b.Texture(C,this.image,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var ee=this.tiles[Z];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},T.prototype.loadTile=function(C,I){this.tileID&&this.tileID.equals(C.tileID.canonical)?(this.tiles[String(C.tileID.wrap)]=C,C.buckets={},I(null)):(C.state="errored",I(null))},T.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},T.prototype.hasTransition=function(){return!1},T}(b.Evented),Ae=function(S){function T(C,I,Z,ee){S.call(this,C,I,Z,ee),this.roundZoom=!0,this.type="video",this.options=I}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.load=function(){var C=this;this._loaded=!1;var I=this.options;this.urls=[];for(var Z=0,ee=I.urls;Z<ee.length;Z+=1)this.urls.push(this.map._requestManager.transformRequest(ee[Z],b.ResourceType.Source).url);b.getVideo(this.urls,function(ae,Me){C._loaded=!0,ae?C.fire(new b.ErrorEvent(ae)):Me&&(C.video=Me,C.video.loop=!0,C.video.setAttribute("playsinline",""),C.video.addEventListener("playing",function(){C.map.triggerRepaint()}),C.map&&C.video.play(),C._finishLoading())})},T.prototype.pause=function(){this.video&&this.video.pause()},T.prototype.play=function(){this.video&&this.video.play()},T.prototype.seek=function(C){if(this.video){var I=this.video.seekable;C<I.start(0)||C>I.end(0)?this.fire(new b.ErrorEvent(new b.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+I.start(0)+" and "+I.end(0)+"-second mark."))):this.video.currentTime=C}},T.prototype.getVideo=function(){return this.video},T.prototype.onAdd=function(C){this.map||(this.map=C,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},T.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var C=this.map.painter.context,I=C.gl;for(var Z in this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE),I.texSubImage2D(I.TEXTURE_2D,0,0,0,I.RGBA,I.UNSIGNED_BYTE,this.video)):(this.texture=new b.Texture(C,this.video,I.RGBA),this.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE)),this.tiles){var ee=this.tiles[Z];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},T.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},T.prototype.hasTransition=function(){return this.video&&!this.video.paused},T}(ut),Le=function(S){function T(C,I,Z,ee){S.call(this,C,I,Z,ee),I.coordinates?Array.isArray(I.coordinates)&&I.coordinates.length===4&&!I.coordinates.some(function(ae){return!Array.isArray(ae)||ae.length!==2||ae.some(function(Me){return typeof Me!="number"})})||this.fire(new b.ErrorEvent(new b.ValidationError("sources."+C,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new b.ErrorEvent(new b.ValidationError("sources."+C,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new b.ErrorEvent(new b.ValidationError("sources."+C,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas=="string"||I.canvas instanceof b.window.HTMLCanvasElement||this.fire(new b.ErrorEvent(new b.ValidationError("sources."+C,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new b.ErrorEvent(new b.ValidationError("sources."+C,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate===void 0||I.animate}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof b.window.HTMLCanvasElement?this.options.canvas:b.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new b.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},T.prototype.getCanvas=function(){return this.canvas},T.prototype.onAdd=function(C){this.map=C,this.load(),this.canvas&&this.animate&&this.play()},T.prototype.onRemove=function(){this.pause()},T.prototype.prepare=function(){var C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var I=this.map.painter.context,Z=I.gl;for(var ee in this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(C||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new b.Texture(I,this.canvas,Z.RGBA,{premultiply:!0}),this.tiles){var ae=this.tiles[ee];ae.state!=="loaded"&&(ae.state="loaded",ae.texture=this.texture)}}},T.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},T.prototype.hasTransition=function(){return this._playing},T.prototype._hasInvalidDimensions=function(){for(var C=0,I=[this.canvas.width,this.canvas.height];C<I.length;C+=1){var Z=I[C];if(isNaN(Z)||Z<=0)return!0}return!1},T}(ut),rt={vector:qe,raster:ne,"raster-dem":Ge,geojson:oe,video:Ae,image:ut,canvas:Le};function ye(S,T){var C=b.identity([]);return b.translate(C,C,[1,1,0]),b.scale(C,C,[.5*S.width,.5*S.height,1]),b.multiply(C,C,S.calculatePosMatrix(T.toUnwrapped()))}function me(S,T,C,I,Z,ee){var ae=function(Ir,lr,Pr){if(Ir)for(var jr=0,tn=Ir;jr<tn.length;jr+=1){var _n=lr[tn[jr]];if(_n&&_n.source===Pr&&_n.type==="fill-extrusion")return!0}else for(var dn in lr){var Tn=lr[dn];if(Tn.source===Pr&&Tn.type==="fill-extrusion")return!0}return!1}(Z&&Z.layers,T,S.id),Me=ee.maxPitchScaleFactor(),ot=S.tilesIn(I,Me,ae);ot.sort(We);for(var bt=[],Vt=0,Wt=ot;Vt<Wt.length;Vt+=1){var $t=Wt[Vt];bt.push({wrappedTileID:$t.tileID.wrapped().key,queryResults:$t.tile.queryRenderedFeatures(T,C,S._state,$t.queryGeometry,$t.cameraQueryGeometry,$t.scale,Z,ee,Me,ye(S.transform,$t.tileID))})}var vr=function(Ir){for(var lr={},Pr={},jr=0,tn=Ir;jr<tn.length;jr+=1){var _n=tn[jr],dn=_n.queryResults,Tn=_n.wrappedTileID,Un=Pr[Tn]=Pr[Tn]||{};for(var si in dn)for(var li=dn[si],Ii=Un[si]=Un[si]||{},ea=lr[si]=lr[si]||[],la=0,ra=li;la<ra.length;la+=1){var lo=ra[la];Ii[lo.featureIndex]||(Ii[lo.featureIndex]=!0,ea.push(lo))}}return lr}(bt);for(var hr in vr)vr[hr].forEach(function(Ir){var lr=Ir.feature,Pr=S.getFeatureState(lr.layer["source-layer"],lr.id);lr.source=lr.layer.source,lr.layer["source-layer"]&&(lr.sourceLayer=lr.layer["source-layer"]),lr.state=Pr});return vr}function We(S,T){var C=S.tileID,I=T.tileID;return C.overscaledZ-I.overscaledZ||C.canonical.y-I.canonical.y||C.wrap-I.wrap||C.canonical.x-I.canonical.x}var Ve=function(S,T){this.max=S,this.onRemove=T,this.reset()};Ve.prototype.reset=function(){for(var S in this.data)for(var T=0,C=this.data[S];T<C.length;T+=1){var I=C[T];I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value)}return this.data={},this.order=[],this},Ve.prototype.add=function(S,T,C){var I=this,Z=S.wrapped().key;this.data[Z]===void 0&&(this.data[Z]=[]);var ee={value:T,timeout:void 0};if(C!==void 0&&(ee.timeout=setTimeout(function(){I.remove(S,ee)},C)),this.data[Z].push(ee),this.order.push(Z),this.order.length>this.max){var ae=this._getAndRemoveByKey(this.order[0]);ae&&this.onRemove(ae)}return this},Ve.prototype.has=function(S){return S.wrapped().key in this.data},Ve.prototype.getAndRemove=function(S){return this.has(S)?this._getAndRemoveByKey(S.wrapped().key):null},Ve.prototype._getAndRemoveByKey=function(S){var T=this.data[S].shift();return T.timeout&&clearTimeout(T.timeout),this.data[S].length===0&&delete this.data[S],this.order.splice(this.order.indexOf(S),1),T.value},Ve.prototype.getByKey=function(S){var T=this.data[S];return T?T[0].value:null},Ve.prototype.get=function(S){return this.has(S)?this.data[S.wrapped().key][0].value:null},Ve.prototype.remove=function(S,T){if(!this.has(S))return this;var C=S.wrapped().key,I=T===void 0?0:this.data[C].indexOf(T),Z=this.data[C][I];return this.data[C].splice(I,1),Z.timeout&&clearTimeout(Z.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(Z.value),this.order.splice(this.order.indexOf(C),1),this},Ve.prototype.setMaxSize=function(S){for(this.max=S;this.order.length>this.max;){var T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this},Ve.prototype.filter=function(S){var T=[];for(var C in this.data)for(var I=0,Z=this.data[C];I<Z.length;I+=1){var ee=Z[I];S(ee.value)||T.push(ee)}for(var ae=0,Me=T;ae<Me.length;ae+=1){var ot=Me[ae];this.remove(ot.value.tileID,ot)}};var dt=function(S,T,C){this.context=S;var I=S.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),S.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,T.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete T.arrayBuffer};dt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},dt.prototype.updateData=function(S){var T=this.context.gl;this.context.unbindVAO(),this.bind(),T.bufferSubData(T.ELEMENT_ARRAY_BUFFER,0,S.arrayBuffer)},dt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ht={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},et=function(S,T,C,I){this.length=T.length,this.attributes=C,this.itemSize=T.bytesPerElement,this.dynamicDraw=I,this.context=S;var Z=S.gl;this.buffer=Z.createBuffer(),S.bindVertexBuffer.set(this.buffer),Z.bufferData(Z.ARRAY_BUFFER,T.arrayBuffer,this.dynamicDraw?Z.DYNAMIC_DRAW:Z.STATIC_DRAW),this.dynamicDraw||delete T.arrayBuffer};et.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},et.prototype.updateData=function(S){var T=this.context.gl;this.bind(),T.bufferSubData(T.ARRAY_BUFFER,0,S.arrayBuffer)},et.prototype.enableAttributes=function(S,T){for(var C=0;C<this.attributes.length;C++){var I=T.attributes[this.attributes[C].name];I!==void 0&&S.enableVertexAttribArray(I)}},et.prototype.setVertexAttribPointers=function(S,T,C){for(var I=0;I<this.attributes.length;I++){var Z=this.attributes[I],ee=T.attributes[Z.name];ee!==void 0&&S.vertexAttribPointer(ee,Z.components,S[Ht[Z.type]],!1,this.itemSize,Z.offset+this.itemSize*(C||0))}},et.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var $e=function(S){this.gl=S.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};$e.prototype.get=function(){return this.current},$e.prototype.set=function(S){},$e.prototype.getDefault=function(){return this.default},$e.prototype.setDefault=function(){this.set(this.default)};var Te=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return b.Color.transparent},T.prototype.set=function(C){var I=this.current;(C.r!==I.r||C.g!==I.g||C.b!==I.b||C.a!==I.a||this.dirty)&&(this.gl.clearColor(C.r,C.g,C.b,C.a),this.current=C,this.dirty=!1)},T}($e),Xe=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return 1},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.clearDepth(C),this.current=C,this.dirty=!1)},T}($e),pt=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return 0},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.clearStencil(C),this.current=C,this.dirty=!1)},T}($e),Oe=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return[!0,!0,!0,!0]},T.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||C[3]!==I[3]||this.dirty)&&(this.gl.colorMask(C[0],C[1],C[2],C[3]),this.current=C,this.dirty=!1)},T}($e),Be=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return!0},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.depthMask(C),this.current=C,this.dirty=!1)},T}($e),vt=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return 255},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.stencilMask(C),this.current=C,this.dirty=!1)},T}($e),Rt=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},T.prototype.set=function(C){var I=this.current;(C.func!==I.func||C.ref!==I.ref||C.mask!==I.mask||this.dirty)&&(this.gl.stencilFunc(C.func,C.ref,C.mask),this.current=C,this.dirty=!1)},T}($e),rr=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){var C=this.gl;return[C.KEEP,C.KEEP,C.KEEP]},T.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||this.dirty)&&(this.gl.stencilOp(C[0],C[1],C[2]),this.current=C,this.dirty=!1)},T}($e),br=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this.current=C,this.dirty=!1}},T}($e),lt=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return[0,1]},T.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||this.dirty)&&(this.gl.depthRange(C[0],C[1]),this.current=C,this.dirty=!1)},T}($e),an=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this.current=C,this.dirty=!1}},T}($e),$r=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return this.gl.LESS},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.depthFunc(C),this.current=C,this.dirty=!1)},T}($e),Xr=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.BLEND):I.disable(I.BLEND),this.current=C,this.dirty=!1}},T}($e),Nt=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){var C=this.gl;return[C.ONE,C.ZERO]},T.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||this.dirty)&&(this.gl.blendFunc(C[0],C[1]),this.current=C,this.dirty=!1)},T}($e),Kt=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return b.Color.transparent},T.prototype.set=function(C){var I=this.current;(C.r!==I.r||C.g!==I.g||C.b!==I.b||C.a!==I.a||this.dirty)&&(this.gl.blendColor(C.r,C.g,C.b,C.a),this.current=C,this.dirty=!1)},T}($e),or=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return this.gl.FUNC_ADD},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.blendEquation(C),this.current=C,this.dirty=!1)},T}($e),kt=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;C?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this.current=C,this.dirty=!1}},T}($e),Jt=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return this.gl.BACK},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.cullFace(C),this.current=C,this.dirty=!1)},T}($e),Er=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return this.gl.CCW},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.frontFace(C),this.current=C,this.dirty=!1)},T}($e),wr=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.useProgram(C),this.current=C,this.dirty=!1)},T}($e),Br=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return this.gl.TEXTURE0},T.prototype.set=function(C){(C!==this.current||this.dirty)&&(this.gl.activeTexture(C),this.current=C,this.dirty=!1)},T}($e),zr=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){var C=this.gl;return[0,0,C.drawingBufferWidth,C.drawingBufferHeight]},T.prototype.set=function(C){var I=this.current;(C[0]!==I[0]||C[1]!==I[1]||C[2]!==I[2]||C[3]!==I[3]||this.dirty)&&(this.gl.viewport(C[0],C[1],C[2],C[3]),this.current=C,this.dirty=!1)},T}($e),le=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,C),this.current=C,this.dirty=!1}},T}($e),H=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindRenderbuffer(I.RENDERBUFFER,C),this.current=C,this.dirty=!1}},T}($e),re=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindTexture(I.TEXTURE_2D,C),this.current=C,this.dirty=!1}},T}($e),Ie=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.bindBuffer(I.ARRAY_BUFFER,C),this.current=C,this.dirty=!1}},T}($e),Ye=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){var I=this.gl;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,C),this.current=C,this.dirty=!1},T}($e),Ct=function(S){function T(C){S.call(this,C),this.vao=C.extVertexArrayObject}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T.prototype.set=function(C){this.vao&&(C!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(C),this.current=C,this.dirty=!1)},T}($e),ar=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return 4},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_ALIGNMENT,C),this.current=C,this.dirty=!1}},T}($e),jt=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C),this.current=C,this.dirty=!1}},T}($e),wt=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return!1},T.prototype.set=function(C){if(C!==this.current||this.dirty){var I=this.gl;I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,C),this.current=C,this.dirty=!1}},T}($e),Mt=function(S){function T(C,I){S.call(this,C),this.context=C,this.parent=I}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getDefault=function(){return null},T}($e),ve=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.setDirty=function(){this.dirty=!0},T.prototype.set=function(C){if(C!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,C,0),this.current=C,this.dirty=!1}},T}(Mt),he=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.set=function(C){if(C!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var I=this.gl;I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,C),this.current=C,this.dirty=!1}},T}(Mt),Re=function(S,T,C,I){this.context=S,this.width=T,this.height=C;var Z=this.framebuffer=S.gl.createFramebuffer();this.colorAttachment=new ve(S,Z),I&&(this.depthAttachment=new he(S,Z))};Re.prototype.destroy=function(){var S=this.context.gl,T=this.colorAttachment.get();if(T&&S.deleteTexture(T),this.depthAttachment){var C=this.depthAttachment.get();C&&S.deleteRenderbuffer(C)}S.deleteFramebuffer(this.framebuffer)};var tt=function(S,T,C){this.func=S,this.mask=T,this.range=C};tt.ReadOnly=!1,tt.ReadWrite=!0,tt.disabled=new tt(519,tt.ReadOnly,[0,1]);var St=function(S,T,C,I,Z,ee){this.test=S,this.ref=T,this.mask=C,this.fail=I,this.depthFail=Z,this.pass=ee};St.disabled=new St({func:519,mask:0},0,0,7680,7680,7680);var Gt=function(S,T,C){this.blendFunction=S,this.blendColor=T,this.mask=C};Gt.disabled=new Gt(Gt.Replace=[1,0],b.Color.transparent,[!1,!1,!1,!1]),Gt.unblended=new Gt(Gt.Replace,b.Color.transparent,[!0,!0,!0,!0]),Gt.alphaBlended=new Gt([1,771],b.Color.transparent,[!0,!0,!0,!0]);var gr=function(S,T,C){this.enable=S,this.mode=T,this.frontFace=C};gr.disabled=new gr(!1,1029,2305),gr.backCCW=new gr(!0,1029,2305);var At=function(S){this.gl=S,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Te(this),this.clearDepth=new Xe(this),this.clearStencil=new pt(this),this.colorMask=new Oe(this),this.depthMask=new Be(this),this.stencilMask=new vt(this),this.stencilFunc=new Rt(this),this.stencilOp=new rr(this),this.stencilTest=new br(this),this.depthRange=new lt(this),this.depthTest=new an(this),this.depthFunc=new $r(this),this.blend=new Xr(this),this.blendFunc=new Nt(this),this.blendColor=new Kt(this),this.blendEquation=new or(this),this.cullFace=new kt(this),this.cullFaceSide=new Jt(this),this.frontFace=new Er(this),this.program=new wr(this),this.activeTexture=new Br(this),this.viewport=new zr(this),this.bindFramebuffer=new le(this),this.bindRenderbuffer=new H(this),this.bindTexture=new re(this),this.bindVertexBuffer=new Ie(this),this.bindElementBuffer=new Ye(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ct(this),this.pixelStoreUnpack=new ar(this),this.pixelStoreUnpackPremultiplyAlpha=new jt(this),this.pixelStoreUnpackFlipY=new wt(this),this.extTextureFilterAnisotropic=S.getExtension("EXT_texture_filter_anisotropic")||S.getExtension("MOZ_EXT_texture_filter_anisotropic")||S.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=S.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=S.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(S.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=S.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=S.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=S.getParameter(S.MAX_TEXTURE_SIZE)};At.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},At.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},At.prototype.createIndexBuffer=function(S,T){return new dt(this,S,T)},At.prototype.createVertexBuffer=function(S,T,C){return new et(this,S,T,C)},At.prototype.createRenderbuffer=function(S,T,C){var I=this.gl,Z=I.createRenderbuffer();return this.bindRenderbuffer.set(Z),I.renderbufferStorage(I.RENDERBUFFER,S,T,C),this.bindRenderbuffer.set(null),Z},At.prototype.createFramebuffer=function(S,T,C){return new Re(this,S,T,C)},At.prototype.clear=function(S){var T=S.color,C=S.depth,I=this.gl,Z=0;T&&(Z|=I.COLOR_BUFFER_BIT,this.clearColor.set(T),this.colorMask.set([!0,!0,!0,!0])),C!==void 0&&(Z|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(C),this.depthMask.set(!0)),I.clear(Z)},At.prototype.setCullFace=function(S){S.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(S.mode),this.frontFace.set(S.frontFace))},At.prototype.setDepthMode=function(S){S.func!==this.gl.ALWAYS||S.mask?(this.depthTest.set(!0),this.depthFunc.set(S.func),this.depthMask.set(S.mask),this.depthRange.set(S.range)):this.depthTest.set(!1)},At.prototype.setStencilMode=function(S){S.test.func!==this.gl.ALWAYS||S.mask?(this.stencilTest.set(!0),this.stencilMask.set(S.mask),this.stencilOp.set([S.fail,S.depthFail,S.pass]),this.stencilFunc.set({func:S.test.func,ref:S.ref,mask:S.test.mask})):this.stencilTest.set(!1)},At.prototype.setColorMode=function(S){b.deepEqual(S.blendFunction,Gt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(S.blendFunction),this.blendColor.set(S.blendColor)),this.colorMask.set(S.mask)},At.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var st=function(S){function T(C,I,Z){var ee=this;S.call(this),this.id=C,this.dispatcher=Z,this.on("data",function(ae){ae.dataType==="source"&&ae.sourceDataType==="metadata"&&(ee._sourceLoaded=!0),ee._sourceLoaded&&!ee._paused&&ae.dataType==="source"&&ae.sourceDataType==="content"&&(ee.reload(),ee.transform&&ee.update(ee.transform))}),this.on("error",function(){ee._sourceErrored=!0}),this._source=function(ae,Me,ot,bt){var Vt=new rt[Me.type](ae,Me,ot,bt);if(Vt.id!==ae)throw new Error("Expected Source id to be "+ae+" instead of "+Vt.id);return b.bindAll(["load","abort","unload","serialize","prepare"],Vt),Vt}(C,I,Z,this),this._tiles={},this._cache=new Ve(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new b.SourceFeatureState}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.onAdd=function(C){this.map=C,this._maxTileCacheSize=C?C._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(C)},T.prototype.onRemove=function(C){this._source&&this._source.onRemove&&this._source.onRemove(C)},T.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var C in this._tiles){var I=this._tiles[C];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0},T.prototype.getSource=function(){return this._source},T.prototype.pause=function(){this._paused=!0},T.prototype.resume=function(){if(this._paused){var C=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,C&&this.reload(),this.transform&&this.update(this.transform)}},T.prototype._loadTile=function(C,I){return this._source.loadTile(C,I)},T.prototype._unloadTile=function(C){if(this._source.unloadTile)return this._source.unloadTile(C,function(){})},T.prototype._abortTile=function(C){if(this._source.abortTile)return this._source.abortTile(C,function(){})},T.prototype.serialize=function(){return this._source.serialize()},T.prototype.prepare=function(C){for(var I in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Z=this._tiles[I];Z.upload(C),Z.prepare(this.map.style.imageManager)}},T.prototype.getIds=function(){return b.values(this._tiles).map(function(C){return C.tileID}).sort(Pt).map(function(C){return C.key})},T.prototype.getRenderableIds=function(C){var I=this,Z=[];for(var ee in this._tiles)this._isIdRenderable(ee,C)&&Z.push(this._tiles[ee]);return C?Z.sort(function(ae,Me){var ot=ae.tileID,bt=Me.tileID,Vt=new b.Point(ot.canonical.x,ot.canonical.y)._rotate(I.transform.angle),Wt=new b.Point(bt.canonical.x,bt.canonical.y)._rotate(I.transform.angle);return ot.overscaledZ-bt.overscaledZ||Wt.y-Vt.y||Wt.x-Vt.x}).map(function(ae){return ae.tileID.key}):Z.map(function(ae){return ae.tileID}).sort(Pt).map(function(ae){return ae.key})},T.prototype.hasRenderableParent=function(C){var I=this.findLoadedParent(C,0);return!!I&&this._isIdRenderable(I.tileID.key)},T.prototype._isIdRenderable=function(C,I){return this._tiles[C]&&this._tiles[C].hasData()&&!this._coveredTiles[C]&&(I||!this._tiles[C].holdingForFade())},T.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var C in this._cache.reset(),this._tiles)this._tiles[C].state!=="errored"&&this._reloadTile(C,"reloading")},T.prototype._reloadTile=function(C,I){var Z=this._tiles[C];Z&&(Z.state!=="loading"&&(Z.state=I),this._loadTile(Z,this._tileLoaded.bind(this,Z,C,I)))},T.prototype._tileLoaded=function(C,I,Z,ee){if(ee)return C.state="errored",void(ee.status!==404?this._source.fire(new b.ErrorEvent(ee,{tile:C})):this.update(this.transform));C.timeAdded=b.browser.now(),Z==="expired"&&(C.refreshedUponExpiration=!0),this._setTileReloadTimer(I,C),this.getSource().type==="raster-dem"&&C.dem&&this._backfillDEM(C),this._state.initializeTileState(C,this.map?this.map.painter:null),this._source.fire(new b.Event("data",{dataType:"source",tile:C,coord:C.tileID}))},T.prototype._backfillDEM=function(C){for(var I=this.getRenderableIds(),Z=0;Z<I.length;Z++){var ee=I[Z];if(C.neighboringTiles&&C.neighboringTiles[ee]){var ae=this.getTileByID(ee);Me(C,ae),Me(ae,C)}}function Me(ot,bt){ot.needsHillshadePrepare=!0;var Vt=bt.tileID.canonical.x-ot.tileID.canonical.x,Wt=bt.tileID.canonical.y-ot.tileID.canonical.y,$t=Math.pow(2,ot.tileID.canonical.z),vr=bt.tileID.key;Vt===0&&Wt===0||Math.abs(Wt)>1||(Math.abs(Vt)>1&&(Math.abs(Vt+$t)===1?Vt+=$t:Math.abs(Vt-$t)===1&&(Vt-=$t)),bt.dem&&ot.dem&&(ot.dem.backfillBorder(bt.dem,Vt,Wt),ot.neighboringTiles&&ot.neighboringTiles[vr]&&(ot.neighboringTiles[vr].backfilled=!0)))}},T.prototype.getTile=function(C){return this.getTileByID(C.key)},T.prototype.getTileByID=function(C){return this._tiles[C]},T.prototype._retainLoadedChildren=function(C,I,Z,ee){for(var ae in this._tiles){var Me=this._tiles[ae];if(!(ee[ae]||!Me.hasData()||Me.tileID.overscaledZ<=I||Me.tileID.overscaledZ>Z)){for(var ot=Me.tileID;Me&&Me.tileID.overscaledZ>I+1;){var bt=Me.tileID.scaledTo(Me.tileID.overscaledZ-1);(Me=this._tiles[bt.key])&&Me.hasData()&&(ot=bt)}for(var Vt=ot;Vt.overscaledZ>I;)if(C[(Vt=Vt.scaledTo(Vt.overscaledZ-1)).key]){ee[ot.key]=ot;break}}}},T.prototype.findLoadedParent=function(C,I){if(C.key in this._loadedParentTiles){var Z=this._loadedParentTiles[C.key];return Z&&Z.tileID.overscaledZ>=I?Z:null}for(var ee=C.overscaledZ-1;ee>=I;ee--){var ae=C.scaledTo(ee),Me=this._getLoadedTile(ae);if(Me)return Me}},T.prototype._getLoadedTile=function(C){var I=this._tiles[C.key];return I&&I.hasData()?I:this._cache.getByKey(C.wrapped().key)},T.prototype.updateCacheSize=function(C){var I=Math.ceil(C.width/this._source.tileSize)+1,Z=Math.ceil(C.height/this._source.tileSize)+1,ee=Math.floor(I*Z*5),ae=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ee):ee;this._cache.setMaxSize(ae)},T.prototype.handleWrapJump=function(C){var I=Math.round((C-(this._prevLng===void 0?C:this._prevLng))/360);if(this._prevLng=C,I){var Z={};for(var ee in this._tiles){var ae=this._tiles[ee];ae.tileID=ae.tileID.unwrapTo(ae.tileID.wrap+I),Z[ae.tileID.key]=ae}for(var Me in this._tiles=Z,this._timers)clearTimeout(this._timers[Me]),delete this._timers[Me];for(var ot in this._tiles)this._setTileReloadTimer(ot,this._tiles[ot])}},T.prototype.update=function(C){var I=this;if(this.transform=C,this._sourceLoaded&&!this._paused){var Z;this.updateCacheSize(C),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Z=C.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Un){return new b.OverscaledTileID(Un.canonical.z,Un.wrap,Un.canonical.z,Un.canonical.x,Un.canonical.y)}):(Z=C.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Z=Z.filter(function(Un){return I._source.hasTile(Un)}))):Z=[];var ee=C.coveringZoomLevel(this._source),ae=Math.max(ee-T.maxOverzooming,this._source.minzoom),Me=Math.max(ee+T.maxUnderzooming,this._source.minzoom),ot=this._updateRetainedTiles(Z,ee);if(yr(this._source.type)){for(var bt={},Vt={},Wt=0,$t=Object.keys(ot);Wt<$t.length;Wt+=1){var vr=$t[Wt],hr=ot[vr],Ir=this._tiles[vr];if(Ir&&!(Ir.fadeEndTime&&Ir.fadeEndTime<=b.browser.now())){var lr=this.findLoadedParent(hr,ae);lr&&(this._addTile(lr.tileID),bt[lr.tileID.key]=lr.tileID),Vt[vr]=hr}}for(var Pr in this._retainLoadedChildren(Vt,ee,Me,ot),bt)ot[Pr]||(this._coveredTiles[Pr]=!0,ot[Pr]=bt[Pr])}for(var jr in ot)this._tiles[jr].clearFadeHold();for(var tn=0,_n=b.keysDifference(this._tiles,ot);tn<_n.length;tn+=1){var dn=_n[tn],Tn=this._tiles[dn];Tn.hasSymbolBuckets&&!Tn.holdingForFade()?Tn.setHoldDuration(this.map._fadeDuration):Tn.hasSymbolBuckets&&!Tn.symbolFadeFinished()||this._removeTile(dn)}this._updateLoadedParentTileCache()}},T.prototype.releaseSymbolFadeTiles=function(){for(var C in this._tiles)this._tiles[C].holdingForFade()&&this._removeTile(C)},T.prototype._updateRetainedTiles=function(C,I){for(var Z={},ee={},ae=Math.max(I-T.maxOverzooming,this._source.minzoom),Me=Math.max(I+T.maxUnderzooming,this._source.minzoom),ot={},bt=0,Vt=C;bt<Vt.length;bt+=1){var Wt=Vt[bt],$t=this._addTile(Wt);Z[Wt.key]=Wt,$t.hasData()||I<this._source.maxzoom&&(ot[Wt.key]=Wt)}this._retainLoadedChildren(ot,I,Me,Z);for(var vr=0,hr=C;vr<hr.length;vr+=1){var Ir=hr[vr],lr=this._tiles[Ir.key];if(!lr.hasData()){if(I+1>this._source.maxzoom){var Pr=Ir.children(this._source.maxzoom)[0],jr=this.getTile(Pr);if(jr&&jr.hasData()){Z[Pr.key]=Pr;continue}}else{var tn=Ir.children(this._source.maxzoom);if(Z[tn[0].key]&&Z[tn[1].key]&&Z[tn[2].key]&&Z[tn[3].key])continue}for(var _n=lr.wasRequested(),dn=Ir.overscaledZ-1;dn>=ae;--dn){var Tn=Ir.scaledTo(dn);if(ee[Tn.key]||(ee[Tn.key]=!0,!(lr=this.getTile(Tn))&&_n&&(lr=this._addTile(Tn)),lr&&(Z[Tn.key]=Tn,_n=lr.wasRequested(),lr.hasData())))break}}}return Z},T.prototype._updateLoadedParentTileCache=function(){for(var C in this._loadedParentTiles={},this._tiles){for(var I=[],Z=void 0,ee=this._tiles[C].tileID;ee.overscaledZ>0;){if(ee.key in this._loadedParentTiles){Z=this._loadedParentTiles[ee.key];break}I.push(ee.key);var ae=ee.scaledTo(ee.overscaledZ-1);if(Z=this._getLoadedTile(ae))break;ee=ae}for(var Me=0,ot=I;Me<ot.length;Me+=1)this._loadedParentTiles[ot[Me]]=Z}},T.prototype._addTile=function(C){var I=this._tiles[C.key];if(I)return I;(I=this._cache.getAndRemove(C))&&(this._setTileReloadTimer(C.key,I),I.tileID=C,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[C.key]&&(clearTimeout(this._cacheTimers[C.key]),delete this._cacheTimers[C.key],this._setTileReloadTimer(C.key,I)));var Z=!!I;return Z||(I=new b.Tile(C,this._source.tileSize*C.overscaleFactor()),this._loadTile(I,this._tileLoaded.bind(this,I,C.key,I.state))),I?(I.uses++,this._tiles[C.key]=I,Z||this._source.fire(new b.Event("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I):null},T.prototype._setTileReloadTimer=function(C,I){var Z=this;C in this._timers&&(clearTimeout(this._timers[C]),delete this._timers[C]);var ee=I.getExpiryTimeout();ee&&(this._timers[C]=setTimeout(function(){Z._reloadTile(C,"expired"),delete Z._timers[C]},ee))},T.prototype._removeTile=function(C){var I=this._tiles[C];I&&(I.uses--,delete this._tiles[C],this._timers[C]&&(clearTimeout(this._timers[C]),delete this._timers[C]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))},T.prototype.clearTiles=function(){for(var C in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(C);this._cache.reset()},T.prototype.tilesIn=function(C,I,Z){var ee=this,ae=[],Me=this.transform;if(!Me)return ae;for(var ot=Z?Me.getCameraQueryGeometry(C):C,bt=C.map(function(dn){return Me.pointCoordinate(dn)}),Vt=ot.map(function(dn){return Me.pointCoordinate(dn)}),Wt=this.getIds(),$t=1/0,vr=1/0,hr=-1/0,Ir=-1/0,lr=0,Pr=Vt;lr<Pr.length;lr+=1){var jr=Pr[lr];$t=Math.min($t,jr.x),vr=Math.min(vr,jr.y),hr=Math.max(hr,jr.x),Ir=Math.max(Ir,jr.y)}for(var tn=function(dn){var Tn=ee._tiles[Wt[dn]];if(!Tn.holdingForFade()){var Un=Tn.tileID,si=Math.pow(2,Me.zoom-Tn.tileID.overscaledZ),li=I*Tn.queryPadding*b.EXTENT/Tn.tileSize/si,Ii=[Un.getTilePoint(new b.MercatorCoordinate($t,vr)),Un.getTilePoint(new b.MercatorCoordinate(hr,Ir))];if(Ii[0].x-li<b.EXTENT&&Ii[0].y-li<b.EXTENT&&Ii[1].x+li>=0&&Ii[1].y+li>=0){var ea=bt.map(function(ra){return Un.getTilePoint(ra)}),la=Vt.map(function(ra){return Un.getTilePoint(ra)});ae.push({tile:Tn,tileID:Un,queryGeometry:ea,cameraQueryGeometry:la,scale:si})}}},_n=0;_n<Wt.length;_n++)tn(_n);return ae},T.prototype.getVisibleCoordinates=function(C){for(var I=this,Z=this.getRenderableIds(C).map(function(ot){return I._tiles[ot].tileID}),ee=0,ae=Z;ee<ae.length;ee+=1){var Me=ae[ee];Me.posMatrix=this.transform.calculatePosMatrix(Me.toUnwrapped())}return Z},T.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(yr(this._source.type))for(var C in this._tiles){var I=this._tiles[C];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=b.browser.now())return!0}return!1},T.prototype.setFeatureState=function(C,I,Z){this._state.updateState(C=C||"_geojsonTileLayer",I,Z)},T.prototype.removeFeatureState=function(C,I,Z){this._state.removeFeatureState(C=C||"_geojsonTileLayer",I,Z)},T.prototype.getFeatureState=function(C,I){return this._state.getState(C=C||"_geojsonTileLayer",I)},T.prototype.setDependencies=function(C,I,Z){var ee=this._tiles[C];ee&&ee.setDependencies(I,Z)},T.prototype.reloadTilesForDependencies=function(C,I){for(var Z in this._tiles)this._tiles[Z].hasDependency(C,I)&&this._reloadTile(Z,"reloading");this._cache.filter(function(ee){return!ee.hasDependency(C,I)})},T}(b.Evented);function Pt(S,T){var C=Math.abs(2*S.wrap)-+(S.wrap<0),I=Math.abs(2*T.wrap)-+(T.wrap<0);return S.overscaledZ-T.overscaledZ||I-C||T.canonical.y-S.canonical.y||T.canonical.x-S.canonical.x}function yr(S){return S==="raster"||S==="image"||S==="video"}function Fr(){return new b.window.Worker(Ep.workerUrl)}st.maxOverzooming=10,st.maxUnderzooming=3;var Ft="mapboxgl_preloaded_worker_pool",Mn=function(){this.active={}};Mn.prototype.acquire=function(S){if(!this.workers)for(this.workers=[];this.workers.length<Mn.workerCount;)this.workers.push(new Fr);return this.active[S]=!0,this.workers.slice()},Mn.prototype.release=function(S){delete this.active[S],this.numActive()===0&&(this.workers.forEach(function(T){T.terminate()}),this.workers=null)},Mn.prototype.isPreloaded=function(){return!!this.active[Ft]},Mn.prototype.numActive=function(){return Object.keys(this.active).length};var ei,ni=Math.floor(b.browser.hardwareConcurrency/2);function un(){return ei||(ei=new Mn),ei}function Xn(S,T){var C={};for(var I in S)I!=="ref"&&(C[I]=S[I]);return b.refProperties.forEach(function(Z){Z in T&&(C[Z]=T[Z])}),C}function Wn(S){S=S.slice();for(var T=Object.create(null),C=0;C<S.length;C++)T[S[C].id]=S[C];for(var I=0;I<S.length;I++)"ref"in S[I]&&(S[I]=Xn(S[I],T[S[I].ref]));return S}Mn.workerCount=Math.max(Math.min(ni,6),1);var Jn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function sa(S,T,C){C.push({command:Jn.addSource,args:[S,T[S]]})}function vi(S,T,C){T.push({command:Jn.removeSource,args:[S]}),C[S]=!0}function ga(S,T,C,I){vi(S,C,I),sa(S,T,C)}function Ra(S,T,C){var I;for(I in S[C])if(S[C].hasOwnProperty(I)&&I!=="data"&&!b.deepEqual(S[C][I],T[C][I]))return!1;for(I in T[C])if(T[C].hasOwnProperty(I)&&I!=="data"&&!b.deepEqual(S[C][I],T[C][I]))return!1;return!0}function ya(S,T,C,I,Z,ee){var ae;for(ae in T=T||{},S=S||{})S.hasOwnProperty(ae)&&(b.deepEqual(S[ae],T[ae])||C.push({command:ee,args:[I,ae,T[ae],Z]}));for(ae in T)T.hasOwnProperty(ae)&&!S.hasOwnProperty(ae)&&(b.deepEqual(S[ae],T[ae])||C.push({command:ee,args:[I,ae,T[ae],Z]}))}function ja(S){return S.id}function ba(S,T){return S[T.id]=T,S}var gs=function(S,T){this.reset(S,T)};gs.prototype.reset=function(S,T){this.points=S||[],this._distances=[0];for(var C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(T||0,.5*this.length),this.paddedLength=this.length-2*this.padding},gs.prototype.lerp=function(S){if(this.points.length===1)return this.points[0];S=b.clamp(S,0,1);for(var T=1,C=this._distances[T],I=S*this.paddedLength+this.padding;C<I&&T<this._distances.length;)C=this._distances[++T];var Z=T-1,ee=this._distances[Z],ae=C-ee,Me=ae>0?(I-ee)/ae:0;return this.points[Z].mult(1-Me).add(this.points[T].mult(Me))};var co=function(S,T,C){var I=this.boxCells=[],Z=this.circleCells=[];this.xCellCount=Math.ceil(S/C),this.yCellCount=Math.ceil(T/C);for(var ee=0;ee<this.xCellCount*this.yCellCount;ee++)I.push([]),Z.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=S,this.height=T,this.xScale=this.xCellCount/S,this.yScale=this.yCellCount/T,this.boxUid=0,this.circleUid=0};function Io(S,T,C,I,Z){var ee=b.create();return T?(b.scale(ee,ee,[1/Z,1/Z,1]),C||b.rotateZ(ee,ee,I.angle)):b.multiply(ee,I.labelPlaneMatrix,S),ee}function oi(S,T,C,I,Z){if(T){var ee=b.clone(S);return b.scale(ee,ee,[Z,Z,1]),C||b.rotateZ(ee,ee,-I.angle),ee}return I.glCoordMatrix}function Si(S,T){var C=[S.x,S.y,0,1];Pn(C,C,T);var I=C[3];return{point:new b.Point(C[0]/I,C[1]/I),signedDistanceFromCamera:I}}function Qi(S,T){return .5+S/T*.5}function Wa(S,T){var C=S[0]/S[3],I=S[1]/S[3];return C>=-T[0]&&C<=T[0]&&I>=-T[1]&&I<=T[1]}function ms(S,T,C,I,Z,ee,ae,Me){var ot=I?S.textSizeData:S.iconSizeData,bt=b.evaluateSizeForZoom(ot,C.transform.zoom),Vt=[256/C.width*2+1,256/C.height*2+1],Wt=I?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;Wt.clear();for(var $t=S.lineVertexArray,vr=I?S.text.placedSymbolArray:S.icon.placedSymbolArray,hr=C.transform.width/C.transform.height,Ir=!1,lr=0;lr<vr.length;lr++){var Pr=vr.get(lr);if(Pr.hidden||Pr.writingMode===b.WritingMode.vertical&&!Ir)rn(Pr.numGlyphs,Wt);else{Ir=!1;var jr=[Pr.anchorX,Pr.anchorY,0,1];if(b.transformMat4(jr,jr,T),Wa(jr,Vt)){var tn=Qi(C.transform.cameraToCenterDistance,jr[3]),_n=b.evaluateSizeForFeature(ot,bt,Pr),dn=ae?_n/tn:_n*tn,Tn=new b.Point(Pr.anchorX,Pr.anchorY),Un=Si(Tn,Z).point,si={},li=cr(Pr,dn,!1,Me,T,Z,ee,S.glyphOffsetArray,$t,Wt,Un,Tn,si,hr);Ir=li.useVertical,(li.notEnoughRoom||Ir||li.needsFlipping&&cr(Pr,dn,!0,Me,T,Z,ee,S.glyphOffsetArray,$t,Wt,Un,Tn,si,hr).notEnoughRoom)&&rn(Pr.numGlyphs,Wt)}else rn(Pr.numGlyphs,Wt)}}I?S.text.dynamicLayoutVertexBuffer.updateData(Wt):S.icon.dynamicLayoutVertexBuffer.updateData(Wt)}function ho(S,T,C,I,Z,ee,ae,Me,ot,bt,Vt){var Wt=Me.glyphStartIndex+Me.numGlyphs,$t=Me.lineStartIndex,vr=Me.lineStartIndex+Me.lineLength,hr=T.getoffsetX(Me.glyphStartIndex),Ir=T.getoffsetX(Wt-1),lr=qt(S*hr,C,I,Z,ee,ae,Me.segment,$t,vr,ot,bt,Vt);if(!lr)return null;var Pr=qt(S*Ir,C,I,Z,ee,ae,Me.segment,$t,vr,ot,bt,Vt);return Pr?{first:lr,last:Pr}:null}function Po(S,T,C,I){return S===b.WritingMode.horizontal&&Math.abs(C.y-T.y)>Math.abs(C.x-T.x)*I?{useVertical:!0}:(S===b.WritingMode.vertical?T.y<C.y:T.x>C.x)?{needsFlipping:!0}:null}function cr(S,T,C,I,Z,ee,ae,Me,ot,bt,Vt,Wt,$t,vr){var hr,Ir=T/24,lr=S.lineOffsetX*Ir,Pr=S.lineOffsetY*Ir;if(S.numGlyphs>1){var jr=S.glyphStartIndex+S.numGlyphs,tn=S.lineStartIndex,_n=S.lineStartIndex+S.lineLength,dn=ho(Ir,Me,lr,Pr,C,Vt,Wt,S,ot,ee,$t);if(!dn)return{notEnoughRoom:!0};var Tn=Si(dn.first.point,ae).point,Un=Si(dn.last.point,ae).point;if(I&&!C){var si=Po(S.writingMode,Tn,Un,vr);if(si)return si}hr=[dn.first];for(var li=S.glyphStartIndex+1;li<jr-1;li++)hr.push(qt(Ir*Me.getoffsetX(li),lr,Pr,C,Vt,Wt,S.segment,tn,_n,ot,ee,$t));hr.push(dn.last)}else{if(I&&!C){var Ii=Si(Wt,Z).point,ea=S.lineStartIndex+S.segment+1,la=new b.Point(ot.getx(ea),ot.gety(ea)),ra=Si(la,Z),lo=ra.signedDistanceFromCamera>0?ra.point:Ot(Wt,la,Ii,1,Z),Fi=Po(S.writingMode,Ii,lo,vr);if(Fi)return Fi}var Ia=qt(Ir*Me.getoffsetX(S.glyphStartIndex),lr,Pr,C,Vt,Wt,S.segment,S.lineStartIndex,S.lineStartIndex+S.lineLength,ot,ee,$t);if(!Ia)return{notEnoughRoom:!0};hr=[Ia]}for(var Xa=0,pa=hr;Xa<pa.length;Xa+=1){var Sa=pa[Xa];b.addDynamicAttributes(bt,Sa.point,Sa.angle)}return{}}function Ot(S,T,C,I,Z){var ee=Si(S.add(S.sub(T)._unit()),Z).point,ae=C.sub(ee);return C.add(ae._mult(I/ae.mag()))}function qt(S,T,C,I,Z,ee,ae,Me,ot,bt,Vt,Wt){var $t=I?S-T:S+T,vr=$t>0?1:-1,hr=0;I&&(vr*=-1,hr=Math.PI),vr<0&&(hr+=Math.PI);for(var Ir=vr>0?Me+ae:Me+ae+1,lr=Z,Pr=Z,jr=0,tn=0,_n=Math.abs($t),dn=[];jr+tn<=_n;){if((Ir+=vr)<Me||Ir>=ot)return null;if(Pr=lr,dn.push(lr),(lr=Wt[Ir])===void 0){var Tn=new b.Point(bt.getx(Ir),bt.gety(Ir)),Un=Si(Tn,Vt);if(Un.signedDistanceFromCamera>0)lr=Wt[Ir]=Un.point;else{var si=Ir-vr;lr=Ot(jr===0?ee:new b.Point(bt.getx(si),bt.gety(si)),Tn,Pr,_n-jr+1,Vt)}}jr+=tn,tn=Pr.dist(lr)}var li=(_n-jr)/tn,Ii=lr.sub(Pr),ea=Ii.mult(li)._add(Pr);ea._add(Ii._unit()._perp()._mult(C*vr));var la=hr+Math.atan2(lr.y-Pr.y,lr.x-Pr.x);return dn.push(ea),{point:ea,angle:la,path:dn}}co.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},co.prototype.insert=function(S,T,C,I,Z){this._forEachCell(T,C,I,Z,this._insertBoxCell,this.boxUid++),this.boxKeys.push(S),this.bboxes.push(T),this.bboxes.push(C),this.bboxes.push(I),this.bboxes.push(Z)},co.prototype.insertCircle=function(S,T,C,I){this._forEachCell(T-I,C-I,T+I,C+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(S),this.circles.push(T),this.circles.push(C),this.circles.push(I)},co.prototype._insertBoxCell=function(S,T,C,I,Z,ee){this.boxCells[Z].push(ee)},co.prototype._insertCircleCell=function(S,T,C,I,Z,ee){this.circleCells[Z].push(ee)},co.prototype._query=function(S,T,C,I,Z,ee){if(C<0||S>this.width||I<0||T>this.height)return!Z&&[];var ae=[];if(S<=0&&T<=0&&this.width<=C&&this.height<=I){if(Z)return!0;for(var Me=0;Me<this.boxKeys.length;Me++)ae.push({key:this.boxKeys[Me],x1:this.bboxes[4*Me],y1:this.bboxes[4*Me+1],x2:this.bboxes[4*Me+2],y2:this.bboxes[4*Me+3]});for(var ot=0;ot<this.circleKeys.length;ot++){var bt=this.circles[3*ot],Vt=this.circles[3*ot+1],Wt=this.circles[3*ot+2];ae.push({key:this.circleKeys[ot],x1:bt-Wt,y1:Vt-Wt,x2:bt+Wt,y2:Vt+Wt})}return ee?ae.filter(ee):ae}return this._forEachCell(S,T,C,I,this._queryCell,ae,{hitTest:Z,seenUids:{box:{},circle:{}}},ee),Z?ae.length>0:ae},co.prototype._queryCircle=function(S,T,C,I,Z){var ee=S-C,ae=S+C,Me=T-C,ot=T+C;if(ae<0||ee>this.width||ot<0||Me>this.height)return!I&&[];var bt=[];return this._forEachCell(ee,Me,ae,ot,this._queryCellCircle,bt,{hitTest:I,circle:{x:S,y:T,radius:C},seenUids:{box:{},circle:{}}},Z),I?bt.length>0:bt},co.prototype.query=function(S,T,C,I,Z){return this._query(S,T,C,I,!1,Z)},co.prototype.hitTest=function(S,T,C,I,Z){return this._query(S,T,C,I,!0,Z)},co.prototype.hitTestCircle=function(S,T,C,I){return this._queryCircle(S,T,C,!0,I)},co.prototype._queryCell=function(S,T,C,I,Z,ee,ae,Me){var ot=ae.seenUids,bt=this.boxCells[Z];if(bt!==null)for(var Vt=this.bboxes,Wt=0,$t=bt;Wt<$t.length;Wt+=1){var vr=$t[Wt];if(!ot.box[vr]){ot.box[vr]=!0;var hr=4*vr;if(S<=Vt[hr+2]&&T<=Vt[hr+3]&&C>=Vt[hr+0]&&I>=Vt[hr+1]&&(!Me||Me(this.boxKeys[vr]))){if(ae.hitTest)return ee.push(!0),!0;ee.push({key:this.boxKeys[vr],x1:Vt[hr],y1:Vt[hr+1],x2:Vt[hr+2],y2:Vt[hr+3]})}}}var Ir=this.circleCells[Z];if(Ir!==null)for(var lr=this.circles,Pr=0,jr=Ir;Pr<jr.length;Pr+=1){var tn=jr[Pr];if(!ot.circle[tn]){ot.circle[tn]=!0;var _n=3*tn;if(this._circleAndRectCollide(lr[_n],lr[_n+1],lr[_n+2],S,T,C,I)&&(!Me||Me(this.circleKeys[tn]))){if(ae.hitTest)return ee.push(!0),!0;var dn=lr[_n],Tn=lr[_n+1],Un=lr[_n+2];ee.push({key:this.circleKeys[tn],x1:dn-Un,y1:Tn-Un,x2:dn+Un,y2:Tn+Un})}}}},co.prototype._queryCellCircle=function(S,T,C,I,Z,ee,ae,Me){var ot=ae.circle,bt=ae.seenUids,Vt=this.boxCells[Z];if(Vt!==null)for(var Wt=this.bboxes,$t=0,vr=Vt;$t<vr.length;$t+=1){var hr=vr[$t];if(!bt.box[hr]){bt.box[hr]=!0;var Ir=4*hr;if(this._circleAndRectCollide(ot.x,ot.y,ot.radius,Wt[Ir+0],Wt[Ir+1],Wt[Ir+2],Wt[Ir+3])&&(!Me||Me(this.boxKeys[hr])))return ee.push(!0),!0}}var lr=this.circleCells[Z];if(lr!==null)for(var Pr=this.circles,jr=0,tn=lr;jr<tn.length;jr+=1){var _n=tn[jr];if(!bt.circle[_n]){bt.circle[_n]=!0;var dn=3*_n;if(this._circlesCollide(Pr[dn],Pr[dn+1],Pr[dn+2],ot.x,ot.y,ot.radius)&&(!Me||Me(this.circleKeys[_n])))return ee.push(!0),!0}}},co.prototype._forEachCell=function(S,T,C,I,Z,ee,ae,Me){for(var ot=this._convertToXCellCoord(S),bt=this._convertToYCellCoord(T),Vt=this._convertToXCellCoord(C),Wt=this._convertToYCellCoord(I),$t=ot;$t<=Vt;$t++)for(var vr=bt;vr<=Wt;vr++)if(Z.call(this,S,T,C,I,this.xCellCount*vr+$t,ee,ae,Me))return},co.prototype._convertToXCellCoord=function(S){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(S*this.xScale)))},co.prototype._convertToYCellCoord=function(S){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(S*this.yScale)))},co.prototype._circlesCollide=function(S,T,C,I,Z,ee){var ae=I-S,Me=Z-T,ot=C+ee;return ot*ot>ae*ae+Me*Me},co.prototype._circleAndRectCollide=function(S,T,C,I,Z,ee,ae){var Me=(ee-I)/2,ot=Math.abs(S-(I+Me));if(ot>Me+C)return!1;var bt=(ae-Z)/2,Vt=Math.abs(T-(Z+bt));if(Vt>bt+C)return!1;if(ot<=Me||Vt<=bt)return!0;var Wt=ot-Me,$t=Vt-bt;return Wt*Wt+$t*$t<=C*C};var Mr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rn(S,T){for(var C=0;C<S;C++){var I=T.length;T.resize(I+4),T.float32.set(Mr,3*I)}}function Pn(S,T,C){var I=T[0],Z=T[1];return S[0]=C[0]*I+C[4]*Z+C[12],S[1]=C[1]*I+C[5]*Z+C[13],S[3]=C[3]*I+C[7]*Z+C[15],S}var Bn=function(S,T,C){T===void 0&&(T=new co(S.width+200,S.height+200,25)),C===void 0&&(C=new co(S.width+200,S.height+200,25)),this.transform=S,this.grid=T,this.ignoredGrid=C,this.pitchfactor=Math.cos(S._pitch)*S.cameraToCenterDistance,this.screenRightBoundary=S.width+100,this.screenBottomBoundary=S.height+100,this.gridRightBoundary=S.width+200,this.gridBottomBoundary=S.height+200};function Cn(S,T,C){return T*(b.EXTENT/(S.tileSize*Math.pow(2,C-S.tileID.overscaledZ)))}Bn.prototype.placeCollisionBox=function(S,T,C,I,Z){var ee=this.projectAndGetPerspectiveRatio(I,S.anchorPointX,S.anchorPointY),ae=C*ee.perspectiveRatio,Me=S.x1*ae+ee.point.x,ot=S.y1*ae+ee.point.y,bt=S.x2*ae+ee.point.x,Vt=S.y2*ae+ee.point.y;return!this.isInsideGrid(Me,ot,bt,Vt)||!T&&this.grid.hitTest(Me,ot,bt,Vt,Z)?{box:[],offscreen:!1}:{box:[Me,ot,bt,Vt],offscreen:this.isOffscreen(Me,ot,bt,Vt)}},Bn.prototype.placeCollisionCircles=function(S,T,C,I,Z,ee,ae,Me,ot,bt,Vt,Wt,$t){var vr=[],hr=new b.Point(T.anchorX,T.anchorY),Ir=Si(hr,ee),lr=Qi(this.transform.cameraToCenterDistance,Ir.signedDistanceFromCamera),Pr=(bt?Z/lr:Z*lr)/b.ONE_EM,jr=Si(hr,ae).point,tn=ho(Pr,I,T.lineOffsetX*Pr,T.lineOffsetY*Pr,!1,jr,hr,T,C,ae,{}),_n=!1,dn=!1,Tn=!0;if(tn){for(var Un=.5*Wt*lr+$t,si=new b.Point(-100,-100),li=new b.Point(this.screenRightBoundary,this.screenBottomBoundary),Ii=new gs,ea=tn.first,la=tn.last,ra=[],lo=ea.path.length-1;lo>=1;lo--)ra.push(ea.path[lo]);for(var Fi=1;Fi<la.path.length;Fi++)ra.push(la.path[Fi]);var Ia=2.5*Un;if(Me){var Xa=ra.map(function(Ul){return Si(Ul,Me)});ra=Xa.some(function(Ul){return Ul.signedDistanceFromCamera<=0})?[]:Xa.map(function(Ul){return Ul.point})}var pa=[];if(ra.length>0){for(var Sa=ra[0].clone(),Pa=ra[0].clone(),ca=1;ca<ra.length;ca++)Sa.x=Math.min(Sa.x,ra[ca].x),Sa.y=Math.min(Sa.y,ra[ca].y),Pa.x=Math.max(Pa.x,ra[ca].x),Pa.y=Math.max(Pa.y,ra[ca].y);pa=Sa.x>=si.x&&Pa.x<=li.x&&Sa.y>=si.y&&Pa.y<=li.y?[ra]:Pa.x<si.x||Sa.x>li.x||Pa.y<si.y||Sa.y>li.y?[]:b.clipLine([ra],si.x,si.y,li.x,li.y)}for(var da=0,Eu=pa;da<Eu.length;da+=1){var Ns;Ii.reset(Eu[da],.25*Un),Ns=Ii.length<=.5*Un?1:Math.ceil(Ii.paddedLength/Ia)+1;for(var Gu=0;Gu<Ns;Gu++){var Bu=Gu/Math.max(Ns-1,1),Jo=Ii.lerp(Bu),bs=Jo.x+100,$u=Jo.y+100;vr.push(bs,$u,Un,0);var qs=bs-Un,ef=$u-Un,_l=bs+Un,ac=$u+Un;if(Tn=Tn&&this.isOffscreen(qs,ef,_l,ac),dn=dn||this.isInsideGrid(qs,ef,_l,ac),!S&&this.grid.hitTestCircle(bs,$u,Un,Vt)&&(_n=!0,!ot))return{circles:[],offscreen:!1,collisionDetected:_n}}}}return{circles:!ot&&_n||!dn?[]:vr,offscreen:Tn,collisionDetected:_n}},Bn.prototype.queryRenderedSymbols=function(S){if(S.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var T=[],C=1/0,I=1/0,Z=-1/0,ee=-1/0,ae=0,Me=S;ae<Me.length;ae+=1){var ot=Me[ae],bt=new b.Point(ot.x+100,ot.y+100);C=Math.min(C,bt.x),I=Math.min(I,bt.y),Z=Math.max(Z,bt.x),ee=Math.max(ee,bt.y),T.push(bt)}for(var Vt={},Wt={},$t=0,vr=this.grid.query(C,I,Z,ee).concat(this.ignoredGrid.query(C,I,Z,ee));$t<vr.length;$t+=1){var hr=vr[$t],Ir=hr.key;if(Vt[Ir.bucketInstanceId]===void 0&&(Vt[Ir.bucketInstanceId]={}),!Vt[Ir.bucketInstanceId][Ir.featureIndex]){var lr=[new b.Point(hr.x1,hr.y1),new b.Point(hr.x2,hr.y1),new b.Point(hr.x2,hr.y2),new b.Point(hr.x1,hr.y2)];b.polygonIntersectsPolygon(T,lr)&&(Vt[Ir.bucketInstanceId][Ir.featureIndex]=!0,Wt[Ir.bucketInstanceId]===void 0&&(Wt[Ir.bucketInstanceId]=[]),Wt[Ir.bucketInstanceId].push(Ir.featureIndex))}}return Wt},Bn.prototype.insertCollisionBox=function(S,T,C,I,Z){(T?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:I,collisionGroupID:Z},S[0],S[1],S[2],S[3])},Bn.prototype.insertCollisionCircles=function(S,T,C,I,Z){for(var ee=T?this.ignoredGrid:this.grid,ae={bucketInstanceId:C,featureIndex:I,collisionGroupID:Z},Me=0;Me<S.length;Me+=4)ee.insertCircle(ae,S[Me],S[Me+1],S[Me+2])},Bn.prototype.projectAndGetPerspectiveRatio=function(S,T,C){var I=[T,C,0,1];return Pn(I,I,S),{point:new b.Point((I[0]/I[3]+1)/2*this.transform.width+100,(-I[1]/I[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/I[3]*.5}},Bn.prototype.isOffscreen=function(S,T,C,I){return C<100||S>=this.screenRightBoundary||I<100||T>this.screenBottomBoundary},Bn.prototype.isInsideGrid=function(S,T,C,I){return C>=0&&S<this.gridRightBoundary&&I>=0&&T<this.gridBottomBoundary},Bn.prototype.getViewportMatrix=function(){var S=b.identity([]);return b.translate(S,S,[-100,-100,0]),S};var Mi=function(S,T,C,I){this.opacity=S?Math.max(0,Math.min(1,S.opacity+(S.placed?T:-T))):I&&C?1:0,this.placed=C};Mi.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Xi=function(S,T,C,I,Z){this.text=new Mi(S?S.text:null,T,C,Z),this.icon=new Mi(S?S.icon:null,T,I,Z)};Xi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Wo=function(S,T,C){this.text=S,this.icon=T,this.skipFade=C},os=function(){this.invProjMatrix=b.create(),this.viewportMatrix=b.create(),this.circles=[]},Su=function(S,T,C,I,Z){this.bucketInstanceId=S,this.featureIndex=T,this.sourceLayerIndex=C,this.bucketIndex=I,this.tileID=Z},Oo=function(S){this.crossSourceCollisions=S,this.maxGroupID=0,this.collisionGroups={}};function ro(S,T,C,I,Z){var ee=b.getAnchorAlignment(S),ae=-(ee.horizontalAlign-.5)*T,Me=-(ee.verticalAlign-.5)*C,ot=b.evaluateVariableOffset(S,I);return new b.Point(ae+ot[0]*Z,Me+ot[1]*Z)}function cu(S,T,C,I,Z,ee){var ae=S.x1,Me=S.x2,ot=S.y1,bt=S.y2,Vt=S.anchorPointX,Wt=S.anchorPointY,$t=new b.Point(T,C);return I&&$t._rotate(Z?ee:-ee),{x1:ae+$t.x,y1:ot+$t.y,x2:Me+$t.x,y2:bt+$t.y,anchorPointX:Vt,anchorPointY:Wt}}Oo.prototype.get=function(S){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[S]){var T=++this.maxGroupID;this.collisionGroups[S]={ID:T,predicate:function(C){return C.collisionGroupID===T}}}return this.collisionGroups[S]};var Qo=function(S,T,C,I){this.transform=S.clone(),this.collisionIndex=new Bn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=T,this.retainedQueryData={},this.collisionGroups=new Oo(C),this.collisionCircleArrays={},this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}};function Zt(S,T,C,I,Z){S.emplaceBack(T?1:0,C?1:0,I||0,Z||0),S.emplaceBack(T?1:0,C?1:0,I||0,Z||0),S.emplaceBack(T?1:0,C?1:0,I||0,Z||0),S.emplaceBack(T?1:0,C?1:0,I||0,Z||0)}Qo.prototype.getBucketParts=function(S,T,C,I){var Z=C.getBucket(T),ee=C.latestFeatureIndex;if(Z&&ee&&T.id===Z.layerIds[0]){var ae=C.collisionBoxArray,Me=Z.layers[0].layout,ot=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),bt=C.tileSize/b.EXTENT,Vt=this.transform.calculatePosMatrix(C.tileID.toUnwrapped()),Wt=Me.get("text-pitch-alignment")==="map",$t=Me.get("text-rotation-alignment")==="map",vr=Cn(C,1,this.transform.zoom),hr=Io(Vt,Wt,$t,this.transform,vr),Ir=null;if(Wt){var lr=oi(Vt,Wt,$t,this.transform,vr);Ir=b.multiply([],this.transform.labelPlaneMatrix,lr)}this.retainedQueryData[Z.bucketInstanceId]=new Su(Z.bucketInstanceId,ee,Z.sourceLayerIndex,Z.index,C.tileID);var Pr={bucket:Z,layout:Me,posMatrix:Vt,textLabelPlaneMatrix:hr,labelToScreenMatrix:Ir,scale:ot,textPixelRatio:bt,holdingForFade:C.holdingForFade(),collisionBoxArray:ae,partiallyEvaluatedTextSize:b.evaluateSizeForZoom(Z.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Z.sourceID)};if(I)for(var jr=0,tn=Z.sortKeyRanges;jr<tn.length;jr+=1){var _n=tn[jr];S.push({sortKey:_n.sortKey,symbolInstanceStart:_n.symbolInstanceStart,symbolInstanceEnd:_n.symbolInstanceEnd,parameters:Pr})}else S.push({symbolInstanceStart:0,symbolInstanceEnd:Z.symbolInstances.length,parameters:Pr})}},Qo.prototype.attemptAnchorPlacement=function(S,T,C,I,Z,ee,ae,Me,ot,bt,Vt,Wt,$t,vr,hr){var Ir,lr=[Wt.textOffset0,Wt.textOffset1],Pr=ro(S,C,I,lr,Z),jr=this.collisionIndex.placeCollisionBox(cu(T,Pr.x,Pr.y,ee,ae,this.transform.angle),Vt,Me,ot,bt.predicate);if(!hr||this.collisionIndex.placeCollisionBox(cu(hr,Pr.x,Pr.y,ee,ae,this.transform.angle),Vt,Me,ot,bt.predicate).box.length!==0)return jr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Wt.crossTileID]&&this.prevPlacement.placements[Wt.crossTileID]&&this.prevPlacement.placements[Wt.crossTileID].text&&(Ir=this.prevPlacement.variableOffsets[Wt.crossTileID].anchor),this.variableOffsets[Wt.crossTileID]={textOffset:lr,width:C,height:I,anchor:S,textBoxScale:Z,prevAnchor:Ir},this.markUsedJustification($t,S,Wt,vr),$t.allowVerticalPlacement&&(this.markUsedOrientation($t,vr,Wt),this.placedOrientations[Wt.crossTileID]=vr),{shift:Pr,placedGlyphBoxes:jr}):void 0},Qo.prototype.placeLayerBucketPart=function(S,T,C){var I=this,Z=S.parameters,ee=Z.bucket,ae=Z.layout,Me=Z.posMatrix,ot=Z.textLabelPlaneMatrix,bt=Z.labelToScreenMatrix,Vt=Z.textPixelRatio,Wt=Z.holdingForFade,$t=Z.collisionBoxArray,vr=Z.partiallyEvaluatedTextSize,hr=Z.collisionGroup,Ir=ae.get("text-optional"),lr=ae.get("icon-optional"),Pr=ae.get("text-allow-overlap"),jr=ae.get("icon-allow-overlap"),tn=ae.get("text-rotation-alignment")==="map",_n=ae.get("text-pitch-alignment")==="map",dn=ae.get("icon-text-fit")!=="none",Tn=ae.get("symbol-z-order")==="viewport-y",Un=Pr&&(jr||!ee.hasIconData()||lr),si=jr&&(Pr||!ee.hasTextData()||Ir);!ee.collisionArrays&&$t&&ee.deserializeCollisionBoxes($t);var li=function(Fi,Ia){if(!T[Fi.crossTileID])if(Wt)I.placements[Fi.crossTileID]=new Wo(!1,!1,!1);else{var Xa,pa=!1,Sa=!1,Pa=!0,ca=null,da={box:null,offscreen:null},Eu={box:null,offscreen:null},Ns=null,Gu=null,Bu=0,Jo=0,bs=0;Ia.textFeatureIndex?Bu=Ia.textFeatureIndex:Fi.useRuntimeCollisionCircles&&(Bu=Fi.featureIndex),Ia.verticalTextFeatureIndex&&(Jo=Ia.verticalTextFeatureIndex);var $u=Ia.textBox;if($u){var qs=function(po){var Ku=b.WritingMode.horizontal;if(ee.allowVerticalPlacement&&!po&&I.prevPlacement){var Cu=I.prevPlacement.placedOrientations[Fi.crossTileID];Cu&&(I.placedOrientations[Fi.crossTileID]=Cu,I.markUsedOrientation(ee,Ku=Cu,Fi))}return Ku},ef=function(po,Ku){if(ee.allowVerticalPlacement&&Fi.numVerticalGlyphVertices>0&&Ia.verticalTextBox)for(var Cu=0,bc=ee.writingModes;Cu<bc.length&&(bc[Cu]===b.WritingMode.vertical?(da=Ku(),Eu=da):da=po(),!(da&&da.box&&da.box.length));Cu+=1);else da=po()};if(ae.get("text-variable-anchor")){var _l=ae.get("text-variable-anchor");if(I.prevPlacement&&I.prevPlacement.variableOffsets[Fi.crossTileID]){var ac=I.prevPlacement.variableOffsets[Fi.crossTileID];_l.indexOf(ac.anchor)>0&&(_l=_l.filter(function(po){return po!==ac.anchor})).unshift(ac.anchor)}var Ul=function(po,Ku,Cu){for(var bc=po.x2-po.x1,td=po.y2-po.y1,ph=Fi.textBoxScale,rd=dn&&!jr?Ku:null,Hl={box:[],offscreen:!1},Rl=Pr?2*_l.length:_l.length,jl=0;jl<Rl;++jl){var Hh=I.attemptAnchorPlacement(_l[jl%_l.length],po,bc,td,ph,tn,_n,Vt,Me,hr,jl>=_l.length,Fi,ee,Cu,rd);if(Hh&&(Hl=Hh.placedGlyphBoxes)&&Hl.box&&Hl.box.length){pa=!0,ca=Hh.shift;break}}return Hl};ef(function(){return Ul($u,Ia.iconBox,b.WritingMode.horizontal)},function(){var po=Ia.verticalTextBox;return ee.allowVerticalPlacement&&!(da&&da.box&&da.box.length)&&Fi.numVerticalGlyphVertices>0&&po?Ul(po,Ia.verticalIconBox,b.WritingMode.vertical):{box:null,offscreen:null}}),da&&(pa=da.box,Pa=da.offscreen);var _f=qs(da&&da.box);if(!pa&&I.prevPlacement){var zf=I.prevPlacement.variableOffsets[Fi.crossTileID];zf&&(I.variableOffsets[Fi.crossTileID]=zf,I.markUsedJustification(ee,zf.anchor,Fi,_f))}}else{var xc=function(po,Ku){var Cu=I.collisionIndex.placeCollisionBox(po,Pr,Vt,Me,hr.predicate);return Cu&&Cu.box&&Cu.box.length&&(I.markUsedOrientation(ee,Ku,Fi),I.placedOrientations[Fi.crossTileID]=Ku),Cu};ef(function(){return xc($u,b.WritingMode.horizontal)},function(){var po=Ia.verticalTextBox;return ee.allowVerticalPlacement&&Fi.numVerticalGlyphVertices>0&&po?xc(po,b.WritingMode.vertical):{box:null,offscreen:null}}),qs(da&&da.box&&da.box.length)}}if(pa=(Xa=da)&&Xa.box&&Xa.box.length>0,Pa=Xa&&Xa.offscreen,Fi.useRuntimeCollisionCircles){var Uf=ee.text.placedSymbolArray.get(Fi.centerJustifiedTextSymbolIndex),tf=b.evaluateSizeForFeature(ee.textSizeData,vr,Uf),Zl=ae.get("text-padding");Ns=I.collisionIndex.placeCollisionCircles(Pr,Uf,ee.lineVertexArray,ee.glyphOffsetArray,tf,Me,ot,bt,C,_n,hr.predicate,Fi.collisionCircleDiameter,Zl),pa=Pr||Ns.circles.length>0&&!Ns.collisionDetected,Pa=Pa&&Ns.offscreen}if(Ia.iconFeatureIndex&&(bs=Ia.iconFeatureIndex),Ia.iconBox){var xf=function(po){var Ku=dn&&ca?cu(po,ca.x,ca.y,tn,_n,I.transform.angle):po;return I.collisionIndex.placeCollisionBox(Ku,jr,Vt,Me,hr.predicate)};Sa=Eu&&Eu.box&&Eu.box.length&&Ia.verticalIconBox?(Gu=xf(Ia.verticalIconBox)).box.length>0:(Gu=xf(Ia.iconBox)).box.length>0,Pa=Pa&&Gu.offscreen}var wu=Ir||Fi.numHorizontalGlyphVertices===0&&Fi.numVerticalGlyphVertices===0,Is=lr||Fi.numIconVertices===0;if(wu||Is?Is?wu||(Sa=Sa&&pa):pa=Sa&&pa:Sa=pa=Sa&&pa,pa&&Xa&&Xa.box&&I.collisionIndex.insertCollisionBox(Xa.box,ae.get("text-ignore-placement"),ee.bucketInstanceId,Eu&&Eu.box&&Jo?Jo:Bu,hr.ID),Sa&&Gu&&I.collisionIndex.insertCollisionBox(Gu.box,ae.get("icon-ignore-placement"),ee.bucketInstanceId,bs,hr.ID),Ns&&(pa&&I.collisionIndex.insertCollisionCircles(Ns.circles,ae.get("text-ignore-placement"),ee.bucketInstanceId,Bu,hr.ID),C)){var Xu=ee.bucketInstanceId,Yu=I.collisionCircleArrays[Xu];Yu===void 0&&(Yu=I.collisionCircleArrays[Xu]=new os);for(var Vl=0;Vl<Ns.circles.length;Vl+=4)Yu.circles.push(Ns.circles[Vl+0]),Yu.circles.push(Ns.circles[Vl+1]),Yu.circles.push(Ns.circles[Vl+2]),Yu.circles.push(Ns.collisionDetected?1:0)}I.placements[Fi.crossTileID]=new Wo(pa||Un,Sa||si,Pa||ee.justReloaded),T[Fi.crossTileID]=!0}};if(Tn)for(var Ii=ee.getSortedSymbolIndexes(this.transform.angle),ea=Ii.length-1;ea>=0;--ea){var la=Ii[ea];li(ee.symbolInstances.get(la),ee.collisionArrays[la])}else for(var ra=S.symbolInstanceStart;ra<S.symbolInstanceEnd;ra++)li(ee.symbolInstances.get(ra),ee.collisionArrays[ra]);if(C&&ee.bucketInstanceId in this.collisionCircleArrays){var lo=this.collisionCircleArrays[ee.bucketInstanceId];b.invert(lo.invProjMatrix,Me),lo.viewportMatrix=this.collisionIndex.getViewportMatrix()}ee.justReloaded=!1},Qo.prototype.markUsedJustification=function(S,T,C,I){var Z;Z=I===b.WritingMode.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[b.getAnchorJustification(T)];for(var ee=0,ae=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];ee<ae.length;ee+=1){var Me=ae[ee];Me>=0&&(S.text.placedSymbolArray.get(Me).crossTileID=Z>=0&&Me!==Z?0:C.crossTileID)}},Qo.prototype.markUsedOrientation=function(S,T,C){for(var I=T===b.WritingMode.horizontal||T===b.WritingMode.horizontalOnly?T:0,Z=T===b.WritingMode.vertical?T:0,ee=0,ae=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];ee<ae.length;ee+=1)S.text.placedSymbolArray.get(ae[ee]).placedOrientation=I;C.verticalPlacedTextSymbolIndex&&(S.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=Z)},Qo.prototype.commit=function(S){this.commitTime=S,this.zoomAtLastRecencyCheck=this.transform.zoom;var T=this.prevPlacement,C=!1;this.prevZoomAdjustment=T?T.zoomAdjustment(this.transform.zoom):0;var I=T?T.symbolFadeChange(S):1,Z=T?T.opacities:{},ee=T?T.variableOffsets:{},ae=T?T.placedOrientations:{};for(var Me in this.placements){var ot=this.placements[Me],bt=Z[Me];bt?(this.opacities[Me]=new Xi(bt,I,ot.text,ot.icon),C=C||ot.text!==bt.text.placed||ot.icon!==bt.icon.placed):(this.opacities[Me]=new Xi(null,I,ot.text,ot.icon,ot.skipFade),C=C||ot.text||ot.icon)}for(var Vt in Z){var Wt=Z[Vt];if(!this.opacities[Vt]){var $t=new Xi(Wt,I,!1,!1);$t.isHidden()||(this.opacities[Vt]=$t,C=C||Wt.text.placed||Wt.icon.placed)}}for(var vr in ee)this.variableOffsets[vr]||!this.opacities[vr]||this.opacities[vr].isHidden()||(this.variableOffsets[vr]=ee[vr]);for(var hr in ae)this.placedOrientations[hr]||!this.opacities[hr]||this.opacities[hr].isHidden()||(this.placedOrientations[hr]=ae[hr]);C?this.lastPlacementChangeTime=S:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=T?T.lastPlacementChangeTime:S)},Qo.prototype.updateLayerOpacities=function(S,T){for(var C={},I=0,Z=T;I<Z.length;I+=1){var ee=Z[I],ae=ee.getBucket(S);ae&&ee.latestFeatureIndex&&S.id===ae.layerIds[0]&&this.updateBucketOpacities(ae,C,ee.collisionBoxArray)}},Qo.prototype.updateBucketOpacities=function(S,T,C){var I=this;S.hasTextData()&&S.text.opacityVertexArray.clear(),S.hasIconData()&&S.icon.opacityVertexArray.clear(),S.hasIconCollisionBoxData()&&S.iconCollisionBox.collisionVertexArray.clear(),S.hasTextCollisionBoxData()&&S.textCollisionBox.collisionVertexArray.clear();var Z=S.layers[0].layout,ee=new Xi(null,0,!1,!1,!0),ae=Z.get("text-allow-overlap"),Me=Z.get("icon-allow-overlap"),ot=Z.get("text-variable-anchor"),bt=Z.get("text-rotation-alignment")==="map",Vt=Z.get("text-pitch-alignment")==="map",Wt=Z.get("icon-text-fit")!=="none",$t=new Xi(null,0,ae&&(Me||!S.hasIconData()||Z.get("icon-optional")),Me&&(ae||!S.hasTextData()||Z.get("text-optional")),!0);!S.collisionArrays&&C&&(S.hasIconCollisionBoxData()||S.hasTextCollisionBoxData())&&S.deserializeCollisionBoxes(C);for(var vr=function(Pr,jr,tn){for(var _n=0;_n<jr/4;_n++)Pr.opacityVertexArray.emplaceBack(tn)},hr=function(Pr){var jr=S.symbolInstances.get(Pr),tn=jr.numHorizontalGlyphVertices,_n=jr.numVerticalGlyphVertices,dn=jr.crossTileID,Tn=I.opacities[dn];T[dn]?Tn=ee:Tn||(I.opacities[dn]=Tn=$t),T[dn]=!0;var Un=jr.numIconVertices>0,si=I.placedOrientations[jr.crossTileID],li=si===b.WritingMode.vertical,Ii=si===b.WritingMode.horizontal||si===b.WritingMode.horizontalOnly;if(tn>0||_n>0){var ea=Co(Tn.text);vr(S.text,tn,li?ko:ea),vr(S.text,_n,Ii?ko:ea);var la=Tn.text.isHidden();[jr.rightJustifiedTextSymbolIndex,jr.centerJustifiedTextSymbolIndex,jr.leftJustifiedTextSymbolIndex].forEach(function(da){da>=0&&(S.text.placedSymbolArray.get(da).hidden=la||li?1:0)}),jr.verticalPlacedTextSymbolIndex>=0&&(S.text.placedSymbolArray.get(jr.verticalPlacedTextSymbolIndex).hidden=la||Ii?1:0);var ra=I.variableOffsets[jr.crossTileID];ra&&I.markUsedJustification(S,ra.anchor,jr,si);var lo=I.placedOrientations[jr.crossTileID];lo&&(I.markUsedJustification(S,"left",jr,lo),I.markUsedOrientation(S,lo,jr))}if(Un){var Fi=Co(Tn.icon),Ia=!(Wt&&jr.verticalPlacedIconSymbolIndex&&li);jr.placedIconSymbolIndex>=0&&(vr(S.icon,jr.numIconVertices,Ia?Fi:ko),S.icon.placedSymbolArray.get(jr.placedIconSymbolIndex).hidden=Tn.icon.isHidden()),jr.verticalPlacedIconSymbolIndex>=0&&(vr(S.icon,jr.numVerticalIconVertices,Ia?ko:Fi),S.icon.placedSymbolArray.get(jr.verticalPlacedIconSymbolIndex).hidden=Tn.icon.isHidden())}if(S.hasIconCollisionBoxData()||S.hasTextCollisionBoxData()){var Xa=S.collisionArrays[Pr];if(Xa){var pa=new b.Point(0,0);if(Xa.textBox||Xa.verticalTextBox){var Sa=!0;if(ot){var Pa=I.variableOffsets[dn];Pa?(pa=ro(Pa.anchor,Pa.width,Pa.height,Pa.textOffset,Pa.textBoxScale),bt&&pa._rotate(Vt?I.transform.angle:-I.transform.angle)):Sa=!1}Xa.textBox&&Zt(S.textCollisionBox.collisionVertexArray,Tn.text.placed,!Sa||li,pa.x,pa.y),Xa.verticalTextBox&&Zt(S.textCollisionBox.collisionVertexArray,Tn.text.placed,!Sa||Ii,pa.x,pa.y)}var ca=!!(!Ii&&Xa.verticalIconBox);Xa.iconBox&&Zt(S.iconCollisionBox.collisionVertexArray,Tn.icon.placed,ca,Wt?pa.x:0,Wt?pa.y:0),Xa.verticalIconBox&&Zt(S.iconCollisionBox.collisionVertexArray,Tn.icon.placed,!ca,Wt?pa.x:0,Wt?pa.y:0)}}},Ir=0;Ir<S.symbolInstances.length;Ir++)hr(Ir);if(S.sortFeatures(this.transform.angle),this.retainedQueryData[S.bucketInstanceId]&&(this.retainedQueryData[S.bucketInstanceId].featureSortOrder=S.featureSortOrder),S.hasTextData()&&S.text.opacityVertexBuffer&&S.text.opacityVertexBuffer.updateData(S.text.opacityVertexArray),S.hasIconData()&&S.icon.opacityVertexBuffer&&S.icon.opacityVertexBuffer.updateData(S.icon.opacityVertexArray),S.hasIconCollisionBoxData()&&S.iconCollisionBox.collisionVertexBuffer&&S.iconCollisionBox.collisionVertexBuffer.updateData(S.iconCollisionBox.collisionVertexArray),S.hasTextCollisionBoxData()&&S.textCollisionBox.collisionVertexBuffer&&S.textCollisionBox.collisionVertexBuffer.updateData(S.textCollisionBox.collisionVertexArray),S.bucketInstanceId in this.collisionCircleArrays){var lr=this.collisionCircleArrays[S.bucketInstanceId];S.placementInvProjMatrix=lr.invProjMatrix,S.placementViewportMatrix=lr.viewportMatrix,S.collisionCircleArray=lr.circles,delete this.collisionCircleArrays[S.bucketInstanceId]}},Qo.prototype.symbolFadeChange=function(S){return this.fadeDuration===0?1:(S-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Qo.prototype.zoomAdjustment=function(S){return Math.max(0,(this.transform.zoom-S)/1.5)},Qo.prototype.hasTransitions=function(S){return this.stale||S-this.lastPlacementChangeTime<this.fadeDuration},Qo.prototype.stillRecent=function(S,T){var C=this.zoomAtLastRecencyCheck===T?1-this.zoomAdjustment(T):1;return this.zoomAtLastRecencyCheck=T,this.commitTime+this.fadeDuration*C>S},Qo.prototype.setStale=function(){this.stale=!0};var er=Math.pow(2,25),Ur=Math.pow(2,24),An=Math.pow(2,17),fi=Math.pow(2,16),Vi=Math.pow(2,9),fo=Math.pow(2,8),Ws=Math.pow(2,1);function Co(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;var T=S.placed?1:0,C=Math.floor(127*S.opacity);return C*er+T*Ur+C*An+T*fi+C*Vi+T*fo+C*Ws+T}var ko=0,ju=function(S){this._sortAcrossTiles=S.layout.get("symbol-z-order")!=="viewport-y"&&S.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ju.prototype.continuePlacement=function(S,T,C,I,Z){for(var ee=this._bucketParts;this._currentTileIndex<S.length;)if(T.getBucketParts(ee,I,S[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Z())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ee.sort(function(ae,Me){return ae.sortKey-Me.sortKey}));this._currentPartIndex<ee.length;)if(T.placeLayerBucketPart(ee[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,Z())return!0;return!1};var hf=function(S,T,C,I,Z,ee,ae){this.placement=new Qo(S,Z,ee,ae),this._currentPlacementIndex=T.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=I,this._done=!1};hf.prototype.isDone=function(){return this._done},hf.prototype.continuePlacement=function(S,T,C){for(var I=this,Z=b.browser.now(),ee=function(){var ot=b.browser.now()-Z;return!I._forceFullPlacement&&ot>2};this._currentPlacementIndex>=0;){var ae=T[S[this._currentPlacementIndex]],Me=this.placement.collisionIndex.transform.zoom;if(ae.type==="symbol"&&(!ae.minzoom||ae.minzoom<=Me)&&(!ae.maxzoom||ae.maxzoom>Me)){if(this._inProgressLayer||(this._inProgressLayer=new ju(ae)),this._inProgressLayer.continuePlacement(C[ae.source],this.placement,this._showCollisionBoxes,ae,ee))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},hf.prototype.commit=function(S){return this.placement.commit(S),this.placement};var Qf=512/b.EXTENT/2,Jf=function(S,T,C){this.tileID=S,this.indexedSymbolInstances={},this.bucketInstanceId=C;for(var I=0;I<T.length;I++){var Z=T.get(I),ee=Z.key;this.indexedSymbolInstances[ee]||(this.indexedSymbolInstances[ee]=[]),this.indexedSymbolInstances[ee].push({crossTileID:Z.crossTileID,coord:this.getScaledCoordinates(Z,S)})}};Jf.prototype.getScaledCoordinates=function(S,T){var C=Qf/Math.pow(2,T.canonical.z-this.tileID.canonical.z);return{x:Math.floor((T.canonical.x*b.EXTENT+S.anchorX)*C),y:Math.floor((T.canonical.y*b.EXTENT+S.anchorY)*C)}},Jf.prototype.findMatches=function(S,T,C){for(var I=this.tileID.canonical.z<T.canonical.z?1:Math.pow(2,this.tileID.canonical.z-T.canonical.z),Z=0;Z<S.length;Z++){var ee=S.get(Z);if(!ee.crossTileID){var ae=this.indexedSymbolInstances[ee.key];if(ae)for(var Me=this.getScaledCoordinates(ee,T),ot=0,bt=ae;ot<bt.length;ot+=1){var Vt=bt[ot];if(Math.abs(Vt.coord.x-Me.x)<=I&&Math.abs(Vt.coord.y-Me.y)<=I&&!C[Vt.crossTileID]){C[Vt.crossTileID]=!0,ee.crossTileID=Vt.crossTileID;break}}}}};var fu=function(){this.maxCrossTileID=0};fu.prototype.generate=function(){return++this.maxCrossTileID};var cc=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};cc.prototype.handleWrapJump=function(S){var T=Math.round((S-this.lng)/360);if(T!==0)for(var C in this.indexes){var I=this.indexes[C],Z={};for(var ee in I){var ae=I[ee];ae.tileID=ae.tileID.unwrapTo(ae.tileID.wrap+T),Z[ae.tileID.key]=ae}this.indexes[C]=Z}this.lng=S},cc.prototype.addBucket=function(S,T,C){if(this.indexes[S.overscaledZ]&&this.indexes[S.overscaledZ][S.key]){if(this.indexes[S.overscaledZ][S.key].bucketInstanceId===T.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(S.overscaledZ,this.indexes[S.overscaledZ][S.key])}for(var I=0;I<T.symbolInstances.length;I++)T.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[S.overscaledZ]||(this.usedCrossTileIDs[S.overscaledZ]={});var Z=this.usedCrossTileIDs[S.overscaledZ];for(var ee in this.indexes){var ae=this.indexes[ee];if(Number(ee)>S.overscaledZ)for(var Me in ae){var ot=ae[Me];ot.tileID.isChildOf(S)&&ot.findMatches(T.symbolInstances,S,Z)}else{var bt=ae[S.scaledTo(Number(ee)).key];bt&&bt.findMatches(T.symbolInstances,S,Z)}}for(var Vt=0;Vt<T.symbolInstances.length;Vt++){var Wt=T.symbolInstances.get(Vt);Wt.crossTileID||(Wt.crossTileID=C.generate(),Z[Wt.crossTileID]=!0)}return this.indexes[S.overscaledZ]===void 0&&(this.indexes[S.overscaledZ]={}),this.indexes[S.overscaledZ][S.key]=new Jf(S,T.symbolInstances,T.bucketInstanceId),!0},cc.prototype.removeBucketCrossTileIDs=function(S,T){for(var C in T.indexedSymbolInstances)for(var I=0,Z=T.indexedSymbolInstances[C];I<Z.length;I+=1)delete this.usedCrossTileIDs[S][Z[I].crossTileID]},cc.prototype.removeStaleBuckets=function(S){var T=!1;for(var C in this.indexes){var I=this.indexes[C];for(var Z in I)S[I[Z].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,I[Z]),delete I[Z],T=!0)}return T};var ru=function(){this.layerIndexes={},this.crossTileIDs=new fu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ru.prototype.addLayer=function(S,T,C){var I=this.layerIndexes[S.id];I===void 0&&(I=this.layerIndexes[S.id]=new cc);var Z=!1,ee={};I.handleWrapJump(C);for(var ae=0,Me=T;ae<Me.length;ae+=1){var ot=Me[ae],bt=ot.getBucket(S);bt&&S.id===bt.layerIds[0]&&(bt.bucketInstanceId||(bt.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(ot.tileID,bt,this.crossTileIDs)&&(Z=!0),ee[bt.bucketInstanceId]=!0)}return I.removeStaleBuckets(ee)&&(Z=!0),Z},ru.prototype.pruneUnusedLayers=function(S){var T={};for(var C in S.forEach(function(I){T[I]=!0}),this.layerIndexes)T[C]||delete this.layerIndexes[C]};var Al=function(S,T){return b.emitValidationErrors(S,T&&T.filter(function(C){return C.identifier!=="source.canvas"}))},fc=b.pick(Jn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),yo=b.pick(Jn,["setCenter","setZoom","setBearing","setPitch"]),Jl=function(){var S={},T=b.styleSpec.$version;for(var C in b.styleSpec.$root){var I,Z=b.styleSpec.$root[C];Z.required&&(I=C==="version"?T:Z.type==="array"?[]:{})!=null&&(S[C]=I)}return S}(),As=function(S){function T(C,I){var Z=this;I===void 0&&(I={}),S.call(this),this.map=C,this.dispatcher=new Ke(un(),this),this.imageManager=new E,this.imageManager.setEventedParent(this),this.glyphManager=new Je(C._requestManager,I.localIdeographFontFamily),this.lineAtlas=new He(256,512),this.crossTileSymbolIndex=new ru,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new b.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",b.getReferrer());var ee=this;this._rtlTextPluginCallback=T.registerForPluginStateChange(function(ae){ee.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:ae.pluginStatus,pluginURL:ae.pluginURL},function(Me,ot){if(b.triggerPluginCompletionEvent(Me),ot&&ot.every(function(Vt){return Vt}))for(var bt in ee.sourceCaches)ee.sourceCaches[bt].reload()})}),this.on("data",function(ae){if(ae.dataType==="source"&&ae.sourceDataType==="metadata"){var Me=Z.sourceCaches[ae.sourceId];if(Me){var ot=Me.getSource();if(ot&&ot.vectorLayerIds)for(var bt in Z._layers){var Vt=Z._layers[bt];Vt.source===ot.id&&Z._validateLayer(Vt)}}}})}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.loadURL=function(C,I){var Z=this;I===void 0&&(I={}),this.fire(new b.Event("dataloading",{dataType:"style"}));var ee=typeof I.validate=="boolean"?I.validate:!b.isMapboxURL(C);C=this.map._requestManager.normalizeStyleURL(C,I.accessToken);var ae=this.map._requestManager.transformRequest(C,b.ResourceType.Style);this._request=b.getJSON(ae,function(Me,ot){Z._request=null,Me?Z.fire(new b.ErrorEvent(Me)):ot&&Z._load(ot,ee)})},T.prototype.loadJSON=function(C,I){var Z=this;I===void 0&&(I={}),this.fire(new b.Event("dataloading",{dataType:"style"})),this._request=b.browser.frame(function(){Z._request=null,Z._load(C,I.validate!==!1)})},T.prototype.loadEmpty=function(){this.fire(new b.Event("dataloading",{dataType:"style"})),this._load(Jl,!1)},T.prototype._load=function(C,I){if(!I||!Al(this,b.validateStyle(C))){for(var Z in this._loaded=!0,this.stylesheet=C,C.sources)this.addSource(Z,C.sources[Z],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs);var ee=Wn(this.stylesheet.layers);this._order=ee.map(function(bt){return bt.id}),this._layers={},this._serializedLayers={};for(var ae=0,Me=ee;ae<Me.length;ae+=1){var ot=Me[ae];(ot=b.createStyleLayer(ot)).setEventedParent(this,{layer:{id:ot.id}}),this._layers[ot.id]=ot,this._serializedLayers[ot.id]=ot.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _e(this.stylesheet.light),this.fire(new b.Event("data",{dataType:"style"})),this.fire(new b.Event("style.load"))}},T.prototype._loadSprite=function(C){var I=this;this._spriteRequest=function(Z,ee,ae){var Me,ot,bt,Vt=b.browser.devicePixelRatio>1?"@2x":"",Wt=b.getJSON(ee.transformRequest(ee.normalizeSpriteURL(Z,Vt,".json"),b.ResourceType.SpriteJSON),function(hr,Ir){Wt=null,bt||(bt=hr,Me=Ir,vr())}),$t=b.getImage(ee.transformRequest(ee.normalizeSpriteURL(Z,Vt,".png"),b.ResourceType.SpriteImage),function(hr,Ir){$t=null,bt||(bt=hr,ot=Ir,vr())});function vr(){if(bt)ae(bt);else if(Me&&ot){var hr=b.browser.getImageData(ot),Ir={};for(var lr in Me){var Pr=Me[lr],jr=Pr.width,tn=Pr.height,_n=Pr.x,dn=Pr.y,Tn=Pr.sdf,Un=Pr.pixelRatio,si=Pr.stretchX,li=Pr.stretchY,Ii=Pr.content,ea=new b.RGBAImage({width:jr,height:tn});b.RGBAImage.copy(hr,ea,{x:_n,y:dn},{x:0,y:0},{width:jr,height:tn}),Ir[lr]={data:ea,pixelRatio:Un,sdf:Tn,stretchX:si,stretchY:li,content:Ii}}ae(null,Ir)}}return{cancel:function(){Wt&&(Wt.cancel(),Wt=null),$t&&($t.cancel(),$t=null)}}}(C,this.map._requestManager,function(Z,ee){if(I._spriteRequest=null,Z)I.fire(new b.ErrorEvent(Z));else if(ee)for(var ae in ee)I.imageManager.addImage(ae,ee[ae]);I.imageManager.setLoaded(!0),I._availableImages=I.imageManager.listImages(),I.dispatcher.broadcast("setImages",I._availableImages),I.fire(new b.Event("data",{dataType:"style"}))})},T.prototype._validateLayer=function(C){var I=this.sourceCaches[C.source];if(I){var Z=C.sourceLayer;if(Z){var ee=I.getSource();(ee.type==="geojson"||ee.vectorLayerIds&&ee.vectorLayerIds.indexOf(Z)===-1)&&this.fire(new b.ErrorEvent(new Error('Source layer "'+Z+'" does not exist on source "'+ee.id+'" as specified by style layer "'+C.id+'"')))}}},T.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var C in this.sourceCaches)if(!this.sourceCaches[C].loaded())return!1;return!!this.imageManager.isLoaded()},T.prototype._serializeLayers=function(C){for(var I=[],Z=0,ee=C;Z<ee.length;Z+=1){var ae=this._layers[ee[Z]];ae.type!=="custom"&&I.push(ae.serialize())}return I},T.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var C in this.sourceCaches)if(this.sourceCaches[C].hasTransition())return!0;for(var I in this._layers)if(this._layers[I].hasTransition())return!0;return!1},T.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},T.prototype.update=function(C){if(this._loaded){var I=this._changed;if(this._changed){var Z=Object.keys(this._updatedLayers),ee=Object.keys(this._removedLayers);for(var ae in(Z.length||ee.length)&&this._updateWorkerLayers(Z,ee),this._updatedSources){var Me=this._updatedSources[ae];Me==="reload"?this._reloadSource(ae):Me==="clear"&&this._clearSource(ae)}for(var ot in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ot].updateTransitions(C);this.light.updateTransitions(C),this._resetUpdates()}var bt={};for(var Vt in this.sourceCaches){var Wt=this.sourceCaches[Vt];bt[Vt]=Wt.used,Wt.used=!1}for(var $t=0,vr=this._order;$t<vr.length;$t+=1){var hr=this._layers[vr[$t]];hr.recalculate(C,this._availableImages),!hr.isHidden(C.zoom)&&hr.source&&(this.sourceCaches[hr.source].used=!0)}for(var Ir in bt){var lr=this.sourceCaches[Ir];bt[Ir]!==lr.used&&lr.fire(new b.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ir}))}this.light.recalculate(C),this.z=C.zoom,I&&this.fire(new b.Event("data",{dataType:"style"}))}},T.prototype._updateTilesForChangedImages=function(){var C=Object.keys(this._changedImages);if(C.length){for(var I in this.sourceCaches)this.sourceCaches[I].reloadTilesForDependencies(["icons","patterns"],C);this._changedImages={}}},T.prototype._updateWorkerLayers=function(C,I){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(C),removedIds:I})},T.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},T.prototype.setState=function(C){var I=this;if(this._checkLoaded(),Al(this,b.validateStyle(C)))return!1;(C=b.clone$1(C)).layers=Wn(C.layers);var Z=function(ae,Me){if(!ae)return[{command:Jn.setStyle,args:[Me]}];var ot=[];try{if(!b.deepEqual(ae.version,Me.version))return[{command:Jn.setStyle,args:[Me]}];b.deepEqual(ae.center,Me.center)||ot.push({command:Jn.setCenter,args:[Me.center]}),b.deepEqual(ae.zoom,Me.zoom)||ot.push({command:Jn.setZoom,args:[Me.zoom]}),b.deepEqual(ae.bearing,Me.bearing)||ot.push({command:Jn.setBearing,args:[Me.bearing]}),b.deepEqual(ae.pitch,Me.pitch)||ot.push({command:Jn.setPitch,args:[Me.pitch]}),b.deepEqual(ae.sprite,Me.sprite)||ot.push({command:Jn.setSprite,args:[Me.sprite]}),b.deepEqual(ae.glyphs,Me.glyphs)||ot.push({command:Jn.setGlyphs,args:[Me.glyphs]}),b.deepEqual(ae.transition,Me.transition)||ot.push({command:Jn.setTransition,args:[Me.transition]}),b.deepEqual(ae.light,Me.light)||ot.push({command:Jn.setLight,args:[Me.light]});var bt={},Vt=[];(function($t,vr,hr,Ir){var lr;for(lr in vr=vr||{},$t=$t||{})$t.hasOwnProperty(lr)&&(vr.hasOwnProperty(lr)||vi(lr,hr,Ir));for(lr in vr)vr.hasOwnProperty(lr)&&($t.hasOwnProperty(lr)?b.deepEqual($t[lr],vr[lr])||($t[lr].type==="geojson"&&vr[lr].type==="geojson"&&Ra($t,vr,lr)?hr.push({command:Jn.setGeoJSONSourceData,args:[lr,vr[lr].data]}):ga(lr,vr,hr,Ir)):sa(lr,vr,hr))})(ae.sources,Me.sources,Vt,bt);var Wt=[];ae.layers&&ae.layers.forEach(function($t){bt[$t.source]?ot.push({command:Jn.removeLayer,args:[$t.id]}):Wt.push($t)}),ot=ot.concat(Vt),function($t,vr,hr){vr=vr||[];var Ir,lr,Pr,jr,tn,_n,dn,Tn=($t=$t||[]).map(ja),Un=vr.map(ja),si=$t.reduce(ba,{}),li=vr.reduce(ba,{}),Ii=Tn.slice(),ea=Object.create(null);for(Ir=0,lr=0;Ir<Tn.length;Ir++)li.hasOwnProperty(Pr=Tn[Ir])?lr++:(hr.push({command:Jn.removeLayer,args:[Pr]}),Ii.splice(Ii.indexOf(Pr,lr),1));for(Ir=0,lr=0;Ir<Un.length;Ir++)Ii[Ii.length-1-Ir]!==(Pr=Un[Un.length-1-Ir])&&(si.hasOwnProperty(Pr)?(hr.push({command:Jn.removeLayer,args:[Pr]}),Ii.splice(Ii.lastIndexOf(Pr,Ii.length-lr),1)):lr++,hr.push({command:Jn.addLayer,args:[li[Pr],_n=Ii[Ii.length-Ir]]}),Ii.splice(Ii.length-Ir,0,Pr),ea[Pr]=!0);for(Ir=0;Ir<Un.length;Ir++)if(jr=si[Pr=Un[Ir]],tn=li[Pr],!ea[Pr]&&!b.deepEqual(jr,tn))if(b.deepEqual(jr.source,tn.source)&&b.deepEqual(jr["source-layer"],tn["source-layer"])&&b.deepEqual(jr.type,tn.type)){for(dn in ya(jr.layout,tn.layout,hr,Pr,null,Jn.setLayoutProperty),ya(jr.paint,tn.paint,hr,Pr,null,Jn.setPaintProperty),b.deepEqual(jr.filter,tn.filter)||hr.push({command:Jn.setFilter,args:[Pr,tn.filter]}),b.deepEqual(jr.minzoom,tn.minzoom)&&b.deepEqual(jr.maxzoom,tn.maxzoom)||hr.push({command:Jn.setLayerZoomRange,args:[Pr,tn.minzoom,tn.maxzoom]}),jr)jr.hasOwnProperty(dn)&&dn!=="layout"&&dn!=="paint"&&dn!=="filter"&&dn!=="metadata"&&dn!=="minzoom"&&dn!=="maxzoom"&&(dn.indexOf("paint.")===0?ya(jr[dn],tn[dn],hr,Pr,dn.slice(6),Jn.setPaintProperty):b.deepEqual(jr[dn],tn[dn])||hr.push({command:Jn.setLayerProperty,args:[Pr,dn,tn[dn]]}));for(dn in tn)tn.hasOwnProperty(dn)&&!jr.hasOwnProperty(dn)&&dn!=="layout"&&dn!=="paint"&&dn!=="filter"&&dn!=="metadata"&&dn!=="minzoom"&&dn!=="maxzoom"&&(dn.indexOf("paint.")===0?ya(jr[dn],tn[dn],hr,Pr,dn.slice(6),Jn.setPaintProperty):b.deepEqual(jr[dn],tn[dn])||hr.push({command:Jn.setLayerProperty,args:[Pr,dn,tn[dn]]}))}else hr.push({command:Jn.removeLayer,args:[Pr]}),_n=Ii[Ii.lastIndexOf(Pr)+1],hr.push({command:Jn.addLayer,args:[tn,_n]})}(Wt,Me.layers,ot)}catch($t){console.warn("Unable to compute style diff:",$t),ot=[{command:Jn.setStyle,args:[Me]}]}return ot}(this.serialize(),C).filter(function(ae){return!(ae.command in yo)});if(Z.length===0)return!1;var ee=Z.filter(function(ae){return!(ae.command in fc)});if(ee.length>0)throw new Error("Unimplemented: "+ee.map(function(ae){return ae.command}).join(", ")+".");return Z.forEach(function(ae){ae.command!=="setTransition"&&I[ae.command].apply(I,ae.args)}),this.stylesheet=C,!0},T.prototype.addImage=function(C,I){if(this.getImage(C))return this.fire(new b.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(C,I),this._afterImageUpdated(C)},T.prototype.updateImage=function(C,I){this.imageManager.updateImage(C,I)},T.prototype.getImage=function(C){return this.imageManager.getImage(C)},T.prototype.removeImage=function(C){if(!this.getImage(C))return this.fire(new b.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(C),this._afterImageUpdated(C)},T.prototype._afterImageUpdated=function(C){this._availableImages=this.imageManager.listImages(),this._changedImages[C]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new b.Event("data",{dataType:"style"}))},T.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},T.prototype.addSource=function(C,I,Z){var ee=this;if(Z===void 0&&(Z={}),this._checkLoaded(),this.sourceCaches[C]!==void 0)throw new Error("There is already a source with this ID");if(!I.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(I).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(I.type)>=0&&this._validate(b.validateStyle.source,"sources."+C,I,null,Z))){this.map&&this.map._collectResourceTiming&&(I.collectResourceTiming=!0);var ae=this.sourceCaches[C]=new st(C,I,this.dispatcher);ae.style=this,ae.setEventedParent(this,function(){return{isSourceLoaded:ee.loaded(),source:ae.serialize(),sourceId:C}}),ae.onAdd(this.map),this._changed=!0}},T.prototype.removeSource=function(C){if(this._checkLoaded(),this.sourceCaches[C]===void 0)throw new Error("There is no source with this ID");for(var I in this._layers)if(this._layers[I].source===C)return this.fire(new b.ErrorEvent(new Error('Source "'+C+'" cannot be removed while layer "'+I+'" is using it.')));var Z=this.sourceCaches[C];delete this.sourceCaches[C],delete this._updatedSources[C],Z.fire(new b.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:C})),Z.setEventedParent(null),Z.clearTiles(),Z.onRemove&&Z.onRemove(this.map),this._changed=!0},T.prototype.setGeoJSONSourceData=function(C,I){this._checkLoaded(),this.sourceCaches[C].getSource().setData(I),this._changed=!0},T.prototype.getSource=function(C){return this.sourceCaches[C]&&this.sourceCaches[C].getSource()},T.prototype.addLayer=function(C,I,Z){Z===void 0&&(Z={}),this._checkLoaded();var ee=C.id;if(this.getLayer(ee))this.fire(new b.ErrorEvent(new Error('Layer with id "'+ee+'" already exists on this map')));else{var ae;if(C.type==="custom"){if(Al(this,b.validateCustomStyleLayer(C)))return;ae=b.createStyleLayer(C)}else{if(typeof C.source=="object"&&(this.addSource(ee,C.source),C=b.clone$1(C),C=b.extend(C,{source:ee})),this._validate(b.validateStyle.layer,"layers."+ee,C,{arrayIndex:-1},Z))return;ae=b.createStyleLayer(C),this._validateLayer(ae),ae.setEventedParent(this,{layer:{id:ee}}),this._serializedLayers[ae.id]=ae.serialize()}var Me=I?this._order.indexOf(I):this._order.length;if(I&&Me===-1)this.fire(new b.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.')));else{if(this._order.splice(Me,0,ee),this._layerOrderChanged=!0,this._layers[ee]=ae,this._removedLayers[ee]&&ae.source&&ae.type!=="custom"){var ot=this._removedLayers[ee];delete this._removedLayers[ee],ot.type!==ae.type?this._updatedSources[ae.source]="clear":(this._updatedSources[ae.source]="reload",this.sourceCaches[ae.source].pause())}this._updateLayer(ae),ae.onAdd&&ae.onAdd(this.map)}}},T.prototype.moveLayer=function(C,I){if(this._checkLoaded(),this._changed=!0,this._layers[C]){if(C!==I){var Z=this._order.indexOf(C);this._order.splice(Z,1);var ee=I?this._order.indexOf(I):this._order.length;I&&ee===-1?this.fire(new b.ErrorEvent(new Error('Layer with id "'+I+'" does not exist on this map.'))):(this._order.splice(ee,0,C),this._layerOrderChanged=!0)}}else this.fire(new b.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be moved.")))},T.prototype.removeLayer=function(C){this._checkLoaded();var I=this._layers[C];if(I){I.setEventedParent(null);var Z=this._order.indexOf(C);this._order.splice(Z,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[C]=I,delete this._layers[C],delete this._serializedLayers[C],delete this._updatedLayers[C],delete this._updatedPaintProps[C],I.onRemove&&I.onRemove(this.map)}else this.fire(new b.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be removed.")))},T.prototype.getLayer=function(C){return this._layers[C]},T.prototype.hasLayer=function(C){return C in this._layers},T.prototype.setLayerZoomRange=function(C,I,Z){this._checkLoaded();var ee=this.getLayer(C);ee?ee.minzoom===I&&ee.maxzoom===Z||(I!=null&&(ee.minzoom=I),Z!=null&&(ee.maxzoom=Z),this._updateLayer(ee)):this.fire(new b.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot have zoom extent.")))},T.prototype.setFilter=function(C,I,Z){Z===void 0&&(Z={}),this._checkLoaded();var ee=this.getLayer(C);if(ee){if(!b.deepEqual(ee.filter,I))return I==null?(ee.filter=void 0,void this._updateLayer(ee)):void(this._validate(b.validateStyle.filter,"layers."+ee.id+".filter",I,null,Z)||(ee.filter=b.clone$1(I),this._updateLayer(ee)))}else this.fire(new b.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be filtered.")))},T.prototype.getFilter=function(C){return b.clone$1(this.getLayer(C).filter)},T.prototype.setLayoutProperty=function(C,I,Z,ee){ee===void 0&&(ee={}),this._checkLoaded();var ae=this.getLayer(C);ae?b.deepEqual(ae.getLayoutProperty(I),Z)||(ae.setLayoutProperty(I,Z,ee),this._updateLayer(ae)):this.fire(new b.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be styled.")))},T.prototype.getLayoutProperty=function(C,I){var Z=this.getLayer(C);if(Z)return Z.getLayoutProperty(I);this.fire(new b.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style.")))},T.prototype.setPaintProperty=function(C,I,Z,ee){ee===void 0&&(ee={}),this._checkLoaded();var ae=this.getLayer(C);ae?b.deepEqual(ae.getPaintProperty(I),Z)||(ae.setPaintProperty(I,Z,ee)&&this._updateLayer(ae),this._changed=!0,this._updatedPaintProps[C]=!0):this.fire(new b.ErrorEvent(new Error("The layer '"+C+"' does not exist in the map's style and cannot be styled.")))},T.prototype.getPaintProperty=function(C,I){return this.getLayer(C).getPaintProperty(I)},T.prototype.setFeatureState=function(C,I){this._checkLoaded();var Z=C.source,ee=C.sourceLayer,ae=this.sourceCaches[Z];if(ae!==void 0){var Me=ae.getSource().type;Me==="geojson"&&ee?this.fire(new b.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Me!=="vector"||ee?(C.id===void 0&&this.fire(new b.ErrorEvent(new Error("The feature id parameter must be provided."))),ae.setFeatureState(ee,C.id,I)):this.fire(new b.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new b.ErrorEvent(new Error("The source '"+Z+"' does not exist in the map's style.")))},T.prototype.removeFeatureState=function(C,I){this._checkLoaded();var Z=C.source,ee=this.sourceCaches[Z];if(ee!==void 0){var ae=ee.getSource().type,Me=ae==="vector"?C.sourceLayer:void 0;ae!=="vector"||Me?I&&typeof C.id!="string"&&typeof C.id!="number"?this.fire(new b.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):ee.removeFeatureState(Me,C.id,I):this.fire(new b.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new b.ErrorEvent(new Error("The source '"+Z+"' does not exist in the map's style.")))},T.prototype.getFeatureState=function(C){this._checkLoaded();var I=C.source,Z=C.sourceLayer,ee=this.sourceCaches[I];if(ee!==void 0){if(ee.getSource().type!=="vector"||Z)return C.id===void 0&&this.fire(new b.ErrorEvent(new Error("The feature id parameter must be provided."))),ee.getFeatureState(Z,C.id);this.fire(new b.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new b.ErrorEvent(new Error("The source '"+I+"' does not exist in the map's style.")))},T.prototype.getTransition=function(){return b.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},T.prototype.serialize=function(){return b.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:b.mapObject(this.sourceCaches,function(C){return C.serialize()}),layers:this._serializeLayers(this._order)},function(C){return C!==void 0})},T.prototype._updateLayer=function(C){this._updatedLayers[C.id]=!0,C.source&&!this._updatedSources[C.source]&&this.sourceCaches[C.source].getSource().type!=="raster"&&(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause()),this._changed=!0},T.prototype._flattenAndSortRenderedFeatures=function(C){for(var I=this,Z=function(si){return I._layers[si].type==="fill-extrusion"},ee={},ae=[],Me=this._order.length-1;Me>=0;Me--){var ot=this._order[Me];if(Z(ot)){ee[ot]=Me;for(var bt=0,Vt=C;bt<Vt.length;bt+=1){var Wt=Vt[bt][ot];if(Wt)for(var $t=0,vr=Wt;$t<vr.length;$t+=1)ae.push(vr[$t])}}}ae.sort(function(si,li){return li.intersectionZ-si.intersectionZ});for(var hr=[],Ir=this._order.length-1;Ir>=0;Ir--){var lr=this._order[Ir];if(Z(lr))for(var Pr=ae.length-1;Pr>=0;Pr--){var jr=ae[Pr].feature;if(ee[jr.layer.id]<Ir)break;hr.push(jr),ae.pop()}else for(var tn=0,_n=C;tn<_n.length;tn+=1){var dn=_n[tn][lr];if(dn)for(var Tn=0,Un=dn;Tn<Un.length;Tn+=1)hr.push(Un[Tn].feature)}}return hr},T.prototype.queryRenderedFeatures=function(C,I,Z){I&&I.filter&&this._validate(b.validateStyle.filter,"queryRenderedFeatures.filter",I.filter,null,I);var ee={};if(I&&I.layers){if(!Array.isArray(I.layers))return this.fire(new b.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ae=0,Me=I.layers;ae<Me.length;ae+=1){var ot=Me[ae],bt=this._layers[ot];if(!bt)return this.fire(new b.ErrorEvent(new Error("The layer '"+ot+"' does not exist in the map's style and cannot be queried for features."))),[];ee[bt.source]=!0}}var Vt=[];for(var Wt in I.availableImages=this._availableImages,this.sourceCaches)I.layers&&!ee[Wt]||Vt.push(me(this.sourceCaches[Wt],this._layers,this._serializedLayers,C,I,Z));return this.placement&&Vt.push(function($t,vr,hr,Ir,lr,Pr,jr){for(var tn={},_n=Pr.queryRenderedSymbols(Ir),dn=[],Tn=0,Un=Object.keys(_n).map(Number);Tn<Un.length;Tn+=1)dn.push(jr[Un[Tn]]);dn.sort(We);for(var si=function(){var ra=Ii[li],lo=ra.featureIndex.lookupSymbolFeatures(_n[ra.bucketInstanceId],vr,ra.bucketIndex,ra.sourceLayerIndex,lr.filter,lr.layers,lr.availableImages,$t);for(var Fi in lo){var Ia=tn[Fi]=tn[Fi]||[],Xa=lo[Fi];Xa.sort(function(Pa,ca){var da=ra.featureSortOrder;if(da){var Eu=da.indexOf(Pa.featureIndex);return da.indexOf(ca.featureIndex)-Eu}return ca.featureIndex-Pa.featureIndex});for(var pa=0,Sa=Xa;pa<Sa.length;pa+=1)Ia.push(Sa[pa])}},li=0,Ii=dn;li<Ii.length;li+=1)si();var ea=function(ra){tn[ra].forEach(function(lo){var Fi=lo.feature,Ia=hr[$t[ra].source].getFeatureState(Fi.layer["source-layer"],Fi.id);Fi.source=Fi.layer.source,Fi.layer["source-layer"]&&(Fi.sourceLayer=Fi.layer["source-layer"]),Fi.state=Ia})};for(var la in tn)ea(la);return tn}(this._layers,this._serializedLayers,this.sourceCaches,C,I,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Vt)},T.prototype.querySourceFeatures=function(C,I){I&&I.filter&&this._validate(b.validateStyle.filter,"querySourceFeatures.filter",I.filter,null,I);var Z=this.sourceCaches[C];return Z?function(ee,ae){for(var Me=ee.getRenderableIds().map(function(vr){return ee.getTileByID(vr)}),ot=[],bt={},Vt=0;Vt<Me.length;Vt++){var Wt=Me[Vt],$t=Wt.tileID.canonical.key;bt[$t]||(bt[$t]=!0,Wt.querySourceFeatures(ot,ae))}return ot}(Z,I):[]},T.prototype.addSourceType=function(C,I,Z){return T.getSourceType(C)?Z(new Error('A source type called "'+C+'" already exists.')):(T.setSourceType(C,I),I.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:C,url:I.workerSourceURL},Z):Z(null,null))},T.prototype.getLight=function(){return this.light.getLight()},T.prototype.setLight=function(C,I){I===void 0&&(I={}),this._checkLoaded();var Z=this.light.getLight(),ee=!1;for(var ae in C)if(!b.deepEqual(C[ae],Z[ae])){ee=!0;break}if(ee){var Me={now:b.browser.now(),transition:b.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(C,I),this.light.updateTransitions(Me)}},T.prototype._validate=function(C,I,Z,ee,ae){return ae===void 0&&(ae={}),(!ae||ae.validate!==!1)&&Al(this,C.call(b.validateStyle,b.extend({key:I,style:this.serialize(),value:Z,styleSpec:b.styleSpec},ee)))},T.prototype._remove=function(){for(var C in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),b.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[C].setEventedParent(null);for(var I in this.sourceCaches)this.sourceCaches[I].clearTiles(),this.sourceCaches[I].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},T.prototype._clearSource=function(C){this.sourceCaches[C].clearTiles()},T.prototype._reloadSource=function(C){this.sourceCaches[C].resume(),this.sourceCaches[C].reload()},T.prototype._updateSources=function(C){for(var I in this.sourceCaches)this.sourceCaches[I].update(C)},T.prototype._generateCollisionBoxes=function(){for(var C in this.sourceCaches)this._reloadSource(C)},T.prototype._updatePlacement=function(C,I,Z,ee,ae){ae===void 0&&(ae=!1);for(var Me=!1,ot=!1,bt={},Vt=0,Wt=this._order;Vt<Wt.length;Vt+=1){var $t=this._layers[Wt[Vt]];if($t.type==="symbol"){if(!bt[$t.source]){var vr=this.sourceCaches[$t.source];bt[$t.source]=vr.getRenderableIds(!0).map(function(jr){return vr.getTileByID(jr)}).sort(function(jr,tn){return tn.tileID.overscaledZ-jr.tileID.overscaledZ||(jr.tileID.isLessThan(tn.tileID)?-1:1)})}var hr=this.crossTileSymbolIndex.addLayer($t,bt[$t.source],C.center.lng);Me=Me||hr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ae=ae||this._layerOrderChanged||Z===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.browser.now(),C.zoom))&&(this.pauseablePlacement=new hf(C,this._order,ae,I,Z,ee,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,bt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.browser.now()),ot=!0),Me&&this.pauseablePlacement.placement.setStale()),ot||Me)for(var Ir=0,lr=this._order;Ir<lr.length;Ir+=1){var Pr=this._layers[lr[Ir]];Pr.type==="symbol"&&this.placement.updateLayerOpacities(Pr,bt[Pr.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.browser.now())},T.prototype._releaseSymbolFadeTiles=function(){for(var C in this.sourceCaches)this.sourceCaches[C].releaseSymbolFadeTiles()},T.prototype.getImages=function(C,I,Z){this.imageManager.getImages(I.icons,Z),this._updateTilesForChangedImages();var ee=this.sourceCaches[I.source];ee&&ee.setDependencies(I.tileID.key,I.type,I.icons)},T.prototype.getGlyphs=function(C,I,Z){this.glyphManager.getGlyphs(I.stacks,Z)},T.prototype.getResource=function(C,I,Z){return b.makeRequest(I,Z)},T}(b.Evented);As.getSourceType=function(S){return rt[S]},As.setSourceType=function(S,T){rt[S]=T},As.registerForPluginStateChange=b.registerForPluginStateChange;var Ts=b.createLayout([{name:"a_pos",type:"Int16",components:2}]),Mc=Uo(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Rc=Uo(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),If=Uo(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ll=Uo(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Dl=Uo("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ec=Uo(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ku=Uo(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ic=Uo("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),In=Uo("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Zi=Uo("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),_v=Uo(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),eh=Uo(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),hc=Uo(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Wp=Uo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ks=Uo(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Pc=Uo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Fl=Uo(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),nu=Uo(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),hu=Uo(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Tl=Uo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),pc=Uo(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Bl=Uo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Oc=Uo(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Kc=Uo(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),th=Uo(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Gp=Uo(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Uo(S,T){var C=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=T.match(/attribute ([\w]+) ([\w]+)/g),Z=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ee=T.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ae=ee?ee.concat(Z):Z,Me={};return{fragmentSource:S=S.replace(C,function(ot,bt,Vt,Wt,$t){return Me[$t]=!0,bt==="define"?`
#ifndef HAS_UNIFORM_u_`+$t+`
varying `+Vt+" "+Wt+" "+$t+`;
#else
uniform `+Vt+" "+Wt+" u_"+$t+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+$t+`
    `+Vt+" "+Wt+" "+$t+" = u_"+$t+`;
#endif
`}),vertexSource:T=T.replace(C,function(ot,bt,Vt,Wt,$t){var vr=Wt==="float"?"vec2":"vec4",hr=$t.match(/color/)?"color":vr;return Me[$t]?bt==="define"?`
#ifndef HAS_UNIFORM_u_`+$t+`
uniform lowp float u_`+$t+`_t;
attribute `+Vt+" "+vr+" a_"+$t+`;
varying `+Vt+" "+Wt+" "+$t+`;
#else
uniform `+Vt+" "+Wt+" u_"+$t+`;
#endif
`:hr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$t+`
    `+$t+" = a_"+$t+`;
#else
    `+Vt+" "+Wt+" "+$t+" = u_"+$t+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$t+`
    `+$t+" = unpack_mix_"+hr+"(a_"+$t+", u_"+$t+`_t);
#else
    `+Vt+" "+Wt+" "+$t+" = u_"+$t+`;
#endif
`:bt==="define"?`
#ifndef HAS_UNIFORM_u_`+$t+`
uniform lowp float u_`+$t+`_t;
attribute `+Vt+" "+vr+" a_"+$t+`;
#else
uniform `+Vt+" "+Wt+" u_"+$t+`;
#endif
`:hr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$t+`
    `+Vt+" "+Wt+" "+$t+" = a_"+$t+`;
#else
    `+Vt+" "+Wt+" "+$t+" = u_"+$t+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$t+`
    `+Vt+" "+Wt+" "+$t+" = unpack_mix_"+hr+"(a_"+$t+", u_"+$t+`_t);
#else
    `+Vt+" "+Wt+" "+$t+" = u_"+$t+`;
#endif
`}),staticAttributes:I,staticUniforms:ae}}var Od=Object.freeze({__proto__:null,prelude:Mc,background:Rc,backgroundPattern:If,circle:Ll,clippingMask:Dl,heatmap:ec,heatmapTexture:ku,collisionBox:Ic,collisionCircle:In,debug:Zi,fill:_v,fillOutline:eh,fillOutlinePattern:hc,fillPattern:Wp,fillExtrusion:Ks,fillExtrusionPattern:Pc,hillshadePrepare:Fl,hillshade:nu,line:hu,lineGradient:Tl,linePattern:pc,lineSDF:Bl,raster:Oc,symbolIcon:Kc,symbolSDF:th,symbolTextAndIcon:Gp}),Oh=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function pf(S){for(var T=[],C=0;C<S.length;C++)if(S[C]!==null){var I=S[C].split(" ");T.push(I.pop())}return T}Oh.prototype.bind=function(S,T,C,I,Z,ee,ae,Me){this.context=S;for(var ot=this.boundPaintVertexBuffers.length!==I.length,bt=0;!ot&&bt<I.length;bt++)this.boundPaintVertexBuffers[bt]!==I[bt]&&(ot=!0);S.extVertexArrayObject&&this.vao&&this.boundProgram===T&&this.boundLayoutVertexBuffer===C&&!ot&&this.boundIndexBuffer===Z&&this.boundVertexOffset===ee&&this.boundDynamicVertexBuffer===ae&&this.boundDynamicVertexBuffer2===Me?(S.bindVertexArrayOES.set(this.vao),ae&&ae.bind(),Z&&Z.dynamicDraw&&Z.bind(),Me&&Me.bind()):this.freshBind(T,C,I,Z,ee,ae,Me)},Oh.prototype.freshBind=function(S,T,C,I,Z,ee,ae){var Me,ot=S.numAttributes,bt=this.context,Vt=bt.gl;if(bt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=bt.extVertexArrayObject.createVertexArrayOES(),bt.bindVertexArrayOES.set(this.vao),Me=0,this.boundProgram=S,this.boundLayoutVertexBuffer=T,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=I,this.boundVertexOffset=Z,this.boundDynamicVertexBuffer=ee,this.boundDynamicVertexBuffer2=ae;else{Me=bt.currentNumAttributes||0;for(var Wt=ot;Wt<Me;Wt++)Vt.disableVertexAttribArray(Wt)}T.enableAttributes(Vt,S);for(var $t=0,vr=C;$t<vr.length;$t+=1)vr[$t].enableAttributes(Vt,S);ee&&ee.enableAttributes(Vt,S),ae&&ae.enableAttributes(Vt,S),T.bind(),T.setVertexAttribPointers(Vt,S,Z);for(var hr=0,Ir=C;hr<Ir.length;hr+=1){var lr=Ir[hr];lr.bind(),lr.setVertexAttribPointers(Vt,S,Z)}ee&&(ee.bind(),ee.setVertexAttribPointers(Vt,S,Z)),I&&I.bind(),ae&&(ae.bind(),ae.setVertexAttribPointers(Vt,S,Z)),bt.currentNumAttributes=ot},Oh.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ss=function(S,T,C,I,Z,ee){var ae=S.gl;this.program=ae.createProgram();for(var Me=pf(C.staticAttributes),ot=I?I.getBinderAttributes():[],bt=Me.concat(ot),Vt=C.staticUniforms?pf(C.staticUniforms):[],Wt=I?I.getBinderUniforms():[],$t=[],vr=0,hr=Vt.concat(Wt);vr<hr.length;vr+=1){var Ir=hr[vr];$t.indexOf(Ir)<0&&$t.push(Ir)}var lr=I?I.defines():[];ee&&lr.push("#define OVERDRAW_INSPECTOR;");var Pr=lr.concat(Mc.fragmentSource,C.fragmentSource).join(`
`),jr=lr.concat(Mc.vertexSource,C.vertexSource).join(`
`),tn=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())this.failedToCreate=!0;else{ae.shaderSource(tn,Pr),ae.compileShader(tn),ae.attachShader(this.program,tn);var _n=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())this.failedToCreate=!0;else{ae.shaderSource(_n,jr),ae.compileShader(_n),ae.attachShader(this.program,_n),this.attributes={};var dn={};this.numAttributes=bt.length;for(var Tn=0;Tn<this.numAttributes;Tn++)bt[Tn]&&(ae.bindAttribLocation(this.program,Tn,bt[Tn]),this.attributes[bt[Tn]]=Tn);ae.linkProgram(this.program),ae.deleteShader(_n),ae.deleteShader(tn);for(var Un=0;Un<$t.length;Un++){var si=$t[Un];if(si&&!dn[si]){var li=ae.getUniformLocation(this.program,si);li&&(dn[si]=li)}}this.fixedUniforms=Z(S,dn),this.binderUniforms=I?I.getUniforms(S,dn):[]}}};function cp(S,T,C){var I=1/Cn(C,1,T.transform.tileZoom),Z=Math.pow(2,C.tileID.overscaledZ),ee=C.tileSize*Math.pow(2,T.transform.tileZoom)/Z,ae=ee*(C.tileID.canonical.x+C.tileID.wrap*Z),Me=ee*C.tileID.canonical.y;return{u_image:0,u_texsize:C.imageAtlasTexture.size,u_scale:[I,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[ae>>16,Me>>16],u_pixel_coord_lower:[65535&ae,65535&Me]}}ss.prototype.draw=function(S,T,C,I,Z,ee,ae,Me,ot,bt,Vt,Wt,$t,vr,hr,Ir){var lr,Pr=S.gl;if(!this.failedToCreate){for(var jr in S.program.set(this.program),S.setDepthMode(C),S.setStencilMode(I),S.setColorMode(Z),S.setCullFace(ee),this.fixedUniforms)this.fixedUniforms[jr].set(ae[jr]);vr&&vr.setUniforms(S,this.binderUniforms,Wt,{zoom:$t});for(var tn=(lr={},lr[Pr.LINES]=2,lr[Pr.TRIANGLES]=3,lr[Pr.LINE_STRIP]=1,lr)[T],_n=0,dn=Vt.get();_n<dn.length;_n+=1){var Tn=dn[_n],Un=Tn.vaos||(Tn.vaos={});(Un[Me]||(Un[Me]=new Oh)).bind(S,this,ot,vr?vr.getPaintVertexBuffers():[],bt,Tn.vertexOffset,hr,Ir),Pr.drawElements(T,Tn.primitiveLength*tn,Pr.UNSIGNED_SHORT,Tn.primitiveOffset*tn*2)}}};var fp=function(S,T,C,I){var Z=T.style.light,ee=Z.properties.get("position"),ae=[ee.x,ee.y,ee.z],Me=b.create$1();Z.properties.get("anchor")==="viewport"&&b.fromRotation(Me,-T.transform.angle),b.transformMat3(ae,ae,Me);var ot=Z.properties.get("color");return{u_matrix:S,u_lightpos:ae,u_lightintensity:Z.properties.get("intensity"),u_lightcolor:[ot.r,ot.g,ot.b],u_vertical_gradient:+C,u_opacity:I}},Lu=function(S,T,C,I,Z,ee,ae){return b.extend(fp(S,T,C,I),cp(ee,T,ae),{u_height_factor:-Math.pow(2,Z.overscaledZ)/ae.tileSize/8})},Tt=function(S){return{u_matrix:S}},mr=function(S,T,C,I){return b.extend(Tt(S),cp(C,T,I))},Hr=function(S,T){return{u_matrix:S,u_world:T}},Qr=function(S,T,C,I,Z){return b.extend(mr(S,T,C,I),{u_world:Z})},On=function(S,T,C,I){var Z,ee,ae=S.transform;if(I.paint.get("circle-pitch-alignment")==="map"){var Me=Cn(C,1,ae.zoom);Z=!0,ee=[Me,Me]}else Z=!1,ee=ae.pixelsToGLUnits;return{u_camera_to_center_distance:ae.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:S.translatePosMatrix(T.posMatrix,C,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+Z,u_device_pixel_ratio:b.browser.devicePixelRatio,u_extrude_scale:ee}},gi=function(S,T,C){var I=Cn(C,1,T.zoom),Z=Math.pow(2,T.zoom-C.tileID.overscaledZ),ee=C.tileID.overscaleFactor();return{u_matrix:S,u_camera_to_center_distance:T.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[T.pixelsToGLUnits[0]/(I*Z),T.pixelsToGLUnits[1]/(I*Z)],u_overscale_factor:ee}},ua=function(S,T,C){return{u_matrix:S,u_inv_matrix:T,u_camera_to_center_distance:C.cameraToCenterDistance,u_viewport_size:[C.width,C.height]}},_o=function(S,T,C){return C===void 0&&(C=1),{u_matrix:S,u_color:T,u_overlay:0,u_overlay_scale:C}},Fs=function(S){return{u_matrix:S}},vl=function(S,T,C,I){return{u_matrix:S,u_extrude_scale:Cn(T,1,C),u_intensity:I}},rl=function(S,T,C){var I=S.transform;return{u_matrix:pp(S,T,C),u_ratio:1/Cn(T,1,I.zoom),u_device_pixel_ratio:b.browser.devicePixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},Lo=function(S,T,C,I){return b.extend(rl(S,T,C),{u_image:0,u_image_height:I})},hp=function(S,T,C,I){var Z=S.transform,ee=qc(T,Z);return{u_matrix:pp(S,T,C),u_texsize:T.imageAtlasTexture.size,u_ratio:1/Cn(T,1,Z.zoom),u_device_pixel_ratio:b.browser.devicePixelRatio,u_image:0,u_scale:[ee,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/Z.pixelsToGLUnits[0],1/Z.pixelsToGLUnits[1]]}},kd=function(S,T,C,I,Z){var ee=S.lineAtlas,ae=qc(T,S.transform),Me=C.layout.get("line-cap")==="round",ot=ee.getDash(I.from,Me),bt=ee.getDash(I.to,Me),Vt=ot.width*Z.fromScale,Wt=bt.width*Z.toScale;return b.extend(rl(S,T,C),{u_patternscale_a:[ae/Vt,-ot.height/2],u_patternscale_b:[ae/Wt,-bt.height/2],u_sdfgamma:ee.width/(256*Math.min(Vt,Wt)*b.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:ot.y,u_tex_y_b:bt.y,u_mix:Z.t})};function qc(S,T){return 1/Cn(S,1,T.tileZoom)}function pp(S,T,C){return S.translatePosMatrix(T.tileID.posMatrix,T,C.paint.get("line-translate"),C.paint.get("line-translate-anchor"))}var df=function(S,T,C,I,Z){return{u_matrix:S,u_tl_parent:T,u_scale_parent:C,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*Z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Z.paint.get("raster-brightness-min"),u_brightness_high:Z.paint.get("raster-brightness-max"),u_saturation_factor:(ae=Z.paint.get("raster-saturation"),ae>0?1-1/(1.001-ae):-ae),u_contrast_factor:(ee=Z.paint.get("raster-contrast"),ee>0?1/(1-ee):1+ee),u_spin_weights:$p(Z.paint.get("raster-hue-rotate"))};var ee,ae};function $p(S){S*=Math.PI/180;var T=Math.sin(S),C=Math.cos(S);return[(2*C+1)/3,(-Math.sqrt(3)*T-C+1)/3,(Math.sqrt(3)*T-C+1)/3]}var Ta,vf=function(S,T,C,I,Z,ee,ae,Me,ot,bt){var Vt=Z.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:T?T.uSizeT:0,u_size:T?T.uSize:0,u_camera_to_center_distance:Vt.cameraToCenterDistance,u_pitch:Vt.pitch/360*2*Math.PI,u_rotate_symbol:+C,u_aspect_ratio:Vt.width/Vt.height,u_fade_change:Z.options.fadeDuration?Z.symbolFadeChange:1,u_matrix:ee,u_label_plane_matrix:ae,u_coord_matrix:Me,u_is_text:+ot,u_pitch_with_map:+I,u_texsize:bt,u_texture:0}},rh=function(S,T,C,I,Z,ee,ae,Me,ot,bt,Vt){var Wt=Z.transform;return b.extend(vf(S,T,C,I,Z,ee,ae,Me,ot,bt),{u_gamma_scale:I?Math.cos(Wt._pitch)*Wt.cameraToCenterDistance:1,u_device_pixel_ratio:b.browser.devicePixelRatio,u_is_halo:+Vt})},nh=function(S,T,C,I,Z,ee,ae,Me,ot,bt){return b.extend(rh(S,T,C,I,Z,ee,ae,Me,!0,ot,!0),{u_texsize_icon:bt,u_texture_icon:1})},Pf=function(S,T,C){return{u_matrix:S,u_opacity:T,u_color:C}},ih=function(S,T,C,I,Z,ee){return b.extend(function(ae,Me,ot,bt){var Vt=ot.imageManager.getPattern(ae.from.toString()),Wt=ot.imageManager.getPattern(ae.to.toString()),$t=ot.imageManager.getPixelSize(),vr=$t.width,hr=$t.height,Ir=Math.pow(2,bt.tileID.overscaledZ),lr=bt.tileSize*Math.pow(2,ot.transform.tileZoom)/Ir,Pr=lr*(bt.tileID.canonical.x+bt.tileID.wrap*Ir),jr=lr*bt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Vt.tl,u_pattern_br_a:Vt.br,u_pattern_tl_b:Wt.tl,u_pattern_br_b:Wt.br,u_texsize:[vr,hr],u_mix:Me.t,u_pattern_size_a:Vt.displaySize,u_pattern_size_b:Wt.displaySize,u_scale_a:Me.fromScale,u_scale_b:Me.toScale,u_tile_units_to_pixels:1/Cn(bt,1,ot.transform.tileZoom),u_pixel_coord_upper:[Pr>>16,jr>>16],u_pixel_coord_lower:[65535&Pr,65535&jr]}}(I,ee,C,Z),{u_matrix:S,u_opacity:T})},Gs={fillExtrusion:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_lightpos:new b.Uniform3f(S,T.u_lightpos),u_lightintensity:new b.Uniform1f(S,T.u_lightintensity),u_lightcolor:new b.Uniform3f(S,T.u_lightcolor),u_vertical_gradient:new b.Uniform1f(S,T.u_vertical_gradient),u_opacity:new b.Uniform1f(S,T.u_opacity)}},fillExtrusionPattern:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_lightpos:new b.Uniform3f(S,T.u_lightpos),u_lightintensity:new b.Uniform1f(S,T.u_lightintensity),u_lightcolor:new b.Uniform3f(S,T.u_lightcolor),u_vertical_gradient:new b.Uniform1f(S,T.u_vertical_gradient),u_height_factor:new b.Uniform1f(S,T.u_height_factor),u_image:new b.Uniform1i(S,T.u_image),u_texsize:new b.Uniform2f(S,T.u_texsize),u_pixel_coord_upper:new b.Uniform2f(S,T.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(S,T.u_pixel_coord_lower),u_scale:new b.Uniform3f(S,T.u_scale),u_fade:new b.Uniform1f(S,T.u_fade),u_opacity:new b.Uniform1f(S,T.u_opacity)}},fill:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix)}},fillPattern:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_image:new b.Uniform1i(S,T.u_image),u_texsize:new b.Uniform2f(S,T.u_texsize),u_pixel_coord_upper:new b.Uniform2f(S,T.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(S,T.u_pixel_coord_lower),u_scale:new b.Uniform3f(S,T.u_scale),u_fade:new b.Uniform1f(S,T.u_fade)}},fillOutline:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_world:new b.Uniform2f(S,T.u_world)}},fillOutlinePattern:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_world:new b.Uniform2f(S,T.u_world),u_image:new b.Uniform1i(S,T.u_image),u_texsize:new b.Uniform2f(S,T.u_texsize),u_pixel_coord_upper:new b.Uniform2f(S,T.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(S,T.u_pixel_coord_lower),u_scale:new b.Uniform3f(S,T.u_scale),u_fade:new b.Uniform1f(S,T.u_fade)}},circle:function(S,T){return{u_camera_to_center_distance:new b.Uniform1f(S,T.u_camera_to_center_distance),u_scale_with_map:new b.Uniform1i(S,T.u_scale_with_map),u_pitch_with_map:new b.Uniform1i(S,T.u_pitch_with_map),u_extrude_scale:new b.Uniform2f(S,T.u_extrude_scale),u_device_pixel_ratio:new b.Uniform1f(S,T.u_device_pixel_ratio),u_matrix:new b.UniformMatrix4f(S,T.u_matrix)}},collisionBox:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_camera_to_center_distance:new b.Uniform1f(S,T.u_camera_to_center_distance),u_pixels_to_tile_units:new b.Uniform1f(S,T.u_pixels_to_tile_units),u_extrude_scale:new b.Uniform2f(S,T.u_extrude_scale),u_overscale_factor:new b.Uniform1f(S,T.u_overscale_factor)}},collisionCircle:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_inv_matrix:new b.UniformMatrix4f(S,T.u_inv_matrix),u_camera_to_center_distance:new b.Uniform1f(S,T.u_camera_to_center_distance),u_viewport_size:new b.Uniform2f(S,T.u_viewport_size)}},debug:function(S,T){return{u_color:new b.UniformColor(S,T.u_color),u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_overlay:new b.Uniform1i(S,T.u_overlay),u_overlay_scale:new b.Uniform1f(S,T.u_overlay_scale)}},clippingMask:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix)}},heatmap:function(S,T){return{u_extrude_scale:new b.Uniform1f(S,T.u_extrude_scale),u_intensity:new b.Uniform1f(S,T.u_intensity),u_matrix:new b.UniformMatrix4f(S,T.u_matrix)}},heatmapTexture:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_world:new b.Uniform2f(S,T.u_world),u_image:new b.Uniform1i(S,T.u_image),u_color_ramp:new b.Uniform1i(S,T.u_color_ramp),u_opacity:new b.Uniform1f(S,T.u_opacity)}},hillshade:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_image:new b.Uniform1i(S,T.u_image),u_latrange:new b.Uniform2f(S,T.u_latrange),u_light:new b.Uniform2f(S,T.u_light),u_shadow:new b.UniformColor(S,T.u_shadow),u_highlight:new b.UniformColor(S,T.u_highlight),u_accent:new b.UniformColor(S,T.u_accent)}},hillshadePrepare:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_image:new b.Uniform1i(S,T.u_image),u_dimension:new b.Uniform2f(S,T.u_dimension),u_zoom:new b.Uniform1f(S,T.u_zoom),u_unpack:new b.Uniform4f(S,T.u_unpack)}},line:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_ratio:new b.Uniform1f(S,T.u_ratio),u_device_pixel_ratio:new b.Uniform1f(S,T.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(S,T.u_units_to_pixels)}},lineGradient:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_ratio:new b.Uniform1f(S,T.u_ratio),u_device_pixel_ratio:new b.Uniform1f(S,T.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(S,T.u_units_to_pixels),u_image:new b.Uniform1i(S,T.u_image),u_image_height:new b.Uniform1f(S,T.u_image_height)}},linePattern:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_texsize:new b.Uniform2f(S,T.u_texsize),u_ratio:new b.Uniform1f(S,T.u_ratio),u_device_pixel_ratio:new b.Uniform1f(S,T.u_device_pixel_ratio),u_image:new b.Uniform1i(S,T.u_image),u_units_to_pixels:new b.Uniform2f(S,T.u_units_to_pixels),u_scale:new b.Uniform3f(S,T.u_scale),u_fade:new b.Uniform1f(S,T.u_fade)}},lineSDF:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_ratio:new b.Uniform1f(S,T.u_ratio),u_device_pixel_ratio:new b.Uniform1f(S,T.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(S,T.u_units_to_pixels),u_patternscale_a:new b.Uniform2f(S,T.u_patternscale_a),u_patternscale_b:new b.Uniform2f(S,T.u_patternscale_b),u_sdfgamma:new b.Uniform1f(S,T.u_sdfgamma),u_image:new b.Uniform1i(S,T.u_image),u_tex_y_a:new b.Uniform1f(S,T.u_tex_y_a),u_tex_y_b:new b.Uniform1f(S,T.u_tex_y_b),u_mix:new b.Uniform1f(S,T.u_mix)}},raster:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_tl_parent:new b.Uniform2f(S,T.u_tl_parent),u_scale_parent:new b.Uniform1f(S,T.u_scale_parent),u_buffer_scale:new b.Uniform1f(S,T.u_buffer_scale),u_fade_t:new b.Uniform1f(S,T.u_fade_t),u_opacity:new b.Uniform1f(S,T.u_opacity),u_image0:new b.Uniform1i(S,T.u_image0),u_image1:new b.Uniform1i(S,T.u_image1),u_brightness_low:new b.Uniform1f(S,T.u_brightness_low),u_brightness_high:new b.Uniform1f(S,T.u_brightness_high),u_saturation_factor:new b.Uniform1f(S,T.u_saturation_factor),u_contrast_factor:new b.Uniform1f(S,T.u_contrast_factor),u_spin_weights:new b.Uniform3f(S,T.u_spin_weights)}},symbolIcon:function(S,T){return{u_is_size_zoom_constant:new b.Uniform1i(S,T.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(S,T.u_is_size_feature_constant),u_size_t:new b.Uniform1f(S,T.u_size_t),u_size:new b.Uniform1f(S,T.u_size),u_camera_to_center_distance:new b.Uniform1f(S,T.u_camera_to_center_distance),u_pitch:new b.Uniform1f(S,T.u_pitch),u_rotate_symbol:new b.Uniform1i(S,T.u_rotate_symbol),u_aspect_ratio:new b.Uniform1f(S,T.u_aspect_ratio),u_fade_change:new b.Uniform1f(S,T.u_fade_change),u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(S,T.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(S,T.u_coord_matrix),u_is_text:new b.Uniform1i(S,T.u_is_text),u_pitch_with_map:new b.Uniform1i(S,T.u_pitch_with_map),u_texsize:new b.Uniform2f(S,T.u_texsize),u_texture:new b.Uniform1i(S,T.u_texture)}},symbolSDF:function(S,T){return{u_is_size_zoom_constant:new b.Uniform1i(S,T.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(S,T.u_is_size_feature_constant),u_size_t:new b.Uniform1f(S,T.u_size_t),u_size:new b.Uniform1f(S,T.u_size),u_camera_to_center_distance:new b.Uniform1f(S,T.u_camera_to_center_distance),u_pitch:new b.Uniform1f(S,T.u_pitch),u_rotate_symbol:new b.Uniform1i(S,T.u_rotate_symbol),u_aspect_ratio:new b.Uniform1f(S,T.u_aspect_ratio),u_fade_change:new b.Uniform1f(S,T.u_fade_change),u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(S,T.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(S,T.u_coord_matrix),u_is_text:new b.Uniform1i(S,T.u_is_text),u_pitch_with_map:new b.Uniform1i(S,T.u_pitch_with_map),u_texsize:new b.Uniform2f(S,T.u_texsize),u_texture:new b.Uniform1i(S,T.u_texture),u_gamma_scale:new b.Uniform1f(S,T.u_gamma_scale),u_device_pixel_ratio:new b.Uniform1f(S,T.u_device_pixel_ratio),u_is_halo:new b.Uniform1i(S,T.u_is_halo)}},symbolTextAndIcon:function(S,T){return{u_is_size_zoom_constant:new b.Uniform1i(S,T.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(S,T.u_is_size_feature_constant),u_size_t:new b.Uniform1f(S,T.u_size_t),u_size:new b.Uniform1f(S,T.u_size),u_camera_to_center_distance:new b.Uniform1f(S,T.u_camera_to_center_distance),u_pitch:new b.Uniform1f(S,T.u_pitch),u_rotate_symbol:new b.Uniform1i(S,T.u_rotate_symbol),u_aspect_ratio:new b.Uniform1f(S,T.u_aspect_ratio),u_fade_change:new b.Uniform1f(S,T.u_fade_change),u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(S,T.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(S,T.u_coord_matrix),u_is_text:new b.Uniform1i(S,T.u_is_text),u_pitch_with_map:new b.Uniform1i(S,T.u_pitch_with_map),u_texsize:new b.Uniform2f(S,T.u_texsize),u_texsize_icon:new b.Uniform2f(S,T.u_texsize_icon),u_texture:new b.Uniform1i(S,T.u_texture),u_texture_icon:new b.Uniform1i(S,T.u_texture_icon),u_gamma_scale:new b.Uniform1f(S,T.u_gamma_scale),u_device_pixel_ratio:new b.Uniform1f(S,T.u_device_pixel_ratio),u_is_halo:new b.Uniform1i(S,T.u_is_halo)}},background:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_opacity:new b.Uniform1f(S,T.u_opacity),u_color:new b.UniformColor(S,T.u_color)}},backgroundPattern:function(S,T){return{u_matrix:new b.UniformMatrix4f(S,T.u_matrix),u_opacity:new b.Uniform1f(S,T.u_opacity),u_image:new b.Uniform1i(S,T.u_image),u_pattern_tl_a:new b.Uniform2f(S,T.u_pattern_tl_a),u_pattern_br_a:new b.Uniform2f(S,T.u_pattern_br_a),u_pattern_tl_b:new b.Uniform2f(S,T.u_pattern_tl_b),u_pattern_br_b:new b.Uniform2f(S,T.u_pattern_br_b),u_texsize:new b.Uniform2f(S,T.u_texsize),u_mix:new b.Uniform1f(S,T.u_mix),u_pattern_size_a:new b.Uniform2f(S,T.u_pattern_size_a),u_pattern_size_b:new b.Uniform2f(S,T.u_pattern_size_b),u_scale_a:new b.Uniform1f(S,T.u_scale_a),u_scale_b:new b.Uniform1f(S,T.u_scale_b),u_pixel_coord_upper:new b.Uniform2f(S,T.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(S,T.u_pixel_coord_lower),u_tile_units_to_pixels:new b.Uniform1f(S,T.u_tile_units_to_pixels)}}};function dc(S,T,C,I,Z,ee,ae){for(var Me=S.context,ot=Me.gl,bt=S.useProgram("collisionBox"),Vt=[],Wt=0,$t=0,vr=0;vr<I.length;vr++){var hr=I[vr],Ir=T.getTile(hr),lr=Ir.getBucket(C);if(lr){var Pr=hr.posMatrix;Z[0]===0&&Z[1]===0||(Pr=S.translatePosMatrix(hr.posMatrix,Ir,Z,ee));var jr=ae?lr.textCollisionBox:lr.iconCollisionBox,tn=lr.collisionCircleArray;if(tn.length>0){var _n=b.create(),dn=Pr;b.mul(_n,lr.placementInvProjMatrix,S.transform.glCoordMatrix),b.mul(_n,_n,lr.placementViewportMatrix),Vt.push({circleArray:tn,circleOffset:$t,transform:dn,invTransform:_n}),$t=Wt+=tn.length/4}jr&&bt.draw(Me,ot.LINES,tt.disabled,St.disabled,S.colorModeForRenderPass(),gr.disabled,gi(Pr,S.transform,Ir),C.id,jr.layoutVertexBuffer,jr.indexBuffer,jr.segments,null,S.transform.zoom,null,null,jr.collisionVertexBuffer)}}if(ae&&Vt.length){var Tn=S.useProgram("collisionCircle"),Un=new b.StructArrayLayout2f1f2i16;Un.resize(4*Wt),Un._trim();for(var si=0,li=0,Ii=Vt;li<Ii.length;li+=1)for(var ea=Ii[li],la=0;la<ea.circleArray.length/4;la++){var ra=4*la,lo=ea.circleArray[ra+0],Fi=ea.circleArray[ra+1],Ia=ea.circleArray[ra+2],Xa=ea.circleArray[ra+3];Un.emplace(si++,lo,Fi,Ia,Xa,0),Un.emplace(si++,lo,Fi,Ia,Xa,1),Un.emplace(si++,lo,Fi,Ia,Xa,2),Un.emplace(si++,lo,Fi,Ia,Xa,3)}(!Ta||Ta.length<2*Wt)&&(Ta=function(Ns){var Gu=2*Ns,Bu=new b.StructArrayLayout3ui6;Bu.resize(Gu),Bu._trim();for(var Jo=0;Jo<Gu;Jo++){var bs=6*Jo;Bu.uint16[bs+0]=4*Jo+0,Bu.uint16[bs+1]=4*Jo+1,Bu.uint16[bs+2]=4*Jo+2,Bu.uint16[bs+3]=4*Jo+2,Bu.uint16[bs+4]=4*Jo+3,Bu.uint16[bs+5]=4*Jo+0}return Bu}(Wt));for(var pa=Me.createIndexBuffer(Ta,!0),Sa=Me.createVertexBuffer(Un,b.collisionCircleLayout.members,!0),Pa=0,ca=Vt;Pa<ca.length;Pa+=1){var da=ca[Pa],Eu=ua(da.transform,da.invTransform,S.transform);Tn.draw(Me,ot.TRIANGLES,tt.disabled,St.disabled,S.colorModeForRenderPass(),gr.disabled,Eu,C.id,Sa,pa,b.SegmentVector.simpleSegment(0,2*da.circleOffset,da.circleArray.length,da.circleArray.length/2),null,S.transform.zoom,null,null,null)}Sa.destroy(),pa.destroy()}}var Du=b.identity(new Float32Array(16));function ah(S,T,C,I,Z,ee){var ae=b.getAnchorAlignment(S),Me=-(ae.horizontalAlign-.5)*T,ot=-(ae.verticalAlign-.5)*C,bt=b.evaluateVariableOffset(S,I);return new b.Point((Me/Z+bt[0])*ee,(ot/Z+bt[1])*ee)}function Xp(S,T,C,I,Z,ee,ae,Me,ot,bt,Vt){var Wt=S.text.placedSymbolArray,$t=S.text.dynamicLayoutVertexArray,vr=S.icon.dynamicLayoutVertexArray,hr={};$t.clear();for(var Ir=0;Ir<Wt.length;Ir++){var lr=Wt.get(Ir),Pr=lr.hidden||!lr.crossTileID||S.allowVerticalPlacement&&!lr.placedOrientation?null:I[lr.crossTileID];if(Pr){var jr=new b.Point(lr.anchorX,lr.anchorY),tn=Si(jr,C?Me:ae),_n=Qi(ee.cameraToCenterDistance,tn.signedDistanceFromCamera),dn=Z.evaluateSizeForFeature(S.textSizeData,bt,lr)*_n/b.ONE_EM;C&&(dn*=S.tilePixelRatio/ot);for(var Tn=ah(Pr.anchor,Pr.width,Pr.height,Pr.textOffset,Pr.textBoxScale,dn),Un=C?Si(jr.add(Tn),ae).point:tn.point.add(T?Tn.rotate(-ee.angle):Tn),si=S.allowVerticalPlacement&&lr.placedOrientation===b.WritingMode.vertical?Math.PI/2:0,li=0;li<lr.numGlyphs;li++)b.addDynamicAttributes($t,Un,si);Vt&&lr.associatedIconIndex>=0&&(hr[lr.associatedIconIndex]={shiftedAnchor:Un,angle:si})}else rn(lr.numGlyphs,$t)}if(Vt){vr.clear();for(var Ii=S.icon.placedSymbolArray,ea=0;ea<Ii.length;ea++){var la=Ii.get(ea);if(la.hidden)rn(la.numGlyphs,vr);else{var ra=hr[ea];if(ra)for(var lo=0;lo<la.numGlyphs;lo++)b.addDynamicAttributes(vr,ra.shiftedAnchor,ra.angle);else rn(la.numGlyphs,vr)}}S.icon.dynamicLayoutVertexBuffer.updateData(vr)}S.text.dynamicLayoutVertexBuffer.updateData($t)}function Yp(S,T,C){return C.iconsInText&&T?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function oh(S,T,C,I,Z,ee,ae,Me,ot,bt,Vt,Wt){for(var $t=S.context,vr=$t.gl,hr=S.transform,Ir=Me==="map",lr=ot==="map",Pr=Ir&&C.layout.get("symbol-placement")!=="point",jr=Ir&&!lr&&!Pr,tn=C.layout.get("symbol-sort-key").constantOr(1)!==void 0,_n=!1,dn=S.depthModeForSublayer(0,tt.ReadOnly),Tn=C.layout.get("text-variable-anchor"),Un=[],si=0,li=I;si<li.length;si+=1){var Ii=li[si],ea=T.getTile(Ii),la=ea.getBucket(C);if(la){var ra=Z?la.text:la.icon;if(ra&&ra.segments.get().length){var lo=ra.programConfigurations.get(C.id),Fi=Z||la.sdfIcons,Ia=Z?la.textSizeData:la.iconSizeData,Xa=lr||hr.pitch!==0,pa=S.useProgram(Yp(Fi,Z,la),lo),Sa=b.evaluateSizeForZoom(Ia,hr.zoom),Pa=void 0,ca=[0,0],da=void 0,Eu=void 0,Ns=null,Gu=void 0;if(Z)da=ea.glyphAtlasTexture,Eu=vr.LINEAR,Pa=ea.glyphAtlasTexture.size,la.iconsInText&&(ca=ea.imageAtlasTexture.size,Ns=ea.imageAtlasTexture,Gu=Xa||S.options.rotating||S.options.zooming||Ia.kind==="composite"||Ia.kind==="camera"?vr.LINEAR:vr.NEAREST);else{var Bu=C.layout.get("icon-size").constantOr(0)!==1||la.iconsNeedLinear;da=ea.imageAtlasTexture,Eu=Fi||S.options.rotating||S.options.zooming||Bu||Xa?vr.LINEAR:vr.NEAREST,Pa=ea.imageAtlasTexture.size}var Jo=Cn(ea,1,S.transform.zoom),bs=Io(Ii.posMatrix,lr,Ir,S.transform,Jo),$u=oi(Ii.posMatrix,lr,Ir,S.transform,Jo),qs=Tn&&la.hasTextData(),ef=C.layout.get("icon-text-fit")!=="none"&&qs&&la.hasIconData();Pr&&ms(la,Ii.posMatrix,S,Z,bs,$u,lr,bt);var _l=S.translatePosMatrix(Ii.posMatrix,ea,ee,ae),ac=Pr||Z&&Tn||ef?Du:bs,Ul=S.translatePosMatrix($u,ea,ee,ae,!0),_f=Fi&&C.paint.get(Z?"text-halo-width":"icon-halo-width").constantOr(1)!==0,zf={program:pa,buffers:ra,uniformValues:Fi?la.iconsInText?nh(Ia.kind,Sa,jr,lr,S,_l,ac,Ul,Pa,ca):rh(Ia.kind,Sa,jr,lr,S,_l,ac,Ul,Z,Pa,!0):vf(Ia.kind,Sa,jr,lr,S,_l,ac,Ul,Z,Pa),atlasTexture:da,atlasTextureIcon:Ns,atlasInterpolation:Eu,atlasInterpolationIcon:Gu,isSDF:Fi,hasHalo:_f};if(tn&&la.canOverlap){_n=!0;for(var xc=0,Uf=ra.segments.get();xc<Uf.length;xc+=1){var tf=Uf[xc];Un.push({segments:new b.SegmentVector([tf]),sortKey:tf.sortKey,state:zf})}}else Un.push({segments:ra.segments,sortKey:0,state:zf})}}}_n&&Un.sort(function(Yu,Vl){return Yu.sortKey-Vl.sortKey});for(var Zl=0,xf=Un;Zl<xf.length;Zl+=1){var wu=xf[Zl],Is=wu.state;if($t.activeTexture.set(vr.TEXTURE0),Is.atlasTexture.bind(Is.atlasInterpolation,vr.CLAMP_TO_EDGE),Is.atlasTextureIcon&&($t.activeTexture.set(vr.TEXTURE1),Is.atlasTextureIcon&&Is.atlasTextureIcon.bind(Is.atlasInterpolationIcon,vr.CLAMP_TO_EDGE)),Is.isSDF){var Xu=Is.uniformValues;Is.hasHalo&&(Xu.u_is_halo=1,vc(Is.buffers,wu.segments,C,S,Is.program,dn,Vt,Wt,Xu)),Xu.u_is_halo=0}vc(Is.buffers,wu.segments,C,S,Is.program,dn,Vt,Wt,Is.uniformValues)}}function vc(S,T,C,I,Z,ee,ae,Me,ot){var bt=I.context;Z.draw(bt,bt.gl.TRIANGLES,ee,ae,Me,gr.disabled,ot,C.id,S.layoutVertexBuffer,S.indexBuffer,T,C.paint,I.transform.zoom,S.programConfigurations.get(C.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function kh(S,T,C,I,Z,ee,ae){var Me,ot,bt,Vt,Wt,$t=S.context.gl,vr=C.paint.get("fill-pattern"),hr=vr&&vr.constantOr(1),Ir=C.getCrossfadeParameters();ae?(ot=hr&&!C.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Me=$t.LINES):(ot=hr?"fillPattern":"fill",Me=$t.TRIANGLES);for(var lr=0,Pr=I;lr<Pr.length;lr+=1){var jr=Pr[lr],tn=T.getTile(jr);if(!hr||tn.patternsLoaded()){var _n=tn.getBucket(C);if(_n){var dn=_n.programConfigurations.get(C.id),Tn=S.useProgram(ot,dn);hr&&(S.context.activeTexture.set($t.TEXTURE0),tn.imageAtlasTexture.bind($t.LINEAR,$t.CLAMP_TO_EDGE),dn.updatePaintBuffers(Ir));var Un=vr.constantOr(null);if(Un&&tn.imageAtlas){var si=tn.imageAtlas,li=si.patternPositions[Un.to.toString()],Ii=si.patternPositions[Un.from.toString()];li&&Ii&&dn.setConstantPatternPositions(li,Ii)}var ea=S.translatePosMatrix(jr.posMatrix,tn,C.paint.get("fill-translate"),C.paint.get("fill-translate-anchor"));if(ae){Vt=_n.indexBuffer2,Wt=_n.segments2;var la=[$t.drawingBufferWidth,$t.drawingBufferHeight];bt=ot==="fillOutlinePattern"&&hr?Qr(ea,S,Ir,tn,la):Hr(ea,la)}else Vt=_n.indexBuffer,Wt=_n.segments,bt=hr?mr(ea,S,Ir,tn):Tt(ea);Tn.draw(S.context,Me,Z,S.stencilModeForClipping(jr),ee,gr.disabled,bt,C.id,_n.layoutVertexBuffer,Vt,Wt,C.paint,S.transform.zoom,dn)}}}}function dp(S,T,C,I,Z,ee,ae){for(var Me=S.context,ot=Me.gl,bt=C.paint.get("fill-extrusion-pattern"),Vt=bt.constantOr(1),Wt=C.getCrossfadeParameters(),$t=C.paint.get("fill-extrusion-opacity"),vr=0,hr=I;vr<hr.length;vr+=1){var Ir=hr[vr],lr=T.getTile(Ir),Pr=lr.getBucket(C);if(Pr){var jr=Pr.programConfigurations.get(C.id),tn=S.useProgram(Vt?"fillExtrusionPattern":"fillExtrusion",jr);Vt&&(S.context.activeTexture.set(ot.TEXTURE0),lr.imageAtlasTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),jr.updatePaintBuffers(Wt));var _n=bt.constantOr(null);if(_n&&lr.imageAtlas){var dn=lr.imageAtlas,Tn=dn.patternPositions[_n.to.toString()],Un=dn.patternPositions[_n.from.toString()];Tn&&Un&&jr.setConstantPatternPositions(Tn,Un)}var si=S.translatePosMatrix(Ir.posMatrix,lr,C.paint.get("fill-extrusion-translate"),C.paint.get("fill-extrusion-translate-anchor")),li=C.paint.get("fill-extrusion-vertical-gradient"),Ii=Vt?Lu(si,S,li,$t,Ir,Wt,lr):fp(si,S,li,$t);tn.draw(Me,Me.gl.TRIANGLES,Z,ee,ae,gr.backCCW,Ii,C.id,Pr.layoutVertexBuffer,Pr.indexBuffer,Pr.segments,C.paint,S.transform.zoom,jr)}}}function Of(S,T,C,I,Z,ee){var ae=S.context,Me=ae.gl,ot=T.fbo;if(ot){var bt=S.useProgram("hillshade");ae.activeTexture.set(Me.TEXTURE0),Me.bindTexture(Me.TEXTURE_2D,ot.colorAttachment.get());var Vt=function(Wt,$t,vr){var hr=vr.paint.get("hillshade-shadow-color"),Ir=vr.paint.get("hillshade-highlight-color"),lr=vr.paint.get("hillshade-accent-color"),Pr=vr.paint.get("hillshade-illumination-direction")*(Math.PI/180);vr.paint.get("hillshade-illumination-anchor")==="viewport"&&(Pr-=Wt.transform.angle);var jr,tn,_n,dn=!Wt.options.moving;return{u_matrix:Wt.transform.calculatePosMatrix($t.tileID.toUnwrapped(),dn),u_image:0,u_latrange:(jr=$t.tileID,tn=Math.pow(2,jr.canonical.z),_n=jr.canonical.y,[new b.MercatorCoordinate(0,_n/tn).toLngLat().lat,new b.MercatorCoordinate(0,(_n+1)/tn).toLngLat().lat]),u_light:[vr.paint.get("hillshade-exaggeration"),Pr],u_shadow:hr,u_highlight:Ir,u_accent:lr}}(S,T,C);bt.draw(ae,Me.TRIANGLES,I,Z,ee,gr.disabled,Vt,C.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}}function sg(S,T,C,I,Z,ee){var ae=S.context,Me=ae.gl,ot=T.dem;if(ot&&ot.data){var bt=ot.dim,Vt=ot.stride,Wt=ot.getPixels();if(ae.activeTexture.set(Me.TEXTURE1),ae.pixelStoreUnpackPremultiplyAlpha.set(!1),T.demTexture=T.demTexture||S.getTileTexture(Vt),T.demTexture){var $t=T.demTexture;$t.update(Wt,{premultiply:!1}),$t.bind(Me.NEAREST,Me.CLAMP_TO_EDGE)}else T.demTexture=new b.Texture(ae,Wt,Me.RGBA,{premultiply:!1}),T.demTexture.bind(Me.NEAREST,Me.CLAMP_TO_EDGE);ae.activeTexture.set(Me.TEXTURE0);var vr=T.fbo;if(!vr){var hr=new b.Texture(ae,{width:bt,height:bt,data:null},Me.RGBA);hr.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),(vr=T.fbo=ae.createFramebuffer(bt,bt,!0)).colorAttachment.set(hr.texture)}ae.bindFramebuffer.set(vr.framebuffer),ae.viewport.set([0,0,bt,bt]),S.useProgram("hillshadePrepare").draw(ae,Me.TRIANGLES,I,Z,ee,gr.disabled,function(Ir,lr){var Pr=lr.stride,jr=b.create();return b.ortho(jr,0,b.EXTENT,-b.EXTENT,0,0,1),b.translate(jr,jr,[0,-b.EXTENT,0]),{u_matrix:jr,u_image:1,u_dimension:[Pr,Pr],u_zoom:Ir.overscaledZ,u_unpack:lr.getUnpackVector()}}(T.tileID,ot),C.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments),T.needsHillshadePrepare=!1}}function Ld(S,T,C,I,Z){var ee=I.paint.get("raster-fade-duration");if(ee>0){var ae=b.browser.now(),Me=(ae-S.timeAdded)/ee,ot=T?(ae-T.timeAdded)/ee:-1,bt=C.getSource(),Vt=Z.coveringZoomLevel({tileSize:bt.tileSize,roundZoom:bt.roundZoom}),Wt=!T||Math.abs(T.tileID.overscaledZ-Vt)>Math.abs(S.tileID.overscaledZ-Vt),$t=Wt&&S.refreshedUponExpiration?1:b.clamp(Wt?Me:1-ot,0,1);return S.refreshedUponExpiration&&Me>=1&&(S.refreshedUponExpiration=!1),T?{opacity:1,mix:1-$t}:{opacity:$t,mix:0}}return{opacity:1,mix:0}}var Dd=new b.Color(1,0,0,1),Ms=new b.Color(0,1,0,1),Lh=new b.Color(0,0,1,1),vp=new b.Color(1,0,1,1),Kp=new b.Color(0,1,1,1);function gp(S,T,C,I){Dh(S,0,T+C/2,S.transform.width,C,I)}function Fd(S,T,C,I){Dh(S,T-C/2,0,C,S.transform.height,I)}function Dh(S,T,C,I,Z,ee){var ae=S.context,Me=ae.gl;Me.enable(Me.SCISSOR_TEST),Me.scissor(T*b.browser.devicePixelRatio,C*b.browser.devicePixelRatio,I*b.browser.devicePixelRatio,Z*b.browser.devicePixelRatio),ae.clear({color:ee}),Me.disable(Me.SCISSOR_TEST)}function Fh(S,T,C){var I=S.context,Z=I.gl,ee=C.posMatrix,ae=S.useProgram("debug"),Me=tt.disabled,ot=St.disabled,bt=S.colorModeForRenderPass();I.activeTexture.set(Z.TEXTURE0),S.emptyTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),ae.draw(I,Z.LINE_STRIP,Me,ot,bt,gr.disabled,_o(ee,b.Color.red),"$debug",S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments);var Vt=T.getTileByID(C.key).latestRawTileData,Wt=Math.floor((Vt&&Vt.byteLength||0)/1024),$t=T.getTile(C).tileSize,vr=512/Math.min($t,512)*(C.overscaledZ/S.transform.zoom)*.5,hr=C.canonical.toString();C.overscaledZ!==C.canonical.z&&(hr+=" => "+C.overscaledZ),function(Ir,lr){Ir.initDebugOverlayCanvas();var Pr=Ir.debugOverlayCanvas,jr=Ir.context.gl,tn=Ir.debugOverlayCanvas.getContext("2d");tn.clearRect(0,0,Pr.width,Pr.height),tn.shadowColor="white",tn.shadowBlur=2,tn.lineWidth=1.5,tn.strokeStyle="white",tn.textBaseline="top",tn.font="bold 36px Open Sans, sans-serif",tn.fillText(lr,5,5),tn.strokeText(lr,5,5),Ir.debugOverlayTexture.update(Pr),Ir.debugOverlayTexture.bind(jr.LINEAR,jr.CLAMP_TO_EDGE)}(S,hr+" "+Wt+"kb"),ae.draw(I,Z.TRIANGLES,Me,ot,Gt.alphaBlended,gr.disabled,_o(ee,b.Color.transparent,vr),"$debug",S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments)}var kf={symbol:function(S,T,C,I,Z){if(S.renderPass==="translucent"){var ee=St.disabled,ae=S.colorModeForRenderPass();C.layout.get("text-variable-anchor")&&function(Me,ot,bt,Vt,Wt,$t,vr){for(var hr=ot.transform,Ir=Wt==="map",lr=$t==="map",Pr=0,jr=Me;Pr<jr.length;Pr+=1){var tn=jr[Pr],_n=Vt.getTile(tn),dn=_n.getBucket(bt);if(dn&&dn.text&&dn.text.segments.get().length){var Tn=b.evaluateSizeForZoom(dn.textSizeData,hr.zoom),Un=Cn(_n,1,ot.transform.zoom),si=Io(tn.posMatrix,lr,Ir,ot.transform,Un),li=bt.layout.get("icon-text-fit")!=="none"&&dn.hasIconData();if(Tn){var Ii=Math.pow(2,hr.zoom-_n.tileID.overscaledZ);Xp(dn,Ir,lr,vr,b.symbolSize,hr,si,tn.posMatrix,Ii,Tn,li)}}}}(I,S,C,T,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),Z),C.paint.get("icon-opacity").constantOr(1)!==0&&oh(S,T,C,I,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),ee,ae),C.paint.get("text-opacity").constantOr(1)!==0&&oh(S,T,C,I,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),ee,ae),T.map.showCollisionBoxes&&(dc(S,T,C,I,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),!0),dc(S,T,C,I,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),!1))}},circle:function(S,T,C,I){if(S.renderPass==="translucent"){var Z=C.paint.get("circle-opacity"),ee=C.paint.get("circle-stroke-width"),ae=C.paint.get("circle-stroke-opacity"),Me=C.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Z.constantOr(1)!==0||ee.constantOr(1)!==0&&ae.constantOr(1)!==0){for(var ot=S.context,bt=ot.gl,Vt=S.depthModeForSublayer(0,tt.ReadOnly),Wt=St.disabled,$t=S.colorModeForRenderPass(),vr=[],hr=0;hr<I.length;hr++){var Ir=I[hr],lr=T.getTile(Ir),Pr=lr.getBucket(C);if(Pr){var jr=Pr.programConfigurations.get(C.id),tn={programConfiguration:jr,program:S.useProgram("circle",jr),layoutVertexBuffer:Pr.layoutVertexBuffer,indexBuffer:Pr.indexBuffer,uniformValues:On(S,Ir,lr,C)};if(Me)for(var _n=0,dn=Pr.segments.get();_n<dn.length;_n+=1){var Tn=dn[_n];vr.push({segments:new b.SegmentVector([Tn]),sortKey:Tn.sortKey,state:tn})}else vr.push({segments:Pr.segments,sortKey:0,state:tn})}}Me&&vr.sort(function(ea,la){return ea.sortKey-la.sortKey});for(var Un=0,si=vr;Un<si.length;Un+=1){var li=si[Un],Ii=li.state;Ii.program.draw(ot,bt.TRIANGLES,Vt,Wt,$t,gr.disabled,Ii.uniformValues,C.id,Ii.layoutVertexBuffer,Ii.indexBuffer,li.segments,C.paint,S.transform.zoom,Ii.programConfiguration)}}}},heatmap:function(S,T,C,I){if(C.paint.get("heatmap-opacity")!==0)if(S.renderPass==="offscreen"){var Z=S.context,ee=Z.gl,ae=St.disabled,Me=new Gt([ee.ONE,ee.ONE],b.Color.transparent,[!0,!0,!0,!0]);(function(vr,hr,Ir){var lr=vr.gl;vr.activeTexture.set(lr.TEXTURE1),vr.viewport.set([0,0,hr.width/4,hr.height/4]);var Pr=Ir.heatmapFbo;if(Pr)lr.bindTexture(lr.TEXTURE_2D,Pr.colorAttachment.get()),vr.bindFramebuffer.set(Pr.framebuffer);else{var jr=lr.createTexture();lr.bindTexture(lr.TEXTURE_2D,jr),lr.texParameteri(lr.TEXTURE_2D,lr.TEXTURE_WRAP_S,lr.CLAMP_TO_EDGE),lr.texParameteri(lr.TEXTURE_2D,lr.TEXTURE_WRAP_T,lr.CLAMP_TO_EDGE),lr.texParameteri(lr.TEXTURE_2D,lr.TEXTURE_MIN_FILTER,lr.LINEAR),lr.texParameteri(lr.TEXTURE_2D,lr.TEXTURE_MAG_FILTER,lr.LINEAR),Pr=Ir.heatmapFbo=vr.createFramebuffer(hr.width/4,hr.height/4,!1),function(tn,_n,dn,Tn){var Un=tn.gl;Un.texImage2D(Un.TEXTURE_2D,0,Un.RGBA,_n.width/4,_n.height/4,0,Un.RGBA,tn.extRenderToTextureHalfFloat?tn.extTextureHalfFloat.HALF_FLOAT_OES:Un.UNSIGNED_BYTE,null),Tn.colorAttachment.set(dn)}(vr,hr,jr,Pr)}})(Z,S,C),Z.clear({color:b.Color.transparent});for(var ot=0;ot<I.length;ot++){var bt=I[ot];if(!T.hasRenderableParent(bt)){var Vt=T.getTile(bt),Wt=Vt.getBucket(C);if(Wt){var $t=Wt.programConfigurations.get(C.id);S.useProgram("heatmap",$t).draw(Z,ee.TRIANGLES,tt.disabled,ae,Me,gr.disabled,vl(bt.posMatrix,Vt,S.transform.zoom,C.paint.get("heatmap-intensity")),C.id,Wt.layoutVertexBuffer,Wt.indexBuffer,Wt.segments,C.paint,S.transform.zoom,$t)}}}Z.viewport.set([0,0,S.width,S.height])}else S.renderPass==="translucent"&&(S.context.setColorMode(S.colorModeForRenderPass()),function(vr,hr){var Ir=vr.context,lr=Ir.gl,Pr=hr.heatmapFbo;if(Pr){Ir.activeTexture.set(lr.TEXTURE0),lr.bindTexture(lr.TEXTURE_2D,Pr.colorAttachment.get()),Ir.activeTexture.set(lr.TEXTURE1);var jr=hr.colorRampTexture;jr||(jr=hr.colorRampTexture=new b.Texture(Ir,hr.colorRamp,lr.RGBA)),jr.bind(lr.LINEAR,lr.CLAMP_TO_EDGE),vr.useProgram("heatmapTexture").draw(Ir,lr.TRIANGLES,tt.disabled,St.disabled,vr.colorModeForRenderPass(),gr.disabled,function(tn,_n,dn,Tn){var Un=b.create();b.ortho(Un,0,tn.width,tn.height,0,0,1);var si=tn.context.gl;return{u_matrix:Un,u_world:[si.drawingBufferWidth,si.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:_n.paint.get("heatmap-opacity")}}(vr,hr),hr.id,vr.viewportBuffer,vr.quadTriangleIndexBuffer,vr.viewportSegments,hr.paint,vr.transform.zoom)}}(S,C))},line:function(S,T,C,I){if(S.renderPass==="translucent"){var Z=C.paint.get("line-opacity"),ee=C.paint.get("line-width");if(Z.constantOr(1)!==0&&ee.constantOr(1)!==0)for(var ae=S.depthModeForSublayer(0,tt.ReadOnly),Me=S.colorModeForRenderPass(),ot=C.paint.get("line-dasharray"),bt=C.paint.get("line-pattern"),Vt=bt.constantOr(1),Wt=C.paint.get("line-gradient"),$t=C.getCrossfadeParameters(),vr=Vt?"linePattern":ot?"lineSDF":Wt?"lineGradient":"line",hr=S.context,Ir=hr.gl,lr=!0,Pr=0,jr=I;Pr<jr.length;Pr+=1){var tn=jr[Pr],_n=T.getTile(tn);if(!Vt||_n.patternsLoaded()){var dn=_n.getBucket(C);if(dn){var Tn=dn.programConfigurations.get(C.id),Un=S.context.program.get(),si=S.useProgram(vr,Tn),li=lr||si.program!==Un,Ii=bt.constantOr(null);if(Ii&&_n.imageAtlas){var ea=_n.imageAtlas,la=ea.patternPositions[Ii.to.toString()],ra=ea.patternPositions[Ii.from.toString()];la&&ra&&Tn.setConstantPatternPositions(la,ra)}var lo=Vt?hp(S,_n,C,$t):ot?kd(S,_n,C,ot,$t):Wt?Lo(S,_n,C,dn.lineClipsArray.length):rl(S,_n,C);if(Vt)hr.activeTexture.set(Ir.TEXTURE0),_n.imageAtlasTexture.bind(Ir.LINEAR,Ir.CLAMP_TO_EDGE),Tn.updatePaintBuffers($t);else if(ot&&(li||S.lineAtlas.dirty))hr.activeTexture.set(Ir.TEXTURE0),S.lineAtlas.bind(hr);else if(Wt){var Fi=dn.gradients[C.id],Ia=Fi.texture;if(C.gradientVersion!==Fi.version){var Xa=256;if(C.stepInterpolant){var pa=T.getSource().maxzoom,Sa=tn.canonical.z===pa?Math.ceil(1<<S.transform.maxZoom-tn.canonical.z):1;Xa=b.clamp(b.nextPowerOfTwo(dn.maxLineLength/b.EXTENT*1024*Sa),256,hr.maxTextureSize)}Fi.gradient=b.renderColorRamp({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:Xa,image:Fi.gradient||void 0,clips:dn.lineClipsArray}),Fi.texture?Fi.texture.update(Fi.gradient):Fi.texture=new b.Texture(hr,Fi.gradient,Ir.RGBA),Fi.version=C.gradientVersion,Ia=Fi.texture}hr.activeTexture.set(Ir.TEXTURE0),Ia.bind(C.stepInterpolant?Ir.NEAREST:Ir.LINEAR,Ir.CLAMP_TO_EDGE)}si.draw(hr,Ir.TRIANGLES,ae,S.stencilModeForClipping(tn),Me,gr.disabled,lo,C.id,dn.layoutVertexBuffer,dn.indexBuffer,dn.segments,C.paint,S.transform.zoom,Tn,dn.layoutVertexBuffer2),lr=!1}}}}},fill:function(S,T,C,I){var Z=C.paint.get("fill-color"),ee=C.paint.get("fill-opacity");if(ee.constantOr(1)!==0){var ae=S.colorModeForRenderPass(),Me=C.paint.get("fill-pattern"),ot=S.opaquePassEnabledForLayer()&&!Me.constantOr(1)&&Z.constantOr(b.Color.transparent).a===1&&ee.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===ot){var bt=S.depthModeForSublayer(1,S.renderPass==="opaque"?tt.ReadWrite:tt.ReadOnly);kh(S,T,C,I,bt,ae,!1)}if(S.renderPass==="translucent"&&C.paint.get("fill-antialias")){var Vt=S.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,tt.ReadOnly);kh(S,T,C,I,Vt,ae,!0)}}},"fill-extrusion":function(S,T,C,I){var Z=C.paint.get("fill-extrusion-opacity");if(Z!==0&&S.renderPass==="translucent"){var ee=new tt(S.context.gl.LEQUAL,tt.ReadWrite,S.depthRangeFor3D);if(Z!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))dp(S,T,C,I,ee,St.disabled,Gt.disabled),dp(S,T,C,I,ee,S.stencilModeFor3D(),S.colorModeForRenderPass());else{var ae=S.colorModeForRenderPass();dp(S,T,C,I,ee,St.disabled,ae)}}},hillshade:function(S,T,C,I){if(S.renderPass==="offscreen"||S.renderPass==="translucent"){for(var Z=S.context,ee=S.depthModeForSublayer(0,tt.ReadOnly),ae=S.colorModeForRenderPass(),Me=S.renderPass==="translucent"?S.stencilConfigForOverlap(I):[{},I],ot=Me[0],bt=0,Vt=Me[1];bt<Vt.length;bt+=1){var Wt=Vt[bt],$t=T.getTile(Wt);$t.needsHillshadePrepare&&S.renderPass==="offscreen"?sg(S,$t,C,ee,St.disabled,ae):S.renderPass==="translucent"&&Of(S,$t,C,ee,ot[Wt.overscaledZ],ae)}Z.viewport.set([0,0,S.width,S.height])}},raster:function(S,T,C,I){if(S.renderPass==="translucent"&&C.paint.get("raster-opacity")!==0&&I.length)for(var Z=S.context,ee=Z.gl,ae=T.getSource(),Me=S.useProgram("raster"),ot=S.colorModeForRenderPass(),bt=ae instanceof ut?[{},I]:S.stencilConfigForOverlap(I),Vt=bt[0],Wt=bt[1],$t=Wt[Wt.length-1].overscaledZ,vr=!S.options.moving,hr=0,Ir=Wt;hr<Ir.length;hr+=1){var lr=Ir[hr],Pr=S.depthModeForSublayer(lr.overscaledZ-$t,C.paint.get("raster-opacity")===1?tt.ReadWrite:tt.ReadOnly,ee.LESS),jr=T.getTile(lr),tn=S.transform.calculatePosMatrix(lr.toUnwrapped(),vr);jr.registerFadeDuration(C.paint.get("raster-fade-duration"));var _n=T.findLoadedParent(lr,0),dn=Ld(jr,_n,T,C,S.transform),Tn=void 0,Un=void 0,si=C.paint.get("raster-resampling")==="nearest"?ee.NEAREST:ee.LINEAR;Z.activeTexture.set(ee.TEXTURE0),jr.texture.bind(si,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),Z.activeTexture.set(ee.TEXTURE1),_n?(_n.texture.bind(si,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),Tn=Math.pow(2,_n.tileID.overscaledZ-jr.tileID.overscaledZ),Un=[jr.tileID.canonical.x*Tn%1,jr.tileID.canonical.y*Tn%1]):jr.texture.bind(si,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST);var li=df(tn,Un||[0,0],Tn||1,dn,C);ae instanceof ut?Me.draw(Z,ee.TRIANGLES,Pr,St.disabled,ot,gr.disabled,li,C.id,ae.boundsBuffer,S.quadTriangleIndexBuffer,ae.boundsSegments):Me.draw(Z,ee.TRIANGLES,Pr,Vt[lr.overscaledZ],ot,gr.disabled,li,C.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}},background:function(S,T,C){var I=C.paint.get("background-color"),Z=C.paint.get("background-opacity");if(Z!==0){var ee=S.context,ae=ee.gl,Me=S.transform,ot=Me.tileSize,bt=C.paint.get("background-pattern");if(!S.isPatternMissing(bt)){var Vt=!bt&&I.a===1&&Z===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass===Vt){var Wt=St.disabled,$t=S.depthModeForSublayer(0,Vt==="opaque"?tt.ReadWrite:tt.ReadOnly),vr=S.colorModeForRenderPass(),hr=S.useProgram(bt?"backgroundPattern":"background"),Ir=Me.coveringTiles({tileSize:ot});bt&&(ee.activeTexture.set(ae.TEXTURE0),S.imageManager.bind(S.context));for(var lr=C.getCrossfadeParameters(),Pr=0,jr=Ir;Pr<jr.length;Pr+=1){var tn=jr[Pr],_n=S.transform.calculatePosMatrix(tn.toUnwrapped()),dn=bt?ih(_n,Z,S,bt,{tileID:tn,tileSize:ot},lr):Pf(_n,Z,I);hr.draw(ee,ae.TRIANGLES,$t,Wt,vr,gr.disabled,dn,C.id,S.tileExtentBuffer,S.quadTriangleIndexBuffer,S.tileExtentSegments)}}}}},debug:function(S,T,C){for(var I=0;I<C.length;I++)Fh(S,T,C[I])},custom:function(S,T,C){var I=S.context,Z=C.implementation;if(S.renderPass==="offscreen"){var ee=Z.prerender;ee&&(S.setCustomLayerDefaults(),I.setColorMode(S.colorModeForRenderPass()),ee.call(Z,I.gl,S.transform.customLayerMatrix()),I.setDirty(),S.setBaseState())}else if(S.renderPass==="translucent"){S.setCustomLayerDefaults(),I.setColorMode(S.colorModeForRenderPass()),I.setStencilMode(St.disabled);var ae=Z.renderingMode==="3d"?new tt(S.context.gl.LEQUAL,tt.ReadWrite,S.depthRangeFor3D):S.depthModeForSublayer(0,tt.ReadOnly);I.setDepthMode(ae),Z.render(I.gl,S.transform.customLayerMatrix()),I.setDirty(),S.setBaseState(),I.bindFramebuffer.set(null)}}},cs=function(S,T){this.context=new At(S),this.transform=T,this._tileTextures={},this.setup(),this.numSublayers=st.maxUnderzooming+st.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ru,this.gpuTimers={}};cs.prototype.resize=function(S,T){if(this.width=S*b.browser.devicePixelRatio,this.height=T*b.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var C=0,I=this.style._order;C<I.length;C+=1)this.style._layers[I[C]].resize()},cs.prototype.setup=function(){var S=this.context,T=new b.StructArrayLayout2i4;T.emplaceBack(0,0),T.emplaceBack(b.EXTENT,0),T.emplaceBack(0,b.EXTENT),T.emplaceBack(b.EXTENT,b.EXTENT),this.tileExtentBuffer=S.createVertexBuffer(T,Ts.members),this.tileExtentSegments=b.SegmentVector.simpleSegment(0,0,4,2);var C=new b.StructArrayLayout2i4;C.emplaceBack(0,0),C.emplaceBack(b.EXTENT,0),C.emplaceBack(0,b.EXTENT),C.emplaceBack(b.EXTENT,b.EXTENT),this.debugBuffer=S.createVertexBuffer(C,Ts.members),this.debugSegments=b.SegmentVector.simpleSegment(0,0,4,5);var I=new b.StructArrayLayout4i8;I.emplaceBack(0,0,0,0),I.emplaceBack(b.EXTENT,0,b.EXTENT,0),I.emplaceBack(0,b.EXTENT,0,b.EXTENT),I.emplaceBack(b.EXTENT,b.EXTENT,b.EXTENT,b.EXTENT),this.rasterBoundsBuffer=S.createVertexBuffer(I,Fe.members),this.rasterBoundsSegments=b.SegmentVector.simpleSegment(0,0,4,2);var Z=new b.StructArrayLayout2i4;Z.emplaceBack(0,0),Z.emplaceBack(1,0),Z.emplaceBack(0,1),Z.emplaceBack(1,1),this.viewportBuffer=S.createVertexBuffer(Z,Ts.members),this.viewportSegments=b.SegmentVector.simpleSegment(0,0,4,2);var ee=new b.StructArrayLayout1ui2;ee.emplaceBack(0),ee.emplaceBack(1),ee.emplaceBack(3),ee.emplaceBack(2),ee.emplaceBack(0),this.tileBorderIndexBuffer=S.createIndexBuffer(ee);var ae=new b.StructArrayLayout3ui6;ae.emplaceBack(0,1,2),ae.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=S.createIndexBuffer(ae),this.emptyTexture=new b.Texture(S,{width:1,height:1,data:new Uint8Array([0,0,0,0])},S.gl.RGBA);var Me=this.context.gl;this.stencilClearMode=new St({func:Me.ALWAYS,mask:0},0,255,Me.ZERO,Me.ZERO,Me.ZERO)},cs.prototype.clearStencil=function(){var S=this.context,T=S.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var C=b.create();b.ortho(C,0,this.width,this.height,0,0,1),b.scale(C,C,[T.drawingBufferWidth,T.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(S,T.TRIANGLES,tt.disabled,this.stencilClearMode,Gt.disabled,gr.disabled,Fs(C),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},cs.prototype._renderTileClippingMasks=function(S,T){if(this.currentStencilSource!==S.source&&S.isTileClipped()&&T&&T.length){this.currentStencilSource=S.source;var C=this.context,I=C.gl;this.nextStencilID+T.length>256&&this.clearStencil(),C.setColorMode(Gt.disabled),C.setDepthMode(tt.disabled);var Z=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ee=0,ae=T;ee<ae.length;ee+=1){var Me=ae[ee],ot=this._tileClippingMaskIDs[Me.key]=this.nextStencilID++;Z.draw(C,I.TRIANGLES,tt.disabled,new St({func:I.ALWAYS,mask:0},ot,255,I.KEEP,I.KEEP,I.REPLACE),Gt.disabled,gr.disabled,Fs(Me.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},cs.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var S=this.nextStencilID++,T=this.context.gl;return new St({func:T.NOTEQUAL,mask:255},S,255,T.KEEP,T.KEEP,T.REPLACE)},cs.prototype.stencilModeForClipping=function(S){var T=this.context.gl;return new St({func:T.EQUAL,mask:255},this._tileClippingMaskIDs[S.key],0,T.KEEP,T.KEEP,T.REPLACE)},cs.prototype.stencilConfigForOverlap=function(S){var T,C=this.context.gl,I=S.sort(function(ot,bt){return bt.overscaledZ-ot.overscaledZ}),Z=I[I.length-1].overscaledZ,ee=I[0].overscaledZ-Z+1;if(ee>1){this.currentStencilSource=void 0,this.nextStencilID+ee>256&&this.clearStencil();for(var ae={},Me=0;Me<ee;Me++)ae[Me+Z]=new St({func:C.GEQUAL,mask:255},Me+this.nextStencilID,255,C.KEEP,C.KEEP,C.REPLACE);return this.nextStencilID+=ee,[ae,I]}return[(T={},T[Z]=St.disabled,T),I]},cs.prototype.colorModeForRenderPass=function(){var S=this.context.gl;return this._showOverdrawInspector?new Gt([S.CONSTANT_COLOR,S.ONE],new b.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gt.unblended:Gt.alphaBlended},cs.prototype.depthModeForSublayer=function(S,T,C){if(!this.opaquePassEnabledForLayer())return tt.disabled;var I=1-((1+this.currentLayer)*this.numSublayers+S)*this.depthEpsilon;return new tt(C||this.context.gl.LEQUAL,T,[I,I])},cs.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},cs.prototype.render=function(S,T){var C=this;this.style=S,this.options=T,this.lineAtlas=S.lineAtlas,this.imageManager=S.imageManager,this.glyphManager=S.glyphManager,this.symbolFadeChange=S.placement.symbolFadeChange(b.browser.now()),this.imageManager.beginFrame();var I=this.style._order,Z=this.style.sourceCaches;for(var ee in Z){var ae=Z[ee];ae.used&&ae.prepare(this.context)}var Me,ot,bt={},Vt={},Wt={};for(var $t in Z){var vr=Z[$t];bt[$t]=vr.getVisibleCoordinates(),Vt[$t]=bt[$t].slice().reverse(),Wt[$t]=vr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var hr=0;hr<I.length;hr++)if(this.style._layers[I[hr]].is3D()){this.opaquePassCutoff=hr;break}this.renderPass="offscreen";for(var Ir=0,lr=I;Ir<lr.length;Ir+=1){var Pr=this.style._layers[lr[Ir]];if(Pr.hasOffscreenPass()&&!Pr.isHidden(this.transform.zoom)){var jr=Vt[Pr.source];(Pr.type==="custom"||jr.length)&&this.renderLayer(this,Z[Pr.source],Pr,jr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:T.showOverdrawInspector?b.Color.black:b.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=T.showOverdrawInspector,this.depthRangeFor3D=[0,1-(S._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){var tn=this.style._layers[I[this.currentLayer]],_n=Z[tn.source],dn=bt[tn.source];this._renderTileClippingMasks(tn,dn),this.renderLayer(this,_n,tn,dn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){var Tn=this.style._layers[I[this.currentLayer]],Un=Z[Tn.source],si=(Tn.type==="symbol"?Wt:Vt)[Tn.source];this._renderTileClippingMasks(Tn,bt[Tn.source]),this.renderLayer(this,Un,Tn,si)}this.options.showTileBoundaries&&(b.values(this.style._layers).forEach(function(li){li.source&&!li.isHidden(C.transform.zoom)&&(li.source!==(ot&&ot.id)&&(ot=C.style.sourceCaches[li.source]),(!Me||Me.getSource().maxzoom<ot.getSource().maxzoom)&&(Me=ot))}),Me&&kf.debug(this,Me,Me.getVisibleCoordinates())),this.options.showPadding&&function(li){var Ii=li.transform.padding;gp(li,li.transform.height-(Ii.top||0),3,Dd),gp(li,Ii.bottom||0,3,Ms),Fd(li,Ii.left||0,3,Lh),Fd(li,li.transform.width-(Ii.right||0),3,vp);var ea=li.transform.centerPoint;(function(la,ra,lo,Fi){Dh(la,ra-1,lo-10,2,20,Fi),Dh(la,ra-10,lo-1,20,2,Fi)})(li,ea.x,li.transform.height-ea.y,Kp)}(this),this.context.setDefault()},cs.prototype.renderLayer=function(S,T,C,I){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||I.length)&&(this.id=C.id,this.gpuTimingStart(C),kf[C.type](S,T,C,I,this.style.placement.variableOffsets),this.gpuTimingEnd())},cs.prototype.gpuTimingStart=function(S){if(this.options.gpuTiming){var T=this.context.extTimerQuery,C=this.gpuTimers[S.id];C||(C=this.gpuTimers[S.id]={calls:0,cpuTime:0,query:T.createQueryEXT()}),C.calls++,T.beginQueryEXT(T.TIME_ELAPSED_EXT,C.query)}},cs.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var S=this.context.extTimerQuery;S.endQueryEXT(S.TIME_ELAPSED_EXT)}},cs.prototype.collectGpuTimers=function(){var S=this.gpuTimers;return this.gpuTimers={},S},cs.prototype.queryGpuTimers=function(S){var T={};for(var C in S){var I=S[C],Z=this.context.extTimerQuery,ee=Z.getQueryObjectEXT(I.query,Z.QUERY_RESULT_EXT)/1e6;Z.deleteQueryEXT(I.query),T[C]=ee}return T},cs.prototype.translatePosMatrix=function(S,T,C,I,Z){if(!C[0]&&!C[1])return S;var ee=Z?I==="map"?this.transform.angle:0:I==="viewport"?-this.transform.angle:0;if(ee){var ae=Math.sin(ee),Me=Math.cos(ee);C=[C[0]*Me-C[1]*ae,C[0]*ae+C[1]*Me]}var ot=[Z?C[0]:Cn(T,C[0],this.transform.zoom),Z?C[1]:Cn(T,C[1],this.transform.zoom),0],bt=new Float32Array(16);return b.translate(bt,S,ot),bt},cs.prototype.saveTileTexture=function(S){var T=this._tileTextures[S.size[0]];T?T.push(S):this._tileTextures[S.size[0]]=[S]},cs.prototype.getTileTexture=function(S){var T=this._tileTextures[S];return T&&T.length>0?T.pop():null},cs.prototype.isPatternMissing=function(S){if(!S)return!1;if(!S.from||!S.to)return!0;var T=this.imageManager.getPattern(S.from.toString()),C=this.imageManager.getPattern(S.to.toString());return!T||!C},cs.prototype.useProgram=function(S,T){this.cache=this.cache||{};var C=""+S+(T?T.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[C]||(this.cache[C]=new ss(this.context,S,Od[S],T,Gs[S],this._showOverdrawInspector)),this.cache[C]},cs.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},cs.prototype.setBaseState=function(){var S=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(S.FUNC_ADD)},cs.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=b.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new b.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},cs.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var mp=function(S,T){this.points=S,this.planes=T};mp.fromInvProjectionMatrix=function(S,T,C){var I=Math.pow(2,C),Z=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ae){return b.transformMat4([],ae,S)}).map(function(ae){return b.scale$1([],ae,1/ae[3]/T*I)}),ee=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ae){var Me=b.sub([],Z[ae[0]],Z[ae[1]]),ot=b.sub([],Z[ae[2]],Z[ae[1]]),bt=b.normalize([],b.cross([],Me,ot)),Vt=-b.dot(bt,Z[ae[1]]);return bt.concat(Vt)});return new mp(Z,ee)};var tc=function(S,T){this.min=S,this.max=T,this.center=b.scale$2([],b.add([],this.min,this.max),.5)};tc.prototype.quadrant=function(S){for(var T=[S%2==0,S<2],C=b.clone$2(this.min),I=b.clone$2(this.max),Z=0;Z<T.length;Z++)C[Z]=T[Z]?this.min[Z]:this.center[Z],I[Z]=T[Z]?this.center[Z]:this.max[Z];return I[2]=this.max[2],new tc(C,I)},tc.prototype.distanceX=function(S){return Math.max(Math.min(this.max[0],S[0]),this.min[0])-S[0]},tc.prototype.distanceY=function(S){return Math.max(Math.min(this.max[1],S[1]),this.min[1])-S[1]},tc.prototype.intersects=function(S){for(var T=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],C=!0,I=0;I<S.planes.length;I++){for(var Z=S.planes[I],ee=0,ae=0;ae<T.length;ae++)ee+=b.dot$1(Z,T[ae])>=0;if(ee===0)return 0;ee!==T.length&&(C=!1)}if(C)return 2;for(var Me=0;Me<3;Me++){for(var ot=Number.MAX_VALUE,bt=-Number.MAX_VALUE,Vt=0;Vt<S.points.length;Vt++){var Wt=S.points[Vt][Me]-this.min[Me];ot=Math.min(ot,Wt),bt=Math.max(bt,Wt)}if(bt<0||ot>this.max[Me]-this.min[Me])return 0}return 1};var gc=function(S,T,C,I){if(S===void 0&&(S=0),T===void 0&&(T=0),C===void 0&&(C=0),I===void 0&&(I=0),isNaN(S)||S<0||isNaN(T)||T<0||isNaN(C)||C<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=S,this.bottom=T,this.left=C,this.right=I};gc.prototype.interpolate=function(S,T,C){return T.top!=null&&S.top!=null&&(this.top=b.number(S.top,T.top,C)),T.bottom!=null&&S.bottom!=null&&(this.bottom=b.number(S.bottom,T.bottom,C)),T.left!=null&&S.left!=null&&(this.left=b.number(S.left,T.left,C)),T.right!=null&&S.right!=null&&(this.right=b.number(S.right,T.right,C)),this},gc.prototype.getCenter=function(S,T){var C=b.clamp((this.left+S-this.right)/2,0,S),I=b.clamp((this.top+T-this.bottom)/2,0,T);return new b.Point(C,I)},gc.prototype.equals=function(S){return this.top===S.top&&this.bottom===S.bottom&&this.left===S.left&&this.right===S.right},gc.prototype.clone=function(){return new gc(this.top,this.bottom,this.left,this.right)},gc.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var uo=function(S,T,C,I,Z){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Z===void 0||Z,this._minZoom=S||0,this._maxZoom=T||22,this._minPitch=C==null?0:C,this._maxPitch=I==null?60:I,this.setMaxBounds(),this.width=0,this.height=0,this._center=new b.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new gc,this._posMatrixCache={},this._alignedPosMatrixCache={}},fs={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};uo.prototype.clone=function(){var S=new uo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return S.tileSize=this.tileSize,S.latRange=this.latRange,S.width=this.width,S.height=this.height,S._center=this._center,S.zoom=this.zoom,S.angle=this.angle,S._fov=this._fov,S._pitch=this._pitch,S._unmodified=this._unmodified,S._edgeInsets=this._edgeInsets.clone(),S._calcMatrices(),S},fs.minZoom.get=function(){return this._minZoom},fs.minZoom.set=function(S){this._minZoom!==S&&(this._minZoom=S,this.zoom=Math.max(this.zoom,S))},fs.maxZoom.get=function(){return this._maxZoom},fs.maxZoom.set=function(S){this._maxZoom!==S&&(this._maxZoom=S,this.zoom=Math.min(this.zoom,S))},fs.minPitch.get=function(){return this._minPitch},fs.minPitch.set=function(S){this._minPitch!==S&&(this._minPitch=S,this.pitch=Math.max(this.pitch,S))},fs.maxPitch.get=function(){return this._maxPitch},fs.maxPitch.set=function(S){this._maxPitch!==S&&(this._maxPitch=S,this.pitch=Math.min(this.pitch,S))},fs.renderWorldCopies.get=function(){return this._renderWorldCopies},fs.renderWorldCopies.set=function(S){S===void 0?S=!0:S===null&&(S=!1),this._renderWorldCopies=S},fs.worldSize.get=function(){return this.tileSize*this.scale},fs.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},fs.size.get=function(){return new b.Point(this.width,this.height)},fs.bearing.get=function(){return-this.angle/Math.PI*180},fs.bearing.set=function(S){var T=-b.wrap(S,-180,180)*Math.PI/180;this.angle!==T&&(this._unmodified=!1,this.angle=T,this._calcMatrices(),this.rotationMatrix=b.create$2(),b.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},fs.pitch.get=function(){return this._pitch/Math.PI*180},fs.pitch.set=function(S){var T=b.clamp(S,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==T&&(this._unmodified=!1,this._pitch=T,this._calcMatrices())},fs.fov.get=function(){return this._fov/Math.PI*180},fs.fov.set=function(S){S=Math.max(.01,Math.min(60,S)),this._fov!==S&&(this._unmodified=!1,this._fov=S/180*Math.PI,this._calcMatrices())},fs.zoom.get=function(){return this._zoom},fs.zoom.set=function(S){var T=Math.min(Math.max(S,this.minZoom),this.maxZoom);this._zoom!==T&&(this._unmodified=!1,this._zoom=T,this.scale=this.zoomScale(T),this.tileZoom=Math.floor(T),this.zoomFraction=T-this.tileZoom,this._constrain(),this._calcMatrices())},fs.center.get=function(){return this._center},fs.center.set=function(S){S.lat===this._center.lat&&S.lng===this._center.lng||(this._unmodified=!1,this._center=S,this._constrain(),this._calcMatrices())},fs.padding.get=function(){return this._edgeInsets.toJSON()},fs.padding.set=function(S){this._edgeInsets.equals(S)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,S,1),this._calcMatrices())},fs.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},uo.prototype.isPaddingEqual=function(S){return this._edgeInsets.equals(S)},uo.prototype.interpolatePadding=function(S,T,C){this._unmodified=!1,this._edgeInsets.interpolate(S,T,C),this._constrain(),this._calcMatrices()},uo.prototype.coveringZoomLevel=function(S){var T=(S.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/S.tileSize));return Math.max(0,T)},uo.prototype.getVisibleUnwrappedCoordinates=function(S){var T=[new b.UnwrappedTileID(0,S)];if(this._renderWorldCopies)for(var C=this.pointCoordinate(new b.Point(0,0)),I=this.pointCoordinate(new b.Point(this.width,0)),Z=this.pointCoordinate(new b.Point(this.width,this.height)),ee=this.pointCoordinate(new b.Point(0,this.height)),ae=Math.floor(Math.min(C.x,I.x,Z.x,ee.x)),Me=Math.floor(Math.max(C.x,I.x,Z.x,ee.x)),ot=ae-1;ot<=Me+1;ot++)ot!==0&&T.push(new b.UnwrappedTileID(ot,S));return T},uo.prototype.coveringTiles=function(S){var T=this.coveringZoomLevel(S),C=T;if(S.minzoom!==void 0&&T<S.minzoom)return[];S.maxzoom!==void 0&&T>S.maxzoom&&(T=S.maxzoom);var I=b.MercatorCoordinate.fromLngLat(this.center),Z=Math.pow(2,T),ee=[Z*I.x,Z*I.y,0],ae=mp.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,T),Me=S.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Me=T);var ot=function(li){return{aabb:new tc([li*Z,0,0],[(li+1)*Z,Z,0]),zoom:0,x:0,y:0,wrap:li,fullyVisible:!1}},bt=[],Vt=[],Wt=T,$t=S.reparseOverscaled?C:T;if(this._renderWorldCopies)for(var vr=1;vr<=3;vr++)bt.push(ot(-vr)),bt.push(ot(vr));for(bt.push(ot(0));bt.length>0;){var hr=bt.pop(),Ir=hr.x,lr=hr.y,Pr=hr.fullyVisible;if(!Pr){var jr=hr.aabb.intersects(ae);if(jr===0)continue;Pr=jr===2}var tn=hr.aabb.distanceX(ee),_n=hr.aabb.distanceY(ee),dn=Math.max(Math.abs(tn),Math.abs(_n));if(hr.zoom===Wt||dn>3+(1<<Wt-hr.zoom)-2&&hr.zoom>=Me)Vt.push({tileID:new b.OverscaledTileID(hr.zoom===Wt?$t:hr.zoom,hr.wrap,hr.zoom,Ir,lr),distanceSq:b.sqrLen([ee[0]-.5-Ir,ee[1]-.5-lr])});else for(var Tn=0;Tn<4;Tn++){var Un=(Ir<<1)+Tn%2,si=(lr<<1)+(Tn>>1);bt.push({aabb:hr.aabb.quadrant(Tn),zoom:hr.zoom+1,x:Un,y:si,wrap:hr.wrap,fullyVisible:Pr})}}return Vt.sort(function(li,Ii){return li.distanceSq-Ii.distanceSq}).map(function(li){return li.tileID})},uo.prototype.resize=function(S,T){this.width=S,this.height=T,this.pixelsToGLUnits=[2/S,-2/T],this._constrain(),this._calcMatrices()},fs.unmodified.get=function(){return this._unmodified},uo.prototype.zoomScale=function(S){return Math.pow(2,S)},uo.prototype.scaleZoom=function(S){return Math.log(S)/Math.LN2},uo.prototype.project=function(S){var T=b.clamp(S.lat,-this.maxValidLatitude,this.maxValidLatitude);return new b.Point(b.mercatorXfromLng(S.lng)*this.worldSize,b.mercatorYfromLat(T)*this.worldSize)},uo.prototype.unproject=function(S){return new b.MercatorCoordinate(S.x/this.worldSize,S.y/this.worldSize).toLngLat()},fs.point.get=function(){return this.project(this.center)},uo.prototype.setLocationAtPoint=function(S,T){var C=this.pointCoordinate(T),I=this.pointCoordinate(this.centerPoint),Z=this.locationCoordinate(S),ee=new b.MercatorCoordinate(Z.x-(C.x-I.x),Z.y-(C.y-I.y));this.center=this.coordinateLocation(ee),this._renderWorldCopies&&(this.center=this.center.wrap())},uo.prototype.locationPoint=function(S){return this.coordinatePoint(this.locationCoordinate(S))},uo.prototype.pointLocation=function(S){return this.coordinateLocation(this.pointCoordinate(S))},uo.prototype.locationCoordinate=function(S){return b.MercatorCoordinate.fromLngLat(S)},uo.prototype.coordinateLocation=function(S){return S.toLngLat()},uo.prototype.pointCoordinate=function(S){var T=[S.x,S.y,0,1],C=[S.x,S.y,1,1];b.transformMat4(T,T,this.pixelMatrixInverse),b.transformMat4(C,C,this.pixelMatrixInverse);var I=T[3],Z=C[3],ee=T[1]/I,ae=C[1]/Z,Me=T[2]/I,ot=C[2]/Z,bt=Me===ot?0:(0-Me)/(ot-Me);return new b.MercatorCoordinate(b.number(T[0]/I,C[0]/Z,bt)/this.worldSize,b.number(ee,ae,bt)/this.worldSize)},uo.prototype.coordinatePoint=function(S){var T=[S.x*this.worldSize,S.y*this.worldSize,0,1];return b.transformMat4(T,T,this.pixelMatrix),new b.Point(T[0]/T[3],T[1]/T[3])},uo.prototype.getBounds=function(){return new b.LngLatBounds().extend(this.pointLocation(new b.Point(0,0))).extend(this.pointLocation(new b.Point(this.width,0))).extend(this.pointLocation(new b.Point(this.width,this.height))).extend(this.pointLocation(new b.Point(0,this.height)))},uo.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new b.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},uo.prototype.setMaxBounds=function(S){S?(this.lngRange=[S.getWest(),S.getEast()],this.latRange=[S.getSouth(),S.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},uo.prototype.calculatePosMatrix=function(S,T){T===void 0&&(T=!1);var C=S.key,I=T?this._alignedPosMatrixCache:this._posMatrixCache;if(I[C])return I[C];var Z=S.canonical,ee=this.worldSize/this.zoomScale(Z.z),ae=Z.x+Math.pow(2,Z.z)*S.wrap,Me=b.identity(new Float64Array(16));return b.translate(Me,Me,[ae*ee,Z.y*ee,0]),b.scale(Me,Me,[ee/b.EXTENT,ee/b.EXTENT,1]),b.multiply(Me,T?this.alignedProjMatrix:this.projMatrix,Me),I[C]=new Float32Array(Me),I[C]},uo.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},uo.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var S,T,C,I,Z=-90,ee=90,ae=-180,Me=180,ot=this.size,bt=this._unmodified;if(this.latRange){var Vt=this.latRange;Z=b.mercatorYfromLat(Vt[1])*this.worldSize,S=(ee=b.mercatorYfromLat(Vt[0])*this.worldSize)-Z<ot.y?ot.y/(ee-Z):0}if(this.lngRange){var Wt=this.lngRange;ae=b.mercatorXfromLng(Wt[0])*this.worldSize,T=(Me=b.mercatorXfromLng(Wt[1])*this.worldSize)-ae<ot.x?ot.x/(Me-ae):0}var $t=this.point,vr=Math.max(T||0,S||0);if(vr)return this.center=this.unproject(new b.Point(T?(Me+ae)/2:$t.x,S?(ee+Z)/2:$t.y)),this.zoom+=this.scaleZoom(vr),this._unmodified=bt,void(this._constraining=!1);if(this.latRange){var hr=$t.y,Ir=ot.y/2;hr-Ir<Z&&(I=Z+Ir),hr+Ir>ee&&(I=ee-Ir)}if(this.lngRange){var lr=$t.x,Pr=ot.x/2;lr-Pr<ae&&(C=ae+Pr),lr+Pr>Me&&(C=Me-Pr)}C===void 0&&I===void 0||(this.center=this.unproject(new b.Point(C!==void 0?C:$t.x,I!==void 0?I:$t.y))),this._unmodified=bt,this._constraining=!1}},uo.prototype._calcMatrices=function(){if(this.height){var S=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var T=Math.PI/2+this._pitch,C=this._fov*(.5+S.y/this.height),I=Math.sin(C)*this.cameraToCenterDistance/Math.sin(b.clamp(Math.PI-T-C,.01,Math.PI-.01)),Z=this.point,ee=Z.x,ae=Z.y,Me=1.01*(Math.cos(Math.PI/2-this._pitch)*I+this.cameraToCenterDistance),ot=this.height/50,bt=new Float64Array(16);b.perspective(bt,this._fov,this.width/this.height,ot,Me),bt[8]=2*-S.x/this.width,bt[9]=2*S.y/this.height,b.scale(bt,bt,[1,-1,1]),b.translate(bt,bt,[0,0,-this.cameraToCenterDistance]),b.rotateX(bt,bt,this._pitch),b.rotateZ(bt,bt,this.angle),b.translate(bt,bt,[-ee,-ae,0]),this.mercatorMatrix=b.scale([],bt,[this.worldSize,this.worldSize,this.worldSize]),b.scale(bt,bt,[1,1,b.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=bt,this.invProjMatrix=b.invert([],this.projMatrix);var Vt=this.width%2/2,Wt=this.height%2/2,$t=Math.cos(this.angle),vr=Math.sin(this.angle),hr=ee-Math.round(ee)+$t*Vt+vr*Wt,Ir=ae-Math.round(ae)+$t*Wt+vr*Vt,lr=new Float64Array(bt);if(b.translate(lr,lr,[hr>.5?hr-1:hr,Ir>.5?Ir-1:Ir,0]),this.alignedProjMatrix=lr,bt=b.create(),b.scale(bt,bt,[this.width/2,-this.height/2,1]),b.translate(bt,bt,[1,-1,0]),this.labelPlaneMatrix=bt,bt=b.create(),b.scale(bt,bt,[1,-1,1]),b.translate(bt,bt,[-1,-1,0]),b.scale(bt,bt,[2/this.width,2/this.height,1]),this.glCoordMatrix=bt,this.pixelMatrix=b.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(bt=b.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=bt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},uo.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var S=this.pointCoordinate(new b.Point(0,0)),T=[S.x*this.worldSize,S.y*this.worldSize,0,1];return b.transformMat4(T,T,this.pixelMatrix)[3]/this.cameraToCenterDistance},uo.prototype.getCameraPoint=function(){var S=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new b.Point(0,S))},uo.prototype.getCameraQueryGeometry=function(S){var T=this.getCameraPoint();if(S.length===1)return[S[0],T];for(var C=T.x,I=T.y,Z=T.x,ee=T.y,ae=0,Me=S;ae<Me.length;ae+=1){var ot=Me[ae];C=Math.min(C,ot.x),I=Math.min(I,ot.y),Z=Math.max(Z,ot.x),ee=Math.max(ee,ot.y)}return[new b.Point(C,I),new b.Point(Z,I),new b.Point(Z,ee),new b.Point(C,ee),new b.Point(C,I)]},Object.defineProperties(uo.prototype,fs);var no=function(S){var T,C,I,Z;this._hashName=S&&encodeURIComponent(S),b.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(T=this._updateHashUnthrottled.bind(this),C=!1,I=null,Z=function(){I=null,C&&(T(),I=setTimeout(Z,300),C=!1)},function(){return C=!0,I||Z(),I})};no.prototype.addTo=function(S){return this._map=S,b.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},no.prototype.remove=function(){return b.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},no.prototype.getHashString=function(S){var T=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,I=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),Z=Math.pow(10,I),ee=Math.round(T.lng*Z)/Z,ae=Math.round(T.lat*Z)/Z,Me=this._map.getBearing(),ot=this._map.getPitch(),bt="";if(bt+=S?"/"+ee+"/"+ae+"/"+C:C+"/"+ae+"/"+ee,(Me||ot)&&(bt+="/"+Math.round(10*Me)/10),ot&&(bt+="/"+Math.round(ot)),this._hashName){var Vt=this._hashName,Wt=!1,$t=b.window.location.hash.slice(1).split("&").map(function(vr){var hr=vr.split("=")[0];return hr===Vt?(Wt=!0,hr+"="+bt):vr}).filter(function(vr){return vr});return Wt||$t.push(Vt+"="+bt),"#"+$t.join("&")}return"#"+bt},no.prototype._getCurrentHash=function(){var S,T=this,C=b.window.location.hash.replace("#","");return this._hashName?(C.split("&").map(function(I){return I.split("=")}).forEach(function(I){I[0]===T._hashName&&(S=I)}),(S&&S[1]||"").split("/")):C.split("/")},no.prototype._onHashChange=function(){var S=this._getCurrentHash();if(S.length>=3&&!S.some(function(C){return isNaN(C)})){var T=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(S[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+S[2],+S[1]],zoom:+S[0],bearing:T,pitch:+(S[4]||0)}),!0}return!1},no.prototype._updateHashUnthrottled=function(){var S=b.window.location.href.replace(/(#.+)?$/,this.getHashString());try{b.window.history.replaceState(b.window.history.state,null,S)}catch(T){}};var qp={linearity:.3,easing:b.bezier(0,0,.3,1)},sh=b.extend({deceleration:2500,maxSpeed:1400},qp),yp=b.extend({deceleration:20,maxSpeed:1400},qp),Bd=b.extend({deceleration:1e3,maxSpeed:360},qp),Ea=b.extend({deceleration:1e3,maxSpeed:90},qp),uh=function(S){this._map=S,this.clear()};function Lf(S,T){(!S.duration||S.duration<T.duration)&&(S.duration=T.duration,S.easing=T.easing)}function iu(S,T,C){var I=C.maxSpeed,Z=C.linearity,ee=C.deceleration,ae=b.clamp(S*Z/(T/1e3),-I,I),Me=Math.abs(ae)/(ee*Z);return{easing:C.easing,duration:1e3*Me,amount:ae*(Me/2)}}uh.prototype.clear=function(){this._inertiaBuffer=[]},uh.prototype.record=function(S){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.browser.now(),settings:S})},uh.prototype._drainInertiaBuffer=function(){for(var S=this._inertiaBuffer,T=b.browser.now();S.length>0&&T-S[0].time>160;)S.shift()},uh.prototype._onMoveEnd=function(S){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var T={zoom:0,bearing:0,pitch:0,pan:new b.Point(0,0),pinchAround:void 0,around:void 0},C=0,I=this._inertiaBuffer;C<I.length;C+=1){var Z=I[C].settings;T.zoom+=Z.zoomDelta||0,T.bearing+=Z.bearingDelta||0,T.pitch+=Z.pitchDelta||0,Z.panDelta&&T.pan._add(Z.panDelta),Z.around&&(T.around=Z.around),Z.pinchAround&&(T.pinchAround=Z.pinchAround)}var ee=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ae={};if(T.pan.mag()){var Me=iu(T.pan.mag(),ee,b.extend({},sh,S||{}));ae.offset=T.pan.mult(Me.amount/T.pan.mag()),ae.center=this._map.transform.center,Lf(ae,Me)}if(T.zoom){var ot=iu(T.zoom,ee,yp);ae.zoom=this._map.transform.zoom+ot.amount,Lf(ae,ot)}if(T.bearing){var bt=iu(T.bearing,ee,Bd);ae.bearing=this._map.transform.bearing+b.clamp(bt.amount,-179,179),Lf(ae,bt)}if(T.pitch){var Vt=iu(T.pitch,ee,Ea);ae.pitch=this._map.transform.pitch+Vt.amount,Lf(ae,Vt)}if(ae.zoom||ae.bearing){var Wt=T.pinchAround===void 0?T.around:T.pinchAround;ae.around=Wt?this._map.unproject(Wt):this._map.getCenter()}return this.clear(),b.extend(ae,{noMoveStart:!0})}};var us=function(S){function T(I,Z,ee,ae){ae===void 0&&(ae={});var Me=j.mousePos(Z.getCanvasContainer(),ee),ot=Z.unproject(Me);S.call(this,I,b.extend({point:Me,lngLat:ot,originalEvent:ee},ae)),this._defaultPrevented=!1,this.target=Z}S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T;var C={defaultPrevented:{configurable:!0}};return T.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(T.prototype,C),T}(b.Event),lh=function(S){function T(I,Z,ee){var ae=I==="touchend"?ee.changedTouches:ee.touches,Me=j.touchPos(Z.getCanvasContainer(),ae),ot=Me.map(function(Wt){return Z.unproject(Wt)}),bt=Me.reduce(function(Wt,$t,vr,hr){return Wt.add($t.div(hr.length))},new b.Point(0,0)),Vt=Z.unproject(bt);S.call(this,I,{points:Me,point:bt,lngLats:ot,lngLat:Vt,originalEvent:ee}),this._defaultPrevented=!1}S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T;var C={defaultPrevented:{configurable:!0}};return T.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(T.prototype,C),T}(b.Event),Nd=function(S){function T(I,Z,ee){S.call(this,I,{originalEvent:ee}),this._defaultPrevented=!1}S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T;var C={defaultPrevented:{configurable:!0}};return T.prototype.preventDefault=function(){this._defaultPrevented=!0},C.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(T.prototype,C),T}(b.Event),ys=function(S,T){this._map=S,this._clickTolerance=T.clickTolerance};ys.prototype.reset=function(){delete this._mousedownPos},ys.prototype.wheel=function(S){return this._firePreventable(new Nd(S.type,this._map,S))},ys.prototype.mousedown=function(S,T){return this._mousedownPos=T,this._firePreventable(new us(S.type,this._map,S))},ys.prototype.mouseup=function(S){this._map.fire(new us(S.type,this._map,S))},ys.prototype.click=function(S,T){this._mousedownPos&&this._mousedownPos.dist(T)>=this._clickTolerance||this._map.fire(new us(S.type,this._map,S))},ys.prototype.dblclick=function(S){return this._firePreventable(new us(S.type,this._map,S))},ys.prototype.mouseover=function(S){this._map.fire(new us(S.type,this._map,S))},ys.prototype.mouseout=function(S){this._map.fire(new us(S.type,this._map,S))},ys.prototype.touchstart=function(S){return this._firePreventable(new lh(S.type,this._map,S))},ys.prototype.touchmove=function(S){this._map.fire(new lh(S.type,this._map,S))},ys.prototype.touchend=function(S){this._map.fire(new lh(S.type,this._map,S))},ys.prototype.touchcancel=function(S){this._map.fire(new lh(S.type,this._map,S))},ys.prototype._firePreventable=function(S){if(this._map.fire(S),S.defaultPrevented)return{}},ys.prototype.isEnabled=function(){return!0},ys.prototype.isActive=function(){return!1},ys.prototype.enable=function(){},ys.prototype.disable=function(){};var zi=function(S){this._map=S};zi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},zi.prototype.mousemove=function(S){this._map.fire(new us(S.type,this._map,S))},zi.prototype.mousedown=function(){this._delayContextMenu=!0},zi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new us("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},zi.prototype.contextmenu=function(S){this._delayContextMenu?this._contextMenuEvent=S:this._map.fire(new us(S.type,this._map,S)),this._map.listens("contextmenu")&&S.preventDefault()},zi.prototype.isEnabled=function(){return!0},zi.prototype.isActive=function(){return!1},zi.prototype.enable=function(){},zi.prototype.disable=function(){};var nl=function(S,T){this._map=S,this._el=S.getCanvasContainer(),this._container=S.getContainer(),this._clickTolerance=T.clickTolerance||1};function rc(S,T){for(var C={},I=0;I<S.length;I++)C[S[I].identifier]=T[I];return C}nl.prototype.isEnabled=function(){return!!this._enabled},nl.prototype.isActive=function(){return!!this._active},nl.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},nl.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},nl.prototype.mousedown=function(S,T){this.isEnabled()&&S.shiftKey&&S.button===0&&(j.disableDrag(),this._startPos=this._lastPos=T,this._active=!0)},nl.prototype.mousemoveWindow=function(S,T){if(this._active){var C=T;if(!(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)){var I=this._startPos;this._lastPos=C,this._box||(this._box=j.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",S));var Z=Math.min(I.x,C.x),ee=Math.max(I.x,C.x),ae=Math.min(I.y,C.y),Me=Math.max(I.y,C.y);j.setTransform(this._box,"translate("+Z+"px,"+ae+"px)"),this._box.style.width=ee-Z+"px",this._box.style.height=Me-ae+"px"}}},nl.prototype.mouseupWindow=function(S,T){var C=this;if(this._active&&S.button===0){var I=this._startPos,Z=T;if(this.reset(),j.suppressClick(),I.x!==Z.x||I.y!==Z.y)return this._map.fire(new b.Event("boxzoomend",{originalEvent:S})),{cameraAnimation:function(ee){return ee.fitScreenCoordinates(I,Z,C._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",S)}},nl.prototype.keydown=function(S){this._active&&S.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",S))},nl.prototype.blur=function(){this.reset()},nl.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos},nl.prototype._fireEvent=function(S,T){return this._map.fire(new b.Event(S,{originalEvent:T}))};var ch=function(S){this.reset(),this.numTouches=S.numTouches};ch.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ch.prototype.touchstart=function(S,T,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=S.timeStamp),C.length===this.numTouches&&(this.centroid=function(I){for(var Z=new b.Point(0,0),ee=0,ae=I;ee<ae.length;ee+=1)Z._add(ae[ee]);return Z.div(I.length)}(T),this.touches=rc(C,T)))},ch.prototype.touchmove=function(S,T,C){if(!this.aborted&&this.centroid){var I=rc(C,T);for(var Z in this.touches){var ee=I[Z];(!ee||ee.dist(this.touches[Z])>30)&&(this.aborted=!0)}}},ch.prototype.touchend=function(S,T,C){if((!this.centroid||S.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){var I=!this.aborted&&this.centroid;if(this.reset(),I)return I}};var gl=function(S){this.singleTap=new ch(S),this.numTaps=S.numTaps,this.reset()};gl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},gl.prototype.touchstart=function(S,T,C){this.singleTap.touchstart(S,T,C)},gl.prototype.touchmove=function(S,T,C){this.singleTap.touchmove(S,T,C)},gl.prototype.touchend=function(S,T,C){var I=this.singleTap.touchend(S,T,C);if(I){var Z=S.timeStamp-this.lastTime<500,ee=!this.lastTap||this.lastTap.dist(I)<30;if(Z&&ee||this.reset(),this.count++,this.lastTime=S.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}};var Zo=function(){this._zoomIn=new gl({numTouches:1,numTaps:2}),this._zoomOut=new gl({numTouches:2,numTaps:1}),this.reset()};Zo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Zo.prototype.touchstart=function(S,T,C){this._zoomIn.touchstart(S,T,C),this._zoomOut.touchstart(S,T,C)},Zo.prototype.touchmove=function(S,T,C){this._zoomIn.touchmove(S,T,C),this._zoomOut.touchmove(S,T,C)},Zo.prototype.touchend=function(S,T,C){var I=this,Z=this._zoomIn.touchend(S,T,C),ee=this._zoomOut.touchend(S,T,C);return Z?(this._active=!0,S.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(ae){return ae.easeTo({duration:300,zoom:ae.getZoom()+1,around:ae.unproject(Z)},{originalEvent:S})}}):ee?(this._active=!0,S.preventDefault(),setTimeout(function(){return I.reset()},0),{cameraAnimation:function(ae){return ae.easeTo({duration:300,zoom:ae.getZoom()-1,around:ae.unproject(ee)},{originalEvent:S})}}):void 0},Zo.prototype.touchcancel=function(){this.reset()},Zo.prototype.enable=function(){this._enabled=!0},Zo.prototype.disable=function(){this._enabled=!1,this.reset()},Zo.prototype.isEnabled=function(){return this._enabled},Zo.prototype.isActive=function(){return this._active};var Qp={0:1,2:2},Yn=function(S){this.reset(),this._clickTolerance=S.clickTolerance||1};Yn.prototype.blur=function(){this.reset()},Yn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Yn.prototype._correctButton=function(S,T){return!1},Yn.prototype._move=function(S,T){return{}},Yn.prototype.mousedown=function(S,T){if(!this._lastPoint){var C=j.mouseButton(S);this._correctButton(S,C)&&(this._lastPoint=T,this._eventButton=C)}},Yn.prototype.mousemoveWindow=function(S,T){var C=this._lastPoint;if(C){if(S.preventDefault(),function(I,Z){var ee=Qp[Z];return I.buttons===void 0||(I.buttons&ee)!==ee}(S,this._eventButton))this.reset();else if(this._moved||!(T.dist(C)<this._clickTolerance))return this._moved=!0,this._lastPoint=T,this._move(C,T)}},Yn.prototype.mouseupWindow=function(S){this._lastPoint&&j.mouseButton(S)===this._eventButton&&(this._moved&&j.suppressClick(),this.reset())},Yn.prototype.enable=function(){this._enabled=!0},Yn.prototype.disable=function(){this._enabled=!1,this.reset()},Yn.prototype.isEnabled=function(){return this._enabled},Yn.prototype.isActive=function(){return this._active};var Qc=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.mousedown=function(C,I){S.prototype.mousedown.call(this,C,I),this._lastPoint&&(this._active=!0)},T.prototype._correctButton=function(C,I){return I===0&&!C.ctrlKey},T.prototype._move=function(C,I){return{around:I,panDelta:I.sub(C)}},T}(Yn),kc=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype._correctButton=function(C,I){return I===0&&C.ctrlKey||I===2},T.prototype._move=function(C,I){var Z=.8*(I.x-C.x);if(Z)return this._active=!0,{bearingDelta:Z}},T.prototype.contextmenu=function(C){C.preventDefault()},T}(Yn),_p=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype._correctButton=function(C,I){return I===0&&C.ctrlKey||I===2},T.prototype._move=function(C,I){var Z=-.5*(I.y-C.y);if(Z)return this._active=!0,{pitchDelta:Z}},T.prototype.contextmenu=function(C){C.preventDefault()},T}(Yn),mc=function(S){this._minTouches=1,this._clickTolerance=S.clickTolerance||1,this.reset()};mc.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new b.Point(0,0)},mc.prototype.touchstart=function(S,T,C){return this._calculateTransform(S,T,C)},mc.prototype.touchmove=function(S,T,C){if(this._active&&!(C.length<this._minTouches))return S.preventDefault(),this._calculateTransform(S,T,C)},mc.prototype.touchend=function(S,T,C){this._calculateTransform(S,T,C),this._active&&C.length<this._minTouches&&this.reset()},mc.prototype.touchcancel=function(){this.reset()},mc.prototype._calculateTransform=function(S,T,C){C.length>0&&(this._active=!0);var I=rc(C,T),Z=new b.Point(0,0),ee=new b.Point(0,0),ae=0;for(var Me in I){var ot=I[Me],bt=this._touches[Me];bt&&(Z._add(ot),ee._add(ot.sub(bt)),ae++,I[Me]=ot)}if(this._touches=I,!(ae<this._minTouches)&&ee.mag()){var Vt=ee.div(ae);if(this._sum._add(Vt),!(this._sum.mag()<this._clickTolerance))return{around:Z.div(ae),panDelta:Vt}}},mc.prototype.enable=function(){this._enabled=!0},mc.prototype.disable=function(){this._enabled=!1,this.reset()},mc.prototype.isEnabled=function(){return this._enabled},mc.prototype.isActive=function(){return this._active};var il=function(){this.reset()};function Bh(S,T,C){for(var I=0;I<S.length;I++)if(S[I].identifier===C)return T[I]}function gf(S,T){return Math.log(S/T)/Math.LN2}il.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},il.prototype._start=function(S){},il.prototype._move=function(S,T,C){return{}},il.prototype.touchstart=function(S,T,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([T[0],T[1]]))},il.prototype.touchmove=function(S,T,C){if(this._firstTwoTouches){S.preventDefault();var I=this._firstTwoTouches,Z=I[1],ee=Bh(C,T,I[0]),ae=Bh(C,T,Z);if(ee&&ae){var Me=this._aroundCenter?null:ee.add(ae).div(2);return this._move([ee,ae],Me,S)}}},il.prototype.touchend=function(S,T,C){if(this._firstTwoTouches){var I=this._firstTwoTouches,Z=I[1],ee=Bh(C,T,I[0]),ae=Bh(C,T,Z);ee&&ae||(this._active&&j.suppressClick(),this.reset())}},il.prototype.touchcancel=function(){this.reset()},il.prototype.enable=function(S){this._enabled=!0,this._aroundCenter=!!S&&S.around==="center"},il.prototype.disable=function(){this._enabled=!1,this.reset()},il.prototype.isEnabled=function(){return this._enabled},il.prototype.isActive=function(){return this._active};var Bs=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.reset=function(){S.prototype.reset.call(this),delete this._distance,delete this._startDistance},T.prototype._start=function(C){this._startDistance=this._distance=C[0].dist(C[1])},T.prototype._move=function(C,I){var Z=this._distance;if(this._distance=C[0].dist(C[1]),this._active||!(Math.abs(gf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:gf(this._distance,Z),pinchAround:I}},T}(il);function Ml(S,T){return 180*S.angleWith(T)/Math.PI}var zd=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.reset=function(){S.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},T.prototype._start=function(C){this._startVector=this._vector=C[0].sub(C[1]),this._minDiameter=C[0].dist(C[1])},T.prototype._move=function(C,I){var Z=this._vector;if(this._vector=C[0].sub(C[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ml(this._vector,Z),pinchAround:I}},T.prototype._isBelowThreshold=function(C){this._minDiameter=Math.min(this._minDiameter,C.mag());var I=25/(Math.PI*this._minDiameter)*360,Z=Ml(C,this._startVector);return Math.abs(Z)<I},T}(il);function xp(S){return Math.abs(S.y)>Math.abs(S.x)}var Df=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.reset=function(){S.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},T.prototype._start=function(C){this._lastPoints=C,xp(C[0].sub(C[1]))&&(this._valid=!1)},T.prototype._move=function(C,I,Z){var ee=C[0].sub(this._lastPoints[0]),ae=C[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ee,ae,Z.timeStamp),this._valid)return this._lastPoints=C,this._active=!0,{pitchDelta:(ee.y+ae.y)/2*-.5}},T.prototype.gestureBeginsVertically=function(C,I,Z){if(this._valid!==void 0)return this._valid;var ee=C.mag()>=2,ae=I.mag()>=2;if(ee||ae){if(!ee||!ae)return this._firstMove===void 0&&(this._firstMove=Z),Z-this._firstMove<100&&void 0;var Me=C.y>0==I.y>0;return xp(C)&&xp(I)&&Me}},T}(il),xv={panStep:100,bearingStep:15,pitchStep:10},nc=function(){var S=xv;this._panStep=S.panStep,this._bearingStep=S.bearingStep,this._pitchStep=S.pitchStep,this._rotationDisabled=!1};function ic(S){return S*(2-S)}nc.prototype.blur=function(){this.reset()},nc.prototype.reset=function(){this._active=!1},nc.prototype.keydown=function(S){var T=this;if(!(S.altKey||S.ctrlKey||S.metaKey)){var C=0,I=0,Z=0,ee=0,ae=0;switch(S.keyCode){case 61:case 107:case 171:case 187:C=1;break;case 189:case 109:case 173:C=-1;break;case 37:S.shiftKey?I=-1:(S.preventDefault(),ee=-1);break;case 39:S.shiftKey?I=1:(S.preventDefault(),ee=1);break;case 38:S.shiftKey?Z=1:(S.preventDefault(),ae=-1);break;case 40:S.shiftKey?Z=-1:(S.preventDefault(),ae=1);break;default:return}return this._rotationDisabled&&(I=0,Z=0),{cameraAnimation:function(Me){var ot=Me.getZoom();Me.easeTo({duration:300,easeId:"keyboardHandler",easing:ic,zoom:C?Math.round(ot)+C*(S.shiftKey?2:1):ot,bearing:Me.getBearing()+I*T._bearingStep,pitch:Me.getPitch()+Z*T._pitchStep,offset:[-ee*T._panStep,-ae*T._panStep],center:Me.getCenter()},{originalEvent:S})}}}},nc.prototype.enable=function(){this._enabled=!0},nc.prototype.disable=function(){this._enabled=!1,this.reset()},nc.prototype.isEnabled=function(){return this._enabled},nc.prototype.isActive=function(){return this._active},nc.prototype.disableRotation=function(){this._rotationDisabled=!0},nc.prototype.enableRotation=function(){this._rotationDisabled=!1};var wa=function(S,T){this._map=S,this._el=S.getCanvasContainer(),this._handler=T,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,b.bindAll(["_onTimeout"],this)};wa.prototype.setZoomRate=function(S){this._defaultZoomRate=S},wa.prototype.setWheelZoomRate=function(S){this._wheelZoomRate=S},wa.prototype.isEnabled=function(){return!!this._enabled},wa.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},wa.prototype.isZooming=function(){return!!this._zooming},wa.prototype.enable=function(S){this.isEnabled()||(this._enabled=!0,this._aroundCenter=S&&S.around==="center")},wa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},wa.prototype.wheel=function(S){if(this.isEnabled()){var T=S.deltaMode===b.window.WheelEvent.DOM_DELTA_LINE?40*S.deltaY:S.deltaY,C=b.browser.now(),I=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,T!==0&&T%4.000244140625==0?this._type="wheel":T!==0&&Math.abs(T)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=T,this._timeout=setTimeout(this._onTimeout,40,S)):this._type||(this._type=Math.abs(I*T)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,T+=this._lastValue)),S.shiftKey&&T&&(T/=4),this._type&&(this._lastWheelEvent=S,this._delta-=T,this._active||this._start(S)),S.preventDefault()}},wa.prototype._onTimeout=function(S){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(S)},wa.prototype._start=function(S){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var T=j.mousePos(this._el,S);this._around=b.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(T)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},wa.prototype.renderFrame=function(){var S=this;if(this._frameId&&(this._frameId=null,this.isActive())){var T=this._map.transform;if(this._delta!==0){var C=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,I=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&I!==0&&(I=1/I);var Z=typeof this._targetZoom=="number"?T.zoomScale(this._targetZoom):T.scale;this._targetZoom=Math.min(T.maxZoom,Math.max(T.minZoom,T.scaleZoom(Z*I))),this._type==="wheel"&&(this._startZoom=T.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ee,ae=typeof this._targetZoom=="number"?this._targetZoom:T.zoom,Me=this._startZoom,ot=this._easing,bt=!1;if(this._type==="wheel"&&Me&&ot){var Vt=Math.min((b.browser.now()-this._lastWheelEventTime)/200,1),Wt=ot(Vt);ee=b.number(Me,ae,Wt),Vt<1?this._frameId||(this._frameId=!0):bt=!0}else ee=ae,bt=!0;return this._active=!0,bt&&(this._active=!1,this._finishTimeout=setTimeout(function(){S._zooming=!1,S._handler._triggerRenderFrame(),delete S._targetZoom,delete S._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!bt,zoomDelta:ee-T.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},wa.prototype._smoothOutEasing=function(S){var T=b.ease;if(this._prevEase){var C=this._prevEase,I=(b.browser.now()-C.start)/C.duration,Z=C.easing(I+.01)-C.easing(I),ee=.27/Math.sqrt(Z*Z+1e-4)*.01,ae=Math.sqrt(.0729-ee*ee);T=b.bezier(ee,ae,.25,1)}return this._prevEase={start:b.browser.now(),duration:S,easing:T},T},wa.prototype.blur=function(){this.reset()},wa.prototype.reset=function(){this._active=!1};var Rs=function(S,T){this._clickZoom=S,this._tapZoom=T};Rs.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Rs.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Rs.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Rs.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Nl=function(){this.reset()};Nl.prototype.reset=function(){this._active=!1},Nl.prototype.blur=function(){this.reset()},Nl.prototype.dblclick=function(S,T){return S.preventDefault(),{cameraAnimation:function(C){C.easeTo({duration:300,zoom:C.getZoom()+(S.shiftKey?-1:1),around:C.unproject(T)},{originalEvent:S})}}},Nl.prototype.enable=function(){this._enabled=!0},Nl.prototype.disable=function(){this._enabled=!1,this.reset()},Nl.prototype.isEnabled=function(){return this._enabled},Nl.prototype.isActive=function(){return this._active};var Wu=function(){this._tap=new gl({numTouches:1,numTaps:1}),this.reset()};Wu.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Wu.prototype.touchstart=function(S,T,C){this._swipePoint||(this._tapTime&&S.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?C.length>0&&(this._swipePoint=T[0],this._swipeTouch=C[0].identifier):this._tap.touchstart(S,T,C))},Wu.prototype.touchmove=function(S,T,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;var I=T[0],Z=I.y-this._swipePoint.y;return this._swipePoint=I,S.preventDefault(),this._active=!0,{zoomDelta:Z/128}}}else this._tap.touchmove(S,T,C)},Wu.prototype.touchend=function(S,T,C){this._tapTime?this._swipePoint&&C.length===0&&this.reset():this._tap.touchend(S,T,C)&&(this._tapTime=S.timeStamp)},Wu.prototype.touchcancel=function(){this.reset()},Wu.prototype.enable=function(){this._enabled=!0},Wu.prototype.disable=function(){this._enabled=!1,this.reset()},Wu.prototype.isEnabled=function(){return this._enabled},Wu.prototype.isActive=function(){return this._active};var fh=function(S,T,C){this._el=S,this._mousePan=T,this._touchPan=C};fh.prototype.enable=function(S){this._inertiaOptions=S||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},fh.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},fh.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},fh.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Jc=function(S,T,C){this._pitchWithRotate=S.pitchWithRotate,this._mouseRotate=T,this._mousePitch=C};Jc.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Jc.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Jc.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Jc.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Fu=function(S,T,C,I){this._el=S,this._touchZoom=T,this._touchRotate=C,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0};Fu.prototype.enable=function(S){this._touchZoom.enable(S),this._rotationDisabled||this._touchRotate.enable(S),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Fu.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Fu.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Fu.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Fu.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Fu.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ml=function(S){return S.zoom||S.drag||S.pitch||S.rotate},mf=function(S){function T(){S.apply(this,arguments)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T}(b.Event);function Ji(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta}var Ai=function(S,T){this._map=S,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new uh(S),this._bearingSnap=T.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(T),b.bindAll(["handleEvent","handleWindowEvent"],this);var C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[b.window.document,"mousemove",{capture:!0}],[b.window.document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[b.window,"blur",void 0]];for(var I=0,Z=this._listeners;I<Z.length;I+=1){var ee=Z[I],ae=ee[0];j.addEventListener(ae,ee[1],ae===b.window.document?this.handleWindowEvent:this.handleEvent,ee[2])}};Ai.prototype.destroy=function(){for(var S=0,T=this._listeners;S<T.length;S+=1){var C=T[S],I=C[0];j.removeEventListener(I,C[1],I===b.window.document?this.handleWindowEvent:this.handleEvent,C[2])}},Ai.prototype._addDefaultHandlers=function(S){var T=this._map,C=T.getCanvasContainer();this._add("mapEvent",new ys(T,S));var I=T.boxZoom=new nl(T,S);this._add("boxZoom",I);var Z=new Zo,ee=new Nl;T.doubleClickZoom=new Rs(ee,Z),this._add("tapZoom",Z),this._add("clickZoom",ee);var ae=new Wu;this._add("tapDragZoom",ae);var Me=T.touchPitch=new Df;this._add("touchPitch",Me);var ot=new kc(S),bt=new _p(S);T.dragRotate=new Jc(S,ot,bt),this._add("mouseRotate",ot,["mousePitch"]),this._add("mousePitch",bt,["mouseRotate"]);var Vt=new Qc(S),Wt=new mc(S);T.dragPan=new fh(C,Vt,Wt),this._add("mousePan",Vt),this._add("touchPan",Wt,["touchZoom","touchRotate"]);var $t=new zd,vr=new Bs;T.touchZoomRotate=new Fu(C,vr,$t,ae),this._add("touchRotate",$t,["touchPan","touchZoom"]),this._add("touchZoom",vr,["touchPan","touchRotate"]);var hr=T.scrollZoom=new wa(T,this);this._add("scrollZoom",hr,["mousePan"]);var Ir=T.keyboard=new nc;this._add("keyboard",Ir),this._add("blockableMapEvent",new zi(T));for(var lr=0,Pr=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];lr<Pr.length;lr+=1){var jr=Pr[lr];S.interactive&&S[jr]&&T[jr].enable(S[jr])}},Ai.prototype._add=function(S,T,C){this._handlers.push({handlerName:S,handler:T,allowed:C}),this._handlersById[S]=T},Ai.prototype.stop=function(S){if(!this._updatingCamera){for(var T=0,C=this._handlers;T<C.length;T+=1)C[T].handler.reset();this._inertia.clear(),this._fireEvents({},{},S),this._changes=[]}},Ai.prototype.isActive=function(){for(var S=0,T=this._handlers;S<T.length;S+=1)if(T[S].handler.isActive())return!0;return!1},Ai.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Ai.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Ai.prototype.isMoving=function(){return!!ml(this._eventsInProgress)||this.isZooming()},Ai.prototype._blockedByActive=function(S,T,C){for(var I in S)if(I!==C&&(!T||T.indexOf(I)<0))return!0;return!1},Ai.prototype.handleWindowEvent=function(S){this.handleEvent(S,S.type+"Window")},Ai.prototype._getMapTouches=function(S){for(var T=[],C=0,I=S;C<I.length;C+=1){var Z=I[C];this._el.contains(Z.target)&&T.push(Z)}return T},Ai.prototype.handleEvent=function(S,T){this._updatingCamera=!0;for(var C=S.type==="renderFrame"?void 0:S,I={needsRenderFrame:!1},Z={},ee={},ae=S.touches?this._getMapTouches(S.touches):void 0,Me=ae?j.touchPos(this._el,ae):j.mousePos(this._el,S),ot=0,bt=this._handlers;ot<bt.length;ot+=1){var Vt=bt[ot],Wt=Vt.handlerName,$t=Vt.handler,vr=Vt.allowed;if($t.isEnabled()){var hr=void 0;this._blockedByActive(ee,vr,Wt)?$t.reset():$t[T||S.type]&&(hr=$t[T||S.type](S,Me,ae),this.mergeHandlerResult(I,Z,hr,Wt,C),hr&&hr.needsRenderFrame&&this._triggerRenderFrame()),(hr||$t.isActive())&&(ee[Wt]=$t)}}var Ir={};for(var lr in this._previousActiveHandlers)ee[lr]||(Ir[lr]=C);this._previousActiveHandlers=ee,(Object.keys(Ir).length||Ji(I))&&(this._changes.push([I,Z,Ir]),this._triggerRenderFrame()),(Object.keys(ee).length||Ji(I))&&this._map._stop(!0),this._updatingCamera=!1;var Pr=I.cameraAnimation;Pr&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pr(this._map))},Ai.prototype.mergeHandlerResult=function(S,T,C,I,Z){if(C){b.extend(S,C);var ee={handlerName:I,originalEvent:C.originalEvent||Z};C.zoomDelta!==void 0&&(T.zoom=ee),C.panDelta!==void 0&&(T.drag=ee),C.pitchDelta!==void 0&&(T.pitch=ee),C.bearingDelta!==void 0&&(T.rotate=ee)}},Ai.prototype._applyChanges=function(){for(var S={},T={},C={},I=0,Z=this._changes;I<Z.length;I+=1){var ee=Z[I],ae=ee[0],Me=ee[1],ot=ee[2];ae.panDelta&&(S.panDelta=(S.panDelta||new b.Point(0,0))._add(ae.panDelta)),ae.zoomDelta&&(S.zoomDelta=(S.zoomDelta||0)+ae.zoomDelta),ae.bearingDelta&&(S.bearingDelta=(S.bearingDelta||0)+ae.bearingDelta),ae.pitchDelta&&(S.pitchDelta=(S.pitchDelta||0)+ae.pitchDelta),ae.around!==void 0&&(S.around=ae.around),ae.pinchAround!==void 0&&(S.pinchAround=ae.pinchAround),ae.noInertia&&(S.noInertia=ae.noInertia),b.extend(T,Me),b.extend(C,ot)}this._updateMapTransform(S,T,C),this._changes=[]},Ai.prototype._updateMapTransform=function(S,T,C){var I=this._map,Z=I.transform;if(!Ji(S))return this._fireEvents(T,C,!0);var ee=S.panDelta,ae=S.zoomDelta,Me=S.bearingDelta,ot=S.pitchDelta,bt=S.around,Vt=S.pinchAround;Vt!==void 0&&(bt=Vt),I._stop(!0),bt=bt||I.transform.centerPoint;var Wt=Z.pointLocation(ee?bt.sub(ee):bt);Me&&(Z.bearing+=Me),ot&&(Z.pitch+=ot),ae&&(Z.zoom+=ae),Z.setLocationAtPoint(Wt,bt),this._map._update(),S.noInertia||this._inertia.record(S),this._fireEvents(T,C,!0)},Ai.prototype._fireEvents=function(S,T,C){var I=this,Z=ml(this._eventsInProgress),ee=ml(S),ae={};for(var Me in S)this._eventsInProgress[Me]||(ae[Me+"start"]=S[Me].originalEvent),this._eventsInProgress[Me]=S[Me];for(var ot in!Z&&ee&&this._fireEvent("movestart",ee.originalEvent),ae)this._fireEvent(ot,ae[ot]);for(var bt in ee&&this._fireEvent("move",ee.originalEvent),S)this._fireEvent(bt,S[bt].originalEvent);var Vt,Wt={};for(var $t in this._eventsInProgress){var vr=this._eventsInProgress[$t],hr=vr.handlerName,Ir=vr.originalEvent;this._handlersById[hr].isActive()||(delete this._eventsInProgress[$t],Wt[$t+"end"]=Vt=T[hr]||Ir)}for(var lr in Wt)this._fireEvent(lr,Wt[lr]);var Pr=ml(this._eventsInProgress);if(C&&(Z||ee)&&!Pr){this._updatingCamera=!0;var jr=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),tn=function(_n){return _n!==0&&-I._bearingSnap<_n&&_n<I._bearingSnap};jr?(tn(jr.bearing||this._map.getBearing())&&(jr.bearing=0),this._map.easeTo(jr,{originalEvent:Vt})):(this._map.fire(new b.Event("moveend",{originalEvent:Vt})),tn(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Ai.prototype._fireEvent=function(S,T){this._map.fire(new b.Event(S,T?{originalEvent:T}:{}))},Ai.prototype._requestFrame=function(){var S=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(T){delete S._frameId,S.handleEvent(new mf("renderFrame",{timeStamp:T})),S._applyChanges()})},Ai.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var al=function(S){function T(C,I){S.call(this),this._moving=!1,this._zooming=!1,this.transform=C,this._bearingSnap=I.bearingSnap,b.bindAll(["_renderFrameCallback"],this)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.getCenter=function(){return new b.LngLat(this.transform.center.lng,this.transform.center.lat)},T.prototype.setCenter=function(C,I){return this.jumpTo({center:C},I)},T.prototype.panBy=function(C,I,Z){return C=b.Point.convert(C).mult(-1),this.panTo(this.transform.center,b.extend({offset:C},I),Z)},T.prototype.panTo=function(C,I,Z){return this.easeTo(b.extend({center:C},I),Z)},T.prototype.getZoom=function(){return this.transform.zoom},T.prototype.setZoom=function(C,I){return this.jumpTo({zoom:C},I),this},T.prototype.zoomTo=function(C,I,Z){return this.easeTo(b.extend({zoom:C},I),Z)},T.prototype.zoomIn=function(C,I){return this.zoomTo(this.getZoom()+1,C,I),this},T.prototype.zoomOut=function(C,I){return this.zoomTo(this.getZoom()-1,C,I),this},T.prototype.getBearing=function(){return this.transform.bearing},T.prototype.setBearing=function(C,I){return this.jumpTo({bearing:C},I),this},T.prototype.getPadding=function(){return this.transform.padding},T.prototype.setPadding=function(C,I){return this.jumpTo({padding:C},I),this},T.prototype.rotateTo=function(C,I,Z){return this.easeTo(b.extend({bearing:C},I),Z)},T.prototype.resetNorth=function(C,I){return this.rotateTo(0,b.extend({duration:1e3},C),I),this},T.prototype.resetNorthPitch=function(C,I){return this.easeTo(b.extend({bearing:0,pitch:0,duration:1e3},C),I),this},T.prototype.snapToNorth=function(C,I){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(C,I):this},T.prototype.getPitch=function(){return this.transform.pitch},T.prototype.setPitch=function(C,I){return this.jumpTo({pitch:C},I),this},T.prototype.cameraForBounds=function(C,I){C=b.LngLatBounds.convert(C);var Z=I&&I.bearing||0;return this._cameraForBoxAndBearing(C.getNorthWest(),C.getSouthEast(),Z,I)},T.prototype._cameraForBoxAndBearing=function(C,I,Z,ee){var ae={top:0,bottom:0,right:0,left:0};if(typeof(ee=b.extend({padding:ae,offset:[0,0],maxZoom:this.transform.maxZoom},ee)).padding=="number"){var Me=ee.padding;ee.padding={top:Me,bottom:Me,right:Me,left:Me}}ee.padding=b.extend(ae,ee.padding);var ot=this.transform,bt=ot.padding,Vt=ot.project(b.LngLat.convert(C)),Wt=ot.project(b.LngLat.convert(I)),$t=Vt.rotate(-Z*Math.PI/180),vr=Wt.rotate(-Z*Math.PI/180),hr=new b.Point(Math.max($t.x,vr.x),Math.max($t.y,vr.y)),Ir=new b.Point(Math.min($t.x,vr.x),Math.min($t.y,vr.y)),lr=hr.sub(Ir),Pr=(ot.width-(bt.left+bt.right+ee.padding.left+ee.padding.right))/lr.x,jr=(ot.height-(bt.top+bt.bottom+ee.padding.top+ee.padding.bottom))/lr.y;if(!(jr<0||Pr<0)){var tn=Math.min(ot.scaleZoom(ot.scale*Math.min(Pr,jr)),ee.maxZoom),_n=typeof ee.offset.x=="number"?new b.Point(ee.offset.x,ee.offset.y):b.Point.convert(ee.offset),dn=new b.Point((ee.padding.left-ee.padding.right)/2,(ee.padding.top-ee.padding.bottom)/2).rotate(Z*Math.PI/180),Tn=_n.add(dn).mult(ot.scale/ot.zoomScale(tn));return{center:ot.unproject(Vt.add(Wt).div(2).sub(Tn)),zoom:tn,bearing:Z}}b.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},T.prototype.fitBounds=function(C,I,Z){return this._fitInternal(this.cameraForBounds(C,I),I,Z)},T.prototype.fitScreenCoordinates=function(C,I,Z,ee,ae){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(b.Point.convert(C)),this.transform.pointLocation(b.Point.convert(I)),Z,ee),ee,ae)},T.prototype._fitInternal=function(C,I,Z){return C?(delete(I=b.extend(C,I)).padding,I.linear?this.easeTo(I,Z):this.flyTo(I,Z)):this},T.prototype.jumpTo=function(C,I){this.stop();var Z=this.transform,ee=!1,ae=!1,Me=!1;return"zoom"in C&&Z.zoom!==+C.zoom&&(ee=!0,Z.zoom=+C.zoom),C.center!==void 0&&(Z.center=b.LngLat.convert(C.center)),"bearing"in C&&Z.bearing!==+C.bearing&&(ae=!0,Z.bearing=+C.bearing),"pitch"in C&&Z.pitch!==+C.pitch&&(Me=!0,Z.pitch=+C.pitch),C.padding==null||Z.isPaddingEqual(C.padding)||(Z.padding=C.padding),this.fire(new b.Event("movestart",I)).fire(new b.Event("move",I)),ee&&this.fire(new b.Event("zoomstart",I)).fire(new b.Event("zoom",I)).fire(new b.Event("zoomend",I)),ae&&this.fire(new b.Event("rotatestart",I)).fire(new b.Event("rotate",I)).fire(new b.Event("rotateend",I)),Me&&this.fire(new b.Event("pitchstart",I)).fire(new b.Event("pitch",I)).fire(new b.Event("pitchend",I)),this.fire(new b.Event("moveend",I))},T.prototype.easeTo=function(C,I){var Z=this;this._stop(!1,C.easeId),((C=b.extend({offset:[0,0],duration:500,easing:b.ease},C)).animate===!1||!C.essential&&b.browser.prefersReducedMotion)&&(C.duration=0);var ee=this.transform,ae=this.getZoom(),Me=this.getBearing(),ot=this.getPitch(),bt=this.getPadding(),Vt="zoom"in C?+C.zoom:ae,Wt="bearing"in C?this._normalizeBearing(C.bearing,Me):Me,$t="pitch"in C?+C.pitch:ot,vr="padding"in C?C.padding:ee.padding,hr=b.Point.convert(C.offset),Ir=ee.centerPoint.add(hr),lr=ee.pointLocation(Ir),Pr=b.LngLat.convert(C.center||lr);this._normalizeCenter(Pr);var jr,tn,_n=ee.project(lr),dn=ee.project(Pr).sub(_n),Tn=ee.zoomScale(Vt-ae);C.around&&(jr=b.LngLat.convert(C.around),tn=ee.locationPoint(jr));var Un={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Vt!==ae,this._rotating=this._rotating||Me!==Wt,this._pitching=this._pitching||$t!==ot,this._padding=!ee.isPaddingEqual(vr),this._easeId=C.easeId,this._prepareEase(I,C.noMoveStart,Un),this._ease(function(si){if(Z._zooming&&(ee.zoom=b.number(ae,Vt,si)),Z._rotating&&(ee.bearing=b.number(Me,Wt,si)),Z._pitching&&(ee.pitch=b.number(ot,$t,si)),Z._padding&&(ee.interpolatePadding(bt,vr,si),Ir=ee.centerPoint.add(hr)),jr)ee.setLocationAtPoint(jr,tn);else{var li=ee.zoomScale(ee.zoom-ae),Ii=Vt>ae?Math.min(2,Tn):Math.max(.5,Tn),ea=Math.pow(Ii,1-si),la=ee.unproject(_n.add(dn.mult(si*ea)).mult(li));ee.setLocationAtPoint(ee.renderWorldCopies?la.wrap():la,Ir)}Z._fireMoveEvents(I)},function(si){Z._afterEase(I,si)},C),this},T.prototype._prepareEase=function(C,I,Z){Z===void 0&&(Z={}),this._moving=!0,I||Z.moving||this.fire(new b.Event("movestart",C)),this._zooming&&!Z.zooming&&this.fire(new b.Event("zoomstart",C)),this._rotating&&!Z.rotating&&this.fire(new b.Event("rotatestart",C)),this._pitching&&!Z.pitching&&this.fire(new b.Event("pitchstart",C))},T.prototype._fireMoveEvents=function(C){this.fire(new b.Event("move",C)),this._zooming&&this.fire(new b.Event("zoom",C)),this._rotating&&this.fire(new b.Event("rotate",C)),this._pitching&&this.fire(new b.Event("pitch",C))},T.prototype._afterEase=function(C,I){if(!this._easeId||!I||this._easeId!==I){delete this._easeId;var Z=this._zooming,ee=this._rotating,ae=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Z&&this.fire(new b.Event("zoomend",C)),ee&&this.fire(new b.Event("rotateend",C)),ae&&this.fire(new b.Event("pitchend",C)),this.fire(new b.Event("moveend",C))}},T.prototype.flyTo=function(C,I){var Z=this;if(!C.essential&&b.browser.prefersReducedMotion){var ee=b.pick(C,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ee,I)}this.stop(),C=b.extend({offset:[0,0],speed:1.2,curve:1.42,easing:b.ease},C);var ae=this.transform,Me=this.getZoom(),ot=this.getBearing(),bt=this.getPitch(),Vt=this.getPadding(),Wt="zoom"in C?b.clamp(+C.zoom,ae.minZoom,ae.maxZoom):Me,$t="bearing"in C?this._normalizeBearing(C.bearing,ot):ot,vr="pitch"in C?+C.pitch:bt,hr="padding"in C?C.padding:ae.padding,Ir=ae.zoomScale(Wt-Me),lr=b.Point.convert(C.offset),Pr=ae.centerPoint.add(lr),jr=ae.pointLocation(Pr),tn=b.LngLat.convert(C.center||jr);this._normalizeCenter(tn);var _n=ae.project(jr),dn=ae.project(tn).sub(_n),Tn=C.curve,Un=Math.max(ae.width,ae.height),si=Un/Ir,li=dn.mag();if("minZoom"in C){var Ii=b.clamp(Math.min(C.minZoom,Me,Wt),ae.minZoom,ae.maxZoom),ea=Un/ae.zoomScale(Ii-Me);Tn=Math.sqrt(ea/li*2)}var la=Tn*Tn;function ra(ca){var da=(si*si-Un*Un+(ca?-1:1)*la*la*li*li)/(2*(ca?si:Un)*la*li);return Math.log(Math.sqrt(da*da+1)-da)}function lo(ca){return(Math.exp(ca)-Math.exp(-ca))/2}function Fi(ca){return(Math.exp(ca)+Math.exp(-ca))/2}var Ia=ra(0),Xa=function(ca){return Fi(Ia)/Fi(Ia+Tn*ca)},pa=function(ca){return Un*((Fi(Ia)*(lo(da=Ia+Tn*ca)/Fi(da))-lo(Ia))/la)/li;var da},Sa=(ra(1)-Ia)/Tn;if(Math.abs(li)<1e-6||!isFinite(Sa)){if(Math.abs(Un-si)<1e-6)return this.easeTo(C,I);var Pa=si<Un?-1:1;Sa=Math.abs(Math.log(si/Un))/Tn,pa=function(){return 0},Xa=function(ca){return Math.exp(Pa*Tn*ca)}}return C.duration="duration"in C?+C.duration:1e3*Sa/("screenSpeed"in C?+C.screenSpeed/Tn:+C.speed),C.maxDuration&&C.duration>C.maxDuration&&(C.duration=0),this._zooming=!0,this._rotating=ot!==$t,this._pitching=vr!==bt,this._padding=!ae.isPaddingEqual(hr),this._prepareEase(I,!1),this._ease(function(ca){var da=ca*Sa,Eu=1/Xa(da);ae.zoom=ca===1?Wt:Me+ae.scaleZoom(Eu),Z._rotating&&(ae.bearing=b.number(ot,$t,ca)),Z._pitching&&(ae.pitch=b.number(bt,vr,ca)),Z._padding&&(ae.interpolatePadding(Vt,hr,ca),Pr=ae.centerPoint.add(lr));var Ns=ca===1?tn:ae.unproject(_n.add(dn.mult(pa(da))).mult(Eu));ae.setLocationAtPoint(ae.renderWorldCopies?Ns.wrap():Ns,Pr),Z._fireMoveEvents(I)},function(){return Z._afterEase(I)},C),this},T.prototype.isEasing=function(){return!!this._easeFrameId},T.prototype.stop=function(){return this._stop()},T.prototype._stop=function(C,I){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Z=this._onEaseEnd;delete this._onEaseEnd,Z.call(this,I)}if(!C){var ee=this.handlers;ee&&ee.stop(!1)}return this},T.prototype._ease=function(C,I,Z){Z.animate===!1||Z.duration===0?(C(1),I()):(this._easeStart=b.browser.now(),this._easeOptions=Z,this._onEaseFrame=C,this._onEaseEnd=I,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},T.prototype._renderFrameCallback=function(){var C=Math.min((b.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(C)),C<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},T.prototype._normalizeBearing=function(C,I){C=b.wrap(C,-180,180);var Z=Math.abs(C-I);return Math.abs(C-360-I)<Z&&(C-=360),Math.abs(C+360-I)<Z&&(C+=360),C},T.prototype._normalizeCenter=function(C){var I=this.transform;if(I.renderWorldCopies&&!I.lngRange){var Z=C.lng-I.center.lng;C.lng+=Z>180?-360:Z<-180?360:0}},T}(b.Evented),yl=function(S){S===void 0&&(S={}),this.options=S,b.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};yl.prototype.getDefaultPosition=function(){return"bottom-right"},yl.prototype.onAdd=function(S){var T=this.options&&this.options.compact;return this._map=S,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=j.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),T&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),T===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},yl.prototype.onRemove=function(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},yl.prototype._setElementTitle=function(S,T){var C=this._map._getUIString("AttributionControl."+T);S.title=C,S.setAttribute("aria-label",C)},yl.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},yl.prototype._updateEditLink=function(){var S=this._editLink;S||(S=this._editLink=this._container.querySelector(".mapbox-improve-map"));var T=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||b.config.ACCESS_TOKEN}];if(S){var C=T.reduce(function(I,Z,ee){return Z.value&&(I+=Z.key+"="+Z.value+(ee<T.length-1?"&":"")),I},"?");S.href=b.config.FEEDBACK_URL+"/"+C+(this._map._hash?this._map._hash.getHashString(!0):""),S.rel="noopener nofollow",this._setElementTitle(S,"MapFeedback")}},yl.prototype._updateData=function(S){!S||S.sourceDataType!=="metadata"&&S.sourceDataType!=="visibility"&&S.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},yl.prototype._updateAttributions=function(){if(this._map.style){var S=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?S=S.concat(this.options.customAttribution.map(function(Me){return typeof Me!="string"?"":Me})):typeof this.options.customAttribution=="string"&&S.push(this.options.customAttribution)),this._map.style.stylesheet){var T=this._map.style.stylesheet;this.styleOwner=T.owner,this.styleId=T.id}var C=this._map.style.sourceCaches;for(var I in C){var Z=C[I];if(Z.used){var ee=Z.getSource();ee.attribution&&S.indexOf(ee.attribution)<0&&S.push(ee.attribution)}}S.sort(function(Me,ot){return Me.length-ot.length});var ae=(S=S.filter(function(Me,ot){for(var bt=ot+1;bt<S.length;bt++)if(S[bt].indexOf(Me)>=0)return!1;return!0})).join(" | ");ae!==this._attribHTML&&(this._attribHTML=ae,S.length?(this._innerContainer.innerHTML=ae,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},yl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ol=function(){b.bindAll(["_updateLogo"],this),b.bindAll(["_updateCompact"],this)};ol.prototype.onAdd=function(S){this._map=S,this._container=j.create("div","mapboxgl-ctrl");var T=j.create("a","mapboxgl-ctrl-logo");return T.target="_blank",T.rel="noopener nofollow",T.href="https://www.mapbox.com/",T.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),T.setAttribute("rel","noopener nofollow"),this._container.appendChild(T),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ol.prototype.onRemove=function(){j.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ol.prototype.getDefaultPosition=function(){return"bottom-left"},ol.prototype._updateLogo=function(S){S&&S.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ol.prototype._logoRequired=function(){if(this._map.style){var S=this._map.style.sourceCaches;for(var T in S)if(S[T].getSource().mapbox_logo)return!0;return!1}},ol.prototype._updateCompact=function(){var S=this._container.children;if(S.length){var T=S[0];this._map.getCanvasContainer().offsetWidth<250?T.classList.add("mapboxgl-compact"):T.classList.remove("mapboxgl-compact")}};var _s=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};_s.prototype.add=function(S){var T=++this._id;return this._queue.push({callback:S,id:T,cancelled:!1}),T},_s.prototype.remove=function(S){for(var T=this._currentlyRunning,C=0,I=T?this._queue.concat(T):this._queue;C<I.length;C+=1){var Z=I[C];if(Z.id===S)return void(Z.cancelled=!0)}},_s.prototype.run=function(S){S===void 0&&(S=0);var T=this._currentlyRunning=this._queue;this._queue=[];for(var C=0,I=T;C<I.length;C+=1){var Z=I[C];if(!Z.cancelled&&(Z.callback(S),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},_s.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var yc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},yf=b.window.HTMLImageElement,Nh=b.window.HTMLElement,zo=b.window.ImageBitmap,au={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Jp=function(S){function T(I){var Z=this;if((I=b.extend({},au,I)).minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(I.maxPitch!=null&&I.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ee=new uo(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies);if(S.call(this,ee,I),this._interactive=I.interactive,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new _s,this._controls=[],this._mapId=b.uniqueId(),this._locale=b.extend({},yc,I.locale),this._clickTolerance=I.clickTolerance,this._requestManager=new b.RequestManager(I.transformRequest,I.accessToken),typeof I.container=="string"){if(this._container=b.window.document.getElementById(I.container),!this._container)throw new Error("Container '"+I.container+"' not found.")}else{if(!(I.container instanceof Nh))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=I.container}if(I.maxBounds&&this.setMaxBounds(I.maxBounds),b.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return Z._update(!1)}),this.on("moveend",function(){return Z._update(!1)}),this.on("zoom",function(){return Z._update(!0)}),b.window!==void 0&&(b.window.addEventListener("online",this._onWindowOnline,!1),b.window.addEventListener("resize",this._onWindowResize,!1),b.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Ai(this,I),this._hash=I.hash&&new no(typeof I.hash=="string"&&I.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,b.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new yl({customAttribution:I.customAttribution})),this.addControl(new ol,I.logoPosition),this.on("style.load",function(){Z.transform.unmodified&&Z.jumpTo(Z.style.stylesheet)}),this.on("data",function(ae){Z._update(ae.dataType==="style"),Z.fire(new b.Event(ae.dataType+"data",ae))}),this.on("dataloading",function(ae){Z.fire(new b.Event(ae.dataType+"dataloading",ae))})}S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T;var C={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return T.prototype._getMapId=function(){return this._mapId},T.prototype.addControl=function(I,Z){if(Z===void 0&&(Z=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new b.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ee=I.onAdd(this);this._controls.push(I);var ae=this._controlPositions[Z];return Z.indexOf("bottom")!==-1?ae.insertBefore(ee,ae.firstChild):ae.appendChild(ee),this},T.prototype.removeControl=function(I){if(!I||!I.onRemove)return this.fire(new b.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Z=this._controls.indexOf(I);return Z>-1&&this._controls.splice(Z,1),I.onRemove(this),this},T.prototype.hasControl=function(I){return this._controls.indexOf(I)>-1},T.prototype.resize=function(I){var Z=this._containerDimensions(),ee=Z[0],ae=Z[1];if(ee===this.transform.width&&ae===this.transform.height)return this;this._resizeCanvas(ee,ae),this.transform.resize(ee,ae),this.painter.resize(ee,ae);var Me=!this._moving;return Me&&this.fire(new b.Event("movestart",I)).fire(new b.Event("move",I)),this.fire(new b.Event("resize",I)),Me&&this.fire(new b.Event("moveend",I)),this},T.prototype.getBounds=function(){return this.transform.getBounds()},T.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},T.prototype.setMaxBounds=function(I){return this.transform.setMaxBounds(b.LngLatBounds.convert(I)),this._update()},T.prototype.setMinZoom=function(I){if((I=I==null?-2:I)>=-2&&I<=this.transform.maxZoom)return this.transform.minZoom=I,this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},T.prototype.getMinZoom=function(){return this.transform.minZoom},T.prototype.setMaxZoom=function(I){if((I=I==null?22:I)>=this.transform.minZoom)return this.transform.maxZoom=I,this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")},T.prototype.getMaxZoom=function(){return this.transform.maxZoom},T.prototype.setMinPitch=function(I){if((I=I==null?0:I)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.minPitch=I,this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},T.prototype.getMinPitch=function(){return this.transform.minPitch},T.prototype.setMaxPitch=function(I){if((I=I==null?60:I)>60)throw new Error("maxPitch must be less than or equal to 60");if(I>=this.transform.minPitch)return this.transform.maxPitch=I,this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")},T.prototype.getMaxPitch=function(){return this.transform.maxPitch},T.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},T.prototype.setRenderWorldCopies=function(I){return this.transform.renderWorldCopies=I,this._update()},T.prototype.project=function(I){return this.transform.locationPoint(b.LngLat.convert(I))},T.prototype.unproject=function(I){return this.transform.pointLocation(b.Point.convert(I))},T.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},T.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},T.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},T.prototype._createDelegatedListener=function(I,Z,ee){var ae,Me=this;if(I==="mouseenter"||I==="mouseover"){var ot=!1;return{layer:Z,listener:ee,delegates:{mousemove:function(Vt){var Wt=Me.getLayer(Z)?Me.queryRenderedFeatures(Vt.point,{layers:[Z]}):[];Wt.length?ot||(ot=!0,ee.call(Me,new us(I,Me,Vt.originalEvent,{features:Wt}))):ot=!1},mouseout:function(){ot=!1}}}}if(I==="mouseleave"||I==="mouseout"){var bt=!1;return{layer:Z,listener:ee,delegates:{mousemove:function(Vt){(Me.getLayer(Z)?Me.queryRenderedFeatures(Vt.point,{layers:[Z]}):[]).length?bt=!0:bt&&(bt=!1,ee.call(Me,new us(I,Me,Vt.originalEvent)))},mouseout:function(Vt){bt&&(bt=!1,ee.call(Me,new us(I,Me,Vt.originalEvent)))}}}}return{layer:Z,listener:ee,delegates:(ae={},ae[I]=function(Vt){var Wt=Me.getLayer(Z)?Me.queryRenderedFeatures(Vt.point,{layers:[Z]}):[];Wt.length&&(Vt.features=Wt,ee.call(Me,Vt),delete Vt.features)},ae)}},T.prototype.on=function(I,Z,ee){if(ee===void 0)return S.prototype.on.call(this,I,Z);var ae=this._createDelegatedListener(I,Z,ee);for(var Me in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(ae),ae.delegates)this.on(Me,ae.delegates[Me]);return this},T.prototype.once=function(I,Z,ee){if(ee===void 0)return S.prototype.once.call(this,I,Z);var ae=this._createDelegatedListener(I,Z,ee);for(var Me in ae.delegates)this.once(Me,ae.delegates[Me]);return this},T.prototype.off=function(I,Z,ee){var ae=this;return ee===void 0?S.prototype.off.call(this,I,Z):(this._delegatedListeners&&this._delegatedListeners[I]&&function(Me){for(var ot=Me[I],bt=0;bt<ot.length;bt++){var Vt=ot[bt];if(Vt.layer===Z&&Vt.listener===ee){for(var Wt in Vt.delegates)ae.off(Wt,Vt.delegates[Wt]);return ot.splice(bt,1),ae}}}(this._delegatedListeners),this)},T.prototype.queryRenderedFeatures=function(I,Z){if(!this.style)return[];var ee;if(Z!==void 0||I===void 0||I instanceof b.Point||Array.isArray(I)||(Z=I,I=void 0),Z=Z||{},(I=I||[[0,0],[this.transform.width,this.transform.height]])instanceof b.Point||typeof I[0]=="number")ee=[b.Point.convert(I)];else{var ae=b.Point.convert(I[0]),Me=b.Point.convert(I[1]);ee=[ae,new b.Point(Me.x,ae.y),Me,new b.Point(ae.x,Me.y),ae]}return this.style.queryRenderedFeatures(ee,Z,this.transform)},T.prototype.querySourceFeatures=function(I,Z){return this.style.querySourceFeatures(I,Z)},T.prototype.setStyle=function(I,Z){return(Z=b.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Z)).diff!==!1&&Z.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,Z),this):(this._localIdeographFontFamily=Z.localIdeographFontFamily,this._updateStyle(I,Z))},T.prototype._getUIString=function(I){var Z=this._locale[I];if(Z==null)throw new Error("Missing UI string '"+I+"'");return Z},T.prototype._updateStyle=function(I,Z){return this.style&&(this.style.setEventedParent(null),this.style._remove()),I?(this.style=new As(this,Z||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I):this.style.loadJSON(I),this):(delete this.style,this)},T.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new As(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},T.prototype._diffStyle=function(I,Z){var ee=this;if(typeof I=="string"){var ae=this._requestManager.normalizeStyleURL(I),Me=this._requestManager.transformRequest(ae,b.ResourceType.Style);b.getJSON(Me,function(ot,bt){ot?ee.fire(new b.ErrorEvent(ot)):bt&&ee._updateDiff(bt,Z)})}else typeof I=="object"&&this._updateDiff(I,Z)},T.prototype._updateDiff=function(I,Z){try{this.style.setState(I)&&this._update(!0)}catch(ee){b.warnOnce("Unable to perform style diff: "+(ee.message||ee.error||ee)+".  Rebuilding the style from scratch."),this._updateStyle(I,Z)}},T.prototype.getStyle=function(){if(this.style)return this.style.serialize()},T.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():b.warnOnce("There is no style added to the map.")},T.prototype.addSource=function(I,Z){return this._lazyInitEmptyStyle(),this.style.addSource(I,Z),this._update(!0)},T.prototype.isSourceLoaded=function(I){var Z=this.style&&this.style.sourceCaches[I];if(Z!==void 0)return Z.loaded();this.fire(new b.ErrorEvent(new Error("There is no source with ID '"+I+"'")))},T.prototype.areTilesLoaded=function(){var I=this.style&&this.style.sourceCaches;for(var Z in I){var ee=I[Z]._tiles;for(var ae in ee){var Me=ee[ae];if(Me.state!=="loaded"&&Me.state!=="errored")return!1}}return!0},T.prototype.addSourceType=function(I,Z,ee){return this._lazyInitEmptyStyle(),this.style.addSourceType(I,Z,ee)},T.prototype.removeSource=function(I){return this.style.removeSource(I),this._update(!0)},T.prototype.getSource=function(I){return this.style.getSource(I)},T.prototype.addImage=function(I,Z,ee){ee===void 0&&(ee={});var ae=ee.pixelRatio;ae===void 0&&(ae=1);var Me=ee.sdf;Me===void 0&&(Me=!1);var ot=ee.stretchX,bt=ee.stretchY,Vt=ee.content;if(this._lazyInitEmptyStyle(),Z instanceof yf||zo&&Z instanceof zo){var Wt=b.browser.getImageData(Z);this.style.addImage(I,{data:new b.RGBAImage({width:Wt.width,height:Wt.height},Wt.data),pixelRatio:ae,stretchX:ot,stretchY:bt,content:Vt,sdf:Me,version:0})}else{if(Z.width===void 0||Z.height===void 0)return this.fire(new b.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var $t=Z;this.style.addImage(I,{data:new b.RGBAImage({width:Z.width,height:Z.height},new Uint8Array(Z.data)),pixelRatio:ae,stretchX:ot,stretchY:bt,content:Vt,sdf:Me,version:0,userImage:$t}),$t.onAdd&&$t.onAdd(this,I)}},T.prototype.updateImage=function(I,Z){var ee=this.style.getImage(I);if(!ee)return this.fire(new b.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ae=Z instanceof yf||zo&&Z instanceof zo?b.browser.getImageData(Z):Z,Me=ae.width,ot=ae.height,bt=ae.data;return Me===void 0||ot===void 0?this.fire(new b.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Me!==ee.data.width||ot!==ee.data.height?this.fire(new b.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(ee.data.replace(bt,!(Z instanceof yf||zo&&Z instanceof zo)),void this.style.updateImage(I,ee))},T.prototype.hasImage=function(I){return I?!!this.style.getImage(I):(this.fire(new b.ErrorEvent(new Error("Missing required image id"))),!1)},T.prototype.removeImage=function(I){this.style.removeImage(I)},T.prototype.loadImage=function(I,Z){b.getImage(this._requestManager.transformRequest(I,b.ResourceType.Image),Z)},T.prototype.listImages=function(){return this.style.listImages()},T.prototype.addLayer=function(I,Z){return this._lazyInitEmptyStyle(),this.style.addLayer(I,Z),this._update(!0)},T.prototype.moveLayer=function(I,Z){return this.style.moveLayer(I,Z),this._update(!0)},T.prototype.removeLayer=function(I){return this.style.removeLayer(I),this._update(!0)},T.prototype.getLayer=function(I){return this.style.getLayer(I)},T.prototype.setLayerZoomRange=function(I,Z,ee){return this.style.setLayerZoomRange(I,Z,ee),this._update(!0)},T.prototype.setFilter=function(I,Z,ee){return ee===void 0&&(ee={}),this.style.setFilter(I,Z,ee),this._update(!0)},T.prototype.getFilter=function(I){return this.style.getFilter(I)},T.prototype.setPaintProperty=function(I,Z,ee,ae){return ae===void 0&&(ae={}),this.style.setPaintProperty(I,Z,ee,ae),this._update(!0)},T.prototype.getPaintProperty=function(I,Z){return this.style.getPaintProperty(I,Z)},T.prototype.setLayoutProperty=function(I,Z,ee,ae){return ae===void 0&&(ae={}),this.style.setLayoutProperty(I,Z,ee,ae),this._update(!0)},T.prototype.getLayoutProperty=function(I,Z){return this.style.getLayoutProperty(I,Z)},T.prototype.setLight=function(I,Z){return Z===void 0&&(Z={}),this._lazyInitEmptyStyle(),this.style.setLight(I,Z),this._update(!0)},T.prototype.getLight=function(){return this.style.getLight()},T.prototype.setFeatureState=function(I,Z){return this.style.setFeatureState(I,Z),this._update()},T.prototype.removeFeatureState=function(I,Z){return this.style.removeFeatureState(I,Z),this._update()},T.prototype.getFeatureState=function(I){return this.style.getFeatureState(I)},T.prototype.getContainer=function(){return this._container},T.prototype.getCanvasContainer=function(){return this._canvasContainer},T.prototype.getCanvas=function(){return this._canvas},T.prototype._containerDimensions=function(){var I=0,Z=0;return this._container&&(I=this._container.clientWidth||400,Z=this._container.clientHeight||300),[I,Z]},T.prototype._detectMissingCSS=function(){b.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&b.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},T.prototype._setupContainer=function(){var I=this._container;I.classList.add("mapboxgl-map"),(this._missingCSSCanary=j.create("div","mapboxgl-canary",I)).style.visibility="hidden",this._detectMissingCSS();var Z=this._canvasContainer=j.create("div","mapboxgl-canvas-container",I);this._interactive&&Z.classList.add("mapboxgl-interactive"),this._canvas=j.create("canvas","mapboxgl-canvas",Z),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var ee=this._containerDimensions();this._resizeCanvas(ee[0],ee[1]);var ae=this._controlContainer=j.create("div","mapboxgl-control-container",I),Me=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ot){Me[ot]=j.create("div","mapboxgl-ctrl-"+ot,ae)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},T.prototype._resizeCanvas=function(I,Z){var ee=b.browser.devicePixelRatio||1;this._canvas.width=ee*I,this._canvas.height=ee*Z,this._canvas.style.width=I+"px",this._canvas.style.height=Z+"px"},T.prototype._setupPainter=function(){var I=b.extend({},G.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Z=this._canvas.getContext("webgl",I)||this._canvas.getContext("experimental-webgl",I);Z?(this.painter=new cs(Z,this.transform),b.webpSupported.testSupport(Z)):this.fire(new b.ErrorEvent(new Error("Failed to initialize WebGL")))},T.prototype._contextLost=function(I){I.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new b.Event("webglcontextlost",{originalEvent:I}))},T.prototype._contextRestored=function(I){this._setupPainter(),this.resize(),this._update(),this.fire(new b.Event("webglcontextrestored",{originalEvent:I}))},T.prototype._onMapScroll=function(I){if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},T.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},T.prototype._update=function(I){return this.style?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this},T.prototype._requestRenderFrame=function(I){return this._update(),this._renderTaskQueue.add(I)},T.prototype._cancelRenderFrame=function(I){this._renderTaskQueue.remove(I)},T.prototype._render=function(I){var Z,ee=this,ae=0,Me=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Z=Me.createQueryEXT(),Me.beginQueryEXT(Me.TIME_ELAPSED_EXT,Z),ae=b.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),!this._removed){var ot=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var bt=this.transform.zoom,Vt=b.browser.now();this.style.zoomHistory.update(bt,Vt);var Wt=new b.EvaluationParameters(bt,{now:Vt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),$t=Wt.crossFadingFactor();$t===1&&$t===this._crossFadingFactor||(ot=!0,this._crossFadingFactor=$t),this.style.update(Wt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new b.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new b.Event("load"))),this.style&&(this.style.hasTransitions()||ot)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var vr=b.browser.now()-ae;Me.endQueryEXT(Me.TIME_ELAPSED_EXT,Z),setTimeout(function(){var lr=Me.getQueryObjectEXT(Z,Me.QUERY_RESULT_EXT)/1e6;Me.deleteQueryEXT(Z),ee.fire(new b.Event("gpu-timing-frame",{cpuTime:vr,gpuTime:lr}))},50)}if(this.listens("gpu-timing-layer")){var hr=this.painter.collectGpuTimers();setTimeout(function(){var lr=ee.painter.queryGpuTimers(hr);ee.fire(new b.Event("gpu-timing-layer",{layerTimes:lr}))},50)}var Ir=this._sourcesDirty||this._styleDirty||this._placementDirty;return Ir||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new b.Event("idle")),!this._loaded||this._fullyLoaded||Ir||(this._fullyLoaded=!0),this}},T.prototype.remove=function(){this._hash&&this._hash.remove();for(var I=0,Z=this._controls;I<Z.length;I+=1)Z[I].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),b.window!==void 0&&(b.window.removeEventListener("resize",this._onWindowResize,!1),b.window.removeEventListener("orientationchange",this._onWindowResize,!1),b.window.removeEventListener("online",this._onWindowOnline,!1));var ee=this.painter.context.gl.getExtension("WEBGL_lose_context");ee&&ee.loseContext(),zh(this._canvasContainer),zh(this._controlContainer),zh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new b.Event("remove"))},T.prototype.triggerRepaint=function(){var I=this;this.style&&!this._frame&&(this._frame=b.browser.frame(function(Z){I._frame=null,I._render(Z)}))},T.prototype._onWindowOnline=function(){this._update()},T.prototype._onWindowResize=function(I){this._trackResize&&this.resize({originalEvent:I})._update()},C.showTileBoundaries.get=function(){return!!this._showTileBoundaries},C.showTileBoundaries.set=function(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())},C.showPadding.get=function(){return!!this._showPadding},C.showPadding.set=function(I){this._showPadding!==I&&(this._showPadding=I,this._update())},C.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},C.showCollisionBoxes.set=function(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())},C.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},C.showOverdrawInspector.set=function(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())},C.repaint.get=function(){return!!this._repaint},C.repaint.set=function(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())},C.vertices.get=function(){return!!this._vertices},C.vertices.set=function(I){this._vertices=I,this._update()},T.prototype._setCacheLimits=function(I,Z){b.setCacheLimits(I,Z)},C.version.get=function(){return b.version},Object.defineProperties(T.prototype,C),T}(al);function zh(S){S.parentNode&&S.parentNode.removeChild(S)}var Ff={showCompass:!0,showZoom:!0,visualizePitch:!1},_c=function(S){var T=this;this.options=b.extend({},Ff,S),this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(C){return C.preventDefault()}),this.options.showZoom&&(b.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(C){return T._map.zoomIn({},{originalEvent:C})}),j.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(C){return T._map.zoomOut({},{originalEvent:C})}),j.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(b.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(C){T.options.visualizePitch?T._map.resetNorthPitch({},{originalEvent:C}):T._map.resetNorth({},{originalEvent:C})}),this._compassIcon=j.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};_c.prototype._updateZoomButtons=function(){var S=this._map.getZoom(),T=S===this._map.getMaxZoom(),C=S===this._map.getMinZoom();this._zoomInButton.disabled=T,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",T.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},_c.prototype._rotateCompassArrow=function(){var S=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=S},_c.prototype.onAdd=function(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ca(this._map,this._compass,this.options.visualizePitch)),this._container},_c.prototype.onRemove=function(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},_c.prototype._createButton=function(S,T){var C=j.create("button",S,this._container);return C.type="button",C.addEventListener("click",T),C},_c.prototype._setButtonTitle=function(S,T){var C=this._map._getUIString("NavigationControl."+T);S.title=C,S.setAttribute("aria-label",C)};var Ca=function(S,T,C){C===void 0&&(C=!1),this._clickTolerance=10,this.element=T,this.mouseRotate=new kc({clickTolerance:S.dragRotate._mouseRotate._clickTolerance}),this.map=S,C&&(this.mousePitch=new _p({clickTolerance:S.dragRotate._mousePitch._clickTolerance})),b.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),j.addEventListener(T,"mousedown",this.mousedown),j.addEventListener(T,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(T,"touchmove",this.touchmove),j.addEventListener(T,"touchend",this.touchend),j.addEventListener(T,"touchcancel",this.reset)};function Uh(S,T,C){if(S=new b.LngLat(S.lng,S.lat),T){var I=new b.LngLat(S.lng-360,S.lat),Z=new b.LngLat(S.lng+360,S.lat),ee=C.locationPoint(S).distSqr(T);C.locationPoint(I).distSqr(T)<ee?S=I:C.locationPoint(Z).distSqr(T)<ee&&(S=Z)}for(;Math.abs(S.lng-C.center.lng)>180;){var ae=C.locationPoint(S);if(ae.x>=0&&ae.y>=0&&ae.x<=C.width&&ae.y<=C.height)break;S.lng>C.center.lng?S.lng-=360:S.lng+=360}return S}Ca.prototype.down=function(S,T){this.mouseRotate.mousedown(S,T),this.mousePitch&&this.mousePitch.mousedown(S,T),j.disableDrag()},Ca.prototype.move=function(S,T){var C=this.map,I=this.mouseRotate.mousemoveWindow(S,T);if(I&&I.bearingDelta&&C.setBearing(C.getBearing()+I.bearingDelta),this.mousePitch){var Z=this.mousePitch.mousemoveWindow(S,T);Z&&Z.pitchDelta&&C.setPitch(C.getPitch()+Z.pitchDelta)}},Ca.prototype.off=function(){var S=this.element;j.removeEventListener(S,"mousedown",this.mousedown),j.removeEventListener(S,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(S,"touchmove",this.touchmove),j.removeEventListener(S,"touchend",this.touchend),j.removeEventListener(S,"touchcancel",this.reset),this.offTemp()},Ca.prototype.offTemp=function(){j.enableDrag(),j.removeEventListener(b.window,"mousemove",this.mousemove),j.removeEventListener(b.window,"mouseup",this.mouseup)},Ca.prototype.mousedown=function(S){this.down(b.extend({},S,{ctrlKey:!0,preventDefault:function(){return S.preventDefault()}}),j.mousePos(this.element,S)),j.addEventListener(b.window,"mousemove",this.mousemove),j.addEventListener(b.window,"mouseup",this.mouseup)},Ca.prototype.mousemove=function(S){this.move(S,j.mousePos(this.element,S))},Ca.prototype.mouseup=function(S){this.mouseRotate.mouseupWindow(S),this.mousePitch&&this.mousePitch.mouseupWindow(S),this.offTemp()},Ca.prototype.touchstart=function(S){S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,S.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return S.preventDefault()}},this._startPos))},Ca.prototype.touchmove=function(S){S.targetTouches.length!==1?this.reset():(this._lastPos=j.touchPos(this.element,S.targetTouches)[0],this.move({preventDefault:function(){return S.preventDefault()}},this._lastPos))},Ca.prototype.touchend=function(S){S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ca.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Lc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ed(S,T,C){var I=S.classList;for(var Z in Lc)I.remove("mapboxgl-"+C+"-anchor-"+Z);I.add("mapboxgl-"+C+"-anchor-"+T)}var Zh,hh=function(S){function T(C,I){if(S.call(this),(C instanceof b.window.HTMLElement||I)&&(C=b.extend({element:C},I)),b.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=C&&C.anchor||"center",this._color=C&&C.color||"#3FB1CE",this._scale=C&&C.scale||1,this._draggable=C&&C.draggable||!1,this._clickTolerance=C&&C.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=C&&C.rotation||0,this._rotationAlignment=C&&C.rotationAlignment||"auto",this._pitchAlignment=C&&C.pitchAlignment&&C.pitchAlignment!=="auto"?C.pitchAlignment:this._rotationAlignment,C&&C.element)this._element=C.element,this._offset=b.Point.convert(C&&C.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div"),this._element.setAttribute("aria-label","Map marker");var Z=j.createNS("http://www.w3.org/2000/svg","svg");Z.setAttributeNS(null,"display","block"),Z.setAttributeNS(null,"height","41px"),Z.setAttributeNS(null,"width","27px"),Z.setAttributeNS(null,"viewBox","0 0 27 41");var ee=j.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"stroke","none"),ee.setAttributeNS(null,"stroke-width","1"),ee.setAttributeNS(null,"fill","none"),ee.setAttributeNS(null,"fill-rule","evenodd");var ae=j.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill-rule","nonzero");var Me=j.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Me.setAttributeNS(null,"fill","#000000");for(var ot=0,bt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ot<bt.length;ot+=1){var Vt=bt[ot],Wt=j.createNS("http://www.w3.org/2000/svg","ellipse");Wt.setAttributeNS(null,"opacity","0.04"),Wt.setAttributeNS(null,"cx","10.5"),Wt.setAttributeNS(null,"cy","5.80029008"),Wt.setAttributeNS(null,"rx",Vt.rx),Wt.setAttributeNS(null,"ry",Vt.ry),Me.appendChild(Wt)}var $t=j.createNS("http://www.w3.org/2000/svg","g");$t.setAttributeNS(null,"fill",this._color);var vr=j.createNS("http://www.w3.org/2000/svg","path");vr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$t.appendChild(vr);var hr=j.createNS("http://www.w3.org/2000/svg","g");hr.setAttributeNS(null,"opacity","0.25"),hr.setAttributeNS(null,"fill","#000000");var Ir=j.createNS("http://www.w3.org/2000/svg","path");Ir.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),hr.appendChild(Ir);var lr=j.createNS("http://www.w3.org/2000/svg","g");lr.setAttributeNS(null,"transform","translate(6.0, 7.0)"),lr.setAttributeNS(null,"fill","#FFFFFF");var Pr=j.createNS("http://www.w3.org/2000/svg","g");Pr.setAttributeNS(null,"transform","translate(8.0, 8.0)");var jr=j.createNS("http://www.w3.org/2000/svg","circle");jr.setAttributeNS(null,"fill","#000000"),jr.setAttributeNS(null,"opacity","0.25"),jr.setAttributeNS(null,"cx","5.5"),jr.setAttributeNS(null,"cy","5.5"),jr.setAttributeNS(null,"r","5.4999962");var tn=j.createNS("http://www.w3.org/2000/svg","circle");tn.setAttributeNS(null,"fill","#FFFFFF"),tn.setAttributeNS(null,"cx","5.5"),tn.setAttributeNS(null,"cy","5.5"),tn.setAttributeNS(null,"r","5.4999962"),Pr.appendChild(jr),Pr.appendChild(tn),ae.appendChild(Me),ae.appendChild($t),ae.appendChild(hr),ae.appendChild(lr),ae.appendChild(Pr),Z.appendChild(ae),Z.setAttributeNS(null,"height",41*this._scale+"px"),Z.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(Z),this._offset=b.Point.convert(C&&C.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(_n){_n.preventDefault()}),this._element.addEventListener("mousedown",function(_n){_n.preventDefault()}),ed(this._element,this._anchor,"marker"),this._popup=null}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.addTo=function(C){return this.remove(),this._map=C,C.getCanvasContainer().appendChild(this._element),C.on("move",this._update),C.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},T.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this},T.prototype.getLngLat=function(){return this._lngLat},T.prototype.setLngLat=function(C){return this._lngLat=b.LngLat.convert(C),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},T.prototype.getElement=function(){return this._element},T.prototype.setPopup=function(C){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),C){if(!("offset"in C.options)){var I=Math.sqrt(Math.pow(13.5,2)/2);C.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[I,-1*(24.6+I)],"bottom-right":[-I,-1*(24.6+I)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=C,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},T.prototype._onKeyPress=function(C){var I=C.code,Z=C.charCode||C.keyCode;I!=="Space"&&I!=="Enter"&&Z!==32&&Z!==13||this.togglePopup()},T.prototype._onMapClick=function(C){var I=C.originalEvent.target,Z=this._element;this._popup&&(I===Z||Z.contains(I))&&this.togglePopup()},T.prototype.getPopup=function(){return this._popup},T.prototype.togglePopup=function(){var C=this._popup;return C?(C.isOpen()?C.remove():C.addTo(this._map),this):this},T.prototype._update=function(C){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Uh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(I="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Z="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Z="rotateX(0deg)":this._pitchAlignment==="map"&&(Z="rotateX("+this._map.getPitch()+"deg)"),C&&C.type!=="moveend"||(this._pos=this._pos.round()),j.setTransform(this._element,Lc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Z+" "+I)}},T.prototype.getOffset=function(){return this._offset},T.prototype.setOffset=function(C){return this._offset=b.Point.convert(C),this._update(),this},T.prototype._onMove=function(C){if(!this._isDragging){var I=this._clickTolerance||this._map._clickTolerance;this._isDragging=C.point.dist(this._pointerdownPos)>=I}this._isDragging&&(this._pos=C.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new b.Event("dragstart"))),this.fire(new b.Event("drag")))},T.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new b.Event("dragend")),this._state="inactive"},T.prototype._addDragHandler=function(C){this._element.contains(C.originalEvent.target)&&(C.preventDefault(),this._positionDelta=C.point.sub(this._pos).add(this._offset),this._pointerdownPos=C.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},T.prototype.setDraggable=function(C){return this._draggable=!!C,this._map&&(C?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},T.prototype.isDraggable=function(){return this._draggable},T.prototype.setRotation=function(C){return this._rotation=C||0,this._update(),this},T.prototype.getRotation=function(){return this._rotation},T.prototype.setRotationAlignment=function(C){return this._rotationAlignment=C||"auto",this._update(),this},T.prototype.getRotationAlignment=function(){return this._rotationAlignment},T.prototype.setPitchAlignment=function(C){return this._pitchAlignment=C&&C!=="auto"?C:this._rotationAlignment,this._update(),this},T.prototype.getPitchAlignment=function(){return this._pitchAlignment},T}(b.Evented),bp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Vh=0,Sn=!1,Ar=function(S){function T(C){S.call(this),this.options=b.extend({},bp,C),b.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.onAdd=function(C){var I;return this._map=C,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),I=this._setupUI,Zh!==void 0?I(Zh):b.window.navigator.permissions!==void 0?b.window.navigator.permissions.query({name:"geolocation"}).then(function(Z){I(Zh=Z.state!=="denied")}):I(Zh=!!b.window.navigator.geolocation),this._container},T.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(b.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Vh=0,Sn=!1},T.prototype._isOutOfMapMaxBounds=function(C){var I=this._map.getMaxBounds(),Z=C.coords;return I&&(Z.longitude<I.getWest()||Z.longitude>I.getEast()||Z.latitude<I.getSouth()||Z.latitude>I.getNorth())},T.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},T.prototype._onSuccess=function(C){if(this._map){if(this._isOutOfMapMaxBounds(C))return this._setErrorState(),this.fire(new b.Event("outofmaxbounds",C)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=C,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(C),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(C),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new b.Event("geolocate",C)),this._finish()}},T.prototype._updateCamera=function(C){var I=new b.LngLat(C.coords.longitude,C.coords.latitude),Z=C.coords.accuracy,ee=this._map.getBearing(),ae=b.extend({bearing:ee},this.options.fitBoundsOptions);this._map.fitBounds(I.toBounds(Z),ae,{geolocateSource:!0})},T.prototype._updateMarker=function(C){if(C){var I=new b.LngLat(C.coords.longitude,C.coords.latitude);this._accuracyCircleMarker.setLngLat(I).addTo(this._map),this._userLocationDotMarker.setLngLat(I).addTo(this._map),this._accuracy=C.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},T.prototype._updateCircleRadius=function(){var C=this._map._container.clientHeight/2,I=this._map.unproject([0,C]),Z=this._map.unproject([1,C]),ee=I.distanceTo(Z),ae=Math.ceil(2*this._accuracy/ee);this._circleElement.style.width=ae+"px",this._circleElement.style.height=ae+"px"},T.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},T.prototype._onError=function(C){if(this._map){if(this.options.trackUserLocation)if(C.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var I=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=I,this._geolocateButton.setAttribute("aria-label",I),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(C.code===3&&Sn)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new b.Event("error",C)),this._finish()}},T.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},T.prototype._setupUI=function(C){var I=this;if(this._container.addEventListener("contextmenu",function(ae){return ae.preventDefault()}),this._geolocateButton=j.create("button","mapboxgl-ctrl-geolocate",this._container),j.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",C===!1){b.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Z=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z)}else{var ee=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ee,this._geolocateButton.setAttribute("aria-label",ee)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new hh(this._dotElement),this._circleElement=j.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new hh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ae){ae.geolocateSource||I._watchState!=="ACTIVE_LOCK"||ae.originalEvent&&ae.originalEvent.type==="resize"||(I._watchState="BACKGROUND",I._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),I._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),I.fire(new b.Event("trackuserlocationend")))})},T.prototype.trigger=function(){if(!this._setup)return b.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new b.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vh--,Sn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new b.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new b.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var C;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Vh>1?(C={maximumAge:6e5,timeout:0},Sn=!0):(C=this.options.positionOptions,Sn=!1),this._geolocationWatchID=b.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else b.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},T.prototype._clearWatch=function(){b.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},T}(b.Evented),Ne={maxWidth:100,unit:"metric"},Dc=function(S){this.options=b.extend({},Ne,S),b.bindAll(["_onMove","setUnit"],this)};function nr(S,T,C){var I=C&&C.maxWidth||100,Z=S._container.clientHeight/2,ee=S.unproject([0,Z]),ae=S.unproject([I,Z]),Me=ee.distanceTo(ae);if(C&&C.unit==="imperial"){var ot=3.2808*Me;ot>5280?Bf(T,I,ot/5280,S._getUIString("ScaleControl.Miles")):Bf(T,I,ot,S._getUIString("ScaleControl.Feet"))}else C&&C.unit==="nautical"?Bf(T,I,Me/1852,S._getUIString("ScaleControl.NauticalMiles")):Me>=1e3?Bf(T,I,Me/1e3,S._getUIString("ScaleControl.Kilometers")):Bf(T,I,Me,S._getUIString("ScaleControl.Meters"))}function Bf(S,T,C,I){var Z,ee,ae,Me=(Z=C,(ee=Math.pow(10,(""+Math.floor(Z)).length-1))*(ae=(ae=Z/ee)>=10?10:ae>=5?5:ae>=3?3:ae>=2?2:ae>=1?1:function(ot){var bt=Math.pow(10,Math.ceil(-Math.log(ot)/Math.LN10));return Math.round(ot*bt)/bt}(ae)));S.style.width=T*(Me/C)+"px",S.innerHTML=Me+"&nbsp;"+I}Dc.prototype.getDefaultPosition=function(){return"bottom-left"},Dc.prototype._onMove=function(){nr(this._map,this._container,this.options)},Dc.prototype.onAdd=function(S){return this._map=S,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Dc.prototype.onRemove=function(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Dc.prototype.setUnit=function(S){this.options.unit=S,nr(this._map,this._container,this.options)};var xs=function(S){this._fullscreen=!1,S&&S.container&&(S.container instanceof b.window.HTMLElement?this._container=S.container:b.warnOnce("Full screen control 'container' must be a DOM element.")),b.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in b.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in b.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in b.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in b.window.document&&(this._fullscreenchange="MSFullscreenChange")};xs.prototype.onAdd=function(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",b.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},xs.prototype.onRemove=function(){j.remove(this._controlContainer),this._map=null,b.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},xs.prototype._checkFullscreenSupport=function(){return!!(b.window.document.fullscreenEnabled||b.window.document.mozFullScreenEnabled||b.window.document.msFullscreenEnabled||b.window.document.webkitFullscreenEnabled)},xs.prototype._setupUI=function(){var S=this._fullscreenButton=j.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);j.create("span","mapboxgl-ctrl-icon",S).setAttribute("aria-hidden",!0),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),b.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},xs.prototype._updateTitle=function(){var S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S},xs.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},xs.prototype._isFullscreen=function(){return this._fullscreen},xs.prototype._changeIcon=function(){(b.window.document.fullscreenElement||b.window.document.mozFullScreenElement||b.window.document.webkitFullscreenElement||b.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},xs.prototype._onClickFullscreen=function(){this._isFullscreen()?b.window.document.exitFullscreen?b.window.document.exitFullscreen():b.window.document.mozCancelFullScreen?b.window.document.mozCancelFullScreen():b.window.document.msExitFullscreen?b.window.document.msExitFullscreen():b.window.document.webkitCancelFullScreen&&b.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Sp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Nf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),zl=function(S){function T(C){S.call(this),this.options=b.extend(Object.create(Sp),C),b.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return S&&(T.__proto__=S),(T.prototype=Object.create(S&&S.prototype)).constructor=T,T.prototype.addTo=function(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new b.Event("open")),this},T.prototype.isOpen=function(){return!!this._map},T.prototype.remove=function(){return this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new b.Event("close")),this},T.prototype.getLngLat=function(){return this._lngLat},T.prototype.setLngLat=function(C){return this._lngLat=b.LngLat.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},T.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},T.prototype.getElement=function(){return this._container},T.prototype.setText=function(C){return this.setDOMContent(b.window.document.createTextNode(C))},T.prototype.setHTML=function(C){var I,Z=b.window.document.createDocumentFragment(),ee=b.window.document.createElement("body");for(ee.innerHTML=C;I=ee.firstChild;)Z.appendChild(I);return this.setDOMContent(Z)},T.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},T.prototype.setMaxWidth=function(C){return this.options.maxWidth=C,this._update(),this},T.prototype.setDOMContent=function(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=j.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this},T.prototype.addClassName=function(C){this._container&&this._container.classList.add(C)},T.prototype.removeClassName=function(C){this._container&&this._container.classList.remove(C)},T.prototype.setOffset=function(C){return this.options.offset=C,this._update(),this},T.prototype.toggleClassName=function(C){if(this._container)return this._container.classList.toggle(C)},T.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=j.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},T.prototype._onMouseUp=function(C){this._update(C.point)},T.prototype._onMouseMove=function(C){this._update(C.point)},T.prototype._onDrag=function(C){this._update(C.point)},T.prototype._update=function(C){var I=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=j.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=j.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Wt){return I._container.classList.add(Wt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Uh(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||C)){var Z=this._pos=this._trackPointer&&C?C:this._map.project(this._lngLat),ee=this.options.anchor,ae=function Wt($t){if($t){if(typeof $t=="number"){var vr=Math.round(Math.sqrt(.5*Math.pow($t,2)));return{center:new b.Point(0,0),top:new b.Point(0,$t),"top-left":new b.Point(vr,vr),"top-right":new b.Point(-vr,vr),bottom:new b.Point(0,-$t),"bottom-left":new b.Point(vr,-vr),"bottom-right":new b.Point(-vr,-vr),left:new b.Point($t,0),right:new b.Point(-$t,0)}}if($t instanceof b.Point||Array.isArray($t)){var hr=b.Point.convert($t);return{center:hr,top:hr,"top-left":hr,"top-right":hr,bottom:hr,"bottom-left":hr,"bottom-right":hr,left:hr,right:hr}}return{center:b.Point.convert($t.center||[0,0]),top:b.Point.convert($t.top||[0,0]),"top-left":b.Point.convert($t["top-left"]||[0,0]),"top-right":b.Point.convert($t["top-right"]||[0,0]),bottom:b.Point.convert($t.bottom||[0,0]),"bottom-left":b.Point.convert($t["bottom-left"]||[0,0]),"bottom-right":b.Point.convert($t["bottom-right"]||[0,0]),left:b.Point.convert($t.left||[0,0]),right:b.Point.convert($t.right||[0,0])}}return Wt(new b.Point(0,0))}(this.options.offset);if(!ee){var Me,ot=this._container.offsetWidth,bt=this._container.offsetHeight;Me=Z.y+ae.bottom.y<bt?["top"]:Z.y>this._map.transform.height-bt?["bottom"]:[],Z.x<ot/2?Me.push("left"):Z.x>this._map.transform.width-ot/2&&Me.push("right"),ee=Me.length===0?"bottom":Me.join("-")}var Vt=Z.add(ae[ee]).round();j.setTransform(this._container,Lc[ee]+" translate("+Vt.x+"px,"+Vt.y+"px)"),ed(this._container,ee,"popup")}},T.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var C=this._container.querySelector(Nf);C&&C.focus()}},T.prototype._onClose=function(){this.remove()},T}(b.Evented),Ep={version:b.version,supported:G,setRTLTextPlugin:b.setRTLTextPlugin,getRTLTextPluginStatus:b.getRTLTextPluginStatus,Map:Jp,NavigationControl:_c,GeolocateControl:Ar,AttributionControl:yl,ScaleControl:Dc,FullscreenControl:xs,Popup:zl,Marker:hh,Style:As,LngLat:b.LngLat,LngLatBounds:b.LngLatBounds,Point:b.Point,MercatorCoordinate:b.MercatorCoordinate,Evented:b.Evented,config:b.config,prewarm:function(){un().acquire(Ft)},clearPrewarmedResources:function(){var S=ei;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(Ft),ei=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return b.config.ACCESS_TOKEN},set accessToken(S){b.config.ACCESS_TOKEN=S},get baseApiUrl(){return b.config.API_URL},set baseApiUrl(S){b.config.API_URL=S},get workerCount(){return Mn.workerCount},set workerCount(S){Mn.workerCount=S},get maxParallelImageRequests(){return b.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(S){b.config.MAX_PARALLEL_IMAGE_REQUESTS=S},clearStorage:function(S){b.clearTileCache(S)},workerUrl:""};return Ep}),W})},3614:function(ft,N,k){"use strict";ft.exports=K;var W=k(80645);function K(ke){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ke)?ke:new Uint8Array(ke||0),this.pos=0,this.type=0,this.length=this.buf.length}K.Varint=0,K.Fixed64=1,K.Bytes=2,K.Fixed32=5;var b=65536*65536,G=1/b,j=12,q=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");K.prototype={destroy:function(){this.buf=null},readFields:function(ke,qe,ne){for(ne=ne||this.length;this.pos<ne;){var Ge=this.readVarint(),oe=Ge>>3,Fe=this.pos;this.type=Ge&7,ke(oe,qe,this),this.pos===Fe&&this.skip(Ge)}return qe},readMessage:function(ke,qe){return this.readFields(ke,qe,this.readVarint()+this.pos)},readFixed32:function(){var ke=Ze(this.buf,this.pos);return this.pos+=4,ke},readSFixed32:function(){var ke=_e(this.buf,this.pos);return this.pos+=4,ke},readFixed64:function(){var ke=Ze(this.buf,this.pos)+Ze(this.buf,this.pos+4)*b;return this.pos+=8,ke},readSFixed64:function(){var ke=Ze(this.buf,this.pos)+_e(this.buf,this.pos+4)*b;return this.pos+=8,ke},readFloat:function(){var ke=W.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ke},readDouble:function(){var ke=W.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ke},readVarint:function(ke){var qe=this.buf,ne,Ge;return Ge=qe[this.pos++],ne=Ge&127,Ge<128||(Ge=qe[this.pos++],ne|=(Ge&127)<<7,Ge<128)||(Ge=qe[this.pos++],ne|=(Ge&127)<<14,Ge<128)||(Ge=qe[this.pos++],ne|=(Ge&127)<<21,Ge<128)?ne:(Ge=qe[this.pos],ne|=(Ge&15)<<28,Q(ne,ke,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ke=this.readVarint();return ke%2===1?(ke+1)/-2:ke/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ke=this.readVarint()+this.pos,qe=this.pos;return this.pos=ke,ke-qe>=j&&q?Ke(this.buf,qe,ke):He(this.buf,qe,ke)},readBytes:function(){var ke=this.readVarint()+this.pos,qe=this.buf.subarray(this.pos,ke);return this.pos=ke,qe},readPackedVarint:function(ke,qe){if(this.type!==K.Bytes)return ke.push(this.readVarint(qe));var ne=ie(this);for(ke=ke||[];this.pos<ne;)ke.push(this.readVarint(qe));return ke},readPackedSVarint:function(ke){if(this.type!==K.Bytes)return ke.push(this.readSVarint());var qe=ie(this);for(ke=ke||[];this.pos<qe;)ke.push(this.readSVarint());return ke},readPackedBoolean:function(ke){if(this.type!==K.Bytes)return ke.push(this.readBoolean());var qe=ie(this);for(ke=ke||[];this.pos<qe;)ke.push(this.readBoolean());return ke},readPackedFloat:function(ke){if(this.type!==K.Bytes)return ke.push(this.readFloat());var qe=ie(this);for(ke=ke||[];this.pos<qe;)ke.push(this.readFloat());return ke},readPackedDouble:function(ke){if(this.type!==K.Bytes)return ke.push(this.readDouble());var qe=ie(this);for(ke=ke||[];this.pos<qe;)ke.push(this.readDouble());return ke},readPackedFixed32:function(ke){if(this.type!==K.Bytes)return ke.push(this.readFixed32());var qe=ie(this);for(ke=ke||[];this.pos<qe;)ke.push(this.readFixed32());return ke},readPackedSFixed32:function(ke){if(this.type!==K.Bytes)return ke.push(this.readSFixed32());var qe=ie(this);for(ke=ke||[];this.pos<qe;)ke.push(this.readSFixed32());return ke},readPackedFixed64:function(ke){if(this.type!==K.Bytes)return ke.push(this.readFixed64());var qe=ie(this);for(ke=ke||[];this.pos<qe;)ke.push(this.readFixed64());return ke},readPackedSFixed64:function(ke){if(this.type!==K.Bytes)return ke.push(this.readSFixed64());var qe=ie(this);for(ke=ke||[];this.pos<qe;)ke.push(this.readSFixed64());return ke},skip:function(ke){var qe=ke&7;if(qe===K.Varint)for(;this.buf[this.pos++]>127;);else if(qe===K.Bytes)this.pos=this.readVarint()+this.pos;else if(qe===K.Fixed32)this.pos+=4;else if(qe===K.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+qe)},writeTag:function(ke,qe){this.writeVarint(ke<<3|qe)},realloc:function(ke){for(var qe=this.length||16;qe<this.pos+ke;)qe*=2;if(qe!==this.length){var ne=new Uint8Array(qe);ne.set(this.buf),this.buf=ne,this.length=qe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ke){this.realloc(4),xe(this.buf,ke,this.pos),this.pos+=4},writeSFixed32:function(ke){this.realloc(4),xe(this.buf,ke,this.pos),this.pos+=4},writeFixed64:function(ke){this.realloc(8),xe(this.buf,ke&-1,this.pos),xe(this.buf,Math.floor(ke*G),this.pos+4),this.pos+=8},writeSFixed64:function(ke){this.realloc(8),xe(this.buf,ke&-1,this.pos),xe(this.buf,Math.floor(ke*G),this.pos+4),this.pos+=8},writeVarint:function(ke){if(ke=+ke||0,ke>268435455||ke<0){Ce(ke,this);return}this.realloc(4),this.buf[this.pos++]=ke&127|(ke>127?128:0),!(ke<=127)&&(this.buf[this.pos++]=(ke>>>=7)&127|(ke>127?128:0),!(ke<=127)&&(this.buf[this.pos++]=(ke>>>=7)&127|(ke>127?128:0),!(ke<=127)&&(this.buf[this.pos++]=ke>>>7&127)))},writeSVarint:function(ke){this.writeVarint(ke<0?-ke*2-1:ke*2)},writeBoolean:function(ke){this.writeVarint(!!ke)},writeString:function(ke){ke=String(ke),this.realloc(ke.length*4),this.pos++;var qe=this.pos;this.pos=Et(this.buf,ke,this.pos);var ne=this.pos-qe;ne>=128&&J(qe,ne,this),this.pos=qe-1,this.writeVarint(ne),this.pos+=ne},writeFloat:function(ke){this.realloc(4),W.write(this.buf,ke,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ke){this.realloc(8),W.write(this.buf,ke,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ke){var qe=ke.length;this.writeVarint(qe),this.realloc(qe);for(var ne=0;ne<qe;ne++)this.buf[this.pos++]=ke[ne]},writeRawMessage:function(ke,qe){this.pos++;var ne=this.pos;ke(qe,this);var Ge=this.pos-ne;Ge>=128&&J(ne,Ge,this),this.pos=ne-1,this.writeVarint(Ge),this.pos+=Ge},writeMessage:function(ke,qe,ne){this.writeTag(ke,K.Bytes),this.writeRawMessage(qe,ne)},writePackedVarint:function(ke,qe){qe.length&&this.writeMessage(ke,M,qe)},writePackedSVarint:function(ke,qe){qe.length&&this.writeMessage(ke,E,qe)},writePackedBoolean:function(ke,qe){qe.length&&this.writeMessage(ke,ze,qe)},writePackedFloat:function(ke,qe){qe.length&&this.writeMessage(ke,ge,qe)},writePackedDouble:function(ke,qe){qe.length&&this.writeMessage(ke,Se,qe)},writePackedFixed32:function(ke,qe){qe.length&&this.writeMessage(ke,De,qe)},writePackedSFixed32:function(ke,qe){qe.length&&this.writeMessage(ke,Ue,qe)},writePackedFixed64:function(ke,qe){qe.length&&this.writeMessage(ke,at,qe)},writePackedSFixed64:function(ke,qe){qe.length&&this.writeMessage(ke,Je,qe)},writeBytesField:function(ke,qe){this.writeTag(ke,K.Bytes),this.writeBytes(qe)},writeFixed32Field:function(ke,qe){this.writeTag(ke,K.Fixed32),this.writeFixed32(qe)},writeSFixed32Field:function(ke,qe){this.writeTag(ke,K.Fixed32),this.writeSFixed32(qe)},writeFixed64Field:function(ke,qe){this.writeTag(ke,K.Fixed64),this.writeFixed64(qe)},writeSFixed64Field:function(ke,qe){this.writeTag(ke,K.Fixed64),this.writeSFixed64(qe)},writeVarintField:function(ke,qe){this.writeTag(ke,K.Varint),this.writeVarint(qe)},writeSVarintField:function(ke,qe){this.writeTag(ke,K.Varint),this.writeSVarint(qe)},writeStringField:function(ke,qe){this.writeTag(ke,K.Bytes),this.writeString(qe)},writeFloatField:function(ke,qe){this.writeTag(ke,K.Fixed32),this.writeFloat(qe)},writeDoubleField:function(ke,qe){this.writeTag(ke,K.Fixed64),this.writeDouble(qe)},writeBooleanField:function(ke,qe){this.writeVarintField(ke,!!qe)}};function Q(ke,qe,ne){var Ge=ne.buf,oe,Fe;if(Fe=Ge[ne.pos++],oe=(Fe&112)>>4,Fe<128||(Fe=Ge[ne.pos++],oe|=(Fe&127)<<3,Fe<128)||(Fe=Ge[ne.pos++],oe|=(Fe&127)<<10,Fe<128)||(Fe=Ge[ne.pos++],oe|=(Fe&127)<<17,Fe<128)||(Fe=Ge[ne.pos++],oe|=(Fe&127)<<24,Fe<128)||(Fe=Ge[ne.pos++],oe|=(Fe&1)<<31,Fe<128))return te(ke,oe,qe);throw new Error("Expected varint not more than 10 bytes")}function ie(ke){return ke.type===K.Bytes?ke.readVarint()+ke.pos:ke.pos+1}function te(ke,qe,ne){return ne?qe*4294967296+(ke>>>0):(qe>>>0)*4294967296+(ke>>>0)}function Ce(ke,qe){var ne,Ge;if(ke>=0?(ne=ke%4294967296|0,Ge=ke/4294967296|0):(ne=~(-ke%4294967296),Ge=~(-ke/4294967296),ne^4294967295?ne=ne+1|0:(ne=0,Ge=Ge+1|0)),ke>=18446744073709552e3||ke<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");qe.realloc(10),pe(ne,Ge,qe),fe(Ge,qe)}function pe(ke,qe,ne){ne.buf[ne.pos++]=ke&127|128,ke>>>=7,ne.buf[ne.pos++]=ke&127|128,ke>>>=7,ne.buf[ne.pos++]=ke&127|128,ke>>>=7,ne.buf[ne.pos++]=ke&127|128,ke>>>=7,ne.buf[ne.pos]=ke&127}function fe(ke,qe){var ne=(ke&7)<<4;qe.buf[qe.pos++]|=ne|((ke>>>=3)?128:0),ke&&(qe.buf[qe.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(qe.buf[qe.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(qe.buf[qe.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(qe.buf[qe.pos++]=ke&127|((ke>>>=7)?128:0),ke&&(qe.buf[qe.pos++]=ke&127)))))}function J(ke,qe,ne){var Ge=qe<=16383?1:qe<=2097151?2:qe<=268435455?3:Math.floor(Math.log(qe)/(Math.LN2*7));ne.realloc(Ge);for(var oe=ne.pos-1;oe>=ke;oe--)ne.buf[oe+Ge]=ne.buf[oe]}function M(ke,qe){for(var ne=0;ne<ke.length;ne++)qe.writeVarint(ke[ne])}function E(ke,qe){for(var ne=0;ne<ke.length;ne++)qe.writeSVarint(ke[ne])}function ge(ke,qe){for(var ne=0;ne<ke.length;ne++)qe.writeFloat(ke[ne])}function Se(ke,qe){for(var ne=0;ne<ke.length;ne++)qe.writeDouble(ke[ne])}function ze(ke,qe){for(var ne=0;ne<ke.length;ne++)qe.writeBoolean(ke[ne])}function De(ke,qe){for(var ne=0;ne<ke.length;ne++)qe.writeFixed32(ke[ne])}function Ue(ke,qe){for(var ne=0;ne<ke.length;ne++)qe.writeSFixed32(ke[ne])}function at(ke,qe){for(var ne=0;ne<ke.length;ne++)qe.writeFixed64(ke[ne])}function Je(ke,qe){for(var ne=0;ne<ke.length;ne++)qe.writeSFixed64(ke[ne])}function Ze(ke,qe){return(ke[qe]|ke[qe+1]<<8|ke[qe+2]<<16)+ke[qe+3]*16777216}function xe(ke,qe,ne){ke[ne]=qe,ke[ne+1]=qe>>>8,ke[ne+2]=qe>>>16,ke[ne+3]=qe>>>24}function _e(ke,qe){return(ke[qe]|ke[qe+1]<<8|ke[qe+2]<<16)+(ke[qe+3]<<24)}function He(ke,qe,ne){for(var Ge="",oe=qe;oe<ne;){var Fe=ke[oe],ut=null,Ae=Fe>239?4:Fe>223?3:Fe>191?2:1;if(oe+Ae>ne)break;var Le,rt,ye;Ae===1?Fe<128&&(ut=Fe):Ae===2?(Le=ke[oe+1],(Le&192)===128&&(ut=(Fe&31)<<6|Le&63,ut<=127&&(ut=null))):Ae===3?(Le=ke[oe+1],rt=ke[oe+2],(Le&192)===128&&(rt&192)===128&&(ut=(Fe&15)<<12|(Le&63)<<6|rt&63,(ut<=2047||ut>=55296&&ut<=57343)&&(ut=null))):Ae===4&&(Le=ke[oe+1],rt=ke[oe+2],ye=ke[oe+3],(Le&192)===128&&(rt&192)===128&&(ye&192)===128&&(ut=(Fe&15)<<18|(Le&63)<<12|(rt&63)<<6|ye&63,(ut<=65535||ut>=1114112)&&(ut=null))),ut===null?(ut=65533,Ae=1):ut>65535&&(ut-=65536,Ge+=String.fromCharCode(ut>>>10&1023|55296),ut=56320|ut&1023),Ge+=String.fromCharCode(ut),oe+=Ae}return Ge}function Ke(ke,qe,ne){return q.decode(ke.subarray(qe,ne))}function Et(ke,qe,ne){for(var Ge=0,oe,Fe;Ge<qe.length;Ge++){if(oe=qe.charCodeAt(Ge),oe>55295&&oe<57344)if(Fe)if(oe<56320){ke[ne++]=239,ke[ne++]=191,ke[ne++]=189,Fe=oe;continue}else oe=Fe-55296<<10|oe-56320|65536,Fe=null;else{oe>56319||Ge+1===qe.length?(ke[ne++]=239,ke[ne++]=191,ke[ne++]=189):Fe=oe;continue}else Fe&&(ke[ne++]=239,ke[ne++]=191,ke[ne++]=189,Fe=null);oe<128?ke[ne++]=oe:(oe<2048?ke[ne++]=oe>>6|192:(oe<65536?ke[ne++]=oe>>12|224:(ke[ne++]=oe>>18|240,ke[ne++]=oe>>12&63|128),ke[ne++]=oe>>6&63|128),ke[ne++]=oe&63|128)}return ne}},73807:function(ft){"use strict";var N=ft.exports;ft.exports.isNumber=function(k){return typeof k=="number"},ft.exports.findMin=function(k){if(k.length===0)return 1/0;for(var W=k[0],K=1;K<k.length;K++)W=Math.min(W,k[K]);return W},ft.exports.findMax=function(k){if(k.length===0)return-1/0;for(var W=k[0],K=1;K<k.length;K++)W=Math.max(W,k[K]);return W},ft.exports.findMinMulti=function(k){for(var W=N.findMin(k[0]),K=1;K<k.length;K++)W=Math.min(W,N.findMin(k[K]));return W},ft.exports.findMaxMulti=function(k){for(var W=N.findMax(k[0]),K=1;K<k.length;K++)W=Math.max(W,N.findMax(k[K]));return W},ft.exports.inside=function(k,W,K){return k<=K&&K<=W}},53843:function(ft,N,k){"use strict";var W=50,K=2,b=Math.log(2),G=ft.exports,j=k(73807);function q(ie){return 1-Math.abs(ie)}ft.exports.getUnifiedMinMax=function(ie,te){return G.getUnifiedMinMaxMulti([ie],te)},ft.exports.getUnifiedMinMaxMulti=function(ie,te){te=te||{};var Ce=!1,pe=!1,fe=j.isNumber(te.width)?te.width:K,J=j.isNumber(te.size)?te.size:W,M=j.isNumber(te.min)?te.min:(Ce=!0,j.findMinMulti(ie)),E=j.isNumber(te.max)?te.max:(pe=!0,j.findMaxMulti(ie)),ge=E-M,Se=ge/(J-1);return Ce&&(M=M-2*fe*Se),pe&&(E=E+2*fe*Se),{min:M,max:E}},ft.exports.create=function(ie,te){if(te=te||{},!ie||ie.length===0)return[];var Ce=j.isNumber(te.size)?te.size:W,pe=j.isNumber(te.width)?te.width:K,fe=G.getUnifiedMinMax(ie,{size:Ce,width:pe,min:te.min,max:te.max}),J=fe.min,M=fe.max,E=M-J,ge=E/(Ce-1);if(E===0)return[{x:J,y:1}];for(var Se=[],ze=0;ze<Ce;ze++)Se.push({x:J+ze*ge,y:0});var De=function(Ke){return Math.floor((Ke-J)/ge)},Ue=Q(q,pe),at=Ue[pe],Je=Ue[pe-1]-Ue[pe-2],Ze=0;ie.forEach(function(Ke){var Et=De(Ke);if(!(Et+pe<0||Et-pe>=Se.length)){var ke=Math.max(Et-pe,0),qe=Et,ne=Math.min(Et+pe,Se.length-1),Ge=ke-(Et-pe),oe=Et+pe-ne,Fe=Ue[-pe-1+Ge]||0,ut=Ue[-pe-1+oe]||0,Ae=at/(at-Fe-ut);Ge>0&&(Ze+=Ae*(Ge-1)*Je);var Le=Math.max(0,Et-pe+1);j.inside(0,Se.length-1,Le)&&(Se[Le].y+=Ae*1*Je),j.inside(0,Se.length-1,qe+1)&&(Se[qe+1].y-=Ae*2*Je),j.inside(0,Se.length-1,ne+1)&&(Se[ne+1].y+=Ae*1*Je)}});var xe=Ze,_e=0,He=0;return Se.forEach(function(Ke){_e+=Ke.y,xe+=_e,Ke.y=xe,He+=xe}),He>0&&Se.forEach(function(Ke){Ke.y/=He}),Se};function Q(ie,te){for(var Ce={},pe=0,fe=-te;fe<=te;fe++)pe+=ie(fe/te),Ce[fe]=pe;return Ce}ft.exports.getExpectedValueFromPdf=function(ie){if(!(!ie||ie.length===0)){var te=0;return ie.forEach(function(Ce){te+=Ce.x*Ce.y}),te}},ft.exports.getXWithLeftTailArea=function(ie,te){if(!(!ie||ie.length===0)){for(var Ce=0,pe=0,fe=0;fe<ie.length&&(pe=fe,Ce+=ie[fe].y,!(Ce>=te));fe++);return ie[pe].x}},ft.exports.getPerplexity=function(ie){if(!(!ie||ie.length===0)){var te=0;return ie.forEach(function(Ce){var pe=Math.log(Ce.y);isFinite(pe)&&(te+=Ce.y*pe)}),te=-te/b,Math.pow(2,te)}}},32676:function(ft,N,k){var W=k(34155);(function(K,b){ft.exports=b()})(this,function(){"use strict";function K(le,H){var re={label:0,sent:function(){if(Ct[0]&1)throw Ct[1];return Ct[1]},trys:[],ops:[]},Ie,Ye,Ct,ar;return ar={next:jt(0),throw:jt(1),return:jt(2)},typeof Symbol=="function"&&(ar[Symbol.iterator]=function(){return this}),ar;function jt(Mt){return function(ve){return wt([Mt,ve])}}function wt(Mt){if(Ie)throw new TypeError("Generator is already executing.");for(;re;)try{if(Ie=1,Ye&&(Ct=Mt[0]&2?Ye.return:Mt[0]?Ye.throw||((Ct=Ye.return)&&Ct.call(Ye),0):Ye.next)&&!(Ct=Ct.call(Ye,Mt[1])).done)return Ct;switch(Ye=0,Ct&&(Mt=[Mt[0]&2,Ct.value]),Mt[0]){case 0:case 1:Ct=Mt;break;case 4:return re.label++,{value:Mt[1],done:!1};case 5:re.label++,Ye=Mt[1],Mt=[0];continue;case 7:Mt=re.ops.pop(),re.trys.pop();continue;default:if(Ct=re.trys,!(Ct=Ct.length>0&&Ct[Ct.length-1])&&(Mt[0]===6||Mt[0]===2)){re=0;continue}if(Mt[0]===3&&(!Ct||Mt[1]>Ct[0]&&Mt[1]<Ct[3])){re.label=Mt[1];break}if(Mt[0]===6&&re.label<Ct[1]){re.label=Ct[1],Ct=Mt;break}if(Ct&&re.label<Ct[2]){re.label=Ct[2],re.ops.push(Mt);break}Ct[2]&&re.ops.pop(),re.trys.pop();continue}Mt=H.call(le,re)}catch(ve){Mt=[6,ve],Ye=0}finally{Ie=Ct=0}if(Mt[0]&5)throw Mt[1];return{value:Mt[0]?Mt[1]:void 0,done:!0}}}var b=function(){function le(H,re){this.next=null,this.key=H,this.data=re,this.left=null,this.right=null}return le}();function G(le,H){return le>H?1:le<H?-1:0}function j(le,H,re){for(var Ie=new b(null,null),Ye=Ie,Ct=Ie;;){var ar=re(le,H.key);if(ar<0){if(H.left===null)break;if(re(le,H.left.key)<0){var jt=H.left;if(H.left=jt.right,jt.right=H,H=jt,H.left===null)break}Ct.left=H,Ct=H,H=H.left}else if(ar>0){if(H.right===null)break;if(re(le,H.right.key)>0){var jt=H.right;if(H.right=jt.left,jt.left=H,H=jt,H.right===null)break}Ye.right=H,Ye=H,H=H.right}else break}return Ye.right=H.left,Ct.left=H.right,H.left=Ie.right,H.right=Ie.left,H}function q(le,H,re,Ie){var Ye=new b(le,H);if(re===null)return Ye.left=Ye.right=null,Ye;re=j(le,re,Ie);var Ct=Ie(le,re.key);return Ct<0?(Ye.left=re.left,Ye.right=re,re.left=null):Ct>=0&&(Ye.right=re.right,Ye.left=re,re.right=null),Ye}function Q(le,H,re){var Ie=null,Ye=null;if(H){H=j(le,H,re);var Ct=re(H.key,le);Ct===0?(Ie=H.left,Ye=H.right):Ct<0?(Ye=H.right,H.right=null,Ie=H):(Ie=H.left,H.left=null,Ye=H)}return{left:Ie,right:Ye}}function ie(le,H,re){return H===null?le:(le===null||(H=j(le.key,H,re),H.left=le),H)}function te(le,H,re,Ie,Ye){if(le){Ie(""+H+(re?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+Ye(le)+`
`);var Ct=H+(re?"    ":"\u2502   ");le.left&&te(le.left,Ct,!1,Ie,Ye),le.right&&te(le.right,Ct,!0,Ie,Ye)}}var Ce=function(){function le(H){H===void 0&&(H=G),this._root=null,this._size=0,this._comparator=H}return le.prototype.insert=function(H,re){return this._size++,this._root=q(H,re,this._root,this._comparator)},le.prototype.add=function(H,re){var Ie=new b(H,re);this._root===null&&(Ie.left=Ie.right=null,this._size++,this._root=Ie);var Ye=this._comparator,Ct=j(H,this._root,Ye),ar=Ye(H,Ct.key);return ar===0?this._root=Ct:(ar<0?(Ie.left=Ct.left,Ie.right=Ct,Ct.left=null):ar>0&&(Ie.right=Ct.right,Ie.left=Ct,Ct.right=null),this._size++,this._root=Ie),this._root},le.prototype.remove=function(H){this._root=this._remove(H,this._root,this._comparator)},le.prototype._remove=function(H,re,Ie){var Ye;if(re===null)return null;re=j(H,re,Ie);var Ct=Ie(H,re.key);return Ct===0?(re.left===null?Ye=re.right:(Ye=j(H,re.left,Ie),Ye.right=re.right),this._size--,Ye):re},le.prototype.pop=function(){var H=this._root;if(H){for(;H.left;)H=H.left;return this._root=j(H.key,this._root,this._comparator),this._root=this._remove(H.key,this._root,this._comparator),{key:H.key,data:H.data}}return null},le.prototype.findStatic=function(H){for(var re=this._root,Ie=this._comparator;re;){var Ye=Ie(H,re.key);if(Ye===0)return re;Ye<0?re=re.left:re=re.right}return null},le.prototype.find=function(H){return this._root&&(this._root=j(H,this._root,this._comparator),this._comparator(H,this._root.key)!==0)?null:this._root},le.prototype.contains=function(H){for(var re=this._root,Ie=this._comparator;re;){var Ye=Ie(H,re.key);if(Ye===0)return!0;Ye<0?re=re.left:re=re.right}return!1},le.prototype.forEach=function(H,re){for(var Ie=this._root,Ye=[],Ct=!1;!Ct;)Ie!==null?(Ye.push(Ie),Ie=Ie.left):Ye.length!==0?(Ie=Ye.pop(),H.call(re,Ie),Ie=Ie.right):Ct=!0;return this},le.prototype.range=function(H,re,Ie,Ye){for(var Ct=[],ar=this._comparator,jt=this._root,wt;Ct.length!==0||jt;)if(jt)Ct.push(jt),jt=jt.left;else{if(jt=Ct.pop(),wt=ar(jt.key,re),wt>0)break;if(ar(jt.key,H)>=0&&Ie.call(Ye,jt))return this;jt=jt.right}return this},le.prototype.keys=function(){var H=[];return this.forEach(function(re){var Ie=re.key;return H.push(Ie)}),H},le.prototype.values=function(){var H=[];return this.forEach(function(re){var Ie=re.data;return H.push(Ie)}),H},le.prototype.min=function(){return this._root?this.minNode(this._root).key:null},le.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},le.prototype.minNode=function(H){if(H===void 0&&(H=this._root),H)for(;H.left;)H=H.left;return H},le.prototype.maxNode=function(H){if(H===void 0&&(H=this._root),H)for(;H.right;)H=H.right;return H},le.prototype.at=function(H){for(var re=this._root,Ie=!1,Ye=0,Ct=[];!Ie;)if(re)Ct.push(re),re=re.left;else if(Ct.length>0){if(re=Ct.pop(),Ye===H)return re;Ye++,re=re.right}else Ie=!0;return null},le.prototype.next=function(H){var re=this._root,Ie=null;if(H.right){for(Ie=H.right;Ie.left;)Ie=Ie.left;return Ie}for(var Ye=this._comparator;re;){var Ct=Ye(H.key,re.key);if(Ct===0)break;Ct<0?(Ie=re,re=re.left):re=re.right}return Ie},le.prototype.prev=function(H){var re=this._root,Ie=null;if(H.left!==null){for(Ie=H.left;Ie.right;)Ie=Ie.right;return Ie}for(var Ye=this._comparator;re;){var Ct=Ye(H.key,re.key);if(Ct===0)break;Ct<0?re=re.left:(Ie=re,re=re.right)}return Ie},le.prototype.clear=function(){return this._root=null,this._size=0,this},le.prototype.toList=function(){return J(this._root)},le.prototype.load=function(H,re,Ie){re===void 0&&(re=[]),Ie===void 0&&(Ie=!1);var Ye=H.length,Ct=this._comparator;if(Ie&&ge(H,re,0,Ye-1,Ct),this._root===null)this._root=pe(H,re,0,Ye),this._size=Ye;else{var ar=E(this.toList(),fe(H,re),Ct);Ye=this._size+Ye,this._root=M({head:ar},0,Ye)}return this},le.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(le.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),le.prototype.toString=function(H){H===void 0&&(H=function(Ie){return String(Ie.key)});var re=[];return te(this._root,"",!0,function(Ie){return re.push(Ie)},H),re.join("")},le.prototype.update=function(H,re,Ie){var Ye=this._comparator,Ct=Q(H,this._root,Ye),ar=Ct.left,jt=Ct.right;Ye(H,re)<0?jt=q(re,Ie,jt,Ye):ar=q(re,Ie,ar,Ye),this._root=ie(ar,jt,Ye)},le.prototype.split=function(H){return Q(H,this._root,this._comparator)},le.prototype[Symbol.iterator]=function(){var H,re,Ie;return K(this,function(Ye){switch(Ye.label){case 0:H=this._root,re=[],Ie=!1,Ye.label=1;case 1:return Ie?[3,6]:H===null?[3,2]:(re.push(H),H=H.left,[3,5]);case 2:return re.length===0?[3,4]:(H=re.pop(),[4,H]);case 3:return Ye.sent(),H=H.right,[3,5];case 4:Ie=!0,Ye.label=5;case 5:return[3,1];case 6:return[2]}})},le}();function pe(le,H,re,Ie){var Ye=Ie-re;if(Ye>0){var Ct=re+Math.floor(Ye/2),ar=le[Ct],jt=H[Ct],wt=new b(ar,jt);return wt.left=pe(le,H,re,Ct),wt.right=pe(le,H,Ct+1,Ie),wt}return null}function fe(le,H){for(var re=new b(null,null),Ie=re,Ye=0;Ye<le.length;Ye++)Ie=Ie.next=new b(le[Ye],H[Ye]);return Ie.next=null,re.next}function J(le){for(var H=le,re=[],Ie=!1,Ye=new b(null,null),Ct=Ye;!Ie;)H?(re.push(H),H=H.left):re.length>0?(H=Ct=Ct.next=re.pop(),H=H.right):Ie=!0;return Ct.next=null,Ye.next}function M(le,H,re){var Ie=re-H;if(Ie>0){var Ye=H+Math.floor(Ie/2),Ct=M(le,H,Ye),ar=le.head;return ar.left=Ct,le.head=le.head.next,ar.right=M(le,Ye+1,re),ar}return null}function E(le,H,re){for(var Ie=new b(null,null),Ye=Ie,Ct=le,ar=H;Ct!==null&&ar!==null;)re(Ct.key,ar.key)<0?(Ye.next=Ct,Ct=Ct.next):(Ye.next=ar,ar=ar.next),Ye=Ye.next;return Ct!==null?Ye.next=Ct:ar!==null&&(Ye.next=ar),Ie.next}function ge(le,H,re,Ie,Ye){if(!(re>=Ie)){for(var Ct=le[re+Ie>>1],ar=re-1,jt=Ie+1;;){do ar++;while(Ye(le[ar],Ct)<0);do jt--;while(Ye(le[jt],Ct)>0);if(ar>=jt)break;var wt=le[ar];le[ar]=le[jt],le[jt]=wt,wt=H[ar],H[ar]=H[jt],H[jt]=wt}ge(le,H,re,jt,Ye),ge(le,H,jt+1,Ie,Ye)}}const Se=(le,H)=>le.ll.x<=H.x&&H.x<=le.ur.x&&le.ll.y<=H.y&&H.y<=le.ur.y,ze=(le,H)=>{if(H.ur.x<le.ll.x||le.ur.x<H.ll.x||H.ur.y<le.ll.y||le.ur.y<H.ll.y)return null;const re=le.ll.x<H.ll.x?H.ll.x:le.ll.x,Ie=le.ur.x<H.ur.x?le.ur.x:H.ur.x,Ye=le.ll.y<H.ll.y?H.ll.y:le.ll.y,Ct=le.ur.y<H.ur.y?le.ur.y:H.ur.y;return{ll:{x:re,y:Ye},ur:{x:Ie,y:Ct}}};let De=Number.EPSILON;De===void 0&&(De=Math.pow(2,-52));const Ue=De*De,at=(le,H)=>{if(-De<le&&le<De&&-De<H&&H<De)return 0;const re=le-H;return re*re<Ue*le*H?0:le<H?-1:1};class Je{constructor(){this.reset()}reset(){this.xRounder=new Ze,this.yRounder=new Ze}round(H,re){return{x:this.xRounder.round(H),y:this.yRounder.round(re)}}}class Ze{constructor(){this.tree=new Ce,this.round(0)}round(H){const re=this.tree.add(H),Ie=this.tree.prev(re);if(Ie!==null&&at(re.key,Ie.key)===0)return this.tree.remove(H),Ie.key;const Ye=this.tree.next(re);return Ye!==null&&at(re.key,Ye.key)===0?(this.tree.remove(H),Ye.key):H}}const xe=new Je,_e=11102230246251565e-32,He=134217729,Ke=(3+8*_e)*_e;function Et(le,H,re,Ie,Ye){let Ct,ar,jt,wt,Mt=H[0],ve=Ie[0],he=0,Re=0;ve>Mt==ve>-Mt?(Ct=Mt,Mt=H[++he]):(Ct=ve,ve=Ie[++Re]);let tt=0;if(he<le&&Re<re)for(ve>Mt==ve>-Mt?(ar=Mt+Ct,jt=Ct-(ar-Mt),Mt=H[++he]):(ar=ve+Ct,jt=Ct-(ar-ve),ve=Ie[++Re]),Ct=ar,jt!==0&&(Ye[tt++]=jt);he<le&&Re<re;)ve>Mt==ve>-Mt?(ar=Ct+Mt,wt=ar-Ct,jt=Ct-(ar-wt)+(Mt-wt),Mt=H[++he]):(ar=Ct+ve,wt=ar-Ct,jt=Ct-(ar-wt)+(ve-wt),ve=Ie[++Re]),Ct=ar,jt!==0&&(Ye[tt++]=jt);for(;he<le;)ar=Ct+Mt,wt=ar-Ct,jt=Ct-(ar-wt)+(Mt-wt),Mt=H[++he],Ct=ar,jt!==0&&(Ye[tt++]=jt);for(;Re<re;)ar=Ct+ve,wt=ar-Ct,jt=Ct-(ar-wt)+(ve-wt),ve=Ie[++Re],Ct=ar,jt!==0&&(Ye[tt++]=jt);return(Ct!==0||tt===0)&&(Ye[tt++]=Ct),tt}function ke(le,H){let re=H[0];for(let Ie=1;Ie<le;Ie++)re+=H[Ie];return re}function qe(le){return new Float64Array(le)}const ne=(3+16*_e)*_e,Ge=(2+12*_e)*_e,oe=(9+64*_e)*_e*_e,Fe=qe(4),ut=qe(8),Ae=qe(12),Le=qe(16),rt=qe(4);function ye(le,H,re,Ie,Ye,Ct,ar){let jt,wt,Mt,ve,he,Re,tt,St,Gt,gr,At,st,Pt,yr,Fr,Ft,Mn,ei;const ni=le-Ye,un=re-Ye,Xn=H-Ct,Wn=Ie-Ct;yr=ni*Wn,Re=He*ni,tt=Re-(Re-ni),St=ni-tt,Re=He*Wn,Gt=Re-(Re-Wn),gr=Wn-Gt,Fr=St*gr-(yr-tt*Gt-St*Gt-tt*gr),Ft=Xn*un,Re=He*Xn,tt=Re-(Re-Xn),St=Xn-tt,Re=He*un,Gt=Re-(Re-un),gr=un-Gt,Mn=St*gr-(Ft-tt*Gt-St*Gt-tt*gr),At=Fr-Mn,he=Fr-At,Fe[0]=Fr-(At+he)+(he-Mn),st=yr+At,he=st-yr,Pt=yr-(st-he)+(At-he),At=Pt-Ft,he=Pt-At,Fe[1]=Pt-(At+he)+(he-Ft),ei=st+At,he=ei-st,Fe[2]=st-(ei-he)+(At-he),Fe[3]=ei;let Jn=ke(4,Fe),sa=Ge*ar;if(Jn>=sa||-Jn>=sa||(he=le-ni,jt=le-(ni+he)+(he-Ye),he=re-un,Mt=re-(un+he)+(he-Ye),he=H-Xn,wt=H-(Xn+he)+(he-Ct),he=Ie-Wn,ve=Ie-(Wn+he)+(he-Ct),jt===0&&wt===0&&Mt===0&&ve===0)||(sa=oe*ar+Ke*Math.abs(Jn),Jn+=ni*ve+Wn*jt-(Xn*Mt+un*wt),Jn>=sa||-Jn>=sa))return Jn;yr=jt*Wn,Re=He*jt,tt=Re-(Re-jt),St=jt-tt,Re=He*Wn,Gt=Re-(Re-Wn),gr=Wn-Gt,Fr=St*gr-(yr-tt*Gt-St*Gt-tt*gr),Ft=wt*un,Re=He*wt,tt=Re-(Re-wt),St=wt-tt,Re=He*un,Gt=Re-(Re-un),gr=un-Gt,Mn=St*gr-(Ft-tt*Gt-St*Gt-tt*gr),At=Fr-Mn,he=Fr-At,rt[0]=Fr-(At+he)+(he-Mn),st=yr+At,he=st-yr,Pt=yr-(st-he)+(At-he),At=Pt-Ft,he=Pt-At,rt[1]=Pt-(At+he)+(he-Ft),ei=st+At,he=ei-st,rt[2]=st-(ei-he)+(At-he),rt[3]=ei;const vi=Et(4,Fe,4,rt,ut);yr=ni*ve,Re=He*ni,tt=Re-(Re-ni),St=ni-tt,Re=He*ve,Gt=Re-(Re-ve),gr=ve-Gt,Fr=St*gr-(yr-tt*Gt-St*Gt-tt*gr),Ft=Xn*Mt,Re=He*Xn,tt=Re-(Re-Xn),St=Xn-tt,Re=He*Mt,Gt=Re-(Re-Mt),gr=Mt-Gt,Mn=St*gr-(Ft-tt*Gt-St*Gt-tt*gr),At=Fr-Mn,he=Fr-At,rt[0]=Fr-(At+he)+(he-Mn),st=yr+At,he=st-yr,Pt=yr-(st-he)+(At-he),At=Pt-Ft,he=Pt-At,rt[1]=Pt-(At+he)+(he-Ft),ei=st+At,he=ei-st,rt[2]=st-(ei-he)+(At-he),rt[3]=ei;const ga=Et(vi,ut,4,rt,Ae);yr=jt*ve,Re=He*jt,tt=Re-(Re-jt),St=jt-tt,Re=He*ve,Gt=Re-(Re-ve),gr=ve-Gt,Fr=St*gr-(yr-tt*Gt-St*Gt-tt*gr),Ft=wt*Mt,Re=He*wt,tt=Re-(Re-wt),St=wt-tt,Re=He*Mt,Gt=Re-(Re-Mt),gr=Mt-Gt,Mn=St*gr-(Ft-tt*Gt-St*Gt-tt*gr),At=Fr-Mn,he=Fr-At,rt[0]=Fr-(At+he)+(he-Mn),st=yr+At,he=st-yr,Pt=yr-(st-he)+(At-he),At=Pt-Ft,he=Pt-At,rt[1]=Pt-(At+he)+(he-Ft),ei=st+At,he=ei-st,rt[2]=st-(ei-he)+(At-he),rt[3]=ei;const Ra=Et(ga,Ae,4,rt,Le);return Le[Ra-1]}function me(le,H,re,Ie,Ye,Ct){const ar=(H-Ct)*(re-Ye),jt=(le-Ye)*(Ie-Ct),wt=ar-jt,Mt=Math.abs(ar+jt);return Math.abs(wt)>=ne*Mt?wt:-ye(le,H,re,Ie,Ye,Ct,Mt)}const We=(le,H)=>le.x*H.y-le.y*H.x,Ve=(le,H)=>le.x*H.x+le.y*H.y,dt=(le,H,re)=>{const Ie=me(le.x,le.y,H.x,H.y,re.x,re.y);return Ie>0?-1:Ie<0?1:0},Ht=le=>Math.sqrt(Ve(le,le)),et=(le,H,re)=>{const Ie={x:H.x-le.x,y:H.y-le.y},Ye={x:re.x-le.x,y:re.y-le.y};return We(Ye,Ie)/Ht(Ye)/Ht(Ie)},$e=(le,H,re)=>{const Ie={x:H.x-le.x,y:H.y-le.y},Ye={x:re.x-le.x,y:re.y-le.y};return Ve(Ye,Ie)/Ht(Ye)/Ht(Ie)},Te=(le,H,re)=>H.y===0?null:{x:le.x+H.x/H.y*(re-le.y),y:re},Xe=(le,H,re)=>H.x===0?null:{x:re,y:le.y+H.y/H.x*(re-le.x)},pt=(le,H,re,Ie)=>{if(H.x===0)return Xe(re,Ie,le.x);if(Ie.x===0)return Xe(le,H,re.x);if(H.y===0)return Te(re,Ie,le.y);if(Ie.y===0)return Te(le,H,re.y);const Ye=We(H,Ie);if(Ye==0)return null;const Ct={x:re.x-le.x,y:re.y-le.y},ar=We(Ct,H)/Ye,jt=We(Ct,Ie)/Ye,wt=le.x+jt*H.x,Mt=re.x+ar*Ie.x,ve=le.y+jt*H.y,he=re.y+ar*Ie.y,Re=(wt+Mt)/2,tt=(ve+he)/2;return{x:Re,y:tt}};class Oe{static compare(H,re){const Ie=Oe.comparePoints(H.point,re.point);return Ie!==0?Ie:(H.point!==re.point&&H.link(re),H.isLeft!==re.isLeft?H.isLeft?1:-1:vt.compare(H.segment,re.segment))}static comparePoints(H,re){return H.x<re.x?-1:H.x>re.x?1:H.y<re.y?-1:H.y>re.y?1:0}constructor(H,re){H.events===void 0?H.events=[this]:H.events.push(this),this.point=H,this.isLeft=re}link(H){if(H.point===this.point)throw new Error("Tried to link already linked events");const re=H.point.events;for(let Ie=0,Ye=re.length;Ie<Ye;Ie++){const Ct=re[Ie];this.point.events.push(Ct),Ct.point=this.point}this.checkForConsuming()}checkForConsuming(){const H=this.point.events.length;for(let re=0;re<H;re++){const Ie=this.point.events[re];if(Ie.segment.consumedBy===void 0)for(let Ye=re+1;Ye<H;Ye++){const Ct=this.point.events[Ye];Ct.consumedBy===void 0&&Ie.otherSE.point.events===Ct.otherSE.point.events&&Ie.segment.consume(Ct.segment)}}}getAvailableLinkedEvents(){const H=[];for(let re=0,Ie=this.point.events.length;re<Ie;re++){const Ye=this.point.events[re];Ye!==this&&!Ye.segment.ringOut&&Ye.segment.isInResult()&&H.push(Ye)}return H}getLeftmostComparator(H){const re=new Map,Ie=Ye=>{const Ct=Ye.otherSE;re.set(Ye,{sine:et(this.point,H.point,Ct.point),cosine:$e(this.point,H.point,Ct.point)})};return(Ye,Ct)=>{re.has(Ye)||Ie(Ye),re.has(Ct)||Ie(Ct);const{sine:ar,cosine:jt}=re.get(Ye),{sine:wt,cosine:Mt}=re.get(Ct);return ar>=0&&wt>=0?jt<Mt?1:jt>Mt?-1:0:ar<0&&wt<0?jt<Mt?-1:jt>Mt?1:0:wt<ar?-1:wt>ar?1:0}}}let Be=0;class vt{static compare(H,re){const Ie=H.leftSE.point.x,Ye=re.leftSE.point.x,Ct=H.rightSE.point.x,ar=re.rightSE.point.x;if(ar<Ie)return 1;if(Ct<Ye)return-1;const jt=H.leftSE.point.y,wt=re.leftSE.point.y,Mt=H.rightSE.point.y,ve=re.rightSE.point.y;if(Ie<Ye){if(wt<jt&&wt<Mt)return 1;if(wt>jt&&wt>Mt)return-1;const he=H.comparePoint(re.leftSE.point);if(he<0)return 1;if(he>0)return-1;const Re=re.comparePoint(H.rightSE.point);return Re!==0?Re:-1}if(Ie>Ye){if(jt<wt&&jt<ve)return-1;if(jt>wt&&jt>ve)return 1;const he=re.comparePoint(H.leftSE.point);if(he!==0)return he;const Re=H.comparePoint(re.rightSE.point);return Re<0?1:Re>0?-1:1}if(jt<wt)return-1;if(jt>wt)return 1;if(Ct<ar){const he=re.comparePoint(H.rightSE.point);if(he!==0)return he}if(Ct>ar){const he=H.comparePoint(re.rightSE.point);if(he<0)return 1;if(he>0)return-1}if(Ct!==ar){const he=Mt-jt,Re=Ct-Ie,tt=ve-wt,St=ar-Ye;if(he>Re&&tt<St)return 1;if(he<Re&&tt>St)return-1}return Ct>ar?1:Ct<ar||Mt<ve?-1:Mt>ve?1:H.id<re.id?-1:H.id>re.id?1:0}constructor(H,re,Ie,Ye){this.id=++Be,this.leftSE=H,H.segment=this,H.otherSE=re,this.rightSE=re,re.segment=this,re.otherSE=H,this.rings=Ie,this.windings=Ye}static fromRing(H,re,Ie){let Ye,Ct,ar;const jt=Oe.comparePoints(H,re);if(jt<0)Ye=H,Ct=re,ar=1;else if(jt>0)Ye=re,Ct=H,ar=-1;else throw new Error(`Tried to create degenerate segment at [${H.x}, ${H.y}]`);const wt=new Oe(Ye,!0),Mt=new Oe(Ct,!1);return new vt(wt,Mt,[Ie],[ar])}replaceRightSE(H){this.rightSE=H,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const H=this.leftSE.point.y,re=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:H<re?H:re},ur:{x:this.rightSE.point.x,y:H>re?H:re}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(H){return H.x===this.leftSE.point.x&&H.y===this.leftSE.point.y||H.x===this.rightSE.point.x&&H.y===this.rightSE.point.y}comparePoint(H){if(this.isAnEndpoint(H))return 0;const re=this.leftSE.point,Ie=this.rightSE.point,Ye=this.vector();if(re.x===Ie.x)return H.x===re.x?0:H.x<re.x?1:-1;const Ct=(H.y-re.y)/Ye.y,ar=re.x+Ct*Ye.x;if(H.x===ar)return 0;const jt=(H.x-re.x)/Ye.x,wt=re.y+jt*Ye.y;return H.y===wt?0:H.y<wt?-1:1}getIntersection(H){const re=this.bbox(),Ie=H.bbox(),Ye=ze(re,Ie);if(Ye===null)return null;const Ct=this.leftSE.point,ar=this.rightSE.point,jt=H.leftSE.point,wt=H.rightSE.point,Mt=Se(re,jt)&&this.comparePoint(jt)===0,ve=Se(Ie,Ct)&&H.comparePoint(Ct)===0,he=Se(re,wt)&&this.comparePoint(wt)===0,Re=Se(Ie,ar)&&H.comparePoint(ar)===0;if(ve&&Mt)return Re&&!he?ar:!Re&&he?wt:null;if(ve)return he&&Ct.x===wt.x&&Ct.y===wt.y?null:Ct;if(Mt)return Re&&ar.x===jt.x&&ar.y===jt.y?null:jt;if(Re&&he)return null;if(Re)return ar;if(he)return wt;const tt=pt(Ct,this.vector(),jt,H.vector());return tt===null||!Se(Ye,tt)?null:xe.round(tt.x,tt.y)}split(H){const re=[],Ie=H.events!==void 0,Ye=new Oe(H,!0),Ct=new Oe(H,!1),ar=this.rightSE;this.replaceRightSE(Ct),re.push(Ct),re.push(Ye);const jt=new vt(Ye,ar,this.rings.slice(),this.windings.slice());return Oe.comparePoints(jt.leftSE.point,jt.rightSE.point)>0&&jt.swapEvents(),Oe.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Ie&&(Ye.checkForConsuming(),Ct.checkForConsuming()),re}swapEvents(){const H=this.rightSE;this.rightSE=this.leftSE,this.leftSE=H,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let re=0,Ie=this.windings.length;re<Ie;re++)this.windings[re]*=-1}consume(H){let re=this,Ie=H;for(;re.consumedBy;)re=re.consumedBy;for(;Ie.consumedBy;)Ie=Ie.consumedBy;const Ye=vt.compare(re,Ie);if(Ye!==0){if(Ye>0){const Ct=re;re=Ie,Ie=Ct}if(re.prev===Ie){const Ct=re;re=Ie,Ie=Ct}for(let Ct=0,ar=Ie.rings.length;Ct<ar;Ct++){const jt=Ie.rings[Ct],wt=Ie.windings[Ct],Mt=re.rings.indexOf(jt);Mt===-1?(re.rings.push(jt),re.windings.push(wt)):re.windings[Mt]+=wt}Ie.rings=null,Ie.windings=null,Ie.consumedBy=re,Ie.leftSE.consumedBy=re.leftSE,Ie.rightSE.consumedBy=re.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const H=this.prev.consumedBy||this.prev;this._beforeState=H.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const H=this.beforeState();this._afterState={rings:H.rings.slice(0),windings:H.windings.slice(0),multiPolys:[]};const re=this._afterState.rings,Ie=this._afterState.windings,Ye=this._afterState.multiPolys;for(let jt=0,wt=this.rings.length;jt<wt;jt++){const Mt=this.rings[jt],ve=this.windings[jt],he=re.indexOf(Mt);he===-1?(re.push(Mt),Ie.push(ve)):Ie[he]+=ve}const Ct=[],ar=[];for(let jt=0,wt=re.length;jt<wt;jt++){if(Ie[jt]===0)continue;const Mt=re[jt],ve=Mt.poly;if(ar.indexOf(ve)===-1)if(Mt.isExterior)Ct.push(ve);else{ar.indexOf(ve)===-1&&ar.push(ve);const he=Ct.indexOf(Mt.poly);he!==-1&&Ct.splice(he,1)}}for(let jt=0,wt=Ct.length;jt<wt;jt++){const Mt=Ct[jt].multiPoly;Ye.indexOf(Mt)===-1&&Ye.push(Mt)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const H=this.beforeState().multiPolys,re=this.afterState().multiPolys;switch(kt.type){case"union":{const Ie=H.length===0,Ye=re.length===0;this._isInResult=Ie!==Ye;break}case"intersection":{let Ie,Ye;H.length<re.length?(Ie=H.length,Ye=re.length):(Ie=re.length,Ye=H.length),this._isInResult=Ye===kt.numMultiPolys&&Ie<Ye;break}case"xor":{const Ie=Math.abs(H.length-re.length);this._isInResult=Ie%2===1;break}case"difference":{const Ie=Ye=>Ye.length===1&&Ye[0].isSubject;this._isInResult=Ie(H)!==Ie(re);break}default:throw new Error(`Unrecognized operation type found ${kt.type}`)}return this._isInResult}}class Rt{constructor(H,re,Ie){if(!Array.isArray(H)||H.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=re,this.isExterior=Ie,this.segments=[],typeof H[0][0]!="number"||typeof H[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const Ye=xe.round(H[0][0],H[0][1]);this.bbox={ll:{x:Ye.x,y:Ye.y},ur:{x:Ye.x,y:Ye.y}};let Ct=Ye;for(let ar=1,jt=H.length;ar<jt;ar++){if(typeof H[ar][0]!="number"||typeof H[ar][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let wt=xe.round(H[ar][0],H[ar][1]);wt.x===Ct.x&&wt.y===Ct.y||(this.segments.push(vt.fromRing(Ct,wt,this)),wt.x<this.bbox.ll.x&&(this.bbox.ll.x=wt.x),wt.y<this.bbox.ll.y&&(this.bbox.ll.y=wt.y),wt.x>this.bbox.ur.x&&(this.bbox.ur.x=wt.x),wt.y>this.bbox.ur.y&&(this.bbox.ur.y=wt.y),Ct=wt)}(Ye.x!==Ct.x||Ye.y!==Ct.y)&&this.segments.push(vt.fromRing(Ct,Ye,this))}getSweepEvents(){const H=[];for(let re=0,Ie=this.segments.length;re<Ie;re++){const Ye=this.segments[re];H.push(Ye.leftSE),H.push(Ye.rightSE)}return H}}class rr{constructor(H,re){if(!Array.isArray(H))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Rt(H[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let Ie=1,Ye=H.length;Ie<Ye;Ie++){const Ct=new Rt(H[Ie],this,!1);Ct.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ct.bbox.ll.x),Ct.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ct.bbox.ll.y),Ct.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ct.bbox.ur.x),Ct.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ct.bbox.ur.y),this.interiorRings.push(Ct)}this.multiPoly=re}getSweepEvents(){const H=this.exteriorRing.getSweepEvents();for(let re=0,Ie=this.interiorRings.length;re<Ie;re++){const Ye=this.interiorRings[re].getSweepEvents();for(let Ct=0,ar=Ye.length;Ct<ar;Ct++)H.push(Ye[Ct])}return H}}class br{constructor(H,re){if(!Array.isArray(H))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof H[0][0][0]=="number"&&(H=[H])}catch(Ie){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let Ie=0,Ye=H.length;Ie<Ye;Ie++){const Ct=new rr(H[Ie],this);Ct.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ct.bbox.ll.x),Ct.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ct.bbox.ll.y),Ct.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ct.bbox.ur.x),Ct.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ct.bbox.ur.y),this.polys.push(Ct)}this.isSubject=re}getSweepEvents(){const H=[];for(let re=0,Ie=this.polys.length;re<Ie;re++){const Ye=this.polys[re].getSweepEvents();for(let Ct=0,ar=Ye.length;Ct<ar;Ct++)H.push(Ye[Ct])}return H}}class lt{static factory(H){const re=[];for(let Ie=0,Ye=H.length;Ie<Ye;Ie++){const Ct=H[Ie];if(!Ct.isInResult()||Ct.ringOut)continue;let ar=null,jt=Ct.leftSE,wt=Ct.rightSE;const Mt=[jt],ve=jt.point,he=[];for(;ar=jt,jt=wt,Mt.push(jt),jt.point!==ve;)for(;;){const Re=jt.getAvailableLinkedEvents();if(Re.length===0){const Gt=Mt[0].point,gr=Mt[Mt.length-1].point;throw new Error(`Unable to complete output ring starting at [${Gt.x}, ${Gt.y}]. Last matching segment found ends at [${gr.x}, ${gr.y}].`)}if(Re.length===1){wt=Re[0].otherSE;break}let tt=null;for(let Gt=0,gr=he.length;Gt<gr;Gt++)if(he[Gt].point===jt.point){tt=Gt;break}if(tt!==null){const Gt=he.splice(tt)[0],gr=Mt.splice(Gt.index);gr.unshift(gr[0].otherSE),re.push(new lt(gr.reverse()));continue}he.push({index:Mt.length,point:jt.point});const St=jt.getLeftmostComparator(ar);wt=Re.sort(St)[0].otherSE;break}re.push(new lt(Mt))}return re}constructor(H){this.events=H;for(let re=0,Ie=H.length;re<Ie;re++)H[re].segment.ringOut=this;this.poly=null}getGeom(){let H=this.events[0].point;const re=[H];for(let Mt=1,ve=this.events.length-1;Mt<ve;Mt++){const he=this.events[Mt].point,Re=this.events[Mt+1].point;dt(he,H,Re)!==0&&(re.push(he),H=he)}if(re.length===1)return null;const Ie=re[0],Ye=re[1];dt(Ie,H,Ye)===0&&re.shift(),re.push(re[0]);const Ct=this.isExteriorRing()?1:-1,ar=this.isExteriorRing()?0:re.length-1,jt=this.isExteriorRing()?re.length:-1,wt=[];for(let Mt=ar;Mt!=jt;Mt+=Ct)wt.push([re[Mt].x,re[Mt].y]);return wt}isExteriorRing(){if(this._isExteriorRing===void 0){const H=this.enclosingRing();this._isExteriorRing=H?!H.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let H=this.events[0];for(let Ye=1,Ct=this.events.length;Ye<Ct;Ye++){const ar=this.events[Ye];Oe.compare(H,ar)>0&&(H=ar)}let re=H.segment.prevInResult(),Ie=re?re.prevInResult():null;for(;;){if(!re)return null;if(!Ie)return re.ringOut;if(Ie.ringOut!==re.ringOut)return Ie.ringOut.enclosingRing()!==re.ringOut?re.ringOut:re.ringOut.enclosingRing();re=Ie.prevInResult(),Ie=re?re.prevInResult():null}}}class an{constructor(H){this.exteriorRing=H,H.poly=this,this.interiorRings=[]}addInterior(H){this.interiorRings.push(H),H.poly=this}getGeom(){const H=[this.exteriorRing.getGeom()];if(H[0]===null)return null;for(let re=0,Ie=this.interiorRings.length;re<Ie;re++){const Ye=this.interiorRings[re].getGeom();Ye!==null&&H.push(Ye)}return H}}class $r{constructor(H){this.rings=H,this.polys=this._composePolys(H)}getGeom(){const H=[];for(let re=0,Ie=this.polys.length;re<Ie;re++){const Ye=this.polys[re].getGeom();Ye!==null&&H.push(Ye)}return H}_composePolys(H){const re=[];for(let Ie=0,Ye=H.length;Ie<Ye;Ie++){const Ct=H[Ie];if(!Ct.poly)if(Ct.isExteriorRing())re.push(new an(Ct));else{const ar=Ct.enclosingRing();ar.poly||re.push(new an(ar)),ar.poly.addInterior(Ct)}}return re}}class Xr{constructor(H){let re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vt.compare;this.queue=H,this.tree=new Ce(re),this.segments=[]}process(H){const re=H.segment,Ie=[];if(H.consumedBy)return H.isLeft?this.queue.remove(H.otherSE):this.tree.remove(re),Ie;const Ye=H.isLeft?this.tree.add(re):this.tree.find(re);if(!Ye)throw new Error(`Unable to find segment #${re.id} [${re.leftSE.point.x}, ${re.leftSE.point.y}] -> [${re.rightSE.point.x}, ${re.rightSE.point.y}] in SweepLine tree.`);let Ct=Ye,ar=Ye,jt,wt;for(;jt===void 0;)Ct=this.tree.prev(Ct),Ct===null?jt=null:Ct.key.consumedBy===void 0&&(jt=Ct.key);for(;wt===void 0;)ar=this.tree.next(ar),ar===null?wt=null:ar.key.consumedBy===void 0&&(wt=ar.key);if(H.isLeft){let Mt=null;if(jt){const he=jt.getIntersection(re);if(he!==null&&(re.isAnEndpoint(he)||(Mt=he),!jt.isAnEndpoint(he))){const Re=this._splitSafely(jt,he);for(let tt=0,St=Re.length;tt<St;tt++)Ie.push(Re[tt])}}let ve=null;if(wt){const he=wt.getIntersection(re);if(he!==null&&(re.isAnEndpoint(he)||(ve=he),!wt.isAnEndpoint(he))){const Re=this._splitSafely(wt,he);for(let tt=0,St=Re.length;tt<St;tt++)Ie.push(Re[tt])}}if(Mt!==null||ve!==null){let he=null;Mt===null?he=ve:ve===null?he=Mt:he=Oe.comparePoints(Mt,ve)<=0?Mt:ve,this.queue.remove(re.rightSE),Ie.push(re.rightSE);const Re=re.split(he);for(let tt=0,St=Re.length;tt<St;tt++)Ie.push(Re[tt])}Ie.length>0?(this.tree.remove(re),Ie.push(H)):(this.segments.push(re),re.prev=jt)}else{if(jt&&wt){const Mt=jt.getIntersection(wt);if(Mt!==null){if(!jt.isAnEndpoint(Mt)){const ve=this._splitSafely(jt,Mt);for(let he=0,Re=ve.length;he<Re;he++)Ie.push(ve[he])}if(!wt.isAnEndpoint(Mt)){const ve=this._splitSafely(wt,Mt);for(let he=0,Re=ve.length;he<Re;he++)Ie.push(ve[he])}}}this.tree.remove(re)}return Ie}_splitSafely(H,re){this.tree.remove(H);const Ie=H.rightSE;this.queue.remove(Ie);const Ye=H.split(re);return Ye.push(Ie),H.consumedBy===void 0&&this.tree.add(H),Ye}}const Nt=typeof W!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Kt=typeof W!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class or{run(H,re,Ie){kt.type=H,xe.reset();const Ye=[new br(re,!0)];for(let he=0,Re=Ie.length;he<Re;he++)Ye.push(new br(Ie[he],!1));if(kt.numMultiPolys=Ye.length,kt.type==="difference"){const he=Ye[0];let Re=1;for(;Re<Ye.length;)ze(Ye[Re].bbox,he.bbox)!==null?Re++:Ye.splice(Re,1)}if(kt.type==="intersection")for(let he=0,Re=Ye.length;he<Re;he++){const tt=Ye[he];for(let St=he+1,Gt=Ye.length;St<Gt;St++)if(ze(tt.bbox,Ye[St].bbox)===null)return[]}const Ct=new Ce(Oe.compare);for(let he=0,Re=Ye.length;he<Re;he++){const tt=Ye[he].getSweepEvents();for(let St=0,Gt=tt.length;St<Gt;St++)if(Ct.insert(tt[St]),Ct.size>Nt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const ar=new Xr(Ct);let jt=Ct.size,wt=Ct.pop();for(;wt;){const he=wt.key;if(Ct.size===jt){const tt=he.segment;throw new Error(`Unable to pop() ${he.isLeft?"left":"right"} SweepEvent [${he.point.x}, ${he.point.y}] from segment #${tt.id} [${tt.leftSE.point.x}, ${tt.leftSE.point.y}] -> [${tt.rightSE.point.x}, ${tt.rightSE.point.y}] from queue.`)}if(Ct.size>Nt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(ar.segments.length>Kt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const Re=ar.process(he);for(let tt=0,St=Re.length;tt<St;tt++){const Gt=Re[tt];Gt.consumedBy===void 0&&Ct.insert(Gt)}jt=Ct.size,wt=Ct.pop()}xe.reset();const Mt=lt.factory(ar.segments);return new $r(Mt).getGeom()}}const kt=new or;var zr={union:function(le){for(var H=arguments.length,re=new Array(H>1?H-1:0),Ie=1;Ie<H;Ie++)re[Ie-1]=arguments[Ie];return kt.run("union",le,re)},intersection:function(le){for(var H=arguments.length,re=new Array(H>1?H-1:0),Ie=1;Ie<H;Ie++)re[Ie-1]=arguments[Ie];return kt.run("intersection",le,re)},xor:function(le){for(var H=arguments.length,re=new Array(H>1?H-1:0),Ie=1;Ie<H;Ie++)re[Ie-1]=arguments[Ie];return kt.run("xor",le,re)},difference:function(le){for(var H=arguments.length,re=new Array(H>1?H-1:0),Ie=1;Ie<H;Ie++)re[Ie-1]=arguments[Ie];return kt.run("difference",le,re)}};return zr})},62273:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},W=N.default=k},27590:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},W=N.default=k},45598:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=G;var K=W(k(67294)),b=k(11805);function G(j){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=[];return K.default.Children.forEach(j,function(ie){ie==null&&!q.keepEmpty||(Array.isArray(ie)?Q=Q.concat(G(ie)):(0,b.isFragment)(ie)&&ie.props?Q=Q.concat(G(ie.props.children,q)):Q.push(ie))}),Q}},3481:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.isStyleSupport=j;var K=W(k(19158)),b=function(Q){if((0,K.default)()&&window.document.documentElement){var ie=Array.isArray(Q)?Q:[Q],te=window.document.documentElement;return ie.some(function(Ce){return Ce in te.style})}return!1},G=function(Q,ie){if(!b(Q))return!1;var te=document.createElement("div"),Ce=te.style[Q];return te.style[Q]=ie,te.style[Q]!==Ce};function j(q,Q){return!Array.isArray(q)&&Q!==void 0?G(q,Q):b(q)}},27712:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){var G=b.keyCode;if(b.altKey&&!b.ctrlKey||b.metaKey||G>=k.F1&&G<=k.F12)return!1;switch(G){case k.ALT:case k.CAPS_LOCK:case k.CONTEXT_MENU:case k.CTRL:case k.DOWN:case k.END:case k.ESC:case k.HOME:case k.INSERT:case k.LEFT:case k.MAC_FF_META:case k.META:case k.NUMLOCK:case k.NUM_CENTER:case k.PAGE_DOWN:case k.PAGE_UP:case k.PAUSE:case k.PRINT_SCREEN:case k.RIGHT:case k.SHIFT:case k.UP:case k.WIN_KEY:case k.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(b){if(b>=k.ZERO&&b<=k.NINE||b>=k.NUM_ZERO&&b<=k.NUM_MULTIPLY||b>=k.A&&b<=k.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&b===0)return!0;switch(b){case k.SPACE:case k.QUESTION_MARK:case k.NUM_PLUS:case k.NUM_MINUS:case k.NUM_PERIOD:case k.NUM_DIVISION:case k.SEMICOLON:case k.DASH:case k.EQUALS:case k.COMMA:case k.PERIOD:case k.SLASH:case k.APOSTROPHE:case k.SINGLE_QUOTE:case k.OPEN_SQUARE_BRACKET:case k.BACKSLASH:case k.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},W=N.default=k},18545:function(ft,N,k){"use strict";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=b;var K=W(k(67294));function b(G){var j=K.useRef();j.current=G;var q=K.useCallback(function(){for(var Q,ie=arguments.length,te=new Array(ie),Ce=0;Ce<ie;Ce++)te[Ce]=arguments[Ce];return(Q=j.current)===null||Q===void 0?void 0:Q.call.apply(Q,[j].concat(te))},[]);return q}},82546:function(ft,N,k){"use strict";var W=k(64836).default,K=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.useLayoutUpdateEffect=N.default=void 0;var b=K(k(67294)),G=W(k(19158)),j=(0,G.default)()?b.useLayoutEffect:b.useEffect,q=function(Ce,pe){var fe=b.useRef(!0);j(function(){return Ce(fe.current)},pe),j(function(){return fe.current=!1,function(){fe.current=!0}},[])},Q=N.useLayoutUpdateEffect=function(Ce,pe){q(function(fe){if(!fe)return Ce()},pe)},ie=N.default=q},67265:function(ft,N,k){"use strict";var W=k(75263).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=b;var K=W(k(67294));function b(G,j,q){var Q=K.useRef({});return(!("value"in Q.current)||q(Q.current.condition,j))&&(Q.current.value=G(),Q.current.condition=j),Q.current.value}},60869:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=Q;var K=W(k(27424)),b=W(k(18545)),G=k(82546),j=W(k(78423));function q(ie){return ie!==void 0}function Q(ie,te){var Ce=te||{},pe=Ce.defaultValue,fe=Ce.value,J=Ce.onChange,M=Ce.postState,E=(0,j.default)(function(){return q(fe)?fe:q(pe)?typeof pe=="function"?pe():pe:typeof ie=="function"?ie():ie}),ge=(0,K.default)(E,2),Se=ge[0],ze=ge[1],De=fe!==void 0?fe:Se,Ue=M?M(De):De,at=(0,b.default)(J),Je=(0,j.default)([De]),Ze=(0,K.default)(Je,2),xe=Ze[0],_e=Ze[1];(0,G.useLayoutUpdateEffect)(function(){var Ke=xe[0];Se!==Ke&&at(Se,Ke)},[xe]),(0,G.useLayoutUpdateEffect)(function(){q(fe)||ze(fe)},[fe]);var He=(0,b.default)(function(Ke,Et){ze(Ke,Et),_e([De],Et)});return[Ue,He]}},78423:function(ft,N,k){"use strict";var W=k(75263).default,K=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=j;var b=K(k(27424)),G=W(k(67294));function j(q){var Q=G.useRef(!1),ie=G.useState(q),te=(0,b.default)(ie,2),Ce=te[0],pe=te[1];G.useEffect(function(){return Q.current=!1,function(){Q.current=!0}},[]);function fe(J,M){M&&Q.current||pe(J)}return[Ce,fe]}},11102:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var K=W(k(18698)),b=W(k(45520));function G(q,Q){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,te=new Set;function Ce(pe,fe){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=te.has(pe);if((0,b.default)(!M,"Warning: There may be circular references"),M)return!1;if(pe===fe)return!0;if(ie&&J>1)return!1;te.add(pe);var E=J+1;if(Array.isArray(pe)){if(!Array.isArray(fe)||pe.length!==fe.length)return!1;for(var ge=0;ge<pe.length;ge++)if(!Ce(pe[ge],fe[ge],E))return!1;return!0}if(pe&&fe&&(0,K.default)(pe)==="object"&&(0,K.default)(fe)==="object"){var Se=Object.keys(pe);return Se.length!==Object.keys(fe).length?!1:Se.every(function(ze){return Ce(pe[ze],fe[ze],E)})}return!1}return Ce(q,Q)}var j=N.default=G},18475:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=b;var K=W(k(42122));function b(G,j){var q=(0,K.default)({},G);return Array.isArray(j)&&j.forEach(function(Q){delete q[Q]}),q}},75531:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.composeRef=Q,N.fillRef=q,N.supportNodeRef=Ce,N.supportRef=te,N.useComposeRef=ie;var K=W(k(18698)),b=k(67294),G=k(11805),j=W(k(67265));function q(pe,fe){typeof pe=="function"?pe(fe):(0,K.default)(pe)==="object"&&pe&&"current"in pe&&(pe.current=fe)}function Q(){for(var pe=arguments.length,fe=new Array(pe),J=0;J<pe;J++)fe[J]=arguments[J];var M=fe.filter(function(E){return E});return M.length<=1?M[0]:function(E){fe.forEach(function(ge){q(ge,E)})}}function ie(){for(var pe=arguments.length,fe=new Array(pe),J=0;J<pe;J++)fe[J]=arguments[J];return(0,j.default)(function(){return Q.apply(void 0,fe)},fe,function(M,E){return M.length!==E.length||M.every(function(ge,Se){return ge!==E[Se]})})}function te(pe){var fe,J,M=(0,G.isMemo)(pe)?pe.type.type:pe.type;return!(typeof M=="function"&&!((fe=M.prototype)!==null&&fe!==void 0&&fe.render)||typeof pe=="function"&&!((J=pe.prototype)!==null&&J!==void 0&&J.render))}function Ce(pe){return!(0,b.isValidElement)(pe)||(0,G.isFragment)(pe)?!1:te(pe)}},94787:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=k;function k(W,K){for(var b=W,G=0;G<K.length;G+=1){if(b==null)return;b=b[K[G]]}return b}},20059:function(ft,N,k){"use strict";var W=k(64836).default;Object.defineProperty(N,"__esModule",{value:!0}),N.default=ie,N.merge=fe;var K=W(k(18698)),b=W(k(42122)),G=W(k(861)),j=W(k(51589)),q=W(k(94787));function Q(J,M,E,ge){if(!M.length)return E;var Se=(0,j.default)(M),ze=Se[0],De=Se.slice(1),Ue;return!J&&typeof ze=="number"?Ue=[]:Array.isArray(J)?Ue=(0,G.default)(J):Ue=(0,b.default)({},J),ge&&E===void 0&&De.length===1?delete Ue[ze][De[0]]:Ue[ze]=Q(Ue[ze],De,E,ge),Ue}function ie(J,M,E){var ge=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return M.length&&ge&&E===void 0&&!(0,q.default)(J,M.slice(0,-1))?J:Q(J,M,E,ge)}function te(J){return(0,K.default)(J)==="object"&&J!==null&&Object.getPrototypeOf(J)===Object.prototype}function Ce(J){return Array.isArray(J)?[]:{}}var pe=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function fe(){for(var J=arguments.length,M=new Array(J),E=0;E<J;E++)M[E]=arguments[E];var ge=Ce(M[0]);return M.forEach(function(Se){function ze(De,Ue){var at=new Set(Ue),Je=(0,q.default)(Se,De),Ze=Array.isArray(Je);if(Ze||te(Je)){if(!at.has(Je)){at.add(Je);var xe=(0,q.default)(ge,De);Ze?ge=ie(ge,De,[]):(!xe||(0,K.default)(xe)!=="object")&&(ge=ie(ge,De,Ce(Je))),pe(Je).forEach(function(_e){ze([].concat((0,G.default)(De),[_e]),at)})}}else ge=ie(ge,De,Je)}ze([])}),ge}},24561:function(ft,N,k){"use strict";var W=k(67294);var K=function(){return K=Object.assign||function(J){for(var M,E=1,ge=arguments.length;E<ge;E++){M=arguments[E];for(var Se in M)Object.prototype.hasOwnProperty.call(M,Se)&&(J[Se]=M[Se])}return J},K.apply(this,arguments)};function b(fe,J){var M={};for(var E in fe)Object.prototype.hasOwnProperty.call(fe,E)&&J.indexOf(E)<0&&(M[E]=fe[E]);if(fe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ge=0,E=Object.getOwnPropertySymbols(fe);ge<E.length;ge++)J.indexOf(E[ge])<0&&Object.prototype.propertyIsEnumerable.call(fe,E[ge])&&(M[E[ge]]=fe[E[ge]]);return M}var G=function(){return Math.random().toString(36).substring(6)},j=function(fe){var J=fe.animate,M=fe.backgroundColor,E=fe.backgroundOpacity,ge=fe.baseUrl,Se=fe.children,ze=fe.foregroundColor,De=fe.foregroundOpacity,Ue=fe.gradientRatio,at=fe.uniqueKey,Je=fe.interval,Ze=fe.rtl,xe=fe.speed,_e=fe.style,He=fe.title,Ke=b(fe,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),Et=at||G(),ke=Et+"-diff",qe=Et+"-animated-diff",ne=Et+"-aria",Ge=Ze?{transform:"scaleX(-1)"}:null,oe="0; "+Je+"; 1",Fe=xe+"s";return(0,W.createElement)("svg",K({"aria-labelledby":ne,role:"img",style:K(K({},_e),Ge)},Ke),He?(0,W.createElement)("title",{id:ne},He):null,(0,W.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+ge+"#"+ke+")",style:{fill:"url("+ge+"#"+qe+")"}}),(0,W.createElement)("defs",{role:"presentation"},(0,W.createElement)("clipPath",{id:ke},Se),(0,W.createElement)("linearGradient",{id:qe},(0,W.createElement)("stop",{offset:"0%",stopColor:M,stopOpacity:E},J&&(0,W.createElement)("animate",{attributeName:"offset",values:-Ue+"; "+-Ue+"; 1",keyTimes:oe,dur:Fe,repeatCount:"indefinite"})),(0,W.createElement)("stop",{offset:"50%",stopColor:ze,stopOpacity:De},J&&(0,W.createElement)("animate",{attributeName:"offset",values:-Ue/2+"; "+-Ue/2+"; "+(1+Ue/2),keyTimes:oe,dur:Fe,repeatCount:"indefinite"})),(0,W.createElement)("stop",{offset:"100%",stopColor:M,stopOpacity:E},J&&(0,W.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+Ue),keyTimes:oe,dur:Fe,repeatCount:"indefinite"})))))};j.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var q=function(fe){return fe.children?(0,W.createElement)(j,K({},fe)):(0,W.createElement)(Q,K({},fe))},Q=function(fe){return(0,W.createElement)(q,K({viewBox:"0 0 476 124"},fe),(0,W.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,W.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,W.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,W.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,W.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,W.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},ie=function(fe){return createElement(q,K({viewBox:"0 0 400 460"},fe),createElement("circle",{cx:"31",cy:"31",r:"15"}),createElement("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},te=function(fe){return createElement(q,K({viewBox:"0 0 340 84"},fe),createElement("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),createElement("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),createElement("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),createElement("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},Ce=function(fe){return createElement(q,K({viewBox:"0 0 400 110"},fe),createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),createElement("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),createElement("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},pe=function(fe){return createElement(q,K({viewBox:"0 0 245 125"},fe),createElement("circle",{cx:"10",cy:"20",r:"8"}),createElement("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"50",r:"8"}),createElement("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"80",r:"8"}),createElement("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"110",r:"8"}),createElement("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))};N.ZP=q},28660:function(ft,N,k){var W=k(34155);var K;(function(b){(function(G){var j=typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),q=Q(b);typeof j.Reflect=="undefined"?j.Reflect=b:q=Q(j.Reflect,q),G(q);function Q(ie,te){return function(Ce,pe){typeof ie[Ce]!="function"&&Object.defineProperty(ie,Ce,{configurable:!0,writable:!0,value:pe}),te&&te(Ce,pe)}}})(function(G){var j=Object.prototype.hasOwnProperty,q=typeof Symbol=="function",Q=q&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",ie=q&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",te=typeof Object.create=="function",Ce={__proto__:[]}instanceof Array,pe=!te&&!Ce,fe={create:te?function(){return or(Object.create(null))}:Ce?function(){return or({__proto__:null})}:function(){return or({})},has:pe?function(kt,Jt){return j.call(kt,Jt)}:function(kt,Jt){return Jt in kt},get:pe?function(kt,Jt){return j.call(kt,Jt)?kt[Jt]:void 0}:function(kt,Jt){return kt[Jt]}},J=Object.getPrototypeOf(Function),M=typeof W=="object"&&W["env"]&&W["env"].REFLECT_METADATA_USE_MAP_POLYFILL==="true",E=!M&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Xr(),ge=!M&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Nt(),Se=!M&&typeof WeakMap=="function"?WeakMap:Kt(),ze=new Se;function De(kt,Jt,Er,wr){if(me(Er)){if(!pt(kt))throw new TypeError;if(!Be(Jt))throw new TypeError;return ke(kt,Jt)}else{if(!pt(kt))throw new TypeError;if(!dt(Jt))throw new TypeError;if(!dt(wr)&&!me(wr)&&!We(wr))throw new TypeError;return We(wr)&&(wr=void 0),Er=Xe(Er),qe(kt,Jt,Er,wr)}}G("decorate",De);function Ue(kt,Jt){function Er(wr,Br){if(!dt(wr))throw new TypeError;if(!me(Br)&&!vt(Br))throw new TypeError;Ae(kt,Jt,wr,Br)}return Er}G("metadata",Ue);function at(kt,Jt,Er,wr){if(!dt(Er))throw new TypeError;return me(wr)||(wr=Xe(wr)),Ae(kt,Jt,Er,wr)}G("defineMetadata",at);function Je(kt,Jt,Er){if(!dt(Jt))throw new TypeError;return me(Er)||(Er=Xe(Er)),Ge(kt,Jt,Er)}G("hasMetadata",Je);function Ze(kt,Jt,Er){if(!dt(Jt))throw new TypeError;return me(Er)||(Er=Xe(Er)),oe(kt,Jt,Er)}G("hasOwnMetadata",Ze);function xe(kt,Jt,Er){if(!dt(Jt))throw new TypeError;return me(Er)||(Er=Xe(Er)),Fe(kt,Jt,Er)}G("getMetadata",xe);function _e(kt,Jt,Er){if(!dt(Jt))throw new TypeError;return me(Er)||(Er=Xe(Er)),ut(kt,Jt,Er)}G("getOwnMetadata",_e);function He(kt,Jt){if(!dt(kt))throw new TypeError;return me(Jt)||(Jt=Xe(Jt)),Le(kt,Jt)}G("getMetadataKeys",He);function Ke(kt,Jt){if(!dt(kt))throw new TypeError;return me(Jt)||(Jt=Xe(Jt)),rt(kt,Jt)}G("getOwnMetadataKeys",Ke);function Et(kt,Jt,Er){if(!dt(Jt))throw new TypeError;me(Er)||(Er=Xe(Er));var wr=ne(Jt,Er,!1);if(me(wr)||!wr.delete(kt))return!1;if(wr.size>0)return!0;var Br=ze.get(Jt);return Br.delete(Er),Br.size>0||ze.delete(Jt),!0}G("deleteMetadata",Et);function ke(kt,Jt){for(var Er=kt.length-1;Er>=0;--Er){var wr=kt[Er],Br=wr(Jt);if(!me(Br)&&!We(Br)){if(!Be(Br))throw new TypeError;Jt=Br}}return Jt}function qe(kt,Jt,Er,wr){for(var Br=kt.length-1;Br>=0;--Br){var zr=kt[Br],le=zr(Jt,Er,wr);if(!me(le)&&!We(le)){if(!dt(le))throw new TypeError;wr=le}}return wr}function ne(kt,Jt,Er){var wr=ze.get(kt);if(me(wr)){if(!Er)return;wr=new E,ze.set(kt,wr)}var Br=wr.get(Jt);if(me(Br)){if(!Er)return;Br=new E,wr.set(Jt,Br)}return Br}function Ge(kt,Jt,Er){var wr=oe(kt,Jt,Er);if(wr)return!0;var Br=$r(Jt);return We(Br)?!1:Ge(kt,Br,Er)}function oe(kt,Jt,Er){var wr=ne(Jt,Er,!1);return me(wr)?!1:$e(wr.has(kt))}function Fe(kt,Jt,Er){var wr=oe(kt,Jt,Er);if(wr)return ut(kt,Jt,Er);var Br=$r(Jt);if(!We(Br))return Fe(kt,Br,Er)}function ut(kt,Jt,Er){var wr=ne(Jt,Er,!1);if(!me(wr))return wr.get(kt)}function Ae(kt,Jt,Er,wr){var Br=ne(Er,wr,!0);Br.set(kt,Jt)}function Le(kt,Jt){var Er=rt(kt,Jt),wr=$r(kt);if(wr===null)return Er;var Br=Le(wr,Jt);if(Br.length<=0)return Er;if(Er.length<=0)return Br;for(var zr=new ge,le=[],H=0,re=Er;H<re.length;H++){var Ie=re[H],Ye=zr.has(Ie);Ye||(zr.add(Ie),le.push(Ie))}for(var Ct=0,ar=Br;Ct<ar.length;Ct++){var Ie=ar[Ct],Ye=zr.has(Ie);Ye||(zr.add(Ie),le.push(Ie))}return le}function rt(kt,Jt){var Er=[],wr=ne(kt,Jt,!1);if(me(wr))return Er;for(var Br=wr.keys(),zr=rr(Br),le=0;;){var H=lt(zr);if(!H)return Er.length=le,Er;var re=br(H);try{Er[le]=re}catch(Ie){try{an(zr)}finally{throw Ie}}le++}}function ye(kt){if(kt===null)return 1;switch(typeof kt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return kt===null?1:6;default:return 6}}function me(kt){return kt===void 0}function We(kt){return kt===null}function Ve(kt){return typeof kt=="symbol"}function dt(kt){return typeof kt=="object"?kt!==null:typeof kt=="function"}function Ht(kt,Jt){switch(ye(kt)){case 0:return kt;case 1:return kt;case 2:return kt;case 3:return kt;case 4:return kt;case 5:return kt}var Er=Jt===3?"string":Jt===5?"number":"default",wr=Rt(kt,Q);if(wr!==void 0){var Br=wr.call(kt,Er);if(dt(Br))throw new TypeError;return Br}return et(kt,Er==="default"?"number":Er)}function et(kt,Jt){if(Jt==="string"){var Er=kt.toString;if(Oe(Er)){var wr=Er.call(kt);if(!dt(wr))return wr}var Br=kt.valueOf;if(Oe(Br)){var wr=Br.call(kt);if(!dt(wr))return wr}}else{var Br=kt.valueOf;if(Oe(Br)){var wr=Br.call(kt);if(!dt(wr))return wr}var zr=kt.toString;if(Oe(zr)){var wr=zr.call(kt);if(!dt(wr))return wr}}throw new TypeError}function $e(kt){return!!kt}function Te(kt){return""+kt}function Xe(kt){var Jt=Ht(kt,3);return Ve(Jt)?Jt:Te(Jt)}function pt(kt){return Array.isArray?Array.isArray(kt):kt instanceof Object?kt instanceof Array:Object.prototype.toString.call(kt)==="[object Array]"}function Oe(kt){return typeof kt=="function"}function Be(kt){return typeof kt=="function"}function vt(kt){switch(ye(kt)){case 3:return!0;case 4:return!0;default:return!1}}function Rt(kt,Jt){var Er=kt[Jt];if(Er!=null){if(!Oe(Er))throw new TypeError;return Er}}function rr(kt){var Jt=Rt(kt,ie);if(!Oe(Jt))throw new TypeError;var Er=Jt.call(kt);if(!dt(Er))throw new TypeError;return Er}function br(kt){return kt.value}function lt(kt){var Jt=kt.next();return Jt.done?!1:Jt}function an(kt){var Jt=kt.return;Jt&&Jt.call(kt)}function $r(kt){var Jt=Object.getPrototypeOf(kt);if(typeof kt!="function"||kt===J||Jt!==J)return Jt;var Er=kt.prototype,wr=Er&&Object.getPrototypeOf(Er);if(wr==null||wr===Object.prototype)return Jt;var Br=wr.constructor;return typeof Br!="function"||Br===kt?Jt:Br}function Xr(){var kt={},Jt=[],Er=function(){function le(H,re,Ie){this._index=0,this._keys=H,this._values=re,this._selector=Ie}return le.prototype["@@iterator"]=function(){return this},le.prototype[ie]=function(){return this},le.prototype.next=function(){var H=this._index;if(H>=0&&H<this._keys.length){var re=this._selector(this._keys[H],this._values[H]);return H+1>=this._keys.length?(this._index=-1,this._keys=Jt,this._values=Jt):this._index++,{value:re,done:!1}}return{value:void 0,done:!0}},le.prototype.throw=function(H){throw this._index>=0&&(this._index=-1,this._keys=Jt,this._values=Jt),H},le.prototype.return=function(H){return this._index>=0&&(this._index=-1,this._keys=Jt,this._values=Jt),{value:H,done:!0}},le}();return function(){function le(){this._keys=[],this._values=[],this._cacheKey=kt,this._cacheIndex=-2}return Object.defineProperty(le.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),le.prototype.has=function(H){return this._find(H,!1)>=0},le.prototype.get=function(H){var re=this._find(H,!1);return re>=0?this._values[re]:void 0},le.prototype.set=function(H,re){var Ie=this._find(H,!0);return this._values[Ie]=re,this},le.prototype.delete=function(H){var re=this._find(H,!1);if(re>=0){for(var Ie=this._keys.length,Ye=re+1;Ye<Ie;Ye++)this._keys[Ye-1]=this._keys[Ye],this._values[Ye-1]=this._values[Ye];return this._keys.length--,this._values.length--,H===this._cacheKey&&(this._cacheKey=kt,this._cacheIndex=-2),!0}return!1},le.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=kt,this._cacheIndex=-2},le.prototype.keys=function(){return new Er(this._keys,this._values,wr)},le.prototype.values=function(){return new Er(this._keys,this._values,Br)},le.prototype.entries=function(){return new Er(this._keys,this._values,zr)},le.prototype["@@iterator"]=function(){return this.entries()},le.prototype[ie]=function(){return this.entries()},le.prototype._find=function(H,re){return this._cacheKey!==H&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=H)),this._cacheIndex<0&&re&&(this._cacheIndex=this._keys.length,this._keys.push(H),this._values.push(void 0)),this._cacheIndex},le}();function wr(le,H){return le}function Br(le,H){return H}function zr(le,H){return[le,H]}}function Nt(){return function(){function kt(){this._map=new E}return Object.defineProperty(kt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),kt.prototype.has=function(Jt){return this._map.has(Jt)},kt.prototype.add=function(Jt){return this._map.set(Jt,Jt),this},kt.prototype.delete=function(Jt){return this._map.delete(Jt)},kt.prototype.clear=function(){this._map.clear()},kt.prototype.keys=function(){return this._map.keys()},kt.prototype.values=function(){return this._map.values()},kt.prototype.entries=function(){return this._map.entries()},kt.prototype["@@iterator"]=function(){return this.keys()},kt.prototype[ie]=function(){return this.keys()},kt}()}function Kt(){var kt=16,Jt=fe.create(),Er=wr();return function(){function re(){this._key=wr()}return re.prototype.has=function(Ie){var Ye=Br(Ie,!1);return Ye!==void 0?fe.has(Ye,this._key):!1},re.prototype.get=function(Ie){var Ye=Br(Ie,!1);return Ye!==void 0?fe.get(Ye,this._key):void 0},re.prototype.set=function(Ie,Ye){var Ct=Br(Ie,!0);return Ct[this._key]=Ye,this},re.prototype.delete=function(Ie){var Ye=Br(Ie,!1);return Ye!==void 0?delete Ye[this._key]:!1},re.prototype.clear=function(){this._key=wr()},re}();function wr(){var re;do re="@@WeakMap@@"+H();while(fe.has(Jt,re));return Jt[re]=!0,re}function Br(re,Ie){if(!j.call(re,Er)){if(!Ie)return;Object.defineProperty(re,Er,{value:fe.create()})}return re[Er]}function zr(re,Ie){for(var Ye=0;Ye<Ie;++Ye)re[Ye]=Math.random()*255|0;return re}function le(re){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(re)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(re)):zr(new Uint8Array(re),re):zr(new Array(re),re)}function H(){var re=le(kt);re[6]=re[6]&79|64,re[8]=re[8]&191|128;for(var Ie="",Ye=0;Ye<kt;++Ye){var Ct=re[Ye];(Ye===4||Ye===6||Ye===8)&&(Ie+="-"),Ct<16&&(Ie+="0"),Ie+=Ct.toString(16).toLowerCase()}return Ie}}function or(kt){return kt.__=void 0,delete kt.__,kt}})})(K||(K={}))},55168:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.SizeSensorId=N.SensorTabIndex=N.SensorClassName=void 0;var k="size-sensor-id";N.SizeSensorId=k;var W="size-sensor-object";N.SensorClassName=W;var K="-1";N.SensorTabIndex=K},12177:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k=function(K){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,G=null;return function(){for(var j=this,q=arguments.length,Q=new Array(q),ie=0;ie<q;ie++)Q[ie]=arguments[ie];clearTimeout(G),G=setTimeout(function(){K.apply(j,Q)},b)}};N.default=k},15378:function(ft,N){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var k=1,W=function(){return"".concat(k++)};N.default=W},18587:function(ft,N,k){"use strict";var W;W={value:!0},W=W=N.ak=void 0;var K=k(12955),b=function(Q,ie){var te=(0,K.getSensor)(Q);return te.bind(ie),function(){te.unbind(ie)}};N.ak=b;var G=function(Q){var ie=(0,K.getSensor)(Q);(0,K.removeSensor)(ie)};W=G;var j="1.0.2";W=j},12955:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.removeSensor=N.getSensor=N.Sensors=void 0;var W=G(k(15378)),K=k(82578),b=k(55168);function G(te){return te&&te.__esModule?te:{default:te}}var j={};N.Sensors=j;function q(te){te&&j[te]&&delete j[te]}var Q=function(Ce){var pe=Ce.getAttribute(b.SizeSensorId);if(pe&&j[pe])return j[pe];var fe=(0,W.default)();Ce.setAttribute(b.SizeSensorId,fe);var J=(0,K.createSensor)(Ce,function(){return q(fe)});return j[fe]=J,J};N.getSensor=Q;var ie=function(Ce){var pe=Ce.element.getAttribute(b.SizeSensorId);Ce.destroy(),q(pe)};N.removeSensor=ie},82578:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var W=k(27643),K=k(31743),b=typeof ResizeObserver!="undefined"?K.createSensor:W.createSensor;N.createSensor=b},27643:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var W=b(k(12177)),K=k(55168);function b(j){return j&&j.__esModule?j:{default:j}}var G=function(q,Q){var ie=void 0,te=[],Ce=function(){getComputedStyle(q).position==="static"&&(q.style.position="relative");var ge=document.createElement("object");return ge.onload=function(){ge.contentDocument.defaultView.addEventListener("resize",pe),pe()},ge.style.display="block",ge.style.position="absolute",ge.style.top="0",ge.style.left="0",ge.style.height="100%",ge.style.width="100%",ge.style.overflow="hidden",ge.style.pointerEvents="none",ge.style.zIndex="-1",ge.style.opacity="0",ge.setAttribute("class",K.SensorClassName),ge.setAttribute("tabindex",K.SensorTabIndex),ge.type="text/html",q.appendChild(ge),ge.data="about:blank",ge},pe=(0,W.default)(function(){te.forEach(function(E){E(q)})}),fe=function(ge){ie||(ie=Ce()),te.indexOf(ge)===-1&&te.push(ge)},J=function(){ie&&ie.parentNode&&(ie.contentDocument&&ie.contentDocument.defaultView.removeEventListener("resize",pe),ie.parentNode.removeChild(ie),q.removeAttribute(K.SizeSensorId),ie=void 0,te=[],Q&&Q())},M=function(ge){var Se=te.indexOf(ge);Se!==-1&&te.splice(Se,1),te.length===0&&ie&&J()};return{element:q,bind:fe,destroy:J,unbind:M}};N.createSensor=G},31743:function(ft,N,k){"use strict";Object.defineProperty(N,"__esModule",{value:!0}),N.createSensor=void 0;var W=k(55168),K=b(k(12177));function b(j){return j&&j.__esModule?j:{default:j}}var G=function(q,Q){var ie=void 0,te=[],Ce=(0,K.default)(function(){te.forEach(function(E){E(q)})}),pe=function(){var ge=new ResizeObserver(Ce);return ge.observe(q),Ce(),ge},fe=function(ge){ie||(ie=pe()),te.indexOf(ge)===-1&&te.push(ge)},J=function(){ie.disconnect(),te=[],ie=void 0,q.removeAttribute(W.SizeSensorId),Q&&Q()},M=function(ge){var Se=te.indexOf(ge);Se!==-1&&te.splice(Se,1),te.length===0&&ie&&J()};return{element:q,bind:fe,destroy:J,unbind:M}};N.createSensor=G},69848:function(ft){(function(N,k){ft.exports=k()})(this,function(){"use strict";function N(Ze,xe,_e,He,Ke,Et){if(!(Ke-He<=_e)){var ke=He+Ke>>1;k(Ze,xe,ke,He,Ke,Et%2),N(Ze,xe,_e,He,ke-1,Et+1),N(Ze,xe,_e,ke+1,Ke,Et+1)}}function k(Ze,xe,_e,He,Ke,Et){for(;Ke>He;){if(Ke-He>600){var ke=Ke-He+1,qe=_e-He+1,ne=Math.log(ke),Ge=.5*Math.exp(2*ne/3),oe=.5*Math.sqrt(ne*Ge*(ke-Ge)/ke)*(qe-ke/2<0?-1:1),Fe=Math.max(He,Math.floor(_e-qe*Ge/ke+oe)),ut=Math.min(Ke,Math.floor(_e+(ke-qe)*Ge/ke+oe));k(Ze,xe,_e,Fe,ut,Et)}var Ae=xe[2*_e+Et],Le=He,rt=Ke;for(W(Ze,xe,He,_e),xe[2*Ke+Et]>Ae&&W(Ze,xe,He,Ke);Le<rt;){for(W(Ze,xe,Le,rt),Le++,rt--;xe[2*Le+Et]<Ae;)Le++;for(;xe[2*rt+Et]>Ae;)rt--}xe[2*He+Et]===Ae?W(Ze,xe,He,rt):(rt++,W(Ze,xe,rt,Ke)),rt<=_e&&(He=rt+1),_e<=rt&&(Ke=rt-1)}}function W(Ze,xe,_e,He){K(Ze,_e,He),K(xe,2*_e,2*He),K(xe,2*_e+1,2*He+1)}function K(Ze,xe,_e){var He=Ze[xe];Ze[xe]=Ze[_e],Ze[_e]=He}function b(Ze,xe,_e,He,Ke,Et,ke){for(var qe=[0,Ze.length-1,0],ne=[],Ge,oe;qe.length;){var Fe=qe.pop(),ut=qe.pop(),Ae=qe.pop();if(ut-Ae<=ke){for(var Le=Ae;Le<=ut;Le++)Ge=xe[2*Le],oe=xe[2*Le+1],Ge>=_e&&Ge<=Ke&&oe>=He&&oe<=Et&&ne.push(Ze[Le]);continue}var rt=Math.floor((Ae+ut)/2);Ge=xe[2*rt],oe=xe[2*rt+1],Ge>=_e&&Ge<=Ke&&oe>=He&&oe<=Et&&ne.push(Ze[rt]);var ye=(Fe+1)%2;(Fe===0?_e<=Ge:He<=oe)&&(qe.push(Ae),qe.push(rt-1),qe.push(ye)),(Fe===0?Ke>=Ge:Et>=oe)&&(qe.push(rt+1),qe.push(ut),qe.push(ye))}return ne}function G(Ze,xe,_e,He,Ke,Et){for(var ke=[0,Ze.length-1,0],qe=[],ne=Ke*Ke;ke.length;){var Ge=ke.pop(),oe=ke.pop(),Fe=ke.pop();if(oe-Fe<=Et){for(var ut=Fe;ut<=oe;ut++)j(xe[2*ut],xe[2*ut+1],_e,He)<=ne&&qe.push(Ze[ut]);continue}var Ae=Math.floor((Fe+oe)/2),Le=xe[2*Ae],rt=xe[2*Ae+1];j(Le,rt,_e,He)<=ne&&qe.push(Ze[Ae]);var ye=(Ge+1)%2;(Ge===0?_e-Ke<=Le:He-Ke<=rt)&&(ke.push(Fe),ke.push(Ae-1),ke.push(ye)),(Ge===0?_e+Ke>=Le:He+Ke>=rt)&&(ke.push(Ae+1),ke.push(oe),ke.push(ye))}return qe}function j(Ze,xe,_e,He){var Ke=Ze-_e,Et=xe-He;return Ke*Ke+Et*Et}var q=function(Ze){return Ze[0]},Q=function(Ze){return Ze[1]},ie=function(xe,_e,He,Ke,Et){_e===void 0&&(_e=q),He===void 0&&(He=Q),Ke===void 0&&(Ke=64),Et===void 0&&(Et=Float64Array),this.nodeSize=Ke,this.points=xe;for(var ke=xe.length<65536?Uint16Array:Uint32Array,qe=this.ids=new ke(xe.length),ne=this.coords=new Et(xe.length*2),Ge=0;Ge<xe.length;Ge++)qe[Ge]=Ge,ne[2*Ge]=_e(xe[Ge]),ne[2*Ge+1]=He(xe[Ge]);N(qe,ne,Ke,0,qe.length-1,0)};ie.prototype.range=function(xe,_e,He,Ke){return b(this.ids,this.coords,xe,_e,He,Ke,this.nodeSize)},ie.prototype.within=function(xe,_e,He){return G(this.ids,this.coords,xe,_e,He,this.nodeSize)};var te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ze){return Ze}},Ce=Math.fround||function(Ze){return function(xe){return Ze[0]=+xe,Ze[0]}}(new Float32Array(1)),pe=function(xe){this.options=Ue(Object.create(te),xe),this.trees=new Array(this.options.maxZoom+1)};pe.prototype.load=function(xe){var _e=this.options,He=_e.log,Ke=_e.minZoom,Et=_e.maxZoom,ke=_e.nodeSize;He&&console.time("total time");var qe="prepare "+xe.length+" points";He&&console.time(qe),this.points=xe;for(var ne=[],Ge=0;Ge<xe.length;Ge++)xe[Ge].geometry&&ne.push(J(xe[Ge],Ge));this.trees[Et+1]=new ie(ne,at,Je,ke,Float32Array),He&&console.timeEnd(qe);for(var oe=Et;oe>=Ke;oe--){var Fe=+Date.now();ne=this._cluster(ne,oe),this.trees[oe]=new ie(ne,at,Je,ke,Float32Array),He&&console.log("z%d: %d clusters in %dms",oe,ne.length,+Date.now()-Fe)}return He&&console.timeEnd("total time"),this},pe.prototype.getClusters=function(xe,_e){var He=((xe[0]+180)%360+360)%360-180,Ke=Math.max(-90,Math.min(90,xe[1])),Et=xe[2]===180?180:((xe[2]+180)%360+360)%360-180,ke=Math.max(-90,Math.min(90,xe[3]));if(xe[2]-xe[0]>=360)He=-180,Et=180;else if(He>Et){var qe=this.getClusters([He,Ke,180,ke],_e),ne=this.getClusters([-180,Ke,Et,ke],_e);return qe.concat(ne)}for(var Ge=this.trees[this._limitZoom(_e)],oe=Ge.range(ge(He),Se(ke),ge(Et),Se(Ke)),Fe=[],ut=0,Ae=oe;ut<Ae.length;ut+=1){var Le=Ae[ut],rt=Ge.points[Le];Fe.push(rt.numPoints?M(rt):this.points[rt.index])}return Fe},pe.prototype.getChildren=function(xe){var _e=this._getOriginId(xe),He=this._getOriginZoom(xe),Ke="No cluster with the specified id.",Et=this.trees[He];if(!Et)throw new Error(Ke);var ke=Et.points[_e];if(!ke)throw new Error(Ke);for(var qe=this.options.radius/(this.options.extent*Math.pow(2,He-1)),ne=Et.within(ke.x,ke.y,qe),Ge=[],oe=0,Fe=ne;oe<Fe.length;oe+=1){var ut=Fe[oe],Ae=Et.points[ut];Ae.parentId===xe&&Ge.push(Ae.numPoints?M(Ae):this.points[Ae.index])}if(Ge.length===0)throw new Error(Ke);return Ge},pe.prototype.getLeaves=function(xe,_e,He){_e=_e||10,He=He||0;var Ke=[];return this._appendLeaves(Ke,xe,_e,He,0),Ke},pe.prototype.getTile=function(xe,_e,He){var Ke=this.trees[this._limitZoom(xe)],Et=Math.pow(2,xe),ke=this.options,qe=ke.extent,ne=ke.radius,Ge=ne/qe,oe=(He-Ge)/Et,Fe=(He+1+Ge)/Et,ut={features:[]};return this._addTileFeatures(Ke.range((_e-Ge)/Et,oe,(_e+1+Ge)/Et,Fe),Ke.points,_e,He,Et,ut),_e===0&&this._addTileFeatures(Ke.range(1-Ge/Et,oe,1,Fe),Ke.points,Et,He,Et,ut),_e===Et-1&&this._addTileFeatures(Ke.range(0,oe,Ge/Et,Fe),Ke.points,-1,He,Et,ut),ut.features.length?ut:null},pe.prototype.getClusterExpansionZoom=function(xe){for(var _e=this._getOriginZoom(xe)-1;_e<=this.options.maxZoom;){var He=this.getChildren(xe);if(_e++,He.length!==1)break;xe=He[0].properties.cluster_id}return _e},pe.prototype._appendLeaves=function(xe,_e,He,Ke,Et){for(var ke=this.getChildren(_e),qe=0,ne=ke;qe<ne.length;qe+=1){var Ge=ne[qe],oe=Ge.properties;if(oe&&oe.cluster?Et+oe.point_count<=Ke?Et+=oe.point_count:Et=this._appendLeaves(xe,oe.cluster_id,He,Ke,Et):Et<Ke?Et++:xe.push(Ge),xe.length===He)break}return Et},pe.prototype._addTileFeatures=function(xe,_e,He,Ke,Et,ke){for(var qe=0,ne=xe;qe<ne.length;qe+=1){var Ge=ne[qe],oe=_e[Ge],Fe=oe.numPoints,ut=void 0,Ae=void 0,Le=void 0;if(Fe)ut=E(oe),Ae=oe.x,Le=oe.y;else{var rt=this.points[oe.index];ut=rt.properties,Ae=ge(rt.geometry.coordinates[0]),Le=Se(rt.geometry.coordinates[1])}var ye={type:1,geometry:[[Math.round(this.options.extent*(Ae*Et-He)),Math.round(this.options.extent*(Le*Et-Ke))]],tags:ut},me=void 0;Fe?me=oe.id:this.options.generateId?me=oe.index:this.points[oe.index].id&&(me=this.points[oe.index].id),me!==void 0&&(ye.id=me),ke.features.push(ye)}},pe.prototype._limitZoom=function(xe){return Math.max(this.options.minZoom,Math.min(Math.floor(+xe),this.options.maxZoom+1))},pe.prototype._cluster=function(xe,_e){for(var He=[],Ke=this.options,Et=Ke.radius,ke=Ke.extent,qe=Ke.reduce,ne=Ke.minPoints,Ge=Et/(ke*Math.pow(2,_e)),oe=0;oe<xe.length;oe++){var Fe=xe[oe];if(!(Fe.zoom<=_e)){Fe.zoom=_e;for(var ut=this.trees[_e+1],Ae=ut.within(Fe.x,Fe.y,Ge),Le=Fe.numPoints||1,rt=Le,ye=0,me=Ae;ye<me.length;ye+=1){var We=me[ye],Ve=ut.points[We];Ve.zoom>_e&&(rt+=Ve.numPoints||1)}if(rt>Le&&rt>=ne){for(var dt=Fe.x*Le,Ht=Fe.y*Le,et=qe&&Le>1?this._map(Fe,!0):null,$e=(oe<<5)+(_e+1)+this.points.length,Te=0,Xe=Ae;Te<Xe.length;Te+=1){var pt=Xe[Te],Oe=ut.points[pt];if(!(Oe.zoom<=_e)){Oe.zoom=_e;var Be=Oe.numPoints||1;dt+=Oe.x*Be,Ht+=Oe.y*Be,Oe.parentId=$e,qe&&(et||(et=this._map(Fe,!0)),qe(et,this._map(Oe)))}}Fe.parentId=$e,He.push(fe(dt/rt,Ht/rt,$e,rt,et))}else if(He.push(Fe),rt>1)for(var vt=0,Rt=Ae;vt<Rt.length;vt+=1){var rr=Rt[vt],br=ut.points[rr];br.zoom<=_e||(br.zoom=_e,He.push(br))}}}return He},pe.prototype._getOriginId=function(xe){return xe-this.points.length>>5},pe.prototype._getOriginZoom=function(xe){return(xe-this.points.length)%32},pe.prototype._map=function(xe,_e){if(xe.numPoints)return _e?Ue({},xe.properties):xe.properties;var He=this.points[xe.index].properties,Ke=this.options.map(He);return _e&&Ke===He?Ue({},Ke):Ke};function fe(Ze,xe,_e,He,Ke){return{x:Ce(Ze),y:Ce(xe),zoom:1/0,id:_e,parentId:-1,numPoints:He,properties:Ke}}function J(Ze,xe){var _e=Ze.geometry.coordinates,He=_e[0],Ke=_e[1];return{x:Ce(ge(He)),y:Ce(Se(Ke)),zoom:1/0,index:xe,parentId:-1}}function M(Ze){return{type:"Feature",id:Ze.id,properties:E(Ze),geometry:{type:"Point",coordinates:[ze(Ze.x),De(Ze.y)]}}}function E(Ze){var xe=Ze.numPoints,_e=xe>=1e4?Math.round(xe/1e3)+"k":xe>=1e3?Math.round(xe/100)/10+"k":xe;return Ue(Ue({},Ze.properties),{cluster:!0,cluster_id:Ze.id,point_count:xe,point_count_abbreviated:_e})}function ge(Ze){return Ze/360+.5}function Se(Ze){var xe=Math.sin(Ze*Math.PI/180),_e=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return _e<0?0:_e>1?1:_e}function ze(Ze){return(Ze-.5)*360}function De(Ze){var xe=(180-Ze*360)*Math.PI/180;return 360*Math.atan(Math.exp(xe))/Math.PI-90}function Ue(Ze,xe){for(var _e in xe)Ze[_e]=xe[_e];return Ze}function at(Ze){return Ze.x}function Je(Ze){return Ze.y}return pe})},27330:function(ft,N,k){var W;(function(K){(function(b){var G=typeof globalThis=="object"?globalThis:typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:te(),j=q(K);typeof G.Reflect!="undefined"&&(j=q(G.Reflect,j)),b(j,G),typeof G.Reflect=="undefined"&&(G.Reflect=K);function q(Ce,pe){return function(fe,J){Object.defineProperty(Ce,fe,{configurable:!0,writable:!0,value:J}),pe&&pe(fe,J)}}function Q(){try{return Function("return this;")()}catch(Ce){}}function ie(){try{return(0,eval)("(function() { return this; })()")}catch(Ce){}}function te(){return Q()||ie()}})(function(b,G){var j=Object.prototype.hasOwnProperty,q=typeof Symbol=="function",Q=q&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",ie=q&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",te=typeof Object.create=="function",Ce={__proto__:[]}instanceof Array,pe=!te&&!Ce,fe={create:te?function(){return zr(Object.create(null))}:Ce?function(){return zr({__proto__:null})}:function(){return zr({})},has:pe?function(le,H){return j.call(le,H)}:function(le,H){return H in le},get:pe?function(le,H){return j.call(le,H)?le[H]:void 0}:function(le,H){return le[H]}},J=Object.getPrototypeOf(Function),M=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Er(),E=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:wr(),ge=typeof WeakMap=="function"?WeakMap:Br(),Se=q?Symbol.for("@reflect-metadata:registry"):void 0,ze=Kt(),De=or(ze);function Ue(le,H,re,Ie){if(me(re)){if(!pt(le))throw new TypeError;if(!Be(H))throw new TypeError;return qe(le,H)}else{if(!pt(le))throw new TypeError;if(!dt(H))throw new TypeError;if(!dt(Ie)&&!me(Ie)&&!We(Ie))throw new TypeError;return We(Ie)&&(Ie=void 0),re=Xe(re),ne(le,H,re,Ie)}}b("decorate",Ue);function at(le,H){function re(Ie,Ye){if(!dt(Ie))throw new TypeError;if(!me(Ye)&&!vt(Ye))throw new TypeError;Ae(le,H,Ie,Ye)}return re}b("metadata",at);function Je(le,H,re,Ie){if(!dt(re))throw new TypeError;return me(Ie)||(Ie=Xe(Ie)),Ae(le,H,re,Ie)}b("defineMetadata",Je);function Ze(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),Ge(le,H,re)}b("hasMetadata",Ze);function xe(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),oe(le,H,re)}b("hasOwnMetadata",xe);function _e(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),Fe(le,H,re)}b("getMetadata",_e);function He(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),ut(le,H,re)}b("getOwnMetadata",He);function Ke(le,H){if(!dt(le))throw new TypeError;return me(H)||(H=Xe(H)),Le(le,H)}b("getMetadataKeys",Ke);function Et(le,H){if(!dt(le))throw new TypeError;return me(H)||(H=Xe(H)),rt(le,H)}b("getOwnMetadataKeys",Et);function ke(le,H,re){if(!dt(H))throw new TypeError;if(me(re)||(re=Xe(re)),!dt(H))throw new TypeError;me(re)||(re=Xe(re));var Ie=Jt(H,re,!1);return me(Ie)?!1:Ie.OrdinaryDeleteMetadata(le,H,re)}b("deleteMetadata",ke);function qe(le,H){for(var re=le.length-1;re>=0;--re){var Ie=le[re],Ye=Ie(H);if(!me(Ye)&&!We(Ye)){if(!Be(Ye))throw new TypeError;H=Ye}}return H}function ne(le,H,re,Ie){for(var Ye=le.length-1;Ye>=0;--Ye){var Ct=le[Ye],ar=Ct(H,re,Ie);if(!me(ar)&&!We(ar)){if(!dt(ar))throw new TypeError;Ie=ar}}return Ie}function Ge(le,H,re){var Ie=oe(le,H,re);if(Ie)return!0;var Ye=Xr(H);return We(Ye)?!1:Ge(le,Ye,re)}function oe(le,H,re){var Ie=Jt(H,re,!1);return me(Ie)?!1:$e(Ie.OrdinaryHasOwnMetadata(le,H,re))}function Fe(le,H,re){var Ie=oe(le,H,re);if(Ie)return ut(le,H,re);var Ye=Xr(H);if(!We(Ye))return Fe(le,Ye,re)}function ut(le,H,re){var Ie=Jt(H,re,!1);if(!me(Ie))return Ie.OrdinaryGetOwnMetadata(le,H,re)}function Ae(le,H,re,Ie){var Ye=Jt(re,Ie,!0);Ye.OrdinaryDefineOwnMetadata(le,H,re,Ie)}function Le(le,H){var re=rt(le,H),Ie=Xr(le);if(Ie===null)return re;var Ye=Le(Ie,H);if(Ye.length<=0)return re;if(re.length<=0)return Ye;for(var Ct=new E,ar=[],jt=0,wt=re;jt<wt.length;jt++){var Mt=wt[jt],ve=Ct.has(Mt);ve||(Ct.add(Mt),ar.push(Mt))}for(var he=0,Re=Ye;he<Re.length;he++){var Mt=Re[he],ve=Ct.has(Mt);ve||(Ct.add(Mt),ar.push(Mt))}return ar}function rt(le,H){var re=Jt(le,H,!1);return re?re.OrdinaryOwnMetadataKeys(le,H):[]}function ye(le){if(le===null)return 1;switch(typeof le){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return le===null?1:6;default:return 6}}function me(le){return le===void 0}function We(le){return le===null}function Ve(le){return typeof le=="symbol"}function dt(le){return typeof le=="object"?le!==null:typeof le=="function"}function Ht(le,H){switch(ye(le)){case 0:return le;case 1:return le;case 2:return le;case 3:return le;case 4:return le;case 5:return le}var re=H===3?"string":H===5?"number":"default",Ie=rr(le,Q);if(Ie!==void 0){var Ye=Ie.call(le,re);if(dt(Ye))throw new TypeError;return Ye}return et(le,re==="default"?"number":re)}function et(le,H){if(H==="string"){var re=le.toString;if(Oe(re)){var Ie=re.call(le);if(!dt(Ie))return Ie}var Ye=le.valueOf;if(Oe(Ye)){var Ie=Ye.call(le);if(!dt(Ie))return Ie}}else{var Ye=le.valueOf;if(Oe(Ye)){var Ie=Ye.call(le);if(!dt(Ie))return Ie}var Ct=le.toString;if(Oe(Ct)){var Ie=Ct.call(le);if(!dt(Ie))return Ie}}throw new TypeError}function $e(le){return!!le}function Te(le){return""+le}function Xe(le){var H=Ht(le,3);return Ve(H)?H:Te(H)}function pt(le){return Array.isArray?Array.isArray(le):le instanceof Object?le instanceof Array:Object.prototype.toString.call(le)==="[object Array]"}function Oe(le){return typeof le=="function"}function Be(le){return typeof le=="function"}function vt(le){switch(ye(le)){case 3:return!0;case 4:return!0;default:return!1}}function Rt(le,H){return le===H||le!==le&&H!==H}function rr(le,H){var re=le[H];if(re!=null){if(!Oe(re))throw new TypeError;return re}}function br(le){var H=rr(le,ie);if(!Oe(H))throw new TypeError;var re=H.call(le);if(!dt(re))throw new TypeError;return re}function lt(le){return le.value}function an(le){var H=le.next();return H.done?!1:H}function $r(le){var H=le.return;H&&H.call(le)}function Xr(le){var H=Object.getPrototypeOf(le);if(typeof le!="function"||le===J||H!==J)return H;var re=le.prototype,Ie=re&&Object.getPrototypeOf(re);if(Ie==null||Ie===Object.prototype)return H;var Ye=Ie.constructor;return typeof Ye!="function"||Ye===le?H:Ye}function Nt(){var le;!me(Se)&&typeof G.Reflect!="undefined"&&!(Se in G.Reflect)&&typeof G.Reflect.defineMetadata=="function"&&(le=kt(G.Reflect));var H,re,Ie,Ye=new ge,Ct={registerProvider:ar,getProvider:wt,setProvider:ve};return Ct;function ar(he){if(!Object.isExtensible(Ct))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case le===he:break;case me(H):H=he;break;case H===he:break;case me(re):re=he;break;case re===he:break;default:Ie===void 0&&(Ie=new E),Ie.add(he);break}}function jt(he,Re){if(!me(H)){if(H.isProviderFor(he,Re))return H;if(!me(re)){if(re.isProviderFor(he,Re))return H;if(!me(Ie))for(var tt=br(Ie);;){var St=an(tt);if(!St)return;var Gt=lt(St);if(Gt.isProviderFor(he,Re))return $r(tt),Gt}}}if(!me(le)&&le.isProviderFor(he,Re))return le}function wt(he,Re){var tt=Ye.get(he),St;return me(tt)||(St=tt.get(Re)),me(St)&&(St=jt(he,Re),me(St)||(me(tt)&&(tt=new M,Ye.set(he,tt)),tt.set(Re,St))),St}function Mt(he){if(me(he))throw new TypeError;return H===he||re===he||!me(Ie)&&Ie.has(he)}function ve(he,Re,tt){if(!Mt(tt))throw new Error("Metadata provider not registered.");var St=wt(he,Re);if(St!==tt){if(!me(St))return!1;var Gt=Ye.get(he);me(Gt)&&(Gt=new M,Ye.set(he,Gt)),Gt.set(Re,tt)}return!0}}function Kt(){var le;return!me(Se)&&dt(G.Reflect)&&Object.isExtensible(G.Reflect)&&(le=G.Reflect[Se]),me(le)&&(le=Nt()),!me(Se)&&dt(G.Reflect)&&Object.isExtensible(G.Reflect)&&Object.defineProperty(G.Reflect,Se,{enumerable:!1,configurable:!1,writable:!1,value:le}),le}function or(le){var H=new ge,re={isProviderFor:function(Mt,ve){var he=H.get(Mt);return me(he)?!1:he.has(ve)},OrdinaryDefineOwnMetadata:ar,OrdinaryHasOwnMetadata:Ye,OrdinaryGetOwnMetadata:Ct,OrdinaryOwnMetadataKeys:jt,OrdinaryDeleteMetadata:wt};return ze.registerProvider(re),re;function Ie(Mt,ve,he){var Re=H.get(Mt),tt=!1;if(me(Re)){if(!he)return;Re=new M,H.set(Mt,Re),tt=!0}var St=Re.get(ve);if(me(St)){if(!he)return;if(St=new M,Re.set(ve,St),!le.setProvider(Mt,ve,re))throw Re.delete(ve),tt&&H.delete(Mt),new Error("Wrong provider for target.")}return St}function Ye(Mt,ve,he){var Re=Ie(ve,he,!1);return me(Re)?!1:$e(Re.has(Mt))}function Ct(Mt,ve,he){var Re=Ie(ve,he,!1);if(!me(Re))return Re.get(Mt)}function ar(Mt,ve,he,Re){var tt=Ie(he,Re,!0);tt.set(Mt,ve)}function jt(Mt,ve){var he=[],Re=Ie(Mt,ve,!1);if(me(Re))return he;for(var tt=Re.keys(),St=br(tt),Gt=0;;){var gr=an(St);if(!gr)return he.length=Gt,he;var At=lt(gr);try{he[Gt]=At}catch(st){try{$r(St)}finally{throw st}}Gt++}}function wt(Mt,ve,he){var Re=Ie(ve,he,!1);if(me(Re)||!Re.delete(Mt))return!1;if(Re.size===0){var tt=H.get(ve);me(tt)||(tt.delete(he),tt.size===0&&H.delete(tt))}return!0}}function kt(le){var H=le.defineMetadata,re=le.hasOwnMetadata,Ie=le.getOwnMetadata,Ye=le.getOwnMetadataKeys,Ct=le.deleteMetadata,ar=new ge,jt={isProviderFor:function(wt,Mt){var ve=ar.get(wt);return me(ve)?Ye(wt,Mt).length?(me(ve)&&(ve=new E,ar.set(wt,ve)),ve.add(Mt),!0):!1:ve.has(Mt)},OrdinaryDefineOwnMetadata:H,OrdinaryHasOwnMetadata:re,OrdinaryGetOwnMetadata:Ie,OrdinaryOwnMetadataKeys:Ye,OrdinaryDeleteMetadata:Ct};return jt}function Jt(le,H,re){var Ie=ze.getProvider(le,H);if(!me(Ie))return Ie;if(re){if(ze.setProvider(le,H,De))return De;throw new Error("Illegal state.")}}function Er(){var le={},H=[],re=function(){function jt(wt,Mt,ve){this._index=0,this._keys=wt,this._values=Mt,this._selector=ve}return jt.prototype["@@iterator"]=function(){return this},jt.prototype[ie]=function(){return this},jt.prototype.next=function(){var wt=this._index;if(wt>=0&&wt<this._keys.length){var Mt=this._selector(this._keys[wt],this._values[wt]);return wt+1>=this._keys.length?(this._index=-1,this._keys=H,this._values=H):this._index++,{value:Mt,done:!1}}return{value:void 0,done:!0}},jt.prototype.throw=function(wt){throw this._index>=0&&(this._index=-1,this._keys=H,this._values=H),wt},jt.prototype.return=function(wt){return this._index>=0&&(this._index=-1,this._keys=H,this._values=H),{value:wt,done:!0}},jt}(),Ie=function(){function jt(){this._keys=[],this._values=[],this._cacheKey=le,this._cacheIndex=-2}return Object.defineProperty(jt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),jt.prototype.has=function(wt){return this._find(wt,!1)>=0},jt.prototype.get=function(wt){var Mt=this._find(wt,!1);return Mt>=0?this._values[Mt]:void 0},jt.prototype.set=function(wt,Mt){var ve=this._find(wt,!0);return this._values[ve]=Mt,this},jt.prototype.delete=function(wt){var Mt=this._find(wt,!1);if(Mt>=0){for(var ve=this._keys.length,he=Mt+1;he<ve;he++)this._keys[he-1]=this._keys[he],this._values[he-1]=this._values[he];return this._keys.length--,this._values.length--,Rt(wt,this._cacheKey)&&(this._cacheKey=le,this._cacheIndex=-2),!0}return!1},jt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=le,this._cacheIndex=-2},jt.prototype.keys=function(){return new re(this._keys,this._values,Ye)},jt.prototype.values=function(){return new re(this._keys,this._values,Ct)},jt.prototype.entries=function(){return new re(this._keys,this._values,ar)},jt.prototype["@@iterator"]=function(){return this.entries()},jt.prototype[ie]=function(){return this.entries()},jt.prototype._find=function(wt,Mt){if(!Rt(this._cacheKey,wt)){this._cacheIndex=-1;for(var ve=0;ve<this._keys.length;ve++)if(Rt(this._keys[ve],wt)){this._cacheIndex=ve;break}}return this._cacheIndex<0&&Mt&&(this._cacheIndex=this._keys.length,this._keys.push(wt),this._values.push(void 0)),this._cacheIndex},jt}();return Ie;function Ye(jt,wt){return jt}function Ct(jt,wt){return wt}function ar(jt,wt){return[jt,wt]}}function wr(){var le=function(){function H(){this._map=new M}return Object.defineProperty(H.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),H.prototype.has=function(re){return this._map.has(re)},H.prototype.add=function(re){return this._map.set(re,re),this},H.prototype.delete=function(re){return this._map.delete(re)},H.prototype.clear=function(){this._map.clear()},H.prototype.keys=function(){return this._map.keys()},H.prototype.values=function(){return this._map.keys()},H.prototype.entries=function(){return this._map.entries()},H.prototype["@@iterator"]=function(){return this.keys()},H.prototype[ie]=function(){return this.keys()},H}();return le}function Br(){var le=16,H=fe.create(),re=Ie();return function(){function wt(){this._key=Ie()}return wt.prototype.has=function(Mt){var ve=Ye(Mt,!1);return ve!==void 0?fe.has(ve,this._key):!1},wt.prototype.get=function(Mt){var ve=Ye(Mt,!1);return ve!==void 0?fe.get(ve,this._key):void 0},wt.prototype.set=function(Mt,ve){var he=Ye(Mt,!0);return he[this._key]=ve,this},wt.prototype.delete=function(Mt){var ve=Ye(Mt,!1);return ve!==void 0?delete ve[this._key]:!1},wt.prototype.clear=function(){this._key=Ie()},wt}();function Ie(){var wt;do wt="@@WeakMap@@"+jt();while(fe.has(H,wt));return H[wt]=!0,wt}function Ye(wt,Mt){if(!j.call(wt,re)){if(!Mt)return;Object.defineProperty(wt,re,{value:fe.create()})}return wt[re]}function Ct(wt,Mt){for(var ve=0;ve<Mt;++ve)wt[ve]=Math.random()*255|0;return wt}function ar(wt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wt)):Ct(new Uint8Array(wt),wt):Ct(new Array(wt),wt)}function jt(){var wt=ar(le);wt[6]=wt[6]&79|64,wt[8]=wt[8]&191|128;for(var Mt="",ve=0;ve<le;++ve){var he=wt[ve];(ve===4||ve===6||ve===8)&&(Mt+="-"),he<16&&(Mt+="0"),Mt+=he.toString(16).toLowerCase()}return Mt}}function zr(le){return le.__=void 0,delete le.__,le}})})(W||(W={}))},59858:function(ft,N,k){var W;(function(K){(function(b){var G=typeof globalThis=="object"?globalThis:typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:te(),j=q(K);typeof G.Reflect!="undefined"&&(j=q(G.Reflect,j)),b(j,G),typeof G.Reflect=="undefined"&&(G.Reflect=K);function q(Ce,pe){return function(fe,J){Object.defineProperty(Ce,fe,{configurable:!0,writable:!0,value:J}),pe&&pe(fe,J)}}function Q(){try{return Function("return this;")()}catch(Ce){}}function ie(){try{return(0,eval)("(function() { return this; })()")}catch(Ce){}}function te(){return Q()||ie()}})(function(b,G){var j=Object.prototype.hasOwnProperty,q=typeof Symbol=="function",Q=q&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",ie=q&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",te=typeof Object.create=="function",Ce={__proto__:[]}instanceof Array,pe=!te&&!Ce,fe={create:te?function(){return zr(Object.create(null))}:Ce?function(){return zr({__proto__:null})}:function(){return zr({})},has:pe?function(le,H){return j.call(le,H)}:function(le,H){return H in le},get:pe?function(le,H){return j.call(le,H)?le[H]:void 0}:function(le,H){return le[H]}},J=Object.getPrototypeOf(Function),M=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Er(),E=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:wr(),ge=typeof WeakMap=="function"?WeakMap:Br(),Se=q?Symbol.for("@reflect-metadata:registry"):void 0,ze=Kt(),De=or(ze);function Ue(le,H,re,Ie){if(me(re)){if(!pt(le))throw new TypeError;if(!Be(H))throw new TypeError;return qe(le,H)}else{if(!pt(le))throw new TypeError;if(!dt(H))throw new TypeError;if(!dt(Ie)&&!me(Ie)&&!We(Ie))throw new TypeError;return We(Ie)&&(Ie=void 0),re=Xe(re),ne(le,H,re,Ie)}}b("decorate",Ue);function at(le,H){function re(Ie,Ye){if(!dt(Ie))throw new TypeError;if(!me(Ye)&&!vt(Ye))throw new TypeError;Ae(le,H,Ie,Ye)}return re}b("metadata",at);function Je(le,H,re,Ie){if(!dt(re))throw new TypeError;return me(Ie)||(Ie=Xe(Ie)),Ae(le,H,re,Ie)}b("defineMetadata",Je);function Ze(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),Ge(le,H,re)}b("hasMetadata",Ze);function xe(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),oe(le,H,re)}b("hasOwnMetadata",xe);function _e(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),Fe(le,H,re)}b("getMetadata",_e);function He(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),ut(le,H,re)}b("getOwnMetadata",He);function Ke(le,H){if(!dt(le))throw new TypeError;return me(H)||(H=Xe(H)),Le(le,H)}b("getMetadataKeys",Ke);function Et(le,H){if(!dt(le))throw new TypeError;return me(H)||(H=Xe(H)),rt(le,H)}b("getOwnMetadataKeys",Et);function ke(le,H,re){if(!dt(H))throw new TypeError;if(me(re)||(re=Xe(re)),!dt(H))throw new TypeError;me(re)||(re=Xe(re));var Ie=Jt(H,re,!1);return me(Ie)?!1:Ie.OrdinaryDeleteMetadata(le,H,re)}b("deleteMetadata",ke);function qe(le,H){for(var re=le.length-1;re>=0;--re){var Ie=le[re],Ye=Ie(H);if(!me(Ye)&&!We(Ye)){if(!Be(Ye))throw new TypeError;H=Ye}}return H}function ne(le,H,re,Ie){for(var Ye=le.length-1;Ye>=0;--Ye){var Ct=le[Ye],ar=Ct(H,re,Ie);if(!me(ar)&&!We(ar)){if(!dt(ar))throw new TypeError;Ie=ar}}return Ie}function Ge(le,H,re){var Ie=oe(le,H,re);if(Ie)return!0;var Ye=Xr(H);return We(Ye)?!1:Ge(le,Ye,re)}function oe(le,H,re){var Ie=Jt(H,re,!1);return me(Ie)?!1:$e(Ie.OrdinaryHasOwnMetadata(le,H,re))}function Fe(le,H,re){var Ie=oe(le,H,re);if(Ie)return ut(le,H,re);var Ye=Xr(H);if(!We(Ye))return Fe(le,Ye,re)}function ut(le,H,re){var Ie=Jt(H,re,!1);if(!me(Ie))return Ie.OrdinaryGetOwnMetadata(le,H,re)}function Ae(le,H,re,Ie){var Ye=Jt(re,Ie,!0);Ye.OrdinaryDefineOwnMetadata(le,H,re,Ie)}function Le(le,H){var re=rt(le,H),Ie=Xr(le);if(Ie===null)return re;var Ye=Le(Ie,H);if(Ye.length<=0)return re;if(re.length<=0)return Ye;for(var Ct=new E,ar=[],jt=0,wt=re;jt<wt.length;jt++){var Mt=wt[jt],ve=Ct.has(Mt);ve||(Ct.add(Mt),ar.push(Mt))}for(var he=0,Re=Ye;he<Re.length;he++){var Mt=Re[he],ve=Ct.has(Mt);ve||(Ct.add(Mt),ar.push(Mt))}return ar}function rt(le,H){var re=Jt(le,H,!1);return re?re.OrdinaryOwnMetadataKeys(le,H):[]}function ye(le){if(le===null)return 1;switch(typeof le){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return le===null?1:6;default:return 6}}function me(le){return le===void 0}function We(le){return le===null}function Ve(le){return typeof le=="symbol"}function dt(le){return typeof le=="object"?le!==null:typeof le=="function"}function Ht(le,H){switch(ye(le)){case 0:return le;case 1:return le;case 2:return le;case 3:return le;case 4:return le;case 5:return le}var re=H===3?"string":H===5?"number":"default",Ie=rr(le,Q);if(Ie!==void 0){var Ye=Ie.call(le,re);if(dt(Ye))throw new TypeError;return Ye}return et(le,re==="default"?"number":re)}function et(le,H){if(H==="string"){var re=le.toString;if(Oe(re)){var Ie=re.call(le);if(!dt(Ie))return Ie}var Ye=le.valueOf;if(Oe(Ye)){var Ie=Ye.call(le);if(!dt(Ie))return Ie}}else{var Ye=le.valueOf;if(Oe(Ye)){var Ie=Ye.call(le);if(!dt(Ie))return Ie}var Ct=le.toString;if(Oe(Ct)){var Ie=Ct.call(le);if(!dt(Ie))return Ie}}throw new TypeError}function $e(le){return!!le}function Te(le){return""+le}function Xe(le){var H=Ht(le,3);return Ve(H)?H:Te(H)}function pt(le){return Array.isArray?Array.isArray(le):le instanceof Object?le instanceof Array:Object.prototype.toString.call(le)==="[object Array]"}function Oe(le){return typeof le=="function"}function Be(le){return typeof le=="function"}function vt(le){switch(ye(le)){case 3:return!0;case 4:return!0;default:return!1}}function Rt(le,H){return le===H||le!==le&&H!==H}function rr(le,H){var re=le[H];if(re!=null){if(!Oe(re))throw new TypeError;return re}}function br(le){var H=rr(le,ie);if(!Oe(H))throw new TypeError;var re=H.call(le);if(!dt(re))throw new TypeError;return re}function lt(le){return le.value}function an(le){var H=le.next();return H.done?!1:H}function $r(le){var H=le.return;H&&H.call(le)}function Xr(le){var H=Object.getPrototypeOf(le);if(typeof le!="function"||le===J||H!==J)return H;var re=le.prototype,Ie=re&&Object.getPrototypeOf(re);if(Ie==null||Ie===Object.prototype)return H;var Ye=Ie.constructor;return typeof Ye!="function"||Ye===le?H:Ye}function Nt(){var le;!me(Se)&&typeof G.Reflect!="undefined"&&!(Se in G.Reflect)&&typeof G.Reflect.defineMetadata=="function"&&(le=kt(G.Reflect));var H,re,Ie,Ye=new ge,Ct={registerProvider:ar,getProvider:wt,setProvider:ve};return Ct;function ar(he){if(!Object.isExtensible(Ct))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case le===he:break;case me(H):H=he;break;case H===he:break;case me(re):re=he;break;case re===he:break;default:Ie===void 0&&(Ie=new E),Ie.add(he);break}}function jt(he,Re){if(!me(H)){if(H.isProviderFor(he,Re))return H;if(!me(re)){if(re.isProviderFor(he,Re))return H;if(!me(Ie))for(var tt=br(Ie);;){var St=an(tt);if(!St)return;var Gt=lt(St);if(Gt.isProviderFor(he,Re))return $r(tt),Gt}}}if(!me(le)&&le.isProviderFor(he,Re))return le}function wt(he,Re){var tt=Ye.get(he),St;return me(tt)||(St=tt.get(Re)),me(St)&&(St=jt(he,Re),me(St)||(me(tt)&&(tt=new M,Ye.set(he,tt)),tt.set(Re,St))),St}function Mt(he){if(me(he))throw new TypeError;return H===he||re===he||!me(Ie)&&Ie.has(he)}function ve(he,Re,tt){if(!Mt(tt))throw new Error("Metadata provider not registered.");var St=wt(he,Re);if(St!==tt){if(!me(St))return!1;var Gt=Ye.get(he);me(Gt)&&(Gt=new M,Ye.set(he,Gt)),Gt.set(Re,tt)}return!0}}function Kt(){var le;return!me(Se)&&dt(G.Reflect)&&Object.isExtensible(G.Reflect)&&(le=G.Reflect[Se]),me(le)&&(le=Nt()),!me(Se)&&dt(G.Reflect)&&Object.isExtensible(G.Reflect)&&Object.defineProperty(G.Reflect,Se,{enumerable:!1,configurable:!1,writable:!1,value:le}),le}function or(le){var H=new ge,re={isProviderFor:function(Mt,ve){var he=H.get(Mt);return me(he)?!1:he.has(ve)},OrdinaryDefineOwnMetadata:ar,OrdinaryHasOwnMetadata:Ye,OrdinaryGetOwnMetadata:Ct,OrdinaryOwnMetadataKeys:jt,OrdinaryDeleteMetadata:wt};return ze.registerProvider(re),re;function Ie(Mt,ve,he){var Re=H.get(Mt),tt=!1;if(me(Re)){if(!he)return;Re=new M,H.set(Mt,Re),tt=!0}var St=Re.get(ve);if(me(St)){if(!he)return;if(St=new M,Re.set(ve,St),!le.setProvider(Mt,ve,re))throw Re.delete(ve),tt&&H.delete(Mt),new Error("Wrong provider for target.")}return St}function Ye(Mt,ve,he){var Re=Ie(ve,he,!1);return me(Re)?!1:$e(Re.has(Mt))}function Ct(Mt,ve,he){var Re=Ie(ve,he,!1);if(!me(Re))return Re.get(Mt)}function ar(Mt,ve,he,Re){var tt=Ie(he,Re,!0);tt.set(Mt,ve)}function jt(Mt,ve){var he=[],Re=Ie(Mt,ve,!1);if(me(Re))return he;for(var tt=Re.keys(),St=br(tt),Gt=0;;){var gr=an(St);if(!gr)return he.length=Gt,he;var At=lt(gr);try{he[Gt]=At}catch(st){try{$r(St)}finally{throw st}}Gt++}}function wt(Mt,ve,he){var Re=Ie(ve,he,!1);if(me(Re)||!Re.delete(Mt))return!1;if(Re.size===0){var tt=H.get(ve);me(tt)||(tt.delete(he),tt.size===0&&H.delete(tt))}return!0}}function kt(le){var H=le.defineMetadata,re=le.hasOwnMetadata,Ie=le.getOwnMetadata,Ye=le.getOwnMetadataKeys,Ct=le.deleteMetadata,ar=new ge,jt={isProviderFor:function(wt,Mt){var ve=ar.get(wt);return me(ve)?Ye(wt,Mt).length?(me(ve)&&(ve=new E,ar.set(wt,ve)),ve.add(Mt),!0):!1:ve.has(Mt)},OrdinaryDefineOwnMetadata:H,OrdinaryHasOwnMetadata:re,OrdinaryGetOwnMetadata:Ie,OrdinaryOwnMetadataKeys:Ye,OrdinaryDeleteMetadata:Ct};return jt}function Jt(le,H,re){var Ie=ze.getProvider(le,H);if(!me(Ie))return Ie;if(re){if(ze.setProvider(le,H,De))return De;throw new Error("Illegal state.")}}function Er(){var le={},H=[],re=function(){function jt(wt,Mt,ve){this._index=0,this._keys=wt,this._values=Mt,this._selector=ve}return jt.prototype["@@iterator"]=function(){return this},jt.prototype[ie]=function(){return this},jt.prototype.next=function(){var wt=this._index;if(wt>=0&&wt<this._keys.length){var Mt=this._selector(this._keys[wt],this._values[wt]);return wt+1>=this._keys.length?(this._index=-1,this._keys=H,this._values=H):this._index++,{value:Mt,done:!1}}return{value:void 0,done:!0}},jt.prototype.throw=function(wt){throw this._index>=0&&(this._index=-1,this._keys=H,this._values=H),wt},jt.prototype.return=function(wt){return this._index>=0&&(this._index=-1,this._keys=H,this._values=H),{value:wt,done:!0}},jt}(),Ie=function(){function jt(){this._keys=[],this._values=[],this._cacheKey=le,this._cacheIndex=-2}return Object.defineProperty(jt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),jt.prototype.has=function(wt){return this._find(wt,!1)>=0},jt.prototype.get=function(wt){var Mt=this._find(wt,!1);return Mt>=0?this._values[Mt]:void 0},jt.prototype.set=function(wt,Mt){var ve=this._find(wt,!0);return this._values[ve]=Mt,this},jt.prototype.delete=function(wt){var Mt=this._find(wt,!1);if(Mt>=0){for(var ve=this._keys.length,he=Mt+1;he<ve;he++)this._keys[he-1]=this._keys[he],this._values[he-1]=this._values[he];return this._keys.length--,this._values.length--,Rt(wt,this._cacheKey)&&(this._cacheKey=le,this._cacheIndex=-2),!0}return!1},jt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=le,this._cacheIndex=-2},jt.prototype.keys=function(){return new re(this._keys,this._values,Ye)},jt.prototype.values=function(){return new re(this._keys,this._values,Ct)},jt.prototype.entries=function(){return new re(this._keys,this._values,ar)},jt.prototype["@@iterator"]=function(){return this.entries()},jt.prototype[ie]=function(){return this.entries()},jt.prototype._find=function(wt,Mt){if(!Rt(this._cacheKey,wt)){this._cacheIndex=-1;for(var ve=0;ve<this._keys.length;ve++)if(Rt(this._keys[ve],wt)){this._cacheIndex=ve;break}}return this._cacheIndex<0&&Mt&&(this._cacheIndex=this._keys.length,this._keys.push(wt),this._values.push(void 0)),this._cacheIndex},jt}();return Ie;function Ye(jt,wt){return jt}function Ct(jt,wt){return wt}function ar(jt,wt){return[jt,wt]}}function wr(){var le=function(){function H(){this._map=new M}return Object.defineProperty(H.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),H.prototype.has=function(re){return this._map.has(re)},H.prototype.add=function(re){return this._map.set(re,re),this},H.prototype.delete=function(re){return this._map.delete(re)},H.prototype.clear=function(){this._map.clear()},H.prototype.keys=function(){return this._map.keys()},H.prototype.values=function(){return this._map.keys()},H.prototype.entries=function(){return this._map.entries()},H.prototype["@@iterator"]=function(){return this.keys()},H.prototype[ie]=function(){return this.keys()},H}();return le}function Br(){var le=16,H=fe.create(),re=Ie();return function(){function wt(){this._key=Ie()}return wt.prototype.has=function(Mt){var ve=Ye(Mt,!1);return ve!==void 0?fe.has(ve,this._key):!1},wt.prototype.get=function(Mt){var ve=Ye(Mt,!1);return ve!==void 0?fe.get(ve,this._key):void 0},wt.prototype.set=function(Mt,ve){var he=Ye(Mt,!0);return he[this._key]=ve,this},wt.prototype.delete=function(Mt){var ve=Ye(Mt,!1);return ve!==void 0?delete ve[this._key]:!1},wt.prototype.clear=function(){this._key=Ie()},wt}();function Ie(){var wt;do wt="@@WeakMap@@"+jt();while(fe.has(H,wt));return H[wt]=!0,wt}function Ye(wt,Mt){if(!j.call(wt,re)){if(!Mt)return;Object.defineProperty(wt,re,{value:fe.create()})}return wt[re]}function Ct(wt,Mt){for(var ve=0;ve<Mt;++ve)wt[ve]=Math.random()*255|0;return wt}function ar(wt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wt)):Ct(new Uint8Array(wt),wt):Ct(new Array(wt),wt)}function jt(){var wt=ar(le);wt[6]=wt[6]&79|64,wt[8]=wt[8]&191|128;for(var Mt="",ve=0;ve<le;++ve){var he=wt[ve];(ve===4||ve===6||ve===8)&&(Mt+="-"),he<16&&(Mt+="0"),Mt+=he.toString(16).toLowerCase()}return Mt}}function zr(le){return le.__=void 0,delete le.__,le}})})(W||(W={}))},31857:function(ft,N,k){var W;(function(K){(function(b){var G=typeof globalThis=="object"?globalThis:typeof k.g=="object"?k.g:typeof self=="object"?self:typeof this=="object"?this:te(),j=q(K);typeof G.Reflect!="undefined"&&(j=q(G.Reflect,j)),b(j,G),typeof G.Reflect=="undefined"&&(G.Reflect=K);function q(Ce,pe){return function(fe,J){Object.defineProperty(Ce,fe,{configurable:!0,writable:!0,value:J}),pe&&pe(fe,J)}}function Q(){try{return Function("return this;")()}catch(Ce){}}function ie(){try{return(0,eval)("(function() { return this; })()")}catch(Ce){}}function te(){return Q()||ie()}})(function(b,G){var j=Object.prototype.hasOwnProperty,q=typeof Symbol=="function",Q=q&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",ie=q&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",te=typeof Object.create=="function",Ce={__proto__:[]}instanceof Array,pe=!te&&!Ce,fe={create:te?function(){return zr(Object.create(null))}:Ce?function(){return zr({__proto__:null})}:function(){return zr({})},has:pe?function(le,H){return j.call(le,H)}:function(le,H){return H in le},get:pe?function(le,H){return j.call(le,H)?le[H]:void 0}:function(le,H){return le[H]}},J=Object.getPrototypeOf(Function),M=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Er(),E=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:wr(),ge=typeof WeakMap=="function"?WeakMap:Br(),Se=q?Symbol.for("@reflect-metadata:registry"):void 0,ze=Kt(),De=or(ze);function Ue(le,H,re,Ie){if(me(re)){if(!pt(le))throw new TypeError;if(!Be(H))throw new TypeError;return qe(le,H)}else{if(!pt(le))throw new TypeError;if(!dt(H))throw new TypeError;if(!dt(Ie)&&!me(Ie)&&!We(Ie))throw new TypeError;return We(Ie)&&(Ie=void 0),re=Xe(re),ne(le,H,re,Ie)}}b("decorate",Ue);function at(le,H){function re(Ie,Ye){if(!dt(Ie))throw new TypeError;if(!me(Ye)&&!vt(Ye))throw new TypeError;Ae(le,H,Ie,Ye)}return re}b("metadata",at);function Je(le,H,re,Ie){if(!dt(re))throw new TypeError;return me(Ie)||(Ie=Xe(Ie)),Ae(le,H,re,Ie)}b("defineMetadata",Je);function Ze(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),Ge(le,H,re)}b("hasMetadata",Ze);function xe(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),oe(le,H,re)}b("hasOwnMetadata",xe);function _e(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),Fe(le,H,re)}b("getMetadata",_e);function He(le,H,re){if(!dt(H))throw new TypeError;return me(re)||(re=Xe(re)),ut(le,H,re)}b("getOwnMetadata",He);function Ke(le,H){if(!dt(le))throw new TypeError;return me(H)||(H=Xe(H)),Le(le,H)}b("getMetadataKeys",Ke);function Et(le,H){if(!dt(le))throw new TypeError;return me(H)||(H=Xe(H)),rt(le,H)}b("getOwnMetadataKeys",Et);function ke(le,H,re){if(!dt(H))throw new TypeError;if(me(re)||(re=Xe(re)),!dt(H))throw new TypeError;me(re)||(re=Xe(re));var Ie=Jt(H,re,!1);return me(Ie)?!1:Ie.OrdinaryDeleteMetadata(le,H,re)}b("deleteMetadata",ke);function qe(le,H){for(var re=le.length-1;re>=0;--re){var Ie=le[re],Ye=Ie(H);if(!me(Ye)&&!We(Ye)){if(!Be(Ye))throw new TypeError;H=Ye}}return H}function ne(le,H,re,Ie){for(var Ye=le.length-1;Ye>=0;--Ye){var Ct=le[Ye],ar=Ct(H,re,Ie);if(!me(ar)&&!We(ar)){if(!dt(ar))throw new TypeError;Ie=ar}}return Ie}function Ge(le,H,re){var Ie=oe(le,H,re);if(Ie)return!0;var Ye=Xr(H);return We(Ye)?!1:Ge(le,Ye,re)}function oe(le,H,re){var Ie=Jt(H,re,!1);return me(Ie)?!1:$e(Ie.OrdinaryHasOwnMetadata(le,H,re))}function Fe(le,H,re){var Ie=oe(le,H,re);if(Ie)return ut(le,H,re);var Ye=Xr(H);if(!We(Ye))return Fe(le,Ye,re)}function ut(le,H,re){var Ie=Jt(H,re,!1);if(!me(Ie))return Ie.OrdinaryGetOwnMetadata(le,H,re)}function Ae(le,H,re,Ie){var Ye=Jt(re,Ie,!0);Ye.OrdinaryDefineOwnMetadata(le,H,re,Ie)}function Le(le,H){var re=rt(le,H),Ie=Xr(le);if(Ie===null)return re;var Ye=Le(Ie,H);if(Ye.length<=0)return re;if(re.length<=0)return Ye;for(var Ct=new E,ar=[],jt=0,wt=re;jt<wt.length;jt++){var Mt=wt[jt],ve=Ct.has(Mt);ve||(Ct.add(Mt),ar.push(Mt))}for(var he=0,Re=Ye;he<Re.length;he++){var Mt=Re[he],ve=Ct.has(Mt);ve||(Ct.add(Mt),ar.push(Mt))}return ar}function rt(le,H){var re=Jt(le,H,!1);return re?re.OrdinaryOwnMetadataKeys(le,H):[]}function ye(le){if(le===null)return 1;switch(typeof le){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return le===null?1:6;default:return 6}}function me(le){return le===void 0}function We(le){return le===null}function Ve(le){return typeof le=="symbol"}function dt(le){return typeof le=="object"?le!==null:typeof le=="function"}function Ht(le,H){switch(ye(le)){case 0:return le;case 1:return le;case 2:return le;case 3:return le;case 4:return le;case 5:return le}var re=H===3?"string":H===5?"number":"default",Ie=rr(le,Q);if(Ie!==void 0){var Ye=Ie.call(le,re);if(dt(Ye))throw new TypeError;return Ye}return et(le,re==="default"?"number":re)}function et(le,H){if(H==="string"){var re=le.toString;if(Oe(re)){var Ie=re.call(le);if(!dt(Ie))return Ie}var Ye=le.valueOf;if(Oe(Ye)){var Ie=Ye.call(le);if(!dt(Ie))return Ie}}else{var Ye=le.valueOf;if(Oe(Ye)){var Ie=Ye.call(le);if(!dt(Ie))return Ie}var Ct=le.toString;if(Oe(Ct)){var Ie=Ct.call(le);if(!dt(Ie))return Ie}}throw new TypeError}function $e(le){return!!le}function Te(le){return""+le}function Xe(le){var H=Ht(le,3);return Ve(H)?H:Te(H)}function pt(le){return Array.isArray?Array.isArray(le):le instanceof Object?le instanceof Array:Object.prototype.toString.call(le)==="[object Array]"}function Oe(le){return typeof le=="function"}function Be(le){return typeof le=="function"}function vt(le){switch(ye(le)){case 3:return!0;case 4:return!0;default:return!1}}function Rt(le,H){return le===H||le!==le&&H!==H}function rr(le,H){var re=le[H];if(re!=null){if(!Oe(re))throw new TypeError;return re}}function br(le){var H=rr(le,ie);if(!Oe(H))throw new TypeError;var re=H.call(le);if(!dt(re))throw new TypeError;return re}function lt(le){return le.value}function an(le){var H=le.next();return H.done?!1:H}function $r(le){var H=le.return;H&&H.call(le)}function Xr(le){var H=Object.getPrototypeOf(le);if(typeof le!="function"||le===J||H!==J)return H;var re=le.prototype,Ie=re&&Object.getPrototypeOf(re);if(Ie==null||Ie===Object.prototype)return H;var Ye=Ie.constructor;return typeof Ye!="function"||Ye===le?H:Ye}function Nt(){var le;!me(Se)&&typeof G.Reflect!="undefined"&&!(Se in G.Reflect)&&typeof G.Reflect.defineMetadata=="function"&&(le=kt(G.Reflect));var H,re,Ie,Ye=new ge,Ct={registerProvider:ar,getProvider:wt,setProvider:ve};return Ct;function ar(he){if(!Object.isExtensible(Ct))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case le===he:break;case me(H):H=he;break;case H===he:break;case me(re):re=he;break;case re===he:break;default:Ie===void 0&&(Ie=new E),Ie.add(he);break}}function jt(he,Re){if(!me(H)){if(H.isProviderFor(he,Re))return H;if(!me(re)){if(re.isProviderFor(he,Re))return H;if(!me(Ie))for(var tt=br(Ie);;){var St=an(tt);if(!St)return;var Gt=lt(St);if(Gt.isProviderFor(he,Re))return $r(tt),Gt}}}if(!me(le)&&le.isProviderFor(he,Re))return le}function wt(he,Re){var tt=Ye.get(he),St;return me(tt)||(St=tt.get(Re)),me(St)&&(St=jt(he,Re),me(St)||(me(tt)&&(tt=new M,Ye.set(he,tt)),tt.set(Re,St))),St}function Mt(he){if(me(he))throw new TypeError;return H===he||re===he||!me(Ie)&&Ie.has(he)}function ve(he,Re,tt){if(!Mt(tt))throw new Error("Metadata provider not registered.");var St=wt(he,Re);if(St!==tt){if(!me(St))return!1;var Gt=Ye.get(he);me(Gt)&&(Gt=new M,Ye.set(he,Gt)),Gt.set(Re,tt)}return!0}}function Kt(){var le;return!me(Se)&&dt(G.Reflect)&&Object.isExtensible(G.Reflect)&&(le=G.Reflect[Se]),me(le)&&(le=Nt()),!me(Se)&&dt(G.Reflect)&&Object.isExtensible(G.Reflect)&&Object.defineProperty(G.Reflect,Se,{enumerable:!1,configurable:!1,writable:!1,value:le}),le}function or(le){var H=new ge,re={isProviderFor:function(Mt,ve){var he=H.get(Mt);return me(he)?!1:he.has(ve)},OrdinaryDefineOwnMetadata:ar,OrdinaryHasOwnMetadata:Ye,OrdinaryGetOwnMetadata:Ct,OrdinaryOwnMetadataKeys:jt,OrdinaryDeleteMetadata:wt};return ze.registerProvider(re),re;function Ie(Mt,ve,he){var Re=H.get(Mt),tt=!1;if(me(Re)){if(!he)return;Re=new M,H.set(Mt,Re),tt=!0}var St=Re.get(ve);if(me(St)){if(!he)return;if(St=new M,Re.set(ve,St),!le.setProvider(Mt,ve,re))throw Re.delete(ve),tt&&H.delete(Mt),new Error("Wrong provider for target.")}return St}function Ye(Mt,ve,he){var Re=Ie(ve,he,!1);return me(Re)?!1:$e(Re.has(Mt))}function Ct(Mt,ve,he){var Re=Ie(ve,he,!1);if(!me(Re))return Re.get(Mt)}function ar(Mt,ve,he,Re){var tt=Ie(he,Re,!0);tt.set(Mt,ve)}function jt(Mt,ve){var he=[],Re=Ie(Mt,ve,!1);if(me(Re))return he;for(var tt=Re.keys(),St=br(tt),Gt=0;;){var gr=an(St);if(!gr)return he.length=Gt,he;var At=lt(gr);try{he[Gt]=At}catch(st){try{$r(St)}finally{throw st}}Gt++}}function wt(Mt,ve,he){var Re=Ie(ve,he,!1);if(me(Re)||!Re.delete(Mt))return!1;if(Re.size===0){var tt=H.get(ve);me(tt)||(tt.delete(he),tt.size===0&&H.delete(tt))}return!0}}function kt(le){var H=le.defineMetadata,re=le.hasOwnMetadata,Ie=le.getOwnMetadata,Ye=le.getOwnMetadataKeys,Ct=le.deleteMetadata,ar=new ge,jt={isProviderFor:function(wt,Mt){var ve=ar.get(wt);return me(ve)?Ye(wt,Mt).length?(me(ve)&&(ve=new E,ar.set(wt,ve)),ve.add(Mt),!0):!1:ve.has(Mt)},OrdinaryDefineOwnMetadata:H,OrdinaryHasOwnMetadata:re,OrdinaryGetOwnMetadata:Ie,OrdinaryOwnMetadataKeys:Ye,OrdinaryDeleteMetadata:Ct};return jt}function Jt(le,H,re){var Ie=ze.getProvider(le,H);if(!me(Ie))return Ie;if(re){if(ze.setProvider(le,H,De))return De;throw new Error("Illegal state.")}}function Er(){var le={},H=[],re=function(){function jt(wt,Mt,ve){this._index=0,this._keys=wt,this._values=Mt,this._selector=ve}return jt.prototype["@@iterator"]=function(){return this},jt.prototype[ie]=function(){return this},jt.prototype.next=function(){var wt=this._index;if(wt>=0&&wt<this._keys.length){var Mt=this._selector(this._keys[wt],this._values[wt]);return wt+1>=this._keys.length?(this._index=-1,this._keys=H,this._values=H):this._index++,{value:Mt,done:!1}}return{value:void 0,done:!0}},jt.prototype.throw=function(wt){throw this._index>=0&&(this._index=-1,this._keys=H,this._values=H),wt},jt.prototype.return=function(wt){return this._index>=0&&(this._index=-1,this._keys=H,this._values=H),{value:wt,done:!0}},jt}(),Ie=function(){function jt(){this._keys=[],this._values=[],this._cacheKey=le,this._cacheIndex=-2}return Object.defineProperty(jt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),jt.prototype.has=function(wt){return this._find(wt,!1)>=0},jt.prototype.get=function(wt){var Mt=this._find(wt,!1);return Mt>=0?this._values[Mt]:void 0},jt.prototype.set=function(wt,Mt){var ve=this._find(wt,!0);return this._values[ve]=Mt,this},jt.prototype.delete=function(wt){var Mt=this._find(wt,!1);if(Mt>=0){for(var ve=this._keys.length,he=Mt+1;he<ve;he++)this._keys[he-1]=this._keys[he],this._values[he-1]=this._values[he];return this._keys.length--,this._values.length--,Rt(wt,this._cacheKey)&&(this._cacheKey=le,this._cacheIndex=-2),!0}return!1},jt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=le,this._cacheIndex=-2},jt.prototype.keys=function(){return new re(this._keys,this._values,Ye)},jt.prototype.values=function(){return new re(this._keys,this._values,Ct)},jt.prototype.entries=function(){return new re(this._keys,this._values,ar)},jt.prototype["@@iterator"]=function(){return this.entries()},jt.prototype[ie]=function(){return this.entries()},jt.prototype._find=function(wt,Mt){if(!Rt(this._cacheKey,wt)){this._cacheIndex=-1;for(var ve=0;ve<this._keys.length;ve++)if(Rt(this._keys[ve],wt)){this._cacheIndex=ve;break}}return this._cacheIndex<0&&Mt&&(this._cacheIndex=this._keys.length,this._keys.push(wt),this._values.push(void 0)),this._cacheIndex},jt}();return Ie;function Ye(jt,wt){return jt}function Ct(jt,wt){return wt}function ar(jt,wt){return[jt,wt]}}function wr(){var le=function(){function H(){this._map=new M}return Object.defineProperty(H.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),H.prototype.has=function(re){return this._map.has(re)},H.prototype.add=function(re){return this._map.set(re,re),this},H.prototype.delete=function(re){return this._map.delete(re)},H.prototype.clear=function(){this._map.clear()},H.prototype.keys=function(){return this._map.keys()},H.prototype.values=function(){return this._map.keys()},H.prototype.entries=function(){return this._map.entries()},H.prototype["@@iterator"]=function(){return this.keys()},H.prototype[ie]=function(){return this.keys()},H}();return le}function Br(){var le=16,H=fe.create(),re=Ie();return function(){function wt(){this._key=Ie()}return wt.prototype.has=function(Mt){var ve=Ye(Mt,!1);return ve!==void 0?fe.has(ve,this._key):!1},wt.prototype.get=function(Mt){var ve=Ye(Mt,!1);return ve!==void 0?fe.get(ve,this._key):void 0},wt.prototype.set=function(Mt,ve){var he=Ye(Mt,!0);return he[this._key]=ve,this},wt.prototype.delete=function(Mt){var ve=Ye(Mt,!1);return ve!==void 0?delete ve[this._key]:!1},wt.prototype.clear=function(){this._key=Ie()},wt}();function Ie(){var wt;do wt="@@WeakMap@@"+jt();while(fe.has(H,wt));return H[wt]=!0,wt}function Ye(wt,Mt){if(!j.call(wt,re)){if(!Mt)return;Object.defineProperty(wt,re,{value:fe.create()})}return wt[re]}function Ct(wt,Mt){for(var ve=0;ve<Mt;++ve)wt[ve]=Math.random()*255|0;return wt}function ar(wt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wt)):Ct(new Uint8Array(wt),wt):Ct(new Array(wt),wt)}function jt(){var wt=ar(le);wt[6]=wt[6]&79|64,wt[8]=wt[8]&191|128;for(var Mt="",ve=0;ve<le;++ve){var he=wt[ve];(ve===4||ve===6||ve===8)&&(Mt+="-"),he<16&&(Mt+="0"),Mt+=he.toString(16).toLowerCase()}return Mt}}function zr(le){return le.__=void 0,delete le.__,le}})})(W||(W={}))},73897:function(ft){function N(k,W){(W==null||W>k.length)&&(W=k.length);for(var K=0,b=new Array(W);K<W;K++)b[K]=k[K];return b}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},85372:function(ft){function N(k){if(Array.isArray(k))return k}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},63405:function(ft,N,k){var W=k(73897);function K(b){if(Array.isArray(b))return W(b)}ft.exports=K,ft.exports.__esModule=!0,ft.exports.default=ft.exports},66115:function(ft){function N(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},56690:function(ft){function N(k,W){if(!(k instanceof W))throw new TypeError("Cannot call a class as a function")}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},89728:function(ft,N,k){var W=k(64062);function K(G,j){for(var q=0;q<j.length;q++){var Q=j[q];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(G,W(Q.key),Q)}}function b(G,j,q){return j&&K(G.prototype,j),q&&K(G,q),Object.defineProperty(G,"prototype",{writable:!1}),G}ft.exports=b,ft.exports.__esModule=!0,ft.exports.default=ft.exports},26389:function(ft,N,k){var W=k(73808),K=k(69617),b=k(94993);function G(j){var q=K();return function(){var ie=W(j),te;if(q){var Ce=W(this).constructor;te=Reflect.construct(ie,arguments,Ce)}else te=ie.apply(this,arguments);return b(this,te)}}ft.exports=G,ft.exports.__esModule=!0,ft.exports.default=ft.exports},38416:function(ft,N,k){var W=k(64062);function K(b,G,j){return G=W(G),G in b?Object.defineProperty(b,G,{value:j,enumerable:!0,configurable:!0,writable:!0}):b[G]=j,b}ft.exports=K,ft.exports.__esModule=!0,ft.exports.default=ft.exports},73808:function(ft){function N(k){return ft.exports=N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(K){return K.__proto__||Object.getPrototypeOf(K)},ft.exports.__esModule=!0,ft.exports.default=ft.exports,N(k)}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},61655:function(ft,N,k){var W=k(6015);function K(b,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(G&&G.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),G&&W(b,G)}ft.exports=K,ft.exports.__esModule=!0,ft.exports.default=ft.exports},75263:function(ft,N,k){var W=k(18698).default;function K(G){if(typeof WeakMap!="function")return null;var j=new WeakMap,q=new WeakMap;return(K=function(ie){return ie?q:j})(G)}function b(G,j){if(!j&&G&&G.__esModule)return G;if(G===null||W(G)!="object"&&typeof G!="function")return{default:G};var q=K(j);if(q&&q.has(G))return q.get(G);var Q={__proto__:null},ie=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in G)if(te!=="default"&&Object.prototype.hasOwnProperty.call(G,te)){var Ce=ie?Object.getOwnPropertyDescriptor(G,te):null;Ce&&(Ce.get||Ce.set)?Object.defineProperty(Q,te,Ce):Q[te]=G[te]}return Q.default=G,q&&q.set(G,Q),Q}ft.exports=b,ft.exports.__esModule=!0,ft.exports.default=ft.exports},69617:function(ft){function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},79498:function(ft){function N(k){if(typeof Symbol!="undefined"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},68872:function(ft){function N(k,W){var K=k==null?null:typeof Symbol!="undefined"&&k[Symbol.iterator]||k["@@iterator"];if(K!=null){var b,G,j,q,Q=[],ie=!0,te=!1;try{if(j=(K=K.call(k)).next,W===0){if(Object(K)!==K)return;ie=!1}else for(;!(ie=(b=j.call(K)).done)&&(Q.push(b.value),Q.length!==W);ie=!0);}catch(Ce){te=!0,G=Ce}finally{try{if(!ie&&K.return!=null&&(q=K.return(),Object(q)!==q))return}finally{if(te)throw G}}return Q}}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},12218:function(ft){function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},42281:function(ft){function N(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},42122:function(ft,N,k){var W=k(38416);function K(G,j){var q=Object.keys(G);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(G);j&&(Q=Q.filter(function(ie){return Object.getOwnPropertyDescriptor(G,ie).enumerable})),q.push.apply(q,Q)}return q}function b(G){for(var j=1;j<arguments.length;j++){var q=arguments[j]!=null?arguments[j]:{};j%2?K(Object(q),!0).forEach(function(Q){W(G,Q,q[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(q)):K(Object(q)).forEach(function(Q){Object.defineProperty(G,Q,Object.getOwnPropertyDescriptor(q,Q))})}return G}ft.exports=b,ft.exports.__esModule=!0,ft.exports.default=ft.exports},94993:function(ft,N,k){var W=k(18698).default,K=k(66115);function b(G,j){if(j&&(W(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K(G)}ft.exports=b,ft.exports.__esModule=!0,ft.exports.default=ft.exports},17061:function(ft,N,k){var W=k(18698).default;function K(){"use strict";ft.exports=K=function(){return G},ft.exports.__esModule=!0,ft.exports.default=ft.exports;var b,G={},j=Object.prototype,q=j.hasOwnProperty,Q=Object.defineProperty||function(ut,Ae,Le){ut[Ae]=Le.value},ie=typeof Symbol=="function"?Symbol:{},te=ie.iterator||"@@iterator",Ce=ie.asyncIterator||"@@asyncIterator",pe=ie.toStringTag||"@@toStringTag";function fe(ut,Ae,Le){return Object.defineProperty(ut,Ae,{value:Le,enumerable:!0,configurable:!0,writable:!0}),ut[Ae]}try{fe({},"")}catch(ut){fe=function(Le,rt,ye){return Le[rt]=ye}}function J(ut,Ae,Le,rt){var ye=Ae&&Ae.prototype instanceof Ue?Ae:Ue,me=Object.create(ye.prototype),We=new oe(rt||[]);return Q(me,"_invoke",{value:ke(ut,Le,We)}),me}function M(ut,Ae,Le){try{return{type:"normal",arg:ut.call(Ae,Le)}}catch(rt){return{type:"throw",arg:rt}}}G.wrap=J;var E="suspendedStart",ge="suspendedYield",Se="executing",ze="completed",De={};function Ue(){}function at(){}function Je(){}var Ze={};fe(Ze,te,function(){return this});var xe=Object.getPrototypeOf,_e=xe&&xe(xe(Fe([])));_e&&_e!==j&&q.call(_e,te)&&(Ze=_e);var He=Je.prototype=Ue.prototype=Object.create(Ze);function Ke(ut){["next","throw","return"].forEach(function(Ae){fe(ut,Ae,function(Le){return this._invoke(Ae,Le)})})}function Et(ut,Ae){function Le(ye,me,We,Ve){var dt=M(ut[ye],ut,me);if(dt.type!=="throw"){var Ht=dt.arg,et=Ht.value;return et&&W(et)=="object"&&q.call(et,"__await")?Ae.resolve(et.__await).then(function($e){Le("next",$e,We,Ve)},function($e){Le("throw",$e,We,Ve)}):Ae.resolve(et).then(function($e){Ht.value=$e,We(Ht)},function($e){return Le("throw",$e,We,Ve)})}Ve(dt.arg)}var rt;Q(this,"_invoke",{value:function(me,We){function Ve(){return new Ae(function(dt,Ht){Le(me,We,dt,Ht)})}return rt=rt?rt.then(Ve,Ve):Ve()}})}function ke(ut,Ae,Le){var rt=E;return function(ye,me){if(rt===Se)throw new Error("Generator is already running");if(rt===ze){if(ye==="throw")throw me;return{value:b,done:!0}}for(Le.method=ye,Le.arg=me;;){var We=Le.delegate;if(We){var Ve=qe(We,Le);if(Ve){if(Ve===De)continue;return Ve}}if(Le.method==="next")Le.sent=Le._sent=Le.arg;else if(Le.method==="throw"){if(rt===E)throw rt=ze,Le.arg;Le.dispatchException(Le.arg)}else Le.method==="return"&&Le.abrupt("return",Le.arg);rt=Se;var dt=M(ut,Ae,Le);if(dt.type==="normal"){if(rt=Le.done?ze:ge,dt.arg===De)continue;return{value:dt.arg,done:Le.done}}dt.type==="throw"&&(rt=ze,Le.method="throw",Le.arg=dt.arg)}}}function qe(ut,Ae){var Le=Ae.method,rt=ut.iterator[Le];if(rt===b)return Ae.delegate=null,Le==="throw"&&ut.iterator.return&&(Ae.method="return",Ae.arg=b,qe(ut,Ae),Ae.method==="throw")||Le!=="return"&&(Ae.method="throw",Ae.arg=new TypeError("The iterator does not provide a '"+Le+"' method")),De;var ye=M(rt,ut.iterator,Ae.arg);if(ye.type==="throw")return Ae.method="throw",Ae.arg=ye.arg,Ae.delegate=null,De;var me=ye.arg;return me?me.done?(Ae[ut.resultName]=me.value,Ae.next=ut.nextLoc,Ae.method!=="return"&&(Ae.method="next",Ae.arg=b),Ae.delegate=null,De):me:(Ae.method="throw",Ae.arg=new TypeError("iterator result is not an object"),Ae.delegate=null,De)}function ne(ut){var Ae={tryLoc:ut[0]};1 in ut&&(Ae.catchLoc=ut[1]),2 in ut&&(Ae.finallyLoc=ut[2],Ae.afterLoc=ut[3]),this.tryEntries.push(Ae)}function Ge(ut){var Ae=ut.completion||{};Ae.type="normal",delete Ae.arg,ut.completion=Ae}function oe(ut){this.tryEntries=[{tryLoc:"root"}],ut.forEach(ne,this),this.reset(!0)}function Fe(ut){if(ut||ut===""){var Ae=ut[te];if(Ae)return Ae.call(ut);if(typeof ut.next=="function")return ut;if(!isNaN(ut.length)){var Le=-1,rt=function ye(){for(;++Le<ut.length;)if(q.call(ut,Le))return ye.value=ut[Le],ye.done=!1,ye;return ye.value=b,ye.done=!0,ye};return rt.next=rt}}throw new TypeError(W(ut)+" is not iterable")}return at.prototype=Je,Q(He,"constructor",{value:Je,configurable:!0}),Q(Je,"constructor",{value:at,configurable:!0}),at.displayName=fe(Je,pe,"GeneratorFunction"),G.isGeneratorFunction=function(ut){var Ae=typeof ut=="function"&&ut.constructor;return!!Ae&&(Ae===at||(Ae.displayName||Ae.name)==="GeneratorFunction")},G.mark=function(ut){return Object.setPrototypeOf?Object.setPrototypeOf(ut,Je):(ut.__proto__=Je,fe(ut,pe,"GeneratorFunction")),ut.prototype=Object.create(He),ut},G.awrap=function(ut){return{__await:ut}},Ke(Et.prototype),fe(Et.prototype,Ce,function(){return this}),G.AsyncIterator=Et,G.async=function(ut,Ae,Le,rt,ye){ye===void 0&&(ye=Promise);var me=new Et(J(ut,Ae,Le,rt),ye);return G.isGeneratorFunction(Ae)?me:me.next().then(function(We){return We.done?We.value:me.next()})},Ke(He),fe(He,pe,"Generator"),fe(He,te,function(){return this}),fe(He,"toString",function(){return"[object Generator]"}),G.keys=function(ut){var Ae=Object(ut),Le=[];for(var rt in Ae)Le.push(rt);return Le.reverse(),function ye(){for(;Le.length;){var me=Le.pop();if(me in Ae)return ye.value=me,ye.done=!1,ye}return ye.done=!0,ye}},G.values=Fe,oe.prototype={constructor:oe,reset:function(Ae){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(Ge),!Ae)for(var Le in this)Le.charAt(0)==="t"&&q.call(this,Le)&&!isNaN(+Le.slice(1))&&(this[Le]=b)},stop:function(){this.done=!0;var Ae=this.tryEntries[0].completion;if(Ae.type==="throw")throw Ae.arg;return this.rval},dispatchException:function(Ae){if(this.done)throw Ae;var Le=this;function rt(Ht,et){return We.type="throw",We.arg=Ae,Le.next=Ht,et&&(Le.method="next",Le.arg=b),!!et}for(var ye=this.tryEntries.length-1;ye>=0;--ye){var me=this.tryEntries[ye],We=me.completion;if(me.tryLoc==="root")return rt("end");if(me.tryLoc<=this.prev){var Ve=q.call(me,"catchLoc"),dt=q.call(me,"finallyLoc");if(Ve&&dt){if(this.prev<me.catchLoc)return rt(me.catchLoc,!0);if(this.prev<me.finallyLoc)return rt(me.finallyLoc)}else if(Ve){if(this.prev<me.catchLoc)return rt(me.catchLoc,!0)}else{if(!dt)throw new Error("try statement without catch or finally");if(this.prev<me.finallyLoc)return rt(me.finallyLoc)}}}},abrupt:function(Ae,Le){for(var rt=this.tryEntries.length-1;rt>=0;--rt){var ye=this.tryEntries[rt];if(ye.tryLoc<=this.prev&&q.call(ye,"finallyLoc")&&this.prev<ye.finallyLoc){var me=ye;break}}me&&(Ae==="break"||Ae==="continue")&&me.tryLoc<=Le&&Le<=me.finallyLoc&&(me=null);var We=me?me.completion:{};return We.type=Ae,We.arg=Le,me?(this.method="next",this.next=me.finallyLoc,De):this.complete(We)},complete:function(Ae,Le){if(Ae.type==="throw")throw Ae.arg;return Ae.type==="break"||Ae.type==="continue"?this.next=Ae.arg:Ae.type==="return"?(this.rval=this.arg=Ae.arg,this.method="return",this.next="end"):Ae.type==="normal"&&Le&&(this.next=Le),De},finish:function(Ae){for(var Le=this.tryEntries.length-1;Le>=0;--Le){var rt=this.tryEntries[Le];if(rt.finallyLoc===Ae)return this.complete(rt.completion,rt.afterLoc),Ge(rt),De}},catch:function(Ae){for(var Le=this.tryEntries.length-1;Le>=0;--Le){var rt=this.tryEntries[Le];if(rt.tryLoc===Ae){var ye=rt.completion;if(ye.type==="throw"){var me=ye.arg;Ge(rt)}return me}}throw new Error("illegal catch attempt")},delegateYield:function(Ae,Le,rt){return this.delegate={iterator:Fe(Ae),resultName:Le,nextLoc:rt},this.method==="next"&&(this.arg=b),De}},G}ft.exports=K,ft.exports.__esModule=!0,ft.exports.default=ft.exports},6015:function(ft){function N(k,W){return ft.exports=N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,G){return b.__proto__=G,b},ft.exports.__esModule=!0,ft.exports.default=ft.exports,N(k,W)}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},27424:function(ft,N,k){var W=k(85372),K=k(68872),b=k(86116),G=k(12218);function j(q,Q){return W(q)||K(q,Q)||b(q,Q)||G()}ft.exports=j,ft.exports.__esModule=!0,ft.exports.default=ft.exports},51589:function(ft,N,k){var W=k(85372),K=k(79498),b=k(86116),G=k(12218);function j(q){return W(q)||K(q)||b(q)||G()}ft.exports=j,ft.exports.__esModule=!0,ft.exports.default=ft.exports},861:function(ft,N,k){var W=k(63405),K=k(79498),b=k(86116),G=k(42281);function j(q){return W(q)||K(q)||b(q)||G()}ft.exports=j,ft.exports.__esModule=!0,ft.exports.default=ft.exports},95036:function(ft,N,k){var W=k(18698).default;function K(b,G){if(W(b)!="object"||!b)return b;var j=b[Symbol.toPrimitive];if(j!==void 0){var q=j.call(b,G||"default");if(W(q)!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(b)}ft.exports=K,ft.exports.__esModule=!0,ft.exports.default=ft.exports},64062:function(ft,N,k){var W=k(18698).default,K=k(95036);function b(G){var j=K(G,"string");return W(j)=="symbol"?j:String(j)}ft.exports=b,ft.exports.__esModule=!0,ft.exports.default=ft.exports},18698:function(ft){function N(k){"@babel/helpers - typeof";return ft.exports=N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},ft.exports.__esModule=!0,ft.exports.default=ft.exports,N(k)}ft.exports=N,ft.exports.__esModule=!0,ft.exports.default=ft.exports},86116:function(ft,N,k){var W=k(73897);function K(b,G){if(b){if(typeof b=="string")return W(b,G);var j=Object.prototype.toString.call(b).slice(8,-1);if(j==="Object"&&b.constructor&&(j=b.constructor.name),j==="Map"||j==="Set")return Array.from(b);if(j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return W(b,G)}}ft.exports=K,ft.exports.__esModule=!0,ft.exports.default=ft.exports},64687:function(ft,N,k){var W=k(17061)();ft.exports=W;try{regeneratorRuntime=W}catch(K){typeof globalThis=="object"?globalThis.regeneratorRuntime=W:Function("r","regeneratorRuntime = r")(W)}},96695:function(ft,N,k){var W=k(96263);function K(b,G){var j=typeof Symbol!="undefined"&&b[Symbol.iterator]||b["@@iterator"];if(!j){if(Array.isArray(b)||(j=W(b))||G&&b&&typeof b.length=="number"){j&&(b=j);var q=0,Q=function(){};return{s:Q,n:function(){return q>=b.length?{done:!0}:{done:!1,value:b[q++]}},e:function(fe){throw fe},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,te=!1,Ce;return{s:function(){j=j.call(b)},n:function(){var fe=j.next();return ie=fe.done,fe},e:function(fe){te=!0,Ce=fe},f:function(){try{!ie&&j.return!=null&&j.return()}finally{if(te)throw Ce}}}}ft.exports=K,ft.exports.__esModule=!0,ft.exports.default=ft.exports},27771:function(ft,N){"use strict";var k=Array.isArray;N.Z=k},97582:function(ft,N,k){"use strict";k.d(N,{CR:function(){return Se},Jh:function(){return J},XA:function(){return ge},ZT:function(){return K},_T:function(){return G},ev:function(){return Ue},mG:function(){return fe},pi:function(){return b},pr:function(){return De}});var W=function(Ae,Le){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rt,ye){rt.__proto__=ye}||function(rt,ye){for(var me in ye)Object.prototype.hasOwnProperty.call(ye,me)&&(rt[me]=ye[me])},W(Ae,Le)};function K(Ae,Le){if(typeof Le!="function"&&Le!==null)throw new TypeError("Class extends value "+String(Le)+" is not a constructor or null");W(Ae,Le);function rt(){this.constructor=Ae}Ae.prototype=Le===null?Object.create(Le):(rt.prototype=Le.prototype,new rt)}var b=function(){return b=Object.assign||function(Le){for(var rt,ye=1,me=arguments.length;ye<me;ye++){rt=arguments[ye];for(var We in rt)Object.prototype.hasOwnProperty.call(rt,We)&&(Le[We]=rt[We])}return Le},b.apply(this,arguments)};function G(Ae,Le){var rt={};for(var ye in Ae)Object.prototype.hasOwnProperty.call(Ae,ye)&&Le.indexOf(ye)<0&&(rt[ye]=Ae[ye]);if(Ae!=null&&typeof Object.getOwnPropertySymbols=="function")for(var me=0,ye=Object.getOwnPropertySymbols(Ae);me<ye.length;me++)Le.indexOf(ye[me])<0&&Object.prototype.propertyIsEnumerable.call(Ae,ye[me])&&(rt[ye[me]]=Ae[ye[me]]);return rt}function j(Ae,Le,rt,ye){var me=arguments.length,We=me<3?Le:ye===null?ye=Object.getOwnPropertyDescriptor(Le,rt):ye,Ve;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")We=Reflect.decorate(Ae,Le,rt,ye);else for(var dt=Ae.length-1;dt>=0;dt--)(Ve=Ae[dt])&&(We=(me<3?Ve(We):me>3?Ve(Le,rt,We):Ve(Le,rt))||We);return me>3&&We&&Object.defineProperty(Le,rt,We),We}function q(Ae,Le){return function(rt,ye){Le(rt,ye,Ae)}}function Q(Ae,Le,rt,ye,me,We){function Ve(Rt){if(Rt!==void 0&&typeof Rt!="function")throw new TypeError("Function expected");return Rt}for(var dt=ye.kind,Ht=dt==="getter"?"get":dt==="setter"?"set":"value",et=!Le&&Ae?ye.static?Ae:Ae.prototype:null,$e=Le||(et?Object.getOwnPropertyDescriptor(et,ye.name):{}),Te,Xe=!1,pt=rt.length-1;pt>=0;pt--){var Oe={};for(var Be in ye)Oe[Be]=Be==="access"?{}:ye[Be];for(var Be in ye.access)Oe.access[Be]=ye.access[Be];Oe.addInitializer=function(Rt){if(Xe)throw new TypeError("Cannot add initializers after decoration has completed");We.push(Ve(Rt||null))};var vt=(0,rt[pt])(dt==="accessor"?{get:$e.get,set:$e.set}:$e[Ht],Oe);if(dt==="accessor"){if(vt===void 0)continue;if(vt===null||typeof vt!="object")throw new TypeError("Object expected");(Te=Ve(vt.get))&&($e.get=Te),(Te=Ve(vt.set))&&($e.set=Te),(Te=Ve(vt.init))&&me.unshift(Te)}else(Te=Ve(vt))&&(dt==="field"?me.unshift(Te):$e[Ht]=Te)}et&&Object.defineProperty(et,ye.name,$e),Xe=!0}function ie(Ae,Le,rt){for(var ye=arguments.length>2,me=0;me<Le.length;me++)rt=ye?Le[me].call(Ae,rt):Le[me].call(Ae);return ye?rt:void 0}function te(Ae){return typeof Ae=="symbol"?Ae:"".concat(Ae)}function Ce(Ae,Le,rt){return typeof Le=="symbol"&&(Le=Le.description?"[".concat(Le.description,"]"):""),Object.defineProperty(Ae,"name",{configurable:!0,value:rt?"".concat(rt," ",Le):Le})}function pe(Ae,Le){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Ae,Le)}function fe(Ae,Le,rt,ye){function me(We){return We instanceof rt?We:new rt(function(Ve){Ve(We)})}return new(rt||(rt=Promise))(function(We,Ve){function dt($e){try{et(ye.next($e))}catch(Te){Ve(Te)}}function Ht($e){try{et(ye.throw($e))}catch(Te){Ve(Te)}}function et($e){$e.done?We($e.value):me($e.value).then(dt,Ht)}et((ye=ye.apply(Ae,Le||[])).next())})}function J(Ae,Le){var rt={label:0,sent:function(){if(We[0]&1)throw We[1];return We[1]},trys:[],ops:[]},ye,me,We,Ve;return Ve={next:dt(0),throw:dt(1),return:dt(2)},typeof Symbol=="function"&&(Ve[Symbol.iterator]=function(){return this}),Ve;function dt(et){return function($e){return Ht([et,$e])}}function Ht(et){if(ye)throw new TypeError("Generator is already executing.");for(;Ve&&(Ve=0,et[0]&&(rt=0)),rt;)try{if(ye=1,me&&(We=et[0]&2?me.return:et[0]?me.throw||((We=me.return)&&We.call(me),0):me.next)&&!(We=We.call(me,et[1])).done)return We;switch(me=0,We&&(et=[et[0]&2,We.value]),et[0]){case 0:case 1:We=et;break;case 4:return rt.label++,{value:et[1],done:!1};case 5:rt.label++,me=et[1],et=[0];continue;case 7:et=rt.ops.pop(),rt.trys.pop();continue;default:if(We=rt.trys,!(We=We.length>0&&We[We.length-1])&&(et[0]===6||et[0]===2)){rt=0;continue}if(et[0]===3&&(!We||et[1]>We[0]&&et[1]<We[3])){rt.label=et[1];break}if(et[0]===6&&rt.label<We[1]){rt.label=We[1],We=et;break}if(We&&rt.label<We[2]){rt.label=We[2],rt.ops.push(et);break}We[2]&&rt.ops.pop(),rt.trys.pop();continue}et=Le.call(Ae,rt)}catch($e){et=[6,$e],me=0}finally{ye=We=0}if(et[0]&5)throw et[1];return{value:et[0]?et[1]:void 0,done:!0}}}var M=Object.create?function(Ae,Le,rt,ye){ye===void 0&&(ye=rt);var me=Object.getOwnPropertyDescriptor(Le,rt);(!me||("get"in me?!Le.__esModule:me.writable||me.configurable))&&(me={enumerable:!0,get:function(){return Le[rt]}}),Object.defineProperty(Ae,ye,me)}:function(Ae,Le,rt,ye){ye===void 0&&(ye=rt),Ae[ye]=Le[rt]};function E(Ae,Le){for(var rt in Ae)rt!=="default"&&!Object.prototype.hasOwnProperty.call(Le,rt)&&M(Le,Ae,rt)}function ge(Ae){var Le=typeof Symbol=="function"&&Symbol.iterator,rt=Le&&Ae[Le],ye=0;if(rt)return rt.call(Ae);if(Ae&&typeof Ae.length=="number")return{next:function(){return Ae&&ye>=Ae.length&&(Ae=void 0),{value:Ae&&Ae[ye++],done:!Ae}}};throw new TypeError(Le?"Object is not iterable.":"Symbol.iterator is not defined.")}function Se(Ae,Le){var rt=typeof Symbol=="function"&&Ae[Symbol.iterator];if(!rt)return Ae;var ye=rt.call(Ae),me,We=[],Ve;try{for(;(Le===void 0||Le-- >0)&&!(me=ye.next()).done;)We.push(me.value)}catch(dt){Ve={error:dt}}finally{try{me&&!me.done&&(rt=ye.return)&&rt.call(ye)}finally{if(Ve)throw Ve.error}}return We}function ze(){for(var Ae=[],Le=0;Le<arguments.length;Le++)Ae=Ae.concat(Se(arguments[Le]));return Ae}function De(){for(var Ae=0,Le=0,rt=arguments.length;Le<rt;Le++)Ae+=arguments[Le].length;for(var ye=Array(Ae),me=0,Le=0;Le<rt;Le++)for(var We=arguments[Le],Ve=0,dt=We.length;Ve<dt;Ve++,me++)ye[me]=We[Ve];return ye}function Ue(Ae,Le,rt){if(rt||arguments.length===2)for(var ye=0,me=Le.length,We;ye<me;ye++)(We||!(ye in Le))&&(We||(We=Array.prototype.slice.call(Le,0,ye)),We[ye]=Le[ye]);return Ae.concat(We||Array.prototype.slice.call(Le))}function at(Ae){return this instanceof at?(this.v=Ae,this):new at(Ae)}function Je(Ae,Le,rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye=rt.apply(Ae,Le||[]),me,We=[];return me={},Ve("next"),Ve("throw"),Ve("return"),me[Symbol.asyncIterator]=function(){return this},me;function Ve(Xe){ye[Xe]&&(me[Xe]=function(pt){return new Promise(function(Oe,Be){We.push([Xe,pt,Oe,Be])>1||dt(Xe,pt)})})}function dt(Xe,pt){try{Ht(ye[Xe](pt))}catch(Oe){Te(We[0][3],Oe)}}function Ht(Xe){Xe.value instanceof at?Promise.resolve(Xe.value.v).then(et,$e):Te(We[0][2],Xe)}function et(Xe){dt("next",Xe)}function $e(Xe){dt("throw",Xe)}function Te(Xe,pt){Xe(pt),We.shift(),We.length&&dt(We[0][0],We[0][1])}}function Ze(Ae){var Le,rt;return Le={},ye("next"),ye("throw",function(me){throw me}),ye("return"),Le[Symbol.iterator]=function(){return this},Le;function ye(me,We){Le[me]=Ae[me]?function(Ve){return(rt=!rt)?{value:at(Ae[me](Ve)),done:!1}:We?We(Ve):Ve}:We}}function xe(Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le=Ae[Symbol.asyncIterator],rt;return Le?Le.call(Ae):(Ae=typeof ge=="function"?ge(Ae):Ae[Symbol.iterator](),rt={},ye("next"),ye("throw"),ye("return"),rt[Symbol.asyncIterator]=function(){return this},rt);function ye(We){rt[We]=Ae[We]&&function(Ve){return new Promise(function(dt,Ht){Ve=Ae[We](Ve),me(dt,Ht,Ve.done,Ve.value)})}}function me(We,Ve,dt,Ht){Promise.resolve(Ht).then(function(et){We({value:et,done:dt})},Ve)}}function _e(Ae,Le){return Object.defineProperty?Object.defineProperty(Ae,"raw",{value:Le}):Ae.raw=Le,Ae}var He=Object.create?function(Ae,Le){Object.defineProperty(Ae,"default",{enumerable:!0,value:Le})}:function(Ae,Le){Ae.default=Le};function Ke(Ae){if(Ae&&Ae.__esModule)return Ae;var Le={};if(Ae!=null)for(var rt in Ae)rt!=="default"&&Object.prototype.hasOwnProperty.call(Ae,rt)&&M(Le,Ae,rt);return He(Le,Ae),Le}function Et(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function ke(Ae,Le,rt,ye){if(rt==="a"&&!ye)throw new TypeError("Private accessor was defined without a getter");if(typeof Le=="function"?Ae!==Le||!ye:!Le.has(Ae))throw new TypeError("Cannot read private member from an object whose class did not declare it");return rt==="m"?ye:rt==="a"?ye.call(Ae):ye?ye.value:Le.get(Ae)}function qe(Ae,Le,rt,ye,me){if(ye==="m")throw new TypeError("Private method is not writable");if(ye==="a"&&!me)throw new TypeError("Private accessor was defined without a setter");if(typeof Le=="function"?Ae!==Le||!me:!Le.has(Ae))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ye==="a"?me.call(Ae,rt):me?me.value=rt:Le.set(Ae,rt),rt}function ne(Ae,Le){if(Le===null||typeof Le!="object"&&typeof Le!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Ae=="function"?Le===Ae:Ae.has(Le)}function Ge(Ae,Le,rt){if(Le!=null){if(typeof Le!="object"&&typeof Le!="function")throw new TypeError("Object expected.");var ye;if(rt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");ye=Le[Symbol.asyncDispose]}if(ye===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");ye=Le[Symbol.dispose]}if(typeof ye!="function")throw new TypeError("Object not disposable.");Ae.stack.push({value:Le,dispose:ye,async:rt})}else rt&&Ae.stack.push({async:!0});return Le}var oe=typeof SuppressedError=="function"?SuppressedError:function(Ae,Le,rt){var ye=new Error(rt);return ye.name="SuppressedError",ye.error=Ae,ye.suppressed=Le,ye};function Fe(Ae){function Le(ye){Ae.error=Ae.hasError?new oe(ye,Ae.error,"An error was suppressed during disposal."):ye,Ae.hasError=!0}function rt(){for(;Ae.stack.length;){var ye=Ae.stack.pop();try{var me=ye.dispose&&ye.dispose.call(ye.value);if(ye.async)return Promise.resolve(me).then(rt,function(We){return Le(We),rt()})}catch(We){Le(We)}}if(Ae.hasError)throw Ae.error}return rt()}var ut={__extends:K,__assign:b,__rest:G,__decorate:j,__param:q,__metadata:pe,__awaiter:fe,__generator:J,__createBinding:M,__exportStar:E,__values:ge,__read:Se,__spread:ze,__spreadArrays:De,__spreadArray:Ue,__await:at,__asyncGenerator:Je,__asyncDelegator:Ze,__asyncValues:xe,__makeTemplateObject:_e,__importStar:Ke,__importDefault:Et,__classPrivateFieldGet:ke,__classPrivateFieldSet:qe,__classPrivateFieldIn:ne,__addDisposableResource:Ge,__disposeResources:Fe}}}]);
}());