!(function(){var fX=Object.defineProperty,dX=Object.defineProperties;var hX=Object.getOwnPropertyDescriptors;var f9=Object.getOwnPropertySymbols;var pX=Object.prototype.hasOwnProperty,gX=Object.prototype.propertyIsEnumerable;var LP=(Te,fe)=>(fe=Symbol[Te])?fe:Symbol.for("Symbol."+Te),vX=Te=>{throw TypeError(Te)},bi=Math.pow,d9=(Te,fe,D)=>fe in Te?fX(Te,fe,{enumerable:!0,configurable:!0,writable:!0,value:D}):Te[fe]=D,Cp=(Te,fe)=>{for(var D in fe||(fe={}))pX.call(fe,D)&&d9(Te,D,fe[D]);if(f9)for(var D of f9(fe))gX.call(fe,D)&&d9(Te,D,fe[D]);return Te},rO=(Te,fe)=>dX(Te,hX(fe));var mX=function(Te,fe){this[0]=Te,this[1]=fe};var h9=Te=>{var fe=Te[LP("asyncIterator")],D=!1,xt,st={};return fe==null?(fe=Te[LP("iterator")](),xt=Ot=>st[Ot]=Xt=>fe[Ot](Xt)):(fe=fe.call(Te),xt=Ot=>st[Ot]=Xt=>{if(D){if(D=!1,Ot==="throw")throw Xt;return Xt}return D=!0,{done:!1,value:new mX(new Promise(nt=>{var qt=fe[Ot](Xt);qt instanceof Object||vX("Object expected"),nt(qt)}),1)}}),st[LP("iterator")]=()=>st,xt("next"),"throw"in fe?xt("throw"):st.throw=Ot=>{throw Ot},"return"in fe&&xt("return"),st};(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[772],{79611:function(Te,fe,D){"use strict";var xt=D(67906),st=(0,xt.i)("Bar");fe.Z=st},78677:function(Te,fe,D){"use strict";var xt=D(67906),st=(0,xt.i)("Column");fe.Z=st},80652:function(Te,fe,D){"use strict";var xt=D(67906),st=(0,xt.i)("Line");fe.Z=st},63430:function(Te,fe,D){"use strict";var xt=D(67906),st=(0,xt.i)("Pie");fe.Z=st},67906:function(Te,fe,D){"use strict";D.d(fe,{i:function(){return cX}});var xt={};D.r(xt),D.d(xt,{area:function(){return u_},bottom:function(){return is},bottomLeft:function(){return is},bottomRight:function(){return is},inside:function(){return is},left:function(){return is},outside:function(){return E6},right:function(){return is},spider:function(){return Ag},surround:function(){return Cg},top:function(){return is},topLeft:function(){return is},topRight:function(){return is}});var st={};D.r(st),D.d(st,{interpolateBlues:function(){return eT},interpolateBrBG:function(){return tx},interpolateBuGn:function(){return Tf},interpolateBuPu:function(){return iv},interpolateCividis:function(){return sT},interpolateCool:function(){return Zh},interpolateCubehelixDefault:function(){return W6},interpolateGnBu:function(){return H6},interpolateGreens:function(){return nT},interpolateGreys:function(){return rT},interpolateInferno:function(){return AT},interpolateMagma:function(){return wT},interpolateOrRd:function(){return ov},interpolateOranges:function(){return aT},interpolatePRGn:function(){return H5},interpolatePiYG:function(){return Zl},interpolatePlasma:function(){return TT},interpolatePuBu:function(){return Ji},interpolatePuBuGn:function(){return q5},interpolatePuOr:function(){return V5},interpolatePuRd:function(){return K5},interpolatePurples:function(){return iT},interpolateRainbow:function(){return OT},interpolateRdBu:function(){return j6},interpolateRdGy:function(){return z6},interpolateRdPu:function(){return Q5},interpolateRdYlBu:function(){return U6},interpolateRdYlGn:function(){return rx},interpolateReds:function(){return oT},interpolateSinebow:function(){return Lx},interpolateSpectral:function(){return Z6},interpolateTurbo:function(){return vv},interpolateViridis:function(){return ET},interpolateWarm:function(){return ST},interpolateYlGn:function(){return J5},interpolateYlGnBu:function(){return Cf},interpolateYlOrBr:function(){return tT},interpolateYlOrRd:function(){return cx},schemeAccent:function(){return P5},schemeBlues:function(){return sv},schemeBrBG:function(){return Ys},schemeBuGn:function(){return Mh},schemeBuPu:function(){return X5},schemeCategory10:function(){return H_},schemeDark2:function(){return M6},schemeGnBu:function(){return Hl},schemeGreens:function(){return lx},schemeGreys:function(){return cv},schemeObservable10:function(){return Eh},schemeOrRd:function(){return Lh},schemeOranges:function(){return fx},schemePRGn:function(){return Af},schemePaired:function(){return Of},schemePastel1:function(){return V_},schemePastel2:function(){return I5},schemePiYG:function(){return ex},schemePuBu:function(){return av},schemePuBuGn:function(){return Vl},schemePuOr:function(){return nx},schemePuRd:function(){return ix},schemePurples:function(){return lv},schemeRdBu:function(){return W5},schemeRdGy:function(){return G5},schemeRdPu:function(){return Or},schemeRdYlBu:function(){return $5},schemeRdYlGn:function(){return Y5},schemeReds:function(){return ux},schemeSet1:function(){return k5},schemeSet2:function(){return jc},schemeSet3:function(){return W_},schemeSpectral:function(){return rv},schemeTableau10:function(){return R5},schemeYlGn:function(){return ox},schemeYlGnBu:function(){return Wl},schemeYlOrBr:function(){return ax},schemeYlOrRd:function(){return sx}});var Ot={};D.r(Ot),D.d(Ot,{geoAlbers:function(){return QD},geoAlbersUsa:function(){return tV},geoAzimuthalEqualArea:function(){return eV},geoAzimuthalEqualAreaRaw:function(){return $L},geoAzimuthalEquidistant:function(){return nV},geoAzimuthalEquidistantRaw:function(){return YL},geoConicConformal:function(){return iV},geoConicConformalRaw:function(){return eN},geoConicEqualArea:function(){return NS},geoConicEqualAreaRaw:function(){return KD},geoConicEquidistant:function(){return aV},geoConicEquidistantRaw:function(){return nN},geoEqualEarth:function(){return cV},geoEqualEarthRaw:function(){return XL},geoEquirectangular:function(){return oV},geoEquirectangularRaw:function(){return Gm},geoGnomonic:function(){return lV},geoGnomonicRaw:function(){return qL},geoIdentity:function(){return uV},geoMercator:function(){return rV},geoMercatorRaw:function(){return Wm},geoNaturalEarth1:function(){return fV},geoNaturalEarth1Raw:function(){return KL},geoOrthographic:function(){return dV},geoOrthographicRaw:function(){return QL},geoProjection:function(){return lc},geoProjectionMutator:function(){return WL},geoStereographic:function(){return hV},geoStereographicRaw:function(){return JL},geoTransverseMercator:function(){return pV},geoTransverseMercatorRaw:function(){return tP}});var Xt={};D.r(Xt),D.d(Xt,{frequency:function(){return IW},id:function(){return kW},name:function(){return RW},weight:function(){return PW}});var nt=D(67294),qt=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},jt=function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(h){return function(p){return d([h,p])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(n=0)),n;)try{if(r=1,o&&(s=h[0]&2?o.return:h[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,h[1])).done)return s;switch(o=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,o=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(p){h=[6,p],o=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Ut=nt.version||"",gt,ee,J,Q="__rc_react_root__";try{var Rt=parseInt(Ut.split(".")[0],10);if(Rt>=18){var Tt=D(20745);gt=Tt.createRoot}else{var Ft=D(73935);ee=Ft.render,J=Ft.unmountComponentAtNode}}catch(t){}function kt(t,e){e[Q]||(e[Q]=gt(e)),e[Q].render(t)}function Yt(t,e){if(ee)ee(t,e);else throw new Error("ReactDOM.render is not available in this React version")}function Se(t,e){gt?kt(t,e):Yt(t,e)}function Ie(t){if(J)J(t);else throw new Error("ReactDOM.unmountComponentAtNode is not available in this React version")}function Ye(t){return qt(this,void 0,void 0,function(){return jt(this,function(e){return[2,Promise.resolve().then(function(){var n,r;(r=(n=t[Q])===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),delete t[Q]})]})})}function un(t){return qt(this,void 0,void 0,function(){return jt(this,function(e){return gt?[2,Ye(t)]:[2,Ie(t)]})})}var we=new Map;typeof document!="undefined"&&we.set("tooltip",document.createElement("div"));var Vt=function(t,e){e===void 0&&(e=!1);var n=null;if(e)n=we.get("tooltip");else if(n=document.createElement("div"),t!=null&&t.key){var r=we.get(t.key);r?n=r:we.set(t.key,n)}return Se(t,n),n},et=function(){return et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},et.apply(this,arguments)},oe=function(t,e){if(e===void 0&&(e={}),typeof document=="undefined")return"loading";var n="";e&&Object.keys(e).forEach(function(l){n+="".concat(l,": ").concat(e[l],`;
`)});var r=t.attachShadow({mode:"open"}),o=document.createElement("div"),s=document.createElement("style");s.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
    `.concat(n,`
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `),o.classList.add("loading"),o.innerHTML="<div></div><div></div><div></div><div></div>",r.appendChild(s),r.appendChild(o)},Gt=function(t){var e=t.loadingTemplate,n=t.theme,r=n===void 0?"light":n,o=t.loading,s=nt.useRef(null),l=typeof o=="object"?o:{},u=l.container,d=u===void 0?{}:u,h=l.icon,p=h===void 0?{}:h;nt.useEffect(function(){!e&&s.current&&oe(s.current,p)},[]);var v=function(){return e||nt.createElement("div",{ref:s})};return nt.createElement("div",{className:"charts-loading-container",style:et({position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,background:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"},d)},v())},ke=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Me=function(t){ke(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var o=n.props.errorTemplate;switch(r){default:return typeof o=="function"?o(r):o||nt.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},n}return e.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},e.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):nt.createElement(nt.Fragment,null,this.props.children)},e}(nt.Component),j=D(96486),Mt,$=function(){return Mt||(Mt=document.createElement("canvas").getContext("2d")),Mt},Ct=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},wt=(0,j.memoize)(function(t,e){e===void 0&&(e={});var n=e.fontSize,r=e.fontFamily,o=r===void 0?"sans-serif":r,s=e.fontWeight,l=e.fontStyle,u=e.fontVariant,d=$();return d.font=[l,s,u,"".concat(n,"px"),o].join(" "),d.measureText((0,j.isString)(t)?t:"")},function(t,e){return e===void 0&&(e={}),Ct([t],(0,j.values)(e),!0).join("")}),z=function(t,e){return e===void 0&&(e={}),wt(t,e).width},ot=function(t,e){e===void 0&&(e={});var n=wt(t,e);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent},Jt=function(t){var e=[/\breact\b/i,/\.jsx/,/children:\s*\[/,/\*#__PURE__\*/],n=/(\w+)?\.createElement\(\s*(['"`])([^'"`]+)\2/g,r=new Set(["g","circle","ellipse","image","rect","line","polyline","polygon","text","path","html","mesh"]);if(e.some(function(s){return s.test(t)}))return!0;var o=t.match(n);return o?o.some(function(s){var l=s.match(/\.createElement\(\s*(['"`])([^'"`]+)\1/);return l&&!r.has(l[2].toLowerCase())}):!1},de=function(){return de=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},de.apply(this,arguments)};function pe(t,e){var n=(0,nt.useRef)(null),r=(0,nt.useRef)(null),o=(0,nt.useRef)(null),s=e.onReady,l=e.onEvent,u=function(p,v){var m;p===void 0&&(p="image/png");var b=(m=o.current)===null||m===void 0?void 0:m.getElementsByTagName("canvas")[0];return b==null?void 0:b.toDataURL(p,v)},d=function(p,v,m){p===void 0&&(p="download"),v===void 0&&(v="image/png");var b=p;p.indexOf(".")===-1&&(b="".concat(p,".").concat(v.split("/")[1]));var _=u(v,m),S=document.createElement("a");return S.href=_,S.download=b,document.body.appendChild(S),S.click(),document.body.removeChild(S),S=null,b},h=function(p,v){v===void 0&&(v=!1);var m=Object.keys(p),b=v;m.forEach(function(_){var S=p[_];_==="tooltip"&&(b=!0),(0,j.isFunction)(S)&&Jt("".concat(S))?p[_]=function(){for(var O=[],E=0;E<arguments.length;E++)O[E]=arguments[E];return Vt(S.apply(void 0,O),b)}:(0,j.isArray)(S)?S.forEach(function(O){h(O,b)}):(0,j.isObject)(S)?h(S,b):b=v})};return(0,nt.useEffect)(function(){n.current&&!(0,j.isEqual)(r.current,e)&&(r.current=(0,j.cloneDeep)(e),h(e),n.current.update(e),n.current.render())},[e]),(0,nt.useEffect)(function(){if(!o.current)return function(){return null};r.current||(r.current=(0,j.cloneDeep)(e)),h(e);var p=new t(o.current,de({},e));p.toDataURL=u,p.downloadImage=d,p.render(),n.current=p,s&&s(p);var v=function(m){l&&l(p,m)};return p.on("*",v),function(){n.current&&(n.current.destroy(),n.current.off("*",v),n.current=void 0)}},[]),{chart:n,container:o}}var Xe="*",je=function(){function t(){this._events={}}return t.prototype.on=function(e,n,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:n,once:!!r}),this},t.prototype.once=function(e,n){return this.on(e,n,!0)},t.prototype.emit=function(e){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=this._events[e]||[],l=this._events[Xe]||[],u=function(d){for(var h=d.length,p=0;p<h;p++)if(d[p]){var v=d[p],m=v.callback,b=v.once;b&&(d.splice(p,1),d.length===0&&delete n._events[e],h--,p--),m.apply(n,r)}};u(s),u(l)},t.prototype.off=function(e,n){if(!e)this._events={};else if(!n)delete this._events[e];else{for(var r=this._events[e]||[],o=r.length,s=0;s<o;s++)r[s].callback===n&&(r.splice(s,1),o--,s--);r.length===0&&delete this._events[e]}return this},t.prototype.getEvents=function(){return this._events},t}(),sn=je;const ln="main-layer",Zt="label-layer",ct="element",zt="view",ue="plot",_e="component",St="label",re="area",Pt="mask",Y="axis-breaks",Dt="axis-breaks-group";var V=D(4559),C=D(15671),F=D(43144),At=D(53640),Kt=D(60136),ne=D(76714),be=D(25897),Ce=D(32945),Re=D(85975),Le=D(77160);var He=function(t){function e(){var n;(0,C.Z)(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=(0,At.Z)(this,e,[].concat(o)),n.landmarks=[],n}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"rotate",value:function(r,o,s){if(this.relElevation=(0,V._O)(o),this.relAzimuth=(0,V._O)(r),this.relRoll=(0,V._O)(s),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===V.iM.EXPLORING){var l=Ce.yY(Ce.Ue(),[1,0,0],(0,V.Vl)((this.rotateWorld?1:-1)*this.relElevation)),u=Ce.yY(Ce.Ue(),[0,1,0],(0,V.Vl)((this.rotateWorld?1:-1)*this.relAzimuth)),d=Ce.yY(Ce.Ue(),[0,0,1],(0,V.Vl)(this.relRoll)),h=Ce.Jp(Ce.Ue(),u,l);h=Ce.Jp(Ce.Ue(),h,d);var p=Re.fromQuat(Re.create(),h);Re.translate(this.matrix,this.matrix,[0,0,-this.distance]),Re.multiply(this.matrix,this.matrix,p),Re.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===V.iM.ORBITING||this.type===V.iM.EXPLORING?this._getPosition():this.type===V.iM.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(r,o){var s=(0,V.O4)(r,o,0),l=Le.d9(this.position);return Le.IH(l,l,Le.bA(Le.Ue(),this.right,s[0])),Le.IH(l,l,Le.bA(Le.Ue(),this.up,s[1])),this._setPosition(l),this.triggerUpdate(),this}},{key:"dolly",value:function(r){var o=this.forward,s=Le.d9(this.position),l=r*this.dollyingStep,u=this.distance+r*this.dollyingStep;return l=Math.max(Math.min(u,this.maxDistance),this.minDistance)-this.distance,s[0]+=l*o[0],s[1]+=l*o[1],s[2]+=l*o[2],this._setPosition(s),this.type===V.iM.ORBITING||this.type===V.iM.EXPLORING?this._getDistance():this.type===V.iM.TRACKING&&Le.IH(this.focalPoint,s,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(r){var o,s,l,u,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=d.position,p=h===void 0?this.position:h,v=d.focalPoint,m=v===void 0?this.focalPoint:v,b=d.roll,_=d.zoom,S=new V.GZ.CameraContribution;S.setType(this.type,void 0),S.setPosition(p[0],(o=p[1])!==null&&o!==void 0?o:this.position[1],(s=p[2])!==null&&s!==void 0?s:this.position[2]),S.setFocalPoint(m[0],(l=m[1])!==null&&l!==void 0?l:this.focalPoint[1],(u=m[2])!==null&&u!==void 0?u:this.focalPoint[2]),S.setRoll(b!=null?b:this.roll),S.setZoom(_!=null?_:this.zoom);var O={name:r,matrix:Re.clone(S.getWorldTransform()),right:Le.d9(S.right),up:Le.d9(S.up),forward:Le.d9(S.forward),position:Le.d9(S.getPosition()),focalPoint:Le.d9(S.getFocalPoint()),distanceVector:Le.d9(S.getDistanceVector()),distance:S.getDistance(),dollyingStep:S.getDollyingStep(),azimuth:S.getAzimuth(),elevation:S.getElevation(),roll:S.getRoll(),relAzimuth:S.relAzimuth,relElevation:S.relElevation,relRoll:S.relRoll,zoom:S.getZoom()};return this.landmarks.push(O),O}},{key:"gotoLandmark",value:function(r){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(0,ne.Z)(r)?this.landmarks.find(function(tt){return tt.name===r}):r;if(l){var u=(0,be.Z)(s)?{duration:s}:s,d=u.easing,h=d===void 0?"linear":d,p=u.duration,v=p===void 0?100:p,m=u.easingFunction,b=m===void 0?void 0:m,_=u.onfinish,S=_===void 0?void 0:_,O=u.onframe,E=O===void 0?void 0:O,A=.01;this.cancelLandmarkAnimation();var M=l.position,L=l.focalPoint,I=l.zoom,R=l.roll,N=b||V.GZ.EasingFunction(h),Z,W=function(){o.setFocalPoint(L),o.setPosition(M),o.setRoll(R),o.setZoom(I),o.computeMatrix(),o.triggerUpdate(),S==null||S()};if(v===0)return W();var it=function(pt){Z===void 0&&(Z=pt);var K=pt-Z;if(K>=v){W();return}var lt=N(K/v),ft=Le.Ue(),vt=Le.Ue(),It=1,_t=0;Le.t7(ft,o.focalPoint,L,lt),Le.t7(vt,o.position,M,lt),_t=o.roll*(1-lt)+R*lt,It=o.zoom*(1-lt)+I*lt,o.setFocalPoint(ft),o.setPosition(vt),o.setRoll(_t),o.setZoom(It);var Lt=Le.TK(ft,L)+Le.TK(vt,M);if(Lt<=A&&I===void 0&&R===void 0)return W();o.computeMatrix(),o.triggerUpdate(),K<v&&(E==null||E(lt),o.landmarkAnimationID=o.canvas.requestAnimationFrame(it))};this.canvas.requestAnimationFrame(it)}}}])}(V.V1);V.GZ.CameraContribution=He;var $e=null,Ht=0,ie=new WeakMap,te=null,ve=null,ut,k;function H(t,e){return ut=new $e(t,e)}function rt(t){return k||(k=$e.copy(ut),k.oldValue=t,k)}function yt(){ut=k=void 0}function bt(t){return t===k||t===ut}function ce(t,e){return t===e?t:k&&bt(t)?k:null}function se(t){t.nodes.forEach(function(e){var n=ie.get(e);n&&n.forEach(function(r){r.observer===t&&r.removeTransientObservers()})})}function Ne(t,e){for(var n=t;n;n=n.parentNode){var r=ie.get(n);if(r)for(var o=0;o<r.length;o++){var s=r[o],l=s.options;if(!(n!==t&&!l.subtree)){var u=e(l);u&&s.enqueue(u)}}}}var Pe=!1,rn=null;function Oe(t){rn.push(t),Pe||(Pe=!0,typeof runtime.globalThis!="undefined"?runtime.globalThis.setTimeout(qe):qe())}function qe(){Pe=!1;var t=rn;rn=[],t.sort(function(n,r){return n.uid-r.uid});var e=!1;t.forEach(function(n){var r=n.takeRecords();se(n),r.length&&(n.callback(r,n),e=!0)}),e&&qe()}var fn=D(74902),gn=D(97685),dn=D(81957),bn=D(95147);var Un=function(t){function e(n,r,o,s){var l;return(0,C.Z)(this,e),l=(0,At.Z)(this,e,[n]),l.currentTime=o,l.timelineTime=s,l.target=r,l.type="finish",l.bubbles=!1,l.currentTarget=r,l.defaultPrevented=!1,l.eventPhase=l.AT_TARGET,l.timeStamp=Date.now(),l.currentTime=o,l.timelineTime=s,l}return(0,Kt.Z)(e,t),(0,F.Z)(e)}(V.xA),Kn=0,gr=function(){function t(e,n){var r;(0,C.Z)(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(Kn++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return(0,F.Z)(t,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var n=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(r,o){n.resolveReadyPromise=function(){r(n)},n.rejectReadyPromise=function(){o(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var n=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(r,o){n.resolveFinishedPromise=function(){r(n)},n.rejectFinishedPromise=function(){o(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(n){if(n=Number(n),!isNaN(n)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var r;this._startTime=Number((r=this.timeline)===null||r===void 0?void 0:r.currentTime)-n/this.playbackRate}this.currentTimePending=!1,this._currentTime!==n&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(n,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(n){if(n!==null){if(this.updatePromises(),n=Number(n),isNaN(n)||this._paused||this._idle)return;this._startTime=n,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(n){if(n!==this._playbackRate){this.updatePromises();var r=this.currentTime;this._playbackRate=n,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),r!==null&&(this.currentTime=r),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var n;if((n=this.effect.target)!==null&&n!==void 0&&n.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var r=this.oldPlayState,o=this.pending?"pending":this.playState;return this.readyPromise&&o!==r&&(o==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):r==="pending"?this.resolveReadyPromise():o==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&o!==r&&(o==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):o==="finished"?this.resolveFinishedPromise():r==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=o,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var n=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var r=new Un(null,this,this.currentTime,null);setTimeout(function(){n.oncancel(r)})}}},{key:"reverse",value:function(){this.updatePromises();var n=this.currentTime;this.playbackRate*=-1,this.play(),n!==null&&(this.currentTime=n),this.updatePromises()}},{key:"updatePlaybackRate",value:function(n){this.playbackRate=n}},{key:"targetAnimations",value:function(){var n,r=(n=this.effect)===null||n===void 0?void 0:n.target;return r.getAnimations()}},{key:"markTarget",value:function(){var n=this.targetAnimations();n.indexOf(this)===-1&&n.push(this)}},{key:"unmarkTarget",value:function(){var n=this.targetAnimations(),r=n.indexOf(this);r!==-1&&n.splice(r,1)}},{key:"tick",value:function(n,r){!this._idle&&!this._paused&&(this._startTime===null?r&&(this.startTime=n-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((n-this._startTime)*this.playbackRate)),r&&(this.currentTimePending=!1,this.fireEvents(n))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(V.jf)}},{key:"addEventListener",value:function(n,r,o){throw new Error(V.jf)}},{key:"removeEventListener",value:function(n,r,o){throw new Error(V.jf)}},{key:"dispatchEvent",value:function(n){throw new Error(V.jf)}},{key:"commitStyles",value:function(){throw new Error(V.jf)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var n;this._inEffect=!!((n=this.effect)!==null&&n!==void 0&&n.update(-1))}else{var r;this._inEffect=!!((r=this.effect)!==null&&r!==void 0&&r.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(n,r){n!==this._currentTime&&(this._currentTime=n,this._isFinished&&!r&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(n){var r=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var o=new Un(null,this,this.currentTime,n);setTimeout(function(){r.onfinish&&r.onfinish(o)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var s=new Un(null,this,this.currentTime,n);this.onframe(s)}this._finishedFlag=!1}}}])}(),xr=4,ni=.001,Vr=1e-7,zr=10,Ar=11,ui=1/(Ar-1),Vi=typeof Float32Array=="function",Bi=function(e,n){return 1-3*n+3*e},_i=function(e,n){return 3*n-6*e},no=function(e){return 3*e},ro=function(e,n,r){return((Bi(n,r)*e+_i(n,r))*e+no(n))*e},Za=function(e,n,r){return 3*Bi(n,r)*e*e+2*_i(n,r)*e+no(n)},Mo=function(e,n,r,o,s){var l,u,d=0;do u=n+(r-n)/2,l=ro(u,o,s)-e,l>0?r=u:n=u;while(Math.abs(l)>Vr&&++d<zr);return u},Ea=function(e,n,r,o){for(var s=0;s<xr;++s){var l=Za(n,r,o);if(l===0)return n;var u=ro(n,r,o)-e;n-=u/l}return n},ri=function(e,n,r,o){if(!(e>=0&&e<=1&&r>=0&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&r===o)return function(d){return d};for(var s=Vi?new Float32Array(Ar):new Array(Ar),l=0;l<Ar;++l)s[l]=ro(l*ui,e,r);var u=function(h){for(var p=0,v=1,m=Ar-1;v!==m&&s[v]<=h;++v)p+=ui;--v;var b=(h-s[v])/(s[v+1]-s[v]),_=p+b*ui,S=Za(_,e,r);return S>=ni?Ea(h,_,e,r):S===0?_:Mo(h,p,p+ui,e,r)};return function(d){return d===0||d===1?d:ro(u(d),n,o)}},xi=function(e){return e=e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},at=function(e){return Math.pow(e,2)},ht=function(e){return Math.pow(e,3)},Wt=function(e){return Math.pow(e,4)},ae=function(e){return Math.pow(e,5)},Ae=function(e){return Math.pow(e,6)},De=function(e){return 1-Math.cos(e*Math.PI/2)},ge=function(e){return 1-Math.sqrt(1-e*e)},me=function(e){return e*e*(3*e-2)},Ze=function(e){for(var n,r=4;e<((n=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((n*3-2)/22-e,2)},We=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=(0,gn.Z)(n,2),o=r[0],s=o===void 0?1:o,l=r[1],u=l===void 0?.5:l,d=(0,dn.Z)(Number(s),1,10),h=(0,dn.Z)(Number(u),.1,2);return e===0||e===1?e:-d*Math.pow(2,10*(e-1))*Math.sin((e-1-h/(Math.PI*2)*Math.asin(1/d))*(Math.PI*2)/h)},vn=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=(0,gn.Z)(n,4),s=o[0],l=s===void 0?1:s,u=o[1],d=u===void 0?100:u,h=o[2],p=h===void 0?10:h,v=o[3],m=v===void 0?0:v;l=(0,dn.Z)(l,.1,1e3),d=(0,dn.Z)(d,.1,1e3),p=(0,dn.Z)(p,.1,1e3),m=(0,dn.Z)(m,.1,1e3);var b=Math.sqrt(d/l),_=p/(2*Math.sqrt(d*l)),S=_<1?b*Math.sqrt(1-_*_):0,O=1,E=_<1?(_*b+-m)/S:-m+b,A=r?r*e/1e3:e;return _<1?A=Math.exp(-A*_*b)*(O*Math.cos(S*A)+E*Math.sin(S*A)):A=(O+E*A)*Math.exp(-A*b),e===0||e===1?e:1-A},xn=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=n,o=(0,gn.Z)(r,2),s=o[0],l=s===void 0?10:s,u=o[1],d=u==="start"?Math.ceil:Math.floor;return d((0,dn.Z)(e,0,1)*l)/l},In=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=(0,gn.Z)(n,4),o=r[0],s=r[1],l=r[2],u=r[3];return ri(o,s,l,u)(e)},mn=ri(.42,0,1,1),_n=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return 1-e(1-n,r,o)}},On=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return n<.5?e(n*2,r,o)/2:1-e(n*-2+2,r,o)/2}},hn=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;return n<.5?(1-e(1-n*2,r,o))/2:(e(n*2-1,r,o)+1)/2}},Hn={steps:xn,"step-start":function(e){return xn(e,[1,"start"])},"step-end":function(e){return xn(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":In,ease:function(e){return In(e,[.25,.1,.25,1])},in:mn,out:_n(mn),"in-out":On(mn),"out-in":hn(mn),"in-quad":at,"out-quad":_n(at),"in-out-quad":On(at),"out-in-quad":hn(at),"in-cubic":ht,"out-cubic":_n(ht),"in-out-cubic":On(ht),"out-in-cubic":hn(ht),"in-quart":Wt,"out-quart":_n(Wt),"in-out-quart":On(Wt),"out-in-quart":hn(Wt),"in-quint":ae,"out-quint":_n(ae),"in-out-quint":On(ae),"out-in-quint":hn(ae),"in-expo":Ae,"out-expo":_n(Ae),"in-out-expo":On(Ae),"out-in-expo":hn(Ae),"in-sine":De,"out-sine":_n(De),"in-out-sine":On(De),"out-in-sine":hn(De),"in-circ":ge,"out-circ":_n(ge),"in-out-circ":On(ge),"out-in-circ":hn(ge),"in-back":me,"out-back":_n(me),"in-out-back":On(me),"out-in-back":hn(me),"in-bounce":Ze,"out-bounce":_n(Ze),"in-out-bounce":On(Ze),"out-in-bounce":hn(Ze),"in-elastic":We,"out-elastic":_n(We),"in-out-elastic":On(We),"out-in-elastic":hn(We),spring:vn,"spring-in":vn,"spring-out":_n(vn),"spring-in-out":On(vn),"spring-out-in":hn(vn)},Rn=function(e){return xi(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},Vn=function(e){return Hn[Rn(e)]||Hn.linear},Ln=function(e){return e},Bn=1,nr=.5,ji=0;function Pi(t,e){return function(n){if(n>=1)return 1;var r=1/t;return n+=e*r,n-n%r}}var Wr="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",Wi=new RegExp("cubic-bezier\\(".concat(Wr,",").concat(Wr,",").concat(Wr,",").concat(Wr,"\\)")),Gi=/steps\(\s*(\d+)\s*\)/,Et=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function Bt(t){var e=Wi.exec(t);if(e)return ri.apply(void 0,(0,fn.Z)(e.slice(1).map(Number)));var n=Gi.exec(t);if(n)return Pi(Number(n[1]),ji);var r=Et.exec(t);return r?Pi(Number(r[1]),{start:Bn,middle:nr,end:ji}[r[2]]):Vn(t)}function xe(t){return Math.abs(Ke(t)/(t.playbackRate||1))}function Ke(t){var e;return t.duration===0||t.iterations===0?0:(t.duration==="auto"?0:Number(t.duration))*((e=t.iterations)!==null&&e!==void 0?e:1)}var yn=0,Cn=1,Wn=2,Gr=3;function ii(t,e,n){if(e===null)return yn;var r=n.endTime;return e<Math.min(n.delay,r)?Cn:e>=Math.min(n.delay+t+n.endDelay,r)?Wn:Gr}function Tr(t,e,n,r,o){switch(r){case Cn:return e==="backwards"||e==="both"?0:null;case Gr:return n-o;case Wn:return e==="forwards"||e==="both"?t:null;case yn:return null}}function pi(t,e,n,r,o){var s=o;return t===0?e!==Cn&&(s+=n):s+=r/t,s}function PP(t,e,n,r,o,s){var l=t===1/0?e%1:t%1;return l===0&&n===Wn&&r!==0&&(o!==0||s===0)&&(l=1),l}function Ur(t,e,n,r){return t===Wn&&e===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function uc(t,e,n){var r=t;if(t!=="normal"&&t!=="reverse"){var o=e;t==="alternate-reverse"&&(o+=1),r="normal",o!==1/0&&o%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function ul(t,e,n){var r=ii(t,e,n),o=Tr(t,n.fill,e,r,n.delay);if(o===null)return null;var s=n.duration==="auto"?0:n.duration,l=pi(s,r,n.iterations,o,n.iterationStart),u=PP(l,n.iterationStart,r,n.iterations,o,s),d=Ur(r,n.iterations,u,l),h=uc(n.direction,d,u);return n.currentIteration=d,n.progress=h,n.easingFunction(h)}function iO(t,e,n){var r=oO(t,e),o=aO(r,n);return function(s,l){if(l!==null)o.filter(function(d){return l>=d.applyFrom&&l<d.applyTo}).forEach(function(d){var h=l-d.startOffset,p=d.endOffset-d.startOffset,v=p===0?0:h/p;s.setAttribute(d.property,d.interpolation(v),!1,!1)});else for(var u in r)oy(u)&&s.setAttribute(u,null)}}function oy(t){return t!=="offset"&&t!=="easing"&&t!=="composite"&&t!=="computedOffset"}function oO(t,e){for(var n={},r=0;r<t.length;r++)for(var o in t[r])if(oy(o)){var s={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:Bt(t[r].easing)||e.easingFunction,value:t[r][o]};n[o]=n[o]||[],n[o].push(s)}return n}function aO(t,e){var n=[];for(var r in t)for(var o=t[r],s=0;s<o.length-1;s++){var l=s,u=s+1,d=o[l].computedOffset,h=o[u].computedOffset,p=d,v=h;s===0&&(p=-1/0,h===0&&(u=l)),s===o.length-2&&(v=1/0,d===1&&(l=u)),n.push({applyFrom:p,applyTo:v,startOffset:o[l].computedOffset,endOffset:o[u].computedOffset,easingFunction:o[l].easingFunction,property:r,interpolation:Mp(r,o[l].value,o[u].value,e)})}return n.sort(function(m,b){return m.startOffset-b.startOffset}),n}var ay=function(e,n,r){return function(o){var s=fd(e,n,o);return(0,be.Z)(s)?s:r(s)}};function Mp(t,e,n,r){var o=V.N1[t];if(o&&o.syntax&&o.int){var s=V.GZ.styleValueRegistry.getPropertySyntax(o.syntax);if(s){var l=s.parser,u=l?l(e,r):e,d=l?l(n,r):n,h=s.mixer(u,d,r);if(h){var p=ay.apply(void 0,(0,fn.Z)(h));return function(v){return v===0?e:v===1?n:p(v)}}}}return ay(!1,!0,function(v){return v?n:e})}function fd(t,e,n){if(typeof t=="number"&&typeof e=="number")return t*(1-n)+e*n;if(typeof t=="boolean"&&typeof e=="boolean"||typeof t=="string"&&typeof e=="string")return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,o=e.length,s=Math.max(r,o),l=[],u=0;u<s;u++)l.push(fd(t[u<r?u:r-1],e[u<o?u:o-1],n));return l}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(e))}var sO=function(){function t(){(0,C.Z)(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=Ln,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return(0,F.Z)(t,[{key:"easing",get:function(){return this._easing},set:function(n){this.easingFunction=Bt(n),this._easing=n}}])}();function cO(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var o=r.length,s=0;s<o;s++){if(!e[s]){var l={};"offset"in t&&(l.offset=Number(t.offset)),"easing"in t&&(l.easing=t.easing),"composite"in t&&(l.composite=t.composite),e[s]=l}r[s]!==void 0&&r[s]!==null&&(e[s][n]=r[s])}}return e.sort(function(u,d){return(u.computedOffset||0)-(d.computedOffset||0)}),e}function sy(t,e){if(t===null)return[];Array.isArray(t)||(t=cO(t));for(var n=t.map(function(d){var h={};e!=null&&e.composite&&(h.composite="auto");for(var p in d){var v=d[p];if(p==="offset"){if(v!==null){if(v=Number(v),!isFinite(v))throw new Error("Keyframe offsets must be numbers.");if(v<0||v>1)throw new Error("Keyframe offsets must be between 0 and 1.");h.computedOffset=v}}else if(p==="composite"&&["replace","add","accumulate","auto"].indexOf(v)===-1)throw new Error("".concat(v," compositing is not supported"));h[p]=v}return h.offset===void 0&&(h.offset=null),h.easing===void 0&&(h.easing=(e==null?void 0:e.easing)||"linear"),h.composite===void 0&&(h.composite="auto"),h}),r=!0,o=-1/0,s=0;s<n.length;s++){var l=n[s].offset;if((0,bn.Z)(l))r=!1;else{if(l<o)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");o=l}}n=n.filter(function(d){return Number(d.offset)>=0&&Number(d.offset)<=1});function u(){var d,h=n,p=h.length;if(n[p-1].computedOffset=Number((d=n[p-1].offset)!==null&&d!==void 0?d:1),p>1){var v;n[0].computedOffset=Number((v=n[0].offset)!==null&&v!==void 0?v:0)}for(var m=0,b=Number(n[0].computedOffset),_=1;_<p;_++){var S=n[_].computedOffset;if(!(0,bn.Z)(S)&&!(0,bn.Z)(b)){for(var O=1;O<_-m;O++)n[m+O].computedOffset=b+(Number(S)-b)*O/(_-m);m=_,b=Number(S)}}}return r||u(),n}var lO="backwards|forwards|both|none".split("|"),uO="reverse|alternate|alternate-reverse".split("|");function fO(t,e){var n=new sO;return e&&(n.fill="both",n.duration="auto"),typeof t=="number"&&!isNaN(t)?n.duration=t:t!==void 0&&Object.keys(t).forEach(function(r){if(t[r]!==void 0&&t[r]!==null&&t[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof t[r]!="number"||isNaN(t[r]))||r==="fill"&&lO.indexOf(t[r])===-1||r==="direction"&&uO.indexOf(t[r])===-1)return;n[r]=t[r]}}),n}function dO(t,e){return t=hO(t!=null?t:{duration:"auto"}),fO(t,e)}function hO(t){return typeof t=="number"&&(isNaN(t)?t={duration:"auto"}:t={duration:t}),t}var pO=function(){function t(e,n,r){var o=this;(0,C.Z)(this,t),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=dO(r,!1),this.timing.effect=this,this.timing.activeDuration=xe(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=sy(n,this.timing),this.interpolations=iO(this.normalizedKeyframes,this.timing,this.target);var s=V.GZ.globalThis.Proxy;this.computedTiming=s?new s(this.timing,{get:function(u,d){return d==="duration"?u.duration==="auto"?0:u.duration:d==="fill"?u.fill==="auto"?"none":u.fill:d==="localTime"?o.animation&&o.animation.currentTime||null:d==="currentIteration"?!o.animation||o.animation.playState!=="running"?null:u.currentIteration||0:d==="progress"?!o.animation||o.animation.playState!=="running"?null:u.progress||0:u[d]},set:function(){return!0}}):this.timing}return(0,F.Z)(t,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(n){return n===null?!1:(this.timeFraction=ul(this.timing.activeDuration,n,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(n){this.normalizedKeyframes=sy(n)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(n){var r=this;Object.keys(n||{}).forEach(function(o){r.timing[o]=n[o]})}}])}();function cy(t,e){return Number(t.id)-Number(e.id)}var gO=function(){function t(e){var n=this;(0,C.Z)(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var o=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(cy),n.animations=n.tick(r,!0,n.animations)[0],o.forEach(function(s){s[1](r)}),n.applyPendingEffects()},this.document=e}return(0,F.Z)(t,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(n,r,o){var s=new pO(n,r,o),l=new gr(s,this);return this.animations.push(l),this.restartWebAnimationsNextTick(),l.updatePromises(),l.play(),l.updatePromises(),l}},{key:"applyDirtiedAnimation",value:function(n){var r=this;if(!this.inTick){n.markTarget();var o=n.targetAnimations();o.sort(cy);var s=this.tick(Number(this.currentTime),!1,o.slice())[1];s.forEach(function(l){var u=r.animations.indexOf(l);u!==-1&&r.animations.splice(u,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(n){n==null||n.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(n){return n.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(n){return n.playState!=="finished"&&n.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(n){var r=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([r,n]),r}},{key:"requestAnimationFrame",value:function(n){var r=this;return this.rAF(function(o){r.updateAnimationsPromises(),n(o),r.updateAnimationsPromises()})}},{key:"tick",value:function(n,r,o){var s=this,l,u;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=n,this.ticking=!1;var d=[],h=[],p=[],v=[];return o.forEach(function(m){m.tick(n,r),m._inEffect?(h.push(m.effect),m.markTarget()):(d.push(m.effect),m.unmarkTarget()),m._needsTick&&(s.ticking=!0);var b=m._inEffect||m._needsTick;m._inTimeline=b,b?p.push(m):v.push(m)}),(l=this.pendingEffects).push.apply(l,d),(u=this.pendingEffects).push.apply(u,h),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[p,v]}}])}();V.GZ.EasingFunction=Bt,V.GZ.AnimationTimeline=gO;var vO=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Lp=(t,e,n)=>[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]];Lp.style=["fill"];const ly=Lp.bind(void 0);ly.style=["stroke","lineWidth"];const dd=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]];dd.style=["fill"];const uy=dd.bind(void 0);uy.style=["fill"];const fy=dd.bind(void 0);fy.style=["stroke","lineWidth"];const Pp=(t,e,n)=>{const r=n*.618;return[["M",t-r,e],["L",t,e-n],["L",t+r,e],["L",t,e+n],["Z"]]};Pp.style=["fill"];const dy=Pp.bind(void 0);dy.style=["stroke","lineWidth"];const Ip=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]};Ip.style=["fill"];const hy=Ip.bind(void 0);hy.style=["stroke","lineWidth"];const kp=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]};kp.style=["fill"];const py=kp.bind(void 0);py.style=["stroke","lineWidth"];const Rp=(t,e,n)=>{const r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]};Rp.style=["fill"];const gy=Rp.bind(void 0);gy.style=["stroke","lineWidth"];const Dp=(t,e,n)=>{const r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]};Dp.style=["fill"];const vy=Dp.bind(void 0);vy.style=["stroke","lineWidth"];const yy=(t,e,n)=>[["M",t,e+n],["L",t,e-n]];yy.style=["stroke","lineWidth"];const by=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]];by.style=["stroke","lineWidth"];const _y=(t,e,n)=>[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]];_y.style=["stroke","lineWidth"];const xy=(t,e,n)=>[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]];xy.style=["stroke","lineWidth"];const Sy=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];Sy.style=["stroke","lineWidth"];const Np=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];Np.style=["stroke","lineWidth"];const Oy=Np.bind(void 0);Oy.style=["stroke","lineWidth"];const Ey=(t,e,n)=>[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]];Ey.style=["stroke","lineWidth"];const wy=(t,e,n)=>[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]];wy.style=["stroke","lineWidth"];const Ay=(t,e,n)=>[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]];Ay.style=["stroke","lineWidth"];const Ty=(t,e,n)=>[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]];Ty.style=["stroke","lineWidth"];const Cy=(t,e,n)=>[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]];Cy.style=["stroke","lineWidth"];const fl=new Map([["bowtie",Dp],["cross",by],["dash",Oy],["diamond",Pp],["dot",Np],["hexagon",Rp],["hollowBowtie",vy],["hollowDiamond",dy],["hollowHexagon",gy],["hollowPoint",ly],["hollowSquare",fy],["hollowTriangle",hy],["hollowTriangleDown",py],["hv",wy],["hvh",Ty],["hyphen",Sy],["line",yy],["plus",xy],["point",Lp],["rect",uy],["smooth",Ey],["square",dd],["tick",_y],["triangleDown",kp],["triangle",Ip],["vh",Ay],["vhv",Cy]]);function mO(t,e){var{d:n,fill:r,lineWidth:o,path:s,stroke:l,color:u}=e,d=vO(e,["d","fill","lineWidth","path","stroke","color"]);const h=fl.get(t)||fl.get("point");return(...p)=>new V.y$({style:Object.assign(Object.assign({},d),{d:h(...p),stroke:h.style.includes("stroke")?u||l:"",fill:h.style.includes("fill")?u||r:"",lineWidth:h.style.includes("lineWidth")?o||o||2:0})})}function yO(t,e){fl.set(t,e)}function IP(t){fl.delete(t)}const My={};function oi(t,e){t.startsWith("symbol.")?yO(t.split(".").pop(),e):Object.assign(My,{[t]:e})}var hr=D(4942);function bO(t,e){var n=e.cx,r=n===void 0?0:n,o=e.cy,s=o===void 0?0:o,l=e.r;t.arc(r,s,l,0,Math.PI*2,!1)}function Ly(t,e){var n=e.cx,r=n===void 0?0:n,o=e.cy,s=o===void 0?0:o,l=e.rx,u=e.ry;if(t.ellipse)t.ellipse(r,s,l,u,0,0,Math.PI*2,!1);else{var d=l>u?l:u,h=l>u?1:l/u,p=l>u?u/l:1;t.save(),t.scale(h,p),t.arc(r,s,d,0,Math.PI*2)}}function Py(t,e){var n=e.x1,r=e.y1,o=e.x2,s=e.y2,l=e.markerStart,u=e.markerEnd,d=e.markerStartOffset,h=e.markerEndOffset,p=0,v=0,m=0,b=0,_=0,S,O;l&&(0,V.RV)(l)&&d&&(S=o-n,O=s-r,_=Math.atan2(O,S),p=Math.cos(_)*(d||0),v=Math.sin(_)*(d||0)),u&&(0,V.RV)(u)&&h&&(S=n-o,O=r-s,_=Math.atan2(O,S),m=Math.cos(_)*(h||0),b=Math.sin(_)*(h||0)),t.moveTo(n+p,r+v),t.lineTo(o+m,s+b)}function _O(t,e){var n=e.markerStart,r=e.markerEnd,o=e.markerStartOffset,s=e.markerEndOffset,l=e.d,u=l.absolutePath,d=l.segments,h=0,p=0,v=0,m=0,b=0,_,S;if(n&&(0,V.RV)(n)&&o){var O=n.parentNode.getStartTangent(),E=(0,gn.Z)(O,2),A=E[0],M=E[1];_=A[0]-M[0],S=A[1]-M[1],b=Math.atan2(S,_),h=Math.cos(b)*(o||0),p=Math.sin(b)*(o||0)}if(r&&(0,V.RV)(r)&&s){var L=r.parentNode.getEndTangent(),I=(0,gn.Z)(L,2),R=I[0],N=I[1];_=R[0]-N[0],S=R[1]-N[1],b=Math.atan2(S,_),v=Math.cos(b)*(s||0),m=Math.sin(b)*(s||0)}for(var Z=0;Z<u.length;Z++){var W=u[Z],it=W[0],tt=u[Z+1],pt=Z===0&&(h!==0||p!==0),K=(Z===u.length-1||tt&&(tt[0]==="M"||tt[0]==="Z"))&&v!==0&&m!==0,lt=pt?[h,p]:[0,0],ft=(0,gn.Z)(lt,2),vt=ft[0],It=ft[1],_t=K?[v,m]:[0,0],Lt=(0,gn.Z)(_t,2),$t=Lt[0],he=Lt[1];switch(it){case"M":t.moveTo(W[1]+vt,W[2]+It);break;case"L":t.lineTo(W[1]+$t,W[2]+he);break;case"Q":t.quadraticCurveTo(W[1],W[2],W[3]+$t,W[4]+he);break;case"C":t.bezierCurveTo(W[1],W[2],W[3],W[4],W[5]+$t,W[6]+he);break;case"A":{var le=d[Z].arcParams,Ee=le.cx,Ue=le.cy,Be=le.rx,Qe=le.ry,en=le.startAngle,Ge=le.endAngle,cn=le.xRotation,wn=le.sweepFlag;if(t.ellipse)t.ellipse(Ee,Ue,Be,Qe,cn,en,Ge,!!(1-wn));else{var Mn=Be>Qe?Be:Qe,Sn=Be>Qe?1:Be/Qe,Fn=Be>Qe?Qe/Be:1;t.translate(Ee,Ue),t.rotate(cn),t.scale(Sn,Fn),t.arc(0,0,Mn,en,Ge,!!(1-wn)),t.scale(1/Sn,1/Fn),t.rotate(-cn),t.translate(-Ee,-Ue)}K&&t.lineTo(W[6]+v,W[7]+m);break}case"Z":t.closePath();break}}}function $i(t,e){var n=e.markerStart,r=e.markerEnd,o=e.markerStartOffset,s=e.markerEndOffset,l=e.points.points,u=l.length,d=l[0][0],h=l[0][1],p=l[u-1][0],v=l[u-1][1],m=0,b=0,_=0,S=0,O=0,E,A;n&&(0,V.RV)(n)&&o&&(E=l[1][0]-l[0][0],A=l[1][1]-l[0][1],O=Math.atan2(A,E),m=Math.cos(O)*(o||0),b=Math.sin(O)*(o||0)),r&&(0,V.RV)(r)&&s&&(E=l[u-1][0]-l[0][0],A=l[u-1][1]-l[0][1],O=Math.atan2(A,E),_=Math.cos(O)*(s||0),S=Math.sin(O)*(s||0)),t.moveTo(d+(m||_),h+(b||S));for(var M=1;M<u-1;M++){var L=l[M];t.lineTo(L[0],L[1])}t.lineTo(p,v)}function Ha(t,e){var n=e.markerStart,r=e.markerEnd,o=e.markerStartOffset,s=e.markerEndOffset,l=e.points.points,u=l.length,d=l[0][0],h=l[0][1],p=l[u-1][0],v=l[u-1][1],m=0,b=0,_=0,S=0,O=0,E,A;n&&(0,V.RV)(n)&&o&&(E=l[1][0]-l[0][0],A=l[1][1]-l[0][1],O=Math.atan2(A,E),m=Math.cos(O)*(o||0),b=Math.sin(O)*(o||0)),r&&(0,V.RV)(r)&&s&&(E=l[u-2][0]-l[u-1][0],A=l[u-2][1]-l[u-1][1],O=Math.atan2(A,E),_=Math.cos(O)*(s||0),S=Math.sin(O)*(s||0)),t.moveTo(d+m,h+b);for(var M=1;M<u-1;M++){var L=l[M];t.lineTo(L[0],L[1])}t.lineTo(p+_,v+S)}function Va(t,e){var n=e.x,r=n===void 0?0:n,o=e.y,s=o===void 0?0:o,l=e.radius,u=e.width,d=e.height,h=u,p=d,v=l&&l.some(function(I){return I!==0});if(!v)t.rect(r,s,h,p);else{var m=u>0?1:-1,b=d>0?1:-1,_=m+b===0,S=l.map(function(I){return(0,dn.Z)(I,0,Math.min(Math.abs(h)/2,Math.abs(p)/2))}),O=(0,gn.Z)(S,4),E=O[0],A=O[1],M=O[2],L=O[3];t.moveTo(m*E+r,s),t.lineTo(h-m*A+r,s),A!==0&&t.arc(h-m*A+r,b*A+s,A,-b*Math.PI/2,m>0?0:Math.PI,_),t.lineTo(h+r,p-b*M+s),M!==0&&t.arc(h-m*M+r,p-b*M+s,M,m>0?0:Math.PI,b>0?Math.PI/2:1.5*Math.PI,_),t.lineTo(m*L+r,p+s),L!==0&&t.arc(m*L+r,p-b*L+s,L,b>0?Math.PI/2:-Math.PI/2,m>0?Math.PI:0,_),t.lineTo(r,b*E+s),E!==0&&t.arc(m*E+r,b*E+s,E,m>0?Math.PI:0,b>0?Math.PI*1.5:Math.PI/2,_)}}var dl=function(t){function e(){var n;(0,C.Z)(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=(0,At.Z)(this,e,[].concat(o)),n.name="canvas-path-generator",n}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"init",value:function(){var r,o=(r={},(0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)(r,V.bn.CIRCLE,bO),V.bn.ELLIPSE,Ly),V.bn.RECT,Va),V.bn.LINE,Py),V.bn.POLYLINE,Ha),V.bn.POLYGON,$i),V.bn.PATH,_O),V.bn.TEXT,void 0),V.bn.GROUP,void 0),V.bn.IMAGE,void 0),(0,hr.Z)((0,hr.Z)((0,hr.Z)(r,V.bn.HTML,void 0),V.bn.MESH,void 0),V.bn.FRAGMENT,void 0));this.context.pathGeneratorFactory=o}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(V.F6),Iy=D(37762),fa=D(55850),hd=D(15861),Os=D(11702),kP=D(74873),So=D(1413);var xO=Le.Ue(),RP=Le.Ue(),DP=Le.Ue(),SO=Re.create(),vo=function(){function t(){var e=this;(0,C.Z)(this,t),this.isHit=function(n,r,o,s){var l=e.context.pointInPathPickerFactory[n.nodeName];if(l){var u=Re.invert(SO,o),d=Le.fF(RP,Le.t8(DP,r[0],r[1],0),u);if(l(n,new V.E9(d[0],d[1]),s,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(n,r){var o=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),s=e.context.pathGeneratorFactory[n.nodeName];return s&&(o.beginPath(),s(o,n.parsedStyle),o.closePath()),o.isPointInPath(r.x,r.y)}}return(0,F.Z)(t,[{key:"apply",value:function(n,r){var o,s=this,l=n.renderingService,u=n.renderingContext;this.context=n,this.runtime=r;var d=(o=u.root)===null||o===void 0?void 0:o.ownerDocument;l.hooks.pick.tapPromise(t.tag,function(){var h=(0,hd.Z)((0,fa.Z)().mark(function p(v){return(0,fa.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",s.pick(d,v));case 1:case"end":return m.stop()}},p)}));return function(p){return h.apply(this,arguments)}}()),l.hooks.pickSync.tap(t.tag,function(h){return s.pick(d,h)})}},{key:"pick",value:function(n,r){var o=r.topmost,s=r.position,l=s.x,u=s.y,d=Le.t8(xO,l,u,0),h=n.elementsFromBBox(d[0],d[1],d[0],d[1]),p=[],v=(0,Iy.Z)(h),m;try{for(v.s();!(m=v.n()).done;){var b=m.value,_=b.getWorldTransform(),S=this.isHit(b,d,_,!1);if(S){var O=(0,V.Oi)(b);if(O){var E=O.parsedStyle.clipPath,A=this.isHit(E,d,E.getWorldTransform(),!0);if(A){if(o)return r.picked=[b],r;p.push(b)}}else{if(o)return r.picked=[b],r;p.push(b)}}}}catch(M){v.e(M)}finally{v.f()}return r.picked=p,r}}])}();vo.tag="CanvasPicker";function ky(t,e,n){var r=t.parsedStyle,o=r.cx,s=o===void 0?0:o,l=r.cy,u=l===void 0?0:l,d=r.r,h=r.fill,p=r.stroke,v=r.lineWidth,m=v===void 0?1:v,b=r.increasedLineWidthForHitTesting,_=b===void 0?0:b,S=r.pointerEvents,O=S===void 0?"auto":S,E=(m+_)/2,A=(0,Os.TE)(s,u,e.x,e.y),M=(0,V.L1)(O,h,p),L=(0,gn.Z)(M,2),I=L[0],R=L[1];return I&&R||n?A<=d+E:I?A<=d:R?A>=d-E&&A<=d+E:!1}function Au(t,e,n,r){return t/(n*n)+e/(r*r)}function NP(t,e,n){var r=t.parsedStyle,o=r.cx,s=o===void 0?0:o,l=r.cy,u=l===void 0?0:l,d=r.rx,h=r.ry,p=r.fill,v=r.stroke,m=r.lineWidth,b=m===void 0?1:m,_=r.increasedLineWidthForHitTesting,S=_===void 0?0:_,O=r.pointerEvents,E=O===void 0?"auto":O,A=e.x,M=e.y,L=(0,V.L1)(E,p,v),I=(0,gn.Z)(L,2),R=I[0],N=I[1],Z=(b+S)/2,W=(A-s)*(A-s),it=(M-u)*(M-u);return R&&N||n?Au(W,it,d+Z,h+Z)<=1:R?Au(W,it,d,h)<=1:N?Au(W,it,d-Z,h-Z)>=1&&Au(W,it,d+Z,h+Z)<=1:!1}function fc(t,e,n,r,o,s){return o>=t&&o<=t+n&&s>=e&&s<=e+r}function OO(t,e,n,r,o,s,l){var u=o/2;return fc(t-u,e-u,n,o,s,l)||fc(t+n-u,e-u,o,r,s,l)||fc(t+u,e+r-u,n,o,s,l)||fc(t-u,e+u,o,r,s,l)}function Fp(t,e,n,r,o,s,l,u){var d=(Math.atan2(u-e,l-t)+Math.PI*2)%(Math.PI*2),h={x:t+n*Math.cos(d),y:e+n*Math.sin(d)};return(0,Os.TE)(h.x,h.y,l,u)<=s/2}function wa(t,e,n,r,o,s,l){var u=Math.min(t,n),d=Math.max(t,n),h=Math.min(e,r),p=Math.max(e,r),v=o/2;return s>=u-v&&s<=d+v&&l>=h-v&&l<=p+v?(0,Os._x)(t,e,n,r,s,l)<=o/2:!1}function Ry(t,e,n,r,o){var s=t.length;if(s<2)return!1;for(var l=0;l<s-1;l++){var u=t[l][0],d=t[l][1],h=t[l+1][0],p=t[l+1][1];if(wa(u,d,h,p,e,n,r))return!0}if(o){var v=t[0],m=t[s-1];if(wa(v[0],v[1],m[0],m[1],e,n,r))return!0}return!1}var Dy=1e-6;function Bp(t){return Math.abs(t)<Dy?0:t<0?-1:1}function EO(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function Ny(t,e,n){var r=!1,o=t.length;if(o<=2)return!1;for(var s=0;s<o;s++){var l=t[s],u=t[(s+1)%o];if(EO(l,u,[e,n]))return!0;Bp(l[1]-n)>0!=Bp(u[1]-n)>0&&Bp(e-(n-l[1])*(l[0]-u[0])/(l[1]-u[1])-l[0])<0&&(r=!r)}return r}function wO(t,e,n){for(var r=!1,o=0;o<t.length;o++){var s=t[o];if(r=Ny(s,e,n),r)break}return r}function pd(t,e,n){var r=t.parsedStyle,o=r.x1,s=r.y1,l=r.x2,u=r.y2,d=r.lineWidth,h=d===void 0?1:d,p=r.increasedLineWidthForHitTesting,v=p===void 0?0:p,m=r.pointerEvents,b=m===void 0?"auto":m,_=r.fill,S=r.stroke,O=(0,V.L1)(b,_,S),E=(0,gn.Z)(O,2),A=E[1];return!A&&!n||!h?!1:wa(o,s,l,u,h+v,e.x,e.y)}function FP(t,e,n,r,o){for(var s=!1,l=e/2,u=0;u<t.length;u++){var d=t[u],h=d.currentPoint,p=d.params,v=d.prePoint,m=d.box;if(!(m&&!fc(m.x-l,m.y-l,m.width+e,m.height+e,n,r)))switch(d.command){case"L":case"Z":if(s=wa(v[0],v[1],h[0],h[1],e,n,r),s)return!0;break;case"Q":var b=(0,Os.Y1)(v[0],v[1],p[1],p[2],p[3],p[4],n,r);if(s=b<=e/2,s)return!0;break;case"C":var _=(0,Os.ph)(v[0],v[1],p[1],p[2],p[3],p[4],p[5],p[6],n,r,o);if(s=_<=e/2,s)return!0;break;case"A":d.cubicParams||(d.cubicParams=(0,kP.W)(v[0],v[1],p[1],p[2],p[3],p[4],p[5],p[6],p[7],void 0));for(var S=d.cubicParams,O=v,E=0;E<S.length;E+=6){var A=(0,Os.ph)(O[0],O[1],S[E],S[E+1],S[E+2],S[E+3],S[E+4],S[E+5],n,r,o);if(O=[S[E+4],S[E+5]],s=A<=e/2,s)return!0}break}}return s}function BP(t,e,n,r,o,s){var l=t.parsedStyle,u=l.lineWidth,d=u===void 0?1:u,h=l.increasedLineWidthForHitTesting,p=h===void 0?0:h,v=l.stroke,m=l.fill,b=l.d,_=l.pointerEvents,S=_===void 0?"auto":_,O=b.segments,E=b.hasArc,A=b.polylines,M=b.polygons,L=(0,V.L1)(S,(M==null?void 0:M.length)&&m,v),I=(0,gn.Z)(L,2),R=I[0],N=I[1],Z=(0,V.gz)(t),W=!1;return R||n?(E?W=r(t,e):W=wO(M,e.x,e.y)||wO(A,e.x,e.y),W):((N||n)&&(W=FP(O,d+p,e.x,e.y,Z)),W)}function jP(t,e,n){var r=t.parsedStyle,o=r.stroke,s=r.fill,l=r.lineWidth,u=l===void 0?1:l,d=r.increasedLineWidthForHitTesting,h=d===void 0?0:d,p=r.points,v=r.pointerEvents,m=v===void 0?"auto":v,b=(0,V.L1)(m,s,o),_=(0,gn.Z)(b,2),S=_[0],O=_[1],E=!1;return(O||n)&&(E=Ry(p.points,u+h,e.x,e.y,!0)),!E&&(S||n)&&(E=Ny(p.points,e.x,e.y)),E}function zP(t,e,n){var r=t.parsedStyle,o=r.lineWidth,s=o===void 0?1:o,l=r.increasedLineWidthForHitTesting,u=l===void 0?0:l,d=r.points,h=r.pointerEvents,p=h===void 0?"auto":h,v=r.fill,m=r.stroke,b=(0,V.L1)(p,v,m),_=(0,gn.Z)(b,2),S=_[1];return!S&&!n||!s?!1:Ry(d.points,s+u,e.x,e.y,!1)}function UP(t,e,n,r,o){var s=t.parsedStyle,l=s.radius,u=s.fill,d=s.stroke,h=s.lineWidth,p=h===void 0?1:h,v=s.increasedLineWidthForHitTesting,m=v===void 0?0:v,b=s.x,_=b===void 0?0:b,S=s.y,O=S===void 0?0:S,E=s.width,A=s.height,M=s.pointerEvents,L=M===void 0?"auto":M,I=(0,V.L1)(L,u,d),R=(0,gn.Z)(I,2),N=R[0],Z=R[1],W=l&&l.some(function(K){return K!==0}),it=p+m;if(W){var pt=!1;return(Z||n)&&(pt=jp(_,O,E,A,l.map(function(K){return(0,dn.Z)(K,0,Math.min(Math.abs(E)/2,Math.abs(A)/2))}),it,e.x,e.y)),!pt&&(N||n)&&(pt=r(t,e)),pt}else{var tt=it/2;if(N&&Z||n)return fc(_-tt,O-tt,E+tt,A+tt,e.x,e.y);if(N)return fc(_,O,E,A,e.x,e.y);if(Z)return OO(_,O,E,A,it,e.x,e.y)}return!1}function jp(t,e,n,r,o,s,l,u){var d=(0,gn.Z)(o,4),h=d[0],p=d[1],v=d[2],m=d[3];return wa(t+h,e,t+n-p,e,s,l,u)||wa(t+n,e+p,t+n,e+r-v,s,l,u)||wa(t+n-v,e+r,t+m,e+r,s,l,u)||wa(t,e+r-m,t,e+h,s,l,u)||Fp(t+n-p,e+p,p,1.5*Math.PI,2*Math.PI,s,l,u)||Fp(t+n-v,e+r-v,v,0,.5*Math.PI,s,l,u)||Fp(t+m,e+r-m,m,.5*Math.PI,Math.PI,s,l,u)||Fp(t+h,e+h,h,Math.PI,1.5*Math.PI,s,l,u)}function AO(t,e,n,r,o,s){var l=t.parsedStyle,u=l.pointerEvents,d=u===void 0?"auto":u,h=l.x,p=h===void 0?0:h,v=l.y,m=v===void 0?0:v,b=l.width,_=l.height;if(d==="non-transparent-pixel"){var S=o.config.offscreenCanvas,O=s.offscreenCanvasCreator.getOrCreateCanvas(S),E=s.offscreenCanvasCreator.getOrCreateContext(S,{willReadFrequently:!0});O.width=b,O.height=_,o.defaultStyleRendererFactory[V.bn.IMAGE].render(E,(0,So.Z)((0,So.Z)({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0);var A=E.getImageData(e.x-p,e.y-m,1,1).data;return A.every(function(M){return M!==0})}return!0}function zp(t,e,n,r){var o=t.getGeometryBounds();return e.x>=o.min[0]&&e.y>=o.min[1]&&e.x<=o.max[0]&&e.y<=o.max[1]}var Ii=function(t){function e(){var n;(0,C.Z)(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=(0,At.Z)(this,e,[].concat(o)),n.name="canvas-picker",n}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"init",value:function(){var r,o=(r={},(0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)(r,V.bn.CIRCLE,ky),V.bn.ELLIPSE,NP),V.bn.RECT,UP),V.bn.LINE,pd),V.bn.POLYLINE,zP),V.bn.POLYGON,jP),V.bn.PATH,BP),V.bn.TEXT,zp),V.bn.GROUP,null),V.bn.IMAGE,AO),(0,hr.Z)((0,hr.Z)(r,V.bn.HTML,null),V.bn.MESH,null));this.context.pointInPathPickerFactory=o,this.addRenderingPlugin(new vo)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(V.F6);function Lo(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var TO=0;function CO(t){return"__private_"+TO+++"_"+t}var Fy=function(){function t(){(0,C.Z)(this,t),this.cacheStore=new Map}return(0,F.Z)(t,[{key:"onRefAdded",value:function(n){}},{key:"has",value:function(n){return this.cacheStore.has(n)}},{key:"put",value:function(n,r,o){return this.cacheStore.has(n)?!1:(this.cacheStore.set(n,{value:r,counter:new Set([o.entity])}),this.onRefAdded(o),!0)}},{key:"get",value:function(n,r){var o=this.cacheStore.get(n);return o?(o.counter.has(r.entity)||(o.counter.add(r.entity),this.onRefAdded(r)),o.value):null}},{key:"update",value:function(n,r,o){var s=this.cacheStore.get(n);return s?(s.value=(0,So.Z)((0,So.Z)({},s.value),r),s.counter.has(o.entity)||(s.counter.add(o.entity),this.onRefAdded(o)),!0):!1}},{key:"release",value:function(n,r){var o=this.cacheStore.get(n);return o?(o.counter.delete(r.entity),o.counter.size<=0&&this.cacheStore.delete(n),!0):!1}},{key:"releaseRef",value:function(n){var r=this;Array.from(this.cacheStore.keys()).forEach(function(o){r.release(o,n)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),By=[],gd=[],hl=function(){function t(){(0,C.Z)(this,t)}return(0,F.Z)(t,null,[{key:"stop",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;t.rafId&&(n.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;By.length<=0&&gd.length<=0||(gd.forEach(function(r){return r()}),gd=By.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=n.requestAnimationFrame(function(){t.executeTask(n)}))}},{key:"sliceImage",value:function(n,r,o,s){for(var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:t.api,d=n.naturalWidth||n.width,h=n.naturalHeight||n.height,p=r-l,v=o-l,m=Math.ceil(d/p),b=Math.ceil(h/v),_={tileSize:[r,o],gridSize:[b,m],tiles:Array(b).fill(null).map(function(){return Array(m).fill(null)})},S=function(A){for(var M=function(R){By.push(function(){var N=R*p,Z=A*v,W=[Math.min(r,d-N),Math.min(o,h-Z)],it=W[0],tt=W[1],pt=u.createCanvas();pt.width=r,pt.height=o;var K=pt.getContext("2d");K.drawImage(n,N,Z,it,tt,0,0,it,tt),_.tiles[A][R]={x:N,y:Z,tileX:R,tileY:A,data:pt},s()})},L=0;L<m;L++)M(L)},O=0;O<b;O++)S(O);return t.stop(),t.executeTask(),_}}])}();hl.TASK_NUM_PER_FRAME=10;var Ho=new Fy;Ho.onRefAdded=function(e){var n=this;e.addEventListener(V.Dk.DESTROY,function(){n.releaseRef(e)},{once:!0})};var Up=function(){function t(e,n){(0,C.Z)(this,t),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=n}return(0,F.Z)(t,[{key:"getImageSync",value:function(n,r,o){var s=(0,ne.Z)(n)?n:n.src;if(Ho.has(s)){var l=Ho.get(s,r);if(l.img.complete)return o==null||o(l),l}return this.getOrCreateImage(n,r).then(function(u){o==null||o(u)}).catch(function(u){console.error(u)}),null}},{key:"getOrCreateImage",value:function(n,r){var o=this,s=(0,ne.Z)(n)?n:n.src;if(!(0,ne.Z)(n)&&!Ho.has(s)){var l={img:n,size:[n.naturalWidth||n.width,n.naturalHeight||n.height],tileSize:vd(n)};Ho.put(s,l,r)}if(Ho.has(s)){var u=Ho.get(s,r);return u.img.complete?Promise.resolve(u):new Promise(function(d,h){u.img.addEventListener("load",function(){u.size=[u.img.naturalWidth||u.img.width,u.img.naturalHeight||u.img.height],u.tileSize=vd(u.img),d(u)}),u.img.addEventListener("error",function(p){h(p)})})}return new Promise(function(d,h){var p=o.context.config.createImage();if(p){var v={img:p,size:[0,0],tileSize:vd(p)};Ho.put(s,v,r),p.onload=function(){v.size=[p.naturalWidth||p.width,p.naturalHeight||p.height],v.tileSize=vd(v.img),d(v)},p.onerror=function(m){h(m)},p.crossOrigin="Anonymous",p.src=s}})}},{key:"createDownSampledImage",value:function(){var e=(0,hd.Z)((0,fa.Z)().mark(function r(o,s){var l,u,d,h,p,v,m,b,_,S,O,E,A,M;return(0,fa.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=1,this.getOrCreateImage(o,s);case 1:if(l=L.sent,typeof l.downSamplingRate=="undefined"){L.next=2;break}return L.abrupt("return",l);case 2:if(u=this.context.config.enableLargeImageOptimization,d=typeof u=="boolean"?{}:u,h=d.maxDownSampledImageSize,p=h===void 0?2048:h,v=d.downSamplingRateThreshold,m=v===void 0?.5:v,b=this.runtime.globalThis.createImageBitmap,_=(0,gn.Z)(l.size,2),S=_[0],O=_[1],E=l.img,A=Math.min((p+p)/(S+O),Math.max(.01,Math.min(m,.5))),M=(0,So.Z)((0,So.Z)({},l),{},{downSamplingRate:A}),Ho.update(l.img.src,M,s),!b){L.next=7;break}return L.prev=3,L.next=4,b(l.img,{resizeWidth:S*A,resizeHeight:O*A});case 4:E=L.sent,L.next=6;break;case 5:L.prev=5,L.catch(3),A=1;case 6:L.next=8;break;case 7:A=1;case 8:return M=(0,So.Z)((0,So.Z)({},this.getImageSync(o,s)),{},{downSampled:E,downSamplingRate:A}),Ho.update(l.img.src,M,s),L.abrupt("return",M);case 9:case"end":return L.stop()}},r,this,[[3,5]])}));function n(r,o){return e.apply(this,arguments)}return n}()},{key:"createImageTiles",value:function(){var e=(0,hd.Z)((0,fa.Z)().mark(function r(o,s,l,u){var d,h,p,v,m;return(0,fa.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=1,this.getOrCreateImage(o,u);case 1:return d=b.sent,h=u.ownerDocument.defaultView,p=h.requestAnimationFrame,v=h.cancelAnimationFrame,hl.api={requestAnimationFrame:p,cancelAnimationFrame:v,createCanvas:function(){return V.jB.createCanvas()}},m=(0,So.Z)((0,So.Z)({},d),hl.sliceImage(d.img,d.tileSize[0],d.tileSize[0],l)),Ho.update(d.img.src,m,u),b.abrupt("return",m);case 2:case"end":return b.stop()}},r,this)}));function n(r,o,s,l){return e.apply(this,arguments)}return n}()},{key:"releaseImage",value:function(n,r){Ho.release((0,ne.Z)(n)?n:n.src,r)}},{key:"releaseImageRef",value:function(n){Ho.releaseRef(n)}},{key:"getOrCreatePatternSync",value:function(n,r,o,s,l,u,d){var h=this.generatePatternKey(r);if(h&&this.patternCache[h])return this.patternCache[h];var p=r.image,v=r.repetition,m=r.transform,b,_=!1;if((0,ne.Z)(p)){var S=this.getImageSync(p,n,d);b=S==null?void 0:S.img}else s?(b=s,_=!0):b=p;var O=b&&o.createPattern(b,v);if(O){var E;m?E=(0,V.G0)((0,V.G$)(m),new V.s$({})):E=Re.identity(Re.create()),_&&Re.scale(E,E,[1/l,1/l,1]),O.setTransform({a:E[0],b:E[1],c:E[4],d:E[5],e:E[12]+u[0],f:E[13]+u[1]})}return h&&O&&(this.patternCache[h]=O),O}},{key:"getOrCreateGradient",value:function(n,r){var o=this.generateGradientKey(n),s=n.type,l=n.steps,u=n.min,d=n.width,h=n.height,p=n.angle,v=n.cx,m=n.cy,b=n.size;if(this.gradientCache[o])return this.gradientCache[o];var _=null;if(s===V.GL.LinearGradient){var S=(0,V.Rx)(u,d,h,p),O=S.x1,E=S.y1,A=S.x2,M=S.y2;_=r.createLinearGradient(O,E,A,M)}else if(s===V.GL.RadialGradient){var L=(0,V.o6)(u,d,h,v,m,b),I=L.x,R=L.y,N=L.r;_=r.createRadialGradient(I,R,0,I,R,N)}return _&&(l.forEach(function(Z){var W=Z.offset,it=Z.color;if(W.unit===V.Cm.kPercentage){var tt;(tt=_)===null||tt===void 0||tt.addColorStop(W.value/100,it.toString())}}),this.gradientCache[o]=_),this.gradientCache[o]}},{key:"generateGradientKey",value:function(n){var r=n.type,o=n.min,s=n.width,l=n.height,u=n.steps,d=n.angle,h=n.cx,p=n.cy,v=n.size;return"gradient-".concat(r,"-").concat((d==null?void 0:d.toString())||0,"-").concat((h==null?void 0:h.toString())||0,"-").concat((p==null?void 0:p.toString())||0,"-").concat((v==null?void 0:v.toString())||0,"-").concat(o[0],"-").concat(o[1],"-").concat(s,"-").concat(l,"-").concat(u.map(function(m){var b=m.offset,_=m.color;return"".concat(b).concat(_)}).join("-"))}},{key:"generatePatternKey",value:function(n){var r=n.image,o=n.repetition;if((0,ne.Z)(r))return"pattern-".concat(r,"-").concat(o);if(r.nodeName==="rect")return"pattern-".concat(r.entity,"-").concat(o)}}])}();Up.isSupportTile=!!V.jB.createCanvas();function vd(t){if(!t.complete)return[0,0];var e=t.naturalWidth||t.width,n=t.naturalHeight||t.height,r=256;return[256,512].forEach(function(o){var s=Math.ceil(n/o),l=Math.ceil(e/o);s*l<1e3&&(r=o)}),[r,r]}var jy=function(){function t(){(0,C.Z)(this,t)}return(0,F.Z)(t,[{key:"apply",value:function(n){var r=n.renderingService,o=n.renderingContext,s=n.imagePool,l=o.root.ownerDocument.defaultView,u=function(v,m,b){var _=v.parsedStyle,S=_.width,O=_.height;S&&!O?v.setAttribute("height",b/m*S):!S&&O&&v.setAttribute("width",m/b*O)},d=function(v){var m=v.target,b=m.nodeName,_=m.attributes;if(b===V.bn.IMAGE){var S=_.src,O=_.keepAspectRatio;s.getImageSync(S,m,function(E){var A=E.img,M=A.width,L=A.height;O&&u(m,M,L),m.renderable.dirty=!0,r.dirtify()})}},h=function(v){var m=v.target,b=v.attrName,_=v.prevValue,S=v.newValue;m.nodeName!==V.bn.IMAGE||b!=="src"||(_!==S&&s.releaseImage(_,m),(0,ne.Z)(S)&&s.getOrCreateImage(S,m).then(function(O){var E=O.img,A=E.width,M=E.height;m.attributes.keepAspectRatio&&u(m,A,M),m.renderable.dirty=!0,r.dirtify()}).catch(function(){}))};r.hooks.init.tap(t.tag,function(){l.addEventListener(V.Dk.MOUNTED,d),l.addEventListener(V.Dk.ATTR_MODIFIED,h)}),r.hooks.destroy.tap(t.tag,function(){l.removeEventListener(V.Dk.MOUNTED,d),l.removeEventListener(V.Dk.ATTR_MODIFIED,h)})}}])}();jy.tag="LoadImage";var Vo=function(t){function e(){var n;(0,C.Z)(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=(0,At.Z)(this,e,[].concat(o)),n.name="image-loader",n}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"init",value:function(r){this.context.imagePool=new Up(this.context,r),this.addRenderingPlugin(new jy)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(V.F6);var ki=CO("renderState"),MO=function(){function t(e){(0,C.Z)(this,t),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,ki,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Re.create(),this.dprMatrix=Re.create(),this.tmpMat4=Re.create(),this.vec3a=Le.Ue(),this.vec3b=Le.Ue(),this.vec3c=Le.Ue(),this.vec3d=Le.Ue(),this.canvasRendererPluginOptions=e}return(0,F.Z)(t,[{key:"apply",value:function(n,r){var o=this;this.context=n;var s=this.context,l=s.config,u=s.camera,d=s.renderingService,h=s.renderingContext,p=s.rBushRoot,v=s.pathGeneratorFactory,m=l.renderer.getConfig().enableRenderingOptimization;l.renderer.getConfig().enableDirtyCheck=!1,l.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=p,this.pathGeneratorFactory=v;var b=n.contextService,_=h.root.ownerDocument.defaultView,S=function(L){var I=L.target,R=I.rBushNode;R!=null&&R.aabb&&o.removedRBushNodeAABBs.push(R.aabb)},O=function(L){var I=L.target,R=I.rBushNode;R.aabb&&o.removedRBushNodeAABBs.push(R.aabb)};d.hooks.init.tap(t.tag,function(){_.addEventListener(V.Dk.UNMOUNTED,S),_.addEventListener(V.Dk.CULLED,O);var M=b.getDPR(),L=l.width,I=l.height,R=b.getContext();o.clearRect(R,0,0,L*M,I*M,l.background)}),d.hooks.destroy.tap(t.tag,function(){_.removeEventListener(V.Dk.UNMOUNTED,S),_.removeEventListener(V.Dk.CULLED,O),o.renderQueue=[],o.removedRBushNodeAABBs=[],Lo(o,ki)[ki]={restoreStack:[],prevObject:null,currentContext:null}});var E=function(){var L,I=b.getContext(),R=b.getDPR(),N=l.width,Z=l.height,W=o.canvasRendererPluginOptions,it=W.dirtyObjectNumThreshold,tt=W.dirtyObjectRatioThreshold,pt=d.getStats(),K=pt.total,lt=pt.rendered,ft=lt/K;o.clearFullScreen=o.clearFullScreenLastFrame||!((L=_.context.renderingPlugins[1])!==null&&L!==void 0&&L.isFirstTimeRenderingFinished)||d.disableDirtyRectangleRendering()||lt>it&&ft>tt,I&&(typeof I.resetTransform=="function"?I.resetTransform():I.setTransform(1,0,0,1,0,0),o.clearFullScreen&&o.clearRect(I,0,0,N*R,Z*R,l.background))},A=function(L,I){for(var R=[L];R.length>0;){var N,Z=R.pop();Z.isVisible()&&!Z.isCulled()&&(m?o.renderDisplayObjectOptimized(Z,I,o.context,Lo(o,ki)[ki],r):o.renderDisplayObject(Z,I,o.context,Lo(o,ki)[ki],r));for(var W=((N=Z.sortable)===null||N===void 0||(N=N.sorted)===null||N===void 0?void 0:N.length)>0?Z.sortable.sorted:Z.childNodes,it=W.length-1;it>=0;it--)R.push(W[it])}};d.hooks.endFrame.tap(t.tag,function(){if(E(),h.root.childNodes.length===0){o.clearFullScreenLastFrame=!0;return}m=l.renderer.getConfig().enableRenderingOptimization,Lo(o,ki)[ki]={restoreStack:[],prevObject:null,currentContext:Lo(o,ki)[ki].currentContext},Lo(o,ki)[ki].currentContext.clear(),o.clearFullScreenLastFrame=!1;var M=b.getContext(),L=b.getDPR();if(Re.fromScaling(o.dprMatrix,[L,L,1]),Re.multiply(o.vpMatrix,o.dprMatrix,u.getOrthoMatrix()),o.clearFullScreen)m?(M.save(),A(h.root,M),M.restore()):A(h.root,M),o.removedRBushNodeAABBs=[];else{var I=o.safeMergeAABB.apply(o,[o.mergeDirtyAABBs(o.renderQueue)].concat((0,fn.Z)(o.removedRBushNodeAABBs.map(function(Qe){var en=Qe.minX,Ge=Qe.minY,cn=Qe.maxX,wn=Qe.maxY,Mn=new V.mN;return Mn.setMinMax([en,Ge,0],[cn,wn,0]),Mn}))));if(o.removedRBushNodeAABBs=[],V.mN.isEmpty(I)){o.renderQueue=[];return}var R=o.convertAABB2Rect(I),N=R.x,Z=R.y,W=R.width,it=R.height,tt=Le.fF(o.vec3a,[N,Z,0],o.vpMatrix),pt=Le.fF(o.vec3b,[N+W,Z,0],o.vpMatrix),K=Le.fF(o.vec3c,[N,Z+it,0],o.vpMatrix),lt=Le.fF(o.vec3d,[N+W,Z+it,0],o.vpMatrix),ft=Math.min(tt[0],pt[0],lt[0],K[0]),vt=Math.min(tt[1],pt[1],lt[1],K[1]),It=Math.max(tt[0],pt[0],lt[0],K[0]),_t=Math.max(tt[1],pt[1],lt[1],K[1]),Lt=Math.floor(ft),$t=Math.floor(vt),he=Math.ceil(It-ft),le=Math.ceil(_t-vt);M.save(),o.clearRect(M,Lt,$t,he,le,l.background),M.beginPath(),M.rect(Lt,$t,he,le),M.clip(),M.setTransform(o.vpMatrix[0],o.vpMatrix[1],o.vpMatrix[4],o.vpMatrix[5],o.vpMatrix[12],o.vpMatrix[13]);var Ee=l.renderer.getConfig(),Ue=Ee.enableDirtyRectangleRenderingDebug;Ue&&_.dispatchEvent(new V.Aw(V.$6.DIRTY_RECTANGLE,{dirtyRect:{x:Lt,y:$t,width:he,height:le}}));var Be=o.searchDirtyObjects(I);Be.sort(function(Qe,en){return Qe.sortable.renderOrder-en.sortable.renderOrder}).forEach(function(Qe){Qe&&Qe.isVisible()&&!Qe.isCulled()&&o.renderDisplayObject(Qe,M,o.context,Lo(o,ki)[ki],r)}),M.restore(),o.renderQueue.forEach(function(Qe){o.saveDirtyAABB(Qe)}),o.renderQueue=[]}Lo(o,ki)[ki].restoreStack.forEach(function(){M.restore()}),Lo(o,ki)[ki].restoreStack=[]}),d.hooks.render.tap(t.tag,function(M){o.clearFullScreen||o.renderQueue.push(M)})}},{key:"clearRect",value:function(n,r,o,s,l,u){n.clearRect(r,o,s,l),u&&(n.fillStyle=u,n.fillRect(r,o,s,l))}},{key:"renderDisplayObjectOptimized",value:function(n,r,o,s,l){var u=n.nodeName,d=!1,h=!1,p=this.context.styleRendererFactory[u],v=this.pathGeneratorFactory[u],m=n.parsedStyle.clipPath;if(m){d=!s.prevObject||!Re.exactEquals(m.getWorldTransform(),s.prevObject.getWorldTransform()),d&&(this.applyWorldTransform(r,m),s.prevObject=null);var b=this.pathGeneratorFactory[m.nodeName];b&&(r.save(),h=!0,r.beginPath(),b(r,m.parsedStyle),r.closePath(),r.clip())}if(p){d=!s.prevObject||!Re.exactEquals(n.getWorldTransform(),s.prevObject.getWorldTransform()),d&&this.applyWorldTransform(r,n);var _=!s.prevObject;if(!_){var S=s.prevObject.nodeName;u===V.bn.TEXT?_=S!==V.bn.TEXT:u===V.bn.IMAGE?_=S!==V.bn.IMAGE:_=S===V.bn.TEXT||S===V.bn.IMAGE}p.applyStyleToContext(r,n,_,s),s.prevObject=n}v&&(r.beginPath(),v(r,n.parsedStyle),u!==V.bn.LINE&&u!==V.bn.PATH&&u!==V.bn.POLYLINE&&r.closePath()),p&&p.drawToContext(r,n,Lo(this,ki)[ki],this,l),h&&r.restore(),n.dirty(!1)}},{key:"renderDisplayObject",value:function(n,r,o,s,l){var u=n.nodeName,d=s.restoreStack[s.restoreStack.length-1];d&&!(n.compareDocumentPosition(d)&V.NB.DOCUMENT_POSITION_CONTAINS)&&(r.restore(),s.restoreStack.pop());var h=this.context.styleRendererFactory[u],p=this.pathGeneratorFactory[u],v=n.parsedStyle.clipPath;if(v){this.applyWorldTransform(r,v);var m=this.pathGeneratorFactory[v.nodeName];m&&(r.save(),s.restoreStack.push(n),r.beginPath(),m(r,v.parsedStyle),r.closePath(),r.clip())}h&&(this.applyWorldTransform(r,n),r.save(),this.applyAttributesToContext(r,n)),p&&(r.beginPath(),p(r,n.parsedStyle),u!==V.bn.LINE&&u!==V.bn.PATH&&u!==V.bn.POLYLINE&&r.closePath()),h&&(h.render(r,n.parsedStyle,n,o,this,l),r.restore()),n.dirty(!1)}},{key:"applyAttributesToContext",value:function(n,r){var o=r.parsedStyle,s=o.stroke,l=o.fill,u=o.opacity,d=o.lineDash,h=o.lineDashOffset;d&&n.setLineDash(d),(0,bn.Z)(h)||(n.lineDashOffset=h),(0,bn.Z)(u)||(n.globalAlpha*=u),!(0,bn.Z)(s)&&!Array.isArray(s)&&!s.isNone&&(n.strokeStyle=r.attributes.stroke),!(0,bn.Z)(l)&&!Array.isArray(l)&&!l.isNone&&(n.fillStyle=r.attributes.fill)}},{key:"convertAABB2Rect",value:function(n){var r=n.getMin(),o=n.getMax(),s=Math.floor(r[0]),l=Math.floor(r[1]),u=Math.ceil(o[0]),d=Math.ceil(o[1]),h=u-s,p=d-l;return{x:s,y:l,width:h,height:p}}},{key:"mergeDirtyAABBs",value:function(n){var r=new V.mN;return n.forEach(function(o){var s=o.getRenderBounds();r.add(s);var l=o.renderable.dirtyRenderBounds;l&&r.add(l)}),r}},{key:"searchDirtyObjects",value:function(n){var r=n.getMin(),o=(0,gn.Z)(r,2),s=o[0],l=o[1],u=n.getMax(),d=(0,gn.Z)(u,2),h=d[0],p=d[1],v=this.rBush.search({minX:s,minY:l,maxX:h,maxY:p});return v.map(function(m){var b=m.displayObject;return b})}},{key:"saveDirtyAABB",value:function(n){var r=n.renderable;r.dirtyRenderBounds||(r.dirtyRenderBounds=new V.mN);var o=n.getRenderBounds();o&&r.dirtyRenderBounds.update(o.center,o.halfExtents)}},{key:"applyWorldTransform",value:function(n,r,o){o?(Re.copy(this.tmpMat4,r.getLocalTransform()),Re.multiply(this.tmpMat4,o,this.tmpMat4),Re.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Re.copy(this.tmpMat4,r.getWorldTransform()),Re.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),n.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var n=new V.mN,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.forEach(function(l){n.add(l)}),n}}])}();MO.tag="CanvasRenderer";function Zp(t,e,n,r,o,s,l){var u,d;if(t.image.nodeName==="rect"){var h=t.image.parsedStyle,p=h.width,v=h.height;d=r.contextService.getDPR();var m=r.config.offscreenCanvas;u=s.offscreenCanvasCreator.getOrCreateCanvas(m),u.width=p*d,u.height=v*d;var b=s.offscreenCanvasCreator.getOrCreateContext(m),_={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach(function(O){o.renderDisplayObject(O,b,r,_,s)}),_.restoreStack.forEach(function(){b.restore()})}var S=l.getOrCreatePatternSync(e,t,n,u,d,e.getGeometryBounds().min,function(){e.dirty(),r.renderingService.dirtify()});return S}function Hp(t,e,n,r){var o;if(t.type===V.GL.LinearGradient||t.type===V.GL.RadialGradient){var s=e.getGeometryBounds(),l=s&&s.halfExtents[0]*2||1,u=s&&s.halfExtents[1]*2||1,d=s&&s.min||[0,0];o=r.getOrCreateGradient((0,So.Z)((0,So.Z)({type:t.type},t.value),{},{min:d,width:l,height:u}),n)}return o}var Vp=["shadowBlur","shadowOffsetX","shadowOffsetY"],md=["lineCap","lineJoin","miterLimit"],Ai={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},Tu={};function gi(t,e,n,r){var o=r.has(e)?r.get(e):Ai[e];return o!==n&&(e==="lineDash"?t.setLineDash(n):t[e]=n,r.set(e,n)),o}var zy=function(){function t(e){(0,C.Z)(this,t),this.imagePool=e}return(0,F.Z)(t,[{key:"applyAttributesToContext",value:function(n,r){}},{key:"render",value:function(n,r,o,s,l,u){}},{key:"applyCommonStyleToContext",value:function(n,r,o,s){var l=o?Tu:s.prevObject.parsedStyle,u=r.parsedStyle;(o||u.opacity!==l.opacity)&&gi(n,"globalAlpha",(0,bn.Z)(u.opacity)?Ai.globalAlpha:u.opacity,s.currentContext),(o||u.blend!==l.blend)&&gi(n,"globalCompositeOperation",(0,bn.Z)(u.blend)?Ai.globalCompositeOperation:u.blend,s.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(n,r,o,s){var l=o?Tu:s.prevObject.parsedStyle,u=r.parsedStyle,d=u.lineWidth,h=d===void 0?Ai.lineWidth:d,p=u.fill&&!u.fill.isNone,v=u.stroke&&!u.stroke.isNone&&h>0;if(v){if(o||r.attributes.stroke!==s.prevObject.attributes.stroke){var m=!(0,bn.Z)(u.stroke)&&!Array.isArray(u.stroke)&&!u.stroke.isNone?r.attributes.stroke:Ai.strokeStyle;gi(n,"strokeStyle",m,s.currentContext)}(o||u.lineWidth!==l.lineWidth)&&gi(n,"lineWidth",(0,bn.Z)(u.lineWidth)?Ai.lineWidth:u.lineWidth,s.currentContext),(o||u.lineDash!==l.lineDash)&&gi(n,"lineDash",u.lineDash||Ai.lineDash,s.currentContext),(o||u.lineDashOffset!==l.lineDashOffset)&&gi(n,"lineDashOffset",(0,bn.Z)(u.lineDashOffset)?Ai.lineDashOffset:u.lineDashOffset,s.currentContext);for(var b=0;b<md.length;b++){var _=md[b];(o||u[_]!==l[_])&&gi(n,_,(0,bn.Z)(u[_])?Ai[_]:u[_],s.currentContext)}}if(p&&(o||r.attributes.fill!==s.prevObject.attributes.fill)){var S=!(0,bn.Z)(u.fill)&&!Array.isArray(u.fill)&&!u.fill.isNone?r.attributes.fill:Ai.fillStyle;gi(n,"fillStyle",S,s.currentContext)}}},{key:"applyStyleToContext",value:function(n,r,o,s){var l=r.nodeName;this.applyCommonStyleToContext(n,r,o,s),l===V.bn.IMAGE||this.applyStrokeFillStyleToContext(n,r,o,s)}},{key:"applyShadowAndFilterStyleToContext",value:function(n,r,o,s){var l=r.parsedStyle;if(o){gi(n,"shadowColor",l.shadowColor.toString(),s.currentContext);for(var u=0;u<Vp.length;u++){var d=Vp[u];gi(n,d,l[d]||Ai[d],s.currentContext)}}l.filter&&l.filter.length&&gi(n,"filter",r.attributes.filter,s.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(n,r,o,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(r){gi(n,"shadowColor",Ai.shadowColor,s.currentContext);for(var u=0;u<Vp.length;u++){var d=Vp[u];gi(n,d,Ai[d],s.currentContext)}}if(o)if(r&&l){var h=n.filter;!(0,bn.Z)(h)&&h.indexOf("drop-shadow")>-1&&gi(n,"filter",h.replace(/drop-shadow\([^)]*\)/,"").trim()||Ai.filter,s.currentContext)}else gi(n,"filter",Ai.filter,s.currentContext)}},{key:"fillToContext",value:function(n,r,o,s,l){var u=this,d=r.parsedStyle,h=d.fill,p=d.fillRule,v=null;if(Array.isArray(h)&&h.length>0)h.forEach(function(b){var _=gi(n,"fillStyle",Hp(b,r,n,u.imagePool),o.currentContext);v=v!=null?v:_,p?n.fill(p):n.fill()});else{if((0,V.R)(h)){var m=Zp(h,r,n,r.ownerDocument.defaultView.context,s,l,this.imagePool);m&&(n.fillStyle=m,v=!0)}p?n.fill(p):n.fill()}v!==null&&gi(n,"fillStyle",v,o.currentContext)}},{key:"strokeToContext",value:function(n,r,o,s,l){var u=this,d=r.parsedStyle.stroke,h=null;if(Array.isArray(d)&&d.length>0)d.forEach(function(m){var b=gi(n,"strokeStyle",Hp(m,r,n,u.imagePool),o.currentContext);h=h!=null?h:b,n.stroke()});else{if((0,V.R)(d)){var p=Zp(d,r,n,r.ownerDocument.defaultView.context,s,l,this.imagePool);if(p){var v=gi(n,"strokeStyle",p,o.currentContext);h=h!=null?h:v}}n.stroke()}h!==null&&gi(n,"strokeStyle",h,o.currentContext)}},{key:"drawToContext",value:function(n,r,o,s,l){var u,d=r.nodeName,h=r.parsedStyle,p=h.opacity,v=p===void 0?Ai.globalAlpha:p,m=h.fillOpacity,b=m===void 0?Ai.fillOpacity:m,_=h.strokeOpacity,S=_===void 0?Ai.strokeOpacity:_,O=h.lineWidth,E=O===void 0?Ai.lineWidth:O,A=h.fill&&!h.fill.isNone,M=h.stroke&&!h.stroke.isNone&&E>0;if(!(!A&&!M)){var L=!(0,bn.Z)(h.shadowColor)&&h.shadowBlur>0,I=h.shadowType==="inner",R=((u=h.fill)===null||u===void 0?void 0:u.alpha)===0,N=!!(h.filter&&h.filter.length),Z=L&&M&&(d===V.bn.PATH||d===V.bn.LINE||d===V.bn.POLYLINE||R||I),W=null;if(A){Z||this.applyShadowAndFilterStyleToContext(n,r,L,o);var it=v*b;W=gi(n,"globalAlpha",it,o.currentContext),this.fillToContext(n,r,o,s,l),Z||this.clearShadowAndFilterStyleForContext(n,L,N,o)}if(M){var tt=!1,pt=v*S,K=gi(n,"globalAlpha",pt,o.currentContext);if(W=A?W:K,Z&&(this.applyShadowAndFilterStyleToContext(n,r,L,o),tt=!0,I)){var lt=n.globalCompositeOperation;n.globalCompositeOperation="source-atop",this.strokeToContext(n,r,o,s,l),n.globalCompositeOperation=lt,this.clearShadowAndFilterStyleForContext(n,L,N,o,!0)}this.strokeToContext(n,r,o,s,l),tt&&this.clearShadowAndFilterStyleForContext(n,L,N,o)}W!==null&&gi(n,"globalAlpha",W,o.currentContext)}}}])}(),Wp=function(t){function e(){return(0,C.Z)(this,e),(0,At.Z)(this,e,arguments)}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"render",value:function(r,o,s,l,u,d){var h=o.fill,p=o.fillRule,v=o.opacity,m=v===void 0?1:v,b=o.fillOpacity,_=b===void 0?1:b,S=o.stroke,O=o.strokeOpacity,E=O===void 0?1:O,A=o.lineWidth,M=A===void 0?1:A,L=o.lineCap,I=o.lineJoin,R=o.shadowType,N=o.shadowColor,Z=o.shadowBlur,W=o.filter,it=o.miterLimit,tt=h&&!h.isNone,pt=S&&!S.isNone&&M>0,K=(h==null?void 0:h.alpha)===0,lt=!!(W&&W.length),ft=!(0,bn.Z)(N)&&Z>0,vt=s.nodeName,It=R==="inner",_t=pt&&ft&&(vt===V.bn.PATH||vt===V.bn.LINE||vt===V.bn.POLYLINE||K||It);tt&&(r.globalAlpha=m*_,_t||Cu(s,r,ft),LO(r,s,h,p,l,u,d,this.imagePool),_t||this.clearShadowAndFilter(r,lt,ft)),pt&&(r.globalAlpha=m*E,r.lineWidth=M,(0,bn.Z)(it)||(r.miterLimit=it),(0,bn.Z)(L)||(r.lineCap=L),(0,bn.Z)(I)||(r.lineJoin=I),_t&&(It&&(r.globalCompositeOperation="source-atop"),Cu(s,r,!0),It&&(Gp(r,s,S,l,u,d,this.imagePool),r.globalCompositeOperation=Ai.globalCompositeOperation,this.clearShadowAndFilter(r,lt,!0))),Gp(r,s,S,l,u,d,this.imagePool))}},{key:"clearShadowAndFilter",value:function(r,o,s){if(s&&(r.shadowColor="transparent",r.shadowBlur=0),o){var l=r.filter;!(0,bn.Z)(l)&&l.indexOf("drop-shadow")>-1&&(r.filter=l.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(zy);function Cu(t,e,n){var r=t.parsedStyle,o=r.filter,s=r.shadowColor,l=r.shadowBlur,u=r.shadowOffsetX,d=r.shadowOffsetY;o&&o.length&&(e.filter=t.style.filter),n&&(e.shadowColor=s.toString(),e.shadowBlur=l||0,e.shadowOffsetX=u||0,e.shadowOffsetY=d||0)}function LO(t,e,n,r,o,s,l,u){var d=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(n)?n.forEach(function(h){t.fillStyle=Hp(h,e,t,u),d||(r?t.fill(r):t.fill())}):((0,V.R)(n)&&(t.fillStyle=Zp(n,e,t,o,s,l,u)),d||(r?t.fill(r):t.fill()))}function Gp(t,e,n,r,o,s,l){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(n)?n.forEach(function(d){t.strokeStyle=Hp(d,e,t,l),u||t.stroke()}):((0,V.R)(n)&&(t.strokeStyle=Zp(n,e,t,r,o,s,l)),u||t.stroke())}function ZP(t,e){var n=(0,gn.Z)(t,4),r=n[0],o=n[1],s=n[2],l=n[3],u=(0,gn.Z)(e,4),d=u[0],h=u[1],p=u[2],v=u[3],m=Math.max(r,d),b=Math.max(o,h),_=Math.min(r+s,d+p),S=Math.min(o+l,h+v);return _<=m||S<=b?null:[m,b,_-m,S-b]}function dc(t,e){var n=Le.fF(Le.Ue(),[t[0],t[1],0],e),r=Le.fF(Le.Ue(),[t[0]+t[2],t[1],0],e),o=Le.fF(Le.Ue(),[t[0],t[1]+t[3],0],e),s=Le.fF(Le.Ue(),[t[0]+t[2],t[1]+t[3],0],e);return[Math.min(n[0],r[0],o[0],s[0]),Math.min(n[1],r[1],o[1],s[1]),Math.max(n[0],r[0],o[0],s[0])-Math.min(n[0],r[0],o[0],s[0]),Math.max(n[1],r[1],o[1],s[1])-Math.min(n[1],r[1],o[1],s[1])]}var PO=function(t){function e(){return(0,C.Z)(this,e),(0,At.Z)(this,e,arguments)}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"renderDownSampled",value:function(r,o,s,l){var u=l.src,d=l.imageCache;if(!d.downSampled){this.imagePool.createDownSampledImage(u,s).then(function(){s.ownerDocument&&(s.dirty(),s.ownerDocument.defaultView.context.renderingService.dirtify())}).catch(function(h){console.error(h)});return}r.drawImage(d.downSampled,Math.floor(l.drawRect[0]),Math.floor(l.drawRect[1]),Math.ceil(l.drawRect[2]),Math.ceil(l.drawRect[3]))}},{key:"renderTile",value:function(r,o,s,l){var u=l.src,d=l.imageCache,h=l.imageRect,p=l.drawRect,v=d.size,m=r.getTransform(),b=m.a,_=m.b,S=m.c,O=m.d,E=m.e,A=m.f;if(r.resetTransform(),!(d!=null&&d.gridSize)){this.imagePool.createImageTiles(u,[],function(){s.ownerDocument&&(s.dirty(),s.ownerDocument.defaultView.context.renderingService.dirtify())},s).catch(function(ft){console.error(ft)});return}for(var M=[v[0]/h[2],v[1]/h[3]],L=[d.tileSize[0]/M[0],d.tileSize[1]/M[1]],I=[Math.floor((p[0]-h[0])/L[0]),Math.ceil((p[0]+p[2]-h[0])/L[0])],R=I[0],N=I[1],Z=[Math.floor((p[1]-h[1])/L[1]),Math.ceil((p[1]+p[3]-h[1])/L[1])],W=Z[0],it=Z[1],tt=W;tt<=it;tt++)for(var pt=R;pt<=N;pt++){var K=d.tiles[tt][pt];if(K){var lt=[Math.floor(h[0]+K.tileX*L[0]),Math.floor(h[1]+K.tileY*L[1]),Math.ceil(L[0]),Math.ceil(L[1])];r.drawImage(K.data,lt[0],lt[1],lt[2],lt[3])}}r.setTransform(b,_,S,O,E,A)}},{key:"render",value:function(r,o,s){var l=o.x,u=l===void 0?0:l,d=o.y,h=d===void 0?0:d,p=o.width,v=o.height,m=o.src,b=o.shadowColor,_=o.shadowBlur,S=this.imagePool.getImageSync(m,s),O=S==null?void 0:S.img,E=p,A=v;if(O){E||(E=O.width),A||(A=O.height);var M=!(0,bn.Z)(b)&&_>0;Cu(s,r,M);try{var L=s.ownerDocument.defaultView.getContextService().getDomElement(),I=L.width,R=L.height,N=r.getTransform(),Z=N.a,W=N.b,it=N.c,tt=N.d,pt=N.e,K=N.f,lt=Re.fromValues(Z,it,0,0,W,tt,0,0,0,0,1,0,pt,K,0,1),ft=dc([u,h,E,A],lt),vt=ZP([0,0,I,R],ft);if(!vt)return;if(!s.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){e.renderFull(r,o,s,{image:O,drawRect:[u,h,E,A]});return}var It=ft[2]/S.size[0];if(It<(S.downSamplingRate||.5)){this.renderDownSampled(r,o,s,{src:m,imageCache:S,drawRect:[u,h,E,A]});return}if(!Up.isSupportTile){e.renderFull(r,o,s,{image:O,drawRect:[u,h,E,A]});return}this.renderTile(r,o,s,{src:m,imageCache:S,imageRect:ft,drawRect:vt})}catch(_t){}}}},{key:"drawToContext",value:function(r,o,s,l,u){this.render(r,o.parsedStyle,o)}}],[{key:"renderFull",value:function(r,o,s,l){r.drawImage(l.image,Math.floor(l.drawRect[0]),Math.floor(l.drawRect[1]),Math.ceil(l.drawRect[2]),Math.ceil(l.drawRect[3]))}}])}(Wp),IO=function(t){function e(){return(0,C.Z)(this,e),(0,At.Z)(this,e,arguments)}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"render",value:function(r,o,s,l,u,d){s.getBounds();var h=o.lineWidth,p=h===void 0?1:h,v=o.textAlign,m=v===void 0?"start":v,b=o.textBaseline,_=b===void 0?"alphabetic":b,S=o.lineJoin,O=S===void 0?"miter":S,E=o.miterLimit,A=E===void 0?10:E,M=o.letterSpacing,L=M===void 0?0:M,I=o.stroke,R=o.fill,N=o.fillRule,Z=o.fillOpacity,W=Z===void 0?1:Z,it=o.strokeOpacity,tt=it===void 0?1:it,pt=o.opacity,K=pt===void 0?1:pt,lt=o.metrics,ft=o.x,vt=ft===void 0?0:ft,It=o.y,_t=It===void 0?0:It,Lt=o.dx,$t=o.dy,he=o.shadowColor,le=o.shadowBlur,Ee=lt.font,Ue=lt.lines,Be=lt.height,Qe=lt.lineHeight,en=lt.lineMetrics;r.font=Ee,r.lineWidth=p,r.textAlign=m==="middle"?"center":m;var Ge=_;Ge==="alphabetic"&&(Ge="bottom"),r.lineJoin=O,(0,bn.Z)(A)||(r.miterLimit=A);var cn=_t;_==="middle"?cn+=-Be/2-Qe/2:_==="bottom"||_==="alphabetic"||_==="ideographic"?cn+=-Be:(_==="top"||_==="hanging")&&(cn+=-Qe);var wn=vt+(Lt||0);cn+=$t||0,Ue.length===1&&(Ge==="bottom"?(Ge="middle",cn-=.5*Be):Ge==="top"&&(Ge="middle",cn+=.5*Be)),r.textBaseline=Ge;var Mn=!(0,bn.Z)(he)&&le>0;Cu(s,r,Mn);for(var Sn=0;Sn<Ue.length;Sn++){var Fn=p/2+wn;cn+=Qe,!(0,bn.Z)(I)&&!I.isNone&&p&&this.drawLetterSpacing(r,s,Ue[Sn],en[Sn],m,Fn,cn,L,R,N,W,I,tt,K,!0,l,u,d),(0,bn.Z)(R)||this.drawLetterSpacing(r,s,Ue[Sn],en[Sn],m,Fn,cn,L,R,N,W,I,tt,K,!1,l,u,d)}}},{key:"drawLetterSpacing",value:function(r,o,s,l,u,d,h,p,v,m,b,_,S,O,E,A,M,L){if(p===0){E?this.strokeText(r,o,s,d,h,_,S,A,M,L):this.fillText(r,o,s,d,h,v,m,b,O,A,M,L);return}var I=r.textAlign;r.textAlign="left";var R=d;u==="center"||u==="middle"?R=d-l.width/2:(u==="right"||u==="end")&&(R=d-l.width);for(var N=Array.from(s),Z=r.measureText(s).width,W=0,it=0;it<N.length;++it){var tt=N[it];E?this.strokeText(r,o,tt,R,h,_,S,A,M,L):this.fillText(r,o,tt,R,h,v,m,b,O,A,M,L),W=r.measureText(s.substring(it+1)).width,R+=Z-W+p,Z=W}r.textAlign=I}},{key:"fillText",value:function(r,o,s,l,u,d,h,p,v,m,b,_){LO(r,o,d,h,m,b,_,this.imagePool,!0);var S,O=!(0,bn.Z)(p)&&p!==1;O&&(S=r.globalAlpha,r.globalAlpha=p*v),r.fillText(s,l,u),O&&(r.globalAlpha=S)}},{key:"strokeText",value:function(r,o,s,l,u,d,h,p,v,m){Gp(r,o,d,p,v,m,this.imagePool,!0);var b,_=!(0,bn.Z)(h)&&h!==1;_&&(b=r.globalAlpha,r.globalAlpha=h),r.strokeText(s,l,u),_&&(r.globalAlpha=b)}},{key:"drawToContext",value:function(r,o,s,l,u){this.render(r,o.parsedStyle,o,o.ownerDocument.defaultView.context,l,u)}}])}(Wp),HP=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,C.Z)(this,e),n=(0,At.Z)(this,e),n.name="canvas-renderer",n.options=r,n}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"init",value:function(){var r,o=(0,So.Z)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),s=this.context.imagePool,l=new Wp(s),u=(r={},(0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)((0,hr.Z)(r,V.bn.CIRCLE,l),V.bn.ELLIPSE,l),V.bn.RECT,l),V.bn.IMAGE,new PO(s)),V.bn.TEXT,new IO(s)),V.bn.LINE,l),V.bn.POLYLINE,l),V.bn.POLYGON,l),V.bn.PATH,l),V.bn.GROUP,void 0),(0,hr.Z)((0,hr.Z)((0,hr.Z)(r,V.bn.HTML,void 0),V.bn.MESH,void 0),V.bn.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=u,this.context.styleRendererFactory=u,this.addRenderingPlugin(new MO(o))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(V.F6);var kO=function(){function t(){(0,C.Z)(this,t)}return(0,F.Z)(t,[{key:"apply",value:function(n,r){var o=this,s=n.renderingService,l=n.renderingContext,u=n.config;this.context=n;var d=l.root.ownerDocument.defaultView,h=function(Z){s.hooks.pointerMove.call(Z)},p=function(Z){s.hooks.pointerUp.call(Z)},v=function(Z){s.hooks.pointerDown.call(Z)},m=function(Z){s.hooks.pointerOver.call(Z)},b=function(Z){s.hooks.pointerOut.call(Z)},_=function(Z){s.hooks.pointerCancel.call(Z)},S=function(Z){s.hooks.pointerWheel.call(Z)},O=function(Z){s.hooks.click.call(Z)},E=function(Z){r.globalThis.document.addEventListener("pointermove",h,!0),Z.addEventListener("pointerdown",v,!0),Z.addEventListener("pointerleave",b,!0),Z.addEventListener("pointerover",m,!0),r.globalThis.addEventListener("pointerup",p,!0),r.globalThis.addEventListener("pointercancel",_,!0)},A=function(Z){Z.addEventListener("touchstart",v,!0),Z.addEventListener("touchend",p,!0),Z.addEventListener("touchmove",h,!0),Z.addEventListener("touchcancel",_,!0)},M=function(Z){r.globalThis.document.addEventListener("mousemove",h,!0),Z.addEventListener("mousedown",v,!0),Z.addEventListener("mouseout",b,!0),Z.addEventListener("mouseover",m,!0),r.globalThis.addEventListener("mouseup",p,!0)},L=function(Z){r.globalThis.document.removeEventListener("pointermove",h,!0),Z.removeEventListener("pointerdown",v,!0),Z.removeEventListener("pointerleave",b,!0),Z.removeEventListener("pointerover",m,!0),r.globalThis.removeEventListener("pointerup",p,!0),r.globalThis.removeEventListener("pointercancel",_,!0)},I=function(Z){Z.removeEventListener("touchstart",v,!0),Z.removeEventListener("touchend",p,!0),Z.removeEventListener("touchmove",h,!0),Z.removeEventListener("touchcancel",_,!0)},R=function(Z){r.globalThis.document.removeEventListener("mousemove",h,!0),Z.removeEventListener("mousedown",v,!0),Z.removeEventListener("mouseout",b,!0),Z.removeEventListener("mouseover",m,!0),r.globalThis.removeEventListener("mouseup",p,!0)};s.hooks.init.tap(t.tag,function(){var N=o.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(N.style.msContentZooming="none",N.style.msTouchAction="none"):d.supportsPointerEvents&&(N.style.touchAction="none"),d.supportsPointerEvents?E(N):M(N),d.supportsTouchEvents&&A(N),u.useNativeClickEvent&&N.addEventListener("click",O,!0),N.addEventListener("wheel",S,{passive:!0,capture:!0})}),s.hooks.destroy.tap(t.tag,function(){var N=o.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(N.style.msContentZooming="",N.style.msTouchAction=""):d.supportsPointerEvents&&(N.style.touchAction=""),d.supportsPointerEvents?L(N):R(N),d.supportsTouchEvents&&I(N),u.useNativeClickEvent&&N.removeEventListener("click",O,!0),N.removeEventListener("wheel",S,!0)})}}])}();kO.tag="DOMInteraction";var RO=function(t){function e(){var n;(0,C.Z)(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=(0,At.Z)(this,e,[].concat(o)),n.name="dom-interaction",n}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"init",value:function(){this.addRenderingPlugin(new kO)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(V.F6);var VP="g-canvas-camera",$p=function(){function t(){(0,C.Z)(this,t),this.displayObjectHTMLElementMap=new WeakMap}return(0,F.Z)(t,[{key:"joinTransformMatrix",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([n[0],n[1],n[4],n[5],n[12]+r[0],n[13]+r[1]].join(","),")")}},{key:"apply",value:function(n,r){var o=this,s=n.camera,l=n.renderingContext,u=n.renderingService;this.context=n;var d=l.root.ownerDocument.defaultView,h=d.context.eventService.nativeHTMLMap,p=function(E,A){A.style.transform=o.joinTransformMatrix(E.getWorldTransform(),E.getOrigin())},v=function(E){var A=E.target;if(A.nodeName===V.bn.HTML){o.$camera||(o.$camera=o.createCamera(s));var M=o.getOrCreateEl(A);o.$camera.appendChild(M),Object.keys(A.attributes).forEach(function(L){o.updateAttribute(L,A)}),p(A,M),h.set(M,A)}},m=function(E){var A=E.target;if(A.nodeName===V.bn.HTML&&o.$camera){var M=o.getOrCreateEl(A);M&&(M.remove(),h.delete(M))}},b=function(E){var A=E.target;if(A.nodeName===V.bn.HTML){var M=E.attrName;o.updateAttribute(M,A)}},_=function(E){var A=E.target,M=A.nodeName===V.bn.FRAGMENT?A.childNodes:[A];M.forEach(function(L){if(L.nodeName===V.bn.HTML){var I=o.getOrCreateEl(L);p(L,I)}})},S=function(){if(o.$camera){var E=o.context.config,A=E.width,M=E.height;o.$camera.parentElement.style.width="".concat(A||0,"px"),o.$camera.parentElement.style.height="".concat(M||0,"px")}};u.hooks.init.tap(t.tag,function(){d.addEventListener(V.$6.RESIZE,S),d.addEventListener(V.Dk.MOUNTED,v),d.addEventListener(V.Dk.UNMOUNTED,m),d.addEventListener(V.Dk.ATTR_MODIFIED,b),d.addEventListener(V.Dk.BOUNDS_CHANGED,_)}),u.hooks.endFrame.tap(t.tag,function(){o.$camera&&l.renderReasons.has(V.Rr.CAMERA_CHANGED)&&(o.$camera.style.transform=o.joinTransformMatrix(s.getOrthoMatrix()))}),u.hooks.destroy.tap(t.tag,function(){o.$camera&&o.$camera.remove(),d.removeEventListener(V.$6.RESIZE,S),d.removeEventListener(V.Dk.MOUNTED,v),d.removeEventListener(V.Dk.UNMOUNTED,m),d.removeEventListener(V.Dk.ATTR_MODIFIED,b),d.removeEventListener(V.Dk.BOUNDS_CHANGED,_)})}},{key:"createCamera",value:function(n){var r=this.context.config,o=r.document,s=r.width,l=r.height,u=this.context.contextService.getDomElement(),d=u.parentNode;if(d){var h=VP,p=d.querySelector("#".concat(h));if(!p){var v=(o||document).createElement("div");v.style.overflow="hidden",v.style.pointerEvents="none",v.style.position="absolute",v.style.left="0px",v.style.top="0px",v.style.width="".concat(s||0,"px"),v.style.height="".concat(l||0,"px");var m=(o||document).createElement("div");p=m,m.id=h,m.style.position="absolute",m.style.left="".concat(u.offsetLeft||0,"px"),m.style.top="".concat(u.offsetTop||0,"px"),m.style.transformOrigin="left top",m.style.transform=this.joinTransformMatrix(n.getOrthoMatrix()),m.style.pointerEvents="none",m.style.width="100%",m.style.height="100%",v.appendChild(m),d.appendChild(v)}return p}return null}},{key:"getOrCreateEl",value:function(n){var r=this.context.config.document,o=this.displayObjectHTMLElementMap.get(n);return o||(o=(r||document).createElement("div"),n.parsedStyle.$el=o,this.displayObjectHTMLElementMap.set(n,o),n.id&&(o.id=n.id),n.name&&o.setAttribute("name",n.name),n.className&&(o.className=n.className),o.style.position="absolute",o.style["will-change"]="transform",o.style.transform=this.joinTransformMatrix(n.getWorldTransform(),n.getOrigin())),o}},{key:"updateAttribute",value:function(n,r){var o=this.getOrCreateEl(r);switch(n){case"innerHTML":var s=r.parsedStyle.innerHTML;(0,ne.Z)(s)?o.innerHTML=s:(o.innerHTML="",o.appendChild(s));break;case"x":o.style.left="".concat(r.parsedStyle.x,"px");break;case"y":o.style.top="".concat(r.parsedStyle.y,"px");break;case"transformOrigin":var l=r.parsedStyle.transformOrigin;o.style["transform-origin"]="".concat(l[0].buildCSSText(null,null,"")," ").concat(l[1].buildCSSText(null,null,""));break;case"width":var u=r.parsedStyle.width;o.style.width=(0,be.Z)(u)?"".concat(u,"px"):u.toString();break;case"height":var d=r.parsedStyle.height;o.style.height=(0,be.Z)(d)?"".concat(d,"px"):d.toString();break;case"zIndex":var h=r.parsedStyle.zIndex;o.style["z-index"]="".concat(h);break;case"visibility":var p=r.parsedStyle.visibility;o.style.visibility=p;break;case"pointerEvents":var v=r.parsedStyle.pointerEvents,m=v===void 0?"auto":v;o.style.pointerEvents=m;break;case"opacity":var b=r.parsedStyle.opacity;o.style.opacity="".concat(b);break;case"fill":var _=r.parsedStyle.fill,S="";(0,V.qA)(_)?_.isNone?S="transparent":S=r.getAttribute("fill"):Array.isArray(_)?S=r.getAttribute("fill"):(0,V.R)(_),o.style.background=S;break;case"stroke":var O=r.parsedStyle.stroke,E="";(0,V.qA)(O)?O.isNone?E="transparent":E=r.getAttribute("stroke"):Array.isArray(O)?E=r.getAttribute("stroke"):(0,V.R)(O),o.style["border-color"]=E,o.style["border-style"]="solid";break;case"lineWidth":var A=r.parsedStyle.lineWidth;o.style["border-width"]="".concat(A||0,"px");break;case"lineDash":o.style["border-style"]="dashed";break;case"filter":var M=r.style.filter;o.style.filter=M;break;default:!(0,bn.Z)(r.style[n])&&r.style[n]!==""&&(o.style[n]=r.style[n])}}}])}();$p.tag="HTMLRendering";var DO=function(t){function e(){var n;(0,C.Z)(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=(0,At.Z)(this,e,[].concat(o)),n.name="html-renderer",n}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"init",value:function(){this.addRenderingPlugin(new $p)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(V.F6);var NO=function(){function t(e){(0,C.Z)(this,t),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}return(0,F.Z)(t,[{key:"init",value:function(){var n=this.canvasConfig,r=n.container,o=n.canvas;if(o)this.$canvas=o,r&&o.parentElement!==r&&r.appendChild(o),this.$container=o.parentElement,this.canvasConfig.container=this.$container;else if(r&&(this.$container=(0,ne.Z)(r)?document.getElementById(r):r,this.$container)){var s=document.createElement("canvas");this.$container.appendChild(s),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=s}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(n,r){var o=this.canvasConfig.devicePixelRatio;this.dpr=o,this.$canvas&&(this.$canvas.width=this.dpr*n,this.$canvas.height=this.dpr*r,(0,V.$p)(this.$canvas,n,r)),this.renderingContext.renderReasons.add(V.Rr.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(n){this.$container&&this.$container.style&&(this.$container.style.cursor=n)}},{key:"toDataURL",value:function(){var e=(0,hd.Z)((0,fa.Z)().mark(function r(){var o,s,l,u=arguments;return(0,fa.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=u.length>0&&u[0]!==void 0?u[0]:{},s=o.type,l=o.encoderOptions,d.abrupt("return",this.context.canvas.toDataURL(s,l));case 1:case"end":return d.stop()}},r,this)}));function n(){return e.apply(this,arguments)}return n}()}])}(),Uy=function(t){function e(){var n;(0,C.Z)(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=(0,At.Z)(this,e,[].concat(o)),n.name="canvas-context-register",n}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"init",value:function(){this.context.ContextService=NO}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(V.F6),FO=function(t){function e(n){var r;return(0,C.Z)(this,e),r=(0,At.Z)(this,e,[n]),r.registerPlugin(new Uy),r.registerPlugin(new Vo),r.registerPlugin(new dl),r.registerPlugin(new HP),r.registerPlugin(new RO),r.registerPlugin(new Ii),r.registerPlugin(new DO),r}return(0,Kt.Z)(e,t),(0,F.Z)(e)}(V.I8),BO=D(44078);var Zy=function(){function t(e){(0,C.Z)(this,t),this.dragndropPluginOptions=e}return(0,F.Z)(t,[{key:"apply",value:function(n){var r=this,o=n.renderingService,s=n.renderingContext,l=s.root.ownerDocument,u=l.defaultView,d=function(p){var v=p.target,m=v===l,b=m&&r.dragndropPluginOptions.isDocumentDraggable?l:v.closest&&v.closest("[draggable=true]");if(b){var _=!1,S=p.timeStamp,O=[p.clientX,p.clientY],E=null,A=[p.clientX,p.clientY],M=function(){var I=(0,hd.Z)((0,fa.Z)().mark(function R(N){var Z,W,it,tt,pt,K;return(0,fa.Z)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(_){lt.next=2;break}if(Z=N.timeStamp-S,W=(0,BO.y)([N.clientX,N.clientY],O),!(Z<=r.dragndropPluginOptions.dragstartTimeThreshold||W<=r.dragndropPluginOptions.dragstartDistanceThreshold)){lt.next=1;break}return lt.abrupt("return");case 1:N.type="dragstart",b.dispatchEvent(N),_=!0;case 2:if(N.type="drag",N.dx=N.clientX-A[0],N.dy=N.clientY-A[1],b.dispatchEvent(N),A=[N.clientX,N.clientY],m){lt.next=4;break}return it=r.dragndropPluginOptions.overlap==="pointer"?[N.canvasX,N.canvasY]:v.getBounds().center,lt.next=3,l.elementsFromPoint(it[0],it[1]);case 3:tt=lt.sent,pt=tt[tt.indexOf(v)+1],K=(pt==null?void 0:pt.closest("[droppable=true]"))||(r.dragndropPluginOptions.isDocumentDroppable?l:null),E!==K&&(E&&(N.type="dragleave",N.target=E,E.dispatchEvent(N)),K&&(N.type="dragenter",N.target=K,K.dispatchEvent(N)),E=K,E&&(N.type="dragover",N.target=E,E.dispatchEvent(N)));case 4:case"end":return lt.stop()}},R)}));return function(N){return I.apply(this,arguments)}}();u.addEventListener("pointermove",M);var L=function(R){if(_){R.detail={preventClick:!0};var N=R.clone();E&&(N.type="drop",N.target=E,E.dispatchEvent(N)),N.type="dragend",b.dispatchEvent(N),_=!1}u.removeEventListener("pointermove",M)};v.addEventListener("pointerup",L,{once:!0}),v.addEventListener("pointerupoutside",L,{once:!0})}};o.hooks.init.tap(t.tag,function(){u.addEventListener("pointerdown",d)}),o.hooks.destroy.tap(t.tag,function(){u.removeEventListener("pointerdown",d)})}}])}();Zy.tag="Dragndrop";var jO=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,C.Z)(this,e),n=(0,At.Z)(this,e),n.name="dragndrop",n.options=r,n}return(0,Kt.Z)(e,t),(0,F.Z)(e,[{key:"init",value:function(){this.addRenderingPlugin(new Zy((0,So.Z)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(r){Object.assign(this.plugins[0].dragndropPluginOptions,r)}}])}(V.F6);function zO(t,e,n){var r;return function(){var o=this,s=arguments,l=function(){r=null,n||t.apply(o,s)},u=n&&!r;clearTimeout(r),r=setTimeout(l,e),u&&t.apply(o,s)}}var Hy=zO,Qn=function(t,e,n){for(var r=0,o=(0,ne.Z)(e)?e.split("."):e;t&&r<o.length;)t=t[o[r++]];return t===void 0||r<o.length?n:t};class Vy extends Map{constructor(e,n=Kp){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,o]of e)this.set(r,o)}get(e){return super.get(Yp(this,e))}has(e){return super.has(Yp(this,e))}set(e,n){return super.set(Xp(this,e),n)}delete(e){return super.delete(qp(this,e))}}class WP extends null{constructor(e,n=Kp){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Yp(this,e))}add(e){return super.add(Xp(this,e))}delete(e){return super.delete(qp(this,e))}}function Yp({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Xp({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function qp({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Kp(t){return t!==null&&typeof t=="object"?t.valueOf():t}function yd(t){return t}function $r(t,...e){return pl(t,yd,yd,e)}function bd(t,...e){return pl(t,Array.from,yd,e)}function Wy(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(o=>o.pop().map(([s,l])=>[...o,s,l]));return t}function GP(t,...e){return Wy(bd(t,...e),e)}function UO(t,e,...n){return Wy(_d(t,e,...n),n)}function Qp(t,e,...n){return pl(t,yd,e,n)}function _d(t,e,...n){return pl(t,Array.from,e,n)}function Gy(t,...e){return pl(t,identity,HO,e)}function ZO(t,...e){return pl(t,Array.from,HO,e)}function HO(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function pl(t,e,n,r){return function o(s,l){if(l>=r.length)return n(s);const u=new Vy,d=r[l++];let h=-1;for(const p of s){const v=d(p,++h,s),m=u.get(v);m?m.push(p):u.set(v,[p])}for(const[p,v]of u)u.set(p,o(v,l));return e(u)}(t,0)}var Sr=D(5199),Jp=function(t){return typeof t=="object"&&t!==null},hc=Jp,Wo=D(95456),$y=function(t){if(!hc(t)||!(0,Wo.Z)(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Aa=$y,xd=5;function VO(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function Yy(t,e,n,r){n=n||0,r=r||xd;for(var o in e)if(VO(e,o)){var s=e[o];s!==null&&Aa(s)?(Aa(t[o])||(t[o]={}),n<r?Yy(t[o],s,n+1,r):t[o]=e[o]):(0,Sr.Z)(s)?(t[o]=[],t[o]=t[o].concat(s)):s!==void 0&&(t[o]=s)}}var WO=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Yy(t,e[r]);return t},Je=WO,Sd=function(t){return(0,bn.Z)(t)?"":t.toString()},$P=function(t){var e=Sd(t);return e.charAt(0).toLowerCase()+e.substring(1)},t0=$P;function Xy({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):n}function GO({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function $O({map:t,initKey:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function YO(t){return typeof t=="object"?t.valueOf():t}class Od extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=YO,e!==null)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(Xy({map:this.map,initKey:this.initKey},e))}has(e){return super.has(Xy({map:this.map,initKey:this.initKey},e))}set(e,n){return super.set(GO({map:this.map,initKey:this.initKey},e),n)}delete(e){return super.delete($O({map:this.map,initKey:this.initKey},e))}}class gl{transformBreaks(e){return e}constructor(e){var n;this.options=Je({},this.getDefaultOptions()),this.update(!((n=e==null?void 0:e.breaks)===null||n===void 0)&&n.length?this.transformBreaks(e):e)}getOptions(){return this.options}update(e={}){const n=e.breaks?this.transformBreaks(e):e;this.options=Je({},this.options,n),this.rescale(n)}rescale(e){}}const Mu=Symbol("defaultUnknown");function qy(t,e,n){for(let r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function Ky(t){const{value:e,from:n,to:r,mapper:o,notFoundReturn:s}=t;let l=o.get(e);if(l===void 0){if(s!==Mu)return s;l=n.push(e)-1,o.set(e,l)}return r[l%r.length]}function Qy(t){return t instanceof Date?e=>`${e}`:typeof t=="object"?e=>JSON.stringify(e):e=>e}class Ed extends gl{getDefaultOptions(){return{domain:[],range:[],unknown:Mu}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&qy(this.domainIndexMap,this.getDomain(),this.domainKey),Ky({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&qy(this.rangeIndexMap,this.getRange(),this.rangeKey),Ky({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=Qy(n),this.rangeKey=Qy(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new Ed(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:n}=this.options;return this.sortedDomain=n?[...e].sort(n):e,this.sortedDomain}}function XO(t){const e=t.reduce((n,r)=>Math.min(n,r),1/0);return e===1/0?[]:t.map(n=>n/e)}function qO(t,e){const n=t.length,r=e-n;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,e):t}function KO(t){return Math.round(t*1e12)/1e12}function QO(t){const{domain:e,range:n,paddingOuter:r,paddingInner:o,flex:s,round:l,align:u}=t,d=e.length,h=qO(s,d),[p,v]=n,m=v-p,b=2/d*r+1-1/d*o,_=m/b,S=_*o/d,O=_-d*S,E=XO(h),A=E.reduce((pt,K)=>pt+K),M=O/A,L=new Od(e.map((pt,K)=>{const lt=E[K]*M;return[pt,l?Math.floor(lt):lt]})),I=new Od(e.map((pt,K)=>{const ft=E[K]*M+S;return[pt,l?Math.floor(ft):ft]})),R=Array.from(I.values()).reduce((pt,K)=>pt+K),Z=(m-(R-R/d*o))*u,W=p+Z;let it=l?Math.round(W):W;const tt=new Array(d);for(let pt=0;pt<d;pt+=1){tt[pt]=KO(it);const K=e[pt];it+=I.get(K)}return{valueBandWidth:L,valueStep:I,adjustedRange:tt}}function JO(t){var e;const{domain:n}=t,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=t.flex)===null||e===void 0)&&e.length))return QO(t);const{range:s,paddingOuter:l,paddingInner:u,round:d,align:h}=t;let p,v,m=s[0];const _=s[1]-m,S=l*2,O=r-u;p=_/Math.max(1,S+O),d&&(p=Math.floor(p)),m+=(_-p*(r-u))*h,v=p*(1-u),d&&(m=Math.round(m),v=Math.round(v));const E=new Array(r).fill(0).map((A,M)=>m+M*p);return{valueStep:p,valueBandWidth:v,adjustedRange:E}}class Es extends Ed{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:Mu,flex:[]}}constructor(e){super(e)}clone(){return new Es(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:n}=this.options;return e>0?e:n}getPaddingOuter(){const{padding:e,paddingOuter:n}=this.options;return e>0?e:n}rescale(){super.rescale();const{align:e,domain:n,range:r,round:o,flex:s}=this.options,{adjustedRange:l,valueBandWidth:u,valueStep:d}=JO({align:e,range:r,round:o,flex:s,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=d,this.valueBandWidth=u,this.adjustedRange=l}}const e0=Math.sqrt(50),n0=Math.sqrt(10),wd=Math.sqrt(2);function Lu(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),s=r/bi(10,o);return o>=0?(s>=e0?10:s>=n0?5:s>=wd?2:1)*bi(10,o):-bi(10,-o)/(s>=e0?10:s>=n0?5:s>=wd?2:1)}function Jy(t,e,n){const r=Math.abs(e-t)/Math.max(0,n);let o=bi(10,Math.floor(Math.log(r)/Math.LN10));const s=r/o;return s>=e0?o*=10:s>=n0?o*=5:s>=wd&&(o*=2),e<t?-o:o}const tE=(t,e)=>{if(!(e!=null&&e.length))return t;const n=[...t,...e.flatMap(s=>[s.start,s.end])],o=Array.from(new Set(n)).sort((s,l)=>s-l).filter(s=>!e.some(({start:l,end:u})=>s>l&&s<u));return o.length?o:t},ws=(t,e,n,r)=>{let o,s,l=t,u=e;if(l===u&&n>0)return[l];let d=Lu(l,u,n);if(d===0||!Number.isFinite(d))return[];if(d>0){l=Math.ceil(l/d),u=Math.floor(u/d),s=new Array(o=Math.ceil(u-l+1));for(let h=0;h<o;h+=1)s[h]=(l+h)*d}else{d=-d,l=Math.ceil(l*d),u=Math.floor(u*d),s=new Array(o=Math.ceil(u-l+1));for(let h=0;h<o;h+=1)s[h]=(l+h)/d}return tE(s,r)};class Pu extends gl{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:ws}}map(e){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(e){const[n]=this.options.range;return e===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:e,domain:n,tickCount:r}=this.options,[o,s]=n;return!(0,be.Z)(o)||!(0,be.Z)(s)?[]:e(o,s,r)}clone(){return new Pu(this.options)}}var YP=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};function r0(t){var e;let n=t;for(;n;){if(((e=n.attributes)===null||e===void 0?void 0:e.class)==="view")return n;n=n.parentNode}return null}function Wa(t){const{markType:e,nodeName:n}=t;return e==="heatmap"&&n==="image"}function i0(t,e){const n=e!=null?e:r0(t).__data__,r=t.__data__,{markKey:o,index:s,seriesIndex:l,normalized:u={x:0}}=r,{markState:d}=n,h=Array.from(d.keys()).find(p=>p.key===o);if(h)return l?l.map(p=>h.data[p]):Wa(t)?h.data[Math.round(h.data.length*u.x)]:h.data[s]}function Ad(t){const e=r0(t).__data__,{scale:n}=e;return t1(n,t.__data__)}function eE(t,e){var n,r,o,s;const l=(n=e.markKey)!==null&&n!==void 0?n:(o=(r=e.element)===null||r===void 0?void 0:r.__data__)===null||o===void 0?void 0:o.markKey,u=Object.keys(t).find(d=>{if(d.startsWith("series")){const h=t[d].getOptions();return h.name==="series"&&h.markerKey===l}});return(s=t[u])!==null&&s!==void 0?s:t.series}function t1(t,e){const{color:n,facet:r=!1}=t,{color:o,series:s}=e,l=eE(t,e),u=d=>d&&d.invert&&!(d instanceof Es)&&!(d instanceof Pu);if(u(l))return l.clone().invert(s);if(s&&l instanceof Es&&l.invert(s)!==o&&!r)return l.invert(s);if(u(n)){const d=n.invert(o);return Array.isArray(d)?null:d}return null}function pc(t){return t}function o0(t){return t.reduce((e,n)=>(r,...o)=>n(e(r,...o),...o),pc)}function XP(t){return t.reduce((e,n)=>r=>YP(this,void 0,void 0,function*(){const o=yield e(r);return n(o)}),pc)}function Td(t){return t.replace(/( |^)[a-z]/g,e=>e.toUpperCase())}function As(t=""){throw new Error(t)}function Ga(t,e){const{attributes:n}=e,r=new Set(["id","className"]);for(const[o,s]of Object.entries(n))r.has(o)||t.attr(o,s)}function Zr(t){return t!=null&&!Number.isNaN(t)}function qP(t,e){return t+(e-t)*Math.random()}function nE(t){const e=new Map;return n=>{if(e.has(n))return e.get(n);const r=t(n);return e.set(n,r),r}}function e1(t,e){const{transform:n}=t.style,o=(s=>s==="none"||s===void 0)(n)?"":n;t.style.transform=`${o} ${e}`.trimStart()}function En(t,e){return n1(t,e)||{}}function n1(t,e){const n=Object.entries(t||{}).filter(([r])=>r.startsWith(e)).map(([r,o])=>[t0(r.replace(e,"").trim()),o]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function rE(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[`${e}${upperFirst(n)}`,r]))}function r1(t,e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.find(r=>n.startsWith(r))))}function Iu(t,...e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.every(r=>!n.startsWith(r))))}function a0(t,e){if(t===void 0)return null;if(typeof t=="number")return t;const n=+t.replace("%","");return Number.isNaN(n)?null:n/100*e}function vl(t){return typeof t=="object"&&!(t instanceof Date)&&t!==null&&!Array.isArray(t)}function $a(t){return t===null||t===!1}function i1(t,e,n=5,r=0){if(!(r>=n)){for(const o of Object.keys(e)){const s=e[o];!Aa(s)||!Aa(t[o])?t[o]=s:i1(t[o],s,n,r+1)}return t}}function Xn(t){return new Si([t],null,t,t.ownerDocument)}class Si{constructor(e=null,n=null,r=null,o=null,s=[null,null,null,null,null],l=[],u=[]){this._elements=Array.from(e),this._data=n,this._parent=r,this._document=o,this._enter=s[0],this._update=s[1],this._exit=s[2],this._merge=s[3],this._split=s[4],this._transitions=l,this._facetElements=u}selectAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new Si(n,null,this._elements[0],this._document)}selectFacetAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new Si(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(e){const n=typeof e=="string"?this._parent.querySelectorAll(e)[0]||null:e;return new Si([n],null,n,this._document)}append(e){const n=typeof e=="function"?e:()=>this.createElement(e),r=[];if(this._data!==null){for(let o=0;o<this._data.length;o++){const s=this._data[o],[l,u]=Array.isArray(s)?s:[s,null],d=n(l,o);d.__data__=l,u!==null&&(d.__fromElements__=u),this._parent.appendChild(d),r.push(d)}return new Si(r,null,this._parent,this._document)}else{for(let o=0;o<this._elements.length;o++){const s=this._elements[o],l=s.__data__,u=n(l,o);s.appendChild(u),r.push(u)}return new Si(r,null,r[0],this._document)}}maybeAppend(e,n,r){const o=this._elements[0],s=o.getElementById(e);if(s)return new Si([s],null,this._parent,this._document);const l=typeof n=="string"?this.createElement(n):n();return l.id=e,r&&(l.className=r),o.appendChild(l),new Si([l],null,this._parent,this._document)}data(e,n=o=>o,r=()=>null){const o=[],s=[],l=new Set(this._elements),u=[],d=new Set,h=new Map(this._elements.map((b,_)=>[n(b.__data__,_),b])),p=new Map(this._facetElements.map((b,_)=>[n(b.__data__,_),b])),v=$r(this._elements,b=>r(b.__data__));for(let b=0;b<e.length;b++){const _=e[b],S=n(_,b),O=r(_,b);if(h.has(S)){const E=h.get(S);E.__data__=_,E.__facet__=!1,s.push(E),l.delete(E),h.delete(S)}else if(p.has(S)){const E=p.get(S);E.__data__=_,E.__facet__=!0,s.push(E),p.delete(S)}else if(v.has(S)){const E=v.get(S);u.push([_,E]);for(const A of E)l.delete(A);v.delete(S)}else if(h.has(O)){const E=h.get(O);E.__toData__?E.__toData__.push(_):E.__toData__=[_],d.add(E),l.delete(E)}else o.push(_)}const m=[new Si([],o,this._parent,this._document),new Si(s,null,this._parent,this._document),new Si(l,null,this._parent,this._document),new Si([],u,this._parent,this._document),new Si(d,null,this._parent,this._document)];return new Si(this._elements,null,this._parent,this._document,m)}merge(e){const n=[...this._elements,...e._elements],r=[...this._transitions,...e._transitions];return new Si(n,null,this._parent,this._document,void 0,r)}createElement(e){if(this._document)return this._document.createElement(e,{});const n=Si.registry[e];return n?new n:As(`Unknown node type: ${e}`)}join(e=l=>l,n=l=>l,r=l=>l.remove(),o=l=>l,s=l=>l.remove()){const l=e(this._enter),u=n(this._update),d=r(this._exit),h=o(this._merge),p=s(this._split);return u.merge(l).merge(d).merge(h).merge(p)}remove(){for(let e=0;e<this._elements.length;e++){const n=this._transitions[e];if(this._elements[e].__removed__=!0,n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(o=>o.finished)).then(()=>{const o=this._elements[e];o.__removed__&&o.remove()})}else{const r=this._elements[e];r.__removed__&&r.remove()}}return new Si([],null,this._parent,this._document,void 0,this._transitions)}each(e){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],o=r.__data__;e(o,n,r)}return this}attr(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(o,s,l){n!==void 0&&(l[e]=r(o,s,l))})}style(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(o,s,l){n!==void 0&&(l.style[e]=r(o,s,l))})}transition(e){const n=typeof e!="function"?()=>e:e,{_transitions:r}=this;return this.each(function(o,s,l){r[s]=n(o,s,l)})}on(e,n){return this.each(function(r,o,s){s.addEventListener(e,n)}),this}call(e,...n){return e(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}Si.registry={g:V.ZA,rect:V.UL,circle:V.Cd,path:V.y$,text:V.xv,ellipse:V.Pj,image:V.Ee,line:V.x1,polygon:V.mg,polyline:V.aH,html:V.k9};const Cr={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"},o1={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};function iE(t,e){o1[t]=e}class Ri extends Error{constructor(e,n,r){super(e),this.position=n,this.token=r,this.name="ExpressionError"}}var er;(function(t){t[t.STRING=0]="STRING",t[t.NUMBER=1]="NUMBER",t[t.BOOLEAN=2]="BOOLEAN",t[t.NULL=3]="NULL",t[t.IDENTIFIER=4]="IDENTIFIER",t[t.OPERATOR=5]="OPERATOR",t[t.FUNCTION=6]="FUNCTION",t[t.DOT=7]="DOT",t[t.BRACKET_LEFT=8]="BRACKET_LEFT",t[t.BRACKET_RIGHT=9]="BRACKET_RIGHT",t[t.PAREN_LEFT=10]="PAREN_LEFT",t[t.PAREN_RIGHT=11]="PAREN_RIGHT",t[t.COMMA=12]="COMMA",t[t.QUESTION=13]="QUESTION",t[t.COLON=14]="COLON",t[t.DOLLAR=15]="DOLLAR"})(er||(er={}));const oE=new Set([32,9,10,13]),aE=new Set([43,45,42,47,37,33,38,124,61,60,62]),sE=new Map([["true",er.BOOLEAN],["false",er.BOOLEAN],["null",er.NULL]]),ku=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),cE=new Map([[46,er.DOT],[91,er.BRACKET_LEFT],[93,er.BRACKET_RIGHT],[40,er.PAREN_LEFT],[41,er.PAREN_RIGHT],[44,er.COMMA],[63,er.QUESTION],[58,er.COLON],[36,er.DOLLAR]]),ml=new Map;for(const[t,e]of cE.entries())ml.set(t,{type:e,value:String.fromCharCode(t)});function Ru(t){return t>=48&&t<=57}function Du(t){return t>=97&&t<=122||t>=65&&t<=90||t===95}function a1(t){return Du(t)||Ru(t)}function Cd(t){return aE.has(t)}var fi;(function(t){t[t.Program=0]="Program",t[t.Literal=1]="Literal",t[t.Identifier=2]="Identifier",t[t.MemberExpression=3]="MemberExpression",t[t.CallExpression=4]="CallExpression",t[t.BinaryExpression=5]="BinaryExpression",t[t.UnaryExpression=6]="UnaryExpression",t[t.ConditionalExpression=7]="ConditionalExpression"})(fi||(fi={}));const s0=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),c0={type:fi.Literal,value:null},s1={type:fi.Literal,value:!0},c1={type:fi.Literal,value:!1},Ya=t=>{let e=0;const n=t.length,r=()=>e>=n?null:t[e],o=()=>t[e++],s=v=>{const m=r();return m!==null&&m.type===v},l=v=>v.type===er.OPERATOR?s0.get(v.value)||-1:v.type===er.DOT||v.type===er.BRACKET_LEFT?9:v.type===er.QUESTION?1:-1,u=v=>{let m,b;if(o().type===er.DOT){if(!s(er.IDENTIFIER)){const S=r();throw new Ri("Expected property name",e,S?S.value:"<end of input>")}const _=o();m={type:fi.Identifier,name:_.value},b=!1}else{if(m=h(0),!s(er.BRACKET_RIGHT)){const _=r();throw new Ri("Expected closing bracket",e,_?_.value:"<end of input>")}o(),b=!0}return{type:fi.MemberExpression,object:v,property:m,computed:b}},d=()=>{const v=r();if(!v)throw new Ri("Unexpected end of input",e,"<end of input>");if(v.type===er.OPERATOR&&(v.value==="!"||v.value==="-")){o();const m=d();return{type:fi.UnaryExpression,operator:v.value,argument:m,prefix:!0}}switch(v.type){case er.NUMBER:return o(),{type:fi.Literal,value:Number(v.value)};case er.STRING:return o(),{type:fi.Literal,value:v.value};case er.BOOLEAN:return o(),v.value==="true"?s1:c1;case er.NULL:return o(),c0;case er.IDENTIFIER:return o(),{type:fi.Identifier,name:v.value};case er.FUNCTION:return(()=>{const m=o(),b=[];if(!s(er.PAREN_LEFT)){const _=r();throw new Ri("Expected opening parenthesis after function name",e,_?_.value:"<end of input>")}for(o();;){if(s(er.PAREN_RIGHT)){o();break}if(!r()){const S=r();throw new Ri("Expected closing parenthesis",e,S?S.value:"<end of input>")}if(b.length>0){if(!s(er.COMMA)){const S=r();throw new Ri("Expected comma between function arguments",e,S?S.value:"<end of input>")}o()}const _=h(0);b.push(_)}return{type:fi.CallExpression,callee:{type:fi.Identifier,name:m.value},arguments:b}})();case er.PAREN_LEFT:{o();const m=h(0);if(!s(er.PAREN_RIGHT)){const b=r();throw new Ri("Expected closing parenthesis",e,b?b.value:"<end of input>")}return o(),m}default:throw new Ri(`Unexpected token: ${v.type}`,e,v.value)}},h=(v=0)=>{let m=d();for(;e<n;){const b=t[e],_=l(b);if(_<=v)break;if(b.type!==er.QUESTION)if(b.type!==er.OPERATOR){if(b.type!==er.DOT&&b.type!==er.BRACKET_LEFT)break;m=u(m)}else{o();const S=h(_);m={type:fi.BinaryExpression,operator:b.value,left:m,right:S}}else{o();const S=h(0);if(!s(er.COLON)){const E=r();throw new Ri("Expected : in conditional expression",e,E?E.value:"<end of input>")}o();const O=h(0);m={type:fi.ConditionalExpression,test:m,consequent:S,alternate:O}}}return m},p=h();return{type:fi.Program,body:p}},lE=(t,e,n)=>{let r=e;n&&(r=rO(Cp({},e),{context:Cp(Cp({},e.context),n)}));const o=s=>{switch(s.type){case fi.Literal:return(l=>l.value)(s);case fi.Identifier:return(l=>{if(!(l.name in r.context))throw new Ri(`Undefined variable: ${l.name}`);return r.context[l.name]})(s);case fi.MemberExpression:return(l=>{const u=o(l.object);if(u==null)throw new Ri("Cannot access property of null or undefined");return u[l.computed?o(l.property):l.property.name]})(s);case fi.CallExpression:return(l=>{const u=r.functions[l.callee.name];if(!u)throw new Ri(`Undefined function: ${l.callee.name}`);return u(...l.arguments.map(d=>o(d)))})(s);case fi.BinaryExpression:return(l=>{if(l.operator==="&&"){const h=o(l.left);return h&&o(l.right)}if(l.operator==="||")return o(l.left)||o(l.right);const u=o(l.left),d=o(l.right);switch(l.operator){case"+":return u+d;case"-":return u-d;case"*":return u*d;case"/":return u/d;case"%":return u%d;case"===":return u===d;case"!==":return u!==d;case">":return u>d;case">=":return u>=d;case"<":return u<d;case"<=":return u<=d;default:throw new Ri(`Unknown operator: ${l.operator}`)}})(s);case fi.UnaryExpression:return(l=>{const u=o(l.argument);if(l.prefix)switch(l.operator){case"!":return!u;case"-":if(typeof u!="number")throw new Ri(`Cannot apply unary - to non-number: ${u}`);return-u;default:throw new Ri(`Unknown operator: ${l.operator}`)}throw new Ri(`Postfix operators are not supported: ${l.operator}`)})(s);case fi.ConditionalExpression:return(l=>{const u=o(l.test);return o(u?l.consequent:l.alternate)})(s);default:throw new Ri(`Evaluation error: Unsupported node type: ${s.type}`)}};return o(t.body)};function l0(t){const e=(o=>{const s=o,l=s.length,u=new Array(Math.ceil(l/3));let d=0,h=0;function p(O){const E=h+1;h++;let A="",M=!1;for(;h<l;){const L=s.charCodeAt(h);if(L===O)return M||(A=s.substring(E,h)),h++,{type:er.STRING,value:A};L===92?(M||(A=s.substring(E,h),M=!0),h++,A+=s[h]):M&&(A+=s[h]),h++}throw new Ri(`Unterminated string starting with ${String.fromCharCode(O)}`,h,s.substring(Math.max(0,h-10),h))}function v(){const O=h;for(s.charCodeAt(h)===45&&h++;h<l&&Ru(s.charCodeAt(h));)h++;if(h<l&&s.charCodeAt(h)===46)for(h++;h<l&&Ru(s.charCodeAt(h));)h++;const E=s.slice(O,h);return{type:er.NUMBER,value:E}}function m(){h++;const O=h;if(h<l&&Du(s.charCodeAt(h)))for(h++;h<l&&a1(s.charCodeAt(h));)h++;const E=s.slice(O,h);return{type:er.FUNCTION,value:E}}function b(){const O=h++;for(;h<l&&a1(s.charCodeAt(h));)h++;const E=s.slice(O,h),A=sE.get(E);return A?{type:A,value:E}:{type:er.IDENTIFIER,value:E}}function _(){if(h+2<l){const E=s.substring(h,h+3);if(ku.has(E))return h+=3,{type:er.OPERATOR,value:E}}if(h+1<l){const E=s.substring(h,h+2);if(ku.has(E))return h+=2,{type:er.OPERATOR,value:E}}const O=s[h];if(ku.has(O))return h++,{type:er.OPERATOR,value:O};throw new Ri(`Unknown operator at position ${h}: ${s.substring(h,h+1)}`,h,s.substring(Math.max(0,h-10),h))}for(;h<l;){const O=s.charCodeAt(h);if(S=O,oE.has(S)){h++;continue}const E=ml.get(O);if(E)u[d++]=E,h++;else if(O!==34&&O!==39)if(Ru(O)||O===45&&h+1<l&&Ru(s.charCodeAt(h+1)))u[d++]=v();else if(O!==64)if(Du(O))u[d++]=b();else{if(!Cd(O))throw new Ri(`Unexpected character: ${s[h]}`,h,s.substring(Math.max(0,h-10),h));u[d++]=_()}else u[d++]=m();else u[d++]=p(O)}var S;return d===u.length?u:u.slice(0,d)})(t),n=Ya(e),r=((o={},s={})=>({context:o,functions:s}))({},o1);return(o={})=>lE(n,r,o)}function uE(t,e={}){return l0(t)(e)}var yl=D(4637),u0=function(t){return t},fE=function(t,e){e===void 0&&(e=u0);var n={};return(0,yl.Z)(t)&&!(0,bn.Z)(t)&&Object.keys(t).forEach(function(r){n[r]=e(t[r],r)}),n};function l1(t){var e,n,r,o=t||1;function s(u,d){++e>o&&(r=n,l(1),++e),n[u]=d}function l(u){e=0,n=Object.create(null),u||(r=Object.create(null))}return l(),{clear:l,has:function(u){return n[u]!==void 0||r[u]!==void 0},get:function(u){var d=n[u];if(d!==void 0)return d;if((d=r[u])!==void 0)return s(u,d),d},set:function(u,d){n[u]!==void 0?n[u]=d:s(u,d)}}}const KP=l1(3);function f0(t,e=(...r)=>`${r[0]}`,n=16){const r=l1(n);return(...o)=>{const s=e(...o);let l=r.get(s);return r.has(s)?r.get(s):(l=t(...o),r.set(s,l),l)}}const d0=["style","encode","labels","children"],u1=f0(t=>{const e=l0(t);return(...n)=>{const r=Array.from({length:n.length},(s,l)=>String.fromCharCode(97+l)),o=Object.fromEntries(n.map((s,l)=>[r[l],s]));return e(Object.assign(Object.assign({},o),{global:Object.assign({},o)}))}},t=>t,128);function Nu(t,e=!0){if(Array.isArray(t))return t.map((n,r)=>Nu(t[r],e));if(typeof t=="object"&&t)return fE(t,(n,r)=>e&&d0.includes(r)?Nu(n,r==="children"):e?n:Nu(n,!1));if(typeof t=="string"){const n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))return u1(n.slice(1,-1))}return t}var dE=function(t){var e=Sd(t);return e.charAt(0).toUpperCase()+e.substring(1)},Ts=dE;function h0(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Md(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function hE(t){return t=Md(Math.abs(t)),t?t[1]:NaN}function Ld(t,e){return function(n,r){for(var o=n.length,s=[],l=0,u=t[0],d=0;o>0&&u>0&&(d+u+1>r&&(u=Math.max(1,r-d)),s.push(n.substring(o-=u,o+u)),!((d+=u+1)>r));)u=t[l=(l+1)%t.length];return s.reverse().join(e)}}function p0(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var pE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gc(t){if(!(e=pE.exec(t)))throw new Error("invalid format: "+t);var e;return new g0({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}gc.prototype=g0.prototype;function g0(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}g0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gE(t){t:for(var e=t.length,n=1,r=-1,o;n<e;++n)switch(t[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(o+1):t}var f1;function d1(t,e){var n=Md(t,e);if(!n)return t+"";var r=n[0],o=n[1],s=o-(f1=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Md(t,Math.max(0,e+s-1))[0]}function h1(t,e){var n=Md(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}var p1={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:h0,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>h1(t*100,e),r:h1,s:d1,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function v0(t){return t}var Fu=Array.prototype.map,g1=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function vE(t){var e=t.grouping===void 0||t.thousands===void 0?v0:Ld(Fu.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?v0:p0(Fu.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"\u2212":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(v){v=gc(v);var m=v.fill,b=v.align,_=v.sign,S=v.symbol,O=v.zero,E=v.width,A=v.comma,M=v.precision,L=v.trim,I=v.type;I==="n"?(A=!0,I="g"):p1[I]||(M===void 0&&(M=12),L=!0,I="g"),(O||m==="0"&&b==="=")&&(O=!0,m="0",b="=");var R=S==="$"?n:S==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",N=S==="$"?r:/[%p]/.test(I)?l:"",Z=p1[I],W=/[defgprs%]/.test(I);M=M===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function it(tt){var pt=R,K=N,lt,ft,vt;if(I==="c")K=Z(tt)+K,tt="";else{tt=+tt;var It=tt<0||1/tt<0;if(tt=isNaN(tt)?d:Z(Math.abs(tt),M),L&&(tt=gE(tt)),It&&+tt==0&&_!=="+"&&(It=!1),pt=(It?_==="("?_:u:_==="-"||_==="("?"":_)+pt,K=(I==="s"?g1[8+f1/3]:"")+K+(It&&_==="("?")":""),W){for(lt=-1,ft=tt.length;++lt<ft;)if(vt=tt.charCodeAt(lt),48>vt||vt>57){K=(vt===46?o+tt.slice(lt+1):tt.slice(lt))+K,tt=tt.slice(0,lt);break}}}A&&!O&&(tt=e(tt,1/0));var _t=pt.length+tt.length+K.length,Lt=_t<E?new Array(E-_t+1).join(m):"";switch(A&&O&&(tt=e(Lt+tt,Lt.length?E-K.length:1/0),Lt=""),b){case"<":tt=pt+tt+K+Lt;break;case"=":tt=pt+Lt+tt+K;break;case"^":tt=Lt.slice(0,_t=Lt.length>>1)+pt+tt+K+Lt.slice(_t);break;default:tt=Lt+pt+tt+K;break}return s(tt)}return it.toString=function(){return v+""},it}function p(v,m){var b=h((v=gc(v),v.type="f",v)),_=Math.max(-8,Math.min(8,Math.floor(hE(m)/3)))*3,S=Math.pow(10,-_),O=g1[8+_/3];return function(E){return b(S*E)+O}}return{format:h,formatPrefix:p}}var Pd,Cs,mE;yE({thousands:",",grouping:[3],currency:["$",""]});function yE(t){return Pd=vE(t),Cs=Pd.format,mE=Pd.formatPrefix,Pd}function Ta(t,e){return Object.entries(t).reduce((n,[r,o])=>(n[r]=e(o,r,t),n),{})}function vc(t){return t.map((e,n)=>n)}function QP(t){const e=t.length,n=t[0].length,r=new Array(n).fill(0).map(()=>new Array(e));for(let o=0;o<n;o++)for(let s=0;s<e;s++)r[o][s]=t[s][o];return r}function bE(t){return t[0]}function v1(t){return t[t.length-1]}function JP(t){return!t.some(Array.isArray)}function _E(t){return Array.from(new Set(t))}function m0(t,e){const n=[[],[]];return t.forEach(r=>{n[e(r)?0:1].push(r)}),n}function m1(t,e=t.length){if(e===1)return t.map(r=>[r]);const n=[];for(let r=0;r<t.length;r++){const o=t.slice(r+1);m1(o,e-1).forEach(l=>{n.push([t[r],...l])})}return n}function xE(t){if(t.length===1)return[t];const e=[];for(let n=1;n<=t.length;n++)e.push(...m1(t,n));return e}var y1=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},Ms=y1,Id=function(t,e){if(t===e)return!0;if(!t||!e||(0,ne.Z)(t)||(0,ne.Z)(e))return!1;if(Ms(t)||Ms(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=Id(t[r],e[r]),!!n);r++);return n}if(hc(t)||hc(e)){var o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;for(var n=!0,r=0;r<o.length&&(n=Id(t[o[r]],e[o[r]]),!!n);r++);return n}return!1},kd=Id;function Go(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&(n+=o)}return n}function kr(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function t6(t){return t*Math.PI/180}function e6(t){return t*180/Math.PI}function b1(t,e){return t=t%(2*Math.PI),e=e%(2*Math.PI),t<0&&(t=2*Math.PI+t),e<0&&(e=2*Math.PI+e),t>=e&&(e=e+2*Math.PI),{startAngle:t,endAngle:e}}const _1=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},e),t);return Object.assign(Object.assign({},n),b1(n.startAngle,n.endAngle))},Bu=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:o}=_1(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",e,n,r,o]]};Bu.props={};const y0=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},Rd=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:o}=y0(t);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...Bu({startAngle:e,endAngle:n,innerRadius:r,outerRadius:o})]};Rd.props={};function ju(t,e,n){return Math.max(e,Math.min(t,n))}function Dd(t,e=10){return typeof t!="number"||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(e))}const SE=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]],OE=["lineX","lineY","rangeX","rangeY","range","connector"];var x1=D(17816);function Yr(t){const{transformations:e}=t.getOptions();return e.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function Rr(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="polar")}function zu(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="reflect")&&e.some(([n])=>n.startsWith("transpose"))}function S1(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="helix")}function Uu(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="parallel")}function b0(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="fisheye")}function EE(t){return Uu(t)&&Rr(t)}function bl(t){return S1(t)||Rr(t)}function _0(t){return Rr(t)&&Yr(t)}function wE(t){return Rr(t)||Uu(t)||zu(t)||_0(t)}function AE(t){if(bl(t)){const[e,n]=t.getSize(),r=t.getOptions().transformations.find(o=>o[0]==="polar");if(r)return Math.max(e,n)/2*r[4]}return 0}function Zu(t){const{transformations:e}=t.getOptions(),[,,,n,r]=e.find(o=>o[0]==="polar");return[+n,+r]}function x0(t,e=!0){const{transformations:n}=t.getOptions(),[,r,o]=n.find(s=>s[0]==="polar");return e?[+r*180/Math.PI,+o*180/Math.PI]:[r,o]}function TE(t,e){const{transformations:n}=t.getOptions(),[,...r]=n.find(o=>o[0]===e);return r}var X=D(97582);function S0(t,e){e(t),t.children&&t.children.forEach(function(n){n&&S0(n,e)})}function Hu(t){Vu(t,!0)}function Ls(t){Vu(t,!1)}function Vu(t,e){var n=e?"visible":"hidden";S0(t,function(r){r.attr("visibility",n)})}function O0(t){return typeof t=="boolean"?!1:"enter"in t&&"update"in t&&"exit"in t}function E0(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter(function(r){var o=(0,X.CR)(r,1),s=o[0];return!e.includes(s)}));return Object.fromEntries(e.map(function(r){return O0(t)?t[r]===!1?[r,!1]:[r,(0,X.pi)((0,X.pi)({},t[r]),n)]:[r,n]}))}function _l(t,e){t?t.finished.then(e):e()}function CE(t,e){t.length===0?e():Promise.all(t.map(function(n){return n==null?void 0:n.finished})).then(e)}function O1(t,e){"update"in t?t.update(e):t.attr(e)}function E1(t,e,n){if(e.length===0)return null;if(!n){var r=e.slice(-1)[0];return O1(t,{style:r}),null}return t.animate(e,n)}function ME(t,e){return!(t.nodeName!=="text"||e.nodeName!=="text"||t.attributes.text!==e.attributes.text)}function Wu(t,e,n,r){if(r===void 0&&(r="destroy"),ME(t,e))return t.remove(),[null];var o=function(){r==="destroy"?t.destroy():r==="hide"&&Ls(t),e.isVisible()&&Hu(e)};if(!n)return o(),[null];var s=n.duration,l=s===void 0?0:s,u=n.delay,d=u===void 0?0:u,h=Math.ceil(+l/2),p=+l/4,v=(0,X.CR)(t.getGeometryBounds().center,2),m=v[0],b=v[1],_=(0,X.CR)(e.getGeometryBounds().center,2),S=_[0],O=_[1],E=(0,X.CR)([(m+S)/2-m,(b+O)/2-b],2),A=E[0],M=E[1],L=t.style.opacity,I=L===void 0?1:L,R=e.style.opacity,N=R===void 0?1:R,Z=t.style.transform||"",W=e.style.transform||"",it=t.animate([{opacity:I,transform:"translate(0, 0) ".concat(Z)},{opacity:0,transform:"translate(".concat(A,", ").concat(M,") ").concat(Z)}],(0,X.pi)((0,X.pi)({fill:"both"},n),{duration:d+h+p})),tt=e.animate([{opacity:0,transform:"translate(".concat(-A,", ").concat(-M,") ").concat(W),offset:.01},{opacity:N,transform:"translate(0, 0) ".concat(W)}],(0,X.pi)((0,X.pi)({fill:"both"},n),{duration:h+p,delay:d+h-p}));return _l(tt,o),[it,tt]}function $o(t,e,n){var r={},o={};return Object.entries(e).forEach(function(s){var l=(0,X.CR)(s,2),u=l[0],d=l[1];if(!(0,bn.Z)(d)){var h=t.style[u]||t.parsedStyle[u]||0;h!==d&&(r[u]=h,o[u]=d)}}),n?E1(t,[r,o],(0,X.pi)({fill:"both"},n)):(O1(t,o),null)}var LE=5,Nd=function(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=LE),Object.entries(e).forEach(function(o){var s=(0,X.CR)(o,2),l=s[0],u=s[1],d=t;Object.prototype.hasOwnProperty.call(e,l)&&(u?Aa(u)?(Aa(t[l])||(d[l]={}),n<r?Nd(t[l],u,n+1,r):d[l]=e[l]):(0,Sr.Z)(u)?(d[l]=[],d[l]=d[l].concat(u)):d[l]=u:d[l]=u)})},da=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Nd(t,e[r]);return t},PE=function(t){(0,X.ZT)(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,(0,X.ev)([],(0,X.CR)(n),!1))||this;return o.isMutationObserved=!0,o.addEventListener(V.Dk.INSERTED,function(){Ls(o)}),o}return e}(V.ZA);function mc(t){var e=t.appendChild(new PE({class:"offscreen"}));return Ls(e),e}function IE(t){for(var e=t;e;){if(e.className==="offscreen")return!0;e=e.parent}return!1}function kE(){Vu(this,this.attributes.visibility!=="hidden")}var zi=function(t){(0,X.ZT)(e,t);function e(n,r){r===void 0&&(r={});var o=t.call(this,da({},{style:r},n))||this;return o.initialized=!1,o._defaultOptions=r,o}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=mc(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},e.prototype.attributeChangedCallback=function(n){n==="visibility"&&kE.call(this)},e.prototype.update=function(n,r){var o;return this.attr(da({},this.attributes,n||{})),(o=this.render)===null||o===void 0?void 0:o.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(n,r){},e.prototype.getSubShapeStyle=function(n){var r=n.x,o=n.y,s=n.transform,l=n.transformOrigin,u=n.class,d=n.className,h=n.zIndex,p=(0,X._T)(n,["x","y","transform","transformOrigin","class","className","zIndex"]);return p},e}(V.b_);function fo(t,e,n,r,o){return r===void 0&&(r=!0),o===void 0&&(o=function(s){s.node().removeChildren()}),t?n(e):(r&&o(e),null)}function RE(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),r=[],o=0;o<t.length;o+=n)r.push(t[o]);return r}var DE=function(t){if(!(0,Sr.Z)(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},w1=DE,w0=function(t){(0,X.ZT)(e,t);function e(n){n===void 0&&(n={});var r=n.style,o=(0,X._T)(n,["style"]);return t.call(this,(0,X.pi)({style:(0,X.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},o))||this}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=mc(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},e}(V.xv);function NE(t,e){var n=new Map;return t.forEach(function(r){var o=e(r);n.has(o)||n.set(o,[]),n.get(o).push(r)}),n}function A1(t){throw new Error(t)}var A0=function(){function t(o,s,l,u,d,h,p){o===void 0&&(o=null),s===void 0&&(s=null),l===void 0&&(l=null),u===void 0&&(u=null),d===void 0&&(d=[null,null,null,null,null]),h===void 0&&(h=[]),p===void 0&&(p=[]),e.add(this),this._elements=Array.from(o),this._data=s,this._parent=l,this._document=u,this._enter=d[0],this._update=d[1],this._exit=d[2],this._merge=d[3],this._split=d[4],this._transitions=h,this._facetElements=p}t.prototype.selectAll=function(o){var s=typeof o=="string"?this._parent.querySelectorAll(o):o;return new n(s,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(o){var s=typeof o=="string"?this._parent.querySelectorAll(o):o;return new n(this._elements,null,this._parent,this._document,void 0,void 0,s)},t.prototype.select=function(o){var s=typeof o=="string"?this._parent.querySelectorAll(o)[0]||null:o;return new n([s],null,s,this._document)},t.prototype.append=function(o){var s=this,l=typeof o=="function"?o:function(){return s.createElement(o)},u=[];if(this._data!==null){for(var d=0;d<this._data.length;d++){var h=this._data[d],p=(0,X.CR)(Array.isArray(h)?h:[h,null],2),v=p[0],m=p[1],b=l(v,d);b.__data__=v,m!==null&&(b.__fromElements__=m),this._parent.appendChild(b),u.push(b)}return new n(u,null,this._parent,this._document)}for(var d=0;d<this._elements.length;d++){var _=this._elements[d],v=_.__data__,b=l(v,d);_.appendChild(b),u.push(b)}return new n(u,null,u[0],this._document)},t.prototype.maybeAppend=function(o,s){var l=(0,X.Q_)(this,e,"m",r).call(this,o[0]==="#"?o:"#".concat(o),s);return l.attr("id",o),l},t.prototype.maybeAppendByClassName=function(o,s){var l=o.toString(),u=(0,X.Q_)(this,e,"m",r).call(this,l[0]==="."?l:".".concat(l),s);return u.attr("className",l),u},t.prototype.maybeAppendByName=function(o,s){var l=(0,X.Q_)(this,e,"m",r).call(this,'[name="'.concat(o,'"]'),s);return l.attr("name",o),l},t.prototype.data=function(o,s,l){var u,d;s===void 0&&(s=function(it){return it}),l===void 0&&(l=function(){return null});for(var h=[],p=[],v=new Set(this._elements),m=[],b=new Set,_=new Map(this._elements.map(function(it,tt){return[s(it.__data__,tt),it]})),S=new Map(this._facetElements.map(function(it,tt){return[s(it.__data__,tt),it]})),O=NE(this._elements,function(it){return l(it.__data__)}),E=0;E<o.length;E++){var A=o[E],M=s(A,E),L=l(A,E);if(_.has(M)){var I=_.get(M);I.__data__=A,I.__facet__=!1,p.push(I),v.delete(I),_.delete(M)}else if(S.has(M)){var I=S.get(M);I.__data__=A,I.__facet__=!0,p.push(I),S.delete(M)}else if(O.has(M)){var R=O.get(M);m.push([A,R]);try{for(var N=(u=void 0,(0,X.XA)(R)),Z=N.next();!Z.done;Z=N.next()){var I=Z.value;v.delete(I)}}catch(it){u={error:it}}finally{try{Z&&!Z.done&&(d=N.return)&&d.call(N)}finally{if(u)throw u.error}}O.delete(M)}else if(_.has(L)){var I=_.get(L);I.__toData__?I.__toData__.push(A):I.__toData__=[A],b.add(I),v.delete(I)}else h.push(A)}var W=[new n([],h,this._parent,this._document),new n(p,null,this._parent,this._document),new n(v,null,this._parent,this._document),new n([],m,this._parent,this._document),new n(b,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,W)},t.prototype.merge=function(o){var s=(0,X.ev)((0,X.ev)([],(0,X.CR)(this._elements),!1),(0,X.CR)(o._elements),!1),l=(0,X.ev)((0,X.ev)([],(0,X.CR)(this._transitions),!1),(0,X.CR)(o._transitions),!1);return new n(s,null,this._parent,this._document,void 0,l)},t.prototype.createElement=function(o){if(this._document)return this._document.createElement(o,{});var s=n.registry[o];return s?new s:A1("Unknown node type: ".concat(o))},t.prototype.join=function(o,s,l,u,d){o===void 0&&(o=function(_){return _}),s===void 0&&(s=function(_){return _}),l===void 0&&(l=function(_){return _.remove()}),u===void 0&&(u=function(_){return _}),d===void 0&&(d=function(_){return _.remove()});var h=o(this._enter),p=s(this._update),v=l(this._exit),m=u(this._merge),b=d(this._split);return p.merge(h).merge(v).merge(m).merge(b)},t.prototype.remove=function(){for(var o=function(u){var d=s._elements[u],h=s._transitions[u];h?h.then(function(){return d.remove()}):d.remove()},s=this,l=0;l<this._elements.length;l++)o(l);return new n([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(o){for(var s=0;s<this._elements.length;s++){var l=this._elements[s],u=l.__data__;o.call(l,u,s)}return this},t.prototype.attr=function(o,s){var l=typeof s!="function"?function(){return s}:s;return this.each(function(u,d){s!==void 0&&(this[o]=l.call(this,u,d))})},t.prototype.style=function(o,s,l){l===void 0&&(l=!0);var u=typeof s!="function"||!l?function(){return s}:s;return this.each(function(d,h){s!==void 0&&(this.style[o]=u.call(this,d,h))})},t.prototype.styles=function(o,s){return o===void 0&&(o={}),s===void 0&&(s=!0),this.each(function(l,u){var d=this;Object.entries(o).forEach(function(h){var p=(0,X.CR)(h,2),v=p[0],m=p[1],b=typeof m!="function"||!s?function(){return m}:m;m!==void 0&&d.attr(v,b.call(d,l,u))})})},t.prototype.update=function(o,s){s===void 0&&(s=!0);var l=typeof o!="function"||!s?function(){return o}:o;return this.each(function(u,d){o&&this.update&&this.update(l.call(this,u,d))})},t.prototype.maybeUpdate=function(o,s){s===void 0&&(s=!0);var l=typeof o!="function"||!s?function(){return o}:o;return this.each(function(u,d){o&&this.update&&this.update(l.call(this,u,d))})},t.prototype.transition=function(o){var s=this._transitions,l=new Array(this._elements.length);return this.each(function(u,d){l[d]=o.call(this,u,d)}),this._transitions=w1(l),this},t.prototype.on=function(o,s){return this.each(function(){this.addEventListener(o,s)}),this},t.prototype.call=function(o){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return o.call.apply(o,(0,X.ev)([this._parent,this],(0,X.CR)(s),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter(function(o){return!!o})},t.prototype.parent=function(){return this._parent};var e,n,r;return n=t,e=new WeakSet,r=function(s,l){var u=this._elements[0],d=u.querySelector(s);if(d)return new n([d],null,this._parent,this._document);var h=typeof l=="string"?this.createElement(l):l();return u.appendChild(h),new n([h],null,this._parent,this._document)},t.registry={g:V.ZA,rect:V.UL,circle:V.Cd,path:V.y$,text:w0,ellipse:V.Pj,image:V.Ee,line:V.x1,polygon:V.mg,polyline:V.aH,html:V.k9},t}();function Jn(t){return new A0([t],null,t,t.ownerDocument)}function FE(t,e,n){return t.querySelector(e)?Jn(t).select(e):Jn(t).append(n)}var Oo=function(t,e){var n=function(o){return"".concat(e,"-").concat(o)},r=Object.fromEntries(Object.entries(t).map(function(o){var s=(0,X.CR)(o,2),l=s[0],u=s[1],d=n(u);return[l,{name:d,class:".".concat(d),id:"#".concat(d),toString:function(){return d}}]}));return Object.assign(r,{prefix:n}),r},Dr={gridGroup:"grid-group",mainGroup:"main-group",lineGroup:"line-group",tickGroup:"tick-group",labelGroup:"label-group",titleGroup:"title-group",grid:"grid",line:"line",lineFirst:"line-first",lineSecond:"line-second",tick:"tick",tickItem:"tick-item",label:"label",labelItem:"label-item",title:"title"},nn={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new V.y$({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},dt=Je({},nn,{style:{type:"arc"}}),Fd=Je({},nn,{style:{}}),q=Oo({mainGroup:Dr.mainGroup,gridGroup:Dr.gridGroup,grid:Dr.grid,lineGroup:Dr.lineGroup,line:Dr.line,tickGroup:Dr.tickGroup,tick:Dr.tick,tickItem:Dr.tickItem,labelGroup:Dr.labelGroup,label:Dr.label,labelItem:Dr.labelItem,titleGroup:Dr.titleGroup,title:Dr.title,lineFirst:Dr.lineFirst,lineSecond:Dr.lineSecond},"axis"),mo=D(45607);function Xa(t,e){return[t[0]*e,t[1]*e]}function Gu(t,e){return[t[0]+e[0],t[1]+e[1]]}function T0(t,e){return[t[0]-e[0],t[1]-e[1]]}function yo(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function yc(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function xl(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function C0(t){if(t[0]===0&&t[1]===0)return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function T1(t,e,n){var r=__read(t,2),o=r[0],s=r[1],l=__read(e,2),u=l[0],d=l[1],h=o-u,p=s-d,v=Math.sin(n),m=Math.cos(n);return[h*m-p*v+u,h*v+p*m+d]}function C1(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}function Sl(t){return t*Math.PI/180}function BE(t){return Number((t*180/Math.PI).toPrecision(5))}function Bd(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function jE(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function n6(t,e){return"".concat(e).concat(Bd(t))}function M1(t,e,n){var r;n===void 0&&(n=!0);var o=e||((r=t.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",s=t.replace(new RegExp("^(".concat(o,")")),"");return n?jE(s):s}function r6(t,e){Object.entries(e).forEach(function(n){var r=(0,X.CR)(n,2),o=r[0],s=r[1];(0,X.ev)([t],(0,X.CR)(t.querySelectorAll(o)),!1).filter(function(l){return l.matches(o)}).forEach(function(l){if(l){var u=l;u.style.cssText+=Object.entries(s).reduce(function(d,h){return"".concat(d).concat(h.join(":"),";")},"")}})})}var jd=function(t,e){if(!(t!=null&&t.startsWith(e)))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function ir(t,e,n){n===void 0&&(n=!1);var r={};return Object.entries(t).forEach(function(o){var s=(0,X.CR)(o,2),l=s[0],u=s[1];if(!(l==="className"||l==="class")){if(jd(l,"show")&&jd(M1(l,"show"),e)!==n)l===n6(e,"show")?r[l]=u:r[l.replace(new RegExp(Bd(e)),"")]=u;else if(!jd(l,"show")&&jd(l,e)!==n){var d=M1(l,e);d==="filter"&&typeof u=="function"||(r[d]=u)}}}),r}function qa(t,e){return Object.entries(t).reduce(function(n,r){var o=(0,X.CR)(r,2),s=o[0],l=o[1];return s.startsWith("show")?n["show".concat(e).concat(s.slice(4))]=l:n["".concat(e).concat(Bd(s))]=l,n},{})}function Ps(t,e){e===void 0&&(e=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},o={};return Object.entries(t).forEach(function(s){var l=(0,X.CR)(s,2),u=l[0],d=l[1];e.includes(u)||(n.indexOf(u)!==-1?o[u]=d:r[u]=d)}),[r,o]}function Po(t,e){return(0,mo.Z)(t)?t.apply(void 0,(0,X.ev)([],(0,X.CR)(e),!1)):t}function zd(t,e){return t.style.opacity||(t.style.opacity=1),$o(t,{opacity:0},e)}var L1=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function i6(t){return L1.includes(t)}function P1(t){var e={};for(var n in t)i6(n)&&(e[n]=t[n]);return e}var $u=Oo({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function I1(t){return t.reduce(function(e,n,r){return e.push((0,X.ev)([r===0?"M":"L"],(0,X.CR)(n),!1)),e},[])}function o6(t,e,n){var r=e.connect,o=r===void 0?"line":r,s=e.center;if(o==="line")return I1(t);if(!s)return[];var l=xl(t[0],s),u=n?0:1;return t.reduce(function(d,h,p){return p===0?d.push((0,X.ev)(["M"],(0,X.CR)(h),!1)):d.push((0,X.ev)(["A",l,l,0,0,u],(0,X.CR)(h),!1)),d},[])}function M0(t,e,n){return e.type==="surround"?o6(t,e,n):I1(t)}function zE(t,e,n){var r=n.type,o=n.connect,s=n.center,l=n.closed,u=l?[["Z"]]:[],d=(0,X.CR)([M0(t,n),M0(e.slice().reverse(),n,!0)],2),h=d[0],p=d[1],v=(0,X.CR)([t[0],e.slice(-1)[0]],2),m=v[0],b=v[1],_=function(A,M){return[h,A,p,M,u].flat()};if(o==="line"||r==="surround")return _([(0,X.ev)(["L"],(0,X.CR)(b),!1)],[(0,X.ev)(["L"],(0,X.CR)(m),!1)]);if(!s)throw new Error("Arc grid need to specified center");var S=(0,X.CR)([xl(b,s),xl(m,s)],2),O=S[0],E=S[1];return _([(0,X.ev)(["A",O,O,0,0,1],(0,X.CR)(b),!1),(0,X.ev)(["L"],(0,X.CR)(b),!1)],[(0,X.ev)(["A",E,E,0,0,0],(0,X.CR)(m),!1),(0,X.ev)(["L"],(0,X.CR)(m),!1)])}function UE(t,e,n,r){var o=n.animate,s=n.isBillboard,l=e.map(function(u,d){return{id:u.id||"grid-line-".concat(d),d:M0(u.points,n)}});return t.selectAll($u.line.class).data(l,function(u){return u.id}).join(function(u){return u.append("path").each(function(d,h){var p=Po(P1((0,X.pi)({d:d.d},r)),[d,h,l]);this.attr((0,X.pi)({class:$u.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:s},p))})},function(u){return u.transition(function(d,h){var p=Po(P1((0,X.pi)({d:d.d},r)),[d,h,l]);return $o(this,p,o.update)})},function(u){return u.transition(function(){var d=this,h=zd(this,o.exit);return _l(h,function(){return d.remove()}),h})}).transitions()}function Ud(t,e,n){var r=n.animate,o=n.connect,s=n.areaFill;if(e.length<2||!s||!o)return[];for(var l=Array.isArray(s)?s:[s,"transparent"],u=function(_){return l[_%l.length]},d=[],h=0;h<e.length-1;h++){var p=(0,X.CR)([e[h].points,e[h+1].points],2),v=p[0],m=p[1],b=zE(v,m,n);d.push({d:b,fill:u(h)})}return t.selectAll($u.region.class).data(d,function(_,S){return S}).join(function(_){return _.append("path").each(function(S,O){var E=Po(S,[S,O,d]);this.attr(E)}).attr("className",$u.region.name)},function(_){return _.transition(function(S,O){var E=Po(S,[S,O,d]);return $o(this,E,r.update)})},function(_){return _.transition(function(){var S=this,O=zd(this,r.exit);return _l(O,function(){return S.remove()}),O})}).transitions()}function a6(t){var e=t.data,n=e===void 0?[]:e,r=t.closed;return r?n.map(function(o){var s=o.points,l=(0,X.CR)(s,1),u=l[0];return(0,X.pi)((0,X.pi)({},o),{points:(0,X.ev)((0,X.ev)([],(0,X.CR)(s),!1),[u],!1)})}):n}var s6=function(t){(0,X.ZT)(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var o=n.type,s=n.center,l=n.areaFill,u=n.closed,d=(0,X._T)(n,["type","center","areaFill","closed"]),h=a6(n),p=Jn(r).maybeAppendByClassName($u.lineGroup,"g"),v=Jn(r).maybeAppendByClassName($u.regionGroup,"g"),m=UE(p,h,n,d),b=Ud(v,h,n);return(0,X.ev)((0,X.ev)([],(0,X.CR)(m),!1),(0,X.CR)(b),!1)},e}(zi),bc=function(t,e){return function(n){return t*(1-n)+e*n}};function Zd(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0;return function(o){var s=new Array(r),l=new Array(n),u=0;for(u=0;u<r;++u)s[u]=Is(t[u],e[u]);for(;u<n;++u)l[u]=e[u];for(u=0;u<r;++u)l[u]=s[u](o);return l}}function Hd(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={},r={};return Object.entries(e).forEach(function(o){var s=(0,X.CR)(o,2),l=s[0],u=s[1];l in t?n[l]=Is(t[l],u):r[l]=u}),function(o){return Object.entries(n).forEach(function(s){var l=(0,X.CR)(s,2),u=l[0],d=l[1];return r[u]=d(o)}),r}}function Is(t,e){return typeof t=="number"&&typeof e=="number"?bc(t,e):Array.isArray(t)&&Array.isArray(e)?Zd(t,e):typeof t=="object"&&typeof e=="object"?Hd(t,e):function(n){return t}}function Ui(t,e,n,r){if(!r)return t.attr("__keyframe_data__",n),null;var o=r.duration,s=o===void 0?0:o,l=Is(e,n),u=Math.ceil(+s/16),d=new Array(u).fill(0).map(function(h,p,v){return{__keyframe_data__:l(p/(v.length-1))}});return t.animate(d,(0,X.pi)({fill:"both"},r))}function Di(t){return typeof t=="function"?t():(0,ne.Z)(t)||(0,be.Z)(t)?new w0({style:{text:String(t)}}):t}function ks(t,e){return typeof t=="function"?t():(0,ne.Z)(t)||(0,be.Z)(t)?new V.k9({style:(0,X.pi)((0,X.pi)({},e),{innerHTML:String(t)})}):t}function Ka(t,e,n){n===void 0&&(n=!1);var r=t.getBBox(),o=r.width,s=r.height,l=e/Math.max(o,s);return n&&(t.style.transform="scale(".concat(l,")")),l}function Yu(t,e){var n={},r=Array.isArray(e)?e:[e];for(var o in t)r.includes(o)||(n[o]=t[o]);return n}function Yi(t,e){return Object.fromEntries(Object.entries(t).map(function(n){var r=(0,X.CR)(n,2),o=r[0],s=r[1];return[o,Po(s,e)]}))}function Fr(t){if(t.type==="linear"){var e=t.startPos,n=t.endPos;return __spreadArray(__spreadArray([],__read(e),!1),__read(n),!1)}var r=t.startAngle,o=t.endAngle,s=t.center,l=t.radius;return __spreadArray(__spreadArray([r,o],__read(s),!1),[l],!1)}function Rs(t,e){return e&&(0,mo.Z)(e)?t.filter(e):t}function Dn(t,e){var n=e.startAngle,r=e.endAngle;return(r-n)*t+n}function Vd(t,e){if(e.type==="linear"){var n=(0,X.CR)(e.startPos,2),r=n[0],o=n[1],s=(0,X.CR)(e.endPos,2),l=s[0],u=s[1],d=(0,X.CR)([l-r,u-o],2),h=d[0],p=d[1];return C0([h,p])}var v=Sl(Dn(t,e));return[-Math.sin(v),Math.cos(v)]}function L0(t,e,n){var r=Vd(t,n);return C1(r,e!=="positive")}function Ol(t,e){return L0(t,e.labelDirection,e)}function Qa(t,e,n){return n?"".concat(t," ").concat(n,"axis-").concat(e):t}function c6(t,e,n){var r=t.classNamePrefix,o=r===void 0?"":r;return Qa(e.name,n,o)}function Io(t,e,n,r){return r&&t.attr("className",Qa(e.name,n,r)),t}function k1(t,e){var n=(0,X.CR)(e.startPos,2),r=n[0],o=n[1],s=(0,X.CR)(e.endPos,2),l=s[0],u=s[1],d=(0,X.CR)([l-r,u-o],2),h=d[0],p=d[1];return[r+h*t,o+p*t]}function R1(t,e){var n=e.radius,r=(0,X.CR)(e.center,2),o=r[0],s=r[1],l=Sl(Dn(t,e));return[o+n*Math.cos(l),s+n*Math.sin(l)]}function Wd(t,e){return e.type==="linear"?k1(t,e):R1(t,e)}function P0(t){return Vd(0,t)[1]===0}function D1(t){return Vd(0,t)[0]===0}function N1(t,e){return e-t===360}function F1(t,e,n,r,o){var s=e-t,l=(0,X.CR)([o,o],2),u=l[0],d=l[1],h=(0,X.CR)([Sl(t),Sl(e)],2),p=h[0],v=h[1],m=function(it){return[n+o*Math.cos(it),r+o*Math.sin(it)]},b=(0,X.CR)(m(p),2),_=b[0],S=b[1],O=(0,X.CR)(m(v),2),E=O[0],A=O[1];if(N1(t,e)){var M=(v+p)/2,L=(0,X.CR)(m(M),2),I=L[0],R=L[1];return[["M",_,S],["A",u,d,0,1,0,I,R],["A",u,d,0,1,0,E,A]]}var N=s>180?1:0,Z=t>e?0:1,W=!1;return W?"M".concat(n,",").concat(r,",L").concat(_,",").concat(S,",A").concat(u,",").concat(d,",0,").concat(N,",").concat(Z,",").concat(E,",").concat(A,",L").concat(n,",").concat(r):"M".concat(_,",").concat(S,",A").concat(u,",").concat(d,",0,").concat(N,",").concat(Z,",").concat(E,",").concat(A)}function ZE(t){var e=t.attributes,n=e.startAngle,r=e.endAngle,o=e.center,s=e.radius;return(0,X.ev)((0,X.ev)([n,r],(0,X.CR)(o),!1),[s],!1)}function HE(t,e,n,r){var o=e.startAngle,s=e.endAngle,l=e.center,u=e.radius,d=e.classNamePrefix;return t.selectAll(q.line.class).data([{d:F1.apply(void 0,(0,X.ev)((0,X.ev)([o,s],(0,X.CR)(l),!1),[u],!1))}],function(h,p){return p}).join(function(h){var p=h.append("path").attr("className",q.line.name).styles(e).styles({d:function(v){return v.d}});return Io(p,q.line,Dr.line,d),p},function(h){return h.transition(function(){var p=this,v=Ui(this,ZE(this),(0,X.ev)((0,X.ev)([o,s],(0,X.CR)(l),!1),[u],!1),r.update);if(v){var m=function(){var b=Qn(p.attributes,"__keyframe_data__");p.style.d=F1.apply(void 0,(0,X.ev)([],(0,X.CR)(b),!1))};v.onframe=m,v.onfinish=m}return v}).styles(e)},function(h){return h.remove()}).styles(n).transitions()}function B1(t,e){var n=e.truncRange,r=e.truncShape,o=e.lineExtension}function VE(t,e,n){n===void 0&&(n=[0,0]);var r=(0,X.CR)([t,e,n],3),o=(0,X.CR)(r[0],2),s=o[0],l=o[1],u=(0,X.CR)(r[1],2),d=u[0],h=u[1],p=(0,X.CR)(r[2],2),v=p[0],m=p[1],b=(0,X.CR)([d-s,h-l],2),_=b[0],S=b[1],O=Math.sqrt(Math.pow(_,2)+Math.pow(S,2)),E=(0,X.CR)([-v/O,m/O],2),A=E[0],M=E[1];return[A*_,A*S,M*_,M*S]}function I0(t){var e=(0,X.CR)(t,2),n=(0,X.CR)(e[0],2),r=n[0],o=n[1],s=(0,X.CR)(e[1],2),l=s[0],u=s[1];return{x1:r,y1:o,x2:l,y2:u}}function WE(t,e,n,r){var o=e.showTrunc,s=e.startPos,l=e.endPos,u=e.truncRange,d=e.lineExtension,h=e.classNamePrefix,p=(0,X.CR)([s,l],2),v=(0,X.CR)(p[0],2),m=v[0],b=v[1],_=(0,X.CR)(p[1],2),S=_[0],O=_[1],E=(0,X.CR)(d?VE(s,l,d):new Array(4).fill(0),4),A=E[0],M=E[1],L=E[2],I=E[3],R=function(Lt){return t.selectAll(q.line.class).data(Lt,function($t,he){return he}).join(function($t){var he=$t.append("line").styles(n).transition(function(le){return $o(this,I0(le.line),!1)});return he.attr("className",function(le){if(!h)return"".concat(q.line.name," ").concat(le.className);var Ee=Qa(q.line.name,Dr.line,h);if(le.className===q.lineFirst.name){var Ue=Qa(q.lineFirst.name,Dr.lineFirst,h);return"".concat(Ee," ").concat(Ue)}if(le.className===q.lineSecond.name){var Ue=Qa(q.lineSecond.name,Dr.lineSecond,h);return"".concat(Ee," ").concat(Ue)}return Ee}),he},function($t){return $t.styles(n).transition(function(he){var le=he.line;return $o(this,I0(le),r.update)})},function($t){return $t.remove()}).transitions()};if(!o||!u)return R([{line:[[m+A,b+M],[S+L,O+I]],className:q.line.name}]);var N=(0,X.CR)(u,2),Z=N[0],W=N[1],it=S-m,tt=O-b,pt=(0,X.CR)([m+it*Z,b+tt*Z],2),K=pt[0],lt=pt[1],ft=(0,X.CR)([m+it*W,b+tt*W],2),vt=ft[0],It=ft[1],_t=R([{line:[[m+A,b+M],[K,lt]],className:q.lineFirst.name},{line:[[vt,It],[S+L,O+I]],className:q.lineSecond.name}]);return B1(t,e),_t}function l6(t,e,n,r){var o=n.showArrow,s=n.showTrunc,l=n.lineArrow,u=n.lineArrowOffset,d=n.lineArrowSize,h;if(e==="arc"?h=t.select(q.line.class):s?h=t.select(q.lineSecond.class):h=t.select(q.line.class),!o||!l||n.type==="arc"&&N1(n.startAngle,n.endAngle)){var p=h.node();p&&(p.style.markerEnd=void 0);return}var v=Di(l);v.attr(r),Ka(v,d,!0),h.style("markerEnd",v).style("markerEndOffset",-u)}function GE(t,e,n){var r=e.type,o,s=ir(e,"line");return r==="linear"?o=WE(t,e,Yu(s,"arrow"),n):o=HE(t,e,Yu(s,"arrow"),n),l6(t,r,e,s),o}function j1(t,e){return L0(t,e.gridDirection,e)}function k0(t){var e=t.type,n=t.gridCenter;return e==="linear"?n:n||t.center}function $E(t,e){var n=e.gridLength;return t.map(function(r,o){var s=r.value,l=(0,X.CR)(Wd(s,e),2),u=l[0],d=l[1],h=(0,X.CR)(Xa(j1(s,e),n),2),p=h[0],v=h[1];return{id:o,points:[[u,d],[u+p,d+v]]}})}function an(t,e){var n=e.gridControlAngles,r=k0(e);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var o=(0,X.CR)(r,2),s=o[0],l=o[1];return t.map(function(u,d){var h=u.value,p=(0,X.CR)(Wd(h,e),2),v=p[0],m=p[1],b=(0,X.CR)([v-s,m-l],2),_=b[0],S=b[1],O=[];return n.forEach(function(E){var A=Sl(E),M=(0,X.CR)([Math.cos(A),Math.sin(A)],2),L=M[0],I=M[1],R=_*L-S*I+s,N=_*I+S*L+l;O.push([R,N])}),{points:O,id:d}})}function YE(t,e,n,r){var o=n.classNamePrefix,s=ir(n,"grid"),l=s.type,u=s.areaFill,d=k0(n),h=Rs(e,n.gridFilter),p=l==="segment"?$E(h,n):an(h,n),v=(0,X.pi)((0,X.pi)({},s),{center:d,areaFill:(0,mo.Z)(u)?h.map(function(m,b){return Po(u,[m,b,h])}):u,animate:r,data:p});return t.selectAll(q.grid.class).data([1]).join(function(m){var b=m.append(function(){return new s6({style:v})}).attr("className",q.grid.name);return Io(b,q.grid,Dr.grid,o),b},function(m){return m.transition(function(){return this.update(v)})},function(m){return m.remove()}).transitions()}function Xi(t,e,n,r,o){return r===void 0&&(r=!0),o===void 0&&(o=!1),r&&t===e||o&&t===n?!0:t>e&&t<n}var Xu=function(t){var e=new DOMParser,n=e.parseFromString(t,"text/html"),r=n.body.firstElementChild;if(console.log(r==null?void 0:r.getClientRects(),11),!r)return 0;var o=r.getAttribute("style")||"",s=Object.fromEntries(o.split(";").map(function(O){return O.trim()}).filter(function(O){return O.includes(":")}).map(function(O){var E=(0,X.CR)(O.split(":").map(function(L){return L.trim()}),2),A=E[0],M=E[1];return[A.toLowerCase(),M]})),l=function(O){if(!O)return 0;var E=O.match(/([\d.]+)px/);return E?parseFloat(E[1]):0};if(s.height)return l(s.height);var u=l(s["font-size"])||16,d=s["line-height"],h;!d||d==="normal"?h=1.2*u:d.endsWith("px")?h=l(d):/^[\d.]+$/.test(d)?h=parseFloat(d)*u:h=u;var p=l(s["padding-top"]),v=l(s["padding-bottom"]);if(s.padding){var m=s.padding.split(/\s+/).map(l);m.length===1||m.length===2?(p=m[0],v=m[0]):(m.length===3||m.length===4)&&(p=m[0],v=m[2])}var b=l(s["border-top-width"]),_=l(s["border-bottom-width"]);if(s.border){var S=s.border.match(/([\d.]+)px/);S&&(b=parseFloat(S[1]),_=parseFloat(S[1]))}if(s["border-width"]){var m=s["border-width"].split(/\s+/).map(l);m.length===1||m.length===2?(b=m[0],_=m[0]):(m.length===3||m.length===4)&&(b=m[0],_=m[2])}return h+p+v+b+_};function XE(t){var e,n,r,o=t||1;function s(u,d){++e>o&&(r=n,l(1),++e),n[u]=d}function l(u){e=0,n=Object.create(null),u||(r=Object.create(null))}return l(),{clear:l,has:function(u){return n[u]!==void 0||r[u]!==void 0},get:function(u){var d=n[u];if(d!==void 0)return d;if((d=r[u])!==void 0)return s(u,d),d},set:function(u,d){n[u]!==void 0?n[u]=d:s(u,d)}}}var Mr=new Map;function qE(t,e,n){n===void 0&&(n=128);var r=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var l=e?e.apply(this,o):o[0];Mr.has(t)||Mr.set(t,XE(n));var u=Mr.get(t);if(u.has(l))return u.get(l);var d=t.apply(this,o);return u.set(l,d),d};return r}var Gd,R0;function u6(t){R0=t}var z1=qE(function(t,e){var n=e.fontSize,r=e.fontFamily,o=e.fontWeight,s=e.fontStyle,l=e.fontVariant;return R0?R0(t,n):(Gd||(Gd=V.GZ.offscreenCanvasCreator.getOrCreateContext(void 0)),Gd.font=[s,l,o,"".concat(n,"px"),r].join(" "),Gd.measureText(t).width)},function(t,e){return[t,Object.values(e||KE(t)).join()].join("")},4096),KE=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",o=t.style.fontVariant,s=t.style.fontSize;return s=typeof s=="object"?s.value:s,{fontSize:s,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:o}};function U1(t){return t.nodeName==="text"?t:t.nodeName==="g"&&t.children.length===1&&t.children[0].nodeName==="text"?t.children[0]:null}function Z1(t,e){var n=U1(t);n&&n.attr(e)}function D0(t,e,n){n===void 0&&(n="..."),Z1(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}function QE(t,e,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),Z1(t,{wordWrap:!0,wordWrapWidth:e,maxLines:n,textBaseline:r})}function JE(t,e,n){var r=t.getBBox(),o=r.width,s=r.height,l=(0,X.CR)([e,n].map(function(h,p){var v;return h.includes("%")?parseFloat(((v=h.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||v===void 0?void 0:v[0])||"0")/100*(p===0?o:s):h}),2),u=l[0],d=l[1];return[u,d]}function _c(t,e){if(e)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=e.replace(n,function(o,s,l){return"translate(".concat(JE(t,s,l),")")});t.attr("transform",r)}catch(o){}}function Zi(t){if((0,be.Z)(t))return[t,t,t,t];if((0,Sr.Z)(t)){var e=t.length;if(e===1)return[t[0],t[0],t[0],t[0]];if(e===2)return[t[0],t[1],t[0],t[1]];if(e===3)return[t[0],t[1],t[2],t[1]];if(e===4)return t}return[0,0,0,0]}var N0=function(){function t(e,n,r,o){this.set(e,n,r,o)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(e,n,r){var o=this,s=o.x1,l=o.y1,u=o.x2,d=o.y2,h=Math.cos(e),p=Math.sin(e),v=n-n*h+r*p,m=r-n*p-r*h,b=[[h*s-p*d+v,p*s+h*d+m],[h*u-p*d+v,p*u+h*d+m],[h*s-p*l+v,p*s+h*l+m],[h*u-p*l+v,p*u+h*l+m]];return b},t.prototype.set=function(e,n,r,o){return r<e?(this.x2=e,this.x1=r):(this.x1=e,this.x2=r),o<n?(this.y2=n,this.y1=o):(this.y1=n,this.y2=o),this},t.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},t}();function qu(t,e){var n=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getBounds(),o=(0,X.CR)(r.min,2),s=o[0],l=o[1],u=(0,X.CR)(r.max,2),d=u[0],h=u[1],p=t.getBBox(),v=p.width,m=p.height,b=m,_=0,S=0,O=s,E=l,A=U1(t);if(A){b-=1.5;var M=A.style.textAlign,L=A.style.textBaseline;M==="center"?O=(s+d)/2:(M==="right"||M==="end")&&(O=d),L==="middle"?E=(l+h)/2:L==="bottom"&&(E=h)}var I=(0,X.CR)(Zi(e),4),R=I[0],N=R===void 0?0:R,Z=I[1],W=Z===void 0?0:Z,it=I[2],tt=it===void 0?N:it,pt=I[3],K=pt===void 0?W:pt,lt=new N0((_+=s)-K,(S+=l)-N,_+v+W,S+b+tt);return t.setEulerAngles(n),lt.rotatedPoints(Sl(n),O,E)}function El(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function Ku(t,e,n){var r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return r===0?0:r<0?2:1}function tw(t,e){var n=Ku(t[0],t[1],e[0]),r=Ku(t[0],t[1],e[1]),o=Ku(e[0],e[1],t[0]),s=Ku(e[0],e[1],t[1]);return!!(n!==r&&o!==s||n===0&&El(t,e[0])||r===0&&El(t,e[1])||o===0&&El(e,t[0])||s===0&&El(e,t[1]))}function ew(t,e){var n=t.length;if(n<3)return!1;var r=[e,[9999,e[1]]],o=0,s=0;do{var l=[t[s],t[(s+1)%n]];if(tw(l,r)){if(Ku(l[0],e,l[1])===0)return El(l,e);o++}s=(s+1)%n}while(s!==0);return!!(o&1)}function nw(t,e){return e.every(function(n){return ew(t,n)})}function Qu(t,e,n){var r=t.x1,o=t.x2,s=t.y1,l=t.y2,u=[[r,s],[o,s],[o,l],[r,l]],d=qu(e,n);return nw(u,d)}function H1(t,e){var n=(0,X.CR)(t,4),r=n[0],o=n[1],s=n[2],l=n[3],u=(0,X.CR)(e,4),d=u[0],h=u[1],p=u[2],v=u[3],m=s-r,b=l-o,_=p-d,S=v-h,O=m*S-_*b;if(O===0)return!1;var E=O>0,A=r-d,M=o-h,L=m*M-b*A;if(L<0===E)return!1;var I=_*M-S*A;return!(I<0===E||L>O===E||I>O===E)}function V1(t,e){var n=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]];return n.some(function(r){return H1(e,r)})}var f6={lineToLine:H1,intersectBoxLine:V1,getBounds:qu};function rw(t,e,n){var r,o,s=qu(t,n).flat(1),l=qu(e,n).flat(1),u=[[s[0],s[1],s[2],s[3]],[s[0],s[1],s[4],s[5]],[s[4],s[5],s[6],s[7]],[s[2],s[3],s[6],s[7]]];try{for(var d=(0,X.XA)(u),h=d.next();!h.done;h=d.next()){var p=h.value;if(V1(l,p))return!0}}catch(v){r={error:v}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return!1}function iw(t,e){var n=t.type,r=t.labelDirection,o=t.crossSize;if(!o)return!1;if(n==="arc"){var s=t.center,l=t.radius,u=(0,X.CR)(s,2),d=u[0],h=u[1],p=r==="negative"?0:o,v=-l-p,m=l+p,b=(0,X.CR)(Zi(e),4),_=b[0],S=b[1],O=b[2],E=b[3];return new N0(d+v-E,h+v-_,d+m+S,h+m+O)}var A=(0,X.CR)(t.startPos,2),M=A[0],L=A[1],I=(0,X.CR)(t.endPos,2),R=I[0],N=I[1],Z=(0,X.CR)(D1(t)?[-e,0,e,0]:[0,e,0,-e],4),W=Z[0],it=Z[1],tt=Z[2],pt=Z[3],K=Ol(0,t),lt=Xa(K,o),ft=new N0(M,L,R,N);return ft.x1+=pt,ft.y1+=W,ft.x2+=it+lt[0],ft.y2+=tt+lt[1],ft}function Ds(t,e,n){var r,o,s=e.crossPadding,l=new Set,u=null,d=iw(e,s),h=function(_){return d?Qu(d,_):!0},p=function(_,S){return!_||!_.firstChild?!0:!rw(_.firstChild,S.firstChild,Zi(n))};try{for(var v=(0,X.XA)(t),m=v.next();!m.done;m=v.next()){var b=m.value;h(b)?!u||p(u,b)?u=b:(l.add(u),l.add(b)):l.add(b)}}catch(_){r={error:_}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(r)throw r.error}}return Array.from(l)}function F0(t,e){return e===void 0&&(e={}),(0,bn.Z)(t)?0:typeof t=="number"?t:Math.floor(z1(t,e))}function ow(t,e,n,r){if(!(t.length<=0)){var o=e.suffix,s=o===void 0?"...":o,l=e.minLength,u=e.maxLength,d=u===void 0?1/0:u,h=e.step,p=h===void 0?" ":h,v=e.margin,m=v===void 0?[0,0,0,0]:v,b=KE(r.getTextShape(t[0])),_=F0(p,b),S=l?F0(l,b):_,O=F0(d,b);((0,bn.Z)(O)||O===1/0)&&(O=Math.max.apply(null,t.map(function(lt){return lt.getBBox().width})));for(var E=t.slice(),A=(0,X.CR)(m,4),M=A[0],L=M===void 0?0:M,I=A[1],R=I===void 0?0:I,N=A[2],Z=N===void 0?L:N,W=A[3],it=W===void 0?R:W,tt=function(lt){if(E.forEach(function(ft){r.ellipsis(r.getTextShape(ft),lt,s)}),E=Ds(t,n,m),E.length<1)return{value:void 0}},pt=O;pt>S+_;pt-=_){var K=tt(pt);if(typeof K=="object")return K.value}}}var W1=function(t){return t!==void 0&&t!=null&&!Number.isNaN(t)};function d6(t){var e=t&&t.getRenderBounds();if(!e)return{width:0,height:0};var n=e.getMax(),r=e.getMin();return{width:n[0]-r[0],height:n[1]-r[1]}}function ha(t){var e=t.getLocalBounds(),n=e.min,r=e.max,o=(0,X.CR)([n,r],2),s=(0,X.CR)(o[0],2),l=s[0],u=s[1],d=(0,X.CR)(o[1],2),h=d[0],p=d[1];return{x:l,y:u,width:h-l,height:p-u,left:l,bottom:p,top:u,right:h}}function h6(t,e){var n=select(t).append("text").node();return n.attr(__assign(__assign({},e),{visibility:"hidden"})),n}function aw(t,e){var n=(0,X.CR)(t,2),r=n[0],o=n[1],s=(0,X.CR)(e,2),l=s[0],u=s[1];return r!==l&&o===u}function p6(t,e){var n=__read(t,2),r=n[0],o=n[1],s=__read(e,2),l=s[0],u=s[1];return r===l&&o!==u}function sw(t,e){var n,r,o=e.attributes;try{for(var s=(0,X.XA)(Object.entries(o)),l=s.next();!l.done;l=s.next()){var u=(0,X.CR)(l.value,2),d=u[0],h=u[1];d!=="id"&&d!=="className"&&t.attr(d,h)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var cw={parity:function(t,e){var n=e.seq,r=n===void 0?2:n;return t.filter(function(o,s){return s%r?(Ls(o),!1):!0})}},lw=function(t){return t.filter(W1)};function B0(t,e,n,r){var o=t.length,s=e.keepHeader,l=e.keepTail;if(!(o<=1||o===2&&s&&l)){var u=cw.parity,d=function(M){return M.forEach(r.show),M},h=2,p=t.slice(),v=t.slice(),m=Math.min.apply(Math,(0,X.ev)([1],(0,X.CR)(t.map(function(M){return M.getBBox().width})),!1));if(n.type==="linear"&&(P0(n)||D1(n))){var b=ha(t[0]).left,_=ha(t[o-1]).right,S=Math.abs(_-b)||1;h=Math.max(Math.floor(o*m/S),h)}var O,E;for(s&&(O=p.splice(0,1)[0]),l&&(E=p.splice(-1,1)[0],p.reverse()),d(p);h<t.length&&Ds(lw(E?(0,X.ev)((0,X.ev)([E],(0,X.CR)(v),!1),[O],!1):(0,X.ev)([O],(0,X.CR)(v),!1)),n,e==null?void 0:e.margin).length;){if(E&&!O&&h%2===0){var A=p.splice(0,1);A.forEach(r.hide)}else if(E&&O){var A=p.splice(0,1);A.forEach(r.hide)}v=u(d(p),{seq:h}),h++}}}function j0(t,e,n,r){var o,s,l=e.optionalAngles,u=l===void 0?[0,45,90]:l,d=e.margin,h=e.recoverWhenFailed,p=h===void 0?!0:h,v=t.map(function(E){return E.getLocalEulerAngles()}),m=function(){return Ds(t,n,d).length<1},b=function(E){return t.forEach(function(A,M){var L=Array.isArray(E)?E[M]:E;r.rotate(A,+L)})};try{for(var _=(0,X.XA)(u),S=_.next();!S.done;S=_.next()){var O=S.value;if(b(O),m())return}}catch(E){o={error:E}}finally{try{S&&!S.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}p&&b(v)}function z0(t){var e=t.type,n=t.labelDirection;return e==="linear"&&P0(t)?n==="negative"?"bottom":"top":"middle"}function $d(t,e,n,r,o){var s,l=e.maxLines,u=l===void 0?3:l,d=e.recoverWhenFailed,h=d===void 0?!0:d,p=e.margin,v=p===void 0?[0,0,0,0]:p,m=Po((s=e.wordWrapWidth)!==null&&s!==void 0?s:50,[o]),b=t.map(function(M){return M.attr("maxLines")||1}),_=Math.min.apply(Math,(0,X.ev)([],(0,X.CR)(b),!1)),S=function(){return Ds(t,n,v).length<1},O=z0(n),E=function(M){return t.forEach(function(L,I){var R=Array.isArray(M)?M[I]:M;r.wrap(L,m,R,O)})};if(!(_>u)){if(n.type==="linear"&&P0(n)){if(E(u),S())return}else for(var A=_;A<=u;A++)if(E(A),S())return;h&&E(b)}}var Yd=new Map([["hide",B0],["rotate",j0],["ellipsis",ow],["wrap",$d]]);function U0(t,e,n){return e.labelOverlap.length<1?!1:n==="hide"?!IE(t[0]):n==="rotate"?!t.some(function(r){var o;return!!(!((o=r.attr("transform"))===null||o===void 0)&&o.includes("rotate"))}):n==="ellipsis"||n==="wrap"?t.filter(function(r){return r.querySelector("text")}).length>=1:!0}function Z0(t,e,n,r){var o=e.labelOverlap,s=o===void 0?[]:o;s.length&&s.forEach(function(l){var u=l.type,d=Yd.get(u);U0(t,e,u)&&(d==null||d(t,l,e,r,n))})}function Xd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(r){return r==="positive"?-1:1};return t.reduce(function(r,o){return r*n(o)},1)}function wl(t){for(var e=t;e<0;)e+=360;return Math.round(e%360)}function ho(t,e){var n=(0,X.CR)(t,2),r=n[0],o=n[1],s=(0,X.CR)(e,2),l=s[0],u=s[1],d=(0,X.CR)([r*l+o*u,r*u-o*l],2),h=d[0],p=d[1];return Math.atan2(p,h)}function H0(t){var e=(t+360)%180;return Xi(e,-90,90)||(e+=180),e}function V0(t,e,n){var r,o=n.labelAlign,s=(r=e.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(s)return e.getLocalEulerAngles();var l=0,u=Ol(t.value,n),d=Vd(t.value,n);return o==="horizontal"?0:(o==="perpendicular"?l=ho([1,0],u):l=ho([d[0]<0?-1:1,0],d),H0(BE(l)))}function Ja(t,e,n){var r=n.type,o=n.labelAlign,s=Ol(t,n),l=wl(e),u=wl(BE(ho([1,0],s))),d="center",h="middle";return r==="linear"?[90,270].includes(u)&&l===0?(d="center",h=s[1]===1?"top":"bottom"):!(u%180)&&[90,270].includes(l)?d="center":u===0?(Xi(l,0,90,!1,!0)||Xi(l,0,90)||Xi(l,270,360))&&(d="start"):u===90?Xi(l,0,90,!1,!0)?d="start":(Xi(l,90,180)||Xi(l,270,360))&&(d="end"):u===270?Xi(l,0,90,!1,!0)?d="end":(Xi(l,90,180)||Xi(l,270,360))&&(d="start"):u===180&&(l===90?d="start":(Xi(l,0,90)||Xi(l,270,360))&&(d="end")):o==="parallel"?Xi(u,0,180,!0)?h="top":h="bottom":o==="horizontal"?Xi(u,90,270,!1)?d="end":(Xi(u,270,360,!1)||Xi(u,0,90))&&(d="start"):o==="perpendicular"&&(Xi(u,90,270)?d="end":d="start"),{textAlign:d,textBaseline:h}}function uw(t,e,n){e.setLocalEulerAngles(t);var r=e.__data__.value,o=Ja(r,t,n),s=e.querySelector(q.labelItem.class);s&&W0(s,o)}function G1(t,e,n){var r=n.showTick,o=n.tickLength,s=n.tickDirection,l=n.labelDirection,u=n.labelSpacing,d=e.indexOf(t),h=Po(u,[t,d,e]),p=(0,X.CR)([Ol(t.value,n),Xd(l,s)],2),v=p[0],m=p[1],b=m===1?Po(r?o:0,[t,d,e]):0,_=(0,X.CR)(Gu(Xa(v,h+b),Wd(t.value,n)),2),S=_[0],O=_[1];return{x:S,y:O}}function fw(t,e,n,r){var o=r.labelFormatter,s=(0,mo.Z)(o)?function(){return Di(Po(o,[t,e,n,Ol(t.value,r)]))}:function(){return Di(t.label||"")};return s}function $1(t,e,n,r){var o=r.labelRender,s=(Qn(r,"endPos.0",400)-Qn(r,"startPos.0",0))/n.length,l=(0,mo.Z)(o)?Po(o,[t,e,n,Ol(t.value,r)]):t.label||"",u=Xu(l)||30;return function(){return ks(l,{width:s,height:u})}}function W0(t,e){["text","html"].includes(t.nodeName)&&t.attr(e)}function Ju(t,e){Z0(this.node().childNodes,t,e,{hide:Ls,show:Hu,rotate:function(n,r){uw(+r,n,t)},ellipsis:function(n,r,o){n&&D0(n,r||1/0,o)},wrap:function(n,r,o){n&&QE(n,r,o)},getTextShape:function(n){return n.querySelector(q.labelItem.class)}})}function Y1(t,e,n,r,o){var s=n.indexOf(e),l=o.labelRender,u=o.classNamePrefix,d=Jn(t).append(l?$1(e,s,n,o):fw(e,s,n,o)).attr("className",q.labelItem.name).node();Io(Jn(d),q.labelItem,Dr.labelItem,u);var h=(0,X.CR)(Ps(Yi(r,[e,s,n])),2),p=h[0],v=h[1],m=v.transform,b=(0,X._T)(v,["transform"]);_c(d,m);var _=V0(e,d,o);return d.getLocalEulerAngles()||d.setLocalEulerAngles(_),W0(d,(0,X.pi)((0,X.pi)({},Ja(e.value,_,o)),p)),t.attr(b),d}function dw(t,e,n,r,o){var s=n.classNamePrefix,l=Rs(e,n.labelFilter),u=ir(n,"label"),d,h=t.selectAll(q.label.class).data(l,function(p,v){return v}).join(function(p){var v=p.append("g").attr("className",q.label.name).transition(function(m){Y1(this,m,e,u,n);var b=G1(m,e,n),_=b.x,S=b.y;return this.style.transform="translate(".concat(_,", ").concat(S,")"),null});return Io(v,q.label,Dr.label,s),v},function(p){return p.transition(function(v){var m=this.querySelector(q.labelItem.class),b=Y1(this,v,e,u,n),_=Wu(m,b,r.update),S=G1(v,e,n),O=S.x,E=S.y,A=$o(this,{transform:"translate(".concat(O,", ").concat(E,")")},r.update);return(0,X.ev)((0,X.ev)([],(0,X.CR)(_),!1),[A],!1)})},function(p){return d=p,p.transition(function(){var v=this,m=zd(this.childNodes[0],r.exit);return _l(m,function(){return Jn(v).remove()}),m}),d}).transitions();return CE(h,function(){Ju.call(t,n,o)}),h}function X1(t,e){return L0(t,e.tickDirection,e)}function q1(t,e){var n=(0,X.CR)(t,2),r=n[0],o=n[1];return[[0,0],[r*e,o*e]]}function hw(t,e,n,r,o){var s=o.tickLength,l=(0,X.CR)(q1(r,Po(s,[t,e,n])),2),u=(0,X.CR)(l[0],2),d=u[0],h=u[1],p=(0,X.CR)(l[1],2),v=p[0],m=p[1];return{x1:d,x2:v,y1:h,y2:m}}function pw(t,e,n,r,o){var s=o.tickFormatter,l=o.classNamePrefix,u=X1(e.value,o),d="line";(0,mo.Z)(s)&&(d=function(){return Po(s,[e,n,r,u])});var h=t.append(d).attr("className",q.tickItem.name);return Io(h,q.tickItem,Dr.tickItem,l),h}function gw(t,e,n,r,o,s,l){var u=X1(t.value,s),d=hw(t,e,n,u,s),h=d.x1,p=d.x2,v=d.y1,m=d.y2,b=(0,X.CR)(Ps(Yi(l,[t,e,n,u])),2),_=b[0],S=b[1];r.node().nodeName==="line"&&r.styles((0,X.pi)({x1:h,x2:p,y1:v,y2:m},_)),o.attr(S),r.styles(_)}function Ns(t,e,n,r,o,s){var l=pw(Jn(this),t,e,n,r);gw(t,e,n,l,this,r,o);var u=(0,X.CR)(Wd(t.value,r),2),d=u[0],h=u[1];return $o(this,{transform:"translate(".concat(d,", ").concat(h,")")},s)}function G0(t,e,n,r){var o=n.classNamePrefix,s=Rs(e,n.tickFilter),l=ir(n,"tick");return t.selectAll(q.tick.class).data(s,function(u){return u.id||u.label}).join(function(u){var d=u.append("g").attr("className",q.tick.name).transition(function(h,p){return Ns.call(this,h,p,s,n,l,!1)});return Io(d,q.tick,Dr.tick,o),d},function(u){return u.transition(function(d,h){return this.removeChildren(),Ns.call(this,d,h,s,n,l,r.update)})},function(u){return u.transition(function(){var d=this,h=zd(this.childNodes[0],r.exit);return _l(h,function(){return d.remove()}),h})}).transitions()}function xc(t){return/\S+-\S+/g.test(t)?t.split("-").map(function(e){return e[0]}):t.length>2?[t[0]]:t.split("")}function $0(t,e,n){var r=n.titlePosition,o=r===void 0?"lb":r,s=n.titleSpacing,l=xc(o),u=t.node().getLocalBounds(),d=(0,X.CR)(u.min,2),h=d[0],p=d[1],v=(0,X.CR)(u.halfExtents,2),m=v[0],b=v[1],_=(0,X.CR)(e.node().getLocalBounds().halfExtents,2),S=_[0],O=_[1],E=(0,X.CR)([h+m,p+b],2),A=E[0],M=E[1],L=(0,X.CR)(Zi(s),4),I=L[0],R=L[1],N=L[2],Z=L[3];if(["start","end"].includes(o)&&n.type==="linear"){var W=n.startPos,it=n.endPos,tt=(0,X.CR)(o==="start"?[W,it]:[it,W],2),pt=tt[0],K=tt[1],lt=C0([-K[0]+pt[0],-K[1]+pt[1]]),ft=(0,X.CR)(Xa(lt,I),2),vt=ft[0],It=ft[1];return{x:pt[0]+vt,y:pt[1]+It}}return l.includes("t")&&(M-=b+O+I),l.includes("r")&&(A+=m+S+R),l.includes("l")&&(A-=m+S+Z),l.includes("b")&&(M+=b+O+N),{x:A,y:M}}function tf(t,e,n){var r=t.getGeometryBounds().halfExtents,o=r[1]*2;if(e==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(o/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(o/2,")")}return""}function qd(t,e,n,r,o){var s=ir(r,"title"),l=(0,X.CR)(Ps(s),2),u=l[0],d=l[1],h=d.transform,p=d.transformOrigin,v=(0,X._T)(d,["transform","transformOrigin"]);e.styles(v);var m=h||tf(t.node(),u.direction,u.position);t.styles((0,X.pi)((0,X.pi)({},u),{transformOrigin:p})),_c(t.node(),m);var b=$0(Jn(n._offscreen||n.querySelector(q.mainGroup.class)),e,r),_=b.x,S=b.y,O=$o(e.node(),{transform:"translate(".concat(_,", ").concat(S,")")},o);return O}function Y0(t,e,n,r){var o=n.titleText,s=n.classNamePrefix;return t.selectAll(q.title.class).data([{title:o}].filter(function(l){return!!l.title}),function(l,u){return l.title}).join(function(l){var u=l.append(function(){return Di(o)}).attr("className",q.title.name).transition(function(){return qd(Jn(this),t,e,n,r.enter)});return Io(u,q.title,Dr.title,s),u},function(l){return l.transition(function(){return qd(Jn(this),t,e,n,r.update)})},function(l){return l.remove()}).transitions()}function Al(t,e,n,r){var o=t.showLine,s=t.showTick,l=t.showLabel,u=t.classNamePrefix,d=e.maybeAppendByClassName(q.lineGroup,"g");Io(d,q.lineGroup,Dr.lineGroup,u);var h=fo(o,d,function(_){return GE(_,t,r)})||[],p=e.maybeAppendByClassName(q.tickGroup,"g");Io(p,q.tickGroup,Dr.tickGroup,u);var v=fo(s,p,function(_){return G0(_,n,t,r)})||[],m=e.maybeAppendByClassName(q.labelGroup,"g");Io(m,q.labelGroup,Dr.labelGroup,u);var b=fo(l,m,function(_){return dw(_,n,t,r,e.node())})||[];return(0,X.ev)((0,X.ev)((0,X.ev)([],(0,X.CR)(h),!1),(0,X.CR)(v),!1),(0,X.CR)(b),!1).filter(function(_){return!!_})}var ef=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,nn)||this}return e.prototype.render=function(n,r,o){var s=this,l=n.titleText,u=n.data,d=n.animate,h=n.showTitle,p=n.showGrid,v=n.dataThreshold,m=n.truncRange,b=n.classNamePrefix,_=r.className||"axis";b?r.attr("className","".concat(_," ").concat(b,"axis")):r.className||r.attr("className","axis");var S=RE(u,v).filter(function(N){var Z=N.value;return!(m&&Z>m[0]&&Z<m[1])}),O=E0(o===void 0?d:o),E=Jn(r).maybeAppendByClassName(q.gridGroup,"g");Io(E,q.gridGroup,Dr.gridGroup,b);var A=fo(p,E,function(N){return YE(N,S,n,O)})||[],M=Jn(r).maybeAppendByClassName(q.mainGroup,"g");Io(M,q.mainGroup,Dr.mainGroup,b),l&&(!this.initialized&&O.enter||this.initialized&&O.update)&&Al(n,Jn(this.offscreenGroup),S,E0(!1));var L=Al(n,Jn(M.node()),S,O),I=Jn(r).maybeAppendByClassName(q.titleGroup,"g");Io(I,q.titleGroup,Dr.titleGroup,b);var R=fo(h,I,function(N){return Y0(N,s,n,O)})||[];return(0,X.ev)((0,X.ev)((0,X.ev)([],(0,X.CR)(A),!1),(0,X.CR)(L),!1),(0,X.CR)(R),!1).flat().filter(function(N){return!!N})},e}(zi);function io(t){if(Ms(t)){var e=t;return e[e.length-1]}}var ko=function(t){return t};function Ro(t,e){return e-t?n=>(n-t)/(e-t):n=>.5}function Fs(t,...e){return e.reduce((n,r)=>o=>n(r(o)),t)}function nf(t,e,n,r,o){let s=n||0,l=r||t.length;const u=o||(d=>d);for(;s<l;){const d=Math.floor((s+l)/2);u(t[d])>e?l=d:s=d+1}return s}var vw=D(19818),mw=D.n(vw);function rf(t,e,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function K1(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100,o=t[3];if(n===0)return[r*255,r*255,r*255,o];const s=r<.5?r*(1+n):r+n-r*n,l=2*r-s,u=rf(l,s,e+1/3),d=rf(l,s,e),h=rf(l,s,e-1/3);return[u*255,d*255,h*255,o]}function yw(t){const e=mw().get(t);if(!e)return null;const{model:n,value:r}=e;return n==="rgb"?r:n==="hsl"?K1(r):null}const Sc=(t,e)=>n=>t*(1-n)+e*n,bw=(t,e)=>{const n=yw(t),r=yw(e);return n===null||r===null?n?()=>t:()=>e:o=>{const s=new Array(4);for(let p=0;p<4;p+=1){const v=n[p],m=r[p];s[p]=v*(1-o)+m*o}const[l,u,d,h]=s;return`rgba(${Math.round(l)}, ${Math.round(u)}, ${Math.round(d)}, ${h})`}},of=(t,e)=>typeof t=="number"&&typeof e=="number"?Sc(t,e):typeof t=="string"&&typeof e=="string"?bw(t,e):()=>t,_w=(t,e)=>{const n=Sc(t,e);return r=>Math.round(n(r))};var Tl=D(71154);function Q1(t){return t===null}function Kd(t){return!(0,Tl.Z)(t)&&!Q1(t)&&!Number.isNaN(t)}const X0=(t,e,n=5)=>{const r=[t,e];let o=0,s=r.length-1,l=r[o],u=r[s],d;return u<l&&([l,u]=[u,l],[o,s]=[s,o]),d=Lu(l,u,n),d>0?(l=Math.floor(l/d)*d,u=Math.ceil(u/d)*d,d=Lu(l,u,n)):d<0&&(l=Math.ceil(l*d)/d,u=Math.floor(u*d)/d,d=Lu(l,u,n)),d>0?(r[o]=Math.floor(l/d)*d,r[s]=Math.ceil(u/d)*d):d<0&&(r[o]=Math.ceil(l*d)/d,r[s]=Math.floor(u*d)/d),r};function J1(t,e){const n=e<t?e:t,r=t>e?t:e;return o=>Math.min(Math.max(n,o),r)}const xw=(t,e,n)=>{const[r,o]=t,[s,l]=e;let u,d;return r<o?(u=Ro(r,o),d=n(s,l)):(u=Ro(o,r),d=n(l,s)),Fs(d,u)},Sw=(t,e,n)=>{const r=Math.min(t.length,e.length)-1,o=new Array(r),s=new Array(r),l=t[0]>t[r],u=l?[...t].reverse():t,d=l?[...e].reverse():e;for(let h=0;h<r;h+=1)o[h]=Ro(u[h],u[h+1]),s[h]=n(d[h],d[h+1]);return h=>{const p=nf(t,h,1,r)-1,v=o[p],m=s[p];return Fs(m,v)(h)}},tb=(t,e,n,r)=>(Math.min(t.length,e.length)>2?Sw:xw)(t,e,r?_w:n);class Qd extends gl{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Sc,tickCount:5}}map(e){return Kd(e)?this.output(e):this.options.unknown}invert(e){return Kd(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice||(0,Sr.Z)(this.options.breaks))return;const[e,n,r,...o]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,n,r,...o)}getTicks(){const{tickMethod:e}=this.options,[n,r,o,...s]=this.getTickMethodOptions();return e(n,r,o,...s)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],o=e[e.length-1];return[r,o,n]}chooseNice(){return X0}rescale(){this.nice();const[e,n]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,n,this.chooseClamp(n))}chooseClamp(e){const{clamp:n,range:r}=this.options,o=this.options.domain.map(e),s=Math.min(o.length,r.length);return n?J1(o[0],o[s-1]):ko}composeOutput(e,n){const{domain:r,range:o,round:s,interpolate:l}=this.options,u=tb(r.map(e),o,l,s);this.output=Fs(u,n,e)}composeInput(e,n,r){const{domain:o,range:s}=this.options,l=tb(s,o.map(e),Sc);this.input=Fs(n,r,l)}}class pa extends Qd{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:of,tickMethod:ws,tickCount:5}}removeUnsortedValues(e,n,r){let o=-1/0;return n.reduce((l,u,d)=>{if(d===0)return l;const h=o>0?o:u;return o>0&&(r?u>o:u<o)?l.push(d):(h-n[d-1])*(r?-1:1)<0?(o<0&&(o=n[d-1]),l.push(d)):o=-1/0,l},[]).slice().reverse().forEach(l=>{e.splice(l,1),n.splice(l,1)}),{breaksDomain:e,breaksRange:n}}transformDomain(e){const n=[.2,.8],r=.03,{domain:o=[],range:s=[1,0],breaks:l=[],tickCount:u=5,nice:d}=e,[h,p]=[Math.min(...o),Math.max(...o)];let v=h,m=p;if(d&&l.length<2){const W=this.chooseNice()(h,p,u);v=W[0],m=W[W.length-1]}const b=Math.min(v,h);let _=Math.max(m,p);const S=l.filter(({end:W})=>W<_).sort((W,it)=>W.start-it.start),O=ws(b,_,u,S);if(io(O)<_){const W=X0(0,_-io(O),3);O.push(io(O)+io(W)),_=io(O)}const[E,A]=[s[0],io(s)],M=_-b,L=Math.abs(A-E),I=E>A,R=O.map(W=>{const it=(W-b)/M;return I?E-it*L:E+it*L}),[N,Z]=n;return S.forEach(({start:W,end:it,gap:tt=r,compress:pt="middle"})=>{const K=O.indexOf(W),lt=O.indexOf(it);let ft=(R[K]+R[lt])/2;pt==="start"&&(ft=R[K]),pt==="end"&&(ft=R[lt]);const vt=tt*L/2;let It=I?ft+vt:ft-vt,_t=I?ft-vt:ft+vt;It<N&&(_t+=N-It,It=N),_t>Z&&(It-=_t-Z,_t=Z),It>Z&&(_t-=It-Z,It=Z),_t<N&&(It+=N-_t,_t=N),R[K]=It,R[lt]=_t}),this.removeUnsortedValues(O,R,I)}transformBreaks(e){const{domain:n,breaks:r=[]}=e;if(!(0,Sr.Z)(e.breaks))return e;const o=Math.max(...n),s=r.filter(({end:h})=>h<o),l=rO(Cp({},e),{breaks:s}),{breaksDomain:u,breaksRange:d}=this.transformDomain(l);return rO(Cp({},e),{domain:u,range:d,breaks:s,tickMethod:()=>[...u]})}chooseTransforms(){return[ko,ko]}clone(){return new pa(this.options)}}function eb(t,e){if(t){var n;if((0,Sr.Z)(t))for(var r=0,o=t.length;r<o&&(n=e(t[r],r),n!==!1);r++);else if((0,yl.Z)(t)){for(var s in t)if(t.hasOwnProperty(s)&&(n=e(t[s],s),n===!1))break}}}var q0=eb,nb=function(t,e,n){if(!(0,Sr.Z)(t)&&!Aa(t))return t;var r=n;return q0(t,function(o,s){r=e(r,o,s)}),r},rb=nb,Jd=function(t,e){return rb(t,function(n,r,o){return e.includes(o)||(n[o]=r),n},{})};function ts(t,e){let n,r;if(e===void 0)for(const o of t)o!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)));else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}var Xr=function(){function t(e,n,r,o){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),o===void 0&&(o=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=n,this.width=r,this.height=o}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom},t}();function Ow(t){var e=t.getRenderBounds(),n=__read(e.min,2),r=n[0],o=n[1],s=__read(e.max,2),l=s[0],u=s[1],d=l-r,h=u-o;return new Xr(r,o,d,h)}function ib(t){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,s=0;s<t.length;s++){var l=t[s],u=l.x,d=l.y,h=l.width,p=l.height,v=(0,X.CR)([u+h,d+p],2),m=v[0],b=v[1];u<e&&(e=u),d<n&&(n=d),m>r&&(r=m),b>o&&(o=b)}return new Xr(e,n,r-e,o-n)}var Ew=function(t,e,n){var r=t.width,o=t.height,s=n.flexDirection,l=s===void 0?"row":s,u=n.flexWrap,d=u===void 0?"nowrap":u,h=n.justifyContent,p=h===void 0?"flex-start":h,v=n.alignContent,m=v===void 0?"flex-start":v,b=n.alignItems,_=b===void 0?"flex-start":b,S=l==="row",O=l==="row"||l==="column",E=S?O?[1,0]:[-1,0]:O?[0,1]:[0,-1],A=(0,X.CR)([0,0],2),M=A[0],L=A[1],I=e.map(function(K){var lt,ft=K.width,vt=K.height,It=(0,X.CR)([M,L],2),_t=It[0],Lt=It[1];return lt=(0,X.CR)([M+ft*E[0],L+vt*E[1]],2),M=lt[0],L=lt[1],new Xr(_t,Lt,ft,vt)}),R=ib(I),N={"flex-start":0,"flex-end":S?r-R.width:o-R.height,center:S?(r-R.width)/2:(o-R.height)/2},Z=I.map(function(K){var lt=K.x,ft=K.y,vt=Xr.fromRect(K);return vt.x=S?lt+N[p]:lt,vt.y=S?ft:ft+N[p],vt}),W=ib(Z),it=function(K){var lt=(0,X.CR)(S?["height",o]:["width",r],2),ft=lt[0],vt=lt[1];switch(_){case"flex-start":return 0;case"flex-end":return vt-K[ft];case"center":return vt/2-K[ft]/2;default:return 0}},tt=Z.map(function(K){var lt=K.x,ft=K.y,vt=Xr.fromRect(K);return vt.x=S?lt:lt+it(vt),vt.y=S?ft+it(vt):ft,vt}),pt=tt.map(function(K){var lt,ft,vt=Xr.fromRect(K);return vt.x+=(lt=t.x)!==null&&lt!==void 0?lt:0,vt.y+=(ft=t.y)!==null&&ft!==void 0?ft:0,vt});return pt},ww=function(t,e,n){return[]},Aw=function(t,e,n){if(e.length===0)return[];var r={flex:Ew,grid:ww},o=n.display in r?r[n.display]:null;return(o==null?void 0:o.call(null,t,e,n))||[]},K0=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n)||this;r.layoutEvents=[V.Dk.BOUNDS_CHANGED,V.Dk.INSERTED,V.Dk.REMOVED],r.$margin=Zi(0),r.$padding=Zi(0);var o=n.style||{},s=o.margin,l=s===void 0?0:s,u=o.padding,d=u===void 0?0:u;return r.margin=l,r.padding=d,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(e.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=Zi(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=Zi(n)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.x,o=r===void 0?0:r,s=n.y,l=s===void 0?0:s,u=n.width,d=n.height,h=(0,X.CR)(this.$margin,4),p=h[0],v=h[1],m=h[2],b=h[3];return new Xr(o-b,l-p,u+b+v,d+p+m)},e.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,t.prototype.appendChild.call(this,n,r),n},e.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,o=n.height,s=(0,X.CR)(this.$padding,4),l=s[0],u=s[1],d=s[2],h=s[3],p=(0,X.CR)(this.$margin,4),v=p[0],m=p[3];return new Xr(h+m,l+v,r-h-u,o-l-d)},e.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(l){return!l.isConnected}))try{var n=this.attributes,r=n.x,o=n.y;this.style.transform="translate(".concat(r,", ").concat(o,")");var s=Aw(this.getAvailableSpace(),this.children.map(function(l){return l.getBBox()}),this.attributes);this.children.forEach(function(l,u){var d=s[u],h=d.x,p=d.y;l.style.transform="translate(".concat(h,", ").concat(p,")")})}catch(l){}},e.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(o){o.target&&(o.target.isMutationObserved=!0,n.layout())})})},e.prototype.attributeChangedCallback=function(n,r,o){n==="margin"?this.margin=o:n==="padding"&&(this.padding=o),this.layout()},e}(V.ZA),Tw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Cw(t){return class extends V.b_{constructor(e){super(e),this.descriptor=t}connectedCallback(){var e,n;(n=(e=this.descriptor).render)===null||n===void 0||n.call(e,this.attributes,this)}update(e={}){var n,r;this.attr(Je({},this.attributes,e)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function ob(t,e,n){return t.querySelector(e)?Xn(t).select(e):Xn(t).append(n)}function th(t){return Array.isArray(t)?t.join(", "):`${t||""}`}function ab(t,e){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:o,alignItems:s}=n;const l={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return t in l&&([r,o,s]=l[t]),Object.assign({display:"flex",flexDirection:r,justifyContent:o,alignItems:s},e)}class sb extends K0{get child(){var e;return(e=this.children)===null||e===void 0?void 0:e[0]}update(e){var n;this.attr(e);const{subOptions:r}=e;(n=this.child)===null||n===void 0||n.update(r)}}class Mw extends sb{update(e){var n;const{subOptions:r}=e;this.attr(e),(n=this.child)===null||n===void 0||n.update(r)}}function Yo(t,e){var n;return(n=t.filter(r=>r.getOptions().name===e))===null||n===void 0?void 0:n[0]}function Lw(t){return t==="horizontal"||t===0}function Pw(t){return t==="vertical"||t===-Math.PI/2}function cb(t,e,n){const{bbox:r}=t,{position:o="top",size:s,length:l}=e,u=["top","bottom","center"].includes(o),[d,h]=u?[r.height,r.width]:[r.width,r.height],{defaultSize:p,defaultLength:v}=n.props,m=s||p||d,b=l||v||h,_=u?"horizontal":"vertical",[S,O]=u?[b,m]:[m,b];return{orientation:_,width:S,height:O,size:m,length:b}}function Iw(t){return t.find(e=>e.getOptions().domain.length>0).getOptions().domain}function eh(t){const e=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=t,r=Tw(t,["style"]),o={};return Object.entries(r).forEach(([s,l])=>{e.includes(s)?o[`show${Ts(s)}`]=l:o[s]=l}),Object.assign(Object.assign({},o),n)}var lb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function ub(t,e){const{eulerAngles:n,origin:r}=e;r&&t.setOrigin(r),n&&t.rotate(n[0],n[1],n[2])}function fb(t){const{innerWidth:e,innerHeight:n,depth:r}=t.getOptions();return[e,n,r]}function kw(t,e){const{width:n,height:r}=e.getOptions();return o=>{if(!b0(e))return o;const s=t==="bottom"?[o,1]:[0,o],l=e.map(s);if(t==="bottom"){const u=l[0];return new pa({domain:[0,n],range:[0,1]}).map(u)}else if(t==="left"){const u=l[1];return new pa({domain:[0,r],range:[0,1]}).map(u)}return o}}function Rw(t,e,n){if(t.getTicks)return t.getTicks();if(!n)return e;const[r,o]=ts(e,l=>+l),{tickCount:s}=t.getOptions();return n(r,o,s)}function Dw(t,e){if(Rr(e))return b=>b;const n=e.getOptions(),{innerWidth:r,innerHeight:o,insetTop:s,insetBottom:l,insetLeft:u,insetRight:d}=n,[h,p,v]=t==="left"||t==="right"?[s,l,o]:[u,d,r],m=new pa({domain:[0,1],range:[h/v,1-p/v]});return b=>m.map(b)}function db(t,e,n,r,o,s,l,u){var d;(n!==void 0||s!==void 0)&&t.update(Object.assign(Object.assign({},n&&{tickCount:n}),s&&{tickMethod:s}));const h=Rw(t,e,s),p=o?h.filter(o):h,v=E=>E instanceof Date?String(E):typeof E=="object"&&E?E:String(E),m=r||((d=t.getFormatter)===null||d===void 0?void 0:d.call(t))||v,b=Dw(l,u),_=kw(l,u),S=E=>["top","bottom","center","outer"].includes(E),O=E=>["left","right"].includes(E);return Rr(u)||Yr(u)?p.map((E,A,M)=>{var L,I;const R=((L=t.getBandWidth)===null||L===void 0?void 0:L.call(t,E))/2||0,N=b(t.map(E)+R);return{value:zu(u)&&l==="center"||Yr(u)&&((I=t.getTicks)===null||I===void 0?void 0:I.call(t))&&S(l)||Yr(u)&&O(l)?1-N:N,label:v(m(Dd(E),A,M)),id:String(A)}}):p.map((E,A,M)=>{var L;const I=((L=t.getBandWidth)===null||L===void 0?void 0:L.call(t,E))/2||0,R=_(b(t.map(E)+I));return{value:O(l)?1-R:R,label:v(m(Dd(E),A,M)),id:String(A)}})}function Nw(t,e,n="xy"){const[r,o,s]=fb(e);return n==="xy"?t.includes("bottom")||t.includes("top")?o:r:n==="xz"?t.includes("bottom")||t.includes("top")?s:r:t.includes("bottom")||t.includes("top")?o:s}function Fw(t=[],e){if(t.length>0)return t;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:o,labelAutoWrap:s}=e,l=[],u=(d,h)=>{h&&l.push(Object.assign(Object.assign({},d),h))};return u({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),u({type:"ellipsis",minLength:20},o),u({type:"hide"},r),u({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},s),l}function Bw(t,e,n,r,o){const{x:s,y:l,width:u,height:d}=e,h=[s+u/2,l+d/2],p=Math.min(u,d)/2,[v,m]=x0(o),[b,_]=fb(o),S=Math.min(b,_)/2,O={center:h,radius:p,startAngle:v,endAngle:m,gridLength:(r-n)*S};if(t==="inner"){const{insetLeft:E,insetTop:A}=o.getOptions();return Object.assign(Object.assign({},O),{center:[h[0]-E,h[1]-A],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},O),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function jw(t,e,n){return _0(e)||Uu(e)?!1:t===void 0?!!n.getTicks:t}function zw(t){const{depth:e}=t.getOptions();return e?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function Uw(t,e,n,r,o){const{x:s,y:l,width:u,height:d}=n;if(t==="bottom")return{startPos:[s,l],endPos:[s+u,l]};if(t==="left")return{startPos:[s+u,l+d],endPos:[s+u,l]};if(t==="right")return{startPos:[s,l+d],endPos:[s,l]};if(t==="top")return{startPos:[s,l+d],endPos:[s+u,l+d]};if(t==="center"){if(e==="vertical")return{startPos:[s,l],endPos:[s,l+d]};if(e==="horizontal")return{startPos:[s,l],endPos:[s+u,l]};if(typeof e=="number"){const[h,p]=r.getCenter(),[v,m]=Zu(r),[b,_]=x0(r),S=Math.min(u,d)/2,{insetLeft:O,insetTop:E}=r.getOptions(),A=v*S,M=m*S,[L,I]=[h+s-O,p+l-E],[R,N]=[Math.cos(e),Math.sin(e)],Z=[L+M*R,I+M*N],W=[L+A*R,I+A*N],it=()=>{const{domain:pt}=o.getOptions();return pt.length},tt=Rr(r)&&o?it():3;return{startPos:Z,endPos:W,gridClosed:Math.abs(_-b-360)<1e-6,gridCenter:[L,I],gridControlAngles:new Array(tt).fill(0).map((pt,K,lt)=>(_-b)/tt*K)}}}return{}}const Zw=t=>{const{order:e,size:n,position:r,orientation:o,labelFormatter:s,tickFilter:l,tickCount:u,tickMethod:d,tickLength:h,important:p={},style:v={},indexBBox:m,title:b,grid:_=!1}=t,S=lb(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","tickLength","important","style","indexBBox","title","grid"]);return({scales:[O],value:E,coordinate:A,theme:M})=>{const{bbox:L}=E,{domain:I}=O.getOptions(),R=db(O,I,u,s,l,d,r,A),N=m?R.map((lt,ft)=>{const vt=m.get(ft);return!vt||vt[0]!==lt.label?lt:Object.assign(Object.assign({},lt),{bbox:vt[1]})}):R,[Z,W]=Zu(A),it=Bw(r,L,Z,W,A),{axis:tt,axisArc:pt={}}=M,K=eh(Je({},tt,pt,it,Object.assign(Object.assign(Object.assign({type:"arc",data:N,titleText:th(b),grid:_},h!==void 0?{tickLength:h}:null),S),p)));return new ef({style:Jd(K,["transform"])})}};function Hw(t,e,n,r,o,s){const l=n.axis,u=["top","right","bottom","left"].includes(o)?n[`axis${Td(o)}`]:n.axisLinear,d=t.getOptions().name,h=n[`axis${Ts(d)}`]||{};return Object.assign({},l,u,h)}function Vw(t,e,n,r,o,s){const l=Hw(t,e,n,r,o,s);return o==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},l),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:Pw(s)?10:0,tick:r==="center"?!1:void 0}):l}const Ww=t=>{const{direction:e="left",important:n={},labelFormatter:r,order:o,orientation:s,actualPosition:l,position:u,size:d,style:h={},title:p,tickCount:v,tickFilter:m,tickMethod:b,tickLength:_,transform:S,indexBBox:O}=t,E=lb(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","tickLength","transform","indexBBox"]);return({scales:A,value:M,coordinate:L,theme:I})=>{const{bbox:R}=M,[N]=A,{domain:Z,xScale:W}=N.getOptions(),it=Vw(N,L,I,e,u,s),tt=Object.assign(Object.assign(Object.assign({},it),h),E),pt=Nw(l||u,L,t.plane),K=Uw(u,s,R,L,W),lt=zw(L),ft=db(N,Z,v,r,m,b,u,L),vt=O?ft.map((Lt,$t)=>{const he=O.get($t);return!he||he[0]!==Lt.label?Lt:Object.assign(Object.assign({},Lt),{bbox:he[1]})}):ft,It=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},tt),{type:"linear",data:vt,crossSize:d,titleText:th(p),labelOverlap:Fw(S,tt),grid:jw(tt.grid,L,N),gridLength:pt,line:!0,indexBBox:O}),_!==void 0?{tickLength:_}:null),tt.line?null:{lineOpacity:0}),K),lt),n);return It.labelOverlap.find(Lt=>Lt.type==="hide")&&(It.crossSize=!1),new ef({className:"axis",style:eh(It)})}},hb=t=>e=>{const{labelFormatter:n,labelFilter:r=()=>!0}=e;return o=>{var s;const{scales:[l]}=o,u=((s=l.getTicks)===null||s===void 0?void 0:s.call(l))||l.getOptions().domain,d=typeof n=="string"?Cs(n):n,h=(v,m,b)=>r(u[m],m,u),p=Object.assign(Object.assign({},e),{labelFormatter:d,labelFilter:h,scale:l});return t(p)(o)}},Bs=hb(Ww),pb=hb(Zw);Bs.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},pb.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var Gw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function $w(t){const e=t%(Math.PI*2);return e===Math.PI/2?{titleTransform:"translate(0, 50%)"}:e>-Math.PI/2&&e<Math.PI/2?{titleTransform:"translate(50%, 0)"}:e>Math.PI/2&&e<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function gb(t,e,n,r){const{radar:o}=t,[s]=r,l=s.getOptions().name,[u,d]=x0(n),{axisRadar:h={}}=e;return Object.assign(Object.assign({},h),{grid:l==="position",gridConnect:"line",gridControlAngles:new Array(o.count).fill(0).map((p,v)=>(d-u)/o.count*v)})}const vb=t=>{const{important:e={}}=t,n=Gw(t,["important"]);return r=>{const{theme:o,coordinate:s,scales:l}=r;return Bs(Object.assign(Object.assign(Object.assign({},n),$w(t.orientation)),{important:Object.assign(Object.assign({},gb(t,o,s,l)),e)}))(r)}};vb.props=Object.assign(Object.assign({},Bs.props),{defaultPosition:"center"});class mb{constructor(e){this.options=Je({},this.getDefaultOptions()),this.update(e)}getOptions(){return this.options}update(e={}){this.options=Je({},this.options,e),this.rescale(e)}rescale(e){}}function Oc(t,e){return e-t?n=>(n-t)/(e-t):n=>.5}function Ec(t,...e){return e.reduce((n,r)=>o=>n(r(o)),t)}function oo(t,e,n,r,o){let s=n||0,l=r||t.length;const u=o||(d=>d);for(;s<l;){const d=Math.floor((s+l)/2);u(t[d])>e?l=d:s=d+1}return s}function nh(t,e,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Yw(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100,o=t[3];if(n===0)return[r*255,r*255,r*255,o];const s=r<.5?r*(1+n):r+n-r*n,l=2*r-s,u=nh(l,s,e+1/3),d=nh(l,s,e),h=nh(l,s,e-1/3);return[u*255,d*255,h*255,o]}function yb(t){const e=mw().get(t);if(!e)return null;const{model:n,value:r}=e;return n==="rgb"?r:n==="hsl"?Yw(r):null}const rh=(t,e)=>n=>t*(1-n)+e*n,Xw=(t,e)=>{const n=yb(t),r=yb(e);return n===null||r===null?n?()=>t:()=>e:o=>{const s=new Array(4);for(let p=0;p<4;p+=1){const v=n[p],m=r[p];s[p]=v*(1-o)+m*o}const[l,u,d,h]=s;return`rgba(${Math.round(l)}, ${Math.round(u)}, ${Math.round(d)}, ${h})`}},bb=(t,e)=>typeof t=="number"&&typeof e=="number"?rh(t,e):typeof t=="string"&&typeof e=="string"?Xw(t,e):()=>t,qw=(t,e)=>{const n=rh(t,e);return r=>Math.round(n(r))};function _b(t){return!(0,Tl.Z)(t)&&!Q1(t)&&!Number.isNaN(t)}const Q0=Math.sqrt(50),ih=Math.sqrt(10),J0=Math.sqrt(2);function oh(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),s=r/bi(10,o);return o>=0?(s>=Q0?10:s>=ih?5:s>=J0?2:1)*bi(10,o):-bi(10,-o)/(s>=Q0?10:s>=ih?5:s>=J0?2:1)}function Kw(t,e,n){const r=Math.abs(e-t)/Math.max(0,n);let o=bi(10,Math.floor(Math.log(r)/Math.LN10));const s=r/o;return s>=Q0?o*=10:s>=ih?o*=5:s>=J0&&(o*=2),e<t?-o:o}const xb=(t,e,n=5)=>{const r=[t,e];let o=0,s=r.length-1,l=r[o],u=r[s],d;return u<l&&([l,u]=[u,l],[o,s]=[s,o]),d=oh(l,u,n),d>0?(l=Math.floor(l/d)*d,u=Math.ceil(u/d)*d,d=oh(l,u,n)):d<0&&(l=Math.ceil(l*d)/d,u=Math.floor(u*d)/d,d=oh(l,u,n)),d>0?(r[o]=Math.floor(l/d)*d,r[s]=Math.ceil(u/d)*d):d<0&&(r[o]=Math.ceil(l*d)/d,r[s]=Math.floor(u*d)/d),r};function Sb(t,e){const n=e<t?e:t,r=t>e?t:e;return o=>Math.min(Math.max(n,o),r)}const Ob=(t,e,n)=>{const[r,o]=t,[s,l]=e;let u,d;return r<o?(u=Oc(r,o),d=n(s,l)):(u=Oc(o,r),d=n(l,s)),Ec(d,u)},Qw=(t,e,n)=>{const r=Math.min(t.length,e.length)-1,o=new Array(r),s=new Array(r),l=t[0]>t[r],u=l?[...t].reverse():t,d=l?[...e].reverse():e;for(let h=0;h<r;h+=1)o[h]=Oc(u[h],u[h+1]),s[h]=n(d[h],d[h+1]);return h=>{const p=oo(t,h,1,r)-1,v=o[p],m=s[p];return Ec(m,v)(h)}},Eb=(t,e,n,r)=>(Math.min(t.length,e.length)>2?Qw:Ob)(t,e,r?qw:n);class Jw extends mb{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:rh,tickCount:5}}map(e){return _b(e)?this.output(e):this.options.unknown}invert(e){return _b(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice)return;const[e,n,r,...o]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,n,r,...o)}getTicks(){const{tickMethod:e}=this.options,[n,r,o,...s]=this.getTickMethodOptions();return e(n,r,o,...s)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],o=e[e.length-1];return[r,o,n]}chooseNice(){return xb}rescale(){this.nice();const[e,n]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,n,this.chooseClamp(n))}chooseClamp(e){const{clamp:n,range:r}=this.options,o=this.options.domain.map(e),s=Math.min(o.length,r.length);return n?Sb(o[0],o[s-1]):ko}composeOutput(e,n){const{domain:r,range:o,round:s,interpolate:l}=this.options,u=Eb(r.map(e),o,l,s);this.output=Ec(u,n,e)}composeInput(e,n,r){const{domain:o,range:s}=this.options,l=Eb(s,o.map(e),rh);this.input=Ec(n,r,l)}}const tA=(t,e,n)=>{let r,o,s=t,l=e;if(s===l&&n>0)return[s];let u=oh(s,l,n);if(u===0||!Number.isFinite(u))return[];if(u>0){s=Math.ceil(s/u),l=Math.floor(l/u),o=new Array(r=Math.ceil(l-s+1));for(let d=0;d<r;d+=1)o[d]=(s+d)*u}else{u=-u,s=Math.ceil(s*u),l=Math.floor(l*u),o=new Array(r=Math.ceil(l-s+1));for(let d=0;d<r;d+=1)o[d]=(s+d)/u}return o};class wc extends Jw{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:bb,tickMethod:tA,tickCount:5}}chooseTransforms(){return[ko,ko]}clone(){return new wc(this.options)}}function af(t,e){return+t.toPrecision(e)}function g6(t){return t.toLocaleString()}function v6(t){return t.toExponential()}function eA(t,e){return e===void 0&&(e=0),Math.abs(t)<1e3?String(t):"".concat(af(t/1e3,e).toLocaleString(),"K")}var tg=function(t,e,n){return t<0&&Number.isFinite(t)?e:n},nA=function(t,e,n){return t>0&&Number.isFinite(t)?e:n},rA=function(t,e){return t*e},m6=function(t,e){return t/2+(e||0)/2};function sf(t){var e=t.canvas,n=t.touches,r=t.offsetX,o=t.offsetY;if(e){var s=e.x,l=e.y;return[s,l]}if(n){var u=n[0],d=u.clientX,h=u.clientY;return[d,h]}return r&&o?[r,o]:[0,0]}var wb={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},eg=Oo({background:"background",labelGroup:"label-group",label:"label"},"indicator"),iA=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,wb)||this;return r.point=[0,0],r.group=r.appendChild(new V.ZA({})),r.isMutationObserved=!0,r}return e.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,o=n.padding,s=(0,X.CR)(Zi(o),4),l=s[0],u=s[1],d=s[2],h=s[3],p=this.label.node().getLocalBounds(),v=p.min,m=p.max,b=new Xr(v[0]-h,v[1]-l,m[0]+u-v[0]+h,m[1]+d-v[1]+l),_=this.getPath(r,b),S=ir(this.attributes,"background");this.background=Jn(this.group).maybeAppendByClassName(eg.background,"path").styles((0,X.pi)((0,X.pi)({},S),{d:_})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,o=n.labelText,s=ir(this.attributes,"label"),l=(0,X.CR)(Ps(s),2),u=l[0],d=l[1],h=u.text,p=(0,X._T)(u,["text"]);if(this.label=Jn(this.group).maybeAppendByClassName(eg.labelGroup,"g").styles(d),!!o){var v=this.label.maybeAppendByClassName(eg.label,function(){return Di(r(o))}).style("text",r(o).toString());v.selectAll("text").styles(p)}},e.prototype.adjustLayout=function(){var n=(0,X.CR)(this.point,2),r=n[0],o=n[1],s=this.attributes,l=s.x,u=s.y;this.group.attr("transform","translate(".concat(l-r,", ").concat(u-o,")"))},e.prototype.getPath=function(n,r){var o=this.attributes.radius,s=r.x,l=r.y,u=r.width,d=r.height,h=[["M",s+o,l],["L",s+u-o,l],["A",o,o,0,0,1,s+u,l+o],["L",s+u,l+d-o],["A",o,o,0,0,1,s+u-o,l+d],["L",s+o,l+d],["A",o,o,0,0,1,s,l+d-o],["L",s,l+o],["A",o,o,0,0,1,s+o,l],["Z"]],p={top:4,right:6,bottom:0,left:2},v=p[n],m=this.createCorner([h[v].slice(-2),h[v+1].slice(-2)]);return h.splice.apply(h,(0,X.ev)([v+1,1],(0,X.CR)(m),!1)),h[0][0]="M",h},e.prototype.createCorner=function(n,r){r===void 0&&(r=10);var o=.8,s=aw.apply(void 0,(0,X.ev)([],(0,X.CR)(n),!1)),l=(0,X.CR)(n,2),u=(0,X.CR)(l[0],2),d=u[0],h=u[1],p=(0,X.CR)(l[1],2),v=p[0],m=p[1],b=(0,X.CR)(s?[v-d,[d,v]]:[m-h,[h,m]],2),_=b[0],S=(0,X.CR)(b[1],2),O=S[0],E=S[1],A=_/2,M=_/Math.abs(_),L=r*M,I=L/2,R=L*Math.sqrt(3)/2*o,N=(0,X.CR)([O,O+A-I,O+A,O+A+I,E],5),Z=N[0],W=N[1],it=N[2],tt=N[3],pt=N[4];return s?(this.point=[it,h-R],[["L",Z,h],["L",W,h],["L",it,h-R],["L",tt,h],["L",pt,h]]):(this.point=[d+R,it],[["L",d,Z],["L",d,W],["L",d+R,it],["L",d,tt],["L",d,pt]])},e.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?Ls(this):Hu(this)},e.prototype.bindEvents=function(){this.label.on(V.Dk.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(zi),Ab={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},ng={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},Tb={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},Ca=Oo({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Do=Oo({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),Cb=function(t){(0,X.ZT)(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var o=n.x,s=n.y,l=n.size,u=l===void 0?10:l,d=n.radius,h=d===void 0?u/4:d,p=n.orientation,v=n.classNamePrefix,m=(0,X._T)(n,["x","y","size","radius","orientation","classNamePrefix"]),b=u,_=b*2.4,S=v?"".concat(Do.iconRect.name," ").concat(v,"handle-icon-rect"):Do.iconRect.name,O=function(R){return v?"".concat(Do.iconLine,"-").concat(R," ").concat(v,"handle-icon-line"):"".concat(Do.iconLine,"-").concat(R)},E=Jn(r).maybeAppendByClassName(Do.iconRect,"rect").attr("className",S).styles((0,X.pi)((0,X.pi)({},m),{width:b,height:_,radius:h,x:o-b/2,y:s-_/2,transformOrigin:"center"})),A=o+1/3*b-b/2,M=o+2/3*b-b/2,L=s+1/4*_-_/2,I=s+3/4*_-_/2;E.maybeAppendByClassName("".concat(Do.iconLine,"-1"),"line").attr("className",O(1)).styles((0,X.pi)({x1:A,x2:A,y1:L,y2:I},m)),E.maybeAppendByClassName("".concat(Do.iconLine,"-2"),"line").attr("className",O(2)).styles((0,X.pi)({x1:M,x2:M,y1:L,y2:I},m)),p==="vertical"&&(E.node().style.transform="rotate(90)")},e}(zi),Mb=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,Tb)||this}return e.prototype.renderLabel=function(n){var r=this,o=this.attributes,s=o.x,l=o.y,u=o.showLabel,d=ir(this.attributes,"label"),h=d.x,p=h===void 0?0:h,v=d.y,m=v===void 0?0:v,b=d.transform,_=d.transformOrigin,S=(0,X._T)(d,["x","y","transform","transformOrigin"]),O=(0,X.CR)(Ps(S,[]),2),E=O[0],A=O[1],M=Jn(n).maybeAppendByClassName(Do.labelGroup,"g").styles(A),L=(0,X.pi)((0,X.pi)({},ng),E),I=L.text,R=(0,X._T)(L,["text"]);fo(!!u,M,function(N){r.label=N.maybeAppendByClassName(Do.label,"text").styles((0,X.pi)((0,X.pi)({},R),{x:s+p,y:l+m,transform:b,transformOrigin:_,text:"".concat(I)})),r.label.on("mousedown",function(Z){Z.stopPropagation()}),r.label.on("touchstart",function(Z){Z.stopPropagation()})})},e.prototype.renderIcon=function(n){var r=this.attributes,o=r.x,s=r.y,l=r.orientation,u=r.type,d=r.classNamePrefix,h=(0,X.pi)((0,X.pi)({x:o,y:s,orientation:l,classNamePrefix:d},Ab),ir(this.attributes,"icon")),p=this.attributes.iconShape,v=p===void 0?function(){return new Cb({style:h})}:p,m=Jn(n).maybeAppendByClassName(Do.iconGroup,"g");m.selectAll(Do.icon.class).data([v]).join(function(b){return b.append(typeof v=="string"?v:function(){return v(u)}).attr("className",Do.icon.name)},function(b){return b.update(h)},function(b){return b.remove()})},e.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},e}(zi);function di(t,e,n){return n?"".concat(t," ").concat(n,"legend-").concat(e):t}function p9(t,e,n){var r=t.classNamePrefix,o=r===void 0?"":r;return di(e.name,n,o)}var vi={title:"title",item:"item",marker:"marker",label:"label",value:"value",focusIcon:"focus-icon",background:"background",ribbon:"ribbon",track:"track",selection:"selection",handle:"handle",handleMarker:"handle-marker",handleLabel:"handle-label",indicator:"indicator",prevBtn:"prev-btn",nextBtn:"next-btn",pageInfo:"page-info"},rg=Oo({text:"text"},"title");function oA(t,e){var n=t.attributes,r=n.position,o=n.spacing,s=n.inset,l=n.text,u=t.getBBox(),d=e.getBBox(),h=xc(r),p=(0,X.CR)(Zi(l?o:0),4),v=p[0],m=p[1],b=p[2],_=p[3],S=(0,X.CR)(Zi(s),4),O=S[0],E=S[1],A=S[2],M=S[3],L=(0,X.CR)([_+m,v+b],2),I=L[0],R=L[1],N=(0,X.CR)([M+E,O+A],2),Z=N[0],W=N[1];if(h[0]==="l")return new Xr(u.x,u.y,d.width+u.width+I+Z,Math.max(d.height+W,u.height));if(h[0]==="t")return new Xr(u.x,u.y,Math.max(d.width+Z,u.width),d.height+u.height+R+W);var it=(0,X.CR)([e.attributes.width||d.width,e.attributes.height||d.height],2),tt=it[0],pt=it[1];return new Xr(d.x,d.y,tt+u.width+I+Z,pt+u.height+R+W)}function aA(t,e){var n=Object.entries(e).reduce(function(r,o){var s=(0,X.CR)(o,2),l=s[0],u=s[1],d=t.node().attr(l);return d||(r[l]=u),r},{});t.styles(n)}function sA(t){var e,n,r,o,s=t,l=s.width,u=s.height,d=s.position,h=(0,X.CR)([+l/2,+u/2],2),p=h[0],v=h[1],m=(0,X.CR)([+p,+v,"center","middle"],4),b=m[0],_=m[1],S=m[2],O=m[3],E=xc(d);return E.includes("l")&&(e=(0,X.CR)([0,"start"],2),b=e[0],S=e[1]),E.includes("r")&&(n=(0,X.CR)([+l,"end"],2),b=n[0],S=n[1]),E.includes("t")&&(r=(0,X.CR)([0,"top"],2),_=r[0],O=r[1]),E.includes("b")&&(o=(0,X.CR)([+u,"bottom"],2),_=o[0],O=o[1]),{x:b,y:_,textAlign:S,textBaseline:O}}var cf=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return e.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,o=r.width,s=r.height,l=r.position,u=r.spacing,d=r.inset,h=n.querySelector(rg.text.class);if(!h)return new Xr(0,0,+o,+s);var p=h.getBBox(),v=p.width,m=p.height,b=(0,X.CR)(Zi(u),4),_=b[0],S=b[1],O=b[2],E=b[3],A=(0,X.CR)([0,0,+o,+s],4),M=A[0],L=A[1],I=A[2],R=A[3],N=xc(l);if(N.includes("i"))return new Xr(M,L,I,R);N.forEach(function(vt,It){var _t,Lt,$t,he;vt==="t"&&(_t=(0,X.CR)(It===0?[m+O,+s-m-O]:[0,+s],2),L=_t[0],R=_t[1]),vt==="r"&&(Lt=(0,X.CR)([+o-v-E],1),I=Lt[0]),vt==="b"&&($t=(0,X.CR)([+s-m-_],1),R=$t[0]),vt==="l"&&(he=(0,X.CR)(It===0?[v+S,+o-v-S]:[0,+o],2),M=he[0],I=he[1])});var Z=(0,X.CR)(Zi(d),4),W=Z[0],it=Z[1],tt=Z[2],pt=Z[3],K=(0,X.CR)([pt+it,W+tt],2),lt=K[0],ft=K[1];return new Xr(M+pt,L+W,I-lt,R-ft)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new Xr(0,0,0,0)},e.prototype.render=function(n,r){var o=this,s=n.width,l=n.height,u=n.position,d=n.spacing,h=n.classNamePrefix,p=(0,X._T)(n,["width","height","position","spacing","classNamePrefix"]),v=(0,X.CR)(Ps(p),1),m=v[0],b=sA(n),_=b.x,S=b.y,O=b.textAlign,E=b.textBaseline;fo(!!p.text,Jn(r),function(A){var M=di(rg.text.name,vi.title,h);o.title=A.maybeAppendByClassName(rg.text,"text").attr("className",M).styles(m).call(aA,{x:_,y:S,textAlign:O,textBaseline:E}).node()})},e}(zi),ig=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},Lb=ig,Pb=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},cA=function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},lA=function(t,e,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},uA=function(t,e,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]},fA=function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},dA=function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},Ib=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},hA=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},ah=function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},kb=function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},Rb=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},og=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},pA=og,gA=function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},vA=function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},mA=function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},yA=function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]};function bA(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}var _A=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]},sh=function(t,e,n){var r=n,o=n*.2,s=n*.7;return[["M",t-r,e],["A",r,r,0,1,0,t+r,e],["A",r,r,0,1,0,t-r,e],["Z"],["M",t-s,e],["L",t-o,e],["M",t+o,e],["L",t+s,e],["M",t,e-s],["L",t,e-o],["M",t,e+o],["L",t,e+s]]};function Db(t){var e="default";if((0,yl.Z)(t)&&t instanceof Image)e="image";else if((0,mo.Z)(t))e="symbol";else if((0,ne.Z)(t)){var n=new RegExp("data:(image|text)");t.match(n)?e="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?e="url":e="symbol"}return e}function Nb(t){var e=Db(t);return["base64","url","image"].includes(e)?"image":t&&e==="symbol"?"path":null}var mr=function(t){(0,X.ZT)(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var o=n.x,s=o===void 0?0:o,l=n.y,u=l===void 0?0:l,d=this.getSubShapeStyle(n),h=d.symbol,p=d.size,v=p===void 0?16:p,m=(0,X._T)(d,["symbol","size"]),b=Nb(h);fo(!!b,Jn(r),function(_){_.maybeAppendByClassName("marker",b).attr("className","marker ".concat(b,"-marker")).call(function(S){if(b==="image"){var O=v*2;S.styles({img:h,width:O,height:O,x:s-v,y:u-v})}else{var O=v/2,E=(0,mo.Z)(h)?h:e.getSymbol(h);S.styles((0,X.pi)({d:E==null?void 0:E(s,u,O)},m))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(n,r){e.MARKER_SYMBOL_MAP.set(n,r)},e.getSymbol=function(n){return e.MARKER_SYMBOL_MAP.get(n)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(zi);mr.registerSymbol("cross",hA),mr.registerSymbol("hyphen",Rb),mr.registerSymbol("line",Ib),mr.registerSymbol("plus",kb),mr.registerSymbol("tick",ah),mr.registerSymbol("circle",ig),mr.registerSymbol("point",Lb),mr.registerSymbol("bowtie",dA),mr.registerSymbol("hexagon",fA),mr.registerSymbol("square",Pb),mr.registerSymbol("diamond",cA),mr.registerSymbol("triangle",lA),mr.registerSymbol("triangle-down",uA),mr.registerSymbol("line",Ib),mr.registerSymbol("dot",og),mr.registerSymbol("dash",pA),mr.registerSymbol("smooth",gA),mr.registerSymbol("hv",vA),mr.registerSymbol("vh",mA),mr.registerSymbol("hvh",yA),mr.registerSymbol("vhv",bA),mr.registerSymbol("focus",sh);function xA(t,e,n){var r=Math.round((t-n)/e);return n+r*e}function SA(t,e,n){var r=1.4,o=r*n;return[["M",t-n,e-o],["L",t+n,e-o],["L",t+n,e+o],["L",t-n,e+o],["Z"]]}var Fb=1.4,Bb=.4;function OA(t,e,n){var r=n,o=r*Fb,s=r/2,l=r/6,u=t+o*Bb;return[["M",t,e],["L",u,e+s],["L",t+o,e+s],["L",t+o,e-s],["L",u,e-s],["Z"],["M",u,e+l],["L",t+o-2,e+l],["M",u,e-l],["L",t+o-2,e-l]]}function EA(t,e,n){var r=n,o=r*Fb,s=r/2,l=r/6,u=e+o*Bb;return[["M",t,e],["L",t-s,u],["L",t-s,e+o],["L",t+s,e+o],["L",t+s,u],["Z"],["M",t-l,u],["L",t-l,e+o-2],["M",t+l,u],["L",t+l,e+o-2]]}mr.registerSymbol("hiddenHandle",SA),mr.registerSymbol("verticalHandle",OA),mr.registerSymbol("horizontalHandle",EA);var y6=function(t,e,n){return t===void 0&&(t="horizontal"),t==="horizontal"?e:n};function jb(t,e,n,r){var o;r===void 0&&(r=4);var s=(0,X.CR)(t,2),l=s[0],u=s[1],d=(0,X.CR)(e,2),h=d[0],p=d[1],v=(0,X.CR)(n,2),m=v[0],b=v[1],_=(0,X.CR)([h,p],2),S=_[0],O=_[1],E=O-S;return S>O&&(o=(0,X.CR)([O,S],2),S=o[0],O=o[1]),E>u-l?[l,u]:S<l?m===l&&b===O?[l,O]:[l,E+l]:O>u?b===u&&m===S?[S,u]:[u-E,u]:[S,O]}function Ma(t,e,n){return t===void 0&&(t="horizontal"),t==="horizontal"?e:n}var Ac=Oo({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),ag={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},zb=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,ag)||this}return e.prototype.render=function(n,r){var o=Jn(r).maybeAppendByClassName(Ac.markerGroup,"g");this.renderMarker(o);var s=Jn(r).maybeAppendByClassName(Ac.labelGroup,"g");this.renderLabel(s)},e.prototype.renderMarker=function(n){var r=this,o=this.attributes,s=o.orientation,l=o.classNamePrefix,u=o.markerSymbol,d=u===void 0?Ma(s,"horizontalHandle","verticalHandle"):u;fo(!!d,n,function(h){var p=ir(r.attributes,"marker"),v=(0,X.pi)({symbol:d},p),m=di(Ac.marker.name,vi.handleMarker,l);if(r.marker=h.maybeAppendByClassName(Ac.marker,function(){return new mr({style:v,className:m})}).update(v),l){var b=r.marker.node().querySelector(".marker");if(b){var _=b.getAttribute("class")||"",S=_.split(" ")[0],O=di(S,vi.handleMarker,l);b.setAttribute("class",O)}}})},e.prototype.renderLabel=function(n){var r=this,o=this.attributes,s=o.showLabel,l=o.orientation,u=o.spacing,d=u===void 0?0:u,h=o.formatter,p=o.classNamePrefix;fo(s,n,function(v){var m,b=ir(r.attributes,"label"),_=b.text,S=(0,X._T)(b,["text"]),O=((m=v.select(Ac.marker.class))===null||m===void 0?void 0:m.node().getBBox())||{},E=O.width,A=E===void 0?0:E,M=O.height,L=M===void 0?0:M,I=(0,X.CR)(Ma(l,[0,L+d,"center","top"],[A+d,0,"start","middle"]),4),R=I[0],N=I[1],Z=I[2],W=I[3],it=di(Ac.label.name,vi.handleLabel,p);v.maybeAppendByClassName(Ac.label,"text").attr("className",it).styles((0,X.pi)((0,X.pi)({},S),{x:R,y:N,text:h(_).toString(),textAlign:Z,textBaseline:W}))})},e}(zi),Ub={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},wA=da({},Ub,{}),AA=da({},Ub,qa(ag,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),TA=.01,b6=.5,Ti=Oo({title:"title",html:"html",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");function CA(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],o=t[n];if(e>=r&&e<=o)return[r,o]}return[e,e]}function MA(t,e,n){var r=Array.from(e),o=t.length;return new Array(o).fill(0).reduce(function(s,l,u){var d=r[u%r.length];return s+=" ".concat(t[u],":").concat(d).concat(u<o-1?" ".concat(t[u+1],":").concat(d):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function sg(t,e){var n=(0,X.CR)(CA(t,e),2),r=n[0],o=n[1];return{tick:e>(r+o)/2?o:r,range:[r,o]}}var Tc=Oo({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function Zb(t){var e=t.orientation,n=t.size,r=t.length;return Ma(e,[r,n],[n,r])}function cg(t){var e=t.type,n=(0,X.CR)(Zb(t),2),r=n[0],o=n[1];return e==="size"?[["M",0,o],["L",0+r,0],["L",0+r,o],["Z"]]:[["M",0,o],["L",0,0],["L",0+r,0],["L",0+r,o],["Z"]]}function Hb(t){return cg(t)}function Vb(t){var e=t.orientation,n=t.color,r=t.block,o=t.partition,s;if((0,mo.Z)(n)){var l=20;s=new Array(l).fill(0).map(function(h,p,v){return n(p/(v.length-1))})}else s=n;var u=s.length,d=s.map(function(h){return(0,V.lu)(h).toString()});return u?u===1?d[0]:r?MA(o,d,e):d.reduce(function(h,p,v){return h+=" ".concat(v/(u-1),":").concat(p)},"l(".concat(Ma(e,"0","270"),")")):""}function LA(t){var e=t.orientation,n=t.range;if(!n)return[];var r=(0,X.CR)(Zb(t),2),o=r[0],s=r[1],l=(0,X.CR)(n,2),u=l[0],d=l[1],h=Ma(e,u*o,0),p=Ma(e,0,u*s),v=Ma(e,d*o,o),m=Ma(e,s,d*s);return[["M",h,p],["L",h,m],["L",v,m],["L",v,p],["Z"]]}function PA(t,e){var n=ir(e,"track"),r=e.classNamePrefix,o=di(Tc.track.name,vi.track,r);t.maybeAppendByClassName(Tc.track,"path").attr("className",o).styles((0,X.pi)({d:cg(e)},n))}function IA(t,e){var n=ir(e,"selection"),r=Vb(e),o=e.classNamePrefix,s=di(Tc.selection.name,vi.selection,o),l=t.maybeAppendByClassName(Tc.selection,"path").attr("className",s).styles((0,X.pi)({d:Hb(e),fill:r},n)),u=l.maybeAppendByClassName(Tc.clipPath,"path").styles({d:LA(e)}).node();l.style("clipPath",u)}var Wb=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return e.prototype.render=function(n,r){var o=Jn(r).maybeAppendByClassName(Tc.trackGroup,"g");PA(o,n);var s=Jn(r).maybeAppendByClassName(Tc.selectionGroup,"g");IA(s,n)},e}(zi);function kA(t){return{min:Math.min.apply(Math,(0,X.ev)([],(0,X.CR)(t.map(function(e){return e.value})),!1)),max:Math.max.apply(Math,(0,X.ev)([],(0,X.CR)(t.map(function(e){return e.value})),!1))}}var RA=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,AA)||this;return r.eventToOffsetScale=new wc({}),r.innerRibbonScale=new wc({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(o){var s=r.attributes,l=s.data,u=s.block;o.stopPropagation();var d=r.getValueByCanvasPoint(o);if(u){var h=sg(l.map(function(m){var b=m.value;return b}),d).range,p=r.getRealSelection(h);r.showIndicator((h[0]+h[1])/2,"".concat(p[0],"-").concat(p[1])),r.dispatchIndicated(d,h)}else{var v=r.getTickValue(d);r.showIndicator(v,"".concat(r.getRealValue(v))),r.dispatchIndicated(v)}},r.onDragStart=function(o){return function(s){s.stopPropagation(),r.attributes.slidable&&(r.target=o,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(s)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(o){var s=r.target;r.updateMouse();var l=(0,X.CR)(r.selection,2),u=l[0],d=l[1],h=r.getTickValue(r.getValueByCanvasPoint(o)),p=h-r.prevValue;s==="start"?u!==h&&r.updateSelection(h,d):s==="end"?d!==h&&r.updateSelection(u,h):s==="ribbon"&&p!==0&&(r.prevValue=h,r.updateSelection(p,p,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(e.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.width,o=n.height;return new Xr(0,0,r,o)},e.prototype.render=function(n,r){var o=this,s=n.classNamePrefix,l=r.className||"legend-continuous";s?r.attr("className","".concat(l," ").concat(s,"legend")):r.className||r.attr("className","legend-continuous");var u=n.showLabel;this.renderTitle(Jn(r));var d=this.availableSpace,h=d.x,p=d.y,v=Jn(r).maybeAppendByClassName(Ti.contentGroup,"g").styles({transform:"translate(".concat(h,", ").concat(p,")")}),m=v.maybeAppendByClassName(Ti.labelGroup,"g").styles({zIndex:1});fo(!!u,m,function(_){o.renderLabel(_)});var b=v.maybeAppendByClassName(Ti.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=v.maybeAppendByClassName(Ti.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(b),this.renderIndicator(v),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(e.prototype,"range",{get:function(){var n=this.attributes,r=n.data,o=n.domain;return o?{min:o[0],max:o[1]}:kA(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,o=n.max;return this.innerRibbonScale.update({domain:[r,o],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonRange",{get:function(){var n=(0,X.CR)(this.selection,2),r=n[0],o=n[1],s=this.ribbonScale;return[s.map(r),s.map(o)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var n=this.range,r=n.min,o=n.max,s=this.attributes.defaultValue,l=s===void 0?[r,o]:s,u=(0,X.CR)(l,2),d=u[0],h=u[1];return[d,h]},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){return Ma(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},e.prototype.renderTitle=function(n){var r=this.attributes,o=r.showTitle,s=r.titleText,l=r.width,u=r.height,d=r.classNamePrefix,h=ir(this.attributes,"title"),p=(0,X.pi)((0,X.pi)({},h),{width:l,height:u,text:s,classNamePrefix:d}),v=this;n.selectAll(Ti.title.class).data(o?[s]:[]).join(function(m){return m.append(function(){return new cf({style:p})}).attr("className",Ti.title.name).each(function(){v.title=this})},function(m){return m.update(p)},function(m){return m.each(function(){v.title=void 0}).remove()})},Object.defineProperty(e.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,o=n.height;return new Xr(0,0,r,o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,o=n.labelDirection,s={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return s[r][o]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Xr(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var o=((n=this.label.querySelector(q.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),s=o.width,l=o.height;return this.cacheLabelBBox=new Xr(0,0,s,l),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,o=n.labelSpacing,s=o===void 0?0:o;if(!r)return{width:0,height:0,size:0,length:0};var l=this.labelBBox,u=l.width,d=l.height,h=this.ifHorizontal(d,u)+s+this.labelFixedSpacing,p=this.ifHorizontal(u,d);return{width:u,height:d,size:h,length:p}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,o=n.ribbonSize,s=this.availableSpace,l=s.width,u=s.height,d=this.labelShape,h=d.size,p=d.length,v=(0,X.CR)(this.ifHorizontal([u,l],[l,u]),2),m=v[0],b=v[1],_=r?this.handleShape:{size:0,length:0},S=_.size,O=_.length,E=this.handleOffsetRatio,A=0,M=this.labelPosition;o?A=o:["bottom","right"].includes(M)?A=Math.min(m-h,(m-S)/E):m*(1-E)>S?A=Math.max(m-h,0):A=Math.max((m-h-S)/E,0);var L=Math.max(O,p),I=b-L,R=(0,X.CR)(this.ifHorizontal([I,A],[A,I]),2),N=R[0],Z=R[1],W=["top","left"].includes(M)?h:0,it=(0,X.CR)(this.ifHorizontal([L/2,W],[W,L/2]),2),tt=it[0],pt=it[1];return new Xr(tt,pt,N,Z)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,o=n.height;return this.ifHorizontal({size:o,length:r},{size:r,length:o})},enumerable:!1,configurable:!0}),e.prototype.renderRibbon=function(n){var r=this.attributes,o=r.data,s=r.type,l=r.orientation,u=r.color,d=r.block,h=r.classNamePrefix,p=ir(this.attributes,"ribbon"),v=this.range,m=v.min,b=v.max,_=this.ribbonBBox,S=_.x,O=_.y,E=this.ribbonShape,A=E.length,M=E.size,L=da({transform:"translate(".concat(S,", ").concat(O,")"),length:A,size:M,type:s,orientation:l,color:u,block:d,partition:o.map(function(R){return(R.value-m)/(b-m)}),range:this.ribbonRange,classNamePrefix:h},p),I=di(Ti.ribbon.name,vi.ribbon,h);this.ribbon=n.maybeAppendByClassName(Ti.ribbon,function(){return new Wb({style:L,className:I})}).update(L)},e.prototype.getHandleClassName=function(n){return"".concat(Ti.prefix("".concat(n,"-handle")))},e.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,o=n.orientation,s=n.classNamePrefix,l=ir(this.attributes,"handle"),u=(0,X.CR)(this.selection,2),d=u[0],h=u[1],p=(0,X.pi)((0,X.pi)({},l),{orientation:o,classNamePrefix:s}),v=l.shape,m=v===void 0?"slider":v,b=m==="basic"?zb:Mb,_=this,S=di(Ti.handle.name,vi.handle,s);this.handlesGroup.selectAll(Ti.handle.class).data(r?[{value:d,type:"start"},{value:h,type:"end"}]:[],function(O){return O.type}).join(function(O){return O.append(function(){return new b({style:p,className:S})}).attr("className",function(E){var A=E.type;return"".concat(S," ").concat(_.getHandleClassName(A))}).each(function(E){var A=E.type,M=E.value;this.update({labelText:M});var L="".concat(A,"Handle");_[L]=this,this.addEventListener("pointerdown",_.onDragStart(A))})},function(O){return O.update(p).each(function(E){var A=E.value;this.update({labelText:A})})},function(O){return O.each(function(E){var A=E.type,M="".concat(A,"Handle");_[M]=void 0}).remove()})},e.prototype.adjustHandles=function(){var n=(0,X.CR)(this.selection,2),r=n[0],o=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",o);var s=this.attributes,l=s.classNamePrefix,u=s.showHandle,d=ir(this.attributes,"handle").shape,h=d===void 0?"slider":d;u&&h==="slider"&&l&&(this.startHandle&&this.updateSliderHandleClassNames(this.startHandle,l),this.endHandle&&this.updateSliderHandleClassNames(this.endHandle,l))},e.prototype.updateSliderHandleClassNames=function(n,r){var o=n.container||n,s=o.querySelector(".handle-icon-rect");if(s){var l=di("handle-icon-rect",vi.handleMarker,r);s.setAttribute("class",l);var u=s.querySelectorAll("line");u.forEach(function(p){var v=p.getAttribute("class")||"",m=v.split(" ")[0],b=di(m,vi.handleMarker,r);p.setAttribute("class",b)})}var d=o.querySelector(".handle-label");if(d){var h=di("handle-label",vi.handleLabel,r);d.setAttribute("class",h)}},Object.defineProperty(e.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Xr(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,o=n.height,s=this.endHandle.getBBox(),l=s.width,u=s.height,d=(0,X.CR)([Math.max(r,l),Math.max(o,u)],2),h=d[0],p=d[1];return this.cacheHandleBBox=new Xr(0,0,h,p),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,o=n.height,s=(0,X.CR)(this.ifHorizontal([o,r],[r,o]),2),l=s[0],u=s[1];return{width:r,height:o,size:l,length:u}},enumerable:!1,configurable:!0}),e.prototype.setHandlePosition=function(n,r){var o=this.attributes.handleFormatter,s=this.ribbonBBox,l=s.x,u=s.y,d=this.ribbonShape.size,h=this.getOffset(r),p=(0,X.CR)(this.ifHorizontal([l+h,u+d*this.handleOffsetRatio],[l+d*this.handleOffsetRatio,u+h]),2),v=p[0],m=p[1],b=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();b==null||b.update({transform:"translate(".concat(v,", ").concat(m,")"),formatter:o})},e.prototype.renderIndicator=function(n){var r=this.attributes.classNamePrefix,o=ir(this.attributes,"indicator"),s=di(Ti.indicator.name,vi.indicator,r);this.indicator=n.maybeAppendByClassName(Ti.indicator,function(){return new iA({style:o,className:s})}).update(o)},Object.defineProperty(e.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(o,s,l,u){var d,h,p=(d=s==null?void 0:s.id)!==null&&d!==void 0?d:l.toString();if(o.push((0,X.pi)((0,X.pi)({},s),{id:p,index:l,type:"value",label:(h=s==null?void 0:s.label)!==null&&h!==void 0?h:s.value.toString(),value:n.ribbonScale.map(s.value)})),l<u.length-1){var v=u[l+1],m=(0,X.CR)([s.value,v.value],2),b=m[0],_=m[1],S=(b+_)/2;o.push((0,X.pi)((0,X.pi)({},s),{id:p,index:l,type:"range",range:[b,_],label:[b,_].join("~"),value:n.ribbonScale.map(S)}))}return o},[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelStyle",{get:function(){var n=(0,X.CR)(["center","middle"],2),r=n[0],o=n[1],s=this.labelPosition;return s==="top"?o="bottom":s==="bottom"?o="top":s==="left"?r="end":s==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:o}},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(n){var r=this.attributes,o=r.showTick,s=o===void 0?!1:o,l=r.labelFilter,u=r.labelFormatter,d=ir(this.attributes,"tick"),h=ir(this.attributes,"label"),p=h.align,v=da((0,X.pi)({showLine:!1,showGrid:!1,showTick:s,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),qa(d,"tick"),qa(h,"label"),{data:this.labelData}),m={tickFilter:function(_,S,O){return(_==null?void 0:_.type)!=="value"?!1:l?l(_,_.index,O.filter(function(E){return E.type!=="value"})):!0},labelFilter:function(_,S,O){return(_==null?void 0:_.type)!==p?!1:l?l(_,_.index,O.filter(function(E){return E.type===p})):!0},labelFormatter:u},b=(0,X.pi)((0,X.pi)((0,X.pi)({},v),m),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(Ti.label,function(){return new ef({style:b})}).node(),this.label.update(b,!1)},Object.defineProperty(e.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,o=n.labelDirection,s=n.labelSpacing,l=n.tickLength,u=this.ribbonShape.size,d=this.labelPosition,h=this.labelFixedSpacing,p=(0,X.CR)([0,0,0],3),v=p[0],m=p[1],b=p[2],_=l!=null?l:u;return r?(b=_,m=h,o==="positive"?d==="right"?(v=_,b=_):d==="bottom"&&(v=b):o==="negative"&&(d==="top"||d==="left")&&(v=u)):o==="positive"?d==="right"?m=_:d==="bottom"&&(v=u+h,m=s):o==="negative"&&(d==="left"||d==="top")&&(m=s),{offset:v,spacing:m,tickLength:b}},enumerable:!1,configurable:!0}),e.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,o=r.x,s=r.y,l=r.width,u=r.height,d=this.labelAxisStyle,h=d.offset,p=d.spacing,v=d.tickLength,m=(0,X.CR)(this.ifHorizontal([[o,s+h],[o+l,s+h]],[[o+h,s+u],[o+h,s]]),2),b=m[0],_=m[1];this.label.update({startPos:b,endPos:_,tickLength:v,labelSpacing:p},!1)}},e.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},e.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var o=this.attributes.showIndicator;if(!o||typeof n!="number"){this.hideIndicator();return}var s=this.range,l=s.min,u=s.max,d=this.ribbonBBox,h=d.x,p=d.y,v=(0,dn.Z)(n,l,u),m=this.getOffset(v),b=this.ifHorizontal([m+h,p],[h,m+p]);this.indicator.update({x:b[0],y:b[1],position:this.ifHorizontal("top","left"),labelText:r}),Hu(this.indicator.node())},e.prototype.hideIndicator=function(){Ls(this.indicator.node())},e.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},e.prototype.setSelection=function(n,r){this.updateSelection(n,r)},e.prototype.updateSelection=function(n,r,o){var s;o===void 0&&(o=!1);var l=(0,X.CR)(this.selection,2),u=l[0],d=l[1],h=(0,X.CR)([n,r],2),p=h[0],v=h[1];o&&(p+=u,v+=d);var m=this.range,b=m.min,_=m.max;s=(0,X.CR)(jb([b,_],[p,v],this.selection),2),p=s[0],v=s[1],this.update({defaultValue:[p,v]}),this.dispatchSelection()},Object.defineProperty(e.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,o=this.range,s=o.min,l=o.max;return(0,Tl.Z)(r)?af((l-s)*TA,0):r},enumerable:!1,configurable:!0}),e.prototype.getTickValue=function(n){var r=this.attributes,o=r.data,s=r.block,l=this.range.min;return s?sg(o.map(function(u){var d=u.value;return d}),n).tick:xA(n,this.step,l)},e.prototype.getValueByCanvasPoint=function(n){var r=this.range,o=r.min,s=r.max,l=(0,X.CR)(this.ribbon.node().getPosition(),2),u=l[0],d=l[1],h=this.ifHorizontal(u,d),p=this.ifHorizontal.apply(this,(0,X.ev)([],(0,X.CR)(sf(n)),!1)),v=p-h,m=(0,dn.Z)(this.getOffset(v,!0),o,s);return m},e.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var o=this.range,s=o.min,l=o.max,u=this.ribbonShape.length,d=this.eventToOffsetScale;return d.update({domain:[s,l],range:[0,u]}),r?d.invert(n):d.map(n)},e.prototype.getRealSelection=function(n){var r=this.range.max,o=(0,X.CR)(n,2),s=o[0],l=o[1];return this.ifHorizontal([s,l],[r-l,r-s])},e.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n)},e.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new V.Aw("valuechange",{detail:{value:n}});this.dispatchEvent(r)},e.prototype.dispatchIndicated=function(n,r){var o=this,s=this.range.max,l=this.ifHorizontal(function(){return{value:n,range:r}},function(){return{value:s-n,range:r?o.getRealSelection(r):void 0}}),u=new V.Aw("indicate",{detail:l});this.dispatchEvent(u)},e}(zi);class Cl extends gl{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(e){super(e)}map(e){if(!Kd(e))return this.options.unknown;const n=nf(this.thresholds,e,0,this.n);return this.options.range[n]}invert(e){const{range:n}=this.options,r=n.indexOf(e),o=this.thresholds;return[o[r-1],o[r]]}clone(){return new Cl(this.options)}rescale(){const{domain:e,range:n}=this.options;this.n=Math.min(e.length,n.length-1),this.thresholds=e}}function Ml(t){return(0,bn.Z)(t)?0:Ms(t)?t.length:Object.keys(t).length}var DA=function(t,e){if(!Ms(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,o=0;o<t.length;o++)if(t[o]===e){r=o;break}return r},Gb=DA;function Ll(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const lf=[1,5,2,2.5,4,3],NA=null,$b=Number.EPSILON*100;function Yb(t,e){return(t%e+e)%e}function FA(t){return Math.round(t*1e12)/1e12}function BA(t,e,n,r,o,s){const l=Ml(e),u=Gb(e,t);let d=0;const h=Yb(r,s);return(h<$b||s-h<$b)&&r<=0&&o>=0&&(d=1),1-u/(l-1)-n+d}function jA(t,e,n){const r=Ml(e);return 1-Gb(e,t)/(r-1)-n+1}function zA(t,e,n,r,o,s){const l=(t-1)/(s-o),u=(e-1)/(Math.max(s,r)-Math.min(n,o));return 2-Math.max(l/u,u/l)}function UA(t,e){return t>=e?2-(t-1)/(e-1):1}function lg(t,e,n,r){const o=e-t;return 1-.5*(bi(e-r,2)+bi(t-n,2))/bi(.1*o,2)}function ZA(t,e,n){const r=e-t;if(n>r){const o=(n-r)/2;return 1-bi(o,2)/bi(.1*r,2)}return 1}function HA(){return 1}const ug=(t,e,n=5,r=!0,o=lf,s=[.25,.2,.5,.05])=>{const l=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||typeof t!="number"||typeof e!="number"||!l)return[];if(e-t<1e-15||l===1)return[t];const u={score:-2,lmin:0,lmax:0,lstep:0};let d=1;for(;d<1/0;){for(let _=0;_<o.length;_+=1){const S=o[_],O=jA(S,o,d);if(s[0]*O+s[1]+s[2]+s[3]<u.score){d=1/0;break}let E=2;for(;E<1/0;){const A=UA(E,l);if(s[0]*O+s[1]+s[2]*A+s[3]<u.score)break;const M=(e-t)/(E+1)/d/S;let L=Math.ceil(Math.log10(M));for(;L<1/0;){const I=d*S*bi(10,L),R=ZA(t,e,I*(E-1));if(s[0]*O+s[1]*R+s[2]*A+s[3]<u.score)break;const N=Math.floor(e/I)*d-(E-1)*d,Z=Math.ceil(t/I)*d;if(N<=Z){const W=Z-N;for(let it=0;it<=W;it+=1){const pt=(N+it)*(I/d),K=pt+I*(E-1),lt=I,ft=BA(S,o,d,pt,K,lt),vt=lg(t,e,pt,K),It=zA(E,l,t,e,pt,K),_t=HA(),Lt=s[0]*ft+s[1]*vt+s[2]*It+s[3]*_t;Lt>u.score&&(!r||pt<=t&&K>=e)&&(u.lmin=pt,u.lmax=K,u.lstep=lt,u.score=Lt)}}L+=1}E+=1}}d+=1}const h=Ll(u.lmax),p=Ll(u.lmin),v=Ll(u.lstep),m=Math.floor(FA((h-p)/v))+1,b=new Array(m);b[0]=Ll(p);for(let _=1;_<m;_+=1)b[_]=Ll(b[_-1]+v);return b};class ch extends Cl{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:ug}}constructor(e){super(e)}nice(){const{nice:e}=this.options;if(e){const[n,r,o]=this.getTickMethodOptions();this.options.domain=X0(n,r,o)}}getTicks(){const{tickMethod:e}=this.options,[n,r,o]=this.getTickMethodOptions();return e(n,r,o)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],o=e[e.length-1];return[r,o,n]}rescale(){this.nice();const{range:e,domain:n}=this.options,[r,o]=n;this.n=e.length-1,this.thresholds=new Array(this.n);for(let s=0;s<this.n;s+=1)this.thresholds[s]=((s+1)*o-(s-this.n)*r)/(this.n+1)}invert(e){const[n,r]=super.invert(e),[o,s]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||o,r||s]}getThresholds(){return this.thresholds}clone(){return new ch(this.options)}}function VA(t,e){const n=t.length;if(!n)return;if(n<2)return t[n-1];const r=(n-1)*e,o=Math.floor(r),s=t[o],l=t[o+1];return s+(l-s)*(r-o)}function WA(t,e,n=!1){const r=t;n||r.sort((s,l)=>s-l);const o=[];for(let s=1;s<e;s+=1)o.push(VA(r,s/e));return o}class es extends Cl{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:ug}}constructor(e){super(e)}rescale(){const{domain:e,range:n}=this.options;this.n=n.length-1,this.thresholds=WA(e,this.n+1,!1)}invert(e){const[n,r]=super.invert(e),{domain:o}=this.options,s=o[0],l=o[o.length-1];return n===void 0&&r===void 0?[n,r]:[n||s,r||l]}getThresholds(){return this.thresholds}clone(){return new es(this.options)}getTicks(){const{tickCount:e,domain:n,tickMethod:r}=this.options,o=n.length-1,s=n[0],l=n[o];return r(s,l,e)}}var GA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function $A(t,e,n){return t.size=e,Lw(n)?t.height=e:t.width=e,t}function YA(t,e,n){const{size:r}=e,o=cb(t,e,n);return $A(o,r,o.orientation)}function XA(t){return e=>({value:e/t,label:String(e),domainValue:e})}function qA(t,e,n,r,o){const s=e.thresholds,l=XA(r);return Object.assign(Object.assign({},t),{color:o,data:[n,...s,r].map(l)})}function KA(t,e,n){const o=[-1/0,...e.thresholds,1/0].map((s,l)=>({value:l,domainValue:s,label:s}));return Object.assign(Object.assign({},t),{data:o,color:n,labelFilter:(s,l)=>l>0&&l<o.length-1})}function fg(t){const{domain:e}=t.getOptions(),[n,r]=[e[0],v1(e)];return[n,r]}function Xb(t,e){const n=t.getOptions(),r=t.clone();return r.update(Object.assign(Object.assign({},n),{range:[(0,V.lu)(e).toString()]})),r}function QA(t,e,n,r,o,s){const{length:l}=t,u=n||r,d=o.color?s.legendContinuous.ribbonFill||"black":s.color,h=e||Xb(u,d),[p,v]=fg(h),[m,b]=fg([e,n,r].filter(_=>_!==void 0).find(_=>!(_ instanceof Pu)));return Object.assign(Object.assign({},t),{domain:[m,b],data:h.getTicks().map(_=>({value:_})),color:new Array(Math.floor(l)).fill(0).map((_,S)=>{const O=(v-p)/(l-1)*S+p,E=h.map(O)||d,A=r?r.map(O):1;return E.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(M,L,I,R)=>`rgba(${L}, ${I}, ${R}, ${A})`)})})}function JA(t,e,n,r,o,s){const l=Yo(t,"color"),u=YA(n,r,o);if(l instanceof Cl){const{range:p}=l.getOptions(),[v,m]=fg(l);return l instanceof ch||l instanceof es?qA(u,l,v,m,p):KA(u,l,p)}const d=Yo(t,"size"),h=Yo(t,"opacity");return QA(u,l,d,h,e,s)}const ns=t=>{const{labelFormatter:e,layout:n,order:r,orientation:o,position:s,size:l,title:u,style:d,crossPadding:h,padding:p}=t,v=GA(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:m,value:b,theme:_,scale:S})=>{const{bbox:O}=b,{x:E,y:A,width:M,height:L}=O,I=ab(s,n),{legendContinuous:R={}}=_,N=eh(Object.assign({},R,Object.assign(Object.assign({titleText:th(u),labelAlign:"value",labelFormatter:typeof e=="string"?W=>Cs(e)(W.label):e},JA(m,S,b,t,ns,_)),d),v)),Z=new sb({style:Object.assign(Object.assign({x:E,y:A,width:M,height:L},I),{subOptions:N})});return Z.appendChild(new RA({className:"legend-continuous",style:N})),Z}};ns.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const qb=t=>(...e)=>ns(Object.assign({},{block:!0},t))(...e);qb.props=Object.assign(Object.assign({},ns.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const dg=t=>e=>{const{scales:n}=e,r=Yo(n,"size");return ns(Object.assign({},{type:"size",data:r.getTicks().map((o,s)=>({value:o,label:String(o)}))},t))(e)};dg.props=Object.assign(Object.assign({},ns.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const Kb=t=>dg(Object.assign({},{block:!0},t));Kb.props=Object.assign(Object.assign({},ns.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var t5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Qb=({static:t=!1}={})=>e=>{const{width:n,height:r,depth:o,paddingLeft:s,paddingRight:l,paddingTop:u,paddingBottom:d,padding:h,inset:p,insetLeft:v,insetTop:m,insetRight:b,insetBottom:_,margin:S,marginLeft:O,marginBottom:E,marginTop:A,marginRight:M,data:L,coordinate:I,theme:R,component:N,interaction:Z,x:W,y:it,z:tt,key:pt,frame:K,labelTransform:lt,parentKey:ft,clip:vt,viewStyle:It,title:_t}=e,Lt=t5(e,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:W,y:it,z:tt,key:pt,width:n,height:r,depth:o,padding:h,paddingLeft:s,paddingRight:l,paddingTop:u,inset:p,insetLeft:v,insetTop:m,insetRight:b,insetBottom:_,paddingBottom:d,theme:R,coordinate:I,component:N,interaction:Z,frame:K,labelTransform:lt,margin:S,marginLeft:O,marginBottom:E,marginTop:A,marginRight:M,parentKey:ft,clip:vt,style:It},!t&&{title:_t}),{marks:[Object.assign(Object.assign(Object.assign({},Lt),{key:`${pt}-0`,data:L}),t&&{title:_t})]})]};Qb.props={};var Jb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function uf(t){return(e,...n)=>Je({},t(e,...n),e)}function Cc(t){return(e,...n)=>Je({},e,t(e,...n))}function t_(t){return t instanceof Date?!1:typeof t=="object"}function ff(t,e){if(!t)return e;if(Array.isArray(t))return t;if(t_(t)){const{value:n=e}=t,r=Jb(t,["value"]);return Object.assign(Object.assign({},r),{value:n})}return t}var hg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const e_=()=>t=>{const{children:e}=t,n=hg(t,["children"]);if(!Array.isArray(e))return[];const{data:r,scale:o={},axis:s={},legend:l={},encode:u={},transform:d=[],slider:h={}}=n,p=hg(n,["data","scale","axis","legend","encode","transform","slider"]),v=e.map(m=>{var{data:b,scale:_={},axis:S={},legend:O={},encode:E={},transform:A=[],slider:M={}}=m,L=hg(m,["data","scale","axis","legend","encode","transform","slider"]);return Object.assign({data:ff(b,r),scale:Je({},o,_),encode:Je({},u,E),transform:[...d,...A],axis:S&&s?Je({},s,S):!1,legend:O&&l?Je({},l,O):!1,slider:Je({},h,M)},L)});return[Object.assign(Object.assign({},p),{marks:v,type:"standardView",slider:h})]};e_.props={};function Oi([t,e],[n,r]){return[t-n,e-r]}function lh([t,e],[n,r]){return[t+n,e+r]}function hi([t,e],[n,r]){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function Xo([t,e]){return Math.atan2(e,t)}function Mc([t,e]){return Xo([t,e])+Math.PI/2}function n_(t,e){const n=Xo(t),r=Xo(e);return n<r?r-n:Math.PI*2-(n-r)}function pg(t){let e=1/0,n=-1/0,r=1/0,o=-1/0;for(const[u,d]of t)e=Math.min(u,e),n=Math.max(u,n),r=Math.min(d,r),o=Math.max(d,o);const s=n-e,l=o-r;return[e,r,s,l]}function gg([t,e],[n,r]){return[(t+n)/2,(e+r)/2]}function jn(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function r_(t,e){return e.forEach((n,r)=>r===0?t.moveTo(n[0],n[1]):t.lineTo(n[0],n[1])),t.closePath(),t}function e5(t,e,n){const{arrowSize:r}=n,o=typeof r=="string"?+parseFloat(r)/100*hi(t,e):r,s=Math.PI/6,l=Math.atan2(e[1]-t[1],e[0]-t[0]),u=Math.PI/2-l-s,d=[e[0]-o*Math.sin(u),e[1]-o*Math.cos(u)],h=l-s,p=[e[0]-o*Math.cos(h),e[1]-o*Math.sin(h)];return[d,p]}function df(t,e,n,r,o){const s=Xo(Oi(r,e))+Math.PI,l=Xo(Oi(r,n))+Math.PI;return t.arc(r[0],r[1],o,s,l,l-s<0),t}function n5(t,e,n,r="y",o="between",s=!1){const l=(O,E)=>O==="y"||O===!0?E?180:90:E?90:0,u=r==="y"||r===!0?n:e,d=l(r,s),h=vc(u),[p,v]=ts(h,O=>u[O]),m=new pa({domain:[p,v],range:[0,100]}),b=O=>(0,be.Z)(u[O])&&!Number.isNaN(u[O])?m.map(u[O]):0,_={between:O=>`${t[O]} ${b(O)}%`,start:O=>O===0?`${t[O]} ${b(O)}%`:`${t[O-1]} ${b(O)}%, ${t[O]} ${b(O)}%`,end:O=>O===t.length-1?`${t[O]} ${b(O)}%`:`${t[O]} ${b(O)}%, ${t[O+1]} ${b(O)}%`},S=h.sort((O,E)=>b(O)-b(E)).map(_[o]||_.between).join(",");return`linear-gradient(${d}deg, ${S})`}function uh(t){const[e,n,r,o]=t;return[o,e,n,r]}function Lc(t,e,n){const[r,o,,s]=Yr(t)?uh(e):e,[l,u]=n,d=t.getCenter(),h=Mc(Oi(r,d)),p=Mc(Oi(o,d)),v=p===h&&l!==u?p+Math.PI*2:p,m=1e-4;return{startAngle:h+m,endAngle:(v-h>=0?v:Math.PI*2+v)-m,innerRadius:hi(s,d),outerRadius:hi(r,d)}}function g9(t){const e="connect";return Object.fromEntries(Object.entries(t).filter(([n])=>n.startsWith(e)).map(([n,r])=>[lowerFirst(n.replace(e,"").trim()),r]).filter(([n])=>n!==void 0))}function vg(t){const{colorAttribute:e,opacityAttribute:n=e}=t;return`${n}Opacity`}function r5(t,e){if(!Rr(t))return"";const n=t.getCenter(),{transform:r}=e;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function i_(t){if(t.length===1)return t[0];const[[e,n,r=0],[o,s,l=0]]=t;return[(e+o)/2,(n+s)/2,(r+l)/2]}function js(t){return t.replace(/-(\w)/g,function(e,n){return n.toUpperCase()})}function _6(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}var mg=Array.prototype.slice;function o_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ai(t){return function(){return t}}function zs(t){this._context=t}zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function fh(t){return new zs(t)}const yg=Math.PI,a_=2*yg,Us=1e-6,rs=a_-Us;function bg(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function qo(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return bg;const n=bi(10,e);return function(r){this._+=r[0];for(let o=1,s=r.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class _g{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?bg:qo(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,o){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(e,n,r,o,s,l){this._append`C${+e},${+n},${+r},${+o},${this._x1=+s},${this._y1=+l}`}arcTo(e,n,r,o,s){if(e=+e,n=+n,r=+r,o=+o,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,d=r-e,h=o-n,p=l-e,v=u-n,m=p*p+v*v;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>Us)if(!(Math.abs(v*d-h*p)>Us)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let b=r-l,_=o-u,S=d*d+h*h,O=b*b+_*_,E=Math.sqrt(S),A=Math.sqrt(m),M=s*Math.tan((yg-Math.acos((S+m-O)/(2*E*A)))/2),L=M/A,I=M/E;Math.abs(L-1)>Us&&this._append`L${e+L*p},${n+L*v}`,this._append`A${s},${s},0,0,${+(v*b>p*_)},${this._x1=e+I*d},${this._y1=n+I*h}`}}arc(e,n,r,o,s,l){if(e=+e,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(o),d=r*Math.sin(o),h=e+u,p=n+d,v=1^l,m=l?o-s:s-o;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Us||Math.abs(this._y1-p)>Us)&&this._append`L${h},${p}`,r&&(m<0&&(m=m%a_+a_),m>rs?this._append`A${r},${r},0,1,${v},${e-u},${n-d}A${r},${r},0,1,${v},${this._x1=h},${this._y1=p}`:m>Us&&this._append`A${r},${r},0,${+(m>=yg)},${v},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function ga(){return new _g}ga.prototype=_g.prototype;function v9(t=3){return new _g(+t)}function dh(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new _g(e)}function i5(t){return t[0]}function s_(t){return t[1]}function Pl(t,e){var n=ai(!0),r=null,o=fh,s=null,l=dh(u);t=typeof t=="function"?t:t===void 0?i5:ai(t),e=typeof e=="function"?e:e===void 0?s_:ai(e);function u(d){var h,p=(d=o_(d)).length,v,m=!1,b;for(r==null&&(s=o(b=l())),h=0;h<=p;++h)!(h<p&&n(v=d[h],h,d))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+t(v,h,d),+e(v,h,d));if(b)return s=null,b+""||null}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:ai(+d),u):t},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:ai(+d),u):e},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:ai(!!d),u):n},u.curve=function(d){return arguments.length?(o=d,r!=null&&(s=o(r)),u):o},u.context=function(d){return arguments.length?(d==null?r=s=null:s=o(r=d),u):r},u}function hf(t){const e=typeof t=="function"?t:t.render;return class extends V.b_{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){e(this)}}}var c_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function x6(t){const{min:[e,n],max:[r,o]}=t.getLocalBounds();let s=0,l=0;return e>0&&(s=e),r<0&&(s=r),n>0&&(l=n),o<0&&(l=o),[s,l]}function S6(t,e=[]){const[n=0,r=0,o=n,s=r]=e,l=t.parentNode,u=l.getEulerAngles();l.setEulerAngles(0);const{min:d,halfExtents:h}=t.getLocalBounds(),[p,v]=d,[m,b]=h;return l.setEulerAngles(u),{x:p-s,y:v-n,width:m*2+s+r,height:b*2+n+o}}const O6=(t,e,n)=>{const r=dist(t,e),o=dist(e,n),s=dist(n,t);return(Math.pow(r,2)+Math.pow(o,2)-Math.pow(s,2))/(2*r*o)};function o5(t,e,n,r,o=!0,s=!0){const l=v=>Pl()(v);if(!e[0]&&!e[1])return l([x6(t),e]);if(!n.length)return l([[0,0],e]);const[u,d]=n,h=[...d],p=[...u];if(d[0]!==u[0]){const v=o?-4:4;h[1]=d[1],s&&!o&&(h[0]=Math.max(u[0],d[0]-v),d[1]<u[1]?p[1]=h[1]:(p[1]=u[1],p[0]=Math.max(p[0],h[0]-v))),!s&&!o&&(h[0]=Math.max(u[0],d[0]-v),d[1]>u[1]?p[1]=h[1]:(p[1]=u[1],p[0]=Math.max(p[0],h[0]-v))),!s&&o&&(h[0]=Math.min(u[0],d[0]-v),d[1]>u[1]?p[1]=h[1]:(p[1]=u[1],p[0]=Math.min(p[0],h[0]-v))),s&&o&&(h[0]=Math.min(u[0],d[0]-v),d[1]<u[1]?p[1]=h[1]:(p[1]=u[1],p[0]=Math.min(p[0],h[0]-v)))}return l([d,h,p,u,e])}const l_=hf(t=>{const e=t.attributes,{className:n,class:r,transform:o,rotate:s,labelTransform:l,labelTransformOrigin:u,x:d,y:h,x0:p=d,y0:v=h,text:m,background:b,connector:_,startMarker:S,endMarker:O,coordCenter:E,innerHTML:A}=e,M=c_(e,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(t.style.transform=`translate(${d}, ${h})`,[d,h,p,v].some(_t=>!(0,be.Z)(_t))){t.children.forEach(_t=>_t.remove());return}const L=En(M,"background"),{padding:I}=L,R=c_(L,["padding"]),N=En(M,"connector"),{points:Z=[]}=N,W=c_(N,["points"]);let it;A?it=Xn(t).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",A).call(jn,Object.assign({transform:l,transformOrigin:u},M)).node():it=Xn(t).maybeAppend("text","text").style("zIndex",0).style("text",m).call(jn,Object.assign({textBaseline:"middle",transform:l,transformOrigin:u},M)).node();const tt=Xn(t).maybeAppend("background","rect").style("zIndex",-1).call(jn,S6(it,I)).call(jn,b?R:{}).node(),pt=+p<E[0],K=+v<E[1],lt=[+p-+d,+v-+h],ft=o5(tt,lt,Z,E,pt,K),vt=S&&new mr({id:"startMarker",style:Object.assign({x:0,y:0},En(M,"startMarker"))}),It=O&&new mr({id:"endMarker",style:Object.assign({x:0,y:0},En(M,"endMarker"))});Xn(t).maybeAppend("connector","path").style("zIndex",0).style("d",ft).style("markerStart",vt).style("markerEnd",It).call(jn,_?W:{})});function Pc(t,e){let n,r=-1,o=-1;if(e===void 0)for(const s of t)++o,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=o);else for(let s of t)(s=e(s,++o,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=o);return r}function u_(t,e,n,r){const o=e.length/2,s=e.slice(0,o),l=e.slice(o);let u=Pc(s,(b,_)=>Math.abs(b[1]-l[_][1]));u=Math.max(Math.min(u,o-2),1);const d=b=>[s[b][0],(s[b][1]+l[b][1])/2],h=d(u),p=d(u-1),v=d(u+1),m=Xo(Oi(v,p))/Math.PI*180;return{x:h[0],y:h[1],transform:`rotate(${m})`,textAlign:"center",textBaseline:"middle"}}function xg(t,e,n,r){const{bounds:o}=n,[[s,l],[u,d]]=o,h=u-s,p=d-l,v=m=>{const{x:b,y:_}=m,S=a0(n.x,h),O=a0(n.y,p);return Object.assign(Object.assign({},m),{x:(S||b)+s,y:(O||_)+l})};return v(t==="left"?{x:0,y:p/2,textAlign:"start",textBaseline:"middle"}:t==="right"?{x:h,y:p/2,textAlign:"end",textBaseline:"middle"}:t==="top"?{x:h/2,y:0,textAlign:"center",textBaseline:"top"}:t==="bottom"?{x:h/2,y:p,textAlign:"center",textBaseline:"bottom"}:t==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:t==="top-right"?{x:h,y:0,textAlign:"end",textBaseline:"top"}:t==="bottom-left"?{x:0,y:p,textAlign:"start",textBaseline:"bottom"}:t==="bottom-right"?{x:h,y:p,textAlign:"end",textBaseline:"bottom"}:{x:h/2,y:p/2,textAlign:"center",textBaseline:"middle"})}function f_(t,e,n,r){const{y:o,y1:s,autoRotate:l,rotateToAlignArc:u}=n,d=r.getCenter(),h=Lc(r,e,[o,s]),{innerRadius:p,outerRadius:v,startAngle:m,endAngle:b}=h,_=t==="inside"?(m+b)/2:b,S=hh(_,l,u),O=(()=>{const[E,A]=e,M=p+(v-p)*.5,[L,I]=t==="inside"?pf(d,_,M):gg(E,A);return{x:L,y:I}})();return Object.assign(Object.assign({},O),{textAlign:t==="inside"?"center":"start",textBaseline:"middle",rotate:S})}function pf(t,e,n){return[t[0]+Math.sin(e)*n,t[1]-Math.cos(e)*n]}function hh(t,e,n){if(!e)return 0;const r=n?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+r}function d_(t,e,n,r){const{y:o,y1:s,autoRotate:l,rotateToAlignArc:u,radius:d=.5,offset:h=0}=n,p=Lc(r,e,[o,s]),{startAngle:v,endAngle:m}=p,b=r.getCenter(),_=(v+m)/2,O={textAlign:"center",textBaseline:"middle",rotate:hh(_,l,u)},{innerRadius:E,outerRadius:A}=p,L=E+(A-E)*d+h,[I,R]=pf(b,_,L);return Object.assign({x:I,y:R},O)}function h_(t){return t===void 0?null:t}function a5(t,e,n,r){const{bounds:o}=n,[s]=o;return{x:h_(s[0]),y:h_(s[1])}}function is(t,e,n,r){const{bounds:o}=n;return o.length===1?a5(t,e,n,r):(zu(r)?f_:bl(r)?d_:xg)(t,e,n,r)}function p_(t,e,n,r,o){const[s,l]=pf(t,e,n),[u,d]=pf(t,e,r),h=Math.sin(e)>0?1:-1;return[[s,l],[u,d],[u+h*o,d]]}function s5(t,e,n){const r=Lc(n,t,[e.y,e.y1]),{innerRadius:o,outerRadius:s}=r;return o+(s-o)}function Sg(t,e,n){const r=Lc(n,t,[e.y,e.y1]),{startAngle:o,endAngle:s}=r;return(o+s)/2}function Og(t,e,n,r){const{autoRotate:o,rotateToAlignArc:s,offset:l=0,connector:u=!0,connectorLength:d=l,connectorLength2:h=0,connectorDistance:p=0}=n,v=r.getCenter(),m=Sg(e,n,r),b=Math.sin(m)>0?1:-1,_=hh(m,o,s),S={textAlign:b>0||zu(r)?"start":"end",textBaseline:"middle",rotate:_},O=s5(e,n,r),E=O+(u?d:l),[[A,M],[L,I],[R,N]]=p_(v,m,O,E,u?h:0),Z=u?+p*b:0,W=R+Z,it=N,tt={connector:u,connectorPoints:[[L-W,I-it],[R-W,N-it]]};return Object.assign(Object.assign({x0:A,y0:M,x:R+Z,y:N},S),tt)}function E6(t,e,n,r){const{bounds:o}=n;return o.length===1?a5(t,e,n,r):(zu(r)?f_:bl(r)?Og:xg)(t,e,n,r)}function si(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function g_(t,e){return Array.from(e,n=>t[n])}function va(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(o,s)=>s);return e.length>1?(e=e.map(o=>t.map(o)),r.sort((o,s)=>{for(const l of e){const u=gf(l[o],l[s]);if(u)return u}})):(n=t.map(n),r.sort((o,s)=>gf(n[o],n[s]))),g_(t,r)}return t.sort(Eg(n))}function Eg(t=si){if(t===si)return gf;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function gf(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function c5(t,e={}){const{labelHeight:n=14,height:r}=e,o=va(t,h=>h.y),s=o.length,l=new Array(s);for(let h=0;h<s;h++){const p=o[h],{y:v}=p;l[h]={y:v,y1:v+n,labels:[v]}}let u=!0;for(;u;){u=!1;for(let h=l.length-1;h>0;h--){const p=l[h],v=l[h-1];if(v.y1>p.y){u=!0,v.labels.push(...p.labels),l.splice(h,1),v.y1+=p.y1-p.y;const m=v.y1-v.y;v.y1=Math.max(Math.min(v.y1,r),m),v.y=v.y1-m}}}let d=0;for(const h of l){const{y:p,labels:v}=h;let m=p-n;for(const b of v){const _=o[d++],O=m+n-b;_.connectorPoints[0][1]-=O,_.y=m+n,m+=n}}}function vf(t,e){const n=va(t,u=>u.y),{height:r,labelHeight:o=14}=e,s=Math.ceil(r/o);if(n.length<=s)return c5(n,e);const l=[];for(let u=0;u<n.length;u++)u<n.length-s?(n[u].opacity=0,n[u].connector=!1):l.push(n[u]);c5(l,e)}var v_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const wg=new WeakMap;function w6(t,e,n){const{connectorLength:r,connectorLength2:o,connectorDistance:s}=e,l=v_(Og("outside",t,e,n),[]),u=n.getCenter(),d=s5(t,e,n),h=Sg(t,e,n),p=d+r+o,v=Math.sin(h)>0?1:-1,m=u[0]+(p+ +s)*v,{x:b}=l,_=m-b;return l.x+=_,l.connectorPoints[0][0]-=_,l}function Ag(t,e,n,r,o,s){if(!bl(r))return{};if(wg.has(e))return wg.get(e);const l=s.map(m=>w6(m,n,r)),{width:u,height:d}=r.getOptions(),h=l.filter(m=>m.x<u/2),p=l.filter(m=>m.x>=u/2),v=Object.assign(Object.assign({},o),{height:d});return vf(h,v),vf(p,v),l.forEach((m,b)=>wg.set(s[b],m)),wg.get(e)}var Tg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Cg(t,e,n,r){if(!bl(r))return{};const{connectorLength:o,connectorLength2:s,connectorDistance:l}=n,u=Tg(Og("outside",e,n,r),[]),{x0:d,y0:h}=u,p=r.getCenter(),m=AE(r)+o,b=Mc([d-p[0],h-p[1]]),_=Math.sin(b)>0?1:-1,[S,O]=pf(p,b,m);return u.x=S+(s+l)*_,u.y=O,u}var Mg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function ph(t,e){return t!==void 0?t:bl(e)?"inside":Yr(e)?"right":"top"}function Lg(t,e,n,r,o,s){const{position:l}=e,{render:u}=o,d=ph(l,n),p=r[u?"htmlLabel":d==="inside"?"innerLabel":"label"],v=Object.assign({},p,e),m=xt[js(d)];if(!m)throw new Error(`Unknown position: ${d}`);return Object.assign(Object.assign({},p),m(d,t,v,n,o,s))}const l5=(t,e)=>{const{coordinate:n,theme:r}=e,{render:o}=t;return(s,l,u,d)=>{const{text:h,x:p,y:v,transform:m="",transformOrigin:b,className:_=""}=l,S=Mg(l,["text","x","y","transform","transformOrigin","className"]),O=Lg(s,l,n,r,t,d),{rotate:E=0,transform:A=""}=O,M=Mg(O,["rotate","transform"]);return Xn(new l_).call(jn,M).style("text",`${h}`).style("className",`${_} g2-label`).style("innerHTML",o?o(h,l.datum,l.index):void 0).style("labelTransform",`${A} rotate(${+E}) ${m}`.trim()).style("labelTransformOrigin",b).style("coordCenter",n.getCenter()).call(jn,S).node()}};l5.props={defaultMarker:"point"};var Pg=function(t,e,n){var r=t,o=(0,ne.Z)(e)?e.split("."):e;return o.forEach(function(s,l){l<o.length-1?((0,yl.Z)(r[s])||(r[s]=(0,be.Z)(o[l+1])?[]:{}),r=r[s]):r[s]=n}),t},gh=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},u5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Ko=.03,vh={fill:"#fff",stroke:"#aaa",lineDash:"4 3",lineWidth:.5,fillOpacity:1,strokeOpacity:1},Zs=0,Ig=(t,e,n,r,o,s)=>{const l=[],u=[],d=r-1;for(let h=1;h<d;h++){const p=h/d*e,v=t+(h%2===0?n:-n);l.push(`${p},${v}`),u.push(`${p},${o?v-s:v+s}`)}return l.push(`${e},${t}`),u.push(`${e+s},${t}`),[l,u]},f5=(t,e)=>{const{context:n,selection:r,view:o}=e,s=r.select(`.${ue}`).node(),{document:l}=n.canvas,{scale:u}=o,d=new Map,h=(v,m,b)=>gh(void 0,void 0,void 0,function*(){const{update:_,setState:S}=n.externals;S("options",O=>{const{marks:E}=O;if(!E||!E.length)return O;const A=E.map(M=>{const L=Qn(M,"scale.y.breaks",[]),I=L.filter(R=>R.start!==m&&R.end!==b&&!R.collapsed);return L.forEach(R=>{R.start===m&&R.end===b&&(R.collapsed=!0)}),console.log("breaks group:",L,I),Je({},M,{scale:{y:{breaks:I}}})});return d.set(v,{start:m,end:b}),Object.assign(Object.assign({},O),{marks:A})}),yield _()}),p=()=>gh(void 0,void 0,void 0,function*(){if(!d.size)return;const{update:v,setState:m}=n.externals;m("options",b=>{const{marks:_}=b,S=_.map(O=>{const E=Qn(O,"scale.y.breaks",[]);return Pg(O,"scale.y.breaks",E.map(A=>Object.assign(Object.assign({},A),{collapsed:!1}))),O});return d.clear(),Object.assign(Object.assign({},b),{marks:S})}),yield v()});return v=>{const{key:m,start:b,end:_,gap:S=Ko,vertices:O=50,lineWidth:E=.5,verticeOffset:A=3}=v,M=u5(v,["key","start","end","gap","vertices","lineWidth","verticeOffset"]),L=l.createElement("g",{id:`break-group-${m}`,className:Dt}),I=Qn(u,"x.sortedDomain",[]),R=u.y.getOptions(),{range:N,domain:Z}=R,W=Z.indexOf(b),it=Z.indexOf(_),{width:tt,height:pt}=s.getBBox();if(W===-1||it===-1||!I.length)return L;const K=N[0]>N[1],lt=N[W]*pt,ft=N[it]*pt;let vt="",It="";for(const[Lt,{y:$t,isLower:he}]of[{y:ft,isLower:!1},{y:lt,isLower:!0}].entries()){const le=K?E:-E,[Ee,Ue]=Ig($t,tt-Zs,A,O,he,le);Lt===0?(vt=`M ${Zs},${$t} L ${Ee.join(" L ")} `,It=`M ${Zs-E},${$t+le} L ${Ue.join(" L ")} `):(vt+=`L ${tt-Zs},${$t} L ${[...Ee].reverse().join(" L ")} L ${Zs},${$t} Z`,It+=`L ${tt-Zs+E+2},${$t-le} L ${[...Ue].reverse().join(" L ")} L ${Zs-E},${$t-le} Z`)}const _t=Object.assign(Object.assign({},vh),M);try{const Lt=new V.y$({style:Object.assign(Object.assign({},_t),{d:vt})}),$t=new V.y$({style:Object.assign(Object.assign({},_t),{d:It,lineWidth:0,cursor:"pointer"})});$t.addEventListener("click",he=>gh(void 0,void 0,void 0,function*(){he.stopPropagation(),he.detail===2&&(yield h(m,b,_))})),L.appendChild(Lt),L.appendChild($t),s.addEventListener("click",he=>gh(void 0,void 0,void 0,function*(){he.detail===2&&(yield p())})),s.appendChild(L)}catch(Lt){console.error("Failed to create break path:",Lt)}return L}};f5.props={};function d5(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function os(t){let e,n,r;t.length!==2?(e=si,n=(u,d)=>si(t(u),d),r=(u,d)=>t(u)-d):(e=t===si||t===d5?t:m_,n=t,r=t);function o(u,d,h=0,p=u.length){if(h<p){if(e(d,d)!==0)return p;do{const v=h+p>>>1;n(u[v],d)<0?h=v+1:p=v}while(h<p)}return h}function s(u,d,h=0,p=u.length){if(h<p){if(e(d,d)!==0)return p;do{const v=h+p>>>1;n(u[v],d)<=0?h=v+1:p=v}while(h<p)}return h}function l(u,d,h=0,p=u.length){const v=o(u,d,h,p-1);return v>h&&r(u[v-1],d)>-r(u[v],d)?v-1:v}return{left:o,center:l,right:s}}function m_(){return 0}var y_=function(t,e){if(!Ms(t))return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];e(o,r)&&n.push(o)}return n},mf=y_;function as(t){return t===null?NaN:+t}function*h5(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const p5=os(si),b_=p5.right,__=p5.left,Ic=os(as).center;var Hs=b_;function x_(t,e,n){return Math.min(n,Math.max(e,t))}function La(t){return!!t.getBandWidth}function ss(t,e,n){if(!La(t))return t.invert(e);const{adjustedRange:r}=t;if(r.includes(e))return t.invert(e);const{domain:o}=t.getOptions(),s=n?-1:0,l=t.getStep(),u=n?r:r.map(p=>p+l),d=__(u,e),h=x_(d+s,0,o.length-1);return o[h]}function cs(t,e,n){if(!e)return t.getOptions().domain;if(!La(t)){const d=va(e);if(!n)return d;const[h]=d,{range:p}=t.getOptions(),[v,m]=p,b=v>m?-1:1,_=t.invert(t.map(h)+b*n);return[h,_]}const{domain:r}=t.getOptions(),o=e[0],s=r.indexOf(o);if(n){const d=s+Math.round(r.length*n);return r.slice(s,d)}const l=e[e.length-1],u=r.indexOf(l);return r.slice(s,u+1)}function yf(t,e,n,r,o,s){const{x:l,y:u}=o,d=(b,_)=>{const[S,O]=s.invert(b);return[ss(l,S,_),ss(u,O,_)]},h=d([t,e],!0),p=d([n,r],!1),v=cs(l,[h[0],p[0]]),m=cs(u,[h[1],p[1]]);return[v,m]}function g5(t,e){const[n,r]=t,o=s=>s.getStep?s.getStep():0;return[e.map(n),e.map(r)+o(e)]}const kg=(t,e)=>{var n,r;const[o,s]=t,l=((r=(n=e.getOptions)===null||n===void 0?void 0:n.call(e))===null||r===void 0?void 0:r.domain)||[],u=l.indexOf(o),d=l.indexOf(s);if(u===-1||d===-1)return[e.map(o),e.map(s)];const h=l.length;return h<=1?[0,1]:[u/(h-1),d/(h-1)]};function v5(t,e,n){const{x:r,y:o}=e,[s,l]=t,u=g5(s,r),d=g5(l,o),h=[u[0],d[0]],p=[u[1],d[1]],[v,m]=n.map(h),[b,_]=n.map(p);return[v,m,b,_]}const S_=Math.abs,qi=Math.atan2,Vs=Math.cos,m5=Math.max,O_=Math.min,Pa=Math.sin,kc=Math.sqrt,ao=1e-12,Il=Math.PI,Rg=Il/2,A6=2*Il;function T6(t){return t>1?0:t<-1?Il:Math.acos(t)}function Dg(t){return t>=1?Rg:t<=-1?-Rg:Math.asin(t)}function y5(t){return t.innerRadius}function mh(t){return t.outerRadius}function b5(t){return t.startAngle}function Ng(t){return t.endAngle}function Fg(t){return t&&t.padAngle}function _5(t,e,n,r,o,s,l,u){var d=n-t,h=r-e,p=l-o,v=u-s,m=v*d-p*h;if(!(m*m<ao))return m=(p*(e-s)-v*(t-o))/m,[t+m*d,e+m*h]}function yh(t,e,n,r,o,s,l){var u=t-n,d=e-r,h=(l?s:-s)/kc(u*u+d*d),p=h*d,v=-h*u,m=t+p,b=e+v,_=n+p,S=r+v,O=(m+_)/2,E=(b+S)/2,A=_-m,M=S-b,L=A*A+M*M,I=o-s,R=m*S-_*b,N=(M<0?-1:1)*kc(m5(0,I*I*L-R*R)),Z=(R*M-A*N)/L,W=(-R*A-M*N)/L,it=(R*M+A*N)/L,tt=(-R*A+M*N)/L,pt=Z-O,K=W-E,lt=it-O,ft=tt-E;return pt*pt+K*K>lt*lt+ft*ft&&(Z=it,W=tt),{cx:Z,cy:W,x01:-p,y01:-v,x11:Z*(o/I-1),y11:W*(o/I-1)}}function Bg(){var t=y5,e=mh,n=ai(0),r=null,o=b5,s=Ng,l=Fg,u=null,d=dh(h);function h(){var p,v,m=+t.apply(this,arguments),b=+e.apply(this,arguments),_=o.apply(this,arguments)-Rg,S=s.apply(this,arguments)-Rg,O=S_(S-_),E=S>_;if(u||(u=p=d()),b<m&&(v=b,b=m,m=v),!(b>ao))u.moveTo(0,0);else if(O>A6-ao)u.moveTo(b*Vs(_),b*Pa(_)),u.arc(0,0,b,_,S,!E),m>ao&&(u.moveTo(m*Vs(S),m*Pa(S)),u.arc(0,0,m,S,_,E));else{var A=_,M=S,L=_,I=S,R=O,N=O,Z=l.apply(this,arguments)/2,W=Z>ao&&(r?+r.apply(this,arguments):kc(m*m+b*b)),it=O_(S_(b-m)/2,+n.apply(this,arguments)),tt=it,pt=it,K,lt;if(W>ao){var ft=Dg(W/m*Pa(Z)),vt=Dg(W/b*Pa(Z));(R-=ft*2)>ao?(ft*=E?1:-1,L+=ft,I-=ft):(R=0,L=I=(_+S)/2),(N-=vt*2)>ao?(vt*=E?1:-1,A+=vt,M-=vt):(N=0,A=M=(_+S)/2)}var It=b*Vs(A),_t=b*Pa(A),Lt=m*Vs(I),$t=m*Pa(I);if(it>ao){var he=b*Vs(M),le=b*Pa(M),Ee=m*Vs(L),Ue=m*Pa(L),Be;if(O<Il)if(Be=_5(It,_t,Ee,Ue,he,le,Lt,$t)){var Qe=It-Be[0],en=_t-Be[1],Ge=he-Be[0],cn=le-Be[1],wn=1/Pa(T6((Qe*Ge+en*cn)/(kc(Qe*Qe+en*en)*kc(Ge*Ge+cn*cn)))/2),Mn=kc(Be[0]*Be[0]+Be[1]*Be[1]);tt=O_(it,(m-Mn)/(wn-1)),pt=O_(it,(b-Mn)/(wn+1))}else tt=pt=0}N>ao?pt>ao?(K=yh(Ee,Ue,It,_t,b,pt,E),lt=yh(he,le,Lt,$t,b,pt,E),u.moveTo(K.cx+K.x01,K.cy+K.y01),pt<it?u.arc(K.cx,K.cy,pt,qi(K.y01,K.x01),qi(lt.y01,lt.x01),!E):(u.arc(K.cx,K.cy,pt,qi(K.y01,K.x01),qi(K.y11,K.x11),!E),u.arc(0,0,b,qi(K.cy+K.y11,K.cx+K.x11),qi(lt.cy+lt.y11,lt.cx+lt.x11),!E),u.arc(lt.cx,lt.cy,pt,qi(lt.y11,lt.x11),qi(lt.y01,lt.x01),!E))):(u.moveTo(It,_t),u.arc(0,0,b,A,M,!E)):u.moveTo(It,_t),!(m>ao)||!(R>ao)?u.lineTo(Lt,$t):tt>ao?(K=yh(Lt,$t,he,le,m,-tt,E),lt=yh(It,_t,Ee,Ue,m,-tt,E),u.lineTo(K.cx+K.x01,K.cy+K.y01),tt<it?u.arc(K.cx,K.cy,tt,qi(K.y01,K.x01),qi(lt.y01,lt.x01),!E):(u.arc(K.cx,K.cy,tt,qi(K.y01,K.x01),qi(K.y11,K.x11),!E),u.arc(0,0,m,qi(K.cy+K.y11,K.cx+K.x11),qi(lt.cy+lt.y11,lt.cx+lt.x11),E),u.arc(lt.cx,lt.cy,tt,qi(lt.y11,lt.x11),qi(lt.y01,lt.x01),!E))):u.arc(0,0,m,I,L,E)}if(u.closePath(),p)return u=null,p+""||null}return h.centroid=function(){var p=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,v=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Il/2;return[Vs(v)*p,Pa(v)*p]},h.innerRadius=function(p){return arguments.length?(t=typeof p=="function"?p:ai(+p),h):t},h.outerRadius=function(p){return arguments.length?(e=typeof p=="function"?p:ai(+p),h):e},h.cornerRadius=function(p){return arguments.length?(n=typeof p=="function"?p:ai(+p),h):n},h.padRadius=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:ai(+p),h):r},h.startAngle=function(p){return arguments.length?(o=typeof p=="function"?p:ai(+p),h):o},h.endAngle=function(p){return arguments.length?(s=typeof p=="function"?p:ai(+p),h):s},h.padAngle=function(p){return arguments.length?(l=typeof p=="function"?p:ai(+p),h):l},h.context=function(p){return arguments.length?(u=p==null?null:p,h):u},h}var bh=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function E_(t,e,n,r,o={}){const{inset:s=0,radius:l=0,insetLeft:u=s,insetTop:d=s,insetRight:h=s,insetBottom:p=s,radiusBottomLeft:v=l,radiusBottomRight:m=l,radiusTopLeft:b=l,radiusTopRight:_=l,minWidth:S=-1/0,maxWidth:O=1/0,minHeight:E=-1/0}=o,A=bh(o,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!Rr(r)&&!S1(r)){const Z=!!Yr(r),[W,,it]=Z?uh(e):e,[tt,pt]=W,[K,lt]=Oi(it,W),ft=K>0?tt:tt+K,vt=lt>0?pt:pt+lt,It=Math.abs(K),_t=Math.abs(lt),Lt=ft+u,$t=vt+d,he=It-(u+h),le=_t-(d+p),Ee=Z?ju(he,E,1/0):ju(he,S,O),Ue=Z?ju(le,S,O):ju(le,E,1/0),Be=Z?Lt:Lt-(Ee-he)/2,Qe=Z?$t-(Ue-le)/2:$t-(Ue-le);return Xn(t.createElement("rect",{})).style("x",Be).style("y",Qe).style("width",Ee).style("height",Ue).style("radius",[b,_,m,v]).call(jn,A).node()}const{y:M,y1:L}=n,I=r.getCenter(),R=Lc(r,e,[M,L]),N=Bg().cornerRadius(l).padAngle(s*Math.PI/180);return Xn(t.createElement("path",{})).style("d",N(R)).style("transform",`translate(${I[0]}, ${I[1]})`).style("radius",l).style("inset",s).call(jn,A).node()}const Rc=(t,e)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:o=!0,last:s=!0}=t,l=bh(t,["colorAttribute","opacityAttribute","first","last"]),{coordinate:u,document:d}=e;return(h,p,v)=>{const{color:m,radius:b=0}=v,_=bh(v,["color","radius"]),S=_.lineWidth||1,{stroke:O,radius:E=b,radiusTopLeft:A=E,radiusTopRight:M=E,radiusBottomRight:L=E,radiusBottomLeft:I=E,innerRadius:R=0,innerRadiusTopLeft:N=R,innerRadiusTopRight:Z=R,innerRadiusBottomRight:W=R,innerRadiusBottomLeft:it=R,lineWidth:tt=n==="stroke"||O?S:0,inset:pt=0,insetLeft:K=pt,insetRight:lt=pt,insetBottom:ft=pt,insetTop:vt=pt,minWidth:It,maxWidth:_t,minHeight:Lt}=l,$t=bh(l,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:he=m,opacity:le}=p,Ee=[o?A:N,o?M:Z,s?L:W,s?I:it],Ue=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Yr(u)&&Ue.push(Ue.shift());const Be=Object.assign(Object.assign({radius:E},Object.fromEntries(Ue.map((Qe,en)=>[Qe,Ee[en]]))),{inset:pt,insetLeft:K,insetRight:lt,insetBottom:ft,insetTop:vt,minWidth:It,maxWidth:_t,minHeight:Lt});return Xn(E_(d,h,p,u,Be)).call(jn,_).style("fill","transparent").style(n,he).style(vg(t),le).style("lineWidth",tt).style("stroke",O===void 0?he:O).call(jn,$t).node()}};Rc.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function bf(t,e){if(e(t))return!0;if(t.tagName==="g"){const{childNodes:n=[]}=t;for(const r of n)if(bf(r,e))return!0}return!1}const x5={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function S5(t,e){let n;return bf(t,r=>{var o;return r.tagName!=="g"&&((o=r.style)===null||o===void 0?void 0:o[e])!==void 0?(n=r.style[e],!0):!1}),n!=null?n:x5[e]}function _h(t,e,n,r){t.style[e]=n,r&&t.children.forEach(o=>_h(o,e,n,r))}function Ki(t){_h(t,"visibility","hidden",!0)}function kl(t){_h(t,"visibility","visible",!0)}var Rl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Ws(t){return Xn(t).selectAll(`.${ct}`).nodes().filter(e=>!e.__removed__)}function w_(t,e){return Dl(t,e).flatMap(({container:n})=>Ws(n))}function Dl(t,e){return e.filter(n=>n!==t&&n.options.parentKey===t.options.key)}function No(t){return Xn(t).select(`.${ue}`).node()}function _f(t){if(t.tagName==="g")return t.getRenderBounds();const e=t.getGeometryBounds(),n=new V.mN;return n.setFromTransformedAABB(e,t.getWorldTransform()),n}function Dc(t,e){const{offsetX:n,offsetY:r}=e,o=_f(t),{min:[s,l],max:[u,d]}=o,h=n<s||n>u,p=r<l||r>d;return h||p?null:[n-s,r-l]}function Nl(t,e){const{offsetX:n,offsetY:r}=e,[o,s,l,u]=jg(t);return[Math.min(l,Math.max(o,n))-o,Math.min(u,Math.max(s,r))-s]}function jg(t){const e=t.getRenderBounds(),{min:[n,r],max:[o,s]}=e;return[n,r,o,s]}function A_(t){return e=>e.__data__.color}function Gs(t){return e=>e.__data__.x}function Qo(t){const e=Array.isArray(t)?t:[t],n=new Map(e.flatMap(r=>Array.from(r.markState.keys()).map(s=>[xf(r.key,s.key),s.data])));return r=>{const{index:o,markKey:s,viewKey:l}=r.__data__;return n.get(xf(l,s))[o]}}const T_={selected:3,unselected:3,active:2,inactive:2,default:1},O5={selection:["selected","unselected"],highlight:["active","inactive"]},C_=(t,e,n)=>{bf(t,r=>{"setAttribute"in r&&typeof r.setAttribute=="function"&&r.setAttribute(e,n)})};function M_(t,e){return e.forEach(n=>{const r=n.__interactionStyle__;r?n.__interactionStyle__=Object.assign(Object.assign({},r),t):n.__interactionStyle__=t}),(n=(o,s)=>o,r=C_)=>ls(void 0,n,r)}function ls(t,e=(r,o)=>r,n=C_){const r="__states__",o="__ordinal__",s=b=>T_[b]||T_.default,l=b=>{var _;return(_=Object.entries(O5).find(([S,O])=>O.includes(b)))===null||_===void 0?void 0:_[0]},u=b=>{var _;const{[r]:S=[],[o]:O={}}=b,E=[...S].sort((L,I)=>s(I)-s(L)),A=new Map;for(const L of E){const I=((_=t!=null?t:b.__interactionStyle__)===null||_===void 0?void 0:_[L])||{};for(const[R,N]of Object.entries(I))A.has(R)||A.set(R,N)}const M=Object.assign({},O);for(const[L,I]of A.entries())M[L]=I;if(Object.keys(M).length!==0){for(const[L,I]of Object.entries(M)){const R=S5(b,L),N=e(I,b);n(b,L,N),L in O||(O[L]=R)}b[o]=O}},d=b=>{b[r]||(b[r]=[])};return{setState:(b,..._)=>{d(b),b[r]=[..._],u(b)},updateState:(b,..._)=>{d(b);const S=b[r],O=new Set(_.map(A=>l(A)).filter(A=>A!==void 0)),E=S.filter(A=>!O.has(l(A)));b[r]=[...E,..._],u(b)},removeState:(b,..._)=>{d(b);for(const S of _){const O=b[r].indexOf(S);O!==-1&&b[r].splice(O,1)}u(b)},hasState:(b,_)=>(d(b),b[r].indexOf(_)!==-1)}}function E5(t){return t===void 0?!0:typeof t!="object"?!1:Object.keys(t).length===0}function xf(t,e){return`${t},${e}`}function Nc(t,e){const r=(Array.isArray(t)?t:[t]).flatMap(s=>s.marks.map(l=>[xf(s.key,l.key),l.state])),o={};for(const s of e){const[l,u]=Array.isArray(s)?s:[s,{}];o[l]=r.reduce((d,h)=>{const[p,v={}]=h,m=E5(v[l])?u:v[l];for(const[b,_]of Object.entries(m)){const S=d[b],O=(E,A,M,L)=>{const I=xf(L.__data__.viewKey,L.__data__.markKey);return p!==I?S==null?void 0:S(E,A,M,L):typeof _!="function"?_:_(E,A,M,L)};d[b]=O}return d},{})}return o}function Fl(t,e){const n=new Map(t.map((o,s)=>[o,s])),r=e?t.map(e):t;return(o,s)=>{if(typeof o!="function")return o;const l=n.get(s),u=e?e(s):s;return o(u,l,r,s)}}function zg(t){var{link:e=!1,valueof:n=(p,v)=>p,coordinate:r}=t,o=Rl(t,["link","valueof","coordinate"]);const s="element-link";if(!e)return[()=>{},()=>{}];const l=p=>p.__data__.points,u=(p,v)=>{const[,m,b]=p,[_,,,S]=v;return[m,_,S,b]};return[p=>{var v;if(p.length<=1)return;const m=va(p,(b,_)=>{const{x:S}=b.__data__,{x:O}=_.__data__;return S-O});for(let b=1;b<m.length;b++){const _=ga(),S=m[b-1],O=m[b],[E,A,M,L]=u(l(S),l(O));_.moveTo(...E),_.lineTo(...A),_.lineTo(...M),_.lineTo(...L),_.closePath();const I=Ta(o,W=>n(W,S)),{fill:R=S.getAttribute("fill")}=I,N=Rl(I,["fill"]),Z=new V.y$({className:s,style:Object.assign({d:_.toString(),fill:R,zIndex:-2},N)});(v=S.link)===null||v===void 0||v.remove(),S.parentNode.appendChild(Z),S.link=Z}},p=>{var v;(v=p.link)===null||v===void 0||v.remove(),p.link=null}]}function Ug(t,e,n){const r=o=>{const{transform:s}=t.style;return s?`${s} ${o}`:o};if(Rr(n)){const{points:o}=t.__data__,[s,l]=Yr(n)?uh(o):o,u=n.getCenter(),d=Oi(s,u),h=Oi(l,u),p=Xo(d),v=n_(d,h),m=p+v/2,b=e*Math.cos(m),_=e*Math.sin(m);return r(`translate(${b}, ${_})`)}return Yr(n)?r(`translate(${e}, 0)`):r(`translate(0, ${-e})`)}function L_(t){var{document:e,background:n,scale:r,coordinate:o,valueof:s}=t,l=Rl(t,["document","background","scale","coordinate","valueof"]);const u="element-background";if(!n)return[()=>{},()=>{}];const d=(E,A,M)=>{const L=E.invert(A),I=A+E.getBandWidth(L)/2,R=E.getStep(L)/2,N=R*M;return[I-R+N,I+R-N]},h=(E,A)=>{const{x:M}=r;if(!La(M))return[0,1];const{__data__:L}=E,{x:I}=L,[R,N]=d(M,I,A);return[R,N]},p=(E,A)=>{const{y:M}=r;if(!La(M))return[0,1];const{__data__:L}=E,{y:I}=L,[R,N]=d(M,I,A);return[R,N]},v=(E,A)=>{const{padding:M}=A,[L,I]=h(E,M),[R,N]=p(E,M),Z=[[L,R],[I,R],[I,N],[L,N]].map(pt=>o.map(pt)),{__data__:W}=E,{y:it,y1:tt}=W;return E_(e,Z,{y:it,y1:tt},o,A)},m=(E,A)=>{const{transform:M="scale(1.2, 1.2)",transformOrigin:L="center center",stroke:I=""}=A,R=Rl(A,["transform","transformOrigin","stroke"]),N=Object.assign({transform:M,transformOrigin:L,stroke:I},R),Z=E.cloneNode(!0);for(const[W,it]of Object.entries(N))Z.style[W]=it;return Z},b=()=>{const{x:E,y:A}=r;return[E,A].some(La)};return[E=>{E.background&&E.background.remove();const A=Ta(l,pt=>s(pt,E)),{fill:M="#CCD6EC",fillOpacity:L=.3,zIndex:I=-2,padding:R=.001,lineWidth:N=0}=A,Z=Rl(A,["fill","fillOpacity","zIndex","padding","lineWidth"]),W=Object.assign(Object.assign({},Z),{fill:M,fillOpacity:L,zIndex:I,padding:R,lineWidth:N}),tt=(b()?v:m)(E,W);tt.className=u,E.parentNode.parentNode.appendChild(tt),E.background=tt},E=>{var A;(A=E.background)===null||A===void 0||A.remove(),E.background=null},E=>E.className===u]}function ma(t,e){const r=t.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(t.cursor=r.style.cursor,r.style.cursor=e)}function Zg(t){ma(t,t.cursor)}function xh(t,e,n){return t.find(r=>Object.entries(e).every(([o,s])=>n(r)[o]===s))}function Sh(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function Sf(t,e=!1){const n=mf(t,r=>!!r).map((r,o)=>[o===0?"M":"L",...r]);return e&&n.push(["Z"]),n}function P_(t){return t.querySelectorAll(".element")}function w5(t,e,n=0){const r=[["M",...e[1]]],o=Sh(t,e[1]),s=Sh(t,e[0]);return o===0?r.push(["L",...e[3]],["A",s,s,0,n,1,...e[0]],["Z"]):r.push(["A",o,o,0,n,0,...e[2]],["L",...e[3]],["A",s,s,0,n,1,...e[0]],["Z"]),r}function us(t,e){if(e(t))return t;let n=t.parent;for(;n&&!e(n);)n=n.parent;return n}const Oh=["interval","point","density"];function I_({elementsof:t,root:e,coordinate:n,scale:r,validFindByXMarks:o=Oh}){var s,l;let u=t(e);const d=p=>o.includes(p.markType);if(u.find(d)){u=u.filter(d);const p=r.x,v=r.series,m=(l=(s=p==null?void 0:p.getBandWidth)===null||s===void 0?void 0:s.call(p))!==null&&l!==void 0?l:0,b=v?_=>{var S,O;const E=Math.round(1/((S=v.valueBandWidth)!==null&&S!==void 0?S:1));return _.__data__.x+((O=_.__data__.series)!==null&&O!==void 0?O:0)*m+m/(E*2)}:_=>_.__data__.x+m/2;return u.sort((_,S)=>b(_)-b(S)),_=>{const S=Dc(e,_);if(!S)return;const[O]=n.invert(S),E=os(b).center,A=E(u,O);return u[A]}}return p=>{const{target:v}=p;return us(v,m=>m.classList?m.classList.includes("element"):!1)}}function k_(t){const s=.01/Math.max(t,1e-4);return Math.max(.1,Math.min(100,s))}function Hg(t){return t===!1||t===null||t===void 0}function R_(t){var e,n;const r=[],o=[],s=[],l=t.markState;if(l){for(const[u,d]of l.entries())if(d!=null&&d.channels){const h={};for(const m of d.channels)if((m==null?void 0:m.name)==="x"&&((e=m.values)===null||e===void 0?void 0:e.length)>0){let b=[];for(const _ of m.values)_!=null&&_.value&&(b=b.concat(_.value),r.push(_.value));h.x=b}else if(m&&(m.name==="y"||m.name.startsWith("y"))&&((n=m.values)===null||n===void 0?void 0:n.length)>0){const b=m.name,_=[];for(const S of m.values)if(S!=null&&S.value){const O=S.value;_.push(O),(b==="y"||b==="y1")&&(Array.isArray(O)?o.push(O.flat()):o.push([O]))}h[b]=_}const p=h.x||[],v=h.y||[];p.length>0&&v.length>0&&s.push({markKey:u.key||`mark_${s.length}`,channelData:h})}}return{xChannelValues:r.flat(),yChannelValues:o.flat(),markDataPairs:s}}function D_(t,e){return e.some(n=>{const{scale:r}=n,o=r==null?void 0:r[t];return!!(o!=null&&o.independent)})}function A5(t,e,n,r,o){var s,l,u,d;const h={x:e.x||n.getOptions().domain||[],y:e.y||r.getOptions().domain||[]},p=o||N_(t),{hasIndependentX:v,hasIndependentY:m}=p;if(v||m){let b=1,_=1;for(const[S,O]of t.markState.entries())if(O!=null&&O.channels){if(v){const E=O.channels.find(A=>A.name==="x");if(!((l=(s=S==null?void 0:S.scale)===null||s===void 0?void 0:s.x)===null||l===void 0)&&l.independent){const A=`x${b}`;h[A]=E.scale.domain,b++}}if(m){const E=O.channels.find(A=>A.name==="y");if(!((d=(u=S==null?void 0:S.scale)===null||u===void 0?void 0:u.y)===null||d===void 0)&&d.independent){const A=`y${_}`;h[A]=E.scale.domain,_++}}}}return h}function N_(t){var e,n,r,o;const s=Array.from(t.markState.keys()),l=D_("x",s),u=D_("y",s),d=[],h=[],p=[],v=[],m=new Map,b=new Map;let _=1,S=1;for(const[O]of t.markState.entries()){const E=O.key;!((n=(e=O==null?void 0:O.scale)===null||e===void 0?void 0:e.x)===null||n===void 0)&&n.independent?(h.push(E),m.set(E,`x${_++}`)):(d.push(E),m.set(E,"x")),!((o=(r=O==null?void 0:O.scale)===null||r===void 0?void 0:r.y)===null||o===void 0)&&o.independent?(v.push(E),b.set(E,`y${S++}`)):(p.push(E),b.set(E,"y"))}return{hasIndependentX:l,hasIndependentY:u,marksWithSharedX:d,marksWithIndependentX:h,marksWithSharedY:p,marksWithIndependentY:v,markToXScaleMap:m,markToYScaleMap:b}}function T5(t){return us(t,e=>e.className==="component")}function C5(t){return us(t,e=>e.className==="element")}function F_(t){return us(t,e=>e.className==="label")}function Qi(t,e,n,r=o=>!0){return o=>{if(!r(o))return;n.emit(`plot:${t}`,o);const{target:s}=o;if(!s)return;const{className:l}=s;if(l==="plot")return;const u=C5(s),d=T5(s),h=F_(s),p=u||d||h;if(!p)return;const{className:v,markType:m}=p,b=Object.assign(Object.assign({},o),{nativeEvent:!0});v==="element"?(b.data={data:i0(p,e)},n.emit(`element:${t}`,b),n.emit(`${m}:${t}`,b)):v==="label"?(b.data={data:p.attributes.datum},n.emit(`label:${t}`,b),n.emit(`${l}:${t}`,b)):(n.emit(`component:${t}`,b),n.emit(`${l}:${t}`,b))}}function Vg(){return(t,e,n)=>{const{container:r,view:o}=t,s=Qi(Cr.CLICK,o,n,N=>N.detail===1),l=Qi(Cr.DBLCLICK,o,n,N=>N.detail===2),u=Qi(Cr.POINTER_TAP,o,n),d=Qi(Cr.POINTER_DOWN,o,n),h=Qi(Cr.POINTER_UP,o,n),p=Qi(Cr.POINTER_OVER,o,n),v=Qi(Cr.POINTER_OUT,o,n),m=Qi(Cr.POINTER_MOVE,o,n),b=Qi(Cr.POINTER_ENTER,o,n),_=Qi(Cr.POINTER_LEAVE,o,n),S=Qi(Cr.POINTER_UPOUTSIDE,o,n),O=Qi(Cr.DRAG_START,o,n),E=Qi(Cr.DRAG,o,n),A=Qi(Cr.DRAG_END,o,n),M=Qi(Cr.DRAG_ENTER,o,n),L=Qi(Cr.DRAG_LEAVE,o,n),I=Qi(Cr.DRAG_OVER,o,n),R=Qi(Cr.DROP,o,n);return r.addEventListener("click",s),r.addEventListener("click",l),r.addEventListener("pointertap",u),r.addEventListener("pointerdown",d),r.addEventListener("pointerup",h),r.addEventListener("pointerover",p),r.addEventListener("pointerout",v),r.addEventListener("pointermove",m),r.addEventListener("pointerenter",b),r.addEventListener("pointerleave",_),r.addEventListener("pointerupoutside",S),r.addEventListener("dragstart",O),r.addEventListener("drag",E),r.addEventListener("dragend",A),r.addEventListener("dragenter",M),r.addEventListener("dragleave",L),r.addEventListener("dragover",I),r.addEventListener("drop",R),()=>{r.removeEventListener("click",s),r.removeEventListener("click",l),r.removeEventListener("pointertap",u),r.removeEventListener("pointerdown",d),r.removeEventListener("pointerup",h),r.removeEventListener("pointerover",p),r.removeEventListener("pointerout",v),r.removeEventListener("pointermove",m),r.removeEventListener("pointerenter",b),r.removeEventListener("pointerleave",_),r.removeEventListener("pointerupoutside",S),r.removeEventListener("dragstart",O),r.removeEventListener("drag",E),r.removeEventListener("dragend",A),r.removeEventListener("dragenter",M),r.removeEventListener("dragleave",L),r.removeEventListener("dragover",I),r.removeEventListener("drop",R)}}}Vg.props={reapplyWhenUpdate:!0};function B_(){return{"component.axisRadar":vb,"component.axisLinear":Bs,"component.axisArc":pb,"component.legendContinuousBlock":qb,"component.legendContinuousBlockSize":Kb,"component.legendContinuousSize":dg,"interaction.event":Vg,"composition.mark":Qb,"composition.view":e_,"shape.label.label":l5,"shape.break":f5}}var j_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function qr(t,e){const n=Object.assign(Object.assign({},B_()),e),r=s=>{if(typeof s!="string")return s;const l=`${t}.${s}`;return n[l]||As(`Unknown Component: ${l}`)};return[(s,l)=>{const{type:u}=s,d=j_(s,["type"]);u||As("Plot type is required!");const h=r(u);return h==null?void 0:h(d,l)},r]}function z_(t){const{canvas:e,group:n}=t;return(e==null?void 0:e.document)||(n==null?void 0:n.ownerDocument)||As("Cannot find library document")}var Wg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function M5(t,e,n){const[r]=qr("coordinate",n),{innerHeight:o,innerWidth:s,insetLeft:l,insetTop:u,insetRight:d,insetBottom:h}=t,{coordinates:p=[]}=e,v=L5(p),m=v[0].type==="cartesian3D",b=Object.assign(Object.assign({},t),{x:l,y:u,width:s-l-d,height:o-h-u,transformations:v.flatMap(r)});return m?new x1.Coordinate3D(b):new x1.Coordinate(b)}function U_(t,e){const{coordinate:n={},coordinates:r}=t,o=Wg(t,["coordinate","coordinates"]);if(r)return t;const{type:s,transform:l=[]}=n,u=Wg(n,["type","transform"]);if(!s)return Object.assign(Object.assign({},o),{coordinates:l});const[,d]=qr("coordinate",e),{transform:h=!1}=d(s).props||{};if(h)throw new Error(`Unknown coordinate: ${s}.`);return Object.assign(Object.assign({},o),{coordinates:[Object.assign({type:s},u),...l]})}function ya(t,e){return t.filter(n=>n.type===e)}function fs(t){return ya(t,"polar").length>0}function C6(t){return ya(t,"helix").length>0}function Fc(t){return ya(t,"transpose").length%2===1}function Z_(t){return ya(t,"parallel").length>0}function Gg(t){return ya(t,"theta").length>0}function $g(t){return ya(t,"reflect").length>0}function Bc(t){return ya(t,"radial").length>0}function Jo(t){return ya(t,"radar").length>0}function Yg(t){return ya(t,"reflectY").length>0}function L5(t){return t.find(e=>e.type==="cartesian"||e.type==="cartesian3D")?t:[...t,{type:"cartesian"}]}function cr(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}var H_=cr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),P5=cr("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),M6=cr("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Eh=cr("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Of=cr("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),V_=cr("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),I5=cr("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),k5=cr("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),jc=cr("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),W_=cr("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),R5=cr("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function wh(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Xg(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Bl(){}var zc=.7,jl=1/zc,Ef="\\s*([+-]?\\d+)\\s*",Ah="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ds="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",L6=/^#([0-9a-f]{3,8})$/,P6=new RegExp("^rgb\\(".concat(Ef,",").concat(Ef,",").concat(Ef,"\\)$")),I6=new RegExp("^rgb\\(".concat(ds,",").concat(ds,",").concat(ds,"\\)$")),k6=new RegExp("^rgba\\(".concat(Ef,",").concat(Ef,",").concat(Ef,",").concat(Ah,"\\)$")),G_=new RegExp("^rgba\\(".concat(ds,",").concat(ds,",").concat(ds,",").concat(Ah,"\\)$")),D5=new RegExp("^hsl\\(".concat(Ah,",").concat(ds,",").concat(ds,"\\)$")),R6=new RegExp("^hsla\\(".concat(Ah,",").concat(ds,",").concat(ds,",").concat(Ah,"\\)$")),qg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wh(Bl,q_,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:$_,formatHex:$_,formatHex8:D6,formatHsl:Y_,formatRgb:X_,toString:X_});function $_(){return this.rgb().formatHex()}function D6(){return this.rgb().formatHex8()}function Y_(){return Jg(this).formatHsl()}function X_(){return this.rgb().formatRgb()}function q_(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=L6.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Kg(e):n===3?new po(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Th(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Th(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=P6.exec(t))?new po(e[1],e[2],e[3],1):(e=I6.exec(t))?new po(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=k6.exec(t))?Th(e[1],e[2],e[3],e[4]):(e=G_.exec(t))?Th(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=D5.exec(t))?B5(e[1],e[2]/100,e[3]/100,1):(e=R6.exec(t))?B5(e[1],e[2]/100,e[3]/100,e[4]):qg.hasOwnProperty(t)?Kg(qg[t]):t==="transparent"?new po(NaN,NaN,NaN,0):null}function Kg(t){return new po(t>>16&255,t>>8&255,t&255,1)}function Th(t,e,n,r){return r<=0&&(t=e=n=NaN),new po(t,e,n,r)}function N5(t){return t instanceof Bl||(t=q_(t)),t?(t=t.rgb(),new po(t.r,t.g,t.b,t.opacity)):new po}function Uc(t,e,n,r){return arguments.length===1?N5(t):new po(t,e,n,r==null?1:r)}function po(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}wh(po,Uc,Xg(Bl,{brighter:function(e){return e=e==null?jl:Math.pow(jl,e),new po(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?zc:Math.pow(zc,e),new po(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new po(zl(this.r),zl(this.g),zl(this.b),ta(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:F5,formatHex:F5,formatHex8:Qg,formatRgb:Ch,toString:Ch}));function F5(){return"#".concat($s(this.r)).concat($s(this.g)).concat($s(this.b))}function Qg(){return"#".concat($s(this.r)).concat($s(this.g)).concat($s(this.b)).concat($s((isNaN(this.opacity)?1:this.opacity)*255))}function Ch(){var t=ta(this.opacity);return"".concat(t===1?"rgb(":"rgba(").concat(zl(this.r),", ").concat(zl(this.g),", ").concat(zl(this.b)).concat(t===1?")":", ".concat(t,")"))}function ta(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function zl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $s(t){return t=zl(t),(t<16?"0":"")+t.toString(16)}function B5(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new so(t,e,n,r)}function Jg(t){if(t instanceof so)return new so(t.h,t.s,t.l,t.opacity);if(t instanceof Bl||(t=q_(t)),!t)return new so;if(t instanceof so)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),s=Math.max(e,n,r),l=NaN,u=s-o,d=(s+o)/2;return u?(e===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-e)/u+2:l=(e-n)/u+4,u/=d<.5?s+o:2-s-o,l*=60):u=d>0&&d<1?0:l,new so(l,u,d,t.opacity)}function K_(t,e,n,r){return arguments.length===1?Jg(t):new so(t,e,n,r==null?1:r)}function so(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}wh(so,K_,Xg(Bl,{brighter:function(e){return e=e==null?jl:Math.pow(jl,e),new so(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?zc:Math.pow(zc,e),new so(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new po(ev(e>=240?e-240:e+120,s,o),ev(e,s,o),ev(e<120?e+240:e-120,s,o),this.opacity)},clamp:function(){return new so(tv(this.h),Zc(this.s),Zc(this.l),ta(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=ta(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(tv(this.h),", ").concat(Zc(this.s)*100,"%, ").concat(Zc(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function tv(t){return t=(t||0)%360,t<0?t+360:t}function Zc(t){return Math.max(0,Math.min(1,t||0))}function ev(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Q_(t,e,n,r,o){var s=t*t,l=s*t;return((1-3*t+3*s-l)*e+(4-6*s+3*l)*n+(1+3*t+3*s-3*l)*r+l*o)/6}function Ul(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[r],s=t[r+1],l=r>0?t[r-1]:2*o-s,u=r<e-1?t[r+2]:2*s-o;return Q_((n-r/e)*e,l,o,s,u)}}function j5(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),o=t[(r+e-1)%e],s=t[r%e],l=t[(r+1)%e],u=t[(r+2)%e];return Q_((n-r/e)*e,o,s,l,u)}}var nv=function(t){return function(){return t}};function z5(t,e){return function(n){return t+n*e}}function N6(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function F6(t,e){var n=e-t;return n?z5(t,n>180||n<-180?n-360*Math.round(n/360):n):nv(isNaN(t)?e:t)}function B6(t){return(t=+t)==1?wf:function(e,n){return n-e?N6(e,n,t):nv(isNaN(e)?n:e)}}function wf(t,e){var n=e-t;return n?z5(t,n):nv(isNaN(t)?e:t)}var m9=function t(e){var n=B6(e);function r(o,s){var l=n((o=Uc(o)).r,(s=Uc(s)).r),u=n(o.g,s.g),d=n(o.b,s.b),h=wf(o.opacity,s.opacity);return function(p){return o.r=l(p),o.g=u(p),o.b=d(p),o.opacity=h(p),o+""}}return r.gamma=t,r}(1);function U5(t){return function(e){var n=e.length,r=new Array(n),o=new Array(n),s=new Array(n),l,u;for(l=0;l<n;++l)u=Uc(e[l]),r[l]=u.r||0,o[l]=u.g||0,s[l]=u.b||0;return r=t(r),o=t(o),s=t(s),u.opacity=1,function(d){return u.r=r(d),u.g=o(d),u.b=s(d),u+""}}}var J_=U5(Ul),Z5=U5(j5),Jr=t=>J_(t[t.length-1]),Ys=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(cr),tx=Jr(Ys),Af=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(cr),H5=Jr(Af),ex=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(cr),Zl=Jr(ex),nx=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(cr),V5=Jr(nx),W5=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(cr),j6=Jr(W5),G5=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(cr),z6=Jr(G5),$5=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(cr),U6=Jr($5),Y5=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(cr),rx=Jr(Y5),rv=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(cr),Z6=Jr(rv),Mh=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(cr),Tf=Jr(Mh),X5=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(cr),iv=Jr(X5),Hl=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(cr),H6=Jr(Hl),Lh=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(cr),ov=Jr(Lh),Vl=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(cr),q5=Jr(Vl),av=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(cr),Ji=Jr(av),ix=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(cr),K5=Jr(ix),Or=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(cr),Q5=Jr(Or),Wl=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(cr),Cf=Jr(Wl),ox=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(cr),J5=Jr(ox),ax=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(cr),tT=Jr(ax),sx=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(cr),cx=Jr(sx),sv=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(cr),eT=Jr(sv),lx=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(cr),nT=Jr(lx),cv=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(cr),rT=Jr(cv),lv=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(cr),iT=Jr(lv),ux=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(cr),oT=Jr(ux),fx=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(cr),aT=Jr(fx);function sT(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}function Ph(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ih(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Gl(){}var Hc=.7,$l=1/Hc,Vc="\\s*([+-]?\\d+)\\s*",Mf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ia="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cT=/^#([0-9a-f]{3,8})$/,lT=new RegExp("^rgb\\(".concat(Vc,",").concat(Vc,",").concat(Vc,"\\)$")),uT=new RegExp("^rgb\\(".concat(Ia,",").concat(Ia,",").concat(Ia,"\\)$")),fT=new RegExp("^rgba\\(".concat(Vc,",").concat(Vc,",").concat(Vc,",").concat(Mf,"\\)$")),dx=new RegExp("^rgba\\(".concat(Ia,",").concat(Ia,",").concat(Ia,",").concat(Mf,"\\)$")),dT=new RegExp("^hsl\\(".concat(Mf,",").concat(Ia,",").concat(Ia,"\\)$")),hT=new RegExp("^hsla\\(".concat(Mf,",").concat(Ia,",").concat(Ia,",").concat(Mf,"\\)$")),hx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ph(Gl,uv,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:px,formatHex:px,formatHex8:pT,formatHsl:gT,formatRgb:gx,toString:gx});function px(){return this.rgb().formatHex()}function pT(){return this.rgb().formatHex8()}function gT(){return _x(this).formatHsl()}function gx(){return this.rgb().formatRgb()}function uv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=cT.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?fv(e):n===3?new co(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?kh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?kh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lT.exec(t))?new co(e[1],e[2],e[3],1):(e=uT.exec(t))?new co(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=fT.exec(t))?kh(e[1],e[2],e[3],e[4]):(e=dx.exec(t))?kh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dT.exec(t))?dv(e[1],e[2]/100,e[3]/100,1):(e=hT.exec(t))?dv(e[1],e[2]/100,e[3]/100,e[4]):hx.hasOwnProperty(t)?fv(hx[t]):t==="transparent"?new co(NaN,NaN,NaN,0):null}function fv(t){return new co(t>>16&255,t>>8&255,t&255,1)}function kh(t,e,n,r){return r<=0&&(t=e=n=NaN),new co(t,e,n,r)}function vx(t){return t instanceof Gl||(t=uv(t)),t?(t=t.rgb(),new co(t.r,t.g,t.b,t.opacity)):new co}function mx(t,e,n,r){return arguments.length===1?vx(t):new co(t,e,n,r==null?1:r)}function co(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ph(co,mx,Ih(Gl,{brighter:function(e){return e=e==null?$l:Math.pow($l,e),new co(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Hc:Math.pow(Hc,e),new co(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new co(Wc(this.r),Wc(this.g),Wc(this.b),Rh(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yx,formatHex:yx,formatHex8:vT,formatRgb:bx,toString:bx}));function yx(){return"#".concat(Gc(this.r)).concat(Gc(this.g)).concat(Gc(this.b))}function vT(){return"#".concat(Gc(this.r)).concat(Gc(this.g)).concat(Gc(this.b)).concat(Gc((isNaN(this.opacity)?1:this.opacity)*255))}function bx(){var t=Rh(this.opacity);return"".concat(t===1?"rgb(":"rgba(").concat(Wc(this.r),", ").concat(Wc(this.g),", ").concat(Wc(this.b)).concat(t===1?")":", ".concat(t,")"))}function Rh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gc(t){return t=Wc(t),(t<16?"0":"")+t.toString(16)}function dv(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ba(t,e,n,r)}function _x(t){if(t instanceof ba)return new ba(t.h,t.s,t.l,t.opacity);if(t instanceof Gl||(t=uv(t)),!t)return new ba;if(t instanceof ba)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),s=Math.max(e,n,r),l=NaN,u=s-o,d=(s+o)/2;return u?(e===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-e)/u+2:l=(e-n)/u+4,u/=d<.5?s+o:2-s-o,l*=60):u=d>0&&d<1?0:l,new ba(l,u,d,t.opacity)}function mT(t,e,n,r){return arguments.length===1?_x(t):new ba(t,e,n,r==null?1:r)}function ba(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ph(ba,mT,Ih(Gl,{brighter:function(e){return e=e==null?$l:Math.pow($l,e),new ba(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Hc:Math.pow(Hc,e),new ba(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new co(hv(e>=240?e-240:e+120,s,o),hv(e,s,o),hv(e<120?e+240:e-120,s,o),this.opacity)},clamp:function(){return new ba(xx(this.h),Dh(this.s),Dh(this.l),Rh(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Rh(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(xx(this.h),", ").concat(Dh(this.s)*100,"%, ").concat(Dh(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function xx(t){return t=(t||0)%360,t<0?t+360:t}function Dh(t){return Math.max(0,Math.min(1,t||0))}function hv(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var yT=Math.PI/180,bT=180/Math.PI,pv=-.14861,Nh=1.78277,Fh=-.29227,hs=-.90649,Yl=1.97294,Sx=Yl*hs,Ox=Yl*Nh,Ex=Nh*Fh-hs*pv;function _T(t){if(t instanceof _a)return new _a(t.h,t.s,t.l,t.opacity);t instanceof co||(t=vx(t));var e=t.r/255,n=t.g/255,r=t.b/255,o=(Ex*r+Sx*e-Ox*n)/(Ex+Sx-Ox),s=r-o,l=(Yl*(n-o)-Fh*s)/hs,u=Math.sqrt(l*l+s*s)/(Yl*o*(1-o)),d=u?Math.atan2(l,s)*bT-120:NaN;return new _a(d<0?d+360:d,u,o,t.opacity)}function ea(t,e,n,r){return arguments.length===1?_T(t):new _a(t,e,n,r==null?1:r)}function _a(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ph(_a,ea,Ih(Gl,{brighter:function(e){return e=e==null?$l:Math.pow($l,e),new _a(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Hc:Math.pow(Hc,e),new _a(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*yT,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),o=Math.cos(e),s=Math.sin(e);return new co(255*(n+r*(pv*o+Nh*s)),255*(n+r*(Fh*o+hs*s)),255*(n+r*(Yl*o)),this.opacity)}}));var Lf=Math.PI/180,Pf=180/Math.PI,Ax=-.14861,Bh=1.78277,If=-.29227,jh=-.90649,kf=1.97294,gv=kf*jh,Tx=kf*Bh,xT=Bh*If-jh*Ax;function zh(t){if(t instanceof Xs)return new Xs(t.h,t.s,t.l,t.opacity);t instanceof po||(t=N5(t));var e=t.r/255,n=t.g/255,r=t.b/255,o=(xT*r+gv*e-Tx*n)/(xT+gv-Tx),s=r-o,l=(kf*(n-o)-If*s)/jh,u=Math.sqrt(l*l+s*s)/(kf*o*(1-o)),d=u?Math.atan2(l,s)*Pf-120:NaN;return new Xs(d<0?d+360:d,u,o,t.opacity)}function $c(t,e,n,r){return arguments.length===1?zh(t):new Xs(t,e,n,r==null?1:r)}function Xs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}wh(Xs,$c,Xg(Bl,{brighter:function(e){return e=e==null?jl:Math.pow(jl,e),new Xs(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?zc:Math.pow(zc,e),new Xs(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Lf,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),o=Math.cos(e),s=Math.sin(e);return new po(255*(n+r*(Ax*o+Bh*s)),255*(n+r*(If*o+jh*s)),255*(n+r*(kf*o)),this.opacity)}}));function Cx(t){return function e(n){n=+n;function r(o,s){var l=t((o=$c(o)).h,(s=$c(s)).h),u=wf(o.s,s.s),d=wf(o.l,s.l),h=wf(o.opacity,s.opacity);return function(p){return o.h=l(p),o.s=u(p),o.l=d(Math.pow(p,n)),o.opacity=h(p),o+""}}return r.gamma=e,r}(1)}var V6=Cx(F6),Uh=Cx(wf),W6=Uh(ea(300,.5,0),ea(-240,.5,1)),ST=Uh(ea(-100,.75,.35),ea(80,1.5,.8)),Zh=Uh(ea(260,.75,.35),ea(80,1.5,.8)),Rf=ea();function OT(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Rf.h=360*t-100,Rf.s=1.5-1.5*e,Rf.l=.8-.9*e,Rf+""}var Hh=mx(),Mx=Math.PI/3,G6=Math.PI*2/3;function Lx(t){var e;return t=(.5-t)*Math.PI,Hh.r=255*(e=Math.sin(t))*e,Hh.g=255*(e=Math.sin(t+Mx))*e,Hh.b=255*(e=Math.sin(t+G6))*e,Hh+""}function vv(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Vh(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var ET=Vh(cr("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),wT=Vh(cr("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),AT=Vh(cr("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),TT=Vh(cr("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function CT(t,e,n,r,o,s){const{guide:l={}}=n,u=NT(t,e,n);if(typeof u!="string")return n;const d=FT(u,t,e,n),h=DT(u,d,n);return Object.assign(Object.assign(Object.assign({},n),BT(u,t,e,n,r)),{domain:h,range:Xl(u,t,e,n,h,o,s),expectedDomain:d,guide:l,name:t,type:u})}function MT(t,e){const n={};for(const r of t){const{values:o,name:s}=r,l=e[s];for(const u of o){const{name:d,value:h}=u;n[d]=h.map(p=>l.map(p))}}return n}function LT(t,e){const n=Array.from(t.values()).flatMap(o=>o.channels);_d(n,o=>o.map(s=>e.get(s.scale.uid)),o=>o.name).filter(([,o])=>o.some(s=>typeof s.getOptions().groupTransform=="function")&&o.every(s=>s.getTicks)).map(o=>o[1]).forEach(o=>{const s=o.map(l=>l.getOptions().groupTransform)[0];s(o)})}function PT(t,e){var n;const{components:r=[]}=e,o=["scale","encode","axis","legend","data","transform"],s=Array.from(new Set(t.flatMap(u=>u.channels.map(d=>d.scale)))),l=new Map(s.map(u=>[u.name,u]));for(const u of r){const d=RT(u);for(const h of d){const p=l.get(h),v=((n=u.scale)===null||n===void 0?void 0:n[h])||{},{independent:m=!1}=v;if(p&&!m){const{guide:b}=p,_=typeof b=="boolean"?{}:b;p.guide=Je({},_,u),Object.assign(p,v)}else{const b=Object.assign(Object.assign({},v),{expectedDomain:v.domain,name:h,guide:Jd(u,o)});s.push(b)}}}return s}function IT(t){if(!t||!Array.isArray(t))return[pc,pc];let e,n;return[s=>{var l;e=s.map.bind(s),n=(l=s.invert)===null||l===void 0?void 0:l.bind(s);const u=t.filter(([m])=>typeof m=="function"),d=t.filter(([m])=>typeof m!="function"),h=new Map(d);if(s.map=m=>{for(const[b,_]of u)if(b(m))return _;return h.has(m)?h.get(m):e(m)},!n)return s;const p=new Map(d.map(([m,b])=>[b,m])),v=new Map(u.map(([m,b])=>[b,m]));return s.invert=m=>v.has(m)?m:p.has(m)?p.get(m):n(m),s},s=>(e!==null&&(s.map=e),n!==null&&(s.invert=n),s)]}function mv(t,e){const n=Object.keys(t);for(const r of Object.values(e)){const{name:o}=r.getOptions();if(!(o in t))t[o]=r;else{const s=n.filter(d=>d.startsWith(o)).map(d=>+(d.replace(o,"")||0)),l=kr(s)+1,u=`${o}${l}`;t[u]=r,r.getOptions().key=u}}return t}function Px(t,e){const[n]=qr("scale",e),{relations:r}=t,[o]=IT(r),s=n(t);return o(s)}function kT(t){const e=t.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));Ix(e,"x"),Ix(e,"y")}function RT(t){const{channels:e=[],type:n,scale:r={}}=t,o=["shape","color","opacity","size"];return e.length!==0?e:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(s=>o.includes(s)):[]}function Ix(t,e){const n=t.filter(({name:s,facet:l=!0})=>l&&s===e),r=n.flatMap(s=>s.domain),o=n.every(Dx)?ts(r):n.every(ps)?Array.from(new Set(r)):null;if(o!==null)for(const s of n)s.domain=o}function DT(t,e,n){const{ratio:r}=n;return r==null?e:Dx({type:t})?kx(e,r,t):ps({type:t})?Rx(e,r):e}function kx(t,e,n){const r=t.map(Number),o=new pa({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*e]});return n==="time"?t.map(s=>new Date(o.map(s))):t.map(s=>o.map(s))}function Rx(t,e){const n=Math.round(t.length*e);return t.slice(0,n)}function Dx(t){const{type:e}=t;return typeof e!="string"?!1:["linear","log","pow","time"].includes(e)}function ps(t){const{type:e}=t;return typeof e!="string"?!1:["band","point","ordinal"].includes(e)}function NT(t,e,n){const{type:r,domain:o,range:s,quantitative:l,ordinal:u}=n;return r!==void 0?r:$T(e)?"identity":typeof s=="string"?"linear":(o||s||[]).length>2?Wh(t,u):o!==void 0?to([o])?Wh(t,u):Ux(e)?"time":Fx(t,s,l):to(e)?Wh(t,u):Ux(e)?"time":Fx(t,s,l)}function FT(t,e,n,r){const{domain:o}=r;if(o!==void 0)return o;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return Bx(WT(n,r),r);case"band":case"ordinal":case"point":return GT(n);case"quantile":return yv(n);case"sequential":return Bx(jx(n),r);default:return[]}}function Xl(t,e,n,r,o,s,l){const{range:u}=r;if(typeof u=="string")return jT(u);if(u!==void 0)return u;const{rangeMin:d,rangeMax:h}=r;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":{const p=Nx(n,r,o,s,l),[v,m]=zx(e,p);return[d!=null?d:v,h!=null?h:m]}case"band":case"point":{const p=e==="size"?5:0,v=e==="size"?10:1;return[d!=null?d:p,h!=null?h:v]}case"ordinal":return Nx(n,r,o,s,l);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function BT(t,e,n,r,o){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return ZT(o,r);case"band":case"point":return HT(t,e,o,r);case"sequential":return UT(r);default:return r}}function Nx(t,e,n,r,o){const[s]=qr("palette",o),{category10:l,category20:u}=r,d=_E(n).length<=l.length?l:u,{palette:h=d,offset:p}=e;if(Array.isArray(h))return h;try{return s({type:h})}catch(v){const m=zT(h,n,p);if(m)return m;throw new Error(`Unknown Component: ${h} `)}}function jT(t){return t.split("-")}function zT(t,e,n=r=>r){if(!t)return null;const r=Ts(t),o=st[`scheme${r}`],s=st[`interpolate${r}`];if(!o&&!s)return null;if(o){if(!o.some(Array.isArray))return o;const l=o[e.length];if(l)return l}return e.map((l,u)=>s(n(u/e.length)))}function UT(t){const{palette:e="ylGnBu",offset:n}=t,r=Ts(e),o=st[`interpolate${r}`];if(!o)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?s=>o(n(s)):o}}function ZT(t,e){const{interpolate:n=of,nice:r=!1,tickCount:o=5}=e;return Object.assign(Object.assign({},e),{interpolate:n,nice:r,tickCount:o})}function HT(t,e,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const o=VT(t,e,n),{paddingInner:s=o,paddingOuter:l=o}=r;return Object.assign(Object.assign({},r),{paddingInner:s,paddingOuter:l,padding:o,unknown:NaN})}function VT(t,e,n){return e==="enterDelay"||e==="enterDuration"||e==="size"?0:t==="band"?Gg(n)?0:.1:t==="point"?.5:0}function Wh(t,e){return e||(ql(t)?"point":"ordinal")}function Fx(t,e,n){return n||(t!=="color"||e?"linear":"sequential")}function Bx(t,e){if(t.length===0)return t;const{domainMin:n,domainMax:r}=e,[o,s]=t;return[n!=null?n:o,r!=null?r:s]}function WT(t,e){const{zero:n=!1}=e;let r=1/0,o=-1/0;for(const s of t)for(const l of s)Zr(l)&&(r=Math.min(r,+l),o=Math.max(o,+l));return r===1/0?[]:n?[Math.min(0,r),o]:[r,o]}function GT(t){return Array.from(new Set(t.flat()))}function yv(t){return t.flat().sort()}function jx(t){let e=1/0,n=-1/0;for(const r of t)for(const o of r)Zr(o)&&(e=Math.min(e,+o),n=Math.max(n,+o));return e===1/0?[]:[e<0?-n:e,n]}function zx(t,e){return t==="enterDelay"?[0,1e3]:t=="enterDuration"?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:t==="color"?[bE(e),v1(e)]:t==="opacity"?[0,1]:t==="size"?[1,10]:[0,1]}function to(t){return Gh(t,e=>{const n=typeof e;return n==="string"||n==="boolean"})}function Ux(t){return Gh(t,e=>e instanceof Date)}function $T(t){return Gh(t,vl)}function Gh(t,e){for(const n of t)if(n.some(e))return!0;return!1}function ql(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}function YT(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t==="enterDelay"||t==="enterDuration"||t==="updateDelay"||t==="updateDuration"||t==="exitDelay"||t==="exitDuration"}function Zx(t){if(!t||!t.type)return!1;if(typeof t.type=="function")return!0;const{type:e,domain:n,range:r,interpolator:o}=t,s=n&&n.length>0,l=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(e)&&s&&l||["sequential"].includes(e)&&s&&(l||o)||["constant","identity"].includes(e)&&l)}const XT={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},$h={threshold:"threshold",quantize:"quantize",quantile:"quantile"},qT={ordinal:"ordinal",band:"band",point:"point"},Df={constant:"constant"};var gs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Hx(t,e,n){const{coordinates:r=[],title:o}=e,[,s]=qr("component",n),l=t.filter(({guide:p})=>p!==null),u=[],d=Nf(e,t,n);if(u.push(...d),o){const{props:p}=s("title"),{defaultPosition:v,defaultOrientation:m,defaultOrder:b,defaultSize:_,defaultCrossPadding:S}=p,O=typeof o=="string"?{title:o}:o;u.push(Object.assign({type:"title",position:v,orientation:m,order:b,crossPadding:S[0],defaultSize:_},O))}return Wx(l,r).forEach(([p,v])=>{const{props:m}=s(p),{defaultPosition:b,defaultPlane:_="xy",defaultOrientation:S,defaultSize:O,defaultOrder:E,defaultLength:A,defaultPadding:M=[0,0],defaultCrossPadding:L=[0,0]}=m,I=Je({},...v),{guide:R,field:N}=I,Z=Array.isArray(R)?R:[R];for(const W of Z){const[it,tt]=q6(p,b,S,W,v,l,r);if(!it&&!tt)continue;const pt=it==="left"||it==="right",K=pt?M[1]:M[0],lt=pt?L[1]:L[0],{size:ft,order:vt=E,length:It=A,padding:_t=K,crossPadding:Lt=lt}=W;u.push(Object.assign(Object.assign({title:N},W),{defaultSize:O,length:It,position:it,plane:_,orientation:tt,padding:_t,order:vt,crossPadding:Lt,size:ft,type:p,scales:v}))}}),u}function bv(t,e,n,r,o){const[s]=qr("component",r),{scaleInstances:l,scale:u,bbox:d}=t,h=gs(t,["scaleInstances","scale","bbox"]),p={bbox:d,library:r};return s(h)({coordinate:e,library:r,markState:o,scales:l,theme:n,value:p,scale:u})}function Kr(t){return t.map(e=>{const n=Je(e,e.style);return delete n.style,n})}function $6(t){return t.flatMap(e=>e.type=="group"?e.children:e)}function _v(t,e){const n=["left","right","bottom","top"];return bd(t,({type:s,position:l,group:u})=>n.includes(l)?u===void 0?s.startsWith("legend")?`legend-${l}`:Symbol("independent"):u==="independent"?Symbol("independent"):u:Symbol("independent")).flatMap(([,s])=>{if(s.length===1)return s[0];if(e!==void 0){const p=s.filter(S=>S.length!==void 0).map(S=>S.length),v=Go(p);if(v>e)return s.forEach(S=>S.group=Symbol("independent")),s;const m=e-v,b=s.length-p.length,_=m/b;s.forEach(S=>{S.length===void 0&&(S.length=_)})}const l=kr(s,p=>p.size),u=kr(s,p=>p.order),d=kr(s,p=>p.crossPadding),h=s[0].position;return{type:"group",size:l,order:u,position:h,children:s,crossPadding:d}})}function Y6(t,e){const n=["shape","size","color","opacity"],r=(m,b)=>m==="constant"&&b==="size",o=t.filter(({type:m,name:b})=>typeof m=="string"&&n.includes(b)&&!r(m,b)),s=o.filter(({type:m})=>m==="constant"),l=o.filter(({type:m})=>m!=="constant"),d=bd(l,m=>m.field?m.field:Symbol("independent")).map(([m,b])=>[m,[...b,...s]]).filter(([,m])=>m.some(b=>b.type!=="constant")),h=new Map(d);if(h.size===0)return[];const p=m=>m.sort(([b],[_])=>b.localeCompare(_));return Array.from(h).map(([,m])=>{const _=xE(m).sort((S,O)=>O.length-S.length).map(S=>({combination:S,option:S.map(O=>[O.name,X6(O)])}));for(const{option:S,combination:O}of _)if(!S.every(E=>E[1]==="constant")&&S.every(E=>E[1]==="discrete"||E[1]==="constant"))return["legendCategory",O];for(const[S,O]of SE)for(const{option:E,combination:A}of _)if(O.some(M=>kd(p(M),p(E))))return[S,A];return null}).filter(Zr)}function X6(t){const{type:e}=t;return typeof e!="string"?null:e in XT?"continuous":e in qT?"discrete":e in $h?"distribution":e in Df?"constant":null}function Vx(t,e){return t.map(n=>{const{name:r}=n;if(C6(e)||Gg(e)||Fc(e)&&(fs(e)||Bc(e)))return null;if(r.startsWith("x"))return fs(e)?["axisArc",[n]]:Bc(e)?["axisLinear",[n]]:[Fc(e)?"axisY":"axisX",[n]];if(r.startsWith("y"))return fs(e)?["axisLinear",[n]]:Bc(e)?["axisArc",[n]]:[Fc(e)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(Jo(e))return["axisRadar",[n]];if(!fs(e))return["axisY",[n]]}return null}).filter(Zr)}function Wx(t,e){const n=t.filter(r=>Zx(r));return[...Y6(n,e),...Vx(n,e)]}function Gx(t){const e=ya(t,"polar");if(e.length){const r=e[e.length-1],{startAngle:o,endAngle:s}=_1(r);return[o,s]}const n=ya(t,"radial");if(n.length){const r=n[n.length-1],{startAngle:o,endAngle:s}=y0(r);return[o,s]}return[-Math.PI/2,Math.PI/2*3]}function lr(t){const e=/position(\d*)/g.exec(t);return e?+e[1]:null}function $x(t,e,n,r,o){const{name:s}=n[0];if(t==="axisRadar"){const l=r.filter(m=>m.name.startsWith("position")),u=lr(s);if(u===null)return[null,null];const[d,h]=Gx(o),p=Jo(o)?l.length:l.length-1;return["center",(h-d)/p*u+d]}if(t==="axisY"&&Z_(o))return Fc(o)?["center","horizontal"]:["center","vertical"];if(t==="axisLinear"){const[l]=Gx(o);return["center",l]}return t==="axisArc"?e[0]==="inner"?["inner",null]:["outer",null]:fs(o)?["center",null]:Bc(o)?["center",null]:t==="axisX"&&$g(o)||t==="axisX"&&Yg(o)?["top",null]:e}function q6(t,e,n,r,o,s,l){const[u]=Gx(l),d=[r.position||e,u!=null?u:n];return typeof t=="string"&&t.startsWith("axis")?$x(t,d,o,s,l):typeof t=="string"&&t.startsWith("legend")&&fs(l)&&r.position==="center"?["center","vertical"]:d}function na(t,e,n=[]){return t==="x"?Fc(n)?`${e}Y`:`${e}X`:t==="y"?Fc(n)?`${e}X`:`${e}Y`:null}function Nf(t,e,n){const[,r]=qr("component",n),{coordinates:o}=t;function s(l,u,d,h){const p=na(u,l,o);if(!h||!p)return;const{props:v}=r(p),{defaultPosition:m,defaultSize:b,defaultOrder:_,defaultCrossPadding:[S]}=v;return Object.assign(Object.assign({position:m,defaultSize:b,order:_,type:p,crossPadding:S},h),{scales:[d]})}return e.filter(l=>l.slider||l.scrollbar).flatMap(l=>{const{slider:u,scrollbar:d,name:h}=l;return[s("slider",h,l,u),s("scrollbar",h,l,d)]}).filter(l=>!!l)}function Ff(t,e,n,r,o,s){const{type:l}=t;if(!["left","right","bottom","top"].includes(r)||typeof l!="string")return;const d=l;return(d.startsWith("axis")?K6:d.startsWith("group")?Yx:d.startsWith("legendContinuous")?KT:d==="legendCategory"?jf:d.startsWith("slider")?Xx:d==="title"?Yh:d.startsWith("scrollbar")?Bf:()=>{})(t,e,n,r,o,s)}function Yx(t,e,n,r,o,s){const{children:l}=t,u=kr(l,h=>h.crossPadding);l.forEach(h=>h.crossPadding=u),l.forEach(h=>Ff(h,e,n,r,o,s));const d=kr(l,h=>h.size);t.size=d,l.forEach(h=>h.size=d)}function Bf(t,e,n,r,o,s){const{trackSize:l=6}=Je({},o.scrollbar,t);t.size=l}function Yh(t,e,n,r,o,s){const l=Je({},o.title,t),{title:u,subtitle:d,spacing:h=0}=l,p=gs(l,["title","subtitle","spacing"]);if(u){const v=En(p,"title"),m=Er(u,v);t.size=m.height}if(d){const v=En(p,"subtitle"),m=Er(d,v);t.size+=h+m.height}}function Xx(t,e,n,r,o,s){const l=()=>{const{slider:p}=o;return Je({},p,t)},{trackSize:u,handleIconSize:d}=l(),h=Math.max(u,d*2.4);t.size=h}function K6(t,e,n,r,o,s){var l,u;t.transform=t.transform||[{type:"hide"}];const d=r==="left"||r==="right",h=xv(t,r,o),{tickLength:p=0,labelSpacing:v=0,titleSpacing:m=0,labelAutoRotate:b}=h,_=gs(h,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),S=qs(t,s),O=Ks(_,S);let E=p;if(typeof t.tickLength=="function"){const I=(((l=S.getTicks)===null||l===void 0?void 0:l.call(S))||S.getOptions().domain).map((R,N,Z)=>t.tickLength(R,N,Z));E=Math.max(...I,0)}const A=E+v;if(O&&O.length){const L=kr(O,R=>R.width),I=kr(O,R=>R.height);if(d)t.size=L+A;else{const{tickFilter:R,labelTransform:N}=t;Ov(S,O,e,n,R)&&!N&&b!==!1&&b!==null?(t.labelTransform="rotate(90)",t.size=L+A):(t.labelTransform=(u=t.labelTransform)!==null&&u!==void 0?u:"rotate(0)",t.size=I+A)}}else t.size=E;const M=Kl(_);M&&(d?t.size+=m+M.width:t.size+=m+M.height)}function KT(t,e,n,r,o,s){const u=(()=>{const{legendContinuous:L}=o;return Je({},L,t)})(),{labelSpacing:d=0,titleSpacing:h=0}=u,p=gs(u,["labelSpacing","titleSpacing"]),v=r==="left"||r==="right",m=En(p,"ribbon"),{size:b}=m,_=En(p,"handleIcon"),{size:S}=_,O=Math.max(b,S*2.4);t.size=O;const E=qs(t,s),A=Ks(p,E);if(A){const L=v?"width":"height",I=kr(A,R=>R[L]);t.size+=I+d}const M=Kl(p);M&&(v?t.size=Math.max(t.size,M.width):t.size+=h+M.height)}function jf(t,e,n,r,o,s){const u=(()=>{const{legendCategory:vt}=o,{title:It}=t,[_t,Lt]=Array.isArray(It)?[It,void 0]:[void 0,It];return Je({title:_t},vt,Object.assign(Object.assign({},t),{title:Lt}))})(),{focus:d,itemSpacing:h,focusMarkerSize:p,itemMarkerSize:v,titleSpacing:m,rowPadding:b,colPadding:_,maxCols:S=1/0,maxRows:O=1/0}=u,E=gs(u,["focus","itemSpacing","focusMarkerSize","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:A,length:M}=t,L=vt=>Math.min(vt,O),I=vt=>Math.min(vt,S),R=r==="left"||r==="right",N=M===void 0?e+(R?0:n[0]+n[1]):M,Z=Kl(E),W=qs(t,s),it=Ks(E,W,"itemLabel"),tt=Math.max(it[0].height,v)+b,pt=(vt,It=0)=>v+vt+h[0]+It+(d?p+h[2]:0);R?(()=>{let vt=-1/0,It=0,_t=1,Lt=0,$t=-1/0,he=-1/0;const le=Z?Z.height:0,Ee=N-le;for(const{width:Ue}of it){const Be=pt(Ue,_);vt=Math.max(vt,Be),It+tt>Ee?(_t++,$t=Math.max($t,Lt),he=Math.max(he,It),Lt=1,It=tt):(It+=tt,Lt++)}_t<=1&&($t=Lt,he=It),t.size=vt*I(_t),t.length=he+le,Je(t,{cols:I(_t),gridRow:$t})})():typeof A=="number"?(()=>{const vt=Math.ceil(it.length/A),It=kr(it,_t=>pt(_t.width))*A;t.size=tt*L(vt)-b,t.length=Math.min(It,N)})():(()=>{let vt=1,It=0,_t=-1/0;for(const{width:Lt}of it){const $t=pt(Lt,_);It+$t>N?(_t=Math.max(_t,It),It=$t,vt++):It+=$t}vt===1&&(_t=It),t.size=tt*L(vt)-b,t.length=_t})(),Z&&(R?t.size=Math.max(t.size,Z.width):t.size+=m+Z.height)}function qs(t,e){const[n]=qr("scale",e),{scales:r,tickCount:o,tickMethod:s}=t,l=r.find(u=>u.type!=="constant"&&u.type!=="identity");return o!==void 0&&(l.tickCount=o),s!==void 0&&(l.tickMethod=s),n(l)}function Ks(t,e,n="label"){const{labelFormatter:r,tickFilter:o,label:s=!0}=t,l=gs(t,["labelFormatter","tickFilter","label"]);if(!s)return null;const u=qx(e,r,o),d=En(l,n),h=u.map((m,b)=>Object.fromEntries(Object.entries(d).map(([_,S])=>[_,typeof S=="function"?S(m,b):S]))),p=u.map((m,b)=>{const _=h[b];return Er(m,_)});if(!h.some(m=>m.transform)){const m=u.map((b,_)=>_);t.indexBBox=new Map(m.map(b=>[b,[u[b],p[b]]]))}return p}function Kl(t){const e=h=>h===!1||h===null,{title:n}=t,r=gs(t,["title"]);if(e(n)||n===void 0)return null;const o=En(r,"title"),{direction:s,transform:l}=o,u=Array.isArray(n)?n.join(","):n;return typeof u!="string"?null:Er(u,Object.assign(Object.assign({},o),{transform:l||(s==="vertical"?"rotate(-90)":"")}))}function xv(t,e,n){const{title:r}=t,[o,s]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:l,[`axis${Td(e)}`]:u}=n;return Je({title:o},l,u,Object.assign(Object.assign({},t),{title:s}))}function Sv(t,e){const n=t.getTicks?t.getTicks():t.getOptions().domain;return e?n.filter(e):n}function qx(t,e,n){const o=Sv(t,n).map(l=>typeof l=="number"?Dd(l):l),s=e?typeof e=="string"?Cs(e):e:t.getFormatter?t.getFormatter():l=>`${l}`;return o.map(s)}function Kx(t,e){return t.getBandWidth?t.getBandWidth(e)/2:0}function Ov(t,e,n,r,o){if(Go(e,b=>b.width)>n)return!0;const l=t.clone();l.update({range:[0,n]});const u=Sv(t,o),d=u.map(b=>l.map(b)+Kx(l,b)),h=u.map((b,_)=>_),p=-r[0],v=n+r[1],m=(b,_)=>{const{width:S}=_;return[b-S/2,b+S/2]};for(let b=0;b<h.length;b++){const _=d[b],[S,O]=m(_,e[b]);if(S<p||O>v)return!0;const E=d[b+1];if(E){const[A]=m(E,e[b+1]);if(O>A)return!0}}return!1}function Er(t,e){const n=Q6(t),{filter:r}=e,o=gs(e,["filter"]);return n.attr(Object.assign(Object.assign({},o),{visibility:"none"})),n.getBBox()}function Q6(t){return t instanceof V.s$?t:new V.xv({style:{text:`${t}`}})}function ra(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}return n}function Qx(t){if(Ms(t))return t[0]}const Jx=16;function Xh(t){const e=t.find(({type:o})=>o==="axisX"),n=t.find(({type:o})=>o==="axisY"),r=t.find(({type:o})=>o==="axisZ");e&&n&&r&&(e.plane="xy",n.plane="xy",r.plane="yz",r.origin=[e.bbox.x,e.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=e.bbox.x,r.bbox.y=e.bbox.y,t.push(Object.assign(Object.assign({},e),{plane:"xz",showLabel:!1,showTitle:!1,origin:[e.bbox.x,e.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function Yc(t,e,n,r){var o,s,l,u;const{width:d,height:h,depth:p,x:v=0,y:m=0,z:b=0,inset:_=(o=n.inset)!==null&&o!==void 0?o:0,insetLeft:S=_,insetTop:O=_,insetBottom:E=_,insetRight:A=_,margin:M=(s=n.margin)!==null&&s!==void 0?s:0,marginLeft:L=M,marginBottom:I=M,marginTop:R=M,marginRight:N=M,padding:Z=n.padding,paddingBottom:W=Z,paddingLeft:it=Z,paddingRight:tt=Z,paddingTop:pt=Z}=e2(t,e,n,r),K=L===Jx&&it==="auto",lt=N===Jx&&tt==="auto",ft=Qn(e,"coordinates",[]).some(zn=>zn.type==="transpose"),vt=t.find(({type:zn})=>zn==="axisX"),{size:It,labelTransform:_t}=vt||{},Lt=1/4,$t=(zn,Yn,ti,ci,Ir)=>{const{marks:Hi}=e;if(Hi.length===0)return[ci,Ir];if(zn-ci-Ir-zn*Lt>0)return[ci,Ir];const li=zn*(1-Lt);return[Yn==="auto"?li*ci/(ci+Ir):ci,ti==="auto"?li*Ir/(ci+Ir):Ir]},he=zn=>zn==="auto"?20:zn!=null?zn:20,le=he(pt),Ee=he(W),Ue=n2(t,h-le-Ee,[le+R,Ee+I],["left","right"],e,n,r),{paddingLeft:Be,paddingRight:Qe}=Ue,en=d-L-N;let[Ge,cn]=$t(en,it,tt,Be,Qe),wn=en-Ge-cn;const Mn=n2(t,wn,[Ge+L,cn+N],["bottom","top"],e,n,r),{paddingTop:Sn,paddingBottom:Fn}=Mn,Zn=h-I-R,[Gn,rr]=$t(Zn,W,pt,Fn,Sn),$n=Zn-Gn-rr;if(It&&!ft&&!_t){const{fontSize:zn=12,fontFamily:Yn="sans-serif",scales:ti=[]}=vt,ci=(u=(l=ti==null?void 0:ti[0])===null||l===void 0?void 0:l.domain)!==null&&u!==void 0?u:[];if(!ci.length)return;const Ir=(Hi,Li,lo,li)=>{const yi=z1(Li,{fontSize:zn,fontFamily:Yn}),uo=yi/2-lo-li;uo>0&&(wn-=uo,Hi==="left"?Ge+=yi/2-lo:cn+=yi/2-lo)};K&&Ir("left",Qx(ci),L,Ge),lt&&Ir("right",io(ci),N,cn)}return{width:d,height:h,depth:p,insetLeft:S,insetTop:O,insetBottom:E,insetRight:A,innerWidth:wn,innerHeight:$n,paddingLeft:Ge,paddingRight:cn,paddingTop:rr,paddingBottom:Gn,marginLeft:L,marginBottom:I,marginTop:R,marginRight:N,x:v,y:m,z:b}}function t2(t){const{height:e,width:n,padding:r=0,paddingLeft:o=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:u=r,margin:d=16,marginLeft:h=d,marginRight:p=d,marginTop:v=d,marginBottom:m=d,inset:b=0,insetLeft:_=b,insetRight:S=b,insetTop:O=b,insetBottom:E=b}=t,A=I=>I==="auto"?20:I,M=n-A(o)-A(s)-h-p-_-S,L=e-A(l)-A(u)-v-m-O-E;return{width:M,height:L}}function e2(t,e,n,r){const{coordinates:o}=e;if(!fs(o)&&!Bc(o))return e;const s=t.filter(E=>typeof E.type=="string"&&E.type.startsWith("axis"));if(s.length===0)return e;const l=s.map(E=>{const A=E.type==="axisArc"?"arc":"linear";return xv(E,A,n)}),u=kr(l,E=>{var A;return(A=E.labelSpacing)!==null&&A!==void 0?A:0}),d=s.flatMap((E,A)=>{const M=l[A],L=qs(E,r);return Ks(M,L)}).filter(Zr),h=kr(d,E=>E.height)+u,p=s.flatMap((E,A)=>{const M=l[A];return Kl(M)}).filter(E=>E!==null),v=p.length===0?0:kr(p,E=>E.height),{inset:m=h,insetLeft:b=m,insetBottom:_=m,insetTop:S=m+v,insetRight:O=m}=e;return Object.assign(Object.assign({},e),{insetLeft:b,insetBottom:_,insetTop:S,insetRight:O})}function n2(t,e,n,r,o,s,l){const u=$r(t,_=>_.position),{padding:d=s.padding,paddingLeft:h=d,paddingRight:p=d,paddingBottom:v=d,paddingTop:m=d}=o,b={paddingBottom:v,paddingLeft:h,paddingTop:m,paddingRight:p};for(const _ of r){const S=`padding${Td(js(_))}`,O=u.get(_)||[],E=b[S],A=W=>{W.size===void 0&&(W.size=W.defaultSize)},M=W=>{W.type==="group"?(W.children.forEach(A),W.size=kr(W.children,it=>it.size)):W.size=W.defaultSize},L=W=>{W.size||(E!=="auto"?M(W):(Ff(W,e,n,_,s,l),A(W)))},I=W=>{W.type.startsWith("axis")&&W.labelAutoHide===void 0&&(W.labelAutoHide=!0)},R=_==="bottom"||_==="top",N=ra(O,W=>W.order),Z=O.filter(W=>W.type.startsWith("axis")&&W.order==N);if(Z.length&&(Z[0].crossPadding=0),typeof E=="number")O.forEach(A),O.forEach(I);else if(O.length===0)b[S]=0;else{const W=R?e+n[0]+n[1]:e,it=_v(O,W);it.forEach(L);const tt=it.reduce((pt,{size:K,crossPadding:lt=12})=>pt+K+lt,0);b[S]=tt}}return b}function Ev(t,e,n){const r=$r(t,R=>`${R.plane||"xy"}-${R.position}`),{paddingLeft:o,paddingRight:s,paddingTop:l,paddingBottom:u,marginLeft:d,marginTop:h,marginBottom:p,marginRight:v,innerHeight:m,innerWidth:b,insetBottom:_,insetLeft:S,insetRight:O,insetTop:E,height:A,width:M,depth:L}=n,I={xy:r2({width:M,height:A,paddingLeft:o,paddingRight:s,paddingTop:l,paddingBottom:u,marginLeft:d,marginTop:h,marginBottom:p,marginRight:v,innerHeight:m,innerWidth:b,insetBottom:_,insetLeft:S,insetRight:O,insetTop:E}),yz:r2({width:L,height:A,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:L,innerHeight:A,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:r2({width:M,height:L,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:M,innerHeight:L,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[R,N]of r.entries()){const[Z,W]=R.split("-"),it=I[Z][W],[tt,pt]=m0(N,K=>typeof K.type!="string"?!1:!!(W==="center"||K.type.startsWith("axis")&&["inner","outer"].includes(W)));tt.length&&QT(tt,e,it,W),pt.length&&o2(N,e,it)}}function r2({width:t,height:e,paddingLeft:n,paddingRight:r,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:u,marginBottom:d,marginRight:h,innerHeight:p,innerWidth:v,insetBottom:m,insetLeft:b,insetRight:_,insetTop:S}){const O=n+l,E=o+u,A=r+h,M=s+d,L=t-l-h,I=[O+b,E+S,v-b-_,p-S-m,"center",null,null];return{top:[O,0,v,E,"vertical",!0,si,l,L],right:[t-A,E,A,p,"horizontal",!1,si],bottom:[O,e-M,v,M,"vertical",!1,si,l,L],left:[0,E,O,p,"horizontal",!0,si],"top-left":[O,0,v,E,"vertical",!0,si],"top-right":[O,0,v,E,"vertical",!0,si],"bottom-left":[O,e-M,v,M,"vertical",!1,si],"bottom-right":[O,e-M,v,M,"vertical",!1,si],center:I,inner:I,outer:I}}function QT(t,e,n,r){const[o,s]=m0(t,l=>!!(typeof l.type=="string"&&l.type.startsWith("axis")));J6(o,e,n,r),t7(s,e,n)}function J6(t,e,n,r){r==="center"?EE(e)?nC(t,e,n,r):Rr(e)?JT(t,e,n):Uu(e)&&tC(t,e,n,t[0].orientation):r==="inner"?i2(t,e,n):r==="outer"&&Ql(t,e,n)}function i2(t,e,n){const[r,o,,s]=n,[l,u]=e.getCenter(),[d]=Zu(e),h=s/2,p=d*h,v=l-p,m=u-p;for(let b=0;b<t.length;b++){const _=t[b];_.bbox={x:r+v,y:o+m,width:p*2,height:p*2}}}function Ql(t,e,n){const[r,o,s,l]=n;for(const u of t)u.bbox={x:r,y:o,width:s,height:l}}function JT(t,e,n){const[r,o,s,l]=n;for(const u of t)u.bbox={x:r,y:o,width:s,height:l}}function tC(t,e,n,r){r==="horizontal"?eC(t,e,n):r==="vertical"&&zf(t,e,n)}function zf(t,e,n){const[r,o,,s]=n,l=new Array(t.length).fill(0),d=e.map(l).filter((h,p)=>p%2===0).map(h=>h+r);for(let h=0;h<t.length;h++){const p=t[h],v=d[h],m=d[h+1]-v;p.bbox={x:v,y:o,width:m,height:s}}}function eC(t,e,n){const[r,o,s]=n,l=new Array(t.length).fill(0),d=e.map(l).filter((h,p)=>p%2===1).map(h=>h+o);for(let h=0;h<t.length;h++){const p=t[h],v=d[h],m=d[h+1]-v;p.bbox={x:r,y:v,width:s,height:m}}}function nC(t,e,n,r){const[o,s,l,u]=n;for(const d of t)d.bbox={x:o,y:s,width:l,height:u},d.radar={index:t.indexOf(d),count:t.length}}function o2(t,e,n){const[r,o,s,l,u,d,h,p,v]=n,[m,b,_,S,O,E,A,M]=u==="vertical"?["y",o,"x",r,"height",l,"width",s]:["x",r,"y",o,"width",s,"height",l];t.sort((W,it)=>h==null?void 0:h(W.order,it.order));const L=W=>W==="title"||W==="group"||W.startsWith("legend"),I=(W,it,tt)=>tt===void 0?it:L(W)?tt:it,R=(W,it,tt)=>tt===void 0?it:L(W)?tt:it,N=d?b+E:b;for(let W=0,it=N;W<t.length;W++){const tt=t[W],{crossPadding:pt=0,type:K}=tt,{size:lt}=tt;tt.bbox={[m]:d?it-lt-pt:it+pt,[_]:R(K,S,p),[O]:lt,[A]:I(K,M,v)},it+=(lt+pt)*(d?-1:1)}const Z=t.filter(W=>W.type==="group");for(const W of Z){const{bbox:it,children:tt}=W,pt=it[A],K=pt/tt.length,lt=tt.reduce((Lt,$t)=>{var he;const le=(he=$t.layout)===null||he===void 0?void 0:he.justifyContent;return le||Lt},"flex-start"),ft=tt.map((Lt,$t)=>{const{length:he=K,padding:le=0}=Lt;return he+($t===tt.length-1?0:le)}),vt=Go(ft),It=pt-vt,_t=lt==="flex-start"?0:lt==="center"?It/2:It;for(let Lt=0,$t=it[_]+_t;Lt<tt.length;Lt++){const he=tt[Lt],{padding:le=0}=he,Ee=Lt===tt.length-1?0:le;he.bbox={[O]:it[O],[m]:it[m],[_]:$t,[A]:ft[Lt]-Ee},Je(he,{layout:{justifyContent:lt}}),$t+=ft[Lt]}}}function t7(t,e,n){if(t.length===0)return;const[r,o,s,l]=n,[u]=Zu(e),d=l/2*u/Math.sqrt(2),h=r+s/2,p=o+l/2;for(let v=0;v<t.length;v++){const m=t[v];m.bbox={x:h-d,y:p-d,width:d*2,height:d*2}}}function Fo(t,e,n={},r=!1){if($a(t)||Array.isArray(t)&&r)return t;const o=En(t,e);return Je(n,o)}function Jl(t,e={}){return $a(t)||Array.isArray(t)||!rC(t)?t:Je(e,t)}function rC(t){if(Object.keys(t).length===0)return!0;const{title:e,items:n}=t;return e!==void 0||n!==void 0}function ka(t,e){return typeof t=="object"?En(t,e):t}var e7=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},tu=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const a2=Symbol("CALLBACK_ITEM");function iC(t,e,n){const{encode:r={},scale:o={},transform:s=[]}=e,l=tu(e,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},l),{encode:r,scale:o,transform:s})]}function Uf(t,e,n){return e7(this,void 0,void 0,function*(){const{library:r}=n,{data:o}=e,[s]=qr("data",r),l=hC(o),{transform:u=[]}=l,p=[tu(l,["transform"]),...u].map(b=>s(b,n)),v=yield XP(p)(o),m=o&&!Array.isArray(o)&&!Array.isArray(v)?{value:v}:v;return[Array.isArray(v)?vc(v):[],Object.assign(Object.assign({},e),{data:m})]})}function n7(t,e,n){const{encode:r}=e;if(!r)return[t,e];const o={};for(const[s,l]of Object.entries(r))if(Array.isArray(l))for(let u=0;u<l.length;u++){const d=`${s}${u===0?"":u}`;o[d]=l[u]}else o[s]=l;return[t,Object.assign(Object.assign({},e),{encode:o})]}function r7(t,e,n){const{encode:r,data:o}=e;if(!r)return[t,e];const s=Ta(r,l=>c2(l)?l:{type:Eo(o,l),value:l});return[t,Object.assign(Object.assign({},e),{encode:s})]}function oC(t,e,n){const{encode:r}=e;if(!r)return[t,e];const o=Ta(r,(s,l)=>{const{type:u}=s;return u!=="constant"||YT(l)?s:Object.assign(Object.assign({},s),{constant:!0})});return[t,Object.assign(Object.assign({},e),{encode:o})]}function aC(t,e,n){const{encode:r,data:o}=e;if(!r)return[t,e];const{library:s}=n,l=vC(s),u=Ta(r,d=>l(o,d));return[t,Object.assign(Object.assign({},e),{encode:u})]}function sC(t,e,n){const{tooltip:r={}}=e;return $a(r)?[t,e]:Array.isArray(r)?[t,Object.assign(Object.assign({},e),{tooltip:{items:r}})]:vl(r)&&rC(r)?[t,Object.assign(Object.assign({},e),{tooltip:r})]:[t,Object.assign(Object.assign({},e),{tooltip:{items:[r]}})]}function cC(t,e,n){const{data:r,encode:o,tooltip:s={}}=e;if($a(s))return[t,e];const l=v=>{if(!v)return v;if(typeof v=="string")return t.map(m=>({name:v,value:r[m][v]}));if(vl(v)){const{field:m,channel:b,color:_,name:S=m,valueFormatter:O=R=>R}=v,E=typeof O=="string"?Cs(O):O,A=b&&o[b],M=A&&o[b].field,L=S||M||b,I=[];for(const R of t){const N=m?r[R][m]:A?o[b].value[R]:null;I[R]={name:L,color:_,value:E(N)}}return I}if(typeof v=="function"){const m=[];for(const b of t){const _=v(r[b],b,r,o);vl(_)?m[b]=Object.assign(Object.assign({},_),{[a2]:!0}):m[b]={value:_}}return m}return v},{title:u,items:d=[]}=s,h=tu(s,["title","items"]),p=Object.assign({title:l(u),items:Array.isArray(d)?d.map(l):[]},h);return[t,Object.assign(Object.assign({},e),{tooltip:p})]}function lC(t,e,n){const{encode:r}=e,o=tu(e,["encode"]);if(!r)return[t,e];const s=Object.entries(r),l=s.filter(([,d])=>{const{value:h}=d;return Array.isArray(h[0])}).flatMap(([d,h])=>{const p=[[d,new Array(t.length).fill(void 0)]],{value:v}=h,m=tu(h,["value"]);for(let b=0;b<v.length;b++){const _=v[b];if(Array.isArray(_))for(let S=0;S<_.length;S++){const O=p[S]||[`${d}${S}`,new Array(t).fill(void 0)];O[1][b]=_[S],p[S]=O}}return p.map(([b,_])=>[b,Object.assign({type:"column",value:_},m)])}),u=Object.fromEntries([...s,...l]);return[t,Object.assign(Object.assign({},o),{encode:u})]}function uC(t,e,n){const{axis:r={},legend:o={},slider:s={},scrollbar:l={}}=e,u=(h,p)=>{if(typeof h=="boolean")return h?{}:null;const v=h[p];return v===void 0||v?v:null},d=typeof r=="object"?Array.from(new Set(["x","y","z",...Object.keys(r)])):["x","y","z"];return Je(e,{scale:Object.assign(Object.assign({},Object.fromEntries(d.map(h=>{const p=u(l,h);return[h,Object.assign({guide:u(r,h),slider:u(s,h),scrollbar:p},p&&{ratio:p.ratio===void 0?.5:p.ratio})]}))),{color:{guide:u(o,"color")},size:{guide:u(o,"size")},shape:{guide:u(o,"shape")},opacity:{guide:u(o,"opacity")}})}),[t,e]}function fC(t,e,n){const{animate:r}=e;return r||r===void 0?[t,e]:(Je(e,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,e])}function s2(t,e,n){var r,o;return Je(e,{scale:{series:Object.assign({key:`DEFAULT_${e.type}_SERIES_KEY`},(o=(r=e==null?void 0:e.scale)===null||r===void 0?void 0:r.series)!==null&&o!==void 0?o:{})}}),[t,e]}function c2(t){if(typeof t!="object"||t instanceof Date||t===null)return!1;const{type:e}=t;return Zr(e)}function Eo(t,e){return typeof e=="function"?"transform":typeof e=="string"&&dC(t,e)?"field":"constant"}function dC(t,e){return Array.isArray(t)?t.some(n=>n[e]!==void 0):!1}function hC(t){if((0,be.Z)(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};const{type:e="inline"}=t,n=tu(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}var l2=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},pC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function gC(t,e,n){return l2(this,void 0,void 0,function*(){const[r,o]=yield mC(t,e,n),{encode:s,scale:l,data:u,tooltip:d,key:h}=o;if(Array.isArray(u)===!1)return null;const{channels:p}=e,v=_d(Object.entries(s).filter(([,b])=>Zr(b)),b=>b.map(([_,S])=>Object.assign({name:_},S)),([b])=>{var _;const S=(_=/([^\d]+)\d*$/.exec(b))===null||_===void 0?void 0:_[1],O=p.find(E=>E.name===S);return O!=null&&O.independent?b:S}),m=p.filter(b=>{const{name:_,required:S}=b;if(v.find(([O])=>O===_))return!0;if(S)throw new Error(`Missing encoding for channel: ${_}.`);return!1}).flatMap(b=>{const{name:_,scale:S,scaleKey:O,range:E,quantitative:A,ordinal:M}=b;return v.filter(([I])=>I.startsWith(_)).map(([I,R],N)=>{const Z=R.some(It=>It.visual),W=R.some(It=>It.constant),it=l[I]||{},{independent:tt=!1,key:pt=O||I,type:K=W?"constant":Z?"identity":S}=it,lt=pC(it,["independent","key","type"]),ft=K==="constant",vt=ft?void 0:E;return{name:I,values:R,scaleKey:tt||ft?Symbol("independent"):pt,scale:Object.assign(Object.assign({type:K,markerKey:h,range:vt},lt),{quantitative:A,ordinal:M})}})});return[o,Object.assign(Object.assign({},e),{index:r,channels:m,tooltip:d})]})}function vC(t){const[e]=qr("encode",t);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:e(r)(n),field:u2(r)})}function mC(t,e,n){return l2(this,void 0,void 0,function*(){const{library:r}=n,[o]=qr("transform",r),{preInference:s=[],postInference:l=[]}=e,{transform:u=[]}=t,d=[iC,Uf,n7,r7,oC,aC,lC,fC,uC,sC,s2,...s.map(o),...u.map(o),...l.map(o),cC];let h=[],p=t;for(const v of d)[h,p]=yield v(h,p,n);return[h,p]})}function u2(t){const{type:e,value:n}=t;return e==="field"&&typeof n=="string"?n:null}var vs=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},Qs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function wv(t,e,n){var r;return vs(this,void 0,void 0,function*(){const{library:o}=n,[s]=qr("composition",o),[l]=qr("interaction",o),u=new Set(Object.keys(o).map(K=>{var lt;return(lt=/mark\.(.*)/.exec(K))===null||lt===void 0?void 0:lt[1]}).filter(Zr)),d=new Set(Object.keys(o).map(K=>{var lt;return(lt=/component\.(.*)/.exec(K))===null||lt===void 0?void 0:lt[1]}).filter(Zr)),h=K=>{const{type:lt}=K;if(typeof lt=="function"){const{props:ft={}}=lt,{composite:vt=!0}=ft;if(vt)return"mark"}return typeof lt!="string"?lt:u.has(lt)||d.has(lt)?"mark":lt},p=K=>h(K)==="mark",v=K=>h(K)==="standardView",m=K=>{const{type:lt}=K;return typeof lt!="string"?!1:!!d.has(lt)},b=K=>{if(v(K))return[K];const lt=h(K);return s({type:lt,static:m(K)})(K)},_=[],S=new Map,O=new Map,E=[t],A=[];for(;E.length;){const K=E.shift();if(v(K)){const lt=O.get(K),[ft,vt]=lt?Tv(lt,K,o):yield f2(K,n);S.set(ft,K),_.push(ft);const It=vt.flatMap(b).map(_t=>U_(_t,o));if(E.push(...It),It.every(v)){const _t=yield Promise.all(It.map(Lt=>d2(Lt,n)));kT(_t);for(let Lt=0;Lt<It.length;Lt++){const $t=It[Lt],he=_t[Lt];O.set($t,he)}}}else{const lt=p(K)?K:yield b2(K,n),ft=b(lt);Array.isArray(ft)?E.push(...ft):typeof ft=="function"&&A.push(ft())}}n.emitter.emit(Cr.BEFORE_PAINT);const M=new Map,L=new Map,I=[];e.selectAll(Bo(zt)).data(_,K=>K.key).join(K=>K.append("g").attr("className",zt).attr("id",lt=>lt.key).call(Av).each(function(lt,ft,vt){Cv(lt,Xn(vt),I,n),M.set(lt,vt)}),K=>K.call(Av).each(function(lt,ft,vt){Cv(lt,Xn(vt),I,n),L.set(lt,vt)}),K=>K.each(function(lt,ft,vt){const It=vt.nameInteraction.values();for(const _t of It)_t.destroy()}).remove());const R=(K,lt,ft)=>Array.from(K.entries()).map(([vt,It])=>{const _t=ft||new Map,Lt=(Ee,Ue=Be=>Be)=>_t.set(Ee,Ue),$t=S.get(vt),he=bC(Xn(It),$t,n),le={view:vt,container:It,options:$t,setState:Lt,update:(Ee,Ue)=>vs(this,void 0,void 0,function*(){const Qe=o0(Array.from(_t.values()))($t);return yield he(Qe,Ee,()=>{(0,Sr.Z)(Ue)&&lt(K,Ue,_t)})})};return n.externals.update=le.update,n.externals.setState=Lt,le}),N=(K=L,lt,ft)=>{var vt;const It=R(K,N,ft);for(const _t of It){const{options:Lt,container:$t}=_t,he=$t.nameInteraction;let le=Hf(Lt);lt&&(le=le.filter(Ee=>lt.includes(Ee[0])));for(const Ee of le){const[Ue,Be]=Ee,Qe=he.get(Ue);if(Qe&&((vt=Qe.destroy)===null||vt===void 0||vt.call(Qe)),Be){const Ge=h2(_t.view,Ue,Be,l)(_t,It,n.emitter);he.set(Ue,{destroy:Ge})}}}},Z=R(M,N);for(const K of Z){const{options:lt}=K,ft=new Map;K.container.nameInteraction=ft;for(const vt of Hf(lt)){const[It,_t]=vt;if(_t){const $t=h2(K.view,It,_t,l)(K,Z,n.emitter);ft.set(It,{destroy:$t})}}}N();const{width:W,height:it}=t,tt=[];for(const K of A){const lt=new Promise(ft=>vs(this,void 0,void 0,function*(){for(const vt of K){const It=Object.assign({width:W,height:it},vt);yield wv(It,e,n)}ft()}));tt.push(lt)}n.views=_,(r=n.animations)===null||r===void 0||r.forEach(K=>K==null?void 0:K.cancel()),n.animations=I,n.emitter.emit(Cr.AFTER_PAINT);const pt=I.filter(Zr).map(PC).map(K=>K.finished);return Promise.all([...pt,...tt])})}function Av(t){t.style("transform",e=>`translate(${e.layout.x}, ${e.layout.y})`)}function yC(t){const[,e]=qr("interaction",t);return n=>{const[r,o]=n;try{return[r,e(r)]}catch(s){return[r,o.type]}}}function bC(t,e,n){const{library:r}=n,o=yC(r),s=d=>d[1]&&d[1].props&&d[1].props.reapplyWhenUpdate,u=Hf(e).map(o).filter(s).map(d=>d[0]);return(d,h,p)=>vs(this,void 0,void 0,function*(){const v=[],[m,b]=yield f2(d,n);Cv(m,t,v,n);for(const _ of u.filter(S=>S!==h))_C(_,t,d,m,n);for(const _ of b)wv(_,t,n);return p(),{options:d,view:m}})}function _C(t,e,n,r,o){var s;const{library:l}=o,[u]=qr("interaction",l),h=e.node().nameInteraction,p=Hf(n).find(([S])=>S===t),v=h.get(t);if(!v||((s=v.destroy)===null||s===void 0||s.call(v),!p[1]))return;const m=h2(r,t,p[1],u),b={options:n,view:r,container:e.node(),update:S=>Promise.resolve(S)},_=m(b,[],o.emitter);h.set(t,{destroy:_})}function f2(t,e){return vs(this,void 0,void 0,function*(){const{library:n}=e,r=yield SC(t,e),o=xC(r);t.interaction=o.interaction,t.coordinate=o.coordinate,t.marks=[...o.marks,...o.components];const s=U_(o,n),l=yield d2(s,e);return Tv(l,s,n)})}function xC(t){const{coordinate:e={},interaction:n={},style:r={},marks:o}=t,s=Qs(t,["coordinate","interaction","style","marks"]),l=o.map(m=>m.coordinate||{}),u=o.map(m=>m.interaction||{}),d=o.map(m=>m.viewStyle||{}),h=[...l,e].reduceRight((m,b)=>Je(m,b),{}),p=[n,...u].reduce((m,b)=>Je(m,b),{}),v=[...d,r].reduce((m,b)=>Je(m,b),{});return Object.assign(Object.assign({},s),{marks:o,coordinate:h,interaction:p,style:v})}function SC(t,e){return vs(this,void 0,void 0,function*(){const{library:n}=e,[r,o]=qr("mark",n),s=new Set(Object.keys(n).map(b=>{var _;return(_=/component\.(.*)/.exec(b))===null||_===void 0?void 0:_[1]}).filter(Zr)),{marks:l}=t,u=[],d=[],h=[...l],{width:p,height:v}=t2(t),m={options:t,width:p,height:v};for(;h.length;){const[b]=h.splice(0,1),_=yield b2(b,e),{type:S=As("G2Mark type is required."),key:O}=_;if(s.has(S))d.push(_);else{const{props:E={}}=o(S),{composite:A=!0}=E;if(!A)u.push(_);else{const{data:M}=_,L=Object.assign(Object.assign({},_),{data:M&&(Array.isArray(M)?M:M.value)}),I=yield r(L,m),R=Array.isArray(I)?I:[I];h.unshift(...R.map((N,Z)=>Object.assign(Object.assign({},N),{key:`${O}-${Z}`})))}}}return Object.assign(Object.assign({},t),{marks:u,components:d})})}function d2(t,e){return vs(this,void 0,void 0,function*(){const{library:n}=e,[r]=qr("theme",n),[,o]=qr("mark",n),{theme:s,marks:l,coordinates:u=[]}=t,d=r(y2(s)),h=new Map;for(const v of l){const{type:m}=v,{props:b={}}=o(m),_=yield gC(v,b,e);if(_){const[S,O]=_;h.set(S,O)}}const p=$r(Array.from(h.values()).flatMap(v=>v.channels),({scaleKey:v})=>v);for(const v of p.values()){const m=v.reduce((L,{scale:I})=>Je(L,I),{}),{scaleKey:b}=v[0],{values:_}=v[0],S=Array.from(new Set(_.map(L=>L.field).filter(Zr))),O=Je({guide:{title:S.length===0?void 0:S},field:S[0]},m),{name:E}=v[0],A=v.flatMap(({values:L})=>L.map(I=>I.value)),M=Object.assign(Object.assign({},CT(E,A,O,u,d,n)),{uid:Symbol("scale"),key:b});v.forEach(L=>L.scale=M)}return h})}function h2(t,e,n,r){const o=t.theme,s=typeof e=="string"?o[e]||{}:{};return r(Je(s,Object.assign({type:e},n)))}function Tv(t,e,n){var r;const[o]=qr("mark",n),[s]=qr("theme",n),[l]=qr("labelTransform",n),{key:u,frame:d=!1,theme:h,clip:p,style:v={},labelTransform:m=[]}=e,b=s(y2(h)),_=Array.from(t.values()),S=PT(_,e),O=Kr(Hx(RC(Array.from(S),_,t),e,n)),E=Yc(O,e,b,n),A=M5(E,e,n),M=d?Je({mainLineWidth:1,mainStroke:"#000"},v):v;Ev(_v(O),A,E),Xh(O);const L=new Map(Array.from(t.values()).flatMap(W=>{const{channels:it}=W;return it.map(({scale:tt})=>[tt.uid,Px(tt,n)])}));LT(t,L);const I={};for(const W of O){const{scales:it=[]}=W,tt=[];for(const pt of it){const{name:K,uid:lt}=pt,ft=(r=L.get(lt))!==null&&r!==void 0?r:Px(pt,n);tt.push(ft),K==="y"&&ft.update(Object.assign(Object.assign({},ft.getOptions()),{xScale:I.x})),mv(I,{[K]:ft})}W.scaleInstances=tt}const R=[],N=new Map;for(const[W,it]of t.entries()){const{children:tt,dataDomain:pt,modifier:K,key:lt,data:ft}=W;N.set(lt,ft);const{index:vt,channels:It,tooltip:_t}=it,Lt=Object.fromEntries(It.map(({name:Sn,scale:Fn})=>[Sn,Fn])),$t=Ta(Lt,({uid:Sn})=>L.get(Sn));mv(I,$t);const he=MT(It,$t),le=o(W),[Ee,Ue,Be]=EC(le(vt,$t,he,A)),Qe=pt||Ee.length,en=K?K(Ue,Qe,E):[],Ge=Sn=>{var Fn,Zn;return(Zn=(Fn=_t.title)===null||Fn===void 0?void 0:Fn[Sn])===null||Zn===void 0?void 0:Zn.value},cn=Sn=>_t.items.map(Fn=>Fn[Sn]),wn=Ee.map((Sn,Fn)=>{const Zn=Object.assign({points:Ue[Fn],transform:en[Fn],index:Sn,markKey:lt,viewKey:u,data:ft[Sn]},_t&&{title:Ge(Sn),items:cn(Sn)});for(const[Gn,rr]of Object.entries(he))Zn[Gn]=rr[Sn],Be&&(Zn[`series${Ts(Gn)}`]=Be[Fn].map($n=>rr[$n]));return Be&&(Zn.seriesIndex=Be[Fn]),Be&&_t&&(Zn.seriesItems=Be[Fn].map(Gn=>cn(Gn)),Zn.seriesTitle=Be[Fn].map(Gn=>Ge(Gn))),Zn});it.data=wn,it.index=Ee;const Mn=tt==null?void 0:tt(wn,$t,E);R.push(...Mn||[])}return[{layout:E,theme:b,coordinate:A,markState:t,key:u,clip:p,scale:I,style:M,components:O,data:N,options:e,labelTransform:o0(m.map(l))},R]}function Cv(t,e,n,r){return vs(this,void 0,void 0,function*(){const{library:o}=r,{components:s,theme:l,layout:u,markState:d,coordinate:h,key:p,style:v,clip:m,scale:b}=t,{x:_,y:S,width:O,height:E}=u,A=Qs(u,["x","y","width","height"]),M=["view","plot","main","content"],L=M.map((_t,Lt)=>Lt),I=["a","margin","padding","inset"],R=M.map(_t=>n1(Object.assign({},l.view,v),_t)),N=I.map(_t=>En(A,_t)),Z=_t=>_t.style("x",Lt=>K[Lt].x).style("y",Lt=>K[Lt].y).style("width",Lt=>K[Lt].width).style("height",Lt=>K[Lt].height).each(function(Lt,$t,he){DC(Xn(he),R[Lt])});let W=0,it=0,tt=O,pt=E;const K=L.map(_t=>{const Lt=N[_t],{left:$t=0,top:he=0,bottom:le=0,right:Ee=0}=Lt;return W+=$t,it+=he,tt-=$t+Ee,pt-=he+le,{x:W,y:it,width:tt,height:pt}});e.selectAll(Bo(re)).data(L.filter(_t=>Zr(R[_t])),_t=>M[_t]).join(_t=>_t.append("rect").attr("className",re).style("zIndex",-2).call(Z),_t=>_t.call(Z),_t=>_t.remove());const lt=TC(d),ft=lt?{duration:lt[1]}:!1;for(const[,_t]of bd(s,Lt=>`${Lt.type}-${Lt.position}`))_t.forEach((Lt,$t)=>Lt.index=$t);const vt=e.selectAll(Bo(_e)).data(s,_t=>`${_t.type}-${_t.position}-${_t.index}`).join(_t=>_t.append("g").style("zIndex",({zIndex:Lt})=>Lt||-1).attr("className",_e).append(Lt=>bv(Je({animate:ft,scale:b},Lt),h,l,o,d)),_t=>_t.transition(function(Lt,$t,he){const{preserve:le=!1}=Lt;if(le)return;const Ee=bv(Je({animate:ft,scale:b},Lt),h,l,o,d),{attributes:Ue}=Ee,[Be]=he.childNodes;return Be.update(Ue,!1)})).transitions();n.push(...vt.flat().filter(Zr));const It=e.selectAll(Bo(ue)).data([u],()=>p).join(_t=>_t.append("rect").style("zIndex",0).style("fill","transparent").attr("className",ue).call(_2).call(S2,Array.from(d.keys())).call(Lv,m),_t=>_t.call(S2,Array.from(d.keys())).call(_2).call(Lv,m)).transitions();n.push(...It.flat());for(const[_t,Lt]of d.entries()){const{data:$t}=Lt,{key:he,class:le,type:Ee}=_t,Ue=e.select(`#${he}`),Be=o7(_t,Lt,t,r),Qe=LC(_t,Lt,t,o),en=m2(_t,Lt,t,o),Ge=IC(_t,Lt,t,o),cn=CC(e,Ue,le,"element"),wn=Ue.selectAll(Bo(ct)).selectFacetAll(cn).data($t,Mn=>Mn.key,Mn=>Mn.groupKey).join(Mn=>Mn.append(Be).attr("className",ct).attr("markType",Ee).transition(function(Sn,Fn,Zn){return Qe(Sn,[Zn])}),Mn=>Mn.call(Sn=>{const Fn=Sn.parent(),Zn=nE(Gn=>{const[rr,$n]=Gn.getBounds().min;return[rr,$n]});Sn.transition(function(Gn,rr,$n){MC($n,Fn,Zn);const zn=Be(Gn,rr),Yn=en(Gn,[$n],[zn]);return Yn!=null&&Yn.length||($n.nodeName===zn.nodeName&&zn.nodeName!=="g"?Ga($n,zn):($n.parentNode.replaceChild(zn,$n),zn.className=ct,zn.markType=Ee,zn.__data__=$n.__data__)),Yn}).each(function(Gn,rr,$n){$n.__removed__&&($n.__removed__=!1)}).attr("markType",Ee).attr("className",ct)}),Mn=>Mn.each(function(Sn,Fn,Zn){Zn.__removed__=!0}).transition(function(Sn,Fn,Zn){return Ge(Sn,[Zn])}).remove(),Mn=>Mn.append(Be).attr("className",ct).attr("markType",Ee).transition(function(Sn,Fn,Zn){const{__fromElements__:Gn}=Zn,rr=en(Sn,Gn,[Zn]);return new Si(Gn,null,Zn.parentNode).transition(rr).remove(),rr}),Mn=>Mn.transition(function(Sn,Fn,Zn){const rr=new Si([],Zn.__toData__,Zn.parentNode).append(Be).attr("className",ct).attr("markType",Ee).nodes();return en(Sn,[Zn],rr)}).remove()).transitions();n.push(...wn.flat())}Mv(t,e,n,o,r),OC(t,e,o,r)})}function Mv(t,e,n,r,o){const[s]=qr("labelTransform",r),{markState:l,labelTransform:u}=t,d=e.select(Bo(Zt)).node(),h=new Map,p=new Map,v=Array.from(l.entries()).flatMap(([E,A])=>{const{labels:M=[],key:L}=E,I=AC(E,A,t,r,o),R=e.select(`#${L}`).selectAll(Bo(ct)).nodes().filter(N=>!N.__removed__);return M.flatMap((N,Z)=>{const{transform:W=[]}=N,it=Qs(N,["transform"]);return R.flatMap(tt=>{const pt=i7(it,Z,tt);return pt.forEach(K=>{h.set(K,lt=>I(Object.assign(Object.assign({},lt),{element:tt}))),p.set(K,N)}),pt})})}),m=Xn(d).selectAll(Bo(St)).data(v,E=>E.key).join(E=>E.append(A=>h.get(A)(A)).attr("className",St),E=>E.each(function(A,M,L){const R=h.get(A)(A);Ga(L,R)}),E=>E.remove()).nodes(),b=$r(m,E=>p.get(E.__data__)),{coordinate:_,layout:S}=t,O={canvas:o.canvas,coordinate:_,layout:S};for(const[E,A]of b){const{transform:M=[]}=E;o0(M.map(s))(A,O)}u&&u(m,O)}function i7(t,e,n){const{seriesIndex:r,seriesKey:o,points:s,key:l,index:u}=n.__data__,d=wC(n);if(!r)return[Object.assign(Object.assign({},t),{key:`${l}-${e}`,bounds:d,index:u,points:s,dependentElement:n})];const h=p2(t),p=r.map((v,m)=>Object.assign(Object.assign({},t),{key:`${o[m]}-${e}`,bounds:[s[m]],index:v,points:s,dependentElement:n}));return h?h(p):p}function OC(t,e,n,r){const o=t.scale,s=Qn(o,"y.options.breaks",[]),{document:l}=r.canvas;if([Y,Dt].forEach(p=>{l.getElementsByClassName(p).forEach(v=>{v.remove()})}),!s.length)return;const u=e.select(Bo(ue)).node(),[d]=qr("shape",n),h=new Map;s.forEach((p,v)=>{h.set(p,d({type:"break"},{view:t,selection:e,context:r}))}),Xn(u).selectAll(Bo(Y)).data(s,p=>p.key).join(p=>p.append((v,m)=>h.get(v)(v,m)).attr("className",Y),p=>p.each(function(v,m,b){const S=h.get(v)(v,m);Ga(b,S)}),p=>p.remove()).nodes()}function EC([t,e,n]){if(n)return[t,e,n];const r=[],o=[];for(let s=0;s<t.length;s++){const l=t[s],u=e[s];u.every(([d,h])=>Zr(d)&&Zr(h))&&(r.push(l),o.push(u))}return[r,o]}function p2(t){const{selector:e}=t;if(!e)return null;if(typeof e=="function")return e;if(e==="first")return n=>[n[0]];if(e==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${e}`)}function wC(t){const e=t.cloneNode(!0),n=t.getAnimations();e.style.visibility="hidden",n.forEach(l=>{const u=l.effect.getKeyframes();e.attr(u[u.length-1])}),t.parentNode.appendChild(e);const r=e.getLocalBounds();e.destroy();const{min:o,max:s}=r;return[o,s]}function AC(t,e,n,r,o){const[s]=qr("shape",r),{data:l,encode:u}=t,{data:d,defaultLabelShape:h}=e,p=d.map(S=>S.points),v=Ta(u,S=>S.value),{theme:m,coordinate:b}=n,_=Object.assign(Object.assign({},o),{document:z_(o),theme:m,coordinate:b});return S=>{const{index:O,points:E}=S,A=l[O],{formatter:M=Lt=>`${Lt}`,transform:L,style:I,render:R,selector:N,element:Z}=S,W=Qs(S,["formatter","transform","style","render","selector","element"]),it=Ta(Object.assign(Object.assign({},W),I),Lt=>g2(Lt,A,O,l,{channel:v,element:Z})),{shape:tt=h,text:pt}=it,K=Qs(it,["shape","text"]),lt=typeof M=="string"?Cs(M):M,ft=Object.assign(Object.assign({},K),{text:lt(pt,A,O,l),datum:A}),vt=Object.assign({type:`label.${tt}`,render:R},K),It=s(vt,_),_t=v2(m,"label",tt,"label");return It(E,ft,_t,p)}}function g2(t,e,n,r,o){return typeof t=="function"?t(e,n,r,o):typeof t!="string"?t:vl(e)&&e[t]!==void 0?e[t]:t}function TC(t){let e=-1/0,n=1/0;for(const[r,o]of t){const{animate:s={}}=r,{data:l}=o,{enter:u={},update:d={},exit:h={}}=s,{type:p,duration:v=300,delay:m=0}=d,{type:b,duration:_=300,delay:S=0}=u,{type:O,duration:E=300,delay:A=0}=h;for(const M of l){const{updateType:L=p,updateDuration:I=v,updateDelay:R=m,enterType:N=b,enterDuration:Z=_,enterDelay:W=S,exitDuration:it=E,exitDelay:tt=A,exitType:pt=O}=M;(L===void 0||L)&&(e=Math.max(e,I+R),n=Math.min(n,R)),(pt===void 0||pt)&&(e=Math.max(e,it+tt),n=Math.min(n,tt)),(N===void 0||N)&&(e=Math.max(e,Z+W),n=Math.min(n,W))}}return e===-1/0?null:[n,e-n]}function CC(t,e,n,r){const o=t.node().parentElement;return!o||typeof o.findAll!="function"?[]:o.findAll(s=>s.style.facet!==void 0&&s.style.facet===n&&s!==e.node()).flatMap(s=>s.getElementsByClassName(r))}function MC(t,e,n){if(!t.__facet__)return;const r=t.parentNode.parentNode,o=e.parentNode,[s,l]=n(r),[u,d]=n(o),h=`translate(${s-u}, ${l-d})`;e1(t,h),e.append(t)}function o7(t,e,n,r){const{library:o}=r,[s]=qr("shape",o),{data:l,encode:u}=t,{defaultShape:d,data:h,shape:p}=e,v=Ta(u,A=>A.value),m=h.map(A=>A.points),{theme:b,coordinate:_}=n,{type:S,style:O={}}=t,E=Object.assign(Object.assign({},r),{document:z_(r),coordinate:_,theme:b});return A=>{const{shape:M=d}=O,{shape:L=M,points:I,seriesIndex:R,index:N}=A,Z=Qs(A,["shape","points","seriesIndex","index"]),W=Object.assign(Object.assign({},Z),{index:N}),it=R?R.map(ft=>l[ft]):l[N],tt=R||N,pt=Ta(O,ft=>g2(ft,it,tt,l,{channel:v})),K=p[L]?p[L](pt,E):s(Object.assign(Object.assign({},pt),{type:x2(t,L)}),E),lt=v2(b,S,L,d);return K(I,W,lt,m)}}function v2(t,e,n,r){if(typeof e!="string")return;const{color:o}=t,s=t[e]||{},l=s[n]||s[r];return Object.assign({color:o},l)}function Zf(t,e,n,r,o){var s,l;const[,u]=qr("shape",o),[d]=qr("animation",o),{defaultShape:h,shape:p}=n,{theme:v,coordinate:m}=r,_=`default${Ts(t)}Animation`,{[_]:S}=((s=p[h])===null||s===void 0?void 0:s.props)||u(x2(e,h)).props,{[t]:O={}}=v,E=((l=e.animate)===null||l===void 0?void 0:l[t])||{},A={coordinate:m};return(M,L,I)=>{const{[`${t}Type`]:R,[`${t}Delay`]:N,[`${t}Duration`]:Z,[`${t}Easing`]:W}=M,it=Object.assign({type:R||S},E);if(!it.type)return null;const K=d(it,A)(L,I,Je(O,{delay:N,duration:Z,easing:W}));let lt=[];return Array.isArray(K)?lt=K:lt=[K],lt.filter(Boolean)}}function LC(t,e,n,r){return Zf("enter",t,e,n,r)}function PC(t){return t.finished.then(()=>{t.cancel()}),t}function m2(t,e,n,r){return Zf("update",t,e,n,r)}function IC(t,e,n,r){return Zf("exit",t,e,n,r)}function y2(t={}){if(typeof t=="string")return{type:t};const{type:e="light"}=t,n=Qs(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}function Hf(t){const e={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=t;return Object.entries(Je(e,n)).reverse()}function b2(t,e){return vs(this,void 0,void 0,function*(){const{data:n}=t,r=Qs(t,["data"]);if(n==null)return t;const[,{data:o}]=yield Uf([],{data:n},e);return Object.assign({data:o},r)})}function _2(t){t.style("transform",e=>`translate(${e.paddingLeft+e.marginLeft}, ${e.paddingTop+e.marginTop})`).style("width",e=>e.innerWidth).style("height",e=>e.innerHeight)}function kC(t,e){const[n,r]=e;t.transition(function(o,s,l){const{transform:u,width:d,height:h}=l.style,{paddingLeft:p,paddingTop:v,innerWidth:m,innerHeight:b,marginLeft:_,marginTop:S}=o,O=[{transform:u,width:d,height:h},{transform:`translate(${p+_}, ${v+S})`,width:m,height:b}];return l.animate(O,{delay:n,duration:r,fill:"both"})})}function x2(t,e){const{type:n}=t;return typeof e=="string"?`${n}.${e}`:e}function S2(t,e){const n=s=>s.class!==void 0?`${s.class}`:"";t.nodes().length===0||(t.selectAll(Bo(ln)).data(e,s=>s.key).join(s=>s.append("g").attr("className",ln).attr("id",l=>l.key).style("facet",n).style("fill","transparent").style("zIndex",l=>{var u;return(u=l.zIndex)!==null&&u!==void 0?u:0}),s=>s.style("facet",n).style("fill","transparent").style("zIndex",l=>{var u;return(u=l.zIndex)!==null&&u!==void 0?u:0}),s=>s.remove()),t.select(Bo(Zt)).node())||t.append("g").attr("className",Zt).style("zIndex",0)}function Bo(...t){return t.map(e=>`.${e}`).join("")}function Lv(t,e){t.node()&&t.style("clipPath",n=>{if(!e)return null;const{paddingTop:r,paddingLeft:o,marginLeft:s,marginTop:l,innerWidth:u,innerHeight:d}=n;return new V.UL({style:{x:o+s,y:r+l,width:u,height:d}})})}function RC(t,e,n){var r;for(const[h]of n.entries())if(h.type==="cell")return t.filter(p=>p.name!=="shape");if(e.length!==1||t.some(h=>h.name==="shape"))return t;const{defaultShape:o}=e[0];if(!["point","line","rect","hollow"].includes(o))return t;const l={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},d={field:((r=t.find(h=>h.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[l[o]]};return[...t,d]}function DC(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function NC(...t){return e=>t.reduce((n,r)=>r(n),e)}function O2(t){const{style:e,scale:n,type:r}=t,o={},s=Qn(e,"columnWidthRatio");return s&&r==="interval"&&(o.x=Object.assign(Object.assign({},n==null?void 0:n.x),{padding:1-s})),Object.assign(Object.assign({},t),{scale:Object.assign(Object.assign({},n),o)})}const E2=t=>{if(!t||typeof t!="string")return t;const e=t.endsWith("%")?parseFloat(t.slice(0,-1))/100:parseFloat(t);if(isNaN(e)||e<0||e>1)throw new Error(`Invalid gap value: ${t}. It should be between 0 and 1.`);return e};function w2(t){const{axis:e}=t,n=Qn(e,"y.breaks");return n&&Pg(t,"scale.y.breaks",n.map(r=>Object.assign(Object.assign({key:`break-${r.start}-${r.end}`},r),{gap:E2(r.gap)}))),t}function A2(t){const e=FC(t);return e.children&&Array.isArray(e.children)&&(e.children=e.children.map(n=>A2(n))),e}function FC(t){return NC(O2,w2)(t)}function T2(t){const e=Je({},t),n=new Map([[e,null]]),r=new Map([[null,-1]]),o=[e];for(;o.length;){const s=o.shift();if(s.key===void 0){const u=n.get(s),d=r.get(s),h=u===null?"0":`${u.key}-${d}`;s.key=h}const{children:l=[]}=s;if(Array.isArray(l))for(let u=0;u<l.length;u++){const d=Je({},l[u]);l[u]=d,n.set(d,s),r.set(d,u),o.push(d)}}return e}function BC(t,e){const n=new FO;return n.registerPlugin(new jO),new V.Xz({width:t,height:e,container:document.createElement("div"),renderer:n})}function C2(t,e={},n=()=>{},r=o=>{throw o}){const o=Nu(t),{width:s=640,height:l=480,depth:u=0}=o,d=A2(o),h=T2(d),{canvas:p=BC(s,l),emitter:v=new sn,library:m}=e;e.canvas=p,e.emitter=v,e.externals={};const{width:b,height:_}=p.getConfig();(b!==s||_!==l)&&p.resize(s,l),v.emit(Cr.BEFORE_RENDER);const S=Xn(p.document.documentElement);return p.ready.then(()=>wv(Object.assign(Object.assign({},h),{width:s,height:l,depth:u}),S,e)).then(()=>{if(u){const[O,E]=p.document.documentElement.getPosition();p.document.documentElement.setPosition(O,E,-u/2)}p.requestAnimationFrame(()=>{p.requestAnimationFrame(()=>{v.emit(Cr.AFTER_RENDER),n==null||n()})})}).catch(O=>{r==null||r(O)}),L2(p.getConfig().container)}function jC(t,e={},n=()=>{},r=o=>{throw o}){var o;const{width:s=640,height:l=480}=t,u=T2(t),{group:d=new Group,emitter:h=new EventEmitter,library:p}=e;d!=null&&d.parentElement||error("renderToMountedElement can't render chart to unmounted group.");const v=select(d);return e.group=d,e.emitter=h,e.externals={},e.canvas=e.canvas||((o=d==null?void 0:d.ownerDocument)===null||o===void 0?void 0:o.defaultView),h.emit(ChartEvent.BEFORE_RENDER),plot(Object.assign(Object.assign({},u),{width:s,height:l}),v,e).then(()=>{var m;(m=e.canvas)===null||m===void 0||m.requestAnimationFrame(()=>{h.emit(ChartEvent.AFTER_RENDER),n==null||n()})}).catch(m=>{r==null||r(m)}),d}function eu(t,e={},n=!1,r=!0){const{canvas:o,emitter:s}=e;o&&(M2(o),n?o.destroy():o.destroyChildren()),r&&s.off()}function M2(t){const e=t.getRoot().querySelectorAll(`.${zt}`);e==null||e.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(o=>{o==null||o.destroy()})})}function L2(t){return typeof t=="string"?document.getElementById(t):t}function Vf(t,e){let n,r=-1,o=-1;if(e===void 0)for(const s of t)++o,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=o);else for(let s of t)(s=e(s,++o,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=o);return r}function Xc(t,e){let n=0,r=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(++n,r+=o);else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}var qc=function(t,e,n){var r,o,s,l,u=0;n||(n={});var d=function(){u=n.leading===!1?0:Date.now(),r=null,l=t.apply(o,s),r||(o=s=null)},h=function(){var p=Date.now();!u&&n.leading===!1&&(u=p);var v=e-(p-u);return o=this,s=arguments,v<=0||v>e?(r&&(clearTimeout(r),r=null),u=p,l=t.apply(o,s),r||(o=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(d,v)),l};return h.cancel=function(){clearTimeout(r),u=0,r=o=s=null},h};function P2(t){var e=document.createElement("div");e.innerHTML=t;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}function zC(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):e[r]===void 0?"":e[r]})}var UC=zC,I2=function(t,e){if(e==null){t.innerHTML="";return}t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,(0,X.ev)([],(0,X.CR)(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach(function(n){return t.appendChild(n)}):t.appendChild(e))};function Pv(t){return t===void 0&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var k2={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function ZC(t){var e;t===void 0&&(t="");var n=Pv(t);return e={},e[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=(0,X.pi)({flex:1},k2),e[".".concat(n.VALUE)]=(0,X.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},k2),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var HC=function(t){(0,X.ZT)(e,t);function e(n){var r=this,o,s,l=(s=(o=n.style)===null||o===void 0?void 0:o.template)===null||s===void 0?void 0:s.prefixCls,u=Pv(l);return r=t.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(u.CONTAINER,'"></div>'),title:'<div class="'.concat(u.TITLE,'"></div>'),item:'<li class="'.concat(u.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(u.NAME,`">
          <span class="`).concat(u.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(u.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(u.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:ZC(l)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,o=n.template;return r.map(function(s,l){var u=s.name,d=u===void 0?"":u,h=s.color,p=h===void 0?"black":h,v=s.index,m=(0,X._T)(s,["name","color","index"]),b=(0,X.pi)({name:d,color:p,index:v!=null?v:l},m);return P2(UC(o.item,b))})},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),t.prototype.destroy.call(this)},e.prototype.show=function(n,r){var o=this;if(n!==void 0&&r!==void 0){var s=this.element.style.visibility==="hidden",l=function(){o.attributes.x=n!=null?n:o.attributes.x,o.attributes.y=r!=null?r:o.attributes.y,o.updatePosition()};s?this.closeTransition(l):l()}this.element.style.visibility="visible"},e.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var o=this.attributes.enterable;o&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var n=this.attributes.template;this.element=P2(n.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:I2(this.element,n))}},e.prototype.renderHTMLTooltipElement=function(){var n,r,o=this.attributes,s=o.template,l=o.title,u=o.enterable,d=o.style,h=o.content,p=Pv(s.prefixCls),v=this.element;if(this.element.style.pointerEvents=u?"auto":"none",h)this.renderCustomContent();else{l?(v.innerHTML=s.title,v.getElementsByClassName(p.TITLE)[0].innerHTML=l):(r=(n=v.getElementsByClassName(p.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var m=this.HTMLTooltipItemsElements,b=document.createElement("ul");b.className=p.LIST,I2(b,m);var _=this.element.querySelector(".".concat(p.LIST));_?_.replaceWith(b):v.appendChild(b)}r6(v,d)},e.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,o=r.position,s=r.offset,l=n||o,u=l.split("-"),d={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},h=this.elementSize,p=h.width,v=h.height,m=[-p/2,-v/2];return u.forEach(function(b){var _=(0,X.CR)(m,2),S=_[0],O=_[1],E=(0,X.CR)(d[b],2),A=E[0],M=E[1];m=[S+(p/2+s[0])*A,O+(v/2+s[1])*M]}),m},e.prototype.setOffsetPosition=function(n){var r=(0,X.CR)(n,2),o=r[0],s=r[1],l=this.attributes,u=l.x,d=u===void 0?0:u,h=l.y,p=h===void 0?0:h,v=l.container,m=v.x,b=v.y;this.element.style.left="".concat(+d+m+o,"px"),this.element.style.top="".concat(+p+b+s,"px")},e.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,o=Date.now();this.timestamp>0&&o-this.timestamp<r||(this.timestamp=o,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(n){var r=(0,X.CR)(n,2),o=r[0],s=r[1],l=this.attributes,u=l.x,d=l.y,h=l.bounding,p=l.position;if(!h)return[o,s];var v=this.element,m=v.offsetWidth,b=v.offsetHeight,_=(0,X.CR)([+u+o,+d+s],2),S=_[0],O=_[1],E={left:"right",right:"left",top:"bottom",bottom:"top"},A=h.x,M=h.y,L=h.width,I=h.height,R={left:S<A,right:S+m>A+L,top:O<M,bottom:O+b>M+I},N=[];p.split("-").forEach(function(W){R[W]?N.push(E[W]):N.push(W)});var Z=N.join("-");return this.getRelativeOffsetFromCursor(Z)},e.prototype.isCursorEntered=function(n,r){if(this.element){var o=this.element.getBoundingClientRect(),s=o.x,l=o.y,u=o.width,d=o.height;return new Xr(s,l,u,d).isPointIn(n,r)}return!1},e.prototype.closeTransition=function(n){var r=this,o=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=o},10)},e.tag="tooltip",e}(zi),Js=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const ms="tooltipLocked";function qh(t,e){var n;if(e)return typeof e=="string"?document.querySelector(e):e;const r=(n=t.ownerDocument)===null||n===void 0?void 0:n.defaultView;return r?r.getContextService().getDomElement().parentElement:void 0}function VC(t){const e=t.getRenderBounds(),{min:[n,r],max:[o,s]}=e;return{x:n,y:r,width:o-n,height:s-r}}function WC(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function GC(t,e,n,r,o,s,l,u={},d=[10,10]){const h={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},p=new HC({className:"tooltip",style:{x:e,y:n,container:l,data:[],bounding:s,position:r,enterable:o,title:"",offset:d,template:{prefixCls:"g2-"},style:Je(h,u)}});return t.appendChild(p.HTMLTooltipElement),p}function R2({root:t,data:e,x:n,y:r,render:o,event:s,single:l,position:u="right-bottom",enterable:d=!1,css:h,mount:p,bounding:v,offset:m}){const b=qh(t,p),_=qh(t),S=l?_:t,O=v||VC(t),E=WC(_,b),{tooltipElement:A=GC(b,n,r,u,d,O,E,h,m)}=S,{items:M,title:L=""}=e;A.update(Object.assign({x:n,y:r,data:M.map(I=>Object.assign(Object.assign({},I),{value:!I.value&&I.value!==0?"":I.value})),title:L,position:u,enterable:d,container:E},o!==void 0&&{content:o(s,{items:M,title:L})})),S.tooltipElement=A}function tc({root:t,single:e,emitter:n,nativeEvent:r=!0,event:o=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const s=qh(t),l=e?s:t,{tooltipElement:u}=l;u&&u.hide(o==null?void 0:o.clientX,o==null?void 0:o.clientY),F2(t),B2(t),nu(t)}function Iv({root:t,single:e}){const n=qh(t),r=e?n:t;if(!r)return;const{tooltipElement:o}=r;o&&(o.destroy(),r.tooltipElement=void 0),F2(t),B2(t),nu(t)}function kv(t){const{value:e}=t;return Object.assign(Object.assign({},t),{value:e===void 0?"undefined":e})}function $C(t){var e,n,r,o,s,l,u;const{__data__:d}=t,{title:h,items:p=[]}=d;if(p.some(R=>a2 in R)){const R=p.filter(Zr).map(N=>{var{color:Z=D2(t)}=N,W=Js(N,["color"]);return Object.assign(Object.assign({},W),{color:Z})}).map(kv);return Object.assign(Object.assign({},h&&{title:h}),{items:R})}const m=(n=(e=d==null?void 0:d.normalized)===null||e===void 0?void 0:e.x)!==null&&n!==void 0?n:0,b=(r=t.parentNode)===null||r===void 0?void 0:r.__data__,_=(o=b==null?void 0:b.encode)!==null&&o!==void 0?o:{},{x:S={},y:O={},color:E={}}=_,{value:A=[]}=S,{value:M=[]}=O,{value:L=[]}=E,I=Math.min(Math.round(A.length*m),A.length-1);return{title:`${A[I]}, ${M[I]}`,items:[{name:(s=E.field)!==null&&s!==void 0?s:"value",value:L[I],color:((l=t.style)===null||l===void 0?void 0:l.fill)||((u=t.getAttribute)===null||u===void 0?void 0:u.call(t,"color"))||"#000"}]}}function YC(t){const{__data__:e}=t;if(Wa(t))return $C(t);const{title:n,items:r=[]}=e,o=r.filter(Zr).map(s=>{var{color:l=D2(t)}=s,u=Js(s,["color"]);return Object.assign(Object.assign({},u),{color:l})}).map(kv);return Object.assign(Object.assign({},n&&{title:n}),{items:o})}function D2(t){const e=t.getAttribute("fill"),n=t.getAttribute("stroke"),{__data__:r}=t,{color:o=e&&e!=="transparent"?e:n}=r;return o}function N2(t,e=n=>n){const n=new Map(t.map(r=>[e(r),r]));return Array.from(n.values())}function Kh(t,e,n,r=t.map(s=>s.__data__),o={}){const s=d=>d instanceof Date?+d:d,l=N2(r.map(d=>d.title),s).filter(Zr),u=r.flatMap((d,h)=>{const p=d.element||t[h],{items:v=[],title:m}=d,b=v.filter(Zr),_=n!==void 0?n:v.length<=1;return b.map(S=>{var{color:O=D2(p)||o.color,name:E}=S,A=Js(S,["color","name"]);const M=t1(e,d),L=_&&!(a2 in A)?M||E:E||M;return Object.assign(Object.assign({},A),{color:O,name:L||m})})}).map(kv);return Object.assign(Object.assign({},l.length>0&&{title:l.join(",")}),{items:N2(u,d=>`(${s(d.name)}, ${s(d.value)}, ${s(d.color)})`)})}function XC(t,e,n,r){var{plotWidth:o,plotHeight:s,mainWidth:l,mainHeight:u,startX:d,startY:h,transposed:p,polar:v,insetLeft:m,insetTop:b}=r,_=Js(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const S=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},_),O=(R,N,Z)=>{const W=new V.Cd({style:Object.assign({cx:R,cy:N,r:Z},S)});return t.appendChild(W),W},E=(R,N,Z,W)=>{const it=new V.x1({style:Object.assign({x1:R,x2:N,y1:Z,y2:W},S)});return t.appendChild(it),it},M=((R,N)=>{if(N.length===1)return N[0];const Z=N.map(it=>hi(it,R)),W=Vf(Z,it=>it);return N[W]})(n,e),L=()=>p?[d+M[0],d+M[0],h,h+s]:[d,d+o,M[1]+h,M[1]+h],I=()=>{const R=d+m+l/2,N=h+b+u/2,Z=hi([R,N],M);return[R,N,Z]};if(v){const[R,N,Z]=I(),W=t.ruleX||O(R,N,Z);W.style.cx=R,W.style.cy=N,W.style.r=Z,t.ruleX=W}else{const[R,N,Z,W]=L(),it=t.ruleX||E(R,N,Z,W);it.style.x1=R,it.style.x2=N,it.style.y1=Z,it.style.y2=W,t.ruleX=it}}function qC(t,e,n){var{plotWidth:r,plotHeight:o,mainWidth:s,mainHeight:l,startX:u,startY:d,transposed:h,polar:p,insetLeft:v,insetTop:m}=n,b=Js(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const _=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},b),S=e.map(W=>W[1]),O=e.map(W=>W[0]),E=Xc(S),A=Xc(O),M=()=>{if(p){const W=Math.min(s,l)/2,it=u+v+s/2,tt=d+m+l/2,pt=Xo(Oi([A,E],[it,tt])),K=it+W*Math.cos(pt),lt=tt+W*Math.sin(pt);return[it,K,tt,lt]}return h?[u,u+r,E+d,E+d]:[A+u,A+u,d,d+o]},[L,I,R,N]=M(),Z=()=>{const W=new V.x1({style:Object.assign({x1:L,x2:I,y1:R,y2:N},_)});return t.appendChild(W),W};if(O.length>0){const W=t.ruleY||Z();W.style.x1=L,W.style.x2=I,W.style.y1=R,W.style.y2=N,t.ruleY=W}}function F2(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function B2(t){t.ruleX&&(t.ruleX.remove(),t.ruleX=void 0)}function KC(t,{data:e,style:n,theme:r}){t.markers&&t.markers.forEach(l=>l.remove());const{type:o=""}=n,s=e.filter(l=>{const[{x:u,y:d}]=l;return Zr(u)&&Zr(d)}).map(l=>{const[{color:u,element:d},h]=l,p=u||d.style.fill||d.style.stroke||r.color,v=o==="hollow"?"transparent":p,m=o==="hollow"?p:"#fff";return new V.Cd({className:"g2-tooltip-marker",style:Object.assign({cx:h[0],cy:h[1],fill:v,r:4,stroke:m,lineWidth:2,pointerEvents:"none"},n)})});for(const l of s)t.appendChild(l);t.markers=s}function nu(t){t.markers&&(t.markers.forEach(e=>e.remove()),t.markers=[])}function ru(t,e){return Array.from(t.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[e]})}function Ra(t,e){return t===void 0?e:t}function j2(t){const{title:e,items:n}=t;return n.length===0&&e===void 0}function QC(t){return Array.from(t.values()).some(e=>{var n;return((n=e.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&e.tooltip})}function z2(t,e){const{innerWidth:n,innerHeight:r,marginLeft:o,paddingLeft:s,insetLeft:l,marginTop:u,paddingTop:d,insetTop:h}=t.getOptions();return{x:(e.x-o-s-l)/n,y:(e.y-u-d-h)/r}}function JC(t){const{x:e}=t;if(!e||!e.valueBandWidth)return!0;const{valueBandWidth:n}=e;return(0,be.Z)(n)?!0:new Set(n.values()).size===1}function tM(t,e){const{adjustedRange:n,valueBandWidth:r,valueStep:o}=t,s=Array.from(r.values()),l=Array.from(o.values()),d=n.map((h,p)=>{const v=(l[p]-s[p])/2;return[h-v,h+s[p]+v]}).findIndex(([h,p])=>h<=e&&e<=p);return d!==-1?d:e>.5?n.length-1:0}function U2({root:t,event:e,elements:n=[],coordinate:r,scale:o,shared:s}){var l,u;const d=E=>E.markType==="interval",h=n.every(d)&&!Rr(r),p=o.x,v=JC(o),m=o.series,b=(u=(l=p==null?void 0:p.getBandWidth)===null||l===void 0?void 0:l.call(p))!==null&&u!==void 0?u:0,_=m&&m.valueBandWidth?E=>{const A=Math.round(1/m.valueBandWidth);return E.__data__.x+E.__data__.series*b+b/(A*2)}:E=>E.__data__.x+b/2;h&&n.sort((E,A)=>_(E)-_(A));const S=E=>{const{target:A=io(n)}=E;return us(A,M=>M.classList?(Wa(M)&&Pg(M,"__data__.normalized",z2(r,{x:E.offsetX,y:E.offsetY})),M.classList.includes("element")):!1)};return(h?E=>{const A=Dc(t,E);if(!A)return;const[M]=r.invert(A),L=os(_).center,I=v?L(n,M):tM(p,M),R=n[I];if(!s){const N=n.find(Z=>Z!==R&&_(Z)===_(R));if(N)return S(E)||N}return R}:S)(e)}function Z2({root:t,event:e,elements:n,coordinate:r,scale:o,startX:s,startY:l}){const u=Yr(r),d=[],h=[];for(const It of n){const{__data__:_t}=It,{seriesX:Lt,title:$t,items:he}=_t;Lt?d.push(It):($t||he)&&h.push(It)}const p=It=>It.markType==="interval",v=h.length&&h.every(p)&&!Rr(r),m=It=>It.__data__.x,_=!!o.x.getBandWidth&&h.length>0;d.sort((It,_t)=>{const Lt=u?0:1,$t=he=>he.getBounds().min[Lt];return u?$t(_t)-$t(It):$t(It)-$t(_t)});const S=It=>{const _t=u?1:0,{min:Lt,max:$t}=It.getLocalBounds();return va([Lt[_t],$t[_t]])};v?n.sort((It,_t)=>m(It)-m(_t)):h.sort((It,_t)=>{const[Lt,$t]=S(It),[he,le]=S(_t),Ee=(Lt+$t)/2,Ue=(he+le)/2;return u?Ue-Ee:Ee-Ue});const O=new Map(d.map(It=>{const{__data__:_t}=It,{seriesX:Lt}=_t,$t=Lt.map((le,Ee)=>Ee),he=va($t,le=>Lt[+le]);return[It,[he,Lt]]})),{x:E}=o,A=E!=null&&E.getBandWidth?E.getBandWidth()/2:0,M=It=>{const[_t]=r.invert(It);return _t-A},L=(It,_t,Lt,$t)=>{const{_x:he}=It,le=he!==void 0?E.map(he):M(_t),Ee=$t.filter(Zr),[Ue,Be]=va([Ee[0],Ee[Ee.length-1]]),Qe=Ue===Be;if(!_&&(le<Ue||le>Be)&&!Qe)return null;const en=os(cn=>$t[+cn]).center,Ge=en(Lt,le);return Lt[Ge]},I=v?(It,_t)=>{const Lt=os(m).center,$t=Lt(_t,M(It)),he=_t[$t];return $r(_t,m).get(m(he))}:(It,_t)=>{const $t=It[u?1:0],he=_t.filter(Ue=>{const[Be,Qe]=S(Ue);return $t>=Be&&$t<=Qe});if(!_||he.length>0)return he;const le=os(Ue=>{const[Be,Qe]=S(Ue);return(Be+Qe)/2}).center,Ee=le(_t,$t);return[_t[Ee]].filter(Zr)},R=(It,_t)=>{const{__data__:Lt}=It;return Object.fromEntries(Object.entries(Lt).filter(([$t])=>$t.startsWith("series")&&$t!=="series").map(([$t,he])=>{const le=he[_t];return[t0($t.replace("series","")),le]}))},N=Dc(t,e);if(!N)return;const Z=[N[0]-s,N[1]-l];if(!Z)return;const W=I(Z,h),it=[],tt=[];for(const It of d){const[_t,Lt]=O.get(It),$t=L(e,Z,_t,Lt);if($t!==null){it.push(It);const he=R(It,$t),{x:le,y:Ee}=he,Ue=r.map([(le||0)+A,Ee||0]);tt.push([Object.assign(Object.assign({},he),{element:It}),Ue])}}const pt=Array.from(new Set(tt.map(It=>It[0].x))),K=pt[Vf(pt,It=>Math.abs(It-M(Z)))],lt=tt.filter(It=>It[0].x===K),ft=[...lt.map(It=>It[0]),...W.map(It=>It.__data__)];return{selectedElements:[...it,...W],selectedData:ft,filteredSeriesData:lt,abstractX:M}}function H2(t,e){var{elements:n,sort:r,filter:o,scale:s,coordinate:l,crosshairs:u,crosshairsX:d,crosshairsY:h,render:p,groupName:v,emitter:m,wait:b=50,leading:_=!0,trailing:S=!1,startX:O=0,startY:E=0,body:A=!0,single:M=!0,position:L,enterable:I,mount:R,bounding:N,theme:Z,offset:W,disableNative:it=!1,marker:tt=!0,preserve:pt=!1,style:K={},css:lt={},clickLock:ft=!1,disableAutoHide:vt=!1}=e,It=Js(e,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css","clickLock","disableAutoHide"]);const _t=n(t),Lt=Je(K,It),$t=Rr(l),he=Yr(l),{innerWidth:le,innerHeight:Ee,width:Ue,height:Be,insetLeft:Qe,insetTop:en}=l.getOptions(),Ge=qc(Yn=>{var ti;if(ft&&t.getAttribute(ms))return;const ci=Dc(t,Yn);if(!ci)return;const Ir=_f(t),Hi=Ir.min[0],Li=Ir.min[1],{selectedElements:lo,selectedData:li,filteredSeriesData:yi,abstractX:uo}=Z2({root:t,event:Yn,elements:_t,coordinate:l,scale:s,startX:O,startY:E}),wi=Kh(lo,s,v,li,Z);if(r&&wi.items.sort((Fi,Oa)=>r(Fi)-r(Oa)),o&&(wi.items=wi.items.filter(o)),lo.length===0||j2(wi)){cn(Yn);return}if(A&&R2({root:t,data:wi,x:ci[0]+Hi,y:ci[1]+Li,render:p,event:Yn,single:M,position:L,enterable:I,mount:R,bounding:N,css:lt,offset:W}),u||d||h){const Fi=En(Lt,"crosshairs"),Oa=Object.assign(Object.assign({},Fi),En(Lt,"crosshairsX")),ud=Object.assign(Object.assign({},Fi),En(Lt,"crosshairsY")),Tp=yi.map(nO=>nO[1]);d&&XC(t,Tp,ci,Object.assign(Object.assign({},Oa),{plotWidth:le,plotHeight:Ee,mainWidth:Ue,mainHeight:Be,insetLeft:Qe,insetTop:en,startX:O,startY:E,transposed:he,polar:$t})),h&&qC(t,Tp,Object.assign(Object.assign({},ud),{plotWidth:le,plotHeight:Ee,mainWidth:Ue,mainHeight:Be,insetLeft:Qe,insetTop:en,startX:O,startY:E,transposed:he,polar:$t}))}if(tt){const Fi=En(Lt,"marker");KC(t,{data:yi,style:Fi,theme:Z})}const ei=(ti=yi[0])===null||ti===void 0?void 0:ti[0].x,xo=ei!=null?ei:uo(focus);m.emit("tooltip:show",Object.assign(Object.assign({},Yn),{nativeEvent:!0,data:Object.assign(Object.assign({},wi),{data:{x:ss(s.x,xo,!0)}})}))},b,{leading:_,trailing:S}),cn=Yn=>{ft&&t.getAttribute(ms)||vt||tc({root:t,single:M,emitter:m,event:Yn})},wn=()=>{Iv({root:t,single:M})},Mn=Yn=>{var ti,{nativeEvent:ci,data:Ir,offsetX:Hi,offsetY:Li}=Yn,lo=Js(Yn,["nativeEvent","data","offsetX","offsetY"]);if(ci)return;const li=(ti=Ir==null?void 0:Ir.data)===null||ti===void 0?void 0:ti.x,uo=s.x.map(li),[wi,ei]=l.map([uo,.5]),xo=t.getRenderBounds(),Fi=xo.min[0],Oa=xo.min[1];Ge(Object.assign(Object.assign({},lo),{offsetX:Hi!==void 0?Hi:Fi+wi,offsetY:Li!==void 0?Li:Oa+ei,_x:li}))},Sn=()=>{tc({root:t,single:M,emitter:m,nativeEvent:!1})},Fn=()=>{zn(),wn()},Zn=Yn=>{Dc(t,Yn)||cn(Yn)},Gn=()=>{$n()},rr=Yn=>{ft&&t.setAttribute(ms,!t.getAttribute(ms)),Ge(Yn)},$n=()=>{it||(t.addEventListener("pointerdown",rr),t.addEventListener("pointerenter",Ge),t.addEventListener("pointermove",Ge),t.addEventListener("pointerleave",Zn),t.addEventListener("pointerup",cn))},zn=()=>{it||(t.removeEventListener("pointerdown",rr),t.removeEventListener("pointerenter",Ge),t.removeEventListener("pointermove",Ge),t.removeEventListener("pointerleave",Zn),t.removeEventListener("pointerup",cn))};return $n(),m.on("tooltip:show",Mn),m.on("tooltip:hide",Sn),m.on("tooltip:disable",Fn),m.on("tooltip:enable",Gn),()=>{zn(),m.off("tooltip:show",Mn),m.off("tooltip:hide",Sn),m.off("tooltip:disable",Fn),m.off("tooltip:enable",Gn),pt?tc({root:t,single:M,emitter:m,nativeEvent:!1}):wn()}}function eM(t,{elements:e,coordinate:n,scale:r,render:o,groupName:s,sort:l,filter:u,emitter:d,wait:h=50,leading:p=!0,trailing:v=!1,groupKey:m=K=>K,single:b=!0,position:_,enterable:S,datum:O,view:E,mount:A,bounding:M,theme:L,offset:I,shared:R=!1,body:N=!0,disableNative:Z=!1,preserve:W=!1,css:it={},clickLock:tt=!1,disableAutoHide:pt=!1}){const K=e(t),lt=$r(K,m),ft=qc(Ue=>{if(tt&&t.getAttribute(ms))return;const Be=U2({root:t,event:Ue,elements:K,coordinate:n,scale:r,shared:R});if(!Be){pt||tc({root:t,single:b,emitter:d,event:Ue});return}const Qe=m(Be),en=lt.get(Qe);if(!en)return;const Ge=en.length===1&&!R?YC(en[0]):Kh(en,r,s,void 0,L);if(l&&Ge.items.sort((Mn,Sn)=>l(Mn)-l(Sn)),u&&(Ge.items=Ge.items.filter(u)),j2(Ge)){pt||tc({root:t,single:b,emitter:d,event:Ue});return}const{offsetX:cn,offsetY:wn}=Ue;N&&R2({root:t,data:Ge,x:cn,y:wn,render:o,event:Ue,single:b,position:_,enterable:S,mount:A,bounding:M,css:it,offset:I}),d.emit("tooltip:show",Object.assign(Object.assign({},Ue),{nativeEvent:!0,data:Object.assign(Object.assign({},Ge),{data:i0(Be,E)})}))},h,{leading:p,trailing:v}),vt=Ue=>{pt||tc({root:t,single:b,emitter:d,event:Ue})},It=Ue=>{tt&&t.setAttribute(ms,!t.getAttribute(ms)),ft(Ue)},_t=()=>{Z||(t.addEventListener("pointerdown",It),t.addEventListener("pointermove",ft),t.addEventListener("pointerleave",vt),t.addEventListener("pointerup",vt))},Lt=()=>{Z||(t.removeEventListener("pointerdown",It),t.removeEventListener("pointermove",ft),t.removeEventListener("pointerleave",vt),t.removeEventListener("pointerup",vt))},$t=({nativeEvent:Ue,offsetX:Be,offsetY:Qe,data:en})=>{if(Ue)return;const{data:Ge}=en,cn=xh(K,Ge,O);if(!cn)return;const wn=cn.getBBox(),{x:Mn,y:Sn,width:Fn,height:Zn}=wn,Gn=t.getBBox();ft({target:cn,offsetX:Be!==void 0?Be+Gn.x:Mn+Fn/2,offsetY:Qe!==void 0?Qe+Gn.y:Sn+Zn/2})},he=({nativeEvent:Ue}={})=>{Ue||tc({root:t,single:b,emitter:d,nativeEvent:!1})},le=()=>{Lt(),Iv({root:t,single:b})},Ee=()=>{_t()};return d.on("tooltip:show",$t),d.on("tooltip:hide",he),d.on("tooltip:enable",Ee),d.on("tooltip:disable",le),_t(),()=>{Lt(),d.off("tooltip:show",$t),d.off("tooltip:hide",he),d.off("tooltip:enable",Ee),d.off("tooltip:disable",le),W?tc({root:t,single:b,emitter:d,nativeEvent:!1}):Iv({root:t,single:b})}}function V2(t){const{shared:e,crosshairs:n,crosshairsX:r,crosshairsY:o,series:s,name:l,item:u=()=>({}),facet:d=!1}=t,h=Js(t,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(p,v,m)=>{const{container:b,view:_}=p,{scale:S,markState:O,coordinate:E,theme:A}=_,M=ru(O,"seriesTooltip"),L=ru(O,"crosshairs"),I=No(b),R=Ra(s,M),N=Ra(n,L);if(h.clickLock&&!d&&I.setAttribute(ms,!1),R&&QC(O)&&!d)return H2(I,Object.assign(Object.assign({},h),{theme:A,elements:Ws,scale:S,coordinate:E,crosshairs:N,crosshairsX:Ra(Ra(r,n),!1),crosshairsY:Ra(o,N),item:u,emitter:m}));if(R&&d){const Z=v.filter(ft=>ft!==p&&ft.options.parentKey===p.options.key),W=w_(p,v),it=Z[0].view.scale,tt=I.getBounds(),pt=tt.min[0],K=tt.min[1];Object.assign(it,{facet:!0});const lt=I.parentNode.parentNode;return h.clickLock&&lt.setAttribute(ms,!1),H2(lt,Object.assign(Object.assign({},h),{theme:A,elements:()=>W,scale:it,coordinate:E,crosshairs:Ra(n,L),crosshairsX:Ra(Ra(r,n),!1),crosshairsY:Ra(o,N),item:u,startX:pt,startY:K,emitter:m}))}return eM(I,Object.assign(Object.assign({},h),{datum:Qo(_),elements:Ws,scale:S,coordinate:E,groupKey:e?Gs(_):void 0,item:u,emitter:m,view:_,theme:A,shared:e}))}}V2.props={reapplyWhenUpdate:!0};const iu=t=>t?parseInt(t):0;function nM(t){const e=getComputedStyle(t),n=t.clientWidth||iu(e.width),r=t.clientHeight||iu(e.height),o=iu(e.paddingLeft)+iu(e.paddingRight),s=iu(e.paddingTop)+iu(e.paddingBottom);return{width:n-o,height:r-s}}function a7(t){const{height:e,width:n,padding:r=0,paddingLeft:o=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:u=r,margin:d=0,marginLeft:h=d,marginRight:p=d,marginTop:v=d,marginBottom:m=d,inset:b=0,insetLeft:_=b,insetRight:S=b,insetTop:O=b,insetBottom:E=b}=t,A=I=>I==="auto"?20:I,M=n-A(o)-A(s)-h-p-_-S,L=e-A(l)-A(u)-v-m-O-E;return{width:M,height:L}}function Rv(t,e){const n=[t];for(;n.length;){const r=n.shift();e&&e(r);const o=r.children||[];for(const s of o)n.push(s)}}class Dv{constructor(e={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=e}map(e=n=>n){const n=e(this.value);return this.value=n,this}attr(e,n){return arguments.length===1?this.value[e]:this.map(r=>(r[e]=n,r))}append(e){const n=new e({});return n.children=[],this.push(n),n}push(e){return e.parentNode=this,e.index=this.children.length,this.children.push(e),this}remove(){const e=this.parentNode;if(e){const{children:n}=e,r=n.findIndex(o=>o===this);n.splice(r,1)}return this}getNodeByKey(e){let n=null;return Rv(this,o=>{e===o.attr("key")&&(n=o)}),n}getNodesByType(e){const n=[];return Rv(this,o=>{e===o.type&&n.push(o)}),n}getNodeByType(e){let n=null;return Rv(this,r=>{n||e===r.type&&(n=r)}),n}call(e,...n){return e(this.map(),...n),this}getRoot(){let e=this;for(;e&&e.parentNode;)e=e.parentNode;return e}}var W2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Nv=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],rM="__remove__",G2="__callback__",Qh=1,$2=1;function iM(t){if(t===void 0){const e=document.createElement("div");return e[rM]=!0,e}return typeof t=="string"?document.getElementById(t):t}function Kc(t){const e=t.parentNode;e&&e.removeChild(t)}function oM(t){if(t.type!==null)return t;const e=t.children[t.children.length-1];for(const n of Nv)e.attr(n,t.attr(n));return e}function Y2(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function Fv(t,e){const{width:n,height:r,autoFit:o,depth:s=0}=t;let l=640,u=480;if(o){const{width:d,height:h}=nM(e);l=d||l,u=h||u}return l=n||l,u=r||u,{width:Math.max((0,be.Z)(l)?l:Qh,Qh),height:Math.max((0,be.Z)(u)?u:$2,$2),depth:s}}function aM(t){const e=oM(t),n=[e],r=new Map;for(r.set(e,Y2(e));n.length;){const o=n.pop(),s=r.get(o),{children:l=[]}=o;for(const u of l)if(u.type===G2)s.children=u.value;else{const d=Y2(u),{children:h=[]}=s;h.push(d),n.push(u),r.set(u,d),s.children=h}}return r.get(e)}function s7(t,e){return typeof t=="function"?!0:new Set(Object.keys(e)).has(t)}function sM(t,e){return typeof t!="function"&&new Set(Object.keys(e)).has(t)}function cM(t,e,n,r,o){const{type:s}=t,{type:l=n||s}=e;if(sM(l,o)){for(const u of Nv)t.attr(u)!==void 0&&e[u]===void 0&&(e[u]=t.attr(u));return e}if(s7(l,r)){const u={type:"view"},d=Object.assign({},e);for(const h of Nv)d[h]!==void 0&&(u[h]=d[h],delete d[h]);return Object.assign(Object.assign({},u),{children:[d]})}return e}function lM(t,e,n){if(typeof t=="function")return e.mark;const o=Object.assign(Object.assign({},e),n)[t];if(!o)throw new Error(`Unknown mark: ${t}.`);return o}function uM(t,e,n){if(typeof t=="function"){const d=new Dv;return d.value=t,d.type=G2,d}const{type:r,children:o}=t,s=W2(t,["type","children"]),l=lM(r,e,n),u=new l;return u.value=s,u.type=r,u}function fM(t,e){const{type:n,children:r}=e,o=W2(e,["type","children"]);t.type===n||n===void 0?i1(t.value,o):typeof n=="string"&&(t.type=n,t.value=o)}function dM(t,e,n,r){if(!t)return;const o=[[t,e]];for(;o.length;){const[s,l]=o.shift(),u=uM(l,n,r);Array.isArray(s.children)&&s.push(u);const{children:d}=l;if(Array.isArray(d))for(const h of d)o.push([u,h]);else typeof d=="function"&&o.push([u,d])}}function c7(t,e,n,r,o){const s=cM(t,e,n,r,o),l=[[null,t,s]];for(;l.length;){const[u,d,h]=l.shift();if(!d)dM(u,h,r,o);else if(!h)d.remove();else{fM(d,h);const{children:p}=h,{children:v}=d;if(Array.isArray(p)&&Array.isArray(v)){const m=Math.max(p.length,v.length);for(let b=0;b<m;b++){const _=p[b],S=v[b];l.push([d,S,_])}}else typeof p=="function"&&l.push([d,null,p])}}}function hM(){let t,e;return[new Promise((r,o)=>{e=r,t=o}),e,t]}function X2(t,e,{key:n=e}){t.prototype[e]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function pM(t,e,{key:n=e}){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const o=[...this.attr(n)||[],r];return this.attr(n,o)}}function gM(t,e,{key:n=e}){t.prototype[e]=function(r,o){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const s=this.attr(n)||{};return s[r]=arguments.length===1?!0:o,this.attr(n,s)}}function vM(t,e,n){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(e);if(Array.isArray(r))return this.attr(e,{items:r});if(vl(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(e,r);if(r===null||r===!1)return this.attr(e,r);const o=this.attr(e)||{},{items:s=[]}=o;return s.push(r),o.items=s,this.attr(e,o)}}function mM(t,e,{ctor:n}){t.prototype[e]=function(r){const o=this.append(n);return e==="mark"&&(o.type=r),o}}function q2(t,e,{ctor:n}){t.prototype[e]=function(){return this.type=null,this.append(n)}}function Jh(t){return e=>{for(const[n,r]of Object.entries(t)){const{type:o}=r;o==="value"?X2(e,n,r):o==="array"?pM(e,n,r):o==="object"?gM(e,n,r):o==="node"?mM(e,n,r):o==="container"?q2(e,n,r):o==="mix"&&vM(e,n,r)}return e}}function K2(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,{type:"node",ctor:n}]))}const Q2={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},yM=Object.assign(Object.assign({},Q2),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),bM=Object.assign(Object.assign({},Q2),{labelTransform:{type:"array"}});var _M=function(t,e,n,r){var o=arguments.length,s=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(s=(o<3?l(s):o>3?l(e,n,s):l(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};let tp=class extends Dv{changeData(e){var n;const r=this.getRoot();if(r)return this.attr("data",e),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(o=>{o.attr("data",e)}),r==null?void 0:r.render()}getView(){const e=this.getRoot(),{views:n}=e.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var e;return(e=this.getView())===null||e===void 0?void 0:e.scale}getScaleByChannel(e){const n=this.getScale();if(n)return n[e]}getCoordinate(){var e;return(e=this.getView())===null||e===void 0?void 0:e.coordinate}getTheme(){var e;return(e=this.getView())===null||e===void 0?void 0:e.theme}getGroup(){const e=this._key;return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}show(){const e=this.getGroup();e&&!e.isVisible()&&kl(e)}hide(){const e=this.getGroup();e&&e.isVisible()&&Ki(e)}};tp=_M([Jh(bM)],tp);var xM=function(t,e,n,r){var o=arguments.length,s=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(s=(o<3?l(s):o>3?l(e,n,s):l(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};let J2=class extends Dv{changeData(e){const n=this.getRoot();if(n)return this.attr("data",e),n==null?void 0:n.render()}getMark(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(!n)return;const{markState:r}=n,o=Array.from(r.keys()).find(s=>s.key===this.attr("key"));return r.get(o)}getScale(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(e){var n,r;const o=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(o)return(r=o==null?void 0:o.scale)===null||r===void 0?void 0:r[e]}getGroup(){const e=this.attr("key");return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}};J2=xM([Jh(yM)],J2);var SM=function(t,e,n,r){var o=arguments.length,s=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(s=(o<3?l(s):o>3?l(e,n,s):l(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},Bv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const OM="G2_CHART_KEY";class EM extends tp{constructor(e){const{container:n,canvas:r,renderer:o,plugins:s,lib:l,createCanvas:u}=e,d=Bv(e,["container","canvas","renderer","plugins","lib","createCanvas"]);super(d,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailingClear=null,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=Hy(()=>{this.forceFit()},300),this._renderer=o||new FO,this._plugins=s||[],this._container=iM(n),this._emitter=new sn,this._context={library:Object.assign(Object.assign({},l),My),emitter:this._emitter,canvas:r,createCanvas:u},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._bindAutoFit(),this._rendering=!0;const e=new Promise((s,l)=>C2(this._computedOptions(),this._context,this._createResolve(s),this._createReject(l))),[n,r,o]=hM();return e.then(r).then(()=>{if(this._trailingClear){const s=this.options();this._trailingClear(),this._trailing&&this.options(s)}}).catch(o).then(()=>{this._trailingClear=null,this._renderTrailing()}),n}options(e){if(arguments.length===0)return aM(this);const{type:n}=e;return n&&(this._previousDefinedType=n),c7(this,e,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(e,n,r){return this._emitter.on(e,n,r),this}once(e,n){return this._emitter.once(e,n),this}emit(e,...n){return this._emitter.emit(e,...n),this}off(e,n){return this._emitter.off(e,n),this}clear(e=!0){if(this._rendering){this._trailingClear=()=>{this.clear(e)},this._reset();return}const n=this.options();this.emit(Cr.BEFORE_CLEAR),this._reset(),eu(n,this._context,!1,e),this.emit(Cr.AFTER_CLEAR)}destroy(){const e=this.options();this.emit(Cr.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),eu(e,this._context,!0),this._container[rM]&&Kc(this._container),this.emit(Cr.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:e,height:n}=Fv(this.options(),this._container);if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(Cr.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(Cr.AFTER_CHANGE_SIZE)}),r}changeSize(e,n){if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(Cr.BEFORE_CHANGE_SIZE),this.attr("width",e),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(Cr.AFTER_CHANGE_SIZE)}),r}getDataByXY(e,n={}){const{shared:r=!1,series:o,facet:s=!1,startX:l=0,startY:u=0}=n,{canvas:d,views:h}=this._context,{document:p}=d,{x:v,y:m}=e,{coordinate:b,scale:_,markState:S,data:O,key:E}=h[0],A=p.getElementsByClassName(ct),M=r?tt=>tt.__data__.x:tt=>tt,L=$r(A,M),I=p.getElementsByClassName(zt)[0],R=No(I),N=tt=>Array.from(tt.values()).some(pt=>{var K,lt;return((K=pt.interaction)===null||K===void 0?void 0:K.seriesTooltip)||((lt=pt.channels)===null||lt===void 0?void 0:lt.some(ft=>ft.name==="series"&&ft.values!==void 0))}),Z=Ra(o,N(S)),W=tt=>Qn(tt,"__data__.data",null),it=tt=>tt.map(W);try{if(Z&&N(S)&&!s){const{selectedData:lt}=Z2({root:R,event:{offsetX:v,offsetY:m},elements:A,coordinate:b,scale:_,startX:l,startY:u}),ft=O.get(`${E}-0`);return lt.map(({index:vt})=>ft[vt])}const tt=U2({root:R,event:{offsetX:v,offsetY:m},elements:A,coordinate:b,scale:_,shared:r});if(Wa(tt))return i0(tt,O.get(E));const pt=M(tt),K=L.get(pt);return K?it(K):[]}catch(tt){const pt=d.document.elementFromPointSync(v,m);return pt?W(pt):[]}}_create(){const{library:e}=this._context,n=s=>s.startsWith("mark.")||s==="component.axisX"||s==="component.axisY"||s==="component.legends",r=["mark.mark",...Object.keys(e).filter(n)];this._marks={};for(const s of r){const l=s.split(".").pop();class u extends J2{constructor(){super({},l)}}this._marks[l]=u,this[l]=function(d){const h=this.append(u);return l==="mark"&&(h.type=d),h}}const o=["composition.view",...Object.keys(e).filter(s=>s.startsWith("composition.")&&s!=="composition.mark")];this._compositions=Object.fromEntries(o.map(s=>{const l=s.split(".").pop();let u=class extends tp{constructor(){super({},l)}};return u=SM([Jh(K2(this._marks))],u),[l,u]}));for(const s of Object.values(this._compositions))Jh(K2(this._compositions))(s);for(const s of o){const l=s.split(".").pop();this[l]=function(){const u=this._compositions[l];return this.type=null,this.append(u)}}}_reset(){const e=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||e.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const e=this._trailingResolve.bind(this);this._trailingResolve=null,e(this)}).catch(e=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(e)}))}_createResolve(e){return()=>{this._rendering=!1,e(this)}}_createReject(e){return n=>{this._rendering=!1,e(n)}}_computedOptions(){const e=this.options(),{key:n=OM}=e,{width:r,height:o,depth:s}=Fv(e,this._container);return this._width=r,this._height=o,this._key=n,Object.assign(Object.assign({key:this._key},e),{width:r,height:o,depth:s})}_createCanvas(){const{width:e,height:n}=Fv(this.options(),this._container);this._plugins.push(new jO),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new V.Xz({container:this._container,width:e,height:n,renderer:this._renderer})}_addToTrailing(){var e;return(e=this._trailingResolve)===null||e===void 0||e.call(this,this),this._trailing=!0,new Promise((r,o)=>{this._trailingResolve=r,this._trailingReject=o})}_bindAutoFit(){const e=this.options(),{autoFit:n}=e;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}function wM(t,e){class n extends t{constructor(o){super(Object.assign(Object.assign({},o),{lib:e}))}}return n}var AM=Object.prototype.hasOwnProperty,jv=function(t,e){if(t===null||!Aa(t))return{};var n={};return q0(e,function(r){AM.call(t,r)&&(n[r]=t[r])}),n};function t3(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ec(t,e,n,r,o){for(var s=t.children,l,u=-1,d=s.length,h=t.value&&(r-e)/t.value;++u<d;)l=s[u],l.y0=n,l.y1=o,l.x0=e,l.x1=e+=l.value*h}function TM(){var t=1,e=1,n=0,r=!1;function o(l){var u=l.height+1;return l.x0=l.y0=n,l.x1=t,l.y1=e/u,l.eachBefore(s(e,u)),r&&l.eachBefore(t3),l}function s(l,u){return function(d){d.children&&ec(d,d.x0,l*(d.depth+1)/u,d.x1,l*(d.depth+2)/u);var h=d.x0,p=d.y0,v=d.x1-n,m=d.y1-n;v<h&&(h=v=(h+v)/2),m<p&&(p=m=(p+m)/2),d.x0=h,d.y0=p,d.x1=v,d.y1=m}}return o.round=function(l){return arguments.length?(r=!!l,o):r},o.size=function(l){return arguments.length?(t=+l[0],e=+l[1],o):[t,e]},o.padding=function(l){return arguments.length?(n=+l,o):n},o}var CM=D(9783);function MM(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function LM(){return this.eachAfter(MM)}var e3=D(64599);function l7(t,e){var n=-1,r=e3(this),o;try{for(r.s();!(o=r.n()).done;){var s=o.value;t.call(e,s,++n,this)}}catch(l){r.e(l)}finally{r.f()}return this}function PM(t,e){for(var n=this,r=[n],o,s,l=-1;n=r.pop();)if(t.call(e,n,++l,this),o=n.children)for(s=o.length-1;s>=0;--s)r.push(o[s]);return this}function IM(t,e){for(var n=this,r=[n],o=[],s,l,u,d=-1;n=r.pop();)if(o.push(n),s=n.children)for(l=0,u=s.length;l<u;++l)r.push(s[l]);for(;n=o.pop();)t.call(e,n,++d,this);return this}function u7(t,e){var n=-1,r=e3(this),o;try{for(r.s();!(o=r.n()).done;){var s=o.value;if(t.call(e,s,++n,this))return s}}catch(l){r.e(l)}finally{r.f()}}function kM(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,o=r&&r.length;--o>=0;)n+=r[o].value;e.value=n})}function RM(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function DM(t){for(var e=this,n=NM(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var o=r.length;t!==n;)r.splice(o,0,t),t=t.parent;return r}function NM(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),o=null;for(t=n.pop(),e=r.pop();t===e;)o=t,t=n.pop(),e=r.pop();return o}function FM(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function n3(){return Array.from(this)}function zv(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function BM(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}var r3=D(15009),i3=r3().mark(Uv);function Uv(){var t,e,n,r,o,s;return r3().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=this,n=[t];case 1:e=n.reverse(),n=[];case 2:if(!(t=e.pop())){u.next=8;break}return u.next=5,t;case 5:if(r=t.children)for(o=0,s=r.length;o<s;++o)n.push(r[o]);u.next=2;break;case 8:if(n.length){u.next=1;break}case 9:case"end":return u.stop()}},i3,this)}function ou(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=ep)):e===void 0&&(e=o3);for(var n=new au(t),r,o=[n],s,l,u,d;r=o.pop();)if((l=e(r.data))&&(d=(l=Array.from(l)).length))for(r.children=l,u=d-1;u>=0;--u)o.push(s=l[u]=new au(l[u])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Qc)}function jM(){return ou(this).eachBefore(zM)}function o3(t){return t.children}function ep(t){return Array.isArray(t)?t[1]:null}function zM(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Qc(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function au(t){this.data=t,this.depth=this.height=0,this.parent=null}au.prototype=ou.prototype=CM({constructor:au,count:LM,each:l7,eachAfter:IM,eachBefore:PM,find:u7,sum:kM,sort:RM,path:DM,ancestors:FM,descendants:n3,leaves:zv,links:BM,copy:jM},Symbol.iterator,Uv);function Zv(t,e){for(var n in e)e.hasOwnProperty(n)&&n!=="constructor"&&e[n]!==void 0&&(t[n]=e[n])}function a3(t,e,n,r){return e&&Zv(t,e),n&&Zv(t,n),r&&Zv(t,r),t}const UM={field:"value",size:[1,1],round:!1,padding:0,sort:(t,e)=>e.value-t.value,as:["x","y"],ignoreParentValue:!0},on="nodeIndex",Wf="childNodeCount",ZM="nodeAncestor",Hv="Invalid field: it must be a string!";function s3(t,e){const{field:n,fields:r}=t;if((0,ne.Z)(n))return n;if((0,Sr.Z)(n))return console.warn(Hv),n[0];if(console.warn(`${Hv} will try to get fields instead.`),(0,ne.Z)(r))return r;if((0,Sr.Z)(r)&&r.length)return r[0];if(e)return e;throw new TypeError(Hv)}function HM(t){const e=[];if(t&&t.each){let n,r;t.each(o=>{var s,l;o.parent!==n?(n=o.parent,r=0):r+=1;const u=mf((((s=o.ancestors)===null||s===void 0?void 0:s.call(o))||[]).map(d=>e.find(h=>h.name===d.name)||d),({depth:d})=>d>0&&d<o.depth);o[ZM]=u,o[Wf]=((l=o.children)===null||l===void 0?void 0:l.length)||0,o[on]=r,e.push(o)})}else t&&t.eachNode&&t.eachNode(n=>{e.push(n)});return e}function VM(t,e){e=a3({},UM,e);const n=e.as;if(!(0,Sr.Z)(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=s3(e)}catch(d){console.warn(d)}const s=(d=>TM().size(e.size).round(e.round).padding(e.padding)(ou(d).sum(h=>Ml(h.children)?e.ignoreParentValue?0:h[r]-rb(h.children,(p,v)=>p+v[r],0):h[r]).sort(e.sort)))(t),l=n[0],u=n[1];return s.each(d=>{var h,p;d[l]=[d.x0,d.x1,d.x1,d.x0],d[u]=[d.y1,d.y1,d.y0,d.y0],d.name=d.name||((h=d.data)===null||h===void 0?void 0:h.name)||((p=d.data)===null||p===void 0?void 0:p.label),d.data.name=d.name,["x0","x1","y0","y1"].forEach(v=>{n.indexOf(v)===-1&&delete d[v]})}),HM(s)}var c3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Da="sunburst",Vv="markType",f7="value",l3="path",np="ancestor-node";function WM(t){const{data:e,encode:n}=t,{color:r,value:o}=n,l=VM(e,{field:o,type:"hierarchy.partition",as:["x","y"]}),u=[];return l.forEach(d=>{var h,p,v,m;if(d.depth===0)return null;let b=d.data.name;const _=[b];let S=Object.assign({},d);for(;S.depth>1;)b=`${(h=S.parent.data)===null||h===void 0?void 0:h.name} / ${b}`,_.unshift((p=S.parent.data)===null||p===void 0?void 0:p.name),S=S.parent;const O=Object.assign(Object.assign(Object.assign({},jv(d.data,[o])),{[l3]:b,[np]:S.data.name}),d);r&&r!==np&&(O[r]=d.data[r]||((m=(v=d.parent)===null||v===void 0?void 0:v.data)===null||m===void 0?void 0:m[r])),u.push(O)}),u.map(d=>{const h=d.x.slice(0,2),p=[d.y[2],d.y[0]];return h[0]===h[1]&&(p[0]=p[1]=(d.y[2]+d.y[0])/2),Object.assign(Object.assign({},d),{x:h,y:p,fillOpacity:Math.pow(.85,d.depth)})})}const rp={id:Da,encode:{x:"x",y:"y",key:l3,color:np,value:"value"},axis:{x:!1,y:!1},style:{[Vv]:Da,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[Wf]:Wf,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},u3=t=>{const{encode:e,data:n=[]}=t,r=c3(t,["encode","data"]),o=Object.assign(Object.assign({},r.coordinate),{innerRadius:Math.max(Qn(r,["coordinate","innerRadius"],.2),1e-5)}),s=Object.assign(Object.assign({},rp.encode),e),{value:l}=s,u=WM({encode:s,data:n});return[Je({},rp,Object.assign(Object.assign({type:"rect",data:u,encode:s,tooltip:{title:"path",items:[d=>({name:l,value:d[l]})]}},r),{coordinate:o}))]};u3.props={};var GM=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return q0(t,function(n,r){(0,mo.Z)(t)&&r==="prototype"||e.push(r)}),e},su=GM,$M=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const YM=t=>t.querySelectorAll(".element").filter(e=>Qn(e,["style",Vv])===Da);function XM(t){return Xn(t).select(`.${ue}`).node()}const f3={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function qM(t={}){const{breadCrumb:e={},isFixedColor:n=!1}=t,r=Je({},f3,e);return o=>{const{update:s,setState:l,container:u,view:d,options:h}=o,p=u.ownerDocument,v=XM(u),m=h.marks.find(({id:M})=>M===Da),{state:b}=m,_=p.createElement("g");v.appendChild(_);const S=(M,L)=>$M(this,void 0,void 0,function*(){if(_.removeChildren(),M){const I=p.createElement("text",{style:Object.assign({x:0,text:r.rootText,depth:0},r.style)});_.appendChild(I);let R="";const N=M==null?void 0:M.split(" / ");let Z=r.style.y,W=_.getBBox().width;const it=v.getBBox().width,tt=N.map((pt,K)=>{const lt=p.createElement("text",{style:Object.assign(Object.assign({x:W,text:" / "},r.style),{y:Z})});_.appendChild(lt),W+=lt.getBBox().width,R=`${R}${pt} / `;const ft=p.createElement("text",{name:R.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:pt,x:W,depth:K+1},r.style),{y:Z})});return _.appendChild(ft),W+=ft.getBBox().width,W>it&&(Z=_.getBBox().height,W=0,lt.attr({x:W,y:Z}),W+=lt.getBBox().width,ft.attr({x:W,y:Z}),W+=ft.getBBox().width),ft});[I,...tt].forEach((pt,K)=>{if(K===tt.length)return;const lt=Object.assign({},pt.attributes);pt.attr("cursor","pointer"),pt.addEventListener("mouseenter",()=>{pt.attr(r.active)}),pt.addEventListener("mouseleave",()=>{pt.attr(lt)}),pt.addEventListener("click",()=>{S(pt.name,Qn(pt,["style","depth"]))})})}l("drillDown",I=>{const{marks:R}=I,N=R.map(Z=>{if(Z.id!==Da&&Z.type!=="rect")return Z;const{data:W}=Z,it=Object.fromEntries(["color"].map(pt=>[pt,{domain:d.scale[pt].getOptions().domain}])),tt=W.filter(pt=>{const K=pt.path;return n||(pt[np]=K.split(" / ")[L]),M?new RegExp(`^${M}.+`).test(K):!0});return Je({},Z,n?{data:tt,scale:it}:{data:tt})});return Object.assign(Object.assign({},I),{marks:N})}),yield s()}),O=M=>{const L=M.target;if(Qn(L,["style",Vv])!==Da||Qn(L,["markType"])!=="rect"||!Qn(L,["style",Wf]))return;const I=Qn(L,["__data__","key"]),R=Qn(L,["style","depth"]);L.style.cursor="pointer",S(I,R)};v.addEventListener("click",O);const E=su(Object.assign(Object.assign({},b.active),b.inactive)),A=()=>{YM(v).forEach(L=>{const I=Qn(L,["style",Wf]);if(Qn(L,["style","cursor"])!=="pointer"&&I){L.style.cursor="pointer";const N=jv(L.attributes,E);L.addEventListener("mouseenter",()=>{L.attr(b.active)}),L.addEventListener("mouseleave",()=>{L.attr(Je(N,b.inactive))})}})};return v.addEventListener("mousemove",A),()=>{_.remove(),v.removeEventListener("click",O),v.removeEventListener("mousemove",A)}}}function KM(){return{"interaction.drillDown":qM,"mark.sunburst":u3}}const Wv=()=>[["cartesian"]];Wv.props={};const cu=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];cu.props={transform:!0};const lu=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},h3=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:o}=lu(t);return[...cu(),...Bu({startAngle:e,endAngle:n,innerRadius:r,outerRadius:o})]};h3.props={};const Gv=()=>[["parallel",0,1,0,1]];Gv.props={};const Gf=({focusX:t=0,focusY:e=0,distortionX:n=2,distortionY:r=2,visual:o=!1})=>[["fisheye",t,e,n,r,o]];Gf.props={transform:!0};const p3=t=>{const{startAngle:e=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:o=1}=t;return[...Gv(),...Bu({startAngle:e,endAngle:n,innerRadius:r,outerRadius:o})]};p3.props={};const g3=({startAngle:t=0,endAngle:e=Math.PI*6,innerRadius:n=0,outerRadius:r=1})=>[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",t,e,n,r]];g3.props={};const _r=({value:t})=>e=>e.map(()=>t);_r.props={};const $v=({value:t})=>e=>e.map(n=>n[t]);$v.props={};const Yv=({value:t})=>e=>e.map(t);Yv.props={};const v3=({value:t})=>()=>t;v3.props={};function Lr(t,e){if(t!==null)return{type:"column",value:t,field:e}}function uu(t,e){const n=Lr(t,e);return Object.assign(Object.assign({},n),{inferred:!0})}function ip(t,e){if(t!==null)return{type:"column",value:t,field:e,visual:!0}}function QM(t,e){const n=Lr(t,e);return Object.assign(Object.assign({},n),{constant:!1})}function nc(t,e){const n=[];for(const r of t)n[r]=e;return n}function yr(t,e){const n=t[e];if(!n)return[null,null];const{value:r,field:o=null}=n;return[r,o]}function op(t,...e){for(const n of e)if(typeof n=="string"){const[r,o]=yr(t,n);if(r!==null)return[r,o]}else return[n,null];return[null,null]}function $f(t){return t instanceof Date?!1:typeof t=="object"}const Yf=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;return r!==void 0?[t,e]:[t,Je({},e,{encode:{y1:uu(nc(t,0))}})]};Yf.props={};const rc=()=>(t,e)=>{const{encode:n}=e,{x:r}=n;return r!==void 0?[t,e]:[t,Je({},e,{encode:{x:uu(nc(t,0))},scale:{x:{guide:null}}})]};rc.props={};const Jc=(t,e)=>Rc(Object.assign({colorAttribute:"fill"},t),e);Jc.props=Object.assign(Object.assign({},Rc.props),{defaultMarker:"square"});const Xf=(t,e)=>Rc(Object.assign({colorAttribute:"stroke"},t),e);Xf.props=Object.assign(Object.assign({},Rc.props),{defaultMarker:"hollowSquare"});function tl(){}function Xv(t){this._context=t}Xv.prototype={areaStart:tl,areaEnd:tl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function qv(t){return new Xv(t)}var m3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function JM(t,e,n){const[r,o,s,l]=t;if(Yr(n)){const h=[e?e[0][0]:o[0],o[1]],p=[e?e[3][0]:s[0],s[1]];return[r,h,p,l]}const u=[o[0],e?e[0][1]:o[1]],d=[s[0],e?e[3][1]:s[1]];return[r,u,d,l]}const ap=(t,e)=>{const{adjustPoints:n=JM}=t,r=m3(t,["adjustPoints"]),{coordinate:o,document:s}=e;return(l,u,d,h)=>{const{index:p}=u,{color:v}=d,m=m3(d,["color"]),b=h[p+1],_=n(l,b,o),S=!!Yr(o),[O,E,A,M]=S?uh(_):_,{color:L=v,opacity:I}=u,R=Pl().curve(qv)([O,E,A,M]);return Xn(s.createElement("path",{})).call(jn,m).style("d",R).style("fill",L).style("fillOpacity",I).call(jn,r).node()}};ap.props={defaultMarker:"square"};function t4(t,e,n){const[r,o,s,l]=t;if(Yr(n)){const h=[e?e[0][0]:(o[0]+s[0])/2,o[1]],p=[e?e[3][0]:(o[0]+s[0])/2,s[1]];return[r,h,p,l]}const u=[o[0],e?e[0][1]:(o[1]+s[1])/2],d=[s[0],e?e[3][1]:(o[1]+s[1])/2];return[r,u,d,l]}const y3=(t,e)=>ap(Object.assign({adjustPoints:t4},t),e);y3.props={defaultMarker:"square"};function fu(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}function el(t){const e=t.getFullYear(),n=fu(t.getMonth()+1),r=fu(t.getDate()),o=`${e}-${n}-${r}`,s=t.getHours(),l=t.getMinutes(),u=t.getSeconds();return s||l||u?`${o} ${fu(s)}:${fu(l)}:${fu(u)}`:o}const sp=(t={})=>{const{channel:e="x"}=t;return(n,r)=>{const{encode:o}=r,{tooltip:s}=r;if($a(s))return[n,r];const{title:l}=s;if(l!==void 0)return[n,r];const u=Object.keys(o).filter(h=>h.startsWith(e)).filter(h=>!o[h].inferred).map(h=>yr(o,h)).filter(([h])=>h).map(h=>h[0]);if(u.length===0)return[n,r];const d=[];for(const h of n)d[h]={value:u.map(p=>p[h]instanceof Date?el(p[h]):p[h]).join(", ")};return[n,Je({},r,{tooltip:{title:d}})]}};sp.props={};const cp=t=>{const{channel:e}=t;return(n,r)=>{const{encode:o,tooltip:s}=r;if($a(s))return[n,r];const{items:l=[]}=s;if(!l||l.length>0)return[n,r];const d=(Array.isArray(e)?e:[e]).flatMap(h=>Object.keys(o).filter(p=>p.startsWith(h)).map(p=>{const{field:v,value:m,inferred:b=!1,aggregate:_}=o[p];return b?null:_&&m?{channel:p}:v?{field:v}:m?{channel:p}:null}).filter(p=>p!==null));return[n,Je({},r,{tooltip:{items:d}})]}};cp.props={};var e4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Kv=()=>(t,e)=>{const{encode:n}=e,{key:r}=n,o=e4(n,["key"]);if(r!==void 0)return[t,e];const s=Object.values(o).map(({value:u})=>u),l=t.map(u=>s.filter(Array.isArray).map(d=>d[u]).join("-"));return[t,Je({},e,{encode:{key:Lr(l)}})]};Kv.props={};function b3(t={}){const{shapes:e}=t;return[{name:"color"},{name:"opacity"},{name:"shape",range:e},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function go(t={}){return[...b3(t),{name:"title",scale:"identity"}]}function _3(){return[{type:MaybeTitle,channel:"color"},{type:MaybeTooltip,channel:["x","y","z"]}]}function ia(){return[{type:sp,channel:"color"},{type:cp,channel:["x","y"]}]}function du(){return[{type:sp,channel:"x"},{type:cp,channel:["y"]}]}function Qv(){return[{type:sp,channel:"color"},{type:cp,channel:["position"]}]}function hu(t={}){return b3(t)}function mi(){return[{type:Kv}]}function Ei(){return[]}function Jv(t,e){return t.getBandWidth(t.invert(e))}function ys(t,e,n={}){const{x:r,y:o,series:s}=e,{x:l,y:u,series:d}=t,{style:{bandOffset:h=d?0:.5,bandOffsetX:p=h,bandOffsetY:v=h}={}}=n,m=!!(l!=null&&l.getBandWidth),b=!!(u!=null&&u.getBandWidth),_=!!(d!=null&&d.getBandWidth);return!m&&!b?S=>S:(S,O)=>{const E=m?Jv(l,r[O]):0,A=b?Jv(u,o[O]):0,L=_&&s?(Jv(d,s[O])/2+ +s[O])*E:0,[I,R]=S;return[I+p*E+L,R+v*A]}}function lp(t){return parseFloat(t)/100}function tm(t,e,n,r){const{x:o,y:s}=n,{innerWidth:l,innerHeight:u}=r.getOptions(),d=Array.from(t,h=>{const p=o[h],v=s[h],m=typeof p=="string"?lp(p)*l:+p,b=typeof v=="string"?lp(v)*u:+v;return[[m,b]]});return[t,d]}function xa(t){return typeof t=="function"?t:e=>e[t]}function em(t,e){return Array.from(t,xa(e))}function n4(t){return Array.isArray(t)?{links:t}:t&&typeof t=="object"?{links:t.links||[],nodes:t.nodes}:{links:[]}}function nl(t,e){const n=n4(t),{source:r=v=>v.source,target:o=v=>v.target,value:s=v=>v.value}=e,{links:l,nodes:u}=n;if(!l.length)return{links:[],nodes:u||[]};const d=em(l,r),h=em(l,o),p=em(l,s);return{links:l.map((v,m)=>({target:h[m],source:d[m],value:p[m]})),nodes:u||Array.from(new Set([...d,...h]),v=>({key:v}))}}function x3(t,e){return t.getBandWidth(t.invert(e))}const r4={rect:Jc,hollow:Xf,funnel:ap,pyramid:y3},S3=()=>(t,e,n,r)=>{const{x:o,y1:s,series:l,size:u}=n;let{y:d}=n;d=d.map(S=>S!==void 0?S:1);const h=e.x,p=e.series,[v]=r.getSize(),m=u?u.map(S=>+S/v):null,b=u?(S,O,E)=>{const A=S+O/2,M=m[E];return[A-M/2,A+M/2]}:(S,O,E)=>[S,S+O],_=Array.from(t,S=>{const O=x3(h,o[S]),E=p?x3(p,l==null?void 0:l[S]):1,A=O*E,M=(+(l==null?void 0:l[S])||0)*O,L=+o[S]+M,[I,R]=b(L,A,S),N=+d[S],Z=+s[S];return[[I,N],[R,N],[R,Z],[I,Z]].map(K=>r.map(K))});return[t,_]};S3.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:r4,channels:[...go({shapes:Object.keys(r4)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...mi(),{type:Yf},{type:rc}],postInference:[...Ei(),...du()],interaction:{shareTooltip:!0}};const O3={rect:Jc,hollow:Xf},pu=()=>(t,e,n,r)=>{const{x:o,x1:s,y:l,y1:u}=n,d=Array.from(t,h=>{const p=[+o[h],+l[h]],v=[+s[h],+l[h]],m=[+s[h],+u[h]],b=[+o[h],+u[h]];return[p,v,m,b].map(_=>r.map(_))});return[t,d]};pu.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:O3,channels:[...go({shapes:Object.keys(O3)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...mi(),{type:Yf}],postInference:[...Ei(),...du()],interaction:{shareTooltip:!0}};var nm=im(fh);function rm(t){this._curve=t}rm.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function im(t){function e(n){return new rm(t(n))}return e._curve=t,e}function qf(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(im(n)):e()._curve},t}function i4(){return qf(Pl().curve(nm))}var Kf=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const oa=hf(t=>{const{d1:e,d2:n,style1:r,style2:o}=t.attributes,s=t.ownerDocument;Xn(t).maybeAppend("line",()=>s.createElement("path",{})).style("d",e).call(jn,r),Xn(t).maybeAppend("line1",()=>s.createElement("path",{})).style("d",n).call(jn,o)});function Qf(t,e){const n=[],r=[];let o=!1,s=null;for(const l of t)!e(l[0])||!e(l[1])?o=!0:(n.push(l),o&&(o=!1,r.push([s,l])),s=l);return[n,r]}const bo=(t,e)=>{const{curve:n,gradient:r=!1,gradientColor:o="between",defined:s=p=>!Number.isNaN(p)&&p!==void 0&&p!==null,connect:l=!1}=t,u=Kf(t,["curve","gradient","gradientColor","defined","connect"]),{coordinate:d,document:h}=e;return(p,v,m)=>{const{color:b,lineWidth:_}=m,S=Kf(m,["color","lineWidth"]),{color:O=b,size:E=_,seriesColor:A,seriesX:M,seriesY:L}=v,I=r5(d,v),R=Yr(d),N=r&&A?n5(A,M,L,r,o,R):O,Z=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},S),N&&{stroke:N}),E&&{lineWidth:E}),I&&{transform:I}),u);let W;if(Rr(d)){const ft=d.getCenter();W=vt=>i4().angle((It,_t)=>Mc(Oi(vt[_t],ft))).radius((It,_t)=>hi(vt[_t],ft)).defined(([It,_t])=>s(It)&&s(_t)).curve(n)(vt)}else W=Pl().x(ft=>ft[0]).y(ft=>ft[1]).defined(([ft,vt])=>s(ft)&&s(vt)).curve(n);const[it,tt]=Qf(p,s),pt=En(Z,"connect"),K=!!tt.length;if(!K||l&&!Object.keys(pt).length)return Xn(h.createElement("path",{})).style("d",W(it)||[]).call(jn,Z).node();if(K&&!l)return Xn(h.createElement("path",{})).style("d",W(p)).call(jn,Z).node();const lt=ft=>ft.map(W).join(",");return Xn(new oa).style("style1",Object.assign(Object.assign({},Z),pt)).style("style2",Z).style("d1",lt(tt)).style("d2",W(p)).node()}};bo.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const o4=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const o=Rr(n)?qv:fh;return bo(Object.assign({curve:o},t),e)(...r)}};o4.props=Object.assign(Object.assign({},bo.props),{defaultMarker:"line"});function E3(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function bs(t,e){this._context=t,this._k=(1-e)/6}bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:E3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:E3(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Na=function t(e){function n(r){return new bs(r,e)}return n.tension=function(r){return t(+r)},n}(0);function up(t,e){this._context=t,this._k=(1-e)/6}up.prototype={areaStart:tl,areaEnd:tl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:E3(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ic=function t(e){function n(r){return new up(r,e)}return n.tension=function(r){return t(+r)},n}(0);function om(t,e,n){var r=t._x1,o=t._y1,s=t._x2,l=t._y2;if(t._l01_a>ao){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,d=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/d,o=(o*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/d}if(t._l23_a>ao){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,p=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*h+t._x1*t._l23_2a-e*t._l12_2a)/p,l=(l*h+t._y1*t._l23_2a-n*t._l12_2a)/p}t._context.bezierCurveTo(r,o,s,l,t._x2,t._y2)}function fp(t,e){this._context=t,this._alpha=e}fp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:om(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var w3=function t(e){function n(r){return e?new fp(r,e):new bs(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function A3(t,e){this._context=t,this._alpha=e}A3.prototype={areaStart:tl,areaEnd:tl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:om(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var am=function t(e){function n(r){return e?new A3(r,e):new up(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function T3(t){return t<0?-1:1}function Jf(t,e,n){var r=t._x1-t._x0,o=e-t._x1,s=(t._y1-t._y0)/(r||o<0&&-0),l=(n-t._y1)/(o||r<0&&-0),u=(s*o+l*r)/(r+o);return(T3(s)+T3(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function dp(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function C3(t,e,n){var r=t._x0,o=t._y0,s=t._x1,l=t._y1,u=(s-r)/3;t._context.bezierCurveTo(r+u,o+u*e,s-u,l-u*n,s,l)}function td(t){this._context=t}td.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:C3(this,this._t0,dp(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,C3(this,dp(this,n=Jf(this,t,e)),n);break;default:C3(this,this._t0,n=Jf(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function a4(t){this._context=new M3(t)}(a4.prototype=Object.create(td.prototype)).point=function(t,e){td.prototype.point.call(this,e,t)};function M3(t){this._context=t}M3.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,o,s){this._context.bezierCurveTo(e,t,r,n,s,o)}};function L3(t){return new td(t)}function P3(t){return new a4(t)}var s4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const sm=(t,e)=>{const n=s4(t,[]),{coordinate:r}=e;return(...o)=>{const s=Rr(r)?am:Yr(r)?P3:L3;return bo(Object.assign({curve:s},n),e)(...o)}};sm.props=Object.assign(Object.assign({},bo.props),{defaultMarker:"smooth"});function ed(t,e){this._context=t,this._t=e}ed.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function I3(t){return new ed(t,.5)}function k3(t){return new ed(t,0)}function hp(t){return new ed(t,1)}const R3=(t,e)=>bo(Object.assign({curve:hp},t),e);R3.props=Object.assign(Object.assign({},bo.props),{defaultMarker:"hv"});const D3=(t,e)=>bo(Object.assign({curve:k3},t),e);D3.props=Object.assign(Object.assign({},bo.props),{defaultMarker:"vh"});const N3=(t,e)=>bo(Object.assign({curve:I3},t),e);N3.props=Object.assign(Object.assign({},bo.props),{defaultMarker:"hvh"});var F3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function c4(t,e,n,r,o){const s=Oi(n,e),l=Xo(s),u=l+Math.PI/2,d=[r/2*Math.cos(u),r/2*Math.sin(u)],h=[o/2*Math.cos(u),o/2*Math.sin(u)],p=[o/2*Math.cos(l),o/2*Math.sin(l)],v=[r/2*Math.cos(l),r/2*Math.sin(l)],m=lh(e,d),b=lh(n,h),_=lh(b,p),S=lh(n,p),O=Oi(S,h),E=Oi(n,h),A=Oi(e,d),M=Oi(A,v),L=Oi(e,v),I=Oi(m,v);t.moveTo(...m),t.lineTo(...b),t.arcTo(..._,...S,o/2),t.arcTo(...O,...E,o/2),t.lineTo(...A),t.arcTo(...M,...L,r/2),t.arcTo(...I,...m,r/2),t.closePath()}const B3=(t,e)=>{const{document:n}=e;return(r,o,s)=>{const{seriesSize:l,color:u}=o,{color:d}=s,h=F3(s,["color"]),p=ga();for(let v=0;v<r.length-1;v++){const m=r[v],b=r[v+1],_=l[v],S=l[v+1];[...m,...b].every(Zr)&&c4(p,m,b,_,S)}return Xn(n.createElement("path",{})).call(jn,h).style("fill",u||d).style("d",p.toString()).call(jn,t).node()}};B3.props=Object.assign(Object.assign({},bo.props),{defaultMarker:"line"});const j3=()=>(t,e)=>{const{style:n={},encode:r}=e,{series:o}=r,{gradient:s}=n;return!s||o?[t,e]:[t,Je({},e,{encode:{series:ip(nc(t,void 0))}})]};j3.props={};const cm=()=>(t,e)=>{const{encode:n}=e,{series:r,color:o}=n;if(r!==void 0||o===void 0)return[t,e];const[s,l]=yr(n,"color");return[t,Je({},e,{encode:{series:Lr(s,l)}})]};cm.props={};const z3={line:o4,smooth:sm,hv:R3,vh:D3,hvh:N3,trail:B3},U3=(t,e,n,r)=>{var o,s;const{series:l,x:u,y:d}=n,{x:h,y:p}=e;if(u===void 0||d===void 0)throw new Error("Missing encode for x or y channel.");const v=l?Array.from($r(t,O=>l[O]).values()):[t],m=v.map(O=>O[0]).filter(O=>O!==void 0),b=(((o=h==null?void 0:h.getBandWidth)===null||o===void 0?void 0:o.call(h))||0)/2,_=(((s=p==null?void 0:p.getBandWidth)===null||s===void 0?void 0:s.call(p))||0)/2,S=Array.from(v,O=>O.map(E=>r.map([+u[E]+b,+d[E]+_])));return[m,S,v]},l4=(t,e,n,r)=>{const o=Object.entries(n).filter(([l])=>l.startsWith("position")).map(([,l])=>l);if(o.length===0)throw new Error("Missing encode for position channel.");Rr(r)&&o.push(o[0]);const s=Array.from(t,l=>{const u=o.map(p=>+p[l]),d=r.map(u),h=[];for(let p=0;p<d.length;p+=2)h.push([d[p],d[p+1]]);return h});return[t,s]},Z3=()=>(t,e,n,r)=>(Uu(r)?l4:U3)(t,e,n,r);Z3.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:z3,channels:[...go({shapes:Object.keys(z3)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...mi(),{type:j3},{type:cm}],postInference:[...Ei(),...du(),...Qv()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var u4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function H3(t,e,n,r){if(e.length===1)return;const{size:o}=n;if(t==="fixed")return o;if(t==="normal"||b0(r)){const[[s,l],[u,d]]=e,h=Math.abs((u-s)/2),p=Math.abs((d-l)/2);return Math.max(0,(h+p)/2)}return o}const ur=(t,e)=>{const{colorAttribute:n,symbol:r,mode:o="auto"}=t,s=u4(t,["colorAttribute","symbol","mode"]),l=fl.get(js(r))||fl.get("point"),{coordinate:u,document:d}=e;return(h,p,v)=>{const{lineWidth:m,color:b}=v,_=s.stroke?m||1:m,{color:S=b,transform:O,opacity:E}=p,[A,M]=i_(h),I=H3(o,h,p,u)||s.r||v.r;return Xn(d.createElement("path",{})).call(jn,v).style("fill","transparent").style("d",l(A,M,I)).style("lineWidth",_).style("transform",O).style("transformOrigin",`${A-I} ${M-I}`).style("stroke",S).style(vg(t),E).style(n,S).call(jn,s).node()}};ur.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const lm=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"point"},t),e);lm.props=Object.assign({defaultMarker:"hollowPoint"},ur.props);const um=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),e);um.props=Object.assign({defaultMarker:"hollowDiamond"},ur.props);const a=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),e);a.props=Object.assign({defaultMarker:"hollowHexagon"},ur.props);const i=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"square"},t),e);i.props=Object.assign({defaultMarker:"hollowSquare"},ur.props);const c=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),e);c.props=Object.assign({defaultMarker:"hollowTriangleDown"},ur.props);const f=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),e);f.props=Object.assign({defaultMarker:"hollowTriangle"},ur.props);const g=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),e);g.props=Object.assign({defaultMarker:"hollowBowtie"},ur.props);var y=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const x=(t,e)=>{const{colorAttribute:n,mode:r="auto"}=t,o=y(t,["colorAttribute","mode"]),{coordinate:s,document:l}=e;return(u,d,h)=>{const{lineWidth:p,color:v}=h,m=o.stroke?p||1:p,{color:b=v,transform:_,opacity:S}=d,[O,E]=i_(u),M=H3(r,u,d,s)||o.r||h.r;return Xn(l.createElement("circle",{})).call(jn,h).style("fill","transparent").style("cx",O).style("cy",E).style("r",M).style("lineWidth",m).style("transform",_).style("transformOrigin",`${O} ${E}`).style("stroke",b).style(vg(t),S).style(n,b).call(jn,o).node()}},w=(t,e)=>x(Object.assign({colorAttribute:"fill"},t),e);w.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const T=(t,e)=>x(Object.assign({colorAttribute:"stroke"},t),e);T.props=Object.assign({defaultMarker:"hollowPoint"},w.props);const P=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"point"},t),e);P.props=Object.assign({defaultMarker:"point"},ur.props);const B=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),e);B.props=Object.assign({defaultMarker:"plus"},ur.props);const U=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),e);U.props=Object.assign({defaultMarker:"diamond"},ur.props);const G=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"square"},t),e);G.props=Object.assign({defaultMarker:"square"},ur.props);const mt=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),e);mt.props=Object.assign({defaultMarker:"triangle"},ur.props);const Nt=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),e);Nt.props=Object.assign({defaultMarker:"hexagon"},ur.props);const Qt=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),e);Qt.props=Object.assign({defaultMarker:"cross"},ur.props);const ye=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),e);ye.props=Object.assign({defaultMarker:"bowtie"},ur.props);const Fe=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),e);Fe.props=Object.assign({defaultMarker:"hyphen"},ur.props);const ze=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"line"},t),e);ze.props=Object.assign({defaultMarker:"line"},ur.props);const Ve=(t,e)=>ur(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),e);Ve.props=Object.assign({defaultMarker:"tick"},ur.props);const tn=(t,e)=>ur(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),e);tn.props=Object.assign({defaultMarker:"triangleDown"},ur.props);const pn=()=>(t,e)=>{const{encode:n}=e,{y:r}=n;return r!==void 0?[t,e]:[t,Je({},e,{encode:{y:uu(nc(t,0))},scale:{y:{guide:null}}})]};pn.props={};const Pn=()=>(t,e)=>{const{encode:n}=e,{size:r}=n;return r!==void 0?[t,e]:[t,Je({},e,{encode:{size:ip(nc(t,3))}})]};Pn.props={};const Tn={hollow:lm,hollowDiamond:um,hollowHexagon:a,hollowSquare:i,hollowTriangleDown:c,hollowTriangle:f,hollowBowtie:g,hollowCircle:T,point:P,plus:B,diamond:U,square:G,triangle:mt,hexagon:Nt,cross:Qt,bowtie:ye,hyphen:Fe,line:ze,tick:Ve,triangleDown:tn,circle:w},kn=t=>(e,n,r,o)=>{const{x:s,y:l,x1:u,y1:d,size:h,dx:p,dy:v}=r,[m,b]=o.getSize(),_=ys(n,r,t),S=E=>{const A=+((p==null?void 0:p[E])||0),M=+((v==null?void 0:v[E])||0),L=u?(+s[E]+ +u[E])/2:+s[E],I=d?(+l[E]+ +d[E])/2:+l[E],R=L+A,N=I+M;return[R,N]},O=h?Array.from(e,E=>{const[A,M]=S(E),L=+h[E],I=L/m,R=L/b,N=[A-I,M-R],Z=[A+I,M+R];return[o.map(_(N,E)),o.map(_(Z,E))]}):Array.from(e,E=>[o.map(_(S(E),E))]);return[e,O]};kn.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:Tn,channels:[...go({shapes:Object.keys(Tn)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...mi(),{type:rc},{type:pn}],postInference:[...Ei(),{type:Pn},...ia()]};const or=(t,e)=>{const{coordinate:n}=e;return(r,o,s)=>{const{color:l,text:u="",fontSize:d,rotate:h=0,transform:p=""}=o,v={text:String(u),stroke:l,fill:l,fontSize:d},[[m,b]]=r;return Xn(new l_).style("x",m).style("y",b).call(jn,s).style("transform",`${p}rotate(${+h})`).style("coordCenter",n.getCenter()).call(jn,v).call(jn,t).node()}};or.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var wr=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function qn(t){const e=t/Math.sqrt(2),n=t*Math.sqrt(2),[r,o]=[-e,e-n],[s,l]=[0,0],[u,d]=[e,e-n];return[["M",r,o],["A",t,t,0,1,1,u,d],["L",s,l],["Z"]]}function fr(t){const{min:e,max:n}=t.getLocalBounds();return[(e[0]+n[0])*.5,(e[1]+n[1])*.5]}const Br=hf(t=>{const e=t.attributes,{class:n,x:r,y:o,transform:s}=e,l=wr(e,["class","x","y","transform"]),u=En(l,"marker"),{size:d=24}=u,h=()=>qn(d/2),p=Xn(t).maybeAppend("marker",()=>new mr({})).call(b=>b.node().update(Object.assign({symbol:h},u))).node(),[v,m]=fr(p);Xn(t).maybeAppend("text","text").style("x",v).style("y",m).call(jn,l)}),aa=(t,e)=>{const n=wr(t,[]);return(r,o,s)=>{const{color:l}=s,u=wr(s,["color"]),{color:d=l,text:h=""}=o,p={text:String(h),stroke:d,fill:d},[[v,m]]=r;return Xn(new Br).call(jn,u).style("transform",`translate(${v},${m})`).call(jn,p).call(jn,n).node()}};aa.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const rl=(t,e)=>{const{coordinate:n}=e;return(r,o,s)=>{const{color:l,text:u="",fontSize:d,rotate:h=0,transform:p=""}=o,v={text:String(u),stroke:l,fill:l,fontSize:d,textAlign:"center",textBaseline:"middle"},[[m,b]]=r;return Xn(new V.xv).style("x",m).style("y",b).call(jn,s).style("transformOrigin","center center").style("transform",`${p}rotate(${h}deg)`).style("coordCenter",n.getCenter()).call(jn,v).call(jn,t).node()}};rl.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const _s=()=>(t,e)=>{const{data:n}=e;if(!Array.isArray(n)||n.some($f))return[t,e];const r=Array.isArray(n[0])?n:[n],o=r.map(l=>l[0]),s=r.map(l=>l[1]);return[t,Je({},e,{encode:{x:Lr(o),y:Lr(s)}})]};_s.props={};var il=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const xs=()=>(t,e)=>{const{data:n,style:r={}}=e,o=il(e,["data","style"]),{x:s,y:l}=r,u=il(r,["x","y"]);if(s==null||l==null)return[t,e];const d=s||0,h=l||0;return[[0],Je({},o,{data:[0],cartesian:!0,encode:{x:Lr([d]),y:Lr([h])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:u})]};xs.props={};const sa={text:or,badge:aa,tag:rl},V3=t=>{const{cartesian:e=!1}=t;return e?tm:(n,r,o,s)=>{const{x:l,y:u}=o,d=ys(r,o,t),h=Array.from(n,p=>{const v=[+l[p],+u[p]];return[s.map(d(v,p))]});return[n,h]}};V3.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:sa,channels:[...go({shapes:Object.keys(sa)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...mi(),{type:_s},{type:xs}],postInference:[...Ei(),...ia()]};const fm=()=>(t,e)=>[t,Je({scale:{x:{padding:0},y:{padding:0}}},e)];fm.props={};const W3={cell:Jc,hollow:Xf},G3=()=>(t,e,n,r)=>{const{x:o,y:s}=n,l=e.x,u=e.y,d=Array.from(t,h=>{const p=l.getBandWidth(l.invert(+o[h])),v=u.getBandWidth(u.invert(+s[h])),m=+o[h],b=+s[h],_=[m,b],S=[m+p,b],O=[m+p,b+v],E=[m,b+v];return[_,S,O,E].map(A=>r.map(A))});return[t,d]};G3.props={defaultShape:"cell",defaultLabelShape:"label",shape:W3,composite:!1,channels:[...go({shapes:Object.keys(W3)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...mi(),{type:rc},{type:pn},{type:fm}],postInference:[...Ei(),...ia()]};function dm(t,e,n){var r=null,o=ai(!0),s=null,l=fh,u=null,d=dh(h);t=typeof t=="function"?t:t===void 0?i5:ai(+t),e=typeof e=="function"?e:ai(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?s_:ai(+n);function h(v){var m,b,_,S=(v=o_(v)).length,O,E=!1,A,M=new Array(S),L=new Array(S);for(s==null&&(u=l(A=d())),m=0;m<=S;++m){if(!(m<S&&o(O=v[m],m,v))===E)if(E=!E)b=m,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),_=m-1;_>=b;--_)u.point(M[_],L[_]);u.lineEnd(),u.areaEnd()}E&&(M[m]=+t(O,m,v),L[m]=+e(O,m,v),u.point(r?+r(O,m,v):M[m],n?+n(O,m,v):L[m]))}if(A)return u=null,A+""||null}function p(){return Pl().defined(o).curve(l).context(s)}return h.x=function(v){return arguments.length?(t=typeof v=="function"?v:ai(+v),r=null,h):t},h.x0=function(v){return arguments.length?(t=typeof v=="function"?v:ai(+v),h):t},h.x1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:ai(+v),h):r},h.y=function(v){return arguments.length?(e=typeof v=="function"?v:ai(+v),n=null,h):e},h.y0=function(v){return arguments.length?(e=typeof v=="function"?v:ai(+v),h):e},h.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:ai(+v),h):n},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(n)},h.lineX1=function(){return p().x(r).y(e)},h.defined=function(v){return arguments.length?(o=typeof v=="function"?v:ai(!!v),h):o},h.curve=function(v){return arguments.length?(l=v,s!=null&&(u=l(s)),h):l},h.context=function(v){return arguments.length?(v==null?s=u=null:u=l(s=v),h):s},h}function f4(){var t=dm().curve(nm),e=t.curve,n=t.lineX0,r=t.lineX1,o=t.lineY0,s=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return qf(n())},delete t.lineX0,t.lineEndAngle=function(){return qf(r())},delete t.lineX1,t.lineInnerRadius=function(){return qf(o())},delete t.lineY0,t.lineOuterRadius=function(){return qf(s())},delete t.lineY1,t.curve=function(l){return arguments.length?e(im(l)):e()._curve},t}var d4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function h4(t,e){const n=[],r=[],o=[];let s=!1,l=null;const u=t.length/2;for(let d=0;d<u;d++){const h=t[d],p=t[d+u];if([...h,...p].some(v=>!e(v)))s=!0;else{if(n.push(h),r.push(p),s&&l){s=!1;const[v,m]=l;o.push([v,h,m,p])}l=[h,p]}}return[n.concat(r),o]}const $3=hf(t=>{const{areaPath:e,connectPath:n,areaStyle:r,connectStyle:o}=t.attributes,s=t.ownerDocument;Xn(t).maybeAppend("connect-path",()=>s.createElement("path",{})).style("d",n).call(jn,o),Xn(t).maybeAppend("area-path",()=>s.createElement("path",{})).style("d",e).call(jn,r)}),Nn=(t,e)=>{const{curve:n,gradient:r=!1,defined:o=h=>!Number.isNaN(h)&&h!==void 0&&h!==null,connect:s=!1}=t,l=d4(t,["curve","gradient","defined","connect"]),{coordinate:u,document:d}=e;return(h,p,v)=>{const{color:m}=v,{color:b=m,seriesColor:_,seriesX:S,seriesY:O}=p,E=Yr(u),A=r5(u,p),M=r&&_?n5(_,S,O,r,void 0,E):b,L=Object.assign(Object.assign(Object.assign(Object.assign({},v),{stroke:M,fill:M}),A&&{transform:A}),l),[I,R]=h4(h,o),N=En(L,"connect"),Z=!!R.length,W=it=>Xn(d.createElement("path",{})).style("d",it||"").call(jn,L).node();if(Rr(u)){const it=tt=>{const pt=u.getCenter(),K=tt.slice(0,tt.length/2),lt=tt.slice(tt.length/2);return f4().angle((ft,vt)=>Mc(Oi(K[vt],pt))).outerRadius((ft,vt)=>hi(K[vt],pt)).innerRadius((ft,vt)=>hi(lt[vt],pt)).defined((ft,vt)=>[...K[vt],...lt[vt]].every(o)).curve(n)(lt)};return!Z||s&&!Object.keys(N).length?W(it(I)):Z&&!s?W(it(h)):Xn(new $3).style("areaStyle",L).style("connectStyle",Object.assign(Object.assign({},N),l)).style("areaPath",it(h)).style("connectPath",R.map(it).join("")).node()}else{const it=tt=>{const pt=tt.slice(0,tt.length/2),K=tt.slice(tt.length/2);return E?dm().y((lt,ft)=>pt[ft][1]).x1((lt,ft)=>pt[ft][0]).x0((lt,ft)=>K[ft][0]).defined((lt,ft)=>[...pt[ft],...K[ft]].every(o)).curve(n)(pt):dm().x((lt,ft)=>pt[ft][0]).y1((lt,ft)=>pt[ft][1]).y0((lt,ft)=>K[ft][1]).defined((lt,ft)=>[...pt[ft],...K[ft]].every(o)).curve(n)(pt)};return!Z||s&&!Object.keys(N).length?W(it(I)):Z&&!s?W(it(h)):Xn(new $3).style("areaStyle",L).style("connectStyle",Object.assign(Object.assign({},N),l)).style("areaPath",it(h)).style("connectPath",R.map(it).join("")).node()}}};Nn.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const vr=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const o=Rr(n)?qv:fh;return Nn(Object.assign({curve:o},t),e)(...r)}};vr.props=Object.assign(Object.assign({},Nn.props),{defaultMarker:"square"});var Pr=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const An=(t,e)=>{const n=Pr(t,[]),{coordinate:r}=e;return(...o)=>{const s=Rr(r)?am:Yr(r)?P3:L3;return Nn(Object.assign({curve:s},n),e)(...o)}};An.props=Object.assign(Object.assign({},Nn.props),{defaultMarker:"smooth"});const _o=(t,e)=>(...n)=>Nn(Object.assign({curve:I3},t),e)(...n);_o.props=Object.assign(Object.assign({},Nn.props),{defaultMarker:"hvh"});const Qr=(t,e)=>(...n)=>Nn(Object.assign({curve:k3},t),e)(...n);Qr.props=Object.assign(Object.assign({},Nn.props),{defaultMarker:"vh"});const wo=(t,e)=>(...n)=>Nn(Object.assign({curve:hp},t),e)(...n);wo.props=Object.assign(Object.assign({},Nn.props),{defaultMarker:"hv"});const Ao={area:vr,smooth:An,hvh:_o,vh:Qr,hv:wo},oc=()=>(t,e,n,r)=>{var o,s;const{x:l,y:u,y1:d,series:h}=n,{x:p,y:v}=e,m=h?Array.from($r(t,E=>h[E]).values()):[t],b=m.map(E=>E[0]).filter(E=>E!==void 0),_=(((o=p==null?void 0:p.getBandWidth)===null||o===void 0?void 0:o.call(p))||0)/2,S=(((s=v==null?void 0:v.getBandWidth)===null||s===void 0?void 0:s.call(v))||0)/2,O=Array.from(m,E=>{const A=E.length,M=new Array(A*2);for(let L=0;L<E.length;L++){const I=E[L];M[L]=r.map([+l[I]+_,+u[I]+S]),M[A+L]=r.map([+l[I]+_,+d[I]+S])}return M});return[b,O,m]};oc.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:Ao,channels:[...go({shapes:Object.keys(Ao)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...mi(),{type:cm},{type:Yf},{type:fm}],postInference:[...Ei(),...du()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const hm=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;if(r)return[t,e];const[o]=yr(n,"y");return[t,Je({},e,{encode:{y1:Lr([...o])}})]};hm.props={};const d7=()=>(t,e)=>{const{encode:n}=e,{x1:r}=n;if(r)return[t,e];const[o]=yr(n,"x");return[t,Je({},e,{encode:{x1:Lr([...o])}})]};d7.props={};var h7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const p4=(t,e)=>{const{arrow:n=!0,arrowSize:r="40%"}=t,o=h7(t,["arrow","arrowSize"]),{document:s}=e;return(l,u,d)=>{const{defaultColor:h}=d,p=h7(d,["defaultColor"]),{color:v=h,transform:m}=u,[b,_]=l,S=ga();if(S.moveTo(...b),S.lineTo(..._),n){const[O,E]=e5(b,_,{arrowSize:r});S.moveTo(...O),S.lineTo(..._),S.lineTo(...E)}return Xn(s.createElement("path",{})).call(jn,p).style("d",S.toString()).style("stroke",v).style("transform",m).call(jn,o).node()}};p4.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const p7=(t,e)=>{const{arrow:n=!1}=t;return(...r)=>p4(Object.assign(Object.assign({},t),{arrow:n}),e)(...r)};p7.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var g7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const v7=(t,e)=>{const n=g7(t,[]),{coordinate:r,document:o}=e;return(s,l,u)=>{const{color:d}=u,h=g7(u,["color"]),{color:p=d,transform:v}=l,[m,b]=s,_=ga();if(_.moveTo(m[0],m[1]),Rr(r)){const S=r.getCenter();_.quadraticCurveTo(S[0],S[1],b[0],b[1])}else{const S=gg(m,b),O=hi(m,b)/2;df(_,m,b,S,O)}return Xn(o.createElement("path",{})).call(jn,h).style("d",_.toString()).style("stroke",p).style("transform",v).call(jn,n).node()}};v7.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var m7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const y7=(t,e)=>{const n=m7(t,[]),{document:r}=e;return(o,s,l)=>{const{color:u}=l,d=m7(l,["color"]),{color:h=u,transform:p}=s,[v,m]=o,b=ga();return b.moveTo(v[0],v[1]),b.bezierCurveTo(v[0]/2+m[0]/2,v[1],v[0]/2+m[0]/2,m[1],m[0],m[1]),Xn(r.createElement("path",{})).call(jn,d).style("d",b.toString()).style("stroke",h).style("transform",p).call(jn,n).node()}};y7.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var b7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function y9(t,e,n,r){const o=ga();if(Rr(n)){const s=n.getCenter(),l=hi(t,s),d=(hi(e,s)-l)*r+l;return o.moveTo(t[0],t[1]),df(o,t,e,s,d),o.lineTo(e[0],e[1]),o}return Yr(n)?(o.moveTo(t[0],t[1]),o.lineTo(t[0]+(e[0]-t[0])*r,t[1]),o.lineTo(t[0]+(e[0]-t[0])*r,e[1]),o.lineTo(e[0],e[1]),o):(o.moveTo(t[0],t[1]),o.lineTo(t[0],t[1]+(e[1]-t[1])*r),o.lineTo(e[0],t[1]+(e[1]-t[1])*r),o.lineTo(e[0],e[1]),o)}const _7=(t,e)=>{const{cornerRatio:n=1/3}=t,r=b7(t,["cornerRatio"]),{coordinate:o,document:s}=e;return(l,u,d)=>{const{defaultColor:h}=d,p=b7(d,["defaultColor"]),{color:v=h,transform:m}=u,[b,_]=l,S=y9(b,_,o,n);return Xn(s.createElement("path",{})).call(jn,p).style("d",S.toString()).style("stroke",v).style("transform",m).call(jn,r).node()}};_7.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const x7={link:p7,arc:v7,smooth:y7,vhv:_7},g4=t=>(e,n,r,o)=>{const{x:s,y:l,x1:u=s,y1:d=l}=r,h=ys(n,r,t),p=e.map(v=>[o.map(h([+s[v],+l[v]],v)),o.map(h([+u[v],+d[v]],v))]);return[e,p]};g4.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:x7,channels:[...go({shapes:Object.keys(x7)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...mi(),{type:hm},{type:d7}],postInference:[...Ei(),...ia()]};var b9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const S7=(t,e)=>{const{coordinate:n,document:r}=e;return(o,s,l)=>{const{color:u}=l,d=b9(l,["color"]),{color:h=u,src:p="",size:v=32,transform:m=""}=s;let{width:b=v,height:_=v}=t;const[[S,O]]=o,[E,A]=n.getSize();b=typeof b=="string"?lp(b)*E:b,_=typeof _=="string"?lp(_)*A:_;const M=S-Number(b)/2,L=O-Number(_)/2;return Xn(r.createElement("image",{})).call(jn,d).style("x",M).style("y",L).style("src",p).style("stroke",h).style("transform",m).call(jn,t).style("width",b).style("height",_).node()}};S7.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const O7={image:S7},E7=t=>{const{cartesian:e}=t;return e?tm:(n,r,o,s)=>{const{x:l,y:u}=o,d=ys(r,o,t),h=Array.from(n,p=>{const v=[+l[p],+u[p]];return[s.map(d(v,p))]});return[n,h]}};E7.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:O7,channels:[...go({shapes:Object.keys(O7)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...mi(),{type:_s},{type:xs}],postInference:[...Ei(),...ia()]};var _9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function x9(t,e){const n=ga();if(Rr(e)){const r=e.getCenter(),o=[...t,t[0]],s=o.map(l=>hi(l,r));return o.forEach((l,u)=>{if(u===0){n.moveTo(l[0],l[1]);return}const d=s[u],h=t[u-1],p=s[u-1];p!==void 0&&Math.abs(d-p)<1e-10?df(n,h,l,r,d):n.lineTo(l[0],l[1])}),n.closePath(),n}return r_(n,t)}const w7=(t,e)=>{const{coordinate:n,document:r}=e;return(o,s,l)=>{const{color:u}=l,d=_9(l,["color"]),{color:h=u,transform:p}=s,v=x9(o,n);return Xn(r.createElement("path",{})).call(jn,d).style("d",v.toString()).style("stroke",h).style("fill",h).style("transform",p).call(jn,t).node()}};w7.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var A7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function S9(t,e){const[n,r,o,s]=t,l=ga();if(Rr(e)){const u=e.getCenter(),d=hi(u,n);return l.moveTo(n[0],n[1]),l.quadraticCurveTo(u[0],u[1],o[0],o[1]),df(l,o,s,u,d),l.quadraticCurveTo(u[0],u[1],r[0],r[1]),df(l,r,n,u,d),l.closePath(),l}return l.moveTo(n[0],n[1]),l.bezierCurveTo(n[0]/2+o[0]/2,n[1],n[0]/2+o[0]/2,o[1],o[0],o[1]),l.lineTo(s[0],s[1]),l.bezierCurveTo(s[0]/2+r[0]/2,s[1],s[0]/2+r[0]/2,r[1],r[0],r[1]),l.lineTo(n[0],n[1]),l.closePath(),l}const T7=(t,e)=>{const n=A7(t,[]),{coordinate:r,document:o}=e;return(s,l,u)=>{const{color:d}=u,h=A7(u,["color"]),{color:p=d,transform:v}=l,m=S9(s,r);return Xn(o.createElement("path",{})).call(jn,h).style("d",m.toString()).style("fill",p||d).style("stroke",p||d).style("transform",v).call(jn,n).node()}};T7.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const C7={polygon:w7,ribbon:T7},M7=()=>(t,e,n,r)=>{const o=Object.entries(n).filter(([u])=>u.startsWith("x")).map(([,u])=>u),s=Object.entries(n).filter(([u])=>u.startsWith("y")).map(([,u])=>u),l=t.map(u=>{const d=[];for(let h=0;h<o.length;h++){const p=o[h][u];if(p===void 0)break;const v=s[h][u];d.push(r.map([+p,+v]))}return d});return[t,l]};M7.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:C7,channels:[...go({shapes:Object.keys(C7)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...mi()],postInference:[...Ei(),...ia()]};var O9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function E9(t,e){const n=ga();if(!Rr(e))n.moveTo(...t[0]),n.lineTo(...t[1]),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.lineTo(...t[5]),n.lineTo(...t[6]),n.lineTo(...t[7]),n.closePath(),n.moveTo(...t[8]),n.lineTo(...t[9]),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.lineTo(...t[13]);else{const r=e.getCenter(),[o,s]=r,l=Xo(Oi(t[0],r)),u=Xo(Oi(t[1],r)),d=hi(r,t[2]),h=hi(r,t[3]),p=hi(r,t[8]),v=hi(r,t[10]),m=hi(r,t[11]);n.moveTo(...t[0]),n.arc(o,s,d,l,u),n.arc(o,s,d,u,l,!0),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.arc(o,s,h,l,u),n.lineTo(...t[6]),n.arc(o,s,v,u,l,!0),n.closePath(),n.moveTo(...t[8]),n.arc(o,s,p,l,u),n.arc(o,s,p,u,l,!0),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.arc(o,s,m,l,u),n.arc(o,s,m,u,l,!0)}return n}const L7=(t,e)=>{const{coordinate:n,document:r}=e;return(o,s,l)=>{const{color:u,transform:d}=s,{color:h,fill:p=h,stroke:v=h}=l,m=O9(l,["color","fill","stroke"]),b=E9(o,n);return Xn(r.createElement("path",{})).call(jn,m).style("d",b.toString()).style("stroke",v).style("fill",u||p).style("transform",d).call(jn,t).node()}};L7.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var w9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function A9(t,e,n=4){const r=ga();if(!Rr(e))return r.moveTo(...t[2]),r.lineTo(...t[3]),r.lineTo(t[3][0]-n,t[3][1]),r.lineTo(t[10][0]-n,t[10][1]),r.lineTo(t[10][0]+n,t[10][1]),r.lineTo(t[3][0]+n,t[3][1]),r.lineTo(...t[3]),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]),r.moveTo(t[3][0]+n/2,t[8][1]),r.arc(t[3][0],t[8][1],n/2,0,Math.PI*2),r.closePath(),r;const o=e.getCenter(),[s,l]=o,u=hi(o,t[3]),d=hi(o,t[8]),h=hi(o,t[10]),p=Xo(Oi(t[2],o)),v=Math.asin(n/d),m=p-v,b=p+v;r.moveTo(...t[2]),r.lineTo(...t[3]),r.moveTo(Math.cos(m)*u+s,Math.sin(m)*u+l),r.arc(s,l,u,m,b),r.lineTo(Math.cos(b)*h+s,Math.sin(b)*h+l),r.arc(s,l,h,b,m,!0),r.lineTo(Math.cos(m)*u+s,Math.sin(m)*u+l),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]);const _=(m+b)/2;return r.moveTo(Math.cos(_)*(d+n/2)+s,Math.sin(_)*(d+n/2)+l),r.arc(Math.cos(_)*d+s,Math.sin(_)*d+l,n/2,_,Math.PI*2+_),r.closePath(),r}const P7=(t,e)=>{const{coordinate:n,document:r}=e;return(o,s,l)=>{const{color:u,transform:d}=s,h=4,{color:p,fill:v=p,stroke:m=p}=l,b=w9(l,["color","fill","stroke"]),_=A9(o,n,h);return Xn(r.createElement("path",{})).call(jn,b).style("d",_.toString()).style("stroke",m).style("fill",u||v).style("transform",d).call(jn,t).node()}};P7.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const I7={box:L7,violin:P7},k7=()=>(t,e,n,r)=>{const{x:o,y:s,y1:l,y2:u,y3:d,y4:h,series:p}=n,v=e.x,m=e.series,b=Array.from(t,_=>{const S=v.getBandWidth(v.invert(+o[_])),O=m?m.getBandWidth(m.invert(+(p==null?void 0:p[_]))):1,E=S*O,A=(+(p==null?void 0:p[_])||0)*S,M=+o[_]+A+E/2,[L,I,R,N,Z]=[+s[_],+l[_],+u[_],+d[_],+h[_]];return[[M-E/2,Z],[M+E/2,Z],[M,Z],[M,N],[M-E/2,N],[M+E/2,N],[M+E/2,I],[M-E/2,I],[M-E/2,R],[M+E/2,R],[M,I],[M,L],[M-E/2,L],[M+E/2,L]].map(it=>r.map(it))});return[t,b]};k7.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:I7,channels:[...go({shapes:Object.keys(I7)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...mi(),{type:rc}],postInference:[...Ei(),...du()],interaction:{shareTooltip:!0}};const R7={vector:p4},D7=()=>(t,e,n,r)=>{const{x:o,y:s,size:l,rotate:u}=n,[d,h]=r.getSize(),p=t.map(v=>{const m=+u[v]/180*Math.PI,b=+l[v],_=b/d,S=b/h,O=_*Math.cos(m),E=-S*Math.sin(m);return[r.map([+o[v]-O/2,+s[v]-E/2]),r.map([+o[v]+O/2,+s[v]+E/2])]});return[t,p]};D7.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:R7,channels:[...go({shapes:Object.keys(R7)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...mi()],postInference:[...Ei(),...ia()]};var N7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function T9(t,e,n){return t.createElement("path",{style:Object.assign({d:`M ${e},${e} L -${e},0 L ${e},-${e} L 0,0 Z`,transformOrigin:"center"},n)})}function C9(t,e){if(!Rr(e))return Pl().x(r=>r[0]).y(r=>r[1])(t);const n=e.getCenter();return Bg()({startAngle:0,endAngle:Math.PI*2,outerRadius:hi(t[0],n),innerRadius:hi(t[1],n)})}function M9(t,e){if(!Rr(t))return e;const[n,r]=t.getCenter();return`translate(${n}, ${r}) ${e||""}`}const v4=(t,e)=>{const{arrow:n,arrowSize:r=4}=t,o=N7(t,["arrow","arrowSize"]),{coordinate:s,document:l}=e;return(u,d,h)=>{const{color:p,lineWidth:v}=h,m=N7(h,["color","lineWidth"]),{color:b=p,size:_=v}=d,S=n?T9(l,r,Object.assign({fill:o.stroke||b,stroke:o.stroke||b},En(o,"arrow"))):null,O=C9(u,s),E=M9(s,d.transform);return Xn(l.createElement("path",{})).call(jn,m).style("d",O).style("stroke",b).style("lineWidth",_).style("transform",E).style("markerEnd",S).call(jn,o).node()}};v4.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const F7=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some($f)?[t,e]:[t,Je({},e,{encode:{x:Lr(n)}})]};F7.props={};const B7={line:v4},j7=t=>(e,n,r,o)=>{const{x:s}=r,l=ys(n,r,Je({style:{bandOffset:0}},t)),u=Array.from(e,d=>{const h=[s[d],1],p=[s[d],0];return[h,p].map(v=>o.map(l(v,d)))});return[e,u]};j7.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:B7,channels:[...hu({shapes:Object.keys(B7)}),{name:"x",required:!0}],preInference:[...mi(),{type:F7}],postInference:[...Ei()]};const z7=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some($f)?[t,e]:[t,Je({},e,{encode:{y:Lr(n)}})]};z7.props={};const U7={line:v4},Z7=t=>(e,n,r,o)=>{const{y:s}=r,l=ys(n,r,Je({style:{bandOffset:0}},t)),u=Array.from(e,d=>{const h=[0,s[d]],p=[1,s[d]];return[h,p].map(v=>o.map(l(v,d)))});return[e,u]};Z7.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:U7,channels:[...hu({shapes:Object.keys(U7)}),{name:"y",required:!0}],preInference:[...mi(),{type:z7}],postInference:[...Ei()]};var H7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function L9(t,e,n){return[["M",t,e],["L",t+2*n,e-n],["L",t+2*n,e+n],["Z"]]}function P9(t){return Pl().x(e=>e[0]).y(e=>e[1])(t)}function I9(t,e,n,r,o,s,l=0){const[[u,d],[h,p]]=e;if(Yr(t)){const O=u+n,E=h+r,A=O+l,M=d+o,L=p+s;return[[O,M],[A,M],[A,L],[E,L]]}const v=d-n,m=p-r,b=v-l,_=u-o,S=h-s;return[[_,v],[_,b],[S,b],[S,m]]}const V7=(t,e)=>{const{offsetX:n=0,sourceOffsetX:r=n,targetOffsetX:o=n,offsetY:s=0,sourceOffsetY:l=s,targetOffsetY:u=s,connectLength1:d,endMarker:h=!0}=t,p=H7(t,["offsetX","sourceOffsetX","targetOffsetX","offsetY","sourceOffsetY","targetOffsetY","connectLength1","endMarker"]),{coordinate:v}=e;return(m,b,_)=>{const{color:S,connectLength1:O}=_,E=H7(_,["color","connectLength1"]),{color:A,transform:M}=b,L=I9(v,m,l,u,r,o,d!=null?d:O),I=En(Object.assign(Object.assign({},p),_),"endMarker");return Xn(new V.y$).call(jn,E).style("d",P9(L)).style("stroke",A||S).style("transform",M).style("markerEnd",h?new mr({className:"marker",style:Object.assign(Object.assign({},I),{symbol:L9})}):null).call(jn,p).node()}};V7.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const W7={connector:V7},G7=(...t)=>g4(...t);G7.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:W7,channels:[...hu({shapes:Object.keys(W7)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...mi()],postInference:[...Ei()]};function $7(t,e,n,r){if(e)return()=>[0,1];const{[t]:o,[`${t}1`]:s}=n;return l=>{var u;const d=((u=r.getBandWidth)===null||u===void 0?void 0:u.call(r,r.invert(+s[l])))||0;return[o[l],s[l]+d]}}function m4(t={}){const{extendX:e=!1,extendY:n=!1}=t;return(r,o,s,l)=>{const u=$7("x",e,s,o.x),d=$7("y",n,s,o.y),h=Array.from(r,p=>{const[v,m]=u(p),[b,_]=d(p);return[[v,b],[m,b],[m,_],[v,_]].map(M=>l.map(M))});return[r,h]}}const Y7={range:Jc},X7=()=>m4();X7.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:Y7,channels:[...hu({shapes:Object.keys(Y7)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...mi()],postInference:[...Ei()]};const q7=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some($f))){const r=(o,s)=>Array.isArray(o[0])?o.map(l=>l[s]):[o[s]];return[t,Je({},e,{encode:{x:Lr(r(n,0)),x1:Lr(r(n,1))}})]}return[t,e]};q7.props={};const K7={range:Jc},Q7=()=>m4({extendY:!0});Q7.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:K7,channels:[...hu({shapes:Object.keys(K7)}),{name:"x",required:!0}],preInference:[...mi(),{type:q7}],postInference:[...Ei()]};const J7=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some($f))){const r=(o,s)=>Array.isArray(o[0])?o.map(l=>l[s]):[o[s]];return[t,Je({},e,{encode:{y:Lr(r(n,0)),y1:Lr(r(n,1))}})]}return[t,e]};J7.props={};const tI={range:Jc},eI=()=>m4({extendX:!0});eI.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:tI,channels:[...hu({shapes:Object.keys(tI)}),{name:"y",required:!0}],preInference:[...mi(),{type:J7}],postInference:[...Ei()]};var nI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const y4=(t,e)=>{const{arrow:n,colorAttribute:r}=t,o=nI(t,["arrow","colorAttribute"]),{coordinate:s,document:l}=e;return(u,d,h)=>{const{color:p,stroke:v}=h,m=nI(h,["color","stroke"]),{d:b,color:_=p}=d,[S,O]=s.getSize();return Xn(l.createElement("path",{})).call(jn,m).style("d",typeof b=="function"?b({width:S,height:O}):b).style(r,_).call(jn,o).node()}};y4.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const rI=(t,e)=>y4(Object.assign({colorAttribute:"fill"},t),e);rI.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const iI=(t,e)=>y4(Object.assign({fill:"none",colorAttribute:"stroke"},t),e);iI.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const oI={path:rI,hollow:iI},aI=t=>(e,n,r,o)=>[e,e.map(()=>[[0,0]])];aI.props={defaultShape:"path",defaultLabelShape:"label",shape:oI,composite:!1,channels:[...go({shapes:Object.keys(oI)}),{name:"d",scale:"identity"}],preInference:[...mi()],postInference:[...Ei()]};var k9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const sI=(t,e)=>{const{render:n}=t,r=k9(t,["render"]);return o=>{const[[s,l]]=o;return n(Object.assign(Object.assign({},r),{x:s,y:l}),e)}};sI.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const cI=()=>(t,e)=>{const{style:n={}}=e;return[t,Je({},e,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,o])=>[r,()=>o])))})]};cI.props={};const R9={shape:sI},lI=t=>{const{cartesian:e}=t;return e?tm:(n,r,o,s)=>{const{x:l,y:u}=o,d=ys(r,o,t),h=Array.from(n,p=>{const v=[+l[p],+u[p]];return[s.map(d(v,p))]});return[n,h]}};lI.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:R9,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...mi(),{type:_s},{type:xs},{type:cI}]};var D9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const uI=(t,e)=>{const{document:n}=e;return(r,o,s)=>{const{transform:l}=o,{color:u}=s,d=D9(s,["color"]),{color:h=u}=o,[p,...v]=r,m=ga();return m.moveTo(...p),v.forEach(([b,_])=>{m.lineTo(b,_)}),m.closePath(),Xn(n.createElement("path",{})).call(jn,d).style("d",m.toString()).style("stroke",h||u).style("fill",h||u).style("fillOpacity",.4).style("transform",l).call(jn,t).node()}};uI.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const fI={density:uI},dI=()=>(t,e,n,r)=>{const{x:o,series:s}=n,l=Object.entries(n).filter(([v])=>v.startsWith("y")).map(([,v])=>v),u=Object.entries(n).filter(([v])=>v.startsWith("size")).map(([,v])=>v);if(o===void 0||l===void 0||u===void 0)throw new Error("Missing encode for x or y or size channel.");const d=e.x,h=e.series,p=Array.from(t,v=>{const m=d.getBandWidth(d.invert(+o[v])),b=h?h.getBandWidth(h.invert(+(s==null?void 0:s[v]))):1,_=m*b,S=(+(s==null?void 0:s[v])||0)*m,O=+o[v]+S+_/2;return[...l.map((A,M)=>[O+ +u[M][v]/t.length,+l[M][v]]),...l.map((A,M)=>[O-+u[M][v]/t.length,+l[M][v]]).reverse()].map(A=>r.map(A))});return[t,p]};dI.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:fI,channels:[...go({shapes:Object.keys(fI)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...mi(),{type:Yf},{type:rc}],postInference:[...Ei(),...du()],interaction:{shareTooltip:!0}};function N9(t){return typeof t=="string"?t.split(" ").map(e=>{const[n,r]=e.split(":");return[+n,r]}):t}function Y3(t,e,n){const r=t?t():document.createElement("canvas");return r.width=e,r.height=n,r}const F9=f0((t,e,n)=>{const r=Y3(n,t*2,t*2),o=r.getContext("2d"),s=t,l=t;if(e===1)o.beginPath(),o.arc(s,l,t,0,2*Math.PI,!1),o.fillStyle="rgba(0,0,0,1)",o.fill();else{const u=o.createRadialGradient(s,l,t*e,s,l,t);u.addColorStop(0,"rgba(0,0,0,1)"),u.addColorStop(1,"rgba(0,0,0,0)"),o.fillStyle=u,o.fillRect(0,0,2*t,2*t)}return r},t=>`${t}`);function B9(t,e){const r=Y3(e,256,1).getContext("2d"),o=r.createLinearGradient(0,0,256,1);return N9(t).forEach(([s,l])=>{o.addColorStop(s,l)}),r.fillStyle=o,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function j9(t,e,n,r,o,s){const{blur:l}=o;let u=r.length;for(;u--;){const{x:d,y:h,value:p,radius:v}=r[u],m=Math.min(p,n),b=d-v,_=h-v,S=F9(v,1-l,s),O=(m-e)/(n-e);t.globalAlpha=Math.max(O,.001),t.drawImage(S,b,_)}return t}function z9(t,e,n,r,o){const{minOpacity:s,opacity:l,maxOpacity:u,useGradientOpacity:d}=o,h=0,p=0,v=e,m=n,b=t.getImageData(h,p,v,m),_=b.data,S=_.length;for(let O=3;O<S;O+=4){const E=_[O],A=E*4;if(!A)continue;const M=l||Math.max(0,Math.min(u,Math.max(s,E)));_[O-3]=r[A],_[O-2]=r[A+1],_[O-1]=r[A+2],_[O]=d?r[A+3]:M}return b}function U9(t,e,n,r,o,s,l){const u=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},s);u.minOpacity*=255,u.opacity*=255,u.maxOpacity*=255;const h=Y3(l,t,e).getContext("2d"),p=B9(u.gradient,l);h.clearRect(0,0,t,e),j9(h,n,r,o,u,l);const v=z9(h,t,e,p,u),b=Y3(l,t,e).getContext("2d");return b.putImageData(v,0,0),b}var Z9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function H9(t,e){return Object.keys(t).reduce((n,r)=>{const o=t[r];return e(o,r)||(n[r]=o),n},{})}const hI=(t,e)=>{const{gradient:n,opacity:r,maxOpacity:o,minOpacity:s,blur:l,useGradientOpacity:u}=t,d=Z9(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:h,createCanvas:p,document:v}=e;return(m,b,_)=>{const{transform:S}=b,[O,E]=h.getSize(),A=m.map(N=>({x:N[0],y:N[1],value:N[2],radius:N[3]})),M=ra(m,N=>N[2]),L=kr(m,N=>N[2]),R=O&&E?U9(O,E,M,L,A,H9({gradient:n,opacity:r,minOpacity:s,maxOpacity:o,blur:l,useGradientOpacity:u},N=>N===void 0),p):{canvas:null};return Xn(v.createElement("image",{})).call(jn,_).style("x",0).style("y",0).style("width",O).style("height",E).style("src",R.canvas.toDataURL()).style("transform",S).call(jn,d).node()}};hI.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const pI={heatmap:hI},gI=t=>(e,n,r,o)=>{const{x:s,y:l,size:u,color:d}=r,h=Array.from(e,p=>{const v=u?+u[p]:40;return[...o.map([+s[p],+l[p]]),d[p],v]});return[[0],[h]]};gI.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:pI,channels:[...go({shapes:Object.keys(pI)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...mi(),{type:rc},{type:pn}],postInference:[...Ei(),...ia()]};var V9=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},W9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function G9(t,e){const{text:n="text",value:r="value"}=e;return t.map(o=>Object.assign(Object.assign({},o),{text:o[n],value:o[r]}))}const $9=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:t=>t.fontFamily},tooltip:{items:[t=>({name:t.text,value:t.value})]}}),b4=(t,e)=>V9(void 0,void 0,void 0,function*(){const{width:n,height:r}=e,{data:o,encode:s={},scale:l,style:u={},layout:d={}}=t,h=W9(t,["data","encode","scale","style","layout"]),p=G9(o,s);return Je({},$9(),Object.assign(Object.assign({data:{value:p,transform:[Object.assign({type:"wordCloud",size:[n,r]},d)]},encode:s,scale:l,style:u},h),{axis:!1}))});b4.props={};var Y9={value:function(){}};function vI(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new X3(n)}function X3(t){this._=t}function X9(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}X3.prototype=vI.prototype={constructor:X3,on:function(e,n){var r=this._,o=X9(e+"",r),s,l=-1,u=o.length;if(arguments.length<2){for(;++l<u;)if((s=(e=o[l]).type)&&(s=q9(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++l<u;)if(s=(e=o[l]).type)r[s]=mI(r[s],e.name,n);else if(n==null)for(s in r)r[s]=mI(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new X3(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),o=0,s,l;o<s;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],o=0,s=l.length;o<s;++o)l[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,l=o.length;s<l;++s)o[s].value.apply(n,r)}};function q9(t,e){for(var n=0,r=t.length,o;n<r;++n)if((o=t[n]).name===e)return o.value}function mI(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=Y9,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var K9=vI,pp=0,pm=0,gm=0,yI=1e3,q3,vm,K3=0,nd=0,Q3=0,mm=typeof performance=="object"&&performance.now?performance:Date,bI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _I(){return nd||(bI(Q9),nd=mm.now()+Q3)}function Q9(){nd=0}function _4(){this._call=this._time=this._next=null}_4.prototype=xI.prototype={constructor:_4,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?_I():+n)+(e==null?0:+e),!this._next&&vm!==this&&(vm?vm._next=this:q3=this,vm=this),this._call=t,this._time=n,x4()},stop:function(){this._call&&(this._call=null,this._time=1/0,x4())}};function xI(t,e,n){var r=new _4;return r.restart(t,e,n),r}function J9(){_I(),++pp;for(var t=q3,e;t;)(e=nd-t._time)>=0&&t._call.call(void 0,e),t=t._next;--pp}function SI(){nd=(K3=mm.now())+Q3,pp=pm=0;try{J9()}finally{pp=0,eF(),nd=0}}function tF(){var t=mm.now(),e=t-K3;e>yI&&(Q3-=e,K3=t)}function eF(){for(var t,e=q3,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:q3=n);vm=t,x4(r)}function x4(t){if(!pp){pm&&(pm=clearTimeout(pm));var e=t-nd;e>24?(t<1/0&&(pm=setTimeout(SI,t-mm.now()-Q3)),gm&&(gm=clearInterval(gm))):(gm||(K3=mm.now(),gm=setInterval(tF,yI)),pp=1,bI(SI))}}const nF=1664525,rF=1013904223,OI=4294967296;function iF(){let t=1;return()=>(t=(nF*t+rF)%OI)/OI}function oF(t){return t.x}function aF(t){return t.y}var sF=10,cF=Math.PI*(3-Math.sqrt(5));function EI(t){var e,n=1,r=.001,o=1-Math.pow(r,1/300),s=0,l=.6,u=new Map,d=xI(v),h=K9("tick","end"),p=iF();t==null&&(t=[]);function v(){m(),h.call("tick",e),n<r&&(d.stop(),h.call("end",e))}function m(S){var O,E=t.length,A;S===void 0&&(S=1);for(var M=0;M<S;++M)for(n+=(s-n)*o,u.forEach(function(L){L(n)}),O=0;O<E;++O)A=t[O],A.fx==null?A.x+=A.vx*=l:(A.x=A.fx,A.vx=0),A.fy==null?A.y+=A.vy*=l:(A.y=A.fy,A.vy=0);return e}function b(){for(var S=0,O=t.length,E;S<O;++S){if(E=t[S],E.index=S,E.fx!=null&&(E.x=E.fx),E.fy!=null&&(E.y=E.fy),isNaN(E.x)||isNaN(E.y)){var A=sF*Math.sqrt(.5+S),M=S*cF;E.x=A*Math.cos(M),E.y=A*Math.sin(M)}(isNaN(E.vx)||isNaN(E.vy))&&(E.vx=E.vy=0)}}function _(S){return S.initialize&&S.initialize(t,p),S}return b(),e={tick:m,restart:function(){return d.restart(v),e},stop:function(){return d.stop(),e},nodes:function(S){return arguments.length?(t=S,b(),u.forEach(_),e):t},alpha:function(S){return arguments.length?(n=+S,e):n},alphaMin:function(S){return arguments.length?(r=+S,e):r},alphaDecay:function(S){return arguments.length?(o=+S,e):+o},alphaTarget:function(S){return arguments.length?(s=+S,e):s},velocityDecay:function(S){return arguments.length?(l=1-S,e):1-l},randomSource:function(S){return arguments.length?(p=S,u.forEach(_),e):p},force:function(S,O){return arguments.length>1?(O==null?u.delete(S):u.set(S,_(O)),e):u.get(S)},find:function(S,O,E){var A=0,M=t.length,L,I,R,N,Z;for(E==null?E=1/0:E*=E,A=0;A<M;++A)N=t[A],L=S-N.x,I=O-N.y,R=L*L+I*I,R<E&&(Z=N,E=R);return Z},on:function(S,O){return arguments.length>1?(h.on(S,O),e):h.on(S)}}}function lF(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return wI(this.cover(e,n),e,n,t)}function wI(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,s=t._root,l={data:r},u=t._x0,d=t._y0,h=t._x1,p=t._y1,v,m,b,_,S,O,E,A;if(!s)return t._root=l,t;for(;s.length;)if((S=e>=(v=(u+h)/2))?u=v:h=v,(O=n>=(m=(d+p)/2))?d=m:p=m,o=s,!(s=s[E=O<<1|S]))return o[E]=l,t;if(b=+t._x.call(null,s.data),_=+t._y.call(null,s.data),e===b&&n===_)return l.next=s,o?o[E]=l:t._root=l,t;do o=o?o[E]=new Array(4):t._root=new Array(4),(S=e>=(v=(u+h)/2))?u=v:h=v,(O=n>=(m=(d+p)/2))?d=m:p=m;while((E=O<<1|S)===(A=(_>=m)<<1|b>=v));return o[A]=s,o[E]=l,t}function uF(t){var e,n,r=t.length,o,s,l=new Array(r),u=new Array(r),d=1/0,h=1/0,p=-1/0,v=-1/0;for(n=0;n<r;++n)isNaN(o=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(l[n]=o,u[n]=s,o<d&&(d=o),o>p&&(p=o),s<h&&(h=s),s>v&&(v=s));if(d>p||h>v)return this;for(this.cover(d,h).cover(p,v),n=0;n<r;++n)wI(this,l[n],u[n],t[n]);return this}function fF(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,s=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var l=o-n||1,u=this._root,d,h;n>t||t>=o||r>e||e>=s;)switch(h=(e<r)<<1|t<n,d=new Array(4),d[h]=u,u=d,l*=2,h){case 0:o=n+l,s=r+l;break;case 1:n=o-l,s=r+l;break;case 2:o=n+l,r=s-l;break;case 3:n=o-l,r=s-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=o,this._y1=s,this}function dF(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function hF(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function jo(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o}function pF(t,e,n){var r,o=this._x0,s=this._y0,l,u,d,h,p=this._x1,v=this._y1,m=[],b=this._root,_,S;for(b&&m.push(new jo(b,o,s,p,v)),n==null?n=1/0:(o=t-n,s=e-n,p=t+n,v=e+n,n*=n);_=m.pop();)if(!(!(b=_.node)||(l=_.x0)>p||(u=_.y0)>v||(d=_.x1)<o||(h=_.y1)<s))if(b.length){var O=(l+d)/2,E=(u+h)/2;m.push(new jo(b[3],O,E,d,h),new jo(b[2],l,E,O,h),new jo(b[1],O,u,d,E),new jo(b[0],l,u,O,E)),(S=(e>=E)<<1|t>=O)&&(_=m[m.length-1],m[m.length-1]=m[m.length-1-S],m[m.length-1-S]=_)}else{var A=t-+this._x.call(null,b.data),M=e-+this._y.call(null,b.data),L=A*A+M*M;if(L<n){var I=Math.sqrt(n=L);o=t-I,s=e-I,p=t+I,v=e+I,r=b.data}}return r}function gF(t){if(isNaN(p=+this._x.call(null,t))||isNaN(v=+this._y.call(null,t)))return this;var e,n=this._root,r,o,s,l=this._x0,u=this._y0,d=this._x1,h=this._y1,p,v,m,b,_,S,O,E;if(!n)return this;if(n.length)for(;;){if((_=p>=(m=(l+d)/2))?l=m:d=m,(S=v>=(b=(u+h)/2))?u=b:h=b,e=n,!(n=n[O=S<<1|_]))return this;if(!n.length)break;(e[O+1&3]||e[O+2&3]||e[O+3&3])&&(r=e,E=O)}for(;n.data!==t;)if(o=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,o?(s?o.next=s:delete o.next,this):e?(s?e[O]=s:delete e[O],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[E]=n:this._root=n),this):(this._root=s,this)}function vF(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function mF(){return this._root}function yF(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function bF(t){var e=[],n,r=this._root,o,s,l,u,d;for(r&&e.push(new jo(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,l=n.y0,u=n.x1,d=n.y1)&&r.length){var h=(s+u)/2,p=(l+d)/2;(o=r[3])&&e.push(new jo(o,h,p,u,d)),(o=r[2])&&e.push(new jo(o,s,p,h,d)),(o=r[1])&&e.push(new jo(o,h,l,u,p)),(o=r[0])&&e.push(new jo(o,s,l,h,p))}return this}function _F(t){var e=[],n=[],r;for(this._root&&e.push(new jo(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var o=r.node;if(o.length){var s,l=r.x0,u=r.y0,d=r.x1,h=r.y1,p=(l+d)/2,v=(u+h)/2;(s=o[0])&&e.push(new jo(s,l,u,p,v)),(s=o[1])&&e.push(new jo(s,p,u,d,v)),(s=o[2])&&e.push(new jo(s,l,v,p,h)),(s=o[3])&&e.push(new jo(s,p,v,d,h))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function xF(t){return t[0]}function SF(t){return arguments.length?(this._x=t,this):this._x}function OF(t){return t[1]}function EF(t){return arguments.length?(this._y=t,this):this._y}function S4(t,e,n){var r=new O4(e==null?xF:e,n==null?OF:n,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function O4(t,e,n,r,o,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=s,this._root=void 0}function AI(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var zo=S4.prototype=O4.prototype;zo.copy=function(){var t=new O4(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=AI(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var o=0;o<4;++o)(r=e.source[o])&&(r.length?n.push({source:r,target:e.target[o]=new Array(4)}):e.target[o]=AI(r));return t},zo.add=lF,zo.addAll=uF,zo.cover=fF,zo.data=dF,zo.extent=hF,zo.find=pF,zo.remove=gF,zo.removeAll=vF,zo.root=mF,zo.size=yF,zo.visit=bF,zo.visitAfter=_F,zo.x=SF,zo.y=EF;function Uo(t){return function(){return t}}function gu(t){return(t()-.5)*1e-6}function wF(t){return t.x+t.vx}function AF(t){return t.y+t.vy}function TF(t){var e,n,r,o=1,s=1;typeof t!="function"&&(t=Uo(t==null?1:+t));function l(){for(var h,p=e.length,v,m,b,_,S,O,E=0;E<s;++E)for(v=S4(e,wF,AF).visitAfter(u),h=0;h<p;++h)m=e[h],S=n[m.index],O=S*S,b=m.x+m.vx,_=m.y+m.vy,v.visit(A);function A(M,L,I,R,N){var Z=M.data,W=M.r,it=S+W;if(Z){if(Z.index>m.index){var tt=b-Z.x-Z.vx,pt=_-Z.y-Z.vy,K=tt*tt+pt*pt;K<it*it&&(tt===0&&(tt=gu(r),K+=tt*tt),pt===0&&(pt=gu(r),K+=pt*pt),K=(it-(K=Math.sqrt(K)))/K*o,m.vx+=(tt*=K)*(it=(W*=W)/(O+W)),m.vy+=(pt*=K)*it,Z.vx-=tt*(it=1-it),Z.vy-=pt*it)}return}return L>b+it||R<b-it||I>_+it||N<_-it}}function u(h){if(h.data)return h.r=n[h.data.index];for(var p=h.r=0;p<4;++p)h[p]&&h[p].r>h.r&&(h.r=h[p].r)}function d(){if(e){var h,p=e.length,v;for(n=new Array(p),h=0;h<p;++h)v=e[h],n[v.index]=+t(v,h,e)}}return l.initialize=function(h,p){e=h,r=p,d()},l.iterations=function(h){return arguments.length?(s=+h,l):s},l.strength=function(h){return arguments.length?(o=+h,l):o},l.radius=function(h){return arguments.length?(t=typeof h=="function"?h:Uo(+h),d(),l):t},l}function TI(t){var e=Uo(.1),n,r,o;typeof t!="function"&&(t=Uo(t==null?0:+t));function s(u){for(var d=0,h=n.length,p;d<h;++d)p=n[d],p.vx+=(o[d]-p.x)*r[d]*u}function l(){if(n){var u,d=n.length;for(r=new Array(d),o=new Array(d),u=0;u<d;++u)r[u]=isNaN(o[u]=+t(n[u],u,n))?0:+e(n[u],u,n)}}return s.initialize=function(u){n=u,l()},s.strength=function(u){return arguments.length?(e=typeof u=="function"?u:Uo(+u),l(),s):e},s.x=function(u){return arguments.length?(t=typeof u=="function"?u:Uo(+u),l(),s):t},s}function CI(t){var e=Uo(.1),n,r,o;typeof t!="function"&&(t=Uo(t==null?0:+t));function s(u){for(var d=0,h=n.length,p;d<h;++d)p=n[d],p.vy+=(o[d]-p.y)*r[d]*u}function l(){if(n){var u,d=n.length;for(r=new Array(d),o=new Array(d),u=0;u<d;++u)r[u]=isNaN(o[u]=+t(n[u],u,n))?0:+e(n[u],u,n)}}return s.initialize=function(u){n=u,l()},s.strength=function(u){return arguments.length?(e=typeof u=="function"?u:Uo(+u),l(),s):e},s.y=function(u){return arguments.length?(t=typeof u=="function"?u:Uo(+u),l(),s):t},s}const MI={hollow:lm,hollowDiamond:um,hollowHexagon:a,hollowSquare:i,hollowTriangleDown:c,hollowTriangle:f,hollowBowtie:g,hollowCircle:T,point:P,plus:B,diamond:U,square:G,triangle:mt,hexagon:Nt,cross:Qt,bowtie:ye,hyphen:Fe,line:ze,tick:Ve,triangleDown:tn,circle:w},CF=4,MF=200,LI=t=>(e,n,r,o)=>{const{x:s,y:l,size:u}=r;if(!s.length||!l.length)return[e,l.map(()=>[[]])];const[d,h]=o.getSize(),p=ys(n,r,t),v=Array.from(e,S=>{const O=+s[S]*d,E=+l[S]*h,A=+u[S]||CF;return{i:S,x:O,y:E,r:A}}),m=EI(v).stop().force("collide",TF().radius(S=>S.r+1).strength(1));m.force("x",TI(S=>S.x).strength(.5)),m.force("y",CI(S=>S.y).strength(5));for(let S=0;S<MF;S++)m.tick();m.stop();const b=S=>{const O=v.find(E=>E.i===S);return[O.x/d,O.y/h]},_=u?Array.from(e,S=>{const[O,E]=b(S),A=+u[S],M=A/d,L=A/h,I=[O-M,E-L],R=[O+M,E+L];return[o.map(p(I,S)),o.map(p(R,S))]}):Array.from(e,S=>[o.map(p(b(S),S))]);return[e,_]};LI.props={defaultShape:"point",defaultLabelShape:"label",composite:!1,shape:MI,channels:[...go({shapes:Object.keys(MI)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"}],preInference:[...mi(),{type:rc},{type:pn}],postInference:[...Ei(),{type:Pn},...ia()]};const PI=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];PI.props={};const II=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];II.props={};const kI=t=>new pa(t);kI.props={};const RI=t=>new Ed(t);RI.props={};const DI=t=>new Es(t);DI.props={};class J3 extends gl{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:ug}}map(e){return Kd(e)?e:this.options.unknown}invert(e){return this.map(e)}clone(){return new J3(this.options)}getTicks(){const{domain:e,tickCount:n,tickMethod:r}=this.options,[o,s]=e;return!(0,be.Z)(o)||!(0,be.Z)(s)?[]:r(o,s,n)}}const NI=t=>new J3(t);NI.props={};class E4 extends Es{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:Mu,paddingInner:1,paddingOuter:0}}constructor(e){super(e)}getPaddingInner(){return 1}clone(){return new E4(this.options)}update(e){super.update(e)}getPaddingOuter(){return this.options.padding}}const FI=t=>new E4(t);FI.props={};var BI=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,vu="\\d\\d?",mu="\\d\\d",LF="\\d{3}",PF="\\d{4}",ym="[^\\s]+",jI=/\[([^]*?)\]/gm;function zI(t,e){for(var n=[],r=0,o=t.length;r<o;r++)n.push(t[r].substr(0,e));return n}var UI=function(t){return function(e,n){var r=n[t].map(function(s){return s.toLowerCase()}),o=r.indexOf(e.toLowerCase());return o>-1?o:null}};function rd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,o=e;r<o.length;r++){var s=o[r];for(var l in s)t[l]=s[l]}return t}var ZI=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],HI=["January","February","March","April","May","June","July","August","September","October","November","December"],IF=zI(HI,3),kF=zI(ZI,3),VI={dayNamesShort:kF,dayNames:ZI,monthNamesShort:IF,monthNames:HI,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},tS=rd({},VI),RF=function(t){return tS=rd(tS,t)},WI=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},ca=function(t,e){for(e===void 0&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},DF={D:function(t){return String(t.getDate())},DD:function(t){return ca(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return ca(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return ca(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return ca(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return ca(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return ca(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return ca(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return ca(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return ca(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return ca(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return ca(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+ca(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+ca(Math.floor(Math.abs(e)/60),2)+":"+ca(Math.abs(e)%60,2)}},GI=function(t){return+t-1},$I=[null,vu],YI=[null,ym],XI=["isPm",ym,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],qI=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?n:-n}return 0}],NF={D:["day",vu],DD:["day",mu],Do:["day",vu+ym,function(t){return parseInt(t,10)}],M:["month",vu,GI],MM:["month",mu,GI],YY:["year",mu,function(t){var e=new Date,n=+(""+e.getFullYear()).substr(0,2);return+(""+(+t>68?n-1:n)+t)}],h:["hour",vu,void 0,"isPm"],hh:["hour",mu,void 0,"isPm"],H:["hour",vu],HH:["hour",mu],m:["minute",vu],mm:["minute",mu],s:["second",vu],ss:["second",mu],YYYY:["year",PF],S:["millisecond","\\d",function(t){return+t*100}],SS:["millisecond",mu,function(t){return+t*10}],SSS:["millisecond",LF],d:$I,dd:$I,ddd:YI,dddd:YI,MMM:["month",ym,UI("monthNamesShort")],MMMM:["month",ym,UI("monthNames")],a:XI,A:XI,ZZ:qI,Z:qI},eS={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},FF=function(t){return rd(eS,t)},KI=function(t,e,n){if(e===void 0&&(e=eS.default),n===void 0&&(n={}),typeof t=="number"&&(t=new Date(t)),Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=eS[e]||e;var r=[];e=e.replace(jI,function(s,l){return r.push(l),"@@@"});var o=rd(rd({},tS),n);return e=e.replace(BI,function(s){return DF[s](t,o)}),e.replace(/@@@/g,function(){return r.shift()})};function BF(t,e,n){if(n===void 0&&(n={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=eS[e]||e,t.length>1e3)return null;var r=new Date,o={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},s=[],l=[],u=e.replace(jI,function(L,I){return l.push(WI(I)),"@@@"}),d={},h={};u=WI(u).replace(BI,function(L){var I=NF[L],R=I[0],N=I[1],Z=I[3];if(d[R])throw new Error("Invalid format. "+R+" specified twice in format");return d[R]=!0,Z&&(h[Z]=!0),s.push(I),"("+N+")"}),Object.keys(h).forEach(function(L){if(!d[L])throw new Error("Invalid format. "+L+" is required in specified format")}),u=u.replace(/@@@/g,function(){return l.shift()});var p=t.match(new RegExp(u,"i"));if(!p)return null;for(var v=rd(rd({},tS),n),m=1;m<p.length;m++){var b=s[m-1],_=b[0],S=b[2],O=S?S(p[m],v):+p[m];if(O==null)return null;o[_]=O}o.isPm===1&&o.hour!=null&&+o.hour!=12?o.hour=+o.hour+12:o.isPm===0&&+o.hour==12&&(o.hour=0);var E;if(o.timezoneOffset==null){E=new Date(o.year,o.month,o.day,o.hour,o.minute,o.second,o.millisecond);for(var A=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],m=0,M=A.length;m<M;m++)if(d[A[m][0]]&&o[A[m][0]]!==E[A[m][1]]())return null}else if(E=new Date(Date.UTC(o.year,o.month,o.day,o.hour,o.minute-o.timezoneOffset,o.second,o.millisecond)),o.month>11||o.month<0||o.day>31||o.day<1||o.hour>23||o.hour<0||o.minute>59||o.minute<0||o.second>59||o.second<0)return null;return E}var yX={format:KI,parse:BF,defaultI18n:VI,setGlobalDateI18n:RF,setGlobalDateMasks:FF},bX=null;const bm=1e3,_m=bm*60,xm=_m*60,id=xm*24,Sm=id*7,QI=id*30,JI=id*365;function To(t,e,n,r){const o=(h,p)=>{const v=b=>r(b)%p===0;let m=p;for(;m&&!v(h);)n(h,-1),m-=1;return h},s=(h,p)=>{p&&o(h,p),e(h)},l=(h,p)=>{const v=new Date(+h);return s(v,p),v},u=(h,p)=>{const v=new Date(+h-1);return s(v,p),n(v,p),s(v),v};return{ceil:u,floor:l,range:(h,p,v,m)=>{const b=[],_=Math.floor(v),S=m?u(h,v):u(h);for(let O=S;O<p;n(O,_),s(O))b.push(new Date(+O));return b},duration:t}}const jF=To(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),zF=To(bm,t=>{t.setMilliseconds(0)},(t,e=1)=>{t.setTime(+t+bm*e)},t=>t.getSeconds()),UF=To(_m,t=>{t.setSeconds(0,0)},(t,e=1)=>{t.setTime(+t+_m*e)},t=>t.getMinutes()),ZF=To(xm,t=>{t.setMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+xm*e)},t=>t.getHours()),HF=To(id,t=>{t.setHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+id*e)},t=>t.getDate()-1),t8=To(QI,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getMonth();t.setMonth(n+e)},t=>t.getMonth()),VF=To(Sm,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,e=1)=>{t.setDate(t.getDate()+7*e)},t=>{const e=t8.floor(t),n=new Date(+t);return Math.floor((+n-+e)/Sm)}),WF=To(JI,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getFullYear();t.setFullYear(n+e)},t=>t.getFullYear()),e8={millisecond:jF,second:zF,minute:UF,hour:ZF,day:HF,week:VF,month:t8,year:WF},GF=To(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),$F=To(bm,t=>{t.setUTCMilliseconds(0)},(t,e=1)=>{t.setTime(+t+bm*e)},t=>t.getUTCSeconds()),YF=To(_m,t=>{t.setUTCSeconds(0,0)},(t,e=1)=>{t.setTime(+t+_m*e)},t=>t.getUTCMinutes()),XF=To(xm,t=>{t.setUTCMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+xm*e)},t=>t.getUTCHours()),qF=To(id,t=>{t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+id*e)},t=>t.getUTCDate()-1),n8=To(QI,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCMonth();t.setUTCMonth(n+e)},t=>t.getUTCMonth()),KF=To(Sm,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Sm*e)},t=>{const e=n8.floor(t),n=new Date(+t);return Math.floor((+n-+e)/Sm)}),QF=To(JI,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCFullYear();t.setUTCFullYear(n+e)},t=>t.getUTCFullYear()),r8={millisecond:GF,second:$F,minute:YF,hour:XF,day:qF,week:KF,month:n8,year:QF};function JF(t){const e=t?r8:e8,{year:n,month:r,week:o,day:s,hour:l,minute:u,second:d,millisecond:h}=e;return{tickIntervals:[[d,1],[d,5],[d,15],[d,30],[u,1],[u,5],[u,15],[u,30],[l,1],[l,3],[l,6],[l,12],[s,1],[s,2],[o,1],[r,1],[r,3],[n,1]],year:n,millisecond:h}}function i8(t,e,n,r,o){const s=+t,l=+e,{tickIntervals:u,year:d,millisecond:h}=JF(o),p=([O,E])=>O.duration*E,v=r?(l-s)/r:n||5,m=r||(l-s)/v,b=u.length,_=nf(u,m,0,b,p);let S;if(_===b){const O=Jy(s/d.duration,l/d.duration,v);S=[d,O]}else if(_){const O=m/p(u[_-1])<p(u[_])/m,[E,A]=O?u[_-1]:u[_],M=r?Math.ceil(r/E.duration):A;S=[E,M]}else{const O=Math.max(Jy(s,l,v),1);S=[h,O]}return S}const tB=(t,e,n,r,o)=>{const s=t>e,l=s?e:t,u=s?t:e,[d,h]=i8(l,u,n,r,o),p=d.range(l,new Date(+u+1),h,!0);return s?p.reverse():p},eB=(t,e,n,r,o)=>{const s=t>e,l=s?e:t,u=s?t:e,[d,h]=i8(l,u,n,r,o),p=[d.floor(l,h),d.ceil(u,h)];return s?p.reverse():p};function nB(t,e){const{second:n,minute:r,hour:o,day:s,week:l,month:u,year:d}=e;return n.floor(t)<t?".SSS":r.floor(t)<t?":ss":o.floor(t)<t?"hh:mm":s.floor(t)<t?"hh A":u.floor(t)<t?l.floor(t)<t?"MMM DD":"ddd DD":d.floor(t)<t?"MMMM":"YYYY"}function rB(t){const e=t.getTimezoneOffset(),n=new Date(t);return n.setMinutes(n.getMinutes()+e,n.getSeconds(),n.getMilliseconds()),n}class w4 extends Qd{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:tB,interpolate:Sc,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return eB}getTickMethodOptions(){const{domain:e,tickCount:n,tickInterval:r,utc:o}=this.options,s=e[0],l=e[e.length-1];return[s,l,n,r,o]}getFormatter(){const{mask:e,utc:n}=this.options,r=n?r8:e8,o=n?rB:ko;return s=>KI(o(s),e||nB(s,r))}clone(){return new w4(this.options)}}const o8=t=>new w4(t);o8.props={};const a8=t=>e=>-t(-e),A4=(t,e)=>{const n=Math.log(t),r=t===Math.E?Math.log:t===10?Math.log10:t===2?Math.log2:o=>Math.log(o)/n;return e?a8(r):r},T4=(t,e)=>{const n=t===Math.E?Math.exp:r=>bi(t,r);return e?a8(n):n},iB=(t,e,n,r=10)=>{const o=t<0,s=T4(r,o),l=A4(r,o),u=e<t,d=u?e:t,h=u?t:e;let p=l(d),v=l(h),m=[];if(!(r%1)&&v-p<n){if(p=Math.floor(p),v=Math.ceil(v),o)for(;p<=v;p+=1){const b=s(p);for(let _=r-1;_>=1;_-=1){const S=b*_;if(S>h)break;S>=d&&m.push(S)}}else for(;p<=v;p+=1){const b=s(p);for(let _=1;_<r;_+=1){const S=b*_;if(S>h)break;S>=d&&m.push(S)}}m.length*2<n&&(m=ws(d,h,n))}else{const b=n===-1?v-p:Math.min(v-p,n);m=ws(p,v,b).map(s)}return u?m.reverse():m},oB=(t,e,n,r)=>{const o=t<0,s=A4(r,o),l=T4(r,o),u=t>e,d=u?e:t,h=u?t:e,p=[l(Math.floor(s(d))),l(Math.ceil(s(h)))];return u?p.reverse():p};class C4 extends Qd{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:of,tickMethod:iB,tickCount:5}}chooseNice(){return oB}getTickMethodOptions(){const{domain:e,tickCount:n,base:r}=this.options,o=e[0],s=e[e.length-1];return[o,s,n,r]}chooseTransforms(){const{base:e,domain:n}=this.options,r=n[0]<0;return[A4(e,r),T4(e,r)]}clone(){return new C4(this.options)}}const s8=t=>new C4(t);s8.props={};const aB=t=>e=>e<0?-bi(-e,t):bi(e,t),sB=t=>e=>e<0?-bi(-e,1/t):bi(e,1/t),cB=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);class nS extends Qd{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:of,tickMethod:ws,tickCount:5}}constructor(e){super(e)}chooseTransforms(){const{exponent:e}=this.options;if(e===1)return[ko,ko];const n=e===.5?cB:aB(e),r=sB(e);return[n,r]}clone(){return new nS(this.options)}}const c8=t=>new nS(t);c8.props={};class M4 extends nS{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:of,tickMethod:ws,tickCount:5,exponent:.5}}constructor(e){super(e)}update(e){super.update(e)}clone(){return new M4(this.options)}}const l8=t=>new M4(t);l8.props={};const u8=t=>new Cl(t);u8.props={};const f8=t=>new es(t);f8.props={};const d8=t=>new ch(t);d8.props={};const lB=t=>e=>{const n=t(e);return(0,be.Z)(n)?Math.round(n):n};function uB(t,e){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=t(r)},n.prototype.composeOutput=function(r,o){const{domain:s,interpolator:l,round:u}=this.getOptions(),d=e(s.map(r)),h=u?lB(l):l;this.output=Fs(h,d,o,r)},n.prototype.invert=void 0}}var fB=function(t,e,n,r){var o=arguments.length,s=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(s=(o<3?l(s):o>3?l(e,n,s):l(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},L4;function dB(t){return[t(0),t(1)]}const hB=t=>{const[e,n]=t;return Fs(Sc(0,1),Ro(e,n))};let P4=L4=class extends pa{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:ko,tickMethod:ws,tickCount:5}}constructor(e){super(e)}clone(){return new L4(this.options)}};P4=L4=fB([uB(dB,hB)],P4);const h8=t=>new P4(t);h8.props={};const p8=t=>new Pu(t);p8.props={};function I4({colorDefault:t,colorBlack:e,colorWhite:n,colorStroke:r,colorBackground:o,padding1:s,padding2:l,padding3:u,alpha90:d,alpha65:h,alpha45:p,alpha25:v,alpha10:m,category10:b,category20:_,sizeDefault:S=1,padding:O="auto",margin:E=16}){return{padding:O,margin:E,size:S,color:t,category10:b,category20:_,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:o,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:e,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:e,gridStrokeOpacity:m,labelAlign:"horizontal",labelFill:e,labelOpacity:p,labelFontSize:12,labelFontWeight:"normal",labelSpacing:s,line:!1,lineLineWidth:.5,lineStroke:e,lineStrokeOpacity:p,tickLength:4,tickLineWidth:1,tickStroke:e,tickOpacity:p,titleFill:e,titleOpacity:d,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:e,itemLabelFillOpacity:d,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,focusMarkerSize:12,itemSpacing:[s,s,s/2],itemValueFill:e,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:e,navButtonFillOpacity:.65,navPageNumFill:e,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:e,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:e,tickStrokeOpacity:.25,rowPadding:s,colPadding:l,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:e,handleLabelFillOpacity:p,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:e,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:e,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:e,labelFillOpacity:p,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:d,tickStroke:e,tickStrokeOpacity:p},label:{fill:e,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:e,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:e,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:t,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:e,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:e,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:e,titleFillOpacity:d,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:e,subtitleFillOpacity:h,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{".g2-tooltip":{"font-family":"sans-serif"}}}}}const pB=I4({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),k4=t=>Je({},pB,t);k4.props={};const g8=t=>Je({},k4(),{category10:"category10",category20:"category20"},t);g8.props={};const gB=I4({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),v8=t=>Je({},gB,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},t),m8=t=>Object.assign({},v8(),{category10:"category10",category20:"category20"},t);m8.props={};const vB=I4({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),y8=t=>Je({},vB,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(e,n)=>n!==0},axisRight:{gridFilter:(e,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t);y8.props={};const b8=t=>(...e)=>{const n=Bs(Object.assign({},{crossPadding:50},t))(...e);return ub(n,t),n};b8.props=Object.assign(Object.assign({},Bs.props),{defaultPosition:"bottom"});function OX(){}const _8=t=>(...e)=>{const n=Bs(Object.assign({},{crossPadding:10},t))(...e);return ub(n,t),n};_8.props=Object.assign(Object.assign({},Bs.props),{defaultPosition:"left"});var R4=function(){};function mB(t,e){return t.reduce(function(n,r){return(n[r[e]]=n[r[e]]||[]).push(r),n},{})}function yB(t){var e;return((e=t[0])===null||e===void 0?void 0:e.map(function(n,r){return t.map(function(o){return o[r]})}))||[]}var Zo=Oo({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),bB=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:_A(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(o,s){return"".concat(o,"/").concat(s)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new V.ZA({class:Zo.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new V.ZA({class:Zo.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(e.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return(0,dn.Z)(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var n=this.pageViews,r=(0,X.CR)(yB(n.map(function(v){var m=v.getBBox(),b=m.width,_=m.height;return[b,_]})).map(function(v){return Math.max.apply(Math,(0,X.ev)([],(0,X.CR)(v),!1))}),2),o=r[0],s=r[1],l=this.attributes,u=l.pageWidth,d=u===void 0?o:u,h=l.pageHeight,p=h===void 0?s:h;return{pageWidth:d,pageHeight:p}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=t.prototype.getBBox.call(this),r=n.x,o=n.y,s=this.controllerShape,l=this.pageShape,u=l.pageWidth,d=l.pageHeight;return new Xr(r,o,u+s.width,d)},e.prototype.goTo=function(n){var r=this,o=this.attributes.animate,s=this,l=s.currPage,u=s.playState,d=s.playWindow,h=s.pageViews;if(u!=="idle"||n<0||h.length<=0||n>=h.length)return null;h[l].setLocalPosition(0,0),this.prepareFollowingPage(n);var p=(0,X.CR)(this.getFollowingPageDiff(n),2),v=p[0],m=p[1];this.playState="running";var b=E1(d,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-v,", ").concat(-m,")")}],o);return _l(b,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),b},e.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,o=this.currPage;if(!n&&o<=0)return null;var s=n?(o-1+r)%r:(0,dn.Z)(o-1,0,r);return this.goTo(s)},e.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,o=this.currPage;if(!n&&o>=r-1)return null;var s=n?(o+1)%r:(0,dn.Z)(o+1,0,r);return this.goTo(s)},e.prototype.renderClipPath=function(n){var r=this.pageShape,o=r.pageWidth,s=r.pageHeight;if(!o||!s){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(Zo.clipPath,"rect").styles({width:o,height:s}),this.contentGroup.attr("clipPath",this.clipPath.node())},e.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,o){n.includes(o)?Hu(r):Ls(r)})},e.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,o=n.nextBtnGroup,s=n.pageInfoGroup,l=this.attributes,u=l.orientation,d=l.controllerPadding,h=s.getBBox(),p=h.width,v=h.height,m=(0,X.CR)(u==="horizontal"?[-180,0]:[-90,90],2),b=m[0],_=m[1];r.setLocalEulerAngles(b),o.setLocalEulerAngles(_);var S=r.getBBox(),O=S.width,E=S.height,A=o.getBBox(),M=A.width,L=A.height,I=Math.max(O,p,M),R=u==="horizontal"?{offset:[[0,0],[O/2+d,0],[O+p+d*2,0]],textAlign:"start"}:{offset:[[I/2,-E-d],[I/2,0],[I/2,L+d]],textAlign:"center"},N=(0,X.CR)(R.offset,3),Z=(0,X.CR)(N[0],2),W=Z[0],it=Z[1],tt=(0,X.CR)(N[1],2),pt=tt[0],K=tt[1],lt=(0,X.CR)(N[2],2),ft=lt[0],vt=lt[1],It=R.textAlign,_t=s.querySelector("text");_t&&(_t.style.textAlign=It),r.setLocalPosition(W,it),s.setLocalPosition(pt,K),o.setLocalPosition(ft,vt)},e.prototype.updatePageInfo=function(){var n,r=this,o=r.currPage,s=r.pageViews,l=r.attributes.formatter;s.length<2||((n=this.pageInfoGroup.querySelector(Zo.pageInfo.class))===null||n===void 0||n.attr("text",l(o+1,s.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var o=this.attributes.orientation,s=this.pageShape,l=s.pageWidth,u=s.pageHeight,d=n<r?-1:1;return o==="horizontal"?[d*l,0]:[0,d*u]},e.prototype.prepareFollowingPage=function(n){var r=this,o=r.currPage,s=r.pageViews;if(this.setVisiblePages([n,o]),n!==o){var l=(0,X.CR)(this.getFollowingPageDiff(n),2),u=l[0],d=l[1];s[n].setLocalPosition(u,d)}},e.prototype.renderController=function(n){var r=this,o=this.attributes,s=o.controllerSpacing,l=o.classNamePrefix,u=l===void 0?"":l,d=this.pageShape,h=d.pageWidth,p=d.pageHeight,v=this.pageViews.length>=2,m=n.maybeAppendByClassName(Zo.controller,"g");if(Vu(m.node(),v),!!v){var b=ir(this.attributes,"button"),_=ir(this.attributes,"pageNum"),S=(0,X.CR)(Ps(b),2),O=S[0],E=S[1],A=O.size,M=(0,X._T)(O,["size"]),L=!m.select(Zo.prevBtnGroup.class).node(),I=m.maybeAppendByClassName(Zo.prevBtnGroup,"g").styles(E);this.prevBtnGroup=I.node();var R=I.maybeAppendByClassName(Zo.prevBtn,"path");if(u){var N=di(Zo.prevBtn.name,vi.prevBtn,u);R.node().setAttribute("class",N)}var Z=m.maybeAppendByClassName(Zo.nextBtnGroup,"g").styles(E);this.nextBtnGroup=Z.node();var W=Z.maybeAppendByClassName(Zo.nextBtn,"path");if(u){var it=di(Zo.nextBtn.name,vi.nextBtn,u);W.node().setAttribute("class",it)}[R,W].forEach(function(lt){lt.styles((0,X.pi)((0,X.pi)({},M),{transformOrigin:"center"})),Ka(lt.node(),A,!0)});var tt=m.maybeAppendByClassName(Zo.pageInfoGroup,"g");this.pageInfoGroup=tt.node();var pt=tt.maybeAppendByClassName(Zo.pageInfo,"text");if(pt.styles(_),u){var K=di(Zo.pageInfo.name,vi.pageInfo,u);pt.node().setAttribute("class",K)}this.updatePageInfo(),m.node().setLocalPosition(h+s,p/2),L&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},e.prototype.render=function(n,r){var o=n.x,s=o===void 0?0:o,l=n.y,u=l===void 0?0:l;this.attr("transform","translate(".concat(s,", ").concat(u,")"));var d=Jn(r);this.renderClipPath(d),this.renderController(d),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var n=this,r=Hy(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(V.Dk.INSERTED,r),this.playWindow.addEventListener(V.Dk.REMOVED,r)},e}(zi);function _B(t){return t instanceof Element||t instanceof Document}var dr,xB="component-poptip",ar={CONTAINER:"component-poptip",ARROW:"component-poptip-arrow",TEXT:"component-poptip-text"},x8=(dr={},dr[".".concat(ar.CONTAINER)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},dr[".".concat(ar.TEXT)]={"text-align":"center"},dr[".".concat(ar.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, -100%)"},dr[".".concat(ar.CONTAINER,"[data-position='left']")]={transform:"translate(-100%, -50%)"},dr[".".concat(ar.CONTAINER,"[data-position='right']")]={transform:"translate(0, -50%)"},dr[".".concat(ar.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},dr[".".concat(ar.CONTAINER,"[data-position='top-left']")]={transform:"translate(0,-100%)"},dr[".".concat(ar.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},dr[".".concat(ar.CONTAINER,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},dr[".".concat(ar.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},dr[".".concat(ar.CONTAINER,"[data-position='right-top']")]={transform:"translate(0, 0)"},dr[".".concat(ar.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},dr[".".concat(ar.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},dr[".".concat(ar.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},dr[".".concat(ar.ARROW)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},dr[".".concat(ar.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},dr["[data-position='top'] .".concat(ar.ARROW)]={bottom:"-2px"},dr[".".concat(ar.CONTAINER,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},dr["[data-position='left'] .".concat(ar.ARROW)]={right:"-2px"},dr[".".concat(ar.CONTAINER,"[data-position='right']")]={transform:"translate(5px, -50%)"},dr["[data-position='right'] .".concat(ar.ARROW)]={left:"-2px"},dr[".".concat(ar.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},dr["[data-position='bottom'] .".concat(ar.ARROW)]={top:"-2px"},dr[".".concat(ar.CONTAINER,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},dr["[data-position='top-left'] .".concat(ar.ARROW)]={left:"10px",bottom:"-2px"},dr[".".concat(ar.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},dr["[data-position='top-right'] .".concat(ar.ARROW)]={right:"10px",bottom:"-2px"},dr[".".concat(ar.CONTAINER,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},dr["[data-position='left-top'] .".concat(ar.ARROW)]={right:"-2px",top:"8px"},dr[".".concat(ar.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},dr["[data-position='left-bottom'] .".concat(ar.ARROW)]={right:"-2px",bottom:"8px"},dr[".".concat(ar.CONTAINER,"[data-position='right-top']")]={transform:"translate(5px, 0)"},dr["[data-position='right-top'] .".concat(ar.ARROW)]={left:"-2px",top:"8px"},dr[".".concat(ar.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},dr["[data-position='right-bottom'] .".concat(ar.ARROW)]={left:"-2px",bottom:"8px"},dr[".".concat(ar.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},dr["[data-position='bottom-left'] .".concat(ar.ARROW)]={top:"-2px",left:"8px"},dr[".".concat(ar.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},dr["[data-position='bottom-right'] .".concat(ar.ARROW)]={top:"-2px",right:"8px"},dr),SB=void 0;function OB(t,e,n,r,o,s){if(o===void 0&&(o=!1),s===void 0&&(s=!1),s)return[t,e];var l=n.getBoundingClientRect(),u=l.x,d=l.y,h=l.width,p=l.height;switch(r){case"top":return o?[u+h/2,d]:[t,d];case"left":return o?[u,d+p/2]:[u,e];case"bottom":return o?[u+h/2,d+p]:[t,d+p];case"right":return o?[u+h,d+p/2]:[u+h,e];case"top-right":case"right-top":return[u+h,d];case"left-bottom":case"bottom-left":return[u,d+p];case"right-bottom":case"bottom-right":return[u+h,d+p];case"top-left":case"left-top":default:return[u,d]}}var EB=function(t){var e;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e||(e=t.apply(SB,n)),e}};function wB(t){var e=t&&document.getElementById(t);return e||(e=document.createElement("div"),e.setAttribute("id",t),document.body.appendChild(e)),e}function AB(t){var e=EB(wB)(t);return e}var TB=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,Je({style:{id:xB}},e.defaultOptions,n))||this;return r.visibility="visible",r.map=new Map,r.domStyles="",r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.visibility==="visible"},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){this.visibility=this.style.visibility,this.updatePoptipElement()},e.prototype.update=function(n){this.attr(Je({},this.style,n)),this.render(this.attributes,this)},e.prototype.bind=function(n,r){var o=this;if(n){var s=this.style.text,l=function(d){var h=n,p=o.style,v=s;if(r){var m=typeof r=="function"?r.call(null,d):r,b=m.html,_=m.target,S=(0,X._T)(m,["html","target"]);p=a3({},o.style,S),(_||_===!1)&&(h=_),typeof b=="string"&&(v=b)}var O=p.position,E=p.arrowPointAtCenter,A=p.follow,M=p.offset;if(h){var L=d,I=L.clientX,R=L.clientY,N=(0,X.CR)(OB(I,R,h,O,E,A),2),Z=N[0],W=N[1];o.showTip(Z,W,{text:v,position:O,offset:M})}else o.hideTip()},u=function(){o.hideTip()};n.addEventListener("mousemove",l),n.addEventListener("mouseleave",u),this.map.set(n,[l,u])}},e.prototype.unbind=function(n){if(this.map.has(n)){var r=(0,X.CR)(this.map.get(n)||[],2),o=r[0],s=r[1];o&&n.removeEventListener("mousemove",o),s&&n.removeEventListener("mouseleave",s),this.map.delete(n)}},e.prototype.clear=function(){this.container.innerHTML=""},e.prototype.destroy=function(){var n=this,r;(0,X.ev)([],(0,X.CR)(this.map.keys()),!1).forEach(function(o){return n.unbind(o)}),(r=this.container)===null||r===void 0||r.remove(),t.prototype.destroy.call(this)},e.prototype.showTip=function(n,r,o){var s=Qn(o,"text");if(!(s&&typeof s!="string")&&(this.applyStyles(),n&&r&&o)){var l=o.offset,u=o.position;if(u&&this.container.setAttribute("data-position",u),this.setOffsetPosition(n,r,l),typeof s=="string"){var d=this.container.querySelector(".".concat(ar.TEXT));d&&(d.innerHTML=s)}this.visibility="visible",this.container.style.visibility="visible"}},e.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},e.prototype.getContainer=function(){return this.container},e.prototype.getClassName=function(){var n=this.style.containerClassName;return"".concat(ar.CONTAINER).concat(n?" ".concat(n):"")},e.prototype.initShape=function(){var n=this,r=this.style.id;this.container=AB(r),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",function(){return n.showTip()}),this.container.addEventListener("mouseleave",function(){return n.hideTip()})},e.prototype.updatePoptipElement=function(){var n=this.container;this.clear();var r=this.style,o=r.id,s=r.template,l=r.text;this.container.setAttribute("id",o),this.container.className=this.getClassName();var u='<span class="'.concat(ar.ARROW,'"></span>');n.innerHTML=u,(0,ne.Z)(s)?n.innerHTML+=s:s&&_B(s)&&n.appendChild(s),l&&(n.getElementsByClassName(ar.TEXT)[0].textContent=l),this.applyStyles(),this.container.style.visibility=this.visibility},e.prototype.applyStyles=function(){var n=da({},x8,this.style.domStyles),r=Object.entries(n).reduce(function(s,l){var u=(0,X.CR)(l,2),d=u[0],h=u[1],p=Object.entries(h).reduce(function(v,m){var b=(0,X.CR)(m,2),_=b[0],S=b[1];return"".concat(v).concat(_,": ").concat(S,";")},"");return"".concat(s).concat(d,"{").concat(p,"}")},"");if(this.domStyles!==r){this.domStyles=r;var o=this.container.querySelector("style");o&&this.container.removeChild(o),o=document.createElement("style"),o.innerHTML=r,this.container.appendChild(o)}},e.prototype.setOffsetPosition=function(n,r,o){o===void 0&&(o=this.style.offset);var s=(0,X.CR)(o,2),l=s[0],u=l===void 0?0:l,d=s[1],h=d===void 0?0:d;this.container.style.left="".concat(n+u,"px"),this.container.style.top="".concat(r+h,"px")},e.tag="poptip",e.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:x8,template:'<div class="'.concat(ar.TEXT,'"></div>')}},e}(zi),eo=Oo({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",focusGroup:"focus-group",focus:"focus",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),CB={offset:[0,20],domStyles:{".component-poptip":{opacity:"1",padding:"8px 12px",background:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},".component-poptip-arrow":{display:"none"},".component-poptip-text":{color:"#000",lineHeight:"20px"}}};function MB(t){var e=t.querySelector(eo.marker.class);return e?e.style:{}}var LB=function(t){(0,X.ZT)(e,t);function e(n,r){var o=t.call(this,n,{span:[1,1],marker:function(){return new V.Cd({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this;return o.keyFields={},o.keyFields=r||{},o}return Object.defineProperty(e.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,o=this.attributes,s=o.markerSize,l=o.focus,u=o.focusMarkerSize,d=n.node().getBBox(),h=d.width,p=d.height,v=r.node().getBBox(),m=v.width,b=v.height,_=l?u!=null?u:12:0;return{markerWidth:s,labelWidth:h,valueWidth:m,focusWidth:_,height:Math.max(s,p,b)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=(0,X.CR)(Zi(n),2),o=r[0],s=r[1],l=this.showValue?s:0,u=o+l;return[o/u,l/u]},enumerable:!1,configurable:!0}),e.prototype.setAttribute=function(n,r){t.prototype.setAttribute.call(this,n,r)},Object.defineProperty(e.prototype,"shape",{get:function(){var n,r=this.attributes,o=r.markerSize,s=r.width,l=this.actualSpace,u=l.markerWidth,d=l.focusWidth,h=l.height,p=this.actualSpace,v=p.labelWidth,m=p.valueWidth,b=(0,X.CR)(this.spacing,3),_=b[0],S=b[1],O=b[2];if(s){var E=s-o-_-S-d-O,A=(0,X.CR)(this.span,2),M=A[0],L=A[1];n=(0,X.CR)([M*E,L*E],2),v=n[0],m=n[1]}var I=u+v+m+_+S+d+O;return{width:I,height:h,markerWidth:u,labelWidth:v,valueWidth:m,focusWidth:d}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var n=this.attributes,r=n.spacing,o=n.focus;if(!r)return[0,0,0];var s=(0,X.CR)(Zi(r),3),l=s[0],u=s[1],d=s[2];return[l,this.showValue?u:0,o?d:0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,o=n.labelWidth,s=n.valueWidth,l=n.focusWidth,u=n.width,d=n.height,h=(0,X.CR)(this.spacing,3),p=h[0],v=h[1],m=h[2];return{height:d,width:u,markerWidth:r,labelWidth:o,valueWidth:s,focusWidth:l,position:[r/2,r+p,r+o+p+v,r+o+s+p+v+m+l/2]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var n=MB(this.markerGroup.node()),r=this.attributes,o=r.markerSize,s=r.markerStrokeWidth,l=s===void 0?n.strokeWidth:s,u=r.markerLineWidth,d=u===void 0?n.lineWidth:u,h=r.markerStroke,p=h===void 0?n.stroke:h,v=+(l||d||(p?1:0))*Math.sqrt(2),m=this.markerGroup.node().getBBox(),b=m.width,_=m.height;return(1-v/Math.max(b,_))*o},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(n){var r=this,o=this.attributes,s=o.marker,l=o.classNamePrefix,u=ir(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(eo.markerGroup,"g").style("zIndex",0),fo(!!s,this.markerGroup,function(){var d,h=r.markerGroup.node(),p=(d=h.childNodes)===null||d===void 0?void 0:d[0],v=di(eo.marker.name,vi.marker,l),m=typeof s=="string"?new mr({style:{symbol:s},className:v}):s();if(p)if(m.nodeName===p.nodeName)p instanceof mr?p.update((0,X.pi)((0,X.pi)({},u),{symbol:s})):(sw(p,m),Jn(p).styles(u));else{if(p.remove(),!(m instanceof mr)){var _=di(eo.marker.name,vi.marker,l);m.className=_}Jn(m).styles(u),h.appendChild(m)}else{if(!(m instanceof mr)){var b=di(eo.marker.name,vi.marker,l);m.className=b,Jn(m).styles(u)}h.appendChild(m)}r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var S=Ka(r.markerGroup.node(),r.scaleSize,!0);r.markerGroup.node().style._transform="scale(".concat(S,")")})},e.prototype.renderLabel=function(n){var r=ir(this.attributes,"label"),o=r.text,s=(0,X._T)(r,["text"]),l=this.attributes.classNamePrefix;this.labelGroup=n.maybeAppendByClassName(eo.labelGroup,"g").style("zIndex",0);var u=di(eo.label.name,vi.label,l),d=this.labelGroup.maybeAppendByClassName(eo.label,function(){return Di(o)});d.node().setAttribute("class",u),d.styles(s)},e.prototype.renderValue=function(n){var r=this,o=ir(this.attributes,"value"),s=o.text,l=(0,X._T)(o,["text"]),u=this.attributes.classNamePrefix;this.valueGroup=n.maybeAppendByClassName(eo.valueGroup,"g").style("zIndex",0),fo(this.showValue,this.valueGroup,function(){var d=di(eo.value.name,vi.value,u),h=r.valueGroup.maybeAppendByClassName(eo.value,function(){return Di(s)});h.node().setAttribute("class",d),h.styles(l)})},e.prototype.createPoptip=function(){var n=this.attributes.poptip,r=n||{},o=r.render,s=(0,X._T)(r,["render"]),l=new TB({style:da(CB,s)});return this.poptipGroup=l,l},e.prototype.bindPoptip=function(n){var r=this,o=this.attributes.poptip;if(o){var s=this.poptipGroup||this.createPoptip();s.bind(n,function(){var l=r.attributes,u=l.labelText,d=l.valueText,h=l.markerFill,p=typeof u=="string"?u:u==null?void 0:u.attr("text"),v=typeof d=="string"?d:d==null?void 0:d.attr("text");if(typeof o.render=="function")return{html:o.render((0,X.pi)((0,X.pi)({},r.keyFields),{label:p,value:v,color:h}))};var m="";return(typeof p=="string"||typeof p=="number")&&(m+='<div class="component-poptip-label">'.concat(p,"</div>")),(typeof v=="string"||typeof v=="number")&&(m+='<div class="component-poptip-value">'.concat(v,"</div>")),{html:m}})}},e.prototype.renderFocus=function(n){var r=this,o=this.attributes,s=o.focus,l=o.focusMarkerSize,u=o.classNamePrefix,d={x:0,y:0,size:l,opacity:.6,symbol:"focus",stroke:"#aaaaaa",lineWidth:1};(0,Tl.Z)(s)||(this.focusGroup=n.maybeAppendByClassName(eo.focusGroup,"g").style("zIndex",0),fo(s,this.focusGroup,function(){var h=di(eo.focus.name,vi.focusIcon,u),p=new mr({style:(0,X.pi)((0,X.pi)({},d),{symbol:"focus"}),className:h}),v=new V.Cd({style:{r:d.size/2,fill:"transparent"}}),m=r.focusGroup.node();m.appendChild(v),m.appendChild(p),p.update({opacity:0}),n.node().addEventListener("pointerenter",function(){p.update({opacity:1})}),n.node().addEventListener("pointerleave",function(){p.update({opacity:0})})}))},e.prototype.renderPoptip=function(n){var r=this,o=this.attributes.poptip;if(o){var s=n.maybeAppendByClassName(eo.value,"g").node(),l=n.maybeAppendByClassName(eo.label,"g").node();[s,l].forEach(function(u){u&&r.bindPoptip(u)})}},e.prototype.renderBackground=function(n){var r=this.shape,o=r.width,s=r.height,l=ir(this.attributes,"background");this.background=n.maybeAppendByClassName(eo.backgroundGroup,"g").style("zIndex",-1);var u=this.background.maybeAppendByClassName(eo.background,"rect");u.styles((0,X.pi)({width:o,height:s},l));var d=this.attributes.classNamePrefix,h=d===void 0?"":d;if(h){var p=di(eo.background.name,vi.background,h);u.node().setAttribute("class",p)}},e.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,o=n.valueWidth,s=n.height,l=(0,X.CR)(n.position,4),u=l[0],d=l[1],h=l[2],p=l[3],v=s/2;this.markerGroup.styles({transform:"translate(".concat(u,", ").concat(v,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(d,", ").concat(v,")")}),this.focusGroup&&this.focusGroup.styles({transform:"translate(".concat(p,", ").concat(v,")")}),D0(this.labelGroup.select(eo.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(h,", ").concat(v,")")}),D0(this.valueGroup.select(eo.value.class).node(),Math.ceil(o)))},e.prototype.render=function(n,r){var o=Jn(r),s=n.x,l=s===void 0?0:s,u=n.y,d=u===void 0?0:u;o.styles({transform:"translate(".concat(l,", ").concat(d,")")}),this.renderMarker(o),this.renderLabel(o),this.renderValue(o),this.renderBackground(o),this.renderPoptip(o),this.renderFocus(o),this.adjustLayout()},e}(zi),od=Oo({page:"item-page",navigator:"navigator",item:"item"},"items"),S8=function(t,e,n){return n===void 0&&(n=!0),t?e(t):n},PB=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:R4,mouseenter:R4,mouseleave:R4})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,o=n.gridCol,s=n.data;if(!r&&!o)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&o?[r,o]:r?[r,s.length]:[s.length,o]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,o=n.layout,s=n.poptip,l=n.focus,u=n.focusMarkerSize,d=n.classNamePrefix,h=ir(this.attributes,"item"),p=r.map(function(v,m){var b=v.id,_=b===void 0?m:b,S=v.label,O=v.value;return{id:"".concat(_),index:m,style:(0,X.pi)({layout:o,labelText:S,valueText:O,poptip:s,focus:l,focusMarkerSize:u,classNamePrefix:d},Object.fromEntries(Object.entries(h).map(function(E){var A=(0,X.CR)(E,2),M=A[0],L=A[1];return[M,Po(L,[v,m,r])]})))}});return p},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var n=this,r=this.attributes,o=r.orientation,s=r.width,l=r.rowPadding,u=r.colPadding,d=(0,X.CR)(this.navigatorShape,1),h=d[0],p=(0,X.CR)(this.grid,2),v=p[0],m=p[1],b=m*v,_=0;return this.pageViews.children.map(function(S,O){var E,A,M=Math.floor(O/b),L=O%b,I=n.ifHorizontal(m,v),R=[Math.floor(L/I),L%I];o==="vertical"&&R.reverse();var N=(0,X.CR)(R,2),Z=N[0],W=N[1],it=(s-h-(m-1)*u)/m,tt=S.getBBox().height,pt=(0,X.CR)([0,0],2),K=pt[0],lt=pt[1];return o==="horizontal"?(E=(0,X.CR)([_,Z*(tt+l)],2),K=E[0],lt=E[1],_=W===m-1?0:_+it+u):(A=(0,X.CR)([W*(it+u),_],2),K=A[0],lt=A[1],_=Z===v-1?0:_+tt+l),{page:M,index:O,row:Z,col:W,pageIndex:L,width:it,height:tt,x:K,y:lt}})},e.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,o=n.height,s=n.rowPadding,l=n.colPadding,u=(0,X.CR)(this.navigatorShape,1),d=u[0],h=(0,X.CR)(this.grid,2),p=h[0],v=h[1],m=(0,X.CR)([r-d,o],2),b=m[0],_=m[1],S=(0,X.CR)([0,0,0,0,0,0,0,0],8),O=S[0],E=S[1],A=S[2],M=S[3],L=S[4],I=S[5],R=S[6],N=S[7];return this.pageViews.children.map(function(Z,W){var it,tt,pt,K,lt=Z.getBBox(),ft=lt.width,vt=lt.height,It=R===0?0:l,_t=R+It+ft;if(_t<=b&&S8(L,function($t){return $t<v}))return it=(0,X.CR)([R+It,N,_t],3),O=it[0],E=it[1],R=it[2],{width:ft,height:vt,x:O,y:E,page:A,index:W,pageIndex:M++,row:I,col:L++};tt=(0,X.CR)([I+1,0,0,N+vt+s],4),I=tt[0],L=tt[1],R=tt[2],N=tt[3];var Lt=N+vt;return Lt<=_&&S8(I,function($t){return $t<p})?(pt=(0,X.CR)([R,N,ft],3),O=pt[0],E=pt[1],R=pt[2],{width:ft,height:vt,x:O,y:E,page:A,index:W,pageIndex:M++,row:I,col:L++}):(K=(0,X.CR)([0,0,ft,0,A+1,0,0,0],8),O=K[0],E=K[1],R=K[2],N=K[3],A=K[4],M=K[5],I=K[6],L=K[7],{width:ft,height:vt,x:O,y:E,page:A,index:W,pageIndex:M++,row:I,col:L++})})},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){var o=this.attributes.orientation;return Ma(o,n,r)},e.prototype.flattenPage=function(n){n.querySelectorAll(od.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(od.page.class).forEach(function(r){var o=n.removeChild(r);o.destroy()})},e.prototype.renderItems=function(n){var r=this.attributes,o=r.click,s=r.mouseenter,l=r.mouseleave,u=r.classNamePrefix;this.flattenPage(n);var d=this.dispatchCustomEvent.bind(this),h=di(od.item.name,vi.item,u);Jn(n).selectAll(od.item.class).data(this.renderData,function(p){return p.id}).join(function(p){return p.append(function(v){var m=v.style,b=(0,X._T)(v,["style"]);return new LB({style:m},b)}).attr("className",h).on("click",function(){o==null||o(this),d("itemClick",{item:this})}).on("pointerenter",function(){s==null||s(this),d("itemMouseenter",{item:this})}).on("pointerleave",function(){l==null||l(this),d("itemMouseleave",{item:this})})},function(p){return p.each(function(v){var m=v.style;this.update(m)})},function(p){return p.remove()})},e.prototype.relayoutNavigator=function(){var n,r=this.attributes,o=r.layout,s=r.width,l=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,u=(0,X.CR)(this.navigatorShape,2),d=u[0],h=u[1];this.navigator.update(o==="grid"?{pageWidth:s-d,pageHeight:l-h}:{})},e.prototype.adjustLayout=function(){var n=this,r=Object.entries(mB(this.itemsLayout,"page")).map(function(s){var l=(0,X.CR)(s,2),u=l[0],d=l[1];return{page:u,layouts:d}}),o=(0,X.ev)([],(0,X.CR)(this.navigator.getContainer().children),!1);r.forEach(function(s){var l=s.layouts,u=n.pageViews.appendChild(new V.ZA({className:od.page.name}));l.forEach(function(d){var h=d.x,p=d.y,v=d.index,m=d.width,b=d.height,_=o[v];u.appendChild(_),Pg(_,"__layout__",d),_.update({x:h,y:p,width:m,height:b})})}),this.relayoutNavigator()},e.prototype.renderNavigator=function(n){var r=this.attributes,o=r.orientation,s=r.classNamePrefix,l=ir(this.attributes,"nav"),u=da({orientation:o,classNamePrefix:s},l),d=this;return n.selectAll(od.navigator.class).data(["nav"]).join(function(h){return h.append(function(){return new bB({style:u})}).attr("className",od.navigator.name).each(function(){d.navigator=this})},function(h){return h.each(function(){this.update(u)})},function(h){return h.remove()}),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(n,r){var o=this.attributes.data;if(!(!o||o.length===0)){var s=this.renderNavigator(Jn(r));this.renderItems(s.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(n,r){var o=new V.Aw(n,{detail:r});this.dispatchEvent(o)},e}(zi),IB=function(t){(0,X.ZT)(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.update=function(n){this.attr(n)},e}(V.k9),O8=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,wA)||this}return e.prototype.renderTitle=function(n,r,o){var s=this.attributes,l=s.showTitle,u=s.titleText,d=s.classNamePrefix,h=ir(this.attributes,"title"),p=(0,X.CR)(Ps(h),2),v=p[0],m=p[1];this.titleGroup=n.maybeAppendByClassName(Ti.titleGroup,"g").styles(m);var b=(0,X.pi)((0,X.pi)({width:r,height:o},v),{text:l?u:"",classNamePrefix:d});this.title=this.titleGroup.maybeAppendByClassName(Ti.title,function(){return new cf({style:b})}).update(b)},e.prototype.renderCustom=function(n){var r=this.attributes.data,o={innerHTML:this.attributes.render(r),pointerEvents:"auto"};n.maybeAppendByClassName(Ti.html,function(){return new IB({className:Ti.html.name,style:o})}).update(o)},e.prototype.renderItems=function(n,r){var o=r.x,s=r.y,l=r.width,u=r.height,d=ir(this.attributes,"title",!0),h=(0,X.CR)(Ps(d),2),p=h[0],v=h[1],m=(0,X.pi)((0,X.pi)({},p),{width:l,height:u,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(Ti.itemsGroup,"g").styles((0,X.pi)((0,X.pi)({},v),{transform:"translate(".concat(o,", ").concat(s,")")}));var b=this;this.itemsGroup.selectAll(Ti.items.class).data(["items"]).join(function(_){return _.append(function(){return new PB({style:m})}).attr("className",Ti.items.name).each(function(){b.items=Jn(this)})},function(_){return _.update(m)},function(_){return _.remove()})},e.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),o=r.x,s=r.y;this.itemsGroup.node().style.transform="translate(".concat(o,", ").concat(s,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,o=n.width,s=n.height;return r?this.title.node().getAvailableSpace():new Xr(0,0,o,s)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n,r,o=(n=this.title)===null||n===void 0?void 0:n.node(),s=(r=this.items)===null||r===void 0?void 0:r.node();return!o||!s?t.prototype.getBBox.call(this):oA(o,s)},e.prototype.render=function(n,r){var o=this.attributes,s=o.width,l=o.height,u=o.x,d=u===void 0?0:u,h=o.y,p=h===void 0?0:h,v=o.classNamePrefix,m=o.render,b=Jn(r),_=r.className||"legend-category";v?r.attr("className","".concat(_," ").concat(v,"legend")):r.className||r.attr("className","legend-category"),r.style.transform="translate(".concat(d,", ").concat(p,")"),m?this.renderCustom(b):(this.renderTitle(b,s,l),this.renderItems(b,this.availableSpace),this.adjustLayout())},e}(zi),kB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function E8(t,e){const n=Yo(t,"shape"),r=Yo(t,"color"),o=n?n.clone():null,s=[];for(const[u,d]of e){const h=u.type,v=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:d.data).map((m,b)=>{var _;return o?o.map(m||"point"):((_=u==null?void 0:u.style)===null||_===void 0?void 0:_.shape)||d.defaultShape||"point"});typeof h=="string"&&s.push([h,v])}if(s.length===0)return["point",["point"]];if(s.length===1||!n)return s[0];const{range:l}=n.getOptions();return s.map(([u,d])=>{let h=0;for(let p=0;p<s.length;p++){const v=l[p%l.length];d[p]===v&&h++}return[h/d.length,[u,d]]}).sort((u,d)=>d[0]-u[0])[0][1]}function RB(t,e){const{scales:n,library:r,markState:o}=e,[s,l]=E8(n,o),{itemMarker:u,itemMarkerSize:d}=t,h=(m,b)=>{var _,S,O;const E=((O=(S=(_=r[`mark.${s}`])===null||_===void 0?void 0:_.props)===null||S===void 0?void 0:S.shape[m])===null||O===void 0?void 0:O.props.defaultMarker)||io(m.split(".")),A=typeof d=="function"?d(b):d;return()=>mO(E,{color:b.color})(0,0,A)},p=m=>`${l[m]}`;return Yo(n,"shape")&&!u?(m,b)=>h(p(b),m):typeof u=="function"?(m,b)=>{const _=u(m.id,b);return typeof _=="string"?h(_,m):_}:(m,b)=>h(u||p(b),m)}function DB(t){const e=Yo(t,"opacity");if(e){const{range:n}=e.getOptions();return(r,o)=>n[o]}}function NB(t,e){const n=Yo(t,"size");return n instanceof J3?n.map(NaN)*2:e}function FB(t,e){const{scales:n,markState:r}=e,[o,s]=E8(n,r),{itemMarker:l,itemMarkerLineWidth:u}=t;if(u!==void 0)return u;const d=["line","hyphen","dash","smooth","hv","hvh","vh","vhv"];if(typeof l=="string"&&d.includes(l))return 4;if(typeof l=="function")return(v,m)=>{const b=l(v.id,m);if(typeof b=="string"&&d.includes(b))return 4};if((Array.isArray(s)?s:[s]).some(v=>d.includes(v)))return 4}function BB(t,e){const{labelFormatter:n=m=>`${m}`}=t,{scales:r,theme:o}=e,s=o.legendCategory.itemMarkerSize,l=NB(r,s),u={itemMarker:RB(Object.assign(Object.assign({},t),{itemMarkerSize:l}),e),itemMarkerSize:l,itemMarkerOpacity:DB(r),itemMarkerLineWidth:FB(t,e)},d=typeof n=="string"?Cs(n):n,h=Yo(r,"color"),p=Iw(r),v=h?m=>h.map(m):()=>e.theme.color;return Object.assign(Object.assign({},u),{data:p.map(m=>({id:m,label:d(m),color:v(m)}))})}function jB(t,e,n){const{position:r}=e;if(r==="center"){const{bbox:l}=t,{width:u,height:d}=l;return{width:u,height:d}}const{width:o,height:s}=cb(t,e,n);return{width:o,height:s}}function zB(t){return Object.assign(Object.assign({},t),{data:(t==null?void 0:t.data.filter(e=>e.id!==""))||[]})}const D4=t=>{const{labelFormatter:e,layout:n,order:r,orientation:o,position:s,size:l,title:u,cols:d,itemMarker:h,render:p}=t,v=kB(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker","render"]),{gridRow:m}=v;return b=>{const{value:_,theme:S}=b,{bbox:O}=_,{width:E,height:A}=jB(_,t,D4),M=ab(s,n),L=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(s)?"vertical":"horizontal",width:E,height:A,layout:d!==void 0?"grid":"flex"},d!==void 0&&{gridCol:d}),m!==void 0&&{gridRow:m}),{titleText:th(u)}),BB(t,b)),{legendCategory:I={}}=S,R=eh(Object.assign({},I,zB(L),v));if(p)return new O8({style:Object.assign(Object.assign({},R),{x:O.x,y:O.y,render:p})});const N=new Mw({style:Object.assign(Object.assign({x:O.x,y:O.y,width:O.width,height:O.height},M),{subOptions:R})});return N.appendChild(new O8({className:"legend-category",style:R})),N}};D4.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const w8=t=>()=>new V.ZA;w8.props={};var UB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function A8(t,e,n,r){switch(r){case"center":return{x:t+n/2,y:e,textAlign:"middle"};case"right":return{x:t+n,y:e,textAlign:"right"};default:return{x:t,y:e,textAlign:"left"}}}const ZB=Cw({render(t,e){const{width:n,title:r,subtitle:o,spacing:s=2,align:l="left",x:u,y:d}=t,h=UB(t,["width","title","subtitle","spacing","align","x","y"]);e.style.transform=`translate(${u}, ${d})`;const p=En(h,"title"),v=En(h,"subtitle"),b=ob(e,".title","text").attr("className","title").call(jn,Object.assign(Object.assign(Object.assign({},A8(0,0,n,l)),{fontSize:14,textBaseline:"top",text:r}),p)).node().getLocalBounds();ob(e,".sub-title","text").attr("className","sub-title").call(_=>{if(!o)return _.node().remove();_.node().attr(Object.assign(Object.assign(Object.assign({},A8(0,b.max[1]+s,n,l)),{fontSize:12,textBaseline:"top",text:o}),v))})}}),T8=t=>({value:e,theme:n})=>{const{x:r,y:o,width:s,height:l}=e.bbox;return new ZB({style:Je({},n.title,Object.assign({x:r,y:o,width:s,height:l},t))})};T8.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};function C8({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):n}function HB({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function VB({map:t,initKey:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function WB(t){return typeof t=="object"?t.valueOf():t}class M8 extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=WB,e!==null)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(C8({map:this.map,initKey:this.initKey},e))}has(e){return super.has(C8({map:this.map,initKey:this.initKey},e))}set(e,n){return super.set(HB({map:this.map,initKey:this.initKey},e),n)}delete(e){return super.delete(VB({map:this.map,initKey:this.initKey},e))}}const N4=Symbol("defaultUnknown");function L8(t,e,n){for(let r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function P8(t){const{value:e,from:n,to:r,mapper:o,notFoundReturn:s}=t;let l=o.get(e);if(l===void 0){if(s!==N4)return s;l=n.push(e)-1,o.set(e,l)}return r[l%r.length]}function I8(t){return t instanceof Date?e=>`${e}`:typeof t=="object"?e=>JSON.stringify(e):e=>e}class F4 extends mb{getDefaultOptions(){return{domain:[],range:[],unknown:N4}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&L8(this.domainIndexMap,this.getDomain(),this.domainKey),P8({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&L8(this.rangeIndexMap,this.getRange(),this.rangeKey),P8({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=I8(n),this.rangeKey=I8(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new F4(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:n}=this.options;return this.sortedDomain=n?[...e].sort(n):e,this.sortedDomain}}function GB(t){const e=Math.min(...t);return t.map(n=>n/e)}function $B(t,e){const n=t.length,r=e-n;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,e):t}function YB(t){return Math.round(t*1e12)/1e12}function XB(t){const{domain:e,range:n,paddingOuter:r,paddingInner:o,flex:s,round:l,align:u}=t,d=e.length,h=$B(s,d),[p,v]=n,m=v-p,b=2/d*r+1-1/d*o,_=m/b,S=_*o/d,O=_-d*S,E=GB(h),A=E.reduce((pt,K)=>pt+K),M=O/A,L=new M8(e.map((pt,K)=>{const lt=E[K]*M;return[pt,l?Math.floor(lt):lt]})),I=new M8(e.map((pt,K)=>{const ft=E[K]*M+S;return[pt,l?Math.floor(ft):ft]})),R=Array.from(I.values()).reduce((pt,K)=>pt+K),Z=(m-(R-R/d*o))*u,W=p+Z;let it=l?Math.round(W):W;const tt=new Array(d);for(let pt=0;pt<d;pt+=1){tt[pt]=YB(it);const K=e[pt];it+=I.get(K)}return{valueBandWidth:L,valueStep:I,adjustedRange:tt}}function qB(t){var e;const{domain:n}=t,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=t.flex)===null||e===void 0)&&e.length))return XB(t);const{range:s,paddingOuter:l,paddingInner:u,round:d,align:h}=t;let p,v,m=s[0];const _=s[1]-m,S=l*2,O=r-u;p=_/Math.max(1,S+O),d&&(p=Math.floor(p)),m+=(_-p*(r-u))*h,v=p*(1-u),d&&(m=Math.round(m),v=Math.round(v));const E=new Array(r).fill(0).map((A,M)=>m+M*p);return{valueStep:p,valueBandWidth:v,adjustedRange:E}}class B4 extends F4{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:N4,flex:[]}}constructor(e){super(e)}clone(){return new B4(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:n}=this.options;return e>0?e:n}getPaddingOuter(){const{padding:e,paddingOuter:n}=this.options;return e>0?e:n}rescale(){super.rescale();const{align:e,domain:n,range:r,round:o,flex:s}=this.options,{adjustedRange:l,valueBandWidth:u,valueStep:d}=qB({align:e,range:r,round:o,flex:s,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=d,this.valueBandWidth=u,this.adjustedRange=l}}var j4=function(t){if(typeof t!="object"||t===null)return t;var e;if((0,Sr.Z)(t)){e=[];for(var n=0,r=t.length;n<r;n++)typeof t[n]=="object"&&t[n]!=null?e[n]=j4(t[n]):e[n]=t[n]}else{e={};for(var o in t)typeof t[o]=="object"&&t[o]!=null?e[o]=j4(t[o]):e[o]=t[o]}return e},z4=j4,KB=function(t){(0,X.ZT)(e,t);function e(n){var r=this,o=n.style,s=(0,X._T)(n,["style"]);return r=t.call(this,Je({},{type:"column"},(0,X.pi)({style:o},s)))||this,r.columnsGroup=new V.ZA({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return e.prototype.render=function(){var n=this.attributes,r=n.columns,o=n.x,s=n.y;this.columnsGroup.style.transform="translate(".concat(o,", ").concat(s,")"),Jn(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(l){return l.append("rect").attr("className","column").each(function(u){this.attr(u)})},function(l){return l.each(function(u){this.attr(u)})},function(l){return l.remove()})},e.prototype.update=function(n){this.attr(da({},this.attributes,n)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(V.s$),QB=function(t){(0,X.ZT)(e,t);function e(n){var r=this,o=n.style,s=(0,X._T)(n,["style"]);return r=t.call(this,Je({},{type:"lines"},(0,X.pi)({style:o},s)))||this,r.linesGroup=r.appendChild(new V.ZA),r.areasGroup=r.appendChild(new V.ZA),r.render(),r}return e.prototype.render=function(){var n=this.attributes,r=n.lines,o=n.areas,s=n.x,l=n.y;this.style.transform="translate(".concat(s,", ").concat(l,")"),r&&this.renderLines(r),o&&this.renderAreas(o)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(n){this.attr(da({},this.attributes,n)),this.render()},e.prototype.renderLines=function(n){Jn(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(o){this.attr(o)})},function(r){return r.each(function(o){this.attr(o)})},function(r){return r.remove()})},e.prototype.renderAreas=function(n){Jn(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(o){this.attr(o)})},function(r){return r.each(function(o){this.style(o)})},function(r){return r.remove()})},e}(V.s$);function JB(t,e,n,r){var o,s=[],l=!!r,u,d,h=[1/0,1/0],p=[-1/0,-1/0],v,m,b;if(l){o=(0,X.CR)(r,2),h=o[0],p=o[1];for(var _=0,S=t.length;_<S;_+=1){var O=t[_];h=yo(h,O),p=yc(p,O)}}for(var _=0,E=t.length;_<E;_+=1){var O=t[_];if(_===0&&!n)b=O;else if(_===E-1&&!n)m=O,s.push(b),s.push(m);else{var A=[_?_-1:E-1,_-1][n?0:1];u=t[A],d=t[n?(_+1)%E:_+1];var M=[0,0];M=T0(d,u),M=Xa(M,e);var L=xl(O,u),I=xl(O,d),R=L+I;R!==0&&(L/=R,I/=R);var N=Xa(M,-L),Z=Xa(M,I);m=Gu(O,N),v=Gu(O,Z),v=yo(v,yc(d,O)),v=yc(v,yo(d,O)),N=T0(v,O),N=Xa(N,-L/I),m=Gu(O,N),m=yo(m,yc(u,O)),m=yc(m,yo(u,O)),Z=T0(O,m),Z=Xa(Z,I/L),v=Gu(O,Z),l&&(m=yc(m,h),m=yo(m,p),v=yc(v,h),v=yo(v,p)),s.push(b),s.push(m),b=v}}return n&&s.push(s.shift()),s}function tj(t,e,n){var r;e===void 0&&(e=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var o=!!e,s=[],l=0,u=t.length;l<u;l+=2)s.push([t[l],t[l+1]]);for(var d=JB(s,.4,o,n),h=s.length,p=[],v,m,b,l=0;l<h-1;l+=1)v=d[l*2],m=d[l*2+1],b=s[l+1],p.push(["C",v[0],v[1],m[0],m[1],b[0],b[1]]);return o&&(v=d[h],m=d[h+1],r=(0,X.CR)(s,1),b=r[0],p.push(["C",v[0],v[1],m[0],m[1],b[0],b[1]])),p}function ej(t,e){var n,r=e.x,o=e.y,s=(0,X.CR)(o.getOptions().range||[0,0],2),l=s[0],u=s[1];return u>l&&(n=(0,X.CR)([l,u],2),u=n[0],l=n[1]),t.map(function(d){var h=d.map(function(p,v){return[r.map(v),(0,dn.Z)(o.map(p),u,l)]});return h})}function Om(t,e){e===void 0&&(e=!1);var n=e?t.length-1:0,r=t.map(function(o,s){return(0,X.ev)([s===n?"M":"L"],(0,X.CR)(o),!1)});return e?r.reverse():r}function rS(t,e){if(e===void 0&&(e=!1),t.length<=2)return Om(t);for(var n=[],r=t.length,o=0;o<r;o+=1){var s=e?t[r-o-1]:t[o];kd(s,n.slice(-2))||n.push.apply(n,(0,X.ev)([],(0,X.CR)(s),!1))}var l=tj(n,!1);return e?l.unshift((0,X.ev)(["M"],(0,X.CR)(t[r-1]),!1)):l.unshift((0,X.ev)(["M"],(0,X.CR)(t[0]),!1)),l}function U4(t,e,n){var r=z4(t);return r.push(["L",e,n],["L",0,n],["Z"]),r}function nj(t,e,n,r){return t.map(function(o){return U4(e?rS(o):Om(o),n,r)})}function rj(t,e,n){for(var r=[],o=t.length-1;o>=0;o-=1){var s=t[o],l=Om(s),u=void 0;if(o===0)u=U4(l,e,n);else{var d=t[o-1],h=Om(d,!0);h[0][0]="L",u=(0,X.ev)((0,X.ev)((0,X.ev)([],(0,X.CR)(l),!1),(0,X.CR)(h),!1),[["Z"]],!1)}r.push(u)}return r}function ij(t,e,n){for(var r=[],o=t.length-1;o>=0;o-=1){var s=t[o],l=rS(s),u=void 0;if(o===0)u=U4(l,e,n);else{var d=t[o-1],h=rS(d,!0),p=s[0];h[0][0]="L",u=(0,X.ev)((0,X.ev)((0,X.ev)([],(0,X.CR)(l),!1),(0,X.CR)(h),!1),[(0,X.ev)(["M"],(0,X.CR)(p),!1),["Z"]],!1)}r.push(u)}return r}var k8=D(71523),oj=function(t,e){if((0,Sr.Z)(t)){for(var n,r=1/0,o=0;o<t.length;o++){var s=t[o],l=(0,mo.Z)(e)?e(s):s[e];l<r&&(n=s,r=l)}return n}},R8=D(13882),aj=function(t,e){if((0,Sr.Z)(t)){for(var n,r=-1/0,o=0;o<t.length;o++){var s=t[o],l=(0,mo.Z)(e)?e(s):s[e];l>r&&(n=s,r=l)}return n}};function D8(t){return t.length===0?[0,0]:[(0,k8.Z)(oj(t,function(e){return(0,k8.Z)(e)||0})),(0,R8.Z)(aj(t,function(e){return(0,R8.Z)(e)||0}))]}function N8(t){for(var e=z4(t),n=e[0].length,r=(0,X.CR)([Array(n).fill(0),Array(n).fill(0)],2),o=r[0],s=r[1],l=0;l<e.length;l+=1)for(var u=e[l],d=0;d<n;d+=1)u[d]>=0?(u[d]+=o[d],o[d]=u[d]):(u[d]+=s[d],s[d]=u[d]);return e}var sj=function(t){(0,X.ZT)(e,t);function e(n){return t.call(this,n,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(e.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(n==null?void 0:n.length)===0)return[[]];var r=z4(n);return(0,be.Z)(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?N8(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var n=this.scales.y,r=(0,X.CR)(n.getOptions().domain||[0,0],2),o=r[0],s=r[1];return s<0?n.map(s):n.map(o<0?0:o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,o=n.height;return{width:r,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,o=r.type,s=r.isStack,l=r.smooth;if(o!=="line")throw new Error("linesStyle can only be used in line type");var u=ir(this.attributes,"area"),d=ir(this.attributes,"line"),h=this.containerShape.width,p=this.data;if(p[0].length===0)return{lines:[],areas:[]};var v=this.scales,m=v.x,b=v.y,_=ej(p,{type:"line",x:m,y:b}),S=[];if(u){var O=this.baseline;s?S=l?ij(_,h,O):rj(_,h,O):S=nj(_,l,h,O)}return{lines:_.map(function(E,A){return(0,X.pi)({stroke:n.getColor(A),d:l?rS(E):Om(E)},d)}),areas:S.map(function(E,A){return(0,X.pi)({d:E,fill:n.getColor(A)},u)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var n=this,r=ir(this.attributes,"column"),o=this.attributes,s=o.isStack,l=o.type,u=o.scale;if(l!=="column")throw new Error("columnsStyle can only be used in column type");var d=this.containerShape.height,h=this.rawData;if(!h)return{columns:[]};s&&(h=N8(h));var p=this.createScales(h),v=p.x,m=p.y,b=(0,X.CR)(D8(h),2),_=b[0],S=b[1],O=new wc({domain:[0,S-(_>0?0:_)],range:[0,d*u]}),E=v.getBandWidth(),A=this.rawData;return{columns:h.map(function(M,L){return M.map(function(I,R){var N=E/h.length,Z=function(){return{x:v.map(R)+N*L,y:I>=0?m.map(I):m.map(0),width:N,height:O.map(Math.abs(I))}},W=function(){return{x:v.map(R),y:m.map(I),width:E,height:O.map(A[L][R])}};return(0,X.pi)((0,X.pi)({fill:n.getColor(L)},r),s?W():Z())})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){FE(r,".container","rect").attr("className","container").node();var o=n.type,s=n.x,l=n.y,u="spark".concat(o),d=(0,X.pi)({x:s,y:l},o==="line"?this.linesStyle:this.columnsStyle);Jn(r).selectAll(".spark").data([o]).join(function(h){return h.append(function(p){return p==="line"?new QB({className:u,style:d}):new KB({className:u,style:d})}).attr("className","spark ".concat(u))},function(h){return h.update(d)},function(h){return h.remove()})},e.prototype.getColor=function(n){var r=this.attributes.color;return(0,Sr.Z)(r)?r[n%r.length]:(0,mo.Z)(r)?r.call(null,n):r},e.prototype.createScales=function(n){var r,o,s=this.attributes,l=s.type,u=s.scale,d=s.range,h=d===void 0?[]:d,p=s.spacing,v=this.containerShape,m=v.width,b=v.height,_=(0,X.CR)(D8(n),2),S=_[0],O=_[1],E=new wc({domain:[(r=h[0])!==null&&r!==void 0?r:S,(o=h[1])!==null&&o!==void 0?o:O],range:[b,b*(1-u)]});return l==="line"?{type:l,x:new wc({domain:[0,n[0].length-1],range:[0,m]}),y:E}:{type:l,x:new B4({domain:n[0].map(function(A,M){return M}),range:[0,m],paddingInner:p,paddingOuter:p/2,align:.5}),y:E}},e.tag="sparkline",e}(zi),F8=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,(0,X.pi)((0,X.pi)((0,X.pi)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(o){return o.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},qa(Tb,"handle")),qa(Ab,"handleIcon")),qa(ng,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(o){return function(s){s.stopPropagation(),r.target=o,r.prevPos=r.getOrientVal(sf(s));var l=r.availableSpace,u=l.x,d=l.y,h=r.getBBox(),p=h.x,v=h.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([u,d])-r.getOrientVal([+p,+v])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(o){var s=r.attributes,l=s.slidable,u=s.brushable,d=s.type;o.stopPropagation();var h=r.getOrientVal(sf(o)),p=h-r.prevPos;if(p){var v=r.getRatio(p);switch(r.target){case"start":l&&r.setValuesOffset(v);break;case"end":l&&r.setValuesOffset(0,v);break;case"selection":l&&r.setValuesOffset(v,v);break;case"track":if(!u)return;r.selectionWidth+=v,d==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break;default:break}r.prevPos=h}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(o){var s=r.attributes,l=s.onChange,u=s.type,d=u==="range"?o:o[1],h=u==="range"?r.getValues():r.getValues()[1],p=new V.Aw("valuechange",{detail:{oldValue:d,value:h}});r.dispatchEvent(p),l==null||l(h)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=ir(this.attributes,"sparkline");return(0,X.pi)((0,X.pi)({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,o=n.trackSize,s=(0,X.CR)(this.getOrientVal([[r,o],[o,r]]),2),l=s[0],u=s[1];return{width:l,height:u}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.x,o=n.y,s=n.padding,l=(0,X.CR)(Zi(s),4),u=l[0],d=l[1],h=l[2],p=l[3],v=this.shape,m=v.width,b=v.height;return{x:p,y:u,width:m-(p+d),height:b-(u+h)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var o=r===!1?!1:this.attributes.animate;this.updateSelectionArea(o),this.updateHandlesPosition(o)},e.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(Ca.selection.class).each(function(o,s){$o(this,r[s],n)})},e.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&$o(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&$o(this.endHandle,this.getHandleStyle("end"),n))},e.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var o=this.values,s=this.clampValues(n);this.attributes.values=s,this.setValues(s),r&&this.onValueChange(o)},e.prototype.renderTrack=function(n){var r=this.attributes,o=r.x,s=r.y,l=ir(this.attributes,"track");this.trackShape=Jn(n).maybeAppendByClassName(Ca.track,"rect").styles((0,X.pi)((0,X.pi)({x:o,y:s},this.shape),l))},e.prototype.renderBrushArea=function(n){var r=this.attributes,o=r.x,s=r.y,l=r.brushable;this.brushArea=Jn(n).maybeAppendByClassName(Ca.brushArea,"rect").styles((0,X.pi)({x:o,y:s,fill:"transparent",cursor:l?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(n){var r=this,o=this.attributes,s=o.x,l=o.y,u=o.orientation,d=Jn(n).maybeAppendByClassName(Ca.sparklineGroup,"g");fo(u==="horizontal",d,function(h){var p=(0,X.pi)((0,X.pi)({},r.sparklineStyle),{x:s,y:l});h.maybeAppendByClassName(Ca.sparkline,function(){return new sj({style:p})}).update(p)})},e.prototype.renderHandles=function(){var n=this,r,o=this.attributes,s=o.showHandle,l=o.type,u=l==="range"?["start","end"]:["end"],d=s?u:[],h=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(Ca.handle.class).data(d.map(function(p){return{type:p}}),function(p){return p.type}).join(function(p){return p.append(function(v){var m=v.type;return new Mb({style:n.getHandleStyle(m)})}).each(function(v){var m=v.type;this.attr("class","".concat(Ca.handle.name," ").concat(m,"-handle"));var b="".concat(m,"Handle");h[b]=this,this.addEventListener("pointerdown",h.onDragStart(m))})},function(p){return p.each(function(v){var m=v.type;this.update(h.getHandleStyle(m))})},function(p){return p.each(function(v){var m=v.type,b="".concat(m,"Handle");h[b]=void 0}).remove()})},e.prototype.renderSelection=function(n){var r=this.attributes,o=r.x,s=r.y,l=r.type,u=r.selectionType;this.foregroundGroup=Jn(n).maybeAppendByClassName(Ca.foreground,"g");var d=ir(this.attributes,"selection"),h=function(v){return v.style("visibility",function(m){return m.show?"visible":"hidden"}).style("cursor",function(m){return u==="select"?"grab":u==="invert"?"crosshair":"default"}).styles((0,X.pi)((0,X.pi)({},d),{transform:"translate(".concat(o,", ").concat(s,")")}))},p=this;this.foregroundGroup.selectAll(Ca.selection.class).data(l==="value"?[]:this.calcSelectionArea().map(function(v,m){return{style:(0,X.pi)({},v),index:m,show:u==="select"?m===1:m!==1}}),function(v){return v.index}).join(function(v){return v.append("rect").attr("className",Ca.selection.name).call(h).each(function(m,b){var _=this;b===1?(p.selectionShape=Jn(this),this.on("pointerdown",function(S){_.attr("cursor","grabbing"),p.onDragStart("selection")(S)}),p.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),p.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),p.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){_.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){_.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){_.attr("cursor","pointer")})):this.on("pointerdown",p.onDragStart("track"))})},function(v){return v.call(h)},function(v){return v.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},e.prototype.clampValues=function(n,r){var o;r===void 0&&(r=4);var s=(0,X.CR)(this.range,2),l=s[0],u=s[1],d=(0,X.CR)(this.getValues().map(function(O){return af(O,r)}),2),h=d[0],p=d[1],v=Array.isArray(n)?n:[h,n!=null?n:p],m=(0,X.CR)((v||[h,p]).map(function(O){return af(O,r)}),2),b=m[0],_=m[1];if(this.attributes.type==="value")return[0,(0,dn.Z)(_,l,u)];b>_&&(o=(0,X.CR)([_,b],2),b=o[0],_=o[1]);var S=_-b;return S>u-l?[l,u]:b<l?h===l&&p===_?[l,_]:[l,S+l]:_>u?p===u&&h===b?[b,u]:[u-S,u]:[b,_]},e.prototype.calcSelectionArea=function(n){var r=(0,X.CR)(this.clampValues(n),2),o=r[0],s=r[1],l=this.availableSpace,u=l.x,d=l.y,h=l.width,p=l.height;return this.getOrientVal([[{y:d,height:p,x:u,width:o*h},{y:d,height:p,x:o*h+u,width:(s-o)*h},{y:d,height:p,x:s*h,width:(1-s)*h}],[{x:u,width:h,y:d,height:o*p},{x:u,width:h,y:o*p+d,height:(s-o)*p},{x:u,width:h,y:s*p,height:(1-s)*p}]])},e.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,o=this.availableSpace,s=o.x,l=o.y,u=o.width,d=o.height,h=(0,X.CR)(this.clampValues(),2),p=h[0],v=h[1],m=n==="start"?-r:r,b=(n==="start"?p:v)*this.getOrientVal([u,d])+m;return{x:s+this.getOrientVal([b,u/2]),y:l+this.getOrientVal([d/2,b])}},e.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:n==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(n){var r,o=this.attributes,s=o.type,l=o.orientation,u=o.formatter,d=o.autoFitLabel,h=ir(this.attributes,"handle"),p=ir(h,"label"),v=h.spacing,m=this.getHandleSize(),b=this.clampValues(),_=n==="start"?b[0]:b[1],S=u(_),O=new w0({style:(0,X.pi)((0,X.pi)((0,X.pi)({},p),this.inferTextStyle(n)),{text:S})}),E=O.getBBox(),A=E.width,M=E.height;if(O.destroy(),!d){if(s==="value")return{text:S,x:0,y:-M-v};var L=v+m+(l==="horizontal"?A/2:0);return r={text:S},r[l==="horizontal"?"x":"y"]=n==="start"?-L:L,r}var I=0,R=0,N=this.availableSpace,Z=N.width,W=N.height,it=this.calcSelectionArea()[1],tt=it.x,pt=it.y,K=it.width,lt=it.height,ft=v+m;if(l==="horizontal"){var vt=ft+A/2;if(n==="start"){var It=tt-ft-A;I=It>0?-vt:vt}else{var _t=Z-tt-K-ft>A;I=_t?vt:-vt}}else{var Lt=ft,$t=M+ft;n==="start"?R=pt-m>M?-$t:Lt:R=W-(pt+lt)-m>M?$t:-Lt}return{x:I,y:R,text:S}},e.prototype.getHandleLabelStyle=function(n){var r=ir(this.attributes,"handleLabel");return(0,X.pi)((0,X.pi)((0,X.pi)({},r),this.calcHandleText(n)),this.inferTextStyle(n))},e.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=ir(this.attributes,"handleIcon"),o=this.getOrientVal(["ew-resize","ns-resize"]),s=this.getHandleSize();return(0,X.pi)({cursor:o,shape:n,size:s},r)},e.prototype.getHandleStyle=function(n){var r=this.attributes,o=r.x,s=r.y,l=r.showLabel,u=r.showLabelOnInteraction,d=r.orientation,h=this.calcHandlePosition(n),p=h.x,v=h.y,m=this.calcHandleText(n),b=l;return!l&&u&&(this.target?b=!0:b=!1),(0,X.pi)((0,X.pi)((0,X.pi)({},qa(this.getHandleIconStyle(),"icon")),qa((0,X.pi)((0,X.pi)({},this.getHandleLabelStyle(n)),m),"label")),{transform:"translate(".concat(p+o,", ").concat(v+s,")"),orientation:d,showLabel:b,type:n,zIndex:3})},e.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,o=n.width,s=n.height;return r||Math.floor((this.getOrientVal([+s,+o])+4)/2.4)},e.prototype.getOrientVal=function(n){var r=(0,X.CR)(n,2),o=r[0],s=r[1],l=this.attributes.orientation;return l==="horizontal"?o:s},e.prototype.setValuesOffset=function(n,r){r===void 0&&(r=0);var o=this.attributes.type,s=(0,X.CR)(this.getValues(),2),l=s[0],u=s[1],d=o==="range"?n:0,h=[l+d,u+r].sort();this.innerSetValues(h,!0)},e.prototype.getRatio=function(n){var r=this.availableSpace,o=r.width,s=r.height;return n/this.getOrientVal([o,s])},e.prototype.dispatchCustomEvent=function(n,r,o){var s=this;n.on(r,function(l){l.stopPropagation(),s.dispatchEvent(new V.Aw(o,{detail:l}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var o=n.deltaX,s=n.deltaY,l=s||o,u=this.getRatio(l);this.setValuesOffset(u,u)}},e.tag="slider",e}(zi),cj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function lj(t,e,n){const{x:r,y:o,width:s,height:l}=t;if(e==="left")return[r+s-n,o];if(e==="right")return[r,o];if(e==="bottom")return[r,o];if(e==="top")return[r,o+l-n]}const Em=t=>{const{orientation:e,labelFormatter:n,size:r,style:o={},position:s}=t,l=cj(t,["orientation","labelFormatter","size","style","position"]);return u=>{var d;const{scales:[h],value:p,theme:v,coordinate:m}=u,{bbox:b}=p,{width:_,height:S}=b,{slider:O={}}=v,E=((d=h.getFormatter)===null||d===void 0?void 0:d.call(h))||(Z=>Z+""),A=typeof n=="string"?Cs(n):n,M=e==="horizontal",L=Yr(m)&&M,{trackSize:I=O.trackSize}=o,[R,N]=lj(b,s,I);return new F8({className:"slider",style:Object.assign({},O,Object.assign(Object.assign({x:R,y:N,trackLength:M?_:S,orientation:e,formatter:Z=>{const W=A||E,it=L?1-Z:Z,tt=ss(h,it,!0);return W(tt)},sparklineData:fj(t,u)},o),l))})}};function uj(t,e){const[n]=Array.from(t.entries()).filter(([o])=>o.type==="line"||o.type==="area"||o.type==="interval").filter(([o])=>o.slider).map(([o])=>{const{encode:s,slider:l}=o;if(l!=null&&l.x){const u=d=>{const h=s[d];return[d,h?h.value:void 0]};return Object.fromEntries(e.map(u))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((o,s,l)=>(o[s]=o[s]||[],o[s].push(n.y[l]),o),{});return Object.values(r)}function fj(t,e){const{markState:n}=e;return(0,Sr.Z)(t.sparklineData)?t.sparklineData:uj(n,["y","series"])}Em.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const B8=t=>Em(Object.assign(Object.assign({},t),{orientation:"horizontal"}));B8.props=Object.assign(Object.assign({},Em.props),{defaultPosition:"bottom"});const j8=t=>Em(Object.assign(Object.assign({},t),{orientation:"vertical"}));j8.props=Object.assign(Object.assign({},Em.props),{defaultPosition:"left"});var dj=function(t){(0,X.ZT)(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(o){var s=r.attributes.value;if(o!==s){var l={detail:{oldValue:o,value:s}};r.dispatchEvent(new V.Aw("scroll",l)),r.dispatchEvent(new V.Aw("valuechange",l))}},r.onTrackClick=function(o){var s=r.attributes.slidable;if(s){var l=(0,X.CR)(r.getLocalPosition(),2),u=l[0],d=l[1],h=(0,X.CR)(r.padding,4),p=h[0],v=h[3],m=r.getOrientVal([u+v,d+p]),b=r.getOrientVal(sf(o)),_=(b-m)/r.trackLength;r.setValue(_,!0)}},r.onThumbMouseenter=function(o){r.dispatchEvent(new V.Aw("thumbMouseenter",{detail:o.detail}))},r.onTrackMouseenter=function(o){r.dispatchEvent(new V.Aw("trackMouseenter",{detail:o.detail}))},r.onThumbMouseleave=function(o){r.dispatchEvent(new V.Aw("thumbMouseleave",{detail:o.detail}))},r.onTrackMouseleave=function(o){r.dispatchEvent(new V.Aw("trackMouseleave",{detail:o.detail}))},r}return Object.defineProperty(e.prototype,"padding",{get:function(){var n=this.attributes.padding;return Zi(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var n=this.attributes.value,r=(0,X.CR)(this.range,2),o=r[0],s=r[1];return(0,dn.Z)(n,o,s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,o=n.trackLength,s=o===void 0?r:o;return s},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,o=(0,X.CR)(this.padding,4),s=o[0],l=o[1],u=o[2],d=o[3],h=(0,X.CR)(this.getOrientVal([[r,n],[n,r]]),2),p=h[0],v=h[1];return{x:d,y:s,width:+p-(d+l),height:+v-(s+u)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,o=n.trackSize;return r?o/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,o=n.thumbRadius;if(!r)return 0;var s=this.availableSpace,l=s.width,u=s.height;return o||this.getOrientVal([u,l])/2},enumerable:!1,configurable:!0}),e.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,o=r.viewportLength,s=r.contentLength,l=o/s,u=(0,X.CR)(this.range,2),d=u[0],h=u[1],p=n*(h-d-l);return[p,p+l]},e.prototype.getValue=function(){return this.value},e.prototype.renderSlider=function(n){var r=this.attributes,o=r.x,s=r.y,l=r.orientation,u=r.trackSize,d=r.padding,h=r.slidable,p=ir(this.attributes,"track"),v=ir(this.attributes,"thumb"),m=(0,X.pi)((0,X.pi)({x:o,y:s,brushable:!1,orientation:l,padding:d,selectionRadius:this.thumbRadius,showHandle:!1,slidable:h,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:u,values:this.getValues()},qa(p,"track")),qa(v,"selection"));this.slider=Jn(n).maybeAppendByClassName("scrollbar",function(){return new F8({style:m})}).update(m).node()},e.prototype.render=function(n,r){this.renderSlider(r)},e.prototype.setValue=function(n,r){r===void 0&&(r=!1);var o=this.attributes.value,s=(0,X.CR)(this.range,2),l=s[0],u=s[1];this.slider.setValues(this.getValues((0,dn.Z)(n,l,u)),r),this.onValueChange(o)},e.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},e.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},e.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},e.tag="scrollbar",e}(zi),hj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const wm=t=>{const{orientation:e,labelFormatter:n,style:r}=t,o=hj(t,["orientation","labelFormatter","style"]);return({scales:[s],value:l,theme:u})=>{const{bbox:d}=l,{x:h,y:p,width:v,height:m}=d,{scrollbar:b={}}=u,{ratio:_,range:S}=s.getOptions(),O=e==="horizontal"?v:m,E=O/_,[A,M]=S,L=M>A?0:1;return new dj({className:"g2-scrollbar",style:Object.assign({},b,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:h,y:p,trackLength:O,value:L}),o),{orientation:e,contentLength:E,viewportLength:O}))})}};wm.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const z8=t=>wm(Object.assign(Object.assign({},t),{orientation:"horizontal"}));z8.props=Object.assign(Object.assign({},wm.props),{defaultPosition:"bottom"});const U8=t=>wm(Object.assign(Object.assign({},t),{orientation:"vertical"}));U8.props=Object.assign(Object.assign({},wm.props),{defaultPosition:"left"});const Z4=(t,e)=>{const{coordinate:r}=e;return(o,s,l)=>{const[u]=o,{transform:d="",fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=u.style,[m,b]=Yr(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],_=[{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.01},{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:m,fillOpacity:h,strokeOpacity:p,opacity:v}];return u.animate(_,Object.assign(Object.assign({},l),t))}},pj=(t,e)=>{const{coordinate:r}=e;return(o,s,l)=>{const[u]=o,{transform:d="",fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=u.style,[m,b]=Yr(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],_=[{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:m},{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.99},{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:0,strokeOpacity:0,opacity:0}];return u.animate(_,Object.assign(Object.assign({},l),t))}},Z8=(t,e)=>{const{coordinate:r}=e;return V.ux.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:V.h0.NUMBER}),(o,s,l)=>{const[u]=o,d=p=>{const{__data__:v,style:m}=p,{fillOpacity:b=1,strokeOpacity:_=1,opacity:S=1}=m,{points:O,y:E,y1:A}=v,M=Lc(r,O,[E,A]),{innerRadius:L,outerRadius:I}=M,R=[{scaleInYRadius:L+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:L+1e-4,fillOpacity:b,strokeOpacity:_,opacity:S,offset:.01},{scaleInYRadius:I,fillOpacity:b,strokeOpacity:_,opacity:S}];return p.animate(R,Object.assign(Object.assign({},l),t))},h=p=>{const{style:v}=p,{transform:m="",fillOpacity:b=1,strokeOpacity:_=1,opacity:S=1}=v,[O,E]=Yr(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],A=[{transform:`${m} ${E}`.trimStart(),transformOrigin:O,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${m} ${E}`.trimStart(),transformOrigin:O,fillOpacity:b,strokeOpacity:_,opacity:S,offset:.01},{transform:`${m} scale(1, 1)`.trimStart(),transformOrigin:O,fillOpacity:b,strokeOpacity:_,opacity:S}];return p.animate(A,Object.assign(Object.assign({},l),t))};return Rr(r)?d(u):h(u)}},gj=(t,e)=>{const{coordinate:r}=e;return(o,s,l)=>{const[u]=o,{transform:d="",fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=u.style,[m,b]=Yr(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],_=[{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:m},{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.99},{transform:`${d} ${b}`.trimStart(),transformOrigin:m,fillOpacity:0,strokeOpacity:0,opacity:0}];return u.animate(_,Object.assign(Object.assign({},l),t))}},H8=(t,e)=>{V.ux.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:V.h0.NUMBER});const{coordinate:r}=e;return(o,s,l)=>{const[u]=o;if(!Rr(r))return Z4(t,e)(o,s,l);const{__data__:d,style:h}=u,{radius:p=0,inset:v=0,fillOpacity:m=1,strokeOpacity:b=1,opacity:_=1}=h,{points:S,y:O,y1:E}=d,A=Bg().cornerRadius(p).padAngle(v*Math.PI/180),M=Lc(r,S,[O,E]),{startAngle:L,endAngle:I}=M,R=[{waveInArcAngle:L+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:L+1e-4,fillOpacity:m,strokeOpacity:b,opacity:_,offset:.01},{waveInArcAngle:I,fillOpacity:m,strokeOpacity:b,opacity:_}],N=u.animate(R,Object.assign(Object.assign({},l),t));return N.onframe=function(){u.style.d=A(Object.assign(Object.assign({},M),{endAngle:Number(u.style.waveInArcAngle)}))},N.onfinish=function(){u.style.d=A(Object.assign(Object.assign({},M),{endAngle:I}))},N}};H8.props={};const V8=t=>(e,n,r)=>{const[o]=e,{fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=o.style,d=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:s,strokeOpacity:l,opacity:u}];return o.animate(d,Object.assign(Object.assign({},r),t))};V8.props={};const W8=t=>(e,n,r)=>{const[o]=e,{fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=o.style,d=[{fillOpacity:s,strokeOpacity:l,opacity:u},{fillOpacity:0,strokeOpacity:0,opacity:0}];return o.animate(d,Object.assign(Object.assign({},r),t))};W8.props={};const vj=t=>(n,r,o)=>{const[s]=n,{transform:l="",fillOpacity:u=1,strokeOpacity:d=1,opacity:h=1}=s.style,p="center center",v=[{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:p,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:p,fillOpacity:u,strokeOpacity:d,opacity:h,offset:.01},{transform:`${l} scale(1)`.trimStart(),transformOrigin:p,fillOpacity:u,strokeOpacity:d,opacity:h}];return s.animate(v,Object.assign(Object.assign({},o),t))},mj=t=>(n,r,o)=>{const[s]=n,{transform:l="",fillOpacity:u=1,strokeOpacity:d=1,opacity:h=1}=s.style,p="center center",v=[{transform:`${l} scale(1)`.trimStart(),transformOrigin:p},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:p,fillOpacity:u,strokeOpacity:d,opacity:h,offset:.99},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:p,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(v,Object.assign(Object.assign({},o),t))},G8=t=>(e,n,r)=>{var o,s;const[l]=e,u=((s=(o=l).getTotalLength)===null||s===void 0?void 0:s.call(o))||0,d=[{lineDash:[0,u]},{lineDash:[u,0]}];return l.animate(d,Object.assign(Object.assign({},r),t))};G8.props={};const yj={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},bj={[V.bn.CIRCLE]:["cx","cy","r"],[V.bn.ELLIPSE]:["cx","cy","rx","ry"],[V.bn.RECT]:["x","y","width","height"],[V.bn.IMAGE]:["x","y","width","height"],[V.bn.LINE]:["x1","y1","x2","y2"],[V.bn.POLYLINE]:["points"],[V.bn.POLYGON]:["points"]};function gp(t,e,n=!1){const r={};for(const o of e){const s=t.style[o];s?r[o]=s:n&&(r[o]=yj[o])}return r}const Am=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function H4(t){const{min:e,max:n}=t.getLocalBounds(),[r,o]=e,[s,l]=n,u=l-o,d=s-r;return[r,o,d,u]}function _j(t){const[e,n,r,o]=t;return`
    M ${e} ${n}
    L ${e+r} ${n}
    L ${e+r} ${n+o}
    L ${e} ${n+o}
    Z
  `}function xj(t,e){const[n,r,o,s]=H4(t),l=s/o,u=Math.ceil(Math.sqrt(e/l)),d=Math.ceil(e/u),h=[],p=s/d;let v=0,m=e;for(;m>0;){const b=Math.min(m,u),_=o/b;for(let S=0;S<b;S++){const O=n+S*_,E=r+v*p;h.push(_j([O,E,_,p]))}m-=b,v+=1}return h}function Sj(t="pack"){return typeof t=="function"?t:xj}function Oj(t,e,n){let{transform:r}=t.style;const{transform:o}=e.style;$8(e,t);let s=Am;if(t.nodeName===V.bn.GROUP){const[d,h,p,v]=H4(t),[m,b,_,S]=H4(e),O=d-m,E=h-b,A=p/_,M=v/S;r=`translate(${O}, ${E}) scale(${A}, ${M})`}else s=s.concat(bj[t.nodeName]||[]);const l=[Object.assign({transform:r!=null?r:"none"},gp(t,s,!0)),Object.assign({transform:o!=null?o:"none"},gp(e,s,!0))];return e.animate(l,n)}function $8(t,e){t.__data__=e.__data__,t.className=e.className,t.markType=e.markType,e.parentNode.replaceChild(t,e)}function Ej(t,e){const{nodeName:n}=t;if(n==="path")return t;const r=new V.y$({style:Object.assign(Object.assign({},gp(t,Am)),{d:e})});return $8(r,t),r}function Y8(t,e){const n=t.indexOf(e),r=t.lastIndexOf(e);return n===r}function wj(t){return!Y8(t,"m")||!Y8(t,"M")}function X8(t){const e=(0,V.YR)(t);if(e&&!wj(e))return e}function q8(t){const{nodeName:e}=t;if(e==="path"){const n=Qn(t,"attributes");return n.markerEnd||n.markerStart}return!1}function V4(t,e,n,r){const{nodeName:o}=e,{nodeName:s}=n,l=X8(e),u=X8(n),{opacity:d=1,strokeOpacity:h=1,fillOpacity:p=1}=e.style,{opacity:v=1,strokeOpacity:m=1,fillOpacity:b=1}=n.style,_=o===s&&o!=="path",S=l===void 0||u===void 0,O=q8(e)||q8(n);if(_||S||O)return Oj(e,n,r);const E=Ej(t,l),A=Object.assign(Object.assign({},gp(e,Am)),{opacity:d,strokeOpacity:h,fillOpacity:p}),M=Object.assign(Object.assign({},gp(n,Am)),{opacity:v,strokeOpacity:m,fillOpacity:b}),L=[A,M];if(l!==u){L[0].d=l,L[1].d=u;const I=E.animate(L,r);return I.onfinish=()=>{Ga(E,n),E.style.d=u,E.style.transform="none"},E.style.transform="none",I}return kd(A,M)?null:E.animate(L,r)}function Aj(t,e,n,r){t.style.visibility="hidden";const o=r(t,e.length);return e.map((s,l)=>{const u=new V.y$({style:Object.assign({d:o[l]},gp(t,Am))});return V4(s,u,s,n)})}function Tj(t,e,n,r){const o=r(e,t.length),{fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=e.style,d=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:s,strokeOpacity:l,opacity:u}],h=e.animate(d,n);return[...t.map((v,m)=>{const b=new V.y$({style:{d:o[m],fill:e.style.fill}});return V4(v,v,b,n)}),h]}const K8=t=>(e,n,r)=>{const o=Sj(t.split),s=Object.assign(Object.assign({},r),t),{length:l}=e,{length:u}=n;if(l===1&&u===1||l>1&&u>1){const[d]=e,[h]=n;return V4(d,d,h,s)}if(l===1&&u>1){const[d]=e;return Aj(d,n,s,o)}if(l>1&&u===1){const[d]=n;return Tj(e,d,s,o)}return null};K8.props={};const Q8=(t,e)=>(n,r,o)=>{const[s]=n,{min:[l,u],halfExtents:d}=s.getLocalBounds(),h=d[0]*2,p=d[1]*2,v=new V.y$({style:{d:`M${l},${u}L${l+h},${u}L${l+h},${u+p}L${l},${u+p}Z`}});return s.appendChild(v),s.style.clipPath=v,Z4(t,e)([v],r,o)};Q8.props={};const J8=(t,e)=>(n,r,o)=>{const[s]=n,{min:[l,u],halfExtents:d}=s.getLocalBounds(),h=d[0]*2,p=d[1]*2,v=new V.y$({style:{d:`M${l},${u}L${l+h},${u}L${l+h},${u+p}L${l},${u+p}Z`}});return s.appendChild(v),s.style.clipPath=v,Z8(t,e)([v],r,o)};J8.props={};var Cj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Mj(t,{elements:e,datum:n,groupKey:r=_=>_,regionGroupKey:o=_=>_,link:s=!1,background:l=!1,delay:u=60,scale:d,coordinate:h,emitter:p,state:v={},region:m=!1,regionEleFilter:b=_=>Oh.includes(_.markType)}){var _,S;const O=(_=e(t))!==null&&_!==void 0?_:[],E=m?O.filter(b):O,A=new Set(E),M=m?o:r,L=$r(E,M),I=I_({elementsof:e,root:t,coordinate:h,scale:d}),R=Fl(E,n),[N,Z]=zg(Object.assign({elements:E,valueof:R,link:s,coordinate:h},En(v.active,"link"))),[W,it,tt]=L_(Object.assign({document:t.ownerDocument,scale:d,coordinate:h,background:l,valueof:R},En(v.active,"background"))),pt=Je(v,{active:Object.assign({},((S=v.active)===null||S===void 0?void 0:S.offset)&&{transform:(...Be)=>{const Qe=v.active.offset(...Be),[,en]=Be;return Ug(E[en],Qe,h)}})}),K=M_(pt,E),{updateState:lt,removeState:ft,hasState:vt}=K(R);let It;const _t=Be=>{const{nativeEvent:Qe=!0}=Be;let en=Be.target;if(m&&(en=I(Be)),!A.has(en))return;It&&clearTimeout(It);const Ge=M(en),cn=L.get(Ge),wn=new Set(cn);for(const Mn of E)wn.has(Mn)?vt(Mn,"active")||lt(Mn,"active"):(lt(Mn,"inactive"),Z(Mn)),Mn!==en&&it(Mn);W(en),N(cn),Qe&&p.emit("element:highlight",{nativeEvent:Qe,data:{data:n(en),group:cn.map(n)}})},Lt=()=>{It&&clearTimeout(It),It=setTimeout(()=>{$t(),It=null},u)},$t=(Be=!0)=>{for(const Qe of E)ft(Qe,"active","inactive"),it(Qe),Z(Qe);Be&&p.emit("element:unhighlight",{nativeEvent:Be})},he=Be=>{let Qe=Be.target;if(m&&(Qe=I(Be)),!Qe){u>0?Lt():$t();return}l&&!tt(Qe)||!l&&!A.has(Qe)||(u>0?Lt():$t())},le=()=>{$t()};t.addEventListener("pointerover",_t),t.addEventListener("pointermove",_t),t.addEventListener("pointerout",he),t.addEventListener("pointerleave",le);const Ee=Be=>{const{nativeEvent:Qe}=Be;Qe||$t(!1)},Ue=Be=>{const{nativeEvent:Qe}=Be;if(Qe)return;const{data:en}=Be.data,Ge=xh(E,en,n);Ge&&_t({target:Ge,nativeEvent:!1})};return p.on("element:highlight",Ue),p.on("element:unhighlight",Ee),()=>{t.removeEventListener("pointerover",_t),t.removeEventListener("pointermove",_t),t.removeEventListener("pointerout",he),t.removeEventListener("pointerleave",le),p.off("element:highlight",Ue),p.off("element:unhighlight",Ee);for(const Be of E)it(Be),Z(Be)}}function iS(t){var{delay:e,createGroup:n,createRegionGroup:r,background:o=!1,link:s=!1}=t,l=Cj(t,["delay","createGroup","createRegionGroup","background","link"]);return(u,d,h)=>{const{container:p,view:v,options:m}=u,{scale:b,coordinate:_}=v,S=No(p);return Mj(S,Object.assign({elements:Ws,datum:Qo(v),groupKey:n?n(v):void 0,regionGroupKey:r?r(v):Gs(v),coordinate:_,scale:b,state:Nc(m,[["active",o?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:o,link:s,delay:e,emitter:h},l))}}iS.props={reapplyWhenUpdate:!0};function tk(t){return iS(Object.assign(Object.assign({},t),{createGroup:Gs}))}tk.props={reapplyWhenUpdate:!0};function ek(t){return iS(Object.assign(Object.assign({},t),{createGroup:A_}))}ek.props={reapplyWhenUpdate:!0};var Lj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Pj(t,{elements:e,datum:n,groupKey:r=S=>S,regionGroupKey:o=S=>S,link:s=!1,single:l=!1,multipleSelectHotkey:u,coordinate:d,background:h=!1,scale:p,emitter:v,state:m={},region:b=!1,regionEleFilter:_=S=>Oh.includes(S.markType)}){var S;const O=e(t),E=new Set(O),A=I_({elementsof:e,root:t,coordinate:d,scale:p}),M=$r(O,r),L=$r(O,o),I=Fl(O,n),[R,N]=zg(Object.assign({link:s,elements:O,valueof:I,coordinate:d},En(m.selected,"link"))),[Z,W]=L_(Object.assign({document:t.ownerDocument,background:h,coordinate:d,scale:p,valueof:I},En(m.selected,"background"))),it=Je(m,{selected:Object.assign({},((S=m.selected)===null||S===void 0?void 0:S.offset)&&{transform:(...Ge)=>{const cn=m.selected.offset(...Ge),[,wn]=Ge;return Ug(O[wn],cn,d)}})}),tt=M_(it,O),{updateState:pt,removeState:K,hasState:lt}=tt(I);let ft=!l,vt=null;const It=(Ge=!0)=>{for(const cn of O)K(cn,"selected","unselected"),N(cn),W(cn);Ge&&v.emit("element:unselect",{nativeEvent:!0})},_t=({event:Ge,element:cn,nativeEvent:wn=!0,filter:Mn=Zn=>!0,groupBy:Sn=r,groupMap:Fn=M})=>{const Zn=O.filter(Mn);if(lt(cn,"selected"))It();else{const Gn=Sn(cn),rr=Fn.get(Gn),$n=new Set(rr);for(const zn of Zn)$n.has(zn)?pt(zn,"selected"):(pt(zn,"unselected"),N(zn)),zn!==cn&&W(zn);if(R(rr),Z(cn),!wn)return;v.emit("element:select",Object.assign(Object.assign({},Ge),{nativeEvent:wn,data:{data:[n(cn),...rr.map(n)]}}))}},Lt=({event:Ge,element:cn,nativeEvent:wn=!0,filter:Mn=Zn=>!0,groupBy:Sn=r,groupMap:Fn=M})=>{const Zn=Sn(cn),Gn=Fn.get(Zn),rr=new Set(Gn),$n=O.filter(Mn);if(lt(cn,"selected")){if(!O.some(Yn=>!rr.has(Yn)&&lt(Yn,"selected")))return It();for(const Yn of Gn)pt(Yn,"unselected"),N(Yn),W(Yn)}else{const zn=Gn.some(Yn=>lt(Yn,"selected"));for(const Yn of $n)rr.has(Yn)?pt(Yn,"selected"):lt(Yn,"selected")||pt(Yn,"unselected");!zn&&s&&R(Gn),Z(cn)}wn&&v.emit("element:select",Object.assign(Object.assign({},Ge),{nativeEvent:wn,data:{data:O.filter(zn=>lt(zn,"selected")).map(n)}}))},$t=Ge=>{if(E.has(Ge))return!0;for(const cn of E)if(bf(cn,Mn=>Mn===Ge))return!0;return!1},he=Ge=>{if(E.has(Ge))return Ge;for(const cn of E){let wn=null;if(bf(cn,Mn=>{Mn===Ge&&(wn=cn)}),wn)return wn}return Ge},le=Ge=>{const{target:cn,nativeEvent:wn=!0}=Ge,Mn=ft?Lt:_t;let Sn=cn;const Fn=$t(cn);return!b||Fn?Fn?Mn({event:Ge,element:he(Sn),nativeEvent:wn,groupBy:r}):It():(Sn=A(Ge),E.has(Sn)?Mn({event:Ge,element:Sn,nativeEvent:wn,filter:_,groupBy:o,groupMap:L}):It())},Ee=Array.isArray(u)?u:[u],Ue=Ge=>{Ee.includes(Ge.code)&&!vt&&(vt=Ge.code,ft=!0)},Be=Ge=>{Ge.code===vt&&(vt=null,ft=!1)};t.addEventListener("click",le),u&&(ft=!1,document.addEventListener("keydown",Ue),document.addEventListener("keyup",Be));const Qe=Ge=>{const{nativeEvent:cn,data:wn}=Ge;if(cn)return;const Mn=ft?wn.data:wn.data.slice(0,1);for(const Sn of Mn){const Fn=xh(O,Sn,n);le({target:Fn,nativeEvent:!1})}},en=()=>{It(!1)};return v.on("element:select",Qe),v.on("element:unselect",en),()=>{for(const Ge of O)N(Ge);t.removeEventListener("click",le),u&&(document.removeEventListener("keydown",Ue),document.removeEventListener("keyup",Be)),v.off("element:select",Qe),v.off("element:unselect",en)}}function oS(t){var{createGroup:e,createRegionGroup:n,background:r=!1,link:o=!1}=t,s=Lj(t,["createGroup","createRegionGroup","background","link"]);return(l,u,d)=>{const{container:h,view:p,options:v}=l,{coordinate:m,scale:b}=p,_=No(h);return Pj(_,Object.assign({elements:Ws,datum:Qo(p),groupKey:e?e(p):void 0,regionGroupKey:n?n(p):Gs(p),coordinate:m,scale:b,state:Nc(v,[["selected",r?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:r,link:o,emitter:d},s))}}oS.props={reapplyWhenUpdate:!0};function nk(t){return oS(Object.assign(Object.assign({},t),{createGroup:Gs}))}nk.props={reapplyWhenUpdate:!0};function rk(t){return oS(Object.assign(Object.assign({},t),{createGroup:A_}))}rk.props={reapplyWhenUpdate:!0};function Ij(t){const{coordinate:e={}}=t,{transform:n=[]}=e,r=n.find(s=>s.type==="fisheye");if(r)return r;const o={type:"fisheye"};return n.push(o),e.transform=n,t.coordinate=e,o}function kj({wait:t=30,leading:e,trailing:n=!1}){return r=>{const{options:o,update:s,setState:l,container:u}=r,d=No(u),h=qc(p=>{const v=Dc(d,p);if(!v){l("fisheye"),s();return}l("fisheye",m=>{const b=Je({},m,{interaction:{tooltip:{preserve:!0}}});for(const E of b.marks)E.animate=!1;const[_,S]=v,O=Ij(b);return O.focusX=_,O.focusY=S,O.visual=!0,b}),s()},t,{leading:e,trailing:n});return d.addEventListener("pointerenter",h),d.addEventListener("pointermove",h),d.addEventListener("pointerleave",h),()=>{d.removeEventListener("pointerenter",h),d.removeEventListener("pointermove",h),d.removeEventListener("pointerleave",h)}}}var Rj=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},Dj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Nj(t){const{transform:e=[]}=t,n=e.find(o=>o.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return e.push(r),t.transform=e,r}function Fj(t,e,n){const[r]=Array.from(t.entries()).filter(([o])=>o.type===e).map(([o])=>{const{encode:s}=o,l=u=>{const d=s[u];return[u,d?d.value:void 0]};return Object.fromEntries(n.map(l))});return r}function ik(t){var{wait:e=20,leading:n,trailing:r=!1,labelFormatter:o=l=>`${l}`}=t,s=Dj(t,["wait","leading","trailing","labelFormatter"]);return l=>{const{view:u,container:d,update:h,setState:p}=l,{markState:v,scale:m,coordinate:b}=u,_=Fj(v,"line",["x","y","series"]);if(!_)return;const{y:S,x:O,series:E=[]}=_,A=S.map((It,_t)=>_t),M=va(A.map(It=>O[It])),L=No(d),I=d.getElementsByClassName(ct),R=d.getElementsByClassName(St),Z=$r(R,It=>It.__data__.key.split("-")[0]),W=new V.x1({style:Object.assign({x1:0,y1:0,x2:0,y2:L.getAttribute("height"),stroke:"black",lineWidth:1},En(s,"rule"))}),it=new V.xv({style:Object.assign({x:0,y:L.getAttribute("height"),text:"",fontSize:10},En(s,"label"))});W.append(it),L.appendChild(W);const tt=(It,_t,Lt)=>{const[$t]=It.invert(Lt),he=_t.invert($t);return M[Ic(M,he)]},pt=(It,_t)=>{W.setAttribute("x1",It[0]),W.setAttribute("x2",It[0]),it.setAttribute("text",o(_t))};let K;const lt=It=>Rj(this,void 0,void 0,function*(){const{x:_t}=m,Lt=tt(b,_t,It);pt(It,Lt),p("chartIndex",he=>{const le=Je({},he),Ee=le.marks.find(Ge=>Ge.type==="line"),Be=kr(Qp(A,Ge=>kr(Ge,cn=>+S[cn])/ra(Ge,cn=>+S[cn]),Ge=>E[Ge]).values()),Qe=[1/Be,Be];Je(Ee,{scale:{y:{domain:Qe}}});const en=Nj(Ee);en.groupBy="color",en.basis=(Ge,cn)=>{const wn=Ge[os(Mn=>O[+Mn]).center(Ge,Lt)];return cn[wn]};for(const Ge of le.marks)Ge.animate=!1;return le}),K=(yield h("chartIndex")).view}),ft=It=>{const{scale:_t,coordinate:Lt}=K,{x:$t,y:he}=_t,le=tt(Lt,$t,It);pt(It,le);for(const Ee of I){const{seriesIndex:Ue,key:Be}=Ee.__data__,Qe=Ue[os(Fn=>O[+Fn]).center(Ue,le)],en=[0,he.map(1)],Ge=[0,he.map(S[Qe]/S[Ue[0]])],[,cn]=Lt.map(en),[,wn]=Lt.map(Ge),Mn=cn-wn;Ee.setAttribute("transform",`translate(0, ${Mn})`);const Sn=Z.get(Be)||[];for(const Fn of Sn)Fn.setAttribute("dy",Mn)}},vt=qc(It=>{const _t=Dc(L,It);_t&&ft(_t)},e,{leading:n,trailing:r});return lt([0,0]),L.addEventListener("pointerenter",vt),L.addEventListener("pointermove",vt),L.addEventListener("pointerleave",vt),()=>{W.remove(),L.removeEventListener("pointerenter",vt),L.removeEventListener("pointermove",vt),L.removeEventListener("pointerleave",vt)}}}ik.props={reapplyWhenUpdate:!0};var ac=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const ok="legend-category",ak="legend-html",Bj="legend-continuous",jj="items-item",zj="legend-category-item-marker",Uj="legend-category-item-label",Zj="legend-category-item-focus-group";function sk(t){return t.getElementsByClassName(zj)[0]}function ck(t){return t.getElementsByClassName(Uj)[0]}function lk(t){return t.getElementsByClassName(Zj)[0]}function uk(t){return t.getElementsByClassName(jj)}function W4(t){return t.getElementsByClassName(ok)}function Hj(t){return t.getElementsByClassName(ak)}function fk(t){return t.getElementsByClassName(Bj)}function Vj(t,e){[...W4(t),...fk(t)].forEach(r=>{e(r,o=>o)})}function G4(t){let e=t.parentNode;for(;e&&!e.__data__;)e=e.parentNode;return e.__data__}function EX(t){let e=t;for(;e&&!e.attr("class").startsWith("legend");)e=e.children[0];return e.attributes}function Wj(t,{legends:e,marker:n,label:r,datum:o,filter:s,defaultSelect:l,emitter:u,channel:d,state:h={}}){const p=new Map,v=new Map,m=new Map,b=new Map,{unselected:_={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=h,S={unselected:En(_,"marker")},O={unselected:En(_,"label")},{setState:E,removeState:A}=ls(S,void 0),{setState:M,removeState:L}=ls(O,void 0),I=Array.from(e(t));let R=I.map(o);const N=()=>{for(const tt of I){const pt=o(tt),K=n(tt),lt=r(tt);R.includes(pt)?(A(K,"unselected"),L(lt,"unselected")):(E(K,"unselected"),M(lt,"unselected"))}};for(const tt of I){const pt=()=>{ma(t,"pointer")},K=()=>{Zg(t)},lt=vt=>ac(this,void 0,void 0,function*(){const It=o(tt),_t=R.indexOf(It);_t===-1?R.push(It):R.splice(_t,1),yield s(R),N();const{nativeEvent:Lt=!0}=vt;Lt&&(R.length===I.length?u.emit("legend:reset",{nativeEvent:Lt}):u.emit("legend:filter",Object.assign(Object.assign({},vt),{nativeEvent:Lt,data:{channel:d,values:R}})))});tt.addEventListener("click",lt),tt.addEventListener("pointerenter",pt),tt.addEventListener("pointerout",K),p.set(tt,lt),v.set(tt,pt),m.set(tt,K);const ft=lk(tt);if(ft){const vt=It=>ac(this,void 0,void 0,function*(){It.stopPropagation();const _t=o(tt),Lt=R.indexOf(_t),{nativeEvent:$t=!0}=It;if(Lt!==-1&&R.length===1){if(!$t)return;R=I.map(o),yield s(R),N(),u.emit("legend:reset",{nativeEvent:$t})}else{if(R=[_t],yield s(R),N(),!$t)return;u.emit("legend:focus",Object.assign(Object.assign({},It),{nativeEvent:$t,data:{channel:d,value:_t}}))}});ft.addEventListener("click",vt),b.set(tt,vt)}}const Z=tt=>ac(this,void 0,void 0,function*(){const{nativeEvent:pt}=tt;if(pt)return;const{data:K}=tt,{channel:lt,value:ft}=K;lt===d&&(R=[ft],yield s(R),N())}),W=tt=>ac(this,void 0,void 0,function*(){const{nativeEvent:pt}=tt;if(pt)return;const{data:K}=tt,{channel:lt,values:ft}=K;lt===d&&(R=ft,yield s(R),N())}),it=tt=>ac(this,void 0,void 0,function*(){const{nativeEvent:pt}=tt;pt||(R=I.map(o),yield s(R),N())});return u.on("legend:filter",W),u.on("legend:focus",Z),u.on("legend:reset",it),l&&u.emit("legend:filter",{data:{channel:d,values:l}}),()=>{for(const tt of I){tt.removeEventListener("click",p.get(tt)),tt.removeEventListener("pointerenter",v.get(tt)),tt.removeEventListener("pointerout",m.get(tt));const pt=lk(tt);pt&&pt.removeEventListener("click",b.get(tt))}u.off("legend:focus",Z),u.off("legend:filter",W),u.off("legend:reset",it)}}function Gj(t,{domain:e,filter:n,defaultSelect:r,emitter:o,channel:s}){const l=new Map,u=new Map,d=new Map;let h=[...e];const p=()=>{var O;const E=(O=t.ownerDocument)===null||O===void 0?void 0:O.defaultView;return E&&E.getContextService().getDomElement().parentElement||document.body},v=()=>{const E=p().querySelector(".legend-html"),A=M=>ac(this,void 0,void 0,function*(){let L=M.target;for(;L&&!L.hasAttribute("legend-value")&&(L=L.parentElement,L!==E););if(!L||!L.hasAttribute("legend-value"))return;M.preventDefault(),M.stopPropagation();const I=L.getAttribute("legend-value");if(!I)return;const R=h.indexOf(I);R===-1?h.push(I):h.splice(R,1),yield n(h),m(),h.length===e.length?o.emit("legend:reset",{nativeEvent:!0}):o.emit("legend:filter",{nativeEvent:!0,data:{channel:s,values:h}})});E.addEventListener("click",A),l.set(E,A)},m=()=>{p().querySelectorAll("[legend-value]").forEach(A=>{const M=A.getAttribute("legend-value");if(!M||!e.includes(M))return;const L=h.includes(M),I=A;L?(I.style.opacity="1",I.classList.remove("legend-item-inactive")):(I.style.opacity="0.4",I.classList.add("legend-item-inactive"))})};v();const b=O=>ac(this,void 0,void 0,function*(){const{nativeEvent:E}=O;if(E)return;const{data:A}=O,{channel:M,value:L}=A;M===s&&(h=[L],yield n(h),m())}),_=O=>ac(this,void 0,void 0,function*(){const{nativeEvent:E}=O;if(E)return;const{data:A}=O,{channel:M,values:L}=A;M===s&&(h=L,yield n(h),m())}),S=O=>ac(this,void 0,void 0,function*(){const{nativeEvent:E}=O;E||(h=[...e],yield n(h),m())});return o.on("legend:filter",_),o.on("legend:focus",b),o.on("legend:reset",S),r&&o.emit("legend:filter",{data:{channel:s,values:r}}),()=>{p().querySelectorAll("[legend-value]").forEach(A=>{const M=A.getAttribute("legend-value");if(!M||!e.includes(M))return;const L=l.get(A),I=u.get(A),R=d.get(A);L&&A.removeEventListener("click",L),I&&A.removeEventListener("pointerenter",I),R&&A.removeEventListener("pointerout",R)}),l.clear(),u.clear(),d.clear(),o.off("legend:filter",_),o.off("legend:focus",b),o.off("legend:reset",S)}}function $j(t,{legend:e,filter:n,emitter:r,channel:o}){const{attributes:s}=e,l=u=>{const{value:d}=u.detail,h=d.map(p=>{var v,m;const b=(v=s.data)===null||v===void 0?void 0:v.find(_=>_.value===p);return b&&(m=b.domainValue)!==null&&m!==void 0?m:p});n(h),r.emit({nativeEvent:!0,data:{channel:o,values:h}})};return e.addEventListener("valuechange",l),()=>{e.removeEventListener("valuechange",l)}}function dk(t,{legend:e,channel:n,value:r,ordinal:o,channels:s,allChannels:l,facet:u=!1}){return ac(this,void 0,void 0,function*(){const{view:d,update:h,setState:p}=t;p(e,v=>{const{marks:m}=v,b=m.map(_=>{if(_.type==="legends"||OE.includes(_.type))return _;const{transform:S=[],data:O=[]}=_,E=S.findIndex(({type:L})=>L.startsWith("group")||L.startsWith("bin")),A=[...S];O.length&&A.splice(E+1,0,{type:"filter",[n]:{value:r,ordinal:o}});const M=Object.fromEntries(s.map(L=>[L,{domain:d.scale[L].getOptions().domain}]));return Je({},_,Object.assign(Object.assign({transform:A,scale:M},!o&&{animate:!1}),{legend:u?!1:Object.fromEntries(l.map(L=>[L,{preserve:!0}]))}))});return Object.assign(Object.assign({},v),{marks:b})}),yield h()})}function Yj(t,e){for(const n of t)dk(n,Object.assign(Object.assign({},e),{facet:!0}))}function Xj(){return(t,e,n)=>{const{container:r}=t,o=e.filter(v=>v!==t),s=o.length>0,l=v=>G4(v).scales.map(m=>m.name),u=[...W4(r),...Hj(r),...fk(r)],d=u.flatMap(l),h=s?qc(Yj,50,{trailing:!0}):qc(dk,50,{trailing:!0}),p=u.map(v=>{const{name:m,domain:b}=G4(v).scales[0],_=l(v),S={legend:v,channel:m,channels:_,allChannels:d};return v.className===ok?Wj(r,{legends:uk,marker:sk,label:ck,datum:O=>{const{__data__:E}=O,{index:A}=E;return b[A]},filter:O=>{const E=Object.assign(Object.assign({},S),{value:O,ordinal:!0});h(s?o:t,E)},state:v.attributes.state,defaultSelect:v.attributes.defaultSelect,channel:m,emitter:n}):v.className===ak?Gj(r,{domain:b,filter:O=>{const E=Object.assign(Object.assign({},S),{value:O,ordinal:!0});h(s?o:t,E)},defaultSelect:v.attributes.defaultSelect,channel:m,emitter:n}):$j(r,{legend:v,filter:O=>{const E=Object.assign(Object.assign({},S),{value:O,ordinal:!1});h(s?o:t,E)},emitter:n,channel:m})});return()=>{p.forEach(v=>v())}}}function qj(){return(t,e,n)=>{const{container:r,view:o,options:s}=t,l=W4(r),u=Ws(r),d=b=>G4(b).scales[0].name,h=b=>{const{scale:{[b]:_}}=o;return _},p=Nc(s,["active","inactive"]),v=Fl(u,Qo(o)),m=[];for(const b of l){const _=$t=>{const{data:he}=b.attributes,{__data__:le}=$t,{index:Ee}=le;return he[Ee].label},S=d(b),O=uk(b),E=h(S),A=$r(u,$t=>E.invert($t.__data__[S])),{state:M={}}=b.attributes,{inactive:L={}}=M,{setState:I,removeState:R}=ls(p,v),N={inactive:En(L,"marker")},Z={inactive:En(L,"label")},{setState:W,removeState:it}=ls(N),{setState:tt,removeState:pt}=ls(Z),K=$t=>{for(const he of O){const le=sk(he),Ee=ck(he);he===$t||$t===null?(it(le,"inactive"),pt(Ee,"inactive")):(W(le,"inactive"),tt(Ee,"inactive"))}},lt=($t,he)=>{const le=_(he),Ee=new Set(A.get(le));for(const Be of u)Ee.has(Be)?I(Be,"active"):I(Be,"inactive");K(he);const{nativeEvent:Ue=!0}=$t;Ue&&n.emit("legend:highlight",Object.assign(Object.assign({},$t),{nativeEvent:Ue,data:{channel:S,value:le}}))},ft=new Map;for(const $t of O){const he=le=>{lt(le,$t)};$t.addEventListener("pointerover",he),ft.set($t,he)}const vt=$t=>{for(const le of u)R(le,"inactive","active");K(null);const{nativeEvent:he=!0}=$t;he&&n.emit("legend:unhighlight",{nativeEvent:he})},It=$t=>{const{nativeEvent:he,data:le}=$t;if(he)return;const{channel:Ee,value:Ue}=le;if(Ee!==S)return;const Be=O.find(Qe=>_(Qe)===Ue);Be&&lt({nativeEvent:!1},Be)},_t=$t=>{const{nativeEvent:he}=$t;he||vt({nativeEvent:!1})};b.addEventListener("pointerleave",vt),n.on("legend:highlight",It),n.on("legend:unhighlight",_t);const Lt=()=>{b.removeEventListener(vt),n.off("legend:highlight",It),n.off("legend:unhighlight",_t);for(const[$t,he]of ft)$t.removeEventListener(he)};m.push(Lt)}return()=>m.forEach(b=>b())}}var Fa=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Kj(t,e){const[n,r,o,s]=t,[l,u,d,h]=e;return!(l>o||d<n||u>s||h<r)}function Qj(t,e,n,r,o){const[s,l,u,d]=o;return[Math.max(s,Math.min(t,n)),Math.max(l,Math.min(e,r)),Math.min(u,Math.max(t,n)),Math.min(d,Math.max(e,r))]}function Jj(t){const{width:e,height:n}=t.getBBox();return[0,0,e,n]}function ol(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}const hk=hf(t=>{const e=t.attributes,{x:n,y:r,width:o,height:s,class:l,renders:u={},handleSize:d=10,document:h}=e,p=Fa(e,["x","y","width","height","class","renders","handleSize","document"]);if(!h||o===void 0||s===void 0||n===void 0||r===void 0)return;const v=d/2,m=(Ue,Be,Qe)=>{Ue.handle||(Ue.handle=Qe.createElement("rect"),Ue.append(Ue.handle));const{handle:en}=Ue;return en.attr(Be),en},b=En(Iu(p,"handleNW","handleNE"),"handleN"),{render:_=m}=b,S=Fa(b,["render"]),O=En(p,"handleE"),{render:E=m}=O,A=Fa(O,["render"]),M=En(Iu(p,"handleSE","handleSW"),"handleS"),{render:L=m}=M,I=Fa(M,["render"]),R=En(p,"handleW"),{render:N=m}=R,Z=Fa(R,["render"]),W=En(p,"handleNW"),{render:it=m}=W,tt=Fa(W,["render"]),pt=En(p,"handleNE"),{render:K=m}=pt,lt=Fa(pt,["render"]),ft=En(p,"handleSE"),{render:vt=m}=ft,It=Fa(ft,["render"]),_t=En(p,"handleSW"),{render:Lt=m}=_t,$t=Fa(_t,["render"]),he=(Ue,Be)=>{const{id:Qe}=Ue,en=Be(Ue,Ue.attributes,h);en.id=Qe,en.style.draggable=!0},le=Ue=>()=>{const Be=hf(Qe=>he(Qe,Ue));return new Be({})},Ee=Xn(t).attr("className",l).style("transform",`translate(${n}, ${r})`).style("draggable",!0);Ee.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(ol,Object.assign(Object.assign({width:o,height:s},Iu(p,"handle")),{transform:void 0})),Ee.maybeAppend("handle-n",le(_)).style("x",v).style("y",-v).style("width",o-d).style("height",d).style("fill","transparent").call(ol,S),Ee.maybeAppend("handle-e",le(E)).style("x",o-v).style("y",v).style("width",d).style("height",s-d).style("fill","transparent").call(ol,A),Ee.maybeAppend("handle-s",le(L)).style("x",v).style("y",s-v).style("width",o-d).style("height",d).style("fill","transparent").call(ol,I),Ee.maybeAppend("handle-w",le(N)).style("x",-v).style("y",v).style("width",d).style("height",s-d).style("fill","transparent").call(ol,Z),Ee.maybeAppend("handle-nw",le(it)).style("x",-v).style("y",-v).style("width",d).style("height",d).style("fill","transparent").call(ol,tt),Ee.maybeAppend("handle-ne",le(K)).style("x",o-v).style("y",-v).style("width",d).style("height",d).style("fill","transparent").call(ol,lt),Ee.maybeAppend("handle-se",le(vt)).style("x",o-v).style("y",s-v).style("width",d).style("height",d).style("fill","transparent").call(ol,It),Ee.maybeAppend("handle-sw",le(Lt)).style("x",-v).style("y",s-v).style("width",d).style("height",d).style("fill","transparent").call(ol,$t)});function $4(t,e){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:o=()=>{},brushstarted:s=()=>{},brushupdated:l=()=>{},extent:u=Jj(t),brushRegion:d=(en,Ge,cn,wn,Mn)=>[en,Ge,cn,wn],reverse:h=!1,fill:p="#777",fillOpacity:v="0.3",stroke:m="#fff",selectedHandles:b=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=e,_=Fa(e,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let S=null,O=null,E=null,A=null,M=null,L=!1;const[I,R,N,Z]=u;ma(t,"crosshair"),t.style.draggable=!0;const W=(en,Ge,cn)=>{if(s(cn),A&&A.remove(),M&&M.remove(),S=[en,Ge],h)return it();tt()},it=()=>{M=new V.y$({style:Object.assign(Object.assign({},_),{fill:p,fillOpacity:v,stroke:m,pointerEvents:"none"})}),A=new hk({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(M),t.appendChild(A)},tt=()=>{A=new hk({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},_),{fill:p,fillOpacity:v,stroke:m,draggable:!0}),className:"mask"}),t.appendChild(A)},pt=(en=!0)=>{A&&A.remove(),M&&M.remove(),S=null,O=null,E=null,L=!1,A=null,M=null,r(en)},K=(en,Ge,cn=!0)=>{const[wn,Mn,Sn,Fn]=Qj(en[0],en[1],Ge[0],Ge[1],u),[Zn,Gn,rr,$n]=d(wn,Mn,Sn,Fn,u);return h?ft(Zn,Gn,rr,$n):lt(Zn,Gn,rr,$n),n(Zn,Gn,rr,$n,cn),[Zn,Gn,rr,$n]},lt=(en,Ge,cn,wn)=>{A.style.x=en,A.style.y=Ge,A.style.width=cn-en,A.style.height=wn-Ge},ft=(en,Ge,cn,wn)=>{M.style.d=`
      M${I},${R}L${N},${R}L${N},${Z}L${I},${Z}Z
      M${en},${Ge}L${en},${wn}L${cn},${wn}L${cn},${Ge}Z
    `,A.style.x=en,A.style.y=Ge,A.style.width=cn-en,A.style.height=wn-Ge},vt=en=>{const Ge=(Gn,rr,$n,zn,Yn)=>Gn+rr<zn?zn-rr:Gn+$n>Yn?Yn-$n:Gn,cn=en[0]-E[0],wn=en[1]-E[1],Mn=Ge(cn,S[0],O[0],I,N),Sn=Ge(wn,S[1],O[1],R,Z),Fn=[S[0]+Mn,S[1]+Sn],Zn=[O[0]+Mn,O[1]+Sn];K(Fn,Zn)},It={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},_t=en=>$t(en)||Lt(en),Lt=en=>{const{id:Ge}=en;return b.indexOf(Ge)===-1?!1:new Set(Object.keys(It)).has(Ge)},$t=en=>en===A.getElementById("selection"),he=en=>{const{target:Ge}=en,[cn,wn]=Nl(t,en);if(!A||!_t(Ge)){W(cn,wn,en),L=!0;return}_t(Ge)&&(E=[cn,wn])},le=en=>{const{target:Ge}=en,cn=Nl(t,en);if(!S)return;if(!E)return K(S,cn);if($t(Ge))return vt(cn);const[wn,Mn]=[cn[0]-E[0],cn[1]-E[1]],{id:Sn}=Ge;if(It[Sn]){const[Fn,Zn,Gn,rr]=It[Sn].vector;return K([S[0]+wn*Fn,S[1]+Mn*Zn],[O[0]+wn*Gn,O[1]+Mn*rr])}},Ee=en=>{if(E){E=null;const{x:Sn,y:Fn,width:Zn,height:Gn}=A.style;S=[Sn,Fn],O=[Sn+Zn,Fn+Gn],l(Sn,Fn,Sn+Zn,Fn+Gn,en);return}O=Nl(t,en);const[Ge,cn,wn,Mn]=K(S,O);L=!1,o(Ge,cn,wn,Mn,en)},Ue=en=>{const{target:Ge}=en;A&&!_t(Ge)&&pt()},Be=en=>{const{target:Ge}=en;!A||!_t(Ge)||L?ma(t,"crosshair"):$t(Ge)?ma(t,"move"):Lt(Ge)&&ma(t,It[Ge.id].cursor)},Qe=()=>{ma(t,"default")};return t.addEventListener("dragstart",he),t.addEventListener("drag",le),t.addEventListener("dragend",Ee),t.addEventListener("click",Ue),t.addEventListener("pointermove",Be),t.addEventListener("pointerleave",Qe),{mask:A,move(en,Ge,cn,wn,Mn=!0){A||W(en,Ge,{}),S=[en,Ge],O=[cn,wn],K([en,Ge],[cn,wn],Mn)},remove(en=!0){A&&pt(en)},destroy(){A&&pt(!1),ma(t,"default"),t.removeEventListener("dragstart",he),t.removeEventListener("drag",le),t.removeEventListener("dragend",Ee),t.removeEventListener("click",Ue),t.removeEventListener("pointermove",Be),t.removeEventListener("pointerleave",Qe)}}}function Y4(t,e,n){return e.filter(r=>{if(r===t)return!1;const{interaction:o={}}=r.options;return Object.values(o).find(s=>s.brushKey===n)})}function tz(t,e,n){return Y4(t,e,n).map(r=>No(r.container))}function ez(t,e,n){return Y4(t,e,n).map(r=>r.options)}function pk(t,e){var{elements:n,selectedHandles:r,siblings:o=le=>[],datum:s,brushRegion:l,extent:u,reverse:d,scale:h,coordinate:p,series:v=!1,key:m=le=>le,bboxOf:b=le=>{const{x:Ee,y:Ue,width:Be,height:Qe}=le.style;return{x:Ee,y:Ue,width:Be,height:Qe}},state:_={},emitter:S}=e,O=Fa(e,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const E=n(t),A=o(t),M=A.flatMap(n),L=Fl(E,s),I=En(O,"mask"),{setState:R,removeState:N}=ls(_,L),Z=new Map,{width:W,height:it,x:tt=0,y:pt=0}=b(t),K=u||[0,0,W,it],lt=()=>{for(const le of[...E,...M])N(le,"active","inactive")},ft=(le,Ee,Ue,Be)=>{var Qe;for(const Ge of A)(Qe=Ge.brush)===null||Qe===void 0||Qe.remove();const en=new Set;for(const Ge of E){const{min:cn,max:wn}=Ge.getLocalBounds(),[Mn,Sn]=cn,[Fn,Zn]=wn;Kj([Mn,Sn,Fn,Zn],[le,Ee,Ue,Be])?(R(Ge,"active"),en.add(m(Ge))):R(Ge,"inactive")}for(const Ge of M)en.has(m(Ge))?R(Ge,"active"):R(Ge,"inactive")},vt=()=>{for(const le of E)N(le,"inactive");for(const le of Z.values())le.remove();Z.clear()},It=(le,Ee,Ue,Be)=>{const Qe=Ge=>{const cn=Ge.cloneNode();return cn.__data__=Ge.__data__,Ge.parentNode.appendChild(cn),Z.set(Ge,cn),cn},en=new V.UL({style:{x:le+tt,y:Ee+pt,width:Ue-le,height:Be-Ee}});t.appendChild(en);for(const Ge of E){const cn=Z.get(Ge)||Qe(Ge);cn.style.clipPath=en,R(Ge,"inactive"),R(cn,"active")}},_t=$4(t,Object.assign(Object.assign({},I),{extent:K,brushRegion:l,reverse:d,selectedHandles:r,brushended:le=>{const Ee=v?vt:lt;le&&S.emit("brush:remove",{nativeEvent:!0}),Ee()},brushed:(le,Ee,Ue,Be,Qe)=>{const en=yf(le,Ee,Ue,Be,h,p);Qe&&S.emit("brush:highlight",{nativeEvent:!0,data:{selection:en}}),(v?It:ft)(le,Ee,Ue,Be)},brushcreated:(le,Ee,Ue,Be,Qe)=>{const en=yf(le,Ee,Ue,Be,h,p);S.emit("brush:end",Object.assign(Object.assign({},Qe),{nativeEvent:!0,data:{selection:en}}))},brushupdated:(le,Ee,Ue,Be,Qe)=>{const en=yf(le,Ee,Ue,Be,h,p);S.emit("brush:end",Object.assign(Object.assign({},Qe),{nativeEvent:!0,data:{selection:en}}))},brushstarted:le=>{S.emit("brush:start",le)}})),Lt=({nativeEvent:le,data:Ee})=>{if(le)return;const{selection:Ue}=Ee,[Be,Qe,en,Ge]=v5(Ue,h,p);_t.move(Be,Qe,en,Ge,!1)};S.on("brush:highlight",Lt);const $t=({nativeEvent:le}={})=>{le||_t.remove(!1)};S.on("brush:remove",$t);const he=_t.destroy.bind(_t);return _t.destroy=()=>{S.off("brush:highlight",Lt),S.off("brush:remove",$t),he()},_t}function aS(t){var{facet:e,brushKey:n}=t,r=Fa(t,["facet","brushKey"]);return(o,s,l)=>{const{container:u,view:d,options:h}=o,p=No(u),v={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},m=["active",["inactive",{opacity:.5}]],{scale:b,coordinate:_}=d;if(e){const O=p.getBounds(),E=O.min[0],A=O.min[1],M=O.max[0],L=O.max[1];return pk(p.parentNode.parentNode,Object.assign(Object.assign({elements:()=>w_(o,s),datum:Qo(Dl(o,s).map(I=>I.view)),brushRegion:(I,R,N,Z)=>[I,R,N,Z],extent:[E,A,M,L],state:Nc(Dl(o,s).map(I=>I.options),m),emitter:l,scale:b,coordinate:_,selectedHandles:void 0},v),r))}const S=pk(p,Object.assign(Object.assign({elements:Ws,key:O=>O.__data__.key,siblings:()=>tz(o,s,n),datum:Qo([d,...Y4(o,s,n).map(O=>O.view)]),brushRegion:(O,E,A,M)=>[O,E,A,M],extent:void 0,state:Nc([h,...ez(o,s,n)],m),emitter:l,scale:b,coordinate:_,selectedHandles:void 0},v),r));return p.brush=S,()=>S.destroy()}}aS.props={reapplyWhenUpdate:!0};function X4(t,e,n,r,o){const[,s,,l]=o;return[t,s,n,l]}function nz(t){return aS(Object.assign(Object.assign({},t),{brushRegion:X4,selectedHandles:["handle-e","handle-w"]}))}function q4(t,e,n,r,o){const[s,,l]=o;return[s,e,l,r]}function rz(t){return aS(Object.assign(Object.assign({},t),{brushRegion:q4,selectedHandles:["handle-n","handle-s"]}))}var K4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const iz="axis",oz="axis-line",az="axis-main-group",gk="axis-hot-area";function sz(t){return t.getElementsByClassName(iz)}function vk(t){return t.getElementsByClassName(oz)[0]}function cz(t){return t.getElementsByClassName(az)[0]}function mk(t){return cz(t).getLocalBounds()}function lz(t,e){var{cross:n,offsetX:r,offsetY:o}=e,s=K4(e,["cross","offsetX","offsetY"]);const l=mk(t),u=vk(t),[d]=u.getLocalBounds().min,[h,p]=l.min,[v,m]=l.max,b=(v-h)*2;return{brushRegion:q4,hotZone:new V.UL({className:gk,style:Object.assign({width:n?b/2:b,transform:`translate(${(n?h:d-b/2).toFixed(2)}, ${p})`,height:m-p},s)}),extent:n?(_,S,O,E)=>[-1/0,S,1/0,E]:(_,S,O,E)=>[Math.floor(h-r),S,Math.ceil(v-r),E]}}function uz(t,e){var{offsetY:n,offsetX:r,cross:o=!1}=e,s=K4(e,["offsetY","offsetX","cross"]);const l=mk(t),u=vk(t),[,d]=u.getLocalBounds().min,[h,p]=l.min,[v,m]=l.max,b=m-p;return{brushRegion:X4,hotZone:new V.UL({className:gk,style:Object.assign({width:v-h,height:o?b:b*2,transform:`translate(${h}, ${o?p:d-b})`},s)}),extent:o?(_,S,O,E)=>[_,-1/0,O,1/0]:(_,S,O,E)=>[_,Math.floor(p-n),O,Math.ceil(m-n)]}}function fz(t,e){var{axes:n,elements:r,points:o,horizontal:s,datum:l,offsetY:u,offsetX:d,reverse:h=!1,state:p={},emitter:v,coordinate:m}=e,b=K4(e,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const _=r(t),S=n(t),O=Fl(_,l),{setState:E,removeState:A}=ls(p,O),M=new Map,L=En(b,"mask"),I=Lt=>Array.from(M.values()).every(([$t,he,le,Ee])=>Lt.some(([Ue,Be])=>Ue>=$t&&Ue<=le&&Be>=he&&Be<=Ee)),R=S.map(Lt=>Lt.attributes.scale),N=Lt=>Lt.length>2?[Lt[0],Lt[Lt.length-1]]:Lt,Z=new Map,W=()=>{Z.clear();for(let Lt=0;Lt<S.length;Lt++){const $t=R[Lt],{domain:he}=$t.getOptions();Z.set(Lt,N(he))}};W();const it=(Lt,$t)=>{const he=[];for(const Ee of _){const Ue=o(Ee);I(Ue)?(E(Ee,"active"),he.push(Ee)):E(Ee,"inactive")}if(Z.set(Lt,pt(he,Lt)),!$t)return;const le=()=>{if(!K)return Array.from(Z.values());const Ee=[];for(const[Ue,Be]of Z){const Qe=R[Ue],{name:en}=Qe.getOptions();en==="x"?Ee[0]=Be:Ee[1]=Be}return Ee};v.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:le()}})},tt=Lt=>{for(const $t of _)A($t,"active","inactive");W(),Lt&&v.emit("brushAxis:remove",{nativeEvent:!0})},pt=(Lt,$t)=>{const he=R[$t],{name:le}=he.getOptions(),Ee=Lt.map(Ue=>{const Be=Ue.__data__;return he.invert(Be[le])});return N(cs(he,Ee))},K=S.some(s)&&S.some(Lt=>!s(Lt)),lt=[];for(let Lt=0;Lt<S.length;Lt++){const $t=S[Lt],he=s($t)?uz:lz,{hotZone:le,brushRegion:Ee,extent:Ue}=he($t,{offsetY:u,offsetX:d,cross:K,zIndex:999,fill:"transparent"});$t.parentNode.appendChild(le);const Be=$4(le,Object.assign(Object.assign({},L),{reverse:h,brushRegion:Ee,brushended(Qe){M.delete($t),Array.from(M.entries()).length===0?tt(Qe):it(Lt,Qe)},brushed(Qe,en,Ge,cn,wn){M.set($t,Ue(Qe,en,Ge,cn)),it(Lt,wn)}}));lt.push(Be)}const ft=(Lt={})=>{const{nativeEvent:$t}=Lt;$t||lt.forEach(he=>he.remove(!1))},vt=(Lt,$t,he)=>{const[le,Ee]=Lt,Ue=en=>en.getStep?en.getStep():0,Be=It(le,$t,he),Qe=It(Ee,$t,he)+Ue($t);return s(he)?[Be,-1/0,Qe,1/0]:[-1/0,Be,1/0,Qe]},It=(Lt,$t,he)=>{const{height:le,width:Ee}=m.getOptions(),Ue=$t.clone();return s(he)?Ue.update({range:[0,Ee]}):Ue.update({range:[le,0]}),Ue.map(Lt)},_t=Lt=>{const{nativeEvent:$t}=Lt;if($t)return;const{selection:he}=Lt.data;for(let le=0;le<lt.length;le++){const Ee=he[le],Ue=lt[le],Be=S[le];if(Ee){const Qe=R[le];Ue.move(...vt(Ee,Qe,Be),!1)}else Ue.remove(!1)}};return v.on("brushAxis:remove",ft),v.on("brushAxis:highlight",_t),()=>{lt.forEach(Lt=>Lt.destroy()),v.off("brushAxis:remove",ft),v.off("brushAxis:highlight",_t)}}function dz(t){return(e,n,r)=>{const{container:o,view:s,options:l}=e,u=No(o),{x:d,y:h}=u.getBBox(),{coordinate:p}=s;return fz(o,Object.assign({elements:Ws,axes:sz,offsetY:h,offsetX:d,points:v=>v.__data__.points,horizontal:v=>{const{startPos:[m,b],endPos:[_,S]}=v.attributes;return m!==_&&b===S},datum:Qo(s),state:Nc(l,["active",["inactive",{opacity:.5}]]),coordinate:p,emitter:r},t))}}var hz=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},yk=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function pz(t=300){let e=null;return n=>{const{timeStamp:r}=n;return e!==null&&r-e<t?(e=r,!0):(e=r,!1)}}function gz(t,e){var{filter:n,reset:r,brushRegion:o,extent:s,reverse:l,emitter:u,scale:d,coordinate:h,selection:p,series:v=!1}=e,m=yk(e,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const b=En(m,"mask"),{width:_,height:S}=t.getBBox(),O=s||[0,0,_,S],E=pz(),A=$4(t,Object.assign(Object.assign({},b),{extent:O,brushRegion:o,reverse:l,brushcreated:M}));t.addEventListener("click",L);function M(R,N,Z,W,it){R===Z&&N===W||(it.nativeEvent=!0,n(p(R,N,Z,W),it),A.remove())}function L(R){E(R)&&(R.nativeEvent=!0,r(R))}const I=({nativeEvent:R,data:N})=>{if(R)return;const{selection:Z}=N;n(Z,{nativeEvent:!1})};return u.on("brush:filter",I),()=>{A.destroy(),u.off("brush:filter",I),t.removeEventListener("click",L)}}function Q4(t){var{hideX:e=!0,hideY:n=!0}=t,r=yk(t,["hideX","hideY"]);return(o,s,l)=>{const{container:u,view:d,options:h,update:p,setState:v}=o,m=No(u),b={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let _=!1,S=!1,O=d;const{scale:E,coordinate:A}=d;return gz(m,Object.assign(Object.assign({brushRegion:(M,L,I,R)=>[M,L,I,R],selection:(M,L,I,R)=>{const{scale:N,coordinate:Z}=O;return yf(M,L,I,R,N,Z)},filter:(M,L)=>hz(this,void 0,void 0,function*(){if(S)return;S=!0;const[I,R]=M;v("brushFilter",Z=>{const{marks:W}=Z,it=W.map(tt=>Je({axis:Object.assign(Object.assign({},e&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},tt,{scale:{x:{domain:I,nice:!1},y:{domain:R,nice:!1}}}));return Object.assign(Object.assign({},h),{marks:it,clip:!0})}),l.emit("brush:filter",Object.assign(Object.assign({},L),{data:{selection:[I,R]}})),O=(yield p()).view,S=!1,_=!0}),reset:M=>{if(S||!_)return;const{scale:L}=d,{x:I,y:R}=L,N=I.getOptions().domain,Z=R.getOptions().domain;l.emit("brush:filter",Object.assign(Object.assign({},M),{data:{selection:[N,Z]}})),_=!1,O=d,v("brushFilter"),p()},extent:void 0,emitter:l,scale:E,coordinate:A},b),r))}}function vz(t){return Q4(Object.assign(Object.assign({hideX:!0},t),{brushRegion:X4}))}function mz(t){return Q4(Object.assign(Object.assign({hideY:!0},t),{brushRegion:q4}))}function bk(t,e,n){const r=t?n:e,o=t?e:n,s=La(r),l=La(o),u=o.getOptions().domain,d=!l&&u&&u.length>=2&&u[0]===0;return{currentScale:r,targetScale:o,isSourceDiscrete:s,isTargetDiscrete:l,shouldPreserveZeroBaseline:d}}function yz(t,e,n,r,o){const s=t?r:n,l=b=>{const _={};return Object.keys(o).forEach(S=>{(S===b||S.match(new RegExp(`^${b}\\d+$`)))&&(_[S]=o[S])}),_},u=l(t?"x":"y"),d=Object.keys(u),h=d.map(b=>e[b]),p=La(s),v=h.map(b=>La(b)),m=h.map((b,_)=>{const S=b.getOptions().domain;return!v[_]&&S&&S.length>=2&&S[0]===0});return{currentScale:s,targetScales:h,isSourceDiscrete:p,isTargetDiscrete:v,shouldPreserveZeroBaseline:m,targetScaleKeys:d}}function bz(t){return Array.from(new Set(t)).sort((n,r)=>n-r)}function _z({isTargetDiscrete:t,filteredValues:e,shouldPreserveZeroBaseline:n}){if(t)return bz(e);{const r=Math.min(...e),o=Math.max(...e);return n?[0,o]:[r,o]}}function Tm(t){return t instanceof Date?t.getTime():typeof t=="string"?parseFloat(t):Number(t)}function J4(t,e,n,r,o,s="filter",l=!1){if(Hg(s))return[];const u=l?"y":"x",d=l?"x":"y",h=[];for(const p of t){const{channelData:v}=p,m=v[u]||[],b=v[d]||[],_=Array.isArray(m[0])?m[0]:m,S=Array.isArray(b[0]);if(_.length===0)continue;const O=_.length;for(let E=0;E<O;E++){const A=_[E];let M=!1;if(n)M=e.includes(A);else if(e.length>=2){const L=Tm(A),I=Tm(e[0]),R=Tm(e[e.length-1]);!isNaN(L)&&!isNaN(I)&&!isNaN(R)&&(M=L>=I&&L<=R)}if(s==="filter"&&M){if(S){const L=b.length;for(let I=0;I<L;I++){const R=b[I];if(Array.isArray(R)&&E<R.length){const N=R[E],Z=Tm(N);isNaN(Z)||h.push(Z)}}}else if(E<b.length){const L=b[E],I=Tm(L);isNaN(I)||h.push(I)}}}}return h.length>0?_z({isTargetDiscrete:r,filteredValues:h,shouldPreserveZeroBaseline:o}):[]}function xz({markDataPairs:t,domain:e,scaleInfo:n,adaptiveMode:r,shouldFilterXAxis:o=!1}){const{isSourceDiscrete:s,isTargetDiscrete:l,shouldPreserveZeroBaseline:u}=n;return J4(t,e,s,l,u,r,o)}function Sz({markDataPairs:t,domain:e,scaleInfo:n,markToScaleMap:r,adaptiveMode:o,shouldFilterXAxis:s=!1}){const l=new Map,{isSourceDiscrete:u,isTargetDiscrete:d,shouldPreserveZeroBaseline:h,targetScaleKeys:p}=n;return t.forEach(v=>{const m=r.get(v.markKey);if(!m)return;const b=p.indexOf(m);if(b===-1)return;const _=d[b],S=h[b],O=J4([v],e,u,_,S,o,s);l.set(m,O)}),l}function Oz(t,e,n,r,o,s,l=!1,u){const d=new Map;if(t.length===0||e.length===0)return d;const{isSourceDiscrete:h,isTargetDiscrete:p,shouldPreserveZeroBaseline:v}=n,m=u?t.filter(_=>u.get(_.markKey)===o):t.filter(_=>_.markKey===r);if(m.length===0)return d;const b=J4(m,e,h,p,v,s,l);return d.set(o,b),d}function _k(t,e,n,r){r&&e instanceof Map?e.forEach((o,s)=>{o&&Array.isArray(o)&&o.length>0&&(t[s]=o)}):!r&&Array.isArray(e)&&e.length>0&&(t[n?"x":"y"]=e)}var Ez=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const xk="slider";function Sk(t){var e,n,r,o;if(!(t!=null&&t.markState))return 0;let s=0;for(const[l,u]of t.markState.entries()){if(l.type!=="point"||!(u!=null&&u.channels))continue;const d=(e=u.channels)===null||e===void 0?void 0:e.find(h=>h.name==="size");if(d){if(((r=(n=d.scale)===null||n===void 0?void 0:n.range)===null||r===void 0?void 0:r.length)>0){const h=Math.max(...d.scale.range.filter(p=>typeof p=="number"));s=Math.max(s,h);continue}if(((o=d.values)===null||o===void 0?void 0:o.length)>0){const h=d.values.filter(p=>p.value!==void 0).flatMap(p=>Array.isArray(p.value)?p.value:[p.value]).filter(p=>typeof p=="number"&&!isNaN(p));h.length>0&&(s=Math.max(s,...h))}}}return s}function Ok(t,e,n,r,o,s,l){if(l){const u=s?r:o.x,d=s?o.y:r;t.emit(e,Object.assign(Object.assign({},n),{nativeEvent:l,data:{selection:[sS(u),sS(d)]}}))}}function Ek(t,e,n,r){const{domain0:o,filteredDomain:s,channel0:l,channel1:u,prefix:d,hasState:h,isMultiAxis:p,markToScaleMap:v,enableAdaptiveFiltering:m}=r;p&&s instanceof Map?t(e,b=>Object.assign({},Az(b,n,{[l]:{domain:o,nice:!1}},d,h,l,u,v||new Map,s))):t(e,b=>Object.assign({},wz(b,n,Object.assign({[l]:{domain:o,nice:!1}},m&&Array.isArray(s)?{[u]:{domain:s,nice:!0}}:{}),d,h,l,u)))}function wz(t,e,n,r,o=!1,s="x",l="y"){const{marks:u}=t,d=Sk(e),h=u.map(p=>{var v,m;return Je({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},p,{scale:n,[r]:Object.assign(Object.assign({},((v=p[r])===null||v===void 0?void 0:v[s])&&{[s]:Object.assign({preserve:!0},o&&{ratio:null})}),((m=p[r])===null||m===void 0?void 0:m[l])&&{[l]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:h,insetLeft:d,insetRight:d,insetTop:d,insetBottom:d,clip:!0,animate:!1})}function Az(t,e,n,r,o=!1,s="x",l="y",u=new Map,d=new Map){const{marks:h}=t,p=Sk(e),v=h.map(m=>{var b,_;const S=typeof(m==null?void 0:m.key)=="string"?m.key:String((m==null?void 0:m.key)||""),O=u.get(S),E=d.get(O),A=E&&{y:Object.assign({domain:E,nice:!0},O!=="y"?{independent:!0}:void 0)};return Je({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},m,{scale:Object.assign(Object.assign({},n),A),[r]:Object.assign(Object.assign({},((b=m[r])===null||b===void 0?void 0:b[s])&&{[s]:Object.assign({preserve:!0},o&&{ratio:null})}),((_=m[r])===null||_===void 0?void 0:_[l])&&{[l]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:v,insetLeft:p,insetRight:p,insetTop:p,insetBottom:p,clip:!0,animate:!1})}function Tz(t,e,n){const[r,o]=t,s=n?d=>1-d:d=>d,l=ss(e,s(r),!0),u=ss(e,s(o),!1);return cs(e,[l,u])}function sS(t){return[t[0],t[t.length-1]]}function wk({initDomain:t={},className:e=xk,prefix:n="slider",setValue:r=(p,v)=>p.setValues(v),hasState:o=!1,wait:s=50,leading:l=!0,trailing:u=!1,adaptiveMode:d="filter",getInitValues:h=p=>{var v;const m=(v=p==null?void 0:p.attributes)===null||v===void 0?void 0:v.values;if(m[0]!==0||m[1]!==1)return m}}){return(p,v,m)=>{const{container:b,view:_,update:S,setState:O}=p,E=b.getElementsByClassName(e);if(!E.length)return()=>{};let A=!1;const{scale:M,coordinate:L}=_,{x:I,y:R}=M,N=Yr(L),Z=_t=>{const Lt=_t==="vertical"?"y":"x",$t=_t==="vertical"?"x":"y";return N?[$t,Lt]:[Lt,$t]},W=new Map,it=new Set,tt=N_(_),pt=A5(_,t,I,R,tt),K=Array.from(E),lt=_t=>K.some(Lt=>{const{orientation:$t}=Lt.attributes,[he]=Z($t);return he===_t}),ft=lt("x")&&!lt("y"),vt=lt("y")&&!lt("x"),It=!Hg(d)&&(ft||vt);for(const _t of E){const{orientation:Lt}=_t.attributes,[$t,he]=Z(Lt),le=`${n}${Ts($t)}:filter`,Ee=$t==="x",{ratio:Ue}=I.getOptions(),{ratio:Be}=R.getOptions(),Qe=Sn=>{if(Sn.data){const{selection:$n}=Sn.data,[zn=sS(pt.x),Yn=sS(pt.y)]=$n;return Ee?[cs(I,zn,Ue),cs(R,Yn,Be)]:[cs(R,Yn,Be),cs(I,zn,Ue)]}const{value:Fn}=Sn.detail,Zn=M[$t],Gn=Tz(Fn,Zn,N&&Lt==="horizontal"),rr=pt[he];return[Gn,rr]};let en=!1;const cn=Pz({getFiltering:()=>en,setFiltering:Sn=>{en=Sn,Sn||(A=!1)},domainsOf:Qe,view:_,independentScaleInfo:tt,enableAdaptiveFiltering:It,hasOnlyXSlider:ft,hasOnlyYSlider:vt,adaptiveMode:d,scaleX:I,scaleY:R,scale:M,channelDomain:pt,channel0:$t,channel1:he,isX:Ee,emitter:m,eventName:le,setState:O,slider:_t,prefix:n,hasState:o,update:S,wait:s,leading:l,trailing:u}),wn=Sn=>{const{nativeEvent:Fn}=Sn;if(Fn)return;const{data:Zn}=Sn,{selection:Gn}=Zn,[rr,$n]=Gn;_t.dispatchEvent(new V.Aw("valuechange",{data:Zn,nativeEvent:!1}));const zn=Ee?kg(rr,I):kg($n,R);r(_t,zn)};m.on(le,wn),_t.addEventListener("valuechange",cn),W.set(_t,cn),it.add([le,wn]);const Mn=h(_t);Mn&&_t.dispatchEvent(new V.Aw("valuechange",{detail:{value:Mn},nativeEvent:!1,initValue:!0}))}return()=>{for(const[_t,Lt]of W)_t.removeEventListener("valuechange",Lt);for(const[_t,Lt]of it)m.off(_t,Lt)}}}function Cz({view:t,domain0:e,shouldFilterXAxis:n,enableAdaptiveFiltering:r,markDataPairs:o,adaptiveMode:s,scaleX:l,scaleY:u,scale:d,channelDomain:h,independentScaleInfo:p,channel0:v}){const m=new Map,b=new Map;if(!r||o.length===0||!(e!=null&&e.length))return{filteredDomain:m,markToScaleMap:b};const _=Qn(t,"options.slider");if(Object.keys(_).length>0&&Object.prototype.hasOwnProperty.call(_,v)){const O=yz(n,d,l,u,h);(n?p.markToXScaleMap:p.markToYScaleMap).forEach((M,L)=>{b.set(L,M)});const A=Sz({markDataPairs:o,domain:e,scaleInfo:O,markToScaleMap:b,adaptiveMode:s,isViewSlider:!0,shouldFilterXAxis:n});return _k(h,A,n,!0),{filteredDomain:A,markToScaleMap:b}}else{const O=Mz(t,v);if(O){const E=bk(n,l,u),A=n?p.markToXScaleMap:p.markToYScaleMap,M=A.get(O)||"";if(M)return b.set(O,M),{filteredDomain:Oz(o,e,E,O,M,s,n,A),markToScaleMap:b}}}return{filteredDomain:m,markToScaleMap:b}}function Mz(t,e){for(const[n]of t.markState.entries()){const r=Qn(n,"slider");if(Object.keys(r||{}).length>0&&Object.prototype.hasOwnProperty.call(r,e))return String(n.key||"")}return null}function Lz({domain0:t,domain1:e,shouldFilterXAxis:n,enableAdaptiveFiltering:r,markDataPairs:o,adaptiveMode:s,scaleX:l,scaleY:u,channelDomain:d,hasOnlyXSlider:h,hasOnlyYSlider:p,isX:v}){let m=e;if(r&&o.length>0&&(h&&v||p&&!v)&&(t==null?void 0:t.length)>0){const b=bk(n,l,u);m=xz({markDataPairs:o,domain:t,scaleInfo:b,adaptiveMode:s,shouldFilterXAxis:n}),_k(d,m,n,!1)}return m}function Pz({getFiltering:t,setFiltering:e,domainsOf:n,view:r,independentScaleInfo:o,enableAdaptiveFiltering:s,hasOnlyXSlider:l,hasOnlyYSlider:u,adaptiveMode:d,scaleX:h,scaleY:p,scale:v,channelDomain:m,channel0:b,channel1:_,isX:S,emitter:O,eventName:E,setState:A,slider:M,prefix:L,hasState:I,update:R,wait:N,leading:Z,trailing:W}){return qc(it=>Ez(this,void 0,void 0,function*(){const{initValue:tt=!1}=it;if(t()&&!tt)return;e(!0);const{nativeEvent:pt=!0}=it,{markDataPairs:K}=R_(r);if(o[`hasIndependent${_.toUpperCase()}`]){const[ft]=n(it),vt=u&&!S,{filteredDomain:It,markToScaleMap:_t}=Cz({view:r,domain0:ft,shouldFilterXAxis:vt,enableAdaptiveFiltering:s&&(l&&S||u&&!S),markDataPairs:K,adaptiveMode:d,scaleX:h,scaleY:p,scale:v,channelDomain:m,independentScaleInfo:o,channel0:b});m[b]=ft,Ok(O,E,it,ft,m,S,pt),Ek(A,M,r,{domain0:ft,filteredDomain:It,channel0:b,channel1:_,prefix:L,hasState:I,isMultiAxis:!0,markToScaleMap:_t,enableAdaptiveFiltering:s})}else{const[ft,vt]=n(it),_t=Lz({domain0:ft,domain1:vt,shouldFilterXAxis:u&&!S,enableAdaptiveFiltering:s,markDataPairs:K,adaptiveMode:d,scaleX:h,scaleY:p,channelDomain:m,hasOnlyXSlider:l,hasOnlyYSlider:u,isX:S});m[b]=ft,Ok(O,E,it,ft,m,S,pt),Ek(A,M,r,{domain0:ft,filteredDomain:_t,channel0:b,channel1:_,prefix:L,hasState:I,isMultiAxis:!1,markToScaleMap:void 0,enableAdaptiveFiltering:s})}yield R(),e(!1)}),N,{leading:Z,trailing:W})}function Iz(t){var e;try{const n=(e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView;if(!n||typeof n.getContextService!="function")return null;const r=n.getContextService().getDomElement();return r instanceof HTMLElement?r:null}catch(n){return null}}function Ak({className:t=xk,setValue:e=(l,u)=>l.setValues(u),minRange:n=.01,wheelSensitivity:r=.05,x:o=!0,y:s=!0}={}){return l=>{const{container:u,view:d}=l,{coordinate:h}=d,p=Yr(h),v=Iz(u),m=Math.max(1e-6,Math.min(1,n)),b=u.getElementsByClassName(t);if(!b.length)return()=>{};const _=(A,M)=>A===!0?!0:A===!1?!1:A==="shift"?M.shiftKey&&!M.ctrlKey&&!M.altKey:A==="ctrl"?M.ctrlKey&&!M.shiftKey&&!M.altKey:A==="alt"?M.altKey&&!M.shiftKey&&!M.ctrlKey:!1,S=(A,M)=>{e(A,M),A.dispatchEvent(new V.Aw("valuechange",{detail:{value:M},nativeEvent:!0}))},O=(A,M,L,I,R)=>{const Z=(A-M)/L,W=Math.max(0,Math.min(1,Z));return Math.max(I,Math.min(R,W))},E=A=>{if(!v)return;const M=A.target;if(!v.contains(M))return;const L=v.getBoundingClientRect(),I=A.clientX-L.left,R=A.clientY-L.top,N=[];for(const Z of b){const{values:W,orientation:it}=Z.attributes;if(!W)continue;const tt=it==="horizontal";_((p?tt?"y":"x":tt?"x":"y")==="x"?o:s,A)&&N.push(Z)}if(N.length!==0){A.preventDefault(),A.stopPropagation();for(const Z of N){const{values:W,orientation:it,x:tt,y:pt,trackLength:K}=Z.attributes,[lt,ft]=W,vt=ft-lt,_t=it==="horizontal"?O(I,tt,K,lt,ft):O(R,pt,K,lt,ft),Lt=r*k_(vt),he=1+A.deltaY*Lt,le=Math.max(m,Math.min(1,vt*he)),Ee=(_t-lt)/vt,Ue=(ft-_t)/vt;let Be=_t-le*Ee,Qe=_t+le*Ue;Be<0?(Be=0,Qe=Math.min(1,le)):Qe>1&&(Qe=1,Be=Math.max(0,1-le)),S(Z,[Be,Qe])}}};return v&&v.addEventListener("wheel",E,{passive:!1,capture:!0}),()=>{v&&v.removeEventListener("wheel",E,{capture:!0})}}}Ak.props={reapplyWhenUpdate:!0};const Tk="g2-scrollbar";function kz(t={}){return(e,n,r)=>{const{view:o,container:s}=e;if(!s.getElementsByClassName(Tk).length)return()=>{};const{scale:u}=o,{x:d,y:h}=u,p={x:[...d.getOptions().domain],y:[...h.getOptions().domain]};return d.update({domain:d.getOptions().expectedDomain}),h.update({domain:h.getOptions().expectedDomain}),wk(Object.assign({initDomain:p,className:Tk,prefix:"scrollbar",hasState:!0,setValue:(m,b)=>m.setValue(b[0]),getInitValues:m=>{const b=m.slider.attributes.values;if(b[0]!==0||b[1]!==1)return b}},t))(e,n,r)}}var Rz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Dz(t,e,n){return`<${t} style="${Object.entries(n).map(([r,o])=>`${_6(r)}:${o}`).join(";")}">${e}</${t}>`}const Nz={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function Ck(t){return t.nodeName!=="text"?!1:!!t.isOverflowing()}function Mk(t){var{offsetX:e=8,offsetY:n=8}=t,r=Rz(t,["offsetX","offsetY"]);return o=>{const{container:s}=o,[l,u]=s.getBounds().min,d=En(r,"tip"),h=new Set,p=m=>{const{target:b}=m;if(!Ck(b)){m.stopPropagation();return}const{offsetX:_,offsetY:S}=m,O=_+e-l,E=S+n-u;if(b.tip){b.tip.style.x=O,b.tip.style.y=E;return}const{text:A}=b.style,M=new V.k9({className:"poptip",style:{innerHTML:Dz("div",A,Object.assign(Object.assign({},Nz),d)),x:O,y:E}});s.appendChild(M),b.tip=M,h.add(M)},v=m=>{const{target:b}=m;if(!Ck(b)){m.stopPropagation();return}b.tip&&(b.tip.remove(),b.tip=null,h.delete(b.tip))};return s.addEventListener("pointerover",p),s.addEventListener("pointerout",v),()=>{s.removeEventListener("pointerover",p),s.removeEventListener("pointerout",v),h.forEach(m=>m.remove())}}}Mk.props={reapplyWhenUpdate:!0};function Fz(t,e){var n=su(e),r=n.length;if((0,bn.Z)(t))return!r;for(var o=0;o<r;o+=1){var s=n[o];if(e[s]!==t[s]||!(s in t))return!1}return!0}var Bz=Fz;function jz(t,e){if(!(0,Sr.Z)(t))return null;var n;if((0,mo.Z)(e)&&(n=e),Aa(e)&&(n=function(o){return Bz(o,e)}),n){for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r]}return null}var vp=jz;function cS(t){return t==null?null:Lk(t)}function Lk(t){if(typeof t!="function")throw new Error;return t}var zz={depth:-1},Pk={},tL={};function Uz(t){return t.id}function Zz(t){return t.parentId}function eL(){var t=Uz,e=Zz,n;function r(o){var s=Array.from(o),l=t,u=e,d,h,p,v,m,b,_,S,O=new Map;if(n!=null){var E=s.map(function(Z,W){return Hz(n(Z,W,o))}),A=E.map(Ik),M=new Set(E).add(""),L=e3(A),I;try{for(L.s();!(I=L.n()).done;){var R=I.value;M.has(R)||(M.add(R),E.push(R),A.push(Ik(R)),s.push(tL))}}catch(Z){L.e(Z)}finally{L.f()}l=function(W,it){return E[it]},u=function(W,it){return A[it]}}for(p=0,d=s.length;p<d;++p)h=s[p],b=s[p]=new au(h),(_=l(h,p,o))!=null&&(_+="")&&(S=b.id=_,O.set(S,O.has(S)?Pk:b)),(_=u(h,p,o))!=null&&(_+="")&&(b.parent=_);for(p=0;p<d;++p)if(b=s[p],_=b.parent){if(m=O.get(_),!m)throw new Error("missing: "+_);if(m===Pk)throw new Error("ambiguous: "+_);m.children?m.children.push(b):m.children=[b],b.parent=m}else{if(v)throw new Error("multiple roots");v=b}if(!v)throw new Error("no root");if(n!=null){for(;v.data===tL&&v.children.length===1;)v=v.children[0],--d;for(var N=s.length-1;N>=0&&(b=s[N],b.data===tL);--N)b.data=null}if(v.parent=zz,v.eachBefore(function(Z){Z.depth=Z.parent.depth+1,--d}).eachBefore(Qc),v.parent=null,d>0)throw new Error("cycle");return v}return r.id=function(o){return arguments.length?(t=cS(o),r):t},r.parentId=function(o){return arguments.length?(e=cS(o),r):e},r.path=function(o){return arguments.length?(n=cS(o),r):n},r}function Hz(t){t="".concat(t);var e=t.length;return nL(t,e-1)&&!nL(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:"/".concat(t)}function Ik(t){var e=t.length;if(e<2)return"";for(;--e>1&&!nL(t,e););return t.slice(0,e)}function nL(t,e){if(t[e]==="/"){for(var n=0;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function Vz(t,e,n,r,o){var s=t.children,l,u=s.length,d,h=new Array(u+1);for(h[0]=d=l=0;l<u;++l)h[l+1]=d+=s[l].value;p(0,u,t.value,e,n,r,o);function p(v,m,b,_,S,O,E){if(v>=m-1){var A=s[v];A.x0=_,A.y0=S,A.x1=O,A.y1=E;return}for(var M=h[v],L=b/2+M,I=v+1,R=m-1;I<R;){var N=I+R>>>1;h[N]<L?I=N+1:R=N}L-h[I-1]<h[I]-L&&v+1<I&&--I;var Z=h[I]-M,W=b-Z;if(O-_>E-S){var it=b?(_*W+O*Z)/b:O;p(v,I,Z,_,S,it,E),p(I,m,W,it,S,O,E)}else{var tt=b?(S*W+E*Z)/b:E;p(v,I,Z,_,S,O,tt),p(I,m,W,_,tt,O,E)}}}function lS(t,e,n,r,o){for(var s=t.children,l,u=-1,d=s.length,h=t.value&&(o-n)/t.value;++u<d;)l=s[u],l.x0=e,l.x1=r,l.y0=n,l.y1=n+=l.value*h}function Wz(t,e,n,r,o){(t.depth&1?lS:ec)(t,e,n,r,o)}var kk=(1+Math.sqrt(5))/2;function Rk(t,e,n,r,o,s){for(var l=[],u=e.children,d,h,p=0,v=0,m=u.length,b,_,S=e.value,O,E,A,M,L,I,R;p<m;){b=o-n,_=s-r;do O=u[v++].value;while(!O&&v<m);for(E=A=O,I=Math.max(_/b,b/_)/(S*t),R=O*O*I,L=Math.max(A/R,R/E);v<m;++v){if(O+=h=u[v].value,h<E&&(E=h),h>A&&(A=h),R=O*O*I,M=Math.max(A/R,R/E),M>L){O-=h;break}L=M}l.push(d={value:O,dice:b<_,children:u.slice(p,v)}),d.dice?ec(d,n,r,o,S?r+=_*O/S:s):lS(d,n,r,S?n+=b*O/S:o,s),S-=O,p=v}return l}var Dk=function t(e){function n(r,o,s,l,u){Rk(e,r,o,s,l,u)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(kk),Gz=function t(e){function n(r,o,s,l,u){if((d=r._squarify)&&d.ratio===e)for(var d,h,p,v,m=-1,b,_=d.length,S=r.value;++m<_;){for(h=d[m],p=h.children,v=h.value=0,b=p.length;v<b;++v)h.value+=p[v].value;h.dice?ec(h,o,s,l,S?s+=(u-s)*h.value/S:u):lS(h,o,s,S?o+=(l-o)*h.value/S:l,u),S-=h.value}else r._squarify=d=Rk(e,r,o,s,l,u),d.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(kk);function ad(){return 0}function mp(t){return function(){return t}}function $z(){var t=Dk,e=!1,n=1,r=1,o=[0],s=ad,l=ad,u=ad,d=ad,h=ad;function p(m){return m.x0=m.y0=0,m.x1=n,m.y1=r,m.eachBefore(v),o=[0],e&&m.eachBefore(t3),m}function v(m){var b=o[m.depth],_=m.x0+b,S=m.y0+b,O=m.x1-b,E=m.y1-b;O<_&&(_=O=(_+O)/2),E<S&&(S=E=(S+E)/2),m.x0=_,m.y0=S,m.x1=O,m.y1=E,m.children&&(b=o[m.depth+1]=s(m)/2,_+=h(m)-b,S+=l(m)-b,O-=u(m)-b,E-=d(m)-b,O<_&&(_=O=(_+O)/2),E<S&&(S=E=(S+E)/2),t(m,_,S,O,E))}return p.round=function(m){return arguments.length?(e=!!m,p):e},p.size=function(m){return arguments.length?(n=+m[0],r=+m[1],p):[n,r]},p.tile=function(m){return arguments.length?(t=Lk(m),p):t},p.padding=function(m){return arguments.length?p.paddingInner(m).paddingOuter(m):p.paddingInner()},p.paddingInner=function(m){return arguments.length?(s=typeof m=="function"?m:mp(+m),p):s},p.paddingOuter=function(m){return arguments.length?p.paddingTop(m).paddingRight(m).paddingBottom(m).paddingLeft(m):p.paddingTop()},p.paddingTop=function(m){return arguments.length?(l=typeof m=="function"?m:mp(+m),p):l},p.paddingRight=function(m){return arguments.length?(u=typeof m=="function"?m:mp(+m),p):u},p.paddingBottom=function(m){return arguments.length?(d=typeof m=="function"?m:mp(+m),p):d},p.paddingLeft=function(m){return arguments.length?(h=typeof m=="function"?m:mp(+m),p):h},p}function Yz(t,e){return Array.isArray(t)?typeof e=="function"?eL().path(e)(t):eL()(t):ou(t)}function Nk(t,e=[t.data.name]){t.id=t.id||t.data.name,t.path=e,t.children&&t.children.forEach(n=>{n.id=`${t.id}/${n.data.name}`,n.path=[...e,n.data.name],Nk(n,n.path)})}function Fk(t){const e=Qn(t,["data","name"]);e.replaceAll&&(t.path=e.replaceAll(".","/").split("/")),t.children&&t.children.forEach(n=>{Fk(n)})}function Xz(t,e){const n={treemapBinary:Vz,treemapDice:ec,treemapSlice:lS,treemapSliceDice:Wz,treemapSquarify:Dk,treemapResquarify:Gz},r=t==="treemapSquarify"?n[t].ratio(e):n[t];if(!r)throw new TypeError("Invalid tile method!");return r}function Bk(t,e,n){const{value:r}=n,o=Xz(e.tile,e.ratio),s=Yz(t,e.path);(0,Sr.Z)(t)?Fk(s):Nk(s),r?s.sum(d=>e.ignoreParentValue&&d.children?0:xa(r)(d)).sort(e.sort):s.count(),$z().tile(o).size(e.size).round(e.round).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(s);const l=s.descendants().map(d=>Object.assign(d,{id:d.id.replace(/^\//,""),x:[d.x0,d.x1],y:[d.y0,d.y1]}));return[l.filter(typeof e.layer=="function"?e.layer:d=>d.height===e.layer),l]}var qz=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},Kz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Qz(t){return Xn(t).select(`.${ue}`).node()}const Jz={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function tU(t={}){const{originData:e=[],layout:n}=t,r=Kz(t,["originData","layout"]),o=Je({},Jz,r),s=En(o,"breadCrumb"),l=En(o,"active");return u=>{const{update:d,setState:h,container:p,options:v}=u,m=Qz(p),b=v.marks[0],{state:_}=b,S=new V.ZA;m.appendChild(S);const O=(R,N)=>qz(this,void 0,void 0,function*(){if(S.removeChildren(),N){let Z="",W=s.y,it=0;const tt=[],pt=m.getBBox().width,K=R.map((lt,ft)=>{Z=`${Z}${lt}/`,tt.push(lt);const vt=new V.xv({name:Z.replace(/\/$/,""),style:Object.assign(Object.assign({text:lt,x:it,path:[...tt],depth:ft},s),{y:W})});S.appendChild(vt),it+=vt.getBBox().width;const It=new V.xv({style:Object.assign(Object.assign({x:it,text:" / "},s),{y:W})});return S.appendChild(It),it+=It.getBBox().width,it>pt&&(W=S.getBBox().height+s.y,it=0,vt.attr({x:it,y:W}),it+=vt.getBBox().width,It.attr({x:it,y:W}),it+=It.getBBox().width),ft===Ml(R)-1&&It.remove(),vt});K.forEach((lt,ft)=>{if(ft===Ml(K)-1)return;const vt=Object.assign({},lt.attributes);lt.attr("cursor","pointer"),lt.addEventListener("mouseenter",()=>{lt.attr(l)}),lt.addEventListener("mouseleave",()=>{lt.attr(vt)}),lt.addEventListener("click",()=>{O(Qn(lt,["style","path"]),Qn(lt,["style","depth"]))})})}Vj(p,h),h("treemapDrillDown",Z=>{const{marks:W}=Z,it=R.join("/"),tt=W.map(pt=>{if(pt.type!=="rect")return pt;let K=e;if(N){const ft=e.filter($t=>{const he=Qn($t,["id"]);return he&&(he.match(`${it}/`)||it.match(he))}).map($t=>({value:$t.height===0?Qn($t,["value"]):void 0,name:Qn($t,["id"])})),{paddingLeft:vt,paddingBottom:It,paddingRight:_t}=n,Lt=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||S.getBBox().height+10)/(N+1),paddingLeft:vt/(N+1),paddingBottom:It/(N+1),paddingRight:_t/(N+1),path:$t=>$t.name,layer:$t=>$t.depth===N+1});K=Bk(ft,Lt,{value:"value"})[0]}else K=e.filter(ft=>ft.depth===1);const lt=[];return K.forEach(({path:ft})=>{lt.push(io(ft))}),Je({},pt,{data:K,scale:{color:{domain:lt}}})});return Object.assign(Object.assign({},Z),{marks:tt})}),yield d(void 0,["legendFilter"])}),E=R=>R.attributes.key.split("-")[0],A=R=>Qn(R,["__data__","key"]),M=R=>{const N=R.target,{markType:Z,nodeName:W,attributes:it}=N||{};if(Z!=="rect"&&W!==V.bn.TEXT)return;const tt=W===V.bn.TEXT&&Qn(it,"isTreemapLabel")===!0?E(N):A(N),pt=vp(e,K=>K.id===tt);Qn(pt,"height")&&O(Qn(pt,"path"),Qn(pt,"depth"))};m.addEventListener("click",M);const L=su(Object.assign(Object.assign({},_.active),_.inactive)),I=()=>{P_(m).forEach(N=>{const Z=Qn(N,["style","cursor"]),W=vp(e,it=>it.id===Qn(N,["__data__","key"]));if(Z!=="pointer"&&(W!=null&&W.height)){N.style.cursor="pointer";const it=jv(N.attributes,L);N.addEventListener("mouseenter",()=>{N.attr(_.active)}),N.addEventListener("mouseleave",()=>{N.attr(Je(it,_.inactive))})}})};return I(),m.addEventListener("mousemove",I),()=>{S.remove(),m.removeEventListener("click",M),m.removeEventListener("mousemove",I)}}}var rL=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},eU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const nU={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},iL="movePoint",jk=t=>{const e=t.target,{markType:n}=e;n==="line"&&(e.attr("_lineWidth",e.attr("lineWidth")||1),e.attr("lineWidth",e.attr("_lineWidth")+3)),n==="interval"&&(e.attr("_opacity",e.attr("opacity")||1),e.attr("opacity",.7*e.attr("_opacity")))},zk=t=>{const e=t.target,{markType:n}=e;n==="line"&&e.attr("lineWidth",e.attr("_lineWidth")),n==="interval"&&e.attr("opacity",e.attr("_opacity"))},rU=(t,e,n)=>e.map(r=>["x","color"].reduce((s,l)=>{const u=n[l];return u&&r[u]!==t[u]?!1:s},!0)?Object.assign(Object.assign({},r),t):r),iU=t=>{const e=Qn(t,["__data__","y"]),r=Qn(t,["__data__","y1"])-e,{__data__:{data:o,encode:s,transform:l},childNodes:u}=t.parentNode,d=vp(l,({type:v})=>v==="normalizeY"),h=Qn(s,["y","field"]),p=o[u.indexOf(t)][h];return(v,m=!1)=>d||m?v/(1-v)/(r/(1-r))*p:v},oU=(t,e)=>{const n=Qn(t,["__data__","seriesItems",e,"0","value"]),r=Qn(t,["__data__","seriesIndex",e]),{__data__:{data:o,encode:s,transform:l}}=t.parentNode,u=vp(l,({type:p})=>p==="normalizeY"),d=Qn(s,["y","field"]),h=o[r][d];return p=>u?n===1?p:p/(1-p)/(n/(1-n))*h:p},Uk=(t,e,n)=>{t.forEach((r,o)=>{r.attr("stroke",e[1]===o?n.activeStroke:n.stroke)})},Zk=(t,e,n,r)=>{const o=new V.y$({style:n}),s=new V.xv({style:r});return e.appendChild(s),t.appendChild(o),[o,s]},Hk=(t,e)=>{if(!Qn(t,["options","range","indexOf"]))return;const r=t.options.range.indexOf(e);return t.sortedDomain[r]},oL=(t,e,n)=>{const r=Sh(t,e),s=Sh(t,n)/r,l=t[0]+(e[0]-t[0])*s,u=t[1]+(e[1]-t[1])*s;return[l,u]};function aU(t={}){const{selection:e=[],precision:n=2}=t,r=eU(t,["selection","precision"]),o=Object.assign(Object.assign({},nU),r||{}),s=En(o,"path"),l=En(o,"label"),u=En(o,"point");return(d,h,p)=>{const{update:v,setState:m,container:b,view:_,options:{marks:S,coordinate:O}}=d,E=No(b);let A=P_(E),M,L=e;const{transform:I=[],type:R}=O,N=!!vp(I,({type:_t})=>_t==="transpose"),Z=R==="polar",W=R==="theta",it=!!vp(A,({markType:_t})=>_t==="area");it&&(A=A.filter(({markType:_t})=>_t==="area"));const tt=new V.ZA({style:{zIndex:2}});E.appendChild(tt);const pt=()=>{p.emit("element-point:select",{nativeEvent:!0,data:{selection:L}})},K=(_t,Lt)=>{p.emit("element-point:moved",{nativeEvent:!0,data:{changeData:_t,data:Lt}})},lt=_t=>{const Lt=_t.target;L=[Lt.parentNode.childNodes.indexOf(Lt)],pt(),vt(Lt)},ft=_t=>{const{data:{selection:Lt},nativeEvent:$t}=_t;if($t)return;L=Lt;const he=Qn(A,[L==null?void 0:L[0]]);he&&vt(he)},vt=_t=>{const{attributes:Lt,markType:$t,__data__:he}=_t,{stroke:le}=Lt,{points:Ee,seriesTitle:Ue,color:Be,title:Qe,seriesX:en,y1:Ge}=he;if(N&&$t!=="interval")return;const{scale:cn,coordinate:wn}=(M==null?void 0:M.view)||_,{color:Mn,y:Sn,x:Fn}=cn,Zn=wn.getCenter();tt.removeChildren();let Gn;const rr=($n,zn,Yn,ti)=>rL(this,void 0,void 0,function*(){return m("elementPointMove",ci=>{var Ir;const Hi=(((Ir=M==null?void 0:M.options)===null||Ir===void 0?void 0:Ir.marks)||S).map(Li=>{if(!ti.includes(Li.type))return Li;const{data:lo,encode:li}=Li,uo=Object.keys(li).reduce((ei,xo)=>{const Fi=li[xo];return xo==="x"&&(ei[Fi]=$n),xo==="y"&&(ei[Fi]=zn),xo==="color"&&(ei[Fi]=Yn),ei},{}),wi=rU(uo,lo,li);return K(uo,wi),Je({},Li,{data:wi,animate:!1})});return Object.assign(Object.assign({},ci),{marks:Hi})}),yield v("elementPointMove")});if(["line","area"].includes($t))Ee.forEach(($n,zn)=>{const Yn=Fn.invert(en[zn]);if(!Yn)return;const ti=new V.Cd({name:iL,style:Object.assign({cx:$n[0],cy:$n[1],fill:le},u)}),ci=oU(_t,zn);ti.addEventListener("mousedown",Ir=>{const Hi=wn.output([en[zn],0]),Li=Ue==null?void 0:Ue.length;b.attr("cursor","move"),L[1]!==zn&&(L[1]=zn,pt()),Uk(tt.childNodes,L,u);const[lo,li]=Zk(tt,ti,s,l),yi=wi=>{const ei=$n[1]+wi.clientY-Gn[1];if(it)if(Z){const xo=$n[0]+wi.clientX-Gn[0],[Fi,Oa]=oL(Zn,Hi,[xo,ei]),[,ud]=wn.output([1,Sn.output(0)]),[,Tp]=wn.invert([Fi,ud-(Ee[zn+Li][1]-Oa)]),nO=(zn+1)%Li,lX=(zn-1+Li)%Li,uX=Sf([Ee[lX],[Fi,Oa],Ue[nO]&&Ee[nO]]);li.attr("text",ci(Sn.invert(Tp)).toFixed(n)),lo.attr("d",uX),ti.attr("cx",Fi),ti.attr("cy",Oa)}else{const[,xo]=wn.output([1,Sn.output(0)]),[,Fi]=wn.invert([$n[0],xo-(Ee[zn+Li][1]-ei)]),Oa=Sf([Ee[zn-1],[$n[0],ei],Ue[zn+1]&&Ee[zn+1]]);li.attr("text",ci(Sn.invert(Fi)).toFixed(n)),lo.attr("d",Oa),ti.attr("cy",ei)}else{const[,xo]=wn.invert([$n[0],ei]),Fi=Sf([Ee[zn-1],[$n[0],ei],Ee[zn+1]]);li.attr("text",Sn.invert(xo).toFixed(n)),lo.attr("d",Fi),ti.attr("cy",ei)}};Gn=[Ir.clientX,Ir.clientY],window.addEventListener("mousemove",yi);const uo=()=>rL(this,void 0,void 0,function*(){if(b.attr("cursor","default"),window.removeEventListener("mousemove",yi),b.removeEventListener("mouseup",uo),(0,Tl.Z)(li.attr("text")))return;const wi=Number(li.attr("text")),ei=Hk(Mn,Be);M=yield rr(Yn,wi,ei,["line","area"]),li.remove(),lo.remove(),vt(_t)});b.addEventListener("mouseup",uo)}),tt.appendChild(ti)}),Uk(tt.childNodes,L,u);else if($t==="interval"){let $n=[(Ee[0][0]+Ee[1][0])/2,Ee[0][1]];N?$n=[Ee[0][0],(Ee[0][1]+Ee[1][1])/2]:W&&($n=Ee[0]);const zn=iU(_t),Yn=new V.Cd({name:iL,style:Object.assign(Object.assign({cx:$n[0],cy:$n[1],fill:le},u),{stroke:u.activeStroke})});Yn.addEventListener("mousedown",ti=>{b.attr("cursor","move");const ci=Hk(Mn,Be),[Ir,Hi]=Zk(tt,Yn,s,l),Li=li=>{if(N){const yi=$n[0]+li.clientX-Gn[0],[uo]=wn.output([Sn.output(0),Sn.output(0)]),[,wi]=wn.invert([uo+(yi-Ee[2][0]),$n[1]]),ei=Sf([[yi,Ee[0][1]],[yi,Ee[1][1]],Ee[2],Ee[3]],!0);Hi.attr("text",zn(Sn.invert(wi)).toFixed(n)),Ir.attr("d",ei),Yn.attr("cx",yi)}else if(W){const yi=$n[1]+li.clientY-Gn[1],uo=$n[0]+li.clientX-Gn[0],[wi,ei]=oL(Zn,[uo,yi],$n),[xo,Fi]=oL(Zn,[uo,yi],Ee[1]),Oa=wn.invert([wi,ei])[1],ud=Ge-Oa;if(ud<0)return;const Tp=w5(Zn,[[wi,ei],[xo,Fi],Ee[2],Ee[3]],ud>.5?1:0);Hi.attr("text",zn(ud,!0).toFixed(n)),Ir.attr("d",Tp),Yn.attr("cx",wi),Yn.attr("cy",ei)}else{const yi=$n[1]+li.clientY-Gn[1],[,uo]=wn.output([1,Sn.output(0)]),[,wi]=wn.invert([$n[0],uo-(Ee[2][1]-yi)]),ei=Sf([[Ee[0][0],yi],[Ee[1][0],yi],Ee[2],Ee[3]],!0);Hi.attr("text",zn(Sn.invert(wi)).toFixed(n)),Ir.attr("d",ei),Yn.attr("cy",yi)}};Gn=[ti.clientX,ti.clientY],window.addEventListener("mousemove",Li);const lo=()=>rL(this,void 0,void 0,function*(){if(b.attr("cursor","default"),b.removeEventListener("mouseup",lo),window.removeEventListener("mousemove",Li),(0,Tl.Z)(Hi.attr("text")))return;const li=Number(Hi.attr("text"));M=yield rr(Qe,li,ci,[$t]),Hi.remove(),Ir.remove(),vt(_t)});b.addEventListener("mouseup",lo)}),tt.appendChild(Yn)}};A.forEach((_t,Lt)=>{L[0]===Lt&&vt(_t),_t.addEventListener("click",lt),_t.addEventListener("mouseenter",jk),_t.addEventListener("mouseleave",zk)});const It=_t=>{const Lt=_t==null?void 0:_t.target;(!Lt||Lt.name!==iL&&!A.includes(Lt))&&(L=[],pt(),tt.removeChildren())};return p.on("element-point:select",ft),p.on("element-point:unselect",It),b.addEventListener("mousedown",It),()=>{tt.remove(),p.off("element-point:select",ft),p.off("element-point:unselect",It),b.removeEventListener("mousedown",It),A.forEach(_t=>{_t.removeEventListener("click",lt),_t.removeEventListener("mouseenter",jk),_t.removeEventListener("mouseleave",zk)})}}}var sU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Vk=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{x:n=0,y:r=0,width:o,height:s,data:l}=t;return e.map(u=>{var{data:d,x:h,y:p,width:v,height:m}=u,b=sU(u,["data","x","y","width","height"]);return Object.assign(Object.assign({},b),{data:ff(d,l),x:h!=null?h:n,y:p!=null?p:r,width:v!=null?v:o,height:m!=null?m:s})})};Vk.props={};var cU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Wk=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{direction:n="row",ratio:r=e.map(()=>1),padding:o=0,data:s}=t,[l,u,d,h]=n==="col"?["y","height","width","x"]:["x","width","height","y"],p=r.reduce((S,O)=>S+O),v=t[u]-o*(e.length-1),m=r.map(S=>v*(S/p)),b=[];let _=t[l]||0;for(let S=0;S<m.length;S+=1){const O=e[S],{data:E}=O,A=cU(O,["data"]),M=ff(E,s);b.push(Object.assign({[l]:_,[u]:m[S],[h]:t[h]||0,[d]:t[d],data:M},A)),_+=m[S]+o}return b};Wk.props={};class Cm{constructor(e){this.$value=e}static of(e){return new Cm(e)}call(e,...n){return this.$value=e(this.$value,...n),this}value(){return this.$value}}var lU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const uU=uf(t=>{const{encode:e,data:n,scale:r,shareSize:o=!1}=t,{x:s,y:l}=e,u=(d,h)=>{var p;if(d===void 0||!o)return{};const v=$r(n,_=>_[d]),m=((p=r==null?void 0:r[h])===null||p===void 0?void 0:p.domain)||Array.from(v.keys()),b=m.map(_=>v.has(_)?v.get(_).length:1);return{domain:m,flex:b}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:s===void 0?null:{position:"top"}},s===void 0&&{paddingInner:0}),u(s,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:l===void 0?null:{position:"right"}},l===void 0&&{paddingInner:0}),u(l,"y"))}}}),aL=Cc(t=>{const{data:e,scale:n,legend:r}=t,o=[t];let s,l,u;for(;o.length;){const m=o.shift(),{children:b,encode:_={},scale:S={},legend:O={}}=m,{color:E}=_,{color:A}=S,{color:M}=O;E!==void 0&&(s=E),A!==void 0&&(l=A),M!==void 0&&(u=M),Array.isArray(b)&&o.push(...b)}const d=()=>{var m;const b=(m=n==null?void 0:n.color)===null||m===void 0?void 0:m.domain;if(b!==void 0)return[b];if(s===void 0)return[void 0];const _=typeof s=="function"?s:O=>O[s],S=e.map(_);return S.some(O=>typeof O=="number")?[ts(S)]:[Array.from(new Set(S)),"ordinal"]},h=typeof s=="string"?s:"",[p,v]=d();return Object.assign({encode:{color:{type:"column",value:p!=null?p:[]}},scale:{color:Je({},l,{domain:p,type:v})}},r===void 0&&{legend:{color:Je({title:h},u)}})}),sL=uf(()=>({animate:{enterType:"fadeIn"}})),cL=Cc(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),lL=Cc(()=>({type:"cell"})),Gk=Cc(t=>{const{data:e}=t;return{data:{type:"inline",value:e,transform:[{type:"custom",callback:()=>{const{data:r,encode:o}=t,{x:s,y:l}=o,u=s?Array.from(new Set(r.map(p=>p[s]))):[],d=l?Array.from(new Set(r.map(p=>p[l]))):[];return(()=>{if(u.length&&d.length){const p=[];for(const v of u)for(const m of d)p.push({[s]:v,[l]:m});return p}if(u.length)return u.map(p=>({[s]:p}));if(d.length)return d.map(p=>({[l]:p}))})()}}]}}}),$k=Cc((t,e=fU,n=dU,r=hU,o={})=>{const{data:s,encode:l,children:u,scale:d,x:h=0,y:p=0,shareData:v=!1,key:m}=t,{value:b}=s,{x:_,y:S}=l,{color:O}=d,{domain:E}=O;return{children:(M,L,I)=>{const{x:R,y:N}=L,{paddingLeft:Z,paddingTop:W,marginLeft:it,marginTop:tt}=I,{domain:pt}=R.getOptions(),{domain:K}=N.getOptions(),lt=vc(M),ft=M.map(e),vt=M.map(({x:le,y:Ee})=>[R.invert(le),N.invert(Ee)]),_t=vt.map(([le,Ee])=>Ue=>{const{[_]:Be,[S]:Qe}=Ue;return(_!==void 0?Be===le:!0)&&(S!==void 0?Qe===Ee:!0)}).map(le=>b.filter(le)),Lt=v?kr(_t,le=>le.length):void 0,$t=vt.map(([le,Ee])=>({columnField:_,columnIndex:pt.indexOf(le),columnValue:le,columnValuesLength:pt.length,rowField:S,rowIndex:K.indexOf(Ee),rowValue:Ee,rowValuesLength:K.length})),he=$t.map(le=>Array.isArray(u)?u:[u(le)].flat(1));return lt.flatMap(le=>{const[Ee,Ue,Be,Qe]=ft[le],en=$t[le],Ge=_t[le];return he[le].map(wn=>{var Mn,Sn,{scale:Fn,key:Zn,facet:Gn=!0,axis:rr={},legend:$n={}}=wn,zn=lU(wn,["scale","key","facet","axis","legend"]);const Yn=((Mn=Fn==null?void 0:Fn.y)===null||Mn===void 0?void 0:Mn.guide)||rr.y,ti=((Sn=Fn==null?void 0:Fn.x)===null||Sn===void 0?void 0:Sn.guide)||rr.x,ci={x:{tickCount:_?5:void 0},y:{tickCount:S?5:void 0}},Ir=Gn?Ge:Ge.length===0?[]:b,Hi={color:{domain:E}},Li={x:Yk(ti,n)(en,Ir),y:Yk(Yn,r)(en,Ir)};return Object.assign(Object.assign({key:`${Zn}-${le}`,data:Ir,margin:0,x:Ee+Z+h+it,y:Ue+W+p+tt,parentKey:m,width:Be,height:Qe,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!Ir.length,dataDomain:Lt,scale:Je(ci,Fn,Hi),axis:Je({},rr,Li),legend:!1},zn),o)})})}}});function fU(t){const{points:e}=t;return pg(e)}function uS(t,e){return e.length?Je({title:!1,tick:null,label:null},t):Je({title:!1,tick:null,label:null,grid:null},t)}function dU(t){return(e,n)=>{const{rowIndex:r,rowValuesLength:o,columnIndex:s,columnValuesLength:l}=e;if(r!==o-1)return uS(t,n);const u=s!==l-1?!1:void 0,d=n.length?void 0:null;return Je({title:u,grid:d},t)}}function hU(t){return(e,n)=>{const{rowIndex:r,columnIndex:o}=e;if(o!==0)return uS(t,n);const s=r!==0?!1:void 0,l=n.length?void 0:null;return Je({title:s,grid:l},t)}}function Yk(t,e){return typeof t=="function"?t:t===null||t===!1?()=>null:e(t)}const Xk=()=>t=>[Cm.of(t).call(lL).call(aL).call(sL).call(uU).call(cL).call(Gk).call($k).value()];Xk.props={};var uL=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const pU=uf(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),gU=Cc(t=>{const{data:e,children:n,x:r=0,y:o=0,key:s}=t;return{children:(u,d,h)=>{const{x:p,y:v}=d,{paddingLeft:m,paddingTop:b,marginLeft:_,marginTop:S}=h,{domain:O}=p.getOptions(),{domain:E}=v.getOptions(),A=vc(u),M=u.map(({points:N})=>pg(N)),L=u.map(({x:N,y:Z})=>[p.invert(N),v.invert(Z)]),I=L.map(([N,Z])=>({columnField:N,columnIndex:O.indexOf(N),columnValue:N,columnValuesLength:O.length,rowField:Z,rowIndex:E.indexOf(Z),rowValue:Z,rowValuesLength:E.length})),R=I.map(N=>Array.isArray(n)?n:[n(N)].flat(1));return A.flatMap(N=>{const[Z,W,it,tt]=M[N],[pt,K]=L[N],lt=I[N];return R[N].map(vt=>{var It,_t;const{scale:Lt,key:$t,encode:he,axis:le,interaction:Ee}=vt,Ue=uL(vt,["scale","key","encode","axis","interaction"]),Be=(It=Lt==null?void 0:Lt.y)===null||It===void 0?void 0:It.guide,Qe=(_t=Lt==null?void 0:Lt.x)===null||_t===void 0?void 0:_t.guide,en={x:{facet:!1},y:{facet:!1}},Ge={x:mU(Qe)(lt,e),y:yU(Be)(lt,e)},cn={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:e,parentKey:s,key:`${$t}-${N}`,x:Z+m+r+_,y:W+b+o+S,width:it,height:tt,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:Je(en,Lt),axis:Je(cn,le,Ge),legend:!1,encode:Je({},he,{x:pt,y:K}),interaction:Je({},Ee,{legendFilter:!1})},Ue)})})}}}),vU=Cc(t=>{const{encode:e}=t,n=uL(t,["encode"]),{position:r=[],x:o=r,y:s=[...r].reverse()}=e,l=uL(e,["position","x","y"]),u=[];for(const d of[o].flat(1))for(const h of[s].flat(1))u.push({$x:d,$y:h});return Object.assign(Object.assign({},n),{data:u,encode:Object.assign(Object.assign({},l),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[o].flat(1).length===1&&{x:{paddingInner:0}}),[s].flat(1).length===1&&{y:{paddingInner:0}})})});function mU(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{rowIndex:r,rowValuesLength:o}=e;if(r!==o-1)return uS(t,n)}}function yU(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{columnIndex:r}=e;if(r!==0)return uS(t,n)}}const bU=()=>t=>[Cm.of(t).call(lL).call(aL).call(gU).call(vU).call(sL).call(cL).call(pU).value()];var _U=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const xU=uf(t=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),SU=uf(t=>({coordinate:{type:"polar"}})),OU=t=>{const{encode:e}=t,n=_U(t,["encode"]),{position:r}=e;return Object.assign(Object.assign({},n),{encode:{x:r}})};function qk(t){return e=>null}function EU(t){const{points:e}=t,[n,r,o,s]=e,l=hi(n,s),u=Oi(n,s),d=Oi(r,o),h=n_(u,d),p=1/Math.sin(h/2),v=l/(1+p),m=v*Math.sqrt(2),[b,_]=o,O=Mc(u)+h/2,E=v*p,A=b+E*Math.sin(O),M=_-E*Math.cos(O);return[A-m/2,M-m/2,m,m]}const wU=()=>t=>[Cm.of(t).call(lL).call(OU).call(aL).call(SU).call(Gk).call($k,EU,qk,qk,{frame:!1}).call(sL).call(cL).call(xU).value()];function AU(t,e,n){const o=n,s=[0,o],l=[-o+1,1];if(t==="normal")return s;if(t==="reverse")return l;if(t==="alternate")return e%2===0?s:l;if(t==="reverse-alternate")return e%2===0?l:s}function TU(t,e,n){const r=[t];for(;r.length;){const o=r.pop();o.animate=Je({enter:{duration:e},update:{duration:e,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:e}},o.animate||{});const{children:s}=o;Array.isArray(s)&&r.push(...s)}return t}const Kk=()=>t=>{const{children:e=[],duration:n=1e3,iterationCount:r=1,direction:o="normal",easing:s="ease-in-out-sine"}=t,l=e.length;if(!Array.isArray(e)||l===0)return[];const{key:u}=e[0],d=e.map(h=>Object.assign(Object.assign({},h),{key:u})).map(h=>TU(h,n,s));return function*(){let h=0,p;for(;r==="infinite"||h<r;){const[v,m]=AU(o,h,l);for(let b=v;b<m;b+=1){const _=Math.abs(b);p!==_&&(yield d[_]),p=_}h++}}};Kk.props={};function yu(t,e,n){const{encode:r}=n;if(t===null)return[e];const o=CU(t).map(l=>{var u;return[l,(u=yr(r,l))===null||u===void 0?void 0:u[0]]}).filter(([,l])=>Zr(l)),s=l=>o.map(([,u])=>u[l]).join("-");return Array.from($r(e,s).values())}function Qk(t){return Array.isArray(t)?PU(t):typeof t=="function"?LU(t):t==="series"?MU:t==="value"?IU:t==="sum"?kU:t==="maxIndex"?RU:null}function Jk(t,e){for(const n of t)n.sort(e)}function tR(t,e){return(e==null?void 0:e.domain)||Array.from(new Set(t))}function CU(t){return Array.isArray(t)?t:[t]}function MU(t,e,n){return Mm(r=>n[r])}function LU(t){return(e,n,r)=>Mm(o=>t(e[o]))}function PU(t){return(e,n,r)=>(o,s)=>t.reduce((l,u)=>l!==0?l:si(e[o][u],e[s][u]),0)}function IU(t,e,n){return Mm(r=>e[r])}function kU(t,e,n){const r=vc(t),o=Array.from($r(r,l=>n[+l]).entries()),s=new Map(o.map(([l,u])=>[l,u.reduce((d,h)=>d+ +e[h])]));return Mm(l=>s.get(n[l]))}function RU(t,e,n){const r=vc(t),o=Array.from($r(r,l=>n[+l]).entries()),s=new Map(o.map(([l,u])=>[l,Pc(u,d=>e[d])]));return Mm(l=>s.get(n[l]))}function Mm(t){return(e,n)=>si(t(e),t(n))}const eR=(t={})=>{const{groupBy:e="x",orderBy:n=null,reverse:r=!1,y:o="y",y1:s="y1",series:l=!0}=t;return(u,d)=>{var h;const{data:p,encode:v,style:m={}}=d,[b,_]=yr(v,"y"),[S,O]=yr(v,"y1"),[E]=l?op(v,"series","color"):yr(v,"color"),A=yu(e,u,d),L=((h=Qk(n))!==null&&h!==void 0?h:()=>null)(p,b,E);L&&Jk(A,L);const I=new Array(u.length),R=new Array(u.length),N=new Array(u.length),Z=[],W=[];for(const ft of A){r&&ft.reverse();const vt=S?+S[ft[0]]:0,It=[],_t=[];for(const Be of ft){const Qe=N[Be]=+b[Be]-vt;Qe<0?_t.push(Be):Qe>=0&&It.push(Be)}const Lt=It.length>0?It:_t,$t=_t.length>0?_t:It;let he=It.length-1,le=0;for(;he>0&&b[Lt[he]]===0;)he--;for(;le<$t.length-1&&b[$t[le]]===0;)le++;Z.push(Lt[he]),W.push($t[le]);let Ee=vt;for(const Be of _t.reverse()){const Qe=N[Be];Ee=I[Be]=(R[Be]=Ee)+Qe}let Ue=vt;for(const Be of It){const Qe=N[Be];Qe>0?Ue=I[Be]=(R[Be]=Ue)+Qe:I[Be]=R[Be]=Ue}}const it=new Set(Z),tt=new Set(W),pt=o==="y"?I:R,K=s==="y"?I:R;let lt;return d.type==="point"?lt={y0:uu(b,_),y:Lr(pt,_)}:lt={y0:uu(b,_),y:Lr(pt,_),y1:Lr(K,O)},[u,Je({},d,{encode:Object.assign({},lt),style:Object.assign({first:(ft,vt)=>it.has(vt),last:(ft,vt)=>tt.has(vt)},m)})]}};eR.props={};function nR(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&++n}return n}function DU(t,e){let n=0,r,o=0,s=0;if(e===void 0)for(let l of t)l!=null&&(l=+l)>=l&&(r=l-o,o+=r/++n,s+=r*(l-o));else{let l=-1;for(let u of t)(u=e(u,++l,t))!=null&&(u=+u)>=u&&(r=u-o,o+=r/++n,s+=r*(u-o))}if(n>1)return s/(n-1)}function rR(t,e){const n=DU(t,e);return n&&Math.sqrt(n)}function NU(t,e,n){const r=nR(t),o=rR(t);return r&&o?Math.ceil((n-e)*Math.cbrt(r)/(3.49*o)):1}var iR=Array.prototype,FU=iR.slice,wX=iR.map;function fL(t){return()=>t}const BU=Math.sqrt(50),jU=Math.sqrt(10),zU=Math.sqrt(2);function fS(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log10(r)),s=r/Math.pow(10,o),l=s>=BU?10:s>=jU?5:s>=zU?2:1;let u,d,h;return o<0?(h=Math.pow(10,-o)/l,u=Math.round(t*h),d=Math.round(e*h),u/h<t&&++u,d/h>e&&--d,h=-h):(h=Math.pow(10,o)*l,u=Math.round(t/h),d=Math.round(e/h),u*h<t&&++u,d*h>e&&--d),d<u&&.5<=n&&n<2?fS(t,e,n*2):[u,d,h]}function UU(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[o,s,l]=r?fS(e,t,n):fS(t,e,n);if(!(s>=o))return[];const u=s-o+1,d=new Array(u);if(r)if(l<0)for(let h=0;h<u;++h)d[h]=(s-h)/-l;else for(let h=0;h<u;++h)d[h]=(s-h)*l;else if(l<0)for(let h=0;h<u;++h)d[h]=(o+h)/-l;else for(let h=0;h<u;++h)d[h]=(o+h)*l;return d}function Lm(t,e,n){return e=+e,t=+t,n=+n,fS(t,e,n)[2]}function AX(t,e,n){e=+e,t=+t,n=+n;const r=e<t,o=r?Lm(e,t,n):Lm(t,e,n);return(r?-1:1)*(o<0?1/-o:o)}function ZU(t,e,n){let r;for(;;){const o=Lm(t,e,n);if(o===r||o===0||!isFinite(o))return[t,e];o>0?(t=Math.floor(t/o)*o,e=Math.ceil(e/o)*o):o<0&&(t=Math.ceil(t*o)/o,e=Math.floor(e*o)/o),r=o}}function HU(t){return Math.max(1,Math.ceil(Math.log(nR(t))/Math.LN2)+1)}function VU(){var t=yd,e=ts,n=HU;function r(o){Array.isArray(o)||(o=Array.from(o));var s,l=o.length,u,d,h=new Array(l);for(s=0;s<l;++s)h[s]=t(o[s],s,o);var p=e(h),v=p[0],m=p[1],b=n(h,v,m);if(!Array.isArray(b)){const M=m,L=+b;if(e===ts&&([v,m]=ZU(v,m,L)),b=UU(v,m,L),b[0]<=v&&(d=Lm(v,m,L)),b[b.length-1]>=m)if(M>=m&&e===ts){const I=Lm(v,m,L);isFinite(I)&&(I>0?m=(Math.floor(m/I)+1)*I:I<0&&(m=(Math.ceil(m*-I)+1)/-I))}else b.pop()}for(var _=b.length,S=0,O=_;b[S]<=v;)++S;for(;b[O-1]>m;)--O;(S||O<_)&&(b=b.slice(S,O),_=O-S);var E=new Array(_+1),A;for(s=0;s<=_;++s)A=E[s]=[],A.x0=s>0?b[s-1]:v,A.x1=s<_?b[s]:m;if(isFinite(d)){if(d>0)for(s=0;s<l;++s)(u=h[s])!=null&&v<=u&&u<=m&&E[Math.min(_,Math.floor((u-v)/d))].push(o[s]);else if(d<0){for(s=0;s<l;++s)if((u=h[s])!=null&&v<=u&&u<=m){const M=Math.floor((v-u)*d);E[Math.min(_,M+(b[M]<=u))].push(o[s])}}}else for(s=0;s<l;++s)(u=h[s])!=null&&v<=u&&u<=m&&E[Hs(b,u,0,_)].push(o[s]);return E}return r.value=function(o){return arguments.length?(t=typeof o=="function"?o:fL(o),r):t},r.domain=function(o){return arguments.length?(e=typeof o=="function"?o:fL([o[0],o[1]]),r):e},r.thresholds=function(o){return arguments.length?(n=typeof o=="function"?o:fL(Array.isArray(o)?FU.call(o):o),r):n},r}function dL(t,e,n=0,r=1/0,o){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(o=o===void 0?gf:Eg(o);r>n;){if(r-n>600){const d=r-n+1,h=e-n+1,p=Math.log(d),v=.5*Math.exp(2*p/3),m=.5*Math.sqrt(p*v*(d-v)/d)*(h-d/2<0?-1:1),b=Math.max(n,Math.floor(e-h*v/d+m)),_=Math.min(r,Math.floor(e+(d-h)*v/d+m));dL(t,e,b,_,o)}const s=t[e];let l=n,u=r;for(Pm(t,n,e),o(t[r],s)>0&&Pm(t,n,r);l<u;){for(Pm(t,l,u),++l,--u;o(t[l],s)<0;)++l;for(;o(t[u],s)>0;)--u}o(t[n],s)===0?Pm(t,n,u):(++u,Pm(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function Pm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function WU(t,e=si){let n,r=!1;if(e.length===1){let o;for(const s of t){const l=e(s);(r?si(l,o)>0:si(l,l)===0)&&(n=s,o=l,r=!0)}}else for(const o of t)(r?e(o,n)>0:e(o,o)===0)&&(n=o,r=!0);return n}function dS(t,e,n){if(t=Float64Array.from(h5(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return ra(t);if(e>=1)return kr(t);var r,o=(r-1)*e,s=Math.floor(o),l=kr(dL(t,s).subarray(0,s+1)),u=ra(t.subarray(s+1));return l+(u-l)*(o-s)}}function TX(t,e,n=number){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,s=Math.floor(o),l=+n(t[s],s,t),u=+n(t[s+1],s+1,t);return l+(u-l)*(o-s)}}function GU(t,e,n=as){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(u,d)=>as(n(t[d],d,t))),e<=0)return Vf(r);if(e>=1)return Pc(r);var r,o=Uint32Array.from(t,(u,d)=>d),s=r.length-1,l=Math.floor(s*e);return dL(o,l,0,s,(u,d)=>gf(r[u],r[d])),l=WU(o.subarray(0,l+1),u=>r[u]),l>=0?l:-1}}function hL(t,e){return dS(t,.5,e)}function $U(t,e){return GU(t,.5,e)}var YU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function bu(t){return e=>e===null?t:`${t} of ${e}`}function XU(t){if(typeof t=="function")return[t,null];const n={mean:qU,max:QU,count:tZ,first:nZ,last:rZ,sum:eZ,min:JU,median:KU}[t];if(!n)throw new Error(`Unknown reducer: ${t}.`);return n()}function qU(){const t=(n,r)=>Xc(n,o=>+r[o]),e=bu("mean");return[t,e]}function KU(){const t=(n,r)=>hL(n,o=>+r[o]),e=bu("median");return[t,e]}function QU(){const t=(n,r)=>kr(n,o=>+r[o]),e=bu("max");return[t,e]}function JU(){const t=(n,r)=>ra(n,o=>+r[o]),e=bu("min");return[t,e]}function tZ(){const t=(n,r)=>n.length,e=bu("count");return[t,e]}function eZ(){const t=(n,r)=>Go(n,o=>+r[o]),e=bu("sum");return[t,e]}function nZ(){const t=(n,r)=>r[n[0]],e=bu("first");return[t,e]}function rZ(){const t=(n,r)=>r[n[n.length-1]],e=bu("last");return[t,e]}const pL=(t={})=>{const{groupBy:e}=t,n=YU(t,["groupBy"]);return(r,o)=>{const{data:s,encode:l}=o,u=e(r,o);if(!u)return[r,o];const d=(b,_)=>{if(b)return b;const{from:S}=_;if(!S)return b;const[,O]=yr(l,S);return O},h=Object.entries(n).map(([b,_])=>{const[S,O]=XU(_),[E,A]=yr(l,b),M=d(A,_),L=u.map(I=>S(I,E!=null?E:s));return[b,Object.assign(Object.assign({},QM(L,(O==null?void 0:O(M))||M)),{aggregate:!0})]}),p=Object.keys(l).map(b=>{const[_,S]=yr(l,b),O=u.map(E=>_[E[0]]);return[b,Lr(O,S)]}),v=u.map(b=>s[b[0]]);return[vc(u),Je({},o,{data:v,encode:Object.fromEntries([...p,...h])})]}};pL.props={};var iZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const oR="thresholds";function oZ(t){const[e,n]=ts(t);return Math.min(200,NU(t,e,n))}const gL=(t={})=>{const{groupChannels:e=["color"],binChannels:n=["x","y"]}=t,r=iZ(t,["groupChannels","binChannels"]),o={},s=(l,u)=>{const{encode:d}=u,h=n.map(_=>{const[S]=yr(d,_);return S}),p=En(r,oR),v=l.filter(_=>h.every(S=>Zr(S[_]))),m=[...e.map(_=>{const[S]=yr(d,_);return S}).filter(Zr).map(_=>S=>_[S]),...n.map((_,S)=>{const O=h[S],E=p[_]||oZ(O),A=VU().thresholds(E).value(L=>+O[L])(v),M=new Map(A.flatMap(L=>{const{x0:I,x1:R}=L,N=`${I},${R}`;return L.map(Z=>[Z,N])}));return o[_]=M,L=>M.get(L)})],b=_=>m.map(S=>S(_)).join("-");return Array.from($r(v,b).values())};return pL(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([l])=>!l.startsWith(oR)))),Object.fromEntries(n.flatMap(l=>{const u=([h])=>+o[l].get(h).split(",")[0],d=([h])=>+o[l].get(h).split(",")[1];return d.from=l,[[l,u],[`${l}1`,d]]}))),{groupBy:s}))};gL.props={};const aR=(t={})=>{const{thresholds:e}=t;return gL(Object.assign(Object.assign({},t),{thresholdsX:e,groupChannels:["color"],binChannels:["x"]}))};aR.props={};var aZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const sR=(t={})=>{const{groupBy:e="x",reverse:n=!1,orderBy:r,padding:o}=t,s=aZ(t,["groupBy","reverse","orderBy","padding"]);return(l,u)=>{const{data:d,encode:h,scale:p}=u,{series:v}=p,[m]=yr(h,"y"),[b]=op(h,"series","color"),_=tR(b,v),S=Je({},u,{scale:{series:{domain:_,paddingInner:o}}}),O=yu(e,l,u),E=Qk(r);if(!E)return[l,Je(S,{encode:{series:Lr(b)}})];const A=E(d,m,b);A&&Jk(O,A);const M=new Array(l.length);for(const L of O){n&&L.reverse();for(let I=0;I<L.length;I++)M[L[I]]=_[I]}return[l,Je(S,{encode:{series:Lr(r?M:b)}})]}};sR.props={};function hS(t,e,n){if(t===null)return[-.5,.5];const r=tR(t,e),s=new Es({domain:r,range:[0,1],padding:n}).getBandWidth();return[-s/2,s/2]}function pS(t,e,n){return e*(1-t)+n*t}const cR=(t={})=>{const{padding:e=0,paddingX:n=e,paddingY:r=e,random:o=Math.random}=t;return(s,l)=>{const{encode:u,scale:d}=l,{x:h,y:p}=d,[v]=yr(u,"x"),[m]=yr(u,"y"),b=hS(v,h,n),_=hS(m,p,r),S=s.map(()=>pS(o(),..._)),O=s.map(()=>pS(o(),...b));return[s,Je({scale:{x:{padding:.5},y:{padding:.5}}},l,{encode:{dy:Lr(S),dx:Lr(O)}})]}};cR.props={};const lR=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,o)=>{const{encode:s,scale:l}=o,{x:u}=l,[d]=yr(s,"x"),h=hS(d,u,e),p=r.map(()=>pS(n(),...h));return[r,Je({scale:{x:{padding:.5}}},o,{encode:{dx:Lr(p)}})]}};lR.props={};const uR=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,o)=>{const{encode:s,scale:l}=o,{y:u}=l,[d]=yr(s,"y"),h=hS(d,u,e),p=r.map(()=>pS(n(),...h));return[r,Je({scale:{y:{padding:.5}}},o,{encode:{dy:Lr(p)}})]}};uR.props={};var sZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const fR=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:o}=r,{x:s}=o,l=sZ(o,["x"]),u=Object.entries(l).filter(([m])=>m.startsWith("y")).map(([m])=>[m,yr(o,m)[0]]),d=u.map(([m])=>[m,new Array(n.length)]),h=yu(e,n,r),p=new Array(h.length);for(let m=0;m<h.length;m++){const _=h[m].flatMap(E=>u.map(([,A])=>+A[E])),[S,O]=ts(_);p[m]=(S+O)/2}const v=Math.max(...p);for(let m=0;m<h.length;m++){const b=v-p[m],_=h[m];for(const S of _)for(let O=0;O<u.length;O++){const[,E]=u[O],[,A]=d[O];A[S]=+E[S]+b}}return[n,Je({},r,{encode:Object.fromEntries(d.map(([m,b])=>[m,Lr(b,yr(o,m)[1])]))})]}};fR.props={};const dR=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:o}=r,[s]=yr(o,"y"),[l,u]=yr(o,"y1"),d=yu(e,n,r),h=new Array(n.length);for(const p of d){const v=p.map(m=>+s[m]);for(let m=0;m<p.length;m++){const b=p[m],_=Math.max(...v.filter((S,O)=>O!==m));h[b]=+s[b]>_?_:s[b]}}return[n,Je({},r,{encode:{y1:Lr(h,u)}})]}};dR.props={};const hR=t=>{const{groupBy:e=["x"],reducer:n=(l,u)=>u[l[0]],orderBy:r=null,reverse:o=!1,duration:s}=t;return(l,u)=>{const{encode:d}=u,p=(Array.isArray(e)?e:[e]).map(O=>[O,yr(d,O)[0]]);if(p.length===0)return[l,u];let v=[l];for(const[,O]of p){const E=[];for(const A of v){const M=Array.from($r(A,L=>O[L]).values());E.push(...M)}v=E}if(r){const[O]=yr(d,r);O&&v.sort((E,A)=>n(E,O)-n(A,O)),o&&v.reverse()}const m=(s||3e3)/v.length,[b]=s?[nc(l,m)]:op(d,"enterDuration",nc(l,m)),[_]=op(d,"enterDelay",nc(l,0)),S=new Array(l.length);for(let O=0,E=0;O<v.length;O++){const A=v[O],M=kr(A,L=>+b[L]);for(const L of A)S[L]=+_[L]+E;E+=M}return[l,Je({},u,{encode:{enterDuration:ip(b),enterDelay:ip(S)}})]}};hR.props={};var cZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function lZ(t){return typeof t=="function"?t:{min:(n,r)=>ra(n,o=>r[+o]),max:(n,r)=>kr(n,o=>r[+o]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>Xc(n,o=>r[+o]),median:(n,r)=>hL(n,o=>r[+o]),sum:(n,r)=>Go(n,o=>r[+o]),deviation:(n,r)=>rR(n,o=>r[+o])}[t]||kr}const pR=(t={})=>{const{groupBy:e="x",basis:n="max"}=t;return(r,o)=>{const{encode:s,tooltip:l}=o,{x:u}=s,d=cZ(s,["x"]),h=Object.entries(d).filter(([S])=>S.startsWith("y")).map(([S])=>[S,yr(s,S)[0]]),[,p]=h.find(([S])=>S==="y"),v=h.map(([S])=>[S,new Array(r.length)]),m=yu(e,r,o),b=lZ(n);for(const S of m){const O=b(S,p);for(const E of S)for(let A=0;A<h.length;A++){const[,M]=h[A],[,L]=v[A];L[E]=+M[E]/O}}const _=$a(l)||(l==null?void 0:l.items)&&(l==null?void 0:l.items.length)!==0;return[r,Je({},o,Object.assign({encode:Object.fromEntries(v.map(([S,O])=>[S,Lr(O,yr(s,S)[1])]))},!_&&s.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};pR.props={};function gR(t,e){return[t[0]]}function uZ(t,e){const n=t.length-1;return[t[n]]}function fZ(t,e){const n=Pc(t,r=>e[r]);return[t[n]]}function dZ(t,e){const n=Vf(t,r=>e[r]);return[t[n]]}function hZ(t){return typeof t=="function"?t:{first:gR,last:uZ,max:fZ,min:dZ}[t]||gR}const gS=(t={})=>{const{groupBy:e="series",channel:n,selector:r}=t;return(o,s)=>{const{encode:l}=s,u=yu(e,o,s),[d]=yr(l,n),h=hZ(r);return[u.flatMap(p=>h(p,d)),s]}};gS.props={};var pZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const vR=(t={})=>{const{selector:e}=t,n=pZ(t,["selector"]);return gS(Object.assign({channel:"x",selector:e},n))};vR.props={};var gZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const mR=(t={})=>{const{selector:e}=t,n=gZ(t,["selector"]);return gS(Object.assign({channel:"y",selector:e},n))};mR.props={};var vZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Im=(t={})=>{const{channels:e=["x","y"]}=t,n=vZ(t,["channels"]),r=(o,s)=>yu(e,o,s);return pL(Object.assign(Object.assign({},n),{groupBy:r}))};Im.props={};const yR=(t={})=>Im(Object.assign(Object.assign({},t),{channels:["x","color","series"]}));yR.props={};const bR=(t={})=>Im(Object.assign(Object.assign({},t),{channels:["y","color","series"]}));bR.props={};const _R=(t={})=>Im(Object.assign(Object.assign({},t),{channels:["color"]}));_R.props={};function mZ(t,e,n){return(e.length!==2?va(Qp(t,e,n),([r,o],[s,l])=>si(o,l)||si(r,s)):va($r(t,n),([r,o],[s,l])=>e(o,l)||si(r,s))).map(([r])=>r)}function yZ(t,e,n){const{by:r=t,reducer:o="max"}=e,[s]=yr(n,r);if(typeof o=="function")return l=>o(l,s);if(o==="max")return l=>kr(l,u=>+s[u]);if(o==="min")return l=>ra(l,u=>+s[u]);if(o==="sum")return l=>Go(l,u=>+s[u]);if(o==="median")return l=>hL(l,u=>+s[u]);if(o==="mean")return l=>Xc(l,u=>+s[u]);if(o==="first")return l=>s[l[0]];if(o==="last")return l=>s[l[l.length-1]];throw new Error(`Unknown reducer: ${o}`)}function bZ(t,e,n){if(!Array.isArray(n))return t;const r=new Set(n);return t.filter(o=>r.has(e[o]))}const vS=(t={})=>(e,n)=>{const{reverse:r,slice:o,channel:s,by:l,ordinal:u=!0,reducer:d}=t,{encode:h,scale:p={}}=n,v=p[s].domain,[m]=yr(h,l!=null?l:s),[b]=yr(h,s),_=yZ(s,{by:l,reducer:d},h),S=bZ(e,b,v),O=mZ(S,_,L=>b[L]),E=u?e:va(e,L=>m[L]);r&&(!u&&E.reverse(),O.reverse());const A=typeof o=="number"?[0,o]:o,M=o?O.slice(...A):O;return[E,Je(n,{scale:{[s]:{domain:M}}})]};vS.props={};const xR=(t={})=>vS(Object.assign(Object.assign({},t),{channel:"x"}));xR.props={};const SR=(t={})=>vS(Object.assign(Object.assign({},t),{channel:"y"}));SR.props={};const OR=(t={})=>vS(Object.assign(Object.assign({},t),{channel:"color"}));OR.props={};function _Z(t,e){return typeof e=="string"?t.map(n=>n[e]):t.map(e)}function xZ(t,e){if(typeof t=="function")return n=>t(n,e);if(t==="sum")return n=>Go(n,r=>+e[r]);throw new Error(`Unknown reducer: ${t}`)}const ER=(t={})=>{const{field:e,channel:n="y",reducer:r="sum"}=t;return(o,s)=>{const{data:l,encode:u}=s,[d]=yr(u,"x"),h=e?_Z(l,e):yr(u,n)[0],p=xZ(r,h),v=_d(o,p,m=>d[m]).map(m=>m[1]);return[o,Je({},s,{scale:{x:{flex:v}}})]}};ER.props={};function SZ(t){const{padding:e=0,direction:n="col"}=t;return(r,o,s)=>{const l=r.length;if(l===0)return[];const{innerWidth:u,innerHeight:d}=s,h=d/u;let p=Math.ceil(Math.sqrt(o/h)),v=u/p,m=Math.ceil(o/p),b=m*v;for(;b>d;)p=p+1,v=u/p,m=Math.ceil(o/p),b=m*v;const _=d-m*v,S=m<=1?0:_/(m-1),[O,E]=m<=1?[(u-l*v)/(l-1),(d-v)/2]:[0,0];return r.map((A,M)=>{const[L,I,R,N]=pg(A),Z=n==="col"?M%p:Math.floor(M/m),W=n==="col"?Math.floor(M/p):M%m,it=Z*v,tt=(m-W-1)*v+_,pt=(v-e)/R,K=(v-e)/N,lt=it-L+O*Z+1/2*e,ft=tt-I-S*W-E+1/2*e;return`translate(${lt}, ${ft}) scale(${pt}, ${K})`})}}const wR=t=>(e,n)=>[e,Je({},n,{modifier:SZ(t),axis:!1})];wR.props={};function OZ(t,e,n,r){const o=t.length;if(r>=o||r===0)return t;const s=b=>e[t[b]]*1,l=b=>n[t[b]]*1,u=[],d=(o-2)/(r-2);let h=0,p,v,m;u.push(h);for(let b=0;b<r-2;b++){let _=0,S=0,O=Math.floor((b+1)*d)+1,E=Math.floor((b+2)*d)+1;E=Math.min(E,o);const A=E-O;for(;O<E;O++)_+=s(O),S+=l(O);_/=A,S/=A;let M=Math.floor((b+0)*d)+1;const L=Math.floor((b+1)*d)+1,I=[s(h),l(h)];for(p=v=-1;M<L;M++)v=Math.abs((I[0]-_)*(s(M)-I[1])-(I[0]-l(M))*(S-I[0]))*.5,v>p&&(p=v,m=M);u.push(m),h=m}return u.push(o-1),u.map(b=>t[b])}function EZ(t){if(typeof t=="function")return t;if(t==="lttb")return OZ;const e={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,o,s)=>[r[Vf(r,l=>s[l])]],max:(r,o,s)=>[r[Pc(r,l=>s[l])]],median:(r,o,s)=>[r[$U(r,l=>s[l])]]},n=e[t]||e.median;return(r,o,s,l)=>{const u=Math.max(1,Math.floor(r.length/l));return wZ(r,u).flatMap(h=>n(h,o,s))}}function wZ(t,e){const n=t.length,r=[];let o=0;for(;o<n;)r.push(t.slice(o,o+=e));return r}const AR=(t={})=>{const{strategy:e="median",thresholds:n=2e3,groupBy:r=["series","color"]}=t,o=EZ(e);return(s,l)=>{const{encode:u}=l,d=yu(r,s,l),[h]=yr(u,"x"),[p]=yr(u,"y");return[d.flatMap(v=>o(v,h,p,n)),l]}};AR.props={};function AZ(t){return typeof t=="object"?[t.value,t.ordinal]:[t,!0]}function TZ(t){var e;const{encode:n}=t,r=Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),{y:Object.assign(Object.assign({},t.encode.y),{value:[]})})}),o=(e=n==null?void 0:n.color)===null||e===void 0?void 0:e.field;if(!n||!o)return r;let s;for(const[l,u]of Object.entries(n))(l==="x"||l==="y")&&u.field===o&&(s=Object.assign(Object.assign({},s),{[l]:Object.assign(Object.assign({},u),{value:[]})}));return s?Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),s)}):r}const TR=(t={})=>(e,n)=>{const{encode:r,data:o}=n,s=Object.entries(t).map(([p,v])=>{const[m]=yr(r,p);if(!m)return null;const[b,_=!0]=AZ(v);if(typeof b=="function")return S=>b(m[S]);if(_){const S=Array.isArray(b)?b:[b];return S.length===0?null:O=>S.includes(m[O])}else{const[S,O]=b;return E=>m[E]>=S&&m[E]<=O}}).filter(Zr),l=p=>s.every(v=>v(p)),u=e.filter(l),d=u.map((p,v)=>v);if(s.length===0){const p=TZ(n);return[e,p]}const h=Object.entries(r).map(([p,v])=>[p,Object.assign(Object.assign({},v),{value:d.map(m=>v.value[u[m]]).filter(m=>m!==void 0)})]);return[d,Je({},n,{encode:Object.fromEntries(h),data:u.map(p=>o[p])})]};TR.props={};var CR={},vL={},mL=34,km=10,yL=13;function MR(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function CZ(t,e){var n=MR(t);return function(r,o){return e(n(r),o,t)}}function LR(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var o in r)o in e||n.push(e[o]=o)}),n}function la(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function MZ(t){return t<0?"-"+la(-t,6):t>9999?"+"+la(t,6):la(t,4)}function LZ(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":MZ(t.getUTCFullYear(),4)+"-"+la(t.getUTCMonth()+1,2)+"-"+la(t.getUTCDate(),2)+(o?"T"+la(e,2)+":"+la(n,2)+":"+la(r,2)+"."+la(o,3)+"Z":r?"T"+la(e,2)+":"+la(n,2)+":"+la(r,2)+"Z":n||e?"T"+la(e,2)+":"+la(n,2)+"Z":"")}function PZ(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(v,m){var b,_,S=o(v,function(O,E){if(b)return b(O,E-1);_=O,b=m?CZ(O,m):MR(O)});return S.columns=_||[],S}function o(v,m){var b=[],_=v.length,S=0,O=0,E,A=_<=0,M=!1;v.charCodeAt(_-1)===km&&--_,v.charCodeAt(_-1)===yL&&--_;function L(){if(A)return vL;if(M)return M=!1,CR;var R,N=S,Z;if(v.charCodeAt(N)===mL){for(;S++<_&&v.charCodeAt(S)!==mL||v.charCodeAt(++S)===mL;);return(R=S)>=_?A=!0:(Z=v.charCodeAt(S++))===km?M=!0:Z===yL&&(M=!0,v.charCodeAt(S)===km&&++S),v.slice(N+1,R-1).replace(/""/g,'"')}for(;S<_;){if((Z=v.charCodeAt(R=S++))===km)M=!0;else if(Z===yL)M=!0,v.charCodeAt(S)===km&&++S;else if(Z!==n)continue;return v.slice(N,R)}return A=!0,v.slice(N,_)}for(;(E=L())!==vL;){for(var I=[];E!==CR&&E!==vL;)I.push(E),E=L();m&&(I=m(I,O++))==null||b.push(I)}return b}function s(v,m){return v.map(function(b){return m.map(function(_){return p(b[_])}).join(t)})}function l(v,m){return m==null&&(m=LR(v)),[m.map(p).join(t)].concat(s(v,m)).join(`
`)}function u(v,m){return m==null&&(m=LR(v)),s(v,m).join(`
`)}function d(v){return v.map(h).join(`
`)}function h(v){return v.map(p).join(t)}function p(v){return v==null?"":v instanceof Date?LZ(v):e.test(v+="")?'"'+v.replace(/"/g,'""')+'"':v}return{parse:r,parseRows:o,format:l,formatBody:u,formatRows:d,formatRow:h,formatValue:p}}function IZ(t){for(var e in t){var n=t[e].trim(),r,o;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(o=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))kZ&&o[4]&&!o[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const kZ=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var RZ=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const PR=t=>{const{value:e,format:n=e.split(".").pop(),delimiter:r=",",autoType:o=!0}=t;return()=>RZ(void 0,void 0,void 0,function*(){const s=yield fetch(e);if(n==="csv"){const l=yield s.text();return PZ(r).parse(l,o?IZ:pc)}if(n==="json")return yield s.json();throw new Error(`Unknown format: ${n}.`)})};PR.props={};const IR=t=>{const{value:e}=t;return()=>e};IR.props={};function DZ(t,e){return t.map(n=>{if(Array.isArray(n)){const[r,o=e]=n;return[r,o]}return[n,e]})}const kR=t=>{const{fields:e=[]}=t,n=DZ(e,!0);return r=>{const o=(s,l)=>n.reduce((u,[d,h=!0])=>u!==0?u:h?s[d]<l[d]?-1:+(s[d]!==l[d]):s[d]>l[d]?-1:+(s[d]!==l[d]),0);return[...r].sort(o)}};kR.props={};function CX(t){return t!=null&&!Number.isNaN(t)}const RR=t=>{const{callback:e}=t;return n=>Array.isArray(n)?[...n].sort(e):n};RR.props={};function NZ(t){return t!=null&&!Number.isNaN(t)}const DR=t=>{const{callback:e=NZ}=t;return n=>n.filter(e)};DR.props={};function FZ(t,e=[]){return e.reduce((n,r)=>(r in t&&(n[r]=t[r]),n),{})}const NR=t=>{const{fields:e}=t;return n=>n.map(r=>FZ(r,e))};NR.props={};function BZ(t){return Object.keys(t).length===0}const FR=t=>e=>{if(!t||BZ(t))return e;const n=r=>Object.entries(r).reduce((o,[s,l])=>(o[t[s]||s]=l,o),{});return e.map(n)};FR.props={};function jZ(t){return!t||Object.keys(t).length===0}const BR=t=>{const{fields:e,key:n="key",value:r="value"}=t;return o=>jZ(e)?o:o.flatMap(s=>e.map(l=>Object.assign(Object.assign({},s),{[n]:l,[r]:s[l]})))};BR.props={};const jR=t=>{const{start:e,end:n}=t;return r=>r.slice(e,n)};jR.props={};const zR=t=>{const{callback:e=pc}=t;return n=>e(n)};zR.props={};const UR=t=>{const{callback:e=pc}=t;return n=>Array.isArray(n)?n.map(e):n};UR.props={};function ZR(t){return typeof t=="string"?e=>e[t]:t}const HR=t=>{const{join:e,on:n,select:r=[],as:o=r,unknown:s=NaN}=t,[l,u]=n,d=ZR(u),h=ZR(l),p=Qp(e,([v])=>v,v=>d(v));return v=>v.map(m=>{const b=p.get(h(m));return Object.assign(Object.assign({},m),r.reduce((_,S,O)=>(_[o[O]]=b?b[S]:s,_),{}))})};HR.props={};var zZ=D(53843),UZ=D.n(zZ);function MX(t){return t!=null&&!Number.isNaN(t)}const VR=t=>{const{field:e,groupBy:n,as:r=["y","size"],min:o,max:s,size:l=10,width:u}=t,[d,h]=r;return p=>Array.from($r(p,m=>n.map(b=>m[b]).join("-")).values()).map(m=>{const b=UZ().create(m.map(O=>O[e]),{min:o,max:s,size:l,width:u}),_=b.map(O=>O.x),S=b.map(O=>O.y);return Object.assign(Object.assign({},m[0]),{[d]:_,[h]:S})})};VR.props={};const WR=()=>t=>(console.log("G2 data section:",t),t);WR.props={};var ZZ=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};function HZ(t,e){return{set(n,r,o){if(e[n]===void 0)return this;const s=r?r.call(null,e[n]):e[n];return o?o.call(null,s):typeof t[n]=="function"?t[n](s):t[n]=s,this},setAsync(n,r,o){return ZZ(this,void 0,void 0,function*(){if(e[n]===void 0)return this;const s=r?yield r.call(null,e[n]):e[n];return o?o.call(null,s):typeof t[n]=="function"?t[n](s):t[n]=s,this})}}}const bL=Math.PI/180,Rm=64,mS=2048;function VZ(t){return t.text}function WZ(){return"serif"}function GR(){return"normal"}function GZ(t){return t.value}function $Z(){return~~(Math.random()*2)*90}function YZ(){return 1}function XZ(){}function qZ(t,e,n,r){if(e.sprite)return;const o=t.context,s=t.ratio;o.clearRect(0,0,(Rm<<5)/s,mS/s);let l=0,u=0,d=0;const h=n.length;for(--r;++r<h;){e=n[r],o.save(),o.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font;let m=o.measureText(e.text+"m").width*s,b=e.size<<1;if(e.rotate){const _=Math.sin(e.rotate*bL),S=Math.cos(e.rotate*bL),O=m*S,E=m*_,A=b*S,M=b*_;m=Math.max(Math.abs(O+M),Math.abs(O-M))+31>>5<<5,b=~~Math.max(Math.abs(E+A),Math.abs(E-A))}else m=m+31>>5<<5;if(b>d&&(d=b),l+m>=Rm<<5&&(l=0,u+=d,d=0),u+b>=mS)break;o.translate((l+(m>>1))/s,(u+(b>>1))/s),e.rotate&&o.rotate(e.rotate*bL),o.fillText(e.text,0,0),e.padding&&(o.lineWidth=2*e.padding,o.strokeText(e.text,0,0)),o.restore(),e.width=m,e.height=b,e.xoff=l,e.yoff=u,e.x1=m>>1,e.y1=b>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,l+=m}const p=o.getImageData(0,0,(Rm<<5)/s,mS/s).data,v=[];for(;--r>=0;){if(e=n[r],!e.hasText)continue;const m=e.width,b=m>>5;let _=e.y1-e.y0;for(let E=0;E<_*b;E++)v[E]=0;if(l=e.xoff,l==null)return;u=e.yoff;let S=0,O=-1;for(let E=0;E<_;E++){for(let A=0;A<m;A++){const M=b*E+(A>>5),L=p[(u+E)*(Rm<<5)+(l+A)<<2]?1<<31-A%32:0;v[M]|=L,S|=L}S?O=E:(e.y0++,_--,E--,u++)}e.y1=e.y0+O,e.sprite=v.slice(0,(e.y1-e.y0)*b)}}function KZ(t,e,n){n>>=5;const r=t.sprite,o=t.width>>5,s=t.x-(o<<4),l=s&127,u=32-l,d=t.y1-t.y0;let h=(t.y+t.y0)*n+(s>>5),p;for(let v=0;v<d;v++){p=0;for(let m=0;m<=o;m++)if((p<<u|(m<o?(p=r[v*o+m])>>>l:0))&e[h+m])return!0;h+=n}return!1}function QZ(t,e){const n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function JZ(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function $R(t){const e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function tH(t){const n=4*t[0]/t[1];let r=0,o=0;return function(s){const l=s<0?-1:1;switch(Math.sqrt(1+4*l*s)-l&3){case 0:r+=n;break;case 1:o+=4;break;case 2:r-=n;break;default:o-=4;break}return[r,o]}}function YR(t){const e=[];let n=-1;for(;++n<t;)e[n]=0;return e}function eH(){return document.createElement("canvas")}function al(t){return typeof t=="function"?t:function(){return t}}const nH={archimedean:$R,rectangular:tH};function rH(){let t=[256,256],e=VZ,n=WZ,r=GZ,o=GR,s=$Z,l=YZ,u=$R,d=Math.random,h=XZ,p=[],v=null,m=1/0,b=eH;const _=GR,S={};S.start=function(){const[A,M]=t,L=O(b()),I=S.board?S.board:YR((t[0]>>5)*t[1]),R=p.length,N=[],Z=p.map(function(pt,K,lt){return pt.text=e.call(this,pt,K,lt),pt.font=n.call(this,pt,K,lt),pt.style=_.call(this,pt,K,lt),pt.weight=o.call(this,pt,K,lt),pt.rotate=s.call(this,pt,K,lt),pt.size=~~r.call(this,pt,K,lt),pt.padding=l.call(this,pt,K,lt),pt}).sort(function(pt,K){return K.size-pt.size});let W=-1,it=S.board?[{x:0,y:0},{x:A,y:M}]:void 0;v&&clearInterval(v),v=setInterval(tt,0),tt();function tt(){const pt=Date.now();for(;Date.now()-pt<m&&++W<R;){const K=Z[W];K.x=A*(d()+.5)>>1,K.y=M*(d()+.5)>>1,qZ(L,K,Z,W),K.hasText&&E(I,K,it)&&(h.call(null,"word",{cloud:S,word:K}),N.push(K),it?S.hasImage||QZ(it,K):it=[{x:K.x+K.x0,y:K.y+K.y0},{x:K.x+K.x1,y:K.y+K.y1}],K.x-=t[0]>>1,K.y-=t[1]>>1)}S._tags=N,S._bounds=it,W>=R&&(S.stop(),h.call(null,"end",{cloud:S,words:N,bounds:it}))}return S},S.stop=function(){return v&&(clearInterval(v),v=null),S};function O(A){A.width=A.height=1;const M=Math.sqrt(A.getContext("2d").getImageData(0,0,1,1).data.length>>2);A.width=(Rm<<5)/M,A.height=mS/M;const L=A.getContext("2d");return L.fillStyle=L.strokeStyle="red",L.textAlign="center",L.textBaseline="middle",{context:L,ratio:M}}function E(A,M,L){const I=M.x,R=M.y,N=Math.sqrt(t[0]*t[0]+t[1]*t[1]),Z=u(t),W=d()<.5?1:-1;let it,tt=-W,pt,K;for(;(it=Z(tt+=W))&&(pt=~~it[0],K=~~it[1],!(Math.min(Math.abs(pt),Math.abs(K))>=N));)if(M.x=I+pt,M.y=R+K,!(M.x+M.x0<0||M.y+M.y0<0||M.x+M.x1>t[0]||M.y+M.y1>t[1])&&(!L||!KZ(M,A,t[0]))&&(!L||JZ(M,L))){const lt=M.sprite,ft=M.width>>5,vt=t[0]>>5,It=M.x-(ft<<4),_t=It&127,Lt=32-_t,$t=M.y1-M.y0;let he,le=(M.y+M.y0)*vt+(It>>5);for(let Ee=0;Ee<$t;Ee++){he=0;for(let Ue=0;Ue<=ft;Ue++)A[le+Ue]|=he<<Lt|(Ue<ft?(he=lt[Ee*ft+Ue])>>>_t:0);le+=vt}return delete M.sprite,!0}return!1}return S.createMask=A=>{const M=document.createElement("canvas"),[L,I]=t;if(!L||!I)return;const R=L>>5,N=YR((L>>5)*I);M.width=L,M.height=I;const Z=M.getContext("2d");Z.drawImage(A,0,0,A.width,A.height,0,0,L,I);const W=Z.getImageData(0,0,L,I).data;for(let it=0;it<I;it++)for(let tt=0;tt<L;tt++){const pt=R*it+(tt>>5),K=it*L+tt<<2,ft=W[K]>=250&&W[K+1]>=250&&W[K+2]>=250?1<<31-tt%32:0;N[pt]|=ft}S.board=N,S.hasImage=!0},S.timeInterval=function(A){m=A==null?1/0:A},S.words=function(A){p=A},S.size=function(A=[]){t=[+A[0],+A[1]]},S.text=function(A){e=al(A)},S.font=function(A){n=al(A)},S.fontWeight=function(A){o=al(A)},S.rotate=function(A){s=al(A)},S.canvas=function(A){b=al(A)},S.spiral=function(A){u=nH[A]||A},S.fontSize=function(A){r=al(A)},S.padding=function(A){l=al(A)},S.random=function(A){d=al(A)},S.on=function(A){h=al(A)},S}var iH=function(t,e,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{h(r.next(p))}catch(v){l(v)}}function d(p){try{h(r.throw(p))}catch(v){l(v)}}function h(p){p.done?s(p.value):o(p.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},oH=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const aH={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function sH(t){return new Promise((e,n)=>{if(t instanceof HTMLImageElement){e(t);return}if(typeof t=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=()=>e(r),r.onerror=()=>{console.error(`'image ${t} load failed !!!'`),n()};return}n()})}function cH(t,e){if(typeof t=="function")return t;if(Array.isArray(t)){const[n,r]=t;if(!e)return()=>(r+n)/2;const[o,s]=e;return s===o?()=>(r+n)/2:({value:l})=>(r-n)/(s-o)*(l-o)+n}return()=>t}const XR=(t,e)=>n=>iH(void 0,void 0,void 0,function*(){const r=Object.assign({},aH,t,{canvas:e.createCanvas}),o=rH();yield HZ(o,r).set("fontSize",A=>{const M=n.map(L=>L.value);return cH(A,[ra(M),kr(M)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",sH,o.createMask),o.words([...n]);const s=o.start(),[l,u]=r.size,d=[{x:0,y:0},{x:l,y:u}],{_bounds:h=d,_tags:p,hasImage:v}=s,m=p.map(A=>{var{x:M,y:L,font:I}=A,R=oH(A,["x","y","font"]);return Object.assign(Object.assign({},R),{x:M+l/2,y:L+u/2,fontFamily:I})}),[{x:b,y:_},{x:S,y:O}]=h,E={text:"",value:0,opacity:0,fontSize:0};return m.push(Object.assign(Object.assign({},E),{x:v?0:b,y:v?0:_}),Object.assign(Object.assign({},E),{x:v?l:S,y:v?u:O})),m});XR.props={};function lH(t,e){if(e<0||e>1)throw new Error("alpha must be between 0 and 1.");if(t.length===0)return[];let n=t[0];const r=[];for(const o of t){if(o==null){r.push(o),console.warn("EMA\uFF1AThe value is null or undefined",t);continue}n==null&&(n=o);const s=n*e+(1-e)*o;r.push(s),n=s}return r}const qR=t=>{const{field:e="y",alpha:n=.6,as:r=e}=t;return o=>{const s=o.map(u=>u[e]),l=lH(s,n);return o.map((u,d)=>Object.assign(Object.assign({},u),{[r]:l[d]}))}};qR.props={};const KR=.01;function Dm(t){const{min:e,max:n}=t;return[[e[0],e[1]],[n[0],n[1]]]}function QR(t,e,n=KR){const[r,o]=t,[s,l]=e;return r>=s[0]-n&&r<=l[0]+n&&o>=s[1]-n&&o<=l[1]+n}function JR(t,e,n=KR){const[r,o]=t;return!(QR(r,e,n)&&QR(o,e,n))}function uH(t,e){const[n,r]=t,[o,s]=e;return n[0]<s[0]&&r[0]>o[0]&&n[1]<s[1]&&r[1]>o[1]}const fH=t=>{const{priority:e}=t;return n=>{const r=[];return e&&n.sort(e),n.forEach(o=>{kl(o);const s=o.getLocalBounds();r.some(u=>uH(Dm(s),Dm(u.getLocalBounds())))?Ki(o):r.push(o)}),n}};function dH([t,e],[n,r]){return r>t&&e>n}function yS(){const t=new Map;return[r=>t.get(r),(r,o)=>t.set(r,o)]}function hH(t){const e=t.cloneNode(!0),n=e.getElementById("connector");n&&e.removeChild(n);const{min:r,max:o}=e.getRenderBounds();return e.destroy(),{min:r,max:o}}const pH=t=>{const{maxIterations:e=10,maxError:n=.1,padding:r=1}=t;return o=>{const s=o.length;if(s<=1)return o;const[l,u]=yS(),[d,h]=yS(),[p,v]=yS(),[m,b]=yS();for(const _ of o){const{min:S,max:O}=hH(_),[E,A]=S,[M,L]=O;u(_,A),h(_,A),v(_,L-A),b(_,[E,M])}for(let _=0;_<e;_++){o.sort((O,E)=>si(d(O),d(E)));let S=0;for(let O=0;O<s-1;O++){const E=o[O];let A=O+1,M;for(;(M=o[A])&&!dH(m(E),m(M));)A+=1;if(M){const L=d(E),I=p(E),R=d(M),N=R-(L+I);if(N<r){const Z=(r-N)/2;S=Math.max(S,Z),h(E,L-Z),h(M,R+Z)}}}if(S<n)break}for(const _ of o)_.style.y+=d(_)-l(_);return o}},gH=()=>t=>(t.forEach(e=>{kl(e);const n=e.attr("bounds"),r=e.getLocalBounds();JR(Dm(r),n)&&Ki(e)}),t);function tD(t){return typeof t=="object"?t:(0,V.lu)(t)}function _L(t){let e=t/255;return e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),e}function eD(t,e,n){return .2126*_L(t)+.7152*_L(e)+.0722*_L(n)}function nD(t,e){if(!t||!e||t===e)return 1;const{r:n,g:r,b:o}=t,{r:s,g:l,b:u}=e,d=eD(n,r,o),h=eD(s,l,u);return(Math.max(d,h)+.05)/(Math.min(d,h)+.05)}function rD(t,e){const n=Pc(e,r=>nD(t,tD(r)));return e[n]}const vH=t=>{const{threshold:e=4.5,palette:n=["#000","#fff"]}=t;return r=>(r.forEach(o=>{const s=o.attr("dependentElement").parsedStyle.fill,l=o.parsedStyle.fill;nD(l,s)<e&&o.attr("fill",rD(s,n))}),r)};function iD(t){var e;const n=t.getAnimations();if(!n||n.length===0)return _f(t);const r=t.cloneNode(!0);r.style.visibility="hidden",n.forEach(s=>{const l=s.effect.getKeyframes();l&&l.length>0&&r.attr(l[l.length-1])}),(e=t.parentNode)===null||e===void 0||e.appendChild(r);const o=_f(r);return r.destroy(),o}const mH=t=>{const{palette:e=["#000","#fff"],threshold:n=2}=t;return r=>(r.forEach(o=>{var s,l;const u=o.attr("dependentElement"),d=(l=(s=o.attributes.fill)!==null&&s!==void 0?s:o.parsedStyle.fill)!==null&&l!==void 0?l:"#fff",h=Dm(iD(o)),p=Dm(iD(u));if(JR(h,p,n)){const v=rD(tD(d),e);o.attr("stroke",v)}else o.removeAttribute("stroke")}),r)},yH=(t,e)=>{const[[n,r],[o,s]]=e,[[l,u],[d,h]]=t;let p=0,v=0;return l<n?p=n-l:d>o&&(p=o-d),u<r?v=r-u:h>s&&(v=s-h),[p,v]},bH=(t,e)=>({min:[Math.min(t.min[0],e.min[0]),Math.min(t.min[1],e.min[1])],max:[Math.max(t.max[0],e.max[0]),Math.max(t.max[1],e.max[1])]}),_H=(t={})=>(e,{canvas:n,layout:r})=>{const{bounds:o="view",offsetX:s=0,offsetY:l=0}=t,d=(()=>{if(o==="main"){const{x:h=0,y:p=0,width:v=0,height:m=0,marginLeft:b=0,marginRight:_=0,marginTop:S=0,marginBottom:O=0,paddingLeft:E=0,paddingRight:A=0,paddingTop:M=0,paddingBottom:L=0}=r;return[[h+b+E+s,p+S+M+l],[h+v-_-A-s,p+m-O-L-l]]}else{const{x:h=0,y:p=0,width:v=0,height:m=0}=r;return[[h+s,p+l],[h+v-s,p+m-l]]}})();return e.forEach(h=>{kl(h);const{max:p,min:v}=bH(h.getRenderBounds(),h.getBounds()),[m,b]=p,[_,S]=v,O=yH([[_,S],[m,b]],d);h.style.connector&&h.style.connectorPoints&&(h.style.connectorPoints[0][0]-=O[0],h.style.connectorPoints[0][1]-=O[1]),h.style.x+=O[0],h.style.y+=O[1]}),e};function xH(){return{"data.fetch":PR,"data.inline":IR,"data.sortBy":kR,"data.sort":RR,"data.filter":DR,"data.pick":NR,"data.rename":FR,"data.fold":BR,"data.slice":jR,"data.custom":zR,"data.map":UR,"data.join":HR,"data.kde":VR,"data.log":WR,"data.wordCloud":XR,"data.ema":qR,"transform.stackY":eR,"transform.binX":aR,"transform.bin":gL,"transform.dodgeX":sR,"transform.jitter":cR,"transform.jitterX":lR,"transform.jitterY":uR,"transform.symmetryY":fR,"transform.diffY":dR,"transform.stackEnter":hR,"transform.normalizeY":pR,"transform.select":gS,"transform.selectX":vR,"transform.selectY":mR,"transform.groupX":yR,"transform.groupY":bR,"transform.groupColor":_R,"transform.group":Im,"transform.sortX":xR,"transform.sortY":SR,"transform.sortColor":OR,"transform.flexX":ER,"transform.pack":wR,"transform.sample":AR,"transform.filter":TR,"coordinate.cartesian":Wv,"coordinate.polar":Bu,"coordinate.transpose":cu,"coordinate.theta":h3,"coordinate.parallel":Gv,"coordinate.fisheye":Gf,"coordinate.radial":Rd,"coordinate.radar":p3,"coordinate.helix":g3,"encode.constant":_r,"encode.field":$v,"encode.transform":Yv,"encode.column":v3,"mark.interval":S3,"mark.rect":pu,"mark.line":Z3,"mark.point":kn,"mark.text":V3,"mark.cell":G3,"mark.area":oc,"mark.link":g4,"mark.image":E7,"mark.polygon":M7,"mark.box":k7,"mark.vector":D7,"mark.lineX":j7,"mark.lineY":Z7,"mark.connector":G7,"mark.range":X7,"mark.rangeX":Q7,"mark.rangeY":eI,"mark.path":aI,"mark.shape":lI,"mark.density":dI,"mark.heatmap":gI,"mark.wordCloud":b4,"mark.beeswarm":LI,"palette.category10":PI,"palette.category20":II,"scale.linear":kI,"scale.ordinal":RI,"scale.band":DI,"scale.identity":NI,"scale.point":FI,"scale.time":o8,"scale.log":s8,"scale.pow":c8,"scale.sqrt":l8,"scale.threshold":u8,"scale.quantile":f8,"scale.quantize":d8,"scale.sequential":h8,"scale.constant":p8,"theme.classic":g8,"theme.classicDark":m8,"theme.academy":y8,"theme.light":k4,"theme.dark":v8,"component.axisX":b8,"component.axisY":_8,"component.legendCategory":D4,"component.legendContinuous":ns,"component.legends":w8,"component.title":T8,"component.sliderX":B8,"component.sliderY":j8,"component.scrollbarX":z8,"component.scrollbarY":U8,"animation.scaleInX":Z4,"animation.scaleOutX":pj,"animation.scaleInY":Z8,"animation.scaleOutY":gj,"animation.waveIn":H8,"animation.fadeIn":V8,"animation.fadeOut":W8,"animation.zoomIn":vj,"animation.zoomOut":mj,"animation.pathIn":G8,"animation.morphing":K8,"animation.growInX":Q8,"animation.growInY":J8,"interaction.elementHighlight":iS,"interaction.elementHighlightByX":tk,"interaction.elementHighlightByColor":ek,"interaction.elementSelect":oS,"interaction.elementSelectByX":nk,"interaction.elementSelectByColor":rk,"interaction.fisheye":kj,"interaction.chartIndex":ik,"interaction.tooltip":V2,"interaction.legendFilter":Xj,"interaction.legendHighlight":qj,"interaction.brushHighlight":aS,"interaction.brushXHighlight":nz,"interaction.brushYHighlight":rz,"interaction.brushAxisHighlight":dz,"interaction.brushFilter":Q4,"interaction.brushXFilter":vz,"interaction.brushYFilter":mz,"interaction.sliderFilter":wk,"interaction.sliderWheel":Ak,"interaction.scrollbarFilter":kz,"interaction.poptip":Mk,"interaction.treemapDrillDown":tU,"interaction.elementPointMove":aU,"composition.spaceLayer":Vk,"composition.spaceFlex":Wk,"composition.facetRect":Xk,"composition.repeatMatrix":bU,"composition.facetCircle":wU,"composition.timingKeyframe":Kk,"labelTransform.overlapHide":fH,"labelTransform.overlapDodgeY":pH,"labelTransform.overflowHide":gH,"labelTransform.contrastReverse":vH,"labelTransform.overflowStroke":mH,"labelTransform.exceedAdjust":_H}}var Nm=t=>t;function bS(t,e){t&&aD.hasOwnProperty(t.type)&&aD[t.type](t,e)}var oD={Feature:function(t,e){bS(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)bS(n[r].geometry,e)}},aD={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){xL(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)xL(n[r],e,0)},Polygon:function(t,e){sD(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)sD(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)bS(n[r],e)}};function xL(t,e,n){var r=-1,o=t.length-n,s;for(e.lineStart();++r<o;)s=t[r],e.point(s[0],s[1],s[2]);e.lineEnd()}function sD(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)xL(t[n],e,1);e.polygonEnd()}function yp(t,e){t&&oD.hasOwnProperty(t.type)?oD[t.type](t,e):bS(t,e)}class sl{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let o=0;o<this._n&&o<32;o++){const s=n[o],l=e+s,u=Math.abs(e)<Math.abs(s)?e-(l-s):s-(l-e);u&&(n[r++]=u),e=l}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,o,s,l=0;if(n>0){for(l=e[--n];n>0&&(r=l,o=e[--n],l=r+o,s=o-(l-r),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(o=s*2,r=l+o,o==r-l&&(l=r))}return l}}function LX(t,e){const n=new sl;if(e===void 0)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let o of t)(o=+e(o,++r,t))&&n.add(o)}return+n}function PX(t,e){const n=new sl;let r=-1;return Float64Array.from(t,e===void 0?o=>n.add(+o||0):o=>n.add(+e(o,++r,t)||0))}var tr=1e-6,cD=1e-12,br=Math.PI,Ni=br/2,lD=br/4,Sa=br*2,Co=180/br,Ci=br/180,jr=Math.abs,bp=Math.atan,cl=Math.atan2,pr=Math.cos,_S=Math.ceil,uD=Math.exp,IX=Math.floor,kX=Math.hypot,xS=Math.log,SL=Math.pow,sr=Math.sin,Ba=Math.sign||function(t){return t>0?1:t<0?-1:0},ua=Math.sqrt,OL=Math.tan;function fD(t){return t>1?0:t<-1?br:Math.acos(t)}function ja(t){return t>1?Ni:t<-1?-Ni:Math.asin(t)}function RX(t){return(t=sr(t/2))*t}function za(){}var EL=new sl,wL=new sl,dD,hD,AL,TL,_u={point:za,lineStart:za,lineEnd:za,polygonStart:function(){_u.lineStart=SH,_u.lineEnd=EH},polygonEnd:function(){_u.lineStart=_u.lineEnd=_u.point=za,EL.add(jr(wL)),wL=new sl},result:function(){var t=EL/2;return EL=new sl,t}};function SH(){_u.point=OH}function OH(t,e){_u.point=pD,dD=AL=t,hD=TL=e}function pD(t,e){wL.add(TL*t-AL*e),AL=t,TL=e}function EH(){pD(dD,hD)}var gD=_u,_p=1/0,SS=_p,Fm=-_p,OS=Fm,wH={point:AH,lineStart:za,lineEnd:za,polygonStart:za,polygonEnd:za,result:function(){var t=[[_p,SS],[Fm,OS]];return Fm=OS=-(SS=_p=1/0),t}};function AH(t,e){t<_p&&(_p=t),t>Fm&&(Fm=t),e<SS&&(SS=e),e>OS&&(OS=e)}var ES=wH,CL=0,ML=0,Bm=0,wS=0,AS=0,xp=0,LL=0,PL=0,jm=0,vD,mD,sc,cc,Ss={point:sd,lineStart:yD,lineEnd:bD,polygonStart:function(){Ss.lineStart=MH,Ss.lineEnd=LH},polygonEnd:function(){Ss.point=sd,Ss.lineStart=yD,Ss.lineEnd=bD},result:function(){var t=jm?[LL/jm,PL/jm]:xp?[wS/xp,AS/xp]:Bm?[CL/Bm,ML/Bm]:[NaN,NaN];return CL=ML=Bm=wS=AS=xp=LL=PL=jm=0,t}};function sd(t,e){CL+=t,ML+=e,++Bm}function yD(){Ss.point=TH}function TH(t,e){Ss.point=CH,sd(sc=t,cc=e)}function CH(t,e){var n=t-sc,r=e-cc,o=ua(n*n+r*r);wS+=o*(sc+t)/2,AS+=o*(cc+e)/2,xp+=o,sd(sc=t,cc=e)}function bD(){Ss.point=sd}function MH(){Ss.point=PH}function LH(){_D(vD,mD)}function PH(t,e){Ss.point=_D,sd(vD=sc=t,mD=cc=e)}function _D(t,e){var n=t-sc,r=e-cc,o=ua(n*n+r*r);wS+=o*(sc+t)/2,AS+=o*(cc+e)/2,xp+=o,o=cc*t-sc*e,LL+=o*(sc+t),PL+=o*(cc+e),jm+=o*3,sd(sc=t,cc=e)}var xD=Ss;function SD(t){this._context=t}SD.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Sa);break}}},result:za};var IL=new sl,kL,OD,ED,zm,Um,TS={point:za,lineStart:function(){TS.point=IH},lineEnd:function(){kL&&wD(OD,ED),TS.point=za},polygonStart:function(){kL=!0},polygonEnd:function(){kL=null},result:function(){var t=+IL;return IL=new sl,t}};function IH(t,e){TS.point=wD,OD=zm=t,ED=Um=e}function wD(t,e){zm-=t,Um-=e,IL.add(ua(zm*zm+Um*Um)),zm=t,Um=e}var AD=TS;let TD,CS,CD,MD;class LD{constructor(e){this._append=e==null?PD:kH(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==CD||this._append!==CS){const r=this._radius,o=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,CD=r,CS=this._append,MD=this._,this._=o}this._+=MD;break}}}result(){const e=this._;return this._="",e.length?e:null}}function PD(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function kH(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return PD;if(e!==TD){const n=bi(10,e);TD=e,CS=function(o){let s=1;this._+=o[0];for(const l=o.length;s<l;++s)this._+=Math.round(arguments[s]*n)/n+o[s]}}return CS}function ID(t,e){let n=3,r=4.5,o,s;function l(u){return u&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),yp(u,o(s))),s.result()}return l.area=function(u){return yp(u,o(gD)),gD.result()},l.measure=function(u){return yp(u,o(AD)),AD.result()},l.bounds=function(u){return yp(u,o(ES)),ES.result()},l.centroid=function(u){return yp(u,o(xD)),xD.result()},l.projection=function(u){return arguments.length?(o=u==null?(t=null,Nm):(t=u).stream,l):t},l.context=function(u){return arguments.length?(s=u==null?(e=null,new LD(n)):new SD(e=u),typeof r!="function"&&s.pointRadius(r),l):e},l.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(s.pointRadius(+u),+u),l):r},l.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const d=Math.floor(u);if(!(d>=0))throw new RangeError(`invalid digits: ${u}`);n=d}return e===null&&(s=new LD(n)),l},l.projection(t).digits(n).context(e)}function Sp(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(o);++r<o;)s[r]=t+r*n;return s}function kD(t,e,n){var r=Sp(t,e-tr,n).concat(e);return function(o){return r.map(function(s){return[o,s]})}}function RD(t,e,n){var r=Sp(t,e-tr,n).concat(e);return function(o){return r.map(function(s){return[s,o]})}}function RH(){var t,e,n,r,o,s,l,u,d=10,h=d,p=90,v=360,m,b,_,S,O=2.5;function E(){return{type:"MultiLineString",coordinates:A()}}function A(){return Sp(_S(r/p)*p,n,p).map(_).concat(Sp(_S(u/v)*v,l,v).map(S)).concat(Sp(_S(e/d)*d,t,d).filter(function(M){return jr(M%p)>tr}).map(m)).concat(Sp(_S(s/h)*h,o,h).filter(function(M){return jr(M%v)>tr}).map(b))}return E.lines=function(){return A().map(function(M){return{type:"LineString",coordinates:M}})},E.outline=function(){return{type:"Polygon",coordinates:[_(r).concat(S(l).slice(1),_(n).reverse().slice(1),S(u).reverse().slice(1))]}},E.extent=function(M){return arguments.length?E.extentMajor(M).extentMinor(M):E.extentMinor()},E.extentMajor=function(M){return arguments.length?(r=+M[0][0],n=+M[1][0],u=+M[0][1],l=+M[1][1],r>n&&(M=r,r=n,n=M),u>l&&(M=u,u=l,l=M),E.precision(O)):[[r,u],[n,l]]},E.extentMinor=function(M){return arguments.length?(e=+M[0][0],t=+M[1][0],s=+M[0][1],o=+M[1][1],e>t&&(M=e,e=t,t=M),s>o&&(M=s,s=o,o=M),E.precision(O)):[[e,s],[t,o]]},E.step=function(M){return arguments.length?E.stepMajor(M).stepMinor(M):E.stepMinor()},E.stepMajor=function(M){return arguments.length?(p=+M[0],v=+M[1],E):[p,v]},E.stepMinor=function(M){return arguments.length?(d=+M[0],h=+M[1],E):[d,h]},E.precision=function(M){return arguments.length?(O=+M,m=kD(s,o,90),b=RD(e,t,O),_=kD(u,l,90),S=RD(r,n,O),E):O},E.extentMajor([[-180,-90+tr],[180,90-tr]]).extentMinor([[-180,-80-tr],[180,80+tr]])}function DH(){return RH()()}function DD(){var t=[],e;return{point:function(n,r,o){e.push([n,r,o])},lineStart:function(){t.push(e=[])},lineEnd:za,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function MS(t,e){return jr(t[0]-e[0])<tr&&jr(t[1]-e[1])<tr}function LS(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ND(t,e,n,r,o){var s=[],l=[],u,d;if(t.forEach(function(_){if(!((S=_.length-1)<=0)){var S,O=_[0],E=_[S],A;if(MS(O,E)){if(!O[2]&&!E[2]){for(o.lineStart(),u=0;u<S;++u)o.point((O=_[u])[0],O[1]);o.lineEnd();return}E[0]+=2*tr}s.push(A=new LS(O,_,null,!0)),l.push(A.o=new LS(O,null,A,!1)),s.push(A=new LS(E,_,null,!1)),l.push(A.o=new LS(E,null,A,!0))}}),!!s.length){for(l.sort(e),FD(s),FD(l),u=0,d=l.length;u<d;++u)l[u].e=n=!n;for(var h=s[0],p,v;;){for(var m=h,b=!0;m.v;)if((m=m.n)===h)return;p=m.z,o.lineStart();do{if(m.v=m.o.v=!0,m.e){if(b)for(u=0,d=p.length;u<d;++u)o.point((v=p[u])[0],v[1]);else r(m.x,m.n.x,1,o);m=m.n}else{if(b)for(p=m.p.z,u=p.length-1;u>=0;--u)o.point((v=p[u])[0],v[1]);else r(m.x,m.p.x,-1,o);m=m.p}m=m.o,p=m.z,b=!b}while(!m.v);o.lineEnd()}}}function FD(t){if(e=t.length){for(var e,n=0,r=t[0],o;++n<e;)r.n=o=t[n],o.p=r,r=o;r.n=o=t[0],o.p=r}}function RL(t){return[cl(t[1],t[0]),ja(t[2])]}function Op(t){var e=t[0],n=t[1],r=pr(n);return[r*pr(e),r*sr(e),sr(n)]}function PS(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function IS(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function DL(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function kS(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function NL(t){var e=ua(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function FL(t){return jr(t[0])<=br?t[0]:Ba(t[0])*((jr(t[0])+br)%Sa-br)}function NH(t,e){var n=FL(e),r=e[1],o=sr(r),s=[sr(n),-pr(n),0],l=0,u=0,d=new sl;o===1?r=Ni+tr:o===-1&&(r=-Ni-tr);for(var h=0,p=t.length;h<p;++h)if(m=(v=t[h]).length)for(var v,m,b=v[m-1],_=FL(b),S=b[1]/2+lD,O=sr(S),E=pr(S),A=0;A<m;++A,_=L,O=R,E=N,b=M){var M=v[A],L=FL(M),I=M[1]/2+lD,R=sr(I),N=pr(I),Z=L-_,W=Z>=0?1:-1,it=W*Z,tt=it>br,pt=O*R;if(d.add(cl(pt*W*sr(it),E*N+pt*pr(it))),l+=tt?Z+W*Sa:Z,tt^_>=n^L>=n){var K=IS(Op(b),Op(M));NL(K);var lt=IS(s,K);NL(lt);var ft=(tt^Z>=0?-1:1)*ja(lt[2]);(r>ft||r===ft&&(K[0]||K[1]))&&(u+=tt^Z>=0?1:-1)}}return(l<-tr||l<tr&&d<-cD)^u&1}function*FH(t){for(const e of t)yield*h9(e)}function BD(t){return Array.from(FH(t))}function jD(t,e,n,r){return function(o){var s=e(o),l=DD(),u=e(l),d=!1,h,p,v,m={point:b,lineStart:S,lineEnd:O,polygonStart:function(){m.point=E,m.lineStart=A,m.lineEnd=M,p=[],h=[]},polygonEnd:function(){m.point=b,m.lineStart=S,m.lineEnd=O,p=BD(p);var L=NH(h,r);p.length?(d||(o.polygonStart(),d=!0),ND(p,jH,L,n,o)):L&&(d||(o.polygonStart(),d=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),p=h=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function b(L,I){t(L,I)&&o.point(L,I)}function _(L,I){s.point(L,I)}function S(){m.point=_,s.lineStart()}function O(){m.point=b,s.lineEnd()}function E(L,I){v.push([L,I]),u.point(L,I)}function A(){u.lineStart(),v=[]}function M(){E(v[0][0],v[0][1]),u.lineEnd();var L=u.clean(),I=l.result(),R,N=I.length,Z,W,it;if(v.pop(),h.push(v),v=null,!!N){if(L&1){if(W=I[0],(Z=W.length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),R=0;R<Z;++R)o.point((it=W[R])[0],it[1]);o.lineEnd()}return}N>1&&L&2&&I.push(I.pop().concat(I.shift())),p.push(I.filter(BH))}}return m}}function BH(t){return t.length>1}function jH(t,e){return((t=t.x)[0]<0?t[1]-Ni-tr:Ni-t[1])-((e=e.x)[0]<0?e[1]-Ni-tr:Ni-e[1])}var zD=jD(function(){return!0},zH,ZH,[-br,-Ni]);function zH(t){var e=NaN,n=NaN,r=NaN,o;return{lineStart:function(){t.lineStart(),o=1},point:function(s,l){var u=s>0?br:-br,d=jr(s-e);jr(d-br)<tr?(t.point(e,n=(n+l)/2>0?Ni:-Ni),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(u,n),t.point(s,n),o=0):r!==u&&d>=br&&(jr(e-r)<tr&&(e-=r*tr),jr(s-u)<tr&&(s-=u*tr),n=UH(e,n,s,l),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(u,n),o=0),t.point(e=s,n=l),r=u},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-o}}}function UH(t,e,n,r){var o,s,l=sr(t-n);return jr(l)>tr?bp((sr(e)*(s=pr(r))*sr(n)-sr(r)*(o=pr(e))*sr(t))/(o*s*l)):(e+r)/2}function ZH(t,e,n,r){var o;if(t==null)o=n*Ni,r.point(-br,o),r.point(0,o),r.point(br,o),r.point(br,0),r.point(br,-o),r.point(0,-o),r.point(-br,-o),r.point(-br,0),r.point(-br,o);else if(jr(t[0]-e[0])>tr){var s=t[0]<e[0]?br:-br;o=n*s/2,r.point(-s,o),r.point(0,o),r.point(s,o)}else r.point(e[0],e[1])}function UD(t,e,n,r,o,s){if(n){var l=pr(e),u=sr(e),d=r*n;o==null?(o=e+r*Sa,s=e-d/2):(o=ZD(l,o),s=ZD(l,s),(r>0?o<s:o>s)&&(o+=r*Sa));for(var h,p=o;r>0?p>s:p<s;p-=d)h=RL([l,-u*pr(p),-u*sr(p)]),t.point(h[0],h[1])}}function ZD(t,e){e=Op(e),e[0]-=t,NL(e);var n=fD(-e[1]);return((-e[2]<0?-n:n)+Sa-tr)%Sa}function DX(){var t=constant([0,0]),e=constant(90),n=constant(2),r,o,s={point:l};function l(d,h){r.push(d=o(d,h)),d[0]*=degrees,d[1]*=degrees}function u(){var d=t.apply(this,arguments),h=e.apply(this,arguments)*radians,p=n.apply(this,arguments)*radians;return r=[],o=rotateRadians(-d[0]*radians,-d[1]*radians,0).invert,UD(s,h,p,1),d={type:"Polygon",coordinates:[r]},r=o=null,d}return u.center=function(d){return arguments.length?(t=typeof d=="function"?d:constant([+d[0],+d[1]]),u):t},u.radius=function(d){return arguments.length?(e=typeof d=="function"?d:constant(+d),u):e},u.precision=function(d){return arguments.length?(n=typeof d=="function"?d:constant(+d),u):n},u}function HH(t){var e=pr(t),n=2*Ci,r=e>0,o=jr(e)>tr;function s(p,v,m,b){UD(b,t,n,m,p,v)}function l(p,v){return pr(p)*pr(v)>e}function u(p){var v,m,b,_,S;return{lineStart:function(){_=b=!1,S=1},point:function(O,E){var A=[O,E],M,L=l(O,E),I=r?L?0:h(O,E):L?h(O+(O<0?br:-br),E):0;if(!v&&(_=b=L)&&p.lineStart(),L!==b&&(M=d(v,A),(!M||MS(v,M)||MS(A,M))&&(A[2]=1)),L!==b)S=0,L?(p.lineStart(),M=d(A,v),p.point(M[0],M[1])):(M=d(v,A),p.point(M[0],M[1],2),p.lineEnd()),v=M;else if(o&&v&&r^L){var R;!(I&m)&&(R=d(A,v,!0))&&(S=0,r?(p.lineStart(),p.point(R[0][0],R[0][1]),p.point(R[1][0],R[1][1]),p.lineEnd()):(p.point(R[1][0],R[1][1]),p.lineEnd(),p.lineStart(),p.point(R[0][0],R[0][1],3)))}L&&(!v||!MS(v,A))&&p.point(A[0],A[1]),v=A,b=L,m=I},lineEnd:function(){b&&p.lineEnd(),v=null},clean:function(){return S|(_&&b)<<1}}}function d(p,v,m){var b=Op(p),_=Op(v),S=[1,0,0],O=IS(b,_),E=PS(O,O),A=O[0],M=E-A*A;if(!M)return!m&&p;var L=e*E/M,I=-e*A/M,R=IS(S,O),N=kS(S,L),Z=kS(O,I);DL(N,Z);var W=R,it=PS(N,W),tt=PS(W,W),pt=it*it-tt*(PS(N,N)-1);if(!(pt<0)){var K=ua(pt),lt=kS(W,(-it-K)/tt);if(DL(lt,N),lt=RL(lt),!m)return lt;var ft=p[0],vt=v[0],It=p[1],_t=v[1],Lt;vt<ft&&(Lt=ft,ft=vt,vt=Lt);var $t=vt-ft,he=jr($t-br)<tr,le=he||$t<tr;if(!he&&_t<It&&(Lt=It,It=_t,_t=Lt),le?he?It+_t>0^lt[1]<(jr(lt[0]-ft)<tr?It:_t):It<=lt[1]&&lt[1]<=_t:$t>br^(ft<=lt[0]&&lt[0]<=vt)){var Ee=kS(W,(-it+K)/tt);return DL(Ee,N),[lt,RL(Ee)]}}}function h(p,v){var m=r?t:br-t,b=0;return p<-m?b|=1:p>m&&(b|=2),v<-m?b|=4:v>m&&(b|=8),b}return jD(l,u,s,r?[0,-t]:[-br,t-br])}function VH(t,e,n,r,o,s){var l=t[0],u=t[1],d=e[0],h=e[1],p=0,v=1,m=d-l,b=h-u,_;if(_=n-l,!(!m&&_>0)){if(_/=m,m<0){if(_<p)return;_<v&&(v=_)}else if(m>0){if(_>v)return;_>p&&(p=_)}if(_=o-l,!(!m&&_<0)){if(_/=m,m<0){if(_>v)return;_>p&&(p=_)}else if(m>0){if(_<p)return;_<v&&(v=_)}if(_=r-u,!(!b&&_>0)){if(_/=b,b<0){if(_<p)return;_<v&&(v=_)}else if(b>0){if(_>v)return;_>p&&(p=_)}if(_=s-u,!(!b&&_<0)){if(_/=b,b<0){if(_>v)return;_>p&&(p=_)}else if(b>0){if(_<p)return;_<v&&(v=_)}return p>0&&(t[0]=l+p*m,t[1]=u+p*b),v<1&&(e[0]=l+v*m,e[1]=u+v*b),!0}}}}}var Zm=1e9,RS=-Zm;function HD(t,e,n,r){function o(h,p){return t<=h&&h<=n&&e<=p&&p<=r}function s(h,p,v,m){var b=0,_=0;if(h==null||(b=l(h,v))!==(_=l(p,v))||d(h,p)<0^v>0)do m.point(b===0||b===3?t:n,b>1?r:e);while((b=(b+v+4)%4)!==_);else m.point(p[0],p[1])}function l(h,p){return jr(h[0]-t)<tr?p>0?0:3:jr(h[0]-n)<tr?p>0?2:1:jr(h[1]-e)<tr?p>0?1:0:p>0?3:2}function u(h,p){return d(h.x,p.x)}function d(h,p){var v=l(h,1),m=l(p,1);return v!==m?v-m:v===0?p[1]-h[1]:v===1?h[0]-p[0]:v===2?h[1]-p[1]:p[0]-h[0]}return function(h){var p=h,v=DD(),m,b,_,S,O,E,A,M,L,I,R,N={point:Z,lineStart:pt,lineEnd:K,polygonStart:it,polygonEnd:tt};function Z(ft,vt){o(ft,vt)&&p.point(ft,vt)}function W(){for(var ft=0,vt=0,It=b.length;vt<It;++vt)for(var _t=b[vt],Lt=1,$t=_t.length,he=_t[0],le,Ee,Ue=he[0],Be=he[1];Lt<$t;++Lt)le=Ue,Ee=Be,he=_t[Lt],Ue=he[0],Be=he[1],Ee<=r?Be>r&&(Ue-le)*(r-Ee)>(Be-Ee)*(t-le)&&++ft:Be<=r&&(Ue-le)*(r-Ee)<(Be-Ee)*(t-le)&&--ft;return ft}function it(){p=v,m=[],b=[],R=!0}function tt(){var ft=W(),vt=R&&ft,It=(m=BD(m)).length;(vt||It)&&(h.polygonStart(),vt&&(h.lineStart(),s(null,null,1,h),h.lineEnd()),It&&ND(m,u,ft,s,h),h.polygonEnd()),p=h,m=b=_=null}function pt(){N.point=lt,b&&b.push(_=[]),I=!0,L=!1,A=M=NaN}function K(){m&&(lt(S,O),E&&L&&v.rejoin(),m.push(v.result())),N.point=Z,L&&p.lineEnd()}function lt(ft,vt){var It=o(ft,vt);if(b&&_.push([ft,vt]),I)S=ft,O=vt,E=It,I=!1,It&&(p.lineStart(),p.point(ft,vt));else if(It&&L)p.point(ft,vt);else{var _t=[A=Math.max(RS,Math.min(Zm,A)),M=Math.max(RS,Math.min(Zm,M))],Lt=[ft=Math.max(RS,Math.min(Zm,ft)),vt=Math.max(RS,Math.min(Zm,vt))];VH(_t,Lt,t,e,n,r)?(L||(p.lineStart(),p.point(_t[0],_t[1])),p.point(Lt[0],Lt[1]),It||p.lineEnd(),R=!1):It&&(p.lineStart(),p.point(ft,vt),R=!1)}A=ft,M=vt,L=It}return N}}function BL(t,e){function n(r,o){return r=t(r,o),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,o){return r=e.invert(r,o),r&&t.invert(r[0],r[1])}),n}function jL(t,e){return jr(t)>br&&(t-=Math.round(t/Sa)*Sa),[t,e]}jL.invert=jL;function VD(t,e,n){return(t%=Sa)?e||n?BL(GD(t),$D(e,n)):GD(t):e||n?$D(e,n):jL}function WD(t){return function(e,n){return e+=t,jr(e)>br&&(e-=Math.round(e/Sa)*Sa),[e,n]}}function GD(t){var e=WD(t);return e.invert=WD(-t),e}function $D(t,e){var n=pr(t),r=sr(t),o=pr(e),s=sr(e);function l(u,d){var h=pr(d),p=pr(u)*h,v=sr(u)*h,m=sr(d),b=m*n+p*r;return[cl(v*o-b*s,p*n-m*r),ja(b*o+v*s)]}return l.invert=function(u,d){var h=pr(d),p=pr(u)*h,v=sr(u)*h,m=sr(d),b=m*o-v*s;return[cl(v*o+m*s,p*n+b*r),ja(b*n-p*r)]},l}function WH(t){t=VD(t[0]*Ci,t[1]*Ci,t.length>2?t[2]*Ci:0);function e(n){return n=t(n[0]*Ci,n[1]*Ci),n[0]*=Co,n[1]*=Co,n}return e.invert=function(n){return n=t.invert(n[0]*Ci,n[1]*Ci),n[0]*=Co,n[1]*=Co,n},e}function NX(t){return{stream:Hm(t)}}function Hm(t){return function(e){var n=new zL;for(var r in t)n[r]=t[r];return n.stream=e,n}}function zL(){}zL.prototype={constructor:zL,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function UL(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),yp(n,t.stream(ES)),e(ES.result()),r!=null&&t.clipExtent(r),t}function DS(t,e,n){return UL(t,function(r){var o=e[1][0]-e[0][0],s=e[1][1]-e[0][1],l=Math.min(o/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),u=+e[0][0]+(o-l*(r[1][0]+r[0][0]))/2,d=+e[0][1]+(s-l*(r[1][1]+r[0][1]))/2;t.scale(150*l).translate([u,d])},n)}function ZL(t,e,n){return DS(t,[[0,0],e],n)}function HL(t,e,n){return UL(t,function(r){var o=+e,s=o/(r[1][0]-r[0][0]),l=(o-s*(r[1][0]+r[0][0]))/2,u=-s*r[0][1];t.scale(150*s).translate([l,u])},n)}function VL(t,e,n){return UL(t,function(r){var o=+e,s=o/(r[1][1]-r[0][1]),l=-s*r[0][0],u=(o-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([l,u])},n)}var YD=16,GH=pr(30*Ci);function XD(t,e){return+e?YH(t,e):$H(t)}function $H(t){return Hm({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function YH(t,e){function n(r,o,s,l,u,d,h,p,v,m,b,_,S,O){var E=h-r,A=p-o,M=E*E+A*A;if(M>4*e&&S--){var L=l+m,I=u+b,R=d+_,N=ua(L*L+I*I+R*R),Z=ja(R/=N),W=jr(jr(R)-1)<tr||jr(s-v)<tr?(s+v)/2:cl(I,L),it=t(W,Z),tt=it[0],pt=it[1],K=tt-r,lt=pt-o,ft=A*K-E*lt;(ft*ft/M>e||jr((E*K+A*lt)/M-.5)>.3||l*m+u*b+d*_<GH)&&(n(r,o,s,l,u,d,tt,pt,W,L/=N,I/=N,R,S,O),O.point(tt,pt),n(tt,pt,W,L,I,R,h,p,v,m,b,_,S,O))}}return function(r){var o,s,l,u,d,h,p,v,m,b,_,S,O={point:E,lineStart:A,lineEnd:L,polygonStart:function(){r.polygonStart(),O.lineStart=I},polygonEnd:function(){r.polygonEnd(),O.lineStart=A}};function E(Z,W){Z=t(Z,W),r.point(Z[0],Z[1])}function A(){v=NaN,O.point=M,r.lineStart()}function M(Z,W){var it=Op([Z,W]),tt=t(Z,W);n(v,m,p,b,_,S,v=tt[0],m=tt[1],p=Z,b=it[0],_=it[1],S=it[2],YD,r),r.point(v,m)}function L(){O.point=E,r.lineEnd()}function I(){A(),O.point=R,O.lineEnd=N}function R(Z,W){M(o=Z,W),s=v,l=m,u=b,d=_,h=S,O.point=M}function N(){n(v,m,p,b,_,S,s,l,o,u,d,h,YD,r),O.lineEnd=L,L()}return O}}var XH=Hm({point:function(t,e){this.stream.point(t*Ci,e*Ci)}});function qH(t){return Hm({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function KH(t,e,n,r,o){function s(l,u){return l*=r,u*=o,[e+t*l,n-t*u]}return s.invert=function(l,u){return[(l-e)/t*r,(n-u)/t*o]},s}function qD(t,e,n,r,o,s){if(!s)return KH(t,e,n,r,o);var l=pr(s),u=sr(s),d=l*t,h=u*t,p=l/t,v=u/t,m=(u*n-l*e)/t,b=(u*e+l*n)/t;function _(S,O){return S*=r,O*=o,[d*S-h*O+e,n-h*S-d*O]}return _.invert=function(S,O){return[r*(p*S-v*O+m),o*(b-v*S-p*O)]},_}function lc(t){return WL(function(){return t})()}function WL(t){var e,n=150,r=480,o=250,s=0,l=0,u=0,d=0,h=0,p,v=0,m=1,b=1,_=null,S=zD,O=null,E,A,M,L=Nm,I=.5,R,N,Z,W,it;function tt(ft){return Z(ft[0]*Ci,ft[1]*Ci)}function pt(ft){return ft=Z.invert(ft[0],ft[1]),ft&&[ft[0]*Co,ft[1]*Co]}tt.stream=function(ft){return W&&it===ft?W:W=XH(qH(p)(S(R(L(it=ft)))))},tt.preclip=function(ft){return arguments.length?(S=ft,_=void 0,lt()):S},tt.postclip=function(ft){return arguments.length?(L=ft,O=E=A=M=null,lt()):L},tt.clipAngle=function(ft){return arguments.length?(S=+ft?HH(_=ft*Ci):(_=null,zD),lt()):_*Co},tt.clipExtent=function(ft){return arguments.length?(L=ft==null?(O=E=A=M=null,Nm):HD(O=+ft[0][0],E=+ft[0][1],A=+ft[1][0],M=+ft[1][1]),lt()):O==null?null:[[O,E],[A,M]]},tt.scale=function(ft){return arguments.length?(n=+ft,K()):n},tt.translate=function(ft){return arguments.length?(r=+ft[0],o=+ft[1],K()):[r,o]},tt.center=function(ft){return arguments.length?(s=ft[0]%360*Ci,l=ft[1]%360*Ci,K()):[s*Co,l*Co]},tt.rotate=function(ft){return arguments.length?(u=ft[0]%360*Ci,d=ft[1]%360*Ci,h=ft.length>2?ft[2]%360*Ci:0,K()):[u*Co,d*Co,h*Co]},tt.angle=function(ft){return arguments.length?(v=ft%360*Ci,K()):v*Co},tt.reflectX=function(ft){return arguments.length?(m=ft?-1:1,K()):m<0},tt.reflectY=function(ft){return arguments.length?(b=ft?-1:1,K()):b<0},tt.precision=function(ft){return arguments.length?(R=XD(N,I=ft*ft),lt()):ua(I)},tt.fitExtent=function(ft,vt){return DS(tt,ft,vt)},tt.fitSize=function(ft,vt){return ZL(tt,ft,vt)},tt.fitWidth=function(ft,vt){return HL(tt,ft,vt)},tt.fitHeight=function(ft,vt){return VL(tt,ft,vt)};function K(){var ft=qD(n,0,0,m,b,v).apply(null,e(s,l)),vt=qD(n,r-ft[0],o-ft[1],m,b,v);return p=VD(u,d,h),N=BL(e,vt),Z=BL(p,N),R=XD(N,I),lt()}function lt(){return W=it=null,tt}return function(){return e=t.apply(this,arguments),tt.invert=e.invert&&pt,K()}}function GL(t){var e=0,n=br/3,r=WL(t),o=r(e,n);return o.parallels=function(s){return arguments.length?r(e=s[0]*Ci,n=s[1]*Ci):[e*Co,n*Co]},o}function QH(t){var e=pr(t);function n(r,o){return[r*e,sr(o)/e]}return n.invert=function(r,o){return[r/e,ja(o*e)]},n}function KD(t,e){var n=sr(t),r=(n+sr(e))/2;if(jr(r)<tr)return QH(t);var o=1+n*(2*r-n),s=ua(o)/r;function l(u,d){var h=ua(o-2*r*sr(d))/r;return[h*sr(u*=r),s-h*pr(u)]}return l.invert=function(u,d){var h=s-d,p=cl(u,jr(h))*Ba(h);return h*r<0&&(p-=br*Ba(u)*Ba(h)),[p/r,ja((o-(u*u+h*h)*r*r)/(2*r))]},l}function NS(){return GL(KD).scale(155.424).center([0,33.6442])}function QD(){return NS().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function JH(t){var e=t.length;return{point:function(n,r){for(var o=-1;++o<e;)t[o].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function tV(){var t,e,n=QD(),r,o=NS().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,l=NS().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,d,h={point:function(m,b){d=[m,b]}};function p(m){var b=m[0],_=m[1];return d=null,r.point(b,_),d||(s.point(b,_),d)||(u.point(b,_),d)}p.invert=function(m){var b=n.scale(),_=n.translate(),S=(m[0]-_[0])/b,O=(m[1]-_[1])/b;return(O>=.12&&O<.234&&S>=-.425&&S<-.214?o:O>=.166&&O<.234&&S>=-.214&&S<-.115?l:n).invert(m)},p.stream=function(m){return t&&e===m?t:t=JH([n.stream(e=m),o.stream(m),l.stream(m)])},p.precision=function(m){return arguments.length?(n.precision(m),o.precision(m),l.precision(m),v()):n.precision()},p.scale=function(m){return arguments.length?(n.scale(m),o.scale(m*.35),l.scale(m),p.translate(n.translate())):n.scale()},p.translate=function(m){if(!arguments.length)return n.translate();var b=n.scale(),_=+m[0],S=+m[1];return r=n.translate(m).clipExtent([[_-.455*b,S-.238*b],[_+.455*b,S+.238*b]]).stream(h),s=o.translate([_-.307*b,S+.201*b]).clipExtent([[_-.425*b+tr,S+.12*b+tr],[_-.214*b-tr,S+.234*b-tr]]).stream(h),u=l.translate([_-.205*b,S+.212*b]).clipExtent([[_-.214*b+tr,S+.166*b+tr],[_-.115*b-tr,S+.234*b-tr]]).stream(h),v()},p.fitExtent=function(m,b){return DS(p,m,b)},p.fitSize=function(m,b){return ZL(p,m,b)},p.fitWidth=function(m,b){return HL(p,m,b)},p.fitHeight=function(m,b){return VL(p,m,b)};function v(){return t=e=null,p}return p.scale(1070)}function JD(t){return function(e,n){var r=pr(e),o=pr(n),s=t(r*o);return s===1/0?[2,0]:[s*o*sr(e),s*sr(n)]}}function Vm(t){return function(e,n){var r=ua(e*e+n*n),o=t(r),s=sr(o),l=pr(o);return[cl(e*s,r*l),ja(r&&n*s/r)]}}var $L=JD(function(t){return ua(2/(1+t))});$L.invert=Vm(function(t){return 2*ja(t/2)});function eV(){return lc($L).scale(124.75).clipAngle(180-.001)}var YL=JD(function(t){return(t=fD(t))&&t/sr(t)});YL.invert=Vm(function(t){return t});function nV(){return lc(YL).scale(79.4188).clipAngle(180-.001)}function Wm(t,e){return[t,xS(OL((Ni+e)/2))]}Wm.invert=function(t,e){return[t,2*bp(uD(e))-Ni]};function rV(){return tN(Wm).scale(961/Sa)}function tN(t){var e=lc(t),n=e.center,r=e.scale,o=e.translate,s=e.clipExtent,l=null,u,d,h;e.scale=function(v){return arguments.length?(r(v),p()):r()},e.translate=function(v){return arguments.length?(o(v),p()):o()},e.center=function(v){return arguments.length?(n(v),p()):n()},e.clipExtent=function(v){return arguments.length?(v==null?l=u=d=h=null:(l=+v[0][0],u=+v[0][1],d=+v[1][0],h=+v[1][1]),p()):l==null?null:[[l,u],[d,h]]};function p(){var v=br*r(),m=e(WH(e.rotate()).invert([0,0]));return s(l==null?[[m[0]-v,m[1]-v],[m[0]+v,m[1]+v]]:t===Wm?[[Math.max(m[0]-v,l),u],[Math.min(m[0]+v,d),h]]:[[l,Math.max(m[1]-v,u)],[d,Math.min(m[1]+v,h)]])}return p()}function FS(t){return OL((Ni+t)/2)}function eN(t,e){var n=pr(t),r=t===e?sr(t):xS(n/pr(e))/xS(FS(e)/FS(t)),o=n*SL(FS(t),r)/r;if(!r)return Wm;function s(l,u){o>0?u<-Ni+tr&&(u=-Ni+tr):u>Ni-tr&&(u=Ni-tr);var d=o/SL(FS(u),r);return[d*sr(r*l),o-d*pr(r*l)]}return s.invert=function(l,u){var d=o-u,h=Ba(r)*ua(l*l+d*d),p=cl(l,jr(d))*Ba(d);return d*r<0&&(p-=br*Ba(l)*Ba(d)),[p/r,2*bp(SL(o/h,1/r))-Ni]},s}function iV(){return GL(eN).scale(109.5).parallels([30,30])}function Gm(t,e){return[t,e]}Gm.invert=Gm;function oV(){return lc(Gm).scale(152.63)}function nN(t,e){var n=pr(t),r=t===e?sr(t):(n-pr(e))/(e-t),o=n/r+t;if(jr(r)<tr)return Gm;function s(l,u){var d=o-u,h=r*l;return[d*sr(h),o-d*pr(h)]}return s.invert=function(l,u){var d=o-u,h=cl(l,jr(d))*Ba(d);return d*r<0&&(h-=br*Ba(l)*Ba(d)),[h/r,o-Ba(r)*ua(l*l+d*d)]},s}function aV(){return GL(nN).scale(131.154).center([0,13.9389])}var $m=1.340264,Ym=-.081106,Xm=893e-6,qm=.003796,BS=ua(3)/2,sV=12;function XL(t,e){var n=ja(BS*sr(e)),r=n*n,o=r*r*r;return[t*pr(n)/(BS*($m+3*Ym*r+o*(7*Xm+9*qm*r))),n*($m+Ym*r+o*(Xm+qm*r))]}XL.invert=function(t,e){for(var n=e,r=n*n,o=r*r*r,s=0,l,u,d;s<sV&&(u=n*($m+Ym*r+o*(Xm+qm*r))-e,d=$m+3*Ym*r+o*(7*Xm+9*qm*r),n-=l=u/d,r=n*n,o=r*r*r,!(jr(l)<cD));++s);return[BS*t*($m+3*Ym*r+o*(7*Xm+9*qm*r))/pr(n),ja(sr(n)/BS)]};function cV(){return lc(XL).scale(177.158)}function qL(t,e){var n=pr(e),r=pr(t)*n;return[n*sr(t)/r,sr(e)/r]}qL.invert=Vm(bp);function lV(){return lc(qL).scale(144.049).clipAngle(60)}function uV(){var t=1,e=0,n=0,r=1,o=1,s=0,l,u,d=null,h,p,v,m=1,b=1,_=Hm({point:function(L,I){var R=M([L,I]);this.stream.point(R[0],R[1])}}),S=Nm,O,E;function A(){return m=t*r,b=t*o,O=E=null,M}function M(L){var I=L[0]*m,R=L[1]*b;if(s){var N=R*l-I*u;I=I*l+R*u,R=N}return[I+e,R+n]}return M.invert=function(L){var I=L[0]-e,R=L[1]-n;if(s){var N=R*l+I*u;I=I*l-R*u,R=N}return[I/m,R/b]},M.stream=function(L){return O&&E===L?O:O=_(S(E=L))},M.postclip=function(L){return arguments.length?(S=L,d=h=p=v=null,A()):S},M.clipExtent=function(L){return arguments.length?(S=L==null?(d=h=p=v=null,Nm):HD(d=+L[0][0],h=+L[0][1],p=+L[1][0],v=+L[1][1]),A()):d==null?null:[[d,h],[p,v]]},M.scale=function(L){return arguments.length?(t=+L,A()):t},M.translate=function(L){return arguments.length?(e=+L[0],n=+L[1],A()):[e,n]},M.angle=function(L){return arguments.length?(s=L%360*Ci,u=sr(s),l=pr(s),A()):s*Co},M.reflectX=function(L){return arguments.length?(r=L?-1:1,A()):r<0},M.reflectY=function(L){return arguments.length?(o=L?-1:1,A()):o<0},M.fitExtent=function(L,I){return DS(M,L,I)},M.fitSize=function(L,I){return ZL(M,L,I)},M.fitWidth=function(L,I){return HL(M,L,I)},M.fitHeight=function(L,I){return VL(M,L,I)},M}function KL(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}KL.invert=function(t,e){var n=e,r=25,o;do{var s=n*n,l=s*s;n-=o=(n*(1.007226+s*(.015085+l*(-.044475+.028874*s-.005916*l)))-e)/(1.007226+s*(.015085*3+l*(-.044475*7+.028874*9*s-.005916*11*l)))}while(jr(o)>tr&&--r>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function fV(){return lc(KL).scale(175.295)}function QL(t,e){return[pr(e)*sr(t),sr(e)]}QL.invert=Vm(ja);function dV(){return lc(QL).scale(249.5).clipAngle(90+tr)}function JL(t,e){var n=pr(e),r=1+pr(t)*n;return[n*sr(t)/r,sr(e)/r]}JL.invert=Vm(function(t){return 2*bp(t)});function hV(){return lc(JL).scale(250).clipAngle(142)}function tP(t,e){return[xS(OL((Ni+e)/2)),-t]}tP.invert=function(t,e){return[-e,2*bp(uD(t))-Ni]};function pV(){var t=tN(tP),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var gV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function vV(t){if(typeof t=="function")return t;const e=`geo${Ts(t)}`,n=Ot[e];if(!n)throw new Error(`Unknown coordinate: ${t}`);return n}function mV(t){return{type:"FeatureCollection",features:t.flatMap(e=>yV(e).features)}}function yV(t){const e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!t||!t.type)return null;const n=e[t.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if(n==="feature")return{type:"FeatureCollection",features:[t]};if(n==="featureCollection")return t}function bV(t,e){var n;for(const[r,o]of Object.entries(e))(n=t[r])===null||n===void 0||n.call(t,o)}function _V(t,e,n,r){const o=()=>{const u=e.filter(rN);return u.find(h=>h.sphere)?{type:"Sphere"}:mV(u.filter(h=>!h.sphere).flatMap(h=>h.data.value))},{outline:s=o()}=r,{size:l="fitExtent"}=r;if(l==="fitExtent")return xV(t,s,n);if(l==="fitWidth")return SV(t,s,n)}function xV(t,e,n){const{x:r,y:o,width:s,height:l}=n;t.fitExtent([[r,o],[s,l]],e)}function SV(t,e,n){const{width:r,height:o}=n,[[s,l],[u,d]]=ID(t.fitWidth(r,e)).bounds(e),h=Math.ceil(d-l),p=Math.min(Math.ceil(u-s),h),v=t.scale()*(p-1)/p,[m,b]=t.translate(),_=b+(o-h)/2;t.scale(v).translate([m,_]).precision(.2)}function OV(t){const{data:e}=t;if(Array.isArray(e))return Object.assign(Object.assign({},t),{data:{value:e}});const{type:n}=e;return n==="graticule10"?Object.assign(Object.assign({},t),{data:{value:[DH()]}}):n==="sphere"?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function rN(t){return t.type==="geoPath"}const iN=()=>t=>{const{children:e,coordinate:n={}}=t;if(!Array.isArray(e))return[];const{type:r="equalEarth"}=n,o=gV(n,["type"]),s=vV(r),l=e.map(v=>Object.assign(Object.assign({},v),{data:ff(v.data,t.data)})).map(OV);let u;function d(){return[["custom",(v,m,b,_)=>{const S=s();_V(S,l,{x:v,y:m,width:b,height:_},o),bV(S,o),u=ID(S);const E=new pa({domain:[v,v+b]}),A=new pa({domain:[m,m+_]}),M=I=>{const R=S(I);if(!R)return[null,null];const[N,Z]=R;return[E.map(N),A.map(Z)]},L=I=>{if(!I)return null;const[R,N]=I,Z=[E.invert(R),A.invert(N)];return S.invert(Z)};return{transform:I=>M(I),untransform:I=>L(I)}}]]}function h(v){const{style:m,tooltip:b={}}=v;return Object.assign(Object.assign({},v),{type:"path",tooltip:Jl(b,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},m),{d:_=>u(_)||[]})})}const p=v=>rN(v)?h(v):v;return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:d},children:l.flatMap(p)})]};iN.props={};var EV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const oN=()=>t=>{const{type:e,data:n,scale:r,encode:o,style:s,animate:l,key:u,state:d,tooltip:h}=t,p=EV(t,["type","data","scale","encode","style","animate","key","state","tooltip"]);return[Object.assign(Object.assign({type:"geoView"},p),{children:[{type:"geoPath",key:`${u}-0`,data:{value:n},scale:r,encode:o,style:s,animate:l,state:d,tooltip:h}]})]};oN.props={};function wV(){return{"composition.geoView":iN,"composition.geoPath":oN}}function AV(){var t,e,n,r,o=Uo(-30),s,l=1,u=1/0,d=.81;function h(b){var _,S=t.length,O=S4(t,oF,aF).visitAfter(v);for(r=b,_=0;_<S;++_)e=t[_],O.visit(m)}function p(){if(t){var b,_=t.length,S;for(s=new Array(_),b=0;b<_;++b)S=t[b],s[S.index]=+o(S,b,t)}}function v(b){var _=0,S,O,E=0,A,M,L;if(b.length){for(A=M=L=0;L<4;++L)(S=b[L])&&(O=Math.abs(S.value))&&(_+=S.value,E+=O,A+=O*S.x,M+=O*S.y);b.x=A/E,b.y=M/E}else{S=b,S.x=S.data.x,S.y=S.data.y;do _+=s[S.data.index];while(S=S.next)}b.value=_}function m(b,_,S,O){if(!b.value)return!0;var E=b.x-e.x,A=b.y-e.y,M=O-_,L=E*E+A*A;if(M*M/d<L)return L<u&&(E===0&&(E=gu(n),L+=E*E),A===0&&(A=gu(n),L+=A*A),L<l&&(L=Math.sqrt(l*L)),e.vx+=E*b.value*r/L,e.vy+=A*b.value*r/L),!0;if(b.length||L>=u)return;(b.data!==e||b.next)&&(E===0&&(E=gu(n),L+=E*E),A===0&&(A=gu(n),L+=A*A),L<l&&(L=Math.sqrt(l*L)));do b.data!==e&&(M=s[b.data.index]*r/L,e.vx+=E*M,e.vy+=A*M);while(b=b.next)}return h.initialize=function(b,_){t=b,n=_,p()},h.strength=function(b){return arguments.length?(o=typeof b=="function"?b:Uo(+b),p(),h):o},h.distanceMin=function(b){return arguments.length?(l=b*b,h):Math.sqrt(l)},h.distanceMax=function(b){return arguments.length?(u=b*b,h):Math.sqrt(u)},h.theta=function(b){return arguments.length?(d=b*b,h):Math.sqrt(d)},h}function TV(t){return t.index}function aN(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function CV(t){var e=TV,n=v,r,o=Uo(30),s,l,u,d,h,p=1;t==null&&(t=[]);function v(O){return 1/Math.min(u[O.source.index],u[O.target.index])}function m(O){for(var E=0,A=t.length;E<p;++E)for(var M=0,L,I,R,N,Z,W,it;M<A;++M)L=t[M],I=L.source,R=L.target,N=R.x+R.vx-I.x-I.vx||gu(h),Z=R.y+R.vy-I.y-I.vy||gu(h),W=Math.sqrt(N*N+Z*Z),W=(W-s[M])/W*O*r[M],N*=W,Z*=W,R.vx-=N*(it=d[M]),R.vy-=Z*it,I.vx+=N*(it=1-it),I.vy+=Z*it}function b(){if(l){var O,E=l.length,A=t.length,M=new Map(l.map((I,R)=>[e(I,R,l),I])),L;for(O=0,u=new Array(E);O<A;++O)L=t[O],L.index=O,typeof L.source!="object"&&(L.source=aN(M,L.source)),typeof L.target!="object"&&(L.target=aN(M,L.target)),u[L.source.index]=(u[L.source.index]||0)+1,u[L.target.index]=(u[L.target.index]||0)+1;for(O=0,d=new Array(A);O<A;++O)L=t[O],d[O]=u[L.source.index]/(u[L.source.index]+u[L.target.index]);r=new Array(A),_(),s=new Array(A),S()}}function _(){if(l)for(var O=0,E=t.length;O<E;++O)r[O]=+n(t[O],O,t)}function S(){if(l)for(var O=0,E=t.length;O<E;++O)s[O]=+o(t[O],O,t)}return m.initialize=function(O,E){l=O,h=E,b()},m.links=function(O){return arguments.length?(t=O,b(),m):t},m.id=function(O){return arguments.length?(e=O,m):e},m.iterations=function(O){return arguments.length?(p=+O,m):p},m.strength=function(O){return arguments.length?(n=typeof O=="function"?O:Uo(+O),_(),m):n},m.distance=function(O){return arguments.length?(o=typeof O=="function"?O:Uo(+O),S(),m):o},m}function MV(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function o(){var s,l=n.length,u,d=0,h=0;for(s=0;s<l;++s)u=n[s],d+=u.x,h+=u.y;for(d=(d/l-t)*r,h=(h/l-e)*r,s=0;s<l;++s)u=n[s],u.x-=d,u.y-=h}return o.initialize=function(s){n=s},o.x=function(s){return arguments.length?(t=+s,o):t},o.y=function(s){return arguments.length?(e=+s,o):e},o.strength=function(s){return arguments.length?(r=+s,o):r},o}var LV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const PV={joint:!0},IV={type:"link",axis:!1,legend:!1,encode:{x:[t=>t.source.x,t=>t.target.x],y:[t=>t.source.y,t=>t.target.y]},style:{stroke:"#999",strokeOpacity:.6}},kV={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},RV={text:""};function DV(t,e,n){const{nodes:r,links:o}=t,{joint:s,nodeStrength:l,linkStrength:u}=e,{nodeKey:d=_=>_.id,linkKey:h=_=>_.id}=n,p=AV(),v=CV(o).id(xa(h));typeof l=="function"&&p.strength(l),typeof u=="function"&&v.strength(u);const m=EI(r).force("link",v).force("charge",p);s?m.force("center",MV()):m.force("x",TI()).force("y",CI()),m.stop();const b=Math.ceil(Math.log(m.alphaMin())/Math.log(1-m.alphaDecay()));for(let _=0;_<b;_++)m.tick();return{nodesData:r,linksData:o}}const sN=t=>{const{data:e,encode:n={},scale:r,style:o={},layout:s={},nodeLabels:l=[],linkLabels:u=[],animate:d={},tooltip:h={}}=t,{nodeKey:p=R=>R.id,linkKey:v=R=>R.id}=n,m=LV(n,["nodeKey","linkKey"]),b=Object.assign({nodeKey:p,linkKey:v},m),_=En(b,"node"),S=En(b,"link"),{links:O,nodes:E}=nl(e,b),{nodesData:A,linksData:M}=DV({links:O,nodes:E},Je({},PV,s),b),L=Fo(h,"link",{items:[R=>({name:"source",value:xa(v)(R.source)}),R=>({name:"target",value:xa(v)(R.target)})]}),I=Fo(h,"node",{items:[R=>({name:"key",value:xa(p)(R)})]},!0);return[Je({},IV,{data:M,encode:S,labels:u,style:En(o,"link"),tooltip:L,animate:ka(d,"link")}),Je({},kV,{data:A,encode:Object.assign({},_),scale:r,style:En(o,"node"),tooltip:I,labels:[Object.assign(Object.assign({},RV),En(o,"label")),...l],animate:ka(d,"link")})]};sN.props={};function NV(t,e){return t.parent===e.parent?1:2}function eP(t){var e=t.children;return e?e[0]:t.t}function nP(t){var e=t.children;return e?e[e.length-1]:t.t}function FV(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function BV(t){for(var e=0,n=0,r=t.children,o=r.length,s;--o>=0;)s=r[o],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function jV(t,e,n){return t.a.parent===e.parent?t.a:n}function jS(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}jS.prototype=Object.create(au.prototype);function zV(t){for(var e=new jS(t,0),n,r=[e],o,s,l,u;n=r.pop();)if(s=n._.children)for(n.children=new Array(u=s.length),l=u-1;l>=0;--l)r.push(o=n.children[l]=new jS(s[l],l)),o.parent=n;return(e.parent=new jS(null,0)).children=[e],e}function UV(){var t=NV,e=1,n=1,r=null;function o(h){var p=zV(h);if(p.eachAfter(s),p.parent.m=-p.z,p.eachBefore(l),r)h.eachBefore(d);else{var v=h,m=h,b=h;h.eachBefore(function(A){A.x<v.x&&(v=A),A.x>m.x&&(m=A),A.depth>b.depth&&(b=A)});var _=v===m?1:t(v,m)/2,S=_-v.x,O=e/(m.x+_+S),E=n/(b.depth||1);h.eachBefore(function(A){A.x=(A.x+S)*O,A.y=A.depth*E})}return h}function s(h){var p=h.children,v=h.parent.children,m=h.i?v[h.i-1]:null;if(p){BV(h);var b=(p[0].z+p[p.length-1].z)/2;m?(h.z=m.z+t(h._,m._),h.m=h.z-b):h.z=b}else m&&(h.z=m.z+t(h._,m._));h.parent.A=u(h,m,h.parent.A||v[0])}function l(h){h._.x=h.z+h.parent.m,h.m+=h.parent.m}function u(h,p,v){if(p){for(var m=h,b=h,_=p,S=m.parent.children[0],O=m.m,E=b.m,A=_.m,M=S.m,L;_=nP(_),m=eP(m),_&&m;)S=eP(S),b=nP(b),b.a=h,L=_.z+A-m.z-O+t(_._,m._),L>0&&(FV(jV(_,h,v),h,L),O+=L,E+=L),A+=_.m,O+=m.m,M+=S.m,E+=b.m;_&&!nP(b)&&(b.t=_,b.m+=A-E),m&&!eP(S)&&(S.t=m,S.m+=O-M,v=h)}return v}function d(h){h.x*=e,h.y=h.depth*n}return o.separation=function(h){return arguments.length?(t=h,o):t},o.size=function(h){return arguments.length?(r=!1,e=+h[0],n=+h[1],o):r?null:[e,n]},o.nodeSize=function(h){return arguments.length?(r=!0,e=+h[0],n=+h[1],o):r?[e,n]:null},o}function ZV(t,e){return t.parent===e.parent?1:2}function HV(t){return t.reduce(VV,0)/t.length}function VV(t,e){return t+e.x}function WV(t){return 1+t.reduce(GV,0)}function GV(t,e){return Math.max(t,e.y)}function $V(t){for(var e;e=t.children;)t=e[0];return t}function YV(t){for(var e;e=t.children;)t=e[e.length-1];return t}function XV(){var t=ZV,e=1,n=1,r=!1;function o(s){var l,u=0;s.eachAfter(function(m){var b=m.children;b?(m.x=HV(b),m.y=WV(b)):(m.x=l?u+=t(m,l):0,m.y=0,l=m)});var d=$V(s),h=YV(s),p=d.x-t(d,h)/2,v=h.x+t(h,d)/2;return s.eachAfter(r?function(m){m.x=(m.x-s.x)*e,m.y=(s.y-m.y)*n}:function(m){m.x=(m.x-p)/(v-p)*e,m.y=(1-(s.y?m.y/s.y:1))*n})}return o.separation=function(s){return arguments.length?(t=s,o):t},o.size=function(s){return arguments.length?(r=!1,e=+s[0],n=+s[1],o):r?null:[e,n]},o.nodeSize=function(s){return arguments.length?(r=!0,e=+s[0],n=+s[1],o):r?[e,n]:null},o}const cN=t=>e=>n=>{const{field:r="value",nodeSize:o,separation:s,sortBy:l,as:u=["x","y"]}=e,[d,h]=u,p=ou(n,_=>_.children).sum(_=>_[r]).sort(l),v=t();v.size([1,1]),o&&v.nodeSize(o),s&&v.separation(s),v(p);const m=[];p.each(_=>{_[d]=_.x,_[h]=_.y,_.name=_.data.name,m.push(_)});const b=p.links();return b.forEach(_=>{_[d]=[_.source[d],_.target[d]],_[h]=[_.source[h],_.target[h]]}),{nodes:m,edges:b}},lN=t=>cN(XV)(t);lN.props={};const uN=t=>cN(UV)(t);uN.props={};const qV={sortBy:(t,e)=>e.value-t.value},KV={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},QV={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},JV={text:"",fontSize:10},fN=t=>{const{data:e,encode:n={},scale:r={},style:o={},layout:s={},nodeLabels:l=[],linkLabels:u=[],animate:d={},tooltip:h={}}=t,p=n==null?void 0:n.value,{nodes:v,edges:m}=uN(Object.assign(Object.assign(Object.assign({},qV),s),{field:p}))(e),b=Fo(h,"node",{title:"name",items:["value"]},!0),_=Fo(h,"link",{title:"",items:[S=>({name:"source",value:S.source.name}),S=>({name:"target",value:S.target.name})]});return[Je({},QV,{data:m,encode:En(n,"link"),scale:En(r,"link"),labels:u,style:Object.assign({stroke:"#999"},En(o,"link")),tooltip:_,animate:ka(d,"link")}),Je({},KV,{data:v,scale:En(r,"node"),encode:En(n,"node"),labels:[Object.assign(Object.assign({},JV),En(o,"label")),...l],style:Object.assign({},En(o,"node")),tooltip:b,animate:ka(d,"node")})]};fN.props={};var tW=1664525,eW=1013904223,dN=4294967296;function nW(){var t=1;return function(){return(t=(tW*t+eW)%dN)/dN}}var rW=D(52677);function iW(t){return rW(t)==="object"&&"length"in t?t:Array.from(t)}function oW(t,e){for(var n=t.length,r,o;n;)o=e()*n--|0,r=t[n],t[n]=t[o],t[o]=r;return t}function FX(t){return hN(t,lcg())}function hN(t,e){for(var n=0,r=(t=oW(Array.from(t),e)).length,o=[],s,l;n<r;)s=t[n],l&&pN(l,s)?++n:(l=sW(o=aW(o,s)),n=0);return l}function aW(t,e){var n,r;if(rP(e,t))return[e];for(n=0;n<t.length;++n)if(zS(e,t[n])&&rP(Km(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(zS(Km(t[n],t[r]),e)&&zS(Km(t[n],e),t[r])&&zS(Km(t[r],e),t[n])&&rP(gN(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function zS(t,e){var n=t.r-e.r,r=e.x-t.x,o=e.y-t.y;return n<0||n*n<r*r+o*o}function pN(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,o=e.y-t.y;return n>0&&n*n>r*r+o*o}function rP(t,e){for(var n=0;n<e.length;++n)if(!pN(t,e[n]))return!1;return!0}function sW(t){switch(t.length){case 1:return cW(t[0]);case 2:return Km(t[0],t[1]);case 3:return gN(t[0],t[1],t[2])}}function cW(t){return{x:t.x,y:t.y,r:t.r}}function Km(t,e){var n=t.x,r=t.y,o=t.r,s=e.x,l=e.y,u=e.r,d=s-n,h=l-r,p=u-o,v=Math.sqrt(d*d+h*h);return{x:(n+s+d/v*p)/2,y:(r+l+h/v*p)/2,r:(v+o+u)/2}}function gN(t,e,n){var r=t.x,o=t.y,s=t.r,l=e.x,u=e.y,d=e.r,h=n.x,p=n.y,v=n.r,m=r-l,b=r-h,_=o-u,S=o-p,O=d-s,E=v-s,A=r*r+o*o-s*s,M=A-l*l-u*u+d*d,L=A-h*h-p*p+v*v,I=b*_-m*S,R=(_*L-S*M)/(I*2)-r,N=(S*O-_*E)/I,Z=(b*M-m*L)/(I*2)-o,W=(m*E-b*O)/I,it=N*N+W*W-1,tt=2*(s+R*N+Z*W),pt=R*R+Z*Z-s*s,K=-(Math.abs(it)>1e-6?(tt+Math.sqrt(tt*tt-4*it*pt))/(2*it):pt/tt);return{x:r+R+N*K,y:o+Z+W*K,r:K}}function vN(t,e,n){var r=t.x-e.x,o,s,l=t.y-e.y,u,d,h=r*r+l*l;h?(s=e.r+n.r,s*=s,d=t.r+n.r,d*=d,s>d?(o=(h+d-s)/(2*h),u=Math.sqrt(Math.max(0,d/h-o*o)),n.x=t.x-o*r-u*l,n.y=t.y-o*l+u*r):(o=(h+s-d)/(2*h),u=Math.sqrt(Math.max(0,s/h-o*o)),n.x=e.x+o*r-u*l,n.y=e.y+o*l+u*r)):(n.x=e.x+n.r,n.y=e.y)}function mN(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,o=e.y-t.y;return n>0&&n*n>r*r+o*o}function yN(t){var e=t._,n=t.next._,r=e.r+n.r,o=(e.x*n.r+n.x*e.r)/r,s=(e.y*n.r+n.y*e.r)/r;return o*o+s*s}function US(t){this._=t,this.next=null,this.previous=null}function bN(t,e){if(!(s=(t=iW(t)).length))return 0;var n,r,o,s,l,u,d,h,p,v,m;if(n=t[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;vN(r,n,o=t[2]),n=new US(n),r=new US(r),o=new US(o),n.next=o.previous=r,r.next=n.previous=o,o.next=r.previous=n;t:for(d=3;d<s;++d){vN(n._,r._,o=t[d]),o=new US(o),h=r.next,p=n.previous,v=r._.r,m=n._.r;do if(v<=m){if(mN(h._,o._)){r=h,n.next=r,r.previous=n,--d;continue t}v+=h._.r,h=h.next}else{if(mN(p._,o._)){n=p,n.next=r,r.previous=n,--d;continue t}m+=p._.r,p=p.previous}while(h!==p.next);for(o.previous=n,o.next=r,n.next=r.previous=r=o,l=yN(n);(o=o.next)!==r;)(u=yN(o))<l&&(n=o,l=u);r=n.next}for(n=[r._],o=r;(o=o.next)!==r;)n.push(o._);for(o=hN(n,e),d=0;d<s;++d)n=t[d],n.x-=o.x,n.y-=o.y;return o.r}function BX(t){return bN(t,lcg()),t}function lW(t){return Math.sqrt(t.value)}function uW(){var t=null,e=1,n=1,r=ad;function o(s){var l=nW();return s.x=e/2,s.y=n/2,t?s.eachBefore(_N(t)).eachAfter(iP(r,.5,l)).eachBefore(xN(1)):s.eachBefore(_N(lW)).eachAfter(iP(ad,1,l)).eachAfter(iP(r,s.r/Math.min(e,n),l)).eachBefore(xN(Math.min(e,n)/(2*s.r))),s}return o.radius=function(s){return arguments.length?(t=cS(s),o):t},o.size=function(s){return arguments.length?(e=+s[0],n=+s[1],o):[e,n]},o.padding=function(s){return arguments.length?(r=typeof s=="function"?s:mp(+s),o):r},o}function _N(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function iP(t,e,n){return function(r){if(o=r.children){var o,s,l=o.length,u=t(r)*e||0,d;if(u)for(s=0;s<l;++s)o[s].r+=u;if(d=bN(o,n),u)for(s=0;s<l;++s)o[s].r-=u;r.r=d+u}}}function xN(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var fW=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const dW=(t,e)=>({size:[t,e],padding:0,sort:(n,r)=>r.value-n.value}),hW=(t,e,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,e]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),pW={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.r*2},gW={title:t=>t.data.name,items:[{field:"value"}]},vW=(t,e,n)=>{const{value:r}=n,o=(0,Sr.Z)(t)?eL().path(e.path)(t):ou(t);return r?o.sum(s=>xa(r)(s)).sort(e.sort):o.count(),uW().size(e.size).padding(e.padding)(o),o.descendants()},SN=(t,e)=>{const{width:n,height:r}=e,{data:o,encode:s={},scale:l={},style:u={},layout:d={},labels:h=[],tooltip:p={}}=t,v=fW(t,["data","encode","scale","style","layout","labels","tooltip"]),m=hW(n,r,s),b=vW(o,Je({},dW(n,r),d),Je({},m.encode,s)),_=En(u,"label");return Je({},m,Object.assign(Object.assign({data:b,encode:s,scale:l,style:u,labels:[Object.assign(Object.assign({},pW),_),...h]},v),{tooltip:Jl(p,gW),axis:!1}))};SN.props={};function mW(t){return t.target.depth}function yW(t){return t.depth}function bW(t,e){return e-1-t.height}function ZS(t,e){return t.sourceLinks.length?t.depth:e-1}function _W(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?ra(t.sourceLinks,mW)-1:0}function HS(t){return function(){return t}}function ON(t,e){return VS(t.source,e.source)||t.index-e.index}function EN(t,e){return VS(t.target,e.target)||t.index-e.index}function VS(t,e){return t.y0-e.y0}function oP(t){return t.value}function xW(t){return t.index}function SW(t){return t.nodes}function OW(t){return t.links}function wN(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function AN({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const o of e.sourceLinks)o.y0=n+o.width/2,n+=o.width;for(const o of e.targetLinks)o.y1=r+o.width/2,r+=o.width}}function EW(){let t=0,e=0,n=1,r=1,o=24,s=8,l,u=xW,d=ZS,h,p,v,m=SW,b=OW,_=6;function S(vt){const It={nodes:m(vt),links:b(vt)};return O(It),E(It),A(It),M(It),R(It),AN(It),It}S.update=function(vt){return AN(vt),vt},S.nodeId=function(vt){return arguments.length?(u=typeof vt=="function"?vt:HS(vt),S):u},S.nodeAlign=function(vt){return arguments.length?(d=typeof vt=="function"?vt:HS(vt),S):d},S.nodeDepth=function(vt){return arguments.length?(h=vt,S):h},S.nodeSort=function(vt){return arguments.length?(p=vt,S):p},S.nodeWidth=function(vt){return arguments.length?(o=+vt,S):o},S.nodePadding=function(vt){return arguments.length?(s=l=+vt,S):s},S.nodes=function(vt){return arguments.length?(m=typeof vt=="function"?vt:HS(vt),S):m},S.links=function(vt){return arguments.length?(b=typeof vt=="function"?vt:HS(vt),S):b},S.linkSort=function(vt){return arguments.length?(v=vt,S):v},S.size=function(vt){return arguments.length?(t=e=0,n=+vt[0],r=+vt[1],S):[n-t,r-e]},S.extent=function(vt){return arguments.length?(t=+vt[0][0],n=+vt[1][0],e=+vt[0][1],r=+vt[1][1],S):[[t,e],[n,r]]},S.iterations=function(vt){return arguments.length?(_=+vt,S):_};function O({nodes:vt,links:It}){vt.forEach((Lt,$t)=>{Lt.index=$t,Lt.sourceLinks=[],Lt.targetLinks=[]});const _t=new Map(vt.map(Lt=>[u(Lt),Lt]));if(It.forEach((Lt,$t)=>{Lt.index=$t;let{source:he,target:le}=Lt;typeof he!="object"&&(he=Lt.source=wN(_t,he)),typeof le!="object"&&(le=Lt.target=wN(_t,le)),he.sourceLinks.push(Lt),le.targetLinks.push(Lt)}),v!=null)for(const{sourceLinks:Lt,targetLinks:$t}of vt)Lt.sort(v),$t.sort(v)}function E({nodes:vt}){for(const It of vt)It.value=It.fixedValue===void 0?Math.max(Go(It.sourceLinks,oP),Go(It.targetLinks,oP)):It.fixedValue}function A({nodes:vt}){const It=vt.length;let _t=new Set(vt),Lt=new Set,$t=0;for(;_t.size;){if(_t.forEach(he=>{he.depth=$t;for(const{target:le}of he.sourceLinks)Lt.add(le)}),++$t>It)throw new Error("circular link");_t=Lt,Lt=new Set}if(h){const he=Math.max(kr(vt,Ee=>Ee.depth)+1,0);let le;for(let Ee=0;Ee<vt.length;Ee++)le=vt[Ee],le.depth=h.call(null,le,he)}}function M({nodes:vt}){const It=vt.length;let _t=new Set(vt),Lt=new Set,$t=0;for(;_t.size;){if(_t.forEach(he=>{he.height=$t;for(const{source:le}of he.targetLinks)Lt.add(le)}),++$t>It)throw new Error("circular link");_t=Lt,Lt=new Set}}function L({nodes:vt}){const It=Math.max(kr(vt,$t=>$t.depth)+1,0),_t=(n-t-o)/(It-1),Lt=new Array(It).fill(0).map(()=>[]);for(const $t of vt){const he=Math.max(0,Math.min(It-1,Math.floor(d.call(null,$t,It))));$t.layer=he,$t.x0=t+he*_t,$t.x1=$t.x0+o,Lt[he]?Lt[he].push($t):Lt[he]=[$t]}if(p)for(const $t of Lt)$t.sort(p);return Lt}function I(vt){const It=ra(vt,_t=>(r-e-(_t.length-1)*l)/Go(_t,oP));for(const _t of vt){let Lt=e;for(const $t of _t){$t.y0=Lt,$t.y1=Lt+$t.value*It,Lt=$t.y1+l;for(const he of $t.sourceLinks)he.width=he.value*It}Lt=(r-Lt+l)/(_t.length+1);for(let $t=0;$t<_t.length;++$t){const he=_t[$t];he.y0+=Lt*($t+1),he.y1+=Lt*($t+1)}K(_t)}}function R(vt){const It=L(vt);l=Math.min(s,(r-e)/(kr(It,_t=>_t.length)-1)),I(It);for(let _t=0;_t<_;++_t){const Lt=Math.pow(.99,_t),$t=Math.max(1-Lt,(_t+1)/_);Z(It,Lt,$t),N(It,Lt,$t)}}function N(vt,It,_t){for(let Lt=1,$t=vt.length;Lt<$t;++Lt){const he=vt[Lt];for(const le of he){let Ee=0,Ue=0;for(const{source:Qe,value:en}of le.targetLinks){const Ge=en*(le.layer-Qe.layer);Ee+=lt(Qe,le)*Ge,Ue+=Ge}if(!(Ue>0))continue;const Be=(Ee/Ue-le.y0)*It;le.y0+=Be,le.y1+=Be,pt(le)}p===void 0&&he.sort(VS),he.length&&W(he,_t)}}function Z(vt,It,_t){for(let Lt=vt.length,$t=Lt-2;$t>=0;--$t){const he=vt[$t];for(const le of he){let Ee=0,Ue=0;for(const{target:Qe,value:en}of le.sourceLinks){const Ge=en*(Qe.layer-le.layer);Ee+=ft(le,Qe)*Ge,Ue+=Ge}if(!(Ue>0))continue;const Be=(Ee/Ue-le.y0)*It;le.y0+=Be,le.y1+=Be,pt(le)}p===void 0&&he.sort(VS),he.length&&W(he,_t)}}function W(vt,It){const _t=vt.length>>1,Lt=vt[_t];tt(vt,Lt.y0-l,_t-1,It),it(vt,Lt.y1+l,_t+1,It),tt(vt,r,vt.length-1,It),it(vt,e,0,It)}function it(vt,It,_t,Lt){for(;_t<vt.length;++_t){const $t=vt[_t],he=(It-$t.y0)*Lt;he>1e-6&&($t.y0+=he,$t.y1+=he),It=$t.y1+l}}function tt(vt,It,_t,Lt){for(;_t>=0;--_t){const $t=vt[_t],he=($t.y1-It)*Lt;he>1e-6&&($t.y0-=he,$t.y1-=he),It=$t.y0-l}}function pt({sourceLinks:vt,targetLinks:It}){if(v===void 0){for(const{source:{sourceLinks:_t}}of It)_t.sort(EN);for(const{target:{targetLinks:_t}}of vt)_t.sort(ON)}}function K(vt){if(v===void 0)for(const{sourceLinks:It,targetLinks:_t}of vt)It.sort(EN),_t.sort(ON)}function lt(vt,It){let _t=vt.y0-(vt.sourceLinks.length-1)*l/2;for(const{target:Lt,width:$t}of vt.sourceLinks){if(Lt===It)break;_t+=$t+l}for(const{source:Lt,width:$t}of It.targetLinks){if(Lt===vt)break;_t-=$t}return _t}function ft(vt,It){let _t=It.y0-(It.targetLinks.length-1)*l/2;for(const{source:Lt,width:$t}of It.targetLinks){if(Lt===vt)break;_t+=$t+l}for(const{target:Lt,width:$t}of vt.sourceLinks){if(Lt===It)break;_t-=$t}return _t}return S}const wW={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},AW={left:yW,right:bW,center:_W,justify:ZS};function TW(t){const e=typeof t;return e==="string"?AW[t]||ZS:e==="function"?t:ZS}const TN=t=>e=>{const{nodeId:n,nodeSort:r,nodeAlign:o,nodeWidth:s,nodePadding:l,nodeDepth:u,nodes:d,links:h,linkSort:p,iterations:v}=Object.assign({},wW,t),m=EW().nodeSort(r).linkSort(p).links(h).nodes(d).nodeWidth(s).nodePadding(l).nodeDepth(u).nodeAlign(TW(o)).iterations(v).extent([[0,0],[1,1]]);typeof n=="function"&&m.nodeId(n);const b=m(e),{nodes:_,links:S}=b,O=_.map(A=>{const{x0:M,x1:L,y0:I,y1:R}=A;return Object.assign(Object.assign({},A),{x:[M,L,L,M],y:[I,I,R,R]})}),E=S.map(A=>{const{source:M,target:L}=A,I=M.x1,R=L.x0,N=A.width/2;return Object.assign(Object.assign({},A),{x:[I,I,R,R],y:[A.y0+N,A.y0-N,A.y1+N,A.y1-N]})});return{nodes:O,links:E}};TN.props={};var CW=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const MW={nodeId:t=>t.key,nodeWidth:.02,nodePadding:.02},CN={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},MN={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},LW={textAlign:t=>t.x[0]<.5?"start":"end",position:t=>t.x[0]<.5?"right":"left",fontSize:10},LN=t=>{const{data:e,encode:n={},scale:r,style:o={},layout:s={},nodeLabels:l=[],linkLabels:u=[],animate:d={},tooltip:h={},interaction:p,state:v={},viewStyle:m={}}=t,{links:b,nodes:_}=nl(e,n);if(!b||b.length===0)return[Je({},CN,{data:[],encode:{},scale:r,style:En(o,"node"),viewStyle:m,labels:[],tooltip:!1,animate:!1,axis:!1,interaction:p,state:{}}),Je({},MN,{data:[],encode:{},labels:[],style:En(o,"link"),tooltip:!1,animate:!1,interaction:p,state:{}})];const S=En(n,"node"),O=En(n,"link"),{key:E=lt=>lt.key,color:A=E}=S,{links:M,nodes:L}=TN(Object.assign(Object.assign(Object.assign({},MW),{nodeId:xa(E)}),s))({links:b,nodes:_}),I=En(o,"label"),{text:R=E,spacing:N=5}=I,Z=CW(I,["text","spacing"]),W=xa(E),it=Fo(h,"node",{title:W,items:[{field:"value"}]},!0),tt=Fo(h,"link",{title:"",items:[lt=>({name:"source",value:W(lt.source)}),lt=>({name:"target",value:W(lt.target)})]}),[pt,K]=Object.entries(v).reduce((lt,[ft,vt])=>{const It=Iu(vt,"node","link"),_t=En(vt,"node");lt[0][ft]=Object.assign(Object.assign({},It),_t);const Lt=En(vt,"link");return lt[1][ft]=Object.assign(Object.assign({},It),Lt),lt},[{},{}]);return[Je({},CN,{data:L,encode:Object.assign(Object.assign({},S),{color:A}),scale:r,style:En(o,"node"),viewStyle:m,labels:[Object.assign(Object.assign(Object.assign({},LW),{text:R,dx:lt=>lt.x[0]<.5?N:-N}),Z),...l],tooltip:it,animate:ka(d,"node"),axis:!1,interaction:p,state:pt}),Je({},MN,{data:M,encode:O,labels:u,style:Object.assign({fill:O.color?void 0:"#aaa",lineWidth:0},En(o,"link")),tooltip:tt,animate:ka(d,"link"),interaction:p,state:K})]};LN.props={};function PW(t,e){return e.value-t.value}function IW(t,e){return e.frequency-t.frequency}function kW(t,e){return`${t.id}`.localeCompare(`${e.id}`)}function RW(t,e){return`${t.name}`.localeCompare(`${e.name}`)}const DW={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function NW(t){const{y:e,thickness:n,weight:r,marginRatio:o,id:s,source:l,target:u,sourceWeight:d,targetWeight:h,sortBy:p}=Object.assign(Object.assign({},DW),t);function v(O){const E=O.nodes.map(M=>Object.assign({},M)),A=O.edges.map(M=>Object.assign({},M));return m(E,A),b(E,A),_(E,A),S(E,A),{nodes:E,edges:A}}function m(O,E){E.forEach(L=>{L.source=l(L),L.target=u(L),L.sourceWeight=d(L),L.targetWeight=h(L)});const A=$r(E,L=>L.source),M=$r(E,L=>L.target);return O.forEach(L=>{L.id=s(L);const I=A.has(L.id)?A.get(L.id):[],R=M.has(L.id)?M.get(L.id):[];L.frequency=I.length+R.length,L.value=Go(I,N=>N.sourceWeight)+Go(R,N=>N.targetWeight)}),{nodes:O,edges:E}}function b(O,E){const A=typeof p=="function"?p:Xt[p];A&&O.sort(A)}function _(O,E){const A=O.length;if(!A)throw As("Invalid nodes: it's empty!");if(!r){const I=1/A;return O.forEach((R,N)=>{R.x=(N+.5)*I,R.y=e}),{nodes:O,edges:E}}const M=o/(2*A),L=O.reduce((I,R)=>I+=R.value,0);return O.reduce((I,R)=>{R.weight=R.value/L,R.width=R.weight*(1-o),R.height=n;const N=M+I,Z=N+R.width,W=e-n/2,it=W+n;return R.x=[N,Z,Z,N],R.y=[W,W,it,it],I+R.width+2*M},0),{nodes:O,edges:E}}function S(O,E){const A=new Map(O.map(I=>[I.id,I]));if(!r)return E.forEach(I=>{const R=l(I),N=u(I),Z=A.get(R),W=A.get(N);Z&&W&&(I.x=[Z.x,W.x],I.y=[Z.y,W.y])}),{nodes:O,edges:E};E.forEach(I=>{I.x=[0,0,0,0],I.y=[e,e,e,e]});const M=$r(E,I=>I.source),L=$r(E,I=>I.target);O.forEach(I=>{const{edges:R,width:N,x:Z,y:W,value:it,id:tt}=I,pt=M.get(tt)||[],K=L.get(tt)||[];let lt=0;pt.map(ft=>{const vt=ft.sourceWeight/it*N;ft.x[0]=Z[0]+lt,ft.x[1]=Z[0]+lt+vt,lt+=vt}),K.forEach(ft=>{const vt=ft.targetWeight/it*N;ft.x[3]=Z[0]+lt,ft.x[2]=Z[0]+lt+vt,lt+=vt})})}return v}const aP=t=>e=>NW(t)(e);aP.props={};var PN=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const sP={y:0,thickness:.05,marginRatio:.1,id:t=>t.key,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null},FW={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},BW={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},jW={position:"outside",fontSize:10},IN=(t,e)=>{const{data:n,encode:r={},scale:o,style:s={},layout:l={},nodeLabels:u=[],linkLabels:d=[],animate:h={},tooltip:p={}}=t,{nodes:v,links:m}=nl(n,r),b=En(r,"node"),_=En(r,"link"),{key:S=ft=>ft.key,color:O=S}=b,{linkEncodeColor:E=ft=>ft.source}=_,{nodeWidthRatio:A=sP.thickness,nodePaddingRatio:M=sP.marginRatio}=l,L=PN(l,["nodeWidthRatio","nodePaddingRatio"]),{nodes:I,edges:R}=aP(Object.assign(Object.assign(Object.assign(Object.assign({},sP),{id:xa(S),thickness:A,marginRatio:M}),L),{weight:!0}))({nodes:v,edges:m}),N=En(s,"label"),{text:Z=S}=N,W=PN(N,["text"]),it=Fo(p,"node",{title:"",items:[ft=>({name:ft.key,value:ft.value})]},!0),tt=Fo(p,"link",{title:"",items:[ft=>({name:`${ft.source} -> ${ft.target}`,value:ft.value})]}),{height:pt,width:K}=e,lt=Math.min(pt,K);return[Je({},BW,{data:R,encode:Object.assign(Object.assign({},_),{color:E}),labels:d,style:Object.assign({fill:E?void 0:"#aaa"},En(s,"link")),tooltip:tt,animate:ka(h,"link")}),Je({},FW,{data:I,encode:Object.assign(Object.assign({},b),{color:O}),scale:o,style:En(s,"node"),coordinate:{type:"polar",outerRadius:(lt-20)/lt,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},jW),{text:Z}),W),...u],tooltip:it,animate:ka(h,"node"),axis:!1})]};IN.props={};var zW=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const UW=(t,e)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,e],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),ZW=(t,e)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,e],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),HW={fontSize:10,text:t=>io(t.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.x1-t.x0,isTreemapLabel:!0},VW={title:t=>{var e,n;return(n=(e=t.path)===null||e===void 0?void 0:e.join)===null||n===void 0?void 0:n.call(e,".")},items:[{field:"value"}]},WW={title:t=>io(t.path),items:[{field:"value"}]},kN=(t,e)=>{const{width:n,height:r,options:o}=e,{data:s,encode:l={},scale:u,style:d={},layout:h={},labels:p=[],tooltip:v={}}=t,m=zW(t,["data","encode","scale","style","layout","labels","tooltip"]),b=Qn(o,["interaction","treemapDrillDown"])||Qn(o,["marks",0,"interaction","treemapDrillDown"]),_=Je({},UW(n,r),h,{layer:b?A=>A.depth===1:h.layer}),[S,O]=Bk(s,_,l),E=En(d,"label");return Je({},ZW(n,r),Object.assign(Object.assign({data:S,scale:u,style:d,labels:[Object.assign(Object.assign(Object.assign({},HW),E),b&&{cursor:"pointer"}),...p]},m),{encode:l,tooltip:Jl(v,VW),axis:!1}),b?{interaction:Object.assign(Object.assign({},m.interaction),{treemapDrillDown:b?Object.assign(Object.assign({},b),{originData:O,layout:_}):void 0}),encode:Object.assign({color:A=>io(A.path)},l),tooltip:Jl(v,WW)}:{})};kN.props={};function GW(){return{"data.arc":aP,"data.cluster":lN,"mark.forceGraph":sN,"mark.tree":fN,"mark.pack":SN,"mark.sankey":LN,"mark.chord":IN,"mark.treemap":kN}}var RN=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function $W(t,e){return ra(t,n=>e[n])}function YW(t,e){return kr(t,n=>e[n])}function DN(t,e){const n=cP(t,e)*2.5-lP(t,e)*1.5;return ra(t,r=>e[r]>=n?e[r]:NaN)}function cP(t,e){return dS(t,.25,n=>e[n])}function XW(t,e){return dS(t,.5,n=>e[n])}function lP(t,e){return dS(t,.75,n=>e[n])}function NN(t,e){const n=lP(t,e)*2.5-cP(t,e)*1.5;return kr(t,r=>e[r]<=n?e[r]:NaN)}function qW(){return(t,e)=>{const{encode:n}=e,{y:r,x:o}=n,{value:s}=r,{value:l}=o;return[Array.from($r(t,h=>l[+h]).values()).flatMap(h=>{const p=DN(h,s),v=NN(h,s);return h.filter(m=>s[m]<p||s[m]>v)}),e]}}const FN=t=>{const{data:e,encode:n,style:r={},tooltip:o={},transform:s,animate:l}=t,u=RN(t,["data","encode","style","tooltip","transform","animate"]),{point:d=!0}=r,h=RN(r,["point"]),{y:p}=n,v={y:p,y1:p,y2:p,y3:p,y4:p},m={y1:cP,y2:XW,y3:lP},b=Fo(o,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),_=Fo(o,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!d)return Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:$W},m),{y4:YW})],encode:Object.assign(Object.assign({},n),v),style:h,tooltip:b},u);const S=En(h,"box"),O=En(h,"point");return[Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:DN},m),{y4:NN})],encode:Object.assign(Object.assign({},n),v),style:S,tooltip:b,animate:ka(l,"box")},u),{type:"point",data:e,transform:[{type:qW}],encode:n,style:Object.assign({},O),tooltip:_,animate:ka(l,"point")}]};FN.props={};const BN=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))/2,KW=(t,e,n)=>{const r=Math.atan2(t[1]-n[1],t[0]-n[0]);let s=Math.atan2(e[1]-n[1],e[0]-n[0])-r;return s<0&&(s+=Math.PI*2),s},QW=(t,e)=>{if(!e)return;const{coordinate:n}=e;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(o,s,l)=>{const{document:u}=e.canvas,{color:d,index:h}=s,p=u.createElement("g",{}),v=BN(o[0],o[1]),m=BN(o[0],r)*2,b=KW(o[3],o[0],r)>Math.PI,_=u.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...o[0]],["A",v,v,0,1,0,...o[1]],["A",m+v*2,m+v*2,0,b?1:0,0,...o[2]],["A",v,v,0,1,h===0?0:1,...o[3]],["A",m,m,0,b?1:0,1,...o[0]],["Z"]]},l),Jd(t,["shape","last","first"])),{fill:d||l.color})});return p.appendChild(_),p}};var Qm=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const JW=(t,e)=>{const{shape:n,radius:r}=t,o=Qm(t,["shape","radius"]),s=En(o,"pointer"),l=En(o,"pin"),{shape:u}=s,d=Qm(s,["shape"]),{shape:h}=l,p=Qm(l,["shape"]),{coordinate:v,theme:m}=e;return(b,_)=>{const S=b.map(lt=>v.invert(lt)),[O,E,A]=TE(v,"polar"),M=v.clone(),{color:L}=_,I=Rd({startAngle:O,endAngle:E,innerRadius:A,outerRadius:r});I.push(["cartesian"]),M.update({transformations:I});const R=S.map(lt=>M.map(lt)),[N,Z]=i_(R),[W,it]=v.getCenter(),tt=Object.assign(Object.assign({x1:N,y1:Z,x2:W,y2:it,stroke:L},d),o),pt=Object.assign(Object.assign({cx:W,cy:it,stroke:L},p),o),K=Xn(new V.ZA);return $a(u)||(typeof u=="function"?K.append(()=>u(R,_,M,m)):K.append("line").call(jn,tt).node()),$a(h)||(typeof h=="function"?K.append(()=>h(R,_,M,m)):K.append("circle").call(jn,pt).node()),K.node()}},jN={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},tG={style:{shape:JW,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},eG={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},tooltip:!1};function nG(t){if((0,be.Z)(t)){const e=Math.max(0,Math.min(t,1));return{percent:e,target:e,total:1}}return t}function rG(t,e){const{name:n="score",target:r,total:o,percent:s,thresholds:l=[]}=nG(t),u=s||r,d=s?1:o,h=Object.assign({y:{domain:[0,d]}},e);return l.length?{targetData:[{x:n,y:u,color:"target"}],totalData:l.map((p,v)=>({x:n,y:v>=1?p-l[v-1]:p,color:v})),target:u,total:d,scale:h}:{targetData:[{x:n,y:u,color:"target"}],totalData:[{x:n,y:u,color:"target"},{x:n,y:d-u,color:"total"}],target:u,total:d,scale:h}}function iG(t,{target:e,total:n}){const{content:r}=t;return r?r(e,n):e.toString()}const zN=t=>{const{data:e={},scale:n={},style:r={},animate:o={},transform:s=[]}=t,l=Qm(t,["data","scale","style","animate","transform"]),{targetData:u,totalData:d,target:h,total:p,scale:v}=rG(e,n),m=En(r,"text"),{tooltip:b}=m,_=Qm(m,["tooltip"]),S=r1(r,["pointer","pin"]),O=En(r,"arc"),E=O.shape;return[Je({},jN,Object.assign({type:"interval",transform:[{type:"stackY"}],data:d,scale:v,style:E==="round"?Object.assign(Object.assign({},O),{shape:QW}):O,animate:typeof o=="object"?En(o,"arc"):o},l)),Je({},jN,tG,Object.assign({type:"point",data:u,scale:v,style:S,animate:typeof o=="object"?En(o,"indicator"):o},l)),Je({},eG,{style:Object.assign({text:iG(_,{target:h,total:p})},_),tooltip:b,animate:typeof o=="object"?En(o,"text"):o})]};zN.props={};const UN=5e3;function ZN(t,e,n){return t+(e-t)*n}function oG(t,e,n,r){return e===0?[[t+1/2*n/Math.PI/2,r/2],[t+1/2*n/Math.PI,r],[t+n/4,r]]:e===1?[[t+1/2*n/Math.PI/2*(Math.PI-2),r],[t+1/2*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:e===2?[[t+1/2*n/Math.PI/2,-r/2],[t+1/2*n/Math.PI,-r],[t+n/4,-r]]:[[t+1/2*n/Math.PI/2*(Math.PI-2),-r],[t+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function aG(t,e,n,r,o,s,l){const u=Math.ceil(2*t/n*4)*4,d=[];let h=r;for(;h<-Math.PI*2;)h+=Math.PI*2;for(;h>0;)h-=Math.PI*2;h=h/Math.PI/2*n;const p=s-t+h-t*2;d.push(["M",p,e]);let v=0;for(let m=0;m<u;++m){const b=m%4,_=oG(m*n/4,b,n,o);d.push(["C",_[0][0]+p,-_[0][1]+e,_[1][0]+p,-_[1][1]+e,_[2][0]+p,-_[2][1]+e]),m===u-1&&(v=_[2][0])}return d.push(["L",v+p,l+t]),d.push(["L",p,l+t]),d.push(["Z"]),d}function sG(t,e,n,r,o,s,l,u,d,h,p){const{fill:v,fillOpacity:m,opacity:b}=o;for(let _=0;_<r;_++){const S=r<=1?1:_/(r-1),O=aG(u,l+u*n,d,0,u/40,t,e),E=p.createElement("path",{style:{d:O,fill:v,opacity:ZN(.2,.9,S)*Number(b||m)}});s.appendChild(E);try{if(h===!1)return;const A=[{transform:"translate(0, 0)"},{transform:`translate(${d*2}, 0)`}];E.animate(A,{duration:ZN(.5*UN,UN,S)*2,iterations:1/0})}catch(A){console.warn("off-screen group animate error!")}}}function cG(t,e,n){return`
      M ${t} ${e-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function lG(t,e,n){const o=n*.618;return`
      M ${t-o} ${e-n}
      L ${t+o} ${e-n}
      L ${t+o} ${e+n}
      L ${t-o} ${e+n}
      Z
    `}function uG(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e}
      L ${t} ${e+n}
      L ${t-n} ${e}
      Z
    `}function fG(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e+n}
      L ${t-n} ${e+n}
      Z
    `}function dG(t,e,n){const r=n*4/3,o=Math.max(r,n*2),s=r/2,l=t,u=s+e-o/2,d=Math.asin(s/((o-s)*.85)),h=Math.sin(d)*s,p=Math.cos(d)*s,v=l-p,m=u+h,b=t,_=u+s/Math.sin(d);return`
      M ${v} ${m}
      A ${s} ${s} 0 1 1 ${v+p*2} ${m}
      Q ${b} ${_} ${t} ${e+o/2}
      Q ${b} ${_} ${v} ${m}
      Z 
    `}const HN={pin:dG,rect:lG,circle:cG,diamond:uG,triangle:fG};var VN=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const hG=(t="circle")=>HN[t]||HN.circle,WN=(t,e)=>{if(!e)return;const{coordinate:n}=e,{liquidOptions:r,styleOptions:o}=t,{liquidShape:s,percent:l}=r,{background:u,outline:d={},wave:h={}}=o,p=VN(o,["background","outline","wave"]),{border:v=2,distance:m=0}=d,b=VN(d,["border","distance"]),{length:_=192,count:S=3}=h;return(O,E,A)=>{const{document:M}=e.canvas,{color:L,fillOpacity:I}=A,R=Object.assign(Object.assign({fill:L},A),p),N=M.createElement("g",{}),[Z,W]=n.getCenter(),it=n.getSize(),tt=Math.min(...it)/2,pt=(0,mo.Z)(s)?s:hG(s),K=pt(Z,W,tt,...it),lt=pt(Z,W,tt+v/2,...it);if(Object.keys(u).length){const It=M.createElement("path",{style:Object.assign({d:K,fill:"#fff"},u)});N.appendChild(It)}if(l>0){const It=M.createElement("path",{style:{d:lt}});N.appendChild(It),N.style.clipPath=It,sG(Z,W,1-l,S,R,N,It.getBBox().y,tt*2,_,!0,M)}const ft=M.createElement("path",{style:{d:K,fill:"transparent",lineWidth:v+2*m,stroke:"#fff"}}),vt=M.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:K,stroke:L,strokeOpacity:I,lineWidth:v},R),b),{fill:"transparent"})});return N.appendChild(ft),N.appendChild(vt),N}};WN.props={};var pG=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const gG={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:WN},animate:{enter:{type:"fadeIn"}}},vG={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},GN=t=>{const{data:e={},style:n={},animate:r}=t,o=pG(t,["data","style","animate"]),s=Math.max(0,(0,be.Z)(e)?e:e==null?void 0:e.percent),l=[{percent:s,type:"liquid"}],u=Object.assign(Object.assign({},En(n,"text")),En(n,"content")),d=En(n,"outline"),h=En(n,"wave"),p=En(n,"background");return[Je({},gG,Object.assign({type:"interval",data:l,style:{liquidOptions:{percent:s,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:d,wave:h,background:p})},animate:r},o)),Je({},vG,{style:Object.assign({text:`${Dd(s*100)} %`},u),animate:r})]};GN.props={};function uP(t){const e=new Array(t);for(let n=0;n<t;++n)e[n]=0;return e}function $N(t,e){return uP(t).map(()=>uP(e))}function cd(t,e){let n=0;for(let r=0;r<t.length;++r)n+=t[r]*e[r];return n}function fP(t){return Math.sqrt(cd(t,t))}function dP(t,e,n){for(let r=0;r<e.length;++r)t[r]=e[r]*n}function ll(t,e,n,r,o){for(let s=0;s<t.length;++s)t[s]=e*n[s]+r*o[s]}function jX(t,e,n){for(let r=0;r<t.length;++r)t[r]=cd(e[r],n)}function mG(t,e,n){n=n||{};const r=n.maxIterations||e.length*200,o=n.nonZeroDelta||1.05,s=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,u=n.minErrorDelta||1e-5,d=n.rho!==void 0?n.rho:1,h=n.chi!==void 0?n.chi:2,p=n.psi!==void 0?n.psi:-.5,v=n.sigma!==void 0?n.sigma:.5;let m;const b=e.length,_=new Array(b+1);_[0]=e,_[0].fx=t(e),_[0].id=0;for(let I=0;I<b;++I){const R=e.slice();R[I]=R[I]?R[I]*o:s,_[I+1]=R,_[I+1].fx=t(R),_[I+1].id=I+1}function S(I){for(let R=0;R<I.length;R++)_[b][R]=I[R];_[b].fx=I.fx}const O=(I,R)=>I.fx-R.fx,E=e.slice(),A=e.slice(),M=e.slice(),L=e.slice();for(let I=0;I<r;++I){if(_.sort(O),n.history){const N=_.map(Z=>{const W=Z.slice();return W.fx=Z.fx,W.id=Z.id,W});N.sort((Z,W)=>Z.id-W.id),n.history.push({x:_[0].slice(),fx:_[0].fx,simplex:N})}m=0;for(let N=0;N<b;++N)m=Math.max(m,Math.abs(_[0][N]-_[1][N]));if(Math.abs(_[0].fx-_[b].fx)<l&&m<u)break;for(let N=0;N<b;++N){E[N]=0;for(let Z=0;Z<b;++Z)E[N]+=_[Z][N];E[N]/=b}const R=_[b];if(ll(A,1+d,E,-d,R),A.fx=t(A),A.fx<_[0].fx)ll(L,1+h,E,-h,R),L.fx=t(L),L.fx<A.fx?S(L):S(A);else if(A.fx>=_[b-1].fx){let N=!1;if(A.fx>R.fx?(ll(M,1+p,E,-p,R),M.fx=t(M),M.fx<R.fx?S(M):N=!0):(ll(M,1-p*d,E,p*d,R),M.fx=t(M),M.fx<A.fx?S(M):N=!0),N){if(v>=1)break;for(let Z=1;Z<_.length;++Z)ll(_[Z],1-v,_[0],v,_[Z]),_[Z].fx=t(_[Z])}}else S(A)}return _.sort(O),{fx:_[0].fx,x:_[0]}}function yG(t,e,n,r){r=r||{};const o=r.maxIterations||100,s=r.tolerance||1e-10,l=t(e),u=t(n);let d=n-e;if(l*u>0)throw"Initial bisect points must have opposite signs";if(l===0)return e;if(u===0)return n;for(let h=0;h<o;++h){d/=2;const p=e+d,v=t(p);if(v*l>=0&&(e=p),Math.abs(d)<s||v===0)return p}return e+d}function bG(t,e,n,r,o,s,l){const u=n.fx,d=cd(n.fxprime,e);let h=u,p=u,v=d,m=0;o=o||1,s=s||1e-6,l=l||.1;function b(_,S,O){for(let E=0;E<16;++E)if(o=(_+S)/2,ll(r.x,1,n.x,o,e),h=r.fx=t(r.x,r.fxprime),v=cd(r.fxprime,e),h>u+s*o*d||h>=O)S=o;else{if(Math.abs(v)<=-l*d)return o;v*(S-_)>=0&&(S=_),_=o,O=h}return 0}for(let _=0;_<10;++_){if(ll(r.x,1,n.x,o,e),h=r.fx=t(r.x,r.fxprime),v=cd(r.fxprime,e),h>u+s*o*d||_&&h>=p)return b(m,o,p);if(Math.abs(v)<=-l*d)return o;if(v>=0)return b(o,m,h);p=h,m=o,o*=2}return o}function _G(t,e,n){let r={x:e.slice(),fx:0,fxprime:e.slice()},o={x:e.slice(),fx:0,fxprime:e.slice()};const s=e.slice();let l,u=1;n=n||{};const d=n.maxIterations||e.length*20;r.fx=t(r.x,r.fxprime);const h=r.fxprime.slice();dP(h,r.fxprime,-1);for(let p=0;p<d;++p){if(u=bG(t,h,r,o,u),n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:u}),!u)dP(h,r.fxprime,-1);else{ll(s,1,o.fxprime,-1,r.fxprime);const v=cd(r.fxprime,r.fxprime),m=Math.max(0,cd(s,o.fxprime)/v);ll(h,m,h,-1,o.fxprime),l=r,r=o,o=l}if(fP(r.fxprime)<=1e-5)break}return n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:u}),r}function zX(t,e,n,r){const o=n.slice(),s=n.slice();let l,u,d;gemv(s,t,n),weightedSum(o,1,e,-1,s);const h=o.slice();l=dot(o,o);for(let p=0;p<e.length&&(gemv(s,t,h),d=l/dot(h,s),r&&r.push({x:n.slice(),p:h.slice(),alpha:d}),weightedSum(n,1,n,d,h),weightedSum(o,1,o,-d,s),u=dot(o,o),!(Math.sqrt(u)<=1e-10));++p)weightedSum(h,1,o,u/l,h),l=u;return r&&r.push({x:n.slice(),p:h.slice(),alpha:d}),n}const YN=1e-10;function XN(t,e){const n=SG(t),r=n.filter(function(d){return xG(d,t)});let o=0,s=0,l;const u=[];if(r.length>1){const d=OG(r);for(l=0;l<r.length;++l){const p=r[l];p.angle=Math.atan2(p.x-d.x,p.y-d.y)}r.sort(function(p,v){return v.angle-p.angle});let h=r[r.length-1];for(l=0;l<r.length;++l){const p=r[l];s+=(h.x+p.x)*(p.y-h.y);const v={x:(p.x+h.x)/2,y:(p.y+h.y)/2};let m=null;for(let b=0;b<p.parentIndex.length;++b)if(h.parentIndex.indexOf(p.parentIndex[b])>-1){const _=t[p.parentIndex[b]],S=Math.atan2(p.x-_.x,p.y-_.y),O=Math.atan2(h.x-_.x,h.y-_.y);let E=O-S;E<0&&(E+=2*Math.PI);const A=O-E/2;let M=Jm(v,{x:_.x+_.radius*Math.sin(A),y:_.y+_.radius*Math.cos(A)});M>_.radius*2&&(M=_.radius*2),(m===null||m.width>M)&&(m={circle:_,width:M,p1:p,p2:h})}m!==null&&(u.push(m),o+=hP(m.circle.radius,m.width),h=p)}}else{let d=t[0];for(l=1;l<t.length;++l)t[l].radius<d.radius&&(d=t[l]);let h=!1;for(l=0;l<t.length;++l)if(Jm(t[l],d)>Math.abs(d.radius-t[l].radius)){h=!0;break}h?o=s=0:(o=d.radius*d.radius*Math.PI,u.push({circle:d,p1:{x:d.x,y:d.y+d.radius},p2:{x:d.x-YN,y:d.y+d.radius},width:d.radius*2}))}return s/=2,e&&(e.area=o+s,e.arcArea=o,e.polygonArea=s,e.arcs=u,e.innerPoints=r,e.intersectionPoints=n),o+s}function xG(t,e){for(let n=0;n<e.length;++n)if(Jm(t,e[n])>e[n].radius+YN)return!1;return!0}function SG(t){const e=[];for(let n=0;n<t.length;++n)for(let r=n+1;r<t.length;++r){const o=KN(t[n],t[r]);for(let s=0;s<o.length;++s){const l=o[s];l.parentIndex=[n,r],e.push(l)}}return e}function hP(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function Jm(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function qN(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);const r=t-(n*n-e*e+t*t)/(2*n),o=e-(n*n-t*t+e*e)/(2*n);return hP(t,r)+hP(e,o)}function KN(t,e){const n=Jm(t,e),r=t.radius,o=e.radius;if(n>=r+o||n<=Math.abs(r-o))return[];const s=(r*r-o*o+n*n)/(2*n),l=Math.sqrt(r*r-s*s),u=t.x+s*(e.x-t.x)/n,d=t.y+s*(e.y-t.y)/n,h=-(e.y-t.y)*(l/n),p=-(e.x-t.x)*(l/n);return[{x:u+h,y:d-p},{x:u-h,y:d+p}]}function OG(t){const e={x:0,y:0};for(let n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function EG(t,e){e=e||{},e.maxIterations=e.maxIterations||500;const n=e.initialLayout||CG,r=e.lossFunction||gP;t=wG(t);const o=n(t,e),s=[],l=[];let u;for(u in o)o.hasOwnProperty(u)&&(s.push(o[u].x),s.push(o[u].y),l.push(u));const h=mG(function(p){const v={};for(let m=0;m<l.length;++m){const b=l[m];v[b]={x:p[2*m],y:p[2*m+1],radius:o[b].radius}}return r(v,t)},s,e).x;for(let p=0;p<l.length;++p)u=l[p],o[u].x=h[2*p],o[u].y=h[2*p+1];return o}const QN=1e-10;function pP(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+QN?Math.abs(t-e):yG(function(r){return qN(t,e,r)-n},0,t+e)}function wG(t){t=t.slice();const e=[],n={};let r,o,s,l;for(r=0;r<t.length;++r){const u=t[r];u.sets.length==1?e.push(u.sets[0]):u.sets.length==2&&(s=u.sets[0],l=u.sets[1],n[[s,l]]=!0,n[[l,s]]=!0)}for(e.sort((u,d)=>u>d?1:-1),r=0;r<e.length;++r)for(s=e[r],o=r+1;o<e.length;++o)l=e[o],[s,l]in n||t.push({sets:[s,l],size:0});return t}function AG(t,e,n){const r=$N(e.length,e.length),o=$N(e.length,e.length);return t.filter(function(s){return s.sets.length==2}).map(function(s){const l=n[s.sets[0]],u=n[s.sets[1]],d=Math.sqrt(e[l].size/Math.PI),h=Math.sqrt(e[u].size/Math.PI),p=pP(d,h,s.size);r[l][u]=r[u][l]=p;let v=0;s.size+1e-10>=Math.min(e[l].size,e[u].size)?v=1:s.size<=1e-10&&(v=-1),o[l][u]=o[u][l]=v}),{distances:r,constraints:o}}function TG(t,e,n,r){let o=0,s;for(s=0;s<e.length;++s)e[s]=0;for(s=0;s<n.length;++s){const l=t[2*s],u=t[2*s+1];for(let d=s+1;d<n.length;++d){const h=t[2*d],p=t[2*d+1],v=n[s][d],m=r[s][d],b=(h-l)*(h-l)+(p-u)*(p-u),_=Math.sqrt(b),S=b-v*v;m>0&&_<=v||m<0&&_>=v||(o+=2*S*S,e[2*s]+=4*S*(l-h),e[2*s+1]+=4*S*(u-p),e[2*d]+=4*S*(h-l),e[2*d+1]+=4*S*(p-u))}}return o}function CG(t,e){let n=LG(t,e);const r=e.lossFunction||gP;if(t.length>=8){const o=MG(t,e),s=r(o,t),l=r(n,t);s+1e-8<l&&(n=o)}return n}function MG(t,e){e=e||{};const n=e.restarts||10,r=[],o={};let s;for(s=0;s<t.length;++s){const S=t[s];S.sets.length==1&&(o[S.sets[0]]=r.length,r.push(S))}const l=AG(t,r,o);let u=l.distances;const d=l.constraints,h=fP(u.map(fP))/u.length;u=u.map(function(S){return S.map(function(O){return O/h})});const p=function(S,O){return TG(S,O,u,d)};let v,m;for(s=0;s<n;++s){const S=uP(u.length*2).map(Math.random);m=_G(p,S,e),(!v||m.fx<v.fx)&&(v=m)}const b=v.x,_={};for(s=0;s<r.length;++s){const S=r[s];_[S.sets[0]]={x:b[2*s]*h,y:b[2*s+1]*h,radius:Math.sqrt(S.size/Math.PI)}}if(e.history)for(s=0;s<e.history.length;++s)dP(e.history[s].x,h);return _}function LG(t,e){const n=e&&e.lossFunction?e.lossFunction:gP,r={},o={};let s;for(let v=0;v<t.length;++v){const m=t[v];m.sets.length==1&&(s=m.sets[0],r[s]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:m.size,radius:Math.sqrt(m.size/Math.PI)},o[s]=[])}t=t.filter(function(v){return v.sets.length==2});for(let v=0;v<t.length;++v){const m=t[v];let b=m.hasOwnProperty("weight")?m.weight:1;const _=m.sets[0],S=m.sets[1];m.size+QN>=Math.min(r[_].size,r[S].size)&&(b=0),o[_].push({set:S,size:m.size,weight:b}),o[S].push({set:_,size:m.size,weight:b})}const l=[];for(s in o)if(o.hasOwnProperty(s)){let v=0;for(let m=0;m<o[s].length;++m)v+=o[s][m].size*o[s][m].weight;l.push({set:s,size:v})}function u(v,m){return m.size-v.size}l.sort(u);const d={};function h(v){return v.set in d}function p(v,m){r[m].x=v.x,r[m].y=v.y,d[m]=!0}p({x:0,y:0},l[0].set);for(let v=1;v<l.length;++v){const m=l[v].set,b=o[m].filter(h);if(s=r[m],b.sort(u),b.length===0)throw"ERROR: missing pairwise overlap information";const _=[];for(let E=0;E<b.length;++E){const A=r[b[E].set],M=pP(s.radius,A.radius,b[E].size);_.push({x:A.x+M,y:A.y}),_.push({x:A.x-M,y:A.y}),_.push({y:A.y+M,x:A.x}),_.push({y:A.y-M,x:A.x});for(let L=E+1;L<b.length;++L){const I=r[b[L].set],R=pP(s.radius,I.radius,b[L].size),N=KN({x:A.x,y:A.y,radius:M},{x:I.x,y:I.y,radius:R});for(let Z=0;Z<N.length;++Z)_.push(N[Z])}}let S=1e50,O=_[0];for(let E=0;E<_.length;++E){r[m].x=_[E].x,r[m].y=_[E].y;const A=n(r,t);A<S&&(S=A,O=_[E])}p(O,m)}return r}function gP(t,e){let n=0;function r(o){return o.map(function(s){return t[s]})}for(let o=0;o<e.length;++o){const s=e[o];let l;if(s.sets.length==1)continue;if(s.sets.length==2){const d=t[s.sets[0]],h=t[s.sets[1]];l=qN(d.radius,h.radius,Jm(d,h))}else l=XN(r(s.sets));const u=s.hasOwnProperty("weight")?s.weight:1;n+=u*(l-s.size)*(l-s.size)}return n}function PG(t,e,n){n===null?t.sort(function(o,s){return s.radius-o.radius}):t.sort(n);let r;if(t.length>0){const o=t[0].x,s=t[0].y;for(r=0;r<t.length;++r)t[r].x-=o,t[r].y-=s}if(t.length==2&&distance(t[0],t[1])<Math.abs(t[1].radius-t[0].radius)&&(t[1].x=t[0].x+t[0].radius-t[1].radius-1e-10,t[1].y=t[0].y),t.length>1){const o=Math.atan2(t[1].x,t[1].y)-e;let s,l;const u=Math.cos(o),d=Math.sin(o);for(r=0;r<t.length;++r)s=t[r].x,l=t[r].y,t[r].x=u*s-d*l,t[r].y=d*s+u*l}if(t.length>2){let o=Math.atan2(t[2].x,t[2].y)-e;for(;o<0;)o+=2*Math.PI;for(;o>2*Math.PI;)o-=2*Math.PI;if(o>Math.PI){const s=t[1].y/(1e-10+t[1].x);for(r=0;r<t.length;++r){const l=(t[r].x+s*t[r].y)/(1+s*s);t[r].x=2*l-t[r].x,t[r].y=2*l*s-t[r].y}}}}function IG(t){t.map(function(l){l.parent=l});function e(l){return l.parent!==l&&(l.parent=e(l.parent)),l.parent}function n(l,u){const d=e(l),h=e(u);d.parent=h}for(let l=0;l<t.length;++l)for(let u=l+1;u<t.length;++u){const d=t[l].radius+t[u].radius;distance(t[l],t[u])+1e-10<d&&n(t[u],t[l])}const r={};let o;for(let l=0;l<t.length;++l)o=e(t[l]).parent.setid,o in r||(r[o]=[]),r[o].push(t[l]);t.map(function(l){delete l.parent});const s=[];for(o in r)r.hasOwnProperty(o)&&s.push(r[o]);return s}function vP(t){const e=function(n){const r=Math.max.apply(null,t.map(function(s){return s[n]+s.radius})),o=Math.min.apply(null,t.map(function(s){return s[n]-s.radius}));return{max:r,min:o}};return{xRange:e("x"),yRange:e("y")}}function UX(t,e,n){e===null&&(e=Math.PI/2);let r=[],o,s;for(s in t)if(t.hasOwnProperty(s)){const m=t[s];r.push({x:m.x,y:m.y,radius:m.radius,setid:s})}const l=IG(r);for(o=0;o<l.length;++o){PG(l[o],e,n);const m=vP(l[o]);l[o].size=(m.xRange.max-m.xRange.min)*(m.yRange.max-m.yRange.min),l[o].bounds=m}l.sort(function(m,b){return b.size-m.size}),r=l[0];let u=r.bounds;const d=(u.xRange.max-u.xRange.min)/50;function h(m,b,_){if(!m)return;const S=m.bounds;let O,E,A;b?O=u.xRange.max-S.xRange.min+d:(O=u.xRange.max-S.xRange.max,A=(S.xRange.max-S.xRange.min)/2-(u.xRange.max-u.xRange.min)/2,A<0&&(O+=A)),_?E=u.yRange.max-S.yRange.min+d:(E=u.yRange.max-S.yRange.max,A=(S.yRange.max-S.yRange.min)/2-(u.yRange.max-u.yRange.min)/2,A<0&&(E+=A));for(let M=0;M<m.length;++M)m[M].x+=O,m[M].y+=E,r.push(m[M])}let p=1;for(;p<l.length;)h(l[p],!0,!1),h(l[p+1],!1,!0),h(l[p+2],!0,!0),p+=3,u=vP(r);const v={};for(o=0;o<r.length;++o)v[r[o].setid]=r[o];return v}function kG(t,e,n,r){const o=[],s=[];for(const S in t)t.hasOwnProperty(S)&&(s.push(S),o.push(t[S]));e-=2*r,n-=2*r;const l=vP(o),u=l.xRange,d=l.yRange;if(u.max==u.min||d.max==d.min)return console.log("not scaling solution: zero size detected"),t;const h=e/(u.max-u.min),p=n/(d.max-d.min),v=Math.min(p,h),m=(e-(u.max-u.min)*v)/2,b=(n-(d.max-d.min)*v)/2,_={};for(let S=0;S<o.length;++S){const O=o[S];_[s[S]]={radius:v*O.radius,x:r+m+(O.x-u.min)*v,y:r+b+(O.y-d.min)*v}}return _}function RG(t,e,n){const r=[],o=t-n,s=e;return r.push("M",o,s),r.push("A",n,n,0,1,0,o+2*n,s),r.push("A",n,n,0,1,0,o,s),r.join(" ")}function DG(t){const e={};XN(t,e);const n=e.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return RG(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let o=0;o<n.length;++o){const s=n[o],l=s.circle.radius,u=s.width>l;r.push(`
A`,l,l,0,u?1:0,1,s.p1.x,s.p1.y)}return r.join(" ")}}const JN=t=>{const{sets:e="sets",size:n="size",as:r=["key","path"],padding:o=0}=t,[s,l]=r;return u=>{const d=u.map(v=>Object.assign(Object.assign({},v),{sets:v[e],size:v[n],[s]:v.sets.join("&")}));d.sort((v,m)=>v.sets.length-m.sets.length);const h=EG(d);let p;return d.map(v=>{const m=v[e],b=({width:_,height:S})=>{p=p||kG(h,_,S,o);const O=m.map(A=>p[A]);let E=DG(O);return/[zZ]$/.test(E)||(E+=" Z"),E};return Object.assign(Object.assign({},v),{[l]:b})})}};JN.props={};function NG(){return{"data.venn":JN,"mark.boxplot":FN,"mark.gauge":zN,"mark.wordCloud":b4,"mark.liquid":GN}}function FG(){return Object.assign(Object.assign(Object.assign(Object.assign({},wV()),GW()),NG()),xH())}var WS=function(){return WS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},WS.apply(this,arguments)},BG=wM(EM,WS(WS({},FG()),KM())),Ep=function(){return Ep=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ep.apply(this,arguments)},jG=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},zG=["renderer","plugins"],t9=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction","plugins"],GS="__transform__",UG="__skipDelCustomKeys__",xu=function(t,e){return(0,j.isBoolean)(e)?{type:t,available:e}:Ep({type:t},e)},mP={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",y1Field:"encode.y1",sizeField:"encode.size",setsField:"encode.sets",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",coordinateType:"coordinate.type",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(t){return xu("stackY",t)}},normalize:{target:"transform",value:function(t){return xu("normalizeY",t)}},percent:{target:"transform",value:function(t){return xu("normalizeY",t)}},group:{target:"transform",value:function(t){return xu("dodgeX",t)}},sort:{target:"transform",value:function(t){return xu("sortX",t)}},symmetry:{target:"transform",value:function(t){return xu("symmetryY",t)}},diff:{target:"transform",value:function(t){return xu("diffY",t)}},meta:{target:"scale",value:function(t){return t}},label:{target:"labels",value:function(t){return t}},shape:"style.shape",connectNulls:{target:"style",value:function(t){return(0,j.isBoolean)(t)?{connect:t}:t}},transpose:{target:"transpose",value:function(t){return xu("transpose",t)}}},yP=["xField","yField","seriesField","colorField","shapeField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],$S=[{key:"annotations",extendedProperties:[]},{key:"line",type:"line",extendedProperties:yP},{key:"connector",type:"connector",extendedProperties:[]},{key:"point",type:"point",extendedProperties:yP,defaultShapeConfig:{shapeField:"circle"}},{key:"area",type:"area",extendedProperties:yP}],ZG=[{key:"transform",callback:function(t,e,n){var r;t[e]=t[e]||[];var o=n.available,s=o===void 0?!0:o,l=jG(n,["available"]);if(s)t[e].push(Ep((r={},r[GS]=!0,r),l));else{var u=t[e].indexOf(function(d){return d.type===n.type});u!==-1&&t[e].splice(u,1)}}},{key:"labels",callback:function(t,e,n){var r;if(!n||(0,j.isArray)(n)){t[e]=n||[];return}n.text||(n.text=t.yField),t[e]=t[e]||[],t[e].push(Ep((r={},r[GS]=!0,r),n))}},{key:"transpose",callback:function(t,e,n){var r;n.available?t.coordinate={transform:[Ep((r={},r[GS]=!0,r),n)]}:t.coordinate={}}}],bP=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],HG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YS=function(){return YS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},YS.apply(this,arguments)},VG=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},WG=function(t){HG(e,t);function e(n){n===void 0&&(n={});var r=n.style,o=VG(n,["style"]);return t.call(this,YS({style:YS({fill:"#eee"},r)},o))||this}return e}(V.mg),GG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XS=function(){return XS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},XS.apply(this,arguments)},$G=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},e9=function(t){GG(e,t);function e(n){n===void 0&&(n={});var r=n.style,o=$G(n,["style"]);return t.call(this,XS({style:XS({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},o))||this}return e}(V.xv),n9=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},YG=function(t,e){if((0,j.isArray)(e))return e},Su=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return j.mergeWith.apply(void 0,n9(n9([],t,!1),[YG],!1))},XG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r9=function(t){XG(e,t);function e(n,r,o){var s=t.call(this,{style:Su(o,r)})||this;return s.chart=n,s}return e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},e.prototype.disconnectedCallback=function(){},e.prototype.attributeChangedCallback=function(n){},e.prototype.update=function(n,r){var o;return this.attr(Su({},this.attributes,n||{})),(o=this.render)===null||o===void 0?void 0:o.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),o=[];return r.forEach(function(s){var l=s.getBBox(),u=l.x,d=l.y,h=l.width,p=l.height,v=s.__data__;o.push({bbox:l,x:u,y:d,width:h,height:p,key:v.key,data:v})}),o},e.prototype.bindEvents=function(n,r){},e}(V.b_),qG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qS=function(){return qS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},qS.apply(this,arguments)},KG=function(t){qG(e,t);function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return e.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=Array.from(this.getElementsLayout()).sort(function(I,R){return n?I.y-R.y:I.x-R.x}),o=r[0],s=o.x,l=o.y,u=o.height,d=o.width,h=o.data,p=["items",0,"value"],v=(0,j.get)(h,p),m=n?r[1].y-l-u:r[1].x-s-d,b=[],_=this.attributes,S=_.size,O=S===void 0?40:S,E=_.arrowSize,A=E===void 0?20:E,M=_.spacing,L=M===void 0?4:M;return r.forEach(function(I,R){if(R>0){var N=I.x,Z=I.y,W=I.height,it=I.width,tt=I.data,pt=I.key,K=(0,j.get)(tt,p),lt=O/2;if(n){var ft=N+it/2,vt=Z;b.push({points:[[ft+lt,vt-m+L],[ft+lt,vt-A-L],[ft,vt-L],[ft-lt,vt-A-L],[ft-lt,vt-m+L]],center:[ft,vt-m/2],width:m,value:[v,K],key:pt})}else{var ft=N,vt=Z+W/2;b.push({points:[[N-m+L,vt-lt],[N-A-L,vt-lt],[ft-L,vt],[N-A-L,vt+lt],[N-m+L,vt+lt]],center:[ft-m/2,vt],width:m,value:[v,K],key:pt})}v=K}}),b},e.prototype.render=function(){this.setDirection(),this.drawConversionTag()},e.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=(0,j.get)(n,"options.transformations"),o="horizontal";r.forEach(function(s){s.includes("transpose")&&(o="vertical")}),this.direction=o},e.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),o=this.attributes,s=o.style,l=o.text,u=l.style,d=l.formatter;r.forEach(function(h){var p=h.points,v=h.center,m=h.value,b=h.key,_=m[0],S=m[1],O=v[0],E=v[1],A=new WG({style:qS({points:p,fill:"#eee"},s),id:"polygon-".concat(b)}),M=new e9({style:qS({x:O,y:E,text:(0,j.isFunction)(d)?d(_,S):(S/_*100).toFixed(2)+"%"},u),id:"text-".concat(b)});n.appendChild(A),n.appendChild(M)})},e.prototype.update=function(){this.clear(),this.drawConversionTag()},e.prototype.destroy=function(){this.clear()},e.tag="ConversionTag",e}(r9),_P=32,i9=16,o9=48,QG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ty=function(){return ty=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ty.apply(this,arguments)},JG=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},t$=function(t){QG(e,t);function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return e.prototype.render=function(){this.drawText()},e.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",o=this.getElementsLayout(),s=r?(0,j.uniqBy)(o,"x"):(0,j.uniqBy)(o,"y"),l=["title"],u=[],d=this.chart.getContext().views,h=(0,j.get)(d,[0,"layout"]),p=h.width,v=h.height;return s.forEach(function(m){var b=m.x,_=m.y,S=m.height,O=m.width,E=m.data,A=m.key,M=(0,j.get)(E,l);r?u.push({x:b+O/2,y:v,text:M,key:A}):u.push({x:p,y:_+S/2,text:M,key:A})}),(0,j.uniqBy)(u,"text").length!==u.length&&(u=Object.values((0,j.groupBy)(u,"text")).map(function(m){var b,_=m.reduce(function(S,O){return S+(r?O.x:O.y)},0);return ty(ty({},m[0]),(b={},b[r?"x":"y"]=_/m.length,b))})),u},e.prototype.transformLabelStyle=function(n){var r={},o=/^label[A-Z]/;return Object.keys(n).forEach(function(s){o.test(s)&&(r[s.replace("label","").replace(/^[A-Z]/,function(l){return l.toLowerCase()})]=n[s])}),r},e.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),o=this.attributes,s=o.layout,l=o.labelFormatter,u=JG(o,["layout","labelFormatter"]);r.forEach(function(d){var h=d.x,p=d.y,v=d.text,m=d.key,b=new e9({style:ty({x:h,y:p,text:(0,j.isFunction)(l)?l(v):v,wordWrap:!0,wordWrapWidth:s==="horizontal"?_P*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(u)),id:"text-".concat(m)});n.appendChild(b)})},e.prototype.destroy=function(){this.clear()},e.prototype.update=function(){this.destroy(),this.drawText()},e.tag="BidirectionalBarAxisText",e}(r9),e$={ConversionTag:KG,BidirectionalBarAxisText:t$},n$=function(){function t(e,n){this.container=new Map,this.chart=e,this.config=n,this.init()}return t.prototype.init=function(){var e=this;bP.forEach(function(n){var r,o=n.key,s=n.shape,l=e.config[o];if(l){var u=new e$[s](e.chart,l),d=e.chart.getContext().canvas;d.appendChild(u),e.container.set(o,u)}else(r=e.container.get(o))===null||r===void 0||r.clear()})},t.prototype.update=function(){var e=this;this.container.size&&bP.forEach(function(n){var r=n.key,o=e.container.get(r);o==null||o.update()})},t.prototype.destroy=function(){this.container.forEach(function(e){e.destroy()}),this.container.clear()},t}(),r$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wp=function(){return wp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},wp.apply(this,arguments)},a9="data-chart-source-type",Nr=function(t){r$(e,t);function e(n,r){var o=t.call(this)||this;return o.eventListeners=[],o.bindedEvents=!1,o.container=typeof n=="string"?document.getElementById(n):n,o.options=o.mergeOption(r),o.createG2(),o.bindEvents(),o}return e.prototype.getChartOptions=function(){return wp(wp({},(0,j.pick)(this.options,zG)),{container:this.container})},e.prototype.getSpecOptions=function(){return this.type==="base"||this[UG]?wp(wp({},this.options),this.getChartOptions()):this.options},e.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new BG(this.getChartOptions()),this.container.setAttribute(a9,"Ant Design Charts")},e.prototype.bindEvents=function(){var n=this;if(this.chart){var r=function(o){o!=null&&o.type&&n.emit(o.type,o)};this.chart.on("*",r),this.eventListeners.push(function(){var o;(o=n.chart)===null||o===void 0||o.off("*",r)})}},e.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},e.prototype.getDefaultOptions=function(){},e.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation?n.annotation.update():n.annotation=new n$(n.chart,n.options),n.bindSizeSensor()})},e.prototype.update=function(n){this.options=this.mergeOption(n)},e.prototype.mergeOption=function(n){return Su({},this.getBaseOptions(),this.getDefaultOptions(),n)},e.prototype.changeData=function(n){this.chart.changeData(n)},e.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},e.prototype.destroy=function(){this.eventListeners.forEach(function(n){return n()}),this.eventListeners=[],this.annotation&&typeof this.annotation.destroy=="function"&&this.annotation.destroy(),this.annotation=null,this.chart.destroy(),this.off(),this.bindedEvents=!1,this.container.removeAttribute(a9)},e.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var n=this;if(!this.bindedEvents){var r=this.options.autoFit,o=r===void 0?!0:r;if(o){var s=function(){n.annotation&&n.annotation.update()};this.chart.on(Cr.AFTER_CHANGE_SIZE,s),this.eventListeners.push(function(){var l;(l=n.chart)===null||l===void 0||l.off(Cr.AFTER_CHANGE_SIZE,s)}),this.bindedEvents=!0}}},e}(sn),i$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),o$=function(t){i$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="base",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return function(n){return n}},e}(Nr),a$=function(t){var e=t.options,n=e.children,r=n===void 0?[]:n;return r.forEach(function(o){Object.keys(o).forEach(function(s){(0,j.isArray)(o[s])&&s!=="data"&&(o[s]=o[s].filter(function(l){return!l[GS]}))})}),e},s9=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},s$=function(t){var e=t.children,n=e===void 0?[]:e,r=Object.keys(mP).concat($S.map(function(o){return o.key}));return r.forEach(function(o){delete t[o]}),n.forEach(function(o){Object.keys(o).forEach(function(s){r.includes(s)&&delete o[s]})}),Object.keys(t).forEach(function(o){s9(s9([],t9,!0),bP.map(function(s){return s.key}),!0).includes(o)||delete t[o]}),t},ey=function(){return ey=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ey.apply(this,arguments)},Hr=function(t){var e=a$(t),n=e.children,r=n===void 0?[]:n,o=(0,j.omit)(e,[].concat(t9,$S.map(function(h){return h.key}))),s=function(h){var p;return(p=ZG.find(function(v){return v.key===h}))===null||p===void 0?void 0:p.callback},l=function(h,p,v){var m=s(p);m?m(h,p,v):h[p]=Su({},h[p],v)},u=function(h){Object.keys(h).forEach(function(p){if(h[p]){var v=$S.find(function(A){return A.key===p});if(v){var m=v.type,b=v.extendedProperties,_=v.defaultShapeConfig,S=_===void 0?{}:_;if(m){var O=h[p].tooltip;r.push(d(Su({},(0,j.pick)(h,b),S,{type:m},h[p],{tooltip:O||!1})))}else if((0,j.isArray)(h[p])){var E=h[p].some(function(A){return A.type==="text"});h[p].forEach(function(A){r.push(d(ey(ey(ey({},E?{data:[]}:{}),{tooltip:!1}),A)))})}}}})},d=function(h){return u(h),Object.keys(mP).forEach(function(p){var v=mP[p];if(!(0,j.isUndefined)(h[p]))if((0,j.isObject)(v)){var m=v.value,b=v.target,_=m(h[p]);l(h,b,_)}else(0,j.set)(h,v,h[p])}),h};return r.forEach(function(h){var p=Su({},o,h);d(Su(h,p))}),u(e),s$(e),t},xP=function(){return xP=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},xP.apply(this,arguments)};function c$(t){var e=t.options,n=e.stack,r=e.tooltip,o=e.xField;if(!n)return t;var s=$S.map(function(u){return u.type}).filter(function(u){return!!u}),l=!1;return s.forEach(function(u){e[u]&&(l=!0,(0,j.set)(e,[u,"stack"],xP({y1:"y"},typeof n=="object"?n:{})))}),l&&!(0,j.isBoolean)(r)&&!r&&(0,j.set)(e,"tooltip",{title:o,items:[{channel:"y"}]}),t}function Mi(t){return(0,j.flow)(c$)(t)}function l$(t){return(0,j.flow)(Mi,Hr)(t)}var u$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),f$=function(t){u$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return l$},e}(Nr),Ap=function(){return Ap=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ap.apply(this,arguments)};function c9(t){var e=function(n){var r=n.options;(0,j.get)(r,"children.length")>1&&(0,j.set)(r,"children",[{type:"interval"}]);var o=r.scale,s=r.markBackground,l=r.data,u=r.children,d=r.yField,h=(0,j.get)(o,"y.domain",[]);if(s&&h.length&&(0,j.isArray)(l)){var p="domainMax",v=l.map(function(m){var b;return Ap(Ap({originData:Ap({},m)},(0,j.omit)(m,d)),(b={},b[p]=h[h.length-1],b))});u.unshift(Ap({type:"interval",data:v,yField:p,tooltip:!1,style:{fill:"#eee"},label:!1},s))}return n};return(0,j.flow)(e,Mi,Hr)(t)}var d$=function(){var t=function(e,n){return function(r){var o=e.fill,s=o===void 0?"#2888FF":o,l=e.stroke,u=e.fillOpacity,d=u===void 0?1:u,h=e.strokeOpacity,p=h===void 0?.2:h,v=e.pitch,m=v===void 0?8:v,b=r[0],_=r[1],S=r[2],O=r[3],E=(_[1]-b[1])/2,A=n.document,M=A.createElement("g",{}),L=A.createElement("polygon",{style:{points:[b,[b[0]-m,b[1]+E],[S[0]-m,b[1]+E],O],fill:s,fillOpacity:d,stroke:l,strokeOpacity:p,inset:30}}),I=A.createElement("polygon",{style:{points:[[b[0]-m,b[1]+E],_,S,[S[0]-m,b[1]+E]],fill:s,fillOpacity:d,stroke:l,strokeOpacity:p}}),R=A.createElement("polygon",{style:{points:[b,[b[0]-m,b[1]+E],_,[b[0]+m,b[1]+E]],fill:s,fillOpacity:d-.2}});return M.appendChild(L),M.appendChild(I),M.appendChild(R),M}};oi("shape.interval.bar25D",t)},h$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();d$();var p$=function(t){h$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Bar",n}return e.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return c9},e}(Nr),g$=function(){var t=function(e,n){return function(r){var o=e.fill,s=o===void 0?"#2888FF":o,l=e.stroke,u=e.fillOpacity,d=u===void 0?1:u,h=e.strokeOpacity,p=h===void 0?.2:h,v=e.pitch,m=v===void 0?8:v,b=r[1][0]-r[0][0],_=b/2+r[0][0],S=n.document,O=S.createElement("g",{}),E=S.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[_,r[1][1]+m],[_,r[3][1]+m],[r[3][0],r[3][1]]],fill:s,fillOpacity:d,stroke:l,strokeOpacity:p,inset:30}}),A=S.createElement("polygon",{style:{points:[[_,r[1][1]+m],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[_,r[2][1]+m]],fill:s,fillOpacity:d,stroke:l,strokeOpacity:p}}),M=S.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[_,r[1][1]-m],[r[1][0],r[1][1]],[_,r[1][1]+m]],fill:s,fillOpacity:d-.2}});return O.appendChild(A),O.appendChild(E),O.appendChild(M),O}};oi("shape.interval.column25D",t)},v$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();g$();var m$=function(t){v$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return c9},e}(Nr);function y$(t){var e=function(r){var o=r.options,s=o.children,l=s===void 0?[]:s,u=o.legend;return u&&l.forEach(function(d){if(!(0,j.get)(d,"colorField")){var h=(0,j.get)(d,"yField");(0,j.set)(d,"colorField",function(){return h})}}),r},n=function(r){var o=r.options,s=o.annotations,l=s===void 0?[]:s,u=o.children,d=u===void 0?[]:u,h=o.scale,p=!1;return(0,j.get)(h,"y.key")||d.forEach(function(v,m){if(!(0,j.get)(v,"scale.y.key")){var b="child".concat(m,"Scale");(0,j.set)(v,"scale.y.key",b);var _=v.annotations,S=_===void 0?[]:_;S.length>0&&((0,j.set)(v,"scale.y.independent",!1),S.forEach(function(O){(0,j.set)(O,"scale.y.key",b)})),!p&&l.length>0&&(0,j.get)(v,"scale.y.independent")===void 0&&(p=!0,(0,j.set)(v,"scale.y.independent",!1),l.forEach(function(O){(0,j.set)(O,"scale.y.key",b)}))}}),r};return(0,j.flow)(e,n,Mi,Hr)(t)}var b$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),l9=function(t){b$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="DualAxes",n}return e.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return y$},e}(Nr);function _$(t){var e=function(s){var l=s.options,u=l.xField,d=l.colorField;return d||(0,j.set)(l,"colorField",u),s},n=function(s){var l=s.options,u=l.compareField,d=l.transform,h=l.isTransposed,p=h===void 0?!0:h,v=l.coordinate;return d||(u?(0,j.set)(l,"transform",[]):(0,j.set)(l,"transform",[{type:"symmetryY"}])),!v&&p&&(0,j.set)(l,"coordinate",{transform:[{type:"transpose"}]}),s},r=function(s){var l=s.options,u=l.compareField,d=l.seriesField,h=l.data,p=l.children,v=l.yField,m=l.isTransposed,b=m===void 0?!0:m;if(u||d){var _=Object.values((0,j.groupBy)(h,function(S){return S[u||d]}));p[0].data=_[0],p.push({type:"interval",data:_[1],yField:function(S){return-S[v]}}),delete l.compareField,delete l.data}return d&&((0,j.set)(l,"type","spaceFlex"),(0,j.set)(l,"ratio",[1,1]),(0,j.set)(l,"direction",b?"row":"col"),delete l.seriesField),s},o=function(s){var l=s.options,u=l.tooltip,d=l.xField,h=l.yField;return u||(0,j.set)(l,"tooltip",{title:!1,items:[function(p){return{name:p[d],value:p[h]}}]}),s};return(0,j.flow)(e,n,r,o,Mi,Hr)(t)}var x$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),S$=function(t){x$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return _$},e}(Nr);function O$(t){return(0,j.flow)(Mi,Hr)(t)}var E$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),w$=function(t){E$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="line",n}return e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return O$},e}(Nr);function KS(t){switch(typeof t){case"function":return t;case"string":return function(e){return(0,j.get)(e,[t])};default:return function(){return t}}}var Ua=function(){return Ua=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ua.apply(this,arguments)};function A$(t){var e=function(n){var r=n.options,o=r.angleField,s=r.data,l=r.label,u=r.tooltip,d=r.colorField,h=KS(d);if((0,j.isArray)(s)&&s.length>0){var p=s.reduce(function(b,_){return b+_[o]},0);if(p===0){var v=s.map(function(b){var _;return Ua(Ua({},b),(_={},_[o]=1,_))});if((0,j.set)(r,"data",v),l){var m=d===(0,j.get)(l,"text");(0,j.set)(r,"label",Ua(Ua({},l),m?{}:{formatter:function(){return 0}}))}u!==!1&&((0,j.isFunction)(u)?(0,j.set)(r,"tooltip",function(b,_,S){var O;return u(Ua(Ua({},b),(O={},O[o]=0,O)),_,S.map(function(E){var A;return Ua(Ua({},E),(A={},A[o]=0,A))}))}):(0,j.set)(r,"tooltip",Ua(Ua({},u),{items:[function(b,_,S){return{name:h(b,_,S),value:0}}]})))}}return n};return(0,j.flow)(e,Hr)(t)}var T$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),C$=function(t){T$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="pie",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return A$},e}(Nr);function M$(t){return(0,j.flow)(Mi,Hr)(t)}var L$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),P$=function(t){L$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="scatter",n}return e.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return M$},e}(Nr);function I$(t){var e=function(n){return(0,j.set)(n,"options.coordinate",{type:(0,j.get)(n,"options.coordinateType","polar")}),n};return(0,j.flow)(e,Hr)(t)}var k$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),R$=function(t){k$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radar",n}return e.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return I$},e}(Nr);function D$(t){var e=function(n){var r=n.options,o=r.yField,s=r.children,l=r.style,u=l===void 0?{}:l,d=r.lineStyle,h=d===void 0?{}:d,p=o[0],v=o[1],m=o[2],b=o[3];return(0,j.set)(s,[0,"yField"],[m,b]),(0,j.set)(s,[0,"style"],h),(0,j.set)(s,[1,"yField"],[p,v]),(0,j.set)(s,[1,"style"],u),delete r.yField,delete r.lineStyle,delete r.style,n};return(0,j.flow)(e,Hr)(t)}var N$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),F$=["#26a69a","#999999","#ef5350"],B$=function(t){N$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="stock",n}return e.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:F$},y:{nice:!0}},children:[{type:"link"},{type:"interval"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return D$},e}(Nr);function j$(t){return(0,j.flow)(Mi,Hr)(t)}var z$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),U$=function(t){z$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyLine",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return j$},e}(Nr);function Z$(t){return(0,j.flow)(Mi,Hr)(t)}var H$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),V$=function(t){H$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyArea",n}return e.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Z$},e}(Nr);function W$(t){return(0,j.flow)(Mi,Hr)(t)}var G$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$$=function(t){G$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyColumn",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return W$},e}(Nr),SP=function(){return SP=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},SP.apply(this,arguments)};function Y$(t){var e=function(n){var r=n.options,o=r.percent,s=r.color,l=s===void 0?[]:s;if(!o)return n;var u={scale:{color:{range:l.length?l:[]}},data:[1,o]};return Object.assign(r,SP({},u)),n};return(0,j.flow)(e,Mi,Hr)(t)}var X$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),q$=function(t){X$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyProgress",n}return e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Y$},e}(Nr),OP=function(){return OP=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},OP.apply(this,arguments)};function K$(t){var e=function(r){var o=r.options,s=o.radius,l=s===void 0?.8:s;return(0,j.set)(r,"options.coordinate.innerRadius",l),r},n=function(r){var o=r.options,s=o.percent,l=o.color,u=l===void 0?[]:l;if(!s)return r;var d={scale:{color:{range:u.length?u:[]}},data:[1,s]};return Object.assign(o,OP({},d)),r};return(0,j.flow)(e,n,Mi,Hr)(t)}var Q$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),J$=function(t){Q$(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyRing",n}return e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return K$},e}(Nr);function tY(t){return(0,j.flow)(Hr)(t)}var eY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nY=function(t){eY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="rose",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return tY},e}(Nr),EP="__start__",Ou="__end__",wP="__waterfall_value__",QS=function(){return QS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},QS.apply(this,arguments)},rY=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};function iY(t){var e=function(o){var s=o.options,l=s.data,u=l===void 0?[]:l,d=s.yField;return u.length&&(u.reduce(function(h,p,v){var m,b=KS(d),_=b(p,v,u);if(v===0||p.isTotal)p[EP]=0,p[Ou]=_,p[wP]=_;else{var S=(m=h[Ou])!==null&&m!==void 0?m:b(h,v,u);p[EP]=S,p[Ou]=S+_,p[wP]=h[Ou]}return p},[]),Object.assign(s,{yField:[EP,Ou]})),o},n=function(o){var s=o.options,l=s.data,u=l===void 0?[]:l,d=s.xField,h=s.children,p=s.linkStyle,v=rY([],u,!0);return v.reduce(function(m,b,_){return _>0&&(b.x1=m[d],b.x2=b[d],b.y1=m[Ou]),b},[]),v.shift(),h.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:v,style:QS({stroke:"#697474"},p),label:!1,tooltip:!1}),o},r=function(o){var s=o.options,l=s.data,u=l===void 0?[]:l,d=s.connector;return d&&(0,j.set)(s,"connector",QS({xField:d.reverse?["x2","x1"]:["x1","x2"],yField:d.reverse?["y2","y1"]:["y1","y2"],data:[{x1:u[0].x,y1:u[0][Ou],x2:u[u.length-1].x,y2:u[u.length-1][Ou]}]},(0,j.isObject)(d)?d:{})),o};return(0,j.flow)(e,n,Mi,r,Hr)(t)}var oY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aY=function(t){oY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="waterfall",n}return e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:wP,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return iY},e}(Nr);function sY(t){var e=function(n){var r=n.options,o=r.data,s=r.binNumber,l=r.binWidth,u=r.children,d=r.channel,h=d===void 0?"count":d,p=(0,j.get)(u,"[0].transform[0]",{});return(0,j.isNumber)(l)?((0,j.assign)(p,{thresholds:(0,j.ceil)((0,j.divide)(o.length,l)),y:h}),n):((0,j.isNumber)(s)&&(0,j.assign)(p,{thresholds:s,y:h}),n)};return(0,j.flow)(e,Mi,Hr)(t)}var cY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lY=function(t){cY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Histogram",n}return e.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return sY},e}(Nr);function uY(t){var e=function(r){var o=r.options,s=o.tooltip,l=s===void 0?{}:s,u=o.colorField,d=o.sizeField;return l&&!l.field&&(l.field=u||d),r},n=function(r){var o=r.options,s=o.mark,l=o.children;return s&&(l[0].type=s),r};return(0,j.flow)(e,n,Mi,Hr)(t)}var fY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dY=function(t){fY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="heatmap",n}return e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return uY},e}(Nr);function hY(t){var e=function(n){var r=n.options.boxType,o=r===void 0?"box":r;return n.options.children[0].type=o,n};return(0,j.flow)(e,Mi,Hr)(t)}var pY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gY=function(t){pY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="box",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return hY},e}(Nr),JS=function(t){var e=t.options,n=e.data;return(0,j.get)(n,"value")||(0,j.get)(n,"type")!=="fetch"&&(0,j.isPlainObject)(n)&&(0,j.set)(e,"data.value",n),t},vY=function(t){var e=t.options,n=e.data,r=[{type:"custom",callback:function(s){return{links:s}}}];if((0,j.isArray)(n))n.length>0?(0,j.set)(e,"data",{value:n,transform:r}):delete e.children;else if((0,j.get)(n,"type")==="fetch"&&(0,j.get)(n,"value")){var o=(0,j.get)(n,"transform");(0,j.isArray)(o)||(0,j.set)(n,"transform",r)}return t};function mY(t){return(0,j.flow)(JS,vY,Mi,Hr)(t)}var yY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bY=function(t){yY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sankey",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return mY},e}(Nr);function _Y(t){var e=t.options.layout,n=e===void 0?"horizontal":e;return t.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],t}function xY(t){_Y(t);var e=t.options.layout,n=e===void 0?"horizontal":e;return t.options.children.forEach(function(r){var o;!((o=r==null?void 0:r.coordinate)===null||o===void 0)&&o.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),t}var ld=function(){return ld=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ld.apply(this,arguments)},tO=["#f0efff","#5B8FF9","#3D76DD"];function AP(t,e,n,r){r===void 0&&(r=!0);var o=0,s=!1,l=(0,j.map)(t,function(u){var d,h,p=(0,j.get)(u,[e]);if((0,j.isNil)(p))return[];if((0,j.isString)(p)){var v=Number(p);return isNaN(v)?[]:(d={},d[n]=u[n],d[e]=v,d)}return(0,j.isArray)(p)?(s=!0,o=Math.max(o,p.length),(0,j.map)(r?p.sort(function(m,b){return b-m}):p,function(m,b){var _;return _={},_[n]=u[n],_[e]=m,_.index=b,_})):(o=Math.max(1,o),h={},h[n]=u[n],h[e]=p,h)}).flat();return s?[l.map(function(u){return ld({index:0},u)}),o]:[l,o]}function TP(t,e){return new Array(t).fill("").map(function(n,r){return(0,j.isArray)(e)?e[r%e.length]:e})}function SY(t){var e=function(o){var s=o.options,l=s.color,u=s.rangeField,d=u===void 0?"ranges":u,h=s.measureField,p=h===void 0?"measures":h,v=s.targetField,m=v===void 0?"targets":v,b=s.xField,_=b===void 0?"title":b,S=s.mapField,O=s.data,E=AP(O,d,_),A=E[0],M=E[1],L=AP(O,p,_,!1),I=L[0],R=L[1],N=AP(O,m,_,!1),Z=N[0],W=N[1],it=(0,j.get)(l,[d],tO[0]),tt=(0,j.get)(l,[p],tO[1]),pt=(0,j.get)(l,[m],tO[2]),K=[TP(M,it),TP(R,tt),TP(W,pt)].flat();return s.children=(0,j.map)(s.children,function(lt,ft){var vt=[A,I,Z][ft],It=[d,p,m][ft];return ld(ld({},lt),{data:vt,encode:ld(ld({},lt.encode||{}),{x:_,y:It,color:function(_t){var Lt=_t.index,$t=(0,j.isNumber)(Lt)?"".concat(It,"_").concat(Lt):It;return S?(0,j.get)(S,[It,Lt],$t):$t}})})}),(0,j.set)(s,"scale.color.range",K),s.legend.color.itemMarker=function(lt){return S&&(0,j.includes)(S==null?void 0:S[m],lt)||(lt==null?void 0:lt.replace(/\_\d$/,""))===m?"line":"square"},o},n=function(o){var s=o.options.transpose,l=s===void 0?!0:s;return l||(0,j.set)(o,"options.children[2].shapeField","hyphen"),o},r=function(o){var s=o.options,l=s.range,u=l===void 0?{}:l,d=s.measure,h=d===void 0?{}:d,p=s.target,v=p===void 0?{}:p,m=s.children;return s.children=[u,h,v].map(function(b,_){return Su(m[_],b)}),o};return(0,j.flow)(e,n,r,xY,Hr)(t)}var OY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),EY=function(t){OY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bullet",n}return e.getDefaultOptions=function(){return{type:"view",scale:{color:{range:tO}},legend:{color:{itemMarker:function(n){return n==="targets"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30,zIndex:-2},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20,zIndex:-1},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return SY},e}(Nr);function wY(t){var e=function(n){var r=n.options.data;return n.options.data={value:r},n};return(0,j.flow)(e,Mi,Hr)(t)}var AY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TY=function(t){AY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Gauge",n}return e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wY},e}(Nr);function CY(t){var e=function(n){var r=n.options.percent;return(0,j.isNumber)(r)&&((0,j.set)(n,"options.data",r),delete n.options.percent),n};return(0,j.flow)(e,Mi,Hr)(t)}var MY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LY=function(t){MY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Liquid",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return CY},e}(Nr);function PY(t){return(0,j.flow)(Mi,Hr)(t)}var IY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kY=function(t){IY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="WordCloud",n}return e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return PY},e}(Nr);function RY(t){return(0,j.flow)(JS,Mi,Hr)(t)}var DY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),NY=function(t){DY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="treemap",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return RY},e}(Nr),Eu=function(){return Eu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Eu.apply(this,arguments)},FY=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function BY(t){var e=function(o){var s=o.options,l=s.startAngle,u=s.maxAngle,d=s.coordinate,h=(0,j.isNumber)(l)?l/(2*Math.PI)*360:-90,p=(0,j.isNumber)(u)?(Number(u)+h)/180*Math.PI:Math.PI;return(0,j.set)(o,["options","coordinate"],Eu(Eu({},d),{endAngle:p,startAngle:l!=null?l:-Math.PI/2})),o},n=function(o){var s=o.options,l=s.tooltip,u=s.xField,d=s.yField,h=KS(u),p=KS(d);return l||(0,j.set)(s,"tooltip",{title:!1,items:[function(v,m,b){return{name:h(v,m,b),value:p(v,m,b)}}]}),o},r=function(o){var s=o.options,l=s.markBackground,u=s.children,d=s.scale,h=s.coordinate,p=s.xField,v=(0,j.get)(d,"y.domain",[]);if(l){var m=l.style,b=FY(l,["style"]);u.unshift(Eu({type:"interval",xField:p,yField:v[v.length-1],style:Eu({fillOpacity:.4,fill:"#e0e4ee"},m),coordinate:Eu(Eu({},h),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},b))}return o};return(0,j.flow)(e,n,r,Mi,Hr)(t)}var jY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zY=function(t){jY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radial",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return BY},e}(Nr);function UY(t){return(0,j.flow)(JS,Hr)(t)}var ZY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HY=function(t){ZY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="CirclePacking",n}return e.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack",encode:{color:"depth"}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return UY},e}(Nr),eO=function(){return eO=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},eO.apply(this,arguments)};function CP(t,e){return t||e}function VY(t){var e=function(n){var r=n.options,o=r.xField,s=r.yField,l=r.colorField,u=r.seriesField,d=r.children,h=d==null?void 0:d.map(function(p){return eO(eO({},p),{xField:o,yField:s,seriesField:CP(u,l),colorField:CP(l,u),data:p.type==="density"?{transform:[{type:"kde",field:s,groupBy:[o,CP(u,l)]}]}:p.data})}).filter(function(p){return r.box||p.type==="density"});return(0,j.set)(r,"children",h),delete r.box,n};return(0,j.flow)(e,Mi,Hr)(t)}var WY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GY=function(t){WY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="violin",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return VY},e}(Nr),ny=function(){return ny=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ny.apply(this,arguments)},$Y=function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};function YY(t){var e=function(s){var l=s.options,u=l.yField,d=l.children;return d.forEach(function(h,p){(0,j.set)(h,"yField",u[p])}),s},n=function(s){var l=s.options,u=l.yField,d=l.children,h=l.data;if((0,j.isPlainObject)(h))return s;var p=(0,j.isArray)((0,j.get)(h,[0]))?h:[h,h];return d.forEach(function(v,m){(0,j.set)(v,"data",$Y([],p[m].map(function(b){return ny({groupKey:u[m]},b)}),!0))}),s},r=function(s){var l=s.options,u=l.yField,d=u[0],h=u[1],p=l.tooltip;return p||(0,j.set)(l,"tooltip",{items:[{field:d,value:d},{field:h,value:h}]}),s},o=function(s){var l=s.options,u=l.children,d=l.layout,h=l.coordinate.transform,p=l.paddingBottom,v=p===void 0?o9:p,m=l.paddingLeft,b=m===void 0?o9:m,_=l.axis;(0,j.set)(l,"axisText",ny(ny({},(_==null?void 0:_.x)||{}),{layout:d}));var S=u[0],O=u[1];if(d==="vertical")(0,j.set)(l,"direction","col"),(0,j.set)(l,"paddingLeft",b),(0,j.set)(l,"coordinate.transform",h.filter(function(I){return I.type!=="transpose"})),(0,j.set)(S,"paddingBottom",i9),(0,j.set)(O,"paddingTop",i9),(0,j.set)(O,"axis.x.position","top"),(0,j.set)(O,"scale.y.range",[0,1]);else{(0,j.set)(l,"paddingBottom",v),(0,j.set)(S,"scale.y.range",[0,1]);var E=S.paddingRight,A=E===void 0?_P:E,M=O.paddingLeft,L=M===void 0?_P:M;(0,j.set)(S,"paddingRight",A),(0,j.set)(S,"axis.x.position","right"),(0,j.set)(O,"paddingLeft",L)}return s};return(0,j.flow)(e,n,r,o,Mi,Hr)(t)}var XY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qY=function(t){XY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return e.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return YY},e}(Nr),wu;(function(t){t.color="key",t.d="path"})(wu||(wu={}));function KY(t){var e=function(n){var r=n.options,o=r.data,s=r.setsField,l=r.sizeField;return(0,j.isArray)(o)&&((0,j.set)(r,"data",{type:"inline",value:o,transform:[{type:"venn",sets:s,size:l,as:[wu.color,wu.d]}]}),(0,j.set)(r,"colorField",wu.color),(0,j.set)(r,["children","0","encode","d"],wu.d)),n};return(0,j.flow)(e,Hr)(t)}var QY=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),JY=function(t){QY(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="venn",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:wu.color,d:wu.d}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return KY},e}(Nr);function tX(t){return(0,j.flow)(JS,Hr)(t)}var eX=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nX=function(t){eX(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Sunburst",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return tX},e}(Nr),rX={Base:o$,Line:w$,Column:m$,Pie:C$,Area:f$,Bar:p$,DualAxes:l9,Funnel:S$,Scatter:P$,Radar:R$,Rose:nY,Stock:B$,TinyLine:U$,TinyArea:V$,TinyColumn:$$,TinyProgress:q$,TinyRing:J$,Waterfall:aY,Histogram:lY,Heatmap:dY,Box:gY,Sankey:bY,Bullet:EY,Gauge:TY,Liquid:LY,WordCloud:kY,Treemap:NY,RadialBar:zY,CirclePacking:HY,Violin:GY,BidirectionalBar:qY,Venn:JY,Mix:l9,Sunburst:nX},ry=function(){return ry=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ry.apply(this,arguments)},u9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},iX=(0,nt.forwardRef)(function(t,e){var n=t.chartType,r=n===void 0?"Base":n,o=u9(t,["chartType"]),s=o.containerStyle,l=s===void 0?{height:"inherit",flex:1}:s,u=o.containerAttributes,d=u===void 0?{}:u,h=o.className,p=o.loading,v=o.loadingTemplate,m=o.errorTemplate,b=o.onReady,_=u9(o,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate","onReady"]),S=pe(rX[r],ry(ry({},_),{onReady:function(A){e&&(typeof e=="function"?e(A):e.current=A),b==null||b(A)}})),O=S.chart,E=S.container;return nt.createElement(Me,{errorTemplate:m},p&&nt.createElement(Gt,{loadingTemplate:v,theme:o.theme,loading:p}),nt.createElement("div",ry({className:h,style:l,ref:E},d)))}),oX=(0,nt.createContext)({});function aX(){return(0,nt.useContext)(oX)}var MP=function(){return MP=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},MP.apply(this,arguments)};function sX(t){var e=t.yField,n=t.data,r=(0,j.isArray)(n)&&n.length>0&&(0,j.isString)(e)&&!(0,j.get)(t,"scale.y.domainMax"),o=Object.isFrozen(t)?MP({},t):t;return r&&n.reduce(function(s,l){return s+l[e]},0)===0?(0,j.set)(o,"scale.y.domainMax",1):r&&n.reduce(function(s,l){return s+l[e]},0)!==0&&(0,j.set)(o,"scale.y.domainMax",void 0),o}var iy=function(){return iy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},iy.apply(this,arguments)};function cX(t){var e=t.charAt(0).toLowerCase()+t.slice(1);return(0,nt.forwardRef)(function(n,r){var o,s,l=aX(),u=(0,nt.useMemo)(function(){return t.charAt(0).toLowerCase()+t.slice(1)},[t]),d=(0,j.flow)([sX])(n),h=iy(iy({},(o=l==null?void 0:l.common)!==null&&o!==void 0?o:{}),(s=l==null?void 0:l[u])!==null&&s!==void 0?s:{});return nt.createElement(iX,iy({},h,d,{chartType:t,ref:r}))})}},6466:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return we}});var xt=D(4942),st=D(1413),Ot=D(91),Xt=D(21532),nt=D(93967),qt=D.n(nt),jt=D(67294),Ut=D(53911),gt=D(44962),ee=D(64847),J=function(et){return(0,xt.Z)({},et.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:et.marginLG,marginInline:0,color:et.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function Q(Vt){return(0,ee.Xj)("ProCardOperation",function(et){var oe=(0,st.Z)((0,st.Z)({},et),{},{componentCls:".".concat(Vt)});return[J(oe)]})}var Rt=D(85893),Tt=function(et){var oe=et.className,Gt=et.style,ke=Gt===void 0?{}:Gt,Me=et.children,j=(0,jt.useContext)(Xt.ZP.ConfigContext),Mt=j.getPrefixCls,$=Mt("pro-card-operation"),Ct=Q($),wt=Ct.wrapSSR,z=Ct.hashId,ot=qt()($,oe,z);return wt((0,Rt.jsx)("div",{className:ot,style:ke,children:Me}))},Ft=Tt,kt=D(38521),Yt=function(et){return(0,xt.Z)({},et.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,xt.Z)({flexDirection:"row"},"".concat(et.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(et.colorBorder)}})};function Se(Vt){return(0,ee.Xj)("StatisticCard",function(et){var oe=(0,st.Z)((0,st.Z)({},et),{},{componentCls:".".concat(Vt)});return[Yt(oe)]})}var Ie=["children","statistic","className","chart","chartPlacement","footer"],Ye=function(et){var oe=et.children,Gt=et.statistic,ke=et.className,Me=et.chart,j=et.chartPlacement,Mt=et.footer,$=(0,Ot.Z)(et,Ie),Ct=(0,jt.useContext)(Xt.ZP.ConfigContext),wt=Ct.getPrefixCls,z=wt("pro-statistic-card"),ot=Se(z),Jt=ot.wrapSSR,de=ot.hashId,pe=qt()(z,ke,de),Xe=Gt&&(0,Rt.jsx)(kt.Z,(0,st.Z)({layout:"vertical"},Gt)),je=qt()("".concat(z,"-chart"),de,(0,xt.Z)((0,xt.Z)({},"".concat(z,"-chart-left"),j==="left"&&Me&&Gt),"".concat(z,"-chart-right"),j==="right"&&Me&&Gt)),sn=Me&&(0,Rt.jsx)("div",{className:je,children:Me}),ln=qt()("".concat(z,"-content "),de,(0,xt.Z)({},"".concat(z,"-content-horizontal"),j==="left"||j==="right")),Zt=(sn||Xe)&&(j==="left"?(0,Rt.jsxs)("div",{className:ln,children:[sn,Xe]}):(0,Rt.jsxs)("div",{className:ln,children:[Xe,sn]})),ct=Mt&&(0,Rt.jsx)("div",{className:"".concat(z,"-footer ").concat(de).trim(),children:Mt});return Jt((0,Rt.jsxs)(Ut.Z,(0,st.Z)((0,st.Z)({className:pe},$),{},{children:[Zt,oe,ct]})))},un=function(et){return(0,Rt.jsx)(Ye,(0,st.Z)({bodyStyle:{padding:0}},et))};Ye.Statistic=kt.Z,Ye.Divider=gt.Z,Ye.Operation=Ft,Ye.isProCard=!0,Ye.Group=un;var we=Ye},38521:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return re}});var xt=D(1413),st=D(4942),Ot=D(91),Xt=D(87462),nt=D(67294),qt=D(36688),jt=D(55304),Ut=function(Y,Dt){return nt.createElement(jt.Z,(0,Xt.Z)({},Y,{ref:Dt,icon:qt.Z}))},gt=nt.forwardRef(Ut),ee=gt,J=D(21532),Q=D(83062),Rt=D(40411),Tt=D(56790),Ft=D(75164),kt=D(96159),Yt=D(93967),Se=D.n(Yt),Ie=D(64217),Ye=D(53124),un=D(48054),Vt=Pt=>{const{value:Y,formatter:Dt,precision:V,decimalSeparator:C,groupSeparator:F="",prefixCls:At}=Pt;let Kt;if(typeof Dt=="function")Kt=Dt(Y);else{const ne=String(Y),be=ne.match(/^(-?)(\d*)(\.(\d+))?$/);if(!be||ne==="-")Kt=ne;else{const Ce=be[1];let Re=be[2]||"0",Le=be[4]||"";Re=Re.replace(/\B(?=(\d{3})+(?!\d))/g,F),typeof V=="number"&&(Le=Le.padEnd(V,"0").slice(0,V>0?V:0)),Le&&(Le=`${C}${Le}`),Kt=[nt.createElement("span",{key:"int",className:`${At}-content-value-int`},Ce,Re),Le&&nt.createElement("span",{key:"decimal",className:`${At}-content-value-decimal`},Le)]}}return nt.createElement("span",{className:`${At}-content-value`},Kt)},et=D(14747),oe=D(83559),Gt=D(83262);const ke=Pt=>{const{componentCls:Y,marginXXS:Dt,padding:V,colorTextDescription:C,titleFontSize:F,colorTextHeading:At,contentFontSize:Kt,fontFamily:ne}=Pt;return{[Y]:Object.assign(Object.assign({},(0,et.Wf)(Pt)),{[`${Y}-title`]:{marginBottom:Dt,color:C,fontSize:F},[`${Y}-skeleton`]:{paddingTop:V},[`${Y}-content`]:{color:At,fontSize:Kt,fontFamily:ne,[`${Y}-content-value`]:{display:"inline-block",direction:"ltr"},[`${Y}-content-prefix, ${Y}-content-suffix`]:{display:"inline-block"},[`${Y}-content-prefix`]:{marginInlineEnd:Dt},[`${Y}-content-suffix`]:{marginInlineStart:Dt}}})}},Me=Pt=>{const{fontSizeHeading3:Y,fontSize:Dt}=Pt;return{titleFontSize:Dt,contentFontSize:Y}};var j=(0,oe.I$)("Statistic",Pt=>{const Y=(0,Gt.IX)(Pt,{});return ke(Y)},Me),Mt=function(Pt,Y){var Dt={};for(var V in Pt)Object.prototype.hasOwnProperty.call(Pt,V)&&Y.indexOf(V)<0&&(Dt[V]=Pt[V]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,V=Object.getOwnPropertySymbols(Pt);C<V.length;C++)Y.indexOf(V[C])<0&&Object.prototype.propertyIsEnumerable.call(Pt,V[C])&&(Dt[V[C]]=Pt[V[C]]);return Dt},Ct=nt.forwardRef((Pt,Y)=>{const{prefixCls:Dt,className:V,rootClassName:C,style:F,valueStyle:At,value:Kt=0,title:ne,valueRender:be,prefix:Ce,suffix:Re,loading:Le=!1,formatter:He,precision:$e,decimalSeparator:Ht=".",groupSeparator:ie=",",onMouseEnter:te,onMouseLeave:ve}=Pt,ut=Mt(Pt,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:k,direction:H,className:rt,style:yt}=(0,Ye.dj)("statistic"),bt=k("statistic",Dt),[ce,se,Ne]=j(bt),Pe=nt.createElement(Vt,{decimalSeparator:Ht,groupSeparator:ie,prefixCls:bt,formatter:He,precision:$e,value:Kt}),rn=Se()(bt,{[`${bt}-rtl`]:H==="rtl"},rt,V,C,se,Ne),Oe=nt.useRef(null);nt.useImperativeHandle(Y,()=>({nativeElement:Oe.current}));const qe=(0,Ie.Z)(ut,{aria:!0,data:!0});return ce(nt.createElement("div",Object.assign({},qe,{ref:Oe,className:rn,style:Object.assign(Object.assign({},yt),F),onMouseEnter:te,onMouseLeave:ve}),ne&&nt.createElement("div",{className:`${bt}-title`},ne),nt.createElement(un.Z,{paragraph:!1,loading:Le,className:`${bt}-skeleton`,active:!0},nt.createElement("div",{style:At,className:`${bt}-content`},Ce&&nt.createElement("span",{className:`${bt}-content-prefix`},Ce),be?be(Pe):Pe,Re&&nt.createElement("span",{className:`${bt}-content-suffix`},Re)))))});const wt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function z(Pt,Y){let Dt=Pt;const V=/\[[^\]]*]/g,C=(Y.match(V)||[]).map(ne=>ne.slice(1,-1)),F=Y.replace(V,"[]"),At=wt.reduce((ne,[be,Ce])=>{if(ne.includes(be)){const Re=Math.floor(Dt/Ce);return Dt-=Re*Ce,ne.replace(new RegExp(`${be}+`,"g"),Le=>{const He=Le.length;return Re.toString().padStart(He,"0")})}return ne},F);let Kt=0;return At.replace(V,()=>{const ne=C[Kt];return Kt+=1,ne})}function ot(Pt,Y,Dt){const{format:V=""}=Y,C=new Date(Pt).getTime(),F=Date.now(),At=Math.max(Dt?C-F:F-C,0);return z(At,V)}var Jt=function(Pt,Y){var Dt={};for(var V in Pt)Object.prototype.hasOwnProperty.call(Pt,V)&&Y.indexOf(V)<0&&(Dt[V]=Pt[V]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,V=Object.getOwnPropertySymbols(Pt);C<V.length;C++)Y.indexOf(V[C])<0&&Object.prototype.propertyIsEnumerable.call(Pt,V[C])&&(Dt[V[C]]=Pt[V[C]]);return Dt};function de(Pt){return new Date(Pt).getTime()}var Xe=Pt=>{const{value:Y,format:Dt="HH:mm:ss",onChange:V,onFinish:C,type:F}=Pt,At=Jt(Pt,["value","format","onChange","onFinish","type"]),Kt=F==="countdown",[ne,be]=nt.useState(null),Ce=(0,Tt.zX)(()=>{const He=Date.now(),$e=de(Y);be({});const Ht=Kt?$e-He:He-$e;return V==null||V(Ht),Kt&&$e<He?(C==null||C(),!1):!0});nt.useEffect(()=>{let He;const $e=()=>Ft.Z.cancel(He),Ht=()=>{He=(0,Ft.Z)(()=>{Ce()&&Ht()})};return Ht(),$e},[Y,Kt]),nt.useEffect(()=>{be({})},[]);const Re=(He,$e)=>ne?ot(He,Object.assign(Object.assign({},$e),{format:Dt}),Kt):"-",Le=He=>(0,kt.Tm)(He,{title:void 0});return nt.createElement(Ct,Object.assign({},At,{value:Y,valueRender:Le,formatter:Re}))};const je=Pt=>nt.createElement(Xe,Object.assign({},Pt,{type:"countdown"}));var sn=nt.memo(je);Ct.Timer=Xe,Ct.Countdown=sn;var ln=Ct,Zt=D(64847),ct=function(Y){return(0,st.Z)({},Y.componentCls,(0,st.Z)((0,st.Z)((0,st.Z)((0,st.Z)((0,st.Z)({display:"flex",fontSize:Y.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,st.Z)({display:"flex",width:"100%"},"".concat(Y.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,st.Z)({width:"100%"},"".concat(Y.antCls,"-statistic-content"),{"&-value-int":{fontSize:Y.fontSizeHeading3}}),"&-description":{width:"100%"}},"".concat(Y.antCls,"-statistic-title"),{color:Y.colorText}),"&-trend-up",(0,st.Z)({},"".concat(Y.antCls,"-statistic-content"),(0,st.Z)({color:"#f5222d"},"".concat(Y.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),"&-trend-down",(0,st.Z)({},"".concat(Y.antCls,"-statistic-content"),(0,st.Z)({color:"#389e0d"},"".concat(Y.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),"& &-layout-horizontal",(0,st.Z)((0,st.Z)((0,st.Z)({display:"flex",justifyContent:"space-between"},"".concat(Y.antCls,"-statistic-title"),{marginBlockEnd:0}),"".concat(Y.antCls,"-statistic-content-value"),{fontWeight:500}),"".concat(Y.antCls,"-statistic-title,").concat(Y.antCls,"-statistic-content,").concat(Y.antCls,"-statistic-content-suffix,").concat(Y.antCls,"-statistic-content-prefix,").concat(Y.antCls,"-statistic-content-value-decimal"),{fontSize:Y.fontSize})),"& &-layout-inline",(0,st.Z)((0,st.Z)((0,st.Z)({display:"inline-flex",color:Y.colorTextSecondary},"".concat(Y.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),"".concat(Y.antCls,"-statistic-content"),{color:Y.colorTextSecondary}),"".concat(Y.antCls,"-statistic-title,").concat(Y.antCls,"-statistic-content,").concat(Y.antCls,"-statistic-content-suffix,").concat(Y.antCls,"-statistic-content-prefix,").concat(Y.antCls,"-statistic-content-value-decimal"),{fontSize:Y.fontSizeSM})))};function zt(Pt){return(0,Zt.Xj)("Statistic",function(Y){var Dt=(0,xt.Z)((0,xt.Z)({},Y),{},{componentCls:".".concat(Pt)});return[ct(Dt)]})}var ue=D(85893),_e=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],St=function(Y){var Dt=Y.className,V=Y.layout,C=V===void 0?"inline":V,F=Y.style,At=Y.description,Kt=Y.children,ne=Y.title,be=Y.tip,Ce=Y.status,Re=Y.trend,Le=Y.prefix,He=Y.icon,$e=(0,Ot.Z)(Y,_e),Ht=(0,nt.useContext)(J.ZP.ConfigContext),ie=Ht.getPrefixCls,te=ie("pro-card-statistic"),ve=zt(te),ut=ve.wrapSSR,k=ve.hashId,H=Se()(te,Dt,k),rt=Se()("".concat(te,"-status"),k),yt=Se()("".concat(te,"-icon"),k),bt=Se()("".concat(te,"-wrapper"),k),ce=Se()("".concat(te,"-content"),k),se=Se()(k,(0,st.Z)((0,st.Z)({},"".concat(te,"-layout-").concat(C),C),"".concat(te,"-trend-").concat(Re),Re)),Ne=be&&(0,ue.jsx)(Q.Z,{title:be,children:(0,ue.jsx)(ee,{className:"".concat(te,"-tip ").concat(k).trim()})}),Pe=Se()("".concat(te,"-trend-icon"),k,(0,st.Z)({},"".concat(te,"-trend-icon-").concat(Re),Re)),rn=Re&&(0,ue.jsx)("div",{className:Pe}),Oe=Ce&&(0,ue.jsx)("div",{className:rt,children:(0,ue.jsx)(Rt.Z,{status:Ce,text:null})}),qe=He&&(0,ue.jsx)("div",{className:yt,children:He});return ut((0,ue.jsxs)("div",{className:H,style:F,children:[qe,(0,ue.jsxs)("div",{className:bt,children:[Oe,(0,ue.jsxs)("div",{className:ce,children:[(0,ue.jsx)(ln,(0,xt.Z)({title:(ne||Ne)&&(0,ue.jsxs)(ue.Fragment,{children:[ne,Ne]}),prefix:(rn||Le)&&(0,ue.jsxs)(ue.Fragment,{children:[rn,Le]}),className:se},$e)),At&&(0,ue.jsx)("div",{className:"".concat(te,"-description ").concat(k).trim(),children:At})]})]})]}))},re=St},17816:function(Te,fe){(function(D,xt){xt(fe)})(this,function(D){"use strict";function xt(at){var ht=typeof Symbol=="function"&&Symbol.iterator,Wt=ht&&at[ht],ae=0;if(Wt)return Wt.call(at);if(at&&typeof at.length=="number")return{next:function(){return{value:(at=at&&ae>=at.length?void 0:at)&&at[ae++],done:!at}}};throw new TypeError(ht?"Object is not iterable.":"Symbol.iterator is not defined.")}function st(at,ht){var Wt=typeof Symbol=="function"&&at[Symbol.iterator];if(!Wt)return at;var ae,Ae,De=Wt.call(at),ge=[];try{for(;(ht===void 0||0<ht--)&&!(ae=De.next()).done;)ge.push(ae.value)}catch(me){Ae={error:me}}finally{try{ae&&!ae.done&&(Wt=De.return)&&Wt.call(De)}finally{if(Ae)throw Ae.error}}return ge}function Ot(at,ht,Wt){if(Wt||arguments.length===2)for(var ae,Ae=0,De=ht.length;Ae<De;Ae++)!ae&&Ae in ht||((ae=ae||Array.prototype.slice.call(ht,0,Ae))[Ae]=ht[Ae]);return at.concat(ae||Array.prototype.slice.call(ht))}function Xt(at){return qt(at,"Function")}var nt={}.toString,qt=function(at,ht){return nt.call(at)==="[object "+ht+"]"},jt=function(at){return Array.isArray?Array.isArray(at):qt(at,"Array")},Ut=function(at){if(typeof(ht=at)!="object"||ht===null||!qt(at,"Object"))return!1;var ht;if(Object.getPrototypeOf(at)===null)return!0;for(var Wt=at;Object.getPrototypeOf(Wt)!==null;)Wt=Object.getPrototypeOf(Wt);return Object.getPrototypeOf(at)===Wt},gt=function(at){return qt(at,"Number")},ee=Object.values?function(at){return Object.values(at)}:function(at){var ht,Wt=[],ae=at,Ae=function(Ze,We){Xt(at)&&We==="prototype"||Wt.push(Ze)};if(ae){if(jt(ae))for(var De=0,ge=ae.length;De<ge&&Ae(ae[De],De)!==!1;De++);else if(ht=typeof ae,ae!==null&&ht=="object"||ht=="function"){for(var me in ae)if(ae.hasOwnProperty(me)&&Ae(ae[me],me)===!1)break}}return Wt},J=5;function Q(at){for(var ht=[],Wt=1;Wt<arguments.length;Wt++)ht[Wt-1]=arguments[Wt];for(var ae=0;ae<ht.length;ae+=1)(function Ae(De,ge,me,Ze){for(var We in me=me||0,Ze=Ze||J,ge){var vn;ge.hasOwnProperty(We)&&((vn=ge[We])!==null&&Ut(vn)?(Ut(De[We])||(De[We]={}),me<Ze?Ae(De[We],vn,me+1,Ze):De[We]=ge[We]):jt(vn)?(De[We]=[],De[We]=De[We].concat(vn)):vn!==void 0&&(De[We]=vn))}})(at,ht[ae]);return at}function Rt(at){return at}(function(at,ht){var Wt;if(Xt(at))return(Wt=function(){for(var ae=[],Ae=0;Ae<arguments.length;Ae++)ae[Ae]=arguments[Ae];var De,ge=ht?ht.apply(this,ae):ae[0],me=Wt.cache;return me.has(ge)?me.get(ge):(De=at.apply(this,ae),me.set(ge,De),De)}).cache=new Map;throw new TypeError("Expected a function")})(function(at,ge){var Wt=(ge=ge===void 0?{}:ge).fontSize,ae=ge.fontFamily,Ae=ge.fontWeight,De=ge.fontStyle,ge=ge.fontVariant;return(Tt=Tt||document.createElement("canvas").getContext("2d")).font=[De,ge,Ae,Wt+"px",ae].join(" "),Tt.measureText(qt(at,"String")?at:"").width},function(at,ht){return function(){for(var Wt=0,ae=0,Ae=arguments.length;ae<Ae;ae++)Wt+=arguments[ae].length;for(var De=Array(Wt),ge=0,ae=0;ae<Ae;ae++)for(var me=arguments[ae],Ze=0,We=me.length;Ze<We;Ze++,ge++)De[ge]=me[Ze];return De}([at],ee(ht=ht===void 0?{}:ht)).join("")});var Tt,Ft=typeof Float32Array!="undefined"?Float32Array:Array;function kt(){var at=new Ft(9);return Ft!=Float32Array&&(at[1]=0,at[2]=0,at[3]=0,at[5]=0,at[6]=0,at[7]=0),at[0]=1,at[4]=1,at[8]=1,at}Math.hypot||(Math.hypot=function(){for(var at=0,ht=arguments.length;ht--;)at+=arguments[ht]*arguments[ht];return Math.sqrt(at)});var Yt=function(at,xn,Ln){var ae=xn[0],Ae=xn[1],De=xn[2],ge=xn[3],me=xn[4],Ze=xn[5],We=xn[6],vn=xn[7],xn=xn[8],In=Ln[0],mn=Ln[1],_n=Ln[2],On=Ln[3],hn=Ln[4],Hn=Ln[5],Rn=Ln[6],Vn=Ln[7],Ln=Ln[8];return at[0]=In*ae+mn*ge+_n*We,at[1]=In*Ae+mn*me+_n*vn,at[2]=In*De+mn*Ze+_n*xn,at[3]=On*ae+hn*ge+Hn*We,at[4]=On*Ae+hn*me+Hn*vn,at[5]=On*De+hn*Ze+Hn*xn,at[6]=Rn*ae+Vn*ge+Ln*We,at[7]=Rn*Ae+Vn*me+Ln*vn,at[8]=Rn*De+Vn*Ze+Ln*xn,at};function Se(){var at=new Ft(16);return Ft!=Float32Array&&(at[1]=0,at[2]=0,at[3]=0,at[4]=0,at[6]=0,at[7]=0,at[8]=0,at[9]=0,at[11]=0,at[12]=0,at[13]=0,at[14]=0),at[0]=1,at[5]=1,at[10]=1,at[15]=1,at}var Ie=function(at,Rn,Wt){var ae=Rn[0],Ae=Rn[1],De=Rn[2],ge=Rn[3],me=Rn[4],Ze=Rn[5],We=Rn[6],vn=Rn[7],xn=Rn[8],In=Rn[9],mn=Rn[10],_n=Rn[11],On=Rn[12],hn=Rn[13],Hn=Rn[14],Rn=Rn[15],Vn=Wt[0],Ln=Wt[1],Bn=Wt[2],nr=Wt[3];return at[0]=Vn*ae+Ln*me+Bn*xn+nr*On,at[1]=Vn*Ae+Ln*Ze+Bn*In+nr*hn,at[2]=Vn*De+Ln*We+Bn*mn+nr*Hn,at[3]=Vn*ge+Ln*vn+Bn*_n+nr*Rn,Vn=Wt[4],Ln=Wt[5],Bn=Wt[6],nr=Wt[7],at[4]=Vn*ae+Ln*me+Bn*xn+nr*On,at[5]=Vn*Ae+Ln*Ze+Bn*In+nr*hn,at[6]=Vn*De+Ln*We+Bn*mn+nr*Hn,at[7]=Vn*ge+Ln*vn+Bn*_n+nr*Rn,Vn=Wt[8],Ln=Wt[9],Bn=Wt[10],nr=Wt[11],at[8]=Vn*ae+Ln*me+Bn*xn+nr*On,at[9]=Vn*Ae+Ln*Ze+Bn*In+nr*hn,at[10]=Vn*De+Ln*We+Bn*mn+nr*Hn,at[11]=Vn*ge+Ln*vn+Bn*_n+nr*Rn,Vn=Wt[12],Ln=Wt[13],Bn=Wt[14],nr=Wt[15],at[12]=Vn*ae+Ln*me+Bn*xn+nr*On,at[13]=Vn*Ae+Ln*Ze+Bn*In+nr*hn,at[14]=Vn*De+Ln*We+Bn*mn+nr*Hn,at[15]=Vn*ge+Ln*vn+Bn*_n+nr*Rn,at};function Ye(at){for(var ht=[],Wt=1;Wt<arguments.length;Wt++)ht[Wt-1]=arguments[Wt];return at?ht.reduce(function(ae,Ae){return function(De){return Ae(ae(De))}},at):Rt}function un(at){return at instanceof Float32Array||at instanceof Array}function we(at,ht,Wt){for(;at<ht;)at+=2*Math.PI;for(;Wt<at;)at-=2*Math.PI;return at}rt=new Ft(3),Ft!=Float32Array&&(rt[0]=0,rt[1]=0,rt[2]=0),rt=new Ft(4),Ft!=Float32Array&&(rt[0]=0,rt[1]=0,rt[2]=0,rt[3]=0);function Vt(ge,ht,Wt,ae,Ae){var De=(ge=st(ge,2))[0],ge=ge[1],me=kt();return De=[De,ge],(ge=me)[0]=1,ge[1]=0,ge[2]=0,ge[3]=0,ge[4]=1,ge[5]=0,ge[6]=De[0],ge[7]=De[1],ge[8]=1,ge}function et(at,...ht){return ht.reduce((Wt,ae)=>Ae=>Wt(ae(Ae)),at)}function oe(at,ht){return ht-at?Wt=>(Wt-at)/(ht-at):Wt=>.5}const Gt=Math.sqrt(50),ke=Math.sqrt(10),Me=Math.sqrt(2);function j(at,ht,Wt){return ht=(ht-at)/Math.max(0,Wt),at=Math.floor(Math.log(ht)/Math.LN10),Wt=ht/bi(10,at),0<=at?(Wt>=Gt?10:Wt>=ke?5:Wt>=Me?2:1)*bi(10,at):-bi(10,-at)/(Wt>=Gt?10:Wt>=ke?5:Wt>=Me?2:1)}const Mt=(at,ht,Wt=5)=>{at=[at,ht];let ae=0,Ae=at.length-1,De=at[ae],ge=at[Ae],me;return ge<De&&([De,ge]=[ge,De],[ae,Ae]=[Ae,ae]),0<(me=j(De,ge,Wt))?(De=Math.floor(De/me)*me,ge=Math.ceil(ge/me)*me,me=j(De,ge,Wt)):me<0&&(De=Math.ceil(De*me)/me,ge=Math.floor(ge*me)/me,me=j(De,ge,Wt)),0<me?(at[ae]=Math.floor(De/me)*me,at[Ae]=Math.ceil(ge/me)*me):me<0&&(at[ae]=Math.ceil(De*me)/me,at[Ae]=Math.floor(ge*me)/me),at};function $(at){return at!=null&&!Number.isNaN(at)}function Ct(at,ht){return Wt=>{Wt.prototype.rescale=function(){this.initRange(),this.nice();var[ae]=this.chooseTransforms();this.composeOutput(ae,this.chooseClamp(ae))},Wt.prototype.initRange=function(){var ae=this.options.interpolator;this.options.range=at(ae)},Wt.prototype.composeOutput=function(ae,Ae){var De,{domain:me,interpolator:ge,round:Ze}=this.getOptions(),me=ht(me.map(ae)),Ze=Ze?(De=ge,We=>(We=De(We),gt(We)?Math.round(We):We)):ge;this.output=et(Ze,me,Ae,ae)},Wt.prototype.invert=void 0}}var wt,rt={exports:{}},H={exports:{}},z=function(at){return!(!at||typeof at=="string")&&(at instanceof Array||Array.isArray(at)||0<=at.length&&(at.splice instanceof Function||Object.getOwnPropertyDescriptor(at,at.length-1)&&at.constructor.name!=="String"))},ot=Array.prototype.concat,Jt=Array.prototype.slice,de=H.exports=function(at){for(var ht=[],Wt=0,ae=at.length;Wt<ae;Wt++){var Ae=at[Wt];z(Ae)?ht=ot.call(ht,Jt.call(Ae)):ht.push(Ae)}return ht},pe=(de.wrap=function(at){return function(){return at(de(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Xe=H.exports,je=Object.hasOwnProperty,sn=Object.create(null);for(wt in pe)je.call(pe,wt)&&(sn[pe[wt]]=wt);var ln=rt.exports={to:{},get:{}};function Zt(at,ht,Wt){return Math.min(Math.max(ht,at),Wt)}function ct(at){return at=Math.round(at).toString(16).toUpperCase(),at.length<2?"0"+at:at}ln.get=function(at){var ht,Wt;switch(at.substring(0,3).toLowerCase()){case"hsl":ht=ln.get.hsl(at),Wt="hsl";break;case"hwb":ht=ln.get.hwb(at),Wt="hwb";break;default:ht=ln.get.rgb(at),Wt="rgb"}return ht?{model:Wt,value:ht}:null},ln.get.rgb=function(at){if(!at)return null;var ht,Wt,ae,Ae=[0,0,0,1];if(ht=at.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(ae=ht[2],ht=ht[1],Wt=0;Wt<3;Wt++){var De=2*Wt;Ae[Wt]=parseInt(ht.slice(De,2+De),16)}ae&&(Ae[3]=parseInt(ae,16)/255)}else if(ht=at.match(/^#([a-f0-9]{3,4})$/i)){for(ae=(ht=ht[1])[3],Wt=0;Wt<3;Wt++)Ae[Wt]=parseInt(ht[Wt]+ht[Wt],16);ae&&(Ae[3]=parseInt(ae+ae,16)/255)}else{if(ht=at.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(Wt=0;Wt<3;Wt++)Ae[Wt]=parseInt(ht[Wt+1],0);else{if(!(ht=at.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(ht=at.match(/^(\w+)$/))?ht[1]==="transparent"?[0,0,0,0]:je.call(pe,ht[1])?((Ae=pe[ht[1]])[3]=1,Ae):null:null;for(Wt=0;Wt<3;Wt++)Ae[Wt]=Math.round(2.55*parseFloat(ht[Wt+1]))}ht[4]&&(ht[5]?Ae[3]=.01*parseFloat(ht[4]):Ae[3]=parseFloat(ht[4]))}for(Wt=0;Wt<3;Wt++)Ae[Wt]=Zt(Ae[Wt],0,255);return Ae[3]=Zt(Ae[3],0,1),Ae},ln.get.hsl=function(at){var ht;return(at=at&&at.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(ht=parseFloat(at[4]),[(parseFloat(at[1])%360+360)%360,Zt(parseFloat(at[2]),0,100),Zt(parseFloat(at[3]),0,100),Zt(isNaN(ht)?1:ht,0,1)]):null},ln.get.hwb=function(at){var ht;return(at=at&&at.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(ht=parseFloat(at[4]),[(parseFloat(at[1])%360+360)%360,Zt(parseFloat(at[2]),0,100),Zt(parseFloat(at[3]),0,100),Zt(isNaN(ht)?1:ht,0,1)]):null},ln.to.hex=function(){var at=Xe(arguments);return"#"+ct(at[0])+ct(at[1])+ct(at[2])+(at[3]<1?ct(Math.round(255*at[3])):"")},ln.to.rgb=function(){var at=Xe(arguments);return at.length<4||at[3]===1?"rgb("+Math.round(at[0])+", "+Math.round(at[1])+", "+Math.round(at[2])+")":"rgba("+Math.round(at[0])+", "+Math.round(at[1])+", "+Math.round(at[2])+", "+at[3]+")"},ln.to.rgb.percent=function(){var at=Xe(arguments),ht=Math.round(at[0]/255*100),Wt=Math.round(at[1]/255*100),ae=Math.round(at[2]/255*100);return at.length<4||at[3]===1?"rgb("+ht+"%, "+Wt+"%, "+ae+"%)":"rgba("+ht+"%, "+Wt+"%, "+ae+"%, "+at[3]+")"},ln.to.hsl=function(){var at=Xe(arguments);return at.length<4||at[3]===1?"hsl("+at[0]+", "+at[1]+"%, "+at[2]+"%)":"hsla("+at[0]+", "+at[1]+"%, "+at[2]+"%, "+at[3]+")"},ln.to.hwb=function(){var at=Xe(arguments),ht="";return 4<=at.length&&at[3]!==1&&(ht=", "+at[3]),"hwb("+at[0]+", "+at[1]+"%, "+at[2]+"%"+ht+")"},ln.to.keyword=function(at){return sn[at.slice(0,3)]};var zt=rt.exports;function ue(at,ht,Wt){let ae=Wt;return ae<0&&(ae+=1),1<ae&&--ae,ae<1/6?at+6*(ht-at)*ae:ae<.5?ht:ae<2/3?at+(ht-at)*(2/3-ae)*6:at}function _e(Ae){var ht,Wt,ae,Ae=zt.get(Ae);return Ae?({model:Ae,value:ht}=Ae,Ae==="rgb"?ht:Ae==="hsl"?(ht=(Ae=ht)[0]/360,Wt=Ae[1]/100,ae=Ae[2]/100,Ae=Ae[3],Wt==0?[255*ae,255*ae,255*ae,Ae]:[255*ue(Wt=2*ae-(ae=ae<.5?ae*(1+Wt):ae+Wt-ae*Wt),ae,ht+1/3),255*ue(Wt,ae,ht),255*ue(Wt,ae,ht-1/3),Ae]):null):null}const St=(at,ht)=>Wt=>at*(1-Wt)+ht*Wt,re=(at,ht)=>{if(typeof at=="number"&&typeof ht=="number")return St(at,ht);if(typeof at!="string"||typeof ht!="string")return()=>at;{var Wt=at,ae=ht;const Ae=_e(Wt),De=_e(ae);return Ae===null||De===null?Ae?()=>Wt:()=>ae:ge=>{var me=new Array(4);for(let _n=0;_n<4;_n+=1){var Ze=Ae[_n],We=De[_n];me[_n]=Ze*(1-ge)+We*ge}var[vn,xn,In,mn]=me;return`rgba(${Math.round(vn)}, ${Math.round(xn)}, ${Math.round(In)}, ${mn})`}}},Pt=(at,ht)=>{const Wt=St(at,ht);return ae=>Math.round(Wt(ae))};function Y({map:at,initKey:ht},Wt){return ht=ht(Wt),at.has(ht)?at.get(ht):Wt}function Dt(at){return typeof at=="object"?at.valueOf():at}class V extends Map{constructor(ht){if(super(),this.map=new Map,this.initKey=Dt,ht!==null)for(var[Wt,ae]of ht)this.set(Wt,ae)}get(ht){return super.get(Y({map:this.map,initKey:this.initKey},ht))}has(ht){return super.has(Y({map:this.map,initKey:this.initKey},ht))}set(ht,Wt){return super.set(([{map:ht,initKey:ae},Ae]=[{map:this.map,initKey:this.initKey},ht],ae=ae(Ae),ht.has(ae)?ht.get(ae):(ht.set(ae,Ae),Ae)),Wt);var ae,Ae}delete(ht){return super.delete(([{map:ht,initKey:Wt},ae]=[{map:this.map,initKey:this.initKey},ht],Wt=Wt(ae),ht.has(Wt)&&(ae=ht.get(Wt),ht.delete(Wt)),ae));var Wt,ae}}class C{constructor(ht){this.options=Q({},this.getDefaultOptions()),this.update(ht)}getOptions(){return this.options}update(ht={}){this.options=Q({},this.options,ht),this.rescale(ht)}rescale(ht){}}const F=Symbol("defaultUnknown");function At(at,ht,Wt){for(let ae=0;ae<ht.length;ae+=1)at.has(ht[ae])||at.set(Wt(ht[ae]),ae)}function Kt(ht){var{value:ht,from:Wt,to:ae,mapper:Ae,notFoundReturn:De}=ht;let ge=Ae.get(ht);if(ge===void 0){if(De!==F)return De;ge=Wt.push(ht)-1,Ae.set(ht,ge)}return ae[ge%ae.length]}function ne(at){return at instanceof Date?ht=>""+ht:typeof at=="object"?ht=>JSON.stringify(ht):ht=>ht}class be extends C{getDefaultOptions(){return{domain:[],range:[],unknown:F}}constructor(ht){super(ht)}map(ht){return this.domainIndexMap.size===0&&At(this.domainIndexMap,this.getDomain(),this.domainKey),Kt({value:this.domainKey(ht),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(ht){return this.rangeIndexMap.size===0&&At(this.rangeIndexMap,this.getRange(),this.rangeKey),Kt({value:this.rangeKey(ht),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(ht){var[Wt]=this.options.domain,[ae]=this.options.range;this.domainKey=ne(Wt),this.rangeKey=ne(ae),this.rangeIndexMap?(ht&&!ht.range||this.rangeIndexMap.clear(),ht&&!ht.domain&&!ht.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new be(this.options)}getRange(){return this.options.range}getDomain(){var ht,Wt;return this.sortedDomain||({domain:ht,compare:Wt}=this.options,this.sortedDomain=Wt?[...ht].sort(Wt):ht),this.sortedDomain}}function Ce(hn){const{domain:ht,range:Wt,paddingOuter:ae,paddingInner:Ae,flex:De,round:ge,align:me}=hn;var Ze=ht.length,mn=0<(mn=(hn=Ze)-(We=De).length)?[...We,...new Array(mn).fill(1)]:mn<0?We.slice(0,hn):We,[hn,We]=Wt,We=We-hn,On=We/(2/Ze*ae+1-1/Ze*Ae);const vn=On*Ae/Ze;On-=Ze*vn;const xn=function(Ln){const Bn=Math.min(...Ln);return Ln.map(nr=>nr/Bn)}(mn),In=On/xn.reduce((Ln,Bn)=>Ln+Bn);var mn=new V(ht.map((Ln,Bn)=>(Bn=xn[Bn]*In,[Ln,ge?Math.floor(Bn):Bn]))),_n=new V(ht.map((Ln,Bn)=>(Bn=xn[Bn]*In+vn,[Ln,ge?Math.floor(Bn):Bn]))),On=Array.from(_n.values()).reduce((Ln,Bn)=>Ln+Bn),hn=hn+(We-(On-On/Ze*Ae))*me;let Hn=ge?Math.round(hn):hn;var Rn=new Array(Ze);for(let Ln=0;Ln<Ze;Ln+=1){Rn[Ln]=(Vn=Hn,Math.round(1e12*Vn)/1e12);var Vn=ht[Ln];Hn+=_n.get(Vn)}return{valueBandWidth:mn,valueStep:_n,adjustedRange:Rn}}class Re extends be{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:F,flex:[]}}constructor(ht){super(ht)}clone(){return new Re(this.options)}getStep(ht){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:ht===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(ht)}getBandWidth(ht){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:ht===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(ht)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:ht,paddingInner:Wt}=this.options;return 0<ht?ht:Wt}getPaddingOuter(){var{padding:ht,paddingOuter:Wt}=this.options;return 0<ht?ht:Wt}rescale(){super.rescale();var{align:ae,domain:ht,range:Ae,round:De,flex:Wt}=this.options,{adjustedRange:ae,valueBandWidth:Ae,valueStep:De}=function(We){var me=We.domain;if((me=me.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((Ze=We.flex)==null||!Ze.length))return Ce(We);var{range:Ze,paddingOuter:We,paddingInner:vn,round:xn,align:In}=We;let mn,_n,On=Ze[0];return Ze=Ze[1]-On,mn=Ze/Math.max(1,2*We+(me-vn)),xn&&(mn=Math.floor(mn)),On+=(Ze-mn*(me-vn))*In,_n=mn*(1-vn),xn&&(On=Math.round(On),_n=Math.round(_n)),We=new Array(me).fill(0).map((hn,Hn)=>On+Hn*mn),{valueStep:mn,valueBandWidth:_n,adjustedRange:We}}({align:ae,range:Ae,round:De,flex:Wt,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:ht});this.valueStep=De,this.valueBandWidth=Ae,this.adjustedRange=ae}}const Le=(at,ht,Wt)=>{let ae,Ae,De=at,ge=ht;if(De===ge&&0<Wt)return[De];let me=j(De,ge,Wt);if(me===0||!Number.isFinite(me))return[];if(0<me){De=Math.ceil(De/me),ge=Math.floor(ge/me),Ae=new Array(ae=Math.ceil(ge-De+1));for(let Ze=0;Ze<ae;Ze+=1)Ae[Ze]=(De+Ze)*me}else{me=-me,De=Math.ceil(De*me),ge=Math.floor(ge*me),Ae=new Array(ae=Math.ceil(ge-De+1));for(let Ze=0;Ze<ae;Ze+=1)Ae[Ze]=(De+Ze)/me}return Ae},He=(ae,De,Wt)=>{var[ae,Ae]=ae,[De,ge]=De;let me,Ze;return et(Ze=ae<Ae?(me=oe(ae,Ae),Wt(De,ge)):(me=oe(Ae,ae),Wt(ge,De)),me)},$e=(at,ht,Wt)=>{const ae=Math.min(at.length,ht.length)-1,Ae=new Array(ae),De=new Array(ae);var ge=at[0]>at[ae],me=ge?[...at].reverse():at,Ze=ge?[...ht].reverse():ht;for(let We=0;We<ae;We+=1)Ae[We]=oe(me[We],me[We+1]),De[We]=Wt(Ze[We],Ze[We+1]);return We=>{var vn=function(In,mn,_n,On,hn){let Hn=_n||0,Rn=On||In.length;for(var Vn=hn||(Bn=>Bn);Hn<Rn;){var Ln=Math.floor((Hn+Rn)/2);Vn(In[Ln])>mn?Rn=Ln:Hn=Ln+1}return Hn}(at,We,1,ae)-1,xn=Ae[vn];return et(De[vn],xn)(We)}},Ht=(at,ht,Wt,ae)=>(2<Math.min(at.length,ht.length)?$e:He)(at,ht,ae?Pt:Wt);class ie extends C{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:St,tickCount:5}}map(ht){return $(ht)?this.output(ht):this.options.unknown}invert(ht){return $(ht)?this.input(ht):this.options.unknown}nice(){var ht,Wt,ae,Ae;this.options.nice&&([ht,Wt,ae,...Ae]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(ht,Wt,ae,...Ae))}getTicks(){var ht=this.options.tickMethod,[Wt,ae,Ae,...De]=this.getTickMethodOptions();return ht(Wt,ae,Ae,...De)}getTickMethodOptions(){var{domain:ht,tickCount:Wt}=this.options;return[ht[0],ht[ht.length-1],Wt]}chooseNice(){return Mt}rescale(){this.nice();var[ht,Wt]=this.chooseTransforms();this.composeOutput(ht,this.chooseClamp(ht)),this.composeInput(ht,Wt,this.chooseClamp(Wt))}chooseClamp(ae){var{clamp:Wt,range:Ae}=this.options,ae=this.options.domain.map(ae),Ae=Math.min(ae.length,Ae.length);if(Wt){Wt=ae[0],ae=ae[Ae-1];const De=ae<Wt?ae:Wt,ge=ae<Wt?Wt:ae;return me=>Math.min(Math.max(De,me),ge)}return Rt}composeOutput(ht,Wt){var{domain:ge,range:ae,round:Ae,interpolate:De}=this.options,ge=Ht(ge.map(ht),ae,De,Ae);this.output=et(ge,Wt,ht)}composeInput(ht,Wt,ae){var{domain:Ae,range:De}=this.options,De=Ht(De,Ae.map(ht),St);this.input=et(Wt,ae,De)}}class te extends ie{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:re,tickMethod:Le,tickCount:5}}chooseTransforms(){return[Rt,Rt]}clone(){return new te(this.options)}}class ve extends Re{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:F,paddingInner:1,paddingOuter:0}}constructor(ht){super(ht)}getPaddingInner(){return 1}clone(){return new ve(this.options)}update(ht){super.update(ht)}getPaddingOuter(){return this.options.padding}}function ut(at,ht){for(var Wt=[],ae=0,Ae=at.length;ae<Ae;ae++)Wt.push(at[ae].substr(0,ht));return Wt}var k,H=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rt=["January","February","March","April","May","June","July","August","September","October","November","December"],yt=ut(rt,3);(function(at){for(var ht=[],Wt=1;Wt<arguments.length;Wt++)ht[Wt-1]=arguments[Wt];for(var ae=0,Ae=ht;ae<Ae.length;ae++){var De,ge=Ae[ae];for(De in ge)at[De]=ge[De]}})({},{dayNamesShort:ut(H,3),dayNames:H,monthNamesShort:yt,monthNames:rt,amPm:["am","pm"],DoFn:function(at){return at+["th","st","nd","rd"][3<at%10?0:(at-at%10!=10?1:0)*at%10]}});var bt;let ce=k=class extends te{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Rt,tickMethod:Le,tickCount:5}}constructor(at){super(at)}clone(){return new k(this.options)}};ce=k=function(at,ht,Wt,ae){var Ae,De=arguments.length,ge=De<3?ht:ae===null?ae=Object.getOwnPropertyDescriptor(ht,Wt):ae;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(at,ht,Wt,ae);else for(var me=at.length-1;0<=me;me--)(Ae=at[me])&&(ge=(De<3?Ae(ge):3<De?Ae(ht,Wt,ge):Ae(ht,Wt))||ge);return 3<De&&ge&&Object.defineProperty(ht,Wt,ge),ge}([Ct(function(at){return[at(0),at(1)]},ht=>{var[ht,Wt]=ht;return et(St(0,1),oe(ht,Wt))})],ce);let se=bt=class extends te{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Rt,tickMethod:Le,tickCount:5}}constructor(at){super(at)}clone(){return new bt(this.options)}};se=bt=function(at,ht,Wt,ae){var Ae,De=arguments.length,ge=De<3?ht:ae===null?ae=Object.getOwnPropertyDescriptor(ht,Wt):ae;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(at,ht,Wt,ae);else for(var me=at.length-1;0<=me;me--)(Ae=at[me])&&(ge=(De<3?Ae(ge):3<De?Ae(ht,Wt,ge):Ae(ht,Wt))||ge);return 3<De&&ge&&Object.defineProperty(ht,Wt,ge),ge}([Ct(function(at){return[at(0),at(.5),at(1)]},at=>{const[ht,Wt,ae]=at,Ae=et(St(0,.5),oe(ht,Wt)),De=et(St(.5,1),oe(Wt,ae));return ge=>(ht>ae?ge<Wt?De:Ae:ge<Wt?Ae:De)(ge)})],se);function Ne(at,ht,Wt,ae,Ae){var De=new te({range:[ht,ht+ae]}),ge=new te({range:[Wt,Wt+Ae]});return{transform:function(We){var We=st(We,2),Ze=We[0],We=We[1];return[De.map(Ze),ge.map(We)]},untransform:function(We){var We=st(We,2),Ze=We[0],We=We[1];return[De.invert(Ze),ge.invert(We)]}}}function Pe(at,ht,Wt,ae,Ae){return(0,st(at,1)[0])(ht,Wt,ae,Ae)}function rn(at,ht,Wt,ae,Ae){return st(at,1)[0]}function Oe(Ze,ht,Wt,ae,Ae){var De=(Ze=st(Ze,4))[0],ge=Ze[1],me=Ze[2],Ze=Ze[3],We=new te({range:[me,Ze]}),vn=new te({range:[De,ge]}),xn=1<(me=Ae/ae)?1:me,In=1<me?1/me:1;return{transform:function(On){var On=st(On,2),_n=On[0],On=On[1],_n=vn.map(_n),On=We.map(On);return[.5*(On*Math.cos(_n)*xn)+.5,.5*(On*Math.sin(_n)*In)+.5]},untransform:function(hn){var hn=st(hn,2),_n=hn[0],hn=hn[1],_n=2*(_n-.5)/xn,hn=2*(hn-.5)/In,On=Math.sqrt(Math.pow(_n,2)+Math.pow(hn,2)),hn=we(Math.atan2(hn,_n),De,ge);return[vn.invert(hn),We.invert(On)]}}}function qe(at,ht,Wt,ae,Ae){return{transform:function(ge){var ge=st(ge,2),me=ge[0];return[ge[1],me]},untransform:function(ge){var ge=st(ge,2),me=ge[0];return[ge[1],me]}}}function fn(at){for(var ht=[],Wt=1;Wt<arguments.length;Wt++)ht[Wt-1]=arguments[Wt];return gr.apply(void 0,Ot([[-1,-1]],st(ht),!1))}function gn(at){for(var ht=[],Wt=1;Wt<arguments.length;Wt++)ht[Wt-1]=arguments[Wt];return gr.apply(void 0,Ot([[-1,1]],st(ht),!1))}function dn(at){for(var ht=[],Wt=1;Wt<arguments.length;Wt++)ht[Wt-1]=arguments[Wt];return gr.apply(void 0,Ot([[1,-1]],st(ht),!1))}function bn(ge,ht,Wt,ae,Ae){var De,ge=st(ge,1)[0],me=kt();return me=me,ge=ge,De=Math.sin(ge),ge=Math.cos(ge),me[0]=ge,me[1]=De,me[2]=0,me[3]=-De,me[4]=ge,me[5]=0,me[6]=0,me[7]=0,me[8]=1,me}function Un(at,ht,Wt,ae,Ae){var De=(at=st(at,4))[0],ge=at[1],me=at[2],Ze=(at[3]-me)/(+ge/(2*Math.PI)+1),We=Ze/(2*Math.PI),vn=new te({range:[me,me+.99*Ze]}),xn=new te({range:[De,ge]}),In=1<(at=Ae/ae)?1:at,mn=1<at?1/at:1;return{transform:function(hn){var hn=st(hn,2),On=hn[0],hn=hn[1],On=xn.map(On),hn=vn.map(hn);return[.5*(Math.cos(On)*(We*On+hn)*In)+.5,.5*(Math.sin(On)*(We*On+hn)*mn)+.5]},untransform:function(hn){var hn=st(hn,2),Hn=hn[0],hn=hn[1],Hn=2*(Hn-.5)/In,hn=2*(hn-.5)/mn,On=Math.sqrt(Math.pow(Hn,2)+Math.pow(hn,2)),hn=we(Math.atan2(hn,Hn)+Math.floor(On/Ze)*Math.PI*2,De,ge),Hn=On-We*hn;return[xn.invert(hn),vn.invert(Hn)]}}}function Kn(Ze,ht,Wt,ae,Ae){var De=(Ze=st(Ze,4))[0],ge=Ze[1],me=Ze[2],Ze=Ze[3],We=new te({range:[me,Ze]});return{transform:function(vn){for(var xn=[],In=vn.length,mn=new ve({domain:new Array(In).fill(0).map(function(Hn,Rn){return Rn}),range:[De,ge]}),_n=0;_n<In;_n++){var hn=vn[_n],On=mn.map(_n),hn=We.map(hn);xn.push(On,hn)}return xn},untransform:function(vn){for(var xn=[],In=0;In<vn.length;In+=2){var mn=vn[In+1];xn.push(We.invert(mn))}return xn}}}var gr=function(ge,ht,Wt,ae,Ae){var ge=st(ge,2),De=ge[0],ge=ge[1],me=kt();return De=[De,ge],(ge=me)[0]=De[0],ge[1]=0,ge[2]=0,ge[3]=0,ge[4]=De[1],ge[5]=0,ge[6]=0,ge[7]=0,ge[8]=1,ge};function xr(at){return 1/Math.tan(at)}function ni(at,ht,Wt,ae,Ae){var De=xr(st(at,1)[0]);return{transform:function(Ze){var Ze=st(Ze,2),me=Ze[0],Ze=Ze[1];return[me+Ze*De,Ze]},untransform:function(Ze){var Ze=st(Ze,2),me=Ze[0],Ze=Ze[1];return[me-Ze*De,Ze]}}}function Vr(at,ht,Wt,ae,Ae){var De=xr(st(at,1)[0]);return{transform:function(me){var me=st(me,2),Ze=me[0];return[Ze,me[1]+Ze*De]},untransform:function(me){var me=st(me,2),Ze=me[0];return[Ze,me[1]-Ze*De]}}}function zr(at,ht,Wt,me,ge){var De=at<ht,ge=(De?ht-me:ge-ht)||ge-me,me=De?-1:1;return me*ge*(Wt+1)/(Wt+ge/((at-ht)*me))+ht}function Ar(at,ht,Wt,ae,ge){var De=at<ht,ge=(De?ht-ae:ge-ht)||ge-ae;return ge/(ge*(Wt+1)/(at-ht)-Wt*(De?-1:1))+ht}function ui(at,ht,Wt){return Wt?new te({range:[0,1],domain:[0,ht]}).map(at):at}function Vi(me,ht,Wt,ae,Ae){var De=(me=st(me,3))[0],ge=me[1],me=me[2],Ze=ui(De,ae,me!==void 0&&me);return{transform:function(xn){var xn=st(xn,2),vn=xn[0],xn=xn[1];return[zr(vn,Ze,ge,0,1),xn]},untransform:function(xn){var xn=st(xn,2),vn=xn[0],xn=xn[1];return[Ar(vn,Ze,ge,0,1),xn]}}}function Bi(me,ht,Wt,ae,Ae){var De=(me=st(me,3))[0],ge=me[1],me=me[2],Ze=ui(De,Ae,me!==void 0&&me);return{transform:function(We){return We=st(We,2),[We[0],zr(We[1],Ze,ge,0,1)]},untransform:function(We){return We=st(We,2),[We[0],Ar(We[1],Ze,ge,0,1)]}}}function _i(We,ht,Wt,ae,Ae){var De=(We=st(We,5))[0],ge=We[1],me=We[2],Ze=We[3],We=We[4],vn=ui(De,ae,We=We!==void 0&&We),xn=ui(ge,Ae,We);return{transform:function(_n){var _n=st(_n,2),mn=_n[0],_n=_n[1];return[zr(mn,vn,me,0,1),zr(_n,xn,Ze,0,1)]},untransform:function(_n){var _n=st(_n,2),mn=_n[0],_n=_n[1];return[Ar(mn,vn,me,0,1),Ar(_n,xn,Ze,0,1)]}}}function no(We,ht,Wt,ae,Ae){var De=(We=st(We,5))[0],ge=We[1],me=We[2],Ze=We[3],We=(We=We[4])!==void 0&&We,vn=new te({range:[0,ae]}),xn=new te({range:[0,Ae]}),In=We?De:vn.map(De),mn=We?ge:xn.map(ge);return{transform:function(hn){var hn=st(hn,2),On=hn[0],hn=hn[1],Hn=vn.map(On)-In,Rn=xn.map(hn)-mn,Vn=Math.sqrt(Hn*Hn+Rn*Rn);return me<Vn?[On,hn]:(On=zr(Vn,0,Ze,0,me),hn=Math.atan2(Rn,Hn),Vn=In+On*Math.cos(hn),Rn=mn+On*Math.sin(hn),[vn.invert(Vn),xn.invert(Rn)])},untransform:function(hn){var hn=st(hn,2),On=hn[0],hn=hn[1],Hn=vn.map(On)-In,Rn=xn.map(hn)-mn,Vn=Math.sqrt(Hn*Hn+Rn*Rn);return me<Vn?[On,hn]:(On=Ar(Vn,0,Ze,0,me),hn=Math.atan2(Rn,Hn),Vn=In+On*Math.cos(hn),Rn=mn+On*Math.sin(hn),[vn.invert(Vn),xn.invert(Rn)])}}}function ro(at,ht,Wt,ae,Ae,De,ge){var me=new te({range:[ht,ht+Ae]}),Ze=new te({range:[Wt,Wt+De]}),We=new te({range:[ae,ae+ge]});return{transform:function(mn){var mn=st(mn,3),xn=mn[0],In=mn[1],mn=mn[2];return[me.map(xn),Ze.map(In),We.map(mn)]},untransform:function(mn){var mn=st(mn,3),xn=mn[0],In=mn[1],mn=mn[2];return[me.invert(xn),Ze.invert(In),We.invert(mn)]}}}function Za(vn,ht,Wt,ae,Ae,De,ge){var me,Ze=(vn=st(vn,3))[0],We=vn[1],vn=vn[2];return me=Se(),Ze=[Ze,We,vn],me[0]=1,me[1]=0,me[2]=0,me[3]=0,me[4]=0,me[5]=1,me[6]=0,me[7]=0,me[8]=0,me[9]=0,me[10]=1,me[11]=0,me[12]=Ze[0],me[13]=Ze[1],me[14]=Ze[2],me[15]=1,me}function Mo(at,ht,Wt,ae,Ae,De,ge){return{transform:function(Ze){var Ze=st(Ze,3),We=Ze[0];return[Ze[1],We,Ze[2]]},untransform:function(Ze){var Ze=st(Ze,3),We=Ze[0];return[Ze[1],We,Ze[2]]}}}function Ea(vn,ht,Wt,ae,Ae,De,ge){var me,Ze=(vn=st(vn,3))[0],We=vn[1],vn=vn[2];return me=Se(),Ze=[Ze,We,vn],me[0]=Ze[0],me[1]=0,me[2]=0,me[3]=0,me[4]=0,me[5]=Ze[1],me[6]=0,me[7]=0,me[8]=0,me[9]=0,me[10]=Ze[2],me[11]=0,me[12]=0,me[13]=0,me[14]=0,me[15]=1,me}ri.prototype.update=function(at){this.options=Q({},this.options,at),this.recoordinate()},ri.prototype.clone=function(){return new ri(this.options)},ri.prototype.getOptions=function(){return this.options},ri.prototype.clear=function(){this.update({transformations:[]})},ri.prototype.getSize=function(){var at=this.options;return[at.width,at.height]},ri.prototype.getCenter=function(){var at=this.options,ht=at.x,Wt=at.y;return[(2*ht+at.width)/2,(2*Wt+at.height)/2]},ri.prototype.transform=function(){for(var at=[],ht=0;ht<arguments.length;ht++)at[ht]=arguments[ht];var Wt=this.options.transformations;return this.update({transformations:Ot(Ot([],st(Wt),!1),[Ot([],st(at),!1)],!1)}),this},ri.prototype.map=function(at){return this.output(at)},ri.prototype.invert=function(at){return this.input(at)},ri.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},ri.prototype.compose=function(at){function ht(Ln,Bn){var nr;me.push((Bn=Bn===void 0?!0:Bn)?(nr=Ln,function(ji){for(var Pi=[],Wr=0;Wr<ji.length-1;Wr+=2){var Wi=[ji[Wr],ji[Wr+1]],Wi=nr(Wi);Pi.push.apply(Pi,Ot([],st(Wi),!1))}return Pi}):Ln)}var Wt,ae,Ae=(at=at===void 0?!1:at)?Ot([],st(this.options.transformations),!1).reverse():this.options.transformations,De=at?function(Ln){return Ln.untransform}:function(Ln){return Ln.transform},ge=[],me=[];try{for(var Ze=xt(Ae),We=Ze.next();!We.done;We=Ze.next()){var vn,xn,In,mn,_n,On,hn=st(We.value),Hn=hn[0],Rn=hn.slice(1),Vn=this.transformers[Hn];Vn&&(xn=(vn=this.options).x,In=vn.y,mn=vn.width,_n=vn.height,un(On=Vn(Ot([],st(Rn),!1),xn,In,mn,_n))?ge.push(On):(ge.length&&(ht(this.createMatrixTransform(ge,at)),ge.splice(0,ge.length)),ht(De(On)||Rt,Hn!=="parallel")))}}catch(Ln){Wt={error:Ln}}finally{try{We&&!We.done&&(ae=Ze.return)&&ae.call(Ze)}finally{if(Wt)throw Wt.error}}return ge.length&&ht(this.createMatrixTransform(ge,at)),Ye.apply(void 0,Ot([],st(me),!1))},ri.prototype.createMatrixTransform=function(at,ht){var Wt,ae,Ae,De,ge,me,Ze,We,vn,xn,In,mn,_n=kt();return ht&&at.reverse(),at.forEach(function(On){return Yt(_n,_n,On)}),ht&&(ht=at=_n,(mn=new Ft(9))[0]=ht[0],mn[1]=ht[1],mn[2]=ht[2],mn[3]=ht[3],mn[4]=ht[4],mn[5]=ht[5],mn[6]=ht[6],mn[7]=ht[7],mn[8]=ht[8],mn=(ht=mn)[0],Wt=ht[1],ae=ht[2],Ae=ht[3],De=ht[4],ge=ht[5],me=ht[6],Ze=ht[7],We=(ht=ht[8])*De-ge*Ze,In=mn*We+Wt*(vn=-ht*Ae+ge*me)+ae*(xn=Ze*Ae-De*me))&&(at[0]=We*(In=1/In),at[1]=(-ht*Wt+ae*Ze)*In,at[2]=(ge*Wt-ae*De)*In,at[3]=vn*In,at[4]=(ht*mn-ae*me)*In,at[5]=(-ge*mn+ae*Ae)*In,at[6]=xn*In,at[7]=(-Ze*mn+Wt*me)*In,at[8]=(De*mn-Wt*Ae)*In),function(Bn){var hn,Hn,Rn,Vn,Ln,Bn=[Bn[0],Bn[1],1];return Rn=_n,Vn=(Hn=hn=Bn)[0],Ln=Hn[1],Hn=Hn[2],hn[0]=Vn*Rn[0]+Ln*Rn[3]+Hn*Rn[6],hn[1]=Vn*Rn[1]+Ln*Rn[4]+Hn*Rn[7],hn[2]=Vn*Rn[2]+Ln*Rn[5]+Hn*Rn[8],[Bn[0],Bn[1]]}},H=ri;function ri(at){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:Ne,translate:Vt,custom:Pe,matrix:rn,polar:Oe,transpose:qe,scale:gr,"shear.x":ni,"shear.y":Vr,reflect:fn,"reflect.x":gn,"reflect.y":dn,rotate:bn,helix:Un,parallel:Kn,fisheye:_i,"fisheye.x":Vi,"fisheye.y":Bi,"fisheye.circular":no},this.update(at)}xi.prototype.update=function(at){this.options=Q({},this.options,at),this.recoordinate()},xi.prototype.clone=function(){return new xi(this.options)},xi.prototype.getOptions=function(){return this.options},xi.prototype.clear=function(){this.update({transformations:[]})},xi.prototype.getSize=function(){var at=this.options;return[at.width,at.height,at.depth]},xi.prototype.getCenter=function(){var at=this.options,ht=at.x,Wt=at.y,ae=at.z;return[(2*ht+at.width)/2,(2*Wt+at.height)/2,(2*ae+at.depth)/2]},xi.prototype.transform=function(){for(var at=[],ht=0;ht<arguments.length;ht++)at[ht]=arguments[ht];var Wt=this.options.transformations;return this.update({transformations:Ot(Ot([],st(Wt),!1),[Ot([],st(at),!1)],!1)}),this},xi.prototype.map=function(at){return this.output(at)},xi.prototype.invert=function(at){return this.input(at)},xi.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},xi.prototype.compose=function(at){function ht(nr,ji){var Pi;me.push((ji=ji===void 0?!0:ji)?(Pi=nr,function(Wr){for(var Wi=[],Gi=0;Gi<Wr.length-1;Gi+=3){var Et=[Wr[Gi],Wr[Gi+1],Wr[Gi+2]],Et=Pi(Et);Wi.push.apply(Wi,Ot([],st(Et),!1))}return Wi}):nr)}var Wt,ae,Ae=(at=at===void 0?!1:at)?Ot([],st(this.options.transformations),!1).reverse():this.options.transformations,De=at?function(nr){return nr.untransform}:function(nr){return nr.transform},ge=[],me=[];try{for(var Ze=xt(Ae),We=Ze.next();!We.done;We=Ze.next()){var vn,xn,In,mn,_n,On,hn,Hn,Rn=st(We.value),Vn=Rn[0],Ln=Rn.slice(1),Bn=this.transformers[Vn];Bn&&(xn=(vn=this.options).x,In=vn.y,mn=vn.z,_n=vn.width,On=vn.height,hn=vn.depth,un(Hn=Bn(Ot([],st(Ln),!1),xn,In,mn,_n,On,hn))?ge.push(Hn):(ge.length&&(ht(this.createMatrixTransform(ge,at)),ge.splice(0,ge.length)),ht(De(Hn)||Rt,!0)))}}catch(nr){Wt={error:nr}}finally{try{We&&!We.done&&(ae=Ze.return)&&ae.call(Ze)}finally{if(Wt)throw Wt.error}}return ge.length&&ht(this.createMatrixTransform(ge,at)),Ye.apply(void 0,Ot([],st(me),!1))},xi.prototype.createMatrixTransform=function(at,ht){var Wt,ae,Ae,De,ge,me,Ze,We,vn,xn,In,mn,_n,On,hn,Hn,Rn,Vn,Ln,Bn,nr,ji,Pi,Wr,Wi,Gi,Et,Bt,xe=Se();return ht&&at.reverse(),at.forEach(function(Ke){return Ie(xe,xe,Ke)}),ht&&(ht=at=xe,(Bt=new Ft(16))[0]=ht[0],Bt[1]=ht[1],Bt[2]=ht[2],Bt[3]=ht[3],Bt[4]=ht[4],Bt[5]=ht[5],Bt[6]=ht[6],Bt[7]=ht[7],Bt[8]=ht[8],Bt[9]=ht[9],Bt[10]=ht[10],Bt[11]=ht[11],Bt[12]=ht[12],Bt[13]=ht[13],Bt[14]=ht[14],Bt[15]=ht[15],Bt=(ht=Bt)[0],Wt=ht[1],ae=ht[2],Ae=ht[3],De=ht[4],ge=ht[5],me=ht[6],Ze=ht[7],We=ht[8],vn=ht[9],xn=ht[10],In=ht[11],mn=ht[12],_n=ht[13],On=ht[14],ht=ht[15],Et=(hn=Bt*ge-Wt*De)*(Gi=xn*ht-In*On)-(Hn=Bt*me-ae*De)*(Wi=vn*ht-In*_n)+(Rn=Bt*Ze-Ae*De)*(Wr=vn*On-xn*_n)+(Vn=Wt*me-ae*ge)*(Pi=We*ht-In*mn)-(Ln=Wt*Ze-Ae*ge)*(ji=We*On-xn*mn)+(Bn=ae*Ze-Ae*me)*(nr=We*_n-vn*mn))&&(at[0]=(ge*Gi-me*Wi+Ze*Wr)*(Et=1/Et),at[1]=(ae*Wi-Wt*Gi-Ae*Wr)*Et,at[2]=(_n*Bn-On*Ln+ht*Vn)*Et,at[3]=(xn*Ln-vn*Bn-In*Vn)*Et,at[4]=(me*Pi-De*Gi-Ze*ji)*Et,at[5]=(Bt*Gi-ae*Pi+Ae*ji)*Et,at[6]=(On*Rn-mn*Bn-ht*Hn)*Et,at[7]=(We*Bn-xn*Rn+In*Hn)*Et,at[8]=(De*Wi-ge*Pi+Ze*nr)*Et,at[9]=(Wt*Pi-Bt*Wi-Ae*nr)*Et,at[10]=(mn*Ln-_n*Rn+ht*hn)*Et,at[11]=(vn*Rn-We*Ln-In*hn)*Et,at[12]=(ge*ji-De*Wr-me*nr)*Et,at[13]=(Bt*Wr-Wt*ji+ae*nr)*Et,at[14]=(_n*Hn-mn*Vn-On*hn)*Et,at[15]=(We*Vn-vn*Hn+xn*hn)*Et),function(pi){var yn,Cn,Wn,Gr,ii,Tr,pi=[pi[0],pi[1],pi[2],1];return Wn=xe,Gr=(Cn=yn=pi)[0],ii=Cn[1],Tr=Cn[2],Cn=Cn[3],yn[0]=Wn[0]*Gr+Wn[4]*ii+Wn[8]*Tr+Wn[12]*Cn,yn[1]=Wn[1]*Gr+Wn[5]*ii+Wn[9]*Tr+Wn[13]*Cn,yn[2]=Wn[2]*Gr+Wn[6]*ii+Wn[10]*Tr+Wn[14]*Cn,yn[3]=Wn[3]*Gr+Wn[7]*ii+Wn[11]*Tr+Wn[15]*Cn,[pi[0],pi[1],pi[2]]}},yt=xi;function xi(at){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:ro,translate3D:Za,scale3D:Ea,transpose3D:Mo},this.update(at)}D.Coordinate=H,D.Coordinate3D=yt,Object.defineProperty(D,"__esModule",{value:!0})})},90857:function(Te){"use strict";var fe=Object.prototype.hasOwnProperty,D="~";function xt(){}Object.create&&(xt.prototype=Object.create(null),new xt().__proto__||(D=!1));function st(qt,jt,Ut){this.fn=qt,this.context=jt,this.once=Ut||!1}function Ot(qt,jt,Ut,gt,ee){if(typeof Ut!="function")throw new TypeError("The listener must be a function");var J=new st(Ut,gt||qt,ee),Q=D?D+jt:jt;return qt._events[Q]?qt._events[Q].fn?qt._events[Q]=[qt._events[Q],J]:qt._events[Q].push(J):(qt._events[Q]=J,qt._eventsCount++),qt}function Xt(qt,jt){--qt._eventsCount===0?qt._events=new xt:delete qt._events[jt]}function nt(){this._events=new xt,this._eventsCount=0}nt.prototype.eventNames=function(){var jt=[],Ut,gt;if(this._eventsCount===0)return jt;for(gt in Ut=this._events)fe.call(Ut,gt)&&jt.push(D?gt.slice(1):gt);return Object.getOwnPropertySymbols?jt.concat(Object.getOwnPropertySymbols(Ut)):jt},nt.prototype.listeners=function(jt){var Ut=D?D+jt:jt,gt=this._events[Ut];if(!gt)return[];if(gt.fn)return[gt.fn];for(var ee=0,J=gt.length,Q=new Array(J);ee<J;ee++)Q[ee]=gt[ee].fn;return Q},nt.prototype.listenerCount=function(jt){var Ut=D?D+jt:jt,gt=this._events[Ut];return gt?gt.fn?1:gt.length:0},nt.prototype.emit=function(jt,Ut,gt,ee,J,Q){var Rt=D?D+jt:jt;if(!this._events[Rt])return!1;var Tt=this._events[Rt],Ft=arguments.length,kt,Yt;if(Tt.fn){switch(Tt.once&&this.removeListener(jt,Tt.fn,void 0,!0),Ft){case 1:return Tt.fn.call(Tt.context),!0;case 2:return Tt.fn.call(Tt.context,Ut),!0;case 3:return Tt.fn.call(Tt.context,Ut,gt),!0;case 4:return Tt.fn.call(Tt.context,Ut,gt,ee),!0;case 5:return Tt.fn.call(Tt.context,Ut,gt,ee,J),!0;case 6:return Tt.fn.call(Tt.context,Ut,gt,ee,J,Q),!0}for(Yt=1,kt=new Array(Ft-1);Yt<Ft;Yt++)kt[Yt-1]=arguments[Yt];Tt.fn.apply(Tt.context,kt)}else{var Se=Tt.length,Ie;for(Yt=0;Yt<Se;Yt++)switch(Tt[Yt].once&&this.removeListener(jt,Tt[Yt].fn,void 0,!0),Ft){case 1:Tt[Yt].fn.call(Tt[Yt].context);break;case 2:Tt[Yt].fn.call(Tt[Yt].context,Ut);break;case 3:Tt[Yt].fn.call(Tt[Yt].context,Ut,gt);break;case 4:Tt[Yt].fn.call(Tt[Yt].context,Ut,gt,ee);break;default:if(!kt)for(Ie=1,kt=new Array(Ft-1);Ie<Ft;Ie++)kt[Ie-1]=arguments[Ie];Tt[Yt].fn.apply(Tt[Yt].context,kt)}}return!0},nt.prototype.on=function(jt,Ut,gt){return Ot(this,jt,Ut,gt,!1)},nt.prototype.once=function(jt,Ut,gt){return Ot(this,jt,Ut,gt,!0)},nt.prototype.removeListener=function(jt,Ut,gt,ee){var J=D?D+jt:jt;if(!this._events[J])return this;if(!Ut)return Xt(this,J),this;var Q=this._events[J];if(Q.fn)Q.fn===Ut&&(!ee||Q.once)&&(!gt||Q.context===gt)&&Xt(this,J);else{for(var Rt=0,Tt=[],Ft=Q.length;Rt<Ft;Rt++)(Q[Rt].fn!==Ut||ee&&!Q[Rt].once||gt&&Q[Rt].context!==gt)&&Tt.push(Q[Rt]);Tt.length?this._events[J]=Tt.length===1?Tt[0]:Tt:Xt(this,J)}return this},nt.prototype.removeAllListeners=function(jt){var Ut;return jt?(Ut=D?D+jt:jt,this._events[Ut]&&Xt(this,Ut)):(this._events=new xt,this._eventsCount=0),this},nt.prototype.off=nt.prototype.removeListener,nt.prototype.addListener=nt.prototype.on,nt.prefixed=D,nt.EventEmitter=nt,Te.exports=nt},38554:function(Te){"use strict";var fe=Object.prototype.hasOwnProperty,D="~";function xt(){}Object.create&&(xt.prototype=Object.create(null),new xt().__proto__||(D=!1));function st(qt,jt,Ut){this.fn=qt,this.context=jt,this.once=Ut||!1}function Ot(qt,jt,Ut,gt,ee){if(typeof Ut!="function")throw new TypeError("The listener must be a function");var J=new st(Ut,gt||qt,ee),Q=D?D+jt:jt;return qt._events[Q]?qt._events[Q].fn?qt._events[Q]=[qt._events[Q],J]:qt._events[Q].push(J):(qt._events[Q]=J,qt._eventsCount++),qt}function Xt(qt,jt){--qt._eventsCount===0?qt._events=new xt:delete qt._events[jt]}function nt(){this._events=new xt,this._eventsCount=0}nt.prototype.eventNames=function(){var jt=[],Ut,gt;if(this._eventsCount===0)return jt;for(gt in Ut=this._events)fe.call(Ut,gt)&&jt.push(D?gt.slice(1):gt);return Object.getOwnPropertySymbols?jt.concat(Object.getOwnPropertySymbols(Ut)):jt},nt.prototype.listeners=function(jt){var Ut=D?D+jt:jt,gt=this._events[Ut];if(!gt)return[];if(gt.fn)return[gt.fn];for(var ee=0,J=gt.length,Q=new Array(J);ee<J;ee++)Q[ee]=gt[ee].fn;return Q},nt.prototype.listenerCount=function(jt){var Ut=D?D+jt:jt,gt=this._events[Ut];return gt?gt.fn?1:gt.length:0},nt.prototype.emit=function(jt,Ut,gt,ee,J,Q){var Rt=D?D+jt:jt;if(!this._events[Rt])return!1;var Tt=this._events[Rt],Ft=arguments.length,kt,Yt;if(Tt.fn){switch(Tt.once&&this.removeListener(jt,Tt.fn,void 0,!0),Ft){case 1:return Tt.fn.call(Tt.context),!0;case 2:return Tt.fn.call(Tt.context,Ut),!0;case 3:return Tt.fn.call(Tt.context,Ut,gt),!0;case 4:return Tt.fn.call(Tt.context,Ut,gt,ee),!0;case 5:return Tt.fn.call(Tt.context,Ut,gt,ee,J),!0;case 6:return Tt.fn.call(Tt.context,Ut,gt,ee,J,Q),!0}for(Yt=1,kt=new Array(Ft-1);Yt<Ft;Yt++)kt[Yt-1]=arguments[Yt];Tt.fn.apply(Tt.context,kt)}else{var Se=Tt.length,Ie;for(Yt=0;Yt<Se;Yt++)switch(Tt[Yt].once&&this.removeListener(jt,Tt[Yt].fn,void 0,!0),Ft){case 1:Tt[Yt].fn.call(Tt[Yt].context);break;case 2:Tt[Yt].fn.call(Tt[Yt].context,Ut);break;case 3:Tt[Yt].fn.call(Tt[Yt].context,Ut,gt);break;case 4:Tt[Yt].fn.call(Tt[Yt].context,Ut,gt,ee);break;default:if(!kt)for(Ie=1,kt=new Array(Ft-1);Ie<Ft;Ie++)kt[Ie-1]=arguments[Ie];Tt[Yt].fn.apply(Tt[Yt].context,kt)}}return!0},nt.prototype.on=function(jt,Ut,gt){return Ot(this,jt,Ut,gt,!1)},nt.prototype.once=function(jt,Ut,gt){return Ot(this,jt,Ut,gt,!0)},nt.prototype.removeListener=function(jt,Ut,gt,ee){var J=D?D+jt:jt;if(!this._events[J])return this;if(!Ut)return Xt(this,J),this;var Q=this._events[J];if(Q.fn)Q.fn===Ut&&(!ee||Q.once)&&(!gt||Q.context===gt)&&Xt(this,J);else{for(var Rt=0,Tt=[],Ft=Q.length;Rt<Ft;Rt++)(Q[Rt].fn!==Ut||ee&&!Q[Rt].once||gt&&Q[Rt].context!==gt)&&Tt.push(Q[Rt]);Tt.length?this._events[J]=Tt.length===1?Tt[0]:Tt:Xt(this,J)}return this},nt.prototype.removeAllListeners=function(jt){var Ut;return jt?(Ut=D?D+jt:jt,this._events[Ut]&&Xt(this,Ut)):(this._events=new xt,this._eventsCount=0),this},nt.prototype.off=nt.prototype.removeListener,nt.prototype.addListener=nt.prototype.on,nt.prefixed=D,nt.EventEmitter=nt,Te.exports=nt},11702:function(Te,fe,D){"use strict";D.d(fe,{TE:function(){return Xt},U4:function(){return Gt},Xk:function(){return oe},Y1:function(){return $e},_x:function(){return Me},hE:function(){return _e},l5:function(){return ot},ph:function(){return pe},vp:function(){return Se},x4:function(){return Re}});var xt=D(74902),st=D(80450),Ot=D(31437);function Xt(Ht,ie,te,ve){var ut=Ht-te,k=ie-ve;return Math.sqrt(ut*ut+k*k)}function nt(Ht,ie){var te=Math.min.apply(Math,(0,xt.Z)(Ht)),ve=Math.min.apply(Math,(0,xt.Z)(ie)),ut=Math.max.apply(Math,(0,xt.Z)(Ht)),k=Math.max.apply(Math,(0,xt.Z)(ie));return{x:te,y:ve,width:ut-te,height:k-ve}}function qt(Ht){return(Ht+Math.PI*2)%(Math.PI*2)}function jt(Ht,ie){var te=Math.abs(Ht);return ie>0?te:te*-1}function Ut(Ht,ie,te,ve,ut,k){var H=te,rt=ve;if(H===0||rt===0)return{x:Ht,y:ie};for(var yt=ut-Ht,bt=k-ie,ce=Math.abs(yt),se=Math.abs(bt),Ne=H*H,Pe=rt*rt,rn=Math.PI/4,Oe=0,qe=0,fn=0;fn<4;fn++){Oe=H*Math.cos(rn),qe=rt*Math.sin(rn);var gn=(Ne-Pe)*Math.pow(Math.cos(rn),3)/H,dn=(Pe-Ne)*Math.pow(Math.sin(rn),3)/rt,bn=Oe-gn,Un=qe-dn,Kn=ce-gn,gr=se-dn,xr=Math.hypot(Un,bn),ni=Math.hypot(gr,Kn),Vr=xr*Math.asin((bn*gr-Un*Kn)/(xr*ni)),zr=Vr/Math.sqrt(Ne+Pe-Oe*Oe-qe*qe);rn+=zr,rn=Math.min(Math.PI/2,Math.max(0,rn))}return{x:Ht+jt(Oe,yt),y:ie+jt(qe,bt)}}function gt(Ht,ie,te,ve,ut,k,H,rt){return-1*te*Math.cos(ut)*Math.sin(rt)-ve*Math.sin(ut)*Math.cos(rt)}function ee(Ht,ie,te,ve,ut,k,H,rt){return-1*te*Math.sin(ut)*Math.sin(rt)+ve*Math.cos(ut)*Math.cos(rt)}function J(Ht,ie,te){return Math.atan(-ie/Ht*Math.tan(te))}function Q(Ht,ie,te){return Math.atan(ie/(Ht*Math.tan(te)))}function Rt(Ht,ie,te,ve,ut,k){return te*Math.cos(ut)*Math.cos(k)-ve*Math.sin(ut)*Math.sin(k)+Ht}function Tt(Ht,ie,te,ve,ut,k){return te*Math.sin(ut)*Math.cos(k)+ve*Math.cos(ut)*Math.sin(k)+ie}function Ft(Ht,ie,te,ve){var ut=Math.atan2(ve*Ht,te*ie);return(ut+Math.PI*2)%(Math.PI*2)}function kt(Ht,ie,te){return{x:Ht*Math.cos(te),y:ie*Math.sin(te)}}function Yt(Ht,ie,te){var ve=Math.cos(te),ut=Math.sin(te);return[Ht*ve-ie*ut,Ht*ut+ie*ve]}function Se(Ht,ie,te,ve,ut,k,H){for(var rt=J(te,ve,ut),yt=1/0,bt=-1/0,ce=[k,H],se=-Math.PI*2;se<=Math.PI*2;se+=Math.PI){var Ne=rt+se;k<H?k<Ne&&Ne<H&&ce.push(Ne):H<Ne&&Ne<k&&ce.push(Ne)}for(var Pe=0;Pe<ce.length;Pe++){var rn=Rt(Ht,ie,te,ve,ut,ce[Pe]);rn<yt&&(yt=rn),rn>bt&&(bt=rn)}for(var Oe=Q(te,ve,ut),qe=1/0,fn=-1/0,gn=[k,H],dn=-Math.PI*2;dn<=Math.PI*2;dn+=Math.PI){var bn=Oe+dn;k<H?k<bn&&bn<H&&gn.push(bn):H<bn&&bn<k&&gn.push(bn)}for(var Un=0;Un<gn.length;Un++){var Kn=Tt(Ht,ie,te,ve,ut,gn[Un]);Kn<qe&&(qe=Kn),Kn>fn&&(fn=Kn)}return{x:yt,y:qe,width:bt-yt,height:fn-qe}}function Ie(Ht,ie,te,ve,ut,k,H,rt,yt){var bt=Yt(rt-Ht,yt-ie,-ut),ce=_slicedToArray(bt,2),se=ce[0],Ne=ce[1],Pe=Ut(0,0,te,ve,se,Ne),rn=Ft(te,ve,Pe.x,Pe.y);rn<k?Pe=kt(te,ve,k):rn>H&&(Pe=kt(te,ve,H));var Oe=Yt(Pe.x,Pe.y,ut);return{x:Oe[0]+Ht,y:Oe[1]+ie}}function Ye(Ht,ie,te,ve,ut,k,H,rt){var yt=(H-k)*rt+k,bt=gt(Ht,ie,te,ve,ut,k,H,yt),ce=ee(Ht,ie,te,ve,ut,k,H,yt);return qt(Math.atan2(ce,bt))}var un=1e-4;function we(Ht,ie,te,ve,ut,k){var H=-1,rt=1/0,yt=[te,ve],bt=20;k&&k>200&&(bt=k/10);for(var ce=1/bt,se=ce/10,Ne=0;Ne<=bt;Ne++){var Pe=Ne*ce,rn=[ut.apply(void 0,(0,xt.Z)(Ht.concat([Pe]))),ut.apply(void 0,(0,xt.Z)(ie.concat([Pe])))],Oe=Xt(yt[0],yt[1],rn[0],rn[1]);Oe<rt&&(H=Pe,rt=Oe)}if(H===0)return{x:Ht[0],y:ie[0]};if(H===1){var qe=Ht.length;return{x:Ht[qe-1],y:ie[qe-1]}}rt=1/0;for(var fn=0;fn<32&&!(se<un);fn++){var gn=H-se,dn=H+se,bn=[ut.apply(void 0,(0,xt.Z)(Ht.concat([gn]))),ut.apply(void 0,(0,xt.Z)(ie.concat([gn])))],Un=Xt(yt[0],yt[1],bn[0],bn[1]);if(gn>=0&&Un<rt)H=gn,rt=Un;else{var Kn=[ut.apply(void 0,(0,xt.Z)(Ht.concat([dn]))),ut.apply(void 0,(0,xt.Z)(ie.concat([dn])))],gr=Xt(yt[0],yt[1],Kn[0],Kn[1]);dn<=1&&gr<rt?(H=dn,rt=gr):se*=.5}}return{x:ut.apply(void 0,(0,xt.Z)(Ht.concat([H]))),y:ut.apply(void 0,(0,xt.Z)(ie.concat([H])))}}function Vt(Ht,ie){for(var te=0,ve=Ht.length,ut=0;ut<ve;ut++){var k=Ht[ut],H=ie[ut],rt=Ht[(ut+1)%ve],yt=ie[(ut+1)%ve];te+=Xt(k,H,rt,yt)}return te/2}function et(Ht,ie,te,ve){return nt([Ht,te],[ie,ve])}function oe(Ht,ie,te,ve){return Xt(Ht,ie,te,ve)}function Gt(Ht,ie,te,ve,ut){return{x:(1-ut)*Ht+ut*te,y:(1-ut)*ie+ut*ve}}function ke(Ht,ie,te,ve,ut,k){var H=(te-Ht)*(ut-Ht)+(ve-ie)*(k-ie);if(H<0)return Xt(Ht,ie,ut,k);var rt=(te-Ht)*(te-Ht)+(ve-ie)*(ve-ie);return H>rt?Xt(te,ve,ut,k):Me(Ht,ie,te,ve,ut,k)}function Me(Ht,ie,te,ve,ut,k){var H=[te-Ht,ve-ie];if(Ot.I6(H,[0,0]))return Math.sqrt((ut-Ht)*(ut-Ht)+(k-ie)*(k-ie));var rt=[-H[1],H[0]];Ot.Fv(rt,rt);var yt=[ut-Ht,k-ie];return Math.abs(Ot.AK(yt,rt))}function j(Ht,ie,te,ve){return Math.atan2(ve-ie,te-Ht)}function Mt(Ht,ie,te,ve,ut){var k=1-ut;return k*k*k*Ht+3*ie*ut*k*k+3*te*ut*ut*k+ve*ut*ut*ut}function $(Ht,ie,te,ve,ut){var k=1-ut;return 3*(k*k*(ie-Ht)+2*k*ut*(te-ie)+ut*ut*(ve-te))}function Ct(Ht,ie,te,ve){var ut=-3*Ht+9*ie-9*te+3*ve,k=6*Ht-12*ie+6*te,H=3*ie-3*Ht,rt=[],yt,bt,ce;if((0,st.Z)(ut,0))(0,st.Z)(k,0)||(yt=-H/k,yt>=0&&yt<=1&&rt.push(yt));else{var se=k*k-4*ut*H;(0,st.Z)(se,0)?rt.push(-k/(2*ut)):se>0&&(ce=Math.sqrt(se),yt=(-k+ce)/(2*ut),bt=(-k-ce)/(2*ut),yt>=0&&yt<=1&&rt.push(yt),bt>=0&&bt<=1&&rt.push(bt))}return rt}function wt(Ht,ie,te,ve,ut,k,H,rt,yt){var bt=Mt(Ht,te,ut,H,yt),ce=Mt(ie,ve,k,rt,yt),se=Gt(Ht,ie,te,ve,yt),Ne=Gt(te,ve,ut,k,yt),Pe=Gt(ut,k,H,rt,yt),rn=Gt(se.x,se.y,Ne.x,Ne.y,yt),Oe=Gt(Ne.x,Ne.y,Pe.x,Pe.y,yt);return[[Ht,ie,se.x,se.y,rn.x,rn.y,bt,ce],[bt,ce,Oe.x,Oe.y,Pe.x,Pe.y,H,rt]]}function z(Ht,ie,te,ve,ut,k,H,rt,yt){if(yt===0)return Vt([Ht,te,ut,H],[ie,ve,k,rt]);var bt=wt(Ht,ie,te,ve,ut,k,H,rt,.5),ce=[].concat(_toConsumableArray(bt[0]),[yt-1]),se=[].concat(_toConsumableArray(bt[1]),[yt-1]);return z.apply(void 0,_toConsumableArray(ce))+z.apply(void 0,_toConsumableArray(se))}function ot(Ht,ie,te,ve,ut,k,H,rt){for(var yt=[Ht,H],bt=[ie,rt],ce=Ct(Ht,te,ut,H),se=Ct(ie,ve,k,rt),Ne=0;Ne<ce.length;Ne++)yt.push(Mt(Ht,te,ut,H,ce[Ne]));for(var Pe=0;Pe<se.length;Pe++)bt.push(Mt(ie,ve,k,rt,se[Pe]));return nt(yt,bt)}function Jt(Ht,ie,te,ve,ut,k,H,rt){return z(Ht,ie,te,ve,ut,k,H,rt,3)}function de(Ht,ie,te,ve,ut,k,H,rt,yt,bt,ce){return we([Ht,te,ut,H],[ie,ve,k,rt],yt,bt,Mt,ce)}function pe(Ht,ie,te,ve,ut,k,H,rt,yt,bt,ce){var se=de(Ht,ie,te,ve,ut,k,H,rt,yt,bt,ce);return Xt(se.x,se.y,yt,bt)}function Xe(Ht,ie,te,ve,ut,k,H,rt,yt){return{x:Mt(Ht,te,ut,H,yt),y:Mt(ie,ve,k,rt,yt)}}function je(Ht,ie,te,ve,ut,k,H,rt,yt){var bt=$(Ht,te,ut,H,yt),ce=$(ie,ve,k,rt,yt);return qt(Math.atan2(ce,bt))}function sn(Ht){for(var ie=0,te=[],ve=0;ve<Ht.length-1;ve++){var ut=Ht[ve],k=Ht[ve+1],H=Xt(ut[0],ut[1],k[0],k[1]),rt={from:ut,to:k,length:H};te.push(rt),ie+=H}return{segments:te,totalLength:ie}}function ln(Ht){if(Ht.length<2)return 0;for(var ie=0,te=0;te<Ht.length-1;te++){var ve=Ht[te],ut=Ht[te+1];ie+=Xt(ve[0],ve[1],ut[0],ut[1])}return ie}function Zt(Ht,ie){if(ie>1||ie<0||Ht.length<2)return null;var te=sn(Ht),ve=te.segments,ut=te.totalLength;if(ut===0)return{x:Ht[0][0],y:Ht[0][1]};for(var k=0,H=null,rt=0;rt<ve.length;rt++){var yt=ve[rt],bt=yt.from,ce=yt.to,se=yt.length/ut;if(ie>=k&&ie<=k+se){var Ne=(ie-k)/se;H=Gt(bt[0],bt[1],ce[0],ce[1],Ne);break}k+=se}return H}function ct(Ht,ie){if(ie>1||ie<0||Ht.length<2)return 0;for(var te=sn(Ht),ve=te.segments,ut=te.totalLength,k=0,H=0,rt=0;rt<ve.length;rt++){var yt=ve[rt],bt=yt.from,ce=yt.to,se=yt.length/ut;if(ie>=k&&ie<=k+se){H=Math.atan2(ce[1]-bt[1],ce[0]-bt[0]);break}k+=se}return H}function zt(Ht,ie,te){for(var ve=1/0,ut=0;ut<Ht.length-1;ut++){var k=Ht[ut],H=Ht[ut+1],rt=ke(k[0],k[1],H[0],H[1],ie,te);rt<ve&&(ve=rt)}return ve}function ue(Ht){for(var ie=[],te=[],ve=0;ve<Ht.length;ve++){var ut=Ht[ve];ie.push(ut[0]),te.push(ut[1])}return nt(ie,te)}function _e(Ht){return ln(Ht)}function St(Ht,ie){return Zt(Ht,ie)}function re(Ht,ie,te){return zt(Ht,ie,te)}function Pt(Ht,ie){return ct(Ht,ie)}function Y(Ht){var ie=Ht.slice(0);return Ht.length&&ie.push(Ht[0]),ie}function Dt(Ht){return ue(Ht)}function V(Ht){return ln(Y(Ht))}function C(Ht,ie){return Zt(Y(Ht),ie)}function F(Ht,ie,te){return zt(Y(Ht),ie,te)}function At(Ht,ie){return ct(Y(Ht),ie)}function Kt(Ht,ie,te,ve){var ut=1-ve;return ut*ut*Ht+2*ve*ut*ie+ve*ve*te}function ne(Ht,ie,te){var ve=Ht+te-2*ie;if((0,st.Z)(ve,0))return[.5];var ut=(Ht-ie)/ve;return ut<=1&&ut>=0?[ut]:[]}function be(Ht,ie,te,ve,ut,k,H){var rt=Kt(Ht,te,ut,H),yt=Kt(ie,ve,k,H),bt=Gt(Ht,ie,te,ve,H),ce=Gt(te,ve,ut,k,H);return[[Ht,ie,bt.x,bt.y,rt,yt],[rt,yt,ce.x,ce.y,ut,k]]}function Ce(Ht,ie,te,ve,ut,k,H){if(H===0)return(Xt(Ht,ie,te,ve)+Xt(te,ve,ut,k)+Xt(Ht,ie,ut,k))/2;var rt=be(Ht,ie,te,ve,ut,k,.5),yt=rt[0],bt=rt[1];return yt.push(H-1),bt.push(H-1),Ce.apply(void 0,_toConsumableArray(yt))+Ce.apply(void 0,_toConsumableArray(bt))}function Re(Ht,ie,te,ve,ut,k){var H=ne(Ht,te,ut)[0],rt=ne(ie,ve,k)[0],yt=[Ht,ut],bt=[ie,k];return H!==void 0&&yt.push(Kt(Ht,te,ut,H)),rt!==void 0&&bt.push(Kt(ie,ve,k,rt)),nt(yt,bt)}function Le(Ht,ie,te,ve,ut,k){return Ce(Ht,ie,te,ve,ut,k,3)}function He(Ht,ie,te,ve,ut,k,H,rt){return we([Ht,te,ut],[ie,ve,k],H,rt,Kt)}function $e(Ht,ie,te,ve,ut,k,H,rt){var yt=He(Ht,ie,te,ve,ut,k,H,rt);return Xt(yt.x,yt.y,H,rt)}},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(Te){try{let gt=function(){nt||(nt=!0,Ot())},ee=function(){try{Xt.documentElement.doScroll("left")}catch(J){return void setTimeout(ee,50)}gt()};var jt=gt,Ut=ee,D=(D=document.getElementsByTagName("script"))[D.length-1],fe=D.getAttribute("data-injectcss"),D=D.getAttribute("data-disable-injectsvg");if(!D){var xt,st,Ot,Xt,nt,qt=function(J,Q){Q.parentNode.insertBefore(J,Q)};if(fe&&!Te.__iconfont__svg__cssinject__){Te.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(J){console&&console.log(J)}}xt=function(){var J,Q=document.createElement("div");Q.innerHTML=Te._iconfont_svg_string_3580659,(Q=Q.getElementsByTagName("svg")[0])&&(Q.setAttribute("aria-hidden","true"),Q.style.position="absolute",Q.style.width=0,Q.style.height=0,Q.style.overflow="hidden",Q=Q,(J=document.body).firstChild?qt(Q,J.firstChild):J.appendChild(Q))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(xt,0):(st=function(){document.removeEventListener("DOMContentLoaded",st,!1),xt()},document.addEventListener("DOMContentLoaded",st,!1)):document.attachEvent&&(Ot=xt,Xt=Te.document,nt=!1,ee(),Xt.onreadystatechange=function(){Xt.readyState=="complete"&&(Xt.onreadystatechange=null,gt())})}}catch(gt){}}(window)},4771:function(){},81957:function(Te,fe){"use strict";var D=function(xt,st,Ot){return xt<st?st:xt>Ot?Ot:xt};fe.Z=D},5199:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return xt}});function xt(st){return Array.isArray(st)}},90134:function(Te,fe,D){"use strict";var xt=D(95456),st=function(Ot){return(0,xt.Z)(Ot,"Boolean")};fe.Z=st},45607:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return xt}});function xt(st){return typeof st=="function"}},95147:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return xt}});function xt(st){return st==null}},80450:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return st}});var xt=1e-5;function st(Ot,Xt,nt){return nt===void 0&&(nt=xt),Ot===Xt||Math.abs(Ot-Xt)<nt}},25897:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return xt}});function xt(st){return typeof st=="number"}},4637:function(Te,fe){"use strict";fe.Z=function(D){var xt=typeof D;return D!==null&&xt==="object"||xt==="function"}},76714:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return xt}});function xt(st){return typeof st=="string"}},95456:function(Te,fe){"use strict";var D={}.toString,xt=function(st,Ot){return D.call(st)==="[object "+Ot+"]"};fe.Z=xt},71154:function(Te,fe){"use strict";var D=function(xt){return xt===void 0};fe.Z=D},13882:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return xt}});function xt(st){if(!Array.isArray(st))return-1/0;var Ot=st.length;if(!Ot)return-1/0;for(var Xt=st[0],nt=1;nt<Ot;nt++)Xt=Math.max(Xt,st[nt]);return Xt}},71523:function(Te,fe,D){"use strict";var xt=D(5199);fe.Z=function(st){if((0,xt.Z)(st))return st.reduce(function(Ot,Xt){return Math.min(Ot,Xt)},st[0])}},8614:function(Te,fe){"use strict";var D=function(xt,st){return(xt%st+st)%st};fe.Z=D},75839:function(Te,fe,D){"use strict";D.d(fe,{Y:function(){return Q}});var xt=D(97582),st=D(64985);function Ot(Rt,Tt,Ft){if(Rt[Ft].length>7){Rt[Ft].shift();for(var kt=Rt[Ft],Yt=Ft;kt.length;)Tt[Ft]="A",Rt.splice(Yt+=1,0,["C"].concat(kt.splice(0,6)));Rt.splice(Ft,1)}}var Xt=D(4848),nt=D(11013);function qt(Rt){return(0,nt.y)(Rt)&&Rt.every(function(Tt){var Ft=Tt[0];return"MC".includes(Ft)})}var jt=D(74873);function Ut(Rt,Tt,Ft,kt,Yt,Se){var Ie=.3333333333333333,Ye=2/3;return[Ie*Rt+Ye*Ft,Ie*Tt+Ye*kt,Ie*Yt+Ye*Ft,Ie*Se+Ye*kt,Yt,Se]}var gt=D(17570),ee=function(Rt,Tt,Ft,kt){var Yt=.5,Se=(0,gt.k)([Rt,Tt],[Ft,kt],Yt);return(0,xt.ev)((0,xt.ev)([],Se,!0),[Ft,kt,Ft,kt],!1)};function J(Rt,Tt){var Ft=Rt[0],kt=Rt.slice(1).map(Number),Yt=kt[0],Se=kt[1],Ie,Ye=Tt.x1,un=Tt.y1,we=Tt.x,Vt=Tt.y;switch("TQ".includes(Ft)||(Tt.qx=null,Tt.qy=null),Ft){case"M":return Tt.x=Yt,Tt.y=Se,Rt;case"A":return Ie=[Ye,un].concat(kt),["C"].concat((0,jt.W)(Ie[0],Ie[1],Ie[2],Ie[3],Ie[4],Ie[5],Ie[6],Ie[7],Ie[8],Ie[9]));case"Q":return Tt.qx=Yt,Tt.qy=Se,Ie=[Ye,un].concat(kt),["C"].concat(Ut(Ie[0],Ie[1],Ie[2],Ie[3],Ie[4],Ie[5]));case"L":return["C"].concat(ee(Ye,un,Yt,Se));case"Z":return Ye===we&&un===Vt?["C",Ye,un,we,Vt,we,Vt]:["C"].concat(ee(Ye,un,we,Vt));default:}return Rt}function Q(Rt,Tt){if(Tt===void 0&&(Tt=!1),qt(Rt)){var Ft=[].concat(Rt);return Tt?[Ft,[]]:Ft}for(var kt=(0,Xt.A)(Rt),Yt=(0,xt.pi)({},st.z),Se=[],Ie="",Ye=kt.length,un,we,Vt=[],et=0;et<Ye;et+=1){kt[et]&&(Ie=kt[et][0]),Se[et]=Ie;var oe=J(kt[et],Yt);kt[et]=oe,Ot(kt,Se,et),Ye=kt.length,Ie==="Z"&&Vt.push(et),un=kt[et],we=un.length,Yt.x1=+un[we-2],Yt.y1=+un[we-1],Yt.x2=+un[we-4]||Yt.x1,Yt.y2=+un[we-3]||Yt.y1}return Tt?[kt,Vt]:kt}},18323:function(Te,fe,D){"use strict";D.d(fe,{R:function(){return xt}});var xt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0}},64985:function(Te,fe,D){"use strict";D.d(fe,{z:function(){return xt}});var xt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null}},74873:function(Te,fe,D){"use strict";D.d(fe,{W:function(){return st}});function xt(Ot,Xt,nt){var qt=Ot*Math.cos(nt)-Xt*Math.sin(nt),jt=Ot*Math.sin(nt)+Xt*Math.cos(nt);return{x:qt,y:jt}}function st(Ot,Xt,nt,qt,jt,Ut,gt,ee,J,Q){var Rt=Ot,Tt=Xt,Ft=nt,kt=qt,Yt=ee,Se=J,Ie=Math.PI*120/180,Ye=Math.PI/180*(+jt||0),un=[],we,Vt,et,oe,Gt;if(Q)Vt=Q[0],et=Q[1],oe=Q[2],Gt=Q[3];else{we=xt(Rt,Tt,-Ye),Rt=we.x,Tt=we.y,we=xt(Yt,Se,-Ye),Yt=we.x,Se=we.y;var ke=(Rt-Yt)/2,Me=(Tt-Se)/2,j=ke*ke/(Ft*Ft)+Me*Me/(kt*kt);j>1&&(j=Math.sqrt(j),Ft*=j,kt*=j);var Mt=Ft*Ft,$=kt*kt,Ct=(Ut===gt?-1:1)*Math.sqrt(Math.abs((Mt*$-Mt*Me*Me-$*ke*ke)/(Mt*Me*Me+$*ke*ke)));oe=Ct*Ft*Me/kt+(Rt+Yt)/2,Gt=Ct*-kt*ke/Ft+(Tt+Se)/2,Vt=Math.asin(((Tt-Gt)/kt*Math.pow(10,9)>>0)/Math.pow(10,9)),et=Math.asin(((Se-Gt)/kt*Math.pow(10,9)>>0)/Math.pow(10,9)),Vt=Rt<oe?Math.PI-Vt:Vt,et=Yt<oe?Math.PI-et:et,Vt<0&&(Vt=Math.PI*2+Vt),et<0&&(et=Math.PI*2+et),gt&&Vt>et&&(Vt-=Math.PI*2),!gt&&et>Vt&&(et-=Math.PI*2)}var wt=et-Vt;if(Math.abs(wt)>Ie){var z=et,ot=Yt,Jt=Se;et=Vt+Ie*(gt&&et>Vt?1:-1),Yt=oe+Ft*Math.cos(et),Se=Gt+kt*Math.sin(et),un=st(Yt,Se,Ft,kt,jt,0,gt,ot,Jt,[et,z,oe,Gt])}wt=et-Vt;var de=Math.cos(Vt),pe=Math.sin(Vt),Xe=Math.cos(et),je=Math.sin(et),sn=Math.tan(wt/4),ln=4/3*Ft*sn,Zt=4/3*kt*sn,ct=[Rt,Tt],zt=[Rt+ln*pe,Tt-Zt*de],ue=[Yt+ln*je,Se-Zt*Xe],_e=[Yt,Se];if(zt[0]=2*ct[0]-zt[0],zt[1]=2*ct[1]-zt[1],Q)return zt.concat(ue,_e,un);un=zt.concat(ue,_e,un);for(var St=[],re=0,Pt=un.length;re<Pt;re+=1)St[re]=re%2?xt(un[re-1],un[re],Ye).y:xt(un[re],un[re+1],Ye).x;return St}},28659:function(Te,fe,D){"use strict";D.d(fe,{U:function(){return xt}});function xt(st){return st.map(function(Ot){return Array.isArray(Ot)?[].concat(Ot):Ot})}},4848:function(Te,fe,D){"use strict";D.d(fe,{A:function(){return un}});var xt=D(97582),st=D(11013),Ot=D(64985),Xt=D(41010),nt=D(56346),qt=D(18323);function jt(we){for(var Vt=we.pathValue[we.segmentStart],et=Vt.toLowerCase(),oe=we.data;oe.length>=qt.R[et]&&(et==="m"&&oe.length>2?(we.segments.push([Vt].concat(oe.splice(0,2))),et="l",Vt=Vt==="m"?"l":"L"):we.segments.push([Vt].concat(oe.splice(0,qt.R[et]))),!!qt.R[et]););}function Ut(we){var Vt=we.index,et=we.pathValue,oe=et.charCodeAt(Vt);if(oe===48){we.param=0,we.index+=1;return}if(oe===49){we.param=1,we.index+=1;return}we.err='[path-util]: invalid Arc flag "'.concat(et[Vt],'", expecting 0 or 1 at index ').concat(Vt)}function gt(we){return we>=48&&we<=57||we===43||we===45||we===46}function ee(we){return we>=48&&we<=57}function J(we){var Vt=we.max,et=we.pathValue,oe=we.index,Gt=oe,ke=!1,Me=!1,j=!1,Mt=!1,$;if(Gt>=Vt){we.err="[path-util]: Invalid path value at index ".concat(Gt,', "pathValue" is missing param');return}if($=et.charCodeAt(Gt),($===43||$===45)&&(Gt+=1,$=et.charCodeAt(Gt)),!ee($)&&$!==46){we.err="[path-util]: Invalid path value at index ".concat(Gt,', "').concat(et[Gt],'" is not a number');return}if($!==46){if(ke=$===48,Gt+=1,$=et.charCodeAt(Gt),ke&&Gt<Vt&&$&&ee($)){we.err="[path-util]: Invalid path value at index ".concat(oe,', "').concat(et[oe],'" illegal number');return}for(;Gt<Vt&&ee(et.charCodeAt(Gt));)Gt+=1,Me=!0;$=et.charCodeAt(Gt)}if($===46){for(Mt=!0,Gt+=1;ee(et.charCodeAt(Gt));)Gt+=1,j=!0;$=et.charCodeAt(Gt)}if($===101||$===69){if(Mt&&!Me&&!j){we.err="[path-util]: Invalid path value at index ".concat(Gt,', "').concat(et[Gt],'" invalid float exponent');return}if(Gt+=1,$=et.charCodeAt(Gt),($===43||$===45)&&(Gt+=1),Gt<Vt&&ee(et.charCodeAt(Gt)))for(;Gt<Vt&&ee(et.charCodeAt(Gt));)Gt+=1;else{we.err="[path-util]: Invalid path value at index ".concat(Gt,', "').concat(et[Gt],'" invalid integer exponent');return}}we.index=Gt,we.param=+we.pathValue.slice(oe,Gt)}function Q(we){var Vt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return we===10||we===13||we===8232||we===8233||we===32||we===9||we===11||we===12||we===160||we>=5760&&Vt.includes(we)}function Rt(we){for(var Vt=we.pathValue,et=we.max;we.index<et&&Q(Vt.charCodeAt(we.index));)we.index+=1}function Tt(we){switch(we|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Ft(we){return(we|32)===97}function kt(we){var Vt=we.max,et=we.pathValue,oe=we.index,Gt=et.charCodeAt(oe),ke=qt.R[et[oe].toLowerCase()];if(we.segmentStart=oe,!Tt(Gt)){we.err='[path-util]: Invalid path value "'.concat(et[oe],'" is not a path command');return}if(we.index+=1,Rt(we),we.data=[],!ke){jt(we);return}for(;;){for(var Me=ke;Me>0;Me-=1){if(Ft(Gt)&&(Me===3||Me===4)?Ut(we):J(we),we.err.length)return;we.data.push(we.param),Rt(we),we.index<Vt&&et.charCodeAt(we.index)===44&&(we.index+=1,Rt(we))}if(we.index>=we.max||!gt(et.charCodeAt(we.index)))break}jt(we)}var Yt=function(){function we(Vt){this.pathValue=Vt,this.segments=[],this.max=Vt.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return we}();function Se(we){if((0,nt.n)(we))return[].concat(we);var Vt=new Yt(we);for(Rt(Vt);Vt.index<Vt.max&&!Vt.err.length;)kt(Vt);return Vt.err?Vt.err:Vt.segments}function Ie(we){if((0,Xt.b)(we))return[].concat(we);var Vt=Se(we),et=0,oe=0,Gt=0,ke=0;return Vt.map(function(Me){var j=Me.slice(1).map(Number),Mt=Me[0],$=Mt.toUpperCase();if(Mt==="M")return et=j[0],oe=j[1],Gt=et,ke=oe,["M",et,oe];var Ct;if(Mt!==$)switch($){case"A":Ct=[$,j[0],j[1],j[2],j[3],j[4],j[5]+et,j[6]+oe];break;case"V":Ct=[$,j[0]+oe];break;case"H":Ct=[$,j[0]+et];break;default:{var wt=j.map(function(ot,Jt){return ot+(Jt%2?oe:et)});Ct=[$].concat(wt)}}else Ct=[$].concat(j);var z=Ct.length;switch($){case"Z":et=Gt,oe=ke;break;case"H":et=Ct[1];break;case"V":oe=Ct[1];break;default:et=Ct[z-2],oe=Ct[z-1],$==="M"&&(Gt=et,ke=oe)}return Ct})}function Ye(we,Vt){var et=we[0],oe=Vt.x1,Gt=Vt.y1,ke=Vt.x2,Me=Vt.y2,j=we.slice(1).map(Number),Mt=we;if("TQ".includes(et)||(Vt.qx=null,Vt.qy=null),et==="H")Mt=["L",we[1],Gt];else if(et==="V")Mt=["L",oe,we[1]];else if(et==="S"){var $=oe*2-ke,Ct=Gt*2-Me;Vt.x1=$,Vt.y1=Ct,Mt=["C",$,Ct].concat(j)}else if(et==="T"){var wt=oe*2-Vt.qx,z=Gt*2-Vt.qy;Vt.qx=wt,Vt.qy=z,Mt=["Q",wt,z].concat(j)}else if(et==="Q"){var ot=j[0],Jt=j[1];Vt.qx=ot,Vt.qy=Jt}return Mt}function un(we){if((0,st.y)(we))return[].concat(we);for(var Vt=Ie(we),et=(0,xt.pi)({},Ot.z),oe=0;oe<Vt.length;oe+=1){Vt[oe]=Ye(Vt[oe],et);var Gt=Vt[oe],ke=Gt.length;et.x1=+Gt[ke-2],et.y1=+Gt[ke-1],et.x2=+Gt[ke-4]||et.x1,et.y2=+Gt[ke-3]||et.y1}return Vt}},65850:function(Te,fe,D){"use strict";D.d(fe,{G:function(){return xt}});function xt(st){var Ot=st.slice(1).map(function(Xt,nt,qt){return nt?qt[nt-1].slice(-2).concat(Xt.slice(1)):st[0].slice(1).concat(Xt.slice(1))}).map(function(Xt){return Xt.map(function(nt,qt){return Xt[Xt.length-qt-2*(1-qt%2)]})}).reverse();return[["M"].concat(Ot[0].slice(0,2))].concat(Ot.map(function(Xt){return["C"].concat(Xt.slice(2))}))}},44078:function(Te,fe,D){"use strict";D.d(fe,{y:function(){return xt}});function xt(st,Ot){return Math.sqrt((st[0]-Ot[0])*(st[0]-Ot[0])+(st[1]-Ot[1])*(st[1]-Ot[1]))}},99872:function(Te,fe,D){"use strict";D.d(fe,{x:function(){return qt}});var xt=D(17570),st=D(6489),Ot=50;function Xt(jt,Ut){Ut===void 0&&(Ut=.5);var gt=jt.slice(0,2),ee=jt.slice(2,4),J=jt.slice(4,6),Q=jt.slice(6,8),Rt=(0,xt.k)(gt,ee,Ut),Tt=(0,xt.k)(ee,J,Ut),Ft=(0,xt.k)(J,Q,Ut),kt=(0,xt.k)(Rt,Tt,Ut),Yt=(0,xt.k)(Tt,Ft,Ut),Se=(0,xt.k)(kt,Yt,Ut);return[["C"].concat(Rt,kt,Se),["C"].concat(Yt,Ft,Q)]}function nt(jt){return jt.map(function(Ut,gt,ee){var J=gt&&ee[gt-1].slice(-2).concat(Ut.slice(1)),Q=gt?(0,st.S)(J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7],J[8],{bbox:!1}).length:0,Rt;return gt?Rt=Q?Xt(J):[Ut,Ut]:Rt=[Ut],{s:Ut,ss:Rt,l:Q}})}function qt(jt,Ut,gt,ee){if(ee===void 0&&(ee=0),ee>Ot)return console.warn("Maximum recursion depth reached in equalizeSegments"),[jt,Ut];var J=nt(jt),Q=nt(Ut),Rt=J.length,Tt=Q.length,Ft=J.filter(function(et){return et.l}).length,kt=Q.filter(function(et){return et.l}).length,Yt=J.filter(function(et){return et.l}).reduce(function(et,oe){var Gt=oe.l;return et+Gt},0)/Ft||0,Se=Q.filter(function(et){return et.l}).reduce(function(et,oe){var Gt=oe.l;return et+Gt},0)/kt||0,Ie=gt||Math.max(Rt,Tt),Ye=[Yt,Se],un=[Ie-Rt,Ie-Tt],we=0,Vt=[J,Q].map(function(et,oe){return et.l===Ie?et.map(function(Gt){return Gt.s}):et.map(function(Gt,ke){return we=ke&&un[oe]&&Gt.l>=Ye[oe],un[oe]-=we?1:0,we?Gt.ss:[Gt.s]}).flat()});return Vt[0].length===Vt[1].length?Vt:qt(Vt[0],Vt[1],Ie,ee+1)}},92455:function(Te,fe,D){"use strict";D.d(fe,{b:function(){return Xt}});var xt=D(75839);function st(nt,qt,jt,Ut,gt,ee,J,Q){return 3*((Q-qt)*(jt+gt)-(J-nt)*(Ut+ee)+Ut*(nt-gt)-jt*(qt-ee)+Q*(gt+nt/3)-J*(ee+qt/3))/20}function Ot(nt){var qt=0,jt=0,Ut=0;return(0,xt.Y)(nt).map(function(gt){var ee;switch(gt[0]){case"M":return qt=gt[1],jt=gt[2],0;default:var J=gt.slice(1),Q=J[0],Rt=J[1],Tt=J[2],Ft=J[3],kt=J[4],Yt=J[5];return Ut=st(qt,jt,Q,Rt,Tt,Ft,kt,Yt),ee=gt.slice(-2),qt=ee[0],jt=ee[1],Ut}}).reduce(function(gt,ee){return gt+ee},0)}function Xt(nt){return Ot(nt)>=0}},84329:function(Te,fe,D){"use strict";D.d(fe,{r:function(){return Ot}});var xt=D(97582),st=D(32262);function Ot(Xt,nt,qt){return(0,st.s)(Xt,nt,(0,xt.pi)((0,xt.pi)({},qt),{bbox:!1,length:!0})).point}},83555:function(Te,fe,D){"use strict";D.d(fe,{g:function(){return Ot}});var xt=D(44078);function st(Xt){var nt=Xt.length,qt=nt-1;return Xt.map(function(jt,Ut){return Xt.map(function(gt,ee){var J=Ut+ee,Q;return ee===0||Xt[J]&&Xt[J][0]==="M"?(Q=Xt[J],["M"].concat(Q.slice(-2))):(J>=nt&&(J-=qt),Xt[J])})})}function Ot(Xt,nt){var qt=Xt.length-1,jt=[],Ut=0,gt=0,ee=st(Xt);return ee.forEach(function(J,Q){Xt.slice(1).forEach(function(Rt,Tt){gt+=(0,xt.y)(Xt[(Q+Tt)%qt].slice(-2),nt[Tt%qt].slice(-2))}),jt[Q]=gt,gt=0}),Ut=jt.indexOf(Math.min.apply(null,jt)),ee[Ut]}},69877:function(Te,fe,D){"use strict";D.d(fe,{D:function(){return Ot}});var xt=D(97582),st=D(32262);function Ot(Xt,nt){return(0,st.s)(Xt,void 0,(0,xt.pi)((0,xt.pi)({},nt),{bbox:!1,length:!0})).length}},41010:function(Te,fe,D){"use strict";D.d(fe,{b:function(){return st}});var xt=D(56346);function st(Ot){return(0,xt.n)(Ot)&&Ot.every(function(Xt){var nt=Xt[0];return nt===nt.toUpperCase()})}},11013:function(Te,fe,D){"use strict";D.d(fe,{y:function(){return st}});var xt=D(41010);function st(Ot){return(0,xt.b)(Ot)&&Ot.every(function(Xt){var nt=Xt[0];return"ACLMQZ".includes(nt)})}},56346:function(Te,fe,D){"use strict";D.d(fe,{n:function(){return st}});var xt=D(18323);function st(Ot){return Array.isArray(Ot)&&Ot.every(function(Xt){var nt=Xt[0].toLowerCase();return xt.R[nt]===Xt.length-1&&"achlmqstvz".includes(nt)})}},17570:function(Te,fe,D){"use strict";D.d(fe,{k:function(){return xt}});function xt(st,Ot,Xt){var nt=st[0],qt=st[1],jt=Ot[0],Ut=Ot[1];return[nt+(jt-nt)*Xt,qt+(Ut-qt)*Xt]}},32262:function(Te,fe,D){"use strict";D.d(fe,{s:function(){return J}});var xt=D(4848),st=D(17570),Ot=D(44078);function Xt(Q,Rt,Tt,Ft,kt){var Yt=(0,Ot.y)([Q,Rt],[Tt,Ft]),Se={x:0,y:0};if(typeof kt=="number")if(kt<=0)Se={x:Q,y:Rt};else if(kt>=Yt)Se={x:Tt,y:Ft};else{var Ie=(0,st.k)([Q,Rt],[Tt,Ft],kt/Yt),Ye=Ie[0],un=Ie[1];Se={x:Ye,y:un}}return{length:Yt,point:Se,min:{x:Math.min(Q,Tt),y:Math.min(Rt,Ft)},max:{x:Math.max(Q,Tt),y:Math.max(Rt,Ft)}}}function nt(Q,Rt){var Tt=Q.x,Ft=Q.y,kt=Rt.x,Yt=Rt.y,Se=Tt*kt+Ft*Yt,Ie=Math.sqrt((Math.pow(Tt,2)+Math.pow(Ft,2))*(Math.pow(kt,2)+Math.pow(Yt,2))),Ye=Tt*Yt-Ft*kt<0?-1:1,un=Ye*Math.acos(Se/Ie);return un}function qt(Q,Rt,Tt,Ft,kt,Yt,Se,Ie,Ye,un){var we=Math.abs,Vt=Math.sin,et=Math.cos,oe=Math.sqrt,Gt=Math.PI,ke=we(Tt),Me=we(Ft),j=(kt%360+360)%360,Mt=j*(Gt/180);if(Q===Ie&&Rt===Ye)return{x:Q,y:Rt};if(ke===0||Me===0)return Xt(Q,Rt,Ie,Ye,un).point;var $=(Q-Ie)/2,Ct=(Rt-Ye)/2,wt={x:et(Mt)*$+Vt(Mt)*Ct,y:-Vt(Mt)*$+et(Mt)*Ct},z=Math.pow(wt.x,2)/Math.pow(ke,2)+Math.pow(wt.y,2)/Math.pow(Me,2);z>1&&(ke*=oe(z),Me*=oe(z));var ot=Math.pow(ke,2)*Math.pow(Me,2)-Math.pow(ke,2)*Math.pow(wt.y,2)-Math.pow(Me,2)*Math.pow(wt.x,2),Jt=Math.pow(ke,2)*Math.pow(wt.y,2)+Math.pow(Me,2)*Math.pow(wt.x,2),de=ot/Jt;de=de<0?0:de;var pe=(Yt!==Se?1:-1)*oe(de),Xe={x:pe*(ke*wt.y/Me),y:pe*(-(Me*wt.x)/ke)},je={x:et(Mt)*Xe.x-Vt(Mt)*Xe.y+(Q+Ie)/2,y:Vt(Mt)*Xe.x+et(Mt)*Xe.y+(Rt+Ye)/2},sn={x:(wt.x-Xe.x)/ke,y:(wt.y-Xe.y)/Me},ln=nt({x:1,y:0},sn),Zt={x:(-wt.x-Xe.x)/ke,y:(-wt.y-Xe.y)/Me},ct=nt(sn,Zt);!Se&&ct>0?ct-=2*Gt:Se&&ct<0&&(ct+=2*Gt),ct%=2*Gt;var zt=ln+ct*un,ue=ke*et(zt),_e=Me*Vt(zt),St={x:et(Mt)*ue-Vt(Mt)*_e+je.x,y:Vt(Mt)*ue+et(Mt)*_e+je.y};return St}function jt(Q,Rt,Tt,Ft,kt,Yt,Se,Ie,Ye,un,we){var Vt,et=we.bbox,oe=et===void 0?!0:et,Gt=we.length,ke=Gt===void 0?!0:Gt,Me=we.sampleSize,j=Me===void 0?30:Me,Mt=typeof un=="number",$=Q,Ct=Rt,wt=0,z=[$,Ct,wt],ot=[$,Ct],Jt=0,de={x:0,y:0},pe=[{x:$,y:Ct}];Mt&&un<=0&&(de={x:$,y:Ct});for(var Xe=0;Xe<=j;Xe+=1){if(Jt=Xe/j,Vt=qt(Q,Rt,Tt,Ft,kt,Yt,Se,Ie,Ye,Jt),$=Vt.x,Ct=Vt.y,oe&&pe.push({x:$,y:Ct}),ke&&(wt+=(0,Ot.y)(ot,[$,Ct])),ot=[$,Ct],Mt&&wt>=un&&un>z[2]){var je=(wt-un)/(wt-z[2]);de={x:ot[0]*(1-je)+z[0]*je,y:ot[1]*(1-je)+z[1]*je}}z=[$,Ct,wt]}return Mt&&un>=wt&&(de={x:Ie,y:Ye}),{length:wt,point:de,min:{x:Math.min.apply(null,pe.map(function(sn){return sn.x})),y:Math.min.apply(null,pe.map(function(sn){return sn.y}))},max:{x:Math.max.apply(null,pe.map(function(sn){return sn.x})),y:Math.max.apply(null,pe.map(function(sn){return sn.y}))}}}var Ut=D(6489);function gt(Q,Rt,Tt,Ft,kt,Yt,Se){var Ie=1-Se;return{x:Math.pow(Ie,2)*Q+2*Ie*Se*Tt+Math.pow(Se,2)*kt,y:Math.pow(Ie,2)*Rt+2*Ie*Se*Ft+Math.pow(Se,2)*Yt}}function ee(Q,Rt,Tt,Ft,kt,Yt,Se,Ie){var Ye,un=Ie.bbox,we=un===void 0?!0:un,Vt=Ie.length,et=Vt===void 0?!0:Vt,oe=Ie.sampleSize,Gt=oe===void 0?10:oe,ke=typeof Se=="number",Me=Q,j=Rt,Mt=0,$=[Me,j,Mt],Ct=[Me,j],wt=0,z={x:0,y:0},ot=[{x:Me,y:j}];ke&&Se<=0&&(z={x:Me,y:j});for(var Jt=0;Jt<=Gt;Jt+=1){if(wt=Jt/Gt,Ye=gt(Q,Rt,Tt,Ft,kt,Yt,wt),Me=Ye.x,j=Ye.y,we&&ot.push({x:Me,y:j}),et&&(Mt+=(0,Ot.y)(Ct,[Me,j])),Ct=[Me,j],ke&&Mt>=Se&&Se>$[2]){var de=(Mt-Se)/(Mt-$[2]);z={x:Ct[0]*(1-de)+$[0]*de,y:Ct[1]*(1-de)+$[1]*de}}$=[Me,j,Mt]}return ke&&Se>=Mt&&(z={x:kt,y:Yt}),{length:Mt,point:z,min:{x:Math.min.apply(null,ot.map(function(pe){return pe.x})),y:Math.min.apply(null,ot.map(function(pe){return pe.y}))},max:{x:Math.max.apply(null,ot.map(function(pe){return pe.x})),y:Math.max.apply(null,ot.map(function(pe){return pe.y}))}}}function J(Q,Rt,Tt){for(var Ft,kt,Yt,Se,Ie,Ye,un=(0,xt.A)(Q),we=typeof Rt=="number",Vt,et=[],oe,Gt=0,ke=0,Me=0,j=0,Mt,$=[],Ct=[],wt=0,z={x:0,y:0},ot=z,Jt=z,de=z,pe=0,Xe=0,je=un.length;Xe<je;Xe+=1)Mt=un[Xe],oe=Mt[0],Vt=oe==="M",et=Vt?et:[Gt,ke].concat(Mt.slice(1)),Vt?(Me=Mt[1],j=Mt[2],z={x:Me,y:j},ot=z,wt=0,we&&Rt<.001&&(de=z)):oe==="L"?(Ft=Xt(et[0],et[1],et[2],et[3],(Rt||0)-pe),wt=Ft.length,z=Ft.min,ot=Ft.max,Jt=Ft.point):oe==="A"?(kt=jt(et[0],et[1],et[2],et[3],et[4],et[5],et[6],et[7],et[8],(Rt||0)-pe,Tt||{}),wt=kt.length,z=kt.min,ot=kt.max,Jt=kt.point):oe==="C"?(Yt=(0,Ut.S)(et[0],et[1],et[2],et[3],et[4],et[5],et[6],et[7],(Rt||0)-pe,Tt||{}),wt=Yt.length,z=Yt.min,ot=Yt.max,Jt=Yt.point):oe==="Q"?(Se=ee(et[0],et[1],et[2],et[3],et[4],et[5],(Rt||0)-pe,Tt||{}),wt=Se.length,z=Se.min,ot=Se.max,Jt=Se.point):oe==="Z"&&(et=[Gt,ke,Me,j],Ie=Xt(et[0],et[1],et[2],et[3],(Rt||0)-pe),wt=Ie.length,z=Ie.min,ot=Ie.max,Jt=Ie.point),we&&pe<Rt&&pe+wt>=Rt&&(de=Jt),Ct.push(ot),$.push(z),pe+=wt,Ye=oe!=="Z"?Mt.slice(-2):[Me,j],Gt=Ye[0],ke=Ye[1];return we&&Rt>=pe&&(de={x:Gt,y:ke}),{length:pe,point:de,min:{x:Math.min.apply(null,$.map(function(sn){return sn.x})),y:Math.min.apply(null,$.map(function(sn){return sn.y}))},max:{x:Math.max.apply(null,Ct.map(function(sn){return sn.x})),y:Math.max.apply(null,Ct.map(function(sn){return sn.y}))}}}},6489:function(Te,fe,D){"use strict";D.d(fe,{S:function(){return Ot}});var xt=D(44078);function st(Xt,nt,qt,jt,Ut,gt,ee,J,Q){var Rt=1-Q;return{x:Math.pow(Rt,3)*Xt+3*Math.pow(Rt,2)*Q*qt+3*Rt*Math.pow(Q,2)*Ut+Math.pow(Q,3)*ee,y:Math.pow(Rt,3)*nt+3*Math.pow(Rt,2)*Q*jt+3*Rt*Math.pow(Q,2)*gt+Math.pow(Q,3)*J}}function Ot(Xt,nt,qt,jt,Ut,gt,ee,J,Q,Rt){var Tt,Ft=Rt.bbox,kt=Ft===void 0?!0:Ft,Yt=Rt.length,Se=Yt===void 0?!0:Yt,Ie=Rt.sampleSize,Ye=Ie===void 0?10:Ie,un=typeof Q=="number",we=Xt,Vt=nt,et=0,oe=[we,Vt,et],Gt=[we,Vt],ke=0,Me={x:0,y:0},j=[{x:we,y:Vt}];un&&Q<=0&&(Me={x:we,y:Vt});for(var Mt=0;Mt<=Ye;Mt+=1){if(ke=Mt/Ye,Tt=st(Xt,nt,qt,jt,Ut,gt,ee,J,ke),we=Tt.x,Vt=Tt.y,kt&&j.push({x:we,y:Vt}),Se&&(et+=(0,xt.y)(Gt,[we,Vt])),Gt=[we,Vt],un&&et>=Q&&Q>oe[2]){var $=(et-Q)/(et-oe[2]);Me={x:Gt[0]*(1-$)+oe[0]*$,y:Gt[1]*(1-$)+oe[1]*$}}oe=[we,Vt,et]}return un&&Q>=et&&(Me={x:ee,y:J}),{length:et,point:Me,min:{x:Math.min.apply(null,j.map(function(Ct){return Ct.x})),y:Math.min.apply(null,j.map(function(Ct){return Ct.y}))},max:{x:Math.max.apply(null,j.map(function(Ct){return Ct.x})),y:Math.max.apply(null,j.map(function(Ct){return Ct.y}))}}}},38163:function(Te){Te.exports=fe;function fe(st,Ot){var Xt=st&&st.type,nt;if(Xt==="FeatureCollection")for(nt=0;nt<st.features.length;nt++)fe(st.features[nt],Ot);else if(Xt==="GeometryCollection")for(nt=0;nt<st.geometries.length;nt++)fe(st.geometries[nt],Ot);else if(Xt==="Feature")fe(st.geometry,Ot);else if(Xt==="Polygon")D(st.coordinates,Ot);else if(Xt==="MultiPolygon")for(nt=0;nt<st.coordinates.length;nt++)D(st.coordinates[nt],Ot);return st}function D(st,Ot){if(st.length!==0){xt(st[0],Ot);for(var Xt=1;Xt<st.length;Xt++)xt(st[Xt],!Ot)}}function xt(st,Ot){for(var Xt=0,nt=0,qt=0,jt=st.length,Ut=jt-1;qt<jt;Ut=qt++){var gt=(st[qt][0]-st[Ut][0])*(st[Ut][1]+st[qt][1]),ee=Xt+gt;nt+=Math.abs(Xt)>=Math.abs(gt)?Xt-ee+gt:gt-ee+Xt,Xt=ee}Xt+nt>=0!=!!Ot&&st.reverse()}},75550:function(Te){"use strict";Te.exports=fe;function fe(D,xt){this.x=D,this.y=xt}fe.prototype={clone:function(){return new fe(this.x,this.y)},add:function(D){return this.clone()._add(D)},sub:function(D){return this.clone()._sub(D)},multByPoint:function(D){return this.clone()._multByPoint(D)},divByPoint:function(D){return this.clone()._divByPoint(D)},mult:function(D){return this.clone()._mult(D)},div:function(D){return this.clone()._div(D)},rotate:function(D){return this.clone()._rotate(D)},rotateAround:function(D,xt){return this.clone()._rotateAround(D,xt)},matMult:function(D){return this.clone()._matMult(D)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(D){return this.x===D.x&&this.y===D.y},dist:function(D){return Math.sqrt(this.distSqr(D))},distSqr:function(D){var xt=D.x-this.x,st=D.y-this.y;return xt*xt+st*st},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(D){return Math.atan2(this.y-D.y,this.x-D.x)},angleWith:function(D){return this.angleWithSep(D.x,D.y)},angleWithSep:function(D,xt){return Math.atan2(this.x*xt-this.y*D,this.x*D+this.y*xt)},_matMult:function(D){var xt=D[0]*this.x+D[1]*this.y,st=D[2]*this.x+D[3]*this.y;return this.x=xt,this.y=st,this},_add:function(D){return this.x+=D.x,this.y+=D.y,this},_sub:function(D){return this.x-=D.x,this.y-=D.y,this},_mult:function(D){return this.x*=D,this.y*=D,this},_div:function(D){return this.x/=D,this.y/=D,this},_multByPoint:function(D){return this.x*=D.x,this.y*=D.y,this},_divByPoint:function(D){return this.x/=D.x,this.y/=D.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var D=this.y;return this.y=this.x,this.x=-D,this},_rotate:function(D){var xt=Math.cos(D),st=Math.sin(D),Ot=xt*this.x-st*this.y,Xt=st*this.x+xt*this.y;return this.x=Ot,this.y=Xt,this},_rotateAround:function(D,xt){var st=Math.cos(D),Ot=Math.sin(D),Xt=xt.x+st*(this.x-xt.x)-Ot*(this.y-xt.y),nt=xt.y+Ot*(this.x-xt.x)+st*(this.y-xt.y);return this.x=Xt,this.y=nt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},fe.convert=function(D){return D instanceof fe?D:Array.isArray(D)?new fe(D[0],D[1]):D}},49296:function(Te){"use strict";Te.exports=D,Te.exports.default=D;var fe=1e20;function D(nt,qt,jt,Ut,gt,ee){this.fontSize=nt||24,this.buffer=qt===void 0?3:qt,this.cutoff=Ut||.25,this.fontFamily=gt||"sans-serif",this.fontWeight=ee||"normal",this.radius=jt||8;var J=this.size=this.fontSize+this.buffer*2,Q=J+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=J,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Q*Q),this.gridInner=new Float64Array(Q*Q),this.f=new Float64Array(Q),this.z=new Float64Array(Q+1),this.v=new Uint16Array(Q),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(J/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function xt(nt,qt,jt,Ut,gt,ee,J){ee.fill(fe,0,qt*jt),J.fill(0,0,qt*jt);for(var Q=(qt-Ut)/2,Rt=0;Rt<gt;Rt++)for(var Tt=0;Tt<Ut;Tt++){var Ft=(Rt+Q)*qt+Tt+Q,kt=nt.data[4*(Rt*Ut+Tt)+3]/255;if(kt===1)ee[Ft]=0,J[Ft]=fe;else if(kt===0)ee[Ft]=fe,J[Ft]=0;else{var Yt=Math.max(0,.5-kt),Se=Math.max(0,kt-.5);ee[Ft]=Yt*Yt,J[Ft]=Se*Se}}}function st(nt,qt,jt,Ut,gt,ee,J){for(var Q=0;Q<qt*jt;Q++){var Rt=Math.sqrt(Ut[Q])-Math.sqrt(gt[Q]);nt[Q]=Math.round(255-255*(Rt/ee+J))}}D.prototype._draw=function(nt,qt){var jt=this.ctx.measureText(nt),Ut=jt.width,gt=2*this.buffer,ee,J,Q,Rt,Tt,Ft,kt,Yt;qt&&this.useMetrics?(Tt=Math.floor(jt.actualBoundingBoxAscent),Yt=this.buffer+Math.ceil(jt.actualBoundingBoxAscent),Ft=this.buffer,kt=this.buffer,J=Math.min(this.size,Math.ceil(jt.actualBoundingBoxRight-jt.actualBoundingBoxLeft)),Rt=Math.min(this.size-Ft,Math.ceil(jt.actualBoundingBoxAscent+jt.actualBoundingBoxDescent)),ee=J+gt,Q=Rt+gt,this.ctx.textBaseline="alphabetic"):(ee=J=this.size,Q=Rt=this.size,Tt=19*this.fontSize/24,Ft=kt=0,Yt=this.middle,this.ctx.textBaseline="middle");var Se;J&&Rt&&(this.ctx.clearRect(kt,Ft,J,Rt),this.ctx.fillText(nt,this.buffer,Yt),Se=this.ctx.getImageData(kt,Ft,J,Rt));var Ie=new Uint8ClampedArray(ee*Q);return xt(Se,ee,Q,J,Rt,this.gridOuter,this.gridInner),Ot(this.gridOuter,ee,Q,this.f,this.v,this.z),Ot(this.gridInner,ee,Q,this.f,this.v,this.z),st(Ie,ee,Q,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Ie,metrics:{width:J,height:Rt,sdfWidth:ee,sdfHeight:Q,top:Tt,left:0,advance:Ut}}},D.prototype.draw=function(nt){return this._draw(nt,!1).data},D.prototype.drawWithMetrics=function(nt){return this._draw(nt,!0)};function Ot(nt,qt,jt,Ut,gt,ee){for(var J=0;J<qt;J++)Xt(nt,J,qt,jt,Ut,gt,ee);for(var Q=0;Q<jt;Q++)Xt(nt,Q*qt,1,qt,Ut,gt,ee)}function Xt(nt,qt,jt,Ut,gt,ee,J){var Q,Rt,Tt,Ft;for(ee[0]=0,J[0]=-fe,J[1]=fe,Q=0;Q<Ut;Q++)gt[Q]=nt[qt+Q*jt];for(Q=1,Rt=0,Tt=0;Q<Ut;Q++){do Ft=ee[Rt],Tt=(gt[Q]-gt[Ft]+Q*Q-Ft*Ft)/(Q-Ft)/2;while(Tt<=J[Rt]&&--Rt>-1);Rt++,ee[Rt]=Q,J[Rt]=Tt,J[Rt+1]=fe}for(Q=0,Rt=0;Q<Ut;Q++){for(;J[Rt+1]<Q;)Rt++;Ft=ee[Rt],nt[qt+Q*jt]=gt[Ft]+(Q-Ft)*(Q-Ft)}}},38929:function(Te,fe,D){Te.exports.VectorTile=D(22779),D(66024),D(59701)},22779:function(Te,fe,D){"use strict";var xt=D(59701);Te.exports=st;function st(Xt,nt){this.layers=Xt.readFields(Ot,{},nt)}function Ot(Xt,nt,qt){if(Xt===3){var jt=new xt(qt,qt.readVarint()+qt.pos);jt.length&&(nt[jt.name]=jt)}}},66024:function(Te,fe,D){"use strict";var xt=D(75550);Te.exports=st;function st(jt,Ut,gt,ee,J){this.properties={},this.extent=gt,this.type=0,this._pbf=jt,this._geometry=-1,this._keys=ee,this._values=J,jt.readFields(Ot,this,Ut)}function Ot(jt,Ut,gt){jt==1?Ut.id=gt.readVarint():jt==2?Xt(gt,Ut):jt==3?Ut.type=gt.readVarint():jt==4&&(Ut._geometry=gt.pos)}function Xt(jt,Ut){for(var gt=jt.readVarint()+jt.pos;jt.pos<gt;){var ee=Ut._keys[jt.readVarint()],J=Ut._values[jt.readVarint()];Ut.properties[ee]=J}}st.types=["Unknown","Point","LineString","Polygon"],st.prototype.loadGeometry=function(){var jt=this._pbf;jt.pos=this._geometry;for(var Ut=jt.readVarint()+jt.pos,gt=1,ee=0,J=0,Q=0,Rt=[],Tt;jt.pos<Ut;){if(ee<=0){var Ft=jt.readVarint();gt=Ft&7,ee=Ft>>3}if(ee--,gt===1||gt===2)J+=jt.readSVarint(),Q+=jt.readSVarint(),gt===1&&(Tt&&Rt.push(Tt),Tt=[]),Tt.push(new xt(J,Q));else if(gt===7)Tt&&Tt.push(Tt[0].clone());else throw new Error("unknown command "+gt)}return Tt&&Rt.push(Tt),Rt},st.prototype.bbox=function(){var jt=this._pbf;jt.pos=this._geometry;for(var Ut=jt.readVarint()+jt.pos,gt=1,ee=0,J=0,Q=0,Rt=1/0,Tt=-1/0,Ft=1/0,kt=-1/0;jt.pos<Ut;){if(ee<=0){var Yt=jt.readVarint();gt=Yt&7,ee=Yt>>3}if(ee--,gt===1||gt===2)J+=jt.readSVarint(),Q+=jt.readSVarint(),J<Rt&&(Rt=J),J>Tt&&(Tt=J),Q<Ft&&(Ft=Q),Q>kt&&(kt=Q);else if(gt!==7)throw new Error("unknown command "+gt)}return[Rt,Ft,Tt,kt]},st.prototype.toGeoJSON=function(jt,Ut,gt){var ee=this.extent*Math.pow(2,gt),J=this.extent*jt,Q=this.extent*Ut,Rt=this.loadGeometry(),Tt=st.types[this.type],Ft,kt;function Yt(Ye){for(var un=0;un<Ye.length;un++){var we=Ye[un],Vt=180-(we.y+Q)*360/ee;Ye[un]=[(we.x+J)*360/ee-180,360/Math.PI*Math.atan(Math.exp(Vt*Math.PI/180))-90]}}switch(this.type){case 1:var Se=[];for(Ft=0;Ft<Rt.length;Ft++)Se[Ft]=Rt[Ft][0];Rt=Se,Yt(Rt);break;case 2:for(Ft=0;Ft<Rt.length;Ft++)Yt(Rt[Ft]);break;case 3:for(Rt=nt(Rt),Ft=0;Ft<Rt.length;Ft++)for(kt=0;kt<Rt[Ft].length;kt++)Yt(Rt[Ft][kt]);break}Rt.length===1?Rt=Rt[0]:Tt="Multi"+Tt;var Ie={type:"Feature",geometry:{type:Tt,coordinates:Rt},properties:this.properties};return"id"in this&&(Ie.id=this.id),Ie};function nt(jt){var Ut=jt.length;if(Ut<=1)return[jt];for(var gt=[],ee,J,Q=0;Q<Ut;Q++){var Rt=qt(jt[Q]);Rt!==0&&(J===void 0&&(J=Rt<0),J===Rt<0?(ee&&gt.push(ee),ee=[jt[Q]]):ee.push(jt[Q]))}return ee&&gt.push(ee),gt}function qt(jt){for(var Ut=0,gt=0,ee=jt.length,J=ee-1,Q,Rt;gt<ee;J=gt++)Q=jt[gt],Rt=jt[J],Ut+=(Rt.x-Q.x)*(Q.y+Rt.y);return Ut}},59701:function(Te,fe,D){"use strict";var xt=D(66024);Te.exports=st;function st(nt,qt){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=nt,this._keys=[],this._values=[],this._features=[],nt.readFields(Ot,this,qt),this.length=this._features.length}function Ot(nt,qt,jt){nt===15?qt.version=jt.readVarint():nt===1?qt.name=jt.readString():nt===5?qt.extent=jt.readVarint():nt===2?qt._features.push(jt.pos):nt===3?qt._keys.push(jt.readString()):nt===4&&qt._values.push(Xt(jt))}function Xt(nt){for(var qt=null,jt=nt.readVarint()+nt.pos;nt.pos<jt;){var Ut=nt.readVarint()>>3;qt=Ut===1?nt.readString():Ut===2?nt.readFloat():Ut===3?nt.readDouble():Ut===4?nt.readVarint64():Ut===5?nt.readVarint():Ut===6?nt.readSVarint():Ut===7?nt.readBoolean():null}return qt}st.prototype.feature=function(nt){if(nt<0||nt>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[nt];var qt=this._pbf.readVarint()+this._pbf.pos;return new xt(this._pbf,qt,this.extent,this._keys,this._values)}},8388:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return um}});var xt=D(25655),st={},Ot={},Xt=a=>Ot[a],nt=(a,i)=>{Ot[a]=i},qt=a=>st[a],jt=(a,i)=>{st[a]=i},Ut={},gt={},ee=34,J=10,Q=13;function Rt(a){return new Function("d","return {"+a.map(function(i,c){return JSON.stringify(i)+": d["+c+'] || ""'}).join(",")+"}")}function Tt(a,i){var c=Rt(a);return function(f,g){return i(c(f),g,a)}}function Ft(a){var i=Object.create(null),c=[];return a.forEach(function(f){for(var g in f)g in i||c.push(i[g]=g)}),c}function kt(a,i){var c=a+"",f=c.length;return f<i?new Array(i-f+1).join(0)+c:c}function Yt(a){return a<0?"-"+kt(-a,6):a>9999?"+"+kt(a,6):kt(a,4)}function Se(a){var i=a.getUTCHours(),c=a.getUTCMinutes(),f=a.getUTCSeconds(),g=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":Yt(a.getUTCFullYear(),4)+"-"+kt(a.getUTCMonth()+1,2)+"-"+kt(a.getUTCDate(),2)+(g?"T"+kt(i,2)+":"+kt(c,2)+":"+kt(f,2)+"."+kt(g,3)+"Z":f?"T"+kt(i,2)+":"+kt(c,2)+":"+kt(f,2)+"Z":c||i?"T"+kt(i,2)+":"+kt(c,2)+"Z":"")}function Ie(a){var i=new RegExp('["'+a+`
\r]`),c=a.charCodeAt(0);function f(U,G){var mt,Nt,Qt=g(U,function(ye,Fe){if(mt)return mt(ye,Fe-1);Nt=ye,mt=G?Tt(ye,G):Rt(ye)});return Qt.columns=Nt||[],Qt}function g(U,G){var mt=[],Nt=U.length,Qt=0,ye=0,Fe,ze=Nt<=0,Ve=!1;U.charCodeAt(Nt-1)===J&&--Nt,U.charCodeAt(Nt-1)===Q&&--Nt;function tn(){if(ze)return gt;if(Ve)return Ve=!1,Ut;var Pn,Tn=Qt,kn;if(U.charCodeAt(Tn)===ee){for(;Qt++<Nt&&U.charCodeAt(Qt)!==ee||U.charCodeAt(++Qt)===ee;);return(Pn=Qt)>=Nt?ze=!0:(kn=U.charCodeAt(Qt++))===J?Ve=!0:kn===Q&&(Ve=!0,U.charCodeAt(Qt)===J&&++Qt),U.slice(Tn+1,Pn-1).replace(/""/g,'"')}for(;Qt<Nt;){if((kn=U.charCodeAt(Pn=Qt++))===J)Ve=!0;else if(kn===Q)Ve=!0,U.charCodeAt(Qt)===J&&++Qt;else if(kn!==c)continue;return U.slice(Tn,Pn)}return ze=!0,U.slice(Tn,Nt)}for(;(Fe=tn())!==gt;){for(var pn=[];Fe!==Ut&&Fe!==gt;)pn.push(Fe),Fe=tn();G&&(pn=G(pn,ye++))==null||mt.push(pn)}return mt}function y(U,G){return U.map(function(mt){return G.map(function(Nt){return B(mt[Nt])}).join(a)})}function x(U,G){return G==null&&(G=Ft(U)),[G.map(B).join(a)].concat(y(U,G)).join(`
`)}function w(U,G){return G==null&&(G=Ft(U)),y(U,G).join(`
`)}function T(U){return U.map(P).join(`
`)}function P(U){return U.map(B).join(a)}function B(U){return U==null?"":U instanceof Date?Se(U):i.test(U+="")?'"'+U.replace(/"/g,'""')+'"':U}return{parse:f,parseRows:g,format:x,formatBody:w,formatRows:T,formatRow:P,formatValue:B}}var Ye=Ie(","),un=Ye.parse,we=Ye.parseRows,Vt=Ye.format,et=Ye.formatBody,oe=Ye.formatRows,Gt=Ye.formatRow,ke=Ye.formatValue,Me=63710088e-1,j={centimeters:Me*100,centimetres:Me*100,degrees:Me/111325,feet:Me*3.28084,inches:Me*39.37,kilometers:Me/1e3,kilometres:Me/1e3,meters:Me,metres:Me,miles:Me/1609.344,millimeters:Me*1e3,millimetres:Me*1e3,nauticalmiles:Me/1852,radians:1,yards:Me*1.0936},Mt={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Me,yards:1.0936133},$={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Ct(a,i,c){c===void 0&&(c={});var f={type:"Feature"};return(c.id===0||c.id)&&(f.id=c.id),c.bbox&&(f.bbox=c.bbox),f.properties=i||{},f.geometry=a,f}function wt(a,i,c){switch(c===void 0&&(c={}),a){case"Point":return z(i).geometry;case"LineString":return pe(i).geometry;case"Polygon":return Jt(i).geometry;case"MultiPoint":return ln(i).geometry;case"MultiLineString":return sn(i).geometry;case"MultiPolygon":return Zt(i).geometry;default:throw new Error(a+" is invalid")}}function z(a,i,c){if(c===void 0&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!C(a[0])||!C(a[1]))throw new Error("coordinates must contain numbers");var f={type:"Point",coordinates:a};return Ct(f,i,c)}function ot(a,i,c){return c===void 0&&(c={}),je(a.map(function(f){return z(f,i)}),c)}function Jt(a,i,c){c===void 0&&(c={});for(var f=0,g=a;f<g.length;f++){var y=g[f];if(y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<y[y.length-1].length;x++)if(y[y.length-1][x]!==y[0][x])throw new Error("First and last Position are not equivalent.")}var w={type:"Polygon",coordinates:a};return Ct(w,i,c)}function de(a,i,c){return c===void 0&&(c={}),je(a.map(function(f){return Jt(f,i)}),c)}function pe(a,i,c){if(c===void 0&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");var f={type:"LineString",coordinates:a};return Ct(f,i,c)}function Xe(a,i,c){return c===void 0&&(c={}),je(a.map(function(f){return pe(f,i)}),c)}function je(a,i){i===void 0&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function sn(a,i,c){c===void 0&&(c={});var f={type:"MultiLineString",coordinates:a};return Ct(f,i,c)}function ln(a,i,c){c===void 0&&(c={});var f={type:"MultiPoint",coordinates:a};return Ct(f,i,c)}function Zt(a,i,c){c===void 0&&(c={});var f={type:"MultiPolygon",coordinates:a};return Ct(f,i,c)}function ct(a,i,c){c===void 0&&(c={});var f={type:"GeometryCollection",geometries:a};return Ct(f,i,c)}function zt(a,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c}function ue(a,i){i===void 0&&(i="kilometers");var c=j[i];if(!c)throw new Error(i+" units is invalid");return a*c}function _e(a,i){i===void 0&&(i="kilometers");var c=j[i];if(!c)throw new Error(i+" units is invalid");return a/c}function St(a,i){return Pt(_e(a,i))}function re(a){var i=a%360;return i<0&&(i+=360),i}function Pt(a){var i=a%(2*Math.PI);return i*180/Math.PI}function Y(a){var i=a%360;return i*Math.PI/180}function Dt(a,i,c){if(i===void 0&&(i="kilometers"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return ue(_e(a,i),c)}function V(a,i,c){if(i===void 0&&(i="meters"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var f=$[i];if(!f)throw new Error("invalid original units");var g=$[c];if(!g)throw new Error("invalid final units");return a/f*g}function C(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}function F(a){return!!a&&a.constructor===Object}function At(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!C(i))throw new Error("bbox must only contain numbers")})}function Kt(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}function ne(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function be(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ce(a){if(a.length>1&&isNumber(a[0])&&isNumber(a[1]))return!0;if(Array.isArray(a[0])&&a[0].length)return Ce(a[0]);throw new Error("coordinates must only contain numbers")}function Re(a,i,c){if(!i||!c)throw new Error("type and name required");if(!a||a.type!==i)throw new Error("Invalid input to "+c+": must be a "+i+", given "+a.type)}function Le(a,i,c){if(!a)throw new Error("No feature passed");if(!c)throw new Error(".featureOf() requires a name");if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+c+", Feature with geometry required");if(!a.geometry||a.geometry.type!==i)throw new Error("Invalid input to "+c+": must be a "+i+", given "+a.geometry.type)}function He(a,i,c){if(!a)throw new Error("No featureCollection passed");if(!c)throw new Error(".collectionOf() requires a name");if(!a||a.type!=="FeatureCollection")throw new Error("Invalid input to "+c+", FeatureCollection required");for(var f=0,g=a.features;f<g.length;f++){var y=g[f];if(!y||y.type!=="Feature"||!y.geometry)throw new Error("Invalid input to "+c+", Feature with geometry required");if(!y.geometry||y.geometry.type!==i)throw new Error("Invalid input to "+c+": must be a "+i+", given "+y.geometry.type)}}function $e(a){return a.type==="Feature"?a.geometry:a}function Ht(a,i){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}function ie(a,i,c){if(a!==null)for(var f,g,y,x,w,T,P,B=0,U=0,G,mt=a.type,Nt=mt==="FeatureCollection",Qt=mt==="Feature",ye=Nt?a.features.length:1,Fe=0;Fe<ye;Fe++){P=Nt?a.features[Fe].geometry:Qt?a.geometry:a,G=P?P.type==="GeometryCollection":!1,w=G?P.geometries.length:1;for(var ze=0;ze<w;ze++){var Ve=0,tn=0;if(x=G?P.geometries[ze]:P,x!==null){T=x.coordinates;var pn=x.type;switch(B=c&&(pn==="Polygon"||pn==="MultiPolygon")?1:0,pn){case null:break;case"Point":if(i(T,U,Fe,Ve,tn)===!1)return!1;U++,Ve++;break;case"LineString":case"MultiPoint":for(f=0;f<T.length;f++){if(i(T[f],U,Fe,Ve,tn)===!1)return!1;U++,pn==="MultiPoint"&&Ve++}pn==="LineString"&&Ve++;break;case"Polygon":case"MultiLineString":for(f=0;f<T.length;f++){for(g=0;g<T[f].length-B;g++){if(i(T[f][g],U,Fe,Ve,tn)===!1)return!1;U++}pn==="MultiLineString"&&Ve++,pn==="Polygon"&&tn++}pn==="Polygon"&&Ve++;break;case"MultiPolygon":for(f=0;f<T.length;f++){for(tn=0,g=0;g<T[f].length;g++){for(y=0;y<T[f][g].length-B;y++){if(i(T[f][g][y],U,Fe,Ve,tn)===!1)return!1;U++}tn++}Ve++}break;case"GeometryCollection":for(f=0;f<x.geometries.length;f++)if(ie(x.geometries[f],i,c)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function te(a,i,c,f){var g=c;return ie(a,function(y,x,w,T,P){x===0&&c===void 0?g=y:g=i(g,y,x,w,T,P)},f),g}function ve(a,i){var c;switch(a.type){case"FeatureCollection":for(c=0;c<a.features.length&&i(a.features[c].properties,c)!==!1;c++);break;case"Feature":i(a.properties,0);break}}function ut(a,i,c){var f=c;return ve(a,function(g,y){y===0&&c===void 0?f=g:f=i(f,g,y)}),f}function k(a,i){if(a.type==="Feature")i(a,0);else if(a.type==="FeatureCollection")for(var c=0;c<a.features.length&&i(a.features[c],c)!==!1;c++);}function H(a,i,c){var f=c;return k(a,function(g,y){y===0&&c===void 0?f=g:f=i(f,g,y)}),f}function rt(a){var i=[];return ie(a,function(c){i.push(c)}),i}function yt(a,i){var c,f,g,y,x,w,T,P,B,U,G=0,mt=a.type==="FeatureCollection",Nt=a.type==="Feature",Qt=mt?a.features.length:1;for(c=0;c<Qt;c++){for(w=mt?a.features[c].geometry:Nt?a.geometry:a,P=mt?a.features[c].properties:Nt?a.properties:{},B=mt?a.features[c].bbox:Nt?a.bbox:void 0,U=mt?a.features[c].id:Nt?a.id:void 0,T=w?w.type==="GeometryCollection":!1,x=T?w.geometries.length:1,g=0;g<x;g++){if(y=T?w.geometries[g]:w,y===null){if(i(null,G,P,B,U)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(i(y,G,P,B,U)===!1)return!1;break}case"GeometryCollection":{for(f=0;f<y.geometries.length;f++)if(i(y.geometries[f],G,P,B,U)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}G++}}function bt(a,i,c){var f=c;return yt(a,function(g,y,x,w,T){y===0&&c===void 0?f=g:f=i(f,g,y,x,w,T)}),f}function ce(a,i){yt(a,function(c,f,g,y,x){var w=c===null?null:c.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return i(Ct(c,g,{bbox:y,id:x}),f,0)===!1?!1:void 0}var T;switch(w){case"MultiPoint":T="Point";break;case"MultiLineString":T="LineString";break;case"MultiPolygon":T="Polygon";break}for(var P=0;P<c.coordinates.length;P++){var B=c.coordinates[P],U={type:T,coordinates:B};if(i(Ct(U,g),f,P)===!1)return!1}})}function se(a,i,c){var f=c;return ce(a,function(g,y,x){y===0&&x===0&&c===void 0?f=g:f=i(f,g,y,x)}),f}function Ne(a,i){ce(a,function(c,f,g){var y=0;if(c.geometry){var x=c.geometry.type;if(!(x==="Point"||x==="MultiPoint")){var w,T=0,P=0,B=0;if(ie(c,function(U,G,mt,Nt,Qt){if(w===void 0||f>T||Nt>P||Qt>B){w=U,T=f,P=Nt,B=Qt,y=0;return}var ye=lineString([w,U],c.properties);if(i(ye,f,g,Qt,y)===!1)return!1;y++,w=U})===!1)return!1}}})}function Pe(a,i,c){var f=c,g=!1;return Ne(a,function(y,x,w,T,P){g===!1&&c===void 0?f=y:f=i(f,y,x,w,T,P),g=!0}),f}function rn(a,i){if(!a)throw new Error("geojson is required");ce(a,function(c,f,g){if(c.geometry!==null){var y=c.geometry.type,x=c.geometry.coordinates;switch(y){case"LineString":if(i(c,f,g,0,0)===!1)return!1;break;case"Polygon":for(var w=0;w<x.length;w++)if(i(lineString(x[w],c.properties),f,g,w)===!1)return!1;break}}})}function Oe(a,i,c){var f=c;return rn(a,function(g,y,x,w){y===0&&c===void 0?f=g:f=i(f,g,y,x,w)}),f}function qe(a,i){if(i=i||{},!isObject(i))throw new Error("options is invalid");var c=i.featureIndex||0,f=i.multiFeatureIndex||0,g=i.geometryIndex||0,y=i.segmentIndex||0,x=i.properties,w;switch(a.type){case"FeatureCollection":c<0&&(c=a.features.length+c),x=x||a.features[c].properties,w=a.features[c].geometry;break;case"Feature":x=x||a.properties,w=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":w=a;break;default:throw new Error("geojson is invalid")}if(w===null)return null;var T=w.coordinates;switch(w.type){case"Point":case"MultiPoint":return null;case"LineString":return y<0&&(y=T.length+y-1),lineString([T[y],T[y+1]],x,i);case"Polygon":return g<0&&(g=T.length+g),y<0&&(y=T[g].length+y-1),lineString([T[g][y],T[g][y+1]],x,i);case"MultiLineString":return f<0&&(f=T.length+f),y<0&&(y=T[f].length+y-1),lineString([T[f][y],T[f][y+1]],x,i);case"MultiPolygon":return f<0&&(f=T.length+f),g<0&&(g=T[f].length+g),y<0&&(y=T[f][g].length-y-1),lineString([T[f][g][y],T[f][g][y+1]],x,i)}throw new Error("geojson is invalid")}function fn(a,i){if(i=i||{},!isObject(i))throw new Error("options is invalid");var c=i.featureIndex||0,f=i.multiFeatureIndex||0,g=i.geometryIndex||0,y=i.coordIndex||0,x=i.properties,w;switch(a.type){case"FeatureCollection":c<0&&(c=a.features.length+c),x=x||a.features[c].properties,w=a.features[c].geometry;break;case"Feature":x=x||a.properties,w=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":w=a;break;default:throw new Error("geojson is invalid")}if(w===null)return null;var T=w.coordinates;switch(w.type){case"Point":return point(T,x,i);case"MultiPoint":return f<0&&(f=T.length+f),point(T[f],x,i);case"LineString":return y<0&&(y=T.length+y),point(T[y],x,i);case"Polygon":return g<0&&(g=T.length+g),y<0&&(y=T[g].length+y),point(T[g][y],x,i);case"MultiLineString":return f<0&&(f=T.length+f),y<0&&(y=T[f].length+y),point(T[f][y],x,i);case"MultiPolygon":return f<0&&(f=T.length+f),g<0&&(g=T[f].length+g),y<0&&(y=T[f][g].length-y),point(T[f][g][y],x,i)}throw new Error("geojson is invalid")}var gn={REGISTERED_PROTOCOLS:{}},dn=Object.defineProperty,bn=Object.defineProperties,Un=Object.getOwnPropertyDescriptors,Kn=Object.getOwnPropertySymbols,gr=Object.prototype.hasOwnProperty,xr=Object.prototype.propertyIsEnumerable,ni=(a,i,c)=>i in a?dn(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,Vr=(a,i)=>{for(var c in i||(i={}))gr.call(i,c)&&ni(a,c,i[c]);if(Kn)for(var c of Kn(i))xr.call(i,c)&&ni(a,c,i[c]);return a},zr=(a,i)=>bn(a,Un(i)),Ar=a=>gn.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))],ui=class extends Error{constructor(a,i,c,f){super(`AJAXError: ${i} (${a}): ${c}`),this.status=a,this.statusText=i,this.url=c,this.body=f}};function Vi(a,i){const c=new XMLHttpRequest,f=Array.isArray(a.url)?a.url[0]:a.url;c.open(a.method||"GET",f,!0),a.type==="arrayBuffer"&&(c.responseType="arraybuffer");for(const g in a.headers)a.headers.hasOwnProperty(g)&&c.setRequestHeader(g,a.headers[g]);return a.type==="json"&&(c.responseType="text",c.setRequestHeader("Accept","application/json")),c.withCredentials=a.credentials==="include",c.onerror=()=>{i(new Error(c.statusText))},c.onload=()=>{if((c.status>=200&&c.status<300||c.status===0)&&c.response!==null){let g=c.response;if(a.type==="json")try{g=JSON.parse(c.response)}catch(y){return i(y)}i(null,g,c.getResponseHeader("Cache-Control"),c.getResponseHeader("Expires"),c)}else{const g=new Blob([c.response],{type:c.getResponseHeader("Content-Type")});i(new ui(c.status,c.statusText,f.toString(),g))}},c.cancel=c.abort,c.send(a.body),c}function Bi(a){return new Promise((i,c)=>{Vi(a,(f,g,y,x,w)=>{f?c({err:f,data:null,xhr:w}):i({err:null,data:g,cacheControl:y,expires:x,xhr:w})})})}function _i(a,i){return Vi(a,i)}var no=(a,i)=>(Ar(a.url)||_i)(zr(Vr({},a),{type:"json"}),i),ro=(a,i)=>(Ar(a.url)||_i)(zr(Vr({},a),{type:"arrayBuffer"}),i),Za=(a,i)=>_i(zr(Vr({},a),{method:"POST"}),i),Mo=(a,i)=>_i(zr(Vr({},a),{method:"GET"}),i);function Ea(a){const i=window.document.createElement("a");return i.href=a,i.protocol===window.document.location.protocol&&i.host===window.document.location.host}var ri="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function xi(a,i){const c=new window.Image,f=window.URL||window.webkitURL;c.crossOrigin="anonymous",c.onload=()=>{i(null,c),f.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=ri})},c.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(a)],{type:"image/png"});c.src=a.byteLength?f.createObjectURL(g):ri}function at(a,i){const c=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(c).then(f=>{i(null,f)}).catch(f=>{i(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}var ht=(a,i,c)=>{const f=(g,y)=>{if(g)i(g);else if(y){const x=typeof createImageBitmap=="function",w=c?c(y):y;x?at(w,i):xi(w,i)}};return a.type==="json"?no(a,f):ro(a,f)},Wt=(a,i)=>{typeof createImageBitmap=="function"?at(a,i):xi(a,i)},ae=(a=>(a.CENTER="center",a.TOP="top",a["TOP-LEFT"]="top-left",a["TOP-RIGHT"]="top-right",a.BOTTOM="bottom",a["BOTTOM-LEFT"]="bottom-left",a["BOTTOM-RIGHT"]="bottom-right",a.LEFT="left",a.RIGHT="right",a))(ae||{}),Ae={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function De(a,i,c){const f=a.classList;for(const g in Ae)Ae.hasOwnProperty(g)&&f.remove(`l7-${c}-anchor-${g}`);f.add(`l7-${c}-anchor-${i}`)}function ge(a,i,c){a.prototype=i.prototype=c,c.constructor=a}function me(a,i){var c=Object.create(a.prototype);for(var f in i)c[f]=i[f];return c}function Ze(){}var We=.7,vn=1/We,xn="\\s*([+-]?\\d+)\\s*",In="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_n=/^#([0-9a-f]{3,8})$/,On=new RegExp("^rgb\\("+[xn,xn,xn]+"\\)$"),hn=new RegExp("^rgb\\("+[mn,mn,mn]+"\\)$"),Hn=new RegExp("^rgba\\("+[xn,xn,xn,In]+"\\)$"),Rn=new RegExp("^rgba\\("+[mn,mn,mn,In]+"\\)$"),Vn=new RegExp("^hsl\\("+[In,mn,mn]+"\\)$"),Ln=new RegExp("^hsla\\("+[In,mn,mn,In]+"\\)$"),Bn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ge(Ze,Wr,{copy:function(a){return Object.assign(new this.constructor,this,a)},displayable:function(){return this.rgb().displayable()},hex:nr,formatHex:nr,formatHsl:ji,formatRgb:Pi,toString:Pi});function nr(){return this.rgb().formatHex()}function ji(){return Gr(this).formatHsl()}function Pi(){return this.rgb().formatRgb()}function Wr(a){var i,c;return a=(a+"").trim().toLowerCase(),(i=_n.exec(a))?(c=i[1].length,i=parseInt(i[1],16),c===6?Wi(i):c===3?new xe(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):c===8?Gi(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):c===4?Gi(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=On.exec(a))?new xe(i[1],i[2],i[3],1):(i=hn.exec(a))?new xe(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=Hn.exec(a))?Gi(i[1],i[2],i[3],i[4]):(i=Rn.exec(a))?Gi(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=Vn.exec(a))?Wn(i[1],i[2]/100,i[3]/100,1):(i=Ln.exec(a))?Wn(i[1],i[2]/100,i[3]/100,i[4]):Bn.hasOwnProperty(a)?Wi(Bn[a]):a==="transparent"?new xe(NaN,NaN,NaN,0):null}function Wi(a){return new xe(a>>16&255,a>>8&255,a&255,1)}function Gi(a,i,c,f){return f<=0&&(a=i=c=NaN),new xe(a,i,c,f)}function Et(a){return a instanceof Ze||(a=Wr(a)),a?(a=a.rgb(),new xe(a.r,a.g,a.b,a.opacity)):new xe}function Bt(a,i,c,f){return arguments.length===1?Et(a):new xe(a,i,c,f==null?1:f)}function xe(a,i,c,f){this.r=+a,this.g=+i,this.b=+c,this.opacity=+f}ge(xe,Bt,me(Ze,{brighter:function(a){return a=a==null?vn:Math.pow(vn,a),new xe(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=a==null?We:Math.pow(We,a),new xe(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ke,formatHex:Ke,formatRgb:yn,toString:yn}));function Ke(){return"#"+Cn(this.r)+Cn(this.g)+Cn(this.b)}function yn(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(a===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(a===1?")":", "+a+")")}function Cn(a){return a=Math.max(0,Math.min(255,Math.round(a)||0)),(a<16?"0":"")+a.toString(16)}function Wn(a,i,c,f){return f<=0?a=i=c=NaN:c<=0||c>=1?a=i=NaN:i<=0&&(a=NaN),new Tr(a,i,c,f)}function Gr(a){if(a instanceof Tr)return new Tr(a.h,a.s,a.l,a.opacity);if(a instanceof Ze||(a=Wr(a)),!a)return new Tr;if(a instanceof Tr)return a;a=a.rgb();var i=a.r/255,c=a.g/255,f=a.b/255,g=Math.min(i,c,f),y=Math.max(i,c,f),x=NaN,w=y-g,T=(y+g)/2;return w?(i===y?x=(c-f)/w+(c<f)*6:c===y?x=(f-i)/w+2:x=(i-c)/w+4,w/=T<.5?y+g:2-y-g,x*=60):w=T>0&&T<1?0:x,new Tr(x,w,T,a.opacity)}function ii(a,i,c,f){return arguments.length===1?Gr(a):new Tr(a,i,c,f==null?1:f)}function Tr(a,i,c,f){this.h=+a,this.s=+i,this.l=+c,this.opacity=+f}ge(Tr,ii,me(Ze,{brighter:function(a){return a=a==null?vn:Math.pow(vn,a),new Tr(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=a==null?We:Math.pow(We,a),new Tr(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+(this.h<0)*360,i=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,f=c+(c<.5?c:1-c)*i,g=2*c-f;return new xe(pi(a>=240?a-240:a+120,g,f),pi(a,g,f),pi(a<120?a+240:a-120,g,f),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(a===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(a===1?")":", "+a+")")}}));function pi(a,i,c){return(a<60?i+(c-i)*a/60:a<180?c:a<240?i+(c-i)*(240-a)/60:i)*255}function PP(a){return typeof a=="string"?!!d3.color(a):!1}function Ur(a){const i=Wr(a),c=[0,0,0,0];return i!=null&&(c[0]=i.r/255,c[1]=i.g/255,c[2]=i.b/255,c[3]=i.opacity),c}function uc(a){const i=a&&a[0],c=a&&a[1],f=a&&a[2];return i+c*256+f*65536-1}function ul(a){return[a+1&255,a+1>>8&255,a+1>>8>>8&255]}function iO(a){let i=window.document.createElement("canvas"),c=i.getContext("2d");i.width=256,i.height=1;let f=null;const g=c.createLinearGradient(0,0,256,1),y=a.positions[0],x=a.positions[a.positions.length-1];for(let w=0;w<a.colors.length;++w){const T=(a.positions[w]-y)/(x-y);g.addColorStop(T,a.colors[w])}return c.fillStyle=g,c.fillRect(0,0,256,1),f=new Uint8ClampedArray(c.getImageData(0,0,256,1).data),i=null,c=null,{data:f,width:256,height:1}}function oy(a,i){let c=window.document.createElement("canvas"),f=c.getContext("2d");c.width=256,c.height=1;const g=f.createLinearGradient(0,0,256,1),y=i[1]-i[0];for(let T=0;T<a.colors.length;++T){const P=Math.max((a.positions[T]-i[0])/y,0);g.addColorStop(P,a.colors[T])}f.fillStyle=g,f.fillRect(0,0,256,1);const x=f.getImageData(0,0,256,1).data,w=Mp(f,x);return c=null,f=null,w}function oO(a){let i=window.document.createElement("canvas"),c=i.getContext("2d");i.width=256,i.height=1;const f=c.createImageData(256,1);return f.data.fill(0),a.positions.forEach((g,y)=>{const x=Ur(a.colors[y]);f.data[g*4+0]=x[0]*255,f.data[g*4+1]=x[1]*255,f.data[g*4+2]=x[2]*255,f.data[g*4+3]=x[3]*255}),i=null,c=null,f}function aO(a){let i=window.document.createElement("canvas"),c=i.getContext("2d");c.globalAlpha=1,i.width=256,i.height=1;const f=256/a.colors.length;for(let x=0;x<a.colors.length;x++)c.beginPath(),c.lineWidth=2,c.strokeStyle=a.colors[x],c.moveTo(x*f,0),c.lineTo((x+1)*f,0),c.stroke();const g=c.getImageData(0,0,256,1).data,y=Mp(c,g);return i=null,c=null,y}function ay(a,i){let c=window.document.createElement("canvas"),f=c.getContext("2d");f.globalAlpha=1,c.width=256,c.height=1;const g=i[1]-i[0];a.positions.length-a.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(let w=0;w<a.colors.length;w++)f.beginPath(),f.lineWidth=2,f.strokeStyle=a.colors[w],f.moveTo((a.positions[w]-i[0])/g*255,0),f.lineTo((a.positions[w+1]-i[0])/g*255,0),f.stroke();const y=f.getImageData(0,0,256,1).data,x=Mp(f,y);return c=null,f=null,x}function Mp(a,i){const c=a.createImageData(256,1);for(let f=0;f<c.data.length;f+=4)c.data[f+0]=i[f+0],c.data[f+1]=i[f+1],c.data[f+2]=i[f+2],c.data[f+3]=i[f+3];return c}function fd(a){switch(a==null?void 0:a.type){case"cat":return[0,255];default:return[0,1]}}var sO=D(74691),cO=D.n(sO),sy=D(50361),lO=D.n(sy),uO=D(23279),fO=D.n(uO),dO=D(27361),hO=D.n(dO),pO=D(51584),cy=D.n(pO),gO=D(18446),vO=D.n(gO),Lp=D(14293),ly=D.n(Lp),dd=D(81763),uy=D.n(dd),fy=D(68630),Pp=D.n(fy),dy=D(47037),Ip=D.n(dy),hy=D(36719),kp=D.n(hy),py=D(82492),Rp=D.n(py),gy=D(30236),Dp=D.n(gy),vy=D(97019),yy=D.n(vy),by=D(23493),_y=D.n(by),xy=D(44908),Sy=D.n(xy),Np=D(11700),Oy=D.n(Np),Ey=D(23560),wy=D.n(Ey),Ay=D(13218),Ty=D.n(Ay),Cy=D(52353),fl=D.n(Cy),mO=D(68929),yO=D.n(mO),IP=D(73955),My=D.n(IP),oi={isNil:ly(),merge:Rp(),throttle:_y(),isString:Ip(),debounce:fO(),pull:yy(),isTypedArray:kp(),isPlainObject:Pp(),isNumber:uy(),isBoolean:cy(),isEqual:vO(),cloneDeep:lO(),uniq:Sy(),clamp:cO(),upperFirst:Oy(),get:hO(),mergeWith:Dp(),isFunction:wy(),isObject:Ty(),isUndefined:fl(),camelCase:yO(),uniqueId:My()},{pull:hr}=oi;function bO(a){let i=a;return typeof a=="string"&&(i=window.document.getElementById(a)),i}function Ly(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Py(a){return Ly(a).split(/\s+/)}function _O(a){var i;const c=(i=document==null?void 0:document.documentElement)==null?void 0:i.style;if(!c)return a[0];for(const f in a)if(a[f]&&a[f]in c)return a[f];return a[0]}function $i(a,i,c){const f=window.document.createElement(a);return i&&(f.className=i||""),c&&c.appendChild(f),f}function Ha(a){const i=a.parentNode;i&&i.removeChild(a)}function Va(a,i){if(a.classList!==void 0){const c=Py(i);for(let f=0,g=c.length;f<g;f++)a.classList.add(c[f])}else if(!Iy(a,i)){const c=Os(a);fa(a,(c?c+" ":"")+i)}}function dl(a,i){a.classList!==void 0?Py(i).forEach(f=>{a.classList.remove(f)}):fa(a,Ly((" "+Os(a)+" ").replace(" "+i+" "," ")))}function Iy(a,i){if(a.classList!==void 0)return a.classList.contains(i);const c=Os(a);return c.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(c)}function fa(a,i){a instanceof HTMLElement?a.className=i:a.className.baseVal=i}function hd(a,i,c){c===void 0?Iy(a,i)?dl(a,i):Va(a,i):c?Va(a,i):dl(a,i)}function Os(a){return a instanceof SVGElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function kP(a){for(;a&&a.firstChild;)a.removeChild(a.firstChild)}var So=_O(["transform","WebkitTransform"]);function xO(a,i){a.style[So]=i}function RP(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{const a=window.document.createEvent("UIEvents");a.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(a)}}function DP(a){const i=["padding: "+(a.height/2-8)+"px "+a.width/2+"px;","line-height: "+a.height+"px;","background-image: url("+a.toDataURL()+");"];console.log(`%c
`,i.join(""))}function SO(){var a;const i=window.document.querySelector('meta[name="viewport"]');if(!i)return 1;const f=((a=i.content)==null?void 0:a.split(",")).find(g=>{const[y]=g.split("=");return y==="initial-scale"});return f?f.split("=")[1]*1:1}var vo=SO()<1?1:window.devicePixelRatio;function ky(a,i){a.setAttribute("style",`${a.style.cssText}${i}`)}function Au(a){return a.split(";").map(i=>i.trim()).filter(i=>i)}function NP(a,i){var c;const f=Au((c=a.getAttribute("style"))!=null?c:""),g=Au(i),y=hr(f,...g);a.setAttribute("style",y.join(";"))}function fc(a){return Object.entries(a).map(([i,c])=>`${i}: ${c}`).join(";")}function OO(a,i){return{left:a.left-i.left,top:a.top-i.top,right:i.left+i.width-a.left-a.width,bottom:i.top+i.height-a.top-a.height}}function Fp(a,i){a.checked=i,i?a.setAttribute("checked","true"):a.removeAttribute("checked")}function wa(a){a.innerHTML=""}function Ry(a){a.setAttribute("draggable","false")}function Dy(a,i){if(typeof i=="string"){const c=document.createElement("div");for(c.innerHTML=i;c.firstChild;)a.append(c.firstChild)}else Array.isArray(i)?a.append(...i):a.append(i)}function Bp(a,i){var c;const f=Array.isArray(i)?i:[i];let g=a;for(;g instanceof Element&&g!==window.document.body;){if(f.find(y=>g==null?void 0:g.matches(y)))return g;g=(c=g==null?void 0:g.parentElement)!=null?c:null}}function EO(a){return typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap}function Ny(){return typeof importScripts=="function"}var wO=Ny()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,pd=navigator==null?void 0:navigator.userAgent,FP=!!pd.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),BP=pd.indexOf("Android")>-1||pd.indexOf("Adr")>-1;function jP(){const a=pd,i=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let c=!0;for(const f of i)if(a.indexOf(f)>0){c=!1;break}return c}function zP(a,i){a.forEach(c=>{i[c]&&(i[c]=i[c].bind(i))})}var UP=class{constructor(a=16){this.duration=16,this.timestamp=new Date().getTime(),this.duration=a}run(a){const i=new Date().getTime(),c=i-this.timestamp;this.timestamp=i,c>=this.duration&&a()}};function jp(a){var i=[1/0,1/0,-1/0,-1/0];return ie(a,function(c){i[0]>c[0]&&(i[0]=c[0]),i[1]>c[1]&&(i[1]=c[1]),i[2]<c[0]&&(i[2]=c[0]),i[3]<c[1]&&(i[3]=c[1])}),i}jp.default=jp;var AO=jp;function zp(a){return typeof a=="number"}function Ii(a){return a-Math.fround(a)}var Lo=2*Math.PI*6378137/2;function TO(a,i){const[c,f,g,y]=i;return a.lng>c&&a.lng<=g&&a.lat>f&&a.lat<=y}function CO(a){const i=[1/0,1/0,-1/0,-1/0];return a.forEach(c=>{const{coordinates:f}=c;Fy(i,f)}),i}function Fy(a,i){return Array.isArray(i[0])?i.forEach(c=>{Fy(a,c)}):(a[0]>i[0]&&(a[0]=i[0]),a[1]>i[1]&&(a[1]=i[1]),a[2]<i[0]&&(a[2]=i[0]),a[3]<i[1]&&(a[3]=i[1])),a}function By(a,i){return gd(a,i)}function gd(a,i){return Array.isArray(a[0])?a.map(c=>gd(c,i)):i(a)}function hl(a,i=!0,c={enable:!0,decimal:1}){a=jy(a,i);const f=a[0],g=a[1];let y=f*Lo/180,x=Math.log(Math.tan((90+g)*Math.PI/360))/(Math.PI/180);return x=x*Lo/180,c.enable&&(y=Number(y.toFixed(c.decimal)),x=Number(x.toFixed(c.decimal))),a.length===3?[y,x,a[2]]:[y,x]}function Ho(a,i=6){const c=a[0],f=a[1];let g=c/Lo*180,y=f/Lo*180;return y=180/Math.PI*(2*Math.atan(Math.exp(y*Math.PI/180))-Math.PI/2),i!=null&&(g=Number(g.toFixed(i)),y=Number(y.toFixed(i))),a.length===3?[g,y,a[2]]:[g,y]}function Up(a){if(a==null)throw new Error("lng is required");return(a>180||a<-180)&&(a=a%360,a>180&&(a=-360+a),a<-180&&(a=360+a),a===0&&(a=0)),a}function vd(a){if(a==null)throw new Error("lat is required");return(a>90||a<-90)&&(a=a%180,a>90&&(a=-180+a),a<-90&&(a=180+a),a===0&&(a=0)),a}function jy(a,i){if(i===!1)return a;const c=Up(a[0]);let f=vd(a[1]);return f>85&&(f=85),f<-85&&(f=-85),a.length===3?[c,f,a[2]]:[c,f]}function Vo(a){const i=85.0511287798,c=Math.max(Math.min(i,a[1]),-i),f=256<<20;let g=Math.PI/180,y=a[0]*g,x=c*g;x=Math.log(Math.tan(Math.PI/4+x/2));const w=.5/Math.PI,T=.5,P=-.5/Math.PI;return g=.5,y=f*(w*y+T),x=f*(P*x+g),[Math.floor(y),Math.floor(x)]}function ki(a){const i=.5/Math.PI,c=.5,f=-.5/Math.PI;let g=.5;const y=256<<20;let[x,w]=a;x=(x/y-c)/i,w=(w/y-g)/f,w=(Math.atan(Math.pow(Math.E,w))-Math.PI/4)*2,g=Math.PI/180;const T=w/g;return[x/g,T]}function MO(a,i){const c=85.0511287798,f=Math.PI/180,g=6378137;return i=Math.max(Math.min(c,i),-c),a*=f,i*=f,i=Math.log(Math.tan(Math.PI/4+i/2)),[a*g,i*g]}function Zp(a,i){const c=Math.PI/180,f=6378137,g=a/f/c,y=2*(Math.atan(Math.exp(i/f))-Math.PI/4)/c;return[g,y]}function Hp(a,i,c){const f=degreesToRadians(i[1]-a[1]),g=degreesToRadians(i[0]-a[0]),y=degreesToRadians(a[1]),x=degreesToRadians(i[1]),w=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(g/2),2)*Math.cos(y)*Math.cos(x);return radiansToLength(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)),c="meters")}function Vp(a){const i=Math.PI/180,c=85.0511287798,f=6378137,g=Math.max(Math.min(c,a[1]),-c),y=Math.sin(g*i),x=f*a[0]*i,w=f*Math.log((1+y)/(1-y))/2;return[x,w]}function md(a,i){const c=Math.abs(a[1][1]-a[0][1])*i,f=Math.abs(a[1][0]-a[0][0])*i;return[[a[0][0]-f,a[0][1]-c],[a[1][0]+f,a[1][1]+c]]}function Ai(a,i){return a[0][0]<=i[0][0]&&a[0][1]<=i[0][1]&&a[1][0]>=i[1][0]&&a[1][1]>=i[1][1]}function Tu(a){return[[a[0],a[1]],[a[2],a[3]]]}function gi(a){const i=zy(a,[0,0]);return[a[0]/i,a[1]/i]}function zy(a,i){return Math.sqrt(Math.pow(a[0]-i[0],2)+Math.pow(a[1]-i[1],2))}function Wp(a,i){return a[0]*i[0]+a[1]*i[1]}function Cu(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function LO(a,i){return Math.acos(Wp(a,i)/(Cu(a)*Cu(i)))*180/Math.PI}function Gp(a,i){return i[0]>0?i[1]>0?90-Math.atan(i[1]/i[0])*180/Math.PI:90+Math.atan(-i[1]/i[0])*180/Math.PI:i[1]<0?180+(90-Math.atan(i[1]/i[0])*180/Math.PI):270+Math.atan(i[1]/-i[0])*180/Math.PI}function ZP(a,i=100){if(!a||a.length<2)return;const c=[0,1];let f=0;const g=[];for(let y=0;y<a.length-1;y++){const x=a[y],w=a[y+1],T=zy(x,w);f+=T;const P=[x[0]-w[0],x[1]-w[1]];let B=Gp(c,P);if(y>0){const U=g[y-1].rotation;U-B>360-U+B&&(B=B+360)}g.push({start:x,end:w,dis:T,rotation:B,duration:0})}return g.map(y=>{y.duration=i*(y.dis/f)}),g}function dc(a){if(zp(a[0]))return a;if(zp(a[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(zp(a[0][0][0])){const i=a;let c=0,f=0,g=0;return i.forEach(y=>{y.forEach(x=>{c+=x[0],f+=x[1],g++})}),[c/g,f/g,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function PO(a){let i=a[0],c=a[1],f=a[0],g=a[1],y=0,x=0,w=0;for(let T=0;T<a.length;T+=2){const P=a[T],B=a[T+1];P&&B&&(i=Math.max(P,i),c=Math.max(B,c),f=Math.min(P,f),g=Math.min(B,g),y+=P,x+=B,w++)}return{center:[y/w,x/w],radius:Math.sqrt(Math.pow(i-f,2)+Math.pow(c-g,2))/2}}function IO(a){return AO(je([pe(a)]))}function HP(a){let f=0;a+="x";const g=Math.floor(9007199254740991/137);for(let y=0;y<a.length;y++)f>g&&(f=Math.floor(f/137)),f=f*131+a.charCodeAt(y);return f}function kO(a){a=a.toString();let i=5381,c=a.length;for(;c;)i=i*33^a.charCodeAt(--c);return i>>>0}function RO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const i=Math.random()*16|0;return(a==="x"?i:i&3|8).toString(16)})}function VP(a,i,c,f,g=30,y){let x=c;return y&&(x=Math.round(c*(g-1))/(g-1)),f?Uy(a,i,x,f):Uy(a,i,x,.314)}function $p(a,i){const c=1-i;return(a[0]*c+a[1]*i)*c+(a[1]*c+a[2]*i)*i}function DO(a,i){return Math.sqrt(Math.pow(a[0]-i[0],2)+Math.pow(a[1]-i[1],2))}function NO(a,i,c){const f=[i[0]-a[0],i[1]-a[1]],g=DO(f,[0,0]),y=Math.atan2(f[1],f[0]),x=g/2/Math.cos(c),w=y+c;return[x*Math.cos(w)+a[0],x*Math.sin(w)+a[1]]}function Uy(a,i,c,f){const g=NO(a,i,f),y=[a[0],g[0],i[0]],x=[a[1],g[1],i[1]];return[$p(y,c),$p(x,c),0]}function FO(a,i,c,f,g=30,y){let x=c;return y&&(x=Math.round(c*29)/29),Zy(a,i,x)}function BO(a,i){const c=[a[0]-i[0],a[1]-i[1]],f=[Math.sin(c[0]/2),Math.sin(c[1]/2)],g=f[1]*f[1]+Math.cos(a[1])*Math.cos(i[1])*f[0]*f[0];return 2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))}function Zy(a,i,c){const f=[degreesToRadians(a[0]),degreesToRadians(a[1])],g=[degreesToRadians(i[0]),degreesToRadians(i[1])],y=BO(f,g);if(Math.abs(y-Math.PI)<.001)return[(1-c)*f[0]+c*g[0],(1-c)*f[1]+c*g[1]];const x=Math.sin((1-c)*y)/Math.sin(y),w=Math.sin(c*y)/Math.sin(y),T=[Math.sin(f[0]),Math.sin(f[1])],P=[Math.cos(f[0]),Math.cos(f[1])],B=[Math.sin(g[0]),Math.sin(g[1])],U=[Math.cos(g[0]),Math.cos(g[1])],G=x*P[1]*P[0]+w*U[1]*U[0],mt=x*P[1]*T[0]+w*U[1]*B[0],Nt=x*T[1]+w*B[1];return[radiansToDegrees(Math.atan2(mt,G)),radiansToDegrees(Math.atan2(Nt,Math.sqrt(G*G+mt*mt)))]}function jO(a,i){let c=0;const f=[];for(let w=0;w<a.length-1;w++){const T=a[w],P=a[w+1],B=Hy(T,P),U=c;c+=B,f.push({p1:T,p2:P,totalDistance:c,distance:B,lastTotalDistance:U})}const g=c*i;let y,x;for(const w of f)if(w.totalDistance>g){const P=w.p1,B=w.p2,U=(g-w.lastTotalDistance)/w.distance,G=zO(B,P,U);y=G[0],x=G[1];break}return{lng:y,lat:x,height:0}}function zO(a,i,c){return[a[0]*c+i[0]*(1-c),a[1]*c+i[1]*(1-c)]}function Hy(a,i){return Math.sqrt(Math.pow(a[0]-i[0],2)+Math.pow(a[1]-i[1],2))}var Qn=Object.defineProperty,Vy=Object.getOwnPropertySymbols,WP=Object.prototype.hasOwnProperty,Yp=Object.prototype.propertyIsEnumerable,Xp=(a,i,c)=>i in a?Qn(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,qp=(a,i)=>{for(var c in i||(i={}))WP.call(i,c)&&Xp(a,c,i[c]);if(Vy)for(var c of Vy(i))Yp.call(i,c)&&Xp(a,c,i[c]);return a};function Kp(a,i){const{featureId:c}=i;let f=a.data.dataArray;return typeof c=="number"&&(f=f.filter(({id:g})=>g===c)),f.map(g=>{const y=$r(g,i);return qp(qp({},g),y)})}function yd(a,i){return new Promise(c=>{a.inited?c(Kp(a,i)):a.once("update",()=>{c(Kp(a,i))})})}function $r(a,i){const{offset:c,shape:f,thetaOffset:g,segmentNumber:y=30,autoFit:x=!0}=i,{coordinates:w}=a;if(f==="line")return pathLineAtOffset(w,c);const T=w[0],P=w[1],B=typeof g=="string"?a[g]||0:g;let U;switch(f){case"arc":U=arcLineAtOffset;break;case"greatcircle":U=greatCircleLineAtOffset;break;default:U=arcLineAtOffset}const[G,mt,Nt]=U(T,P,c,B,y,x);return{lng:G,lat:mt,height:Nt}}var bd=class{constructor(a=50,i){this.limit=a,this.destroy=i||this.defaultDestroy,this.order=[],this.clear()}clear(){this.order.forEach(a=>{this.delete(a)}),this.cache={},this.order=[]}get(a){const i=this.cache[a];return i&&(this.deleteOrder(a),this.appendOrder(a)),i}set(a,i){this.cache[a]?(this.delete(a),this.cache[a]=i,this.appendOrder(a)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[a]=i,this.appendOrder(a))}delete(a){const i=this.cache[a];i&&(this.deleteCache(a),this.deleteOrder(a),this.destroy(i,a))}deleteCache(a){delete this.cache[a]}deleteOrder(a){const i=this.order.findIndex(c=>c===a);i>=0&&this.order.splice(i,1)}appendOrder(a){this.order.push(a)}defaultDestroy(a,i){return null}};function Wy(a){if(a.length===0)throw new Error("max requires at least one data point");let i=a[0];for(let c=1;c<a.length;c++)a[c]>i&&(i=a[c]);return i*1}function GP(a){if(a.length===0)throw new Error("min requires at least one data point");let i=a[0];for(let c=1;c<a.length;c++)a[c]<i&&(i=a[c]);return i*1}function UO(a){if(a.length===0)return 0;let i=a[0]*1;for(let c=1;c<a.length;c++)i+=a[c]*1;return i}function Qp(a){if(a.length===0)throw new Error("mean requires at least one data point");return UO(a)/a.length}function _d(a){if(a.length===0)throw new Error("mean requires at least one data point");if(a.length<3)return a[0];a.sort();let i=a[0],c=NaN,f=0,g=1;for(let y=1;y<a.length+1;y++)a[y]!==i?(g>f&&(f=g,c=i),g=1,i=a[y]):g++;return c*1}var Gy={min:GP,max:Wy,mean:Qp,sum:UO,mode:_d};function ZO(a,i){return a.map(c=>c[i])}function HO(a,i){return Gy[a](i)}function pl(a,i){i===void 0&&(i={});var c=Number(a[0]),f=Number(a[1]),g=Number(a[2]),y=Number(a[3]);if(a.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var x=[c,f],w=[c,y],T=[g,y],P=[g,f];return Jt([[x,P,T,w,x]],i.properties,{bbox:a,id:i.id})}var Sr=D(26729),Jp=D.n(Sr),hc=(a=>(a.Realtime="realtime",a.Overlap="overlap",a.Replace="replace",a))(hc||{}),Wo=(a=>(a.Loading="Loading",a.Loaded="Loaded",a.Failure="Failure",a.Cancelled="Cancelled",a))(Wo||{}),$y=0,Aa=1,xd=2;function VO(a){a.forEach(i=>{i.isCurrent&&(i.isVisible=i.isLoaded)})}function Yy(a){a.forEach(i=>{i.properties.state=$y}),a.forEach(i=>{i.isCurrent&&!Je(i)&&Sd(i)}),a.forEach(i=>{i.isVisible=!!(i.properties.state&xd)})}function WO(a){a.forEach(c=>{c.properties.state=$y}),a.forEach(c=>{c.isCurrent&&Je(c)}),a.slice().sort((c,f)=>c.z-f.z).forEach(c=>{c.isVisible=!!(c.properties.state&xd),c.children.length&&(c.isVisible||c.properties.state&Aa)?c.children.forEach(f=>{f.properties.state=Aa}):c.isCurrent&&Sd(c)})}function Je(a){for(;a;){if(a.isLoaded)return a.properties.state|=xd,!0;a=a.parent}return!1}function Sd(a){a.children.forEach(i=>{i.isLoaded?i.properties.state|=xd:Sd(i)})}var $P=256,t0=[-1/0,-1/0,1/0,1/0],Xy=.2,GO=5,$O={[hc.Realtime]:VO,[hc.Overlap]:Yy,[hc.Replace]:WO},YO=()=>{};function Od(a,i,c){const f=Math.floor((a+180)/360*Math.pow(2,c)),g=Math.floor((1-Math.log(Math.tan(i*Math.PI/180)+1/Math.cos(i*Math.PI/180))/Math.PI)/2*Math.pow(2,c));return[f,g]}function gl(a,i,c){const f=a/Math.pow(2,c)*360-180,g=Math.PI-2*Math.PI*i/Math.pow(2,c),y=180/Math.PI*Math.atan(.5*(Math.exp(g)-Math.exp(-g)));return[f,y]}var Mu=(a,i,c)=>{const[f,g]=gl(a,i,c),[y,x]=gl(a+1,i+1,c);return[f,x,y,g]};function qy({zoom:a,latLonBounds:i,maxZoom:c=1/0,minZoom:f=0,zoomOffset:g=0,extent:y=t0}){let x=Math.ceil(a)+g;if(Number.isFinite(f)&&x<f)return[];Number.isFinite(c)&&x>c&&(x=c);const[w,T,P,B]=i,U=[Math.max(w,y[0]),Math.max(T,y[1]),Math.min(P,y[2]),Math.min(B,y[3])],G=[],[mt,Nt]=Od(U[0],U[1],x),[Qt,ye]=Od(U[2],U[3],x);for(let tn=mt;tn<=Qt;tn++)for(let pn=ye;pn<=Nt;pn++)G.push({x:tn,y:pn,z:x});const Fe=(Qt+mt)/2,ze=(Nt+ye)/2,Ve=(tn,pn)=>Math.abs(tn-Fe)+Math.abs(pn-ze);return G.sort((tn,pn)=>Ve(tn.x,tn.y)-Ve(pn.x,pn.y)),G}var Ky=(a,i,c,f=!0)=>{const g=Math.pow(2,c),y=g-1,x=g;let w=a;const T=i;return f&&(w<0?w=w+x:w>y&&(w=w%x)),{warpX:w,warpY:T}},Qy=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),Ed=class extends Sr.EventEmitter{constructor(a){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;const{x:i,y:c,z:f,tileSize:g,warp:y=!0}=a;this.x=i,this.y=c,this.z=f,this.warp=y||!0,this.tileSize=g}get isLoading(){return this.loadStatus===Wo.Loading}get isLoaded(){return this.loadStatus===Wo.Loaded}get isFailure(){return this.loadStatus===Wo.Failure}setTileLayerLoaded(){this.isLayerLoaded=!0}get isCancelled(){return this.loadStatus===Wo.Cancelled}get isDone(){return[Wo.Loaded,Wo.Cancelled,Wo.Failure].includes(this.loadStatus)}get bounds(){return Mu(this.x,this.y,this.z)}get bboxPolygon(){const[a,i,c,f]=this.bounds,g=[(c-a)/2,(f-i)/2];return pl(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:g,meta:`
      ${this.key}
      `}})}get key(){return`${this.x}_${this.y}_${this.z}`}layerLoad(){this.loadedLayers++,this.emit("layerLoaded")}loadData(a){return Qy(this,arguments,function*({getData:i,onLoad:c,onError:f}){this.loadDataId++;const g=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=Wo.Loading;let y=null,x;try{const{x:w,y:T,z:P,bounds:B,tileSize:U,warp:G}=this,{warpX:mt,warpY:Nt}=Ky(w,T,P,G),{signal:Qt}=this.abortController;y=yield i({x:mt,y:Nt,z:P,bounds:B,tileSize:U,signal:Qt,warp:G},this)}catch(w){x=w}if(g===this.loadDataId&&!(this.isCancelled&&!y)){if(x||!y){this.loadStatus=Wo.Failure,f(x,this);return}this.loadStatus=Wo.Loaded,this.data=y,c(this)}})}reloadData(a){this.isLoading&&this.abortLoad(),this.loadData(a)}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=Wo.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}},XO=(a,i)=>{const c=Tu(a),f=md(c,i),g=360*3-180,y=85.0511287798065;return[Math.max(f[0][0],-g),Math.max(f[0][1],-y),Math.min(f[1][0],g),Math.min(f[1][1],y)]},qO=(a,i)=>{const c=Tu(a),f=Tu(i);return Ai(c,f)},KO=Object.defineProperty,QO=Object.defineProperties,JO=Object.getOwnPropertyDescriptors,Es=Object.getOwnPropertySymbols,e0=Object.prototype.hasOwnProperty,n0=Object.prototype.propertyIsEnumerable,wd=(a,i,c)=>i in a?KO(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,Lu=(a,i)=>{for(var c in i||(i={}))e0.call(i,c)&&wd(a,c,i[c]);if(Es)for(var c of Es(i))n0.call(i,c)&&wd(a,c,i[c]);return a},Jy=(a,i)=>QO(a,JO(i)),{throttle:tE}=oi,ws=(a=>(a.TilesLoadStart="tiles-load-start",a.TileLoaded="tile-loaded",a.TileError="tile-error",a.TileUnload="tile-unload",a.TileUpdate="tile-update",a.TilesLoadFinished="tiles-load-finished",a))(ws||{}),Pu=class extends Jp(){constructor(a){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=tE((i,c)=>{this.update(i,c)},16),this.onTileLoad=i=>{this.emit("tile-loaded",i),this.updateTileVisible(),this.loadFinished()},this.onTileError=(i,c)=>{this.emit("tile-error",{error:i,tile:c}),this.updateTileVisible(),this.loadFinished()},this.onTileUnload=i=>{this.emit("tile-unload",i),this.loadFinished()},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:t0,getTileData:YO,warp:!0,updateStrategy:hc.Replace},this.updateOptions(a)}get isLoaded(){return this.currentTiles.every(a=>a.isDone)}get tiles(){return Array.from(this.cacheTiles.values()).sort((i,c)=>i.z-c.z)}updateOptions(a){const i=a.minZoom===void 0?this.options.minZoom:Math.ceil(a.minZoom),c=a.maxZoom===void 0?this.options.maxZoom:Math.floor(a.maxZoom);this.options=Jy(Lu(Lu({},this.options),a),{minZoom:i,maxZoom:c})}update(a,i){const c=Math.max(0,Math.ceil(a));if(this.lastViewStates&&this.lastViewStates.zoom===c&&qO(this.lastViewStates.latLonBoundsBuffer,i))return;const f=XO(i,Xy);this.lastViewStates={zoom:c,latLonBounds:i,latLonBoundsBuffer:f},this.currentZoom=c;let g=!1;const y=this.getTileIndices(c,f).filter(x=>this.options.warp||x.x>=0&&x.x<Math.pow(2,c));this.emit("tiles-load-start"),this.currentTiles=y.map(({x,y:w,z:T})=>{let P=this.getTile(x,w,T);return P?(((P==null?void 0:P.isFailure)||(P==null?void 0:P.isCancelled))&&P.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),P):(P=this.createTile(x,w,T),g=!0,P)}),g&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}reloadAll(){for(const[a,i]of this.cacheTiles){if(!this.currentTiles.includes(i)){this.cacheTiles.delete(a),this.onTileUnload(i);return}this.onTileUnload(i),i.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}reloadTileById(a,i,c){const f=this.cacheTiles.get(`${i},${c},${a}`);f&&(this.onTileUnload(f),f.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}reloadTileByLnglat(a,i,c){const f=this.getTileByLngLat(a,i,c);f&&this.reloadTileById(f.z,f.x,f.y)}reloadTileByExtent(a,i){this.getTileIndices(i,a).forEach(f=>{this.reloadTileById(f.z,f.x,f.y)})}pruneRequests(){const a=[];for(const i of this.cacheTiles.values())i.isLoading&&!i.isCurrent&&!i.isVisible&&a.push(i);for(;a.length>0;)a.shift().abortLoad()}getTileByLngLat(a,i,c){const{zoomOffset:f}=this.options,g=Math.ceil(c)+f,y=Od(a,i,g);return this.tiles.filter(w=>w.key===`${y[0]}_${y[1]}_${g}`)[0]}getTileExtent(a,i){return this.getTileIndices(i,a)}getTileByZXY(a,i,c){return this.tiles.filter(g=>g.key===`${i}_${c}_${a}`)[0]}clear(){for(const a of this.cacheTiles.values())a.isLoading?a.abortLoad():this.onTileUnload(a);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}destroy(){this.clear(),this.removeAllListeners()}updateTileVisible(){const a=this.options.updateStrategy,i=new Map;for(const g of this.cacheTiles.values())i.set(g.key,g.isVisible),g.isCurrent=!1,g.isVisible=!1;for(const g of this.currentTiles)g.isCurrent=!0,g.isVisible=!0;const c=Array.from(this.cacheTiles.values());typeof a=="function"?a(c):$O[a](c);let f=!1;Array.from(this.cacheTiles.values()).forEach(g=>{g.isVisible!==i.get(g.key)?(g.isVisibleChange=!0,f=!0):g.isVisibleChange=!1}),f&&this.emit("tile-update")}getTileIndices(a,i){const{tileSize:c,extent:f,zoomOffset:g}=this.options,y=Math.floor(this.options.maxZoom),x=Math.ceil(this.options.minZoom);return qy({maxZoom:y,minZoom:x,zoomOffset:g,tileSize:c,zoom:a,latLonBounds:i,extent:f})}getTileId(a,i,c){return`${a},${i},${c}`}loadFinished(){const a=!this.currentTiles.some(i=>!i.isDone);return a&&this.emit("tiles-load-finished"),a}getTile(a,i,c){const f=this.getTileId(a,i,c);return this.cacheTiles.get(f)}createTile(a,i,c){const f=this.getTileId(a,i,c),g=new Ed({x:a,y:i,z:c,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(f,g),g.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),g}resizeCacheTiles(){const a=GO*this.currentTiles.length;if(this.cacheTiles.size>a){for(const[c,f]of this.cacheTiles)if(!f.isVisible&&!this.currentTiles.includes(f)&&(this.cacheTiles.delete(c),this.onTileUnload(f)),this.cacheTiles.size<=a)break}this.rebuildTileTree()}rebuildTileTree(){for(const a of this.cacheTiles.values())a.parent=null,a.children.length=0;for(const a of this.cacheTiles.values()){const i=this.getNearestAncestor(a.x,a.y,a.z);a.parent=i,i!=null&&i.children&&i.children.push(a)}}getNearestAncestor(a,i,c){for(;c>this.options.minZoom;){a=Math.floor(a/2),i=Math.floor(i/2),c=c-1;const f=this.getTile(a,i,c);if(f)return f}return null}};function YP(a){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(a)}function r0(a){const i=[];let c=/\{([a-z])-([a-z])\}/.exec(a);if(c){const f=c[1].charCodeAt(0),g=c[2].charCodeAt(0);let y;for(y=f;y<=g;++y)i.push(a.replace(c[0],String.fromCharCode(y)));return i}if(c=/\{(\d+)-(\d+)\}/.exec(a),c){const f=parseInt(c[2],10);for(let g=parseInt(c[1],10);g<=f;g++)i.push(a.replace(c[0],g.toString()));return i}return i.push(a),i}function Wa(a,i){if(!a||!a.length)throw new Error("url is not allowed to be empty");const{x:c,y:f,z:g}=i,y=r0(a),x=Math.abs(c+f)%y.length;return(Ar(y[x])?`${y[x]}/{z}/{x}/{y}`:y[x]).replace(/\{x\}/g,c.toString()).replace(/\{y\}/g,f.toString()).replace(/\{z\}/g,g.toString()).replace(/\{bbox\}/g,Mu(c,f,g).join(",")).replace(/\{-y\}/g,(Math.pow(2,g)-f-1).toString())}function i0(a,i){const{x:c,y:f,z:g,layer:y,version:x="1.0.0",style:w="default",format:T,service:P="WMTS",tileMatrixset:B}=i,U=r0(a),G=Math.abs(c+f)%U.length;return`${U[G]}&SERVICE=${P}&REQUEST=GetTile&VERSION=${x}&LAYER=${y}&STYLE=${w}&TILEMATRIXSET=${B}&FORMAT=${T}&TILECOL=${c}&TILEROW=${f}&TILEMATRIX=${g}`}function Ad(a,i){return a==null?i:a}var eE=D(38163),t1=D.n(eE);function pc(a,i){return a.map(c=>c[i]*1)}function o0(a){return a===void 0?!1:!Array.isArray(a)&&a.data!==void 0}function XP(a){return Array.isArray(a)?a.length===0?!1:!!o0(a[0]):!1}function Td(a){return Array.isArray(a)?a.length===0||typeof a[0]=="number":!1}function As(a){const i=Object.isFrozen(a)?oi.cloneDeep(a):a;return t1()(i,!0),i}function Ga(a,i){return a||[[i[0],i[3]],[i[2],i[3]],[i[2],i[1]],[i[0],i[1]]]}var Zr=Object.defineProperty,qP=Object.defineProperties,nE=Object.getOwnPropertyDescriptors,e1=Object.getOwnPropertySymbols,En=Object.prototype.hasOwnProperty,n1=Object.prototype.propertyIsEnumerable,rE=(a,i,c)=>i in a?Zr(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,r1=(a,i)=>{for(var c in i||(i={}))En.call(i,c)&&rE(a,c,i[c]);if(e1)for(var c of e1(i))n1.call(i,c)&&rE(a,c,i[c]);return a},Iu=(a,i)=>qP(a,nE(i));function a0(a,i){const{x:c,y:f,x1:g,y1:y,coordinates:x,geometry:w}=i,T=[];if(!Array.isArray(a))return{dataArray:[]};if(w)return a.filter(P=>P[w]&&P[w].type&&P[w].coordinates&&P[w].coordinates.length>0).forEach((P,B)=>{const U=As(P[w]);ce(U,G=>{const mt=be(G),Nt=Iu(r1({},P),{_id:B,coordinates:mt});T.push(Nt)})}),{dataArray:T};for(let P=0;P<a.length;P++){const B=a[P];let U=[];if(x){let mt="Polygon";Array.isArray(x[0])||(mt="Point"),Array.isArray(x[0])&&!Array.isArray(x[0][0])&&(mt="LineString"),U=As({type:mt,coordinates:B[x]}).coordinates}else if(c&&f&&g&&y){const mt=[parseFloat(B[c]),parseFloat(B[f])],Nt=[parseFloat(B[g]),parseFloat(B[y])];U=[mt,Nt]}else c&&f&&(U=[parseFloat(B[c]),parseFloat(B[f])]);const G=Iu(r1({},B),{_id:P,coordinates:U});T.push(G)}return{dataArray:T}}function vl(a,i){const c=un(a);return a0(c,i)}var $a=Object.defineProperty,i1=Object.defineProperties,Xn=Object.getOwnPropertyDescriptors,Si=Object.getOwnPropertySymbols,Cr=Object.prototype.hasOwnProperty,o1=Object.prototype.propertyIsEnumerable,iE=(a,i,c)=>i in a?$a(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,Ri=(a,i)=>{for(var c in i||(i={}))Cr.call(i,c)&&iE(a,c,i[c]);if(Si)for(var c of Si(i))o1.call(i,c)&&iE(a,c,i[c]);return a},er=(a,i)=>i1(a,Xn(i));function oE(a){const i=a.toString();let c=5381,f=i.length;for(;f;)c=c*33^i.charCodeAt(--f);return c>>>0}function aE(a,i){return i===void 0?null:isNaN(a.properties[i]*1)?a.properties&&a.properties[i]?oE(a.properties[i]+"")%1000019:null:a.properties[i]*1}function sE(a,i){const c=[],f={};return a.features?(a.features=a.features.filter(g=>{const y=g.geometry;return g!=null&&y&&y.type&&y.coordinates&&y.coordinates.length>0}),a=As(a),a.features.length===0?{dataArray:[],featureKeys:f}:(ce(a,(g,y)=>{let x=aE(g,i==null?void 0:i.featureId);x===null&&(x=y);const w=x,T=be(g),P=er(Ri({},g.properties),{coordinates:T,_id:w});c.push(P)}),{dataArray:c,featureKeys:f})):(a.features=[],{dataArray:[]})}function ku(a,i,c,f){for(var g=f,y=c-i>>1,x=c-i,w,T=a[i],P=a[i+1],B=a[c],U=a[c+1],G=i+3;G<c;G+=3){var mt=cE(a[G],a[G+1],T,P,B,U);if(mt>g)w=G,g=mt;else if(mt===g){var Nt=Math.abs(G-y);Nt<x&&(w=G,x=Nt)}}g>f&&(w-i>3&&ku(a,i,w,f),a[w+2]=g,c-w>3&&ku(a,w,c,f))}function cE(a,i,c,f,g,y){var x=g-c,w=y-f;if(x!==0||w!==0){var T=((a-c)*x+(i-f)*w)/(x*x+w*w);T>1?(c=g,f=y):T>0&&(c+=x*T,f+=w*T)}return x=a-c,w=i-f,x*x+w*w}function ml(a,i,c,f){var g={id:typeof a=="undefined"?null:a,type:i,geometry:c,tags:f,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Ru(g),g}function Ru(a){var i=a.geometry,c=a.type;if(c==="Point"||c==="MultiPoint"||c==="LineString")Du(a,i);else if(c==="Polygon"||c==="MultiLineString")for(var f=0;f<i.length;f++)Du(a,i[f]);else if(c==="MultiPolygon")for(f=0;f<i.length;f++)for(var g=0;g<i[f].length;g++)Du(a,i[f][g])}function Du(a,i){for(var c=0;c<i.length;c+=3)a.minX=Math.min(a.minX,i[c]),a.minY=Math.min(a.minY,i[c+1]),a.maxX=Math.max(a.maxX,i[c]),a.maxY=Math.max(a.maxY,i[c+1])}function a1(a,i){var c=[];if(a.type==="FeatureCollection")for(var f=0;f<a.features.length;f++)Cd(c,a.features[f],i,f);else a.type==="Feature"?Cd(c,a,i):Cd(c,{geometry:a},i);return c}function Cd(a,i,c,f){if(i.geometry){var g=i.geometry.coordinates,y=i.geometry.type,x=Math.pow(c.tolerance/((1<<c.maxZoom)*c.extent),2),w=[],T=i.id;if(c.promoteId?T=i.properties[c.promoteId]:c.generateId&&(T=f||0),y==="Point")fi(g,w);else if(y==="MultiPoint")for(var P=0;P<g.length;P++)fi(g[P],w);else if(y==="LineString")s0(g,w,x,!1);else if(y==="MultiLineString")if(c.lineMetrics){for(P=0;P<g.length;P++)w=[],s0(g[P],w,x,!1),a.push(ml(T,"LineString",w,i.properties));return}else c0(g,w,x,!1);else if(y==="Polygon")c0(g,w,x,!0);else if(y==="MultiPolygon")for(P=0;P<g.length;P++){var B=[];c0(g[P],B,x,!0),w.push(B)}else if(y==="GeometryCollection"){for(P=0;P<i.geometry.geometries.length;P++)Cd(a,{id:T,geometry:i.geometry.geometries[P],properties:i.properties},c,f);return}else throw new Error("Input data is not a valid GeoJSON object.");a.push(ml(T,y,w,i.properties))}}function fi(a,i){i.push(s1(a[0])),i.push(c1(a[1])),i.push(0)}function s0(a,i,c,f){for(var g,y,x=0,w=0;w<a.length;w++){var T=s1(a[w][0]),P=c1(a[w][1]);i.push(T),i.push(P),i.push(0),w>0&&(f?x+=(g*P-T*y)/2:x+=Math.sqrt(Math.pow(T-g,2)+Math.pow(P-y,2))),g=T,y=P}var B=i.length-3;i[2]=1,ku(i,0,B,c),i[B+2]=1,i.size=Math.abs(x),i.start=0,i.end=i.size}function c0(a,i,c,f){for(var g=0;g<a.length;g++){var y=[];s0(a[g],y,c,f),i.push(y)}}function s1(a){return a/360+.5}function c1(a){var i=Math.sin(a*Math.PI/180),c=.5-.25*Math.log((1+i)/(1-i))/Math.PI;return c<0?0:c>1?1:c}function Ya(a,i,c,f,g,y,x,w){if(c/=i,f/=i,y>=c&&x<f)return a;if(x<c||y>=f)return null;for(var T=[],P=0;P<a.length;P++){var B=a[P],U=B.geometry,G=B.type,mt=g===0?B.minX:B.minY,Nt=g===0?B.maxX:B.maxY;if(mt>=c&&Nt<f){T.push(B);continue}else if(Nt<c||mt>=f)continue;var Qt=[];if(G==="Point"||G==="MultiPoint")lE(U,Qt,c,f,g);else if(G==="LineString")l0(U,Qt,c,f,g,!1,w.lineMetrics);else if(G==="MultiLineString")yl(U,Qt,c,f,g,!1);else if(G==="Polygon")yl(U,Qt,c,f,g,!0);else if(G==="MultiPolygon")for(var ye=0;ye<U.length;ye++){var Fe=[];yl(U[ye],Fe,c,f,g,!0),Fe.length&&Qt.push(Fe)}if(Qt.length){if(w.lineMetrics&&G==="LineString"){for(ye=0;ye<Qt.length;ye++)T.push(ml(B.id,G,Qt[ye],B.tags));continue}(G==="LineString"||G==="MultiLineString")&&(Qt.length===1?(G="LineString",Qt=Qt[0]):G="MultiLineString"),(G==="Point"||G==="MultiPoint")&&(G=Qt.length===3?"Point":"MultiPoint"),T.push(ml(B.id,G,Qt,B.tags))}}return T.length?T:null}function lE(a,i,c,f,g){for(var y=0;y<a.length;y+=3){var x=a[y+g];x>=c&&x<=f&&(i.push(a[y]),i.push(a[y+1]),i.push(a[y+2]))}}function l0(a,i,c,f,g,y,x){for(var w=uE(a),T=g===0?fE:l1,P=a.start,B,U,G=0;G<a.length-3;G+=3){var mt=a[G],Nt=a[G+1],Qt=a[G+2],ye=a[G+3],Fe=a[G+4],ze=g===0?mt:Nt,Ve=g===0?ye:Fe,tn=!1;x&&(B=Math.sqrt(Math.pow(mt-ye,2)+Math.pow(Nt-Fe,2))),ze<c?Ve>c&&(U=T(w,mt,Nt,ye,Fe,c),x&&(w.start=P+B*U)):ze>f?Ve<f&&(U=T(w,mt,Nt,ye,Fe,f),x&&(w.start=P+B*U)):u0(w,mt,Nt,Qt),Ve<c&&ze>=c&&(U=T(w,mt,Nt,ye,Fe,c),tn=!0),Ve>f&&ze<=f&&(U=T(w,mt,Nt,ye,Fe,f),tn=!0),!y&&tn&&(x&&(w.end=P+B*U),i.push(w),w=uE(a)),x&&(P+=B)}var pn=a.length-3;mt=a[pn],Nt=a[pn+1],Qt=a[pn+2],ze=g===0?mt:Nt,ze>=c&&ze<=f&&u0(w,mt,Nt,Qt),pn=w.length-3,y&&pn>=3&&(w[pn]!==w[0]||w[pn+1]!==w[1])&&u0(w,w[0],w[1],w[2]),w.length&&i.push(w)}function uE(a){var i=[];return i.size=a.size,i.start=a.start,i.end=a.end,i}function yl(a,i,c,f,g,y){for(var x=0;x<a.length;x++)l0(a[x],i,c,f,g,y,!1)}function u0(a,i,c,f){a.push(i),a.push(c),a.push(f)}function fE(a,i,c,f,g,y){var x=(y-i)/(f-i);return a.push(y),a.push(c+(g-c)*x),a.push(1),x}function l1(a,i,c,f,g,y){var x=(y-c)/(g-c);return a.push(i+(f-i)*x),a.push(y),a.push(1),x}function KP(a,i){var c=i.buffer/i.extent,f=a,g=Ya(a,1,-1-c,c,0,-1,2,i),y=Ya(a,1,1-c,2+c,0,-1,2,i);return(g||y)&&(f=Ya(a,1,-c,1+c,0,-1,2,i)||[],g&&(f=f0(g,1).concat(f)),y&&(f=f.concat(f0(y,-1)))),f}function f0(a,i){for(var c=[],f=0;f<a.length;f++){var g=a[f],y=g.type,x;if(y==="Point"||y==="MultiPoint"||y==="LineString")x=d0(g.geometry,i);else if(y==="MultiLineString"||y==="Polygon"){x=[];for(var w=0;w<g.geometry.length;w++)x.push(d0(g.geometry[w],i))}else if(y==="MultiPolygon")for(x=[],w=0;w<g.geometry.length;w++){for(var T=[],P=0;P<g.geometry[w].length;P++)T.push(d0(g.geometry[w][P],i));x.push(T)}c.push(ml(g.id,y,x,g.tags))}return c}function d0(a,i){var c=[];c.size=a.size,a.start!==void 0&&(c.start=a.start,c.end=a.end);for(var f=0;f<a.length;f+=3)c.push(a[f]+i,a[f+1],a[f+2]);return c}function u1(a,i){if(a.transformed)return a;var c=1<<a.z,f=a.x,g=a.y,y,x,w;for(y=0;y<a.features.length;y++){var T=a.features[y],P=T.geometry,B=T.type;if(T.geometry=[],B===1)for(x=0;x<P.length;x+=2)T.geometry.push(Nu(P[x],P[x+1],i,c,f,g));else for(x=0;x<P.length;x++){var U=[];for(w=0;w<P[x].length;w+=2)U.push(Nu(P[x][w],P[x][w+1],i,c,f,g));T.geometry.push(U)}}return a.transformed=!0,a}function Nu(a,i,c,f,g,y){return[Math.round(c*(a*f-g)),Math.round(c*(i*f-y))]}function dE(a,i,c,f,g){for(var y=i===g.maxZoom?0:g.tolerance/((1<<i)*g.extent),x={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:c,y:f,z:i,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},w=0;w<a.length;w++){x.numFeatures++,Ts(x,a[w],y,g);var T=a[w].minX,P=a[w].minY,B=a[w].maxX,U=a[w].maxY;T<x.minX&&(x.minX=T),P<x.minY&&(x.minY=P),B>x.maxX&&(x.maxX=B),U>x.maxY&&(x.maxY=U)}return x}function Ts(a,i,c,f){var g=i.geometry,y=i.type,x=[];if(y==="Point"||y==="MultiPoint")for(var w=0;w<g.length;w+=3)x.push(g[w]),x.push(g[w+1]),a.numPoints++,a.numSimplified++;else if(y==="LineString")h0(x,g,a,c,!1,!1);else if(y==="MultiLineString"||y==="Polygon")for(w=0;w<g.length;w++)h0(x,g[w],a,c,y==="Polygon",w===0);else if(y==="MultiPolygon")for(var T=0;T<g.length;T++){var P=g[T];for(w=0;w<P.length;w++)h0(x,P[w],a,c,!0,w===0)}if(x.length){var B=i.tags||null;if(y==="LineString"&&f.lineMetrics){B={};for(var U in i.tags)B[U]=i.tags[U];B.mapbox_clip_start=g.start/g.size,B.mapbox_clip_end=g.end/g.size}var G={geometry:x,type:y==="Polygon"||y==="MultiPolygon"?3:y==="LineString"||y==="MultiLineString"?2:1,tags:B};i.id!==null&&(G.id=i.id),a.features.push(G)}}function h0(a,i,c,f,g,y){var x=f*f;if(f>0&&i.size<(g?x:f)){c.numPoints+=i.length/3;return}for(var w=[],T=0;T<i.length;T+=3)(f===0||i[T+2]>x)&&(c.numSimplified++,w.push(i[T]),w.push(i[T+1])),c.numPoints++;g&&Md(w,y),a.push(w)}function Md(a,i){for(var c=0,f=0,g=a.length,y=g-2;f<g;y=f,f+=2)c+=(a[f]-a[y])*(a[f+1]+a[y+1]);if(c>0===i)for(f=0,g=a.length;f<g/2;f+=2){var x=a[f],w=a[f+1];a[f]=a[g-2-f],a[f+1]=a[g-1-f],a[g-2-f]=x,a[g-1-f]=w}}function hE(a,i){return new Ld(a,i)}function Ld(a,i){i=this.options=pE(Object.create(this.options),i);var c=i.debug;if(c&&console.time("preprocess data"),i.maxZoom<0||i.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(i.promoteId&&i.generateId)throw new Error("promoteId and generateId cannot be used together.");var f=a1(a,i);this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",i.indexMaxZoom,i.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),f=KP(f,i),f.length&&this.splitTile(f,0,0,0),c&&(f.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Ld.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ld.prototype.splitTile=function(a,i,c,f,g,y,x){for(var w=[a,i,c,f],T=this.options,P=T.debug;w.length;){f=w.pop(),c=w.pop(),i=w.pop(),a=w.pop();var B=1<<i,U=p0(i,c,f),G=this.tiles[U];if(!G&&(P>1&&console.time("creation"),G=this.tiles[U]=dE(a,i,c,f,T),this.tileCoords.push({z:i,x:c,y:f}),P)){P>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",i,c,f,G.numFeatures,G.numPoints,G.numSimplified),console.timeEnd("creation"));var mt="z"+i;this.stats[mt]=(this.stats[mt]||0)+1,this.total++}if(G.source=a,g){if(i===T.maxZoom||i===g)continue;var Nt=1<<g-i;if(c!==Math.floor(y/Nt)||f!==Math.floor(x/Nt))continue}else if(i===T.indexMaxZoom||G.numPoints<=T.indexMaxPoints)continue;if(G.source=null,a.length!==0){P>1&&console.time("clipping");var Qt=.5*T.buffer/T.extent,ye=.5-Qt,Fe=.5+Qt,ze=1+Qt,Ve,tn,pn,Pn,Tn,kn;Ve=tn=pn=Pn=null,Tn=Ya(a,B,c-Qt,c+Fe,0,G.minX,G.maxX,T),kn=Ya(a,B,c+ye,c+ze,0,G.minX,G.maxX,T),a=null,Tn&&(Ve=Ya(Tn,B,f-Qt,f+Fe,1,G.minY,G.maxY,T),tn=Ya(Tn,B,f+ye,f+ze,1,G.minY,G.maxY,T),Tn=null),kn&&(pn=Ya(kn,B,f-Qt,f+Fe,1,G.minY,G.maxY,T),Pn=Ya(kn,B,f+ye,f+ze,1,G.minY,G.maxY,T),kn=null),P>1&&console.timeEnd("clipping"),w.push(Ve||[],i+1,c*2,f*2),w.push(tn||[],i+1,c*2,f*2+1),w.push(pn||[],i+1,c*2+1,f*2),w.push(Pn||[],i+1,c*2+1,f*2+1)}}},Ld.prototype.getTile=function(a,i,c){var f=this.options,g=f.extent,y=f.debug;if(a<0||a>24)return null;var x=1<<a;i=(i%x+x)%x;var w=p0(a,i,c);if(this.tiles[w])return u1(this.tiles[w],g);y>1&&console.log("drilling down to z%d-%d-%d",a,i,c);for(var T=a,P=i,B=c,U;!U&&T>0;)T--,P=Math.floor(P/2),B=Math.floor(B/2),U=this.tiles[p0(T,P,B)];return!U||!U.source?null:(y>1&&console.log("found parent tile z%d-%d-%d",T,P,B),y>1&&console.time("drilling down"),this.splitTile(U.source,T,P,B,a,i,c),y>1&&console.timeEnd("drilling down"),this.tiles[w]?u1(this.tiles[w],g):null)};function p0(a,i,c){return((1<<a)*c+i)*32+a}function pE(a,i){for(var c in i)a[c]=i[c];return a}var gc=class{constructor(a,i,c,f){this.vectorLayerCache={},this.x=i,this.y=c,this.z=f,this.vectorTile=a}getTileData(a){return!a||!this.vectorTile.layers[a]?[]:this.vectorLayerCache[a]?this.vectorLayerCache[a]:this.vectorTile.layers[a].features}getFeatureById(){throw new Error("Method not implemented.")}},g0=Object.defineProperty,gE=Object.defineProperties,f1=Object.getOwnPropertyDescriptors,d1=Object.getOwnPropertySymbols,h1=Object.prototype.hasOwnProperty,p1=Object.prototype.propertyIsEnumerable,v0=(a,i,c)=>i in a?g0(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,Fu=(a,i)=>{for(var c in i||(i={}))h1.call(i,c)&&v0(a,c,i[c]);if(d1)for(var c of d1(i))p1.call(i,c)&&v0(a,c,i[c]);return a},g1=(a,i)=>gE(a,f1(i)),vE=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),Pd={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function Cs(a){let i=0;for(let c=0,f=a.length,g=f-1,y,x;c<f;g=c++)y=a[c],x=a[g],i+=(x.x-y.x)*(y.y+x.y);return i}function mE(a){const i=a.length;if(i<=1)return[a];const c=[];let f,g;for(let y=0;y<i;y++){const x=Cs(a[y]);x!==0&&(g===void 0&&(g=x<0),g===x<0?(f&&c.push(f),f=[a[y]]):f.push(a[y]))}return f&&c.push(f),c}var yE=["Unknown","Point","LineString","Polygon"];function Ta(a,i,c,f,g){let y=g.geometry;const x=g.type,w=g.tags,T=g.id,P=a*Math.pow(2,f),B=a*i,U=a*c;let G=yE[x],mt,Nt;function Qt(Fe){for(let ze=0;ze<Fe.length;ze++){const Ve=Fe[ze];if(Ve[3])break;const tn=180-(Ve[1]+U)*360/P,pn=(Ve[0]+B)*360/P-180,Pn=360/Math.PI*Math.atan(Math.exp(tn*Math.PI/180))-90;Fe[ze]=[pn,Pn,0,1]}}switch(x){case 1:const Fe=[];for(mt=0;mt<y.length;mt++)Fe[mt]=y[mt][0];y=Fe,Qt(y);break;case 2:for(mt=0;mt<y.length;mt++)Qt(y[mt]);break;case 3:for(y=mE(y),mt=0;mt<y.length;mt++)for(Nt=0;Nt<y[mt].length;Nt++)Qt(y[mt][Nt]);break}return y.length===1?y=y[0]:G="Multi"+G,{type:"Feature",geometry:{type:G,coordinates:y},properties:w,id:T,relativeOrigin:[0,0],coord:""}}var vc=(a,i,c,f)=>vE(void 0,null,function*(){return new Promise(g=>{const y=i.getTile(a.z,a.x,a.y),w={layers:{defaultLayer:{features:y?y.features.map(P=>Ta(f,c.x,c.y,c.z,P)):[]}}},T=new gc(w,a.x,a.y,a.z);g(T)})});function QP(a){const i={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return a===void 0||typeof a.geojsonvtOptions=="undefined"?i:Fu(Fu({},i),a.geojsonvtOptions)}function bE(a,i){const c=QP(i),f=c.extent||4096,g=hE(a,c),y=(w,T)=>vc(T,g,w,f),x=g1(Fu(Fu({},Pd),i),{getTileData:y});return{data:a,dataArray:[],tilesetOptions:x,isTile:!0}}var v1=Object.defineProperty,JP=Object.defineProperties,_E=Object.getOwnPropertyDescriptors,m0=Object.getOwnPropertySymbols,m1=Object.prototype.hasOwnProperty,xE=Object.prototype.propertyIsEnumerable,y1=(a,i,c)=>i in a?v1(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,Ms=(a,i)=>{for(var c in i||(i={}))m1.call(i,c)&&y1(a,c,i[c]);if(m0)for(var c of m0(i))xE.call(i,c)&&y1(a,c,i[c]);return a},Id=(a,i)=>JP(a,_E(i));function kd(a,i){const{extent:c=[121.168,30.2828,121.384,30.4219],coordinates:f,requestParameters:g={}}=i,y=new Promise(T=>{a instanceof HTMLImageElement||EO(a)?T([a]):Go(a,g,P=>{T(P)})}),x=Ga(f,c);return{originData:a,images:y,_id:1,dataArray:[{_id:0,coordinates:x}]}}function Go(a,i,c){const f=[];if(typeof a=="string")ht(Id(Ms({},i),{url:a}),(g,y)=>{y&&(f.push(y),c(f))});else{const g=a.length;let y=0;a.forEach(x=>{ht(Id(Ms({},i),{url:x}),(w,T)=>{y++,T&&f.push(T),y===g&&c(f)})})}return kd}var kr=Object.defineProperty,t6=Object.defineProperties,e6=Object.getOwnPropertyDescriptors,b1=Object.getOwnPropertySymbols,_1=Object.prototype.hasOwnProperty,Bu=Object.prototype.propertyIsEnumerable,y0=(a,i,c)=>i in a?kr(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,Rd=(a,i)=>{for(var c in i||(i={}))_1.call(i,c)&&y0(a,c,i[c]);if(b1)for(var c of b1(i))Bu.call(i,c)&&y0(a,c,i[c]);return a},ju=(a,i)=>t6(a,e6(i)),Dd=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),SE=(a,i,c,f)=>Dd(void 0,null,function*(){const g={x:i.x,y:i.y,z:i.z},y=Wa(a,g);return new Promise(x=>{f?f(g,(w,T)=>{if(w||!T){const P={layers:{defaultLayer:{features:[]}}},B=new gc(P,i.x,i.y,i.z);x(B)}else{const P={layers:{defaultLayer:{features:T.features}}},B=new gc(P,i.x,i.y,i.z);x(B)}}):Mo(ju(Rd({},c),{url:y}),(w,T)=>{if(w||!T){const P={layers:{defaultLayer:{features:[]}}},B=new gc(P,i.x,i.y,i.z);x(B)}else{const B={layers:{defaultLayer:{features:JSON.parse(T)}}},U=new gc(B,i.x,i.y,i.z);x(U)}})})});function OE(a,i){const c=(g,y)=>SE(a,y,i==null?void 0:i.requestParameters,i.getCustomData),f=ju(Rd({},i),{getTileData:c});return{dataArray:[],tilesetOptions:f,isTile:!0}}var x1=D(38929),Yr=D(3614),Rr=D.n(Yr),zu=Object.defineProperty,S1=Object.defineProperties,Uu=Object.getOwnPropertyDescriptors,b0=Object.getOwnPropertySymbols,EE=Object.prototype.hasOwnProperty,bl=Object.prototype.propertyIsEnumerable,_0=(a,i,c)=>i in a?zu(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,wE=(a,i)=>{for(var c in i||(i={}))EE.call(i,c)&&_0(a,c,i[c]);if(b0)for(var c of b0(i))bl.call(i,c)&&_0(a,c,i[c]);return a},AE=(a,i)=>S1(a,Uu(i)),Zu=class{constructor(a,i,c,f){this.vectorLayerCache={},this.x=i,this.y=c,this.z=f,this.vectorTile=new x1.VectorTile(new(Rr())(a))}getTileData(a){if(!a||!this.vectorTile.layers[a])return[];if(this.vectorLayerCache[a])return this.vectorLayerCache[a];const i=this.vectorTile.layers[a];if(Array.isArray(i.features))return this.vectorLayerCache[a]=i.features,i.features;const c=[];for(let f=0;f<i.length;f++){const y=i.feature(f).toGeoJSON(this.x,this.y,this.z);c.push(AE(wE({},y),{properties:wE({id:y.id},y.properties)}))}return this.vectorLayerCache[a]=c,c}getFeatureById(){throw new Error("Method not implemented.")}},x0=Object.defineProperty,TE=Object.defineProperties,X=Object.getOwnPropertyDescriptors,S0=Object.getOwnPropertySymbols,Hu=Object.prototype.hasOwnProperty,Ls=Object.prototype.propertyIsEnumerable,Vu=(a,i,c)=>i in a?x0(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,O0=(a,i)=>{for(var c in i||(i={}))Hu.call(i,c)&&Vu(a,c,i[c]);if(S0)for(var c of S0(i))Ls.call(i,c)&&Vu(a,c,i[c]);return a},E0=(a,i)=>TE(a,X(i)),_l=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),CE={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},O1=(a,i,c,f,g)=>_l(void 0,null,function*(){const y=Wa(a,i);return new Promise(x=>{if(g)g({x:c.x,y:c.y,z:c.z},(w,T)=>{if(w||!T)x(void 0);else{const P=new Zu(T,c.x,c.y,c.z);x(P)}});else{const w=ro(E0(O0({},f),{url:y}),(T,P)=>{if(T||!P)x(void 0);else{const B=new Zu(P,c.x,c.y,c.z);x(B)}});c.xhrCancel=()=>w.cancel()}})});function E1(a,i){const c=Array.isArray(a)?a[0]:a,f=(y,x)=>O1(c,y,x,i==null?void 0:i.requestParameters,i==null?void 0:i.getCustomData),g=E0(O0(O0({},CE),i),{getTileData:f});return{data:c,dataArray:[],tilesetOptions:g,isTile:!0}}function ME(a,i,c){switch(a){case"+":return i+c;case"-":return i-c;case"*":return i*c;case"/":return i/c;case"%":return i%c;case"^":return Math.pow(i,c);case"abs":return Math.abs(i);case"floor":return Math.floor(i);case"round":return Math.round(i);case"ceil":return Math.ceil(i);case"sin":return Math.sin(i);case"cos":return Math.cos(i);case"atan":return c===-1?Math.atan(i):Math.atan2(i,c);case"min":return Math.min(i,c);case"max":return Math.max(i,c);case"log10":return Math.log(i);case"log2":return Math.log2(i);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Wu(a,i){const{width:c,height:f}=i[0],g=i.map(T=>T.rasterData),y=c*f,x=[],w=JSON.stringify(a);for(let T=0;T<y;T++){const P=JSON.parse(w),B=$o(P,g,T);if(typeof B=="number")x.push(B);else{const U=Nd(P);x.push(U)}}return x}function $o(a,i,c){if(a.length===2&&a[0]==="band"&&typeof a[1]=="number")try{return i[a[1]][c]}catch(f){return console.warn("Raster Data err!"),0}a.map((f,g)=>{if(Array.isArray(f)&&f.length>0)switch(f[0]){case"band":try{a[g]=i[f[1]][c]}catch(y){console.warn("Raster Data err!"),a[g]=0}break;default:$o(f,i,c)}})}function LE(a){const[i,c=-1,f=-1]=a;return i===void 0?(console.warn("Express err!"),["+",0,0]):[i.replace(/\s+/g,""),c,f]}function Nd(a){const i=LE(a),c=i[0];let f=i[1],g=i[2];return Array.isArray(f)&&(f=Nd(a[1])),Array.isArray(g)&&(g=Nd(a[2])),ME(c,f,g)}var da={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:PE}};function PE(a,i){const c=a[0].rasterData,f=a[1].rasterData,g=a[2].rasterData,y=[],[x,w]=(i==null?void 0:i.countCut)||[2,98],T=(i==null?void 0:i.RMinMax)||mc(c,x,w),P=(i==null?void 0:i.GMinMax)||mc(f,x,w),B=(i==null?void 0:i.BMinMax)||mc(g,x,w);for(let U=0;U<c.length;U++)y.push(Math.max(0,c[U]-T[0])),y.push(Math.max(0,f[U]-P[0])),y.push(Math.max(0,g[U]-B[0]));return{rasterData:y,rMinMax:T,gMinMax:P,bMinMax:B}}function mc(a,i,c){const f=a.slice().sort((w,T)=>w-T),g=f.length,y=f[Math.ceil(g*i/100)],x=f[Math.ceil(g*c/100)];return[y,x]}var IE=Object.defineProperty,kE=Object.defineProperties,zi=Object.getOwnPropertyDescriptors,fo=Object.getOwnPropertySymbols,RE=Object.prototype.hasOwnProperty,DE=Object.prototype.propertyIsEnumerable,w1=(a,i,c)=>i in a?IE(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,w0=(a,i)=>{for(var c in i||(i={}))RE.call(i,c)&&w1(a,c,i[c]);if(fo)for(var c of fo(i))DE.call(i,c)&&w1(a,c,i[c]);return a},NE=(a,i)=>kE(a,zi(i)),A1=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())});function A0(a,i,c){return A1(this,null,function*(){if(a.length===0)return{rasterData:[0],width:1,heigh:1};const f=yield Promise.all(a.map(({data:T,bands:P=[0]})=>i(T,P))),g=[];f.forEach(T=>{Array.isArray(T)?g.push(...T):g.push(T)});const{width:y,height:x}=g[0];let w;switch(typeof c){case"function":w=c(g);break;case"object":Array.isArray(c)?w={rasterData:Wu(c,g)}:w=Jn(c,g);break;default:w={rasterData:g[0].rasterData}}return NE(w0({},w),{width:y,height:x})})}function Jn(a,i){const c=da[a.type];if(c.type==="function")return c.method(i,a==null?void 0:a.options);if(c.type==="operation")return a.type==="rgb"?FE(c.expression,i):{rasterData:Wu(c.expression,i)}}function FE(a,i){a.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),a.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),a.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");const c=Wu(a.r||["band",0],i),f=Wu(a.g||["band",0],i),g=Wu(a.b||["band",0],i);return[c,f,g]}function Oo(a,i,c,f){return A1(this,null,function*(){const g=yield A0(a,i,c);f(null,{data:g})})}function Dr(a,i){const{extent:c=[121.168,30.2828,121.384,30.4219],coordinates:f,width:g,height:y,min:x,max:w,format:T,operation:P}=i;let B,U,G;if(T===void 0||Td(a))B=Array.from(a),U=g,G=y;else{const Qt=Array.isArray(a)?a:[a];B=A0(Qt,T,P)}const mt=Ga(f,c);return{_id:1,dataArray:[{_id:1,data:B,width:U,height:G,min:x,max:w,coordinates:mt}]}}var nn=D(1413),dt=D(4942);let Fd=function(a){return a.Normal="normal",a.PostProcessing="post-processing",a}({}),q=function(a){return a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN",a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC_COLOR=768]="SRC_COLOR",a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.DST_COLOR=774]="DST_COLOR",a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",a[a.FUNC_ADD=32774]="FUNC_ADD",a[a.BLEND_EQUATION=32777]="BLEND_EQUATION",a[a.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",a[a.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",a[a.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",a[a.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",a[a.MAX_EXT=32776]="MAX_EXT",a[a.MIN_EXT=32775]="MIN_EXT",a[a.BLEND_DST_RGB=32968]="BLEND_DST_RGB",a[a.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",a[a.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",a[a.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR",a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",a[a.BLEND_COLOR=32773]="BLEND_COLOR",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",a[a.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",a[a.STREAM_DRAW=35040]="STREAM_DRAW",a[a.STATIC_DRAW=35044]="STATIC_DRAW",a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",a[a.BUFFER_SIZE=34660]="BUFFER_SIZE",a[a.BUFFER_USAGE=34661]="BUFFER_USAGE",a[a.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",a[a.FRONT=1028]="FRONT",a[a.BACK=1029]="BACK",a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK",a[a.CULL_FACE=2884]="CULL_FACE",a[a.BLEND=3042]="BLEND",a[a.DITHER=3024]="DITHER",a[a.STENCIL_TEST=2960]="STENCIL_TEST",a[a.DEPTH_TEST=2929]="DEPTH_TEST",a[a.SCISSOR_TEST=3089]="SCISSOR_TEST",a[a.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",a[a.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",a[a.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",a[a.NO_ERROR=0]="NO_ERROR",a[a.INVALID_ENUM=1280]="INVALID_ENUM",a[a.INVALID_VALUE=1281]="INVALID_VALUE",a[a.INVALID_OPERATION=1282]="INVALID_OPERATION",a[a.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",a[a.CW=2304]="CW",a[a.CCW=2305]="CCW",a[a.LINE_WIDTH=2849]="LINE_WIDTH",a[a.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",a[a.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",a[a.CULL_FACE_MODE=2885]="CULL_FACE_MODE",a[a.FRONT_FACE=2886]="FRONT_FACE",a[a.DEPTH_RANGE=2928]="DEPTH_RANGE",a[a.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",a[a.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",a[a.DEPTH_FUNC=2932]="DEPTH_FUNC",a[a.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",a[a.STENCIL_FUNC=2962]="STENCIL_FUNC",a[a.STENCIL_FAIL=2964]="STENCIL_FAIL",a[a.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",a[a.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",a[a.STENCIL_REF=2967]="STENCIL_REF",a[a.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",a[a.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",a[a.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",a[a.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",a[a.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",a[a.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",a[a.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",a[a.VIEWPORT=2978]="VIEWPORT",a[a.SCISSOR_BOX=3088]="SCISSOR_BOX",a[a.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",a[a.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",a[a.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",a[a.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",a[a.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",a[a.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",a[a.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",a[a.RED_BITS=3410]="RED_BITS",a[a.GREEN_BITS=3411]="GREEN_BITS",a[a.BLUE_BITS=3412]="BLUE_BITS",a[a.ALPHA_BITS=3413]="ALPHA_BITS",a[a.DEPTH_BITS=3414]="DEPTH_BITS",a[a.STENCIL_BITS=3415]="STENCIL_BITS",a[a.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",a[a.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",a[a.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",a[a.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",a[a.SAMPLES=32937]="SAMPLES",a[a.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",a[a.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",a[a.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",a[a.DONT_CARE=4352]="DONT_CARE",a[a.FASTEST=4353]="FASTEST",a[a.NICEST=4354]="NICEST",a[a.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",a[a.BYTE=5120]="BYTE",a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.SHORT=5122]="SHORT",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.INT=5124]="INT",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.FLOAT=5126]="FLOAT",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.ALPHA=6406]="ALPHA",a[a.RGB=6407]="RGB",a[a.RGBA=6408]="RGBA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.RED=6403]="RED",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",a[a.VERTEX_SHADER=35633]="VERTEX_SHADER",a[a.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",a[a.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",a[a.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",a[a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",a[a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",a[a.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",a[a.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",a[a.SHADER_TYPE=35663]="SHADER_TYPE",a[a.DELETE_STATUS=35712]="DELETE_STATUS",a[a.LINK_STATUS=35714]="LINK_STATUS",a[a.VALIDATE_STATUS=35715]="VALIDATE_STATUS",a[a.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",a[a.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",a[a.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",a[a.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",a[a.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",a[a.NEVER=512]="NEVER",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.GEQUAL=518]="GEQUAL",a[a.ALWAYS=519]="ALWAYS",a[a.KEEP=7680]="KEEP",a[a.REPLACE=7681]="REPLACE",a[a.INCR=7682]="INCR",a[a.DECR=7683]="DECR",a[a.INVERT=5386]="INVERT",a[a.INCR_WRAP=34055]="INCR_WRAP",a[a.DECR_WRAP=34056]="DECR_WRAP",a[a.VENDOR=7936]="VENDOR",a[a.RENDERER=7937]="RENDERER",a[a.VERSION=7938]="VERSION",a[a.NEAREST=9728]="NEAREST",a[a.LINEAR=9729]="LINEAR",a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",a[a.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",a[a.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",a[a.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",a[a.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE=5890]="TEXTURE",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a[a.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",a[a.TEXTURE0=33984]="TEXTURE0",a[a.TEXTURE1=33985]="TEXTURE1",a[a.TEXTURE2=33986]="TEXTURE2",a[a.TEXTURE3=33987]="TEXTURE3",a[a.TEXTURE4=33988]="TEXTURE4",a[a.TEXTURE5=33989]="TEXTURE5",a[a.TEXTURE6=33990]="TEXTURE6",a[a.TEXTURE7=33991]="TEXTURE7",a[a.TEXTURE8=33992]="TEXTURE8",a[a.TEXTURE9=33993]="TEXTURE9",a[a.TEXTURE10=33994]="TEXTURE10",a[a.TEXTURE11=33995]="TEXTURE11",a[a.TEXTURE12=33996]="TEXTURE12",a[a.TEXTURE13=33997]="TEXTURE13",a[a.TEXTURE14=33998]="TEXTURE14",a[a.TEXTURE15=33999]="TEXTURE15",a[a.TEXTURE16=34e3]="TEXTURE16",a[a.TEXTURE17=34001]="TEXTURE17",a[a.TEXTURE18=34002]="TEXTURE18",a[a.TEXTURE19=34003]="TEXTURE19",a[a.TEXTURE20=34004]="TEXTURE20",a[a.TEXTURE21=34005]="TEXTURE21",a[a.TEXTURE22=34006]="TEXTURE22",a[a.TEXTURE23=34007]="TEXTURE23",a[a.TEXTURE24=34008]="TEXTURE24",a[a.TEXTURE25=34009]="TEXTURE25",a[a.TEXTURE26=34010]="TEXTURE26",a[a.TEXTURE27=34011]="TEXTURE27",a[a.TEXTURE28=34012]="TEXTURE28",a[a.TEXTURE29=34013]="TEXTURE29",a[a.TEXTURE30=34014]="TEXTURE30",a[a.TEXTURE31=34015]="TEXTURE31",a[a.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",a[a.REPEAT=10497]="REPEAT",a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a[a.FLOAT_VEC2=35664]="FLOAT_VEC2",a[a.FLOAT_VEC3=35665]="FLOAT_VEC3",a[a.FLOAT_VEC4=35666]="FLOAT_VEC4",a[a.INT_VEC2=35667]="INT_VEC2",a[a.INT_VEC3=35668]="INT_VEC3",a[a.INT_VEC4=35669]="INT_VEC4",a[a.BOOL=35670]="BOOL",a[a.BOOL_VEC2=35671]="BOOL_VEC2",a[a.BOOL_VEC3=35672]="BOOL_VEC3",a[a.BOOL_VEC4=35673]="BOOL_VEC4",a[a.FLOAT_MAT2=35674]="FLOAT_MAT2",a[a.FLOAT_MAT3=35675]="FLOAT_MAT3",a[a.FLOAT_MAT4=35676]="FLOAT_MAT4",a[a.SAMPLER_2D=35678]="SAMPLER_2D",a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE",a[a.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",a[a.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",a[a.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",a[a.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",a[a.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",a[a.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",a[a.COMPILE_STATUS=35713]="COMPILE_STATUS",a[a.LOW_FLOAT=36336]="LOW_FLOAT",a[a.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",a[a.HIGH_FLOAT=36338]="HIGH_FLOAT",a[a.LOW_INT=36339]="LOW_INT",a[a.MEDIUM_INT=36340]="MEDIUM_INT",a[a.HIGH_INT=36341]="HIGH_INT",a[a.FRAMEBUFFER=36160]="FRAMEBUFFER",a[a.RENDERBUFFER=36161]="RENDERBUFFER",a[a.RGBA4=32854]="RGBA4",a[a.RGB5_A1=32855]="RGB5_A1",a[a.RGB565=36194]="RGB565",a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",a[a.STENCIL_INDEX=6401]="STENCIL_INDEX",a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a[a.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",a[a.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",a[a.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",a[a.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",a[a.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",a[a.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",a[a.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",a[a.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",a[a.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",a[a.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",a[a.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",a[a.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",a[a.NONE=0]="NONE",a[a.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",a[a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",a[a.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",a[a.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",a[a.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",a[a.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",a[a.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",a[a.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",a[a.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",a[a.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",a[a.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",a}({});const mo=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{camelCase:Xa,isNil:Gu,upperFirst:T0}=oi;class yo{constructor(){(0,dt.Z)(this,"shaderModuleService",void 0),(0,dt.Z)(this,"rendererService",void 0),(0,dt.Z)(this,"config",void 0),(0,dt.Z)(this,"quad",mo),(0,dt.Z)(this,"enabled",!0),(0,dt.Z)(this,"renderToScreen",!1),(0,dt.Z)(this,"model",void 0),(0,dt.Z)(this,"name",void 0),(0,dt.Z)(this,"optionsToUpdate",{})}getName(){return this.name}setName(i){this.name=i}getType(){return Fd.PostProcessing}init(i,c){this.config=c,this.rendererService=i.getContainer().rendererService,this.shaderModuleService=i.getContainer().shaderModuleService;const{createAttribute:f,createBuffer:g,createModel:y}=this.rendererService,{vs:x,fs:w,uniforms:T}=this.setupShaders();this.model=y({vs:x,fs:w,attributes:{a_Position:f({buffer:g({data:[-4,-4,4,-4,0,4],type:q.FLOAT}),size:2})},uniforms:(0,nn.Z)((0,nn.Z)({u_Texture:null},T),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}render(i,c){const f=i.multiPassRenderer.getPostProcessor(),{useFramebuffer:g,getViewportSize:y,clear:x}=this.rendererService,{width:w,height:T}=y();g(this.renderToScreen?null:f.getWriteFBO(),()=>{x({framebuffer:f.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});const P=(0,nn.Z)({u_BloomFinal:0,u_Texture:f.getReadFBO(),u_ViewportSize:[w,T]},this.convertOptionsToUniforms(this.optionsToUpdate));c&&(P.u_BloomFinal=1,P.u_Texture2=c),this.model.draw({uniforms:P})})}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}setRenderToScreen(i){this.renderToScreen=i}updateOptions(i){this.optionsToUpdate=(0,nn.Z)((0,nn.Z)({},this.optionsToUpdate),i)}setupShaders(){throw new Error("Method not implemented.")}convertOptionsToUniforms(i){const c={};return Object.keys(i).forEach(f=>{Gu(i[f])||(c[`u_${T0(Xa(f))}`]=i[f])}),c}}function yc(a){let i=0;switch(a){case"vec2":case"ivec2":i=2;break;case"vec3":case"ivec3":i=3;break;case"vec4":case"ivec4":case"mat2":i=4;break;case"mat3":i=9;break;case"mat4":i=16;break;default:}return i}const xl=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function C0(a,i=!1){const c={};return a=a.replace(xl,(f,g,y)=>{const x=y.split(":"),w=x[0].trim();let T="";switch(x.length>1&&(T=x[1].trim()),g){case"bool":T=T==="true";break;case"float":case"int":T=Number(T);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":T?T=T.replace("[","").replace("]","").split(",").reduce((P,B)=>(P.push(Number(B.trim())),P),[]):T=new Array(yc(g)).fill(0);break;default:}return c[w]=T,`${i?"uniform ":""}${g} ${w};
`}),{content:a,uniforms:c}}function T1(a){let{content:i,uniforms:c}=C0(a,!0);return i=i.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(f,g,y)=>{y=y.trim().replace(/^.*$/gm,T=>`uniform ${T}`);const{content:x,uniforms:w}=C0(y);return Object.assign(c,w),`${g}{
${x}
};`}),{content:i,uniforms:c}}function C1(a){const i={};return a.replace(xl,(c,f,g)=>{const y=g.trim();return i[y]?"":(i[y]=!0,`uniform ${f} ${y};
`)})}const Sl=null;function BE(a){return Sl.indexOf(a)}const{clamp:Bd}=oi,jE=2,n6=4,M1=64,r6=128,jd=256,ir=512,qa=8192,Ps=16384,Po=32768,zd=null,L1=131072,i6=262144,P1=524288,$u=1048576,I1=2097152,o6=4194304,M0=8388608,zE=16777216,UE=null;function Ud(a,i){return a=Bd(Math.floor(a),0,255),i=Bd(Math.floor(i),0,255),256*a+i}function a6(a){const{color:i,radius:c,tileX:f,tileY:g,shape:y,opacity:x,stroke:w,strokeWidth:T,strokeOpacity:P}=a,B=[],U=[],G=[],mt=[Ud(i[0],i[1]),Ud(i[2],i[3])],Nt=[Ud(w[0],w[1]),Ud(w[2],w[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(([Qt,ye])=>{B.push([...mt,(Qt+1)*M0+(ye+1)*I1+getShapeIndex(y)*L1+c,(f+512)*P1+(g+512)*M1]),U.push([...Nt,T,P]),G.push([x,0,0,0])}),{packedBuffer:B,packedBuffer2:U,packedBuffer3:G}}function s6(a,i){if(a===0&&!i)return 0;if(a===1&&i)return 4294967295;const c=i?1:0,f=Math.floor(a*127);return f*UE+c*zE+f*L1+c*zd+f*ir+c*jd+f*jE+c}const bc={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};let Zd=function(a){return a.TOPRIGHT="topright",a.TOPLEFT="topleft",a.BOTTOMRIGHT="bottomright",a.BOTTOMLEFT="bottomleft",a.TOPCENTER="topcenter",a.BOTTOMCENTER="bottomcenter",a.LEFTCENTER="leftcenter",a.RIGHTCENTER="rightcenter",a.LEFTTOP="lefttop",a.RIGHTTOP="righttop",a.LEFTBOTTOM="leftbottom",a.RIGHTBOTTOM="rightbottom",a}({}),Hd=function(a){return a[a.LNGLAT=1]="LNGLAT",a[a.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",a[a.VECTOR_TILE=3]="VECTOR_TILE",a[a.IDENTITY=4]="IDENTITY",a[a.METER_OFFSET=5]="METER_OFFSET",a}({});const Is={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",RelativeOrigin:"u_RelativeOrigin"};var Ui={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};let Di=function(a){return a.Hover="hover",a.Click="click",a.Select="select",a.Active="active",a.Drag="drag",a}({}),ks=function(a){return a.normal="normal",a.additive="additive",a.subtractive="subtractive",a.min="min",a.max="max",a.none="none",a}({}),Ka=function(a){return a.MULTIPLE="MULTIPLE",a.SINGLE="SINGLE",a}({}),Yu=function(a){return a.AND="and",a.OR="or",a}({}),Yi=function(a){return a.INIT="init",a.UPDATE="update",a}({}),Fr=function(a){return a.LINEAR="linear",a.SEQUENTIAL="sequential",a.POWER="power",a.LOG="log",a.IDENTITY="identity",a.TIME="time",a.QUANTILE="quantile",a.QUANTIZE="quantize",a.THRESHOLD="threshold",a.CAT="cat",a.DIVERGING="diverging",a.CUSTOM="threshold",a}({}),Rs=function(a){return a.CONSTANT="constant",a.VARIABLE="variable",a}({}),Dn=function(a){return a[a.Attribute=0]="Attribute",a[a.InstancedAttribute=1]="InstancedAttribute",a[a.Uniform=2]="Uniform",a}({});const Vd=["mapload","mapchange","mapAfterFrameChange"];var L0=D(49296),Ol=D.n(L0);const Qa=30;function c6({characterSet:a,getFontWidth:i,fontHeight:c,buffer:f,maxCanvasWidth:g,mapping:y={},xOffset:x=0,yOffset:w=0}){let T=0,P=x;Array.from(a).forEach((U,G)=>{if(!y[U]){const mt=i(U,G);P+Qa>g&&(P=0,T++),y[U]={x:P,y:w+T*Qa,width:Qa,height:Qa,advance:mt},P+=Qa}});const B=c+f*2;return{mapping:y,xOffset:P,yOffset:w+T*B,canvasHeight:R1(w+(T+1)*B)}}function Io(a,i,c){let f=0,g=0,y=0,x=[];const w={};for(const P of a)if(!w[P.id]){const{size:B}=P;f+B+i>c&&(k1(w,x,g),f=0,g=y+g+i,y=0,x=[]),x.push({icon:P,xOffset:f}),f=f+B+i,y=Math.max(y,B)}x.length>0&&k1(w,x,g);const T=R1(y+g+i);return{mapping:w,canvasHeight:T}}function k1(a,i,c){for(const f of i){const{icon:g,xOffset:y}=f;a[g.id]=(0,nn.Z)((0,nn.Z)({},g),{},{x:y,y:c,image:g.image,width:g.width,height:g.height})}}function R1(a){return Math.pow(2,Math.ceil(Math.log2(a)))}const Wd=GE(),P0="sans-serif",D1="normal",N1=24,F1=3,ZE=.25,HE=8,B1=1024,VE=1,I0=1,WE=3,l6=null;function GE(){const a=[];for(let i=32;i<128;i++)a.push(String.fromCharCode(i));return a}function j1(a,i,c,f){a.font=`${f} ${c}px ${i}`,a.fillStyle="black",a.textBaseline="middle"}function k0(a,i){for(let c=0;c<a.length;c++)i.data[4*c+3]=a[c]}class $E extends Sr.EventEmitter{constructor(...i){super(...i),(0,dt.Z)(this,"fontAtlas",void 0),(0,dt.Z)(this,"iconFontMap",void 0),(0,dt.Z)(this,"iconFontGlyphs",{}),(0,dt.Z)(this,"fontOptions",void 0),(0,dt.Z)(this,"key",void 0),(0,dt.Z)(this,"cache",new bd(WE))}get scale(){return I0}get canvas(){const i=this.cache.get(this.key);return i&&i.data}get mapping(){const i=this.cache.get(this.key);return i&&i.mapping||{}}getCanvasByKey(i){const c=this.cache.get(i);return c&&c.data}getMappingByKey(i){const c=this.cache.get(i);return c&&c.mapping||{}}init(){this.cache.clear(),this.fontOptions={fontFamily:P0,fontWeight:D1,characterSet:Wd,fontSize:N1,buffer:F1,sdf:!0,cutoff:ZE,radius:HE,iconfont:!1},this.key="",this.iconFontMap=new Map}addIconGlyphs(i){i.forEach(c=>{this.iconFontGlyphs[c.name]=c.unicode})}addIconFont(i,c){this.iconFontMap.set(i,c)}getIconFontKey(i){return this.iconFontMap.get(i)||i}getGlyph(i){return this.iconFontGlyphs[i]?String.fromCharCode(parseInt(this.iconFontGlyphs[i],16)):""}setFontOptions(i){this.fontOptions=(0,nn.Z)((0,nn.Z)({},this.fontOptions),i),this.key=this.getKey();const c=this.getNewChars(this.key,this.fontOptions.characterSet),f=this.cache.get(this.key);if(f&&c.length===0)return;const g=this.generateFontAtlas(this.key,c,f);this.fontAtlas=g,this.cache.set(this.key,g)}addFontFace(i,c){const f=document.createElement("style");f.type="text/css",f.innerText=`
        @font-face{
            font-family: '${i}';
            src: url('${c}') format('woff2'),
            url('${c}') format('woff'),
            url('${c}') format('truetype');
        }`,f.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${i}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:i})})}catch(g){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(g)}},document.getElementsByTagName("head")[0].appendChild(f)}destroy(){this.cache.clear(),this.iconFontMap.clear()}generateFontAtlas(i,c,f){const{fontFamily:g,fontWeight:y,fontSize:x,buffer:w,sdf:T,radius:P,cutoff:B,iconfont:U}=this.fontOptions;let G=f&&f.data;G||(G=window.document.createElement("canvas"),G.width=B1);const mt=G.getContext("2d",{willReadFrequently:!0});j1(mt,g,x,y);const{mapping:Nt,canvasHeight:Qt,xOffset:ye,yOffset:Fe}=c6((0,nn.Z)({getFontWidth:Ve=>mt.measureText(Ve).width,fontHeight:x*I0,buffer:w,characterSet:c,maxCanvasWidth:B1},f&&{mapping:f.mapping,xOffset:f.xOffset,yOffset:f.yOffset})),ze=mt.getImageData(0,0,G.width,G.height);if(G.height=Qt,mt.putImageData(ze,0,0),j1(mt,g,x,y),T){const Ve=new(Ol())(x,w,P,B,g,y),tn=mt.getImageData(0,0,Ve.size,Ve.size);for(const pn of c){if(U){const Pn=String.fromCharCode(parseInt(pn.replace("&#x","").replace(";",""),16)),Tn=Ve.draw(Pn);k0(Tn,tn)}else k0(Ve.draw(pn),tn);mt.putImageData(tn,Nt[pn].x,Nt[pn].y)}}else for(const Ve of c)mt.fillText(Ve,Nt[Ve].x,Nt[Ve].y+x*VE);return{xOffset:ye,yOffset:Fe,mapping:Nt,data:G,width:G.width,height:G.height}}getKey(){const{fontFamily:i,fontWeight:c}=this.fontOptions;return`${i}_${c}`}getNewChars(i,c){const f=this.cache.get(i);if(!f)return c;const g=[],y=f.mapping,x=new Set(Object.keys(y));return new Set(c).forEach(T=>{x.has(T)||g.push(T)}),g}}var an=D(15861);const YE=3,Xi=1024,Xu=64;class XE extends Sr.EventEmitter{constructor(...i){super(...i),(0,dt.Z)(this,"canvasHeight",128),(0,dt.Z)(this,"texture",void 0),(0,dt.Z)(this,"canvas",void 0),(0,dt.Z)(this,"iconData",void 0),(0,dt.Z)(this,"iconMap",void 0),(0,dt.Z)(this,"ctx",void 0),(0,dt.Z)(this,"loadingImageCount",0)}isLoading(){return this.loadingImageCount===0}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}addImage(i,c){var f=this;return(0,an.Z)(function*(){let g=new Image;f.loadingImageCount++,f.hasImage(i)?console.warn("Image Id already exists"):f.iconData.push({id:i,size:Xu}),f.updateIconMap(),g=yield f.loadImage(c);const y=f.iconData.find(x=>x.id===i);y&&(y.image=g,y.width=g.width,y.height=g.height),f.update()})()}addImageMini(i,c,f){const g=f.getSceneConfig().canvas;let y=g.createImage();if(this.loadingImageCount++,this.hasImage(i))throw new Error("Image Id already exists");this.iconData.push({id:i,size:Xu}),this.updateIconMap(),this.loadImageMini(c,g).then(x=>{y=x;const w=this.iconData.find(T=>T.id===i);w&&(w.image=y,w.width=y.width,w.height=y.height),this.update()})}getTexture(){return this.texture}getIconMap(){return this.iconMap}getCanvas(){return this.canvas}hasImage(i){return this.iconMap.hasOwnProperty(i)}removeImage(i){this.hasImage(i)&&(this.iconData=this.iconData.filter(c=>c.id!==i),delete this.iconMap[i],this.update())}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}loadImage(i){return new Promise((c,f)=>{if(i instanceof HTMLImageElement){c(i);return}const g=new Image;g.crossOrigin="anonymous",g.onload=()=>{c(g)},g.onerror=()=>{f(new Error("Could not load image at "+i))},g.src=i instanceof File?URL.createObjectURL(i):i})}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}updateIconAtlas(){this.canvas.width=Xi,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(i=>{const{x:c,y:f,image:g,width:y=64,height:x=64}=this.iconMap[i],T=Math.max(y,x)/Xu,P=x/T,B=y/T;g&&this.ctx.drawImage(g,c+(Xu-B)/2,f+(Xu-P)/2,B,P)})}updateIconMap(){const{mapping:i,canvasHeight:c}=Io(this.iconData,YE,Xi);this.iconMap=i,this.canvasHeight=c}loadImageMini(i,c){return new Promise((f,g)=>{const y=c.createImage();y.crossOrigin="anonymous",y.onload=()=>{f(y)},y.onerror=()=>{g(new Error("Could not load image at "+i))},y.src=i})}}var Mr=D(85975);class qE{constructor(){(0,dt.Z)(this,"viewport",void 0),(0,dt.Z)(this,"overridedViewProjectionMatrix",void 0),(0,dt.Z)(this,"viewMatrixInverse",void 0),(0,dt.Z)(this,"cameraPosition",void 0)}init(){}update(i){this.viewport=i,this.viewMatrixInverse=Mr.create(),Mr.invert(this.viewMatrixInverse,i.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}getProjectionMatrix(){return this.viewport.getProjectionMatrix()}getModelMatrix(){return this.viewport.getModelMatrix()}getViewMatrix(){return this.viewport.getViewMatrix()}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered()}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}getZoom(){return this.viewport.getZoom()}getZoomScale(){return this.viewport.getZoomScale()}getCenter(){const[i,c]=this.viewport.getCenter();return[i,c]}getFocalDistance(){return this.viewport.getFocalDistance()}getCameraPosition(){return this.cameraPosition}projectFlat(i,c){return this.viewport.projectFlat(i,c)}setViewProjectionMatrix(i){this.overridedViewProjectionMatrix=i}}const Gd={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class R0{constructor(){(0,dt.Z)(this,"container",void 0),(0,dt.Z)(this,"controlCorners",void 0),(0,dt.Z)(this,"controlContainer",void 0),(0,dt.Z)(this,"scene",void 0),(0,dt.Z)(this,"mapsService",void 0),(0,dt.Z)(this,"controls",[]),(0,dt.Z)(this,"unAddControls",[])}init(i,c){this.container=i.container,this.scene=c,this.mapsService=c.mapService,this.initControlPos()}addControl(i,c){c.mapService.map?(i.addTo(this.scene),this.controls.push(i)):this.unAddControls.push(i)}getControlByName(i){return this.controls.find(c=>c.controlOption.name===i)}removeControl(i){const c=this.controls.indexOf(i);return c>-1&&this.controls.splice(c,1),i.remove(),this}addControls(){this.unAddControls.forEach(i=>{i.addTo(this.scene),this.controls.push(i)}),this.unAddControls=[]}destroy(){for(const i of this.controls)i.remove();this.controls=[],this.clearControlPos()}initControlPos(){const i=this.controlCorners={},c="l7-",f=this.controlContainer=$i("div",c+"control-container",this.container);function g(x=[]){const w=x.map(T=>c+T).join(" ");i[x.filter(T=>!["row","column"].includes(T)).join("")]=$i("div",w,f)}function y(x){return[...x.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),Gd[x]]}Object.values(Zd).forEach(x=>{g(y(x))}),this.checkCornerOverlap()}clearControlPos(){for(const i in this.controlCorners)this.controlCorners[i]&&Ha(this.controlCorners[i]);this.controlContainer&&Ha(this.controlContainer)}checkCornerOverlap(){const i=window.MutationObserver;if(i)for(const c of Object.keys(this.controlCorners)){const f=c.match(/^(top|bottom)(left|right)$/);if(f){const[,g,y]=f,x=this.controlCorners[`${g}${y}`];new i(([{target:T}])=>{x&&(x.style[g]=T.clientHeight+"px")}).observe(this.controlCorners[`${y}${g}`],{childList:!0,attributes:!0})}}}}class u6{constructor(){(0,dt.Z)(this,"container",void 0),(0,dt.Z)(this,"scene",void 0),(0,dt.Z)(this,"mapsService",void 0),(0,dt.Z)(this,"markers",[]),(0,dt.Z)(this,"markerLayers",[]),(0,dt.Z)(this,"unAddMarkers",[]),(0,dt.Z)(this,"unAddMarkerLayers",[])}addMarkerLayer(i){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(i),i.addTo(this.scene)):this.unAddMarkerLayers.push(i)}removeMarkerLayer(i){i.destroy(),this.markerLayers.indexOf(i);const c=this.markerLayers.indexOf(i);c>-1&&this.markerLayers.splice(c,1)}addMarker(i){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(i),i.addTo(this.scene)):this.unAddMarkers.push(i)}addMarkers(){this.unAddMarkers.forEach(i=>{i.addTo(this.scene),this.markers.push(i)}),this.unAddMarkers=[]}addMarkerLayers(){this.unAddMarkerLayers.forEach(i=>{this.markerLayers.push(i),i.addTo(this.scene)}),this.unAddMarkers=[]}removeMarker(i){i.remove(),this.markers.indexOf(i);const c=this.markers.indexOf(i);c>-1&&this.markers.splice(c,1)}removeAllMarkers(){this.destroy()}init(i){this.scene=i,this.mapsService=i.mapService}destroy(){this.markers.forEach(i=>{i.remove()}),this.markers=[],this.markerLayers.forEach(i=>{i.destroy()}),this.markerLayers=[]}removeMakerLayerMarker(i){i.destroy()}}class z1{constructor(){(0,dt.Z)(this,"scene",void 0),(0,dt.Z)(this,"mapsService",void 0),(0,dt.Z)(this,"popups",[]),(0,dt.Z)(this,"unAddPopups",[])}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}removePopup(i){i!=null&&i.isOpen()&&i.remove();const c=this.popups.indexOf(i);c>-1&&this.popups.splice(c,1);const f=this.unAddPopups.indexOf(i);f>-1&&this.unAddPopups.splice(f,1)}destroy(){this.popups.forEach(i=>i.remove())}addPopup(i){i&&i.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(c=>{c.getOptions().autoClose&&this.removePopup(c)}),this.isMarkerReady?(i.addTo(this.scene),this.popups.push(i)):this.unAddPopups.push(i),i.on("close",()=>{this.removePopup(i)})}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(i=>{this.addPopup(i),this.unAddPopups=[]})}init(i){this.scene=i,this.mapsService=i.mapService}}var U1={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"};const{merge:Z1}=oi,D0={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},QE={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:Yu.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};class JE{constructor(){(0,dt.Z)(this,"sceneConfigCache",{}),(0,dt.Z)(this,"layerConfigCache",{}),(0,dt.Z)(this,"layerAttributeConfigCache",{})}getSceneConfig(i){return this.sceneConfigCache[i]}getSceneWarninfo(i){return U1[i]}setSceneConfig(i,c){this.sceneConfigCache[i]=(0,nn.Z)((0,nn.Z)({},D0),c)}getLayerConfig(i){return this.layerConfigCache[i]}setLayerConfig(i,c,f){this.layerConfigCache[c]=(0,nn.Z)({},Z1({},this.sceneConfigCache[i],QE,f))}getAttributeConfig(i){return this.layerAttributeConfigCache[i]}setAttributeConfig(i,c){this.layerAttributeConfigCache[i]=(0,nn.Z)((0,nn.Z)({},this.layerAttributeConfigCache[i]),c)}clean(){this.sceneConfigCache={},this.layerConfigCache={}}}var _c=D(98333);const Zi=Math.PI/180,N0=512,qu=4003e4;function El({latitude:a=0,zoom:i=0,scale:c,highPrecision:f=!1,flipY:g=!1}){c=c!==void 0?c:Math.pow(2,i);const y={},x=N0*c,w=Math.cos(a*Zi),T=x/360,P=T/w,B=x/qu/w;if(y.pixelsPerMeter=[B,-B,B],y.metersPerPixel=[1/B,-1/B,1/B],y.pixelsPerDegree=[T,-P,B],y.degreesPerPixel=[1/T,-1/P,1/B],f){const U=Zi*Math.tan(a*Zi)/w,G=T*U/2,mt=x/qu*U,Nt=mt/P*B;y.pixelsPerDegree2=[0,-G,mt],y.pixelsPerMeter2=[Nt,0,Nt],g&&(y.pixelsPerDegree2[1]=-y.pixelsPerDegree2[1],y.pixelsPerMeter2[1]=-y.pixelsPerMeter2[1])}return g&&(y.pixelsPerMeter[1]=-y.pixelsPerMeter[1],y.metersPerPixel[1]=-y.metersPerPixel[1],y.pixelsPerDegree[1]=-y.pixelsPerDegree[1],y.degreesPerPixel[1]=-y.degreesPerPixel[1]),y}const Ku=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class tw{constructor(i){(0,dt.Z)(this,"needRefresh",!0),(0,dt.Z)(this,"coordinateSystem",void 0),(0,dt.Z)(this,"viewportCenter",void 0),(0,dt.Z)(this,"viewportCenterProjection",void 0),(0,dt.Z)(this,"pixelsPerDegree",void 0),(0,dt.Z)(this,"pixelsPerDegree2",void 0),(0,dt.Z)(this,"pixelsPerMeter",void 0),this.cameraService=i}refresh(i){const c=this.cameraService.getZoom(),f=i||this.cameraService.getCenter(),{pixelsPerMeter:g,pixelsPerDegree:y}=El({latitude:f[1],zoom:c});this.viewportCenter=f,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=g,this.pixelsPerDegree=y,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Hd.LNGLAT?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Hd.LNGLAT_OFFSET&&this.calculateLnglatOffset(f,c),this.needRefresh=!1}getCoordinateSystem(){return this.coordinateSystem}setCoordinateSystem(i){this.coordinateSystem=i}getViewportCenter(){return this.viewportCenter}setViewportCenter(i){this.refresh(i)}getViewportCenterProjection(){return this.viewportCenterProjection}getPixelsPerDegree(){return this.pixelsPerDegree}getPixelsPerDegree2(){return this.pixelsPerDegree2}getPixelsPerMeter(){return this.pixelsPerMeter}calculateLnglatOffset(i,c,f,g){const{pixelsPerMeter:y,pixelsPerDegree:x,pixelsPerDegree2:w}=El({latitude:i[1],zoom:c,scale:f,flipY:g,highPrecision:!0});let T=this.cameraService.getViewMatrix();const P=this.cameraService.getProjectionMatrix();let B=Mr.multiply([],P,T);const U=this.cameraService.projectFlat([Math.fround(i[0]),Math.fround(i[1])],Math.pow(2,c));this.viewportCenterProjection=_c.fF([],[U[0],U[1],0,1],B),T=this.cameraService.getViewMatrixUncentered()||T,B=Mr.multiply([],P,T),B=Mr.multiply([],B,Ku),this.cameraService.setViewProjectionMatrix(B),this.pixelsPerMeter=y,this.pixelsPerDegree=x,this.pixelsPerDegree2=w}}class ew extends Sr.EventEmitter{constructor(...i){super(...i),(0,dt.Z)(this,"renderMap",new Map),(0,dt.Z)(this,"enable",!1),(0,dt.Z)(this,"renderEnable",!1),(0,dt.Z)(this,"cacheLogs",{})}setEnable(i){this.enable=!!i}log(i,c){if(!this.enable)return;const f=i.split(".");let g=null;f.forEach((y,x)=>{g!==null?(g[y]||(g[y]={}),x!==f.length-1&&(g=g[y])):(this.cacheLogs[y]||(this.cacheLogs[y]={}),x!==f.length-1&&(g=this.cacheLogs[y])),x===f.length-1&&(g[y]=(0,nn.Z)((0,nn.Z)({time:Date.now()},g[y]),c))})}getLog(i){switch(typeof i){case"string":return this.cacheLogs[i];case"object":return i.map(c=>this.cacheLogs[c]).filter(c=>c!==void 0);case"undefined":return this.cacheLogs}}removeLog(i){delete this.cacheLogs[i]}generateRenderUid(){return this.renderEnable?RO():""}renderDebug(i){this.renderEnable=i}renderStart(i){if(!this.renderEnable||!this.enable)return;const c=this.renderMap.get(i)||{};this.renderMap.set(i,(0,nn.Z)((0,nn.Z)({},c),{},{renderUid:i,renderStart:Date.now()}))}renderEnd(i){if(!this.renderEnable||!this.enable)return;const c=this.renderMap.get(i);if(c){const f=c.renderStart,g=Date.now();this.emit("renderEnd",(0,nn.Z)((0,nn.Z)({},c),{},{renderEnd:g,renderDuration:g-f})),this.renderMap.delete(i)}}destroy(){this.cacheLogs=null,this.renderMap.clear()}}var nw=D(50840),Qu=D.n(nw);const H1={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class V1 extends Jp(){get mapService(){return this.container.mapService}constructor(i){super(),(0,dt.Z)(this,"indragging",!1),(0,dt.Z)(this,"hammertime",void 0),(0,dt.Z)(this,"lastClickTime",0),(0,dt.Z)(this,"lastClickXY",[-1,-1]),(0,dt.Z)(this,"clickTimer",void 0),(0,dt.Z)(this,"$containter",void 0),(0,dt.Z)(this,"onDrag",c=>{const f=this.interactionEvent(c);f.type=H1[f.type],f.type==="dragging"?this.indragging=!0:this.indragging=!1,this.emit(Di.Drag,f)}),(0,dt.Z)(this,"onHammer",c=>{c.srcEvent.stopPropagation();const f=this.interactionEvent(c);this.emit(Di.Hover,f)}),(0,dt.Z)(this,"onTouch",c=>{const f=c.touches[0];this.onHover({clientX:f.clientX,clientY:f.clientY,type:"touchstart"})}),(0,dt.Z)(this,"onTouchEnd",c=>{if(c.changedTouches.length>0){const f=c.changedTouches[0];this.onHover({clientX:f.clientX,clientY:f.clientY,type:"touchend"})}}),(0,dt.Z)(this,"onTouchMove",c=>{const f=c.changedTouches[0];this.onHover({clientX:f.clientX,clientY:f.clientY,type:"touchmove"})}),(0,dt.Z)(this,"onHover",c=>{const{clientX:f,clientY:g}=c;let y=f,x=g;const w=c.type,T=this.mapService.getMapContainer();if(T){const{top:B,left:U}=T.getBoundingClientRect();y=y-U-T.clientLeft,x=x-B-T.clientTop}const P=this.mapService.containerToLngLat([y,x]);if(w==="click"){this.isDoubleTap(y,x,P);return}if(w==="touch"){this.isDoubleTap(y,x,P);return}w!=="click"&&w!=="dblclick"&&this.emit(Di.Hover,{x:y,y:x,lngLat:P,type:w,target:c})}),this.container=i}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Di.Hover)}triggerHover({x:i,y:c}){this.emit(Di.Hover,{x:i,y:c})}triggerSelect(i){this.emit(Di.Select,{featureId:i})}triggerActive(i){this.emit(Di.Active,{featureId:i})}addEventListenerOnMap(){const i=this.mapService.getMapContainer();if(i){const c=new(Qu()).Manager(i);c.add(new(Qu()).Tap({event:"dblclick",taps:2})),c.add(new(Qu()).Tap({event:"click"})),c.add(new(Qu()).Pan({threshold:0,pointers:0})),c.add(new(Qu()).Press({})),c.on("dblclick click",this.onHammer),c.on("panstart panmove panend pancancel",this.onDrag),i.addEventListener("touchstart",this.onTouch),i.addEventListener("touchend",this.onTouchEnd),i.addEventListener("mousemove",this.onHover),i.addEventListener("touchmove",this.onTouchMove),i.addEventListener("mousedown",this.onHover,!0),i.addEventListener("mouseup",this.onHover),i.addEventListener("contextmenu",this.onHover),this.hammertime=c}}removeEventListenerOnMap(){const i=this.mapService.getMapContainer();i&&(i.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),i.removeEventListener("touchstart",this.onTouch),i.removeEventListener("touchend",this.onTouchEnd),i.removeEventListener("mousedown",this.onHover),i.removeEventListener("mouseup",this.onHover),i.removeEventListener("contextmenu",this.onHover))}interactionEvent(i){const{type:c,pointerType:f}=i;let g,y;f==="touch"?(y=Math.floor(i.pointers[0].clientY),g=Math.floor(i.pointers[0].clientX)):(y=Math.floor(i.srcEvent.y),g=Math.floor(i.srcEvent.x));const x=this.mapService.getMapContainer();if(x){const{top:T,left:P}=x.getBoundingClientRect();g-=P,y-=T}const w=this.mapService.containerToLngLat([g,y]);return{x:g,y,lngLat:w,type:c,target:i.srcEvent}}isDoubleTap(i,c,f){const g=new Date().getTime();let y="click";g-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-i)<10&&Math.abs(this.lastClickXY[1]-c)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),y="dblclick",this.emit(Di.Hover,{x:i,y:c,lngLat:f,type:y})):(this.lastClickTime=g,this.lastClickXY=[i,c],this.clickTimer=setTimeout(()=>{y="click",this.emit(Di.Hover,{x:i,y:c,lngLat:f,type:y})},400))}}let f6=0;function rw(a){let i=a;if(typeof a=="string"&&(i=document.getElementById(a)),i){const c=document.createElement("div");return c.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,c.id=`l7-scene-${f6++}`,c.classList.add("l7-scene"),i.appendChild(c),c}return null}function iw(a){var i;let c=!0;if((a==null||(i=a.target)===null||i===void 0?void 0:i.target)instanceof HTMLElement){var f;let y=a==null||(f=a.target)===null||f===void 0?void 0:f.target;for(;y;){var g;const x=Array.from(y.classList);if(x.includes("l7-marker")||x.includes("l7-popup")){c=!1;break}y=(g=y)===null||g===void 0?void 0:g.parentElement}}return c}let Ds=function(a){return a[a.SAMPLED=0]="SAMPLED",a[a.RENDER_TARGET=1]="RENDER_TARGET",a}({});class F0{constructor(i){var c=this;(0,dt.Z)(this,"pickedColors",void 0),(0,dt.Z)(this,"pickedTileLayers",[]),(0,dt.Z)(this,"pickingFBO",void 0),(0,dt.Z)(this,"width",0),(0,dt.Z)(this,"height",0),(0,dt.Z)(this,"alreadyInPicking",!1),(0,dt.Z)(this,"pickBufferScale",1),(0,dt.Z)(this,"pickFromPickingFBO",function(){var f=(0,an.Z)(function*(g,{x:y,y:x,lngLat:w,type:T,target:P}){var B;let U=!1;const{readPixels:G,readPixelsAsync:mt,getViewportSize:Nt,queryVerdorInfo:Qt}=c.rendererService,{width:ye,height:Fe}=Nt(),{enableHighlight:ze,enableSelect:Ve}=g.getLayerConfig(),tn=y*vo,pn=x*vo;if(tn>ye-1*vo||tn<0||pn>Fe-1*vo||pn<0)return!1;let Pn;if(Qt()==="WebGPU"?Pn=yield mt({x:Math.floor(tn/c.pickBufferScale),y:Math.floor((Fe-(x+1)*vo)/c.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:c.pickingFBO}):Pn=G({x:Math.floor(tn/c.pickBufferScale),y:Math.floor((Fe-(x+1)*vo)/c.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:c.pickingFBO}),c.pickedColors=Pn,Pn[0]!==0||Pn[1]!==0||Pn[2]!==0){const kn=uc(Pn),or=g.layerPickService.getFeatureById(kn);kn!==g.getCurrentPickId()&&T==="mousemove"&&(T="mouseenter");const wr={x:y,y:x,type:T,lngLat:w,featureId:kn,feature:or,target:P};or&&(U=!0,g.setCurrentPickId(kn),c.triggerHoverOnLayer(g,wr))}else{const kn={x:y,y:x,lngLat:w,type:g.getCurrentPickId()!==null&&T==="mousemove"?"mouseout":"un"+T,featureId:null,target:P,feature:null};c.triggerHoverOnLayer(g,(0,nn.Z)((0,nn.Z)({},kn),{},{type:"unpick"})),c.triggerHoverOnLayer(g,kn),g.setCurrentPickId(null)}if(ze&&g.layerPickService.highlightPickedFeature(Pn),Ve&&T==="click"&&((B=Pn)===null||B===void 0?void 0:B.toString())!==[0,0,0,0].toString()){const kn=uc(Pn);g.getCurrentSelectedId()===null||kn!==g.getCurrentSelectedId()?(g.layerPickService.selectFeature(Pn),g.setCurrentSelectedId(kn)):(g.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),g.setCurrentSelectedId(null))}return U});return function(g,y){return f.apply(this,arguments)}}()),this.container=i}get mapService(){return this.container.mapService}get rendererService(){return this.container.rendererService}get configService(){return this.container.globalConfigService}get interactionService(){return this.container.interactionService}get layerService(){return this.container.layerService}init(i){const{createTexture2D:c,createFramebuffer:f,getViewportSize:g}=this.rendererService;let{width:y,height:x}=g();this.pickBufferScale=this.configService.getSceneConfig(i).pickBufferScale||1,y=Math.round(y/this.pickBufferScale),x=Math.round(x/this.pickBufferScale);const w=c({width:y,height:x,usage:Ds.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=f({color:w,depth:!0,width:y,height:x}),this.interactionService.on(Di.Hover,this.pickingAllLayer.bind(this))}boxPickLayer(i,c,f){var g=this;return(0,an.Z)(function*(){const{useFramebufferAsync:y,clear:x}=g.rendererService;g.resizePickingFBO(),i.hooks.beforePickingEncode.call(),yield y(g.pickingFBO,(0,an.Z)(function*(){x({framebuffer:g.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),i.renderModels({ispick:!0})})),i.hooks.afterPickingEncode.call();const w=yield g.pickBox(i,c);f(w)})()}pickBox(i,c){var f=this;return(0,an.Z)(function*(){const[g,y,x,w]=c.map(Fe=>{const ze=Fe<0?0:Fe;return Math.floor(ze*vo/f.pickBufferScale)}),{readPixelsAsync:T,getViewportSize:P}=f.rendererService,{width:B,height:U}=P();if(g>(B-1)*vo/f.pickBufferScale||x<0||y>(U-1)*vo/f.pickBufferScale||w<0)return[];const G=Math.min(B/f.pickBufferScale,x)-g,mt=Math.min(U/f.pickBufferScale,w)-y,Nt=yield T({x:g,y:Math.floor(U/f.pickBufferScale-(w+1)),width:G,height:mt,data:new Uint8Array(G*mt*4),framebuffer:f.pickingFBO}),Qt=[],ye={};for(let Fe=0;Fe<Nt.length/4;Fe=Fe+1){const ze=Nt.slice(Fe*4,Fe*4+4),Ve=uc(ze);if(Ve!==-1&&!ye[Ve]){const tn=i.layerPickService.getFeatureById(Ve);Qt.push((0,nn.Z)((0,nn.Z)({},tn),{},{pickedFeatureIdx:Ve})),ye[Ve]=!0}}return Qt})()}handleCursor(i,c){const{cursor:f="",cursorEnabled:g}=i.getLayerConfig();if(g){const x=this.mapService.getType()==="amap"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),w=x==null?void 0:x.style.getPropertyValue("cursor");c==="unmousemove"&&w!==""?x==null||x.style.setProperty("cursor",""):c==="mousemove"&&(x==null||x.style.setProperty("cursor",f))}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null}pickingAllLayer(i){var c=this;return(0,an.Z)(function*(){!c.layerService.needPick(i.type)||!c.isPickingAllLayer()||(c.alreadyInPicking=!0,yield c.pickingLayers(i),c.layerService.renderLayers(),c.alreadyInPicking=!1)})()}isPickingAllLayer(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}resizePickingFBO(){const{getViewportSize:i}=this.rendererService,{width:c,height:f}=i();(this.width!==c||this.height!==f)&&(this.pickingFBO.resize({width:Math.round(c/this.pickBufferScale),height:Math.round(f/this.pickBufferScale)}),this.width=c,this.height=f)}pickingLayers(i){var c=this;return(0,an.Z)(function*(){const{clear:f,useFramebufferAsync:g}=c.rendererService;c.resizePickingFBO();const y=c.layerService.getRenderList();for(const x of y.filter(w=>w.needPick(i.type)).reverse()){yield g(c.pickingFBO,(0,an.Z)(function*(){f({framebuffer:c.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),x.layerPickService.pickRender(i)}));const w=yield c.pickFromPickingFBO(x,i);if(c.layerService.pickedLayerId=w?+x.id:-1,w&&!x.getLayerConfig().enablePropagation)break}})()}triggerHoverOnLayer(i,c){iw(c)&&(this.handleCursor(i,c.type),i.emit(c.type,c))}}class ow{constructor(i=!0){(0,dt.Z)(this,"autoStart",void 0),(0,dt.Z)(this,"startTime",0),(0,dt.Z)(this,"oldTime",0),(0,dt.Z)(this,"running",!1),(0,dt.Z)(this,"elapsedTime",0),this.autoStart=i}start(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let i=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const c=(typeof performance=="undefined"?Date:performance).now();i=(c-this.oldTime)/1e3,this.oldTime=c,this.elapsedTime+=i}return i}}const{throttle:W1}=oi;class d6 extends Sr.EventEmitter{get renderService(){return this.container.rendererService}get mapService(){return this.container.mapService}get debugService(){return this.container.debugService}constructor(i){super(),(0,dt.Z)(this,"pickedLayerId",-1),(0,dt.Z)(this,"clock",new ow),(0,dt.Z)(this,"alreadyInRendering",!1),(0,dt.Z)(this,"layers",[]),(0,dt.Z)(this,"layerList",[]),(0,dt.Z)(this,"layerRenderID",void 0),(0,dt.Z)(this,"sceneInited",!1),(0,dt.Z)(this,"animateInstanceCount",0),(0,dt.Z)(this,"shaderPicking",!0),(0,dt.Z)(this,"enableRender",!0),(0,dt.Z)(this,"reRender",W1(()=>{this.renderLayers()},32)),(0,dt.Z)(this,"throttleRenderLayers",W1(()=>{this.renderLayers()},16)),this.container=i}needPick(i){return this.updateLayerRenderList(),this.layerList.some(c=>c.needPick(i))}add(i){this.layers.push(i),this.sceneInited&&i.init().then(()=>{this.renderLayers()})}addMask(i){this.sceneInited&&i.init().then(()=>{this.renderLayers()})}initLayers(){var i=this;return(0,an.Z)(function*(){i.sceneInited=!0,i.layers.forEach(function(){var c=(0,an.Z)(function*(f){f.startInit||(yield f.init(),i.updateLayerRenderList())});return function(f){return c.apply(this,arguments)}}())})()}getSceneInited(){return this.sceneInited}getRenderList(){return this.layerList}getLayers(){return this.layers}getLayer(i){return this.layers.find(c=>c.id===i)}getLayerByName(i){return this.layers.find(c=>c.name===i)}remove(i,c){var f=this;return(0,an.Z)(function*(){if(c){c.layerChildren||(c.layerChildren=[]);const g=c.layerChildren.findIndex(y=>y.id===i.id);g>-1&&c.layerChildren.splice(g,1)}else{const g=f.layers.findIndex(y=>y.id===i.id);g>-1&&f.layers.splice(g,1)}i.destroy(),f.reRender(),f.emit("layerChange",f.layers)})()}removeAllLayers(){var i=this;return(0,an.Z)(function*(){i.destroy(),i.reRender()})()}setEnableRender(i){this.enableRender=i}renderLayers(){var i=this;return(0,an.Z)(function*(){if(i.alreadyInRendering||!i.enableRender)return;i.updateLayerRenderList();const c=i.debugService.generateRenderUid();i.debugService.renderStart(c),i.alreadyInRendering=!0,i.clear();for(const f of i.layerList)f.prerender();i.renderService.beginFrame();for(const f of i.layerList){const{enableMask:g}=f.getLayerConfig();f.masks.filter(y=>y.inited).length>0&&g&&i.renderMask(f.masks),f.getLayerConfig().enableMultiPassRenderer?yield f.renderMultiPass():f.render()}i.renderService.endFrame(),i.debugService.renderEnd(c),i.alreadyInRendering=!1})()}renderMask(i){let c=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});const f=i.length>1?Ka.MULTIPLE:Ka.SINGLE;for(const g of i)g.render({isStencil:!0,stencilType:f,stencilIndex:c++})}beforeRenderData(i){var c=this;return(0,an.Z)(function*(){(yield i.hooks.beforeRenderData.promise())&&c.renderLayers()})()}renderTileLayerMask(i){let c=0;const{enableMask:f=!0}=i.getLayerConfig();let g=i.tileMask?1:0;const y=i.masks.filter(w=>w.inited);g=g+(f?y.length:1);const x=g>1?Ka.MULTIPLE:Ka.SINGLE;if((i.tileMask||y.length&&f)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),y.length&&f)for(const w of y)w.render({isStencil:!0,stencilType:x,stencilIndex:c++});i.tileMask&&i.tileMask.render({isStencil:!0,stencilType:x,stencilIndex:c++,stencilOperation:Yu.OR})}renderTileLayer(i){var c=this;return(0,an.Z)(function*(){c.renderTileLayerMask(i),i.getLayerConfig().enableMultiPassRenderer?yield i.renderMultiPass():yield i.render()})()}updateLayerRenderList(){this.layerList=[],this.layers.filter(i=>i.inited).filter(i=>i.isVisible()).sort((i,c)=>i.zIndex-c.zIndex).forEach(i=>{this.layerList.push(i)})}destroy(){this.layers.forEach(i=>{i.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}startAnimate(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}stopAnimate(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float}enableShaderPick(){this.shaderPicking=!0}disableShaderPick(){this.shaderPicking=!1}getShaderPickStat(){return this.shaderPicking}clear(){const i=Ur(this.mapService.bgColor);this.renderService.clear({color:i,depth:1,stencil:0,framebuffer:null})}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}stopRender(){window.cancelAnimationFrame(this.layerRenderID)}}var ha=D(91);const{isNil:h6}=oi;class aw{constructor(i){(0,dt.Z)(this,"name",void 0),(0,dt.Z)(this,"type",void 0),(0,dt.Z)(this,"scale",void 0),(0,dt.Z)(this,"descriptor",void 0),(0,dt.Z)(this,"featureBufferLayout",[]),(0,dt.Z)(this,"needRescale",!1),(0,dt.Z)(this,"needRemapping",!1),(0,dt.Z)(this,"needRegenerateVertices",!1),(0,dt.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,dt.Z)(this,"vertexAttribute",void 0),(0,dt.Z)(this,"defaultCallback",c=>{if(c.length===0){var f;return((f=this.scale)===null||f===void 0?void 0:f.defaultValues)||[]}return c.map((g,y)=>{var x;return((x=this.scale)===null||x===void 0?void 0:x.scalers[y].func)(g)})}),this.setProps(i)}setProps(i){Object.assign(this,i)}mapping(i){var c;if((c=this.scale)!==null&&c!==void 0&&c.callback){var f;const g=(f=this.scale)===null||f===void 0?void 0:f.callback(...i);if(!h6(g))return[g]}return this.defaultCallback(i)}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[])}}const p6=["buffer","update","name"],sw=["buffer","update","name"],cw={[q.FLOAT]:4,[q.UNSIGNED_BYTE]:1,[q.UNSIGNED_SHORT]:2};class lw{constructor(i){(0,dt.Z)(this,"attributesAndIndices",void 0),(0,dt.Z)(this,"attributes",[]),(0,dt.Z)(this,"triangulation",void 0),(0,dt.Z)(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=i}registerStyleAttribute(i){let c=this.getLayerStyleAttribute(i.name||"");return c?c.setProps(i):(c=new aw(i),this.attributes.push(c)),c}unRegisterStyleAttribute(i){const c=this.attributes.findIndex(f=>f.name===i);c>-1&&this.attributes.splice(c,1)}updateScaleAttribute(i){this.attributes.forEach(c=>{var f;const g=c.name,y=(f=c.scale)===null||f===void 0?void 0:f.field;(i[g]||y&&i[y])&&(c.needRescale=!0,c.needRemapping=!0,c.needRegenerateVertices=!0)})}updateStyleAttribute(i,c,f){let g=this.getLayerStyleAttribute(i);g||(g=this.registerStyleAttribute((0,nn.Z)((0,nn.Z)({},c),{},{name:i})));const{scale:y}=c;y&&g&&(g.scale=y,g.needRescale=!0,g.needRemapping=!0,g.needRegenerateVertices=!0,f&&f.featureRange&&(g.featureRange=f.featureRange))}getLayerStyleAttributes(){return this.attributes}getLayerStyleAttribute(i){return this.attributes.find(c=>c.name===i)}getLayerAttributeScale(i){var c;const f=this.getLayerStyleAttribute(i),g=f==null||(c=f.scale)===null||c===void 0?void 0:c.scalers;return g&&g[0]?g[0].func:null}updateAttributeByFeatureRange(i,c,f=0,g,y){const x=this.attributes.find(w=>w.name===i);if(x&&x.descriptor){const{descriptor:w}=x,{update:T,buffer:P,size:B=0}=w,U=cw[P.type||q.FLOAT];if(T){const{elements:G,sizePerElement:mt}=this.featureLayout,Nt=G.slice(f,g);if(!Nt.length)return;const{offset:Qt}=Nt[0],ye=Qt*B*U,Fe=Nt.map(({featureIdx:ze,vertices:Ve,normals:tn},pn)=>{const Pn=Ve.length/mt,Tn=[];for(let kn=0;kn<Pn;kn++){const or=tn?tn.slice(kn*3,kn*3+3):[];Tn.push(...T(c[ze],ze,Ve.slice(kn*mt,kn*mt+mt),pn,or))}return Tn}).flat();x.vertexAttribute.updateBuffer({data:Fe,offset:ye}),y==null||y.emit(`legend:${i}`,y.getLegend(i))}}}createAttributesAndIndices(i,c,f,g){this.featureLayout={sizePerElement:0,elements:[]},c&&(this.triangulation=c);const y=this.attributes.map(Qt=>(Qt.resetDescriptor(),Qt.descriptor));let x=0,w=0;const T=[];let P=3;i.forEach((Qt,ye)=>{const{indices:Fe,vertices:ze,normals:Ve,size:tn,indexes:pn,count:Pn}=this.triangulation(Qt,f);typeof Pn=="number"&&(w+=Pn),Fe.forEach(kn=>{T.push(kn+x)}),P=tn;const Tn=ze.length/tn;this.featureLayout.sizePerElement=P,this.featureLayout.elements.push({featureIdx:ye,vertices:ze,normals:Ve,offset:x}),x+=Tn;for(let kn=0;kn<Tn;kn++){const or=(Ve==null?void 0:Ve.slice(kn*3,kn*3+3))||[],wr=ze.slice(kn*tn,kn*tn+tn);let qn=0;pn&&pn[kn]!==void 0&&(qn=pn[kn]),y.forEach((fr,Br)=>{fr&&fr.update&&fr.buffer.data.push(...fr.update(Qt,ye,wr,kn,or,qn))})}});const{createAttribute:B,createBuffer:U,createElements:G}=this.rendererService,mt={};y.forEach((Qt,ye)=>{if(Qt){const{buffer:Fe,update:ze,name:Ve}=Qt,tn=(0,ha.Z)(Qt,p6),pn=B((0,nn.Z)({buffer:U(Fe)},tn));mt[Qt.name||""]=pn,this.attributes[ye].vertexAttribute=pn}});const Nt=G({data:T,type:q.UNSIGNED_INT,count:T.length});return this.attributesAndIndices={attributes:mt,elements:Nt,count:w},Object.values(this.attributes).filter(Qt=>Qt.scale).forEach(Qt=>{const ye=Qt.name;g==null||g.emit(`legend:${ye}`,g.getLegend(ye))}),this.attributesAndIndices}createAttributes(i,c){this.featureLayout={sizePerElement:0,elements:[]},c&&(this.triangulation=c);const f=this.attributes.map(B=>(B.resetDescriptor(),B.descriptor));let g=0;const y=[];let x=3;i.forEach((B,U)=>{const{indices:G,vertices:mt,normals:Nt,size:Qt,indexes:ye}=this.triangulation(B);G.forEach(ze=>{y.push(ze+g)}),x=Qt;const Fe=mt.length/Qt;this.featureLayout.sizePerElement=x,this.featureLayout.elements.push({featureIdx:U,vertices:mt,normals:Nt,offset:g}),g+=Fe;for(let ze=0;ze<Fe;ze++){const Ve=(Nt==null?void 0:Nt.slice(ze*3,ze*3+3))||[],tn=mt.slice(ze*Qt,ze*Qt+Qt);let pn=0;ye&&ye[ze]!==void 0&&(pn=ye[ze]),f.forEach((Pn,Tn)=>{Pn&&Pn.update&&Pn.buffer.data.push(...Pn.update(B,U,tn,ze,Ve,pn))})}});const{createAttribute:w,createBuffer:T}=this.rendererService,P={};return f.forEach((B,U)=>{if(B){const{buffer:G,update:mt,name:Nt}=B,Qt=(0,ha.Z)(B,sw),ye=w((0,nn.Z)({buffer:T(G)},Qt));P[B.name||""]=ye,this.attributes[U].vertexAttribute=ye}}),{attributes:P}}clearAllAttributes(){var i;this.attributes.forEach(c=>{c.vertexAttribute&&c.vertexAttribute.destroy()}),(i=this.attributesAndIndices)===null||i===void 0||i.elements.destroy(),this.attributes=[]}}var B0=D(34155);function j0(a,i,c,f){function g(y){return y instanceof c?y:new c(function(x){x(y)})}return new(c||(c=Promise))(function(y,x){function w(B){try{P(f.next(B))}catch(U){x(U)}}function T(B){try{P(f.throw(B))}catch(U){x(U)}}function P(B){B.done?y(B.value):g(B.value).then(w,T)}P((f=f.apply(a,i||[])).next())})}function z0(a,i){var c={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},f,g,y,x;return x={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function w(P){return function(B){return T([P,B])}}function T(P){if(f)throw new TypeError("Generator is already executing.");for(;c;)try{if(f=1,g&&(y=P[0]&2?g.return:P[0]?g.throw||((y=g.return)&&y.call(g),0):g.next)&&!(y=y.call(g,P[1])).done)return y;switch(g=0,y&&(P=[P[0]&2,y.value]),P[0]){case 0:case 1:y=P;break;case 4:return c.label++,{value:P[1],done:!1};case 5:c.label++,g=P[1],P=[0];continue;case 7:P=c.ops.pop(),c.trys.pop();continue;default:if(y=c.trys,!(y=y.length>0&&y[y.length-1])&&(P[0]===6||P[0]===2)){c=0;continue}if(P[0]===3&&(!y||P[1]>y[0]&&P[1]<y[3])){c.label=P[1];break}if(P[0]===6&&c.label<y[1]){c.label=y[1],y=P;break}if(y&&c.label<y[2]){c.label=y[2],c.ops.push(P);break}y[2]&&c.ops.pop(),c.trys.pop();continue}P=i.call(a,c)}catch(B){P=[6,B],g=0}finally{f=y=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}}function $d(a,i){var c=typeof Symbol=="function"&&a[Symbol.iterator];if(!c)return a;var f=c.call(a),g,y=[],x;try{for(;(i===void 0||i-- >0)&&!(g=f.next()).done;)y.push(g.value)}catch(w){x={error:w}}finally{try{g&&!g.done&&(c=f.return)&&c.call(f)}finally{if(x)throw x.error}}return y}function Yd(a,i,c){if(c||arguments.length===2)for(var f=0,g=i.length,y;f<g;f++)(y||!(f in i))&&(y||(y=Array.prototype.slice.call(i,0,f)),y[f]=i[f]);return a.concat(y||Array.prototype.slice.call(i))}function U0(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Z0={exports:{}},Xd={exports:{}},wl={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=c;function c(f){return f&&typeof f.length=="number"&&f.length>=0&&f.length%1===0}a.exports=i.default})(wl,wl.exports);var ho={},H0={exports:{}},V0={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c){return function(){for(var f=[],g=arguments.length;g--;)f[g]=arguments[g];var y=f.pop();return c.call(this,f,y)}},a.exports=i.default})(V0,V0.exports);var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.fallback=$1,Ja.wrap=W0;var uw=Ja.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,G1=Ja.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,fw=Ja.hasNextTick=typeof B0=="object"&&typeof B0.nextTick=="function";function $1(a){setTimeout(a,0)}function W0(a){return function(i){for(var c=[],f=arguments.length-1;f-- >0;)c[f]=arguments[f+1];return a(function(){return i.apply(void 0,c)})}}var Ju;uw?Ju=queueMicrotask:G1?Ju=setImmediate:fw?Ju=B0.nextTick:Ju=$1,Ja.default=W0(Ju),function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=T;var c=V0.exports,f=w(c),g=Ja,y=w(g),x=ho;function w(U){return U&&U.__esModule?U:{default:U}}function T(U){return(0,x.isAsync)(U)?function(){for(var G=[],mt=arguments.length;mt--;)G[mt]=arguments[mt];var Nt=G.pop(),Qt=U.apply(this,G);return P(Qt,Nt)}:(0,f.default)(function(G,mt){var Nt;try{Nt=U.apply(this,G)}catch(Qt){return mt(Qt)}if(Nt&&typeof Nt.then=="function")return P(Nt,mt);mt(null,Nt)})}function P(U,G){return U.then(function(mt){B(G,null,mt)},function(mt){B(G,mt&&mt.message?mt:new Error(mt))})}function B(U,G,mt){try{U(G,mt)}catch(Nt){(0,y.default)(function(Qt){throw Qt},Nt)}}a.exports=i.default}(H0,H0.exports),Object.defineProperty(ho,"__esModule",{value:!0}),ho.isAsyncIterable=ho.isAsyncGenerator=ho.isAsync=void 0;var Y1=H0.exports,dw=X1(Y1);function X1(a){return a&&a.__esModule?a:{default:a}}function q1(a){return a[Symbol.toStringTag]==="AsyncFunction"}function hw(a){return a[Symbol.toStringTag]==="AsyncGenerator"}function pw(a){return typeof a[Symbol.asyncIterator]=="function"}function gw(a){if(typeof a!="function")throw new Error("expected a function");return q1(a)?(0,dw.default)(a):a}ho.default=gw,ho.isAsync=q1,ho.isAsyncGenerator=hw,ho.isAsyncIterable=pw;var Ns={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=c;function c(f,g){if(g===void 0&&(g=f.length),!g)throw new Error("arity is undefined");function y(){for(var x=this,w=[],T=arguments.length;T--;)w[T]=arguments[T];return typeof w[g-1]=="function"?f.apply(this,w):new Promise(function(P,B){w[g-1]=function(U){for(var G=[],mt=arguments.length-1;mt-- >0;)G[mt]=arguments[mt+1];if(U)return B(U);P(G.length>1?G:G[0])},f.apply(x,w)})}return y}a.exports=i.default})(Ns,Ns.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var c=wl.exports,f=T(c),g=ho,y=T(g),x=Ns.exports,w=T(x);function T(P){return P&&P.__esModule?P:{default:P}}i.default=(0,w.default)(function(P,B,U){var G=(0,f.default)(B)?[]:{};P(B,function(mt,Nt,Qt){(0,y.default)(mt)(function(ye){for(var Fe,ze=[],Ve=arguments.length-1;Ve-- >0;)ze[Ve]=arguments[Ve+1];ze.length<2&&(Fe=ze,ze=Fe[0]),G[Nt]=ze,Qt(ye)})},function(mt){return U(mt,G)})},3),a.exports=i.default}(Xd,Xd.exports);var G0={exports:{}},xc={exports:{}},$0={exports:{}},tf={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=c;function c(f){function g(){for(var y=[],x=arguments.length;x--;)y[x]=arguments[x];if(f!==null){var w=f;f=null,w.apply(this,y)}}return Object.assign(g,f),g}a.exports=i.default})(tf,tf.exports);var qd={exports:{}},Y0={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c){return c[Symbol.iterator]&&c[Symbol.iterator]()},a.exports=i.default})(Y0,Y0.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=B;var c=wl.exports,f=x(c),g=Y0.exports,y=x(g);function x(U){return U&&U.__esModule?U:{default:U}}function w(U){var G=-1,mt=U.length;return function(){return++G<mt?{value:U[G],key:G}:null}}function T(U){var G=-1;return function(){var Nt=U.next();return Nt.done?null:(G++,{value:Nt.value,key:G})}}function P(U){var G=U?Object.keys(U):[],mt=-1,Nt=G.length;return function Qt(){var ye=G[++mt];return ye==="__proto__"?Qt():mt<Nt?{value:U[ye],key:ye}:null}}function B(U){if((0,f.default)(U))return w(U);var G=(0,y.default)(U);return G?T(G):P(U)}a.exports=i.default}(qd,qd.exports);var Al={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=c;function c(f){return function(){for(var g=[],y=arguments.length;y--;)g[y]=arguments[y];if(f===null)throw new Error("Callback was already called.");var x=f;f=null,x.apply(this,g)}}a.exports=i.default})(Al,Al.exports);var ef={exports:{}},io={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var c={};i.default=c,a.exports=i.default})(io,io.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=y;var c=io.exports,f=g(c);function g(x){return x&&x.__esModule?x:{default:x}}function y(x,w,T,P){var B=!1,U=!1,G=!1,mt=0,Nt=0;function Qt(){mt>=w||G||B||(G=!0,x.next().then(function(ze){var Ve=ze.value,tn=ze.done;if(!(U||B)){if(G=!1,tn){B=!0,mt<=0&&P(null);return}mt++,T(Ve,Nt,ye),Nt++,Qt()}}).catch(Fe))}function ye(ze,Ve){if(mt-=1,!U){if(ze)return Fe(ze);if(ze===!1){B=!0,U=!0;return}if(Ve===f.default||B&&mt<=0)return B=!0,P(null);Qt()}}function Fe(ze){U||(G=!1,B=!0,P(ze))}Qt()}a.exports=i.default}(ef,ef.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var c=tf.exports,f=mt(c),g=qd.exports,y=mt(g),x=Al.exports,w=mt(x),T=ho,P=ef.exports,B=mt(P),U=io.exports,G=mt(U);function mt(Nt){return Nt&&Nt.__esModule?Nt:{default:Nt}}i.default=function(Nt){return function(Qt,ye,Fe){if(Fe=(0,f.default)(Fe),Nt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!Qt)return Fe(null);if((0,T.isAsyncGenerator)(Qt))return(0,B.default)(Qt,Nt,ye,Fe);if((0,T.isAsyncIterable)(Qt))return(0,B.default)(Qt[Symbol.asyncIterator](),Nt,ye,Fe);var ze=(0,y.default)(Qt),Ve=!1,tn=!1,pn=0,Pn=!1;function Tn(or,wr){if(!tn)if(pn-=1,or)Ve=!0,Fe(or);else if(or===!1)Ve=!0,tn=!0;else{if(wr===G.default||Ve&&pn<=0)return Ve=!0,Fe(null);Pn||kn()}}function kn(){for(Pn=!0;pn<Nt&&!Ve;){var or=ze();if(or===null){Ve=!0,pn<=0&&Fe(null);return}pn+=1,ye(or.value,or.key,(0,w.default)(Tn))}Pn=!1}kn()}},a.exports=i.default}($0,$0.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var c=$0.exports,f=T(c),g=ho,y=T(g),x=Ns.exports,w=T(x);function T(B){return B&&B.__esModule?B:{default:B}}function P(B,U,G,mt){return(0,f.default)(U)(B,(0,y.default)(G),mt)}i.default=(0,w.default)(P,4),a.exports=i.default}(xc,xc.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var c=xc.exports,f=x(c),g=Ns.exports,y=x(g);function x(T){return T&&T.__esModule?T:{default:T}}function w(T,P,B){return(0,f.default)(T,1,P,B)}i.default=(0,y.default)(w,3),a.exports=i.default}(G0,G0.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=w;var c=Xd.exports,f=x(c),g=G0.exports,y=x(g);function x(T){return T&&T.__esModule?T:{default:T}}function w(T,P){return(0,f.default)(y.default,T,P)}a.exports=i.default}(Z0,Z0.exports);var ko=U0(Z0.exports),Ro=function(){function a(){this.args=[],this.tasks=[]}return a.prototype.call=function(){for(var i=arguments,c=[],f=0;f<arguments.length;f++)c[f]=i[f];return this.args=c,ko(this.tasks)},a.prototype.tap=function(i,c){var f=this;this.tasks.push(function(g){c.apply(void 0,Yd([],$d(f.args),!1)),g(null,i)})},a}(),Fs={exports:{}},nf={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var c=wl.exports,f=ye(c),g=io.exports,y=ye(g),x=xc.exports,w=ye(x),T=tf.exports,P=ye(T),B=Al.exports,U=ye(B),G=ho,mt=ye(G),Nt=Ns.exports,Qt=ye(Nt);function ye(tn){return tn&&tn.__esModule?tn:{default:tn}}function Fe(tn,pn,Pn){Pn=(0,P.default)(Pn);var Tn=0,kn=0,or=tn.length,wr=!1;or===0&&Pn(null);function qn(fr,Br){fr===!1&&(wr=!0),wr!==!0&&(fr?Pn(fr):(++kn===or||Br===y.default)&&Pn(null))}for(;Tn<or;Tn++)pn(tn[Tn],Tn,(0,U.default)(qn))}function ze(tn,pn,Pn){return(0,w.default)(tn,1/0,pn,Pn)}function Ve(tn,pn,Pn){var Tn=(0,f.default)(tn)?Fe:ze;return Tn(tn,(0,mt.default)(pn),Pn)}i.default=(0,Qt.default)(Ve,3),a.exports=i.default})(nf,nf.exports),function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=w;var c=nf.exports,f=x(c),g=Xd.exports,y=x(g);function x(T){return T&&T.__esModule?T:{default:T}}function w(T,P){return(0,y.default)(f.default,T,P)}a.exports=i.default}(Fs,Fs.exports);var vw=U0(Fs.exports),mw=function(){function a(){this.tasks=[]}return a.prototype.promise=function(){return vw(this.tasks)},a.prototype.tapPromise=function(i,c){var f=this;this.tasks.push(function(g){return j0(f,void 0,void 0,function(){return z0(this,function(y){switch(y.label){case 0:return[4,c()];case 1:return y.sent(),g(null,i),[2]}})})})},a}(),rf={exports:{}};(function(a,i){Object.defineProperty(i,"__esModule",{value:!0});var c=tf.exports,f=B(c),g=Al.exports,y=B(g),x=ho,w=B(x),T=Ns.exports,P=B(T);function B(G){return G&&G.__esModule?G:{default:G}}function U(G,mt){if(mt=(0,f.default)(mt),!Array.isArray(G))return mt(new Error("First argument to waterfall must be an array of functions"));if(!G.length)return mt();var Nt=0;function Qt(Fe){var ze=(0,w.default)(G[Nt++]);ze.apply(void 0,Fe.concat([(0,y.default)(ye)]))}function ye(Fe){for(var ze=[],Ve=arguments.length-1;Ve-- >0;)ze[Ve]=arguments[Ve+1];if(Fe!==!1){if(Fe||Nt===G.length)return mt.apply(void 0,[Fe].concat(ze));Qt(ze)}}Qt([])}i.default=(0,P.default)(U),a.exports=i.default})(rf,rf.exports);var K1=U0(rf.exports),yw=function(){function a(){this.tasks=[]}return a.prototype.call=function(){return K1(this.tasks)},a.prototype.tap=function(i,c){this.tasks.length===0?this.tasks.push(function(f){var g=c();f(g?null:!1,g)}):this.tasks.push(function(f,g){var y=c.apply(void 0,Yd([],$d(f),!1));g(y?null:!1,i)})},a}(),Sc=function(){function a(){this.tasks=[]}return a.prototype.call=function(){return ko(this.tasks)},a.prototype.tap=function(i,c){this.tasks.push(function(f){var g=c();f(g,i)})},a}(),bw=function(){function a(){this.args=[],this.tasks=[]}return a.prototype.promise=function(){for(var i=arguments,c=[],f=0;f<arguments.length;f++)c[f]=i[f];return this.args=c,ko(this.tasks)},a.prototype.tapPromise=function(i,c){var f=this;this.tasks.push(function(g){return j0(f,void 0,void 0,function(){return z0(this,function(y){switch(y.label){case 0:return[4,c.apply(void 0,Yd([],$d(this.args),!1))];case 1:return y.sent(),g(null,i),[2]}})})})},a}(),of=function(){function a(){this.args=[],this.tasks=[]}return a.prototype.promise=function(){for(var i=arguments,c=[],f=0;f<arguments.length;f++)c[f]=i[f];return this.args=c,ko(this.tasks)},a.prototype.tapPromise=function(i,c){var f=this;this.tasks.push(function(g){return j0(f,void 0,void 0,function(){var y;return z0(this,function(x){switch(x.label){case 0:return[4,c.apply(void 0,Yd([],$d(this.args),!1))];case 1:return y=x.sent(),g(y,i),[2]}})})})},a}(),_w=function(){function a(){this.tasks=[]}return a.prototype.promise=function(){return K1(this.tasks)},a.prototype.tapPromise=function(i,c){this.tasks.length===0?this.tasks.push(function(f){c().then(function(g){f(null,g)})}):this.tasks.push(function(f,g){c(f).then(function(y){g(null,y)})})},a}(),Tl=D(63844),Q1=D.n(Tl);class Kd extends Sr.EventEmitter{get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get controlService(){return this.container.controlService}get configService(){return this.container.globalConfigService}get map(){return this.container.mapService}get coordinateSystemService(){return this.container.coordinateSystemService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get cameraService(){return this.container.cameraService}get interactionService(){return this.container.interactionService}get pickingService(){return this.container.pickingService}get shaderModuleService(){return this.container.shaderModuleService}get markerService(){return this.container.markerService}get popupService(){return this.container.popupService}constructor(i){super(),(0,dt.Z)(this,"destroyed",!1),(0,dt.Z)(this,"loaded",!1),(0,dt.Z)(this,"id",void 0),(0,dt.Z)(this,"inited",!1),(0,dt.Z)(this,"rendering",!1),(0,dt.Z)(this,"$container",void 0),(0,dt.Z)(this,"canvas",void 0),(0,dt.Z)(this,"markerContainer",void 0),(0,dt.Z)(this,"resizeDetector",void 0),(0,dt.Z)(this,"hooks",void 0),(0,dt.Z)(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render())}),(0,dt.Z)(this,"handleMapCameraChanged",c=>{this.cameraService.update(c),this.render()}),this.container=i,this.hooks={init:new bw},this.id=i.id}init(i){var c=this;this.configService.setSceneConfig(this.id,i),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,an.Z)(function*(){c.debugService.log("map.mapInitStart",{type:c.map.version}),yield new Promise(f=>{c.map.onCameraChanged(g=>{c.cameraService.init(),c.cameraService.update(g),f()}),c.map.init()}),c.map.onCameraChanged(c.handleMapCameraChanged),c.map.addMarkerContainer(),c.markerService.addMarkers(),c.markerService.addMarkerLayers(),c.popupService.initPopup(),c.interactionService.init(),c.interactionService.on(Di.Drag,c.addSceneEvent.bind(c))})),this.hooks.init.tapPromise("initRenderer",(0,an.Z)(function*(){var f;const g=((f=c.map)===null||f===void 0?void 0:f.getOverlayContainer())||void 0;if(g?c.$container=g:c.$container=rw(c.configService.getSceneConfig(c.id).id||""),c.$container){const{canvas:x}=i;if(c.canvas=x||$i("canvas","",c.$container),c.setCanvas(),yield c.rendererService.init(c.canvas,c.configService.getSceneConfig(c.id),i.gl),c.registerContextLost(),c.initContainer(),c.resizeDetector=Q1()({strategy:"scroll"}),c.resizeDetector.listenTo(c.$container,c.handleWindowResized),window.matchMedia){var y;(y=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||y===void 0||y.addListener(c.handleWindowResized.bind("screen"))}}else console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");c.pickingService.init(c.id)})),this.render()}registerContextLost(){const i=this.rendererService.getCanvas();i&&i.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"))}addLayer(i){this.layerService.sceneService=this,this.layerService.add(i)}addMask(i){this.layerService.sceneService=this,this.layerService.addMask(i)}render(){var i=this;return(0,an.Z)(function*(){i.rendering||i.destroyed||(i.rendering=!0,i.inited?(yield i.layerService.initLayers(),yield i.layerService.renderLayers()):(yield i.hooks.init.promise(),i.destroyed&&i.destroy(),yield i.layerService.initLayers(),i.layerService.renderLayers(),i.controlService.addControls(),i.loaded=!0,i.emit("loaded"),i.inited=!0),i.rendering=!1)})()}addFontFace(i,c){this.fontService.addFontFace(i,c)}getSceneContainer(){return this.$container}exportPng(i){var c=this;return(0,an.Z)(function*(){var f;const g=(f=c.$container)===null||f===void 0?void 0:f.getElementsByTagName("canvas")[0];return yield c.render(),i==="jpg"?g==null?void 0:g.toDataURL("image/jpeg"):g==null?void 0:g.toDataURL("image/png")})()}getSceneConfig(){return this.configService.getSceneConfig(this.id)}getPointSizeRange(){return this.rendererService.getPointSizeRange()}addMarkerContainer(){const i=this.$container.parentElement;i!==null&&(this.markerContainer=$i("div","l7-marker-container",i))}getMarkerContainer(){return this.markerContainer}destroy(){var i;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var c;(c=this.$container)===null||c===void 0||c.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy()}),(i=this.$container)===null||i===void 0||(i=i.parentNode)===null||i===void 0||i.removeChild(this.$container),this.emit("destroy")}initContainer(){var i,c;const f=vo,g=((i=this.$container)===null||i===void 0?void 0:i.clientWidth)||400,y=((c=this.$container)===null||c===void 0?void 0:c.clientHeight)||300,x=this.canvas;x&&(x.width=g*f,x.height=y*f),this.rendererService.viewport({x:0,y:0,width:f*g,height:f*y})}setCanvas(){var i,c;const f=vo,g=((i=this.$container)===null||i===void 0?void 0:i.clientWidth)||400,y=((c=this.$container)===null||c===void 0?void 0:c.clientHeight)||300,x=this.canvas;x.width=g*f,x.height=y*f,x.style.width="100%",x.style.height="100%"}addSceneEvent(i){this.emit(i.type,i)}}const{uniq:X0}=oi,J1="#define PI 3.14159265359",xw=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,Sw=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,tb=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,Qd=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,pa=`layout(location = ATTRIBUTE_LOCATION_PICKING_COLOR) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,eb=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,q0=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,nb=`#define TILE_SIZE (512.0)
#define PI (3.1415926536)
#define WORLD_SCALE (TILE_SIZE / (PI * 2.0))
#define EARTH_CIRCUMFERENCE (40.03e6)

#define COORDINATE_SYSTEM_LNGLAT (1.0) // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET (2.0) // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE (3.0)
#define COORDINATE_SYSTEM_IDENTITY (4.0)
#define COORDINATE_SYSTEM_METER_OFFSET (5.0)

#pragma include "scene_uniforms"

const vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5)));
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}

// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1.0, 1.0);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
      u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01 ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}

vec4 project_position(vec4 position, vec2 position64xyLow) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(
      vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w)
    );
  }
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
    u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01
  ) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  return position;
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_XY_LOW);
}

vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance;
  }

  return pixel * 2.0 * u_FocalDistance;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, 19.0 - u_Zoom) * u_FocalDistance;
  }

  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
    return meter;
  } else {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;

}

float project_pixel(float pixel) {
  return pixel * u_FocalDistance;
}

vec2 project_pixel(vec2 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec3 project_pixel(vec3 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}

bool isEqual(float a, float b) {
  return a < b + 0.001 && a > b - 0.001;
}

`,rb=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,Jd=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};
`,ts=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Xr=/precision\s+(high|low|medium)p\s+float/,Ow=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,ib=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,Ew=/void\s+main\s*\([^)]*\)\s*\{\n?/;class ww{constructor(){(0,dt.Z)(this,"moduleCache",{}),(0,dt.Z)(this,"rawContentCache",{})}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:J1,fs:J1}),this.registerModule("decode",{vs:Sw,fs:""}),this.registerModule("scene_uniforms",{vs:Jd,fs:Jd}),this.registerModule("picking_uniforms",{vs:eb,fs:eb}),this.registerModule("projection",{vs:nb,fs:nb}),this.registerModule("project",{vs:q0,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:ts}),this.registerModule("lighting",{vs:tb,fs:""}),this.registerModule("light",{vs:xw,fs:""}),this.registerModule("picking",{vs:pa,fs:Qd}),this.registerModule("rotation_2d",{vs:rb,fs:""})}registerModule(i,c){c.vs=c.vs.replace(/\r\n/g,`
`),c.fs=c.fs.replace(/\r\n/g,`
`);const{vs:f,fs:g,uniforms:y,defines:x,inject:w}=c,{content:T,uniforms:P}=T1(f),{content:B,uniforms:U}=T1(g);this.rawContentCache[i]={fs:B,defines:x,inject:w,uniforms:(0,nn.Z)((0,nn.Z)((0,nn.Z)({},P),U),y),vs:T}}getModule(i){let c=this.rawContentCache[i].vs,f=this.rawContentCache[i].fs;const{defines:g={},inject:y={}}=this.rawContentCache[i];let x={};y["vs:#decl"]&&(c=y["vs:#decl"]+c,x=T1(y["vs:#decl"]).uniforms),y["vs:#main-start"]&&(c=c.replace(Ew,Qt=>Qt+y["vs:#main-start"])),y["fs:#decl"]&&(f=y["fs:#decl"]+f),c=Aw(g)+c;const{content:T,includeList:P}=this.processModule(c,[],"vs"),{content:B,includeList:U}=this.processModule(f,[],"fs"),G=X0(P.concat(U).concat(i)).reduce((Qt,ye)=>(0,nn.Z)((0,nn.Z)({},Qt),this.rawContentCache[ye].uniforms),(0,nn.Z)({},x)),mt=(Xr.test(B)?"":Ow)+T,Nt=(Xr.test(B)?"":Ow)+B;return this.moduleCache[i]={vs:mt.trim(),fs:Nt.trim(),uniforms:G},this.moduleCache[i]}destroy(){this.moduleCache={},this.rawContentCache={}}processModule(i,c,f){return{content:i.replace(ib,(y,x)=>{const T=x.split(" ")[0].replace(/"/g,"");if(c.indexOf(T)>-1)return"";const P=this.rawContentCache[T][f];c.push(T);const{content:B}=this.processModule(P,c,f);return B}),includeList:c}}}function Aw(a){return Object.keys(a).reduce((c,f)=>c+`#define ${f.toUpperCase()} ${a[f]}
`,`
`)}class K0{constructor(){(0,dt.Z)(this,"shaderModuleService",void 0),(0,dt.Z)(this,"rendererService",void 0),(0,dt.Z)(this,"cameraService",void 0),(0,dt.Z)(this,"mapService",void 0),(0,dt.Z)(this,"interactionService",void 0),(0,dt.Z)(this,"layerService",void 0),(0,dt.Z)(this,"config",void 0)}getName(){return""}getType(){return Fd.Normal}init(i,c){this.config=c,this.rendererService=i.getContainer().rendererService,this.cameraService=i.getContainer().cameraService,this.mapService=i.getContainer().mapService,this.interactionService=i.getContainer().interactionService,this.layerService=i.getContainer().layerService,this.shaderModuleService=i.getContainer().shaderModuleService}render(i){}}class Tw extends K0{getName(){return"clear"}init(i,c){super.init(i,c)}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}class Cw{constructor(i){(0,dt.Z)(this,"passes",[]),(0,dt.Z)(this,"layer",void 0),(0,dt.Z)(this,"renderFlag",void 0),(0,dt.Z)(this,"width",0),(0,dt.Z)(this,"height",0),this.postProcessor=i}setLayer(i){this.layer=i}setRenderFlag(i){this.renderFlag=i}getRenderFlag(){return this.renderFlag}getPostProcessor(){return this.postProcessor}render(){var i=this;return(0,an.Z)(function*(){for(const c of i.passes)yield c.render(i.layer);yield i.postProcessor.render(i.layer)})()}resize(i,c){(this.width!==i||this.height!==c)&&(this.postProcessor.resize(i,c),this.width=i,this.height=c)}add(i,c){i.getType()===Fd.PostProcessing?this.postProcessor.add(i,this.layer,c):(i.init(this.layer,c),this.passes.push(i))}insert(i,c,f){i.init(this.layer,c),this.passes.splice(f,0,i)}destroy(){this.passes.length=0}}class ob extends K0{constructor(...i){var c;super(...i),c=this,(0,dt.Z)(this,"pickingFBO",void 0),(0,dt.Z)(this,"layer",void 0),(0,dt.Z)(this,"width",0),(0,dt.Z)(this,"height",0),(0,dt.Z)(this,"alreadyInRendering",!1),(0,dt.Z)(this,"pickFromPickingFBO",({x:f,y:g,lngLat:y,type:x})=>{if(!this.layer.isVisible()||!this.layer.needPick(x))return;const{getViewportSize:w,readPixelsAsync:T,useFramebuffer:P}=this.rendererService,{width:B,height:U}=w(),{enableHighlight:G,enableSelect:mt}=this.layer.getLayerConfig(),Nt=f*vo,Qt=g*vo;if(Nt>B||Nt<0||Qt>U||Qt<0)return;let ye;P(this.pickingFBO,(0,an.Z)(function*(){var Fe;if(ye=yield T({x:Math.round(Nt),y:Math.round(U-(g+1)*vo),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:c.pickingFBO}),ye[0]!==0||ye[1]!==0||ye[2]!==0){const ze=uc(ye),Ve=c.layer.getSource().getFeatureById(ze),tn={x:f,y:g,type:x,lngLat:y,featureId:ze,feature:Ve};Ve&&(c.layer.setCurrentPickId(ze),c.triggerHoverOnLayer(tn))}else{const ze={x:f,y:g,lngLat:y,type:c.layer.getCurrentPickId()===null?"un"+x:"mouseout",featureId:null,feature:null};c.triggerHoverOnLayer((0,nn.Z)((0,nn.Z)({},ze),{},{type:"unpick"})),c.triggerHoverOnLayer(ze),c.layer.setCurrentPickId(null)}G&&c.highlightPickedFeature(ye),mt&&x==="click"&&((Fe=ye)===null||Fe===void 0?void 0:Fe.toString())!==[0,0,0,0].toString()&&c.selectFeature(ye)}))})}getType(){return Fd.Normal}getName(){return"pixelPicking"}init(i,c){super.init(i,c),this.layer=i;const{createTexture2D:f,createFramebuffer:g,getViewportSize:y}=this.rendererService,{width:x,height:w}=y(),T=f({width:x,height:w,wrapS:q.CLAMP_TO_EDGE,wrapT:q.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=g({color:T}),this.interactionService.on(Di.Hover,this.pickFromPickingFBO),this.interactionService.on(Di.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Di.Active,this.highlightFeatureHandle.bind(this))}render(i){if(this.alreadyInRendering)return;const{getViewportSize:c,useFramebuffer:f,clear:g}=this.rendererService,{width:y,height:x}=c();this.alreadyInRendering=!0,(this.width!==y||this.height!==x)&&(this.pickingFBO.resize({width:y,height:x}),this.width=y,this.height=x),f(this.pickingFBO,()=>{g({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});const w=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),i.hooks.beforePickingEncode.call(),i.render(),i.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(w),this.alreadyInRendering=!1})}triggerHoverOnLayer(i){this.layer.emit(i.type,i)}highlightPickedFeature(i){const[c,f,g]=i;this.layer.hooks.beforeHighlight.call([c,f,g]),this.layerService.renderLayers()}selectFeature(i){const[c,f,g]=i;this.layer.hooks.beforeSelect.call([c,f,g]),this.layerService.renderLayers()}selectFeatureHandle({featureId:i}){const c=ul(i);this.selectFeature(new Uint8Array(c))}highlightFeatureHandle({featureId:i}){const c=ul(i);this.highlightPickedFeature(new Uint8Array(c))}}class th{constructor(i){(0,dt.Z)(this,"passes",[]),(0,dt.Z)(this,"readFBO",void 0),(0,dt.Z)(this,"writeFBO",void 0),this.rendererService=i,this.init()}getReadFBO(){return this.readFBO}getWriteFBO(){return this.writeFBO}getCurrentFBOTex(){const{getViewportSize:i,createTexture2D:c}=this.rendererService,{width:f,height:g}=i();return c({x:0,y:0,width:f,height:g,copy:!0})}getReadFBOTex(){var i=this;const{useFramebuffer:c}=this.rendererService;return new Promise(f=>{c(this.readFBO,(0,an.Z)(function*(){f(i.getCurrentFBOTex())}))})}renderBloomPass(i,c){var f=this;return(0,an.Z)(function*(){const g=yield f.getReadFBOTex();let y=0;for(;y<4;)yield c.render(i,g),f.swap(),y++})()}render(i){var c=this;return(0,an.Z)(function*(){for(let f=0;f<c.passes.length;f++){const g=c.passes[f];g.setRenderToScreen(c.isLastEnabledPass(f)),g.getName()==="bloom"?yield c.renderBloomPass(i,g):(yield g.render(i),f!==c.passes.length-1&&c.swap())}})()}resize(i,c){this.readFBO.resize({width:i,height:c}),this.writeFBO.resize({width:i,height:c})}add(i,c,f){i.init(c,f),this.passes.push(i)}insert(i,c,f,g){i.init(f,g),this.passes.splice(c,0,i)}getPostProcessingPassByName(i){return this.passes.find(c=>c.getName()===i)}init(){const{createFramebuffer:i,createTexture2D:c}=this.rendererService;this.readFBO=i({color:c({width:1,height:1,wrapS:q.CLAMP_TO_EDGE,wrapT:q.CLAMP_TO_EDGE,usage:Ds.RENDER_TARGET})}),this.writeFBO=i({color:c({width:1,height:1,wrapS:q.CLAMP_TO_EDGE,wrapT:q.CLAMP_TO_EDGE,usage:Ds.RENDER_TARGET})})}isLastEnabledPass(i){for(let c=i+1;c<this.passes.length;c++)if(this.passes[c].isEnabled())return!1;return!0}swap(){const i=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=i}}class ab extends K0{getType(){return Fd.Normal}getName(){return"render"}init(i,c){super.init(i,c)}render(i){const{useFramebuffer:c,clear:f}=this.rendererService,g=i.multiPassRenderer.getPostProcessor().getReadFBO();c(g,()=>{f({color:[0,0,0,0],depth:1,stencil:0,framebuffer:g}),i.multiPassRenderer.setRenderFlag(!1),i.models.forEach(y=>{y.draw({uniforms:i.layerModel.getUninforms()})}),i.multiPassRenderer.setRenderFlag(!0)})}}const sb=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,Mw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Yo}=oi;class Lw extends yo{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Mw,fs:sb});const{vs:i,fs:c,uniforms:f}=this.shaderModuleService.getModule("blur-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:c,uniforms:(0,nn.Z)((0,nn.Z)({},f),{},{u_ViewportSize:[g,y]})}}convertOptionsToUniforms(i){const c={};return Yo(i.bloomRadius)||(c.u_radius=i.bloomRadius),Yo(i.bloomIntensity)||(c.u_intensity=i.bloomIntensity),Yo(i.bloomBaseRadio)||(c.u_baseRadio=i.bloomBaseRadio),c}}const Pw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,cb=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Iw}=oi;class eh extends yo{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:cb,fs:Pw});const{vs:i,fs:c,uniforms:f}=this.shaderModuleService.getModule("blur-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:c,uniforms:(0,nn.Z)((0,nn.Z)({},f),{},{u_ViewportSize:[g,y]})}}convertOptionsToUniforms(i){const c={};return Iw(i.blurRadius)||(c.u_BlurDir=[i.blurRadius,0]),c}}const lb=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,ub=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:fb}=oi;class kw extends yo{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:ub,fs:lb});const{vs:i,fs:c,uniforms:f}=this.shaderModuleService.getModule("blur-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:c,uniforms:(0,nn.Z)((0,nn.Z)({},f),{},{u_ViewportSize:[g,y]})}}convertOptionsToUniforms(i){const c={};return fb(i.blurRadius)||(c.u_BlurDir=[0,i.blurRadius]),c}}const Rw=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Dw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class db extends yo{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Dw,fs:Rw});const{vs:i,fs:c,uniforms:f}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:c,uniforms:(0,nn.Z)((0,nn.Z)({},f),{},{u_ViewportSize:[g,y]})}}}const Nw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Fw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Bw extends yo{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:Fw,fs:Nw}),this.shaderModuleService.getModule("copy-pass")}}const jw=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,zw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Uw extends yo{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:zw,fs:jw});const{vs:i,fs:c,uniforms:f}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:c,uniforms:(0,nn.Z)((0,nn.Z)({},f),{},{u_ViewportSize:[g,y]})}}}const Zw=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Hw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Vw extends yo{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:Hw,fs:Zw});const{vs:i,fs:c,uniforms:f}=this.shaderModuleService.getModule("ink-pass"),{width:g,height:y}=this.rendererService.getViewportSize();return{vs:i,fs:c,uniforms:(0,nn.Z)((0,nn.Z)({},f),{},{u_ViewportSize:[g,y]})}}}const Ww=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,hb=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Bs extends yo{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:hb,fs:Ww}),this.shaderModuleService.getModule("noise-pass")}}const pb=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Gw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;class $w extends yo{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:pb,fs:Gw}),this.shaderModuleService.getModule("sepia-pass")}}const gb=new JE;let vb=0;function mb(){const a=new ww,i=new ew,c=new qE,f=new tw(c),g=new $E,y=new XE,x=new u6,w=new z1,T=new R0,P={id:`${vb++}`,globalConfigService:gb,shaderModuleService:a,debugService:i,cameraService:c,coordinateSystemService:f,fontService:g,iconService:y,markerService:x,popupService:w,controlService:T,customRenderService:{}},B=new d6(P);P.layerService=B;const U=new Kd(P);P.sceneService=U;const G=new V1(P);P.interactionService=G;const mt=new F0(P);P.pickingService=mt;const Nt={clear:new Tw,pixelPicking:new ob,render:new ab};P.normalPassFactory=ye=>Nt[ye];const Qt={copy:new Bw,bloom:new Lw,blurH:new eh,blurV:new kw,noise:new Bs,sepia:new $w,colorHalftone:new db,hexagonalPixelate:new Uw,ink:new Vw};return P.postProcessingPass=Qt,P.postProcessingPassFactory=ye=>Qt[ye],P}function Oc(a){const i=(0,nn.Z)({},a);return i.postProcessor=new th(i.rendererService),i.multiPassRenderer=new Cw(i.postProcessor),i.styleAttributeService=new lw(i.rendererService),i}const Ec=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];let oo=function(a){return a.IMAGE="image",a.CUSTOMIMAGE="customImage",a.ARRAYBUFFER="arraybuffer",a.RGB="rgb",a.TERRAINRGB="terrainRGB",a.CUSTOMRGB="customRGB",a.CUSTOMARRAYBUFFER="customArrayBuffer",a.CUSTOMTERRAINRGB="customTerrainRGB",a}({});var nh=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),Yw=(a,i,c,f)=>nh(void 0,null,function*(){return new Promise((g,y)=>{i({x:a.x,y:a.y,z:a.z},(x,w)=>{if(x||w.length===0){y(x);return}w&&Oo([{data:w,bands:[0]}],c,f,(T,P)=>{T?y(T):P&&g(P)})})})}),yb=(a,i)=>nh(void 0,null,function*(){return new Promise((c,f)=>{i({x:a.x,y:a.y,z:a.z},(g,y)=>{if(g||!y){f(g);return}y instanceof ArrayBuffer?Wt(y,(x,w)=>{x&&f(x),c(w)}):y instanceof HTMLImageElement?c(y):f(g)})})});function rh(a,i){return Array.isArray(a)?typeof a[0]=="string"?a.map(c=>Wa(c,i)):a.map(c=>({url:Wa(c.url,i),bands:c.bands||[0]})):Wa(a,i)}function Xw(a){return typeof a=="string"?[{url:a,bands:[0]}]:typeof a[0]=="string"?a.map(i=>({url:i,bands:[0]})):a}function bb(a,i){a.xhrCancel=()=>{i.map(c=>{c.abort()})}}var qw=Object.defineProperty,_b=Object.defineProperties,Q0=Object.getOwnPropertyDescriptors,ih=Object.getOwnPropertySymbols,J0=Object.prototype.hasOwnProperty,oh=Object.prototype.propertyIsEnumerable,Kw=(a,i,c)=>i in a?qw(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,xb=(a,i)=>{for(var c in i||(i={}))J0.call(i,c)&&Kw(a,c,i[c]);if(ih)for(var c of ih(i))oh.call(i,c)&&Kw(a,c,i[c]);return a},Sb=(a,i)=>_b(a,Q0(i)),Ob=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),Qw=(a,i,c,f,g)=>Ob(void 0,null,function*(){const y=Xw(i.url);if(y.length>1){const{rasterFiles:x,xhrList:w,errList:T}=yield Eb(y,i);if(bb(a,w),T.length>0){c(T,null);return}Oo(x,f,g,c)}else{const x=ro(i,(w,T)=>{if(w)c(w);else if(T){const P=[{data:T,bands:y[0].bands}];Oo(P,f,g,c)}});bb(a,[x])}});function Eb(a,i){return Ob(this,null,function*(){const c=[],f=[],g=[];for(let y=0;y<a.length;y++){const x=a[y],w=Sb(xb({},i),{url:x.url}),T=x.bands,{err:P,data:B,xhr:U}=yield Bi(Sb(xb({},w),{type:"arrayBuffer"}));P&&g.push(P),f.push(U),c.push({data:B,bands:T})}return{rasterFiles:c,xhrList:f,errList:g}})}var Jw=Object.defineProperty,tA=Object.defineProperties,wc=Object.getOwnPropertyDescriptors,af=Object.getOwnPropertySymbols,g6=Object.prototype.hasOwnProperty,v6=Object.prototype.propertyIsEnumerable,eA=(a,i,c)=>i in a?Jw(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,tg=(a,i)=>{for(var c in i||(i={}))g6.call(i,c)&&eA(a,c,i[c]);if(af)for(var c of af(i))v6.call(i,c)&&eA(a,c,i[c]);return a},nA=(a,i)=>tA(a,wc(i)),rA=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),m6=(a,i,c,f)=>rA(void 0,null,function*(){const{format:g=wb,operation:y,requestParameters:x={}}=f,w=nA(tg({},x),{url:rh(a,i)});return new Promise((T,P)=>{Qw(c,w,(B,U)=>{B?P(B):U&&T(U)},g,y)})}),sf=(a,i,c,f)=>rA(void 0,null,function*(){let g;const y=Array.isArray(a)?a[0]:a;return f.wmtsOptions?g=((f==null?void 0:f.getURLFromTemplate)||i0)(y,tg(tg({},i),f.wmtsOptions)):g=((f==null?void 0:f.getURLFromTemplate)||Wa)(y,i),new Promise((x,w)=>{var T;const P=ht(nA(tg({},f==null?void 0:f.requestParameters),{url:g,type:((T=f==null?void 0:f.requestParameters)==null?void 0:T.type)||"arrayBuffer"}),(B,U)=>{B?w(B):U&&x(U)},f.transformResponse);c.xhrCancel=()=>P.cancel()})}),wb=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),eg=Object.defineProperty,iA=Object.defineProperties,Ab=Object.getOwnPropertyDescriptors,ng=Object.getOwnPropertySymbols,Tb=Object.prototype.hasOwnProperty,Ca=Object.prototype.propertyIsEnumerable,Do=(a,i,c)=>i in a?eg(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,Cb=(a,i)=>{for(var c in i||(i={}))Tb.call(i,c)&&Do(a,c,i[c]);if(ng)for(var c of ng(i))Ca.call(i,c)&&Do(a,c,i[c]);return a},Mb=(a,i)=>iA(a,Ab(i)),di={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},p9=[oo.ARRAYBUFFER,oo.RGB];function vi(a){return!!(Array.isArray(a)&&a.length===0||!Array.isArray(a)&&typeof a!="string")}function rg(a,i={}){if(vi(a))throw new Error("tile server url is error");const{extent:c=[1/0,1/0,-1/0,-1/0],coordinates:f}=i;let g=(i==null?void 0:i.dataType)||oo.IMAGE;g===oo.RGB&&(g=oo.ARRAYBUFFER);const y=(T,P)=>{switch(g){case oo.IMAGE:return sf(a,T,P,i);case oo.CUSTOMIMAGE:case oo.CUSTOMTERRAINRGB:return yb(P,i==null?void 0:i.getCustomData);case oo.ARRAYBUFFER:return m6(a,T,P,i);case oo.CUSTOMARRAYBUFFER:case oo.CUSTOMRGB:return Yw(P,i==null?void 0:i.getCustomData,(i==null?void 0:i.format)||wb,i==null?void 0:i.operation);default:return sf(a,T,P,i)}},x=Mb(Cb(Cb({},di),i),{getTileData:y}),w=Ga(f,c);return{data:a,dataArray:[{_id:1,coordinates:w}],tilesetOptions:x,isTile:!0}}var oA=Object.defineProperty,aA=Object.defineProperties,sA=Object.getOwnPropertyDescriptors,cf=Object.getOwnPropertySymbols,ig=Object.prototype.hasOwnProperty,Lb=Object.prototype.propertyIsEnumerable,Pb=(a,i,c)=>i in a?oA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,cA=(a,i)=>{for(var c in i||(i={}))ig.call(i,c)&&Pb(a,c,i[c]);if(cf)for(var c of cf(i))Lb.call(i,c)&&Pb(a,c,i[c]);return a},lA=(a,i)=>aA(a,sA(i)),uA=(a,i)=>{var c={};for(var f in a)ig.call(a,f)&&i.indexOf(f)<0&&(c[f]=a[f]);if(a!=null&&cf)for(var f of cf(a))i.indexOf(f)<0&&Lb.call(a,f)&&(c[f]=a[f]);return c};function fA(a,i){const c=i,{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:g,width:y,height:x}=c,w=uA(c,["extent","coordinates","width","height"]);a.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[T,P]=w.bands||[0,1],B=[a[T],a[P]],U=[];for(let Nt=0;Nt<B[0].length;Nt++)U.push((B[1][Nt]-B[0][Nt])/(B[1][Nt]+B[0][Nt]));const G=Ga(g,f);return{_id:1,dataArray:[lA(cA({_id:1,data:U,width:y,height:x},w),{coordinates:G})]}}var dA=Object.defineProperty,Ib=Object.defineProperties,hA=Object.getOwnPropertyDescriptors,ah=Object.getOwnPropertySymbols,kb=Object.prototype.hasOwnProperty,Rb=Object.prototype.propertyIsEnumerable,og=(a,i,c)=>i in a?dA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,pA=(a,i)=>{for(var c in i||(i={}))kb.call(i,c)&&og(a,c,i[c]);if(ah)for(var c of ah(i))Rb.call(i,c)&&og(a,c,i[c]);return a},gA=(a,i)=>Ib(a,hA(i)),vA=(a,i)=>{var c={};for(var f in a)kb.call(a,f)&&i.indexOf(f)<0&&(c[f]=a[f]);if(a!=null&&ah)for(var f of ah(a))i.indexOf(f)<0&&Rb.call(a,f)&&(c[f]=a[f]);return c};function mA(a,i){const c=i,{extent:f,coordinates:g,width:y,height:x}=c,w=vA(c,["extent","coordinates","width","height"]);a.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[T,P,B]=w.bands||[0,1,2],U=[a[T],a[P],a[B]],G=[],[mt,Nt]=(w==null?void 0:w.countCut)||[2,98],Qt=(w==null?void 0:w.RMinMax)||mc(U[0],mt,Nt),ye=(w==null?void 0:w.GMinMax)||mc(U[1],mt,Nt),Fe=(w==null?void 0:w.BMinMax)||mc(U[2],mt,Nt);for(let tn=0;tn<U[0].length;tn++)G.push(Math.max(0,U[0][tn]-Qt[0])),G.push(Math.max(0,U[1][tn]-ye[0])),G.push(Math.max(0,U[2][tn]-Fe[0]));const ze=Ga(g,f);return{_id:1,dataArray:[gA(pA({_id:1,data:G,width:y,height:x,rMinMax:Qt,gMinMax:ye,bMinMax:Fe},w),{coordinates:ze})]}}var yA=Object.defineProperty,bA=Object.defineProperties,_A=Object.getOwnPropertyDescriptors,sh=Object.getOwnPropertySymbols,Db=Object.prototype.hasOwnProperty,Nb=Object.prototype.propertyIsEnumerable,mr=(a,i,c)=>i in a?yA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,xA=(a,i)=>{for(var c in i||(i={}))Db.call(i,c)&&mr(a,c,i[c]);if(sh)for(var c of sh(i))Nb.call(i,c)&&mr(a,c,i[c]);return a},SA=(a,i)=>bA(a,_A(i)),Fb=(a,i)=>{var c={};for(var f in a)Db.call(a,f)&&i.indexOf(f)<0&&(c[f]=a[f]);if(a!=null&&sh)for(var f of sh(a))i.indexOf(f)<0&&Nb.call(a,f)&&(c[f]=a[f]);return c};function Bb(a,i){const c=i,{extent:f,coordinates:g,min:y,max:x,width:w,height:T,format:P,operation:B}=c,U=Fb(c,["extent","coordinates","min","max","width","height","format","operation"]);let G;if(P===void 0||Td(a))G=Array.from(a);else{const Qt=Array.isArray(a)?a:[a];G=A0(Qt,P,B)}const mt=Ga(g,f);return{_id:1,dataArray:[SA(xA({_id:1,data:G,width:w,height:T},U),{min:y,max:x,coordinates:mt})]}}var OA=Object.defineProperty,EA=Object.defineProperties,y6=Object.getOwnPropertyDescriptors,jb=Object.getOwnPropertySymbols,Ma=Object.prototype.hasOwnProperty,Ac=Object.prototype.propertyIsEnumerable,ag=(a,i,c)=>i in a?OA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,zb=(a,i)=>{for(var c in i||(i={}))Ma.call(i,c)&&ag(a,c,i[c]);if(jb)for(var c of jb(i))Ac.call(i,c)&&ag(a,c,i[c]);return a},Ub=(a,i)=>EA(a,y6(i)),wA=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),AA={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},TA=a=>wA(void 0,null,function*(){return new Promise(i=>{const[c,f,g,y]=a.bounds,x={layers:{testTile:{features:[{type:"Feature",properties:{key:a.x+"/"+a.y+"/"+a.z,x:(c+g)/2,y:(f+y)/2},geometry:{type:"LineString",coordinates:[[g,y],[g,f],[c,f],[c,f]]}}]}}};i(x)})});function b6(a,i){const c=g=>TA(g),f=Ub(zb(zb({},AA),i),{getTileData:c});return{data:a,dataArray:[],tilesetOptions:f,isTile:!0}}var Ti=D(69848),CA=D.n(Ti),MA=Object.defineProperty,sg=Object.getOwnPropertySymbols,Tc=Object.prototype.hasOwnProperty,Zb=Object.prototype.propertyIsEnumerable,cg=(a,i,c)=>i in a?MA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,Hb=(a,i)=>{for(var c in i||(i={}))Tc.call(i,c)&&cg(a,c,i[c]);if(sg)for(var c of sg(i))Zb.call(i,c)&&cg(a,c,i[c]);return a};function Vb(a,i){const{radius:c=40,maxZoom:f=18,minZoom:g=0,zoom:y=2}=i;if(a.pointIndex){const T=a.pointIndex.getClusters(a.extent,Math.floor(y));return a.dataArray=LA(T),a}const x=new(CA())({radius:c,minZoom:g,maxZoom:f}),w={type:"FeatureCollection",features:[]};return w.features=a.dataArray.map(T=>({type:"Feature",geometry:{type:"Point",coordinates:T.coordinates},properties:Hb({},T)})),x.load(w.features),x}function LA(a){return a.map((i,c)=>Hb({coordinates:i.geometry.coordinates,_id:c+1},i.properties))}function PA(a){if(a.length===0)throw new Error("max requires at least one data point");let i=a[0];for(let c=1;c<a.length;c++)a[c]>i&&(i=a[c]);return i}function IA(a){if(a.length===0)throw new Error("min requires at least one data point");let i=a[0];for(let c=1;c<a.length;c++)a[c]<i&&(i=a[c]);return i}function Wb(a){if(a.length===0)return 0;let i=a[0],c=0,f;for(let g=1;g<a.length;g++)f=i+a[g]*1,Math.abs(i)>=Math.abs(a[g])?c+=i-f+a[g]:c+=a[g]-f+i,i=f;return i+c*1}function kA(a){if(a.length===0)throw new Error("mean requires at least one data point");return Wb(a)/a.length}var RA={min:IA,max:PA,mean:kA,sum:Wb},Cl=Object.defineProperty,Ml=Object.getOwnPropertySymbols,DA=Object.prototype.hasOwnProperty,Gb=Object.prototype.propertyIsEnumerable,Ll=(a,i,c)=>i in a?Cl(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,lf=(a,i)=>{for(var c in i||(i={}))DA.call(i,c)&&Ll(a,c,i[c]);if(Ml)for(var c of Ml(i))Gb.call(i,c)&&Ll(a,c,i[c]);return a},NA=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),{cloneDeep:$b,isFunction:Yb,isString:FA,mergeWith:BA}=oi;function jA(a,i){if(Array.isArray(i))return i}var zA=class extends Sr.EventEmitter{constructor(a,i){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new Ro},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=a,this.initCfg(i),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"})})}getSourceCfg(){return this.cfg}getClusters(a){return this.clusterIndex.getClusters(this.caculClusterExtent(2),a)}getClustersLeaves(a){return this.clusterIndex.getLeaves(a,1/0)}getParserType(){return this.parser.type}updateClusterData(a){const{method:i="sum",field:c}=this.clusterOptions;let f=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(a));this.clusterOptions.zoom=a,f.forEach(g=>{g.id||(g.properties.point_count=1)}),(c||Yb(i))&&(f=f.map(g=>{const y=g.id;if(y){const w=this.clusterIndex.getLeaves(y,1/0).map(P=>P.properties);let T;if(FA(i)&&c){const P=pc(w,c);T=RA[i](P)}Yb(i)&&(T=i(w)),g.properties.stat=T}else g.properties.point_count=1;return g})),this.data=Xt("geojson")({type:"FeatureCollection",features:f}),this.executeTrans()}getFeatureById(a){const{type:i="geojson",geometry:c}=this.parser;if(i==="geojson"&&!this.cluster){const f=a<this.originData.features.length?this.originData.features[a]:"null",g=$b(f);if(g!=null&&g.properties&&(this.transforms.length!==0||this.dataArrayChanged)){const y=this.data.dataArray.find(x=>x._id===a);g.properties=y}return g}else return i==="json"&&c?this.data.dataArray.find(f=>f._id===a):a<this.data.dataArray.length?this.data.dataArray[a]:"null"}updateFeaturePropertiesById(a,i){this.data.dataArray=this.data.dataArray.map(c=>c._id===a?lf(lf({},c),i):c),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}getFeatureId(a,i){const c=this.data.dataArray.find(f=>f[a]===i);return c==null?void 0:c._id}setData(a,i){this.originData=a,this.dataArrayChanged=!1,this.initCfg(i),this.init().then(()=>{this.emit("update",{type:"update"})})}reloadAllTile(){var a;(a=this.tileset)==null||a.reloadAll()}reloadTilebyId(a,i,c){var f;(f=this.tileset)==null||f.reloadTileById(a,i,c)}reloadTileByLnglat(a,i,c){var f;(f=this.tileset)==null||f.reloadTileByLnglat(a,i,c)}getTileExtent(a,i){var c;return(c=this.tileset)==null?void 0:c.getTileExtent(a,i)}getTileByZXY(a,i,c){var f;return(f=this.tileset)==null?void 0:f.getTileByZXY(a,i,c)}reloadTileByExtent(a,i){var c;(c=this.tileset)==null||c.reloadTileByExtent(a,i)}destroy(){var a;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(a=this.tileset)==null||a.destroy()}processData(){return NA(this,null,function*(){return new Promise((a,i)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),a({})}catch(c){i(c)}})})}initCfg(a){this.cfg=BA(this.cfg,a,jA);const i=this.cfg;i&&(i.parser&&(this.parser=i.parser),i.transforms&&(this.transforms=i.transforms),this.cluster=i.cluster||!1,i.clusterOptions&&(this.cluster=!0,this.clusterOptions=lf(lf({},this.clusterOptions),i.clusterOptions)))}init(){return NA(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0})}excuteParser(){const a=this.parser,i=a.type||"geojson",c=Xt(i);this.data=c(this.originData,a),this.tileset=this.initTileset(),!a.cancelExtent&&(this.extent=CO(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}setCenter(a){this.center=[(a[0]+a[2])/2,(a[1]+a[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}initTileset(){const{tilesetOptions:a}=this.data;return a?(this.isTile=!0,this.tileset?(this.tileset.updateOptions(a),this.tileset):new Pu(lf({},a))):void 0}executeTrans(){this.transforms.forEach(i=>{const{type:c}=i,f=qt(c)(this.data,i);Object.assign(this.data,f)})}initCluster(){if(!this.cluster)return;const a=this.clusterOptions||{};this.clusterIndex=Vb(this.data,a)}caculClusterExtent(a){let i=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(i=md(Tu(this.extent),a)),i[0].concat(i[1])}};function UA(a,i){const{callback:c}=i;return c&&(a.dataArray=a.dataArray.filter(c)),a}var lg=6378e3;function ZA(a,i){const c=a.dataArray,{size:f=10}=i,g=f/(2*Math.PI*lg)*(256<<20)/2,{gridHash:y,gridOffset:x}=HA(c,f),w=WA(y,x,i);return{yOffset:g,xOffset:g,radius:g,type:"grid",dataArray:w}}function HA(a,i){let c=1/0,f=-1/0,g;for(const T of a)g=T.coordinates[1],Number.isFinite(g)&&(c=g<c?g:c,f=g>f?g:f);const y=(c+f)/2,x=ug(i,y);if(x.xOffset<=0||x.yOffset<=0)return{gridHash:{},gridOffset:x};const w={};for(const T of a){const P=T.coordinates[1],B=T.coordinates[0];if(Number.isFinite(P)&&Number.isFinite(B)){const U=Math.floor((P+90)/x.yOffset),G=Math.floor((B+180)/x.xOffset),mt=`${U}-${G}`;w[mt]=w[mt]||{count:0,points:[]},w[mt].count+=1,w[mt].points.push(T)}}return{gridHash:w,gridOffset:x}}function ug(a,i){const c=ch(a),f=VA(i,a);return{yOffset:c,xOffset:f}}function ch(a){return a/lg*(180/Math.PI)}function VA(a,i){return i/lg*(180/Math.PI)/Math.cos(a*Math.PI/180)}function WA(a,i,c){return Object.keys(a).reduce((f,g,y)=>{const x=g.split("-"),w=parseInt(x[0],10),T=parseInt(x[1],10),P={};if(c.field&&c.method){const B=ZO(a[g].points,c.field);P[c.method]=Gy[c.method](B)}return Object.assign(P,{_id:y,coordinates:Vo([-180+i.xOffset*(T+.5),-90+i.yOffset*(w+.5)]),rawData:a[g].points,count:a[g].count}),f.push(P),f},[])}var es=Math.PI/3,GA=[0,es,2*es,3*es,4*es,5*es];function $A(a){return a[0]}function YA(a){return a[1]}function XA(){var a=0,i=0,c=1,f=1,g=$A,y=YA,x,w,T;function P(U){var G={},mt=[],Nt,Qt=U.length;for(Nt=0;Nt<Qt;++Nt)if(!(isNaN(Fe=+g.call(null,ye=U[Nt],Nt,U))||isNaN(ze=+y.call(null,ye,Nt,U)))){var ye,Fe,ze,Ve=Math.round(ze=ze/T),tn=Math.round(Fe=Fe/w-(Ve&1)/2),pn=ze-Ve;if(Math.abs(pn)*3>1){var Pn=Fe-tn,Tn=tn+(Fe<tn?-1:1)/2,kn=Ve+(ze<Ve?-1:1),or=Fe-Tn,wr=ze-kn;Pn*Pn+pn*pn>or*or+wr*wr&&(tn=Tn+(Ve&1?1:-1)/2,Ve=kn)}var qn=tn+"-"+Ve,fr=G[qn];fr?fr.push(ye):(mt.push(fr=G[qn]=[ye]),fr.x=(tn+(Ve&1)/2)*w,fr.y=Ve*T)}return mt}function B(U){var G=0,mt=0;return GA.map(function(Nt){var Qt=Math.sin(Nt)*U,ye=-Math.cos(Nt)*U,Fe=Qt-G,ze=ye-mt;return G=Qt,mt=ye,[Fe,ze]})}return P.hexagon=function(U){return"m"+B(U==null?x:+U).join("l")+"z"},P.centers=function(){for(var U=[],G=Math.round(i/T),mt=Math.round(a/w),Nt=G*T;Nt<f+x;Nt+=T,++G)for(var Qt=mt*w+(G&1)*w/2;Qt<c+w/2;Qt+=w)U.push([Qt,Nt]);return U},P.mesh=function(){var U=B(x).slice(0,4).join("l");return P.centers().map(function(G){return"M"+G+"m"+U}).join("")},P.x=function(U){return arguments.length?(g=U,P):g},P.y=function(U){return arguments.length?(y=U,P):y},P.radius=function(U){return arguments.length?(x=+U,w=x*2*Math.sin(es),T=x*1.5,P):x},P.size=function(U){return arguments.length?(a=i=0,c=+U[0],f=+U[1],P):[c-a,f-i]},P.extent=function(U){return arguments.length?(a=+U[0][0],i=+U[0][1],c=+U[1][0],f=+U[1][1],P):[[a,i],[c,f]]},P.radius(1)}var qA=Object.defineProperty,KA=Object.defineProperties,fg=Object.getOwnPropertyDescriptors,Xb=Object.getOwnPropertySymbols,QA=Object.prototype.hasOwnProperty,JA=Object.prototype.propertyIsEnumerable,ns=(a,i,c)=>i in a?qA(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,qb=(a,i)=>{for(var c in i||(i={}))QA.call(i,c)&&ns(a,c,i[c]);if(Xb)for(var c of Xb(i))JA.call(i,c)&&ns(a,c,i[c]);return a},dg=(a,i)=>KA(a,fg(i)),Kb=6378e3;function t5(a,i){const c=a.dataArray,{size:f=10,method:g="sum"}=i,y=f/(2*Math.PI*Kb)*(256<<20)/2,x=c.map(B=>{const[U,G]=Vo(B.coordinates);return dg(qb({},B),{coordinates:[U,G]})});return{dataArray:XA().radius(y).x(B=>B.coordinates[0]).y(B=>B.coordinates[1])(x).map((B,U)=>{if(i.field&&g){const G=ZO(B,i.field);B[g]=Gy[g](G)}return{[i.method]:B[g],count:B.length,rawData:B,coordinates:[B.x,B.y],_id:U}}),radius:y,xOffset:y,yOffset:y,type:"hexagon"}}var Qb=Object.defineProperty,Jb=Object.getOwnPropertySymbols,uf=Object.prototype.hasOwnProperty,Cc=Object.prototype.propertyIsEnumerable,t_=(a,i,c)=>i in a?Qb(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,ff=(a,i)=>{for(var c in i||(i={}))uf.call(i,c)&&t_(a,c,i[c]);if(Jb)for(var c of Jb(i))Cc.call(i,c)&&t_(a,c,i[c]);return a};function hg(a,i){const{sourceField:c,targetField:f,data:g}=i,y={};return g.forEach(x=>{y[x[c]]=x}),a.dataArray=a.dataArray.map(x=>{const w=x[f];return ff(ff({},x),y[w])}),a}function e_(a,i){const{callback:c}=i;return c&&(a.dataArray=a.dataArray.map(c)),a}var Oi=D(4771),lh=Object.defineProperty,hi=Object.defineProperties,Xo=Object.getOwnPropertyDescriptors,Mc=Object.getOwnPropertySymbols,n_=Object.prototype.hasOwnProperty,pg=Object.prototype.propertyIsEnumerable,gg=(a,i,c)=>i in a?lh(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,jn=(a,i)=>{for(var c in i||(i={}))n_.call(i,c)&&gg(a,c,i[c]);if(Mc)for(var c of Mc(i))pg.call(i,c)&&gg(a,c,i[c]);return a},r_=(a,i)=>hi(a,Xo(i));function e5(a){let i=1/0,c=-1/0,f=1/0,g=-1/0;a.forEach(w=>{const T=w.coordinates;if(!T)return;const P=B=>{if(typeof B[0]=="number"&&typeof B[1]=="number"){const[U,G]=B;i=Math.min(i,U),c=Math.max(c,U),f=Math.min(f,G),g=Math.max(g,G)}else Array.isArray(B[0])&&B.forEach(P)};P(T)});const y=(i+c)/2,x=(f+g)/2;return[y,x]}function df(a,i){const[c,f]=i;return a.map(g=>{if(!g.coordinates)return g;const y=x=>{if(typeof x[0]=="number"&&typeof x[1]=="number"){const w=Number((x[0]-c).toPrecision(15)),T=Number((x[1]-f).toPrecision(15));return[w,T,...x.slice(2)||[]]}else if(Array.isArray(x[0]))return x.map(y);return x};return r_(jn({},g),{coordinates:y(g.coordinates)})})}function n5(a,i){const[c,f]=i;return a.map(g=>{if(!g.coordinates)return g;const y=x=>{if(typeof x[0]=="number"&&typeof x[1]=="number"){const w=x[0]+c,T=x[1]+f;return[w,T,...x.slice(2)||[]]}else if(Array.isArray(x[0]))return x.map(y);return x};return r_(jn({},g),{coordinates:y(g.coordinates)})})}function uh(a,i={}){const{enableRelativeCoordinates:c=!1,relativeOrigin:f}=i;if(!c)return{dataArray:a,relativeOrigin:[0,0],originalExtent:[0,0,0,0]};let g=1/0,y=-1/0,x=1/0,w=-1/0;a.forEach(U=>{const G=U.coordinates;if(!G)return;const mt=Nt=>{if(typeof Nt[0]=="number"&&typeof Nt[1]=="number"){const[Qt,ye]=Nt;g=Math.min(g,Qt),y=Math.max(y,Qt),x=Math.min(x,ye),w=Math.max(w,ye)}else Array.isArray(Nt[0])&&Nt.forEach(mt)};mt(G)});const T=[g,x,y,w],P=f||e5(a);return{dataArray:df(a,P),relativeOrigin:P,originalExtent:T}}nt("rasterTile",rg),nt("mvt",E1),nt("geojsonvt",bE),nt("testTile",b6),nt("geojson",sE),nt("jsonTile",OE),nt("image",kd),nt("csv",vl),nt("json",a0),nt("raster",Dr),nt("rasterRgb",Bb),nt("rgb",mA),nt("ndi",fA),jt("cluster",Vb),jt("filter",UA),jt("join",hg),jt("map",e_),jt("grid",ZA),jt("hexagon",t5);var Lc=zA;class g9 extends null{getMarkerLayerContainerSize(){}constructor(i){super(),_defineProperty(this,"markerOption",void 0),_defineProperty(this,"popup",void 0),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"lngLat",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"added",!1),_defineProperty(this,"preLngLat",{lng:0,lat:0}),_defineProperty(this,"onMarkerDragStart",c=>{const f=this.mapsService.getContainer();if(!f)return;this.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});const{left:g,top:y}=f.getClientRects()[0],{x,y:w}=c;this.preLngLat=this.mapsService.containerToLngLat([x-g,w-y]),this.mapsService.on("mousemove",this.onMarkerDragMove),document.addEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragstart",this.lngLat)}),_defineProperty(this,"onMarkerDragMove",c=>{const f=c.lngLat||c.lnglat,{lng:g,lat:y}=this.preLngLat,{lng:x,lat:w}=f,T={lng:this.lngLat.lng+x-g,lat:this.lngLat.lat+w-y};this.setLnglat(T),this.preLngLat=f,this.emit("dragging",T)}),_defineProperty(this,"onMarkerDragEnd",()=>{this.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragend",this.lngLat)}),_defineProperty(this,"eventHandle",c=>{this.polyfillEvent(c),this.emit(c.type,{target:c,data:this.markerOption.extData,lngLat:this.lngLat})}),_defineProperty(this,"touchStartTime",void 0),this.markerOption=_objectSpread(_objectSpread({},this.getDefault()),i),bindAll(["update","onMove","onMapClick","updatePositionWhenZoom"],this),this.init()}getDefault(){return{element:void 0,anchor:anchorType.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1,overflowHide:!0}}addTo(i){this.scene=i,this.mapsService=i.mapService;const{element:c}=this.markerOption;return this.mapsService.getMarkerContainer().appendChild(c),this.registerMarkerEvent(c),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this}remove(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();const{element:i}=this.markerOption;return i&&DOM.remove(i),this.popup&&this.popup.remove(),this}setLnglat(i){return this.lngLat=i,Array.isArray(i)&&(this.lngLat={lng:i[0],lat:i[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}getLnglat(){return this.lngLat}getElement(){return this.markerOption.element}setElement(i){if(!this.added)return this.once("added",()=>{this.setElement(i)}),this;const{element:c}=this.markerOption;return c&&DOM.remove(c),this.markerOption.element=i,this.init(),this.mapsService.getMarkerContainer().appendChild(i),this.registerMarkerEvent(i),this.updateDraggable(),this.update(),this}openPopup(){if(!this.added)return this.once("added",()=>{this.openPopup()}),this;const i=this.popup;return i?(i.isOpen()||i.addTo(this.scene),this):this}closePopup(){this.added||this.once("added",()=>{this.closePopup()});const i=this.popup;return i&&i.remove(),this}setPopup(i){return this.popup=i,this.lngLat&&this.popup.setLnglat(this.lngLat),this}togglePopup(){const i=this.popup;if(i)i.isOpen()?i.remove():i.addTo(this.scene);else return this;return this}getPopup(){return this.popup}getOffset(){return this.markerOption.offsets}setDraggable(i){this.markerOption.draggable=i,this.updateDraggable()}getDraggable(){return this.markerOption.draggable}getExtData(){return this.markerOption.extData}setExtData(i){this.markerOption.extData=i}update(){if(!this.mapsService)return;const{element:i,anchor:c}=this.markerOption;this.updatePosition(),DOM.setTransform(i,`${anchorTranslate[c]}`)}updatePositionWhenZoom(i){if(!this.mapsService)return;const{element:c,offsets:f}=this.markerOption,{lng:g,lat:y}=this.lngLat;if(c){c.style.display="block",c.style.whiteSpace="nowrap";const{containerHeight:x,containerWidth:w,bounds:T}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!T)return;const P=i.map,B=i.center,U=i.zoom,G=P.DE(this.lngLat,U,B);if(G.x=Math.round(G.x+f[0]),G.y=Math.round(G.y-f[1]),Math.abs(T[0][0])>180||Math.abs(T[1][0])>180){if(G.x>w){const mt=this.mapsService.lngLatToContainer([g-360,y]);G.x=mt.x}if(G.x<0){const mt=this.mapsService.lngLatToContainer([g+360,y]);G.x=mt.x}}(G.x>w||G.x<0||G.y>x||G.y<0)&&(c.style.display="none"),c.style.left=G.x+"px",c.style.top=G.y+"px",c.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)"}}onMapClick(i){const{element:c}=this.markerOption;this.popup&&c&&this.togglePopup()}getCurrentContainerSize(){const i=this.mapsService.getContainer();return{containerHeight:(i==null?void 0:i.scrollHeight)||0,containerWidth:(i==null?void 0:i.scrollWidth)||0,bounds:this.mapsService.getBounds()}}updateDraggable(){const{element:i}=this.markerOption;i==null||i.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&(i==null||i.addEventListener("mousedown",this.onMarkerDragStart))}updatePosition(){if(!this.mapsService)return;const{element:i,offsets:c}=this.markerOption,{lng:f,lat:g}=this.lngLat,y=this.mapsService.lngLatToContainer([f,g]);if(i){i.style.display="block",i.style.whiteSpace="nowrap";const{containerHeight:x,containerWidth:w,bounds:T}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!T)return;if(Math.abs(T[0][0])>180||Math.abs(T[1][0])>180){if(y.x>w){const P=this.mapsService.lngLatToContainer([f-360,g]);y.x=P.x}if(y.x<0){const P=this.mapsService.lngLatToContainer([f+360,g]);y.x=P.x}}this.markerOption.overflowHide&&(y.x>w||y.x<0||y.y>x||y.y<0)&&(i.style.display="none"),i.style.left=y.x+c[0]+"px",i.style.top=y.y-c[1]+"px"}}init(){let{element:i}=this.markerOption;const{color:c,anchor:f}=this.markerOption;if(!i){i=DOM.create("div"),this.markerOption.element=i;const g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","48px"),g.setAttributeNS(null,"width","48px"),g.setAttributeNS(null,"viewBox","0 0 1024 1024");const y=document.createElementNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),y.setAttributeNS(null,"fill",c),g.appendChild(y),i.appendChild(g)}DOM.addClass(i,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(g=>{var y,x;const w=((y=this.markerOption)===null||y===void 0?void 0:y.style)&&((x=this.markerOption)===null||x===void 0?void 0:x.style[g]);i&&(i.style[g]=w)}),applyAnchorClass(i,f,"marker")}registerMarkerEvent(i){i.addEventListener("click",this.onMapClick),i.addEventListener("mousemove",this.eventHandle),i.addEventListener("click",this.eventHandle),i.addEventListener("mousedown",this.eventHandle),i.addEventListener("mouseup",this.eventHandle),i.addEventListener("dblclick",this.eventHandle),i.addEventListener("contextmenu",this.eventHandle),i.addEventListener("mouseover",this.eventHandle),i.addEventListener("mouseout",this.eventHandle),i.addEventListener("touchstart",this.eventHandle),i.addEventListener("touchend",this.eventHandle)}unRegisterMarkerEvent(){const i=this.getElement();i.removeEventListener("click",this.onMapClick),i.removeEventListener("mousemove",this.eventHandle),i.removeEventListener("click",this.eventHandle),i.removeEventListener("mousedown",this.eventHandle),i.removeEventListener("mouseup",this.eventHandle),i.removeEventListener("dblclick",this.eventHandle),i.removeEventListener("contextmenu",this.eventHandle),i.removeEventListener("mouseover",this.eventHandle),i.removeEventListener("mouseout",this.eventHandle),i.removeEventListener("touchstart",this.eventHandle),i.removeEventListener("touchend",this.eventHandle)}polyfillEvent(i){!this.mapsService||this.mapsService.getType()!=="amap"||isPC()||(i.type==="touchstart"&&(this.touchStartTime=Date.now()),i.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:i,data:this.markerOption.extData,lngLat:this.lngLat}))}addDragHandler(i){return null}onUp(i){throw new Error("Method not implemented.")}}const{merge:vg}=oi;class r5 extends null{constructor(i){var c;super(),_defineProperty(this,"markers",[]),_defineProperty(this,"markerLayerOption",void 0),_defineProperty(this,"clusterIndex",void 0),_defineProperty(this,"points",[]),_defineProperty(this,"clusterMarkers",[]),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"zoom",void 0),_defineProperty(this,"bbox",void 0),_defineProperty(this,"inited",void 0),_defineProperty(this,"containerSize",void 0),this.markerLayerOption=vg(this.getDefault(),i),bindAll(["update"],this),this.zoom=((c=this.markerLayerOption.clusterOption)===null||c===void 0?void 0:c.zoom)||-99}getDefault(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}addTo(i){return this.scene=i,this.mapsService=i.mapService,this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}setContainerSize(){if(!this.mapsService)return;const i=this.mapsService.getContainer();this.containerSize={containerWidth:(i==null?void 0:i.scrollWidth)||0,containerHeight:(i==null?void 0:i.scrollHeight)||0,bounds:this.mapsService.getBounds()}}getContainerSize(){return this.containerSize}addMarker(i){const c=this.markerLayerOption.cluster;if(i.getMarkerLayerContainerSize=this.getContainerSize.bind(this),c&&(this.addPoint(i,this.markers.length),this.mapsService)){const f=this.mapsService.getZoom(),g=this.mapsService.getBounds();this.bbox=padBounds(g,.5),this.zoom=Math.floor(f),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(i)}removeMarker(i){this.markers.indexOf(i);const c=this.markers.indexOf(i);c>-1&&(this.markers.splice(c,1),this.markerLayerOption.cluster&&(this.removePoint(c),this.mapsService&&this.getClusterMarker(this.bbox,this.zoom)))}hide(){this.markers.map(i=>{i.getElement().style.opacity="0"}),this.clusterMarkers.map(i=>{i.getElement().style.opacity="0"})}show(){this.markers.map(i=>{i.getElement().style.opacity="1"}),this.clusterMarkers.map(i=>{i.getElement().style.opacity="1"})}getMarkers(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}getOriginMarkers(){return this.markers}addMarkers(){this.getMarkers().forEach(i=>{i.addTo(this.scene)})}clear(){this.markers.forEach(i=>{i.remove()}),this.clusterMarkers.forEach(i=>{i.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}destroy(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}addPoint(i,c){const{lng:f,lat:g}=i.getLnglat(),y={geometry:{type:"Point",coordinates:[f,g]},properties:_objectSpread(_objectSpread({},i.getExtData()),{},{marker_id:c})};this.points.push(y),this.clusterIndex&&this.clusterIndex.load(this.points)}removePoint(i){const c=this.points.findIndex(f=>f.properties.marker_id===i);c>-1&&this.points.splice(c,1),this.clusterIndex&&this.clusterIndex.load(this.points)}initCluster(){if(!this.markerLayerOption.cluster)return;const{radius:i,minZoom:c=0,maxZoom:f}=this.markerLayerOption.clusterOption;this.clusterIndex=new Supercluster({radius:i,minZoom:c,maxZoom:f}),this.clusterIndex.load(this.points)}getClusterMarker(i,c){const f=i[0].concat(i[1]),g=this.clusterIndex.getClusters(f,c);this.clusterMarkers.forEach(y=>{y.remove()}),this.clusterMarkers=[],g.forEach(y=>{var x;const{field:w,method:T}=this.markerLayerOption.clusterOption;if((x=y.properties)!==null&&x!==void 0&&x.cluster_id){var P;const U=this.getLeaves((P=y.properties)===null||P===void 0?void 0:P.cluster_id);if(y.properties.clusterData=U,w&&T){const G=U==null?void 0:U.map(ye=>({[w]:ye.properties[w]})),mt=Satistics.getColumn(G,w),Nt=Satistics.getSatByColumn(T,mt),Qt="point_"+T;y.properties[Qt]=Nt.toFixed(2)}}const B=this.clusterMarker(y);this.clusterMarkers.push(B),B.addTo(this.scene)})}getLeaves(i,c=1/0,f=0){return i?this.clusterIndex.getLeaves(i,c,f):null}clusterMarker(i){const c=this.markerLayerOption.clusterOption,{element:f=this.generateElement.bind(this)}=c;return new Marker({element:f(i)}).setLnglat({lng:i.geometry.coordinates[0],lat:i.geometry.coordinates[1]})}normalMarker(i){const c=i.properties.marker_id;return this.markers[c]}update(){if(!this.mapsService||this.markers.length===0)return;const i=this.mapsService.getZoom(),c=this.mapsService.getBounds();(!this.bbox||Math.abs(i-this.zoom)>=1||!boundsContains(this.bbox,c))&&(this.bbox=padBounds(c,.5),this.zoom=Math.floor(i),this.getClusterMarker(this.bbox,this.zoom))}generateElement(i){const c=DOM.create("div","l7-marker-cluster"),f=DOM.create("div","",c),g=DOM.create("span","",f),{field:y,method:x}=this.markerLayerOption.clusterOption;i.properties.point_count=i.properties.point_count||1;const w=y&&x?i.properties["point_"+x]||i.properties[y]:i.properties.point_count;return g.textContent=w,c}}var i_=D(4157);class js extends Jp(){constructor(i){super(),(0,dt.Z)(this,"controlOption",void 0),(0,dt.Z)(this,"container",void 0),(0,dt.Z)(this,"isShow",void 0),(0,dt.Z)(this,"sceneContainer",void 0),(0,dt.Z)(this,"scene",void 0),(0,dt.Z)(this,"mapsService",void 0),(0,dt.Z)(this,"renderService",void 0),(0,dt.Z)(this,"layerService",void 0),(0,dt.Z)(this,"controlService",void 0),(0,dt.Z)(this,"configService",void 0),js.controlCount++,this.controlOption=(0,nn.Z)((0,nn.Z)({},this.getDefault(i)),i||{})}getOptions(){return this.controlOption}setOptions(i){const c=this.getDefault(i);Object.entries(i).forEach(([f,g])=>{g===void 0&&(i[f]=c[f])}),"position"in i&&this.setPosition(i.position),"className"in i&&this.setClassName(i.className),"style"in i&&this.setStyle(i.style),this.controlOption=(0,nn.Z)((0,nn.Z)({},this.controlOption),i)}addTo(i){this.mapsService=i.mapService,this.renderService=i.rendererService,this.layerService=i.layerService,this.controlService=i.controlService,this.configService=i.globalConfigService,this.scene=i.sceneService,this.sceneContainer=i,this.isShow=!0,this.container=this.onAdd(),Va(this.container,"l7-control");const{className:c,style:f}=this.controlOption;return c&&this.setClassName(c),f&&this.setStyle(f),this.insertContainer(),this.emit("add",this),this}remove(){if(!this.mapsService)return this;Ha(this.container),this.onRemove(),this.emit("remove",this)}onAdd(){return $i("div")}onRemove(){}show(){const i=this.container;dl(i,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}hide(){const i=this.container;Va(i,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}getDefault(i){return{position:Zd.TOPRIGHT,name:`${js.controlCount}`}}getContainer(){return this.container}getIsShow(){return this.isShow}_refocusOnMap(i){if(this.mapsService&&i&&i.screenX>0&&i.screenY>0){const c=this.mapsService.getContainer();c!==null&&c.focus()}}setPosition(i=Zd.TOPLEFT){const c=this.controlService;return c&&c.removeControl(this),this.controlOption.position=i,c&&c.addControl(this,this.sceneContainer),this}setClassName(i){const c=this.container,{className:f}=this.controlOption;f&&dl(c,f),i&&Va(c,i)}setStyle(i){const c=this.container;i?c.setAttribute("style",i):c.removeAttribute("style")}insertContainer(){const i=this.controlOption.position,c=this.container;if(i instanceof Element)i.appendChild(c);else{const f=this.controlService.controlCorners[i];["bottomleft","bottomright","righttop","rightbottom"].includes(i)?f.insertBefore(c,f.firstChild):f.appendChild(c)}}checkUpdateOption(i,c){return c.some(f=>f in i)}}(0,dt.Z)(js,"controlCount",0);class _6 extends null{constructor(...i){super(...i),_defineProperty(this,"isDisable",!1),_defineProperty(this,"button",void 0),_defineProperty(this,"buttonText",void 0),_defineProperty(this,"buttonIcon",void 0)}setIsDisable(i){if(this.isDisable=i,i){var c;(c=this.button)===null||c===void 0||c.setAttribute("disabled","true")}else{var f;(f=this.button)===null||f===void 0||f.removeAttribute("disabled")}}createButton(i=""){return DOM.create("button",`l7-button-control ${i}`)}onAdd(){this.button=this.createButton(),this.isDisable=!1;const{title:i,btnText:c,btnIcon:f}=this.controlOption;return this.setBtnTitle(i),this.setBtnText(c),this.setBtnIcon(f),this.button}onRemove(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}setOptions(i){const{title:c,btnText:f,btnIcon:g}=i;this.checkUpdateOption(i,["title"])&&this.setBtnTitle(c),this.checkUpdateOption(i,["btnIcon"])&&this.setBtnIcon(g),this.checkUpdateOption(i,["btnText"])&&this.setBtnText(f),super.setOptions(i)}setBtnTitle(i){var c;(c=this.button)===null||c===void 0||c.setAttribute("title",i!=null?i:"")}setBtnIcon(i){if(this.buttonIcon&&DOM.remove(this.buttonIcon),i){var c;const y=(c=this.button)===null||c===void 0?void 0:c.firstChild;if(y){var f;(f=this.button)===null||f===void 0||f.insertBefore(i,y)}else{var g;(g=this.button)===null||g===void 0||g.appendChild(i)}this.buttonIcon=i}}setBtnText(i){if(this.button)if(DOM.removeClass(this.button,"l7-button-control--row"),DOM.removeClass(this.button,"l7-button-control--column"),i){let f=this.buttonText;if(!f){var c;f=DOM.create("div","l7-button-control__text"),(c=this.button)===null||c===void 0||c.appendChild(f),this.buttonText=f}f.innerText=i,DOM.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!i&&this.buttonText&&(DOM.remove(this.buttonText),this.buttonText=void 0)}}class mg extends Sr.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect()}constructor(i,c){super(),(0,dt.Z)(this,"popperDOM",void 0),(0,dt.Z)(this,"contentDOM",void 0),(0,dt.Z)(this,"button",void 0),(0,dt.Z)(this,"option",void 0),(0,dt.Z)(this,"isShow",!1),(0,dt.Z)(this,"content",void 0),(0,dt.Z)(this,"timeout",null),(0,dt.Z)(this,"show",()=>this.isShow||!this.contentDOM.innerHTML?this:(this.resetPopperPosition(),dl(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&mg.conflictPopperList.forEach(f=>{f!==this&&f.isShow&&f.hide()}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick),this)),(0,dt.Z)(this,"hide",()=>this.isShow?(Va(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick),this):this),(0,dt.Z)(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null)},300))}),(0,dt.Z)(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}),(0,dt.Z)(this,"onBtnClick",()=>{this.isShow?this.hide():this.show()}),(0,dt.Z)(this,"onPopperUnClick",f=>{Bp(f.target,[".l7-button-control",".l7-popper-content"])||this.hide()}),(0,dt.Z)(this,"onBtnMouseLeave",()=>{this.setHideTimeout()}),(0,dt.Z)(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),!this.isShow&&this.show()}),this.button=i,this.option=c,this.init(),c.unique&&mg.conflictPopperList.push(this)}getPopperDOM(){return this.popperDOM}getIsShow(){return this.isShow}getContent(){return this.content}setContent(i){typeof i=="string"?this.contentDOM.innerHTML=i:i instanceof HTMLElement&&(wa(this.contentDOM),this.contentDOM.appendChild(i)),this.content=i}init(){const{trigger:i}=this.option;this.popperDOM=this.createPopper(),i==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Ha(this.popperDOM)}resetPopperPosition(){const i={},{container:c,offset:f=[0,0],placement:g}=this.option,[y,x]=f,w=this.button.getBoundingClientRect(),T=c.getBoundingClientRect(),{left:P,right:B,top:U,bottom:G}=OO(w,T);let mt=!1,Nt=!1;/^(left|right)/.test(g)?(g.includes("left")?i.right=`${w.width+B}px`:g.includes("right")&&(i.left=`${w.width+P}px`),g.includes("start")?i.top=`${U}px`:g.includes("end")?i.bottom=`${G}px`:(i.top=`${U+w.height/2}px`,Nt=!0,i.transform=`translate(${y}px, calc(${x}px - 50%))`)):/^(top|bottom)/.test(g)&&(g.includes("top")?i.bottom=`${w.height+G}px`:g.includes("bottom")&&(i.top=`${w.height+U}px`),g.includes("start")?i.left=`${P}px`:g.includes("end")?i.right=`${B}px`:(i.left=`${P+w.width/2}px`,mt=!0,i.transform=`translate(calc(${y}px - 50%), ${x}px)`)),i.transform=`translate(calc(${y}px - ${mt?"50%":"0%"}), calc(${x}px - ${Nt?"50%":"0%"})`;const Qt=g.split("-");Qt.length&&Va(this.popperDOM,Qt.map(ye=>`l7-popper-${ye}`).join(" ")),ky(this.popperDOM,fc(i))}createPopper(){const{container:i,className:c="",content:f}=this.option,g=$i("div",`l7-popper l7-popper-hide ${c}`),y=$i("div","l7-popper-content"),x=$i("div","l7-popper-arrow");return g.appendChild(y),g.appendChild(x),i.appendChild(g),this.popperDOM=g,this.contentDOM=y,f&&this.setContent(f),g}}(0,dt.Z)(mg,"conflictPopperList",[]);const o_={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"};class ai extends null{constructor(...i){super(...i),_defineProperty(this,"popper",void 0)}getPopper(){return this.popper}hide(){this.popper.hide(),super.hide()}getDefault(i){var c;const f=super.getDefault(i),g=(c=i==null?void 0:i.position)!==null&&c!==void 0?c:f.position;return _objectSpread(_objectSpread({},super.getDefault(i)),{},{popperPlacement:g instanceof Element?"bottom":o_[g],popperTrigger:"click"})}onAdd(){const i=super.onAdd();return this.initPopper(),i}onRemove(){this.popper.destroy()}initPopper(){const{popperClassName:i,popperPlacement:c,popperTrigger:f}=this.controlOption,g=this.mapsService.getMapContainer();return this.popper=new Popper(this.button,{className:i,placement:c,trigger:f,container:g,unique:!0}),this.popper.on("show",()=>{this.emit("popperShow",this)}).on("hide",()=>{this.emit("popperHide",this)}),this.popper}setOptions(i){if(super.setOptions(i),this.checkUpdateOption(i,["popperPlacement","popperTrigger","popperClassName"])){const c=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(c)}}}var zs=function(a){return a.ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index",a}(zs||{});class fh extends null{constructor(...i){super(...i),_defineProperty(this,"selectValue",[]),_defineProperty(this,"optionDOMList",void 0),_defineProperty(this,"createNormalOption",c=>{const f=this.selectValue.includes(c.value),g=DOM.create("div",`l7-select-control-item ${f?zs.ActiveOptionClassName:""}`);this.getIsMultiple()?g.appendChild(this.createCheckbox(f)):g.appendChild(this.createRadio(f)),c.icon&&g.appendChild(c.icon);const y=DOM.create("span");return y.innerText=c.text,g.appendChild(y),g}),_defineProperty(this,"onItemClick",c=>{if(this.getIsMultiple()){const f=this.selectValue.findIndex(g=>g===c.value);f>-1?this.selectValue.splice(f,1):this.selectValue=[...this.selectValue,c.value]}else this.selectValue=[c.value];this.setSelectValue(this.selectValue)})}setOptions(i){super.setOptions(i);const{options:c}=i;c&&this.popper.setContent(this.getPopperContent(c))}onAdd(){const i=super.onAdd(),{defaultValue:c}=this.controlOption;return c&&(this.selectValue=this.transSelectValue(c)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),i}getSelectValue(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}setSelectValue(i,c=!0){const f=this.transSelectValue(i);this.optionDOMList.forEach(g=>{const y=g.getAttribute(zs.OptionValueAttrKey),x=g.querySelector("input[type=checkbox]"),w=g.querySelector("input[type=radio]"),T=f.includes(y),P=(B,U)=>{DOM.toggleClass(g,zs.ActiveOptionClassName,U),B&&DOM.setChecked(B,U)};P(x,T),P(w,T)}),this.selectValue=f,c&&this.emit("selectChange",this.getIsMultiple()?f:f[0])}getIsMultiple(){return!1}getPopperContent(i){const c=this.isImageOptions(),f=DOM.create("div",c?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&DOM.addClass(f,"l7-select-control--multiple");const g=i.map((y,x)=>{const w=c?this.createImageOption(y):this.createNormalOption(y);return w.setAttribute(zs.OptionValueAttrKey,y.value),w.setAttribute(zs.OptionIndexAttrKey,window.String(x)),w.addEventListener("click",this.onItemClick.bind(this,y)),w});return f.append(...g),this.optionDOMList=g,f}createImageOption(i){const c=this.selectValue.includes(i.value),f=DOM.create("div",`l7-select-control-item ${c?zs.ActiveOptionClassName:""}`),g=DOM.create("img");g.setAttribute("src",i.img),DOM.setUnDraggable(g),f.appendChild(g);const y=DOM.create("div","l7-select-control-item-row");this.getIsMultiple()&&f.appendChild(this.createCheckbox(c));const x=DOM.create("span");return x.innerText=i.text,y.appendChild(x),f.appendChild(y),f}createCheckbox(i){const c=DOM.create("input");return c.setAttribute("type","checkbox"),i&&DOM.setChecked(c,!0),c}createRadio(i){const c=DOM.create("input");return c.setAttribute("type","radio"),i&&DOM.setChecked(c,!0),c}isImageOptions(){return!!this.controlOption.options.find(i=>i.img)}transSelectValue(i){return Array.isArray(i)?i:[i]}}const yg=a=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("l7-iconfont"),i.setAttribute("aria-hidden","true");const c=document.createElementNS("http://www.w3.org/2000/svg","use");return c.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${a}`),i.appendChild(c),i};class a_ extends null{constructor(...i){var c;super(...i),c=this,_defineProperty(this,"onClick",_asyncToGenerator(function*(){const{onExport:f}=c.controlOption;f==null||f(yield c.getImage())})),_defineProperty(this,"mergeImage",_asyncToGenerator(function*(...f){var g,y;const{imageType:x}=c.controlOption,{width:w=0,height:T=0}=(g=(y=c.mapsService.getContainer())===null||y===void 0?void 0:y.getBoundingClientRect())!==null&&g!==void 0?g:{},P=document.createElement("canvas");P.width=w,P.height=T;const B=P.getContext("2d");return(yield Promise.all(f.map(G=>new Promise(mt=>{const Nt=new Image;Nt.onload=()=>{mt(Nt)},Nt.src=G})))).forEach(G=>{B==null||B.drawImage(G,0,0,w,T)}),P.toDataURL(`image/${x}`)}))}onAdd(){const i=super.onAdd();return i.addEventListener("click",this.onClick),i}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:createL7Icon("l7-icon-export-picture"),imageType:"png"})}getImage(){var i=this;return _asyncToGenerator(function*(){const c=yield i.mapsService.exportMap("png"),f=yield i.scene.exportPng("png");return i.mergeImage(...[c,f].filter(g=>g))})()}}const Us=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],rs=(()=>{if(typeof document=="undefined")return!1;const a=Us[0],i={};for(const c of Us)if((c==null?void 0:c[1])in document){for(const[g,y]of c.entries())i[a[g]]=y;return i}return!1})(),bg={change:rs.fullscreenchange,error:rs.fullscreenerror};let qo={request(a=document.documentElement,i){return new Promise((c,f)=>{const g=()=>{qo.off("change",g),c()};qo.on("change",g);const y=a[rs.requestFullscreen](i);y instanceof Promise&&y.then(g).catch(f)})},exit(){return new Promise((a,i)=>{if(!qo.isFullscreen){a();return}const c=()=>{qo.off("change",c),a()};qo.on("change",c);const f=document[rs.exitFullscreen]();f instanceof Promise&&f.then(c).catch(i)})},toggle(a,i){return qo.isFullscreen?qo.exit():qo.request(a,i)},onchange(a){qo.on("change",a)},onerror(a){qo.on("error",a)},on(a,i){const c=bg[a];c&&document.addEventListener(c,i,!1)},off(a,i){const c=bg[a];c&&document.removeEventListener(c,i,!1)},raw:rs};Object.defineProperties(qo,{isFullscreen:{get:()=>!!document[rs.fullscreenElement]},element:{enumerable:!0,get:()=>{var a;return(a=document[rs.fullscreenElement])!==null&&a!==void 0?a:void 0}},isEnabled:{enumerable:!0,get:()=>!!document[rs.fullscreenEnabled]}}),rs||(qo={isEnabled:!1});var _g=null;class ga extends null{constructor(i){var c;super(i),c=this,_defineProperty(this,"isFullscreen",!1),_defineProperty(this,"mapContainer",void 0),_defineProperty(this,"toggleFullscreen",_asyncToGenerator(function*(){ScreenFull.isEnabled&&(yield ScreenFull.toggle(c.mapContainer))})),_defineProperty(this,"onClick",()=>{this.toggleFullscreen()}),_defineProperty(this,"onFullscreenChange",()=>{this.isFullscreen=!!document.fullscreenElement;const{btnText:f,btnIcon:g,title:y,exitBtnText:x,exitBtnIcon:w,exitTitle:T}=this.controlOption;this.isFullscreen?(this.setBtnTitle(T),this.setBtnText(x),this.setBtnIcon(w)):(this.setBtnTitle(y),this.setBtnText(f),this.setBtnIcon(g)),this.emit("fullscreenChange",this.isFullscreen)}),ScreenFull.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316")}setOptions(i){const{exitBtnText:c,exitBtnIcon:f,exitTitle:g}=i;this.isFullscreen&&(this.checkUpdateOption(i,["exitBtnIcon"])&&this.setBtnIcon(f),this.checkUpdateOption(i,["exitBtnText"])&&this.setBtnText(c),this.checkUpdateOption(i,["exitTitle"])&&this.setBtnTitle(g)),super.setOptions(i)}onAdd(){const i=super.onAdd();return i.addEventListener("click",this.onClick),this.mapContainer=DOM.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),i}onRemove(){super.onRemove(),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{title:"\u5168\u5C4F",btnIcon:createL7Icon("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:createL7Icon("l7-icon-exit-fullscreen")})}}class v9 extends null{constructor(i){var c;super(i),c=this,_defineProperty(this,"getGeoLocation",()=>new Promise((f,g)=>{window.navigator.geolocation.getCurrentPosition(({coords:y})=>{const{longitude:x,latitude:w}=y!=null?y:{};!isNaN(x)&&!isNaN(w)?f([x,w]):g()},y=>{g(y)})})),_defineProperty(this,"onClick",_asyncToGenerator(function*(){if(!window.navigator.geolocation)return;const{transform:f}=c.controlOption,g=yield c.getGeoLocation(),y=c.mapsService.getZoom();c.mapsService.setZoomAndCenter(y>15?y:15,f?yield f(g):g)})),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D")}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{title:"\u5B9A\u4F4D",btnIcon:createL7Icon("l7-icon-reposition")})}onAdd(){const i=super.onAdd();return i.addEventListener("click",this.onClick),i}}function dh(a){return Object.keys(a!=null?a:{}).every(i=>["layer","name","img"].includes(i))}class i5 extends null{constructor(...i){super(...i),_defineProperty(this,"onLayerChange",()=>{var c;(c=this.controlOption.layers)!==null&&c!==void 0&&c.length||(this.selectValue=this.getLayerVisible(),this.setOptions({options:this.getLayerOptions()}))}),_defineProperty(this,"onLayerVisibleChane",()=>{this.setSelectValue(this.getLayerVisible())}),_defineProperty(this,"onSelectChange",()=>{this.layers.forEach(c=>{const f=this.selectValue.includes(c.name),g=c.isVisible();f&&!g&&c.show(),!f&&g&&c.hide()})})}get layers(){const i=this.layerService,{layers:c}=this.controlOption;if(Array.isArray(c)&&c.length){const f=[];return c.forEach(g=>{if(g instanceof Object&&(dh(g)?f.push(g.layer):f.push(g)),typeof g=="string"){const y=i.getLayer(g)||i.getLayerByName(g);y&&f.push(y)}}),f}return i.getLayers()||[]}getDefault(i){var c;return _objectSpread(_objectSpread({},super.getDefault(i)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:createL7Icon("l7-icon-layer"),options:[],multiple:(c=i==null?void 0:i.multiple)!==null&&c!==void 0?c:!0})}getLayerVisible(){return this.layers.filter(i=>i.isVisible()).map(i=>i.name)}getLayerOptions(){const{layers:i}=this.controlOption,c=i==null?void 0:i.every(f=>f.img);return i?i==null?void 0:i.map(f=>{if(dh(f))return{text:f.name||f.layer.name,value:f.layer.name,img:c?f.img:void 0};if(typeof f=="string"){const g=this.layerService.getLayer(f)||this.layerService.getLayerByName(f);return{text:g==null?void 0:g.name,value:g==null?void 0:g.name}}return{text:f.name,value:f.name}}):this.layers.map(f=>({text:f.name,value:f.name}))}setOptions(i){const c=this.checkUpdateOption(i,["layers","multiple"]);super.setOptions(i),c&&(this.controlOption.multiple===!1&&this.handleSingleSelection(),this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}handleSingleSelection(){this.layers.forEach((i,c)=>{c===0?i.show():i.hide()})}onAdd(){var i;return this.controlOption.multiple===!1&&this.handleSingleSelection(),(i=this.controlOption.options)!==null&&i!==void 0&&i.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),super.onAdd()}onRemove(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}getIsMultiple(){return this.controlOption.multiple}}class s_ extends js{getDefault(){return{position:Zd.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}onAdd(){const i=$i("div","l7-control-logo");return this.setLogoContent(i),i}onRemove(){return null}setOptions(i){super.setOptions(i),this.checkUpdateOption(i,["img","href"])&&(wa(this.container),this.setLogoContent(this.container))}setLogoContent(i){const{href:c,img:f}=this.controlOption,g=$i("img");if(g.setAttribute("src",f),g.setAttribute("aria-label","AntV logo"),Ry(g),c){const y=$i("a","l7-control-logo-link");y.target="_blank",y.href=c,y.rel="noopener nofollow",y.setAttribute("rel","noopener nofollow"),y.appendChild(g),i.appendChild(y)}else i.appendChild(g)}}const Pl={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},hf={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};class c_ extends null{constructor(...i){super(...i),_defineProperty(this,"onMapThemeChange",()=>{this.mapsService.setMapStyle(this.selectValue[0])})}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:createL7Icon("l7-icon-color"),options:[]})}getStyleOptions(){const i=this.mapsService.getType()==="mapbox"?MapboxMapStyleConfig:GaodeMapStyleConfig;return Object.entries(this.mapsService.getMapStyleConfig()).filter(([c,f])=>typeof f=="string"&&c!=="blank").map(([c,f])=>{var g;const{text:y,img:x}=(g=i[c])!==null&&g!==void 0?g:{};return{text:y!=null?y:c,value:f,img:x,key:c}})}getMapStyle(){return this.mapsService.getMapStyle()}onAdd(){var i;if((i=this.controlOption.options)!==null&&i!==void 0&&i.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var c,f;const g=this.controlOption.defaultValue;this.controlOption.defaultValue=(c=(f=this.controlOption.options.find(y=>y.key===g))===null||f===void 0?void 0:f.value)!==null&&c!==void 0?c:g}else{const g=this.getMapStyle();g?this.controlOption.defaultValue=g:this.mapsService.map.once("styledata",()=>{const y=this.mapsService.getMapStyle();this.controlOption.defaultValue=y,this.setSelectValue(y,!1)})}return this.on("selectChange",this.onMapThemeChange),super.onAdd()}getIsMultiple(){return!1}}class x6 extends null{constructor(...i){super(...i),_defineProperty(this,"location",[0,0]),_defineProperty(this,"onMouseMove",c=>{let f=this.location;const g=c.lngLat||c.lnglat,{transform:y}=this.controlOption;g&&(f=[g.lng,g.lat]),this.location=f,y&&(f=y(f)),this.insertLocation2HTML(f),this.emit("locationChange",f)})}getLocation(){return this.location}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{position:PositionType.BOTTOMLEFT,transform:([c,f])=>[+(+c).toFixed(6),+(+f).toFixed(6)]})}onAdd(){const i=DOM.create("div","l7-control-mouse-location");return i.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),i}onRemove(){this.mapsService.off("mousemove",this.onMouseMove)}insertLocation2HTML(i){this.container.innerText=i.join(", ")}}class S6 extends null{constructor(...i){super(...i),_defineProperty(this,"mScale",void 0),_defineProperty(this,"iScale",void 0),_defineProperty(this,"update",()=>{const c=this.mapsService,{maxWidth:f}=this.controlOption,g=c.getSize()[1]/2,y=c.containerToLngLat([0,g]),x=c.containerToLngLat([f,g]),w=lnglatDistance([y.lng,y.lat],[x.lng,x.lat]);this.updateScales(w)})}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{name:"scale",position:PositionType.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}onAdd(){const c=DOM.create("div","l7-control-scale");this.resetScaleLines(c);const{updateWhenIdle:f}=this.controlOption;return this.mapsService.on(f?"moveend":"mapmove",this.update),this.mapsService.on(f?"zoomend":"zoomchange",this.update),c}onRemove(){const{updateWhenIdle:i}=this.controlOption;this.mapsService.off(i?"zoomend":"zoomchange",this.update),this.mapsService.off(i?"moveend":"mapmove",this.update)}setOptions(i){super.setOptions(i),this.checkUpdateOption(i,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}updateScales(i){const{metric:c,imperial:f}=this.controlOption;c&&i&&this.updateMetric(i),f&&i&&this.updateImperial(i)}resetScaleLines(i){DOM.clearChildren(i);const{metric:c,imperial:f,maxWidth:g,lockWidth:y}=this.controlOption;y&&DOM.addStyle(i,`width: ${g}px`),c&&(this.mScale=DOM.create("div","l7-control-scale-line",i)),f&&(this.iScale=DOM.create("div","l7-control-scale-line",i)),this.update()}updateScale(i,c,f){const{maxWidth:g}=this.controlOption;i.style.width=Math.round(g*f)+"px",i.innerHTML=c}getRoundNum(i){const c=Math.pow(10,(Math.floor(i)+"").length-1);let f=i/c;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,c*f}updateMetric(i){const c=this.getRoundNum(i),f=c<1e3?c+" m":c/1e3+" km";this.updateScale(this.mScale,f,c/i)}updateImperial(i){const c=i*3.2808399;let f,g,y;c>5280?(f=c/5280,g=this.getRoundNum(f),this.updateScale(this.iScale,g+" mi",g/f)):(y=this.getRoundNum(c),this.updateScale(this.iScale,y+" ft",y/c))}}class O6{constructor(){(0,dt.Z)(this,"mapService",void 0),(0,dt.Z)(this,"fontService",void 0)}apply(i,{styleAttributeService:c,mapService:f,fontService:g}){var y=this;this.mapService=f,this.fontService=g,i.hooks.init.tapPromise("DataMappingPlugin",(0,an.Z)(function*(){i.log(Ui.MappingStart,Yi.INIT),y.generateMaping(i,{styleAttributeService:c}),i.log(Ui.MappingEnd,Yi.INIT)})),i.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var x=(0,an.Z)(function*(w){if(!w)return w;i.dataState.dataMappingNeedUpdate=!1,i.log(Ui.MappingStart,Yi.UPDATE);const T=y.generateMaping(i,{styleAttributeService:c});return i.log(Ui.MappingEnd,Yi.UPDATE),T});return function(w){return x.apply(this,arguments)}}()),i.hooks.beforeRender.tap("DataMappingPlugin",()=>{const x=i.getSource();if(i.layerModelNeedUpdate||!x||!x.inited)return;const w=c.getLayerStyleAttributes()||[],T=c.getLayerStyleAttribute("filter"),{dataArray:P}=x.data;if(Array.isArray(P)&&P.length===0)return;const B=w.filter(G=>G.needRemapping);let U=P;if(T!=null&&T.needRemapping&&T!==null&&T!==void 0&&T.scale&&(U=P.filter(G=>this.applyAttributeMapping(T,G)[0])),B.length){const G=this.mapping(i,B,U,i.getEncodedData());i.setEncodedData(G)}})}generateMaping(i,{styleAttributeService:c}){const f=c.getLayerStyleAttributes()||[],g=c.getLayerStyleAttribute("filter"),{dataArray:y}=i.getSource().data;let x=y;g!=null&&g.scale&&(x=y.filter(T=>this.applyAttributeMapping(g,T)[0])),x=i.processData(x);const w=this.mapping(i,f,x,void 0);return i.setEncodedData(w),i.emit("dataUpdate",null),!0}mapping(i,c,f,g){const y=c.filter(w=>w.scale!==void 0).filter(w=>w.name!=="filter"),x=f.map((w,T)=>{const P=g?g[T]:{},B=(0,nn.Z)({id:w._id,coordinates:w.coordinates},P);return y.forEach(U=>{let G=this.applyAttributeMapping(U,w);(U.name==="color"||U.name==="stroke")&&(G=G.map(mt=>Ur(mt))),B[U.name]=Array.isArray(G)&&G.length===1?G[0]:G,U.name==="shape"&&(B.shape=this.fontService.getIconFontKey(B[U.name]))}),B});return c.forEach(w=>{w.needRemapping=!1}),this.adjustData2SimpleCoordinates(x),x}adjustData2SimpleCoordinates(i){i.length>0&&this.mapService.version==="SIMPLE"&&i.map(c=>{c.simpleCoordinate||(c.coordinates=this.unProjectCoordinates(c.coordinates),c.simpleCoordinate=!0)})}unProjectCoordinates(i){if(typeof i[0]=="number")return this.mapService.simpleMapCoord.unproject(i);if(i[0]&&i[0][0]instanceof Array){const c=[];return i.map(f=>{const g=[];f.map(y=>{g.push(this.mapService.simpleMapCoord.unproject(y))}),c.push(g)}),c}else{const c=[];return i.map(f=>{c.push(this.mapService.simpleMapCoord.unproject(f))}),c}}applyAttributeMapping(i,c){var f;if(!i.scale)return[];const g=(i==null||(f=i.scale)===null||f===void 0?void 0:f.scalers)||[],y=[];return g.forEach(({field:w})=>{var T;(c.hasOwnProperty(w)||((T=i.scale)===null||T===void 0?void 0:T.type)==="variable")&&y.push(c[w])}),i.mapping?i.mapping(y):[]}getArrowPoints(i,c){const f=[c[0]-i[0],c[1]-i[1]],g=gi(f);return[i[0]+g[0]*1e-4,i[1]+g[1]*1e-4]}}class o5{constructor(){(0,dt.Z)(this,"mapService",void 0)}apply(i){var c=this;this.mapService=i.getContainer().mapService,i.hooks.init.tapPromise("DataSourcePlugin",(0,an.Z)(function*(){i.log(Ui.SourceInitStart,Yi.INIT);let f=i.getSource();if(!f){const{data:g,options:y}=i.sourceOption||i.defaultSourceConfig;f=new Lc(g,y),i.setSource(f)}f.inited?(c.updateClusterData(i),i.log(Ui.SourceInitEnd,Yi.INIT)):yield new Promise(g=>{f.on("update",y=>{y.type==="inited"&&(c.updateClusterData(i),i.log(Ui.SourceInitEnd,Yi.INIT)),g(null)})})})),i.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,an.Z)(function*(){const f=c.updateClusterData(i),g=i.dataState.dataSourceNeedUpdate;return i.dataState.dataSourceNeedUpdate=!1,f||g}))}updateClusterData(i){if(i.isTileLayer||i.tileLayer||!i.getSource())return!1;const c=i.getSource(),f=c.cluster,{zoom:g=0}=c.clusterOptions,y=this.mapService.getZoom()-1,x=i.dataState.dataSourceNeedUpdate;return f&&x&&c.updateClusterData(Math.floor(y)),f&&Math.abs(i.clusterZoom-y)>=1?(g!==Math.floor(y)&&c.updateClusterData(Math.floor(y)),i.clusterZoom=y,!0):!1}}var l_=D(64599),Pc=D.n(l_);function u_(a,i){var c,f;if(i===void 0){var g=Pc()(a),y;try{for(g.s();!(y=g.n()).done;){var x=y.value;x!=null&&(c===void 0?x>=x&&(c=f=x):(c>x&&(c=x),f<x&&(f=x)))}}catch(U){g.e(U)}finally{g.f()}}else{var w=-1,T=Pc()(a),P;try{for(T.s();!(P=T.n()).done;){var B=P.value;(B=i(B,++w,a))!=null&&(c===void 0?B>=B&&(c=f=B):(c>B&&(c=B),f<B&&(f=B)))}}catch(U){T.e(U)}finally{T.f()}}return[c,f]}function xg(a,i,c,f,g){var y=a*a,x=y*a;return((1-3*a+3*y-x)*i+(4-6*y+3*x)*c+(1+3*a+3*y-3*x)*f+x*g)/6}function f_(a){var i=a.length-1;return function(c){var f=c<=0?c=0:c>=1?(c=1,i-1):Math.floor(c*i),g=a[f],y=a[f+1],x=f>0?a[f-1]:2*g-y,w=f<i-1?a[f+2]:2*y-g;return xg((c-f/i)*i,x,g,y,w)}}function pf(a){var i=a.length;return function(c){var f=Math.floor(((c%=1)<0?++c:c)*i),g=a[(f+i-1)%i],y=a[f%i],x=a[(f+1)%i],w=a[(f+2)%i];return xg((c-f/i)*i,g,y,x,w)}}function hh(a){return function(){return a}}function d_(a,i){return function(c){return a+c*i}}function h_(a,i,c){return a=Math.pow(a,c),i=Math.pow(i,c)-a,c=1/c,function(f){return Math.pow(a+f*i,c)}}function a5(a,i){var c=i-a;return c?d_(a,c>180||c<-180?c-360*Math.round(c/360):c):constant(isNaN(a)?i:a)}function is(a){return(a=+a)==1?p_:function(i,c){return c-i?h_(i,c,a):hh(isNaN(i)?c:i)}}function p_(a,i){var c=i-a;return c?d_(a,c):hh(isNaN(a)?i:a)}var s5=function a(i){var c=is(i);function f(g,y){var x=c((g=Bt(g)).r,(y=Bt(y)).r),w=c(g.g,y.g),T=c(g.b,y.b),P=p_(g.opacity,y.opacity);return function(B){return g.r=x(B),g.g=w(B),g.b=T(B),g.opacity=P(B),g+""}}return f.gamma=a,f}(1);function Sg(a){return function(i){var c=i.length,f=new Array(c),g=new Array(c),y=new Array(c),x,w;for(x=0;x<c;++x)w=Bt(i[x]),f[x]=w.r||0,g[x]=w.g||0,y[x]=w.b||0;return f=a(f),g=a(g),y=a(y),w.opacity=1,function(T){return w.r=f(T),w.g=g(T),w.b=y(T),w+""}}}var Og=Sg(f_),E6=Sg(pf);function si(a,i){return a<i?-1:a>i?1:a>=i?0:NaN}function g_(a){return a.length===1&&(a=va(a)),{left:function(i,c,f,g){for(f==null&&(f=0),g==null&&(g=i.length);f<g;){var y=f+g>>>1;a(i[y],c)<0?f=y+1:g=y}return f},right:function(i,c,f,g){for(f==null&&(f=0),g==null&&(g=i.length);f<g;){var y=f+g>>>1;a(i[y],c)>0?g=y:f=y+1}return f}}}function va(a){return function(i,c){return si(a(i),c)}}var Eg=g_(si),gf=Eg.right,c5=Eg.left,vf=gf,v_=Array.prototype,wg=v_.slice,w6=v_.map,Ag=Math.sqrt(50),Tg=Math.sqrt(10),Cg=Math.sqrt(2);function Mg(a,i,c){var f,g=-1,y,x,w;if(i=+i,a=+a,c=+c,a===i&&c>0)return[a];if((f=i<a)&&(y=a,a=i,i=y),(w=ph(a,i,c))===0||!isFinite(w))return[];if(w>0)for(a=Math.ceil(a/w),i=Math.floor(i/w),x=new Array(y=Math.ceil(i-a+1));++g<y;)x[g]=(a+g)*w;else for(a=Math.floor(a*w),i=Math.ceil(i*w),x=new Array(y=Math.ceil(a-i+1));++g<y;)x[g]=(a-g)/w;return f&&x.reverse(),x}function ph(a,i,c){var f=(i-a)/Math.max(0,c),g=Math.floor(Math.log(f)/Math.LN10),y=f/Math.pow(10,g);return g>=0?(y>=Ag?10:y>=Tg?5:y>=Cg?2:1)*Math.pow(10,g):-Math.pow(10,-g)/(y>=Ag?10:y>=Tg?5:y>=Cg?2:1)}function Lg(a,i,c){var f=Math.abs(i-a)/Math.max(0,c),g=Math.pow(10,Math.floor(Math.log(f)/Math.LN10)),y=f/g;return y>=Ag?g*=10:y>=Tg?g*=5:y>=Cg&&(g*=2),i<a?-g:g}function l5(){var a=identity,i=extent,c=sturges;function f(g){var y,x=g.length,w,T=new Array(x);for(y=0;y<x;++y)T[y]=a(g[y],y,g);var P=i(T),B=P[0],U=P[1],G=c(T,B,U);Array.isArray(G)||(G=tickStep(B,U,G),G=range(Math.ceil(B/G)*G,U,G));for(var mt=G.length;G[0]<=B;)G.shift(),--mt;for(;G[mt-1]>U;)G.pop(),--mt;var Nt=new Array(mt+1),Qt;for(y=0;y<=mt;++y)Qt=Nt[y]=[],Qt.x0=y>0?G[y-1]:B,Qt.x1=y<mt?G[y]:U;for(y=0;y<x;++y)w=T[y],B<=w&&w<=U&&Nt[bisect(G,w,0,mt)].push(g[y]);return Nt}return f.value=function(g){return arguments.length?(a=typeof g=="function"?g:constant(g),f):a},f.domain=function(g){return arguments.length?(i=typeof g=="function"?g:constant([g[0],g[1]]),f):i},f.thresholds=function(g){return arguments.length?(c=typeof g=="function"?g:Array.isArray(g)?constant(slice.call(g)):constant(g),f):c},f}function Pg(a,i,c){return a=map.call(a,number).sort(ascending),Math.ceil((c-i)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}function gh(a){return a===null?NaN:+a}function u5(a,i,c){if(c==null&&(c=gh),!!(f=a.length)){if((i=+i)<=0||f<2)return+c(a[0],0,a);if(i>=1)return+c(a[f-1],f-1,a);var f,g=(f-1)*i,y=Math.floor(g),x=+c(a[y],y,a),w=+c(a[y+1],y+1,a);return x+(w-x)*(g-y)}}var Ko="$";function vh(){}vh.prototype=Zs.prototype={constructor:vh,has:function(a){return Ko+a in this},get:function(a){return this[Ko+a]},set:function(a,i){return this[Ko+a]=i,this},remove:function(a){var i=Ko+a;return i in this&&delete this[i]},clear:function(){for(var a in this)a[0]===Ko&&delete this[a]},keys:function(){var a=[];for(var i in this)i[0]===Ko&&a.push(i.slice(1));return a},values:function(){var a=[];for(var i in this)i[0]===Ko&&a.push(this[i]);return a},entries:function(){var a=[];for(var i in this)i[0]===Ko&&a.push({key:i.slice(1),value:this[i]});return a},size:function(){var a=0;for(var i in this)i[0]===Ko&&++a;return a},empty:function(){for(var a in this)if(a[0]===Ko)return!1;return!0},each:function(a){for(var i in this)i[0]===Ko&&a(this[i],i.slice(1),this)}};function Zs(a,i){var c=new vh;if(a instanceof vh)a.each(function(w,T){c.set(T,w)});else if(Array.isArray(a)){var f=-1,g=a.length,y;if(i==null)for(;++f<g;)c.set(f,a[f]);else for(;++f<g;)c.set(i(y=a[f],f,a),y)}else if(a)for(var x in a)c.set(x,a[x]);return c}var Ig=Zs;function f5(){var a=[],i=[],c,f,g;function y(w,T,P,B){if(T>=a.length)return c!=null&&w.sort(c),f!=null?f(w):w;for(var U=-1,G=w.length,mt=a[T++],Nt,Qt,ye=map(),Fe,ze=P();++U<G;)(Fe=ye.get(Nt=mt(Qt=w[U])+""))?Fe.push(Qt):ye.set(Nt,[Qt]);return ye.each(function(Ve,tn){B(ze,tn,y(Ve,T,P,B))}),ze}function x(w,T){if(++T>a.length)return w;var P,B=i[T-1];return f!=null&&T>=a.length?P=w.entries():(P=[],w.each(function(U,G){P.push({key:G,values:x(U,T)})})),B!=null?P.sort(function(U,G){return B(U.key,G.key)}):P}return g={object:function(w){return y(w,0,d5,os)},map:function(w){return y(w,0,m_,y_)},entries:function(w){return x(y(w,0,m_,y_),0)},key:function(w){return a.push(w),g},sortKeys:function(w){return i[a.length-1]=w,g},sortValues:function(w){return c=w,g},rollup:function(w){return f=w,g}}}function d5(){return{}}function os(a,i,c){a[i]=c}function m_(){return map()}function y_(a,i,c){a.set(i,c)}function mf(){}var as=Ig.prototype;mf.prototype=h5.prototype={constructor:mf,has:as.has,add:function(a){return a+="",this[Ko+a]=a,this},remove:as.remove,clear:as.clear,values:as.keys,size:as.size,empty:as.empty,each:as.each};function h5(a,i){var c=new mf;if(a instanceof mf)a.each(function(y){c.add(y)});else if(a){var f=-1,g=a.length;if(i==null)for(;++f<g;)c.add(a[f]);else for(;++f<g;)c.add(i(a[f],f,a))}return c}var p5=null,b_=Array.prototype,__=b_.map,Ic=b_.slice;function Hs(a,i){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(i).domain(a);break}return this}function x_(a,i){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(i).domain(a);break}return this}var La={name:"implicit"};function ss(){var a=Ig(),i=[],c=[],f=La;function g(y){var x=y+"",w=a.get(x);if(!w){if(f!==La)return f;a.set(x,w=i.push(y))}return c[(w-1)%c.length]}return g.domain=function(y){if(!arguments.length)return i.slice();i=[],a=Ig();for(var x=-1,w=y.length,T,P;++x<w;)a.has(P=(T=y[x])+"")||a.set(P,i.push(T));return g},g.range=function(y){return arguments.length?(c=Ic.call(y),g):c.slice()},g.unknown=function(y){return arguments.length?(f=y,g):f},g.copy=function(){return ss(i,c).unknown(f)},Hs.apply(g,arguments),g}function cs(){var a=ordinal().unknown(void 0),i=a.domain,c=a.range,f=[0,1],g,y,x=!1,w=0,T=0,P=.5;delete a.unknown;function B(){var U=i().length,G=f[1]<f[0],mt=f[G-0],Nt=f[1-G];g=(Nt-mt)/Math.max(1,U-w+T*2),x&&(g=Math.floor(g)),mt+=(Nt-mt-g*(U-w))*P,y=g*(1-w),x&&(mt=Math.round(mt),y=Math.round(y));var Qt=sequence(U).map(function(ye){return mt+g*ye});return c(G?Qt.reverse():Qt)}return a.domain=function(U){return arguments.length?(i(U),B()):i()},a.range=function(U){return arguments.length?(f=[+U[0],+U[1]],B()):f.slice()},a.rangeRound=function(U){return f=[+U[0],+U[1]],x=!0,B()},a.bandwidth=function(){return y},a.step=function(){return g},a.round=function(U){return arguments.length?(x=!!U,B()):x},a.padding=function(U){return arguments.length?(w=Math.min(1,T=+U),B()):w},a.paddingInner=function(U){return arguments.length?(w=Math.min(1,U),B()):w},a.paddingOuter=function(U){return arguments.length?(T=+U,B()):T},a.align=function(U){return arguments.length?(P=Math.max(0,Math.min(1,U)),B()):P},a.copy=function(){return cs(i(),f).round(x).paddingInner(w).paddingOuter(T).align(P)},initRange.apply(B(),arguments)}function yf(a){var i=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return yf(i())},a}function g5(){return yf(cs.apply(null,arguments).paddingInner(1))}function kg(a,i,c,f,g){var y=a*a,x=y*a;return((1-3*a+3*y-x)*i+(4-6*y+3*x)*c+(1+3*a+3*y-3*x)*f+x*g)/6}function v5(a){var i=a.length-1;return function(c){var f=c<=0?c=0:c>=1?(c=1,i-1):Math.floor(c*i),g=a[f],y=a[f+1],x=f>0?a[f-1]:2*g-y,w=f<i-1?a[f+2]:2*y-g;return kg((c-f/i)*i,x,g,y,w)}}function S_(a){var i=a.length;return function(c){var f=Math.floor(((c%=1)<0?++c:c)*i),g=a[(f+i-1)%i],y=a[f%i],x=a[(f+1)%i],w=a[(f+2)%i];return kg((c-f/i)*i,g,y,x,w)}}function qi(a){return function(){return a}}function Vs(a,i){return function(c){return a+c*i}}function m5(a,i,c){return a=Math.pow(a,c),i=Math.pow(i,c)-a,c=1/c,function(f){return Math.pow(a+f*i,c)}}function O_(a,i){var c=i-a;return c?Vs(a,c>180||c<-180?c-360*Math.round(c/360):c):constant(isNaN(a)?i:a)}function Pa(a){return(a=+a)==1?kc:function(i,c){return c-i?m5(i,c,a):qi(isNaN(i)?c:i)}}function kc(a,i){var c=i-a;return c?Vs(a,c):qi(isNaN(a)?i:a)}var ao=function a(i){var c=Pa(i);function f(g,y){var x=c((g=Bt(g)).r,(y=Bt(y)).r),w=c(g.g,y.g),T=c(g.b,y.b),P=kc(g.opacity,y.opacity);return function(B){return g.r=x(B),g.g=w(B),g.b=T(B),g.opacity=P(B),g+""}}return f.gamma=a,f}(1);function Il(a){return function(i){var c=i.length,f=new Array(c),g=new Array(c),y=new Array(c),x,w;for(x=0;x<c;++x)w=Bt(i[x]),f[x]=w.r||0,g[x]=w.g||0,y[x]=w.b||0;return f=a(f),g=a(g),y=a(y),w.opacity=1,function(T){return w.r=f(T),w.g=g(T),w.b=y(T),w+""}}}var Rg=Il(v5),A6=Il(S_);function T6(a,i){return(isNumberArray(i)?numberArray:Dg)(a,i)}function Dg(a,i){var c=i?i.length:0,f=a?Math.min(c,a.length):0,g=new Array(f),y=new Array(c),x;for(x=0;x<f;++x)g[x]=Rc(a[x],i[x]);for(;x<c;++x)y[x]=i[x];return function(w){for(x=0;x<f;++x)y[x]=g[x](w);return y}}function y5(a,i){var c=new Date;return a=+a,i=+i,function(f){return c.setTime(a*(1-f)+i*f),c}}function mh(a,i){return a=+a,i=+i,function(c){return a*(1-c)+i*c}}function b5(a,i){var c={},f={},g;(a===null||typeof a!="object")&&(a={}),(i===null||typeof i!="object")&&(i={});for(g in i)g in a?c[g]=Rc(a[g],i[g]):f[g]=i[g];return function(y){for(g in c)f[g]=c[g](y);return f}}var Ng=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fg=new RegExp(Ng.source,"g");function _5(a){return function(){return a}}function yh(a){return function(i){return a(i)+""}}function Bg(a,i){var c=Ng.lastIndex=Fg.lastIndex=0,f,g,y,x=-1,w=[],T=[];for(a=a+"",i=i+"";(f=Ng.exec(a))&&(g=Fg.exec(i));)(y=g.index)>c&&(y=i.slice(c,y),w[x]?w[x]+=y:w[++x]=y),(f=f[0])===(g=g[0])?w[x]?w[x]+=g:w[++x]=g:(w[++x]=null,T.push({i:x,x:mh(f,g)})),c=Fg.lastIndex;return c<i.length&&(y=i.slice(c),w[x]?w[x]+=y:w[++x]=y),w.length<2?T[0]?yh(T[0].x):_5(i):(i=T.length,function(P){for(var B=0,U;B<i;++B)w[(U=T[B]).i]=U.x(P);return w.join("")})}function bh(a,i){i||(i=[]);var c=a?Math.min(i.length,a.length):0,f=i.slice(),g;return function(y){for(g=0;g<c;++g)f[g]=a[g]*(1-y)+i[g]*y;return f}}function E_(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Rc(a,i){var c=typeof i,f;return i==null||c==="boolean"?qi(i):(c==="number"?mh:c==="string"?(f=Wr(i))?(i=f,ao):Bg:i instanceof Wr?ao:i instanceof Date?y5:E_(i)?bh:Array.isArray(i)?Dg:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?b5:mh)(a,i)}function bf(a,i){return a=+a,i=+i,function(c){return Math.round(a*(1-c)+i*c)}}function x5(a){return function(){return a}}function S5(a){return+a}var _h=[0,1];function Ki(a){return a}function kl(a,i){return(i-=a=+a)?function(c){return(c-a)/i}:x5(isNaN(i)?NaN:.5)}function Rl(a){var i=a[0],c=a[a.length-1],f;return i>c&&(f=i,i=c,c=f),function(g){return Math.max(i,Math.min(c,g))}}function Ws(a,i,c){var f=a[0],g=a[1],y=i[0],x=i[1];return g<f?(f=kl(g,f),y=c(x,y)):(f=kl(f,g),y=c(y,x)),function(w){return y(f(w))}}function w_(a,i,c){var f=Math.min(a.length,i.length)-1,g=new Array(f),y=new Array(f),x=-1;for(a[f]<a[0]&&(a=a.slice().reverse(),i=i.slice().reverse());++x<f;)g[x]=kl(a[x],a[x+1]),y[x]=c(i[x],i[x+1]);return function(w){var T=vf(a,w,1,f)-1;return y[T](g[T](w))}}function Dl(a,i){return i.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function No(){var a=_h,i=_h,c=Rc,f,g,y,x=Ki,w,T,P;function B(){return w=Math.min(a.length,i.length)>2?w_:Ws,T=P=null,U}function U(G){return isNaN(G=+G)?y:(T||(T=w(a.map(f),i,c)))(f(x(G)))}return U.invert=function(G){return x(g((P||(P=w(i,a.map(f),mh)))(G)))},U.domain=function(G){return arguments.length?(a=__.call(G,S5),x===Ki||(x=Rl(a)),B()):a.slice()},U.range=function(G){return arguments.length?(i=Ic.call(G),B()):i.slice()},U.rangeRound=function(G){return i=Ic.call(G),c=bf,B()},U.clamp=function(G){return arguments.length?(x=G?Rl(a):Ki,U):x!==Ki},U.interpolate=function(G){return arguments.length?(c=G,B()):c},U.unknown=function(G){return arguments.length?(y=G,U):y},function(G,mt){return f=G,g=mt,B()}}function _f(a,i){return No()(a,i)}var Dc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nl(a){if(!(i=Dc.exec(a)))throw new Error("invalid format: "+a);var i;return new jg({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}Nl.prototype=jg.prototype;function jg(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}jg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function A_(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function Gs(a,i){if((c=(a=i?a.toExponential(i-1):a.toExponential()).indexOf("e"))<0)return null;var c,f=a.slice(0,c);return[f.length>1?f[0]+f.slice(2):f,+a.slice(c+1)]}function Qo(a){return a=Gs(Math.abs(a)),a?a[1]:NaN}function T_(a,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qo(i)/3)))*3-Qo(Math.abs(a)))}function O5(a,i){return function(c,f){for(var g=c.length,y=[],x=0,w=a[0],T=0;g>0&&w>0&&(T+w+1>f&&(w=Math.max(1,f-T)),y.push(c.substring(g-=w,g+w)),!((T+=w+1)>f));)w=a[x=(x+1)%a.length];return y.reverse().join(i)}}function C_(a){return function(i){return i.replace(/[0-9]/g,function(c){return a[+c]})}}function M_(a){t:for(var i=a.length,c=1,f=-1,g;c<i;++c)switch(a[c]){case".":f=g=c;break;case"0":f===0&&(f=c),g=c;break;default:if(!+a[c])break t;f>0&&(f=0);break}return f>0?a.slice(0,f)+a.slice(g+1):a}var ls;function E5(a,i){var c=Gs(a,i);if(!c)return a+"";var f=c[0],g=c[1],y=g-(ls=Math.max(-8,Math.min(8,Math.floor(g/3)))*3)+1,x=f.length;return y===x?f:y>x?f+new Array(y-x+1).join("0"):y>0?f.slice(0,y)+"."+f.slice(y):"0."+new Array(1-y).join("0")+Gs(a,Math.max(0,i+y-1))[0]}function xf(a,i){var c=Gs(a,i);if(!c)return a+"";var f=c[0],g=c[1];return g<0?"0."+new Array(-g).join("0")+f:f.length>g+1?f.slice(0,g+1)+"."+f.slice(g+1):f+new Array(g-f.length+2).join("0")}var Nc={"%":function(a,i){return(a*100).toFixed(i)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:A_,e:function(a,i){return a.toExponential(i)},f:function(a,i){return a.toFixed(i)},g:function(a,i){return a.toPrecision(i)},o:function(a){return Math.round(a).toString(8)},p:function(a,i){return xf(a*100,i)},r:xf,s:E5,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function Fl(a){return a}var zg=Array.prototype.map,Ug=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function L_(a){var i=a.grouping===void 0||a.thousands===void 0?Fl:O5(zg.call(a.grouping,Number),a.thousands+""),c=a.currency===void 0?"":a.currency[0]+"",f=a.currency===void 0?"":a.currency[1]+"",g=a.decimal===void 0?".":a.decimal+"",y=a.numerals===void 0?Fl:C_(zg.call(a.numerals,String)),x=a.percent===void 0?"%":a.percent+"",w=a.minus===void 0?"-":a.minus+"",T=a.nan===void 0?"NaN":a.nan+"";function P(U){U=Nl(U);var G=U.fill,mt=U.align,Nt=U.sign,Qt=U.symbol,ye=U.zero,Fe=U.width,ze=U.comma,Ve=U.precision,tn=U.trim,pn=U.type;pn==="n"?(ze=!0,pn="g"):Nc[pn]||(Ve===void 0&&(Ve=12),tn=!0,pn="g"),(ye||G==="0"&&mt==="=")&&(ye=!0,G="0",mt="=");var Pn=Qt==="$"?c:Qt==="#"&&/[boxX]/.test(pn)?"0"+pn.toLowerCase():"",Tn=Qt==="$"?f:/[%p]/.test(pn)?x:"",kn=Nc[pn],or=/[defgprs%]/.test(pn);Ve=Ve===void 0?6:/[gprs]/.test(pn)?Math.max(1,Math.min(21,Ve)):Math.max(0,Math.min(20,Ve));function wr(qn){var fr=Pn,Br=Tn,aa,rl,_s;if(pn==="c")Br=kn(qn)+Br,qn="";else{qn=+qn;var il=qn<0||1/qn<0;if(qn=isNaN(qn)?T:kn(Math.abs(qn),Ve),tn&&(qn=M_(qn)),il&&+qn==0&&Nt!=="+"&&(il=!1),fr=(il?Nt==="("?Nt:w:Nt==="-"||Nt==="("?"":Nt)+fr,Br=(pn==="s"?Ug[8+ls/3]:"")+Br+(il&&Nt==="("?")":""),or){for(aa=-1,rl=qn.length;++aa<rl;)if(_s=qn.charCodeAt(aa),48>_s||_s>57){Br=(_s===46?g+qn.slice(aa+1):qn.slice(aa))+Br,qn=qn.slice(0,aa);break}}}ze&&!ye&&(qn=i(qn,1/0));var xs=fr.length+qn.length+Br.length,sa=xs<Fe?new Array(Fe-xs+1).join(G):"";switch(ze&&ye&&(qn=i(sa+qn,sa.length?Fe-Br.length:1/0),sa=""),mt){case"<":qn=fr+qn+Br+sa;break;case"=":qn=fr+sa+qn+Br;break;case"^":qn=sa.slice(0,xs=sa.length>>1)+fr+qn+Br+sa.slice(xs);break;default:qn=sa+fr+qn+Br;break}return y(qn)}return wr.toString=function(){return U+""},wr}function B(U,G){var mt=P((U=Nl(U),U.type="f",U)),Nt=Math.max(-8,Math.min(8,Math.floor(Qo(G)/3)))*3,Qt=Math.pow(10,-Nt),ye=Ug[8+Nt/3];return function(Fe){return mt(Qt*Fe)+ye}}return{format:P,formatPrefix:B}}var ma,Zg,xh;Sh({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Sh(a){return ma=L_(a),Zg=ma.format,xh=ma.formatPrefix,ma}function Sf(a,i){return a=Math.abs(a),i=Math.abs(i)-a,Math.max(0,Qo(i)-Qo(a))+1}function P_(a){return Math.max(0,-Qo(Math.abs(a)))}function w5(a,i,c,f){var g=Lg(a,i,c),y;switch(f=Nl(f==null?",f":f),f.type){case"s":{var x=Math.max(Math.abs(a),Math.abs(i));return f.precision==null&&!isNaN(y=T_(g,x))&&(f.precision=y),xh(f,x)}case"":case"e":case"g":case"p":case"r":{f.precision==null&&!isNaN(y=Sf(g,Math.max(Math.abs(a),Math.abs(i))))&&(f.precision=y-(f.type==="e"));break}case"f":case"%":{f.precision==null&&!isNaN(y=P_(g))&&(f.precision=y-(f.type==="%")*2);break}}return Zg(f)}function us(a){var i=a.domain;return a.ticks=function(c){var f=i();return Mg(f[0],f[f.length-1],c==null?10:c)},a.tickFormat=function(c,f){var g=i();return w5(g[0],g[g.length-1],c==null?10:c,f)},a.nice=function(c){c==null&&(c=10);var f=i(),g=0,y=f.length-1,x=f[g],w=f[y],T;return w<x&&(T=x,x=w,w=T,T=g,g=y,y=T),T=ph(x,w,c),T>0?(x=Math.floor(x/T)*T,w=Math.ceil(w/T)*T,T=ph(x,w,c)):T<0&&(x=Math.ceil(x*T)/T,w=Math.floor(w*T)/T,T=ph(x,w,c)),T>0?(f[g]=Math.floor(x/T)*T,f[y]=Math.ceil(w/T)*T,i(f)):T<0&&(f[g]=Math.ceil(x*T)/T,f[y]=Math.floor(w*T)/T,i(f)),a},a}function Oh(){var a=_f(Ki,Ki);return a.copy=function(){return Dl(a,Oh())},Hs.apply(a,arguments),us(a)}function I_(a){var i;function c(f){return isNaN(f=+f)?i:f}return c.invert=c,c.domain=c.range=function(f){return arguments.length?(a=map.call(f,number),c):a.slice()},c.unknown=function(f){return arguments.length?(i=f,c):i},c.copy=function(){return I_(a).unknown(i)},a=arguments.length?map.call(a,number):[0,1],linearish(c)}function k_(a,i){a=a.slice();var c=0,f=a.length-1,g=a[c],y=a[f],x;return y<g&&(x=c,c=f,f=x,x=g,g=y,y=x),a[c]=i.floor(g),a[f]=i.ceil(y),a}function Hg(a){return Math.log(a)}function R_(a){return Math.exp(a)}function D_(a){return-Math.log(-a)}function A5(a){return-Math.exp(-a)}function N_(a){return isFinite(a)?+("1e"+a):a<0?0:a}function T5(a){return a===10?N_:a===Math.E?Math.exp:function(i){return Math.pow(a,i)}}function C5(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(i){return Math.log(i)/a})}function F_(a){return function(i){return-a(-i)}}function Qi(a){var i=a(Hg,R_),c=i.domain,f=10,g,y;function x(){return g=C5(f),y=T5(f),c()[0]<0?(g=F_(g),y=F_(y),a(D_,A5)):a(Hg,R_),i}return i.base=function(w){return arguments.length?(f=+w,x()):f},i.domain=function(w){return arguments.length?(c(w),x()):c()},i.ticks=function(w){var T=c(),P=T[0],B=T[T.length-1],U;(U=B<P)&&(G=P,P=B,B=G);var G=g(P),mt=g(B),Nt,Qt,ye,Fe=w==null?10:+w,ze=[];if(!(f%1)&&mt-G<Fe){if(G=Math.round(G)-1,mt=Math.round(mt)+1,P>0){for(;G<mt;++G)for(Qt=1,Nt=y(G);Qt<f;++Qt)if(ye=Nt*Qt,!(ye<P)){if(ye>B)break;ze.push(ye)}}else for(;G<mt;++G)for(Qt=f-1,Nt=y(G);Qt>=1;--Qt)if(ye=Nt*Qt,!(ye<P)){if(ye>B)break;ze.push(ye)}}else ze=Mg(G,mt,Math.min(mt-G,Fe)).map(y);return U?ze.reverse():ze},i.tickFormat=function(w,T){if(T==null&&(T=f===10?".0e":","),typeof T!="function"&&(T=Zg(T)),w===1/0)return T;w==null&&(w=10);var P=Math.max(1,f*w/i.ticks().length);return function(B){var U=B/y(Math.round(g(B)));return U*f<f-.5&&(U*=f),U<=P?T(B):""}},i.nice=function(){return c(k_(c(),{floor:function(w){return y(Math.floor(g(w)))},ceil:function(w){return y(Math.ceil(g(w)))}}))},i}function Vg(){var a=Qi(No()).domain([1,10]);return a.copy=function(){return Dl(a,Vg()).base(a.base())},Hs.apply(a,arguments),a}function B_(a){return function(i){return Math.sign(i)*Math.log1p(Math.abs(i/a))}}function j_(a){return function(i){return Math.sign(i)*Math.expm1(Math.abs(i))*a}}function qr(a){var i=1,c=a(B_(i),j_(i));return c.constant=function(f){return arguments.length?a(B_(i=+f),j_(i)):i},linearish(c)}function z_(){var a=qr(transformer());return a.copy=function(){return copy(a,z_()).constant(a.constant())},initRange.apply(a,arguments)}function Wg(a){return function(i){return i<0?-Math.pow(-i,a):Math.pow(i,a)}}function M5(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function U_(a){return a<0?-a*a:a*a}function ya(a){var i=a(Ki,Ki),c=1;function f(){return c===1?a(Ki,Ki):c===.5?a(M5,U_):a(Wg(c),Wg(1/c))}return i.exponent=function(g){return arguments.length?(c=+g,f()):c},us(i)}function fs(){var a=ya(No());return a.copy=function(){return Dl(a,fs()).exponent(a.exponent())},Hs.apply(a,arguments),a}function C6(){return fs.apply(null,arguments).exponent(.5)}function Fc(){var a=[],i=[],c=[],f;function g(){var x=0,w=Math.max(1,i.length);for(c=new Array(w-1);++x<w;)c[x-1]=u5(a,x/w);return y}function y(x){return isNaN(x=+x)?f:i[vf(c,x)]}return y.invertExtent=function(x){var w=i.indexOf(x);return w<0?[NaN,NaN]:[w>0?c[w-1]:a[0],w<c.length?c[w]:a[a.length-1]]},y.domain=function(x){if(!arguments.length)return a.slice();a=[];for(var w=0,T=x.length,P;w<T;++w)P=x[w],P!=null&&!isNaN(P=+P)&&a.push(P);return a.sort(si),g()},y.range=function(x){return arguments.length?(i=Ic.call(x),g()):i.slice()},y.unknown=function(x){return arguments.length?(f=x,y):f},y.quantiles=function(){return c.slice()},y.copy=function(){return Fc().domain(a).range(i).unknown(f)},Hs.apply(y,arguments)}function Z_(){var a=0,i=1,c=1,f=[.5],g=[0,1],y;function x(T){return T<=T?g[vf(f,T,0,c)]:y}function w(){var T=-1;for(f=new Array(c);++T<c;)f[T]=((T+1)*i-(T-c)*a)/(c+1);return x}return x.domain=function(T){return arguments.length?(a=+T[0],i=+T[1],w()):[a,i]},x.range=function(T){return arguments.length?(c=(g=Ic.call(T)).length-1,w()):g.slice()},x.invertExtent=function(T){var P=g.indexOf(T);return P<0?[NaN,NaN]:P<1?[a,f[0]]:P>=c?[f[c-1],i]:[f[P-1],f[P]]},x.unknown=function(T){return arguments.length&&(y=T),x},x.thresholds=function(){return f.slice()},x.copy=function(){return Z_().domain([a,i]).range(g).unknown(y)},Hs.apply(us(x),arguments)}function Gg(){var a=[.5],i=[0,1],c,f=1;function g(y){return y<=y?i[vf(a,y,0,f)]:c}return g.domain=function(y){return arguments.length?(a=Ic.call(y),f=Math.min(a.length,i.length-1),g):a.slice()},g.range=function(y){return arguments.length?(i=Ic.call(y),f=Math.min(a.length,i.length-1),g):i.slice()},g.invertExtent=function(y){var x=i.indexOf(y);return[a[x-1],a[x]]},g.unknown=function(y){return arguments.length?(c=y,g):c},g.copy=function(){return Gg().domain(a).range(i).unknown(c)},Hs.apply(g,arguments)}var $g=new Date,Bc=new Date;function Jo(a,i,c,f){function g(y){return a(y=arguments.length===0?new Date:new Date(+y)),y}return g.floor=function(y){return a(y=new Date(+y)),y},g.ceil=function(y){return a(y=new Date(y-1)),i(y,1),a(y),y},g.round=function(y){var x=g(y),w=g.ceil(y);return y-x<w-y?x:w},g.offset=function(y,x){return i(y=new Date(+y),x==null?1:Math.floor(x)),y},g.range=function(y,x,w){var T=[],P;if(y=g.ceil(y),w=w==null?1:Math.floor(w),!(y<x)||!(w>0))return T;do T.push(P=new Date(+y)),i(y,w),a(y);while(P<y&&y<x);return T},g.filter=function(y){return Jo(function(x){if(x>=x)for(;a(x),!y(x);)x.setTime(x-1)},function(x,w){if(x>=x)if(w<0)for(;++w<=0;)for(;i(x,-1),!y(x););else for(;--w>=0;)for(;i(x,1),!y(x););})},c&&(g.count=function(y,x){return $g.setTime(+y),Bc.setTime(+x),a($g),a(Bc),Math.floor(c($g,Bc))},g.every=function(y){return y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?g.filter(f?function(x){return f(x)%y===0}:function(x){return g.count(0,x)%y===0}):g}),g}var Yg=Jo(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,i){a.setFullYear(a.getFullYear()+i)},function(a,i){return i.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});Yg.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:Jo(function(i){i.setFullYear(Math.floor(i.getFullYear()/a)*a),i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,c){i.setFullYear(i.getFullYear()+c*a)})};var L5=Yg,cr=Yg.range,H_=Jo(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,i){a.setMonth(a.getMonth()+i)},function(a,i){return i.getMonth()-a.getMonth()+(i.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()}),P5=H_,M6=H_.range,Eh=1e3,Of=6e4,V_=36e5,I5=864e5,k5=6048e5;function jc(a){return Jo(function(i){i.setDate(i.getDate()-(i.getDay()+7-a)%7),i.setHours(0,0,0,0)},function(i,c){i.setDate(i.getDate()+c*7)},function(i,c){return(c-i-(c.getTimezoneOffset()-i.getTimezoneOffset())*Of)/k5})}var W_=jc(0),R5=jc(1),wh=jc(2),Xg=jc(3),Bl=jc(4),zc=jc(5),jl=jc(6),Ef=W_.range,Ah=R5.range,ds=wh.range,L6=Xg.range,P6=Bl.range,I6=zc.range,k6=jl.range,G_=Jo(function(a){a.setHours(0,0,0,0)},function(a,i){a.setDate(a.getDate()+i)},function(a,i){return(i-a-(i.getTimezoneOffset()-a.getTimezoneOffset())*Of)/I5},function(a){return a.getDate()-1}),D5=G_,R6=G_.range,qg=Jo(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Eh-a.getMinutes()*Of)},function(a,i){a.setTime(+a+i*V_)},function(a,i){return(i-a)/V_},function(a){return a.getHours()}),$_=qg,D6=qg.range,Y_=Jo(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Eh)},function(a,i){a.setTime(+a+i*Of)},function(a,i){return(i-a)/Of},function(a){return a.getMinutes()}),X_=Y_,q_=Y_.range,Kg=Jo(function(a){a.setTime(a-a.getMilliseconds())},function(a,i){a.setTime(+a+i*Eh)},function(a,i){return(i-a)/Eh},function(a){return a.getUTCSeconds()}),Th=Kg,N5=Kg.range,Uc=Jo(function(){},function(a,i){a.setTime(+a+i)},function(a,i){return i-a});Uc.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?Jo(function(i){i.setTime(Math.floor(i/a)*a)},function(i,c){i.setTime(+i+c*a)},function(i,c){return(c-i)/a}):Uc};var po=Uc,F5=Uc.range,Qg=new Date,Ch=new Date;function ta(a,i,c,f){function g(y){return a(y=arguments.length===0?new Date:new Date(+y)),y}return g.floor=function(y){return a(y=new Date(+y)),y},g.ceil=function(y){return a(y=new Date(y-1)),i(y,1),a(y),y},g.round=function(y){var x=g(y),w=g.ceil(y);return y-x<w-y?x:w},g.offset=function(y,x){return i(y=new Date(+y),x==null?1:Math.floor(x)),y},g.range=function(y,x,w){var T=[],P;if(y=g.ceil(y),w=w==null?1:Math.floor(w),!(y<x)||!(w>0))return T;do T.push(P=new Date(+y)),i(y,w),a(y);while(P<y&&y<x);return T},g.filter=function(y){return ta(function(x){if(x>=x)for(;a(x),!y(x);)x.setTime(x-1)},function(x,w){if(x>=x)if(w<0)for(;++w<=0;)for(;i(x,-1),!y(x););else for(;--w>=0;)for(;i(x,1),!y(x););})},c&&(g.count=function(y,x){return Qg.setTime(+y),Ch.setTime(+x),a(Qg),a(Ch),Math.floor(c(Qg,Ch))},g.every=function(y){return y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?g.filter(f?function(x){return f(x)%y===0}:function(x){return g.count(0,x)%y===0}):g}),g}var zl=1e3,$s=6e4,B5=36e5,Jg=864e5,K_=6048e5;function so(a){return ta(function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-a)%7),i.setUTCHours(0,0,0,0)},function(i,c){i.setUTCDate(i.getUTCDate()+c*7)},function(i,c){return(c-i)/K_})}var tv=so(0),Zc=so(1),ev=so(2),Q_=so(3),Ul=so(4),j5=so(5),nv=so(6),z5=tv.range,N6=Zc.range,F6=ev.range,B6=Q_.range,wf=Ul.range,m9=j5.range,U5=nv.range,J_=ta(function(a){a.setUTCHours(0,0,0,0)},function(a,i){a.setUTCDate(a.getUTCDate()+i)},function(a,i){return(i-a)/Jg},function(a){return a.getUTCDate()-1}),Z5=J_,Jr=J_.range;function Ys(a){return ta(function(i){i.setDate(i.getDate()-(i.getDay()+7-a)%7),i.setHours(0,0,0,0)},function(i,c){i.setDate(i.getDate()+c*7)},function(i,c){return(c-i-(c.getTimezoneOffset()-i.getTimezoneOffset())*$s)/K_})}var tx=Ys(0),Af=Ys(1),H5=Ys(2),ex=Ys(3),Zl=Ys(4),nx=Ys(5),V5=Ys(6),W5=tx.range,j6=Af.range,G5=H5.range,z6=ex.range,$5=Zl.range,U6=nx.range,Y5=V5.range,rx=ta(function(a){a.setHours(0,0,0,0)},function(a,i){a.setDate(a.getDate()+i)},function(a,i){return(i-a-(i.getTimezoneOffset()-a.getTimezoneOffset())*$s)/Jg},function(a){return a.getDate()-1}),rv=rx,Z6=rx.range,Mh=ta(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,i){a.setFullYear(a.getFullYear()+i)},function(a,i){return i.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});Mh.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:ta(function(i){i.setFullYear(Math.floor(i.getFullYear()/a)*a),i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,c){i.setFullYear(i.getFullYear()+c*a)})};var Tf=Mh,X5=Mh.range,iv=ta(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,i){a.setUTCFullYear(a.getUTCFullYear()+i)},function(a,i){return i.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});iv.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:ta(function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/a)*a),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,c){i.setUTCFullYear(i.getUTCFullYear()+c*a)})};var Hl=iv,H6=iv.range;function Lh(a){if(0<=a.y&&a.y<100){var i=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return i.setFullYear(a.y),i}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function ov(a){if(0<=a.y&&a.y<100){var i=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return i.setUTCFullYear(a.y),i}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function Vl(a,i,c){return{y:a,m:i,d:c,H:0,M:0,S:0,L:0}}function q5(a){var i=a.dateTime,c=a.date,f=a.time,g=a.periods,y=a.days,x=a.shortDays,w=a.months,T=a.shortMonths,P=Wl(g),B=Cf(g),U=Wl(y),G=Cf(y),mt=Wl(x),Nt=Cf(x),Qt=Wl(w),ye=Cf(w),Fe=Wl(T),ze=Cf(T),Ve={a:il,A:xs,b:sa,B:V3,c:null,d:Ih,e:Ih,f:Mf,g:pT,G:gx,H:Gl,I:Hc,j:$l,L:Vc,m:Ia,M:cT,p:fm,q:W3,Q:Nh,s:Fh,S:lT,u:uT,U:fT,V:dT,w:hT,W:hx,x:null,X:null,y:px,Y:gT,Z:uv,"%":pv},tn={a:G3,A:dm,b:f4,B:d4,c:null,d:fv,e:fv,f:yx,g:Dh,G:yT,H:kh,I:vx,j:mx,L:co,m:vT,M:bx,p:h4,q:$3,Q:Nh,s:Fh,S:Rh,u:Wc,U:Gc,V:_x,w:mT,W:ba,x:null,X:null,y:xx,Y:hv,Z:bT,"%":pv},pn={a:wr,A:qn,b:fr,B:Br,c:aa,d:cv,e:cv,f:fx,g:sv,G:cx,H:lv,I:lv,j:rT,L:oT,m:nT,M:iT,p:or,q:lx,Q:sT,s:Ph,S:ux,u:J5,U:ax,V:tT,w:ox,W:sx,x:rl,X:_s,y:sv,Y:cx,Z:eT,"%":aT};Ve.x=Pn(c,Ve),Ve.X=Pn(f,Ve),Ve.c=Pn(i,Ve),tn.x=Pn(c,tn),tn.X=Pn(f,tn),tn.c=Pn(i,tn);function Pn(Nn,vr){return function(Pr){var An=[],_o=-1,Qr=0,wo=Nn.length,Ao,oc,hm;for(Pr instanceof Date||(Pr=new Date(+Pr));++_o<wo;)Nn.charCodeAt(_o)===37&&(An.push(Nn.slice(Qr,_o)),(oc=av[Ao=Nn.charAt(++_o)])!=null?Ao=Nn.charAt(++_o):oc=Ao==="e"?" ":"0",(hm=vr[Ao])&&(Ao=hm(Pr,oc)),An.push(Ao),Qr=_o+1);return An.push(Nn.slice(Qr,_o)),An.join("")}}function Tn(Nn,vr){return function(Pr){var An=Vl(1900,void 0,1),_o=kn(An,Nn,Pr+="",0),Qr,wo;if(_o!=Pr.length)return null;if("Q"in An)return new Date(An.Q);if("s"in An)return new Date(An.s*1e3+("L"in An?An.L:0));if(vr&&!("Z"in An)&&(An.Z=0),"p"in An&&(An.H=An.H%12+An.p*12),An.m===void 0&&(An.m="q"in An?An.q:0),"V"in An){if(An.V<1||An.V>53)return null;"w"in An||(An.w=1),"Z"in An?(Qr=ov(Vl(An.y,0,1)),wo=Qr.getUTCDay(),Qr=wo>4||wo===0?Zc.ceil(Qr):Zc(Qr),Qr=Z5.offset(Qr,(An.V-1)*7),An.y=Qr.getUTCFullYear(),An.m=Qr.getUTCMonth(),An.d=Qr.getUTCDate()+(An.w+6)%7):(Qr=Lh(Vl(An.y,0,1)),wo=Qr.getDay(),Qr=wo>4||wo===0?Af.ceil(Qr):Af(Qr),Qr=rv.offset(Qr,(An.V-1)*7),An.y=Qr.getFullYear(),An.m=Qr.getMonth(),An.d=Qr.getDate()+(An.w+6)%7)}else("W"in An||"U"in An)&&("w"in An||(An.w="u"in An?An.u%7:"W"in An?1:0),wo="Z"in An?ov(Vl(An.y,0,1)).getUTCDay():Lh(Vl(An.y,0,1)).getDay(),An.m=0,An.d="W"in An?(An.w+6)%7+An.W*7-(wo+5)%7:An.w+An.U*7-(wo+6)%7);return"Z"in An?(An.H+=An.Z/100|0,An.M+=An.Z%100,ov(An)):Lh(An)}}function kn(Nn,vr,Pr,An){for(var _o=0,Qr=vr.length,wo=Pr.length,Ao,oc;_o<Qr;){if(An>=wo)return-1;if(Ao=vr.charCodeAt(_o++),Ao===37){if(Ao=vr.charAt(_o++),oc=pn[Ao in av?vr.charAt(_o++):Ao],!oc||(An=oc(Nn,Pr,An))<0)return-1}else if(Ao!=Pr.charCodeAt(An++))return-1}return An}function or(Nn,vr,Pr){var An=P.exec(vr.slice(Pr));return An?(Nn.p=B[An[0].toLowerCase()],Pr+An[0].length):-1}function wr(Nn,vr,Pr){var An=mt.exec(vr.slice(Pr));return An?(Nn.w=Nt[An[0].toLowerCase()],Pr+An[0].length):-1}function qn(Nn,vr,Pr){var An=U.exec(vr.slice(Pr));return An?(Nn.w=G[An[0].toLowerCase()],Pr+An[0].length):-1}function fr(Nn,vr,Pr){var An=Fe.exec(vr.slice(Pr));return An?(Nn.m=ze[An[0].toLowerCase()],Pr+An[0].length):-1}function Br(Nn,vr,Pr){var An=Qt.exec(vr.slice(Pr));return An?(Nn.m=ye[An[0].toLowerCase()],Pr+An[0].length):-1}function aa(Nn,vr,Pr){return kn(Nn,i,vr,Pr)}function rl(Nn,vr,Pr){return kn(Nn,c,vr,Pr)}function _s(Nn,vr,Pr){return kn(Nn,f,vr,Pr)}function il(Nn){return x[Nn.getDay()]}function xs(Nn){return y[Nn.getDay()]}function sa(Nn){return T[Nn.getMonth()]}function V3(Nn){return w[Nn.getMonth()]}function fm(Nn){return g[+(Nn.getHours()>=12)]}function W3(Nn){return 1+~~(Nn.getMonth()/3)}function G3(Nn){return x[Nn.getUTCDay()]}function dm(Nn){return y[Nn.getUTCDay()]}function f4(Nn){return T[Nn.getUTCMonth()]}function d4(Nn){return w[Nn.getUTCMonth()]}function h4(Nn){return g[+(Nn.getUTCHours()>=12)]}function $3(Nn){return 1+~~(Nn.getUTCMonth()/3)}return{format:function(Nn){var vr=Pn(Nn+="",Ve);return vr.toString=function(){return Nn},vr},parse:function(Nn){var vr=Tn(Nn+="",!1);return vr.toString=function(){return Nn},vr},utcFormat:function(Nn){var vr=Pn(Nn+="",tn);return vr.toString=function(){return Nn},vr},utcParse:function(Nn){var vr=Tn(Nn+="",!0);return vr.toString=function(){return Nn},vr}}}var av={"-":"",_:" ",0:"0"},Ji=/^\s*\d+/,ix=/^%/,K5=/[\\^$*+?|[\]().{}]/g;function Or(a,i,c){var f=a<0?"-":"",g=(f?-a:a)+"",y=g.length;return f+(y<c?new Array(c-y+1).join(i)+g:g)}function Q5(a){return a.replace(K5,"\\$&")}function Wl(a){return new RegExp("^(?:"+a.map(Q5).join("|")+")","i")}function Cf(a){for(var i={},c=-1,f=a.length;++c<f;)i[a[c].toLowerCase()]=c;return i}function ox(a,i,c){var f=Ji.exec(i.slice(c,c+1));return f?(a.w=+f[0],c+f[0].length):-1}function J5(a,i,c){var f=Ji.exec(i.slice(c,c+1));return f?(a.u=+f[0],c+f[0].length):-1}function ax(a,i,c){var f=Ji.exec(i.slice(c,c+2));return f?(a.U=+f[0],c+f[0].length):-1}function tT(a,i,c){var f=Ji.exec(i.slice(c,c+2));return f?(a.V=+f[0],c+f[0].length):-1}function sx(a,i,c){var f=Ji.exec(i.slice(c,c+2));return f?(a.W=+f[0],c+f[0].length):-1}function cx(a,i,c){var f=Ji.exec(i.slice(c,c+4));return f?(a.y=+f[0],c+f[0].length):-1}function sv(a,i,c){var f=Ji.exec(i.slice(c,c+2));return f?(a.y=+f[0]+(+f[0]>68?1900:2e3),c+f[0].length):-1}function eT(a,i,c){var f=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(c,c+6));return f?(a.Z=f[1]?0:-(f[2]+(f[3]||"00")),c+f[0].length):-1}function lx(a,i,c){var f=Ji.exec(i.slice(c,c+1));return f?(a.q=f[0]*3-3,c+f[0].length):-1}function nT(a,i,c){var f=Ji.exec(i.slice(c,c+2));return f?(a.m=f[0]-1,c+f[0].length):-1}function cv(a,i,c){var f=Ji.exec(i.slice(c,c+2));return f?(a.d=+f[0],c+f[0].length):-1}function rT(a,i,c){var f=Ji.exec(i.slice(c,c+3));return f?(a.m=0,a.d=+f[0],c+f[0].length):-1}function lv(a,i,c){var f=Ji.exec(i.slice(c,c+2));return f?(a.H=+f[0],c+f[0].length):-1}function iT(a,i,c){var f=Ji.exec(i.slice(c,c+2));return f?(a.M=+f[0],c+f[0].length):-1}function ux(a,i,c){var f=Ji.exec(i.slice(c,c+2));return f?(a.S=+f[0],c+f[0].length):-1}function oT(a,i,c){var f=Ji.exec(i.slice(c,c+3));return f?(a.L=+f[0],c+f[0].length):-1}function fx(a,i,c){var f=Ji.exec(i.slice(c,c+6));return f?(a.L=Math.floor(f[0]/1e3),c+f[0].length):-1}function aT(a,i,c){var f=ix.exec(i.slice(c,c+1));return f?c+f[0].length:-1}function sT(a,i,c){var f=Ji.exec(i.slice(c));return f?(a.Q=+f[0],c+f[0].length):-1}function Ph(a,i,c){var f=Ji.exec(i.slice(c));return f?(a.s=+f[0],c+f[0].length):-1}function Ih(a,i){return Or(a.getDate(),i,2)}function Gl(a,i){return Or(a.getHours(),i,2)}function Hc(a,i){return Or(a.getHours()%12||12,i,2)}function $l(a,i){return Or(1+rv.count(Tf(a),a),i,3)}function Vc(a,i){return Or(a.getMilliseconds(),i,3)}function Mf(a,i){return Vc(a,i)+"000"}function Ia(a,i){return Or(a.getMonth()+1,i,2)}function cT(a,i){return Or(a.getMinutes(),i,2)}function lT(a,i){return Or(a.getSeconds(),i,2)}function uT(a){var i=a.getDay();return i===0?7:i}function fT(a,i){return Or(tx.count(Tf(a)-1,a),i,2)}function dx(a){var i=a.getDay();return i>=4||i===0?Zl(a):Zl.ceil(a)}function dT(a,i){return a=dx(a),Or(Zl.count(Tf(a),a)+(Tf(a).getDay()===4),i,2)}function hT(a){return a.getDay()}function hx(a,i){return Or(Af.count(Tf(a)-1,a),i,2)}function px(a,i){return Or(a.getFullYear()%100,i,2)}function pT(a,i){return a=dx(a),Or(a.getFullYear()%100,i,2)}function gT(a,i){return Or(a.getFullYear()%1e4,i,4)}function gx(a,i){var c=a.getDay();return a=c>=4||c===0?Zl(a):Zl.ceil(a),Or(a.getFullYear()%1e4,i,4)}function uv(a){var i=a.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+Or(i/60|0,"0",2)+Or(i%60,"0",2)}function fv(a,i){return Or(a.getUTCDate(),i,2)}function kh(a,i){return Or(a.getUTCHours(),i,2)}function vx(a,i){return Or(a.getUTCHours()%12||12,i,2)}function mx(a,i){return Or(1+Z5.count(Hl(a),a),i,3)}function co(a,i){return Or(a.getUTCMilliseconds(),i,3)}function yx(a,i){return co(a,i)+"000"}function vT(a,i){return Or(a.getUTCMonth()+1,i,2)}function bx(a,i){return Or(a.getUTCMinutes(),i,2)}function Rh(a,i){return Or(a.getUTCSeconds(),i,2)}function Wc(a){var i=a.getUTCDay();return i===0?7:i}function Gc(a,i){return Or(tv.count(Hl(a)-1,a),i,2)}function dv(a){var i=a.getUTCDay();return i>=4||i===0?Ul(a):Ul.ceil(a)}function _x(a,i){return a=dv(a),Or(Ul.count(Hl(a),a)+(Hl(a).getUTCDay()===4),i,2)}function mT(a){return a.getUTCDay()}function ba(a,i){return Or(Zc.count(Hl(a)-1,a),i,2)}function xx(a,i){return Or(a.getUTCFullYear()%100,i,2)}function Dh(a,i){return a=dv(a),Or(a.getUTCFullYear()%100,i,2)}function hv(a,i){return Or(a.getUTCFullYear()%1e4,i,4)}function yT(a,i){var c=a.getUTCDay();return a=c>=4||c===0?Ul(a):Ul.ceil(a),Or(a.getUTCFullYear()%1e4,i,4)}function bT(){return"+0000"}function pv(){return"%"}function Nh(a){return+a}function Fh(a){return Math.floor(+a/1e3)}var hs,Yl,Sx,Ox,Ex;_T({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _T(a){return hs=q5(a),Yl=hs.format,Sx=hs.parse,Ox=hs.utcFormat,Ex=hs.utcParse,hs}var ea=1e3,_a=ea*60,Lf=_a*60,Pf=Lf*24,Ax=Pf*7,Bh=Pf*30,If=Pf*365;function jh(a){return new Date(a)}function kf(a){return a instanceof Date?+a:+new Date(+a)}function gv(a,i,c,f,g,y,x,w,T){var P=_f(Ki,Ki),B=P.invert,U=P.domain,G=T(".%L"),mt=T(":%S"),Nt=T("%I:%M"),Qt=T("%I %p"),ye=T("%a %d"),Fe=T("%b %d"),ze=T("%B"),Ve=T("%Y"),tn=[[x,1,ea],[x,5,5*ea],[x,15,15*ea],[x,30,30*ea],[y,1,_a],[y,5,5*_a],[y,15,15*_a],[y,30,30*_a],[g,1,Lf],[g,3,3*Lf],[g,6,6*Lf],[g,12,12*Lf],[f,1,Pf],[f,2,2*Pf],[c,1,Ax],[i,1,Bh],[i,3,3*Bh],[a,1,If]];function pn(Tn){return(x(Tn)<Tn?G:y(Tn)<Tn?mt:g(Tn)<Tn?Nt:f(Tn)<Tn?Qt:i(Tn)<Tn?c(Tn)<Tn?ye:Fe:a(Tn)<Tn?ze:Ve)(Tn)}function Pn(Tn,kn,or,wr){if(Tn==null&&(Tn=10),typeof Tn=="number"){var qn=Math.abs(or-kn)/Tn,fr=g_(function(Br){return Br[2]}).right(tn,qn);fr===tn.length?(wr=Lg(kn/If,or/If,Tn),Tn=a):fr?(fr=tn[qn/tn[fr-1][2]<tn[fr][2]/qn?fr-1:fr],wr=fr[1],Tn=fr[0]):(wr=Math.max(Lg(kn,or,Tn),1),Tn=w)}return wr==null?Tn:Tn.every(wr)}return P.invert=function(Tn){return new Date(B(Tn))},P.domain=function(Tn){return arguments.length?U(__.call(Tn,kf)):U().map(jh)},P.ticks=function(Tn,kn){var or=U(),wr=or[0],qn=or[or.length-1],fr=qn<wr,Br;return fr&&(Br=wr,wr=qn,qn=Br),Br=Pn(Tn,wr,qn,kn),Br=Br?Br.range(wr,qn+1):[],fr?Br.reverse():Br},P.tickFormat=function(Tn,kn){return kn==null?pn:T(kn)},P.nice=function(Tn,kn){var or=U();return(Tn=Pn(Tn,or[0],or[or.length-1],kn))?U(k_(or,Tn)):P},P.copy=function(){return Dl(P,gv(a,i,c,f,g,y,x,w,T))},P}function Tx(){return Hs.apply(gv(L5,P5,W_,D5,$_,X_,Th,po,Yl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xT(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zh(){var a=0,i=1,c,f,g,y,x=Ki,w=!1,T;function P(B){return isNaN(B=+B)?T:x(g===0?.5:(B=(y(B)-c)*g,w?Math.max(0,Math.min(1,B)):B))}return P.domain=function(B){return arguments.length?(c=y(a=+B[0]),f=y(i=+B[1]),g=c===f?0:1/(f-c),P):[a,i]},P.clamp=function(B){return arguments.length?(w=!!B,P):w},P.interpolator=function(B){return arguments.length?(x=B,P):x},P.unknown=function(B){return arguments.length?(T=B,P):T},function(B){return y=B,c=B(a),f=B(i),g=c===f?0:1/(f-c),P}}function $c(a,i){return i.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function Xs(){var a=us(zh()(Ki));return a.copy=function(){return $c(a,Xs())},x_.apply(a,arguments)}function Cx(){var a=loggish(zh()).domain([1,10]);return a.copy=function(){return $c(a,Cx()).base(a.base())},initInterpolator.apply(a,arguments)}function V6(){var a=symlogish(zh());return a.copy=function(){return $c(a,V6()).constant(a.constant())},initInterpolator.apply(a,arguments)}function Uh(){var a=powish(zh());return a.copy=function(){return $c(a,Uh()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function W6(){return Uh.apply(null,arguments).exponent(.5)}function ST(){var a=[],i=identity;function c(f){if(!isNaN(f=+f))return i((bisect(a,f)-1)/(a.length-1))}return c.domain=function(f){if(!arguments.length)return a.slice();a=[];for(var g=0,y=f.length,x;g<y;++g)x=f[g],x!=null&&!isNaN(x=+x)&&a.push(x);return a.sort(ascending),c},c.interpolator=function(f){return arguments.length?(i=f,c):i},c.copy=function(){return ST(i).domain(a)},initInterpolator.apply(c,arguments)}function Zh(){var a=0,i=.5,c=1,f,g,y,x,w,T=Ki,P,B=!1,U;function G(mt){return isNaN(mt=+mt)?U:(mt=.5+((mt=+P(mt))-g)*(mt<g?x:w),T(B?Math.max(0,Math.min(1,mt)):mt))}return G.domain=function(mt){return arguments.length?(f=P(a=+mt[0]),g=P(i=+mt[1]),y=P(c=+mt[2]),x=f===g?0:.5/(g-f),w=g===y?0:.5/(y-g),G):[a,i,c]},G.clamp=function(mt){return arguments.length?(B=!!mt,G):B},G.interpolator=function(mt){return arguments.length?(T=mt,G):T},G.unknown=function(mt){return arguments.length?(U=mt,G):U},function(mt){return P=mt,f=mt(a),g=mt(i),y=mt(c),x=f===g?0:.5/(g-f),w=g===y?0:.5/(y-g),G}}function Rf(){var a=us(Zh()(Ki));return a.copy=function(){return $c(a,Rf())},x_.apply(a,arguments)}function OT(){var a=loggish(Zh()).domain([.1,1,10]);return a.copy=function(){return copy(a,OT()).base(a.base())},initInterpolator.apply(a,arguments)}function Hh(){var a=symlogish(Zh());return a.copy=function(){return copy(a,Hh()).constant(a.constant())},initInterpolator.apply(a,arguments)}function Mx(){var a=powish(Zh());return a.copy=function(){return copy(a,Mx()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function G6(){return Mx.apply(null,arguments).exponent(.5)}function Lx(a){let i,c=[];function f(g){return g==null?i:g}return f.invert=f,f.domain=f.range=g=>g?(c=g,g):c,f.unknown=g=>g?(i=g,g):i,f.copy=()=>Lx(a).unknown(i),f}const{isNil:vv,isString:Vh,uniq:ET}=oi,wT=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,AT={[Fr.LINEAR]:Oh,[Fr.POWER]:fs,[Fr.LOG]:Vg,[Fr.IDENTITY]:Lx,[Fr.SEQUENTIAL]:Xs,[Fr.TIME]:Tx,[Fr.QUANTILE]:Fc,[Fr.QUANTIZE]:Z_,[Fr.THRESHOLD]:Gg,[Fr.CAT]:ss,[Fr.DIVERGING]:Rf};class TT{constructor(){(0,dt.Z)(this,"scaleOptions",{})}apply(i,{styleAttributeService:c}){var f=this;i.hooks.init.tapPromise("FeatureScalePlugin",(0,an.Z)(function*(){var g;i.log(Ui.ScaleInitStart,Yi.INIT),f.scaleOptions=i.getScaleOptions();const y=c.getLayerStyleAttributes(),x=(g=i.getSource())===null||g===void 0?void 0:g.data.dataArray;Array.isArray(x)&&x.length===0||(f.caculateScalesForAttributes(y||[],x),i.log(Ui.ScaleInitEnd,Yi.INIT))})),i.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var g=(0,an.Z)(function*(y){if(!y)return y;i.log(Ui.ScaleInitStart,Yi.UPDATE),f.scaleOptions=i.getScaleOptions();const x=c.getLayerStyleAttributes(),w=i.getSource().data.dataArray;return Array.isArray(w)&&w.length===0||(f.caculateScalesForAttributes(x||[],w),i.log(Ui.ScaleInitEnd,Yi.UPDATE),i.layerModelNeedUpdate=!0),!0});return function(y){return g.apply(this,arguments)}}()),i.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(i.layerModelNeedUpdate)return;this.scaleOptions=i.getScaleOptions();const g=c.getLayerStyleAttributes(),y=i.getSource().data.dataArray;if(!(Array.isArray(y)&&y.length===0)&&g){const x=g.filter(w=>w.needRescale);x.length&&this.caculateScalesForAttributes(x,y)}})}isNumber(i){return!isNaN(parseFloat(i))&&isFinite(i)}caculateScalesForAttributes(i,c){i.forEach(f=>{if(f.scale){const g=f.scale,y=f.scale.field;g.names=this.parseFields(vv(y)?[]:y);const x=[];g.names.forEach(w=>{var T;x.push(this.createScale(w,f.name,(T=f.scale)===null||T===void 0?void 0:T.values,c))}),x.some(w=>w.type===Rs.VARIABLE)?(g.type=Rs.VARIABLE,x.forEach(w=>{if(!g.callback&&g.values!=="text"){var T;switch((T=w.option)===null||T===void 0?void 0:T.type){case Fr.LOG:case Fr.LINEAR:case Fr.POWER:if(g.values&&g.values.length>2){const B=w.scale.ticks(g.values.length);w.scale.domain(B)}g.values?w.scale.range(g.values):w.scale.range(w.option.domain);break;case Fr.QUANTILE:case Fr.QUANTIZE:case Fr.THRESHOLD:w.scale.range(g.values);break;case Fr.IDENTITY:break;case Fr.CAT:g.values?w.scale.range(g.values):w.scale.range(w.option.domain);break;case Fr.DIVERGING:case Fr.SEQUENTIAL:w.scale.interpolator(Og(g.values));break}}if(g.values==="text"){var P;w.scale.range((P=w.option)===null||P===void 0?void 0:P.domain)}})):(g.type=Rs.CONSTANT,g.defaultValues=x.map((w,T)=>w.scale(g.names[T]))),g.scalers=x.map(w=>({field:w.field,func:w.scale,option:w.option})),f.needRescale=!1}})}parseFields(i){return Array.isArray(i)?i:Vh(i)?i.split("*"):[i]}createScale(i,c,f,g){var y,x;const w=this.scaleOptions[c]&&((y=this.scaleOptions[c])===null||y===void 0?void 0:y.field)===i?this.scaleOptions[c]:this.scaleOptions[i],T={field:i,scale:void 0,type:Rs.VARIABLE,option:w};if(!g||!g.length)return w&&w.type?T.scale=this.createDefaultScale(w):(T.scale=ss([i]),T.type=Rs.CONSTANT),T;const P=(x=g.find(B=>!vv(B[i])))===null||x===void 0?void 0:x[i];if(this.isNumber(i)||vv(P)&&!w)T.scale=ss([i]),T.type=Rs.CONSTANT;else{let B=w&&w.type||this.getDefaultType(P);f==="text"&&(B=Fr.CAT),f===void 0&&(B=Fr.IDENTITY);const U=this.createScaleConfig(B,i,w,g);T.scale=this.createDefaultScale(U),T.option=U}return T}getDefaultType(i){let c=Fr.LINEAR;return typeof i=="string"&&(c=wT.test(i)?Fr.TIME:Fr.CAT),c}createScaleConfig(i,c,f,g){const y=(0,nn.Z)((0,nn.Z)({},f),{},{type:i});if(y!=null&&y.domain)return y;let x=[];if(i===Fr.QUANTILE){const w=new Map;g==null||g.forEach(T=>{w.set(T._id,T[c])}),x=Array.from(w.values())}else x=(g==null?void 0:g.map(w=>w[c]))||[];if(i===Fr.CAT||i===Fr.IDENTITY)y.domain=ET(x);else if(i===Fr.QUANTILE)y.domain=x;else if(i===Fr.DIVERGING){const w=u_(x),T=(f==null?void 0:f.neutral)!==void 0?f==null?void 0:f.neutral:(w[0]+w[1])/2;y.domain=[w[0],T,w[1]]}else y.domain=u_(x);return y}createDefaultScale({type:i,domain:c,unknown:f,clamp:g,nice:y}){const x=AT[i]();return c&&x.domain&&x.domain(c),f&&x.unknown(f),g!==void 0&&x.clamp&&x.clamp(g),y!==void 0&&x.nice&&x.nice(y),x}}class CT{apply(i){i.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{i.animateStatus&&i.models.forEach(f=>{f.addUniforms((0,nn.Z)({},i.layerModel.getAnimateUniforms()))})})}}class MT{apply(i){i.hooks.afterInit.tap("LayerMaskPlugin",()=>{const{maskLayers:c,enableMask:f}=i.getLayerConfig();!i.tileLayer&&c&&c.length>0&&i.updateLayerConfig({mask:f})})}}class LT{build(i){return(0,an.Z)(function*(){i.prepareBuildModel(),yield i.buildModels()})()}initLayerModel(i){var c=this;return(0,an.Z)(function*(){yield c.build(i),i.styleNeedUpdate=!1})()}prepareLayerModel(i){var c=this;return(0,an.Z)(function*(){yield c.build(i),i.styleNeedUpdate=!1})()}apply(i){var c=this;i.hooks.init.tapPromise("LayerModelPlugin",(0,an.Z)(function*(){if(i.getSource().isTile){i.prepareBuildModel();return}i.log(Ui.BuildModelStart,Yi.INIT),yield c.initLayerModel(i),i.log(Ui.BuildModelEnd,Yi.INIT)})),i.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var f=(0,an.Z)(function*(g){return!g||i.getSource().isTile?!1:(i.log(Ui.BuildModelStart,Yi.UPDATE),yield c.prepareLayerModel(i),i.log(Ui.BuildModelEnd,Yi.UPDATE),!0)});return function(g){return f.apply(this,arguments)}}())}}class PT{apply(i){i.hooks.afterInit.tap("LayerStylePlugin",()=>{const{autoFit:c,fitBoundsOptions:f}=i.getLayerConfig();c&&i.fitBounds(f),i.styleNeedUpdate=!1})}}const IT=["type"],mv={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},Px={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},kT={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},RT={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function Ix(a){const i={u_DirectionalLights:new Array(3).fill((0,nn.Z)({},kT)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,nn.Z)({},RT)),u_NumOfSpotLights:0};return(!a||!a.length)&&(a=[Px]),a.forEach(c=>{let{type:f="directional"}=c,g=(0,ha.Z)(c,IT);const y=mv[f].lights,x=mv[f].num,w=i[x];i[y][w]=(0,nn.Z)((0,nn.Z)({},i[y][w]),g),i[x]++}),i}class DT{apply(i){i.hooks.beforeRender.tap("LightingPlugin",()=>{const{enableLighting:c}=i.getLayerConfig();c&&i.models.forEach(f=>f.addUniforms((0,nn.Z)({},Ix())))})}}function kx(a){return a.map(i=>(typeof i=="string"&&(i=[i,{}]),i))}function Rx(a,i,c,f){const g=a.multiPassRenderer;return g.add(f("render")),kx(i).forEach(y=>{const[x,w]=y;g.add(c(x),w)}),g.add(c("copy")),g}class Dx{constructor(){(0,dt.Z)(this,"enabled",void 0)}apply(i,{rendererService:c,postProcessingPassFactory:f,normalPassFactory:g}){i.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{const{enableMultiPassRenderer:y,passes:x=[]}=i.getLayerConfig();this.enabled=!!y&&i.getLayerConfig().enableMultiPassRenderer!==!1,this.enabled&&(i.multiPassRenderer=Rx(i,x,f,g),i.multiPassRenderer.setRenderFlag(!0))}),i.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){const{width:y,height:x}=c.getViewportSize();i.multiPassRenderer.resize(y,x)}})}}const ps={POSITION:0,POSITION_64LOW:1,COLOR:2,PICKING_COLOR:3,STROKE:4,OPACITY:5,OFFSETS:6,ROTATION:7,MAX:8};function NT(a){switch(a){case"rotation":return{name:"Rotation",type:Dn.Attribute,descriptor:{name:"a_Rotation",shaderLocation:ps.ROTATION,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{rotation:c=0}=i;return Array.isArray(c)?[c[0]]:[c]}}};case"stroke":return{name:"stroke",type:Dn.Attribute,descriptor:{name:"a_Stroke",shaderLocation:ps.STROKE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:4,update:i=>{const{stroke:c=[1,1,1,1]}=i;return c}}};case"opacity":return{name:"opacity",type:Dn.Attribute,descriptor:{name:"a_Opacity",shaderLocation:ps.OPACITY,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{opacity:c=1}=i;return[c]}}};case"offsets":return{name:"offsets",type:Dn.Attribute,descriptor:{name:"a_Offsets",shaderLocation:ps.OFFSETS,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const{offsets:c}=i;return c}}};default:return}}const{isNumber:FT}=oi,Xl={NONE:0,ENCODE:1,HIGHLIGHT:2};class BT{constructor(){(0,dt.Z)(this,"pickingUniformMap",void 0)}pickOption2Array(){const i=[];return this.pickingUniformMap.forEach(c=>{FT(c)?i.push(c):i.push(...c)}),i}updatePickOption(i,c){Object.keys(i).forEach(x=>{this.pickingUniformMap.set(x,i[x])});const f=c.getLayerConfig().pickingBuffer||0,g=Number(c.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",f),this.pickingUniformMap.set("u_shaderPick",g),c.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()})}apply(i,{styleAttributeService:c}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),i.hooks.init.tapPromise("PixelPickingPlugin",()=>{const{enablePicking:f}=i.getLayerConfig();c.registerStyleAttribute({name:"pickingColor",type:Dn.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:ps.PICKING_COLOR,buffer:{data:[],type:q.FLOAT},size:3,update:g=>{const{id:y}=g;return f?ul(y):[0,0,0]}}})}),i.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:f}=i.getLayerConfig();f&&i.isVisible()&&(this.updatePickOption({u_PickingStage:Xl.ENCODE},i),i.models.forEach(g=>g.addUniforms({u_PickingStage:Xl.ENCODE})))}),i.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:f}=i.getLayerConfig();f&&i.isVisible()&&(this.updatePickOption({u_PickingStage:Xl.HIGHLIGHT},i),i.models.forEach(g=>g.addUniforms({u_PickingStage:Xl.HIGHLIGHT})))}),i.hooks.beforeHighlight.tap("PixelPickingPlugin",f=>{const{highlightColor:g,activeMix:y=0}=i.getLayerConfig(),x=typeof g=="string"?Ur(g):g||[1,0,0,1];i.updateLayerConfig({pickedFeatureID:uc(new Uint8Array(f))});const w={u_PickingStage:Xl.HIGHLIGHT,u_PickingColor:f,u_HighlightColor:x.map(T=>T*255),u_activeMix:y};this.updatePickOption(w,i),i.models.forEach(T=>T.addUniforms(w))}),i.hooks.beforeSelect.tap("PixelPickingPlugin",f=>{const{selectColor:g,selectMix:y=0}=i.getLayerConfig(),x=typeof g=="string"?Ur(g):g||[1,0,0,1];i.updateLayerConfig({pickedFeatureID:uc(new Uint8Array(f))});const w={u_PickingStage:Xl.HIGHLIGHT,u_PickingColor:f,u_HighlightColor:x.map(T=>T*255),u_activeMix:y,u_CurrentSelectedId:f,u_SelectColor:x.map(T=>T*255)};this.updatePickOption(w,i),i.models.forEach(T=>T.addUniforms(w))})}}const Nx=["mvt","geojsonvt","testTile"];function jT(a){const i=a.getSource();return Nx.includes(i.parser.type)}class zT{apply(i,{styleAttributeService:c}){i.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{jT(i)||this.registerBuiltinAttributes(c,i)})}registerBuiltinAttributes(i,c){if(c.type==="MaskLayer"){this.registerPositionAttribute(i);return}this.registerPositionAttribute(i),this.registerColorAttribute(i)}registerPositionAttribute(i){i.registerStyleAttribute({name:"position",type:Dn.Attribute,descriptor:{name:"a_Position",shaderLocation:ps.POSITION,buffer:{data:[],type:q.FLOAT},size:3,update:(c,f,g)=>g.length===2?[g[0],g[1],0]:[g[0],g[1],g[2]]}})}registerColorAttribute(i){i.registerStyleAttribute({name:"color",type:Dn.Attribute,descriptor:{name:"a_Color",shaderLocation:ps.COLOR,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:4,update:c=>{const{color:f}=c;return!f||!f.length?[1,1,1,1]:f}}})}}class UT{constructor(){(0,dt.Z)(this,"cameraService",void 0),(0,dt.Z)(this,"coordinateSystemService",void 0),(0,dt.Z)(this,"rendererService",void 0),(0,dt.Z)(this,"mapService",void 0),(0,dt.Z)(this,"layerService",void 0)}apply(i,{rendererService:c,mapService:f,layerService:g,coordinateSystemService:y,cameraService:x}){this.rendererService=c,this.mapService=f,this.layerService=g,this.coordinateSystemService=y,this.cameraService=x;let w;this.rendererService.uniformBuffers[0]||(w=this.rendererService.createBuffer({data:new Float32Array(96),isUBO:!0,label:"renderUniformBuffer"}),this.rendererService.uniformBuffers[0]=w),i.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{const P=i.getRelativeOrigin&&i.getRelativeOrigin()||[0,0];this.coordinateSystemService.refresh(),P&&(Math.abs(P[0])>1e-4||Math.abs(P[1])>1e-4)&&this.coordinateSystemService.getCoordinateSystem()===2&&this.coordinateSystemService.setViewportCenter(P);const{width:U,height:G}=this.rendererService.getViewportSize(),{data:mt,uniforms:Nt}=this.generateUBO(U,G,P);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:mt}),this.rendererService.queryVerdorInfo()==="WebGL1"&&i.models.forEach(ye=>{ye.addUniforms((0,nn.Z)((0,nn.Z)({},Nt),{},{u_PickingBuffer:i.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(i.getShaderPickStat())}))})})}generateUBO(i,c,f){const g=this.cameraService.getProjectionMatrix(),y=this.cameraService.getViewMatrix(),x=this.cameraService.getViewProjectionMatrix(),w=this.cameraService.getModelMatrix(),T=this.coordinateSystemService.getViewportCenterProjection(),P=this.coordinateSystemService.getPixelsPerDegree(),B=this.cameraService.getZoom(),U=this.coordinateSystemService.getPixelsPerDegree2(),G=this.cameraService.getZoomScale(),mt=this.coordinateSystemService.getPixelsPerMeter(),Nt=this.coordinateSystemService.getCoordinateSystem(),Qt=this.cameraService.getCameraPosition(),ye=window.devicePixelRatio,Fe=this.coordinateSystemService.getViewportCenter(),ze=[i,c],Ve=this.cameraService.getFocalDistance(),tn=f&&f.length>=2?[f[0],f[1]]:[0,0];return{data:[...y,...g,...x,...w,...T,...P,B,...U,G,...mt,Nt,...Qt,ye,...Fe,...ze,Ve,...tn,0],uniforms:{[bc.ProjectionMatrix]:g,[bc.ViewMatrix]:y,[bc.ViewProjectionMatrix]:x,[bc.Zoom]:B,[bc.ZoomScale]:G,[bc.FocalDistance]:Ve,[bc.CameraPosition]:Qt,[Is.CoordinateSystem]:Nt,[Is.ViewportCenter]:Fe,[Is.ViewportCenterProjection]:T,[Is.PixelsPerDegree]:P,[Is.PixelsPerDegree2]:U,[Is.PixelsPerMeter]:mt,u_ViewportSize:ze,u_ModelMatrix:w,u_DevicePixelRatio:ye,u_RelativeOrigin:tn}}}}class ZT{apply(i){i.hooks.beforeRender.tap("UpdateModelPlugin",()=>{i.layerModel&&i.layerModel.needUpdate().then(c=>{c&&i.renderLayers()})}),i.hooks.afterRender.tap("UpdateModelPlugin",()=>{i.layerModelNeedUpdate=!1})}}class HT{apply(i,{styleAttributeService:c}){i.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(i,{styleAttributeService:c})}),i.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{i.layerModelNeedUpdate||i.inited&&this.updateStyleAttribute(i,{styleAttributeService:c})})}updateStyleAttribute(i,{styleAttributeService:c}){const f=c.getLayerStyleAttributes()||[],g=c.getLayerStyleAttribute("filter");if(g&&g.needRegenerateVertices){i.layerModelNeedUpdate=!0,f.forEach(y=>y.needRegenerateVertices=!1);return}f.filter(y=>y.needRegenerateVertices).forEach(y=>{c.updateAttributeByFeatureRange(y.name,i.getEncodedData(),y.featureRange.startIndex,y.featureRange.endIndex,i),y.needRegenerateVertices=!1})}initStyleAttribute(i,{styleAttributeService:c}){(c.getLayerStyleAttributes()||[]).filter(g=>g.needRegenerateVertices).forEach(g=>{c.updateAttributeByFeatureRange(g.name,i.getEncodedData(),g.featureRange.startIndex,g.featureRange.endIndex),g.needRegenerateVertices=!1})}}function VT(){return[new o5,new zT,new TT,new O6,new PT,new MT,new HT,new ZT,new Dx,new UT,new CT,new DT,new BT,new LT]}const Wh={[ks.additive]:{enable:!0,func:{srcRGB:q.ONE,dstRGB:q.ONE,srcAlpha:1,dstAlpha:1}},[ks.none]:{enable:!1},[ks.normal]:{enable:!0,func:{srcRGB:q.SRC_ALPHA,dstRGB:q.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[ks.subtractive]:{enable:!0,func:{srcRGB:q.ONE,dstRGB:q.ONE,srcAlpha:q.ZERO,dstAlpha:q.ONE_MINUS_SRC_COLOR},equation:{rgb:q.FUNC_SUBTRACT,alpha:q.FUNC_SUBTRACT}},[ks.max]:{enable:!0,func:{srcRGB:q.ONE,dstRGB:q.ONE},equation:{rgb:q.MAX_EXT}},[ks.min]:{enable:!0,func:{srcRGB:q.ONE,dstRGB:q.ONE},equation:{rgb:q.MIN_EXT}}};class Fx{constructor(i){(0,dt.Z)(this,"layer",void 0),this.layer=i}pickRender(i){const f=this.layer.getContainer().layerService,g=this.layer;if(g.tileLayer)return g.tileLayer.pickRender(i);g.hooks.beforePickingEncode.call(),f.renderTileLayerMask(g),g.renderModels({ispick:!0}),g.hooks.afterPickingEncode.call()}pick(i,c){var f=this;return(0,an.Z)(function*(){const y=f.layer.getContainer().pickingService;return i.type==="RasterLayer"?f.pickRasterLayer(i,c):(f.pickRender(c),y.pickFromPickingFBO(i,c))})()}pickRasterLayer(i,c,f){const g=this.layer.getContainer(),y=g.pickingService,x=g.mapService,w=this.layer.getSource().extent,T=TO(c.lngLat,w),P={x:c.x,y:c.y,type:c.type,lngLat:c.lngLat,target:c,rasterValue:null},B=f||i;if(T){const U=this.readRasterValue(i,w,x,c.x,c.y);return P.rasterValue=U,y.triggerHoverOnLayer(B,P),!0}else return P.type=c.type==="mousemove"?"mouseout":"un"+c.type,y.triggerHoverOnLayer(B,(0,nn.Z)((0,nn.Z)({},P),{},{type:"unpick"})),y.triggerHoverOnLayer(B,P),!1}readRasterValue(i,c,f,g,y){const x=i.getSource().data.dataArray[0],[w=0,T=0,P=10,B=-10]=c,U=f.lngLatToContainer([w,T]),G=f.lngLatToContainer([P,B]),mt=G.x-U.x,Nt=U.y-G.y,Qt=[(g-U.x)/mt,(y-G.y)/Nt],ye=x.width||1,Fe=x.height||1,ze=Math.floor(Qt[0]*ye),Ve=Math.floor(Qt[1]*Fe),tn=Math.max(0,Ve-1)*ye+ze;return x.data[tn]}selectFeature(i){const c=this.layer,[f,g,y]=i;c.hooks.beforeSelect.call([f,g,y])}highlightPickedFeature(i){const[c,f,g]=i;this.layer.hooks.beforeHighlight.call([c,f,g])}getFeatureById(i){return this.layer.getSource().getFeatureById(i)}}class Bx{constructor(i){(0,dt.Z)(this,"layer",void 0),(0,dt.Z)(this,"rendererService",void 0),(0,dt.Z)(this,"colorTexture",void 0),(0,dt.Z)(this,"key",void 0),this.layer=i;const c=this.layer.getContainer();this.rendererService=c.rendererService}getColorTexture(i,c){const f=this.getTextureKey(i,c);return this.key===f?this.colorTexture:(this.createColorTexture(i,c),this.key=f,this.colorTexture)}createColorTexture(i,c){const{createTexture2D:f}=this.rendererService,g=this.getColorRampBar(i,c),y=f({data:new Uint8Array(g.data),width:g.width,height:g.height,flipY:!1,unorm:!0});return this.colorTexture=y,y}setColorTexture(i,c,f){this.key=this.getTextureKey(c,f),this.colorTexture=i}destroy(){var i;(i=this.colorTexture)===null||i===void 0||i.destroy()}getColorRampBar(i,c){switch(i.type){case"cat":return oO(i);case"quantize":return aO(i);case"custom":return ay(i,c);case"linear":return oy(i,c);default:return iO(i)}}getTextureKey(i,c){var f;return`${i.colors.join("_")}_${i==null||(f=i.positions)===null||f===void 0?void 0:f.join("_")}_${i.type}_${c==null?void 0:c.join("_")}`}}const WT=["passes"],GT=["moduleName","vertexShader","fragmentShader","defines","inject","triangulation","styleOption","pickingEnabled"],{isEqual:yv,isFunction:jx,isNumber:zx,isObject:to,isPlainObject:Ux,isUndefined:$T}=oi;let Gh=0;class ql extends Sr.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService}get cameraService(){return this.container.cameraService}get coordinateService(){return this.container.coordinateSystemService}get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get pickingService(){return this.container.pickingService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get interactionService(){return this.container.interactionService}get mapService(){var i;return(i=this.container)===null||i===void 0?void 0:i.mapService}get normalPassFactory(){return this.container.normalPassFactory}constructor(i={}){super(),(0,dt.Z)(this,"id",`${Gh++}`),(0,dt.Z)(this,"name",`${Gh}`),(0,dt.Z)(this,"parent",void 0),(0,dt.Z)(this,"coordCenter",void 0),(0,dt.Z)(this,"type",void 0),(0,dt.Z)(this,"visible",!0),(0,dt.Z)(this,"zIndex",0),(0,dt.Z)(this,"minZoom",void 0),(0,dt.Z)(this,"maxZoom",void 0),(0,dt.Z)(this,"inited",!1),(0,dt.Z)(this,"layerModelNeedUpdate",!1),(0,dt.Z)(this,"pickedFeatureID",null),(0,dt.Z)(this,"selectedFeatureID",null),(0,dt.Z)(this,"styleNeedUpdate",!1),(0,dt.Z)(this,"rendering",void 0),(0,dt.Z)(this,"forceRender",!1),(0,dt.Z)(this,"clusterZoom",0),(0,dt.Z)(this,"layerType",void 0),(0,dt.Z)(this,"triangulation",void 0),(0,dt.Z)(this,"layerPickService",void 0),(0,dt.Z)(this,"textureService",void 0),(0,dt.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,dt.Z)(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,dt.Z)(this,"hooks",{init:new of,afterInit:new Sc,beforeRender:new Sc,beforeRenderData:new _w,afterRender:new Ro,beforePickingEncode:new Ro,afterPickingEncode:new Ro,beforeHighlight:new Ro(["pickedColor"]),afterHighlight:new Ro,beforeSelect:new Ro(["pickedColor"]),afterSelect:new Ro,beforeDestroy:new Ro,afterDestroy:new Ro}),(0,dt.Z)(this,"models",[]),(0,dt.Z)(this,"multiPassRenderer",void 0),(0,dt.Z)(this,"plugins",void 0),(0,dt.Z)(this,"startInit",!1),(0,dt.Z)(this,"sourceOption",void 0),(0,dt.Z)(this,"layerModel",void 0),(0,dt.Z)(this,"shapeOption",void 0),(0,dt.Z)(this,"tileLayer",void 0),(0,dt.Z)(this,"layerChildren",[]),(0,dt.Z)(this,"masks",[]),(0,dt.Z)(this,"configService",gb),(0,dt.Z)(this,"styleAttributeService",void 0),(0,dt.Z)(this,"layerSource",void 0),(0,dt.Z)(this,"postProcessingPassFactory",void 0),(0,dt.Z)(this,"animateOptions",{enable:!1}),(0,dt.Z)(this,"relativeOrigin",[0,0]),(0,dt.Z)(this,"originalExtent",[0,0,0,0]),(0,dt.Z)(this,"absoluteDataArray",[]),(0,dt.Z)(this,"container",void 0),(0,dt.Z)(this,"encodedData",void 0),(0,dt.Z)(this,"currentPickId",null),(0,dt.Z)(this,"rawConfig",void 0),(0,dt.Z)(this,"needUpdateConfig",void 0),(0,dt.Z)(this,"encodeStyleAttribute",{}),(0,dt.Z)(this,"enableShaderEncodeStyles",[]),(0,dt.Z)(this,"enableDataEncodeStyles",[]),(0,dt.Z)(this,"pendingStyleAttributes",[]),(0,dt.Z)(this,"scaleOptions",{}),(0,dt.Z)(this,"animateStartTime",void 0),(0,dt.Z)(this,"animateStatus",!1),(0,dt.Z)(this,"isDestroyed",!1),(0,dt.Z)(this,"uniformBuffers",[]),(0,dt.Z)(this,"encodeDataLength",0),(0,dt.Z)(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0,this.processRelativeCoordinates();const c=this.getLayerConfig();c&&c.autoFit&&this.fitBounds(c.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender()},10)}),this.name=i.name||this.id,this.zIndex=i.zIndex||0,this.rawConfig=i,this.masks=i.maskLayers||[]}addMask(i){this.masks.push(i),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}removeMask(i){const c=this.masks.indexOf(i);c>-1&&this.masks.splice(c,1),this.updateLayerConfig({maskLayers:this.masks})}disableMask(){this.updateLayerConfig({enableMask:!1})}enableMask(){this.updateLayerConfig({enableMask:!0})}addMaskLayer(i){this.masks.push(i)}removeMaskLayer(i){const c=this.masks.indexOf(i);c>-1&&this.masks.splice(c,1),i.destroy()}getAttribute(i){return this.styleAttributeService.getLayerStyleAttribute(i)}getLayerConfig(){return this.configService.getLayerConfig(this.id)}updateLayerConfig(i){if(Object.keys(i).map(c=>{c in this.rawConfig&&(this.rawConfig[c]=i[c])}),!this.startInit)this.needUpdateConfig=(0,nn.Z)((0,nn.Z)({},this.needUpdateConfig),i);else{const c=this.container.id;this.configService.setLayerConfig(c,this.id,(0,nn.Z)((0,nn.Z)((0,nn.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),i)),this.needUpdateConfig={}}}setContainer(i){this.container=i}getContainer(){return this.container}addPlugin(i){return this.plugins.push(i),this}init(){var i=this;return(0,an.Z)(function*(){const c=i.container.id;i.startInit=!0,i.configService.setLayerConfig(c,i.id,i.rawConfig),i.layerType=i.rawConfig.layerType;const{enableMultiPassRenderer:f,passes:g}=i.getLayerConfig();f&&g!==null&&g!==void 0&&g.length&&g.length>0&&i.mapService.on("mapAfterFrameChange",()=>{i.renderLayers()}),i.postProcessingPassFactory=i.container.postProcessingPassFactory,i.styleAttributeService=i.container.styleAttributeService,f&&(i.multiPassRenderer=i.container.multiPassRenderer,i.multiPassRenderer.setLayer(i)),i.pendingStyleAttributes.forEach(({attributeName:y,attributeField:x,attributeValues:w,updateOptions:T})=>{i.styleAttributeService.updateStyleAttribute(y,{scale:(0,nn.Z)({field:x},i.splitValuesAndCallbackInAttribute(w,x?void 0:i.getLayerConfig()[y]))},T)}),i.pendingStyleAttributes=[],i.plugins=VT();for(const y of i.plugins)y.apply(i,i.container);i.layerPickService=new Fx(i),i.textureService=new Bx(i),i.log(Ui.LayerInitStart),yield i.hooks.init.promise(),i.log(Ui.LayerInitEnd),i.inited=!0,i.emit("inited",{target:i,type:"inited"}),i.emit("add",{target:i,type:"add"}),i.hooks.afterInit.call()})()}log(i,c="init"){var f;if(this.tileLayer||this.isTileLayer)return;const g=`${this.id}.${c}.${i}`,y={id:this.id,type:this.type};(f=this.debugService)===null||f===void 0||f.log(g,y)}updateModelData(i){i.attributes&&i.elements?this.models.map(c=>{c.updateAttributesAndElements(i.attributes,i.elements)}):console.warn("data error")}setLayerPickService(i){this.layerPickService=i}prepareBuildModel(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});const{animateOption:i}=this.getLayerConfig();i!=null&&i.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}color(i,c,f){return this.updateStyleAttribute("color",i,c,f),this}texture(i,c,f){return this.updateStyleAttribute("texture",i,c,f),this}rotate(i,c,f){return this.updateStyleAttribute("rotate",i,c,f),this}size(i,c,f){return this.updateStyleAttribute("size",i,c,f),this}filter(i,c,f){const g=this.updateStyleAttribute("filter",i,c,f);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}shape(i,c,f){this.shapeOption={field:i,values:c};const g=this.updateStyleAttribute("shape",i,c,f);return this.dataState.dataSourceNeedUpdate=g&&this.inited,this}label(i,c,f){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:i,attributeValues:c,updateOptions:f}),this}animate(i){let c={};return to(i)?(c.enable=!0,c=(0,nn.Z)((0,nn.Z)({},c),i)):c.enable=i,this.updateLayerConfig({animateOption:c}),this}source(i,c){return(i==null?void 0:i.type)==="source"?(this.setSource(i),this):(this.sourceOption={data:i,options:c},this.clusterZoom=0,this)}setData(i,c){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(i,c)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(i,c)}),this}dataUpdatelog(){this.log(Ui.SourceInitStart,Yi.UPDATE),this.layerSource.once("update",()=>{this.log(Ui.SourceInitEnd,Yi.UPDATE)})}style(i){const{passes:c}=i,f=(0,ha.Z)(i,WT);c&&kx(c).forEach(y=>{const x=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(y[0]);x&&x.updateOptions(y[1])}),f.borderColor&&(f.stroke=f.borderColor),f.borderWidth&&(f.strokeWidth=f.borderWidth);const g=f;return Object.keys(f).forEach(y=>{const x=f[y];Array.isArray(x)&&x.length===2&&!zx(x[0])&&!zx(x[1])&&(g[y]={field:x[0],value:x[1]})}),this.encodeStyle(g),this.updateLayerConfig(g),this}encodeStyle(i){Object.keys(i).forEach(c=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(c)&&Ux(i[c])&&(i[c].field||i[c].value)&&!yv(this.encodeStyleAttribute[c],i[c])?(this.encodeStyleAttribute[c]=i[c],this.updateStyleAttribute(c,i[c].field,i[c].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[c]&&(delete this.encodeStyleAttribute[c],this.dataState.dataSourceNeedUpdate=!0)})}scale(i,c){const f=(0,nn.Z)({},this.scaleOptions);if(to(i)?this.scaleOptions=(0,nn.Z)((0,nn.Z)({},this.scaleOptions),i):this.scaleOptions[i]=c,this.styleAttributeService&&!yv(f,this.scaleOptions)){const g=to(i)?i:{[i]:c};this.styleAttributeService.updateScaleAttribute(g)}return this}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}prerender(){}render(i={}){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(i),this))}renderMultiPass(){var i=this;return(0,an.Z)(function*(){i.encodeDataLength<=0&&!i.forceRender||(i.multiPassRenderer&&i.multiPassRenderer.getRenderFlag()?yield i.multiPassRenderer.render():i.renderModels())})()}active(i){const c={};return c.enableHighlight=to(i)?!0:i,to(i)?(c.enableHighlight=!0,i.color&&(c.highlightColor=i.color),i.mix&&(c.activeMix=i.mix)):c.enableHighlight=!!i,this.updateLayerConfig(c),this}setActive(i,c){if(to(i)){const{x:f=0,y:g=0}=i;this.updateLayerConfig({highlightColor:to(c)?c.color:this.getLayerConfig().highlightColor,activeMix:to(c)?c.mix:this.getLayerConfig().activeMix}),this.pick({x:f,y:g})}else this.updateLayerConfig({pickedFeatureID:i,highlightColor:to(c)?c.color:this.getLayerConfig().highlightColor,activeMix:to(c)?c.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(ul(i)).then(()=>{setTimeout(()=>{this.reRender()},1)})}select(i){const c={};return c.enableSelect=to(i)?!0:i,to(i)?(c.enableSelect=!0,i.color&&(c.selectColor=i.color),i.mix&&(c.selectMix=i.mix)):c.enableSelect=!!i,this.updateLayerConfig(c),this}setSelect(i,c){if(to(i)){const{x:f=0,y:g=0}=i;this.updateLayerConfig({selectColor:to(c)?c.color:this.getLayerConfig().selectColor,selectMix:to(c)?c.mix:this.getLayerConfig().selectMix}),this.pick({x:f,y:g})}else this.updateLayerConfig({pickedFeatureID:i,selectColor:to(c)?c.color:this.getLayerConfig().selectColor,selectMix:to(c)?c.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(ul(i)).then(()=>{setTimeout(()=>{this.reRender()},1)})}setBlend(i){return this.updateLayerConfig({blend:i}),this.reRender(),this}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}setIndex(i){return this.zIndex=i,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}setCurrentPickId(i){this.currentPickId=i}getCurrentPickId(){return this.currentPickId}setCurrentSelectedId(i){this.selectedFeatureID=i}getCurrentSelectedId(){return this.selectedFeatureID}isVisible(){const i=this.mapService.getZoom(),{visible:c,minZoom:f=-1/0,maxZoom:g=1/0}=this.getLayerConfig();return!!c&&i>=f&&i<g}setMultiPass(i,c){if(this.updateLayerConfig({enableMultiPassRenderer:i}),c&&this.updateLayerConfig({passes:c}),i){const{passes:f=[]}=this.getLayerConfig();this.multiPassRenderer=Rx(this,f,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);const{width:g,height:y}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(g,y)}return this}setMinZoom(i){return this.updateLayerConfig({minZoom:i}),this}getMinZoom(){const{minZoom:i}=this.getLayerConfig();return i}getMaxZoom(){const{maxZoom:i}=this.getLayerConfig();return i}get(i){return this.getLayerConfig()[i]}setMaxZoom(i){return this.updateLayerConfig({maxZoom:i}),this}setAutoFit(i){return this.updateLayerConfig({autoFit:i}),this}fitBounds(i){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;const f=this.getSource().extent;return f.some(y=>Math.abs(y)===1/0)?this:(this.mapService.fitBounds([[f[0],f[1]],[f[2],f[3]]],i),this)}destroy(i=!0){var c,f,g,y,x;if(this.isDestroyed)return;(c=this.layerModel)===null||c===void 0||c.uniformBuffers.forEach(T=>{T.destroy()}),this.layerChildren.map(T=>T.destroy(!1)),this.layerChildren=[];const{maskfence:w}=this.getLayerConfig();w&&(this.masks.map(T=>T.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(f=this.multiPassRenderer)===null||f===void 0||f.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(g=this.layerModel)===null||g===void 0||g.clearModels(i),(y=this.tileLayer)===null||y===void 0||y.destroy(),this.models=[],(x=this.debugService)===null||x===void 0||x.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}clear(){this.styleAttributeService.clearAllAttributes()}clearModels(){var i;this.models.forEach(c=>c.destroy()),(i=this.layerModel)===null||i===void 0||i.clearModels(),this.models=[]}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(i=>i.needRescale||i.needRemapping||i.needRegenerateVertices).length}setSource(i){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=i,this.clusterZoom=0,this.inited&&this.layerSource.cluster){const c=this.mapService.getZoom();this.layerSource.updateClusterData(c)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:c})=>{if(this.coordCenter===void 0){const f=this.layerSource.center;this.coordCenter=f}if(c==="update"){if(this.tileLayer){this.tileLayer.reload();return}this.sourceEvent()}c==="inited"&&this.processRelativeCoordinates()})}getSource(){return this.layerSource}getScaleOptions(){return this.scaleOptions}setEncodedData(i){this.encodedData=i,this.encodeDataLength=i.length}getEncodedData(){return this.encodedData}getScale(i){return this.styleAttributeService.getLayerAttributeScale(i)}getLegend(i){var c,f,g;const y=this.styleAttributeService.getLayerStyleAttribute(i);return{type:(f=((y==null||(c=y.scale)===null||c===void 0?void 0:c.scalers)||[])[0])===null||f===void 0||(f=f.option)===null||f===void 0?void 0:f.type,field:y==null||(g=y.scale)===null||g===void 0?void 0:g.field,items:this.getLegendItems(i)}}getLegendItems(i){const c=this.styleAttributeService.getLayerAttributeScale(i);return c?c.invertExtent?c.range().map(g=>({value:c.invertExtent(g),[i]:g})):c.ticks?c.ticks().map(g=>({value:g,[i]:c(g)})):c!=null&&c.domain?c.domain().filter(g=>!$T(g)).map(g=>({value:g,[i]:c(g)})):[]:[]}pick({x:i,y:c}){this.interactionService.triggerHover({x:i,y:c})}boxSelect(i,c){this.pickingService.boxPickLayer(this,i,c)}buildLayerModel(i){var c=this;return(0,an.Z)(function*(){const{moduleName:f,vertexShader:g,fragmentShader:y,defines:x,inject:w,triangulation:T,styleOption:P,pickingEnabled:B=!0}=i,U=(0,ha.Z)(i,GT);c.shaderModuleService.registerModule(f,{vs:g,fs:y,defines:x,inject:w});const{vs:G,fs:mt,uniforms:Nt}=c.shaderModuleService.getModule(f),{createModel:Qt}=c.rendererService;return new Promise(ye=>{const{attributes:Fe,elements:ze,count:Ve}=c.styleAttributeService.createAttributesAndIndices(c.encodedData,T,P,c),tn=[...c.layerModel.uniformBuffers,...c.rendererService.uniformBuffers];B&&tn.push(c.getPickingUniformBuffer());const pn=(0,nn.Z)({attributes:Fe,uniforms:Nt,fs:mt,vs:G,elements:ze,blend:Wh[ks.normal],uniformBuffers:tn,textures:c.layerModel.textures},U);Ve&&(pn.count=Ve);const Pn=Qt(pn);ye(Pn)})})()}createAttributes(i){const{triangulation:c}=i,{attributes:f}=this.styleAttributeService.createAttributes(this.encodedData,c);return f}getTime(){return this.layerService.clock.getDelta()}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime()}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}needPick(i){const{enableHighlight:c=!0,enableSelect:f=!0}=this.getLayerConfig();let g=this.eventNames().indexOf(i)!==-1||this.eventNames().indexOf("un"+i)!==-1;return(i==="click"||i==="dblclick")&&f&&(g=!0),i==="mousemove"&&(c||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(g=!0),this.isVisible()&&g}buildModels(){return(0,an.Z)(function*(){throw new Error("Method not implemented.")})()}rebuildModels(){var i=this;return(0,an.Z)(function*(){yield i.buildModels()})()}renderMulPass(i){return(0,an.Z)(function*(){yield i.render()})()}renderModels(i={}){return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(c=>{c.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(i),textures:this.layerModel.textures},(i==null?void 0:i.ispick)||!1)}),this.hooks.afterRender.call(),this)}updateStyleAttribute(i,c,f,g){const y=this.configService.getAttributeConfig(this.id)||{};return yv(y[i],{field:c,values:f})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(i)!==-1&&this.configService.setAttributeConfig(this.id,{[i]:{field:c,values:f}}),this.startInit?this.styleAttributeService.updateStyleAttribute(i,{scale:(0,nn.Z)({field:c},this.splitValuesAndCallbackInAttribute(f,this.getLayerConfig()[c]))},g):this.pendingStyleAttributes.push({attributeName:i,attributeField:c,attributeValues:f,updateOptions:g}),!0)}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id)}getShaderPickStat(){return this.layerService.getShaderPickStat()}setEarthTime(i){console.warn("empty fn")}processData(i){return i}getModelType(){throw new Error("Method not implemented.")}getDefaultConfig(){return{}}processRelativeCoordinates(){if(!this.getLayerConfig().enableRelativeCoordinates||!this.layerSource||!this.layerSource.data)return;this.absoluteDataArray=[...this.layerSource.data.dataArray];const f=uh(this.layerSource.data.dataArray,{enableRelativeCoordinates:!0});this.layerSource.data.dataArray=f.dataArray,this.relativeOrigin=f.relativeOrigin,this.originalExtent=f.originalExtent}getAbsoluteData(){return this.absoluteDataArray}getRelativeOrigin(){return this.relativeOrigin}getOriginalExtent(){return this.originalExtent}initLayerModels(){var i=this;return(0,an.Z)(function*(){i.models.forEach(f=>f.destroy()),i.models=[],i.uniformBuffers.forEach(f=>{f.destroy()}),i.uniformBuffers=[];const c=i.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0,label:"pickingUniforms"});i.uniformBuffers.push(c),i.models=yield i.layerModel.initModels()})()}getPickingUniformBuffer(){return this.uniformBuffers[0]}reRender(){this.inited&&this.layerService.reRender()}splitValuesAndCallbackInAttribute(i){return{values:jx(i)?void 0:i,callback:jx(i)?i:void 0}}}function YT(a,i){return{enable:a,mask:255,func:{cmp:q.EQUAL,ref:i?1:0,mask:1}}}function Zx(a){return a.maskOperation===Yu.OR?{enable:!0,mask:255,func:{cmp:q.ALWAYS,ref:1,mask:255},opFront:{fail:q.KEEP,zfail:q.REPLACE,zpass:q.REPLACE}}:{enable:!0,mask:255,func:{cmp:a.stencilType===Ka.SINGLE||a.stencilIndex===0?q.ALWAYS:q.LESS,ref:a.stencilType===Ka.SINGLE?1:a.stencilIndex===0?2:1,mask:255},opFront:{fail:q.KEEP,zfail:q.REPLACE,zpass:q.REPLACE}}}const XT={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},$h={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};var qT=D(9187),Df=D.n(qT);function gs(a){return Math.max(Math.ceil(a/4)*4,4)}function Hx(a,i,c,f=!0){const g=c===3;if(f){a=a.slice();const x=[];for(let w=0;w<a.length;w+=c){x[0]=a[w],x[1]=a[w+1],g&&(x[2]=a[w+2]);const T=hl(x,!0,{enable:!1,decimal:1});a[w]=T[0],a[w+1]=T[1],g&&(a[w+2]=T[2])}}return Df()(a,i,c)}const bv="ATTRIBUTE_LOCATION_";class Kr{get attributeLocation(){return(0,nn.Z)({},ps)}constructor(i){(0,dt.Z)(this,"triangulation",void 0),(0,dt.Z)(this,"uniformBuffers",[]),(0,dt.Z)(this,"textures",[]),(0,dt.Z)(this,"createTexture2D",void 0),(0,dt.Z)(this,"preStyleAttribute",{}),(0,dt.Z)(this,"encodeStyleAttribute",{}),(0,dt.Z)(this,"layer",void 0),(0,dt.Z)(this,"dataTexture",void 0),(0,dt.Z)(this,"DATA_TEXTURE_WIDTH",void 0),(0,dt.Z)(this,"dataTextureTest",void 0),(0,dt.Z)(this,"configService",void 0),(0,dt.Z)(this,"shaderModuleService",void 0),(0,dt.Z)(this,"rendererService",void 0),(0,dt.Z)(this,"iconService",void 0),(0,dt.Z)(this,"fontService",void 0),(0,dt.Z)(this,"styleAttributeService",void 0),(0,dt.Z)(this,"mapService",void 0),(0,dt.Z)(this,"cameraService",void 0),(0,dt.Z)(this,"layerService",void 0),(0,dt.Z)(this,"pickingService",void 0),(0,dt.Z)(this,"attributeUnifoms",void 0),(0,dt.Z)(this,"commonUnifoms",void 0),this.layer=i,this.configService=i.getContainer().globalConfigService,this.rendererService=i.getContainer().rendererService,this.pickingService=i.getContainer().pickingService,this.shaderModuleService=i.getContainer().shaderModuleService,this.styleAttributeService=i.getContainer().styleAttributeService,this.mapService=i.getContainer().mapService,this.iconService=i.getContainer().iconService,this.fontService=i.getContainer().fontService,this.cameraService=i.getContainer().cameraService,this.layerService=i.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();const{createTexture2D:c}=this.rendererService;this.createTexture2D=c}getBlend(){const{blend:i="normal"}=this.layer.getLayerConfig();return Wh[ks[i]]}getStencil(i){const{mask:c=!1,maskInside:f=!0,enableMask:g,maskOperation:y=Yu.AND}=this.layer.getLayerConfig();if(this.layer.type==="MaskLayer")return Zx({isStencil:!0,stencilType:Ka.SINGLE});if(i.isStencil)return Zx((0,nn.Z)((0,nn.Z)({},i),{},{maskOperation:y}));const x=c||g&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return YT(x,f)}getDefaultStyle(){return{}}getUninforms(){const i=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();const f=(0,nn.Z)((0,nn.Z)({},c.uniformsOption),i.uniformsOption);return Object.keys(f).forEach(g=>{typeof f[g]=="boolean"&&(f[g]=f[g]?1:0)}),!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(f.u_texture=this.textures[0]),f}getAnimateUniforms(){return{}}needUpdate(){return(0,an.Z)(function*(){return!1})()}buildModels(){return(0,an.Z)(function*(){throw new Error("Method not implemented.")})()}initModels(){return(0,an.Z)(function*(){throw new Error("Method not implemented.")})()}clearModels(i=!0){}getAttribute(){throw new Error("Method not implemented.")}prerender(){}render(i){throw new Error("Method not implemented.")}registerBuiltinAttributes(){throw new Error("Method not implemented.")}animateOption2Array(i){return[i.enable?0:1,i.duration||4,i.interval||.2,i.trailLength||.1]}startModelAnimate(){const{animateOption:i}=this.layer.getLayerConfig();i.enable&&this.layer.setAnimateStartTime()}getInject(){return $6(this.layer.enableShaderEncodeStyles,this.layer.encodeStyleAttribute)}getDefines(){const i=Object.keys(this.attributeLocation).reduce((c,f)=>{const g=bv+f;return c[g]=this.attributeLocation[f],c},{});return(0,nn.Z)({},i)}getStyleAttribute(){const i={};return this.layer.enableShaderEncodeStyles.forEach(c=>{if(!this.layer.encodeStyleAttribute[c]){const f=this.layer.getLayerConfig()[c];let g=typeof f=="undefined"?XT[c]:f;c==="stroke"&&(g=Ur(g)),i["u_"+c]=g}}),i}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(i=>{const c=NT(i);c&&this.styleAttributeService.registerStyleAttribute(c)})}registerPosition64LowAttribute(i=!0){this.styleAttributeService.registerStyleAttribute({name:"position64Low",type:Dn.Attribute,descriptor:{name:"a_Position64Low",shaderLocation:this.attributeLocation.POSITION_64LOW,buffer:{data:[],type:q.FLOAT},size:2,update:(c,f,g)=>i?[Ii(g[0]),Ii(g[1])]:[0,0]}})}updateEncodeAttribute(i,c){this.encodeStyleAttribute[i]=c}initUniformsBuffer(){const i=this.getUniformsBufferInfo(this.getStyleAttribute()),c=this.getCommonUniformsInfo();i.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(gs(i.uniformsLength)).fill(0),isUBO:!0,label:"layerModelAttributeUnifoms"}),this.uniformBuffers.push(this.attributeUnifoms)),c.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(gs(c.uniformsLength)).fill(0),isUBO:!0,label:"layerModelCommonUnifoms"}),this.uniformBuffers.push(this.commonUnifoms))}getUniformsBufferInfo(i){let c=0;const f=[];return Object.values(i).forEach(g=>{Array.isArray(g)?(f.push(...g),c+=g.length):typeof g=="number"?(f.push(g),c+=1):typeof g=="boolean"&&(f.push(Number(g)),c+=1)}),{uniformsOption:i,uniformsLength:c,uniformsArray:f}}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}updateStyleUnifoms(){var i,c;const{uniformsArray:f}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:g}=this.getCommonUniformsInfo();(i=this.attributeUnifoms)===null||i===void 0||i.subData({offset:0,data:new Uint8Array(new Float32Array(f).buffer)}),(c=this.commonUnifoms)===null||c===void 0||c.subData({offset:0,data:new Uint8Array(new Float32Array(g).buffer)})}}function $6(a,i){const c=[];let f="";a.forEach(x=>{const w=x.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),T=bv+w;i[x]?f+=`#define USE_ATTRIBUTE_${w} 0.0 
`:c.push(`  ${$h[x]} u_${x};`),f+=`
#ifdef USE_ATTRIBUTE_${w}
layout(location = ${T}) in ${$h[x]} a_${x.charAt(0).toUpperCase()+x.slice(1)};
#endif 
`});const g=c.length?`
layout(std140) uniform AttributeUniforms {
  ${c.join(`
`)}
};
`:"";f+=g;let y="";return a.forEach(x=>{const w=x.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase();y+=`
  #ifdef USE_ATTRIBUTE_${w}
    ${$h[x]} ${x} = a_${x.charAt(0).toUpperCase()+x.slice(1)};
  #else
    ${$h[x]} ${x} = u_${x};
  #endif
  `}),{"vs:#decl":f,"fs:#decl":g,"vs:#main-start":y}}const _v=100,Y6=36,X6=40;function Vx(a){return a/180*Math.acos(-1)}function Wx(a){const i=Vx(a[0])+Math.PI/2,c=Vx(a[1]),f=_v+Math.random()*.4,g=f*Math.cos(c)*Math.cos(i),y=f*Math.cos(c)*Math.sin(i),x=f*Math.sin(c);return[y,x,g]}function Gx(a,i){const c=mat4.create(),f=mat4.create(),g=vec3.fromValues(0,1,0),y=vec3.fromValues(0,0,0);i=i||{},a=typeof a!="undefined"?a:1;const w=2+(typeof i.segments!="undefined"?i.segments:32),T=2*w,P=[],B=[],U=[],G=[],mt=[],Nt=[];for(let Qt=0;Qt<=w;Qt++){const ye=Qt/w,Fe=ye*Math.PI;for(let ze=0;ze<=T;ze++){const Ve=ze/T,tn=Ve*Math.PI*2;mat4.identity(f),mat4.rotateZ(f,f,-Fe),mat4.identity(c),mat4.rotateY(c,c,tn),vec3.transformMat4(y,g,f),vec3.transformMat4(y,y,c),vec3.scale(y,y,-a),U.push(y.slice()),G.push(...y.slice()),vec3.normalize(y,y),mt.push(...y.slice()),Nt.push([Ve,1-ye]),G.push(Ve,1-ye)}if(Qt>0){const ze=U.length;let Ve=ze-2*(T+1);for(;Ve+T+2<ze;Ve++)P.push([Ve,Ve+1,Ve+T+1]),B.push(Ve,Ve+1,Ve+T+1),P.push([Ve+T+1,Ve+1,Ve+T+2]),B.push(Ve+T+1,Ve+1,Ve+T+2)}}return{cells:P,positions:U,uvs:Nt,positionsArr:G,indicesArr:B,normalArr:mt}}var lr=D(31437);const $x=lr.Ue(),q6=lr.Ue(),na=lr.Ue(),Nf=lr.Ue(),Ff=lr.Ue();function Yx(a,i,c,f,g){lr.IH(a,c,f),lr.Fv(a,a),i=lr.al(-a[1],a[0]);const y=lr.al(-c[1],c[0]);return[g/lr.AK(i,y),i]}function Bf(a,i){return lr.t8(a,-i[1],i[0])}function Yh(a,i,c){return lr.lu(a,i,c),lr.Fv(a,a),a}function Xx(a,i){return a[0]===i[0]&&a[1]===i[1]}function K6(a){const i=new Map;for(let c=0;c<a.length;c++){const f=a[0].toString()+"-"+a[1].toString();i.get(f)?(a.splice(c,1),c++):i.set(f,f)}return a}class KT{constructor(i={}){(0,dt.Z)(this,"complex",void 0),(0,dt.Z)(this,"join",void 0),(0,dt.Z)(this,"cap",void 0),(0,dt.Z)(this,"miterLimit",void 0),(0,dt.Z)(this,"thickness",void 0),(0,dt.Z)(this,"normal",void 0),(0,dt.Z)(this,"lastFlip",-1),(0,dt.Z)(this,"miter",lr.al(0,0)),(0,dt.Z)(this,"started",!1),(0,dt.Z)(this,"dash",!1),(0,dt.Z)(this,"totalDistance",0),(0,dt.Z)(this,"currentIndex",0),this.join=i.join||"miter",this.cap=i.cap||"butt",this.miterLimit=i.miterLimit||10,this.thickness=i.thickness||1,this.dash=i.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}simpleExtrude(i){const c=this.complex;if(i.length<=1)return c;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const f=i.length;let g=c.startIndex;for(let y=1;y<f;y++){const x=i[y-1],w=i[y],T=y<i.length-1?i[y+1]:null,P=this.simpleSegment(c,g,x,w,T);g+=P}if(this.dash)for(let y=0;y<c.positions.length/6;y++)c.positions[y*6+5]=this.totalDistance;return c.startIndex=c.positions.length/6,c}extrude(i){const c=this.complex;if(i.length<=1)return c;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const f=i.length;let g=c.startIndex;for(let y=1;y<f;y++){const x=i[y-1],w=i[y],T=y<i.length-1?i[y+1]:null,P=this.segment(c,g,x,w,T);g+=P}if(this.dash)for(let y=0;y<c.positions.length/6;y++)c.positions[y*6+5]=this.totalDistance;return c.startIndex=c.positions.length/6,c}simpleSegment(i,c,f,g,y){let x=0;const w=i.indices,T=i.positions,P=i.normals,B=Vo([g[0],g[1]]),U=Vo([f[0],f[1]]);Yh(na,B,U);let G=0;if(this.dash&&(G=this.lineSegmentDistance(B,U),this.totalDistance+=G),this.normal||(this.normal=lr.Ue(),Bf(this.normal,na)),this.started||(this.started=!0,this.extrusions(T,P,f,this.normal,this.thickness,this.totalDistance-G)),w.push(c+0,c+1,c+2),!y)Bf(this.normal,na),this.extrusions(T,P,g,this.normal,this.thickness,this.totalDistance),w.push(...this.lastFlip===1?[c,c+2,c+3]:[c+2,c+1,c+3]),x+=2;else{const mt=Vo([y[0],y[1]]);Xx(B,mt)&&lr.IH(mt,B,lr.Fv(mt,lr.$X(mt,B,U))),Yh(Nf,mt,B);const[Nt,Qt]=Yx(Ff,lr.Ue(),na,Nf,this.thickness);let ye=lr.AK(Ff,this.normal)<0?-1:1;this.extrusions(T,P,g,Qt,Nt,this.totalDistance),w.push(...this.lastFlip===1?[c,c+2,c+3]:[c+2,c+1,c+3]),ye=-1,lr.JG(this.normal,Qt),x+=2,this.lastFlip=ye}return x}segment(i,c,f,g,y){let x=0;const w=i.indices,T=i.positions,P=i.normals,B=this.cap==="square",U=this.join==="bevel",G=Vo([g[0],g[1]]),mt=Vo([f[0],f[1]]);Yh(na,G,mt);let Nt=0;if(this.dash&&(Nt=this.lineSegmentDistance(G,mt),this.totalDistance+=Nt),this.normal||(this.normal=lr.Ue(),Bf(this.normal,na)),!this.started)if(this.started=!0,B){const Qt=lr.Ue(),ye=lr.Ue();lr.IH(Qt,this.normal,na),lr.IH(ye,this.normal,na),P.push(ye[0],ye[1],0),P.push(Qt[0],Qt[1],0),T.push(f[0],f[1],f[2]|0,this.totalDistance-Nt,-this.thickness,f[2]|0),this.complex.indexes.push(this.currentIndex),T.push(f[0],f[1],f[2]|0,this.totalDistance-Nt,this.thickness,f[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(T,P,f,this.normal,this.thickness,this.totalDistance-Nt);if(w.push(c+0,c+1,c+2),y){const Qt=Vo([y[0],y[1]]);Xx(G,Qt)&&lr.IH(Qt,G,lr.Fv(Qt,lr.$X(Qt,G,mt))),Yh(Nf,Qt,G);const[ye,Fe]=Yx(Ff,lr.Ue(),na,Nf,this.thickness);let ze=lr.AK(Ff,this.normal)<0?-1:1,Ve=U;!Ve&&this.join==="miter"&&ye>this.miterLimit&&(Ve=!0),Ve?(P.push(this.normal[0],this.normal[1],0),P.push(Fe[0],Fe[1],0),T.push(g[0],g[1],g[2]|0,this.totalDistance,-this.thickness*ze,g[2]|0),this.complex.indexes.push(this.currentIndex),T.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness*ze,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,w.push(...this.lastFlip!==-ze?[c,c+2,c+3]:[c+2,c+1,c+3]),w.push(c+2,c+3,c+4),Bf($x,Nf),lr.JG(this.normal,$x),P.push(this.normal[0],this.normal[1],0),T.push(g[0],g[1],g[2]|0,this.totalDistance,-this.thickness*ze,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,x+=3):(this.extrusions(T,P,g,Fe,ye,this.totalDistance),w.push(...this.lastFlip===1?[c,c+2,c+3]:[c+2,c+1,c+3]),ze=-1,lr.JG(this.normal,Fe),x+=2),this.lastFlip=ze}else{if(Bf(this.normal,na),B){const Qt=lr.Ue(),ye=lr.Ue();lr.lu(ye,na,this.normal),lr.IH(Qt,na,this.normal),P.push(ye[0],ye[1],0),P.push(Qt[0],Qt[1],0),T.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness,g[2]|0),this.complex.indexes.push(this.currentIndex),T.push(g[0],g[1],g[2]|0,this.totalDistance,this.thickness,g[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(T,P,g,this.normal,this.thickness,this.totalDistance);w.push(...this.lastFlip===1?[c,c+2,c+3]:[c+2,c+1,c+3]),x+=2}return x}extrusions(i,c,f,g,y,x){c.push(g[0],g[1],0),c.push(g[0],g[1],0),i.push(f[0],f[1],f[2]|0,x,-y,f[2]|0),this.complex.indexes.push(this.currentIndex),i.push(f[0],f[1],f[2]|0,x,y,f[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}lineSegmentDistance(i,c){const f=c[0]-i[0],g=c[1]-i[1];return Math.sqrt(f*f+g*g)}}let jf=function(a){return a.CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn",a}({}),qs=function(a){return a.CIRCLE="circle",a.SQUARE="square",a.TRIANGLE="triangle",a.HEXAGON="hexagon",a.PENTAGON="pentagon",a}({});function Ks(a,i=0){const c=Math.PI*2/a,f=[];for(let y=0;y<a;y++)f.push(c*y+i*Math.PI/12);return f.map(y=>{const x=Math.sin(y+Math.PI/4),w=Math.cos(y+Math.PI/4);return[x,w,0]})}function Kl(){return Ks(30)}function xv(){return Ks(4)}function Sv(){return Ks(3)}function qx(){return Ks(6,1)}function Kx(){return Ks(5)}const Ov={[qs.CIRCLE]:Kl,[qs.HEXAGON]:qx,[qs.TRIANGLE]:Sv,[qs.SQUARE]:xv,[qs.PENTAGON]:Kx,[jf.CYLINDER]:Kl,[jf.HEXAGONCOLUMN]:qx,[jf.TRIANGLECOLUMN]:Sv,[jf.SQUARECOLUMN]:xv,[jf.PENTAGONCOLUMN]:Kx};var Er=D(77160);function Q6(a){const i=a[0][0],c=a[0][a[0].length-1];i[0]===c[0]&&i[1]===c[1]&&(a[0]=a[0].slice(0,a[0].length-1));const f=a[0].length,g=earcut.flatten(a),{vertices:y,dimensions:x}=g,w=[],T=[];for(let B=0;B<y.length/x;B++)x===2?w.push(y[B*2],y[B*2+1],1):w.push(y[B*3],y[B*3+1],1);const P=earcut(g.vertices,g.holes,g.dimensions);T.push(...P);for(let B=0;B<f;B++){const U=g.vertices.slice(B*x,(B+1)*x);let G=g.vertices.slice((B+1)*x,(B+2)*x);G.length===0&&(G=g.vertices.slice(0,x));const mt=w.length/3;w.push(U[0],U[1],1,G[0],G[1],1,U[0],U[1],0,G[0],G[1],0),T.push(...[0,2,1,2,3,1].map(Nt=>Nt+mt))}return{positions:w,index:T}}function ra(a){const i=earcut.flatten(a),c=earcut(i.vertices,i.holes,i.dimensions);return{positions:i.vertices,index:c}}function Qx(a,i=!1){const c=a[0][0],f=a[0][a[0].length-1];c[0]===f[0]&&c[1]===f[1]&&(a[0]=a[0].slice(0,a[0].length-1));const g=a[0].length,y=Df().flatten(a),{vertices:x,dimensions:w,holes:T}=y,P=[],B=[],U=[];for(let mt=0;mt<x.length/w;mt++)P.push(x[mt*w],x[mt*w+1],1,-1,-1),U.push(0,0,1);const G=Hx(x,T,w,i);B.push(...G);for(let mt=0;mt<g;mt++){const Nt=y.vertices.slice(mt*w,(mt+1)*w);let Qt=y.vertices.slice((mt+1)*w,(mt+2)*w);Qt.length===0&&(Qt=y.vertices.slice(0,w));const ye=P.length/5;P.push(Nt[0],Nt[1],1,0,0,Qt[0],Qt[1],1,.1,0,Nt[0],Nt[1],0,0,.8,Qt[0],Qt[1],0,.1,.8);const Fe=Jx([Qt[0],Qt[1],1],[Nt[0],Nt[1],0],[Nt[0],Nt[1],1],i);U.push(...Fe,...Fe,...Fe,...Fe),B.push(...[1,2,0,3,2,1].map(ze=>ze+ye))}return{positions:P,index:B,normals:U}}function Jx(a,i,c,f=!1){const g=Er.Ue(),y=Er.Ue(),x=Er.Ue();f&&(a=hl(a),i=hl(i),c=hl(c));const w=Er.al(...a),T=Er.al(...i),P=Er.al(...c);Er.lu(g,P,T),Er.lu(y,w,T),Er.kC(x,g,y);const B=Er.Ue();return Er.Fv(B,x),B}const Xh={};function Yc(a){const i=dc(a.coordinates);return{vertices:[...i,...i,...i,...i],indices:[0,1,2,2,3,0],size:i.length}}function t2(a){const i=dc(a.coordinates),c=Wx(i);return{vertices:[...c,...c,...c,...c],indices:[0,1,2,2,3,0],size:c.length}}function e2(a){const{shape:i}=a,{positions:c,index:f,normals:g}=ka(i,!1);return{vertices:c,indices:f,normals:g,size:5}}function n2(a){const i=dc(a.coordinates);return{vertices:[...i],indices:[0],size:i.length}}function Ev(a){const{coordinates:i}=a,c=new KT({dash:!0,join:"bevel"});let f=i;f[0]&&!Array.isArray(f[0][0])&&(f=[i]),f.forEach(y=>{c.extrude(y)});const g=c.complex;return{vertices:g.positions,indices:g.indices,normals:g.normals,indexes:g.indexes,size:6}}function r2(a){const i=a.coordinates.flat(),c=1,f=1;return{vertices:[1,0,0,...i,1,2,-3,...i,1,1,-3,...i,0,1,0,...i,0,0,0,...i,1,0,0,...i,1,2,-3,...i,1,1,-3,...i,0,1,0,...i,0,0,0,...i],normals:[-c,2*f,1,2*f,-f,1,f,-f,1,f,-f,1,-c,-f,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function QT(a){const{coordinates:i}=a,c=[];if(!Array.isArray(i[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};const{results:f,totalDistance:g}=JT(i);return f.map(y=>{c.push(y[0],y[1],y[2],y[3],0,g)}),{vertices:c,indices:[],normals:[],size:6,count:f.length}}function J6(a){const{coordinates:i}=a,c=[];if(!Array.isArray(i[0]))return{vertices:[],indices:[],size:4,count:0};const{results:f}=tC(i);return f.map(g=>{c.push(g[0],g[1],g[2],g[3])}),{vertices:c,indices:[],size:4,count:f.length}}function i2(a,i){const c=i[0]-a[0],f=i[1]-a[1];return Math.sqrt(c*c+f*f)}function Ql(a,i){return a.length<3&&a.push(0),i!==void 0&&a.push(i),a}function JT(a){let i=a;Array.isArray(i)&&Array.isArray(i[0])&&Array.isArray(i[0][0])&&(i=a.flat());let c=0;if(i.length<2)return{results:i,totalDistance:0};{const f=[],g=Ql(i[0],c);f.push(g);for(let x=1;x<i.length-1;x++){const w=i2(Vo(i[x-1]),Vo(i[x]));c+=w;const T=Ql(i[x],c);f.push(T),f.push(T)}const y=i2(Vo(i[i.length-2]),Vo(i[i.length-1]));return c+=y,f.push(Ql(i[i.length-1],c)),{results:f,totalDistance:c}}}function tC(a){if(a.length<2)return{results:a};{const i=[],c=Ql(a[0]);i.push(c);for(let f=1;f<a.length-1;f++){const g=Ql(a[f]);i.push(g),i.push(g)}return i.push(Ql(a[a.length-1])),{results:i}}}function zf(a){const{coordinates:i}=a,c=Df().flatten(i),{vertices:f,dimensions:g,holes:y}=c;return{indices:Hx(f,y,g),vertices:f,size:g}}function eC(a){const{indices:i,vertices:c,size:f}=zf(a);return{indices:i,vertices:nC(c),size:f+4}}function nC(a){const i=[],{center:c,radius:f}=PO(a);for(let g=0;g<a.length;g+=2){const y=a[g],x=a[g+1];i.push(y,x,0,...c,f)}return i}function o2(a){const i=a.coordinates,{positions:c,index:f,normals:g}=Qx(i,!0);return{vertices:c,indices:f,normals:g,size:5}}function t7(a){const{shape:i}=a,{positions:c,index:f}=iC(i);return{vertices:c,indices:f,size:3}}function Fo(a){const i=a.coordinates;return{vertices:[...i[0],0,0,0,...i[1],0,1,0,...i[2],0,1,1,...i[3],0,0,1],indices:[0,1,2,0,2,3],size:5}}function Jl(a,i){const{segmentNumber:c=30}=i,f=a.coordinates,g=[],y=[];for(let x=0;x<c;x++)g.push(x,1,x,f[0][0],f[0][1],f[1][0],f[1][1],x,-1,x,f[0][0],f[0][1],f[1][0],f[1][1]),x!==c-1&&y.push(...[0,1,2,1,3,2].map(w=>x*2+w));return{vertices:g,indices:y,size:7}}function rC(a){const i=a.coordinates;i.length===2&&i.push(0);const c=Uf(-1,1),f=Uf(1,1),g=Uf(-1,-1),y=Uf(1,-1);return{vertices:[...i,...c,...i,...g,...i,...y,...i,...f],indices:[0,1,2,3,0,2],size:5}}function ka(a,i=!1){if(Xh&&Xh[a])return Xh[a];const c=Ov[a]?Ov[a]():Ov.cylinder(),f=Qx([c],i);return Xh[a]=f,f}function e7(a,i,c=3,f=!1){const g=new Float32Array(a.length/c*3);let y,x,w;const T=vec3.create(),P=vec3.create(),B=vec3.create();for(let U=0,G=i.length;U<G;U+=3){y=i[U+0]*3,x=i[U+1]*3,w=i[U+2]*3;let mt=[a[y],a[y+1]],Nt=[a[x],a[x+1]],Qt=[a[w],a[w+1]];f&&(mt=lngLatToMeters(mt),Nt=lngLatToMeters(Nt),Qt=lngLatToMeters(Qt));const[ye,Fe]=mt,ze=vec3.fromValues(ye,Fe,a[y+2]),[Ve,tn]=Nt,pn=vec3.fromValues(Ve,tn,a[x+2]),[Pn,Tn]=Qt,kn=vec3.fromValues(Pn,Tn,a[w+2]);vec3.sub(T,kn,pn),vec3.sub(P,ze,pn),vec3.cross(B,T,P),g[y]+=T[0],g[y+1]+=T[1],g[y+2]+=T[2],g[x]+=T[0],g[x+1]+=T[1],g[x+2]+=T[2],g[w]+=T[0],g[w+1]+=T[1],g[w+2]+=T[2]}return tu(g),g}function tu(a){for(let i=0,c=a.length;i<c;i+=3){const f=vec3.fromValues(a[i],a[i+1],a[i+2]),g=vec3.create();vec3.normalize(g,f),a.set(g,i)}}function a2(a){const i=a[0][0],c=a[0][a[0].length-1];return i[0]===c[0]&&i[1]===c[1]}function iC(a){const i=["cylinder","triangleColumn","hexagonColumn","squareColumn"],c=geometryShape[a]?geometryShape[a]():geometryShape.circle();return i.indexOf(a)===-1?fillPolygon([c]):extrudePolygon([c])}function Uf(a,i){const c=(a+1)/2,f=(i+1)/2;return[c,f]}function n7(){const a=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),{positionsArr:i,indicesArr:c,normalArr:f}=a;return{vertices:i,indices:c,size:5,normals:f}}function r7(){const a=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),{positionsArr:i,indicesArr:c,normalArr:f}=a;return{vertices:i,indices:c,size:5,normals:f}}const oC=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,aC=`#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  if (u_lineDir == 1.0) {
    // \u6B63\u5411
    return mid;
  } else {
    // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
  //  return index / (segmentNumber - 1.);
}
vec2 interpolate(vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x, t), bezier3(y, t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return dir_screenspace.xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if (u_linearColor == 1.0) {
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex / segmentNumber);
  } else {
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source_world = a_Instance.rg; // \u8D77\u59CB\u70B9
  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9

  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  // \u8BA1\u7B97 dashArray \u548C distanceRatio \u8F93\u51FA\u5230\u7247\u5143
  float total_Distance = pixelDistance(source_world, target_world) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 source = project_position(vec4(source_world, 0, 1.), a_Instance64Low.xy);
  vec4 target = project_position(vec4(target_world, 0, 1.), a_Instance64Low.zw);

  vec2 currPos = interpolate(source.xy, target.xy, segmentRatio, thetaOffset);
  vec2 nextPos = interpolate(source.xy, target.xy, nextSegmentRatio, thetaOffset);

  vec2 offset = project_pixel(
    getExtrusionOffset((nextPos.xy - currPos.xy) * indexDir, a_Position.y)
  );

  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F
    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    arcDistrance = project_pixel(arcDistrance);

    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance / pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace(vec4(currPos.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,sC={solid:0,dash:1};class cC extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0),(0,dt.Z)(this,"updateTexture",()=>{const{createTexture2D:c}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=c({data:this.iconService.getCanvas(),mag:q.NEAREST,min:q.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:c,textureBlend:f="normal",lineType:g="solid",dashArray:y=[10,5],forward:x=!0,lineTexture:w=!1,iconStep:T=100,segmentNumber:P=30}=this.layer.getLayerConfig(),{animateOption:B}=this.layer.getLayerConfig();let U=y;g!=="dash"&&(U=[0,0]),U.length===2&&U.push(0,0);let G=0,mt=[0,0,0,0],Nt=[0,0,0,0];if(i&&c&&(mt=Ur(i),Nt=Ur(c),G=1),this.rendererService.getDirty()){var Qt;(Qt=this.texture)===null||Qt===void 0||Qt.bind()}const ye={u_animate:this.animateOption2Array(B),u_dash_array:U,u_sourceColor:mt,u_targetColor:Nt,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:P,u_lineDir:x?1:-1,u_icon_step:T,u_line_texture:w?1:0,u_textureBlend:f==="normal"?0:1,u_blur:.9,u_line_type:sC[g||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:G};return this.getUniformsBufferInfo(ye)}initModels(){var i=this;return(0,an.Z)(function*(){return i.updateTexture(),i.iconService.on("imageUpdate",i.updateTexture),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:oC,vert:aC,type:""}}buildModels(){var i=this;return(0,an.Z)(function*(){i.initUniformsBuffer();const{segmentNumber:c=30}=i.layer.getLayerConfig(),{frag:f,vert:g,type:y}=i.getShaders();return[yield i.layer.buildLayerModel({moduleName:"lineArc2d"+y,vertexShader:g,fragmentShader:f,defines:i.getDefines(),inject:i.getInject(),triangulation:Jl,depth:{enable:!1},styleOption:{segmentNumber:c}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=1}=i;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Dn.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:4,update:(i,c,f)=>[f[3],f[4],f[5],f[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Dn.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:4,update:(i,c,f)=>[Ii(f[3]),Ii(f[4]),Ii(f[5]),Ii(f[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const c=this.iconService.getIconMap(),{texture:f}=i,{x:g,y}=c[f]||{x:0,y:0};return[g,y]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:Dn.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{thetaOffset:c=1}=i;return[c]}}})}}const lC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec4 v_dash_array;
in float v_segmentIndex;
in vec2 v_iconMapUV;
in vec4 v_line_data;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,uC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0), a_Instance64Low.xy).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0), a_Instance64Low.zw).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;

    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }


  setPickingColor(a_PickingColor);
}
`,fC={solid:0,dash:1};class s2 extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0),(0,dt.Z)(this,"updateTexture",()=>{const{createTexture2D:c}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=c({data:this.iconService.getCanvas(),mag:q.NEAREST,min:q.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:c,textureBlend:f="normal",lineType:g="solid",dashArray:y=[10,5],lineTexture:x=!1,iconStep:w=100,segmentNumber:T=30,globalArcHeight:P=10}=this.layer.getLayerConfig(),{animateOption:B}=this.layer.getLayerConfig();y.length===2&&y.push(0,0);let U=0,G=[0,0,0,0],mt=[0,0,0,0];if(i&&c&&(G=Ur(i),mt=Ur(c),U=1),this.rendererService.getDirty()){var Nt;(Nt=this.texture)===null||Nt===void 0||Nt.bind()}const Qt={u_animate:this.animateOption2Array(B),u_dash_array:y,u_sourceColor:G,u_targetColor:mt,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:_v,u_global_height:P,segmentNumber:T,u_line_type:fC[g]||0,u_icon_step:w,u_line_texture:x?1:0,u_textureBlend:f==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:U};return this.getUniformsBufferInfo(Qt)}initModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),i.updateTexture(),i.iconService.on("imageUpdate",i.updateTexture),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:lC,vert:uC,type:""}}buildModels(){var i=this;return(0,an.Z)(function*(){const{segmentNumber:c=30}=i.layer.getLayerConfig(),{frag:f,vert:g,type:y}=i.getShaders();return[yield i.layer.buildLayerModel({moduleName:"lineArc3d"+y,vertexShader:g,fragmentShader:f,defines:i.getDefines(),inject:i.getInject(),triangulation:Jl,styleOption:{segmentNumber:c}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=1}=i;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Dn.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:4,update:(i,c,f)=>[f[3],f[4],f[5],f[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Dn.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:4,update:(i,c,f)=>[Ii(f[3]),Ii(f[4]),Ii(f[5]),Ii(f[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const c=this.iconService.getIconMap(),{texture:f}=i,{x:g,y}=c[f]||{x:0,y:0};return[g,y]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:Dn.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{thetaOffset:c=1}=i;return[c]}}})}}const c2={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},Eo=1/2;function dC(a,i){const{width:c=2,height:f=1}=i;return{vertices:[0,Eo*a,1*a*c,-(f+Eo)*a,1*a*c,(f-Eo)*a,0,Eo*a,1*a*c,-(f+Eo)*a,1*a*c,(f-Eo)*a],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*a,-2*a,1,-2*a,1.5*a,1,1*a,1.5*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function hC(a,i){const{width:c=2,height:f=3}=i;return{vertices:[0,0,1*a*c,1*f,1*a*c,-1*f,0,0,1*a*c,1*f,1*a*c,-1*f],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*a,1,2,1*a,1,-2,1*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function l2(a,i){const{width:c=2,height:f=2}=i;return{vertices:[0,f/2,a*c*1,f/2,a*c*1,-f/2,0,-f/2,0,f/2,a*c*1,f/2,a*c*1,-f/2,0,-f/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function pC(a,i){const{width:c=2,height:f=3}=i;return{vertices:[0,0,1*c*a,.5*f,2*c*a,0,1*c*a,-.5*f,0,0,1*c*a,.5*f,2*c*a,0,1*c*a,-.5*f],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function gC(a,i){const{width:c=2,height:f=3}=i;return{vertices:[0,0,2*a*c,1*f,1.5*a*c,0,2*a*c,-1*f,0,0,2*a*c,1*f,1.5*a*c,0,2*a*c,-1*f],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function vC(a,i){const{width:c=2,height:f=2}=i,g=Kl(),y=Df().flatten([g]),x=Df()(y.vertices,y.holes,y.dimensions),w=g.map(T=>[T[0]*c*a,T[1]*f]).flat();return{vertices:[...w,...w],dimensions:2,indices:x.map(T=>T+g.length),outLineIndices:x,normals:[...g.map(T=>[T[1]*f,T[0]*c*a,1]).flat(),...new Array(g.length*3).fill(0)]}}function mC(a,i=0,c){const f=typeof c.source=="object"?c.source.type:c.source,g=typeof c.target=="object"?c.target.type:c.target,{width:y=f?c2[f]:0}=typeof c.source=="object"?c.source:{},{width:x=g?c2[g]:0}=typeof c.target=="object"?c.target:{};return{vertices:[0,Eo,1*y,...a,1,Eo,-1*x,...a,1,-Eo,-1*x,...a,0,-Eo,1*y,...a,0,Eo,1*y,...a,1,Eo,-1*x,...a,1,-Eo,-1*x,...a,0,-Eo,1*y,...a],outLineIndices:[0,1,2,0,2,3].map(w=>w+i),indices:[4,5,6,4,6,7].map(w=>w+i),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function u2(a,i){const c=typeof a=="object"?a.type:a,f=i==="source"?1:-1,g=typeof a=="object"?a:{};switch(c){case"circle":return vC(f,g);case"triangle":return hC(f,g);case"diamond":return pC(f,g);case"rect":return l2(f,g);case"classic":return gC(f,g);case"halfTriangle":return dC(f,g);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function vs(a){const i=a.coordinates.flat(),c=1,f=1;return{vertices:[1,0,0,...i,1,2,-3,...i,1,1,-3,...i,0,1,0,...i,0,0,0,...i,1,0,0,...i,1,2,-3,...i,1,1,-3,...i,0,1,0,...i,0,0,0,...i],normals:[-c,2*f,1,2*f,-f,1,f,-f,1,f,-f,1,-c,-f,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function Qs(a,i){return i?wv(a,i):vs(a)}function wv(a,i){const c=a.coordinates.flat(),{target:f="classic",source:g="circle"}=i,y=Av(u2(g,"source"),c,0,0),x=mC(c,y.vertices.length/7,i),w=Av(u2(f,"target"),c,1,y.vertices.length/7+x.vertices.length/7);return{vertices:[...y.vertices,...x.vertices,...w.vertices],indices:[...y.outLineIndices,...x.outLineIndices,...w.outLineIndices,...y.indices,...x.indices,...w.indices],normals:[...y.normals,...x.normals,...w.normals],size:7}}function Av(a,i,c=1,f=0){const g=[],{vertices:y,indices:x,dimensions:w,outLineIndices:T}=a;for(let P=0;P<y.length;P+=w)g.push(c,y[P+1],y[P],...i);return(0,nn.Z)((0,nn.Z)({},a),{},{vertices:g,indices:x.map(P=>P+f),outLineIndices:T.map(P=>P+f)})}const yC=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,bC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {
  vec2 data = project_pixel(offsets);

  return vec2(data.x, -data.y);
}

vec2 line_dir(vec2 target, vec2 source) {
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}


void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source_world = a_Instance.rg; // \u8D77\u70B9
  vec2 target_world = a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target_world, source_world);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);

  vec2 position = mix(source_world, target_world, a_Position.x);
  vec2 position64Low = mix(a_Instance64Low.rg, a_Instance64Low.ba, a_Position.x);

  float lengthCommon = length(
    project_position(vec4(target_world, 0, 1)) - project_position(vec4(source_world, 0, 1))
  );
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(
    offsetDistances,
    project_pixel(-lengthCommon * 0.2),
    project_pixel(lengthCommon * 0.2)
  );

  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon * 0.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon * 0.2),
    a_Position.x
  );

  vec2 normalsCommon = u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y));

  float gapCommon = -1. * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
      perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0), position64Low);

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));

  setPickingColor(a_PickingColor);
}
`;class _C extends Kr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,NORMAL:12})}getCommonUniformsInfo(){const{gapWidth:i=2,strokeWidth:c=1,strokeOpacity:f=1}=this.layer.getLayerConfig(),g={u_gap_width:i,u_stroke_width:c,u_stroke_opacity:f};return this.getUniformsBufferInfo(g)}initModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){return[yield i.layer.buildLayerModel({moduleName:"flow_line",vertexShader:bC,fragmentShader:yC,defines:i.getDefines(),inject:i.getInject(),triangulation:Qs,styleOption:i.layer.getLayerConfig().symbol,primitive:q.TRIANGLES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const{size:c=1}=i;return Array.isArray(c)?[c[0],c[1]]:[c,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Dn.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:4,update:(i,c,f)=>[f[3],f[4],f[5],f[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Dn.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:4,update:(i,c,f)=>[Ii(f[3]),Ii(f[4]),Ii(f[5]),Ii(f[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:3,update:(i,c,f,g,y)=>y}})}}const f2=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_dash_array;
in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_line_data;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) {
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,xC=`#define LineTypeSolid (0.0)
#define LineTypeDash (1.0)
#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps(float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.0);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(mix(source, target, segmentRatio), sqrt(max(0.0, vertex_height)));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}
float getAngularDist(vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) * sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate(vec2 source, vec2 target, float angularDist, float t) {
  if (abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));

}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if (u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    total_Distance = total_Distance * 16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if (u_animate.x == Animate) {
    v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;

  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0), a_Instance64Low.xy);
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0), a_Instance64Low.zw);

  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if (LineTexture == u_line_texture) {
    float d_arcDistrance = length(source - target);
    d_arcDistrance = project_pixel(d_arcDistrance);

    float d_pixelLen = project_pixel(u_icon_step) / 8.0;
    v_line_data.b = floor(d_arcDistrance / d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,SC={solid:0,dash:1};class d2 extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0),(0,dt.Z)(this,"updateTexture",()=>{const{createTexture2D:c}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=c({data:this.iconService.getCanvas(),mag:q.NEAREST,min:q.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:c,textureBlend:f="normal",lineType:g="solid",dashArray:y=[10,5],lineTexture:x=!1,iconStep:w=100,segmentNumber:T=30}=this.layer.getLayerConfig(),{animateOption:P}=this.layer.getLayerConfig();if(y.length===2&&y.push(0,0),this.rendererService.getDirty()){var B;(B=this.texture)===null||B===void 0||B.bind()}let U=0,G=[0,0,0,0],mt=[0,0,0,0];i&&c&&(G=Ur(i),mt=Ur(c),U=1);let Nt=this.layer.getLayerAnimateTime();isNaN(Nt)&&(Nt=0);const Qt={u_animate:this.animateOption2Array(P),u_dash_array:y,u_sourceColor:G,u_targetColor:mt,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:T,u_line_type:SC[g]||0,u_icon_step:w,u_line_texture:x?1:0,u_textureBlend:f==="normal"?0:1,u_time:Nt,u_linearColor:U};return this.getUniformsBufferInfo(Qt)}initModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),i.updateTexture(),i.iconService.on("imageUpdate",i.updateTexture),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var i=this;return(0,an.Z)(function*(){const{segmentNumber:c=30}=i.layer.getLayerConfig();return[yield i.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:xC,fragmentShader:f2,triangulation:Jl,styleOption:{segmentNumber:c},defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=1}=i;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Dn.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:4,update:(i,c,f)=>[f[3],f[4],f[5],f[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:Dn.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:4,update:(i,c,f)=>[Ii(f[3]),Ii(f[4]),Ii(f[5]),Ii(f[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const c=this.iconService.getIconMap(),{texture:f}=i,{x:g,y}=c[f]||{x:0,y:0};return[g,y]}}})}}let h2=function(a){return a[a.solid=0]="solid",a[a.dash=1]="dash",a}({}),Tv=function(a){return a.VERTICAL="vertical",a.HORIZONTAL="horizontal",a}({}),Cv=function(a){return a.NORMAL="normal",a.REPLACE="replace",a}({}),Mv=function(a){return a[a.pixel=0]="pixel",a[a.meter=1]="meter",a}({}),i7=function(a){return a.ALWAYS="always",a.DRAGEND="dragend",a}({});const OC=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,EC=`#define Animate (0.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_INDEX) in vec3 a_DistanceAndIndexAndMiter;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec4 a_Normal_Total_Distance;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * a_Normal;

  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0; // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth / linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    h *= mapboxZoomScale;
    h += u_raisingHeight * mapboxZoomScale;
    if (u_heightfixed > 0.0) {
      lineHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(
    vec4(project_pos.xy + offset, lineHeight + h, 1.0)
  );

  setPickingColor(a_PickingColor);
}
`;class p2 extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"textureEventFlag",!1),(0,dt.Z)(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,dt.Z)(this,"updateTexture",()=>{const{createTexture2D:c}=this.rendererService;if(this.textures.length===0&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=c({data:this.iconService.getCanvas(),mag:q.NEAREST,min:q.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,DISTANCE_INDEX:10,NORMAL:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:c,textureBlend:f="normal",lineType:g="solid",dashArray:y=[10,5,0,0],lineTexture:x=!1,iconStep:w=100,vertexHeightScale:T=20,strokeWidth:P=0,raisingHeight:B=0,heightfixed:U=!1,linearDir:G=Tv.VERTICAL,blur:mt=[1,1,1,0]}=this.layer.getLayerConfig();let Nt=y;if(g!=="dash"&&(Nt=[0,0,0,0]),Nt.length===2&&Nt.push(0,0),this.rendererService.getDirty()&&this.texture){var Qt;(Qt=this.texture)===null||Qt===void 0||Qt.bind()}const{animateOption:ye}=this.layer.getLayerConfig();let Fe=0,ze=[0,0,0,0],Ve=[0,0,0,0];i&&c&&(ze=Ur(i),Ve=Ur(c),Fe=1);const tn={u_animate:this.animateOption2Array(ye),u_dash_array:Nt,u_blur:mt,u_sourceColor:ze,u_targetColor:Ve,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:w,u_heightfixed:Number(U),u_vertexScale:T,u_raisingHeight:Number(B),u_strokeWidth:P,u_textureBlend:f===Cv.NORMAL?0:1,u_line_texture:x?1:0,u_linearDir:G===Tv.VERTICAL?1:0,u_linearColor:Fe,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(tn)}initModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),i.textureEventFlag||(i.textureEventFlag=!0,i.updateTexture(),i.iconService.on("imageUpdate",i.updateTexture)),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var i=this;return(0,an.Z)(function*(){const{depth:c=!1}=i.layer.getLayerConfig(),{frag:f,vert:g,type:y}=i.getShaders();return i.layer.triangulation=Ev,[yield i.layer.buildLayerModel({moduleName:"line"+y,vertexShader:g,fragmentShader:f,triangulation:Ev,defines:i.getDefines(),inject:i.getInject(),depth:{enable:c}})]})()}getShaders(){return{frag:OC,vert:EC,type:""}}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Dn.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:this.attributeLocation.DISTANCE_INDEX,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:3,update:(i,c,f,g,y,x)=>x===void 0?[f[3],10,f[4]]:[f[3],x,f[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const{size:c=1}=i;return Array.isArray(c)?[c[0],c[1]]:[c,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:Dn.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:4,update:(i,c,f,g,y)=>[...y,f[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const c=this.iconService.getIconMap(),{texture:f}=i,{x:g,y}=c[f]||{x:0,y:0};return[g,y]}}})}}const wC=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,AC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color;
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  float lineHeight = a_SizeDistanceAndTotalDistance.y;
  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    h *= 2.0 / pow(2.0, 20.0 - u_Zoom);
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
  gl_PointSize = 10.0;

}
`;class g2 extends Kr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:c,lineType:f="solid",dashArray:g=[10,5,0,0],vertexHeightScale:y=20}=this.layer.getLayerConfig();let x=g;f!=="dash"&&(x=[0,0,0,0]),x.length===2&&x.push(0,0);let w=0,T=[0,0,0,0],P=[0,0,0,0];i&&c&&(T=Ur(i),P=Ur(c),w=1);const B={u_sourceColor:T,u_targetColor:P,u_dash_array:x,u_vertexScale:y,u_linearColor:w};return this.getUniformsBufferInfo(B)}initModels(){var i=this;return(0,an.Z)(function*(){return i.buildModels()})()}getShaders(){return{frag:wC,vert:AC,type:"lineSimpleNormal"}}buildModels(){var i=this;return(0,an.Z)(function*(){i.initUniformsBuffer();const{frag:c,vert:f,type:g}=i.getShaders();return[yield i.layer.buildLayerModel({moduleName:g,vertexShader:f,fragmentShader:c,triangulation:QT,defines:i.getDefines(),inject:i.getInject(),primitive:q.LINES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:Dn.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:4,update:(i,c,f)=>{const{size:g=1}=i,y=Array.isArray(g)?[g[0],g[1]]:[g,0];return[y[0],y[1],f[3],f[5]]}}})}}const TC=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};


in vec2 v_iconMapUV;
in vec4 v_color;
in float v_blur;
in vec4 v_dataset;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }


  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,CC=`#define Animate 0.0
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_MITER_TOTAL) in vec3 a_Distance_Total_Miter;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out vec4 v_dataset;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float a_Distance = a_Distance_Total_Miter.x;
  float a_Miter = a_Distance_Total_Miter.y;
  float a_Total_Distance = a_Distance_Total_Miter.z;

  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if (u_heightfixed < 1.0) {
    // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }

  if (u_animate.x == Animate || u_linearColor == 1.0) {
    d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0) / 2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance; // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen; // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float originSize = a_Size.x; // \u56FA\u5B9A\u9AD8\u5EA6
  if (u_heightfixed < 1.0) {
    originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    if (u_heightfixed > 0.0) {
      wallHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class MC extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0),(0,dt.Z)(this,"updateTexture",()=>{const{createTexture2D:c}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=c({data:this.iconService.getCanvas(),mag:q.NEAREST,min:q.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:12,UV:13,DISTANCE_MITER_TOTAL:15})}getCommonUniformsInfo(){const{sourceColor:i,targetColor:c,textureBlend:f="normal",heightfixed:g=!1,lineTexture:y=!1,iconStep:x=100,iconStepCount:w=1}=this.layer.getLayerConfig(),{animateOption:T}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var P;(P=this.texture)===null||P===void 0||P.bind()}let B=0,U=[0,0,0,0],G=[0,0,0,0];i&&c&&(U=Ur(i),G=Ur(c),B=1);const mt={u_animate:this.animateOption2Array(T),u_sourceColor:U,u_targetColor:G,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:x,u_heightfixed:Number(g),u_linearColor:B,u_line_texture:y?1:0,u_textureBlend:f==="normal"?0:1,u_iconStepCount:w,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(mt)}initModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),i.updateTexture(),i.iconService.on("imageUpdate",i.updateTexture),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var i=this;return(0,an.Z)(function*(){return[yield i.layer.buildLayerModel({moduleName:"lineWall",vertexShader:CC,fragmentShader:TC,triangulation:Ev,defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1},blend:i.getBlend()})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const{size:c=1}=i;return Array.isArray(c)?[c[0],c[1]]:[c,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:3,update:(i,c,f,g,y)=>y}}),this.styleAttributeService.registerStyleAttribute({name:"distanceAndTotalAndMiter",type:Dn.Attribute,descriptor:{name:"a_Distance_Total_Miter",shaderLocation:this.attributeLocation.DISTANCE_MITER_TOTAL,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:3,update:(i,c,f)=>[f[3],f[4],f[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const c=this.iconService.getIconMap(),{texture:f}=i,{x:g,y}=c[f]||{x:0,y:0};return[g,y]}}})}}var v2={arc:cC,arc3d:s2,greatcircle:d2,wall:MC,line:p2,simple:g2,flowline:_C,earthArc3d:s2};class Zf extends ql{constructor(...i){super(...i),(0,dt.Z)(this,"type","LineLayer"),(0,dt.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,dt.Z)(this,"arrowInsertCount",0),(0,dt.Z)(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}})}buildModels(){var i=this;return(0,an.Z)(function*(){const c=i.getModelType();i.layerModel=new v2[c](i),yield i.initLayerModels()})()}getDefaultConfig(){const i=this.getModelType();return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}}[i]}getModelType(){var i;if(this.layerType)return this.layerType;const c=this.styleAttributeService.getLayerStyleAttribute("shape");return(c==null||(i=c.scale)===null||i===void 0?void 0:i.field)||"line"}processData(i){if(this.getModelType()!=="simple")return i;const c=[];return i.map(f=>{if(Array.isArray(f.coordinates)&&Array.isArray(f.coordinates[0])&&Array.isArray(f.coordinates[0][0])){const g=(0,nn.Z)({},f);f.coordinates.map(y=>{c.push((0,nn.Z)((0,nn.Z)({},g),{},{coordinates:y}))})}else c.push(f)}),c}}const LC=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,PC=`#define pi (3.1415926535)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec4 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if (x > 0.0 && z > 0.0) {
    return atan(x / z);
  } else if (x > 0.0 && z <= 0.0) {
    return atan(-z / x) + pi / 2.0;
  } else if (x <= 0.0 && z <= 0.0) {
    return pi + atan(x / z); //atan(x/z) +
  } else {
    return atan(z / -x) + pi * 3.0 / 2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y / r);
}

void main() {
  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if (u_heightfixed < 1.0) {
    // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
  } else {
    // \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      offset *= 4.0 / pow(2.0, 21.0 - u_Zoom);
    }
  }

  vec2 positions = a_Extrude.xy;
  vec2 positions64Low = a_Extrude.zw;
  vec4 project_pos = project_position(vec4(positions, 0.0, 1.0), positions64Low);

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if (u_lightEnable > 0.0) {
    // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if (u_linearColor == 1.0) {
    // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a = v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

  if (u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? 1.0 - a_Position.z : a_Position.z;
  }

  gl_Position = project_common_position_to_clipspace(pos);

  setPickingColor(a_PickingColor);
}
`;class m2 extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"raiseCount",0),(0,dt.Z)(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:i={enable:!1,speed:.01,repeat:!1},sourceColor:c,targetColor:f,pickLight:g=!1,heightfixed:y=!1,opacityLinear:x={enable:!1,dir:"up"},lightEnable:w=!0}=this.layer.getLayerConfig();let T=0,P=[0,0,0,0],B=[0,0,0,0];if(c&&f&&(P=Ur(c),B=Ur(f),T=1),this.raiseCount<1&&this.raiseRepeat>0&&i.enable){const{speed:mt=.01}=i;this.raiseCount+=mt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const U={u_pickLight:Number(g),u_heightfixed:Number(y),u_r:i.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:T,u_sourceColor:P,u_targetColor:B,u_opacitylinear:Number(x.enable),u_opacitylinear_dir:x.dir==="up"?1:0,u_lightEnable:Number(w)};return this.getUniformsBufferInfo(U)}initModels(){var i=this;return(0,an.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){const{depth:c=!0,animateOption:{repeat:f=1}}=i.layer.getLayerConfig();return i.raiseRepeat=f,i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:PC,fragmentShader:LC,triangulation:e2,defines:i.getDefines(),inject:i.getInject(),cull:{enable:!0,face:q.FRONT},depth:{enable:c}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:3,update:i=>{const{size:c}=i;if(c){let f=[];return Array.isArray(c)&&(f=c.length===2?[c[0],c[0],c[1]]:c),Array.isArray(c)||(f=[c,c,c]),f}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:3,update:(i,c,f,g,y)=>y}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Dn.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:4,update:i=>{const c=dc(i.coordinates);return[c[0],c[1],Ii(c[0]),Ii(c[1])]}}})}}const IC=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,y2=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class Hf extends Kr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:i=1,strokeWidth:c=0,blend:f,blur:g=0,raisingHeight:y=0,heightfixed:x=!1,unit:w="pixel"}=this.layer.getLayerConfig();let T=this.getAnimateUniforms().u_time;isNaN(T)&&(T=-1);const P={u_blur_height_fixed:[g,Number(y),Number(x)],u_stroke_width:c,u_additive:f==="additive"?1:0,u_stroke_opacity:i,u_size_unit:Mv[w],u_time:T,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(P)}getAnimateUniforms(){const{animateOption:i={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(i),u_time:this.layer.getLayerAnimateTime()}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Yc)}initModels(){var i=this;return(0,an.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){const{frag:c,vert:f,type:g}=i.getShaders();return i.layer.triangulation=Yc,i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:g,vertexShader:f,fragmentShader:c,defines:i.getDefines(),inject:i.getInject(),triangulation:Yc,depth:{enable:!1}})]})()}getShaders(){return{frag:IC,vert:y2,type:"pointFill"}}animateOption2Array(i){return[i.enable?0:1,i.speed||1,i.rings||3,0]}registerBuiltinAttributes(){const i=this.layer.getLayerConfig().shape2d;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Dn.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:3,update:(c,f,g,y)=>{const x=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],w=y%4*3;return[x[w],x[w+1],x[w+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:c=>{const{size:f=5}=c;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Dn.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:c=>{const{shape:f=2}=c;return[i.indexOf(f)]}}})}}const b2=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,_2=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if (u_heightfixed < 1.0) {
    // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;class kC extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0),(0,dt.Z)(this,"updateTexture",()=>{const{createTexture2D:c}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers()});return}this.texture=c({data:this.iconService.getCanvas(),mag:q.LINEAR,min:q.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,UV:10})}getUninforms(){if(this.rendererService.getDirty()){var i;(i=this.texture)===null||i===void 0||i.bind()}const c=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,nn.Z)((0,nn.Z)({},c.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:i=0,heightfixed:c=!1}=this.layer.getLayerConfig(),f={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(i),u_heightfixed:Number(c),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(f)}initModels(){var i=this;return(0,an.Z)(function*(){return i.iconService.on("imageUpdate",i.updateTexture),i.updateTexture(),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointImage",vertexShader:_2,fragmentShader:b2,triangulation:n2,defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1},primitive:q.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=5}=i;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const c=this.iconService.getIconMap(),{shape:f}=i,{x:g,y}=c[f]||{x:-64,y:-64};return[g,y]}}})}}const x2=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,S2=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(project_pos);

  gl_PointSize = a_Size * u_size_scale * 2.0 * u_DevicePixelRatio;
}
`;function Bo(a){const i=a.coordinates;return{vertices:[...i],indices:[0],size:i.length}}class Lv extends Kr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const i={u_size_scale:.5};return this.getUniformsBufferInfo(i)}initModels(){var i=this;return(0,an.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.layer.triangulation=Bo,i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:S2,fragmentShader:x2,triangulation:Bo,defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1},primitive:q.POINTS,pick:!1})]})()}clearModels(){}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=1}=i;return Array.isArray(c)?[c[0]]:[c]}}})}}class RC{constructor(i,c,f){(0,dt.Z)(this,"boxCells",[]),(0,dt.Z)(this,"xCellCount",void 0),(0,dt.Z)(this,"yCellCount",void 0),(0,dt.Z)(this,"boxKeys",void 0),(0,dt.Z)(this,"bboxes",void 0),(0,dt.Z)(this,"width",void 0),(0,dt.Z)(this,"height",void 0),(0,dt.Z)(this,"xScale",void 0),(0,dt.Z)(this,"yScale",void 0),(0,dt.Z)(this,"boxUid",void 0);const g=this.boxCells;this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(c/f);for(let y=0;y<this.xCellCount*this.yCellCount;y++)g.push([]);this.boxKeys=[],this.bboxes=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0}insert(i,c,f,g,y){this.forEachCell(c,f,g,y,this.insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(y)}query(i,c,f,g,y){return this.queryHitTest(i,c,f,g,!1,y)}hitTest(i,c,f,g,y){return this.queryHitTest(i,c,f,g,!0,y)}insertBoxCell(i,c,f,g,y,x){this.boxCells[y].push(x)}queryHitTest(i,c,f,g,y,x){if(f<0||i>this.width||g<0||c>this.height)return y?!1:[];const w=[];if(i<=0&&c<=0&&this.width<=f&&this.height<=g){if(y)return!0;for(let P=0;P<this.boxKeys.length;P++)w.push({key:this.boxKeys[P],x1:this.bboxes[P*4],y1:this.bboxes[P*4+1],x2:this.bboxes[P*4+2],y2:this.bboxes[P*4+3]});return x?w.filter(x):w}const T={hitTest:y,seenUids:{box:{},circle:{}}};return this.forEachCell(i,c,f,g,this.queryCell,w,T,x),y?w.length>0:w}queryCell(i,c,f,g,y,x,w,T){const P=w.seenUids,B=this.boxCells[y];if(B!==null){const U=this.bboxes;for(const G of B)if(!P.box[G]){P.box[G]=!0;const mt=G*4;if(i<=U[mt+2]&&c<=U[mt+3]&&f>=U[mt+0]&&g>=U[mt+1]&&(!T||T(this.boxKeys[G]))){if(w.hitTest)return x.push(!0),!0;x.push({key:this.boxKeys[G],x1:U[mt],y1:U[mt+1],x2:U[mt+2],y2:U[mt+3]})}}}return!1}forEachCell(i,c,f,g,y,x,w,T){const P=this.convertToXCellCoord(i),B=this.convertToYCellCoord(c),U=this.convertToXCellCoord(f),G=this.convertToYCellCoord(g);for(let mt=P;mt<=U;mt++)for(let Nt=B;Nt<=G;Nt++){const Qt=this.xCellCount*Nt+mt;if(y.call(this,i,c,f,g,Qt,x,w,T))return}}convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}}var DC=RC;class NC{constructor(i,c){(0,dt.Z)(this,"width",void 0),(0,dt.Z)(this,"height",void 0),(0,dt.Z)(this,"grid",void 0),(0,dt.Z)(this,"viewportPadding",100),(0,dt.Z)(this,"screenRightBoundary",void 0),(0,dt.Z)(this,"screenBottomBoundary",void 0),(0,dt.Z)(this,"gridRightBoundary",void 0),(0,dt.Z)(this,"gridBottomBoundary",void 0),this.width=i,this.height=c,this.viewportPadding=Math.max(i,c),this.grid=new DC(i+this.viewportPadding,c+this.viewportPadding,25),this.screenRightBoundary=i+this.viewportPadding,this.screenBottomBoundary=c+this.viewportPadding,this.gridRightBoundary=i+2*this.viewportPadding,this.gridBottomBoundary=c+2*this.viewportPadding}placeCollisionBox(i){const c=i.x1+i.anchorPointX+this.viewportPadding,f=i.y1+i.anchorPointY+this.viewportPadding,g=i.x2+i.anchorPointX+this.viewportPadding,y=i.y2+i.anchorPointY+this.viewportPadding;return!this.isInsideGrid(c,f,g,y)||this.grid.hitTest(c,f,g,y)?{box:[]}:{box:[c,f,g,y]}}insertCollisionBox(i,c){const f={featureIndex:c};this.grid.insert(f,i[0],i[1],i[2],i[3])}project(i,c,f){const g=_c.al(c,f,0,1),y=_c.Ue(),x=Mr.fromValues(...i);return _c.fF(y,g,x),{x:(y[0]/y[3]+1)/2*this.width+this.viewportPadding,y:(-y[1]/y[3]+1)/2*this.height+this.viewportPadding}}isInsideGrid(i,c,f,g){return f>=0&&i<this.gridRightBoundary&&g>=0&&c<this.gridBottomBoundary}}function O2(a){let i=.5,c=.5;switch(a){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0;break;default:i=.5}switch(a){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0;break;default:c=.5}return{horizontalAlign:i,verticalAlign:c}}function E2(a,i,c,f,g){if(!g)return;const y=a[f],x=y.glyph;if(x){const w=i[x].advance*y.scale,T=(a[f].x+w)*g;for(let P=c;P<=f;P++)a[P].x-=T}}function w2(a,i,c,f,g,y,x){const w=(i-c)*g,T=(-f*x+.5)*y;for(const P of a)P.x+=w,P.y+=T}function A2(a,i,c,f,g,y,x){let T=0,P=-8,B=0;const U=a.positionedGlyphs,G=y==="right"?1:y==="left"?0:.5,mt=U.length;c.forEach(Fe=>{if(Fe.split("").forEach(ze=>{const Ve=i[ze];Ve&&(U.push({glyph:ze,x:T,y:P+0,vertical:!1,scale:1,metrics:Ve}),T+=Ve.advance+x)}),U.length!==mt){const ze=T-x;B=Math.max(ze,B),E2(U,i,mt,U.length-1,G)}T=0,P-=f+5});const{horizontalAlign:Nt,verticalAlign:Qt}=O2(g);w2(U,G,Nt,Qt,B,f,c.length);const ye=P- -8;a.top+=-Qt*ye,a.bottom=a.top-ye,a.left+=-Nt*B,a.right=a.left+B}function FC(a,i,c,f,g,y,x){let T=0,P=-8,B=0;const U=a.positionedGlyphs,G=y==="right"?1:y==="left"?0:.5,mt=U.length;c.forEach(Fe=>{const ze=i[Fe];if(ze&&(U.push({glyph:Fe,x:ze.advance/2,y:P+0,vertical:!1,scale:1,metrics:ze}),T+=ze.advance+x),U.length!==mt){const tn=T-x;B=Math.max(tn,B),E2(U,i,mt,U.length-1,G)}T=0,P-=f+5});const{horizontalAlign:Nt,verticalAlign:Qt}=O2(g);w2(U,G,Nt,Qt,B,f,c.length);const ye=P- -8;a.top+=-Qt*ye,a.bottom=a.top-ye,a.left+=-Nt*B,a.right=a.left+B}function T2(a,i,c,f,g,y,x=[0,0],w){const T=a.split(`
`),P=[],B={positionedGlyphs:P,top:x[1],bottom:x[1],left:x[0],right:x[0],lineCount:T.length,text:a};return w?FC(B,i,T,c,f,g,y):A2(B,i,T,c,f,g,y),P.length?B:!1}function BC(a,i=[0,0],c){const{positionedGlyphs:f=[]}=a,g=[];for(const y of f){const x=y.metrics,w=4,T=x.advance*y.scale/2,P=c?[y.x+T,y.y]:[0,0],B=c?[0,0]:[y.x+T+i[0],y.y+i[1]],U=(0-w)*y.scale-T+B[0],G=(0-w)*y.scale+B[1],mt=U+x.width*y.scale,Nt=G+x.height*y.scale,Qt={x:U,y:G},ye={x:mt,y:G},Fe={x:U,y:Nt},ze={x:mt,y:Nt};g.push({tl:Qt,tr:ye,bl:Fe,br:ze,tex:x,glyphOffset:P})}return g}const C2=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,jC=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_TEXT_OFFSETS) in vec2 a_textOffsets;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);

  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,{isEqual:eu}=oi;function M2(a){const i=this,c=a.id,f=[],g=[];if(!i.glyphInfoMap||!i.glyphInfoMap[c])return{vertices:[],indices:[],size:7};const y=i.glyphInfoMap[c].centroid,x=y.length===2?[y[0],y[1],0]:y;return i.glyphInfoMap[c].glyphQuads.forEach((w,T)=>{f.push(...x,w.tex.x,w.tex.y+w.tex.height,w.tl.x,w.tl.y,...x,w.tex.x+w.tex.width,w.tex.y+w.tex.height,w.tr.x,w.tr.y,...x,w.tex.x+w.tex.width,w.tex.y,w.br.x,w.br.y,...x,w.tex.x,w.tex.y,w.bl.x,w.bl.y),g.push(0+T*4,1+T*4,2+T*4,2+T*4,3+T*4,0+T*4)}),{vertices:f,indices:g,size:7}}class L2 extends Kr{constructor(...i){var c;super(...i),c=this,(0,dt.Z)(this,"glyphInfo",void 0),(0,dt.Z)(this,"glyphInfoMap",{}),(0,dt.Z)(this,"rawEncodeData",void 0),(0,dt.Z)(this,"texture",void 0),(0,dt.Z)(this,"currentZoom",-1),(0,dt.Z)(this,"extent",void 0),(0,dt.Z)(this,"textureHeight",0),(0,dt.Z)(this,"textCount",0),(0,dt.Z)(this,"preTextStyle",{}),(0,dt.Z)(this,"mapping",(0,an.Z)(function*(){c.initGlyph(),c.updateTexture(),yield c.reBuildModel()}))}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,TEXT_OFFSETS:10,UV:11})}getUninforms(){const i=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,nn.Z)((0,nn.Z)((0,nn.Z)({},i.uniformsOption),c.uniformsOption),{u_sdf_map:this.textures[0]})}getCommonUniformsInfo(){const{stroke:i="#fff",strokeWidth:c=0,halo:f=.5,gamma:g=2,raisingHeight:y=0}=this.layer.getLayerConfig(),x=this.getFontServiceMapping(),w=this.getFontServiceCanvas();x&&Object.keys(x).length!==this.textCount&&w&&(this.updateTexture(),this.textCount=Object.keys(x).length),this.preTextStyle=this.getTextStyle();const T={u_stroke_color:Ur(i),u_sdf_map_size:[(w==null?void 0:w.width)||1,(w==null?void 0:w.height)||1],u_raisingHeight:Number(y),u_stroke_width:c,u_gamma_scale:g,u_halo_blur:f};return this.getUniformsBufferInfo(T)}initModels(){var i=this;return(0,an.Z)(function*(){return i.bindEvent(),i.extent=i.textExtent(),i.rawEncodeData=i.layer.getEncodedData(),i.preTextStyle=i.getTextStyle(),i.initUniformsBuffer(),i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){const{textAllowOverlap:c=!1}=i.layer.getLayerConfig();return i.initGlyph(),i.updateTexture(),c||i.filterGlyphs(),[yield i.layer.buildLayerModel({moduleName:"pointText",vertexShader:jC,fragmentShader:C2,defines:i.getDefines(),inject:i.getInject(),triangulation:M2.bind(i),depth:{enable:!1}})]})()}needUpdate(){var i=this;return(0,an.Z)(function*(){const{textAllowOverlap:c=!1,textAnchor:f="center",textOffset:g,padding:y,fontFamily:x,fontWeight:w}=i.getTextStyle();if(!eu(y,i.preTextStyle.padding)||!eu(g,i.preTextStyle.textOffset)||!eu(f,i.preTextStyle.textAnchor)||!eu(x,i.preTextStyle.fontFamily)||!eu(w,i.preTextStyle.fontWeight))return yield i.mapping(),!0;if(c)return!1;const T=i.mapService.getZoom(),P=i.mapService.getBounds(),B=Ai(i.extent,P);return Math.abs(i.currentZoom-T)>.5||!B||c!==i.preTextStyle.textAllowOverlap?(yield i.reBuildModel(),!0):!1})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.layer.off("remapping",this.mapping)}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Dn.Attribute,descriptor:{shaderLocation:this.attributeLocation.TEXT_OFFSETS,name:"a_textOffsets",buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:2,update:(i,c,f)=>[f[5],f[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Dn.Attribute,descriptor:{name:"a_tex",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:(i,c,f)=>[f[3],f[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=12}=i;return Array.isArray(c)?[c[0]]:[c]}}})}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}textExtent(){const i=this.mapService.getBounds();return md(i,.5)}initTextFont(){const{fontWeight:i,fontFamily:c}=this.getTextStyle(),f=this.rawEncodeData,g=[];f.forEach(y=>{let{shape:x=""}=y;x=x.toString();for(const w of x)g.indexOf(w)===-1&&g.push(w)}),this.fontService.setFontOptions({characterSet:g,fontWeight:i,fontFamily:c,iconfont:!1})}initIconFontTex(){const{fontWeight:i,fontFamily:c}=this.getTextStyle(),f=this.rawEncodeData,g=[];f.forEach(y=>{let{shape:x=""}=y;x=`${x}`,g.indexOf(x)===-1&&g.push(x)}),this.fontService.setFontOptions({characterSet:g,fontWeight:i,fontFamily:c,iconfont:!0})}getTextStyle(){const{fontWeight:i="400",fontFamily:c="sans-serif",textAllowOverlap:f=!1,padding:g=[0,0],textAnchor:y="center",textOffset:x=[0,0],opacity:w=1,strokeOpacity:T=1,strokeWidth:P=0,stroke:B="#000"}=this.layer.getLayerConfig();return{fontWeight:i,fontFamily:c,textAllowOverlap:f,padding:g,textAnchor:y,textOffset:x,opacity:w,strokeOpacity:T,strokeWidth:P,stroke:B}}generateGlyphLayout(i){const c=this.getFontServiceMapping(),{spacing:f=2,textAnchor:g="center",textOffset:y}=this.layer.getLayerConfig(),x=this.rawEncodeData;this.glyphInfo=x.map(w=>{const{shape:T="",id:P,size:B=1}=w,U=w.textOffset?w.textOffset:y||[0,0],G=w.textAnchor?w.textAnchor:g||"center",mt=T2(T.toString(),c,B,G,"left",f,U,i),Nt=BC(mt,U,!1);return w.shaping=mt,w.glyphQuads=Nt,w.centroid=dc(w.coordinates),this.glyphInfoMap[P]={shaping:mt,glyphQuads:Nt,centroid:dc(w.coordinates)},w})}getFontServiceMapping(){const{fontWeight:i="400",fontFamily:c="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${c}_${i}`)}getFontServiceCanvas(){const{fontWeight:i="400",fontFamily:c="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${c}_${i}`)}filterGlyphs(){const{padding:i=[0,0],textAllowOverlap:c=!1}=this.layer.getLayerConfig();if(c)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();const{width:f,height:g}=this.rendererService.getViewportSize(),y=new NC(f,g);this.glyphInfo.filter(w=>{const{shaping:T,id:P=0}=w,B=w.centroid,G=w.size/16,mt=this.mapService.lngLatToContainer(B),{box:Nt}=y.placeCollisionBox({x1:T.left*G-i[0],x2:T.right*G+i[0],y1:T.top*G-i[1],y2:T.bottom*G+i[1],anchorPointX:mt.x,anchorPointY:mt.y});return Nt&&Nt.length?(y.insertCollisionBox(Nt,P),!0):!1}).forEach(w=>{this.glyphInfoMap[w.id]=w})}initGlyph(){const{iconfont:i=!1}=this.layer.getLayerConfig();i?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(i)}updateTexture(){const{createTexture2D:i}=this.rendererService,c=this.getFontServiceCanvas();this.textureHeight=c.height,this.texture&&this.texture.destroy(),this.texture=i({data:c,mag:q.LINEAR,min:q.LINEAR,width:c.width,height:c.height}),this.textures=[this.texture]}reBuildModel(){var i=this;return(0,an.Z)(function*(){i.filterGlyphs();const c=yield i.layer.buildLayerModel({moduleName:"pointText",vertexShader:jC,fragmentShader:C2,triangulation:M2.bind(i),defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1}});i.layer.models=[c]})()}}function Vf(a){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,an.Z)(function*(a){if(window.createImageBitmap){const i=yield fetch(a);return yield createImageBitmap(yield i.blob())}else{const i=new window.Image;return new Promise(c=>{i.onload=()=>c(i),i.src=a,i.crossOrigin="Anonymous"})}}),Xc.apply(this,arguments)}const qc=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,P2=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,zC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_texture_data = vec2(a_Position.z, lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,UC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float isSide = a_Position.z;
  float topU = a_uvs[0];
  float topV = 1.0 - a_uvs[1];
  float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

 gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,I2=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,Pv=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;

  v_texture_data = vec2(a_Position.z, lightWeight);

  if (u_heightfixed > 0.0) {
    // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class k2 extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,UV:11})}getUninforms(){const i=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,nn.Z)((0,nn.Z)({},i.uniformsOption),c.uniformsOption)}getCommonUniformsInfo(){const{mapTexture:i,heightfixed:c=!1,raisingHeight:f=0,topsurface:g=!0,sidesurface:y=!0,sourceColor:x,targetColor:w}=this.layer.getLayerConfig();let T=0,P=[1,1,1,1],B=[1,1,1,1];x&&w&&(P=Ur(x),B=Ur(w),T=1);const U={u_sourceColor:P,u_targetColor:B,u_linearColor:T,u_topsurface:Number(g),u_sidesurface:Number(y),u_heightfixed:Number(c),u_raisingHeight:Number(f)};return i&&this.texture&&(U.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(U)}initModels(){var i=this;return(0,an.Z)(function*(){return yield i.loadTexture(),i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){const{frag:c,vert:f,type:g}=i.getShaders();return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:g,vertexShader:f,fragmentShader:c,depth:{enable:!0},defines:i.getDefines(),inject:i.getInject(),triangulation:o2})]})()}getShaders(){const{pickLight:i,mapTexture:c}=this.layer.getLayerConfig();return c?{frag:I2,vert:Pv,type:"polygonExtrudeTexture"}:i?{frag:P2,vert:zC,type:"polygonExtrudePickLight"}:{frag:qc,vert:UC,type:"polygonExtrude"}}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy(),this.textures=[]}registerBuiltinAttributes(){const i=this.layer.getSource().extent,c=i[2]-i[0],f=i[3]-i[1];this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Dn.Attribute,descriptor:{name:"a_uvs",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:3,update:(g,y,x)=>{const w=x[0],T=x[1];return[(w-i[0])/c,(T-i[1])/f,x[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:3,update:(g,y,x,w,T)=>T}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:g=>{const{size:y=10}=g;return Array.isArray(y)?[y[0]]:[y]}}})}loadTexture(){var i=this;return(0,an.Z)(function*(){const{mapTexture:c}=i.layer.getLayerConfig(),{createTexture2D:f}=i.rendererService;if(i.texture=f({height:1,width:1}),c){const g=yield Vf(c);i.texture=f({data:g,width:g.width,height:g.height,wrapS:q.CLAMP_TO_EDGE,wrapT:q.CLAMP_TO_EDGE,min:q.LINEAR,mag:q.LINEAR})}})()}}const ZC=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,HC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class Js extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,EXTRUSION_BASE:11})}getUninforms(){const i=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,nn.Z)((0,nn.Z)({},i.uniformsOption),c.uniformsOption)}getCommonUniformsInfo(){const i={};return this.getUniformsBufferInfo(i)}initModels(){var i=this;return(0,an.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){const{frag:c,vert:f,type:g}=i.getShaders();return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:g,vertexShader:f,fragmentShader:c,defines:i.getDefines(),inject:i.getInject(),triangulation:o2,depth:{enable:!0}})]})()}getShaders(){return{frag:ZC,vert:HC,type:"polygonExtrude"}}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:3,update:(i,c,f,g,y)=>y}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=10}=i;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrusionBase",type:Dn.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:this.attributeLocation.EXTRUSION_BASE,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{extrusionBase:c=0}=i;return[c]}}})}}const ms=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,qh=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,VC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_LINEAR) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}
`,WC=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  project_pos.z += u_raisingHeight;

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;class GC extends Kr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,LINEAR:9})}getUninforms(){const i=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,nn.Z)((0,nn.Z)({},i.uniformsOption),c.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:i=0,opacityLinear:c={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),f={u_raisingHeight:Number(i),u_opacitylinear:Number(c.enable),u_dir:c.dir==="in"?1:0};return this.getUniformsBufferInfo(f)}initModels(){var i=this;return(0,an.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){const{frag:c,vert:f,triangulation:g,type:y}=i.getModelParams();return i.initUniformsBuffer(),i.layer.triangulation=g,[yield i.layer.buildLayerModel({moduleName:y,vertexShader:f,fragmentShader:c,defines:i.getDefines(),inject:i.getInject(),triangulation:g,primitive:q.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute();const{opacityLinear:i={enable:!1,dir:"in"}}=this.layer.getLayerConfig();i.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Dn.Attribute,descriptor:{name:"a_linear",shaderLocation:this.attributeLocation.LINEAR,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:3,update:(c,f,g)=>[g[3],g[4],g[5]]}})}getModelParams(){const{opacityLinear:i={enable:!1}}=this.layer.getLayerConfig();return i.enable?{frag:qh,vert:VC,type:"polygonLinear",triangulation:eC}:{frag:ms,vert:WC,type:"polygonFill",triangulation:zf}}}const R2=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,tc=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class Iv extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture1",void 0),(0,dt.Z)(this,"texture2",void 0),(0,dt.Z)(this,"texture3",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const i=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,nn.Z)((0,nn.Z)({},i.uniformsOption),c.uniformsOption)}getCommonUniformsInfo(){const{watercolor:i="#6D99A8",watercolor2:c="#0F121C"}=this.layer.getLayerConfig(),f={u_watercolor:Ur(i),u_watercolor2:Ur(c),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(f)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var i=this;return(0,an.Z)(function*(){return i.loadTexture(),i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:tc,fragmentShader:R2,defines:i.getDefines(),inject:i.getInject(),triangulation:zf,primitive:q.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var i,c,f;(i=this.texture1)===null||i===void 0||i.destroy(),(c=this.texture2)===null||c===void 0||c.destroy(),(f=this.texture3)===null||f===void 0||f.destroy()}registerBuiltinAttributes(){const i=this.layer.getSource().extent,[c,f,g,y]=i,x=g-c,w=y-f;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Dn.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:2,update:(T,P,B)=>{const[U,G]=B;return[(U-c)/x,(G-f)/w]}}})}loadTexture(){const{createTexture2D:i}=this.rendererService,c={height:0,width:0};this.texture1=i(c),this.texture2=i(c),this.texture3=i(c),f(y=>{this.texture1=g(y[0]),this.texture2=g(y[1]),this.texture3=g(y[2]),this.layerService.reRender()});function f(y){let x=0;const w=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(P=>{const B=new Image;B.crossOrigin="",B.src=P,w.push(B),B.onload=()=>{x++,x===3&&y(w)}})}function g(y){return i({data:y,width:y.width,height:y.height,wrapS:q.MIRRORED_REPEAT,wrapT:q.MIRRORED_REPEAT,min:q.LINEAR,mag:q.LINEAR})}}}const kv=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,$C=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class YC extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const i=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,nn.Z)((0,nn.Z)({},i.uniformsOption),c.uniformsOption)}getCommonUniformsInfo(){const{speed:i=.5}=this.layer.getLayerConfig(),c={u_speed:i,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(c)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var i=this;return(0,an.Z)(function*(){return i.loadTexture(),i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:$C,fragmentShader:kv,triangulation:zf,defines:i.getDefines(),inject:i.getInject(),primitive:q.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1})]})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy()}registerBuiltinAttributes(){const i=this.layer.getSource().extent,[c,f,g,y]=i,x=g-c,w=y-f;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Dn.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:2,update:(T,P,B)=>{const[U,G]=B;return[(U-c)/x,(G-f)/w]}}})}loadTexture(){const{waterTexture:i}=this.layer.getLayerConfig(),{createTexture2D:c}=this.rendererService;this.texture=c({height:1,width:1});const f=new Image;f.crossOrigin="",i?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),f.src=i):f.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",f.onload=()=>{this.texture=c({data:f,width:f.width,height:f.height,wrapS:q.MIRRORED_REPEAT,wrapT:q.MIRRORED_REPEAT,min:q.LINEAR,mag:q.LINEAR}),this.layerService.reRender()}}}var N2={fill:GC,line:p2,extrude:k2,text:L2,point_fill:Hf,point_image:kC,point_normal:Lv,point_extrude:m2,water:YC,ocean:Iv,extrusion:Js};class Kh extends ql{constructor(...i){super(...i),(0,dt.Z)(this,"type","PolygonLayer"),(0,dt.Z)(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"])}buildModels(){var i=this;return(0,an.Z)(function*(){const c=i.getModelType();i.layerModel=new N2[c](i),yield i.initLayerModels()})()}getModelType(){var i;const c=this.styleAttributeService.getLayerStyleAttribute("shape"),f=c==null||(i=c.scale)===null||i===void 0?void 0:i.field;return f==="fill"||!f?"fill":f==="extrude"?"extrude":f==="extrusion"?"extrusion":f==="water"?"water":f==="ocean"?"ocean":f==="line"?"line":this.getPointModelType()}getPointModelType(){const i=this.getEncodedData(),{shape2d:c,shape3d:f}=this.getLayerConfig(),g=this.iconService.getIconMap(),y=i.find(x=>x.hasOwnProperty("shape"));if(y){const x=y.shape;return x==="dot"?"point_normal":(c==null?void 0:c.indexOf(x))!==-1?"point_fill":(f==null?void 0:f.indexOf(x))!==-1?"point_extrude":g.hasOwnProperty(x)?"point_image":"text"}else return"fill"}}class XC{constructor({rendererService:i,layerService:c,parent:f}){(0,dt.Z)(this,"tileResource",new Map),(0,dt.Z)(this,"rendererService",void 0),(0,dt.Z)(this,"layerService",void 0),(0,dt.Z)(this,"parent",void 0),(0,dt.Z)(this,"layerTiles",[]),this.rendererService=i,this.layerService=c,this.parent=f}get tiles(){return this.layerTiles}hasTile(i){return this.layerTiles.some(c=>c.key===i)}addTile(i){this.layerTiles.push(i)}getTile(i){return this.layerTiles.find(c=>c.key===i)}getVisibleTileBylngLat(i){return this.layerTiles.find(c=>c.isLoaded&&c.visible&&c.lnglatInBounds(i))}removeTile(i){const c=this.layerTiles.findIndex(g=>g.key===i),f=this.layerTiles.splice(c,1);f[0]&&f[0].destroy()}updateTileVisible(i){const c=this.getTile(i.key);if(i.isVisible)if(i.parent){const f=this.isChildrenLoaded(i.parent);c==null||c.updateVisible(f)}else c==null||c.updateVisible(!0);else if(i.parent){const f=this.isChildrenLoaded(i.parent);c==null||c.updateVisible(!f)}else c==null||c.updateVisible(!1)}isParentLoaded(i){const c=i.parent;if(!c)return!0;const f=this.getTile(c==null?void 0:c.key);return!!(f!=null&&f.isLoaded)}isChildrenLoaded(i){const c=i==null?void 0:i.children;return c.length===0?!0:c.every(f=>{const g=this.getTile(f==null?void 0:f.key);return g?(g==null?void 0:g.isLoaded)===!0:!0})}render(){var i=this;return(0,an.Z)(function*(){const f=i.getRenderLayers().map(function(){var g=(0,an.Z)(function*(y){yield i.layerService.renderTileLayer(y)});return function(y){return g.apply(this,arguments)}}());yield Promise.all(f)})()}getRenderLayers(){const i=this.layerTiles.filter(f=>f.visible&&f.isLoaded),c=[];return i.map(f=>c.push(...f.getLayers())),c}getLayers(){const i=this.layerTiles.filter(f=>f.isLoaded),c=[];return i.map(f=>c.push(...f.getLayers())),c}getTiles(){return this.layerTiles}destroy(){this.layerTiles.forEach(i=>i.destroy()),this.tileResource.clear()}}var qC=D(32676);function F2(a,i,c){c===void 0&&(c={});var f=$e(a),g=$e(i),y=qC.union(f.coordinates,g.coordinates);return y.length===0?null:y.length===1?Jt(y[0],c.properties):Zt(y,c.properties)}var B2=F2;class KC{getCombineFeature(i){let c=null;const f=i[0];return i.map(g=>{const y=Jt(g.coordinates);c===null?c=y:c=B2(c,y)}),f&&(c.properties=(0,nn.Z)({},f)),c}}const nu="select",ru="active";class Ra{constructor({layerService:i,tileLayerService:c,parent:f}){(0,dt.Z)(this,"layerService",void 0),(0,dt.Z)(this,"tileLayerService",void 0),(0,dt.Z)(this,"tileSourceService",void 0),(0,dt.Z)(this,"parent",void 0),(0,dt.Z)(this,"tilePickID",new Map),this.layerService=i,this.tileLayerService=c,this.parent=f,this.tileSourceService=new KC}pickRender(i){const c=this.tileLayerService.getVisibleTileBylngLat(i.lngLat);if(c){const f=c.getMainLayer();f==null||f.layerPickService.pickRender(i)}}pick(i,c){var f=this;return(0,an.Z)(function*(){const y=f.parent.getContainer().pickingService;if(i.type==="RasterLayer"){const x=f.tileLayerService.getVisibleTileBylngLat(c.lngLat);if(x&&x.getMainLayer()!==void 0){const w=x.getMainLayer();return w.layerPickService.pickRasterLayer(w,c,f.parent)}return!1}return f.pickRender(c),y.pickFromPickingFBO(i,c)})()}selectFeature(i){const[c,f,g]=i,y=this.color2PickId(c,f,g);this.tilePickID.set(nu,y),this.updateHighLight(c,f,g,nu)}highlightPickedFeature(i){const[c,f,g]=i,y=this.color2PickId(c,f,g);this.tilePickID.set(ru,y),this.updateHighLight(c,f,g,ru)}updateHighLight(i,c,f,g){this.tileLayerService.tiles.map(y=>{const x=y.getMainLayer();switch(g){case nu:x==null||x.hooks.beforeSelect.call([i,c,f]);break;case ru:x==null||x.hooks.beforeHighlight.call([i,c,f]);break}})}setPickState(){const i=this.tilePickID.get(nu),c=this.tilePickID.get(ru);if(i){const[f,g,y]=this.pickId2Color(i);this.updateHighLight(f,g,y,nu);return}if(c){const[f,g,y]=this.pickId2Color(c);this.updateHighLight(f,g,y,ru);return}}color2PickId(i,c,f){return uc(new Uint8Array([i,c,f]))}pickId2Color(i){return ul(i)}getFeatureById(i){const c=this.tileLayerService.getTiles().filter(g=>g.visible),f=[];return c.forEach(g=>{f.push(...g.getFeatureById(i))}),f}pickRasterLayer(){return!1}}const j2=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,QC=`
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0 / a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  vec2 offset = project_pixel(u_offsets);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function z2(a){const i=a.coordinates;return{vertices:[...i],indices:[0],size:i.length}}class JC extends Kr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const{blend:i,strokeOpacity:c=1,strokeWidth:f=0,stroke:g="#fff"}=this.layer.getLayerConfig(),y={u_stroke_color:Ur(g),u_additive:i==="additive"?1:0,u_stroke_opacity:c,u_stroke_width:f};return this.getUniformsBufferInfo(y)}initModels(){var i=this;return(0,an.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.layer.triangulation=z2,i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:QC,fragmentShader:j2,defines:i.getDefines(),inject:i.getInject(),triangulation:z2,depth:{enable:!1},primitive:q.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=1}=i;return Array.isArray(c)?[c[0]]:[c]}}})}}const tM=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,U2=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) +
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    //
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;


  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,
    0,xcos,-xsin,0,
    0,xsin,xcos,0,
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,
    0,1,0,0,
    ysin,0,ycos,0,
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);


  setPickingColor(a_PickingColor);
}
`,{isNumber:Z2}=oi;class H2 extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"raiseCount",0),(0,dt.Z)(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,POS:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:i={enable:!1,speed:.01,repeat:!1},opacity:c=1,sourceColor:f,targetColor:g,pickLight:y=!1,heightfixed:x=!0,opacityLinear:w={enable:!1,dir:"up"},lightEnable:T=!0}=this.layer.getLayerConfig();let P=0,B=[0,0,0,0],U=[0,0,0,0];if(f&&g&&(B=Ur(f),U=Ur(g),P=1),this.raiseCount<1&&this.raiseRepeat>0&&i.enable){const{speed:Nt=.01}=i;this.raiseCount+=Nt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const G={u_sourceColor:B,u_targetColor:U,u_linearColor:P,u_pickLight:Number(y),u_heightfixed:Number(x),u_r:i.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:Z2(c)?c:1,u_opacitylinear:Number(w.enable),u_opacitylinear_dir:w.dir==="up"?1:0,u_lightEnable:Number(T)};return this.getUniformsBufferInfo(G)}initModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){const{animateOption:{repeat:c=1}}=i.layer.getLayerConfig();return i.raiseRepeat=c,[yield i.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:U2,fragmentShader:tM,triangulation:e2,depth:{enable:!0},defines:i.getDefines(),inject:i.getInject(),cull:{enable:!0,face:q.FRONT},blend:i.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:3,update:i=>{const{size:c}=i;if(c){let f=[];return Array.isArray(c)&&(f=c.length===2?[c[0],c[0],c[1]]:c),Array.isArray(c)||(f=[c,c,c]),f}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Dn.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:q.STATIC_DRAW,data:[],type:q.FLOAT},size:3,update:(i,c,f,g,y)=>y}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Dn.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:3,update:i=>{const c=dc(i.coordinates);return Wx([c[0],c[1]])}}})}}const eM=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,V2=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}
`;class iu extends Kr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:i=1,strokeWidth:c=0,blend:f,blur:g=0}=this.layer.getLayerConfig();this.layer.getLayerConfig();const y={u_additive:f==="additive"?1:0,u_stroke_opacity:i,u_stroke_width:c,u_blur:g};return this.getUniformsBufferInfo(y)}initModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.layer.triangulation=t2,[yield i.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:V2,fragmentShader:eM,triangulation:t2,defines:i.getDefines(),inject:i.getInject(),depth:{enable:!0},blend:i.getBlend()})]})()}animateOption2Array(i){return[i.enable?0:1,i.speed||1,i.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Dn.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:3,update:(i,c,f,g)=>{const[y,x,w]=f,T=Er.al(0,0,1),P=Er.al(y,0,w),B=y>=0?Er.EU(T,P):Math.PI*2-Er.EU(T,P),U=Math.PI*2-Math.asin(x/100),G=Mr.create();Mr.rotateY(G,G,B),Mr.rotateX(G,G,U);const mt=Er.al(1,1,0);Er.fF(mt,mt,G),Er.Fv(mt,mt);const Nt=Er.al(-1,1,0);Er.fF(Nt,Nt,G),Er.Fv(Nt,Nt);const Qt=Er.al(-1,-1,0);Er.fF(Qt,Qt,G),Er.Fv(Qt,Qt);const ye=Er.al(1,-1,0);Er.fF(ye,ye,G),Er.Fv(ye,ye);const Fe=[...mt,...Nt,...Qt,...ye],ze=g%4*3;return[Fe[ze],Fe[ze+1],Fe[ze+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=5}=i;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Dn.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{shape:c=2}=i;return[this.layer.getLayerConfig().shape2d.indexOf(c)]}}})}}const nM=`in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,a7=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed;
  float u_raisingHeight;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0) / 2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if (u_size_unit == 1.0) {
    newSize = newSize * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = extrude.xy * newSize + offsets;

  offset = rotate_matrix(offset, rotation);

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class Rv extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"meter2coord",1),(0,dt.Z)(this,"texture",void 0),(0,dt.Z)(this,"isMeter",!1),(0,dt.Z)(this,"radian",0),(0,dt.Z)(this,"updateTexture",()=>{const{createTexture2D:c}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return}this.texture=c({data:this.iconService.getCanvas(),mag:q.LINEAR,min:q.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,UV:11})}getCommonUniformsInfo(){const{raisingHeight:i=0,heightfixed:c=!1,unit:f="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var g;(g=this.texture)===null||g===void 0||g.bind()}const y={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(c),u_raisingHeight:Number(i),u_size_unit:Mv[f]};return this.getUniformsBufferInfo(y)}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Yc)}initModels(){var i=this;return(0,an.Z)(function*(){return i.iconService.on("imageUpdate",i.updateTexture),i.updateTexture(),i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:a7,fragmentShader:nM,triangulation:Yc,depth:{enable:!1},defines:i.getDefines(),inject:i.getInject(),cull:{enable:!0,face:q.FRONT}})]})()}clearModels(){var i;this.iconService.off("imageUpdate",this.updateTexture),(i=this.texture)===null||i===void 0||i.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:i=>{const c=this.iconService.getIconMap(),{shape:f}=i,{x:g,y}=c[f]||{x:-64,y:-64};return[g,y]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Dn.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:3,update:(i,c,f,g)=>{const y=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],x=g%4*3;return[y[x],y[x+1],y[x+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=5}=i;return Array.isArray(c)?[c[0]]:[c]}}})}}const Dv=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,W2=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2(
    cos(time), sin(time),
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));

  offset = project_pixel(offset);

  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;class Nv extends Kr{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10})}getCommonUniformsInfo(){const{blend:i,speed:c=1,unit:f="pixel"}=this.layer.getLayerConfig(),g={u_additive:i==="additive"?1:0,u_size_unit:Mv[f],u_speed:c,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(g)}getAnimateUniforms(){return{}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Yc)}initModels(){var i=this;return(0,an.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:W2,fragmentShader:Dv,triangulation:Yc,defines:i.getDefines(),inject:i.getInject(),depth:{enable:!1}})]})()}animateOption2Array(i){return[i.enable?0:1,i.speed||1,i.rings||3,0]}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Dn.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:3,update:(i,c,f,g)=>{const y=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],x=g%4*3;return[y[x],y[x+1],y[x+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Dn.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:1,update:i=>{const{size:c=5}=i;return Array.isArray(c)?[c[0]]:[c]}}})}}var G2={fillImage:Rv,fill:Hf,radar:Nv,image:kC,normal:Lv,simplePoint:JC,extrude:m2,text:L2,earthFill:iu,earthExtrude:H2};class Qh extends ql{constructor(...i){super(...i),(0,dt.Z)(this,"type","PointLayer"),(0,dt.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,dt.Z)(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,dt.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}})}buildModels(){var i=this;return(0,an.Z)(function*(){const c=i.getModelType();i.layerModel&&i.layerModel.clearModels(),i.layerModel=new G2[c](i),yield i.initLayerModels()})()}rebuildModels(){var i=this;return(0,an.Z)(function*(){yield i.buildModels()})()}getModelTypeWillEmptyData(){if(this.shapeOption){const{field:i,values:c}=this.shapeOption,{shape2d:f}=this.getLayerConfig(),g=this.iconService.getIconMap();if(i&&(f==null?void 0:f.indexOf(i))!==-1)return"fill";if(c==="text")return"text";if(c&&c instanceof Array){for(const y of c)if(typeof y=="string"&&g.hasOwnProperty(y))return"image"}}return"normal"}getDefaultConfig(){const i=this.getModelType();return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[i]}getModelType(){const i=this.getEncodedData(),{shape2d:c,shape3d:f,billboard:g=!0}=this.getLayerConfig(),y=this.iconService.getIconMap(),x=i.find(w=>w.hasOwnProperty("shape"));if(x){const w=x.shape;return w==="dot"?"normal":w==="simple"?"simplePoint":w==="radar"?"radar":this.layerType==="fillImage"||g===!1?"fillImage":(c==null?void 0:c.indexOf(w))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(f==null?void 0:f.indexOf(w))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":y.hasOwnProperty(w)?"image":"text"}else return this.getModelTypeWillEmptyData()}}function $2(a){return a==="PolygonLayer"?Kh:a==="LineLayer"?Zf:Qh}function iM(a){return["PolygonLayer","LineLayer"].indexOf(a)!==-1}class Kc extends Sr.EventEmitter{constructor(i,c){super(),(0,dt.Z)(this,"x",void 0),(0,dt.Z)(this,"y",void 0),(0,dt.Z)(this,"z",void 0),(0,dt.Z)(this,"key",void 0),(0,dt.Z)(this,"parent",void 0),(0,dt.Z)(this,"sourceTile",void 0),(0,dt.Z)(this,"visible",!0),(0,dt.Z)(this,"layers",[]),(0,dt.Z)(this,"isLoaded",!1),(0,dt.Z)(this,"tileMaskLayers",[]),(0,dt.Z)(this,"tileMask",void 0),this.parent=c,this.sourceTile=i,this.x=i.x,this.y=i.y,this.z=i.z,this.key=`${this.x}_${this.y}_${this.z}`}getLayers(){return this.layers}styleUpdate(...i){}lnglatInBounds(i){const[c,f,g,y]=this.sourceTile.bounds,{lng:x,lat:w}=i;return x>=c&&x<=g&&w>=f&&w<=y}getLayerOptions(){var i;const c=this.parent.getLayerConfig();return(0,nn.Z)((0,nn.Z)({},c),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:iM(this.parent.type),mask:c.mask||((i=c.maskLayers)===null||i===void 0?void 0:i.length)!==0&&c.enableMask})}getMaskLayer(){const{maskLayers:i}=this.parent.getLayerConfig(),c=[];return i==null||i.forEach(f=>{if(!f.tileLayer)return c.push(f),f;const y=f.tileLayer.getTile(this.sourceTile.key),x=y==null?void 0:y.getLayers()[0];x&&c.push(x)}),c}addTileMask(){var i=this;return(0,an.Z)(function*(){const c=new Kh({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[i.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),f=Oc(i.parent.container);c.setContainer(f),yield c.init(),i.tileMask=c;const g=i.getMainLayer();return g!==void 0&&(g.tileMask=c),c})()}addMask(i,c){var f=this;return(0,an.Z)(function*(){const g=Oc(f.parent.container);c.setContainer(g),yield c.init(),i.addMask(c),f.tileMaskLayers.push(c)})()}addLayer(i){var c=this;return(0,an.Z)(function*(){i.isTileLayer=!0;const f=Oc(c.parent.container);i.setContainer(f),c.layers.push(i),yield i.init()})()}updateVisible(i){this.visible=i,this.updateOptions("visible",i)}updateOptions(i,c){this.layers.forEach(f=>{f.updateLayerConfig({[i]:c})})}getMainLayer(){return this.layers[0]}getFeatures(i){return[]}getFeatureById(i){return[]}destroy(){var i;(i=this.tileMask)===null||i===void 0||i.destroy(),this.layers.forEach(c=>c.destroy())}}class oM extends Kc{initTileLayer(){var i=this;return(0,an.Z)(function*(){const c=i.getSourceOption(),f=c.data.features[0].properties,g=new Zf().source(c.data,c.options).size(1).shape("line").color("red"),y=new Qh({minZoom:i.z-1,maxZoom:i.z+1,textAllowOverlap:!0}).source([f],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(i.key).style({stroke:"#fff",strokeWidth:2});yield i.addLayer(g),yield i.addLayer(y),i.isLoaded=!0})()}getSourceOption(){const i=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:i.transforms}}}}const Y2=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,Fv=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class aM extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:i,brightness:c,contrast:f,saturation:g,gamma:y}=this.layer.getLayerConfig(),x={u_opacity:Ad(i,1),u_brightness:Ad(c,1),u_contrast:Ad(f,1),u_saturation:Ad(g,1),u_gamma:Ad(y,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(x)}initModels(){var i=this;return(0,an.Z)(function*(){return yield i.loadTexture(),i.buildModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy()}loadTexture(){var i=this;return(0,an.Z)(function*(){const{createTexture2D:c}=i.rendererService,g=yield i.layer.getSource().data.images;i.texture=c({data:g[0],width:g[0].width,height:g[0].height,mag:q.LINEAR,min:q.LINEAR})})()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:Fv,fragmentShader:Y2,defines:i.getDefines(),triangulation:Fo,primitive:q.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:(i,c,f)=>[f[3],f[4]]}})}}var sM={image:aM};class cM extends ql{constructor(...i){super(...i),(0,dt.Z)(this,"type","ImageLayer")}buildModels(){var i=this;return(0,an.Z)(function*(){const c=i.getModelType();i.layerModel=new sM[c](i),yield i.initLayerModels()})()}getDefaultConfig(){const i=this.getModelType();return{image:{}}[i]}getModelType(){return"image"}}class lM extends Kc{initTileLayer(){var i=this;return(0,an.Z)(function*(){const c=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=i.getSourceOption(),y=new cM((0,nn.Z)({},f)).source(g.data,g.options);c&&Object.keys(c).forEach(x=>{var w,T;const P=x;y[P]((w=c[P])===null||w===void 0?void 0:w.field,(T=c[P])===null||T===void 0?void 0:T.values)}),yield i.addLayer(y),i.isLoaded=!0})()}getSourceOption(){const i=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:i.transforms}}}}const uM=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,fM=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class dM extends Kr{getUninforms(){const i=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,nn.Z)((0,nn.Z)({},i.uniformsOption),c.uniformsOption)}getCommonUniformsInfo(){const{opacity:i=1,color:c="#000"}=this.layer.getLayerConfig(),f={u_color:Ur(c),u_opacity:i||1};return this.getUniformsBufferInfo(f)}initModels(){var i=this;return(0,an.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.initUniformsBuffer(),[yield i.layer.buildLayerModel({moduleName:"mask",vertexShader:fM,fragmentShader:uM,defines:i.getDefines(),triangulation:zf,depth:{enable:!1},pick:!1})]})()}clearModels(i=!0){i&&this.layerService.clear()}registerBuiltinAttributes(){return""}}var hM={fill:dM};class X2 extends ql{constructor(...i){super(...i),(0,dt.Z)(this,"type","MaskLayer")}buildModels(){var i=this;return(0,an.Z)(function*(){const c=i.getModelType();i.layerModel=new hM[c](i),yield i.initLayerModels()})()}getModelType(){return"fill"}}class pM extends Kc{initTileLayer(){var i=this;return(0,an.Z)(function*(){const c=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=i.getSourceOption(),y=new X2((0,nn.Z)({},f)).source(g.data,g.options);c&&Object.keys(c).forEach(x=>{var w,T;const P=x;y[P]((w=c[P])===null||w===void 0?void 0:w.field,(T=c[P])===null||T===void 0?void 0:T.values)}),yield i.addLayer(y),i.isLoaded=!0})()}getFeatures(i){return i?this.sourceTile.data.getTileData(i):[]}getSourceOption(){const i=this.parent.getSource(),{sourceLayer:c,featureId:f}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(c)},options:{parser:{type:"geojson",featureId:f},transforms:i.transforms}}}}function gM(a,i){return{type:a.type,field:"value",items:a.positions.map((c,f)=>({[i]:f>=a.colors.length?null:a.colors[f],value:c}))}}const vM=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,mM=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class q2 extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0),(0,dt.Z)(this,"colorTexture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const i=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,nn.Z)((0,nn.Z)({},i.uniformsOption),c.uniformsOption)}getCommonUniformsInfo(){const{opacity:i=1,clampLow:c=!0,clampHigh:f=!0,noDataValue:g=-9999999,domain:y,rampColors:x}=this.layer.getLayerConfig(),w=y||fd(x);this.colorTexture=this.layer.textureService.getColorTexture(x,w);const T={u_domain:w,u_opacity:i||1,u_noDataValue:g,u_clampLow:c?1:0,u_clampHigh:(typeof f!="undefined"?f:c)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(T)}getRasterData(i){return(0,an.Z)(function*(){if(Array.isArray(i.data))return{data:i.data,width:i.width,height:i.height};{const{rasterData:c,width:f,height:g}=yield i.data;return{data:Array.from(c),width:f,height:g}}})()}initModels(){var i=this;return(0,an.Z)(function*(){return i.buildModels()})()}buildModels(){var i=this;return(0,an.Z)(function*(){i.initUniformsBuffer();const c=i.layer.getSource(),{createTexture2D:f,queryVerdorInfo:g}=i.rendererService,y=c.data.dataArray[0],{data:x,width:w,height:T}=yield i.getRasterData(y);return i.texture=f({data:new Float32Array(x),width:w,height:T,format:g()==="WebGL1"?q.LUMINANCE:q.RED,type:q.FLOAT,alignment:1}),[yield i.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:mM,fragmentShader:vM,defines:i.getDefines(),triangulation:Fo,primitive:q.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}clearModels(){var i,c;(i=this.texture)===null||i===void 0||i.destroy(),(c=this.colorTexture)===null||c===void 0||c.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{shaderLocation:this.attributeLocation.UV,name:"a_Uv",buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:(i,c,f)=>[f[3],f[4]]}})}}const Jh=["data"],K2=["rasterData"],Q2=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,yM=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_rminmax;
  vec2 u_gminmax;
  vec2 u_bminmax;
  float u_opacity;
  float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class bM extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0),(0,dt.Z)(this,"dataOption",{})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const i=this.getCommonUniformsInfo(),c=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,nn.Z)((0,nn.Z)({},i.uniformsOption),c.uniformsOption)}getCommonUniformsInfo(){const{opacity:i=1,noDataValue:c=0}=this.layer.getLayerConfig(),{rMinMax:f=[0,255],gMinMax:g=[0,255],bMinMax:y=[0,255]}=this.dataOption,x={u_rminmax:f,u_gminmax:g,u_bminmax:y,u_opacity:i||1,u_noDataValue:c,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(x)}getRasterData(i){var c=this;return(0,an.Z)(function*(){if(Array.isArray(i.data)){const{data:x}=i,w=(0,ha.Z)(i,Jh);return c.dataOption=w,(0,nn.Z)({data:x},w)}const f=yield i.data,{rasterData:g}=f,y=(0,ha.Z)(f,K2);return c.dataOption=y,Array.isArray(g)?(0,nn.Z)({data:g},y):(0,nn.Z)({data:Array.from(g)},y)})()}initModels(){var i=this;return(0,an.Z)(function*(){i.initUniformsBuffer();const c=i.layer.getSource(),{createTexture2D:f}=i.rendererService,g=c.data.dataArray[0],{data:y,width:x,height:w}=yield i.getRasterData(g);return i.texture=f({data:new Float32Array(y),width:x,height:w,format:q.RGB,type:q.FLOAT}),[yield i.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:yM,fragmentShader:Q2,defines:i.getDefines(),triangulation:Fo,primitive:q.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.initModels()})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:(i,c,f)=>[f[3],f[4]]}})}}const _M=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,tp=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec4 u_unpack;
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class xM extends Kr{constructor(...i){super(...i),(0,dt.Z)(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:i,clampLow:c=!0,clampHigh:f=!0,noDataValue:g=-9999999,domain:y,rampColors:x,colorTexture:w,rScaler:T=6553.6,gScaler:P=25.6,bScaler:B=.1,offset:U=1e4}=this.layer.getLayerConfig(),G=y||fd(x);let mt=w;w?this.layer.textureService.setColorTexture(w,x,G):mt=this.layer.textureService.getColorTexture(x,G);const Nt={u_unpack:[T,P,B,U],u_domain:G,u_opacity:i||1,u_noDataValue:g,u_clampLow:c,u_clampHigh:typeof f!="undefined"?f:c,u_texture:this.texture,u_colorTexture:mt};return this.textures=[this.texture,mt],this.getUniformsBufferInfo(Nt)}initModels(){var i=this;return(0,an.Z)(function*(){i.initUniformsBuffer();const c=i.layer.getSource(),{createTexture2D:f}=i.rendererService,g=yield c.data.images;return i.texture=f({data:g[0],width:g[0].width,height:g[0].height,min:q.LINEAR,mag:q.LINEAR}),[yield i.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:tp,fragmentShader:_M,defines:i.getDefines(),triangulation:Fo,primitive:q.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var i;(i=this.texture)===null||i===void 0||i.destroy()}buildModels(){var i=this;return(0,an.Z)(function*(){return i.initModels()})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Dn.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:q.DYNAMIC_DRAW,data:[],type:q.FLOAT},size:2,update:(i,c,f)=>[f[3],f[4]]}})}}var SM={raster:q2,rasterRgb:bM,raster3d:q2,rasterTerrainRgb:xM};class Bv extends ql{constructor(...i){super(...i),(0,dt.Z)(this,"type","RasterLayer")}buildModels(){var i=this;return(0,an.Z)(function*(){const c=i.getModelType();i.layerModel=new SM[c](i),yield i.initLayerModels()})()}getDefaultConfig(){const i=this.getModelType();return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[i]}getModelType(){switch(this.layerSource.getParserType()){case"raster":case"ndi":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}getLegend(i){if(i!=="color")return{type:void 0,field:void 0,items:[]};const c=this.getLayerConfig().rampColors;return gM(c,i)}}const OM=["rasterData"];class EM extends Kc{initTileLayer(){var i=this;return(0,an.Z)(function*(){const c=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=i.getSourceOption(),y=new Bv((0,nn.Z)({},f)).source(g.data,g.options);c&&Object.keys(c).forEach(x=>{var w,T;const P=x;y[P]((w=c[P])===null||w===void 0?void 0:w.field,(T=c[P])===null||T===void 0?void 0:T.values)}),yield i.addLayer(y),i.isLoaded=!0})()}getSourceOption(){const i=this.parent.getSource(),c=this.sourceTile.data.data,{rasterData:f}=c,g=(0,ha.Z)(c,OM);return{data:f,options:{parser:(0,nn.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},g),transforms:i.transforms}}}}class wM extends Kc{initTileLayer(){var i=this;return(0,an.Z)(function*(){const c=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=i.getSourceOption(),y=new Bv((0,nn.Z)({},f)).source(g.data,g.options);c&&Object.keys(c).forEach(x=>{var w,T;const P=x;y[P]((w=c[P])===null||w===void 0?void 0:w.field,(T=c[P])===null||T===void 0?void 0:T.values)}),yield i.addLayer(y),i.isLoaded=!0})()}getSourceOption(){const i=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:i.transforms}}}}const AM=["rasterData"],jv={positions:[0,1],colors:["#000","#fff"]};class t3 extends Kc{constructor(...i){super(...i),(0,dt.Z)(this,"colorTexture",void 0)}initTileLayer(){var i=this;return(0,an.Z)(function*(){const c=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=i.getSourceOption(),{rampColors:y,domain:x}=i.getLayerOptions();i.colorTexture=i.parent.textureService.getColorTexture(y,x);const w=new Bv((0,nn.Z)((0,nn.Z)({},f),{},{colorTexture:i.colorTexture})).source(g.data,g.options);c&&Object.keys(c).forEach(T=>{var P,B;const U=T;w[U]((P=c[U])===null||P===void 0?void 0:P.field,(B=c[U])===null||B===void 0?void 0:B.values)}),yield i.addLayer(w),i.isLoaded=!0})()}getSourceOption(){const i=this.parent.getSource(),c=this.sourceTile.data.data,{rasterData:f}=c,g=(0,ha.Z)(c,AM);return{data:f,options:{parser:(0,nn.Z)({type:"raster",extent:this.sourceTile.bounds},g),transforms:i.transforms}}}styleUpdate(...i){const{rampColors:c=jv,domain:f}=i;this.colorTexture=this.parent.textureService.getColorTexture(c,f||fd(c)),this.layers.forEach(g=>g.style({colorTexture:this.colorTexture}))}destroy(){this.layers.forEach(i=>i.destroy())}}class ec extends Kc{initTileLayer(){var i=this;return(0,an.Z)(function*(){const c=i.parent.getLayerAttributeConfig(),f=i.getLayerOptions(),g=$2(i.parent.type),y=i.getSourceOption();if(!y){i.isLoaded=!0,i.emit("loaded");return}const x=new g((0,nn.Z)({},f)).source(y.data,y.options);Object.keys(c).forEach(w=>{var T,P;const B=w;x[B]((T=c[B])===null||T===void 0?void 0:T.field,(P=c[B])===null||P===void 0?void 0:P.values)}),yield i.addLayer(x),f.tileMask&&(yield i.addTileMask()),i.setLayerMinMaxZoom(x),i.isLoaded=!0,i.emit("loaded")})()}getSourceOption(){const i=this.parent.getSource(),{sourceLayer:c="defaultLayer",featureId:f="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(c)},options:{parser:{type:"geojson",featureId:f},transforms:i.transforms}}}setLayerMinMaxZoom(i){i.getModelType()==="text"&&i.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}getFeatures(i){return this.sourceTile.data.getTileData(i)}getFeatureById(i){const c=this.getMainLayer();return c?c.getSource().data.dataArray.filter(g=>g._id===i):[]}}function TM(a){switch(a.type){case"PolygonLayer":return ec;case"LineLayer":return ec;case"PointLayer":return ec;case"TileDebugLayer":return oM;case"MaskLayer":return pM;case"RasterLayer":const{dataType:c}=a.getSource().parser;switch(c){case oo.RGB:case oo.CUSTOMRGB:return EM;case oo.ARRAYBUFFER:case oo.CUSTOMARRAYBUFFER:return t3;case oo.TERRAINRGB:case oo.CUSTOMTERRAINRGB:return wM;default:return lM}default:return ec}}const CM=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:MM}=oi;class LM{constructor(i){(0,dt.Z)(this,"parent",void 0),(0,dt.Z)(this,"tileLayerService",void 0),(0,dt.Z)(this,"mapService",void 0),(0,dt.Z)(this,"layerService",void 0),(0,dt.Z)(this,"rendererService",void 0),(0,dt.Z)(this,"pickingService",void 0),(0,dt.Z)(this,"tilePickService",void 0),(0,dt.Z)(this,"tilesetManager",void 0),(0,dt.Z)(this,"initedTileset",!1),(0,dt.Z)(this,"lastViewStates",void 0),(0,dt.Z)(this,"mapchange",()=>{var f;if(this.parent.isVisible()===!1)return;const{latLonBounds:g,zoom:y}=this.getCurrentView();this.lastViewStates&&this.lastViewStates.zoom===y&&this.lastViewStates.latLonBounds.toString()===g.toString()||(this.lastViewStates={zoom:y,latLonBounds:g},(f=this.tilesetManager)===null||f===void 0||f.throttleUpdate(y,g))}),(0,dt.Z)(this,"viewchange",MM(this.mapchange,24)),this.parent=i;const c=this.parent.getContainer();this.rendererService=c.rendererService,this.layerService=c.layerService,this.mapService=c.mapService,this.pickingService=c.pickingService,this.tileLayerService=new XC({rendererService:this.rendererService,layerService:this.layerService,parent:i}),this.tilePickService=new Ra({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:i}),this.parent.setLayerPickService(this.tilePickService),this.proxy(i),this.initTileSetManager()}initTileSetManager(){var i;const c=this.parent.getSource();if(this.tilesetManager=c.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()===!1)return;const{latLonBounds:f,zoom:g}=this.getCurrentView();(i=this.tilesetManager)===null||i===void 0||i.update(g,f)}getCurrentView(){const i=this.mapService.getBounds(),c=[i[0][0],i[0][1],i[1][0],i[1][1]],f=this.mapService.getZoom();return{latLonBounds:c,zoom:f}}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",i=>{}),this.tilesetManager.on("tile-unload",i=>{this.tileUnLoad(i)}),this.tilesetManager.on("tile-error",(i,c)=>{this.tileError(i)}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}render(){this.tileLayerService.render()}getLayers(){return this.tileLayerService.getLayers()}getTiles(){return this.tileLayerService.getTiles()}getTile(i){return this.tileLayerService.getTile(i)}tileLoaded(i){}tileError(i){console.warn("error:",i)}destroy(){var i;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(i=this.tilesetManager)===null||i===void 0||i.destroy(),this.tileLayerService.destroy()}reload(){var i;this.tilesetManager.clear();const{latLonBounds:c,zoom:f}=this.getCurrentView();(i=this.tilesetManager)===null||i===void 0||i.update(f,c)}tileUnLoad(i){this.tileLayerService.removeTile(i.key)}tileUpdate(){var i=this;return(0,an.Z)(function*(){if(!i.tilesetManager)return;const c=i.parent.getMinZoom(),f=i.parent.getMaxZoom(),g=i.tilesetManager.tiles.filter(y=>y.isLoaded).filter(y=>y.isVisibleChange).filter(y=>y.data).filter(y=>y.z>=c&&y.z<f);yield Promise.all(g.map(function(){var y=(0,an.Z)(function*(x){if(i.tileLayerService.hasTile(x.key))i.tileLayerService.updateTileVisible(x),i.tilePickService.setPickState(),i.layerService.reRender();else{const w=TM(i.parent),T=new w(x,i.parent);yield T.initTileLayer(),i.tilePickService.setPickState(),T.getLayers().length!==0&&(i.tileLayerService.addTile(T),i.tileLayerService.updateTileVisible(x),i.layerService.reRender())}});return function(x){return y.apply(this,arguments)}}())),i.tilesetManager.isLoaded&&i.parent.emit("tiles-loaded",i.tilesetManager.currentTiles)})()}setPickState(i){}pickRender(i){this.tilePickService.pickRender(i)}selectFeature(i){this.tilePickService.selectFeature(i)}highlightPickedFeature(i){this.tilePickService.highlightPickedFeature(i)}proxy(i){CM.forEach(c=>{const f=i[c].bind(i);i[c]=(...g)=>(f(...g),this.getLayers().map(y=>{y[c](...g)}),c==="style"&&this.getTiles().forEach(y=>y.styleUpdate(...g)),i)})}}class e3 extends null{constructor(...i){super(...i),_defineProperty(this,"isMoving",!1),_defineProperty(this,"maskLayer",void 0),_defineProperty(this,"move",c=>{switch(c.stopPropagation(),c.type){case"touchcancel":case"touchend":case"mouseup":{var f;this.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(g=>{document.removeEventListener(g,this.move)}),(f=this.scene)===null||f===void 0||f.render();break}case"mousedown":case"touchstart":this.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(g=>{document.addEventListener(g,this.move)});case"mousemove":case"touchmove":{if(this.isMoving)if(this.controlOption.orientation==="vertical"){let g;if("pageX"in c?g=c.pageX:c.touches&&c.touches.length&&c.touches[0].pageX?g=c.touches[0].pageX:c.changedTouches&&c.changedTouches.length&&(g=c.changedTouches[0].pageX),!g)break;const y=this.getContainerDOMRect(),x=this.getContainerSize(),w=x[0],T=(y==null?void 0:y.left)||0,P=g-T+window.scrollX-document.documentElement.clientLeft,B=w-Math.min(Math.max(0,w-P),w),U=B/w;this.setOptions({ratio:U}),this.emit("moving",{size:[B,x[1]],ratio:[U,0]})}else{let g;if("pageY"in c?g=c.pageY:c.touches&&c.touches.length&&c.touches[0].pageY?g=c.touches[0].pageY:c.changedTouches&&c.changedTouches.length&&(g=c.changedTouches[0].pageY),!g)break;const y=this.getContainerDOMRect(),x=this.getContainerSize(),w=x[1],T=(y==null?void 0:y.top)||0,P=g-T+window.scrollY-document.documentElement.clientTop,B=w-Math.min(Math.max(0,w-P),w),U=B/w;this.setOptions({ratio:U}),this.emit("moving",{size:[x[0],B],ratio:[0,U]})}break}default:break}}),_defineProperty(this,"getMaskLayer",()=>(console.log(this.getMaskGeoData()),new PolygonLayer({visible:!1}).source(this.getMaskGeoData()).shape("fill").color("red").style({opacity:.1}))),_defineProperty(this,"updateMask",()=>{var c;if(!this.mapsService)return;const f=this.getMaskGeoData();(c=this.maskLayer)===null||c===void 0||c.setData(f)})}getDefault(){return _objectSpread(_objectSpread({},super.getDefault()),{},{layers:[],rightLayers:[],ratio:.5,orientation:"vertical"})}onAdd(){const i=DOM.create("div","l7-control-swipe");DOM.create("button","l7-control-swipe__button",i);const{orientation:c="vertical",ratio:f=.5}=this.controlOption;return c==="horizontal"?(i.style.top=f*100+"%",i.style.left=""):(i.style.left=f*100+"%",i.style.top=""),i.classList.add(c),i}addTo(i){this.mapsService=i.mapService,this.renderService=i.rendererService,this.layerService=i.layerService,this.controlService=i.controlService,this.configService=i.globalConfigService,this.scene=i.sceneService,this.sceneContainer=i,this.isShow=!0,this.container=this.onAdd();const{className:c,style:f,layers:g,rightLayers:y}=this.controlOption;c&&this.setClassName(c),f&&this.setStyle(f),this.mapsService.getMarkerContainer().appendChild(this.container),this.maskLayer=this.getMaskLayer(),this.registerEvent();const x=createLayerContainer(i);return this.maskLayer.setContainer(x),this.scene.addLayer(this.maskLayer),this.addMaskToLayers(g,!1),this.addMaskToLayers(y,!0),this.emit("add",this),this}onRemove(){if(this.maskLayer){var i;const{layers:c,rightLayers:f}=this.controlOption;this.removeMaskFromLayers(c),this.removeMaskFromLayers(f),(i=this.layerService)===null||i===void 0||i.remove(this.maskLayer)}this.unRegisterEvent(),this.removeAllListeners()}show(){var i;const c=this.container;DOM.removeClass(c,"l7-control-swipe_hide");const{layers:f,rightLayers:g}=this.controlOption;f.forEach(y=>y.enableMask()),g.forEach(y=>y.enableMask()),(i=this.scene)===null||i===void 0||i.render(),this.isShow=!0,this.emit("show",this)}hide(){var i;const c=this.container;DOM.addClass(c,"l7-control-swipe_hide");const{layers:f,rightLayers:g}=this.controlOption;f.forEach(y=>y.disableMask()),g.forEach(y=>y.disableMask()),(i=this.scene)===null||i===void 0||i.render(),this.isShow=!1,this.emit("hide",this)}setOptions(i){const c=_objectSpread(_objectSpread({},this.controlOption),i);if(i.className&&this.setClassName(i.className),i.style&&this.setStyle(i.style),(i.orientation||i.ratio!==void 0)&&this.setOrientationAndRatio(c.orientation,c.ratio),i.layers){const f=i.layers,g=this.controlOption.layers;this.setLayers(f,g,!1)}if(i.rightLayers){const f=i.rightLayers,g=this.controlOption.rightLayers;this.setLayers(f,g,!0)}this.controlOption=c,this.updateMask()}registerEvent(){this.container.addEventListener("mousedown",this.move),this.container.addEventListener("touchstart",this.move),this.mapsService.on("camerachange",this.updateMask)}unRegisterEvent(){var i;this.container.removeEventListener("mousedown",this.move),this.container.removeEventListener("touchstart",this.move),(i=this.mapsService)===null||i===void 0||i.off("camerachange",this.updateMask)}setOrientationAndRatio(i="vertical",c=.5){this.container.classList.remove("horizontal","vertical"),this.container.classList.add(i),i==="horizontal"?(this.container.style.top=c*100+"%",this.container.style.left=""):(this.container.style.left=c*100+"%",this.container.style.top="")}setLayers(i,c,f=!1){const g=i.filter(x=>c.includes(x)===!1),y=c.filter(x=>i.includes(x)===!1);this.addMaskToLayers(g,f),this.removeMaskFromLayers(y)}addMaskToLayers(i,c){i.forEach(f=>{f.updateLayerConfig({maskInside:!c}),f.addMask(this.maskLayer)})}removeMaskFromLayers(i){i.forEach(c=>{c.updateLayerConfig({maskInside:!0}),c.removeMask(this.maskLayer)})}getMaskGeoData(){const{ratio:i=.5,orientation:c="vertical"}=this.controlOption,f=c==="vertical",[g,y]=this.getBounds(),[x,w]=g,[T,P]=y;let B;if(f){const G=x+(T-x)*i;B=[[x,P],[G,P],[G,w],g,[x,P]]}else{const G=this.getContainerSize(),Nt=this.mapsService.containerToLngLat([G[0],G[1]*i]).lat;B=[[x,P],y,[T,Nt],[x,Nt],[x,P]]}return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[B]}}]}}getContainerDOMRect(){var i;return(i=this.mapsService.getContainer())===null||i===void 0?void 0:i.getBoundingClientRect()}getContainerSize(){return this.mapsService.getSize()}getBounds(){return this.mapsService.getBounds()}addLayer(i,c=!1){const f=Array.isArray(i)?i:[i];if(c){const g=this.controlOption.rightLayers.concat(...f);this.setOptions({rightLayers:g})}else{const g=this.controlOption.layers.concat(...f);this.setOptions({layers:g})}}removeLayer(i){const c=Array.isArray(i)?i:[i],f=this.controlOption.layers.filter(y=>c.includes(y)),g=this.controlOption.rightLayers.filter(y=>c.includes(y));this.setOptions({layers:f,rightLayers:g})}removeLayers(){this.setOptions({layers:[],rightLayers:[]})}}class l7 extends null{constructor(...i){super(...i),_defineProperty(this,"disabled",void 0),_defineProperty(this,"zoomInButton",void 0),_defineProperty(this,"zoomOutButton",void 0),_defineProperty(this,"zoomNumDiv",void 0),_defineProperty(this,"zoomIn",()=>{!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}),_defineProperty(this,"zoomOut",()=>{!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}),_defineProperty(this,"updateDisabled",()=>{const c=this.mapsService;this.zoomInButton.removeAttribute("disabled"),this.zoomOutButton.removeAttribute("disabled"),(this.disabled||c.getZoom()<=c.getMinZoom())&&this.zoomOutButton.setAttribute("disabled","true"),this.controlOption.showZoom&&this.zoomNumDiv&&(this.zoomNumDiv.innerText=String(Math.floor(c.getZoom()))),(this.disabled||c.getZoom()>=c.getMaxZoom())&&this.zoomInButton.setAttribute("disabled","true")})}getDefault(i){return _objectSpread(_objectSpread({},super.getDefault(i)),{},{position:PositionType.BOTTOMRIGHT,name:"zoom",zoomInText:createL7Icon("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:createL7Icon("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}setOptions(i){super.setOptions(i),this.checkUpdateOption(i,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}onAdd(){const i=DOM.create("div","l7-control-zoom");return this.resetButtonGroup(i),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),i}onRemove(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}disable(){return this.disabled=!0,this.updateDisabled(),this}enable(){return this.disabled=!1,this.updateDisabled(),this}resetButtonGroup(i){DOM.clearChildren(i),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",i,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",i)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",i,this.zoomOut),this.updateDisabled()}createButton(i,c,f,g,y){const x=DOM.create("button",f,g);return typeof i=="string"?x.innerHTML=i:x.append(i),x.title=c,y&&x.addEventListener("click",y),x}}class PM extends Sr.EventEmitter{get lngLat(){var i;return(i=this.popupOption.lngLat)!==null&&i!==void 0?i:{lng:0,lat:0}}set lngLat(i){this.popupOption.lngLat=i}constructor(i){super(),(0,dt.Z)(this,"popupOption",void 0),(0,dt.Z)(this,"mapsService",void 0),(0,dt.Z)(this,"sceneService",void 0),(0,dt.Z)(this,"layerService",void 0),(0,dt.Z)(this,"scene",void 0),(0,dt.Z)(this,"closeButton",void 0),(0,dt.Z)(this,"container",void 0),(0,dt.Z)(this,"content",void 0),(0,dt.Z)(this,"contentTitle",void 0),(0,dt.Z)(this,"contentPanel",void 0),(0,dt.Z)(this,"tip",void 0),(0,dt.Z)(this,"isShow",!0),(0,dt.Z)(this,"onMouseMove",f=>{var g;const y=this.mapsService.getMapContainer(),{left:x=0,top:w=0}=(g=y==null?void 0:y.getBoundingClientRect())!==null&&g!==void 0?g:{};this.setPopupPosition(f.clientX-x,f.clientY-w)}),(0,dt.Z)(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;const{lng:f,lat:g}=this.lngLat,{x:y,y:x}=this.mapsService.lngLatToContainer([f,g]);this.setPopupPosition(y,x)}),(0,dt.Z)(this,"updateLngLatPositionWhenZoom",f=>{if(!this.mapsService||this.popupOption.followCursor)return;const g=f.map,y=g.getSize();y.x=y.x/2,y.y=y.y/2;const x=f.center,w=f.zoom,T=g.DE(this.lngLat,w,x);T.x=Math.round(T.x),T.y=Math.round(T.y),this.setPopupPosition(T.x,T.y,!0)}),(0,dt.Z)(this,"onKeyDown",f=>{f.keyCode===27&&this.remove()}),(0,dt.Z)(this,"onCloseButtonClick",f=>{f.stopPropagation&&f.stopPropagation(),this.hide()}),(0,dt.Z)(this,"updatePosition",(f,g=!0)=>{const y=!!this.lngLat,{className:x,style:w,maxWidth:T,anchor:P,stopPropagation:B}=this.popupOption;if(!this.mapsService||!y||!this.content)return;const U=this.mapsService.getMarkerContainer();if(!this.container&&U&&(this.container=$i("div",`l7-popup ${x!=null?x:""} ${this.isShow?"":"l7-popup-hide"}`,U),w&&this.container.setAttribute("style",w),this.tip=$i("div","l7-popup-tip",this.container),this.container.appendChild(this.content),B&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(G=>{this.container.addEventListener(G,mt=>{mt.stopPropagation()})}),this.container.style.whiteSpace="nowrap"),g?this.updateLngLatPositionWhenZoom(f):this.updateLngLatPosition(),xO(this.container,`${Ae[P]}`),De(this.container,P,"popup"),T){const{width:G}=this.container.getBoundingClientRect();G>parseFloat(T)&&(this.container.style.width=T)}else this.container.style.removeProperty("width")}),(0,dt.Z)(this,"updateWhenZoom",f=>{this.updatePosition(f,!0)}),(0,dt.Z)(this,"update",()=>{this.updatePosition(null,!1)}),this.popupOption=(0,nn.Z)((0,nn.Z)({},this.getDefault(i!=null?i:{})),i);const{lngLat:c}=this.popupOption;c&&(this.lngLat=c)}getIsShow(){return this.isShow}addTo(i){this.mapsService=i.mapService,this.sceneService=i.sceneService,this.layerService=i.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=i,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();const{html:c,text:f,title:g}=this.popupOption;return c?this.setHTML(c):f&&this.setText(f),g&&this.setTitle(g),this.emit("open"),this}remove(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Ha(this.content),this.container&&(Ha(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}getOptions(){return this.popupOption}setOptions(i){this.show();const{className:c}=this.popupOption;if(this.popupOption=(0,nn.Z)((0,nn.Z)({},this.popupOption),i),this.checkUpdateOption(i,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","lngLat","offsets"])&&(this.container&&(Ha(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(i,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(i,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(i,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(i,["html"])&&i.html?this.setHTML(i.html):this.checkUpdateOption(i,["text"])&&i.text&&this.setText(i.text),this.checkUpdateOption(i,["className"])){var f;c&&this.container.classList.remove(c!=null?c:""),this.container.classList.add((f=i.className)!==null&&f!==void 0?f:"")}if(this.checkUpdateOption(i,["style"])){var g;ky(this.container,(g=i.style)!==null&&g!==void 0?g:"")}return this.checkUpdateOption(i,["lngLat"])&&i.lngLat&&this.setLnglat(i.lngLat),this}open(){return this.addTo(this.scene),this}close(){return this.remove(),this}show(){if(!this.isShow)return this.container&&dl(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}hide(){if(this.isShow)return this.container&&Va(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}setHTML(i){return this.popupOption.html=i,this.setDOMContent(i)}setText(i){return this.popupOption.text=i,this.setDOMContent(window.document.createTextNode(i))}setTitle(i){this.show(),this.popupOption.title=i,i?(this.contentTitle||(this.contentTitle=$i("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),wa(this.contentTitle),Dy(this.contentTitle,i)):this.contentTitle&&(Ha(this.contentTitle),this.contentTitle=void 0)}panToPopup(){const{lng:i,lat:c}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([i,c]),this}setLngLat(i){return this.setLnglat(i)}setLnglat(i){return this.show(),this.lngLat=i,Array.isArray(i)&&(this.lngLat={lng:i[0],lat:i[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup()},0),this}getLnglat(){return this.lngLat}setMaxWidth(i){return this.popupOption.maxWidth=i,this.update(),this}isOpen(){return!!this.mapsService}getDefault(i){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:ae.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}setDOMContent(i){return this.show(),this.createContent(),Dy(this.contentPanel,i),this.update(),this}updateCloseOnClick(i){const c=this.mapsService;c&&(c==null||c.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!i&&requestAnimationFrame(()=>{c==null||c.on("click",this.onCloseButtonClick)}))}updateCloseOnEsc(i){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!i&&window.addEventListener("keydown",this.onKeyDown)}updateFollowCursor(i){var c;const f=(c=this.mapsService)===null||c===void 0?void 0:c.getContainer();f&&(f==null||f.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!i&&(f==null||f.addEventListener("mousemove",this.onMouseMove)))}createContent(){if(this.content&&Ha(this.content),this.contentTitle=void 0,this.content=$i("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){const i=yg("l7-icon-guanbi");Va(i,"l7-popup-close-button"),this.content.appendChild(i),this.popupOption.closeButtonOffsets&&(i.style.right=this.popupOption.closeButtonOffsets[0]+"px",i.style.top=this.popupOption.closeButtonOffsets[1]+"px"),i.setAttribute("aria-label","Close popup"),i.addEventListener("click",()=>{this.hide()}),i.addEventListener("pointerup",c=>{c.stopPropagation()}),i.addEventListener("pointerdown",c=>{c.stopPropagation()}),this.closeButton=i}else this.closeButton=void 0;this.contentPanel=$i("div","l7-popup-content__panel",this.content)}setPopupPosition(i,c,f=!1){if(this.container){const{offsets:g}=this.popupOption;this.container.style.left=i+g[0]+"px",this.container.style.top=c-g[1]+"px",f?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}checkUpdateOption(i,c){return c.some(f=>f in i)}}const{get:IM}=oi;class u7 extends null{constructor(...i){super(...i),_defineProperty(this,"layerClickCountByFrame",0),_defineProperty(this,"layerConfigMap",new WeakMap),_defineProperty(this,"displayFeatureInfo",void 0),_defineProperty(this,"onLayerClick",(c,f)=>{requestAnimationFrame(()=>{if(this.popupOption.closeOnClick&&this.layerClickCountByFrame++,this.isShow&&this.isSameFeature(c,f.featureId))this.hide();else{const{title:g,content:y}=this.getLayerInfoFrag(c,f);this.setDOMContent(y),this.setLnglat(f.lngLat),this.setTitle(g),this.setDisplayFeatureInfo({layer:c,featureId:f.featureId}),this.show()}})}),_defineProperty(this,"onSceneClick",()=>{this.layerClickCountByFrame=0,requestAnimationFrame(()=>{this.layerClickCountByFrame||this.hide()})}),_defineProperty(this,"onLayerHide",()=>{this.hide(),this.setDisplayFeatureInfo(void 0)}),_defineProperty(this,"updateCloseOnClick",()=>{})}get layerConfigItems(){var i;const{config:c,items:f}=this.popupOption;return(i=c!=null?c:f)!==null&&i!==void 0?i:[]}addTo(i){return super.addTo(i),this.bindLayerEvent(),this.hide(),this}remove(){return super.remove(),this.unbindLayerEvent(),this}setOptions(i){this.unbindLayerEvent();const c=_objectSpread({},i),f=c.trigger||this.popupOption.trigger,g=c.items||this.popupOption.items,y=(g==null?void 0:g.length)===0;c.followCursor=f==="hover"&&!y;const x=this.isShow;return super.setOptions(c),this.bindLayerEvent(),(y||!x)&&this.hide(),this}getDefault(i){const c=i.trigger!=="click";return _objectSpread(_objectSpread({},super.getDefault(i)),{},{trigger:"hover",followCursor:c,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}bindLayerEvent(){const{trigger:i,closeOnClick:c}=this.popupOption;this.layerConfigItems.forEach(f=>{var g;const y=this.getLayerByConfig(f);if(!y)return;const x=_objectSpread({},f);if(i==="hover"){const B=this.onLayerMouseMove.bind(this,y),U=this.onLayerMouseOut.bind(this,y);x.onMouseMove=B,x.onMouseOut=U,y==null||y.on("mousemove",B),y==null||y.on("mouseout",U)}else{var w;const B=this.onLayerClick.bind(this,y);x.onClick=B,y==null||y.on("click",B);const U=(w=this.mapsService)===null||w===void 0?void 0:w.getMapContainer();U&&c&&U.addEventListener("click",this.onSceneClick)}const T=y==null||(g=y.getSource)===null||g===void 0?void 0:g.call(y),P=this.onSourceUpdate.bind(this);T==null||T.on("update",P),x.onSourceUpdate=P,this.layerConfigMap.set(y,x)})}unbindLayerEvent(){this.layerConfigItems.forEach(i=>{var c;const f=this.getLayerByConfig(i),g=f&&this.layerConfigMap.get(f);if(!g)return;const{onMouseMove:y,onMouseOut:x,onClick:w,onSourceUpdate:T}=g;if(y&&f.off("mousemove",y),x&&f.off("mouseout",x),w&&f.off("click",w),T){var P;f==null||(P=f.getSource())===null||P===void 0||P.off("update",T)}const B=(c=this.mapsService)===null||c===void 0?void 0:c.getMapContainer();B&&B.removeEventListener("click",this.onSceneClick)})}onLayerMouseMove(i,c){if(!this.isSameFeature(i,c.featureId)){const{title:f,content:g}=this.getLayerInfoFrag(i,c);this.setDOMContent(g),this.setTitle(f),this.setDisplayFeatureInfo({layer:i,featureId:c.featureId}),this.show()}}onLayerMouseOut(i,c){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}onSourceUpdate(){this.hide(),this.setDisplayFeatureInfo(void 0)}getLayerInfoFrag(i,c){const f=this.layerConfigMap.get(i);let g;const y=document.createDocumentFragment();if(f){let x=c.feature;x.type==="Feature"&&"properties"in x&&"geometry"in x&&(x=x.properties);const{title:w,fields:T,customContent:P}=f;if(w){g=document.createDocumentFragment();const B=w instanceof Function?w(x):w;DOM.appendElementType(g,B)}if(P){const B=P instanceof Function?P(x):P;DOM.appendElementType(y,B)}else T!=null&&T.length&&(T==null||T.forEach(B=>{var U,G;const{field:mt,formatField:Nt,formatValue:Qt,getValue:ye}=typeof B=="string"?{field:B}:B,Fe=DOM.create("div","l7-layer-popup__row"),ze=ye?ye(c.feature):IM(x,mt),Ve=(U=Nt instanceof Function?Nt(mt,x):Nt)!==null&&U!==void 0?U:mt;let tn=(G=Qt instanceof Function?Qt(ze,x):Qt)!==null&&G!==void 0?G:ze;const pn=DOM.create("span","l7-layer-popup__key",Fe);DOM.appendElementType(pn,Ve),DOM.appendElementType(pn,document.createTextNode("\uFF1A"));const Pn=DOM.create("span","l7-layer-popup__value",Fe);Array.isArray(tn)&&tn.every(Tn=>!(Tn instanceof Object))&&(tn=tn.map(Tn=>String(Tn)).join(",")),DOM.appendElementType(Pn,tn),y.appendChild(Fe)}))}return{title:g,content:y}}getLayerByConfig(i){const c=i.layer;if(c instanceof Object)return c;if(typeof c=="string")return this.layerService.getLayer(c)||this.layerService.getLayerByName(c)}isSameFeature(i,c){const f=this.displayFeatureInfo;return f&&i===f.layer&&c===f.featureId}setDisplayFeatureInfo(i){const c=this.displayFeatureInfo;c&&c.layer.off("hide",this.onLayerHide),i&&i.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=i}}function kM(a,i){var c=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,f=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(c||f)&&(i||(i=document),!!i)){var g=i.head||i.getElementsByTagName("head")[0];if(!g){g=i.createElement("head");var y=i.body||i.getElementsByTagName("body")[0];y?y.parentNode.insertBefore(g,y):i.documentElement.appendChild(g)}var x=i.createElement("style");return x.type="text/css",x.styleSheet?x.styleSheet.cssText=a:x.appendChild(i.createTextNode(a)),g.appendChild(x),x}}kM(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var RM=D(81550),DM=D.n(RM),NM=class{constructor(a,i){const{buffer:c,offset:f,stride:g,normalized:y,size:x,divisor:w}=i;this.buffer=c,this.attribute={buffer:c.get(),offset:f||0,stride:g||0,normalized:y||!1,divisor:w||0},x&&(this.attribute.size=x)}get(){return this.attribute}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},FM={[q.POINTS]:"points",[q.LINES]:"lines",[q.LINE_LOOP]:"line loop",[q.LINE_STRIP]:"line strip",[q.TRIANGLES]:"triangles",[q.TRIANGLE_FAN]:"triangle fan",[q.TRIANGLE_STRIP]:"triangle strip"},n3={[q.STATIC_DRAW]:"static",[q.DYNAMIC_DRAW]:"dynamic",[q.STREAM_DRAW]:"stream"},zv={[q.BYTE]:"int8",[q.INT]:"int32",[q.UNSIGNED_BYTE]:"uint8",[q.UNSIGNED_SHORT]:"uint16",[q.UNSIGNED_INT]:"uint32",[q.FLOAT]:"float"},BM={[q.ALPHA]:"alpha",[q.LUMINANCE]:"luminance",[q.LUMINANCE_ALPHA]:"luminance alpha",[q.RGB]:"rgb",[q.RGBA]:"rgba",[q.RGBA4]:"rgba4",[q.RGB5_A1]:"rgb5 a1",[q.RGB565]:"rgb565",[q.DEPTH_COMPONENT]:"depth",[q.DEPTH_STENCIL]:"depth stencil"},r3={[q.DONT_CARE]:"dont care",[q.NICEST]:"nice",[q.FASTEST]:"fast"},i3={[q.NEAREST]:"nearest",[q.LINEAR]:"linear",[q.LINEAR_MIPMAP_LINEAR]:"mipmap",[q.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[q.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[q.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},Uv={[q.REPEAT]:"repeat",[q.CLAMP_TO_EDGE]:"clamp",[q.MIRRORED_REPEAT]:"mirror"},ou={[q.NONE]:"none",[q.BROWSER_DEFAULT_WEBGL]:"browser"},jM={[q.NEVER]:"never",[q.ALWAYS]:"always",[q.LESS]:"less",[q.LEQUAL]:"lequal",[q.GREATER]:"greater",[q.GEQUAL]:"gequal",[q.EQUAL]:"equal",[q.NOTEQUAL]:"notequal"},o3={[q.FUNC_ADD]:"add",[q.MIN_EXT]:"min",[q.MAX_EXT]:"max",[q.FUNC_SUBTRACT]:"subtract",[q.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},ep={[q.ZERO]:"zero",[q.ONE]:"one",[q.SRC_COLOR]:"src color",[q.ONE_MINUS_SRC_COLOR]:"one minus src color",[q.SRC_ALPHA]:"src alpha",[q.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[q.DST_COLOR]:"dst color",[q.ONE_MINUS_DST_COLOR]:"one minus dst color",[q.DST_ALPHA]:"dst alpha",[q.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[q.CONSTANT_COLOR]:"constant color",[q.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[q.CONSTANT_ALPHA]:"constant alpha",[q.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[q.SRC_ALPHA_SATURATE]:"src alpha saturate"},zM={[q.NEVER]:"never",[q.ALWAYS]:"always",[q.LESS]:"less",[q.LEQUAL]:"lequal",[q.GREATER]:"greater",[q.GEQUAL]:"gequal",[q.EQUAL]:"equal",[q.NOTEQUAL]:"notequal"},Qc={[q.ZERO]:"zero",[q.KEEP]:"keep",[q.REPLACE]:"replace",[q.INVERT]:"invert",[q.INCR]:"increment",[q.DECR]:"decrement",[q.INCR_WRAP]:"increment wrap",[q.DECR_WRAP]:"decrement wrap"},au={[q.FRONT]:"front",[q.BACK]:"back"},Zv=class{constructor(a,i){this.isDestroyed=!1;const{data:c,usage:f,type:g}=i;this.buffer=a.buffer({data:c,usage:n3[f||q.STATIC_DRAW],type:zv[g||q.UNSIGNED_BYTE]})}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:i}){this.buffer.subdata(a,i)}},a3=class{constructor(a,i){const{data:c,usage:f,type:g,count:y}=i;this.elements=a.elements({data:c,usage:n3[f||q.STATIC_DRAW],type:zv[g||q.UNSIGNED_BYTE],count:y})}get(){return this.elements}subData({data:a}){this.elements.subdata(a)}destroy(){}},UM=class{constructor(a,i){const{width:c,height:f,color:g,colors:y}=i,x={width:c,height:f};Array.isArray(y)&&(x.colors=y.map(w=>w.get())),g&&typeof g!="boolean"&&(x.color=g.get()),this.framebuffer=a.framebuffer(x)}get(){return this.framebuffer}destroy(){this.framebuffer.destroy()}resize({width:a,height:i}){this.framebuffer.resize(a,i)}},on=D(75334),Wf=Object.defineProperty,ZM=Object.defineProperties,Hv=Object.getOwnPropertyDescriptors,s3=Object.getOwnPropertySymbols,HM=Object.prototype.hasOwnProperty,VM=Object.prototype.propertyIsEnumerable,c3=(a,i,c)=>i in a?Wf(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,Da=(a,i)=>{for(var c in i||(i={}))HM.call(i,c)&&c3(a,c,i[c]);if(s3)for(var c of s3(i))VM.call(i,c)&&c3(a,c,i[c]);return a},Vv=(a,i)=>ZM(a,Hv(i)),{isPlainObject:f7,isTypedArray:l3}=oi,np=class{constructor(a,i){this.destroyed=!1,this.uniforms={},this.reGl=a;const{vs:c,fs:f,attributes:g,uniforms:y,primitive:x,count:w,elements:T,depth:P,cull:B,instances:U}=i,G={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:on.Fp.LOWER_LEFT,clipSpaceNearZ:on.R$.NEGATIVE_ONE,supportMRT:!1},mt={};this.options=i,y&&(this.uniforms=this.extractUniforms(y),Object.keys(y).forEach(ze=>{mt[ze]=a.prop(ze)}));const Nt={};Object.keys(g).forEach(ze=>{Nt[ze]=g[ze].get()});const Qt=C1((0,on.oX)(G,"frag",f,null,!1)),ye=C1((0,on.oX)(G,"vert",c,null,!1)),Fe={attributes:Nt,frag:Qt,uniforms:mt,vert:ye,colorMask:a.prop("colorMask"),lineWidth:1,blend:{enable:a.prop("blend.enable"),func:a.prop("blend.func"),equation:a.prop("blend.equation"),color:a.prop("blend.color")},stencil:{enable:a.prop("stencil.enable"),mask:a.prop("stencil.mask"),func:a.prop("stencil.func"),opFront:a.prop("stencil.opFront"),opBack:a.prop("stencil.opBack")},primitive:FM[x===void 0?q.TRIANGLES:x]};U&&(Fe.instances=U),w?Fe.count=w:T&&(Fe.elements=T.get()),this.initDepthDrawParams({depth:P},Fe),this.initCullDrawParams({cull:B},Fe),this.drawCommand=a(Fe),this.drawParams=Fe}updateAttributesAndElements(a,i){const c={};Object.keys(a).forEach(f=>{c[f]=a[f].get()}),this.drawParams.attributes=c,this.drawParams.elements=i.get(),this.drawCommand=this.reGl(this.drawParams)}updateAttributes(a){const i={};Object.keys(a).forEach(c=>{i[c]=a[c].get()}),this.drawParams.attributes=i,this.drawCommand=this.reGl(this.drawParams)}addUniforms(a){this.uniforms=Da(Da({},this.uniforms),this.extractUniforms(a))}draw(a,i){if(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)return;const c=Da(Da({},this.uniforms),this.extractUniforms(a.uniforms||{})),f={};Object.keys(c).forEach(g=>{const y=typeof c[g];y==="boolean"||y==="number"||Array.isArray(c[g])||c[g].BYTES_PER_ELEMENT?f[g]=c[g]:f[g]=c[g].get()}),f.blend=i?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(a),f.stencil=this.getStencilDrawParams(a),f.colorMask=this.getColorMaskDrawParams(a,i),this.drawCommand(f)}destroy(){var a,i;(i=(a=this.drawParams)==null?void 0:a.elements)==null||i.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(c=>{c==null||c.destroy()}),this.destroyed=!0}initDepthDrawParams({depth:a},i){a&&(i.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:jM[a.func||q.LESS],range:a.range||[0,1]})}getBlendDrawParams({blend:a}){const{enable:i,func:c,equation:f,color:g=[0,0,0,0]}=a||{};return{enable:!!i,func:{srcRGB:ep[c&&c.srcRGB||q.SRC_ALPHA],srcAlpha:ep[c&&c.srcAlpha||q.SRC_ALPHA],dstRGB:ep[c&&c.dstRGB||q.ONE_MINUS_SRC_ALPHA],dstAlpha:ep[c&&c.dstAlpha||q.ONE_MINUS_SRC_ALPHA]},equation:{rgb:o3[f&&f.rgb||q.FUNC_ADD],alpha:o3[f&&f.alpha||q.FUNC_ADD]},color:g}}getStencilDrawParams({stencil:a}){const{enable:i,mask:c=-1,func:f={cmp:q.ALWAYS,ref:0,mask:-1},opFront:g={fail:q.KEEP,zfail:q.KEEP,zpass:q.KEEP},opBack:y={fail:q.KEEP,zfail:q.KEEP,zpass:q.KEEP}}=a||{};return{enable:!!i,mask:c,func:Vv(Da({},f),{cmp:zM[f.cmp]}),opFront:{fail:Qc[g.fail],zfail:Qc[g.zfail],zpass:Qc[g.zpass]},opBack:{fail:Qc[y.fail],zfail:Qc[y.zfail],zpass:Qc[y.zpass]}}}getColorMaskDrawParams({stencil:a},i){return a!=null&&a.enable&&a.opFront&&!i?[!1,!1,!1,!1]:[!0,!0,!0,!0]}initCullDrawParams({cull:a},i){if(a){const{enable:c,face:f=q.BACK}=a;i.cull={enable:!!c,face:au[f]}}}extractUniforms(a){const i={};return Object.keys(a).forEach(c=>{this.extractUniformsRecursively(c,a[c],i,"")}),i}extractUniformsRecursively(a,i,c,f){if(i===null||typeof i=="number"||typeof i=="boolean"||Array.isArray(i)&&typeof i[0]=="number"||l3(i)||i===""||"resize"in i){c[`${f&&f+"."}${a}`]=i;return}f7(i)&&Object.keys(i).forEach(g=>{this.extractUniformsRecursively(g,i[g],c,`${f&&f+"."}${a}`)}),Array.isArray(i)&&i.forEach((g,y)=>{Object.keys(g).forEach(x=>{this.extractUniformsRecursively(x,g[x],c,`${f&&f+"."}${a}[${y}]`)})})}},WM=class{constructor(a,i){this.isDestroy=!1;const{data:c,type:f=q.UNSIGNED_BYTE,width:g,height:y,flipY:x=!1,format:w=q.RGBA,mipmap:T=!1,wrapS:P=q.CLAMP_TO_EDGE,wrapT:B=q.CLAMP_TO_EDGE,aniso:U=0,alignment:G=1,premultiplyAlpha:mt=!1,mag:Nt=q.NEAREST,min:Qt=q.NEAREST,colorSpace:ye=q.BROWSER_DEFAULT_WEBGL,x:Fe=0,y:ze=0,copy:Ve=!1}=i;this.width=g,this.height=y;const tn={width:g,height:y,type:zv[f],format:BM[w],wrapS:Uv[P],wrapT:Uv[B],mag:i3[Nt],min:i3[Qt],alignment:G,flipY:x,colorSpace:ou[ye],premultiplyAlpha:mt,aniso:U,x:Fe,y:ze,copy:Ve};c&&(tn.data=c),typeof T=="number"?tn.mipmap=r3[T]:typeof T=="boolean"&&(tn.mipmap=T),this.texture=a.texture(tn)}get(){return this.texture}update(a={}){this.texture(a)}bind(){this.texture._texture.bind()}resize({width:a,height:i}){this.texture.resize(a,i),this.width=a,this.height=i}getSize(){return[this.width,this.height]}destroy(){var a;this.isDestroy||(a=this.texture)==null||a.destroy(),this.isDestroy=!0}},rp=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),u3=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=a=>new np(this.gl,a),this.createAttribute=a=>new NM(this.gl,a),this.createBuffer=a=>new Zv(this.gl,a),this.createElements=a=>new a3(this.gl,a),this.createTexture2D=a=>new WM(this.gl,a),this.createFramebuffer=a=>new UM(this.gl,a),this.useFramebuffer=(a,i)=>{this.gl({framebuffer:a?a.get():null})(i)},this.useFramebufferAsync=(a,i)=>rp(this,null,function*(){this.gl({framebuffer:a?a.get():null})(i)}),this.clear=a=>{var i;const{color:c,depth:f,stencil:g,framebuffer:y=null}=a,x={color:c,depth:f,stencil:g};x.framebuffer=y===null?y:y.get(),(i=this.gl)==null||i.clear(x)},this.viewport=({x:a,y:i,width:c,height:f})=>{this.gl._gl.viewport(a,i,c,f),this.width=c,this.height=f,this.gl._refresh()},this.readPixels=a=>{const{framebuffer:i,x:c,y:f,width:g,height:y}=a,x={x:c,y:f,width:g,height:y};return i&&(x.framebuffer=i.get()),this.gl.read(x)},this.readPixelsAsync=a=>rp(this,null,function*(){return this.readPixels(a)}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var a,i,c;this.canvas=null,(c=(i=(a=this.gl)==null?void 0:a._gl)==null?void 0:i.getExtension("WEBGL_lose_context"))==null||c.loseContext(),this.gl.destroy(),this.gl=null}}init(a,i,c){return rp(this,null,function*(){this.canvas=a,c?this.gl=c:this.gl=yield new Promise((f,g)=>{DM()({canvas:this.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,stencil:i.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(y,x)=>{(y||!x)&&g(y),f(x)}})}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")}})}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}setCustomLayerDefaults(){const a=this.getGLContext();a.disable(a.CULL_FACE)}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}beginFrame(){}endFrame(){}},GM=class{constructor(a,i){const{buffer:c,offset:f,stride:g,normalized:y,size:x,divisor:w,shaderLocation:T}=i;this.buffer=c,this.attribute={shaderLocation:T,buffer:c.get(),offset:f||0,stride:g||0,normalized:y||!1,divisor:w||0},x&&(this.attribute.size=x)}get(){return this.buffer}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},su={[q.FLOAT]:Float32Array,[q.UNSIGNED_BYTE]:Uint8Array,[q.SHORT]:Int16Array,[q.UNSIGNED_SHORT]:Uint16Array,[q.INT]:Int32Array,[q.UNSIGNED_INT]:Uint32Array},$M={[q.POINTS]:on.YV.POINTS,[q.LINES]:on.YV.LINES,[q.LINE_LOOP]:on.YV.LINES,[q.LINE_STRIP]:on.YV.LINE_STRIP,[q.TRIANGLES]:on.YV.TRIANGLES,[q.TRIANGLE_FAN]:on.YV.TRIANGLES,[q.TRIANGLE_STRIP]:on.YV.TRIANGLE_STRIP},YM={1:on.ED.F32_R,2:on.ED.F32_RG,3:on.ED.F32_RGB,4:on.ED.F32_RGBA},XM={[q.STATIC_DRAW]:on.MP.STATIC,[q.DYNAMIC_DRAW]:on.MP.DYNAMIC,[q.STREAM_DRAW]:on.MP.DYNAMIC},f3={[q.REPEAT]:on.OB.REPEAT,[q.CLAMP_TO_EDGE]:on.OB.CLAMP_TO_EDGE,[q.MIRRORED_REPEAT]:on.OB.MIRRORED_REPEAT},qM={[q.NEVER]:on.wb.NEVER,[q.ALWAYS]:on.wb.ALWAYS,[q.LESS]:on.wb.LESS,[q.LEQUAL]:on.wb.LEQUAL,[q.GREATER]:on.wb.GREATER,[q.GEQUAL]:on.wb.GEQUAL,[q.EQUAL]:on.wb.EQUAL,[q.NOTEQUAL]:on.wb.NOTEQUAL},KM={[q.FRONT]:on.Wf.FRONT,[q.BACK]:on.Wf.BACK},Wv={[q.FUNC_ADD]:on.bt.ADD,[q.MIN_EXT]:on.bt.MIN,[q.MAX_EXT]:on.bt.MAX,[q.FUNC_SUBTRACT]:on.bt.SUBSTRACT,[q.FUNC_REVERSE_SUBTRACT]:on.bt.REVERSE_SUBSTRACT},cu={[q.ZERO]:on.zi.ZERO,[q.ONE]:on.zi.ONE,[q.SRC_COLOR]:on.zi.SRC,[q.ONE_MINUS_SRC_COLOR]:on.zi.ONE_MINUS_SRC,[q.SRC_ALPHA]:on.zi.SRC_ALPHA,[q.ONE_MINUS_SRC_ALPHA]:on.zi.ONE_MINUS_SRC_ALPHA,[q.DST_COLOR]:on.zi.DST,[q.ONE_MINUS_DST_COLOR]:on.zi.ONE_MINUS_DST,[q.DST_ALPHA]:on.zi.DST_ALPHA,[q.ONE_MINUS_DST_ALPHA]:on.zi.ONE_MINUS_DST_ALPHA,[q.CONSTANT_COLOR]:on.zi.CONST,[q.ONE_MINUS_CONSTANT_COLOR]:on.zi.ONE_MINUS_CONSTANT,[q.CONSTANT_ALPHA]:on.zi.CONST,[q.ONE_MINUS_CONSTANT_ALPHA]:on.zi.ONE_MINUS_CONSTANT,[q.SRC_ALPHA_SATURATE]:on.zi.SRC_ALPHA_SATURATE},lu={[q.REPLACE]:on.Kd.REPLACE,[q.KEEP]:on.Kd.KEEP,[q.ZERO]:on.Kd.ZERO,[q.INVERT]:on.Kd.INVERT,[q.INCR]:on.Kd.INCREMENT_CLAMP,[q.DECR]:on.Kd.DECREMENT_CLAMP,[q.INCR_WRAP]:on.Kd.INCREMENT_WRAP,[q.DECR_WRAP]:on.Kd.DECREMENT_WRAP},h3={[q.ALWAYS]:on.wb.ALWAYS,[q.EQUAL]:on.wb.EQUAL,[q.GEQUAL]:on.wb.GEQUAL,[q.GREATER]:on.wb.GREATER,[q.LEQUAL]:on.wb.LEQUAL,[q.LESS]:on.wb.LESS,[q.NEVER]:on.wb.NEVER,[q.NOTEQUAL]:on.wb.NOTEQUAL},Gv={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function Gf(a){return Object.prototype.toString.call(a)in Gv}function p3(a,i){const c=a.length,f=Math.ceil(c/3),g=c+f,y=new Float32Array(g);for(let x=0;x<g;x+=4)y[x]=a[x/4*3],y[x+1]=a[x/4*3+1],y[x+2]=a[x/4*3+2],y[x+3]=i;return y}var g3=class{constructor(a,i){this.isDestroyed=!1;const{data:c,usage:f,type:g,isUBO:y,label:x}=i;let w;Gf(c)?w=c:w=new su[this.type||q.FLOAT](c),this.type=g,this.size=w.byteLength,this.buffer=a.createBuffer({viewOrSize:w,usage:y?on.FB.UNIFORM:on.FB.VERTEX,hint:XM[f||q.STATIC_DRAW]}),x&&a.setResourceName(this.buffer,x)}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:i}){let c;Gf(a)?c=a:c=new su[this.type||q.FLOAT](a),this.buffer.setSubData(i,new Uint8Array(c.buffer))}};function _r(a,i=0){return a+=i,a+=a<<10,a+=a>>>6,a>>>0}function $v(a){return a+=a<<3,a^=a>>>11,a+=a<<15,a>>>0}function Yv(){return 0}var v3=class{constructor(){this.keys=[],this.values=[]}},Lr=class{constructor(a,i){this.keyEqualFunc=a,this.keyHashFunc=i,this.buckets=new Map}findBucketIndex(a,i){for(let c=0;c<a.keys.length;c++)if(this.keyEqualFunc(i,a.keys[c]))return c;return-1}findBucket(a){const i=this.keyHashFunc(a);return this.buckets.get(i)}get(a){const i=this.findBucket(a);if(i===void 0)return null;const c=this.findBucketIndex(i,a);return c<0?null:i.values[c]}add(a,i){const c=this.keyHashFunc(a);this.buckets.get(c)===void 0&&this.buckets.set(c,new v3);const f=this.buckets.get(c);f.keys.push(a),f.values.push(i)}delete(a){const i=this.findBucket(a);if(i===void 0)return;const c=this.findBucketIndex(i,a);c!==-1&&(i.keys.splice(c,1),i.values.splice(c,1))}clear(){this.buckets.clear()}size(){let a=0;for(const i of this.buckets.values())a+=i.values.length;return a}*values(){for(const a of this.buckets.values())for(let i=a.values.length-1;i>=0;i--)yield a.values[i]}};function uu(a,i){return a=_r(a,i.blendMode),a=_r(a,i.blendSrcFactor),a=_r(a,i.blendDstFactor),a}function ip(a,i){return a=uu(a,i.rgbBlendState),a=uu(a,i.alphaBlendState),a=_r(a,i.channelWriteMask),a}function QM(a,i){return a=_r(a,i.r<<24|i.g<<16|i.b<<8|i.a),a}function nc(a,i){var c,f,g,y,x,w,T,P;for(let B=0;B<i.attachmentsState.length;B++)a=ip(a,i.attachmentsState[B]);return a=QM(a,i.blendConstant||on.Ab),a=_r(a,i.depthCompare),a=_r(a,i.depthWrite?1:0),a=_r(a,(c=i.stencilFront)==null?void 0:c.compare),a=_r(a,(f=i.stencilFront)==null?void 0:f.passOp),a=_r(a,(g=i.stencilFront)==null?void 0:g.failOp),a=_r(a,(y=i.stencilFront)==null?void 0:y.depthFailOp),a=_r(a,(x=i.stencilBack)==null?void 0:x.compare),a=_r(a,(w=i.stencilBack)==null?void 0:w.passOp),a=_r(a,(T=i.stencilBack)==null?void 0:T.failOp),a=_r(a,(P=i.stencilBack)==null?void 0:P.depthFailOp),a=_r(a,i.stencilWrite?1:0),a=_r(a,i.cullMode),a=_r(a,i.frontFace?1:0),a=_r(a,i.polygonOffset?1:0),a}function yr(a){let i=0;i=_r(i,a.program.id),a.inputLayout!==null&&(i=_r(i,a.inputLayout.id)),i=nc(i,a.megaStateDescriptor);for(let c=0;c<a.colorAttachmentFormats.length;c++)i=_r(i,a.colorAttachmentFormats[c]||0);return i=_r(i,a.depthStencilAttachmentFormat||0),$v(i)}function op(a){let i=0;if(a.samplerBindings)for(let c=0;c<a.samplerBindings.length;c++){const f=a.samplerBindings[c];f!==null&&f.texture!==null&&(i=_r(i,f.texture.id))}if(a.uniformBufferBindings)for(let c=0;c<a.uniformBufferBindings.length;c++){const f=a.uniformBufferBindings[c];f!==null&&f.buffer!==null&&(i=_r(i,f.buffer.id),i=_r(i,f.binding),i=_r(i,f.offset),i=_r(i,f.size))}if(a.storageBufferBindings)for(let c=0;c<a.storageBufferBindings.length;c++){const f=a.storageBufferBindings[c];f!==null&&f.buffer!==null&&(i=_r(i,f.buffer.id),i=_r(i,f.binding),i=_r(i,f.offset),i=_r(i,f.size))}if(a.storageTextureBindings)for(let c=0;c<a.storageTextureBindings.length;c++){const f=a.storageTextureBindings[c];f!==null&&f.texture!==null&&(i=_r(i,f.texture.id),i=_r(i,f.binding))}return $v(i)}function $f(a,i){var c,f,g,y;return((c=a.vertex)==null?void 0:c.glsl)===((f=i.vertex)==null?void 0:f.glsl)&&((g=a.fragment)==null?void 0:g.glsl)===((y=i.fragment)==null?void 0:y.glsl)}function Yf(a){var i,c;return{vertex:{glsl:(i=a.vertex)==null?void 0:i.glsl},fragment:{glsl:(c=a.fragment)==null?void 0:c.glsl}}}var rc=class{constructor(a){this.device=a,this.bindingsCache=new Lr(on.PU,op),this.renderPipelinesCache=new Lr(on.zC,yr),this.inputLayoutsCache=new Lr(on.F3,Yv),this.programCache=new Lr($f,Yv)}createBindings(a){var i;let c=this.bindingsCache.get(a);if(c===null){const f=(0,on.LJ)(a);f.uniformBufferBindings=(i=f.uniformBufferBindings)==null?void 0:i.filter(({size:g})=>g&&g>0),c=this.device.createBindings(f),this.bindingsCache.add(f,c)}return c}createRenderPipeline(a){let i=this.renderPipelinesCache.get(a);if(i===null){const c=(0,on.yA)(a);c.colorAttachmentFormats=c.colorAttachmentFormats.filter(f=>f),i=this.device.createRenderPipeline(c),this.renderPipelinesCache.add(c,i)}return i}createInputLayout(a){a.vertexBufferDescriptors=a.vertexBufferDescriptors.filter(c=>!!c);let i=this.inputLayoutsCache.get(a);if(i===null){const c=(0,on.Id)(a);i=this.device.createInputLayout(c),this.inputLayoutsCache.add(c,i)}return i}createProgram(a){let i=this.programCache.get(a);if(i===null){const c=Yf(a);i=this.device.createProgram(a),this.programCache.add(c,i)}return i}destroy(){for(const a of this.bindingsCache.values())a.destroy();for(const a of this.renderPipelinesCache.values())a.destroy();for(const a of this.inputLayoutsCache.values())a.destroy();for(const a of this.programCache.values())a.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}},Jc=class{constructor(a,i){const{data:c,type:f,count:g=0}=i;let y;Gf(c)?y=c:y=new su[this.type||q.UNSIGNED_INT](c),this.type=f,this.count=g,this.indexBuffer=a.createBuffer({viewOrSize:y,usage:on.FB.INDEX})}get(){return this.indexBuffer}subData({data:a}){let i;Gf(a)?i=a:i=new su[this.type||q.UNSIGNED_INT](a),this.indexBuffer.setSubData(0,new Uint8Array(i.buffer))}destroy(){this.indexBuffer.destroy()}};function Xf(a){return!!(a&&a.texture)}var tl=class{constructor(a,i){this.device=a,this.options=i,this.isDestroy=!1;const{wrapS:c=q.CLAMP_TO_EDGE,wrapT:f=q.CLAMP_TO_EDGE,aniso:g,mag:y=q.NEAREST,min:x=q.NEAREST}=i;this.createTexture(i),this.sampler=a.createSampler({addressModeU:f3[c],addressModeV:f3[f],minFilter:x===q.NEAREST?on.X9.POINT:on.X9.BILINEAR,magFilter:y===q.NEAREST?on.X9.POINT:on.X9.BILINEAR,mipmapFilter:on.f$.NO_MIP,maxAnisotropy:g})}createTexture(a){const{type:i=q.UNSIGNED_BYTE,width:c,height:f,flipY:g=!1,format:y=q.RGBA,alignment:x=1,usage:w=Ds.SAMPLED,unorm:T=!1,label:P}=a;let{data:B}=a;this.width=c,this.height=f;let U=on.ED.U8_RGBA_RT;if(i===q.UNSIGNED_BYTE&&y===q.RGBA)U=T?on.ED.U8_RGBA_NORM:on.ED.U8_RGBA_RT;else if(i===q.UNSIGNED_BYTE&&y===q.LUMINANCE)U=on.ED.U8_LUMINANCE;else if(i===q.FLOAT&&y===q.LUMINANCE)U=on.ED.F32_LUMINANCE;else if(i===q.FLOAT&&y===q.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(B&&(B=p3(B,0)),U=on.ED.F32_RGBA):U=on.ED.F32_RGB;else if(i===q.FLOAT&&y===q.RGBA)U=on.ED.F32_RGBA;else if(i===q.FLOAT&&y===q.RED)U=on.ED.F32_R;else throw new Error(`create texture error, type: ${i}, format: ${y}`);this.texture=this.device.createTexture({format:U,width:c,height:f,usage:w===Ds.SAMPLED?on.v2.SAMPLED:on.v2.RENDER_TARGET,pixelStore:{unpackFlipY:g,packAlignment:x},mipLevelCount:1}),P&&this.device.setResourceName(this.texture,P),B&&this.texture.setImageData([B])}get(){return this.texture}update(a){const{data:i}=a;this.texture.setImageData([i])}bind(){}resize({width:a,height:i}){(this.width!==a||this.height!==i)&&this.destroy(),this.options.width=a,this.options.height=i,this.createTexture(this.options),this.isDestroy=!1}getSize(){return[this.width,this.height]}destroy(){var a;!this.isDestroy&&!this.texture.destroyed&&((a=this.texture)==null||a.destroy()),this.isDestroy=!0}},Xv=class{constructor(a,i){this.device=a,this.options=i,this.createColorRenderTarget(),this.createDepthRenderTarget()}createColorRenderTarget(a=!1){const{width:i,height:c,color:f}=this.options;f&&(Xf(f)?(a&&f.resize({width:i,height:c}),this.colorTexture=f.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=f.width,this.height=f.height):i&&c&&(this.colorTexture=this.device.createTexture({format:on.ED.U8_RGBA_RT,usage:on.v2.RENDER_TARGET,width:i,height:c}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=i,this.height=c))}createDepthRenderTarget(a=!1){const{width:i,height:c,depth:f}=this.options;f&&(Xf(f)?(a&&f.resize({width:i,height:c}),this.depthTexture=f.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=f.width,this.height=f.height):i&&c&&(this.depthTexture=this.device.createTexture({format:on.ED.D24_S8,usage:on.v2.RENDER_TARGET,width:i,height:c}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=i,this.height=c))}get(){return this.colorRenderTarget}destroy(){var a,i;(a=this.colorRenderTarget)==null||a.destroy(),(i=this.depthRenderTarget)==null||i.destroy()}resize({width:a,height:i}){(this.width!==a||this.height!==i)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=a,this.options.height=i,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}},qv=Object.defineProperty,m3=Object.defineProperties,JM=Object.getOwnPropertyDescriptors,ap=Object.getOwnPropertySymbols,t4=Object.prototype.hasOwnProperty,y3=Object.prototype.propertyIsEnumerable,fu=(a,i,c)=>i in a?qv(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,el=(a,i)=>{for(var c in i||(i={}))t4.call(i,c)&&fu(a,c,i[c]);if(ap)for(var c of ap(i))y3.call(i,c)&&fu(a,c,i[c]);return a},sp=(a,i)=>m3(a,JM(i)),{isPlainObject:cp,isTypedArray:e4,isNil:Kv}=oi,b3=class{constructor(a,i,c){this.device=a,this.options=i,this.service=c,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];const{vs:f,fs:g,attributes:y,uniforms:x,count:w,elements:T,diagnosticDerivativeUniformityEnabled:P}=i;this.options=i;const B=P?"":this.service.viewportOrigin===on.Fp.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=c.renderCache.createProgram({vertex:{glsl:f},fragment:{glsl:g,postprocess:Nt=>B+Nt}}),x&&(this.uniforms=this.extractUniforms(x));const U=[];let G=0;Object.keys(y).forEach(Nt=>{const Qt=y[Nt],ye=Qt.get();this.vertexBuffers.push(ye.get());const{offset:Fe=0,stride:ze=0,size:Ve=1,divisor:tn=0,shaderLocation:pn=0}=Qt.attribute;U.push({arrayStride:ze||Ve*4,stepMode:on.Kz.VERTEX,attributes:[{format:YM[Ve],shaderLocation:pn,offset:Fe,divisor:tn}]}),G=ye.size/Ve}),w||(this.options.count=G),T&&(this.indexBuffer=T.get());const mt=c.renderCache.createInputLayout({vertexBufferDescriptors:U,indexBufferFormat:T?on.ED.U32_R:null,program:this.program});this.inputLayout=mt,this.pipeline=this.createPipeline(i)}createPipeline(a,i){var c;const{primitive:f=q.TRIANGLES,depth:g,cull:y,blend:x,stencil:w}=a,T=this.initDepthDrawParams({depth:g}),P=!!(T&&T.enable),B=this.initCullDrawParams({cull:y}),U=!!(B&&B.enable),G=this.getBlendDrawParams({blend:x}),mt=!!(G&&G.enable),Nt=this.getStencilDrawParams({stencil:w}),Qt=!!(Nt&&Nt.enable),ye=this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:$M[f],colorAttachmentFormats:[on.ED.U8_RGBA_RT],depthStencilAttachmentFormat:on.ED.D24_S8,megaStateDescriptor:{attachmentsState:[i?{channelWriteMask:on.GI.ALL,rgbBlendState:{blendMode:on.bt.ADD,blendSrcFactor:on.zi.ONE,blendDstFactor:on.zi.ZERO},alphaBlendState:{blendMode:on.bt.ADD,blendSrcFactor:on.zi.ONE,blendDstFactor:on.zi.ZERO}}:{channelWriteMask:Qt&&Nt.opFront.zpass===on.Kd.REPLACE?on.GI.NONE:on.GI.ALL,rgbBlendState:{blendMode:mt&&G.equation.rgb||on.bt.ADD,blendSrcFactor:mt&&G.func.srcRGB||on.zi.SRC_ALPHA,blendDstFactor:mt&&G.func.dstRGB||on.zi.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:mt&&G.equation.alpha||on.bt.ADD,blendSrcFactor:mt&&G.func.srcAlpha||on.zi.ONE,blendDstFactor:mt&&G.func.dstAlpha||on.zi.ONE}}],blendConstant:mt?on.Ab:void 0,depthWrite:P,depthCompare:P&&T.func||on.wb.LESS,cullMode:U&&B.face||on.Wf.NONE,stencilWrite:Qt,stencilFront:{compare:Qt?Nt.func.cmp:on.wb.ALWAYS,passOp:Nt.opFront.zpass,failOp:Nt.opFront.fail,depthFailOp:Nt.opFront.zfail,mask:Nt.opFront.mask},stencilBack:{compare:Qt?Nt.func.cmp:on.wb.ALWAYS,passOp:Nt.opBack.zpass,failOp:Nt.opBack.fail,depthFailOp:Nt.opBack.zfail,mask:Nt.opBack.mask}}});return Qt&&!Kv((c=w==null?void 0:w.func)==null?void 0:c.ref)&&(ye.stencilFuncReference=w.func.ref),ye}updateAttributesAndElements(){}updateAttributes(){}addUniforms(a){this.uniforms=el(el({},this.uniforms),this.extractUniforms(a))}draw(a,i){const c=el(el({},this.options),a),{count:f=0,instances:g,elements:y,uniforms:x={},uniformBuffers:w,textures:T}=c;this.uniforms=el(el({},this.uniforms),this.extractUniforms(x));const{renderPass:P,currentFramebuffer:B,width:U,height:G}=this.service;this.pipeline=this.createPipeline(c,i);const mt=this.service.device,Nt=mt.swapChainHeight;if(mt.swapChainHeight=(B==null?void 0:B.height)||G,P.setViewport(0,0,(B==null?void 0:B.width)||U,(B==null?void 0:B.height)||G),mt.swapChainHeight=Nt,P.setPipeline(this.pipeline),Kv(this.pipeline.stencilFuncReference)||P.setStencilReference(this.pipeline.stencilFuncReference),P.setVertexInput(this.inputLayout,this.vertexBuffers.map(Qt=>({buffer:Qt})),y?{buffer:this.indexBuffer,offset:0}:null),w&&(this.bindings=mt.createBindings({pipeline:this.pipeline,uniformBufferBindings:w.map((Qt,ye)=>{const Fe=Qt;return{binding:ye,buffer:Fe.get(),size:Fe.size}}),samplerBindings:T==null?void 0:T.map(Qt=>({texture:Qt.texture,sampler:Qt.sampler}))})),this.bindings&&(P.setBindings(this.bindings),Object.keys(this.uniforms).forEach(Qt=>{const ye=this.uniforms[Qt];ye instanceof tl?this.uniforms[Qt]=ye.get():ye instanceof Xv&&(this.uniforms[Qt]=ye.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),y){const Qt=y.count;Qt===0?P.draw(f,g):P.drawIndexed(Qt,g)}else P.draw(f,g)}destroy(){var a,i,c;(a=this.vertexBuffers)==null||a.forEach(f=>f.destroy()),(i=this.indexBuffer)==null||i.destroy(),(c=this.bindings)==null||c.destroy(),this.pipeline.destroy(),this.destroyed=!0}initDepthDrawParams({depth:a}){if(a)return{enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:qM[a.func||q.LESS],range:a.range||[0,1]}}getBlendDrawParams({blend:a}){const{enable:i,func:c,equation:f,color:g=[0,0,0,0]}=a||{};return{enable:!!i,func:{srcRGB:cu[c&&c.srcRGB||q.SRC_ALPHA],srcAlpha:cu[c&&c.srcAlpha||q.SRC_ALPHA],dstRGB:cu[c&&c.dstRGB||q.ONE_MINUS_SRC_ALPHA],dstAlpha:cu[c&&c.dstAlpha||q.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Wv[f&&f.rgb||q.FUNC_ADD],alpha:Wv[f&&f.alpha||q.FUNC_ADD]},color:g}}getStencilDrawParams({stencil:a}){const{enable:i,mask:c=4294967295,func:f={cmp:q.ALWAYS,ref:0,mask:4294967295},opFront:g={fail:q.KEEP,zfail:q.KEEP,zpass:q.KEEP},opBack:y={fail:q.KEEP,zfail:q.KEEP,zpass:q.KEEP}}=a||{};return{enable:!!i,mask:c,func:sp(el({},f),{cmp:h3[f.cmp]}),opFront:{fail:lu[g.fail],zfail:lu[g.zfail],zpass:lu[g.zpass],mask:f.mask},opBack:{fail:lu[y.fail],zfail:lu[y.zfail],zpass:lu[y.zpass],mask:f.mask}}}initCullDrawParams({cull:a}){if(a){const{enable:i,face:c=q.BACK}=a;return{enable:!!i,face:KM[c]}}}extractUniforms(a){const i={};return Object.keys(a).forEach(c=>{this.extractUniformsRecursively(c,a[c],i,"")}),i}extractUniformsRecursively(a,i,c,f){if(i===null||typeof i=="number"||typeof i=="boolean"||Array.isArray(i)&&typeof i[0]=="number"||e4(i)||i===""||"resize"in i){c[`${f&&f+"."}${a}`]=i;return}cp(i)&&Object.keys(i).forEach(g=>{this.extractUniformsRecursively(g,i[g],c,`${f&&f+"."}${a}`)}),Array.isArray(i)&&i.forEach((g,y)=>{Object.keys(g).forEach(x=>{this.extractUniformsRecursively(x,g[x],c,`${f&&f+"."}${a}[${y}]`)})})}};function go(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}var _3=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),{isUndefined:ia}=oi,du=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=a=>new b3(this.device,a,this),this.createAttribute=a=>new GM(this.device,a),this.createBuffer=a=>new g3(this.device,a),this.createElements=a=>new Jc(this.device,a),this.createTexture2D=a=>new tl(this.device,a),this.createFramebuffer=a=>new Xv(this.device,a),this.useFramebuffer=(a,i)=>{this.currentFramebuffer=a,this.beginFrame(),i(),this.endFrame(),this.currentFramebuffer=null},this.useFramebufferAsync=(a,i)=>_3(this,null,function*(){this.currentFramebuffer=a,this.preRenderPass=this.renderPass,this.beginFrame(),yield i(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass}),this.clear=a=>{const{color:i,depth:c,stencil:f,framebuffer:g=null}=a;if(g)g.clearOptions={color:i,depth:c,stencil:f};else{const y=this.queryVerdorInfo();if(y==="WebGL1"){const x=this.getGLContext();ia(f)?ia(c)||(x.clearDepth(c),x.clear(x.DEPTH_BUFFER_BIT)):(x.clearStencil(f),x.clear(x.STENCIL_BUFFER_BIT))}else if(y==="WebGL2"){const x=this.getGLContext();ia(f)?ia(c)||x.clearBufferfv(x.DEPTH,0,[c]):x.clearBufferiv(x.STENCIL,0,[f])}}},this.viewport=({width:a,height:i})=>{this.swapChain.configureSwapChain(a,i),this.createMainColorDepthRT(a,i),this.width=a,this.height=i},this.readPixels=a=>{const{framebuffer:i,x:c,y:f,width:g,height:y}=a,x=this.device.createReadback(),w=i.colorTexture,T=x.readTextureSync(w,c,this.viewportOrigin===on.Fp.LOWER_LEFT?f:this.height-f,g,y,new Uint8Array(g*y*4));if(this.viewportOrigin!==on.Fp.LOWER_LEFT)for(let P=0;P<T.length;P+=4){const B=T[P];T[P]=T[P+2],T[P+2]=B}return x.destroy(),T},this.readPixelsAsync=a=>_3(this,null,function*(){const{framebuffer:i,x:c,y:f,width:g,height:y}=a,x=this.device.createReadback(),w=i.colorTexture,T=yield x.readTexture(w,c,this.viewportOrigin===on.Fp.LOWER_LEFT?f:this.height-f,g,y,new Uint8Array(g*y*4));if(this.viewportOrigin!==on.Fp.LOWER_LEFT)for(let P=0;P<T.length;P+=4){const B=T[P];T[P]=T[P+2],T[P+2]=B}return x.destroy(),T}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var a;this.canvas=null,(a=this.uniformBuffers)==null||a.forEach(i=>{i.destroy()}),this.device.destroy(),this.renderCache.destroy()}}init(a,i){return _3(this,null,function*(){const{enableWebGPU:c,shaderCompilerPath:f,antialias:g}=i;this.canvas=a;const x=yield(c?new on.zo({shaderCompilerPath:f}):new on.j8({targets:["webgl2","webgl1"],antialias:g,onContextLost(T){console.warn("context lost",T)},onContextCreationError(T){console.warn("context creation error",T)},onContextRestored(T){console.warn("context restored",T)}})).createSwapChain(a);x.configureSwapChain(a.width,a.height),this.device=x.getDevice(),this.swapChain=x,this.renderCache=new rc(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;const w=this.device.gl;this.extensionObject={OES_texture_float:!go(w)&&this.device.OES_texture_float},this.createMainColorDepthRT(a.width,a.height)})}createMainColorDepthRT(a,i){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:on.ED.U8_RGBA_RT,width:a,height:i,usage:on.v2.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:on.ED.D24_S8,width:a,height:i,usage:on.v2.RENDER_TARGET}))}beginFrame(){this.device.beginFrame();const{currentFramebuffer:a,swapChain:i,mainColorRT:c,mainDepthRT:f}=this,g=a?a.colorRenderTarget:c,y=a?null:i.getOnscreenTexture(),x=a?a.depthRenderTarget:f,{color:w=[0,0,0,0],depth:T=1,stencil:P=0}=(a==null?void 0:a.clearOptions)||{},B=g?(0,on.RH)(w[0]*255,w[1]*255,w[2]*255,w[3]):on.Ab,U=x?T:void 0,G=x?P:void 0,mt=this.device.createRenderPass({colorAttachment:[g],colorResolveTo:[y],colorClearColor:[B],colorStore:[!0],depthStencilAttachment:x,depthClearValue:U,stencilClearValue:G});this.renderPass=mt}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame()}getPointSizeRange(){const a=this.device.gl;return a.getParameter(a.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}},Qv=["selectstart","selecting","selectend"],hu=class extends Sr.EventEmitter{constructor(a,i={}){super(),this.isEnable=!1,this.onDragStart=c=>{this.box.style.display="block",this.startEvent=this.endEvent=c,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragging=c=>{this.endEvent=c,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragEnd=c=>{this.endEvent=c,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent)},this.scene=a,this.options=i}get container(){return this.scene.getMapService().getMarkerContainer()}enable(){if(this.isEnable)return;const{className:a}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){const i=$i("div",void 0,this.container);i.classList.add("l7-select-box"),a&&i.classList.add(a),i.style.display="none",this.box=i}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}syncBoxBound(){const{x:a,y:i}=this.startEvent,{x:c,y:f}=this.endEvent,g=Math.min(a,c),y=Math.min(i,f),x=Math.abs(a-c),w=Math.abs(i-f);this.box.style.top=`${y}px`,this.box.style.left=`${g}px`,this.box.style.width=`${x}px`,this.box.style.height=`${w}px`}getLngLatBox(){const{lngLat:{lng:a,lat:i}}=this.startEvent,{lngLat:{lng:c,lat:f}}=this.endEvent;return IO([[a,i],[c,f]])}},mi=Object.defineProperty,Ei=Object.defineProperties,Jv=Object.getOwnPropertyDescriptors,ys=Object.getOwnPropertySymbols,lp=Object.prototype.hasOwnProperty,tm=Object.prototype.propertyIsEnumerable,xa=(a,i,c)=>i in a?mi(a,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[i]=c,em=(a,i)=>{for(var c in i||(i={}))lp.call(i,c)&&xa(a,c,i[c]);if(ys)for(var c of ys(i))tm.call(i,c)&&xa(a,c,i[c]);return a},n4=(a,i)=>Ei(a,Jv(i)),nl=(a,i,c)=>new Promise((f,g)=>{var y=T=>{try{w(c.next(T))}catch(P){g(P)}},x=T=>{try{w(c.throw(T))}catch(P){g(P)}},w=T=>T.done?f(T.value):Promise.resolve(T.value).then(y,x);w((c=c.apply(a,i)).next())}),x3=class{constructor(a){const{id:i,map:c,renderer:f="device"}=a,g=mb();this.container=g,c.setContainer(g,i),f==="regl"?g.rendererService=new u3:g.rendererService=new du,this.sceneService=g.sceneService,this.mapService=g.mapService,this.iconService=g.iconService,this.fontService=g.fontService,this.controlService=g.controlService,this.layerService=g.layerService,this.debugService=g.debugService,this.debugService.setEnable(a.debug),this.markerService=g.markerService,this.interactionService=g.interactionService,this.popupService=g.popupService,this.boxSelect=new hu(this,{}),this.initComponent(i),this.sceneService.init(a),this.initControl()}get map(){return this.mapService.map}get loaded(){return this.sceneService.loaded}getServiceContainer(){return this.container}getSize(){return this.mapService.getSize()}getMinZoom(){return this.mapService.getMinZoom()}getMaxZoom(){return this.mapService.getMaxZoom()}getType(){return this.mapService.getType()}getMapContainer(){return this.mapService.getMapContainer()}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer()}getMapService(){return this.mapService}getDebugService(){return this.debugService}exportPng(a){return nl(this,null,function*(){return this.sceneService.exportPng(a)})}exportMap(a){return nl(this,null,function*(){return this.sceneService.exportPng(a)})}registerRenderService(a){this.sceneService.loaded?new a(this).init():this.on("loaded",()=>{new a(this).init()})}setBgColor(a){this.mapService.setBgColor(a)}addLayer(a){this.loaded?this.preAddLayer(a):this.once("loaded",()=>{this.preAddLayer(a)})}preAddLayer(a){const i=Oc(this.container);if(a.setContainer(i),this.sceneService.addLayer(a),a.inited){this.initTileLayer(a);const c=this.initMask(a);this.addMask(c,a.id)}else a.on("inited",()=>{this.initTileLayer(a);const c=this.initMask(a);this.addMask(c,a.id)})}initMask(a){const{mask:i,maskfence:c,maskColor:f="#000",maskOpacity:g=0}=a.getLayerConfig();return!i||!c?void 0:new X2().source(c).shape("fill").style({color:f,opacity:g})}addMask(a,i){if(!a)return;const c=this.getLayer(i);if(c){const f=Oc(this.container);a.setContainer(f),c.addMaskLayer(a),this.sceneService.addMask(a)}else console.warn("parent layer not find!")}getPickedLayer(){return this.layerService.pickedLayerId}getLayers(){return this.layerService.getLayers()}getLayer(a){return this.layerService.getLayer(a)}getLayerByName(a){return this.layerService.getLayerByName(a)}removeLayer(a,i){return nl(this,null,function*(){yield this.layerService.remove(a,i)})}removeAllLayer(){return nl(this,null,function*(){yield this.layerService.removeAllLayers()})}render(){this.sceneService.render()}setEnableRender(a){this.layerService.setEnableRender(a)}addIconFont(a,i){this.fontService.addIconFont(a,i)}addIconFonts(a){a.forEach(([i,c])=>{this.fontService.addIconFont(i,c)})}addFontFace(a,i){this.fontService.once("fontloaded",c=>{this.emit("fontloaded",c)}),this.fontService.addFontFace(a,i)}addImage(a,i){return nl(this,null,function*(){yield this.iconService.addImage(a,i)})}hasImage(a){return this.iconService.hasImage(a)}removeImage(a){this.iconService.removeImage(a)}addIconFontGlyphs(a,i){this.fontService.addIconGlyphs(i)}addControl(a){this.controlService.addControl(a,this.container)}removeControl(a){this.controlService.removeControl(a)}getControlByName(a){return this.controlService.getControlByName(a)}addMarker(a){this.markerService.addMarker(a)}addMarkerLayer(a){this.markerService.addMarkerLayer(a)}removeMarkerLayer(a){this.markerService.removeMarkerLayer(a)}removeAllMarkers(){this.markerService.removeAllMarkers()}removeAllMakers(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}addPopup(a){this.popupService.addPopup(a)}removePopup(a){this.popupService.removePopup(a)}on(a,i){var c;Qv.includes(a)?(c=this.boxSelect)==null||c.on(a,i):Ec.includes(a)?this.sceneService.on(a,i):this.mapService.on(a,i)}once(a,i){var c;Qv.includes(a)?(c=this.boxSelect)==null||c.once(a,i):Ec.includes(a)?this.sceneService.once(a,i):this.mapService.once(a,i)}emit(a,i){Ec.indexOf(a)===-1?this.mapService.on(a,i):this.sceneService.emit(a,i)}off(a,i){var c;Qv.includes(a)?(c=this.boxSelect)==null||c.off(a,i):Ec.includes(a)?this.sceneService.off(a,i):this.mapService.off(a,i)}getZoom(){return this.mapService.getZoom()}getCenter(a){return this.mapService.getCenter(a)}setCenter(a,i){return this.mapService.setCenter(a,i)}getPitch(){return this.mapService.getPitch()}setPitch(a){return this.mapService.setPitch(a)}getRotation(){return this.mapService.getRotation()}getBounds(){return this.mapService.getBounds()}setRotation(a){this.mapService.setRotation(a)}zoomIn(){this.mapService.zoomIn()}zoomOut(){this.mapService.zoomOut()}panTo(a){this.mapService.panTo(a)}panBy(a,i){this.mapService.panBy(a,i)}getContainer(){return this.mapService.getContainer()}setZoom(a){this.mapService.setZoom(a)}fitBounds(a,i){const{fitBoundsOptions:c,animate:f}=this.sceneService.getSceneConfig();this.mapService.fitBounds(a,i||n4(em({},c),{animate:f}))}setZoomAndCenter(a,i){this.mapService.setZoomAndCenter(a,i)}setMapStyle(a){this.mapService.setMapStyle(a)}setMapStatus(a){this.mapService.setMapStatus(a)}pixelToLngLat(a){return this.mapService.pixelToLngLat(a)}lngLatToPixel(a){return this.mapService.lngLatToPixel(a)}containerToLngLat(a){return this.mapService.containerToLngLat(a)}lngLatToContainer(a){return this.mapService.lngLatToContainer(a)}destroy(){this.sceneService.destroy()}registerPostProcessingPass(a){this.container.postProcessingPass.name=new a}enableShaderPick(){this.layerService.enableShaderPick()}diasbleShaderPick(){this.layerService.disableShaderPick()}enableBoxSelect(a=!0){this.boxSelect.enable(),a&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect()})}disableBoxSelect(){this.boxSelect.disable()}static addProtocol(a,i){gn.REGISTERED_PROTOCOLS[a]=i}static removeProtocol(a){delete gn.REGISTERED_PROTOCOLS[a]}getProtocol(a){return gn.REGISTERED_PROTOCOLS[a]}startAnimate(){this.layerService.startAnimate()}stopAnimate(){this.layerService.stopAnimate()}getPointSizeRange(){return this.sceneService.getPointSizeRange()}initComponent(a){this.controlService.init({container:bO(a)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}initControl(){const{logoVisible:a,logoPosition:i}=this.sceneService.getSceneConfig();a&&this.addControl(new s_({position:i}))}initTileLayer(a){a.getSource().isTile&&(a.tileLayer=new LM(a))}},r4="2.23.0";class S3{constructor(i){(0,dt.Z)(this,"configService",void 0),(0,dt.Z)(this,"config",void 0),this.config=i}setContainer(i,c){this.configService=i.globalConfigService,i.mapConfig=(0,nn.Z)((0,nn.Z)({},this.config),{},{id:c}),i.mapService=new(this.getServiceConstructor())(i)}getServiceConstructor(){throw new Error("Method not implemented.")}}var O3=D(6158),pu=D.n(O3),nm=D(15671),rm=D(43144),im=D(82963),qf=D(61120),i4=D(60136),Kf=D(97326),oa=D(97685);function Qf(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function bo(a,i){var c=_c.fF([],i,a);return _c.bA(c,c,1/c[3]),c}function o4(a,i){var c=a%i;return c<0?i+c:c}function E3(a,i,c){return c*i+(1-c)*a}function bs(a,i){if(!a)throw new Error(i||"viewport-mercator-project: assertion failed.")}var Na=Math.PI,up=Na/4,ic=Na/180,om=180/Na,fp=512,w3=4003e4,A3=1.5;function am(a){return Math.pow(2,a)}function T3(a){return Math.log2(a)}function Jf(a,i){var c=(0,oa.Z)(a,2),f=c[0],g=c[1];bs(Number.isFinite(f)&&Number.isFinite(i)),bs(Number.isFinite(g)&&g>=-90&&g<=90,"invalid latitude"),i*=fp;var y=f*ic,x=g*ic,w=i*(y+Na)/(2*Na),T=i*(Na-Math.log(Math.tan(up+x*.5)))/(2*Na);return[w,T]}function dp(a,i){var c=(0,oa.Z)(a,2),f=c[0],g=c[1];i*=fp;var y=f/i*(2*Na)-Na,x=2*(Math.atan(Math.exp(Na-g/i*(2*Na)))-up);return[y*om,x*om]}function C3(a){var i=a.latitude;assert(Number.isFinite(i));var c=Math.cos(i*ic);return T3(w3*c)-9}function td(a){var i=a.latitude,c=a.longitude,f=a.zoom,g=a.scale,y=a.highPrecision,x=y===void 0?!1:y;g=g!==void 0?g:am(f),bs(Number.isFinite(i)&&Number.isFinite(c)&&Number.isFinite(g));var w={},T=fp*g,P=Math.cos(i*ic),B=T/360,U=B/P,G=T/w3/P;if(w.pixelsPerMeter=[G,-G,G],w.metersPerPixel=[1/G,-1/G,1/G],w.pixelsPerDegree=[B,-U,G],w.degreesPerPixel=[1/B,-1/U,1/G],x){var mt=ic*Math.tan(i*ic)/P,Nt=B*mt/2,Qt=T/w3*mt,ye=Qt/U*G;w.pixelsPerDegree2=[0,-Nt,Qt],w.pixelsPerMeter2=[ye,0,ye]}return w}function a4(a,i){var c=_slicedToArray(a,3),f=c[0],g=c[1],y=c[2],x=_slicedToArray(i,3),w=x[0],T=x[1],P=x[2],B=1,U=td({longitude:f,latitude:g,scale:B,highPrecision:!0}),G=U.pixelsPerMeter,mt=U.pixelsPerMeter2,Nt=Jf(a,B);Nt[0]+=w*(G[0]+mt[0]*T),Nt[1]+=T*(G[1]+mt[1]*T);var Qt=dp(Nt,B),ye=(y||0)+(P||0);return Number.isFinite(y)||Number.isFinite(P)?[Qt[0],Qt[1],ye]:Qt}function M3(a){var i=a.height,c=a.pitch,f=a.bearing,g=a.altitude,y=a.center,x=y===void 0?null:y,w=a.flipY,T=w===void 0?!1:w,P=Qf();return Mr.translate(P,P,[0,0,-g]),Mr.scale(P,P,[1,1,1/i]),Mr.rotateX(P,P,-c*ic),Mr.rotateZ(P,P,f*ic),T&&Mr.scale(P,P,[1,-1,1]),x&&Mr.translate(P,P,Er.tk([],x)),P}function L3(a){var i=a.width,c=a.height,f=a.altitude,g=f===void 0?A3:f,y=a.pitch,x=y===void 0?0:y,w=a.nearZMultiplier,T=w===void 0?1:w,P=a.farZMultiplier,B=P===void 0?1:P,U=x*ic,G=Math.atan(.5/g),mt=Math.sin(G)*g/Math.sin(Math.PI/2-U-G),Nt=Math.cos(Math.PI/2-U)*mt+g;return{fov:2*Math.atan(c/2/g),aspect:i/c,focalDistance:g,near:T,far:Nt*B}}function P3(a){var i=a.width,c=a.height,f=a.pitch,g=a.altitude,y=a.nearZMultiplier,x=a.farZMultiplier,w=L3({width:i,height:c,altitude:g,pitch:f,nearZMultiplier:y,farZMultiplier:x}),T=w.fov,P=w.aspect,B=w.near,U=w.far,G=Mr.perspective([],T,P,B,U);return G}function s4(a,i){var c=(0,oa.Z)(a,3),f=c[0],g=c[1],y=c[2],x=y===void 0?0:y;return bs(Number.isFinite(f)&&Number.isFinite(g)&&Number.isFinite(x)),bo(i,[f,g,x,1])}function sm(a,i){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,f=(0,oa.Z)(a,3),g=f[0],y=f[1],x=f[2];if(bs(Number.isFinite(g)&&Number.isFinite(y),"invalid pixel coordinate"),Number.isFinite(x)){var w=bo(i,[g,y,x,1]);return w}var T=bo(i,[g,y,0,1]),P=bo(i,[g,y,1,1]),B=T[2],U=P[2],G=B===U?0:((c||0)-B)/(U-B);return lr.t7([],T,P,G)}var ed=Qf(),I3=function(){function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=i.width,f=i.height,g=i.viewMatrix,y=g===void 0?ed:g,x=i.projectionMatrix,w=x===void 0?ed:x;(0,nm.Z)(this,a),this.width=c||1,this.height=f||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=y,this.projectionMatrix=w;var T=Qf();Mr.multiply(T,T,this.projectionMatrix),Mr.multiply(T,T,this.viewMatrix),this.viewProjectionMatrix=T;var P=Qf();Mr.scale(P,P,[this.width/2,-this.height/2,1]),Mr.translate(P,P,[1,-1,0]),Mr.multiply(P,P,this.viewProjectionMatrix);var B=Mr.invert(Qf(),P);if(!B)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=P,this.pixelUnprojectionMatrix=B,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,rm.Z)(a,[{key:"equals",value:function(c){return c instanceof a?c.width===this.width&&c.height===this.height&&Mr.equals(c.projectionMatrix,this.projectionMatrix)&&Mr.equals(c.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=f.topLeft,y=g===void 0?!0:g,x=this.projectPosition(c),w=s4(x,this.pixelProjectionMatrix),T=(0,oa.Z)(w,2),P=T[0],B=T[1],U=y?B:this.height-B;return c.length===2?[P,U]:[P,U,w[2]]}},{key:"unproject",value:function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=f.topLeft,y=g===void 0?!0:g,x=f.targetZ,w=(0,oa.Z)(c,3),T=w[0],P=w[1],B=w[2],U=y?P:this.height-P,G=x&&x*this.pixelsPerMeter,mt=sm([T,U,B],this.pixelUnprojectionMatrix,G),Nt=this.unprojectPosition(mt),Qt=(0,oa.Z)(Nt,3),ye=Qt[0],Fe=Qt[1],ze=Qt[2];return Number.isFinite(B)?[ye,Fe,ze]:Number.isFinite(x)?[ye,Fe,x]:[ye,Fe]}},{key:"projectPosition",value:function(c){var f=this.projectFlat(c),g=(0,oa.Z)(f,2),y=g[0],x=g[1],w=(c[2]||0)*this.pixelsPerMeter;return[y,x,w]}},{key:"unprojectPosition",value:function(c){var f=this.unprojectFlat(c),g=(0,oa.Z)(f,2),y=g[0],x=g[1],w=(c[2]||0)/this.pixelsPerMeter;return[y,x,w]}},{key:"projectFlat",value:function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return c}},{key:"unprojectFlat",value:function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return c}}]),a}();function k3(a){var i=a.width,c=a.height,f=a.bounds,g=a.minExtent,y=g===void 0?0:g,x=a.maxZoom,w=x===void 0?24:x,T=a.padding,P=T===void 0?0:T,B=a.offset,U=B===void 0?[0,0]:B,G=(0,oa.Z)(f,2),mt=(0,oa.Z)(G[0],2),Nt=mt[0],Qt=mt[1],ye=(0,oa.Z)(G[1],2),Fe=ye[0],ze=ye[1];if(Number.isFinite(P)){var Ve=P;P={top:Ve,bottom:Ve,left:Ve,right:Ve}}else bs(Number.isFinite(P.top)&&Number.isFinite(P.bottom)&&Number.isFinite(P.left)&&Number.isFinite(P.right));var tn=new hp({width:i,height:c,longitude:0,latitude:0,zoom:0}),pn=tn.project([Nt,ze]),Pn=tn.project([Fe,Qt]),Tn=[Math.max(Math.abs(Pn[0]-pn[0]),y),Math.max(Math.abs(Pn[1]-pn[1]),y)],kn=[i-P.left-P.right-Math.abs(U[0])*2,c-P.top-P.bottom-Math.abs(U[1])*2];bs(kn[0]>0&&kn[1]>0);var or=kn[0]/Tn[0],wr=kn[1]/Tn[1],qn=(P.right-P.left)/2/or,fr=(P.bottom-P.top)/2/wr,Br=[(Pn[0]+pn[0])/2+qn,(Pn[1]+pn[1])/2+fr],aa=tn.unproject(Br),rl=tn.zoom+Math.log2(Math.abs(Math.min(or,wr)));return{longitude:aa[0],latitude:aa[1],zoom:Math.min(rl,w)}}var hp=function(a){(0,i4.Z)(i,a);function i(){var c,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=f.width,y=f.height,x=f.latitude,w=x===void 0?0:x,T=f.longitude,P=T===void 0?0:T,B=f.zoom,U=B===void 0?0:B,G=f.pitch,mt=G===void 0?0:G,Nt=f.bearing,Qt=Nt===void 0?0:Nt,ye=f.altitude,Fe=ye===void 0?1.5:ye,ze=f.nearZMultiplier,Ve=f.farZMultiplier;(0,nm.Z)(this,i),g=g||1,y=y||1;var tn=am(U);Fe=Math.max(.75,Fe);var pn=Jf([P,w],tn);pn[2]=0;var Pn=P3({width:g,height:y,pitch:mt,bearing:Qt,altitude:Fe,nearZMultiplier:ze||1/y,farZMultiplier:Ve||1.01}),Tn=M3({height:y,center:pn,pitch:mt,bearing:Qt,altitude:Fe,flipY:!0});return c=(0,im.Z)(this,(0,qf.Z)(i).call(this,{width:g,height:y,viewMatrix:Tn,projectionMatrix:Pn})),c.latitude=w,c.longitude=P,c.zoom=U,c.pitch=mt,c.bearing=Qt,c.altitude=Fe,c.scale=tn,c.center=pn,c.pixelsPerMeter=td((0,Kf.Z)((0,Kf.Z)(c))).pixelsPerMeter[2],Object.freeze((0,Kf.Z)((0,Kf.Z)(c))),c}return(0,rm.Z)(i,[{key:"projectFlat",value:function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Jf(f,g)}},{key:"unprojectFlat",value:function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return dp(f,g)}},{key:"getMapCenterByLngLatPosition",value:function(f){var g=f.lngLat,y=f.pos,x=sm(y,this.pixelUnprojectionMatrix),w=Jf(g,this.scale),T=lr.IH([],w,lr.tk([],x)),P=lr.IH([],this.center,T);return dp(P,this.scale)}},{key:"getLocationAtPoint",value:function(f){var g=f.lngLat,y=f.pos;return this.getMapCenterByLngLatPosition({lngLat:g,pos:y})}},{key:"fitBounds",value:function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=this.width,x=this.height,w=k3(Object.assign({width:y,height:x,bounds:f},g)),T=w.longitude,P=w.latitude,B=w.zoom;return new i({width:y,height:x,longitude:T,latitude:P,zoom:B})}}]),i}(I3);class R3{constructor(){(0,dt.Z)(this,"viewport",new hp)}syncWithMapCamera(i){const{center:c,zoom:f,pitch:g,bearing:y,viewportHeight:x,viewportWidth:w}=i,T={width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing};this.viewport=new hp((0,nn.Z)((0,nn.Z)({},T),{},{width:w,height:x,longitude:c&&c[0],latitude:c&&c[1],zoom:f,pitch:g,bearing:y}))}getZoom(){return this.viewport.zoom}getZoomScale(){return Math.pow(2,this.getZoom())}getCenter(){return[this.viewport.longitude,this.viewport.latitude]}getProjectionMatrix(){return this.viewport.projectionMatrix}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}getViewMatrix(){return this.viewport.viewMatrix}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix}getFocalDistance(){return 1}projectFlat(i,c){return this.viewport.projectFlat(i,c)}}class D3{constructor(i){(0,dt.Z)(this,"size",1e4),this.size=i||1e4}setSize(i){this.size=i}getSize(){return[this.size,this.size]}mercatorXfromLng(i){return(180+i)/360*this.size}mercatorYfromLat(i){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360)*this.size}lngFromMercatorX(i){return i/this.size*360-180}latFromMercatorY(i){const c=180-(1-i/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(c*Math.PI/180))-90}project(i){const c=this.mercatorXfromLng(i[0]),f=this.mercatorYfromLat(i[1]);return[c,f]}unproject(i){const c=this.lngFromMercatorX(i[0]),f=this.latFromMercatorY(i[1]);return[c,f]}}const N3={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},F3={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},c4=12;class B3{constructor(i){(0,dt.Z)(this,"version","DEFAUlTMAP"),(0,dt.Z)(this,"map",void 0),(0,dt.Z)(this,"simpleMapCoord",new D3),(0,dt.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,dt.Z)(this,"config",void 0),(0,dt.Z)(this,"configService",void 0),(0,dt.Z)(this,"coordinateSystemService",void 0),(0,dt.Z)(this,"eventEmitter",void 0),(0,dt.Z)(this,"markerContainer",void 0),(0,dt.Z)(this,"cameraChangedCallback",void 0),(0,dt.Z)(this,"$mapContainer",void 0),(0,dt.Z)(this,"handleCameraChanged",c=>{const{lat:f,lng:g}=this.map.getCenter();this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:this.map.getBearing(),center:[g,f],viewportHeight:this.map.transform.height,pitch:this.map.getPitch(),viewportWidth:this.map.transform.width,zoom:this.map.getZoom(),cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}),this.config=i.mapConfig,this.configService=i.globalConfigService,this.coordinateSystemService=i.coordinateSystemService,this.eventEmitter=new Sr.EventEmitter}setBgColor(i){this.bgColor=i}addMarkerContainer(){const i=this.map.getCanvasContainer();this.markerContainer=$i("div","l7-marker-container",i),this.markerContainer.setAttribute("tabindex","-1")}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}on(i,c){Vd.indexOf(i)!==-1?this.eventEmitter.on(i,c):this.map.on(F3[i]||i,c)}off(i,c){this.map.off(F3[i]||i,c),this.eventEmitter.off(i,c)}getContainer(){return this.map.getContainer()}getMapCanvasContainer(){return this.map.getCanvasContainer()}getSize(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();const i=this.map.transform;return[i.width,i.height]}getType(){return"default"}getZoom(){return this.map.getZoom()}setZoom(i){return this.map.setZoom(i)}getCenter(){return this.map.getCenter()}setCenter(i){this.map.setCenter(i)}getPitch(){return this.map.getPitch()}getRotation(){return this.map.getBearing()}getBounds(){return this.map.getBounds().toArray()}getMinZoom(){return this.map.getMinZoom()}getMaxZoom(){return this.map.getMaxZoom()}setRotation(i){this.map.setBearing(i)}zoomIn(i,c){this.map.zoomIn(i,c)}zoomOut(i,c){this.map.zoomOut(i,c)}setPitch(i){return this.map.setPitch(i)}panTo(i){this.map.panTo(i)}panBy(i=0,c=0){this.map.panBy([i,c])}fitBounds(i,c){this.map.fitBounds(i,c)}setMaxZoom(i){this.map.setMaxZoom(i)}setMinZoom(i){this.map.setMinZoom(i)}setMapStatus(i){i.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),i.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),i.dragEnable===!1&&this.map.dragPan.disable(),i.dragEnable===!0&&this.map.dragPan.enable(),i.rotateEnable===!1&&this.map.dragRotate.disable(),i.dragEnable===!0&&this.map.dragRotate.enable(),i.keyboardEnable===!1&&this.map.keyboard.disable(),i.keyboardEnable===!0&&this.map.keyboard.enable(),i.zoomEnable===!1&&this.map.scrollZoom.disable(),i.zoomEnable===!0&&this.map.scrollZoom.enable()}setZoomAndCenter(i,c){this.map.flyTo({zoom:i,center:c})}setMapStyle(i){var c;(c=this.map)===null||c===void 0||c.setStyle(this.getMapStyleValue(i))}meterToCoord(i,c){return 1}pixelToLngLat(i){return this.map.unproject(i)}lngLatToPixel(i){return this.map.project(i)}containerToLngLat(i){return this.map.unproject(i)}lngLatToContainer(i){return this.map.project(i)}getMapStyle(){try{var i;const c=(i=this.map.getStyle().sprite)!==null&&i!==void 0?i:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(c)?c==null?void 0:c.replace(/\/\w+$/,"").replace(/sprites/,"styles"):c}catch(c){return""}}getMapStyleConfig(){return N3}getMapStyleValue(i){var c;return(c=this.getMapStyleConfig()[i])!==null&&c!==void 0?c:i}destroy(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(i,...c){this.eventEmitter.emit(i,...c)}once(i,...c){this.eventEmitter.once(i,...c)}getMapContainer(){return this.$mapContainer}exportMap(i){var c;const f=(c=this.map)===null||c===void 0?void 0:c.getCanvas();return i==="jpg"?f==null?void 0:f.toDataURL("image/jpeg"):f==null?void 0:f.toDataURL("image/png")}onCameraChanged(i){this.cameraChangedCallback=i}creatMapContainer(i){let c=i;return typeof i=="string"&&(c=document.getElementById(i)),c}updateView(i){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:i.bearing,center:i.center,viewportHeight:i.viewportHeight,pitch:i.pitch,viewportWidth:i.viewportWidth,zoom:i.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:i=!0}=this.config;this.viewport.getZoom()>c4&&i?this.coordinateSystemService.setCoordinateSystem(Hd.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Hd.LNGLAT)}}const j3=["id","attributionControl","style","token","rotation","mapInstance"];function cm(a,i){var c=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,f=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(c||f)&&(i||(i=document),!!i)){var g=i.head||i.getElementsByTagName("head")[0];if(!g){g=i.createElement("head");var y=i.body||i.getElementsByTagName("body")[0];y?y.parentNode.insertBefore(g,y):i.documentElement.appendChild(g)}var x=i.createElement("style");return x.type="text/css",x.styleSheet?x.styleSheet.cssText=a:x.appendChild(i.createTextNode(a)),g.appendChild(x),x}}cm(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=pu();let z3=0;const U3="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg";class l4 extends B3{constructor(...i){super(...i),(0,dt.Z)(this,"version","MAPBOX"),(0,dt.Z)(this,"viewport",void 0)}getType(){return"mapbox"}lngLatToCoord(i,c={x:0,y:0,z:0}){const{x:f,y:g}=this.lngLatToMercator(i,0);return[f-c.x,g-c.y]}lngLatToMercator(i,c){const{x:f=0,y:g=0,z:y=0}=window.mapboxgl.MercatorCoordinate.fromLngLat(i,c);return{x:f,y:g,z:y}}getModelMatrix(i,c,f,g=[1,1,1],y={x:0,y:0,z:0}){const x=window.mapboxgl.MercatorCoordinate.fromLngLat(i,c),w=x.meterInMercatorCoordinateUnits(),T=Mr.create();return Mr.translate(T,T,Er.al(x.x-y.x,x.y-y.y,x.z||0-y.z)),Mr.scale(T,T,Er.al(w*g[0],-w*g[1],w*g[2])),Mr.rotateX(T,T,f[0]),Mr.rotateY(T,T,f[1]),Mr.rotateZ(T,T,f[2]),T}init(){var i=this;return(0,an.Z)(function*(){const c=i.config,{id:f="map",attributionControl:g=!1,style:y="light",token:x=U3,rotation:w=0,mapInstance:T}=c,P=(0,ha.Z)(c,j3);i.viewport=new R3,!T&&!window.mapboxgl&&console.error(i.configService.getSceneWarninfo("SDK")),x===U3&&y!=="blank"&&!window.mapboxgl.accessToken&&!T&&console.warn(i.configService.getSceneWarninfo("MapToken")),!T&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=x),T?(i.map=T,i.$mapContainer=i.map.getContainer()):(i.$mapContainer=i.creatMapContainer(f),i.map=new window.mapboxgl.Map((0,nn.Z)({container:i.$mapContainer,style:i.getMapStyleValue(y),attributionControl:g,bearing:w},P))),i.map.on("load",()=>{i.handleCameraChanged()}),i.map.on("move",i.handleCameraChanged),i.handleCameraChanged()})()}destroy(){var i;(i=this.$mapContainer)===null||i===void 0||(i=i.parentNode)===null||i===void 0||i.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(i,...c){this.eventEmitter.emit(i,...c)}once(i,...c){this.eventEmitter.once(i,...c)}getMapContainer(){return this.$mapContainer}getCanvasOverlays(){var i;return(i=this.getMapContainer())===null||i===void 0?void 0:i.querySelector(".mapboxgl-canvas-container")}meterToCoord(i,c){const f=new(pu()).LngLat(i[0],i[1]),g=new(pu()).LngLat(c[0],c[1]),y=f.distanceTo(g),x=pu().MercatorCoordinate.fromLngLat({lng:i[0],lat:i[1]}),w=pu().MercatorCoordinate.fromLngLat({lng:c[0],lat:c[1]}),{x:T,y:P}=x,{x:B,y:U}=w;return Math.sqrt(Math.pow(T-B,2)+Math.pow(P-U,2))*4194304*2/y}exportMap(i){const c=this.map.getCanvas();return i==="jpg"?c==null?void 0:c.toDataURL("image/jpeg"):c==null?void 0:c.toDataURL("image/png")}creatMapContainer(i){let c=i;typeof i=="string"&&(c=document.getElementById(i));const f=document.createElement("div");return f.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,f.id="l7_mapbox_div"+z3++,c.appendChild(f),f}}function Z3(a,i){var c=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,f=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(c||f)&&(i||(i=document),!!i)){var g=i.head||i.getElementsByTagName("head")[0];if(!g){g=i.createElement("head");var y=i.body||i.getElementsByTagName("body")[0];y?y.parentNode.insertBefore(g,y):i.documentElement.appendChild(g)}var x=i.createElement("style");return x.type="text/css",x.styleSheet?x.styleSheet.cssText=a:x.appendChild(i.createTextNode(a)),g.appendChild(x),x}}Z3(`.mapboxgl-ctrl-logo {
  display: none !important;
}
`);class u4 extends S3{getServiceConstructor(){return l4}}var H3=D(67294),ur=D(85893),lm=function(i){var c=i.data,f=i.config,g=f===void 0?{}:f,y=(0,xt.hQ)();return(0,H3.useEffect)(function(){var x=new x3({id:y,map:new u4({pitch:0,style:"blank",center:[116.368652,39.93866],zoom:10.07})}),w=g.field,T=g.colors,P=T===void 0?["#D7F9F0","#B8EFE2","#A6E1E0","#83CED6","#72BED6","#64A5D3","#4D89E5","#3771D9","#0A3663"]:T,B=0,U=0;c.features.forEach(function(ye){ye.properties[w]>U&&(U=ye.properties[w]),ye.properties[w]<B&&(B=ye.properties[w])});var G=new Kh({autoFit:!0}).source(c);G.color(w,P).scale(w,{type:"quantize",domain:[B,U]}).shape("fill").style({opacity:1}).active(!0);var mt=new Zf({zIndex:2}).source(c).color("#eee").size(.8).active(!0).style({lineType:"solid",dashArray:[2,2],opacity:1});x.addLayer(G),x.addLayer(mt);var Nt=new PM({offsets:[0,0],closeButton:!1});G.on("mousemove",function(ye){Nt.setLnglat(ye.lngLat).setHTML("<span>".concat(ye.feature.properties.name,":").concat(ye&&ye.feature.properties[w]?ye.feature.properties[w]:"-","</span>")),x.addPopup(Nt)}),G.on("mouseout",function(ye){x.removePopup(Nt)});var Qt=new js({position:"bottomright"});Qt.onAdd=function(){var ye=document.createElement("div");ye.className="infolegend legend";for(var Fe=Math.floor(U/P.length),ze=0;ze<P.length;ze++)ye.innerHTML+='<i style="width: 18px;height: 18px;float: left;margin-right: 8px;opacity: 0.7;background:'+P[ze]+'"></i> '+(B+ze*Fe)+(P[ze+1]?"\u2013"+Fe*(ze+1)+"<br>":"+");return ye},x.addControl(Qt)},[]),(0,ur.jsx)("div",{id:y,style:{width:"100%",minHeight:300,position:"relative",overflow:"hidden",height:g.height}})},um=lm},53463:function(Te,fe,D){"use strict";D.r(fe),D.d(fe,{PagePanelHeader:function(){return sn},default:function(){return ct}});var xt=D(15009),st=D.n(xt),Ot=D(97857),Xt=D.n(Ot),nt=D(99289),qt=D.n(nt),jt=D(5574),Ut=D.n(jt),gt=D(97584),ee=D(38345),J=D(99956),Q=D(6466),Rt=D(52715),Tt=D(98165),Ft=D(63430),kt=D(79611),Yt=D(78677),Se=D(80652),Ie=D(48054),Ye=D(68997),un=D(71230),we=D(15746),Vt=D(83622),et=D(36447),oe=D(86250),Gt=D(48096),ke=D(53110),Me=D(27484),j=D.n(Me),Mt=D(67294),$=D(33237),Ct=D(17003),wt={pageHeaderContent:"pageHeaderContent___exWxI",avatar:"avatar___rptEO",content:"content___jBAzR",contentTitle:"contentTitle___TsVhT",extraContent:"extraContent___tNqx0",statItem:"statItem___jPU6u"},z=D(8388),ot=D(92077),Jt=D.n(ot),de=D(36942),pe=D(29393),Xe=D(54235),je=D(85893),sn=function(ue){var _e,St=(0,Rt.useModel)("@@initialState"),re=St.initialState,Pt=re.currentUser,Y=Pt&&Object.keys(Pt).length;return Y?(0,je.jsxs)("div",{className:wt.pageHeaderContent,children:[(0,je.jsx)("div",{className:wt.avatar,children:(0,je.jsx)(Ye.Z,{size:"large",src:Pt.avatar?Pt.avatar:re==null||(_e=re.settings)===null||_e===void 0||(_e=_e.adminSetting)===null||_e===void 0?void 0:_e.logo})}),(0,je.jsx)("div",{className:wt.content,children:(0,je.jsx)("div",{className:wt.contentTitle,children:(0,je.jsxs)(un.Z,{children:[(0,je.jsxs)(we.Z,{span:12,children:[(0,je.jsx)(un.Z,{children:(0,je.jsxs)(we.Z,{children:["\u4F60\u597D\uFF0C",Pt.realname?Pt.realname:Pt.name]})}),(0,je.jsx)(un.Z,{children:(0,je.jsxs)(we.Z,{children:[Pt.rolename," ",(0,je.jsx)(Vt.ZP,{shape:"circle",type:"text",onClick:function(){var V;(V=ue.flash)===null||V===void 0||V.call(ue)},icon:(0,je.jsx)(Tt.Z,{})})]})})]}),(0,je.jsx)(we.Z,{span:12,style:{textAlign:"right"},children:(0,je.jsx)(ln,{})})]})})})]}):(0,je.jsx)(Ie.Z,{avatar:!0,paragraph:{rows:1},active:!0})},ln=function(){var ue=(0,Mt.useState)(j()().format("YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss dddd")),_e=Ut()(ue,2),St=_e[0],re=_e[1],Pt=function Y(){re(j()().format("YYYY\u5E74MM\u6708DD\u65E5 HH:mm:ss dddd")),setTimeout(function(){return Y()},1e3)};return setTimeout(function(){return Pt()},1e3),(0,je.jsx)(je.Fragment,{children:St})},Zt=function(ue){var _e=ue.url,St=_e===void 0?"":_e,re=(0,Mt.useState)(),Pt=Ut()(re,2),Y=Pt[0],Dt=Pt[1],V=et.Z.useApp(),C=V.message,F=(0,Mt.useState)(),At=Ut()(F,2),Kt=At[0],ne=At[1],be=(0,Rt.useModel)("@@initialState"),Ce=be.initialState,Re=function(){var $e=qt()(st()().mark(function Ht(){var ie,te,ve,ut=arguments;return st()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return ie=ut.length>0&&ut[0]!==void 0?ut[0]:{},C.loading("\u52A0\u8F7D\u4E2D..."),H.next=4,gt.ZP.get(St,{params:Xt()(Xt()({},Kt),ie),then:function(){}});case 4:te=H.sent,ve=te.data,C.destroy(),Dt(ve);case 8:case"end":return H.stop()}},Ht)}));return function(){return $e.apply(this,arguments)}}();(0,Mt.useEffect)(function(){Re()},[]);var Le=function(Ht){var ie,te,ve=Ht.type,ut=(ie=Ht.config)===null||ie===void 0?void 0:ie.xField,k=(te=Ht.config)===null||te===void 0?void 0:te.yField;if(ve=="pie"){var H,rt;ut=Ht.config.colorField,k=Ht.config.angleField;var yt=(0,Xe.S)(Ht.data.map(function(se){return se[k]}));return(0,je.jsx)(Ft.Z,Xt()({height:280,appendPadding:10,data:Ht.data,radius:.9,label:{position:"spider",text:function(Ne){return"".concat(Ne[ut],": ").concat(Jt()(Ne[k]).format("0,0"))}},annotations:[{type:"text",style:{text:`\u603B\u8BA1
`.concat(yt),x:"50%",y:"50%",textAlign:"center",fontSize:18}}],interactions:[{type:"element-active"}],legend:(H=Ht.config)!==null&&H!==void 0&&H.legend?(rt=Ht.config)===null||rt===void 0?void 0:rt.legend:!1},Ht.config))}else if(ve=="bar"){var bt;return(0,je.jsx)(kt.Z,Xt()({xField:ut,yField:k,scale:{x:{paddingInner:.4}},data:Ht.data,tooltip:{name:(bt=Ht.config)===null||bt===void 0?void 0:bt.name,field:k}},Ht.config))}else{if(ve=="column")return(0,je.jsx)(Yt.Z,Xt()({xField:ut,yField:k,scale:{x:{paddingInner:.4}},data:Ht.data},Ht.config));if(ve=="areaMap"){var ce=Xt()({map:{type:"mapbox",style:"blank",center:[120.19382669582967,30.258134],zoom:13,pitch:0},source:{data:Ht.data,parser:{type:"geojson"}},autoFit:!0,color:{field:Ht.field,value:["#1A4397","#3165D1","#6296FE","#98B7F7","#DDE6F7","#F2F5FC"].reverse(),scale:{type:"quantile"}},style:{opacity:1,stroke:"#eee",lineWidth:.8,lineOpacity:1},state:{active:!0,select:{stroke:"blue",lineWidth:1.5,lineOpacity:.8}},label:{visible:!0,field:"name",style:{fill:"black",opacity:.5,fontSize:12,spacing:1,padding:[15,15]}},zoom:{position:"bottomright"},legend:{position:"bottomleft"}},Ht.config);return(0,je.jsx)("div",{style:{width:"100%",height:500},children:(0,je.jsx)(z.Z,{data:Ht.data,config:Ht})})}else return(0,je.jsx)(Se.Z,Xt()({smooth:!0,shapeField:"smooth",height:280,data:Ht.data,xField:"x",yField:"y",title:{visible:!0,text:Ht.title,style:{fontSize:14}},meta:{y:{alias:Ht.y}},label:{content:function(Ne){return Ne.y},position:"top",style:{fill:"#000000",opacity:.6}}},Ht.config))}},He=function $e(Ht,ie){var te;return(0,je.jsx)(oe.Z,{vertical:!0,gap:"middle",children:Ht==null||(te=Ht.row)===null||te===void 0?void 0:te.map(function(ve,ut){var k;return(0,je.jsxs)(un.Z,{gutter:[16,16],children:[ve.form?(0,je.jsx)(we.Z,{span:24,children:(0,je.jsx)(ee.Z,{bodyStyle:{padding:0},children:(0,je.jsx)(J.Z,{layoutType:"QueryFilter",columns:(0,$.ab)({initRequest:!0,columns:ve.form.columns,devEnable:!1}),initialValues:Kt||ve.form.value,onFinish:function(rt){Re(rt),console.log("onFinish",rt)}})})},ut+"form"):null,ve==null||(k=ve.col)===null||k===void 0?void 0:k.map(function(H,rt){if(H.row){var yt;return(0,je.jsx)(we.Z,{span:H.span?H.span:24/((yt=ve.col)===null||yt===void 0?void 0:yt.length),children:$e(H,ie)},rt)}else if(H.tab){var bt;return(0,je.jsx)(we.Z,{span:H.span?H.span:24/((bt=ve.col)===null||bt===void 0?void 0:bt.length),children:(0,je.jsx)(ee.Z,{style:{borderTopRightRadius:0,borderTopLeftRadius:0},children:(0,je.jsx)(Gt.Z,{style:{background:"none"},tabBarStyle:{paddingLeft:0,marginBottom:0},items:H.tab.map(function(se,Ne){return{key:Ne,label:se.title,children:se.row?$e(se,ie):ie(se,Ne,{notitle:!0})}})})},rt)},rt)}else{var ce;return(0,je.jsx)(we.Z,{span:H.span?H.span:24/((ce=ve.col)===null||ce===void 0?void 0:ce.length),children:ie(H,rt)},rt)}})]},ut)})})};return(0,je.jsx)(de.PageContainer404,{title:!1,path:ue==null?void 0:ue.path,children:(0,je.jsxs)(oe.Z,{vertical:!0,gap:"middle",children:[(0,je.jsx)(ee.Z,{children:(0,je.jsx)(sn,{flash:Re})},"headcard"),He(Y,function($e,Ht,ie){return $e.type=="card"?(0,je.jsx)(Q.Z,{style:{height:"100%"},statistic:{title:$e.title,value:$e.value,prefix:$e.prefix,suffix:$e.suffix,description:$e.href?(0,je.jsx)(Rt.Link,{to:$e.href,style:{fontSize:12},children:"\u67E5\u770B\u66F4\u591A"}):""}},Ht+"card"):$e.type=="table"?(0,je.jsx)(ee.Z,{style:{height:"100%"},children:(0,je.jsx)(ke.Z,Xt()({columns:(0,Ct.SS)({initRequest:!0,columns:$e.columns,initialState:Ce,devEnable:!1}),dataSource:$e.data,title:function(){return $e.title},rowKey:"id"},$e.props))},Ht+"table"):$e.type=="mapDots"?(0,je.jsx)(ee.Z,{title:$e.title,style:{height:"100%"},children:(0,je.jsx)(pe.rq,Xt()(Xt()({},$e.props),{},{dots:$e.data}))},Ht+"mapDots"):(0,je.jsx)(Q.Z,{style:{height:"100%"},title:ie!=null&&ie.notitle?(0,je.jsx)("div",{style:{height:20}}):$e.title,chart:Le($e)},Ht+"chart")})]})})},ct=Zt},98129:function(Te,fe,D){"use strict";var xt=D(60690);Te.exports=function(Xt){Xt=Xt||{};var nt=Xt.reporter,qt=xt.getOption(Xt,"async",!0),jt=xt.getOption(Xt,"auto",!0);jt&&!qt&&(nt&&nt.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),qt=!0);var Ut=st(),gt,ee=!1;function J(Se,Ie){!ee&&jt&&qt&&Ut.size()===0&&Tt(),Ut.add(Se,Ie)}function Q(){for(ee=!0;Ut.size();){var Se=Ut;Ut=st(),Se.process()}ee=!1}function Rt(Se){ee||(Se===void 0&&(Se=qt),gt&&(kt(gt),gt=null),Se?Tt():Q())}function Tt(){gt=Yt(Q)}function Ft(){Ut={},batchSize=0,topLevel=0,bottomLevel=0}function kt(Se){var Ie=clearTimeout;return Ie(Se)}function Yt(Se){var Ie=function(Ye){return setTimeout(Ye,0)};return Ie(Se)}return{add:J,force:Rt}};function st(){var Ot={},Xt=0,nt=0,qt=0;function jt(ee,J){J||(J=ee,ee=0),ee>nt?nt=ee:ee<qt&&(qt=ee),Ot[ee]||(Ot[ee]=[]),Ot[ee].push(J),Xt++}function Ut(){for(var ee=qt;ee<=nt;ee++)for(var J=Ot[ee],Q=0;Q<J.length;Q++){var Rt=J[Q];Rt()}}function gt(){return Xt}return{add:jt,process:Ut,size:gt}}},60690:function(Te){"use strict";var fe=Te.exports={};fe.getOption=D;function D(xt,st,Ot){var Xt=xt[st];return Xt==null&&Ot!==void 0?Ot:Xt}},8874:function(Te){"use strict";Te.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Te,fe,D){var xt=D(8874),st=D(86851),Ot=Object.hasOwnProperty,Xt=Object.create(null);for(var nt in xt)Ot.call(xt,nt)&&(Xt[xt[nt]]=nt);var qt=Te.exports={to:{},get:{}};qt.get=function(gt){var ee=gt.substring(0,3).toLowerCase(),J,Q;switch(ee){case"hsl":J=qt.get.hsl(gt),Q="hsl";break;case"hwb":J=qt.get.hwb(gt),Q="hwb";break;default:J=qt.get.rgb(gt),Q="rgb";break}return J?{model:Q,value:J}:null},qt.get.rgb=function(gt){if(!gt)return null;var ee=/^#([a-f0-9]{3,4})$/i,J=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,Q=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Rt=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Tt=/^(\w+)$/,Ft=[0,0,0,1],kt,Yt,Se;if(kt=gt.match(J)){for(Se=kt[2],kt=kt[1],Yt=0;Yt<3;Yt++){var Ie=Yt*2;Ft[Yt]=parseInt(kt.slice(Ie,Ie+2),16)}Se&&(Ft[3]=parseInt(Se,16)/255)}else if(kt=gt.match(ee)){for(kt=kt[1],Se=kt[3],Yt=0;Yt<3;Yt++)Ft[Yt]=parseInt(kt[Yt]+kt[Yt],16);Se&&(Ft[3]=parseInt(Se+Se,16)/255)}else if(kt=gt.match(Q)){for(Yt=0;Yt<3;Yt++)Ft[Yt]=parseInt(kt[Yt+1],0);kt[4]&&(kt[5]?Ft[3]=parseFloat(kt[4])*.01:Ft[3]=parseFloat(kt[4]))}else if(kt=gt.match(Rt)){for(Yt=0;Yt<3;Yt++)Ft[Yt]=Math.round(parseFloat(kt[Yt+1])*2.55);kt[4]&&(kt[5]?Ft[3]=parseFloat(kt[4])*.01:Ft[3]=parseFloat(kt[4]))}else return(kt=gt.match(Tt))?kt[1]==="transparent"?[0,0,0,0]:Ot.call(xt,kt[1])?(Ft=xt[kt[1]],Ft[3]=1,Ft):null:null;for(Yt=0;Yt<3;Yt++)Ft[Yt]=jt(Ft[Yt],0,255);return Ft[3]=jt(Ft[3],0,1),Ft},qt.get.hsl=function(gt){if(!gt)return null;var ee=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,J=gt.match(ee);if(J){var Q=parseFloat(J[4]),Rt=(parseFloat(J[1])%360+360)%360,Tt=jt(parseFloat(J[2]),0,100),Ft=jt(parseFloat(J[3]),0,100),kt=jt(isNaN(Q)?1:Q,0,1);return[Rt,Tt,Ft,kt]}return null},qt.get.hwb=function(gt){if(!gt)return null;var ee=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,J=gt.match(ee);if(J){var Q=parseFloat(J[4]),Rt=(parseFloat(J[1])%360+360)%360,Tt=jt(parseFloat(J[2]),0,100),Ft=jt(parseFloat(J[3]),0,100),kt=jt(isNaN(Q)?1:Q,0,1);return[Rt,Tt,Ft,kt]}return null},qt.to.hex=function(){var gt=st(arguments);return"#"+Ut(gt[0])+Ut(gt[1])+Ut(gt[2])+(gt[3]<1?Ut(Math.round(gt[3]*255)):"")},qt.to.rgb=function(){var gt=st(arguments);return gt.length<4||gt[3]===1?"rgb("+Math.round(gt[0])+", "+Math.round(gt[1])+", "+Math.round(gt[2])+")":"rgba("+Math.round(gt[0])+", "+Math.round(gt[1])+", "+Math.round(gt[2])+", "+gt[3]+")"},qt.to.rgb.percent=function(){var gt=st(arguments),ee=Math.round(gt[0]/255*100),J=Math.round(gt[1]/255*100),Q=Math.round(gt[2]/255*100);return gt.length<4||gt[3]===1?"rgb("+ee+"%, "+J+"%, "+Q+"%)":"rgba("+ee+"%, "+J+"%, "+Q+"%, "+gt[3]+")"},qt.to.hsl=function(){var gt=st(arguments);return gt.length<4||gt[3]===1?"hsl("+gt[0]+", "+gt[1]+"%, "+gt[2]+"%)":"hsla("+gt[0]+", "+gt[1]+"%, "+gt[2]+"%, "+gt[3]+")"},qt.to.hwb=function(){var gt=st(arguments),ee="";return gt.length>=4&&gt[3]!==1&&(ee=", "+gt[3]),"hwb("+gt[0]+", "+gt[1]+"%, "+gt[2]+"%"+ee+")"},qt.to.keyword=function(gt){return Xt[gt.slice(0,3)]};function jt(gt,ee,J){return Math.min(Math.max(ee,gt),J)}function Ut(gt){var ee=Math.round(gt).toString(16).toUpperCase();return ee.length<2?"0"+ee:ee}},9187:function(Te){"use strict";Te.exports=fe,Te.exports.default=fe;function fe($,Ct,wt){wt=wt||2;var z=Ct&&Ct.length,ot=z?Ct[0]*wt:$.length,Jt=D($,0,ot,wt,!0),de=[];if(!Jt||Jt.next===Jt.prev)return de;var pe,Xe,je,sn,ln,Zt,ct;if(z&&(Jt=jt($,Ct,Jt,wt)),$.length>80*wt){pe=je=$[0],Xe=sn=$[1];for(var zt=wt;zt<ot;zt+=wt)ln=$[zt],Zt=$[zt+1],ln<pe&&(pe=ln),Zt<Xe&&(Xe=Zt),ln>je&&(je=ln),Zt>sn&&(sn=Zt);ct=Math.max(je-pe,sn-Xe),ct=ct!==0?32767/ct:0}return st(Jt,de,wt,pe,Xe,ct,0),de}function D($,Ct,wt,z,ot){var Jt,de;if(ot===Mt($,Ct,wt,z)>0)for(Jt=Ct;Jt<wt;Jt+=z)de=ke(Jt,$[Jt],$[Jt+1],de);else for(Jt=wt-z;Jt>=Ct;Jt-=z)de=ke(Jt,$[Jt],$[Jt+1],de);return de&&Ie(de,de.next)&&(Me(de),de=de.next),de}function xt($,Ct){if(!$)return $;Ct||(Ct=$);var wt=$,z;do if(z=!1,!wt.steiner&&(Ie(wt,wt.next)||Se(wt.prev,wt,wt.next)===0)){if(Me(wt),wt=Ct=wt.prev,wt===wt.next)break;z=!0}else wt=wt.next;while(z||wt!==Ct);return Ct}function st($,Ct,wt,z,ot,Jt,de){if($){!de&&Jt&&Q($,z,ot,Jt);for(var pe=$,Xe,je;$.prev!==$.next;){if(Xe=$.prev,je=$.next,Jt?Xt($,z,ot,Jt):Ot($)){Ct.push(Xe.i/wt|0),Ct.push($.i/wt|0),Ct.push(je.i/wt|0),Me($),$=je.next,pe=je.next;continue}if($=je,$===pe){de?de===1?($=nt(xt($),Ct,wt),st($,Ct,wt,z,ot,Jt,2)):de===2&&qt($,Ct,wt,z,ot,Jt):st(xt($),Ct,wt,z,ot,Jt,1);break}}}}function Ot($){var Ct=$.prev,wt=$,z=$.next;if(Se(Ct,wt,z)>=0)return!1;for(var ot=Ct.x,Jt=wt.x,de=z.x,pe=Ct.y,Xe=wt.y,je=z.y,sn=ot<Jt?ot<de?ot:de:Jt<de?Jt:de,ln=pe<Xe?pe<je?pe:je:Xe<je?Xe:je,Zt=ot>Jt?ot>de?ot:de:Jt>de?Jt:de,ct=pe>Xe?pe>je?pe:je:Xe>je?Xe:je,zt=z.next;zt!==Ct;){if(zt.x>=sn&&zt.x<=Zt&&zt.y>=ln&&zt.y<=ct&&kt(ot,pe,Jt,Xe,de,je,zt.x,zt.y)&&Se(zt.prev,zt,zt.next)>=0)return!1;zt=zt.next}return!0}function Xt($,Ct,wt,z){var ot=$.prev,Jt=$,de=$.next;if(Se(ot,Jt,de)>=0)return!1;for(var pe=ot.x,Xe=Jt.x,je=de.x,sn=ot.y,ln=Jt.y,Zt=de.y,ct=pe<Xe?pe<je?pe:je:Xe<je?Xe:je,zt=sn<ln?sn<Zt?sn:Zt:ln<Zt?ln:Zt,ue=pe>Xe?pe>je?pe:je:Xe>je?Xe:je,_e=sn>ln?sn>Zt?sn:Zt:ln>Zt?ln:Zt,St=Tt(ct,zt,Ct,wt,z),re=Tt(ue,_e,Ct,wt,z),Pt=$.prevZ,Y=$.nextZ;Pt&&Pt.z>=St&&Y&&Y.z<=re;){if(Pt.x>=ct&&Pt.x<=ue&&Pt.y>=zt&&Pt.y<=_e&&Pt!==ot&&Pt!==de&&kt(pe,sn,Xe,ln,je,Zt,Pt.x,Pt.y)&&Se(Pt.prev,Pt,Pt.next)>=0||(Pt=Pt.prevZ,Y.x>=ct&&Y.x<=ue&&Y.y>=zt&&Y.y<=_e&&Y!==ot&&Y!==de&&kt(pe,sn,Xe,ln,je,Zt,Y.x,Y.y)&&Se(Y.prev,Y,Y.next)>=0))return!1;Y=Y.nextZ}for(;Pt&&Pt.z>=St;){if(Pt.x>=ct&&Pt.x<=ue&&Pt.y>=zt&&Pt.y<=_e&&Pt!==ot&&Pt!==de&&kt(pe,sn,Xe,ln,je,Zt,Pt.x,Pt.y)&&Se(Pt.prev,Pt,Pt.next)>=0)return!1;Pt=Pt.prevZ}for(;Y&&Y.z<=re;){if(Y.x>=ct&&Y.x<=ue&&Y.y>=zt&&Y.y<=_e&&Y!==ot&&Y!==de&&kt(pe,sn,Xe,ln,je,Zt,Y.x,Y.y)&&Se(Y.prev,Y,Y.next)>=0)return!1;Y=Y.nextZ}return!0}function nt($,Ct,wt){var z=$;do{var ot=z.prev,Jt=z.next.next;!Ie(ot,Jt)&&Ye(ot,z,z.next,Jt)&&et(ot,Jt)&&et(Jt,ot)&&(Ct.push(ot.i/wt|0),Ct.push(z.i/wt|0),Ct.push(Jt.i/wt|0),Me(z),Me(z.next),z=$=Jt),z=z.next}while(z!==$);return xt(z)}function qt($,Ct,wt,z,ot,Jt){var de=$;do{for(var pe=de.next.next;pe!==de.prev;){if(de.i!==pe.i&&Yt(de,pe)){var Xe=Gt(de,pe);de=xt(de,de.next),Xe=xt(Xe,Xe.next),st(de,Ct,wt,z,ot,Jt,0),st(Xe,Ct,wt,z,ot,Jt,0);return}pe=pe.next}de=de.next}while(de!==$)}function jt($,Ct,wt,z){var ot=[],Jt,de,pe,Xe,je;for(Jt=0,de=Ct.length;Jt<de;Jt++)pe=Ct[Jt]*z,Xe=Jt<de-1?Ct[Jt+1]*z:$.length,je=D($,pe,Xe,z,!1),je===je.next&&(je.steiner=!0),ot.push(Ft(je));for(ot.sort(Ut),Jt=0;Jt<ot.length;Jt++)wt=gt(ot[Jt],wt);return wt}function Ut($,Ct){return $.x-Ct.x}function gt($,Ct){var wt=ee($,Ct);if(!wt)return Ct;var z=Gt(wt,$);return xt(z,z.next),xt(wt,wt.next)}function ee($,Ct){var wt=Ct,z=$.x,ot=$.y,Jt=-1/0,de;do{if(ot<=wt.y&&ot>=wt.next.y&&wt.next.y!==wt.y){var pe=wt.x+(ot-wt.y)*(wt.next.x-wt.x)/(wt.next.y-wt.y);if(pe<=z&&pe>Jt&&(Jt=pe,de=wt.x<wt.next.x?wt:wt.next,pe===z))return de}wt=wt.next}while(wt!==Ct);if(!de)return null;var Xe=de,je=de.x,sn=de.y,ln=1/0,Zt;wt=de;do z>=wt.x&&wt.x>=je&&z!==wt.x&&kt(ot<sn?z:Jt,ot,je,sn,ot<sn?Jt:z,ot,wt.x,wt.y)&&(Zt=Math.abs(ot-wt.y)/(z-wt.x),et(wt,$)&&(Zt<ln||Zt===ln&&(wt.x>de.x||wt.x===de.x&&J(de,wt)))&&(de=wt,ln=Zt)),wt=wt.next;while(wt!==Xe);return de}function J($,Ct){return Se($.prev,$,Ct.prev)<0&&Se(Ct.next,$,$.next)<0}function Q($,Ct,wt,z){var ot=$;do ot.z===0&&(ot.z=Tt(ot.x,ot.y,Ct,wt,z)),ot.prevZ=ot.prev,ot.nextZ=ot.next,ot=ot.next;while(ot!==$);ot.prevZ.nextZ=null,ot.prevZ=null,Rt(ot)}function Rt($){var Ct,wt,z,ot,Jt,de,pe,Xe,je=1;do{for(wt=$,$=null,Jt=null,de=0;wt;){for(de++,z=wt,pe=0,Ct=0;Ct<je&&(pe++,z=z.nextZ,!!z);Ct++);for(Xe=je;pe>0||Xe>0&&z;)pe!==0&&(Xe===0||!z||wt.z<=z.z)?(ot=wt,wt=wt.nextZ,pe--):(ot=z,z=z.nextZ,Xe--),Jt?Jt.nextZ=ot:$=ot,ot.prevZ=Jt,Jt=ot;wt=z}Jt.nextZ=null,je*=2}while(de>1);return $}function Tt($,Ct,wt,z,ot){return $=($-wt)*ot|0,Ct=(Ct-z)*ot|0,$=($|$<<8)&16711935,$=($|$<<4)&252645135,$=($|$<<2)&858993459,$=($|$<<1)&1431655765,Ct=(Ct|Ct<<8)&16711935,Ct=(Ct|Ct<<4)&252645135,Ct=(Ct|Ct<<2)&858993459,Ct=(Ct|Ct<<1)&1431655765,$|Ct<<1}function Ft($){var Ct=$,wt=$;do(Ct.x<wt.x||Ct.x===wt.x&&Ct.y<wt.y)&&(wt=Ct),Ct=Ct.next;while(Ct!==$);return wt}function kt($,Ct,wt,z,ot,Jt,de,pe){return(ot-de)*(Ct-pe)>=($-de)*(Jt-pe)&&($-de)*(z-pe)>=(wt-de)*(Ct-pe)&&(wt-de)*(Jt-pe)>=(ot-de)*(z-pe)}function Yt($,Ct){return $.next.i!==Ct.i&&$.prev.i!==Ct.i&&!Vt($,Ct)&&(et($,Ct)&&et(Ct,$)&&oe($,Ct)&&(Se($.prev,$,Ct.prev)||Se($,Ct.prev,Ct))||Ie($,Ct)&&Se($.prev,$,$.next)>0&&Se(Ct.prev,Ct,Ct.next)>0)}function Se($,Ct,wt){return(Ct.y-$.y)*(wt.x-Ct.x)-(Ct.x-$.x)*(wt.y-Ct.y)}function Ie($,Ct){return $.x===Ct.x&&$.y===Ct.y}function Ye($,Ct,wt,z){var ot=we(Se($,Ct,wt)),Jt=we(Se($,Ct,z)),de=we(Se(wt,z,$)),pe=we(Se(wt,z,Ct));return!!(ot!==Jt&&de!==pe||ot===0&&un($,wt,Ct)||Jt===0&&un($,z,Ct)||de===0&&un(wt,$,z)||pe===0&&un(wt,Ct,z))}function un($,Ct,wt){return Ct.x<=Math.max($.x,wt.x)&&Ct.x>=Math.min($.x,wt.x)&&Ct.y<=Math.max($.y,wt.y)&&Ct.y>=Math.min($.y,wt.y)}function we($){return $>0?1:$<0?-1:0}function Vt($,Ct){var wt=$;do{if(wt.i!==$.i&&wt.next.i!==$.i&&wt.i!==Ct.i&&wt.next.i!==Ct.i&&Ye(wt,wt.next,$,Ct))return!0;wt=wt.next}while(wt!==$);return!1}function et($,Ct){return Se($.prev,$,$.next)<0?Se($,Ct,$.next)>=0&&Se($,$.prev,Ct)>=0:Se($,Ct,$.prev)<0||Se($,$.next,Ct)<0}function oe($,Ct){var wt=$,z=!1,ot=($.x+Ct.x)/2,Jt=($.y+Ct.y)/2;do wt.y>Jt!=wt.next.y>Jt&&wt.next.y!==wt.y&&ot<(wt.next.x-wt.x)*(Jt-wt.y)/(wt.next.y-wt.y)+wt.x&&(z=!z),wt=wt.next;while(wt!==$);return z}function Gt($,Ct){var wt=new j($.i,$.x,$.y),z=new j(Ct.i,Ct.x,Ct.y),ot=$.next,Jt=Ct.prev;return $.next=Ct,Ct.prev=$,wt.next=ot,ot.prev=wt,z.next=wt,wt.prev=z,Jt.next=z,z.prev=Jt,z}function ke($,Ct,wt,z){var ot=new j($,Ct,wt);return z?(ot.next=z.next,ot.prev=z,z.next.prev=ot,z.next=ot):(ot.prev=ot,ot.next=ot),ot}function Me($){$.next.prev=$.prev,$.prev.next=$.next,$.prevZ&&($.prevZ.nextZ=$.nextZ),$.nextZ&&($.nextZ.prevZ=$.prevZ)}function j($,Ct,wt){this.i=$,this.x=Ct,this.y=wt,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}fe.deviation=function($,Ct,wt,z){var ot=Ct&&Ct.length,Jt=ot?Ct[0]*wt:$.length,de=Math.abs(Mt($,0,Jt,wt));if(ot)for(var pe=0,Xe=Ct.length;pe<Xe;pe++){var je=Ct[pe]*wt,sn=pe<Xe-1?Ct[pe+1]*wt:$.length;de-=Math.abs(Mt($,je,sn,wt))}var ln=0;for(pe=0;pe<z.length;pe+=3){var Zt=z[pe]*wt,ct=z[pe+1]*wt,zt=z[pe+2]*wt;ln+=Math.abs(($[Zt]-$[zt])*($[ct+1]-$[Zt+1])-($[Zt]-$[ct])*($[zt+1]-$[Zt+1]))}return de===0&&ln===0?0:Math.abs((ln-de)/de)};function Mt($,Ct,wt,z){for(var ot=0,Jt=Ct,de=wt-z;Jt<wt;Jt+=z)ot+=($[de]-$[Jt])*($[Jt+1]+$[de+1]),de=Jt;return ot}fe.flatten=function($){for(var Ct=$[0][0].length,wt={vertices:[],holes:[],dimensions:Ct},z=0,ot=0;ot<$.length;ot++){for(var Jt=0;Jt<$[ot].length;Jt++)for(var de=0;de<Ct;de++)wt.vertices.push($[ot][Jt][de]);ot>0&&(z+=$[ot-1].length,wt.holes.push(z))}return wt}},2268:function(Te){"use strict";var fe=Te.exports={};fe.isIE=function(D){function xt(){var Ot=navigator.userAgent.toLowerCase();return Ot.indexOf("msie")!==-1||Ot.indexOf("trident")!==-1||Ot.indexOf(" edge/")!==-1}if(!xt())return!1;if(!D)return!0;var st=function(){var Ot,Xt=3,nt=document.createElement("div"),qt=nt.getElementsByTagName("i");do nt.innerHTML="<!--[if gt IE "+ ++Xt+"]><i></i><![endif]-->";while(qt[0]);return Xt>4?Xt:Ot}();return D===st},fe.isLegacyOpera=function(){return!!window.opera}},17900:function(Te){"use strict";var fe=Te.exports={};fe.forEach=function(D,xt){for(var st=0;st<D.length;st++){var Ot=xt(D[st]);if(Ot)return Ot}}},58229:function(Te,fe,D){"use strict";var xt=D(2268);Te.exports=function(st){st=st||{};var Ot=st.reporter,Xt=st.batchProcessor,nt=st.stateHandler.getState;if(!Ot)throw new Error("Missing required dependency: reporter.");function qt(J,Q){function Rt(){Q(J)}if(xt.isIE(8))nt(J).object={proxy:Rt},J.attachEvent("onresize",Rt);else{var Tt=gt(J);if(!Tt)throw new Error("Element is not detectable by this strategy.");Tt.contentDocument.defaultView.addEventListener("resize",Rt)}}function jt(J){var Q=st.important?" !important; ":"; ";return(J.join(Q)+Q).trim()}function Ut(J,Q,Rt){Rt||(Rt=Q,Q=J,J=null),J=J||{};var Tt=J.debug;function Ft(kt,Yt){var Se=jt(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),Ie=!1,Ye=window.getComputedStyle(kt),un=kt.offsetWidth,we=kt.offsetHeight;nt(kt).startSize={width:un,height:we};function Vt(){function et(){if(Ye.position==="static"){kt.style.setProperty("position","relative",J.important?"important":"");var ke=function(Me,j,Mt,$){function Ct(z){return z.replace(/[^-\d\.]/g,"")}var wt=Mt[$];wt!=="auto"&&Ct(wt)!=="0"&&(Me.warn("An element that is positioned static has style."+$+"="+wt+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+$+" will be set to 0. Element: ",j),j.style.setProperty($,"0",J.important?"important":""))};ke(Ot,kt,Ye,"top"),ke(Ot,kt,Ye,"right"),ke(Ot,kt,Ye,"bottom"),ke(Ot,kt,Ye,"left")}}function oe(){Ie||et();function ke(j,Mt){if(!j.contentDocument){var $=nt(j);$.checkForObjectDocumentTimeoutId&&window.clearTimeout($.checkForObjectDocumentTimeoutId),$.checkForObjectDocumentTimeoutId=setTimeout(function(){$.checkForObjectDocumentTimeoutId=0,ke(j,Mt)},100);return}Mt(j.contentDocument)}var Me=this;ke(Me,function(Mt){Yt(kt)})}Ye.position!==""&&(et(Ye),Ie=!0);var Gt=document.createElement("object");Gt.style.cssText=Se,Gt.tabIndex=-1,Gt.type="text/html",Gt.setAttribute("aria-hidden","true"),Gt.onload=oe,xt.isIE()||(Gt.data="about:blank"),nt(kt)&&(kt.appendChild(Gt),nt(kt).object=Gt,xt.isIE()&&(Gt.data="about:blank"))}Xt?Xt.add(Vt):Vt()}xt.isIE(8)?Rt(Q):Ft(Q,Rt)}function gt(J){return nt(J).object}function ee(J){if(nt(J)){var Q=gt(J);Q&&(xt.isIE(8)?J.detachEvent("onresize",Q.proxy):J.removeChild(Q),nt(J).checkForObjectDocumentTimeoutId&&window.clearTimeout(nt(J).checkForObjectDocumentTimeoutId),delete nt(J).object)}}return{makeDetectable:Ut,addListener:qt,uninstall:ee}}},60787:function(Te,fe,D){"use strict";var xt=D(17900).forEach;Te.exports=function(st){st=st||{};var Ot=st.reporter,Xt=st.batchProcessor,nt=st.stateHandler.getState,qt=st.stateHandler.hasState,jt=st.idHandler;if(!Xt)throw new Error("Missing required dependency: batchProcessor");if(!Ot)throw new Error("Missing required dependency: reporter.");var Ut=Rt(),gt="erd_scroll_detection_scrollbar_style",ee="erd_scroll_detection_container";function J(Vt){Tt(Vt,gt,ee)}J(window.document);function Q(Vt){var et=st.important?" !important; ":"; ";return(Vt.join(et)+et).trim()}function Rt(){var Vt=500,et=500,oe=document.createElement("div");oe.style.cssText=Q(["position: absolute","width: "+Vt*2+"px","height: "+et*2+"px","visibility: hidden","margin: 0","padding: 0"]);var Gt=document.createElement("div");Gt.style.cssText=Q(["position: absolute","width: "+Vt+"px","height: "+et+"px","overflow: scroll","visibility: none","top: "+-Vt*3+"px","left: "+-et*3+"px","visibility: hidden","margin: 0","padding: 0"]),Gt.appendChild(oe),document.body.insertBefore(Gt,document.body.firstChild);var ke=Vt-Gt.clientWidth,Me=et-Gt.clientHeight;return document.body.removeChild(Gt),{width:ke,height:Me}}function Tt(Vt,et,oe){function Gt(Mt,$){$=$||function(wt){Vt.head.appendChild(wt)};var Ct=Vt.createElement("style");return Ct.innerHTML=Mt,Ct.id=et,$(Ct),Ct}if(!Vt.getElementById(et)){var ke=oe+"_animation",Me=oe+"_animation_active",j=`/* Created by the element-resize-detector library. */
`;j+="."+oe+" > div::-webkit-scrollbar { "+Q(["display: none"])+` }

`,j+="."+Me+" { "+Q(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+ke,"animation-name: "+ke])+` }
`,j+="@-webkit-keyframes "+ke+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,j+="@keyframes "+ke+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",Gt(j)}}function Ft(Vt){Vt.className+=" "+ee+"_animation_active"}function kt(Vt,et,oe){if(Vt.addEventListener)Vt.addEventListener(et,oe);else if(Vt.attachEvent)Vt.attachEvent("on"+et,oe);else return Ot.error("[scroll] Don't know how to add event listeners.")}function Yt(Vt,et,oe){if(Vt.removeEventListener)Vt.removeEventListener(et,oe);else if(Vt.detachEvent)Vt.detachEvent("on"+et,oe);else return Ot.error("[scroll] Don't know how to remove event listeners.")}function Se(Vt){return nt(Vt).container.childNodes[0].childNodes[0].childNodes[0]}function Ie(Vt){return nt(Vt).container.childNodes[0].childNodes[0].childNodes[1]}function Ye(Vt,et){var oe=nt(Vt).listeners;if(!oe.push)throw new Error("Cannot add listener to an element that is not detectable.");nt(Vt).listeners.push(et)}function un(Vt,et,oe){oe||(oe=et,et=Vt,Vt=null),Vt=Vt||{};function Gt(){if(Vt.debug){var St=Array.prototype.slice.call(arguments);if(St.unshift(jt.get(et),"Scroll: "),Ot.log.apply)Ot.log.apply(null,St);else for(var re=0;re<St.length;re++)Ot.log(St[re])}}function ke(St){function re(Pt){var Y=Pt.getRootNode&&Pt.getRootNode().contains(Pt);return Pt===Pt.ownerDocument.body||Pt.ownerDocument.body.contains(Pt)||Y}return!re(St)||window.getComputedStyle(St)===null}function Me(St){var re=nt(St).container.childNodes[0],Pt=window.getComputedStyle(re);return!Pt.width||Pt.width.indexOf("px")===-1}function j(){var St=window.getComputedStyle(et),re={};return re.position=St.position,re.width=et.offsetWidth,re.height=et.offsetHeight,re.top=St.top,re.right=St.right,re.bottom=St.bottom,re.left=St.left,re.widthCSS=St.width,re.heightCSS=St.height,re}function Mt(){var St=j();nt(et).startSize={width:St.width,height:St.height},Gt("Element start size",nt(et).startSize)}function $(){nt(et).listeners=[]}function Ct(){if(Gt("storeStyle invoked."),!nt(et)){Gt("Aborting because element has been uninstalled");return}var St=j();nt(et).style=St}function wt(St,re,Pt){nt(St).lastWidth=re,nt(St).lastHeight=Pt}function z(St){return Se(St).childNodes[0]}function ot(){return 2*Ut.width+1}function Jt(){return 2*Ut.height+1}function de(St){return St+10+ot()}function pe(St){return St+10+Jt()}function Xe(St){return St*2+ot()}function je(St){return St*2+Jt()}function sn(St,re,Pt){var Y=Se(St),Dt=Ie(St),V=de(re),C=pe(Pt),F=Xe(re),At=je(Pt);Y.scrollLeft=V,Y.scrollTop=C,Dt.scrollLeft=F,Dt.scrollTop=At}function ln(){var St=nt(et).container;if(!St){St=document.createElement("div"),St.className=ee,St.style.cssText=Q(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),nt(et).container=St,Ft(St),et.appendChild(St);var re=function(){nt(et).onRendered&&nt(et).onRendered()};kt(St,"animationstart",re),nt(et).onAnimationStart=re}return St}function Zt(){function St(){var te=nt(et).style;if(te.position==="static"){et.style.setProperty("position","relative",Vt.important?"important":"");var ve=function(ut,k,H,rt){function yt(ce){return ce.replace(/[^-\d\.]/g,"")}var bt=H[rt];bt!=="auto"&&yt(bt)!=="0"&&(ut.warn("An element that is positioned static has style."+rt+"="+bt+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+rt+" will be set to 0. Element: ",k),k.style[rt]=0)};ve(Ot,et,te,"top"),ve(Ot,et,te,"right"),ve(Ot,et,te,"bottom"),ve(Ot,et,te,"left")}}function re(te,ve,ut,k){return te=te?te+"px":"0",ve=ve?ve+"px":"0",ut=ut?ut+"px":"0",k=k?k+"px":"0",["left: "+te,"top: "+ve,"right: "+k,"bottom: "+ut]}if(Gt("Injecting elements"),!nt(et)){Gt("Aborting because element has been uninstalled");return}St();var Pt=nt(et).container;Pt||(Pt=ln());var Y=Ut.width,Dt=Ut.height,V=Q(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),C=Q(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(re(-(1+Y),-(1+Dt),-Dt,-Y))),F=Q(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),At=Q(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Kt=Q(["position: absolute","left: 0","top: 0"]),ne=Q(["position: absolute","width: 200%","height: 200%"]),be=document.createElement("div"),Ce=document.createElement("div"),Re=document.createElement("div"),Le=document.createElement("div"),He=document.createElement("div"),$e=document.createElement("div");be.dir="ltr",be.style.cssText=V,be.className=ee,Ce.className=ee,Ce.style.cssText=C,Re.style.cssText=F,Le.style.cssText=Kt,He.style.cssText=At,$e.style.cssText=ne,Re.appendChild(Le),He.appendChild($e),Ce.appendChild(Re),Ce.appendChild(He),be.appendChild(Ce),Pt.appendChild(be);function Ht(){var te=nt(et);te&&te.onExpand?te.onExpand():Gt("Aborting expand scroll handler: element has been uninstalled")}function ie(){var te=nt(et);te&&te.onShrink?te.onShrink():Gt("Aborting shrink scroll handler: element has been uninstalled")}kt(Re,"scroll",Ht),kt(He,"scroll",ie),nt(et).onExpandScroll=Ht,nt(et).onShrinkScroll=ie}function ct(){function St(F,At,Kt){var ne=z(F),be=de(At),Ce=pe(Kt);ne.style.setProperty("width",be+"px",Vt.important?"important":""),ne.style.setProperty("height",Ce+"px",Vt.important?"important":"")}function re(F){var At=et.offsetWidth,Kt=et.offsetHeight,ne=At!==nt(et).lastWidth||Kt!==nt(et).lastHeight;Gt("Storing current size",At,Kt),wt(et,At,Kt),Xt.add(0,function(){if(ne){if(!nt(et)){Gt("Aborting because element has been uninstalled");return}if(!Pt()){Gt("Aborting because element container has not been initialized");return}if(Vt.debug){var Ce=et.offsetWidth,Re=et.offsetHeight;(Ce!==At||Re!==Kt)&&Ot.warn(jt.get(et),"Scroll: Size changed before updating detector elements.")}St(et,At,Kt)}}),Xt.add(1,function(){if(!nt(et)){Gt("Aborting because element has been uninstalled");return}if(!Pt()){Gt("Aborting because element container has not been initialized");return}sn(et,At,Kt)}),ne&&F&&Xt.add(2,function(){if(!nt(et)){Gt("Aborting because element has been uninstalled");return}if(!Pt()){Gt("Aborting because element container has not been initialized");return}F()})}function Pt(){return!!nt(et).container}function Y(){function F(){return nt(et).lastNotifiedWidth===void 0}Gt("notifyListenersIfNeeded invoked");var At=nt(et);if(F()&&At.lastWidth===At.startSize.width&&At.lastHeight===At.startSize.height)return Gt("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(At.lastWidth===At.lastNotifiedWidth&&At.lastHeight===At.lastNotifiedHeight)return Gt("Not notifying: Size already notified");Gt("Current size not notified, notifying..."),At.lastNotifiedWidth=At.lastWidth,At.lastNotifiedHeight=At.lastHeight,xt(nt(et).listeners,function(Kt){Kt(et)})}function Dt(){if(Gt("startanimation triggered."),Me(et)){Gt("Ignoring since element is still unrendered...");return}Gt("Element rendered.");var F=Se(et),At=Ie(et);(F.scrollLeft===0||F.scrollTop===0||At.scrollLeft===0||At.scrollTop===0)&&(Gt("Scrollbars out of sync. Updating detector elements..."),re(Y))}function V(){if(Gt("Scroll detected."),Me(et)){Gt("Scroll event fired while unrendered. Ignoring...");return}re(Y)}if(Gt("registerListenersAndPositionElements invoked."),!nt(et)){Gt("Aborting because element has been uninstalled");return}nt(et).onRendered=Dt,nt(et).onExpand=V,nt(et).onShrink=V;var C=nt(et).style;St(et,C.width,C.height)}function zt(){if(Gt("finalizeDomMutation invoked."),!nt(et)){Gt("Aborting because element has been uninstalled");return}var St=nt(et).style;wt(et,St.width,St.height),sn(et,St.width,St.height)}function ue(){oe(et)}function _e(){Gt("Installing..."),$(),Mt(),Xt.add(0,Ct),Xt.add(1,Zt),Xt.add(2,ct),Xt.add(3,zt),Xt.add(4,ue)}Gt("Making detectable..."),ke(et)?(Gt("Element is detached"),ln(),Gt("Waiting until element is attached..."),nt(et).onRendered=function(){Gt("Element is now attached"),_e()}):_e()}function we(Vt){var et=nt(Vt);et&&(et.onExpandScroll&&Yt(Se(Vt),"scroll",et.onExpandScroll),et.onShrinkScroll&&Yt(Ie(Vt),"scroll",et.onShrinkScroll),et.onAnimationStart&&Yt(et.container,"animationstart",et.onAnimationStart),et.container&&Vt.removeChild(et.container))}return{makeDetectable:un,addListener:Ye,uninstall:we,initDocument:J}}},63844:function(Te,fe,D){"use strict";var xt=D(17900).forEach,st=D(68452),Ot=D(96199),Xt=D(75805),nt=D(79799),qt=D(71724),jt=D(2268),Ut=D(98129),gt=D(64258),ee=D(58229),J=D(60787);function Q(kt){return Array.isArray(kt)||kt.length!==void 0}function Rt(kt){if(Array.isArray(kt))return kt;var Yt=[];return xt(kt,function(Se){Yt.push(Se)}),Yt}function Tt(kt){return kt&&kt.nodeType===1}Te.exports=function(kt){kt=kt||{};var Yt;if(kt.idHandler)Yt={get:function(z){return kt.idHandler.get(z,!0)},set:kt.idHandler.set};else{var Se=Xt(),Ie=nt({idGenerator:Se,stateHandler:gt});Yt=Ie}var Ye=kt.reporter;if(!Ye){var un=Ye===!1;Ye=qt(un)}var we=Ft(kt,"batchProcessor",Ut({reporter:Ye})),Vt={};Vt.callOnAdd=!!Ft(kt,"callOnAdd",!0),Vt.debug=!!Ft(kt,"debug",!1);var et=Ot(Yt),oe=st({stateHandler:gt}),Gt,ke=Ft(kt,"strategy","object"),Me=Ft(kt,"important",!1),j={reporter:Ye,batchProcessor:we,stateHandler:gt,idHandler:Yt,important:Me};if(ke==="scroll"&&(jt.isLegacyOpera()?(Ye.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),ke="object"):jt.isIE(9)&&(Ye.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),ke="object")),ke==="scroll")Gt=J(j);else if(ke==="object")Gt=ee(j);else throw new Error("Invalid strategy name: "+ke);var Mt={};function $(z,ot,Jt){function de(Zt){var ct=et.get(Zt);xt(ct,function(ue){ue(Zt)})}function pe(Zt,ct,zt){et.add(ct,zt),Zt&&zt(ct)}if(Jt||(Jt=ot,ot=z,z={}),!ot)throw new Error("At least one element required.");if(!Jt)throw new Error("Listener required.");if(Tt(ot))ot=[ot];else if(Q(ot))ot=Rt(ot);else return Ye.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var Xe=0,je=Ft(z,"callOnAdd",Vt.callOnAdd),sn=Ft(z,"onReady",function(){}),ln=Ft(z,"debug",Vt.debug);xt(ot,function(ct){gt.getState(ct)||(gt.initState(ct),Yt.set(ct));var zt=Yt.get(ct);if(ln&&Ye.log("Attaching listener to element",zt,ct),!oe.isDetectable(ct)){if(ln&&Ye.log(zt,"Not detectable."),oe.isBusy(ct)){ln&&Ye.log(zt,"System busy making it detectable"),pe(je,ct,Jt),Mt[zt]=Mt[zt]||[],Mt[zt].push(function(){Xe++,Xe===ot.length&&sn()});return}return ln&&Ye.log(zt,"Making detectable..."),oe.markBusy(ct,!0),Gt.makeDetectable({debug:ln,important:Me},ct,function(_e){if(ln&&Ye.log(zt,"onElementDetectable"),gt.getState(_e)){oe.markAsDetectable(_e),oe.markBusy(_e,!1),Gt.addListener(_e,de),pe(je,_e,Jt);var St=gt.getState(_e);if(St&&St.startSize){var re=_e.offsetWidth,Pt=_e.offsetHeight;(St.startSize.width!==re||St.startSize.height!==Pt)&&de(_e)}Mt[zt]&&xt(Mt[zt],function(Y){Y()})}else ln&&Ye.log(zt,"Element uninstalled before being detectable.");delete Mt[zt],Xe++,Xe===ot.length&&sn()})}ln&&Ye.log(zt,"Already detecable, adding listener."),pe(je,ct,Jt),Xe++}),Xe===ot.length&&sn()}function Ct(z){if(!z)return Ye.error("At least one element is required.");if(Tt(z))z=[z];else if(Q(z))z=Rt(z);else return Ye.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");xt(z,function(ot){et.removeAllListeners(ot),Gt.uninstall(ot),gt.cleanState(ot)})}function wt(z){Gt.initDocument&&Gt.initDocument(z)}return{listenTo:$,removeListener:et.removeListener,removeAllListeners:et.removeAllListeners,uninstall:Ct,initDocument:wt}};function Ft(kt,Yt,Se){var Ie=kt[Yt];return Ie==null&&Se!==void 0?Se:Ie}},68452:function(Te){"use strict";Te.exports=function(fe){var D=fe.stateHandler.getState;function xt(nt){var qt=D(nt);return qt&&!!qt.isDetectable}function st(nt){D(nt).isDetectable=!0}function Ot(nt){return!!D(nt).busy}function Xt(nt,qt){D(nt).busy=!!qt}return{isDetectable:xt,markAsDetectable:st,isBusy:Ot,markBusy:Xt}}},75805:function(Te){"use strict";Te.exports=function(){var fe=1;function D(){return fe++}return{generate:D}}},79799:function(Te){"use strict";Te.exports=function(fe){var D=fe.idGenerator,xt=fe.stateHandler.getState;function st(Xt){var nt=xt(Xt);return nt&&nt.id!==void 0?nt.id:null}function Ot(Xt){var nt=xt(Xt);if(!nt)throw new Error("setId required the element to have a resize detection state.");var qt=D.generate();return nt.id=qt,qt}return{get:st,set:Ot}}},96199:function(Te){"use strict";Te.exports=function(fe){var D={};function xt(nt){var qt=fe.get(nt);return qt===void 0?[]:D[qt]||[]}function st(nt,qt){var jt=fe.get(nt);D[jt]||(D[jt]=[]),D[jt].push(qt)}function Ot(nt,qt){for(var jt=xt(nt),Ut=0,gt=jt.length;Ut<gt;++Ut)if(jt[Ut]===qt){jt.splice(Ut,1);break}}function Xt(nt){var qt=xt(nt);qt&&(qt.length=0)}return{get:xt,add:st,removeListener:Ot,removeAllListeners:Xt}}},71724:function(Te){"use strict";Te.exports=function(fe){function D(){}var xt={log:D,warn:D,error:D};if(!fe&&window.console){var st=function(Ot,Xt){Ot[Xt]=function(){var qt=console[Xt];if(qt.apply)qt.apply(console,arguments);else for(var jt=0;jt<arguments.length;jt++)qt(arguments[jt])}};st(xt,"log"),st(xt,"warn"),st(xt,"error")}return xt}},64258:function(Te){"use strict";var fe="_erd";function D(Ot){return Ot[fe]={},xt(Ot)}function xt(Ot){return Ot[fe]}function st(Ot){delete Ot[fe]}Te.exports={initState:D,getState:xt,cleanState:st}},26729:function(Te){"use strict";var fe=Object.prototype.hasOwnProperty,D="~";function xt(){}Object.create&&(xt.prototype=Object.create(null),new xt().__proto__||(D=!1));function st(qt,jt,Ut){this.fn=qt,this.context=jt,this.once=Ut||!1}function Ot(qt,jt,Ut,gt,ee){if(typeof Ut!="function")throw new TypeError("The listener must be a function");var J=new st(Ut,gt||qt,ee),Q=D?D+jt:jt;return qt._events[Q]?qt._events[Q].fn?qt._events[Q]=[qt._events[Q],J]:qt._events[Q].push(J):(qt._events[Q]=J,qt._eventsCount++),qt}function Xt(qt,jt){--qt._eventsCount===0?qt._events=new xt:delete qt._events[jt]}function nt(){this._events=new xt,this._eventsCount=0}nt.prototype.eventNames=function(){var jt=[],Ut,gt;if(this._eventsCount===0)return jt;for(gt in Ut=this._events)fe.call(Ut,gt)&&jt.push(D?gt.slice(1):gt);return Object.getOwnPropertySymbols?jt.concat(Object.getOwnPropertySymbols(Ut)):jt},nt.prototype.listeners=function(jt){var Ut=D?D+jt:jt,gt=this._events[Ut];if(!gt)return[];if(gt.fn)return[gt.fn];for(var ee=0,J=gt.length,Q=new Array(J);ee<J;ee++)Q[ee]=gt[ee].fn;return Q},nt.prototype.listenerCount=function(jt){var Ut=D?D+jt:jt,gt=this._events[Ut];return gt?gt.fn?1:gt.length:0},nt.prototype.emit=function(jt,Ut,gt,ee,J,Q){var Rt=D?D+jt:jt;if(!this._events[Rt])return!1;var Tt=this._events[Rt],Ft=arguments.length,kt,Yt;if(Tt.fn){switch(Tt.once&&this.removeListener(jt,Tt.fn,void 0,!0),Ft){case 1:return Tt.fn.call(Tt.context),!0;case 2:return Tt.fn.call(Tt.context,Ut),!0;case 3:return Tt.fn.call(Tt.context,Ut,gt),!0;case 4:return Tt.fn.call(Tt.context,Ut,gt,ee),!0;case 5:return Tt.fn.call(Tt.context,Ut,gt,ee,J),!0;case 6:return Tt.fn.call(Tt.context,Ut,gt,ee,J,Q),!0}for(Yt=1,kt=new Array(Ft-1);Yt<Ft;Yt++)kt[Yt-1]=arguments[Yt];Tt.fn.apply(Tt.context,kt)}else{var Se=Tt.length,Ie;for(Yt=0;Yt<Se;Yt++)switch(Tt[Yt].once&&this.removeListener(jt,Tt[Yt].fn,void 0,!0),Ft){case 1:Tt[Yt].fn.call(Tt[Yt].context);break;case 2:Tt[Yt].fn.call(Tt[Yt].context,Ut);break;case 3:Tt[Yt].fn.call(Tt[Yt].context,Ut,gt);break;case 4:Tt[Yt].fn.call(Tt[Yt].context,Ut,gt,ee);break;default:if(!kt)for(Ie=1,kt=new Array(Ft-1);Ie<Ft;Ie++)kt[Ie-1]=arguments[Ie];Tt[Yt].fn.apply(Tt[Yt].context,kt)}}return!0},nt.prototype.on=function(jt,Ut,gt){return Ot(this,jt,Ut,gt,!1)},nt.prototype.once=function(jt,Ut,gt){return Ot(this,jt,Ut,gt,!0)},nt.prototype.removeListener=function(jt,Ut,gt,ee){var J=D?D+jt:jt;if(!this._events[J])return this;if(!Ut)return Xt(this,J),this;var Q=this._events[J];if(Q.fn)Q.fn===Ut&&(!ee||Q.once)&&(!gt||Q.context===gt)&&Xt(this,J);else{for(var Rt=0,Tt=[],Ft=Q.length;Rt<Ft;Rt++)(Q[Rt].fn!==Ut||ee&&!Q[Rt].once||gt&&Q[Rt].context!==gt)&&Tt.push(Q[Rt]);Tt.length?this._events[J]=Tt.length===1?Tt[0]:Tt:Xt(this,J)}return this},nt.prototype.removeAllListeners=function(jt){var Ut;return jt?(Ut=D?D+jt:jt,this._events[Ut]&&Xt(this,Ut)):(this._events=new xt,this._eventsCount=0),this},nt.prototype.off=nt.prototype.removeListener,nt.prototype.addListener=nt.prototype.on,nt.prefixed=D,nt.EventEmitter=nt,Te.exports=nt},49685:function(Te,fe,D){"use strict";D.d(fe,{Ib:function(){return xt},WT:function(){return st},yy:function(){return Xt}});var xt=1e-6,st=typeof Float32Array!="undefined"?Float32Array:Array,Ot=Math.random,Xt="zyx";function nt(Q){return Q>=0?Math.round(Q):Q%.5===0?Math.floor(Q):Math.round(Q)}function qt(Q){st=Q}var jt=Math.PI/180,Ut=180/Math.PI;function gt(Q){return Q*jt}function ee(Q){return Q*Ut}function J(Q,Rt){var Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xt;return Math.abs(Q-Rt)<=Tt*Math.max(1,Math.abs(Q),Math.abs(Rt))}},35600:function(Te,fe,D){"use strict";D.d(fe,{Ue:function(){return st},al:function(){return qt},xO:function(){return Ot}});var xt=D(49685);function st(){var z=new xt.WT(9);return xt.WT!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}function Ot(z,ot){return z[0]=ot[0],z[1]=ot[1],z[2]=ot[2],z[3]=ot[4],z[4]=ot[5],z[5]=ot[6],z[6]=ot[8],z[7]=ot[9],z[8]=ot[10],z}function Xt(z){var ot=new glMatrix.ARRAY_TYPE(9);return ot[0]=z[0],ot[1]=z[1],ot[2]=z[2],ot[3]=z[3],ot[4]=z[4],ot[5]=z[5],ot[6]=z[6],ot[7]=z[7],ot[8]=z[8],ot}function nt(z,ot){return z[0]=ot[0],z[1]=ot[1],z[2]=ot[2],z[3]=ot[3],z[4]=ot[4],z[5]=ot[5],z[6]=ot[6],z[7]=ot[7],z[8]=ot[8],z}function qt(z,ot,Jt,de,pe,Xe,je,sn,ln){var Zt=new xt.WT(9);return Zt[0]=z,Zt[1]=ot,Zt[2]=Jt,Zt[3]=de,Zt[4]=pe,Zt[5]=Xe,Zt[6]=je,Zt[7]=sn,Zt[8]=ln,Zt}function jt(z,ot,Jt,de,pe,Xe,je,sn,ln,Zt){return z[0]=ot,z[1]=Jt,z[2]=de,z[3]=pe,z[4]=Xe,z[5]=je,z[6]=sn,z[7]=ln,z[8]=Zt,z}function Ut(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=1,z[5]=0,z[6]=0,z[7]=0,z[8]=1,z}function gt(z,ot){if(z===ot){var Jt=ot[1],de=ot[2],pe=ot[5];z[1]=ot[3],z[2]=ot[6],z[3]=Jt,z[5]=ot[7],z[6]=de,z[7]=pe}else z[0]=ot[0],z[1]=ot[3],z[2]=ot[6],z[3]=ot[1],z[4]=ot[4],z[5]=ot[7],z[6]=ot[2],z[7]=ot[5],z[8]=ot[8];return z}function ee(z,ot){var Jt=ot[0],de=ot[1],pe=ot[2],Xe=ot[3],je=ot[4],sn=ot[5],ln=ot[6],Zt=ot[7],ct=ot[8],zt=ct*je-sn*Zt,ue=-ct*Xe+sn*ln,_e=Zt*Xe-je*ln,St=Jt*zt+de*ue+pe*_e;return St?(St=1/St,z[0]=zt*St,z[1]=(-ct*de+pe*Zt)*St,z[2]=(sn*de-pe*je)*St,z[3]=ue*St,z[4]=(ct*Jt-pe*ln)*St,z[5]=(-sn*Jt+pe*Xe)*St,z[6]=_e*St,z[7]=(-Zt*Jt+de*ln)*St,z[8]=(je*Jt-de*Xe)*St,z):null}function J(z,ot){var Jt=ot[0],de=ot[1],pe=ot[2],Xe=ot[3],je=ot[4],sn=ot[5],ln=ot[6],Zt=ot[7],ct=ot[8];return z[0]=je*ct-sn*Zt,z[1]=pe*Zt-de*ct,z[2]=de*sn-pe*je,z[3]=sn*ln-Xe*ct,z[4]=Jt*ct-pe*ln,z[5]=pe*Xe-Jt*sn,z[6]=Xe*Zt-je*ln,z[7]=de*ln-Jt*Zt,z[8]=Jt*je-de*Xe,z}function Q(z){var ot=z[0],Jt=z[1],de=z[2],pe=z[3],Xe=z[4],je=z[5],sn=z[6],ln=z[7],Zt=z[8];return ot*(Zt*Xe-je*ln)+Jt*(-Zt*pe+je*sn)+de*(ln*pe-Xe*sn)}function Rt(z,ot,Jt){var de=ot[0],pe=ot[1],Xe=ot[2],je=ot[3],sn=ot[4],ln=ot[5],Zt=ot[6],ct=ot[7],zt=ot[8],ue=Jt[0],_e=Jt[1],St=Jt[2],re=Jt[3],Pt=Jt[4],Y=Jt[5],Dt=Jt[6],V=Jt[7],C=Jt[8];return z[0]=ue*de+_e*je+St*Zt,z[1]=ue*pe+_e*sn+St*ct,z[2]=ue*Xe+_e*ln+St*zt,z[3]=re*de+Pt*je+Y*Zt,z[4]=re*pe+Pt*sn+Y*ct,z[5]=re*Xe+Pt*ln+Y*zt,z[6]=Dt*de+V*je+C*Zt,z[7]=Dt*pe+V*sn+C*ct,z[8]=Dt*Xe+V*ln+C*zt,z}function Tt(z,ot,Jt){var de=ot[0],pe=ot[1],Xe=ot[2],je=ot[3],sn=ot[4],ln=ot[5],Zt=ot[6],ct=ot[7],zt=ot[8],ue=Jt[0],_e=Jt[1];return z[0]=de,z[1]=pe,z[2]=Xe,z[3]=je,z[4]=sn,z[5]=ln,z[6]=ue*de+_e*je+Zt,z[7]=ue*pe+_e*sn+ct,z[8]=ue*Xe+_e*ln+zt,z}function Ft(z,ot,Jt){var de=ot[0],pe=ot[1],Xe=ot[2],je=ot[3],sn=ot[4],ln=ot[5],Zt=ot[6],ct=ot[7],zt=ot[8],ue=Math.sin(Jt),_e=Math.cos(Jt);return z[0]=_e*de+ue*je,z[1]=_e*pe+ue*sn,z[2]=_e*Xe+ue*ln,z[3]=_e*je-ue*de,z[4]=_e*sn-ue*pe,z[5]=_e*ln-ue*Xe,z[6]=Zt,z[7]=ct,z[8]=zt,z}function kt(z,ot,Jt){var de=Jt[0],pe=Jt[1];return z[0]=de*ot[0],z[1]=de*ot[1],z[2]=de*ot[2],z[3]=pe*ot[3],z[4]=pe*ot[4],z[5]=pe*ot[5],z[6]=ot[6],z[7]=ot[7],z[8]=ot[8],z}function Yt(z,ot){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=1,z[5]=0,z[6]=ot[0],z[7]=ot[1],z[8]=1,z}function Se(z,ot){var Jt=Math.sin(ot),de=Math.cos(ot);return z[0]=de,z[1]=Jt,z[2]=0,z[3]=-Jt,z[4]=de,z[5]=0,z[6]=0,z[7]=0,z[8]=1,z}function Ie(z,ot){return z[0]=ot[0],z[1]=0,z[2]=0,z[3]=0,z[4]=ot[1],z[5]=0,z[6]=0,z[7]=0,z[8]=1,z}function Ye(z,ot){return z[0]=ot[0],z[1]=ot[1],z[2]=0,z[3]=ot[2],z[4]=ot[3],z[5]=0,z[6]=ot[4],z[7]=ot[5],z[8]=1,z}function un(z,ot){var Jt=ot[0],de=ot[1],pe=ot[2],Xe=ot[3],je=Jt+Jt,sn=de+de,ln=pe+pe,Zt=Jt*je,ct=de*je,zt=de*sn,ue=pe*je,_e=pe*sn,St=pe*ln,re=Xe*je,Pt=Xe*sn,Y=Xe*ln;return z[0]=1-zt-St,z[3]=ct-Y,z[6]=ue+Pt,z[1]=ct+Y,z[4]=1-Zt-St,z[7]=_e-re,z[2]=ue-Pt,z[5]=_e+re,z[8]=1-Zt-zt,z}function we(z,ot){var Jt=ot[0],de=ot[1],pe=ot[2],Xe=ot[3],je=ot[4],sn=ot[5],ln=ot[6],Zt=ot[7],ct=ot[8],zt=ot[9],ue=ot[10],_e=ot[11],St=ot[12],re=ot[13],Pt=ot[14],Y=ot[15],Dt=Jt*sn-de*je,V=Jt*ln-pe*je,C=Jt*Zt-Xe*je,F=de*ln-pe*sn,At=de*Zt-Xe*sn,Kt=pe*Zt-Xe*ln,ne=ct*re-zt*St,be=ct*Pt-ue*St,Ce=ct*Y-_e*St,Re=zt*Pt-ue*re,Le=zt*Y-_e*re,He=ue*Y-_e*Pt,$e=Dt*He-V*Le+C*Re+F*Ce-At*be+Kt*ne;return $e?($e=1/$e,z[0]=(sn*He-ln*Le+Zt*Re)*$e,z[1]=(ln*Ce-je*He-Zt*be)*$e,z[2]=(je*Le-sn*Ce+Zt*ne)*$e,z[3]=(pe*Le-de*He-Xe*Re)*$e,z[4]=(Jt*He-pe*Ce+Xe*be)*$e,z[5]=(de*Ce-Jt*Le-Xe*ne)*$e,z[6]=(re*Kt-Pt*At+Y*F)*$e,z[7]=(Pt*C-St*Kt-Y*V)*$e,z[8]=(St*At-re*C+Y*Dt)*$e,z):null}function Vt(z,ot,Jt){return z[0]=2/ot,z[1]=0,z[2]=0,z[3]=0,z[4]=-2/Jt,z[5]=0,z[6]=-1,z[7]=1,z[8]=1,z}function et(z){return"mat3("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+")"}function oe(z){return Math.sqrt(z[0]*z[0]+z[1]*z[1]+z[2]*z[2]+z[3]*z[3]+z[4]*z[4]+z[5]*z[5]+z[6]*z[6]+z[7]*z[7]+z[8]*z[8])}function Gt(z,ot,Jt){return z[0]=ot[0]+Jt[0],z[1]=ot[1]+Jt[1],z[2]=ot[2]+Jt[2],z[3]=ot[3]+Jt[3],z[4]=ot[4]+Jt[4],z[5]=ot[5]+Jt[5],z[6]=ot[6]+Jt[6],z[7]=ot[7]+Jt[7],z[8]=ot[8]+Jt[8],z}function ke(z,ot,Jt){return z[0]=ot[0]-Jt[0],z[1]=ot[1]-Jt[1],z[2]=ot[2]-Jt[2],z[3]=ot[3]-Jt[3],z[4]=ot[4]-Jt[4],z[5]=ot[5]-Jt[5],z[6]=ot[6]-Jt[6],z[7]=ot[7]-Jt[7],z[8]=ot[8]-Jt[8],z}function Me(z,ot,Jt){return z[0]=ot[0]*Jt,z[1]=ot[1]*Jt,z[2]=ot[2]*Jt,z[3]=ot[3]*Jt,z[4]=ot[4]*Jt,z[5]=ot[5]*Jt,z[6]=ot[6]*Jt,z[7]=ot[7]*Jt,z[8]=ot[8]*Jt,z}function j(z,ot,Jt,de){return z[0]=ot[0]+Jt[0]*de,z[1]=ot[1]+Jt[1]*de,z[2]=ot[2]+Jt[2]*de,z[3]=ot[3]+Jt[3]*de,z[4]=ot[4]+Jt[4]*de,z[5]=ot[5]+Jt[5]*de,z[6]=ot[6]+Jt[6]*de,z[7]=ot[7]+Jt[7]*de,z[8]=ot[8]+Jt[8]*de,z}function Mt(z,ot){return z[0]===ot[0]&&z[1]===ot[1]&&z[2]===ot[2]&&z[3]===ot[3]&&z[4]===ot[4]&&z[5]===ot[5]&&z[6]===ot[6]&&z[7]===ot[7]&&z[8]===ot[8]}function $(z,ot){var Jt=z[0],de=z[1],pe=z[2],Xe=z[3],je=z[4],sn=z[5],ln=z[6],Zt=z[7],ct=z[8],zt=ot[0],ue=ot[1],_e=ot[2],St=ot[3],re=ot[4],Pt=ot[5],Y=ot[6],Dt=ot[7],V=ot[8];return Math.abs(Jt-zt)<=glMatrix.EPSILON*Math.max(1,Math.abs(Jt),Math.abs(zt))&&Math.abs(de-ue)<=glMatrix.EPSILON*Math.max(1,Math.abs(de),Math.abs(ue))&&Math.abs(pe-_e)<=glMatrix.EPSILON*Math.max(1,Math.abs(pe),Math.abs(_e))&&Math.abs(Xe-St)<=glMatrix.EPSILON*Math.max(1,Math.abs(Xe),Math.abs(St))&&Math.abs(je-re)<=glMatrix.EPSILON*Math.max(1,Math.abs(je),Math.abs(re))&&Math.abs(sn-Pt)<=glMatrix.EPSILON*Math.max(1,Math.abs(sn),Math.abs(Pt))&&Math.abs(ln-Y)<=glMatrix.EPSILON*Math.max(1,Math.abs(ln),Math.abs(Y))&&Math.abs(Zt-Dt)<=glMatrix.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(Dt))&&Math.abs(ct-V)<=glMatrix.EPSILON*Math.max(1,Math.abs(ct),Math.abs(V))}var Ct=null,wt=null},85975:function(Te,fe,D){"use strict";D.r(fe),D.d(fe,{add:function(){return ue},adjoint:function(){return ee},clone:function(){return Ot},copy:function(){return Xt},create:function(){return st},decompose:function(){return Mt},determinant:function(){return J},equals:function(){return Y},exactEquals:function(){return Pt},frob:function(){return zt},fromQuat:function(){return wt},fromQuat2:function(){return Gt},fromRotation:function(){return un},fromRotationTranslation:function(){return oe},fromRotationTranslationScale:function(){return $},fromRotationTranslationScaleOrigin:function(){return Ct},fromScaling:function(){return Ye},fromTranslation:function(){return Ie},fromValues:function(){return nt},fromXRotation:function(){return we},fromYRotation:function(){return Vt},fromZRotation:function(){return et},frustum:function(){return z},getRotation:function(){return j},getScaling:function(){return Me},getTranslation:function(){return ke},identity:function(){return jt},invert:function(){return gt},lookAt:function(){return ln},mul:function(){return Dt},multiply:function(){return Q},multiplyScalar:function(){return St},multiplyScalarAndAdd:function(){return re},ortho:function(){return je},orthoNO:function(){return Xe},orthoZO:function(){return sn},perspective:function(){return Jt},perspectiveFromFieldOfView:function(){return pe},perspectiveNO:function(){return ot},perspectiveZO:function(){return de},rotate:function(){return Ft},rotateX:function(){return kt},rotateY:function(){return Yt},rotateZ:function(){return Se},scale:function(){return Tt},set:function(){return qt},str:function(){return ct},sub:function(){return V},subtract:function(){return _e},targetTo:function(){return Zt},translate:function(){return Rt},transpose:function(){return Ut}});var xt=D(49685);function st(){var C=new xt.WT(16);return xt.WT!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C}function Ot(C){var F=new xt.WT(16);return F[0]=C[0],F[1]=C[1],F[2]=C[2],F[3]=C[3],F[4]=C[4],F[5]=C[5],F[6]=C[6],F[7]=C[7],F[8]=C[8],F[9]=C[9],F[10]=C[10],F[11]=C[11],F[12]=C[12],F[13]=C[13],F[14]=C[14],F[15]=C[15],F}function Xt(C,F){return C[0]=F[0],C[1]=F[1],C[2]=F[2],C[3]=F[3],C[4]=F[4],C[5]=F[5],C[6]=F[6],C[7]=F[7],C[8]=F[8],C[9]=F[9],C[10]=F[10],C[11]=F[11],C[12]=F[12],C[13]=F[13],C[14]=F[14],C[15]=F[15],C}function nt(C,F,At,Kt,ne,be,Ce,Re,Le,He,$e,Ht,ie,te,ve,ut){var k=new xt.WT(16);return k[0]=C,k[1]=F,k[2]=At,k[3]=Kt,k[4]=ne,k[5]=be,k[6]=Ce,k[7]=Re,k[8]=Le,k[9]=He,k[10]=$e,k[11]=Ht,k[12]=ie,k[13]=te,k[14]=ve,k[15]=ut,k}function qt(C,F,At,Kt,ne,be,Ce,Re,Le,He,$e,Ht,ie,te,ve,ut,k){return C[0]=F,C[1]=At,C[2]=Kt,C[3]=ne,C[4]=be,C[5]=Ce,C[6]=Re,C[7]=Le,C[8]=He,C[9]=$e,C[10]=Ht,C[11]=ie,C[12]=te,C[13]=ve,C[14]=ut,C[15]=k,C}function jt(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function Ut(C,F){if(C===F){var At=F[1],Kt=F[2],ne=F[3],be=F[6],Ce=F[7],Re=F[11];C[1]=F[4],C[2]=F[8],C[3]=F[12],C[4]=At,C[6]=F[9],C[7]=F[13],C[8]=Kt,C[9]=be,C[11]=F[14],C[12]=ne,C[13]=Ce,C[14]=Re}else C[0]=F[0],C[1]=F[4],C[2]=F[8],C[3]=F[12],C[4]=F[1],C[5]=F[5],C[6]=F[9],C[7]=F[13],C[8]=F[2],C[9]=F[6],C[10]=F[10],C[11]=F[14],C[12]=F[3],C[13]=F[7],C[14]=F[11],C[15]=F[15];return C}function gt(C,F){var At=F[0],Kt=F[1],ne=F[2],be=F[3],Ce=F[4],Re=F[5],Le=F[6],He=F[7],$e=F[8],Ht=F[9],ie=F[10],te=F[11],ve=F[12],ut=F[13],k=F[14],H=F[15],rt=At*Re-Kt*Ce,yt=At*Le-ne*Ce,bt=At*He-be*Ce,ce=Kt*Le-ne*Re,se=Kt*He-be*Re,Ne=ne*He-be*Le,Pe=$e*ut-Ht*ve,rn=$e*k-ie*ve,Oe=$e*H-te*ve,qe=Ht*k-ie*ut,fn=Ht*H-te*ut,gn=ie*H-te*k,dn=rt*gn-yt*fn+bt*qe+ce*Oe-se*rn+Ne*Pe;return dn?(dn=1/dn,C[0]=(Re*gn-Le*fn+He*qe)*dn,C[1]=(ne*fn-Kt*gn-be*qe)*dn,C[2]=(ut*Ne-k*se+H*ce)*dn,C[3]=(ie*se-Ht*Ne-te*ce)*dn,C[4]=(Le*Oe-Ce*gn-He*rn)*dn,C[5]=(At*gn-ne*Oe+be*rn)*dn,C[6]=(k*bt-ve*Ne-H*yt)*dn,C[7]=($e*Ne-ie*bt+te*yt)*dn,C[8]=(Ce*fn-Re*Oe+He*Pe)*dn,C[9]=(Kt*Oe-At*fn-be*Pe)*dn,C[10]=(ve*se-ut*bt+H*rt)*dn,C[11]=(Ht*bt-$e*se-te*rt)*dn,C[12]=(Re*rn-Ce*qe-Le*Pe)*dn,C[13]=(At*qe-Kt*rn+ne*Pe)*dn,C[14]=(ut*yt-ve*ce-k*rt)*dn,C[15]=($e*ce-Ht*yt+ie*rt)*dn,C):null}function ee(C,F){var At=F[0],Kt=F[1],ne=F[2],be=F[3],Ce=F[4],Re=F[5],Le=F[6],He=F[7],$e=F[8],Ht=F[9],ie=F[10],te=F[11],ve=F[12],ut=F[13],k=F[14],H=F[15],rt=At*Re-Kt*Ce,yt=At*Le-ne*Ce,bt=At*He-be*Ce,ce=Kt*Le-ne*Re,se=Kt*He-be*Re,Ne=ne*He-be*Le,Pe=$e*ut-Ht*ve,rn=$e*k-ie*ve,Oe=$e*H-te*ve,qe=Ht*k-ie*ut,fn=Ht*H-te*ut,gn=ie*H-te*k;return C[0]=Re*gn-Le*fn+He*qe,C[1]=ne*fn-Kt*gn-be*qe,C[2]=ut*Ne-k*se+H*ce,C[3]=ie*se-Ht*Ne-te*ce,C[4]=Le*Oe-Ce*gn-He*rn,C[5]=At*gn-ne*Oe+be*rn,C[6]=k*bt-ve*Ne-H*yt,C[7]=$e*Ne-ie*bt+te*yt,C[8]=Ce*fn-Re*Oe+He*Pe,C[9]=Kt*Oe-At*fn-be*Pe,C[10]=ve*se-ut*bt+H*rt,C[11]=Ht*bt-$e*se-te*rt,C[12]=Re*rn-Ce*qe-Le*Pe,C[13]=At*qe-Kt*rn+ne*Pe,C[14]=ut*yt-ve*ce-k*rt,C[15]=$e*ce-Ht*yt+ie*rt,C}function J(C){var F=C[0],At=C[1],Kt=C[2],ne=C[3],be=C[4],Ce=C[5],Re=C[6],Le=C[7],He=C[8],$e=C[9],Ht=C[10],ie=C[11],te=C[12],ve=C[13],ut=C[14],k=C[15],H=F*Ce-At*be,rt=F*Re-Kt*be,yt=At*Re-Kt*Ce,bt=He*ve-$e*te,ce=He*ut-Ht*te,se=$e*ut-Ht*ve,Ne=F*se-At*ce+Kt*bt,Pe=be*se-Ce*ce+Re*bt,rn=He*yt-$e*rt+Ht*H,Oe=te*yt-ve*rt+ut*H;return Le*Ne-ne*Pe+k*rn-ie*Oe}function Q(C,F,At){var Kt=F[0],ne=F[1],be=F[2],Ce=F[3],Re=F[4],Le=F[5],He=F[6],$e=F[7],Ht=F[8],ie=F[9],te=F[10],ve=F[11],ut=F[12],k=F[13],H=F[14],rt=F[15],yt=At[0],bt=At[1],ce=At[2],se=At[3];return C[0]=yt*Kt+bt*Re+ce*Ht+se*ut,C[1]=yt*ne+bt*Le+ce*ie+se*k,C[2]=yt*be+bt*He+ce*te+se*H,C[3]=yt*Ce+bt*$e+ce*ve+se*rt,yt=At[4],bt=At[5],ce=At[6],se=At[7],C[4]=yt*Kt+bt*Re+ce*Ht+se*ut,C[5]=yt*ne+bt*Le+ce*ie+se*k,C[6]=yt*be+bt*He+ce*te+se*H,C[7]=yt*Ce+bt*$e+ce*ve+se*rt,yt=At[8],bt=At[9],ce=At[10],se=At[11],C[8]=yt*Kt+bt*Re+ce*Ht+se*ut,C[9]=yt*ne+bt*Le+ce*ie+se*k,C[10]=yt*be+bt*He+ce*te+se*H,C[11]=yt*Ce+bt*$e+ce*ve+se*rt,yt=At[12],bt=At[13],ce=At[14],se=At[15],C[12]=yt*Kt+bt*Re+ce*Ht+se*ut,C[13]=yt*ne+bt*Le+ce*ie+se*k,C[14]=yt*be+bt*He+ce*te+se*H,C[15]=yt*Ce+bt*$e+ce*ve+se*rt,C}function Rt(C,F,At){var Kt=At[0],ne=At[1],be=At[2],Ce,Re,Le,He,$e,Ht,ie,te,ve,ut,k,H;return F===C?(C[12]=F[0]*Kt+F[4]*ne+F[8]*be+F[12],C[13]=F[1]*Kt+F[5]*ne+F[9]*be+F[13],C[14]=F[2]*Kt+F[6]*ne+F[10]*be+F[14],C[15]=F[3]*Kt+F[7]*ne+F[11]*be+F[15]):(Ce=F[0],Re=F[1],Le=F[2],He=F[3],$e=F[4],Ht=F[5],ie=F[6],te=F[7],ve=F[8],ut=F[9],k=F[10],H=F[11],C[0]=Ce,C[1]=Re,C[2]=Le,C[3]=He,C[4]=$e,C[5]=Ht,C[6]=ie,C[7]=te,C[8]=ve,C[9]=ut,C[10]=k,C[11]=H,C[12]=Ce*Kt+$e*ne+ve*be+F[12],C[13]=Re*Kt+Ht*ne+ut*be+F[13],C[14]=Le*Kt+ie*ne+k*be+F[14],C[15]=He*Kt+te*ne+H*be+F[15]),C}function Tt(C,F,At){var Kt=At[0],ne=At[1],be=At[2];return C[0]=F[0]*Kt,C[1]=F[1]*Kt,C[2]=F[2]*Kt,C[3]=F[3]*Kt,C[4]=F[4]*ne,C[5]=F[5]*ne,C[6]=F[6]*ne,C[7]=F[7]*ne,C[8]=F[8]*be,C[9]=F[9]*be,C[10]=F[10]*be,C[11]=F[11]*be,C[12]=F[12],C[13]=F[13],C[14]=F[14],C[15]=F[15],C}function Ft(C,F,At,Kt){var ne=Kt[0],be=Kt[1],Ce=Kt[2],Re=Math.sqrt(ne*ne+be*be+Ce*Ce),Le,He,$e,Ht,ie,te,ve,ut,k,H,rt,yt,bt,ce,se,Ne,Pe,rn,Oe,qe,fn,gn,dn,bn;return Re<xt.Ib?null:(Re=1/Re,ne*=Re,be*=Re,Ce*=Re,Le=Math.sin(At),He=Math.cos(At),$e=1-He,Ht=F[0],ie=F[1],te=F[2],ve=F[3],ut=F[4],k=F[5],H=F[6],rt=F[7],yt=F[8],bt=F[9],ce=F[10],se=F[11],Ne=ne*ne*$e+He,Pe=be*ne*$e+Ce*Le,rn=Ce*ne*$e-be*Le,Oe=ne*be*$e-Ce*Le,qe=be*be*$e+He,fn=Ce*be*$e+ne*Le,gn=ne*Ce*$e+be*Le,dn=be*Ce*$e-ne*Le,bn=Ce*Ce*$e+He,C[0]=Ht*Ne+ut*Pe+yt*rn,C[1]=ie*Ne+k*Pe+bt*rn,C[2]=te*Ne+H*Pe+ce*rn,C[3]=ve*Ne+rt*Pe+se*rn,C[4]=Ht*Oe+ut*qe+yt*fn,C[5]=ie*Oe+k*qe+bt*fn,C[6]=te*Oe+H*qe+ce*fn,C[7]=ve*Oe+rt*qe+se*fn,C[8]=Ht*gn+ut*dn+yt*bn,C[9]=ie*gn+k*dn+bt*bn,C[10]=te*gn+H*dn+ce*bn,C[11]=ve*gn+rt*dn+se*bn,F!==C&&(C[12]=F[12],C[13]=F[13],C[14]=F[14],C[15]=F[15]),C)}function kt(C,F,At){var Kt=Math.sin(At),ne=Math.cos(At),be=F[4],Ce=F[5],Re=F[6],Le=F[7],He=F[8],$e=F[9],Ht=F[10],ie=F[11];return F!==C&&(C[0]=F[0],C[1]=F[1],C[2]=F[2],C[3]=F[3],C[12]=F[12],C[13]=F[13],C[14]=F[14],C[15]=F[15]),C[4]=be*ne+He*Kt,C[5]=Ce*ne+$e*Kt,C[6]=Re*ne+Ht*Kt,C[7]=Le*ne+ie*Kt,C[8]=He*ne-be*Kt,C[9]=$e*ne-Ce*Kt,C[10]=Ht*ne-Re*Kt,C[11]=ie*ne-Le*Kt,C}function Yt(C,F,At){var Kt=Math.sin(At),ne=Math.cos(At),be=F[0],Ce=F[1],Re=F[2],Le=F[3],He=F[8],$e=F[9],Ht=F[10],ie=F[11];return F!==C&&(C[4]=F[4],C[5]=F[5],C[6]=F[6],C[7]=F[7],C[12]=F[12],C[13]=F[13],C[14]=F[14],C[15]=F[15]),C[0]=be*ne-He*Kt,C[1]=Ce*ne-$e*Kt,C[2]=Re*ne-Ht*Kt,C[3]=Le*ne-ie*Kt,C[8]=be*Kt+He*ne,C[9]=Ce*Kt+$e*ne,C[10]=Re*Kt+Ht*ne,C[11]=Le*Kt+ie*ne,C}function Se(C,F,At){var Kt=Math.sin(At),ne=Math.cos(At),be=F[0],Ce=F[1],Re=F[2],Le=F[3],He=F[4],$e=F[5],Ht=F[6],ie=F[7];return F!==C&&(C[8]=F[8],C[9]=F[9],C[10]=F[10],C[11]=F[11],C[12]=F[12],C[13]=F[13],C[14]=F[14],C[15]=F[15]),C[0]=be*ne+He*Kt,C[1]=Ce*ne+$e*Kt,C[2]=Re*ne+Ht*Kt,C[3]=Le*ne+ie*Kt,C[4]=He*ne-be*Kt,C[5]=$e*ne-Ce*Kt,C[6]=Ht*ne-Re*Kt,C[7]=ie*ne-Le*Kt,C}function Ie(C,F){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=F[0],C[13]=F[1],C[14]=F[2],C[15]=1,C}function Ye(C,F){return C[0]=F[0],C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=F[1],C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=F[2],C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function un(C,F,At){var Kt=At[0],ne=At[1],be=At[2],Ce=Math.sqrt(Kt*Kt+ne*ne+be*be),Re,Le,He;return Ce<xt.Ib?null:(Ce=1/Ce,Kt*=Ce,ne*=Ce,be*=Ce,Re=Math.sin(F),Le=Math.cos(F),He=1-Le,C[0]=Kt*Kt*He+Le,C[1]=ne*Kt*He+be*Re,C[2]=be*Kt*He-ne*Re,C[3]=0,C[4]=Kt*ne*He-be*Re,C[5]=ne*ne*He+Le,C[6]=be*ne*He+Kt*Re,C[7]=0,C[8]=Kt*be*He+ne*Re,C[9]=ne*be*He-Kt*Re,C[10]=be*be*He+Le,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C)}function we(C,F){var At=Math.sin(F),Kt=Math.cos(F);return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=Kt,C[6]=At,C[7]=0,C[8]=0,C[9]=-At,C[10]=Kt,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function Vt(C,F){var At=Math.sin(F),Kt=Math.cos(F);return C[0]=Kt,C[1]=0,C[2]=-At,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=At,C[9]=0,C[10]=Kt,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function et(C,F){var At=Math.sin(F),Kt=Math.cos(F);return C[0]=Kt,C[1]=At,C[2]=0,C[3]=0,C[4]=-At,C[5]=Kt,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function oe(C,F,At){var Kt=F[0],ne=F[1],be=F[2],Ce=F[3],Re=Kt+Kt,Le=ne+ne,He=be+be,$e=Kt*Re,Ht=Kt*Le,ie=Kt*He,te=ne*Le,ve=ne*He,ut=be*He,k=Ce*Re,H=Ce*Le,rt=Ce*He;return C[0]=1-(te+ut),C[1]=Ht+rt,C[2]=ie-H,C[3]=0,C[4]=Ht-rt,C[5]=1-($e+ut),C[6]=ve+k,C[7]=0,C[8]=ie+H,C[9]=ve-k,C[10]=1-($e+te),C[11]=0,C[12]=At[0],C[13]=At[1],C[14]=At[2],C[15]=1,C}function Gt(C,F){var At=new xt.WT(3),Kt=-F[0],ne=-F[1],be=-F[2],Ce=F[3],Re=F[4],Le=F[5],He=F[6],$e=F[7],Ht=Kt*Kt+ne*ne+be*be+Ce*Ce;return Ht>0?(At[0]=(Re*Ce+$e*Kt+Le*be-He*ne)*2/Ht,At[1]=(Le*Ce+$e*ne+He*Kt-Re*be)*2/Ht,At[2]=(He*Ce+$e*be+Re*ne-Le*Kt)*2/Ht):(At[0]=(Re*Ce+$e*Kt+Le*be-He*ne)*2,At[1]=(Le*Ce+$e*ne+He*Kt-Re*be)*2,At[2]=(He*Ce+$e*be+Re*ne-Le*Kt)*2),oe(C,F,At),C}function ke(C,F){return C[0]=F[12],C[1]=F[13],C[2]=F[14],C}function Me(C,F){var At=F[0],Kt=F[1],ne=F[2],be=F[4],Ce=F[5],Re=F[6],Le=F[8],He=F[9],$e=F[10];return C[0]=Math.sqrt(At*At+Kt*Kt+ne*ne),C[1]=Math.sqrt(be*be+Ce*Ce+Re*Re),C[2]=Math.sqrt(Le*Le+He*He+$e*$e),C}function j(C,F){var At=new xt.WT(3);Me(At,F);var Kt=1/At[0],ne=1/At[1],be=1/At[2],Ce=F[0]*Kt,Re=F[1]*ne,Le=F[2]*be,He=F[4]*Kt,$e=F[5]*ne,Ht=F[6]*be,ie=F[8]*Kt,te=F[9]*ne,ve=F[10]*be,ut=Ce+$e+ve,k=0;return ut>0?(k=Math.sqrt(ut+1)*2,C[3]=.25*k,C[0]=(Ht-te)/k,C[1]=(ie-Le)/k,C[2]=(Re-He)/k):Ce>$e&&Ce>ve?(k=Math.sqrt(1+Ce-$e-ve)*2,C[3]=(Ht-te)/k,C[0]=.25*k,C[1]=(Re+He)/k,C[2]=(ie+Le)/k):$e>ve?(k=Math.sqrt(1+$e-Ce-ve)*2,C[3]=(ie-Le)/k,C[0]=(Re+He)/k,C[1]=.25*k,C[2]=(Ht+te)/k):(k=Math.sqrt(1+ve-Ce-$e)*2,C[3]=(Re-He)/k,C[0]=(ie+Le)/k,C[1]=(Ht+te)/k,C[2]=.25*k),C}function Mt(C,F,At,Kt){F[0]=Kt[12],F[1]=Kt[13],F[2]=Kt[14];var ne=Kt[0],be=Kt[1],Ce=Kt[2],Re=Kt[4],Le=Kt[5],He=Kt[6],$e=Kt[8],Ht=Kt[9],ie=Kt[10];At[0]=Math.sqrt(ne*ne+be*be+Ce*Ce),At[1]=Math.sqrt(Re*Re+Le*Le+He*He),At[2]=Math.sqrt($e*$e+Ht*Ht+ie*ie);var te=1/At[0],ve=1/At[1],ut=1/At[2],k=ne*te,H=be*ve,rt=Ce*ut,yt=Re*te,bt=Le*ve,ce=He*ut,se=$e*te,Ne=Ht*ve,Pe=ie*ut,rn=k+bt+Pe,Oe=0;return rn>0?(Oe=Math.sqrt(rn+1)*2,C[3]=.25*Oe,C[0]=(ce-Ne)/Oe,C[1]=(se-rt)/Oe,C[2]=(H-yt)/Oe):k>bt&&k>Pe?(Oe=Math.sqrt(1+k-bt-Pe)*2,C[3]=(ce-Ne)/Oe,C[0]=.25*Oe,C[1]=(H+yt)/Oe,C[2]=(se+rt)/Oe):bt>Pe?(Oe=Math.sqrt(1+bt-k-Pe)*2,C[3]=(se-rt)/Oe,C[0]=(H+yt)/Oe,C[1]=.25*Oe,C[2]=(ce+Ne)/Oe):(Oe=Math.sqrt(1+Pe-k-bt)*2,C[3]=(H-yt)/Oe,C[0]=(se+rt)/Oe,C[1]=(ce+Ne)/Oe,C[2]=.25*Oe),C}function $(C,F,At,Kt){var ne=F[0],be=F[1],Ce=F[2],Re=F[3],Le=ne+ne,He=be+be,$e=Ce+Ce,Ht=ne*Le,ie=ne*He,te=ne*$e,ve=be*He,ut=be*$e,k=Ce*$e,H=Re*Le,rt=Re*He,yt=Re*$e,bt=Kt[0],ce=Kt[1],se=Kt[2];return C[0]=(1-(ve+k))*bt,C[1]=(ie+yt)*bt,C[2]=(te-rt)*bt,C[3]=0,C[4]=(ie-yt)*ce,C[5]=(1-(Ht+k))*ce,C[6]=(ut+H)*ce,C[7]=0,C[8]=(te+rt)*se,C[9]=(ut-H)*se,C[10]=(1-(Ht+ve))*se,C[11]=0,C[12]=At[0],C[13]=At[1],C[14]=At[2],C[15]=1,C}function Ct(C,F,At,Kt,ne){var be=F[0],Ce=F[1],Re=F[2],Le=F[3],He=be+be,$e=Ce+Ce,Ht=Re+Re,ie=be*He,te=be*$e,ve=be*Ht,ut=Ce*$e,k=Ce*Ht,H=Re*Ht,rt=Le*He,yt=Le*$e,bt=Le*Ht,ce=Kt[0],se=Kt[1],Ne=Kt[2],Pe=ne[0],rn=ne[1],Oe=ne[2],qe=(1-(ut+H))*ce,fn=(te+bt)*ce,gn=(ve-yt)*ce,dn=(te-bt)*se,bn=(1-(ie+H))*se,Un=(k+rt)*se,Kn=(ve+yt)*Ne,gr=(k-rt)*Ne,xr=(1-(ie+ut))*Ne;return C[0]=qe,C[1]=fn,C[2]=gn,C[3]=0,C[4]=dn,C[5]=bn,C[6]=Un,C[7]=0,C[8]=Kn,C[9]=gr,C[10]=xr,C[11]=0,C[12]=At[0]+Pe-(qe*Pe+dn*rn+Kn*Oe),C[13]=At[1]+rn-(fn*Pe+bn*rn+gr*Oe),C[14]=At[2]+Oe-(gn*Pe+Un*rn+xr*Oe),C[15]=1,C}function wt(C,F){var At=F[0],Kt=F[1],ne=F[2],be=F[3],Ce=At+At,Re=Kt+Kt,Le=ne+ne,He=At*Ce,$e=Kt*Ce,Ht=Kt*Re,ie=ne*Ce,te=ne*Re,ve=ne*Le,ut=be*Ce,k=be*Re,H=be*Le;return C[0]=1-Ht-ve,C[1]=$e+H,C[2]=ie-k,C[3]=0,C[4]=$e-H,C[5]=1-He-ve,C[6]=te+ut,C[7]=0,C[8]=ie+k,C[9]=te-ut,C[10]=1-He-Ht,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function z(C,F,At,Kt,ne,be,Ce){var Re=1/(At-F),Le=1/(ne-Kt),He=1/(be-Ce);return C[0]=be*2*Re,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=be*2*Le,C[6]=0,C[7]=0,C[8]=(At+F)*Re,C[9]=(ne+Kt)*Le,C[10]=(Ce+be)*He,C[11]=-1,C[12]=0,C[13]=0,C[14]=Ce*be*2*He,C[15]=0,C}function ot(C,F,At,Kt,ne){var be=1/Math.tan(F/2);if(C[0]=be/At,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=be,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,ne!=null&&ne!==1/0){var Ce=1/(Kt-ne);C[10]=(ne+Kt)*Ce,C[14]=2*ne*Kt*Ce}else C[10]=-1,C[14]=-2*Kt;return C}var Jt=ot;function de(C,F,At,Kt,ne){var be=1/Math.tan(F/2);if(C[0]=be/At,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=be,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,ne!=null&&ne!==1/0){var Ce=1/(Kt-ne);C[10]=ne*Ce,C[14]=ne*Kt*Ce}else C[10]=-1,C[14]=-Kt;return C}function pe(C,F,At,Kt){var ne=Math.tan(F.upDegrees*Math.PI/180),be=Math.tan(F.downDegrees*Math.PI/180),Ce=Math.tan(F.leftDegrees*Math.PI/180),Re=Math.tan(F.rightDegrees*Math.PI/180),Le=2/(Ce+Re),He=2/(ne+be);return C[0]=Le,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=He,C[6]=0,C[7]=0,C[8]=-((Ce-Re)*Le*.5),C[9]=(ne-be)*He*.5,C[10]=Kt/(At-Kt),C[11]=-1,C[12]=0,C[13]=0,C[14]=Kt*At/(At-Kt),C[15]=0,C}function Xe(C,F,At,Kt,ne,be,Ce){var Re=1/(F-At),Le=1/(Kt-ne),He=1/(be-Ce);return C[0]=-2*Re,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*Le,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*He,C[11]=0,C[12]=(F+At)*Re,C[13]=(ne+Kt)*Le,C[14]=(Ce+be)*He,C[15]=1,C}var je=Xe;function sn(C,F,At,Kt,ne,be,Ce){var Re=1/(F-At),Le=1/(Kt-ne),He=1/(be-Ce);return C[0]=-2*Re,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*Le,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=He,C[11]=0,C[12]=(F+At)*Re,C[13]=(ne+Kt)*Le,C[14]=be*He,C[15]=1,C}function ln(C,F,At,Kt){var ne,be,Ce,Re,Le,He,$e,Ht,ie,te,ve=F[0],ut=F[1],k=F[2],H=Kt[0],rt=Kt[1],yt=Kt[2],bt=At[0],ce=At[1],se=At[2];return Math.abs(ve-bt)<xt.Ib&&Math.abs(ut-ce)<xt.Ib&&Math.abs(k-se)<xt.Ib?jt(C):($e=ve-bt,Ht=ut-ce,ie=k-se,te=1/Math.sqrt($e*$e+Ht*Ht+ie*ie),$e*=te,Ht*=te,ie*=te,ne=rt*ie-yt*Ht,be=yt*$e-H*ie,Ce=H*Ht-rt*$e,te=Math.sqrt(ne*ne+be*be+Ce*Ce),te?(te=1/te,ne*=te,be*=te,Ce*=te):(ne=0,be=0,Ce=0),Re=Ht*Ce-ie*be,Le=ie*ne-$e*Ce,He=$e*be-Ht*ne,te=Math.sqrt(Re*Re+Le*Le+He*He),te?(te=1/te,Re*=te,Le*=te,He*=te):(Re=0,Le=0,He=0),C[0]=ne,C[1]=Re,C[2]=$e,C[3]=0,C[4]=be,C[5]=Le,C[6]=Ht,C[7]=0,C[8]=Ce,C[9]=He,C[10]=ie,C[11]=0,C[12]=-(ne*ve+be*ut+Ce*k),C[13]=-(Re*ve+Le*ut+He*k),C[14]=-($e*ve+Ht*ut+ie*k),C[15]=1,C)}function Zt(C,F,At,Kt){var ne=F[0],be=F[1],Ce=F[2],Re=Kt[0],Le=Kt[1],He=Kt[2],$e=ne-At[0],Ht=be-At[1],ie=Ce-At[2],te=$e*$e+Ht*Ht+ie*ie;te>0&&(te=1/Math.sqrt(te),$e*=te,Ht*=te,ie*=te);var ve=Le*ie-He*Ht,ut=He*$e-Re*ie,k=Re*Ht-Le*$e;return te=ve*ve+ut*ut+k*k,te>0&&(te=1/Math.sqrt(te),ve*=te,ut*=te,k*=te),C[0]=ve,C[1]=ut,C[2]=k,C[3]=0,C[4]=Ht*k-ie*ut,C[5]=ie*ve-$e*k,C[6]=$e*ut-Ht*ve,C[7]=0,C[8]=$e,C[9]=Ht,C[10]=ie,C[11]=0,C[12]=ne,C[13]=be,C[14]=Ce,C[15]=1,C}function ct(C){return"mat4("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+", "+C[4]+", "+C[5]+", "+C[6]+", "+C[7]+", "+C[8]+", "+C[9]+", "+C[10]+", "+C[11]+", "+C[12]+", "+C[13]+", "+C[14]+", "+C[15]+")"}function zt(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]+C[3]*C[3]+C[4]*C[4]+C[5]*C[5]+C[6]*C[6]+C[7]*C[7]+C[8]*C[8]+C[9]*C[9]+C[10]*C[10]+C[11]*C[11]+C[12]*C[12]+C[13]*C[13]+C[14]*C[14]+C[15]*C[15])}function ue(C,F,At){return C[0]=F[0]+At[0],C[1]=F[1]+At[1],C[2]=F[2]+At[2],C[3]=F[3]+At[3],C[4]=F[4]+At[4],C[5]=F[5]+At[5],C[6]=F[6]+At[6],C[7]=F[7]+At[7],C[8]=F[8]+At[8],C[9]=F[9]+At[9],C[10]=F[10]+At[10],C[11]=F[11]+At[11],C[12]=F[12]+At[12],C[13]=F[13]+At[13],C[14]=F[14]+At[14],C[15]=F[15]+At[15],C}function _e(C,F,At){return C[0]=F[0]-At[0],C[1]=F[1]-At[1],C[2]=F[2]-At[2],C[3]=F[3]-At[3],C[4]=F[4]-At[4],C[5]=F[5]-At[5],C[6]=F[6]-At[6],C[7]=F[7]-At[7],C[8]=F[8]-At[8],C[9]=F[9]-At[9],C[10]=F[10]-At[10],C[11]=F[11]-At[11],C[12]=F[12]-At[12],C[13]=F[13]-At[13],C[14]=F[14]-At[14],C[15]=F[15]-At[15],C}function St(C,F,At){return C[0]=F[0]*At,C[1]=F[1]*At,C[2]=F[2]*At,C[3]=F[3]*At,C[4]=F[4]*At,C[5]=F[5]*At,C[6]=F[6]*At,C[7]=F[7]*At,C[8]=F[8]*At,C[9]=F[9]*At,C[10]=F[10]*At,C[11]=F[11]*At,C[12]=F[12]*At,C[13]=F[13]*At,C[14]=F[14]*At,C[15]=F[15]*At,C}function re(C,F,At,Kt){return C[0]=F[0]+At[0]*Kt,C[1]=F[1]+At[1]*Kt,C[2]=F[2]+At[2]*Kt,C[3]=F[3]+At[3]*Kt,C[4]=F[4]+At[4]*Kt,C[5]=F[5]+At[5]*Kt,C[6]=F[6]+At[6]*Kt,C[7]=F[7]+At[7]*Kt,C[8]=F[8]+At[8]*Kt,C[9]=F[9]+At[9]*Kt,C[10]=F[10]+At[10]*Kt,C[11]=F[11]+At[11]*Kt,C[12]=F[12]+At[12]*Kt,C[13]=F[13]+At[13]*Kt,C[14]=F[14]+At[14]*Kt,C[15]=F[15]+At[15]*Kt,C}function Pt(C,F){return C[0]===F[0]&&C[1]===F[1]&&C[2]===F[2]&&C[3]===F[3]&&C[4]===F[4]&&C[5]===F[5]&&C[6]===F[6]&&C[7]===F[7]&&C[8]===F[8]&&C[9]===F[9]&&C[10]===F[10]&&C[11]===F[11]&&C[12]===F[12]&&C[13]===F[13]&&C[14]===F[14]&&C[15]===F[15]}function Y(C,F){var At=C[0],Kt=C[1],ne=C[2],be=C[3],Ce=C[4],Re=C[5],Le=C[6],He=C[7],$e=C[8],Ht=C[9],ie=C[10],te=C[11],ve=C[12],ut=C[13],k=C[14],H=C[15],rt=F[0],yt=F[1],bt=F[2],ce=F[3],se=F[4],Ne=F[5],Pe=F[6],rn=F[7],Oe=F[8],qe=F[9],fn=F[10],gn=F[11],dn=F[12],bn=F[13],Un=F[14],Kn=F[15];return Math.abs(At-rt)<=xt.Ib*Math.max(1,Math.abs(At),Math.abs(rt))&&Math.abs(Kt-yt)<=xt.Ib*Math.max(1,Math.abs(Kt),Math.abs(yt))&&Math.abs(ne-bt)<=xt.Ib*Math.max(1,Math.abs(ne),Math.abs(bt))&&Math.abs(be-ce)<=xt.Ib*Math.max(1,Math.abs(be),Math.abs(ce))&&Math.abs(Ce-se)<=xt.Ib*Math.max(1,Math.abs(Ce),Math.abs(se))&&Math.abs(Re-Ne)<=xt.Ib*Math.max(1,Math.abs(Re),Math.abs(Ne))&&Math.abs(Le-Pe)<=xt.Ib*Math.max(1,Math.abs(Le),Math.abs(Pe))&&Math.abs(He-rn)<=xt.Ib*Math.max(1,Math.abs(He),Math.abs(rn))&&Math.abs($e-Oe)<=xt.Ib*Math.max(1,Math.abs($e),Math.abs(Oe))&&Math.abs(Ht-qe)<=xt.Ib*Math.max(1,Math.abs(Ht),Math.abs(qe))&&Math.abs(ie-fn)<=xt.Ib*Math.max(1,Math.abs(ie),Math.abs(fn))&&Math.abs(te-gn)<=xt.Ib*Math.max(1,Math.abs(te),Math.abs(gn))&&Math.abs(ve-dn)<=xt.Ib*Math.max(1,Math.abs(ve),Math.abs(dn))&&Math.abs(ut-bn)<=xt.Ib*Math.max(1,Math.abs(ut),Math.abs(bn))&&Math.abs(k-Un)<=xt.Ib*Math.max(1,Math.abs(k),Math.abs(Un))&&Math.abs(H-Kn)<=xt.Ib*Math.max(1,Math.abs(H),Math.abs(Kn))}var Dt=Q,V=_e},32945:function(Te,fe,D){"use strict";D.d(fe,{Fv:function(){return pe},JG:function(){return ke},Jp:function(){return ee},Su:function(){return Vt},U_:function(){return Ye},Ue:function(){return nt},al:function(){return Gt},dC:function(){return Mt},t8:function(){return Me},yY:function(){return jt}});var xt=D(49685),st=D(35600),Ot=D(77160),Xt=D(98333);function nt(){var ct=new xt.WT(4);return xt.WT!=Float32Array&&(ct[0]=0,ct[1]=0,ct[2]=0),ct[3]=1,ct}function qt(ct){return ct[0]=0,ct[1]=0,ct[2]=0,ct[3]=1,ct}function jt(ct,zt,ue){ue=ue*.5;var _e=Math.sin(ue);return ct[0]=_e*zt[0],ct[1]=_e*zt[1],ct[2]=_e*zt[2],ct[3]=Math.cos(ue),ct}function Ut(ct,zt){var ue=Math.acos(zt[3])*2,_e=Math.sin(ue/2);return _e>glMatrix.EPSILON?(ct[0]=zt[0]/_e,ct[1]=zt[1]/_e,ct[2]=zt[2]/_e):(ct[0]=1,ct[1]=0,ct[2]=0),ue}function gt(ct,zt){var ue=Ct(ct,zt);return Math.acos(2*ue*ue-1)}function ee(ct,zt,ue){var _e=zt[0],St=zt[1],re=zt[2],Pt=zt[3],Y=ue[0],Dt=ue[1],V=ue[2],C=ue[3];return ct[0]=_e*C+Pt*Y+St*V-re*Dt,ct[1]=St*C+Pt*Dt+re*Y-_e*V,ct[2]=re*C+Pt*V+_e*Dt-St*Y,ct[3]=Pt*C-_e*Y-St*Dt-re*V,ct}function J(ct,zt,ue){ue*=.5;var _e=zt[0],St=zt[1],re=zt[2],Pt=zt[3],Y=Math.sin(ue),Dt=Math.cos(ue);return ct[0]=_e*Dt+Pt*Y,ct[1]=St*Dt+re*Y,ct[2]=re*Dt-St*Y,ct[3]=Pt*Dt-_e*Y,ct}function Q(ct,zt,ue){ue*=.5;var _e=zt[0],St=zt[1],re=zt[2],Pt=zt[3],Y=Math.sin(ue),Dt=Math.cos(ue);return ct[0]=_e*Dt-re*Y,ct[1]=St*Dt+Pt*Y,ct[2]=re*Dt+_e*Y,ct[3]=Pt*Dt-St*Y,ct}function Rt(ct,zt,ue){ue*=.5;var _e=zt[0],St=zt[1],re=zt[2],Pt=zt[3],Y=Math.sin(ue),Dt=Math.cos(ue);return ct[0]=_e*Dt+St*Y,ct[1]=St*Dt-_e*Y,ct[2]=re*Dt+Pt*Y,ct[3]=Pt*Dt-re*Y,ct}function Tt(ct,zt){var ue=zt[0],_e=zt[1],St=zt[2];return ct[0]=ue,ct[1]=_e,ct[2]=St,ct[3]=Math.sqrt(Math.abs(1-ue*ue-_e*_e-St*St)),ct}function Ft(ct,zt){var ue=zt[0],_e=zt[1],St=zt[2],re=zt[3],Pt=Math.sqrt(ue*ue+_e*_e+St*St),Y=Math.exp(re),Dt=Pt>0?Y*Math.sin(Pt)/Pt:0;return ct[0]=ue*Dt,ct[1]=_e*Dt,ct[2]=St*Dt,ct[3]=Y*Math.cos(Pt),ct}function kt(ct,zt){var ue=zt[0],_e=zt[1],St=zt[2],re=zt[3],Pt=Math.sqrt(ue*ue+_e*_e+St*St),Y=Pt>0?Math.atan2(Pt,re)/Pt:0;return ct[0]=ue*Y,ct[1]=_e*Y,ct[2]=St*Y,ct[3]=.5*Math.log(ue*ue+_e*_e+St*St+re*re),ct}function Yt(ct,zt,ue){return kt(ct,zt),$(ct,ct,ue),Ft(ct,ct),ct}function Se(ct,zt,ue,_e){var St=zt[0],re=zt[1],Pt=zt[2],Y=zt[3],Dt=ue[0],V=ue[1],C=ue[2],F=ue[3],At,Kt,ne,be,Ce;return Kt=St*Dt+re*V+Pt*C+Y*F,Kt<0&&(Kt=-Kt,Dt=-Dt,V=-V,C=-C,F=-F),1-Kt>xt.Ib?(At=Math.acos(Kt),ne=Math.sin(At),be=Math.sin((1-_e)*At)/ne,Ce=Math.sin(_e*At)/ne):(be=1-_e,Ce=_e),ct[0]=be*St+Ce*Dt,ct[1]=be*re+Ce*V,ct[2]=be*Pt+Ce*C,ct[3]=be*Y+Ce*F,ct}function Ie(ct){var zt=glMatrix.RANDOM(),ue=glMatrix.RANDOM(),_e=glMatrix.RANDOM(),St=Math.sqrt(1-zt),re=Math.sqrt(zt);return ct[0]=St*Math.sin(2*Math.PI*ue),ct[1]=St*Math.cos(2*Math.PI*ue),ct[2]=re*Math.sin(2*Math.PI*_e),ct[3]=re*Math.cos(2*Math.PI*_e),ct}function Ye(ct,zt){var ue=zt[0],_e=zt[1],St=zt[2],re=zt[3],Pt=ue*ue+_e*_e+St*St+re*re,Y=Pt?1/Pt:0;return ct[0]=-ue*Y,ct[1]=-_e*Y,ct[2]=-St*Y,ct[3]=re*Y,ct}function un(ct,zt){return ct[0]=-zt[0],ct[1]=-zt[1],ct[2]=-zt[2],ct[3]=zt[3],ct}function we(ct,zt){var ue=zt[0]+zt[4]+zt[8],_e;if(ue>0)_e=Math.sqrt(ue+1),ct[3]=.5*_e,_e=.5/_e,ct[0]=(zt[5]-zt[7])*_e,ct[1]=(zt[6]-zt[2])*_e,ct[2]=(zt[1]-zt[3])*_e;else{var St=0;zt[4]>zt[0]&&(St=1),zt[8]>zt[St*3+St]&&(St=2);var re=(St+1)%3,Pt=(St+2)%3;_e=Math.sqrt(zt[St*3+St]-zt[re*3+re]-zt[Pt*3+Pt]+1),ct[St]=.5*_e,_e=.5/_e,ct[3]=(zt[re*3+Pt]-zt[Pt*3+re])*_e,ct[re]=(zt[re*3+St]+zt[St*3+re])*_e,ct[Pt]=(zt[Pt*3+St]+zt[St*3+Pt])*_e}return ct}function Vt(ct,zt,ue,_e){var St=arguments.length>4&&arguments[4]!==void 0?arguments[4]:xt.yy,re=Math.PI/360;zt*=re,_e*=re,ue*=re;var Pt=Math.sin(zt),Y=Math.cos(zt),Dt=Math.sin(ue),V=Math.cos(ue),C=Math.sin(_e),F=Math.cos(_e);switch(St){case"xyz":ct[0]=Pt*V*F+Y*Dt*C,ct[1]=Y*Dt*F-Pt*V*C,ct[2]=Y*V*C+Pt*Dt*F,ct[3]=Y*V*F-Pt*Dt*C;break;case"xzy":ct[0]=Pt*V*F-Y*Dt*C,ct[1]=Y*Dt*F-Pt*V*C,ct[2]=Y*V*C+Pt*Dt*F,ct[3]=Y*V*F+Pt*Dt*C;break;case"yxz":ct[0]=Pt*V*F+Y*Dt*C,ct[1]=Y*Dt*F-Pt*V*C,ct[2]=Y*V*C-Pt*Dt*F,ct[3]=Y*V*F+Pt*Dt*C;break;case"yzx":ct[0]=Pt*V*F+Y*Dt*C,ct[1]=Y*Dt*F+Pt*V*C,ct[2]=Y*V*C-Pt*Dt*F,ct[3]=Y*V*F-Pt*Dt*C;break;case"zxy":ct[0]=Pt*V*F-Y*Dt*C,ct[1]=Y*Dt*F+Pt*V*C,ct[2]=Y*V*C+Pt*Dt*F,ct[3]=Y*V*F-Pt*Dt*C;break;case"zyx":ct[0]=Pt*V*F-Y*Dt*C,ct[1]=Y*Dt*F+Pt*V*C,ct[2]=Y*V*C-Pt*Dt*F,ct[3]=Y*V*F+Pt*Dt*C;break;default:throw new Error("Unknown angle order "+St)}return ct}function et(ct){return"quat("+ct[0]+", "+ct[1]+", "+ct[2]+", "+ct[3]+")"}var oe=Xt.d9,Gt=Xt.al,ke=Xt.JG,Me=Xt.t8,j=Xt.IH,Mt=ee,$=Xt.bA,Ct=Xt.AK,wt=Xt.t7,z=Xt.kE,ot=null,Jt=Xt.we,de=null,pe=Xt.Fv,Xe=Xt.I6;function je(ct,zt){return Math.abs(vec4.dot(ct,zt))>=1-glMatrix.EPSILON}var sn=function(){var ct=Ot.Ue(),zt=Ot.al(1,0,0),ue=Ot.al(0,1,0);return function(_e,St,re){var Pt=Ot.AK(St,re);return Pt<-.999999?(Ot.kC(ct,zt,St),Ot.Zh(ct)<1e-6&&Ot.kC(ct,ue,St),Ot.Fv(ct,ct),jt(_e,ct,Math.PI),_e):Pt>.999999?(_e[0]=0,_e[1]=0,_e[2]=0,_e[3]=1,_e):(Ot.kC(ct,St,re),_e[0]=ct[0],_e[1]=ct[1],_e[2]=ct[2],_e[3]=1+Pt,pe(_e,_e))}}(),ln=function(){var ct=nt(),zt=nt();return function(ue,_e,St,re,Pt,Y){return Se(ct,_e,Pt,Y),Se(zt,St,re,Y),Se(ue,ct,zt,2*Y*(1-Y)),ue}}(),Zt=function(){var ct=st.Ue();return function(zt,ue,_e,St){return ct[0]=_e[0],ct[3]=_e[1],ct[6]=_e[2],ct[1]=St[0],ct[4]=St[1],ct[7]=St[2],ct[2]=-ue[0],ct[5]=-ue[1],ct[8]=-ue[2],pe(zt,we(zt,ct))}}()},31437:function(Te,fe,D){"use strict";D.d(fe,{$X:function(){return Ut},AK:function(){return oe},Fv:function(){return et},I6:function(){return pe},IH:function(){return jt},JG:function(){return nt},Ue:function(){return st},al:function(){return Xt},lu:function(){return sn},t7:function(){return ke},t8:function(){return qt},tk:function(){return we}});var xt=D(49685);function st(){var St=new xt.WT(2);return xt.WT!=Float32Array&&(St[0]=0,St[1]=0),St}function Ot(St){var re=new glMatrix.ARRAY_TYPE(2);return re[0]=St[0],re[1]=St[1],re}function Xt(St,re){var Pt=new xt.WT(2);return Pt[0]=St,Pt[1]=re,Pt}function nt(St,re){return St[0]=re[0],St[1]=re[1],St}function qt(St,re,Pt){return St[0]=re,St[1]=Pt,St}function jt(St,re,Pt){return St[0]=re[0]+Pt[0],St[1]=re[1]+Pt[1],St}function Ut(St,re,Pt){return St[0]=re[0]-Pt[0],St[1]=re[1]-Pt[1],St}function gt(St,re,Pt){return St[0]=re[0]*Pt[0],St[1]=re[1]*Pt[1],St}function ee(St,re,Pt){return St[0]=re[0]/Pt[0],St[1]=re[1]/Pt[1],St}function J(St,re){return St[0]=Math.ceil(re[0]),St[1]=Math.ceil(re[1]),St}function Q(St,re){return St[0]=Math.floor(re[0]),St[1]=Math.floor(re[1]),St}function Rt(St,re,Pt){return St[0]=Math.min(re[0],Pt[0]),St[1]=Math.min(re[1],Pt[1]),St}function Tt(St,re,Pt){return St[0]=Math.max(re[0],Pt[0]),St[1]=Math.max(re[1],Pt[1]),St}function Ft(St,re){return St[0]=glMatrix.round(re[0]),St[1]=glMatrix.round(re[1]),St}function kt(St,re,Pt){return St[0]=re[0]*Pt,St[1]=re[1]*Pt,St}function Yt(St,re,Pt,Y){return St[0]=re[0]+Pt[0]*Y,St[1]=re[1]+Pt[1]*Y,St}function Se(St,re){var Pt=re[0]-St[0],Y=re[1]-St[1];return Math.sqrt(Pt*Pt+Y*Y)}function Ie(St,re){var Pt=re[0]-St[0],Y=re[1]-St[1];return Pt*Pt+Y*Y}function Ye(St){var re=St[0],Pt=St[1];return Math.sqrt(re*re+Pt*Pt)}function un(St){var re=St[0],Pt=St[1];return re*re+Pt*Pt}function we(St,re){return St[0]=-re[0],St[1]=-re[1],St}function Vt(St,re){return St[0]=1/re[0],St[1]=1/re[1],St}function et(St,re){var Pt=re[0],Y=re[1],Dt=Pt*Pt+Y*Y;return Dt>0&&(Dt=1/Math.sqrt(Dt)),St[0]=re[0]*Dt,St[1]=re[1]*Dt,St}function oe(St,re){return St[0]*re[0]+St[1]*re[1]}function Gt(St,re,Pt){var Y=re[0]*Pt[1]-re[1]*Pt[0];return St[0]=St[1]=0,St[2]=Y,St}function ke(St,re,Pt,Y){var Dt=re[0],V=re[1];return St[0]=Dt+Y*(Pt[0]-Dt),St[1]=V+Y*(Pt[1]-V),St}function Me(St,re){re=re===void 0?1:re;var Pt=glMatrix.RANDOM()*2*Math.PI;return St[0]=Math.cos(Pt)*re,St[1]=Math.sin(Pt)*re,St}function j(St,re,Pt){var Y=re[0],Dt=re[1];return St[0]=Pt[0]*Y+Pt[2]*Dt,St[1]=Pt[1]*Y+Pt[3]*Dt,St}function Mt(St,re,Pt){var Y=re[0],Dt=re[1];return St[0]=Pt[0]*Y+Pt[2]*Dt+Pt[4],St[1]=Pt[1]*Y+Pt[3]*Dt+Pt[5],St}function $(St,re,Pt){var Y=re[0],Dt=re[1];return St[0]=Pt[0]*Y+Pt[3]*Dt+Pt[6],St[1]=Pt[1]*Y+Pt[4]*Dt+Pt[7],St}function Ct(St,re,Pt){var Y=re[0],Dt=re[1];return St[0]=Pt[0]*Y+Pt[4]*Dt+Pt[12],St[1]=Pt[1]*Y+Pt[5]*Dt+Pt[13],St}function wt(St,re,Pt,Y){var Dt=re[0]-Pt[0],V=re[1]-Pt[1],C=Math.sin(Y),F=Math.cos(Y);return St[0]=Dt*F-V*C+Pt[0],St[1]=Dt*C+V*F+Pt[1],St}function z(St,re){var Pt=St[0],Y=St[1],Dt=re[0],V=re[1];return Math.abs(Math.atan2(Y*Dt-Pt*V,Pt*Dt+Y*V))}function ot(St,re){var Pt=St[0],Y=St[1],Dt=re[0],V=re[1];return Math.atan2(Pt*V-Y*Dt,Pt*Dt+Y*V)}function Jt(St){return St[0]=0,St[1]=0,St}function de(St){return"vec2("+St[0]+", "+St[1]+")"}function pe(St,re){return St[0]===re[0]&&St[1]===re[1]}function Xe(St,re){var Pt=St[0],Y=St[1],Dt=re[0],V=re[1];return Math.abs(Pt-Dt)<=glMatrix.EPSILON*Math.max(1,Math.abs(Pt),Math.abs(Dt))&&Math.abs(Y-V)<=glMatrix.EPSILON*Math.max(1,Math.abs(Y),Math.abs(V))}var je=null,sn=Ut,ln=null,Zt=null,ct=null,zt=null,ue=null,_e=function(){var St=st();return function(re,Pt,Y,Dt,V,C){var F,At;for(Pt||(Pt=2),Y||(Y=0),Dt?At=Math.min(Dt*Pt+Y,re.length):At=re.length,F=Y;F<At;F+=Pt)St[0]=re[F],St[1]=re[F+1],V(St,St,C),re[F]=St[0],re[F+1]=St[1];return re}}()},77160:function(Te,fe,D){"use strict";D.d(fe,{$X:function(){return gt},AK:function(){return oe},EU:function(){return pe},Fp:function(){return Ft},Fv:function(){return et},IH:function(){return Ut},JG:function(){return qt},Jp:function(){return ee},TK:function(){return ue},Ue:function(){return st},VC:function(){return z},VV:function(){return Tt},Zh:function(){return St},al:function(){return nt},bA:function(){return Yt},d9:function(){return Ot},fF:function(){return Ct},fS:function(){return ln},kC:function(){return Gt},kE:function(){return Xt},kK:function(){return wt},lu:function(){return Zt},t7:function(){return ke},t8:function(){return jt},tk:function(){return we}});var xt=D(49685);function st(){var Y=new xt.WT(3);return xt.WT!=Float32Array&&(Y[0]=0,Y[1]=0,Y[2]=0),Y}function Ot(Y){var Dt=new xt.WT(3);return Dt[0]=Y[0],Dt[1]=Y[1],Dt[2]=Y[2],Dt}function Xt(Y){var Dt=Y[0],V=Y[1],C=Y[2];return Math.sqrt(Dt*Dt+V*V+C*C)}function nt(Y,Dt,V){var C=new xt.WT(3);return C[0]=Y,C[1]=Dt,C[2]=V,C}function qt(Y,Dt){return Y[0]=Dt[0],Y[1]=Dt[1],Y[2]=Dt[2],Y}function jt(Y,Dt,V,C){return Y[0]=Dt,Y[1]=V,Y[2]=C,Y}function Ut(Y,Dt,V){return Y[0]=Dt[0]+V[0],Y[1]=Dt[1]+V[1],Y[2]=Dt[2]+V[2],Y}function gt(Y,Dt,V){return Y[0]=Dt[0]-V[0],Y[1]=Dt[1]-V[1],Y[2]=Dt[2]-V[2],Y}function ee(Y,Dt,V){return Y[0]=Dt[0]*V[0],Y[1]=Dt[1]*V[1],Y[2]=Dt[2]*V[2],Y}function J(Y,Dt,V){return Y[0]=Dt[0]/V[0],Y[1]=Dt[1]/V[1],Y[2]=Dt[2]/V[2],Y}function Q(Y,Dt){return Y[0]=Math.ceil(Dt[0]),Y[1]=Math.ceil(Dt[1]),Y[2]=Math.ceil(Dt[2]),Y}function Rt(Y,Dt){return Y[0]=Math.floor(Dt[0]),Y[1]=Math.floor(Dt[1]),Y[2]=Math.floor(Dt[2]),Y}function Tt(Y,Dt,V){return Y[0]=Math.min(Dt[0],V[0]),Y[1]=Math.min(Dt[1],V[1]),Y[2]=Math.min(Dt[2],V[2]),Y}function Ft(Y,Dt,V){return Y[0]=Math.max(Dt[0],V[0]),Y[1]=Math.max(Dt[1],V[1]),Y[2]=Math.max(Dt[2],V[2]),Y}function kt(Y,Dt){return Y[0]=glMatrix.round(Dt[0]),Y[1]=glMatrix.round(Dt[1]),Y[2]=glMatrix.round(Dt[2]),Y}function Yt(Y,Dt,V){return Y[0]=Dt[0]*V,Y[1]=Dt[1]*V,Y[2]=Dt[2]*V,Y}function Se(Y,Dt,V,C){return Y[0]=Dt[0]+V[0]*C,Y[1]=Dt[1]+V[1]*C,Y[2]=Dt[2]+V[2]*C,Y}function Ie(Y,Dt){var V=Dt[0]-Y[0],C=Dt[1]-Y[1],F=Dt[2]-Y[2];return Math.sqrt(V*V+C*C+F*F)}function Ye(Y,Dt){var V=Dt[0]-Y[0],C=Dt[1]-Y[1],F=Dt[2]-Y[2];return V*V+C*C+F*F}function un(Y){var Dt=Y[0],V=Y[1],C=Y[2];return Dt*Dt+V*V+C*C}function we(Y,Dt){return Y[0]=-Dt[0],Y[1]=-Dt[1],Y[2]=-Dt[2],Y}function Vt(Y,Dt){return Y[0]=1/Dt[0],Y[1]=1/Dt[1],Y[2]=1/Dt[2],Y}function et(Y,Dt){var V=Dt[0],C=Dt[1],F=Dt[2],At=V*V+C*C+F*F;return At>0&&(At=1/Math.sqrt(At)),Y[0]=Dt[0]*At,Y[1]=Dt[1]*At,Y[2]=Dt[2]*At,Y}function oe(Y,Dt){return Y[0]*Dt[0]+Y[1]*Dt[1]+Y[2]*Dt[2]}function Gt(Y,Dt,V){var C=Dt[0],F=Dt[1],At=Dt[2],Kt=V[0],ne=V[1],be=V[2];return Y[0]=F*be-At*ne,Y[1]=At*Kt-C*be,Y[2]=C*ne-F*Kt,Y}function ke(Y,Dt,V,C){var F=Dt[0],At=Dt[1],Kt=Dt[2];return Y[0]=F+C*(V[0]-F),Y[1]=At+C*(V[1]-At),Y[2]=Kt+C*(V[2]-Kt),Y}function Me(Y,Dt,V,C){var F=Math.acos(Math.min(Math.max(oe(Dt,V),-1),1)),At=Math.sin(F),Kt=Math.sin((1-C)*F)/At,ne=Math.sin(C*F)/At;return Y[0]=Kt*Dt[0]+ne*V[0],Y[1]=Kt*Dt[1]+ne*V[1],Y[2]=Kt*Dt[2]+ne*V[2],Y}function j(Y,Dt,V,C,F,At){var Kt=At*At,ne=Kt*(2*At-3)+1,be=Kt*(At-2)+At,Ce=Kt*(At-1),Re=Kt*(3-2*At);return Y[0]=Dt[0]*ne+V[0]*be+C[0]*Ce+F[0]*Re,Y[1]=Dt[1]*ne+V[1]*be+C[1]*Ce+F[1]*Re,Y[2]=Dt[2]*ne+V[2]*be+C[2]*Ce+F[2]*Re,Y}function Mt(Y,Dt,V,C,F,At){var Kt=1-At,ne=Kt*Kt,be=At*At,Ce=ne*Kt,Re=3*At*ne,Le=3*be*Kt,He=be*At;return Y[0]=Dt[0]*Ce+V[0]*Re+C[0]*Le+F[0]*He,Y[1]=Dt[1]*Ce+V[1]*Re+C[1]*Le+F[1]*He,Y[2]=Dt[2]*Ce+V[2]*Re+C[2]*Le+F[2]*He,Y}function $(Y,Dt){Dt=Dt===void 0?1:Dt;var V=glMatrix.RANDOM()*2*Math.PI,C=glMatrix.RANDOM()*2-1,F=Math.sqrt(1-C*C)*Dt;return Y[0]=Math.cos(V)*F,Y[1]=Math.sin(V)*F,Y[2]=C*Dt,Y}function Ct(Y,Dt,V){var C=Dt[0],F=Dt[1],At=Dt[2],Kt=V[3]*C+V[7]*F+V[11]*At+V[15];return Kt=Kt||1,Y[0]=(V[0]*C+V[4]*F+V[8]*At+V[12])/Kt,Y[1]=(V[1]*C+V[5]*F+V[9]*At+V[13])/Kt,Y[2]=(V[2]*C+V[6]*F+V[10]*At+V[14])/Kt,Y}function wt(Y,Dt,V){var C=Dt[0],F=Dt[1],At=Dt[2];return Y[0]=C*V[0]+F*V[3]+At*V[6],Y[1]=C*V[1]+F*V[4]+At*V[7],Y[2]=C*V[2]+F*V[5]+At*V[8],Y}function z(Y,Dt,V){var C=V[0],F=V[1],At=V[2],Kt=V[3],ne=Dt[0],be=Dt[1],Ce=Dt[2],Re=F*Ce-At*be,Le=At*ne-C*Ce,He=C*be-F*ne;return Re=Re+Re,Le=Le+Le,He=He+He,Y[0]=ne+Kt*Re+F*He-At*Le,Y[1]=be+Kt*Le+At*Re-C*He,Y[2]=Ce+Kt*He+C*Le-F*Re,Y}function ot(Y,Dt,V,C){var F=[],At=[];return F[0]=Dt[0]-V[0],F[1]=Dt[1]-V[1],F[2]=Dt[2]-V[2],At[0]=F[0],At[1]=F[1]*Math.cos(C)-F[2]*Math.sin(C),At[2]=F[1]*Math.sin(C)+F[2]*Math.cos(C),Y[0]=At[0]+V[0],Y[1]=At[1]+V[1],Y[2]=At[2]+V[2],Y}function Jt(Y,Dt,V,C){var F=[],At=[];return F[0]=Dt[0]-V[0],F[1]=Dt[1]-V[1],F[2]=Dt[2]-V[2],At[0]=F[2]*Math.sin(C)+F[0]*Math.cos(C),At[1]=F[1],At[2]=F[2]*Math.cos(C)-F[0]*Math.sin(C),Y[0]=At[0]+V[0],Y[1]=At[1]+V[1],Y[2]=At[2]+V[2],Y}function de(Y,Dt,V,C){var F=[],At=[];return F[0]=Dt[0]-V[0],F[1]=Dt[1]-V[1],F[2]=Dt[2]-V[2],At[0]=F[0]*Math.cos(C)-F[1]*Math.sin(C),At[1]=F[0]*Math.sin(C)+F[1]*Math.cos(C),At[2]=F[2],Y[0]=At[0]+V[0],Y[1]=At[1]+V[1],Y[2]=At[2]+V[2],Y}function pe(Y,Dt){var V=Y[0],C=Y[1],F=Y[2],At=Dt[0],Kt=Dt[1],ne=Dt[2],be=Math.sqrt((V*V+C*C+F*F)*(At*At+Kt*Kt+ne*ne)),Ce=be&&oe(Y,Dt)/be;return Math.acos(Math.min(Math.max(Ce,-1),1))}function Xe(Y){return Y[0]=0,Y[1]=0,Y[2]=0,Y}function je(Y){return"vec3("+Y[0]+", "+Y[1]+", "+Y[2]+")"}function sn(Y,Dt){return Y[0]===Dt[0]&&Y[1]===Dt[1]&&Y[2]===Dt[2]}function ln(Y,Dt){var V=Y[0],C=Y[1],F=Y[2],At=Dt[0],Kt=Dt[1],ne=Dt[2];return Math.abs(V-At)<=xt.Ib*Math.max(1,Math.abs(V),Math.abs(At))&&Math.abs(C-Kt)<=xt.Ib*Math.max(1,Math.abs(C),Math.abs(Kt))&&Math.abs(F-ne)<=xt.Ib*Math.max(1,Math.abs(F),Math.abs(ne))}var Zt=gt,ct=null,zt=null,ue=Ie,_e=null,St=Xt,re=null,Pt=function(){var Y=st();return function(Dt,V,C,F,At,Kt){var ne,be;for(V||(V=3),C||(C=0),F?be=Math.min(F*V+C,Dt.length):be=Dt.length,ne=C;ne<be;ne+=V)Y[0]=Dt[ne],Y[1]=Dt[ne+1],Y[2]=Dt[ne+2],At(Y,Y,Kt),Dt[ne]=Y[0],Dt[ne+1]=Y[1],Dt[ne+2]=Y[2];return Dt}}()},98333:function(Te,fe,D){"use strict";D.d(fe,{AK:function(){return oe},Fv:function(){return et},I6:function(){return wt},IH:function(){return jt},JG:function(){return nt},Ue:function(){return st},al:function(){return Xt},bA:function(){return kt},d9:function(){return Ot},fF:function(){return j},kE:function(){return Ye},t7:function(){return ke},t8:function(){return qt},we:function(){return un}});var xt=D(49685);function st(){var Zt=new xt.WT(4);return xt.WT!=Float32Array&&(Zt[0]=0,Zt[1]=0,Zt[2]=0,Zt[3]=0),Zt}function Ot(Zt){var ct=new xt.WT(4);return ct[0]=Zt[0],ct[1]=Zt[1],ct[2]=Zt[2],ct[3]=Zt[3],ct}function Xt(Zt,ct,zt,ue){var _e=new xt.WT(4);return _e[0]=Zt,_e[1]=ct,_e[2]=zt,_e[3]=ue,_e}function nt(Zt,ct){return Zt[0]=ct[0],Zt[1]=ct[1],Zt[2]=ct[2],Zt[3]=ct[3],Zt}function qt(Zt,ct,zt,ue,_e){return Zt[0]=ct,Zt[1]=zt,Zt[2]=ue,Zt[3]=_e,Zt}function jt(Zt,ct,zt){return Zt[0]=ct[0]+zt[0],Zt[1]=ct[1]+zt[1],Zt[2]=ct[2]+zt[2],Zt[3]=ct[3]+zt[3],Zt}function Ut(Zt,ct,zt){return Zt[0]=ct[0]-zt[0],Zt[1]=ct[1]-zt[1],Zt[2]=ct[2]-zt[2],Zt[3]=ct[3]-zt[3],Zt}function gt(Zt,ct,zt){return Zt[0]=ct[0]*zt[0],Zt[1]=ct[1]*zt[1],Zt[2]=ct[2]*zt[2],Zt[3]=ct[3]*zt[3],Zt}function ee(Zt,ct,zt){return Zt[0]=ct[0]/zt[0],Zt[1]=ct[1]/zt[1],Zt[2]=ct[2]/zt[2],Zt[3]=ct[3]/zt[3],Zt}function J(Zt,ct){return Zt[0]=Math.ceil(ct[0]),Zt[1]=Math.ceil(ct[1]),Zt[2]=Math.ceil(ct[2]),Zt[3]=Math.ceil(ct[3]),Zt}function Q(Zt,ct){return Zt[0]=Math.floor(ct[0]),Zt[1]=Math.floor(ct[1]),Zt[2]=Math.floor(ct[2]),Zt[3]=Math.floor(ct[3]),Zt}function Rt(Zt,ct,zt){return Zt[0]=Math.min(ct[0],zt[0]),Zt[1]=Math.min(ct[1],zt[1]),Zt[2]=Math.min(ct[2],zt[2]),Zt[3]=Math.min(ct[3],zt[3]),Zt}function Tt(Zt,ct,zt){return Zt[0]=Math.max(ct[0],zt[0]),Zt[1]=Math.max(ct[1],zt[1]),Zt[2]=Math.max(ct[2],zt[2]),Zt[3]=Math.max(ct[3],zt[3]),Zt}function Ft(Zt,ct){return Zt[0]=glMatrix.round(ct[0]),Zt[1]=glMatrix.round(ct[1]),Zt[2]=glMatrix.round(ct[2]),Zt[3]=glMatrix.round(ct[3]),Zt}function kt(Zt,ct,zt){return Zt[0]=ct[0]*zt,Zt[1]=ct[1]*zt,Zt[2]=ct[2]*zt,Zt[3]=ct[3]*zt,Zt}function Yt(Zt,ct,zt,ue){return Zt[0]=ct[0]+zt[0]*ue,Zt[1]=ct[1]+zt[1]*ue,Zt[2]=ct[2]+zt[2]*ue,Zt[3]=ct[3]+zt[3]*ue,Zt}function Se(Zt,ct){var zt=ct[0]-Zt[0],ue=ct[1]-Zt[1],_e=ct[2]-Zt[2],St=ct[3]-Zt[3];return Math.sqrt(zt*zt+ue*ue+_e*_e+St*St)}function Ie(Zt,ct){var zt=ct[0]-Zt[0],ue=ct[1]-Zt[1],_e=ct[2]-Zt[2],St=ct[3]-Zt[3];return zt*zt+ue*ue+_e*_e+St*St}function Ye(Zt){var ct=Zt[0],zt=Zt[1],ue=Zt[2],_e=Zt[3];return Math.sqrt(ct*ct+zt*zt+ue*ue+_e*_e)}function un(Zt){var ct=Zt[0],zt=Zt[1],ue=Zt[2],_e=Zt[3];return ct*ct+zt*zt+ue*ue+_e*_e}function we(Zt,ct){return Zt[0]=-ct[0],Zt[1]=-ct[1],Zt[2]=-ct[2],Zt[3]=-ct[3],Zt}function Vt(Zt,ct){return Zt[0]=1/ct[0],Zt[1]=1/ct[1],Zt[2]=1/ct[2],Zt[3]=1/ct[3],Zt}function et(Zt,ct){var zt=ct[0],ue=ct[1],_e=ct[2],St=ct[3],re=zt*zt+ue*ue+_e*_e+St*St;return re>0&&(re=1/Math.sqrt(re)),Zt[0]=zt*re,Zt[1]=ue*re,Zt[2]=_e*re,Zt[3]=St*re,Zt}function oe(Zt,ct){return Zt[0]*ct[0]+Zt[1]*ct[1]+Zt[2]*ct[2]+Zt[3]*ct[3]}function Gt(Zt,ct,zt,ue){var _e=zt[0]*ue[1]-zt[1]*ue[0],St=zt[0]*ue[2]-zt[2]*ue[0],re=zt[0]*ue[3]-zt[3]*ue[0],Pt=zt[1]*ue[2]-zt[2]*ue[1],Y=zt[1]*ue[3]-zt[3]*ue[1],Dt=zt[2]*ue[3]-zt[3]*ue[2],V=ct[0],C=ct[1],F=ct[2],At=ct[3];return Zt[0]=C*Dt-F*Y+At*Pt,Zt[1]=-(V*Dt)+F*re-At*St,Zt[2]=V*Y-C*re+At*_e,Zt[3]=-(V*Pt)+C*St-F*_e,Zt}function ke(Zt,ct,zt,ue){var _e=ct[0],St=ct[1],re=ct[2],Pt=ct[3];return Zt[0]=_e+ue*(zt[0]-_e),Zt[1]=St+ue*(zt[1]-St),Zt[2]=re+ue*(zt[2]-re),Zt[3]=Pt+ue*(zt[3]-Pt),Zt}function Me(Zt,ct){ct=ct===void 0?1:ct;var zt,ue,_e,St,re,Pt,Y;Y=glMatrix.RANDOM(),zt=Y*2-1,ue=(4*glMatrix.RANDOM()-2)*Math.sqrt(Y*-Y+Y),re=zt*zt+ue*ue,Y=glMatrix.RANDOM(),_e=Y*2-1,St=(4*glMatrix.RANDOM()-2)*Math.sqrt(Y*-Y+Y),Pt=_e*_e+St*St;var Dt=Math.sqrt((1-re)/Pt);return Zt[0]=ct*zt,Zt[1]=ct*ue,Zt[2]=ct*_e*Dt,Zt[3]=ct*St*Dt,Zt}function j(Zt,ct,zt){var ue=ct[0],_e=ct[1],St=ct[2],re=ct[3];return Zt[0]=zt[0]*ue+zt[4]*_e+zt[8]*St+zt[12]*re,Zt[1]=zt[1]*ue+zt[5]*_e+zt[9]*St+zt[13]*re,Zt[2]=zt[2]*ue+zt[6]*_e+zt[10]*St+zt[14]*re,Zt[3]=zt[3]*ue+zt[7]*_e+zt[11]*St+zt[15]*re,Zt}function Mt(Zt,ct,zt){var ue=zt[0],_e=zt[1],St=zt[2],re=zt[3],Pt=ct[0],Y=ct[1],Dt=ct[2],V=_e*Dt-St*Y,C=St*Pt-ue*Dt,F=ue*Y-_e*Pt;return V=V+V,C=C+C,F=F+F,Zt[0]=Pt+re*V+_e*F-St*C,Zt[1]=Y+re*C+St*V-ue*F,Zt[2]=Dt+re*F+ue*C-_e*V,Zt[3]=ct[3],Zt}function $(Zt){return Zt[0]=0,Zt[1]=0,Zt[2]=0,Zt[3]=0,Zt}function Ct(Zt){return"vec4("+Zt[0]+", "+Zt[1]+", "+Zt[2]+", "+Zt[3]+")"}function wt(Zt,ct){return Zt[0]===ct[0]&&Zt[1]===ct[1]&&Zt[2]===ct[2]&&Zt[3]===ct[3]}function z(Zt,ct){var zt=Zt[0],ue=Zt[1],_e=Zt[2],St=Zt[3],re=ct[0],Pt=ct[1],Y=ct[2],Dt=ct[3];return Math.abs(zt-re)<=glMatrix.EPSILON*Math.max(1,Math.abs(zt),Math.abs(re))&&Math.abs(ue-Pt)<=glMatrix.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Pt))&&Math.abs(_e-Y)<=glMatrix.EPSILON*Math.max(1,Math.abs(_e),Math.abs(Y))&&Math.abs(St-Dt)<=glMatrix.EPSILON*Math.max(1,Math.abs(St),Math.abs(Dt))}var ot=null,Jt=null,de=null,pe=null,Xe=null,je=null,sn=null,ln=function(){var Zt=st();return function(ct,zt,ue,_e,St,re){var Pt,Y;for(zt||(zt=4),ue||(ue=0),_e?Y=Math.min(_e*zt+ue,ct.length):Y=ct.length,Pt=ue;Pt<Y;Pt+=zt)Zt[0]=ct[Pt],Zt[1]=ct[Pt+1],Zt[2]=ct[Pt+2],Zt[3]=ct[Pt+3],St(Zt,Zt,re),ct[Pt]=Zt[0],ct[Pt+1]=Zt[1],ct[Pt+2]=Zt[2],ct[Pt+3]=Zt[3];return ct}}()},50840:function(Te,fe,D){var xt;(function(st,Ot,Xt,nt){"use strict";var qt=["","webkit","Moz","MS","ms","o"],jt=Ot.createElement("div"),Ut="function",gt=Math.round,ee=Math.abs,J=Date.now;function Q(Et,Bt,xe){return setTimeout(Ye(Et,xe),Bt)}function Rt(Et,Bt,xe){return Array.isArray(Et)?(Tt(Et,xe[Bt],xe),!0):!1}function Tt(Et,Bt,xe){var Ke;if(Et)if(Et.forEach)Et.forEach(Bt,xe);else if(Et.length!==nt)for(Ke=0;Ke<Et.length;)Bt.call(xe,Et[Ke],Ke,Et),Ke++;else for(Ke in Et)Et.hasOwnProperty(Ke)&&Bt.call(xe,Et[Ke],Ke,Et)}function Ft(Et,Bt,xe){var Ke="DEPRECATED METHOD: "+Bt+`
`+xe+` AT 
`;return function(){var yn=new Error("get-stack-trace"),Cn=yn&&yn.stack?yn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Wn=st.console&&(st.console.warn||st.console.log);return Wn&&Wn.call(st.console,Ke,Cn),Et.apply(this,arguments)}}var kt;typeof Object.assign!="function"?kt=function(Bt){if(Bt===nt||Bt===null)throw new TypeError("Cannot convert undefined or null to object");for(var xe=Object(Bt),Ke=1;Ke<arguments.length;Ke++){var yn=arguments[Ke];if(yn!==nt&&yn!==null)for(var Cn in yn)yn.hasOwnProperty(Cn)&&(xe[Cn]=yn[Cn])}return xe}:kt=Object.assign;var Yt=Ft(function(Bt,xe,Ke){for(var yn=Object.keys(xe),Cn=0;Cn<yn.length;)(!Ke||Ke&&Bt[yn[Cn]]===nt)&&(Bt[yn[Cn]]=xe[yn[Cn]]),Cn++;return Bt},"extend","Use `assign`."),Se=Ft(function(Bt,xe){return Yt(Bt,xe,!0)},"merge","Use `assign`.");function Ie(Et,Bt,xe){var Ke=Bt.prototype,yn;yn=Et.prototype=Object.create(Ke),yn.constructor=Et,yn._super=Ke,xe&&kt(yn,xe)}function Ye(Et,Bt){return function(){return Et.apply(Bt,arguments)}}function un(Et,Bt){return typeof Et==Ut?Et.apply(Bt&&Bt[0]||nt,Bt):Et}function we(Et,Bt){return Et===nt?Bt:Et}function Vt(Et,Bt,xe){Tt(ke(Bt),function(Ke){Et.addEventListener(Ke,xe,!1)})}function et(Et,Bt,xe){Tt(ke(Bt),function(Ke){Et.removeEventListener(Ke,xe,!1)})}function oe(Et,Bt){for(;Et;){if(Et==Bt)return!0;Et=Et.parentNode}return!1}function Gt(Et,Bt){return Et.indexOf(Bt)>-1}function ke(Et){return Et.trim().split(/\s+/g)}function Me(Et,Bt,xe){if(Et.indexOf&&!xe)return Et.indexOf(Bt);for(var Ke=0;Ke<Et.length;){if(xe&&Et[Ke][xe]==Bt||!xe&&Et[Ke]===Bt)return Ke;Ke++}return-1}function j(Et){return Array.prototype.slice.call(Et,0)}function Mt(Et,Bt,xe){for(var Ke=[],yn=[],Cn=0;Cn<Et.length;){var Wn=Bt?Et[Cn][Bt]:Et[Cn];Me(yn,Wn)<0&&Ke.push(Et[Cn]),yn[Cn]=Wn,Cn++}return xe&&(Bt?Ke=Ke.sort(function(ii,Tr){return ii[Bt]>Tr[Bt]}):Ke=Ke.sort()),Ke}function $(Et,Bt){for(var xe,Ke,yn=Bt[0].toUpperCase()+Bt.slice(1),Cn=0;Cn<qt.length;){if(xe=qt[Cn],Ke=xe?xe+yn:Bt,Ke in Et)return Ke;Cn++}return nt}var Ct=1;function wt(){return Ct++}function z(Et){var Bt=Et.ownerDocument||Et;return Bt.defaultView||Bt.parentWindow||st}var ot=/mobile|tablet|ip(ad|hone|od)|android/i,Jt="ontouchstart"in st,de=$(st,"PointerEvent")!==nt,pe=Jt&&ot.test(navigator.userAgent),Xe="touch",je="pen",sn="mouse",ln="kinect",Zt=25,ct=1,zt=2,ue=4,_e=8,St=1,re=2,Pt=4,Y=8,Dt=16,V=re|Pt,C=Y|Dt,F=V|C,At=["x","y"],Kt=["clientX","clientY"];function ne(Et,Bt){var xe=this;this.manager=Et,this.callback=Bt,this.element=Et.element,this.target=Et.options.inputTarget,this.domHandler=function(Ke){un(Et.options.enable,[Et])&&xe.handler(Ke)},this.init()}ne.prototype={handler:function(){},init:function(){this.evEl&&Vt(this.element,this.evEl,this.domHandler),this.evTarget&&Vt(this.target,this.evTarget,this.domHandler),this.evWin&&Vt(z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&et(this.element,this.evEl,this.domHandler),this.evTarget&&et(this.target,this.evTarget,this.domHandler),this.evWin&&et(z(this.element),this.evWin,this.domHandler)}};function be(Et){var Bt,xe=Et.options.inputClass;return xe?Bt=xe:de?Bt=Oe:pe?Bt=gr:Jt?Bt=zr:Bt=ce,new Bt(Et,Ce)}function Ce(Et,Bt,xe){var Ke=xe.pointers.length,yn=xe.changedPointers.length,Cn=Bt&ct&&Ke-yn===0,Wn=Bt&(ue|_e)&&Ke-yn===0;xe.isFirst=!!Cn,xe.isFinal=!!Wn,Cn&&(Et.session={}),xe.eventType=Bt,Re(Et,xe),Et.emit("hammer.input",xe),Et.recognize(xe),Et.session.prevInput=xe}function Re(Et,Bt){var xe=Et.session,Ke=Bt.pointers,yn=Ke.length;xe.firstInput||(xe.firstInput=$e(Bt)),yn>1&&!xe.firstMultiple?xe.firstMultiple=$e(Bt):yn===1&&(xe.firstMultiple=!1);var Cn=xe.firstInput,Wn=xe.firstMultiple,Gr=Wn?Wn.center:Cn.center,ii=Bt.center=Ht(Ke);Bt.timeStamp=J(),Bt.deltaTime=Bt.timeStamp-Cn.timeStamp,Bt.angle=ut(Gr,ii),Bt.distance=ve(Gr,ii),Le(xe,Bt),Bt.offsetDirection=te(Bt.deltaX,Bt.deltaY);var Tr=ie(Bt.deltaTime,Bt.deltaX,Bt.deltaY);Bt.overallVelocityX=Tr.x,Bt.overallVelocityY=Tr.y,Bt.overallVelocity=ee(Tr.x)>ee(Tr.y)?Tr.x:Tr.y,Bt.scale=Wn?H(Wn.pointers,Ke):1,Bt.rotation=Wn?k(Wn.pointers,Ke):0,Bt.maxPointers=xe.prevInput?Bt.pointers.length>xe.prevInput.maxPointers?Bt.pointers.length:xe.prevInput.maxPointers:Bt.pointers.length,He(xe,Bt);var pi=Et.element;oe(Bt.srcEvent.target,pi)&&(pi=Bt.srcEvent.target),Bt.target=pi}function Le(Et,Bt){var xe=Bt.center,Ke=Et.offsetDelta||{},yn=Et.prevDelta||{},Cn=Et.prevInput||{};(Bt.eventType===ct||Cn.eventType===ue)&&(yn=Et.prevDelta={x:Cn.deltaX||0,y:Cn.deltaY||0},Ke=Et.offsetDelta={x:xe.x,y:xe.y}),Bt.deltaX=yn.x+(xe.x-Ke.x),Bt.deltaY=yn.y+(xe.y-Ke.y)}function He(Et,Bt){var xe=Et.lastInterval||Bt,Ke=Bt.timeStamp-xe.timeStamp,yn,Cn,Wn,Gr;if(Bt.eventType!=_e&&(Ke>Zt||xe.velocity===nt)){var ii=Bt.deltaX-xe.deltaX,Tr=Bt.deltaY-xe.deltaY,pi=ie(Ke,ii,Tr);Cn=pi.x,Wn=pi.y,yn=ee(pi.x)>ee(pi.y)?pi.x:pi.y,Gr=te(ii,Tr),Et.lastInterval=Bt}else yn=xe.velocity,Cn=xe.velocityX,Wn=xe.velocityY,Gr=xe.direction;Bt.velocity=yn,Bt.velocityX=Cn,Bt.velocityY=Wn,Bt.direction=Gr}function $e(Et){for(var Bt=[],xe=0;xe<Et.pointers.length;)Bt[xe]={clientX:gt(Et.pointers[xe].clientX),clientY:gt(Et.pointers[xe].clientY)},xe++;return{timeStamp:J(),pointers:Bt,center:Ht(Bt),deltaX:Et.deltaX,deltaY:Et.deltaY}}function Ht(Et){var Bt=Et.length;if(Bt===1)return{x:gt(Et[0].clientX),y:gt(Et[0].clientY)};for(var xe=0,Ke=0,yn=0;yn<Bt;)xe+=Et[yn].clientX,Ke+=Et[yn].clientY,yn++;return{x:gt(xe/Bt),y:gt(Ke/Bt)}}function ie(Et,Bt,xe){return{x:Bt/Et||0,y:xe/Et||0}}function te(Et,Bt){return Et===Bt?St:ee(Et)>=ee(Bt)?Et<0?re:Pt:Bt<0?Y:Dt}function ve(Et,Bt,xe){xe||(xe=At);var Ke=Bt[xe[0]]-Et[xe[0]],yn=Bt[xe[1]]-Et[xe[1]];return Math.sqrt(Ke*Ke+yn*yn)}function ut(Et,Bt,xe){xe||(xe=At);var Ke=Bt[xe[0]]-Et[xe[0]],yn=Bt[xe[1]]-Et[xe[1]];return Math.atan2(yn,Ke)*180/Math.PI}function k(Et,Bt){return ut(Bt[1],Bt[0],Kt)+ut(Et[1],Et[0],Kt)}function H(Et,Bt){return ve(Bt[0],Bt[1],Kt)/ve(Et[0],Et[1],Kt)}var rt={mousedown:ct,mousemove:zt,mouseup:ue},yt="mousedown",bt="mousemove mouseup";function ce(){this.evEl=yt,this.evWin=bt,this.pressed=!1,ne.apply(this,arguments)}Ie(ce,ne,{handler:function(Bt){var xe=rt[Bt.type];xe&ct&&Bt.button===0&&(this.pressed=!0),xe&zt&&Bt.which!==1&&(xe=ue),this.pressed&&(xe&ue&&(this.pressed=!1),this.callback(this.manager,xe,{pointers:[Bt],changedPointers:[Bt],pointerType:sn,srcEvent:Bt}))}});var se={pointerdown:ct,pointermove:zt,pointerup:ue,pointercancel:_e,pointerout:_e},Ne={2:Xe,3:je,4:sn,5:ln},Pe="pointerdown",rn="pointermove pointerup pointercancel";st.MSPointerEvent&&!st.PointerEvent&&(Pe="MSPointerDown",rn="MSPointerMove MSPointerUp MSPointerCancel");function Oe(){this.evEl=Pe,this.evWin=rn,ne.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Ie(Oe,ne,{handler:function(Bt){var xe=this.store,Ke=!1,yn=Bt.type.toLowerCase().replace("ms",""),Cn=se[yn],Wn=Ne[Bt.pointerType]||Bt.pointerType,Gr=Wn==Xe,ii=Me(xe,Bt.pointerId,"pointerId");Cn&ct&&(Bt.button===0||Gr)?ii<0&&(xe.push(Bt),ii=xe.length-1):Cn&(ue|_e)&&(Ke=!0),!(ii<0)&&(xe[ii]=Bt,this.callback(this.manager,Cn,{pointers:xe,changedPointers:[Bt],pointerType:Wn,srcEvent:Bt}),Ke&&xe.splice(ii,1))}});var qe={touchstart:ct,touchmove:zt,touchend:ue,touchcancel:_e},fn="touchstart",gn="touchstart touchmove touchend touchcancel";function dn(){this.evTarget=fn,this.evWin=gn,this.started=!1,ne.apply(this,arguments)}Ie(dn,ne,{handler:function(Bt){var xe=qe[Bt.type];if(xe===ct&&(this.started=!0),!!this.started){var Ke=bn.call(this,Bt,xe);xe&(ue|_e)&&Ke[0].length-Ke[1].length===0&&(this.started=!1),this.callback(this.manager,xe,{pointers:Ke[0],changedPointers:Ke[1],pointerType:Xe,srcEvent:Bt})}}});function bn(Et,Bt){var xe=j(Et.touches),Ke=j(Et.changedTouches);return Bt&(ue|_e)&&(xe=Mt(xe.concat(Ke),"identifier",!0)),[xe,Ke]}var Un={touchstart:ct,touchmove:zt,touchend:ue,touchcancel:_e},Kn="touchstart touchmove touchend touchcancel";function gr(){this.evTarget=Kn,this.targetIds={},ne.apply(this,arguments)}Ie(gr,ne,{handler:function(Bt){var xe=Un[Bt.type],Ke=xr.call(this,Bt,xe);Ke&&this.callback(this.manager,xe,{pointers:Ke[0],changedPointers:Ke[1],pointerType:Xe,srcEvent:Bt})}});function xr(Et,Bt){var xe=j(Et.touches),Ke=this.targetIds;if(Bt&(ct|zt)&&xe.length===1)return Ke[xe[0].identifier]=!0,[xe,xe];var yn,Cn,Wn=j(Et.changedTouches),Gr=[],ii=this.target;if(Cn=xe.filter(function(Tr){return oe(Tr.target,ii)}),Bt===ct)for(yn=0;yn<Cn.length;)Ke[Cn[yn].identifier]=!0,yn++;for(yn=0;yn<Wn.length;)Ke[Wn[yn].identifier]&&Gr.push(Wn[yn]),Bt&(ue|_e)&&delete Ke[Wn[yn].identifier],yn++;if(Gr.length)return[Mt(Cn.concat(Gr),"identifier",!0),Gr]}var ni=2500,Vr=25;function zr(){ne.apply(this,arguments);var Et=Ye(this.handler,this);this.touch=new gr(this.manager,Et),this.mouse=new ce(this.manager,Et),this.primaryTouch=null,this.lastTouches=[]}Ie(zr,ne,{handler:function(Bt,xe,Ke){var yn=Ke.pointerType==Xe,Cn=Ke.pointerType==sn;if(!(Cn&&Ke.sourceCapabilities&&Ke.sourceCapabilities.firesTouchEvents)){if(yn)Ar.call(this,xe,Ke);else if(Cn&&Vi.call(this,Ke))return;this.callback(Bt,xe,Ke)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ar(Et,Bt){Et&ct?(this.primaryTouch=Bt.changedPointers[0].identifier,ui.call(this,Bt)):Et&(ue|_e)&&ui.call(this,Bt)}function ui(Et){var Bt=Et.changedPointers[0];if(Bt.identifier===this.primaryTouch){var xe={x:Bt.clientX,y:Bt.clientY};this.lastTouches.push(xe);var Ke=this.lastTouches,yn=function(){var Cn=Ke.indexOf(xe);Cn>-1&&Ke.splice(Cn,1)};setTimeout(yn,ni)}}function Vi(Et){for(var Bt=Et.srcEvent.clientX,xe=Et.srcEvent.clientY,Ke=0;Ke<this.lastTouches.length;Ke++){var yn=this.lastTouches[Ke],Cn=Math.abs(Bt-yn.x),Wn=Math.abs(xe-yn.y);if(Cn<=Vr&&Wn<=Vr)return!0}return!1}var Bi=$(jt.style,"touchAction"),_i=Bi!==nt,no="compute",ro="auto",Za="manipulation",Mo="none",Ea="pan-x",ri="pan-y",xi=Wt();function at(Et,Bt){this.manager=Et,this.set(Bt)}at.prototype={set:function(Et){Et==no&&(Et=this.compute()),_i&&this.manager.element.style&&xi[Et]&&(this.manager.element.style[Bi]=Et),this.actions=Et.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Et=[];return Tt(this.manager.recognizers,function(Bt){un(Bt.options.enable,[Bt])&&(Et=Et.concat(Bt.getTouchAction()))}),ht(Et.join(" "))},preventDefaults:function(Et){var Bt=Et.srcEvent,xe=Et.offsetDirection;if(this.manager.session.prevented){Bt.preventDefault();return}var Ke=this.actions,yn=Gt(Ke,Mo)&&!xi[Mo],Cn=Gt(Ke,ri)&&!xi[ri],Wn=Gt(Ke,Ea)&&!xi[Ea];if(yn){var Gr=Et.pointers.length===1,ii=Et.distance<2,Tr=Et.deltaTime<250;if(Gr&&ii&&Tr)return}if(!(Wn&&Cn)&&(yn||Cn&&xe&V||Wn&&xe&C))return this.preventSrc(Bt)},preventSrc:function(Et){this.manager.session.prevented=!0,Et.preventDefault()}};function ht(Et){if(Gt(Et,Mo))return Mo;var Bt=Gt(Et,Ea),xe=Gt(Et,ri);return Bt&&xe?Mo:Bt||xe?Bt?Ea:ri:Gt(Et,Za)?Za:ro}function Wt(){if(!_i)return!1;var Et={},Bt=st.CSS&&st.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(xe){Et[xe]=Bt?st.CSS.supports("touch-action",xe):!0}),Et}var ae=1,Ae=2,De=4,ge=8,me=ge,Ze=16,We=32;function vn(Et){this.options=kt({},this.defaults,Et||{}),this.id=wt(),this.manager=null,this.options.enable=we(this.options.enable,!0),this.state=ae,this.simultaneous={},this.requireFail=[]}vn.prototype={defaults:{},set:function(Et){return kt(this.options,Et),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Et){if(Rt(Et,"recognizeWith",this))return this;var Bt=this.simultaneous;return Et=mn(Et,this),Bt[Et.id]||(Bt[Et.id]=Et,Et.recognizeWith(this)),this},dropRecognizeWith:function(Et){return Rt(Et,"dropRecognizeWith",this)?this:(Et=mn(Et,this),delete this.simultaneous[Et.id],this)},requireFailure:function(Et){if(Rt(Et,"requireFailure",this))return this;var Bt=this.requireFail;return Et=mn(Et,this),Me(Bt,Et)===-1&&(Bt.push(Et),Et.requireFailure(this)),this},dropRequireFailure:function(Et){if(Rt(Et,"dropRequireFailure",this))return this;Et=mn(Et,this);var Bt=Me(this.requireFail,Et);return Bt>-1&&this.requireFail.splice(Bt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Et){return!!this.simultaneous[Et.id]},emit:function(Et){var Bt=this,xe=this.state;function Ke(yn){Bt.manager.emit(yn,Et)}xe<ge&&Ke(Bt.options.event+xn(xe)),Ke(Bt.options.event),Et.additionalEvent&&Ke(Et.additionalEvent),xe>=ge&&Ke(Bt.options.event+xn(xe))},tryEmit:function(Et){if(this.canEmit())return this.emit(Et);this.state=We},canEmit:function(){for(var Et=0;Et<this.requireFail.length;){if(!(this.requireFail[Et].state&(We|ae)))return!1;Et++}return!0},recognize:function(Et){var Bt=kt({},Et);if(!un(this.options.enable,[this,Bt])){this.reset(),this.state=We;return}this.state&(me|Ze|We)&&(this.state=ae),this.state=this.process(Bt),this.state&(Ae|De|ge|Ze)&&this.tryEmit(Bt)},process:function(Et){},getTouchAction:function(){},reset:function(){}};function xn(Et){return Et&Ze?"cancel":Et&ge?"end":Et&De?"move":Et&Ae?"start":""}function In(Et){return Et==Dt?"down":Et==Y?"up":Et==re?"left":Et==Pt?"right":""}function mn(Et,Bt){var xe=Bt.manager;return xe?xe.get(Et):Et}function _n(){vn.apply(this,arguments)}Ie(_n,vn,{defaults:{pointers:1},attrTest:function(Et){var Bt=this.options.pointers;return Bt===0||Et.pointers.length===Bt},process:function(Et){var Bt=this.state,xe=Et.eventType,Ke=Bt&(Ae|De),yn=this.attrTest(Et);return Ke&&(xe&_e||!yn)?Bt|Ze:Ke||yn?xe&ue?Bt|ge:Bt&Ae?Bt|De:Ae:We}});function On(){_n.apply(this,arguments),this.pX=null,this.pY=null}Ie(On,_n,{defaults:{event:"pan",threshold:10,pointers:1,direction:F},getTouchAction:function(){var Et=this.options.direction,Bt=[];return Et&V&&Bt.push(ri),Et&C&&Bt.push(Ea),Bt},directionTest:function(Et){var Bt=this.options,xe=!0,Ke=Et.distance,yn=Et.direction,Cn=Et.deltaX,Wn=Et.deltaY;return yn&Bt.direction||(Bt.direction&V?(yn=Cn===0?St:Cn<0?re:Pt,xe=Cn!=this.pX,Ke=Math.abs(Et.deltaX)):(yn=Wn===0?St:Wn<0?Y:Dt,xe=Wn!=this.pY,Ke=Math.abs(Et.deltaY))),Et.direction=yn,xe&&Ke>Bt.threshold&&yn&Bt.direction},attrTest:function(Et){return _n.prototype.attrTest.call(this,Et)&&(this.state&Ae||!(this.state&Ae)&&this.directionTest(Et))},emit:function(Et){this.pX=Et.deltaX,this.pY=Et.deltaY;var Bt=In(Et.direction);Bt&&(Et.additionalEvent=this.options.event+Bt),this._super.emit.call(this,Et)}});function hn(){_n.apply(this,arguments)}Ie(hn,_n,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Mo]},attrTest:function(Et){return this._super.attrTest.call(this,Et)&&(Math.abs(Et.scale-1)>this.options.threshold||this.state&Ae)},emit:function(Et){if(Et.scale!==1){var Bt=Et.scale<1?"in":"out";Et.additionalEvent=this.options.event+Bt}this._super.emit.call(this,Et)}});function Hn(){vn.apply(this,arguments),this._timer=null,this._input=null}Ie(Hn,vn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ro]},process:function(Et){var Bt=this.options,xe=Et.pointers.length===Bt.pointers,Ke=Et.distance<Bt.threshold,yn=Et.deltaTime>Bt.time;if(this._input=Et,!Ke||!xe||Et.eventType&(ue|_e)&&!yn)this.reset();else if(Et.eventType&ct)this.reset(),this._timer=Q(function(){this.state=me,this.tryEmit()},Bt.time,this);else if(Et.eventType&ue)return me;return We},reset:function(){clearTimeout(this._timer)},emit:function(Et){this.state===me&&(Et&&Et.eventType&ue?this.manager.emit(this.options.event+"up",Et):(this._input.timeStamp=J(),this.manager.emit(this.options.event,this._input)))}});function Rn(){_n.apply(this,arguments)}Ie(Rn,_n,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Mo]},attrTest:function(Et){return this._super.attrTest.call(this,Et)&&(Math.abs(Et.rotation)>this.options.threshold||this.state&Ae)}});function Vn(){_n.apply(this,arguments)}Ie(Vn,_n,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:V|C,pointers:1},getTouchAction:function(){return On.prototype.getTouchAction.call(this)},attrTest:function(Et){var Bt=this.options.direction,xe;return Bt&(V|C)?xe=Et.overallVelocity:Bt&V?xe=Et.overallVelocityX:Bt&C&&(xe=Et.overallVelocityY),this._super.attrTest.call(this,Et)&&Bt&Et.offsetDirection&&Et.distance>this.options.threshold&&Et.maxPointers==this.options.pointers&&ee(xe)>this.options.velocity&&Et.eventType&ue},emit:function(Et){var Bt=In(Et.offsetDirection);Bt&&this.manager.emit(this.options.event+Bt,Et),this.manager.emit(this.options.event,Et)}});function Ln(){vn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Ie(Ln,vn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Za]},process:function(Et){var Bt=this.options,xe=Et.pointers.length===Bt.pointers,Ke=Et.distance<Bt.threshold,yn=Et.deltaTime<Bt.time;if(this.reset(),Et.eventType&ct&&this.count===0)return this.failTimeout();if(Ke&&yn&&xe){if(Et.eventType!=ue)return this.failTimeout();var Cn=this.pTime?Et.timeStamp-this.pTime<Bt.interval:!0,Wn=!this.pCenter||ve(this.pCenter,Et.center)<Bt.posThreshold;this.pTime=Et.timeStamp,this.pCenter=Et.center,!Wn||!Cn?this.count=1:this.count+=1,this._input=Et;var Gr=this.count%Bt.taps;if(Gr===0)return this.hasRequireFailures()?(this._timer=Q(function(){this.state=me,this.tryEmit()},Bt.interval,this),Ae):me}return We},failTimeout:function(){return this._timer=Q(function(){this.state=We},this.options.interval,this),We},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==me&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Bn(Et,Bt){return Bt=Bt||{},Bt.recognizers=we(Bt.recognizers,Bn.defaults.preset),new Pi(Et,Bt)}Bn.VERSION="2.0.7",Bn.defaults={domEvents:!1,touchAction:no,enable:!0,inputTarget:null,inputClass:null,preset:[[Rn,{enable:!1}],[hn,{enable:!1},["rotate"]],[Vn,{direction:V}],[On,{direction:V},["swipe"]],[Ln],[Ln,{event:"doubletap",taps:2},["tap"]],[Hn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var nr=1,ji=2;function Pi(Et,Bt){this.options=kt({},Bn.defaults,Bt||{}),this.options.inputTarget=this.options.inputTarget||Et,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Et,this.input=be(this),this.touchAction=new at(this,this.options.touchAction),Wr(this,!0),Tt(this.options.recognizers,function(xe){var Ke=this.add(new xe[0](xe[1]));xe[2]&&Ke.recognizeWith(xe[2]),xe[3]&&Ke.requireFailure(xe[3])},this)}Pi.prototype={set:function(Et){return kt(this.options,Et),Et.touchAction&&this.touchAction.update(),Et.inputTarget&&(this.input.destroy(),this.input.target=Et.inputTarget,this.input.init()),this},stop:function(Et){this.session.stopped=Et?ji:nr},recognize:function(Et){var Bt=this.session;if(!Bt.stopped){this.touchAction.preventDefaults(Et);var xe,Ke=this.recognizers,yn=Bt.curRecognizer;(!yn||yn&&yn.state&me)&&(yn=Bt.curRecognizer=null);for(var Cn=0;Cn<Ke.length;)xe=Ke[Cn],Bt.stopped!==ji&&(!yn||xe==yn||xe.canRecognizeWith(yn))?xe.recognize(Et):xe.reset(),!yn&&xe.state&(Ae|De|ge)&&(yn=Bt.curRecognizer=xe),Cn++}},get:function(Et){if(Et instanceof vn)return Et;for(var Bt=this.recognizers,xe=0;xe<Bt.length;xe++)if(Bt[xe].options.event==Et)return Bt[xe];return null},add:function(Et){if(Rt(Et,"add",this))return this;var Bt=this.get(Et.options.event);return Bt&&this.remove(Bt),this.recognizers.push(Et),Et.manager=this,this.touchAction.update(),Et},remove:function(Et){if(Rt(Et,"remove",this))return this;if(Et=this.get(Et),Et){var Bt=this.recognizers,xe=Me(Bt,Et);xe!==-1&&(Bt.splice(xe,1),this.touchAction.update())}return this},on:function(Et,Bt){if(Et!==nt&&Bt!==nt){var xe=this.handlers;return Tt(ke(Et),function(Ke){xe[Ke]=xe[Ke]||[],xe[Ke].push(Bt)}),this}},off:function(Et,Bt){if(Et!==nt){var xe=this.handlers;return Tt(ke(Et),function(Ke){Bt?xe[Ke]&&xe[Ke].splice(Me(xe[Ke],Bt),1):delete xe[Ke]}),this}},emit:function(Et,Bt){this.options.domEvents&&Wi(Et,Bt);var xe=this.handlers[Et]&&this.handlers[Et].slice();if(!(!xe||!xe.length)){Bt.type=Et,Bt.preventDefault=function(){Bt.srcEvent.preventDefault()};for(var Ke=0;Ke<xe.length;)xe[Ke](Bt),Ke++}},destroy:function(){this.element&&Wr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Wr(Et,Bt){var xe=Et.element;if(xe.style){var Ke;Tt(Et.options.cssProps,function(yn,Cn){Ke=$(xe.style,Cn),Bt?(Et.oldCssProps[Ke]=xe.style[Ke],xe.style[Ke]=yn):xe.style[Ke]=Et.oldCssProps[Ke]||""}),Bt||(Et.oldCssProps={})}}function Wi(Et,Bt){var xe=Ot.createEvent("Event");xe.initEvent(Et,!0,!0),xe.gesture=Bt,Bt.target.dispatchEvent(xe)}kt(Bn,{INPUT_START:ct,INPUT_MOVE:zt,INPUT_END:ue,INPUT_CANCEL:_e,STATE_POSSIBLE:ae,STATE_BEGAN:Ae,STATE_CHANGED:De,STATE_ENDED:ge,STATE_RECOGNIZED:me,STATE_CANCELLED:Ze,STATE_FAILED:We,DIRECTION_NONE:St,DIRECTION_LEFT:re,DIRECTION_RIGHT:Pt,DIRECTION_UP:Y,DIRECTION_DOWN:Dt,DIRECTION_HORIZONTAL:V,DIRECTION_VERTICAL:C,DIRECTION_ALL:F,Manager:Pi,Input:ne,TouchAction:at,TouchInput:gr,MouseInput:ce,PointerEventInput:Oe,TouchMouseInput:zr,SingleTouchInput:dn,Recognizer:vn,AttrRecognizer:_n,Tap:Ln,Pan:On,Swipe:Vn,Pinch:hn,Rotate:Rn,Press:Hn,on:Vt,off:et,each:Tt,merge:Se,extend:Yt,assign:kt,inherit:Ie,bindFn:Ye,prefixed:$});var Gi=typeof st!="undefined"?st:typeof self!="undefined"?self:{};Gi.Hammer=Bn,xt=function(){return Bn}.call(fe,D,fe,Te),xt!==nt&&(Te.exports=xt)})(window,document,"Hammer")},47443:function(Te,fe,D){var xt=D(42118);function st(Ot,Xt){var nt=Ot==null?0:Ot.length;return!!nt&&xt(Ot,Xt,0)>-1}Te.exports=st},1196:function(Te){function fe(D,xt,st){for(var Ot=-1,Xt=D==null?0:D.length;++Ot<Xt;)if(st(xt,D[Ot]))return!0;return!1}Te.exports=fe},29750:function(Te){function fe(D,xt,st){return D===D&&(st!==void 0&&(D=D<=st?D:st),xt!==void 0&&(D=D>=xt?D:xt)),D}Te.exports=fe},41848:function(Te){function fe(D,xt,st,Ot){for(var Xt=D.length,nt=st+(Ot?1:-1);Ot?nt--:++nt<Xt;)if(xt(D[nt],nt,D))return nt;return-1}Te.exports=fe},42118:function(Te,fe,D){var xt=D(41848),st=D(62722),Ot=D(39375);function Xt(nt,qt,jt){return qt===qt?Ot(nt,qt,jt):xt(nt,st,jt)}Te.exports=Xt},74221:function(Te){function fe(D,xt,st,Ot){for(var Xt=st-1,nt=D.length;++Xt<nt;)if(Ot(D[Xt],xt))return Xt;return-1}Te.exports=fe},62722:function(Te){function fe(D){return D!==D}Te.exports=fe},65464:function(Te,fe,D){var xt=D(29932),st=D(42118),Ot=D(74221),Xt=D(51717),nt=D(6450),qt=Array.prototype,jt=qt.splice;function Ut(gt,ee,J,Q){var Rt=Q?Ot:st,Tt=-1,Ft=ee.length,kt=gt;for(gt===ee&&(ee=nt(ee)),J&&(kt=xt(gt,Xt(J)));++Tt<Ft;)for(var Yt=0,Se=ee[Tt],Ie=J?J(Se):Se;(Yt=Rt(kt,Ie,Yt,Q))>-1;)kt!==gt&&jt.call(kt,Yt,1),jt.call(gt,Yt,1);return gt}Te.exports=Ut},45652:function(Te,fe,D){var xt=D(88668),st=D(47443),Ot=D(1196),Xt=D(74757),nt=D(23593),qt=D(21814),jt=200;function Ut(gt,ee,J){var Q=-1,Rt=st,Tt=gt.length,Ft=!0,kt=[],Yt=kt;if(J)Ft=!1,Rt=Ot;else if(Tt>=jt){var Se=ee?null:nt(gt);if(Se)return qt(Se);Ft=!1,Rt=Xt,Yt=new xt}else Yt=ee?[]:kt;t:for(;++Q<Tt;){var Ie=gt[Q],Ye=ee?ee(Ie):Ie;if(Ie=J||Ie!==0?Ie:0,Ft&&Ye===Ye){for(var un=Yt.length;un--;)if(Yt[un]===Ye)continue t;ee&&Yt.push(Ye),kt.push(Ie)}else Rt(Yt,Ye,J)||(Yt!==kt&&Yt.push(Ye),kt.push(Ie))}return kt}Te.exports=Ut},23593:function(Te,fe,D){var xt=D(58525),st=D(28117),Ot=D(21814),Xt=1/0,nt=xt&&1/Ot(new xt([,-0]))[1]==Xt?function(qt){return new xt(qt)}:st;Te.exports=nt},39375:function(Te){function fe(D,xt,st){for(var Ot=st-1,Xt=D.length;++Ot<Xt;)if(D[Ot]===xt)return Ot;return-1}Te.exports=fe},74691:function(Te,fe,D){var xt=D(29750),st=D(14841);function Ot(Xt,nt,qt){return qt===void 0&&(qt=nt,nt=void 0),qt!==void 0&&(qt=st(qt),qt=qt===qt?qt:0),nt!==void 0&&(nt=st(nt),nt=nt===nt?nt:0),xt(st(Xt),nt,qt)}Te.exports=Ot},51584:function(Te,fe,D){var xt=D(44239),st=D(37005),Ot="[object Boolean]";function Xt(nt){return nt===!0||nt===!1||st(nt)&&xt(nt)==Ot}Te.exports=Xt},18446:function(Te,fe,D){var xt=D(90939);function st(Ot,Xt){return xt(Ot,Xt)}Te.exports=st},14293:function(Te){function fe(D){return D==null}Te.exports=fe},81763:function(Te,fe,D){var xt=D(44239),st=D(37005),Ot="[object Number]";function Xt(nt){return typeof nt=="number"||st(nt)&&xt(nt)==Ot}Te.exports=Xt},52353:function(Te){function fe(D){return D===void 0}Te.exports=fe},30236:function(Te,fe,D){var xt=D(42980),st=D(21463),Ot=st(function(Xt,nt,qt,jt){xt(Xt,nt,qt,jt)});Te.exports=Ot},28117:function(Te){function fe(){}Te.exports=fe},97019:function(Te,fe,D){var xt=D(5976),st=D(45604),Ot=xt(st);Te.exports=Ot},45604:function(Te,fe,D){var xt=D(65464);function st(Ot,Xt){return Ot&&Ot.length&&Xt&&Xt.length?xt(Ot,Xt):Ot}Te.exports=st},44908:function(Te,fe,D){var xt=D(45652);function st(Ot){return Ot&&Ot.length?xt(Ot):[]}Te.exports=st},73955:function(Te,fe,D){var xt=D(79833),st=0;function Ot(Xt){var nt=++st;return xt(Xt)+nt}Te.exports=Ot},92077:function(Te,fe,D){var xt,st;(function(Ot,Xt){xt=Xt,st=typeof xt=="function"?xt.call(fe,D,fe,Te):xt,st!==void 0&&(Te.exports=st)})(this,function(){var Ot,Xt,nt="2.0.6",qt={},jt={},Ut={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},gt={currentLocale:Ut.currentLocale,zeroFormat:Ut.zeroFormat,nullFormat:Ut.nullFormat,defaultFormat:Ut.defaultFormat,scalePercentBy100:Ut.scalePercentBy100};function ee(J,Q){this._input=J,this._value=Q}return Ot=function(J){var Q,Rt,Tt,Ft;if(Ot.isNumeral(J))Q=J.value();else if(J===0||typeof J=="undefined")Q=0;else if(J===null||Xt.isNaN(J))Q=null;else if(typeof J=="string")if(gt.zeroFormat&&J===gt.zeroFormat)Q=0;else if(gt.nullFormat&&J===gt.nullFormat||!J.replace(/[^0-9]+/g,"").length)Q=null;else{for(Rt in qt)if(Ft=typeof qt[Rt].regexps.unformat=="function"?qt[Rt].regexps.unformat():qt[Rt].regexps.unformat,Ft&&J.match(Ft)){Tt=qt[Rt].unformat;break}Tt=Tt||Ot._.stringToNumber,Q=Tt(J)}else Q=Number(J)||null;return new ee(J,Q)},Ot.version=nt,Ot.isNumeral=function(J){return J instanceof ee},Ot._=Xt={numberToFormat:function(J,Q,Rt){var Tt=jt[Ot.options.currentLocale],Ft=!1,kt=!1,Yt=0,Se="",Ie=1e12,Ye=1e9,un=1e6,we=1e3,Vt="",et=!1,oe,Gt,ke,Me,j,Mt,$,Ct,wt,z;if(J=J||0,Gt=Math.abs(J),Ot._.includes(Q,"(")?(Ft=!0,Q=Q.replace(/[\(|\)]/g,"")):(Ot._.includes(Q,"+")||Ot._.includes(Q,"-"))&&(Ct=Ot._.includes(Q,"+")?Q.indexOf("+"):J<0?Q.indexOf("-"):-1,Q=Q.replace(/[\+|\-]/g,"")),Ot._.includes(Q,"a")&&(oe=Q.match(/a(k|m|b|t)?/),oe=oe?oe[1]:!1,Ot._.includes(Q," a")&&(Se=" "),Q=Q.replace(new RegExp(Se+"a[kmbt]?"),""),Gt>=Ie&&!oe||oe==="t"?(Se+=Tt.abbreviations.trillion,J=J/Ie):Gt<Ie&&Gt>=Ye&&!oe||oe==="b"?(Se+=Tt.abbreviations.billion,J=J/Ye):Gt<Ye&&Gt>=un&&!oe||oe==="m"?(Se+=Tt.abbreviations.million,J=J/un):(Gt<un&&Gt>=we&&!oe||oe==="k")&&(Se+=Tt.abbreviations.thousand,J=J/we)),Ot._.includes(Q,"[.]")&&(kt=!0,Q=Q.replace("[.]",".")),Mt=J.toString().split(".")[0],$=Q.split(".")[1],wt=Q.indexOf(","),Yt=(Q.split(".")[0].split(",")[0].match(/0/g)||[]).length,$?(Ot._.includes($,"[")?($=$.replace("]",""),$=$.split("["),Vt=Ot._.toFixed(J,$[0].length+$[1].length,Rt,$[1].length)):Vt=Ot._.toFixed(J,$.length,Rt),Mt=Vt.split(".")[0],Ot._.includes(Vt,".")?Vt=Tt.delimiters.decimal+Vt.split(".")[1]:Vt="",kt&&Number(Vt.slice(1))===0&&(Vt="")):Mt=Ot._.toFixed(J,0,Rt),Se&&!oe&&Number(Mt)>=1e3&&Se!==Tt.abbreviations.trillion)switch(Mt=String(Number(Mt)/1e3),Se){case Tt.abbreviations.thousand:Se=Tt.abbreviations.million;break;case Tt.abbreviations.million:Se=Tt.abbreviations.billion;break;case Tt.abbreviations.billion:Se=Tt.abbreviations.trillion;break}if(Ot._.includes(Mt,"-")&&(Mt=Mt.slice(1),et=!0),Mt.length<Yt)for(var ot=Yt-Mt.length;ot>0;ot--)Mt="0"+Mt;return wt>-1&&(Mt=Mt.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+Tt.delimiters.thousands)),Q.indexOf(".")===0&&(Mt=""),z=Mt+Vt+(Se||""),Ft?z=(Ft&&et?"(":"")+z+(Ft&&et?")":""):Ct>=0?z=Ct===0?(et?"-":"+")+z:z+(et?"-":"+"):et&&(z="-"+z),z},stringToNumber:function(J){var Q=jt[gt.currentLocale],Rt=J,Tt={thousand:3,million:6,billion:9,trillion:12},Ft,kt,Yt,Se;if(gt.zeroFormat&&J===gt.zeroFormat)kt=0;else if(gt.nullFormat&&J===gt.nullFormat||!J.replace(/[^0-9]+/g,"").length)kt=null;else{kt=1,Q.delimiters.decimal!=="."&&(J=J.replace(/\./g,"").replace(Q.delimiters.decimal,"."));for(Ft in Tt)if(Se=new RegExp("[^a-zA-Z]"+Q.abbreviations[Ft]+"(?:\\)|(\\"+Q.currency.symbol+")?(?:\\))?)?$"),Rt.match(Se)){kt*=Math.pow(10,Tt[Ft]);break}kt*=(J.split("-").length+Math.min(J.split("(").length-1,J.split(")").length-1))%2?1:-1,J=J.replace(/[^0-9\.]+/g,""),kt*=Number(J)}return kt},isNaN:function(J){return typeof J=="number"&&isNaN(J)},includes:function(J,Q){return J.indexOf(Q)!==-1},insert:function(J,Q,Rt){return J.slice(0,Rt)+Q+J.slice(Rt)},reduce:function(J,Q){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof Q!="function")throw new TypeError(Q+" is not a function");var Rt=Object(J),Tt=Rt.length>>>0,Ft=0,kt;if(arguments.length===3)kt=arguments[2];else{for(;Ft<Tt&&!(Ft in Rt);)Ft++;if(Ft>=Tt)throw new TypeError("Reduce of empty array with no initial value");kt=Rt[Ft++]}for(;Ft<Tt;Ft++)Ft in Rt&&(kt=Q(kt,Rt[Ft],Ft,Rt));return kt},multiplier:function(J){var Q=J.toString().split(".");return Q.length<2?1:Math.pow(10,Q[1].length)},correctionFactor:function(){var J=Array.prototype.slice.call(arguments);return J.reduce(function(Q,Rt){var Tt=Xt.multiplier(Rt);return Q>Tt?Q:Tt},1)},toFixed:function(J,Q,Rt,Tt){var Ft=J.toString().split("."),kt=Q-(Tt||0),Yt,Se,Ie,Ye;return Ft.length===2?Yt=Math.min(Math.max(Ft[1].length,kt),Q):Yt=kt,Ie=Math.pow(10,Yt),Ye=(Rt(J+"e+"+Yt)/Ie).toFixed(Yt),Tt>Q-Yt&&(Se=new RegExp("\\.?0{1,"+(Tt-(Q-Yt))+"}$"),Ye=Ye.replace(Se,"")),Ye}},Ot.options=gt,Ot.formats=qt,Ot.locales=jt,Ot.locale=function(J){return J&&(gt.currentLocale=J.toLowerCase()),gt.currentLocale},Ot.localeData=function(J){if(!J)return jt[gt.currentLocale];if(J=J.toLowerCase(),!jt[J])throw new Error("Unknown locale : "+J);return jt[J]},Ot.reset=function(){for(var J in Ut)gt[J]=Ut[J]},Ot.zeroFormat=function(J){gt.zeroFormat=typeof J=="string"?J:null},Ot.nullFormat=function(J){gt.nullFormat=typeof J=="string"?J:null},Ot.defaultFormat=function(J){gt.defaultFormat=typeof J=="string"?J:"0.0"},Ot.register=function(J,Q,Rt){if(Q=Q.toLowerCase(),this[J+"s"][Q])throw new TypeError(Q+" "+J+" already registered.");return this[J+"s"][Q]=Rt,Rt},Ot.validate=function(J,Q){var Rt,Tt,Ft,kt,Yt,Se,Ie,Ye;if(typeof J!="string"&&(J+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",J)),J=J.trim(),J.match(/^\d+$/))return!0;if(J==="")return!1;try{Ie=Ot.localeData(Q)}catch(un){Ie=Ot.localeData(Ot.locale())}return Ft=Ie.currency.symbol,Yt=Ie.abbreviations,Rt=Ie.delimiters.decimal,Ie.delimiters.thousands==="."?Tt="\\.":Tt=Ie.delimiters.thousands,Ye=J.match(/^[^\d]+/),Ye!==null&&(J=J.substr(1),Ye[0]!==Ft)||(Ye=J.match(/[^\d]+$/),Ye!==null&&(J=J.slice(0,-1),Ye[0]!==Yt.thousand&&Ye[0]!==Yt.million&&Ye[0]!==Yt.billion&&Ye[0]!==Yt.trillion))?!1:(Se=new RegExp(Tt+"{2}"),J.match(/[^\d.,]/g)?!1:(kt=J.split(Rt),kt.length>2?!1:kt.length<2?!!kt[0].match(/^\d+.*\d$/)&&!kt[0].match(Se):kt[0].length===1?!!kt[0].match(/^\d+$/)&&!kt[0].match(Se)&&!!kt[1].match(/^\d+$/):!!kt[0].match(/^\d+.*\d$/)&&!kt[0].match(Se)&&!!kt[1].match(/^\d+$/)))},Ot.fn=ee.prototype={clone:function(){return Ot(this)},format:function(J,Q){var Rt=this._value,Tt=J||gt.defaultFormat,Ft,kt,Yt;if(Q=Q||Math.round,Rt===0&&gt.zeroFormat!==null)kt=gt.zeroFormat;else if(Rt===null&&gt.nullFormat!==null)kt=gt.nullFormat;else{for(Ft in qt)if(Tt.match(qt[Ft].regexps.format)){Yt=qt[Ft].format;break}Yt=Yt||Ot._.numberToFormat,kt=Yt(Rt,Tt,Q)}return kt},value:function(){return this._value},input:function(){return this._input},set:function(J){return this._value=Number(J),this},add:function(J){var Q=Xt.correctionFactor.call(null,this._value,J);function Rt(Tt,Ft,kt,Yt){return Tt+Math.round(Q*Ft)}return this._value=Xt.reduce([this._value,J],Rt,0)/Q,this},subtract:function(J){var Q=Xt.correctionFactor.call(null,this._value,J);function Rt(Tt,Ft,kt,Yt){return Tt-Math.round(Q*Ft)}return this._value=Xt.reduce([J],Rt,Math.round(this._value*Q))/Q,this},multiply:function(J){function Q(Rt,Tt,Ft,kt){var Yt=Xt.correctionFactor(Rt,Tt);return Math.round(Rt*Yt)*Math.round(Tt*Yt)/Math.round(Yt*Yt)}return this._value=Xt.reduce([this._value,J],Q,1),this},divide:function(J){function Q(Rt,Tt,Ft,kt){var Yt=Xt.correctionFactor(Rt,Tt);return Math.round(Rt*Yt)/Math.round(Tt*Yt)}return this._value=Xt.reduce([this._value,J],Q),this},difference:function(J){return Math.abs(Ot(this._value).subtract(J).value())}},Ot.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(J){var Q=J%10;return~~(J%100/10)===1?"th":Q===1?"st":Q===2?"nd":Q===3?"rd":"th"},currency:{symbol:"$"}}),function(){Ot.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(J,Q,Rt){var Tt=Ot._.includes(Q," BPS")?" ":"",Ft;return J=J*1e4,Q=Q.replace(/\s?BPS/,""),Ft=Ot._.numberToFormat(J,Q,Rt),Ot._.includes(Ft,")")?(Ft=Ft.split(""),Ft.splice(-1,0,Tt+"BPS"),Ft=Ft.join("")):Ft=Ft+Tt+"BPS",Ft},unformat:function(J){return+(Ot._.stringToNumber(J)*1e-4).toFixed(15)}})}(),function(){var J={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},Q={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},Rt=J.suffixes.concat(Q.suffixes.filter(function(Ft){return J.suffixes.indexOf(Ft)<0})),Tt=Rt.join("|");Tt="("+Tt.replace("B","B(?!PS)")+")",Ot.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(Tt)},format:function(Ft,kt,Yt){var Se,Ie=Ot._.includes(kt,"ib")?Q:J,Ye=Ot._.includes(kt," b")||Ot._.includes(kt," ib")?" ":"",un,we,Vt;for(kt=kt.replace(/\s?i?b/,""),un=0;un<=Ie.suffixes.length;un++)if(we=Math.pow(Ie.base,un),Vt=Math.pow(Ie.base,un+1),Ft===null||Ft===0||Ft>=we&&Ft<Vt){Ye+=Ie.suffixes[un],we>0&&(Ft=Ft/we);break}return Se=Ot._.numberToFormat(Ft,kt,Yt),Se+Ye},unformat:function(Ft){var kt=Ot._.stringToNumber(Ft),Yt,Se;if(kt){for(Yt=J.suffixes.length-1;Yt>=0;Yt--){if(Ot._.includes(Ft,J.suffixes[Yt])){Se=Math.pow(J.base,Yt);break}if(Ot._.includes(Ft,Q.suffixes[Yt])){Se=Math.pow(Q.base,Yt);break}}kt*=Se||1}return kt}})}(),function(){Ot.register("format","currency",{regexps:{format:/(\$)/},format:function(J,Q,Rt){var Tt=Ot.locales[Ot.options.currentLocale],Ft={before:Q.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:Q.match(/([\+|\-|\)|\s|\$]*)$/)[0]},kt,Yt,Se;for(Q=Q.replace(/\s?\$\s?/,""),kt=Ot._.numberToFormat(J,Q,Rt),J>=0?(Ft.before=Ft.before.replace(/[\-\(]/,""),Ft.after=Ft.after.replace(/[\-\)]/,"")):J<0&&!Ot._.includes(Ft.before,"-")&&!Ot._.includes(Ft.before,"(")&&(Ft.before="-"+Ft.before),Se=0;Se<Ft.before.length;Se++)switch(Yt=Ft.before[Se],Yt){case"$":kt=Ot._.insert(kt,Tt.currency.symbol,Se);break;case" ":kt=Ot._.insert(kt," ",Se+Tt.currency.symbol.length-1);break}for(Se=Ft.after.length-1;Se>=0;Se--)switch(Yt=Ft.after[Se],Yt){case"$":kt=Se===Ft.after.length-1?kt+Tt.currency.symbol:Ot._.insert(kt,Tt.currency.symbol,-(Ft.after.length-(1+Se)));break;case" ":kt=Se===Ft.after.length-1?kt+" ":Ot._.insert(kt," ",-(Ft.after.length-(1+Se)+Tt.currency.symbol.length-1));break}return kt}})}(),function(){Ot.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(J,Q,Rt){var Tt,Ft=typeof J=="number"&&!Ot._.isNaN(J)?J.toExponential():"0e+0",kt=Ft.split("e");return Q=Q.replace(/e[\+|\-]{1}0/,""),Tt=Ot._.numberToFormat(Number(kt[0]),Q,Rt),Tt+"e"+kt[1]},unformat:function(J){var Q=Ot._.includes(J,"e+")?J.split("e+"):J.split("e-"),Rt=Number(Q[0]),Tt=Number(Q[1]);Tt=Ot._.includes(J,"e-")?Tt*=-1:Tt;function Ft(kt,Yt,Se,Ie){var Ye=Ot._.correctionFactor(kt,Yt),un=kt*Ye*(Yt*Ye)/(Ye*Ye);return un}return Ot._.reduce([Rt,Math.pow(10,Tt)],Ft,1)}})}(),function(){Ot.register("format","ordinal",{regexps:{format:/(o)/},format:function(J,Q,Rt){var Tt=Ot.locales[Ot.options.currentLocale],Ft,kt=Ot._.includes(Q," o")?" ":"";return Q=Q.replace(/\s?o/,""),kt+=Tt.ordinal(J),Ft=Ot._.numberToFormat(J,Q,Rt),Ft+kt}})}(),function(){Ot.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(J,Q,Rt){var Tt=Ot._.includes(Q," %")?" ":"",Ft;return Ot.options.scalePercentBy100&&(J=J*100),Q=Q.replace(/\s?\%/,""),Ft=Ot._.numberToFormat(J,Q,Rt),Ot._.includes(Ft,")")?(Ft=Ft.split(""),Ft.splice(-1,0,Tt+"%"),Ft=Ft.join("")):Ft=Ft+Tt+"%",Ft},unformat:function(J){var Q=Ot._.stringToNumber(J);return Ot.options.scalePercentBy100?Q*.01:Q}})}(),function(){Ot.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(J,Q,Rt){var Tt=Math.floor(J/60/60),Ft=Math.floor((J-Tt*60*60)/60),kt=Math.round(J-Tt*60*60-Ft*60);return Tt+":"+(Ft<10?"0"+Ft:Ft)+":"+(kt<10?"0"+kt:kt)},unformat:function(J){var Q=J.split(":"),Rt=0;return Q.length===3?(Rt=Rt+Number(Q[0])*60*60,Rt=Rt+Number(Q[1])*60,Rt=Rt+Number(Q[2])):Q.length===2&&(Rt=Rt+Number(Q[0])*60,Rt=Rt+Number(Q[1])),Number(Rt)}})}(),Ot})},3614:function(Te,fe,D){"use strict";Te.exports=st;var xt=D(80645);function st(j){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(j)?j:new Uint8Array(j||0),this.pos=0,this.type=0,this.length=this.buf.length}st.Varint=0,st.Fixed64=1,st.Bytes=2,st.Fixed32=5;var Ot=65536*65536,Xt=1/Ot,nt=12,qt=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");st.prototype={destroy:function(){this.buf=null},readFields:function(j,Mt,$){for($=$||this.length;this.pos<$;){var Ct=this.readVarint(),wt=Ct>>3,z=this.pos;this.type=Ct&7,j(wt,Mt,this),this.pos===z&&this.skip(Ct)}return Mt},readMessage:function(j,Mt){return this.readFields(j,Mt,this.readVarint()+this.pos)},readFixed32:function(){var j=Vt(this.buf,this.pos);return this.pos+=4,j},readSFixed32:function(){var j=oe(this.buf,this.pos);return this.pos+=4,j},readFixed64:function(){var j=Vt(this.buf,this.pos)+Vt(this.buf,this.pos+4)*Ot;return this.pos+=8,j},readSFixed64:function(){var j=Vt(this.buf,this.pos)+oe(this.buf,this.pos+4)*Ot;return this.pos+=8,j},readFloat:function(){var j=xt.read(this.buf,this.pos,!0,23,4);return this.pos+=4,j},readDouble:function(){var j=xt.read(this.buf,this.pos,!0,52,8);return this.pos+=8,j},readVarint:function(j){var Mt=this.buf,$,Ct;return Ct=Mt[this.pos++],$=Ct&127,Ct<128||(Ct=Mt[this.pos++],$|=(Ct&127)<<7,Ct<128)||(Ct=Mt[this.pos++],$|=(Ct&127)<<14,Ct<128)||(Ct=Mt[this.pos++],$|=(Ct&127)<<21,Ct<128)?$:(Ct=Mt[this.pos],$|=(Ct&15)<<28,jt($,j,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var j=this.readVarint();return j%2===1?(j+1)/-2:j/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var j=this.readVarint()+this.pos,Mt=this.pos;return this.pos=j,j-Mt>=nt&&qt?ke(this.buf,Mt,j):Gt(this.buf,Mt,j)},readBytes:function(){var j=this.readVarint()+this.pos,Mt=this.buf.subarray(this.pos,j);return this.pos=j,Mt},readPackedVarint:function(j,Mt){if(this.type!==st.Bytes)return j.push(this.readVarint(Mt));var $=Ut(this);for(j=j||[];this.pos<$;)j.push(this.readVarint(Mt));return j},readPackedSVarint:function(j){if(this.type!==st.Bytes)return j.push(this.readSVarint());var Mt=Ut(this);for(j=j||[];this.pos<Mt;)j.push(this.readSVarint());return j},readPackedBoolean:function(j){if(this.type!==st.Bytes)return j.push(this.readBoolean());var Mt=Ut(this);for(j=j||[];this.pos<Mt;)j.push(this.readBoolean());return j},readPackedFloat:function(j){if(this.type!==st.Bytes)return j.push(this.readFloat());var Mt=Ut(this);for(j=j||[];this.pos<Mt;)j.push(this.readFloat());return j},readPackedDouble:function(j){if(this.type!==st.Bytes)return j.push(this.readDouble());var Mt=Ut(this);for(j=j||[];this.pos<Mt;)j.push(this.readDouble());return j},readPackedFixed32:function(j){if(this.type!==st.Bytes)return j.push(this.readFixed32());var Mt=Ut(this);for(j=j||[];this.pos<Mt;)j.push(this.readFixed32());return j},readPackedSFixed32:function(j){if(this.type!==st.Bytes)return j.push(this.readSFixed32());var Mt=Ut(this);for(j=j||[];this.pos<Mt;)j.push(this.readSFixed32());return j},readPackedFixed64:function(j){if(this.type!==st.Bytes)return j.push(this.readFixed64());var Mt=Ut(this);for(j=j||[];this.pos<Mt;)j.push(this.readFixed64());return j},readPackedSFixed64:function(j){if(this.type!==st.Bytes)return j.push(this.readSFixed64());var Mt=Ut(this);for(j=j||[];this.pos<Mt;)j.push(this.readSFixed64());return j},skip:function(j){var Mt=j&7;if(Mt===st.Varint)for(;this.buf[this.pos++]>127;);else if(Mt===st.Bytes)this.pos=this.readVarint()+this.pos;else if(Mt===st.Fixed32)this.pos+=4;else if(Mt===st.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+Mt)},writeTag:function(j,Mt){this.writeVarint(j<<3|Mt)},realloc:function(j){for(var Mt=this.length||16;Mt<this.pos+j;)Mt*=2;if(Mt!==this.length){var $=new Uint8Array(Mt);$.set(this.buf),this.buf=$,this.length=Mt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(j){this.realloc(4),et(this.buf,j,this.pos),this.pos+=4},writeSFixed32:function(j){this.realloc(4),et(this.buf,j,this.pos),this.pos+=4},writeFixed64:function(j){this.realloc(8),et(this.buf,j&-1,this.pos),et(this.buf,Math.floor(j*Xt),this.pos+4),this.pos+=8},writeSFixed64:function(j){this.realloc(8),et(this.buf,j&-1,this.pos),et(this.buf,Math.floor(j*Xt),this.pos+4),this.pos+=8},writeVarint:function(j){if(j=+j||0,j>268435455||j<0){ee(j,this);return}this.realloc(4),this.buf[this.pos++]=j&127|(j>127?128:0),!(j<=127)&&(this.buf[this.pos++]=(j>>>=7)&127|(j>127?128:0),!(j<=127)&&(this.buf[this.pos++]=(j>>>=7)&127|(j>127?128:0),!(j<=127)&&(this.buf[this.pos++]=j>>>7&127)))},writeSVarint:function(j){this.writeVarint(j<0?-j*2-1:j*2)},writeBoolean:function(j){this.writeVarint(!!j)},writeString:function(j){j=String(j),this.realloc(j.length*4),this.pos++;var Mt=this.pos;this.pos=Me(this.buf,j,this.pos);var $=this.pos-Mt;$>=128&&Rt(Mt,$,this),this.pos=Mt-1,this.writeVarint($),this.pos+=$},writeFloat:function(j){this.realloc(4),xt.write(this.buf,j,this.pos,!0,23,4),this.pos+=4},writeDouble:function(j){this.realloc(8),xt.write(this.buf,j,this.pos,!0,52,8),this.pos+=8},writeBytes:function(j){var Mt=j.length;this.writeVarint(Mt),this.realloc(Mt);for(var $=0;$<Mt;$++)this.buf[this.pos++]=j[$]},writeRawMessage:function(j,Mt){this.pos++;var $=this.pos;j(Mt,this);var Ct=this.pos-$;Ct>=128&&Rt($,Ct,this),this.pos=$-1,this.writeVarint(Ct),this.pos+=Ct},writeMessage:function(j,Mt,$){this.writeTag(j,st.Bytes),this.writeRawMessage(Mt,$)},writePackedVarint:function(j,Mt){Mt.length&&this.writeMessage(j,Tt,Mt)},writePackedSVarint:function(j,Mt){Mt.length&&this.writeMessage(j,Ft,Mt)},writePackedBoolean:function(j,Mt){Mt.length&&this.writeMessage(j,Se,Mt)},writePackedFloat:function(j,Mt){Mt.length&&this.writeMessage(j,kt,Mt)},writePackedDouble:function(j,Mt){Mt.length&&this.writeMessage(j,Yt,Mt)},writePackedFixed32:function(j,Mt){Mt.length&&this.writeMessage(j,Ie,Mt)},writePackedSFixed32:function(j,Mt){Mt.length&&this.writeMessage(j,Ye,Mt)},writePackedFixed64:function(j,Mt){Mt.length&&this.writeMessage(j,un,Mt)},writePackedSFixed64:function(j,Mt){Mt.length&&this.writeMessage(j,we,Mt)},writeBytesField:function(j,Mt){this.writeTag(j,st.Bytes),this.writeBytes(Mt)},writeFixed32Field:function(j,Mt){this.writeTag(j,st.Fixed32),this.writeFixed32(Mt)},writeSFixed32Field:function(j,Mt){this.writeTag(j,st.Fixed32),this.writeSFixed32(Mt)},writeFixed64Field:function(j,Mt){this.writeTag(j,st.Fixed64),this.writeFixed64(Mt)},writeSFixed64Field:function(j,Mt){this.writeTag(j,st.Fixed64),this.writeSFixed64(Mt)},writeVarintField:function(j,Mt){this.writeTag(j,st.Varint),this.writeVarint(Mt)},writeSVarintField:function(j,Mt){this.writeTag(j,st.Varint),this.writeSVarint(Mt)},writeStringField:function(j,Mt){this.writeTag(j,st.Bytes),this.writeString(Mt)},writeFloatField:function(j,Mt){this.writeTag(j,st.Fixed32),this.writeFloat(Mt)},writeDoubleField:function(j,Mt){this.writeTag(j,st.Fixed64),this.writeDouble(Mt)},writeBooleanField:function(j,Mt){this.writeVarintField(j,!!Mt)}};function jt(j,Mt,$){var Ct=$.buf,wt,z;if(z=Ct[$.pos++],wt=(z&112)>>4,z<128||(z=Ct[$.pos++],wt|=(z&127)<<3,z<128)||(z=Ct[$.pos++],wt|=(z&127)<<10,z<128)||(z=Ct[$.pos++],wt|=(z&127)<<17,z<128)||(z=Ct[$.pos++],wt|=(z&127)<<24,z<128)||(z=Ct[$.pos++],wt|=(z&1)<<31,z<128))return gt(j,wt,Mt);throw new Error("Expected varint not more than 10 bytes")}function Ut(j){return j.type===st.Bytes?j.readVarint()+j.pos:j.pos+1}function gt(j,Mt,$){return $?Mt*4294967296+(j>>>0):(Mt>>>0)*4294967296+(j>>>0)}function ee(j,Mt){var $,Ct;if(j>=0?($=j%4294967296|0,Ct=j/4294967296|0):($=~(-j%4294967296),Ct=~(-j/4294967296),$^4294967295?$=$+1|0:($=0,Ct=Ct+1|0)),j>=18446744073709552e3||j<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Mt.realloc(10),J($,Ct,Mt),Q(Ct,Mt)}function J(j,Mt,$){$.buf[$.pos++]=j&127|128,j>>>=7,$.buf[$.pos++]=j&127|128,j>>>=7,$.buf[$.pos++]=j&127|128,j>>>=7,$.buf[$.pos++]=j&127|128,j>>>=7,$.buf[$.pos]=j&127}function Q(j,Mt){var $=(j&7)<<4;Mt.buf[Mt.pos++]|=$|((j>>>=3)?128:0),j&&(Mt.buf[Mt.pos++]=j&127|((j>>>=7)?128:0),j&&(Mt.buf[Mt.pos++]=j&127|((j>>>=7)?128:0),j&&(Mt.buf[Mt.pos++]=j&127|((j>>>=7)?128:0),j&&(Mt.buf[Mt.pos++]=j&127|((j>>>=7)?128:0),j&&(Mt.buf[Mt.pos++]=j&127)))))}function Rt(j,Mt,$){var Ct=Mt<=16383?1:Mt<=2097151?2:Mt<=268435455?3:Math.floor(Math.log(Mt)/(Math.LN2*7));$.realloc(Ct);for(var wt=$.pos-1;wt>=j;wt--)$.buf[wt+Ct]=$.buf[wt]}function Tt(j,Mt){for(var $=0;$<j.length;$++)Mt.writeVarint(j[$])}function Ft(j,Mt){for(var $=0;$<j.length;$++)Mt.writeSVarint(j[$])}function kt(j,Mt){for(var $=0;$<j.length;$++)Mt.writeFloat(j[$])}function Yt(j,Mt){for(var $=0;$<j.length;$++)Mt.writeDouble(j[$])}function Se(j,Mt){for(var $=0;$<j.length;$++)Mt.writeBoolean(j[$])}function Ie(j,Mt){for(var $=0;$<j.length;$++)Mt.writeFixed32(j[$])}function Ye(j,Mt){for(var $=0;$<j.length;$++)Mt.writeSFixed32(j[$])}function un(j,Mt){for(var $=0;$<j.length;$++)Mt.writeFixed64(j[$])}function we(j,Mt){for(var $=0;$<j.length;$++)Mt.writeSFixed64(j[$])}function Vt(j,Mt){return(j[Mt]|j[Mt+1]<<8|j[Mt+2]<<16)+j[Mt+3]*16777216}function et(j,Mt,$){j[$]=Mt,j[$+1]=Mt>>>8,j[$+2]=Mt>>>16,j[$+3]=Mt>>>24}function oe(j,Mt){return(j[Mt]|j[Mt+1]<<8|j[Mt+2]<<16)+(j[Mt+3]<<24)}function Gt(j,Mt,$){for(var Ct="",wt=Mt;wt<$;){var z=j[wt],ot=null,Jt=z>239?4:z>223?3:z>191?2:1;if(wt+Jt>$)break;var de,pe,Xe;Jt===1?z<128&&(ot=z):Jt===2?(de=j[wt+1],(de&192)===128&&(ot=(z&31)<<6|de&63,ot<=127&&(ot=null))):Jt===3?(de=j[wt+1],pe=j[wt+2],(de&192)===128&&(pe&192)===128&&(ot=(z&15)<<12|(de&63)<<6|pe&63,(ot<=2047||ot>=55296&&ot<=57343)&&(ot=null))):Jt===4&&(de=j[wt+1],pe=j[wt+2],Xe=j[wt+3],(de&192)===128&&(pe&192)===128&&(Xe&192)===128&&(ot=(z&15)<<18|(de&63)<<12|(pe&63)<<6|Xe&63,(ot<=65535||ot>=1114112)&&(ot=null))),ot===null?(ot=65533,Jt=1):ot>65535&&(ot-=65536,Ct+=String.fromCharCode(ot>>>10&1023|55296),ot=56320|ot&1023),Ct+=String.fromCharCode(ot),wt+=Jt}return Ct}function ke(j,Mt,$){return qt.decode(j.subarray(Mt,$))}function Me(j,Mt,$){for(var Ct=0,wt,z;Ct<Mt.length;Ct++){if(wt=Mt.charCodeAt(Ct),wt>55295&&wt<57344)if(z)if(wt<56320){j[$++]=239,j[$++]=191,j[$++]=189,z=wt;continue}else wt=z-55296<<10|wt-56320|65536,z=null;else{wt>56319||Ct+1===Mt.length?(j[$++]=239,j[$++]=191,j[$++]=189):z=wt;continue}else z&&(j[$++]=239,j[$++]=191,j[$++]=189,z=null);wt<128?j[$++]=wt:(wt<2048?j[$++]=wt>>6|192:(wt<65536?j[$++]=wt>>12|224:(j[$++]=wt>>18|240,j[$++]=wt>>12&63|128),j[$++]=wt>>6&63|128),j[$++]=wt&63|128)}return $}},73807:function(Te){"use strict";var fe=Te.exports;Te.exports.isNumber=function(D){return typeof D=="number"},Te.exports.findMin=function(D){if(D.length===0)return 1/0;for(var xt=D[0],st=1;st<D.length;st++)xt=Math.min(xt,D[st]);return xt},Te.exports.findMax=function(D){if(D.length===0)return-1/0;for(var xt=D[0],st=1;st<D.length;st++)xt=Math.max(xt,D[st]);return xt},Te.exports.findMinMulti=function(D){for(var xt=fe.findMin(D[0]),st=1;st<D.length;st++)xt=Math.min(xt,fe.findMin(D[st]));return xt},Te.exports.findMaxMulti=function(D){for(var xt=fe.findMax(D[0]),st=1;st<D.length;st++)xt=Math.max(xt,fe.findMax(D[st]));return xt},Te.exports.inside=function(D,xt,st){return D<=st&&st<=xt}},53843:function(Te,fe,D){"use strict";var xt=50,st=2,Ot=Math.log(2),Xt=Te.exports,nt=D(73807);function qt(Ut){return 1-Math.abs(Ut)}Te.exports.getUnifiedMinMax=function(Ut,gt){return Xt.getUnifiedMinMaxMulti([Ut],gt)},Te.exports.getUnifiedMinMaxMulti=function(Ut,gt){gt=gt||{};var ee=!1,J=!1,Q=nt.isNumber(gt.width)?gt.width:st,Rt=nt.isNumber(gt.size)?gt.size:xt,Tt=nt.isNumber(gt.min)?gt.min:(ee=!0,nt.findMinMulti(Ut)),Ft=nt.isNumber(gt.max)?gt.max:(J=!0,nt.findMaxMulti(Ut)),kt=Ft-Tt,Yt=kt/(Rt-1);return ee&&(Tt=Tt-2*Q*Yt),J&&(Ft=Ft+2*Q*Yt),{min:Tt,max:Ft}},Te.exports.create=function(Ut,gt){if(gt=gt||{},!Ut||Ut.length===0)return[];var ee=nt.isNumber(gt.size)?gt.size:xt,J=nt.isNumber(gt.width)?gt.width:st,Q=Xt.getUnifiedMinMax(Ut,{size:ee,width:J,min:gt.min,max:gt.max}),Rt=Q.min,Tt=Q.max,Ft=Tt-Rt,kt=Ft/(ee-1);if(Ft===0)return[{x:Rt,y:1}];for(var Yt=[],Se=0;Se<ee;Se++)Yt.push({x:Rt+Se*kt,y:0});var Ie=function(ke){return Math.floor((ke-Rt)/kt)},Ye=jt(qt,J),un=Ye[J],we=Ye[J-1]-Ye[J-2],Vt=0;Ut.forEach(function(ke){var Me=Ie(ke);if(!(Me+J<0||Me-J>=Yt.length)){var j=Math.max(Me-J,0),Mt=Me,$=Math.min(Me+J,Yt.length-1),Ct=j-(Me-J),wt=Me+J-$,z=Ye[-J-1+Ct]||0,ot=Ye[-J-1+wt]||0,Jt=un/(un-z-ot);Ct>0&&(Vt+=Jt*(Ct-1)*we);var de=Math.max(0,Me-J+1);nt.inside(0,Yt.length-1,de)&&(Yt[de].y+=Jt*1*we),nt.inside(0,Yt.length-1,Mt+1)&&(Yt[Mt+1].y-=Jt*2*we),nt.inside(0,Yt.length-1,$+1)&&(Yt[$+1].y+=Jt*1*we)}});var et=Vt,oe=0,Gt=0;return Yt.forEach(function(ke){oe+=ke.y,et+=oe,ke.y=et,Gt+=et}),Gt>0&&Yt.forEach(function(ke){ke.y/=Gt}),Yt};function jt(Ut,gt){for(var ee={},J=0,Q=-gt;Q<=gt;Q++)J+=Ut(Q/gt),ee[Q]=J;return ee}Te.exports.getExpectedValueFromPdf=function(Ut){if(!(!Ut||Ut.length===0)){var gt=0;return Ut.forEach(function(ee){gt+=ee.x*ee.y}),gt}},Te.exports.getXWithLeftTailArea=function(Ut,gt){if(!(!Ut||Ut.length===0)){for(var ee=0,J=0,Q=0;Q<Ut.length&&(J=Q,ee+=Ut[Q].y,!(ee>=gt));Q++);return Ut[J].x}},Te.exports.getPerplexity=function(Ut){if(!(!Ut||Ut.length===0)){var gt=0;return Ut.forEach(function(ee){var J=Math.log(ee.y);isFinite(J)&&(gt+=ee.y*J)}),gt=-gt/Ot,Math.pow(2,gt)}}},32676:function(Te,fe,D){var xt=D(34155);(function(st,Ot){Te.exports=Ot()})(this,function(){"use strict";function st(ut,k){var H={label:0,sent:function(){if(bt[0]&1)throw bt[1];return bt[1]},trys:[],ops:[]},rt,yt,bt,ce;return ce={next:se(0),throw:se(1),return:se(2)},typeof Symbol=="function"&&(ce[Symbol.iterator]=function(){return this}),ce;function se(Pe){return function(rn){return Ne([Pe,rn])}}function Ne(Pe){if(rt)throw new TypeError("Generator is already executing.");for(;H;)try{if(rt=1,yt&&(bt=Pe[0]&2?yt.return:Pe[0]?yt.throw||((bt=yt.return)&&bt.call(yt),0):yt.next)&&!(bt=bt.call(yt,Pe[1])).done)return bt;switch(yt=0,bt&&(Pe=[Pe[0]&2,bt.value]),Pe[0]){case 0:case 1:bt=Pe;break;case 4:return H.label++,{value:Pe[1],done:!1};case 5:H.label++,yt=Pe[1],Pe=[0];continue;case 7:Pe=H.ops.pop(),H.trys.pop();continue;default:if(bt=H.trys,!(bt=bt.length>0&&bt[bt.length-1])&&(Pe[0]===6||Pe[0]===2)){H=0;continue}if(Pe[0]===3&&(!bt||Pe[1]>bt[0]&&Pe[1]<bt[3])){H.label=Pe[1];break}if(Pe[0]===6&&H.label<bt[1]){H.label=bt[1],bt=Pe;break}if(bt&&H.label<bt[2]){H.label=bt[2],H.ops.push(Pe);break}bt[2]&&H.ops.pop(),H.trys.pop();continue}Pe=k.call(ut,H)}catch(rn){Pe=[6,rn],yt=0}finally{rt=bt=0}if(Pe[0]&5)throw Pe[1];return{value:Pe[0]?Pe[1]:void 0,done:!0}}}var Ot=function(){function ut(k,H){this.next=null,this.key=k,this.data=H,this.left=null,this.right=null}return ut}();function Xt(ut,k){return ut>k?1:ut<k?-1:0}function nt(ut,k,H){for(var rt=new Ot(null,null),yt=rt,bt=rt;;){var ce=H(ut,k.key);if(ce<0){if(k.left===null)break;if(H(ut,k.left.key)<0){var se=k.left;if(k.left=se.right,se.right=k,k=se,k.left===null)break}bt.left=k,bt=k,k=k.left}else if(ce>0){if(k.right===null)break;if(H(ut,k.right.key)>0){var se=k.right;if(k.right=se.left,se.left=k,k=se,k.right===null)break}yt.right=k,yt=k,k=k.right}else break}return yt.right=k.left,bt.left=k.right,k.left=rt.right,k.right=rt.left,k}function qt(ut,k,H,rt){var yt=new Ot(ut,k);if(H===null)return yt.left=yt.right=null,yt;H=nt(ut,H,rt);var bt=rt(ut,H.key);return bt<0?(yt.left=H.left,yt.right=H,H.left=null):bt>=0&&(yt.right=H.right,yt.left=H,H.right=null),yt}function jt(ut,k,H){var rt=null,yt=null;if(k){k=nt(ut,k,H);var bt=H(k.key,ut);bt===0?(rt=k.left,yt=k.right):bt<0?(yt=k.right,k.right=null,rt=k):(rt=k.left,k.left=null,yt=k)}return{left:rt,right:yt}}function Ut(ut,k,H){return k===null?ut:(ut===null||(k=nt(ut.key,k,H),k.left=ut),k)}function gt(ut,k,H,rt,yt){if(ut){rt(""+k+(H?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+yt(ut)+`
`);var bt=k+(H?"    ":"\u2502   ");ut.left&&gt(ut.left,bt,!1,rt,yt),ut.right&&gt(ut.right,bt,!0,rt,yt)}}var ee=function(){function ut(k){k===void 0&&(k=Xt),this._root=null,this._size=0,this._comparator=k}return ut.prototype.insert=function(k,H){return this._size++,this._root=qt(k,H,this._root,this._comparator)},ut.prototype.add=function(k,H){var rt=new Ot(k,H);this._root===null&&(rt.left=rt.right=null,this._size++,this._root=rt);var yt=this._comparator,bt=nt(k,this._root,yt),ce=yt(k,bt.key);return ce===0?this._root=bt:(ce<0?(rt.left=bt.left,rt.right=bt,bt.left=null):ce>0&&(rt.right=bt.right,rt.left=bt,bt.right=null),this._size++,this._root=rt),this._root},ut.prototype.remove=function(k){this._root=this._remove(k,this._root,this._comparator)},ut.prototype._remove=function(k,H,rt){var yt;if(H===null)return null;H=nt(k,H,rt);var bt=rt(k,H.key);return bt===0?(H.left===null?yt=H.right:(yt=nt(k,H.left,rt),yt.right=H.right),this._size--,yt):H},ut.prototype.pop=function(){var k=this._root;if(k){for(;k.left;)k=k.left;return this._root=nt(k.key,this._root,this._comparator),this._root=this._remove(k.key,this._root,this._comparator),{key:k.key,data:k.data}}return null},ut.prototype.findStatic=function(k){for(var H=this._root,rt=this._comparator;H;){var yt=rt(k,H.key);if(yt===0)return H;yt<0?H=H.left:H=H.right}return null},ut.prototype.find=function(k){return this._root&&(this._root=nt(k,this._root,this._comparator),this._comparator(k,this._root.key)!==0)?null:this._root},ut.prototype.contains=function(k){for(var H=this._root,rt=this._comparator;H;){var yt=rt(k,H.key);if(yt===0)return!0;yt<0?H=H.left:H=H.right}return!1},ut.prototype.forEach=function(k,H){for(var rt=this._root,yt=[],bt=!1;!bt;)rt!==null?(yt.push(rt),rt=rt.left):yt.length!==0?(rt=yt.pop(),k.call(H,rt),rt=rt.right):bt=!0;return this},ut.prototype.range=function(k,H,rt,yt){for(var bt=[],ce=this._comparator,se=this._root,Ne;bt.length!==0||se;)if(se)bt.push(se),se=se.left;else{if(se=bt.pop(),Ne=ce(se.key,H),Ne>0)break;if(ce(se.key,k)>=0&&rt.call(yt,se))return this;se=se.right}return this},ut.prototype.keys=function(){var k=[];return this.forEach(function(H){var rt=H.key;return k.push(rt)}),k},ut.prototype.values=function(){var k=[];return this.forEach(function(H){var rt=H.data;return k.push(rt)}),k},ut.prototype.min=function(){return this._root?this.minNode(this._root).key:null},ut.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},ut.prototype.minNode=function(k){if(k===void 0&&(k=this._root),k)for(;k.left;)k=k.left;return k},ut.prototype.maxNode=function(k){if(k===void 0&&(k=this._root),k)for(;k.right;)k=k.right;return k},ut.prototype.at=function(k){for(var H=this._root,rt=!1,yt=0,bt=[];!rt;)if(H)bt.push(H),H=H.left;else if(bt.length>0){if(H=bt.pop(),yt===k)return H;yt++,H=H.right}else rt=!0;return null},ut.prototype.next=function(k){var H=this._root,rt=null;if(k.right){for(rt=k.right;rt.left;)rt=rt.left;return rt}for(var yt=this._comparator;H;){var bt=yt(k.key,H.key);if(bt===0)break;bt<0?(rt=H,H=H.left):H=H.right}return rt},ut.prototype.prev=function(k){var H=this._root,rt=null;if(k.left!==null){for(rt=k.left;rt.right;)rt=rt.right;return rt}for(var yt=this._comparator;H;){var bt=yt(k.key,H.key);if(bt===0)break;bt<0?H=H.left:(rt=H,H=H.right)}return rt},ut.prototype.clear=function(){return this._root=null,this._size=0,this},ut.prototype.toList=function(){return Rt(this._root)},ut.prototype.load=function(k,H,rt){H===void 0&&(H=[]),rt===void 0&&(rt=!1);var yt=k.length,bt=this._comparator;if(rt&&kt(k,H,0,yt-1,bt),this._root===null)this._root=J(k,H,0,yt),this._size=yt;else{var ce=Ft(this.toList(),Q(k,H),bt);yt=this._size+yt,this._root=Tt({head:ce},0,yt)}return this},ut.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(ut.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(ut.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),ut.prototype.toString=function(k){k===void 0&&(k=function(rt){return String(rt.key)});var H=[];return gt(this._root,"",!0,function(rt){return H.push(rt)},k),H.join("")},ut.prototype.update=function(k,H,rt){var yt=this._comparator,bt=jt(k,this._root,yt),ce=bt.left,se=bt.right;yt(k,H)<0?se=qt(H,rt,se,yt):ce=qt(H,rt,ce,yt),this._root=Ut(ce,se,yt)},ut.prototype.split=function(k){return jt(k,this._root,this._comparator)},ut.prototype[Symbol.iterator]=function(){var k,H,rt;return st(this,function(yt){switch(yt.label){case 0:k=this._root,H=[],rt=!1,yt.label=1;case 1:return rt?[3,6]:k===null?[3,2]:(H.push(k),k=k.left,[3,5]);case 2:return H.length===0?[3,4]:(k=H.pop(),[4,k]);case 3:return yt.sent(),k=k.right,[3,5];case 4:rt=!0,yt.label=5;case 5:return[3,1];case 6:return[2]}})},ut}();function J(ut,k,H,rt){var yt=rt-H;if(yt>0){var bt=H+Math.floor(yt/2),ce=ut[bt],se=k[bt],Ne=new Ot(ce,se);return Ne.left=J(ut,k,H,bt),Ne.right=J(ut,k,bt+1,rt),Ne}return null}function Q(ut,k){for(var H=new Ot(null,null),rt=H,yt=0;yt<ut.length;yt++)rt=rt.next=new Ot(ut[yt],k[yt]);return rt.next=null,H.next}function Rt(ut){for(var k=ut,H=[],rt=!1,yt=new Ot(null,null),bt=yt;!rt;)k?(H.push(k),k=k.left):H.length>0?(k=bt=bt.next=H.pop(),k=k.right):rt=!0;return bt.next=null,yt.next}function Tt(ut,k,H){var rt=H-k;if(rt>0){var yt=k+Math.floor(rt/2),bt=Tt(ut,k,yt),ce=ut.head;return ce.left=bt,ut.head=ut.head.next,ce.right=Tt(ut,yt+1,H),ce}return null}function Ft(ut,k,H){for(var rt=new Ot(null,null),yt=rt,bt=ut,ce=k;bt!==null&&ce!==null;)H(bt.key,ce.key)<0?(yt.next=bt,bt=bt.next):(yt.next=ce,ce=ce.next),yt=yt.next;return bt!==null?yt.next=bt:ce!==null&&(yt.next=ce),rt.next}function kt(ut,k,H,rt,yt){if(!(H>=rt)){for(var bt=ut[H+rt>>1],ce=H-1,se=rt+1;;){do ce++;while(yt(ut[ce],bt)<0);do se--;while(yt(ut[se],bt)>0);if(ce>=se)break;var Ne=ut[ce];ut[ce]=ut[se],ut[se]=Ne,Ne=k[ce],k[ce]=k[se],k[se]=Ne}kt(ut,k,H,se,yt),kt(ut,k,se+1,rt,yt)}}const Yt=(ut,k)=>ut.ll.x<=k.x&&k.x<=ut.ur.x&&ut.ll.y<=k.y&&k.y<=ut.ur.y,Se=(ut,k)=>{if(k.ur.x<ut.ll.x||ut.ur.x<k.ll.x||k.ur.y<ut.ll.y||ut.ur.y<k.ll.y)return null;const H=ut.ll.x<k.ll.x?k.ll.x:ut.ll.x,rt=ut.ur.x<k.ur.x?ut.ur.x:k.ur.x,yt=ut.ll.y<k.ll.y?k.ll.y:ut.ll.y,bt=ut.ur.y<k.ur.y?ut.ur.y:k.ur.y;return{ll:{x:H,y:yt},ur:{x:rt,y:bt}}};let Ie=Number.EPSILON;Ie===void 0&&(Ie=Math.pow(2,-52));const Ye=Ie*Ie,un=(ut,k)=>{if(-Ie<ut&&ut<Ie&&-Ie<k&&k<Ie)return 0;const H=ut-k;return H*H<Ye*ut*k?0:ut<k?-1:1};class we{constructor(){this.reset()}reset(){this.xRounder=new Vt,this.yRounder=new Vt}round(k,H){return{x:this.xRounder.round(k),y:this.yRounder.round(H)}}}class Vt{constructor(){this.tree=new ee,this.round(0)}round(k){const H=this.tree.add(k),rt=this.tree.prev(H);if(rt!==null&&un(H.key,rt.key)===0)return this.tree.remove(k),rt.key;const yt=this.tree.next(H);return yt!==null&&un(H.key,yt.key)===0?(this.tree.remove(k),yt.key):k}}const et=new we,oe=11102230246251565e-32,Gt=134217729,ke=(3+8*oe)*oe;function Me(ut,k,H,rt,yt){let bt,ce,se,Ne,Pe=k[0],rn=rt[0],Oe=0,qe=0;rn>Pe==rn>-Pe?(bt=Pe,Pe=k[++Oe]):(bt=rn,rn=rt[++qe]);let fn=0;if(Oe<ut&&qe<H)for(rn>Pe==rn>-Pe?(ce=Pe+bt,se=bt-(ce-Pe),Pe=k[++Oe]):(ce=rn+bt,se=bt-(ce-rn),rn=rt[++qe]),bt=ce,se!==0&&(yt[fn++]=se);Oe<ut&&qe<H;)rn>Pe==rn>-Pe?(ce=bt+Pe,Ne=ce-bt,se=bt-(ce-Ne)+(Pe-Ne),Pe=k[++Oe]):(ce=bt+rn,Ne=ce-bt,se=bt-(ce-Ne)+(rn-Ne),rn=rt[++qe]),bt=ce,se!==0&&(yt[fn++]=se);for(;Oe<ut;)ce=bt+Pe,Ne=ce-bt,se=bt-(ce-Ne)+(Pe-Ne),Pe=k[++Oe],bt=ce,se!==0&&(yt[fn++]=se);for(;qe<H;)ce=bt+rn,Ne=ce-bt,se=bt-(ce-Ne)+(rn-Ne),rn=rt[++qe],bt=ce,se!==0&&(yt[fn++]=se);return(bt!==0||fn===0)&&(yt[fn++]=bt),fn}function j(ut,k){let H=k[0];for(let rt=1;rt<ut;rt++)H+=k[rt];return H}function Mt(ut){return new Float64Array(ut)}const $=(3+16*oe)*oe,Ct=(2+12*oe)*oe,wt=(9+64*oe)*oe*oe,z=Mt(4),ot=Mt(8),Jt=Mt(12),de=Mt(16),pe=Mt(4);function Xe(ut,k,H,rt,yt,bt,ce){let se,Ne,Pe,rn,Oe,qe,fn,gn,dn,bn,Un,Kn,gr,xr,ni,Vr,zr,Ar;const ui=ut-yt,Vi=H-yt,Bi=k-bt,_i=rt-bt;xr=ui*_i,qe=Gt*ui,fn=qe-(qe-ui),gn=ui-fn,qe=Gt*_i,dn=qe-(qe-_i),bn=_i-dn,ni=gn*bn-(xr-fn*dn-gn*dn-fn*bn),Vr=Bi*Vi,qe=Gt*Bi,fn=qe-(qe-Bi),gn=Bi-fn,qe=Gt*Vi,dn=qe-(qe-Vi),bn=Vi-dn,zr=gn*bn-(Vr-fn*dn-gn*dn-fn*bn),Un=ni-zr,Oe=ni-Un,z[0]=ni-(Un+Oe)+(Oe-zr),Kn=xr+Un,Oe=Kn-xr,gr=xr-(Kn-Oe)+(Un-Oe),Un=gr-Vr,Oe=gr-Un,z[1]=gr-(Un+Oe)+(Oe-Vr),Ar=Kn+Un,Oe=Ar-Kn,z[2]=Kn-(Ar-Oe)+(Un-Oe),z[3]=Ar;let no=j(4,z),ro=Ct*ce;if(no>=ro||-no>=ro||(Oe=ut-ui,se=ut-(ui+Oe)+(Oe-yt),Oe=H-Vi,Pe=H-(Vi+Oe)+(Oe-yt),Oe=k-Bi,Ne=k-(Bi+Oe)+(Oe-bt),Oe=rt-_i,rn=rt-(_i+Oe)+(Oe-bt),se===0&&Ne===0&&Pe===0&&rn===0)||(ro=wt*ce+ke*Math.abs(no),no+=ui*rn+_i*se-(Bi*Pe+Vi*Ne),no>=ro||-no>=ro))return no;xr=se*_i,qe=Gt*se,fn=qe-(qe-se),gn=se-fn,qe=Gt*_i,dn=qe-(qe-_i),bn=_i-dn,ni=gn*bn-(xr-fn*dn-gn*dn-fn*bn),Vr=Ne*Vi,qe=Gt*Ne,fn=qe-(qe-Ne),gn=Ne-fn,qe=Gt*Vi,dn=qe-(qe-Vi),bn=Vi-dn,zr=gn*bn-(Vr-fn*dn-gn*dn-fn*bn),Un=ni-zr,Oe=ni-Un,pe[0]=ni-(Un+Oe)+(Oe-zr),Kn=xr+Un,Oe=Kn-xr,gr=xr-(Kn-Oe)+(Un-Oe),Un=gr-Vr,Oe=gr-Un,pe[1]=gr-(Un+Oe)+(Oe-Vr),Ar=Kn+Un,Oe=Ar-Kn,pe[2]=Kn-(Ar-Oe)+(Un-Oe),pe[3]=Ar;const Za=Me(4,z,4,pe,ot);xr=ui*rn,qe=Gt*ui,fn=qe-(qe-ui),gn=ui-fn,qe=Gt*rn,dn=qe-(qe-rn),bn=rn-dn,ni=gn*bn-(xr-fn*dn-gn*dn-fn*bn),Vr=Bi*Pe,qe=Gt*Bi,fn=qe-(qe-Bi),gn=Bi-fn,qe=Gt*Pe,dn=qe-(qe-Pe),bn=Pe-dn,zr=gn*bn-(Vr-fn*dn-gn*dn-fn*bn),Un=ni-zr,Oe=ni-Un,pe[0]=ni-(Un+Oe)+(Oe-zr),Kn=xr+Un,Oe=Kn-xr,gr=xr-(Kn-Oe)+(Un-Oe),Un=gr-Vr,Oe=gr-Un,pe[1]=gr-(Un+Oe)+(Oe-Vr),Ar=Kn+Un,Oe=Ar-Kn,pe[2]=Kn-(Ar-Oe)+(Un-Oe),pe[3]=Ar;const Mo=Me(Za,ot,4,pe,Jt);xr=se*rn,qe=Gt*se,fn=qe-(qe-se),gn=se-fn,qe=Gt*rn,dn=qe-(qe-rn),bn=rn-dn,ni=gn*bn-(xr-fn*dn-gn*dn-fn*bn),Vr=Ne*Pe,qe=Gt*Ne,fn=qe-(qe-Ne),gn=Ne-fn,qe=Gt*Pe,dn=qe-(qe-Pe),bn=Pe-dn,zr=gn*bn-(Vr-fn*dn-gn*dn-fn*bn),Un=ni-zr,Oe=ni-Un,pe[0]=ni-(Un+Oe)+(Oe-zr),Kn=xr+Un,Oe=Kn-xr,gr=xr-(Kn-Oe)+(Un-Oe),Un=gr-Vr,Oe=gr-Un,pe[1]=gr-(Un+Oe)+(Oe-Vr),Ar=Kn+Un,Oe=Ar-Kn,pe[2]=Kn-(Ar-Oe)+(Un-Oe),pe[3]=Ar;const Ea=Me(Mo,Jt,4,pe,de);return de[Ea-1]}function je(ut,k,H,rt,yt,bt){const ce=(k-bt)*(H-yt),se=(ut-yt)*(rt-bt),Ne=ce-se,Pe=Math.abs(ce+se);return Math.abs(Ne)>=$*Pe?Ne:-Xe(ut,k,H,rt,yt,bt,Pe)}const sn=(ut,k)=>ut.x*k.y-ut.y*k.x,ln=(ut,k)=>ut.x*k.x+ut.y*k.y,Zt=(ut,k,H)=>{const rt=je(ut.x,ut.y,k.x,k.y,H.x,H.y);return rt>0?-1:rt<0?1:0},ct=ut=>Math.sqrt(ln(ut,ut)),zt=(ut,k,H)=>{const rt={x:k.x-ut.x,y:k.y-ut.y},yt={x:H.x-ut.x,y:H.y-ut.y};return sn(yt,rt)/ct(yt)/ct(rt)},ue=(ut,k,H)=>{const rt={x:k.x-ut.x,y:k.y-ut.y},yt={x:H.x-ut.x,y:H.y-ut.y};return ln(yt,rt)/ct(yt)/ct(rt)},_e=(ut,k,H)=>k.y===0?null:{x:ut.x+k.x/k.y*(H-ut.y),y:H},St=(ut,k,H)=>k.x===0?null:{x:H,y:ut.y+k.y/k.x*(H-ut.x)},re=(ut,k,H,rt)=>{if(k.x===0)return St(H,rt,ut.x);if(rt.x===0)return St(ut,k,H.x);if(k.y===0)return _e(H,rt,ut.y);if(rt.y===0)return _e(ut,k,H.y);const yt=sn(k,rt);if(yt==0)return null;const bt={x:H.x-ut.x,y:H.y-ut.y},ce=sn(bt,k)/yt,se=sn(bt,rt)/yt,Ne=ut.x+se*k.x,Pe=H.x+ce*rt.x,rn=ut.y+se*k.y,Oe=H.y+ce*rt.y,qe=(Ne+Pe)/2,fn=(rn+Oe)/2;return{x:qe,y:fn}};class Pt{static compare(k,H){const rt=Pt.comparePoints(k.point,H.point);return rt!==0?rt:(k.point!==H.point&&k.link(H),k.isLeft!==H.isLeft?k.isLeft?1:-1:Dt.compare(k.segment,H.segment))}static comparePoints(k,H){return k.x<H.x?-1:k.x>H.x?1:k.y<H.y?-1:k.y>H.y?1:0}constructor(k,H){k.events===void 0?k.events=[this]:k.events.push(this),this.point=k,this.isLeft=H}link(k){if(k.point===this.point)throw new Error("Tried to link already linked events");const H=k.point.events;for(let rt=0,yt=H.length;rt<yt;rt++){const bt=H[rt];this.point.events.push(bt),bt.point=this.point}this.checkForConsuming()}checkForConsuming(){const k=this.point.events.length;for(let H=0;H<k;H++){const rt=this.point.events[H];if(rt.segment.consumedBy===void 0)for(let yt=H+1;yt<k;yt++){const bt=this.point.events[yt];bt.consumedBy===void 0&&rt.otherSE.point.events===bt.otherSE.point.events&&rt.segment.consume(bt.segment)}}}getAvailableLinkedEvents(){const k=[];for(let H=0,rt=this.point.events.length;H<rt;H++){const yt=this.point.events[H];yt!==this&&!yt.segment.ringOut&&yt.segment.isInResult()&&k.push(yt)}return k}getLeftmostComparator(k){const H=new Map,rt=yt=>{const bt=yt.otherSE;H.set(yt,{sine:zt(this.point,k.point,bt.point),cosine:ue(this.point,k.point,bt.point)})};return(yt,bt)=>{H.has(yt)||rt(yt),H.has(bt)||rt(bt);const{sine:ce,cosine:se}=H.get(yt),{sine:Ne,cosine:Pe}=H.get(bt);return ce>=0&&Ne>=0?se<Pe?1:se>Pe?-1:0:ce<0&&Ne<0?se<Pe?-1:se>Pe?1:0:Ne<ce?-1:Ne>ce?1:0}}}let Y=0;class Dt{static compare(k,H){const rt=k.leftSE.point.x,yt=H.leftSE.point.x,bt=k.rightSE.point.x,ce=H.rightSE.point.x;if(ce<rt)return 1;if(bt<yt)return-1;const se=k.leftSE.point.y,Ne=H.leftSE.point.y,Pe=k.rightSE.point.y,rn=H.rightSE.point.y;if(rt<yt){if(Ne<se&&Ne<Pe)return 1;if(Ne>se&&Ne>Pe)return-1;const Oe=k.comparePoint(H.leftSE.point);if(Oe<0)return 1;if(Oe>0)return-1;const qe=H.comparePoint(k.rightSE.point);return qe!==0?qe:-1}if(rt>yt){if(se<Ne&&se<rn)return-1;if(se>Ne&&se>rn)return 1;const Oe=H.comparePoint(k.leftSE.point);if(Oe!==0)return Oe;const qe=k.comparePoint(H.rightSE.point);return qe<0?1:qe>0?-1:1}if(se<Ne)return-1;if(se>Ne)return 1;if(bt<ce){const Oe=H.comparePoint(k.rightSE.point);if(Oe!==0)return Oe}if(bt>ce){const Oe=k.comparePoint(H.rightSE.point);if(Oe<0)return 1;if(Oe>0)return-1}if(bt!==ce){const Oe=Pe-se,qe=bt-rt,fn=rn-Ne,gn=ce-yt;if(Oe>qe&&fn<gn)return 1;if(Oe<qe&&fn>gn)return-1}return bt>ce?1:bt<ce||Pe<rn?-1:Pe>rn?1:k.id<H.id?-1:k.id>H.id?1:0}constructor(k,H,rt,yt){this.id=++Y,this.leftSE=k,k.segment=this,k.otherSE=H,this.rightSE=H,H.segment=this,H.otherSE=k,this.rings=rt,this.windings=yt}static fromRing(k,H,rt){let yt,bt,ce;const se=Pt.comparePoints(k,H);if(se<0)yt=k,bt=H,ce=1;else if(se>0)yt=H,bt=k,ce=-1;else throw new Error(`Tried to create degenerate segment at [${k.x}, ${k.y}]`);const Ne=new Pt(yt,!0),Pe=new Pt(bt,!1);return new Dt(Ne,Pe,[rt],[ce])}replaceRightSE(k){this.rightSE=k,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const k=this.leftSE.point.y,H=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:k<H?k:H},ur:{x:this.rightSE.point.x,y:k>H?k:H}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(k){return k.x===this.leftSE.point.x&&k.y===this.leftSE.point.y||k.x===this.rightSE.point.x&&k.y===this.rightSE.point.y}comparePoint(k){if(this.isAnEndpoint(k))return 0;const H=this.leftSE.point,rt=this.rightSE.point,yt=this.vector();if(H.x===rt.x)return k.x===H.x?0:k.x<H.x?1:-1;const bt=(k.y-H.y)/yt.y,ce=H.x+bt*yt.x;if(k.x===ce)return 0;const se=(k.x-H.x)/yt.x,Ne=H.y+se*yt.y;return k.y===Ne?0:k.y<Ne?-1:1}getIntersection(k){const H=this.bbox(),rt=k.bbox(),yt=Se(H,rt);if(yt===null)return null;const bt=this.leftSE.point,ce=this.rightSE.point,se=k.leftSE.point,Ne=k.rightSE.point,Pe=Yt(H,se)&&this.comparePoint(se)===0,rn=Yt(rt,bt)&&k.comparePoint(bt)===0,Oe=Yt(H,Ne)&&this.comparePoint(Ne)===0,qe=Yt(rt,ce)&&k.comparePoint(ce)===0;if(rn&&Pe)return qe&&!Oe?ce:!qe&&Oe?Ne:null;if(rn)return Oe&&bt.x===Ne.x&&bt.y===Ne.y?null:bt;if(Pe)return qe&&ce.x===se.x&&ce.y===se.y?null:se;if(qe&&Oe)return null;if(qe)return ce;if(Oe)return Ne;const fn=re(bt,this.vector(),se,k.vector());return fn===null||!Yt(yt,fn)?null:et.round(fn.x,fn.y)}split(k){const H=[],rt=k.events!==void 0,yt=new Pt(k,!0),bt=new Pt(k,!1),ce=this.rightSE;this.replaceRightSE(bt),H.push(bt),H.push(yt);const se=new Dt(yt,ce,this.rings.slice(),this.windings.slice());return Pt.comparePoints(se.leftSE.point,se.rightSE.point)>0&&se.swapEvents(),Pt.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),rt&&(yt.checkForConsuming(),bt.checkForConsuming()),H}swapEvents(){const k=this.rightSE;this.rightSE=this.leftSE,this.leftSE=k,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let H=0,rt=this.windings.length;H<rt;H++)this.windings[H]*=-1}consume(k){let H=this,rt=k;for(;H.consumedBy;)H=H.consumedBy;for(;rt.consumedBy;)rt=rt.consumedBy;const yt=Dt.compare(H,rt);if(yt!==0){if(yt>0){const bt=H;H=rt,rt=bt}if(H.prev===rt){const bt=H;H=rt,rt=bt}for(let bt=0,ce=rt.rings.length;bt<ce;bt++){const se=rt.rings[bt],Ne=rt.windings[bt],Pe=H.rings.indexOf(se);Pe===-1?(H.rings.push(se),H.windings.push(Ne)):H.windings[Pe]+=Ne}rt.rings=null,rt.windings=null,rt.consumedBy=H,rt.leftSE.consumedBy=H.leftSE,rt.rightSE.consumedBy=H.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const k=this.prev.consumedBy||this.prev;this._beforeState=k.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const k=this.beforeState();this._afterState={rings:k.rings.slice(0),windings:k.windings.slice(0),multiPolys:[]};const H=this._afterState.rings,rt=this._afterState.windings,yt=this._afterState.multiPolys;for(let se=0,Ne=this.rings.length;se<Ne;se++){const Pe=this.rings[se],rn=this.windings[se],Oe=H.indexOf(Pe);Oe===-1?(H.push(Pe),rt.push(rn)):rt[Oe]+=rn}const bt=[],ce=[];for(let se=0,Ne=H.length;se<Ne;se++){if(rt[se]===0)continue;const Pe=H[se],rn=Pe.poly;if(ce.indexOf(rn)===-1)if(Pe.isExterior)bt.push(rn);else{ce.indexOf(rn)===-1&&ce.push(rn);const Oe=bt.indexOf(Pe.poly);Oe!==-1&&bt.splice(Oe,1)}}for(let se=0,Ne=bt.length;se<Ne;se++){const Pe=bt[se].multiPoly;yt.indexOf(Pe)===-1&&yt.push(Pe)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const k=this.beforeState().multiPolys,H=this.afterState().multiPolys;switch(He.type){case"union":{const rt=k.length===0,yt=H.length===0;this._isInResult=rt!==yt;break}case"intersection":{let rt,yt;k.length<H.length?(rt=k.length,yt=H.length):(rt=H.length,yt=k.length),this._isInResult=yt===He.numMultiPolys&&rt<yt;break}case"xor":{const rt=Math.abs(k.length-H.length);this._isInResult=rt%2===1;break}case"difference":{const rt=yt=>yt.length===1&&yt[0].isSubject;this._isInResult=rt(k)!==rt(H);break}default:throw new Error(`Unrecognized operation type found ${He.type}`)}return this._isInResult}}class V{constructor(k,H,rt){if(!Array.isArray(k)||k.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=H,this.isExterior=rt,this.segments=[],typeof k[0][0]!="number"||typeof k[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const yt=et.round(k[0][0],k[0][1]);this.bbox={ll:{x:yt.x,y:yt.y},ur:{x:yt.x,y:yt.y}};let bt=yt;for(let ce=1,se=k.length;ce<se;ce++){if(typeof k[ce][0]!="number"||typeof k[ce][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let Ne=et.round(k[ce][0],k[ce][1]);Ne.x===bt.x&&Ne.y===bt.y||(this.segments.push(Dt.fromRing(bt,Ne,this)),Ne.x<this.bbox.ll.x&&(this.bbox.ll.x=Ne.x),Ne.y<this.bbox.ll.y&&(this.bbox.ll.y=Ne.y),Ne.x>this.bbox.ur.x&&(this.bbox.ur.x=Ne.x),Ne.y>this.bbox.ur.y&&(this.bbox.ur.y=Ne.y),bt=Ne)}(yt.x!==bt.x||yt.y!==bt.y)&&this.segments.push(Dt.fromRing(bt,yt,this))}getSweepEvents(){const k=[];for(let H=0,rt=this.segments.length;H<rt;H++){const yt=this.segments[H];k.push(yt.leftSE),k.push(yt.rightSE)}return k}}class C{constructor(k,H){if(!Array.isArray(k))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new V(k[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let rt=1,yt=k.length;rt<yt;rt++){const bt=new V(k[rt],this,!1);bt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=bt.bbox.ll.x),bt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=bt.bbox.ll.y),bt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=bt.bbox.ur.x),bt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=bt.bbox.ur.y),this.interiorRings.push(bt)}this.multiPoly=H}getSweepEvents(){const k=this.exteriorRing.getSweepEvents();for(let H=0,rt=this.interiorRings.length;H<rt;H++){const yt=this.interiorRings[H].getSweepEvents();for(let bt=0,ce=yt.length;bt<ce;bt++)k.push(yt[bt])}return k}}class F{constructor(k,H){if(!Array.isArray(k))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof k[0][0][0]=="number"&&(k=[k])}catch(rt){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let rt=0,yt=k.length;rt<yt;rt++){const bt=new C(k[rt],this);bt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=bt.bbox.ll.x),bt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=bt.bbox.ll.y),bt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=bt.bbox.ur.x),bt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=bt.bbox.ur.y),this.polys.push(bt)}this.isSubject=H}getSweepEvents(){const k=[];for(let H=0,rt=this.polys.length;H<rt;H++){const yt=this.polys[H].getSweepEvents();for(let bt=0,ce=yt.length;bt<ce;bt++)k.push(yt[bt])}return k}}class At{static factory(k){const H=[];for(let rt=0,yt=k.length;rt<yt;rt++){const bt=k[rt];if(!bt.isInResult()||bt.ringOut)continue;let ce=null,se=bt.leftSE,Ne=bt.rightSE;const Pe=[se],rn=se.point,Oe=[];for(;ce=se,se=Ne,Pe.push(se),se.point!==rn;)for(;;){const qe=se.getAvailableLinkedEvents();if(qe.length===0){const dn=Pe[0].point,bn=Pe[Pe.length-1].point;throw new Error(`Unable to complete output ring starting at [${dn.x}, ${dn.y}]. Last matching segment found ends at [${bn.x}, ${bn.y}].`)}if(qe.length===1){Ne=qe[0].otherSE;break}let fn=null;for(let dn=0,bn=Oe.length;dn<bn;dn++)if(Oe[dn].point===se.point){fn=dn;break}if(fn!==null){const dn=Oe.splice(fn)[0],bn=Pe.splice(dn.index);bn.unshift(bn[0].otherSE),H.push(new At(bn.reverse()));continue}Oe.push({index:Pe.length,point:se.point});const gn=se.getLeftmostComparator(ce);Ne=qe.sort(gn)[0].otherSE;break}H.push(new At(Pe))}return H}constructor(k){this.events=k;for(let H=0,rt=k.length;H<rt;H++)k[H].segment.ringOut=this;this.poly=null}getGeom(){let k=this.events[0].point;const H=[k];for(let Pe=1,rn=this.events.length-1;Pe<rn;Pe++){const Oe=this.events[Pe].point,qe=this.events[Pe+1].point;Zt(Oe,k,qe)!==0&&(H.push(Oe),k=Oe)}if(H.length===1)return null;const rt=H[0],yt=H[1];Zt(rt,k,yt)===0&&H.shift(),H.push(H[0]);const bt=this.isExteriorRing()?1:-1,ce=this.isExteriorRing()?0:H.length-1,se=this.isExteriorRing()?H.length:-1,Ne=[];for(let Pe=ce;Pe!=se;Pe+=bt)Ne.push([H[Pe].x,H[Pe].y]);return Ne}isExteriorRing(){if(this._isExteriorRing===void 0){const k=this.enclosingRing();this._isExteriorRing=k?!k.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let k=this.events[0];for(let yt=1,bt=this.events.length;yt<bt;yt++){const ce=this.events[yt];Pt.compare(k,ce)>0&&(k=ce)}let H=k.segment.prevInResult(),rt=H?H.prevInResult():null;for(;;){if(!H)return null;if(!rt)return H.ringOut;if(rt.ringOut!==H.ringOut)return rt.ringOut.enclosingRing()!==H.ringOut?H.ringOut:H.ringOut.enclosingRing();H=rt.prevInResult(),rt=H?H.prevInResult():null}}}class Kt{constructor(k){this.exteriorRing=k,k.poly=this,this.interiorRings=[]}addInterior(k){this.interiorRings.push(k),k.poly=this}getGeom(){const k=[this.exteriorRing.getGeom()];if(k[0]===null)return null;for(let H=0,rt=this.interiorRings.length;H<rt;H++){const yt=this.interiorRings[H].getGeom();yt!==null&&k.push(yt)}return k}}class ne{constructor(k){this.rings=k,this.polys=this._composePolys(k)}getGeom(){const k=[];for(let H=0,rt=this.polys.length;H<rt;H++){const yt=this.polys[H].getGeom();yt!==null&&k.push(yt)}return k}_composePolys(k){const H=[];for(let rt=0,yt=k.length;rt<yt;rt++){const bt=k[rt];if(!bt.poly)if(bt.isExteriorRing())H.push(new Kt(bt));else{const ce=bt.enclosingRing();ce.poly||H.push(new Kt(ce)),ce.poly.addInterior(bt)}}return H}}class be{constructor(k){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Dt.compare;this.queue=k,this.tree=new ee(H),this.segments=[]}process(k){const H=k.segment,rt=[];if(k.consumedBy)return k.isLeft?this.queue.remove(k.otherSE):this.tree.remove(H),rt;const yt=k.isLeft?this.tree.add(H):this.tree.find(H);if(!yt)throw new Error(`Unable to find segment #${H.id} [${H.leftSE.point.x}, ${H.leftSE.point.y}] -> [${H.rightSE.point.x}, ${H.rightSE.point.y}] in SweepLine tree.`);let bt=yt,ce=yt,se,Ne;for(;se===void 0;)bt=this.tree.prev(bt),bt===null?se=null:bt.key.consumedBy===void 0&&(se=bt.key);for(;Ne===void 0;)ce=this.tree.next(ce),ce===null?Ne=null:ce.key.consumedBy===void 0&&(Ne=ce.key);if(k.isLeft){let Pe=null;if(se){const Oe=se.getIntersection(H);if(Oe!==null&&(H.isAnEndpoint(Oe)||(Pe=Oe),!se.isAnEndpoint(Oe))){const qe=this._splitSafely(se,Oe);for(let fn=0,gn=qe.length;fn<gn;fn++)rt.push(qe[fn])}}let rn=null;if(Ne){const Oe=Ne.getIntersection(H);if(Oe!==null&&(H.isAnEndpoint(Oe)||(rn=Oe),!Ne.isAnEndpoint(Oe))){const qe=this._splitSafely(Ne,Oe);for(let fn=0,gn=qe.length;fn<gn;fn++)rt.push(qe[fn])}}if(Pe!==null||rn!==null){let Oe=null;Pe===null?Oe=rn:rn===null?Oe=Pe:Oe=Pt.comparePoints(Pe,rn)<=0?Pe:rn,this.queue.remove(H.rightSE),rt.push(H.rightSE);const qe=H.split(Oe);for(let fn=0,gn=qe.length;fn<gn;fn++)rt.push(qe[fn])}rt.length>0?(this.tree.remove(H),rt.push(k)):(this.segments.push(H),H.prev=se)}else{if(se&&Ne){const Pe=se.getIntersection(Ne);if(Pe!==null){if(!se.isAnEndpoint(Pe)){const rn=this._splitSafely(se,Pe);for(let Oe=0,qe=rn.length;Oe<qe;Oe++)rt.push(rn[Oe])}if(!Ne.isAnEndpoint(Pe)){const rn=this._splitSafely(Ne,Pe);for(let Oe=0,qe=rn.length;Oe<qe;Oe++)rt.push(rn[Oe])}}}this.tree.remove(H)}return rt}_splitSafely(k,H){this.tree.remove(k);const rt=k.rightSE;this.queue.remove(rt);const yt=k.split(H);return yt.push(rt),k.consumedBy===void 0&&this.tree.add(k),yt}}const Ce=typeof xt!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Re=typeof xt!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Le{run(k,H,rt){He.type=k,et.reset();const yt=[new F(H,!0)];for(let Oe=0,qe=rt.length;Oe<qe;Oe++)yt.push(new F(rt[Oe],!1));if(He.numMultiPolys=yt.length,He.type==="difference"){const Oe=yt[0];let qe=1;for(;qe<yt.length;)Se(yt[qe].bbox,Oe.bbox)!==null?qe++:yt.splice(qe,1)}if(He.type==="intersection")for(let Oe=0,qe=yt.length;Oe<qe;Oe++){const fn=yt[Oe];for(let gn=Oe+1,dn=yt.length;gn<dn;gn++)if(Se(fn.bbox,yt[gn].bbox)===null)return[]}const bt=new ee(Pt.compare);for(let Oe=0,qe=yt.length;Oe<qe;Oe++){const fn=yt[Oe].getSweepEvents();for(let gn=0,dn=fn.length;gn<dn;gn++)if(bt.insert(fn[gn]),bt.size>Ce)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const ce=new be(bt);let se=bt.size,Ne=bt.pop();for(;Ne;){const Oe=Ne.key;if(bt.size===se){const fn=Oe.segment;throw new Error(`Unable to pop() ${Oe.isLeft?"left":"right"} SweepEvent [${Oe.point.x}, ${Oe.point.y}] from segment #${fn.id} [${fn.leftSE.point.x}, ${fn.leftSE.point.y}] -> [${fn.rightSE.point.x}, ${fn.rightSE.point.y}] from queue.`)}if(bt.size>Ce)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(ce.segments.length>Re)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const qe=ce.process(Oe);for(let fn=0,gn=qe.length;fn<gn;fn++){const dn=qe[fn];dn.consumedBy===void 0&&bt.insert(dn)}se=bt.size,Ne=bt.pop()}et.reset();const Pe=At.factory(ce.segments);return new ne(Pe).getGeom()}}const He=new Le;var ve={union:function(ut){for(var k=arguments.length,H=new Array(k>1?k-1:0),rt=1;rt<k;rt++)H[rt-1]=arguments[rt];return He.run("union",ut,H)},intersection:function(ut){for(var k=arguments.length,H=new Array(k>1?k-1:0),rt=1;rt<k;rt++)H[rt-1]=arguments[rt];return He.run("intersection",ut,H)},xor:function(ut){for(var k=arguments.length,H=new Array(k>1?k-1:0),rt=1;rt<k;rt++)H[rt-1]=arguments[rt];return He.run("xor",ut,H)},difference:function(ut){for(var k=arguments.length,H=new Array(k>1?k-1:0),rt=1;rt<k;rt++)H[rt-1]=arguments[rt];return He.run("difference",ut,H)}};return ve})},86851:function(Te,fe,D){"use strict";var xt=D(89594),st=Array.prototype.concat,Ot=Array.prototype.slice,Xt=Te.exports=function(qt){for(var jt=[],Ut=0,gt=qt.length;Ut<gt;Ut++){var ee=qt[Ut];xt(ee)?jt=st.call(jt,Ot.call(ee)):jt.push(ee)}return jt};Xt.wrap=function(nt){return function(){return nt(Xt(arguments))}}},89594:function(Te){Te.exports=function(D){return!D||typeof D=="string"?!1:D instanceof Array||Array.isArray(D)||D.length>=0&&(D.splice instanceof Function||Object.getOwnPropertyDescriptor(D,D.length-1)&&D.constructor.name!=="String")}},69848:function(Te){(function(fe,D){Te.exports=D()})(this,function(){"use strict";function fe(Vt,et,oe,Gt,ke,Me){if(!(ke-Gt<=oe)){var j=Gt+ke>>1;D(Vt,et,j,Gt,ke,Me%2),fe(Vt,et,oe,Gt,j-1,Me+1),fe(Vt,et,oe,j+1,ke,Me+1)}}function D(Vt,et,oe,Gt,ke,Me){for(;ke>Gt;){if(ke-Gt>600){var j=ke-Gt+1,Mt=oe-Gt+1,$=Math.log(j),Ct=.5*Math.exp(2*$/3),wt=.5*Math.sqrt($*Ct*(j-Ct)/j)*(Mt-j/2<0?-1:1),z=Math.max(Gt,Math.floor(oe-Mt*Ct/j+wt)),ot=Math.min(ke,Math.floor(oe+(j-Mt)*Ct/j+wt));D(Vt,et,oe,z,ot,Me)}var Jt=et[2*oe+Me],de=Gt,pe=ke;for(xt(Vt,et,Gt,oe),et[2*ke+Me]>Jt&&xt(Vt,et,Gt,ke);de<pe;){for(xt(Vt,et,de,pe),de++,pe--;et[2*de+Me]<Jt;)de++;for(;et[2*pe+Me]>Jt;)pe--}et[2*Gt+Me]===Jt?xt(Vt,et,Gt,pe):(pe++,xt(Vt,et,pe,ke)),pe<=oe&&(Gt=pe+1),oe<=pe&&(ke=pe-1)}}function xt(Vt,et,oe,Gt){st(Vt,oe,Gt),st(et,2*oe,2*Gt),st(et,2*oe+1,2*Gt+1)}function st(Vt,et,oe){var Gt=Vt[et];Vt[et]=Vt[oe],Vt[oe]=Gt}function Ot(Vt,et,oe,Gt,ke,Me,j){for(var Mt=[0,Vt.length-1,0],$=[],Ct,wt;Mt.length;){var z=Mt.pop(),ot=Mt.pop(),Jt=Mt.pop();if(ot-Jt<=j){for(var de=Jt;de<=ot;de++)Ct=et[2*de],wt=et[2*de+1],Ct>=oe&&Ct<=ke&&wt>=Gt&&wt<=Me&&$.push(Vt[de]);continue}var pe=Math.floor((Jt+ot)/2);Ct=et[2*pe],wt=et[2*pe+1],Ct>=oe&&Ct<=ke&&wt>=Gt&&wt<=Me&&$.push(Vt[pe]);var Xe=(z+1)%2;(z===0?oe<=Ct:Gt<=wt)&&(Mt.push(Jt),Mt.push(pe-1),Mt.push(Xe)),(z===0?ke>=Ct:Me>=wt)&&(Mt.push(pe+1),Mt.push(ot),Mt.push(Xe))}return $}function Xt(Vt,et,oe,Gt,ke,Me){for(var j=[0,Vt.length-1,0],Mt=[],$=ke*ke;j.length;){var Ct=j.pop(),wt=j.pop(),z=j.pop();if(wt-z<=Me){for(var ot=z;ot<=wt;ot++)nt(et[2*ot],et[2*ot+1],oe,Gt)<=$&&Mt.push(Vt[ot]);continue}var Jt=Math.floor((z+wt)/2),de=et[2*Jt],pe=et[2*Jt+1];nt(de,pe,oe,Gt)<=$&&Mt.push(Vt[Jt]);var Xe=(Ct+1)%2;(Ct===0?oe-ke<=de:Gt-ke<=pe)&&(j.push(z),j.push(Jt-1),j.push(Xe)),(Ct===0?oe+ke>=de:Gt+ke>=pe)&&(j.push(Jt+1),j.push(wt),j.push(Xe))}return Mt}function nt(Vt,et,oe,Gt){var ke=Vt-oe,Me=et-Gt;return ke*ke+Me*Me}var qt=function(Vt){return Vt[0]},jt=function(Vt){return Vt[1]},Ut=function(et,oe,Gt,ke,Me){oe===void 0&&(oe=qt),Gt===void 0&&(Gt=jt),ke===void 0&&(ke=64),Me===void 0&&(Me=Float64Array),this.nodeSize=ke,this.points=et;for(var j=et.length<65536?Uint16Array:Uint32Array,Mt=this.ids=new j(et.length),$=this.coords=new Me(et.length*2),Ct=0;Ct<et.length;Ct++)Mt[Ct]=Ct,$[2*Ct]=oe(et[Ct]),$[2*Ct+1]=Gt(et[Ct]);fe(Mt,$,ke,0,Mt.length-1,0)};Ut.prototype.range=function(et,oe,Gt,ke){return Ot(this.ids,this.coords,et,oe,Gt,ke,this.nodeSize)},Ut.prototype.within=function(et,oe,Gt){return Xt(this.ids,this.coords,et,oe,Gt,this.nodeSize)};var gt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Vt){return Vt}},ee=Math.fround||function(Vt){return function(et){return Vt[0]=+et,Vt[0]}}(new Float32Array(1)),J=function(et){this.options=Ye(Object.create(gt),et),this.trees=new Array(this.options.maxZoom+1)};J.prototype.load=function(et){var oe=this.options,Gt=oe.log,ke=oe.minZoom,Me=oe.maxZoom,j=oe.nodeSize;Gt&&console.time("total time");var Mt="prepare "+et.length+" points";Gt&&console.time(Mt),this.points=et;for(var $=[],Ct=0;Ct<et.length;Ct++)et[Ct].geometry&&$.push(Rt(et[Ct],Ct));this.trees[Me+1]=new Ut($,un,we,j,Float32Array),Gt&&console.timeEnd(Mt);for(var wt=Me;wt>=ke;wt--){var z=+Date.now();$=this._cluster($,wt),this.trees[wt]=new Ut($,un,we,j,Float32Array),Gt&&console.log("z%d: %d clusters in %dms",wt,$.length,+Date.now()-z)}return Gt&&console.timeEnd("total time"),this},J.prototype.getClusters=function(et,oe){var Gt=((et[0]+180)%360+360)%360-180,ke=Math.max(-90,Math.min(90,et[1])),Me=et[2]===180?180:((et[2]+180)%360+360)%360-180,j=Math.max(-90,Math.min(90,et[3]));if(et[2]-et[0]>=360)Gt=-180,Me=180;else if(Gt>Me){var Mt=this.getClusters([Gt,ke,180,j],oe),$=this.getClusters([-180,ke,Me,j],oe);return Mt.concat($)}for(var Ct=this.trees[this._limitZoom(oe)],wt=Ct.range(kt(Gt),Yt(j),kt(Me),Yt(ke)),z=[],ot=0,Jt=wt;ot<Jt.length;ot+=1){var de=Jt[ot],pe=Ct.points[de];z.push(pe.numPoints?Tt(pe):this.points[pe.index])}return z},J.prototype.getChildren=function(et){var oe=this._getOriginId(et),Gt=this._getOriginZoom(et),ke="No cluster with the specified id.",Me=this.trees[Gt];if(!Me)throw new Error(ke);var j=Me.points[oe];if(!j)throw new Error(ke);for(var Mt=this.options.radius/(this.options.extent*Math.pow(2,Gt-1)),$=Me.within(j.x,j.y,Mt),Ct=[],wt=0,z=$;wt<z.length;wt+=1){var ot=z[wt],Jt=Me.points[ot];Jt.parentId===et&&Ct.push(Jt.numPoints?Tt(Jt):this.points[Jt.index])}if(Ct.length===0)throw new Error(ke);return Ct},J.prototype.getLeaves=function(et,oe,Gt){oe=oe||10,Gt=Gt||0;var ke=[];return this._appendLeaves(ke,et,oe,Gt,0),ke},J.prototype.getTile=function(et,oe,Gt){var ke=this.trees[this._limitZoom(et)],Me=Math.pow(2,et),j=this.options,Mt=j.extent,$=j.radius,Ct=$/Mt,wt=(Gt-Ct)/Me,z=(Gt+1+Ct)/Me,ot={features:[]};return this._addTileFeatures(ke.range((oe-Ct)/Me,wt,(oe+1+Ct)/Me,z),ke.points,oe,Gt,Me,ot),oe===0&&this._addTileFeatures(ke.range(1-Ct/Me,wt,1,z),ke.points,Me,Gt,Me,ot),oe===Me-1&&this._addTileFeatures(ke.range(0,wt,Ct/Me,z),ke.points,-1,Gt,Me,ot),ot.features.length?ot:null},J.prototype.getClusterExpansionZoom=function(et){for(var oe=this._getOriginZoom(et)-1;oe<=this.options.maxZoom;){var Gt=this.getChildren(et);if(oe++,Gt.length!==1)break;et=Gt[0].properties.cluster_id}return oe},J.prototype._appendLeaves=function(et,oe,Gt,ke,Me){for(var j=this.getChildren(oe),Mt=0,$=j;Mt<$.length;Mt+=1){var Ct=$[Mt],wt=Ct.properties;if(wt&&wt.cluster?Me+wt.point_count<=ke?Me+=wt.point_count:Me=this._appendLeaves(et,wt.cluster_id,Gt,ke,Me):Me<ke?Me++:et.push(Ct),et.length===Gt)break}return Me},J.prototype._addTileFeatures=function(et,oe,Gt,ke,Me,j){for(var Mt=0,$=et;Mt<$.length;Mt+=1){var Ct=$[Mt],wt=oe[Ct],z=wt.numPoints,ot=void 0,Jt=void 0,de=void 0;if(z)ot=Ft(wt),Jt=wt.x,de=wt.y;else{var pe=this.points[wt.index];ot=pe.properties,Jt=kt(pe.geometry.coordinates[0]),de=Yt(pe.geometry.coordinates[1])}var Xe={type:1,geometry:[[Math.round(this.options.extent*(Jt*Me-Gt)),Math.round(this.options.extent*(de*Me-ke))]],tags:ot},je=void 0;z?je=wt.id:this.options.generateId?je=wt.index:this.points[wt.index].id&&(je=this.points[wt.index].id),je!==void 0&&(Xe.id=je),j.features.push(Xe)}},J.prototype._limitZoom=function(et){return Math.max(this.options.minZoom,Math.min(Math.floor(+et),this.options.maxZoom+1))},J.prototype._cluster=function(et,oe){for(var Gt=[],ke=this.options,Me=ke.radius,j=ke.extent,Mt=ke.reduce,$=ke.minPoints,Ct=Me/(j*Math.pow(2,oe)),wt=0;wt<et.length;wt++){var z=et[wt];if(!(z.zoom<=oe)){z.zoom=oe;for(var ot=this.trees[oe+1],Jt=ot.within(z.x,z.y,Ct),de=z.numPoints||1,pe=de,Xe=0,je=Jt;Xe<je.length;Xe+=1){var sn=je[Xe],ln=ot.points[sn];ln.zoom>oe&&(pe+=ln.numPoints||1)}if(pe>de&&pe>=$){for(var Zt=z.x*de,ct=z.y*de,zt=Mt&&de>1?this._map(z,!0):null,ue=(wt<<5)+(oe+1)+this.points.length,_e=0,St=Jt;_e<St.length;_e+=1){var re=St[_e],Pt=ot.points[re];if(!(Pt.zoom<=oe)){Pt.zoom=oe;var Y=Pt.numPoints||1;Zt+=Pt.x*Y,ct+=Pt.y*Y,Pt.parentId=ue,Mt&&(zt||(zt=this._map(z,!0)),Mt(zt,this._map(Pt)))}}z.parentId=ue,Gt.push(Q(Zt/pe,ct/pe,ue,pe,zt))}else if(Gt.push(z),pe>1)for(var Dt=0,V=Jt;Dt<V.length;Dt+=1){var C=V[Dt],F=ot.points[C];F.zoom<=oe||(F.zoom=oe,Gt.push(F))}}}return Gt},J.prototype._getOriginId=function(et){return et-this.points.length>>5},J.prototype._getOriginZoom=function(et){return(et-this.points.length)%32},J.prototype._map=function(et,oe){if(et.numPoints)return oe?Ye({},et.properties):et.properties;var Gt=this.points[et.index].properties,ke=this.options.map(Gt);return oe&&ke===Gt?Ye({},ke):ke};function Q(Vt,et,oe,Gt,ke){return{x:ee(Vt),y:ee(et),zoom:1/0,id:oe,parentId:-1,numPoints:Gt,properties:ke}}function Rt(Vt,et){var oe=Vt.geometry.coordinates,Gt=oe[0],ke=oe[1];return{x:ee(kt(Gt)),y:ee(Yt(ke)),zoom:1/0,index:et,parentId:-1}}function Tt(Vt){return{type:"Feature",id:Vt.id,properties:Ft(Vt),geometry:{type:"Point",coordinates:[Se(Vt.x),Ie(Vt.y)]}}}function Ft(Vt){var et=Vt.numPoints,oe=et>=1e4?Math.round(et/1e3)+"k":et>=1e3?Math.round(et/100)/10+"k":et;return Ye(Ye({},Vt.properties),{cluster:!0,cluster_id:Vt.id,point_count:et,point_count_abbreviated:oe})}function kt(Vt){return Vt/360+.5}function Yt(Vt){var et=Math.sin(Vt*Math.PI/180),oe=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return oe<0?0:oe>1?1:oe}function Se(Vt){return(Vt-.5)*360}function Ie(Vt){var et=(180-Vt*360)*Math.PI/180;return 360*Math.atan(Math.exp(et))/Math.PI-90}function Ye(Vt,et){for(var oe in et)Vt[oe]=et[oe];return Vt}function un(Vt){return Vt.x}function we(Vt){return Vt.y}return J})},5501:function(Te,fe,D){"use strict";var xt=D(90857);fe.Z=xt},89093:function(Te,fe,D){"use strict";var xt=D(38554);fe.Z=xt},71937:function(Te,fe,D){"use strict";D.d(fe,{Z:function(){return Xt}});var xt=D(61120);function st(nt,qt){for(;!{}.hasOwnProperty.call(nt,qt)&&(nt=(0,xt.Z)(nt))!==null;);return nt}function Ot(){return Ot=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(nt,qt,jt){var Ut=st(nt,qt);if(Ut){var gt=Object.getOwnPropertyDescriptor(Ut,qt);return gt.get?gt.get.call(arguments.length<3?nt:jt):gt.value}},Ot.apply(null,arguments)}function Xt(nt,qt,jt,Ut){var gt=Ot((0,xt.Z)(1&Ut?nt.prototype:nt),qt,jt);return 2&Ut&&typeof gt=="function"?function(ee){return gt.apply(jt,ee)}:gt}},54235:function(Te,fe,D){"use strict";D.d(fe,{S:function(){return xt}});function xt(st){let Ot=0;for(let Xt=0;Xt<st.length;Xt++)Ot+=st[Xt];return Ot}}}]);
}());