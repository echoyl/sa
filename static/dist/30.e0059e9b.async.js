!(function(){var _f=Math.pow;var xI=(bt,G,L)=>new Promise((K,W)=>{var E=se=>{try{ee(L.next(se))}catch(ue){W(ue)}},he=se=>{try{ee(L.throw(se))}catch(ue){W(ue)}},ee=se=>se.done?K(se.value):Promise.resolve(se.value).then(E,he);ee((L=L.apply(bt,G)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[30],{25330:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};G.default=L},67303:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};G.default=L},83647:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};G.default=L},57583:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};G.default=L},29260:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};G.default=L},25828:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};G.default=L},64183:function(bt,G,L){"use strict";var K=L(67294),W=L(16188),E=function(){return E=Object.assign||function(ee){for(var se,ue=1,be=arguments.length;ue<be;ue++){se=arguments[ue];for(var oe in se)Object.prototype.hasOwnProperty.call(se,oe)&&(ee[oe]=se[oe])}return ee},E.apply(this,arguments)},he=(0,K.forwardRef)(function(ee,se){return K.createElement(W.P,E({},ee,{chartType:"Area",ref:se}))});G.Z=he},79611:function(bt,G,L){"use strict";var K=L(67294),W=L(16188),E=function(){return E=Object.assign||function(ee){for(var se,ue=1,be=arguments.length;ue<be;ue++){se=arguments[ue];for(var oe in se)Object.prototype.hasOwnProperty.call(se,oe)&&(ee[oe]=se[oe])}return ee},E.apply(this,arguments)},he=(0,K.forwardRef)(function(ee,se){return K.createElement(W.P,E({},ee,{chartType:"Bar",ref:se}))});G.Z=he},16188:function(bt,G,L){"use strict";L.d(G,{P:function(){return _de}});var K={};L.r(K),L.d(K,{area:function(){return aW},bottom:function(){return og},bottomLeft:function(){return og},bottomRight:function(){return og},inside:function(){return og},left:function(){return og},outside:function(){return uW},right:function(){return og},spider:function(){return fW},surround:function(){return dW},top:function(){return og},topLeft:function(){return og},topRight:function(){return og}});var W={};L.r(W),L.d(W,{interpolateBlues:function(){return $Z},interpolateBrBG:function(){return OZ},interpolateBuGn:function(){return BZ},interpolateBuPu:function(){return kZ},interpolateCividis:function(){return tX},interpolateCool:function(){return sX},interpolateCubehelixDefault:function(){return oX},interpolateGnBu:function(){return zZ},interpolateGreens:function(){return qZ},interpolateGreys:function(){return KZ},interpolateInferno:function(){return vX},interpolateMagma:function(){return pX},interpolateOrRd:function(){return UZ},interpolateOranges:function(){return eX},interpolatePRGn:function(){return MZ},interpolatePiYG:function(){return RZ},interpolatePlasma:function(){return mX},interpolatePuBu:function(){return VZ},interpolatePuBuGn:function(){return jZ},interpolatePuOr:function(){return PZ},interpolatePuRd:function(){return HZ},interpolatePurples:function(){return QZ},interpolateRainbow:function(){return lX},interpolateRdBu:function(){return IZ},interpolateRdGy:function(){return DZ},interpolateRdPu:function(){return GZ},interpolateRdYlBu:function(){return LZ},interpolateRdYlGn:function(){return NZ},interpolateReds:function(){return JZ},interpolateSinebow:function(){return fX},interpolateSpectral:function(){return FZ},interpolateTurbo:function(){return hX},interpolateViridis:function(){return dX},interpolateWarm:function(){return aX},interpolateYlGn:function(){return ZZ},interpolateYlGnBu:function(){return WZ},interpolateYlOrBr:function(){return XZ},interpolateYlOrRd:function(){return YZ},schemeAccent:function(){return tZ},schemeBlues:function(){return YL},schemeBrBG:function(){return CL},schemeBuGn:function(){return FL},schemeBuPu:function(){return BL},schemeCategory10:function(){return eZ},schemeDark2:function(){return nZ},schemeGnBu:function(){return kL},schemeGreens:function(){return $L},schemeGreys:function(){return qL},schemeObservable10:function(){return rZ},schemeOrRd:function(){return zL},schemeOranges:function(){return JL},schemePRGn:function(){return OL},schemePaired:function(){return iZ},schemePastel1:function(){return oZ},schemePastel2:function(){return aZ},schemePiYG:function(){return ML},schemePuBu:function(){return jL},schemePuBuGn:function(){return UL},schemePuOr:function(){return RL},schemePuRd:function(){return VL},schemePurples:function(){return KL},schemeRdBu:function(){return PL},schemeRdGy:function(){return IL},schemeRdPu:function(){return HL},schemeRdYlBu:function(){return DL},schemeRdYlGn:function(){return LL},schemeReds:function(){return QL},schemeSet1:function(){return sZ},schemeSet2:function(){return lZ},schemeSet3:function(){return uZ},schemeSpectral:function(){return NL},schemeTableau10:function(){return cZ},schemeYlGn:function(){return WL},schemeYlGnBu:function(){return GL},schemeYlOrBr:function(){return ZL},schemeYlOrRd:function(){return XL}});var E={};L.r(E),L.d(E,{geoAlbers:function(){return vz},geoAlbersUsa:function(){return tie},geoAzimuthalEqualArea:function(){return nie},geoAzimuthalEqualAreaRaw:function(){return T5},geoAzimuthalEquidistant:function(){return rie},geoAzimuthalEquidistantRaw:function(){return A5},geoConicConformal:function(){return oie},geoConicConformalRaw:function(){return yz},geoConicEqualArea:function(){return PA},geoConicEqualAreaRaw:function(){return pz},geoConicEquidistant:function(){return sie},geoConicEquidistantRaw:function(){return _z},geoEqualEarth:function(){return uie},geoEqualEarthRaw:function(){return C5},geoEquirectangular:function(){return aie},geoEquirectangularRaw:function(){return NE},geoGnomonic:function(){return cie},geoGnomonicRaw:function(){return O5},geoIdentity:function(){return fie},geoMercator:function(){return iie},geoMercatorRaw:function(){return LE},geoNaturalEarth1:function(){return hie},geoNaturalEarth1Raw:function(){return M5},geoOrthographic:function(){return die},geoOrthographicRaw:function(){return R5},geoProjection:function(){return bm},geoProjectionMutator:function(){return S5},geoStereographic:function(){return pie},geoStereographicRaw:function(){return P5},geoTransverseMercator:function(){return vie},geoTransverseMercatorRaw:function(){return I5}});var he={};L.r(he),L.d(he,{frequency:function(){return vae},id:function(){return mae},name:function(){return gae},weight:function(){return pae}});var ee=L(67294),se=L(73935),ue=L.t(se,2),be=function(){return be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},be.apply(this,arguments)},oe=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Ge=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(p){return function(v){return h([p,v])}}function h(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(s=p[0]&2?i.return:p[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,p[1])).done)return s;switch(i=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){n.label=p[1];break}if(p[0]===6&&n.label<s[1]){n.label=s[1],s=p;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(p);break}s[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(v){p=[6,v],i=0}finally{r=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},te=be({},ue),me=te.version,Pe=te.render,$=te.unmountComponentAtNode,le;try{var J=Number((me||"").split(".")[0]);J>=18&&(le=te.createRoot)}catch(e){}function Ee(e){var t=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&typeof t=="object"&&(t.usingClientEntryPoint=e)}var tt="__rc_react_root__";function Je(e,t){Ee(!0);var n=t[tt]||le(t);Ee(!1),n.render(e),t[tt]=n}function wt(e,t){Pe(e,t)}function pt(e,t){}function yt(e,t){if(le){Je(e,t);return}wt(e,t)}function Re(e){return oe(this,void 0,void 0,function(){return Ge(this,function(t){return[2,Promise.resolve().then(function(){var n;(n=e[tt])===null||n===void 0||n.unmount(),delete e[tt]})]})})}function Ce(e){$(e)}function Ue(e){}function We(e){return oe(this,void 0,void 0,function(){return Ge(this,function(t){return le!==void 0?[2,Re(e)]:(Ce(e),[2])})})}var lt=new Map;lt.set("tooltip",document.createElement("div"));var tn=function(e,t){t===void 0&&(t=!1);var n=null;if(t)n=lt.get("tooltip");else if(n=document.createElement("div"),e!=null&&e.key){var r=lt.get(e.key);r?n=r:lt.set(e.key,n)}return yt(e,n),n},Le=function(e){var t=e.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",t.appendChild(r),t.appendChild(n)},_t=function(e){var t=e.loadingTemplate,n=e.theme,r=n===void 0?"light":n,i=ee.useRef(null);ee.useEffect(function(){!t&&i.current&&Le(i.current)},[]);var s=function(){return t||ee.createElement("div",{ref:i})};return ee.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},s())},Me=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(e){Me(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var i=n.props.errorTemplate;switch(r){default:return typeof i=="function"?i(r):i||ee.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},n}return t.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},t.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},t.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):ee.createElement(ee.Fragment,null,this.props.children)},t}(ee.Component),qe=typeof global=="object"&&global&&global.Object===Object&&global,Ye=qe,Lt=typeof self=="object"&&self&&self.Object===Object&&self,xt=Ye||Lt||Function("return this")(),Ie=xt,Gt=Ie.Symbol,gn=Gt,Tn=Object.prototype,sr=Tn.hasOwnProperty,nr=Tn.toString,Ft=gn?gn.toStringTag:void 0;function Kt(e){var t=sr.call(e,Ft),n=e[Ft];try{e[Ft]=void 0;var r=!0}catch(s){}var i=nr.call(e);return r&&(t?e[Ft]=n:delete e[Ft]),i}var fn=Kt,Gn=Object.prototype,on=Gn.toString;function Pt(e){return on.call(e)}var zt=Pt,ze="[object Null]",rt="[object Undefined]",jt=gn?gn.toStringTag:void 0;function U(e){return e==null?e===void 0?rt:ze:jt&&jt in Object(e)?fn(e):zt(e)}var fe=U;function at(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var de=at,$t="[object AsyncFunction]",sn="[object Function]",pn="[object GeneratorFunction]",Nn="[object Proxy]";function Wn(e){if(!de(e))return!1;var t=fe(e);return t==sn||t==pn||t==$t||t==Nn}var qn=Wn,dn=function(e){var t=/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i;return t.test(e)},vt=Array.isArray,It=vt;function An(){this.__data__=[],this.size=0}var Dn=An;function Yn(e,t){return e===t||e!==e&&t!==t}var dt=Yn;function xe(e,t){for(var n=e.length;n--;)if(dt(e[n][0],t))return n;return-1}var Be=xe,st=Array.prototype,Dt=st.splice;function Ot(e){var t=this.__data__,n=Be(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Dt.call(t,n,1),--this.size,!0}var Sn=Ot;function er(e){var t=this.__data__,n=Be(t,e);return n<0?void 0:t[n][1]}var br=er;function $n(e){return Be(this.__data__,e)>-1}var Oe=$n;function we(e,t){var n=this.__data__,r=Be(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Ve=we;function it(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}it.prototype.clear=Dn,it.prototype.delete=Sn,it.prototype.get=br,it.prototype.has=Oe,it.prototype.set=Ve;var At=it;function qt(){this.__data__=new At,this.size=0}var un=qt;function St(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Jt=St;function Qn(e){return this.__data__.get(e)}var Er=Qn;function Gr(e){return this.__data__.has(e)}var mr=Gr,Hr=Ie["__core-js_shared__"],wi=Hr,Pi=function(){var e=/[^.]+$/.exec(wi&&wi.keys&&wi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function wr(e){return!!Pi&&Pi in e}var gi=wr,di=Function.prototype,xi=di.toString;function Fo(e){if(e!=null){try{return xi.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Ai=Fo,ea=/[\\^$.*+?()[\]{}|]/g,_a=/^\[object .+?Constructor\]$/,fi=Function.prototype,Ji=Object.prototype,$e=fi.toString,ht=Ji.hasOwnProperty,Ht=RegExp("^"+$e.call(ht).replace(ea,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hn(e){if(!de(e)||gi(e))return!1;var t=qn(e)?Ht:_a;return t.test(Ai(e))}var Fn=hn;function Bn(e,t){return e==null?void 0:e[t]}var yn=Bn;function On(e,t){var n=yn(e,t);return Fn(n)?n:void 0}var pr=On,hr=pr(Ie,"Map"),oi=hr,Xi=pr(Object,"create"),io=Xi;function ai(){this.__data__=io?io(null):{},this.size=0}var Yi=ai;function ji(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Yr=ji,To="__lodash_hash_undefined__",mi=Object.prototype,wo=mi.hasOwnProperty;function $i(e){var t=this.__data__;if(io){var n=t[e];return n===To?void 0:n}return wo.call(t,e)?t[e]:void 0}var co=$i,Mo=Object.prototype,bs=Mo.hasOwnProperty;function ba(e){var t=this.__data__;return io?t[e]!==void 0:bs.call(t,e)}var ra=ba,ms="__lodash_hash_undefined__";function ls(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=io&&t===void 0?ms:t,this}var Ct=ls;function Wt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Wt.prototype.clear=Yi,Wt.prototype.delete=Yr,Wt.prototype.get=co,Wt.prototype.has=ra,Wt.prototype.set=Ct;var jn=Wt;function kr(){this.size=0,this.__data__={hash:new jn,map:new(oi||At),string:new jn}}var Ci=kr;function qi(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var ta=qi;function Us(e,t){var n=e.__data__;return ta(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ls=Us;function ks(e){var t=Ls(this,e).delete(e);return this.size-=t?1:0,t}var ll=ks;function zh(e){return Ls(this,e).get(e)}var Up=zh;function qf(e){return Ls(this,e).has(e)}var ru=qf;function zf(e,t){var n=Ls(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var rf=zf;function iu(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}iu.prototype.clear=Ci,iu.prototype.delete=ll,iu.prototype.get=Up,iu.prototype.has=ru,iu.prototype.set=rf;var pu=iu,of=200;function bf(e,t){var n=this.__data__;if(n instanceof At){var r=n.__data__;if(!oi||r.length<of-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new pu(r)}return n.set(e,t),this.size=n.size,this}var Tu=bf;function As(e){var t=this.__data__=new At(e);this.size=t.size}As.prototype.clear=un,As.prototype.delete=Jt,As.prototype.get=Er,As.prototype.has=mr,As.prototype.set=Tu;var Xu=As,af="__lodash_hash_undefined__";function _d(e){return this.__data__.set(e,af),this}var Jd=_d;function Uf(e){return this.__data__.has(e)}var bd=Uf;function mh(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new pu;++t<n;)this.add(e[t])}mh.prototype.add=mh.prototype.push=Jd,mh.prototype.has=bd;var Uh=mh;function jh(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var xd=jh;function l0(e,t){return e.has(t)}var sf=l0,Fc=1,Ed=2;function Bl(e,t,n,r,i,s){var l=n&Fc,c=e.length,h=t.length;if(c!=h&&!(l&&h>c))return!1;var p=s.get(e),v=s.get(t);if(p&&v)return p==t&&v==e;var y=-1,b=!0,T=n&Ed?new Uh:void 0;for(s.set(e,t),s.set(t,e);++y<c;){var M=e[y],R=t[y];if(r)var I=l?r(R,M,y,t,e,s):r(M,R,y,e,t,s);if(I!==void 0){if(I)continue;b=!1;break}if(T){if(!xd(t,function(N,z){if(!sf(T,z)&&(M===N||i(M,N,n,r,s)))return T.push(z)})){b=!1;break}}else if(!(M===R||i(M,R,n,r,s))){b=!1;break}}return s.delete(e),s.delete(t),b}var bc=Bl,lf=Ie.Uint8Array,ou=lf;function Bc(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var uc=Bc;function xf(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Ol=xf,uf=1,Ef=2,Sd="[object Boolean]",wd="[object Date]",xs="[object Error]",ep="[object Map]",Kf="[object Number]",Vh="[object RegExp]",ul="[object Set]",Hh="[object String]",gh="[object Symbol]",vu="[object ArrayBuffer]",kc="[object DataView]",Au=gn?gn.prototype:void 0,xc=Au?Au.valueOf:void 0;function Se(e,t,n,r,i,s,l){switch(n){case kc:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case vu:return!(e.byteLength!=t.byteLength||!s(new ou(e),new ou(t)));case Sd:case wd:case Kf:return dt(+e,+t);case xs:return e.name==t.name&&e.message==t.message;case Vh:case Hh:return e==t+"";case ep:var c=uc;case ul:var h=r&uf;if(c||(c=Ol),e.size!=t.size&&!h)return!1;var p=l.get(e);if(p)return p==t;r|=Ef,l.set(e,t);var v=bc(c(e),c(t),r,i,s,l);return l.delete(e),v;case gh:if(xc)return xc.call(e)==xc.call(t)}return!1}var ie=Se;function ve(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var et=ve;function an(e,t,n){var r=t(e);return It(e)?r:et(r,n(e))}var cn=an;function tr(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var l=e[n];t(l,n,e)&&(s[i++]=l)}return s}var Or=tr;function Wr(){return[]}var Fi=Wr,xo=Object.prototype,_o=xo.propertyIsEnumerable,La=Object.getOwnPropertySymbols,Na=La?function(e){return e==null?[]:(e=Object(e),Or(La(e),function(t){return _o.call(e,t)}))}:Fi,Ta=Na;function Ca(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var xa=Ca;function Fa(e){return e!=null&&typeof e=="object"}var Oa=Fa,Za="[object Arguments]";function Sa(e){return Oa(e)&&fe(e)==Za}var ps=Sa,Ws=Object.prototype,$s=Ws.hasOwnProperty,Ec=Ws.propertyIsEnumerable,pl=ps(function(){return arguments}())?ps:function(e){return Oa(e)&&$s.call(e,"callee")&&!Ec.call(e,"callee")},cc=pl;function cf(){return!1}var fc=cf,zc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qf=zc&&typeof module=="object"&&module&&!module.nodeType&&module,jf=Qf&&Qf.exports===zc,u0=jf?Ie.Buffer:void 0,tp=u0?u0.isBuffer:void 0,jp=tp||fc,Sf=jp,c0=9007199254740991,np=/^(?:0|[1-9]\d*)$/;function Td(e,t){var n=typeof e;return t=t==null?c0:t,!!t&&(n=="number"||n!="symbol"&&np.test(e))&&e>-1&&e%1==0&&e<t}var wf=Td,Vp=9007199254740991;function yh(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vp}var rp=yh,Jf="[object Arguments]",qs="[object Array]",Ad="[object Boolean]",Tf="[object Date]",eh="[object Error]",Ha="[object Function]",ce="[object Map]",He="[object Number]",Et="[object Object]",Pn="[object RegExp]",ur="[object Set]",zr="[object String]",pi="[object WeakMap]",Ii="[object ArrayBuffer]",Zo="[object DataView]",Go="[object Float32Array]",la="[object Float64Array]",Js="[object Int8Array]",bl="[object Int16Array]",Es="[object Int32Array]",oo="[object Uint8Array]",Ml="[object Uint8ClampedArray]",_h="[object Uint16Array]",Gh="[object Uint32Array]",Ja={};Ja[Go]=Ja[la]=Ja[Js]=Ja[bl]=Ja[Es]=Ja[oo]=Ja[Ml]=Ja[_h]=Ja[Gh]=!0,Ja[Jf]=Ja[qs]=Ja[Ii]=Ja[Ad]=Ja[Zo]=Ja[Tf]=Ja[eh]=Ja[Ha]=Ja[ce]=Ja[He]=Ja[Et]=Ja[Pn]=Ja[ur]=Ja[zr]=Ja[pi]=!1;function Ns(e){return Oa(e)&&rp(e.length)&&!!Ja[fe(e)]}var ff=Ns;function Ui(e){return function(t){return e(t)}}var Af=Ui,Cd=typeof exports=="object"&&exports&&!exports.nodeType&&exports,bh=Cd&&typeof module=="object"&&module&&!module.nodeType&&module,Cf=bh&&bh.exports===Cd,hc=Cf&&Ye.process,f0=function(){try{var e=bh&&bh.require&&bh.require("util").types;return e||hc&&hc.binding&&hc.binding("util")}catch(t){}}(),xh=f0,Yu=xh&&xh.isTypedArray,th=Yu?Af(Yu):ff,h0=th,Od=Object.prototype,d0=Od.hasOwnProperty;function Z0(e,t){var n=It(e),r=!n&&cc(e),i=!n&&!r&&Sf(e),s=!n&&!r&&!i&&h0(e),l=n||r||i||s,c=l?xa(e.length,String):[],h=c.length;for(var p in e)(t||d0.call(e,p))&&!(l&&(p=="length"||i&&(p=="offset"||p=="parent")||s&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||wf(p,h)))&&c.push(p);return c}var dc=Z0,Uc=Object.prototype;function Aa(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Uc;return e===n}var pc=Aa;function hf(e,t){return function(n){return e(t(n))}}var mu=hf,Wh=mu(Object.keys,Object),Hl=Wh,zu=Object.prototype,$u=zu.hasOwnProperty;function ip(e){if(!pc(e))return Hl(e);var t=[];for(var n in Object(e))$u.call(e,n)&&n!="constructor"&&t.push(n);return t}var Bo=ip;function Ao(e){return e!=null&&rp(e.length)&&!qn(e)}var Gl=Ao;function qu(e){return Gl(e)?dc(e):Bo(e)}var Ku=qu;function cl(e){return cn(e,Ku,Ta)}var Sc=cl,nh=1,Md=Object.prototype,Cs=Md.hasOwnProperty;function gu(e,t,n,r,i,s){var l=n&nh,c=Sc(e),h=c.length,p=Sc(t),v=p.length;if(h!=v&&!l)return!1;for(var y=h;y--;){var b=c[y];if(!(l?b in t:Cs.call(t,b)))return!1}var T=s.get(e),M=s.get(t);if(T&&M)return T==t&&M==e;var R=!0;s.set(e,t),s.set(t,e);for(var I=l;++y<h;){b=c[y];var N=e[b],z=t[b];if(r)var H=l?r(z,N,b,t,e,s):r(N,z,b,e,t,s);if(!(H===void 0?N===z||i(N,z,n,r,s):H)){R=!1;break}I||(I=b=="constructor")}if(R&&!I){var X=e.constructor,Y=t.constructor;X!=Y&&"constructor"in e&&"constructor"in t&&!(typeof X=="function"&&X instanceof X&&typeof Y=="function"&&Y instanceof Y)&&(R=!1)}return s.delete(e),s.delete(t),R}var p0=gu,Zh=pr(Ie,"DataView"),op=Zh,Eh=pr(Ie,"Promise"),Qu=Eh,ap=pr(Ie,"Set"),wc=ap,Hp=pr(Ie,"WeakMap"),jc=Hp,Rd="[object Map]",v0="[object Object]",Sh="[object Promise]",Xh="[object Set]",m0="[object WeakMap]",Vf="[object DataView]",Hf=Ai(op),g0=Ai(oi),rh=Ai(Qu),Of=Ai(wc),X0=Ai(jc),Gf=fe;(op&&Gf(new op(new ArrayBuffer(1)))!=Vf||oi&&Gf(new oi)!=Rd||Qu&&Gf(Qu.resolve())!=Sh||wc&&Gf(new wc)!=Xh||jc&&Gf(new jc)!=m0)&&(Gf=function(e){var t=fe(e),n=t==v0?e.constructor:void 0,r=n?Ai(n):"";if(r)switch(r){case Hf:return Vf;case g0:return Rd;case rh:return Sh;case Of:return Xh;case X0:return m0}return t});var Yh=Gf,y0=1,_="[object Arguments]",S="[object Array]",x="[object Object]",O=Object.prototype,k=O.hasOwnProperty;function Z(e,t,n,r,i,s){var l=It(e),c=It(t),h=l?S:Yh(e),p=c?S:Yh(t);h=h==_?x:h,p=p==_?x:p;var v=h==x,y=p==x,b=h==p;if(b&&Sf(e)){if(!Sf(t))return!1;l=!0,v=!1}if(b&&!v)return s||(s=new Xu),l||h0(e)?bc(e,t,n,r,i,s):ie(e,t,h,n,r,i,s);if(!(n&y0)){var T=v&&k.call(e,"__wrapped__"),M=y&&k.call(t,"__wrapped__");if(T||M){var R=T?e.value():e,I=M?t.value():t;return s||(s=new Xu),i(R,I,n,r,s)}}return b?(s||(s=new Xu),p0(e,t,n,r,i,s)):!1}var Q=Z;function ge(e,t,n,r,i){return e===t?!0:e==null||t==null||!Oa(e)&&!Oa(t)?e!==e&&t!==t:Q(e,t,n,r,ge,i)}var je=ge;function ft(e,t){return je(e,t)}var Ut=ft;function Vt(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Zt=Vt,En=function(){try{var e=pr(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),mn=En;function Un(e,t,n){t=="__proto__"&&mn?mn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var ln=Un,kn=Object.prototype,Jn=kn.hasOwnProperty;function gr(e,t,n){var r=e[t];(!(Jn.call(e,t)&&dt(r,n))||n===void 0&&!(t in e))&&ln(e,t,n)}var Ir=gr;function Mr(e,t,n,r){var i=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],h=r?r(n[c],e[c],c,n,e):void 0;h===void 0&&(h=e[c]),i?ln(n,c,h):Ir(n,c,h)}return n}var Ur=Mr;function si(e,t){return e&&Ur(t,Ku(t),e)}var Vi=si;function Bi(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var vo=Bi,jo=Object.prototype,Xo=jo.hasOwnProperty;function Yo(e){if(!de(e))return vo(e);var t=pc(e),n=[];for(var r in e)r=="constructor"&&(t||!Xo.call(e,r))||n.push(r);return n}var cs=Yo;function Dr(e){return Gl(e)?dc(e,!0):cs(e)}var Qt=Dr;function ga(e,t){return e&&Ur(t,Qt(t),e)}var fa=ga,Qo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ea=Qo&&typeof module=="object"&&module&&!module.nodeType&&module,aa=Ea&&Ea.exports===Qo,ko=aa?Ie.Buffer:void 0,au=ko?ko.allocUnsafe:void 0;function xl(e,t){if(t)return e.slice();var n=e.length,r=au?au(n):new e.constructor(n);return e.copy(r),r}var Cu=xl;function su(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Ss=su;function vl(e,t){return Ur(e,Ta(e),t)}var fl=vl,vc=mu(Object.getPrototypeOf,Object),Wf=vc,Tc=Object.getOwnPropertySymbols,df=Tc?function(e){for(var t=[];e;)et(t,Ta(e)),e=Wf(e);return t}:Fi,Vc=df;function sp(e,t){return Ur(e,Vc(e),t)}var lp=sp;function wh(e){return cn(e,Qt,Vc)}var $h=wh,qh=Object.prototype,ih=qh.hasOwnProperty;function Mi(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ih.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Rl=Mi;function Pl(e){var t=new e.constructor(e.byteLength);return new ou(t).set(new ou(e)),t}var Ju=Pl;function Mf(e,t){var n=t?Ju(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Rf=Mf,es=/\w*$/;function Ou(e){var t=new e.constructor(e.source,es.exec(e));return t.lastIndex=e.lastIndex,t}var Wl=Ou,oh=gn?gn.prototype:void 0,_0=oh?oh.valueOf:void 0;function Pd(e){return _0?Object(_0.call(e)):{}}var b0=Pd;function Kh(e,t){var n=t?Ju(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Id=Kh,ah="[object Boolean]",up="[object Date]",Y0="[object Map]",Qh="[object Number]",Hc="[object RegExp]",vg="[object Set]",Ty="[object String]",$0="[object Symbol]",l1="[object ArrayBuffer]",q0="[object DataView]",mg="[object Float32Array]",Rv="[object Float64Array]",Ay="[object Int8Array]",x0="[object Int16Array]",xm="[object Int32Array]",cp="[object Uint8Array]",Pv="[object Uint8ClampedArray]",Cy="[object Uint16Array]",gg="[object Uint32Array]";function yg(e,t,n){var r=e.constructor;switch(t){case l1:return Ju(e);case ah:case up:return new r(+e);case q0:return Rf(e,n);case mg:case Rv:case Ay:case x0:case xm:case cp:case Pv:case Cy:case gg:return Id(e,n);case Y0:return new r;case Qh:case Ty:return new r(e);case Hc:return Wl(e);case vg:return new r;case $0:return b0(e)}}var _g=yg,bg=Object.create,xg=function(){function e(){}return function(t){if(!de(t))return{};if(bg)return bg(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),fp=xg;function Gp(e){return typeof e.constructor=="function"&&!pc(e)?fp(Wf(e)):{}}var K0=Gp,Dd="[object Map]";function Iv(e){return Oa(e)&&Yh(e)==Dd}var kl=Iv,Th=xh&&xh.isMap,Q0=Th?Af(Th):kl,E0=Q0,S0="[object Set]";function Jh(e){return Oa(e)&&Yh(e)==S0}var hp=Jh,Ld=xh&&xh.isSet,ed=Ld?Af(Ld):hp,td=ed,Nd=1,Oy=2,dp=4,pp="[object Arguments]",Dv="[object Array]",Pf="[object Boolean]",w0="[object Date]",Lv="[object Error]",If="[object Function]",Wp="[object GeneratorFunction]",Eg="[object Map]",Sg="[object Number]",Nv="[object Object]",Em="[object RegExp]",nd="[object Set]",Zp="[object String]",rd="[object Symbol]",wg="[object WeakMap]",vp="[object ArrayBuffer]",Fd="[object DataView]",mp="[object Float32Array]",pf="[object Float64Array]",J0="[object Int8Array]",ev="[object Int16Array]",Uu="[object Int32Array]",ec="[object Uint8Array]",lu="[object Uint8ClampedArray]",Zf="[object Uint16Array]",My="[object Uint32Array]",el={};el[pp]=el[Dv]=el[vp]=el[Fd]=el[Pf]=el[w0]=el[mp]=el[pf]=el[J0]=el[ev]=el[Uu]=el[Eg]=el[Sg]=el[Nv]=el[Em]=el[nd]=el[Zp]=el[rd]=el[ec]=el[lu]=el[Zf]=el[My]=!0,el[Lv]=el[If]=el[wg]=!1;function tv(e,t,n,r,i,s){var l,c=t&Nd,h=t&Oy,p=t&dp;if(n&&(l=i?n(e,r,i,s):n(e)),l!==void 0)return l;if(!de(e))return e;var v=It(e);if(v){if(l=Rl(e),!c)return Ss(e,l)}else{var y=Yh(e),b=y==If||y==Wp;if(Sf(e))return Cu(e,c);if(y==Nv||y==pp||b&&!i){if(l=h||b?{}:K0(e),!c)return h?lp(e,fa(l,e)):fl(e,Vi(l,e))}else{if(!el[y])return i?e:{};l=_g(e,y,c)}}s||(s=new Xu);var T=s.get(e);if(T)return T;s.set(e,l),td(e)?e.forEach(function(I){l.add(tv(I,t,n,I,e,s))}):E0(e)&&e.forEach(function(I,N){l.set(N,tv(I,t,n,N,e,s))});var M=p?h?$h:Sc:h?Qt:Ku,R=v?void 0:M(e);return Zt(R||e,function(I,N){R&&(N=I,I=e[N]),Ir(l,N,tv(I,t,n,N,e,s))}),l}var nv=tv,Ry=1,Fv=4;function Sm(e){return nv(e,Ry|Fv)}var wm=Sm,Ac="[object Symbol]";function Py(e){return typeof e=="symbol"||Oa(e)&&fe(e)==Ac}var T0=Py,Tm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bv=/^\w*$/;function Am(e,t){if(It(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||T0(e)?!0:Bv.test(e)||!Tm.test(e)||t!=null&&e in Object(t)}var Cm=Am,Iy="Expected a function";function rv(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Iy);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var l=e.apply(this,r);return n.cache=s.set(i,l)||s,l};return n.cache=new(rv.Cache||pu),n}rv.Cache=pu;var Cc=rv,ke=500;function Yt(e){var t=Cc(e,function(r){return n.size===ke&&n.clear(),r}),n=t.cache;return t}var Mn=Yt,Rr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kr=/\\(\\)?/g,Pr=Mn(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Rr,function(n,r,i,s){t.push(i?s.replace(Kr,"$1"):r||n)}),t}),yr=Pr;function Di(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var vi=Di,Hi=1/0,Li=gn?gn.prototype:void 0,ki=Li?Li.toString:void 0;function Gi(e){if(typeof e=="string")return e;if(It(e))return vi(e,Gi)+"";if(T0(e))return ki?ki.call(e):"";var t=e+"";return t=="0"&&1/e==-Hi?"-0":t}var Ei=Gi;function Wi(e){return e==null?"":Ei(e)}var dr=Wi;function jr(e,t){return It(e)?e:Cm(e,t)?[e]:yr(dr(e))}var Si=jr,fo=1/0;function ui(e){if(typeof e=="string"||T0(e))return e;var t=e+"";return t=="0"&&1/e==-fo?"-0":t}var ao=ui;function Ti(e,t){t=Si(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[ao(t[n++])];return n&&n==r?e:void 0}var ro=Ti;function ci(e,t,n){var r=e==null?void 0:ro(e,t);return r===void 0?n:r}var _i=ci,No=function(){return No=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},No.apply(this,arguments)},ha=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function no(e,t){var n=(0,ee.useRef)(),r=(0,ee.useRef)(),i=(0,ee.useRef)(null),s=t.onReady,l=t.onEvent,c=function(v,y){var b;v===void 0&&(v="image/png");var T=(b=i.current)===null||b===void 0?void 0:b.getElementsByTagName("canvas")[0];return T==null?void 0:T.toDataURL(v,y)},h=function(v,y,b){v===void 0&&(v="download"),y===void 0&&(y="image/png");var T=v;v.indexOf(".")===-1&&(T="".concat(v,".").concat(y.split("/")[1]));var M=c(y,b),R=document.createElement("a");return R.href=M,R.download=T,document.body.appendChild(R),R.click(),document.body.removeChild(R),R=null,T},p=function(v,y){y===void 0&&(y=!1);var b=Object.keys(v),T=y;b.forEach(function(M){var R=v[M];M==="tooltip"&&(T=!0),qn(R)&&dn("".concat(R))?v[M]=function(){for(var I=[],N=0;N<arguments.length;N++)I[N]=arguments[N];return tn(R.apply(void 0,I),T)}:It(R)?R.forEach(function(I){p(I,T)}):de(R)?p(R,T):T=y})};return(0,ee.useEffect)(function(){if(n.current&&!Ut(r.current,t)){var v=!1;if(r.current){var y=r.current,b=y.data,T=ha(y,["data"]),M=t.data,R=ha(t,["data"]);v=Ut(T,R)}r.current=wm(t),v?n.current.changeData(_i(t,"data")):(p(t),n.current.update(t),n.current.render())}},[t]),(0,ee.useEffect)(function(){if(!i.current)return function(){return null};r.current||(r.current=wm(t)),p(t);var v=new e(i.current,No({},t));v.toDataURL=c,v.downloadImage=h,v.render(),n.current=v,s&&s(v);var y=function(b){l&&l(v,b)};return v.on("*",y),function(){n.current&&(n.current.destroy(),n.current.off("*",y),n.current=void 0)}},[]),{chart:n,container:i}}var Oi="*",Jr=function(){function e(){this._events={}}return e.prototype.on=function(t,n,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:n,once:!!r}),this},e.prototype.once=function(t,n){return this.on(t,n,!0)},e.prototype.emit=function(t){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=this._events[t]||[],l=this._events[Oi]||[],c=function(h){for(var p=h.length,v=0;v<p;v++)if(h[v]){var y=h[v],b=y.callback,T=y.once;T&&(h.splice(v,1),h.length===0&&delete n._events[t],p--,v--),b.apply(n,r)}};c(s),c(l)},e.prototype.off=function(t,n){if(!t)this._events={};else if(!n)delete this._events[t];else{for(var r=this._events[t]||[],i=r.length,s=0;s<i;s++)r[s].callback===n&&(r.splice(s,1),i--,s--);r.length===0&&delete this._events[t]}return this},e.prototype.getEvents=function(){return this._events},e}(),Vo=Jr;const Ba="main-layer",so="label-layer",va="element",da="view",qo="plot",fs="component",Il="label",Mu="area",ts="mask",Zl={};function tl(e,t){Object.assign(Zl,{[e]:t})}var ae=L(97582),uu=L(38554),ml=uu,cr=L(77160),ti=L(85975),gl=L(49685);function Ma(){var e=new gl.WT(9);return gl.WT!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function tc(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Os(e){var t=new glMatrix.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ia(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Xa(e,t,n,r,i,s,l,c,h){var p=new gl.WT(9);return p[0]=e,p[1]=t,p[2]=n,p[3]=r,p[4]=i,p[5]=s,p[6]=l,p[7]=c,p[8]=h,p}function gs(e,t,n,r,i,s,l,c,h,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=l,e[6]=c,e[7]=h,e[8]=p,e}function Xl(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Bd(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function bn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8],y=v*l-c*p,b=-v*s+c*h,T=p*s-l*h,M=n*y+r*b+i*T;return M?(M=1/M,e[0]=y*M,e[1]=(-v*r+i*p)*M,e[2]=(c*r-i*l)*M,e[3]=b*M,e[4]=(v*n-i*h)*M,e[5]=(-c*n+i*s)*M,e[6]=T*M,e[7]=(-p*n+r*h)*M,e[8]=(l*n-r*s)*M,e):null}function Lr(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8];return e[0]=l*v-c*p,e[1]=i*p-r*v,e[2]=r*c-i*l,e[3]=c*h-s*v,e[4]=n*v-i*h,e[5]=i*s-n*c,e[6]=s*p-l*h,e[7]=r*h-n*p,e[8]=n*l-r*s,e}function Sr(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],l=e[5],c=e[6],h=e[7],p=e[8];return t*(p*s-l*h)+n*(-p*i+l*c)+r*(h*i-s*c)}function mo(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=n[0],T=n[1],M=n[2],R=n[3],I=n[4],N=n[5],z=n[6],H=n[7],X=n[8];return e[0]=b*r+T*l+M*p,e[1]=b*i+T*c+M*v,e[2]=b*s+T*h+M*y,e[3]=R*r+I*l+N*p,e[4]=R*i+I*c+N*v,e[5]=R*s+I*h+N*y,e[6]=z*r+H*l+X*p,e[7]=z*i+H*c+X*v,e[8]=z*s+H*h+X*y,e}function Pa(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=n[0],T=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=l,e[4]=c,e[5]=h,e[6]=b*r+T*l+p,e[7]=b*i+T*c+v,e[8]=b*s+T*h+y,e}function Ya(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],h=t[5],p=t[6],v=t[7],y=t[8],b=Math.sin(n),T=Math.cos(n);return e[0]=T*r+b*l,e[1]=T*i+b*c,e[2]=T*s+b*h,e[3]=T*l-b*r,e[4]=T*c-b*i,e[5]=T*h-b*s,e[6]=p,e[7]=v,e[8]=y,e}function Nt(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function nn(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Rn(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Tr(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function xr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Vn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n+n,c=r+r,h=i+i,p=n*l,v=r*l,y=r*c,b=i*l,T=i*c,M=i*h,R=s*l,I=s*c,N=s*h;return e[0]=1-y-M,e[3]=v-N,e[6]=b+I,e[1]=v+N,e[4]=1-p-M,e[7]=T-R,e[2]=b-I,e[5]=T+R,e[8]=1-p-y,e}function Kn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=t[4],c=t[5],h=t[6],p=t[7],v=t[8],y=t[9],b=t[10],T=t[11],M=t[12],R=t[13],I=t[14],N=t[15],z=n*c-r*l,H=n*h-i*l,X=n*p-s*l,Y=r*h-i*c,ne=r*p-s*c,pe=i*p-s*h,ye=v*R-y*M,De=v*I-b*M,Xe=v*N-T*M,Ke=y*I-b*R,mt=y*N-T*R,Qe=b*N-T*I,ut=z*Qe-H*mt+X*Ke+Y*Xe-ne*De+pe*ye;return ut?(ut=1/ut,e[0]=(c*Qe-h*mt+p*Ke)*ut,e[1]=(h*Xe-l*Qe-p*De)*ut,e[2]=(l*mt-c*Xe+p*ye)*ut,e[3]=(i*mt-r*Qe-s*Ke)*ut,e[4]=(n*Qe-i*Xe+s*De)*ut,e[5]=(r*Xe-n*mt-s*ye)*ut,e[6]=(R*pe-I*ne+N*Y)*ut,e[7]=(I*X-M*pe-N*H)*ut,e[8]=(M*ne-R*X+N*z)*ut,e):null}function rr(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function xn(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Zn(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function en(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Xn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function Nr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Vr(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function bi(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function li(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],l=e[4],c=e[5],h=e[6],p=e[7],v=e[8],y=t[0],b=t[1],T=t[2],M=t[3],R=t[4],I=t[5],N=t[6],z=t[7],H=t[8];return Math.abs(n-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-T)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-M)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-R)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(c-I)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-N)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(p-z)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))&&Math.abs(v-H)<=glMatrix.EPSILON*Math.max(1,Math.abs(v),Math.abs(H))}var yi=null,Lo=null,Zi=L(98333);function to(){var e=new gl.WT(4);return gl.WT!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function oa(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function na(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function zs(e,t){var n=Math.acos(t[3])*2,r=Math.sin(n/2);return r>glMatrix.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function ju(e,t){var n=id(e,t);return Math.acos(2*n*n-1)}function Oc(e,t,n){var r=t[0],i=t[1],s=t[2],l=t[3],c=n[0],h=n[1],p=n[2],v=n[3];return e[0]=r*v+l*c+i*p-s*h,e[1]=i*v+l*h+s*c-r*p,e[2]=s*v+l*p+r*h-i*c,e[3]=l*v-r*c-i*h-s*p,e}function Dy(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h+l*c,e[1]=i*h+s*c,e[2]=s*h-i*c,e[3]=l*h-r*c,e}function sh(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h-s*c,e[1]=i*h+l*c,e[2]=s*h+r*c,e[3]=l*h-i*c,e}function Om(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],l=t[3],c=Math.sin(n),h=Math.cos(n);return e[0]=r*h+i*c,e[1]=i*h-r*c,e[2]=s*h+l*c,e[3]=l*h-s*c,e}function Xp(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function kv(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=Math.sqrt(n*n+r*r+i*i),c=Math.exp(s),h=l>0?c*Math.sin(l)/l:0;return e[0]=n*h,e[1]=r*h,e[2]=i*h,e[3]=c*Math.cos(l),e}function u1(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=Math.sqrt(n*n+r*r+i*i),c=l>0?Math.atan2(l,s)/l:0;return e[0]=n*c,e[1]=r*c,e[2]=i*c,e[3]=.5*Math.log(n*n+r*r+i*i+s*s),e}function QE(e,t,n){return u1(e,t),ky(e,e,n),kv(e,e),e}function Mm(e,t,n,r){var i=t[0],s=t[1],l=t[2],c=t[3],h=n[0],p=n[1],v=n[2],y=n[3],b,T,M,R,I;return T=i*h+s*p+l*v+c*y,T<0&&(T=-T,h=-h,p=-p,v=-v,y=-y),1-T>gl.Ib?(b=Math.acos(T),M=Math.sin(b),R=Math.sin((1-r)*b)/M,I=Math.sin(r*b)/M):(R=1-r,I=r),e[0]=R*i+I*h,e[1]=R*s+I*p,e[2]=R*l+I*v,e[3]=R*c+I*y,e}function Ly(e){var t=glMatrix.RANDOM(),n=glMatrix.RANDOM(),r=glMatrix.RANDOM(),i=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=s*Math.sin(2*Math.PI*r),e[3]=s*Math.cos(2*Math.PI*r),e}function A0(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n*n+r*r+i*i+s*s,c=l?1/l:0;return e[0]=-n*c,e[1]=-r*c,e[2]=-i*c,e[3]=s*c,e}function Ny(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function zv(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var s=(i+1)%3,l=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[s*3+s]-t[l*3+l]+1),e[i]=.5*r,r=.5/r,e[3]=(t[s*3+l]-t[l*3+s])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[l]=(t[l*3+i]+t[i*3+l])*r}return e}function Tg(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var s=Math.sin(t),l=Math.cos(t),c=Math.sin(n),h=Math.cos(n),p=Math.sin(r),v=Math.cos(r);return e[0]=s*h*v-l*c*p,e[1]=l*c*v+s*h*p,e[2]=l*h*p-s*c*v,e[3]=l*h*v+s*c*p,e}function cu(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Dl=Zi.d9,Fy=Zi.al,kd=Zi.JG,c1=Zi.t8,Ag=Zi.IH,By=Oc,ky=Zi.bA,id=Zi.AK,Uv=Zi.t7,rx=Zi.kE,nc=null,zy=Zi.we,iv=null,jv=Zi.Fv,f1=Zi.I6,ix=Zi.fS,Cg=function(){var e=cr.Ue(),t=cr.al(1,0,0),n=cr.al(0,1,0);return function(r,i,s){var l=cr.AK(i,s);return l<-.999999?(cr.kC(e,t,i),cr.Zh(e)<1e-6&&cr.kC(e,n,i),cr.Fv(e,e),na(r,e,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(cr.kC(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+l,jv(r,r))}}(),Yp=function(){var e=to(),t=to();return function(n,r,i,s,l,c){return Mm(e,r,l,c),Mm(t,i,s,c),Mm(n,e,t,2*c*(1-c)),n}}(),h1=function(){var e=Ma();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],jv(t,zv(t,e))}}(),Rm=L(31437),yu=L(25897);function Fs(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var ya=L(95147),ov=L(95456),u=function(e){return(0,ov.Z)(e,"String")},d=L(81957),g={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function A(e){return Array.isArray(e)&&e.every(function(t){var n=t[0].toLowerCase();return g[n]===t.length-1&&"achlmqstvz".includes(n)})}function P(e){return A(e)&&e.every(function(t){var n=t[0];return n===n.toUpperCase()})}function F(e){return P(e)&&e.every(function(t){var n=t[0];return"ACLMQZ".includes(n)})}var j={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function q(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=g[n]&&(n==="m"&&r.length>2?(e.segments.push([t].concat(r.splice(0,2))),n="l",t=t==="m"?"l":"L"):e.segments.push([t].concat(r.splice(0,g[n]))),!!g[n]););}function _e(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);if(r===48){e.param=0,e.index+=1;return}if(r===49){e.param=1,e.index+=1;return}e.err='[path-util]: invalid Arc flag "'+n[t]+'", expecting 0 or 1 at index '+t}function Ne(e){return e>=48&&e<=57||e===43||e===45||e===46}function Ze(e){return e>=48&&e<=57}function ot(e){var t=e.max,n=e.pathValue,r=e.index,i=r,s=!1,l=!1,c=!1,h=!1,p;if(i>=t){e.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(p=n.charCodeAt(i),(p===43||p===45)&&(i+=1,p=n.charCodeAt(i)),!Ze(p)&&p!==46){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" is not a number';return}if(p!==46){if(s=p===48,i+=1,p=n.charCodeAt(i),s&&i<t&&p&&Ze(p)){e.err="[path-util]: Invalid path value at index "+r+', "'+n[r]+'" illegal number';return}for(;i<t&&Ze(n.charCodeAt(i));)i+=1,l=!0;p=n.charCodeAt(i)}if(p===46){for(h=!0,i+=1;Ze(n.charCodeAt(i));)i+=1,c=!0;p=n.charCodeAt(i)}if(p===101||p===69){if(h&&!l&&!c){e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid float exponent';return}if(i+=1,p=n.charCodeAt(i),(p===43||p===45)&&(i+=1),i<t&&Ze(n.charCodeAt(i)))for(;i<t&&Ze(n.charCodeAt(i));)i+=1;else{e.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid integer exponent';return}}e.index=i,e.param=+e.pathValue.slice(r,i)}function Tt(e){var t=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&t.includes(e)}function Bt(e){for(var t=e.pathValue,n=e.max;e.index<n&&Tt(t.charCodeAt(e.index));)e.index+=1}function vn(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function _n(e){return(e|32)===97}function Hn(e){var t=e.max,n=e.pathValue,r=e.index,i=n.charCodeAt(r),s=g[n[r].toLowerCase()];if(e.segmentStart=r,!vn(i)){e.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command';return}if(e.index+=1,Bt(e),e.data=[],!s){q(e);return}for(;;){for(var l=s;l>0;l-=1){if(_n(i)&&(l===3||l===4)?_e(e):ot(e),e.err.length)return;e.data.push(e.param),Bt(e),e.index<t&&n.charCodeAt(e.index)===44&&(e.index+=1,Bt(e))}if(e.index>=e.max||!Ne(n.charCodeAt(e.index)))break}q(e)}var Ln=function(){function e(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return e}();function fr(e){if(A(e))return[].concat(e);var t=new Ln(e);for(Bt(t);t.index<t.max&&!t.err.length;)Hn(t);return t.err?t.err:t.segments}function _r(e){if(P(e))return[].concat(e);var t=fr(e),n=0,r=0,i=0,s=0;return t.map(function(l){var c=l.slice(1).map(Number),h=l[0],p=h.toUpperCase();if(h==="M")return n=c[0],r=c[1],i=n,s=r,["M",n,r];var v;if(h!==p)switch(p){case"A":v=[p,c[0],c[1],c[2],c[3],c[4],c[5]+n,c[6]+r];break;case"V":v=[p,c[0]+r];break;case"H":v=[p,c[0]+n];break;default:{var y=c.map(function(T,M){return T+(M%2?r:n)});v=[p].concat(y)}}else v=[p].concat(c);var b=v.length;switch(p){case"Z":n=i,r=s;break;case"H":n=v[1];break;case"V":r=v[1];break;default:n=v[b-2],r=v[b-1],p==="M"&&(i=n,s=r)}return v})}function Fr(e,t){var n=e[0],r=t.x1,i=t.y1,s=t.x2,l=t.y2,c=e.slice(1).map(Number),h=e;if("TQ".includes(n)||(t.qx=null,t.qy=null),n==="H")h=["L",e[1],i];else if(n==="V")h=["L",r,e[1]];else if(n==="S"){var p=r*2-s,v=i*2-l;t.x1=p,t.y1=v,h=["C",p,v].concat(c)}else if(n==="T"){var y=r*2-t.qx,b=i*2-t.qy;t.qx=y,t.qy=b,h=["Q",y,b].concat(c)}else if(n==="Q"){var T=c[0],M=c[1];t.qx=T,t.qy=M}return h}function Br(e){if(F(e))return[].concat(e);for(var t=_r(e),n=(0,ae.pi)({},j),r=0;r<t.length;r+=1){t[r]=Fr(t[r],n);var i=t[r],s=i.length;n.x1=+i[s-2],n.y1=+i[s-1],n.x2=+i[s-4]||n.x1,n.y2=+i[s-3]||n.y1}return t}function $r(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return[r+(s-r)*n,i+(l-i)*n]}function Ni(e,t,n,r,i){var s=Fs([e,t],[n,r]),l={x:0,y:0};if(typeof i=="number")if(i<=0)l={x:e,y:t};else if(i>=s)l={x:n,y:r};else{var c=$r([e,t],[n,r],i/s),h=c[0],p=c[1];l={x:h,y:p}}return{length:s,point:l,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}function eo(e,t){var n=e.x,r=e.y,i=t.x,s=t.y,l=n*i+r*s,c=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(s,2))),h=n*s-r*i<0?-1:1,p=h*Math.acos(l/c);return p}function zo(e,t,n,r,i,s,l,c,h,p){var v=Math.abs,y=Math.sin,b=Math.cos,T=Math.sqrt,M=Math.PI,R=v(n),I=v(r),N=(i%360+360)%360,z=N*(M/180);if(e===c&&t===h)return{x:e,y:t};if(R===0||I===0)return Ni(e,t,c,h,p).point;var H=(e-c)/2,X=(t-h)/2,Y={x:b(z)*H+y(z)*X,y:-y(z)*H+b(z)*X},ne=Math.pow(Y.x,2)/Math.pow(R,2)+Math.pow(Y.y,2)/Math.pow(I,2);ne>1&&(R*=T(ne),I*=T(ne));var pe=Math.pow(R,2)*Math.pow(I,2)-Math.pow(R,2)*Math.pow(Y.y,2)-Math.pow(I,2)*Math.pow(Y.x,2),ye=Math.pow(R,2)*Math.pow(Y.y,2)+Math.pow(I,2)*Math.pow(Y.x,2),De=pe/ye;De=De<0?0:De;var Xe=(s!==l?1:-1)*T(De),Ke={x:Xe*(R*Y.y/I),y:Xe*(-(I*Y.x)/R)},mt={x:b(z)*Ke.x-y(z)*Ke.y+(e+c)/2,y:y(z)*Ke.x+b(z)*Ke.y+(t+h)/2},Qe={x:(Y.x-Ke.x)/R,y:(Y.y-Ke.y)/I},ut=eo({x:1,y:0},Qe),ct={x:(-Y.x-Ke.x)/R,y:(-Y.y-Ke.y)/I},gt=eo(Qe,ct);!l&&gt>0?gt-=2*M:l&&gt<0&&(gt+=2*M),gt%=2*M;var Xt=ut+gt*p,Rt=R*b(Xt),kt=I*y(Xt),wn={x:b(z)*Rt-y(z)*kt+mt.x,y:y(z)*Rt+b(z)*kt+mt.y};return wn}function go(e,t,n,r,i,s,l,c,h,p,v){var y,b=v.bbox,T=b===void 0?!0:b,M=v.length,R=M===void 0?!0:M,I=v.sampleSize,N=I===void 0?30:I,z=typeof p=="number",H=e,X=t,Y=0,ne=[H,X,Y],pe=[H,X],ye=0,De={x:0,y:0},Xe=[{x:H,y:X}];z&&p<=0&&(De={x:H,y:X});for(var Ke=0;Ke<=N;Ke+=1){if(ye=Ke/N,y=zo(e,t,n,r,i,s,l,c,h,ye),H=y.x,X=y.y,T&&Xe.push({x:H,y:X}),R&&(Y+=Fs(pe,[H,X])),pe=[H,X],z&&Y>=p&&p>ne[2]){var mt=(Y-p)/(Y-ne[2]);De={x:pe[0]*(1-mt)+ne[0]*mt,y:pe[1]*(1-mt)+ne[1]*mt}}ne=[H,X,Y]}return z&&p>=Y&&(De={x:c,y:h}),{length:Y,point:De,min:{x:Math.min.apply(null,Xe.map(function(Qe){return Qe.x})),y:Math.min.apply(null,Xe.map(function(Qe){return Qe.y}))},max:{x:Math.max.apply(null,Xe.map(function(Qe){return Qe.x})),y:Math.max.apply(null,Xe.map(function(Qe){return Qe.y}))}}}function $o(e,t,n,r,i,s,l,c,h){var p=1-h;return{x:Math.pow(p,3)*e+3*Math.pow(p,2)*h*n+3*p*Math.pow(h,2)*i+Math.pow(h,3)*l,y:Math.pow(p,3)*t+3*Math.pow(p,2)*h*r+3*p*Math.pow(h,2)*s+Math.pow(h,3)*c}}function yo(e,t,n,r,i,s,l,c,h,p){var v,y=p.bbox,b=y===void 0?!0:y,T=p.length,M=T===void 0?!0:T,R=p.sampleSize,I=R===void 0?10:R,N=typeof h=="number",z=e,H=t,X=0,Y=[z,H,X],ne=[z,H],pe=0,ye={x:0,y:0},De=[{x:z,y:H}];N&&h<=0&&(ye={x:z,y:H});for(var Xe=0;Xe<=I;Xe+=1){if(pe=Xe/I,v=$o(e,t,n,r,i,s,l,c,pe),z=v.x,H=v.y,b&&De.push({x:z,y:H}),M&&(X+=Fs(ne,[z,H])),ne=[z,H],N&&X>=h&&h>Y[2]){var Ke=(X-h)/(X-Y[2]);ye={x:ne[0]*(1-Ke)+Y[0]*Ke,y:ne[1]*(1-Ke)+Y[1]*Ke}}Y=[z,H,X]}return N&&h>=X&&(ye={x:l,y:c}),{length:X,point:ye,min:{x:Math.min.apply(null,De.map(function(mt){return mt.x})),y:Math.min.apply(null,De.map(function(mt){return mt.y}))},max:{x:Math.max.apply(null,De.map(function(mt){return mt.x})),y:Math.max.apply(null,De.map(function(mt){return mt.y}))}}}function Ga(e,t,n,r,i,s,l){var c=1-l;return{x:Math.pow(c,2)*e+2*c*l*n+Math.pow(l,2)*i,y:Math.pow(c,2)*t+2*c*l*r+Math.pow(l,2)*s}}function ua(e,t,n,r,i,s,l,c){var h,p=c.bbox,v=p===void 0?!0:p,y=c.length,b=y===void 0?!0:y,T=c.sampleSize,M=T===void 0?10:T,R=typeof l=="number",I=e,N=t,z=0,H=[I,N,z],X=[I,N],Y=0,ne={x:0,y:0},pe=[{x:I,y:N}];R&&l<=0&&(ne={x:I,y:N});for(var ye=0;ye<=M;ye+=1){if(Y=ye/M,h=Ga(e,t,n,r,i,s,Y),I=h.x,N=h.y,v&&pe.push({x:I,y:N}),b&&(z+=Fs(X,[I,N])),X=[I,N],R&&z>=l&&l>H[2]){var De=(z-l)/(z-H[2]);ne={x:X[0]*(1-De)+H[0]*De,y:X[1]*(1-De)+H[1]*De}}H=[I,N,z]}return R&&l>=z&&(ne={x:i,y:s}),{length:z,point:ne,min:{x:Math.min.apply(null,pe.map(function(Xe){return Xe.x})),y:Math.min.apply(null,pe.map(function(Xe){return Xe.y}))},max:{x:Math.max.apply(null,pe.map(function(Xe){return Xe.x})),y:Math.max.apply(null,pe.map(function(Xe){return Xe.y}))}}}function Ro(e,t,n){for(var r,i,s,l,c,h,p=Br(e),v=typeof t=="number",y,b=[],T,M=0,R=0,I=0,N=0,z,H=[],X=[],Y=0,ne={x:0,y:0},pe=ne,ye=ne,De=ne,Xe=0,Ke=0,mt=p.length;Ke<mt;Ke+=1)z=p[Ke],T=z[0],y=T==="M",b=y?b:[M,R].concat(z.slice(1)),y?(I=z[1],N=z[2],ne={x:I,y:N},pe=ne,Y=0,v&&t<.001&&(De=ne)):T==="L"?(r=Ni(b[0],b[1],b[2],b[3],(t||0)-Xe),Y=r.length,ne=r.min,pe=r.max,ye=r.point):T==="A"?(i=go(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],(t||0)-Xe,n||{}),Y=i.length,ne=i.min,pe=i.max,ye=i.point):T==="C"?(s=yo(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],(t||0)-Xe,n||{}),Y=s.length,ne=s.min,pe=s.max,ye=s.point):T==="Q"?(l=ua(b[0],b[1],b[2],b[3],b[4],b[5],(t||0)-Xe,n||{}),Y=l.length,ne=l.min,pe=l.max,ye=l.point):T==="Z"&&(b=[M,R,I,N],c=Ni(b[0],b[1],b[2],b[3],(t||0)-Xe),Y=c.length,ne=c.min,pe=c.max,ye=c.point),v&&Xe<t&&Xe+Y>=t&&(De=ye),X.push(pe),H.push(ne),Xe+=Y,h=T!=="Z"?z.slice(-2):[I,N],M=h[0],R=h[1];return v&&t>=Xe&&(De={x:M,y:R}),{length:Xe,point:De,min:{x:Math.min.apply(null,H.map(function(Qe){return Qe.x})),y:Math.min.apply(null,H.map(function(Qe){return Qe.y}))},max:{x:Math.max.apply(null,X.map(function(Qe){return Qe.x})),y:Math.max.apply(null,X.map(function(Qe){return Qe.y}))}}}function Ka(e,t){return Ro(e,void 0,(0,ae.pi)((0,ae.pi)({},t),{bbox:!1,length:!0})).length}var Ho=function(e){return Array.isArray?Array.isArray(e):(0,ov.Z)(e,"Array")},is=function(e){if(Ho(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},Uo=function(e){if(Ho(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])},Ms=1e-5;function nl(e,t,n){return n===void 0&&(n=Ms),Math.abs(e-t)<n}var Yl=function(e,t){return(e%t+t)%t},Ll=Yl;function El(e,t,n){if(e[n].length>7){e[n].shift();for(var r=e[n],i=n;r.length;)t[n]="A",e.splice(i+=1,0,["C"].concat(r.splice(0,6)));e.splice(n,1)}}function $l(e){return F(e)&&e.every(function(t){var n=t[0];return"MC".includes(n)})}function ql(e,t,n){var r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return{x:r,y:i}}function _u(e,t,n,r,i,s,l,c,h,p){var v=e,y=t,b=n,T=r,M=c,R=h,I=Math.PI*120/180,N=Math.PI/180*(+i||0),z=[],H,X,Y,ne,pe;if(p)X=p[0],Y=p[1],ne=p[2],pe=p[3];else{H=ql(v,y,-N),v=H.x,y=H.y,H=ql(M,R,-N),M=H.x,R=H.y;var ye=(v-M)/2,De=(y-R)/2,Xe=ye*ye/(b*b)+De*De/(T*T);Xe>1&&(Xe=Math.sqrt(Xe),b*=Xe,T*=Xe);var Ke=b*b,mt=T*T,Qe=(s===l?-1:1)*Math.sqrt(Math.abs((Ke*mt-Ke*De*De-mt*ye*ye)/(Ke*De*De+mt*ye*ye)));ne=Qe*b*De/T+(v+M)/2,pe=Qe*-T*ye/b+(y+R)/2,X=Math.asin(((y-pe)/T*Math.pow(10,9)>>0)/Math.pow(10,9)),Y=Math.asin(((R-pe)/T*Math.pow(10,9)>>0)/Math.pow(10,9)),X=v<ne?Math.PI-X:X,Y=M<ne?Math.PI-Y:Y,X<0&&(X=Math.PI*2+X),Y<0&&(Y=Math.PI*2+Y),l&&X>Y&&(X-=Math.PI*2),!l&&Y>X&&(Y-=Math.PI*2)}var ut=Y-X;if(Math.abs(ut)>I){var ct=Y,gt=M,Xt=R;Y=X+I*(l&&Y>X?1:-1),M=ne+b*Math.cos(Y),R=pe+T*Math.sin(Y),z=_u(M,R,b,T,i,0,l,gt,Xt,[Y,ct,ne,pe])}ut=Y-X;var Rt=Math.cos(X),kt=Math.sin(X),wn=Math.cos(Y),zn=Math.sin(Y),or=Math.tan(ut/4),ir=4/3*b*or,Zr=4/3*T*or,Ri=[v,y],Qi=[v+ir*kt,y-Zr*Rt],Qr=[M+ir*zn,R-Zr*wn],ei=[M,R];if(Qi[0]=2*Ri[0]-Qi[0],Qi[1]=2*Ri[1]-Qi[1],p)return Qi.concat(Qr,ei,z);z=Qi.concat(Qr,ei,z);for(var Po=[],uo=0,Jo=z.length;uo<Jo;uo+=1)Po[uo]=uo%2?ql(z[uo-1],z[uo],N).y:ql(z[uo],z[uo+1],N).x;return Po}function Gc(e,t,n,r,i,s){var l=.3333333333333333,c=2/3;return[l*e+c*n,l*t+c*r,l*i+c*n,l*s+c*r,i,s]}var Vu=function(e,t,n,r){var i=.5,s=$r([e,t],[n,r],i);return(0,ae.ev)((0,ae.ev)([],s,!0),[n,r,n,r],!1)};function Wc(e,t){var n=e[0],r=e.slice(1).map(Number),i=r[0],s=r[1],l,c=t.x1,h=t.y1,p=t.x,v=t.y;switch("TQ".includes(n)||(t.qx=null,t.qy=null),n){case"M":return t.x=i,t.y=s,e;case"A":return l=[c,h].concat(r),["C"].concat(_u(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9]));case"Q":return t.qx=i,t.qy=s,l=[c,h].concat(r),["C"].concat(Gc(l[0],l[1],l[2],l[3],l[4],l[5]));case"L":return["C"].concat(Vu(c,h,i,s));case"Z":return c===p&&h===v?["C",c,h,p,v,p,v]:["C"].concat(Vu(c,h,p,v));default:}return e}function zl(e,t){if(t===void 0&&(t=!1),$l(e)){var n=[].concat(e);return t?[n,[]]:n}for(var r=Br(e),i=(0,ae.pi)({},j),s=[],l="",c=r.length,h,p,v=[],y=0;y<c;y+=1){r[y]&&(l=r[y][0]),s[y]=l;var b=Wc(r[y],i);r[y]=b,El(r,s,y),c=r.length,l==="Z"&&v.push(y),h=r[y],p=h.length,i.x1=+h[p-2],i.y1=+h[p-1],i.x2=+h[p-4]||i.x1,i.y2=+h[p-3]||i.y1}return t?[r,v]:r}function rc(e,t){t===void 0&&(t=.5);var n=e.slice(0,2),r=e.slice(2,4),i=e.slice(4,6),s=e.slice(6,8),l=$r(n,r,t),c=$r(r,i,t),h=$r(i,s,t),p=$r(l,c,t),v=$r(c,h,t),y=$r(p,v,t);return[["C"].concat(l,p,y),["C"].concat(v,h,s)]}function ns(e){return e.map(function(t,n,r){var i=n&&r[n-1].slice(-2).concat(t.slice(1)),s=n?yo(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,l;return n?l=s?rc(i):[t,t]:l=[t],{s:t,ss:l,l:s}})}function Ks(e,t,n){var r=ns(e),i=ns(t),s=r.length,l=i.length,c=r.filter(function(I){return I.l}).length,h=i.filter(function(I){return I.l}).length,p=r.filter(function(I){return I.l}).reduce(function(I,N){var z=N.l;return I+z},0)/c||0,v=i.filter(function(I){return I.l}).reduce(function(I,N){var z=N.l;return I+z},0)/h||0,y=n||Math.max(s,l),b=[p,v],T=[y-s,y-l],M=0,R=[r,i].map(function(I,N){return I.l===y?I.map(function(z){return z.s}):I.map(function(z,H){return M=H&&T[N]&&z.l>=b[N],T[N]-=M?1:0,M?z.ss:[z.s]}).flat()});return R[0].length===R[1].length?R:Ks(R[0],R[1],y)}function js(e,t,n,r,i,s,l,c){return 3*((c-t)*(n+i)-(l-e)*(r+s)+r*(e-i)-n*(t-s)+c*(i+e/3)-l*(s+t/3))/20}function ys(e){var t=0,n=0,r=0;return zl(e).map(function(i){var s;switch(i[0]){case"M":return t=i[1],n=i[2],0;default:var l=i.slice(1),c=l[0],h=l[1],p=l[2],v=l[3],y=l[4],b=l[5];return r=js(t,n,c,h,p,v,y,b),s=i.slice(-2),t=s[0],n=s[1],r}}).reduce(function(i,s){return i+s},0)}function Zc(e){return ys(e)>=0}function Mc(e){var t=e.slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):e[0].slice(1).concat(n.slice(1))}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map(function(n){return["C"].concat(n.slice(2))}))}function hl(e){return e.map(function(t){return Array.isArray(t)?[].concat(t):t})}function bu(e){var t=e.length,n=t-1;return e.map(function(r,i){return e.map(function(s,l){var c=i+l,h;return l===0||e[c]&&e[c][0]==="M"?(h=e[c],["M"].concat(h.slice(-2))):(c>=t&&(c-=n),e[c])})})}function Rc(e,t){var n=e.length-1,r=[],i=0,s=0,l=bu(e);return l.forEach(function(c,h){e.slice(1).forEach(function(p,v){s+=Fs(e[(h+v)%n].slice(-2),t[v%n].slice(-2))}),r[h]=s,s=0}),i=r.indexOf(Math.min.apply(null,r)),l[i]}var Rs=function(e){return e===void 0},Vs=Rs,lh=function(e){return(0,ov.Z)(e,"Boolean")},zd=lh,al=function(e){var t=typeof e;return e!==null&&t==="object"||t==="function"};function gp(e,t,n){return Ro(e,t,(0,ae.pi)((0,ae.pi)({},n),{bbox:!1,length:!0})).point}var od=L(37620);function ic(e,t,n,r){var i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}function yp(e,t){var n=Math.min.apply(Math,(0,ae.ev)([],(0,ae.CR)(e),!1)),r=Math.min.apply(Math,(0,ae.ev)([],(0,ae.CR)(t),!1)),i=Math.max.apply(Math,(0,ae.ev)([],(0,ae.CR)(e),!1)),s=Math.max.apply(Math,(0,ae.ev)([],(0,ae.CR)(t),!1));return{x:n,y:r,width:i-n,height:s-r}}function av(e){return(e+Math.PI*2)%(Math.PI*2)}function _p(e,t){var n=Math.abs(e);return t>0?n:n*-1}function Vv(e,t,n,r,i,s){var l=n,c=r;if(l===0||c===0)return{x:e,y:t};for(var h=i-e,p=s-t,v=Math.abs(h),y=Math.abs(p),b=l*l,T=c*c,M=Math.PI/4,R=0,I=0,N=0;N<4;N++){R=l*Math.cos(M),I=c*Math.sin(M);var z=(b-T)*Math.pow(Math.cos(M),3)/l,H=(T-b)*Math.pow(Math.sin(M),3)/c,X=R-z,Y=I-H,ne=v-z,pe=y-H,ye=Math.hypot(Y,X),De=Math.hypot(pe,ne),Xe=ye*Math.asin((X*pe-Y*ne)/(ye*De)),Ke=Xe/Math.sqrt(b+T-R*R-I*I);M+=Ke,M=Math.min(Math.PI/2,Math.max(0,M))}return{x:e+_p(R,h),y:t+_p(I,p)}}function Og(e,t,n,r,i,s,l,c){return-1*n*Math.cos(i)*Math.sin(c)-r*Math.sin(i)*Math.cos(c)}function sv(e,t,n,r,i,s,l,c){return-1*n*Math.sin(i)*Math.sin(c)+r*Math.cos(i)*Math.cos(c)}function Hv(e,t,n){return Math.atan(-t/e*Math.tan(n))}function Pm(e,t,n){return Math.atan(t/(e*Math.tan(n)))}function $p(e,t,n,r,i,s){return n*Math.cos(i)*Math.cos(s)-r*Math.sin(i)*Math.sin(s)+e}function bp(e,t,n,r,i,s){return n*Math.sin(i)*Math.cos(s)+r*Math.cos(i)*Math.sin(s)+t}function Im(e,t,n,r){var i=Math.atan2(r*e,n*t);return(i+Math.PI*2)%(Math.PI*2)}function lv(e,t,n){return{x:e*Math.cos(n),y:t*Math.sin(n)}}function qp(e,t,n){var r=Math.cos(n),i=Math.sin(n);return[e*r-t*i,e*i+t*r]}function Gv(e,t,n,r,i,s,l){for(var c=Hv(n,r,i),h=1/0,p=-1/0,v=[s,l],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var b=c+y;s<l?s<b&&b<l&&v.push(b):l<b&&b<s&&v.push(b)}for(var y=0;y<v.length;y++){var T=$p(e,t,n,r,i,v[y]);T<h&&(h=T),T>p&&(p=T)}for(var M=Pm(n,r,i),R=1/0,I=-1/0,N=[s,l],y=-Math.PI*2;y<=Math.PI*2;y+=Math.PI){var z=M+y;s<l?s<z&&z<l&&N.push(z):l<z&&z<s&&N.push(z)}for(var y=0;y<N.length;y++){var H=bp(e,t,n,r,i,N[y]);H<R&&(R=H),H>I&&(I=H)}return{x:h,y:R,width:p-h,height:I-R}}function uv(e,t,n,r,i,s,l,c,h){var p=qp(c-e,h-t,-i),v=__read(p,2),y=v[0],b=v[1],T=Vv(0,0,n,r,y,b),M=Im(n,r,T.x,T.y);M<s?T=lv(n,r,s):M>l&&(T=lv(n,r,l));var R=qp(T.x,T.y,i);return{x:R[0]+e,y:R[1]+t}}function cv(e,t,n,r,i,s,l,c){var h=(l-s)*c+s,p=Og(e,t,n,r,i,s,l,h),v=sv(e,t,n,r,i,s,l,h);return av(Math.atan2(v,p))}var Kp=1e-4;function xp(e,t,n,r,i,s){var l=-1,c=1/0,h=[n,r],p=20;s&&s>200&&(p=s/10);for(var v=1/p,y=v/10,b=0;b<=p;b++){var T=b*v,M=[i.apply(void 0,(0,ae.ev)([],(0,ae.CR)(e.concat([T])),!1)),i.apply(void 0,(0,ae.ev)([],(0,ae.CR)(t.concat([T])),!1))],R=ic(h[0],h[1],M[0],M[1]);R<c&&(l=T,c=R)}if(l===0)return{x:e[0],y:t[0]};if(l===1){var I=e.length;return{x:e[I-1],y:t[I-1]}}c=1/0;for(var b=0;b<32&&!(y<Kp);b++){var N=l-y,z=l+y,M=[i.apply(void 0,(0,ae.ev)([],(0,ae.CR)(e.concat([N])),!1)),i.apply(void 0,(0,ae.ev)([],(0,ae.CR)(t.concat([N])),!1))],R=ic(h[0],h[1],M[0],M[1]);if(N>=0&&R<c)l=N,c=R;else{var H=[i.apply(void 0,(0,ae.ev)([],(0,ae.CR)(e.concat([z])),!1)),i.apply(void 0,(0,ae.ev)([],(0,ae.CR)(t.concat([z])),!1))],X=ic(h[0],h[1],H[0],H[1]);z<=1&&X<c?(l=z,c=X):y*=.5}}return{x:i.apply(void 0,(0,ae.ev)([],(0,ae.CR)(e.concat([l])),!1)),y:i.apply(void 0,(0,ae.ev)([],(0,ae.CR)(t.concat([l])),!1))}}function Mg(e,t){for(var n=0,r=e.length,i=0;i<r;i++){var s=e[i],l=t[i],c=e[(i+1)%r],h=t[(i+1)%r];n+=ic(s,l,c,h)}return n/2}function Dm(e,t,n,r){return yp([e,n],[t,r])}function C0(e,t,n,r){return ic(e,t,n,r)}function uh(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}}function Rg(e,t,n,r,i,s){var l=(n-e)*(i-e)+(r-t)*(s-t);if(l<0)return ic(e,t,i,s);var c=(n-e)*(n-e)+(r-t)*(r-t);return l>c?ic(n,r,i,s):O0(e,t,n,r,i,s)}function O0(e,t,n,r,i,s){var l=[n-e,r-t];if(Rm.I6(l,[0,0]))return Math.sqrt((i-e)*(i-e)+(s-t)*(s-t));var c=[-l[1],l[0]];Rm.Fv(c,c);var h=[i-e,s-t];return Math.abs(Rm.AK(h,c))}function Uy(e,t,n,r){return Math.atan2(r-t,n-e)}function Ud(e,t,n,r,i){var s=1-i;return s*s*s*e+3*t*i*s*s+3*n*i*i*s+r*i*i*i}function Qp(e,t,n,r,i){var s=1-i;return 3*(s*s*(t-e)+2*s*i*(n-t)+i*i*(r-n))}function ad(e,t,n,r){var i=-3*e+9*t-9*n+3*r,s=6*e-12*t+6*n,l=3*t-3*e,c=[],h,p,v;if(nl(i,0))nl(s,0)||(h=-l/s,h>=0&&h<=1&&c.push(h));else{var y=s*s-4*i*l;nl(y,0)?c.push(-s/(2*i)):y>0&&(v=Math.sqrt(y),h=(-s+v)/(2*i),p=(-s-v)/(2*i),h>=0&&h<=1&&c.push(h),p>=0&&p<=1&&c.push(p))}return c}function Wv(e,t,n,r,i,s,l,c,h){var p=Ud(e,n,i,l,h),v=Ud(t,r,s,c,h),y=uh(e,t,n,r,h),b=uh(n,r,i,s,h),T=uh(i,s,l,c,h),M=uh(y.x,y.y,b.x,b.y,h),R=uh(b.x,b.y,T.x,T.y,h);return[[e,t,y.x,y.y,M.x,M.y,p,v],[p,v,R.x,R.y,T.x,T.y,l,c]]}function M0(e,t,n,r,i,s,l,c,h){if(h===0)return Mg([e,n,i,l],[t,r,s,c]);var p=Wv(e,t,n,r,i,s,l,c,.5),v=__spreadArray(__spreadArray([],__read(p[0]),!1),[h-1],!1),y=__spreadArray(__spreadArray([],__read(p[1]),!1),[h-1],!1);return M0.apply(void 0,__spreadArray([],__read(v),!1))+M0.apply(void 0,__spreadArray([],__read(y),!1))}function jy(e,t,n,r,i,s,l,c){for(var h=[e,l],p=[t,c],v=ad(e,n,i,l),y=ad(t,r,s,c),b=0;b<v.length;b++)h.push(Ud(e,n,i,l,v[b]));for(var b=0;b<y.length;b++)p.push(Ud(t,r,s,c,y[b]));return yp(h,p)}function d1(e,t,n,r,i,s,l,c){return M0(e,t,n,r,i,s,l,c,3)}function p1(e,t,n,r,i,s,l,c,h,p,v){return xp([e,n,i,l],[t,r,s,c],h,p,Ud,v)}function Vy(e,t,n,r,i,s,l,c,h,p,v){var y=p1(e,t,n,r,i,s,l,c,h,p,v);return ic(y.x,y.y,h,p)}function Lm(e,t,n,r,i,s,l,c,h){return{x:Ud(e,n,i,l,h),y:Ud(t,r,s,c,h)}}function ox(e,t,n,r,i,s,l,c,h){var p=Qp(e,n,i,l,h),v=Qp(t,r,s,c,h);return av(Math.atan2(v,p))}function Zv(e){for(var t=0,n=[],r=0;r<e.length-1;r++){var i=e[r],s=e[r+1],l=ic(i[0],i[1],s[0],s[1]),c={from:i,to:s,length:l};n.push(c),t+=l}return{segments:n,totalLength:t}}function Kl(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=ic(r[0],r[1],i[0],i[1])}return t}function Ah(e,t){if(t>1||t<0||e.length<2)return null;var n=Zv(e),r=n.segments,i=n.totalLength;if(i===0)return{x:e[0][0],y:e[0][1]};for(var s=0,l=null,c=0;c<r.length;c++){var h=r[c],p=h.from,v=h.to,y=h.length/i;if(t>=s&&t<=s+y){var b=(t-s)/y;l=uh(p[0],p[1],v[0],v[1],b);break}s+=y}return l}function ax(e,t){if(t>1||t<0||e.length<2)return 0;for(var n=Zv(e),r=n.segments,i=n.totalLength,s=0,l=0,c=0;c<r.length;c++){var h=r[c],p=h.from,v=h.to,y=h.length/i;if(t>=s&&t<=s+y){l=Math.atan2(v[1]-p[1],v[0]-p[0]);break}s+=y}return l}function Ep(e,t,n){for(var r=1/0,i=0;i<e.length-1;i++){var s=e[i],l=e[i+1],c=Rg(s[0],s[1],l[0],l[1],t,n);c<r&&(r=c)}return r}function Nm(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];t.push(i[0]),n.push(i[1])}return yp(t,n)}function v1(e){return Kl(e)}function Hy(e,t){return Ah(e,t)}function Jp(e,t,n){return Ep(e,t,n)}function Gy(e,t){return ax(e,t)}function R0(e){var t=e.slice(0);return e.length&&t.push(e[0]),t}function Wy(e){return Nm(e)}function Zy(e){return Kl(R0(e))}function m1(e,t){return Ah(R0(e),t)}function sx(e,t,n){return Ep(R0(e),t,n)}function Pg(e,t){return ax(R0(e),t)}function fv(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function Xy(e,t,n){var r=e+n-2*t;if(nl(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function g1(e,t,n,r,i,s,l){var c=fv(e,n,i,l),h=fv(t,r,s,l),p=uh(e,t,n,r,l),v=uh(n,r,i,s,l);return[[e,t,p.x,p.y,c,h],[c,h,v.x,v.y,i,s]]}function Ig(e,t,n,r,i,s,l){if(l===0)return(ic(e,t,n,r)+ic(n,r,i,s)+ic(e,t,i,s))/2;var c=g1(e,t,n,r,i,s,.5),h=c[0],p=c[1];return h.push(l-1),p.push(l-1),Ig.apply(void 0,__spreadArray([],__read(h),!1))+Ig.apply(void 0,__spreadArray([],__read(p),!1))}function y1(e,t,n,r,i,s){var l=Xy(e,n,i)[0],c=Xy(t,r,s)[0],h=[e,i],p=[t,s];return l!==void 0&&h.push(fv(e,n,i,l)),c!==void 0&&p.push(fv(t,r,s,c)),yp(h,p)}function Ch(e,t,n,r,i,s){return Ig(e,t,n,r,i,s,3)}function Fm(e,t,n,r,i,s,l,c){return xp([e,n,i],[t,r,s],l,c,fv)}function Yy(e,t,n,r,i,s,l,c){var h=Fm(e,t,n,r,i,s,l,c);return ic(h.x,h.y,l,c)}var Sp=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof L.g!="undefined"?L.g:typeof self!="undefined"?self:{},ma={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Sp,function(){function n(Y,ne,pe,ye,De){r(Y,ne,pe||0,ye||Y.length-1,De||s)}function r(Y,ne,pe,ye,De){for(;ye>pe;){if(ye-pe>600){var Xe=ye-pe+1,Ke=ne-pe+1,mt=Math.log(Xe),Qe=.5*Math.exp(2*mt/3),ut=.5*Math.sqrt(mt*Qe*(Xe-Qe)/Xe)*(Ke-Xe/2<0?-1:1),ct=Math.max(pe,Math.floor(ne-Ke*Qe/Xe+ut)),gt=Math.min(ye,Math.floor(ne+(Xe-Ke)*Qe/Xe+ut));r(Y,ne,ct,gt,De)}var Xt=Y[ne],Rt=pe,kt=ye;for(i(Y,pe,ne),De(Y[ye],Xt)>0&&i(Y,pe,ye);Rt<kt;){for(i(Y,Rt,kt),Rt++,kt--;De(Y[Rt],Xt)<0;)Rt++;for(;De(Y[kt],Xt)>0;)kt--}De(Y[pe],Xt)===0?i(Y,pe,kt):(kt++,i(Y,kt,ye)),kt<=ne&&(pe=kt+1),ne<=kt&&(ye=kt-1)}}function i(Y,ne,pe){var ye=Y[ne];Y[ne]=Y[pe],Y[pe]=ye}function s(Y,ne){return Y<ne?-1:Y>ne?1:0}var l=function(ne){ne===void 0&&(ne=9),this._maxEntries=Math.max(4,ne),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};l.prototype.all=function(){return this._all(this.data,[])},l.prototype.search=function(ne){var pe=this.data,ye=[];if(!z(ne,pe))return ye;for(var De=this.toBBox,Xe=[];pe;){for(var Ke=0;Ke<pe.children.length;Ke++){var mt=pe.children[Ke],Qe=pe.leaf?De(mt):mt;z(ne,Qe)&&(pe.leaf?ye.push(mt):N(ne,Qe)?this._all(mt,ye):Xe.push(mt))}pe=Xe.pop()}return ye},l.prototype.collides=function(ne){var pe=this.data;if(!z(ne,pe))return!1;for(var ye=[];pe;){for(var De=0;De<pe.children.length;De++){var Xe=pe.children[De],Ke=pe.leaf?this.toBBox(Xe):Xe;if(z(ne,Ke)){if(pe.leaf||N(ne,Ke))return!0;ye.push(Xe)}}pe=ye.pop()}return!1},l.prototype.load=function(ne){if(!(ne&&ne.length))return this;if(ne.length<this._minEntries){for(var pe=0;pe<ne.length;pe++)this.insert(ne[pe]);return this}var ye=this._build(ne.slice(),0,ne.length-1,0);if(!this.data.children.length)this.data=ye;else if(this.data.height===ye.height)this._splitRoot(this.data,ye);else{if(this.data.height<ye.height){var De=this.data;this.data=ye,ye=De}this._insert(ye,this.data.height-ye.height-1,!0)}return this},l.prototype.insert=function(ne){return ne&&this._insert(ne,this.data.height-1),this},l.prototype.clear=function(){return this.data=H([]),this},l.prototype.remove=function(ne,pe){if(!ne)return this;for(var ye=this.data,De=this.toBBox(ne),Xe=[],Ke=[],mt,Qe,ut;ye||Xe.length;){if(ye||(ye=Xe.pop(),Qe=Xe[Xe.length-1],mt=Ke.pop(),ut=!0),ye.leaf){var ct=c(ne,ye.children,pe);if(ct!==-1)return ye.children.splice(ct,1),Xe.push(ye),this._condense(Xe),this}!ut&&!ye.leaf&&N(ye,De)?(Xe.push(ye),Ke.push(mt),mt=0,Qe=ye,ye=ye.children[0]):Qe?(mt++,ye=Qe.children[mt],ut=!1):ye=null}return this},l.prototype.toBBox=function(ne){return ne},l.prototype.compareMinX=function(ne,pe){return ne.minX-pe.minX},l.prototype.compareMinY=function(ne,pe){return ne.minY-pe.minY},l.prototype.toJSON=function(){return this.data},l.prototype.fromJSON=function(ne){return this.data=ne,this},l.prototype._all=function(ne,pe){for(var ye=[];ne;)ne.leaf?pe.push.apply(pe,ne.children):ye.push.apply(ye,ne.children),ne=ye.pop();return pe},l.prototype._build=function(ne,pe,ye,De){var Xe=ye-pe+1,Ke=this._maxEntries,mt;if(Xe<=Ke)return mt=H(ne.slice(pe,ye+1)),h(mt,this.toBBox),mt;De||(De=Math.ceil(Math.log(Xe)/Math.log(Ke)),Ke=Math.ceil(Xe/Math.pow(Ke,De-1))),mt=H([]),mt.leaf=!1,mt.height=De;var Qe=Math.ceil(Xe/Ke),ut=Qe*Math.ceil(Math.sqrt(Ke));X(ne,pe,ye,ut,this.compareMinX);for(var ct=pe;ct<=ye;ct+=ut){var gt=Math.min(ct+ut-1,ye);X(ne,ct,gt,Qe,this.compareMinY);for(var Xt=ct;Xt<=gt;Xt+=Qe){var Rt=Math.min(Xt+Qe-1,gt);mt.children.push(this._build(ne,Xt,Rt,De-1))}}return h(mt,this.toBBox),mt},l.prototype._chooseSubtree=function(ne,pe,ye,De){for(;De.push(pe),!(pe.leaf||De.length-1===ye);){for(var Xe=1/0,Ke=1/0,mt=void 0,Qe=0;Qe<pe.children.length;Qe++){var ut=pe.children[Qe],ct=T(ut),gt=R(ne,ut)-ct;gt<Ke?(Ke=gt,Xe=ct<Xe?ct:Xe,mt=ut):gt===Ke&&ct<Xe&&(Xe=ct,mt=ut)}pe=mt||pe.children[0]}return pe},l.prototype._insert=function(ne,pe,ye){var De=ye?ne:this.toBBox(ne),Xe=[],Ke=this._chooseSubtree(De,this.data,pe,Xe);for(Ke.children.push(ne),v(Ke,De);pe>=0&&Xe[pe].children.length>this._maxEntries;)this._split(Xe,pe),pe--;this._adjustParentBBoxes(De,Xe,pe)},l.prototype._split=function(ne,pe){var ye=ne[pe],De=ye.children.length,Xe=this._minEntries;this._chooseSplitAxis(ye,Xe,De);var Ke=this._chooseSplitIndex(ye,Xe,De),mt=H(ye.children.splice(Ke,ye.children.length-Ke));mt.height=ye.height,mt.leaf=ye.leaf,h(ye,this.toBBox),h(mt,this.toBBox),pe?ne[pe-1].children.push(mt):this._splitRoot(ye,mt)},l.prototype._splitRoot=function(ne,pe){this.data=H([ne,pe]),this.data.height=ne.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},l.prototype._chooseSplitIndex=function(ne,pe,ye){for(var De,Xe=1/0,Ke=1/0,mt=pe;mt<=ye-pe;mt++){var Qe=p(ne,0,mt,this.toBBox),ut=p(ne,mt,ye,this.toBBox),ct=I(Qe,ut),gt=T(Qe)+T(ut);ct<Xe?(Xe=ct,De=mt,Ke=gt<Ke?gt:Ke):ct===Xe&&gt<Ke&&(Ke=gt,De=mt)}return De||ye-pe},l.prototype._chooseSplitAxis=function(ne,pe,ye){var De=ne.leaf?this.compareMinX:y,Xe=ne.leaf?this.compareMinY:b,Ke=this._allDistMargin(ne,pe,ye,De),mt=this._allDistMargin(ne,pe,ye,Xe);Ke<mt&&ne.children.sort(De)},l.prototype._allDistMargin=function(ne,pe,ye,De){ne.children.sort(De);for(var Xe=this.toBBox,Ke=p(ne,0,pe,Xe),mt=p(ne,ye-pe,ye,Xe),Qe=M(Ke)+M(mt),ut=pe;ut<ye-pe;ut++){var ct=ne.children[ut];v(Ke,ne.leaf?Xe(ct):ct),Qe+=M(Ke)}for(var gt=ye-pe-1;gt>=pe;gt--){var Xt=ne.children[gt];v(mt,ne.leaf?Xe(Xt):Xt),Qe+=M(mt)}return Qe},l.prototype._adjustParentBBoxes=function(ne,pe,ye){for(var De=ye;De>=0;De--)v(pe[De],ne)},l.prototype._condense=function(ne){for(var pe=ne.length-1,ye=void 0;pe>=0;pe--)ne[pe].children.length===0?pe>0?(ye=ne[pe-1].children,ye.splice(ye.indexOf(ne[pe]),1)):this.clear():h(ne[pe],this.toBBox)};function c(Y,ne,pe){if(!pe)return ne.indexOf(Y);for(var ye=0;ye<ne.length;ye++)if(pe(Y,ne[ye]))return ye;return-1}function h(Y,ne){p(Y,0,Y.children.length,ne,Y)}function p(Y,ne,pe,ye,De){De||(De=H(null)),De.minX=1/0,De.minY=1/0,De.maxX=-1/0,De.maxY=-1/0;for(var Xe=ne;Xe<pe;Xe++){var Ke=Y.children[Xe];v(De,Y.leaf?ye(Ke):Ke)}return De}function v(Y,ne){return Y.minX=Math.min(Y.minX,ne.minX),Y.minY=Math.min(Y.minY,ne.minY),Y.maxX=Math.max(Y.maxX,ne.maxX),Y.maxY=Math.max(Y.maxY,ne.maxY),Y}function y(Y,ne){return Y.minX-ne.minX}function b(Y,ne){return Y.minY-ne.minY}function T(Y){return(Y.maxX-Y.minX)*(Y.maxY-Y.minY)}function M(Y){return Y.maxX-Y.minX+(Y.maxY-Y.minY)}function R(Y,ne){return(Math.max(ne.maxX,Y.maxX)-Math.min(ne.minX,Y.minX))*(Math.max(ne.maxY,Y.maxY)-Math.min(ne.minY,Y.minY))}function I(Y,ne){var pe=Math.max(Y.minX,ne.minX),ye=Math.max(Y.minY,ne.minY),De=Math.min(Y.maxX,ne.maxX),Xe=Math.min(Y.maxY,ne.maxY);return Math.max(0,De-pe)*Math.max(0,Xe-ye)}function N(Y,ne){return Y.minX<=ne.minX&&Y.minY<=ne.minY&&ne.maxX<=Y.maxX&&ne.maxY<=Y.maxY}function z(Y,ne){return ne.minX<=Y.maxX&&ne.minY<=Y.maxY&&ne.maxX>=Y.minX&&ne.maxY>=Y.minY}function H(Y){return{children:Y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function X(Y,ne,pe,ye,De){for(var Xe=[ne,pe];Xe.length;)if(pe=Xe.pop(),ne=Xe.pop(),!(pe-ne<=ye)){var Ke=ne+Math.ceil((pe-ne)/ye/2)*ye;n(Y,Ke,ne,pe,De),Xe.push(ne,Ke,Ke,pe)}}return l})})(ma);var _1=ma.exports,ni;(function(e){e.GROUP="g",e.CIRCLE="circle",e.ELLIPSE="ellipse",e.IMAGE="image",e.RECT="rect",e.LINE="line",e.POLYLINE="polyline",e.POLYGON="polygon",e.TEXT="text",e.PATH="path",e.HTML="html",e.MESH="mesh"})(ni||(ni={}));var Df;(function(e){e[e.ZERO=0]="ZERO",e[e.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(Df||(Df={}));var Oh=function(){function e(){this.plugins=[]}return e.prototype.addRenderingPlugin=function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)},e.prototype.removeAllRenderingPlugins=function(){var t=this;this.plugins.forEach(function(n){var r=t.context.renderingPlugins.indexOf(n);r>=0&&t.context.renderingPlugins.splice(r,1)})},e}(),Xv=function(){function e(t){this.clipSpaceNearZ=Df.NEGATIVE_ONE,this.plugins=[],this.config=(0,ae.pi)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},t)}return e.prototype.registerPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n===-1&&this.plugins.push(t)},e.prototype.unregisterPlugin=function(t){var n=this.plugins.findIndex(function(r){return r===t});n>-1&&this.plugins.splice(n,1)},e.prototype.getPlugins=function(){return this.plugins},e.prototype.getPlugin=function(t){return this.plugins.find(function(n){return n.name===t})},e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(t){Object.assign(this.config,t)},e}();function jd(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Dg(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Bm(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function $y(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function b1(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function qy(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function e0(e){return e===void 0?0:e>360||e<-360?e%360:e}function Ru(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),Array.isArray(e)&&e.length===3?cr.d9(e):(0,yu.Z)(e)?cr.al(e,t,n):cr.al(e[0],e[1]||t,e[2]||n)}function yl(e){return e*(Math.PI/180)}function ch(e){return e*(180/Math.PI)}function x1(e){return e=e%400,e<0&&(e+=400),e/400*360}function Ky(e){return e/360}function Lg(e){return 360*e}function Qy(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],l=n*n,c=r*r,h=i*i,p=s*s,v=l+c+h+p,y=n*s-r*i;return y>.499995*v?(e[0]=Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):y<-.499995*v?(e[0]=-Math.PI/2,e[1]=2*Math.atan2(r,n),e[2]=0):(e[0]=Math.asin(2*(n*i-s*r)),e[1]=Math.atan2(2*(n*s+r*i),1-2*(h+p)),e[2]=Math.atan2(2*(n*r+i*s),1-2*(c+h))),e}function Xc(e,t){var n,r,i=Math.PI*.5,s=(0,ae.CR)(ti.getScaling(cr.Ue(),t),3),l=s[0],c=s[1],h=s[2],p=Math.asin(-t[2]/l);return p<i?p>-i?(n=Math.atan2(t[6]/c,t[10]/h),r=Math.atan2(t[1]/l,t[0]/l)):(r=0,n=-Math.atan2(t[4]/c,t[5]/c)):(r=0,n=Math.atan2(t[4]/c,t[5]/c)),e[0]=n,e[1]=p,e[2]=r,e}function km(e,t){return t.length===16?Xc(e,t):Qy(e,t)}function E1(e,t,n,r,i){var s=Math.cos(e),l=Math.sin(e);return Xa(r*s,i*l,0,-r*l,i*s,0,t,n,1)}function Yv(e,t,n,r,i,s,l,c){c===void 0&&(c=!1);var h=2*s/(n-t),p=2*s/(r-i),v=(n+t)/(n-t),y=(r+i)/(r-i),b,T;return c?(b=-l/(l-s),T=-l*s/(l-s)):(b=-(l+s)/(l-s),T=-2*l*s/(l-s)),e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=v,e[9]=y,e[10]=b,e[11]=-1,e[12]=0,e[13]=0,e[14]=T,e[15]=0,e}function P0(e){var t=e[0],n=e[1],r=e[3],i=e[4],s=Math.sqrt(t*t+n*n),l=Math.sqrt(r*r+i*i),c=t*i-n*r;c<0&&(t<i?s=-s:l=-l),s&&(t*=1/s,n*=1/s),l&&(r*=1/l,i*=1/l);var h=Math.atan2(n,t),p=ch(h);return[e[6],e[7],s,l,p]}var Mh=ti.create(),sd=ti.create(),$v=Zi.Ue(),Ia=[cr.Ue(),cr.Ue(),cr.Ue()],Jy=cr.Ue();function e_(e,t,n,r,i,s){if(!Ul(Mh,e)||(ti.copy(sd,Mh),sd[3]=0,sd[7]=0,sd[11]=0,sd[15]=1,Math.abs(ti.determinant(sd))<1e-8))return!1;var l=Mh[3],c=Mh[7],h=Mh[11],p=Mh[12],v=Mh[13],y=Mh[14],b=Mh[15];if(l!==0||c!==0||h!==0){$v[0]=l,$v[1]=c,$v[2]=h,$v[3]=b;var T=ti.invert(sd,sd);if(!T)return!1;ti.transpose(sd,sd),Zi.fF(i,$v,sd)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=p,t[1]=v,t[2]=y,lx(Ia,Mh),n[0]=cr.kE(Ia[0]),cr.Fv(Ia[0],Ia[0]),r[0]=cr.AK(Ia[0],Ia[1]),wp(Ia[1],Ia[1],Ia[0],1,-r[0]),n[1]=cr.kE(Ia[1]),cr.Fv(Ia[1],Ia[1]),r[0]/=n[1],r[1]=cr.AK(Ia[0],Ia[2]),wp(Ia[2],Ia[2],Ia[0],1,-r[1]),r[2]=cr.AK(Ia[1],Ia[2]),wp(Ia[2],Ia[2],Ia[1],1,-r[2]),n[2]=cr.kE(Ia[2]),cr.Fv(Ia[2],Ia[2]),r[1]/=n[2],r[2]/=n[2],cr.kC(Jy,Ia[1],Ia[2]),cr.AK(Ia[0],Jy)<0)for(var M=0;M<3;M++)n[M]*=-1,Ia[M][0]*=-1,Ia[M][1]*=-1,Ia[M][2]*=-1;return s[0]=.5*Math.sqrt(Math.max(1+Ia[0][0]-Ia[1][1]-Ia[2][2],0)),s[1]=.5*Math.sqrt(Math.max(1-Ia[0][0]+Ia[1][1]-Ia[2][2],0)),s[2]=.5*Math.sqrt(Math.max(1-Ia[0][0]-Ia[1][1]+Ia[2][2],0)),s[3]=.5*Math.sqrt(Math.max(1+Ia[0][0]+Ia[1][1]+Ia[2][2],0)),Ia[2][1]>Ia[1][2]&&(s[0]=-s[0]),Ia[0][2]>Ia[2][0]&&(s[1]=-s[1]),Ia[1][0]>Ia[0][1]&&(s[2]=-s[2]),!0}function Ul(e,t){var n=t[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0}function lx(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function wp(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}var Pu=function(){function e(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return e.isEmpty=function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0},e.prototype.update=function(t,n){jd(this.center,t),jd(this.halfExtents,n),Dg(this.min,this.center,this.halfExtents),Bm(this.max,this.center,this.halfExtents)},e.prototype.setMinMax=function(t,n){Bm(this.center,n,t),$y(this.center,this.center,.5),Dg(this.halfExtents,n,t),$y(this.halfExtents,this.halfExtents,.5),jd(this.min,t),jd(this.max,n)},e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.add=function(t){if(!e.isEmpty(t)){if(e.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var n=this.center,r=n[0],i=n[1],s=n[2],l=this.halfExtents,c=l[0],h=l[1],p=l[2],v=r-c,y=r+c,b=i-h,T=i+h,M=s-p,R=s+p,I=t.center,N=I[0],z=I[1],H=I[2],X=t.halfExtents,Y=X[0],ne=X[1],pe=X[2],ye=N-Y,De=N+Y,Xe=z-ne,Ke=z+ne,mt=H-pe,Qe=H+pe;ye<v&&(v=ye),De>y&&(y=De),Xe<b&&(b=Xe),Ke>T&&(T=Ke),mt<M&&(M=mt),Qe>R&&(R=Qe),n[0]=(v+y)*.5,n[1]=(b+T)*.5,n[2]=(M+R)*.5,l[0]=(y-v)*.5,l[1]=(T-b)*.5,l[2]=(R-M)*.5,this.min[0]=v,this.min[1]=b,this.min[2]=M,this.max[0]=y,this.max[1]=T,this.max[2]=R}},e.prototype.setFromTransformedAABB=function(t,n){var r=this.center,i=this.halfExtents,s=t.center,l=t.halfExtents,c=n[0],h=n[4],p=n[8],v=n[1],y=n[5],b=n[9],T=n[2],M=n[6],R=n[10],I=Math.abs(c),N=Math.abs(h),z=Math.abs(p),H=Math.abs(v),X=Math.abs(y),Y=Math.abs(b),ne=Math.abs(T),pe=Math.abs(M),ye=Math.abs(R);r[0]=n[12]+c*s[0]+h*s[1]+p*s[2],r[1]=n[13]+v*s[0]+y*s[1]+b*s[2],r[2]=n[14]+T*s[0]+M*s[1]+R*s[2],i[0]=I*l[0]+N*l[1]+z*l[2],i[1]=H*l[0]+X*l[1]+Y*l[2],i[2]=ne*l[0]+pe*l[1]+ye*l[2],Dg(this.min,r,i),Bm(this.max,r,i)},e.prototype.intersects=function(t){var n=this.getMax(),r=this.getMin(),i=t.getMax(),s=t.getMin();return r[0]<=i[0]&&n[0]>=s[0]&&r[1]<=i[1]&&n[1]>=s[1]&&r[2]<=i[2]&&n[2]>=s[2]},e.prototype.intersection=function(t){if(!this.intersects(t))return null;var n=new e,r=b1([0,0,0],this.getMin(),t.getMin()),i=qy([0,0,0],this.getMax(),t.getMax());return n.setMinMax(r,i),n},e.prototype.getNegativeFarPoint=function(t){return t.pnVertexFlag===273?jd([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},e.prototype.getPositiveFarPoint=function(t){return t.pnVertexFlag===273?jd([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},e}(),JE=function(){function e(t,n){this.distance=t||0,this.normal=n||cr.al(0,1,0),this.updatePNVertexFlag()}return e.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},e.prototype.distanceToPoint=function(t){return cr.AK(t,this.normal)-this.distance},e.prototype.normalize=function(){var t=1/cr.Zh(this.normal);cr.bA(this.normal,this.normal,t),this.distance*=t},e.prototype.intersectsLine=function(t,n,r){var i=this.distanceToPoint(t),s=this.distanceToPoint(n),l=i/(i-s),c=l>=0&&l<=1;return c&&r&&cr.t7(r,t,n,l),c},e}(),Lf;(function(e){e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE"})(Lf||(Lf={}));var zm=function(){function e(t){if(this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new JE)}return e.prototype.extractFromVPMatrix=function(t){var n=(0,ae.CR)(t,16),r=n[0],i=n[1],s=n[2],l=n[3],c=n[4],h=n[5],p=n[6],v=n[7],y=n[8],b=n[9],T=n[10],M=n[11],R=n[12],I=n[13],N=n[14],z=n[15];cr.t8(this.planes[0].normal,l-r,v-c,M-y),this.planes[0].distance=z-R,cr.t8(this.planes[1].normal,l+r,v+c,M+y),this.planes[1].distance=z+R,cr.t8(this.planes[2].normal,l+i,v+h,M+b),this.planes[2].distance=z+I,cr.t8(this.planes[3].normal,l-i,v-h,M-b),this.planes[3].distance=z-I,cr.t8(this.planes[4].normal,l-s,v-p,M-T),this.planes[4].distance=z-N,cr.t8(this.planes[5].normal,l+s,v+p,M+T),this.planes[5].distance=z+N,this.planes.forEach(function(H){H.normalize(),H.updatePNVertexFlag()})},e}(),mc=function(){function e(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.x=0,this.y=0,this.x=t,this.y=n}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},e}(),Tp=function(){function e(t,n,r,i){this.x=t,this.y=n,this.width=r,this.height=i,this.left=t,this.right=t+r,this.top=n,this.bottom=n+i}return e.prototype.toJSON=function(){},e}(),Co="Method not implemented.",hv="Use document.documentElement instead.",EI="Cannot append a destroyed element.",$a;(function(e){e[e.ORBITING=0]="ORBITING",e[e.EXPLORING=1]="EXPLORING",e[e.TRACKING=2]="TRACKING"})($a||($a={}));var Ap;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROTATIONAL=1]="ROTATIONAL",e[e.TRANSLATIONAL=2]="TRANSLATIONAL",e[e.CINEMATIC=3]="CINEMATIC"})(Ap||(Ap={}));var vf;(function(e){e[e.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",e[e.PERSPECTIVE=1]="PERSPECTIVE"})(vf||(vf={}));var S1={UPDATED:"updated"},dv=2e-4,Um=function(){function e(){this.clipSpaceNearZ=Df.NEGATIVE_ONE,this.eventEmitter=new ml,this.matrix=ti.create(),this.right=cr.al(1,0,0),this.up=cr.al(0,1,0),this.forward=cr.al(0,0,1),this.position=cr.al(0,0,1),this.focalPoint=cr.al(0,0,0),this.distanceVector=cr.al(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=ti.create(),this.projectionMatrixInverse=ti.create(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=$a.EXPLORING,this.trackingMode=Ap.DEFAULT,this.projectionMode=vf.PERSPECTIVE,this.frustum=new zm,this.orthoMatrix=ti.create()}return e.prototype.isOrtho=function(){return this.projectionMode===vf.ORTHOGRAPHIC},e.prototype.getProjectionMode=function(){return this.projectionMode},e.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},e.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},e.prototype.getFrustum=function(){return this.frustum},e.prototype.getPosition=function(){return this.position},e.prototype.getFocalPoint=function(){return this.focalPoint},e.prototype.getDollyingStep=function(){return this.dollyingStep},e.prototype.getNear=function(){return this.near},e.prototype.getFar=function(){return this.far},e.prototype.getZoom=function(){return this.zoom},e.prototype.getOrthoMatrix=function(){return this.orthoMatrix},e.prototype.getView=function(){return this.view},e.prototype.setEnableUpdate=function(t){this.enableUpdate=t},e.prototype.setType=function(t,n){return this.type=t,this.type===$a.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===$a.TRACKING&&n!==void 0&&this.setTrackingMode(n),this},e.prototype.setProjectionMode=function(t){return this.projectionMode=t,this},e.prototype.setTrackingMode=function(t){if(this.type!==$a.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},e.prototype.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},e.prototype.getViewTransform=function(){return ti.invert(ti.create(),this.matrix)},e.prototype.getWorldTransform=function(){return this.matrix},e.prototype.jitterProjectionMatrix=function(t,n){var r=ti.fromTranslation(ti.create(),[t,n,0]);this.jitteredProjectionMatrix=ti.multiply(ti.create(),r,this.projectionMatrix)},e.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},e.prototype.setMatrix=function(t){return this.matrix=t,this._update(),this},e.prototype.setProjectionMatrix=function(t){this.projectionMatrix=t},e.prototype.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},e.prototype.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},e.prototype.setNear=function(t){return this.projectionMode===vf.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},e.prototype.setFar=function(t){return this.projectionMode===vf.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},e.prototype.setViewOffset=function(t,n,r,i,s,l){return this.aspect=t/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=l,this.projectionMode===vf.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===vf.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},e.prototype.setZoom=function(t){return this.zoom=t,this.projectionMode===vf.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===vf.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},e.prototype.setZoomByViewportPoint=function(t,n){var r=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),i=r.x,s=r.y,l=this.roll;this.rotate(0,0,-l),this.setPosition(i,s),this.setFocalPoint(i,s),this.setZoom(t),this.rotate(0,0,l);var c=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),h=c.x,p=c.y,v=cr.al(h-i,p-s,0),y=cr.AK(v,this.right)/cr.kE(this.right),b=cr.AK(v,this.up)/cr.kE(this.up);return this.pan(-y,-b),this},e.prototype.setPerspective=function(t,n,r,i){var s;this.projectionMode=vf.PERSPECTIVE,this.fov=r,this.near=t,this.far=n,this.aspect=i;var l=this.near*Math.tan(yl(.5*this.fov))/this.zoom,c=2*l,h=this.aspect*c,p=-.5*h;if(!((s=this.view)===null||s===void 0)&&s.enabled){var v=this.view.fullWidth,y=this.view.fullHeight;p+=this.view.offsetX*h/v,l-=this.view.offsetY*c/y,h*=this.view.width/v,c*=this.view.height/y}return Yv(this.projectionMatrix,p,p+h,l,l-c,t,this.far,this.clipSpaceNearZ===Df.ZERO),ti.scale(this.projectionMatrix,this.projectionMatrix,cr.al(1,-1,1)),ti.invert(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},e.prototype.setOrthographic=function(t,n,r,i,s,l){var c;this.projectionMode=vf.ORTHOGRAPHIC,this.rright=n,this.left=t,this.top=r,this.bottom=i,this.near=s,this.far=l;var h=(this.rright-this.left)/(2*this.zoom),p=(this.top-this.bottom)/(2*this.zoom),v=(this.rright+this.left)/2,y=(this.top+this.bottom)/2,b=v-h,T=v+h,M=y+p,R=y-p;if(!((c=this.view)===null||c===void 0)&&c.enabled){var I=(this.rright-this.left)/this.view.fullWidth/this.zoom,N=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=I*this.view.offsetX,T=b+I*this.view.width,M-=N*this.view.offsetY,R=M-N*this.view.height}return this.clipSpaceNearZ===Df.NEGATIVE_ONE?ti.ortho(this.projectionMatrix,b,T,R,M,s,l):ti.orthoZO(this.projectionMatrix,b,T,R,M,s,l),ti.scale(this.projectionMatrix,this.projectionMatrix,cr.al(1,-1,1)),ti.invert(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},e.prototype.setPosition=function(t,n,r){n===void 0&&(n=this.position[1]),r===void 0&&(r=this.position[2]);var i=Ru(t,n,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},e.prototype.setFocalPoint=function(t,n,r){n===void 0&&(n=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=cr.al(0,1,0);if(this.focalPoint=Ru(t,n,r),this.trackingMode===Ap.CINEMATIC){var s=cr.$X(cr.Ue(),this.focalPoint,this.position);t=s[0],n=s[1],r=s[2];var l=cr.kE(s),c=ch(Math.asin(n/l)),h=90+ch(Math.atan2(r,t)),p=ti.create();ti.rotateY(p,p,yl(h)),ti.rotateX(p,p,yl(c)),i=cr.fF(cr.Ue(),[0,1,0],p)}return ti.invert(this.matrix,ti.lookAt(ti.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},e.prototype.getDistance=function(){return this.distance},e.prototype.getDistanceVector=function(){return this.distanceVector},e.prototype.setDistance=function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<dv&&(this.distance=dv),this.dollyingStep=this.distance/100;var n=cr.Ue();t=this.distance;var r=this.forward,i=this.focalPoint;return n[0]=t*r[0]+i[0],n[1]=t*r[1]+i[1],n[2]=t*r[2]+i[2],this._setPosition(n),this.triggerUpdate(),this},e.prototype.setMaxDistance=function(t){return this.maxDistance=t,this},e.prototype.setMinDistance=function(t){return this.minDistance=t,this},e.prototype.setAzimuth=function(t){return this.azimuth=e0(t),this.computeMatrix(),this._getAxes(),this.type===$a.ORBITING||this.type===$a.EXPLORING?this._getPosition():this.type===$a.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getAzimuth=function(){return this.azimuth},e.prototype.setElevation=function(t){return this.elevation=e0(t),this.computeMatrix(),this._getAxes(),this.type===$a.ORBITING||this.type===$a.EXPLORING?this._getPosition():this.type===$a.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getElevation=function(){return this.elevation},e.prototype.setRoll=function(t){return this.roll=e0(t),this.computeMatrix(),this._getAxes(),this.type===$a.ORBITING||this.type===$a.EXPLORING?this._getPosition():this.type===$a.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},e.prototype.getRoll=function(){return this.roll},e.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},e.prototype.computeMatrix=function(){var t=na(to(),[0,0,1],yl(this.roll));ti.identity(this.matrix);var n=na(to(),[1,0,0],yl((this.rotateWorld&&this.type!==$a.TRACKING||this.type===$a.TRACKING?1:-1)*this.elevation)),r=na(to(),[0,1,0],yl((this.rotateWorld&&this.type!==$a.TRACKING||this.type===$a.TRACKING?1:-1)*this.azimuth)),i=Oc(to(),r,n);i=Oc(to(),i,t);var s=ti.fromQuat(ti.create(),i);this.type===$a.ORBITING||this.type===$a.EXPLORING?(ti.translate(this.matrix,this.matrix,this.focalPoint),ti.multiply(this.matrix,this.matrix,s),ti.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===$a.TRACKING&&(ti.translate(this.matrix,this.matrix,this.position),ti.multiply(this.matrix,this.matrix,s))},e.prototype._setPosition=function(t,n,r){this.position=Ru(t,n,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},e.prototype._getAxes=function(){cr.JG(this.right,Ru(Zi.fF(Zi.Ue(),[1,0,0,0],this.matrix))),cr.JG(this.up,Ru(Zi.fF(Zi.Ue(),[0,1,0,0],this.matrix))),cr.JG(this.forward,Ru(Zi.fF(Zi.Ue(),[0,0,1,0],this.matrix))),cr.Fv(this.right,this.right),cr.Fv(this.up,this.up),cr.Fv(this.forward,this.forward)},e.prototype._getAngles=function(){var t=this.distanceVector[0],n=this.distanceVector[1],r=this.distanceVector[2],i=cr.kE(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===$a.TRACKING?(this.elevation=ch(Math.asin(n/i)),this.azimuth=ch(Math.atan2(-t,-r))):this.rotateWorld?(this.elevation=ch(Math.asin(n/i)),this.azimuth=ch(Math.atan2(-t,-r))):(this.elevation=-ch(Math.asin(n/i)),this.azimuth=-ch(Math.atan2(-t,-r)))},e.prototype._getPosition=function(){cr.JG(this.position,Ru(Zi.fF(Zi.Ue(),[0,0,0,1],this.matrix))),this._getDistance()},e.prototype._getFocalPoint=function(){cr.kK(this.distanceVector,[0,0,-this.distance],tc(Ma(),this.matrix)),cr.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()},e.prototype._getDistance=function(){this.distanceVector=cr.$X(cr.Ue(),this.focalPoint,this.position),this.distance=cr.kE(this.distanceVector),this.dollyingStep=this.distance/100},e.prototype._getOrthoMatrix=function(){if(this.projectionMode===vf.ORTHOGRAPHIC){var t=this.position,n=na(to(),[0,0,1],-this.roll*Math.PI/180);ti.fromRotationTranslationScaleOrigin(this.orthoMatrix,n,cr.al((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),cr.al(this.zoom,this.zoom,1),t)}},e.prototype.triggerUpdate=function(){if(this.enableUpdate){var t=this.getViewTransform(),n=ti.multiply(ti.create(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(S1.UPDATED)}},e.prototype.rotate=function(t,n,r){throw new Error(Co)},e.prototype.pan=function(t,n){throw new Error(Co)},e.prototype.dolly=function(t){throw new Error(Co)},e.prototype.createLandmark=function(t,n){throw new Error(Co)},e.prototype.gotoLandmark=function(t,n){throw new Error(Co)},e.prototype.cancelLandmarkAnimation=function(){throw new Error(Co)},e}();function mf(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=t?t.apply(this,r):r[0],l=n.cache;if(l.has(s))return l.get(s);var c=e.apply(this,r);return n.cache=l.set(s,c)||l,c};return n.cache=new(mf.Cache||Map),n}mf.Cache=Map;var So;(function(e){e[e.kUnknown=0]="kUnknown",e[e.kNumber=1]="kNumber",e[e.kPercentage=2]="kPercentage",e[e.kEms=3]="kEms",e[e.kPixels=4]="kPixels",e[e.kRems=5]="kRems",e[e.kDegrees=6]="kDegrees",e[e.kRadians=7]="kRadians",e[e.kGradians=8]="kGradians",e[e.kTurns=9]="kTurns",e[e.kMilliseconds=10]="kMilliseconds",e[e.kSeconds=11]="kSeconds",e[e.kInteger=12]="kInteger"})(So||(So={}));var Vd;(function(e){e[e.kUNumber=0]="kUNumber",e[e.kUPercent=1]="kUPercent",e[e.kULength=2]="kULength",e[e.kUAngle=3]="kUAngle",e[e.kUTime=4]="kUTime",e[e.kUOther=5]="kUOther"})(Vd||(Vd={}));var Ql;(function(e){e[e.kAll=0]="kAll",e[e.kNonNegative=1]="kNonNegative",e[e.kInteger=2]="kInteger",e[e.kNonNegativeInteger=3]="kNonNegativeInteger",e[e.kPositiveInteger=4]="kPositiveInteger"})(Ql||(Ql={}));var eS;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(eS||(eS={}));var tS;(function(e){e[e.kYes=0]="kYes",e[e.kNo=1]="kNo"})(tS||(tS={}));var nS=[{name:"em",unit_type:So.kEms},{name:"px",unit_type:So.kPixels},{name:"deg",unit_type:So.kDegrees},{name:"rad",unit_type:So.kRadians},{name:"grad",unit_type:So.kGradians},{name:"ms",unit_type:So.kMilliseconds},{name:"s",unit_type:So.kSeconds},{name:"rem",unit_type:So.kRems},{name:"turn",unit_type:So.kTurns}],qv;(function(e){e[e.kUnknownType=0]="kUnknownType",e[e.kUnparsedType=1]="kUnparsedType",e[e.kKeywordType=2]="kKeywordType",e[e.kUnitType=3]="kUnitType",e[e.kSumType=4]="kSumType",e[e.kProductType=5]="kProductType",e[e.kNegateType=6]="kNegateType",e[e.kInvertType=7]="kInvertType",e[e.kMinType=8]="kMinType",e[e.kMaxType=9]="kMaxType",e[e.kClampType=10]="kClampType",e[e.kTransformType=11]="kTransformType",e[e.kPositionType=12]="kPositionType",e[e.kURLImageType=13]="kURLImageType",e[e.kColorType=14]="kColorType",e[e.kUnsupportedColorType=15]="kUnsupportedColorType"})(qv||(qv={}));var t_=function(e){return nS.find(function(t){return t.name===e}).unit_type},n_=function(e){return e?e==="number"?So.kNumber:e==="percent"||e==="%"?So.kPercentage:t_(e):So.kUnknown},r_=function(e){switch(e){case So.kNumber:case So.kInteger:return Vd.kUNumber;case So.kPercentage:return Vd.kUPercent;case So.kPixels:return Vd.kULength;case So.kMilliseconds:case So.kSeconds:return Vd.kUTime;case So.kDegrees:case So.kRadians:case So.kGradians:case So.kTurns:return Vd.kUAngle;default:return Vd.kUOther}},ux=function(e){switch(e){case Vd.kUNumber:return So.kNumber;case Vd.kULength:return So.kPixels;case Vd.kUPercent:return So.kPercentage;case Vd.kUTime:return So.kSeconds;case Vd.kUAngle:return So.kDegrees;default:return So.kUnknown}},cx=function(e){var t=1;switch(e){case So.kPixels:case So.kDegrees:case So.kSeconds:break;case So.kMilliseconds:t=.001;break;case So.kRadians:t=180/Math.PI;break;case So.kGradians:t=.9;break;case So.kTurns:t=360;break}return t},w1=function(e){switch(e){case So.kNumber:case So.kInteger:return"";case So.kPercentage:return"%";case So.kEms:return"em";case So.kRems:return"rem";case So.kPixels:return"px";case So.kDegrees:return"deg";case So.kRadians:return"rad";case So.kGradians:return"grad";case So.kMilliseconds:return"ms";case So.kSeconds:return"s";case So.kTurns:return"turn"}return""},i_=function(){function e(){}return e.isAngle=function(t){return t===So.kDegrees||t===So.kRadians||t===So.kGradians||t===So.kTurns},e.isLength=function(t){return t>=So.kEms&&t<So.kDegrees},e.isRelativeUnit=function(t){return t===So.kPercentage||t===So.kEms||t===So.kRems},e.isTime=function(t){return t===So.kSeconds||t===So.kMilliseconds},e.prototype.toString=function(){return this.buildCSSText(eS.kNo,tS.kNo,"")},e.prototype.isNumericValue=function(){return this.getType()>=qv.kUnitType&&this.getType()<=qv.kClampType},e}(),rS=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.colorSpace=n,r}return t.prototype.getType=function(){return qv.kColorType},t.prototype.to=function(n){return this},t}(i_),Cp;(function(e){e[e.Constant=0]="Constant",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient"})(Cp||(Cp={}));var jm=function(e){(0,ae.ZT)(t,e);function t(n,r){var i=e.call(this)||this;return i.type=n,i.value=r,i}return t.prototype.clone=function(){return new t(this.type,this.value)},t.prototype.buildCSSText=function(n,r,i){return i},t.prototype.getType=function(){return qv.kColorType},t}(i_),Yc=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.value=n,r}return t.prototype.clone=function(){return new t(this.value)},t.prototype.getType=function(){return qv.kKeywordType},t.prototype.buildCSSText=function(n,r,i){return i+this.value},t}(i_),iS=mf(function(e){return e===void 0&&(e=""),e.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}),fx=function(e){return e.split("").map(function(t,n){return t.toUpperCase()===t?"".concat(n!==0?"-":"").concat(t.toLowerCase()):t}).join("")};function iC(e){if(!e)throw new Error}function Kv(e){return typeof e=="function"}function SI(e){return typeof e=="symbol"}var wI=function(e){return Object.fromEntries(Object.entries(e).filter(function(t){var n=__read(t,2),r=n[1];return r!==void 0}))},TI={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},T1=mf(function(e){var t=iS(e),n=TI[t];return t=(n==null?void 0:n.alias)||t,t}),Ng=function(e,t){t===void 0&&(t="");var n="";return Number.isFinite(e)?(iC(Number.isNaN(e)),n="NaN"):e>0?n="infinity":n="-infinity",n+=t},hx=function(e){return ux(r_(e))},jl=function(e){(0,ae.ZT)(t,e);function t(n,r){r===void 0&&(r=So.kNumber);var i=e.call(this)||this,s;return typeof r=="string"?s=n_(r):s=r,i.unit=s,i.value=n,i}return t.prototype.clone=function(){return new t(this.value,this.unit)},t.prototype.equals=function(n){var r=n;return this.value===r.value&&this.unit===r.unit},t.prototype.getType=function(){return qv.kUnitType},t.prototype.convertTo=function(n){if(this.unit===n)return new t(this.value,this.unit);var r=hx(this.unit);if(r!==hx(n)||r===So.kUnknown)return null;var i=cx(this.unit)/cx(n);return new t(this.value*i,n)},t.prototype.buildCSSText=function(n,r,i){var s;switch(this.unit){case So.kUnknown:break;case So.kInteger:s=Number(this.value).toFixed(0);break;case So.kNumber:case So.kPercentage:case So.kEms:case So.kRems:case So.kPixels:case So.kDegrees:case So.kRadians:case So.kGradians:case So.kMilliseconds:case So.kSeconds:case So.kTurns:{var l=-999999,c=999999,h=this.value,p=w1(this.unit);if(h<l||h>c){var v=w1(this.unit);!Number.isFinite(h)||Number.isNaN(h)?s=Ng(h,v):s=h+(v||"")}else s="".concat(h).concat(p)}}return i+=s,i},t}(i_),Iu=new jl(0,"px");new jl(1,"px");var Op=new jl(0,"deg"),dx=function(e){(0,ae.ZT)(t,e);function t(n,r,i,s,l){s===void 0&&(s=1),l===void 0&&(l=!1);var c=e.call(this,"rgb")||this;return c.r=n,c.g=r,c.b=i,c.alpha=s,c.isNone=l,c}return t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.alpha)},t.prototype.buildCSSText=function(n,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},t}(rS),fu=new Yc("unset"),AI=new Yc("initial"),A1=new Yc("inherit"),o_={"":fu,unset:fu,initial:AI,inherit:A1},oS=function(e){return o_[e]||(o_[e]=new Yc(e)),o_[e]},C1=new dx(0,0,0,0,!0),oC=new dx(0,0,0,0),aC=mf(function(e,t,n,r){return new dx(e,t,n,r)},function(e,t,n,r){return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r,")")}),hu=function(e,t){return t===void 0&&(t=So.kNumber),new jl(e,t)};new jl(50,"%");var px;(function(e){e[e.Standard=0]="Standard"})(px||(px={}));var pv;(function(e){e[e.ADDED=0]="ADDED",e[e.REMOVED=1]="REMOVED",e[e.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(pv||(pv={}));var sC={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Tp(0,0,0,0)},Io;(function(e){e.COORDINATE="<coordinate>",e.COLOR="<color>",e.PAINT="<paint>",e.NUMBER="<number>",e.ANGLE="<angle>",e.OPACITY_VALUE="<opacity-value>",e.SHADOW_BLUR="<shadow-blur>",e.LENGTH="<length>",e.PERCENTAGE="<percentage>",e.LENGTH_PERCENTAGE="<length> | <percentage>",e.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",e.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",e.LIST_OF_POINTS="<list-of-points>",e.PATH="<path>",e.FILTER="<filter>",e.Z_INDEX="<z-index>",e.OFFSET_DISTANCE="<offset-distance>",e.DEFINED_PATH="<defined-path>",e.MARKER="<marker>",e.TRANSFORM="<transform>",e.TRANSFORM_ORIGIN="<transform-origin>",e.TEXT="<text>",e.TEXT_TRANSFORM="<text-transform>"})(Io||(Io={}));function lC(e){var t=e.type,n=e.value;return t==="hex"?"#".concat(n):t==="literal"?n:t==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var uC=function(){var e={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(Xt){throw new Error(t+": "+Xt)}function r(){var Xt=i();return t.length>0&&n("Invalid input not EOF"),Xt}function i(){return H(s)}function s(){return l("linear-gradient",e.linearGradient,h)||l("repeating-linear-gradient",e.repeatingLinearGradient,h)||l("radial-gradient",e.radialGradient,y)||l("repeating-radial-gradient",e.repeatingRadialGradient,y)||l("conic-gradient",e.conicGradient,y)}function l(Xt,Rt,kt){return c(Rt,function(wn){var zn=kt();return zn&&(ct(e.comma)||n("Missing comma before color stops")),{type:Xt,orientation:zn,colorStops:H(X)}})}function c(Xt,Rt){var kt=ct(Xt);if(kt){ct(e.startCall)||n("Missing (");var wn=Rt(kt);return ct(e.endCall)||n("Missing )"),wn}}function h(){return p()||v()}function p(){return ut("directional",e.sideOrCorner,1)}function v(){return ut("angular",e.angleValue,1)}function y(){var Xt,Rt=b(),kt;return Rt&&(Xt=[],Xt.push(Rt),kt=t,ct(e.comma)&&(Rt=b(),Rt?Xt.push(Rt):t=kt)),Xt}function b(){var Xt=T()||M();if(Xt)Xt.at=I();else{var Rt=R();if(Rt){Xt=Rt;var kt=I();kt&&(Xt.at=kt)}else{var wn=N();wn&&(Xt={type:"default-radial",at:wn})}}return Xt}function T(){var Xt=ut("shape",/^(circle)/i,0);return Xt&&(Xt.style=Qe()||R()),Xt}function M(){var Xt=ut("shape",/^(ellipse)/i,0);return Xt&&(Xt.style=Ke()||R()),Xt}function R(){return ut("extent-keyword",e.extentKeywords,1)}function I(){if(ut("position",/^at/,0)){var Xt=N();return Xt||n("Missing positioning value"),Xt}}function N(){var Xt=z();if(Xt.x||Xt.y)return{type:"position",value:Xt}}function z(){return{x:Ke(),y:Ke()}}function H(Xt){var Rt=Xt(),kt=[];if(Rt)for(kt.push(Rt);ct(e.comma);)Rt=Xt(),Rt?kt.push(Rt):n("One extra comma");return kt}function X(){var Xt=Y();return Xt||n("Expected color definition"),Xt.length=Ke(),Xt}function Y(){return pe()||De()||ye()||ne()}function ne(){return ut("literal",e.literalColor,0)}function pe(){return ut("hex",e.hexColor,1)}function ye(){return c(e.rgbColor,function(){return{type:"rgb",value:H(Xe)}})}function De(){return c(e.rgbaColor,function(){return{type:"rgba",value:H(Xe)}})}function Xe(){return ct(e.number)[1]}function Ke(){return ut("%",e.percentageValue,1)||mt()||Qe()}function mt(){return ut("position-keyword",e.positionKeywords,1)}function Qe(){return ut("px",e.pixelValue,1)||ut("em",e.emValue,1)}function ut(Xt,Rt,kt){var wn=ct(Rt);if(wn)return{type:Xt,value:wn[kt]}}function ct(Xt){var Rt=/^[\n\r\t\s]+/.exec(t);Rt&&gt(Rt[0].length);var kt=Xt.exec(t);return kt&&gt(kt[0].length),kt}function gt(Xt){t=t.substring(Xt)}return function(Xt){return t=Xt,r()}}();function cC(e,t,n,r){var i=yl(r.value),s=0,l=0,c=s+t/2,h=l+n/2,p=Math.abs(t*Math.cos(i))+Math.abs(n*Math.sin(i)),v=e[0]+c-Math.cos(i)*p/2,y=e[1]+h-Math.sin(i)*p/2,b=e[0]+c+Math.cos(i)*p/2,T=e[1]+h+Math.sin(i)*p/2;return{x1:v,y1:y,x2:b,y2:T}}function fC(e,t,n,r,i,s){var l=r.value,c=i.value;r.unit===So.kPercentage&&(l=r.value/100*t),i.unit===So.kPercentage&&(c=i.value/100*n);var h=Math.max(Fs([0,0],[l,c]),Fs([0,n],[l,c]),Fs([t,n],[l,c]),Fs([t,0],[l,c]));return s&&(s instanceof jl?h=s.value:s instanceof Yc&&(s.value==="closest-side"?h=Math.min(l,t-l,c,n-c):s.value==="farthest-side"?h=Math.max(l,t-l,c,n-c):s.value==="closest-corner"&&(h=Math.min(Fs([0,0],[l,c]),Fs([0,n],[l,c]),Fs([t,n],[l,c]),Fs([t,0],[l,c]))))),{x:l+e[0],y:c+e[1],r:h}}var hC=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,dC=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,pC=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,vx=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function aS(e){var t,n,r,i=e.length;e[i-1].length=(t=e[i-1].length)!==null&&t!==void 0?t:{type:"%",value:"100"},i>1&&(e[0].length=(n=e[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"});for(var s=0,l=Number(e[0].length.value),c=1;c<i;c++){var h=(r=e[c].length)===null||r===void 0?void 0:r.value;if(!(0,ya.Z)(h)&&!(0,ya.Z)(l)){for(var p=1;p<c-s;p++)e[s+p].length={type:"%",value:"".concat(l+(Number(h)-l)*p/(c-s))};s=c,l=Number(h)}}}var ld={left:270-90,top:0-90,bottom:180-90,right:90-90,"left top":315-90,"top left":315-90,"left bottom":225-90,"bottom left":225-90,"right top":45-90,"top right":45-90,"right bottom":135-90,"bottom right":135-90},vC=mf(function(e){var t;return e.type==="angular"?t=Number(e.value):t=ld[e.value]||0,hu(t,"deg")}),mC=mf(function(e){var t=50,n=50,r="%",i="%";if((e==null?void 0:e.type)==="position"){var s=e.value,l=s.x,c=s.y;(l==null?void 0:l.type)==="position-keyword"&&(l.value==="left"?t=0:l.value==="center"?t=50:l.value==="right"?t=100:l.value==="top"?n=0:l.value==="bottom"&&(n=100)),(c==null?void 0:c.type)==="position-keyword"&&(c.value==="left"?t=0:c.value==="center"?n=50:c.value==="right"?t=100:c.value==="top"?n=0:c.value==="bottom"&&(n=100)),((l==null?void 0:l.type)==="px"||(l==null?void 0:l.type)==="%"||(l==null?void 0:l.type)==="em")&&(r=l==null?void 0:l.type,t=Number(l.value)),((c==null?void 0:c.type)==="px"||(c==null?void 0:c.type)==="%"||(c==null?void 0:c.type)==="em")&&(i=c==null?void 0:c.type,n=Number(c.value))}return{cx:hu(t,r),cy:hu(n,i)}}),gC=mf(function(e){var t;if(e.indexOf("linear")>-1||e.indexOf("radial")>-1){var n=uC(e);return n.map(function(c){var h=c.type,p=c.orientation,v=c.colorStops;aS(v);var y=v.map(function(H){return{offset:hu(Number(H.length.value),"%"),color:lC(H)}});if(h==="linear-gradient")return new jm(Cp.LinearGradient,{angle:p?vC(p):Op,steps:y});if(h==="radial-gradient"&&(p||(p=[{type:"shape",value:"circle"}]),p[0].type==="shape"&&p[0].value==="circle")){var b=mC(p[0].at),T=b.cx,M=b.cy,R=void 0;if(p[0].style){var I=p[0].style,N=I.type,z=I.value;N==="extent-keyword"?R=oS(z):R=hu(z,N)}return new jm(Cp.RadialGradient,{cx:T,cy:M,size:R,steps:y})}})}var r=e[0];if(e[1]==="("||e[2]==="("){if(r==="l"){var i=hC.exec(e);if(i){var s=((t=i[2].match(vx))===null||t===void 0?void 0:t.map(function(c){return c.split(":")}))||[];return[new jm(Cp.LinearGradient,{angle:hu(parseFloat(i[1]),"deg"),steps:s.map(function(c){var h=(0,ae.CR)(c,2),p=h[0],v=h[1];return{offset:hu(Number(p)*100,"%"),color:v}})})]}}else if(r==="r"){var l=yC(e);if(l)if(u(l))e=l;else return[new jm(Cp.RadialGradient,l)]}else if(r==="p")return _C(e)}});function yC(e){var t,n=dC.exec(e);if(n){var r=((t=n[4].match(vx))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:hu(50,"%"),cy:hu(50,"%"),steps:r.map(function(i){var s=(0,ae.CR)(i,2),l=s[0],c=s[1];return{offset:hu(Number(l)*100,"%"),color:c}})}}return null}function _C(e){var t=pC.exec(e);if(t){var n=t[1],r=t[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function CI(e){return!!e.type&&!!e.value}function a_(e){return e&&!!e.image}function s_(e){return e&&!(0,ya.Z)(e.r)&&!(0,ya.Z)(e.g)&&!(0,ya.Z)(e.b)}var vv=mf(function(e){if(a_(e))return(0,ae.pi)({repetition:"repeat"},e);if((0,ya.Z)(e)&&(e=""),e==="transparent")return oC;if(e==="currentColor")e="black";else if(e==="none")return C1;var t=gC(e);if(t)return t;var n=od.ZP(e),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),aC.apply(void 0,(0,ae.ev)([],(0,ae.CR)(r),!1))});function bC(e,t){if(!(!s_(e)||!s_(t)))return[[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round((0,d.Z)(r[i],0,255));return r[3]=(0,d.Z)(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function l_(e,t){if((0,ya.Z)(t))return hu(0,"px");if(t="".concat(t).trim().toLowerCase(),isFinite(Number(t))){if("px".search(e)>=0)return hu(Number(t),"px");if("deg".search(e)>=0)return hu(Number(t),"deg")}var n=[];t=t.replace(e,function(i){return n.push(i),"U"+i});var r="U("+e.source+")";return n.map(function(i){return hu(Number(t.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var mx=function(e){return l_(new RegExp("px","g"),e)},xC=mf(mx),EC=function(e){return l_(new RegExp("%","g"),e)};mf(EC);var u_=function(e){return(0,yu.Z)(e)||isFinite(Number(e))?hu(Number(e)||0,"px"):l_(new RegExp("px|%|em|rem","g"),e)},Fg=mf(u_),gx=function(e){return l_(new RegExp("deg|rad|grad|turn","g"),e)},sS=mf(gx);function SC(e,t,n,r,i){i===void 0&&(i=0);var s="",l=e.value||0,c=t.value||0,h=hx(e.unit),p=e.convertTo(h),v=t.convertTo(h);return p&&v?(l=p.value,c=v.value,s=w1(e.unit)):(jl.isLength(e.unit)||jl.isLength(t.unit))&&(l=Rh(e,i,n),c=Rh(t,i,n),s="px"),[l,c,function(y){return r&&(y=Math.max(y,0)),y+s}]}function Hd(e){var t=0;return e.unit===So.kDegrees?t=e.value:e.unit===So.kRadians?t=ch(Number(e.value)):e.unit===So.kTurns&&(t=Lg(Number(e.value))),t}function yx(e,t){var n;return Array.isArray(e)?n=e.map(function(r){return Number(r)}):u(e)?n=e.split(" ").map(function(r){return Number(r)}):(0,yu.Z)(e)&&(n=[e]),t===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function lS(e){return u(e)?e.split(" ").map(function(t){return Fg(t)}):e.map(function(t){return Fg(t.toString())})}function Rh(e,t,n,r){if(r===void 0&&(r=!1),e.unit===So.kPixels)return Number(e.value);if(e.unit===So.kPercentage&&n){var i=n.nodeName===ni.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[t]:0)+e.value/100*i.halfExtents[t]*2}return 0}var OI=function(e){return l_(/deg|rad|grad|turn|px|%/g,e)},wC=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function uS(e){if(e===void 0&&(e=""),e=e.toLowerCase().trim(),e==="none")return[];for(var t=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];if(i=r.index+r[0].length,wC.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(s){return OI(s)||vv(s)})}),t.lastIndex===e.length)return n}return[]}function _x(e){return e.toString()}var Bg=function(e){return typeof e=="number"?hu(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?hu(Number(e)):hu(0)},Vm=mf(Bg);mf(function(e){return u(e)?e.split(" ").map(Vm):e.map(Vm)});function bx(e,t){return[e,t,_x]}function xx(e,t){return function(n,r){return[n,r,function(i){return _x((0,d.Z)(i,e,t))}]}}function cS(e,t){if(e.length===t.length)return[e,t,function(n){return n}]}function Ex(e){return e.parsedStyle.d.totalLength===0&&(e.parsedStyle.d.totalLength=Ka(e.parsedStyle.d.absolutePath)),e.parsedStyle.d.totalLength}function MI(e){return e.parsedStyle.points.totalLength===0&&(e.parsedStyle.points.totalLength=v1(e.parsedStyle.points.points)),e.parsedStyle.points.totalLength}function TC(e){for(var t=0;t<e.length;t++){var n=e[t-1],r=e[t],i=r[0];if(i==="M"&&n){var s=n[0],l=[r[1],r[2]],c=void 0;s==="L"||s==="M"?c=[n[1],n[2]]:(s==="C"||s==="A"||s==="Q")&&(c=[n[n.length-2],n[n.length-1]]),c&&O1(l,c)&&(e.splice(t,1),t--)}}}function Sx(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r],s=i[0];if(s==="C"||s==="A"||s==="Q"){t=!0;break}}return t}function AC(e){for(var t=[],n=[],r=[],i=0;i<e.length;i++){var s=e[i],l=s[0];l==="M"?(r.length&&(n.push(r),r=[]),r.push([s[1],s[2]])):l==="Z"?r.length&&(t.push(r),r=[]):r.push([s[1],s[2]])}return r.length>0&&n.push(r),{polygons:t,polylines:n}}function O1(e,t){return e[0]===t[0]&&e[1]===t[1]}function fS(e,t){for(var n=[],r=[],i=[],s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,h=l.params,p=l.prePoint,v=void 0;switch(l.command){case"Q":v=y1(p[0],p[1],h[1],h[2],h[3],h[4]);break;case"C":v=jy(p[0],p[1],h[1],h[2],h[3],h[4],h[5],h[6]);break;case"A":var y=l.arcParams;v=Gv(y.cx,y.cy,y.rx,y.ry,y.xRotation,y.startAngle,y.endAngle);break;default:n.push(c[0]),r.push(c[1]);break}v&&(l.box=v,n.push(v.x,v.x+v.width),r.push(v.y,v.y+v.height)),t&&(l.command==="L"||l.command==="M")&&l.prePoint&&l.nextPoint&&i.push(l)}n=n.filter(function(N){return!Number.isNaN(N)&&N!==1/0&&N!==-1/0}),r=r.filter(function(N){return!Number.isNaN(N)&&N!==1/0&&N!==-1/0});var b=is(n),T=is(r),M=Uo(n),R=Uo(r);if(i.length===0)return{x:b,y:T,width:M-b,height:R-T};for(var s=0;s<i.length;s++){var l=i[s],c=l.currentPoint,I=void 0;c[0]===b?(I=M1(l,t),b=b-I.xExtra):c[0]===M&&(I=M1(l,t),M=M+I.xExtra),c[1]===T?(I=M1(l,t),T=T-I.yExtra):c[1]===R&&(I=M1(l,t),R=R+I.yExtra)}return{x:b,y:T,width:M-b,height:R-T}}function M1(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,s=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),l=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),c=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),h=Math.acos((s+l-c)/(2*Math.sqrt(s)*Math.sqrt(l)));if(!h||Math.sin(h)===0||nl(h,0))return{xExtra:0,yExtra:0};var p=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),v=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));p=p>Math.PI/2?Math.PI-p:p,v=v>Math.PI/2?Math.PI-v:v;var y={xExtra:Math.cos(h/2-p)*(t/2*(1/Math.sin(h/2)))-t/2||0,yExtra:Math.cos(v-h/2)*(t/2*(1/Math.sin(h/2)))-t/2||0};return y}function hS(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}var Tx=function(e,t){var n=e.x*t.x+e.y*t.y,r=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),i=e.x*t.y-e.y*t.x<0?-1:1,s=i*Math.acos(n/r);return s},dS=function(e,t,n,r,i,s,l,c){t=Math.abs(t),n=Math.abs(n),r=Ll(r,360);var h=yl(r);if(e.x===l.x&&e.y===l.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var p=(e.x-l.x)/2,v=(e.y-l.y)/2,y={x:Math.cos(h)*p+Math.sin(h)*v,y:-Math.sin(h)*p+Math.cos(h)*v},b=Math.pow(y.x,2)/Math.pow(t,2)+Math.pow(y.y,2)/Math.pow(n,2);b>1&&(t=Math.sqrt(b)*t,n=Math.sqrt(b)*n);var T=Math.pow(t,2)*Math.pow(n,2)-Math.pow(t,2)*Math.pow(y.y,2)-Math.pow(n,2)*Math.pow(y.x,2),M=Math.pow(t,2)*Math.pow(y.y,2)+Math.pow(n,2)*Math.pow(y.x,2),R=T/M;R=R<0?0:R;var I=(i!==s?1:-1)*Math.sqrt(R),N={x:I*(t*y.y/n),y:I*(-(n*y.x)/t)},z={x:Math.cos(h)*N.x-Math.sin(h)*N.y+(e.x+l.x)/2,y:Math.sin(h)*N.x+Math.cos(h)*N.y+(e.y+l.y)/2},H={x:(y.x-N.x)/t,y:(y.y-N.y)/n},X=Tx({x:1,y:0},H),Y={x:(-y.x-N.x)/t,y:(-y.y-N.y)/n},ne=Tx(H,Y);!s&&ne>0?ne-=2*Math.PI:s&&ne<0&&(ne+=2*Math.PI),ne%=2*Math.PI;var pe=X+ne*c,ye=t*Math.cos(pe),De=n*Math.sin(pe),Xe={x:Math.cos(h)*ye-Math.sin(h)*De+z.x,y:Math.sin(h)*ye+Math.cos(h)*De+z.y,ellipticalArcStartAngle:X,ellipticalArcEndAngle:X+ne,ellipticalArcAngle:pe,ellipticalArcCenter:z,resultantRx:t,resultantRy:n};return Xe};function CC(e){for(var t=[],n=null,r=null,i=null,s=0,l=e.length,c=0;c<l;c++){var h=e[c];r=e[c+1];var p=h[0],v={command:p,prePoint:n,params:h,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(p){case"M":i=[h[1],h[2]],s=c;break;case"A":var y=pS(n,h);v.arcParams=y;break}if(p==="Z")n=i,r=e[s+1];else{var b=h.length;n=[h[b-2],h[b-1]]}r&&r[0]==="Z"&&(r=e[s],t[s]&&(t[s].prePoint=n)),v.currentPoint=n,t[s]&&O1(n,t[s].currentPoint)&&(t[s].prePoint=v.prePoint);var T=r?[r[r.length-2],r[r.length-1]]:null;v.nextPoint=T;var M=v.prePoint;if(["L","H","V"].includes(p))v.startTangent=[M[0]-n[0],M[1]-n[1]],v.endTangent=[n[0]-M[0],n[1]-M[1]];else if(p==="Q"){var R=[h[1],h[2]];v.startTangent=[M[0]-R[0],M[1]-R[1]],v.endTangent=[n[0]-R[0],n[1]-R[1]]}else if(p==="T"){var I=t[c-1],R=hS(I.currentPoint,M);I.command==="Q"?(v.command="Q",v.startTangent=[M[0]-R[0],M[1]-R[1]],v.endTangent=[n[0]-R[0],n[1]-R[1]]):(v.command="TL",v.startTangent=[M[0]-n[0],M[1]-n[1]],v.endTangent=[n[0]-M[0],n[1]-M[1]])}else if(p==="C"){var N=[h[1],h[2]],z=[h[3],h[4]];v.startTangent=[M[0]-N[0],M[1]-N[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]],v.startTangent[0]===0&&v.startTangent[1]===0&&(v.startTangent=[N[0]-z[0],N[1]-z[1]]),v.endTangent[0]===0&&v.endTangent[1]===0&&(v.endTangent=[z[0]-N[0],z[1]-N[1]])}else if(p==="S"){var I=t[c-1],N=hS(I.currentPoint,M),z=[h[1],h[2]];I.command==="C"?(v.command="C",v.startTangent=[M[0]-N[0],M[1]-N[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]]):(v.command="SQ",v.startTangent=[M[0]-z[0],M[1]-z[1]],v.endTangent=[n[0]-z[0],n[1]-z[1]])}else if(p==="A"){var H=Ax(v,0),X=H.x,Y=H.y,ne=Ax(v,1,!1),pe=ne.x,ye=ne.y;v.startTangent=[X,Y],v.endTangent=[pe,ye]}t.push(v)}return t}function Ax(e,t,n){n===void 0&&(n=!0);var r=e.arcParams,i=r.rx,s=i===void 0?0:i,l=r.ry,c=l===void 0?0:l,h=r.xRotation,p=r.arcFlag,v=r.sweepFlag,y=dS({x:e.prePoint[0],y:e.prePoint[1]},s,c,h,!!p,!!v,{x:e.currentPoint[0],y:e.currentPoint[1]},t),b=dS({x:e.prePoint[0],y:e.prePoint[1]},s,c,h,!!p,!!v,{x:e.currentPoint[0],y:e.currentPoint[1]},n?t+.005:t-.005),T=b.x-y.x,M=b.y-y.y,R=Math.sqrt(T*T+M*M);return{x:-T/R,y:-M/R}}function R1(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Cx(e,t){return R1(e)*R1(t)?(e[0]*t[0]+e[1]*t[1])/(R1(e)*R1(t)):1}function Ox(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Cx(e,t))}function pS(e,t){var n=t[1],r=t[2],i=Ll(yl(t[3]),Math.PI*2),s=t[4],l=t[5],c=e[0],h=e[1],p=t[6],v=t[7],y=Math.cos(i)*(c-p)/2+Math.sin(i)*(h-v)/2,b=-1*Math.sin(i)*(c-p)/2+Math.cos(i)*(h-v)/2,T=y*y/(n*n)+b*b/(r*r);T>1&&(n*=Math.sqrt(T),r*=Math.sqrt(T));var M=n*n*(b*b)+r*r*(y*y),R=M?Math.sqrt((n*n*(r*r)-M)/M):1;s===l&&(R*=-1),isNaN(R)&&(R=0);var I=r?R*n*b/r:0,N=n?R*-r*y/n:0,z=(c+p)/2+Math.cos(i)*I-Math.sin(i)*N,H=(h+v)/2+Math.sin(i)*I+Math.cos(i)*N,X=[(y-I)/n,(b-N)/r],Y=[(-1*y-I)/n,(-1*b-N)/r],ne=Ox([1,0],X),pe=Ox(X,Y);return Cx(X,Y)<=-1&&(pe=Math.PI),Cx(X,Y)>=1&&(pe=0),l===0&&pe>0&&(pe=pe-2*Math.PI),l===1&&pe<0&&(pe=pe+2*Math.PI),{cx:z,cy:H,rx:O1(e,[p,v])?0:n,ry:O1(e,[p,v])?0:r,startAngle:ne,endAngle:ne+pe,xRotation:i,arcFlag:s,sweepFlag:l}}function Mx(e,t,n){return e.reduce(function(r,i){var s="";if(i[0]==="M"||i[0]==="L"){var l=cr.al(i[1],i[2],0);n&&cr.fF(l,l,n),s="".concat(i[0]).concat(l[0],",").concat(l[1])}else if(i[0]==="Z")s=i[0];else if(i[0]==="C"){var c=cr.al(i[1],i[2],0),h=cr.al(i[3],i[4],0),p=cr.al(i[5],i[6],0);n&&(cr.fF(c,c,n),cr.fF(h,h,n),cr.fF(p,p,n)),s="".concat(i[0]).concat(c[0],",").concat(c[1],",").concat(h[0],",").concat(h[1],",").concat(p[0],",").concat(p[1])}else if(i[0]==="A"){var v=cr.al(i[6],i[7],0);n&&cr.fF(v,v,n),s="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(v[0],",").concat(v[1])}else if(i[0]==="Q"){var c=cr.al(i[1],i[2],0),h=cr.al(i[3],i[4],0);n&&(cr.fF(c,c,n),cr.fF(h,h,n)),s="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return r+=s},"")}function P1(e,t,n,r){return[["M",e,t],["L",n,r]]}function vS(e,t,n,r){var i=(-1+Math.sqrt(2))/3*4,s=e*i,l=t*i,c=n-e,h=n+e,p=r-t,v=r+t;return[["M",c,r],["C",c,r-l,n-s,p,n,p],["C",n+s,p,h,r-l,h,r],["C",h,r+l,n+s,v,n,v],["C",n-s,v,c,r+l,c,r],["Z"]]}function OC(e,t){var n=e.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return t&&n.push(["Z"]),n}function MC(e,t,n,r,i){if(i){var s=(0,ae.CR)(i,4),l=s[0],c=s[1],h=s[2],p=s[3],v=e>0?1:-1,y=t>0?1:-1,b=v+y!==0?1:0;return[["M",v*l+n,r],["L",e-v*c+n,r],c?["A",c,c,0,0,b,e+n,y*c+r]:null,["L",e+n,t-y*h+r],h?["A",h,h,0,0,b,e+n-v*h,t+r]:null,["L",n+v*p,t+r],p?["A",p,p,0,0,b,n,t+r-y*p]:null,["L",n,y*l+r],l?["A",l,l,0,0,b,v*l+n,r]:null,["Z"]].filter(function(T){return T})}return[["M",n,r],["L",n+e,r],["L",n+e,r+t],["L",n,r+t],["Z"]]}function Rx(e,t){t===void 0&&(t=e.getLocalTransform());var n=[];switch(e.nodeName){case ni.LINE:var r=e.parsedStyle,i=r.x1,s=i===void 0?0:i,l=r.y1,c=l===void 0?0:l,h=r.x2,p=h===void 0?0:h,v=r.y2,y=v===void 0?0:v;n=P1(s,c,p,y);break;case ni.CIRCLE:{var b=e.parsedStyle,T=b.r,M=T===void 0?0:T,R=b.cx,I=R===void 0?0:R,N=b.cy,z=N===void 0?0:N;n=vS(M,M,I,z);break}case ni.ELLIPSE:{var H=e.parsedStyle,X=H.rx,Y=X===void 0?0:X,ne=H.ry,pe=ne===void 0?0:ne,ye=H.cx,I=ye===void 0?0:ye,De=H.cy,z=De===void 0?0:De;n=vS(Y,pe,I,z);break}case ni.POLYLINE:case ni.POLYGON:var Xe=e.parsedStyle.points;n=OC(Xe.points,e.nodeName===ni.POLYGON);break;case ni.RECT:var Ke=e.parsedStyle,mt=Ke.width,Qe=mt===void 0?0:mt,ut=Ke.height,ct=ut===void 0?0:ut,gt=Ke.x,Xt=gt===void 0?0:gt,Rt=Ke.y,kt=Rt===void 0?0:Rt,wn=Ke.radius,zn=wn&&wn.some(function(ir){return ir!==0});n=MC(Qe,ct,Xt,kt,zn&&wn.map(function(ir){return(0,d.Z)(ir,0,Math.min(Math.abs(Qe)/2,Math.abs(ct)/2))}));break;case ni.PATH:var or=e.parsedStyle.d.absolutePath;n=(0,ae.ev)([],(0,ae.CR)(or),!1);break}if(n.length)return Mx(n,e,t)}function RC(e,t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0);var s=e.map(function(l,c){var h=l[0],p=e[c+1],v=c===0&&(t!==0||n!==0),y=(c===e.length-1||p&&(p[0]==="M"||p[0]==="Z"))&&r!==0&&i!==0;switch(h){case"M":return v?"M ".concat(l[1]+t,",").concat(l[2]+n," L ").concat(l[1],",").concat(l[2]):"M ".concat(l[1],",").concat(l[2]);case"L":return"L ".concat(l[1]+(y?r:0),",").concat(l[2]+(y?i:0));case"Q":return"Q ".concat(l[1]," ").concat(l[2],",").concat(l[3]," ").concat(l[4])+(y?" L ".concat(l[3]+r,",").concat(l[4]+i):"");case"C":return"C ".concat(l[1]," ").concat(l[2],",").concat(l[3]," ").concat(l[4],",").concat(l[5]," ").concat(l[6])+(y?" L ".concat(l[5]+r,",").concat(l[6]+i):"");case"A":return"A ".concat(l[1]," ").concat(l[2]," ").concat(l[3]," ").concat(l[4]," ").concat(l[5]," ").concat(l[6]," ").concat(l[7])+(y?" L ".concat(l[6]+r,",").concat(l[7]+i):"");case"Z":return"Z"}}).join(" ");return~s.indexOf("NaN")?"":s}var Px=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=Br(e)}catch(b){t=Br(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}TC(t);var n=Sx(t),r=AC(t),i=r.polygons,s=r.polylines,l=CC(t),c=fS(l,0),h=c.x,p=c.y,v=c.width,y=c.height;return{absolutePath:t,hasArc:n,segments:l,polygons:i,polylines:s,totalLength:0,rect:{x:Number.isFinite(h)?h:0,y:Number.isFinite(p)?p:0,width:Number.isFinite(v)?v:0,height:Number.isFinite(y)?y:0}}},PC=mf(Px);function Ix(e){return u(e)?PC(e):Px(e)}function IC(e,t,n){var r=e.curve,i=t.curve;(!r||r.length===0)&&(r=zl(e.absolutePath,!1),e.curve=r),(!i||i.length===0)&&(i=zl(t.absolutePath,!1),t.curve=i);var s=[r,i];r.length!==i.length&&(s=Ks(r,i));var l=Zc(s[0])!==Zc(s[1])?Mc(s[0]):hl(s[0]);return[l,Rc(s[1],l),function(c){return c}]}function mS(e,t){var n;return u(e)?n=e.split(" ").map(function(r){var i=(0,ae.CR)(r.split(","),2),s=i[0],l=i[1];return[Number(s),Number(l)]}):n=e,{points:n,totalLength:0,segments:[]}}function gS(e,t){return[e.points,t.points,function(n){return n}]}var Hu=null;function Nf(e){return function(t){var n=0;return e.map(function(r){return r===Hu?t[n++]:r})}}function Qv(e){return e}var c_={matrix:["NNNNNN",[Hu,Hu,0,0,Hu,Hu,0,0,0,0,1,0,Hu,Hu,0,1],Qv],matrix3d:["NNNNNNNNNNNNNNNN",Qv],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Nf([Hu,Hu,new jl(1)]),Qv],scalex:["N",Nf([Hu,new jl(1),new jl(1)]),Nf([Hu,new jl(1)])],scaley:["N",Nf([new jl(1),Hu,new jl(1)]),Nf([new jl(1),Hu])],scalez:["N",Nf([new jl(1),new jl(1),Hu])],scale3d:["NNN",Qv],skew:["Aa",null,Qv],skewx:["A",null,Nf([Hu,Op])],skewy:["A",null,Nf([Op,Hu])],translate:["Tt",Nf([Hu,Hu,Iu]),Qv],translatex:["T",Nf([Hu,Iu,Iu]),Nf([Hu,Iu])],translatey:["T",Nf([Iu,Hu,Iu]),Nf([Iu,Hu])],translatez:["L",Nf([Iu,Iu,Hu])],translate3d:["TTL",Qv]};function Dx(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var s=r[1],l=c_[s];if(!l)return[];var c=r[2].split(","),h=l[0];if(h.length<c.length)return[];for(var p=[],v=0;v<h.length;v++){var y=c[v],b=h[v],T=void 0;if(y?T={A:function(M){return M.trim()==="0"?Op:sS(M)},N:Vm,T:Fg,L:xC}[b.toUpperCase()](y):T={a:Op,n:p[0],t:Iu}[b],T===void 0)return[];p.push(T)}if(n.push({t:s,d:p}),t.lastIndex===e.length)return n}return[]}function I1(e){if(e=(e||"none").toLowerCase().trim(),e==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=t.exec(e);){if(r.index!==i)return[];i=r.index+r[0].length;var s=r[1],l=c_[s];if(!l)return[];var c=r[2].split(","),h=l[0];if(h.length<c.length)return[];for(var p=[],v=0;v<h.length;v++){var y=c[v],b=h[v],T=void 0;if(y?T={A:function(M){return M.trim()==="0"?Op:gx(M)},N:Bg,T:u_,L:mx}[b.toUpperCase()](y):T={a:Op,n:p[0],t:Iu}[b],T===void 0)return[];p.push(T)}if(n.push({t:s,d:p}),t.lastIndex===e.length)return n}return[]}function DC(e){var t,n,r,i;switch(e.t){case"rotatex":return i=yl(Hd(e.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=yl(Hd(e.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=yl(Hd(e.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=e.d[0].value,n=e.d[1].value,r=e.d[2].value,i=yl(Hd(e.d[3]));var s=t*t+n*n+r*r;if(s===0)t=1,n=0,r=0;else if(s!==1){var l=Math.sqrt(s);t/=l,n/=l,r/=l}var c=Math.sin(i/2),h=c*Math.cos(i/2),p=c*c;return[1-2*(n*n+r*r)*p,2*(t*n*p+r*h),2*(t*r*p-n*h),0,2*(t*n*p-r*h),1-2*(t*t+r*r)*p,2*(n*r*p+t*h),0,2*(t*r*p+n*h),2*(n*r*p-t*h),1-2*(t*t+n*n)*p,0,0,0,0,1];case"scale":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0].value,0,0,0,0,1];case"scale3d":return[e.d[0].value,0,0,0,0,e.d[1].value,0,0,0,0,e.d[2].value,0,0,0,0,1];case"skew":var v=yl(Hd(e.d[0])),y=yl(Hd(e.d[1]));return[1,Math.tan(y),0,0,Math.tan(v),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=yl(Hd(e.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=yl(Hd(e.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return t=Rh(e.d[0],0,null)||0,n=Rh(e.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,0,1];case"translatex":return t=Rh(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1];case"translatey":return n=Rh(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":return r=Rh(e.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return t=Rh(e.d[0],0,null)||0,n=Rh(e.d[1],0,null)||0,r=Rh(e.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1];case"perspective":var b=Rh(e.d[0],0,null)||0,T=b?-1/b:0;return[1,0,0,0,0,1,0,0,0,0,1,T,0,0,0,1];case"matrix":return[e.d[0].value,e.d[1].value,0,0,e.d[2].value,e.d[3].value,0,0,0,0,1,0,e.d[4].value,e.d[5].value,0,1];case"matrix3d":return e.d.map(function(M){return M.value})}}function LC(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function NC(e){return e.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(DC).reduce(LC)}function yS(e){var t=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],s=[0,0,0,1];return e_(NC(e),t,n,r,i,s),[[t,n,r,s,i]]}var FC=function(){function e(r,i){for(var s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],l=0;l<4;l++)for(var c=0;c<4;c++)for(var h=0;h<4;h++)s[l][c]+=i[l][h]*r[h][c];return s}function t(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function n(r,i,s,l,c){for(var h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=0;p<4;p++)h[p][3]=c[p];for(var p=0;p<3;p++)for(var v=0;v<3;v++)h[3][p]+=r[v]*h[v][p];var y=l[0],b=l[1],T=l[2],M=l[3],R=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];R[0][0]=1-2*(b*b+T*T),R[0][1]=2*(y*b-T*M),R[0][2]=2*(y*T+b*M),R[1][0]=2*(y*b+T*M),R[1][1]=1-2*(y*y+T*T),R[1][2]=2*(b*T-y*M),R[2][0]=2*(y*T-b*M),R[2][1]=2*(b*T+y*M),R[2][2]=1-2*(y*y+b*b),h=e(h,R);var I=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];s[2]&&(I[2][1]=s[2],h=e(h,I)),s[1]&&(I[2][1]=0,I[2][0]=s[0],h=e(h,I)),s[0]&&(I[2][0]=0,I[1][0]=s[0],h=e(h,I));for(var p=0;p<3;p++)for(var v=0;v<3;v++)h[p][v]*=i[p];return t(h)?[h[0][0],h[0][1],h[1][0],h[1][1],h[3][0],h[3][1]]:h[0].concat(h[1],h[2],h[3])}return n}();function BC(e){return e.toFixed(6).replace(".000000","")}function Lx(e,t){var n,r;return e.decompositionPair!==t&&(e.decompositionPair=t,n=yS(e)),t.decompositionPair!==e&&(t.decompositionPair=e,r=yS(t)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?t[0].d:e[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var s=zC(n[0][3],r[0][3],i[5]),l=FC(i[0],i[1],i[2],s,i[4]),c=l.map(BC).join(",");return c}])}function kC(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function zC(e,t,n){var r=kC(e,t);r=(0,d.Z)(r,-1,1);var i=[];if(r===1)i=e;else for(var s=Math.acos(r),l=Math.sin(n*s)*1/Math.sqrt(1-r*r),c=0;c<4;c++)i.push(e[c]*(Math.cos(n*s)-r*l)+t[c]*l);return i}function Nx(e){return e.replace(/[xy]/,"")}function Fx(e){return e.replace(/(x|y|z|3d)?$/,"3d")}var UC=function(e,t){return e==="perspective"&&t==="perspective"||(e==="matrix"||e==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function jC(e,t,n){var r=!1;if(!e.length||!t.length){e.length||(r=!0,e=t,t=[]);for(var i=function(ne){var pe=e[ne],ye=pe.t,De=pe.d,Xe=ye.substring(0,5)==="scale"?1:0;t.push({t:ye,d:De.map(function(Ke){return typeof Ke=="number"?hu(Xe):hu(Xe,Ke.unit)})})},s=0;s<e.length;s++)i(s)}var l=[],c=[],h=[];if(e.length!==t.length){var p=Lx(e,t);l=[p[0]],c=[p[1]],h=[["matrix",[p[2]]]]}else for(var s=0;s<e.length;s++){var v=e[s].t,y=t[s].t,b=e[s].d,T=t[s].d,M=c_[v],R=c_[y],I=void 0;if(UC(v,y)){var p=Lx([e[s]],[t[s]]);l.push(p[0]),c.push(p[1]),h.push(["matrix",[p[2]]]);continue}else if(v===y)I=v;else if(M[2]&&R[2]&&Nx(v)===Nx(y))I=Nx(v),b=M[2](b),T=R[2](T);else if(M[1]&&R[1]&&Fx(v)===Fx(y))I=Fx(v),b=M[1](b),T=R[1](T);else{var p=Lx(e,t);l=[p[0]],c=[p[1]],h=[["matrix",[p[2]]]];break}for(var N=[],z=[],H=[],X=0;X<b.length;X++){var p=SC(b[X],T[X],n,!1,X);N[X]=p[0],z[X]=p[1],H.push(p[2])}l.push(N),c.push(z),h.push([I,H])}if(r){var Y=l;l=c,c=Y}return[l,c,function(ne){return ne.map(function(pe,ye){var De=pe.map(function(Xe,Ke){return h[ye][1][Ke](Xe)}).join(",");return h[ye][0]==="matrix"&&De.split(",").length===16&&(h[ye][0]="matrix3d"),h[ye][0]==="matrix3d"&&De.split(",").length===6&&(h[ye][0]="matrix"),h[ye][0]+"("+De+")"}).join(" ")}]}var _S=mf(function(e){if(u(e)){if(e==="text-anchor")return[hu(0,"px"),hu(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[Fg(D1(t[0])),Fg(D1(t[1]))]}else return[hu(e[0]||0,"px"),hu(e[1]||0,"px")]}),VC=function(e){if(u(e)){if(e==="text-anchor")return[hu(0,"px"),hu(0,"px")];var t=e.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[u_(D1(t[0])),u_(D1(t[1]))]}else return[hu(e[0]||0,"px"),hu(e[1]||0,"px")]};function D1(e){return e==="center"?"50%":e==="left"||e==="top"?"0%":e==="right"||e==="bottom"?"100%":e}var Bx=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Io.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Io.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Io.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Io.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Io.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Io.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Io.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Io.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Io.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Io.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Io.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Io.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Io.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Io.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Io.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Io.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Io.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Io.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Io.FILTER},{n:"clipPath",syntax:Io.DEFINED_PATH},{n:"textPath",syntax:Io.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Io.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Io.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:Io.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:Io.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:Io.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:Io.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Io.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Io.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Io.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:Io.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:Io.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:Io.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Io.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Io.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Io.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Io.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Io.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Io.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Io.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Io.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Io.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:Io.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Io.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Io.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Io.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Io.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Io.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Io.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Io.NUMBER,d:function(e){return e===ni.PATH||e===ni.POLYGON||e===ni.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Io.MARKER},{n:"markerEnd",syntax:Io.MARKER},{n:"markerMid",syntax:Io.MARKER},{n:"markerStartOffset",syntax:Io.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Io.LENGTH,l:!0,int:!0,d:"0"}],bS=Bx.filter(function(e){return!!e.l}).map(function(e){return e.n}),Jv={},kg=new WeakMap,HC=function(e,t){var n=kg.get(e);return!n||n.length===0?!0:n.includes(t)},RI=function(){function e(t){var n=this;this.runtime=t,Bx.forEach(function(r){n.registerMetadata(r)})}return e.prototype.registerMetadata=function(t){(0,ae.ev)([t.n],(0,ae.CR)(t.a||[]),!1).forEach(function(n){Jv[n]=t})},e.prototype.unregisterMetadata=function(t){delete Jv[t]},e.prototype.getPropertySyntax=function(t){return this.runtime.CSSPropertySyntaxFactory[t]},e.prototype.processProperties=function(t,n,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),this.runtime.enableCSSParsing){var v=r.skipUpdateAttribute,y=r.skipParse,b=r.forceUpdateGeometry,T=r.usedAttributes,M=r.memoize,R=b,I=Object.keys(n);I.forEach(function(N){var z;v||(t.attributes[N]=n[N]),!R&&(!((z=Jv[N])===null||z===void 0)&&z.l)&&(R=!0)}),y||I.forEach(function(N){t.computedStyle[N]=i.parseProperty(N,t.attributes[N],t,M)}),T!=null&&T.length&&(I=Array.from(new Set(I.concat(T)))),I.forEach(function(N){N in t.computedStyle&&(t.parsedStyle[N]=i.computeProperty(N,t.computedStyle[N],t,M))}),R&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t)),I.forEach(function(N){N in t.parsedStyle&&i.postProcessProperty(N,t,I)}),this.runtime.enableCSSParsing&&t.children.length&&I.forEach(function(N){N in t.parsedStyle&&i.isPropertyInheritable(N)&&t.children.forEach(function(z){z.internalSetAttribute(N,null,{skipUpdateAttribute:!0,skipParse:!0})})})}else{Object.assign(t.attributes,n);var s=Object.keys(n),l=t.parsedStyle.clipPath,c=t.parsedStyle.offsetPath;t.parsedStyle=Object.assign(t.parsedStyle,n);var h=!!r.forceUpdateGeometry;if(!h){for(var p=0;p<bS.length;p++)if(bS[p]in n){h=!0;break}}n.fill&&(t.parsedStyle.fill=vv(n.fill)),n.stroke&&(t.parsedStyle.stroke=vv(n.stroke)),n.shadowColor&&(t.parsedStyle.shadowColor=vv(n.shadowColor)),n.filter&&(t.parsedStyle.filter=uS(n.filter)),(0,ya.Z)(n.radius)||(t.parsedStyle.radius=yx(n.radius,4)),(0,ya.Z)(n.lineDash)||(t.parsedStyle.lineDash=yx(n.lineDash,2)),n.points&&(t.parsedStyle.points=mS(n.points)),n.d===""&&(t.parsedStyle.d=(0,ae.pi)({},sC)),n.d&&(t.parsedStyle.d=Ix(n.d)),n.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:n.textTransform},t,null),Vs(n.clipPath)||this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",l,n.clipPath,t,this.runtime),n.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",c,n.offsetPath,t,this.runtime),n.transform&&(t.parsedStyle.transform=Dx(n.transform)),n.transformOrigin&&(t.parsedStyle.transformOrigin=_S(n.transformOrigin)),n.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerStart,n.markerStart,null,null)),n.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerEnd,n.markerEnd,null,null)),n.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",n.markerMid,n.markerMid,null,null)),(0,ya.Z)(n.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(t,s),(0,ya.Z)(n.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(t,s),n.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(t,s),n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory["<transform-origin>"].postProcessor(t,s),h&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t))}},e.prototype.parseProperty=function(t,n,r,i){var s=Jv[t],l=n;if((n===""||(0,ya.Z)(n))&&(n="unset"),n==="unset"||n==="initial"||n==="inherit")l=oS(n);else if(s){var c=s.k,h=s.syntax,p=h&&this.getPropertySyntax(h);c&&c.indexOf(n)>-1?l=oS(n):p&&(!i&&p.parserUnmemoize?l=p.parserUnmemoize(n,r):p.parser&&(l=p.parser(n,r)))}return l},e.prototype.computeProperty=function(t,n,r,i){var s=Jv[t],l=r.id==="g-root",c=n;if(s){var h=s.syntax,p=s.inh,v=s.d;if(n instanceof Yc){var y=n.value;if(y==="unset"&&(p&&!l?y="inherit":y="initial"),y==="initial")(0,ya.Z)(v)||(n=this.parseProperty(t,Kv(v)?v(r.nodeName):v,r,i));else if(y==="inherit"){var b=this.tryToResolveProperty(r,t,{inherited:!0});if((0,ya.Z)(b)){this.addUnresolveProperty(r,t);return}else return b}}var T=h&&this.getPropertySyntax(h);if(T&&T.calculator){var M=r.parsedStyle[t];c=T.calculator(t,M,n,r,this.runtime)}else n instanceof Yc?c=n.value:c=n}return c},e.prototype.postProcessProperty=function(t,n,r){var i=Jv[t];if(i&&i.syntax){var s=i.syntax&&this.getPropertySyntax(i.syntax),l=s;l&&l.postProcessor&&l.postProcessor(n,r)}},e.prototype.addUnresolveProperty=function(t,n){var r=kg.get(t);r||(kg.set(t,[]),r=kg.get(t)),r.indexOf(n)===-1&&r.push(n)},e.prototype.tryToResolveProperty=function(t,n,r){r===void 0&&(r={});var i=r.inherited;if(i&&t.parentElement&&HC(t.parentElement,n)){var s=t.parentElement.parsedStyle[n];return s==="unset"||s==="initial"||s==="inherit"?void 0:s}},e.prototype.recalc=function(t){var n=kg.get(t);if(n&&n.length){var r={};n.forEach(function(i){r[i]=t.attributes[i]}),this.processProperties(t,r),kg.delete(t)}},e.prototype.updateGeometry=function(t){var n=t.nodeName,r=this.runtime.geometryUpdaterFactory[n];if(r){var i=t.geometry;i.contentBounds||(i.contentBounds=new Pu),i.renderBounds||(i.renderBounds=new Pu);var s=t.parsedStyle,l=r.update(s,t),c=l.cx,h=c===void 0?0:c,p=l.cy,v=p===void 0?0:p,y=l.cz,b=y===void 0?0:y,T=l.hwidth,M=T===void 0?0:T,R=l.hheight,I=R===void 0?0:R,N=l.hdepth,z=N===void 0?0:N,H=[Math.abs(M),Math.abs(I),z],X=s,Y=X.stroke,ne=X.lineWidth,pe=ne===void 0?1:ne,ye=X.increasedLineWidthForHitTesting,De=ye===void 0?0:ye,Xe=X.shadowType,Ke=Xe===void 0?"outer":Xe,mt=X.shadowColor,Qe=X.filter,ut=Qe===void 0?[]:Qe,ct=X.transformOrigin,gt=[h,v,b];i.contentBounds.update(gt,H);var Xt=n===ni.POLYLINE||n===ni.POLYGON||n===ni.PATH?Math.SQRT2:.5,Rt=Y&&!Y.isNone;if(Rt){var kt=((pe||0)+(De||0))*Xt;H[0]+=kt,H[1]+=kt}if(i.renderBounds.update(gt,H),mt&&Ke&&Ke!=="inner"){var wn=i.renderBounds,zn=wn.min,or=wn.max,ir=s,Zr=ir.shadowBlur,Ri=ir.shadowOffsetX,Qi=ir.shadowOffsetY,Qr=Zr||0,ei=Ri||0,Po=Qi||0,uo=zn[0]-Qr+ei,Jo=or[0]+Qr+ei,wa=zn[1]-Qr+Po,ja=or[1]+Qr+Po;zn[0]=Math.min(zn[0],uo),or[0]=Math.max(or[0],Jo),zn[1]=Math.min(zn[1],wa),or[1]=Math.max(or[1],ja),i.renderBounds.setMinMax(zn,or)}ut.forEach(function(Is){var ku=Is.name,tf=Is.params;if(ku==="blur"){var zp=tf[0].value;i.renderBounds.update(i.renderBounds.center,Bm(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[zp,zp,0]))}else if(ku==="drop-shadow"){var nf=tf[0].value,vh=tf[1].value,Qa=tf[2].value,Ds=i.renderBounds,us=Ds.min,Wa=Ds.max,dl=us[0]-Qa+nf,ol=Wa[0]+Qa+nf,Ys=us[1]-Qa+vh,wu=Wa[1]+Qa+vh;us[0]=Math.min(us[0],dl),Wa[0]=Math.max(Wa[0],ol),us[1]=Math.min(us[1],Ys),Wa[1]=Math.max(Wa[1],wu),i.renderBounds.setMinMax(us,Wa)}}),t.geometry.dirty=!1;var Va=M<0,vs=I<0,Cl=(Va?-1:1)*(ct?Rh(ct[0],0,t,!0):0),ss=(vs?-1:1)*(ct?Rh(ct[1],1,t,!0):0);(Cl||ss)&&t.setOrigin(Cl,ss)}},e.prototype.updateSizeAttenuation=function(t,n){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/n,t.nodeName===ni.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/n)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===ni.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))},e.prototype.isPropertyInheritable=function(t){var n=Jv[t];return n?n.inh:!1},e}(),GC=function(){function e(){this.parser=sS,this.parserUnmemoize=gx,this.parserWithCSSDisabled=null,this.mixer=bx}return e.prototype.calculator=function(t,n,r,i){return Hd(r)},e}(),kx=function(){function e(){}return e.prototype.calculator=function(t,n,r,i,s){return r instanceof Yc&&(r=null),s.sceneGraphService.updateDisplayObjectDependency(t,n,r,i),t==="clipPath"&&i.forEach(function(l){l.childNodes.length===0&&s.sceneGraphService.dirtifyToRoot(l)}),r},e}(),WC=function(){function e(){this.parser=vv,this.parserWithCSSDisabled=vv,this.mixer=bC}return e.prototype.calculator=function(t,n,r,i){return r instanceof Yc?r.value==="none"?C1:oC:r},e}(),ZC=function(){function e(){this.parser=uS}return e.prototype.calculator=function(t,n,r){return r instanceof Yc?[]:r},e}();function xS(e){var t=e.parsedStyle.fontSize;return(0,ya.Z)(t)?null:t}var zx=function(){function e(){this.parser=Fg,this.parserUnmemoize=u_,this.parserWithCSSDisabled=null,this.mixer=bx}return e.prototype.calculator=function(t,n,r,i,s){var l;if((0,yu.Z)(r))return r;if(jl.isRelativeUnit(r.unit)){var c=s.styleValueRegistry;if(r.unit===So.kPercentage)return 0;if(r.unit===So.kEms){if(i.parentNode){var h=xS(i.parentNode);if(h)return h*=r.value,h;c.addUnresolveProperty(i,t)}else c.addUnresolveProperty(i,t);return 0}else if(r.unit===So.kRems){if(!((l=i==null?void 0:i.ownerDocument)===null||l===void 0)&&l.documentElement){var h=xS(i.ownerDocument.documentElement);if(h)return h*=r.value,h;c.addUnresolveProperty(i,t)}else c.addUnresolveProperty(i,t);return 0}}else return r.value},e}(),XC=function(){function e(){this.mixer=cS}return e.prototype.parser=function(t){var n=lS((0,yu.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0]]:r=[n[0],n[1]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),f_=function(){function e(){this.mixer=cS}return e.prototype.parser=function(t){var n=lS((0,yu.Z)(t)?[t]:t),r;return n.length===1?r=[n[0],n[0],n[0],n[0]]:n.length===2?r=[n[0],n[1],n[0],n[1]]:n.length===3?r=[n[0],n[1],n[2],n[1]]:r=[n[0],n[1],n[2],n[3]],r},e.prototype.calculator=function(t,n,r){return r.map(function(i){return i.value})},e}(),h_=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){r instanceof Yc&&(r=null);var s=r==null?void 0:r.cloneNode(!0);return s&&(s.style.isMarker=!0),s},e}(),YC=function(){function e(){this.mixer=bx,this.parser=Vm,this.parserUnmemoize=Bg,this.parserWithCSSDisabled=null}return e.prototype.calculator=function(t,n,r){return r.value},e}(),$C=function(){function e(){this.parser=Vm,this.parserUnmemoize=Bg,this.parserWithCSSDisabled=null,this.mixer=xx(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e.prototype.postProcessor=function(t){var n=t.parsedStyle,r=n.offsetPath,i=n.offsetDistance;if(r){var s=r.nodeName;if(s===ni.LINE||s===ni.PATH||s===ni.POLYLINE){var l=r.getPoint(i);l&&t.setLocalPosition(l.x,l.y)}}},e}(),qC=function(){function e(){this.parser=Vm,this.parserUnmemoize=Bg,this.parserWithCSSDisabled=null,this.mixer=xx(0,1)}return e.prototype.calculator=function(t,n,r){return r.value},e}(),ES=function(){function e(){this.parser=Ix,this.parserWithCSSDisabled=Ix,this.mixer=IC}return e.prototype.calculator=function(t,n,r){return r instanceof Yc&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Tp(0,0,0,0)}:r},e}(),KC=function(){function e(){this.parser=mS,this.mixer=gS}return e}(),QC=function(e){(0,ae.ZT)(t,e);function t(){var n=e.apply(this,(0,ae.ev)([],(0,ae.CR)(arguments),!1))||this;return n.mixer=xx(0,1/0),n}return t}(zx),JC=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){return r instanceof Yc?r.value==="unset"?"":r.value:"".concat(r)},e.prototype.postProcessor=function(t){t.nodeValue="".concat(t.parsedStyle.text)||""},e}(),eO=function(){function e(){}return e.prototype.calculator=function(t,n,r,i){var s=i.getAttribute("text");if(s){var l=s;r.value==="capitalize"?l=s.charAt(0).toUpperCase()+s.slice(1):r.value==="lowercase"?l=s.toLowerCase():r.value==="uppercase"&&(l=s.toUpperCase()),i.parsedStyle.text=l}return r.value},e}(),Ux={},tO=0;function nO(e,t){if(e){var n=typeof e=="string"?e:e.id||tO++;Ux[n]&&Ux[n].destroy(),Ux[n]=t}}var d_=typeof window!="undefined"&&typeof window.document!="undefined";function rO(e){return!!e.getAttribute}function iO(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;SS(e[i],t)<0?n=i+1:r=i}return n}function SS(e,t){var n=Number(e.parsedStyle.zIndex||0),r=Number(t.parsedStyle.zIndex||0);if(n===r){var i=e.parentNode;if(i){var s=i.childNodes||[];return s.indexOf(e)-s.indexOf(t)}}return n-r}function wS(e){var t,n=e;do{var r=(t=n.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(r)return n;n=n.parentElement}while(n!==null);return null}var TS="px";function oO(e,t,n){d_&&e.style&&(e.style.width=t+TS,e.style.height=n+TS)}function aO(e,t){if(d_)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function sO(e){var t=aO(e,"width");return t==="auto"?e.offsetWidth:parseFloat(t)}function jx(e){var t=aO(e,"height");return t==="auto"?e.offsetHeight:parseFloat(t)}var lO=1,uO={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},mv=typeof performance=="object"&&performance.now?performance:Date;function Hm(e,t,n){e===void 0&&(e="auto");var r=!1,i=!1,s=!!t&&!t.isNone,l=!!n&&!n.isNone;return e==="visiblepainted"||e==="painted"||e==="auto"?(r=s,i=l):e==="visiblefill"||e==="fill"?r=!0:e==="visiblestroke"||e==="stroke"?i=!0:(e==="visible"||e==="all")&&(r=!0,i=!0),[r,i]}var cO=1,fO=function(){return cO++},I0=typeof self=="object"&&self.self==self?self:typeof L.g=="object"&&L.g.global==L.g?L.g:{},PI=Date.now(),hO=function(){return I0.performance&&typeof I0.performance.now=="function"?I0.performance.now():Date.now()-PI},p_={},AS=Date.now(),dO=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");var t=Date.now(),n=t-AS,r=n>16?0:16-n,i=fO();return p_[i]=e,Object.keys(p_).length>1||setTimeout(function(){AS=t;var s=p_;p_={},Object.keys(s).forEach(function(l){return s[l](hO())})},r),i},pO=function(e){delete p_[e]},vO=["","webkit","moz","ms","o"],mO=function(e){return typeof e!="string"?dO:e===""?I0.requestAnimationFrame:I0[e+"RequestAnimationFrame"]},gO=function(e){return typeof e!="string"?pO:e===""?I0.cancelAnimationFrame:I0[e+"CancelAnimationFrame"]||I0[e+"CancelRequestAnimationFrame"]},CS=function(e,t){for(var n=0;e[n]!==void 0;){if(t(e[n]))return e[n];n=n+1}},OS=CS(vO,function(e){return!!mO(e)}),Vx=mO(OS),MS=gO(OS);I0.requestAnimationFrame=Vx,I0.cancelAnimationFrame=MS;var yO=function(){function e(){this.callbacks=[]}return e.prototype.getCallbacksNum=function(){return this.callbacks.length},e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,(0,ae.ev)([],(0,ae.CR)(t),!1))}))},e}(),RS=function(){function e(){this.callbacks=[]}return e.prototype.tapPromise=function(t,n){this.callbacks.push(n)},e.prototype.promise=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0,ae.mG)(this,void 0,void 0,function(){var r,i,s,l;return(0,ae.Jh)(this,function(c){switch(c.label){case 0:return this.callbacks.length?[4,(l=this.callbacks)[0].apply(l,(0,ae.ev)([],(0,ae.CR)(t),!1))]:[3,6];case 1:r=c.sent(),i=0,c.label=2;case 2:return i<this.callbacks.length-1?(s=this.callbacks[i],[4,s(r)]):[3,5];case 3:r=c.sent(),c.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},e}(),Ph=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){var t=arguments;this.callbacks.forEach(function(n){n.apply(void 0,t)})},e}(),Hx=function(){function e(){this.callbacks=[]}return e.prototype.tap=function(t,n){this.callbacks.push(n)},e.prototype.call=function(){if(this.callbacks.length){for(var t=arguments,n=this.callbacks[0].apply(void 0,t),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];n=i(n)}return n}return null},e}(),_O=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],bO=/([\"\'])[^\'\"]+\1/;function xO(e){for(var t=e.fontSize,n=t===void 0?16:t,r=e.fontFamily,i=r===void 0?"sans-serif":r,s=e.fontStyle,l=s===void 0?"normal":s,c=e.fontVariant,h=c===void 0?"normal":c,p=e.fontWeight,v=p===void 0?"normal":p,y=(0,yu.Z)(n)&&"".concat(n,"px")||"16px",b=i.split(","),T=b.length-1;T>=0;T--){var M=b[T].trim();!bO.test(M)&&_O.indexOf(M)<0&&(M='"'.concat(M,'"')),b[T]=M}return"".concat(l," ").concat(h," ").concat(v," ").concat(y," ").concat(b.join(","))}function Gx(e,t,n){return ti.identity(e),e[4]=Math.tan(t),e[1]=Math.tan(n),e}var v_=1e-5,EO=ti.create(),$c=ti.create();function PS(e,t){if(e.length){var n=ti.identity(EO);e.forEach(function(r){var i=r.t,s=r.d;if(i==="scale"){var l=(s==null?void 0:s.map(function(N){return Math.max(N.value,v_)}))||[1,1];ti.fromScaling($c,[l[0],l[1],1])}else if(i==="scalex"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,v_)}))||[1];ti.fromScaling($c,[l[0],1,1])}else if(i==="scaley"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,v_)}))||[1];ti.fromScaling($c,[1,l[0],1])}else if(i==="scalez"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,v_)}))||[1];ti.fromScaling($c,[1,1,l[0]])}else if(i==="scale3d"){var l=(s==null?void 0:s.map(function(z){return Math.max(z.value,v_)}))||[1,1,1];ti.fromScaling($c,[l[0],l[1],l[2]])}else if(i==="translate"){var c=s||[Iu,Iu];ti.fromTranslation($c,[c[0].value,c[1].value,0])}else if(i==="translatex"){var c=s||[Iu];ti.fromTranslation($c,[c[0].value,0,0])}else if(i==="translatey"){var c=s||[Iu];ti.fromTranslation($c,[0,c[0].value,0])}else if(i==="translatez"){var c=s||[Iu];ti.fromTranslation($c,[0,0,c[0].value])}else if(i==="translate3d"){var c=s||[Iu,Iu,Iu];ti.fromTranslation($c,[c[0].value,c[1].value,c[2].value])}else if(i==="rotate"){var h=s||[Op];ti.fromZRotation($c,yl(Hd(h[0])))}else if(i==="rotatex"){var h=s||[Op];ti.fromXRotation($c,yl(Hd(h[0])))}else if(i==="rotatey"){var h=s||[Op];ti.fromYRotation($c,yl(Hd(h[0])))}else if(i==="rotatez"){var h=s||[Op];ti.fromZRotation($c,yl(Hd(h[0])))}else if(i==="rotate3d"){var h=s||[Iu,Iu,Iu,Op];ti.fromRotation($c,yl(Hd(h[3])),[h[0].value,h[1].value,h[2].value])}else if(i==="skew"){var p=(s==null?void 0:s.map(function(N){return N.value}))||[0,0];Gx($c,yl(p[0]),yl(p[1]))}else if(i==="skewx"){var p=(s==null?void 0:s.map(function(z){return z.value}))||[0];Gx($c,yl(p[0]),0)}else if(i==="skewy"){var p=(s==null?void 0:s.map(function(z){return z.value}))||[0];Gx($c,0,yl(p[0]))}else if(i==="matrix"){var v=(0,ae.CR)(s.map(function(N){return N.value}),6),y=v[0],b=v[1],T=v[2],M=v[3],R=v[4],I=v[5];ti.set($c,y,b,0,0,T,M,0,0,0,0,1,0,R,I,0,1)}else i==="matrix3d"&&ti.set.apply(ti,(0,ae.ev)([$c],(0,ae.CR)(s.map(function(N){return N.value})),!1));ti.mul(n,n,$c)}),t.setLocalTransform(n)}else t.resetLocalTransform();return t.getLocalTransform()}var Wx=function(){function e(){this.parser=Dx,this.parserUnmemoize=I1,this.parserWithCSSDisabled=I1,this.mixer=jC}return e.prototype.calculator=function(t,n,r,i){return r instanceof Yc?[]:r},e.prototype.postProcessor=function(t){var n=t.parsedStyle.transform;PS(n,t)},e}(),SO=function(){function e(){this.parser=_S,this.parserUnmemoize=VC}return e.prototype.postProcessor=function(t){var n=t.parsedStyle.transformOrigin;n[0].unit===So.kPixels&&n[1].unit===So.kPixels?t.setOrigin(n[0].value,n[1].value):t.getGeometryBounds()},e}(),wO=function(){function e(){this.parser=Vm,this.parserUnmemoize=Bg}return e.prototype.calculator=function(t,n,r,i){return r.value},e.prototype.postProcessor=function(t){if(t.parentNode){var n=t.parentNode,r=n.renderable,i=n.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=pv.Z_INDEX_CHANGED)}},e}(),TO=function(){function e(){}return e.prototype.update=function(t,n){var r=t.cx,i=r===void 0?0:r,s=t.cy,l=s===void 0?0:s,c=t.r,h=c===void 0?0:c;return{cx:i,cy:l,hwidth:h,hheight:h}},e}(),AO=function(){function e(){}return e.prototype.update=function(t,n){var r=t.cx,i=r===void 0?0:r,s=t.cy,l=s===void 0?0:s,c=t.rx,h=c===void 0?0:c,p=t.ry,v=p===void 0?0:p;return{cx:i,cy:l,hwidth:h,hheight:v}},e}(),CO=function(){function e(){}return e.prototype.update=function(t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2,l=Math.min(n,i),c=Math.max(n,i),h=Math.min(r,s),p=Math.max(r,s),v=c-l,y=p-h,b=v/2,T=y/2;return{cx:l+b,cy:h+T,hwidth:b,hheight:T}},e}(),OO=function(){function e(){}return e.prototype.update=function(t){var n=t.d,r=n.rect,i=r.x,s=r.y,l=r.width,c=r.height,h=l/2,p=c/2;return{cx:i+h,cy:s+p,hwidth:h,hheight:p}},e}(),L1=function(){function e(){}return e.prototype.update=function(t){if(t.points&&Ho(t.points.points)){var n=t.points.points,r=Math.min.apply(Math,(0,ae.ev)([],(0,ae.CR)(n.map(function(y){return y[0]})),!1)),i=Math.max.apply(Math,(0,ae.ev)([],(0,ae.CR)(n.map(function(y){return y[0]})),!1)),s=Math.min.apply(Math,(0,ae.ev)([],(0,ae.CR)(n.map(function(y){return y[1]})),!1)),l=Math.max.apply(Math,(0,ae.ev)([],(0,ae.CR)(n.map(function(y){return y[1]})),!1)),c=i-r,h=l-s,p=c/2,v=h/2;return{cx:r+p,cy:s+v,hwidth:p,hheight:v}}return{cx:0,cy:0,hwidth:0,hheight:0}},e}(),MO=function(){function e(){}return e.prototype.update=function(t,n){var r=t.x,i=r===void 0?0:r,s=t.y,l=s===void 0?0:s,c=t.src,h=t.width,p=h===void 0?0:h,v=t.height,y=v===void 0?0:v,b=p,T=y;return c&&!u(c)&&(b||(b=c.width,t.width=b),T||(T=c.height,t.height=T)),{cx:i+b/2,cy:l+T/2,hwidth:b/2,hheight:T/2}},e}(),RO=function(){function e(t){this.globalRuntime=t}return e.prototype.isReadyToMeasure=function(t,n){var r=t.text,i=t.textAlign,s=t.textBaseline,l=t.fontSize,c=t.fontStyle,h=t.fontWeight,p=t.fontVariant,v=t.lineWidth;return Ar.enableCSSParsing?r&&l&&c&&h&&p&&i&&s&&!(0,ya.Z)(v):r},e.prototype.update=function(t,n){var r,i,s=t.text,l=t.textAlign,c=l===void 0?"start":l,h=t.lineWidth,p=h===void 0?1:h,v=t.textBaseline,y=v===void 0?"alphabetic":v,b=t.dx,T=b===void 0?0:b,M=t.dy,R=M===void 0?0:M,I=t.x,N=I===void 0?0:I,z=t.y,H=z===void 0?0:z;if(!this.isReadyToMeasure(t,n))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var X=(((i=(r=n==null?void 0:n.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,Y=this.globalRuntime.textService.measureText(s,t,X);t.metrics=Y;var ne=Y.width,pe=Y.height,ye=Y.lineHeight,De=Y.fontProperties,Xe=ne/2,Ke=pe/2,mt=N+Xe;c==="center"||c==="middle"?mt+=p/2-Xe:(c==="right"||c==="end")&&(mt+=p-Xe*2);var Qe=H-Ke;return y==="middle"?Qe+=Ke:y==="top"||y==="hanging"?Qe+=Ke*2:y==="alphabetic"?Qe+=this.globalRuntime.enableCSSParsing?ye-De.ascent:0:(y==="bottom"||y==="ideographic")&&(Qe+=0),T&&(mt+=T),R&&(Qe+=R),{cx:mt,cy:Qe,hwidth:Xe,hheight:Ke}},e}(),PO=function(){function e(){}return e.prototype.update=function(t,n){return{cx:0,cy:0,hwidth:0,hheight:0}},e}();function IO(e){return!!e.type}var Zx=function(){function e(t){this.eventPhase=e.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new mc,this.page=new mc,this.canvas=new mc,this.viewport=new mc,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(e.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},e.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.initEvent=function(){},e.prototype.initUIEvent=function(){},e.prototype.clone=function(){throw new Error(Co)},e}(),DO=function(e){(0,ae.ZT)(t,e);function t(){var n=e.apply(this,(0,ae.ev)([],(0,ae.CR)(arguments),!1))||this;return n.client=new mc,n.movement=new mc,n.offset=new mc,n.global=new mc,n.screen=new mc,n}return Object.defineProperty(t.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),t.prototype.getModifierState=function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)},t.prototype.initMouseEvent=function(){throw new Error(Co)},t}(Zx),Xx=function(e){(0,ae.ZT)(t,e);function t(){var n=e.apply(this,(0,ae.ev)([],(0,ae.CR)(arguments),!1))||this;return n.width=0,n.height=0,n.isPrimary=!1,n}return t.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},t.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},t.prototype.clone=function(){return this.manager.clonePointerEvent(this)},t}(DO),Yx=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},t}(DO),Jl=function(e){(0,ae.ZT)(t,e);function t(n,r){var i=e.call(this,null)||this;return i.type=n,i.detail=r,Object.assign(i,r),i}return t}(Zx),IS=":",DS=function(){function e(){this.emitter=new ml}return e.prototype.on=function(t,n,r){return this.addEventListener(t,n,r),this},e.prototype.addEventListener=function(t,n,r){var i=zd(r)&&r||al(r)&&r.capture,s=al(r)&&r.once,l=Kv(n)?void 0:n,c=!1,h="";if(t.indexOf(IS)>-1){var p=(0,ae.CR)(t.split(IS),2),v=p[0],y=p[1];t=y,h=v,c=!0}if(t=i?"".concat(t,"capture"):t,n=Kv(n)?n:n.handleEvent,c){var b=n;n=function(){for(var T,M=[],R=0;R<arguments.length;R++)M[R]=arguments[R];((T=M[0].target)===null||T===void 0?void 0:T.name)===h&&b.apply(void 0,(0,ae.ev)([],(0,ae.CR)(M),!1))}}return s?this.emitter.once(t,n,l):this.emitter.on(t,n,l),this},e.prototype.off=function(t,n,r){return t?this.removeEventListener(t,n,r):this.removeAllEventListeners(),this},e.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},e.prototype.removeEventListener=function(t,n,r){var i=zd(r)&&r||al(r)&&r.capture,s=Kv(n)?void 0:n;return t=i?"".concat(t,"capture"):t,n=Kv(n)?n:n==null?void 0:n.handleEvent,this.emitter.off(t,n,s),this},e.prototype.emit=function(t,n){this.dispatchEvent(new Jl(t,n))},e.prototype.dispatchEvent=function(t,n){var r,i;if(n===void 0&&(n=!1),!IO(t))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var s;if(this.document?s=this:this.defaultView?s=this.defaultView:s=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,s){if(t.manager=s.getEventService()||null,!t.manager)return!1;t.defaultPrevented=!1,t.path=[],n||(t.target=this),(i=t.manager)===null||i===void 0||i.dispatchEvent(t,t.type,n)}return!t.defaultPrevented},e}(),Ff=function(e){(0,ae.ZT)(t,e);function t(){var n=e.call(this)||this;return n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return t.isNode=function(n){return!!n.childNodes},Object.defineProperty(t.prototype,"textContent",{get:function(){var n,r,i="";this.nodeName===ni.TEXT&&(i+=this.style.text);try{for(var s=(0,ae.XA)(this.childNodes),l=s.next();!l.done;l=s.next()){var c=l.value;c.nodeName===ni.TEXT?i+=c.nodeValue:i+=c.textContent}}catch(h){n={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},set:function(n){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===ni.TEXT&&(this.style.text="".concat(n))},enumerable:!1,configurable:!0}),t.prototype.getRootNode=function(n){return n===void 0&&(n={}),this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this},t.prototype.hasChildNodes=function(){return this.childNodes.length>0},t.prototype.isDefaultNamespace=function(n){throw new Error(Co)},t.prototype.lookupNamespaceURI=function(n){throw new Error(Co)},t.prototype.lookupPrefix=function(n){throw new Error(Co)},t.prototype.normalize=function(){throw new Error(Co)},t.prototype.isEqualNode=function(n){return this===n},t.prototype.isSameNode=function(n){return this.isEqualNode(n)},Object.defineProperty(t.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),t.prototype.compareDocumentPosition=function(n){var r;if(n===this)return 0;for(var i=n,s=this,l=[i],c=[s];(r=i.parentNode)!==null&&r!==void 0?r:s.parentNode;)i=i.parentNode?(l.push(i.parentNode),i.parentNode):i,s=s.parentNode?(c.push(s.parentNode),s.parentNode):s;if(i!==s)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var h=l.length>c.length?l:c,p=h===l?c:l;if(h[h.length-p.length]===p[0])return h===l?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var v=h.length-p.length,y=p.length-1;y>=0;y--){var b=p[y],T=h[v+y];if(T!==b){var M=b.parentNode.childNodes;return M.indexOf(b)<M.indexOf(T)?p===l?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING:h===l?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING}}return t.DOCUMENT_POSITION_FOLLOWING},t.prototype.contain=function(n){return this.contains(n)},t.prototype.contains=function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r},t.prototype.getAncestor=function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r},t.prototype.forEach=function(n,r){r===void 0&&(r=!1),n(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(n)})},t.DOCUMENT_POSITION_DISCONNECTED=1,t.DOCUMENT_POSITION_PRECEDING=2,t.DOCUMENT_POSITION_FOLLOWING=4,t.DOCUMENT_POSITION_CONTAINS=8,t.DOCUMENT_POSITION_CONTAINED_BY=16,t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,t}(DS),LO=2048,NO=function(){function e(t,n){var r=this;this.globalRuntime=t,this.context=n,this.emitter=new ml,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=ti.create(),this.tmpVec3=cr.Ue(),this.onPointerDown=function(i){var s=r.createPointerEvent(i);if(r.dispatchEvent(s,"pointerdown"),s.pointerType==="touch")r.dispatchEvent(s,"touchstart");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;r.dispatchEvent(s,l?"rightdown":"mousedown")}var c=r.trackingData(i.pointerId);c.pressTargetsByButton[i.button]=s.composedPath(),r.freeEvent(s)},this.onPointerUp=function(i){var s,l=mv.now(),c=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(c,"pointerup"),c.pointerType==="touch")r.dispatchEvent(c,"touchend");else if(c.pointerType==="mouse"||c.pointerType==="pen"){var h=c.button===2;r.dispatchEvent(c,h?"rightup":"mouseup")}var p=r.trackingData(i.pointerId),v=r.findMountedTarget(p.pressTargetsByButton[i.button]),y=v;if(v&&!c.composedPath().includes(v)){for(var b=v;b&&!c.composedPath().includes(b);){if(c.currentTarget=b,r.notifyTarget(c,"pointerupoutside"),c.pointerType==="touch")r.notifyTarget(c,"touchendoutside");else if(c.pointerType==="mouse"||c.pointerType==="pen"){var h=c.button===2;r.notifyTarget(c,h?"rightupoutside":"mouseupoutside")}Ff.isNode(b)&&(b=b.parentNode)}delete p.pressTargetsByButton[i.button],y=b}if(y){var T=r.clonePointerEvent(c,"click");T.target=y,T.path=[],p.clicksByButton[i.button]||(p.clicksByButton[i.button]={clickCount:0,target:T.target,timeStamp:l});var M=p.clicksByButton[i.button];M.target===T.target&&l-M.timeStamp<200?++M.clickCount:M.clickCount=1,M.target=T.target,M.timeStamp=l,T.detail=M.clickCount,!((s=c.detail)===null||s===void 0)&&s.preventClick||(!r.context.config.useNativeClickEvent&&(T.pointerType==="mouse"||T.pointerType==="touch")&&r.dispatchEvent(T,"click"),r.dispatchEvent(T,"pointertap")),r.freeEvent(T)}r.freeEvent(c)},this.onPointerMove=function(i){var s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),l=s.pointerType==="mouse"||s.pointerType==="pen",c=r.trackingData(i.pointerId),h=r.findMountedTarget(c.overTargets);if(c.overTargets&&h!==s.target){var p=i.type==="mousemove"?"mouseout":"pointerout",v=r.createPointerEvent(i,p,h||void 0);if(r.dispatchEvent(v,"pointerout"),l&&r.dispatchEvent(v,"mouseout"),!s.composedPath().includes(h)){var y=r.createPointerEvent(i,"pointerleave",h||void 0);for(y.eventPhase=y.AT_TARGET;y.target&&!s.composedPath().includes(y.target);)y.currentTarget=y.target,r.notifyTarget(y),l&&r.notifyTarget(y,"mouseleave"),Ff.isNode(y.target)&&(y.target=y.target.parentNode);r.freeEvent(y)}r.freeEvent(v)}if(h!==s.target){var b=i.type==="mousemove"?"mouseover":"pointerover",T=r.clonePointerEvent(s,b);r.dispatchEvent(T,"pointerover"),l&&r.dispatchEvent(T,"mouseover");for(var M=h&&Ff.isNode(h)&&h.parentNode;M&&M!==(Ff.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&M!==s.target;)M=M.parentNode;var R=!M||M===(Ff.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(R){var I=r.clonePointerEvent(s,"pointerenter");for(I.eventPhase=I.AT_TARGET;I.target&&I.target!==h&&I.target!==(Ff.isNode(r.rootTarget)&&r.rootTarget.parentNode);)I.currentTarget=I.target,r.notifyTarget(I),l&&r.notifyTarget(I,"mouseenter"),Ff.isNode(I.target)&&(I.target=I.target.parentNode);r.freeEvent(I)}r.freeEvent(T)}r.dispatchEvent(s,"pointermove"),s.pointerType==="touch"&&r.dispatchEvent(s,"touchmove"),l&&(r.dispatchEvent(s,"mousemove"),r.cursor=r.getCursor(s.target)),c.overTargets=s.composedPath(),r.freeEvent(s)},this.onPointerOut=function(i){var s=r.trackingData(i.pointerId);if(s.overTargets){var l=i.pointerType==="mouse"||i.pointerType==="pen",c=r.findMountedTarget(s.overTargets),h=r.createPointerEvent(i,"pointerout",c||void 0);r.dispatchEvent(h),l&&r.dispatchEvent(h,"mouseout");var p=r.createPointerEvent(i,"pointerleave",c||void 0);for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==(Ff.isNode(r.rootTarget)&&r.rootTarget.parentNode);)p.currentTarget=p.target,r.notifyTarget(p),l&&r.notifyTarget(p,"mouseleave"),Ff.isNode(p.target)&&(p.target=p.target.parentNode);s.overTargets=null,r.freeEvent(h),r.freeEvent(p)}r.cursor=null},this.onPointerOver=function(i){var s=r.trackingData(i.pointerId),l=r.createPointerEvent(i),c=l.pointerType==="mouse"||l.pointerType==="pen";r.dispatchEvent(l,"pointerover"),c&&r.dispatchEvent(l,"mouseover"),l.pointerType==="mouse"&&(r.cursor=r.getCursor(l.target));var h=r.clonePointerEvent(l,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==(Ff.isNode(r.rootTarget)&&r.rootTarget.parentNode);)h.currentTarget=h.target,r.notifyTarget(h),c&&r.notifyTarget(h,"mouseenter"),Ff.isNode(h.target)&&(h.target=h.target.parentNode);s.overTargets=l.composedPath(),r.freeEvent(l),r.freeEvent(h)},this.onPointerUpOutside=function(i){var s=r.trackingData(i.pointerId),l=r.findMountedTarget(s.pressTargetsByButton[i.button]),c=r.createPointerEvent(i);if(l){for(var h=l;h;)c.currentTarget=h,r.notifyTarget(c,"pointerupoutside"),c.pointerType==="touch"||(c.pointerType==="mouse"||c.pointerType==="pen")&&r.notifyTarget(c,c.button===2?"rightupoutside":"mouseupoutside"),Ff.isNode(h)&&(h=h.parentNode);delete s.pressTargetsByButton[i.button]}r.freeEvent(c)},this.onWheel=function(i){var s=r.createWheelEvent(i);r.dispatchEvent(s),r.freeEvent(s)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var s=r.createPointerEvent(i);r.dispatchEvent(s),r.freeEvent(s)}},this.onPointerCancel=function(i){var s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(s),r.freeEvent(s)}}return e.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},e.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},e.prototype.client2Viewport=function(t){var n=this.context.contextService.getBoundingClientRect();return new mc(t.x-((n==null?void 0:n.left)||0),t.y-((n==null?void 0:n.top)||0))},e.prototype.viewport2Client=function(t){var n=this.context.contextService.getBoundingClientRect();return new mc(t.x+((n==null?void 0:n.left)||0),t.y+((n==null?void 0:n.top)||0))},e.prototype.viewport2Canvas=function(t){var n=t.x,r=t.y,i=this.rootTarget.defaultView,s=i.getCamera(),l=this.context.config,c=l.width,h=l.height,p=s.getPerspectiveInverse(),v=s.getWorldTransform(),y=ti.multiply(this.tmpMatrix,v,p),b=cr.t8(this.tmpVec3,n/c*2-1,(1-r/h)*2-1,0);return cr.fF(b,b,y),new mc(b[0],b[1])},e.prototype.canvas2Viewport=function(t){var n=this.rootTarget.defaultView,r=n.getCamera(),i=r.getPerspective(),s=r.getViewTransform(),l=ti.multiply(this.tmpMatrix,i,s),c=cr.t8(this.tmpVec3,t.x,t.y,0);cr.fF(this.tmpVec3,this.tmpVec3,l);var h=this.context.config,p=h.width,v=h.height;return new mc((c[0]+1)/2*p,(1-(c[1]+1)/2)*v)},e.prototype.setPickHandler=function(t){this.pickHandler=t},e.prototype.addEventMapping=function(t,n){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:n,priority:0}),this.mappingTable[t].sort(function(r,i){return r.priority-i.priority})},e.prototype.mapEvent=function(t){if(this.rootTarget){var n=this.mappingTable[t.type];if(n)for(var r=0,i=n.length;r<i;r++)n[r].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}},e.prototype.dispatchEvent=function(t,n,r){if(!r)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,n);else{t.eventPhase=t.AT_TARGET;var i=this.rootTarget.defaultView||null;t.currentTarget=i,this.notifyListeners(t,n)}this.emitter.emit(n||t.type,t)},e.prototype.propagate=function(t,n){if(t.target){var r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,n),!(t.propagationStopped||t.propagationImmediatelyStopped)){var s=r.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var i=s+1;i<r.length;i++)if(t.currentTarget=r[i],this.notifyTarget(t,n),t.propagationStopped||t.propagationImmediatelyStopped)return}}},e.prototype.propagationPath=function(t){var n=[t],r=this.rootTarget.defaultView||null;if(r&&r===t)return n.unshift(r.document),n;for(var i=0;i<LO&&t!==this.rootTarget;i++)Ff.isNode(t)&&t.parentNode&&(n.push(t.parentNode),t=t.parentNode);return r&&n.push(r),n},e.prototype.hitTest=function(t){var n=t.viewportX,r=t.viewportY,i=this.context.config,s=i.width,l=i.height,c=i.disableHitTesting;return n<0||r<0||n>s||r>l?null:!c&&this.pickHandler(t)||this.rootTarget||null},e.prototype.isNativeEventFromCanvas=function(t,n){var r=n==null?void 0:n.target;if(r!=null&&r.shadowRoot&&(r=n.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return n!=null&&n.composedPath?n.composedPath().indexOf(t)>-1:!1},e.prototype.getExistedHTML=function(t){var n,r;if(t.nativeEvent.composedPath)try{for(var i=(0,ae.XA)(t.nativeEvent.composedPath()),s=i.next();!s.done;s=i.next()){var l=s.value,c=this.nativeHTMLMap.get(l);if(c)return c}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},e.prototype.pickTarget=function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})},e.prototype.createPointerEvent=function(t,n,r,i){var s=this.allocateEvent(Xx);this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t;var l=this.getExistedHTML(s),c=this.context.contextService.getDomElement();return s.target=r!=null?r:l||this.isNativeEventFromCanvas(c,s.nativeEvent)&&this.pickTarget(s)||i,typeof n=="string"&&(s.type=n),s},e.prototype.createWheelEvent=function(t){var n=this.allocateEvent(Yx);this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t;var r=this.getExistedHTML(n),i=this.context.contextService.getDomElement();return n.target=r||this.isNativeEventFromCanvas(i,n.nativeEvent)&&this.pickTarget(n),n},e.prototype.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},e.prototype.cloneWheelEvent=function(t){var n=this.allocateEvent(Yx);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=t.type,n},e.prototype.clonePointerEvent=function(t,n){var r=this.allocateEvent(Xx);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=n!=null?n:r.type,r},e.prototype.copyPointerData=function(t,n){n.pointerId=t.pointerId,n.width=t.width,n.height=t.height,n.isPrimary=t.isPrimary,n.pointerType=t.pointerType,n.pressure=t.pressure,n.tangentialPressure=t.tangentialPressure,n.tiltX=t.tiltX,n.tiltY=t.tiltY,n.twist=t.twist},e.prototype.copyMouseData=function(t,n){n.altKey=t.altKey,n.button=t.button,n.buttons=t.buttons,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.client.copyFrom(t.client),n.movement.copyFrom(t.movement),n.canvas.copyFrom(t.canvas),n.screen.copyFrom(t.screen),n.global.copyFrom(t.global),n.offset.copyFrom(t.offset)},e.prototype.copyWheelData=function(t,n){n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ},e.prototype.copyData=function(t,n){n.isTrusted=t.isTrusted,n.timeStamp=mv.now(),n.type=t.type,n.detail=t.detail,n.view=t.view,n.page.copyFrom(t.page),n.viewport.copyFrom(t.viewport)},e.prototype.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var n=this.eventPool.get(t).pop()||new t(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n},e.prototype.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=t.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(t)},e.prototype.notifyTarget=function(t,n){n=n!=null?n:t.type;var r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,n)},e.prototype.notifyListeners=function(t,n){var r=t.currentTarget.emitter,i=r._events[n];if(i)if("fn"in i)i.once&&r.removeListener(n,i.fn,void 0,!0),i.fn.call(t.currentTarget||i.context,t);else for(var s=0;s<i.length&&!t.propagationImmediatelyStopped;s++)i[s].once&&r.removeListener(n,i[s].fn,void 0,!0),i[s].fn.call(t.currentTarget||i[s].context,t)},e.prototype.findMountedTarget=function(t){if(!t)return null;for(var n=t[t.length-1],r=t.length-2;r>=0;r--){var i=t[r];if(i===this.rootTarget||Ff.isNode(i)&&i.parentNode===n)n=t[r];else break}return n},e.prototype.getCursor=function(t){for(var n=t;n;){var r=rO(n)&&n.getAttribute("cursor");if(r)return r;n=Ff.isNode(n)&&n.parentNode}},e}(),LS=function(){function e(){}return e.prototype.getOrCreateCanvas=function(t,n){if(this.canvas)return this.canvas;if(t||Ar.offscreenCanvas)this.canvas=t||Ar.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,ae.pi)({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,ae.pi)({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,ae.pi)({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas},e.prototype.getOrCreateContext=function(t,n){return this.context?this.context:(this.getOrCreateCanvas(t,n),this.context)},e}(),D0;(function(e){e[e.CAMERA_CHANGED=0]="CAMERA_CHANGED",e[e.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",e[e.NONE=2]="NONE"})(D0||(D0={}));var FO=function(){function e(t,n){this.globalRuntime=t,this.context=n,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new Ph,initAsync:new yO,dirtycheck:new Hx,cull:new Hx,beginFrame:new Ph,beforeRender:new Ph,render:new Ph,afterRender:new Ph,endFrame:new Ph,destroy:new Ph,pick:new RS,pickSync:new Hx,pointerDown:new Ph,pointerUp:new Ph,pointerMove:new Ph,pointerOut:new Ph,pointerOver:new Ph,pointerWheel:new Ph,pointerCancel:new Ph,click:new Ph}}return e.prototype.init=function(t){var n=this,r=(0,ae.pi)((0,ae.pi)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){n.inited=!0,t()})},e.prototype.getStats=function(){return this.stats},e.prototype.disableDirtyRectangleRendering=function(){var t=this.context.config.renderer,n=t.getConfig().enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(D0.CAMERA_CHANGED)},e.prototype.render=function(t,n,r){var i=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var s=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(s.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),s.renderReasons.size&&this.inited){s.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var l=s.renderReasons.size===1&&s.renderReasons.has(D0.CAMERA_CHANGED),c=!t.disableRenderHooks||!(t.disableRenderHooks&&l);c&&this.renderDisplayObject(s.root,t,s),this.hooks.beginFrame.call(n),c&&s.renderListCurrentFrame.forEach(function(h){i.hooks.beforeRender.call(h),i.hooks.render.call(h),i.hooks.afterRender.call(h)}),this.hooks.endFrame.call(n),s.renderListCurrentFrame=[],s.renderReasons.clear(),r()}},e.prototype.renderDisplayObject=function(t,n,r){var i=this,s=n.renderer.getConfig(),l=s.enableDirtyCheck,c=s.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(t);var h=t.renderable,p=l?h.dirty||r.dirtyRectangleRenderingDisabled?t:null:t;if(p){var v=c?this.hooks.cull.call(p,this.context.camera):p;v&&(this.stats.rendered++,r.renderListCurrentFrame.push(v))}t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var y=t.sortable;y.dirty&&(this.sort(t,y),y.dirty=!1,y.dirtyChildren=[],y.dirtyReason=void 0),(y.sorted||t.childNodes).forEach(function(b){i.renderDisplayObject(b,n,r)})},e.prototype.sort=function(t,n){n.sorted&&n.dirtyReason!==pv.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(r){var i=t.childNodes.indexOf(r);if(i===-1){var s=n.sorted.indexOf(r);s>=0&&n.sorted.splice(s,1)}else if(n.sorted.length===0)n.sorted.push(r);else{var l=iO(n.sorted,r);n.sorted.splice(l,0,r)}}):n.sorted=t.childNodes.slice().sort(SS)},e.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},e.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(D0.DISPLAY_OBJECT_CHANGED)},e}(),BO=/\[\s*(.*)=(.*)\s*\]/,NS=function(){function e(){}return e.prototype.selectOne=function(t,n){var r=this;if(t.startsWith("."))return n.find(function(c){return((c==null?void 0:c.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.find(function(c){return c.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),s=i.name,l=i.value;return s?n.find(function(c){return n!==c&&(s==="name"?c.name===l:r.attributeToString(c,s)===l)}):null}else return n.find(function(c){return n!==c&&c.nodeName===t})},e.prototype.selectAll=function(t,n){var r=this;if(t.startsWith("."))return n.findAll(function(c){return n!==c&&((c==null?void 0:c.classList)||[]).indexOf(r.getIdOrClassname(t))>-1});if(t.startsWith("#"))return n.findAll(function(c){return n!==c&&c.id===r.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),s=i.name,l=i.value;return s?n.findAll(function(c){return n!==c&&(s==="name"?c.name===l:r.attributeToString(c,s)===l)}):[]}else return n.findAll(function(c){return n!==c&&c.nodeName===t})},e.prototype.is=function(t,n){if(t.startsWith("."))return n.className===this.getIdOrClassname(t);if(t.startsWith("#"))return n.id===this.getIdOrClassname(t);if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,s=r.value;return i==="name"?n.name===s:this.attributeToString(n,i)===s}else return n.nodeName===t},e.prototype.getIdOrClassname=function(t){return t.substring(1)},e.prototype.getAttribute=function(t){var n=t.match(BO),r="",i="";return n&&n.length>2&&(r=n[1].replace(/"/g,""),i=n[2].replace(/"/g,"")),{name:r,value:i}},e.prototype.attributeToString=function(t,n){if(!t.getAttribute)return"";var r=t.getAttribute(n);return(0,ya.Z)(r)?"":r.toString?r.toString():""},e}(),gv=function(e){(0,ae.ZT)(t,e);function t(n,r,i,s,l,c,h,p){var v=e.call(this,null)||this;return v.relatedNode=r,v.prevValue=i,v.newValue=s,v.attrName=l,v.attrChange=c,v.prevParsedValue=h,v.newParsedValue=p,v.type=n,v}return t.ADDITION=2,t.MODIFICATION=1,t.REMOVAL=3,t}(Zx),ka;(function(e){e.REPARENT="reparent",e.DESTROY="destroy",e.ATTR_MODIFIED="DOMAttrModified",e.INSERTED="DOMNodeInserted",e.REMOVED="removed",e.MOUNTED="DOMNodeInsertedIntoDocument",e.UNMOUNTED="DOMNodeRemovedFromDocument",e.BOUNDS_CHANGED="bounds-changed",e.CULLED="culled"})(ka||(ka={}));function FS(e){var t=e.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0)}var BS=new gv(ka.REPARENT,null,"","","",0,"",""),N1=function(){function e(t){var n=this;this.runtime=t,this.pendingEvents=[],this.boundsChangedEvent=new Jl(ka.BOUNDS_CHANGED),this.rotate=function(){var r=to();return function(i,s,l,c,h){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=!0),typeof s=="number"&&(s=cr.al(s,l,c));var p=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.rotateLocal(i,s);else{var v=to();Tg(v,s[0],s[1],s[2]);var y=n.getRotation(i),b=n.getRotation(i.parentNode);kd(r,b),A0(r,r),Oc(v,r,v),Oc(p.localRotation,v,y),jv(p.localRotation,p.localRotation),h&&n.dirtifyLocal(i,p)}}}(),this.rotateLocal=function(){var r=to();return function(i,s,l,c,h){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=!0),typeof s=="number"&&(s=cr.al(s,l,c));var p=i.transformable;Tg(r,s[0],s[1],s[2]),By(p.localRotation,p.localRotation,r),h&&n.dirtifyLocal(i,p)}}(),this.setEulerAngles=function(){var r=to();return function(i,s,l,c,h){l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=!0),typeof s=="number"&&(s=cr.al(s,l,c));var p=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.setLocalEulerAngles(i,s);else{Tg(p.localRotation,s[0],s[1],s[2]);var v=n.getRotation(i.parentNode);kd(r,A0(to(),v)),By(p.localRotation,p.localRotation,r),h&&n.dirtifyLocal(i,p)}}}(),this.translateLocal=function(){return function(r,i,s,l,c){s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=!0),typeof i=="number"&&(i=cr.al(i,s,l));var h=r.transformable;cr.fS(i,cr.Ue())||(cr.VC(i,i,h.localRotation),cr.IH(h.localPosition,h.localPosition,i),c&&n.dirtifyLocal(r,h))}}(),this.setPosition=function(){var r=ti.create(),i=cr.Ue();return function(s,l,c){c===void 0&&(c=!0);var h=s.transformable;if(i[0]=l[0],i[1]=l[1],i[2]=l[2]||0,!cr.fS(n.getPosition(s),i)){if(cr.JG(h.position,i),s.parentNode===null||!s.parentNode.transformable)cr.JG(h.localPosition,i);else{var p=s.parentNode.transformable;ti.copy(r,p.worldTransform),ti.invert(r,r),cr.fF(h.localPosition,i,r)}c&&n.dirtifyLocal(s,h)}}}(),this.setLocalPosition=function(){var r=cr.Ue();return function(i,s,l){l===void 0&&(l=!0);var c=i.transformable;r[0]=s[0],r[1]=s[1],r[2]=s[2]||0,!cr.fS(c.localPosition,r)&&(cr.JG(c.localPosition,r),l&&n.dirtifyLocal(i,c))}}(),this.translate=function(){var r=cr.Ue(),i=cr.Ue(),s=cr.Ue();return function(l,c,h,p,v){h===void 0&&(h=0),p===void 0&&(p=0),v===void 0&&(v=!0),typeof c=="number"&&(c=cr.t8(i,c,h,p)),!cr.fS(c,r)&&(cr.IH(s,n.getPosition(l),c),n.setPosition(l,s,v))}}(),this.setRotation=function(){var r=to();return function(i,s,l,c,h,p){p===void 0&&(p=!0);var v=i.transformable;if(typeof s=="number"&&(s=Fy(s,l,c,h)),i.parentNode===null||!i.parentNode.transformable)n.setLocalRotation(i,s);else{var y=n.getRotation(i.parentNode);kd(r,y),A0(r,r),Oc(v.localRotation,r,s),jv(v.localRotation,v.localRotation),p&&n.dirtifyLocal(i,v)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=ti.create(),i=cr.Ue(),s=Fy(0,0,0,1);return function(l){var c=l.localSkew[0]!==0||l.localSkew[1]!==0;if(c){if(ti.fromRotationTranslationScaleOrigin(l.localTransform,l.localRotation,l.localPosition,cr.al(1,1,1),l.origin),l.localSkew[0]!==0||l.localSkew[1]!==0){var h=ti.identity(r);h[4]=Math.tan(l.localSkew[0]),h[1]=Math.tan(l.localSkew[1]),ti.multiply(l.localTransform,l.localTransform,h)}var p=ti.fromRotationTranslationScaleOrigin(r,s,i,l.localScale,l.origin);ti.multiply(l.localTransform,l.localTransform,p)}else ti.fromRotationTranslationScaleOrigin(l.localTransform,l.localRotation,l.localPosition,l.localScale,l.origin)}}()}return e.prototype.matches=function(t,n){return this.runtime.sceneGraphSelector.is(t,n)},e.prototype.querySelector=function(t,n){return this.runtime.sceneGraphSelector.selectOne(t,n)},e.prototype.querySelectorAll=function(t,n){return this.runtime.sceneGraphSelector.selectAll(t,n)},e.prototype.attach=function(t,n,r){var i,s=!1;t.parentNode&&(s=t.parentNode!==n,this.detach(t)),t.parentNode=n,(0,ya.Z)(r)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(r,0,t);var l=n.sortable;(!((i=l==null?void 0:l.sorted)===null||i===void 0)&&i.length||t.parsedStyle.zIndex)&&(l.dirtyChildren.indexOf(t)===-1&&l.dirtyChildren.push(t),l.dirty=!0,l.dirtyReason=pv.ADDED);var c=t.transformable;c&&this.dirtifyWorld(t,c),c.frozen&&this.unfreezeParentToRoot(t),s&&t.dispatchEvent(BS)},e.prototype.detach=function(t){var n,r;if(t.parentNode){var i=t.transformable,s=t.parentNode.sortable;(!((n=s==null?void 0:s.sorted)===null||n===void 0)&&n.length||!((r=t.style)===null||r===void 0)&&r.zIndex)&&(s.dirtyChildren.indexOf(t)===-1&&s.dirtyChildren.push(t),s.dirty=!0,s.dirtyReason=pv.REMOVED);var l=t.parentNode.childNodes.indexOf(t);l>-1&&t.parentNode.childNodes.splice(l,1),i&&this.dirtifyWorld(t,i),t.parentNode=null}},e.prototype.getOrigin=function(t){return t.getGeometryBounds(),t.transformable.origin},e.prototype.setOrigin=function(t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=[n,r,i]);var s=t.transformable;if(!(n[0]===s.origin[0]&&n[1]===s.origin[1]&&n[2]===s.origin[2])){var l=s.origin;l[0]=n[0],l[1]=n[1],l[2]=n[2]||0,this.dirtifyLocal(t,s)}},e.prototype.setLocalEulerAngles=function(t,n,r,i,s){r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=!0),typeof n=="number"&&(n=cr.al(n,r,i));var l=t.transformable;Tg(l.localRotation,n[0],n[1],n[2]),s&&this.dirtifyLocal(t,l)},e.prototype.scaleLocal=function(t,n,r){r===void 0&&(r=!0);var i=t.transformable;cr.Jp(i.localScale,i.localScale,cr.al(n[0],n[1],n[2]||1)),r&&this.dirtifyLocal(t,i)},e.prototype.setLocalScale=function(t,n,r){r===void 0&&(r=!0);var i=t.transformable,s=cr.al(n[0],n[1],n[2]||i.localScale[2]);cr.fS(s,i.localScale)||(cr.JG(i.localScale,s),r&&this.dirtifyLocal(t,i))},e.prototype.setLocalRotation=function(t,n,r,i,s,l){l===void 0&&(l=!0),typeof n=="number"&&(n=Fy(n,r,i,s));var c=t.transformable;kd(c.localRotation,n),l&&this.dirtifyLocal(t,c)},e.prototype.setLocalSkew=function(t,n,r){typeof n=="number"&&(n=Rm.al(n,r));var i=t.transformable;Rm.JG(i.localSkew,n),this.dirtifyLocal(t,i)},e.prototype.dirtifyLocal=function(t,n){n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtifyWorld(t,n))},e.prototype.dirtifyWorld=function(t,n){n.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,n),this.dirtifyToRoot(t,!0)},e.prototype.triggerPendingEvents=function(){var t=this,n=new Set,r=function(i,s){i.isConnected&&!n.has(i.entity)&&(t.boundsChangedEvent.detail=s,t.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(t.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),n.add(i.entity))};this.pendingEvents.forEach(function(i){var s=(0,ae.CR)(i,2),l=s[0],c=s[1];c.affectChildren?l.forEach(function(h){r(h,c)}):r(l,c)}),this.clearPendingEvents(),n.clear()},e.prototype.clearPendingEvents=function(){this.pendingEvents=[]},e.prototype.dirtifyToRoot=function(t,n){n===void 0&&(n=!1);var r=t;for(r.renderable&&(r.renderable.dirty=!0);r;)FS(r),r=r.parentNode;n&&t.forEach(function(i){FS(i)}),this.informDependentDisplayObjects(t),this.pendingEvents.push([t,{affectChildren:n}])},e.prototype.updateDisplayObjectDependency=function(t,n,r,i){if(n&&n!==r){var s=this.displayObjectDependencyMap.get(n);if(s&&s[t]){var l=s[t].indexOf(i);s[t].splice(l,1)}}if(r){var c=this.displayObjectDependencyMap.get(r);c||(this.displayObjectDependencyMap.set(r,{}),c=this.displayObjectDependencyMap.get(r)),c[t]||(c[t]=[]),c[t].push(i)}},e.prototype.informDependentDisplayObjects=function(t){var n=this,r=this.displayObjectDependencyMap.get(t);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(s){n.dirtifyToRoot(s,!0),s.dispatchEvent(new gv(ka.ATTR_MODIFIED,s,n,n,i,gv.MODIFICATION,n,n)),s.isCustomElement&&s.isConnected&&s.attributeChangedCallback&&s.attributeChangedCallback(i,n,n)})})},e.prototype.getPosition=function(t){var n=t.transformable;return ti.getTranslation(n.position,this.getWorldTransform(t,n))},e.prototype.getRotation=function(t){var n=t.transformable;return ti.getRotation(n.rotation,this.getWorldTransform(t,n))},e.prototype.getScale=function(t){var n=t.transformable;return ti.getScaling(n.scaling,this.getWorldTransform(t,n))},e.prototype.getWorldTransform=function(t,n){return n===void 0&&(n=t.transformable),!n.localDirtyFlag&&!n.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,n)),n.worldTransform},e.prototype.getLocalPosition=function(t){return t.transformable.localPosition},e.prototype.getLocalRotation=function(t){return t.transformable.localRotation},e.prototype.getLocalScale=function(t){return t.transformable.localScale},e.prototype.getLocalSkew=function(t){return t.transformable.localSkew},e.prototype.getLocalTransform=function(t){var n=t.transformable;return n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.localTransform},e.prototype.setLocalTransform=function(t,n){var r=ti.getTranslation(cr.Ue(),n),i=ti.getRotation(to(),n),s=ti.getScaling(cr.Ue(),n);this.setLocalScale(t,s,!1),this.setLocalPosition(t,r,!1),this.setLocalRotation(t,i,void 0,void 0,void 0,!1),this.dirtifyLocal(t,t.transformable)},e.prototype.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},e.prototype.getTransformedGeometryBounds=function(t,n,r){n===void 0&&(n=!1);var i=this.getGeometryBounds(t,n);if(Pu.isEmpty(i))return null;var s=r||new Pu;return s.setFromTransformedAABB(i,this.getWorldTransform(t)),s},e.prototype.getGeometryBounds=function(t,n){n===void 0&&(n=!1);var r=t.geometry;r.dirty&&Ar.styleValueRegistry.updateGeometry(t);var i=n?r.renderBounds:r.contentBounds||null;return i||new Pu},e.prototype.getBounds=function(t,n){var r=this;n===void 0&&(n=!1);var i=t.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var s=n?i.renderBounds:i.bounds,l=this.getTransformedGeometryBounds(t,n,s),c=t.childNodes;if(c.forEach(function(v){var y=r.getBounds(v,n);y&&(l?l.add(y):(l=s||new Pu,l.update(y.center,y.halfExtents)))}),l||(l=new Pu),n){var h=wS(t);if(h){var p=h.parsedStyle.clipPath.getBounds(n);l?p&&(l=p.intersection(l)):l.update(p.center,p.halfExtents)}}return n?(i.renderBounds=l,i.renderBoundsDirty=!1):(i.bounds=l,i.boundsDirty=!1),l},e.prototype.getLocalBounds=function(t){if(t.parentNode){var n=ti.create();t.parentNode.transformable&&(n=ti.invert(ti.create(),this.getWorldTransform(t.parentNode)));var r=this.getBounds(t);if(!Pu.isEmpty(r)){var i=new Pu;return i.setFromTransformedAABB(r,n),i}}return this.getBounds(t)},e.prototype.getBoundingClientRect=function(t){var n,r,i,s=this.getGeometryBounds(t);Pu.isEmpty(s)||(i=new Pu,i.setFromTransformedAABB(s,this.getWorldTransform(t)));var l=(r=(n=t.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var c=(0,ae.CR)(i.getMin(),2),h=c[0],p=c[1],v=(0,ae.CR)(i.getMax(),2),y=v[0],b=v[1];return new Tp(h+((l==null?void 0:l.left)||0),p+((l==null?void 0:l.top)||0),y-h,b-p)}return new Tp((l==null?void 0:l.left)||0,(l==null?void 0:l.top)||0,0,0)},e.prototype.dirtifyWorldInternal=function(t,n){var r=this;if(!n.dirtyFlag){n.dirtyFlag=!0,n.frozen=!1,t.childNodes.forEach(function(s){var l=s.transformable;l.dirtyFlag||r.dirtifyWorldInternal(s,l)});var i=t.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},e.prototype.syncHierarchy=function(t){var n=t.transformable;if(!n.frozen){n.frozen=!0,(n.localDirtyFlag||n.dirtyFlag)&&this.sync(t,n);for(var r=t.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},e.prototype.sync=function(t,n){if(n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.dirtyFlag){var r=t.parentNode,i=r&&r.transformable;r===null||!i?ti.copy(n.worldTransform,n.localTransform):ti.multiply(n.worldTransform,i.worldTransform,n.localTransform),n.dirtyFlag=!1}},e.prototype.unfreezeParentToRoot=function(t){for(var n=t.parentNode;n;){var r=n.transformable;r&&(r.frozen=!1),n=n.parentNode}},e}(),Gm={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},Wm=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,kO=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,zO=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,UO=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,jO=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,Mp=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,zg=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,VO=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,Oo=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,HO=new RegExp("".concat(kO.source,"|").concat(UO.source,"|").concat(Mp.source,"|").concat(VO.source)),kS=new RegExp("".concat(zO.source,"|").concat(jO.source,"|").concat(zg.source,"|").concat(Oo.source)),Cn=function(){function e(t){var n=this;this.runtime=t,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(kS.exec(i)||HO.exec(r)))},this.trimByKinsokuShorui=function(r){var i=(0,ae.ev)([],(0,ae.CR)(r),!1),s=i[i.length-2];if(!s)return r;var l=s[s.length-1];return i[i.length-2]=s.slice(0,-1),i[i.length-1]=l+i[i.length-1],i}}return e.prototype.measureFont=function(t,n){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),s=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});s.font=t;var l=Gm.MetricsString+Gm.BaselineSymbol,c=Math.ceil(s.measureText(l).width),h=Math.ceil(s.measureText(Gm.BaselineSymbol).width),p=Gm.HeightMultiplier*h;h=h*Gm.BaselineMultiplier|0,i.width=c,i.height=p,s.fillStyle="#f00",s.fillRect(0,0,c,p),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(l,0,h);var v=s.getImageData(0,0,c||1,p||1).data,y=v.length,b=c*4,T=0,M=0,R=!1;for(T=0;T<h;++T){for(var I=0;I<b;I+=4)if(v[M+I]!==255){R=!0;break}if(!R)M+=b;else break}for(r.ascent=h-T,M=y-b,R=!1,T=p;T>h;--T){for(var I=0;I<b;I+=4)if(v[M+I]!==255){R=!0;break}if(!R)M-=b;else break}return r.descent=T-h,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[t]=r,r},e.prototype.measureText=function(t,n,r){var i=n.fontSize,s=i===void 0?16:i,l=n.wordWrap,c=l===void 0?!1:l,h=n.lineHeight,p=n.lineWidth,v=p===void 0?1:p,y=n.textBaseline,b=y===void 0?"alphabetic":y,T=n.textAlign,M=T===void 0?"start":T,R=n.letterSpacing,I=R===void 0?0:R,N=n.textPath;n.textPathSide,n.textPathStartOffset;var z=n.leading,H=z===void 0?0:z,X=xO(n),Y=this.measureFont(X,r);Y.fontSize===0&&(Y.fontSize=s,Y.ascent=s);var ne=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);ne.font=X,n.isOverflowing=!1;var pe=c?this.wordWrap(t,n,r):t,ye=pe.split(/(?:\r\n|\r|\n)/),De=new Array(ye.length),Xe=0;if(N){N.getTotalLength();for(var Ke=0;Ke<ye.length;Ke++)var mt=ne.measureText(ye[Ke]).width+(ye[Ke].length-1)*I}else{for(var Ke=0;Ke<ye.length;Ke++){var Qe=ne.measureText(ye[Ke]).width+(ye[Ke].length-1)*I;De[Ke]=Qe,Xe=Math.max(Xe,Qe)}var mt=Xe+v,ut=h||Y.fontSize+v,ct=Math.max(ut,Y.fontSize+v)+(ye.length-1)*(ut+H);ut+=H;var gt=0;return b==="middle"?gt=-ct/2:b==="bottom"||b==="alphabetic"||b==="ideographic"?gt=-ct:(b==="top"||b==="hanging")&&(gt=0),{font:X,width:mt,height:ct,lines:ye,lineWidths:De,lineHeight:ut,maxLineWidth:Xe,fontProperties:Y,lineMetrics:De.map(function(Rt,kt){var wn=0;return M==="center"||M==="middle"?wn-=Rt/2:(M==="right"||M==="end")&&(wn-=Rt),new Tp(wn-v/2,gt+kt*ut,Rt+v,ut)})}}},e.prototype.setGraphemeOnPath=function(){},e.prototype.wordWrap=function(t,n,r){var i=this,s=n.wordWrapWidth,l=s===void 0?0:s,c=n.letterSpacing,h=c===void 0?0:c,p=n.maxLines,v=p===void 0?1/0:p,y=n.textOverflow,b=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),T=l+h,M="";y==="ellipsis"?M="...":y&&y!=="clip"&&(M=y);for(var R=[],I=0,N=0,z={},H=function(gt){return i.getFromCache(gt,h,z,b)},X=Array.from(M).reduce(function(gt,Xt){return gt+H(Xt)},0),Y=Array.from(t),ne=0;ne<Y.length;ne++){var pe=Y[ne],ye=t[ne-1],De=t[ne+1],Xe=H(pe);if(this.isNewline(pe)){if(I++,I>=v){n.isOverflowing=!0;break}N=0,R[I]="";continue}if(N>0&&N+Xe>T){if(I+1>=v){if(n.isOverflowing=!0,X>0&&X<=T){for(var Ke=R[I].length,mt=0,Qe=Ke,ut=0;ut<Ke;ut++){var ct=H(R[I][ut]);if(mt+ct+X>T){Qe=ut;break}mt+=ct}R[I]=(R[I]||"").slice(0,Qe)+M}break}if(I++,N=0,R[I]="",this.isBreakingSpace(pe))continue;this.canBreakInLastChar(pe)||(R=this.trimToBreakable(R),N=this.sumTextWidthByCache(R[I]||"",z)),this.shouldBreakByKinsokuShorui(pe,De)&&(R=this.trimByKinsokuShorui(R),N+=H(ye||""))}N+=Xe,R[I]=(R[I]||"")+pe}return R.join(`
`)},e.prototype.isBreakingSpace=function(t){return typeof t!="string"?!1:Gm.BreakingSpaces.indexOf(t.charCodeAt(0))>=0},e.prototype.isNewline=function(t){return typeof t!="string"?!1:Gm.Newlines.indexOf(t.charCodeAt(0))>=0},e.prototype.trimToBreakable=function(t){var n=(0,ae.ev)([],(0,ae.CR)(t),!1),r=n[n.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return n;var s=r.slice(i,i+1),l=this.isBreakingSpace(s),c=i+1,h=i+(l?0:1);return n[n.length-1]+=r.slice(c,r.length),n[n.length-2]=r.slice(0,h),n},e.prototype.canBreakInLastChar=function(t){return!(t&&Wm.test(t))},e.prototype.sumTextWidthByCache=function(t,n){return t.split("").reduce(function(r,i){if(!n[i])throw Error("cannot count the word without cache");return r+n[i]},0)},e.prototype.findBreakableIndex=function(t){for(var n=t.length-1;n>=0;n--)if(!Wm.test(t[n]))return n;return-1},e.prototype.getFromCache=function(t,n,r,i){var s=r[t];if(typeof s!="number"){var l=t.length*n;s=i.measureText(t).width+l,r[t]=s}return s},e}(),Ar={},os=function(){var e,t=new MO,n=new L1;return e={},e[ni.CIRCLE]=new TO,e[ni.ELLIPSE]=new AO,e[ni.RECT]=t,e[ni.IMAGE]=t,e[ni.GROUP]=new PO,e[ni.LINE]=new CO,e[ni.TEXT]=new RO(Ar),e[ni.POLYLINE]=n,e[ni.POLYGON]=n,e[ni.PATH]=new OO,e[ni.HTML]=null,e[ni.MESH]=null,e}(),m_=function(){var e,t=new WC,n=new zx;return e={},e[Io.PERCENTAGE]=null,e[Io.NUMBER]=new YC,e[Io.ANGLE]=new GC,e[Io.DEFINED_PATH]=new kx,e[Io.PAINT]=t,e[Io.COLOR]=t,e[Io.FILTER]=new ZC,e[Io.LENGTH]=n,e[Io.LENGTH_PERCENTAGE]=n,e[Io.LENGTH_PERCENTAGE_12]=new XC,e[Io.LENGTH_PERCENTAGE_14]=new f_,e[Io.COORDINATE]=new zx,e[Io.OFFSET_DISTANCE]=new $C,e[Io.OPACITY_VALUE]=new qC,e[Io.PATH]=new ES,e[Io.LIST_OF_POINTS]=new KC,e[Io.SHADOW_BLUR]=new QC,e[Io.TEXT]=new JC,e[Io.TEXT_TRANSFORM]=new eO,e[Io.TRANSFORM]=new Wx,e[Io.TRANSFORM_ORIGIN]=new SO,e[Io.Z_INDEX]=new wO,e[Io.MARKER]=new h_,e}(),ud=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof L.g!="undefined"?L.g:{}};Ar.CameraContribution=Um,Ar.AnimationTimeline=null,Ar.EasingFunction=null,Ar.offscreenCanvasCreator=new LS,Ar.sceneGraphSelector=new NS,Ar.sceneGraphService=new N1(Ar),Ar.textService=new Cn(Ar),Ar.geometryUpdaterFactory=os,Ar.CSSPropertySyntaxFactory=m_,Ar.styleValueRegistry=new RI(Ar),Ar.layoutRegistry=null,Ar.globalThis=ud(),Ar.enableCSSParsing=!1,Ar.enableDataset=!1,Ar.enableStyleSyntax=!0,Ar.enableAttributeDashCased=!1,Ar.enableSizeAttenuation=!1;var hs=0;function Bf(){hs=0}var fh=new gv(ka.INSERTED,null,"","","",0,"",""),Du=new gv(ka.REMOVED,null,"","","",0,"",""),qc=new Jl(ka.DESTROY),gc=function(e){(0,ae.ZT)(t,e);function t(){var n=e.call(this)||this;return n.entity=hs++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:px.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle=Ar.enableCSSParsing?{opacity:fu,fillOpacity:fu,strokeOpacity:fu,fill:fu,stroke:fu,transform:fu,transformOrigin:fu,visibility:fu,pointerEvents:fu,lineWidth:fu,lineCap:fu,lineJoin:fu,increasedLineWidthForHitTesting:fu,fontSize:fu,fontFamily:fu,fontStyle:fu,fontWeight:fu,fontVariant:fu,textAlign:fu,textBaseline:fu,textTransform:fu,zIndex:fu,filter:fu,shadowType:fu}:null,n.parsedStyle={},n.attributes={},n}return Object.defineProperty(t.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(n){return n!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(n){throw new Error(Co)},t.prototype.appendChild=function(n,r){var i;if(n.destroyed)throw new Error(EI);return Ar.sceneGraphService.attach(n,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(n),this.isMutationObserved&&(fh.relatedNode=this,n.dispatchEvent(fh)),n},t.prototype.insertBefore=function(n,r){if(!r)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(n):this.appendChild(n,i)}return n},t.prototype.replaceChild=function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r},t.prototype.removeChild=function(n){var r;return Du.relatedNode=this,n.dispatchEvent(Du),!((r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),Ar.sceneGraphService.detach(n),n},t.prototype.removeChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r)}},t.prototype.destroyChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length&&r.destroyChildren(),r.destroy()}},t.prototype.matches=function(n){return Ar.sceneGraphService.matches(n,this)},t.prototype.getElementById=function(n){return Ar.sceneGraphService.querySelector("#".concat(n),this)},t.prototype.getElementsByName=function(n){return Ar.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)},t.prototype.getElementsByClassName=function(n){return Ar.sceneGraphService.querySelectorAll(".".concat(n),this)},t.prototype.getElementsByTagName=function(n){return Ar.sceneGraphService.querySelectorAll(n,this)},t.prototype.querySelector=function(n){return Ar.sceneGraphService.querySelector(n,this)},t.prototype.querySelectorAll=function(n){return Ar.sceneGraphService.querySelectorAll(n,this)},t.prototype.closest=function(n){var r=this;do{if(Ar.sceneGraphService.matches(n,r))return r;r=r.parentElement}while(r!==null);return null},t.prototype.find=function(n){var r=this,i=null;return this.forEach(function(s){return s!==r&&n(s)?(i=s,!0):!1}),i},t.prototype.findAll=function(n){var r=this,i=[];return this.forEach(function(s){s!==r&&n(s)&&i.push(s)}),i},t.prototype.after=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this);r.forEach(function(l,c){var h;return(h=n.parentNode)===null||h===void 0?void 0:h.appendChild(l,s+c+1)})}},t.prototype.before=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this),l=(0,ae.CR)(r),c=l[0],h=l.slice(1);this.parentNode.appendChild(c,s),(n=c).after.apply(n,(0,ae.ev)([],(0,ae.CR)(h),!1))}},t.prototype.replaceWith=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.after.apply(this,(0,ae.ev)([],(0,ae.CR)(n),!1)),this.remove()},t.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(s){return n.appendChild(s)})},t.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(s,l){return n.appendChild(s,l)})},t.prototype.replaceChildren=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,(0,ae.ev)([],(0,ae.CR)(n),!1))},t.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},t.prototype.destroy=function(){this.dispatchEvent(qc),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},t.prototype.getGeometryBounds=function(){return Ar.sceneGraphService.getGeometryBounds(this)},t.prototype.getRenderBounds=function(){return Ar.sceneGraphService.getBounds(this,!0)},t.prototype.getBounds=function(){return Ar.sceneGraphService.getBounds(this)},t.prototype.getLocalBounds=function(){return Ar.sceneGraphService.getLocalBounds(this)},t.prototype.getBoundingClientRect=function(){return Ar.sceneGraphService.getBoundingClientRect(this)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},t.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},t.prototype.getAttribute=function(n){if(SI(n))return Ar.enableCSSParsing?null:void 0;var r=this.attributes[n];if(r===void 0){if(Ar.enableAttributeDashCased){var i=T1(n);r=this.attributes[i]}return Ar.enableCSSParsing&&(0,ya.Z)(r)?null:r}else return r},t.prototype.hasAttribute=function(n){return this.getAttributeNames().includes(n)},t.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},t.prototype.removeAttribute=function(n){this.setAttribute(n,null),delete this.attributes[n]},t.prototype.setAttribute=function(n,r,i,s){this.attributes[n]=r},t.prototype.getAttributeNS=function(n,r){throw new Error(Co)},t.prototype.getAttributeNode=function(n){throw new Error(Co)},t.prototype.getAttributeNodeNS=function(n,r){throw new Error(Co)},t.prototype.hasAttributeNS=function(n,r){throw new Error(Co)},t.prototype.removeAttributeNS=function(n,r){throw new Error(Co)},t.prototype.removeAttributeNode=function(n){throw new Error(Co)},t.prototype.setAttributeNS=function(n,r,i){throw new Error(Co)},t.prototype.setAttributeNode=function(n){throw new Error(Co)},t.prototype.setAttributeNodeNS=function(n){throw new Error(Co)},t.prototype.toggleAttribute=function(n,r){throw new Error(Co)},t}(Ff);function ca(e){return!!(e!=null&&e.nodeName)}var Rp=Ar.globalThis.Proxy?Ar.globalThis.Proxy:function(){},Ih=new gv(ka.ATTR_MODIFIED,null,null,null,null,gv.MODIFICATION,null,null),zS={opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},ds={fill:C1,stroke:C1,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},Xf=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],gf=(0,ae.ev)((0,ae.ev)([],(0,ae.CR)(Xf),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),xu="data-",Dh=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this)||this;return r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||ni.GROUP,Ar.enableCSSParsing?(Object.assign(r.attributes,zS),Object.assign(r.parsedStyle,ds,r.config.initialParsedStyle)):r.config.initialParsedStyle&&Object.assign(r.parsedStyle,r.config.initialParsedStyle),r.initAttributes(r.config.style),Ar.enableDataset&&(r.dataset=new Rp({},{get:function(i,s){var l="".concat(xu).concat(fx(s));return i[l]!==void 0?i[l]:r.getAttribute(l)},set:function(i,s,l){return r.setAttribute("".concat(xu).concat(fx(s)),l),!0}})),Ar.enableStyleSyntax&&(r.style=new Rp({setProperty:function(i,s){r.setAttribute(i,s)},getPropertyValue:function(i){return r.getAttribute(i)},removeProperty:function(i){r.removeAttribute(i)},item:function(){return""}},{get:function(i,s){return i[s]!==void 0?i[s]:r.getAttribute(s)},set:function(i,s,l){return r.setAttribute(s,l),!0}})),r}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.getAnimations().forEach(function(n){n.cancel()})},t.prototype.cloneNode=function(n,r){var i=(0,ae.pi)({},this.attributes);for(var s in i){var l=i[s];ca(l)&&s!=="clipPath"&&s!=="offsetPath"&&s!=="textPath"&&(i[s]=l.cloneNode(n)),r&&(i[s]=r(s,l))}var c=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return c.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(h){if(!h.style.isMarker){var p=h.cloneNode(n);c.appendChild(p)}}),c},t.prototype.initAttributes=function(n){n===void 0&&(n={});var r=this.renderable,i={forceUpdateGeometry:!0};Ar.enableCSSParsing&&(i.usedAttributes=gf);var s=n;if(Ar.enableAttributeDashCased){s={};for(var l in n){var c=T1(l);s[c]=n[l]}}Ar.styleValueRegistry.processProperties(this,s,i),r.dirty=!0},t.prototype.setAttribute=function(n,r,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),Ar.enableAttributeDashCased&&(n=T1(n)),!Vs(r)&&(i||r!==this.attributes[n])&&(this.internalSetAttribute(n,r,{memoize:s}),e.prototype.setAttribute.call(this,n,r))},t.prototype.internalSetAttribute=function(n,r,i){var s;i===void 0&&(i={});var l=this.renderable,c=this.attributes[n],h=this.parsedStyle[n];Ar.styleValueRegistry.processProperties(this,(s={},s[n]=r,s),i),l.dirty=!0;var p=this.parsedStyle[n];this.isConnected&&(Ih.relatedNode=this,Ih.prevValue=c,Ih.newValue=r,Ih.attrName=n,Ih.prevParsedValue=h,Ih.newParsedValue=p,this.isMutationObserved?this.dispatchEvent(Ih):(Ih.target=this,this.ownerDocument.defaultView.dispatchEvent(Ih,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(n,c,r,h,p)},t.prototype.getBBox=function(){var n=this.getBounds(),r=(0,ae.CR)(n.getMin(),2),i=r[0],s=r[1],l=(0,ae.CR)(n.getMax(),2),c=l[0],h=l[1];return new Tp(i,s,c-i,h-s)},t.prototype.setOrigin=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Ar.sceneGraphService.setOrigin(this,Ru(n,r,i)),this},t.prototype.getOrigin=function(){return Ar.sceneGraphService.getOrigin(this)},t.prototype.setPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Ar.sceneGraphService.setPosition(this,Ru(n,r,i)),this},t.prototype.setLocalPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Ar.sceneGraphService.setLocalPosition(this,Ru(n,r,i)),this},t.prototype.translate=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Ar.sceneGraphService.translate(this,Ru(n,r,i)),this},t.prototype.translateLocal=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Ar.sceneGraphService.translateLocal(this,Ru(n,r,i)),this},t.prototype.getPosition=function(){return Ar.sceneGraphService.getPosition(this)},t.prototype.getLocalPosition=function(){return Ar.sceneGraphService.getLocalPosition(this)},t.prototype.scale=function(n,r,i){return this.scaleLocal(n,r,i)},t.prototype.scaleLocal=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Ru(n,r,i)),Ar.sceneGraphService.scaleLocal(this,n),this},t.prototype.setLocalScale=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Ru(n,r,i)),Ar.sceneGraphService.setLocalScale(this,n),this},t.prototype.getLocalScale=function(){return Ar.sceneGraphService.getLocalScale(this)},t.prototype.getScale=function(){return Ar.sceneGraphService.getScale(this)},t.prototype.getEulerAngles=function(){var n=(0,ae.CR)(km(cr.Ue(),Ar.sceneGraphService.getWorldTransform(this)),3),r=n[2];return ch(r)},t.prototype.getLocalEulerAngles=function(){var n=(0,ae.CR)(km(cr.Ue(),Ar.sceneGraphService.getLocalRotation(this)),3),r=n[2];return ch(r)},t.prototype.setEulerAngles=function(n){return Ar.sceneGraphService.setEulerAngles(this,0,0,n),this},t.prototype.setLocalEulerAngles=function(n){return Ar.sceneGraphService.setLocalEulerAngles(this,0,0,n),this},t.prototype.rotateLocal=function(n,r,i){return(0,ya.Z)(r)&&(0,ya.Z)(i)?Ar.sceneGraphService.rotateLocal(this,0,0,n):Ar.sceneGraphService.rotateLocal(this,n,r,i),this},t.prototype.rotate=function(n,r,i){return(0,ya.Z)(r)&&(0,ya.Z)(i)?Ar.sceneGraphService.rotate(this,0,0,n):Ar.sceneGraphService.rotate(this,n,r,i),this},t.prototype.setRotation=function(n,r,i,s){return Ar.sceneGraphService.setRotation(this,n,r,i,s),this},t.prototype.setLocalRotation=function(n,r,i,s){return Ar.sceneGraphService.setLocalRotation(this,n,r,i,s),this},t.prototype.setLocalSkew=function(n,r){return Ar.sceneGraphService.setLocalSkew(this,n,r),this},t.prototype.getRotation=function(){return Ar.sceneGraphService.getRotation(this)},t.prototype.getLocalRotation=function(){return Ar.sceneGraphService.getLocalRotation(this)},t.prototype.getLocalSkew=function(){return Ar.sceneGraphService.getLocalSkew(this)},t.prototype.getLocalTransform=function(){return Ar.sceneGraphService.getLocalTransform(this)},t.prototype.getWorldTransform=function(){return Ar.sceneGraphService.getWorldTransform(this)},t.prototype.setLocalTransform=function(n){return Ar.sceneGraphService.setLocalTransform(this,n),this},t.prototype.resetLocalTransform=function(){Ar.sceneGraphService.resetLocalTransform(this)},t.prototype.getAnimations=function(){return this.activeAnimations},t.prototype.animate=function(n,r){var i,s=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return s?s.play(this,n,r):null},t.prototype.isVisible=function(){var n,r;return Ar.enableCSSParsing?((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)==="visible":((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"},Object.defineProperty(t.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"},enumerable:!1,configurable:!0}),t.prototype.isInteractive=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"},t.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},t.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,ae.ev)([],(0,ae.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))+1),this},t.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,ae.ev)([],(0,ae.CR)(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))-1),this},t.prototype.getConfig=function(){return this.config},t.prototype.attr=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=(0,ae.CR)(r,2),l=s[0],c=s[1];return l?al(l)?(Object.keys(l).forEach(function(h){n.setAttribute(h,l[h])}),this):r.length===2?(this.setAttribute(l,c),this):this.attributes[l]:this.attributes},t.prototype.getMatrix=function(n){var r=n||this.getWorldTransform(),i=(0,ae.CR)(ti.getTranslation(cr.Ue(),r),2),s=i[0],l=i[1],c=(0,ae.CR)(ti.getScaling(cr.Ue(),r),2),h=c[0],p=c[1],v=ti.getRotation(to(),r),y=(0,ae.CR)(km(cr.Ue(),v),3),b=y[0],T=y[2];return E1(b||T,s,l,h,p)},t.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},t.prototype.setMatrix=function(n){var r=(0,ae.CR)(P0(n),5),i=r[0],s=r[1],l=r[2],c=r[3],h=r[4];this.setEulerAngles(h).setPosition(i,s).setLocalScale(l,c)},t.prototype.setLocalMatrix=function(n){var r=(0,ae.CR)(P0(n),5),i=r[0],s=r[1],l=r[2],c=r[3],h=r[4];this.setLocalEulerAngles(h).setLocalPosition(i,s).setLocalScale(l,c)},t.prototype.show=function(){Ar.enableCSSParsing?this.style.visibility="visible":this.forEach(function(n){n.style.visibility="visible"})},t.prototype.hide=function(){Ar.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(n){n.style.visibility="hidden"})},t.prototype.getCount=function(){return this.childElementCount},t.prototype.getParent=function(){return this.parentElement},t.prototype.getChildren=function(){return this.children},t.prototype.getFirst=function(){return this.firstElementChild},t.prototype.getLast=function(){return this.lastElementChild},t.prototype.getChildByIndex=function(n){return this.children[n]||null},t.prototype.add=function(n,r){return this.appendChild(n,r)},t.prototype.set=function(n,r){this.config[n]=r},t.prototype.get=function(n){return this.config[n]},t.prototype.moveTo=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.move=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},t.prototype.setZIndex=function(n){return this.style.zIndex=n,this},t}(gc),Sl=function(e){(0,ae.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,ae.pi)({type:ni.CIRCLE},n))||this}return t}(Dh),Gd=function(e){(0,ae.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ae._T)(n,["style"]);return r=e.call(this,(0,ae.pi)({style:Ar.enableCSSParsing?(0,ae.pi)({},i):(0,ae.pi)({},i)},s))||this,r.isCustomElement=!0,r}return t}(Dh),em=function(e){(0,ae.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,ae.pi)({type:ni.ELLIPSE},n))||this}return t}(Dh),yc=function(e){(0,ae.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,ae.pi)({type:ni.GROUP},n))||this}return t}(Dh),ii=function(e){(0,ae.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ae._T)(n,["style"]);return r=e.call(this,(0,ae.pi)({type:ni.HTML,style:Ar.enableCSSParsing?(0,ae.pi)({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):(0,ae.pi)({},i)},s))||this,r.cullable.enable=!1,r}return t.prototype.getDomElement=function(){return this.parsedStyle.$el},t.prototype.getBoundingClientRect=function(){if(this.parsedStyle.$el)return this.parsedStyle.$el.getBoundingClientRect();var n=this.parsedStyle,r=n.x,i=n.y,s=n.width,l=n.height;return new Tp(r,i,s,l)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.getBounds=function(){var n,r,i=this.getBoundingClientRect(),s=(r=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect(),l=new Pu,c=i.left-((s==null?void 0:s.left)||0),h=i.top-((s==null?void 0:s.top)||0);return l.setMinMax([c,h,0],[c+i.width,h+i.height,0]),l},t.prototype.getLocalBounds=function(){if(this.parentNode){var n=ti.invert(ti.create(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!Pu.isEmpty(r)){var i=new Pu;return i.setFromTransformedAABB(r,n),i}}return this.getBounds()},t}(Dh),Do=function(e){(0,ae.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,ae.pi)({type:ni.IMAGE},n))||this}return t}(Dh),F1=function(e){(0,ae.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ae._T)(n,["style"]);r=e.call(this,(0,ae.pi)({type:ni.LINE,style:(0,ae.pi)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},s))||this,r.markerStartAngle=0,r.markerEndAngle=0;var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd;return c&&ca(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),h&&ca(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&ca(s)&&(this.markerStartAngle=0,s.remove()),l&&ca(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"&&(s&&ca(s)&&(this.markerEndAngle=0,s.remove()),l&&ca(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1)))},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=r.x1,p=r.x2,v=r.y1,y=r.y2,b=n?i:s;if(!(!b||!ca(b))){var T=0,M,R,I,N,z,H;n?(I=h,N=v,M=p-h,R=y-v,z=l||0,H=this.markerStartAngle):(I=p,N=y,M=h-p,R=v-y,z=c||0,H=this.markerEndAngle),T=Math.atan2(R,M),b.setLocalEulerAngles(T*180/Math.PI+H),b.setLocalPosition(I+Math.cos(T)*z,N+Math.sin(T)*z)}},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,s=i.x1,l=i.y1,c=i.x2,h=i.y2,p=uh(s,l,c,h,n),v=p.x,y=p.y,b=cr.fF(cr.Ue(),cr.al(v,y,0),r?this.getWorldTransform():this.getLocalTransform());return new mc(b[0],b[1])},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getTotalLength=function(){var n=this.parsedStyle,r=n.x1,i=n.y1,s=n.x2,l=n.y2;return C0(r,i,s,l)},t}(Dh),Ki=function(e){(0,ae.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ae._T)(n,["style"]);r=e.call(this,(0,ae.pi)({type:ni.PATH,style:Ar.enableCSSParsing?(0,ae.pi)({d:"",miterLimit:""},i):(0,ae.pi)({},i),initialParsedStyle:Ar.enableCSSParsing?null:{miterLimit:4,d:(0,ae.pi)({},sC)}},s))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd,p=l.markerMid;return c&&ca(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),p&&ca(p)&&r.placeMarkerMid(p),h&&ca(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&ca(s)&&(this.markerStartAngle=0,s.remove()),l&&ca(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"?(s&&ca(s)&&(this.markerEndAngle=0,s.remove()),l&&ca(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(l)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=n?i:s;if(!(!h||!ca(h))){var p=0,v,y,b,T,M,R;if(n){var I=(0,ae.CR)(this.getStartTangent(),2),N=I[0],z=I[1];b=z[0],T=z[1],v=N[0]-z[0],y=N[1]-z[1],M=l||0,R=this.markerStartAngle}else{var H=(0,ae.CR)(this.getEndTangent(),2),N=H[0],z=H[1];b=z[0],T=z[1],v=N[0]-z[0],y=N[1]-z[1],M=c||0,R=this.markerEndAngle}p=Math.atan2(y,v),h.setLocalEulerAngles(p*180/Math.PI+R),h.setLocalPosition(b+Math.cos(p)*M,T+Math.sin(p)*M)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(p){p.remove()}),n&&ca(n))for(var i=1;i<r.length-1;i++){var s=(0,ae.CR)(r[i].currentPoint,2),l=s[0],c=s[1],h=i===1?n:n.cloneNode(!0);this.markerMidList.push(h),this.appendChild(h),h.setLocalPosition(l,c)}},t.prototype.getTotalLength=function(){return Ex(this)},t.prototype.getPointAtLength=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.d.absolutePath,s=gp(i,n),l=s.x,c=s.y,h=cr.fF(cr.Ue(),cr.al(l,c,0),r?this.getWorldTransform():this.getLocalTransform());return new mc(h[0],h[1])},t.prototype.getPoint=function(n,r){return r===void 0&&(r=!1),this.getPointAtLength(n*Ex(this),r)},t.prototype.getStartTangent=function(){var n=this.parsedStyle.d.segments,r=[];if(n.length>1){var i=n[0].currentPoint,s=n[1].currentPoint,l=n[1].startTangent;r=[],l?(r.push([i[0]-l[0],i[1]-l[1]]),r.push([i[0],i[1]])):(r.push([s[0],s[1]]),r.push([i[0],i[1]]))}return r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.d.segments,r=n.length,i=[];if(r>1){var s=n[r-2].currentPoint,l=n[r-1].currentPoint,c=n[r-1].endTangent;i=[],c?(i.push([l[0]-c[0],l[1]-c[1]]),i.push([l[0],l[1]])):(i.push([s[0],s[1]]),i.push([l[0],l[1]]))}return i},t}(Dh),Ko=function(e){(0,ae.ZT)(t,e);function t(n){n===void 0&&(n={});var r=this,i=n.style,s=(0,ae._T)(n,["style"]);r=e.call(this,(0,ae.pi)({type:ni.POLYGON,style:Ar.enableCSSParsing?(0,ae.pi)({points:"",miterLimit:"",isClosed:!0},i):(0,ae.pi)({},i),initialParsedStyle:Ar.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},s))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var l=r.parsedStyle,c=l.markerStart,h=l.markerEnd,p=l.markerMid;return c&&ca(c)&&(r.markerStartAngle=c.getLocalEulerAngles(),r.appendChild(c)),p&&ca(p)&&r.placeMarkerMid(p),h&&ca(h)&&(r.markerEndAngle=h.getLocalEulerAngles(),r.appendChild(h)),r.transformMarker(!0),r.transformMarker(!1),r}return t.prototype.attributeChangedCallback=function(n,r,i,s,l){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(s&&ca(s)&&(this.markerStartAngle=0,s.remove()),l&&ca(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):n==="markerEnd"?(s&&ca(s)&&(this.markerEndAngle=0,s.remove()),l&&ca(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(l)},t.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,h=r.points,p=(h||{}).points,v=n?i:s;if(!(!v||!ca(v)||!p)){var y=0,b,T,M,R,I,N;if(M=p[0][0],R=p[0][1],n)b=p[1][0]-p[0][0],T=p[1][1]-p[0][1],I=l||0,N=this.markerStartAngle;else{var z=p.length;this.parsedStyle.isClosed?(b=p[z-1][0]-p[0][0],T=p[z-1][1]-p[0][1]):(M=p[z-1][0],R=p[z-1][1],b=p[z-2][0]-p[z-1][0],T=p[z-2][1]-p[z-1][1]),I=c||0,N=this.markerEndAngle}y=Math.atan2(T,b),v.setLocalEulerAngles(y*180/Math.PI+N),v.setLocalPosition(M+Math.cos(y)*I,R+Math.sin(y)*I)}},t.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.points,i=(r||{}).points;if(this.markerMidList.forEach(function(p){p.remove()}),this.markerMidList=[],n&&ca(n)&&i)for(var s=1;s<(this.parsedStyle.isClosed?i.length:i.length-1);s++){var l=i[s][0],c=i[s][1],h=s===1?n:n.cloneNode(!0);this.markerMidList.push(h),this.appendChild(h),h.setLocalPosition(l,c)}},t}(Dh),lr=function(e){(0,ae.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ae._T)(n,["style"]);return e.call(this,(0,ae.pi)({type:ni.POLYLINE,style:Ar.enableCSSParsing?(0,ae.pi)({points:"",miterLimit:"",isClosed:!1},r):(0,ae.pi)({},r),initialParsedStyle:Ar.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return t.prototype.getTotalLength=function(){return MI(this)},t.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},t.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var s=[],l=0,c,h,p=this.getTotalLength();i.forEach(function(I,N){i[N+1]&&(c=[0,0],c[0]=l/p,h=C0(I[0],I[1],i[N+1][0],i[N+1][1]),l+=h,c[1]=l/p,s.push(c))}),this.parsedStyle.points.segments=s}var v=0,y=0;this.parsedStyle.points.segments.forEach(function(I,N){n>=I[0]&&n<=I[1]&&(v=(n-I[0])/(I[1]-I[0]),y=N)});var b=uh(i[y][0],i[y][1],i[y+1][0],i[y+1][1],v),T=b.x,M=b.y,R=cr.fF(cr.Ue(),cr.al(T,M,0),r?this.getWorldTransform():this.getLocalTransform());return new mc(R[0],R[1])},t.prototype.getStartTangent=function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r},t.prototype.getEndTangent=function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i},t}(Ko),L0=function(e){(0,ae.ZT)(t,e);function t(n){return n===void 0&&(n={}),e.call(this,(0,ae.pi)({type:ni.RECT},n))||this}return t}(Dh),oc=function(e){(0,ae.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ae._T)(n,["style"]);return e.call(this,(0,ae.pi)({type:ni.TEXT,style:Ar.enableCSSParsing?(0,ae.pi)({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):(0,ae.pi)({fill:"black"},r)},i))||this}return t.prototype.getComputedTextLength=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0},t.prototype.getLineBoundingRects=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]},t.prototype.isOverflowing=function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing},t}(Dh),Ug=function(){function e(){this.registry={},this.define(ni.CIRCLE,Sl),this.define(ni.ELLIPSE,em),this.define(ni.RECT,L0),this.define(ni.IMAGE,Do),this.define(ni.LINE,F1),this.define(ni.GROUP,yc),this.define(ni.PATH,Ki),this.define(ni.POLYGON,Ko),this.define(ni.POLYLINE,lr),this.define(ni.TEXT,oc),this.define(ni.HTML,ii)}return e.prototype.define=function(t,n){this.registry[t]=n},e.prototype.get=function(t){return this.registry[t]},e}(),$x={number:function(e){return new jl(e)},percent:function(e){return new jl(e,"%")},px:function(e){return new jl(e,"px")},em:function(e){return new jl(e,"em")},rem:function(e){return new jl(e,"rem")},deg:function(e){return new jl(e,"deg")},grad:function(e){return new jl(e,"grad")},rad:function(e){return new jl(e,"rad")},turn:function(e){return new jl(e,"turn")},s:function(e){return new jl(e,"s")},ms:function(e){return new jl(e,"ms")},registerProperty:function(e){var t=e.name,n=e.inherits,r=e.interpolable,i=e.initialValue,s=e.syntax;Ar.styleValueRegistry.registerMetadata({n:t,inh:n,int:r,d:i,syntax:s})},registerLayout:function(e,t){Ar.layoutRegistry.registerLayout(e,t)}},US=function(e){(0,ae.ZT)(t,e);function t(){var n=e.call(this)||this;n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new Ar.AnimationTimeline(n)}catch(i){}var r={};return Bx.forEach(function(i){var s=i.n,l=i.inh,c=i.d;l&&c&&(r[s]=Kv(c)?c(ni.GROUP):c)}),n.documentElement=new yc({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),t.prototype.createElement=function(n,r){if(n==="svg")return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i=n==="tspan"?oc:yc);var s=new i(r);return s.ownerDocument=this,s},t.prototype.createElementNS=function(n,r,i){return this.createElement(r,i)},t.prototype.cloneNode=function(n){throw new Error(Co)},t.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(n){}},t.prototype.elementsFromBBox=function(n,r,i,s){var l=this.defaultView.context.rBushRoot,c=l.search({minX:n,minY:r,maxX:i,maxY:s}),h=[];return c.forEach(function(p){var v=p.displayObject,y=v.parsedStyle.pointerEvents,b=y===void 0?"auto":y,T=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(b);(!T||T&&v.isVisible())&&!v.isCulled()&&v.isInteractive()&&h.push(v)}),h.sort(function(p,v){return v.sortable.renderOrder-p.sortable.renderOrder}),h},t.prototype.elementFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height;if(s<0||l<0||s>h||l>p)return null;var v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,T=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]}).picked;return T&&T[0]||this.documentElement},t.prototype.elementFromPoint=function(n,r){return(0,ae.mG)(this,void 0,void 0,function(){var i,s,l,c,h,p,v,y,b,T;return(0,ae.Jh)(this,function(M){switch(M.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height,s<0||l<0||s>h||l>p?[2,null]:(v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]})]);case 1:return T=M.sent().picked,[2,T&&T[0]||this.documentElement]}})})},t.prototype.elementsFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height;if(s<0||l<0||s>h||l>p)return[];var v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,T=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]}).picked;return T[T.length-1]!==this.documentElement&&T.push(this.documentElement),T},t.prototype.elementsFromPoint=function(n,r){return(0,ae.mG)(this,void 0,void 0,function(){var i,s,l,c,h,p,v,y,b,T;return(0,ae.Jh)(this,function(M){switch(M.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),s=i.x,l=i.y,c=this.defaultView.getConfig(),h=c.width,p=c.height,s<0||l<0||s>h||l>p?[2,[]]:(v=this.defaultView.viewport2Client({x:s,y:l}),y=v.x,b=v.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:n,y:r,viewportX:s,viewportY:l,clientX:y,clientY:b},picked:[]})]);case 1:return T=M.sent().picked,T[T.length-1]!==this.documentElement&&T.push(this.documentElement),[2,T]}})})},t.prototype.appendChild=function(n,r){throw new Error(hv)},t.prototype.insertBefore=function(n,r){throw new Error(hv)},t.prototype.removeChild=function(n,r){throw new Error(hv)},t.prototype.replaceChild=function(n,r,i){throw new Error(hv)},t.prototype.append=function(){throw new Error(hv)},t.prototype.prepend=function(){throw new Error(hv)},t.prototype.getElementById=function(n){return this.documentElement.getElementById(n)},t.prototype.getElementsByName=function(n){return this.documentElement.getElementsByName(n)},t.prototype.getElementsByTagName=function(n){return this.documentElement.getElementsByTagName(n)},t.prototype.getElementsByClassName=function(n){return this.documentElement.getElementsByClassName(n)},t.prototype.querySelector=function(n){return this.documentElement.querySelector(n)},t.prototype.querySelectorAll=function(n){return this.documentElement.querySelectorAll(n)},t.prototype.find=function(n){return this.documentElement.find(n)},t.prototype.findAll=function(n){return this.documentElement.findAll(n)},t}(Ff),II=function(){function e(t){this.strategies=t}return e.prototype.apply=function(t){var n=t.camera,r=t.renderingService,i=t.renderingContext,s=this.strategies;r.hooks.cull.tap(e.tag,function(l){if(l){var c=l.cullable;return s.length===0?c.visible=i.unculledEntities.indexOf(l.entity)>-1:c.visible=s.every(function(h){return h.isVisible(n,l)}),!l.isCulled()&&l.isVisible()?l:(l.dispatchEvent(new Jl(ka.CULLED)),null)}return l}),r.hooks.afterRender.tap(e.tag,function(l){l.cullable.visibilityPlaneMask=-1})},e.tag="Culling",e}(),GO=function(){function e(){var t=this;this.autoPreventDefault=!1,this.rootPointerEvent=new Xx(null),this.rootWheelEvent=new Yx(null),this.onPointerMove=function(n){var r,i,s,l,c=(l=(s=t.context.renderingContext.root)===null||s===void 0?void 0:s.ownerDocument)===null||l===void 0?void 0:l.defaultView;if(!(c.supportsTouchEvents&&n.pointerType==="touch")){var h=t.normalizeToPointerEvent(n,c);try{for(var p=(0,ae.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=t.bootstrapEvent(t.rootPointerEvent,y,c,n);t.context.eventService.mapEvent(b)}}catch(T){r={error:T}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(n){var r,i,s,l,c=(l=(s=t.context.renderingContext.root)===null||s===void 0?void 0:s.ownerDocument)===null||l===void 0?void 0:l.defaultView,h=t.normalizeToPointerEvent(n,c);try{for(var p=(0,ae.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=t.bootstrapEvent(t.rootPointerEvent,y,c,n);t.context.eventService.mapEvent(b)}}catch(T){r={error:T}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}t.setCursor(t.context.eventService.cursor)}}return e.prototype.apply=function(t){var n=this;this.context=t;var r=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(s){var l=n.context.renderingService.hooks.pickSync.call({position:s,picked:[],topmost:!0}).picked;return l[0]||null}),r.hooks.pointerWheel.tap(e.tag,function(s){var l=n.normalizeWheelEvent(s);n.context.eventService.mapEvent(l)}),r.hooks.pointerDown.tap(e.tag,function(s){var l,c;if(!(i.supportsTouchEvents&&s.pointerType==="touch")){var h=n.normalizeToPointerEvent(s,i);if(n.autoPreventDefault&&h[0].isNormalized){var p=s.cancelable||!("cancelable"in s);p&&s.preventDefault()}try{for(var v=(0,ae.XA)(h),y=v.next();!y.done;y=v.next()){var b=y.value,T=n.bootstrapEvent(n.rootPointerEvent,b,i,s);n.context.eventService.mapEvent(T)}}catch(M){l={error:M}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(e.tag,function(s){var l,c;if(!(i.supportsTouchEvents&&s.pointerType==="touch")){var h=n.context.contextService.getDomElement(),p=n.context.eventService.isNativeEventFromCanvas(h,s),v=p?"":"outside",y=n.normalizeToPointerEvent(s,i);try{for(var b=(0,ae.XA)(y),T=b.next();!T.done;T=b.next()){var M=T.value,R=n.bootstrapEvent(n.rootPointerEvent,M,i,s);R.type+=v,n.context.eventService.mapEvent(R)}}catch(I){l={error:I}}finally{try{T&&!T.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(e.tag,this.onPointerMove),r.hooks.pointerOver.tap(e.tag,this.onPointerMove),r.hooks.pointerOut.tap(e.tag,this.onPointerMove),r.hooks.click.tap(e.tag,this.onClick),r.hooks.pointerCancel.tap(e.tag,function(s){var l,c,h=n.normalizeToPointerEvent(s,i);try{for(var p=(0,ae.XA)(h),v=p.next();!v.done;v=p.next()){var y=v.value,b=n.bootstrapEvent(n.rootPointerEvent,y,i,s);n.context.eventService.mapEvent(b)}}catch(T){l={error:T}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(l)throw l.error}}n.setCursor(n.context.eventService.cursor)})},e.prototype.getViewportXY=function(t){var n,r,i=t.offsetX,s=t.offsetY,l=t.clientX,c=t.clientY;if(this.context.config.supportsCSSTransform&&!(0,ya.Z)(i)&&!(0,ya.Z)(s))n=i,r=s;else{var h=this.context.eventService.client2Viewport(new mc(l,c));n=h.x,r=h.y}return{x:n,y:r}},e.prototype.bootstrapEvent=function(t,n,r,i){t.view=r,t.originalEvent=null,t.nativeEvent=i,t.pointerId=n.pointerId,t.width=n.width,t.height=n.height,t.isPrimary=n.isPrimary,t.pointerType=n.pointerType,t.pressure=n.pressure,t.tangentialPressure=n.tangentialPressure,t.tiltX=n.tiltX,t.tiltY=n.tiltY,t.twist=n.twist,this.transferMouseData(t,n);var s=this.getViewportXY(n),l=s.x,c=s.y;t.viewport.x=l,t.viewport.y=c;var h=this.context.eventService.viewport2Canvas(t.viewport),p=h.x,v=h.y;return t.canvas.x=p,t.canvas.y=v,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=uO[t.type]||t.type),t},e.prototype.normalizeWheelEvent=function(t){var n=this.rootWheelEvent;this.transferMouseData(n,t),n.deltaMode=t.deltaMode,n.deltaX=t.deltaX,n.deltaY=t.deltaY,n.deltaZ=t.deltaZ;var r=this.getViewportXY(t),i=r.x,s=r.y;n.viewport.x=i,n.viewport.y=s;var l=this.context.eventService.viewport2Canvas(n.viewport),c=l.x,h=l.y;return n.canvas.x=c,n.canvas.y=h,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=t,n.type=t.type,n},e.prototype.transferMouseData=function(t,n){t.isTrusted=n.isTrusted,t.srcElement=n.srcElement,t.timeStamp=mv.now(),t.type=n.type,t.altKey=n.altKey,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.ctrlKey=n.ctrlKey,t.button=n.button,t.buttons=n.buttons,t.client.x=n.clientX,t.client.y=n.clientY,t.movement.x=n.movementX,t.movement.y=n.movementY,t.page.x=n.pageX,t.page.y=n.pageY,t.screen.x=n.screenX,t.screen.y=n.screenY,t.relatedTarget=null},e.prototype.setCursor=function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")},e.prototype.normalizeToPointerEvent=function(t,n){var r=[];if(n.isTouchEvent(t))for(var i=0;i<t.changedTouches.length;i++){var s=t.changedTouches[i];Vs(s.button)&&(s.button=0),Vs(s.buttons)&&(s.buttons=1),Vs(s.isPrimary)&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),Vs(s.width)&&(s.width=s.radiusX||1),Vs(s.height)&&(s.height=s.radiusY||1),Vs(s.tiltX)&&(s.tiltX=0),Vs(s.tiltY)&&(s.tiltY=0),Vs(s.pointerType)&&(s.pointerType="touch"),Vs(s.pointerId)&&(s.pointerId=s.identifier||0),Vs(s.pressure)&&(s.pressure=s.force||.5),Vs(s.twist)&&(s.twist=0),Vs(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,s.type=t.type,r.push(s)}else if(n.isMouseEvent(t)){var l=t;Vs(l.isPrimary)&&(l.isPrimary=!0),Vs(l.width)&&(l.width=1),Vs(l.height)&&(l.height=1),Vs(l.tiltX)&&(l.tiltX=0),Vs(l.tiltY)&&(l.tiltY=0),Vs(l.pointerType)&&(l.pointerType="mouse"),Vs(l.pointerId)&&(l.pointerId=lO),Vs(l.pressure)&&(l.pressure=.5),Vs(l.twist)&&(l.twist=0),Vs(l.tangentialPressure)&&(l.tangentialPressure=0),l.isNormalized=!0,r.push(l)}else r.push(t);return r},e.tag="Event",e}(),DI=[ni.CIRCLE,ni.ELLIPSE,ni.IMAGE,ni.RECT,ni.LINE,ni.POLYLINE,ni.POLYGON,ni.TEXT,ni.PATH,ni.HTML],LI=function(){function e(){}return e.prototype.isVisible=function(t,n){var r,i,s=n.cullable;if(!s.enable)return!0;var l=n.getRenderBounds();if(Pu.isEmpty(l))return!1;var c=t.getFrustum(),h=(i=(r=n.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return s.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,l,h||Lf.INDETERMINATE,c.planes),s.visible=s.visibilityPlaneMask!==Lf.OUTSIDE,s.visible},e.prototype.computeVisibilityWithPlaneMask=function(t,n,r,i){if(r===Lf.OUTSIDE||r===Lf.INSIDE)return r;for(var s=Lf.INSIDE,l=DI.indexOf(t.nodeName)>-1,c=0,h=i.length;c<h;++c){var p=1<<c;if(r&p&&!(l&&(c===4||c===5))){var v=i[c],y=v.normal,b=v.distance;if(cr.AK(y,n.getPositiveFarPoint(i[c]))+b<0)return Lf.OUTSIDE;cr.AK(y,n.getNegativeFarPoint(i[c]))+b<0&&(s|=p)}}return s},e}(),jS=function(){function e(){this.toSync=new Set,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return e.prototype.apply=function(t){var n=this,r,i=t.renderingService,s=t.renderingContext,l=t.rBushRoot,c=s.root.ownerDocument.defaultView;this.rBush=l;var h=function(T){var M=T.target;M.renderable.dirty=!0,i.dirtify()},p=function(T){var M=T.detail.affectChildren,R=T.target;M&&R.forEach(function(N){n.toSync.add(N)});for(var I=R;I;)I.renderable&&n.toSync.add(I),I=I.parentElement;i.dirtify()},v=function(T){var M=T.target;Ar.enableSizeAttenuation&&Ar.styleValueRegistry.updateSizeAttenuation(M,c.getCamera().getZoom()),Ar.enableCSSParsing&&Ar.styleValueRegistry.recalc(M),Ar.sceneGraphService.dirtifyToRoot(M),i.dirtify()},y=function(T){var M=T.target,R=M.rBushNode;R.aabb&&n.rBush.remove(R.aabb),n.toSync.delete(M),Ar.sceneGraphService.dirtifyToRoot(M),i.dirtify()};i.hooks.init.tap(e.tag,function(){c.addEventListener(ka.MOUNTED,v),c.addEventListener(ka.UNMOUNTED,y),c.addEventListener(ka.ATTR_MODIFIED,h),c.addEventListener(ka.BOUNDS_CHANGED,p)}),i.hooks.destroy.tap(e.tag,function(){c.removeEventListener(ka.MOUNTED,v),c.removeEventListener(ka.UNMOUNTED,y),c.removeEventListener(ka.ATTR_MODIFIED,h),c.removeEventListener(ka.BOUNDS_CHANGED,p),n.toSync.clear()});var b=(r=Ar.globalThis.requestIdleCallback)!==null&&r!==void 0?r:Vx.bind(Ar.globalThis);i.hooks.endFrame.tap(e.tag,function(){n.isFirstTimeRendering?(n.isFirstTimeRendering=!1,n.syncing=!0,b(function(){n.syncRTree(!0),n.isFirstTimeRenderingFinished=!0})):n.syncRTree()})},e.prototype.syncRTree=function(t){var n=this;if(t===void 0&&(t=!1),!(!t&&(this.syncing||this.toSync.size===0))){this.syncing=!0;var r=[];Array.from(this.toSync).filter(function(i){return i.isConnected}).forEach(function(i){var s=i.rBushNode;s&&s.aabb&&n.rBush.remove(s.aabb);var l=i.getRenderBounds();if(l){var c=i.renderable;t&&(c.dirtyRenderBounds||(c.dirtyRenderBounds=new Pu),c.dirtyRenderBounds.update(l.center,l.halfExtents));var h=(0,ae.CR)(l.getMin(),2),p=h[0],v=h[1],y=(0,ae.CR)(l.getMax(),2),b=y[0],T=y[1];s.aabb||(s.aabb={}),s.aabb.displayObject=i,s.aabb.minX=p,s.aabb.minY=v,s.aabb.maxX=b,s.aabb.maxY=T}s.aabb&&!isNaN(s.aabb.maxX)&&!isNaN(s.aabb.maxX)&&!isNaN(s.aabb.minX)&&!isNaN(s.aabb.minY)&&r.push(s.aabb)}),this.rBush.load(r),r.length=0,this.toSync.clear(),this.syncing=!1}},e.tag="Prepare",e}();function qa(e){return!!e.document}var Kc;(function(e){e.READY="ready",e.BEFORE_RENDER="beforerender",e.RERENDER="rerender",e.AFTER_RENDER="afterrender",e.BEFORE_DESTROY="beforedestroy",e.AFTER_DESTROY="afterdestroy",e.RESIZE="resize",e.DIRTY_RECTANGLE="dirtyrectangle",e.RENDERER_CHANGED="rendererchanged"})(Kc||(Kc={}));var qx=500,VS=.1,HS=1e3,Zm=new Jl(ka.MOUNTED),jg=new Jl(ka.UNMOUNTED),NI=new Jl(Kc.BEFORE_RENDER),WO=new Jl(Kc.RERENDER),FI=new Jl(Kc.AFTER_RENDER),Xm=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this)||this;r.Element=Dh,r.inited=!1,r.context={},r.document=new US,r.document.defaultView=r,r.customElements=new Ug;var i=n.container,s=n.canvas,l=n.offscreenCanvas,c=n.width,h=n.height,p=n.devicePixelRatio,v=n.renderer,y=n.background,b=n.cursor,T=n.document,M=n.requestAnimationFrame,R=n.cancelAnimationFrame,I=n.createImage,N=n.supportsPointerEvents,z=n.supportsTouchEvents,H=n.supportsCSSTransform,X=n.supportsMutipleCanvasesInOneContainer,Y=n.useNativeClickEvent,ne=n.alwaysTriggerPointerEventOnCanvas,pe=n.isTouchEvent,ye=n.isMouseEvent;X||nO(i,r);var De=c,Xe=h,Ke=p;return s&&(Ke=p||d_&&window.devicePixelRatio||1,Ke=Ke>=1?Math.ceil(Ke):1,De=c||sO(s)||s.width/Ke,Xe=h||jx(s)||s.height/Ke),l&&(Ar.offscreenCanvas=l),r.devicePixelRatio=Ke,r.requestAnimationFrame=M!=null?M:Vx.bind(Ar.globalThis),r.cancelAnimationFrame=R!=null?R:MS.bind(Ar.globalThis),r.supportsTouchEvents=z!=null?z:"ontouchstart"in Ar.globalThis,r.supportsPointerEvents=N!=null?N:!!Ar.globalThis.PointerEvent,r.isTouchEvent=pe!=null?pe:function(mt){return r.supportsTouchEvents&&mt instanceof Ar.globalThis.TouchEvent},r.isMouseEvent=ye!=null?ye:function(mt){return!Ar.globalThis.MouseEvent||mt instanceof Ar.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(mt instanceof Ar.globalThis.PointerEvent))},r.initRenderingContext({container:i,canvas:s,width:De,height:Xe,renderer:v,offscreenCanvas:l,devicePixelRatio:Ke,cursor:b||"default",background:y||"transparent",createImage:I,document:T,supportsCSSTransform:H,useNativeClickEvent:Y,alwaysTriggerPointerEventOnCanvas:ne}),r.initDefaultCamera(De,Xe,v.clipSpaceNearZ),r.initRenderer(v,!0),r}return t.prototype.initRenderingContext=function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},t.prototype.initDefaultCamera=function(n,r,i){var s=this,l=new Ar.CameraContribution;l.clipSpaceNearZ=i,l.setType($a.EXPLORING,Ap.DEFAULT).setPosition(n/2,r/2,qx).setFocalPoint(n/2,r/2,0).setOrthographic(n/-2,n/2,r/2,r/-2,VS,HS),l.canvas=this,l.eventEmitter.on(S1.UPDATED,function(){s.context.renderingContext.renderReasons.add(D0.CAMERA_CHANGED),Ar.enableSizeAttenuation&&s.getConfig().renderer.getConfig().enableSizeAttenuation&&s.updateSizeAttenuation()}),this.context.camera=l},t.prototype.updateSizeAttenuation=function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){Ar.styleValueRegistry.updateSizeAttenuation(r,n)})},t.prototype.getConfig=function(){return this.context.config},t.prototype.getRoot=function(){return this.document.documentElement},t.prototype.getCamera=function(){return this.context.camera},t.prototype.getContextService=function(){return this.context.contextService},t.prototype.getEventService=function(){return this.context.eventService},t.prototype.getRenderingService=function(){return this.context.renderingService},t.prototype.getRenderingContext=function(){return this.context.renderingContext},t.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(t.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),t.prototype.destroy=function(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new Jl(Kc.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var s=this.getRoot();this.unmountChildren(s),n&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new Jl(Kc.AFTER_DESTROY))},t.prototype.changeSize=function(n,r){this.resize(n,r)},t.prototype.resize=function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var s=this.context.camera,l=s.getProjectionMode();s.setPosition(n/2,r/2,qx).setFocalPoint(n/2,r/2,0),l===vf.ORTHOGRAPHIC?s.setOrthographic(n/-2,n/2,r/2,r/-2,s.getNear(),s.getFar()):s.setAspect(n/r),this.dispatchEvent(new Jl(Kc.RESIZE,{width:n,height:r}))},t.prototype.appendChild=function(n,r){return this.document.documentElement.appendChild(n,r)},t.prototype.insertBefore=function(n,r){return this.document.documentElement.insertBefore(n,r)},t.prototype.removeChild=function(n){return this.document.documentElement.removeChild(n)},t.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},t.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},t.prototype.render=function(n){var r=this;this.dispatchEvent(NI);var i=this.getRenderingService();i.render(this.getConfig(),n,function(){r.dispatchEvent(WO)}),this.dispatchEvent(FI)},t.prototype.run=function(){var n=this,r=function(i,s){n.render(s),n.frameId=n.requestAnimationFrame(r)};r()},t.prototype.initRenderer=function(n,r){var i=this;if(r===void 0&&(r=!1),!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new _1,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new GO,new jS,new II([new LI])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService((0,ae.pi)((0,ae.pi)({},Ar),this.context)),this.context.renderingService=new FO(Ar,this.context),this.context.eventService=new NO(Ar,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,r)})},t.prototype.initRenderingService=function(n,r,i){var s=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){s.inited=!0,r?(i?s.requestAnimationFrame(function(){s.dispatchEvent(new Jl(Kc.READY))}):s.dispatchEvent(new Jl(Kc.READY)),s.readyPromise&&s.resolveReadyPromise()):s.dispatchEvent(new Jl(Kc.RENDERER_CHANGED)),r||s.getRoot().forEach(function(l){var c=l.renderable;c&&(c.renderBoundsDirty=!0,c.boundsDirty=!0,c.dirty=!0)}),s.mountChildren(s.getRoot()),n.getConfig().enableAutoRendering&&s.run()})},t.prototype.loadRendererContainerModule=function(n){var r=this,i=n.getPlugins();i.forEach(function(s){s.context=r.context,s.init(Ar)})},t.prototype.setRenderer=function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),(0,ae.ev)([],(0,ae.CR)(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(s){s.destroy(Ar)}),this.initRenderer(n)}},t.prototype.setCursor=function(n){var r=this.getConfig();r.cursor=n,this.getContextService().applyCursorStyle(n)},t.prototype.unmountChildren=function(n){var r=this;n.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(n.isMutationObserved?n.dispatchEvent(jg):(jg.target=n,this.dispatchEvent(jg,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()},t.prototype.mountChildren=function(n){var r=this;this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,n.isMutationObserved?n.dispatchEvent(Zm):(Zm.target=n,this.dispatchEvent(Zm,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(i){r.mountChildren(i)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()},t.prototype.client2Viewport=function(n){return this.getEventService().client2Viewport(n)},t.prototype.viewport2Client=function(n){return this.getEventService().viewport2Client(n)},t.prototype.viewport2Canvas=function(n){return this.getEventService().viewport2Canvas(n)},t.prototype.canvas2Viewport=function(n){return this.getEventService().canvas2Viewport(n)},t.prototype.getPointByClient=function(n,r){return this.client2Viewport({x:n,y:r})},t.prototype.getClientByPoint=function(n,r){return this.viewport2Client({x:n,y:r})},t}(DS),BI=function(e){(0,ae.ZT)(t,e);function t(){var n=e.apply(this,(0,ae.ev)([],(0,ae.CR)(arguments),!1))||this;return n.landmarks=[],n}return t.prototype.rotate=function(n,r,i){if(this.relElevation=e0(r),this.relAzimuth=e0(n),this.relRoll=e0(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===$a.EXPLORING){var s=na(to(),[1,0,0],yl((this.rotateWorld?1:-1)*this.relElevation)),l=na(to(),[0,1,0],yl((this.rotateWorld?1:-1)*this.relAzimuth)),c=na(to(),[0,0,1],yl(this.relRoll)),h=Oc(to(),l,s);h=Oc(to(),h,c);var p=ti.fromQuat(ti.create(),h);ti.translate(this.matrix,this.matrix,[0,0,-this.distance]),ti.multiply(this.matrix,this.matrix,p),ti.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===$a.ORBITING||this.type===$a.EXPLORING?this._getPosition():this.type===$a.TRACKING&&this._getFocalPoint(),this._update(),this},t.prototype.pan=function(n,r){var i=Ru(n,r,0),s=cr.d9(this.position);return cr.IH(s,s,cr.bA(cr.Ue(),this.right,i[0])),cr.IH(s,s,cr.bA(cr.Ue(),this.up,i[1])),this._setPosition(s),this.triggerUpdate(),this},t.prototype.dolly=function(n){var r=this.forward,i=cr.d9(this.position),s=n*this.dollyingStep,l=this.distance+n*this.dollyingStep;return s=Math.max(Math.min(l,this.maxDistance),this.minDistance)-this.distance,i[0]+=s*r[0],i[1]+=s*r[1],i[2]+=s*r[2],this._setPosition(i),this.type===$a.ORBITING||this.type===$a.EXPLORING?this._getDistance():this.type===$a.TRACKING&&cr.IH(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this},t.prototype.cancelLandmarkAnimation=function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},t.prototype.createLandmark=function(n,r){var i,s,l,c;r===void 0&&(r={});var h=r.position,p=h===void 0?this.position:h,v=r.focalPoint,y=v===void 0?this.focalPoint:v,b=r.roll,T=r.zoom,M=new Ar.CameraContribution;M.setType(this.type,void 0),M.setPosition(p[0],(i=p[1])!==null&&i!==void 0?i:this.position[1],(s=p[2])!==null&&s!==void 0?s:this.position[2]),M.setFocalPoint(y[0],(l=y[1])!==null&&l!==void 0?l:this.focalPoint[1],(c=y[2])!==null&&c!==void 0?c:this.focalPoint[2]),M.setRoll(b!=null?b:this.roll),M.setZoom(T!=null?T:this.zoom);var R={name:n,matrix:ti.clone(M.getWorldTransform()),right:cr.d9(M.right),up:cr.d9(M.up),forward:cr.d9(M.forward),position:cr.d9(M.getPosition()),focalPoint:cr.d9(M.getFocalPoint()),distanceVector:cr.d9(M.getDistanceVector()),distance:M.getDistance(),dollyingStep:M.getDollyingStep(),azimuth:M.getAzimuth(),elevation:M.getElevation(),roll:M.getRoll(),relAzimuth:M.relAzimuth,relElevation:M.relElevation,relRoll:M.relRoll,zoom:M.getZoom()};return this.landmarks.push(R),R},t.prototype.gotoLandmark=function(n,r){var i=this;r===void 0&&(r={});var s=u(n)?this.landmarks.find(function(Xe){return Xe.name===n}):n;if(s){var l=(0,yu.Z)(r)?{duration:r}:r,c=l.easing,h=c===void 0?"linear":c,p=l.duration,v=p===void 0?100:p,y=l.easingFunction,b=y===void 0?void 0:y,T=l.onfinish,M=T===void 0?void 0:T,R=l.onframe,I=R===void 0?void 0:R,N=.01;if(v===0){this.syncFromLandmark(s),M&&M();return}this.cancelLandmarkAnimation();var z=s.position,H=s.focalPoint,X=s.zoom,Y=s.roll,ne=b||Ar.EasingFunction(h),pe,ye=function(){i.setFocalPoint(H),i.setPosition(z),i.setRoll(Y),i.setZoom(X),i.computeMatrix(),i.triggerUpdate(),M&&M()},De=function(Xe){pe===void 0&&(pe=Xe);var Ke=Xe-pe;if(Ke>v){ye();return}var mt=ne(Ke/v),Qe=cr.Ue(),ut=cr.Ue(),ct=1,gt=0;cr.t7(Qe,i.focalPoint,H,mt),cr.t7(ut,i.position,z,mt),gt=i.roll*(1-mt)+Y*mt,ct=i.zoom*(1-mt)+X*mt,i.setFocalPoint(Qe),i.setPosition(ut),i.setRoll(gt),i.setZoom(ct);var Xt=cr.TK(Qe,H)+cr.TK(ut,z);if(Xt<=N&&X==null&&Y==null){ye();return}i.computeMatrix(),i.triggerUpdate(),Ke<v&&(I&&I(mt),i.landmarkAnimationID=i.canvas.requestAnimationFrame(De))};this.canvas.requestAnimationFrame(De)}},t.prototype.syncFromLandmark=function(n){this.matrix=ti.copy(this.matrix,n.matrix),this.right=cr.JG(this.right,n.right),this.up=cr.JG(this.up,n.up),this.forward=cr.JG(this.forward,n.forward),this.position=cr.JG(this.position,n.position),this.focalPoint=cr.JG(this.focalPoint,n.focalPoint),this.distanceVector=cr.JG(this.distanceVector,n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance,this.zoom=n.zoom},t}(Um);Ar.CameraContribution=BI;var ZO=function(){function e(t,n){this.type=t,this.target=n,this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[]}return e.copy=function(t){var n=new e(t.type,t.target);return n.addedNodes=t.addedNodes.slice(),n.removedNodes=t.removedNodes.slice(),n.previousSibling=t.previousSibling,n.nextSibling=t.nextSibling,n.attributeName=t.attributeName,n.attributeNamespace=t.attributeNamespace,n.oldValue=t.oldValue,n},e}(),XO=0,g_=new WeakMap,kI=function(){function e(t,n,r){this.observer=t,this.target=n,this.options=r,this.transientObservedNodes=[]}return e.prototype.enqueue=function(t){var n=this.observer.records,r=n.length;if(n.length>0){var i=n[r-1],s=YO(i,t);if(s){n[r-1]=s;return}}else qO(this.observer);n[r]=t},e.prototype.addListeners=function(){this.addListeners_(this.target)},e.prototype.addListeners_=function(t){var n=this.options;n.attributes&&t.addEventListener(ka.ATTR_MODIFIED,this,!0),n.childList&&t.addEventListener(ka.INSERTED,this,!0),(n.childList||n.subtree)&&t.addEventListener(ka.REMOVED,this,!0)},e.prototype.removeListeners=function(){this.removeListeners_(this.target)},e.prototype.removeListeners_=function(t){var n=this.options;n.attributes&&t.removeEventListener(ka.ATTR_MODIFIED,this,!0),n.childList&&t.removeEventListener(ka.INSERTED,this,!0),(n.childList||n.subtree)&&t.removeEventListener(ka.REMOVED,this,!0)},e.prototype.removeTransientObservers=function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(n){this.removeListeners_(n);for(var r=g_.get(n),i=0;i<r.length;i++)if(r[i]===this){r.splice(i,1);break}},this)},e.prototype.handleEvent=function(t){t.stopImmediatePropagation();var n,r;switch(t.type){case ka.ATTR_MODIFIED:var i=t.attrName,s=t.relatedNode.namespaceURI;r=t.target,n=GS("attributes",r),n.attributeName=i,n.attributeNamespace=s;var l=t.attrChange===gv.ADDITION?null:t.prevValue;$O(r,function(b){if(b.attributes&&!(b.attributeFilter&&b.attributeFilter.length&&b.attributeFilter.indexOf(i)===-1&&b.attributeFilter.indexOf(s)===-1))return b.attributeOldValue?zI(l):n});break;case ka.REMOVED:case ka.INSERTED:r=t.relatedNode;var c=t.target,h=void 0,p=void 0;t.type===ka.INSERTED?(h=[c],p=[]):(h=[],p=[c]);var v=c.previousSibling,y=c.nextSibling;n=GS("childList",r),n.addedNodes=h,n.removedNodes=p,n.previousSibling=v,n.nextSibling=y,$O(r,function(b){if(b.childList)return n})}B1()},e}(),dj=function(){function e(t){this.callback=t,this.nodes=[],this.records=[],this.uid=XO++}return e.prototype.observe=function(t,n){if(!n.childList&&!n.attributes&&!n.characterData||n.attributeOldValue&&!n.attributes||n.attributeFilter&&n.attributeFilter.length&&!n.attributes||n.characterDataOldValue&&!n.characterData)throw new SyntaxError;var r=g_.get(t);r||g_.set(t,r=[]);for(var i,s=0;s<r.length;s++)if(r[s].observer===this){i=r[s],i.removeListeners(),i.options=n;break}i||(i=new kI(this,t,n),r.push(i),this.nodes.push(t)),i.addListeners()},e.prototype.disconnect=function(){var t=this;this.nodes.forEach(function(n){for(var r=g_.get(n),i=0;i<r.length;i++){var s=r[i];if(s.observer===t){s.removeListeners(),r.splice(i,1);break}}},this),this.records=[]},e.prototype.takeRecords=function(){var t=this.records;return this.records=[],t},e}(),Ym,cd;function GS(e,t){return Ym=new ZO(e,t)}function zI(e){return cd||(cd=ZO.copy(Ym),cd.oldValue=e,cd)}function B1(){Ym=cd=void 0}function UI(e){return e===cd||e===Ym}function YO(e,t){return e===t?e:cd&&UI(e)?cd:null}function jI(e){e.nodes.forEach(function(t){var n=g_.get(t);n&&n.forEach(function(r){r.observer===e&&r.removeTransientObservers()})})}function $O(e,t){for(var n=e;n;n=n.parentNode){var r=g_.get(n);if(r)for(var i=0;i<r.length;i++){var s=r[i],l=s.options;if(!(n!==e&&!l.subtree)){var c=t(l);c&&s.enqueue(c)}}}}var Kx=!1,Qx=[];function qO(e){Qx.push(e),Kx||(Kx=!0,typeof Ar.globalThis!="undefined"?Ar.globalThis.setTimeout(WS):WS())}function WS(){Kx=!1;var e=Qx;Qx=[],e.sort(function(n,r){return n.uid-r.uid});var t=!1;e.forEach(function(n){var r=n.takeRecords();jI(n),r.length&&(n.callback(r,n),t=!0)}),t&&WS()}var k1=function(e){(0,ae.ZT)(t,e);function t(n,r,i,s){var l=e.call(this,n)||this;return l.currentTime=i,l.timelineTime=s,l.target=r,l.type="finish",l.bubbles=!1,l.currentTarget=r,l.defaultPrevented=!1,l.eventPhase=l.AT_TARGET,l.timeStamp=Date.now(),l.currentTime=i,l.timelineTime=s,l}return t}(Zx),z1=0,ZS=function(){function e(t,n){var r;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=n,this.id="".concat(z1++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(e.prototype,"pending",{get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,r){t.resolveReadyPromise=function(){n(t)},t.rejectReadyPromise=function(){r(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,r){t.resolveFinishedPromise=function(){n(t)},t.rejectFinishedPromise=function(){r(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var n;t=Number(t),!isNaN(t)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_needsTick",{get:function(){return this.pending||this.playState==="running"||!this._finishedFlag},enumerable:!1,configurable:!0}),e.prototype.updatePromises=function(){var t=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==t&&(n==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):t==="pending"?this.resolveReadyPromise():n==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&n!==t&&(n==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):n==="finished"?this.resolveFinishedPromise():t==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise},e.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()},e.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()},e.prototype.finish=function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},e.prototype.cancel=function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new k1(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(n)})}},e.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()},e.prototype.updatePlaybackRate=function(t){this.playbackRate=t},e.prototype.targetAnimations=function(){var t,n=(t=this.effect)===null||t===void 0?void 0:t.target;return n.getAnimations()},e.prototype.markTarget=function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)},e.prototype.unmarkTarget=function(){var t=this.targetAnimations(),n=t.indexOf(this);n!==-1&&t.splice(n,1)},e.prototype.tick=function(t,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(t))},e.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")},e.prototype.persist=function(){throw new Error(Co)},e.prototype.addEventListener=function(t,n,r){throw new Error(Co)},e.prototype.removeEventListener=function(t,n,r){throw new Error(Co)},e.prototype.dispatchEvent=function(t){throw new Error(Co)},e.prototype.commitStyles=function(){throw new Error(Co)},e.prototype.ensureAlive=function(){var t,n;this.playbackRate<0&&this.currentTime===0?this._inEffect=!!(!((t=this.effect)===null||t===void 0)&&t.update(-1)):this._inEffect=!!(!((n=this.effect)===null||n===void 0)&&n.update(this.currentTime)),!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))},e.prototype.tickCurrentTime=function(t,n){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},e.prototype.fireEvents=function(t){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var r=new k1(null,this,this.currentTime,t);setTimeout(function(){n.onfinish&&n.onfinish(r)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var i=new k1(null,this,this.currentTime,t);this.onframe(i)}this._finishedFlag=!1}},e}(),Jx=4,KO=.001,Vg=1e-7,QO=10,Hg=11,N0=1/(Hg-1),JO=typeof Float32Array=="function",e3=function(e,t){return 1-3*t+3*e},t3=function(e,t){return 3*t-6*e},e2=function(e){return 3*e},t0=function(e,t,n){return((e3(t,n)*e+t3(t,n))*e+e2(t))*e},$m=function(e,t,n){return 3*e3(t,n)*e*e+2*t3(t,n)*e+e2(t)},n3=function(e,t,n,r,i){var s,l,c=0;do l=t+(n-t)/2,s=t0(l,r,i)-e,s>0?n=l:t=l;while(Math.abs(s)>Vg&&++c<QO);return l},XS=function(e,t,n,r){for(var i=0;i<Jx;++i){var s=$m(t,n,r);if(s===0)return t;var l=t0(t,n,r)-e;t-=l/s}return t},t2=function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return function(c){return c};for(var i=JO?new Float32Array(Hg):new Array(Hg),s=0;s<Hg;++s)i[s]=t0(s*N0,e,n);var l=function(c){for(var h=0,p=1,v=Hg-1;p!==v&&i[p]<=c;++p)h+=N0;--p;var y=(c-i[p])/(i[p+1]-i[p]),b=h+y*N0,T=$m(b,e,n);return T>=KO?XS(c,b,e,n):T===0?b:n3(c,h,h+N0,e,n)};return function(c){return c===0||c===1?c:t0(l(c),t,r)}},r3=function(e){return e=e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},y_=function(e){return Math.pow(e,2)},U1=function(e){return Math.pow(e,3)},qm=function(e){return Math.pow(e,4)},j1=function(e){return Math.pow(e,5)},__=function(e){return Math.pow(e,6)},V1=function(e){return 1-Math.cos(e*Math.PI/2)},H1=function(e){return 1-Math.sqrt(1-e*e)},G1=function(e){return e*e*(3*e-2)},W1=function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)},Z1=function(e,t){t===void 0&&(t=[]);var n=(0,ae.CR)(t,2),r=n[0],i=r===void 0?1:r,s=n[1],l=s===void 0?.5:s,c=(0,d.Z)(Number(i),1,10),h=(0,d.Z)(Number(l),.1,2);return e===0||e===1?e:-c*Math.pow(2,10*(e-1))*Math.sin((e-1-h/(Math.PI*2)*Math.asin(1/c))*(Math.PI*2)/h)},X1=function(e,t,n){t===void 0&&(t=[]);var r=(0,ae.CR)(t,4),i=r[0],s=i===void 0?1:i,l=r[1],c=l===void 0?100:l,h=r[2],p=h===void 0?10:h,v=r[3],y=v===void 0?0:v;s=(0,d.Z)(s,.1,1e3),c=(0,d.Z)(c,.1,1e3),p=(0,d.Z)(p,.1,1e3),y=(0,d.Z)(y,.1,1e3);var b=Math.sqrt(c/s),T=p/(2*Math.sqrt(c*s)),M=T<1?b*Math.sqrt(1-T*T):0,R=1,I=T<1?(T*b+-y)/M:-y+b,N=n?n*e/1e3:e;return T<1?N=Math.exp(-N*T*b)*(R*Math.cos(M*N)+I*Math.sin(M*N)):N=(R+I*N)*Math.exp(-N*b),e===0||e===1?e:1-N},n2=function(e,t){t===void 0&&(t=[]);var n=(0,ae.CR)(t,2),r=n[0],i=r===void 0?10:r,s=n[1],l=s=="start"?Math.ceil:Math.floor;return l((0,d.Z)(e,0,1)*i)/i},r2=function(e,t){t===void 0&&(t=[]);var n=(0,ae.CR)(t,4),r=n[0],i=n[1],s=n[2],l=n[3];return t2(r,i,s,l)(e)},Y1=t2(.42,0,1,1),Pp=function(e){return function(t,n,r){return n===void 0&&(n=[]),1-e(1-t,n,r)}},Ip=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?e(t*2,n,r)/2:1-e(t*-2+2,n,r)/2}},Dp=function(e){return function(t,n,r){return n===void 0&&(n=[]),t<.5?(1-e(1-t*2,n,r))/2:(e(t*2-1,n,r)+1)/2}},YS={steps:n2,"step-start":function(e){return n2(e,[1,"start"])},"step-end":function(e){return n2(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":r2,ease:function(e){return r2(e,[.25,.1,.25,1])},in:Y1,out:Pp(Y1),"in-out":Ip(Y1),"out-in":Dp(Y1),"in-quad":y_,"out-quad":Pp(y_),"in-out-quad":Ip(y_),"out-in-quad":Dp(y_),"in-cubic":U1,"out-cubic":Pp(U1),"in-out-cubic":Ip(U1),"out-in-cubic":Dp(U1),"in-quart":qm,"out-quart":Pp(qm),"in-out-quart":Ip(qm),"out-in-quart":Dp(qm),"in-quint":j1,"out-quint":Pp(j1),"in-out-quint":Ip(j1),"out-in-quint":Dp(j1),"in-expo":__,"out-expo":Pp(__),"in-out-expo":Ip(__),"out-in-expo":Dp(__),"in-sine":V1,"out-sine":Pp(V1),"in-out-sine":Ip(V1),"out-in-sine":Dp(V1),"in-circ":H1,"out-circ":Pp(H1),"in-out-circ":Ip(H1),"out-in-circ":Dp(H1),"in-back":G1,"out-back":Pp(G1),"in-out-back":Ip(G1),"out-in-back":Dp(G1),"in-bounce":W1,"out-bounce":Pp(W1),"in-out-bounce":Ip(W1),"out-in-bounce":Dp(W1),"in-elastic":Z1,"out-elastic":Pp(Z1),"in-out-elastic":Ip(Z1),"out-in-elastic":Dp(Z1),spring:X1,"spring-in":X1,"spring-out":Pp(X1),"spring-in-out":Ip(X1),"spring-out-in":Dp(X1)},i3=function(e){return r3(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},ws=function(e){return YS[i3(e)]||YS.linear},o3=function(e){return e},a3=1,Lh=.5,Eu=0;function Yf(e,t){return function(n){if(n>=1)return 1;var r=1/e;return n+=t*r,n-n%r}}var Lp="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",s3=new RegExp("cubic-bezier\\("+Lp+","+Lp+","+Lp+","+Lp+"\\)"),l3=/steps\(\s*(\d+)\s*\)/,u3=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function $1(e){var t=s3.exec(e);if(t)return t2.apply(void 0,(0,ae.ev)([],(0,ae.CR)(t.slice(1).map(Number)),!1));var n=l3.exec(e);if(n)return Yf(Number(n[1]),Eu);var r=u3.exec(e);return r?Yf(Number(r[1]),{start:a3,middle:Lh,end:Eu}[r[2]]):ws(e)}function i2(e){return Math.abs(Wd(e)/(e.playbackRate||1))}function Wd(e){var t;return e.duration===0||e.iterations===0?0:(e.duration==="auto"?0:Number(e.duration))*((t=e.iterations)!==null&&t!==void 0?t:1)}var yv=0,Gg=1,q1=2,o2=3;function c3(e,t,n){if(t===null)return yv;var r=n.endTime;return t<Math.min(n.delay,r)?Gg:t>=Math.min(n.delay+e+n.endDelay,r)?q1:o2}function f3(e,t,n,r,i){switch(r){case Gg:return t==="backwards"||t==="both"?0:null;case o2:return n-i;case q1:return t==="forwards"||t==="both"?e:null;case yv:return null}}function b_(e,t,n,r,i){var s=i;return e===0?t!==Gg&&(s+=n):s+=r/e,s}function h3(e,t,n,r,i,s){var l=e===1/0?t%1:e%1;return l===0&&n===q1&&r!==0&&(i!==0||s===0)&&(l=1),l}function p3(e,t,n,r){return e===q1&&t===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function VI(e,t,n){var r=e;if(e!=="normal"&&e!=="reverse"){var i=t;e==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function $S(e,t,n){var r=c3(e,t,n),i=f3(e,n.fill,t,r,n.delay);if(i===null)return null;var s=n.duration==="auto"?0:n.duration,l=b_(s,r,n.iterations,i,n.iterationStart),c=h3(l,n.iterationStart,r,n.iterations,i,s),h=p3(r,n.iterations,c,l),p=VI(n.direction,h,c);return n.currentIteration=h,n.progress=p,n.easingFunction(p)}function qS(e,t,n){var r=HI(e,t),i=Np(r,n);return function(s,l){if(l!==null)i.filter(function(h){return l>=h.applyFrom&&l<h.applyTo}).forEach(function(h){var p=l-h.startOffset,v=h.endOffset-h.startOffset,y=v===0?0:p/v;s.setAttribute(h.property,h.interpolation(y),!1,!1)});else for(var c in r)_v(c)&&s.setAttribute(c,null)}}function _v(e){return e!=="offset"&&e!=="easing"&&e!=="composite"&&e!=="computedOffset"}function HI(e,t){for(var n={},r=0;r<e.length;r++)for(var i in e[r])if(_v(i)){var s={offset:e[r].offset,computedOffset:e[r].computedOffset,easing:e[r].easing,easingFunction:$1(e[r].easing)||t.easingFunction,value:e[r][i]};n[i]=n[i]||[],n[i].push(s)}return n}function Np(e,t){var n=[];for(var r in e)for(var i=e[r],s=0;s<i.length-1;s++){var l=s,c=s+1,h=i[l].computedOffset,p=i[c].computedOffset,v=h,y=p;s===0&&(v=-1/0,p===0&&(c=l)),s===i.length-2&&(y=1/0,h===1&&(l=c)),n.push({applyFrom:v,applyTo:y,startOffset:i[l].computedOffset,endOffset:i[c].computedOffset,easingFunction:i[l].easingFunction,property:r,interpolation:Wo(r,i[l].value,i[c].value,t)})}return n.sort(function(b,T){return b.startOffset-T.startOffset}),n}var KS=function(e,t,n){return function(r){var i=a2(e,t,r);return!Ar.enableCSSParsing&&(0,yu.Z)(i)?i:n(i)}};function Wo(e,t,n,r){var i=Jv[e];if(i&&i.syntax&&i.int){var s=Ar.styleValueRegistry.getPropertySyntax(i.syntax);if(s){var l=void 0,c=void 0;if(Ar.enableCSSParsing){var h=Ar.styleValueRegistry.parseProperty(e,t,r,!1),p=Ar.styleValueRegistry.parseProperty(e,n,r,!1);l=Ar.styleValueRegistry.computeProperty(e,h,r,!1),c=Ar.styleValueRegistry.computeProperty(e,p,r,!1)}else{var v=s.parserWithCSSDisabled;l=v?v(t,r):t,c=v?v(n,r):n}var y=s.mixer(l,c,r);if(y){var b=KS.apply(void 0,(0,ae.ev)([],(0,ae.CR)(y),!1));return function(T){return T===0?t:T===1?n:b(T)}}}}return KS(!1,!0,function(T){return T?n:t})}function a2(e,t,n){if(typeof e=="number"&&typeof t=="number")return e*(1-n)+t*n;if(typeof e=="boolean"&&typeof t=="boolean"||typeof e=="string"&&typeof t=="string")return n<.5?e:t;if(Array.isArray(e)&&Array.isArray(t)){for(var r=e.length,i=t.length,s=Math.max(r,i),l=[],c=0;c<s;c++)l.push(a2(e[c<r?c:r-1],t[c<i?c:i-1],n));return l}throw new Error("Mismatched interpolation arguments "+e+":"+t)}var QS=function(){function e(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=o3,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(e.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=$1(t),this._easing=t},enumerable:!1,configurable:!0}),e}();function v3(e){var t=[];for(var n in e)if(!(n in["easing","offset","composite"])){var r=e[n];Array.isArray(r)||(r=[r]);for(var i=r.length,s=0;s<i;s++){if(!t[s]){var l={};"offset"in e&&(l.offset=Number(e.offset)),"easing"in e&&(l.easing=e.easing),"composite"in e&&(l.composite=e.composite),t[s]=l}r[s]!==void 0&&r[s]!==null&&(t[s][n]=r[s])}}return t.sort(function(c,h){return(c.computedOffset||0)-(h.computedOffset||0)}),t}function s2(e,t){if(e===null)return[];Array.isArray(e)||(e=v3(e));for(var n=e.map(function(h){var p={};t!=null&&t.composite&&(p.composite="auto");for(var v in h){var y=h[v];if(v==="offset"){if(y!==null){if(y=Number(y),!isFinite(y))throw new Error("Keyframe offsets must be numbers.");if(y<0||y>1)throw new Error("Keyframe offsets must be between 0 and 1.");p.computedOffset=y}}else if(v==="composite"&&["replace","add","accumulate","auto"].indexOf(y)===-1)throw new Error("".concat(y," compositing is not supported"));p[v]=y}return p.offset===void 0&&(p.offset=null),p.easing===void 0&&(p.easing=(t==null?void 0:t.easing)||"linear"),p.composite===void 0&&(p.composite="auto"),p}),r=!0,i=-1/0,s=0;s<n.length;s++){var l=n[s].offset;if((0,ya.Z)(l))r=!1;else{if(l<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=l}}n=n.filter(function(h){return Number(h.offset)>=0&&Number(h.offset)<=1});function c(){var h,p,v=n.length;n[v-1].computedOffset=Number((h=n[v-1].offset)!==null&&h!==void 0?h:1),v>1&&(n[0].computedOffset=Number((p=n[0].offset)!==null&&p!==void 0?p:0));for(var y=0,b=Number(n[0].computedOffset),T=1;T<v;T++){var M=n[T].computedOffset;if(!(0,ya.Z)(M)&&!(0,ya.Z)(b)){for(var R=1;R<T-y;R++)n[y+R].computedOffset=b+(Number(M)-b)*R/(T-y);y=T,b=Number(M)}}}return r||c(),n}var m3="backwards|forwards|both|none".split("|"),g3="reverse|alternate|alternate-reverse".split("|");function y3(e,t){var n=new QS;return t&&(n.fill="both",n.duration="auto"),typeof e=="number"&&!isNaN(e)?n.duration=e:e!==void 0&&Object.keys(e).forEach(function(r){if(e[r]!==void 0&&e[r]!==null&&e[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof e[r]!="number"||isNaN(e[r]))||r==="fill"&&m3.indexOf(e[r])===-1||r==="direction"&&g3.indexOf(e[r])===-1)return;n[r]=e[r]}}),n}function _3(e,t){return e=b3(e!=null?e:{duration:"auto"}),y3(e,t)}function b3(e){return typeof e=="number"&&(isNaN(e)?e={duration:"auto"}:e={duration:e}),e}var x_=function(){function e(t,n,r){var i=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=_3(r,!1),this.timing.effect=this,this.timing.activeDuration=i2(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=s2(n,this.timing),this.interpolations=qS(this.normalizedKeyframes,this.timing,this.target);var s=Ar.globalThis.Proxy;this.computedTiming=s?new s(this.timing,{get:function(l,c){return c==="duration"?l.duration==="auto"?0:l.duration:c==="fill"?l.fill==="auto"?"none":l.fill:c==="localTime"?i.animation&&i.animation.currentTime||null:c==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:l.currentIteration||0:c==="progress"?!i.animation||i.animation.playState!=="running"?null:l.progress||0:l[c]},set:function(){return!0}}):this.timing}return e.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},e.prototype.update=function(t){return t===null?!1:(this.timeFraction=$S(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)},e.prototype.getKeyframes=function(){return this.normalizedKeyframes},e.prototype.setKeyframes=function(t){this.normalizedKeyframes=s2(t)},e.prototype.getComputedTiming=function(){return this.computedTiming},e.prototype.getTiming=function(){return this.timing},e.prototype.updateTiming=function(t){var n=this;Object.keys(t||{}).forEach(function(r){n.timing[r]=t[r]})},e}();function E_(e,t){return Number(e.id)-Number(t.id)}var Wg=function(){function e(t){var n=this;this.document=t,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(E_),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(s){s[1](r)}),n.applyPendingEffects()}}return e.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},e.prototype.isTicking=function(){return this.inTick},e.prototype.play=function(t,n,r){var i=new x_(t,n,r),s=new ZS(i,this);return this.animations.push(s),this.restartWebAnimationsNextTick(),s.updatePromises(),s.play(),s.updatePromises(),s},e.prototype.applyDirtiedAnimation=function(t){var n=this;if(!this.inTick){t.markTarget();var r=t.targetAnimations();r.sort(E_);var i=this.tick(Number(this.currentTime),!1,r.slice())[1];i.forEach(function(s){var l=n.animations.indexOf(s);l!==-1&&n.animations.splice(l,1)}),this.applyPendingEffects()}},e.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},e.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},e.prototype.applyPendingEffects=function(){this.pendingEffects.forEach(function(t){t==null||t.applyInterpolations()}),this.pendingEffects=[]},e.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})},e.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})},e.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},e.prototype.rAF=function(t){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,t]),n},e.prototype.requestAnimationFrame=function(t){var n=this;return this.rAF(function(r){n.updateAnimationsPromises(),t(r),n.updateAnimationsPromises()})},e.prototype.tick=function(t,n,r){var i,s,l=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var c=[],h=[],p=[],v=[];return r.forEach(function(y){y.tick(t,n),y._inEffect?(h.push(y.effect),y.markTarget()):(c.push(y.effect),y.unmarkTarget()),y._needsTick&&(l.ticking=!0);var b=y._inEffect||y._needsTick;y._inTimeline=b,b?p.push(y):v.push(y)}),(i=this.pendingEffects).push.apply(i,(0,ae.ev)([],(0,ae.CR)(c),!1)),(s=this.pendingEffects).push.apply(s,(0,ae.ev)([],(0,ae.CR)(h),!1)),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[p,v]},e}();Ar.EasingFunction=$1,Ar.AnimationTimeline=Wg;function Zg(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,s=i===void 0?0:i,l=t.r;e.arc(r,s,l,0,Math.PI*2,!1)}function l2(e,t){var n=t.cx,r=n===void 0?0:n,i=t.cy,s=i===void 0?0:i,l=t.rx,c=t.ry;if(e.ellipse)e.ellipse(r,s,l,c,0,0,Math.PI*2,!1);else{var h=l>c?l:c,p=l>c?1:l/c,v=l>c?c/l:1;e.save(),e.scale(p,v),e.arc(r,s,h,0,Math.PI*2)}}function S_(e,t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2,l=t.markerStart,c=t.markerEnd,h=t.markerStartOffset,p=t.markerEndOffset,v=0,y=0,b=0,T=0,M=0,R,I;l&&ca(l)&&h&&(R=i-n,I=s-r,M=Math.atan2(I,R),v=Math.cos(M)*(h||0),y=Math.sin(M)*(h||0)),c&&ca(c)&&p&&(R=n-i,I=r-s,M=Math.atan2(I,R),b=Math.cos(M)*(p||0),T=Math.sin(M)*(p||0)),e.moveTo(n+v,r+y),e.lineTo(i+b,s+T)}function JS(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.d,c=l.absolutePath,h=l.segments,p=0,v=0,y=0,b=0,T=0,M,R;if(n&&ca(n)&&i){var I=(0,ae.CR)(n.parentNode.getStartTangent(),2),N=I[0],z=I[1];M=N[0]-z[0],R=N[1]-z[1],T=Math.atan2(R,M),p=Math.cos(T)*(i||0),v=Math.sin(T)*(i||0)}if(r&&ca(r)&&s){var H=(0,ae.CR)(r.parentNode.getEndTangent(),2),N=H[0],z=H[1];M=N[0]-z[0],R=N[1]-z[1],T=Math.atan2(R,M),y=Math.cos(T)*(s||0),b=Math.sin(T)*(s||0)}for(var X=0;X<c.length;X++){var Y=c[X],ne=Y[0],pe=c[X+1],ye=X===0&&(p!==0||v!==0),De=(X===c.length-1||pe&&(pe[0]==="M"||pe[0]==="Z"))&&y!==0&&b!==0;switch(ne){case"M":ye?(e.moveTo(Y[1]+p,Y[2]+v),e.lineTo(Y[1],Y[2])):e.moveTo(Y[1],Y[2]);break;case"L":De?e.lineTo(Y[1]+y,Y[2]+b):e.lineTo(Y[1],Y[2]);break;case"Q":e.quadraticCurveTo(Y[1],Y[2],Y[3],Y[4]),De&&e.lineTo(Y[3]+y,Y[4]+b);break;case"C":e.bezierCurveTo(Y[1],Y[2],Y[3],Y[4],Y[5],Y[6]),De&&e.lineTo(Y[5]+y,Y[6]+b);break;case"A":{var Xe=h[X].arcParams,Ke=Xe.cx,mt=Xe.cy,Qe=Xe.rx,ut=Xe.ry,ct=Xe.startAngle,gt=Xe.endAngle,Xt=Xe.xRotation,Rt=Xe.sweepFlag;if(e.ellipse)e.ellipse(Ke,mt,Qe,ut,Xt,ct,gt,!!(1-Rt));else{var kt=Qe>ut?Qe:ut,wn=Qe>ut?1:Qe/ut,zn=Qe>ut?ut/Qe:1;e.translate(Ke,mt),e.rotate(Xt),e.scale(wn,zn),e.arc(0,0,kt,ct,gt,!!(1-Rt)),e.scale(1/wn,1/zn),e.rotate(-Xt),e.translate(-Ke,-mt)}De&&e.lineTo(Y[6]+y,Y[7]+b);break}case"Z":e.closePath();break}}}function tm(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.points.points,c=l.length,h=l[0][0],p=l[0][1],v=l[c-1][0],y=l[c-1][1],b=0,T=0,M=0,R=0,I=0,N,z;n&&ca(n)&&i&&(N=l[1][0]-l[0][0],z=l[1][1]-l[0][1],I=Math.atan2(z,N),b=Math.cos(I)*(i||0),T=Math.sin(I)*(i||0)),r&&ca(r)&&s&&(N=l[c-1][0]-l[0][0],z=l[c-1][1]-l[0][1],I=Math.atan2(z,N),M=Math.cos(I)*(s||0),R=Math.sin(I)*(s||0)),e.moveTo(h+(b||M),p+(T||R));for(var H=1;H<c-1;H++){var X=l[H];e.lineTo(X[0],X[1])}e.lineTo(v,y)}function x3(e,t){var n=t.markerStart,r=t.markerEnd,i=t.markerStartOffset,s=t.markerEndOffset,l=t.points.points,c=l.length,h=l[0][0],p=l[0][1],v=l[c-1][0],y=l[c-1][1],b=0,T=0,M=0,R=0,I=0,N,z;n&&ca(n)&&i&&(N=l[1][0]-l[0][0],z=l[1][1]-l[0][1],I=Math.atan2(z,N),b=Math.cos(I)*(i||0),T=Math.sin(I)*(i||0)),r&&ca(r)&&s&&(N=l[c-2][0]-l[c-1][0],z=l[c-2][1]-l[c-1][1],I=Math.atan2(z,N),M=Math.cos(I)*(s||0),R=Math.sin(I)*(s||0)),e.moveTo(h+b,p+T);for(var H=1;H<c-1;H++){var X=l[H];e.lineTo(X[0],X[1])}e.lineTo(v+M,y+R)}function E3(e,t){var n=t.x,r=n===void 0?0:n,i=t.y,s=i===void 0?0:i,l=t.radius,c=t.width,h=t.height,p=c,v=h,y=l&&l.some(function(X){return X!==0});if(!y)e.rect(r,s,p,v);else{var b=c>0?1:-1,T=h>0?1:-1,M=b+T===0,R=(0,ae.CR)(l.map(function(X){return(0,d.Z)(X,0,Math.min(Math.abs(p)/2,Math.abs(v)/2))}),4),I=R[0],N=R[1],z=R[2],H=R[3];e.moveTo(b*I+r,s),e.lineTo(p-b*N+r,s),N!==0&&e.arc(p-b*N+r,T*N+s,N,-T*Math.PI/2,b>0?0:Math.PI,M),e.lineTo(p+r,v-T*z+s),z!==0&&e.arc(p-b*z+r,v-T*z+s,z,b>0?0:Math.PI,T>0?Math.PI/2:1.5*Math.PI,M),e.lineTo(b*H+r,v+s),H!==0&&e.arc(b*H+r,v-T*H+s,H,T>0?Math.PI/2:-Math.PI/2,b>0?Math.PI:0,M),e.lineTo(r,T*I+s),I!==0&&e.arc(b*I+r,T*I+s,I,b>0?Math.PI:0,T>0?Math.PI*1.5:Math.PI/2,M)}}var u2=function(e){(0,ae.ZT)(t,e);function t(){var n=e.apply(this,(0,ae.ev)([],(0,ae.CR)(arguments),!1))||this;return n.name="canvas-path-generator",n}return t.prototype.init=function(){var n,r=(n={},n[ni.CIRCLE]=Zg,n[ni.ELLIPSE]=l2,n[ni.RECT]=E3,n[ni.LINE]=S_,n[ni.POLYLINE]=x3,n[ni.POLYGON]=tm,n[ni.PATH]=JS,n[ni.TEXT]=void 0,n[ni.GROUP]=void 0,n[ni.IMAGE]=void 0,n[ni.HTML]=void 0,n[ni.MESH]=void 0,n);this.context.pathGeneratorFactory=r},t.prototype.destroy=function(){delete this.context.pathGeneratorFactory},t}(Oh),S3=cr.Ue(),w3=cr.Ue(),c2=cr.Ue(),T3=ti.create(),fd=function(){function e(){var t=this;this.isHit=function(n,r,i,s){var l=t.context.pointInPathPickerFactory[n.nodeName];if(l){var c=ti.invert(T3,i),h=cr.fF(w3,cr.t8(c2,r[0],r[1],0),c);if(l(n,new mc(h[0],h[1]),s,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(n,r){var i=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),s=t.context.pathGeneratorFactory[n.nodeName];return s&&(i.beginPath(),s(i,n.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return e.prototype.apply=function(t,n){var r=this,i,s=t.renderingService,l=t.renderingContext;this.context=t,this.runtime=n;var c=(i=l.root)===null||i===void 0?void 0:i.ownerDocument;s.hooks.pick.tapPromise(e.tag,function(h){return(0,ae.mG)(r,void 0,void 0,function(){return(0,ae.Jh)(this,function(p){return[2,this.pick(c,h)]})})}),s.hooks.pickSync.tap(e.tag,function(h){return r.pick(c,h)})},e.prototype.pick=function(t,n){var r,i,s=n.topmost,l=n.position,c=l.x,h=l.y,p=cr.t8(S3,c,h,0),v=t.elementsFromBBox(p[0],p[1],p[0],p[1]),y=[];try{for(var b=(0,ae.XA)(v),T=b.next();!T.done;T=b.next()){var M=T.value,R=M.getWorldTransform(),I=this.isHit(M,p,R,!1);if(I){var N=wS(M);if(N){var z=N.parsedStyle.clipPath,H=this.isHit(z,p,z.getWorldTransform(),!0);if(H){if(s)return n.picked=[M],n;y.push(M)}}else{if(s)return n.picked=[M],n;y.push(M)}}}}catch(X){r={error:X}}finally{try{T&&!T.done&&(i=b.return)&&i.call(b)}finally{if(r)throw r.error}}return n.picked=y,n},e.tag="CanvasPicker",e}();function A3(e,t,n){var r=e.parsedStyle,i=r.cx,s=i===void 0?0:i,l=r.cy,c=l===void 0?0:l,h=r.r,p=r.fill,v=r.stroke,y=r.lineWidth,b=y===void 0?1:y,T=r.increasedLineWidthForHitTesting,M=T===void 0?0:T,R=r.pointerEvents,I=R===void 0?"auto":R,N=(b+M)/2,z=ic(s,c,t.x,t.y),H=(0,ae.CR)(Hm(I,p,v),2),X=H[0],Y=H[1];return X&&Y||n?z<=h+N:X?z<=h:Y?z>=h-N&&z<=h+N:!1}function K1(e,t,n,r){return e/(n*n)+t/(r*r)}function C3(e,t,n){var r=e.parsedStyle,i=r.cx,s=i===void 0?0:i,l=r.cy,c=l===void 0?0:l,h=r.rx,p=r.ry,v=r.fill,y=r.stroke,b=r.lineWidth,T=b===void 0?1:b,M=r.increasedLineWidthForHitTesting,R=M===void 0?0:M,I=r.pointerEvents,N=I===void 0?"auto":I,z=t.x,H=t.y,X=(0,ae.CR)(Hm(N,v,y),2),Y=X[0],ne=X[1],pe=(T+R)/2,ye=(z-s)*(z-s),De=(H-c)*(H-c);return Y&&ne||n?K1(ye,De,h+pe,p+pe)<=1:Y?K1(ye,De,h,p)<=1:ne?K1(ye,De,h-pe,p-pe)>=1&&K1(ye,De,h+pe,p+pe)<=1:!1}function Km(e,t,n,r,i,s){return i>=e&&i<=e+n&&s>=t&&s<=t+r}function O3(e,t,n,r,i,s,l){var c=i/2;return Km(e-c,t-c,n,i,s,l)||Km(e+n-c,t-c,i,r,s,l)||Km(e+c,t+r-c,n,i,s,l)||Km(e-c,t+c,i,r,s,l)}function Q1(e,t,n,r,i,s,l,c){var h=(Math.atan2(c-t,l-e)+Math.PI*2)%(Math.PI*2),p={x:e+n*Math.cos(h),y:t+n*Math.sin(h)};return ic(p.x,p.y,l,c)<=s/2}function nm(e,t,n,r,i,s,l){var c=Math.min(e,n),h=Math.max(e,n),p=Math.min(t,r),v=Math.max(t,r),y=i/2;return s>=c-y&&s<=h+y&&l>=p-y&&l<=v+y?O0(e,t,n,r,s,l)<=i/2:!1}function ew(e,t,n,r,i){var s=e.length;if(s<2)return!1;for(var l=0;l<s-1;l++){var c=e[l][0],h=e[l][1],p=e[l+1][0],v=e[l+1][1];if(nm(c,h,p,v,t,n,r))return!0}if(i){var y=e[0],b=e[s-1];if(nm(y[0],y[1],b[0],b[1],t,n,r))return!0}return!1}var M3=1e-6;function J1(e){return Math.abs(e)<M3?0:e<0?-1:1}function R3(e,t,n){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function tw(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var s=0;s<i;s++){var l=e[s],c=e[(s+1)%i];if(R3(l,c,[t,n]))return!0;J1(l[1]-n)>0!=J1(c[1]-n)>0&&J1(t-(n-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(r=!r)}return r}function nw(e,t,n){for(var r=!1,i=0;i<e.length;i++){var s=e[i];if(r=tw(s,t,n),r)break}return r}function Lu(e,t,n){var r=e.parsedStyle,i=r.x1,s=r.y1,l=r.x2,c=r.y2,h=r.lineWidth,p=h===void 0?1:h,v=r.increasedLineWidthForHitTesting,y=v===void 0?0:v,b=r.pointerEvents,T=b===void 0?"auto":b,M=r.fill,R=r.stroke,I=(0,ae.CR)(Hm(T,M,R),2),N=I[1];return!N&&!n||!p?!1:nm(i,s,l,c,p+y,t.x,t.y)}function rw(e,t,n,r,i){for(var s=!1,l=t/2,c=0;c<e.length;c++){var h=e[c],p=h.currentPoint,v=h.params,y=h.prePoint,b=h.box;if(!(b&&!Km(b.x-l,b.y-l,b.width+t,b.height+t,n,r)))switch(h.command){case"L":case"Z":if(s=nm(y[0],y[1],p[0],p[1],t,n,r),s)return!0;break;case"Q":var T=Yy(y[0],y[1],v[1],v[2],v[3],v[4],n,r);if(s=T<=t/2,s)return!0;break;case"C":var M=Vy(y[0],y[1],v[1],v[2],v[3],v[4],v[5],v[6],n,r,i);if(s=M<=t/2,s)return!0;break;case"A":h.cubicParams||(h.cubicParams=_u(y[0],y[1],v[1],v[2],v[3],v[4],v[5],v[6],v[7],void 0));for(var R=h.cubicParams,I=y,N=0;N<R.length;N+=6){var z=Vy(I[0],I[1],R[N],R[N+1],R[N+2],R[N+3],R[N+4],R[N+5],n,r,i);if(I=[R[N+4],R[N+5]],s=z<=t/2,s)return!0}break}}return s}function w_(e,t,n,r,i,s){var l=e.parsedStyle,c=l.lineWidth,h=c===void 0?1:c,p=l.increasedLineWidthForHitTesting,v=p===void 0?0:p,y=l.stroke,b=l.fill,T=l.d,M=l.pointerEvents,R=M===void 0?"auto":M,I=T.segments,N=T.hasArc,z=T.polylines,H=T.polygons,X=(0,ae.CR)(Hm(R,(H==null?void 0:H.length)&&b,y),2),Y=X[0],ne=X[1],pe=Ex(e),ye=!1;return Y||n?(N?ye=r(e,t):ye=nw(H,t.x,t.y)||nw(z,t.x,t.y),ye):((ne||n)&&(ye=rw(I,h+v,t.x,t.y,pe)),ye)}function eb(e,t,n){var r=e.parsedStyle,i=r.stroke,s=r.fill,l=r.lineWidth,c=l===void 0?1:l,h=r.increasedLineWidthForHitTesting,p=h===void 0?0:h,v=r.points,y=r.pointerEvents,b=y===void 0?"auto":y,T=(0,ae.CR)(Hm(b,s,i),2),M=T[0],R=T[1],I=!1;return(R||n)&&(I=ew(v.points,c+p,t.x,t.y,!0)),!I&&(M||n)&&(I=tw(v.points,t.x,t.y)),I}function tb(e,t,n){var r=e.parsedStyle,i=r.lineWidth,s=i===void 0?1:i,l=r.increasedLineWidthForHitTesting,c=l===void 0?0:l,h=r.points,p=r.pointerEvents,v=p===void 0?"auto":p,y=r.fill,b=r.stroke,T=(0,ae.CR)(Hm(v,y,b),2),M=T[1];return!M&&!n||!s?!1:ew(h.points,s+c,t.x,t.y,!1)}function bv(e,t,n,r,i){var s=e.parsedStyle,l=s.radius,c=s.fill,h=s.stroke,p=s.lineWidth,v=p===void 0?1:p,y=s.increasedLineWidthForHitTesting,b=y===void 0?0:y,T=s.x,M=T===void 0?0:T,R=s.y,I=R===void 0?0:R,N=s.width,z=s.height,H=s.pointerEvents,X=H===void 0?"auto":H,Y=(0,ae.CR)(Hm(X,c,h),2),ne=Y[0],pe=Y[1],ye=l&&l.some(function(mt){return mt!==0}),De=v+b;if(ye){var Ke=!1;return(pe||n)&&(Ke=T_(M,I,N,z,l.map(function(mt){return(0,d.Z)(mt,0,Math.min(Math.abs(N)/2,Math.abs(z)/2))}),De,t.x,t.y)),!Ke&&(ne||n)&&(Ke=r(e,t)),Ke}else{var Xe=De/2;if(ne&&pe||n)return Km(M-Xe,I-Xe,N+Xe,z+Xe,t.x,t.y);if(ne)return Km(M,I,N,z,t.x,t.y);if(pe)return O3(M,I,N,z,De,t.x,t.y)}return!1}function T_(e,t,n,r,i,s,l,c){var h=(0,ae.CR)(i,4),p=h[0],v=h[1],y=h[2],b=h[3];return nm(e+p,t,e+n-v,t,s,l,c)||nm(e+n,t+v,e+n,t+r-y,s,l,c)||nm(e+n-y,t+r,e+b,t+r,s,l,c)||nm(e,t+r-b,e,t+p,s,l,c)||Q1(e+n-v,t+v,v,1.5*Math.PI,2*Math.PI,s,l,c)||Q1(e+n-y,t+r-y,y,0,.5*Math.PI,s,l,c)||Q1(e+b,t+r-b,b,.5*Math.PI,Math.PI,s,l,c)||Q1(e+p,t+p,p,Math.PI,1.5*Math.PI,s,l,c)}function P3(e,t,n,r,i,s){var l=e.parsedStyle,c=l.pointerEvents,h=c===void 0?"auto":c,p=l.x,v=p===void 0?0:p,y=l.y,b=y===void 0?0:y,T=l.width,M=l.height;if(h==="non-transparent-pixel"){var R=i.config.offscreenCanvas,I=s.offscreenCanvasCreator.getOrCreateCanvas(R),N=s.offscreenCanvasCreator.getOrCreateContext(R,{willReadFrequently:!0});I.width=T,I.height=M,i.defaultStyleRendererFactory[ni.IMAGE].render(N,(0,ae.pi)((0,ae.pi)({},e.parsedStyle),{x:0,y:0}),e,void 0,void 0,void 0);var z=N.getImageData(t.x-v,t.y-b,1,1).data;return z.every(function(H){return H!==0})}return!0}var nb=function(e){(0,ae.ZT)(t,e);function t(){var n=e.apply(this,(0,ae.ev)([],(0,ae.CR)(arguments),!1))||this;return n.name="canvas-picker",n}return t.prototype.init=function(){var n,r=function(){return!0},i=(n={},n[ni.CIRCLE]=A3,n[ni.ELLIPSE]=C3,n[ni.RECT]=bv,n[ni.LINE]=Lu,n[ni.POLYLINE]=tb,n[ni.POLYGON]=eb,n[ni.PATH]=w_,n[ni.TEXT]=r,n[ni.GROUP]=null,n[ni.IMAGE]=P3,n[ni.HTML]=null,n[ni.MESH]=null,n);this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new fd)},t.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},t}(Oh),I3=function(){function e(t){this.canvasRendererPluginOptions=t,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=ti.create(),this.dprMatrix=ti.create(),this.tmpMat4=ti.create(),this.vec3a=cr.Ue(),this.vec3b=cr.Ue(),this.vec3c=cr.Ue(),this.vec3d=cr.Ue()}return e.prototype.apply=function(t,n){var r=this;this.context=t;var i=t.config,s=t.camera,l=t.renderingService,c=t.renderingContext,h=t.rBushRoot,p=t.pathGeneratorFactory;this.rBush=h,this.pathGeneratorFactory=p;var v=t.contextService,y=c.root.ownerDocument.defaultView,b=function(R){var I=R.target,N=I.rBushNode;N.aabb&&r.removedRBushNodeAABBs.push(N.aabb)},T=function(R){var I=R.target,N=I.rBushNode;N.aabb&&r.removedRBushNodeAABBs.push(N.aabb)};l.hooks.init.tap(e.tag,function(){y.addEventListener(ka.UNMOUNTED,b),y.addEventListener(ka.CULLED,T);var R=v.getDPR(),I=i.width,N=i.height,z=v.getContext();r.clearRect(z,0,0,I*R,N*R,i.background)}),l.hooks.destroy.tap(e.tag,function(){y.removeEventListener(ka.UNMOUNTED,b),y.removeEventListener(ka.CULLED,T),r.renderQueue=[],r.removedRBushNodeAABBs=[],r.restoreStack=[]}),l.hooks.beginFrame.tap(e.tag,function(){var R,I=v.getContext(),N=v.getDPR(),z=i.width,H=i.height,X=r.canvasRendererPluginOptions,Y=X.dirtyObjectNumThreshold,ne=X.dirtyObjectRatioThreshold,pe=l.getStats(),ye=pe.total,De=pe.rendered,Xe=De/ye;r.clearFullScreen=r.clearFullScreenLastFrame||!(!((R=y.context.renderingPlugins[1])===null||R===void 0)&&R.isFirstTimeRenderingFinished)||l.disableDirtyRectangleRendering()||De>Y&&Xe>ne,I&&(I.resetTransform?I.resetTransform():I.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(I,0,0,z*N,H*N,i.background))});var M=function(R,I){R.isVisible()&&!R.isCulled()&&r.renderDisplayObject(R,I,r.context,r.restoreStack,n);var N=R.sortable.sorted||R.childNodes;N.forEach(function(z){M(z,I)})};l.hooks.endFrame.tap(e.tag,function(){if(c.root.childNodes.length===0){r.clearFullScreenLastFrame=!0;return}r.clearFullScreenLastFrame=!1;var R=v.getContext(),I=v.getDPR();if(ti.fromScaling(r.dprMatrix,[I,I,1]),ti.multiply(r.vpMatrix,r.dprMatrix,s.getOrthoMatrix()),r.clearFullScreen)M(c.root,R);else{var N=r.safeMergeAABB.apply(r,(0,ae.ev)([r.mergeDirtyAABBs(r.renderQueue)],(0,ae.CR)(r.removedRBushNodeAABBs.map(function(zn){var or=zn.minX,ir=zn.minY,Zr=zn.maxX,Ri=zn.maxY,Qi=new Pu;return Qi.setMinMax([or,ir,0],[Zr,Ri,0]),Qi})),!1));if(r.removedRBushNodeAABBs=[],Pu.isEmpty(N)){r.renderQueue=[];return}var z=r.convertAABB2Rect(N),H=z.x,X=z.y,Y=z.width,ne=z.height,pe=cr.fF(r.vec3a,[H,X,0],r.vpMatrix),ye=cr.fF(r.vec3b,[H+Y,X,0],r.vpMatrix),De=cr.fF(r.vec3c,[H,X+ne,0],r.vpMatrix),Xe=cr.fF(r.vec3d,[H+Y,X+ne,0],r.vpMatrix),Ke=Math.min(pe[0],ye[0],Xe[0],De[0]),mt=Math.min(pe[1],ye[1],Xe[1],De[1]),Qe=Math.max(pe[0],ye[0],Xe[0],De[0]),ut=Math.max(pe[1],ye[1],Xe[1],De[1]),ct=Math.floor(Ke),gt=Math.floor(mt),Xt=Math.ceil(Qe-Ke),Rt=Math.ceil(ut-mt);R.save(),r.clearRect(R,ct,gt,Xt,Rt,i.background),R.beginPath(),R.rect(ct,gt,Xt,Rt),R.clip(),R.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]);var kt=i.renderer.getConfig().enableDirtyRectangleRenderingDebug;kt&&y.dispatchEvent(new Jl(Kc.DIRTY_RECTANGLE,{dirtyRect:{x:ct,y:gt,width:Xt,height:Rt}}));var wn=r.searchDirtyObjects(N);wn.sort(function(zn,or){return zn.sortable.renderOrder-or.sortable.renderOrder}).forEach(function(zn){zn&&zn.isVisible()&&!zn.isCulled()&&r.renderDisplayObject(zn,R,r.context,r.restoreStack,n)}),R.restore(),r.renderQueue.forEach(function(zn){r.saveDirtyAABB(zn)}),r.renderQueue=[]}r.restoreStack.forEach(function(){R.restore()}),r.restoreStack=[]}),l.hooks.render.tap(e.tag,function(R){r.clearFullScreen||r.renderQueue.push(R)})},e.prototype.clearRect=function(t,n,r,i,s,l){t.clearRect(n,r,i,s),l&&(t.fillStyle=l,t.fillRect(n,r,i,s))},e.prototype.renderDisplayObject=function(t,n,r,i,s){var l=t.nodeName,c=i[i.length-1];c&&!(t.compareDocumentPosition(c)&Ff.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),i.pop());var h=this.context.styleRendererFactory[l],p=this.pathGeneratorFactory[l],v=t.parsedStyle.clipPath;if(v){this.applyWorldTransform(n,v);var y=this.pathGeneratorFactory[v.nodeName];y&&(n.save(),i.push(t),n.beginPath(),y(n,v.parsedStyle),n.closePath(),n.clip())}h&&(this.applyWorldTransform(n,t),n.save(),this.applyAttributesToContext(n,t)),p&&(n.beginPath(),p(n,t.parsedStyle),t.nodeName!==ni.LINE&&t.nodeName!==ni.PATH&&t.nodeName!==ni.POLYLINE&&n.closePath()),h&&(h.render(n,t.parsedStyle,t,r,this,s),n.restore()),t.renderable.dirty=!1},e.prototype.convertAABB2Rect=function(t){var n=t.getMin(),r=t.getMax(),i=Math.floor(n[0]),s=Math.floor(n[1]),l=Math.ceil(r[0]),c=Math.ceil(r[1]),h=l-i,p=c-s;return{x:i,y:s,width:h,height:p}},e.prototype.mergeDirtyAABBs=function(t){var n=new Pu;return t.forEach(function(r){var i=r.getRenderBounds();n.add(i);var s=r.renderable.dirtyRenderBounds;s&&n.add(s)}),n},e.prototype.searchDirtyObjects=function(t){var n=(0,ae.CR)(t.getMin(),2),r=n[0],i=n[1],s=(0,ae.CR)(t.getMax(),2),l=s[0],c=s[1],h=this.rBush.search({minX:r,minY:i,maxX:l,maxY:c});return h.map(function(p){var v=p.displayObject;return v})},e.prototype.saveDirtyAABB=function(t){var n=t.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new Pu);var r=t.getRenderBounds();r&&n.dirtyRenderBounds.update(r.center,r.halfExtents)},e.prototype.applyAttributesToContext=function(t,n){var r=n.parsedStyle,i=r.stroke,s=r.fill,l=r.opacity,c=r.lineDash,h=r.lineDashOffset;c&&t.setLineDash(c),(0,ya.Z)(h)||(t.lineDashOffset=h),(0,ya.Z)(l)||(t.globalAlpha*=l),!(0,ya.Z)(i)&&!Array.isArray(i)&&!i.isNone&&(t.strokeStyle=n.attributes.stroke),!(0,ya.Z)(s)&&!Array.isArray(s)&&!s.isNone&&(t.fillStyle=n.attributes.fill)},e.prototype.applyWorldTransform=function(t,n,r){r?(ti.copy(this.tmpMat4,n.getLocalTransform()),ti.multiply(this.tmpMat4,r,this.tmpMat4),ti.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(ti.copy(this.tmpMat4,n.getWorldTransform()),ti.multiply(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},e.prototype.safeMergeAABB=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=new Pu;return t.forEach(function(i){r.add(i)}),r},e.tag="CanvasRenderer",e}(),rm=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r,i,s,l){var c=n.fill,h=n.fillRule,p=n.opacity,v=p===void 0?1:p,y=n.fillOpacity,b=y===void 0?1:y,T=n.stroke,M=n.strokeOpacity,R=M===void 0?1:M,I=n.lineWidth,N=I===void 0?1:I,z=n.lineCap,H=n.lineJoin,X=n.shadowType,Y=n.shadowColor,ne=n.shadowBlur,pe=n.filter,ye=n.miterLimit,De=!(0,ya.Z)(c)&&!c.isNone,Xe=!(0,ya.Z)(T)&&!T.isNone&&N>0,Ke=(c==null?void 0:c.alpha)===0,mt=!!(pe&&pe.length),Qe=!(0,ya.Z)(Y)&&ne>0,ut=r.nodeName,ct=X==="inner",gt=Xe&&Qe&&(ut===ni.PATH||ut===ni.LINE||ut===ni.POLYLINE||Ke||ct);De&&(t.globalAlpha=v*b,gt||xv(r,t,Qe),this.fill(t,r,c,h,i,s,l),gt||this.clearShadowAndFilter(t,mt,Qe)),Xe&&(t.globalAlpha=v*R,t.lineWidth=N,(0,ya.Z)(ye)||(t.miterLimit=ye),(0,ya.Z)(z)||(t.lineCap=z),(0,ya.Z)(H)||(t.lineJoin=H),gt&&(ct&&(t.globalCompositeOperation="source-atop"),xv(r,t,!0),ct&&(this.stroke(t,r,T,i,s,l),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,mt,!0))),this.stroke(t,r,T,i,s,l))},e.prototype.clearShadowAndFilter=function(t,n,r){if(r&&(t.shadowColor="transparent",t.shadowBlur=0),n){var i=t.filter;!(0,ya.Z)(i)&&i.indexOf("drop-shadow")>-1&&(t.filter=i.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},e.prototype.fill=function(t,n,r,i,s,l,c){var h=this;Array.isArray(r)?r.forEach(function(p){t.fillStyle=h.getColor(p,n,t),i?t.fill(i):t.fill()}):(a_(r)&&(t.fillStyle=this.getPattern(r,n,t,s,l,c)),i?t.fill(i):t.fill())},e.prototype.stroke=function(t,n,r,i,s,l){var c=this;Array.isArray(r)?r.forEach(function(h){t.strokeStyle=c.getColor(h,n,t),t.stroke()}):(a_(r)&&(t.strokeStyle=this.getPattern(r,n,t,i,s,l)),t.stroke())},e.prototype.getPattern=function(t,n,r,i,s,l){var c,h;if(t.image.nodeName==="rect"){var p=t.image.parsedStyle,v=p.width,y=p.height;h=i.contextService.getDPR();var b=i.config.offscreenCanvas;c=l.offscreenCanvasCreator.getOrCreateCanvas(b),c.width=v*h,c.height=y*h;var T=l.offscreenCanvasCreator.getOrCreateContext(b),M=[];t.image.forEach(function(I){s.renderDisplayObject(I,T,i,M,l)}),M.forEach(function(){T.restore()})}var R=this.imagePool.getOrCreatePatternSync(t,r,c,h,n.getGeometryBounds().min,function(){n.renderable.dirty=!0,i.renderingService.dirtify()});return R},e.prototype.getColor=function(t,n,r){var i;if(t.type===Cp.LinearGradient||t.type===Cp.RadialGradient){var s=n.getGeometryBounds(),l=s&&s.halfExtents[0]*2||1,c=s&&s.halfExtents[1]*2||1,h=s&&s.min||[0,0];i=this.imagePool.getOrCreateGradient((0,ae.pi)((0,ae.pi)({type:t.type},t.value),{min:h,width:l,height:c}),r)}return i},e}();function xv(e,t,n){var r=e.parsedStyle,i=r.filter,s=r.shadowColor,l=r.shadowBlur,c=r.shadowOffsetX,h=r.shadowOffsetY;i&&i.length&&(t.filter=e.style.filter),n&&(t.shadowColor=s.toString(),t.shadowBlur=l||0,t.shadowOffsetX=c||0,t.shadowOffsetY=h||0)}var rb=function(){function e(t){this.imagePool=t}return e.prototype.render=function(t,n,r){var i=n.x,s=i===void 0?0:i,l=n.y,c=l===void 0?0:l,h=n.width,p=n.height,v=n.src,y=n.shadowColor,b=n.shadowBlur,T,M=h,R=p;if(u(v)?T=this.imagePool.getImageSync(v):(M||(M=v.width),R||(R=v.height),T=v),T){var I=!(0,ya.Z)(y)&&b>0;xv(r,t,I);try{t.drawImage(T,s,c,M,R)}catch(N){}}},e}(),D3=function(){function e(){}return e.prototype.render=function(t,n,r,i,s,l){r.getBounds();var c=n,h=c.lineWidth,p=h===void 0?1:h,v=c.textAlign,y=v===void 0?"start":v,b=c.textBaseline,T=b===void 0?"alphabetic":b,M=c.lineJoin,R=M===void 0?"miter":M,I=c.miterLimit,N=I===void 0?10:I,z=c.letterSpacing,H=z===void 0?0:z,X=c.stroke,Y=c.fill,ne=c.fillOpacity,pe=ne===void 0?1:ne,ye=c.strokeOpacity,De=ye===void 0?1:ye,Xe=c.opacity,Ke=Xe===void 0?1:Xe,mt=c.metrics,Qe=c.x,ut=Qe===void 0?0:Qe,ct=c.y,gt=ct===void 0?0:ct,Xt=c.dx,Rt=c.dy,kt=c.shadowColor,wn=c.shadowBlur,zn=mt.font,or=mt.lines,ir=mt.height,Zr=mt.lineHeight,Ri=mt.lineMetrics;t.font=zn,t.lineWidth=p,t.textAlign=y==="middle"?"center":y;var Qi=T;!l.enableCSSParsing&&Qi==="alphabetic"&&(Qi="bottom"),t.lineJoin=R,(0,ya.Z)(N)||(t.miterLimit=N);var Qr=gt;T==="middle"?Qr+=-ir/2-Zr/2:T==="bottom"||T==="alphabetic"||T==="ideographic"?Qr+=-ir:(T==="top"||T==="hanging")&&(Qr+=-Zr);var ei=ut+(Xt||0);Qr+=Rt||0,or.length===1&&(Qi==="bottom"?(Qi="middle",Qr-=.5*ir):Qi==="top"&&(Qi="middle",Qr+=.5*ir)),t.textBaseline=Qi;var Po=!(0,ya.Z)(kt)&&wn>0;xv(r,t,Po);for(var uo=0;uo<or.length;uo++){var Jo=p/2+ei;Qr+=Zr,!(0,ya.Z)(X)&&!X.isNone&&p&&this.drawLetterSpacing(t,or[uo],Ri[uo],y,Jo,Qr,H,pe,De,Ke,!0),(0,ya.Z)(Y)||this.drawLetterSpacing(t,or[uo],Ri[uo],y,Jo,Qr,H,pe,De,Ke)}},e.prototype.drawLetterSpacing=function(t,n,r,i,s,l,c,h,p,v,y){if(y===void 0&&(y=!1),c===0){y?this.strokeText(t,n,s,l,p):this.fillText(t,n,s,l,h,v);return}var b=t.textAlign;t.textAlign="left";var T=s;i==="center"||i==="middle"?T=s-r.width/2:(i==="right"||i==="end")&&(T=s-r.width);for(var M=Array.from(n),R=t.measureText(n).width,I=0,N=0;N<M.length;++N){var z=M[N];y?this.strokeText(t,z,T,l,p):this.fillText(t,z,T,l,h,v),I=t.measureText(n.substring(N+1)).width,T+=R-I+c,R=I}t.textAlign=b},e.prototype.fillText=function(t,n,r,i,s,l){var c,h=!(0,ya.Z)(s)&&s!==1;h&&(c=t.globalAlpha,t.globalAlpha=s*l),t.fillText(n,r,i),h&&(t.globalAlpha=c)},e.prototype.strokeText=function(t,n,r,i,s){var l,c=!(0,ya.Z)(s)&&s!==1;c&&(l=t.globalAlpha,t.globalAlpha=s),t.strokeText(n,r,i),c&&(t.globalAlpha=l)},e}(),f2=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(rm),ib=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(rm),h2=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(rm),GI=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(rm),ob=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(rm),WI=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(rm),ZI=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(rm),L3=function(e){(0,ae.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="canvas-renderer",r}return t.prototype.init=function(){var n,r=(0,ae.pi)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,s=new rm(i),l=(n={},n[ni.CIRCLE]=s,n[ni.ELLIPSE]=s,n[ni.RECT]=s,n[ni.IMAGE]=new rb(i),n[ni.TEXT]=new D3,n[ni.LINE]=s,n[ni.POLYLINE]=s,n[ni.POLYGON]=s,n[ni.PATH]=s,n[ni.GROUP]=void 0,n[ni.HTML]=void 0,n[ni.MESH]=void 0,n);this.context.defaultStyleRendererFactory=l,this.context.styleRendererFactory=l,this.addRenderingPlugin(new I3(r))},t.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},t}(Oh),iw=function(){function e(){}return e.prototype.apply=function(t,n){var r=this,i=t.renderingService,s=t.renderingContext,l=t.config;this.context=t;var c=s.root.ownerDocument.defaultView,h=function(ne){i.hooks.pointerMove.call(ne)},p=function(ne){i.hooks.pointerUp.call(ne)},v=function(ne){i.hooks.pointerDown.call(ne)},y=function(ne){i.hooks.pointerOver.call(ne)},b=function(ne){i.hooks.pointerOut.call(ne)},T=function(ne){i.hooks.pointerCancel.call(ne)},M=function(ne){i.hooks.pointerWheel.call(ne)},R=function(ne){i.hooks.click.call(ne)},I=function(ne){n.globalThis.document.addEventListener("pointermove",h,!0),ne.addEventListener("pointerdown",v,!0),ne.addEventListener("pointerleave",b,!0),ne.addEventListener("pointerover",y,!0),n.globalThis.addEventListener("pointerup",p,!0),n.globalThis.addEventListener("pointercancel",T,!0)},N=function(ne){ne.addEventListener("touchstart",v,!0),ne.addEventListener("touchend",p,!0),ne.addEventListener("touchmove",h,!0),ne.addEventListener("touchcancel",T,!0)},z=function(ne){n.globalThis.document.addEventListener("mousemove",h,!0),ne.addEventListener("mousedown",v,!0),ne.addEventListener("mouseout",b,!0),ne.addEventListener("mouseover",y,!0),n.globalThis.addEventListener("mouseup",p,!0)},H=function(ne){n.globalThis.document.removeEventListener("pointermove",h,!0),ne.removeEventListener("pointerdown",v,!0),ne.removeEventListener("pointerleave",b,!0),ne.removeEventListener("pointerover",y,!0),n.globalThis.removeEventListener("pointerup",p,!0)},X=function(ne){ne.removeEventListener("touchstart",v,!0),ne.removeEventListener("touchend",p,!0),ne.removeEventListener("touchmove",h,!0),ne.removeEventListener("touchcancel",T,!0)},Y=function(ne){n.globalThis.document.removeEventListener("mousemove",h,!0),ne.removeEventListener("mousedown",v,!0),ne.removeEventListener("mouseout",b,!0),ne.removeEventListener("mouseover",y,!0),n.globalThis.removeEventListener("mouseup",p,!0)};i.hooks.init.tap(e.tag,function(){var ne=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(ne.style.msContentZooming="none",ne.style.msTouchAction="none"):c.supportsPointerEvents&&(ne.style.touchAction="none"),c.supportsPointerEvents?I(ne):z(ne),c.supportsTouchEvents&&N(ne),l.useNativeClickEvent&&ne.addEventListener("click",R,!0),ne.addEventListener("wheel",M,{passive:!0,capture:!0})}),i.hooks.destroy.tap(e.tag,function(){var ne=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(ne.style.msContentZooming="",ne.style.msTouchAction=""):c.supportsPointerEvents&&(ne.style.touchAction=""),c.supportsPointerEvents?H(ne):Y(ne),c.supportsTouchEvents&&X(ne),l.useNativeClickEvent&&ne.removeEventListener("click",R,!0),ne.removeEventListener("wheel",M,!0)})},e.tag="DOMInteraction",e}(),Qc=function(e){(0,ae.ZT)(t,e);function t(){var n=e.apply(this,(0,ae.ev)([],(0,ae.CR)(arguments),!1))||this;return n.name="dom-interaction",n}return t.prototype.init=function(){this.addRenderingPlugin(new iw)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Oh),d2="g-canvas-camera",N3=function(){function e(){this.displayObjectHTMLElementMap=new WeakMap}return e.prototype.joinTransformMatrix=function(t){return"matrix(".concat([t[0],t[1],t[4],t[5],t[12],t[13]].join(","),")")},e.prototype.apply=function(t,n){var r=this,i=t.camera,s=t.renderingContext,l=t.renderingService;this.context=t;var c=s.root.ownerDocument.defaultView,h=c.context.eventService.nativeHTMLMap,p=function(R,I){I.style.transform=r.joinTransformMatrix(R.getWorldTransform())},v=function(R){var I=R.target;if(I.nodeName===ni.HTML){r.$camera||(r.$camera=r.createCamera(i));var N=r.getOrCreateEl(I);if(r.$camera.appendChild(N),n.enableCSSParsing){var z=I.ownerDocument.documentElement.attributes;Object.keys(z).forEach(function(H){N.style[H]=z[H]})}Object.keys(I.attributes).forEach(function(H){r.updateAttribute(H,I)}),p(I,N),h.set(N,I)}},y=function(R){var I=R.target;if(I.nodeName===ni.HTML&&r.$camera){var N=r.getOrCreateEl(I);N&&(N.remove(),h.delete(N))}},b=function(R){var I=R.target;if(I.nodeName===ni.HTML){var N=R.attrName;r.updateAttribute(N,I)}},T=function(R){var I=R.target;if(I.nodeName===ni.HTML){var N=r.getOrCreateEl(I);p(I,N)}},M=function(){if(r.$camera){var R=r.context.config,I=R.width,N=R.height;r.$camera.style.width="".concat(I||0,"px"),r.$camera.style.height="".concat(N||0,"px")}};l.hooks.init.tap(e.tag,function(){c.addEventListener(Kc.RESIZE,M),c.addEventListener(ka.MOUNTED,v),c.addEventListener(ka.UNMOUNTED,y),c.addEventListener(ka.ATTR_MODIFIED,b),c.addEventListener(ka.BOUNDS_CHANGED,T)}),l.hooks.endFrame.tap(e.tag,function(){r.$camera&&s.renderReasons.has(D0.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),l.hooks.destroy.tap(e.tag,function(){r.$camera&&r.$camera.remove(),c.removeEventListener(Kc.RESIZE,M),c.removeEventListener(ka.MOUNTED,v),c.removeEventListener(ka.UNMOUNTED,y),c.removeEventListener(ka.ATTR_MODIFIED,b),c.removeEventListener(ka.BOUNDS_CHANGED,T)})},e.prototype.createCamera=function(t){var n=this.context.config,r=n.document,i=n.width,s=n.height,l=this.context.contextService.getDomElement(),c=l.parentNode;if(c){var h=d2,p=c.querySelector("#"+h);if(!p){var v=(r||document).createElement("div");p=v,v.id=h,v.style.position="absolute",v.style.left="".concat(l.offsetLeft||0,"px"),v.style.top="".concat(l.offsetTop||0,"px"),v.style.transformOrigin="left top",v.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),v.style.overflow="hidden",v.style.pointerEvents="none",v.style.width="".concat(i||0,"px"),v.style.height="".concat(s||0,"px"),c.appendChild(v)}return p}return null},e.prototype.getOrCreateEl=function(t){var n=this.context.config.document,r=this.displayObjectHTMLElementMap.get(t);return r||(r=(n||document).createElement("div"),t.parsedStyle.$el=r,this.displayObjectHTMLElementMap.set(t,r),t.id&&(r.id=t.id),t.name&&r.setAttribute("name",t.name),t.className&&(r.className=t.className),r.style.position="absolute",r.style["will-change"]="transform",r.style.transform=this.joinTransformMatrix(t.getWorldTransform())),r},e.prototype.updateAttribute=function(t,n){var r=this.getOrCreateEl(n);switch(t){case"innerHTML":var i=n.parsedStyle.innerHTML;u(i)?r.innerHTML=i:(r.innerHTML="",r.appendChild(i));break;case"x":r.style.left="".concat(n.parsedStyle.x,"px");break;case"y":r.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var s=n.parsedStyle.transformOrigin;r.style["transform-origin"]="".concat(s[0].value," ").concat(s[1].value);break;case"width":if(this.context.enableCSSParsing){var l=n.computedStyleMap().get("width");r.style.width=l.toString()}else{var l=n.parsedStyle.width;r.style.width=(0,yu.Z)(l)?"".concat(l,"px"):l.toString()}break;case"height":if(this.context.enableCSSParsing){var c=n.computedStyleMap().get("height");r.style.height=c.toString()}else{var c=n.parsedStyle.height;r.style.height=(0,yu.Z)(c)?"".concat(c,"px"):c.toString()}break;case"zIndex":var h=n.parsedStyle.zIndex;r.style["z-index"]="".concat(h);break;case"visibility":var p=n.parsedStyle.visibility;r.style.visibility=p;break;case"pointerEvents":var v=n.parsedStyle.pointerEvents,y=v===void 0?"auto":v;r.style.pointerEvents=y;break;case"opacity":var b=n.parsedStyle.opacity;r.style.opacity="".concat(b);break;case"fill":var T=n.parsedStyle.fill,M="";s_(T)?T.isNone?M="transparent":M=n.getAttribute("fill"):Array.isArray(T)?M=n.getAttribute("fill"):a_(T),r.style.background=M;break;case"stroke":var R=n.parsedStyle.stroke,I="";s_(R)?R.isNone?I="transparent":I=n.getAttribute("stroke"):Array.isArray(R)?I=n.getAttribute("stroke"):a_(R),r.style["border-color"]=I,r.style["border-style"]="solid";break;case"lineWidth":var N=n.parsedStyle.lineWidth;r.style["border-width"]="".concat(N||0,"px");break;case"lineDash":r.style["border-style"]="dashed";break;case"filter":var z=n.style.filter;r.style.filter=z;break;default:!(0,ya.Z)(n.style[t])&&n.style[t]!==""&&(r.style[t]=n.style[t])}},e.tag="HTMLRendering",e}(),p2=function(e){(0,ae.ZT)(t,e);function t(){var n=e.apply(this,(0,ae.ev)([],(0,ae.CR)(arguments),!1))||this;return n.name="html-renderer",n}return t.prototype.init=function(){this.addRenderingPlugin(new N3)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Oh),F3=function(){function e(t){this.canvasConfig=t,this.imageCache={},this.gradientCache={},this.patternCache={}}return e.prototype.getImageSync=function(t,n){return this.imageCache[t]?n&&n(this.imageCache[t]):this.getOrCreateImage(t).then(function(r){n&&n(r)}),this.imageCache[t]},e.prototype.getOrCreateImage=function(t){var n=this;if(this.imageCache[t])return Promise.resolve(this.imageCache[t]);var r=this.canvasConfig.createImage;return new Promise(function(i,s){var l;r?l=r(t):d_&&(l=new window.Image),l&&(l.onload=function(){n.imageCache[t]=l,i(l)},l.onerror=function(c){s(c)},l.crossOrigin="Anonymous",l.src=t)})},e.prototype.getOrCreatePatternSync=function(t,n,r,i,s,l){var c=this.generatePatternKey(t);if(c&&this.patternCache[c])return this.patternCache[c];var h=t.image,p=t.repetition,v=t.transform,y,b=!1;u(h)?y=this.getImageSync(h,l):r?(y=r,b=!0):y=h;var T=y&&n.createPattern(y,p);if(T){var M=void 0;v?M=PS(Dx(v),new Dh({})):M=ti.identity(ti.create()),b&&ti.scale(M,M,[1/i,1/i,1]),T.setTransform({a:M[0],b:M[1],c:M[4],d:M[5],e:M[12]+s[0],f:M[13]+s[1]})}return c&&T&&(this.patternCache[c]=T),T},e.prototype.getOrCreateGradient=function(t,n){var r=this.generateGradientKey(t),i=t.type,s=t.steps,l=t.min,c=t.width,h=t.height,p=t.angle,v=t.cx,y=t.cy,b=t.size;if(this.gradientCache[r])return this.gradientCache[r];var T=null;if(i===Cp.LinearGradient){var M=cC(l,c,h,p),R=M.x1,I=M.y1,N=M.x2,z=M.y2;T=n.createLinearGradient(R,I,N,z)}else if(i===Cp.RadialGradient){var H=fC(l,c,h,v,y,b),X=H.x,Y=H.y,ne=H.r;T=n.createRadialGradient(X,Y,0,X,Y,ne)}return T&&(s.forEach(function(pe){var ye=pe.offset,De=pe.color;ye.unit===So.kPercentage&&(T==null||T.addColorStop(ye.value/100,De.toString()))}),this.gradientCache[r]=T),this.gradientCache[r]},e.prototype.generateGradientKey=function(t){var n=t.type,r=t.min,i=t.width,s=t.height,l=t.steps,c=t.angle,h=t.cx,p=t.cy,v=t.size;return"gradient-".concat(n,"-").concat((c==null?void 0:c.toString())||0,"-").concat((h==null?void 0:h.toString())||0,"-").concat((p==null?void 0:p.toString())||0,"-").concat((v==null?void 0:v.toString())||0,"-").concat(r[0],"-").concat(r[1],"-").concat(i,"-").concat(s,"-").concat(l.map(function(y){var b=y.offset,T=y.color;return"".concat(b).concat(T)}).join("-"))},e.prototype.generatePatternKey=function(t){var n=t.image,r=t.repetition;if(u(n))return"pattern-".concat(n,"-").concat(r);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(r)},e}(),B3=function(){function e(){}return e.prototype.apply=function(t){var n=t.renderingService,r=t.renderingContext,i=t.imagePool,s=r.root.ownerDocument.defaultView,l=function(p,v,y){var b=p.parsedStyle,T=b.width,M=b.height;T&&!M?p.setAttribute("height",y/v*T):!T&&M&&p.setAttribute("width",v/y*M)},c=function(p){var v=p.target,y=v.nodeName,b=v.attributes;if(y===ni.IMAGE){var T=b.src,M=b.keepAspectRatio;u(T)&&i.getImageSync(T,function(R){var I=R.width,N=R.height;M&&l(v,I,N),v.renderable.dirty=!0,n.dirtify()})}},h=function(p){var v=p.target,y=p.attrName,b=p.newValue;v.nodeName===ni.IMAGE&&y==="src"&&u(b)&&i.getOrCreateImage(b).then(function(T){var M=T.width,R=T.height;v.attributes.keepAspectRatio&&l(v,M,R),v.renderable.dirty=!0,n.dirtify()})};n.hooks.init.tap(e.tag,function(){s.addEventListener(ka.MOUNTED,c),s.addEventListener(ka.ATTR_MODIFIED,h)}),n.hooks.destroy.tap(e.tag,function(){s.removeEventListener(ka.MOUNTED,c),s.removeEventListener(ka.ATTR_MODIFIED,h)})},e.tag="LoadImage",e}(),k3=function(e){(0,ae.ZT)(t,e);function t(){var n=e.apply(this,(0,ae.ev)([],(0,ae.CR)(arguments),!1))||this;return n.name="image-loader",n}return t.prototype.init=function(){this.context.imagePool=new F3(this.context.config),this.addRenderingPlugin(new B3)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(Oh),v2=function(){function e(t){this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return e.prototype.init=function(){var t=this.canvasConfig,n=t.container,r=t.canvas;if(r)this.$canvas=r,n&&r.parentElement!==n&&n.appendChild(r),this.$container=r.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=u(n)?document.getElementById(n):n,this.$container)){var i=document.createElement("canvas");this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},e.prototype.getContext=function(){return this.context},e.prototype.getDomElement=function(){return this.$canvas},e.prototype.getDPR=function(){return this.dpr},e.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},e.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},e.prototype.resize=function(t,n){var r=this.canvasConfig.devicePixelRatio,i=r||d_&&window.devicePixelRatio||1;i=i>=1?Math.ceil(i):1,this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*n,oO(this.$canvas,t,n)),this.renderingContext.renderReasons.add(D0.CAMERA_CHANGED)},e.prototype.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},e.prototype.toDataURL=function(t){return t===void 0&&(t={}),(0,ae.mG)(this,void 0,void 0,function(){var n,r;return(0,ae.Jh)(this,function(i){return n=t.type,r=t.encoderOptions,[2,this.context.canvas.toDataURL(n,r)]})})},e}(),ow=function(e){(0,ae.ZT)(t,e);function t(){var n=e.apply(this,(0,ae.ev)([],(0,ae.CR)(arguments),!1))||this;return n.name="canvas-context-register",n}return t.prototype.init=function(){this.context.ContextService=v2},t.prototype.destroy=function(){delete this.context.ContextService},t}(Oh),aw=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this,n)||this;return r.registerPlugin(new ow),r.registerPlugin(new k3),r.registerPlugin(new u2),r.registerPlugin(new L3),r.registerPlugin(new Qc),r.registerPlugin(new nb),r.registerPlugin(new p2),r}return t}(Xv),Xg=function(){function e(t){this.dragndropPluginOptions=t}return e.prototype.apply=function(t){var n=this,r=t.renderingService,i=t.renderingContext,s=i.root.ownerDocument,l=s.defaultView,c=function(h){var p=h.target,v=p===s,y=v&&n.dragndropPluginOptions.isDocumentDraggable?s:p.closest&&p.closest("[draggable=true]");if(y){var b=!1,T=h.timeStamp,M=[h.clientX,h.clientY],R=null,I=[h.clientX,h.clientY],N=function(H){return(0,ae.mG)(n,void 0,void 0,function(){var X,Y,ne,pe,ye,De;return(0,ae.Jh)(this,function(Xe){switch(Xe.label){case 0:if(!b){if(X=H.timeStamp-T,Y=Fs([H.clientX,H.clientY],M),X<=this.dragndropPluginOptions.dragstartTimeThreshold||Y<=this.dragndropPluginOptions.dragstartDistanceThreshold)return[2];H.type="dragstart",y.dispatchEvent(H),b=!0}return H.type="drag",H.dx=H.clientX-I[0],H.dy=H.clientY-I[1],y.dispatchEvent(H),I=[H.clientX,H.clientY],v?[3,2]:(ne=this.dragndropPluginOptions.overlap==="pointer"?[H.canvasX,H.canvasY]:p.getBounds().center,[4,s.elementsFromPoint(ne[0],ne[1])]);case 1:pe=Xe.sent(),ye=pe[pe.indexOf(p)+1],De=(ye==null?void 0:ye.closest("[droppable=true]"))||(this.dragndropPluginOptions.isDocumentDroppable?s:null),R!==De&&(R&&(H.type="dragleave",H.target=R,R.dispatchEvent(H)),De&&(H.type="dragenter",H.target=De,De.dispatchEvent(H)),R=De,R&&(H.type="dragover",H.target=R,R.dispatchEvent(H))),Xe.label=2;case 2:return[2]}})})};l.addEventListener("pointermove",N);var z=function(H){if(b){H.detail={preventClick:!0};var X=H.clone();R&&(X.type="drop",X.target=R,R.dispatchEvent(X)),X.type="dragend",y.dispatchEvent(X),b=!1}l.removeEventListener("pointermove",N)};p.addEventListener("pointerup",z,{once:!0}),p.addEventListener("pointerupoutside",z,{once:!0})}};r.hooks.init.tap(e.tag,function(){l.addEventListener("pointerdown",c)}),r.hooks.destroy.tap(e.tag,function(){l.removeEventListener("pointerdown",c)})},e.tag="Dragndrop",e}(),sw=function(e){(0,ae.ZT)(t,e);function t(n){n===void 0&&(n={});var r=e.call(this)||this;return r.options=n,r.name="dragndrop",r}return t.prototype.init=function(){this.addRenderingPlugin(new Xg((0,ae.pi)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t.prototype.setOptions=function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)},t}(Oh);function z3(e,t,n){var r;return function(){var i=this,s=arguments,l=function(){r=null,n||e.apply(i,s)},c=n&&!r;clearTimeout(r),r=setTimeout(l,t),c&&e.apply(i,s)}}var lw=z3,U3=function(e){return typeof e=="object"&&e!==null},m2=U3,j3=function(e){if(!m2(e)||!(0,ov.Z)(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Ev=j3,uw=5;function V3(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(e==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}function g2(e,t,n,r){n=n||0,r=r||uw;for(var i in t)if(V3(t,i)){var s=t[i];s!==null&&Ev(s)?(Ev(e[i])||(e[i]={}),n<r?g2(e[i],s,n+1,r):e[i]=t[i]):Ho(s)?(e[i]=[],e[i]=e[i].concat(s)):s!==void 0&&(e[i]=s)}}var cw=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)g2(e,t[r]);return e},hi=cw;class H3 extends Map{constructor(t,n=hw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Yg(this,t))}has(t){return super.has(Yg(this,t))}set(t,n){return super.set(Qm(this,t),n)}delete(t){return super.delete(fw(this,t))}}class XI extends null{constructor(t,n=hw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Yg(this,t))}add(t){return super.add(Qm(this,t))}delete(t){return super.delete(fw(this,t))}}function Yg({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Qm({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function fw({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function hw(e){return e!==null&&typeof e=="object"?e.valueOf():e}function A_(e){return e}function Nu(e,...t){return $g(e,A_,A_,t)}function ab(e,...t){return $g(e,Array.from,A_,t)}function dw(e,t){for(let n=1,r=t.length;n<r;++n)e=e.flatMap(i=>i.pop().map(([s,l])=>[...i,s,l]));return e}function G3(e,...t){return dw(ab(e,...t),t)}function YI(e,t,...n){return dw(Zd(e,t,...n),n)}function sb(e,t,...n){return $g(e,A_,t,n)}function Zd(e,t,...n){return $g(e,Array.from,t,n)}function $I(e,...t){return $g(e,identity,y2,t)}function qI(e,...t){return $g(e,Array.from,y2,t)}function y2(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function $g(e,t,n,r){return function i(s,l){if(l>=r.length)return n(s);const c=new H3,h=r[l++];let p=-1;for(const v of s){const y=h(v,++p,s),b=c.get(y);b?b.push(v):c.set(y,[v])}for(const[v,y]of c)c.set(v,i(y,l));return t(c)}(e,0)}var pw=function(e){return(0,ya.Z)(e)?"":e.toString()},vw=function(e){var t=pw(e);return t.charAt(0).toLowerCase()+t.substring(1)},mw=vw,W3=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};function im(e){return e}function _2(e){return e.reduce((t,n)=>(r,...i)=>n(t(r,...i),...i),im)}function Z3(e){return e.reduce((t,n)=>r=>W3(this,void 0,void 0,function*(){const i=yield t(r);return n(i)}),im)}function qg(e){return e.replace(/( |^)[a-z]/g,t=>t.toUpperCase())}function Kg(e=""){throw new Error(e)}function b2(e,t){const{attributes:n}=t,r=new Set(["id","className"]);for(const[i,s]of Object.entries(n))r.has(i)||e.attr(i,s)}function eu(e){return e!=null&&!Number.isNaN(e)}function KI(e,t){return e+(t-e)*Math.random()}function X3(e){const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}}function Y3(e,t){const{transform:n}=e.style,i=(s=>s==="none"||s===void 0)(n)?"":n;e.style.transform=`${i} ${t}`.trimStart()}function Eo(e,t){return gw(e,t)||{}}function gw(e,t){const n=Object.entries(e||{}).filter(([r])=>r.startsWith(t)).map(([r,i])=>[mw(r.replace(t,"").trim()),i]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function QI(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[`${t}${upperFirst(n)}`,r]))}function yw(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.find(r=>n.startsWith(r))))}function Jm(e,...t){return Object.fromEntries(Object.entries(e).filter(([n])=>t.every(r=>!n.startsWith(r))))}function _w(e,t){if(e===void 0)return null;if(typeof e=="number")return e;const n=+e.replace("%","");return Number.isNaN(n)?null:n/100*t}function C_(e){return typeof e=="object"&&!(e instanceof Date)&&e!==null&&!Array.isArray(e)}function Sv(e){return e===null||e===!1}function bw(e,t,n=5,r=0){if(!(r>=n)){for(const i of Object.keys(t)){const s=t[i];!Ev(s)||!Ev(e[i])?e[i]=s:bw(e[i],s,n,r+1)}return e}}function Ra(e){return new ac([e],null,e,e.ownerDocument)}class ac{constructor(t=null,n=null,r=null,i=null,s=[null,null,null,null,null],l=[],c=[]){this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=s[0],this._update=s[1],this._exit=s[2],this._merge=s[3],this._split=s[4],this._transitions=l,this._facetElements=c}selectAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new ac(n,null,this._elements[0],this._document)}selectFacetAll(t){const n=typeof t=="string"?this._parent.querySelectorAll(t):t;return new ac(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(t){const n=typeof t=="string"?this._parent.querySelectorAll(t)[0]||null:t;return new ac([n],null,n,this._document)}append(t){const n=typeof t=="function"?t:()=>this.createElement(t),r=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const s=this._data[i],[l,c]=Array.isArray(s)?s:[s,null],h=n(l,i);h.__data__=l,c!==null&&(h.__fromElements__=c),this._parent.appendChild(h),r.push(h)}return new ac(r,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const s=this._elements[i],l=s.__data__,c=n(l,i);s.appendChild(c),r.push(c)}return new ac(r,null,r[0],this._document)}}maybeAppend(t,n,r){const i=this._elements[0],s=i.getElementById(t);if(s)return new ac([s],null,this._parent,this._document);const l=typeof n=="string"?this.createElement(n):n();return l.id=t,r&&(l.className=r),i.appendChild(l),new ac([l],null,this._parent,this._document)}data(t,n=i=>i,r=()=>null){const i=[],s=[],l=new Set(this._elements),c=[],h=new Set,p=new Map(this._elements.map((T,M)=>[n(T.__data__,M),T])),v=new Map(this._facetElements.map((T,M)=>[n(T.__data__,M),T])),y=Nu(this._elements,T=>r(T.__data__));for(let T=0;T<t.length;T++){const M=t[T],R=n(M,T),I=r(M,T);if(p.has(R)){const N=p.get(R);N.__data__=M,N.__facet__=!1,s.push(N),l.delete(N),p.delete(R)}else if(v.has(R)){const N=v.get(R);N.__data__=M,N.__facet__=!0,s.push(N),v.delete(R)}else if(y.has(R)){const N=y.get(R);c.push([M,N]);for(const z of N)l.delete(z);y.delete(R)}else if(p.has(I)){const N=p.get(I);N.__toData__?N.__toData__.push(M):N.__toData__=[M],h.add(N),l.delete(N)}else i.push(M)}const b=[new ac([],i,this._parent,this._document),new ac(s,null,this._parent,this._document),new ac(l,null,this._parent,this._document),new ac([],c,this._parent,this._document),new ac(h,null,this._parent,this._document)];return new ac(this._elements,null,this._parent,this._document,b)}merge(t){const n=[...this._elements,...t._elements],r=[...this._transitions,...t._transitions];return new ac(n,null,this._parent,this._document,void 0,r)}createElement(t){if(this._document)return this._document.createElement(t,{});const n=ac.registry[t];return n?new n:Kg(`Unknown node type: ${t}`)}join(t=l=>l,n=l=>l,r=l=>l.remove(),i=l=>l,s=l=>l.remove()){const l=t(this._enter),c=n(this._update),h=r(this._exit),p=i(this._merge),v=s(this._split);return c.merge(l).merge(h).merge(p).merge(v)}remove(){for(let t=0;t<this._elements.length;t++){const n=this._transitions[t];if(n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(i=>i.finished)).then(()=>{this._elements[t].remove()})}else this._elements[t].remove()}return new ac([],null,this._parent,this._document,void 0,this._transitions)}each(t){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],i=r.__data__;t(i,n,r)}return this}attr(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,s,l){n!==void 0&&(l[t]=r(i,s,l))})}style(t,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,s,l){n!==void 0&&(l.style[t]=r(i,s,l))})}transition(t){const n=typeof t!="function"?()=>t:t,{_transitions:r}=this;return this.each(function(i,s,l){r[s]=n(i,s,l)})}on(t,n){return this.each(function(r,i,s){s.addEventListener(t,n)}),this}call(t,...n){return t(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}ac.registry={g:yc,rect:L0,circle:Sl,path:Ki,text:oc,ellipse:em,image:Do,line:F1,polygon:Ko,polyline:lr,html:ii};const wl={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};var $3=function(e){var t=pw(e);return t.charAt(0).toUpperCase()+t.substring(1)},n0=$3;function q3(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function lb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function K3(e){return e=lb(Math.abs(e)),e?e[1]:NaN}function xw(e,t){return function(n,r){for(var i=n.length,s=[],l=0,c=e[0],h=0;i>0&&c>0&&(h+c+1>r&&(c=Math.max(1,r-h)),s.push(n.substring(i-=c,i+c)),!((h+=c+1)>r));)c=e[l=(l+1)%e.length];return s.reverse().join(t)}}function Q3(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var J3=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ub(e){if(!(t=J3.exec(e)))throw new Error("invalid format: "+e);var t;return new Qg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ub.prototype=Qg.prototype;function Qg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Qg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jg(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Ew;function eM(e,t){var n=lb(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Ew=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+lb(e,Math.max(0,t+s-1))[0]}function O_(e,t){var n=lb(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var Sw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:q3,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>O_(e*100,t),r:O_,s:eM,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ww(e){return e}var rl=Array.prototype.map,x2=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Tw(e){var t=e.grouping===void 0||e.thousands===void 0?ww:xw(rl.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?ww:Q3(rl.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"\u2212":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function p(y){y=ub(y);var b=y.fill,T=y.align,M=y.sign,R=y.symbol,I=y.zero,N=y.width,z=y.comma,H=y.precision,X=y.trim,Y=y.type;Y==="n"?(z=!0,Y="g"):Sw[Y]||(H===void 0&&(H=12),X=!0,Y="g"),(I||b==="0"&&T==="=")&&(I=!0,b="0",T="=");var ne=R==="$"?n:R==="#"&&/[boxX]/.test(Y)?"0"+Y.toLowerCase():"",pe=R==="$"?r:/[%p]/.test(Y)?l:"",ye=Sw[Y],De=/[defgprs%]/.test(Y);H=H===void 0?6:/[gprs]/.test(Y)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H));function Xe(Ke){var mt=ne,Qe=pe,ut,ct,gt;if(Y==="c")Qe=ye(Ke)+Qe,Ke="";else{Ke=+Ke;var Xt=Ke<0||1/Ke<0;if(Ke=isNaN(Ke)?h:ye(Math.abs(Ke),H),X&&(Ke=Jg(Ke)),Xt&&+Ke==0&&M!=="+"&&(Xt=!1),mt=(Xt?M==="("?M:c:M==="-"||M==="("?"":M)+mt,Qe=(Y==="s"?x2[8+Ew/3]:"")+Qe+(Xt&&M==="("?")":""),De){for(ut=-1,ct=Ke.length;++ut<ct;)if(gt=Ke.charCodeAt(ut),48>gt||gt>57){Qe=(gt===46?i+Ke.slice(ut+1):Ke.slice(ut))+Qe,Ke=Ke.slice(0,ut);break}}}z&&!I&&(Ke=t(Ke,1/0));var Rt=mt.length+Ke.length+Qe.length,kt=Rt<N?new Array(N-Rt+1).join(b):"";switch(z&&I&&(Ke=t(kt+Ke,kt.length?N-Qe.length:1/0),kt=""),T){case"<":Ke=mt+Ke+Qe+kt;break;case"=":Ke=mt+kt+Ke+Qe;break;case"^":Ke=kt.slice(0,Rt=kt.length>>1)+mt+Ke+Qe+kt.slice(Rt);break;default:Ke=kt+mt+Ke+Qe;break}return s(Ke)}return Xe.toString=function(){return y+""},Xe}function v(y,b){var T=p((y=ub(y),y.type="f",y)),M=Math.max(-8,Math.min(8,Math.floor(K3(b)/3)))*3,R=Math.pow(10,-M),I=x2[8+M/3];return function(N){return T(R*N)+I}}return{format:p,formatPrefix:v}}var cb,r0,Aw;tM({thousands:",",grouping:[3],currency:["$",""]});function tM(e){return cb=Tw(e),r0=cb.format,Aw=cb.formatPrefix,cb}function om(e,t){return Object.entries(e).reduce((n,[r,i])=>(n[r]=t(i,r,e),n),{})}function eg(e){return e.map((t,n)=>n)}function JI(e){const t=e.length,n=e[0].length,r=new Array(n).fill(0).map(()=>new Array(t));for(let i=0;i<n;i++)for(let s=0;s<t;s++)r[i][s]=e[s][i];return r}function nM(e){return e[0]}function Cw(e){return e[e.length-1]}function e4(e){return!e.some(Array.isArray)}function rM(e){return Array.from(new Set(e))}function Ow(e,t){const n=[[],[]];return e.forEach(r=>{n[t(r)?0:1].push(r)}),n}function E2(e,t=e.length){if(t===1)return e.map(r=>[r]);const n=[];for(let r=0;r<e.length;r++){const i=e.slice(r+1);E2(i,t-1).forEach(l=>{n.push([e[r],...l])})}return n}function Mw(e){if(e.length===1)return[e];const t=[];for(let n=1;n<=e.length;n++)t.push(...E2(e,n));return t}var Rw=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},M_=Rw,S2=function(e,t){if(e===t)return!0;if(!e||!t||u(e)||u(t))return!1;if(M_(e)||M_(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=S2(e[r],t[r]),!!n);r++);return n}if(m2(e)||m2(t)){var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(var n=!0,r=0;r<i.length&&(n=S2(e[i[r]],t[i[r]]),!!n);r++);return n}return!1},Pw=S2;function Xd(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Tl(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function t4(e){return e*Math.PI/180}function iM(e){return e*180/Math.PI}function tg(e,t){return e=e%(2*Math.PI),t=t%(2*Math.PI),e<0&&(e=2*Math.PI+e),t<0&&(t=2*Math.PI+t),e>=t&&(t=t+2*Math.PI),{startAngle:e,endAngle:t}}const Iw=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},t),e);return Object.assign(Object.assign({},n),tg(n.startAngle,n.endAngle))},R_=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Iw(e);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",t,n,r,i]]};R_.props={};const Dw=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},w2=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=Dw(e);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...R_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};w2.props={};function fb(e,t,n){return Math.max(t,Math.min(e,n))}function ey(e,t=10){return typeof e!="number"||Math.abs(e)<1e-15?e:parseFloat(e.toFixed(t))}const hb=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var Lw=L(17816);function tu(e){const{transformations:t}=e.getOptions();return t.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function nu(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="polar")}function P_(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="reflect")&&t.some(([n])=>n.startsWith("transpose"))}function Nw(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="helix")}function I_(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="parallel")}function T2(e){const{transformations:t}=e.getOptions();return t.some(([n])=>n==="fisheye")}function oM(e){return I_(e)&&nu(e)}function ty(e){return Nw(e)||nu(e)}function A2(e){return nu(e)&&tu(e)}function n4(e){return nu(e)||I_(e)||P_(e)||A2(e)}function aM(e){if(ty(e)){const[t,n]=e.getSize(),r=e.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(t,n)/2*r[4]}return 0}function am(e){const{transformations:t}=e.getOptions(),[,,,n,r]=t.find(i=>i[0]==="polar");return[+n,+r]}function C2(e,t=!0){const{transformations:n}=e.getOptions(),[,r,i]=n.find(s=>s[0]==="polar");return t?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function r4(e,t){const{transformations:n}=e.getOptions(),[,...r]=n.find(i=>i[0]===t);return r}function a(e,t){t(e),e.children&&e.children.forEach(function(n){n&&a(n,t)})}function o(e){m(e,!0)}function f(e){m(e,!1)}function m(e,t){var n=t?"visible":"hidden";a(e,function(r){r.attr("visibility",n)})}function w(e){return typeof e=="boolean"?!1:"enter"in e&&"update"in e&&"exit"in e}function C(e){if(!e)return{enter:!1,update:!1,exit:!1};var t=["enter","update","exit"],n=Object.fromEntries(Object.entries(e).filter(function(r){var i=(0,ae.CR)(r,1),s=i[0];return!t.includes(s)}));return Object.fromEntries(t.map(function(r){return w(e)?e[r]===!1?[r,!1]:[r,(0,ae.pi)((0,ae.pi)({},e[r]),n)]:[r,n]}))}function D(e,t){e?e.finished.then(t):t()}function B(e,t){e.length===0?t():Promise.all(e.map(function(n){return n==null?void 0:n.finished})).then(t)}function V(e,t){"update"in e?e.update(t):e.attr(t)}function re(e,t,n){if(t.length===0)return null;if(!n){var r=t.slice(-1)[0];return V(e,{style:r}),null}return e.animate(t,n)}function Te(e,t){return!(e.nodeName!=="text"||t.nodeName!=="text"||e.attributes.text!==t.attributes.text)}function Ae(e,t,n,r){if(r===void 0&&(r="destroy"),Te(e,t))return e.remove(),[null];var i=function(){r==="destroy"?e.destroy():r==="hide"&&f(e),t.isVisible()&&o(t)};if(!n)return i(),[null];var s=n.duration,l=s===void 0?0:s,c=n.delay,h=c===void 0?0:c,p=Math.ceil(+l/2),v=+l/4,y=(0,ae.CR)(e.getGeometryBounds().center,2),b=y[0],T=y[1],M=(0,ae.CR)(t.getGeometryBounds().center,2),R=M[0],I=M[1],N=(0,ae.CR)([(b+R)/2-b,(T+I)/2-T],2),z=N[0],H=N[1],X=e.style.opacity,Y=X===void 0?1:X,ne=t.style.opacity,pe=ne===void 0?1:ne,ye=e.style.transform||"",De=t.style.transform||"",Xe=e.animate([{opacity:Y,transform:"translate(0, 0) ".concat(ye)},{opacity:0,transform:"translate(".concat(z,", ").concat(H,") ").concat(ye)}],(0,ae.pi)((0,ae.pi)({fill:"both"},n),{duration:h+p+v})),Ke=t.animate([{opacity:0,transform:"translate(".concat(-z,", ").concat(-H,") ").concat(De),offset:.01},{opacity:pe,transform:"translate(0, 0) ".concat(De)}],(0,ae.pi)((0,ae.pi)({fill:"both"},n),{duration:p+v,delay:h+p-v}));return D(Ke,i),[Xe,Ke]}function Fe(e,t,n){var r={},i={};return Object.entries(t).forEach(function(s){var l=(0,ae.CR)(s,2),c=l[0],h=l[1];if(!(0,ya.Z)(h)){var p=e.style[c]||e.parsedStyle[c]||0;p!==h&&(r[c]=p,i[c]=h)}}),n?re(e,[r,i],(0,ae.pi)({fill:"both"},n)):(V(e,i),null)}var Mt=5,rn=function(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=Mt),Object.entries(t).forEach(function(i){var s=(0,ae.CR)(i,2),l=s[0],c=s[1],h=e;Object.prototype.hasOwnProperty.call(t,l)&&(c?Ev(c)?(Ev(e[l])||(h[l]={}),n<r?rn(e[l],c,n+1,r):h[l]=t[l]):Ho(c)?(h[l]=[],h[l]=h[l].concat(c)):h[l]=c:h[l]=c)})},In=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)rn(e,t[r]);return e},ar=function(e){(0,ae.ZT)(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,(0,ae.ev)([],(0,ae.CR)(n),!1))||this;return i.isMutationObserved=!0,i.addEventListener(ka.INSERTED,function(){f(i)}),i}return t}(yc);function Cr(e){var t=e.appendChild(new ar({class:"offscreen"}));return f(t),t}function vr(e){for(var t=e;t;){if(t.className==="offscreen")return!0;t=t.parent}return!1}function qr(){m(this,this.attributes.visibility!=="hidden")}var ri=function(e){(0,ae.ZT)(t,e);function t(n,r){r===void 0&&(r={});var i=e.call(this,In({},{style:r},n))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=Cr(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t.prototype.attributeChangedCallback=function(n){n==="visibility"&&qr.call(this)},t.prototype.update=function(n,r){var i;return this.attr(In({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.bindEvents=function(n,r){},t}(Gd);function po(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(s){s.node().removeChildren()}),e?n(t):(r&&i(t),null)}function ho(e,t){if(e.length<=t)return e;for(var n=Math.floor(e.length/t),r=[],i=0;i<e.length;i+=n)r.push(e[i]);return r}var Xr=function(e){(0,ae.ZT)(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=(0,ae._T)(n,["style"]);return e.call(this,(0,ae.pi)({style:(0,ae.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(t.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=Cr(this)),this._offscreen},enumerable:!1,configurable:!0}),t.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},t}(oc);function lo(e,t){var n=new Map;return e.forEach(function(r){var i=t(r);n.has(i)||n.set(i,[]),n.get(i).push(r)}),n}function za(e){throw new Error(e)}var Ps=function(){function e(i,s,l,c,h,p,v){i===void 0&&(i=null),s===void 0&&(s=null),l===void 0&&(l=null),c===void 0&&(c=null),h===void 0&&(h=[null,null,null,null,null]),p===void 0&&(p=[]),v===void 0&&(v=[]),t.add(this),this._elements=Array.from(i),this._data=s,this._parent=l,this._document=c,this._enter=h[0],this._update=h[1],this._exit=h[2],this._merge=h[3],this._split=h[4],this._transitions=p,this._facetElements=v}e.prototype.selectAll=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(s,null,this._elements[0],this._document)},e.prototype.selectFacetAll=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(this._elements,null,this._parent,this._document,void 0,void 0,s)},e.prototype.select=function(i){var s=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new n([s],null,s,this._document)},e.prototype.append=function(i){var s=this,l=typeof i=="function"?i:function(){return s.createElement(i)},c=[];if(this._data!==null){for(var h=0;h<this._data.length;h++){var p=this._data[h],v=(0,ae.CR)(Array.isArray(p)?p:[p,null],2),y=v[0],b=v[1],T=l(y,h);T.__data__=y,b!==null&&(T.__fromElements__=b),this._parent.appendChild(T),c.push(T)}return new n(c,null,this._parent,this._document)}for(var h=0;h<this._elements.length;h++){var M=this._elements[h],y=M.__data__,T=l(y,h);M.appendChild(T),c.push(T)}return new n(c,null,c[0],this._document)},e.prototype.maybeAppend=function(i,s){var l=(0,ae.Q_)(this,t,"m",r).call(this,i[0]==="#"?i:"#".concat(i),s);return l.attr("id",i),l},e.prototype.maybeAppendByClassName=function(i,s){var l=i.toString(),c=(0,ae.Q_)(this,t,"m",r).call(this,l[0]==="."?l:".".concat(l),s);return c.attr("className",l),c},e.prototype.maybeAppendByName=function(i,s){var l=(0,ae.Q_)(this,t,"m",r).call(this,'[name="'.concat(i,'"]'),s);return l.attr("name",i),l},e.prototype.data=function(i,s,l){var c,h;s===void 0&&(s=function(Xe){return Xe}),l===void 0&&(l=function(){return null});for(var p=[],v=[],y=new Set(this._elements),b=[],T=new Set,M=new Map(this._elements.map(function(Xe,Ke){return[s(Xe.__data__,Ke),Xe]})),R=new Map(this._facetElements.map(function(Xe,Ke){return[s(Xe.__data__,Ke),Xe]})),I=lo(this._elements,function(Xe){return l(Xe.__data__)}),N=0;N<i.length;N++){var z=i[N],H=s(z,N),X=l(z,N);if(M.has(H)){var Y=M.get(H);Y.__data__=z,Y.__facet__=!1,v.push(Y),y.delete(Y),M.delete(H)}else if(R.has(H)){var Y=R.get(H);Y.__data__=z,Y.__facet__=!0,v.push(Y),R.delete(H)}else if(I.has(H)){var ne=I.get(H);b.push([z,ne]);try{for(var pe=(c=void 0,(0,ae.XA)(ne)),ye=pe.next();!ye.done;ye=pe.next()){var Y=ye.value;y.delete(Y)}}catch(Xe){c={error:Xe}}finally{try{ye&&!ye.done&&(h=pe.return)&&h.call(pe)}finally{if(c)throw c.error}}I.delete(H)}else if(M.has(X)){var Y=M.get(X);Y.__toData__?Y.__toData__.push(z):Y.__toData__=[z],T.add(Y),y.delete(Y)}else p.push(z)}var De=[new n([],p,this._parent,this._document),new n(v,null,this._parent,this._document),new n(y,null,this._parent,this._document),new n([],b,this._parent,this._document),new n(T,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,De)},e.prototype.merge=function(i){var s=(0,ae.ev)((0,ae.ev)([],(0,ae.CR)(this._elements),!1),(0,ae.CR)(i._elements),!1),l=(0,ae.ev)((0,ae.ev)([],(0,ae.CR)(this._transitions),!1),(0,ae.CR)(i._transitions),!1);return new n(s,null,this._parent,this._document,void 0,l)},e.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var s=n.registry[i];return s?new s:za("Unknown node type: ".concat(i))},e.prototype.join=function(i,s,l,c,h){i===void 0&&(i=function(M){return M}),s===void 0&&(s=function(M){return M}),l===void 0&&(l=function(M){return M.remove()}),c===void 0&&(c=function(M){return M}),h===void 0&&(h=function(M){return M.remove()});var p=i(this._enter),v=s(this._update),y=l(this._exit),b=c(this._merge),T=h(this._split);return v.merge(p).merge(y).merge(b).merge(T)},e.prototype.remove=function(){for(var i=function(c){var h=s._elements[c],p=s._transitions[c];p?p.then(function(){return h.remove()}):h.remove()},s=this,l=0;l<this._elements.length;l++)i(l);return new n([],null,this._parent,this._document,void 0,this._transitions)},e.prototype.each=function(i){for(var s=0;s<this._elements.length;s++){var l=this._elements[s],c=l.__data__;i.call(l,c,s)}return this},e.prototype.attr=function(i,s){var l=typeof s!="function"?function(){return s}:s;return this.each(function(c,h){s!==void 0&&(this[i]=l.call(this,c,h))})},e.prototype.style=function(i,s,l){l===void 0&&(l=!0);var c=typeof s!="function"||!l?function(){return s}:s;return this.each(function(h,p){s!==void 0&&(this.style[i]=c.call(this,h,p))})},e.prototype.styles=function(i,s){return i===void 0&&(i={}),s===void 0&&(s=!0),this.each(function(l,c){var h=this;Object.entries(i).forEach(function(p){var v=(0,ae.CR)(p,2),y=v[0],b=v[1],T=typeof b!="function"||!s?function(){return b}:b;b!==void 0&&h.attr(y,T.call(h,l,c))})})},e.prototype.update=function(i,s){s===void 0&&(s=!0);var l=typeof i!="function"||!s?function(){return i}:i;return this.each(function(c,h){i&&this.update&&this.update(l.call(this,c,h))})},e.prototype.maybeUpdate=function(i,s){s===void 0&&(s=!0);var l=typeof i!="function"||!s?function(){return i}:i;return this.each(function(c,h){i&&this.update&&this.update(l.call(this,c,h))})},e.prototype.transition=function(i){var s=this._transitions;return this.each(function(l,c){s[c]=i.call(this,l,c)})},e.prototype.on=function(i,s){return this.each(function(){this.addEventListener(i,s)}),this},e.prototype.call=function(i){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return i.call.apply(i,(0,ae.ev)([this._parent,this],(0,ae.CR)(s),!1)),this},e.prototype.node=function(){return this._elements[0]},e.prototype.nodes=function(){return this._elements},e.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},e.prototype.parent=function(){return this._parent};var t,n,r;return n=e,t=new WeakSet,r=function(s,l){var c=this._elements[0],h=c.querySelector(s);if(h)return new n([h],null,this._parent,this._document);var p=typeof l=="string"?this.createElement(l):l();return c.appendChild(p),new n([p],null,this._parent,this._document)},e.registry={g:yc,rect:L0,circle:Sl,path:Ki,text:Xr,ellipse:em,image:Do,line:F1,polygon:Ko,polyline:lr,html:ii},e}();function zi(e){return new Ps([e],null,e,e.ownerDocument)}function _s(e,t,n){return e.querySelector(t)?zi(e).select(t):zi(e).append(n)}var as=function(e,t){var n=function(i){return"".concat(t,"-").concat(i)},r=Object.fromEntries(Object.entries(e).map(function(i){var s=(0,ae.CR)(i,2),l=s[0],c=s[1],h=n(c);return[l,{name:h,class:".".concat(h),id:"#".concat(h),toString:function(){return h}}]}));return Object.assign(r,{prefix:n}),r},$f={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new Ki({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},Yd=hi({},$f,{style:{type:"arc"}}),$d=hi({},$f,{style:{}}),Zs=as({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),_c=function(e){return typeof e=="function"};function Pc(e,t){return[e[0]*t,e[1]*t]}function wv(e,t){return[e[0]+t[0],e[1]+t[1]]}function O2(e,t){return[e[0]-t[0],e[1]-t[1]]}function ng(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1])]}function rg(e,t){return[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}function D_(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function Fw(e){if(e[0]===0&&e[1]===0)return[0,0];var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[0]/t,e[1]/t]}function i4(e,t,n){var r=__read(e,2),i=r[0],s=r[1],l=__read(t,2),c=l[0],h=l[1],p=i-c,v=s-h,y=Math.sin(n),b=Math.cos(n);return[p*b-v*y+c,p*y+v*b+h]}function sM(e,t){return t?[e[1],-e[0]]:[-e[1],e[0]]}function ny(e){return e*Math.PI/180}function pa(e){return Number((e*180/Math.PI).toPrecision(5))}function Hs(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}function _l(e){return e.toString().charAt(0).toLowerCase()+e.toString().slice(1)}function bo(e,t){return"".concat(t).concat(Hs(e))}function Nh(e,t,n){var r;n===void 0&&(n=!0);var i=t||((r=e.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",s=e.replace(new RegExp("^(".concat(i,")")),"");return n?_l(s):s}function Su(e,t){Object.entries(t).forEach(function(n){var r=(0,ae.CR)(n,2),i=r[0],s=r[1];(0,ae.ev)([e],(0,ae.CR)(e.querySelectorAll(i)),!1).filter(function(l){return l.matches(i)}).forEach(function(l){if(l){var c=l;c.style.cssText+=Object.entries(s).reduce(function(h,p){return"".concat(h).concat(p.join(":"),";")},"")}})})}var hh=function(e,t){if(!(e!=null&&e.startsWith(t)))return!1;var n=e[t.length];return n>="A"&&n<="Z"};function Ua(e,t,n){n===void 0&&(n=!1);var r={};return Object.entries(e).forEach(function(i){var s=(0,ae.CR)(i,2),l=s[0],c=s[1];if(!(l==="className"||l==="class")){if(hh(l,"show")&&hh(Nh(l,"show"),t)!==n)l===bo(t,"show")?r[l]=c:r[l.replace(new RegExp(Hs(t)),"")]=c;else if(!hh(l,"show")&&hh(l,t)!==n){var h=Nh(l,t);h==="filter"&&typeof c=="function"||(r[h]=c)}}}),r}function dh(e,t){return Object.entries(e).reduce(function(n,r){var i=(0,ae.CR)(r,2),s=i[0],l=i[1];return s.startsWith("show")?n["show".concat(t).concat(s.slice(4))]=l:n["".concat(t).concat(Hs(s))]=l,n},{})}function F0(e,t){t===void 0&&(t=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(e).forEach(function(s){var l=(0,ae.CR)(s,2),c=l[0],h=l[1];t.includes(c)||(n.indexOf(c)!==-1?i[c]=h:r[c]=h)}),[r,i]}function B0(e,t){return _c(e)?e.apply(void 0,(0,ae.ev)([],(0,ae.CR)(t),!1)):e}function Bw(e,t){return e.style.opacity||(e.style.opacity=1),Fe(e,{opacity:0},t)}var pj=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function vj(e){return pj.includes(e)}function o4(e){var t={};for(var n in e)vj(n)&&(t[n]=e[n]);return t}var db=as({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function a4(e){return e.reduce(function(t,n,r){return t.push((0,ae.ev)([r===0?"M":"L"],(0,ae.CR)(n),!1)),t},[])}function mj(e,t,n){var r=t.connect,i=r===void 0?"line":r,s=t.center;if(i==="line")return a4(e);if(!s)return[];var l=D_(e[0],s),c=n?0:1;return e.reduce(function(h,p,v){return v===0?h.push((0,ae.ev)(["M"],(0,ae.CR)(p),!1)):h.push((0,ae.ev)(["A",l,l,0,0,c],(0,ae.CR)(p),!1)),h},[])}function lM(e,t,n){return t.type==="surround"?mj(e,t,n):a4(e)}function gj(e,t,n){var r=n.type,i=n.connect,s=n.center,l=n.closed,c=l?[["Z"]]:[],h=(0,ae.CR)([lM(e,n),lM(t.slice().reverse(),n,!0)],2),p=h[0],v=h[1],y=(0,ae.CR)([e[0],t.slice(-1)[0]],2),b=y[0],T=y[1],M=function(z,H){return[p,z,v,H,c].flat()};if(i==="line"||r==="surround")return M([(0,ae.ev)(["L"],(0,ae.CR)(T),!1)],[(0,ae.ev)(["L"],(0,ae.CR)(b),!1)]);if(!s)throw new Error("Arc grid need to specified center");var R=(0,ae.CR)([D_(T,s),D_(b,s)],2),I=R[0],N=R[1];return M([(0,ae.ev)(["A",I,I,0,0,1],(0,ae.CR)(T),!1),(0,ae.ev)(["L"],(0,ae.CR)(T),!1)],[(0,ae.ev)(["A",N,N,0,0,0],(0,ae.CR)(b),!1),(0,ae.ev)(["L"],(0,ae.CR)(b),!1)])}function yj(e,t,n,r){var i=n.animate,s=n.isBillboard,l=t.map(function(c,h){return{id:c.id||"grid-line-".concat(h),d:lM(c.points,n)}});return e.selectAll(db.line.class).data(l,function(c){return c.id}).join(function(c){return c.append("path").each(function(h,p){var v=B0(o4((0,ae.pi)({d:h.d},r)),[h,p,l]);this.attr((0,ae.pi)({class:db.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:s},v))})},function(c){return c.transition(function(h,p){var v=B0(o4((0,ae.pi)({d:h.d},r)),[h,p,l]);return Fe(this,v,i.update)})},function(c){return c.transition(function(){var h=this,p=Bw(this,i.exit);return D(p,function(){return h.remove()}),p})}).transitions()}function _j(e,t,n){var r=n.animate,i=n.connect,s=n.areaFill;if(t.length<2||!s||!i)return[];for(var l=Array.isArray(s)?s:[s,"transparent"],c=function(M){return l[M%l.length]},h=[],p=0;p<t.length-1;p++){var v=(0,ae.CR)([t[p].points,t[p+1].points],2),y=v[0],b=v[1],T=gj(y,b,n);h.push({d:T,fill:c(p)})}return e.selectAll(db.region.class).data(h,function(M,R){return R}).join(function(M){return M.append("path").each(function(R,I){var N=B0(R,[R,I,h]);this.attr(N)}).attr("className",db.region.name)},function(M){return M.transition(function(R,I){var N=B0(R,[R,I,h]);return Fe(this,N,r.update)})},function(M){return M.transition(function(){var R=this,I=Bw(this,r.exit);return D(I,function(){return R.remove()}),I})}).transitions()}function bj(e){var t=e.data,n=t===void 0?[]:t,r=e.closed;return r?n.map(function(i){var s=i.points,l=(0,ae.CR)(s,1),c=l[0];return(0,ae.pi)((0,ae.pi)({},i),{points:(0,ae.ev)((0,ae.ev)([],(0,ae.CR)(s),!1),[c],!1)})}):n}var xj=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.type,s=n.center,l=n.areaFill,c=n.closed,h=(0,ae._T)(n,["type","center","areaFill","closed"]),p=bj(n),v=zi(r).maybeAppendByClassName(db.lineGroup,"g"),y=zi(r).maybeAppendByClassName(db.regionGroup,"g"),b=yj(v,p,n,h),T=_j(y,p,n);return(0,ae.ev)((0,ae.ev)([],(0,ae.CR)(b),!1),(0,ae.CR)(T),!1)},t}(ri),sl=function(e,t,n){for(var r=0,i=u(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e},Ej=function(e,t){return function(n){return e*(1-n)+t*n}};function Sj(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0;return function(i){var s=new Array(r),l=new Array(n),c=0;for(c=0;c<r;++c)s[c]=uM(e[c],t[c]);for(;c<n;++c)l[c]=t[c];for(c=0;c<r;++c)l[c]=s[c](i);return l}}function wj(e,t){e===void 0&&(e={}),t===void 0&&(t={});var n={},r={};return Object.entries(t).forEach(function(i){var s=(0,ae.CR)(i,2),l=s[0],c=s[1];l in e?n[l]=uM(e[l],c):r[l]=c}),function(i){return Object.entries(n).forEach(function(s){var l=(0,ae.CR)(s,2),c=l[0],h=l[1];return r[c]=h(i)}),r}}function uM(e,t){return typeof e=="number"&&typeof t=="number"?Ej(e,t):Array.isArray(e)&&Array.isArray(t)?Sj(e,t):typeof e=="object"&&typeof t=="object"?wj(e,t):function(n){return e}}function Tj(e,t,n,r){if(!r)return e.attr("__keyframe_data__",n),null;var i=r.duration,s=i===void 0?0:i,l=uM(t,n),c=Math.ceil(+s/16),h=new Array(c).fill(0).map(function(p,v,y){return{__keyframe_data__:l(v/(y.length-1))}});return e.animate(h,(0,ae.pi)({fill:"both"},r))}function L_(e){return typeof e=="function"?e():u(e)||(0,yu.Z)(e)?new Xr({style:{text:String(e)}}):e}function cM(e,t,n){n===void 0&&(n=!1);var r=e.getBBox(),i=r.width,s=r.height,l=t/Math.max(i,s);return n&&(e.style.transform="scale(".concat(l,")")),l}function s4(e,t){var n={},r=Array.isArray(t)?t:[t];for(var i in e)r.includes(i)||(n[i]=e[i]);return n}function l4(e,t){return Object.fromEntries(Object.entries(e).map(function(n){var r=(0,ae.CR)(n,2),i=r[0],s=r[1];return[i,B0(s,t)]}))}function Sde(e){if(e.type==="linear"){var t=e.startPos,n=e.endPos;return __spreadArray(__spreadArray([],__read(t),!1),__read(n),!1)}var r=e.startAngle,i=e.endAngle,s=e.center,l=e.radius;return __spreadArray(__spreadArray([r,i],__read(s),!1),[l],!1)}function fM(e,t){return t&&_c(t)?e.filter(t):e}function u4(e,t){var n=t.startAngle,r=t.endAngle;return(r-n)*e+n}function kw(e,t){if(t.type==="linear"){var n=(0,ae.CR)(t.startPos,2),r=n[0],i=n[1],s=(0,ae.CR)(t.endPos,2),l=s[0],c=s[1],h=(0,ae.CR)([l-r,c-i],2),p=h[0],v=h[1];return Fw([p,v])}var y=ny(u4(e,t));return[-Math.sin(y),Math.cos(y)]}function hM(e,t,n){var r=kw(e,n);return sM(r,t!=="positive")}function M2(e,t){return hM(e,t.labelDirection,t)}function Aj(e,t){var n=(0,ae.CR)(t.startPos,2),r=n[0],i=n[1],s=(0,ae.CR)(t.endPos,2),l=s[0],c=s[1],h=(0,ae.CR)([l-r,c-i],2),p=h[0],v=h[1];return[r+p*e,i+v*e]}function Cj(e,t){var n=t.radius,r=(0,ae.CR)(t.center,2),i=r[0],s=r[1],l=ny(u4(e,t));return[i+n*Math.cos(l),s+n*Math.sin(l)]}function zw(e,t){return t.type==="linear"?Aj(e,t):Cj(e,t)}function c4(e){return kw(0,e)[1]===0}function f4(e){return kw(0,e)[0]===0}function h4(e,t){return t-e===360}function d4(e,t,n,r,i){var s=t-e,l=(0,ae.CR)([i,i],2),c=l[0],h=l[1],p=(0,ae.CR)([ny(e),ny(t)],2),v=p[0],y=p[1],b=function(Xe){return[n+i*Math.cos(Xe),r+i*Math.sin(Xe)]},T=(0,ae.CR)(b(v),2),M=T[0],R=T[1],I=(0,ae.CR)(b(y),2),N=I[0],z=I[1];if(h4(e,t)){var H=(y+v)/2,X=(0,ae.CR)(b(H),2),Y=X[0],ne=X[1];return[["M",M,R],["A",c,h,0,1,0,Y,ne],["A",c,h,0,1,0,N,z]]}var pe=s>180?1:0,ye=e>t?0:1,De=!1;return De?"M".concat(n,",").concat(r,",L").concat(M,",").concat(R,",A").concat(c,",").concat(h,",0,").concat(pe,",").concat(ye,",").concat(N,",").concat(z,",L").concat(n,",").concat(r):"M".concat(M,",").concat(R,",A").concat(c,",").concat(h,",0,").concat(pe,",").concat(ye,",").concat(N,",").concat(z)}function Oj(e){var t=e.attributes,n=t.startAngle,r=t.endAngle,i=t.center,s=t.radius;return(0,ae.ev)((0,ae.ev)([n,r],(0,ae.CR)(i),!1),[s],!1)}function Mj(e,t,n,r){var i=t.startAngle,s=t.endAngle,l=t.center,c=t.radius;return e.selectAll(Zs.line.class).data([{d:d4.apply(void 0,(0,ae.ev)((0,ae.ev)([i,s],(0,ae.CR)(l),!1),[c],!1))}],function(h,p){return p}).join(function(h){return h.append("path").attr("className",Zs.line.name).styles(t).styles({d:function(p){return p.d}})},function(h){return h.transition(function(){var p=this,v=Tj(this,Oj(this),(0,ae.ev)((0,ae.ev)([i,s],(0,ae.CR)(l),!1),[c],!1),r.update);if(v){var y=function(){var b=sl(p.attributes,"__keyframe_data__");p.style.d=d4.apply(void 0,(0,ae.ev)([],(0,ae.CR)(b),!1))};v.onframe=y,v.onfinish=y}return v}).styles(t)},function(h){return h.remove()}).styles(n).transitions()}function Rj(e,t){var n=t.truncRange,r=t.truncShape,i=t.lineExtension}function Pj(e,t,n){n===void 0&&(n=[0,0]);var r=(0,ae.CR)([e,t,n],3),i=(0,ae.CR)(r[0],2),s=i[0],l=i[1],c=(0,ae.CR)(r[1],2),h=c[0],p=c[1],v=(0,ae.CR)(r[2],2),y=v[0],b=v[1],T=(0,ae.CR)([h-s,p-l],2),M=T[0],R=T[1],I=Math.sqrt(Math.pow(M,2)+Math.pow(R,2)),N=(0,ae.CR)([-y/I,b/I],2),z=N[0],H=N[1];return[z*M,z*R,H*M,H*R]}function p4(e){var t=(0,ae.CR)(e,2),n=(0,ae.CR)(t[0],2),r=n[0],i=n[1],s=(0,ae.CR)(t[1],2),l=s[0],c=s[1];return{x1:r,y1:i,x2:l,y2:c}}function Ij(e,t,n,r){var i=t.showTrunc,s=t.startPos,l=t.endPos,c=t.truncRange,h=t.lineExtension,p=(0,ae.CR)([s,l],2),v=(0,ae.CR)(p[0],2),y=v[0],b=v[1],T=(0,ae.CR)(p[1],2),M=T[0],R=T[1],I=(0,ae.CR)(h?Pj(s,l,h):new Array(4).fill(0),4),N=I[0],z=I[1],H=I[2],X=I[3],Y=function(Rt){return e.selectAll(Zs.line.class).data(Rt,function(kt,wn){return wn}).join(function(kt){return kt.append("line").attr("className",function(wn){return"".concat(Zs.line.name," ").concat(wn.className)}).styles(n).transition(function(wn){return Fe(this,p4(wn.line),!1)})},function(kt){return kt.styles(n).transition(function(wn){var zn=wn.line;return Fe(this,p4(zn),r.update)})},function(kt){return kt.remove()}).transitions()};if(!i||!c)return Y([{line:[[y+N,b+z],[M+H,R+X]],className:Zs.line.name}]);var ne=(0,ae.CR)(c,2),pe=ne[0],ye=ne[1],De=M-y,Xe=R-b,Ke=(0,ae.CR)([y+De*pe,b+Xe*pe],2),mt=Ke[0],Qe=Ke[1],ut=(0,ae.CR)([y+De*ye,b+Xe*ye],2),ct=ut[0],gt=ut[1],Xt=Y([{line:[[y+N,b+z],[mt,Qe]],className:Zs.lineFirst.name},{line:[[ct,gt],[M+H,R+X]],className:Zs.lineSecond.name}]);return Rj(e,t),Xt}function Dj(e,t,n,r){var i=n.showArrow,s=n.showTrunc,l=n.lineArrow,c=n.lineArrowOffset,h=n.lineArrowSize,p;if(t==="arc"?p=e.select(Zs.line.class):s?p=e.select(Zs.lineSecond.class):p=e.select(Zs.line.class),!i||!l||n.type==="arc"&&h4(n.startAngle,n.endAngle)){var v=p.node();v&&(v.style.markerEnd=void 0);return}var y=L_(l);y.attr(r),cM(y,h,!0),p.style("markerEnd",y).style("markerEndOffset",-c)}function Lj(e,t,n){var r=t.type,i,s=Ua(t,"line");return r==="linear"?i=Ij(e,t,s4(s,"arrow"),n):i=Mj(e,t,s4(s,"arrow"),n),Dj(e,r,t,s),i}function Nj(e,t){return hM(e,t.gridDirection,t)}function v4(e){var t=e.type,n=e.gridCenter;return t==="linear"?n:n||e.center}function Fj(e,t){var n=t.gridLength;return e.map(function(r,i){var s=r.value,l=(0,ae.CR)(zw(s,t),2),c=l[0],h=l[1],p=(0,ae.CR)(Pc(Nj(s,t),n),2),v=p[0],y=p[1];return{id:i,points:[[c,h],[c+v,h+y]]}})}function Bj(e,t){var n=t.gridControlAngles,r=v4(t);if(!r)throw new Error("grid center is not provide");if(e.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var i=(0,ae.CR)(r,2),s=i[0],l=i[1];return e.map(function(c,h){var p=c.value,v=(0,ae.CR)(zw(p,t),2),y=v[0],b=v[1],T=(0,ae.CR)([y-s,b-l],2),M=T[0],R=T[1],I=[];return n.forEach(function(N){var z=ny(N),H=(0,ae.CR)([Math.cos(z),Math.sin(z)],2),X=H[0],Y=H[1],ne=M*X-R*Y+s,pe=M*Y+R*X+l;I.push([ne,pe])}),{points:I,id:h}})}function kj(e,t,n,r){var i=Ua(n,"grid"),s=i.type,l=i.areaFill,c=v4(n),h=fM(t,n.gridFilter),p=s==="segment"?Fj(h,n):Bj(h,n),v=(0,ae.pi)((0,ae.pi)({},i),{center:c,areaFill:_c(l)?h.map(function(y,b){return B0(l,[y,b,h])}):l,animate:r,data:p});return e.selectAll(Zs.grid.class).data([1]).join(function(y){return y.append(function(){return new xj({style:v})}).attr("className",Zs.grid.name)},function(y){return y.transition(function(){return this.update(v)})},function(y){return y.remove()}).transitions()}function Fh(e,t,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&e===t||i&&e===n?!0:e>t&&e<n}function zj(e){var t,n,r,i=e||1;function s(c,h){++t>i&&(r=n,l(1),++t),n[c]=h}function l(c){t=0,n=Object.create(null),c||(r=Object.create(null))}return l(),{clear:l,has:function(c){return n[c]!==void 0||r[c]!==void 0},get:function(c){var h=n[c];if(h!==void 0)return h;if((h=r[c])!==void 0)return s(c,h),h},set:function(c,h){n[c]!==void 0?n[c]=h:s(c,h)}}}var Uj=function(e,t,n){if(n===void 0&&(n=128),!_c(e))throw new TypeError("Expected a function");var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var l=t?t.apply(this,i):i[0],c=r.cache;if(c.has(l))return c.get(l);var h=e.apply(this,i);return c.set(l,h),h};return r.cache=zj(n),r},Uw,dM;function wde(e){dM=e}var jj=Uj(function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,s=t.fontStyle,l=t.fontVariant;return dM?dM(e,n):(Uw||(Uw=Ar.offscreenCanvasCreator.getOrCreateContext(void 0)),Uw.font=[s,l,i,"".concat(n,"px"),r].join(" "),Uw.measureText(e).width)},function(e,t){return[e,Object.values(t||m4(e)).join()].join("")},4096),m4=function(e){var t=e.style.fontFamily||"sans-serif",n=e.style.fontWeight||"normal",r=e.style.fontStyle||"normal",i=e.style.fontVariant,s=e.style.fontSize;return s=typeof s=="object"?s.value:s,{fontSize:s,fontFamily:t,fontWeight:n,fontStyle:r,fontVariant:i}};function g4(e){return e.nodeName==="text"?e:e.nodeName==="g"&&e.children.length===1&&e.children[0].nodeName==="text"?e.children[0]:null}function y4(e,t){var n=g4(e);n&&n.attr(t)}function pM(e,t,n){n===void 0&&(n="..."),y4(e,{wordWrap:!0,wordWrapWidth:t,maxLines:1,textOverflow:n})}function Vj(e,t,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),y4(e,{wordWrap:!0,wordWrapWidth:t,maxLines:n,textBaseline:r})}function Hj(e,t,n){var r=e.getBBox(),i=r.width,s=r.height,l=(0,ae.CR)([t,n].map(function(p,v){var y;return p.includes("%")?parseFloat(((y=p.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||y===void 0?void 0:y[0])||"0")/100*(v===0?i:s):p}),2),c=l[0],h=l[1];return[c,h]}function _4(e,t){if(t)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=t.replace(n,function(i,s,l){return"translate(".concat(Hj(e,s,l),")")});e.attr("transform",r)}catch(i){}}var b4=function(e){return e!==void 0&&e!=null&&!Number.isNaN(e)};function Bh(e){if((0,yu.Z)(e))return[e,e,e,e];if(Ho(e)){var t=e.length;if(t===1)return[e[0],e[0],e[0],e[0]];if(t===2)return[e[0],e[1],e[0],e[1]];if(t===3)return[e[0],e[1],e[2],e[1]];if(t===4)return e}return[0,0,0,0]}var vM=function(){function e(t,n,r,i){this.set(t,n,r,i)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),e.prototype.rotatedPoints=function(t,n,r){var i=this,s=i.x1,l=i.y1,c=i.x2,h=i.y2,p=Math.cos(t),v=Math.sin(t),y=n-n*p+r*v,b=r-n*v-r*p,T=[[p*s-v*h+y,v*s+p*h+b],[p*c-v*h+y,v*c+p*h+b],[p*s-v*l+y,v*s+p*l+b],[p*c-v*l+y,v*c+p*l+b]];return T},e.prototype.set=function(t,n,r,i){return r<t?(this.x2=t,this.x1=r):(this.x1=t,this.x2=r),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},e.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},e}();function jw(e,t){var n=e.getEulerAngles()||0;e.setEulerAngles(0);var r=e.getBounds(),i=(0,ae.CR)(r.min,2),s=i[0],l=i[1],c=(0,ae.CR)(r.max,2),h=c[0],p=c[1],v=e.getBBox(),y=v.width,b=v.height,T=b,M=0,R=0,I=s,N=l,z=g4(e);if(z){T-=1.5;var H=z.style.textAlign,X=z.style.textBaseline;H==="center"?I=(s+h)/2:(H==="right"||H==="end")&&(I=h),X==="middle"?N=(l+p)/2:X==="bottom"&&(N=p)}var Y=(0,ae.CR)(Bh(t),4),ne=Y[0],pe=ne===void 0?0:ne,ye=Y[1],De=ye===void 0?0:ye,Xe=Y[2],Ke=Xe===void 0?pe:Xe,mt=Y[3],Qe=mt===void 0?De:mt,ut=new vM((M+=s)-Qe,(R+=l)-pe,M+y+De,R+T+Ke);return e.setEulerAngles(n),ut.rotatedPoints(ny(n),I,N)}function R2(e,t){return t[0]<=Math.max(e[0][0],e[1][0])&&t[0]<=Math.min(e[0][0],e[1][0])&&t[1]<=Math.max(e[0][1],e[1][1])&&t[1]<=Math.min(e[0][1],e[1][1])}function P2(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return r===0?0:r<0?2:1}function Gj(e,t){var n=P2(e[0],e[1],t[0]),r=P2(e[0],e[1],t[1]),i=P2(t[0],t[1],e[0]),s=P2(t[0],t[1],e[1]);return!!(n!==r&&i!==s||n===0&&R2(e,t[0])||r===0&&R2(e,t[1])||i===0&&R2(t,e[0])||s===0&&R2(t,e[1]))}function Wj(e,t){var n=e.length;if(n<3)return!1;var r=[t,[9999,t[1]]],i=0,s=0;do{var l=[e[s],e[(s+1)%n]];if(Gj(l,r)){if(P2(l[0],t,l[1])===0)return R2(l,t);i++}s=(s+1)%n}while(s!==0);return!!(i&1)}function Zj(e,t){return t.every(function(n){return Wj(e,n)})}function Xj(e,t,n){var r=e.x1,i=e.x2,s=e.y1,l=e.y2,c=[[r,s],[i,s],[i,l],[r,l]],h=jw(t,n);return Zj(c,h)}function x4(e,t){var n=(0,ae.CR)(e,4),r=n[0],i=n[1],s=n[2],l=n[3],c=(0,ae.CR)(t,4),h=c[0],p=c[1],v=c[2],y=c[3],b=s-r,T=l-i,M=v-h,R=y-p,I=b*R-M*T;if(I===0)return!1;var N=I>0,z=r-h,H=i-p,X=b*H-T*z;if(X<0===N)return!1;var Y=M*H-R*z;return!(Y<0===N||X>I===N||Y>I===N)}function E4(e,t){var n=[[e[0],e[1],e[2],e[3]],[e[2],e[3],e[4],e[5]],[e[4],e[5],e[6],e[7]],[e[6],e[7],e[0],e[1]]];return n.some(function(r){return x4(t,r)})}var Tde={lineToLine:x4,intersectBoxLine:E4,getBounds:jw};function Yj(e,t,n){var r,i,s=jw(e,n).flat(1),l=jw(t,n).flat(1),c=[[s[0],s[1],s[2],s[3]],[s[0],s[1],s[4],s[5]],[s[4],s[5],s[6],s[7]],[s[2],s[3],s[6],s[7]]];try{for(var h=(0,ae.XA)(c),p=h.next();!p.done;p=h.next()){var v=p.value;if(E4(l,v))return!0}}catch(y){r={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return!1}function $j(e,t){var n=e.type,r=e.labelDirection,i=e.crossSize;if(!i)return!1;if(n==="arc"){var s=e.center,l=e.radius,c=(0,ae.CR)(s,2),h=c[0],p=c[1],v=r==="negative"?0:i,y=-l-v,b=l+v,T=(0,ae.CR)(Bh(t),4),M=T[0],R=T[1],I=T[2],N=T[3];return new vM(h+y-N,p+y-M,h+b+R,p+b+I)}var z=(0,ae.CR)(e.startPos,2),H=z[0],X=z[1],Y=(0,ae.CR)(e.endPos,2),ne=Y[0],pe=Y[1],ye=(0,ae.CR)(f4(e)?[-t,0,t,0]:[0,t,0,-t],4),De=ye[0],Xe=ye[1],Ke=ye[2],mt=ye[3],Qe=M2(0,e),ut=Pc(Qe,i),ct=new vM(H,X,ne,pe);return ct.x1+=mt,ct.y1+=De,ct.x2+=Xe+ut[0],ct.y2+=Ke+ut[1],ct}function Vw(e,t,n){var r,i,s=t.crossPadding,l=new Set,c=null,h=$j(t,s),p=function(M){return h?Xj(h,M):!0},v=function(M,R){return!M||!M.firstChild?!0:!Yj(M.firstChild,R.firstChild,Bh(n))};try{for(var y=(0,ae.XA)(e),b=y.next();!b.done;b=y.next()){var T=b.value;p(T)?!c||v(c,T)?c=T:(l.add(c),l.add(T)):l.add(T)}}catch(M){r={error:M}}finally{try{b&&!b.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}return Array.from(l)}function mM(e,t){return t===void 0&&(t={}),(0,ya.Z)(e)?0:typeof e=="number"?e:Math.floor(jj(e,t))}function qj(e,t,n,r){if(!(e.length<=1)){var i=t.suffix,s=i===void 0?"...":i,l=t.minLength,c=t.maxLength,h=c===void 0?1/0:c,p=t.step,v=p===void 0?" ":p,y=t.margin,b=y===void 0?[0,0,0,0]:y,T=m4(r.getTextShape(e[0])),M=mM(v,T),R=l?mM(l,T):M,I=mM(h,T);((0,ya.Z)(I)||I===1/0)&&(I=Math.max.apply(null,e.map(function(ut){return ut.getBBox().width})));for(var N=e.slice(),z=(0,ae.CR)(b,4),H=z[0],X=H===void 0?0:H,Y=z[1],ne=Y===void 0?0:Y,pe=z[2],ye=pe===void 0?X:pe,De=z[3],Xe=De===void 0?ne:De,Ke=function(ut){if(N.forEach(function(ct){r.ellipsis(r.getTextShape(ct),ut,s)}),N=Vw(e,n,b),N.length<1)return{value:void 0}},mt=I;mt>R+M;mt-=M){var Qe=Ke(mt);if(typeof Qe=="object")return Qe.value}}}function Ade(e){var t=e&&e.getRenderBounds();if(!t)return{width:0,height:0};var n=t.getMax(),r=t.getMin();return{width:n[0]-r[0],height:n[1]-r[1]}}function S4(e){var t=e.getLocalBounds(),n=t.min,r=t.max,i=(0,ae.CR)([n,r],2),s=(0,ae.CR)(i[0],2),l=s[0],c=s[1],h=(0,ae.CR)(i[1],2),p=h[0],v=h[1];return{x:l,y:c,width:p-l,height:v-c,left:l,bottom:v,top:c,right:p}}function Cde(e,t){var n=select(e).append("text").node();return n.attr(__assign(__assign({},t),{visibility:"hidden"})),n}function Kj(e,t){var n=(0,ae.CR)(e,2),r=n[0],i=n[1],s=(0,ae.CR)(t,2),l=s[0],c=s[1];return r!==l&&i===c}function Ode(e,t){var n=__read(e,2),r=n[0],i=n[1],s=__read(t,2),l=s[0],c=s[1];return r===l&&i!==c}function Qj(e,t){var n,r,i=t.attributes;try{for(var s=(0,ae.XA)(Object.entries(i)),l=s.next();!l.done;l=s.next()){var c=(0,ae.CR)(l.value,2),h=c[0],p=c[1];h!=="id"&&h!=="className"&&e.attr(h,p)}}catch(v){n={error:v}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var Jj={parity:function(e,t){var n=t.seq,r=n===void 0?2:n;return e.filter(function(i,s){return s%r?(f(i),!1):!0})}},eV=function(e){return e.filter(b4)};function tV(e,t,n,r){var i=e.length,s=t.keepHeader,l=t.keepTail;if(!(i<=1||i===2&&s&&l)){var c=Jj.parity,h=function(H){return H.forEach(r.show),H},p=2,v=e.slice(),y=e.slice(),b=Math.min.apply(Math,(0,ae.ev)([1],(0,ae.CR)(e.map(function(H){return H.getBBox().width})),!1));if(n.type==="linear"&&(c4(n)||f4(n))){var T=S4(e[0]).left,M=S4(e[i-1]).right,R=Math.abs(M-T)||1;p=Math.max(Math.floor(i*b/R),p)}var I,N;for(s&&(I=v.splice(0,1)[0]),l&&(N=v.splice(-1,1)[0],v.reverse()),h(v);p<e.length&&Vw(eV(N?(0,ae.ev)((0,ae.ev)([N],(0,ae.CR)(y),!1),[I],!1):(0,ae.ev)([I],(0,ae.CR)(y),!1)),n,t==null?void 0:t.margin).length;){if(N&&!I&&p%2===0){var z=v.splice(0,1);z.forEach(r.hide)}else if(N&&I){var z=v.splice(0,1);z.forEach(r.hide)}y=c(h(v),{seq:p}),p++}}}function nV(e,t,n,r){var i,s,l=t.optionalAngles,c=l===void 0?[0,45,90]:l,h=t.margin,p=t.recoverWhenFailed,v=p===void 0?!0:p,y=e.map(function(N){return N.getLocalEulerAngles()}),b=function(){return Vw(e,n,h).length<1},T=function(N){return e.forEach(function(z,H){var X=Array.isArray(N)?N[H]:N;r.rotate(z,+X)})};try{for(var M=(0,ae.XA)(c),R=M.next();!R.done;R=M.next()){var I=R.value;if(T(I),b())return}}catch(N){i={error:N}}finally{try{R&&!R.done&&(s=M.return)&&s.call(M)}finally{if(i)throw i.error}}v&&T(y)}function rV(e){var t=e.type,n=e.labelDirection;return t==="linear"&&c4(e)?n==="negative"?"bottom":"top":"middle"}function iV(e,t,n,r){var i=t.wordWrapWidth,s=i===void 0?50:i,l=t.maxLines,c=l===void 0?3:l,h=t.recoverWhenFailed,p=h===void 0?!0:h,v=t.margin,y=v===void 0?[0,0,0,0]:v,b=e.map(function(z){return z.attr("maxLines")||1}),T=Math.min.apply(Math,(0,ae.ev)([],(0,ae.CR)(b),!1)),M=function(){return Vw(e,n,y).length<1},R=rV(n),I=function(z){return e.forEach(function(H,X){var Y=Array.isArray(z)?z[X]:z;r.wrap(H,s,Y,R)})};if(!(T>c)){for(var N=T;N<=c;N++)if(I(N),M())return;p&&I(b)}}var oV=new Map([["hide",tV],["rotate",nV],["ellipsis",qj],["wrap",iV]]);function aV(e,t,n){return t.labelOverlap.length<1?!1:n==="hide"?!vr(e[0]):n==="rotate"?!e.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):n==="ellipsis"||n==="wrap"?e.filter(function(r){return r.querySelector("text")}).length>1:!0}function sV(e,t,n){var r=t.labelOverlap,i=r===void 0?[]:r;i.length&&i.forEach(function(s){var l=s.type,c=oV.get(l);aV(e,t,l)&&(c==null||c(e,s,t,n))})}function lV(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(r){return r==="positive"?-1:1};return e.reduce(function(r,i){return r*n(i)},1)}function w4(e){for(var t=e;t<0;)t+=360;return Math.round(t%360)}function gM(e,t){var n=(0,ae.CR)(e,2),r=n[0],i=n[1],s=(0,ae.CR)(t,2),l=s[0],c=s[1],h=(0,ae.CR)([r*l+i*c,r*c-i*l],2),p=h[0],v=h[1];return Math.atan2(v,p)}function uV(e){var t=(e+360)%180;return Fh(t,-90,90)||(t+=180),t}function cV(e,t,n){var r,i=n.labelAlign,s=(r=t.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(s)return t.getLocalEulerAngles();var l=0,c=M2(e.value,n),h=kw(e.value,n);return i==="horizontal"?0:(i==="perpendicular"?l=gM([1,0],c):l=gM([h[0]<0?-1:1,0],h),uV(pa(l)))}function T4(e,t,n){var r=n.type,i=n.labelAlign,s=M2(e,n),l=w4(t),c=w4(pa(gM([1,0],s))),h="center",p="middle";return r==="linear"?[90,270].includes(c)&&l===0?(h="center",p=s[1]===1?"top":"bottom"):!(c%180)&&[90,270].includes(l)?h="center":c===0?(Fh(l,0,90,!1,!0)||Fh(l,0,90)||Fh(l,270,360))&&(h="start"):c===90?Fh(l,0,90,!1,!0)?h="start":(Fh(l,90,180)||Fh(l,270,360))&&(h="end"):c===270?Fh(l,0,90,!1,!0)?h="end":(Fh(l,90,180)||Fh(l,270,360))&&(h="start"):c===180&&(l===90?h="start":(Fh(l,0,90)||Fh(l,270,360))&&(h="end")):i==="parallel"?Fh(c,0,180,!0)?p="top":p="bottom":i==="horizontal"?Fh(c,90,270,!1)?h="end":(Fh(c,270,360,!1)||Fh(c,0,90))&&(h="start"):i==="perpendicular"&&(Fh(c,90,270)?h="end":h="start"),{textAlign:h,textBaseline:p}}function fV(e,t,n){t.setLocalEulerAngles(e);var r=t.__data__.value,i=T4(r,e,n),s=t.querySelector(Zs.labelItem.class);s&&C4(s,i)}function A4(e,t,n){var r=n.showTick,i=n.tickLength,s=n.tickDirection,l=n.labelDirection,c=n.labelSpacing,h=t.indexOf(e),p=B0(c,[e,h,t]),v=(0,ae.CR)([M2(e.value,n),lV(l,s)],2),y=v[0],b=v[1],T=b===1?B0(r?i:0,[e,h,t]):0,M=(0,ae.CR)(wv(Pc(y,p+T),zw(e.value,n)),2),R=M[0],I=M[1];return{x:R,y:I}}function hV(e,t,n,r){var i=r.labelFormatter,s=_c(i)?function(){return L_(B0(i,[e,t,n,M2(e.value,r)]))}:function(){return L_(e.label||"")};return s}function C4(e,t){e.nodeName==="text"&&e.attr(t)}function O4(e){sV(this.node().childNodes,e,{hide:f,show:o,rotate:function(t,n){fV(+n,t,e)},ellipsis:function(t,n,r){t&&pM(t,n||1/0,r)},wrap:function(t,n,r){t&&Vj(t,n,r)},getTextShape:function(t){return t.querySelector("text")}})}function M4(e,t,n,r,i){var s=n.indexOf(t),l=zi(e).append(hV(t,s,n,i)).attr("className",Zs.labelItem.name).node(),c=(0,ae.CR)(F0(l4(r,[t,s,n])),2),h=c[0],p=c[1],v=p.transform,y=(0,ae._T)(p,["transform"]);_4(l,v);var b=cV(t,l,i);return l.getLocalEulerAngles()||l.setLocalEulerAngles(b),C4(l,(0,ae.pi)((0,ae.pi)({},T4(t.value,b,i)),h)),e.attr(y),l}function dV(e,t,n,r){var i=fM(t,n.labelFilter),s=Ua(n,"label");return e.selectAll(Zs.label.class).data(i,function(l,c){return c}).join(function(l){return l.append("g").attr("className",Zs.label.name).transition(function(c){M4(this,c,t,s,n);var h=A4(c,t,n),p=h.x,v=h.y;return this.style.transform="translate(".concat(p,", ").concat(v,")"),null}).call(function(){O4.call(e,n)})},function(l){return l.transition(function(c){var h=this.querySelector(Zs.labelItem.class),p=M4(this,c,t,s,n),v=Ae(h,p,r.update),y=A4(c,t,n),b=y.x,T=y.y,M=Fe(this,{transform:"translate(".concat(b,", ").concat(T,")")},r.update);return(0,ae.ev)((0,ae.ev)([],(0,ae.CR)(v),!1),[M],!1)}).call(function(c){var h=sl(c,"_transitions").flat().filter(b4);B(h,function(){O4.call(e,n)})})},function(l){return l.transition(function(){var c=this,h=Bw(this.childNodes[0],r.exit);return D(h,function(){return zi(c).remove()}),h})}).transitions()}function R4(e,t){return hM(e,t.tickDirection,t)}function pV(e,t){var n=(0,ae.CR)(e,2),r=n[0],i=n[1];return[[0,0],[r*t,i*t]]}function vV(e,t,n,r,i){var s=i.tickLength,l=(0,ae.CR)(pV(r,B0(s,[e,t,n])),2),c=(0,ae.CR)(l[0],2),h=c[0],p=c[1],v=(0,ae.CR)(l[1],2),y=v[0],b=v[1];return{x1:h,x2:y,y1:p,y2:b}}function mV(e,t,n,r,i){var s=i.tickFormatter,l=R4(t.value,i),c="line";return _c(s)&&(c=function(){return B0(s,[t,n,r,l])}),e.append(c).attr("className",Zs.tickItem.name)}function gV(e,t,n,r,i,s,l){var c=R4(e.value,s),h=vV(e,t,n,c,s),p=h.x1,v=h.x2,y=h.y1,b=h.y2,T=(0,ae.CR)(F0(l4(l,[e,t,n,c])),2),M=T[0],R=T[1];r.node().nodeName==="line"&&r.styles((0,ae.pi)({x1:p,x2:v,y1:y,y2:b},M)),i.attr(R),r.styles(M)}function P4(e,t,n,r,i,s){var l=mV(zi(this),e,t,n,r);gV(e,t,n,l,this,r,i);var c=(0,ae.CR)(zw(e.value,r),2),h=c[0],p=c[1];return Fe(this,{transform:"translate(".concat(h,", ").concat(p,")")},s)}function yV(e,t,n,r){var i=fM(t,n.tickFilter),s=Ua(n,"tick");return e.selectAll(Zs.tick.class).data(i,function(l){return l.id||l.label}).join(function(l){return l.append("g").attr("className",Zs.tick.name).transition(function(c,h){return P4.call(this,c,h,i,n,s,!1)})},function(l){return l.transition(function(c,h){return this.removeChildren(),P4.call(this,c,h,i,n,s,r.update)})},function(l){return l.transition(function(){var c=this,h=Bw(this.childNodes[0],r.exit);return D(h,function(){return c.remove()}),h})}).transitions()}var Gu=function(){function e(t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=n,this.width=r,this.height=i}return Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},e.prototype.isPointIn=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e}();function Mde(e){var t=e.getRenderBounds(),n=__read(t.min,2),r=n[0],i=n[1],s=__read(t.max,2),l=s[0],c=s[1],h=l-r,p=c-i;return new Gu(r,i,h,p)}var I4=as({text:"text"},"title");function Hw(e){return/\S+-\S+/g.test(e)?e.split("-").map(function(t){return t[0]}):e.length>2?[e[0]]:e.split("")}function _V(e,t){var n=e.attributes,r=n.position,i=n.spacing,s=n.inset,l=n.text,c=e.getBBox(),h=t.getBBox(),p=Hw(r),v=(0,ae.CR)(Bh(l?i:0),4),y=v[0],b=v[1],T=v[2],M=v[3],R=(0,ae.CR)(Bh(s),4),I=R[0],N=R[1],z=R[2],H=R[3],X=(0,ae.CR)([M+b,y+T],2),Y=X[0],ne=X[1],pe=(0,ae.CR)([H+N,I+z],2),ye=pe[0],De=pe[1];if(p[0]==="l")return new Gu(c.x,c.y,h.width+c.width+Y+ye,Math.max(h.height+De,c.height));if(p[0]==="t")return new Gu(c.x,c.y,Math.max(h.width+ye,c.width),h.height+c.height+ne+De);var Xe=(0,ae.CR)([t.attributes.width||h.width,t.attributes.height||h.height],2),Ke=Xe[0],mt=Xe[1];return new Gu(h.x,h.y,Ke+c.width+Y+ye,mt+c.height+ne+De)}function bV(e,t){var n=Object.entries(t).reduce(function(r,i){var s=(0,ae.CR)(i,2),l=s[0],c=s[1],h=e.node().attr(l);return h||(r[l]=c),r},{});e.styles(n)}function xV(e){var t,n,r,i,s=e,l=s.width,c=s.height,h=s.position,p=(0,ae.CR)([+l/2,+c/2],2),v=p[0],y=p[1],b=(0,ae.CR)([+v,+y,"center","middle"],4),T=b[0],M=b[1],R=b[2],I=b[3],N=Hw(h);return N.includes("l")&&(t=(0,ae.CR)([0,"start"],2),T=t[0],R=t[1]),N.includes("r")&&(n=(0,ae.CR)([+l,"end"],2),T=n[0],R=n[1]),N.includes("t")&&(r=(0,ae.CR)([0,"top"],2),M=r[0],I=r[1]),N.includes("b")&&(i=(0,ae.CR)([+c,"bottom"],2),M=i[0],I=i[1]),{x:T,y:M,textAlign:R,textBaseline:I}}var D4=function(e){(0,ae.ZT)(t,e);function t(n){return e.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return t.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,i=r.width,s=r.height,l=r.position,c=r.spacing,h=r.inset,p=n.querySelector(I4.text.class);if(!p)return new Gu(0,0,+i,+s);var v=p.getBBox(),y=v.width,b=v.height,T=(0,ae.CR)(Bh(c),4),M=T[0],R=T[1],I=T[2],N=T[3],z=(0,ae.CR)([0,0,+i,+s],4),H=z[0],X=z[1],Y=z[2],ne=z[3],pe=Hw(l);if(pe.includes("i"))return new Gu(H,X,Y,ne);pe.forEach(function(gt,Xt){var Rt,kt,wn,zn;gt==="t"&&(Rt=(0,ae.CR)(Xt===0?[b+I,+s-b-I]:[0,+s],2),X=Rt[0],ne=Rt[1]),gt==="r"&&(kt=(0,ae.CR)([+i-y-N],1),Y=kt[0]),gt==="b"&&(wn=(0,ae.CR)([+s-b-M],1),ne=wn[0]),gt==="l"&&(zn=(0,ae.CR)(Xt===0?[y+R,+i-y-R]:[0,+i],2),H=zn[0],Y=zn[1])});var ye=(0,ae.CR)(Bh(h),4),De=ye[0],Xe=ye[1],Ke=ye[2],mt=ye[3],Qe=(0,ae.CR)([mt+Xe,De+Ke],2),ut=Qe[0],ct=Qe[1];return new Gu(H+mt,X+De,Y-ut,ne-ct)},t.prototype.getBBox=function(){return this.title?this.title.getBBox():new Gu(0,0,0,0)},t.prototype.render=function(n,r){var i=this,s=n.width,l=n.height,c=n.position,h=n.spacing,p=(0,ae._T)(n,["width","height","position","spacing"]),v=(0,ae.CR)(F0(p),1),y=v[0],b=xV(n),T=b.x,M=b.y,R=b.textAlign,I=b.textBaseline;po(!!p.text,zi(r),function(N){i.title=N.maybeAppendByClassName(I4.text,"text").styles(y).call(bV,{x:T,y:M,textAlign:R,textBaseline:I}).node()})},t}(ri);function EV(e,t,n){var r=n.titlePosition,i=r===void 0?"lb":r,s=n.titleSpacing,l=Hw(i),c=e.node().getLocalBounds(),h=(0,ae.CR)(c.min,2),p=h[0],v=h[1],y=(0,ae.CR)(c.halfExtents,2),b=y[0],T=y[1],M=(0,ae.CR)(t.node().getLocalBounds().halfExtents,2),R=M[0],I=M[1],N=(0,ae.CR)([p+b,v+T],2),z=N[0],H=N[1],X=(0,ae.CR)(Bh(s),4),Y=X[0],ne=X[1],pe=X[2],ye=X[3];if(["start","end"].includes(i)&&n.type==="linear"){var De=n.startPos,Xe=n.endPos,Ke=(0,ae.CR)(i==="start"?[De,Xe]:[Xe,De],2),mt=Ke[0],Qe=Ke[1],ut=Fw([-Qe[0]+mt[0],-Qe[1]+mt[1]]),ct=(0,ae.CR)(Pc(ut,Y),2),gt=ct[0],Xt=ct[1];return{x:mt[0]+gt,y:mt[1]+Xt}}return l.includes("t")&&(H-=T+I+Y),l.includes("r")&&(z+=b+R+ne),l.includes("l")&&(z-=b+R+ye),l.includes("b")&&(H+=T+I+pe),{x:z,y:H}}function SV(e,t,n){var r=e.getGeometryBounds().halfExtents,i=r[1]*2;if(t==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function L4(e,t,n,r,i){var s=Ua(r,"title"),l=(0,ae.CR)(F0(s),2),c=l[0],h=l[1],p=h.transform,v=h.transformOrigin,y=(0,ae._T)(h,["transform","transformOrigin"]);t.styles(y);var b=p||SV(e.node(),c.direction,c.position);e.styles((0,ae.pi)((0,ae.pi)({},c),{transformOrigin:v})),_4(e.node(),b);var T=EV(zi(n._offscreen||n.querySelector(Zs.mainGroup.class)),t,r),M=T.x,R=T.y,I=Fe(t.node(),{transform:"translate(".concat(M,", ").concat(R,")")},i);return I}function wV(e,t,n,r){var i=n.titleText;return e.selectAll(Zs.title.class).data([{title:i}].filter(function(s){return!!s.title}),function(s,l){return s.title}).join(function(s){return s.append(function(){return L_(i)}).attr("className",Zs.title.name).transition(function(){return L4(zi(this),e,t,n,r.enter)})},function(s){return s.transition(function(){return L4(zi(this),e,t,n,r.update)})},function(s){return s.remove()}).transitions()}function N4(e,t,n,r){var i=e.showLine,s=e.showTick,l=e.showLabel,c=t.maybeAppendByClassName(Zs.lineGroup,"g"),h=po(i,c,function(T){return Lj(T,e,r)})||[],p=t.maybeAppendByClassName(Zs.tickGroup,"g"),v=po(s,p,function(T){return yV(T,n,e,r)})||[],y=t.maybeAppendByClassName(Zs.labelGroup,"g"),b=po(l,y,function(T){return dV(T,n,e,r)})||[];return(0,ae.ev)((0,ae.ev)((0,ae.ev)([],(0,ae.CR)(h),!1),(0,ae.CR)(v),!1),(0,ae.CR)(b),!1).filter(function(T){return!!T})}var yM=function(e){(0,ae.ZT)(t,e);function t(n){return e.call(this,n,$f)||this}return t.prototype.render=function(n,r,i){var s=this,l=n.titleText,c=n.data,h=n.animate,p=n.showTitle,v=n.showGrid,y=n.dataThreshold,b=n.truncRange,T=ho(c,y).filter(function(Y){var ne=Y.value;return!(b&&ne>b[0]&&ne<b[1])}),M=C(i===void 0?h:i),R=zi(r).maybeAppendByClassName(Zs.gridGroup,"g"),I=po(v,R,function(Y){return kj(Y,T,n,M)})||[],N=zi(r).maybeAppendByClassName(Zs.mainGroup,"g");l&&(!this.initialized&&M.enter||this.initialized&&M.update)&&N4(n,zi(this.offscreenGroup),T,C(!1));var z=N4(n,zi(N.node()),T,M),H=zi(r).maybeAppendByClassName(Zs.titleGroup,"g"),X=po(p,H,function(Y){return wV(Y,s,n,M)})||[];return(0,ae.ev)((0,ae.ev)((0,ae.ev)([],(0,ae.CR)(I),!1),(0,ae.CR)(z),!1),(0,ae.CR)(X),!1).flat().filter(function(Y){return!!Y})},t}(ri),TV={}.toString,AV=function(e,t){return TV.call(e)==="[object "+t+"]"},I2=AV,_M=function(e){return I2(e,"Function")},F4=function(e){return Array.isArray?Array.isArray(e):I2(e,"Array")},CV=function(e){var t=typeof e;return e!==null&&t==="object"||t==="function"};function OV(e,t){if(e){var n;if(F4(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(CV(e)){for(var s in e)if(e.hasOwnProperty(s)&&(n=t(e[s],s),n===!1))break}}}var B4=OV,Rde=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return B4(e,function(n,r){_M(e)&&r==="prototype"||t.push(r)}),t},Pde=null;function Ide(e,t){var n=keys(t),r=n.length;if(isNil(e))return!r;for(var i=0;i<r;i+=1){var s=n[i];if(t[s]!==e[s]||!(s in e))return!1}return!0}var Dde=null,MV=function(e){return typeof e=="object"&&e!==null},RV=MV,PV=function(e){if(!RV(e)||!I2(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},k4=PV;function Lde(e,t){if(!isArray(e))return null;var n;if(isFunction(t)&&(n=t),isPlainObject(t)&&(n=function(i){return isMatch(i,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var Nde=null,Fde=function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r],s=i[t];if(!isNil(s)){isArray(s)?n=s[0]:n=s;break}}return n},Bde=null,kde=function(e){if(!isArray(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t},zde=null,IV=function(e,t){if(t===void 0&&(t=[]),!isArray(e))t.push(e);else for(var n=0;n<e.length;n+=1)IV(e[n],t);return t},Ude=null,jde=function(e){if(isArray(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])},Vde=function(e){if(isArray(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},Hde=function(e){var t=e.filter(function(l){return!isNaN(l)});if(!t.length)return{min:0,max:0};if(isArray(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=getMax(t),s=getMin(t);return{min:s,max:i}},Gde=null,z4=Array.prototype,DV=z4.splice,LV=z4.indexOf,Wde=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],s=-1;(s=LV.call(e,i))>-1;)DV.call(e,s,1);return e},Zde=null,NV=Array.prototype.splice,Xde=function(t,n){if(!isArrayLike(t))return[];for(var r=t?n.length:0,i=r-1;r--;){var s=void 0,l=n[r];(r===i||l!==s)&&(s=l,NV.call(t,l,1))}return t},Yde=null,$de=function(e,t,n){if(!isArray(e)&&!isPlainObject(e))return e;var r=n;return each(e,function(i,s){r=t(r,i,s)}),r},qde=null,Kde=function(e,t){var n=[];if(!isArrayLike(e))return n;for(var r=-1,i=[],s=e.length;++r<s;){var l=e[r];t(l,r,e)&&(n.push(l),i.push(r))}return pullAt(e,i),n},Qde=null,FV=function(e){return I2(e,"String")};function Jde(e,t){var n;if(isFunction(t))n=function(i,s){return t(i)-t(s)};else{var r=[];isString(t)?r.push(t):isArray(t)&&(r=t),n=function(i,s){for(var l=0;l<r.length;l+=1){var c=r[l];if(i[c]>s[c])return 1;if(i[c]<s[c])return-1}return 0}}return e.sort(n),e}var epe=null,tpe=function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var s=e[i],l=s[t];if(!isNil(l)){isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var h=l[c];r[h]||(n.push(h),r[h]=!0)}}}return n};function npe(e,t){return isArray(e)||isString(e)?e[0]===t:!1}var rpe=null;function ipe(e,t){return isArray(e)||isString(e)?e[e.length-1]===t:!1}var ope=null,BV=Object.prototype.hasOwnProperty;function ape(e,t){if(!t||!isArray(e))return{};for(var n={},r=isFunction(t)?t:function(c){return c[t]},i,s=0;s<e.length;s++){var l=e[s];i=r(l),BV.call(n,i)?n[i].push(l):n[i]=[l]}return n}var spe=null;function lpe(e,t){if(!t)return{0:e};if(!isFunction(t)){var n=isArray(t)?t:t.replace(/\s+/g,"").split("*");t=function(r){for(var i="_",s=0,l=n.length;s<l;s++)i+=r[n[s]]&&r[n[s]].toString();return i}}return groupBy(e,t)}var upe=function(e,t){if(!t)return[e];var n=groupToMap(e,t),r=[];for(var i in n)r.push(n[i]);return r},U4={};function cpe(e){var t=U4[e];if(!t){for(var n=e.toString(16),r=n.length;r<6;r++)n="0"+n;t="#"+n,U4[e]=t}return t}var fpe=null;function hpe(e){var t=0,n=0,r=0,i=0;return isArray(e)?e.length===1?t=n=r=i=e[0]:e.length===2?(t=r=e[0],n=i=e[1]):e.length===3?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}var dpe=null,kV=function(e){return I2(e,"Number")},pb=kV,ppe=function(e){return isNumber(e)&&e%1!==0},vpe=null,mpe=function(e){return isNumber(e)&&e%2===0},gpe=null,ype=Number.isInteger?Number.isInteger:function(e){return pb(e)&&e%1===0},_pe=null,bpe=function(e){return isNumber(e)&&e<0},xpe=null,Epe=function(e){return isNumber(e)&&e%2!==0},Spe=null,wpe=function(e){return isNumber(e)&&e>0},Tpe=null,Ape=function(e,t){if(isArray(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var s=e[i],l=isFunction(t)?t(s):s[t];l>r&&(n=s,r=l)}return n}},Cpe=function(e,t){if(isArray(e)){for(var n,r=1/0,i=0;i<e.length;i++){var s=e[i],l=isFunction(t)?t(s):s[t];l<r&&(n=s,r=l)}return n}},zV=180/Math.PI,Ope=function(e){return zV*e},Mpe=null,UV=Math.PI/180,Rpe=function(e){return UV*e},Ppe=null,Ipe=null,jV=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return B4(e,function(n,r){_M(e)&&r==="prototype"||t.push(n)}),t},VV=jV,Dpe=function(e,t){return contains(values(e),t)},HV={}.toString,Lpe=function(e){return HV.call(e).replace(/^\[object /,"").replace(/]$/,"")},Npe=null,Fpe=function(e){return isType(e,"Arguments")},Bpe=null,kpe=function(e){return isType(e,"Boolean")},zpe=null,Upe=function(e){return isType(e,"Date")},jpe=null,Vpe=function(e){return isType(e,"Error")},Hpe=null;function Gpe(e){return isNumber(e)&&isFinite(e)}var GV=function(e){return e===null},WV=GV,ZV=Object.prototype,Wpe=function(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ZV;return e===n},Zpe=null,Xpe=function(e){return isType(e,"RegExp")},Ype=null,XV=function(e){return e===void 0},YV=XV,$pe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],r=1;r<e.length;r++){var i=e[r];isFunction(i)&&(i=i.prototype),mix(n.prototype,i)}},qpe=null,j4=function(e){if(typeof e!="object"||e===null)return e;var t;if(isArray(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]=="object"&&e[n]!=null?t[n]=j4(e[n]):t[n]=e[n]}else{t={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?t[i]=j4(e[i]):t[i]=e[i]}return t},Kpe=null,$V=function(e,t){if(!_M(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=t?t.apply(this,r):r[0],l=n.cache;if(l.has(s))return l.get(s);var c=e.apply(this,r);return l.set(s,c),c};return n.cache=new Map,n},qV=5;function V4(e,t,n,r){n=n||0,r=r||qV;for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];s!==null&&k4(s)?(k4(e[i])||(e[i]={}),n<r?V4(e[i],s,n+1,r):e[i]=t[i]):F4(s)?(e[i]=[],e[i]=e[i].concat(s)):s!==void 0&&(e[i]=s)}}var KV=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)V4(e,t[r]);return e},H4=KV,Qpe=function(e,t,n,r){isFunction(t)||(n=t,t=e,e=function(){});var i=Object.create?function(l,c){return Object.create(l,{constructor:{value:c}})}:function(l,c){function h(){}h.prototype=l;var p=new h;return p.constructor=c,p},s=i(t.prototype,e);return e.prototype=mix(s,e.prototype),e.superclass=i(t.prototype,t),mix(s,n),mix(e,r),e},Jpe=null,QV=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},G4=QV,JV=function(e,t){if(!G4(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},W4=JV,eH=Object.prototype.hasOwnProperty;function e0e(e){if(isNil(e))return!0;if(isArrayLike(e))return!e.length;var t=getType(e);if(t==="Map"||t==="Set")return!e.size;if(isPrototype(e))return!Object.keys(e).length;for(var n in e)if(eH.call(e,n))return!1;return!0}var t0e=null,Z4=function(e,t){if(e===t)return!0;if(!e||!t||isString(e)||isString(t))return!1;if(isArrayLike(e)||isArrayLike(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=Z4(e[r],t[r]),!!n);r++);return n}if(isObjectLike(e)||isObjectLike(t)){var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(var n=!0,r=0;r<i.length&&(n=Z4(e[i[r]],t[i[r]]),!!n);r++);return n}return!1},n0e=null,r0e=function(e,t,n){return isFunction(n)?!!n(e,t):isEqual(e,t)},i0e=function(e,t,n){for(var r=0,i=isString(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return e===void 0||r<i.length?n:e},o0e=function(e,t,n){var r=e,i=isString(t)?t.split("."):t;return i.forEach(function(s,l){l<i.length-1?(isObject(r[s])||(r[s]=isNumber(i[l+1])?[]:{}),r=r[s]):r[s]=n}),e},tH=Object.prototype.hasOwnProperty,a0e=function(e,t){if(e===null||!isPlainObject(e))return{};var n={};return each(t,function(r){tH.call(e,r)&&(n[r]=e[r])}),n},s0e=function(e,t){return reduce(e,function(n,r,i){return t.includes(i)||(n[i]=r),n},{})},Gw={},l0e=function(e){return e=e||"g",Gw[e]?Gw[e]+=1:Gw[e]=1,e+Gw[e]},N_=function(e){return e},nH=function(e){return e==null},rH=nH;function X4(e){return rH(e)?0:G4(e)?e.length:Object.keys(e).length}var Ww,u0e=$V(function(e,t){t===void 0&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,s=t.fontStyle,l=t.fontVariant;return Ww||(Ww=document.createElement("canvas").getContext("2d")),Ww.font=[s,l,i,n+"px",r].join(" "),Ww.measureText(FV(e)?e:"").width},function(e,t){return t===void 0&&(t={}),(0,ae.pr)([e],VV(t)).join("")}),c0e=function(e,t,n,r){r===void 0&&(r="...");var i=16,s=measureTextWidth(r,n),l=isString(e)?e:toString(e),c=t,h=[],p,v;if(measureTextWidth(e,n)<=t)return e;for(;p=l.substr(0,i),v=measureTextWidth(p,n),!(v+s>c&&v>c);)if(h.push(p),c-=v,l=l.substr(i),!l)return h.join("");for(;p=l.substr(0,1),v=measureTextWidth(p,n),!(v+s>c);)if(h.push(p),c-=v,l=l.substr(1),!l)return h.join("");return""+h.join("")+r},f0e=function(){function e(){this.map={}}return e.prototype.has=function(t){return this.map[t]!==void 0},e.prototype.get=function(t,n){var r=this.map[t];return r===void 0?n:r},e.prototype.set=function(t,n){this.map[t]=n},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(t){delete this.map[t]},e.prototype.size=function(){return Object.keys(this.map).length},e}(),h0e=null;class D2{constructor(t){this.options=H4({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=H4({},this.options,t),this.rescale(t)}rescale(t){}}function Zw(e,t){return t-e?n=>(n-e)/(t-e):n=>.5}function vb(e,...t){return t.reduce((n,r)=>i=>n(r(i)),e)}function bM(e,t,n,r,i){let s=n||0,l=r||e.length;const c=i||(h=>h);for(;s<l;){const h=Math.floor((s+l)/2);c(e[h])>t?l=h:s=h+1}return s}var iH=L(19818),oH=L.n(iH);function xM(e,t,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function aH(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100,i=e[3];if(n===0)return[r*255,r*255,r*255,i];const s=r<.5?r*(1+n):r+n-r*n,l=2*r-s,c=xM(l,s,t+1/3),h=xM(l,s,t),p=xM(l,s,t-1/3);return[c*255,h*255,p*255,i]}function Y4(e){const t=oH().get(e);if(!t)return null;const{model:n,value:r}=t;return n==="rgb"?r:n==="hsl"?aH(r):null}const mb=(e,t)=>n=>e*(1-n)+t*n,sH=(e,t)=>{const n=Y4(e),r=Y4(t);return n===null||r===null?n?()=>e:()=>t:i=>{const s=new Array(4);for(let v=0;v<4;v+=1){const y=n[v],b=r[v];s[v]=y*(1-i)+b*i}const[l,c,h,p]=s;return`rgba(${Math.round(l)}, ${Math.round(c)}, ${Math.round(h)}, ${p})`}},L2=(e,t)=>typeof e=="number"&&typeof t=="number"?mb(e,t):typeof e=="string"&&typeof t=="string"?sH(e,t):()=>e,lH=(e,t)=>{const n=mb(e,t);return r=>Math.round(n(r))};function Xw(e){return!YV(e)&&!WV(e)&&!Number.isNaN(e)}const EM=Math.sqrt(50),SM=Math.sqrt(10),wM=Math.sqrt(2);function Yw(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/_f(10,i);return i>=0?(s>=EM?10:s>=SM?5:s>=wM?2:1)*_f(10,i):-_f(10,-i)/(s>=EM?10:s>=SM?5:s>=wM?2:1)}function $4(e,t,n){const r=Math.abs(t-e)/Math.max(0,n);let i=_f(10,Math.floor(Math.log(r)/Math.LN10));const s=r/i;return s>=EM?i*=10:s>=SM?i*=5:s>=wM&&(i*=2),t<e?-i:i}const q4=(e,t,n=5)=>{const r=[e,t];let i=0,s=r.length-1,l=r[i],c=r[s],h;return c<l&&([l,c]=[c,l],[i,s]=[s,i]),h=Yw(l,c,n),h>0?(l=Math.floor(l/h)*h,c=Math.ceil(c/h)*h,h=Yw(l,c,n)):h<0&&(l=Math.ceil(l*h)/h,c=Math.floor(c*h)/h,h=Yw(l,c,n)),h>0?(r[i]=Math.floor(l/h)*h,r[s]=Math.ceil(c/h)*h):h<0&&(r[i]=Math.ceil(l*h)/h,r[s]=Math.floor(c*h)/h),r};function uH(e,t){const n=t<e?t:e,r=e>t?e:t;return i=>Math.min(Math.max(n,i),r)}const cH=(e,t,n)=>{const[r,i]=e,[s,l]=t;let c,h;return r<i?(c=Zw(r,i),h=n(s,l)):(c=Zw(i,r),h=n(l,s)),vb(h,c)},fH=(e,t,n)=>{const r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=e[0]>e[r],c=l?[...e].reverse():e,h=l?[...t].reverse():t;for(let p=0;p<r;p+=1)i[p]=Zw(c[p],c[p+1]),s[p]=n(h[p],h[p+1]);return p=>{const v=bM(e,p,1,r)-1,y=i[v],b=s[v];return vb(b,y)(p)}},K4=(e,t,n,r)=>(Math.min(e.length,t.length)>2?fH:cH)(e,t,r?lH:n);class $w extends D2{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:mb,tickCount:5}}map(t){return Xw(t)?this.output(t):this.options.unknown}invert(t){return Xw(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,n,r,...i)}getTicks(){const{tickMethod:t}=this.options,[n,r,i,...s]=this.getTickMethodOptions();return t(n,r,i,...s)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}chooseNice(){return q4}rescale(){this.nice();const[t,n]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,n,this.chooseClamp(n))}chooseClamp(t){const{clamp:n,range:r}=this.options,i=this.options.domain.map(t),s=Math.min(i.length,r.length);return n?uH(i[0],i[s-1]):N_}composeOutput(t,n){const{domain:r,range:i,round:s,interpolate:l}=this.options,c=K4(r.map(t),i,l,s);this.output=vb(c,n,t)}composeInput(t,n,r){const{domain:i,range:s}=this.options,l=K4(s,i.map(t),mb);this.input=vb(n,r,l)}}const F_=(e,t,n)=>{let r,i,s=e,l=t;if(s===l&&n>0)return[s];let c=Yw(s,l,n);if(c===0||!Number.isFinite(c))return[];if(c>0){s=Math.ceil(s/c),l=Math.floor(l/c),i=new Array(r=Math.ceil(l-s+1));for(let h=0;h<r;h+=1)i[h]=(s+h)*c}else{c=-c,s=Math.ceil(s*c),l=Math.floor(l*c),i=new Array(r=Math.ceil(l-s+1));for(let h=0;h<r;h+=1)i[h]=(s+h)/c}return i};class hd extends $w{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:L2,tickMethod:F_,tickCount:5}}chooseTransforms(){return[N_,N_]}clone(){return new hd(this.options)}}function hH(e,t){if(e){var n;if(Ho(e))for(var r=0,i=e.length;r<i&&(n=t(e[r],r),n!==!1);r++);else if(al(e)){for(var s in e)if(e.hasOwnProperty(s)&&(n=t(e[s],s),n===!1))break}}}var TM=hH,dH=function(e,t,n){if(!Ho(e)&&!Ev(e))return e;var r=n;return TM(e,function(i,s){r=t(r,i,s)}),r},Q4=dH,B_=function(e,t){return Q4(e,function(n,r,i){return t.includes(i)||(n[i]=r),n},{})};function ig(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}function J4(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,s=0;s<e.length;s++){var l=e[s],c=l.x,h=l.y,p=l.width,v=l.height,y=(0,ae.CR)([c+p,h+v],2),b=y[0],T=y[1];c<t&&(t=c),h<n&&(n=h),b>r&&(r=b),T>i&&(i=T)}return new Gu(t,n,r-t,i-n)}var pH=function(e,t,n){var r=e.width,i=e.height,s=n.flexDirection,l=s===void 0?"row":s,c=n.flexWrap,h=c===void 0?"nowrap":c,p=n.justifyContent,v=p===void 0?"flex-start":p,y=n.alignContent,b=y===void 0?"flex-start":y,T=n.alignItems,M=T===void 0?"flex-start":T,R=l==="row",I=l==="row"||l==="column",N=R?I?[1,0]:[-1,0]:I?[0,1]:[0,-1],z=(0,ae.CR)([0,0],2),H=z[0],X=z[1],Y=t.map(function(Qe){var ut,ct=Qe.width,gt=Qe.height,Xt=(0,ae.CR)([H,X],2),Rt=Xt[0],kt=Xt[1];return ut=(0,ae.CR)([H+ct*N[0],X+gt*N[1]],2),H=ut[0],X=ut[1],new Gu(Rt,kt,ct,gt)}),ne=J4(Y),pe={"flex-start":0,"flex-end":R?r-ne.width:i-ne.height,center:R?(r-ne.width)/2:(i-ne.height)/2},ye=Y.map(function(Qe){var ut=Qe.x,ct=Qe.y,gt=Gu.fromRect(Qe);return gt.x=R?ut+pe[v]:ut,gt.y=R?ct:ct+pe[v],gt}),De=J4(ye),Xe=function(Qe){var ut=(0,ae.CR)(R?["height",i]:["width",r],2),ct=ut[0],gt=ut[1];switch(M){case"flex-start":return 0;case"flex-end":return gt-Qe[ct];case"center":return gt/2-Qe[ct]/2;default:return 0}},Ke=ye.map(function(Qe){var ut=Qe.x,ct=Qe.y,gt=Gu.fromRect(Qe);return gt.x=R?ut:ut+Xe(gt),gt.y=R?ct+Xe(gt):ct,gt}),mt=Ke.map(function(Qe){var ut,ct,gt=Gu.fromRect(Qe);return gt.x+=(ut=e.x)!==null&&ut!==void 0?ut:0,gt.y+=(ct=e.y)!==null&&ct!==void 0?ct:0,gt});return mt},vH=function(e,t,n){return[]},mH=function(e,t,n){if(t.length===0)return[];var r={flex:pH,grid:vH},i=n.display in r?r[n.display]:null;return(i==null?void 0:i.call(null,e,t,n))||[]},gH=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this,n)||this;r.layoutEvents=[ka.BOUNDS_CHANGED,ka.INSERTED,ka.REMOVED],r.$margin=Bh(0),r.$padding=Bh(0);var i=n.style||{},s=i.margin,l=s===void 0?0:s,c=i.padding,h=c===void 0?0:c;return r.margin=l,r.padding=h,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(t.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=Bh(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=Bh(n)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=r===void 0?0:r,s=n.y,l=s===void 0?0:s,c=n.width,h=n.height,p=(0,ae.CR)(this.$margin,4),v=p[0],y=p[1],b=p[2],T=p[3];return new Gu(i-T,l-v,c+T+y,h+v+b)},t.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,e.prototype.appendChild.call(this,n,r),n},t.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,s=(0,ae.CR)(this.$padding,4),l=s[0],c=s[1],h=s[2],p=s[3],v=(0,ae.CR)(this.$margin,4),y=v[0],b=v[3];return new Gu(p+b,l+y,r-p-c,i-l-h)},t.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(l){return!l.isConnected}))try{var n=this.attributes,r=n.x,i=n.y;this.style.transform="translate(".concat(r,", ").concat(i,")");var s=mH(this.getAvailableSpace(),this.children.map(function(l){return l.getBBox()}),this.attributes);this.children.forEach(function(l,c){var h=s[c],p=h.x,v=h.y;l.style.transform="translate(".concat(p,", ").concat(v,")")})}catch(l){}},t.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(i){i.target.isMutationObserved=!0,n.layout()})})},t.prototype.attributeChangedCallback=function(n,r,i){n==="margin"?this.margin=i:n==="padding"&&(this.padding=i),this.layout()},t}(yc),yH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function _H(e){return class extends Gd{constructor(t){super(t),this.descriptor=e}connectedCallback(){var t,n;(n=(t=this.descriptor).render)===null||n===void 0||n.call(t,this.attributes,this)}update(t={}){var n,r;this.attr(hi({},this.attributes,t)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function eD(e,t,n){return e.querySelector(t)?Ra(e).select(t):Ra(e).append(n)}function qw(e){return Array.isArray(e)?e.join(", "):`${e||""}`}function tD(e,t){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:i,alignItems:s}=n;const l={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return e in l&&([r,i,s]=l[e]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:s},t)}class nD extends gH{get child(){var t;return(t=this.children)===null||t===void 0?void 0:t[0]}update(t){var n;this.attr(t);const{subOptions:r}=t;(n=this.child)===null||n===void 0||n.update(r)}}class bH extends nD{update(t){var n;const{subOptions:r}=t;this.attr(t),(n=this.child)===null||n===void 0||n.update(r)}}function sm(e,t){var n;return(n=e.filter(r=>r.getOptions().name===t))===null||n===void 0?void 0:n[0]}function xH(e){return e==="horizontal"||e===0}function EH(e){return e==="vertical"||e===-Math.PI/2}function rD(e,t,n){const{bbox:r}=e,{position:i="top",size:s,length:l}=t,c=["top","bottom","center"].includes(i),[h,p]=c?[r.height,r.width]:[r.width,r.height],{defaultSize:v,defaultLength:y}=n.props,b=s||v||h,T=l||y||p,M=c?"horizontal":"vertical",[R,I]=c?[T,b]:[b,T];return{orientation:M,width:R,height:I,size:b,length:T}}function SH(e){return e.find(t=>t.getOptions().domain.length>0).getOptions().domain}function Kw(e){const t=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=e,r=yH(e,["style"]),i={};return Object.entries(r).forEach(([s,l])=>{t.includes(s)?i[`show${n0(s)}`]=l:i[s]=l}),Object.assign(Object.assign({},i),n)}var iD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function oD(e,t){const{eulerAngles:n,origin:r}=t;r&&e.setOrigin(r),n&&e.rotate(n[0],n[1],n[2])}function aD(e){const{innerWidth:t,innerHeight:n,depth:r}=e.getOptions();return[t,n,r]}function wH(e,t){const{width:n,height:r}=t.getOptions();return i=>{if(!T2(t))return i;const s=e==="bottom"?[i,1]:[0,i],l=t.map(s);if(e==="bottom"){const c=l[0];return new hd({domain:[0,n],range:[0,1]}).map(c)}else if(e==="left"){const c=l[1];return new hd({domain:[0,r],range:[0,1]}).map(c)}return i}}function TH(e,t,n){if(e.getTicks)return e.getTicks();if(!n)return t;const[r,i]=ig(t,l=>+l),{tickCount:s}=e.getOptions();return n(r,i,s)}function AH(e,t){if(nu(t))return T=>T;const n=t.getOptions(),{innerWidth:r,innerHeight:i,insetTop:s,insetBottom:l,insetLeft:c,insetRight:h}=n,[p,v,y]=e==="left"||e==="right"?[s,l,i]:[c,h,r],b=new hd({domain:[0,1],range:[p/y,1-v/y]});return T=>b.map(T)}function sD(e,t,n,r,i,s,l,c){var h;(n!==void 0||s!==void 0)&&e.update(Object.assign(Object.assign({},n&&{tickCount:n}),s&&{tickMethod:s}));const p=TH(e,t,s),v=i?p.filter(i):p,y=N=>N instanceof Date?String(N):typeof N=="object"&&N?N:String(N),b=r||((h=e.getFormatter)===null||h===void 0?void 0:h.call(e))||y,T=AH(l,c),M=wH(l,c),R=N=>["top","bottom","center","outer"].includes(N),I=N=>["left","right"].includes(N);return nu(c)||tu(c)?v.map((N,z,H)=>{var X,Y;const ne=((X=e.getBandWidth)===null||X===void 0?void 0:X.call(e,N))/2||0,pe=T(e.map(N)+ne);return{value:P_(c)&&l==="center"||tu(c)&&((Y=e.getTicks)===null||Y===void 0?void 0:Y.call(e))&&R(l)||tu(c)&&I(l)?1-pe:pe,label:y(b(ey(N),z,H)),id:String(z)}}):v.map((N,z,H)=>{var X;const Y=((X=e.getBandWidth)===null||X===void 0?void 0:X.call(e,N))/2||0,ne=M(T(e.map(N)+Y));return{value:I(l)?1-ne:ne,label:y(b(ey(N),z,H)),id:String(z)}})}function CH(e,t,n="xy"){const[r,i,s]=aD(t);return n==="xy"?e.includes("bottom")||e.includes("top")?i:r:n==="xz"?e.includes("bottom")||e.includes("top")?s:r:e.includes("bottom")||e.includes("top")?i:s}function OH(e=[],t){if(e.length>0)return e;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:s}=t,l=[],c=(h,p)=>{p&&l.push(Object.assign(Object.assign({},h),p))};return c({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),c({type:"ellipsis",minLength:20},i),c({type:"hide"},r),c({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},s),l}function MH(e,t,n,r,i){const{x:s,y:l,width:c,height:h}=t,p=[s+c/2,l+h/2],v=Math.min(c,h)/2,[y,b]=C2(i),[T,M]=aD(i),R=Math.min(T,M)/2,I={center:p,radius:v,startAngle:y,endAngle:b,gridLength:(r-n)*R};if(e==="inner"){const{insetLeft:N,insetTop:z}=i.getOptions();return Object.assign(Object.assign({},I),{center:[p[0]-N,p[1]-z],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},I),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function RH(e,t,n){return A2(t)||I_(t)?!1:e===void 0?!!n.getTicks:e}function PH(e){const{depth:t}=e.getOptions();return t?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function IH(e,t,n,r,i){const{x:s,y:l,width:c,height:h}=n;if(e==="bottom")return{startPos:[s,l],endPos:[s+c,l]};if(e==="left")return{startPos:[s+c,l+h],endPos:[s+c,l]};if(e==="right")return{startPos:[s,l+h],endPos:[s,l]};if(e==="top")return{startPos:[s,l+h],endPos:[s+c,l+h]};if(e==="center"){if(t==="vertical")return{startPos:[s,l],endPos:[s,l+h]};if(t==="horizontal")return{startPos:[s,l],endPos:[s+c,l]};if(typeof t=="number"){const[p,v]=r.getCenter(),[y,b]=am(r),[T,M]=C2(r),R=Math.min(c,h)/2,{insetLeft:I,insetTop:N}=r.getOptions(),z=y*R,H=b*R,[X,Y]=[p+s-I,v+l-N],[ne,pe]=[Math.cos(t),Math.sin(t)],ye=[X+H*ne,Y+H*pe],De=[X+z*ne,Y+z*pe],Xe=()=>{const{domain:mt}=i.getOptions();return mt.length},Ke=nu(r)&&i?Xe():3;return{startPos:ye,endPos:De,gridClosed:Math.abs(M-T-360)<1e-6,gridCenter:[X,Y],gridControlAngles:new Array(Ke).fill(0).map((mt,Qe,ut)=>(M-T)/Ke*Qe)}}}return{}}const DH=e=>{const{order:t,size:n,position:r,orientation:i,labelFormatter:s,tickFilter:l,tickCount:c,tickMethod:h,important:p={},style:v={},indexBBox:y,title:b,grid:T=!1}=e,M=iD(e,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[R],value:I,coordinate:N,theme:z})=>{const{bbox:H}=I,{domain:X}=R.getOptions(),Y=sD(R,X,c,s,l,h,r,N),ne=y?Y.map((Qe,ut)=>{const ct=y.get(ut);return!ct||ct[0]!==Qe.label?Qe:Object.assign(Object.assign({},Qe),{bbox:ct[1]})}):Y,[pe,ye]=am(N),De=MH(r,H,pe,ye,N),{axis:Xe,axisArc:Ke={}}=z,mt=Kw(hi({},Xe,Ke,De,Object.assign(Object.assign({type:"arc",data:ne,titleText:qw(b),grid:T},M),p)));return new yM({style:B_(mt,["transform"])})}};function LH(e,t,n,r,i,s){const l=n.axis,c=["top","right","bottom","left"].includes(i)?n[`axis${qg(i)}`]:n.axisLinear,h=e.getOptions().name,p=n[`axis${n0(h)}`]||{};return Object.assign({},l,c,p)}function NH(e,t,n,r,i,s){const l=LH(e,t,n,r,i,s);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},l),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:EH(s)?10:0,tick:r==="center"?!1:void 0}):l}const FH=e=>{const{direction:t="left",important:n={},labelFormatter:r,order:i,orientation:s,actualPosition:l,position:c,size:h,style:p={},title:v,tickCount:y,tickFilter:b,tickMethod:T,transform:M,indexBBox:R}=e,I=iD(e,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:N,value:z,coordinate:H,theme:X})=>{const{bbox:Y}=z,[ne]=N,{domain:pe,xScale:ye}=ne.getOptions(),De=NH(ne,H,X,t,c,s),Xe=Object.assign(Object.assign(Object.assign({},De),p),I),Ke=CH(l||c,H,e.plane),mt=IH(c,s,Y,H,ye),Qe=PH(H),ut=sD(ne,pe,y,r,b,T,c,H),ct=R?ut.map((Rt,kt)=>{const wn=R.get(kt);return!wn||wn[0]!==Rt.label?Rt:Object.assign(Object.assign({},Rt),{bbox:wn[1]})}):ut,gt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Xe),{type:"linear",data:ct,crossSize:h,titleText:qw(v),labelOverlap:OH(M,Xe),grid:RH(Xe.grid,H,ne),gridLength:Ke,line:!0,indexBBox:R}),Xe.line?null:{lineOpacity:0}),mt),Qe),n);return gt.labelOverlap.find(Rt=>Rt.type==="hide")&&(gt.crossSize=!1),new yM({className:"axis",style:Kw(gt)})}},lD=e=>t=>{const{labelFormatter:n,labelFilter:r=()=>!0}=t;return i=>{var s;const{scales:[l]}=i,c=((s=l.getTicks)===null||s===void 0?void 0:s.call(l))||l.getOptions().domain,h=typeof n=="string"?r0(n):n,p=(y,b,T)=>r(c[b],b,c),v=Object.assign(Object.assign({},t),{labelFormatter:h,labelFilter:p,scale:l});return e(v)(i)}},ry=lD(FH),uD=lD(DH);ry.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},uD.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var BH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function kH(e){const t=e%(Math.PI*2);return t===Math.PI/2?{titleTransform:"translate(0, 50%)"}:t>-Math.PI/2&&t<Math.PI/2?{titleTransform:"translate(50%, 0)"}:t>Math.PI/2&&t<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function zH(e,t,n,r){const{radar:i}=e,[s]=r,l=s.getOptions().name,[c,h]=C2(n),{axisRadar:p={}}=t;return Object.assign(Object.assign({},p),{grid:l==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((v,y)=>(h-c)/i.count*y)})}const cD=e=>{const{important:t={}}=e,n=BH(e,["important"]);return r=>{const{theme:i,coordinate:s,scales:l}=r;return ry(Object.assign(Object.assign(Object.assign({},n),kH(e.orientation)),{important:Object.assign(Object.assign({},zH(e,i,s,l)),t)}))(r)}};cD.props=Object.assign(Object.assign({},ry.props),{defaultPosition:"center"});function Qw(e,t){return+e.toPrecision(t)}function d0e(e){return e.toLocaleString()}function p0e(e){return e.toExponential()}function v0e(e,t){return t===void 0&&(t=0),Math.abs(e)<1e3?String(e):"".concat(Qw(e/1e3,t).toLocaleString(),"K")}var m0e=function(e,t,n){return e<0&&Number.isFinite(e)?t:n},g0e=function(e,t,n){return e>0&&Number.isFinite(e)?t:n},y0e=function(e,t){return e*t},_0e=function(e,t){return e/2+(t||0)/2};function Jw(e){var t=e.canvas,n=e.touches,r=e.offsetX,i=e.offsetY;if(t){var s=t.x,l=t.y;return[s,l]}if(n){var c=n[0],h=c.clientX,p=c.clientY;return[h,p]}return r&&i?[r,i]:[0,0]}var UH={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(e){return e.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},AM=as({background:"background",labelGroup:"label-group",label:"label"},"indicator"),jH=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this,n,UH)||this;return r.point=[0,0],r.group=r.appendChild(new yc({})),r.isMutationObserved=!0,r}return t.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,s=(0,ae.CR)(Bh(i),4),l=s[0],c=s[1],h=s[2],p=s[3],v=this.label.node().getLocalBounds(),y=v.min,b=v.max,T=new Gu(y[0]-p,y[1]-l,b[0]+c-y[0]+p,b[1]+h-y[1]+l),M=this.getPath(r,T),R=Ua(this.attributes,"background");this.background=zi(this.group).maybeAppendByClassName(AM.background,"path").styles((0,ae.pi)((0,ae.pi)({},R),{d:M})),this.group.appendChild(this.label.node())}},t.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,s=Ua(this.attributes,"label"),l=(0,ae.CR)(F0(s),2),c=l[0],h=l[1],p=c.text,v=(0,ae._T)(c,["text"]);if(this.label=zi(this.group).maybeAppendByClassName(AM.labelGroup,"g").styles(h),!!i){var y=this.label.maybeAppendByClassName(AM.label,function(){return L_(r(i))}).style("text",r(i).toString());y.selectAll("text").styles(v)}},t.prototype.adjustLayout=function(){var n=(0,ae.CR)(this.point,2),r=n[0],i=n[1],s=this.attributes,l=s.x,c=s.y;this.group.attr("transform","translate(".concat(l-r,", ").concat(c-i,")"))},t.prototype.getPath=function(n,r){var i=this.attributes.radius,s=r.x,l=r.y,c=r.width,h=r.height,p=[["M",s+i,l],["L",s+c-i,l],["A",i,i,0,0,1,s+c,l+i],["L",s+c,l+h-i],["A",i,i,0,0,1,s+c-i,l+h],["L",s+i,l+h],["A",i,i,0,0,1,s,l+h-i],["L",s,l+i],["A",i,i,0,0,1,s+i,l],["Z"]],v={top:4,right:6,bottom:0,left:2},y=v[n],b=this.createCorner([p[y].slice(-2),p[y+1].slice(-2)]);return p.splice.apply(p,(0,ae.ev)([y+1,1],(0,ae.CR)(b),!1)),p[0][0]="M",p},t.prototype.createCorner=function(n,r){r===void 0&&(r=10);var i=.8,s=Kj.apply(void 0,(0,ae.ev)([],(0,ae.CR)(n),!1)),l=(0,ae.CR)(n,2),c=(0,ae.CR)(l[0],2),h=c[0],p=c[1],v=(0,ae.CR)(l[1],2),y=v[0],b=v[1],T=(0,ae.CR)(s?[y-h,[h,y]]:[b-p,[p,b]],2),M=T[0],R=(0,ae.CR)(T[1],2),I=R[0],N=R[1],z=M/2,H=M/Math.abs(M),X=r*H,Y=X/2,ne=X*Math.sqrt(3)/2*i,pe=(0,ae.CR)([I,I+z-Y,I+z,I+z+Y,N],5),ye=pe[0],De=pe[1],Xe=pe[2],Ke=pe[3],mt=pe[4];return s?(this.point=[Xe,p-ne],[["L",ye,p],["L",De,p],["L",Xe,p-ne],["L",Ke,p],["L",mt,p]]):(this.point=[h+ne,Xe],[["L",h,ye],["L",h,De],["L",h+ne,Xe],["L",h,Ke],["L",h,mt]])},t.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?f(this):o(this)},t.prototype.bindEvents=function(){this.label.on(ka.BOUNDS_CHANGED,this.renderBackground)},t.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},t}(ri),fD={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},hD={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},dD={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},lm=as({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),iy=as({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),VH=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.x,s=n.y,l=n.size,c=l===void 0?10:l,h=n.radius,p=h===void 0?c/4:h,v=n.orientation,y=(0,ae._T)(n,["x","y","size","radius","orientation"]),b=c,T=b*2.4,M=zi(r).maybeAppendByClassName(iy.iconRect,"rect").styles((0,ae.pi)((0,ae.pi)({},y),{width:b,height:T,radius:p,x:i-b/2,y:s-T/2,transformOrigin:"center"})),R=i+1/3*b-b/2,I=i+2/3*b-b/2,N=s+1/4*T-T/2,z=s+3/4*T-T/2;M.maybeAppendByClassName("".concat(iy.iconLine,"-1"),"line").styles((0,ae.pi)({x1:R,x2:R,y1:N,y2:z},y)),M.maybeAppendByClassName("".concat(iy.iconLine,"-2"),"line").styles((0,ae.pi)({x1:I,x2:I,y1:N,y2:z},y)),v==="vertical"&&(M.node().style.transform="rotate(90)")},t}(ri),pD=function(e){(0,ae.ZT)(t,e);function t(n){return e.call(this,n,dD)||this}return t.prototype.renderLabel=function(n){var r=this,i=this.attributes,s=i.x,l=i.y,c=i.showLabel,h=Ua(this.attributes,"label"),p=h.x,v=p===void 0?0:p,y=h.y,b=y===void 0?0:y,T=h.transform,M=h.transformOrigin,R=(0,ae._T)(h,["x","y","transform","transformOrigin"]),I=(0,ae.CR)(F0(R,[]),2),N=I[0],z=I[1],H=zi(n).maybeAppendByClassName(iy.labelGroup,"g").styles(z),X=(0,ae.pi)((0,ae.pi)({},hD),N),Y=X.text,ne=(0,ae._T)(X,["text"]);po(!!c,H,function(pe){r.label=pe.maybeAppendByClassName(iy.label,"text").styles((0,ae.pi)((0,ae.pi)({},ne),{x:s+v,y:l+b,transform:T,transformOrigin:M,text:"".concat(Y)})),r.label.on("mousedown",function(ye){ye.stopPropagation()}),r.label.on("touchstart",function(ye){ye.stopPropagation()})})},t.prototype.renderIcon=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.orientation,c=r.type,h=(0,ae.pi)((0,ae.pi)({x:i,y:s,orientation:l},fD),Ua(this.attributes,"icon")),p=this.attributes.iconShape,v=p===void 0?function(){return new VH({style:h})}:p,y=zi(n).maybeAppendByClassName(iy.iconGroup,"g");y.selectAll(iy.icon.class).data([v]).join(function(b){return b.append(typeof v=="string"?v:function(){return v(c)}).attr("className",iy.icon.name)},function(b){return b.update(h)},function(b){return b.remove()})},t.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},t}(ri),vD=function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]]},HH=vD,GH=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},WH=function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},ZH=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},XH=function(e,t,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]},YH=function(e,t,n){var r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]},$H=function(e,t,n){var r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]},mD=function(e,t,n){return[["M",e,t+n],["L",e,t-n]]},qH=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]]},KH=function(e,t,n){return[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]]},QH=function(e,t,n){return[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]]},JH=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},gD=function(e,t,n){return[["M",e-n,t],["L",e+n,t]]},eG=gD,tG=function(e,t,n){return[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]]},nG=function(e,t,n){return[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]]},rG=function(e,t,n){return[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]]},iG=function(e,t,n){return[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]]};function oG(e,t){return[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]]}var aG=function(e,t,n){return[["M",e-n,t-n],["L",e+n,t],["L",e-n,t+n],["Z"]]};function sG(e){var t="default";if(al(e)&&e instanceof Image)t="image";else if(_c(e))t="symbol";else if(u(e)){var n=new RegExp("data:(image|text)");e.match(n)?t="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(e)?t="url":t="symbol"}return t}function lG(e){var t=sG(e);return["base64","url","image"].includes(t)?"image":e&&t==="symbol"?"path":null}var du=function(e){(0,ae.ZT)(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r){var i=n.symbol,s=n.size,l=s===void 0?16:s,c=n.x,h=c===void 0?0:c,p=n.y,v=p===void 0?0:p,y=n.transform,b=n.transformOrigin,T=(0,ae._T)(n,["symbol","size","x","y","transform","transformOrigin"]),M=lG(i);po(!!M,zi(r),function(R){R.maybeAppendByClassName("marker",M).attr("className","marker ".concat(M,"-marker")).call(function(I){if(M==="image"){var N=l*2;I.styles({img:i,width:N,height:N,x:h-l,y:v-l})}else{var N=l/2,z=_c(i)?i:t.getSymbol(i);I.styles((0,ae.pi)({d:z==null?void 0:z(h,v,N)},T))}})})},t.MARKER_SYMBOL_MAP=new Map,t.registerSymbol=function(n,r){t.MARKER_SYMBOL_MAP.set(n,r)},t.getSymbol=function(n){return t.MARKER_SYMBOL_MAP.get(n)},t.getSymbols=function(){return Array.from(t.MARKER_SYMBOL_MAP.keys())},t}(ri);du.registerSymbol("cross",qH),du.registerSymbol("hyphen",JH),du.registerSymbol("line",mD),du.registerSymbol("plus",QH),du.registerSymbol("tick",KH),du.registerSymbol("circle",vD),du.registerSymbol("point",HH),du.registerSymbol("bowtie",$H),du.registerSymbol("hexagon",YH),du.registerSymbol("square",GH),du.registerSymbol("diamond",WH),du.registerSymbol("triangle",ZH),du.registerSymbol("triangle-down",XH),du.registerSymbol("line",mD),du.registerSymbol("dot",gD),du.registerSymbol("dash",eG),du.registerSymbol("smooth",tG),du.registerSymbol("hv",nG),du.registerSymbol("vh",rG),du.registerSymbol("hvh",iG),du.registerSymbol("vhv",oG);function uG(e,t,n){var r=Math.round((e-n)/t);return n+r*t}function cG(e,t,n){var r=1.4,i=r*n;return[["M",e-n,t-i],["L",e+n,t-i],["L",e+n,t+i],["L",e-n,t+i],["Z"]]}var yD=1.4,_D=.4;function fG(e,t,n){var r=n,i=r*yD,s=r/2,l=r/6,c=e+i*_D;return[["M",e,t],["L",c,t+s],["L",e+i,t+s],["L",e+i,t-s],["L",c,t-s],["Z"],["M",c,t+l],["L",e+i-2,t+l],["M",c,t-l],["L",e+i-2,t-l]]}function hG(e,t,n){var r=n,i=r*yD,s=r/2,l=r/6,c=t+i*_D;return[["M",e,t],["L",e-s,c],["L",e-s,t+i],["L",e+s,t+i],["L",e+s,c],["Z"],["M",e-l,c],["L",e-l,t+i-2],["M",e+l,c],["L",e+l,t+i-2]]}du.registerSymbol("hiddenHandle",cG),du.registerSymbol("verticalHandle",fG),du.registerSymbol("horizontalHandle",hG);var b0e=function(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n};function dG(e,t,n,r){var i;r===void 0&&(r=4);var s=(0,ae.CR)(e,2),l=s[0],c=s[1],h=(0,ae.CR)(t,2),p=h[0],v=h[1],y=(0,ae.CR)(n,2),b=y[0],T=y[1],M=(0,ae.CR)([p,v],2),R=M[0],I=M[1],N=I-R;return R>I&&(i=(0,ae.CR)([I,R],2),R=i[0],I=i[1]),N>c-l?[l,c]:R<l?b===l&&T===I?[l,I]:[l,N+l]:I>c?T===c&&b===R?[R,c]:[c-N,c]:[R,I]}function um(e,t,n){return e===void 0&&(e="horizontal"),e==="horizontal"?t:n}var N2=as({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),bD={showLabel:!0,formatter:function(e){return e.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},pG=function(e){(0,ae.ZT)(t,e);function t(n){return e.call(this,n,bD)||this}return t.prototype.render=function(n,r){var i=zi(r).maybeAppendByClassName(N2.markerGroup,"g");this.renderMarker(i);var s=zi(r).maybeAppendByClassName(N2.labelGroup,"g");this.renderLabel(s)},t.prototype.renderMarker=function(n){var r=this,i=this.attributes,s=i.orientation,l=i.markerSymbol,c=l===void 0?um(s,"horizontalHandle","verticalHandle"):l;po(!!c,n,function(h){var p=Ua(r.attributes,"marker"),v=(0,ae.pi)({symbol:c},p);r.marker=h.maybeAppendByClassName(N2.marker,function(){return new du({style:v})}).update(v)})},t.prototype.renderLabel=function(n){var r=this,i=this.attributes,s=i.showLabel,l=i.orientation,c=i.spacing,h=c===void 0?0:c,p=i.formatter;po(s,n,function(v){var y,b=Ua(r.attributes,"label"),T=b.text,M=(0,ae._T)(b,["text"]),R=((y=v.select(N2.marker.class))===null||y===void 0?void 0:y.node().getBBox())||{},I=R.width,N=I===void 0?0:I,z=R.height,H=z===void 0?0:z,X=(0,ae.CR)(um(l,[0,H+h,"center","top"],[N+h,0,"start","middle"]),4),Y=X[0],ne=X[1],pe=X[2],ye=X[3];v.maybeAppendByClassName(N2.label,"text").styles((0,ae.pi)((0,ae.pi)({},M),{x:Y,y:ne,text:p(T).toString(),textAlign:pe,textBaseline:ye}))})},t}(ri),xD={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},vG=In({},xD,{}),mG=In({},xD,dh(bD,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),gG=.01,x0e=.5,kh=as({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");function yG(e,t){for(var n=1;n<e.length;n+=1){var r=e[n-1],i=e[n];if(t>=r&&t<=i)return[r,i]}return[t,t]}function _G(e,t,n){var r=Array.from(t),i=e.length;return new Array(i).fill(0).reduce(function(s,l,c){var h=r[c%r.length];return s+=" ".concat(e[c],":").concat(h).concat(c<i-1?" ".concat(e[c+1],":").concat(h):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function ED(e,t){var n=(0,ae.CR)(yG(e,t),2),r=n[0],i=n[1];return{tick:t>(r+i)/2?i:r,range:[r,i]}}var F2=as({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function SD(e){var t=e.orientation,n=e.size,r=e.length;return um(t,[r,n],[n,r])}function wD(e){var t=e.type,n=(0,ae.CR)(SD(e),2),r=n[0],i=n[1];return t==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function bG(e){return wD(e)}function xG(e){var t=e.orientation,n=e.color,r=e.block,i=e.partition,s;if(_c(n)){var l=20;s=new Array(l).fill(0).map(function(p,v,y){return n(v/(y.length-1))})}else s=n;var c=s.length,h=s.map(function(p){return vv(p).toString()});return c?c===1?h[0]:r?_G(i,h,t):h.reduce(function(p,v,y){return p+=" ".concat(y/(c-1),":").concat(v)},"l(".concat(um(t,"0","270"),")")):""}function EG(e){var t=e.orientation,n=e.range;if(!n)return[];var r=(0,ae.CR)(SD(e),2),i=r[0],s=r[1],l=(0,ae.CR)(n,2),c=l[0],h=l[1],p=um(t,c*i,0),v=um(t,0,c*s),y=um(t,h*i,i),b=um(t,s,h*s);return[["M",p,v],["L",p,b],["L",y,b],["L",y,v],["Z"]]}function SG(e,t){var n=Ua(t,"track");e.maybeAppendByClassName(F2.track,"path").styles((0,ae.pi)({d:wD(t)},n))}function wG(e,t){var n=Ua(t,"selection"),r=xG(t),i=e.maybeAppendByClassName(F2.selection,"path").styles((0,ae.pi)({d:bG(t),fill:r},n)),s=i.maybeAppendByClassName(F2.clipPath,"path").styles({d:EG(t)}).node();i.style("clipPath",s)}var TG=function(e){(0,ae.ZT)(t,e);function t(n){return e.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return t.prototype.render=function(n,r){var i=zi(r).maybeAppendByClassName(F2.trackGroup,"g");SG(i,n);var s=zi(r).maybeAppendByClassName(F2.selectionGroup,"g");wG(s,n)},t}(ri);function AG(e){return{min:Math.min.apply(Math,(0,ae.ev)([],(0,ae.CR)(e.map(function(t){return t.value})),!1)),max:Math.max.apply(Math,(0,ae.ev)([],(0,ae.CR)(e.map(function(t){return t.value})),!1))}}var CG=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this,n,mG)||this;return r.eventToOffsetScale=new hd({}),r.innerRibbonScale=new hd({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var s=r.attributes,l=s.data,c=s.block;i.stopPropagation();var h=r.getValueByCanvasPoint(i);if(c){var p=ED(l.map(function(y){var b=y.value;return b}),h).range;r.showIndicator((p[0]+p[1])/2,"".concat(p[0],"-").concat(p[1])),r.dispatchIndicated(h,p)}else{var v=r.getTickValue(h);r.showIndicator(v),r.dispatchIndicated(v)}},r.onDragStart=function(i){return function(s){s.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(s)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var s=r.target;r.updateMouse();var l=(0,ae.CR)(r.selection,2),c=l[0],h=l[1],p=r.getTickValue(r.getValueByCanvasPoint(i)),v=p-r.prevValue;s==="start"?c!==p&&r.updateSelection(p,h):s==="end"?h!==p&&r.updateSelection(c,p):s==="ribbon"&&v!==0&&(r.prevValue=p,r.updateSelection(v,v,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(t.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new Gu(0,0,r,i)},t.prototype.render=function(n,r){var i=this,s=n.showLabel;this.renderTitle(zi(r));var l=this.availableSpace,c=l.x,h=l.y,p=zi(r).maybeAppendByClassName(kh.contentGroup,"g").styles({transform:"translate(".concat(c,", ").concat(h,")")}),v=p.maybeAppendByClassName(kh.labelGroup,"g").styles({zIndex:1});po(!!s,v,function(b){i.renderLabel(b)});var y=p.maybeAppendByClassName(kh.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=p.maybeAppendByClassName(kh.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(y),this.renderIndicator(p),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(t.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:AG(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonRange",{get:function(){var n=(0,ae.CR)(this.selection,2),r=n[0],i=n[1],s=this.ribbonScale;return[s.map(r),s.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,s=this.attributes.defaultValue,l=s===void 0?[r,i]:s,c=(0,ae.CR)(l,2),h=c[0],p=c[1];return[h,p]},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){return um(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},t.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,s=r.titleText,l=r.width,c=r.height,h=Ua(this.attributes,"title"),p=(0,ae.pi)((0,ae.pi)({},h),{width:l,height:c,text:s}),v=this;n.selectAll(kh.title.class).data(i?[s]:[]).join(function(y){return y.append(function(){return new D4({style:p})}).attr("className",kh.title.name).each(function(){v.title=this})},function(y){return y.update(p)},function(y){return y.each(function(){v.title=void 0}).remove()})},Object.defineProperty(t.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new Gu(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,i=n.labelDirection,s={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return s[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Gu(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((n=this.label.querySelector(Zs.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),s=i.width,l=i.height;return this.cacheLabelBBox=new Gu(0,0,s,l),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing,s=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var l=this.labelBBox,c=l.width,h=l.height,p=this.ifHorizontal(h,c)+s+this.labelFixedSpacing,v=this.ifHorizontal(c,h);return{width:c,height:h,size:p,length:v}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,s=this.availableSpace,l=s.width,c=s.height,h=this.labelShape,p=h.size,v=h.length,y=(0,ae.CR)(this.ifHorizontal([c,l],[l,c]),2),b=y[0],T=y[1],M=r?this.handleShape:{size:0,length:0},R=M.size,I=M.length,N=this.handleOffsetRatio,z=0,H=this.labelPosition;i?z=i:["bottom","right"].includes(H)?z=Math.min(b-p,(b-R)/N):b*(1-N)>R?z=Math.max(b-p,0):z=Math.max((b-p-R)/N,0);var X=Math.max(I,v),Y=T-X,ne=(0,ae.CR)(this.ifHorizontal([Y,z],[z,Y]),2),pe=ne[0],ye=ne[1],De=["top","left"].includes(H)?p:0,Xe=(0,ae.CR)(this.ifHorizontal([X/2,De],[De,X/2]),2),Ke=Xe[0],mt=Xe[1];return new Gu(Ke,mt,pe,ye)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),t.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,s=r.type,l=r.orientation,c=r.color,h=r.block,p=Ua(this.attributes,"ribbon"),v=this.range,y=v.min,b=v.max,T=this.ribbonBBox,M=T.x,R=T.y,I=this.ribbonShape,N=I.length,z=I.size,H=In({transform:"translate(".concat(M,", ").concat(R,")"),length:N,size:z,type:s,orientation:l,color:c,block:h,partition:i.map(function(X){return(X.value-y)/(b-y)}),range:this.ribbonRange},p);this.ribbon=n.maybeAppendByClassName(kh.ribbon,function(){return new TG({style:H})}).update(H)},t.prototype.getHandleClassName=function(n){return"".concat(kh.prefix("".concat(n,"-handle")))},t.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,s=Ua(this.attributes,"handle"),l=(0,ae.CR)(this.selection,2),c=l[0],h=l[1],p=(0,ae.pi)((0,ae.pi)({},s),{orientation:i}),v=s.shape,y=v===void 0?"slider":v,b=y==="basic"?pG:pD,T=this;this.handlesGroup.selectAll(kh.handle.class).data(r?[{value:c,type:"start"},{value:h,type:"end"}]:[],function(M){return M.type}).join(function(M){return M.append(function(){return new b({style:p})}).attr("className",function(R){var I=R.type;return"".concat(kh.handle," ").concat(T.getHandleClassName(I))}).each(function(R){var I=R.type,N=R.value;this.update({labelText:N});var z="".concat(I,"Handle");T[z]=this,this.addEventListener("pointerdown",T.onDragStart(I))})},function(M){return M.update(p).each(function(R){var I=R.value;this.update({labelText:I})})},function(M){return M.each(function(R){var I=R.type,N="".concat(I,"Handle");T[N]=void 0}).remove()})},t.prototype.adjustHandles=function(){var n=(0,ae.CR)(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i)},Object.defineProperty(t.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Gu(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,s=this.endHandle.getBBox(),l=s.width,c=s.height,h=(0,ae.CR)([Math.max(r,l),Math.max(i,c)],2),p=h[0],v=h[1];return this.cacheHandleBBox=new Gu(0,0,p,v),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,s=(0,ae.CR)(this.ifHorizontal([i,r],[r,i]),2),l=s[0],c=s[1];return{width:r,height:i,size:l,length:c}},enumerable:!1,configurable:!0}),t.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,s=this.ribbonBBox,l=s.x,c=s.y,h=this.ribbonShape.size,p=this.getOffset(r),v=(0,ae.CR)(this.ifHorizontal([l+p,c+h*this.handleOffsetRatio],[l+h*this.handleOffsetRatio,c+p]),2),y=v[0],b=v[1],T=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();T==null||T.update({transform:"translate(".concat(y,", ").concat(b,")"),formatter:i})},t.prototype.renderIndicator=function(n){var r=Ua(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(kh.indicator,function(){return new jH({})}).update(r)},Object.defineProperty(t.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(i,s,l,c){var h,p,v=(h=s==null?void 0:s.id)!==null&&h!==void 0?h:l.toString();if(i.push((0,ae.pi)((0,ae.pi)({},s),{id:v,index:l,type:"value",label:(p=s==null?void 0:s.label)!==null&&p!==void 0?p:s.value.toString(),value:n.ribbonScale.map(s.value)})),l<c.length-1){var y=c[l+1],b=(0,ae.CR)([s.value,y.value],2),T=b[0],M=b[1],R=(T+M)/2;i.push((0,ae.pi)((0,ae.pi)({},s),{id:v,index:l,type:"range",range:[T,M],label:[T,M].join("~"),value:n.ribbonScale.map(R)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelStyle",{get:function(){var n=(0,ae.CR)(["center","middle"],2),r=n[0],i=n[1],s=this.labelPosition;return s==="top"?i="bottom":s==="bottom"?i="top":s==="left"?r="end":s==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),t.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,s=i===void 0?!1:i,l=r.labelFilter,c=r.labelFormatter,h=Ua(this.attributes,"tick"),p=Ua(this.attributes,"label"),v=p.align,y=In((0,ae.pi)({showLine:!1,showGrid:!1,showTick:s,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),dh(h,"tick"),dh(p,"label"),{data:this.labelData}),b={tickFilter:function(M,R,I){return(M==null?void 0:M.type)!=="value"?!1:l?l(M,M.index,I.filter(function(N){return N.type!=="value"})):!0},labelFilter:function(M,R,I){return(M==null?void 0:M.type)!==v?!1:l?l(M,M.index,I.filter(function(N){return N.type===v})):!0},labelFormatter:c},T=(0,ae.pi)((0,ae.pi)((0,ae.pi)({},y),b),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(kh.label,function(){return new yM({style:T})}).node(),this.label.update(T,!1)},Object.defineProperty(t.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,s=n.labelSpacing,l=n.tickLength,c=this.ribbonShape.size,h=this.labelPosition,p=this.labelFixedSpacing,v=(0,ae.CR)([0,0,0],3),y=v[0],b=v[1],T=v[2],M=l!=null?l:c;return r?(T=M,b=p,i==="positive"?h==="right"?(y=M,T=M):h==="bottom"&&(y=T):i==="negative"&&(h==="top"||h==="left")&&(y=c)):i==="positive"?h==="right"?b=M:h==="bottom"&&(y=c+p,b=s):i==="negative"&&(h==="left"||h==="top")&&(b=s),{offset:y,spacing:s,tickLength:T}},enumerable:!1,configurable:!0}),t.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,i=r.x,s=r.y,l=r.width,c=r.height,h=this.labelAxisStyle,p=h.offset,v=h.spacing,y=h.tickLength,b=(0,ae.CR)(this.ifHorizontal([[i,s+p],[i+l,s+p]],[[i+p,s+c],[i+p,s]]),2),T=b[0],M=b[1];this.label.update({startPos:T,endPos:M,tickLength:y,labelSpacing:v},!1)}},t.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},t.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var i=this.attributes.showIndicator;if(!i||typeof n!="number"){this.hideIndicator();return}var s=this.range,l=s.min,c=s.max,h=this.ribbonBBox,p=h.x,v=h.y,y=(0,d.Z)(n,l,c),b=this.getOffset(y),T=this.ifHorizontal([b+p,v],[p,b+v]);this.indicator.update({x:T[0],y:T[1],position:this.ifHorizontal("top","left"),labelText:r}),o(this.indicator.node())},t.prototype.hideIndicator=function(){f(this.indicator.node())},t.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},t.prototype.setSelection=function(n,r){this.updateSelection(n,r)},t.prototype.updateSelection=function(n,r,i){var s;i===void 0&&(i=!1);var l=(0,ae.CR)(this.selection,2),c=l[0],h=l[1],p=(0,ae.CR)([n,r],2),v=p[0],y=p[1];i&&(v+=c,y+=h);var b=this.range,T=b.min,M=b.max;s=(0,ae.CR)(dG([T,M],[v,y],this.selection),2),v=s[0],y=s[1],this.update({defaultValue:[v,y]}),this.dispatchSelection()},Object.defineProperty(t.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,i=this.range,s=i.min,l=i.max;return Vs(r)?Qw((l-s)*gG,0):r},enumerable:!1,configurable:!0}),t.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,s=r.block,l=this.range.min;return s?ED(i.map(function(c){var h=c.value;return h}),n).tick:uG(n,this.step,l)},t.prototype.getValueByCanvasPoint=function(n,r){r===void 0&&(r=!1);var i=this.range,s=i.min,l=i.max,c=(0,ae.CR)(this.ribbon.node().getPosition(),2),h=c[0],p=c[1],v=this.ifHorizontal(h,p),y=this.ifHorizontal.apply(this,(0,ae.ev)([],(0,ae.CR)(Jw(n)),!1)),b=y-v,T=(0,d.Z)(this.getOffset(b,!0),s,l);return T},t.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var i=this.range,s=i.min,l=i.max,c=this.ribbonShape.length,h=this.eventToOffsetScale;return h.update({domain:[s,l],range:[0,c]}),r?h.invert(n):h.map(n)},t.prototype.dispatchSelection=function(){var n=new Jl("valuechange",{detail:{value:this.selection}});this.dispatchEvent(n)},t.prototype.dispatchIndicated=function(n,r){var i=new Jl("indicate",{detail:{value:n,range:r}});this.dispatchEvent(i)},t}(ri);class B2 extends D2{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:F_}}map(t){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(t){const[n]=this.options.range;return t===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:t,domain:n,tickCount:r}=this.options,[i,s]=n;return!pb(i)||!pb(s)?[]:t(i,s,r)}clone(){return new B2(this.options)}}class gb extends D2{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(t){super(t)}map(t){if(!Xw(t))return this.options.unknown;const n=bM(this.thresholds,t,0,this.n);return this.options.range[n]}invert(t){const{range:n}=this.options,r=n.indexOf(t),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new gb(this.options)}rescale(){const{domain:t,range:n}=this.options;this.n=Math.min(t.length,n.length-1),this.thresholds=t}}function k2(e){return Math.abs(e)<1e-14?e:parseFloat(e.toFixed(14))}const OG=[1,5,2,2.5,4,3],E0e=null,TD=Number.EPSILON*100;function MG(e,t){return(e%t+t)%t}function RG(e){return Math.round(e*1e12)/1e12}function PG(e,t,n,r,i,s){const l=X4(t),c=W4(t,e);let h=0;const p=MG(r,s);return(p<TD||s-p<TD)&&r<=0&&i>=0&&(h=1),1-c/(l-1)-n+h}function IG(e,t,n){const r=X4(t),i=W4(t,e),s=1;return 1-i/(r-1)-n+s}function DG(e,t,n,r,i,s){const l=(e-1)/(s-i),c=(t-1)/(Math.max(s,r)-Math.min(n,i));return 2-Math.max(l/c,c/l)}function LG(e,t){return e>=t?2-(e-1)/(t-1):1}function NG(e,t,n,r){const i=t-e;return 1-.5*(_f(t-r,2)+_f(e-n,2))/_f(.1*i,2)}function FG(e,t,n){const r=t-e;if(n>r){const i=(n-r)/2;return 1-_f(i,2)/_f(.1*r,2)}return 1}function BG(){return 1}const CM=(e,t,n=5,r=!0,i=OG,s=[.25,.2,.5,.05])=>{const l=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||typeof e!="number"||typeof t!="number"||!l)return[];if(t-e<1e-15||l===1)return[e];const c={score:-2,lmin:0,lmax:0,lstep:0};let h=1;for(;h<1/0;){for(let M=0;M<i.length;M+=1){const R=i[M],I=IG(R,i,h);if(s[0]*I+s[1]+s[2]+s[3]<c.score){h=1/0;break}let N=2;for(;N<1/0;){const z=LG(N,l);if(s[0]*I+s[1]+s[2]*z+s[3]<c.score)break;const H=(t-e)/(N+1)/h/R;let X=Math.ceil(Math.log10(H));for(;X<1/0;){const Y=h*R*_f(10,X),ne=FG(e,t,Y*(N-1));if(s[0]*I+s[1]*ne+s[2]*z+s[3]<c.score)break;const pe=Math.floor(t/Y)*h-(N-1)*h,ye=Math.ceil(e/Y)*h;if(pe<=ye){const De=ye-pe;for(let Xe=0;Xe<=De;Xe+=1){const mt=(pe+Xe)*(Y/h),Qe=mt+Y*(N-1),ut=Y,ct=PG(R,i,h,mt,Qe,ut),gt=NG(e,t,mt,Qe),Xt=DG(N,l,e,t,mt,Qe),Rt=BG(),kt=s[0]*ct+s[1]*gt+s[2]*Xt+s[3]*Rt;kt>c.score&&(!r||mt<=e&&Qe>=t)&&(c.lmin=mt,c.lmax=Qe,c.lstep=ut,c.score=kt)}}X+=1}N+=1}}h+=1}const p=k2(c.lmax),v=k2(c.lmin),y=k2(c.lstep),b=Math.floor(RG((p-v)/y))+1,T=new Array(b);T[0]=k2(v);for(let M=1;M<b;M+=1)T[M]=k2(T[M-1]+y);return T};class eT extends gb{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:CM}}constructor(t){super(t)}nice(){const{nice:t}=this.options;if(t){const[n,r,i]=this.getTickMethodOptions();this.options.domain=q4(n,r,i)}}getTicks(){const{tickMethod:t}=this.options,[n,r,i]=this.getTickMethodOptions();return t(n,r,i)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options,r=t[0],i=t[t.length-1];return[r,i,n]}rescale(){this.nice();const{range:t,domain:n}=this.options,[r,i]=n;this.n=t.length-1,this.thresholds=new Array(this.n);for(let s=0;s<this.n;s+=1)this.thresholds[s]=((s+1)*i-(s-this.n)*r)/(this.n+1)}invert(t){const[n,r]=super.invert(t),[i,s]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||i,r||s]}getThresholds(){return this.thresholds}clone(){return new eT(this.options)}}function kG(e,t){const n=e.length;if(!n)return;if(n<2)return e[n-1];const r=(n-1)*t,i=Math.floor(r),s=e[i],l=e[i+1];return s+(l-s)*(r-i)}function zG(e,t,n=!1){const r=e;n||r.sort((s,l)=>s-l);const i=[];for(let s=1;s<t;s+=1)i.push(kG(r,s/t));return i}class tT extends gb{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:CM}}constructor(t){super(t)}rescale(){const{domain:t,range:n}=this.options;this.n=n.length-1,this.thresholds=zG(t,this.n+1,!1)}invert(t){const[n,r]=super.invert(t),{domain:i}=this.options,s=i[0],l=i[i.length-1];return n===void 0&&r===void 0?[n,r]:[n||s,r||l]}getThresholds(){return this.thresholds}clone(){return new tT(this.options)}getTicks(){const{tickCount:t,domain:n,tickMethod:r}=this.options,i=n.length-1,s=n[0],l=n[i];return r(s,l,t)}}var UG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function jG(e,t,n){return e.size=t,xH(n)?e.height=t:e.width=t,e}function VG(e,t,n){const{size:r}=t,i=rD(e,t,n);return jG(i,r,i.orientation)}function HG(e){return t=>({value:t/e,label:String(t)})}function GG(e,t,n,r,i){const s=t.thresholds,l=HG(r);return Object.assign(Object.assign({},e),{color:i,data:[n,...s,r].map(l)})}function WG(e,t,n){const i=[-1/0,...t.thresholds,1/0].map((s,l)=>({value:l,label:s}));return Object.assign(Object.assign({},e),{data:i,color:n,labelFilter:(s,l)=>l>0&&l<i.length-1})}function OM(e){const{domain:t}=e.getOptions(),[n,r]=[t[0],Cw(t)];return[n,r]}function ZG(e,t){const n=e.getOptions(),r=e.clone();return r.update(Object.assign(Object.assign({},n),{range:[vv(t).toString()]})),r}function XG(e,t,n,r,i,s){const{length:l}=e,c=n||r,h=i.color?s.legendContinuous.ribbonFill||"black":s.color,p=t||ZG(c,h),[v,y]=OM(p),[b,T]=OM([t,n,r].filter(M=>M!==void 0).find(M=>!(M instanceof B2)));return Object.assign(Object.assign({},e),{domain:[b,T],data:p.getTicks().map(M=>({value:M})),color:new Array(Math.floor(l)).fill(0).map((M,R)=>{const I=(y-v)/(l-1)*R+v,N=p.map(I)||h,z=r?r.map(I):1;return N.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(H,X,Y,ne)=>`rgba(${X}, ${Y}, ${ne}, ${z})`)})})}function YG(e,t,n,r,i,s){const l=sm(e,"color"),c=VG(n,r,i);if(l instanceof gb){const{range:v}=l.getOptions(),[y,b]=OM(l);return l instanceof eT||l instanceof tT?GG(c,l,y,b,v):WG(c,l,v)}const h=sm(e,"size"),p=sm(e,"opacity");return XG(c,l,h,p,t,s)}const oy=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:s,size:l,title:c,style:h,crossPadding:p,padding:v}=e,y=UG(e,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:b,value:T,theme:M,scale:R})=>{const{bbox:I}=T,{x:N,y:z,width:H,height:X}=I,Y=tD(s,n),{legendContinuous:ne={}}=M,pe=Kw(Object.assign({},ne,Object.assign(Object.assign({titleText:qw(c),labelAlign:"value",labelFormatter:typeof t=="string"?De=>r0(t)(De.label):t},YG(b,R,T,e,oy,M)),h),y)),ye=new nD({style:Object.assign(Object.assign({x:N,y:z,width:H,height:X},Y),{subOptions:pe})});return ye.appendChild(new CG({className:"legend-continuous",style:pe})),ye}};oy.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const AD=e=>(...t)=>oy(Object.assign({},{block:!0},e))(...t);AD.props=Object.assign(Object.assign({},oy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const MM=e=>t=>{const{scales:n}=t,r=sm(n,"size");return oy(Object.assign({},{type:"size",data:r.getTicks().map((i,s)=>({value:i,label:String(i)}))},e))(t)};MM.props=Object.assign(Object.assign({},oy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const CD=e=>MM(Object.assign({},{block:!0},e));CD.props=Object.assign(Object.assign({},oy.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var $G=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const OD=({static:e=!1}={})=>t=>{const{width:n,height:r,depth:i,paddingLeft:s,paddingRight:l,paddingTop:c,paddingBottom:h,padding:p,inset:v,insetLeft:y,insetTop:b,insetRight:T,insetBottom:M,margin:R,marginLeft:I,marginBottom:N,marginTop:z,marginRight:H,data:X,coordinate:Y,theme:ne,component:pe,interaction:ye,x:De,y:Xe,z:Ke,key:mt,frame:Qe,labelTransform:ut,parentKey:ct,clip:gt,viewStyle:Xt,title:Rt}=t,kt=$G(t,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:De,y:Xe,z:Ke,key:mt,width:n,height:r,depth:i,padding:p,paddingLeft:s,paddingRight:l,paddingTop:c,inset:v,insetLeft:y,insetTop:b,insetRight:T,insetBottom:M,paddingBottom:h,theme:ne,coordinate:Y,component:pe,interaction:ye,frame:Qe,labelTransform:ut,margin:R,marginLeft:I,marginBottom:N,marginTop:z,marginRight:H,parentKey:ct,clip:gt,style:Xt},!e&&{title:Rt}),{marks:[Object.assign(Object.assign(Object.assign({},kt),{key:`${mt}-0`,data:X}),e&&{title:Rt})]})]};OD.props={};var qG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yb(e){return(t,...n)=>hi({},e(t,...n),t)}function _b(e){return(t,...n)=>hi({},t,e(t,...n))}function RM(e,t){if(!e)return t;if(Array.isArray(e))return e;const{value:n=t}=e,r=qG(e,["value"]);return Object.assign(Object.assign({},r),{value:n})}var PM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const MD=()=>e=>{const{children:t}=e,n=PM(e,["children"]);if(!Array.isArray(t))return[];const{data:r,scale:i={},axis:s={},legend:l={},encode:c={},transform:h=[]}=n,p=PM(n,["data","scale","axis","legend","encode","transform"]),v=t.map(y=>{var{data:b,scale:T={},axis:M={},legend:R={},encode:I={},transform:N=[]}=y,z=PM(y,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:RM(b,r),scale:hi({},i,T),encode:hi({},c,I),transform:[...h,...N],axis:M&&s?hi({},s,M):!1,legend:R&&l?hi({},l,R):!1},z)});return[Object.assign(Object.assign({},p),{marks:v,type:"standardView"})]};MD.props={};function Ic([e,t],[n,r]){return[e-n,t-r]}function nT([e,t],[n,r]){return[e+n,t+r]}function sc([e,t],[n,r]){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function k0([e,t]){return Math.atan2(t,e)}function bb([e,t]){return k0([e,t])+Math.PI/2}function RD(e,t){const n=k0(e),r=k0(t);return n<r?r-n:Math.PI*2-(n-r)}function IM(e){let t=1/0,n=-1/0,r=1/0,i=-1/0;for(const[c,h]of e)t=Math.min(c,t),n=Math.max(c,n),r=Math.min(h,r),i=Math.max(h,i);const s=n-t,l=i-r;return[t,r,s,l]}function PD([e,t],[n,r]){return[(e+n)/2,(t+r)/2]}function sa(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function KG(e,t){return t.forEach((n,r)=>r===0?e.moveTo(n[0],n[1]):e.lineTo(n[0],n[1])),e.closePath(),e}function QG(e,t,n){const{arrowSize:r}=n,i=typeof r=="string"?+parseFloat(r)/100*sc(e,t):r,s=Math.PI/6,l=Math.atan2(t[1]-e[1],t[0]-e[0]),c=Math.PI/2-l-s,h=[t[0]-i*Math.sin(c),t[1]-i*Math.cos(c)],p=l-s,v=[t[0]-i*Math.cos(p),t[1]-i*Math.sin(p)];return[h,v]}function z2(e,t,n,r,i){const s=k0(Ic(r,t))+Math.PI,l=k0(Ic(r,n))+Math.PI;return e.arc(r[0],r[1],i,s,l,l-s<0),e}function ID(e,t,n,r="y",i="between",s=!1){const l=(I,N)=>I==="y"||I===!0?N?180:90:N?90:0,c=r==="y"||r===!0?n:t,h=l(r,s),p=eg(c),[v,y]=ig(p,I=>c[I]),b=new hd({domain:[v,y],range:[0,100]}),T=I=>(0,yu.Z)(c[I])&&!Number.isNaN(c[I])?b.map(c[I]):0,M={between:I=>`${e[I]} ${T(I)}%`,start:I=>I===0?`${e[I]} ${T(I)}%`:`${e[I-1]} ${T(I)}%, ${e[I]} ${T(I)}%`,end:I=>I===e.length-1?`${e[I]} ${T(I)}%`:`${e[I]} ${T(I)}%, ${e[I+1]} ${T(I)}%`},R=p.sort((I,N)=>T(I)-T(N)).map(M[i]||M.between).join(",");return`linear-gradient(${h}deg, ${R})`}function rT(e){const[t,n,r,i]=e;return[i,t,n,r]}function k_(e,t,n){const[r,i,,s]=tu(e)?rT(t):t,[l,c]=n,h=e.getCenter(),p=bb(Ic(r,h)),v=bb(Ic(i,h)),y=v===p&&l!==c?v+Math.PI*2:v;return{startAngle:p,endAngle:y-p>=0?y:Math.PI*2+y,innerRadius:sc(s,h),outerRadius:sc(r,h)}}function S0e(e){const t="connect";return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(t)).map(([n,r])=>[lowerFirst(n.replace(t,"").trim()),r]).filter(([n])=>n!==void 0))}function DM(e){const{colorAttribute:t,opacityAttribute:n=t}=e;return`${n}Opacity`}function DD(e,t){if(!nu(e))return"";const n=e.getCenter(),{transform:r}=t;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function LM(e){if(e.length===1)return e[0];const[[t,n,r=0],[i,s,l=0]]=e;return[(t+i)/2,(n+s)/2,(r+l)/2]}function LD(e){return e.replace(/-(\w)/g,function(t,n){return n.toUpperCase()})}function JG(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}var w0e=Array.prototype.slice;function ND(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wu(e){return function(){return e}}function FD(e){this._context=e}FD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function U2(e){return new FD(e)}const NM=Math.PI,FM=2*NM,z_=1e-6,eW=FM-z_;function BD(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function tW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BD;const n=_f(10,t);return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class iT{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BD:tW(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,c=this._y1,h=r-t,p=i-n,v=l-t,y=c-n,b=v*v+y*y;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>z_)if(!(Math.abs(y*h-p*v)>z_)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let T=r-l,M=i-c,R=h*h+p*p,I=T*T+M*M,N=Math.sqrt(R),z=Math.sqrt(b),H=s*Math.tan((NM-Math.acos((R+b-I)/(2*N*z)))/2),X=H/z,Y=H/N;Math.abs(X-1)>z_&&this._append`L${t+X*v},${n+X*y}`,this._append`A${s},${s},0,0,${+(y*T>v*M)},${this._x1=t+Y*h},${this._y1=n+Y*p}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),h=r*Math.sin(i),p=t+c,v=n+h,y=1^l,b=l?i-s:s-i;this._x1===null?this._append`M${p},${v}`:(Math.abs(this._x1-p)>z_||Math.abs(this._y1-v)>z_)&&this._append`L${p},${v}`,r&&(b<0&&(b=b%FM+FM),b>eW?this._append`A${r},${r},0,1,${y},${t-c},${n-h}A${r},${r},0,1,${y},${this._x1=p},${this._y1=v}`:b>z_&&this._append`A${r},${r},0,${+(b>=NM)},${y},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function z0(){return new iT}z0.prototype=iT.prototype;function T0e(e=3){return new iT(+e)}function BM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new iT(t)}function kD(e){return e[0]}function zD(e){return e[1]}function ay(e,t){var n=Wu(!0),r=null,i=U2,s=null,l=BM(c);e=typeof e=="function"?e:e===void 0?kD:Wu(e),t=typeof t=="function"?t:t===void 0?zD:Wu(t);function c(h){var p,v=(h=ND(h)).length,y,b=!1,T;for(r==null&&(s=i(T=l())),p=0;p<=v;++p)!(p<v&&n(y=h[p],p,h))===b&&((b=!b)?s.lineStart():s.lineEnd()),b&&s.point(+e(y,p,h),+t(y,p,h));if(T)return s=null,T+""||null}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:Wu(+h),c):e},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:Wu(+h),c):t},c.defined=function(h){return arguments.length?(n=typeof h=="function"?h:Wu(!!h),c):n},c.curve=function(h){return arguments.length?(i=h,r!=null&&(s=i(r)),c):i},c.context=function(h){return arguments.length?(h==null?r=s=null:s=i(r=h),c):r},c}function xb(e){const t=typeof e=="function"?e:e.render;return class extends Gd{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){t(this)}}}var kM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function nW(e){const{min:[t,n],max:[r,i]}=e.getLocalBounds();let s=0,l=0;return t>0&&(s=t),r<0&&(s=r),n>0&&(l=n),i<0&&(l=i),[s,l]}function rW(e,t=[]){const[n=0,r=0,i=n,s=r]=t,l=e.parentNode,c=l.getEulerAngles();l.setEulerAngles(0);const{min:h,halfExtents:p}=e.getLocalBounds(),[v,y]=h,[b,T]=p;return l.setEulerAngles(c),{x:v-s,y:y-n,width:b*2+s+r,height:T*2+n+i}}const iW=(e,t,n)=>{const r=sc(e,t),i=sc(t,n),s=sc(n,e);return(Math.pow(r,2)+Math.pow(i,2)-Math.pow(s,2))/(2*r*i)};function oW(e,t,n,r){const[[i,s],[l,c]]=t,[h,p]=nW(e);if(i===l&&s===c)return ay()([[0,0],[h,p]]);const v=[[i-l,s-c]].concat(n.length?n:[[0,0]]),y=[r[0]-l,r[1]-c],[b,T]=v;if(iW(y,b,T)>0){const M=(()=>{const{min:R,max:I}=e.getLocalBounds(),N=b[0]+(b[1]-y[1])*(b[1]-0)/(b[0]-y[0]);return I[0]<y[0]?Math.min(I[0],N):Math.max(R[0],N)})();v.splice(1,1,[M,0])}return ay()(v)}const UD=xb(e=>{const t=e.attributes,{className:n,class:r,transform:i,rotate:s,labelTransform:l,labelTransformOrigin:c,x:h,y:p,x0:v=h,y0:y=p,text:b,background:T,connector:M,startMarker:R,endMarker:I,coordCenter:N,innerHTML:z}=t,H=kM(t,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(e.style.transform=`translate(${h}, ${p})`,[h,p,v,y].some(gt=>!(0,yu.Z)(gt))){e.children.forEach(gt=>gt.remove());return}const X=Eo(H,"background"),{padding:Y}=X,ne=kM(X,["padding"]),pe=Eo(H,"connector"),{points:ye=[]}=pe,De=kM(pe,["points"]),Xe=[[+v,+y],[+h,+p]];let Ke;z?Ke=Ra(e).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",z).call(sa,Object.assign({transform:l,transformOrigin:c},H)).node():Ke=Ra(e).maybeAppend("text","text").style("zIndex",0).style("text",b).call(sa,Object.assign({textBaseline:"middle",transform:l,transformOrigin:c},H)).node();const mt=Ra(e).maybeAppend("background","rect").style("zIndex",-1).call(sa,rW(Ke,Y)).call(sa,T?ne:{}).node(),Qe=oW(mt,Xe,ye,N),ut=R&&new du({id:"startMarker",style:Object.assign({x:0,y:0},Eo(H,"startMarker"))}),ct=I&&new du({id:"endMarker",style:Object.assign({x:0,y:0},Eo(H,"endMarker"))});Ra(e).maybeAppend("connector","path").style("zIndex",0).style("d",Qe).style("markerStart",ut).style("markerEnd",ct).call(sa,M?De:{})});function Eb(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function aW(e,t,n,r){const i=t.length/2,s=t.slice(0,i),l=t.slice(i);let c=Eb(s,(T,M)=>Math.abs(T[1]-l[M][1]));c=Math.max(Math.min(c,i-2),1);const h=T=>[s[T][0],(s[T][1]+l[T][1])/2],p=h(c),v=h(c-1),y=h(c+1),b=k0(Ic(y,v))/Math.PI*180;return{x:p[0],y:p[1],transform:`rotate(${b})`,textAlign:"center",textBaseline:"middle"}}function jD(e,t,n,r){const{bounds:i}=n,[[s,l],[c,h]]=i,p=c-s,v=h-l,y=b=>{const{x:T,y:M}=b,R=_w(n.x,p),I=_w(n.y,v);return Object.assign(Object.assign({},b),{x:(R||T)+s,y:(I||M)+l})};return y(e==="left"?{x:0,y:v/2,textAlign:"start",textBaseline:"middle"}:e==="right"?{x:p,y:v/2,textAlign:"end",textBaseline:"middle"}:e==="top"?{x:p/2,y:0,textAlign:"center",textBaseline:"top"}:e==="bottom"?{x:p/2,y:v,textAlign:"center",textBaseline:"bottom"}:e==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:e==="top-right"?{x:p,y:0,textAlign:"end",textBaseline:"top"}:e==="bottom-left"?{x:0,y:v,textAlign:"start",textBaseline:"bottom"}:e==="bottom-right"?{x:p,y:v,textAlign:"end",textBaseline:"bottom"}:{x:p/2,y:v/2,textAlign:"center",textBaseline:"middle"})}function VD(e,t,n,r){const{y:i,y1:s,autoRotate:l,rotateToAlignArc:c}=n,h=r.getCenter(),p=k_(r,t,[i,s]),{innerRadius:v,outerRadius:y,startAngle:b,endAngle:T}=p,M=e==="inside"?(b+T)/2:T,R=zM(M,l,c),I=(()=>{const[N,z]=t,H=v+(y-v)*.5,[X,Y]=e==="inside"?j2(h,M,H):PD(N,z);return{x:X,y:Y}})();return Object.assign(Object.assign({},I),{textAlign:e==="inside"?"center":"start",textBaseline:"middle",rotate:R})}function j2(e,t,n){return[e[0]+Math.sin(t)*n,e[1]-Math.cos(t)*n]}function zM(e,t,n){if(!t)return 0;const r=n?0:Math.sin(e)<0?90:-90;return e/Math.PI*180+r}function sW(e,t,n,r){const{y:i,y1:s,autoRotate:l,rotateToAlignArc:c,radius:h=.5,offset:p=0}=n,v=k_(r,t,[i,s]),{startAngle:y,endAngle:b}=v,T=r.getCenter(),M=(y+b)/2,I={textAlign:"center",textBaseline:"middle",rotate:zM(M,l,c)},{innerRadius:N,outerRadius:z}=v,X=N+(z-N)*h+p,[Y,ne]=j2(T,M,X);return Object.assign({x:Y,y:ne},I)}function HD(e){return e===void 0?null:e}function GD(e,t,n,r){const{bounds:i}=n,[s]=i;return{x:HD(s[0]),y:HD(s[1])}}function og(e,t,n,r){const{bounds:i}=n;return i.length===1?GD(e,t,n,r):(P_(r)?VD:ty(r)?sW:jD)(e,t,n,r)}function lW(e,t,n,r,i){const[s,l]=j2(e,t,n),[c,h]=j2(e,t,r),p=Math.sin(t)>0?1:-1;return[[s,l],[c,h],[c+p*i,h]]}function WD(e,t,n){const r=k_(n,e,[t.y,t.y1]),{innerRadius:i,outerRadius:s}=r;return i+(s-i)}function ZD(e,t,n){const r=k_(n,e,[t.y,t.y1]),{startAngle:i,endAngle:s}=r;return(i+s)/2}function UM(e,t,n,r){const{autoRotate:i,rotateToAlignArc:s,offset:l=0,connector:c=!0,connectorLength:h=l,connectorLength2:p=0,connectorDistance:v=0}=n,y=r.getCenter(),b=ZD(t,n,r),T=Math.sin(b)>0?1:-1,M=zM(b,i,s),R={textAlign:T>0||P_(r)?"start":"end",textBaseline:"middle",rotate:M},I=WD(t,n,r),N=I+(c?h:l),[[z,H],[X,Y],[ne,pe]]=lW(y,b,I,N,c?p:0),ye=c?+v*T:0,De=ne+ye,Xe=pe,Ke={connector:c,connectorPoints:[[X-De,Y-Xe],[ne-De,pe-Xe]]};return Object.assign(Object.assign({x0:z,y0:H,x:ne+ye,y:pe},R),Ke)}function uW(e,t,n,r){const{bounds:i}=n;return i.length===1?GD(e,t,n,r):(P_(r)?VD:ty(r)?UM:jD)(e,t,n,r)}var cW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fW(e,t,n,r){if(!ty(r))return{};const{connectorLength:i,connectorLength2:s,connectorDistance:l}=n,c=cW(UM("outside",t,n,r),[]),h=r.getCenter(),p=WD(t,n,r),v=ZD(t,n,r),y=p+i+s,b=Math.sin(v)>0?1:-1,T=h[0]+(y+ +l)*b,{x:M}=c,R=T-M;return c.x+=R,c.connectorPoints[0][0]-=R,c}var hW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function dW(e,t,n,r){if(!ty(r))return{};const{connectorLength:i,connectorLength2:s,connectorDistance:l}=n,c=hW(UM("outside",t,n,r),[]),{x0:h,y0:p}=c,v=r.getCenter(),b=aM(r)+i,T=bb([h-v[0],p-v[1]]),M=Math.sin(T)>0?1:-1,[R,I]=j2(v,T,b);return c.x=R+(s+l)*M,c.y=I,c}var XD=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function pW(e,t){return e!==void 0?e:ty(t)?"inside":tu(t)?"right":"top"}function vW(e,t,n,r,i){const{position:s}=t,{render:l}=i,c=pW(s,n),p=r[l?"htmlLabel":c==="inside"?"innerLabel":"label"],v=Object.assign({},p,t),y=K[LD(c)];if(!y)throw new Error(`Unknown position: ${c}`);return Object.assign(Object.assign({},p),y(c,e,v,n,i))}const YD=(e,t)=>{const{coordinate:n,theme:r}=t,{render:i}=e;return(s,l)=>{const{text:c,x:h,y:p,transform:v="",transformOrigin:y,className:b=""}=l,T=XD(l,["text","x","y","transform","transformOrigin","className"]),M=vW(s,l,n,r,e),{rotate:R=0,transform:I=""}=M,N=XD(M,["rotate","transform"]);return Ra(new UD).call(sa,N).style("text",`${c}`).style("className",`${b} g2-label`).style("innerHTML",i?i(c,l.datum,l.index):void 0).style("labelTransform",`${I} rotate(${+R}) ${v}`.trim()).style("labelTransformOrigin",y).style("coordCenter",n.getCenter()).call(sa,T).node()}};YD.props={defaultMarker:"point"};function Dc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mW(e,t){return Array.from(t,n=>e[n])}function ag(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,s)=>{for(const l of t){const c=V2(l[i],l[s]);if(c)return c}})):(n=e.map(n),r.sort((i,s)=>V2(n[i],n[s]))),mW(e,r)}return e.sort($D(n))}function $D(e=Dc){if(e===Dc)return V2;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function V2(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var gW=function(e,t){if(!M_(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},qD=gW;function yW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sb(e){let t,n,r;e.length!==2?(t=Dc,n=(c,h)=>Dc(e(c),h),r=(c,h)=>e(c)-h):(t=e===Dc||e===yW?e:_W,n=e,r=e);function i(c,h,p=0,v=c.length){if(p<v){if(t(h,h)!==0)return v;do{const y=p+v>>>1;n(c[y],h)<0?p=y+1:v=y}while(p<v)}return p}function s(c,h,p=0,v=c.length){if(p<v){if(t(h,h)!==0)return v;do{const y=p+v>>>1;n(c[y],h)<=0?p=y+1:v=y}while(p<v)}return p}function l(c,h,p=0,v=c.length){const y=i(c,h,p,v-1);return y>p&&r(c[y-1],h)>-r(c[y],h)?y-1:y}return{left:i,center:l,right:s}}function _W(){return 0}function jM(e){return e===null?NaN:+e}function*bW(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const KD=Sb(Dc),xW=KD.right,EW=KD.left,SW=Sb(jM).center;var wW=xW;function TW(e,t,n){return Math.min(n,Math.max(t,e))}function H2(e){return!!e.getBandWidth}function wb(e,t,n){if(!H2(e))return e.invert(t);const{adjustedRange:r}=e,{domain:i}=e.getOptions(),s=n?-1:0,l=e.getStep(),c=n?r:r.map(v=>v+l),h=EW(c,t),p=TW(h+s,0,i.length-1);return i[p]}function sy(e,t,n){if(!t)return e.getOptions().domain;if(!H2(e)){const h=ag(t);if(!n)return h;const[p]=h,{range:v}=e.getOptions(),[y,b]=v,T=y>b?-1:1,M=e.invert(e.map(p)+T*n);return[p,M]}const{domain:r}=e.getOptions(),i=t[0],s=r.indexOf(i);if(n){const h=s+Math.round(r.length*n);return r.slice(s,h)}const l=t[t.length-1],c=r.indexOf(l);return r.slice(s,c+1)}function oT(e,t,n,r,i,s){const{x:l,y:c}=i,h=(T,M)=>{const[R,I]=s.invert(T);return[wb(l,R,M),wb(c,I,M)]},p=h([e,t],!0),v=h([n,r],!1),y=sy(l,[p[0],v[0]]),b=sy(c,[p[1],v[1]]);return[y,b]}function aT(e,t){const[n,r]=e,i=s=>s.getStep?s.getStep():0;return[t.map(n),t.map(r)+i(t)]}function AW(e,t,n){const{x:r,y:i}=t,[s,l]=e,c=aT(s,r),h=aT(l,i),p=[c[0],h[0]],v=[c[1],h[1]],[y,b]=n.map(p),[T,M]=n.map(v);return[y,b,T,M]}const QD=Math.abs,dd=Math.atan2,U_=Math.cos,CW=Math.max,VM=Math.min,cm=Math.sin,Tb=Math.sqrt,pd=1e-12,G2=Math.PI,sT=G2/2,OW=2*G2;function MW(e){return e>1?0:e<-1?G2:Math.acos(e)}function JD(e){return e>=1?sT:e<=-1?-sT:Math.asin(e)}function RW(e){return e.innerRadius}function PW(e){return e.outerRadius}function IW(e){return e.startAngle}function DW(e){return e.endAngle}function LW(e){return e&&e.padAngle}function NW(e,t,n,r,i,s,l,c){var h=n-e,p=r-t,v=l-i,y=c-s,b=y*h-v*p;if(!(b*b<pd))return b=(v*(t-s)-y*(e-i))/b,[e+b*h,t+b*p]}function lT(e,t,n,r,i,s,l){var c=e-n,h=t-r,p=(l?s:-s)/Tb(c*c+h*h),v=p*h,y=-p*c,b=e+v,T=t+y,M=n+v,R=r+y,I=(b+M)/2,N=(T+R)/2,z=M-b,H=R-T,X=z*z+H*H,Y=i-s,ne=b*R-M*T,pe=(H<0?-1:1)*Tb(CW(0,Y*Y*X-ne*ne)),ye=(ne*H-z*pe)/X,De=(-ne*z-H*pe)/X,Xe=(ne*H+z*pe)/X,Ke=(-ne*z+H*pe)/X,mt=ye-I,Qe=De-N,ut=Xe-I,ct=Ke-N;return mt*mt+Qe*Qe>ut*ut+ct*ct&&(ye=Xe,De=Ke),{cx:ye,cy:De,x01:-v,y01:-y,x11:ye*(i/Y-1),y11:De*(i/Y-1)}}function uT(){var e=RW,t=PW,n=Wu(0),r=null,i=IW,s=DW,l=LW,c=null,h=BM(p);function p(){var v,y,b=+e.apply(this,arguments),T=+t.apply(this,arguments),M=i.apply(this,arguments)-sT,R=s.apply(this,arguments)-sT,I=QD(R-M),N=R>M;if(c||(c=v=h()),T<b&&(y=T,T=b,b=y),!(T>pd))c.moveTo(0,0);else if(I>OW-pd)c.moveTo(T*U_(M),T*cm(M)),c.arc(0,0,T,M,R,!N),b>pd&&(c.moveTo(b*U_(R),b*cm(R)),c.arc(0,0,b,R,M,N));else{var z=M,H=R,X=M,Y=R,ne=I,pe=I,ye=l.apply(this,arguments)/2,De=ye>pd&&(r?+r.apply(this,arguments):Tb(b*b+T*T)),Xe=VM(QD(T-b)/2,+n.apply(this,arguments)),Ke=Xe,mt=Xe,Qe,ut;if(De>pd){var ct=JD(De/b*cm(ye)),gt=JD(De/T*cm(ye));(ne-=ct*2)>pd?(ct*=N?1:-1,X+=ct,Y-=ct):(ne=0,X=Y=(M+R)/2),(pe-=gt*2)>pd?(gt*=N?1:-1,z+=gt,H-=gt):(pe=0,z=H=(M+R)/2)}var Xt=T*U_(z),Rt=T*cm(z),kt=b*U_(Y),wn=b*cm(Y);if(Xe>pd){var zn=T*U_(H),or=T*cm(H),ir=b*U_(X),Zr=b*cm(X),Ri;if(I<G2)if(Ri=NW(Xt,Rt,ir,Zr,zn,or,kt,wn)){var Qi=Xt-Ri[0],Qr=Rt-Ri[1],ei=zn-Ri[0],Po=or-Ri[1],uo=1/cm(MW((Qi*ei+Qr*Po)/(Tb(Qi*Qi+Qr*Qr)*Tb(ei*ei+Po*Po)))/2),Jo=Tb(Ri[0]*Ri[0]+Ri[1]*Ri[1]);Ke=VM(Xe,(b-Jo)/(uo-1)),mt=VM(Xe,(T-Jo)/(uo+1))}else Ke=mt=0}pe>pd?mt>pd?(Qe=lT(ir,Zr,Xt,Rt,T,mt,N),ut=lT(zn,or,kt,wn,T,mt,N),c.moveTo(Qe.cx+Qe.x01,Qe.cy+Qe.y01),mt<Xe?c.arc(Qe.cx,Qe.cy,mt,dd(Qe.y01,Qe.x01),dd(ut.y01,ut.x01),!N):(c.arc(Qe.cx,Qe.cy,mt,dd(Qe.y01,Qe.x01),dd(Qe.y11,Qe.x11),!N),c.arc(0,0,T,dd(Qe.cy+Qe.y11,Qe.cx+Qe.x11),dd(ut.cy+ut.y11,ut.cx+ut.x11),!N),c.arc(ut.cx,ut.cy,mt,dd(ut.y11,ut.x11),dd(ut.y01,ut.x01),!N))):(c.moveTo(Xt,Rt),c.arc(0,0,T,z,H,!N)):c.moveTo(Xt,Rt),!(b>pd)||!(ne>pd)?c.lineTo(kt,wn):Ke>pd?(Qe=lT(kt,wn,zn,or,b,-Ke,N),ut=lT(Xt,Rt,ir,Zr,b,-Ke,N),c.lineTo(Qe.cx+Qe.x01,Qe.cy+Qe.y01),Ke<Xe?c.arc(Qe.cx,Qe.cy,Ke,dd(Qe.y01,Qe.x01),dd(ut.y01,ut.x01),!N):(c.arc(Qe.cx,Qe.cy,Ke,dd(Qe.y01,Qe.x01),dd(Qe.y11,Qe.x11),!N),c.arc(0,0,b,dd(Qe.cy+Qe.y11,Qe.cx+Qe.x11),dd(ut.cy+ut.y11,ut.cx+ut.x11),N),c.arc(ut.cx,ut.cy,Ke,dd(ut.y11,ut.x11),dd(ut.y01,ut.x01),!N))):c.arc(0,0,b,Y,X,N)}if(c.closePath(),v)return c=null,v+""||null}return p.centroid=function(){var v=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,y=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-G2/2;return[U_(y)*v,cm(y)*v]},p.innerRadius=function(v){return arguments.length?(e=typeof v=="function"?v:Wu(+v),p):e},p.outerRadius=function(v){return arguments.length?(t=typeof v=="function"?v:Wu(+v),p):t},p.cornerRadius=function(v){return arguments.length?(n=typeof v=="function"?v:Wu(+v),p):n},p.padRadius=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:Wu(+v),p):r},p.startAngle=function(v){return arguments.length?(i=typeof v=="function"?v:Wu(+v),p):i},p.endAngle=function(v){return arguments.length?(s=typeof v=="function"?v:Wu(+v),p):s},p.padAngle=function(v){return arguments.length?(l=typeof v=="function"?v:Wu(+v),p):l},p.context=function(v){return arguments.length?(c=v==null?null:v,p):c},p}var cT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function eL(e,t,n,r,i={}){const{inset:s=0,radius:l=0,insetLeft:c=s,insetTop:h=s,insetRight:p=s,insetBottom:v=s,radiusBottomLeft:y=l,radiusBottomRight:b=l,radiusTopLeft:T=l,radiusTopRight:M=l,minWidth:R=-1/0,maxWidth:I=1/0,minHeight:N=-1/0}=i,z=cT(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!nu(r)&&!Nw(r)){const ye=!!tu(r),[De,,Xe]=ye?rT(t):t,[Ke,mt]=De,[Qe,ut]=Ic(Xe,De),ct=Qe>0?Ke:Ke+Qe,gt=ut>0?mt:mt+ut,Xt=Math.abs(Qe),Rt=Math.abs(ut),kt=ct+c,wn=gt+h,zn=Xt-(c+p),or=Rt-(h+v),ir=ye?fb(zn,N,1/0):fb(zn,R,I),Zr=ye?fb(or,R,I):fb(or,N,1/0),Ri=ye?kt:kt-(ir-zn)/2,Qi=ye?wn-(Zr-or)/2:wn-(Zr-or);return Ra(e.createElement("rect",{})).style("x",Ri).style("y",Qi).style("width",ir).style("height",Zr).style("radius",[T,M,b,y]).call(sa,z).node()}const{y:H,y1:X}=n,Y=r.getCenter(),ne=k_(r,t,[H,X]),pe=uT().cornerRadius(l).padAngle(s*Math.PI/180);return Ra(e.createElement("path",{})).style("d",pe(ne)).style("transform",`translate(${Y[0]}, ${Y[1]})`).style("radius",l).style("inset",s).call(sa,z).node()}const W2=(e,t)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:i=!0,last:s=!0}=e,l=cT(e,["colorAttribute","opacityAttribute","first","last"]),{coordinate:c,document:h}=t;return(p,v,y)=>{const{color:b,radius:T=0}=y,M=cT(y,["color","radius"]),R=M.lineWidth||1,{stroke:I,radius:N=T,radiusTopLeft:z=N,radiusTopRight:H=N,radiusBottomRight:X=N,radiusBottomLeft:Y=N,innerRadius:ne=0,innerRadiusTopLeft:pe=ne,innerRadiusTopRight:ye=ne,innerRadiusBottomRight:De=ne,innerRadiusBottomLeft:Xe=ne,lineWidth:Ke=n==="stroke"||I?R:0,inset:mt=0,insetLeft:Qe=mt,insetRight:ut=mt,insetBottom:ct=mt,insetTop:gt=mt,minWidth:Xt,maxWidth:Rt,minHeight:kt}=l,wn=cT(l,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:zn=b,opacity:or}=v,ir=[i?z:pe,i?H:ye,s?X:De,s?Y:Xe],Zr=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];tu(c)&&Zr.push(Zr.shift());const Ri=Object.assign(Object.assign({radius:N},Object.fromEntries(Zr.map((Qi,Qr)=>[Qi,ir[Qr]]))),{inset:mt,insetLeft:Qe,insetRight:ut,insetBottom:ct,insetTop:gt,minWidth:Xt,maxWidth:Rt,minHeight:kt});return Ra(eL(h,p,v,c,Ri)).call(sa,M).style("fill","transparent").style(n,zn).style(DM(e),or).style("lineWidth",Ke).style("stroke",I===void 0?zn:I).call(sa,wn).node()}};W2.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const FW={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function BW(e,t){var n;return(n=e.style[t])!==null&&n!==void 0?n:FW[t]}function HM(e,t,n,r){e.style[t]=n,r&&e.children.forEach(i=>HM(i,t,n,r))}function GM(e){HM(e,"visibility","hidden",!0)}function WM(e){HM(e,"visibility","visible",!0)}var Z2=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ly(e){return Ra(e).selectAll(`.${va}`).nodes().filter(t=>!t.__removed__)}function tL(e,t){return ZM(e,t).flatMap(({container:n})=>ly(n))}function ZM(e,t){return t.filter(n=>n!==e&&n.options.parentKey===e.options.key)}function fm(e){return Ra(e).select(`.${qo}`).node()}function nL(e){if(e.tagName==="g")return e.getRenderBounds();const t=e.getGeometryBounds(),n=new Pu;return n.setFromTransformedAABB(t,e.getWorldTransform()),n}function XM(e,t){const{offsetX:n,offsetY:r}=t,i=nL(e),{min:[s,l],max:[c,h]}=i,p=n<s||n>c,v=r<l||r>h;return p||v?null:[n-s,r-l]}function YM(e,t){const{offsetX:n,offsetY:r}=t,[i,s,l,c]=kW(e);return[Math.min(l,Math.max(i,n))-i,Math.min(c,Math.max(s,r))-s]}function kW(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,s]}=t;return[n,r,i,s]}function rL(e){return t=>t.__data__.color}function $M(e){return t=>t.__data__.x}function j_(e){const t=Array.isArray(e)?e:[e],n=new Map(t.flatMap(r=>Array.from(r.markState.keys()).map(s=>[fT(r.key,s.key),s.data])));return r=>{const{index:i,markKey:s,viewKey:l}=r.__data__;return n.get(fT(l,s))[i]}}function sg(e,t=(r,i)=>r,n=(r,i,s)=>r.setAttribute(i,s)){const r="__states__",i="__ordinal__",s=v=>{const{[r]:y=[],[i]:b={}}=v,T=y.reduce((M,R)=>Object.assign(Object.assign({},M),e[R]),b);if(Object.keys(T).length!==0){for(const[M,R]of Object.entries(T)){const I=BW(v,M),N=t(R,v);n(v,M,N),M in b||(b[M]=I)}v[i]=b}},l=v=>{v[r]||(v[r]=[])};return{setState:(v,...y)=>{l(v),v[r]=[...y],s(v)},removeState:(v,...y)=>{l(v);for(const b of y){const T=v[r].indexOf(b);T!==-1&&v[r].splice(T,1)}s(v)},hasState:(v,y)=>(l(v),v[r].indexOf(y)!==-1)}}function zW(e){return e===void 0?!0:typeof e!="object"?!1:Object.keys(e).length===0}function fT(e,t){return`${e},${t}`}function Ab(e,t){const r=(Array.isArray(e)?e:[e]).flatMap(s=>s.marks.map(l=>[fT(s.key,l.key),l.state])),i={};for(const s of t){const[l,c]=Array.isArray(s)?s:[s,{}];i[l]=r.reduce((h,p)=>{const[v,y={}]=p,b=zW(y[l])?c:y[l];for(const[T,M]of Object.entries(b)){const R=h[T],I=(N,z,H,X)=>{const Y=fT(X.__data__.viewKey,X.__data__.markKey);return v!==Y?R==null?void 0:R(N,z,H,X):typeof M!="function"?M:M(N,z,H,X)};h[T]=I}return h},{})}return i}function X2(e,t){const n=new Map(e.map((i,s)=>[i,s])),r=t?e.map(t):e;return(i,s)=>{if(typeof i!="function")return i;const l=n.get(s),c=t?t(s):s;return i(c,l,r,s)}}function iL(e){var{link:t=!1,valueof:n=(v,y)=>v,coordinate:r}=e,i=Z2(e,["link","valueof","coordinate"]);const s="element-link";if(!t)return[()=>{},()=>{}];const l=v=>v.__data__.points,c=(v,y)=>{const[,b,T]=v,[M,,,R]=y;return[b,M,R,T]};return[v=>{var y;if(v.length<=1)return;const b=ag(v,(T,M)=>{const{x:R}=T.__data__,{x:I}=M.__data__;return R-I});for(let T=1;T<b.length;T++){const M=z0(),R=b[T-1],I=b[T],[N,z,H,X]=c(l(R),l(I));M.moveTo(...N),M.lineTo(...z),M.lineTo(...H),M.lineTo(...X),M.closePath();const Y=om(i,De=>n(De,R)),{fill:ne=R.getAttribute("fill")}=Y,pe=Z2(Y,["fill"]),ye=new Ki({className:s,style:Object.assign({d:M.toString(),fill:ne,zIndex:-2},pe)});(y=R.link)===null||y===void 0||y.remove(),R.parentNode.appendChild(ye),R.link=ye}},v=>{var y;(y=v.link)===null||y===void 0||y.remove(),v.link=null}]}function oL(e,t,n){const r=i=>{const{transform:s}=e.style;return s?`${s} ${i}`:i};if(nu(n)){const{points:i}=e.__data__,[s,l]=tu(n)?rT(i):i,c=n.getCenter(),h=Ic(s,c),p=Ic(l,c),v=k0(h),y=RD(h,p),b=v+y/2,T=t*Math.cos(b),M=t*Math.sin(b);return r(`translate(${T}, ${M})`)}return tu(n)?r(`translate(${t}, 0)`):r(`translate(0, ${-t})`)}function aL(e){var{document:t,background:n,scale:r,coordinate:i,valueof:s}=e,l=Z2(e,["document","background","scale","coordinate","valueof"]);const c="element-background";if(!n)return[()=>{},()=>{}];const h=(N,z,H)=>{const X=N.invert(z),Y=z+N.getBandWidth(X)/2,ne=N.getStep(X)/2,pe=ne*H;return[Y-ne+pe,Y+ne-pe]},p=(N,z)=>{const{x:H}=r;if(!H2(H))return[0,1];const{__data__:X}=N,{x:Y}=X,[ne,pe]=h(H,Y,z);return[ne,pe]},v=(N,z)=>{const{y:H}=r;if(!H2(H))return[0,1];const{__data__:X}=N,{y:Y}=X,[ne,pe]=h(H,Y,z);return[ne,pe]},y=(N,z)=>{const{padding:H}=z,[X,Y]=p(N,H),[ne,pe]=v(N,H),ye=[[X,ne],[Y,ne],[Y,pe],[X,pe]].map(mt=>i.map(mt)),{__data__:De}=N,{y:Xe,y1:Ke}=De;return eL(t,ye,{y:Xe,y1:Ke},i,z)},b=(N,z)=>{const{transform:H="scale(1.2, 1.2)",transformOrigin:X="center center",stroke:Y=""}=z,ne=Z2(z,["transform","transformOrigin","stroke"]),pe=Object.assign({transform:H,transformOrigin:X,stroke:Y},ne),ye=N.cloneNode(!0);for(const[De,Xe]of Object.entries(pe))ye.style[De]=Xe;return ye},T=()=>{const{x:N,y:z}=r;return[N,z].some(H2)};return[N=>{N.background&&N.background.remove();const z=om(l,mt=>s(mt,N)),{fill:H="#CCD6EC",fillOpacity:X=.3,zIndex:Y=-2,padding:ne=.001,lineWidth:pe=0}=z,ye=Z2(z,["fill","fillOpacity","zIndex","padding","lineWidth"]),De=Object.assign(Object.assign({},ye),{fill:H,fillOpacity:X,zIndex:Y,padding:ne,lineWidth:pe}),Ke=(T()?y:b)(N,De);Ke.className=c,N.parentNode.parentNode.appendChild(Ke),N.background=Ke},N=>{var z;(z=N.background)===null||z===void 0||z.remove(),N.background=null},N=>N.className===c]}function uy(e,t){const r=e.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(e.cursor=r.style.cursor,r.style.cursor=t)}function UW(e){uy(e,e.cursor)}function qM(e,t,n){return e.find(r=>Object.entries(t).every(([i,s])=>n(r)[i]===s))}function hT(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function Y2(e,t=!1){const n=qD(e,r=>!!r).map((r,i)=>[i===0?"M":"L",...r]);return t&&n.push(["Z"]),n}function sL(e){return e.querySelectorAll(".element")}function jW(e,t,n=0){const r=[["M",...t[1]]],i=hT(e,t[1]),s=hT(e,t[0]);return i===0?r.push(["L",...t[3]],["A",s,s,0,n,1,...t[0]],["Z"]):r.push(["A",i,i,0,n,0,...t[2]],["L",...t[3]],["A",s,s,0,n,1,...t[0]],["Z"]),r}function dT(e,t){if(t(e))return e;let n=e.parent;for(;n&&!t(n);)n=n.parent;return n}function lL(e,t){const{__data__:n}=e,{markKey:r,index:i,seriesIndex:s}=n,{markState:l}=t,c=Array.from(l.keys()).find(h=>h.key===r);if(c)return s?s.map(h=>c.data[h]):c.data[i]}function VW(e){return dT(e,t=>t.className==="component")}function HW(e){return dT(e,t=>t.className==="element")}function GW(e){return dT(e,t=>t.className==="label")}function ph(e,t,n,r=i=>!0){return i=>{if(!r(i))return;n.emit(`plot:${e}`,i);const{target:s}=i;if(!s)return;const{className:l}=s;if(l==="plot")return;const c=HW(s),h=VW(s),p=GW(s),v=c||h||p;if(!v)return;const{className:y,markType:b}=v,T=Object.assign(Object.assign({},i),{nativeEvent:!0});y==="element"?(T.data={data:lL(v,t)},n.emit(`element:${e}`,T),n.emit(`${b}:${e}`,T)):y==="label"?(T.data={data:v.attributes.datum},n.emit(`label:${e}`,T),n.emit(`${l}:${e}`,T)):(n.emit(`component:${e}`,T),n.emit(`${l}:${e}`,T))}}function uL(){return(e,t,n)=>{const{container:r,view:i}=e,s=ph(wl.CLICK,i,n,pe=>pe.detail===1),l=ph(wl.DBLCLICK,i,n,pe=>pe.detail===2),c=ph(wl.POINTER_TAP,i,n),h=ph(wl.POINTER_DOWN,i,n),p=ph(wl.POINTER_UP,i,n),v=ph(wl.POINTER_OVER,i,n),y=ph(wl.POINTER_OUT,i,n),b=ph(wl.POINTER_MOVE,i,n),T=ph(wl.POINTER_ENTER,i,n),M=ph(wl.POINTER_LEAVE,i,n),R=ph(wl.POINTER_UPOUTSIDE,i,n),I=ph(wl.DRAG_START,i,n),N=ph(wl.DRAG,i,n),z=ph(wl.DRAG_END,i,n),H=ph(wl.DRAG_ENTER,i,n),X=ph(wl.DRAG_LEAVE,i,n),Y=ph(wl.DRAG_OVER,i,n),ne=ph(wl.DROP,i,n);return r.addEventListener("click",s),r.addEventListener("click",l),r.addEventListener("pointertap",c),r.addEventListener("pointerdown",h),r.addEventListener("pointerup",p),r.addEventListener("pointerover",v),r.addEventListener("pointerout",y),r.addEventListener("pointermove",b),r.addEventListener("pointerenter",T),r.addEventListener("pointerleave",M),r.addEventListener("pointerupoutside",R),r.addEventListener("dragstart",I),r.addEventListener("drag",N),r.addEventListener("dragend",z),r.addEventListener("dragenter",H),r.addEventListener("dragleave",X),r.addEventListener("dragover",Y),r.addEventListener("drop",ne),()=>{r.removeEventListener("click",s),r.removeEventListener("click",l),r.removeEventListener("pointertap",c),r.removeEventListener("pointerdown",h),r.removeEventListener("pointerup",p),r.removeEventListener("pointerover",v),r.removeEventListener("pointerout",y),r.removeEventListener("pointermove",b),r.removeEventListener("pointerenter",T),r.removeEventListener("pointerleave",M),r.removeEventListener("pointerupoutside",R),r.removeEventListener("dragstart",I),r.removeEventListener("drag",N),r.removeEventListener("dragend",z),r.removeEventListener("dragenter",H),r.removeEventListener("dragleave",X),r.removeEventListener("dragover",Y),r.removeEventListener("drop",ne)}}}uL.props={reapplyWhenUpdate:!0};function WW(){return{"component.axisRadar":cD,"component.axisLinear":ry,"component.axisArc":uD,"component.legendContinuousBlock":AD,"component.legendContinuousBlockSize":CD,"component.legendContinuousSize":MM,"interaction.event":uL,"composition.mark":OD,"composition.view":MD,"shape.label.label":YD}}var ZW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Zu(e,t){const n=Object.assign(Object.assign({},WW()),t),r=s=>{if(typeof s!="string")return s;const l=`${e}.${s}`;return n[l]||Kg(`Unknown Component: ${l}`)};return[(s,l)=>{const{type:c}=s,h=ZW(s,["type"]);c||Kg("Plot type is required!");const p=r(c);return p==null?void 0:p(h,l)},r]}function cL(e){const{canvas:t,group:n}=e;return(t==null?void 0:t.document)||(n==null?void 0:n.ownerDocument)||Kg("Cannot find library document")}var fL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function XW(e,t,n){const[r]=Zu("coordinate",n),{innerHeight:i,innerWidth:s,insetLeft:l,insetTop:c,insetRight:h,insetBottom:p}=e,{coordinates:v=[]}=t,y=JW(v),b=y[0].type==="cartesian3D",T=Object.assign(Object.assign({},e),{x:l,y:c,width:s-l-h,height:i-p-c,transformations:y.flatMap(r)});return b?new Lw.Coordinate3D(T):new Lw.Coordinate(T)}function hL(e,t){const{coordinate:n={}}=e,r=fL(e,["coordinate"]),{type:i,transform:s=[]}=n,l=fL(n,["type","transform"]);if(!i)return Object.assign(Object.assign({},r),{coordinates:s});const[,c]=Zu("coordinate",t),{transform:h=!1}=c(i).props||{};if(h)throw new Error(`Unknown coordinate: ${i}.`);return Object.assign(Object.assign({},r),{coordinates:[Object.assign({type:i},l),...s]})}function Tv(e,t){return e.filter(n=>n.type===t)}function V_(e){return Tv(e,"polar").length>0}function YW(e){return Tv(e,"helix").length>0}function Cb(e){return Tv(e,"transpose").length%2===1}function $W(e){return Tv(e,"parallel").length>0}function dL(e){return Tv(e,"theta").length>0}function qW(e){return Tv(e,"reflect").length>0}function $2(e){return Tv(e,"radial").length>0}function KW(e){return Tv(e,"radar").length>0}function QW(e){return Tv(e,"reflectY").length>0}function JW(e){return e.find(t=>t.type==="cartesian"||t.type==="cartesian3D")?e:[...e,{type:"cartesian"}]}function Bs(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var eZ=Bs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),tZ=Bs("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),nZ=Bs("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),rZ=Bs("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),iZ=Bs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),oZ=Bs("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),aZ=Bs("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),sZ=Bs("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),lZ=Bs("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),uZ=Bs("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),cZ=Bs("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function pT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function KM(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ob(){}var H_=.7,Mb=1/H_,Rb="\\s*([+-]?\\d+)\\s*",q2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fZ=/^#([0-9a-f]{3,8})$/,hZ=new RegExp("^rgb\\(".concat(Rb,",").concat(Rb,",").concat(Rb,"\\)$")),dZ=new RegExp("^rgb\\(".concat(hm,",").concat(hm,",").concat(hm,"\\)$")),pZ=new RegExp("^rgba\\(".concat(Rb,",").concat(Rb,",").concat(Rb,",").concat(q2,"\\)$")),vZ=new RegExp("^rgba\\(".concat(hm,",").concat(hm,",").concat(hm,",").concat(q2,"\\)$")),mZ=new RegExp("^hsl\\(".concat(q2,",").concat(hm,",").concat(hm,"\\)$")),gZ=new RegExp("^hsla\\(".concat(q2,",").concat(hm,",").concat(hm,",").concat(q2,"\\)$")),pL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pT(Ob,QM,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:vL,formatHex:vL,formatHex8:yZ,formatHsl:_Z,formatRgb:mL,toString:mL});function vL(){return this.rgb().formatHex()}function yZ(){return this.rgb().formatHex8()}function _Z(){return EL(this).formatHsl()}function mL(){return this.rgb().formatRgb()}function QM(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gL(t):n===3?new vd(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?vT(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?vT(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hZ.exec(e))?new vd(t[1],t[2],t[3],1):(t=dZ.exec(e))?new vd(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pZ.exec(e))?vT(t[1],t[2],t[3],t[4]):(t=vZ.exec(e))?vT(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mZ.exec(e))?xL(t[1],t[2]/100,t[3]/100,1):(t=gZ.exec(e))?xL(t[1],t[2]/100,t[3]/100,t[4]):pL.hasOwnProperty(e)?gL(pL[e]):e==="transparent"?new vd(NaN,NaN,NaN,0):null}function gL(e){return new vd(e>>16&255,e>>8&255,e&255,1)}function vT(e,t,n,r){return r<=0&&(e=t=n=NaN),new vd(e,t,n,r)}function yL(e){return e instanceof Ob||(e=QM(e)),e?(e=e.rgb(),new vd(e.r,e.g,e.b,e.opacity)):new vd}function K2(e,t,n,r){return arguments.length===1?yL(e):new vd(e,t,n,r==null?1:r)}function vd(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}pT(vd,K2,KM(Ob,{brighter:function(t){return t=t==null?Mb:Math.pow(Mb,t),new vd(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?H_:Math.pow(H_,t),new vd(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new vd(G_(this.r),G_(this.g),G_(this.b),mT(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_L,formatHex:_L,formatHex8:bZ,formatRgb:bL,toString:bL}));function _L(){return"#".concat(W_(this.r)).concat(W_(this.g)).concat(W_(this.b))}function bZ(){return"#".concat(W_(this.r)).concat(W_(this.g)).concat(W_(this.b)).concat(W_((isNaN(this.opacity)?1:this.opacity)*255))}function bL(){var e=mT(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(G_(this.r),", ").concat(G_(this.g),", ").concat(G_(this.b)).concat(e===1?")":", ".concat(e,")"))}function mT(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function G_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function W_(e){return e=G_(e),(e<16?"0":"")+e.toString(16)}function xL(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Av(e,t,n,r)}function EL(e){if(e instanceof Av)return new Av(e.h,e.s,e.l,e.opacity);if(e instanceof Ob||(e=QM(e)),!e)return new Av;if(e instanceof Av)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,c=s-i,h=(s+i)/2;return c?(t===s?l=(n-r)/c+(n<r)*6:n===s?l=(r-t)/c+2:l=(t-n)/c+4,c/=h<.5?s+i:2-s-i,l*=60):c=h>0&&h<1?0:l,new Av(l,c,h,e.opacity)}function xZ(e,t,n,r){return arguments.length===1?EL(e):new Av(e,t,n,r==null?1:r)}function Av(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pT(Av,xZ,KM(Ob,{brighter:function(t){return t=t==null?Mb:Math.pow(Mb,t),new Av(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?H_:Math.pow(H_,t),new Av(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new vd(JM(t>=240?t-240:t+120,s,i),JM(t,s,i),JM(t<120?t+240:t-120,s,i),this.opacity)},clamp:function(){return new Av(SL(this.h),gT(this.s),gT(this.l),mT(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=mT(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(SL(this.h),", ").concat(gT(this.s)*100,"%, ").concat(gT(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function SL(e){return e=(e||0)%360,e<0?e+360:e}function gT(e){return Math.max(0,Math.min(1,e||0))}function JM(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function wL(e,t,n,r,i){var s=e*e,l=s*e;return((1-3*e+3*s-l)*t+(4-6*s+3*l)*n+(1+3*e+3*s-3*l)*r+l*i)/6}function EZ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],l=r>0?e[r-1]:2*i-s,c=r<t-1?e[r+2]:2*s-i;return wL((n-r/t)*t,l,i,s,c)}}function SZ(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],l=e[(r+1)%t],c=e[(r+2)%t];return wL((n-r/t)*t,i,s,l,c)}}var eR=function(e){return function(){return e}};function TL(e,t){return function(n){return e+n*t}}function wZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function TZ(e,t){var n=t-e;return n?TL(e,n>180||n<-180?n-360*Math.round(n/360):n):eR(isNaN(e)?t:e)}function AZ(e){return(e=+e)==1?Pb:function(t,n){return n-t?wZ(t,n,e):eR(isNaN(t)?n:t)}}function Pb(e,t){var n=t-e;return n?TL(e,n):eR(isNaN(e)?t:e)}var A0e=function e(t){var n=AZ(t);function r(i,s){var l=n((i=K2(i)).r,(s=K2(s)).r),c=n(i.g,s.g),h=n(i.b,s.b),p=Pb(i.opacity,s.opacity);return function(v){return i.r=l(v),i.g=c(v),i.b=h(v),i.opacity=p(v),i+""}}return r.gamma=e,r}(1);function AL(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),l,c;for(l=0;l<n;++l)c=K2(t[l]),r[l]=c.r||0,i[l]=c.g||0,s[l]=c.b||0;return r=e(r),i=e(i),s=e(s),c.opacity=1,function(h){return c.r=r(h),c.g=i(h),c.b=s(h),c+""}}}var CZ=AL(EZ),C0e=AL(SZ),Fu=e=>CZ(e[e.length-1]),CL=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Bs),OZ=Fu(CL),OL=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Bs),MZ=Fu(OL),ML=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Bs),RZ=Fu(ML),RL=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Bs),PZ=Fu(RL),PL=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Bs),IZ=Fu(PL),IL=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Bs),DZ=Fu(IL),DL=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Bs),LZ=Fu(DL),LL=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Bs),NZ=Fu(LL),NL=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Bs),FZ=Fu(NL),FL=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Bs),BZ=Fu(FL),BL=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Bs),kZ=Fu(BL),kL=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Bs),zZ=Fu(kL),zL=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Bs),UZ=Fu(zL),UL=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Bs),jZ=Fu(UL),jL=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Bs),VZ=Fu(jL),VL=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Bs),HZ=Fu(VL),HL=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Bs),GZ=Fu(HL),GL=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Bs),WZ=Fu(GL),WL=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Bs),ZZ=Fu(WL),ZL=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Bs),XZ=Fu(ZL),XL=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Bs),YZ=Fu(XL),YL=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Bs),$Z=Fu(YL),$L=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Bs),qZ=Fu($L),qL=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Bs),KZ=Fu(qL),KL=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Bs),QZ=Fu(KL),QL=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Bs),JZ=Fu(QL),JL=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Bs),eX=Fu(JL);function tX(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var nX=Math.PI/180,rX=180/Math.PI,e6=-.14861,tR=1.78277,nR=-.29227,yT=-.90649,Q2=1.97294,t6=Q2*yT,n6=Q2*tR,r6=tR*nR-yT*e6;function iX(e){if(e instanceof Z_)return new Z_(e.h,e.s,e.l,e.opacity);e instanceof vd||(e=yL(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(r6*r+t6*t-n6*n)/(r6+t6-n6),s=r-i,l=(Q2*(n-i)-nR*s)/yT,c=Math.sqrt(l*l+s*s)/(Q2*i*(1-i)),h=c?Math.atan2(l,s)*rX-120:NaN;return new Z_(h<0?h+360:h,c,i,e.opacity)}function dm(e,t,n,r){return arguments.length===1?iX(e):new Z_(e,t,n,r==null?1:r)}function Z_(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pT(Z_,dm,KM(Ob,{brighter:function(t){return t=t==null?Mb:Math.pow(Mb,t),new Z_(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?H_:Math.pow(H_,t),new Z_(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*nX,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(t),s=Math.sin(t);return new vd(255*(n+r*(e6*i+tR*s)),255*(n+r*(nR*i+yT*s)),255*(n+r*(Q2*i)),this.opacity)}}));function i6(e){return function t(n){n=+n;function r(i,s){var l=e((i=dm(i)).h,(s=dm(s)).h),c=Pb(i.s,s.s),h=Pb(i.l,s.l),p=Pb(i.opacity,s.opacity);return function(v){return i.h=l(v),i.s=c(v),i.l=h(Math.pow(v,n)),i.opacity=p(v),i+""}}return r.gamma=t,r}(1)}var O0e=i6(TZ),rR=i6(Pb),oX=rR(dm(300,.5,0),dm(-240,.5,1)),aX=rR(dm(-100,.75,.35),dm(80,1.5,.8)),sX=rR(dm(260,.75,.35),dm(80,1.5,.8)),_T=dm();function lX(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return _T.h=360*e-100,_T.s=1.5-1.5*t,_T.l=.8-.9*t,_T+""}var bT=K2(),uX=Math.PI/3,cX=Math.PI*2/3;function fX(e){var t;return e=(.5-e)*Math.PI,bT.r=255*(t=Math.sin(e))*t,bT.g=255*(t=Math.sin(e+uX))*t,bT.b=255*(t=Math.sin(e+cX))*t,bT+""}function hX(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function xT(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var dX=xT(Bs("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),pX=xT(Bs("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),vX=xT(Bs("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),mX=xT(Bs("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function gX(e,t,n,r,i,s){const{guide:l={}}=n,c=AX(e,t,n);if(typeof c!="string")return n;const h=CX(c,e,t,n),p=SX(c,h,n);return Object.assign(Object.assign(Object.assign({},n),MX(c,e,t,n,r)),{domain:p,range:OX(c,e,t,n,p,i,s),expectedDomain:h,guide:l,name:e,type:c})}function yX(e,t){const n={};for(const r of e){const{values:i,name:s}=r,l=t[s];for(const c of i){const{name:h,value:p}=c;n[h]=p.map(v=>l.map(v))}}return n}function _X(e,t){var n;const{components:r=[]}=t,i=["scale","encode","axis","legend","data","transform"],s=Array.from(new Set(e.flatMap(c=>c.channels.map(h=>h.scale)))),l=new Map(s.map(c=>[c.name,c]));for(const c of r){const h=EX(c);for(const p of h){const v=l.get(p),y=((n=c.scale)===null||n===void 0?void 0:n[p])||{},{independent:b=!1}=y;if(v&&!b){const{guide:T}=v,M=typeof T=="boolean"?{}:T;v.guide=hi({},M,c),Object.assign(v,y)}else{const T=Object.assign(Object.assign({},y),{expectedDomain:y.domain,name:p,guide:B_(c,i)});s.push(T)}}}return s}function bX(e){if(!e||!Array.isArray(e))return[im,im];let t,n;return[s=>{var l;t=s.map.bind(s),n=(l=s.invert)===null||l===void 0?void 0:l.bind(s);const c=e.filter(([b])=>typeof b=="function"),h=e.filter(([b])=>typeof b!="function"),p=new Map(h);if(s.map=b=>{for(const[T,M]of c)if(T(b))return M;return p.has(b)?p.get(b):t(b)},!n)return s;const v=new Map(h.map(([b,T])=>[T,b])),y=new Map(c.map(([b,T])=>[T,b]));return s.invert=b=>y.has(b)?b:v.has(b)?v.get(b):n(b),s},s=>(t!==null&&(s.map=t),n!==null&&(s.invert=n),s)]}function o6(e,t){const n=Object.keys(e);for(const r of Object.values(t)){const{name:i}=r.getOptions();if(!(i in e))e[i]=r;else{const s=n.filter(h=>h.startsWith(i)).map(h=>+(h.replace(i,"")||0)),l=Tl(s)+1,c=`${i}${l}`;e[c]=r,r.getOptions().key=c}}return e}function a6(e,t){const[n]=Zu("scale",t),{relations:r}=e,[i]=bX(r),s=n(e);return i(s)}function xX(e){const t=e.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));s6(t,"x"),s6(t,"y")}function EX(e){const{channels:t=[],type:n,scale:r={}}=e,i=["shape","color","opacity","size"];return t.length!==0?t:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(s=>i.includes(s)):[]}function s6(e,t){const n=e.filter(({name:s,facet:l=!0})=>l&&s===t),r=n.flatMap(s=>s.domain),i=n.every(l6)?ig(r):n.every(u6)?Array.from(new Set(r)):null;if(i!==null)for(const s of n)s.domain=i}function SX(e,t,n){const{ratio:r}=n;return r==null?t:l6({type:e})?wX(t,r,e):u6({type:e})?TX(t,r):t}function wX(e,t,n){const r=e.map(Number),i=new hd({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*t]});return n==="time"?e.map(s=>new Date(i.map(s))):e.map(s=>i.map(s))}function TX(e,t){const n=Math.round(e.length*t);return e.slice(0,n)}function l6(e){const{type:t}=e;return typeof t!="string"?!1:["linear","log","pow","time"].includes(t)}function u6(e){const{type:t}=e;return typeof t!="string"?!1:["band","point","ordinal"].includes(t)}function AX(e,t,n){const{type:r,domain:i,range:s,quantitative:l,ordinal:c}=n;return r!==void 0?r:jX(t)?"identity":typeof s=="string"?"linear":(i||s||[]).length>2?iR(e,c):i!==void 0?d6([i])?iR(e,c):p6(t)?"time":f6(e,s,l):d6(t)?iR(e,c):p6(t)?"time":f6(e,s,l)}function CX(e,t,n,r){const{domain:i}=r;if(i!==void 0)return i;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return h6(FX(n,r),r);case"band":case"ordinal":case"point":return BX(n);case"quantile":return kX(n);case"sequential":return h6(zX(n),r);default:return[]}}function OX(e,t,n,r,i,s,l){const{range:c}=r;if(typeof c=="string")return RX(c);if(c!==void 0)return c;const{rangeMin:h,rangeMax:p}=r;switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":{const v=c6(n,r,i,s,l),[y,b]=UX(t,v);return[h!=null?h:y,p!=null?p:b]}case"band":case"point":{const v=t==="size"?5:0,y=t==="size"?10:1;return[h!=null?h:v,p!=null?p:y]}case"ordinal":return c6(n,r,i,s,l);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function MX(e,t,n,r,i){switch(e){case"linear":case"time":case"log":case"pow":case"sqrt":return DX(i,r);case"band":case"point":return LX(e,t,i,r);case"sequential":return IX(r);default:return r}}function c6(e,t,n,r,i){const[s]=Zu("palette",i),{category10:l,category20:c}=r,h=rM(e.flat()).length<=l.length?l:c,{palette:p=h,offset:v}=t;if(Array.isArray(p))return p;try{return s({type:p})}catch(y){const b=PX(p,n,v);if(b)return b;throw new Error(`Unknown Component: ${p} `)}}function RX(e){return e.split("-")}function PX(e,t,n=r=>r){if(!e)return null;const r=n0(e),i=W[`scheme${r}`],s=W[`interpolate${r}`];if(!i&&!s)return null;if(i){if(!i.some(Array.isArray))return i;const l=i[t.length];if(l)return l}return t.map((l,c)=>s(n(c/t.length)))}function IX(e){const{palette:t="ylGnBu",offset:n}=e,r=n0(t),i=W[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?s=>i(n(s)):i}}function DX(e,t){const{interpolate:n=L2,nice:r=!1,tickCount:i=5}=t;return Object.assign(Object.assign({},t),{interpolate:n,nice:r,tickCount:i})}function LX(e,t,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const i=NX(e,t,n),{paddingInner:s=i,paddingOuter:l=i}=r;return Object.assign(Object.assign({},r),{paddingInner:s,paddingOuter:l,padding:i,unknown:NaN})}function NX(e,t,n){return t==="enterDelay"||t==="enterDuration"||t==="size"?0:e==="band"?dL(n)?0:.1:e==="point"?.5:0}function iR(e,t){return t||(VX(e)?"point":"ordinal")}function f6(e,t,n){return n||(e!=="color"||t?"linear":"sequential")}function h6(e,t){if(e.length===0)return e;const{domainMin:n,domainMax:r}=t,[i,s]=e;return[n!=null?n:i,r!=null?r:s]}function FX(e,t){const{zero:n=!1}=t;let r=1/0,i=-1/0;for(const s of e)for(const l of s)eu(l)&&(r=Math.min(r,+l),i=Math.max(i,+l));return r===1/0?[]:n?[Math.min(0,r),i]:[r,i]}function BX(e){return Array.from(new Set(e.flat()))}function kX(e){return e.flat().sort()}function zX(e){let t=1/0,n=-1/0;for(const r of e)for(const i of r)eu(i)&&(t=Math.min(t,+i),n=Math.max(n,+i));return t===1/0?[]:[t<0?-n:t,n]}function UX(e,t){return e==="enterDelay"?[0,1e3]:e=="enterDuration"?[300,1e3]:e.startsWith("y")||e.startsWith("position")?[1,0]:e==="color"?[nM(t),Cw(t)]:e==="opacity"?[0,1]:e==="size"?[1,10]:[0,1]}function d6(e){return oR(e,t=>{const n=typeof t;return n==="string"||n==="boolean"})}function p6(e){return oR(e,t=>t instanceof Date)}function jX(e){return oR(e,C_)}function oR(e,t){for(const n of e)if(n.some(t))return!0;return!1}function VX(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e.startsWith("size")}function HX(e){return e.startsWith("x")||e.startsWith("y")||e.startsWith("position")||e==="enterDelay"||e==="enterDuration"||e==="updateDelay"||e==="updateDuration"||e==="exitDelay"||e==="exitDuration"}function GX(e){if(!e||!e.type)return!1;if(typeof e.type=="function")return!0;const{type:t,domain:n,range:r,interpolator:i}=e,s=n&&n.length>0,l=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(t)&&s&&l||["sequential"].includes(t)&&s&&(l||i)||["constant","identity"].includes(t)&&l)}const WX={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},ZX={threshold:"threshold",quantize:"quantize",quantile:"quantile"},XX={ordinal:"ordinal",band:"band",point:"point"},YX={constant:"constant"};var cy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $X(e,t,n){const{coordinates:r=[],title:i}=t,[,s]=Zu("component",n),l=e.filter(({guide:v})=>v!==null),c=[],h=oY(t,e,n);if(c.push(...h),i){const{props:v}=s("title"),{defaultPosition:y,defaultOrientation:b,defaultOrder:T,defaultSize:M,defaultCrossPadding:R}=v,I=typeof i=="string"?{title:i}:i;c.push(Object.assign({type:"title",position:y,orientation:b,order:T,crossPadding:R[0],defaultSize:M},I))}return eY(l,r).forEach(([v,y])=>{const{props:b}=s(v),{defaultPosition:T,defaultPlane:M="xy",defaultOrientation:R,defaultSize:I,defaultOrder:N,defaultLength:z,defaultPadding:H=[0,0],defaultCrossPadding:X=[0,0]}=b,Y=hi({},...y),{guide:ne,field:pe}=Y,ye=Array.isArray(ne)?ne:[ne];for(const De of ye){const[Xe,Ke]=rY(v,T,R,De,y,l,r);if(!Xe&&!Ke)continue;const mt=Xe==="left"||Xe==="right",Qe=mt?H[1]:H[0],ut=mt?X[1]:X[0],{size:ct,order:gt=N,length:Xt=z,padding:Rt=Qe,crossPadding:kt=ut}=De;c.push(Object.assign(Object.assign({title:pe},De),{defaultSize:I,length:Xt,position:Xe,plane:M,orientation:Ke,padding:Rt,order:gt,crossPadding:kt,size:ct,type:v,scales:y}))}}),c}function v6(e,t,n,r,i){const[s]=Zu("component",r),{scaleInstances:l,scale:c,bbox:h}=e,p=cy(e,["scaleInstances","scale","bbox"]),v={bbox:h,library:r};return s(p)({coordinate:t,library:r,markState:i,scales:l,theme:n,value:v,scale:c})}function qX(e){return e.map(t=>{const n=hi(t,t.style);return delete n.style,n})}function M0e(e){return e.flatMap(t=>t.type=="group"?t.children:t)}function m6(e,t){const n=["left","right","bottom","top"];return ab(e,({type:s,position:l,group:c})=>n.includes(l)?c===void 0?s.startsWith("legend")?`legend-${l}`:Symbol("independent"):c==="independent"?Symbol("independent"):c:Symbol("independent")).flatMap(([,s])=>{if(s.length===1)return s[0];if(t!==void 0){const v=s.filter(R=>R.length!==void 0).map(R=>R.length),y=Xd(v);if(y>t)return s.forEach(R=>R.group=Symbol("independent")),s;const b=t-y,T=s.length-v.length,M=b/T;s.forEach(R=>{R.length===void 0&&(R.length=M)})}const l=Tl(s,v=>v.size),c=Tl(s,v=>v.order),h=Tl(s,v=>v.crossPadding),p=s[0].position;return{type:"group",size:l,order:c,position:p,children:s,crossPadding:h}})}function KX(e,t){const n=["shape","size","color","opacity"],r=(b,T)=>b==="constant"&&T==="size",i=e.filter(({type:b,name:T})=>typeof b=="string"&&n.includes(T)&&!r(b,T)),s=i.filter(({type:b})=>b==="constant"),l=i.filter(({type:b})=>b!=="constant"),h=ab(l,b=>b.field?b.field:Symbol("independent")).map(([b,T])=>[b,[...T,...s]]).filter(([,b])=>b.some(T=>T.type!=="constant")),p=new Map(h);if(p.size===0)return[];const v=b=>b.sort(([T],[M])=>T.localeCompare(M));return Array.from(p).map(([,b])=>{const M=Mw(b).sort((R,I)=>I.length-R.length).map(R=>({combination:R,option:R.map(I=>[I.name,QX(I)])}));for(const{option:R,combination:I}of M)if(!R.every(N=>N[1]==="constant")&&R.every(N=>N[1]==="discrete"||N[1]==="constant"))return["legendCategory",I];for(const[R,I]of hb)for(const{option:N,combination:z}of M)if(I.some(H=>Pw(v(H),v(N))))return[R,z];return null}).filter(eu)}function QX(e){const{type:t}=e;return typeof t!="string"?null:t in WX?"continuous":t in XX?"discrete":t in ZX?"distribution":t in YX?"constant":null}function JX(e,t){return e.map(n=>{const{name:r}=n;if(YW(t)||dL(t)||Cb(t)&&(V_(t)||$2(t)))return null;if(r.startsWith("x"))return V_(t)?["axisArc",[n]]:$2(t)?["axisLinear",[n]]:[Cb(t)?"axisY":"axisX",[n]];if(r.startsWith("y"))return V_(t)?["axisLinear",[n]]:$2(t)?["axisArc",[n]]:[Cb(t)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(KW(t))return["axisRadar",[n]];if(!V_(t))return["axisY",[n]]}return null}).filter(eu)}function eY(e,t){const n=e.filter(r=>GX(r));return[...KX(n,t),...JX(n,t)]}function aR(e){const t=Tv(e,"polar");if(t.length){const r=t[t.length-1],{startAngle:i,endAngle:s}=Iw(r);return[i,s]}const n=Tv(e,"radial");if(n.length){const r=n[n.length-1],{startAngle:i,endAngle:s}=Dw(r);return[i,s]}return[-Math.PI/2,Math.PI/2*3]}function tY(e){const t=/position(\d*)/g.exec(e);return t?+t[1]:null}function nY(e,t,n,r,i){const{name:s}=n[0];if(e==="axisRadar"){const l=r.filter(y=>y.name.startsWith("position")),c=tY(s);if(s===l.slice(-1)[0].name||c===null)return[null,null];const[h,p]=aR(i);return["center",(p-h)/(l.length-1)*c+h]}if(e==="axisY"&&$W(i))return Cb(i)?["center","horizontal"]:["center","vertical"];if(e==="axisLinear"){const[l]=aR(i);return["center",l]}return e==="axisArc"?t[0]==="inner"?["inner",null]:["outer",null]:V_(i)?["center",null]:$2(i)?["center",null]:e==="axisX"&&qW(i)||e==="axisX"&&QW(i)?["top",null]:t}function rY(e,t,n,r,i,s,l){const[c]=aR(l),h=[r.position||t,c!=null?c:n];return typeof e=="string"&&e.startsWith("axis")?nY(e,h,i,s,l):typeof e=="string"&&e.startsWith("legend")&&V_(l)&&r.position==="center"?["center","vertical"]:h}function iY(e,t,n=[]){return e==="x"?Cb(n)?`${t}Y`:`${t}X`:e==="y"?Cb(n)?`${t}X`:`${t}Y`:null}function oY(e,t,n){const[,r]=Zu("component",n),{coordinates:i}=e;function s(l,c,h,p){const v=iY(c,l,i);if(!p||!v)return;const{props:y}=r(v),{defaultPosition:b,defaultSize:T,defaultOrder:M,defaultCrossPadding:[R]}=y;return Object.assign(Object.assign({position:b,defaultSize:T,order:M,type:v,crossPadding:R},p),{scales:[h]})}return t.filter(l=>l.slider||l.scrollbar).flatMap(l=>{const{slider:c,scrollbar:h,name:p}=l;return[s("slider",p,l,c),s("scrollbar",p,l,h)]}).filter(l=>!!l)}function g6(e,t,n,r,i,s){const{type:l}=e;if(!["left","right","bottom","top"].includes(r)||typeof l!="string")return;const h=l;return(()=>h.startsWith("axis")?cY:h.startsWith("group")?aY:h.startsWith("legendContinuous")?fY:h==="legendCategory"?hY:h.startsWith("slider")?uY:h==="title"?lY:h.startsWith("scrollbar")?sY:()=>{})()(e,t,n,r,i,s)}function aY(e,t,n,r,i,s){const{children:l}=e,c=Tl(l,p=>p.crossPadding);l.forEach(p=>p.crossPadding=c),l.forEach(p=>g6(p,t,n,r,i,s));const h=Tl(l,p=>p.size);e.size=h,l.forEach(p=>p.size=h)}function sY(e,t,n,r,i,s){const{trackSize:l=6}=hi({},i.scrollbar,e);e.size=l}function lY(e,t,n,r,i,s){const l=hi({},i.title,e),{title:c,subtitle:h,spacing:p=0}=l,v=cy(l,["title","subtitle","spacing"]);if(c){const y=Eo(v,"title"),b=TT(c,y);e.size=b.height}if(h){const y=Eo(v,"subtitle"),b=TT(h,y);e.size+=p+b.height}}function uY(e,t,n,r,i,s){const l=()=>{const{slider:v}=i;return hi({},v,e)},{trackSize:c,handleIconSize:h}=l(),p=Math.max(c,h*2.4);e.size=p}function cY(e,t,n,r,i,s){e.transform=e.transform||[{type:"hide"}];const l=r==="left"||r==="right",c=y6(e,r,i),{tickLength:h=0,labelSpacing:p=0,titleSpacing:v=0,labelAutoRotate:y}=c,b=cy(c,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),T=ET(e,s),M=ST(b,T),R=h+p;if(M&&M.length){const N=Tl(M,H=>H.width),z=Tl(M,H=>H.height);if(l)e.size=N+R;else{const{tickFilter:H,labelTransform:X}=e;vY(T,M,t,n,H)&&!X&&y!==!1&&y!==null?(e.labelTransform="rotate(90)",e.size=N+R):e.size=z+R}}else e.size=h;const I=wT(b);I&&(l?e.size+=v+I.width:e.size+=v+I.height)}function fY(e,t,n,r,i,s){const c=(()=>{const{legendContinuous:X}=i;return hi({},X,e)})(),{labelSpacing:h=0,titleSpacing:p=0}=c,v=cy(c,["labelSpacing","titleSpacing"]),y=r==="left"||r==="right",b=Eo(v,"ribbon"),{size:T}=b,M=Eo(v,"handleIcon"),{size:R}=M,I=Math.max(T,R*2.4);e.size=I;const N=ET(e,s),z=ST(v,N);if(z){const X=y?"width":"height",Y=Tl(z,ne=>ne[X]);e.size+=Y+h}const H=wT(v);H&&(y?e.size=Math.max(e.size,H.width):e.size+=p+H.height)}function hY(e,t,n,r,i,s){const c=(()=>{const{legendCategory:ut}=i,{title:ct}=e,[gt,Xt]=Array.isArray(ct)?[ct,void 0]:[void 0,ct];return hi({title:gt},ut,Object.assign(Object.assign({},e),{title:Xt}))})(),{itemSpacing:h,itemMarkerSize:p,titleSpacing:v,rowPadding:y,colPadding:b,maxCols:T=1/0,maxRows:M=1/0}=c,R=cy(c,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:I,length:N}=e,z=ut=>Math.min(ut,M),H=ut=>Math.min(ut,T),X=r==="left"||r==="right",Y=N===void 0?t+(X?0:n[0]+n[1]):N,ne=wT(R),pe=ET(e,s),ye=ST(R,pe,"itemLabel"),De=Math.max(ye[0].height,p)+y,Xe=(ut,ct=0)=>p+ut+h[0]+ct;X?(()=>{let ut=-1/0,ct=0,gt=1,Xt=0,Rt=-1/0,kt=-1/0;const wn=ne?ne.height:0,zn=Y-wn;for(const{width:or}of ye){const ir=Xe(or,b);ut=Math.max(ut,ir),ct+De>zn?(gt++,Rt=Math.max(Rt,Xt),kt=Math.max(kt,ct),Xt=1,ct=De):(ct+=De,Xt++)}gt<=1&&(Rt=Xt,kt=ct),e.size=ut*H(gt),e.length=kt+wn,hi(e,{cols:H(gt),gridRow:Rt})})():typeof I=="number"?(()=>{const ut=Math.ceil(ye.length/I),ct=Tl(ye,gt=>Xe(gt.width))*I;e.size=De*z(ut)-y,e.length=Math.min(ct,Y)})():(()=>{let ut=1,ct=0,gt=-1/0;for(const{width:Xt}of ye){const Rt=Xe(Xt,b);ct+Rt>Y?(gt=Math.max(gt,ct),ct=Rt,ut++):ct+=Rt}ut===1&&(gt=ct),e.size=De*z(ut)-y,e.length=gt})(),ne&&(X?e.size=Math.max(e.size,ne.width):e.size+=v+ne.height)}function ET(e,t){const[n]=Zu("scale",t),{scales:r,tickCount:i,tickMethod:s}=e,l=r.find(c=>c.type!=="constant"&&c.type!=="identity");return i!==void 0&&(l.tickCount=i),s!==void 0&&(l.tickMethod=s),n(l)}function ST(e,t,n="label"){const{labelFormatter:r,tickFilter:i,label:s=!0}=e,l=cy(e,["labelFormatter","tickFilter","label"]);if(!s)return null;const c=dY(t,r,i),h=Eo(l,n),p=c.map((b,T)=>Object.fromEntries(Object.entries(h).map(([M,R])=>[M,typeof R=="function"?R(b,T):R]))),v=c.map((b,T)=>{const M=p[T];return TT(b,M)});if(!p.some(b=>b.transform)){const b=c.map((T,M)=>M);e.indexBBox=new Map(b.map(T=>[T,[c[T],v[T]]]))}return v}function wT(e){const t=p=>p===!1||p===null,{title:n}=e,r=cy(e,["title"]);if(t(n)||n===void 0)return null;const i=Eo(r,"title"),{direction:s,transform:l}=i,c=Array.isArray(n)?n.join(","):n;return typeof c!="string"?null:TT(c,Object.assign(Object.assign({},i),{transform:l||(s==="vertical"?"rotate(-90)":"")}))}function y6(e,t,n){const{title:r}=e,[i,s]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:l,[`axis${qg(t)}`]:c}=n;return hi({title:i},l,c,Object.assign(Object.assign({},e),{title:s}))}function _6(e,t){const n=e.getTicks?e.getTicks():e.getOptions().domain;return t?n.filter(t):n}function dY(e,t,n){const i=_6(e,n).map(l=>typeof l=="number"?ey(l):l),s=t?typeof t=="string"?r0(t):t:e.getFormatter?e.getFormatter():l=>`${l}`;return i.map(s)}function pY(e,t){return e.getBandWidth?e.getBandWidth(t)/2:0}function vY(e,t,n,r,i){if(Xd(t,T=>T.width)>n)return!0;const l=e.clone();l.update({range:[0,n]});const c=_6(e,i),h=c.map(T=>l.map(T)+pY(l,T)),p=c.map((T,M)=>M),v=-r[0],y=n+r[1],b=(T,M)=>{const{width:R}=M;return[T-R/2,T+R/2]};for(let T=0;T<p.length;T++){const M=h[T],[R,I]=b(M,t[T]);if(R<v||I>y)return!0;const N=h[T+1];if(N){const[z]=b(N,t[T+1]);if(I>z)return!0}}return!1}function TT(e,t){const n=mY(e),{filter:r}=t,i=cy(t,["filter"]);return n.attr(Object.assign(Object.assign({},i),{visibility:"none"})),n.getBBox()}function mY(e){return e instanceof Dh?e:new oc({style:{text:`${e}`}})}function i0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function gY(e){const t=e.find(({type:n})=>n==="axisZ");if(t){const n=e.find(({type:i})=>i==="axisX");n.plane="xy";const r=e.find(({type:i})=>i==="axisY");r.plane="xy",t.plane="yz",t.origin=[n.bbox.x,n.bbox.y,0],t.eulerAngles=[0,-90,0],t.bbox.x=n.bbox.x,t.bbox.y=n.bbox.y,e.push(Object.assign(Object.assign({},n),{plane:"xz",showLabel:!1,showTitle:!1,origin:[n.bbox.x,n.bbox.y,0],eulerAngles:[-90,0,0]})),e.push(Object.assign(Object.assign({},r),{plane:"yz",showLabel:!1,showTitle:!1,origin:[r.bbox.x+r.bbox.width,r.bbox.y,0],eulerAngles:[0,-90,0]})),e.push(Object.assign(Object.assign({},t),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]}))}}function yY(e,t,n,r){var i,s;const{width:l,height:c,depth:h,x:p=0,y:v=0,z:y=0,inset:b=(i=n.inset)!==null&&i!==void 0?i:0,insetLeft:T=b,insetTop:M=b,insetBottom:R=b,insetRight:I=b,margin:N=(s=n.margin)!==null&&s!==void 0?s:0,marginLeft:z=N,marginBottom:H=N,marginTop:X=N,marginRight:Y=N,padding:ne=n.padding,paddingBottom:pe=ne,paddingLeft:ye=ne,paddingRight:De=ne,paddingTop:Xe=ne}=bY(e,t,n,r),Ke=1/4,mt=(uo,Jo,wa,ja,Va)=>{const{marks:vs}=t;if(vs.length===0)return[ja,Va];if(uo-ja-Va-uo*Ke>0)return[ja,Va];const Is=uo*(1-Ke);return[Jo==="auto"?Is*ja/(ja+Va):ja,wa==="auto"?Is*Va/(ja+Va):Va]},Qe=uo=>uo==="auto"?20:uo!=null?uo:20,ut=Qe(Xe),ct=Qe(pe),gt=b6(e,c-ut-ct,[ut+X,ct+H],["left","right"],t,n,r),{paddingLeft:Xt,paddingRight:Rt}=gt,kt=l-z-Y,[wn,zn]=mt(kt,ye,De,Xt,Rt),or=kt-wn-zn,ir=b6(e,or,[wn+z,zn+Y],["bottom","top"],t,n,r),{paddingTop:Zr,paddingBottom:Ri}=ir,Qi=c-H-X,[Qr,ei]=mt(Qi,pe,Xe,Ri,Zr),Po=Qi-Qr-ei;return{width:l,height:c,depth:h,insetLeft:T,insetTop:M,insetBottom:R,insetRight:I,innerWidth:or,innerHeight:Po,paddingLeft:wn,paddingRight:zn,paddingTop:ei,paddingBottom:Qr,marginLeft:z,marginBottom:H,marginTop:X,marginRight:Y,x:p,y:v,z:y}}function _Y(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:c=r,margin:h=16,marginLeft:p=h,marginRight:v=h,marginTop:y=h,marginBottom:b=h,inset:T=0,insetLeft:M=T,insetRight:R=T,insetTop:I=T,insetBottom:N=T}=e,z=Y=>Y==="auto"?20:Y,H=n-z(i)-z(s)-p-v-M-R,X=t-z(l)-z(c)-y-b-I-N;return{width:H,height:X}}function bY(e,t,n,r){const{coordinates:i}=t;if(!V_(i)&&!$2(i))return t;const s=e.filter(N=>typeof N.type=="string"&&N.type.startsWith("axis"));if(s.length===0)return t;const l=s.map(N=>{const z=N.type==="axisArc"?"arc":"linear";return y6(N,z,n)}),c=Tl(l,N=>{var z;return(z=N.labelSpacing)!==null&&z!==void 0?z:0}),h=s.flatMap((N,z)=>{const H=l[z],X=ET(N,r);return ST(H,X)}).filter(eu),p=Tl(h,N=>N.height)+c,v=s.flatMap((N,z)=>{const H=l[z];return wT(H)}).filter(N=>N!==null),y=v.length===0?0:Tl(v,N=>N.height),{inset:b=p,insetLeft:T=b,insetBottom:M=b,insetTop:R=b+y,insetRight:I=b}=t;return Object.assign(Object.assign({},t),{insetLeft:T,insetBottom:M,insetTop:R,insetRight:I})}function b6(e,t,n,r,i,s,l){const c=Nu(e,M=>M.position),{padding:h=s.padding,paddingLeft:p=h,paddingRight:v=h,paddingBottom:y=h,paddingTop:b=h}=i,T={paddingBottom:y,paddingLeft:p,paddingTop:b,paddingRight:v};for(const M of r){const R=`padding${qg(LD(M))}`,I=c.get(M)||[],N=T[R],z=De=>{De.size===void 0&&(De.size=De.defaultSize)},H=De=>{De.type==="group"?(De.children.forEach(z),De.size=Tl(De.children,Xe=>Xe.size)):De.size=De.defaultSize},X=De=>{De.size||(N!=="auto"?H(De):(g6(De,t,n,M,s,l),z(De)))},Y=De=>{De.type.startsWith("axis")&&De.labelAutoHide===void 0&&(De.labelAutoHide=!0)},ne=M==="bottom"||M==="top",pe=i0(I,De=>De.order),ye=I.filter(De=>De.type.startsWith("axis")&&De.order==pe);if(ye.length&&(ye[0].crossPadding=0),typeof N=="number")I.forEach(z),I.forEach(Y);else if(I.length===0)T[R]=0;else{const De=ne?t+n[0]+n[1]:t,Xe=m6(I,De);Xe.forEach(X);const Ke=Xe.reduce((mt,{size:Qe,crossPadding:ut=12})=>mt+Qe+ut,0);T[R]=Ke}}return T}function xY(e,t,n){const r=Nu(e,ne=>`${ne.plane||"xy"}-${ne.position}`),{paddingLeft:i,paddingRight:s,paddingTop:l,paddingBottom:c,marginLeft:h,marginTop:p,marginBottom:v,marginRight:y,innerHeight:b,innerWidth:T,insetBottom:M,insetLeft:R,insetRight:I,insetTop:N,height:z,width:H,depth:X}=n,Y={xy:sR({width:H,height:z,paddingLeft:i,paddingRight:s,paddingTop:l,paddingBottom:c,marginLeft:h,marginTop:p,marginBottom:v,marginRight:y,innerHeight:b,innerWidth:T,insetBottom:M,insetLeft:R,insetRight:I,insetTop:N}),yz:sR({width:X,height:z,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:X,innerHeight:z,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:sR({width:H,height:X,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:H,innerHeight:X,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[ne,pe]of r.entries()){const[ye,De]=ne.split("-"),Xe=Y[ye][De],[Ke,mt]=Ow(pe,Qe=>typeof Qe.type!="string"?!1:!!(De==="center"||Qe.type.startsWith("axis")&&["inner","outer"].includes(De)));Ke.length&&EY(Ke,t,Xe,De),mt.length&&PY(pe,t,Xe)}}function sR({width:e,height:t,paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:h,marginRight:p,innerHeight:v,innerWidth:y,insetBottom:b,insetLeft:T,insetRight:M,insetTop:R}){const I=n+l,N=i+c,z=r+p,H=s+h,X=e-l-p,Y=[I+T,N+R,y-T-M,v-R-b,"center",null,null];return{top:[I,0,y,N,"vertical",!0,Dc,l,X],right:[e-z,N,z,v,"horizontal",!1,Dc],bottom:[I,t-H,y,H,"vertical",!1,Dc,l,X],left:[0,N,I,v,"horizontal",!0,Dc],"top-left":[I,0,y,N,"vertical",!0,Dc],"top-right":[I,0,y,N,"vertical",!0,Dc],"bottom-left":[I,t-H,y,H,"vertical",!1,Dc],"bottom-right":[I,t-H,y,H,"vertical",!1,Dc],center:Y,inner:Y,outer:Y}}function EY(e,t,n,r){const[i,s]=Ow(e,l=>!!(typeof l.type=="string"&&l.type.startsWith("axis")));SY(i,t,n,r),IY(s,t,n)}function SY(e,t,n,r){r==="center"?oM(t)?RY(e,t,n,r):nu(t)?AY(e,t,n):I_(t)&&CY(e,t,n,e[0].orientation):r==="inner"?wY(e,t,n):r==="outer"&&TY(e,t,n)}function wY(e,t,n){const[r,i,,s]=n,[l,c]=t.getCenter(),[h]=am(t),p=s/2,v=h*p,y=l-v,b=c-v;for(let T=0;T<e.length;T++){const M=e[T];M.bbox={x:r+y,y:i+b,width:v*2,height:v*2}}}function TY(e,t,n){const[r,i,s,l]=n;for(const c of e)c.bbox={x:r,y:i,width:s,height:l}}function AY(e,t,n){const[r,i,s,l]=n;for(const c of e)c.bbox={x:r,y:i,width:s,height:l}}function CY(e,t,n,r){r==="horizontal"?MY(e,t,n):r==="vertical"&&OY(e,t,n)}function OY(e,t,n){const[r,i,,s]=n,l=new Array(e.length).fill(0),h=t.map(l).filter((p,v)=>v%2===0).map(p=>p+r);for(let p=0;p<e.length;p++){const v=e[p],y=h[p],b=h[p+1]-y;v.bbox={x:y,y:i,width:b,height:s}}}function MY(e,t,n){const[r,i,s]=n,l=new Array(e.length).fill(0),h=t.map(l).filter((p,v)=>v%2===1).map(p=>p+i);for(let p=0;p<e.length;p++){const v=e[p],y=h[p],b=h[p+1]-y;v.bbox={x:r,y,width:s,height:b}}}function RY(e,t,n,r){const[i,s,l,c]=n;for(const h of e)h.bbox={x:i,y:s,width:l,height:c},h.radar={index:e.indexOf(h),count:e.length}}function PY(e,t,n){const[r,i,s,l,c,h,p,v,y]=n,[b,T,M,R,I,N,z,H]=c==="vertical"?["y",i,"x",r,"height",l,"width",s]:["x",r,"y",i,"width",s,"height",l];e.sort((De,Xe)=>p==null?void 0:p(De.order,Xe.order));const X=De=>De==="title"||De==="group"||De.startsWith("legend"),Y=(De,Xe,Ke)=>Ke===void 0?Xe:X(De)?Ke:Xe,ne=(De,Xe,Ke)=>Ke===void 0?Xe:X(De)?Ke:Xe,pe=h?T+N:T;for(let De=0,Xe=pe;De<e.length;De++){const Ke=e[De],{crossPadding:mt=0,type:Qe}=Ke,{size:ut}=Ke;Ke.bbox={[b]:h?Xe-ut-mt:Xe+mt,[M]:ne(Qe,R,v),[I]:ut,[z]:Y(Qe,H,y)},Xe+=(ut+mt)*(h?-1:1)}const ye=e.filter(De=>De.type==="group");for(const De of ye){const{bbox:Xe,children:Ke}=De,mt=Xe[z],Qe=mt/Ke.length,ut=Ke.reduce((kt,wn)=>{var zn;const or=(zn=wn.layout)===null||zn===void 0?void 0:zn.justifyContent;return or||kt},"flex-start"),ct=Ke.map((kt,wn)=>{const{length:zn=Qe,padding:or=0}=kt;return zn+(wn===Ke.length-1?0:or)}),gt=Xd(ct),Xt=mt-gt,Rt=ut==="flex-start"?0:ut==="center"?Xt/2:Xt;for(let kt=0,wn=Xe[M]+Rt;kt<Ke.length;kt++){const zn=Ke[kt],{padding:or=0}=zn,ir=kt===Ke.length-1?0:or;zn.bbox={[I]:Xe[I],[b]:Xe[b],[M]:wn,[z]:ct[kt]-ir},hi(zn,{layout:{justifyContent:ut}}),wn+=ct[kt]}}}function IY(e,t,n){if(e.length===0)return;const[r,i,s,l]=n,[c]=am(t),h=l/2*c/Math.sqrt(2),p=r+s/2,v=i+l/2;for(let y=0;y<e.length;y++){const b=e[y];b.bbox={x:p-h,y:v-h,width:h*2,height:h*2}}}function pm(e,t,n={},r=!1){if(Sv(e)||Array.isArray(e)&&r)return e;const i=Eo(e,t);return hi(n,i)}function AT(e,t={}){return Sv(e)||Array.isArray(e)||!x6(e)?e:hi(t,e)}function x6(e){if(Object.keys(e).length===0)return!0;const{title:t,items:n}=e;return t!==void 0||n!==void 0}function vm(e,t){return typeof e=="object"?Eo(e,t):e}var DY=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Ib=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function LY(e,t,n){const{encode:r={},scale:i={},transform:s=[]}=t,l=Ib(t,["encode","scale","transform"]);return[e,Object.assign(Object.assign({},l),{encode:r,scale:i,transform:s})]}function E6(e,t,n){return DY(this,void 0,void 0,function*(){const{library:r}=n,{data:i}=t,[s]=Zu("data",r),l=XY(i),{transform:c=[]}=l,v=[Ib(l,["transform"]),...c].map(s),y=yield Z3(v)(i),b=i&&!Array.isArray(i)&&!Array.isArray(y)?{value:y}:y;return[Array.isArray(y)?eg(y):[],Object.assign(Object.assign({},t),{data:b})]})}function NY(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i={};for(const[s,l]of Object.entries(r))if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=`${s}${c===0?"":c}`;i[h]=l[c]}else i[s]=l;return[e,Object.assign(Object.assign({},t),{encode:i})]}function FY(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const s=om(r,l=>GY(l)?l:{type:WY(i,l),value:l});return[e,Object.assign(Object.assign({},t),{encode:s})]}function BY(e,t,n){const{encode:r}=t;if(!r)return[e,t];const i=om(r,(s,l)=>{const{type:c}=s;return c!=="constant"||HX(l)?s:Object.assign(Object.assign({},s),{constant:!0})});return[e,Object.assign(Object.assign({},t),{encode:i})]}function kY(e,t,n){const{encode:r,data:i}=t;if(!r)return[e,t];const{library:s}=n,l=qY(s),c=om(r,h=>l(i,h));return[e,Object.assign(Object.assign({},t),{encode:c})]}function zY(e,t,n){const{tooltip:r={}}=t;return Sv(r)?[e,t]:Array.isArray(r)?[e,Object.assign(Object.assign({},t),{tooltip:{items:r}})]:C_(r)&&x6(r)?[e,Object.assign(Object.assign({},t),{tooltip:r})]:[e,Object.assign(Object.assign({},t),{tooltip:{items:[r]}})]}function UY(e,t,n){const{data:r,encode:i,tooltip:s={}}=t;if(Sv(s))return[e,t];const l=y=>{if(!y)return y;if(typeof y=="string")return e.map(b=>({name:y,value:r[b][y]}));if(C_(y)){const{field:b,channel:T,color:M,name:R=b,valueFormatter:I=ne=>ne}=y,N=typeof I=="string"?r0(I):I,z=T&&i[T],H=z&&i[T].field,X=R||H||T,Y=[];for(const ne of e){const pe=b?r[ne][b]:z?i[T].value[ne]:null;Y[ne]={name:X,color:M,value:N(pe)}}return Y}if(typeof y=="function"){const b=[];for(const T of e){const M=y(r[T],T,r,i);C_(M)?b[T]=M:b[T]={value:M}}return b}return y},{title:c,items:h=[]}=s,p=Ib(s,["title","items"]),v=Object.assign({title:l(c),items:Array.isArray(h)?h.map(l):[]},p);return[e,Object.assign(Object.assign({},t),{tooltip:v})]}function jY(e,t,n){const{encode:r}=t,i=Ib(t,["encode"]);if(!r)return[e,t];const s=Object.entries(r),l=s.filter(([,h])=>{const{value:p}=h;return Array.isArray(p[0])}).flatMap(([h,p])=>{const v=[[h,new Array(e.length).fill(void 0)]],{value:y}=p,b=Ib(p,["value"]);for(let T=0;T<y.length;T++){const M=y[T];if(Array.isArray(M))for(let R=0;R<M.length;R++){const I=v[R]||[`${h}${R}`,new Array(e).fill(void 0)];I[1][T]=M[R],v[R]=I}}return v.map(([T,M])=>[T,Object.assign({type:"column",value:M},b)])}),c=Object.fromEntries([...s,...l]);return[e,Object.assign(Object.assign({},i),{encode:c})]}function VY(e,t,n){const{axis:r={},legend:i={},slider:s={},scrollbar:l={}}=t,c=(p,v)=>{if(typeof p=="boolean")return p?{}:null;const y=p[v];return y===void 0||y?y:null},h=typeof r=="object"?Array.from(new Set(["x","y",...Object.keys(r)])):["x","y"];return hi(t,{scale:Object.assign(Object.assign({},Object.fromEntries(h.map(p=>{const v=c(l,p);return[p,Object.assign({guide:c(r,p),slider:c(s,p),scrollbar:v},v&&{ratio:v.ratio===void 0?.5:v.ratio})]}))),{color:{guide:c(i,"color")},size:{guide:c(i,"size")},shape:{guide:c(i,"shape")},opacity:{guide:c(i,"opacity")}})}),[e,t]}function HY(e,t,n){const{animate:r}=t;return r||r===void 0?[e,t]:(hi(t,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[e,t])}function GY(e){if(typeof e!="object"||e instanceof Date||e===null)return!1;const{type:t}=e;return eu(t)}function WY(e,t){return typeof t=="function"?"transform":typeof t=="string"&&ZY(e,t)?"field":"constant"}function ZY(e,t){return Array.isArray(e)?e.some(n=>n[t]!==void 0):!1}function XY(e){if((0,yu.Z)(e))return{type:"inline",value:e};if(!e)return{type:"inline",value:null};if(Array.isArray(e))return{type:"inline",value:e};const{type:t="inline"}=e,n=Ib(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}var S6=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},YY=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $Y(e,t,n){return S6(this,void 0,void 0,function*(){const r={library:n},[i,s]=yield KY(e,t,r),{encode:l,scale:c,data:h,tooltip:p}=s;if(Array.isArray(h)===!1)return null;const{channels:v}=t,y=Zd(Object.entries(l).filter(([,T])=>eu(T)),T=>T.map(([M,R])=>Object.assign({name:M},R)),([T])=>{var M;const R=(M=/([^\d]+)\d*$/.exec(T))===null||M===void 0?void 0:M[1],I=v.find(N=>N.name===R);return I!=null&&I.independent?T:R}),b=v.filter(T=>{const{name:M,required:R}=T;if(y.find(([I])=>I===M))return!0;if(R)throw new Error(`Missing encoding for channel: ${M}.`);return!1}).flatMap(T=>{const{name:M,scale:R,scaleKey:I,range:N,quantitative:z,ordinal:H}=T;return y.filter(([Y])=>Y.startsWith(M)).map(([Y,ne],pe)=>{const ye=ne.some(Xt=>Xt.visual),De=ne.some(Xt=>Xt.constant),Xe=c[Y]||{},{independent:Ke=!1,key:mt=I||Y,type:Qe=De?"constant":ye?"identity":R}=Xe,ut=YY(Xe,["independent","key","type"]),ct=Qe==="constant",gt=ct?void 0:N;return{name:Y,values:ne,scaleKey:Ke||ct?Symbol("independent"):mt,scale:Object.assign(Object.assign({type:Qe,range:gt},ut),{quantitative:z,ordinal:H})}})});return[s,Object.assign(Object.assign({},t),{index:i,channels:b,tooltip:p})]})}function qY(e){const[t]=Zu("encode",e);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:t(r)(n),field:QY(r)})}function KY(e,t,n){return S6(this,void 0,void 0,function*(){const{library:r}=n,[i]=Zu("transform",r),{preInference:s=[],postInference:l=[]}=t,{transform:c=[]}=e,h=[LY,E6,NY,FY,BY,kY,jY,HY,VY,zY,...s.map(i),...c.map(i),...l.map(i),UY];let p=[],v=e;for(const y of h)[p,v]=yield y(p,v,n);return[p,v]})}function QY(e){const{type:t,value:n}=e;return t==="field"&&typeof n=="string"?n:null}var lg=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},fy=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function lR(e,t,n,r){var i;return lg(this,void 0,void 0,function*(){const[s]=Zu("composition",n),[l]=Zu("interaction",n),c=new Set(Object.keys(n).map(Qe=>{var ut;return(ut=/mark\.(.*)/.exec(Qe))===null||ut===void 0?void 0:ut[1]}).filter(eu)),h=new Set(Object.keys(n).map(Qe=>{var ut;return(ut=/component\.(.*)/.exec(Qe))===null||ut===void 0?void 0:ut[1]}).filter(eu)),p=Qe=>{const{type:ut}=Qe;if(typeof ut=="function"){const{props:ct={}}=ut,{composite:gt=!0}=ct;if(gt)return"mark"}return typeof ut!="string"?ut:c.has(ut)||h.has(ut)?"mark":ut},v=Qe=>p(Qe)==="mark",y=Qe=>p(Qe)==="standardView",b=Qe=>{const{type:ut}=Qe;return typeof ut!="string"?!1:!!h.has(ut)},T=Qe=>{if(y(Qe))return[Qe];const ut=p(Qe);return s({type:ut,static:b(Qe)})(Qe)},M=[],R=new Map,I=new Map,N=[e],z=[];for(;N.length;){const Qe=N.shift();if(y(Qe)){const ut=I.get(Qe),[ct,gt]=ut?C6(ut,Qe,n):yield T6(Qe,n);R.set(ct,Qe),M.push(ct);const Xt=gt.flatMap(T).map(Rt=>hL(Rt,n));if(N.push(...Xt),Xt.every(y)){const Rt=yield Promise.all(Xt.map(kt=>A6(kt,n)));xX(Rt);for(let kt=0;kt<Xt.length;kt++){const wn=Xt[kt],zn=Rt[kt];I.set(wn,zn)}}}else{const ut=v(Qe)?Qe:yield P6(Qe,n),ct=T(ut);Array.isArray(ct)?N.push(...ct):typeof ct=="function"&&z.push(ct())}}r.emitter.emit(wl.BEFORE_PAINT);const H=new Map,X=new Map,Y=[];t.selectAll(mm(da)).data(M,Qe=>Qe.key).join(Qe=>Qe.append("g").attr("className",da).attr("id",ut=>ut.key).call(w6).each(function(ut,ct,gt){cR(ut,Ra(gt),Y,n,r),H.set(ut,gt)}),Qe=>Qe.call(w6).each(function(ut,ct,gt){cR(ut,Ra(gt),Y,n,r),X.set(ut,gt)}),Qe=>Qe.each(function(ut,ct,gt){const Xt=gt.nameInteraction.values();for(const Rt of Xt)Rt.destroy()}).remove());const ne=(Qe,ut,ct)=>Array.from(Qe.entries()).map(([gt,Xt])=>{const Rt=ct||new Map,kt=(or,ir=Zr=>Zr)=>Rt.set(or,ir),wn=R.get(gt),zn=e$(Ra(Xt),wn,n,r);return{view:gt,container:Xt,options:wn,setState:kt,update:(or,ir)=>lg(this,void 0,void 0,function*(){const Ri=_2(Array.from(Rt.values()))(wn);return yield zn(Ri,or,()=>{Ho(ir)&&ut(Qe,ir,Rt)})})}}),pe=(Qe=X,ut,ct)=>{var gt;const Xt=ne(Qe,pe,ct);for(const Rt of Xt){const{options:kt,container:wn}=Rt,zn=wn.nameInteraction;let or=CT(kt);ut&&(or=or.filter(ir=>ut.includes(ir[0])));for(const ir of or){const[Zr,Ri]=ir,Qi=zn.get(Zr);if(Qi&&((gt=Qi.destroy)===null||gt===void 0||gt.call(Qi)),Ri){const ei=uR(Rt.view,Zr,Ri,l)(Rt,Xt,r.emitter);zn.set(Zr,{destroy:ei})}}}},ye=ne(H,pe);for(const Qe of ye){const{options:ut}=Qe,ct=new Map;Qe.container.nameInteraction=ct;for(const gt of CT(ut)){const[Xt,Rt]=gt;if(Rt){const wn=uR(Qe.view,Xt,Rt,l)(Qe,ye,r.emitter);ct.set(Xt,{destroy:wn})}}}pe();const{width:De,height:Xe}=e,Ke=[];for(const Qe of z){const ut=new Promise(ct=>lg(this,void 0,void 0,function*(){for(const gt of Qe){const Xt=Object.assign({width:De,height:Xe},gt);yield lR(Xt,t,n,r)}ct()}));Ke.push(ut)}r.views=M,(i=r.animations)===null||i===void 0||i.forEach(Qe=>Qe==null?void 0:Qe.cancel()),r.animations=Y,r.emitter.emit(wl.AFTER_PAINT);const mt=Y.filter(eu).map(v$).map(Qe=>Qe.finished);return Promise.all([...mt,...Ke])})}function w6(e){e.style("transform",t=>`translate(${t.layout.x}, ${t.layout.y})`)}function JY(e){const[,t]=Zu("interaction",e);return n=>{const[r,i]=n;try{return[r,t(r)]}catch(s){return[r,i.type]}}}function e$(e,t,n,r){const i=JY(n),s=h=>h[1]&&h[1].props&&h[1].props.reapplyWhenUpdate,c=CT(t).map(i).filter(s).map(h=>h[0]);return(h,p,v)=>lg(this,void 0,void 0,function*(){const y=[],[b,T]=yield T6(h,n);cR(b,e,y,n,r);for(const M of c.filter(R=>R!==p))t$(M,e,h,b,n,r);for(const M of T)lR(M,e,n,r);return v(),{options:h,view:b}})}function t$(e,t,n,r,i,s){var l;const[c]=Zu("interaction",i),p=t.node().nameInteraction,v=CT(n).find(([R])=>R===e),y=p.get(e);if(!y||((l=y.destroy)===null||l===void 0||l.call(y),!v[1]))return;const b=uR(r,e,v[1],c),T={options:n,view:r,container:t.node(),update:R=>Promise.resolve(R)},M=b(T,[],s.emitter);p.set(e,{destroy:M})}function T6(e,t){return lg(this,void 0,void 0,function*(){const n=yield r$(e,t),r=n$(n);e.interaction=r.interaction,e.coordinate=r.coordinate,e.marks=[...r.marks,...r.components];const i=hL(r,t),s=yield A6(i,t);return C6(s,i,t)})}function n$(e){const{coordinate:t={},interaction:n={},style:r={},marks:i}=e,s=fy(e,["coordinate","interaction","style","marks"]),l=i.map(b=>b.coordinate||{}),c=i.map(b=>b.interaction||{}),h=i.map(b=>b.viewStyle||{}),p=[...l,t].reduceRight((b,T)=>hi(b,T),{}),v=[n,...c].reduce((b,T)=>hi(b,T),{}),y=[...h,r].reduce((b,T)=>hi(b,T),{});return Object.assign(Object.assign({},s),{marks:i,coordinate:p,interaction:v,style:y})}function r$(e,t){return lg(this,void 0,void 0,function*(){const[n,r]=Zu("mark",t),i=new Set(Object.keys(t).map(b=>{var T;return(T=/component\.(.*)/.exec(b))===null||T===void 0?void 0:T[1]}).filter(eu)),{marks:s}=e,l=[],c=[],h=[...s],{width:p,height:v}=_Y(e),y={options:e,width:p,height:v};for(;h.length;){const[b]=h.splice(0,1),T=yield P6(b,t),{type:M=Kg("G2Mark type is required."),key:R}=T;if(i.has(M))c.push(T);else{const{props:I={}}=r(M),{composite:N=!0}=I;if(!N)l.push(T);else{const{data:z}=T,H=Object.assign(Object.assign({},T),{data:z&&(Array.isArray(z)?z:z.value)}),X=yield n(H,y),Y=Array.isArray(X)?X:[X];h.unshift(...Y.map((ne,pe)=>Object.assign(Object.assign({},ne),{key:`${R}-${pe}`})))}}}return Object.assign(Object.assign({},e),{marks:l,components:c})})}function A6(e,t){return lg(this,void 0,void 0,function*(){const[n]=Zu("theme",t),[,r]=Zu("mark",t),{theme:i,marks:s,coordinates:l=[]}=e,c=n(R6(i)),h=new Map;for(const v of s){const{type:y}=v,{props:b={}}=r(y),T=yield $Y(v,b,t);if(T){const[M,R]=T;h.set(M,R)}}const p=Nu(Array.from(h.values()).flatMap(v=>v.channels),({scaleKey:v})=>v);for(const v of p.values()){const y=v.reduce((H,{scale:X})=>hi(H,X),{}),{scaleKey:b}=v[0],{values:T}=v[0],M=Array.from(new Set(T.map(H=>H.field).filter(eu))),R=hi({guide:{title:M.length===0?void 0:M},field:M[0]},y),{name:I}=v[0],N=v.flatMap(({values:H})=>H.map(X=>X.value)),z=Object.assign(Object.assign({},gX(I,N,R,l,c,t)),{key:b});v.forEach(H=>H.scale=z)}return h})}function uR(e,t,n,r){const i=e.theme,s=typeof t=="string"?i[t]||{}:{};return r(hi(s,Object.assign({type:t},n)))}function C6(e,t,n){const[r]=Zu("mark",n),[i]=Zu("theme",n),[s]=Zu("labelTransform",n),{key:l,frame:c=!1,theme:h,clip:p,style:v={},labelTransform:y=[]}=t,b=i(R6(h)),T=Array.from(e.values()),M=_X(T,t),R=qX($X(_$(Array.from(M),T,e),t,n)),I=yY(R,t,b,n),N=XW(I,t,n),z=c?hi({mainLineWidth:1,mainStroke:"#000"},v):v;xY(m6(R),N,I),gY(R);const H={};for(const ne of R){const{scales:pe=[]}=ne,ye=[];for(const De of pe){const{name:Xe}=De,Ke=a6(De,n);ye.push(Ke),Xe==="y"&&Ke.update(Object.assign(Object.assign({},Ke.getOptions()),{xScale:H.x})),o6(H,{[Xe]:Ke})}ne.scaleInstances=ye}const X=[];for(const[ne,pe]of e.entries()){const{children:ye,dataDomain:De,modifier:Xe,key:Ke}=ne,{index:mt,channels:Qe,tooltip:ut}=pe,ct=Object.fromEntries(Qe.map(({name:ei,scale:Po})=>[ei,Po])),gt=om(ct,ei=>a6(ei,n));o6(H,gt);const Xt=yX(Qe,gt),Rt=r(ne),[kt,wn,zn]=a$(Rt(mt,gt,Xt,N)),or=De||kt.length,ir=Xe?Xe(wn,or,I):[],Zr=ei=>{var Po,uo;return(uo=(Po=ut.title)===null||Po===void 0?void 0:Po[ei])===null||uo===void 0?void 0:uo.value},Ri=ei=>ut.items.map(Po=>Po[ei]),Qi=kt.map((ei,Po)=>{const uo=Object.assign({points:wn[Po],transform:ir[Po],index:ei,markKey:Ke,viewKey:l},ut&&{title:Zr(ei),items:Ri(ei)});for(const[Jo,wa]of Object.entries(Xt))uo[Jo]=wa[ei],zn&&(uo[`series${n0(Jo)}`]=zn[Po].map(ja=>wa[ja]));return zn&&(uo.seriesIndex=zn[Po]),zn&&ut&&(uo.seriesItems=zn[Po].map(Jo=>Ri(Jo)),uo.seriesTitle=zn[Po].map(Jo=>Zr(Jo))),uo});pe.data=Qi,pe.index=kt;const Qr=ye==null?void 0:ye(Qi,gt,I);X.push(...Qr||[])}return[{layout:I,theme:b,coordinate:N,markState:e,key:l,clip:p,scale:H,style:z,components:R,labelTransform:_2(y.map(s))},X]}function cR(e,t,n,r,i){return lg(this,void 0,void 0,function*(){const{components:s,theme:l,layout:c,markState:h,coordinate:p,key:v,style:y,clip:b,scale:T}=e,{x:M,y:R,width:I,height:N}=c,z=fy(c,["x","y","width","height"]),H=["view","plot","main","content"],X=H.map((Rt,kt)=>kt),Y=["a","margin","padding","inset"],ne=H.map(Rt=>gw(Object.assign({},l.view,y),Rt)),pe=Y.map(Rt=>Eo(z,Rt)),ye=Rt=>Rt.style("x",kt=>Qe[kt].x).style("y",kt=>Qe[kt].y).style("width",kt=>Qe[kt].width).style("height",kt=>Qe[kt].height).each(function(kt,wn,zn){b$(Ra(zn),ne[kt])});let De=0,Xe=0,Ke=I,mt=N;const Qe=X.map(Rt=>{const kt=pe[Rt],{left:wn=0,top:zn=0,bottom:or=0,right:ir=0}=kt;return De+=wn,Xe+=zn,Ke-=wn+ir,mt-=zn+or,{x:De,y:Xe,width:Ke,height:mt}});t.selectAll(mm(Mu)).data(X.filter(Rt=>eu(ne[Rt])),Rt=>H[Rt]).join(Rt=>Rt.append("rect").attr("className",Mu).style("zIndex",-2).call(ye),Rt=>Rt.call(ye),Rt=>Rt.remove());const ut=c$(h),ct=ut?{duration:ut[1]}:!1;for(const[,Rt]of ab(s,kt=>`${kt.type}-${kt.position}`))Rt.forEach((kt,wn)=>kt.index=wn);const gt=t.selectAll(mm(fs)).data(s,Rt=>`${Rt.type}-${Rt.position}-${Rt.index}`).join(Rt=>Rt.append("g").style("zIndex",({zIndex:kt})=>kt||-1).attr("className",fs).append(kt=>v6(hi({animate:ct,scale:T},kt),p,l,r,h)),Rt=>Rt.transition(function(kt,wn,zn){const{preserve:or=!1}=kt;if(or)return;const ir=v6(hi({animate:ct,scale:T},kt),p,l,r,h),{attributes:Zr}=ir,[Ri]=zn.childNodes;return Ri.update(Zr,!1)})).transitions();n.push(...gt.flat().filter(eu));const Xt=t.selectAll(mm(qo)).data([c],()=>v).join(Rt=>Rt.append("rect").style("zIndex",0).style("fill","transparent").attr("className",qo).call(I6).call(L6,Array.from(h.keys())).call(N6,b),Rt=>Rt.call(L6,Array.from(h.keys())).call(kt=>ut?y$(kt,ut):I6(kt)).call(N6,b)).transitions();n.push(...Xt.flat());for(const[Rt,kt]of h.entries()){const{data:wn}=kt,{key:zn,class:or,type:ir}=Rt,Zr=t.select(`#${zn}`),Ri=d$(Rt,kt,e,r,i),Qi=p$(Rt,kt,e,r),Qr=m$(Rt,kt,e,r),ei=g$(Rt,kt,e,r),Po=f$(t,Zr,or,"element"),uo=Zr.selectAll(mm(va)).selectFacetAll(Po).data(wn,Jo=>Jo.key,Jo=>Jo.groupKey).join(Jo=>Jo.append(Ri).attr("className",va).attr("markType",ir).transition(function(wa,ja,Va){return Qi(wa,[Va])}),Jo=>Jo.call(wa=>{const ja=wa.parent(),Va=X3(vs=>{const[Cl,ss]=vs.getBounds().min;return[Cl,ss]});wa.transition(function(vs,Cl,ss){h$(ss,ja,Va);const Is=Ri(vs,Cl),ku=Qr(vs,[ss],[Is]);return ku!==null||(ss.nodeName===Is.nodeName&&Is.nodeName!=="g"?b2(ss,Is):(ss.parentNode.replaceChild(Is,ss),Is.className=va,Is.markType=ir,Is.__data__=ss.__data__)),ku}).attr("markType",ir).attr("className",va)}),Jo=>Jo.each(function(wa,ja,Va){Va.__removed__=!0}).transition(function(wa,ja,Va){return ei(wa,[Va])}).remove(),Jo=>Jo.append(Ri).attr("className",va).attr("markType",ir).transition(function(wa,ja,Va){const{__fromElements__:vs}=Va,Cl=Qr(wa,vs,[Va]);return new ac(vs,null,Va.parentNode).transition(Cl).remove(),Cl}),Jo=>Jo.transition(function(wa,ja,Va){const Cl=new ac([],Va.__toData__,Va.parentNode).append(Ri).attr("className",va).attr("markType",ir).nodes();return Qr(wa,[Va],Cl)}).remove()).transitions();n.push(...uo.flat())}i$(e,t,n,r,i)})}function i$(e,t,n,r,i){const[s]=Zu("labelTransform",r),{markState:l,labelTransform:c}=e,h=t.select(mm(so)).node(),p=new Map,v=new Map,y=Array.from(l.entries()).flatMap(([R,I])=>{const{labels:N=[],key:z}=R,H=u$(R,I,e,r,i),X=t.select(`#${z}`).selectAll(mm(va)).nodes().filter(Y=>!Y.__removed__);return N.flatMap((Y,ne)=>{const{transform:pe=[]}=Y,ye=fy(Y,["transform"]);return X.flatMap(De=>{const Xe=o$(ye,ne,De);return Xe.forEach(Ke=>{p.set(Ke,H),v.set(Ke,Y)}),Xe})})}),b=Ra(h).selectAll(mm(Il)).data(y,R=>R.key).join(R=>R.append(I=>p.get(I)(I)).attr("className",Il),R=>R.each(function(I,N,z){const X=p.get(I)(I);b2(z,X)}),R=>R.remove()).nodes(),T=Nu(b,R=>v.get(R.__data__)),{coordinate:M}=e;for(const[R,I]of T){const{transform:N=[]}=R;_2(N.map(s))(I,M)}c&&c(b,M)}function o$(e,t,n){const{seriesIndex:r,seriesKey:i,points:s,key:l,index:c}=n.__data__,h=l$(n);if(!r)return[Object.assign(Object.assign({},e),{key:`${l}-${t}`,bounds:h,index:c,points:s,dependentElement:n})];const p=s$(e),v=r.map((y,b)=>Object.assign(Object.assign({},e),{key:`${i[b]}-${t}`,bounds:[s[b]],index:y,points:s,dependentElement:n}));return p?p(v):v}function a$([e,t,n]){if(n)return[e,t,n];const r=[],i=[];for(let s=0;s<e.length;s++){const l=e[s],c=t[s];c.every(([h,p])=>eu(h)&&eu(p))&&(r.push(l),i.push(c))}return[r,i]}function s$(e){const{selector:t}=e;if(!t)return null;if(typeof t=="function")return t;if(t==="first")return n=>[n[0]];if(t==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${t}`)}function l$(e){const t=e.cloneNode(),n=e.getAnimations();t.style.visibility="hidden",n.forEach(l=>{const c=l.effect.getKeyframes();t.attr(c[c.length-1])}),e.parentNode.appendChild(t);const r=t.getLocalBounds();t.destroy();const{min:i,max:s}=r;return[i,s]}function u$(e,t,n,r,i){const[s]=Zu("shape",r),{data:l}=e,{data:c,defaultLabelShape:h}=t,p=c.map(T=>T.points),{theme:v,coordinate:y}=n,b=Object.assign(Object.assign({},i),{document:cL(i),theme:v,coordinate:y});return T=>{const{index:M,points:R}=T,I=l[M],{formatter:N=ct=>`${ct}`,transform:z,style:H,render:X}=T,Y=fy(T,["formatter","transform","style","render"]),ne=om(Object.assign(Object.assign({},Y),H),ct=>O6(ct,I,M,l)),{shape:pe=h,text:ye}=ne,De=fy(ne,["shape","text"]),Xe=typeof N=="string"?r0(N):N,Ke=Object.assign(Object.assign({},De),{text:Xe(ye,I,M,l),datum:I}),mt=Object.assign({type:`label.${pe}`,render:X},De),Qe=s(mt,b),ut=M6(v,"label",pe,"label");return Qe(R,Ke,ut,p)}}function O6(e,t,n,r){return typeof e=="function"?e(t,n,r):typeof e!="string"?e:t[e]!==void 0?t[e]:e}function c$(e){let t=-1/0,n=1/0;for(const[r,i]of e){const{animate:s={}}=r,{data:l}=i,{enter:c={},update:h={},exit:p={}}=s,{type:v,duration:y=300,delay:b=0}=h,{type:T,duration:M=300,delay:R=0}=c,{type:I,duration:N=300,delay:z=0}=p;for(const H of l){const{updateType:X=v,updateDuration:Y=y,updateDelay:ne=b,enterType:pe=T,enterDuration:ye=M,enterDelay:De=R,exitDuration:Xe=N,exitDelay:Ke=z,exitType:mt=I}=H;(X===void 0||X)&&(t=Math.max(t,Y+ne),n=Math.min(n,ne)),(mt===void 0||mt)&&(t=Math.max(t,Xe+Ke),n=Math.min(n,Ke)),(pe===void 0||pe)&&(t=Math.max(t,ye+De),n=Math.min(n,De))}}return t===-1/0?null:[n,t-n]}function f$(e,t,n,r){return e.node().parentElement.findAll(s=>s.style.facet!==void 0&&s.style.facet===n&&s!==t.node()).flatMap(s=>s.getElementsByClassName(r))}function h$(e,t,n){if(!e.__facet__)return;const r=e.parentNode.parentNode,i=t.parentNode,[s,l]=n(r),[c,h]=n(i),p=`translate(${s-c}, ${l-h})`;Y3(e,p),t.append(e)}function d$(e,t,n,r,i){const[s]=Zu("shape",r),{data:l}=e,{defaultShape:c,data:h,shape:p}=t,v=h.map(I=>I.points),{theme:y,coordinate:b}=n,{type:T,style:M={}}=e,R=Object.assign(Object.assign({},i),{document:cL(i),coordinate:b,theme:y});return I=>{const{shape:N=c}=M,{shape:z=N,points:H,seriesIndex:X,index:Y}=I,ne=fy(I,["shape","points","seriesIndex","index"]),pe=Object.assign(Object.assign({},ne),{index:Y}),ye=X?X.map(Qe=>l[Qe]):l[Y],De=X||Y,Xe=om(M,Qe=>O6(Qe,ye,De,l)),Ke=p[z]?p[z](Xe,R):s(Object.assign(Object.assign({},Xe),{type:D6(e,z)}),R),mt=M6(y,T,z,c);return Ke(H,pe,mt,v)}}function M6(e,t,n,r){if(typeof t!="string")return;const{color:i}=e,s=e[t]||{},l=s[n]||s[r];return Object.assign({color:i},l)}function fR(e,t,n,r,i){var s,l;const[,c]=Zu("shape",i),[h]=Zu("animation",i),{defaultShape:p,shape:v}=n,{theme:y,coordinate:b}=r,M=`default${n0(e)}Animation`,{[M]:R}=((s=v[p])===null||s===void 0?void 0:s.props)||c(D6(t,p)).props,{[e]:I={}}=y,N=((l=t.animate)===null||l===void 0?void 0:l[e])||{},z={coordinate:b};return(H,X,Y)=>{const{[`${e}Type`]:ne,[`${e}Delay`]:pe,[`${e}Duration`]:ye,[`${e}Easing`]:De}=H,Xe=Object.assign({type:ne||R},N);if(!Xe.type)return null;const Qe=h(Xe,z)(X,Y,hi(I,{delay:pe,duration:ye,easing:De}));return Array.isArray(Qe)?Qe:[Qe]}}function p$(e,t,n,r){return fR("enter",e,t,n,r)}function v$(e){return e.finished.then(()=>{e.cancel()}),e}function m$(e,t,n,r){return fR("update",e,t,n,r)}function g$(e,t,n,r){return fR("exit",e,t,n,r)}function R6(e={}){if(typeof e=="string")return{type:e};const{type:t="light"}=e,n=fy(e,["type"]);return Object.assign(Object.assign({},n),{type:t})}function CT(e){const t={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=e;return Object.entries(hi(t,n)).reverse()}function P6(e,t){return lg(this,void 0,void 0,function*(){const n={library:t},{data:r}=e,i=fy(e,["data"]);if(r==null)return e;const[,{data:s}]=yield E6([],{data:r},n);return Object.assign({data:s},i)})}function I6(e){e.style("transform",t=>`translate(${t.paddingLeft+t.marginLeft}, ${t.paddingTop+t.marginTop})`).style("width",t=>t.innerWidth).style("height",t=>t.innerHeight)}function y$(e,t){const[n,r]=t;e.transition(function(i,s,l){const{transform:c,width:h,height:p}=l.style,{paddingLeft:v,paddingTop:y,innerWidth:b,innerHeight:T,marginLeft:M,marginTop:R}=i,I=[{transform:c,width:h,height:p},{transform:`translate(${v+M}, ${y+R})`,width:b,height:T}];return l.animate(I,{delay:n,duration:r,fill:"both"})})}function D6(e,t){const{type:n}=e;return typeof t=="string"?`${n}.${t}`:t}function L6(e,t){const n=s=>s.class!==void 0?`${s.class}`:"";e.nodes().length===0||(e.selectAll(mm(Ba)).data(t,s=>s.key).join(s=>s.append("g").attr("className",Ba).attr("id",l=>l.key).style("facet",n).style("fill","transparent").style("zIndex",l=>{var c;return(c=l.zIndex)!==null&&c!==void 0?c:0}),s=>s.style("facet",n).style("fill","transparent").style("zIndex",l=>{var c;return(c=l.zIndex)!==null&&c!==void 0?c:0}),s=>s.remove()),e.select(mm(so)).node())||e.append("g").attr("className",so).style("zIndex",0)}function mm(...e){return e.map(t=>`.${t}`).join("")}function N6(e,t){e.node()&&e.style("clipPath",n=>{if(!t)return null;const{paddingTop:r,paddingLeft:i,marginLeft:s,marginTop:l,innerWidth:c,innerHeight:h}=n;return new L0({style:{x:i+s,y:r+l,width:c,height:h}})})}function _$(e,t,n){var r;for(const[p]of n.entries())if(p.type==="cell")return e.filter(v=>v.name!=="shape");if(t.length!==1||e.some(p=>p.name==="shape"))return e;const{defaultShape:i}=t[0];if(!["point","line","rect","hollow"].includes(i))return e;const l={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},h={field:((r=e.find(p=>p.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[l[i]]};return[...e,h]}function b$(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}function F6(e){const t=hi({},e),n=new Map([[t,null]]),r=new Map([[null,-1]]),i=[t];for(;i.length;){const s=i.shift();if(s.key===void 0){const c=n.get(s),h=r.get(s),p=c===null?"0":`${c.key}-${h}`;s.key=p}const{children:l=[]}=s;if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=hi({},l[c]);l[c]=h,n.set(h,s),r.set(h,c),i.push(h)}}return t}function x$(e,t){const n=new aw;return n.registerPlugin(new sw),new Xm({width:e,height:t,container:document.createElement("div"),renderer:n})}function E$(e,t={},n=()=>{},r=i=>{throw i}){const{width:i=640,height:s=480,depth:l=0}=e,c=F6(e),{canvas:h=x$(i,s),emitter:p=new Vo,library:v}=t;t.canvas=h,t.emitter=p;const{width:y,height:b}=h.getConfig();(y!==i||b!==s)&&h.resize(i,s),p.emit(wl.BEFORE_RENDER);const T=Ra(h.document.documentElement);return h.ready.then(()=>lR(Object.assign(Object.assign({},c),{width:i,height:s,depth:l}),T,v,t)).then(()=>{if(l){const[M,R]=h.document.documentElement.getPosition();h.document.documentElement.setPosition(M,R,-l/2)}h.requestAnimationFrame(()=>{p.emit(wl.AFTER_RENDER),n==null||n()})}).catch(M=>{r==null||r(M)}),w$(h.getConfig().container)}function R0e(e,t={},n=()=>{},r=i=>{throw i}){var i;const{width:s=640,height:l=480}=e,c=F6(e),{group:h=new Group,emitter:p=new EventEmitter,library:v}=t;h!=null&&h.parentElement||error("renderToMountedElement can't render chart to unmounted group.");const y=select(h);return t.group=h,t.emitter=p,t.canvas=t.canvas||((i=h==null?void 0:h.ownerDocument)===null||i===void 0?void 0:i.defaultView),p.emit(ChartEvent.BEFORE_RENDER),plot(Object.assign(Object.assign({},c),{width:s,height:l}),y,v,t).then(()=>{var b;(b=t.canvas)===null||b===void 0||b.requestAnimationFrame(()=>{p.emit(ChartEvent.AFTER_RENDER),n==null||n()})}).catch(b=>{r==null||r(b)}),h}function B6(e,t={},n=!1){const{canvas:r,emitter:i}=t;r&&(S$(r),n?r.destroy():r.destroyChildren()),i.off()}function S$(e){const t=e.getRoot().querySelectorAll(`.${da}`);t==null||t.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(i=>{i==null||i.destroy()})})}function w$(e){return typeof e=="string"?document.getElementById(e):e}const Db=e=>e?parseInt(e):0;function T$(e){const t=getComputedStyle(e),n=e.clientWidth||Db(t.width),r=e.clientHeight||Db(t.height),i=Db(t.paddingLeft)+Db(t.paddingRight),s=Db(t.paddingTop)+Db(t.paddingBottom);return{width:n-i,height:r-s}}function P0e(e){const{height:t,width:n,padding:r=0,paddingLeft:i=r,paddingRight:s=r,paddingTop:l=r,paddingBottom:c=r,margin:h=0,marginLeft:p=h,marginRight:v=h,marginTop:y=h,marginBottom:b=h,inset:T=0,insetLeft:M=T,insetRight:R=T,insetTop:I=T,insetBottom:N=T}=e,z=Y=>Y==="auto"?20:Y,H=n-z(i)-z(s)-p-v-M-R,X=t-z(l)-z(c)-y-b-I-N;return{width:H,height:X}}function hR(e,t){const n=[e];for(;n.length;){const r=n.shift();t&&t(r);const i=r.children||[];for(const s of i)n.push(s)}}class dR{constructor(t={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=t}map(t=n=>n){const n=t(this.value);return this.value=n,this}attr(t,n){return arguments.length===1?this.value[t]:this.map(r=>(r[t]=n,r))}append(t){const n=new t({});return n.children=[],this.push(n),n}push(t){return t.parentNode=this,t.index=this.children.length,this.children.push(t),this}remove(){const t=this.parentNode;if(t){const{children:n}=t,r=n.findIndex(i=>i===this);n.splice(r,1)}return this}getNodeByKey(t){let n=null;return hR(this,i=>{t===i.attr("key")&&(n=i)}),n}getNodesByType(t){const n=[];return hR(this,i=>{t===i.type&&n.push(i)}),n}getNodeByType(t){let n=null;return hR(this,r=>{n||t===r.type&&(n=r)}),n}call(t,...n){return t(this.map(),...n),this}getRoot(){let t=this;for(;t&&t.parentNode;)t=t.parentNode;return t}}var k6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const pR=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title"],z6="__remove__",U6="__callback__",j6=1,V6=1;function A$(e){if(e===void 0){const t=document.createElement("div");return t[z6]=!0,t}return typeof e=="string"?document.getElementById(e):e}function C$(e){const t=e.parentNode;t&&t.removeChild(e)}function O$(e){if(e.type!==null)return e;const t=e.children[e.children.length-1];for(const n of pR)t.attr(n,e.attr(n));return t}function H6(e){return Object.assign(Object.assign({},e.value),{type:e.type})}function vR(e,t){const{width:n,height:r,autoFit:i,depth:s=0}=e;let l=640,c=480;if(i){const{width:h,height:p}=T$(t);l=h||l,c=p||c}return l=n||l,c=r||c,{width:Math.max((0,yu.Z)(l)?l:j6,j6),height:Math.max((0,yu.Z)(c)?c:V6,V6),depth:s}}function M$(e){const t=O$(e),n=[t],r=new Map;for(r.set(t,H6(t));n.length;){const i=n.pop(),s=r.get(i),{children:l=[]}=i;for(const c of l)if(c.type===U6)s.children=c.value;else{const h=H6(c),{children:p=[]}=s;p.push(h),n.push(c),r.set(c,h),s.children=p}}return r.get(t)}function R$(e,t){return typeof e=="function"?!0:new Set(Object.keys(t)).has(e)}function P$(e,t){return typeof e!="function"&&new Set(Object.keys(t)).has(e)}function I$(e,t,n,r,i){const{type:s}=e,{type:l=n||s}=t;if(P$(l,i)){for(const c of pR)e.attr(c)!==void 0&&t[c]===void 0&&(t[c]=e.attr(c));return t}if(R$(l,r)){const c={type:"view"},h=Object.assign({},t);for(const p of pR)h[p]!==void 0&&(c[p]=h[p],delete h[p]);return Object.assign(Object.assign({},c),{children:[h]})}return t}function D$(e,t,n){if(typeof e=="function")return t.mark;const i=Object.assign(Object.assign({},t),n)[e];if(!i)throw new Error(`Unknown mark: ${e}.`);return i}function L$(e,t,n){if(typeof e=="function"){const h=new dR;return h.value=e,h.type=U6,h}const{type:r,children:i}=e,s=k6(e,["type","children"]),l=D$(r,t,n),c=new l;return c.value=s,c.type=r,c}function N$(e,t){const{type:n,children:r}=t,i=k6(t,["type","children"]);e.type===n||n===void 0?bw(e.value,i):typeof n=="string"&&(e.type=n,e.value=i)}function F$(e,t,n,r){if(!e)return;const i=[[e,t]];for(;i.length;){const[s,l]=i.shift(),c=L$(l,n,r);Array.isArray(s.children)&&s.push(c);const{children:h}=l;if(Array.isArray(h))for(const p of h)i.push([c,p]);else typeof h=="function"&&i.push([c,h])}}function B$(e,t,n,r,i){const s=I$(e,t,n,r,i),l=[[null,e,s]];for(;l.length;){const[c,h,p]=l.shift();if(!h)F$(c,p,r,i);else if(!p)h.remove();else{N$(h,p);const{children:v}=p,{children:y}=h;if(Array.isArray(v)&&Array.isArray(y)){const b=Math.max(v.length,y.length);for(let T=0;T<b;T++){const M=v[T],R=y[T];l.push([h,R,M])}}else typeof v=="function"&&l.push([h,null,v])}}}function k$(){let e,t;return[new Promise((r,i)=>{t=r,e=i}),t,e]}function z$(e,t,{key:n=t}){e.prototype[t]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function U$(e,t,{key:n=t}){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const i=[...this.attr(n)||[],r];return this.attr(n,i)}}function j$(e,t,{key:n=t}){e.prototype[t]=function(r,i){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const s=this.attr(n)||{};return s[r]=arguments.length===1?!0:i,this.attr(n,s)}}function V$(e,t,n){e.prototype[t]=function(r){if(arguments.length===0)return this.attr(t);if(Array.isArray(r))return this.attr(t,{items:r});if(C_(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(t,r);if(r===null||r===!1)return this.attr(t,r);const i=this.attr(t)||{},{items:s=[]}=i;return s.push(r),i.items=s,this.attr(t,i)}}function H$(e,t,{ctor:n}){e.prototype[t]=function(r){const i=this.append(n);return t==="mark"&&(i.type=r),i}}function G$(e,t,{ctor:n}){e.prototype[t]=function(){return this.type=null,this.append(n)}}function OT(e){return t=>{for(const[n,r]of Object.entries(e)){const{type:i}=r;i==="value"?z$(t,n,r):i==="array"?U$(t,n,r):i==="object"?j$(t,n,r):i==="node"?H$(t,n,r):i==="container"?G$(t,n,r):i==="mix"&&V$(t,n,r)}return t}}function G6(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{type:"node",ctor:n}]))}const W6={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},W$=Object.assign(Object.assign({},W6),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),Z$=Object.assign(Object.assign({},W6),{labelTransform:{type:"array"}});var X$=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let MT=class extends dR{changeData(t){var n;const r=this.getRoot();if(r)return this.attr("data",t),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(i=>{i.attr("data",t)}),r==null?void 0:r.render()}getView(){const t=this.getRoot(),{views:n}=t.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var t;return(t=this.getView())===null||t===void 0?void 0:t.scale}getScaleByChannel(t){const n=this.getScale();if(n)return n[t]}getCoordinate(){var t;return(t=this.getView())===null||t===void 0?void 0:t.coordinate}getTheme(){var t;return(t=this.getView())===null||t===void 0?void 0:t.theme}getGroup(){const t=this._key;return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}show(){const t=this.getGroup();t&&!t.isVisible()&&WM(t)}hide(){const t=this.getGroup();t&&t.isVisible()&&GM(t)}};MT=X$([OT(Z$)],MT);var Y$=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};let mR=class extends dR{changeData(t){const n=this.getRoot();if(n)return this.attr("data",t),n==null?void 0:n.render()}getMark(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(!n)return;const{markState:r}=n,i=Array.from(r.keys()).find(s=>s.key===this.attr("key"));return r.get(i)}getScale(){var t;const n=(t=this.getRoot())===null||t===void 0?void 0:t.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(t){var n,r;const i=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(i)return(r=i==null?void 0:i.scale)===null||r===void 0?void 0:r[t]}getGroup(){const t=this.attr("key");return t?this.getRoot().getContext().canvas.getRoot().getElementById(t):void 0}};mR=Y$([OT(W$)],mR);var $$=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},q$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const K$="G2_CHART_KEY";class Q$ extends MT{constructor(t){const{container:n,canvas:r,renderer:i,plugins:s,lib:l}=t,c=q$(t,["container","canvas","renderer","plugins","lib"]);super(c,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=lw(()=>{this.forceFit()},300),this._renderer=i||new aw,this._plugins=s||[],this._container=A$(n),this._emitter=new Vo,this._context={library:Object.assign(Object.assign({},l),Zl),emitter:this._emitter,canvas:r},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._context.canvas.getConfig().supportsCSSTransform=!0,this._bindAutoFit(),this._rendering=!0;const t=new Promise((s,l)=>E$(this._computedOptions(),this._context,this._createResolve(s),this._createReject(l))),[n,r,i]=k$();return t.then(r).catch(i).then(()=>this._renderTrailing()),n}options(t){if(arguments.length===0)return M$(this);const{type:n}=t;return n&&(this._previousDefinedType=n),B$(this,t,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(t,n,r){return this._emitter.on(t,n,r),this}once(t,n){return this._emitter.once(t,n),this}emit(t,...n){return this._emitter.emit(t,...n),this}off(t,n){return this._emitter.off(t,n),this}clear(){const t=this.options();this.emit(wl.BEFORE_CLEAR),this._reset(),B6(t,this._context,!1),this.emit(wl.AFTER_CLEAR)}destroy(){const t=this.options();this.emit(wl.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),B6(t,this._context,!0),this._container[z6]&&C$(this._container),this.emit(wl.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:t,height:n}=vR(this.options(),this._container);if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(wl.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(wl.AFTER_CHANGE_SIZE)}),r}changeSize(t,n){if(t===this._width&&n===this._height)return Promise.resolve(this);this.emit(wl.BEFORE_CHANGE_SIZE),this.attr("width",t),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(wl.AFTER_CHANGE_SIZE)}),r}_create(){const{library:t}=this._context,n=s=>s.startsWith("mark.")||s==="component.axisX"||s==="component.axisY"||s==="component.legends",r=["mark.mark",...Object.keys(t).filter(n)];this._marks={};for(const s of r){const l=s.split(".").pop();class c extends mR{constructor(){super({},l)}}this._marks[l]=c,this[l]=function(h){const p=this.append(c);return l==="mark"&&(p.type=h),p}}const i=["composition.view",...Object.keys(t).filter(s=>s.startsWith("composition.")&&s!=="composition.mark")];this._compositions=Object.fromEntries(i.map(s=>{const l=s.split(".").pop();let c=class extends MT{constructor(){super({},l)}};return c=$$([OT(G6(this._marks))],c),[l,c]}));for(const s of Object.values(this._compositions))OT(G6(this._compositions))(s);for(const s of i){const l=s.split(".").pop();this[l]=function(){const c=this._compositions[l];return this.type=null,this.append(c)}}}_reset(){const t=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||t.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const t=this._trailingResolve.bind(this);this._trailingResolve=null,t(this)}).catch(t=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(t)}))}_createResolve(t){return()=>{this._rendering=!1,t(this)}}_createReject(t){return n=>{this._rendering=!1,t(n)}}_computedOptions(){const t=this.options(),{key:n=K$}=t,{width:r,height:i,depth:s}=vR(t,this._container);return this._width=r,this._height=i,this._key=n,Object.assign(Object.assign({key:this._key},t),{width:r,height:i,depth:s})}_createCanvas(){const{width:t,height:n}=vR(this.options(),this._container);this._plugins.push(new sw),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new Xm({container:this._container,width:t,height:n,renderer:this._renderer})}_addToTrailing(){var t;return(t=this._trailingResolve)===null||t===void 0||t.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){const t=this.options(),{autoFit:n}=t;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}function J$(e,t){class n extends e{constructor(i){super(Object.assign(Object.assign({},i),{lib:t}))}}return n}var eq=Object.prototype.hasOwnProperty,gR=function(e,t){if(e===null||!Ev(e))return{};var n={};return TM(t,function(r){eq.call(e,r)&&(n[r]=e[r])}),n};function Z6(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function J2(e,t,n,r,i){for(var s=e.children,l,c=-1,h=s.length,p=e.value&&(r-t)/e.value;++c<h;)l=s[c],l.y0=n,l.y1=i,l.x0=t,l.x1=t+=l.value*p}function tq(){var e=1,t=1,n=0,r=!1;function i(l){var c=l.height+1;return l.x0=l.y0=n,l.x1=e,l.y1=t/c,l.eachBefore(s(t,c)),r&&l.eachBefore(Z6),l}function s(l,c){return function(h){h.children&&J2(h,h.x0,l*(h.depth+1)/c,h.x1,l*(h.depth+2)/c);var p=h.x0,v=h.y0,y=h.x1-n,b=h.y1-n;y<p&&(p=y=(p+y)/2),b<v&&(v=b=(v+b)/2),h.x0=p,h.y0=v,h.x1=y,h.y1=b}}return i.round=function(l){return arguments.length?(r=!!l,i):r},i.size=function(l){return arguments.length?(e=+l[0],t=+l[1],i):[e,t]},i.padding=function(l){return arguments.length?(n=+l,i):n},i}var nq=L(9783);function rq(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function iq(){return this.eachAfter(rq)}var yR=L(64599);function oq(e,t){var n=-1,r=yR(this),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;e.call(t,s,++n,this)}}catch(l){r.e(l)}finally{r.f()}return this}function aq(e,t){for(var n=this,r=[n],i,s,l=-1;n=r.pop();)if(e.call(t,n,++l,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function sq(e,t){for(var n=this,r=[n],i=[],s,l,c,h=-1;n=r.pop();)if(i.push(n),s=n.children)for(l=0,c=s.length;l<c;++l)r.push(s[l]);for(;n=i.pop();)e.call(t,n,++h,this);return this}function lq(e,t){var n=-1,r=yR(this),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;if(e.call(t,s,++n,this))return s}}catch(l){r.e(l)}finally{r.f()}}function uq(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function cq(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function fq(e){for(var t=this,n=hq(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function hq(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function dq(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function pq(){return Array.from(this)}function vq(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function mq(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}var X6=L(15009),gq=X6().mark(Y6);function Y6(){var e,t,n,r,i,s;return X6().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:e=this,n=[e];case 1:t=n.reverse(),n=[];case 2:if(!(e=t.pop())){c.next=8;break}return c.next=5,e;case 5:if(r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);c.next=2;break;case 8:if(n.length){c.next=1;break}case 9:case"end":return c.stop()}},gq,this)}function Lb(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=bq)):t===void 0&&(t=_q);for(var n=new Nb(e),r,i=[n],s,l,c,h;r=i.pop();)if((l=t(r.data))&&(h=(l=Array.from(l)).length))for(r.children=l,c=h-1;c>=0;--c)i.push(s=l[c]=new Nb(l[c])),s.parent=r,s.depth=r.depth+1;return n.eachBefore($6)}function yq(){return Lb(this).eachBefore(xq)}function _q(e){return e.children}function bq(e){return Array.isArray(e)?e[1]:null}function xq(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function $6(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Nb(e){this.data=e,this.depth=this.height=0,this.parent=null}Nb.prototype=Lb.prototype=nq({constructor:Nb,count:iq,each:oq,eachAfter:sq,eachBefore:aq,find:lq,sum:uq,sort:cq,path:fq,ancestors:dq,descendants:pq,leaves:vq,links:mq,copy:yq},Symbol.iterator,Y6);function _R(e,t){for(var n in t)t.hasOwnProperty(n)&&n!=="constructor"&&t[n]!==void 0&&(e[n]=t[n])}function Eq(e,t,n,r){return t&&_R(e,t),n&&_R(e,n),r&&_R(e,r),e}function bR(e){return(0,ya.Z)(e)?0:M_(e)?e.length:Object.keys(e).length}const Sq={field:"value",size:[1,1],round:!1,padding:0,sort:(e,t)=>t.value-e.value,as:["x","y"],ignoreParentValue:!0},wq="nodeIndex",eE="childNodeCount",Tq="nodeAncestor",xR="Invalid field: it must be a string!";function Aq(e,t){const{field:n,fields:r}=e;if(u(n))return n;if(Ho(n))return console.warn(xR),n[0];if(console.warn(`${xR} will try to get fields instead.`),u(r))return r;if(Ho(r)&&r.length)return r[0];if(t)return t;throw new TypeError(xR)}function Cq(e){const t=[];if(e&&e.each){let n,r;e.each(i=>{var s,l;i.parent!==n?(n=i.parent,r=0):r+=1;const c=qD((((s=i.ancestors)===null||s===void 0?void 0:s.call(i))||[]).map(h=>t.find(p=>p.name===h.name)||h),({depth:h})=>h>0&&h<i.depth);i[Tq]=c,i[eE]=((l=i.children)===null||l===void 0?void 0:l.length)||0,i[wq]=r,t.push(i)})}else e&&e.eachNode&&e.eachNode(n=>{t.push(n)});return t}function Oq(e,t){t=Eq({},Sq,t);const n=t.as;if(!Ho(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=Aq(t)}catch(h){console.warn(h)}const s=(h=>tq().size(t.size).round(t.round).padding(t.padding)(Lb(h).sum(p=>bR(p.children)?t.ignoreParentValue?0:p[r]-Q4(p.children,(v,y)=>v+y[r],0):p[r]).sort(t.sort)))(e),l=n[0],c=n[1];return s.each(h=>{var p,v;h[l]=[h.x0,h.x1,h.x1,h.x0],h[c]=[h.y1,h.y1,h.y0,h.y0],h.name=h.name||((p=h.data)===null||p===void 0?void 0:p.name)||((v=h.data)===null||v===void 0?void 0:v.label),h.data.name=h.name,["x0","x1","y0","y1"].forEach(y=>{n.indexOf(y)===-1&&delete h[y]})}),Cq(s)}var Mq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Fb="sunburst",ER="markType",I0e="value",q6="path",RT="ancestor-node";function Rq(e){const{data:t,encode:n}=e,{color:r,value:i}=n,l=Oq(t,{field:i,type:"hierarchy.partition",as:["x","y"]}),c=[];return l.forEach(h=>{var p,v,y,b;if(h.depth===0)return null;let T=h.data.name;const M=[T];let R=Object.assign({},h);for(;R.depth>1;)T=`${(p=R.parent.data)===null||p===void 0?void 0:p.name} / ${T}`,M.unshift((v=R.parent.data)===null||v===void 0?void 0:v.name),R=R.parent;const I=Object.assign(Object.assign(Object.assign({},gR(h.data,[i])),{[q6]:T,[RT]:R.data.name}),h);r&&r!==RT&&(I[r]=h.data[r]||((b=(y=h.parent)===null||y===void 0?void 0:y.data)===null||b===void 0?void 0:b[r])),c.push(I)}),c.map(h=>Object.assign(Object.assign({},h),{x:h.x.slice(0,2),y:[h.y[2],h.y[0]],fillOpacity:Math.pow(.85,h.depth)}))}const K6={id:Fb,encode:{x:"x",y:"y",key:q6,color:RT,value:"value"},axis:{x:!1,y:!1},style:{[ER]:Fb,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[eE]:eE,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},Q6=e=>{const{encode:t,data:n=[],legend:r}=e,i=Mq(e,["encode","data","legend"]),s=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(sl(i,["coordinate","innerRadius"],.2),1e-5)}),l=Object.assign(Object.assign({},K6.encode),t),{value:c}=l,h=Rq({encode:l,data:n});return[hi({},K6,Object.assign(Object.assign({type:"rect",data:h,encode:l,tooltip:{title:"path",items:[p=>({name:c,value:p[c]})]}},i),{coordinate:s}))]};Q6.props={};var Pq=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return TM(e,function(n,r){_c(e)&&r==="prototype"||t.push(r)}),t},SR=Pq,Iq=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const Dq=e=>e.querySelectorAll(".element").filter(t=>sl(t,["style",ER])===Fb);function Lq(e){return Ra(e).select(`.${qo}`).node()}const Nq={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function Fq(e={}){const{breadCrumb:t={},isFixedColor:n=!1,duration:r}=e,i=hi({},Nq,t);return s=>{const{update:l,setState:c,container:h,view:p,options:v}=s,y=Lq(h),b=v.marks.find(({id:H})=>H===Fb),{state:T}=b,M=new yc;y.appendChild(M);const R=(H,X)=>Iq(this,void 0,void 0,function*(){if(M.removeChildren(),H){const Y=new oc({style:Object.assign({x:0,text:i.rootText,depth:0},i.style)});M.appendChild(Y);let ne="";const pe=H==null?void 0:H.split(" / ");let ye=i.style.y,De=M.getBBox().width;const Xe=y.getBBox().width,Ke=pe.map((mt,Qe)=>{const ut=new oc({style:Object.assign(Object.assign({x:De,text:" / "},i.style),{y:ye})});M.appendChild(ut),De+=ut.getBBox().width,ne=`${ne}${mt} / `;const ct=new oc({name:ne.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:mt,x:De,depth:Qe+1},i.style),{y:ye})});return M.appendChild(ct),De+=ct.getBBox().width,De>Xe&&(ye=M.getBBox().height,De=0,ut.attr({x:De,y:ye}),De+=ut.getBBox().width,ct.attr({x:De,y:ye}),De+=ct.getBBox().width),ct});[Y,...Ke].forEach((mt,Qe)=>{if(Qe===Ke.length)return;const ut=Object.assign({},mt.attributes);mt.attr("cursor","pointer"),mt.addEventListener("mouseenter",()=>{mt.attr(i.active)}),mt.addEventListener("mouseleave",()=>{mt.attr(ut)}),mt.addEventListener("click",()=>{R(mt.name,sl(mt,["style","depth"]))})})}c("drillDown",Y=>{const{marks:ne}=Y,pe=ne.map(ye=>{if(ye.id!==Fb&&ye.type!=="rect")return ye;const{data:De}=ye,Xe=Object.fromEntries(["color"].map(mt=>[mt,{domain:p.scale[mt].getOptions().domain}])),Ke=De.filter(mt=>{const Qe=mt.path;return n||(mt[RT]=Qe.split(" / ")[X]),H?new RegExp(`^${H}.+`).test(Qe):!0});return hi({},ye,n?{data:Ke,scale:Xe}:{data:Ke})});return Object.assign(Object.assign({},Y),{marks:pe})}),yield l()}),I=H=>{const X=H.target;if(sl(X,["style",ER])!==Fb||sl(X,["markType"])!=="rect"||!sl(X,["style",eE]))return;const Y=sl(X,["__data__","key"]),ne=sl(X,["style","depth"]);X.style.cursor="pointer",R(Y,ne)};y.addEventListener("click",I);const N=SR(Object.assign(Object.assign({},T.active),T.inactive)),z=()=>{Dq(y).forEach(X=>{const Y=sl(X,["style",eE]);if(sl(X,["style","cursor"])!=="pointer"&&Y){X.style.cursor="pointer";const pe=gR(X.attributes,N),ye=hi(pe,T.inactive);X.addEventListener("mouseenter",()=>{r?(X.attr("zIndex",sl(T,["active","zIndex"],2)),X.animate([B_(ye,["zIndex"]),B_(T.active,["zIndex"])],{duration:r,fill:"forwards"})):X.attr(T.active)}),X.addEventListener("mouseleave",()=>{r?(X.animate([B_(T.active,["zIndex"]),B_(ye,["zIndex"])],{duration:r,fill:"forwards"}),setTimeout(()=>{X.attr("zIndex",sl(ye,["zIndex"],1))},r)):X.attr(ye)})}})};return y.addEventListener("mousemove",z),()=>{M.remove(),y.removeEventListener("click",I),y.removeEventListener("mousemove",z)}}}Ar.enableCSSParsing=!1;function Bq(){return{"interaction.drillDown":Fq,"mark.sunburst":Q6}}const J6=()=>[["cartesian"]];J6.props={};const wR=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];wR.props={transform:!0};const kq=(e={})=>{const t={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},t),e)},eN=e=>{const{startAngle:t,endAngle:n,innerRadius:r,outerRadius:i}=kq(e);return[...wR(),...R_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};eN.props={};const TR=()=>[["parallel",0,1,0,1]];TR.props={};const tN=({focusX:e=0,focusY:t=0,distortionX:n=2,distortionY:r=2,visual:i=!1})=>[["fisheye",e,t,n,r,i]];tN.props={transform:!0};const nN=e=>{const{startAngle:t=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=e;return[...TR(),...R_({startAngle:t,endAngle:n,innerRadius:r,outerRadius:i})]};nN.props={};const rN=({value:e})=>t=>t.map(()=>e);rN.props={};const iN=({value:e})=>t=>t.map(n=>n[e]);iN.props={};const oN=({value:e})=>t=>t.map(e);oN.props={};const aN=({value:e})=>()=>e;aN.props={};function Bu(e,t){if(e!==null)return{type:"column",value:e,field:t}}function PT(e,t){const n=Bu(e,t);return Object.assign(Object.assign({},n),{inferred:!0})}function IT(e,t){if(e!==null)return{type:"column",value:e,field:t,visual:!0}}function zq(e,t){const n=Bu(e,t);return Object.assign(Object.assign({},n),{constant:!1})}function hy(e,t){const n=[];for(const r of e)n[r]=t;return n}function il(e,t){const n=e[t];if(!n)return[null,null];const{value:r,field:i=null}=n;return[r,i]}function tE(e,...t){for(const n of t)if(typeof n=="string"){const[r,i]=il(e,n);if(r!==null)return[r,i]}else return[n,null];return[null,null]}function nE(e){return e instanceof Date?!1:typeof e=="object"}const rE=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;return r!==void 0?[e,t]:[e,hi({},t,{encode:{y1:PT(hy(e,0))}})]};rE.props={};const X_=()=>(e,t)=>{const{encode:n}=t,{x:r}=n;return r!==void 0?[e,t]:[e,hi({},t,{encode:{x:PT(hy(e,0))},scale:{x:{guide:null}}})]};X_.props={};const Y_=(e,t)=>W2(Object.assign({colorAttribute:"fill"},e),t);Y_.props=Object.assign(Object.assign({},W2.props),{defaultMarker:"square"});const DT=(e,t)=>W2(Object.assign({colorAttribute:"stroke"},e),t);DT.props=Object.assign(Object.assign({},W2.props),{defaultMarker:"hollowSquare"});function Bb(){}function sN(e){this._context=e}sN.prototype={areaStart:Bb,areaEnd:Bb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function AR(e){return new sN(e)}var lN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Uq(e,t,n){const[r,i,s,l]=e;if(tu(n)){const p=[t?t[0][0]:i[0],i[1]],v=[t?t[3][0]:s[0],s[1]];return[r,p,v,l]}const c=[i[0],t?t[0][1]:i[1]],h=[s[0],t?t[3][1]:s[1]];return[r,c,h,l]}const CR=(e,t)=>{const{adjustPoints:n=Uq}=e,r=lN(e,["adjustPoints"]),{coordinate:i,document:s}=t;return(l,c,h,p)=>{const{index:v}=c,{color:y}=h,b=lN(h,["color"]),T=p[v+1],M=n(l,T,i),R=!!tu(i),[I,N,z,H]=R?rT(M):M,{color:X=y,opacity:Y}=c,ne=ay().curve(AR)([I,N,z,H]);return Ra(s.createElement("path",{})).call(sa,b).style("d",ne).style("fill",X).style("fillOpacity",Y).call(sa,r).node()}};CR.props={defaultMarker:"square"};function jq(e,t,n){const[r,i,s,l]=e;if(tu(n)){const p=[t?t[0][0]:(i[0]+s[0])/2,i[1]],v=[t?t[3][0]:(i[0]+s[0])/2,s[1]];return[r,p,v,l]}const c=[i[0],t?t[0][1]:(i[1]+s[1])/2],h=[s[0],t?t[3][1]:(i[1]+s[1])/2];return[r,c,h,l]}const uN=(e,t)=>CR(Object.assign({adjustPoints:jq},e),t);uN.props={defaultMarker:"square"};function iE(e){return Math.abs(e)>10?String(e):e.toString().padStart(2,"0")}function Vq(e){const t=e.getFullYear(),n=iE(e.getMonth()+1),r=iE(e.getDate()),i=`${t}-${n}-${r}`,s=e.getHours(),l=e.getMinutes(),c=e.getSeconds();return s||l||c?`${i} ${iE(s)}:${iE(l)}:${iE(c)}`:i}const LT=(e={})=>{const{channel:t="x"}=e;return(n,r)=>{const{encode:i}=r,{tooltip:s}=r;if(Sv(s))return[n,r];const{title:l}=s;if(l!==void 0)return[n,r];const c=Object.keys(i).filter(p=>p.startsWith(t)).filter(p=>!i[p].inferred).map(p=>il(i,p)).filter(([p])=>p).map(p=>p[0]);if(c.length===0)return[n,r];const h=[];for(const p of n)h[p]={value:c.map(v=>v[p]instanceof Date?Vq(v[p]):v[p]).join(", ")};return[n,hi({},r,{tooltip:{title:h}})]}};LT.props={};const NT=e=>{const{channel:t}=e;return(n,r)=>{const{encode:i,tooltip:s}=r;if(Sv(s))return[n,r];const{items:l=[]}=s;if(!l||l.length>0)return[n,r];const h=(Array.isArray(t)?t:[t]).flatMap(p=>Object.keys(i).filter(v=>v.startsWith(p)).map(v=>{const{field:y,value:b,inferred:T=!1,aggregate:M}=i[v];return T?null:M&&b?{channel:v}:y?{field:y}:b?{channel:v}:null}).filter(v=>v!==null));return[n,hi({},r,{tooltip:{items:h}})]}};NT.props={};var Hq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const cN=()=>(e,t)=>{const{encode:n}=t,{key:r}=n,i=Hq(n,["key"]);if(r!==void 0)return[e,t];const s=Object.values(i).map(({value:c})=>c),l=e.map(c=>s.filter(Array.isArray).map(h=>h[c]).join("-"));return[e,hi({},t,{encode:{key:Bu(l)}})]};cN.props={};function fN(e={}){const{shapes:t}=e;return[{name:"color"},{name:"opacity"},{name:"shape",range:t},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function qd(e={}){return[...fN(e),{name:"title",scale:"identity"}]}function D0e(){return[{type:MaybeTitle,channel:"color"},{type:MaybeTooltip,channel:["x","y","z"]}]}function dy(){return[{type:LT,channel:"color"},{type:NT,channel:["x","y"]}]}function kb(){return[{type:LT,channel:"x"},{type:NT,channel:["y"]}]}function Gq(){return[{type:LT,channel:"color"},{type:NT,channel:["position"]}]}function zb(e={}){return fN(e)}function Jc(){return[{type:cN}]}function yf(){return[]}function OR(e,t){return e.getBandWidth(e.invert(t))}function $_(e,t,n={}){const{x:r,y:i,series:s}=t,{x:l,y:c,series:h}=e,{style:{bandOffset:p=h?0:.5,bandOffsetX:v=p,bandOffsetY:y=p}={}}=n,b=!!(l!=null&&l.getBandWidth),T=!!(c!=null&&c.getBandWidth),M=!!(h!=null&&h.getBandWidth);return!b&&!T?R=>R:(R,I)=>{const N=b?OR(l,r[I]):0,z=T?OR(c,i[I]):0,X=M&&s?(()=>(OR(h,s[I])/2+ +s[I])*N)():0,[Y,ne]=R;return[Y+v*N+X,ne+y*z]}}function FT(e){return parseFloat(e)/100}function MR(e,t,n,r){const{x:i,y:s}=n,{innerWidth:l,innerHeight:c}=r.getOptions(),h=Array.from(e,p=>{const v=i[p],y=s[p],b=typeof v=="string"?FT(v)*l:+v,T=typeof y=="string"?FT(y)*c:+y;return[[b,T]]});return[e,h]}function gm(e){return typeof e=="function"?e:t=>t[e]}function RR(e,t){return Array.from(e,gm(t))}function PR(e,t){const{source:n=v=>v.source,target:r=v=>v.target,value:i=v=>v.value}=t,{links:s,nodes:l}=e,c=RR(s,n),h=RR(s,r),p=RR(s,i);return{links:s.map((v,y)=>({target:h[y],source:c[y],value:p[y]})),nodes:l||Array.from(new Set([...c,...h]),v=>({key:v}))}}function hN(e,t){return e.getBandWidth(e.invert(t))}const dN={rect:Y_,hollow:DT,funnel:CR,pyramid:uN},pN=()=>(e,t,n,r)=>{const{x:i,y:s,y1:l,series:c,size:h}=n,p=t.x,v=t.series,[y]=r.getSize(),b=h?h.map(R=>+R/y):null,T=h?(R,I,N)=>{const z=R+I/2,H=b[N];return[z-H/2,z+H/2]}:(R,I,N)=>[R,R+I],M=Array.from(e,R=>{const I=hN(p,i[R]),N=v?hN(v,c==null?void 0:c[R]):1,z=I*N,H=(+(c==null?void 0:c[R])||0)*I,X=+i[R]+H,[Y,ne]=T(X,z,R),pe=+s[R],ye=+l[R];return[[Y,pe],[ne,pe],[ne,ye],[Y,ye]].map(Qe=>r.map(Qe))});return[e,M]};pN.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:dN,channels:[...qd({shapes:Object.keys(dN)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...Jc(),{type:rE},{type:X_}],postInference:[...yf(),...kb()],interaction:{shareTooltip:!0}};const vN={rect:Y_,hollow:DT},mN=()=>(e,t,n,r)=>{const{x:i,x1:s,y:l,y1:c}=n,h=Array.from(e,p=>{const v=[+i[p],+l[p]],y=[+s[p],+l[p]],b=[+s[p],+c[p]],T=[+i[p],+c[p]];return[v,y,b,T].map(M=>r.map(M))});return[e,h]};mN.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:vN,channels:[...qd({shapes:Object.keys(vN)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Jc(),{type:rE}],postInference:[...yf(),...kb()],interaction:{shareTooltip:!0}};var gN=IR(U2);function yN(e){this._curve=e}yN.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function IR(e){function t(n){return new yN(e(n))}return t._curve=e,t}function oE(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(IR(n)):t()._curve},e}function Wq(){return oE(ay().curve(gN))}var _N=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Zq=xb(e=>{const{d1:t,d2:n,style1:r,style2:i}=e.attributes,s=e.ownerDocument;Ra(e).maybeAppend("line",()=>s.createElement("path",{})).style("d",t).call(sa,r),Ra(e).maybeAppend("line1",()=>s.createElement("path",{})).style("d",n).call(sa,i)});function Xq(e,t){const n=[],r=[];let i=!1,s=null;for(const l of e)!t(l[0])||!t(l[1])?i=!0:(n.push(l),i&&(i=!1,r.push([s,l])),s=l);return[n,r]}const U0=(e,t)=>{const{curve:n,gradient:r=!1,gradientColor:i="between",defined:s=v=>!Number.isNaN(v)&&v!==void 0&&v!==null,connect:l=!1}=e,c=_N(e,["curve","gradient","gradientColor","defined","connect"]),{coordinate:h,document:p}=t;return(v,y,b)=>{const{color:T,lineWidth:M}=b,R=_N(b,["color","lineWidth"]),{color:I=T,size:N=M,seriesColor:z,seriesX:H,seriesY:X}=y,Y=DD(h,y),ne=tu(h),pe=r&&z?ID(z,H,X,r,i,ne):I,ye=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},R),pe&&{stroke:pe}),N&&{lineWidth:N}),Y&&{transform:Y}),c);let De;if(nu(h)){const ct=h.getCenter();De=gt=>Wq().angle((Xt,Rt)=>bb(Ic(gt[Rt],ct))).radius((Xt,Rt)=>sc(gt[Rt],ct)).defined(([Xt,Rt])=>s(Xt)&&s(Rt)).curve(n)(gt)}else De=ay().x(ct=>ct[0]).y(ct=>ct[1]).defined(([ct,gt])=>s(ct)&&s(gt)).curve(n);const[Xe,Ke]=Xq(v,s),mt=Eo(ye,"connect"),Qe=!!Ke.length;if(!Qe||l&&!Object.keys(mt).length)return Ra(p.createElement("path",{})).style("d",De(Xe)||[]).call(sa,ye).node();if(Qe&&!l)return Ra(p.createElement("path",{})).style("d",De(v)).call(sa,ye).node();const ut=ct=>ct.map(De).join(",");return Ra(new Zq).style("style1",Object.assign(Object.assign({},ye),mt)).style("style2",ye).style("d1",ut(Ke)).style("d2",De(v)).node()}};U0.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const bN=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=nu(n)?AR:U2;return U0(Object.assign({curve:i},e),t)(...r)}};bN.props=Object.assign(Object.assign({},U0.props),{defaultMarker:"line"});function DR(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function LR(e,t){this._context=e,this._k=(1-t)/6}LR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:DR(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:DR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var L0e=function e(t){function n(r){return new LR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function NR(e,t){this._context=e,this._k=(1-t)/6}NR.prototype={areaStart:Bb,areaEnd:Bb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:DR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var N0e=function e(t){function n(r){return new NR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function xN(e,t,n){var r=e._x1,i=e._y1,s=e._x2,l=e._y2;if(e._l01_a>pd){var c=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,h=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*c-e._x0*e._l12_2a+e._x2*e._l01_2a)/h,i=(i*c-e._y0*e._l12_2a+e._y2*e._l01_2a)/h}if(e._l23_a>pd){var p=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,v=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*p+e._x1*e._l23_2a-t*e._l12_2a)/v,l=(l*p+e._y1*e._l23_2a-n*e._l12_2a)/v}e._context.bezierCurveTo(r,i,s,l,e._x2,e._y2)}function EN(e,t){this._context=e,this._alpha=t}EN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:xN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var F0e=function e(t){function n(r){return t?new EN(r,t):new LR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function SN(e,t){this._context=e,this._alpha=t}SN.prototype={areaStart:Bb,areaEnd:Bb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:xN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var wN=function e(t){function n(r){return t?new SN(r,t):new NR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function TN(e){return e<0?-1:1}function AN(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),c=(s*i+l*r)/(r+i);return(TN(s)+TN(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(c))||0}function CN(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function FR(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,c=(s-r)/3;e._context.bezierCurveTo(r+c,i+c*t,s-c,l-c*n,s,l)}function BT(e){this._context=e}BT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:FR(this,this._t0,CN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,FR(this,CN(this,n=AN(this,e,t)),n);break;default:FR(this,this._t0,n=AN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function ON(e){this._context=new MN(e)}(ON.prototype=Object.create(BT.prototype)).point=function(e,t){BT.prototype.point.call(this,t,e)};function MN(e){this._context=e}MN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function RN(e){return new BT(e)}function PN(e){return new ON(e)}var Yq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const IN=(e,t)=>{const n=Yq(e,[]),{coordinate:r}=t;return(...i)=>{const s=nu(r)?wN:tu(r)?PN:RN;return U0(Object.assign({curve:s},n),t)(...i)}};IN.props=Object.assign(Object.assign({},U0.props),{defaultMarker:"smooth"});function kT(e,t){this._context=e,this._t=t}kT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function DN(e){return new kT(e,.5)}function LN(e){return new kT(e,0)}function NN(e){return new kT(e,1)}const FN=(e,t)=>U0(Object.assign({curve:NN},e),t);FN.props=Object.assign(Object.assign({},U0.props),{defaultMarker:"hv"});const BN=(e,t)=>U0(Object.assign({curve:LN},e),t);BN.props=Object.assign(Object.assign({},U0.props),{defaultMarker:"vh"});const kN=(e,t)=>U0(Object.assign({curve:DN},e),t);kN.props=Object.assign(Object.assign({},U0.props),{defaultMarker:"hvh"});var $q=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function qq(e,t,n,r,i){const s=Ic(n,t),l=k0(s),c=l+Math.PI/2,h=[r/2*Math.cos(c),r/2*Math.sin(c)],p=[i/2*Math.cos(c),i/2*Math.sin(c)],v=[i/2*Math.cos(l),i/2*Math.sin(l)],y=[r/2*Math.cos(l),r/2*Math.sin(l)],b=nT(t,h),T=nT(n,p),M=nT(T,v),R=nT(n,v),I=Ic(R,p),N=Ic(n,p),z=Ic(t,h),H=Ic(z,y),X=Ic(t,y),Y=Ic(b,y);e.moveTo(...b),e.lineTo(...T),e.arcTo(...M,...R,i/2),e.arcTo(...I,...N,i/2),e.lineTo(...z),e.arcTo(...H,...X,r/2),e.arcTo(...Y,...b,r/2),e.closePath()}const zN=(e,t)=>{const{document:n}=t;return(r,i,s)=>{const{seriesSize:l,color:c}=i,{color:h}=s,p=$q(s,["color"]),v=z0();for(let y=0;y<r.length-1;y++){const b=r[y],T=r[y+1],M=l[y],R=l[y+1];[...b,...T].every(eu)&&qq(v,b,T,M,R)}return Ra(n.createElement("path",{})).call(sa,p).style("fill",c||h).style("d",v.toString()).call(sa,e).node()}};zN.props=Object.assign(Object.assign({},U0.props),{defaultMarker:"line"});const UN=()=>(e,t)=>{const{style:n={},encode:r}=t,{series:i}=r,{gradient:s}=n;return!s||i?[e,t]:[e,hi({},t,{encode:{series:IT(hy(e,void 0))}})]};UN.props={};const BR=()=>(e,t)=>{const{encode:n}=t,{series:r,color:i}=n;if(r!==void 0||i===void 0)return[e,t];const[s,l]=il(n,"color");return[e,hi({},t,{encode:{series:Bu(s,l)}})]};BR.props={};const jN={line:bN,smooth:IN,hv:FN,vh:BN,hvh:kN,trail:zN},Kq=(e,t,n,r)=>{var i,s;const{series:l,x:c,y:h}=n,{x:p,y:v}=t;if(c===void 0||h===void 0)throw new Error("Missing encode for x or y channel.");const y=l?Array.from(Nu(e,I=>l[I]).values()):[e],b=y.map(I=>I[0]).filter(I=>I!==void 0),T=(((i=p==null?void 0:p.getBandWidth)===null||i===void 0?void 0:i.call(p))||0)/2,M=(((s=v==null?void 0:v.getBandWidth)===null||s===void 0?void 0:s.call(v))||0)/2,R=Array.from(y,I=>I.map(N=>r.map([+c[N]+T,+h[N]+M])));return[b,R,y]},Qq=(e,t,n,r)=>{const i=Object.entries(n).filter(([l])=>l.startsWith("position")).map(([,l])=>l);if(i.length===0)throw new Error("Missing encode for position channel.");const s=Array.from(e,l=>{const c=i.map(v=>+v[l]),h=r.map(c),p=[];for(let v=0;v<h.length;v+=2)p.push([h[v],h[v+1]]);return p});return[e,s]},VN=()=>(e,t,n,r)=>(I_(r)?Qq:Kq)(e,t,n,r);VN.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:jN,channels:[...qd({shapes:Object.keys(jN)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Jc(),{type:UN},{type:BR}],postInference:[...yf(),...kb(),...Gq()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var Jq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const kR=(e,t,n)=>[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t],["Z"]];kR.style=["fill"];const HN=kR.bind(void 0);HN.style=["stroke","lineWidth"];const zT=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]];zT.style=["fill"];const GN=zT.bind(void 0);GN.style=["fill"];const WN=zT.bind(void 0);WN.style=["stroke","lineWidth"];const zR=(e,t,n)=>{const r=n*.618;return[["M",e-r,t],["L",e,t-n],["L",e+r,t],["L",e,t+n],["Z"]]};zR.style=["fill"];const ZN=zR.bind(void 0);ZN.style=["stroke","lineWidth"];const UR=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]};UR.style=["fill"];const XN=UR.bind(void 0);XN.style=["stroke","lineWidth"];const jR=(e,t,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]};jR.style=["fill"];const YN=jR.bind(void 0);YN.style=["stroke","lineWidth"];const VR=(e,t,n)=>{const r=n/2*Math.sqrt(3);return[["M",e,t-n],["L",e+r,t-n/2],["L",e+r,t+n/2],["L",e,t+n],["L",e-r,t+n/2],["L",e-r,t-n/2],["Z"]]};VR.style=["fill"];const $N=VR.bind(void 0);$N.style=["stroke","lineWidth"];const HR=(e,t,n)=>{const r=n-1.5;return[["M",e-n,t-r],["L",e+n,t+r],["L",e+n,t-r],["L",e-n,t+r],["Z"]]};HR.style=["fill"];const qN=HR.bind(void 0);qN.style=["stroke","lineWidth"];const KN=(e,t,n)=>[["M",e,t+n],["L",e,t-n]];KN.style=["stroke","lineWidth"];const QN=(e,t,n)=>[["M",e-n,t-n],["L",e+n,t+n],["M",e+n,t-n],["L",e-n,t+n]];QN.style=["stroke","lineWidth"];const JN=(e,t,n)=>[["M",e-n/2,t-n],["L",e+n/2,t-n],["M",e,t-n],["L",e,t+n],["M",e-n/2,t+n],["L",e+n/2,t+n]];JN.style=["stroke","lineWidth"];const eF=(e,t,n)=>[["M",e-n,t],["L",e+n,t],["M",e,t-n],["L",e,t+n]];eF.style=["stroke","lineWidth"];const tF=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];tF.style=["stroke","lineWidth"];const GR=(e,t,n)=>[["M",e-n,t],["L",e+n,t]];GR.style=["stroke","lineWidth"];const nF=GR.bind(void 0);nF.style=["stroke","lineWidth"];const rF=(e,t,n)=>[["M",e-n,t],["A",n/2,n/2,0,1,1,e,t],["A",n/2,n/2,0,1,0,e+n,t]];rF.style=["stroke","lineWidth"];const iF=(e,t,n)=>[["M",e-n-1,t-2.5],["L",e,t-2.5],["L",e,t+2.5],["L",e+n+1,t+2.5]];iF.style=["stroke","lineWidth"];const oF=(e,t,n)=>[["M",e-n-1,t+2.5],["L",e,t+2.5],["L",e,t-2.5],["L",e+n+1,t-2.5]];oF.style=["stroke","lineWidth"];const aF=(e,t,n)=>[["M",e-(n+1),t+2.5],["L",e-n/2,t+2.5],["L",e-n/2,t-2.5],["L",e+n/2,t-2.5],["L",e+n/2,t+2.5],["L",e+n+1,t+2.5]];aF.style=["stroke","lineWidth"];const sF=(e,t,n)=>[["M",e-5,t+2.5],["L",e-5,t],["L",e,t],["L",e,t-3],["L",e,t+3],["L",e+6.5,t+3]];sF.style=["stroke","lineWidth"];const Ub=new Map([["bowtie",HR],["cross",QN],["dash",nF],["diamond",zR],["dot",GR],["hexagon",VR],["hollowBowtie",qN],["hollowDiamond",ZN],["hollowHexagon",$N],["hollowPoint",HN],["hollowSquare",WN],["hollowTriangle",XN],["hollowTriangleDown",YN],["hv",iF],["hvh",aF],["hyphen",tF],["line",KN],["plus",eF],["point",kR],["rect",GN],["smooth",rF],["square",zT],["tick",JN],["triangleDown",jR],["triangle",UR],["vh",oF],["vhv",sF]]);function eK(e,t){var{d:n,fill:r,lineWidth:i,path:s,stroke:l,color:c}=t,h=Jq(t,["d","fill","lineWidth","path","stroke","color"]);const p=Ub.get(e)||Ub.get("point");return(...v)=>new Ki({style:Object.assign(Object.assign({},h),{d:p(...v),stroke:p.style.includes("stroke")?c||l:"",fill:p.style.includes("fill")?c||r:"",lineWidth:p.style.includes("lineWidth")?i||i||2:0})})}function B0e(e,t){Ub.set(e,t)}function k0e(e){Ub.delete(e)}var tK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function lF(e,t,n,r){if(t.length===1)return;const{size:i}=n;if(e==="fixed")return i;if(e==="normal"||T2(r)){const[[s,l],[c,h]]=t,p=Math.abs((c-s)/2),v=Math.abs((h-l)/2);return Math.max(0,(p+v)/2)}return i}const Xs=(e,t)=>{const{colorAttribute:n,symbol:r,mode:i="auto"}=e,s=tK(e,["colorAttribute","symbol","mode"]),l=Ub.get(r)||Ub.get("point"),{coordinate:c,document:h}=t;return(p,v,y)=>{const{lineWidth:b,color:T}=y,M=s.stroke?b||1:b,{color:R=T,transform:I,opacity:N}=v,[z,H]=LM(p),Y=lF(i,p,v,c)||s.r||y.r;return Ra(h.createElement("path",{})).call(sa,y).style("fill","transparent").style("d",l(z,H,Y)).style("lineWidth",M).style("transform",I).style("transformOrigin",`${z-Y} ${H-Y}`).style("stroke",R).style(DM(e),N).style(n,R).call(sa,s).node()}};Xs.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const uF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"point"},e),t);uF.props=Object.assign({defaultMarker:"hollowPoint"},Xs.props);const cF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"diamond"},e),t);cF.props=Object.assign({defaultMarker:"hollowDiamond"},Xs.props);const fF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},e),t);fF.props=Object.assign({defaultMarker:"hollowHexagon"},Xs.props);const hF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"square"},e),t);hF.props=Object.assign({defaultMarker:"hollowSquare"},Xs.props);const dF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},e),t);dF.props=Object.assign({defaultMarker:"hollowTriangleDown"},Xs.props);const pF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"triangle"},e),t);pF.props=Object.assign({defaultMarker:"hollowTriangle"},Xs.props);const vF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},e),t);vF.props=Object.assign({defaultMarker:"hollowBowtie"},Xs.props);var nK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const mF=(e,t)=>{const{colorAttribute:n,mode:r="auto"}=e,i=nK(e,["colorAttribute","mode"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{lineWidth:v,color:y}=p,b=i.stroke?v||1:v,{color:T=y,transform:M,opacity:R}=h,[I,N]=LM(c),H=lF(r,c,h,s)||i.r||p.r;return Ra(l.createElement("circle",{})).call(sa,p).style("fill","transparent").style("cx",I).style("cy",N).style("r",H).style("lineWidth",b).style("transform",M).style("transformOrigin",`${I} ${N}`).style("stroke",T).style(DM(e),R).style(n,T).call(sa,i).node()}},WR=(e,t)=>mF(Object.assign({colorAttribute:"fill"},e),t);WR.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const gF=(e,t)=>mF(Object.assign({colorAttribute:"stroke"},e),t);gF.props=Object.assign({defaultMarker:"hollowPoint"},WR.props);const yF=(e,t)=>Xs(Object.assign({colorAttribute:"fill",symbol:"point"},e),t);yF.props=Object.assign({defaultMarker:"point"},Xs.props);const _F=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"plus"},e),t);_F.props=Object.assign({defaultMarker:"plus"},Xs.props);const bF=(e,t)=>Xs(Object.assign({colorAttribute:"fill",symbol:"diamond"},e),t);bF.props=Object.assign({defaultMarker:"diamond"},Xs.props);const xF=(e,t)=>Xs(Object.assign({colorAttribute:"fill",symbol:"square"},e),t);xF.props=Object.assign({defaultMarker:"square"},Xs.props);const EF=(e,t)=>Xs(Object.assign({colorAttribute:"fill",symbol:"triangle"},e),t);EF.props=Object.assign({defaultMarker:"triangle"},Xs.props);const SF=(e,t)=>Xs(Object.assign({colorAttribute:"fill",symbol:"hexagon"},e),t);SF.props=Object.assign({defaultMarker:"hexagon"},Xs.props);const wF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"cross"},e),t);wF.props=Object.assign({defaultMarker:"cross"},Xs.props);const TF=(e,t)=>Xs(Object.assign({colorAttribute:"fill",symbol:"bowtie"},e),t);TF.props=Object.assign({defaultMarker:"bowtie"},Xs.props);const AF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},e),t);AF.props=Object.assign({defaultMarker:"hyphen"},Xs.props);const CF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"line"},e),t);CF.props=Object.assign({defaultMarker:"line"},Xs.props);const OF=(e,t)=>Xs(Object.assign({colorAttribute:"stroke",symbol:"tick"},e),t);OF.props=Object.assign({defaultMarker:"tick"},Xs.props);const MF=(e,t)=>Xs(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},e),t);MF.props=Object.assign({defaultMarker:"triangleDown"},Xs.props);const UT=()=>(e,t)=>{const{encode:n}=t,{y:r}=n;return r!==void 0?[e,t]:[e,hi({},t,{encode:{y:PT(hy(e,0))},scale:{y:{guide:null}}})]};UT.props={};const RF=()=>(e,t)=>{const{encode:n}=t,{size:r}=n;return r!==void 0?[e,t]:[e,hi({},t,{encode:{size:IT(hy(e,3))}})]};RF.props={};const PF={hollow:uF,hollowDiamond:cF,hollowHexagon:fF,hollowSquare:hF,hollowTriangleDown:dF,hollowTriangle:pF,hollowBowtie:vF,hollowCircle:gF,point:yF,plus:_F,diamond:bF,square:xF,triangle:EF,hexagon:SF,cross:wF,bowtie:TF,hyphen:AF,line:CF,tick:OF,triangleDown:MF,circle:WR},IF=e=>(t,n,r,i)=>{const{x:s,y:l,x1:c,y1:h,size:p,dx:v,dy:y}=r,[b,T]=i.getSize(),M=$_(n,r,e),R=N=>{const z=+((v==null?void 0:v[N])||0),H=+((y==null?void 0:y[N])||0),X=c?(+s[N]+ +c[N])/2:+s[N],Y=h?(+l[N]+ +h[N])/2:+l[N],ne=X+z,pe=Y+H;return[ne,pe]},I=p?Array.from(t,N=>{const[z,H]=R(N),X=+p[N],Y=X/b,ne=X/T,pe=[z-Y,H-ne],ye=[z+Y,H+ne];return[i.map(M(pe,N)),i.map(M(ye,N))]}):Array.from(t,N=>[i.map(M(R(N),N))]);return[t,I]};IF.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:PF,channels:[...qd({shapes:Object.keys(PF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...Jc(),{type:X_},{type:UT}],postInference:[...yf(),{type:RF},...dy()]};const DF=(e,t)=>{const{coordinate:n}=t;return(r,i,s)=>{const{color:l,text:c="",fontSize:h,rotate:p=0,transform:v=""}=i,y={text:String(c),stroke:l,fill:l,fontSize:h},[[b,T]]=r;return Ra(new UD).style("x",b).style("y",T).call(sa,s).style("transform",`${v}rotate(${+p})`).style("coordCenter",n.getCenter()).call(sa,y).call(sa,e).node()}};DF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var ZR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function rK(e){const t=e/Math.sqrt(2),n=e*Math.sqrt(2),[r,i]=[-t,t-n],[s,l]=[0,0],[c,h]=[t,t-n];return[["M",r,i],["A",e,e,0,1,1,c,h],["L",s,l],["Z"]]}function iK(e){const{min:t,max:n}=e.getLocalBounds();return[(t[0]+n[0])*.5,(t[1]+n[1])*.5]}const oK=xb(e=>{const t=e.attributes,{class:n,x:r,y:i,transform:s}=t,l=ZR(t,["class","x","y","transform"]),c=Eo(l,"marker"),{size:h=24}=c,p=()=>rK(h/2),v=Ra(e).maybeAppend("marker",()=>new du({})).call(T=>T.node().update(Object.assign({symbol:p},c))).node(),[y,b]=iK(v);Ra(e).maybeAppend("text","text").style("x",y).style("y",b).call(sa,l)}),LF=(e,t)=>{const n=ZR(e,[]);return(r,i,s)=>{const{color:l}=s,c=ZR(s,["color"]),{color:h=l,text:p=""}=i,v={text:String(p),stroke:h,fill:h},[[y,b]]=r;return Ra(new oK).call(sa,c).style("transform",`translate(${y},${b})`).call(sa,v).call(sa,n).node()}};LF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const NF=(e,t)=>{const{coordinate:n}=t;return(r,i,s)=>{const{color:l,text:c="",fontSize:h,rotate:p=0,transform:v=""}=i,y={text:String(c),stroke:l,fill:l,fontSize:h,textAlign:"center",textBaseline:"middle"},[[b,T]]=r;return Ra(new oc).style("x",b).style("y",T).call(sa,s).style("transformOrigin","center center").style("transform",`${v}rotate(${p}deg)`).style("coordCenter",n.getCenter()).call(sa,y).call(sa,e).node()}};NF.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const jT=()=>(e,t)=>{const{data:n}=t;if(!Array.isArray(n)||n.some(nE))return[e,t];const r=Array.isArray(n[0])?n:[n],i=r.map(l=>l[0]),s=r.map(l=>l[1]);return[e,hi({},t,{encode:{x:Bu(i),y:Bu(s)}})]};jT.props={};var FF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const VT=()=>(e,t)=>{const{data:n,style:r={}}=t,i=FF(t,["data","style"]),{x:s,y:l}=r,c=FF(r,["x","y"]);if(s==null||l==null)return[e,t];const h=s||0,p=l||0;return[[0],hi({},i,{data:[0],cartesian:!0,encode:{x:Bu([h]),y:Bu([p])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:c})]};VT.props={};const BF={text:DF,badge:LF,tag:NF},kF=e=>{const{cartesian:t=!1}=e;return t?MR:(n,r,i,s)=>{const{x:l,y:c}=i,h=$_(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};kF.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:BF,channels:[...qd({shapes:Object.keys(BF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...Jc(),{type:jT},{type:VT}],postInference:[...yf(),...dy()]};const XR=()=>(e,t)=>[e,hi({scale:{x:{padding:0},y:{padding:0}}},t)];XR.props={};const zF={cell:Y_,hollow:DT},UF=()=>(e,t,n,r)=>{const{x:i,y:s}=n,l=t.x,c=t.y,h=Array.from(e,p=>{const v=l.getBandWidth(l.invert(+i[p])),y=c.getBandWidth(c.invert(+s[p])),b=+i[p],T=+s[p],M=[b,T],R=[b+v,T],I=[b+v,T+y],N=[b,T+y];return[M,R,I,N].map(z=>r.map(z))});return[e,h]};UF.props={defaultShape:"cell",defaultLabelShape:"label",shape:zF,composite:!1,channels:[...qd({shapes:Object.keys(zF)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...Jc(),{type:X_},{type:UT},{type:XR}],postInference:[...yf(),...dy()]};function YR(e,t,n){var r=null,i=Wu(!0),s=null,l=U2,c=null,h=BM(p);e=typeof e=="function"?e:e===void 0?kD:Wu(+e),t=typeof t=="function"?t:Wu(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?zD:Wu(+n);function p(y){var b,T,M,R=(y=ND(y)).length,I,N=!1,z,H=new Array(R),X=new Array(R);for(s==null&&(c=l(z=h())),b=0;b<=R;++b){if(!(b<R&&i(I=y[b],b,y))===N)if(N=!N)T=b,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),M=b-1;M>=T;--M)c.point(H[M],X[M]);c.lineEnd(),c.areaEnd()}N&&(H[b]=+e(I,b,y),X[b]=+t(I,b,y),c.point(r?+r(I,b,y):H[b],n?+n(I,b,y):X[b]))}if(z)return c=null,z+""||null}function v(){return ay().defined(i).curve(l).context(s)}return p.x=function(y){return arguments.length?(e=typeof y=="function"?y:Wu(+y),r=null,p):e},p.x0=function(y){return arguments.length?(e=typeof y=="function"?y:Wu(+y),p):e},p.x1=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:Wu(+y),p):r},p.y=function(y){return arguments.length?(t=typeof y=="function"?y:Wu(+y),n=null,p):t},p.y0=function(y){return arguments.length?(t=typeof y=="function"?y:Wu(+y),p):t},p.y1=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:Wu(+y),p):n},p.lineX0=p.lineY0=function(){return v().x(e).y(t)},p.lineY1=function(){return v().x(e).y(n)},p.lineX1=function(){return v().x(r).y(t)},p.defined=function(y){return arguments.length?(i=typeof y=="function"?y:Wu(!!y),p):i},p.curve=function(y){return arguments.length?(l=y,s!=null&&(c=l(s)),p):l},p.context=function(y){return arguments.length?(y==null?s=c=null:c=l(s=y),p):s},p}function aK(){var e=YR().curve(gN),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,s=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return oE(n())},delete e.lineX0,e.lineEndAngle=function(){return oE(r())},delete e.lineX1,e.lineInnerRadius=function(){return oE(i())},delete e.lineY0,e.lineOuterRadius=function(){return oE(s())},delete e.lineY1,e.curve=function(l){return arguments.length?t(IR(l)):t()._curve},e}var sK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function lK(e,t){const n=[],r=[],i=[];let s=!1,l=null;const c=e.length/2;for(let h=0;h<c;h++){const p=e[h],v=e[h+c];if([...p,...v].some(y=>!t(y)))s=!0;else{if(n.push(p),r.push(v),s&&l){s=!1;const[y,b]=l;i.push([y,p,b,v])}l=[p,v]}}return[n.concat(r),i]}const jF=xb(e=>{const{areaPath:t,connectPath:n,areaStyle:r,connectStyle:i}=e.attributes,s=e.ownerDocument;Ra(e).maybeAppend("connect-path",()=>s.createElement("path",{})).style("d",n).call(sa,i),Ra(e).maybeAppend("area-path",()=>s.createElement("path",{})).style("d",t).call(sa,r)}),Cv=(e,t)=>{const{curve:n,gradient:r=!1,defined:i=p=>!Number.isNaN(p)&&p!==void 0&&p!==null,connect:s=!1}=e,l=sK(e,["curve","gradient","defined","connect"]),{coordinate:c,document:h}=t;return(p,v,y)=>{const{color:b}=y,{color:T=b,seriesColor:M,seriesX:R,seriesY:I}=v,N=tu(c),z=DD(c,v),H=r&&M?ID(M,R,I,r,void 0,N):T,X=Object.assign(Object.assign(Object.assign(Object.assign({},y),{stroke:H,fill:H}),z&&{transform:z}),l),[Y,ne]=lK(p,i),pe=Eo(X,"connect"),ye=!!ne.length,De=Xe=>Ra(h.createElement("path",{})).style("d",Xe||"").call(sa,X).node();if(nu(c)){const Xe=Ke=>{const mt=c.getCenter(),Qe=Ke.slice(0,Ke.length/2),ut=Ke.slice(Ke.length/2);return aK().angle((ct,gt)=>bb(Ic(Qe[gt],mt))).outerRadius((ct,gt)=>sc(Qe[gt],mt)).innerRadius((ct,gt)=>sc(ut[gt],mt)).defined((ct,gt)=>[...Qe[gt],...ut[gt]].every(i)).curve(n)(ut)};return!ye||s&&!Object.keys(pe).length?De(Xe(Y)):ye&&!s?De(Xe(p)):Ra(new jF).style("areaStyle",X).style("connectStyle",Object.assign(Object.assign({},pe),l)).style("areaPath",Xe(p)).style("connectPath",ne.map(Xe).join("")).node()}else{const Xe=Ke=>{const mt=Ke.slice(0,Ke.length/2),Qe=Ke.slice(Ke.length/2);return N?YR().y((ut,ct)=>mt[ct][1]).x1((ut,ct)=>mt[ct][0]).x0((ut,ct)=>Qe[ct][0]).defined((ut,ct)=>[...mt[ct],...Qe[ct]].every(i)).curve(n)(mt):YR().x((ut,ct)=>mt[ct][0]).y1((ut,ct)=>mt[ct][1]).y0((ut,ct)=>Qe[ct][1]).defined((ut,ct)=>[...mt[ct],...Qe[ct]].every(i)).curve(n)(mt)};return!ye||s&&!Object.keys(pe).length?De(Xe(Y)):ye&&!s?De(Xe(p)):Ra(new jF).style("areaStyle",X).style("connectStyle",Object.assign(Object.assign({},pe),l)).style("areaPath",Xe(p)).style("connectPath",ne.map(Xe).join("")).node()}}};Cv.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const VF=(e,t)=>{const{coordinate:n}=t;return(...r)=>{const i=nu(n)?AR:U2;return Cv(Object.assign({curve:i},e),t)(...r)}};VF.props=Object.assign(Object.assign({},Cv.props),{defaultMarker:"square"});var uK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const HF=(e,t)=>{const n=uK(e,[]),{coordinate:r}=t;return(...i)=>{const s=nu(r)?wN:tu(r)?PN:RN;return Cv(Object.assign({curve:s},n),t)(...i)}};HF.props=Object.assign(Object.assign({},Cv.props),{defaultMarker:"smooth"});const GF=(e,t)=>(...n)=>Cv(Object.assign({curve:DN},e),t)(...n);GF.props=Object.assign(Object.assign({},Cv.props),{defaultMarker:"hvh"});const WF=(e,t)=>(...n)=>Cv(Object.assign({curve:LN},e),t)(...n);WF.props=Object.assign(Object.assign({},Cv.props),{defaultMarker:"vh"});const ZF=(e,t)=>(...n)=>Cv(Object.assign({curve:NN},e),t)(...n);ZF.props=Object.assign(Object.assign({},Cv.props),{defaultMarker:"hv"});const XF={area:VF,smooth:HF,hvh:GF,vh:WF,hv:ZF},YF=()=>(e,t,n,r)=>{var i,s;const{x:l,y:c,y1:h,series:p}=n,{x:v,y}=t,b=p?Array.from(Nu(e,N=>p[N]).values()):[e],T=b.map(N=>N[0]).filter(N=>N!==void 0),M=(((i=v==null?void 0:v.getBandWidth)===null||i===void 0?void 0:i.call(v))||0)/2,R=(((s=y==null?void 0:y.getBandWidth)===null||s===void 0?void 0:s.call(y))||0)/2,I=Array.from(b,N=>{const z=N.length,H=new Array(z*2);for(let X=0;X<N.length;X++){const Y=N[X];H[X]=r.map([+l[Y]+M,+c[Y]+R]),H[z+X]=r.map([+l[Y]+M,+h[Y]+R])}return H});return[T,I,b]};YF.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:XF,channels:[...qd({shapes:Object.keys(XF)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Jc(),{type:BR},{type:rE},{type:XR}],postInference:[...yf(),...kb()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const $F=()=>(e,t)=>{const{encode:n}=t,{y1:r}=n;if(r)return[e,t];const[i]=il(n,"y");return[e,hi({},t,{encode:{y1:Bu([...i])}})]};$F.props={};const qF=()=>(e,t)=>{const{encode:n}=t,{x1:r}=n;if(r)return[e,t];const[i]=il(n,"x");return[e,hi({},t,{encode:{x1:Bu([...i])}})]};qF.props={};var KF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const $R=(e,t)=>{const{arrow:n=!0,arrowSize:r="40%"}=e,i=KF(e,["arrow","arrowSize"]),{document:s}=t;return(l,c,h)=>{const{defaultColor:p}=h,v=KF(h,["defaultColor"]),{color:y=p,transform:b}=c,[T,M]=l,R=z0();if(R.moveTo(...T),R.lineTo(...M),n){const[I,N]=QG(T,M,{arrowSize:r});R.moveTo(...M),R.lineTo(...I),R.moveTo(...M),R.lineTo(...N)}return Ra(s.createElement("path",{})).call(sa,v).style("d",R.toString()).style("stroke",y).style("transform",b).call(sa,i).node()}};$R.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const QF=(e,t)=>{const{arrow:n=!1}=e;return(...r)=>$R(Object.assign(Object.assign({},e),{arrow:n}),t)(...r)};QF.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var JF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const eB=(e,t)=>{const n=JF(e,[]),{coordinate:r,document:i}=t;return(s,l,c)=>{const{color:h}=c,p=JF(c,["color"]),{color:v=h,transform:y}=l,[b,T]=s,M=z0();if(M.moveTo(b[0],b[1]),nu(r)){const R=r.getCenter();M.quadraticCurveTo(R[0],R[1],T[0],T[1])}else{const R=PD(b,T),I=sc(b,T)/2;z2(M,b,T,R,I)}return Ra(i.createElement("path",{})).call(sa,p).style("d",M.toString()).style("stroke",v).style("transform",y).call(sa,n).node()}};eB.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var tB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const nB=(e,t)=>{const n=tB(e,[]),{document:r}=t;return(i,s,l)=>{const{color:c}=l,h=tB(l,["color"]),{color:p=c,transform:v}=s,[y,b]=i,T=z0();return T.moveTo(y[0],y[1]),T.bezierCurveTo(y[0]/2+b[0]/2,y[1],y[0]/2+b[0]/2,b[1],b[0],b[1]),Ra(r.createElement("path",{})).call(sa,h).style("d",T.toString()).style("stroke",p).style("transform",v).call(sa,n).node()}};nB.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var rB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function cK(e,t,n,r){const i=z0();if(nu(n)){const s=n.getCenter(),l=sc(e,s),h=(sc(t,s)-l)*r+l;return i.moveTo(e[0],e[1]),z2(i,e,t,s,h),i.lineTo(t[0],t[1]),i}return tu(n)?(i.moveTo(e[0],e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,e[1]),i.lineTo(e[0]+(t[0]-e[0])*r,t[1]),i.lineTo(t[0],t[1]),i):(i.moveTo(e[0],e[1]),i.lineTo(e[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],e[1]+(t[1]-e[1])*r),i.lineTo(t[0],t[1]),i)}const iB=(e,t)=>{const{cornerRatio:n=1/3}=e,r=rB(e,["cornerRatio"]),{coordinate:i,document:s}=t;return(l,c,h)=>{const{defaultColor:p}=h,v=rB(h,["defaultColor"]),{color:y=p,transform:b}=c,[T,M]=l,R=cK(T,M,i,n);return Ra(s.createElement("path",{})).call(sa,v).style("d",R.toString()).style("stroke",y).style("transform",b).call(sa,r).node()}};iB.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const oB={link:QF,arc:eB,smooth:nB,vhv:iB},qR=e=>(t,n,r,i)=>{const{x:s,y:l,x1:c=s,y1:h=l}=r,p=$_(n,r,e),v=t.map(y=>[i.map(p([+s[y],+l[y]],y)),i.map(p([+c[y],+h[y]],y))]);return[t,v]};qR.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:oB,channels:[...qd({shapes:Object.keys(oB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Jc(),{type:$F},{type:qF}],postInference:[...yf(),...dy()]};var fK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const aB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c}=l,h=fK(l,["color"]),{color:p=c,src:v="",size:y=32,transform:b=""}=s;let{width:T=y,height:M=y}=e;const[[R,I]]=i,[N,z]=n.getSize();T=typeof T=="string"?FT(T)*N:T,M=typeof M=="string"?FT(M)*z:M;const H=R-Number(T)/2,X=I-Number(M)/2;return Ra(r.createElement("image",{})).call(sa,h).style("x",H).style("y",X).style("src",v).style("stroke",p).style("transform",b).call(sa,e).style("width",T).style("height",M).node()}};aB.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const sB={image:aB},lB=e=>{const{cartesian:t}=e;return t?MR:(n,r,i,s)=>{const{x:l,y:c}=i,h=$_(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};lB.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:sB,channels:[...qd({shapes:Object.keys(sB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...Jc(),{type:jT},{type:VT}],postInference:[...yf(),...dy()]};var hK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function dK(e,t){const n=z0();if(nu(t)){const r=t.getCenter(),i=[...e,e[0]],s=i.map(l=>sc(l,r));return i.forEach((l,c)=>{if(c===0){n.moveTo(l[0],l[1]);return}const h=s[c],p=e[c-1],v=s[c-1];v!==void 0&&Math.abs(h-v)<1e-10?z2(n,p,l,r,h):n.lineTo(l[0],l[1])}),n.closePath(),n}return KG(n,e)}const uB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c}=l,h=hK(l,["color"]),{color:p=c,transform:v}=s,y=dK(i,n);return Ra(r.createElement("path",{})).call(sa,h).style("d",y.toString()).style("stroke",p).style("fill",p).style("transform",v).call(sa,e).node()}};uB.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var cB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function pK(e,t){const[n,r,i,s]=e,l=z0();if(nu(t)){const c=t.getCenter(),h=sc(c,n);return l.moveTo(n[0],n[1]),l.quadraticCurveTo(c[0],c[1],i[0],i[1]),z2(l,i,s,c,h),l.quadraticCurveTo(c[0],c[1],r[0],r[1]),z2(l,r,n,c,h),l.closePath(),l}return l.moveTo(n[0],n[1]),l.bezierCurveTo(n[0]/2+i[0]/2,n[1],n[0]/2+i[0]/2,i[1],i[0],i[1]),l.lineTo(s[0],s[1]),l.bezierCurveTo(s[0]/2+r[0]/2,s[1],s[0]/2+r[0]/2,r[1],r[0],r[1]),l.lineTo(n[0],n[1]),l.closePath(),l}const fB=(e,t)=>{const n=cB(e,[]),{coordinate:r,document:i}=t;return(s,l,c)=>{const{color:h}=c,p=cB(c,["color"]),{color:v=h,transform:y}=l,b=pK(s,r);return Ra(i.createElement("path",{})).call(sa,p).style("d",b.toString()).style("fill",v||h).style("stroke",v||h).style("transform",y).call(sa,n).node()}};fB.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const hB={polygon:uB,ribbon:fB},dB=()=>(e,t,n,r)=>{const i=Object.entries(n).filter(([c])=>c.startsWith("x")).map(([,c])=>c),s=Object.entries(n).filter(([c])=>c.startsWith("y")).map(([,c])=>c),l=e.map(c=>{const h=[];for(let p=0;p<i.length;p++){const v=i[p][c];if(v===void 0)break;const y=s[p][c];h.push(r.map([+v,+y]))}return h});return[e,l]};dB.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:hB,channels:[...qd({shapes:Object.keys(hB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Jc()],postInference:[...yf(),...dy()]};var vK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function mK(e,t){const n=z0();if(!nu(t))n.moveTo(...e[0]),n.lineTo(...e[1]),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.lineTo(...e[5]),n.lineTo(...e[6]),n.lineTo(...e[7]),n.closePath(),n.moveTo(...e[8]),n.lineTo(...e[9]),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.lineTo(...e[13]);else{const r=t.getCenter(),[i,s]=r,l=k0(Ic(e[0],r)),c=k0(Ic(e[1],r)),h=sc(r,e[2]),p=sc(r,e[3]),v=sc(r,e[8]),y=sc(r,e[10]),b=sc(r,e[11]);n.moveTo(...e[0]),n.arc(i,s,h,l,c),n.arc(i,s,h,c,l,!0),n.moveTo(...e[2]),n.lineTo(...e[3]),n.moveTo(...e[4]),n.arc(i,s,p,l,c),n.lineTo(...e[6]),n.arc(i,s,y,c,l,!0),n.closePath(),n.moveTo(...e[8]),n.arc(i,s,v,l,c),n.arc(i,s,v,c,l,!0),n.moveTo(...e[10]),n.lineTo(...e[11]),n.moveTo(...e[12]),n.arc(i,s,b,l,c),n.arc(i,s,b,c,l,!0)}return n}const pB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c,transform:h}=s,{color:p,fill:v=p,stroke:y=p}=l,b=vK(l,["color","fill","stroke"]),T=mK(i,n);return Ra(r.createElement("path",{})).call(sa,b).style("d",T.toString()).style("stroke",y).style("fill",c||v).style("transform",h).call(sa,e).node()}};pB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var gK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yK(e,t,n=4){const r=z0();if(!nu(t))return r.moveTo(...e[2]),r.lineTo(...e[3]),r.lineTo(e[3][0]-n,e[3][1]),r.lineTo(e[10][0]-n,e[10][1]),r.lineTo(e[10][0]+n,e[10][1]),r.lineTo(e[3][0]+n,e[3][1]),r.lineTo(...e[3]),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]),r.moveTo(e[3][0]+n/2,e[8][1]),r.arc(e[3][0],e[8][1],n/2,0,Math.PI*2),r.closePath(),r;const i=t.getCenter(),[s,l]=i,c=sc(i,e[3]),h=sc(i,e[8]),p=sc(i,e[10]),v=k0(Ic(e[2],i)),y=Math.asin(n/h),b=v-y,T=v+y;r.moveTo(...e[2]),r.lineTo(...e[3]),r.moveTo(Math.cos(b)*c+s,Math.sin(b)*c+l),r.arc(s,l,c,b,T),r.lineTo(Math.cos(T)*p+s,Math.sin(T)*p+l),r.arc(s,l,p,T,b,!0),r.lineTo(Math.cos(b)*c+s,Math.sin(b)*c+l),r.closePath(),r.moveTo(...e[10]),r.lineTo(...e[11]);const M=(b+T)/2;return r.moveTo(Math.cos(M)*(h+n/2)+s,Math.sin(M)*(h+n/2)+l),r.arc(Math.cos(M)*h+s,Math.sin(M)*h+l,n/2,M,Math.PI*2+M),r.closePath(),r}const vB=(e,t)=>{const{coordinate:n,document:r}=t;return(i,s,l)=>{const{color:c,transform:h}=s,p=4,{color:v,fill:y=v,stroke:b=v}=l,T=gK(l,["color","fill","stroke"]),M=yK(i,n,p);return Ra(r.createElement("path",{})).call(sa,T).style("d",M.toString()).style("stroke",b).style("fill",c||y).style("transform",h).call(sa,e).node()}};vB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const mB={box:pB,violin:vB},gB=()=>(e,t,n,r)=>{const{x:i,y:s,y1:l,y2:c,y3:h,y4:p,series:v}=n,y=t.x,b=t.series,T=Array.from(e,M=>{const R=y.getBandWidth(y.invert(+i[M])),I=b?b.getBandWidth(b.invert(+(v==null?void 0:v[M]))):1,N=R*I,z=(+(v==null?void 0:v[M])||0)*R,H=+i[M]+z+N/2,[X,Y,ne,pe,ye]=[+s[M],+l[M],+c[M],+h[M],+p[M]];return[[H-N/2,ye],[H+N/2,ye],[H,ye],[H,pe],[H-N/2,pe],[H+N/2,pe],[H+N/2,Y],[H-N/2,Y],[H-N/2,ne],[H+N/2,ne],[H,Y],[H,X],[H-N/2,X],[H+N/2,X]].map(Xe=>r.map(Xe))});return[e,T]};gB.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:mB,channels:[...qd({shapes:Object.keys(mB)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...Jc(),{type:X_}],postInference:[...yf(),...kb()],interaction:{shareTooltip:!0}};const yB={vector:$R},_B=()=>(e,t,n,r)=>{const{x:i,y:s,size:l,rotate:c}=n,[h,p]=r.getSize(),v=e.map(y=>{const b=+c[y]/180*Math.PI,T=+l[y],M=T/h,R=T/p,I=M*Math.cos(b),N=-R*Math.sin(b);return[r.map([+i[y]-I/2,+s[y]-N/2]),r.map([+i[y]+I/2,+s[y]+N/2])]});return[e,v]};_B.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:yB,channels:[...qd({shapes:Object.keys(yB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...Jc()],postInference:[...yf(),...dy()]};var bB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function _K(e,t,n){return e.createElement("path",{style:Object.assign({d:`M ${t},${t} L -${t},0 L ${t},-${t} L 0,0 Z`,transformOrigin:"center"},n)})}function bK(e,t){if(!nu(t))return ay().x(r=>r[0]).y(r=>r[1])(e);const n=t.getCenter();return uT()({startAngle:0,endAngle:Math.PI*2,outerRadius:sc(e[0],n),innerRadius:sc(e[1],n)})}function xK(e,t){if(!nu(e))return t;const[n,r]=e.getCenter();return`translate(${n}, ${r}) ${t||""}`}const KR=(e,t)=>{const{arrow:n,arrowSize:r=4}=e,i=bB(e,["arrow","arrowSize"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{color:v,lineWidth:y}=p,b=bB(p,["color","lineWidth"]),{color:T=v,size:M=y}=h,R=n?_K(l,r,Object.assign({fill:i.stroke||T,stroke:i.stroke||T},Eo(i,"arrow"))):null,I=bK(c,s),N=xK(s,h.transform);return Ra(l.createElement("path",{})).call(sa,b).style("d",I).style("stroke",T).style("lineWidth",M).style("transform",N).style("markerEnd",R).call(sa,i).node()}};KR.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const xB=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(nE)?[e,t]:[e,hi({},t,{encode:{x:Bu(n)}})]};xB.props={};const EB={line:KR},SB=e=>(t,n,r,i)=>{const{x:s}=r,l=$_(n,r,hi({style:{bandOffset:0}},e)),c=Array.from(t,h=>{const p=[s[h],1],v=[s[h],0];return[p,v].map(y=>i.map(l(y,h)))});return[t,c]};SB.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:EB,channels:[...zb({shapes:Object.keys(EB)}),{name:"x",required:!0}],preInference:[...Jc(),{type:xB}],postInference:[...yf()]};const wB=()=>(e,t)=>{const{data:n}=t;return!Array.isArray(n)||n.some(nE)?[e,t]:[e,hi({},t,{encode:{y:Bu(n)}})]};wB.props={};const TB={line:KR},AB=e=>(t,n,r,i)=>{const{y:s}=r,l=$_(n,r,hi({style:{bandOffset:0}},e)),c=Array.from(t,h=>{const p=[0,s[h]],v=[1,s[h]];return[p,v].map(y=>i.map(l(y,h)))});return[t,c]};AB.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:TB,channels:[...zb({shapes:Object.keys(TB)}),{name:"y",required:!0}],preInference:[...Jc(),{type:wB}],postInference:[...yf()]};var CB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function EK(e,t,n){return[["M",e,t],["L",e+2*n,t-n],["L",e+2*n,t+n],["Z"]]}function SK(e){return ay().x(t=>t[0]).y(t=>t[1])(e)}function wK(e,t,n,r,i=0){const[[s,l],[c,h]]=t;if(tu(e)){const b=s+n,T=c+r,M=b+i;return[[b,l],[M,l],[M,h],[T,h]]}const p=l-n,v=h-r,y=p-i;return[[s,p],[s,y],[c,y],[c,v]]}const OB=(e,t)=>{const{offset:n=0,offset1:r=n,offset2:i=n,connectLength1:s,endMarker:l=!0}=e,c=CB(e,["offset","offset1","offset2","connectLength1","endMarker"]),{coordinate:h}=t;return(p,v,y)=>{const{color:b,connectLength1:T}=y,M=CB(y,["color","connectLength1"]),{color:R,transform:I}=v,N=wK(h,p,r,i,s!=null?s:T),z=Eo(Object.assign(Object.assign({},c),y),"endMarker");return Ra(new Ki).call(sa,M).style("d",SK(N)).style("stroke",R||b).style("transform",I).style("markerEnd",l?new du({className:"marker",style:Object.assign(Object.assign({},z),{symbol:EK})}):null).call(sa,c).node()}};OB.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const MB={connector:OB},RB=(...e)=>qR(...e);RB.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:MB,channels:[...zb({shapes:Object.keys(MB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Jc()],postInference:[...yf()]};function PB(e,t,n,r){if(t)return()=>[0,1];const{[e]:i,[`${e}1`]:s}=n;return l=>{var c;const h=((c=r.getBandWidth)===null||c===void 0?void 0:c.call(r,r.invert(+s[l])))||0;return[i[l],s[l]+h]}}function QR(e={}){const{extendX:t=!1,extendY:n=!1}=e;return(r,i,s,l)=>{const c=PB("x",t,s,i.x),h=PB("y",n,s,i.y),p=Array.from(r,v=>{const[y,b]=c(v),[T,M]=h(v);return[[y,T],[b,T],[b,M],[y,M]].map(H=>l.map(H))});return[r,p]}}const IB={range:Y_},DB=()=>QR();DB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:IB,channels:[...zb({shapes:Object.keys(IB)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Jc()],postInference:[...yf()]};const LB=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(nE))){const r=(i,s)=>Array.isArray(i[0])?i.map(l=>l[s]):[i[s]];return[e,hi({},t,{encode:{x:Bu(r(n,0)),x1:Bu(r(n,1))}})]}return[e,t]};LB.props={};const NB={range:Y_},FB=()=>QR({extendY:!0});FB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:NB,channels:[...zb({shapes:Object.keys(NB)}),{name:"x",required:!0}],preInference:[...Jc(),{type:LB}],postInference:[...yf()]};const BB=()=>(e,t)=>{const{data:n}=t;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(nE))){const r=(i,s)=>Array.isArray(i[0])?i.map(l=>l[s]):[i[s]];return[e,hi({},t,{encode:{y:Bu(r(n,0)),y1:Bu(r(n,1))}})]}return[e,t]};BB.props={};const kB={range:Y_},zB=()=>QR({extendX:!0});zB.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:kB,channels:[...zb({shapes:Object.keys(kB)}),{name:"y",required:!0}],preInference:[...Jc(),{type:BB}],postInference:[...yf()]};var UB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const JR=(e,t)=>{const{arrow:n,colorAttribute:r}=e,i=UB(e,["arrow","colorAttribute"]),{coordinate:s,document:l}=t;return(c,h,p)=>{const{color:v,stroke:y}=p,b=UB(p,["color","stroke"]),{d:T,color:M=v}=h,[R,I]=s.getSize();return Ra(l.createElement("path",{})).call(sa,b).style("d",typeof T=="function"?T({width:R,height:I}):T).style(r,M).call(sa,i).node()}};JR.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const jB=(e,t)=>JR(Object.assign({colorAttribute:"fill"},e),t);jB.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const VB=(e,t)=>JR(Object.assign({fill:"none",colorAttribute:"stroke"},e),t);VB.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const HB={path:jB,hollow:VB},GB=e=>(t,n,r,i)=>[t,t.map(()=>[[0,0]])];GB.props={defaultShape:"path",defaultLabelShape:"label",shape:HB,composite:!1,channels:[...qd({shapes:Object.keys(HB)}),{name:"d",scale:"identity"}],preInference:[...Jc()],postInference:[...yf()]};var TK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const WB=(e,t)=>{const{render:n}=e,r=TK(e,["render"]);return i=>{const[[s,l]]=i;return n(Object.assign(Object.assign({},r),{x:s,y:l}),t)}};WB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const ZB=()=>(e,t)=>{const{style:n={}}=t;return[e,hi({},t,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};ZB.props={};const AK={shape:WB},XB=e=>{const{cartesian:t}=e;return t?MR:(n,r,i,s)=>{const{x:l,y:c}=i,h=$_(r,i,e),p=Array.from(n,v=>{const y=[+l[v],+c[v]];return[s.map(h(y,v))]});return[n,p]}};XB.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:AK,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Jc(),{type:jT},{type:VT},{type:ZB}]};var CK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const YB=(e,t)=>{const{document:n}=t;return(r,i,s)=>{const{transform:l}=i,{color:c}=s,h=CK(s,["color"]),{color:p=c}=i,[v,...y]=r,b=z0();return b.moveTo(...v),y.forEach(([T,M])=>{b.lineTo(T,M)}),b.closePath(),Ra(n.createElement("path",{})).call(sa,h).style("d",b.toString()).style("stroke",p||c).style("fill",p||c).style("fillOpacity",.4).style("transform",l).call(sa,e).node()}};YB.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const $B={density:YB},qB=()=>(e,t,n,r)=>{const{x:i,series:s}=n,l=Object.entries(n).filter(([y])=>y.startsWith("y")).map(([,y])=>y),c=Object.entries(n).filter(([y])=>y.startsWith("size")).map(([,y])=>y);if(i===void 0||l===void 0||c===void 0)throw new Error("Missing encode for x or y or size channel.");const h=t.x,p=t.series,v=Array.from(e,y=>{const b=h.getBandWidth(h.invert(+i[y])),T=p?p.getBandWidth(p.invert(+(s==null?void 0:s[y]))):1,M=b*T,R=(+(s==null?void 0:s[y])||0)*b,I=+i[y]+R+M/2;return[...l.map((z,H)=>[I+ +c[H][y]/e.length,+l[H][y]]),...l.map((z,H)=>[I-+c[H][y]/e.length,+l[H][y]]).reverse()].map(z=>r.map(z))});return[e,v]};qB.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:$B,channels:[...qd({shapes:Object.keys($B)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...Jc(),{type:rE},{type:X_}],postInference:[...yf(),...kb()],interaction:{shareTooltip:!0}};function KB(e){var t,n,r,i=e||1;function s(c,h){++t>i&&(r=n,l(1),++t),n[c]=h}function l(c){t=0,n=Object.create(null),c||(r=Object.create(null))}return l(),{clear:l,has:function(c){return n[c]!==void 0||r[c]!==void 0},get:function(c){var h=n[c];if(h!==void 0)return h;if((h=r[c])!==void 0)return s(c,h),h},set:function(c,h){n[c]!==void 0?n[c]=h:s(c,h)}}}const z0e=KB(3);function OK(e,t=(...r)=>`${r[0]}`,n=16){const r=KB(n);return(...i)=>{const s=t(...i);let l=r.get(s);return r.has(s)?r.get(s):(l=e(...i),r.set(s,l),l)}}function MK(e){return typeof e=="string"?e.split(" ").map(t=>{const[n,r]=t.split(":");return[+n,r]}):e}function HT(e,t,n){const r=e?e():document.createElement("canvas");return r.width=t,r.height=n,r}const RK=OK((e,t,n)=>{const r=HT(n,e*2,e*2),i=r.getContext("2d"),s=e,l=e;if(t===1)i.beginPath(),i.arc(s,l,e,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const c=i.createRadialGradient(s,l,e*t,s,l,e);c.addColorStop(0,"rgba(0,0,0,1)"),c.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=c,i.fillRect(0,0,2*e,2*e)}return r},e=>`${e}`);function PK(e,t){const r=HT(t,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return MK(e).forEach(([s,l])=>{i.addColorStop(s,l)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function IK(e,t,n,r,i,s){const{blur:l}=i;let c=r.length;for(;c--;){const{x:h,y:p,value:v,radius:y}=r[c],b=Math.min(v,n),T=h-y,M=p-y,R=RK(y,1-l,s),I=(b-t)/(n-t);e.globalAlpha=Math.max(I,.001),e.drawImage(R,T,M)}return e}function DK(e,t,n,r,i){const{minOpacity:s,opacity:l,maxOpacity:c,useGradientOpacity:h}=i,p=0,v=0,y=t,b=n,T=e.getImageData(p,v,y,b),M=T.data,R=M.length;for(let I=3;I<R;I+=4){const N=M[I],z=N*4;if(!z)continue;const H=l||Math.max(0,Math.min(c,Math.max(s,N)));M[I-3]=r[z],M[I-2]=r[z+1],M[I-1]=r[z+2],M[I]=h?r[z+3]:H}return T}function LK(e,t,n,r,i,s,l){const c=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},s);c.minOpacity*=255,c.opacity*=255,c.maxOpacity*=255;const p=HT(l,e,t).getContext("2d"),v=PK(c.gradient,l);p.clearRect(0,0,e,t),IK(p,n,r,i,c,l);const y=DK(p,e,t,v,c),T=HT(l,e,t).getContext("2d");return T.putImageData(y,0,0),T}var NK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function FK(e,t){return Object.keys(e).reduce((n,r)=>{const i=e[r];return t(i,r)||(n[r]=i),n},{})}const QB=(e,t)=>{const{gradient:n,opacity:r,maxOpacity:i,minOpacity:s,blur:l,useGradientOpacity:c}=e,h=NK(e,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:p,createCanvas:v,document:y}=t;return(b,T,M)=>{const{transform:R}=T,[I,N]=p.getSize(),z=b.map(pe=>({x:pe[0],y:pe[1],value:pe[2],radius:pe[3]})),H=i0(b,pe=>pe[2]),X=Tl(b,pe=>pe[2]),ne=I&&N?LK(I,N,H,X,z,FK({gradient:n,opacity:r,minOpacity:s,maxOpacity:i,blur:l,useGradientOpacity:c},pe=>pe===void 0),v):{canvas:null};return Ra(y.createElement("image",{})).call(sa,M).style("x",0).style("y",0).style("width",I).style("height",N).style("src",ne.canvas).style("transform",R).call(sa,h).node()}};QB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const JB={heatmap:QB},e8=e=>(t,n,r,i)=>{const{x:s,y:l,size:c,color:h}=r,p=Array.from(t,v=>{const y=c?+c[v]:40;return[...i.map([+s[v],+l[v]]),h[v],y]});return[[0],[p]]};e8.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:JB,channels:[...qd({shapes:Object.keys(JB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...Jc(),{type:X_},{type:UT}],postInference:[...yf(),...dy()]};var BK=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},kK=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function zK(e,t){const{text:n="text",value:r="value"}=t;return e.map(i=>Object.assign(Object.assign({},i),{text:i[n],value:i[r]}))}const UK=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:e=>e.fontFamily}}),eP=(e,t)=>BK(void 0,void 0,void 0,function*(){const{width:n,height:r}=t,{data:i,encode:s={},scale:l,style:c={},layout:h={}}=e,p=kK(e,["data","encode","scale","style","layout"]),v=zK(i,s);return hi({},UK(),Object.assign(Object.assign({data:{value:v,transform:[Object.assign({type:"wordCloud",size:[n,r]},h)]},encode:s,scale:l,style:c},p),{axis:!1}))});eP.props={};const t8=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];t8.props={};const n8=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];n8.props={};const r8=e=>new hd(e);r8.props={};const GT=Symbol("defaultUnknown");function i8(e,t,n){for(let r=0;r<t.length;r+=1)e.has(t[r])||e.set(n(t[r]),r)}function o8(e){const{value:t,from:n,to:r,mapper:i,notFoundReturn:s}=e;let l=i.get(t);if(l===void 0){if(s!==GT)return s;l=n.push(t)-1,i.set(t,l)}return r[l%r.length]}function a8(e){return e instanceof Date?t=>`${t}`:typeof e=="object"?t=>JSON.stringify(t):t=>t}class WT extends D2{getDefaultOptions(){return{domain:[],range:[],unknown:GT}}constructor(t){super(t)}map(t){return this.domainIndexMap.size===0&&i8(this.domainIndexMap,this.getDomain(),this.domainKey),o8({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return this.rangeIndexMap.size===0&&i8(this.rangeIndexMap,this.getRange(),this.rangeKey),o8({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=a8(n),this.rangeKey=a8(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!t||t.range)&&this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new WT(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:n}=this.options;return this.sortedDomain=n?[...t].sort(n):t,this.sortedDomain}}const s8=e=>new WT(e);s8.props={};function l8({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):n}function jK({map:e,initKey:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function VK({map:e,initKey:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function HK(e){return typeof e=="object"?e.valueOf():e}class u8 extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=HK,t!==null)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(l8({map:this.map,initKey:this.initKey},t))}has(t){return super.has(l8({map:this.map,initKey:this.initKey},t))}set(t,n){return super.set(jK({map:this.map,initKey:this.initKey},t),n)}delete(t){return super.delete(VK({map:this.map,initKey:this.initKey},t))}}function GK(e){const t=Math.min(...e);return e.map(n=>n/t)}function WK(e,t){const n=e.length,r=t-n;return r>0?[...e,...new Array(r).fill(1)]:r<0?e.slice(0,t):e}function ZK(e){return Math.round(e*1e12)/1e12}function XK(e){const{domain:t,range:n,paddingOuter:r,paddingInner:i,flex:s,round:l,align:c}=e,h=t.length,p=WK(s,h),[v,y]=n,b=y-v,T=2/h*r+1-1/h*i,M=b/T,R=M*i/h,I=M-h*R,N=GK(p),z=N.reduce((mt,Qe)=>mt+Qe),H=I/z,X=new u8(t.map((mt,Qe)=>{const ut=N[Qe]*H;return[mt,l?Math.floor(ut):ut]})),Y=new u8(t.map((mt,Qe)=>{const ct=N[Qe]*H+R;return[mt,l?Math.floor(ct):ct]})),ne=Array.from(Y.values()).reduce((mt,Qe)=>mt+Qe),ye=(b-(ne-ne/h*i))*c,De=v+ye;let Xe=l?Math.round(De):De;const Ke=new Array(h);for(let mt=0;mt<h;mt+=1){Ke[mt]=ZK(Xe);const Qe=t[mt];Xe+=Y.get(Qe)}return{valueBandWidth:X,valueStep:Y,adjustedRange:Ke}}function YK(e){var t;const{domain:n}=e,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((t=e.flex)===null||t===void 0)&&t.length))return XK(e);const{range:s,paddingOuter:l,paddingInner:c,round:h,align:p}=e;let v,y,b=s[0];const M=s[1]-b,R=l*2,I=r-c;v=M/Math.max(1,R+I),h&&(v=Math.floor(v)),b+=(M-v*(r-c))*p,y=v*(1-c),h&&(b=Math.round(b),y=Math.round(y));const N=new Array(r).fill(0).map((z,H)=>b+H*v);return{valueStep:v,valueBandWidth:y,adjustedRange:N}}class py extends WT{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:GT,flex:[]}}constructor(t){super(t)}clone(){return new py(this.options)}getStep(t){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:t===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:t===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:n}=this.options;return t>0?t:n}getPaddingOuter(){const{padding:t,paddingOuter:n}=this.options;return t>0?t:n}rescale(){super.rescale();const{align:t,domain:n,range:r,round:i,flex:s}=this.options,{adjustedRange:l,valueBandWidth:c,valueStep:h}=YK({align:t,range:r,round:i,flex:s,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=h,this.valueBandWidth=c,this.adjustedRange=l}}const c8=e=>new py(e);c8.props={};class ZT extends D2{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:CM}}map(t){return Xw(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new ZT(this.options)}getTicks(){const{domain:t,tickCount:n,tickMethod:r}=this.options,[i,s]=t;return!pb(i)||!pb(s)?[]:r(i,s,n)}}const f8=e=>new ZT(e);f8.props={};class tP extends py{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:GT,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new tP(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const h8=e=>new tP(e);h8.props={};var d8=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,vy="\\d\\d?",gy="\\d\\d",$K="\\d{3}",qK="\\d{4}",aE="[^\\s]+",p8=/\[([^]*?)\]/gm;function v8(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var m8=function(e){return function(t,n){var r=n[e].map(function(s){return s.toLowerCase()}),i=r.indexOf(t.toLowerCase());return i>-1?i:null}};function q_(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];for(var l in s)e[l]=s[l]}return e}var g8=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y8=["January","February","March","April","May","June","July","August","September","October","November","December"],KK=v8(y8,3),QK=v8(g8,3),_8={dayNamesShort:QK,dayNames:g8,monthNamesShort:KK,monthNames:y8,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10?1:0)*e%10]}},XT=q_({},_8),JK=function(e){return XT=q_(XT,e)},b8=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Fp=function(e,t){for(t===void 0&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},eQ={D:function(e){return String(e.getDate())},DD:function(e){return Fp(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return Fp(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return Fp(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return Fp(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return Fp(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return Fp(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return Fp(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return Fp(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return Fp(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return Fp(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return Fp(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Fp(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Fp(Math.floor(Math.abs(t)/60),2)+":"+Fp(Math.abs(t)%60,2)}},x8=function(e){return+e-1},E8=[null,vy],S8=[null,aE],w8=["isPm",aE,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],T8=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?n:-n}return 0}],tQ={D:["day",vy],DD:["day",gy],Do:["day",vy+aE,function(e){return parseInt(e,10)}],M:["month",vy,x8],MM:["month",gy,x8],YY:["year",gy,function(e){var t=new Date,n=+(""+t.getFullYear()).substr(0,2);return+(""+(+e>68?n-1:n)+e)}],h:["hour",vy,void 0,"isPm"],hh:["hour",gy,void 0,"isPm"],H:["hour",vy],HH:["hour",gy],m:["minute",vy],mm:["minute",gy],s:["second",vy],ss:["second",gy],YYYY:["year",qK],S:["millisecond","\\d",function(e){return+e*100}],SS:["millisecond",gy,function(e){return+e*10}],SSS:["millisecond",$K],d:E8,dd:E8,ddd:S8,dddd:S8,MMM:["month",aE,m8("monthNamesShort")],MMMM:["month",aE,m8("monthNames")],a:w8,A:w8,ZZ:T8,Z:T8},YT={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},nQ=function(e){return q_(YT,e)},A8=function(e,t,n){if(t===void 0&&(t=YT.default),n===void 0&&(n={}),typeof e=="number"&&(e=new Date(e)),Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");t=YT[t]||t;var r=[];t=t.replace(p8,function(s,l){return r.push(l),"@@@"});var i=q_(q_({},XT),n);return t=t.replace(d8,function(s){return eQ[s](e,i)}),t.replace(/@@@/g,function(){return r.shift()})};function rQ(e,t,n){if(n===void 0&&(n={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=YT[t]||t,e.length>1e3)return null;var r=new Date,i={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},s=[],l=[],c=t.replace(p8,function(X,Y){return l.push(b8(Y)),"@@@"}),h={},p={};c=b8(c).replace(d8,function(X){var Y=tQ[X],ne=Y[0],pe=Y[1],ye=Y[3];if(h[ne])throw new Error("Invalid format. "+ne+" specified twice in format");return h[ne]=!0,ye&&(p[ye]=!0),s.push(Y),"("+pe+")"}),Object.keys(p).forEach(function(X){if(!h[X])throw new Error("Invalid format. "+X+" is required in specified format")}),c=c.replace(/@@@/g,function(){return l.shift()});var v=e.match(new RegExp(c,"i"));if(!v)return null;for(var y=q_(q_({},XT),n),b=1;b<v.length;b++){var T=s[b-1],M=T[0],R=T[2],I=R?R(v[b],y):+v[b];if(I==null)return null;i[M]=I}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var N;if(i.timezoneOffset==null){N=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var z=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],b=0,H=z.length;b<H;b++)if(h[z[b][0]]&&i[z[b][0]]!==N[z[b][1]]())return null}else if(N=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return N}var U0e={format:A8,parse:rQ,defaultI18n:_8,setGlobalDateI18n:JK,setGlobalDateMasks:nQ},j0e=null;const sE=1e3,lE=sE*60,uE=lE*60,K_=uE*24,cE=K_*7,C8=K_*30,O8=K_*365;function md(e,t,n,r){const i=(p,v)=>{const y=T=>r(T)%v===0;let b=v;for(;b&&!y(p);)n(p,-1),b-=1;return p},s=(p,v)=>{v&&i(p,v),t(p)},l=(p,v)=>{const y=new Date(+p);return s(y,v),y},c=(p,v)=>{const y=new Date(+p-1);return s(y,v),n(y,v),s(y),y};return{ceil:c,floor:l,range:(p,v,y,b)=>{const T=[],M=Math.floor(y),R=b?c(p,y):c(p);for(let I=R;I<v;n(I,M),s(I))T.push(new Date(+I));return T},duration:e}}const iQ=md(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),oQ=md(sE,e=>{e.setMilliseconds(0)},(e,t=1)=>{e.setTime(+e+sE*t)},e=>e.getSeconds()),aQ=md(lE,e=>{e.setSeconds(0,0)},(e,t=1)=>{e.setTime(+e+lE*t)},e=>e.getMinutes()),sQ=md(uE,e=>{e.setMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+uE*t)},e=>e.getHours()),lQ=md(K_,e=>{e.setHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+K_*t)},e=>e.getDate()-1),M8=md(C8,e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getMonth();e.setMonth(n+t)},e=>e.getMonth()),uQ=md(cE,e=>{e.setDate(e.getDate()-e.getDay()%7),e.setHours(0,0,0,0)},(e,t=1)=>{e.setDate(e.getDate()+7*t)},e=>{const t=M8.floor(e),n=new Date(+e);return Math.floor((+n-+t)/cE)}),cQ=md(O8,e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t=1)=>{const n=e.getFullYear();e.setFullYear(n+t)},e=>e.getFullYear()),R8={millisecond:iQ,second:oQ,minute:aQ,hour:sQ,day:lQ,week:uQ,month:M8,year:cQ},fQ=md(1,e=>e,(e,t=1)=>{e.setTime(+e+t)},e=>e.getTime()),hQ=md(sE,e=>{e.setUTCMilliseconds(0)},(e,t=1)=>{e.setTime(+e+sE*t)},e=>e.getUTCSeconds()),dQ=md(lE,e=>{e.setUTCSeconds(0,0)},(e,t=1)=>{e.setTime(+e+lE*t)},e=>e.getUTCMinutes()),pQ=md(uE,e=>{e.setUTCMinutes(0,0,0)},(e,t=1)=>{e.setTime(+e+uE*t)},e=>e.getUTCHours()),vQ=md(K_,e=>{e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+K_*t)},e=>e.getUTCDate()-1),P8=md(C8,e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCMonth();e.setUTCMonth(n+t)},e=>e.getUTCMonth()),mQ=md(cE,e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7)%7),e.setUTCHours(0,0,0,0)},(e,t=1)=>{e.setTime(+e+cE*t)},e=>{const t=P8.floor(e),n=new Date(+e);return Math.floor((+n-+t)/cE)}),gQ=md(O8,e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t=1)=>{const n=e.getUTCFullYear();e.setUTCFullYear(n+t)},e=>e.getUTCFullYear()),I8={millisecond:fQ,second:hQ,minute:dQ,hour:pQ,day:vQ,week:mQ,month:P8,year:gQ};function yQ(e){const t=e?I8:R8,{year:n,month:r,week:i,day:s,hour:l,minute:c,second:h,millisecond:p}=t;return{tickIntervals:[[h,1],[h,5],[h,15],[h,30],[c,1],[c,5],[c,15],[c,30],[l,1],[l,3],[l,6],[l,12],[s,1],[s,2],[i,1],[r,1],[r,3],[n,1]],year:n,millisecond:p}}function D8(e,t,n,r,i){const s=+e,l=+t,{tickIntervals:c,year:h,millisecond:p}=yQ(i),v=([I,N])=>I.duration*N,y=r?(l-s)/r:n||5,b=r||(l-s)/y,T=c.length,M=bM(c,b,0,T,v);let R;if(M===T){const I=$4(s/h.duration,l/h.duration,y);R=[h,I]}else if(M){const I=b/v(c[M-1])<v(c[M])/b,[N,z]=I?c[M-1]:c[M],H=r?Math.ceil(r/N.duration):z;R=[N,H]}else{const I=Math.max($4(s,l,y),1);R=[p,I]}return R}const _Q=(e,t,n,r,i)=>{const s=e>t,l=s?t:e,c=s?e:t,[h,p]=D8(l,c,n,r,i),v=h.range(l,new Date(+c+1),p,!0);return s?v.reverse():v},bQ=(e,t,n,r,i)=>{const s=e>t,l=s?t:e,c=s?e:t,[h,p]=D8(l,c,n,r,i),v=[h.floor(l,p),h.ceil(c,p)];return s?v.reverse():v};function xQ(e,t){const{second:n,minute:r,hour:i,day:s,week:l,month:c,year:h}=t;return n.floor(e)<e?".SSS":r.floor(e)<e?":ss":i.floor(e)<e?"hh:mm":s.floor(e)<e?"hh A":c.floor(e)<e?l.floor(e)<e?"MMM DD":"ddd DD":h.floor(e)<e?"MMMM":"YYYY"}function EQ(e){const t=e.getTimezoneOffset(),n=new Date(e);return n.setMinutes(n.getMinutes()+t,n.getSeconds(),n.getMilliseconds()),n}class nP extends $w{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:_Q,interpolate:mb,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return bQ}getTickMethodOptions(){const{domain:t,tickCount:n,tickInterval:r,utc:i}=this.options,s=t[0],l=t[t.length-1];return[s,l,n,r,i]}getFormatter(){const{mask:t,utc:n}=this.options,r=n?I8:R8,i=n?EQ:N_;return s=>A8(i(s),t||xQ(s,r))}clone(){return new nP(this.options)}}const L8=e=>new nP(e);L8.props={};const N8=e=>t=>-e(-t),rP=(e,t)=>{const n=Math.log(e),r=e===Math.E?Math.log:e===10?Math.log10:e===2?Math.log2:i=>Math.log(i)/n;return t?N8(r):r},iP=(e,t)=>{const n=e===Math.E?Math.exp:r=>_f(e,r);return t?N8(n):n},SQ=(e,t,n,r=10)=>{const i=e<0,s=iP(r,i),l=rP(r,i),c=t<e,h=c?t:e,p=c?e:t;let v=l(h),y=l(p),b=[];if(!(r%1)&&y-v<n){if(v=Math.floor(v),y=Math.ceil(y),i)for(;v<=y;v+=1){const T=s(v);for(let M=r-1;M>=1;M-=1){const R=T*M;if(R>p)break;R>=h&&b.push(R)}}else for(;v<=y;v+=1){const T=s(v);for(let M=1;M<r;M+=1){const R=T*M;if(R>p)break;R>=h&&b.push(R)}}b.length*2<n&&(b=F_(h,p,n))}else{const T=n===-1?y-v:Math.min(y-v,n);b=F_(v,y,T).map(s)}return c?b.reverse():b},wQ=(e,t,n,r)=>{const i=e<0,s=rP(r,i),l=iP(r,i),c=e>t,h=c?t:e,p=c?e:t,v=[l(Math.floor(s(h))),l(Math.ceil(s(p)))];return c?v.reverse():v};class oP extends $w{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:L2,tickMethod:SQ,tickCount:5}}chooseNice(){return wQ}getTickMethodOptions(){const{domain:t,tickCount:n,base:r}=this.options,i=t[0],s=t[t.length-1];return[i,s,n,r]}chooseTransforms(){const{base:t,domain:n}=this.options,r=n[0]<0;return[rP(t,r),iP(t,r)]}clone(){return new oP(this.options)}}const F8=e=>new oP(e);F8.props={};const TQ=e=>t=>t<0?-_f(-t,e):_f(t,e),AQ=e=>t=>t<0?-_f(-t,1/e):_f(t,1/e),CQ=e=>e<0?-Math.sqrt(-e):Math.sqrt(e);class $T extends $w{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:L2,tickMethod:F_,tickCount:5}}constructor(t){super(t)}chooseTransforms(){const{exponent:t}=this.options;if(t===1)return[N_,N_];const n=t===.5?CQ:TQ(t),r=AQ(t);return[n,r]}clone(){return new $T(this.options)}}const B8=e=>new $T(e);B8.props={};class aP extends $T{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:L2,tickMethod:F_,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new aP(this.options)}}const k8=e=>new aP(e);k8.props={};const z8=e=>new gb(e);z8.props={};const U8=e=>new tT(e);U8.props={};const j8=e=>new eT(e);j8.props={};const OQ=e=>t=>{const n=e(t);return pb(n)?Math.round(n):n};function MQ(e,t){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=e(r)},n.prototype.composeOutput=function(r,i){const{domain:s,interpolator:l,round:c}=this.getOptions(),h=t(s.map(r)),p=c?OQ(l):l;this.output=vb(p,h,i,r)},n.prototype.invert=void 0}}var RQ=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(s=(i<3?l(s):i>3?l(t,n,s):l(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},sP;function PQ(e){return[e(0),e(1)]}const IQ=e=>{const[t,n]=e;return vb(mb(0,1),Zw(t,n))};let lP=sP=class extends hd{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:N_,tickMethod:F_,tickCount:5}}constructor(t){super(t)}clone(){return new sP(this.options)}};lP=sP=RQ([MQ(PQ,IQ)],lP);const V8=e=>new lP(e);V8.props={};const H8=e=>new B2(e);H8.props={};function uP({colorDefault:e,colorBlack:t,colorWhite:n,colorStroke:r,colorBackground:i,padding1:s,padding2:l,padding3:c,alpha90:h,alpha65:p,alpha45:v,alpha25:y,alpha10:b,category10:T,category20:M,sizeDefault:R=1,padding:I="auto",margin:N=16}){return{padding:I,margin:N,size:R,color:e,category10:T,category20:M,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:t,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:t,gridStrokeOpacity:b,labelAlign:"horizontal",labelFill:t,labelOpacity:v,labelFontSize:12,labelFontWeight:"normal",labelSpacing:s,line:!1,lineLineWidth:.5,lineStroke:t,lineStrokeOpacity:v,tickLength:4,tickLineWidth:1,tickStroke:t,tickOpacity:v,titleFill:t,titleOpacity:h,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:t,itemLabelFillOpacity:h,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[s,s],itemValueFill:t,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:t,navButtonFillOpacity:.65,navPageNumFill:t,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:t,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:t,tickStrokeOpacity:.25,rowPadding:s,colPadding:l,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:t,handleLabelFillOpacity:v,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:t,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:t,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:t,labelFillOpacity:v,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:h,tickStroke:t,tickStrokeOpacity:v},label:{fill:t,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:t,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:t,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:e,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:t,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:t,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:t,titleFillOpacity:h,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:t,subtitleFillOpacity:p,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"}}}const DQ=uP({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),cP=e=>hi({},DQ,e);cP.props={};const G8=e=>hi({},cP(),{category10:"category10",category20:"category20"},e);G8.props={};const LQ=uP({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"#141414",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),W8=e=>hi({},LQ,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},e),Z8=e=>Object.assign({},W8(),{category10:"category10",category20:"category20"},e);Z8.props={};const NQ=uP({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),X8=e=>hi({},NQ,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(t,n)=>n!==0},axisRight:{gridFilter:(t,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},e);X8.props={};const Y8=e=>(...t)=>{const n=ry(Object.assign({},{crossPadding:50},e))(...t);return oD(n,e),n};Y8.props=Object.assign(Object.assign({},ry.props),{defaultPosition:"bottom"});function W0e(){}const $8=e=>(...t)=>{const n=ry(Object.assign({},{crossPadding:10},e))(...t);return oD(n,e),n};$8.props=Object.assign(Object.assign({},ry.props),{defaultPosition:"left"});var fP=function(){},FQ=function(e,t,n){var r=e,i=u(t)?t.split("."):t;return i.forEach(function(s,l){l<i.length-1?(al(r[s])||(r[s]=(0,yu.Z)(i[l+1])?[]:{}),r=r[s]):r[s]=n}),e};function BQ(e,t){return e.reduce(function(n,r){return(n[r[t]]=n[r[t]]||[]).push(r),n},{})}function kQ(e){var t;return((t=e[0])===null||t===void 0?void 0:t.map(function(n,r){return e.map(function(i){return i[r]})}))||[]}var j0=as({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),zQ=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this,n,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:aG(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,s){return"".concat(i,"/").concat(s)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new yc({class:j0.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new yc({class:j0.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(t.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return(0,d.Z)(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageShape",{get:function(){var n=this.pageViews,r=(0,ae.CR)(kQ(n.map(function(y){var b=y.getBBox(),T=b.width,M=b.height;return[T,M]})).map(function(y){return Math.max.apply(Math,(0,ae.ev)([],(0,ae.CR)(y),!1))}),2),i=r[0],s=r[1],l=this.attributes,c=l.pageWidth,h=c===void 0?i:c,p=l.pageHeight,v=p===void 0?s:p;return{pageWidth:h,pageHeight:v}},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(t.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n=e.prototype.getBBox.call(this),r=n.x,i=n.y,s=this.controllerShape,l=this.pageShape,c=l.pageWidth,h=l.pageHeight;return new Gu(r,i,c+s.width,h)},t.prototype.goTo=function(n){var r=this,i=this.attributes.animate,s=this,l=s.currPage,c=s.playState,h=s.playWindow,p=s.pageViews;if(c!=="idle"||n<0||p.length<=0||n>=p.length)return null;p[l].setLocalPosition(0,0),this.prepareFollowingPage(n);var v=(0,ae.CR)(this.getFollowingPageDiff(n),2),y=v[0],b=v[1];this.playState="running";var T=re(h,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-y,", ").concat(-b,")")}],i);return D(T,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),T},t.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var s=n?(i-1+r)%r:(0,d.Z)(i-1,0,r);return this.goTo(s)},t.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var s=n?(i+1)%r:(0,d.Z)(i+1,0,r);return this.goTo(s)},t.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,s=r.pageHeight;if(!i||!s){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(j0.clipPath,"rect").styles({width:i,height:s}),this.contentGroup.attr("clipPath",this.clipPath.node())},t.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?o(r):f(r)})},t.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,i=n.nextBtnGroup,s=n.pageInfoGroup,l=this.attributes,c=l.orientation,h=l.controllerPadding,p=s.getBBox(),v=p.width,y=p.height,b=(0,ae.CR)(c==="horizontal"?[-180,0]:[-90,90],2),T=b[0],M=b[1];r.setLocalEulerAngles(T),i.setLocalEulerAngles(M);var R=r.getBBox(),I=R.width,N=R.height,z=i.getBBox(),H=z.width,X=z.height,Y=Math.max(I,v,H),ne=c==="horizontal"?{offset:[[0,0],[I/2+h,0],[I+v+h*2,0]],textAlign:"start"}:{offset:[[Y/2,-N-h],[Y/2,0],[Y/2,X+h]],textAlign:"center"},pe=(0,ae.CR)(ne.offset,3),ye=(0,ae.CR)(pe[0],2),De=ye[0],Xe=ye[1],Ke=(0,ae.CR)(pe[1],2),mt=Ke[0],Qe=Ke[1],ut=(0,ae.CR)(pe[2],2),ct=ut[0],gt=ut[1],Xt=ne.textAlign,Rt=s.querySelector("text");Rt&&(Rt.style.textAlign=Xt),r.setLocalPosition(De,Xe),s.setLocalPosition(mt,Qe),i.setLocalPosition(ct,gt)},t.prototype.updatePageInfo=function(){var n,r=this,i=r.currPage,s=r.pageViews,l=r.attributes.formatter;s.length<2||((n=this.pageInfoGroup.querySelector(j0.pageInfo.class))===null||n===void 0||n.attr("text",l(i+1,s.length)),this.adjustControllerLayout())},t.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,s=this.pageShape,l=s.pageWidth,c=s.pageHeight,h=n<r?-1:1;return i==="horizontal"?[h*l,0]:[0,h*c]},t.prototype.prepareFollowingPage=function(n){var r=this,i=r.currPage,s=r.pageViews;if(this.setVisiblePages([n,i]),n!==i){var l=(0,ae.CR)(this.getFollowingPageDiff(n),2),c=l[0],h=l[1];s[n].setLocalPosition(c,h)}},t.prototype.renderController=function(n){var r=this,i=this.attributes.controllerSpacing,s=this.pageShape,l=s.pageWidth,c=s.pageHeight,h=this.pageViews.length>=2,p=n.maybeAppendByClassName(j0.controller,"g");if(m(p.node(),h),!!h){var v=Ua(this.attributes,"button"),y=Ua(this.attributes,"pageNum"),b=(0,ae.CR)(F0(v),2),T=b[0],M=b[1],R=T.size,I=(0,ae._T)(T,["size"]),N=!p.select(j0.prevBtnGroup.class).node(),z=p.maybeAppendByClassName(j0.prevBtnGroup,"g").styles(M);this.prevBtnGroup=z.node();var H=z.maybeAppendByClassName(j0.prevBtn,"path"),X=p.maybeAppendByClassName(j0.nextBtnGroup,"g").styles(M);this.nextBtnGroup=X.node();var Y=X.maybeAppendByClassName(j0.nextBtn,"path");[H,Y].forEach(function(pe){pe.styles((0,ae.pi)((0,ae.pi)({},I),{transformOrigin:"center"})),cM(pe.node(),R,!0)});var ne=p.maybeAppendByClassName(j0.pageInfoGroup,"g");this.pageInfoGroup=ne.node(),ne.maybeAppendByClassName(j0.pageInfo,"text").styles(y),this.updatePageInfo(),p.node().setLocalPosition(l+i,c/2),N&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},t.prototype.render=function(n,r){var i=n.x,s=i===void 0?0:i,l=n.y,c=l===void 0?0:l;this.attr("transform","translate(".concat(s,", ").concat(c,")"));var h=zi(r);this.renderClipPath(h),this.renderController(h),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},t.prototype.bindEvents=function(){var n=this,r=lw(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(ka.INSERTED,r),this.playWindow.addEventListener(ka.REMOVED,r)},t}(ri),o0=as({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function UQ(e){var t=e.querySelector(o0.marker.class);return t?t.style:{}}var jQ=function(e){(0,ae.ZT)(t,e);function t(n){return e.call(this,n,{span:[1,1],marker:function(){return new Sl({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(t.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,s=n.node().getBBox(),l=s.width,c=s.height,h=r.node().getBBox(),p=h.width,v=h.height;return{markerWidth:i,labelWidth:l,valueWidth:p,height:Math.max(i,c,v)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=(0,ae.CR)(Bh(n),2),i=r[0],s=r[1],l=this.showValue?s:0,c=i+l;return[i/c,l/c]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,s=r.width,l=this.actualSpace,c=l.markerWidth,h=l.height,p=this.actualSpace,v=p.labelWidth,y=p.valueWidth,b=(0,ae.CR)(this.spacing,2),T=b[0],M=b[1];if(s){var R=s-i-T-M,I=(0,ae.CR)(this.span,2),N=I[0],z=I[1];n=(0,ae.CR)([N*R,z*R],2),v=n[0],y=n[1]}var H=c+v+y+T+M;return{width:H,height:h,markerWidth:c,labelWidth:v,valueWidth:y}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=(0,ae.CR)(Bh(n),2),i=r[0],s=r[1];return this.showValue?[i,s]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,s=n.valueWidth,l=n.width,c=n.height,h=(0,ae.CR)(this.spacing,2),p=h[0],v=h[1];return{height:c,width:l,markerWidth:r,labelWidth:i,valueWidth:s,position:[r/2,r+p,r+i+p+v]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleSize",{get:function(){var n=UQ(this.markerGroup.node()),r=this.attributes,i=r.markerSize,s=r.markerStrokeWidth,l=s===void 0?n.strokeWidth:s,c=r.markerLineWidth,h=c===void 0?n.lineWidth:c,p=r.markerStroke,v=p===void 0?n.stroke:p,y=+(l||h||(v?1:0))*Math.sqrt(2),b=this.markerGroup.node().getBBox(),T=b.width,M=b.height;return(1-y/Math.max(T,M))*i},enumerable:!1,configurable:!0}),t.prototype.renderMarker=function(n){var r=this,i=this.attributes.marker,s=Ua(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(o0.markerGroup,"g").style("zIndex",0),po(!!i,this.markerGroup,function(){var l=r.markerGroup.node(),c=l.getElementsByClassName(o0.marker.name)[0],h=i();c?h.nodeName===c.nodeName?(Qj(c,h),zi(c).styles(s)):(c.remove(),zi(h).attr("className",o0.marker.name).styles(s),l.appendChild(h)):(zi(h).attr("className",o0.marker.name).styles(s),l.appendChild(h)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var p=cM(r.markerGroup.node(),r.scaleSize,!0);r.markerGroup.node().style._transform="scale(".concat(p,")")})},t.prototype.renderLabel=function(n){var r=Ua(this.attributes,"label"),i=r.text,s=(0,ae._T)(r,["text"]);this.labelGroup=n.maybeAppendByClassName(o0.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(o0.label,function(){return L_(i)}).styles(s)},t.prototype.renderValue=function(n){var r=this,i=Ua(this.attributes,"value"),s=i.text,l=(0,ae._T)(i,["text"]);this.valueGroup=n.maybeAppendByClassName(o0.valueGroup,"g").style("zIndex",0),po(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(o0.value,function(){return L_(s)}).styles(l)})},t.prototype.renderBackground=function(n){var r=this.shape,i=r.width,s=r.height,l=Ua(this.attributes,"background");this.background=n.maybeAppendByClassName(o0.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(o0.background,"rect").styles((0,ae.pi)({width:i,height:s},l))},t.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,s=n.height,l=(0,ae.CR)(n.position,3),c=l[0],h=l[1],p=l[2],v=s/2;this.markerGroup.styles({transform:"translate(".concat(c,", ").concat(v,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(h,", ").concat(v,")")}),pM(this.labelGroup.select(o0.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(p,", ").concat(v,")")}),pM(this.valueGroup.select(o0.value.class).node(),Math.ceil(i)))},t.prototype.render=function(n,r){var i=zi(r),s=n.x,l=s===void 0?0:s,c=n.y,h=c===void 0?0:c;i.styles({transform:"translate(".concat(l,", ").concat(h,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},t}(ri),Q_=as({page:"item-page",navigator:"navigator",item:"item"},"items"),q8=function(e,t,n){return n===void 0&&(n=!0),e?t(e):n},VQ=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:fP,mouseenter:fP,mouseleave:fP})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(t.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,s=n.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,s.length]:[s.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,s=Ua(this.attributes,"item"),l=r.map(function(c,h){var p=c.id,v=p===void 0?h:p,y=c.label,b=c.value;return{id:"".concat(v),index:h,style:(0,ae.pi)({layout:i,labelText:y,valueText:b},Object.fromEntries(Object.entries(s).map(function(T){var M=(0,ae.CR)(T,2),R=M[0],I=M[1];return[R,B0(I,[c,h,r])]})))}});return l},enumerable:!1,configurable:!0}),t.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,s=r.width,l=r.rowPadding,c=r.colPadding,h=(0,ae.CR)(this.navigatorShape,1),p=h[0],v=(0,ae.CR)(this.grid,2),y=v[0],b=v[1],T=b*y,M=0;return this.pageViews.children.map(function(R,I){var N,z,H=Math.floor(I/T),X=I%T,Y=n.ifHorizontal(b,y),ne=[Math.floor(X/Y),X%Y];i==="vertical"&&ne.reverse();var pe=(0,ae.CR)(ne,2),ye=pe[0],De=pe[1],Xe=(s-p-(b-1)*c)/b,Ke=R.getBBox().height,mt=(0,ae.CR)([0,0],2),Qe=mt[0],ut=mt[1];return i==="horizontal"?(N=(0,ae.CR)([M,ye*(Ke+l)],2),Qe=N[0],ut=N[1],M=De===b-1?0:M+Xe+c):(z=(0,ae.CR)([De*(Xe+c),M],2),Qe=z[0],ut=z[1],M=ye===y-1?0:M+Ke+l),{page:H,index:I,row:ye,col:De,pageIndex:X,width:Xe,height:Ke,x:Qe,y:ut}})},t.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,s=n.rowPadding,l=n.colPadding,c=(0,ae.CR)(this.navigatorShape,1),h=c[0],p=(0,ae.CR)(this.grid,2),v=p[0],y=p[1],b=(0,ae.CR)([r-h,i],2),T=b[0],M=b[1],R=(0,ae.CR)([0,0,0,0,0,0,0,0],8),I=R[0],N=R[1],z=R[2],H=R[3],X=R[4],Y=R[5],ne=R[6],pe=R[7];return this.pageViews.children.map(function(ye,De){var Xe,Ke,mt,Qe,ut=ye.getBBox(),ct=ut.width,gt=ut.height,Xt=ne===0?0:l,Rt=ne+Xt+ct;if(Rt<=T&&q8(X,function(wn){return wn<y}))return Xe=(0,ae.CR)([ne+Xt,pe,Rt],3),I=Xe[0],N=Xe[1],ne=Xe[2],{width:ct,height:gt,x:I,y:N,page:z,index:De,pageIndex:H++,row:Y,col:X++};Ke=(0,ae.CR)([Y+1,0,0,pe+gt+s],4),Y=Ke[0],X=Ke[1],ne=Ke[2],pe=Ke[3];var kt=pe+gt;return kt<=M&&q8(Y,function(wn){return wn<v})?(mt=(0,ae.CR)([ne,pe,ct],3),I=mt[0],N=mt[1],ne=mt[2],{width:ct,height:gt,x:I,y:N,page:z,index:De,pageIndex:H++,row:Y,col:X++}):(Qe=(0,ae.CR)([0,0,ct,0,z+1,0,0,0],8),I=Qe[0],N=Qe[1],ne=Qe[2],pe=Qe[3],z=Qe[4],H=Qe[5],Y=Qe[6],X=Qe[7],{width:ct,height:gt,x:I,y:N,page:z,index:De,pageIndex:H++,row:Y,col:X++})})},Object.defineProperty(t.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),t.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return um(i,n,r)},t.prototype.flattenPage=function(n){n.querySelectorAll(Q_.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(Q_.page.class).forEach(function(r){var i=n.removeChild(r);i.destroy()})},t.prototype.renderItems=function(n){var r=this.attributes,i=r.click,s=r.mouseenter,l=r.mouseleave;this.flattenPage(n);var c=this.dispatchCustomEvent.bind(this);zi(n).selectAll(Q_.item.class).data(this.renderData,function(h){return h.id}).join(function(h){return h.append(function(p){var v=p.style;return new jQ({style:v})}).attr("className",Q_.item.name).on("click",function(){i==null||i(this),c("itemClick",{item:this})}).on("pointerenter",function(){s==null||s(this),c("itemMouseenter",{item:this})}).on("pointerleave",function(){l==null||l(this),c("itemMouseleave",{item:this})})},function(h){return h.each(function(p){var v=p.style;this.update(v)})},function(h){return h.remove()})},t.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,s=r.width,l=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,c=(0,ae.CR)(this.navigatorShape,2),h=c[0],p=c[1];this.navigator.update(i==="grid"?{pageWidth:s-h,pageHeight:l-p}:{})},t.prototype.adjustLayout=function(){var n=this,r=Object.entries(BQ(this.itemsLayout,"page")).map(function(s){var l=(0,ae.CR)(s,2),c=l[0],h=l[1];return{page:c,layouts:h}}),i=(0,ae.ev)([],(0,ae.CR)(this.navigator.getContainer().children),!1);r.forEach(function(s){var l=s.layouts,c=n.pageViews.appendChild(new yc({className:Q_.page.name}));l.forEach(function(h){var p=h.x,v=h.y,y=h.index,b=h.width,T=h.height,M=i[y];c.appendChild(M),FQ(M,"__layout__",h),M.update({x:p,y:v,width:b,height:T})})}),this.relayoutNavigator()},t.prototype.renderNavigator=function(n){var r=this.attributes.orientation,i=Ua(this.attributes,"nav"),s=In({orientation:r},i),l=this;return n.selectAll(Q_.navigator.class).data(["nav"]).join(function(c){return c.append(function(){return new zQ({style:s})}).attr("className",Q_.navigator.name).each(function(){l.navigator=this})},function(c){return c.each(function(){this.update(s)})},function(c){return c.remove()}),this.navigator},t.prototype.getBBox=function(){return this.navigator.getBBox()},t.prototype.render=function(n,r){var i=this.attributes.data;if(!(!i||i.length===0)){var s=this.renderNavigator(zi(r));this.renderItems(s.getContainer()),this.adjustLayout()}},t.prototype.dispatchCustomEvent=function(n,r){var i=new Jl(n,{detail:r});this.dispatchEvent(i)},t}(ri),HQ=function(e){(0,ae.ZT)(t,e);function t(n){return e.call(this,n,vG)||this}return t.prototype.renderTitle=function(n,r,i){var s=this.attributes,l=s.showTitle,c=s.titleText,h=Ua(this.attributes,"title"),p=(0,ae.CR)(F0(h),2),v=p[0],y=p[1];this.titleGroup=n.maybeAppendByClassName(kh.titleGroup,"g").styles(y);var b=(0,ae.pi)((0,ae.pi)({width:r,height:i},v),{text:l?c:""});this.title=this.titleGroup.maybeAppendByClassName(kh.title,function(){return new D4({style:b})}).update(b)},t.prototype.renderItems=function(n,r){var i=r.x,s=r.y,l=r.width,c=r.height,h=Ua(this.attributes,"title",!0),p=(0,ae.CR)(F0(h),2),v=p[0],y=p[1],b=(0,ae.pi)((0,ae.pi)({},v),{width:l,height:c,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(kh.itemsGroup,"g").styles((0,ae.pi)((0,ae.pi)({},y),{transform:"translate(".concat(i,", ").concat(s,")")}));var T=this;this.itemsGroup.selectAll(kh.items.class).data(["items"]).join(function(M){return M.append(function(){return new VQ({style:b})}).attr("className",kh.items.name).each(function(){T.items=zi(this)})},function(M){return M.update(b)},function(M){return M.remove()})},t.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),i=r.x,s=r.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(s,")")}},Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,s=n.height;return r?this.title.node().getAvailableSpace():new Gu(0,0,i,s)},enumerable:!1,configurable:!0}),t.prototype.getBBox=function(){var n,r,i=(n=this.title)===null||n===void 0?void 0:n.node(),s=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!s?e.prototype.getBBox.call(this):_V(i,s)},t.prototype.render=function(n,r){var i=this.attributes,s=i.width,l=i.height,c=i.x,h=c===void 0?0:c,p=i.y,v=p===void 0?0:p,y=zi(r);r.style.transform="translate(".concat(h,", ").concat(v,")"),this.renderTitle(y,s,l),this.renderItems(y,this.availableSpace),this.adjustLayout()},t}(ri);function fE(e){if(M_(e)){var t=e;return t[t.length-1]}}var GQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function WQ(e,t){const n=sm(e,"shape"),r=sm(e,"color"),i=n?n.clone():null,s=[];for(const[c,h]of t){const p=c.type,y=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:h.data).map((b,T)=>{var M;return i?i.map(b||"point"):((M=c==null?void 0:c.style)===null||M===void 0?void 0:M.shape)||h.defaultShape||"point"});typeof p=="string"&&s.push([p,y])}if(s.length===0)return["point",["point"]];if(s.length===1||!n)return s[0];const{range:l}=n.getOptions();return s.map(([c,h])=>{let p=0;for(let v=0;v<s.length;v++){const y=l[v%l.length];h[v]===y&&p++}return[p/h.length,[c,h]]}).sort((c,h)=>h[0]-c[0])[0][1]}function ZQ(e,t){const{scales:n,library:r,markState:i}=t,[s,l]=WQ(n,i),{itemMarker:c,itemMarkerSize:h}=e,p=(b,T)=>{var M,R,I;const N=((I=(R=(M=r[`mark.${s}`])===null||M===void 0?void 0:M.props)===null||R===void 0?void 0:R.shape[b])===null||I===void 0?void 0:I.props.defaultMarker)||fE(b.split(".")),z=typeof h=="function"?h(T):h;return()=>eK(N,{color:T.color})(0,0,z)},v=b=>`${l[b]}`;return sm(n,"shape")&&!c?(b,T)=>p(v(T),b):typeof c=="function"?(b,T)=>{const M=c(b.id,T);return typeof M=="string"?p(M,b):M}:(b,T)=>p(c||v(T),b)}function XQ(e){const t=sm(e,"opacity");if(t){const{range:n}=t.getOptions();return(r,i)=>n[i]}}function YQ(e,t){const n=sm(e,"size");return n instanceof ZT?n.map(NaN)*2:t}function $Q(e,t){const{labelFormatter:n=b=>`${b}`}=e,{scales:r,theme:i}=t,s=i.legendCategory.itemMarkerSize,l=YQ(r,s),c={itemMarker:ZQ(Object.assign(Object.assign({},e),{itemMarkerSize:l}),t),itemMarkerSize:l,itemMarkerOpacity:XQ(r)},h=typeof n=="string"?r0(n):n,p=sm(r,"color"),v=SH(r),y=p?b=>p.map(b):()=>t.theme.color;return Object.assign(Object.assign({},c),{data:v.map(b=>({id:b,label:h(b),color:y(b)}))})}function qQ(e,t,n){const{position:r}=t;if(r==="center"){const{bbox:l}=e,{width:c,height:h}=l;return{width:c,height:h}}const{width:i,height:s}=rD(e,t,n);return{width:i,height:s}}const hP=e=>{const{labelFormatter:t,layout:n,order:r,orientation:i,position:s,size:l,title:c,cols:h,itemMarker:p}=e,v=GQ(e,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:y}=v;return b=>{const{value:T,theme:M}=b,{bbox:R}=T,{width:I,height:N}=qQ(T,e,hP),z=tD(s,n),H=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(s)?"vertical":"horizontal",width:I,height:N,layout:h!==void 0?"grid":"flex"},h!==void 0&&{gridCol:h}),y!==void 0&&{gridRow:y}),{titleText:qw(c)}),$Q(e,b)),{legendCategory:X={}}=M,Y=Kw(Object.assign({},X,H,v)),ne=new bH({style:Object.assign(Object.assign({x:R.x,y:R.y,width:R.width,height:R.height},z),{subOptions:Y})});return ne.appendChild(new HQ({className:"legend-category",style:Y})),ne}};hP.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const K8=e=>()=>new yc;K8.props={};var KQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Q8(e,t,n,r){switch(r){case"center":return{x:e+n/2,y:t,textAlign:"middle"};case"right":return{x:e+n,y:t,textAlign:"right"};default:return{x:e,y:t,textAlign:"left"}}}const QQ=_H({render(e,t){const{width:n,title:r,subtitle:i,spacing:s=2,align:l="left",x:c,y:h}=e,p=KQ(e,["width","title","subtitle","spacing","align","x","y"]);t.style.transform=`translate(${c}, ${h})`;const v=Eo(p,"title"),y=Eo(p,"subtitle"),T=eD(t,".title","text").attr("className","title").call(sa,Object.assign(Object.assign(Object.assign({},Q8(0,0,n,l)),{fontSize:14,textBaseline:"top",text:r}),v)).node().getLocalBounds();eD(t,".sub-title","text").attr("className","sub-title").call(M=>{if(!i)return M.node().remove();M.node().attr(Object.assign(Object.assign(Object.assign({},Q8(0,T.max[1]+s,n,l)),{fontSize:12,textBaseline:"top",text:i}),y))})}}),J8=e=>({value:t,theme:n})=>{const{x:r,y:i,width:s,height:l}=t.bbox;return new QQ({style:hi({},n.title,Object.assign({x:r,y:i,width:s,height:l},e))})};J8.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var dP=function(e){if(typeof e!="object"||e===null)return e;var t;if(Ho(e)){t=[];for(var n=0,r=e.length;n<r;n++)typeof e[n]=="object"&&e[n]!=null?t[n]=dP(e[n]):t[n]=e[n]}else{t={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?t[i]=dP(e[i]):t[i]=e[i]}return t},pP=dP,JQ=function(e){(0,ae.ZT)(t,e);function t(n){var r=this,i=n.style,s=(0,ae._T)(n,["style"]);return r=e.call(this,hi({},{type:"column"},(0,ae.pi)({style:i},s)))||this,r.columnsGroup=new yc({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.columns,i=n.x,s=n.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(s,")"),zi(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(l){return l.append("rect").attr("className","column").each(function(c){this.attr(c)})},function(l){return l.each(function(c){this.attr(c)})},function(l){return l.remove()})},t.prototype.update=function(n){this.attr(In({},this.attributes,n)),this.render()},t.prototype.clear=function(){this.removeChildren()},t}(Dh),eJ=function(e){(0,ae.ZT)(t,e);function t(n){var r=this,i=n.style,s=(0,ae._T)(n,["style"]);return r=e.call(this,hi({},{type:"lines"},(0,ae.pi)({style:i},s)))||this,r.linesGroup=r.appendChild(new yc),r.areasGroup=r.appendChild(new yc),r.render(),r}return t.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas,s=n.x,l=n.y;this.style.transform="translate(".concat(s,", ").concat(l,")"),r&&this.renderLines(r),i&&this.renderAreas(i)},t.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},t.prototype.update=function(n){this.attr(In({},this.attributes,n)),this.render()},t.prototype.renderLines=function(n){zi(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},t.prototype.renderAreas=function(n){zi(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},t}(Dh);function tJ(e,t,n,r){var i,s=[],l=!!r,c,h,p=[1/0,1/0],v=[-1/0,-1/0],y,b,T;if(l){i=(0,ae.CR)(r,2),p=i[0],v=i[1];for(var M=0,R=e.length;M<R;M+=1){var I=e[M];p=ng(p,I),v=rg(v,I)}}for(var M=0,N=e.length;M<N;M+=1){var I=e[M];if(M===0&&!n)T=I;else if(M===N-1&&!n)b=I,s.push(T),s.push(b);else{var z=[M?M-1:N-1,M-1][n?0:1];c=e[z],h=e[n?(M+1)%N:M+1];var H=[0,0];H=O2(h,c),H=Pc(H,t);var X=D_(I,c),Y=D_(I,h),ne=X+Y;ne!==0&&(X/=ne,Y/=ne);var pe=Pc(H,-X),ye=Pc(H,Y);b=wv(I,pe),y=wv(I,ye),y=ng(y,rg(h,I)),y=rg(y,ng(h,I)),pe=O2(y,I),pe=Pc(pe,-X/Y),b=wv(I,pe),b=ng(b,rg(c,I)),b=rg(b,ng(c,I)),ye=O2(I,b),ye=Pc(ye,Y/X),y=wv(I,ye),l&&(b=rg(b,p),b=ng(b,v),y=rg(y,p),y=ng(y,v)),s.push(T),s.push(b),T=y}}return n&&s.push(s.shift()),s}function nJ(e,t,n){var r;t===void 0&&(t=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var i=!!t,s=[],l=0,c=e.length;l<c;l+=2)s.push([e[l],e[l+1]]);for(var h=tJ(s,.4,i,n),p=s.length,v=[],y,b,T,l=0;l<p-1;l+=1)y=h[l*2],b=h[l*2+1],T=s[l+1],v.push(["C",y[0],y[1],b[0],b[1],T[0],T[1]]);return i&&(y=h[p],b=h[p+1],r=(0,ae.CR)(s,1),T=r[0],v.push(["C",y[0],y[1],b[0],b[1],T[0],T[1]])),v}function rJ(e,t){var n,r=t.x,i=t.y,s=(0,ae.CR)(i.getOptions().range||[0,0],2),l=s[0],c=s[1];return c>l&&(n=(0,ae.CR)([l,c],2),c=n[0],l=n[1]),e.map(function(h){var p=h.map(function(v,y){return[r.map(y),(0,d.Z)(i.map(v),c,l)]});return p})}function hE(e,t){t===void 0&&(t=!1);var n=t?e.length-1:0,r=e.map(function(i,s){return(0,ae.ev)([s===n?"M":"L"],(0,ae.CR)(i),!1)});return t?r.reverse():r}function qT(e,t){if(t===void 0&&(t=!1),e.length<=2)return hE(e);for(var n=[],r=e.length,i=0;i<r;i+=1){var s=t?e[r-i-1]:e[i];Pw(s,n.slice(-2))||n.push.apply(n,(0,ae.ev)([],(0,ae.CR)(s),!1))}var l=nJ(n,!1);return t?l.unshift((0,ae.ev)(["M"],(0,ae.CR)(e[r-1]),!1)):l.unshift((0,ae.ev)(["M"],(0,ae.CR)(e[0]),!1)),l}function vP(e,t,n){var r=pP(e);return r.push(["L",t,n],["L",0,n],["Z"]),r}function iJ(e,t,n,r){return e.map(function(i){return vP(t?qT(i):hE(i),n,r)})}function oJ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var s=e[i],l=hE(s),c=void 0;if(i===0)c=vP(l,t,n);else{var h=e[i-1],p=hE(h,!0);p[0][0]="L",c=(0,ae.ev)((0,ae.ev)((0,ae.ev)([],(0,ae.CR)(l),!1),(0,ae.CR)(p),!1),[["Z"]],!1)}r.push(c)}return r}function aJ(e,t,n){for(var r=[],i=e.length-1;i>=0;i-=1){var s=e[i],l=qT(s),c=void 0;if(i===0)c=vP(l,t,n);else{var h=e[i-1],p=qT(h,!0),v=s[0];p[0][0]="L",c=(0,ae.ev)((0,ae.ev)((0,ae.ev)([],(0,ae.CR)(l),!1),(0,ae.CR)(p),!1),[(0,ae.ev)(["M"],(0,ae.CR)(v),!1),["Z"]],!1)}r.push(c)}return r}var sJ=function(e,t){if(Ho(e)){for(var n,r=1/0,i=0;i<e.length;i++){var s=e[i],l=_c(t)?t(s):s[t];l<r&&(n=s,r=l)}return n}},lJ=function(e,t){if(Ho(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var s=e[i],l=_c(t)?t(s):s[t];l>r&&(n=s,r=l)}return n}};function ek(e){return e.length===0?[0,0]:[is(sJ(e,function(t){return is(t)||0})),Uo(lJ(e,function(t){return Uo(t)||0}))]}function tk(e){for(var t=pP(e),n=t[0].length,r=(0,ae.CR)([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],s=r[1],l=0;l<t.length;l+=1)for(var c=t[l],h=0;h<n;h+=1)c[h]>=0?(c[h]+=i[h],i[h]=c[h]):(c[h]+=s[h],s[h]=c[h]);return t}var uJ=function(e){(0,ae.ZT)(t,e);function t(n){return e.call(this,n,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(t.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(n==null?void 0:n.length)===0)return[[]];var r=pP(n);return(0,yu.Z)(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.attributes.isStack?tk(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"baseline",{get:function(){var n=this.scales.y,r=(0,ae.CR)(n.getOptions().domain||[0,0],2),i=r[0],s=r[1];return s<0?n.map(s):n.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,i=n.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,s=r.isStack,l=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var c=Ua(this.attributes,"area"),h=Ua(this.attributes,"line"),p=this.containerShape.width,v=this.data;if(v[0].length===0)return{lines:[],areas:[]};var y=this.scales,b=y.x,T=y.y,M=rJ(v,{type:"line",x:b,y:T}),R=[];if(c){var I=this.baseline;s?R=l?aJ(M,p,I):oJ(M,p,I):R=iJ(M,l,p,I)}return{lines:M.map(function(N,z){return(0,ae.pi)({stroke:n.getColor(z),d:l?qT(N):hE(N)},h)}),areas:R.map(function(N,z){return(0,ae.pi)({d:N,fill:n.getColor(z)},c)})}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsStyle",{get:function(){var n=this,r=Ua(this.attributes,"column"),i=this.attributes,s=i.isStack,l=i.type,c=i.scale;if(l!=="column")throw new Error("columnsStyle can only be used in column type");var h=this.containerShape.height,p=this.rawData;if(!p)return{columns:[]};s&&(p=tk(p));var v=this.createScales(p),y=v.x,b=v.y,T=(0,ae.CR)(ek(p),2),M=T[0],R=T[1],I=new hd({domain:[0,R-(M>0?0:M)],range:[0,h*c]}),N=y.getBandWidth(),z=this.rawData;return{columns:p.map(function(H,X){return H.map(function(Y,ne){var pe=N/p.length,ye=function(){return{x:y.map(ne)+pe*X,y:Y>=0?b.map(Y):b.map(0),width:pe,height:I.map(Math.abs(Y))}},De=function(){return{x:y.map(ne),y:b.map(Y),width:N,height:I.map(z[X][ne])}};return(0,ae.pi)((0,ae.pi)({fill:n.getColor(X)},r),s?De():ye())})})}},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){_s(r,".container","rect").attr("className","container").node();var i=n.type,s=n.x,l=n.y,c="spark".concat(i),h=(0,ae.pi)({x:s,y:l},i==="line"?this.linesStyle:this.columnsStyle);zi(r).selectAll(".spark").data([i]).join(function(p){return p.append(function(v){return v==="line"?new eJ({className:c,style:h}):new JQ({className:c,style:h})}).attr("className","spark ".concat(c))},function(p){return p.update(h)},function(p){return p.remove()})},t.prototype.getColor=function(n){var r=this.attributes.color;return Ho(r)?r[n%r.length]:_c(r)?r.call(null,n):r},t.prototype.createScales=function(n){var r,i,s=this.attributes,l=s.type,c=s.scale,h=s.range,p=h===void 0?[]:h,v=s.spacing,y=this.containerShape,b=y.width,T=y.height,M=(0,ae.CR)(ek(n),2),R=M[0],I=M[1],N=new hd({domain:[(r=p[0])!==null&&r!==void 0?r:R,(i=p[1])!==null&&i!==void 0?i:I],range:[T,T*(1-c)]});return l==="line"?{type:l,x:new hd({domain:[0,n[0].length-1],range:[0,b]}),y:N}:{type:l,x:new py({domain:n[0].map(function(z,H){return H}),range:[0,b],paddingInner:v,paddingOuter:v/2,align:.5}),y:N}},t.tag="sparkline",t}(ri),nk=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this,n,(0,ae.pi)((0,ae.pi)((0,ae.pi)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},dh(dD,"handle")),dh(fD,"handleIcon")),dh(hD,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(s){s.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(Jw(s));var l=r.availableSpace,c=l.x,h=l.y,p=r.getBBox(),v=p.x,y=p.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([c,h])-r.getOrientVal([+v,+y])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var s=r.attributes,l=s.slidable,c=s.brushable,h=s.type;i.stopPropagation();var p=r.getOrientVal(Jw(i)),v=p-r.prevPos;if(v){var y=r.getRatio(v);switch(r.target){case"start":l&&r.setValuesOffset(y);break;case"end":l&&r.setValuesOffset(0,y);break;case"selection":l&&r.setValuesOffset(y,y);break;case"track":if(!c)return;r.selectionWidth+=y,h==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break;default:break}r.prevPos=p}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var s=r.attributes,l=s.onChange,c=s.type,h=c==="range"?i:i[1],p=c==="range"?r.getValues():r.getValues()[1],v=new Jl("valuechange",{detail:{oldValue:h,value:p}});r.dispatchEvent(v),l==null||l(p)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(t.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=Ua(this.attributes,"sparkline");return(0,ae.pi)((0,ae.pi)({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,s=(0,ae.CR)(this.getOrientVal([[r,i],[i,r]]),2),l=s[0],c=s[1];return{width:l,height:c}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.x,i=n.y,s=n.padding,l=(0,ae.CR)(Bh(s),4),c=l[0],h=l[1],p=l[2],v=l[3],y=this.shape,b=y.width,T=y.height;return{x:v,y:c,width:b-(v+h),height:T-(c+p)}},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.values},t.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},t.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(lm.selection.class).each(function(i,s){Fe(this,r[s],n)})},t.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&Fe(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&Fe(this.endHandle,this.getHandleStyle("end"),n))},t.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var i=this.values,s=this.clampValues(n);this.attributes.values=s,this.setValues(s),r&&this.onValueChange(i)},t.prototype.renderTrack=function(n){var r=this.attributes,i=r.x,s=r.y,l=Ua(this.attributes,"track");this.trackShape=zi(n).maybeAppendByClassName(lm.track,"rect").styles((0,ae.pi)((0,ae.pi)({x:i,y:s},this.shape),l))},t.prototype.renderBrushArea=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.brushable;this.brushArea=zi(n).maybeAppendByClassName(lm.brushArea,"rect").styles((0,ae.pi)({x:i,y:s,fill:"transparent",cursor:l?"crosshair":"default"},this.shape))},t.prototype.renderSparkline=function(n){var r=this,i=this.attributes,s=i.x,l=i.y,c=i.orientation,h=zi(n).maybeAppendByClassName(lm.sparklineGroup,"g");po(c==="horizontal",h,function(p){var v=(0,ae.pi)((0,ae.pi)({},r.sparklineStyle),{x:s,y:l});p.maybeAppendByClassName(lm.sparkline,function(){return new uJ({style:v})}).update(v)})},t.prototype.renderHandles=function(){var n=this,r,i=this.attributes,s=i.showHandle,l=i.type,c=l==="range"?["start","end"]:["end"],h=s?c:[],p=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(lm.handle.class).data(h.map(function(v){return{type:v}}),function(v){return v.type}).join(function(v){return v.append(function(y){var b=y.type;return new pD({style:n.getHandleStyle(b)})}).each(function(y){var b=y.type;this.attr("class","".concat(lm.handle.name," ").concat(b,"-handle"));var T="".concat(b,"Handle");p[T]=this,this.addEventListener("pointerdown",p.onDragStart(b))})},function(v){return v.each(function(y){var b=y.type;this.update(p.getHandleStyle(b))})},function(v){return v.each(function(y){var b=y.type,T="".concat(b,"Handle");p[T]=void 0}).remove()})},t.prototype.renderSelection=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.type,c=r.selectionType;this.foregroundGroup=zi(n).maybeAppendByClassName(lm.foreground,"g");var h=Ua(this.attributes,"selection"),p=function(y){return y.style("visibility",function(b){return b.show?"visible":"hidden"}).style("cursor",function(b){return c==="select"?"grab":c==="invert"?"crosshair":"default"}).styles((0,ae.pi)((0,ae.pi)({},h),{transform:"translate(".concat(i,", ").concat(s,")")}))},v=this;this.foregroundGroup.selectAll(lm.selection.class).data(l==="value"?[]:this.calcSelectionArea().map(function(y,b){return{style:(0,ae.pi)({},y),index:b,show:c==="select"?b===1:b!==1}}),function(y){return y.index}).join(function(y){return y.append("rect").attr("className",lm.selection.name).call(p).each(function(b,T){var M=this;T===1?(v.selectionShape=zi(this),this.on("pointerdown",function(R){M.attr("cursor","grabbing"),v.onDragStart("selection")(R)}),v.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),v.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),v.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){M.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){M.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){M.attr("cursor","pointer")})):this.on("pointerdown",v.onDragStart("track"))})},function(y){return y.call(p)},function(y){return y.remove()}),this.updateSelectionArea(!1),this.renderHandles()},t.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},t.prototype.clampValues=function(n,r){var i;r===void 0&&(r=4);var s=(0,ae.CR)(this.range,2),l=s[0],c=s[1],h=(0,ae.CR)(this.getValues().map(function(I){return Qw(I,r)}),2),p=h[0],v=h[1],y=Array.isArray(n)?n:[p,n!=null?n:v],b=(0,ae.CR)((y||[p,v]).map(function(I){return Qw(I,r)}),2),T=b[0],M=b[1];if(this.attributes.type==="value")return[0,(0,d.Z)(M,l,c)];T>M&&(i=(0,ae.CR)([M,T],2),T=i[0],M=i[1]);var R=M-T;return R>c-l?[l,c]:T<l?p===l&&v===M?[l,M]:[l,R+l]:M>c?v===c&&p===T?[T,c]:[c-R,c]:[T,M]},t.prototype.calcSelectionArea=function(n){var r=(0,ae.CR)(this.clampValues(n),2),i=r[0],s=r[1],l=this.availableSpace,c=l.x,h=l.y,p=l.width,v=l.height;return this.getOrientVal([[{y:h,height:v,x:c,width:i*p},{y:h,height:v,x:i*p+c,width:(s-i)*p},{y:h,height:v,x:s*p,width:(1-s)*p}],[{x:c,width:p,y:h,height:i*v},{x:c,width:p,y:i*v+h,height:(s-i)*v},{x:c,width:p,y:s*v,height:(1-s)*v}]])},t.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,s=i.x,l=i.y,c=i.width,h=i.height,p=(0,ae.CR)(this.clampValues(),2),v=p[0],y=p[1],b=n==="start"?-r:r,T=(n==="start"?v:y)*this.getOrientVal([c,h])+b;return{x:s+this.getOrientVal([T,c/2]),y:l+this.getOrientVal([h/2,T])}},t.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:n==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},t.prototype.calcHandleText=function(n){var r,i=this.attributes,s=i.type,l=i.orientation,c=i.formatter,h=i.autoFitLabel,p=Ua(this.attributes,"handle"),v=Ua(p,"label"),y=p.spacing,b=this.getHandleSize(),T=this.clampValues(),M=n==="start"?T[0]:T[1],R=c(M),I=new Xr({style:(0,ae.pi)((0,ae.pi)((0,ae.pi)({},v),this.inferTextStyle(n)),{text:R})}),N=I.getBBox(),z=N.width,H=N.height;if(I.destroy(),!h){if(s==="value")return{text:R,x:0,y:-H-y};var X=y+b+(l==="horizontal"?z/2:0);return r={text:R},r[l==="horizontal"?"x":"y"]=n==="start"?-X:X,r}var Y=0,ne=0,pe=this.availableSpace,ye=pe.width,De=pe.height,Xe=this.calcSelectionArea()[1],Ke=Xe.x,mt=Xe.y,Qe=Xe.width,ut=Xe.height,ct=y+b;if(l==="horizontal"){var gt=ct+z/2;if(n==="start"){var Xt=Ke-ct-z;Y=Xt>0?-gt:gt}else{var Rt=ye-Ke-Qe-ct>z;Y=Rt?gt:-gt}}else{var kt=ct,wn=H+ct;n==="start"?ne=mt-b>H?-wn:kt:ne=De-(mt+ut)-b>H?wn:-kt}return{x:Y,y:ne,text:R}},t.prototype.getHandleLabelStyle=function(n){var r=Ua(this.attributes,"handleLabel");return(0,ae.pi)((0,ae.pi)((0,ae.pi)({},r),this.calcHandleText(n)),this.inferTextStyle(n))},t.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=Ua(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),s=this.getHandleSize();return(0,ae.pi)({cursor:i,shape:n,size:s},r)},t.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.showLabel,c=r.showLabelOnInteraction,h=r.orientation,p=this.calcHandlePosition(n),v=p.x,y=p.y,b=this.calcHandleText(n),T=l;return!l&&c&&(this.target?T=!0:T=!1),(0,ae.pi)((0,ae.pi)((0,ae.pi)({},dh(this.getHandleIconStyle(),"icon")),dh((0,ae.pi)((0,ae.pi)({},this.getHandleLabelStyle(n)),b),"label")),{transform:"translate(".concat(v+i,", ").concat(y+s,")"),orientation:h,showLabel:T,type:n,zIndex:3})},t.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,s=n.height;return r||Math.floor((this.getOrientVal([+s,+i])+4)/2.4)},t.prototype.getOrientVal=function(n){var r=(0,ae.CR)(n,2),i=r[0],s=r[1],l=this.attributes.orientation;return l==="horizontal"?i:s},t.prototype.setValuesOffset=function(n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=this.attributes.type,l=(0,ae.CR)(this.getValues(),2),c=l[0],h=l[1],p=s==="range"?n:0,v=[c+p,h+r].sort();i?this.setValues(v):this.innerSetValues(v,!0)},t.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,s=r.height;return n/this.getOrientVal([i,s])},t.prototype.dispatchCustomEvent=function(n,r,i){var s=this;n.on(r,function(l){l.stopPropagation(),s.dispatchEvent(new Jl(i,{detail:l}))})},t.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},t.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var i=n.deltaX,s=n.deltaY,l=s||i,c=this.getRatio(l);this.setValuesOffset(c,c,!0)}},t.tag="slider",t}(ri),cJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fJ(e,t,n){const{x:r,y:i,width:s,height:l}=e;if(t==="left")return[r+s-n,i];if(t==="right")return[r,i];if(t==="bottom")return[r,i];if(t==="top")return[r,i+l-n]}const dE=e=>{const{orientation:t,labelFormatter:n,size:r,style:i={},position:s}=e,l=cJ(e,["orientation","labelFormatter","size","style","position"]);return c=>{var h;const{scales:[p],value:v,theme:y,coordinate:b}=c,{bbox:T}=v,{width:M,height:R}=T,{slider:I={}}=y,N=((h=p.getFormatter)===null||h===void 0?void 0:h.call(p))||(ye=>ye+""),z=typeof n=="string"?r0(n):n,H=t==="horizontal",X=tu(b)&&H,{trackSize:Y=I.trackSize}=i,[ne,pe]=fJ(T,s,Y);return new nk({className:"slider",style:Object.assign({},I,Object.assign(Object.assign({x:ne,y:pe,trackLength:H?M:R,orientation:t,formatter:ye=>{const De=z||N,Xe=X?1-ye:ye,Ke=wb(p,Xe,!0);return De(Ke)},sparklineData:dJ(e,c)},i),l))})}};function hJ(e,t){const[n]=Array.from(e.entries()).filter(([i])=>i.type==="line"||i.type==="area").map(([i])=>{const{encode:s,slider:l}=i;if(l!=null&&l.x&&Object.keys(l.x).length===0){const c=h=>{const p=s[h];return[h,p?p.value:void 0]};return Object.fromEntries(t.map(c))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((i,s,l)=>(i[s]=i[s]||[],i[s].push(n.y[l]),i),{});return Object.values(r)}function dJ(e,t){const{markState:n}=t;return Ho(e.sparklineData)?e.sparklineData:hJ(n,["y","series"])}dE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const rk=e=>dE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));rk.props=Object.assign(Object.assign({},dE.props),{defaultPosition:"bottom"});const ik=e=>dE(Object.assign(Object.assign({},e),{orientation:"vertical"}));ik.props=Object.assign(Object.assign({},dE.props),{defaultPosition:"left"});var pJ=function(e){(0,ae.ZT)(t,e);function t(n){var r=e.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var s=r.attributes.value;if(i!==s){var l={detail:{oldValue:i,value:s}};r.dispatchEvent(new Jl("scroll",l)),r.dispatchEvent(new Jl("valuechange",l))}},r.onTrackClick=function(i){var s=r.attributes.slidable;if(s){var l=(0,ae.CR)(r.getLocalPosition(),2),c=l[0],h=l[1],p=(0,ae.CR)(r.padding,4),v=p[0],y=p[3],b=r.getOrientVal([c+y,h+v]),T=r.getOrientVal(Jw(i)),M=(T-b)/r.trackLength;r.setValue(M,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new Jl("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new Jl("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new Jl("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new Jl("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(t.prototype,"padding",{get:function(){var n=this.attributes.padding;return Bh(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var n=this.attributes.value,r=(0,ae.CR)(this.range,2),i=r[0],s=r[1];return(0,d.Z)(n,i,s)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength,s=i===void 0?r:i;return s},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=(0,ae.CR)(this.padding,4),s=i[0],l=i[1],c=i[2],h=i[3],p=(0,ae.CR)(this.getOrientVal([[r,n],[n,r]]),2),v=p[0],y=p[1];return{x:h,y:s,width:+v-(h+l),height:+y-(s+c)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var s=this.availableSpace,l=s.width,c=s.height;return i||this.getOrientVal([c,l])/2},enumerable:!1,configurable:!0}),t.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,i=r.viewportLength,s=r.contentLength,l=i/s,c=(0,ae.CR)(this.range,2),h=c[0],p=c[1],v=n*(p-h-l);return[v,v+l]},t.prototype.getValue=function(){return this.value},t.prototype.renderSlider=function(n){var r=this.attributes,i=r.x,s=r.y,l=r.orientation,c=r.trackSize,h=r.padding,p=r.slidable,v=Ua(this.attributes,"track"),y=Ua(this.attributes,"thumb"),b=(0,ae.pi)((0,ae.pi)({x:i,y:s,brushable:!1,orientation:l,padding:h,selectionRadius:this.thumbRadius,showHandle:!1,slidable:p,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:c,values:this.getValues()},dh(v,"track")),dh(y,"selection"));this.slider=zi(n).maybeAppendByClassName("scrollbar",function(){return new nk({style:b})}).update(b).node()},t.prototype.render=function(n,r){this.renderSlider(r)},t.prototype.setValue=function(n,r){r===void 0&&(r=!1);var i=this.attributes.value,s=(0,ae.CR)(this.range,2),l=s[0],c=s[1];this.slider.setValues(this.getValues((0,d.Z)(n,l,c)),r),this.onValueChange(i)},t.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},t.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},t.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},t.tag="scrollbar",t}(ri),vJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const pE=e=>{const{orientation:t,labelFormatter:n,style:r}=e,i=vJ(e,["orientation","labelFormatter","style"]);return({scales:[s],value:l,theme:c})=>{const{bbox:h}=l,{x:p,y:v,width:y,height:b}=h,{scrollbar:T={}}=c,{ratio:M,range:R}=s.getOptions(),I=t==="horizontal"?y:b,N=I/M,[z,H]=R,X=H>z?0:1;return new pJ({className:"g2-scrollbar",style:Object.assign({},T,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:p,y:v,trackLength:I,value:X}),i),{orientation:t,contentLength:N,viewportLength:I}))})}};pE.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const ok=e=>pE(Object.assign(Object.assign({},e),{orientation:"horizontal"}));ok.props=Object.assign(Object.assign({},pE.props),{defaultPosition:"bottom"});const ak=e=>pE(Object.assign(Object.assign({},e),{orientation:"vertical"}));ak.props=Object.assign(Object.assign({},pE.props),{defaultPosition:"left"});const mP=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,T]=tu(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],M=[{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.01},{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y}];return c.animate(M,Object.assign(Object.assign({},l),e))}},mJ=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,T]=tu(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],M=[{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.99},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0}];return c.animate(M,Object.assign(Object.assign({},l),e))}},sk=(e,t)=>{const{coordinate:r}=t;return $x.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:Io.NUMBER}),(i,s,l)=>{const[c]=i,h=v=>{const{__data__:y,style:b}=v,{radius:T=0,inset:M=0,fillOpacity:R=1,strokeOpacity:I=1,opacity:N=1}=b,{points:z,y:H,y1:X}=y,Y=k_(r,z,[H,X]),{innerRadius:ne,outerRadius:pe}=Y,ye=uT().cornerRadius(T).padAngle(M*Math.PI/180),De=new Ki({}),Xe=Qe=>(De.attr({d:ye(Qe)}),Rx(De)),Ke=[{scaleInYRadius:ne+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:ne+1e-4,fillOpacity:R,strokeOpacity:I,opacity:N,offset:.01},{scaleInYRadius:pe,fillOpacity:R,strokeOpacity:I,opacity:N}],mt=v.animate(Ke,Object.assign(Object.assign({},l),e));return mt.onframe=function(){v.style.d=Xe(Object.assign(Object.assign({},Y),{outerRadius:Number(v.style.scaleInYRadius)}))},mt.onfinish=function(){v.style.d=Xe(Object.assign(Object.assign({},Y),{outerRadius:pe}))},mt},p=v=>{const{style:y}=v,{transform:b="",fillOpacity:T=1,strokeOpacity:M=1,opacity:R=1}=y,[I,N]=tu(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],z=[{transform:`${b} ${N}`.trimStart(),transformOrigin:I,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${b} ${N}`.trimStart(),transformOrigin:I,fillOpacity:T,strokeOpacity:M,opacity:R,offset:.01},{transform:`${b} scale(1, 1)`.trimStart(),transformOrigin:I,fillOpacity:T,strokeOpacity:M,opacity:R}];return v.animate(z,Object.assign(Object.assign({},l),e))};return nu(r)?h(c):p(c)}},gJ=(e,t)=>{const{coordinate:r}=t;return(i,s,l)=>{const[c]=i,{transform:h="",fillOpacity:p=1,strokeOpacity:v=1,opacity:y=1}=c.style,[b,T]=tu(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],M=[{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:b},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:p,strokeOpacity:v,opacity:y,offset:.99},{transform:`${h} ${T}`.trimStart(),transformOrigin:b,fillOpacity:0,strokeOpacity:0,opacity:0}];return c.animate(M,Object.assign(Object.assign({},l),e))}},lk=(e,t)=>{$x.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:Io.NUMBER});const{coordinate:r}=t;return(i,s,l)=>{const[c]=i;if(!nu(r))return mP(e,t)(i,s,l);const{__data__:h,style:p}=c,{radius:v=0,inset:y=0,fillOpacity:b=1,strokeOpacity:T=1,opacity:M=1}=p,{points:R,y:I,y1:N}=h,z=uT().cornerRadius(v).padAngle(y*Math.PI/180),H=k_(r,R,[I,N]),{startAngle:X,endAngle:Y}=H,ne=[{waveInArcAngle:X+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:X+1e-4,fillOpacity:b,strokeOpacity:T,opacity:M,offset:.01},{waveInArcAngle:Y,fillOpacity:b,strokeOpacity:T,opacity:M}],pe=c.animate(ne,Object.assign(Object.assign({},l),e));return pe.onframe=function(){c.style.d=z(Object.assign(Object.assign({},H),{endAngle:Number(c.style.waveInArcAngle)}))},pe.onfinish=function(){c.style.d=z(Object.assign(Object.assign({},H),{endAngle:Y}))},pe}};lk.props={};const uk=e=>(t,n,r)=>{const[i]=t,{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=i.style,h=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:s,strokeOpacity:l,opacity:c}];return i.animate(h,Object.assign(Object.assign({},r),e))};uk.props={};const ck=e=>(t,n,r)=>{const[i]=t,{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=i.style,h=[{fillOpacity:s,strokeOpacity:l,opacity:c},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(h,Object.assign(Object.assign({},r),e))};ck.props={};const yJ=e=>(n,r,i)=>{const[s]=n,{transform:l="",fillOpacity:c=1,strokeOpacity:h=1,opacity:p=1}=s.style,v="center center",y=[{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p,offset:.01},{transform:`${l} scale(1)`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p}];return s.animate(y,Object.assign(Object.assign({},i),e))},_J=e=>(n,r,i)=>{const[s]=n,{transform:l="",fillOpacity:c=1,strokeOpacity:h=1,opacity:p=1}=s.style,v="center center",y=[{transform:`${l} scale(1)`.trimStart(),transformOrigin:v},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:c,strokeOpacity:h,opacity:p,offset:.99},{transform:`${l} scale(${1e-4})`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(y,Object.assign(Object.assign({},i),e))},fk=e=>(t,n,r)=>{var i,s;const[l]=t,c=((s=(i=l).getTotalLength)===null||s===void 0?void 0:s.call(i))||0,h=[{lineDash:[0,c]},{lineDash:[c,0]}];return l.animate(h,Object.assign(Object.assign({},r),e))};fk.props={};const bJ={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},xJ={[ni.CIRCLE]:["cx","cy","r"],[ni.ELLIPSE]:["cx","cy","rx","ry"],[ni.RECT]:["x","y","width","height"],[ni.IMAGE]:["x","y","width","height"],[ni.LINE]:["x1","y1","x2","y2"],[ni.POLYLINE]:["points"],[ni.POLYGON]:["points"]};function jb(e,t,n=!1){const r={};for(const i of t){const s=e.style[i];s?r[i]=s:n&&(r[i]=bJ[i])}return r}const vE=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function gP(e){const{min:t,max:n}=e.getLocalBounds(),[r,i]=t,[s,l]=n,c=l-i,h=s-r;return[r,i,h,c]}function EJ(e){const[t,n,r,i]=e;return`
    M ${t} ${n}
    L ${t+r} ${n}
    L ${t+r} ${n+i}
    L ${t} ${n+i}
    Z
  `}function SJ(e,t){const[n,r,i,s]=gP(e),l=s/i,c=Math.ceil(Math.sqrt(t/l)),h=Math.ceil(t/c),p=[],v=s/h;let y=0,b=t;for(;b>0;){const T=Math.min(b,c),M=i/T;for(let R=0;R<T;R++){const I=n+R*M,N=r+y*v;p.push(EJ([I,N,M,v]))}b-=T,y+=1}return p}function wJ(e="pack"){return typeof e=="function"?e:SJ}function TJ(e,t,n){let{transform:r}=e.style;const{transform:i}=t.style;hk(t,e);let s=vE;if(e.nodeName===ni.GROUP){const[h,p,v,y]=gP(e),[b,T,M,R]=gP(t),I=h-b,N=p-T,z=v/M,H=y/R;r=`translate(${I}, ${N}) scale(${z}, ${H})`}else s=s.concat(xJ[e.nodeName]||[]);const l=[Object.assign({transform:r!=null?r:"none"},jb(e,s,!0)),Object.assign({transform:i!=null?i:"none"},jb(t,s,!0))];return t.animate(l,n)}function hk(e,t){e.__data__=t.__data__,e.className=t.className,e.markType=t.markType,t.parentNode.replaceChild(e,t)}function AJ(e,t){const{nodeName:n}=e;if(n==="path")return e;const r=new Ki({style:Object.assign(Object.assign({},jb(e,vE)),{d:t})});return hk(r,e),r}function dk(e,t){const n=e.indexOf(t),r=e.lastIndexOf(t);return n===r}function CJ(e){return!dk(e,"m")||!dk(e,"M")}function pk(e){const t=Rx(e);if(t&&!CJ(t))return t}function yP(e,t,n,r){const{nodeName:i}=t,{nodeName:s}=n,l=pk(t),c=pk(n);if(i===s&&i!=="path"||(l===void 0||c===void 0))return TJ(t,n,r);const v=AJ(e,l),y=[Object.assign({},jb(t,vE)),Object.assign({},jb(n,vE))];l!==c&&(y[0].d=l,y[1].d=c);const b=v.animate(y,r);return b.onfinish=()=>{const T=v.style.d;b2(v,n),v.style.d=T,v.style.transform="none"},v.style.transform="none",b}function OJ(e,t,n,r){e.style.visibility="hidden";const i=r(e,t.length);return t.map((s,l)=>{const c=new Ki({style:Object.assign({d:i[l]},jb(e,vE))});return yP(s,c,s,n)})}function MJ(e,t,n,r){const i=r(t,e.length),{fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=t.style,h=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:s,strokeOpacity:l,opacity:c}],p=t.animate(h,n);return[...e.map((y,b)=>{const T=new Ki({style:{d:i[b],fill:t.style.fill}});return yP(y,y,T,n)}),p]}const vk=e=>(t,n,r)=>{const i=wJ(e.split),s=Object.assign(Object.assign({},r),e),{length:l}=t,{length:c}=n;if(l===1&&c===1||l>1&&c>1){const[h]=t,[p]=n;return yP(h,h,p,s)}if(l===1&&c>1){const[h]=t;return OJ(h,n,s,i)}if(l>1&&c===1){const[h]=n;return MJ(t,h,s,i)}return null};vk.props={};const mk=(e,t)=>(n,r,i)=>{const[s]=n,{min:[l,c],halfExtents:h}=s.getLocalBounds(),p=h[0]*2,v=h[1]*2,y=new Ki({style:{d:`M${l},${c}L${l+p},${c}L${l+p},${c+v}L${l},${c+v}Z`}});return s.appendChild(y),s.style.clipPath=y,mP(e,t)([y],r,i)};mk.props={};const gk=(e,t)=>(n,r,i)=>{const[s]=n,{min:[l,c],halfExtents:h}=s.getLocalBounds(),p=h[0]*2,v=h[1]*2,y=new Ki({style:{d:`M${l},${c}L${l+p},${c}L${l+p},${c+v}L${l},${c+v}Z`}});return s.appendChild(y),s.style.clipPath=y,sk(e,t)([y],r,i)};gk.props={};var RJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function PJ(e,{elements:t,datum:n,groupKey:r=y=>y,link:i=!1,background:s=!1,delay:l=60,scale:c,coordinate:h,emitter:p,state:v={}}){var y;const b=t(e),T=new Set(b),M=Nu(b,r),R=X2(b,n),[I,N]=iL(Object.assign({elements:b,valueof:R,link:i,coordinate:h},Eo(v.active,"link"))),[z,H,X]=aL(Object.assign({document:e.ownerDocument,scale:c,coordinate:h,background:s,valueof:R},Eo(v.active,"background"))),Y=hi(v,{active:Object.assign({},((y=v.active)===null||y===void 0?void 0:y.offset)&&{transform:(...Xt)=>{const Rt=v.active.offset(...Xt),[,kt]=Xt;return oL(b[kt],Rt,h)}})}),{setState:ne,removeState:pe,hasState:ye}=sg(Y,R);let De;const Xe=Xt=>{const{target:Rt,nativeEvent:kt=!0}=Xt;if(!T.has(Rt))return;De&&clearTimeout(De);const wn=r(Rt),zn=M.get(wn),or=new Set(zn);for(const ir of b)or.has(ir)?ye(ir,"active")||ne(ir,"active"):(ne(ir,"inactive"),N(ir)),ir!==Rt&&H(ir);z(Rt),I(zn),kt&&p.emit("element:highlight",{nativeEvent:kt,data:{data:n(Rt),group:zn.map(n)}})},Ke=()=>{De&&clearTimeout(De),De=setTimeout(()=>{mt(),De=null},l)},mt=(Xt=!0)=>{for(const Rt of b)pe(Rt,"active","inactive"),H(Rt),N(Rt);Xt&&p.emit("element:unhighlight",{nativeEvent:Xt})},Qe=Xt=>{const{target:Rt}=Xt;s&&!X(Rt)||!s&&!T.has(Rt)||(l>0?Ke():mt())},ut=()=>{mt()};e.addEventListener("pointerover",Xe),e.addEventListener("pointerout",Qe),e.addEventListener("pointerleave",ut);const ct=Xt=>{const{nativeEvent:Rt}=Xt;Rt||mt(!1)},gt=Xt=>{const{nativeEvent:Rt}=Xt;if(Rt)return;const{data:kt}=Xt.data,wn=qM(b,kt,n);wn&&Xe({target:wn,nativeEvent:!1})};return p.on("element:highlight",gt),p.on("element:unhighlight",ct),()=>{e.removeEventListener("pointerover",Xe),e.removeEventListener("pointerout",Qe),e.removeEventListener("pointerleave",ut),p.off("element:highlight",gt),p.off("element:unhighlight",ct);for(const Xt of b)H(Xt),N(Xt)}}function KT(e){var{delay:t,createGroup:n,background:r=!1,link:i=!1}=e,s=RJ(e,["delay","createGroup","background","link"]);return(l,c,h)=>{const{container:p,view:v,options:y}=l,{scale:b,coordinate:T}=v,M=fm(p);return PJ(M,Object.assign({elements:ly,datum:j_(v),groupKey:n?n(v):void 0,coordinate:T,scale:b,state:Ab(y,[["active",r?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:r,link:i,delay:t,emitter:h},s))}}KT.props={reapplyWhenUpdate:!0};function yk(e){return KT(Object.assign(Object.assign({},e),{createGroup:$M}))}yk.props={reapplyWhenUpdate:!0};function _k(e){return KT(Object.assign(Object.assign({},e),{createGroup:rL}))}_k.props={reapplyWhenUpdate:!0};var IJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function DJ(e,{elements:t,datum:n,groupKey:r=y=>y,link:i=!1,single:s=!1,coordinate:l,background:c=!1,scale:h,emitter:p,state:v={}}){var y;const b=t(e),T=new Set(b),M=Nu(b,r),R=X2(b,n),[I,N]=iL(Object.assign({link:i,elements:b,valueof:R,coordinate:l},Eo(v.selected,"link"))),[z,H]=aL(Object.assign({document:e.ownerDocument,background:c,coordinate:l,scale:h,valueof:R},Eo(v.selected,"background"))),X=hi(v,{selected:Object.assign({},((y=v.selected)===null||y===void 0?void 0:y.offset)&&{transform:(...ut)=>{const ct=v.selected.offset(...ut),[,gt]=ut;return oL(b[gt],ct,l)}})}),{setState:Y,removeState:ne,hasState:pe}=sg(X,R),ye=(ut=!0)=>{for(const ct of b)ne(ct,"selected","unselected"),N(ct),H(ct);ut&&p.emit("element:unselect",{nativeEvent:!0})},De=(ut,ct,gt=!0)=>{if(pe(ct,"selected"))ye();else{const Xt=r(ct),Rt=M.get(Xt),kt=new Set(Rt);for(const wn of b)kt.has(wn)?Y(wn,"selected"):(Y(wn,"unselected"),N(wn)),wn!==ct&&H(wn);if(I(Rt),z(ct),!gt)return;p.emit("element:select",Object.assign(Object.assign({},ut),{nativeEvent:gt,data:{data:[n(ct),...Rt.map(n)]}}))}},Xe=(ut,ct,gt=!0)=>{const Xt=r(ct),Rt=M.get(Xt),kt=new Set(Rt);if(pe(ct,"selected")){if(!b.some(zn=>!kt.has(zn)&&pe(zn,"selected")))return ye();for(const zn of Rt)Y(zn,"unselected"),N(zn),H(zn)}else{const wn=Rt.some(zn=>pe(zn,"selected"));for(const zn of b)kt.has(zn)?Y(zn,"selected"):pe(zn,"selected")||Y(zn,"unselected");!wn&&i&&I(Rt),z(ct)}gt&&p.emit("element:select",Object.assign(Object.assign({},ut),{nativeEvent:gt,data:{data:b.filter(wn=>pe(wn,"selected")).map(n)}}))},Ke=ut=>{const{target:ct,nativeEvent:gt=!0}=ut;return T.has(ct)?s?De(ut,ct,gt):Xe(ut,ct,gt):ye()};e.addEventListener("click",Ke);const mt=ut=>{const{nativeEvent:ct,data:gt}=ut;if(ct)return;const Xt=s?gt.data.slice(0,1):gt.data;for(const Rt of Xt){const kt=qM(b,Rt,n);Ke({target:kt,nativeEvent:!1})}},Qe=()=>{ye(!1)};return p.on("element:select",mt),p.on("element:unselect",Qe),()=>{for(const ut of b)N(ut);e.removeEventListener("click",Ke),p.off("element:select",mt),p.off("element:unselect",Qe)}}function QT(e){var{createGroup:t,background:n=!1,link:r=!1}=e,i=IJ(e,["createGroup","background","link"]);return(s,l,c)=>{const{container:h,view:p,options:v}=s,{coordinate:y,scale:b}=p,T=fm(h);return DJ(T,Object.assign({elements:ly,datum:j_(p),groupKey:t?t(p):void 0,coordinate:y,scale:b,state:Ab(v,[["selected",n?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:n,link:r,emitter:c},i))}}QT.props={reapplyWhenUpdate:!0};function bk(e){return QT(Object.assign(Object.assign({},e),{createGroup:$M}))}bk.props={reapplyWhenUpdate:!0};function xk(e){return QT(Object.assign(Object.assign({},e),{createGroup:rL}))}xk.props={reapplyWhenUpdate:!0};var J_=function(e,t,n){var r,i,s,l,c=0;n||(n={});var h=function(){c=n.leading===!1?0:Date.now(),r=null,l=e.apply(i,s),r||(i=s=null)},p=function(){var v=Date.now();!c&&n.leading===!1&&(c=v);var y=t-(v-c);return i=this,s=arguments,y<=0||y>t?(r&&(clearTimeout(r),r=null),c=v,l=e.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(h,y)),l};return p.cancel=function(){clearTimeout(r),c=0,r=i=s=null},p};function LJ(e){const{coordinate:t={}}=e,{transform:n=[]}=t,r=n.find(s=>s.type==="fisheye");if(r)return r;const i={type:"fisheye"};return n.push(i),t.transform=n,e.coordinate=t,i}function NJ({wait:e=30,leading:t,trailing:n=!1}){return r=>{const{options:i,update:s,setState:l,container:c}=r,h=fm(c),p=J_(v=>{const y=XM(h,v);if(!y){l("fisheye"),s();return}l("fisheye",b=>{const T=hi({},b,{interaction:{tooltip:{preserve:!0}}});for(const N of T.marks)N.animate=!1;const[M,R]=y,I=LJ(T);return I.focusX=M,I.focusY=R,I.visual=!0,T}),s()},e,{leading:t,trailing:n});return h.addEventListener("pointerenter",p),h.addEventListener("pointermove",p),h.addEventListener("pointerleave",p),()=>{h.removeEventListener("pointerenter",p),h.removeEventListener("pointermove",p),h.removeEventListener("pointerleave",p)}}}var FJ=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},BJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function kJ(e){const{transform:t=[]}=e,n=t.find(i=>i.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return t.push(r),e.transform=t,r}function zJ(e,t,n){const[r]=Array.from(e.entries()).filter(([i])=>i.type===t).map(([i])=>{const{encode:s}=i,l=c=>{const h=s[c];return[c,h?h.value:void 0]};return Object.fromEntries(n.map(l))});return r}function Ek(e){var{wait:t=20,leading:n,trailing:r=!1,labelFormatter:i=l=>`${l}`}=e,s=BJ(e,["wait","leading","trailing","labelFormatter"]);return l=>{const{view:c,container:h,update:p,setState:v}=l,{markState:y,scale:b,coordinate:T}=c,M=zJ(y,"line",["x","y","series"]);if(!M)return;const{y:R,x:I,series:N=[]}=M,z=R.map((Xt,Rt)=>Rt),H=ag(z.map(Xt=>I[Xt])),X=fm(h),Y=h.getElementsByClassName(va),ne=h.getElementsByClassName(Il),ye=Nu(ne,Xt=>Xt.__data__.key.split("-")[0]),De=new F1({style:Object.assign({x1:0,y1:0,x2:0,y2:X.getAttribute("height"),stroke:"black",lineWidth:1},Eo(s,"rule"))}),Xe=new oc({style:Object.assign({x:0,y:X.getAttribute("height"),text:"",fontSize:10},Eo(s,"label"))});De.append(Xe),X.appendChild(De);const Ke=(Xt,Rt,kt)=>{const[wn]=Xt.invert(kt),zn=Rt.invert(wn);return H[SW(H,zn)]},mt=(Xt,Rt)=>{De.setAttribute("x1",Xt[0]),De.setAttribute("x2",Xt[0]),Xe.setAttribute("text",i(Rt))};let Qe;const ut=Xt=>FJ(this,void 0,void 0,function*(){const{x:Rt}=b,kt=Ke(T,Rt,Xt);mt(Xt,kt),v("chartIndex",zn=>{const or=hi({},zn),ir=or.marks.find(ei=>ei.type==="line"),Ri=Tl(sb(z,ei=>Tl(ei,Po=>+R[Po])/i0(ei,Po=>+R[Po]),ei=>N[ei]).values()),Qi=[1/Ri,Ri];hi(ir,{scale:{y:{domain:Qi}}});const Qr=kJ(ir);Qr.groupBy="color",Qr.basis=(ei,Po)=>{const uo=ei[Sb(Jo=>I[+Jo]).center(ei,kt)];return Po[uo]};for(const ei of or.marks)ei.animate=!1;return or}),Qe=(yield p("chartIndex")).view}),ct=Xt=>{const{scale:Rt,coordinate:kt}=Qe,{x:wn,y:zn}=Rt,or=Ke(kt,wn,Xt);mt(Xt,or);for(const ir of Y){const{seriesIndex:Zr,key:Ri}=ir.__data__,Qi=Zr[Sb(ja=>I[+ja]).center(Zr,or)],Qr=[0,zn.map(1)],ei=[0,zn.map(R[Qi]/R[Zr[0]])],[,Po]=kt.map(Qr),[,uo]=kt.map(ei),Jo=Po-uo;ir.setAttribute("transform",`translate(0, ${Jo})`);const wa=ye.get(Ri)||[];for(const ja of wa)ja.setAttribute("dy",Jo)}},gt=J_(Xt=>{const Rt=XM(X,Xt);Rt&&ct(Rt)},t,{leading:n,trailing:r});return ut([0,0]),X.addEventListener("pointerenter",gt),X.addEventListener("pointermove",gt),X.addEventListener("pointerleave",gt),()=>{De.remove(),X.removeEventListener("pointerenter",gt),X.removeEventListener("pointermove",gt),X.removeEventListener("pointerleave",gt)}}}Ek.props={reapplyWhenUpdate:!0};function mE(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function JT(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function Sk(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function UJ(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):t[r]===void 0?"":t[r]})}var jJ=UJ;function _P(e){return e===void 0&&(e=""),{CONTAINER:"".concat(e,"tooltip"),TITLE:"".concat(e,"tooltip-title"),LIST:"".concat(e,"tooltip-list"),LIST_ITEM:"".concat(e,"tooltip-list-item"),NAME:"".concat(e,"tooltip-list-item-name"),MARKER:"".concat(e,"tooltip-list-item-marker"),NAME_LABEL:"".concat(e,"tooltip-list-item-name-label"),VALUE:"".concat(e,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(e,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(e,"tooltip-crosshair-y")}}var wk={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function VJ(e){var t;e===void 0&&(e="");var n=_P(e);return t={},t[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},t[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},t[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},t[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},t[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},t[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},t[".".concat(n.NAME_LABEL)]=(0,ae.pi)({flex:1},wk),t[".".concat(n.VALUE)]=(0,ae.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},wk),t[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},t}var HJ=function(e){(0,ae.ZT)(t,e);function t(n){var r=this,i,s,l=(s=(i=n.style)===null||i===void 0?void 0:i.template)===null||s===void 0?void 0:s.prefixCls,c=_P(l);return r=e.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(c.CONTAINER,'"></div>'),title:'<div class="'.concat(c.TITLE,'"></div>'),item:'<li class="'.concat(c.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(c.NAME,`">
          <span class="`).concat(c.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(c.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(c.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:VJ(l)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(t.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),t.prototype.getContainer=function(){return this.element},Object.defineProperty(t.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(s,l){var c=s.name,h=c===void 0?"":c,p=s.color,v=p===void 0?"black":p,y=s.index,b=(0,ae._T)(s,["name","color","index"]),T=(0,ae.pi)({name:h,color:v,index:y!=null?y:l},b);return Sk(jJ(i.item,T))})},enumerable:!1,configurable:!0}),t.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},t.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),e.prototype.destroy.call(this)},t.prototype.show=function(n,r){var i=this;if(n!==void 0&&r!==void 0){var s=this.element.style.visibility==="hidden",l=function(){i.attributes.x=n!=null?n:i.attributes.x,i.attributes.y=r!=null?r:i.attributes.y,i.updatePosition()};s?this.closeTransition(l):l()}this.element.style.visibility="visible"},t.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},t.prototype.initShape=function(){var n=this.attributes.template;this.element=Sk(n.container),this.id&&this.element.setAttribute("id",this.id)},t.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:this.element.replaceChildren(n))}},t.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,s=i.template,l=i.title,c=i.enterable,h=i.style,p=i.content,v=_P(s.prefixCls),y=this.element;if(this.element.style.pointerEvents=c?"auto":"none",p)this.renderCustomContent();else{l?(y.innerHTML=s.title,y.getElementsByClassName(v.TITLE)[0].innerHTML=l):(r=(n=y.getElementsByClassName(v.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var b=this.HTMLTooltipItemsElements,T=document.createElement("ul");T.className=v.LIST,T.replaceChildren.apply(T,(0,ae.ev)([],(0,ae.CR)(b),!1));var M=this.element.querySelector(".".concat(v.LIST));M?M.replaceWith(T):y.appendChild(T)}Su(y,h)},t.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,s=r.offset,l=n||i,c=l.split("-"),h={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},p=this.elementSize,v=p.width,y=p.height,b=[-v/2,-y/2];return c.forEach(function(T){var M=(0,ae.CR)(b,2),R=M[0],I=M[1],N=(0,ae.CR)(h[T],2),z=N[0],H=N[1];b=[R+(v/2+s[0])*z,I+(y/2+s[1])*H]}),b},t.prototype.setOffsetPosition=function(n){var r=(0,ae.CR)(n,2),i=r[0],s=r[1],l=this.attributes,c=l.x,h=c===void 0?0:c,p=l.y,v=p===void 0?0:p,y=l.container,b=y.x,T=y.y;this.element.style.left="".concat(+h+b+i,"px"),this.element.style.top="".concat(+v+T+s,"px")},t.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},t.prototype.autoPosition=function(n){var r=(0,ae.CR)(n,2),i=r[0],s=r[1],l=this.attributes,c=l.x,h=l.y,p=l.bounding,v=l.position;if(!p)return[i,s];var y=this.element,b=y.offsetWidth,T=y.offsetHeight,M=(0,ae.CR)([+c+i,+h+s],2),R=M[0],I=M[1],N={left:"right",right:"left",top:"bottom",bottom:"top"},z=p.x,H=p.y,X=p.width,Y=p.height,ne={left:R<z,right:R+b>z+X,top:I<H,bottom:I+T>H+Y},pe=[];v.split("-").forEach(function(De){ne[De]?pe.push(N[De]):pe.push(De)});var ye=pe.join("-");return this.getRelativeOffsetFromCursor(ye)},t.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),s=i.x,l=i.y,c=i.width,h=i.height;return new Gu(s,l,c,h).isPointIn(n,r)}return!1},t.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i},10)},t.tag="tooltip",t}(ri),gE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function eA(e,t){return t?typeof t=="string"?document.querySelector(t):t:e.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function GJ(e){const t=e.getRenderBounds(),{min:[n,r],max:[i,s]}=t;return{x:n,y:r,width:i-n,height:s-r}}function WJ(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function ZJ(e,t,n,r,i,s,l,c={}){const h={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},p=new HJ({className:"tooltip",style:{x:t,y:n,container:l,data:[],bounding:s,position:r,enterable:i,title:"",offset:[10,10],template:{prefixCls:"g2-"},style:hi(h,c)}});return e.appendChild(p.HTMLTooltipElement),p}function Tk({root:e,data:t,x:n,y:r,render:i,event:s,single:l,position:c="right-bottom",enterable:h=!1,css:p,mount:v,bounding:y}){const b=eA(e,v),T=eA(e),M=l?T:e,R=y||GJ(e),I=WJ(T,b),{tooltipElement:N=ZJ(b,n,r,c,h,R,I,p)}=M,{items:z,title:H=""}=t;N.update(Object.assign({x:n,y:r,data:z,title:H,position:c,enterable:h},i!==void 0&&{content:i(s,{items:z,title:H})})),M.tooltipElement=N}function yy({root:e,single:t,emitter:n,nativeEvent:r=!0,event:i=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const s=eA(e),l=t?s:e,{tooltipElement:c}=l;c&&c.hide(i==null?void 0:i.clientX,i==null?void 0:i.clientY)}function bP({root:e,single:t}){const n=eA(e),r=t?n:e;if(!r)return;const{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0)}function Ak(e){const{value:t}=e;return Object.assign(Object.assign({},e),{value:t===void 0?"undefined":t})}function XJ(e){const{__data__:t}=e,{title:n,items:r=[]}=t,i=r.filter(eu).map(s=>{var{color:l=Ck(e)}=s,c=gE(s,["color"]);return Object.assign(Object.assign({},c),{color:l})}).map(Ak);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}function YJ(e,t){const{color:n,series:r,facet:i=!1}=e,{color:s,series:l}=t,c=h=>h&&h.invert&&!(h instanceof py)&&!(h instanceof B2);if(c(r))return r.clone().invert(l);if(l&&r instanceof py&&r.invert(l)!==s&&!i)return r.invert(l);if(c(n)){const h=n.invert(s);return Array.isArray(h)?null:h}return null}function Ck(e){const t=e.getAttribute("fill"),n=e.getAttribute("stroke"),{__data__:r}=e,{color:i=t&&t!=="transparent"?t:n}=r;return i}function Ok(e,t=n=>n){const n=new Map(e.map(r=>[t(r),r]));return Array.from(n.values())}function Mk(e,t,n,r=e.map(s=>s.__data__),i={}){const s=h=>h instanceof Date?+h:h,l=Ok(r.map(h=>h.title),s).filter(eu),c=r.flatMap((h,p)=>{const v=e[p],{items:y=[],title:b}=h,T=y.filter(eu),M=n!==void 0?n:y.length<=1;return T.map(R=>{var{color:I=Ck(v)||i.color,name:N}=R,z=gE(R,["color","name"]);const H=YJ(t,h),X=M?H||N:N||H;return Object.assign(Object.assign({},z),{color:I,name:X||b})})}).map(Ak);return Object.assign(Object.assign({},l.length>0&&{title:l.join(",")}),{items:Ok(c,h=>`(${s(h.name)}, ${s(h.value)}, ${s(h.color)})`)})}function $J(e,t,n){var{plotWidth:r,plotHeight:i,mainWidth:s,mainHeight:l,startX:c,startY:h,transposed:p,polar:v,insetLeft:y,insetTop:b}=n,T=gE(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const M=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},T),R=t.map(De=>De[1]),I=t.map(De=>De[0]),N=mE(R),z=mE(I),H=()=>{if(v){const De=Math.min(s,l)/2,Xe=c+y+s/2,Ke=h+b+l/2,mt=k0(Ic([z,N],[Xe,Ke])),Qe=Xe+De*Math.cos(mt),ut=Ke+De*Math.sin(mt);return[Xe,Qe,Ke,ut]}return p?[c,c+r,N+h,N+h]:[z+c,z+c,h,h+i]},[X,Y,ne,pe]=H(),ye=()=>{const De=new F1({style:Object.assign({x1:X,x2:Y,y1:ne,y2:pe},M)});return e.appendChild(De),De};if(I.length>0){const De=e.ruleY||ye();De.style.x1=X,De.style.x2=Y,De.style.y1=ne,De.style.y2=pe,e.ruleY=De}}function Rk(e){e.ruleY&&(e.ruleY.remove(),e.ruleY=void 0)}function qJ(e,{data:t,style:n,theme:r}){e.markers&&e.markers.forEach(s=>s.remove());const i=t.filter(s=>{const[{x:l,y:c}]=s;return eu(l)&&eu(c)}).map(s=>{const[{color:l,element:c},h]=s,p=l||c.style.fill||c.style.stroke||r.color;return new Sl({style:Object.assign({cx:h[0],cy:h[1],fill:p,r:4,stroke:"#fff",lineWidth:2},n)})});for(const s of i)e.appendChild(s);e.markers=i}function Pk(e){e.markers&&(e.markers.forEach(t=>t.remove()),e.markers=[])}function Ik(e,t){return Array.from(e.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[t]})}function xP(e,t){return e===void 0?t:e}function Dk(e){const{title:t,items:n}=e;return n.length===0&&t===void 0}function KJ(e){return Array.from(e.values()).some(t=>{var n;return((n=t.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&t.tooltip})}function QJ(e){return dT(e,t=>t.classList?t.classList.includes("element"):!1)}function Lk(e,t){var{elements:n,sort:r,filter:i,scale:s,coordinate:l,crosshairs:c,render:h,groupName:p,emitter:v,wait:y=50,leading:b=!0,trailing:T=!1,startX:M=0,startY:R=0,body:I=!0,single:N=!0,position:z,enterable:H,mount:X,bounding:Y,theme:ne,disableNative:pe=!1,marker:ye=!0,preserve:De=!1,style:Xe={},css:Ke={}}=t,mt=gE(t,["elements","sort","filter","scale","coordinate","crosshairs","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","disableNative","marker","preserve","style","css"]);const Qe=n(e),ut=tu(l),ct=nu(l),gt=hi(Xe,mt),{innerWidth:Xt,innerHeight:Rt,width:kt,height:wn,insetLeft:zn,insetTop:or}=l.getOptions(),ir=[],Zr=[];for(const Qa of Qe){const{__data__:Ds}=Qa,{seriesX:us,title:Wa,items:dl}=Ds;us?ir.push(Qa):(Wa||dl)&&Zr.push(Qa)}const Qi=!!(ut?s.y:s.x).getBandWidth&&Zr.length>0;ir.sort((Qa,Ds)=>{const us=ut?0:1,Wa=dl=>dl.getBounds().min[us];return ut?Wa(Ds)-Wa(Qa):Wa(Qa)-Wa(Ds)});const Qr=Qa=>{const Ds=ut?1:0,{min:us,max:Wa}=Qa.getLocalBounds();return ag([us[Ds],Wa[Ds]])};Zr.sort((Qa,Ds)=>{const[us,Wa]=Qr(Qa),[dl,ol]=Qr(Ds),Ys=(us+Wa)/2,wu=(dl+ol)/2;return ut?wu-Ys:Ys-wu});const ei=new Map(ir.map(Qa=>{const{__data__:Ds}=Qa,{seriesX:us}=Ds,Wa=us.map((ol,Ys)=>Ys),dl=ag(Wa,ol=>us[+ol]);return[Qa,[dl,us]]})),{x:Po}=s,uo=Po!=null&&Po.getBandWidth?Po.getBandWidth()/2:0,Jo=Qa=>{const[Ds]=l.invert(Qa);return Ds-uo},wa=(Qa,Ds,us)=>{const Wa=Jo(Qa),dl=us.filter(eu),[ol,Ys]=ag([dl[0],dl[dl.length-1]]),wu=ol===Ys;if(!Qi&&(Wa<ol||Wa>Ys)&&!wu)return null;const lc=Sb(pg=>us[+pg]).center,yd=lc(Ds,Wa);return Ds[yd]},ja=(Qa,Ds)=>{const Wa=Qa[ut?1:0],dl=Ds.filter(wu=>{const[lc,yd]=Qr(wu);return Wa>=lc&&Wa<=yd});if(!Qi||dl.length>0)return dl;const ol=Sb(wu=>{const[lc,yd]=Qr(wu);return(lc+yd)/2}).center,Ys=ol(Ds,Wa);return[Ds[Ys]].filter(eu)},Va=(Qa,Ds)=>{const{__data__:us}=Qa;return Object.fromEntries(Object.entries(us).filter(([Wa])=>Wa.startsWith("series")&&Wa!=="series").map(([Wa,dl])=>{const ol=dl[Ds];return[mw(Wa.replace("series","")),ol]}))},vs=J_(Qa=>{const Ds=XM(e,Qa);if(!Ds)return;const us=nL(e),Wa=us.min[0],dl=us.min[1],ol=[Ds[0]-M,Ds[1]-R];if(!ol)return;const Ys=ja(ol,Zr),wu=[],lc=[];for(const kf of ir){const[KE,bI]=ei.get(kf),fj=wa(ol,KE,bI);if(fj!==null){wu.push(kf);const hj=Va(kf,fj),{x:bde,y:xde}=hj,Ede=l.map([(bde||0)+uo,xde||0]);lc.push([Object.assign(Object.assign({},hj),{element:kf}),Ede])}}const yd=Array.from(new Set(lc.map(kf=>kf[0].x))),pg=yd[JT(yd,kf=>Math.abs(kf-Jo(ol)))],a1=lc.filter(kf=>kf[0].x===pg),nC=[...a1.map(kf=>kf[0]),...Ys.map(kf=>kf.__data__)],rC=[...wu,...Ys],s1=Mk(rC,s,p,nC,ne);if(r&&s1.items.sort((kf,KE)=>r(kf)-r(KE)),i&&(s1.items=s1.items.filter(i)),rC.length===0||Dk(s1)){Cl(Qa);return}if(I&&Tk({root:e,data:s1,x:Ds[0]+Wa,y:Ds[1]+dl,render:h,event:Qa,single:N,position:z,enterable:H,mount:X,bounding:Y,css:Ke}),c){const kf=a1.map(bI=>bI[1]),KE=Eo(gt,"crosshairs");$J(e,kf,Object.assign(Object.assign({},KE),{plotWidth:Xt,plotHeight:Rt,mainWidth:kt,mainHeight:wn,insetLeft:zn,insetTop:or,startX:M,startY:R,transposed:ut,polar:ct}))}if(ye){const kf=Eo(gt,"marker");qJ(e,{data:a1,style:kf,theme:ne})}v.emit("tooltip:show",Object.assign(Object.assign({},Qa),{nativeEvent:!0,data:{data:{x:wb(s.x,Jo(ol),!0)}}}))},y,{leading:b,trailing:T}),Cl=Qa=>{yy({root:e,single:N,emitter:v,event:Qa}),c&&Rk(e),ye&&Pk(e)},ss=()=>{bP({root:e,single:N}),c&&Rk(e),ye&&Pk(e)},Is=({nativeEvent:Qa,data:Ds})=>{if(Qa)return;const{x:us}=Ds.data,{x:Wa}=s,dl=Wa.map(us),[ol,Ys]=l.map([dl,.5]),{min:[wu,lc]}=e.getRenderBounds();vs({offsetX:ol+wu,offsetY:Ys+lc})},ku=()=>{yy({root:e,single:N,emitter:v,nativeEvent:!1})},tf=()=>{vh(),ss()},zp=()=>{nf()},nf=()=>{pe||(e.addEventListener("pointerenter",vs),e.addEventListener("pointermove",vs),e.addEventListener("pointerleave",Cl))},vh=()=>{pe||(e.removeEventListener("pointerenter",vs),e.removeEventListener("pointermove",vs),e.removeEventListener("pointerleave",Cl))};return nf(),v.on("tooltip:show",Is),v.on("tooltip:hide",ku),v.on("tooltip:disable",tf),v.on("tooltip:enable",zp),()=>{vh(),v.off("tooltip:show",Is),v.off("tooltip:hide",ku),v.off("tooltip:disable",tf),v.off("tooltip:enable",zp),De?yy({root:e,single:N,emitter:v,nativeEvent:!1}):ss()}}function JJ(e,{elements:t,scale:n,render:r,groupName:i,sort:s,filter:l,emitter:c,wait:h=50,leading:p=!0,trailing:v=!1,groupKey:y=De=>De,single:b=!0,position:T,enterable:M,datum:R,view:I,mount:N,bounding:z,theme:H,shared:X=!1,body:Y=!0,disableNative:ne=!1,preserve:pe=!1,css:ye={}}){const De=t(e),Xe=Nu(De,y),Ke=J_(kt=>{const{target:wn}=kt,zn=QJ(wn);if(!zn){yy({root:e,single:b,emitter:c,event:kt});return}const or=y(zn),ir=Xe.get(or);if(!ir)return;const Zr=ir.length===1&&!X?XJ(ir[0]):Mk(ir,n,i,void 0,H);if(s&&Zr.items.sort((Qr,ei)=>s(Qr)-s(ei)),l&&(Zr.items=Zr.items.filter(l)),Dk(Zr)){yy({root:e,single:b,emitter:c,event:kt});return}const{offsetX:Ri,offsetY:Qi}=kt;Y&&Tk({root:e,data:Zr,x:Ri,y:Qi,render:r,event:kt,single:b,position:T,enterable:M,mount:N,bounding:z,css:ye}),c.emit("tooltip:show",Object.assign(Object.assign({},kt),{nativeEvent:!0,data:{data:lL(zn,I)}}))},h,{leading:p,trailing:v}),mt=kt=>{yy({root:e,single:b,emitter:c,event:kt})},Qe=()=>{ne||(e.addEventListener("pointermove",Ke),e.addEventListener("pointerleave",mt))},ut=()=>{ne||(e.removeEventListener("pointermove",Ke),e.removeEventListener("pointerleave",mt))},ct=({nativeEvent:kt,data:wn})=>{if(kt)return;const zn=qM(De,wn.data,R);if(!zn)return;const or=zn.getBBox(),{x:ir,y:Zr,width:Ri,height:Qi}=or;Ke({target:zn,offsetX:ir+Ri/2,offsetY:Zr+Qi/2})},gt=({nativeEvent:kt}={})=>{kt||yy({root:e,single:b,emitter:c,nativeEvent:!1})},Xt=()=>{ut(),bP({root:e,single:b})},Rt=()=>{Qe()};return c.on("tooltip:show",ct),c.on("tooltip:hide",gt),c.on("tooltip:enable",Rt),c.on("tooltip:disable",Xt),Qe(),()=>{ut(),c.off("tooltip:show",ct),c.off("tooltip:hide",gt),pe?yy({root:e,single:b,emitter:c,nativeEvent:!1}):bP({root:e,single:b})}}function Nk(e){const{shared:t,crosshairs:n,series:r,name:i,item:s=()=>({}),facet:l=!1}=e,c=gE(e,["shared","crosshairs","series","name","item","facet"]);return(h,p,v)=>{const{container:y,view:b}=h,{scale:T,markState:M,coordinate:R,theme:I}=b,N=Ik(M,"seriesTooltip"),z=Ik(M,"crosshairs"),H=fm(y),X=xP(r,N);if(X&&KJ(M)&&!l)return Lk(H,Object.assign(Object.assign({},c),{theme:I,elements:ly,scale:T,coordinate:R,crosshairs:xP(n,z),item:s,emitter:v}));if(X&&l){const Y=p.filter(Ke=>Ke!==h&&Ke.options.parentKey===h.options.key),ne=tL(h,p),pe=Y[0].view.scale,ye=H.getBounds(),De=ye.min[0],Xe=ye.min[1];return Object.assign(pe,{facet:!0}),Lk(H.parentNode.parentNode,Object.assign(Object.assign({},c),{theme:I,elements:()=>ne,scale:pe,coordinate:R,crosshairs:xP(n,z),item:s,startX:De,startY:Xe,emitter:v}))}return JJ(H,Object.assign(Object.assign({},c),{datum:j_(b),elements:ly,scale:T,coordinate:R,groupKey:t?$M(b):void 0,item:s,emitter:v,view:b,theme:I,shared:t}))}}Nk.props={reapplyWhenUpdate:!0};var tA=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const Fk="legend-category",eee="legend-continuous",tee="items-item",nee="legend-category-item-marker",ree="legend-category-item-label";function Bk(e){return e.getElementsByClassName(nee)[0]}function kk(e){return e.getElementsByClassName(ree)[0]}function zk(e){return e.getElementsByClassName(tee)}function EP(e){return e.getElementsByClassName(Fk)}function Uk(e){return e.getElementsByClassName(eee)}function iee(e,t){[...EP(e),...Uk(e)].forEach(r=>{t(r,i=>i)})}function SP(e){let t=e.parentNode;for(;t&&!t.__data__;)t=t.parentNode;return t.__data__}function Z0e(e){let t=e;for(;t&&!t.attr("class").startsWith("legend");)t=t.children[0];return t.attributes}function oee(e,{legends:t,marker:n,label:r,datum:i,filter:s,emitter:l,channel:c,state:h={}}){const p=new Map,v=new Map,y=new Map,{unselected:b={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=h,T={unselected:Eo(b,"marker")},M={unselected:Eo(b,"label")},{setState:R,removeState:I}=sg(T,void 0),{setState:N,removeState:z}=sg(M,void 0),H=Array.from(t(e));let X=H.map(i);const Y=()=>{for(const ye of H){const De=i(ye),Xe=n(ye),Ke=r(ye);X.includes(De)?(I(Xe,"unselected"),z(Ke,"unselected")):(R(Xe,"unselected"),N(Ke,"unselected"))}};for(const ye of H){const De=()=>{uy(e,"pointer")},Xe=()=>{UW(e)},Ke=mt=>tA(this,void 0,void 0,function*(){const Qe=i(ye),ut=X.indexOf(Qe);ut===-1?X.push(Qe):X.splice(ut,1),X.length===0&&X.push(...H.map(i)),yield s(X),Y();const{nativeEvent:ct=!0}=mt;ct&&(X.length===H.length?l.emit("legend:reset",{nativeEvent:ct}):l.emit("legend:filter",Object.assign(Object.assign({},mt),{nativeEvent:ct,data:{channel:c,values:X}})))});ye.addEventListener("click",Ke),ye.addEventListener("pointerenter",De),ye.addEventListener("pointerout",Xe),p.set(ye,Ke),v.set(ye,De),y.set(ye,Xe)}const ne=ye=>tA(this,void 0,void 0,function*(){const{nativeEvent:De}=ye;if(De)return;const{data:Xe}=ye,{channel:Ke,values:mt}=Xe;Ke===c&&(X=mt,yield s(X),Y())}),pe=ye=>tA(this,void 0,void 0,function*(){const{nativeEvent:De}=ye;De||(X=H.map(i),yield s(X),Y())});return l.on("legend:filter",ne),l.on("legend:reset",pe),()=>{for(const ye of H)ye.removeEventListener("click",p.get(ye)),ye.removeEventListener("pointerenter",v.get(ye)),ye.removeEventListener("pointerout",y.get(ye)),l.off("legend:filter",ne),l.off("legend:reset",pe)}}function aee(e,{legend:t,filter:n,emitter:r,channel:i}){const s=({detail:{value:l}})=>{n(l),r.emit({nativeEvent:!0,data:{channel:i,values:l}})};return t.addEventListener("valuechange",s),()=>{t.removeEventListener("valuechange",s)}}function jk(e,{legend:t,channel:n,value:r,ordinal:i,channels:s,allChannels:l,facet:c=!1}){return tA(this,void 0,void 0,function*(){const{view:h,update:p,setState:v}=e;v(t,y=>{const{marks:b}=y,T=b.map(M=>{if(M.type==="legends")return M;const{transform:R=[]}=M,I=R.findIndex(({type:H})=>H.startsWith("group")||H.startsWith("bin")),N=[...R];N.splice(I+1,0,{type:"filter",[n]:{value:r,ordinal:i}});const z=Object.fromEntries(s.map(H=>[H,{domain:h.scale[H].getOptions().domain}]));return hi({},M,Object.assign(Object.assign({transform:N,scale:z},!i&&{animate:!1}),{legend:c?!1:Object.fromEntries(l.map(H=>[H,{preserve:!0}]))}))});return Object.assign(Object.assign({},y),{marks:T})}),yield p()})}function see(e,t){for(const n of e)jk(n,Object.assign(Object.assign({},t),{facet:!0}))}function lee(){return(e,t,n)=>{const{container:r}=e,i=t.filter(y=>y!==e),s=i.length>0,l=y=>SP(y).scales.map(b=>b.name),c=[...EP(r),...Uk(r)],h=c.flatMap(l),p=s?J_(see,50,{trailing:!0}):J_(jk,50,{trailing:!0}),v=c.map(y=>{const{name:b,domain:T}=SP(y).scales[0],M=l(y),R={legend:y,channel:b,channels:M,allChannels:h};return y.className===Fk?oee(r,{legends:zk,marker:Bk,label:kk,datum:I=>{const{__data__:N}=I,{index:z}=N;return T[z]},filter:I=>{const N=Object.assign(Object.assign({},R),{value:I,ordinal:!0});p(s?i:e,N)},state:y.attributes.state,channel:b,emitter:n}):aee(r,{legend:y,filter:I=>{const N=Object.assign(Object.assign({},R),{value:I,ordinal:!1});p(s?i:e,N)},emitter:n,channel:b})});return()=>{v.forEach(y=>y())}}}function uee(){return(e,t,n)=>{const{container:r,view:i,options:s}=e,l=EP(r),c=ly(r),h=T=>SP(T).scales[0].name,p=T=>{const{scale:{[T]:M}}=i;return M},v=Ab(s,["active","inactive"]),y=X2(c,j_(i)),b=[];for(const T of l){const M=wn=>{const{data:zn}=T.attributes,{__data__:or}=wn,{index:ir}=or;return zn[ir].label},R=h(T),I=zk(T),N=p(R),z=Nu(c,wn=>N.invert(wn.__data__[R])),{state:H={}}=T.attributes,{inactive:X={}}=H,{setState:Y,removeState:ne}=sg(v,y),pe={inactive:Eo(X,"marker")},ye={inactive:Eo(X,"label")},{setState:De,removeState:Xe}=sg(pe),{setState:Ke,removeState:mt}=sg(ye),Qe=wn=>{for(const zn of I){const or=Bk(zn),ir=kk(zn);zn===wn||wn===null?(Xe(or,"inactive"),mt(ir,"inactive")):(De(or,"inactive"),Ke(ir,"inactive"))}},ut=(wn,zn)=>{const or=M(zn),ir=new Set(z.get(or));for(const Ri of c)ir.has(Ri)?Y(Ri,"active"):Y(Ri,"inactive");Qe(zn);const{nativeEvent:Zr=!0}=wn;Zr&&n.emit("legend:highlight",Object.assign(Object.assign({},wn),{nativeEvent:Zr,data:{channel:R,value:or}}))},ct=new Map;for(const wn of I){const zn=or=>{ut(or,wn)};wn.addEventListener("pointerover",zn),ct.set(wn,zn)}const gt=wn=>{for(const or of c)ne(or,"inactive","active");Qe(null);const{nativeEvent:zn=!0}=wn;zn&&n.emit("legend:unhighlight",{nativeEvent:zn})},Xt=wn=>{const{nativeEvent:zn,data:or}=wn;if(zn)return;const{channel:ir,value:Zr}=or;if(ir!==R)return;const Ri=I.find(Qi=>M(Qi)===Zr);Ri&&ut({nativeEvent:!1},Ri)},Rt=wn=>{const{nativeEvent:zn}=wn;zn||gt({nativeEvent:!1})};T.addEventListener("pointerleave",gt),n.on("legend:highlight",Xt),n.on("legend:unhighlight",Rt);const kt=()=>{T.removeEventListener(gt),n.off("legend:highlight",Xt),n.off("legend:unhighlight",Rt);for(const[wn,zn]of ct)wn.removeEventListener(zn)};b.push(kt)}return()=>b.forEach(T=>T())}}var V0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function cee(e,t){const[n,r,i,s]=e,[l,c,h,p]=t;return!(l>i||h<n||c>s||p<r)}function fee(e,t,n,r,i){const[s,l,c,h]=i;return[Math.max(s,Math.min(e,n)),Math.max(l,Math.min(t,r)),Math.min(c,Math.max(e,n)),Math.min(h,Math.max(t,r))]}function hee(e){const{width:t,height:n}=e.getBBox();return[0,0,t,n]}function ug(e,t){for(const[n,r]of Object.entries(t))e.style(n,r)}const Vk=xb(e=>{const t=e.attributes,{x:n,y:r,width:i,height:s,class:l,renders:c={},handleSize:h=10,document:p}=t,v=V0(t,["x","y","width","height","class","renders","handleSize","document"]);if(!p||i===void 0||s===void 0||n===void 0||r===void 0)return;const y=h/2,b=(Zr,Ri,Qi)=>{Zr.handle||(Zr.handle=Qi.createElement("rect"),Zr.append(Zr.handle));const{handle:Qr}=Zr;return Qr.attr(Ri),Qr},T=Eo(Jm(v,"handleNW","handleNE"),"handleN"),{render:M=b}=T,R=V0(T,["render"]),I=Eo(v,"handleE"),{render:N=b}=I,z=V0(I,["render"]),H=Eo(Jm(v,"handleSE","handleSW"),"handleS"),{render:X=b}=H,Y=V0(H,["render"]),ne=Eo(v,"handleW"),{render:pe=b}=ne,ye=V0(ne,["render"]),De=Eo(v,"handleNW"),{render:Xe=b}=De,Ke=V0(De,["render"]),mt=Eo(v,"handleNE"),{render:Qe=b}=mt,ut=V0(mt,["render"]),ct=Eo(v,"handleSE"),{render:gt=b}=ct,Xt=V0(ct,["render"]),Rt=Eo(v,"handleSW"),{render:kt=b}=Rt,wn=V0(Rt,["render"]),zn=(Zr,Ri)=>{const{id:Qi}=Zr,Qr=Ri(Zr,Zr.attributes,p);Qr.id=Qi,Qr.style.draggable=!0},or=Zr=>()=>{const Ri=xb(Qi=>zn(Qi,Zr));return new Ri({})},ir=Ra(e).attr("className",l).style("transform",`translate(${n}, ${r})`).style("draggable",!0);ir.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(ug,Object.assign(Object.assign({width:i,height:s},Jm(v,"handle")),{transform:void 0})),ir.maybeAppend("handle-n",or(M)).style("x",y).style("y",-y).style("width",i-h).style("height",h).style("fill","transparent").call(ug,R),ir.maybeAppend("handle-e",or(N)).style("x",i-y).style("y",y).style("width",h).style("height",s-h).style("fill","transparent").call(ug,z),ir.maybeAppend("handle-s",or(X)).style("x",y).style("y",s-y).style("width",i-h).style("height",h).style("fill","transparent").call(ug,Y),ir.maybeAppend("handle-w",or(pe)).style("x",-y).style("y",y).style("width",h).style("height",s-h).style("fill","transparent").call(ug,ye),ir.maybeAppend("handle-nw",or(Xe)).style("x",-y).style("y",-y).style("width",h).style("height",h).style("fill","transparent").call(ug,Ke),ir.maybeAppend("handle-ne",or(Qe)).style("x",i-y).style("y",-y).style("width",h).style("height",h).style("fill","transparent").call(ug,ut),ir.maybeAppend("handle-se",or(gt)).style("x",i-y).style("y",s-y).style("width",h).style("height",h).style("fill","transparent").call(ug,Xt),ir.maybeAppend("handle-sw",or(kt)).style("x",-y).style("y",s-y).style("width",h).style("height",h).style("fill","transparent").call(ug,wn)});function wP(e,t){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:s=()=>{},brushupdated:l=()=>{},extent:c=hee(e),brushRegion:h=(Qr,ei,Po,uo,Jo)=>[Qr,ei,Po,uo],reverse:p=!1,fill:v="#777",fillOpacity:y="0.3",stroke:b="#fff",selectedHandles:T=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=t,M=V0(t,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let R=null,I=null,N=null,z=null,H=null,X=!1;const[Y,ne,pe,ye]=c;uy(e,"crosshair"),e.style.draggable=!0;const De=(Qr,ei,Po)=>{if(s(Po),z&&z.remove(),H&&H.remove(),R=[Qr,ei],p)return Xe();Ke()},Xe=()=>{H=new Ki({style:Object.assign(Object.assign({},M),{fill:v,fillOpacity:y,stroke:b,pointerEvents:"none"})}),z=new Vk({style:{x:0,y:0,width:0,height:0,draggable:!0,document:e.ownerDocument},className:"mask"}),e.appendChild(H),e.appendChild(z)},Ke=()=>{z=new Vk({style:Object.assign(Object.assign({document:e.ownerDocument,x:0,y:0},M),{fill:v,fillOpacity:y,stroke:b,draggable:!0}),className:"mask"}),e.appendChild(z)},mt=(Qr=!0)=>{z&&z.remove(),H&&H.remove(),R=null,I=null,N=null,X=!1,z=null,H=null,r(Qr)},Qe=(Qr,ei,Po=!0)=>{const[uo,Jo,wa,ja]=fee(Qr[0],Qr[1],ei[0],ei[1],c),[Va,vs,Cl,ss]=h(uo,Jo,wa,ja,c);return p?ct(Va,vs,Cl,ss):ut(Va,vs,Cl,ss),n(Va,vs,Cl,ss,Po),[Va,vs,Cl,ss]},ut=(Qr,ei,Po,uo)=>{z.style.x=Qr,z.style.y=ei,z.style.width=Po-Qr,z.style.height=uo-ei},ct=(Qr,ei,Po,uo)=>{H.style.d=`
      M${Y},${ne}L${pe},${ne}L${pe},${ye}L${Y},${ye}Z
      M${Qr},${ei}L${Qr},${uo}L${Po},${uo}L${Po},${ei}Z
    `,z.style.x=Qr,z.style.y=ei,z.style.width=Po-Qr,z.style.height=uo-ei},gt=Qr=>{const ei=(vs,Cl,ss,Is,ku)=>vs+Cl<Is?Is-Cl:vs+ss>ku?ku-ss:vs,Po=Qr[0]-N[0],uo=Qr[1]-N[1],Jo=ei(Po,R[0],I[0],Y,pe),wa=ei(uo,R[1],I[1],ne,ye),ja=[R[0]+Jo,R[1]+wa],Va=[I[0]+Jo,I[1]+wa];Qe(ja,Va)},Xt={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},Rt=Qr=>wn(Qr)||kt(Qr),kt=Qr=>{const{id:ei}=Qr;return T.indexOf(ei)===-1?!1:new Set(Object.keys(Xt)).has(ei)},wn=Qr=>Qr===z.getElementById("selection"),zn=Qr=>{const{target:ei}=Qr,[Po,uo]=YM(e,Qr);if(!z||!Rt(ei)){De(Po,uo,Qr),X=!0;return}Rt(ei)&&(N=[Po,uo])},or=Qr=>{const{target:ei}=Qr,Po=YM(e,Qr);if(!R)return;if(!N)return Qe(R,Po);if(wn(ei))return gt(Po);const[uo,Jo]=[Po[0]-N[0],Po[1]-N[1]],{id:wa}=ei;if(Xt[wa]){const[ja,Va,vs,Cl]=Xt[wa].vector;return Qe([R[0]+uo*ja,R[1]+Jo*Va],[I[0]+uo*vs,I[1]+Jo*Cl])}},ir=Qr=>{if(N){N=null;const{x:wa,y:ja,width:Va,height:vs}=z.style;R=[wa,ja],I=[wa+Va,ja+vs],l(wa,ja,wa+Va,ja+vs,Qr);return}I=YM(e,Qr);const[ei,Po,uo,Jo]=Qe(R,I);X=!1,i(ei,Po,uo,Jo,Qr)},Zr=Qr=>{const{target:ei}=Qr;z&&!Rt(ei)&&mt()},Ri=Qr=>{const{target:ei}=Qr;!z||!Rt(ei)||X?uy(e,"crosshair"):wn(ei)?uy(e,"move"):kt(ei)&&uy(e,Xt[ei.id].cursor)},Qi=()=>{uy(e,"default")};return e.addEventListener("dragstart",zn),e.addEventListener("drag",or),e.addEventListener("dragend",ir),e.addEventListener("click",Zr),e.addEventListener("pointermove",Ri),e.addEventListener("pointerleave",Qi),{mask:z,move(Qr,ei,Po,uo,Jo=!0){z||De(Qr,ei,{}),R=[Qr,ei],I=[Po,uo],Qe([Qr,ei],[Po,uo],Jo)},remove(Qr=!0){z&&mt(Qr)},destroy(){z&&mt(!1),uy(e,"default"),e.removeEventListener("dragstart",zn),e.removeEventListener("drag",or),e.removeEventListener("dragend",ir),e.removeEventListener("click",Zr),e.removeEventListener("pointermove",Ri),e.removeEventListener("pointerleave",Qi)}}}function TP(e,t,n){return t.filter(r=>{if(r===e)return!1;const{interaction:i={}}=r.options;return Object.values(i).find(s=>s.brushKey===n)})}function dee(e,t,n){return TP(e,t,n).map(r=>fm(r.container))}function pee(e,t,n){return TP(e,t,n).map(r=>r.options)}function Hk(e,t){var{elements:n,selectedHandles:r,siblings:i=or=>[],datum:s,brushRegion:l,extent:c,reverse:h,scale:p,coordinate:v,series:y=!1,key:b=or=>or,bboxOf:T=or=>{const{x:ir,y:Zr,width:Ri,height:Qi}=or.style;return{x:ir,y:Zr,width:Ri,height:Qi}},state:M={},emitter:R}=t,I=V0(t,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const N=n(e),z=i(e),H=z.flatMap(n),X=X2(N,s),Y=Eo(I,"mask"),{setState:ne,removeState:pe}=sg(M,X),ye=new Map,{width:De,height:Xe,x:Ke=0,y:mt=0}=T(e),Qe=c||[0,0,De,Xe],ut=()=>{for(const or of[...N,...H])pe(or,"active","inactive")},ct=(or,ir,Zr,Ri)=>{var Qi;for(const ei of z)(Qi=ei.brush)===null||Qi===void 0||Qi.remove();const Qr=new Set;for(const ei of N){const{min:Po,max:uo}=ei.getLocalBounds(),[Jo,wa]=Po,[ja,Va]=uo;cee([Jo,wa,ja,Va],[or,ir,Zr,Ri])?(ne(ei,"active"),Qr.add(b(ei))):ne(ei,"inactive")}for(const ei of H)Qr.has(b(ei))?ne(ei,"active"):ne(ei,"inactive")},gt=()=>{for(const or of N)pe(or,"inactive");for(const or of ye.values())or.remove();ye.clear()},Xt=(or,ir,Zr,Ri)=>{const Qi=Qr=>{const ei=Qr.cloneNode();return ei.__data__=Qr.__data__,Qr.parentNode.appendChild(ei),ye.set(Qr,ei),ei};for(const Qr of N){const ei=ye.get(Qr)||Qi(Qr);ei.style.clipPath=new L0({style:{x:or+Ke,y:ir+mt,width:Zr-or,height:Ri-ir}}),ne(Qr,"inactive"),ne(ei,"active")}},Rt=wP(e,Object.assign(Object.assign({},Y),{extent:Qe,brushRegion:l,reverse:h,selectedHandles:r,brushended:or=>{const ir=y?gt:ut;or&&R.emit("brush:remove",{nativeEvent:!0}),ir()},brushed:(or,ir,Zr,Ri,Qi)=>{const Qr=oT(or,ir,Zr,Ri,p,v);Qi&&R.emit("brush:highlight",{nativeEvent:!0,data:{selection:Qr}}),(y?Xt:ct)(or,ir,Zr,Ri)},brushcreated:(or,ir,Zr,Ri,Qi)=>{const Qr=oT(or,ir,Zr,Ri,p,v);R.emit("brush:end",Object.assign(Object.assign({},Qi),{nativeEvent:!0,data:{selection:Qr}}))},brushupdated:(or,ir,Zr,Ri,Qi)=>{const Qr=oT(or,ir,Zr,Ri,p,v);R.emit("brush:end",Object.assign(Object.assign({},Qi),{nativeEvent:!0,data:{selection:Qr}}))},brushstarted:or=>{R.emit("brush:start",or)}})),kt=({nativeEvent:or,data:ir})=>{if(or)return;const{selection:Zr}=ir,[Ri,Qi,Qr,ei]=AW(Zr,p,v);Rt.move(Ri,Qi,Qr,ei,!1)};R.on("brush:highlight",kt);const wn=({nativeEvent:or}={})=>{or||Rt.remove(!1)};R.on("brush:remove",wn);const zn=Rt.destroy.bind(Rt);return Rt.destroy=()=>{R.off("brush:highlight",kt),R.off("brush:remove",wn),zn()},Rt}function AP(e){var{facet:t,brushKey:n}=e,r=V0(e,["facet","brushKey"]);return(i,s,l)=>{const{container:c,view:h,options:p}=i,v=fm(c),y={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},b=["active",["inactive",{opacity:.5}]],{scale:T,coordinate:M}=h;if(t){const I=v.getBounds(),N=I.min[0],z=I.min[1],H=I.max[0],X=I.max[1];return Hk(v.parentNode.parentNode,Object.assign(Object.assign({elements:()=>tL(i,s),datum:j_(ZM(i,s).map(Y=>Y.view)),brushRegion:(Y,ne,pe,ye)=>[Y,ne,pe,ye],extent:[N,z,H,X],state:Ab(ZM(i,s).map(Y=>Y.options),b),emitter:l,scale:T,coordinate:M,selectedHandles:void 0},y),r))}const R=Hk(v,Object.assign(Object.assign({elements:ly,key:I=>I.__data__.key,siblings:()=>dee(i,s,n),datum:j_([h,...TP(i,s,n).map(I=>I.view)]),brushRegion:(I,N,z,H)=>[I,N,z,H],extent:void 0,state:Ab([p,...pee(i,s,n)],b),emitter:l,scale:T,coordinate:M,selectedHandles:void 0},y),r));return v.brush=R,()=>R.destroy()}}function CP(e,t,n,r,i){const[,s,,l]=i;return[e,s,n,l]}function vee(e){return AP(Object.assign(Object.assign({},e),{brushRegion:CP,selectedHandles:["handle-e","handle-w"]}))}function OP(e,t,n,r,i){const[s,,l]=i;return[s,t,l,r]}function mee(e){return AP(Object.assign(Object.assign({},e),{brushRegion:OP,selectedHandles:["handle-n","handle-s"]}))}var MP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const gee="axis",yee="axis-line",_ee="axis-main-group",Gk="axis-hot-area";function bee(e){return e.getElementsByClassName(gee)}function Wk(e){return e.getElementsByClassName(yee)[0]}function xee(e){return e.getElementsByClassName(_ee)[0]}function Zk(e){return xee(e).getLocalBounds()}function Eee(e,t){var{cross:n,offsetX:r,offsetY:i}=t,s=MP(t,["cross","offsetX","offsetY"]);const l=Zk(e),c=Wk(e),[h]=c.getLocalBounds().min,[p,v]=l.min,[y,b]=l.max,T=(y-p)*2;return{brushRegion:OP,hotZone:new L0({className:Gk,style:Object.assign({width:n?T/2:T,transform:`translate(${(n?p:h-T/2).toFixed(2)}, ${v})`,height:b-v},s)}),extent:n?(M,R,I,N)=>[-1/0,R,1/0,N]:(M,R,I,N)=>[Math.floor(p-r),R,Math.ceil(y-r),N]}}function See(e,t){var{offsetY:n,offsetX:r,cross:i=!1}=t,s=MP(t,["offsetY","offsetX","cross"]);const l=Zk(e),c=Wk(e),[,h]=c.getLocalBounds().min,[p,v]=l.min,[y,b]=l.max,T=b-v;return{brushRegion:CP,hotZone:new L0({className:Gk,style:Object.assign({width:y-p,height:i?T:T*2,transform:`translate(${p}, ${i?v:h-T})`},s)}),extent:i?(M,R,I,N)=>[M,-1/0,I,1/0]:(M,R,I,N)=>[M,Math.floor(v-n),I,Math.ceil(b-n)]}}function wee(e,t){var{axes:n,elements:r,points:i,horizontal:s,datum:l,offsetY:c,offsetX:h,reverse:p=!1,state:v={},emitter:y,coordinate:b}=t,T=MP(t,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const M=r(e),R=n(e),I=X2(M,l),{setState:N,removeState:z}=sg(v,I),H=new Map,X=Eo(T,"mask"),Y=kt=>Array.from(H.values()).every(([wn,zn,or,ir])=>kt.some(([Zr,Ri])=>Zr>=wn&&Zr<=or&&Ri>=zn&&Ri<=ir)),ne=R.map(kt=>kt.attributes.scale),pe=kt=>kt.length>2?[kt[0],kt[kt.length-1]]:kt,ye=new Map,De=()=>{ye.clear();for(let kt=0;kt<R.length;kt++){const wn=ne[kt],{domain:zn}=wn.getOptions();ye.set(kt,pe(zn))}};De();const Xe=(kt,wn)=>{const zn=[];for(const ir of M){const Zr=i(ir);Y(Zr)?(N(ir,"active"),zn.push(ir)):N(ir,"inactive")}if(ye.set(kt,mt(zn,kt)),!wn)return;const or=()=>{if(!Qe)return Array.from(ye.values());const ir=[];for(const[Zr,Ri]of ye){const Qi=ne[Zr],{name:Qr}=Qi.getOptions();Qr==="x"?ir[0]=Ri:ir[1]=Ri}return ir};y.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:or()}})},Ke=kt=>{for(const wn of M)z(wn,"active","inactive");De(),kt&&y.emit("brushAxis:remove",{nativeEvent:!0})},mt=(kt,wn)=>{const zn=ne[wn],{name:or}=zn.getOptions(),ir=kt.map(Zr=>{const Ri=Zr.__data__;return zn.invert(Ri[or])});return pe(sy(zn,ir))},Qe=R.some(s)&&R.some(kt=>!s(kt)),ut=[];for(let kt=0;kt<R.length;kt++){const wn=R[kt],zn=s(wn)?See:Eee,{hotZone:or,brushRegion:ir,extent:Zr}=zn(wn,{offsetY:c,offsetX:h,cross:Qe,zIndex:999,fill:"transparent"});wn.parentNode.appendChild(or);const Ri=wP(or,Object.assign(Object.assign({},X),{reverse:p,brushRegion:ir,brushended(Qi){H.delete(wn),Array.from(H.entries()).length===0?Ke(Qi):Xe(kt,Qi)},brushed(Qi,Qr,ei,Po,uo){H.set(wn,Zr(Qi,Qr,ei,Po)),Xe(kt,uo)}}));ut.push(Ri)}const ct=(kt={})=>{const{nativeEvent:wn}=kt;wn||ut.forEach(zn=>zn.remove(!1))},gt=(kt,wn,zn)=>{const[or,ir]=kt,Zr=Qr=>Qr.getStep?Qr.getStep():0,Ri=Xt(or,wn,zn),Qi=Xt(ir,wn,zn)+Zr(wn);return s(zn)?[Ri,-1/0,Qi,1/0]:[-1/0,Ri,1/0,Qi]},Xt=(kt,wn,zn)=>{const{height:or,width:ir}=b.getOptions(),Zr=wn.clone();return s(zn)?Zr.update({range:[0,ir]}):Zr.update({range:[or,0]}),Zr.map(kt)},Rt=kt=>{const{nativeEvent:wn}=kt;if(wn)return;const{selection:zn}=kt.data;for(let or=0;or<ut.length;or++){const ir=zn[or],Zr=ut[or],Ri=R[or];if(ir){const Qi=ne[or];Zr.move(...gt(ir,Qi,Ri),!1)}else Zr.remove(!1)}};return y.on("brushAxis:remove",ct),y.on("brushAxis:highlight",Rt),()=>{ut.forEach(kt=>kt.destroy()),y.off("brushAxis:remove",ct),y.off("brushAxis:highlight",Rt)}}function Tee(e){return(t,n,r)=>{const{container:i,view:s,options:l}=t,c=fm(i),{x:h,y:p}=c.getBBox(),{coordinate:v}=s;return wee(i,Object.assign({elements:ly,axes:bee,offsetY:p,offsetX:h,points:y=>y.__data__.points,horizontal:y=>{const{startPos:[b,T],endPos:[M,R]}=y.attributes;return b!==M&&T===R},datum:j_(s),state:Ab(l,["active",["inactive",{opacity:.5}]]),coordinate:v,emitter:r},e))}}var Aee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Xk=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Cee(e=300){let t=null;return n=>{const{timeStamp:r}=n;return t!==null&&r-t<e?(t=r,!0):(t=r,!1)}}function Oee(e,t){var{filter:n,reset:r,brushRegion:i,extent:s,reverse:l,emitter:c,scale:h,coordinate:p,selection:v,series:y=!1}=t,b=Xk(t,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const T=Eo(b,"mask"),{width:M,height:R}=e.getBBox(),I=s||[0,0,M,R],N=Cee(),z=wP(e,Object.assign(Object.assign({},T),{extent:I,brushRegion:i,reverse:l,brushcreated:H}));e.addEventListener("click",X);function H(ne,pe,ye,De,Xe){Xe.nativeEvent=!0,n(v(ne,pe,ye,De),Xe),z.remove()}function X(ne){N(ne)&&(ne.nativeEvent=!0,r(ne))}const Y=({nativeEvent:ne,data:pe})=>{if(ne)return;const{selection:ye}=pe;n(ye,{nativeEvent:!1})};return c.on("brush:filter",Y),()=>{z.destroy(),c.off("brush:filter",Y),e.removeEventListener("click",X)}}function RP(e){var{hideX:t=!0,hideY:n=!0}=e,r=Xk(e,["hideX","hideY"]);return(i,s,l)=>{const{container:c,view:h,options:p,update:v,setState:y}=i,b=fm(c),T={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let M=!1,R=!1,I=h;const{scale:N,coordinate:z}=h;return Oee(b,Object.assign(Object.assign({brushRegion:(H,X,Y,ne)=>[H,X,Y,ne],selection:(H,X,Y,ne)=>{const{scale:pe,coordinate:ye}=I;return oT(H,X,Y,ne,pe,ye)},filter:(H,X)=>Aee(this,void 0,void 0,function*(){if(R)return;R=!0;const[Y,ne]=H;y("brushFilter",ye=>{const{marks:De}=ye,Xe=De.map(Ke=>hi({axis:Object.assign(Object.assign({},t&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},Ke,{scale:{x:{domain:Y,nice:!1},y:{domain:ne,nice:!1}}}));return Object.assign(Object.assign({},p),{marks:Xe,clip:!0})}),l.emit("brush:filter",Object.assign(Object.assign({},X),{data:{selection:[Y,ne]}})),I=(yield v()).view,R=!1,M=!0}),reset:H=>{if(R||!M)return;const{scale:X}=h,{x:Y,y:ne}=X,pe=Y.getOptions().domain,ye=ne.getOptions().domain;l.emit("brush:filter",Object.assign(Object.assign({},H),{data:{selection:[pe,ye]}})),M=!1,I=h,y("brushFilter"),v()},extent:void 0,emitter:l,scale:N,coordinate:z},T),r))}}function Mee(e){return RP(Object.assign(Object.assign({hideX:!0},e),{brushRegion:CP}))}function Ree(e){return RP(Object.assign(Object.assign({hideY:!0},e),{brushRegion:OP}))}var Pee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const Iee="slider";function Dee(e,t,n,r=!1,i="x",s="y"){const{marks:l}=e,c=l.map(h=>{var p,v;return hi({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},h,{scale:t,[n]:Object.assign(Object.assign({},((p=h[n])===null||p===void 0?void 0:p[i])&&{[i]:Object.assign({preserve:!0},r&&{ratio:null})}),((v=h[n])===null||v===void 0?void 0:v[s])&&{[s]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},e),{marks:c,clip:!0,animate:!1})}function Lee(e,t,n){const[r,i]=e,s=n?h=>1-h:h=>h,l=wb(t,s(r),!0),c=wb(t,s(i),!1);return sy(t,[l,c])}function nA(e){return[e[0],e[e.length-1]]}function Yk({initDomain:e={},className:t=Iee,prefix:n="slider",setValue:r=(p,v)=>p.setValues(v),hasState:i=!1,wait:s=50,leading:l=!0,trailing:c=!1,getInitValues:h=p=>{var v;const y=(v=p==null?void 0:p.attributes)===null||v===void 0?void 0:v.values;if(y[0]!==0||y[1]!==1)return y}}){return(p,v,y)=>{const{container:b,view:T,update:M,setState:R}=p,I=b.getElementsByClassName(t);if(!I.length)return()=>{};let N=!1;const{scale:z,coordinate:H,layout:X}=T,{paddingLeft:Y,paddingTop:ne,paddingBottom:pe,paddingRight:ye}=X,{x:De,y:Xe}=z,Ke=tu(H),mt=gt=>{const Xt=gt==="vertical"?"y":"x",Rt=gt==="vertical"?"x":"y";return Ke?[Rt,Xt]:[Xt,Rt]},Qe=new Map,ut=new Set,ct={x:e.x||De.getOptions().domain,y:e.y||Xe.getOptions().domain};for(const gt of I){const{orientation:Xt}=gt.attributes,[Rt,kt]=mt(Xt),wn=`${n}${n0(Rt)}:filter`,zn=Rt==="x",{ratio:or}=De.getOptions(),{ratio:ir}=Xe.getOptions(),Zr=ei=>{if(ei.data){const{selection:ja}=ei.data,[Va=nA(ct.x),vs=nA(ct.y)]=ja;return zn?[sy(De,Va,or),sy(Xe,vs,ir)]:[sy(Xe,vs,ir),sy(De,Va,or)]}const{value:Po}=ei.detail,uo=z[Rt],Jo=Lee(Po,uo,Ke&&Xt==="horizontal"),wa=ct[kt];return[Jo,wa]},Ri=J_(ei=>Pee(this,void 0,void 0,function*(){const{initValue:Po=!1}=ei;if(N&&!Po)return;N=!0;const{nativeEvent:uo=!0}=ei,[Jo,wa]=Zr(ei);if(ct[Rt]=Jo,ct[kt]=wa,uo){const ja=zn?Jo:wa,Va=zn?wa:Jo;y.emit(wn,Object.assign(Object.assign({},ei),{nativeEvent:uo,data:{selection:[nA(ja),nA(Va)]}}))}R(gt,ja=>Object.assign(Object.assign({},Dee(ja,{[Rt]:{domain:Jo,nice:!1}},n,i,Rt,kt)),{paddingLeft:Y,paddingTop:ne,paddingBottom:pe,paddingRight:ye})),yield M(),N=!1}),s,{leading:l,trailing:c}),Qi=ei=>{const{nativeEvent:Po}=ei;if(Po)return;const{data:uo}=ei,{selection:Jo}=uo,[wa,ja]=Jo;gt.dispatchEvent(new Jl("valuechange",{data:uo,nativeEvent:!1}));const Va=zn?aT(wa,De):aT(ja,Xe);r(gt,Va)};y.on(wn,Qi),gt.addEventListener("valuechange",Ri),Qe.set(gt,Ri),ut.add([wn,Qi]);const Qr=h(gt);Qr&&gt.dispatchEvent(new Jl("valuechange",{detail:{value:Qr},nativeEvent:!1,initValue:!0}))}return M(),()=>{for(const[gt,Xt]of Qe)gt.removeEventListener("valuechange",Xt);for(const[gt,Xt]of ut)y.off(gt,Xt)}}}const $k="g2-scrollbar";function Nee(e={}){return(t,n,r)=>{const{view:i,container:s}=t;if(!s.getElementsByClassName($k).length)return()=>{};const{scale:c}=i,{x:h,y:p}=c,v={x:[...h.getOptions().domain],y:[...p.getOptions().domain]};return h.update({domain:h.getOptions().expectedDomain}),p.update({domain:p.getOptions().expectedDomain}),Yk(Object.assign(Object.assign({},e),{initDomain:v,className:$k,prefix:"scrollbar",hasState:!0,setValue:(b,T)=>b.setValue(T[0]),getInitValues:b=>{const T=b.slider.attributes.values;if(T[0]!==0)return T}}))(t,n,r)}}var Fee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Bee(e,t,n){return`<${e} style="${Object.entries(n).map(([r,i])=>`${JG(r)}:${i}`).join(";")}">${t}</${e}>`}const kee={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function qk(e){return e.nodeName!=="text"?!1:!!e.isOverflowing()}function Kk(e){var{offsetX:t=8,offsetY:n=8}=e,r=Fee(e,["offsetX","offsetY"]);return i=>{const{container:s}=i,[l,c]=s.getBounds().min,h=Eo(r,"tip"),p=new Set,v=b=>{const{target:T}=b;if(!qk(T)){b.stopPropagation();return}const{offsetX:M,offsetY:R}=b,I=M+t-l,N=R+n-c;if(T.tip){T.tip.style.x=I,T.tip.style.y=N;return}const{text:z}=T.style,H=new ii({className:"poptip",style:{innerHTML:Bee("div",z,Object.assign(Object.assign({},kee),h)),x:I,y:N}});s.appendChild(H),T.tip=H,p.add(H)},y=b=>{const{target:T}=b;if(!qk(T)){b.stopPropagation();return}T.tip&&(T.tip.remove(),T.tip=null,p.delete(T.tip))};return s.addEventListener("pointerover",v),s.addEventListener("pointerout",y),()=>{s.removeEventListener("pointerover",v),s.removeEventListener("pointerout",y),p.forEach(b=>b.remove())}}}Kk.props={reapplyWhenUpdate:!0};function zee(e,t){var n=SR(t),r=n.length;if((0,ya.Z)(e))return!r;for(var i=0;i<r;i+=1){var s=n[i];if(t[s]!==e[s]||!(s in e))return!1}return!0}var Uee=zee;function jee(e,t){if(!Ho(e))return null;var n;if(_c(t)&&(n=t),Ev(t)&&(n=function(i){return Uee(i,t)}),n){for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r]}return null}var Vb=jee;function rA(e){return e==null?null:Qk(e)}function Qk(e){if(typeof e!="function")throw new Error;return e}var Vee={depth:-1},Jk={},PP={};function Hee(e){return e.id}function Gee(e){return e.parentId}function IP(){var e=Hee,t=Gee,n;function r(i){var s=Array.from(i),l=e,c=t,h,p,v,y,b,T,M,R,I=new Map;if(n!=null){var N=s.map(function(ye,De){return Wee(n(ye,De,i))}),z=N.map(e7),H=new Set(N).add(""),X=yR(z),Y;try{for(X.s();!(Y=X.n()).done;){var ne=Y.value;H.has(ne)||(H.add(ne),N.push(ne),z.push(e7(ne)),s.push(PP))}}catch(ye){X.e(ye)}finally{X.f()}l=function(De,Xe){return N[Xe]},c=function(De,Xe){return z[Xe]}}for(v=0,h=s.length;v<h;++v)p=s[v],T=s[v]=new Nb(p),(M=l(p,v,i))!=null&&(M+="")&&(R=T.id=M,I.set(R,I.has(R)?Jk:T)),(M=c(p,v,i))!=null&&(M+="")&&(T.parent=M);for(v=0;v<h;++v)if(T=s[v],M=T.parent){if(b=I.get(M),!b)throw new Error("missing: "+M);if(b===Jk)throw new Error("ambiguous: "+M);b.children?b.children.push(T):b.children=[T],T.parent=b}else{if(y)throw new Error("multiple roots");y=T}if(!y)throw new Error("no root");if(n!=null){for(;y.data===PP&&y.children.length===1;)y=y.children[0],--h;for(var pe=s.length-1;pe>=0&&(T=s[pe],T.data===PP);--pe)T.data=null}if(y.parent=Vee,y.eachBefore(function(ye){ye.depth=ye.parent.depth+1,--h}).eachBefore($6),y.parent=null,h>0)throw new Error("cycle");return y}return r.id=function(i){return arguments.length?(e=rA(i),r):e},r.parentId=function(i){return arguments.length?(t=rA(i),r):t},r.path=function(i){return arguments.length?(n=rA(i),r):n},r}function Wee(e){e="".concat(e);var t=e.length;return DP(e,t-1)&&!DP(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:"/".concat(e)}function e7(e){var t=e.length;if(t<2)return"";for(;--t>1&&!DP(e,t););return e.slice(0,t)}function DP(e,t){if(e[t]==="/"){for(var n=0;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Zee(e,t,n,r,i){var s=e.children,l,c=s.length,h,p=new Array(c+1);for(p[0]=h=l=0;l<c;++l)p[l+1]=h+=s[l].value;v(0,c,e.value,t,n,r,i);function v(y,b,T,M,R,I,N){if(y>=b-1){var z=s[y];z.x0=M,z.y0=R,z.x1=I,z.y1=N;return}for(var H=p[y],X=T/2+H,Y=y+1,ne=b-1;Y<ne;){var pe=Y+ne>>>1;p[pe]<X?Y=pe+1:ne=pe}X-p[Y-1]<p[Y]-X&&y+1<Y&&--Y;var ye=p[Y]-H,De=T-ye;if(I-M>N-R){var Xe=T?(M*De+I*ye)/T:I;v(y,Y,ye,M,R,Xe,N),v(Y,b,De,Xe,R,I,N)}else{var Ke=T?(R*De+N*ye)/T:N;v(y,Y,ye,M,R,I,Ke),v(Y,b,De,M,Ke,I,N)}}}function iA(e,t,n,r,i){for(var s=e.children,l,c=-1,h=s.length,p=e.value&&(i-n)/e.value;++c<h;)l=s[c],l.x0=t,l.x1=r,l.y0=n,l.y1=n+=l.value*p}function Xee(e,t,n,r,i){(e.depth&1?iA:J2)(e,t,n,r,i)}var t7=(1+Math.sqrt(5))/2;function n7(e,t,n,r,i,s){for(var l=[],c=t.children,h,p,v=0,y=0,b=c.length,T,M,R=t.value,I,N,z,H,X,Y,ne;v<b;){T=i-n,M=s-r;do I=c[y++].value;while(!I&&y<b);for(N=z=I,Y=Math.max(M/T,T/M)/(R*e),ne=I*I*Y,X=Math.max(z/ne,ne/N);y<b;++y){if(I+=p=c[y].value,p<N&&(N=p),p>z&&(z=p),ne=I*I*Y,H=Math.max(z/ne,ne/N),H>X){I-=p;break}X=H}l.push(h={value:I,dice:T<M,children:c.slice(v,y)}),h.dice?J2(h,n,r,i,R?r+=M*I/R:s):iA(h,n,r,R?n+=T*I/R:i,s),R-=I,v=y}return l}var r7=function e(t){function n(r,i,s,l,c){n7(t,r,i,s,l,c)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(t7),Yee=function e(t){function n(r,i,s,l,c){if((h=r._squarify)&&h.ratio===t)for(var h,p,v,y,b=-1,T,M=h.length,R=r.value;++b<M;){for(p=h[b],v=p.children,y=p.value=0,T=v.length;y<T;++y)p.value+=v[y].value;p.dice?J2(p,i,s,l,R?s+=(c-s)*p.value/R:c):iA(p,i,s,R?i+=(l-i)*p.value/R:l,c),R-=p.value}else r._squarify=h=n7(t,r,i,s,l,c),h.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(t7);function e1(){return 0}function Hb(e){return function(){return e}}function $ee(){var e=r7,t=!1,n=1,r=1,i=[0],s=e1,l=e1,c=e1,h=e1,p=e1;function v(b){return b.x0=b.y0=0,b.x1=n,b.y1=r,b.eachBefore(y),i=[0],t&&b.eachBefore(Z6),b}function y(b){var T=i[b.depth],M=b.x0+T,R=b.y0+T,I=b.x1-T,N=b.y1-T;I<M&&(M=I=(M+I)/2),N<R&&(R=N=(R+N)/2),b.x0=M,b.y0=R,b.x1=I,b.y1=N,b.children&&(T=i[b.depth+1]=s(b)/2,M+=p(b)-T,R+=l(b)-T,I-=c(b)-T,N-=h(b)-T,I<M&&(M=I=(M+I)/2),N<R&&(R=N=(R+N)/2),e(b,M,R,I,N))}return v.round=function(b){return arguments.length?(t=!!b,v):t},v.size=function(b){return arguments.length?(n=+b[0],r=+b[1],v):[n,r]},v.tile=function(b){return arguments.length?(e=Qk(b),v):e},v.padding=function(b){return arguments.length?v.paddingInner(b).paddingOuter(b):v.paddingInner()},v.paddingInner=function(b){return arguments.length?(s=typeof b=="function"?b:Hb(+b),v):s},v.paddingOuter=function(b){return arguments.length?v.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):v.paddingTop()},v.paddingTop=function(b){return arguments.length?(l=typeof b=="function"?b:Hb(+b),v):l},v.paddingRight=function(b){return arguments.length?(c=typeof b=="function"?b:Hb(+b),v):c},v.paddingBottom=function(b){return arguments.length?(h=typeof b=="function"?b:Hb(+b),v):h},v.paddingLeft=function(b){return arguments.length?(p=typeof b=="function"?b:Hb(+b),v):p},v}function qee(e,t){return Array.isArray(e)?typeof t=="function"?IP().path(t)(e):IP()(e):Lb(e)}function i7(e,t=[e.data.name]){e.id=e.id||e.data.name,e.path=t,e.children&&e.children.forEach(n=>{n.id=`${e.id}/${n.data.name}`,n.path=[...t,n.data.name],i7(n,n.path)})}function o7(e){const t=sl(e,["data","name"]);t.replaceAll&&(e.path=t.replaceAll(".","/").split("/")),e.children&&e.children.forEach(n=>{o7(n)})}function Kee(e,t){const n={treemapBinary:Zee,treemapDice:J2,treemapSlice:iA,treemapSliceDice:Xee,treemapSquarify:r7,treemapResquarify:Yee},r=e==="treemapSquarify"?n[e].ratio(t):n[e];if(!r)throw new TypeError("Invalid tile method!");return r}function a7(e,t,n){const{value:r}=n,i=Kee(t.tile,t.ratio),s=qee(e,t.path);Ho(e)?o7(s):i7(s),r?s.sum(h=>t.ignoreParentValue&&h.children?0:gm(r)(h)).sort(t.sort):s.count(),$ee().tile(i).size(t.size).round(t.round).paddingInner(t.paddingInner).paddingOuter(t.paddingOuter).paddingTop(t.paddingTop).paddingRight(t.paddingRight).paddingBottom(t.paddingBottom).paddingLeft(t.paddingLeft)(s);const l=s.descendants().map(h=>Object.assign(h,{id:h.id.replace(/^\//,""),x:[h.x0,h.x1],y:[h.y0,h.y1]}));return[l.filter(typeof t.layer=="function"?t.layer:h=>h.height===t.layer),l]}var Qee=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},Jee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ete(e){return Ra(e).select(`.${qo}`).node()}const tte={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function nte(e={}){const{originData:t=[],layout:n}=e,r=Jee(e,["originData","layout"]),i=hi({},tte,r),s=Eo(i,"breadCrumb"),l=Eo(i,"active");return c=>{const{update:h,setState:p,container:v,options:y}=c,b=ete(v),T=y.marks[0],{state:M}=T,R=new yc;b.appendChild(R);const I=(X,Y)=>Qee(this,void 0,void 0,function*(){if(R.removeChildren(),Y){let ne="",pe=s.y,ye=0;const De=[],Xe=b.getBBox().width,Ke=X.map((mt,Qe)=>{ne=`${ne}${mt}/`,De.push(mt);const ut=new oc({name:ne.replace(/\/$/,""),style:Object.assign(Object.assign({text:mt,x:ye,path:[...De],depth:Qe},s),{y:pe})});R.appendChild(ut),ye+=ut.getBBox().width;const ct=new oc({style:Object.assign(Object.assign({x:ye,text:" / "},s),{y:pe})});return R.appendChild(ct),ye+=ct.getBBox().width,ye>Xe&&(pe=R.getBBox().height+s.y,ye=0,ut.attr({x:ye,y:pe}),ye+=ut.getBBox().width,ct.attr({x:ye,y:pe}),ye+=ct.getBBox().width),Qe===bR(X)-1&&ct.remove(),ut});Ke.forEach((mt,Qe)=>{if(Qe===bR(Ke)-1)return;const ut=Object.assign({},mt.attributes);mt.attr("cursor","pointer"),mt.addEventListener("mouseenter",()=>{mt.attr(l)}),mt.addEventListener("mouseleave",()=>{mt.attr(ut)}),mt.addEventListener("click",()=>{I(sl(mt,["style","path"]),sl(mt,["style","depth"]))})})}iee(v,p),p("treemapDrillDown",ne=>{const{marks:pe}=ne,ye=X.join("/"),De=pe.map(Xe=>{if(Xe.type!=="rect")return Xe;let Ke=t;if(Y){const Qe=t.filter(Rt=>{const kt=sl(Rt,["id"]);return kt&&(kt.match(`${ye}/`)||ye.match(kt))}).map(Rt=>({value:Rt.height===0?sl(Rt,["value"]):void 0,name:sl(Rt,["id"])})),{paddingLeft:ut,paddingBottom:ct,paddingRight:gt}=n,Xt=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||R.getBBox().height+10)/(Y+1),paddingLeft:ut/(Y+1),paddingBottom:ct/(Y+1),paddingRight:gt/(Y+1),path:Rt=>Rt.name,layer:Rt=>Rt.depth===Y+1});Ke=a7(Qe,Xt,{value:"value"})[0]}else Ke=t.filter(Qe=>Qe.depth===1);const mt=[];return Ke.forEach(({path:Qe})=>{mt.push(fE(Qe))}),hi({},Xe,{data:Ke,scale:{color:{domain:mt}}})});return Object.assign(Object.assign({},ne),{marks:De})}),yield h(void 0,["legendFilter"])}),N=X=>{const Y=X.target;if(sl(Y,["markType"])!=="rect")return;const ne=sl(Y,["__data__","key"]),pe=Vb(t,ye=>ye.id===ne);sl(pe,"height")&&I(sl(pe,"path"),sl(pe,"depth"))};b.addEventListener("click",N);const z=SR(Object.assign(Object.assign({},M.active),M.inactive)),H=()=>{sL(b).forEach(Y=>{const ne=sl(Y,["style","cursor"]),pe=Vb(t,ye=>ye.id===sl(Y,["__data__","key"]));if(ne!=="pointer"&&(pe!=null&&pe.height)){Y.style.cursor="pointer";const ye=gR(Y.attributes,z);Y.addEventListener("mouseenter",()=>{Y.attr(M.active)}),Y.addEventListener("mouseleave",()=>{Y.attr(hi(ye,M.inactive))})}})};return H(),b.addEventListener("mousemove",H),()=>{R.remove(),b.removeEventListener("click",N),b.removeEventListener("mousemove",H)}}}var LP=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},rte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ite={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},NP="movePoint",s7=e=>{const t=e.target,{markType:n}=t;n==="line"&&(t.attr("_lineWidth",t.attr("lineWidth")||1),t.attr("lineWidth",t.attr("_lineWidth")+3)),n==="interval"&&(t.attr("_opacity",t.attr("opacity")||1),t.attr("opacity",.7*t.attr("_opacity")))},l7=e=>{const t=e.target,{markType:n}=t;n==="line"&&t.attr("lineWidth",t.attr("_lineWidth")),n==="interval"&&t.attr("opacity",t.attr("_opacity"))},ote=(e,t,n)=>t.map(r=>["x","color"].reduce((s,l)=>{const c=n[l];return c&&r[c]!==e[c]?!1:s},!0)?Object.assign(Object.assign({},r),e):r),ate=e=>{const t=sl(e,["__data__","y"]),r=sl(e,["__data__","y1"])-t,{__data__:{data:i,encode:s,transform:l},childNodes:c}=e.parentNode,h=Vb(l,({type:y})=>y==="normalizeY"),p=sl(s,["y","field"]),v=i[c.indexOf(e)][p];return(y,b=!1)=>h||b?y/(1-y)/(r/(1-r))*v:y},ste=(e,t)=>{const n=sl(e,["__data__","seriesItems",t,"0","value"]),r=sl(e,["__data__","seriesIndex",t]),{__data__:{data:i,encode:s,transform:l}}=e.parentNode,c=Vb(l,({type:v})=>v==="normalizeY"),h=sl(s,["y","field"]),p=i[r][h];return v=>c?n===1?v:v/(1-v)/(n/(1-n))*p:v},u7=(e,t,n)=>{e.forEach((r,i)=>{r.attr("stroke",t[1]===i?n.activeStroke:n.stroke)})},c7=(e,t,n,r)=>{const i=new Ki({style:n}),s=new oc({style:r});return t.appendChild(s),e.appendChild(i),[i,s]},f7=(e,t)=>{if(!sl(e,["options","range","indexOf"]))return;const r=e.options.range.indexOf(t);return e.sortedDomain[r]},FP=(e,t,n)=>{const r=hT(e,t),s=hT(e,n)/r,l=e[0]+(t[0]-e[0])*s,c=e[1]+(t[1]-e[1])*s;return[l,c]};function lte(e={}){const{selection:t=[],precision:n=2}=e,r=rte(e,["selection","precision"]),i=Object.assign(Object.assign({},ite),r||{}),s=Eo(i,"path"),l=Eo(i,"label"),c=Eo(i,"point");return(h,p,v)=>{const{update:y,setState:b,container:T,view:M,options:{marks:R,coordinate:I}}=h,N=fm(T);let z=sL(N),H,X=t;const{transform:Y=[],type:ne}=I,pe=!!Vb(Y,({type:Rt})=>Rt==="transpose"),ye=ne==="polar",De=ne==="theta",Xe=!!Vb(z,({markType:Rt})=>Rt==="area");Xe&&(z=z.filter(({markType:Rt})=>Rt==="area"));const Ke=new yc({style:{zIndex:2}});N.appendChild(Ke);const mt=()=>{v.emit("element-point:select",{nativeEvent:!0,data:{selection:X}})},Qe=(Rt,kt)=>{v.emit("element-point:moved",{nativeEvent:!0,data:{changeData:Rt,data:kt}})},ut=Rt=>{const kt=Rt.target;X=[kt.parentNode.childNodes.indexOf(kt)],mt(),gt(kt)},ct=Rt=>{const{data:{selection:kt},nativeEvent:wn}=Rt;if(wn)return;X=kt;const zn=sl(z,[X==null?void 0:X[0]]);zn&&gt(zn)},gt=Rt=>{const{attributes:kt,markType:wn,__data__:zn}=Rt,{stroke:or}=kt,{points:ir,seriesTitle:Zr,color:Ri,title:Qi,seriesX:Qr,y1:ei}=zn;if(pe&&wn!=="interval")return;const{scale:Po,coordinate:uo}=(H==null?void 0:H.view)||M,{color:Jo,y:wa,x:ja}=Po,Va=uo.getCenter();Ke.removeChildren();let vs;const Cl=(ss,Is,ku,tf)=>LP(this,void 0,void 0,function*(){return b("elementPointMove",zp=>{var nf;const vh=(((nf=H==null?void 0:H.options)===null||nf===void 0?void 0:nf.marks)||R).map(Qa=>{if(!tf.includes(Qa.type))return Qa;const{data:Ds,encode:us}=Qa,dl=Object.keys(us).reduce((Ys,wu)=>{const lc=us[wu];return wu==="x"&&(Ys[lc]=ss),wu==="y"&&(Ys[lc]=Is),wu==="color"&&(Ys[lc]=ku),Ys},{}),ol=ote(dl,Ds,us);return Qe(dl,ol),hi({},Qa,{data:ol,animate:!1})});return Object.assign(Object.assign({},zp),{marks:vh})}),yield y("elementPointMove")});if(["line","area"].includes(wn))ir.forEach((ss,Is)=>{const ku=ja.invert(Qr[Is]);if(!ku)return;const tf=new Sl({name:NP,style:Object.assign({cx:ss[0],cy:ss[1],fill:or},c)}),zp=ste(Rt,Is);tf.addEventListener("mousedown",nf=>{const vh=uo.output([Qr[Is],0]),Qa=Zr==null?void 0:Zr.length;T.attr("cursor","move"),X[1]!==Is&&(X[1]=Is,mt()),u7(Ke.childNodes,X,c);const[Ds,us]=c7(Ke,tf,s,l),Wa=ol=>{const Ys=ss[1]+ol.clientY-vs[1];if(Xe)if(ye){const wu=ss[0]+ol.clientX-vs[0],[lc,yd]=FP(Va,vh,[wu,Ys]),[,pg]=uo.output([1,wa.output(0)]),[,a1]=uo.invert([lc,pg-(ir[Is+Qa][1]-yd)]),nC=(Is+1)%Qa,rC=(Is-1+Qa)%Qa,s1=Y2([ir[rC],[lc,yd],Zr[nC]&&ir[nC]]);us.attr("text",zp(wa.invert(a1)).toFixed(n)),Ds.attr("d",s1),tf.attr("cx",lc),tf.attr("cy",yd)}else{const[,wu]=uo.output([1,wa.output(0)]),[,lc]=uo.invert([ss[0],wu-(ir[Is+Qa][1]-Ys)]),yd=Y2([ir[Is-1],[ss[0],Ys],Zr[Is+1]&&ir[Is+1]]);us.attr("text",zp(wa.invert(lc)).toFixed(n)),Ds.attr("d",yd),tf.attr("cy",Ys)}else{const[,wu]=uo.invert([ss[0],Ys]),lc=Y2([ir[Is-1],[ss[0],Ys],ir[Is+1]]);us.attr("text",wa.invert(wu).toFixed(n)),Ds.attr("d",lc),tf.attr("cy",Ys)}};vs=[nf.clientX,nf.clientY],window.addEventListener("mousemove",Wa);const dl=()=>LP(this,void 0,void 0,function*(){if(T.attr("cursor","default"),window.removeEventListener("mousemove",Wa),T.removeEventListener("mouseup",dl),Vs(us.attr("text")))return;const ol=Number(us.attr("text")),Ys=f7(Jo,Ri);H=yield Cl(ku,ol,Ys,["line","area"]),us.remove(),Ds.remove(),gt(Rt)});T.addEventListener("mouseup",dl)}),Ke.appendChild(tf)}),u7(Ke.childNodes,X,c);else if(wn==="interval"){let ss=[(ir[0][0]+ir[1][0])/2,ir[0][1]];pe?ss=[ir[0][0],(ir[0][1]+ir[1][1])/2]:De&&(ss=ir[0]);const Is=ate(Rt),ku=new Sl({name:NP,style:Object.assign(Object.assign({cx:ss[0],cy:ss[1],fill:or},c),{stroke:c.activeStroke})});ku.addEventListener("mousedown",tf=>{T.attr("cursor","move");const zp=f7(Jo,Ri),[nf,vh]=c7(Ke,ku,s,l),Qa=us=>{if(pe){const Wa=ss[0]+us.clientX-vs[0],[dl]=uo.output([wa.output(0),wa.output(0)]),[,ol]=uo.invert([dl+(Wa-ir[2][0]),ss[1]]),Ys=Y2([[Wa,ir[0][1]],[Wa,ir[1][1]],ir[2],ir[3]],!0);vh.attr("text",Is(wa.invert(ol)).toFixed(n)),nf.attr("d",Ys),ku.attr("cx",Wa)}else if(De){const Wa=ss[1]+us.clientY-vs[1],dl=ss[0]+us.clientX-vs[0],[ol,Ys]=FP(Va,[dl,Wa],ss),[wu,lc]=FP(Va,[dl,Wa],ir[1]),yd=uo.invert([ol,Ys])[1],pg=ei-yd;if(pg<0)return;const a1=jW(Va,[[ol,Ys],[wu,lc],ir[2],ir[3]],pg>.5?1:0);vh.attr("text",Is(pg,!0).toFixed(n)),nf.attr("d",a1),ku.attr("cx",ol),ku.attr("cy",Ys)}else{const Wa=ss[1]+us.clientY-vs[1],[,dl]=uo.output([1,wa.output(0)]),[,ol]=uo.invert([ss[0],dl-(ir[2][1]-Wa)]),Ys=Y2([[ir[0][0],Wa],[ir[1][0],Wa],ir[2],ir[3]],!0);vh.attr("text",Is(wa.invert(ol)).toFixed(n)),nf.attr("d",Ys),ku.attr("cy",Wa)}};vs=[tf.clientX,tf.clientY],window.addEventListener("mousemove",Qa);const Ds=()=>LP(this,void 0,void 0,function*(){if(T.attr("cursor","default"),T.removeEventListener("mouseup",Ds),window.removeEventListener("mousemove",Qa),Vs(vh.attr("text")))return;const us=Number(vh.attr("text"));H=yield Cl(Qi,us,zp,[wn]),vh.remove(),nf.remove(),gt(Rt)});T.addEventListener("mouseup",Ds)}),Ke.appendChild(ku)}};z.forEach((Rt,kt)=>{X[0]===kt&&gt(Rt),Rt.addEventListener("click",ut),Rt.addEventListener("mouseenter",s7),Rt.addEventListener("mouseleave",l7)});const Xt=Rt=>{const kt=Rt==null?void 0:Rt.target;(!kt||kt.name!==NP&&!z.includes(kt))&&(X=[],mt(),Ke.removeChildren())};return v.on("element-point:select",ct),v.on("element-point:unselect",Xt),T.addEventListener("mousedown",Xt),()=>{Ke.remove(),v.off("element-point:select",ct),v.off("element-point:unselect",Xt),T.removeEventListener("mousedown",Xt),z.forEach(Rt=>{Rt.removeEventListener("click",ut),Rt.removeEventListener("mouseenter",s7),Rt.removeEventListener("mouseleave",l7)})}}}var ute=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const h7=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{x:n=0,y:r=0,width:i,height:s,data:l}=e;return t.map(c=>{var{data:h,x:p,y:v,width:y,height:b}=c,T=ute(c,["data","x","y","width","height"]);return Object.assign(Object.assign({},T),{data:RM(h,l),x:p!=null?p:n,y:v!=null?v:r,width:y!=null?y:i,height:b!=null?b:s})})};h7.props={};var cte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const d7=()=>e=>{const{children:t}=e;if(!Array.isArray(t))return[];const{direction:n="row",ratio:r=t.map(()=>1),padding:i=0,data:s}=e,[l,c,h,p]=n==="col"?["y","height","width","x"]:["x","width","height","y"],v=r.reduce((R,I)=>R+I),y=e[c]-i*(t.length-1),b=r.map(R=>y*(R/v)),T=[];let M=e[l]||0;for(let R=0;R<b.length;R+=1){const I=t[R],{data:N}=I,z=cte(I,["data"]),H=RM(N,s);T.push(Object.assign({[l]:M,[c]:b[R],[p]:e[p]||0,[h]:e[h],data:H},z)),M+=b[R]+i}return T};d7.props={};class yE{constructor(t){this.$value=t}static of(t){return new yE(t)}call(t,...n){return this.$value=t(this.$value,...n),this}value(){return this.$value}}var fte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const hte=yb(e=>{const{encode:t,data:n,scale:r,shareSize:i=!1}=e,{x:s,y:l}=t,c=(h,p)=>{var v;if(h===void 0||!i)return{};const y=Nu(n,M=>M[h]),b=((v=r==null?void 0:r[p])===null||v===void 0?void 0:v.domain)||Array.from(y.keys()),T=b.map(M=>y.has(M)?y.get(M).length:1);return{domain:b,flex:T}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:s===void 0?null:{position:"top"}},s===void 0&&{paddingInner:0}),c(s,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:l===void 0?null:{position:"right"}},l===void 0&&{paddingInner:0}),c(l,"y"))}}}),BP=yb(e=>{const{data:t,scale:n}=e,r=[e];let i,s,l;for(;r.length;){const y=r.shift(),{children:b,encode:T={},scale:M={},legend:R={}}=y,{color:I}=T,{color:N}=M,{color:z}=R;I!==void 0&&(i=I),N!==void 0&&(s=N),z!==void 0&&(l=z),Array.isArray(b)&&r.push(...b)}const c=()=>{var y;const b=(y=n==null?void 0:n.color)===null||y===void 0?void 0:y.domain;if(b!==void 0)return[b];if(i===void 0)return[void 0];const T=typeof i=="function"?i:R=>R[i],M=t.map(T);return M.some(R=>typeof R=="number")?[ig(M)]:[Array.from(new Set(M)),"ordinal"]},h=typeof i=="string"?i:"",[p,v]=c();return{encode:{color:i},scale:{color:hi({},s,{domain:p,type:v})},legend:{color:hi({title:h},l)}}}),kP=yb(()=>({animate:{enterType:"fadeIn"}})),zP=_b(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),UP=_b(()=>({type:"cell"})),p7=_b(e=>{const{data:t}=e;return{data:{type:"inline",value:t,transform:[{type:"custom",callback:()=>{const{data:r,encode:i}=e,{x:s,y:l}=i,c=s?Array.from(new Set(r.map(v=>v[s]))):[],h=l?Array.from(new Set(r.map(v=>v[l]))):[];return(()=>{if(c.length&&h.length){const v=[];for(const y of c)for(const b of h)v.push({[s]:y,[l]:b});return v}if(c.length)return c.map(v=>({[s]:v}));if(h.length)return h.map(v=>({[l]:v}))})()}}]}}}),v7=_b((e,t=dte,n=pte,r=vte,i={})=>{const{data:s,encode:l,children:c,scale:h,x:p=0,y:v=0,shareData:y=!1,key:b}=e,{value:T}=s,{x:M,y:R}=l,{color:I}=h,{domain:N}=I;return{children:(H,X,Y)=>{const{x:ne,y:pe}=X,{paddingLeft:ye,paddingTop:De,marginLeft:Xe,marginTop:Ke}=Y,{domain:mt}=ne.getOptions(),{domain:Qe}=pe.getOptions(),ut=eg(H),ct=H.map(t),gt=H.map(({x:or,y:ir})=>[ne.invert(or),pe.invert(ir)]),Rt=gt.map(([or,ir])=>Zr=>{const{[M]:Ri,[R]:Qi}=Zr;return(M!==void 0?Ri===or:!0)&&(R!==void 0?Qi===ir:!0)}).map(or=>T.filter(or)),kt=y?Tl(Rt,or=>or.length):void 0,wn=gt.map(([or,ir])=>({columnField:M,columnIndex:mt.indexOf(or),columnValue:or,columnValuesLength:mt.length,rowField:R,rowIndex:Qe.indexOf(ir),rowValue:ir,rowValuesLength:Qe.length})),zn=wn.map(or=>Array.isArray(c)?c:[c(or)].flat(1));return ut.flatMap(or=>{const[ir,Zr,Ri,Qi]=ct[or],Qr=wn[or],ei=Rt[or];return zn[or].map(uo=>{var Jo,wa,{scale:ja,key:Va,facet:vs=!0,axis:Cl={},legend:ss={}}=uo,Is=fte(uo,["scale","key","facet","axis","legend"]);const ku=((Jo=ja==null?void 0:ja.y)===null||Jo===void 0?void 0:Jo.guide)||Cl.y,tf=((wa=ja==null?void 0:ja.x)===null||wa===void 0?void 0:wa.guide)||Cl.x,zp={x:{tickCount:M?5:void 0},y:{tickCount:R?5:void 0}},nf=vs?ei:ei.length===0?[]:T,vh={color:{domain:N}},Qa={x:m7(tf,n)(Qr,nf),y:m7(ku,r)(Qr,nf)};return Object.assign(Object.assign({key:`${Va}-${or}`,data:nf,margin:0,x:ir+ye+p+Xe,y:Zr+De+v+Ke,parentKey:b,width:Ri,height:Qi,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!nf.length,dataDomain:kt,scale:hi(zp,ja,vh),axis:hi({},Cl,Qa),legend:!1},Is),i)})})}}});function dte(e){const{points:t}=e;return IM(t)}function oA(e,t){return t.length?hi({title:!1,tick:null,label:null},e):hi({title:!1,tick:null,label:null,grid:null},e)}function pte(e){return(t,n)=>{const{rowIndex:r,rowValuesLength:i,columnIndex:s,columnValuesLength:l}=t;if(r!==i-1)return oA(e,n);const c=s!==l-1?!1:void 0,h=n.length?void 0:null;return hi({title:c,grid:h},e)}}function vte(e){return(t,n)=>{const{rowIndex:r,columnIndex:i}=t;if(i!==0)return oA(e,n);const s=r!==0?!1:void 0,l=n.length?void 0:null;return hi({title:s,grid:l},e)}}function m7(e,t){return typeof e=="function"?e:e===null||e===!1?()=>null:t(e)}const g7=()=>e=>[yE.of(e).call(UP).call(BP).call(kP).call(hte).call(zP).call(p7).call(v7).value()];g7.props={};var jP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const mte=yb(e=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),gte=_b(e=>{const{data:t,children:n,x:r=0,y:i=0,key:s}=e;return{children:(c,h,p)=>{const{x:v,y}=h,{paddingLeft:b,paddingTop:T,marginLeft:M,marginTop:R}=p,{domain:I}=v.getOptions(),{domain:N}=y.getOptions(),z=eg(c),H=c.map(({points:pe})=>IM(pe)),X=c.map(({x:pe,y:ye})=>[v.invert(pe),y.invert(ye)]),Y=X.map(([pe,ye])=>({columnField:pe,columnIndex:I.indexOf(pe),columnValue:pe,columnValuesLength:I.length,rowField:ye,rowIndex:N.indexOf(ye),rowValue:ye,rowValuesLength:N.length})),ne=Y.map(pe=>Array.isArray(n)?n:[n(pe)].flat(1));return z.flatMap(pe=>{const[ye,De,Xe,Ke]=H[pe],[mt,Qe]=X[pe],ut=Y[pe];return ne[pe].map(gt=>{var Xt,Rt;const{scale:kt,key:wn,encode:zn,axis:or,interaction:ir}=gt,Zr=jP(gt,["scale","key","encode","axis","interaction"]),Ri=(Xt=kt==null?void 0:kt.y)===null||Xt===void 0?void 0:Xt.guide,Qi=(Rt=kt==null?void 0:kt.x)===null||Rt===void 0?void 0:Rt.guide,Qr={x:{facet:!1},y:{facet:!1}},ei={x:_te(Qi)(ut,t),y:bte(Ri)(ut,t)},Po={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:t,parentKey:s,key:`${wn}-${pe}`,x:ye+b+r+M,y:De+T+i+R,width:Xe,height:Ke,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:hi(Qr,kt),axis:hi(Po,or,ei),legend:!1,encode:hi({},zn,{x:mt,y:Qe}),interaction:hi({},ir,{legendFilter:!1})},Zr)})})}}}),yte=_b(e=>{const{encode:t}=e,n=jP(e,["encode"]),{position:r=[],x:i=r,y:s=[...r].reverse()}=t,l=jP(t,["position","x","y"]),c=[];for(const h of[i].flat(1))for(const p of[s].flat(1))c.push({$x:h,$y:p});return Object.assign(Object.assign({},n),{data:c,encode:Object.assign(Object.assign({},l),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[s].flat(1).length===1&&{y:{paddingInner:0}})})});function _te(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{rowIndex:r,rowValuesLength:i}=t;if(r!==i-1)return oA(e,n)}}function bte(e){return typeof e=="function"?e:e===null?()=>null:(t,n)=>{const{columnIndex:r}=t;if(r!==0)return oA(e,n)}}const xte=()=>e=>[yE.of(e).call(UP).call(BP).call(gte).call(yte).call(kP).call(zP).call(mte).value()];var Ete=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ste=yb(e=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),wte=yb(e=>({coordinate:{type:"polar"}})),Tte=e=>{const{encode:t}=e,n=Ete(e,["encode"]),{position:r}=t;return Object.assign(Object.assign({},n),{encode:{x:r}})};function y7(e){return t=>null}function Ate(e){const{points:t}=e,[n,r,i,s]=t,l=sc(n,s),c=Ic(n,s),h=Ic(r,i),p=RD(c,h),v=1/Math.sin(p/2),y=l/(1+v),b=y*Math.sqrt(2),[T,M]=i,I=bb(c)+p/2,N=y*v,z=T+N*Math.sin(I),H=M-N*Math.cos(I);return[z-b/2,H-b/2,b,b]}const Cte=()=>e=>[yE.of(e).call(UP).call(Tte).call(BP).call(wte).call(p7).call(v7,Ate,y7,y7,{frame:!1}).call(kP).call(zP).call(Ste).value()];function Ote(e,t,n){const i=n,s=[0,i],l=[-i+1,-0+1];if(e==="normal")return s;if(e==="reverse")return l;if(e==="alternate")return t%2===0?s:l;if(e==="reverse-alternate")return t%2===0?l:s}function Mte(e,t,n){const r=[e];for(;r.length;){const i=r.pop();i.animate=hi({enter:{duration:t},update:{duration:t,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:t}},i.animate||{});const{children:s}=i;Array.isArray(s)&&r.push(...s)}return e}const _7=()=>e=>{const{children:t=[],duration:n=1e3,iterationCount:r=1,direction:i="normal",easing:s="ease-in-out-sine"}=e,l=t.length;if(!Array.isArray(t)||l===0)return[];const{key:c}=t[0],h=t.map(p=>Object.assign(Object.assign({},p),{key:c})).map(p=>Mte(p,n,s));return function*(){let p=0,v;for(;r==="infinite"||p<r;){const[y,b]=Ote(i,p,l);for(let T=y;T<b;T+=1){const M=Math.abs(T);v!==M&&(yield h[M]),v=M}p++}}};_7.props={};function _y(e,t,n){const{encode:r}=n;if(e===null)return[t];const i=Rte(e).map(l=>{var c;return[l,(c=il(r,l))===null||c===void 0?void 0:c[0]]}).filter(([,l])=>eu(l)),s=l=>i.map(([,c])=>c[l]).join("-");return Array.from(Nu(t,s).values())}function b7(e){return Array.isArray(e)?Dte(e):typeof e=="function"?Ite(e):e==="series"?Pte:e==="value"?Lte:e==="sum"?Nte:e==="maxIndex"?Fte:()=>null}function x7(e,t){for(const n of e)n.sort(t)}function E7(e,t){return(t==null?void 0:t.domain)||Array.from(new Set(e))}function Rte(e){return Array.isArray(e)?e:[e]}function Pte(e,t,n){return _E(r=>n[r])}function Ite(e){return(t,n,r)=>_E(i=>e(t[i]))}function Dte(e){return(t,n,r)=>(i,s)=>e.reduce((l,c)=>l!==0?l:Dc(t[i][c],t[s][c]),0)}function Lte(e,t,n){return _E(r=>t[r])}function Nte(e,t,n){const r=eg(e),i=Array.from(Nu(r,l=>n[+l]).entries()),s=new Map(i.map(([l,c])=>[l,c.reduce((h,p)=>h+ +t[p])]));return _E(l=>s.get(n[l]))}function Fte(e,t,n){const r=eg(e),i=Array.from(Nu(r,l=>n[+l]).entries()),s=new Map(i.map(([l,c])=>[l,Eb(c,h=>t[h])]));return _E(l=>s.get(n[l]))}function _E(e){return(t,n)=>Dc(e(t),e(n))}const S7=(e={})=>{const{groupBy:t="x",orderBy:n=null,reverse:r=!1,y:i="y",y1:s="y1",series:l=!0}=e;return(c,h)=>{const{data:p,encode:v,style:y={}}=h,[b,T]=il(v,"y"),[M,R]=il(v,"y1"),[I]=l?tE(v,"series","color"):il(v,"color"),N=_y(t,c,h),H=b7(n)(p,b,I);H&&x7(N,H);const X=new Array(c.length),Y=new Array(c.length),ne=new Array(c.length),pe=[],ye=[];for(const Qe of N){r&&Qe.reverse();const ut=M?+M[Qe[0]]:0,ct=[],gt=[];for(const ir of Qe){const Zr=ne[ir]=+b[ir]-ut;Zr<0?gt.push(ir):Zr>=0&&ct.push(ir)}const Xt=ct.length>0?ct:gt,Rt=gt.length>0?gt:ct;let kt=ct.length-1,wn=0;for(;kt>0&&b[Xt[kt]]===0;)kt--;for(;wn<Rt.length-1&&b[Rt[wn]]===0;)wn++;pe.push(Xt[kt]),ye.push(Rt[wn]);let zn=ut;for(const ir of gt.reverse()){const Zr=ne[ir];zn=X[ir]=(Y[ir]=zn)+Zr}let or=ut;for(const ir of ct){const Zr=ne[ir];Zr>0?or=X[ir]=(Y[ir]=or)+Zr:X[ir]=Y[ir]=or}}const De=new Set(pe),Xe=new Set(ye),Ke=i==="y"?X:Y,mt=s==="y"?X:Y;return[c,hi({},h,{encode:{y0:PT(b,T),y:Bu(Ke,T),y1:Bu(mt,R)},style:Object.assign({first:(Qe,ut)=>De.has(ut),last:(Qe,ut)=>Xe.has(ut)},y)})]}};S7.props={};function w7(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function Bte(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let l of e)l!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,s+=r*(l-i));else{let l=-1;for(let c of e)(c=t(c,++l,e))!=null&&(c=+c)>=c&&(r=c-i,i+=r/++n,s+=r*(c-i))}if(n>1)return s/(n-1)}function T7(e,t){const n=Bte(e,t);return n&&Math.sqrt(n)}function kte(e,t,n){const r=w7(e),i=T7(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}var A7=Array.prototype,zte=A7.slice,X0e=A7.map;function VP(e){return()=>e}const Ute=Math.sqrt(50),jte=Math.sqrt(10),Vte=Math.sqrt(2);function aA(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=Ute?10:s>=jte?5:s>=Vte?2:1;let c,h,p;return i<0?(p=Math.pow(10,-i)/l,c=Math.round(e*p),h=Math.round(t*p),c/p<e&&++c,h/p>t&&--h,p=-p):(p=Math.pow(10,i)*l,c=Math.round(e/p),h=Math.round(t/p),c*p<e&&++c,h*p>t&&--h),h<c&&.5<=n&&n<2?aA(e,t,n*2):[c,h,p]}function Hte(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?aA(t,e,n):aA(e,t,n);if(!(s>=i))return[];const c=s-i+1,h=new Array(c);if(r)if(l<0)for(let p=0;p<c;++p)h[p]=(s-p)/-l;else for(let p=0;p<c;++p)h[p]=(s-p)*l;else if(l<0)for(let p=0;p<c;++p)h[p]=(i+p)/-l;else for(let p=0;p<c;++p)h[p]=(i+p)*l;return h}function bE(e,t,n){return t=+t,e=+e,n=+n,aA(e,t,n)[2]}function Y0e(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?bE(t,e,n):bE(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Gte(e,t,n){let r;for(;;){const i=bE(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function Wte(e){return Math.max(1,Math.ceil(Math.log(w7(e))/Math.LN2)+1)}function Zte(){var e=A_,t=ig,n=Wte;function r(i){Array.isArray(i)||(i=Array.from(i));var s,l=i.length,c,h,p=new Array(l);for(s=0;s<l;++s)p[s]=e(i[s],s,i);var v=t(p),y=v[0],b=v[1],T=n(p,y,b);if(!Array.isArray(T)){const H=b,X=+T;if(t===ig&&([y,b]=Gte(y,b,X)),T=Hte(y,b,X),T[0]<=y&&(h=bE(y,b,X)),T[T.length-1]>=b)if(H>=b&&t===ig){const Y=bE(y,b,X);isFinite(Y)&&(Y>0?b=(Math.floor(b/Y)+1)*Y:Y<0&&(b=(Math.ceil(b*-Y)+1)/-Y))}else T.pop()}for(var M=T.length,R=0,I=M;T[R]<=y;)++R;for(;T[I-1]>b;)--I;(R||I<M)&&(T=T.slice(R,I),M=I-R);var N=new Array(M+1),z;for(s=0;s<=M;++s)z=N[s]=[],z.x0=s>0?T[s-1]:y,z.x1=s<M?T[s]:b;if(isFinite(h)){if(h>0)for(s=0;s<l;++s)(c=p[s])!=null&&y<=c&&c<=b&&N[Math.min(M,Math.floor((c-y)/h))].push(i[s]);else if(h<0){for(s=0;s<l;++s)if((c=p[s])!=null&&y<=c&&c<=b){const H=Math.floor((y-c)*h);N[Math.min(M,H+(T[H]<=c))].push(i[s])}}}else for(s=0;s<l;++s)(c=p[s])!=null&&y<=c&&c<=b&&N[wW(T,c,0,M)].push(i[s]);return N}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:VP(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:VP([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:VP(Array.isArray(i)?zte.call(i):i),r):n},r}function HP(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?V2:$D(i);r>n;){if(r-n>600){const h=r-n+1,p=t-n+1,v=Math.log(h),y=.5*Math.exp(2*v/3),b=.5*Math.sqrt(v*y*(h-y)/h)*(p-h/2<0?-1:1),T=Math.max(n,Math.floor(t-p*y/h+b)),M=Math.min(r,Math.floor(t+(h-p)*y/h+b));HP(e,t,T,M,i)}const s=e[t];let l=n,c=r;for(xE(e,n,t),i(e[r],s)>0&&xE(e,n,r);l<c;){for(xE(e,l,c),++l,--c;i(e[l],s)<0;)++l;for(;i(e[c],s)>0;)--c}i(e[n],s)===0?xE(e,n,c):(++c,xE(e,c,r)),c<=t&&(n=c+1),t<=c&&(r=c-1)}return e}function xE(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Xte(e,t=Dc){let n,r=!1;if(t.length===1){let i;for(const s of e){const l=t(s);(r?Dc(l,i)>0:Dc(l,l)===0)&&(n=s,i=l,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function sA(e,t,n){if(e=Float64Array.from(bW(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return i0(e);if(t>=1)return Tl(e);var r,i=(r-1)*t,s=Math.floor(i),l=Tl(HP(e,s).subarray(0,s+1)),c=i0(e.subarray(s+1));return l+(c-l)*(i-s)}}function $0e(e,t,n=number){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),c=+n(e[s+1],s+1,e);return l+(c-l)*(i-s)}}function Yte(e,t,n=jM){if(!isNaN(t=+t)){if(r=Float64Array.from(e,(c,h)=>jM(n(e[h],h,e))),t<=0)return JT(r);if(t>=1)return Eb(r);var r,i=Uint32Array.from(e,(c,h)=>h),s=r.length-1,l=Math.floor(s*t);return HP(i,l,0,s,(c,h)=>V2(r[c],r[h])),l=Xte(i.subarray(0,l+1),c=>r[c]),l>=0?l:-1}}function GP(e,t){return sA(e,.5,t)}function $te(e,t){return Yte(e,.5,t)}var qte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function by(e){return t=>t===null?e:`${e} of ${t}`}function Kte(e){if(typeof e=="function")return[e,null];const n={mean:Qte,max:ene,count:nne,first:ine,last:one,sum:rne,min:tne,median:Jte}[e];if(!n)throw new Error(`Unknown reducer: ${e}.`);return n()}function Qte(){const e=(n,r)=>mE(n,i=>+r[i]),t=by("mean");return[e,t]}function Jte(){const e=(n,r)=>GP(n,i=>+r[i]),t=by("median");return[e,t]}function ene(){const e=(n,r)=>Tl(n,i=>+r[i]),t=by("max");return[e,t]}function tne(){const e=(n,r)=>i0(n,i=>+r[i]),t=by("min");return[e,t]}function nne(){const e=(n,r)=>n.length,t=by("count");return[e,t]}function rne(){const e=(n,r)=>Xd(n,i=>+r[i]),t=by("sum");return[e,t]}function ine(){const e=(n,r)=>r[n[0]],t=by("first");return[e,t]}function one(){const e=(n,r)=>r[n[n.length-1]],t=by("last");return[e,t]}const WP=(e={})=>{const{groupBy:t}=e,n=qte(e,["groupBy"]);return(r,i)=>{const{data:s,encode:l}=i,c=t(r,i);if(!c)return[r,i];const h=(T,M)=>{if(T)return T;const{from:R}=M;if(!R)return T;const[,I]=il(l,R);return I},p=Object.entries(n).map(([T,M])=>{const[R,I]=Kte(M),[N,z]=il(l,T),H=h(z,M),X=c.map(Y=>R(Y,N!=null?N:s));return[T,Object.assign(Object.assign({},zq(X,(I==null?void 0:I(H))||H)),{aggregate:!0})]}),v=Object.keys(l).map(T=>{const[M,R]=il(l,T),I=c.map(N=>M[N[0]]);return[T,Bu(I,R)]}),y=c.map(T=>s[T[0]]);return[eg(c),hi({},i,{data:y,encode:Object.fromEntries([...v,...p])})]}};WP.props={};var ane=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const C7="thresholds";function sne(e){const[t,n]=ig(e);return Math.min(200,kte(e,t,n))}const ZP=(e={})=>{const{groupChannels:t=["color"],binChannels:n=["x","y"]}=e,r=ane(e,["groupChannels","binChannels"]),i={},s=(l,c)=>{const{encode:h}=c,p=n.map(M=>{const[R]=il(h,M);return R}),v=Eo(r,C7),y=l.filter(M=>p.every(R=>eu(R[M]))),b=[...t.map(M=>{const[R]=il(h,M);return R}).filter(eu).map(M=>R=>M[R]),...n.map((M,R)=>{const I=p[R],N=v[M]||sne(I),z=Zte().thresholds(N).value(X=>+I[X])(y),H=new Map(z.flatMap(X=>{const{x0:Y,x1:ne}=X,pe=`${Y},${ne}`;return X.map(ye=>[ye,pe])}));return i[M]=H,X=>H.get(X)})],T=M=>b.map(R=>R(M)).join("-");return Array.from(Nu(y,T).values())};return WP(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([l])=>!l.startsWith(C7)))),Object.fromEntries(n.flatMap(l=>{const c=([p])=>+i[l].get(p).split(",")[0],h=([p])=>+i[l].get(p).split(",")[1];return h.from=l,[[l,c],[`${l}1`,h]]}))),{groupBy:s}))};ZP.props={};const O7=(e={})=>{const{thresholds:t}=e;return ZP(Object.assign(Object.assign({},e),{thresholdsX:t,groupChannels:["color"],binChannels:["x"]}))};O7.props={};var lne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const M7=(e={})=>{const{groupBy:t="x",reverse:n=!1,orderBy:r,padding:i}=e,s=lne(e,["groupBy","reverse","orderBy","padding"]);return(l,c)=>{const{data:h,encode:p,scale:v}=c,{series:y}=v,[b]=il(p,"y"),[T]=tE(p,"series","color"),M=E7(T,y),R=_y(t,l,c),N=b7(r)(h,b,T);N&&x7(R,N);const z=new Array(l.length);for(const H of R){n&&H.reverse();for(let X=0;X<H.length;X++)z[H[X]]=M[X]}return[l,hi({},c,{scale:{series:{domain:M,paddingInner:i}},encode:{series:Bu(z)}})]}};M7.props={};function lA(e,t,n){if(e===null)return[-.5,.5];const r=E7(e,t),s=new py({domain:r,range:[0,1],padding:n}).getBandWidth();return[-s/2,s/2]}function uA(e,t,n){return t*(1-e)+n*e}const R7=(e={})=>{const{padding:t=0,paddingX:n=t,paddingY:r=t,random:i=Math.random}=e;return(s,l)=>{const{encode:c,scale:h}=l,{x:p,y:v}=h,[y]=il(c,"x"),[b]=il(c,"y"),T=lA(y,p,n),M=lA(b,v,r),R=s.map(()=>uA(i(),...M)),I=s.map(()=>uA(i(),...T));return[s,hi({scale:{x:{padding:.5},y:{padding:.5}}},l,{encode:{dy:Bu(R),dx:Bu(I)}})]}};R7.props={};const P7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:s,scale:l}=i,{x:c}=l,[h]=il(s,"x"),p=lA(h,c,t),v=r.map(()=>uA(n(),...p));return[r,hi({scale:{x:{padding:.5}}},i,{encode:{dx:Bu(v)}})]}};P7.props={};const I7=(e={})=>{const{padding:t=0,random:n=Math.random}=e;return(r,i)=>{const{encode:s,scale:l}=i,{y:c}=l,[h]=il(s,"y"),p=lA(h,c,t),v=r.map(()=>uA(n(),...p));return[r,hi({scale:{y:{padding:.5}}},i,{encode:{dy:Bu(v)}})]}};I7.props={};var une=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const D7=(e={})=>{const{groupBy:t="x"}=e;return(n,r)=>{const{encode:i}=r,{x:s}=i,l=une(i,["x"]),c=Object.entries(l).filter(([b])=>b.startsWith("y")).map(([b])=>[b,il(i,b)[0]]),h=c.map(([b])=>[b,new Array(n.length)]),p=_y(t,n,r),v=new Array(p.length);for(let b=0;b<p.length;b++){const M=p[b].flatMap(N=>c.map(([,z])=>+z[N])),[R,I]=ig(M);v[b]=(R+I)/2}const y=Math.max(...v);for(let b=0;b<p.length;b++){const T=y-v[b],M=p[b];for(const R of M)for(let I=0;I<c.length;I++){const[,N]=c[I],[,z]=h[I];z[R]=+N[R]+T}}return[n,hi({},r,{encode:Object.fromEntries(h.map(([b,T])=>[b,Bu(T,il(i,b)[1])]))})]}};D7.props={};const L7=(e={})=>{const{groupBy:t="x",series:n=!0}=e;return(r,i)=>{const{encode:s}=i,[l]=il(s,"y"),[c,h]=il(s,"y1"),[p]=n?tE(s,"series","color"):il(s,"color"),v=_y(t,r,i),y=new Array(r.length);for(const b of v){const T=b.map(M=>+l[M]);for(let M=0;M<b.length;M++){const R=b[M],I=Math.max(...T.filter((N,z)=>z!==M));y[R]=l[R]>I?I:l[R]}}return[r,hi({},i,{encode:{y1:Bu(y,h)}})]}};L7.props={};const N7=e=>{const{groupBy:t=["x"],reducer:n=(l,c)=>c[l[0]],orderBy:r=null,reverse:i=!1,duration:s}=e;return(l,c)=>{const{encode:h}=c,v=(Array.isArray(t)?t:[t]).map(I=>[I,il(h,I)[0]]);if(v.length===0)return[l,c];let y=[l];for(const[,I]of v){const N=[];for(const z of y){const H=Array.from(Nu(z,X=>I[X]).values());N.push(...H)}y=N}if(r){const[I]=il(h,r);I&&y.sort((N,z)=>n(N,I)-n(z,I)),i&&y.reverse()}const b=(s||3e3)/y.length,[T]=s?[hy(l,b)]:tE(h,"enterDuration",hy(l,b)),[M]=tE(h,"enterDelay",hy(l,0)),R=new Array(l.length);for(let I=0,N=0;I<y.length;I++){const z=y[I],H=Tl(z,X=>+T[X]);for(const X of z)R[X]=+M[X]+N;N+=H}return[l,hi({},c,{encode:{enterDuration:IT(T),enterDelay:IT(R)}})]}};N7.props={};var cne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fne(e){return typeof e=="function"?e:{min:(n,r)=>i0(n,i=>r[+i]),max:(n,r)=>Tl(n,i=>r[+i]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>mE(n,i=>r[+i]),median:(n,r)=>GP(n,i=>r[+i]),sum:(n,r)=>Xd(n,i=>r[+i]),deviation:(n,r)=>T7(n,i=>r[+i])}[e]||Tl}const F7=(e={})=>{const{groupBy:t="x",basis:n="max"}=e;return(r,i)=>{const{encode:s,tooltip:l}=i,{x:c}=s,h=cne(s,["x"]),p=Object.entries(h).filter(([R])=>R.startsWith("y")).map(([R])=>[R,il(s,R)[0]]),[,v]=p.find(([R])=>R==="y"),y=p.map(([R])=>[R,new Array(r.length)]),b=_y(t,r,i),T=fne(n);for(const R of b){const I=T(R,v);for(const N of R)for(let z=0;z<p.length;z++){const[,H]=p[z],[,X]=y[z];X[N]=+H[N]/I}}const M=Sv(l)||(l==null?void 0:l.items)&&(l==null?void 0:l.items.length)!==0;return[r,hi({},i,Object.assign({encode:Object.fromEntries(y.map(([R,I])=>[R,Bu(I,il(s,R)[1])]))},!M&&s.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};F7.props={};function B7(e,t){return[e[0]]}function hne(e,t){const n=e.length-1;return[e[n]]}function dne(e,t){const n=Eb(e,r=>t[r]);return[e[n]]}function pne(e,t){const n=JT(e,r=>t[r]);return[e[n]]}function vne(e){return typeof e=="function"?e:{first:B7,last:hne,max:dne,min:pne}[e]||B7}const cA=(e={})=>{const{groupBy:t="series",channel:n,selector:r}=e;return(i,s)=>{const{encode:l}=s,c=_y(t,i,s),[h]=il(l,n),p=vne(r);return[c.flatMap(v=>p(v,h)),s]}};cA.props={};var mne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const k7=(e={})=>{const{selector:t}=e,n=mne(e,["selector"]);return cA(Object.assign({channel:"x",selector:t},n))};k7.props={};var gne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const z7=(e={})=>{const{selector:t}=e,n=gne(e,["selector"]);return cA(Object.assign({channel:"y",selector:t},n))};z7.props={};var yne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const EE=(e={})=>{const{channels:t=["x","y"]}=e,n=yne(e,["channels"]),r=(i,s)=>_y(t,i,s);return WP(Object.assign(Object.assign({},n),{groupBy:r}))};EE.props={};const U7=(e={})=>EE(Object.assign(Object.assign({},e),{channels:["x","color","series"]}));U7.props={};const j7=(e={})=>EE(Object.assign(Object.assign({},e),{channels:["y","color","series"]}));j7.props={};const V7=(e={})=>EE(Object.assign(Object.assign({},e),{channels:["color"]}));V7.props={};function _ne(e,t,n){return(t.length!==2?ag(sb(e,t,n),([r,i],[s,l])=>Dc(i,l)||Dc(r,s)):ag(Nu(e,n),([r,i],[s,l])=>t(i,l)||Dc(r,s))).map(([r])=>r)}var H7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function bne(e,t,n){const{by:r=e,reducer:i="max"}=t,[s]=il(n,r);if(typeof i=="function")return l=>i(l,s);if(i==="max")return l=>Tl(l,c=>+s[c]);if(i==="min")return l=>i0(l,c=>+s[c]);if(i==="sum")return l=>Xd(l,c=>+s[c]);if(i==="median")return l=>GP(l,c=>+s[c]);if(i==="mean")return l=>mE(l,c=>+s[c]);if(i==="first")return l=>s[l[0]];if(i==="last")return l=>s[l[l.length-1]];throw new Error(`Unknown reducer: ${i}`)}function xne(e,t,n){const{reverse:r,channel:i}=n,{encode:s}=t,[l]=il(s,i),c=ag(e,h=>l[h]);return r&&c.reverse(),[c,t]}function Ene(e,t,n){if(!Array.isArray(n))return e;const r=new Set(n);return e.filter(i=>r.has(t[i]))}function Sne(e,t,n){var r;const{reverse:i,slice:s,channel:l}=n,c=H7(n,["reverse","slice","channel"]),{encode:h,scale:p={}}=t,v=(r=p[l])===null||r===void 0?void 0:r.domain,[y]=il(h,l),b=bne(l,c,h),T=Ene(e,y,v),M=_ne(T,b,N=>y[N]);i&&M.reverse();const R=typeof s=="number"?[0,s]:s,I=s?M.slice(...R):M;return[e,hi(t,{scale:{[l]:{domain:I}}})]}const fA=(e={})=>{const{reverse:t=!1,slice:n,channel:r,ordinal:i=!0}=e,s=H7(e,["reverse","slice","channel","ordinal"]);return(l,c)=>i?Sne(l,c,Object.assign({reverse:t,slice:n,channel:r},s)):xne(l,c,Object.assign({reverse:t,slice:n,channel:r},s))};fA.props={};const G7=(e={})=>fA(Object.assign(Object.assign({},e),{channel:"x"}));G7.props={};const W7=(e={})=>fA(Object.assign(Object.assign({},e),{channel:"y"}));W7.props={};const Z7=(e={})=>fA(Object.assign(Object.assign({},e),{channel:"color"}));Z7.props={};function wne(e,t){return typeof t=="string"?e.map(n=>n[t]):e.map(t)}function Tne(e,t){if(typeof e=="function")return n=>e(n,t);if(e==="sum")return n=>Xd(n,r=>+t[r]);throw new Error(`Unknown reducer: ${e}`)}const X7=(e={})=>{const{field:t,channel:n="y",reducer:r="sum"}=e;return(i,s)=>{const{data:l,encode:c}=s,[h]=il(c,"x"),p=t?wne(l,t):il(c,n)[0],v=Tne(r,p),y=Zd(i,v,b=>h[b]).map(b=>b[1]);return[i,hi({},s,{scale:{x:{flex:y}}})]}};X7.props={};function Ane(e){const{padding:t=0,direction:n="col"}=e;return(r,i,s)=>{const l=r.length;if(l===0)return[];const{innerWidth:c,innerHeight:h}=s,p=h/c;let v=Math.ceil(Math.sqrt(i/p)),y=c/v,b=Math.ceil(i/v),T=b*y;for(;T>h;)v=v+1,y=c/v,b=Math.ceil(i/v),T=b*y;const M=h-b*y,R=b<=1?0:M/(b-1),[I,N]=b<=1?[(c-l*y)/(l-1),(h-y)/2]:[0,0];return r.map((z,H)=>{const[X,Y,ne,pe]=IM(z),ye=n==="col"?H%v:Math.floor(H/b),De=n==="col"?Math.floor(H/v):H%b,Xe=ye*y,Ke=(b-De-1)*y+M,mt=(y-t)/ne,Qe=(y-t)/pe,ut=Xe-X+I*ye+1/2*t,ct=Ke-Y-R*De-N+1/2*t;return`translate(${ut}, ${ct}) scale(${mt}, ${Qe})`})}}const Y7=e=>(t,n)=>[t,hi({},n,{modifier:Ane(e),axis:!1})];Y7.props={};function Cne(e,t,n,r){const i=e.length;if(r>=i||r===0)return e;const s=T=>t[e[T]]*1,l=T=>n[e[T]]*1,c=[],h=(i-2)/(r-2);let p=0,v,y,b;c.push(p);for(let T=0;T<r-2;T++){let M=0,R=0,I=Math.floor((T+1)*h)+1,N=Math.floor((T+2)*h)+1;N=Math.min(N,i);const z=N-I;for(;I<N;I++)M+=s(I),R+=l(I);M/=z,R/=z;let H=Math.floor((T+0)*h)+1;const X=Math.floor((T+1)*h)+1,Y=[s(p),l(p)];for(v=y=-1;H<X;H++)y=Math.abs((Y[0]-M)*(s(H)-Y[1])-(Y[0]-l(H))*(R-Y[0]))*.5,y>v&&(v=y,b=H);c.push(b),p=b}return c.push(i-1),c.map(T=>e[T])}function One(e){if(typeof e=="function")return e;if(e==="lttb")return Cne;const t={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,s)=>[r[JT(r,l=>s[l])]],max:(r,i,s)=>[r[Eb(r,l=>s[l])]],median:(r,i,s)=>[r[$te(r,l=>s[l])]]},n=t[e]||t.median;return(r,i,s,l)=>{const c=Math.max(1,Math.floor(r.length/l));return Mne(r,c).flatMap(p=>n(p,i,s))}}function Mne(e,t){const n=e.length,r=[];let i=0;for(;i<n;)r.push(e.slice(i,i+=t));return r}const $7=(e={})=>{const{strategy:t="median",thresholds:n=2e3,groupBy:r=["series","color"]}=e,i=One(t);return(s,l)=>{const{encode:c}=l,h=_y(r,s,l),[p]=il(c,"x"),[v]=il(c,"y");return[h.flatMap(y=>i(y,p,v,n)),l]}};$7.props={};function Rne(e){return typeof e=="object"?[e.value,e.ordinal]:[e,!0]}const q7=(e={})=>(t,n)=>{const{encode:r,data:i}=n,s=Object.entries(e).map(([v,y])=>{const[b]=il(r,v);if(!b)return null;const[T,M=!0]=Rne(y);if(typeof T=="function")return R=>T(b[R]);if(M){const R=Array.isArray(T)?T:[T];return R.length===0?null:I=>R.includes(b[I])}else{const[R,I]=T;return N=>b[N]>=R&&b[N]<=I}}).filter(eu);if(s.length===0)return[t,n];const l=v=>s.every(y=>y(v)),c=t.filter(l),h=c.map((v,y)=>y),p=Object.entries(r).map(([v,y])=>[v,Object.assign(Object.assign({},y),{value:h.map(b=>y.value[c[b]]).filter(b=>b!==void 0)})]);return[h,hi({},n,{encode:Object.fromEntries(p),data:c.map(v=>i[v])})]};q7.props={};var K7={},XP={},YP=34,SE=10,$P=13;function Q7(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Pne(e,t){var n=Q7(e);return function(r,i){return t(n(r),i,e)}}function J7(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Bp(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Ine(e){return e<0?"-"+Bp(-e,6):e>9999?"+"+Bp(e,6):Bp(e,4)}function Dne(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Ine(e.getUTCFullYear(),4)+"-"+Bp(e.getUTCMonth()+1,2)+"-"+Bp(e.getUTCDate(),2)+(i?"T"+Bp(t,2)+":"+Bp(n,2)+":"+Bp(r,2)+"."+Bp(i,3)+"Z":r?"T"+Bp(t,2)+":"+Bp(n,2)+":"+Bp(r,2)+"Z":n||t?"T"+Bp(t,2)+":"+Bp(n,2)+"Z":"")}function Lne(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(y,b){var T,M,R=i(y,function(I,N){if(T)return T(I,N-1);M=I,T=b?Pne(I,b):Q7(I)});return R.columns=M||[],R}function i(y,b){var T=[],M=y.length,R=0,I=0,N,z=M<=0,H=!1;y.charCodeAt(M-1)===SE&&--M,y.charCodeAt(M-1)===$P&&--M;function X(){if(z)return XP;if(H)return H=!1,K7;var ne,pe=R,ye;if(y.charCodeAt(pe)===YP){for(;R++<M&&y.charCodeAt(R)!==YP||y.charCodeAt(++R)===YP;);return(ne=R)>=M?z=!0:(ye=y.charCodeAt(R++))===SE?H=!0:ye===$P&&(H=!0,y.charCodeAt(R)===SE&&++R),y.slice(pe+1,ne-1).replace(/""/g,'"')}for(;R<M;){if((ye=y.charCodeAt(ne=R++))===SE)H=!0;else if(ye===$P)H=!0,y.charCodeAt(R)===SE&&++R;else if(ye!==n)continue;return y.slice(pe,ne)}return z=!0,y.slice(pe,M)}for(;(N=X())!==XP;){for(var Y=[];N!==K7&&N!==XP;)Y.push(N),N=X();b&&(Y=b(Y,I++))==null||T.push(Y)}return T}function s(y,b){return y.map(function(T){return b.map(function(M){return v(T[M])}).join(e)})}function l(y,b){return b==null&&(b=J7(y)),[b.map(v).join(e)].concat(s(y,b)).join(`
`)}function c(y,b){return b==null&&(b=J7(y)),s(y,b).join(`
`)}function h(y){return y.map(p).join(`
`)}function p(y){return y.map(v).join(e)}function v(y){return y==null?"":y instanceof Date?Dne(y):t.test(y+="")?'"'+y.replace(/"/g,'""')+'"':y}return{parse:r,parseRows:i,format:l,formatBody:c,formatRows:h,formatRow:p,formatValue:v}}function Nne(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Fne&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const Fne=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var Bne=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};const e9=e=>{const{value:t,format:n=t.split(".").pop(),delimiter:r=",",autoType:i=!0}=e;return()=>Bne(void 0,void 0,void 0,function*(){const s=yield fetch(t);if(n==="csv"){const l=yield s.text();return Lne(r).parse(l,i?Nne:im)}else if(n==="json")return yield s.json();throw new Error(`Unknown format: ${n}.`)})};e9.props={};const t9=e=>{const{value:t}=e;return()=>t};t9.props={};function kne(e,t){return e.map(n=>{if(Array.isArray(n)){const[r,i=t]=n;return[r,i]}return[n,t]})}const n9=e=>{const{fields:t=[]}=e,n=kne(t,!0);return r=>{const i=(s,l)=>n.reduce((c,[h,p=!0])=>c!==0?c:p?s[h]<l[h]?-1:+(s[h]!==l[h]):s[h]>l[h]?-1:+(s[h]!==l[h]),0);return[...r].sort(i)}};n9.props={};function q0e(e){return e!=null&&!Number.isNaN(e)}const r9=e=>{const{callback:t}=e;return n=>Array.isArray(n)?[...n].sort(t):n};r9.props={};function zne(e){return e!=null&&!Number.isNaN(e)}const i9=e=>{const{callback:t=zne}=e;return n=>n.filter(t)};i9.props={};function Une(e,t=[]){return t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{})}const o9=e=>{const{fields:t}=e;return n=>n.map(r=>Une(r,t))};o9.props={};function jne(e){return Object.keys(e).length===0}const a9=e=>t=>{if(!e||jne(e))return t;const n=r=>Object.entries(r).reduce((i,[s,l])=>(i[e[s]||s]=l,i),{});return t.map(n)};a9.props={};function Vne(e){return!e||Object.keys(e).length===0}const s9=e=>{const{fields:t,key:n="key",value:r="value"}=e;return i=>Vne(t)?i:i.flatMap(s=>t.map(l=>Object.assign(Object.assign({},s),{[n]:l,[r]:s[l]})))};s9.props={};const l9=e=>{const{start:t,end:n}=e;return r=>r.slice(t,n)};l9.props={};const u9=e=>{const{callback:t=im}=e;return n=>t(n)};u9.props={};const c9=e=>{const{callback:t=im}=e;return n=>Array.isArray(n)?n.map(t):n};c9.props={};function f9(e){return typeof e=="string"?t=>t[e]:e}const h9=e=>{const{join:t,on:n,select:r=[],as:i=r,unknown:s=NaN}=e,[l,c]=n,h=f9(c),p=f9(l),v=sb(t,([y])=>y,y=>h(y));return y=>y.map(b=>{const T=v.get(p(b));return Object.assign(Object.assign({},b),r.reduce((M,R,I)=>(M[i[I]]=T?T[R]:s,M),{}))})};h9.props={};var Hne=L(53843),Gne=L.n(Hne);function K0e(e){return e!=null&&!Number.isNaN(e)}const d9=e=>{const{field:t,groupBy:n,as:r=["y","size"],min:i,max:s,size:l=10,width:c}=e,[h,p]=r;return v=>Array.from(Nu(v,b=>n.map(T=>b[T]).join("-")).values()).map(b=>{const T=Gne().create(b.map(I=>I[t]),{min:i,max:s,size:l,width:c}),M=T.map(I=>I.x),R=T.map(I=>I.y);return Object.assign(Object.assign({},b[0]),{[h]:M,[p]:R})})};d9.props={};const p9=()=>e=>(console.log("G2 data section:",e),e);p9.props={};var Wne=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})};function Zne(e,t){return{set(n,r,i){if(t[n]===void 0)return this;const s=r?r.call(null,t[n]):t[n];return i?i.call(null,s):typeof e[n]=="function"?e[n](s):e[n]=s,this},setAsync(n,r,i){return Wne(this,void 0,void 0,function*(){if(t[n]===void 0)return this;const s=r?yield r.call(null,t[n]):t[n];return i?i.call(null,s):typeof e[n]=="function"?e[n](s):e[n]=s,this})}}}const qP=Math.PI/180,wE=64,hA=2048;function Xne(e){return e.text}function Yne(){return"serif"}function v9(){return"normal"}function $ne(e){return e.value}function qne(){return~~(Math.random()*2)*90}function Kne(){return 1}function Qne(){}function Jne(e,t,n,r){if(t.sprite)return;const i=e.context,s=e.ratio;i.clearRect(0,0,(wE<<5)/s,hA/s);let l=0,c=0,h=0;const p=n.length;for(--r;++r<p;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font;let b=i.measureText(t.text+"m").width*s,T=t.size<<1;if(t.rotate){const M=Math.sin(t.rotate*qP),R=Math.cos(t.rotate*qP),I=b*R,N=b*M,z=T*R,H=T*M;b=Math.max(Math.abs(I+H),Math.abs(I-H))+31>>5<<5,T=~~Math.max(Math.abs(N+z),Math.abs(N-z))}else b=b+31>>5<<5;if(T>h&&(h=T),l+b>=wE<<5&&(l=0,c+=h,h=0),c+T>=hA)break;i.translate((l+(b>>1))/s,(c+(T>>1))/s),t.rotate&&i.rotate(t.rotate*qP),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=b,t.height=T,t.xoff=l,t.yoff=c,t.x1=b>>1,t.y1=T>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=b}const v=i.getImageData(0,0,(wE<<5)/s,hA/s).data,y=[];for(;--r>=0;){if(t=n[r],!t.hasText)continue;const b=t.width,T=b>>5;let M=t.y1-t.y0;for(let N=0;N<M*T;N++)y[N]=0;if(l=t.xoff,l==null)return;c=t.yoff;let R=0,I=-1;for(let N=0;N<M;N++){for(let z=0;z<b;z++){const H=T*N+(z>>5),X=v[(c+N)*(wE<<5)+(l+z)<<2]?1<<31-z%32:0;y[H]|=X,R|=X}R?I=N:(t.y0++,M--,N--,c++)}t.y1=t.y0+I,t.sprite=y.slice(0,(t.y1-t.y0)*T)}}function ere(e,t,n){n>>=5;const r=e.sprite,i=e.width>>5,s=e.x-(i<<4),l=s&127,c=32-l,h=e.y1-e.y0;let p=(e.y+e.y0)*n+(s>>5),v;for(let y=0;y<h;y++){v=0;for(let b=0;b<=i;b++)if((v<<c|(b<i?(v=r[y*i+b])>>>l:0))&t[p+b])return!0;p+=n}return!1}function tre(e,t){const n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function nre(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function m9(e){const t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function rre(e){const n=4*e[0]/e[1];let r=0,i=0;return function(s){const l=s<0?-1:1;switch(Math.sqrt(1+4*l*s)-l&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4;break}return[r,i]}}function g9(e){const t=[];let n=-1;for(;++n<e;)t[n]=0;return t}function ire(){return document.createElement("canvas")}function xy(e){return typeof e=="function"?e:function(){return e}}const ore={archimedean:m9,rectangular:rre};function are(){let e=[256,256],t=Xne,n=Yne,r=$ne,i=v9,s=qne,l=Kne,c=m9,h=Math.random,p=Qne,v=[],y=null,b=1/0;const T=v9,M=ire,R={};R.start=function(){const[z,H]=e,X=I(M()),Y=R.board?R.board:g9((e[0]>>5)*e[1]),ne=v.length,pe=[],ye=v.map(function(mt,Qe,ut){return mt.text=t.call(this,mt,Qe,ut),mt.font=n.call(this,mt,Qe,ut),mt.style=T.call(this,mt,Qe,ut),mt.weight=i.call(this,mt,Qe,ut),mt.rotate=s.call(this,mt,Qe,ut),mt.size=~~r.call(this,mt,Qe,ut),mt.padding=l.call(this,mt,Qe,ut),mt}).sort(function(mt,Qe){return Qe.size-mt.size});let De=-1,Xe=R.board?[{x:0,y:0},{x:z,y:H}]:void 0;y&&clearInterval(y),y=setInterval(Ke,0),Ke();function Ke(){const mt=Date.now();for(;Date.now()-mt<b&&++De<ne;){const Qe=ye[De];Qe.x=z*(h()+.5)>>1,Qe.y=H*(h()+.5)>>1,Jne(X,Qe,ye,De),Qe.hasText&&N(Y,Qe,Xe)&&(p.call(null,"word",{cloud:R,word:Qe}),pe.push(Qe),Xe?R.hasImage||tre(Xe,Qe):Xe=[{x:Qe.x+Qe.x0,y:Qe.y+Qe.y0},{x:Qe.x+Qe.x1,y:Qe.y+Qe.y1}],Qe.x-=e[0]>>1,Qe.y-=e[1]>>1)}R._tags=pe,R._bounds=Xe,De>=ne&&(R.stop(),p.call(null,"end",{cloud:R,words:pe,bounds:Xe}))}return R},R.stop=function(){return y&&(clearInterval(y),y=null),R};function I(z){z.width=z.height=1;const H=Math.sqrt(z.getContext("2d").getImageData(0,0,1,1).data.length>>2);z.width=(wE<<5)/H,z.height=hA/H;const X=z.getContext("2d");return X.fillStyle=X.strokeStyle="red",X.textAlign="center",X.textBaseline="middle",{context:X,ratio:H}}function N(z,H,X){const Y=H.x,ne=H.y,pe=Math.sqrt(e[0]*e[0]+e[1]*e[1]),ye=c(e),De=h()<.5?1:-1;let Xe,Ke=-De,mt,Qe;for(;(Xe=ye(Ke+=De))&&(mt=~~Xe[0],Qe=~~Xe[1],!(Math.min(Math.abs(mt),Math.abs(Qe))>=pe));)if(H.x=Y+mt,H.y=ne+Qe,!(H.x+H.x0<0||H.y+H.y0<0||H.x+H.x1>e[0]||H.y+H.y1>e[1])&&(!X||!ere(H,z,e[0]))&&(!X||nre(H,X))){const ut=H.sprite,ct=H.width>>5,gt=e[0]>>5,Xt=H.x-(ct<<4),Rt=Xt&127,kt=32-Rt,wn=H.y1-H.y0;let zn,or=(H.y+H.y0)*gt+(Xt>>5);for(let ir=0;ir<wn;ir++){zn=0;for(let Zr=0;Zr<=ct;Zr++)z[or+Zr]|=zn<<kt|(Zr<ct?(zn=ut[ir*ct+Zr])>>>Rt:0);or+=gt}return delete H.sprite,!0}return!1}return R.createMask=z=>{const H=document.createElement("canvas"),[X,Y]=e;if(!X||!Y)return;const ne=X>>5,pe=g9((X>>5)*Y);H.width=X,H.height=Y;const ye=H.getContext("2d");ye.drawImage(z,0,0,z.width,z.height,0,0,X,Y);const De=ye.getImageData(0,0,X,Y).data;for(let Xe=0;Xe<Y;Xe++)for(let Ke=0;Ke<X;Ke++){const mt=ne*Xe+(Ke>>5),Qe=Xe*X+Ke<<2,ct=De[Qe]>=250&&De[Qe+1]>=250&&De[Qe+2]>=250?1<<31-Ke%32:0;pe[mt]|=ct}R.board=pe,R.hasImage=!0},R.timeInterval=function(z){b=z==null?1/0:z},R.words=function(z){v=z},R.size=function(z=[]){e=[+z[0],+z[1]]},R.text=function(z){t=xy(z)},R.font=function(z){n=xy(z)},R.fontWeight=function(z){i=xy(z)},R.rotate=function(z){s=xy(z)},R.spiral=function(z){c=ore[z]||z},R.fontSize=function(z){r=xy(z)},R.padding=function(z){l=xy(z)},R.random=function(z){h=xy(z)},R.on=function(z){p=xy(z)},R}var sre=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function c(v){try{p(r.next(v))}catch(y){l(y)}}function h(v){try{p(r.throw(v))}catch(y){l(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,h)}p((r=r.apply(e,t||[])).next())})},lre=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ure={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function cre(e){return new Promise((t,n)=>{if(e instanceof HTMLImageElement){t(e);return}if(typeof e=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=e,r.onload=()=>t(r),r.onerror=()=>{console.error(`'image ${e} load failed !!!'`),n()};return}n()})}function fre(e,t){if(typeof e=="function")return e;if(Array.isArray(e)){const[n,r]=e;if(!t)return()=>(r+n)/2;const[i,s]=t;return s===i?()=>(r+n)/2:({value:l})=>(r-n)/(s-i)*(l-i)+n}return()=>e}const y9=e=>t=>sre(void 0,void 0,void 0,function*(){const n=Object.assign({},ure,e),r=are();yield Zne(r,n).set("fontSize",N=>{const z=t.map(H=>H.value);return fre(N,[i0(z),Tl(z)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").setAsync("imageMask",cre,r.createMask),r.words([...t]);const i=r.start(),[s,l]=n.size,c=[{x:0,y:0},{x:s,y:l}],{_bounds:h=c,_tags:p,hasImage:v}=i,y=p.map(N=>{var{x:z,y:H,font:X}=N,Y=lre(N,["x","y","font"]);return Object.assign(Object.assign({},Y),{x:z+s/2,y:H+l/2,fontFamily:X})}),[{x:b,y:T},{x:M,y:R}]=h,I={text:"",value:0,opacity:0,fontSize:0};return y.push(Object.assign(Object.assign({},I),{x:v?0:b,y:v?0:T}),Object.assign(Object.assign({},I),{x:v?s:M,y:v?l:R})),y});y9.props={};function KP(e){const{min:t,max:n}=e;return[[t[0],t[1]],[n[0],n[1]]]}function _9(e,t){const[n,r]=e,[i,s]=t;return n>=i[0]&&n<=s[0]&&r>=i[1]&&r<=s[1]}function hre(e,t){const[n,r]=e;return!(_9(n,t)&&_9(r,t))}function dre(e,t){const[n,r]=e,[i,s]=t;return n[0]<s[0]&&r[0]>i[0]&&n[1]<s[1]&&r[1]>i[1]}const pre=e=>{const{priority:t}=e;return n=>{const r=[];return t&&n.sort(t),n.forEach(i=>{WM(i);const s=i.getLocalBounds();r.some(c=>dre(KP(s),KP(c.getLocalBounds())))?GM(i):r.push(i)}),n}};function vre([e,t],[n,r]){return r>e&&t>n}function dA(){const e=new Map;return[r=>e.get(r),(r,i)=>e.set(r,i)]}function mre(e){const t=e.cloneNode(!0),n=t.getElementById("connector");n&&t.removeChild(n);const{min:r,max:i}=t.getRenderBounds();return t.destroy(),{min:r,max:i}}const gre=e=>{const{maxIterations:t=10,maxError:n=.1,padding:r=1}=e;return i=>{const s=i.length;if(s<=1)return i;const[l,c]=dA(),[h,p]=dA(),[v,y]=dA(),[b,T]=dA();for(const M of i){const{min:R,max:I}=mre(M),[N,z]=R,[H,X]=I;c(M,z),p(M,z),y(M,X-z),T(M,[N,H])}for(let M=0;M<t;M++){i.sort((I,N)=>Dc(h(I),h(N)));let R=0;for(let I=0;I<s-1;I++){const N=i[I];let z=I+1,H;for(;(H=i[z])&&!vre(b(N),b(H));)z+=1;if(H){const X=h(N),Y=v(N),ne=h(H),pe=ne-(X+Y);if(pe<r){const ye=(r-pe)/2;R=Math.max(R,ye),p(N,X-ye),p(H,ne+ye)}}}if(R<n)break}for(const M of i)M.style.y+=h(M)-l(M);return i}},yre=()=>e=>(e.forEach(t=>{WM(t);const n=t.attr("bounds"),r=t.getLocalBounds();hre(KP(r),n)&&GM(t)}),e);function _re(e){return typeof e=="object"?e:vv(e)}function QP(e){let t=e/255;return t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),t}function b9(e,t,n){return .2126*QP(e)+.7152*QP(t)+.0722*QP(n)}function x9(e,t){const{r:n,g:r,b:i}=e,{r:s,g:l,b:c}=t,h=b9(n,r,i),p=b9(s,l,c);return(Math.max(h,p)+.05)/(Math.min(h,p)+.05)}function bre(e,t){const n=Eb(t,r=>x9(e,_re(r)));return t[n]}const xre=e=>{const{threshold:t=4.5,palette:n=["#000","#fff"]}=e;return r=>(r.forEach(i=>{const s=i.attr("dependentElement").parsedStyle.fill,l=i.parsedStyle.fill;x9(l,s)<t&&i.attr("fill",bre(s,n))}),r)};function Ere(){return{"data.fetch":e9,"data.inline":t9,"data.sortBy":n9,"data.sort":r9,"data.filter":i9,"data.pick":o9,"data.rename":a9,"data.fold":s9,"data.slice":l9,"data.custom":u9,"data.map":c9,"data.join":h9,"data.kde":d9,"data.log":p9,"data.wordCloud":y9,"transform.stackY":S7,"transform.binX":O7,"transform.bin":ZP,"transform.dodgeX":M7,"transform.jitter":R7,"transform.jitterX":P7,"transform.jitterY":I7,"transform.symmetryY":D7,"transform.diffY":L7,"transform.stackEnter":N7,"transform.normalizeY":F7,"transform.select":cA,"transform.selectX":k7,"transform.selectY":z7,"transform.groupX":U7,"transform.groupY":j7,"transform.groupColor":V7,"transform.group":EE,"transform.sortX":G7,"transform.sortY":W7,"transform.sortColor":Z7,"transform.flexX":X7,"transform.pack":Y7,"transform.sample":$7,"transform.filter":q7,"coordinate.cartesian":J6,"coordinate.polar":R_,"coordinate.transpose":wR,"coordinate.theta":eN,"coordinate.parallel":TR,"coordinate.fisheye":tN,"coordinate.radial":w2,"coordinate.radar":nN,"encode.constant":rN,"encode.field":iN,"encode.transform":oN,"encode.column":aN,"mark.interval":pN,"mark.rect":mN,"mark.line":VN,"mark.point":IF,"mark.text":kF,"mark.cell":UF,"mark.area":YF,"mark.link":qR,"mark.image":lB,"mark.polygon":dB,"mark.box":gB,"mark.vector":_B,"mark.lineX":SB,"mark.lineY":AB,"mark.connector":RB,"mark.range":DB,"mark.rangeX":FB,"mark.rangeY":zB,"mark.path":GB,"mark.shape":XB,"mark.density":qB,"mark.heatmap":e8,"mark.wordCloud":eP,"palette.category10":t8,"palette.category20":n8,"scale.linear":r8,"scale.ordinal":s8,"scale.band":c8,"scale.identity":f8,"scale.point":h8,"scale.time":L8,"scale.log":F8,"scale.pow":B8,"scale.sqrt":k8,"scale.threshold":z8,"scale.quantile":U8,"scale.quantize":j8,"scale.sequential":V8,"scale.constant":H8,"theme.classic":G8,"theme.classicDark":Z8,"theme.academy":X8,"theme.light":cP,"theme.dark":W8,"component.axisX":Y8,"component.axisY":$8,"component.legendCategory":hP,"component.legendContinuous":oy,"component.legends":K8,"component.title":J8,"component.sliderX":rk,"component.sliderY":ik,"component.scrollbarX":ok,"component.scrollbarY":ak,"animation.scaleInX":mP,"animation.scaleOutX":mJ,"animation.scaleInY":sk,"animation.scaleOutY":gJ,"animation.waveIn":lk,"animation.fadeIn":uk,"animation.fadeOut":ck,"animation.zoomIn":yJ,"animation.zoomOut":_J,"animation.pathIn":fk,"animation.morphing":vk,"animation.growInX":mk,"animation.growInY":gk,"interaction.elementHighlight":KT,"interaction.elementHighlightByX":yk,"interaction.elementHighlightByColor":_k,"interaction.elementSelect":QT,"interaction.elementSelectByX":bk,"interaction.elementSelectByColor":xk,"interaction.fisheye":NJ,"interaction.chartIndex":Ek,"interaction.tooltip":Nk,"interaction.legendFilter":lee,"interaction.legendHighlight":uee,"interaction.brushHighlight":AP,"interaction.brushXHighlight":vee,"interaction.brushYHighlight":mee,"interaction.brushAxisHighlight":Tee,"interaction.brushFilter":RP,"interaction.brushXFilter":Mee,"interaction.brushYFilter":Ree,"interaction.sliderFilter":Yk,"interaction.scrollbarFilter":Nee,"interaction.poptip":Kk,"interaction.treemapDrillDown":nte,"interaction.elementPointMove":lte,"composition.spaceLayer":h7,"composition.spaceFlex":d7,"composition.facetRect":g7,"composition.repeatMatrix":xte,"composition.facetCircle":Cte,"composition.timingKeyframe":_7,"labelTransform.overlapHide":pre,"labelTransform.overlapDodgeY":gre,"labelTransform.overflowHide":yre,"labelTransform.contrastReverse":xre}}var TE=e=>e;function pA(e,t){e&&S9.hasOwnProperty(e.type)&&S9[e.type](e,t)}var E9={Feature:function(e,t){pA(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)pA(n[r].geometry,t)}},S9={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){JP(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)JP(n[r],t,0)},Polygon:function(e,t){w9(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)w9(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)pA(n[r],t)}};function JP(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function w9(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)JP(e[n],t,1);t.polygonEnd()}function Gb(e,t){e&&E9.hasOwnProperty(e.type)?E9[e.type](e,t):pA(e,t)}class cg{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],l=t+s,c=Math.abs(t)<Math.abs(s)?t-(l-s):s-(l-t);c&&(n[r++]=c),t=l}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,l=0;if(n>0){for(l=t[--n];n>0&&(r=l,i=t[--n],l=r+i,s=i-(l-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=l+i,i==r-l&&(l=r))}return l}}function Q0e(e,t){const n=new cg;if(t===void 0)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function J0e(e,t){const n=new cg;let r=-1;return Float64Array.from(e,t===void 0?i=>n.add(+i||0):i=>n.add(+t(i,++r,e)||0))}var rs=1e-6,T9=1e-12,Qs=Math.PI,ef=Qs/2,A9=Qs/4,a0=Qs*2,gd=180/Qs,Lc=Qs/180,Nl=Math.abs,Wb=Math.atan,fg=Math.atan2,Gs=Math.cos,vA=Math.ceil,C9=Math.exp,eve=Math.floor,tve=Math.hypot,mA=Math.log,e5=Math.pow,Ts=Math.sin,H0=Math.sign||function(e){return e>0?1:e<0?-1:0},kp=Math.sqrt,t5=Math.tan;function O9(e){return e>1?0:e<-1?Qs:Math.acos(e)}function G0(e){return e>1?ef:e<-1?-ef:Math.asin(e)}function nve(e){return(e=Ts(e/2))*e}function W0(){}var n5=new cg,r5=new cg,M9,R9,i5,o5,Ey={point:W0,lineStart:W0,lineEnd:W0,polygonStart:function(){Ey.lineStart=Sre,Ey.lineEnd=Tre},polygonEnd:function(){Ey.lineStart=Ey.lineEnd=Ey.point=W0,n5.add(Nl(r5)),r5=new cg},result:function(){var e=n5/2;return n5=new cg,e}};function Sre(){Ey.point=wre}function wre(e,t){Ey.point=P9,M9=i5=e,R9=o5=t}function P9(e,t){r5.add(o5*e-i5*t),i5=e,o5=t}function Tre(){P9(M9,R9)}var I9=Ey,Zb=1/0,gA=Zb,AE=-Zb,yA=AE,Are={point:Cre,lineStart:W0,lineEnd:W0,polygonStart:W0,polygonEnd:W0,result:function(){var e=[[Zb,gA],[AE,yA]];return AE=yA=-(gA=Zb=1/0),e}};function Cre(e,t){e<Zb&&(Zb=e),e>AE&&(AE=e),t<gA&&(gA=t),t>yA&&(yA=t)}var _A=Are,a5=0,s5=0,CE=0,bA=0,xA=0,Xb=0,l5=0,u5=0,OE=0,D9,L9,ym,_m,Ov={point:t1,lineStart:N9,lineEnd:F9,polygonStart:function(){Ov.lineStart=Rre,Ov.lineEnd=Pre},polygonEnd:function(){Ov.point=t1,Ov.lineStart=N9,Ov.lineEnd=F9},result:function(){var e=OE?[l5/OE,u5/OE]:Xb?[bA/Xb,xA/Xb]:CE?[a5/CE,s5/CE]:[NaN,NaN];return a5=s5=CE=bA=xA=Xb=l5=u5=OE=0,e}};function t1(e,t){a5+=e,s5+=t,++CE}function N9(){Ov.point=Ore}function Ore(e,t){Ov.point=Mre,t1(ym=e,_m=t)}function Mre(e,t){var n=e-ym,r=t-_m,i=kp(n*n+r*r);bA+=i*(ym+e)/2,xA+=i*(_m+t)/2,Xb+=i,t1(ym=e,_m=t)}function F9(){Ov.point=t1}function Rre(){Ov.point=Ire}function Pre(){B9(D9,L9)}function Ire(e,t){Ov.point=B9,t1(D9=ym=e,L9=_m=t)}function B9(e,t){var n=e-ym,r=t-_m,i=kp(n*n+r*r);bA+=i*(ym+e)/2,xA+=i*(_m+t)/2,Xb+=i,i=_m*e-ym*t,l5+=i*(ym+e),u5+=i*(_m+t),OE+=i*3,t1(ym=e,_m=t)}var k9=Ov;function z9(e){this._context=e}z9.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,a0);break}}},result:W0};var c5=new cg,f5,U9,j9,ME,RE,EA={point:W0,lineStart:function(){EA.point=Dre},lineEnd:function(){f5&&V9(U9,j9),EA.point=W0},polygonStart:function(){f5=!0},polygonEnd:function(){f5=null},result:function(){var e=+c5;return c5=new cg,e}};function Dre(e,t){EA.point=V9,U9=ME=e,j9=RE=t}function V9(e,t){ME-=e,RE-=t,c5.add(kp(ME*ME+RE*RE)),ME=e,RE=t}var H9=EA;let G9,SA,W9,Z9;class X9{constructor(t){this._append=t==null?Y9:Lre(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==W9||this._append!==SA){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,W9=r,SA=this._append,Z9=this._,this._=i}this._+=Z9;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Y9(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Lre(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Y9;if(t!==G9){const n=_f(10,t);G9=t,SA=function(i){let s=1;this._+=i[0];for(const l=i.length;s<l;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return SA}function $9(e,t){let n=3,r=4.5,i,s;function l(c){return c&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Gb(c,i(s))),s.result()}return l.area=function(c){return Gb(c,i(I9)),I9.result()},l.measure=function(c){return Gb(c,i(H9)),H9.result()},l.bounds=function(c){return Gb(c,i(_A)),_A.result()},l.centroid=function(c){return Gb(c,i(k9)),k9.result()},l.projection=function(c){return arguments.length?(i=c==null?(e=null,TE):(e=c).stream,l):e},l.context=function(c){return arguments.length?(s=c==null?(t=null,new X9(n)):new z9(t=c),typeof r!="function"&&s.pointRadius(r),l):t},l.pointRadius=function(c){return arguments.length?(r=typeof c=="function"?c:(s.pointRadius(+c),+c),l):r},l.digits=function(c){if(!arguments.length)return n;if(c==null)n=null;else{const h=Math.floor(c);if(!(h>=0))throw new RangeError(`invalid digits: ${c}`);n=h}return t===null&&(s=new X9(n)),l},l.projection(e).digits(n).context(t)}function Yb(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function q9(e,t,n){var r=Yb(e,t-rs,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function K9(e,t,n){var r=Yb(e,t-rs,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Nre(){var e,t,n,r,i,s,l,c,h=10,p=h,v=90,y=360,b,T,M,R,I=2.5;function N(){return{type:"MultiLineString",coordinates:z()}}function z(){return Yb(vA(r/v)*v,n,v).map(M).concat(Yb(vA(c/y)*y,l,y).map(R)).concat(Yb(vA(t/h)*h,e,h).filter(function(H){return Nl(H%v)>rs}).map(b)).concat(Yb(vA(s/p)*p,i,p).filter(function(H){return Nl(H%y)>rs}).map(T))}return N.lines=function(){return z().map(function(H){return{type:"LineString",coordinates:H}})},N.outline=function(){return{type:"Polygon",coordinates:[M(r).concat(R(l).slice(1),M(n).reverse().slice(1),R(c).reverse().slice(1))]}},N.extent=function(H){return arguments.length?N.extentMajor(H).extentMinor(H):N.extentMinor()},N.extentMajor=function(H){return arguments.length?(r=+H[0][0],n=+H[1][0],c=+H[0][1],l=+H[1][1],r>n&&(H=r,r=n,n=H),c>l&&(H=c,c=l,l=H),N.precision(I)):[[r,c],[n,l]]},N.extentMinor=function(H){return arguments.length?(t=+H[0][0],e=+H[1][0],s=+H[0][1],i=+H[1][1],t>e&&(H=t,t=e,e=H),s>i&&(H=s,s=i,i=H),N.precision(I)):[[t,s],[e,i]]},N.step=function(H){return arguments.length?N.stepMajor(H).stepMinor(H):N.stepMinor()},N.stepMajor=function(H){return arguments.length?(v=+H[0],y=+H[1],N):[v,y]},N.stepMinor=function(H){return arguments.length?(h=+H[0],p=+H[1],N):[h,p]},N.precision=function(H){return arguments.length?(I=+H,b=q9(s,i,90),T=K9(t,e,I),M=q9(c,l,90),R=K9(r,n,I),N):I},N.extentMajor([[-180,-90+rs],[180,90-rs]]).extentMinor([[-180,-80-rs],[180,80+rs]])}function Fre(){return Nre()()}function Q9(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:W0,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function wA(e,t){return Nl(e[0]-t[0])<rs&&Nl(e[1]-t[1])<rs}function TA(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function J9(e,t,n,r,i){var s=[],l=[],c,h;if(e.forEach(function(M){if(!((R=M.length-1)<=0)){var R,I=M[0],N=M[R],z;if(wA(I,N)){if(!I[2]&&!N[2]){for(i.lineStart(),c=0;c<R;++c)i.point((I=M[c])[0],I[1]);i.lineEnd();return}N[0]+=2*rs}s.push(z=new TA(I,M,null,!0)),l.push(z.o=new TA(I,null,z,!1)),s.push(z=new TA(N,M,null,!1)),l.push(z.o=new TA(N,null,z,!0))}}),!!s.length){for(l.sort(t),ez(s),ez(l),c=0,h=l.length;c<h;++c)l[c].e=n=!n;for(var p=s[0],v,y;;){for(var b=p,T=!0;b.v;)if((b=b.n)===p)return;v=b.z,i.lineStart();do{if(b.v=b.o.v=!0,b.e){if(T)for(c=0,h=v.length;c<h;++c)i.point((y=v[c])[0],y[1]);else r(b.x,b.n.x,1,i);b=b.n}else{if(T)for(v=b.p.z,c=v.length-1;c>=0;--c)i.point((y=v[c])[0],y[1]);else r(b.x,b.p.x,-1,i);b=b.p}b=b.o,v=b.z,T=!T}while(!b.v);i.lineEnd()}}}function ez(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function h5(e){return[fg(e[1],e[0]),G0(e[2])]}function $b(e){var t=e[0],n=e[1],r=Gs(n);return[r*Gs(t),r*Ts(t),Ts(n)]}function AA(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function CA(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function d5(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function OA(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function p5(e){var t=kp(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function v5(e){return Nl(e[0])<=Qs?e[0]:H0(e[0])*((Nl(e[0])+Qs)%a0-Qs)}function Bre(e,t){var n=v5(t),r=t[1],i=Ts(r),s=[Ts(n),-Gs(n),0],l=0,c=0,h=new cg;i===1?r=ef+rs:i===-1&&(r=-ef-rs);for(var p=0,v=e.length;p<v;++p)if(b=(y=e[p]).length)for(var y,b,T=y[b-1],M=v5(T),R=T[1]/2+A9,I=Ts(R),N=Gs(R),z=0;z<b;++z,M=X,I=ne,N=pe,T=H){var H=y[z],X=v5(H),Y=H[1]/2+A9,ne=Ts(Y),pe=Gs(Y),ye=X-M,De=ye>=0?1:-1,Xe=De*ye,Ke=Xe>Qs,mt=I*ne;if(h.add(fg(mt*De*Ts(Xe),N*pe+mt*Gs(Xe))),l+=Ke?ye+De*a0:ye,Ke^M>=n^X>=n){var Qe=CA($b(T),$b(H));p5(Qe);var ut=CA(s,Qe);p5(ut);var ct=(Ke^ye>=0?-1:1)*G0(ut[2]);(r>ct||r===ct&&(Qe[0]||Qe[1]))&&(c+=Ke^ye>=0?1:-1)}}return(l<-rs||l<rs&&h<-T9)^c&1}function*kre(e){for(const t of e)yield*t}function tz(e){return Array.from(kre(e))}function nz(e,t,n,r){return function(i){var s=t(i),l=Q9(),c=t(l),h=!1,p,v,y,b={point:T,lineStart:R,lineEnd:I,polygonStart:function(){b.point=N,b.lineStart=z,b.lineEnd=H,v=[],p=[]},polygonEnd:function(){b.point=T,b.lineStart=R,b.lineEnd=I,v=tz(v);var X=Bre(p,r);v.length?(h||(i.polygonStart(),h=!0),J9(v,Ure,X,n,i)):X&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),v=p=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function T(X,Y){e(X,Y)&&i.point(X,Y)}function M(X,Y){s.point(X,Y)}function R(){b.point=M,s.lineStart()}function I(){b.point=T,s.lineEnd()}function N(X,Y){y.push([X,Y]),c.point(X,Y)}function z(){c.lineStart(),y=[]}function H(){N(y[0][0],y[0][1]),c.lineEnd();var X=c.clean(),Y=l.result(),ne,pe=Y.length,ye,De,Xe;if(y.pop(),p.push(y),y=null,!!pe){if(X&1){if(De=Y[0],(ye=De.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),ne=0;ne<ye;++ne)i.point((Xe=De[ne])[0],Xe[1]);i.lineEnd()}return}pe>1&&X&2&&Y.push(Y.pop().concat(Y.shift())),v.push(Y.filter(zre))}}return b}}function zre(e){return e.length>1}function Ure(e,t){return((e=e.x)[0]<0?e[1]-ef-rs:ef-e[1])-((t=t.x)[0]<0?t[1]-ef-rs:ef-t[1])}var rz=nz(function(){return!0},jre,Hre,[-Qs,-ef]);function jre(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,l){var c=s>0?Qs:-Qs,h=Nl(s-t);Nl(h-Qs)<rs?(e.point(t,n=(n+l)/2>0?ef:-ef),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),e.point(s,n),i=0):r!==c&&h>=Qs&&(Nl(t-r)<rs&&(t-=r*rs),Nl(s-c)<rs&&(s-=c*rs),n=Vre(t,n,s,l),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),i=0),e.point(t=s,n=l),r=c},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Vre(e,t,n,r){var i,s,l=Ts(e-n);return Nl(l)>rs?Wb((Ts(t)*(s=Gs(r))*Ts(n)-Ts(r)*(i=Gs(t))*Ts(e))/(i*s*l)):(t+r)/2}function Hre(e,t,n,r){var i;if(e==null)i=n*ef,r.point(-Qs,i),r.point(0,i),r.point(Qs,i),r.point(Qs,0),r.point(Qs,-i),r.point(0,-i),r.point(-Qs,-i),r.point(-Qs,0),r.point(-Qs,i);else if(Nl(e[0]-t[0])>rs){var s=e[0]<t[0]?Qs:-Qs;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function iz(e,t,n,r,i,s){if(n){var l=Gs(t),c=Ts(t),h=r*n;i==null?(i=t+r*a0,s=t-h/2):(i=oz(l,i),s=oz(l,s),(r>0?i<s:i>s)&&(i+=r*a0));for(var p,v=i;r>0?v>s:v<s;v-=h)p=h5([l,-c*Gs(v),-c*Ts(v)]),e.point(p[0],p[1])}}function oz(e,t){t=$b(t),t[0]-=e,p5(t);var n=O9(-t[1]);return((-t[2]<0?-n:n)+a0-rs)%a0}function rve(){var e=constant([0,0]),t=constant(90),n=constant(2),r,i,s={point:l};function l(h,p){r.push(h=i(h,p)),h[0]*=degrees,h[1]*=degrees}function c(){var h=e.apply(this,arguments),p=t.apply(this,arguments)*radians,v=n.apply(this,arguments)*radians;return r=[],i=rotateRadians(-h[0]*radians,-h[1]*radians,0).invert,iz(s,p,v,1),h={type:"Polygon",coordinates:[r]},r=i=null,h}return c.center=function(h){return arguments.length?(e=typeof h=="function"?h:constant([+h[0],+h[1]]),c):e},c.radius=function(h){return arguments.length?(t=typeof h=="function"?h:constant(+h),c):t},c.precision=function(h){return arguments.length?(n=typeof h=="function"?h:constant(+h),c):n},c}function Gre(e){var t=Gs(e),n=2*Lc,r=t>0,i=Nl(t)>rs;function s(v,y,b,T){iz(T,e,n,b,v,y)}function l(v,y){return Gs(v)*Gs(y)>t}function c(v){var y,b,T,M,R;return{lineStart:function(){M=T=!1,R=1},point:function(I,N){var z=[I,N],H,X=l(I,N),Y=r?X?0:p(I,N):X?p(I+(I<0?Qs:-Qs),N):0;if(!y&&(M=T=X)&&v.lineStart(),X!==T&&(H=h(y,z),(!H||wA(y,H)||wA(z,H))&&(z[2]=1)),X!==T)R=0,X?(v.lineStart(),H=h(z,y),v.point(H[0],H[1])):(H=h(y,z),v.point(H[0],H[1],2),v.lineEnd()),y=H;else if(i&&y&&r^X){var ne;!(Y&b)&&(ne=h(z,y,!0))&&(R=0,r?(v.lineStart(),v.point(ne[0][0],ne[0][1]),v.point(ne[1][0],ne[1][1]),v.lineEnd()):(v.point(ne[1][0],ne[1][1]),v.lineEnd(),v.lineStart(),v.point(ne[0][0],ne[0][1],3)))}X&&(!y||!wA(y,z))&&v.point(z[0],z[1]),y=z,T=X,b=Y},lineEnd:function(){T&&v.lineEnd(),y=null},clean:function(){return R|(M&&T)<<1}}}function h(v,y,b){var T=$b(v),M=$b(y),R=[1,0,0],I=CA(T,M),N=AA(I,I),z=I[0],H=N-z*z;if(!H)return!b&&v;var X=t*N/H,Y=-t*z/H,ne=CA(R,I),pe=OA(R,X),ye=OA(I,Y);d5(pe,ye);var De=ne,Xe=AA(pe,De),Ke=AA(De,De),mt=Xe*Xe-Ke*(AA(pe,pe)-1);if(!(mt<0)){var Qe=kp(mt),ut=OA(De,(-Xe-Qe)/Ke);if(d5(ut,pe),ut=h5(ut),!b)return ut;var ct=v[0],gt=y[0],Xt=v[1],Rt=y[1],kt;gt<ct&&(kt=ct,ct=gt,gt=kt);var wn=gt-ct,zn=Nl(wn-Qs)<rs,or=zn||wn<rs;if(!zn&&Rt<Xt&&(kt=Xt,Xt=Rt,Rt=kt),or?zn?Xt+Rt>0^ut[1]<(Nl(ut[0]-ct)<rs?Xt:Rt):Xt<=ut[1]&&ut[1]<=Rt:wn>Qs^(ct<=ut[0]&&ut[0]<=gt)){var ir=OA(De,(-Xe+Qe)/Ke);return d5(ir,pe),[ut,h5(ir)]}}}function p(v,y){var b=r?e:Qs-e,T=0;return v<-b?T|=1:v>b&&(T|=2),y<-b?T|=4:y>b&&(T|=8),T}return nz(l,c,s,r?[0,-e]:[-Qs,e-Qs])}function Wre(e,t,n,r,i,s){var l=e[0],c=e[1],h=t[0],p=t[1],v=0,y=1,b=h-l,T=p-c,M;if(M=n-l,!(!b&&M>0)){if(M/=b,b<0){if(M<v)return;M<y&&(y=M)}else if(b>0){if(M>y)return;M>v&&(v=M)}if(M=i-l,!(!b&&M<0)){if(M/=b,b<0){if(M>y)return;M>v&&(v=M)}else if(b>0){if(M<v)return;M<y&&(y=M)}if(M=r-c,!(!T&&M>0)){if(M/=T,T<0){if(M<v)return;M<y&&(y=M)}else if(T>0){if(M>y)return;M>v&&(v=M)}if(M=s-c,!(!T&&M<0)){if(M/=T,T<0){if(M>y)return;M>v&&(v=M)}else if(T>0){if(M<v)return;M<y&&(y=M)}return v>0&&(e[0]=l+v*b,e[1]=c+v*T),y<1&&(t[0]=l+y*b,t[1]=c+y*T),!0}}}}}var PE=1e9,MA=-PE;function az(e,t,n,r){function i(p,v){return e<=p&&p<=n&&t<=v&&v<=r}function s(p,v,y,b){var T=0,M=0;if(p==null||(T=l(p,y))!==(M=l(v,y))||h(p,v)<0^y>0)do b.point(T===0||T===3?e:n,T>1?r:t);while((T=(T+y+4)%4)!==M);else b.point(v[0],v[1])}function l(p,v){return Nl(p[0]-e)<rs?v>0?0:3:Nl(p[0]-n)<rs?v>0?2:1:Nl(p[1]-t)<rs?v>0?1:0:v>0?3:2}function c(p,v){return h(p.x,v.x)}function h(p,v){var y=l(p,1),b=l(v,1);return y!==b?y-b:y===0?v[1]-p[1]:y===1?p[0]-v[0]:y===2?p[1]-v[1]:v[0]-p[0]}return function(p){var v=p,y=Q9(),b,T,M,R,I,N,z,H,X,Y,ne,pe={point:ye,lineStart:mt,lineEnd:Qe,polygonStart:Xe,polygonEnd:Ke};function ye(ct,gt){i(ct,gt)&&v.point(ct,gt)}function De(){for(var ct=0,gt=0,Xt=T.length;gt<Xt;++gt)for(var Rt=T[gt],kt=1,wn=Rt.length,zn=Rt[0],or,ir,Zr=zn[0],Ri=zn[1];kt<wn;++kt)or=Zr,ir=Ri,zn=Rt[kt],Zr=zn[0],Ri=zn[1],ir<=r?Ri>r&&(Zr-or)*(r-ir)>(Ri-ir)*(e-or)&&++ct:Ri<=r&&(Zr-or)*(r-ir)<(Ri-ir)*(e-or)&&--ct;return ct}function Xe(){v=y,b=[],T=[],ne=!0}function Ke(){var ct=De(),gt=ne&&ct,Xt=(b=tz(b)).length;(gt||Xt)&&(p.polygonStart(),gt&&(p.lineStart(),s(null,null,1,p),p.lineEnd()),Xt&&J9(b,c,ct,s,p),p.polygonEnd()),v=p,b=T=M=null}function mt(){pe.point=ut,T&&T.push(M=[]),Y=!0,X=!1,z=H=NaN}function Qe(){b&&(ut(R,I),N&&X&&y.rejoin(),b.push(y.result())),pe.point=ye,X&&v.lineEnd()}function ut(ct,gt){var Xt=i(ct,gt);if(T&&M.push([ct,gt]),Y)R=ct,I=gt,N=Xt,Y=!1,Xt&&(v.lineStart(),v.point(ct,gt));else if(Xt&&X)v.point(ct,gt);else{var Rt=[z=Math.max(MA,Math.min(PE,z)),H=Math.max(MA,Math.min(PE,H))],kt=[ct=Math.max(MA,Math.min(PE,ct)),gt=Math.max(MA,Math.min(PE,gt))];Wre(Rt,kt,e,t,n,r)?(X||(v.lineStart(),v.point(Rt[0],Rt[1])),v.point(kt[0],kt[1]),Xt||v.lineEnd(),ne=!1):Xt&&(v.lineStart(),v.point(ct,gt),ne=!1)}z=ct,H=gt,X=Xt}return pe}}function m5(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function g5(e,t){return Nl(e)>Qs&&(e-=Math.round(e/a0)*a0),[e,t]}g5.invert=g5;function sz(e,t,n){return(e%=a0)?t||n?m5(uz(e),cz(t,n)):uz(e):t||n?cz(t,n):g5}function lz(e){return function(t,n){return t+=e,Nl(t)>Qs&&(t-=Math.round(t/a0)*a0),[t,n]}}function uz(e){var t=lz(e);return t.invert=lz(-e),t}function cz(e,t){var n=Gs(e),r=Ts(e),i=Gs(t),s=Ts(t);function l(c,h){var p=Gs(h),v=Gs(c)*p,y=Ts(c)*p,b=Ts(h),T=b*n+v*r;return[fg(y*i-T*s,v*n-b*r),G0(T*i+y*s)]}return l.invert=function(c,h){var p=Gs(h),v=Gs(c)*p,y=Ts(c)*p,b=Ts(h),T=b*i-y*s;return[fg(y*i+b*s,v*n+T*r),G0(T*n-v*r)]},l}function Zre(e){e=sz(e[0]*Lc,e[1]*Lc,e.length>2?e[2]*Lc:0);function t(n){return n=e(n[0]*Lc,n[1]*Lc),n[0]*=gd,n[1]*=gd,n}return t.invert=function(n){return n=e.invert(n[0]*Lc,n[1]*Lc),n[0]*=gd,n[1]*=gd,n},t}function ive(e){return{stream:IE(e)}}function IE(e){return function(t){var n=new y5;for(var r in e)n[r]=e[r];return n.stream=t,n}}function y5(){}y5.prototype={constructor:y5,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _5(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Gb(n,e.stream(_A)),t(_A.result()),r!=null&&e.clipExtent(r),e}function RA(e,t,n){return _5(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],l=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),c=+t[0][0]+(i-l*(r[1][0]+r[0][0]))/2,h=+t[0][1]+(s-l*(r[1][1]+r[0][1]))/2;e.scale(150*l).translate([c,h])},n)}function b5(e,t,n){return RA(e,[[0,0],t],n)}function x5(e,t,n){return _5(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),l=(i-s*(r[1][0]+r[0][0]))/2,c=-s*r[0][1];e.scale(150*s).translate([l,c])},n)}function E5(e,t,n){return _5(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),l=-s*r[0][0],c=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([l,c])},n)}var fz=16,Xre=Gs(30*Lc);function hz(e,t){return+t?$re(e,t):Yre(e)}function Yre(e){return IE({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function $re(e,t){function n(r,i,s,l,c,h,p,v,y,b,T,M,R,I){var N=p-r,z=v-i,H=N*N+z*z;if(H>4*t&&R--){var X=l+b,Y=c+T,ne=h+M,pe=kp(X*X+Y*Y+ne*ne),ye=G0(ne/=pe),De=Nl(Nl(ne)-1)<rs||Nl(s-y)<rs?(s+y)/2:fg(Y,X),Xe=e(De,ye),Ke=Xe[0],mt=Xe[1],Qe=Ke-r,ut=mt-i,ct=z*Qe-N*ut;(ct*ct/H>t||Nl((N*Qe+z*ut)/H-.5)>.3||l*b+c*T+h*M<Xre)&&(n(r,i,s,l,c,h,Ke,mt,De,X/=pe,Y/=pe,ne,R,I),I.point(Ke,mt),n(Ke,mt,De,X,Y,ne,p,v,y,b,T,M,R,I))}}return function(r){var i,s,l,c,h,p,v,y,b,T,M,R,I={point:N,lineStart:z,lineEnd:X,polygonStart:function(){r.polygonStart(),I.lineStart=Y},polygonEnd:function(){r.polygonEnd(),I.lineStart=z}};function N(ye,De){ye=e(ye,De),r.point(ye[0],ye[1])}function z(){y=NaN,I.point=H,r.lineStart()}function H(ye,De){var Xe=$b([ye,De]),Ke=e(ye,De);n(y,b,v,T,M,R,y=Ke[0],b=Ke[1],v=ye,T=Xe[0],M=Xe[1],R=Xe[2],fz,r),r.point(y,b)}function X(){I.point=N,r.lineEnd()}function Y(){z(),I.point=ne,I.lineEnd=pe}function ne(ye,De){H(i=ye,De),s=y,l=b,c=T,h=M,p=R,I.point=H}function pe(){n(y,b,v,T,M,R,s,l,i,c,h,p,fz,r),I.lineEnd=X,X()}return I}}var qre=IE({point:function(e,t){this.stream.point(e*Lc,t*Lc)}});function Kre(e){return IE({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Qre(e,t,n,r,i){function s(l,c){return l*=r,c*=i,[t+e*l,n-e*c]}return s.invert=function(l,c){return[(l-t)/e*r,(n-c)/e*i]},s}function dz(e,t,n,r,i,s){if(!s)return Qre(e,t,n,r,i);var l=Gs(s),c=Ts(s),h=l*e,p=c*e,v=l/e,y=c/e,b=(c*n-l*t)/e,T=(c*t+l*n)/e;function M(R,I){return R*=r,I*=i,[h*R-p*I+t,n-p*R-h*I]}return M.invert=function(R,I){return[r*(v*R-y*I+b),i*(T-y*R-v*I)]},M}function bm(e){return S5(function(){return e})()}function S5(e){var t,n=150,r=480,i=250,s=0,l=0,c=0,h=0,p=0,v,y=0,b=1,T=1,M=null,R=rz,I=null,N,z,H,X=TE,Y=.5,ne,pe,ye,De,Xe;function Ke(ct){return ye(ct[0]*Lc,ct[1]*Lc)}function mt(ct){return ct=ye.invert(ct[0],ct[1]),ct&&[ct[0]*gd,ct[1]*gd]}Ke.stream=function(ct){return De&&Xe===ct?De:De=qre(Kre(v)(R(ne(X(Xe=ct)))))},Ke.preclip=function(ct){return arguments.length?(R=ct,M=void 0,ut()):R},Ke.postclip=function(ct){return arguments.length?(X=ct,I=N=z=H=null,ut()):X},Ke.clipAngle=function(ct){return arguments.length?(R=+ct?Gre(M=ct*Lc):(M=null,rz),ut()):M*gd},Ke.clipExtent=function(ct){return arguments.length?(X=ct==null?(I=N=z=H=null,TE):az(I=+ct[0][0],N=+ct[0][1],z=+ct[1][0],H=+ct[1][1]),ut()):I==null?null:[[I,N],[z,H]]},Ke.scale=function(ct){return arguments.length?(n=+ct,Qe()):n},Ke.translate=function(ct){return arguments.length?(r=+ct[0],i=+ct[1],Qe()):[r,i]},Ke.center=function(ct){return arguments.length?(s=ct[0]%360*Lc,l=ct[1]%360*Lc,Qe()):[s*gd,l*gd]},Ke.rotate=function(ct){return arguments.length?(c=ct[0]%360*Lc,h=ct[1]%360*Lc,p=ct.length>2?ct[2]%360*Lc:0,Qe()):[c*gd,h*gd,p*gd]},Ke.angle=function(ct){return arguments.length?(y=ct%360*Lc,Qe()):y*gd},Ke.reflectX=function(ct){return arguments.length?(b=ct?-1:1,Qe()):b<0},Ke.reflectY=function(ct){return arguments.length?(T=ct?-1:1,Qe()):T<0},Ke.precision=function(ct){return arguments.length?(ne=hz(pe,Y=ct*ct),ut()):kp(Y)},Ke.fitExtent=function(ct,gt){return RA(Ke,ct,gt)},Ke.fitSize=function(ct,gt){return b5(Ke,ct,gt)},Ke.fitWidth=function(ct,gt){return x5(Ke,ct,gt)},Ke.fitHeight=function(ct,gt){return E5(Ke,ct,gt)};function Qe(){var ct=dz(n,0,0,b,T,y).apply(null,t(s,l)),gt=dz(n,r-ct[0],i-ct[1],b,T,y);return v=sz(c,h,p),pe=m5(t,gt),ye=m5(v,pe),ne=hz(pe,Y),ut()}function ut(){return De=Xe=null,Ke}return function(){return t=e.apply(this,arguments),Ke.invert=t.invert&&mt,Qe()}}function w5(e){var t=0,n=Qs/3,r=S5(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Lc,n=s[1]*Lc):[t*gd,n*gd]},i}function Jre(e){var t=Gs(e);function n(r,i){return[r*t,Ts(i)/t]}return n.invert=function(r,i){return[r/t,G0(i*t)]},n}function pz(e,t){var n=Ts(e),r=(n+Ts(t))/2;if(Nl(r)<rs)return Jre(e);var i=1+n*(2*r-n),s=kp(i)/r;function l(c,h){var p=kp(i-2*r*Ts(h))/r;return[p*Ts(c*=r),s-p*Gs(c)]}return l.invert=function(c,h){var p=s-h,v=fg(c,Nl(p))*H0(p);return p*r<0&&(v-=Qs*H0(c)*H0(p)),[v/r,G0((i-(c*c+p*p)*r*r)/(2*r))]},l}function PA(){return w5(pz).scale(155.424).center([0,33.6442])}function vz(){return PA().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function eie(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function tie(){var e,t,n=vz(),r,i=PA().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,l=PA().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,h,p={point:function(b,T){h=[b,T]}};function v(b){var T=b[0],M=b[1];return h=null,r.point(T,M),h||(s.point(T,M),h)||(c.point(T,M),h)}v.invert=function(b){var T=n.scale(),M=n.translate(),R=(b[0]-M[0])/T,I=(b[1]-M[1])/T;return(I>=.12&&I<.234&&R>=-.425&&R<-.214?i:I>=.166&&I<.234&&R>=-.214&&R<-.115?l:n).invert(b)},v.stream=function(b){return e&&t===b?e:e=eie([n.stream(t=b),i.stream(b),l.stream(b)])},v.precision=function(b){return arguments.length?(n.precision(b),i.precision(b),l.precision(b),y()):n.precision()},v.scale=function(b){return arguments.length?(n.scale(b),i.scale(b*.35),l.scale(b),v.translate(n.translate())):n.scale()},v.translate=function(b){if(!arguments.length)return n.translate();var T=n.scale(),M=+b[0],R=+b[1];return r=n.translate(b).clipExtent([[M-.455*T,R-.238*T],[M+.455*T,R+.238*T]]).stream(p),s=i.translate([M-.307*T,R+.201*T]).clipExtent([[M-.425*T+rs,R+.12*T+rs],[M-.214*T-rs,R+.234*T-rs]]).stream(p),c=l.translate([M-.205*T,R+.212*T]).clipExtent([[M-.214*T+rs,R+.166*T+rs],[M-.115*T-rs,R+.234*T-rs]]).stream(p),y()},v.fitExtent=function(b,T){return RA(v,b,T)},v.fitSize=function(b,T){return b5(v,b,T)},v.fitWidth=function(b,T){return x5(v,b,T)},v.fitHeight=function(b,T){return E5(v,b,T)};function y(){return e=t=null,v}return v.scale(1070)}function mz(e){return function(t,n){var r=Gs(t),i=Gs(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ts(t),s*Ts(n)]}}function DE(e){return function(t,n){var r=kp(t*t+n*n),i=e(r),s=Ts(i),l=Gs(i);return[fg(t*s,r*l),G0(r&&n*s/r)]}}var T5=mz(function(e){return kp(2/(1+e))});T5.invert=DE(function(e){return 2*G0(e/2)});function nie(){return bm(T5).scale(124.75).clipAngle(180-.001)}var A5=mz(function(e){return(e=O9(e))&&e/Ts(e)});A5.invert=DE(function(e){return e});function rie(){return bm(A5).scale(79.4188).clipAngle(180-.001)}function LE(e,t){return[e,mA(t5((ef+t)/2))]}LE.invert=function(e,t){return[e,2*Wb(C9(t))-ef]};function iie(){return gz(LE).scale(961/a0)}function gz(e){var t=bm(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,l=null,c,h,p;t.scale=function(y){return arguments.length?(r(y),v()):r()},t.translate=function(y){return arguments.length?(i(y),v()):i()},t.center=function(y){return arguments.length?(n(y),v()):n()},t.clipExtent=function(y){return arguments.length?(y==null?l=c=h=p=null:(l=+y[0][0],c=+y[0][1],h=+y[1][0],p=+y[1][1]),v()):l==null?null:[[l,c],[h,p]]};function v(){var y=Qs*r(),b=t(Zre(t.rotate()).invert([0,0]));return s(l==null?[[b[0]-y,b[1]-y],[b[0]+y,b[1]+y]]:e===LE?[[Math.max(b[0]-y,l),c],[Math.min(b[0]+y,h),p]]:[[l,Math.max(b[1]-y,c)],[h,Math.min(b[1]+y,p)]])}return v()}function IA(e){return t5((ef+e)/2)}function yz(e,t){var n=Gs(e),r=e===t?Ts(e):mA(n/Gs(t))/mA(IA(t)/IA(e)),i=n*e5(IA(e),r)/r;if(!r)return LE;function s(l,c){i>0?c<-ef+rs&&(c=-ef+rs):c>ef-rs&&(c=ef-rs);var h=i/e5(IA(c),r);return[h*Ts(r*l),i-h*Gs(r*l)]}return s.invert=function(l,c){var h=i-c,p=H0(r)*kp(l*l+h*h),v=fg(l,Nl(h))*H0(h);return h*r<0&&(v-=Qs*H0(l)*H0(h)),[v/r,2*Wb(e5(i/p,1/r))-ef]},s}function oie(){return w5(yz).scale(109.5).parallels([30,30])}function NE(e,t){return[e,t]}NE.invert=NE;function aie(){return bm(NE).scale(152.63)}function _z(e,t){var n=Gs(e),r=e===t?Ts(e):(n-Gs(t))/(t-e),i=n/r+e;if(Nl(r)<rs)return NE;function s(l,c){var h=i-c,p=r*l;return[h*Ts(p),i-h*Gs(p)]}return s.invert=function(l,c){var h=i-c,p=fg(l,Nl(h))*H0(h);return h*r<0&&(p-=Qs*H0(l)*H0(h)),[p/r,i-H0(r)*kp(l*l+h*h)]},s}function sie(){return w5(_z).scale(131.154).center([0,13.9389])}var FE=1.340264,BE=-.081106,kE=893e-6,zE=.003796,DA=kp(3)/2,lie=12;function C5(e,t){var n=G0(DA*Ts(t)),r=n*n,i=r*r*r;return[e*Gs(n)/(DA*(FE+3*BE*r+i*(7*kE+9*zE*r))),n*(FE+BE*r+i*(kE+zE*r))]}C5.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,l,c,h;s<lie&&(c=n*(FE+BE*r+i*(kE+zE*r))-t,h=FE+3*BE*r+i*(7*kE+9*zE*r),n-=l=c/h,r=n*n,i=r*r*r,!(Nl(l)<T9));++s);return[DA*e*(FE+3*BE*r+i*(7*kE+9*zE*r))/Gs(n),G0(Ts(n)/DA)]};function uie(){return bm(C5).scale(177.158)}function O5(e,t){var n=Gs(t),r=Gs(e)*n;return[n*Ts(e)/r,Ts(t)/r]}O5.invert=DE(Wb);function cie(){return bm(O5).scale(144.049).clipAngle(60)}function fie(){var e=1,t=0,n=0,r=1,i=1,s=0,l,c,h=null,p,v,y,b=1,T=1,M=IE({point:function(X,Y){var ne=H([X,Y]);this.stream.point(ne[0],ne[1])}}),R=TE,I,N;function z(){return b=e*r,T=e*i,I=N=null,H}function H(X){var Y=X[0]*b,ne=X[1]*T;if(s){var pe=ne*l-Y*c;Y=Y*l+ne*c,ne=pe}return[Y+t,ne+n]}return H.invert=function(X){var Y=X[0]-t,ne=X[1]-n;if(s){var pe=ne*l+Y*c;Y=Y*l-ne*c,ne=pe}return[Y/b,ne/T]},H.stream=function(X){return I&&N===X?I:I=M(R(N=X))},H.postclip=function(X){return arguments.length?(R=X,h=p=v=y=null,z()):R},H.clipExtent=function(X){return arguments.length?(R=X==null?(h=p=v=y=null,TE):az(h=+X[0][0],p=+X[0][1],v=+X[1][0],y=+X[1][1]),z()):h==null?null:[[h,p],[v,y]]},H.scale=function(X){return arguments.length?(e=+X,z()):e},H.translate=function(X){return arguments.length?(t=+X[0],n=+X[1],z()):[t,n]},H.angle=function(X){return arguments.length?(s=X%360*Lc,c=Ts(s),l=Gs(s),z()):s*gd},H.reflectX=function(X){return arguments.length?(r=X?-1:1,z()):r<0},H.reflectY=function(X){return arguments.length?(i=X?-1:1,z()):i<0},H.fitExtent=function(X,Y){return RA(H,X,Y)},H.fitSize=function(X,Y){return b5(H,X,Y)},H.fitWidth=function(X,Y){return x5(H,X,Y)},H.fitHeight=function(X,Y){return E5(H,X,Y)},H}function M5(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}M5.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,l=s*s;n-=i=(n*(1.007226+s*(.015085+l*(-.044475+.028874*s-.005916*l)))-t)/(1.007226+s*(.015085*3+l*(-.044475*7+.028874*9*s-.005916*11*l)))}while(Nl(i)>rs&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function hie(){return bm(M5).scale(175.295)}function R5(e,t){return[Gs(t)*Ts(e),Ts(t)]}R5.invert=DE(G0);function die(){return bm(R5).scale(249.5).clipAngle(90+rs)}function P5(e,t){var n=Gs(t),r=1+Gs(e)*n;return[n*Ts(e)/r,Ts(t)/r]}P5.invert=DE(function(e){return 2*Wb(e)});function pie(){return bm(P5).scale(250).clipAngle(142)}function I5(e,t){return[mA(t5((ef+t)/2)),-e]}I5.invert=function(e,t){return[-t,2*Wb(C9(e))-ef]};function vie(){var e=gz(I5),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var mie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gie(e){if(typeof e=="function")return e;const t=`geo${n0(e)}`,n=E[t];if(!n)throw new Error(`Unknown coordinate: ${e}`);return n}function yie(e){return{type:"FeatureCollection",features:e.flatMap(t=>_ie(t).features)}}function _ie(e){const t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!e||!e.type)return null;const n=t[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featureCollection")return e}function bie(e,t){var n;for(const[r,i]of Object.entries(t))(n=e[r])===null||n===void 0||n.call(e,i)}function xie(e,t,n,r){const i=()=>{const c=t.filter(bz);return c.find(p=>p.sphere)?{type:"Sphere"}:yie(c.filter(p=>!p.sphere).flatMap(p=>p.data.value))},{outline:s=i()}=r,{size:l="fitExtent"}=r;if(l==="fitExtent")return Eie(e,s,n);if(l==="fitWidth")return Sie(e,s,n)}function Eie(e,t,n){const{x:r,y:i,width:s,height:l}=n;e.fitExtent([[r,i],[s,l]],t)}function Sie(e,t,n){const{width:r,height:i}=n,[[s,l],[c,h]]=$9(e.fitWidth(r,t)).bounds(t),p=Math.ceil(h-l),v=Math.min(Math.ceil(c-s),p),y=e.scale()*(v-1)/v,[b,T]=e.translate(),M=T+(i-p)/2;e.scale(y).translate([b,M]).precision(.2)}function wie(e){const{data:t}=e;if(Array.isArray(t))return Object.assign(Object.assign({},e),{data:{value:t}});const{type:n}=t;return n==="graticule10"?Object.assign(Object.assign({},e),{data:{value:[Fre()]}}):n==="sphere"?Object.assign(Object.assign({},e),{sphere:!0,data:{value:[{type:"Sphere"}]}}):e}function bz(e){return e.type==="geoPath"}const xz=()=>e=>{const{children:t,coordinate:n={}}=e;if(!Array.isArray(t))return[];const{type:r="equalEarth"}=n,i=mie(n,["type"]),s=gie(r),l=t.map(wie);let c;function h(){return[["custom",(y,b,T,M)=>{const R=s();xie(R,l,{x:y,y:b,width:T,height:M},i),bie(R,i),c=$9(R);const N=new hd({domain:[y,y+T]}),z=new hd({domain:[b,b+M]}),H=Y=>{const ne=R(Y);if(!ne)return[null,null];const[pe,ye]=ne;return[N.map(pe),z.map(ye)]},X=Y=>{if(!Y)return null;const[ne,pe]=Y,ye=[N.invert(ne),z.invert(pe)];return R.invert(ye)};return{transform:Y=>H(Y),untransform:Y=>X(Y)}}]]}function p(y){const{style:b,tooltip:T={}}=y;return Object.assign(Object.assign({},y),{type:"path",tooltip:AT(T,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},b),{d:M=>c(M)||[]})})}const v=y=>bz(y)?p(y):y;return[Object.assign(Object.assign({},e),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:h},children:l.flatMap(v)})]};xz.props={};var Tie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ez=()=>e=>{const{type:t,data:n,scale:r,encode:i,style:s,animate:l,key:c,state:h}=e,p=Tie(e,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},p),{children:[{type:"geoPath",key:`${c}-0`,data:{value:n},scale:r,encode:i,style:s,animate:l,state:h}]})]};Ez.props={};function Aie(){return{"composition.geoView":xz,"composition.geoPath":Ez}}function Cie(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Sz(this.cover(t,n),t,n,e)}function Sz(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,l={data:r},c=e._x0,h=e._y0,p=e._x1,v=e._y1,y,b,T,M,R,I,N,z;if(!s)return e._root=l,e;for(;s.length;)if((R=t>=(y=(c+p)/2))?c=y:p=y,(I=n>=(b=(h+v)/2))?h=b:v=b,i=s,!(s=s[N=I<<1|R]))return i[N]=l,e;if(T=+e._x.call(null,s.data),M=+e._y.call(null,s.data),t===T&&n===M)return l.next=s,i?i[N]=l:e._root=l,e;do i=i?i[N]=new Array(4):e._root=new Array(4),(R=t>=(y=(c+p)/2))?c=y:p=y,(I=n>=(b=(h+v)/2))?h=b:v=b;while((N=I<<1|R)===(z=(M>=b)<<1|T>=y));return i[z]=s,i[N]=l,e}function Oie(e){var t,n,r=e.length,i,s,l=new Array(r),c=new Array(r),h=1/0,p=1/0,v=-1/0,y=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(l[n]=i,c[n]=s,i<h&&(h=i),i>v&&(v=i),s<p&&(p=s),s>y&&(y=s));if(h>v||p>y)return this;for(this.cover(h,p).cover(v,y),n=0;n<r;++n)Sz(this,l[n],c[n],e[n]);return this}function Mie(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var l=i-n||1,c=this._root,h,p;n>e||e>=i||r>t||t>=s;)switch(p=(t<r)<<1|e<n,h=new Array(4),h[p]=c,c=h,l*=2,p){case 0:i=n+l,s=r+l;break;case 1:n=i-l,s=r+l;break;case 2:i=n+l,r=s-l;break;case 3:n=i-l,r=s-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Rie(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Pie(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Kd(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Iie(e,t,n){var r,i=this._x0,s=this._y0,l,c,h,p,v=this._x1,y=this._y1,b=[],T=this._root,M,R;for(T&&b.push(new Kd(T,i,s,v,y)),n==null?n=1/0:(i=e-n,s=t-n,v=e+n,y=t+n,n*=n);M=b.pop();)if(!(!(T=M.node)||(l=M.x0)>v||(c=M.y0)>y||(h=M.x1)<i||(p=M.y1)<s))if(T.length){var I=(l+h)/2,N=(c+p)/2;b.push(new Kd(T[3],I,N,h,p),new Kd(T[2],l,N,I,p),new Kd(T[1],I,c,h,N),new Kd(T[0],l,c,I,N)),(R=(t>=N)<<1|e>=I)&&(M=b[b.length-1],b[b.length-1]=b[b.length-1-R],b[b.length-1-R]=M)}else{var z=e-+this._x.call(null,T.data),H=t-+this._y.call(null,T.data),X=z*z+H*H;if(X<n){var Y=Math.sqrt(n=X);i=e-Y,s=t-Y,v=e+Y,y=t+Y,r=T.data}}return r}function Die(e){if(isNaN(v=+this._x.call(null,e))||isNaN(y=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,l=this._x0,c=this._y0,h=this._x1,p=this._y1,v,y,b,T,M,R,I,N;if(!n)return this;if(n.length)for(;;){if((M=v>=(b=(l+h)/2))?l=b:h=b,(R=y>=(T=(c+p)/2))?c=T:p=T,t=n,!(n=n[I=R<<1|M]))return this;if(!n.length)break;(t[I+1&3]||t[I+2&3]||t[I+3&3])&&(r=t,N=I)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[I]=s:delete t[I],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[N]=n:this._root=n),this):(this._root=s,this)}function Lie(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Nie(){return this._root}function Fie(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Bie(e){var t=[],n,r=this._root,i,s,l,c,h;for(r&&t.push(new Kd(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,l=n.y0,c=n.x1,h=n.y1)&&r.length){var p=(s+c)/2,v=(l+h)/2;(i=r[3])&&t.push(new Kd(i,p,v,c,h)),(i=r[2])&&t.push(new Kd(i,s,v,p,h)),(i=r[1])&&t.push(new Kd(i,p,l,c,v)),(i=r[0])&&t.push(new Kd(i,s,l,p,v))}return this}function kie(e){var t=[],n=[],r;for(this._root&&t.push(new Kd(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,l=r.x0,c=r.y0,h=r.x1,p=r.y1,v=(l+h)/2,y=(c+p)/2;(s=i[0])&&t.push(new Kd(s,l,c,v,y)),(s=i[1])&&t.push(new Kd(s,v,c,h,y)),(s=i[2])&&t.push(new Kd(s,l,y,v,p)),(s=i[3])&&t.push(new Kd(s,v,y,h,p))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function zie(e){return e[0]}function Uie(e){return arguments.length?(this._x=e,this):this._x}function jie(e){return e[1]}function Vie(e){return arguments.length?(this._y=e,this):this._y}function wz(e,t,n){var r=new D5(t==null?zie:t,n==null?jie:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function D5(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Tz(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Qd=wz.prototype=D5.prototype;Qd.copy=function(){var e=new D5(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Tz(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Tz(r));return e},Qd.add=Cie,Qd.addAll=Oie,Qd.cover=Mie,Qd.data=Rie,Qd.extent=Pie,Qd.find=Iie,Qd.remove=Die,Qd.removeAll=Lie,Qd.root=Nie,Qd.size=Fie,Qd.visit=Bie,Qd.visitAfter=kie,Qd.x=Uie,Qd.y=Vie;function s0(e){return function(){return e}}function qb(e){return(e()-.5)*1e-6}var Hie={value:function(){}};function Az(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new LA(n)}function LA(e){this._=e}function Gie(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}LA.prototype=Az.prototype={constructor:LA,on:function(t,n){var r=this._,i=Gie(t+"",r),s,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((s=(t=i[l]).type)&&(s=Wie(r[s],t.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++l<c;)if(s=(t=i[l]).type)r[s]=Cz(r[s],t.name,n);else if(n==null)for(s in r)r[s]=Cz(r[s],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new LA(t)},call:function(t,n){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,l;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,s=l.length;i<s;++i)l[i].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,l=i.length;s<l;++s)i[s].value.apply(n,r)}};function Wie(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Cz(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Hie,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Zie=Az,Kb=0,UE=0,jE=0,Oz=1e3,NA,VE,FA=0,n1=0,BA=0,HE=typeof performance=="object"&&performance.now?performance:Date,Mz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rz(){return n1||(Mz(Xie),n1=HE.now()+BA)}function Xie(){n1=0}function L5(){this._call=this._time=this._next=null}L5.prototype=Pz.prototype={constructor:L5,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Rz():+n)+(t==null?0:+t),!this._next&&VE!==this&&(VE?VE._next=this:NA=this,VE=this),this._call=e,this._time=n,N5()},stop:function(){this._call&&(this._call=null,this._time=1/0,N5())}};function Pz(e,t,n){var r=new L5;return r.restart(e,t,n),r}function Yie(){Rz(),++Kb;for(var e=NA,t;e;)(t=n1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Kb}function Iz(){n1=(FA=HE.now())+BA,Kb=UE=0;try{Yie()}finally{Kb=0,qie(),n1=0}}function $ie(){var e=HE.now(),t=e-FA;t>Oz&&(BA-=t,FA=e)}function qie(){for(var e,t=NA,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:NA=n);VE=e,N5(r)}function N5(e){if(!Kb){UE&&(UE=clearTimeout(UE));var t=e-n1;t>24?(e<1/0&&(UE=setTimeout(Iz,e-HE.now()-BA)),jE&&(jE=clearInterval(jE))):(jE||(FA=HE.now(),jE=setInterval($ie,Oz)),Kb=1,Mz(Iz))}}const Kie=1664525,Qie=1013904223,Dz=4294967296;function Jie(){let e=1;return()=>(e=(Kie*e+Qie)%Dz)/Dz}function eoe(e){return e.x}function toe(e){return e.y}var noe=10,roe=Math.PI*(3-Math.sqrt(5));function ioe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,l=.6,c=new Map,h=Pz(y),p=Zie("tick","end"),v=Jie();e==null&&(e=[]);function y(){b(),p.call("tick",t),n<r&&(h.stop(),p.call("end",t))}function b(R){var I,N=e.length,z;R===void 0&&(R=1);for(var H=0;H<R;++H)for(n+=(s-n)*i,c.forEach(function(X){X(n)}),I=0;I<N;++I)z=e[I],z.fx==null?z.x+=z.vx*=l:(z.x=z.fx,z.vx=0),z.fy==null?z.y+=z.vy*=l:(z.y=z.fy,z.vy=0);return t}function T(){for(var R=0,I=e.length,N;R<I;++R){if(N=e[R],N.index=R,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),isNaN(N.x)||isNaN(N.y)){var z=noe*Math.sqrt(.5+R),H=R*roe;N.x=z*Math.cos(H),N.y=z*Math.sin(H)}(isNaN(N.vx)||isNaN(N.vy))&&(N.vx=N.vy=0)}}function M(R){return R.initialize&&R.initialize(e,v),R}return T(),t={tick:b,restart:function(){return h.restart(y),t},stop:function(){return h.stop(),t},nodes:function(R){return arguments.length?(e=R,T(),c.forEach(M),t):e},alpha:function(R){return arguments.length?(n=+R,t):n},alphaMin:function(R){return arguments.length?(r=+R,t):r},alphaDecay:function(R){return arguments.length?(i=+R,t):+i},alphaTarget:function(R){return arguments.length?(s=+R,t):s},velocityDecay:function(R){return arguments.length?(l=1-R,t):1-l},randomSource:function(R){return arguments.length?(v=R,c.forEach(M),t):v},force:function(R,I){return arguments.length>1?(I==null?c.delete(R):c.set(R,M(I)),t):c.get(R)},find:function(R,I,N){var z=0,H=e.length,X,Y,ne,pe,ye;for(N==null?N=1/0:N*=N,z=0;z<H;++z)pe=e[z],X=R-pe.x,Y=I-pe.y,ne=X*X+Y*Y,ne<N&&(ye=pe,N=ne);return ye},on:function(R,I){return arguments.length>1?(p.on(R,I),t):p.on(R)}}}function ooe(){var e,t,n,r,i=s0(-30),s,l=1,c=1/0,h=.81;function p(T){var M,R=e.length,I=wz(e,eoe,toe).visitAfter(y);for(r=T,M=0;M<R;++M)t=e[M],I.visit(b)}function v(){if(e){var T,M=e.length,R;for(s=new Array(M),T=0;T<M;++T)R=e[T],s[R.index]=+i(R,T,e)}}function y(T){var M=0,R,I,N=0,z,H,X;if(T.length){for(z=H=X=0;X<4;++X)(R=T[X])&&(I=Math.abs(R.value))&&(M+=R.value,N+=I,z+=I*R.x,H+=I*R.y);T.x=z/N,T.y=H/N}else{R=T,R.x=R.data.x,R.y=R.data.y;do M+=s[R.data.index];while(R=R.next)}T.value=M}function b(T,M,R,I){if(!T.value)return!0;var N=T.x-t.x,z=T.y-t.y,H=I-M,X=N*N+z*z;if(H*H/h<X)return X<c&&(N===0&&(N=qb(n),X+=N*N),z===0&&(z=qb(n),X+=z*z),X<l&&(X=Math.sqrt(l*X)),t.vx+=N*T.value*r/X,t.vy+=z*T.value*r/X),!0;if(T.length||X>=c)return;(T.data!==t||T.next)&&(N===0&&(N=qb(n),X+=N*N),z===0&&(z=qb(n),X+=z*z),X<l&&(X=Math.sqrt(l*X)));do T.data!==t&&(H=s[T.data.index]*r/X,t.vx+=N*H,t.vy+=z*H);while(T=T.next)}return p.initialize=function(T,M){e=T,n=M,v()},p.strength=function(T){return arguments.length?(i=typeof T=="function"?T:s0(+T),v(),p):i},p.distanceMin=function(T){return arguments.length?(l=T*T,p):Math.sqrt(l)},p.distanceMax=function(T){return arguments.length?(c=T*T,p):Math.sqrt(c)},p.theta=function(T){return arguments.length?(h=T*T,p):Math.sqrt(h)},p}function aoe(e){return e.index}function Lz(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function soe(e){var t=aoe,n=y,r,i=s0(30),s,l,c,h,p,v=1;e==null&&(e=[]);function y(I){return 1/Math.min(c[I.source.index],c[I.target.index])}function b(I){for(var N=0,z=e.length;N<v;++N)for(var H=0,X,Y,ne,pe,ye,De,Xe;H<z;++H)X=e[H],Y=X.source,ne=X.target,pe=ne.x+ne.vx-Y.x-Y.vx||qb(p),ye=ne.y+ne.vy-Y.y-Y.vy||qb(p),De=Math.sqrt(pe*pe+ye*ye),De=(De-s[H])/De*I*r[H],pe*=De,ye*=De,ne.vx-=pe*(Xe=h[H]),ne.vy-=ye*Xe,Y.vx+=pe*(Xe=1-Xe),Y.vy+=ye*Xe}function T(){if(l){var I,N=l.length,z=e.length,H=new Map(l.map((Y,ne)=>[t(Y,ne,l),Y])),X;for(I=0,c=new Array(N);I<z;++I)X=e[I],X.index=I,typeof X.source!="object"&&(X.source=Lz(H,X.source)),typeof X.target!="object"&&(X.target=Lz(H,X.target)),c[X.source.index]=(c[X.source.index]||0)+1,c[X.target.index]=(c[X.target.index]||0)+1;for(I=0,h=new Array(z);I<z;++I)X=e[I],h[I]=c[X.source.index]/(c[X.source.index]+c[X.target.index]);r=new Array(z),M(),s=new Array(z),R()}}function M(){if(l)for(var I=0,N=e.length;I<N;++I)r[I]=+n(e[I],I,e)}function R(){if(l)for(var I=0,N=e.length;I<N;++I)s[I]=+i(e[I],I,e)}return b.initialize=function(I,N){l=I,p=N,T()},b.links=function(I){return arguments.length?(e=I,T(),b):e},b.id=function(I){return arguments.length?(t=I,b):t},b.iterations=function(I){return arguments.length?(v=+I,b):v},b.strength=function(I){return arguments.length?(n=typeof I=="function"?I:s0(+I),M(),b):n},b.distance=function(I){return arguments.length?(i=typeof I=="function"?I:s0(+I),R(),b):i},b}function loe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,l=n.length,c,h=0,p=0;for(s=0;s<l;++s)c=n[s],h+=c.x,p+=c.y;for(h=(h/l-e)*r,p=(p/l-t)*r,s=0;s<l;++s)c=n[s],c.x-=h,c.y-=p}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function uoe(e){var t=s0(.1),n,r,i;typeof e!="function"&&(e=s0(e==null?0:+e));function s(c){for(var h=0,p=n.length,v;h<p;++h)v=n[h],v.vx+=(i[h]-v.x)*r[h]*c}function l(){if(n){var c,h=n.length;for(r=new Array(h),i=new Array(h),c=0;c<h;++c)r[c]=isNaN(i[c]=+e(n[c],c,n))?0:+t(n[c],c,n)}}return s.initialize=function(c){n=c,l()},s.strength=function(c){return arguments.length?(t=typeof c=="function"?c:s0(+c),l(),s):t},s.x=function(c){return arguments.length?(e=typeof c=="function"?c:s0(+c),l(),s):e},s}function coe(e){var t=s0(.1),n,r,i;typeof e!="function"&&(e=s0(e==null?0:+e));function s(c){for(var h=0,p=n.length,v;h<p;++h)v=n[h],v.vy+=(i[h]-v.y)*r[h]*c}function l(){if(n){var c,h=n.length;for(r=new Array(h),i=new Array(h),c=0;c<h;++c)r[c]=isNaN(i[c]=+e(n[c],c,n))?0:+t(n[c],c,n)}}return s.initialize=function(c){n=c,l()},s.strength=function(c){return arguments.length?(t=typeof c=="function"?c:s0(+c),l(),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:s0(+c),l(),s):e},s}var foe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const hoe={joint:!0},doe={type:"link",axis:!1,legend:!1,encode:{x:[e=>e.source.x,e=>e.target.x],y:[e=>e.source.y,e=>e.target.y]},style:{stroke:"#999",strokeOpacity:.6}},poe={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},voe={text:""};function moe(e,t,n){const{nodes:r,links:i}=e,{joint:s,nodeStrength:l,linkStrength:c}=t,{nodeKey:h=M=>M.id,linkKey:p=M=>M.id}=n,v=ooe(),y=soe(i).id(gm(p));typeof l=="function"&&v.strength(l),typeof c=="function"&&y.strength(c);const b=ioe(r).force("link",y).force("charge",v);s?b.force("center",loe()):b.force("x",uoe()).force("y",coe()),b.stop();const T=Math.ceil(Math.log(b.alphaMin())/Math.log(1-b.alphaDecay()));for(let M=0;M<T;M++)b.tick();return{nodesData:r,linksData:i}}const Nz=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,{nodeKey:v=ne=>ne.id,linkKey:y=ne=>ne.id}=n,b=foe(n,["nodeKey","linkKey"]),T=Object.assign({nodeKey:v,linkKey:y},b),M=Eo(T,"node"),R=Eo(T,"link"),{links:I,nodes:N}=PR(t,T),{nodesData:z,linksData:H}=moe({links:I,nodes:N},hi({},hoe,s),T),X=pm(p,"link",{items:[ne=>({name:"source",value:gm(y)(ne.source)}),ne=>({name:"target",value:gm(y)(ne.target)})]}),Y=pm(p,"node",{items:[ne=>({name:"key",value:gm(v)(ne)})]},!0);return[hi({},doe,{data:H,encode:R,labels:c,style:Eo(i,"link"),tooltip:X,animate:vm(h,"link")}),hi({},poe,{data:z,encode:Object.assign({},M),scale:r,style:Eo(i,"node"),tooltip:Y,labels:[Object.assign(Object.assign({},voe),Eo(i,"label")),...l],animate:vm(h,"link")})]};Nz.props={};function goe(e,t){return e.parent===t.parent?1:2}function F5(e){var t=e.children;return t?t[0]:e.t}function B5(e){var t=e.children;return t?t[t.length-1]:e.t}function yoe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function _oe(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function boe(e,t,n){return e.a.parent===t.parent?e.a:n}function kA(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}kA.prototype=Object.create(Nb.prototype);function xoe(e){for(var t=new kA(e,0),n,r=[t],i,s,l,c;n=r.pop();)if(s=n._.children)for(n.children=new Array(c=s.length),l=c-1;l>=0;--l)r.push(i=n.children[l]=new kA(s[l],l)),i.parent=n;return(t.parent=new kA(null,0)).children=[t],t}function Eoe(){var e=goe,t=1,n=1,r=null;function i(p){var v=xoe(p);if(v.eachAfter(s),v.parent.m=-v.z,v.eachBefore(l),r)p.eachBefore(h);else{var y=p,b=p,T=p;p.eachBefore(function(z){z.x<y.x&&(y=z),z.x>b.x&&(b=z),z.depth>T.depth&&(T=z)});var M=y===b?1:e(y,b)/2,R=M-y.x,I=t/(b.x+M+R),N=n/(T.depth||1);p.eachBefore(function(z){z.x=(z.x+R)*I,z.y=z.depth*N})}return p}function s(p){var v=p.children,y=p.parent.children,b=p.i?y[p.i-1]:null;if(v){_oe(p);var T=(v[0].z+v[v.length-1].z)/2;b?(p.z=b.z+e(p._,b._),p.m=p.z-T):p.z=T}else b&&(p.z=b.z+e(p._,b._));p.parent.A=c(p,b,p.parent.A||y[0])}function l(p){p._.x=p.z+p.parent.m,p.m+=p.parent.m}function c(p,v,y){if(v){for(var b=p,T=p,M=v,R=b.parent.children[0],I=b.m,N=T.m,z=M.m,H=R.m,X;M=B5(M),b=F5(b),M&&b;)R=F5(R),T=B5(T),T.a=p,X=M.z+z-b.z-I+e(M._,b._),X>0&&(yoe(boe(M,p,y),p,X),I+=X,N+=X),z+=M.m,I+=b.m,H+=R.m,N+=T.m;M&&!B5(T)&&(T.t=M,T.m+=z-N),b&&!F5(R)&&(R.t=b,R.m+=I-H,y=p)}return y}function h(p){p.x*=t,p.y=p.depth*n}return i.separation=function(p){return arguments.length?(e=p,i):e},i.size=function(p){return arguments.length?(r=!1,t=+p[0],n=+p[1],i):r?null:[t,n]},i.nodeSize=function(p){return arguments.length?(r=!0,t=+p[0],n=+p[1],i):r?[t,n]:null},i}function Soe(e,t){return e.parent===t.parent?1:2}function woe(e){return e.reduce(Toe,0)/e.length}function Toe(e,t){return e+t.x}function Aoe(e){return 1+e.reduce(Coe,0)}function Coe(e,t){return Math.max(e,t.y)}function Ooe(e){for(var t;t=e.children;)e=t[0];return e}function Moe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Roe(){var e=Soe,t=1,n=1,r=!1;function i(s){var l,c=0;s.eachAfter(function(b){var T=b.children;T?(b.x=woe(T),b.y=Aoe(T)):(b.x=l?c+=e(b,l):0,b.y=0,l=b)});var h=Ooe(s),p=Moe(s),v=h.x-e(h,p)/2,y=p.x+e(p,h)/2;return s.eachAfter(r?function(b){b.x=(b.x-s.x)*t,b.y=(s.y-b.y)*n}:function(b){b.x=(b.x-v)/(y-v)*t,b.y=(1-(s.y?b.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}const Fz=e=>t=>n=>{const{field:r="value",nodeSize:i,separation:s,sortBy:l,as:c=["x","y"]}=t,[h,p]=c,v=Lb(n,M=>M.children).sum(M=>M[r]).sort(l),y=e();y.size([1,1]),i&&y.nodeSize(i),s&&y.separation(s),y(v);const b=[];v.each(M=>{M[h]=M.x,M[p]=M.y,M.name=M.data.name,b.push(M)});const T=v.links();return T.forEach(M=>{M[h]=[M.source[h],M.target[h]],M[p]=[M.source[p],M.target[p]]}),{nodes:b,edges:T}},Bz=e=>Fz(Roe)(e);Bz.props={};const kz=e=>Fz(Eoe)(e);kz.props={};const Poe={sortBy:(e,t)=>t.value-e.value},Ioe={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},Doe={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},Loe={text:"",fontSize:10},zz=e=>{const{data:t,encode:n={},scale:r={},style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,v=n==null?void 0:n.value,{nodes:y,edges:b}=kz(Object.assign(Object.assign(Object.assign({},Poe),s),{field:v}))(t),T=pm(p,"node",{title:"name",items:["value"]},!0),M=pm(p,"link",{title:"",items:[R=>({name:"source",value:R.source.name}),R=>({name:"target",value:R.target.name})]});return[hi({},Doe,{data:b,encode:Eo(n,"link"),scale:Eo(r,"link"),labels:c,style:Object.assign({stroke:"#999"},Eo(i,"link")),tooltip:M,animate:vm(h,"link")}),hi({},Ioe,{data:y,scale:Eo(r,"node"),encode:Eo(n,"node"),labels:[Object.assign(Object.assign({},Loe),Eo(i,"label")),...l],style:Object.assign({},Eo(i,"node")),tooltip:T,animate:vm(h,"node")})]};zz.props={};var Noe=1664525,Foe=1013904223,Uz=4294967296;function Boe(){var e=1;return function(){return(e=(Noe*e+Foe)%Uz)/Uz}}var koe=L(52677);function zoe(e){return koe(e)==="object"&&"length"in e?e:Array.from(e)}function Uoe(e,t){for(var n=e.length,r,i;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function ove(e){return jz(e,lcg())}function jz(e,t){for(var n=0,r=(e=Uoe(Array.from(e),t)).length,i=[],s,l;n<r;)s=e[n],l&&Vz(l,s)?++n:(l=Voe(i=joe(i,s)),n=0);return l}function joe(e,t){var n,r;if(k5(t,e))return[t];for(n=0;n<e.length;++n)if(zA(t,e[n])&&k5(GE(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(zA(GE(e[n],e[r]),t)&&zA(GE(e[n],t),e[r])&&zA(GE(e[r],t),e[n])&&k5(Hz(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function zA(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Vz(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function k5(e,t){for(var n=0;n<t.length;++n)if(!Vz(e,t[n]))return!1;return!0}function Voe(e){switch(e.length){case 1:return Hoe(e[0]);case 2:return GE(e[0],e[1]);case 3:return Hz(e[0],e[1],e[2])}}function Hoe(e){return{x:e.x,y:e.y,r:e.r}}function GE(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,l=t.y,c=t.r,h=s-n,p=l-r,v=c-i,y=Math.sqrt(h*h+p*p);return{x:(n+s+h/y*v)/2,y:(r+l+p/y*v)/2,r:(y+i+c)/2}}function Hz(e,t,n){var r=e.x,i=e.y,s=e.r,l=t.x,c=t.y,h=t.r,p=n.x,v=n.y,y=n.r,b=r-l,T=r-p,M=i-c,R=i-v,I=h-s,N=y-s,z=r*r+i*i-s*s,H=z-l*l-c*c+h*h,X=z-p*p-v*v+y*y,Y=T*M-b*R,ne=(M*X-R*H)/(Y*2)-r,pe=(R*I-M*N)/Y,ye=(T*H-b*X)/(Y*2)-i,De=(b*N-T*I)/Y,Xe=pe*pe+De*De-1,Ke=2*(s+ne*pe+ye*De),mt=ne*ne+ye*ye-s*s,Qe=-(Math.abs(Xe)>1e-6?(Ke+Math.sqrt(Ke*Ke-4*Xe*mt))/(2*Xe):mt/Ke);return{x:r+ne+pe*Qe,y:i+ye+De*Qe,r:Qe}}function Gz(e,t,n){var r=e.x-t.x,i,s,l=e.y-t.y,c,h,p=r*r+l*l;p?(s=t.r+n.r,s*=s,h=e.r+n.r,h*=h,s>h?(i=(p+h-s)/(2*p),c=Math.sqrt(Math.max(0,h/p-i*i)),n.x=e.x-i*r-c*l,n.y=e.y-i*l+c*r):(i=(p+s-h)/(2*p),c=Math.sqrt(Math.max(0,s/p-i*i)),n.x=t.x+i*r-c*l,n.y=t.y+i*l+c*r)):(n.x=t.x+n.r,n.y=t.y)}function Wz(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Zz(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function UA(e){this._=e,this.next=null,this.previous=null}function Xz(e,t){if(!(s=(e=zoe(e)).length))return 0;var n,r,i,s,l,c,h,p,v,y,b;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Gz(r,n,i=e[2]),n=new UA(n),r=new UA(r),i=new UA(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(h=3;h<s;++h){Gz(n._,r._,i=e[h]),i=new UA(i),p=r.next,v=n.previous,y=r._.r,b=n._.r;do if(y<=b){if(Wz(p._,i._)){r=p,n.next=r,r.previous=n,--h;continue e}y+=p._.r,p=p.next}else{if(Wz(v._,i._)){n=v,n.next=r,r.previous=n,--h;continue e}b+=v._.r,v=v.previous}while(p!==v.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,l=Zz(n);(i=i.next)!==r;)(c=Zz(i))<l&&(n=i,l=c);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=jz(n,t),h=0;h<s;++h)n=e[h],n.x-=i.x,n.y-=i.y;return i.r}function ave(e){return Xz(e,lcg()),e}function Goe(e){return Math.sqrt(e.value)}function Woe(){var e=null,t=1,n=1,r=e1;function i(s){var l=Boe();return s.x=t/2,s.y=n/2,e?s.eachBefore(Yz(e)).eachAfter(z5(r,.5,l)).eachBefore($z(1)):s.eachBefore(Yz(Goe)).eachAfter(z5(e1,1,l)).eachAfter(z5(r,s.r/Math.min(t,n),l)).eachBefore($z(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=rA(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Hb(+s),i):r},i}function Yz(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function z5(e,t,n){return function(r){if(i=r.children){var i,s,l=i.length,c=e(r)*t||0,h;if(c)for(s=0;s<l;++s)i[s].r+=c;if(h=Xz(i,n),c)for(s=0;s<l;++s)i[s].r-=c;r.r=h+c}}}function $z(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var Zoe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Xoe=(e,t)=>({size:[e,t],padding:0,sort:(n,r)=>r.value-n.value}),Yoe=(e,t,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,e]},y:{domain:[0,t]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),$oe={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.r*2},qoe={title:e=>e.data.name,items:[{field:"value"}]},Koe=(e,t,n)=>{const{value:r}=n,i=Ho(e)?IP().path(t.path)(e):Lb(e);return r?i.sum(s=>gm(r)(s)).sort(t.sort):i.count(),Woe().size(t.size).padding(t.padding)(i),i.descendants()},qz=(e,t)=>{const{width:n,height:r}=t,{data:i,encode:s={},scale:l={},style:c={},layout:h={},labels:p=[],tooltip:v={}}=e,y=Zoe(e,["data","encode","scale","style","layout","labels","tooltip"]),b=Yoe(n,r,s),T=Koe(i,hi({},Xoe(n,r),h),hi({},b.encode,s)),M=Eo(c,"label");return hi({},b,Object.assign(Object.assign({data:T,encode:s,scale:l,style:c,labels:[Object.assign(Object.assign({},$oe),M),...p]},y),{tooltip:AT(v,qoe),axis:!1}))};qz.props={};function Qoe(e){return e.target.depth}function Joe(e){return e.depth}function eae(e,t){return t-1-e.height}function jA(e,t){return e.sourceLinks.length?e.depth:t-1}function tae(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?i0(e.sourceLinks,Qoe)-1:0}function VA(e){return function(){return e}}function Kz(e,t){return HA(e.source,t.source)||e.index-t.index}function Qz(e,t){return HA(e.target,t.target)||e.index-t.index}function HA(e,t){return e.y0-t.y0}function U5(e){return e.value}function nae(e){return e.index}function rae(e){return e.nodes}function iae(e){return e.links}function Jz(e,t){const n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function eU({nodes:e}){for(const t of e){let n=t.y0,r=n;for(const i of t.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of t.targetLinks)i.y1=r+i.width/2,r+=i.width}}function oae(){let e=0,t=0,n=1,r=1,i=24,s=8,l,c=nae,h=jA,p,v,y,b=rae,T=iae,M=6;function R(gt){const Xt={nodes:b(gt),links:T(gt)};return I(Xt),N(Xt),z(Xt),H(Xt),ne(Xt),eU(Xt),Xt}R.update=function(gt){return eU(gt),gt},R.nodeId=function(gt){return arguments.length?(c=typeof gt=="function"?gt:VA(gt),R):c},R.nodeAlign=function(gt){return arguments.length?(h=typeof gt=="function"?gt:VA(gt),R):h},R.nodeDepth=function(gt){return arguments.length?(p=gt,R):p},R.nodeSort=function(gt){return arguments.length?(v=gt,R):v},R.nodeWidth=function(gt){return arguments.length?(i=+gt,R):i},R.nodePadding=function(gt){return arguments.length?(s=l=+gt,R):s},R.nodes=function(gt){return arguments.length?(b=typeof gt=="function"?gt:VA(gt),R):b},R.links=function(gt){return arguments.length?(T=typeof gt=="function"?gt:VA(gt),R):T},R.linkSort=function(gt){return arguments.length?(y=gt,R):y},R.size=function(gt){return arguments.length?(e=t=0,n=+gt[0],r=+gt[1],R):[n-e,r-t]},R.extent=function(gt){return arguments.length?(e=+gt[0][0],n=+gt[1][0],t=+gt[0][1],r=+gt[1][1],R):[[e,t],[n,r]]},R.iterations=function(gt){return arguments.length?(M=+gt,R):M};function I({nodes:gt,links:Xt}){gt.forEach((kt,wn)=>{kt.index=wn,kt.sourceLinks=[],kt.targetLinks=[]});const Rt=new Map(gt.map(kt=>[c(kt),kt]));if(Xt.forEach((kt,wn)=>{kt.index=wn;let{source:zn,target:or}=kt;typeof zn!="object"&&(zn=kt.source=Jz(Rt,zn)),typeof or!="object"&&(or=kt.target=Jz(Rt,or)),zn.sourceLinks.push(kt),or.targetLinks.push(kt)}),y!=null)for(const{sourceLinks:kt,targetLinks:wn}of gt)kt.sort(y),wn.sort(y)}function N({nodes:gt}){for(const Xt of gt)Xt.value=Xt.fixedValue===void 0?Math.max(Xd(Xt.sourceLinks,U5),Xd(Xt.targetLinks,U5)):Xt.fixedValue}function z({nodes:gt}){const Xt=gt.length;let Rt=new Set(gt),kt=new Set,wn=0;for(;Rt.size;){if(Rt.forEach(zn=>{zn.depth=wn;for(const{target:or}of zn.sourceLinks)kt.add(or)}),++wn>Xt)throw new Error("circular link");Rt=kt,kt=new Set}if(p){const zn=Math.max(Tl(gt,ir=>ir.depth)+1,0);let or;for(let ir=0;ir<gt.length;ir++)or=gt[ir],or.depth=p.call(null,or,zn)}}function H({nodes:gt}){const Xt=gt.length;let Rt=new Set(gt),kt=new Set,wn=0;for(;Rt.size;){if(Rt.forEach(zn=>{zn.height=wn;for(const{source:or}of zn.targetLinks)kt.add(or)}),++wn>Xt)throw new Error("circular link");Rt=kt,kt=new Set}}function X({nodes:gt}){const Xt=Math.max(Tl(gt,wn=>wn.depth)+1,0),Rt=(n-e-i)/(Xt-1),kt=new Array(Xt).fill(0).map(()=>[]);for(const wn of gt){const zn=Math.max(0,Math.min(Xt-1,Math.floor(h.call(null,wn,Xt))));wn.layer=zn,wn.x0=e+zn*Rt,wn.x1=wn.x0+i,kt[zn]?kt[zn].push(wn):kt[zn]=[wn]}if(v)for(const wn of kt)wn.sort(v);return kt}function Y(gt){const Xt=i0(gt,Rt=>(r-t-(Rt.length-1)*l)/Xd(Rt,U5));for(const Rt of gt){let kt=t;for(const wn of Rt){wn.y0=kt,wn.y1=kt+wn.value*Xt,kt=wn.y1+l;for(const zn of wn.sourceLinks)zn.width=zn.value*Xt}kt=(r-kt+l)/(Rt.length+1);for(let wn=0;wn<Rt.length;++wn){const zn=Rt[wn];zn.y0+=kt*(wn+1),zn.y1+=kt*(wn+1)}Qe(Rt)}}function ne(gt){const Xt=X(gt);l=Math.min(s,(r-t)/(Tl(Xt,Rt=>Rt.length)-1)),Y(Xt);for(let Rt=0;Rt<M;++Rt){const kt=Math.pow(.99,Rt),wn=Math.max(1-kt,(Rt+1)/M);ye(Xt,kt,wn),pe(Xt,kt,wn)}}function pe(gt,Xt,Rt){for(let kt=1,wn=gt.length;kt<wn;++kt){const zn=gt[kt];for(const or of zn){let ir=0,Zr=0;for(const{source:Qi,value:Qr}of or.targetLinks){const ei=Qr*(or.layer-Qi.layer);ir+=ut(Qi,or)*ei,Zr+=ei}if(!(Zr>0))continue;const Ri=(ir/Zr-or.y0)*Xt;or.y0+=Ri,or.y1+=Ri,mt(or)}v===void 0&&zn.sort(HA),zn.length&&De(zn,Rt)}}function ye(gt,Xt,Rt){for(let kt=gt.length,wn=kt-2;wn>=0;--wn){const zn=gt[wn];for(const or of zn){let ir=0,Zr=0;for(const{target:Qi,value:Qr}of or.sourceLinks){const ei=Qr*(Qi.layer-or.layer);ir+=ct(or,Qi)*ei,Zr+=ei}if(!(Zr>0))continue;const Ri=(ir/Zr-or.y0)*Xt;or.y0+=Ri,or.y1+=Ri,mt(or)}v===void 0&&zn.sort(HA),zn.length&&De(zn,Rt)}}function De(gt,Xt){const Rt=gt.length>>1,kt=gt[Rt];Ke(gt,kt.y0-l,Rt-1,Xt),Xe(gt,kt.y1+l,Rt+1,Xt),Ke(gt,r,gt.length-1,Xt),Xe(gt,t,0,Xt)}function Xe(gt,Xt,Rt,kt){for(;Rt<gt.length;++Rt){const wn=gt[Rt],zn=(Xt-wn.y0)*kt;zn>1e-6&&(wn.y0+=zn,wn.y1+=zn),Xt=wn.y1+l}}function Ke(gt,Xt,Rt,kt){for(;Rt>=0;--Rt){const wn=gt[Rt],zn=(wn.y1-Xt)*kt;zn>1e-6&&(wn.y0-=zn,wn.y1-=zn),Xt=wn.y0-l}}function mt({sourceLinks:gt,targetLinks:Xt}){if(y===void 0){for(const{source:{sourceLinks:Rt}}of Xt)Rt.sort(Qz);for(const{target:{targetLinks:Rt}}of gt)Rt.sort(Kz)}}function Qe(gt){if(y===void 0)for(const{sourceLinks:Xt,targetLinks:Rt}of gt)Xt.sort(Qz),Rt.sort(Kz)}function ut(gt,Xt){let Rt=gt.y0-(gt.sourceLinks.length-1)*l/2;for(const{target:kt,width:wn}of gt.sourceLinks){if(kt===Xt)break;Rt+=wn+l}for(const{source:kt,width:wn}of Xt.targetLinks){if(kt===gt)break;Rt-=wn}return Rt}function ct(gt,Xt){let Rt=Xt.y0-(Xt.targetLinks.length-1)*l/2;for(const{source:kt,width:wn}of Xt.targetLinks){if(kt===gt)break;Rt+=wn+l}for(const{target:kt,width:wn}of gt.sourceLinks){if(kt===Xt)break;Rt-=wn}return Rt}return R}const aae={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:e=>e.nodes,links:e=>e.links,nodeSort:void 0,linkSort:void 0,iterations:6},sae={left:Joe,right:eae,center:tae,justify:jA};function lae(e){const t=typeof e;return t==="string"?sae[e]||jA:t==="function"?e:jA}const tU=e=>t=>{const{nodeId:n,nodeSort:r,nodeAlign:i,nodeWidth:s,nodePadding:l,nodeDepth:c,nodes:h,links:p,linkSort:v,iterations:y}=Object.assign({},aae,e),b=oae().nodeSort(r).linkSort(v).links(p).nodes(h).nodeWidth(s).nodePadding(l).nodeDepth(c).nodeAlign(lae(i)).iterations(y).extent([[0,0],[1,1]]);typeof n=="function"&&b.nodeId(n);const T=b(t),{nodes:M,links:R}=T,I=M.map(z=>{const{x0:H,x1:X,y0:Y,y1:ne}=z;return Object.assign(Object.assign({},z),{x:[H,X,X,H],y:[Y,Y,ne,ne]})}),N=R.map(z=>{const{source:H,target:X}=z,Y=H.x1,ne=X.x0,pe=z.width/2;return Object.assign(Object.assign({},z),{x:[Y,Y,ne,ne],y:[z.y0+pe,z.y0-pe,z.y1+pe,z.y1-pe]})});return{nodes:I,links:N}};tU.props={};var uae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const cae={nodeId:e=>e.key,nodeWidth:.02,nodePadding:.02},fae={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},hae={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},dae={textAlign:e=>e.x[0]<.5?"start":"end",position:e=>e.x[0]<.5?"right":"left",fontSize:10},nU=e=>{const{data:t,encode:n={},scale:r,style:i={},layout:s={},nodeLabels:l=[],linkLabels:c=[],animate:h={},tooltip:p={}}=e,{links:v,nodes:y}=PR(t,n),b=Eo(n,"node"),T=Eo(n,"link"),{key:M=De=>De.key,color:R=M}=b,{links:I,nodes:N}=tU(Object.assign(Object.assign(Object.assign({},cae),{nodeId:gm(M)}),s))({links:v,nodes:y}),z=Eo(i,"label"),{text:H=M,spacing:X=5}=z,Y=uae(z,["text","spacing"]),ne=gm(M),pe=pm(p,"node",{title:ne,items:[{field:"value"}]},!0),ye=pm(p,"link",{title:"",items:[De=>({name:"source",value:ne(De.source)}),De=>({name:"target",value:ne(De.target)})]});return[hi({},fae,{data:N,encode:Object.assign(Object.assign({},b),{color:R}),scale:r,style:Eo(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},dae),{text:H,dx:De=>De.x[0]<.5?X:-X}),Y),...l],tooltip:pe,animate:vm(h,"node"),axis:!1}),hi({},hae,{data:I,encode:T,labels:c,style:Object.assign({fill:T.color?void 0:"#aaa",lineWidth:0},Eo(i,"link")),tooltip:ye,animate:vm(h,"link")})]};nU.props={};function pae(e,t){return t.value-e.value}function vae(e,t){return t.frequency-e.frequency}function mae(e,t){return`${e.id}`.localeCompare(`${t.id}`)}function gae(e,t){return`${e.name}`.localeCompare(`${t.name}`)}const yae={y:0,thickness:.05,weight:!1,marginRatio:.1,id:e=>e.id,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null};function _ae(e){const{y:t,thickness:n,weight:r,marginRatio:i,id:s,source:l,target:c,sourceWeight:h,targetWeight:p,sortBy:v}=Object.assign(Object.assign({},yae),e);function y(I){const N=I.nodes.map(H=>Object.assign({},H)),z=I.edges.map(H=>Object.assign({},H));return b(N,z),T(N,z),M(N,z),R(N,z),{nodes:N,edges:z}}function b(I,N){N.forEach(X=>{X.source=l(X),X.target=c(X),X.sourceWeight=h(X),X.targetWeight=p(X)});const z=Nu(N,X=>X.source),H=Nu(N,X=>X.target);return I.forEach(X=>{X.id=s(X);const Y=z.has(X.id)?z.get(X.id):[],ne=H.has(X.id)?H.get(X.id):[];X.frequency=Y.length+ne.length,X.value=Xd(Y,pe=>pe.sourceWeight)+Xd(ne,pe=>pe.targetWeight)}),{nodes:I,edges:N}}function T(I,N){const z=typeof v=="function"?v:he[v];z&&I.sort(z)}function M(I,N){const z=I.length;if(!z)throw Kg("Invalid nodes: it's empty!");if(!r){const Y=1/z;return I.forEach((ne,pe)=>{ne.x=(pe+.5)*Y,ne.y=t}),{nodes:I,edges:N}}const H=i/(2*z),X=I.reduce((Y,ne)=>Y+=ne.value,0);return I.reduce((Y,ne)=>{ne.weight=ne.value/X,ne.width=ne.weight*(1-i),ne.height=n;const pe=H+Y,ye=pe+ne.width,De=t-n/2,Xe=De+n;return ne.x=[pe,ye,ye,pe],ne.y=[De,De,Xe,Xe],Y+ne.width+2*H},0),{nodes:I,edges:N}}function R(I,N){const z=new Map(I.map(Y=>[Y.id,Y]));if(!r)return N.forEach(Y=>{const ne=l(Y),pe=c(Y),ye=z.get(ne),De=z.get(pe);ye&&De&&(Y.x=[ye.x,De.x],Y.y=[ye.y,De.y])}),{nodes:I,edges:N};N.forEach(Y=>{Y.x=[0,0,0,0],Y.y=[t,t,t,t]});const H=Nu(N,Y=>Y.source),X=Nu(N,Y=>Y.target);I.forEach(Y=>{const{edges:ne,width:pe,x:ye,y:De,value:Xe,id:Ke}=Y,mt=H.get(Ke)||[],Qe=X.get(Ke)||[];let ut=0;mt.map(ct=>{const gt=ct.sourceWeight/Xe*pe;ct.x[0]=ye[0]+ut,ct.x[1]=ye[0]+ut+gt,ut+=gt}),Qe.forEach(ct=>{const gt=ct.targetWeight/Xe*pe;ct.x[3]=ye[0]+ut,ct.x[2]=ye[0]+ut+gt,ut+=gt})})}return y}const j5=e=>t=>_ae(e)(t);j5.props={};var rU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const V5={y:0,thickness:.05,marginRatio:.1,id:e=>e.key,source:e=>e.source,target:e=>e.target,sourceWeight:e=>e.value||1,targetWeight:e=>e.value||1,sortBy:null},bae={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},xae={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},Eae={position:"outside",fontSize:10},iU=(e,t)=>{const{data:n,encode:r={},scale:i,style:s={},layout:l={},nodeLabels:c=[],linkLabels:h=[],animate:p={},tooltip:v={}}=e,{nodes:y,links:b}=PR(n,r),T=Eo(r,"node"),M=Eo(r,"link"),{key:R=ct=>ct.key,color:I=R}=T,{linkEncodeColor:N=ct=>ct.source}=M,{nodeWidthRatio:z=V5.thickness,nodePaddingRatio:H=V5.marginRatio}=l,X=rU(l,["nodeWidthRatio","nodePaddingRatio"]),{nodes:Y,edges:ne}=j5(Object.assign(Object.assign(Object.assign(Object.assign({},V5),{id:gm(R),thickness:z,marginRatio:H}),X),{weight:!0}))({nodes:y,edges:b}),pe=Eo(s,"label"),{text:ye=R}=pe,De=rU(pe,["text"]),Xe=pm(v,"node",{title:"",items:[ct=>({name:ct.key,value:ct.value})]},!0),Ke=pm(v,"link",{title:"",items:[ct=>({name:`${ct.source} -> ${ct.target}`,value:ct.value})]}),{height:mt,width:Qe}=t,ut=Math.min(mt,Qe);return[hi({},xae,{data:ne,encode:Object.assign(Object.assign({},M),{color:N}),labels:h,style:Object.assign({fill:N?void 0:"#aaa"},Eo(s,"link")),tooltip:Ke,animate:vm(p,"link")}),hi({},bae,{data:Y,encode:Object.assign(Object.assign({},T),{color:I}),scale:i,style:Eo(s,"node"),coordinate:{type:"polar",outerRadius:(ut-20)/ut,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},Eae),{text:ye}),De),...c],tooltip:Xe,animate:vm(p,"node"),axis:!1})]};iU.props={};var Sae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const wae=(e,t)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[e,t],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),Tae=(e,t)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,e],range:[0,1]},y:{domain:[0,t],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),Aae={fontSize:10,text:e=>fE(e.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:e=>e.x1-e.x0},Cae={title:e=>{var t,n;return(n=(t=e.path)===null||t===void 0?void 0:t.join)===null||n===void 0?void 0:n.call(t,".")},items:[{field:"value"}]},Oae={title:e=>fE(e.path),items:[{field:"value"}]},oU=(e,t)=>{const{width:n,height:r,options:i}=t,{data:s,encode:l={},scale:c,style:h={},layout:p={},labels:v=[],tooltip:y={}}=e,b=Sae(e,["data","encode","scale","style","layout","labels","tooltip"]),T=sl(i,["interaction","treemapDrillDown"]),M=hi({},wae(n,r),p,{layer:T?z=>z.depth===1:p.layer}),[R,I]=a7(s,M,l),N=Eo(h,"label");return hi({},Tae(n,r),Object.assign(Object.assign({data:R,scale:c,style:h,labels:[Object.assign(Object.assign({},Aae),N),...v]},b),{encode:l,tooltip:AT(y,Cae),axis:!1}),T?{interaction:Object.assign(Object.assign({},b.interaction),{treemapDrillDown:T?Object.assign(Object.assign({},T),{originData:I,layout:M}):void 0}),encode:Object.assign({color:z=>fE(z.path)},l),tooltip:AT(y,Oae)}:{})};oU.props={};function Mae(){return{"data.arc":j5,"data.cluster":Bz,"mark.forceGraph":Nz,"mark.tree":zz,"mark.pack":qz,"mark.sankey":nU,"mark.chord":iU,"mark.treemap":oU}}var aU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Rae(e,t){return i0(e,n=>t[n])}function Pae(e,t){return Tl(e,n=>t[n])}function sU(e,t){const n=H5(e,t)*2.5-G5(e,t)*1.5;return i0(e,r=>t[r]>=n?t[r]:NaN)}function H5(e,t){return sA(e,.25,n=>t[n])}function Iae(e,t){return sA(e,.5,n=>t[n])}function G5(e,t){return sA(e,.75,n=>t[n])}function lU(e,t){const n=G5(e,t)*2.5-H5(e,t)*1.5;return Tl(e,r=>t[r]<=n?t[r]:NaN)}function Dae(){return(e,t)=>{const{encode:n}=t,{y:r,x:i}=n,{value:s}=r,{value:l}=i;return[Array.from(Nu(e,p=>l[+p]).values()).flatMap(p=>{const v=sU(p,s),y=lU(p,s);return p.filter(b=>s[b]<v||s[b]>y)}),t]}}const uU=e=>{const{data:t,encode:n,style:r={},tooltip:i={},transform:s,animate:l}=e,c=aU(e,["data","encode","style","tooltip","transform","animate"]),{point:h=!0}=r,p=aU(r,["point"]),{y:v}=n,y={y:v,y1:v,y2:v,y3:v,y4:v},b={y1:H5,y2:Iae,y3:G5},T=pm(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),M=pm(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!h)return Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:Rae},b),{y4:Pae})],encode:Object.assign(Object.assign({},n),y),style:p,tooltip:T},c);const R=Eo(p,"box"),I=Eo(p,"point");return[Object.assign({type:"box",data:t,transform:[Object.assign(Object.assign({type:"groupX",y:sU},b),{y4:lU})],encode:Object.assign(Object.assign({},n),y),style:R,tooltip:T,animate:vm(l,"box")},c),{type:"point",data:t,transform:[{type:Dae}],encode:n,style:Object.assign({},I),tooltip:M,animate:vm(l,"point")}]};uU.props={};const cU=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))/2,Lae=(e,t)=>{if(!t)return;const{coordinate:n}=t;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(i,s,l)=>{const{document:c}=t.canvas,{color:h,index:p}=s,v=c.createElement("g",{}),y=cU(i[0],i[1]),b=cU(i[0],r)*2,T=c.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",y,y,0,1,0,...i[1]],["A",b+y*2,b+y*2,0,0,0,...i[2]],["A",y,y,0,1,p===0?0:1,...i[3]],["A",b,b,0,0,1,...i[0]],["Z"]]},l),B_(e,["shape","last","first"])),{fill:h||l.color})});return v.appendChild(T),v}};var GA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Nae=(e,t)=>{const{shape:n,radius:r}=e,i=GA(e,["shape","radius"]),s=Eo(i,"pointer"),l=Eo(i,"pin"),{shape:c}=s,h=GA(s,["shape"]),{shape:p}=l,v=GA(l,["shape"]),{coordinate:y,theme:b}=t;return(T,M)=>{const R=T.map(ut=>y.invert(ut)),[I,N,z]=r4(y,"polar"),H=y.clone(),{color:X}=M,Y=w2({startAngle:I,endAngle:N,innerRadius:z,outerRadius:r});Y.push(["cartesian"]),H.update({transformations:Y});const ne=R.map(ut=>H.map(ut)),[pe,ye]=LM(ne),[De,Xe]=y.getCenter(),Ke=Object.assign(Object.assign({x1:pe,y1:ye,x2:De,y2:Xe,stroke:X},h),i),mt=Object.assign(Object.assign({cx:De,cy:Xe,stroke:X},v),i),Qe=Ra(new yc);return Sv(c)||(typeof c=="function"?Qe.append(()=>c(ne,M,H,b)):Qe.append("line").call(sa,Ke).node()),Sv(p)||(typeof p=="function"?Qe.append(()=>p(ne,M,H,b)):Qe.append("circle").call(sa,mt).node()),Qe.node()}},fU={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},Fae={style:{shape:Nae,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},Bae={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"}};function kae(e){if((0,yu.Z)(e)){const t=Math.max(0,Math.min(e,1));return{percent:t,target:t,total:1}}return e}function zae(e,t){const{name:n="score",target:r,total:i,percent:s,thresholds:l=[]}=kae(e),c=s||r,h=s?1:i,p=Object.assign({y:{domain:[0,h]}},t);return l.length?{targetData:[{x:n,y:c,color:"target"}],totalData:l.map((v,y)=>({x:n,y:y>=1?v-l[y-1]:v,color:y})),target:c,total:h,scale:p}:{targetData:[{x:n,y:c,color:"target"}],totalData:[{x:n,y:c,color:"target"},{x:n,y:h-c,color:"total"}],target:c,total:h,scale:p}}function Uae(e,{target:t,total:n}){const{content:r}=e;return r?r(t,n):t.toString()}const hU=e=>{const{data:t={},scale:n={},style:r={},animate:i={},transform:s=[]}=e,l=GA(e,["data","scale","style","animate","transform"]),{targetData:c,totalData:h,target:p,total:v,scale:y}=zae(t,n),b=Eo(r,"text"),T=yw(r,["pointer","pin"]),M=Eo(r,"arc"),R=M.shape;return[hi({},fU,Object.assign({type:"interval",transform:[{type:"stackY"}],data:h,scale:y,style:R==="round"?Object.assign(Object.assign({},M),{shape:Lae}):M,animate:typeof i=="object"?Eo(i,"arc"):i},l)),hi({},fU,Fae,Object.assign({type:"point",data:c,scale:y,style:T,animate:typeof i=="object"?Eo(i,"indicator"):i},l)),hi({},Bae,{style:Object.assign({text:Uae(b,{target:p,total:v})},b),animate:typeof i=="object"?Eo(i,"text"):i})]};hU.props={};const dU=5e3;function pU(e,t,n){return e+(t-e)*n}function jae(e,t,n,r){return t===0?[[e+1/2*n/Math.PI/2,r/2],[e+1/2*n/Math.PI,r],[e+n/4,r]]:t===1?[[e+1/2*n/Math.PI/2*(Math.PI-2),r],[e+1/2*n/Math.PI/2*(Math.PI-1),r/2],[e+n/4,0]]:t===2?[[e+1/2*n/Math.PI/2,-r/2],[e+1/2*n/Math.PI,-r],[e+n/4,-r]]:[[e+1/2*n/Math.PI/2*(Math.PI-2),-r],[e+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[e+n/4,0]]}function Vae(e,t,n,r,i,s,l){const c=Math.ceil(2*e/n*4)*4,h=[];let p=r;for(;p<-Math.PI*2;)p+=Math.PI*2;for(;p>0;)p-=Math.PI*2;p=p/Math.PI/2*n;const v=s-e+p-e*2;h.push(["M",v,t]);let y=0;for(let b=0;b<c;++b){const T=b%4,M=jae(b*n/4,T,n,i);h.push(["C",M[0][0]+v,-M[0][1]+t,M[1][0]+v,-M[1][1]+t,M[2][0]+v,-M[2][1]+t]),b===c-1&&(y=M[2][0])}return h.push(["L",y+v,l+e]),h.push(["L",v,l+e]),h.push(["Z"]),h}function Hae(e,t,n,r,i,s,l,c,h,p,v){const{fill:y,fillOpacity:b,opacity:T}=i;for(let M=0;M<r;M++){const R=r<=1?1:M/(r-1),I=Vae(c,l+c*n,h,0,c/40,e,t),N=v.createElement("path",{style:{d:I,fill:y,opacity:pU(.2,.9,R)*Number(T||b)}});s.appendChild(N);try{if(p===!1)return;const z=[{transform:"translate(0, 0)"},{transform:`translate(${h*2}, 0)`}];N.animate(z,{duration:pU(.5*dU,dU,R)*2,iterations:1/0})}catch(z){console.warn("off-screen group animate error!")}}}function Gae(e,t,n){return`
      M ${e} ${t-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function Wae(e,t,n){const i=n*.618;return`
      M ${e-i} ${t-n}
      L ${e+i} ${t-n}
      L ${e+i} ${t+n}
      L ${e-i} ${t+n}
      Z
    `}function Zae(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t}
      L ${e} ${t+n}
      L ${e-n} ${t}
      Z
    `}function Xae(e,t,n){return`
      M ${e} ${t-n}
      L ${e+n} ${t+n}
      L ${e-n} ${t+n}
      Z
    `}function Yae(e,t,n){const r=n*4/3,i=Math.max(r,n*2),s=r/2,l=e,c=s+t-i/2,h=Math.asin(s/((i-s)*.85)),p=Math.sin(h)*s,v=Math.cos(h)*s,y=l-v,b=c+p,T=e,M=c+s/Math.sin(h);return`
      M ${y} ${b}
      A ${s} ${s} 0 1 1 ${y+v*2} ${b}
      Q ${T} ${M} ${e} ${t+i/2}
      Q ${T} ${M} ${y} ${b}
      Z 
    `}const vU={pin:Yae,rect:Wae,circle:Gae,diamond:Zae,triangle:Xae};var mU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const $ae=(e="circle")=>vU[e]||vU.circle,gU=(e,t)=>{if(!t)return;const{coordinate:n}=t,{liquidOptions:r,styleOptions:i}=e,{liquidShape:s,percent:l}=r,{background:c,outline:h={},wave:p={}}=i,v=mU(i,["background","outline","wave"]),{border:y=2,distance:b=0}=h,T=mU(h,["border","distance"]),{length:M=192,count:R=3}=p;return(I,N,z)=>{const{document:H}=t.canvas,{color:X,fillOpacity:Y}=z,ne=Object.assign(Object.assign({fill:X},z),v),pe=H.createElement("g",{}),[ye,De]=n.getCenter(),Xe=n.getSize(),Ke=Math.min(...Xe)/2,Qe=(_c(s)?s:$ae(s))(ye,De,Ke,...Xe);if(Object.keys(c).length){const gt=H.createElement("path",{style:Object.assign({d:Qe,fill:"#fff"},c)});pe.appendChild(gt)}if(l>0){const gt=H.createElement("path",{style:{d:Qe}});pe.appendChild(gt),pe.style.clipPath=gt,Hae(ye,De,1-l,R,ne,pe,gt.getBBox().y,Ke*2,M,!0,H)}const ut=H.createElement("path",{style:{d:Qe,fill:"transparent",lineWidth:y+2*b,stroke:"#fff"}}),ct=H.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:Qe,stroke:X,strokeOpacity:Y,lineWidth:y},ne),T),{fill:"transparent"})});return pe.appendChild(ut),pe.appendChild(ct),pe}};gU.props={};var qae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Kae={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:gU},animate:{enter:{type:"fadeIn"}}},Qae={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},yU=e=>{const{data:t={},style:n={},animate:r}=e,i=qae(e,["data","style","animate"]),s=Math.max(0,(0,yu.Z)(t)?t:t==null?void 0:t.percent),l=[{percent:s,type:"liquid"}],c=Object.assign(Object.assign({},Eo(n,"text")),Eo(n,"content")),h=Eo(n,"outline"),p=Eo(n,"wave"),v=Eo(n,"background");return[hi({},Kae,Object.assign({type:"interval",data:l,style:{liquidOptions:{percent:s,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:h,wave:p,background:v})},animate:r},i)),hi({},Qae,{style:Object.assign({text:`${ey(s*100)} %`},c),animate:r})]};yU.props={};var hg=L(69916);const _U=1e-10;function bU(e,t){const n=ese(e),r=n.filter(function(h){return Jae(h,e)});let i=0,s=0,l;const c=[];if(r.length>1){const h=tse(r);for(l=0;l<r.length;++l){const v=r[l];v.angle=Math.atan2(v.x-h.x,v.y-h.y)}r.sort(function(v,y){return y.angle-v.angle});let p=r[r.length-1];for(l=0;l<r.length;++l){const v=r[l];s+=(p.x+v.x)*(v.y-p.y);const y={x:(v.x+p.x)/2,y:(v.y+p.y)/2};let b=null;for(let T=0;T<v.parentIndex.length;++T)if(p.parentIndex.indexOf(v.parentIndex[T])>-1){const M=e[v.parentIndex[T]],R=Math.atan2(v.x-M.x,v.y-M.y),I=Math.atan2(p.x-M.x,p.y-M.y);let N=I-R;N<0&&(N+=2*Math.PI);const z=I-N/2;let H=WE(y,{x:M.x+M.radius*Math.sin(z),y:M.y+M.radius*Math.cos(z)});H>M.radius*2&&(H=M.radius*2),(b===null||b.width>H)&&(b={circle:M,width:H,p1:v,p2:p})}b!==null&&(c.push(b),i+=W5(b.circle.radius,b.width),p=v)}}else{let h=e[0];for(l=1;l<e.length;++l)e[l].radius<h.radius&&(h=e[l]);let p=!1;for(l=0;l<e.length;++l)if(WE(e[l],h)>Math.abs(h.radius-e[l].radius)){p=!0;break}p?i=s=0:(i=h.radius*h.radius*Math.PI,c.push({circle:h,p1:{x:h.x,y:h.y+h.radius},p2:{x:h.x-_U,y:h.y+h.radius},width:h.radius*2}))}return s/=2,t&&(t.area=i+s,t.arcArea=i,t.polygonArea=s,t.arcs=c,t.innerPoints=r,t.intersectionPoints=n),i+s}function Jae(e,t){for(let n=0;n<t.length;++n)if(WE(e,t[n])>t[n].radius+_U)return!1;return!0}function ese(e){const t=[];for(let n=0;n<e.length;++n)for(let r=n+1;r<e.length;++r){const i=EU(e[n],e[r]);for(let s=0;s<i.length;++s){const l=i[s];l.parentIndex=[n,r],t.push(l)}}return t}function W5(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function WE(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function xU(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);const r=e-(n*n-t*t+e*e)/(2*n),i=t-(n*n-e*e+t*t)/(2*n);return W5(e,r)+W5(t,i)}function EU(e,t){const n=WE(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];const s=(r*r-i*i+n*n)/(2*n),l=Math.sqrt(r*r-s*s),c=e.x+s*(t.x-e.x)/n,h=e.y+s*(t.y-e.y)/n,p=-(t.y-e.y)*(l/n),v=-(t.x-e.x)*(l/n);return[{x:c+p,y:h-v},{x:c-p,y:h+v}]}function tse(e){const t={x:0,y:0};for(let n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function nse(e,t){t=t||{},t.maxIterations=t.maxIterations||500;const n=t.initialLayout||ase,r=t.lossFunction||X5;e=rse(e);const i=n(e,t),s=[],l=[];let c;for(c in i)i.hasOwnProperty(c)&&(s.push(i[c].x),s.push(i[c].y),l.push(c));const p=(0,hg.nelderMead)(function(v){const y={};for(let b=0;b<l.length;++b){const T=l[b];y[T]={x:v[2*b],y:v[2*b+1],radius:i[T].radius}}return r(y,e)},s,t).x;for(let v=0;v<l.length;++v)c=l[v],i[c].x=p[2*v],i[c].y=p[2*v+1];return i}const SU=1e-10;function Z5(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+SU?Math.abs(e-t):(0,hg.bisect)(function(r){return xU(e,t,r)-n},0,e+t)}function rse(e){e=e.slice();const t=[],n={};let r,i,s,l;for(r=0;r<e.length;++r){const c=e[r];c.sets.length==1?t.push(c.sets[0]):c.sets.length==2&&(s=c.sets[0],l=c.sets[1],n[[s,l]]=!0,n[[l,s]]=!0)}for(t.sort((c,h)=>c>h?1:-1),r=0;r<t.length;++r)for(s=t[r],i=r+1;i<t.length;++i)l=t[i],[s,l]in n||e.push({sets:[s,l],size:0});return e}function ise(e,t,n){const r=(0,hg.zerosM)(t.length,t.length),i=(0,hg.zerosM)(t.length,t.length);return e.filter(function(s){return s.sets.length==2}).map(function(s){const l=n[s.sets[0]],c=n[s.sets[1]],h=Math.sqrt(t[l].size/Math.PI),p=Math.sqrt(t[c].size/Math.PI),v=Z5(h,p,s.size);r[l][c]=r[c][l]=v;let y=0;s.size+1e-10>=Math.min(t[l].size,t[c].size)?y=1:s.size<=1e-10&&(y=-1),i[l][c]=i[c][l]=y}),{distances:r,constraints:i}}function ose(e,t,n,r){let i=0,s;for(s=0;s<t.length;++s)t[s]=0;for(s=0;s<n.length;++s){const l=e[2*s],c=e[2*s+1];for(let h=s+1;h<n.length;++h){const p=e[2*h],v=e[2*h+1],y=n[s][h],b=r[s][h],T=(p-l)*(p-l)+(v-c)*(v-c),M=Math.sqrt(T),R=T-y*y;b>0&&M<=y||b<0&&M>=y||(i+=2*R*R,t[2*s]+=4*R*(l-p),t[2*s+1]+=4*R*(c-v),t[2*h]+=4*R*(p-l),t[2*h+1]+=4*R*(v-c))}}return i}function ase(e,t){let n=lse(e,t);const r=t.lossFunction||X5;if(e.length>=8){const i=sse(e,t),s=r(i,e),l=r(n,e);s+1e-8<l&&(n=i)}return n}function sse(e,t){t=t||{};const n=t.restarts||10,r=[],i={};let s;for(s=0;s<e.length;++s){const R=e[s];R.sets.length==1&&(i[R.sets[0]]=r.length,r.push(R))}const l=ise(e,r,i);let c=l.distances;const h=l.constraints,p=(0,hg.norm2)(c.map(hg.norm2))/c.length;c=c.map(function(R){return R.map(function(I){return I/p})});const v=function(R,I){return ose(R,I,c,h)};let y,b;for(s=0;s<n;++s){const R=(0,hg.zeros)(c.length*2).map(Math.random);b=(0,hg.conjugateGradient)(v,R,t),(!y||b.fx<y.fx)&&(y=b)}const T=y.x,M={};for(s=0;s<r.length;++s){const R=r[s];M[R.sets[0]]={x:T[2*s]*p,y:T[2*s+1]*p,radius:Math.sqrt(R.size/Math.PI)}}if(t.history)for(s=0;s<t.history.length;++s)(0,hg.scale)(t.history[s].x,p);return M}function lse(e,t){const n=t&&t.lossFunction?t.lossFunction:X5,r={},i={};let s;for(let y=0;y<e.length;++y){const b=e[y];b.sets.length==1&&(s=b.sets[0],r[s]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:b.size,radius:Math.sqrt(b.size/Math.PI)},i[s]=[])}e=e.filter(function(y){return y.sets.length==2});for(let y=0;y<e.length;++y){const b=e[y];let T=b.hasOwnProperty("weight")?b.weight:1;const M=b.sets[0],R=b.sets[1];b.size+SU>=Math.min(r[M].size,r[R].size)&&(T=0),i[M].push({set:R,size:b.size,weight:T}),i[R].push({set:M,size:b.size,weight:T})}const l=[];for(s in i)if(i.hasOwnProperty(s)){let y=0;for(let b=0;b<i[s].length;++b)y+=i[s][b].size*i[s][b].weight;l.push({set:s,size:y})}function c(y,b){return b.size-y.size}l.sort(c);const h={};function p(y){return y.set in h}function v(y,b){r[b].x=y.x,r[b].y=y.y,h[b]=!0}v({x:0,y:0},l[0].set);for(let y=1;y<l.length;++y){const b=l[y].set,T=i[b].filter(p);if(s=r[b],T.sort(c),T.length===0)throw"ERROR: missing pairwise overlap information";const M=[];for(let N=0;N<T.length;++N){const z=r[T[N].set],H=Z5(s.radius,z.radius,T[N].size);M.push({x:z.x+H,y:z.y}),M.push({x:z.x-H,y:z.y}),M.push({y:z.y+H,x:z.x}),M.push({y:z.y-H,x:z.x});for(let X=N+1;X<T.length;++X){const Y=r[T[X].set],ne=Z5(s.radius,Y.radius,T[X].size),pe=EU({x:z.x,y:z.y,radius:H},{x:Y.x,y:Y.y,radius:ne});for(let ye=0;ye<pe.length;++ye)M.push(pe[ye])}}let R=1e50,I=M[0];for(let N=0;N<M.length;++N){r[b].x=M[N].x,r[b].y=M[N].y;const z=n(r,e);z<R&&(R=z,I=M[N])}v(I,b)}return r}function X5(e,t){let n=0;function r(i){return i.map(function(s){return e[s]})}for(let i=0;i<t.length;++i){const s=t[i];let l;if(s.sets.length==1)continue;if(s.sets.length==2){const h=e[s.sets[0]],p=e[s.sets[1]];l=xU(h.radius,p.radius,WE(h,p))}else l=bU(r(s.sets));const c=s.hasOwnProperty("weight")?s.weight:1;n+=c*(l-s.size)*(l-s.size)}return n}function use(e,t,n){n===null?e.sort(function(i,s){return s.radius-i.radius}):e.sort(n);let r;if(e.length>0){const i=e[0].x,s=e[0].y;for(r=0;r<e.length;++r)e[r].x-=i,e[r].y-=s}if(e.length==2&&distance(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y),e.length>1){const i=Math.atan2(e[1].x,e[1].y)-t;let s,l;const c=Math.cos(i),h=Math.sin(i);for(r=0;r<e.length;++r)s=e[r].x,l=e[r].y,e[r].x=c*s-h*l,e[r].y=h*s+c*l}if(e.length>2){let i=Math.atan2(e[2].x,e[2].y)-t;for(;i<0;)i+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI;if(i>Math.PI){const s=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){const l=(e[r].x+s*e[r].y)/(1+s*s);e[r].x=2*l-e[r].x,e[r].y=2*l*s-e[r].y}}}}function cse(e){e.map(function(l){l.parent=l});function t(l){return l.parent!==l&&(l.parent=t(l.parent)),l.parent}function n(l,c){const h=t(l),p=t(c);h.parent=p}for(let l=0;l<e.length;++l)for(let c=l+1;c<e.length;++c){const h=e[l].radius+e[c].radius;distance(e[l],e[c])+1e-10<h&&n(e[c],e[l])}const r={};let i;for(let l=0;l<e.length;++l)i=t(e[l]).parent.setid,i in r||(r[i]=[]),r[i].push(e[l]);e.map(function(l){delete l.parent});const s=[];for(i in r)r.hasOwnProperty(i)&&s.push(r[i]);return s}function Y5(e){const t=function(n){const r=Math.max.apply(null,e.map(function(s){return s[n]+s.radius})),i=Math.min.apply(null,e.map(function(s){return s[n]-s.radius}));return{max:r,min:i}};return{xRange:t("x"),yRange:t("y")}}function sve(e,t,n){t===null&&(t=Math.PI/2);let r=[],i,s;for(s in e)if(e.hasOwnProperty(s)){const b=e[s];r.push({x:b.x,y:b.y,radius:b.radius,setid:s})}const l=cse(r);for(i=0;i<l.length;++i){use(l[i],t,n);const b=Y5(l[i]);l[i].size=(b.xRange.max-b.xRange.min)*(b.yRange.max-b.yRange.min),l[i].bounds=b}l.sort(function(b,T){return T.size-b.size}),r=l[0];let c=r.bounds;const h=(c.xRange.max-c.xRange.min)/50;function p(b,T,M){if(!b)return;const R=b.bounds;let I,N,z;T?I=c.xRange.max-R.xRange.min+h:(I=c.xRange.max-R.xRange.max,z=(R.xRange.max-R.xRange.min)/2-(c.xRange.max-c.xRange.min)/2,z<0&&(I+=z)),M?N=c.yRange.max-R.yRange.min+h:(N=c.yRange.max-R.yRange.max,z=(R.yRange.max-R.yRange.min)/2-(c.yRange.max-c.yRange.min)/2,z<0&&(N+=z));for(let H=0;H<b.length;++H)b[H].x+=I,b[H].y+=N,r.push(b[H])}let v=1;for(;v<l.length;)p(l[v],!0,!1),p(l[v+1],!1,!0),p(l[v+2],!0,!0),v+=3,c=Y5(r);const y={};for(i=0;i<r.length;++i)y[r[i].setid]=r[i];return y}function fse(e,t,n,r){const i=[],s=[];for(const R in e)e.hasOwnProperty(R)&&(s.push(R),i.push(e[R]));t-=2*r,n-=2*r;const l=Y5(i),c=l.xRange,h=l.yRange;if(c.max==c.min||h.max==h.min)return console.log("not scaling solution: zero size detected"),e;const p=t/(c.max-c.min),v=n/(h.max-h.min),y=Math.min(v,p),b=(t-(c.max-c.min)*y)/2,T=(n-(h.max-h.min)*y)/2,M={};for(let R=0;R<i.length;++R){const I=i[R];M[s[R]]={radius:y*I.radius,x:r+b+(I.x-c.min)*y,y:r+T+(I.y-h.min)*y}}return M}function hse(e,t,n){const r=[],i=e-n,s=t;return r.push("M",i,s),r.push("A",n,n,0,1,0,i+2*n,s),r.push("A",n,n,0,1,0,i,s),r.join(" ")}function dse(e){const t={};bU(e,t);const n=t.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return hse(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let i=0;i<n.length;++i){const s=n[i],l=s.circle.radius,c=s.width>l;r.push(`
A`,l,l,0,c?1:0,1,s.p1.x,s.p1.y)}return r.join(" ")}}const wU=e=>{const{sets:t="sets",size:n="size",as:r=["key","path"],padding:i=0}=e,[s,l]=r;return c=>{const h=c.map(y=>Object.assign(Object.assign({},y),{sets:y[t],size:y[n],[s]:y.sets.join("&")}));h.sort((y,b)=>y.sets.length-b.sets.length);const p=nse(h);let v;return h.map(y=>{const b=y[t],T=({width:M,height:R})=>{v=v||fse(p,M,R,i);const I=b.map(z=>v[z]);let N=dse(I);return/[zZ]$/.test(N)||(N+=" Z"),N};return Object.assign(Object.assign({},y),{[l]:T})})}};wU.props={};function pse(){return{"data.venn":wU,"mark.boxplot":uU,"mark.gauge":hU,"mark.wordCloud":eP,"mark.liquid":yU}}function vse(){return Object.assign(Object.assign(Object.assign(Object.assign({},Aie()),Mae()),pse()),Ere())}var WA=function(){return WA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},WA.apply(this,arguments)},mse=J$(Q$,WA(WA({},vse()),Bq())),gse="[object Boolean]";function yse(e){return e===!0||e===!1||Oa(e)&&fe(e)==gse}var $5=yse,ZE=function(){return ZE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ZE.apply(this,arguments)},_se=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},bse=["renderer"],TU=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],q5="__transform__",xse="__skipDelCustomKeys__",r1=function(e,t){return $5(t)?{type:e,available:t}:ZE({type:e},t)},K5={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",sizeField:"encode.size",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(e){return r1("stackY",e)}},normalize:{target:"transform",value:function(e){return r1("normalizeY",e)}},percent:{target:"transform",value:function(e){return r1("normalizeY",e)}},group:{target:"transform",value:function(e){return r1("dodgeX",e)}},sort:{target:"transform",value:function(e){return r1("sortX",e)}},symmetry:{target:"transform",value:function(e){return r1("symmetryY",e)}},diff:{target:"transform",value:function(e){return r1("diffY",e)}},meta:{target:"scale",value:function(e){return e}},label:{target:"labels",value:function(e){return e}},shape:"style.shape",connectNulls:{target:"style",value:function(e){return $5(e)?{connect:e}:e}}},Q5=["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],ZA=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:Q5},{key:"point",type:"point",extend_keys:Q5},{key:"area",type:"area",extend_keys:Q5}],Ese=[{key:"transform",callback:function(e,t,n){var r;e[t]=e[t]||[];var i=n.available,s=i===void 0?!0:i,l=_se(n,["available"]);if(s)e[t].push(ZE((r={},r[q5]=!0,r),l));else{var c=e[t].indexOf(function(h){return h.type===n.type});c!==-1&&e[t].splice(c,1)}}},{key:"labels",callback:function(e,t,n){var r;if(!n||It(n)){e[t]=n||[];return}n.text||(n.text=e.yField),e[t]=e[t]||[],e[t].push(ZE((r={},r[q5]=!0,r),n))}}],J5=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],Sse=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XA=function(){return XA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},XA.apply(this,arguments)},wse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Tse=function(e){Sse(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=wse(n,["style"]);return e.call(this,XA({style:XA({fill:"#eee"},r)},i))||this}return t}(Ko),Ase=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YA=function(){return YA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},YA.apply(this,arguments)},Cse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},AU=function(e){Ase(t,e);function t(n){n===void 0&&(n={});var r=n.style,i=Cse(n,["style"]);return e.call(this,YA({style:YA({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},i))||this}return t}(oc);function Ose(e,t,n){(n!==void 0&&!dt(e[t],n)||n===void 0&&!(t in e))&&ln(e,t,n)}var eI=Ose;function Mse(e){return function(t,n,r){for(var i=-1,s=Object(t),l=r(t),c=l.length;c--;){var h=l[e?c:++i];if(n(s[h],h,s)===!1)break}return t}}var Rse=Mse,Pse=Rse(),CU=Pse;function Ise(e){return Oa(e)&&Gl(e)}var Dse=Ise,Lse="[object Object]",Nse=Function.prototype,Fse=Object.prototype,OU=Nse.toString,Bse=Fse.hasOwnProperty,kse=OU.call(Object);function zse(e){if(!Oa(e)||fe(e)!=Lse)return!1;var t=Wf(e);if(t===null)return!0;var n=Bse.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&OU.call(n)==kse}var tI=zse;function Use(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var nI=Use;function jse(e){return Ur(e,Qt(e))}var Vse=jse;function Hse(e,t,n,r,i,s,l){var c=nI(e,n),h=nI(t,n),p=l.get(h);if(p){eI(e,n,p);return}var v=s?s(c,h,n+"",e,t,l):void 0,y=v===void 0;if(y){var b=It(h),T=!b&&Sf(h),M=!b&&!T&&h0(h);v=h,b||T||M?It(c)?v=c:Dse(c)?v=Ss(c):T?(y=!1,v=Cu(h,!0)):M?(y=!1,v=Id(h,!0)):v=[]:tI(h)||cc(h)?(v=c,cc(c)?v=Vse(c):(!de(c)||qn(c))&&(v=K0(h))):y=!1}y&&(l.set(h,v),i(v,h,r,s,l),l.delete(h)),eI(e,n,v)}var Gse=Hse;function MU(e,t,n,r,i){e!==t&&CU(t,function(s,l){if(i||(i=new Xu),de(s))Gse(e,t,l,n,MU,r,i);else{var c=r?r(nI(e,l),s,l+"",e,t,i):void 0;c===void 0&&(c=s),eI(e,l,c)}},Qt)}var Wse=MU;function Zse(e){return e}var rI=Zse;function Xse(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Yse=Xse,RU=Math.max;function $se(e,t,n){return t=RU(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=RU(r.length-t,0),l=Array(s);++i<s;)l[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=n(l),Yse(e,this,c)}}var PU=$se;function qse(e){return function(){return e}}var Kse=qse,Qse=mn?function(e,t){return mn(e,"toString",{configurable:!0,enumerable:!1,value:Kse(t),writable:!0})}:rI,Jse=Qse,ele=800,tle=16,nle=Date.now;function rle(e){var t=0,n=0;return function(){var r=nle(),i=tle-(r-n);if(n=r,i>0){if(++t>=ele)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var ile=rle,ole=ile(Jse),IU=ole;function ale(e,t){return IU(PU(e,t,rI),e+"")}var sle=ale;function lle(e,t,n){if(!de(n))return!1;var r=typeof t;return(r=="number"?Gl(n)&&wf(t,n.length):r=="string"&&t in n)?dt(n[t],e):!1}var ule=lle;function cle(e){return sle(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,l=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,l&&ule(n[0],n[1],l)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,s)}return t})}var DU=cle,fle=DU(function(e,t,n,r){Wse(e,t,n,r)}),hle=fle,LU=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},dle=function(e,t){if(It(t))return t},Sy=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return hle.apply(void 0,LU(LU([],e,!1),[dle],!1))},ple=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),NU=function(e){ple(t,e);function t(n,r,i){var s=e.call(this,{style:Sy(i,r)})||this;return s.chart=n,s}return t.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},t.prototype.disconnectedCallback=function(){},t.prototype.attributeChangedCallback=function(n){},t.prototype.update=function(n,r){var i;return this.attr(Sy({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},t.prototype.clear=function(){this.removeChildren()},t.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),i=[];return r.forEach(function(s){var l=s.getBBox(),c=l.x,h=l.y,p=l.width,v=l.height,y=s.__data__;i.push({bbox:l,x:c,y:h,width:p,height:v,key:y.key,data:y})}),i},t.prototype.bindEvents=function(n,r){},t}(Gd),vle=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$A=function(){return $A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$A.apply(this,arguments)},mle=function(e){vle(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=this.getElementsLayout(),i=r[0],s=i.x,l=i.y,c=i.height,h=i.width,p=i.data,v=["items",0,"value"],y=_i(p,v),b=n?r[1].y-l-c:r[1].x-s-h,T=[],M=this.attributes,R=M.size,I=R===void 0?40:R,N=M.arrowSize,z=N===void 0?20:N,H=M.spacing,X=H===void 0?4:H;return r.forEach(function(Y,ne){if(ne>0){var pe=Y.x,ye=Y.y,De=Y.height,Xe=Y.width,Ke=Y.data,mt=Y.key,Qe=_i(Ke,v),ut=I/2;if(n){var ct=pe+Xe/2,gt=ye;T.push({points:[[ct+ut,gt-b+X],[ct+ut,gt-z-X],[ct,gt-X],[ct-ut,gt-z-X],[ct-ut,gt-b+X]],center:[ct,gt-b/2-X],width:b,value:[y,Qe],key:mt})}else{var ct=pe,gt=ye+De/2;T.push({points:[[pe-b+X,gt-ut],[pe-z-X,gt-ut],[ct-X,gt],[pe-z-X,gt+ut],[pe-b+X,gt+ut]],center:[ct-b/2-X,gt],width:b,value:[y,Qe],key:mt})}y=Qe}}),T},t.prototype.render=function(){this.setDirection(),this.drawConversionTag()},t.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=_i(n,"options.transformations"),i="horizontal";r.forEach(function(s){s.includes("transpose")&&(i="vertical")}),this.direction=i},t.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),i=this.attributes,s=i.style,l=i.text,c=l.style,h=l.formatter;r.forEach(function(p){var v=p.points,y=p.center,b=p.value,T=p.key,M=b[0],R=b[1],I=y[0],N=y[1],z=new Tse({style:$A({points:v,fill:"#eee"},s),id:"polygon-".concat(T)}),H=new AU({style:$A({x:I,y:N,text:qn(h)?h(M,R):(R/M*100).toFixed(2)+"%"},c),id:"text-".concat(T)});n.appendChild(z),n.appendChild(H)})},t.prototype.update=function(){var n=this,r=this.getConversionTagLayout();r.forEach(function(i){var s=i.points,l=i.center,c=i.key,h=l[0],p=l[1],v=n.getElementById("polygon-".concat(c)),y=n.getElementById("text-".concat(c));v.setAttribute("points",s),y.setAttribute("x",h),y.setAttribute("y",p)})},t.tag="ConversionTag",t}(NU),gle=1,yle=2;function _le(e,t,n,r){var i=n.length,s=i,l=!r;if(e==null)return!s;for(e=Object(e);i--;){var c=n[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<s;){c=n[i];var h=c[0],p=e[h],v=c[1];if(l&&c[2]){if(p===void 0&&!(h in e))return!1}else{var y=new Xu;if(r)var b=r(p,v,h,e,t,y);if(!(b===void 0?je(v,p,gle|yle,r,y):b))return!1}}return!0}var ble=_le;function xle(e){return e===e&&!de(e)}var FU=xle;function Ele(e){for(var t=Ku(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,FU(i)]}return t}var Sle=Ele;function wle(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var BU=wle;function Tle(e){var t=Sle(e);return t.length==1&&t[0][2]?BU(t[0][0],t[0][1]):function(n){return n===e||ble(n,e,t)}}var Ale=Tle;function Cle(e,t){return e!=null&&t in Object(e)}var Ole=Cle;function Mle(e,t,n){t=Si(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var l=ao(t[r]);if(!(s=e!=null&&n(e,l)))break;e=e[l]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&rp(i)&&wf(l,i)&&(It(e)||cc(e)))}var Rle=Mle;function Ple(e,t){return e!=null&&Rle(e,t,Ole)}var kU=Ple,Ile=1,Dle=2;function Lle(e,t){return Cm(e)&&FU(t)?BU(ao(e),t):function(n){var r=_i(n,e);return r===void 0&&r===t?kU(n,e):je(t,r,Ile|Dle)}}var Nle=Lle;function Fle(e){return function(t){return t==null?void 0:t[e]}}var Ble=Fle;function kle(e){return function(t){return ro(t,e)}}var zle=kle;function Ule(e){return Cm(e)?Ble(ao(e)):zle(e)}var jle=Ule;function Vle(e){return typeof e=="function"?e:e==null?rI:typeof e=="object"?It(e)?Nle(e[0],e[1]):Ale(e):jle(e)}var iI=Vle;function Hle(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}var Gle=Hle;function Wle(e){return e!==e}var Zle=Wle;function Xle(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var Yle=Xle;function $le(e,t,n){return t===t?Yle(e,t,n):Gle(e,Zle,n)}var zU=$le;function qle(e,t){var n=e==null?0:e.length;return!!n&&zU(e,t,0)>-1}var Kle=qle;function Qle(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var Jle=Qle;function eue(){}var UU=eue,tue=1/0,nue=wc&&1/Ol(new wc([,-0]))[1]==tue?function(e){return new wc(e)}:UU,rue=nue,iue=200;function oue(e,t,n){var r=-1,i=Kle,s=e.length,l=!0,c=[],h=c;if(n)l=!1,i=Jle;else if(s>=iue){var p=t?null:rue(e);if(p)return Ol(p);l=!1,i=sf,h=new Uh}else h=t?[]:c;e:for(;++r<s;){var v=e[r],y=t?t(v):v;if(v=n||v!==0?v:0,l&&y===y){for(var b=h.length;b--;)if(h[b]===y)continue e;t&&h.push(y),c.push(v)}else i(h,y,n)||(h!==c&&h.push(y),c.push(v))}return c}var aue=oue;function sue(e,t){return e&&e.length?aue(e,iI(t,2)):[]}var oI=sue;function lue(e,t,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;){var l=e[i];t(r,l,n(l),e)}return r}var uue=lue;function cue(e,t){return e&&CU(e,t,Ku)}var fue=cue;function hue(e,t){return function(n,r){if(n==null)return n;if(!Gl(n))return e(n,r);for(var i=n.length,s=t?i:-1,l=Object(n);(t?s--:++s<i)&&r(l[s],s,l)!==!1;);return n}}var due=hue,pue=due(fue),jU=pue;function vue(e,t,n,r){return jU(e,function(i,s,l){t(r,i,n(i),l)}),r}var mue=vue;function gue(e,t){return function(n,r){var i=It(n)?uue:mue,s=t?t():{};return i(n,e,iI(r,2),s)}}var yue=gue,_ue=Object.prototype,bue=_ue.hasOwnProperty,xue=yue(function(e,t,n){bue.call(e,n)?e[n].push(t):ln(e,n,[t])}),VU=xue,aI=32,HU=16,GU=48,Eue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XE=function(){return XE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},XE.apply(this,arguments)},Sue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},wue=function(e){Eue(t,e);function t(n,r){return e.call(this,n,r,{type:t.tag})||this}return t.prototype.render=function(){this.drawText()},t.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",i=this.getElementsLayout(),s=r?oI(i,"x"):oI(i,"y"),l=["title"],c=[],h=this.chart.getContext().views,p=_i(h,[0,"layout"]),v=p.width,y=p.height;return s.forEach(function(b){var T=b.x,M=b.y,R=b.height,I=b.width,N=b.data,z=b.key,H=_i(N,l);r?c.push({x:T+I/2,y,text:H,key:z}):c.push({x:v,y:M+R/2,text:H,key:z})}),oI(c,"text").length!==c.length&&(c=Object.values(VU(c,"text")).map(function(b){var T,M=b.reduce(function(R,I){return R+(r?I.x:I.y)},0);return XE(XE({},b[0]),(T={},T[r?"x":"y"]=M/b.length,T))})),c},t.prototype.transformLabelStyle=function(n){var r={},i=/^label[A-Z]/;return Object.keys(n).forEach(function(s){i.test(s)&&(r[s.replace("label","").replace(/^[A-Z]/,function(l){return l.toLowerCase()})]=n[s])}),r},t.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,s=i.layout,l=i.labelFormatter,c=Sue(i,["layout","labelFormatter"]);r.forEach(function(h){var p=h.x,v=h.y,y=h.text,b=h.key,T=new AU({style:XE({x:p,y:v,text:qn(l)?l(y):y,wordWrap:!0,wordWrapWidth:s==="horizontal"?aI*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(c)),id:"text-".concat(b)});n.appendChild(T)})},t.prototype.update=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout();r.forEach(function(i){var s=i.x,l=i.y,c=i.key,h=n.getElementById("text-".concat(c));h.setAttribute("x",s),h.setAttribute("y",l)})},t.tag="BidirectionalBarAxisText",t}(NU),Tue={ConversionTag:mle,BidirectionalBarAxisText:wue},Aue=function(){function e(t,n){this.container=new Map,this.chart=t,this.config=n,this.init()}return e.prototype.init=function(){var t=this;J5.forEach(function(n){var r,i=n.key,s=n.shape,l=t.config[i];if(l){var c=new Tue[s](t.chart,l),h=t.chart.getContext().canvas;h.appendChild(c),t.container.set(i,c)}else(r=t.container.get(i))===null||r===void 0||r.clear()})},e.prototype.update=function(){var t=this;this.container.size&&J5.forEach(function(n){var r=n.key,i=t.container.get(r);i==null||i.update()})},e}();function Cue(e,t,n,r){if(!de(e))return e;t=Si(t,e);for(var i=-1,s=t.length,l=s-1,c=e;c!=null&&++i<s;){var h=ao(t[i]),p=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(i!=l){var v=c[h];p=r?r(v,h,c):void 0,p===void 0&&(p=de(v)?v:wf(t[i+1])?[]:{})}Ir(c,h,p),c=c[h]}return e}var WU=Cue;function Oue(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var l=t[r],c=ro(e,l);n(c,l)&&WU(s,Si(l,e),c)}return s}var Mue=Oue;function Rue(e,t){return Mue(e,t,function(n,r){return kU(e,r)})}var Pue=Rue,ZU=gn?gn.isConcatSpreadable:void 0;function Iue(e){return It(e)||cc(e)||!!(ZU&&e&&e[ZU])}var Due=Iue;function XU(e,t,n,r,i){var s=-1,l=e.length;for(n||(n=Due),i||(i=[]);++s<l;){var c=e[s];t>0&&n(c)?t>1?XU(c,t-1,n,r,i):et(i,c):r||(i[i.length]=c)}return i}var Lue=XU;function Nue(e){var t=e==null?0:e.length;return t?Lue(e,1):[]}var Fue=Nue;function Bue(e){return IU(PU(e,void 0,Fue),e+"")}var sI=Bue,kue=sI(function(e,t){return e==null?{}:Pue(e,t)}),YU=kue,zue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qb=function(){return Qb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Qb.apply(this,arguments)},$U="data-chart-source-type",Al=function(e){zue(t,e);function t(n,r){var i=e.call(this)||this;return i.container=typeof n=="string"?document.getElementById(n):n,i.options=i.mergeOption(r),i.createG2(),i.bindEvents(),i}return t.prototype.getChartOptions=function(){return Qb(Qb({},YU(this.options,bse)),{container:this.container})},t.prototype.getSpecOptions=function(){return this.type==="base"||this[xse]?Qb(Qb({},this.options),this.getChartOptions()):this.options},t.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new mse(this.getChartOptions()),this.container.setAttribute($U,"Ant Design Charts")},t.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&n.emit(r.type,r)})},t.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},t.prototype.getDefaultOptions=function(){},t.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation=new Aue(n.chart,n.options)}),this.bindSizeSensor()},t.prototype.update=function(n){this.options=this.mergeOption(n)},t.prototype.mergeOption=function(n){return Sy({},this.getBaseOptions(),this.getDefaultOptions(),n)},t.prototype.changeData=function(n){this.chart.changeData(n)},t.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},t.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute($U)},t.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},t.prototype.triggerResize=function(){this.chart.forceFit()},t.prototype.bindSizeSensor=function(){var n=this,r=this.options.autoFit,i=r===void 0?!0:r;i&&this.chart.on(wl.AFTER_CHANGE_SIZE,function(){n.annotation.update()})},t}(Vo),Uue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jue=function(e){Uue(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="base",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return function(n){return n}},t}(Al);function Vue(){}var lI=Vue;function qA(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}qA.prototype=fp(lI.prototype),qA.prototype.constructor=qA;var YE=qA,Hue=jc&&new jc,qU=Hue,Gue=qU?function(e){return qU.get(e)}:UU,KU=Gue,Wue={},QU=Wue,Zue=Object.prototype,Xue=Zue.hasOwnProperty;function Yue(e){for(var t=e.name+"",n=QU[t],r=Xue.call(QU,t)?n.length:0;r--;){var i=n[r],s=i.func;if(s==null||s==e)return i.name}return t}var KA=Yue,$ue=4294967295;function QA(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$ue,this.__views__=[]}QA.prototype=fp(lI.prototype),QA.prototype.constructor=QA;var uI=QA;function que(e){if(e instanceof uI)return e.clone();var t=new YE(e.__wrapped__,e.__chain__);return t.__actions__=Ss(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Kue=que,Que=Object.prototype,Jue=Que.hasOwnProperty;function JA(e){if(Oa(e)&&!It(e)&&!(e instanceof uI)){if(e instanceof YE)return e;if(Jue.call(e,"__wrapped__"))return Kue(e)}return new YE(e)}JA.prototype=lI.prototype,JA.prototype.constructor=JA;var ece=JA;function tce(e){var t=KA(e),n=ece[t];if(typeof n!="function"||!(t in uI.prototype))return!1;if(e===n)return!0;var r=KU(n);return!!r&&e===r[0]}var JU=tce,nce="Expected a function",rce=8,ice=32,oce=128,ace=256;function sce(e){return sI(function(t){var n=t.length,r=n,i=YE.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if(typeof s!="function")throw new TypeError(nce);if(i&&!l&&KA(s)=="wrapper")var l=new YE([],!0)}for(r=l?r:n;++r<n;){s=t[r];var c=KA(s),h=c=="wrapper"?KU(s):void 0;h&&JU(h[0])&&h[1]==(oce|rce|ice|ace)&&!h[4].length&&h[9]==1?l=l[KA(h[0])].apply(l,h[3]):l=s.length==1&&JU(s)?l[c]():l.thru(s)}return function(){var p=arguments,v=p[0];if(l&&p.length==1&&It(v))return l.plant(v).value();for(var y=0,b=n?t[y].apply(this,p):v;++y<n;)b=t[y].call(this,b);return b}})}var lce=sce,uce=lce(),Fl=uce,cce=function(e){var t=e.options,n=t.children,r=n===void 0?[]:n;return r.forEach(function(i){Object.keys(i).forEach(function(s){It(i[s])&&s!=="data"&&(i[s]=i[s].filter(function(l){return!l[q5]}))})}),t};function fce(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var hce=fce;function dce(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}var pce=dce;function vce(e,t){return t.length<2?e:ro(e,pce(t,0,-1))}var mce=vce;function gce(e,t){return t=Si(t,e),e=mce(e,t),e==null||delete e[ao(hce(t))]}var yce=gce;function _ce(e){return tI(e)?void 0:e}var bce=_ce,xce=1,Ece=2,Sce=4,wce=sI(function(e,t){var n={};if(e==null)return n;var r=!1;t=vi(t,function(s){return s=Si(s,e),r||(r=s.length>1),s}),Ur(e,$h(e),n),r&&(n=nv(n,xce|Ece|Sce,bce));for(var i=t.length;i--;)yce(n,t[i]);return n}),cI=wce;function Tce(e){return e===void 0}var Ace=Tce;function Cce(e,t,n){return e==null?e:WU(e,t,n)}var Da=Cce,ej=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},Oce=function(e){var t=e.children,n=t===void 0?[]:t,r=Object.keys(K5).concat(ZA.map(function(i){return i.key}));return r.forEach(function(i){delete e[i]}),n.forEach(function(i){Object.keys(i).forEach(function(s){r.includes(s)&&delete i[s]})}),Object.keys(e).forEach(function(i){ej(ej([],TU,!0),J5.map(function(s){return s.key}),!0).includes(i)||delete e[i]}),e},Vl=function(e){var t=cce(e),n=t.children,r=n===void 0?[]:n,i=cI(t,[].concat(TU,ZA.map(function(p){return p.key}))),s=function(p){var v;return(v=Ese.find(function(y){return y.key===p}))===null||v===void 0?void 0:v.callback},l=function(p,v,y){var b=s(v);b?b(p,v,y):p[v]=Sy({},p[v],y)},c=function(p){Object.keys(p).forEach(function(v){if(p[v]){var y=ZA.find(function(M){return M.key===v});if(y){var b=y.type,T=y.extend_keys;b?r.push(h(Sy({},YU(p,T),{type:b},p[v]))):It(p[v])&&p[v].forEach(function(M){r.push(h(M))})}}})},h=function(p){return c(p),Object.keys(K5).forEach(function(v){var y=K5[v];if(!Ace(p[v]))if(de(y)){var b=y.value,T=y.target,M=b(p[v]);l(p,T,M)}else Da(p,y,p[v])}),p};return r.forEach(function(p){var v=Sy({},i,p);h(Sy(p,v))}),c(t),Oce(t),e},fI=function(){return fI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},fI.apply(this,arguments)};function Mce(e){var t=e.options,n=t.stack,r=t.tooltip,i=t.xField;if(!n)return e;var s=ZA.map(function(c){return c.type}).filter(function(c){return!!c}),l=!1;return s.forEach(function(c){t[c]&&(l=!0,Da(t,[c,"stack"],fI({y1:"y"},typeof n=="object"?n:{})))}),l&&!$5(r)&&!r&&Da(t,"tooltip",{title:i,items:[{channel:"y"}]}),e}function Nc(e){return Fl(Mce)(e)}function Rce(e){return Fl(Nc,Vl)(e)}var Pce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ice=function(e){Pce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="area",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Rce},t}(Al),Jb=function(){return Jb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Jb.apply(this,arguments)};function tj(e){var t=function(n){var r=n.options;_i(r,"children.length")>1&&Da(r,"children",[{type:"interval"}]);var i=r.scale,s=r.markBackground,l=r.data,c=r.children,h=r.yField,p=_i(i,"y.domain",[]);if(s&&p.length&&It(l)){var v="domainMax",y=l.map(function(b){var T;return Jb(Jb({originData:Jb({},b)},cI(b,h)),(T={},T[v]=p[p.length-1],T))});c.unshift(Jb({type:"interval",data:y,yField:v,tooltip:!1,style:{fill:"#eee"},label:!1},s))}return n};return Fl(t,Nc,Vl)(e)}var Dce=function(){var e=function(t,n){return function(r){var i=t.fill,s=i===void 0?"#2888FF":i,l=t.stroke,c=t.fillOpacity,h=c===void 0?1:c,p=t.strokeOpacity,v=p===void 0?.2:p,y=t.pitch,b=y===void 0?8:y,T=r[0],M=r[1],R=r[2],I=r[3],N=(M[1]-T[1])/2,z=n.document,H=z.createElement("g",{}),X=z.createElement("polygon",{style:{points:[T,[T[0]-b,T[1]+N],[R[0]-b,T[1]+N],I],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v,inset:30}}),Y=z.createElement("polygon",{style:{points:[[T[0]-b,T[1]+N],M,R,[R[0]-b,T[1]+N]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v}}),ne=z.createElement("polygon",{style:{points:[T,[T[0]-b,T[1]+N],M,[T[0]+b,T[1]+N]],fill:s,fillOpacity:h-.2}});return H.appendChild(X),H.appendChild(Y),H.appendChild(ne),H}};tl("shape.interval.bar25D",e)},Lce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Dce();var Nce=function(e){Lce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Bar",n}return t.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return tj},t}(Al),Fce=function(){var e=function(t,n){return function(r){var i=t.fill,s=i===void 0?"#2888FF":i,l=t.stroke,c=t.fillOpacity,h=c===void 0?1:c,p=t.strokeOpacity,v=p===void 0?.2:p,y=t.pitch,b=y===void 0?8:y,T=r[1][0]-r[0][0],M=T/2+r[0][0],R=n.document,I=R.createElement("g",{}),N=R.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[M,r[1][1]+b],[M,r[3][1]+b],[r[3][0],r[3][1]]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v,inset:30}}),z=R.createElement("polygon",{style:{points:[[M,r[1][1]+b],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[M,r[2][1]+b]],fill:s,fillOpacity:h,stroke:l,strokeOpacity:v}}),H=R.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[M,r[1][1]-b],[r[1][0],r[1][1]],[M,r[1][1]+b]],fill:s,fillOpacity:h-.2}});return I.appendChild(z),I.appendChild(N),I.appendChild(H),I}};tl("shape.interval.column25D",e)},Bce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Fce();var kce=function(e){Bce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlightByColor:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return tj},t}(Al);function zce(e){var t=function(r){var i=r.options,s=i.children,l=s===void 0?[]:s,c=i.legend;return c&&l.forEach(function(h){if(!_i(h,"colorField")){var p=_i(h,"yField");Da(h,"colorField",function(){return p})}}),r},n=function(r){var i=r.options,s=i.annotations,l=s===void 0?[]:s,c=i.children,h=c===void 0?[]:c,p=i.scale,v=!1;return _i(p,"y.key")||h.forEach(function(y,b){if(!_i(y,"scale.y.key")){var T="child".concat(b,"Scale");Da(y,"scale.y.key",T);var M=y.annotations,R=M===void 0?[]:M;R.length>0&&(Da(y,"scale.y.independent",!1),R.forEach(function(I){Da(I,"scale.y.key",T)})),!v&&l.length>0&&_i(y,"scale.y.independent")===void 0&&(v=!0,Da(y,"scale.y.independent",!1),l.forEach(function(I){Da(I,"scale.y.key",T)}))}}),r};return Fl(t,n,Nc,Vl)(e)}var Uce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nj=function(e){Uce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="DualAxes",n}return t.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return zce},t}(Al);function jce(e){var t=function(s){var l=s.options,c=l.xField,h=l.colorField;return h||Da(l,"colorField",c),s},n=function(s){var l=s.options,c=l.compareField,h=l.transform,p=l.isTransposed,v=p===void 0?!0:p,y=l.coordinate;return h||(c?Da(l,"transform",[]):Da(l,"transform",[{type:"symmetryY"}])),!y&&v&&Da(l,"coordinate",{transform:[{type:"transpose"}]}),s},r=function(s){var l=s.options,c=l.compareField,h=l.seriesField,p=l.data,v=l.children,y=l.yField,b=l.isTransposed,T=b===void 0?!0:b;if(c||h){var M=Object.values(VU(p,function(R){return R[c||h]}));v[0].data=M[0],v.push({type:"interval",data:M[1],yField:function(R){return-R[y]}}),delete l.compareField,delete l.data}return h&&(Da(l,"type","spaceFlex"),Da(l,"ratio",[1,1]),Da(l,"direction",T?"row":"col"),delete l.seriesField),s},i=function(s){var l=s.options,c=l.tooltip,h=l.xField,p=l.yField;return c||Da(l,"tooltip",{title:!1,items:[function(v){return{name:v[h],value:v[p]}}]}),s};return Fl(t,n,r,i,Nc,Vl)(e)}var Vce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hce=function(e){Vce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="column",n}return t.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return jce},t}(Al);function Gce(e){return Fl(Nc,Vl)(e)}var Wce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zce=function(e){Wce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="line",n}return t.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Gce},t}(Al);function $E(e){switch(typeof e){case"function":return e;case"string":return function(t){return _i(t,[e])};default:return function(){return e}}}var wy=function(){return wy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},wy.apply(this,arguments)};function Xce(e){var t=function(n){var r=n.options,i=r.angleField,s=r.data,l=r.label,c=r.tooltip,h=r.colorField,p=$E(h);if(It(s)){var v=s.reduce(function(b,T){return b+T[i]},0);if(v===0){var y=s.map(function(b){var T;return wy(wy({},b),(T={},T[i]=1,T))});Da(r,"data",y),l&&Da(r,"label",wy(wy({},l),{formatter:function(){return 0}})),c!==!1&&Da(r,"tooltip",wy(wy({},c),{items:[function(b,T,M){return{name:p(b,T,M),value:0}}]}))}}return n};return Fl(t,Vl)(e)}var Yce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$ce=function(e){Yce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="pie",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Xce},t}(Al);function qce(e){return Fl(Nc,Vl)(e)}var Kce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qce=function(e){Kce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="scatter",n}return t.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return qce},t}(Al);function Jce(e){var t=function(n){return Da(n,"options.coordinate",{type:_i(n,"options.coordinateType","polar")}),n};return Fl(t,Vl)(e)}var efe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tfe=function(e){efe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radar",n}return t.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Jce},t}(Al);function nfe(e,t){var n=-1,r=Gl(e)?Array(e.length):[];return jU(e,function(i,s,l){r[++n]=t(i,s,l)}),r}var rfe=nfe;function ife(e,t){var n=It(e)?vi:rfe;return n(e,iI(t,3))}var ex=ife,dg=function(){return dg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dg.apply(this,arguments)},ofe="__stock-range__",afe="trend",sfe="up",lfe="down";function ufe(e){var t=function(r){var i=r.options,s=i.data,l=i.yField;return r.options.data=ex(s,function(c){var h=c&&dg({},c);if(Array.isArray(l)&&h){var p=l[0],v=l[1],y=l[2],b=l[3];h[afe]=h[p]<=h[v]?sfe:lfe,h[ofe]=[h[p],h[v],h[y],h[b]]}return h}),r},n=function(r){var i=r.options,s=i.xField,l=i.yField,c=i.fallingFill,h=i.risingFill,p=l[0],v=l[1],y=l[2],b=l[3],T=$E(s);return r.options.children=ex(r.options.children,function(M,R){var I=R===0;return dg(dg({},M),{tooltip:{title:function(N,z,H){var X=T(N,z,H);return X instanceof Date?X.toLocaleString():X},items:[{field:y},{field:b},{field:p},{field:v}]},encode:dg(dg({},M.encode||{}),{y:I?[y,b]:[p,v],color:function(N){return Math.sign(N[v]-N[p])}}),style:dg(dg({},M.style||{}),{lineWidth:I?1:10})})}),delete i.yField,r.options.legend={color:!1},c&&Da(r,"options.scale.color.range[0]",c),h&&Da(r,"options.scale.color.range[2]",h),r};return Fl(t,n,Vl)(e)}var cfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ffe=["#26a69a","#999999","#ef5350"],hfe=function(e){cfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="stock",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:ffe},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ufe},t}(Al);function dfe(e){return Fl(Nc,Vl)(e)}var pfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vfe=function(e){pfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyLine",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return dfe},t}(Al);function mfe(e){return Fl(Nc,Vl)(e)}var gfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yfe=function(e){gfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyArea",n}return t.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return mfe},t}(Al);function _fe(e){return Fl(Nc,Vl)(e)}var bfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xfe=function(e){bfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyColumn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return _fe},t}(Al),hI=function(){return hI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},hI.apply(this,arguments)};function Efe(e){var t=function(n){var r=n.options,i=r.percent,s=r.color,l=s===void 0?[]:s;if(!i)return n;var c={scale:{color:{range:l.length?l:[]}},data:[1,i]};return Object.assign(r,hI({},c)),n};return Fl(t,Nc,Vl)(e)}var Sfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wfe=function(e){Sfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyProgress",n}return t.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Efe},t}(Al),dI=function(){return dI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dI.apply(this,arguments)};function Tfe(e){var t=function(r){var i=r.options,s=i.radius,l=s===void 0?.8:s;return Da(r,"options.coordinate.innerRadius",l),r},n=function(r){var i=r.options,s=i.percent,l=i.color,c=l===void 0?[]:l;if(!s)return r;var h={scale:{color:{range:c.length?c:[]}},data:[1,s]};return Object.assign(i,dI({},h)),r};return Fl(t,n,Nc,Vl)(e)}var Afe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cfe=function(e){Afe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="TinyRing",n}return t.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Tfe},t}(Al);function Ofe(e){return Fl(Vl)(e)}var Mfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rfe=function(e){Mfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="rose",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ofe},t}(Al),pI="__start__",tx="__end__",vI="__waterfall_value__",mI=function(){return mI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},mI.apply(this,arguments)},Pfe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function Ife(e){var t=function(r){var i=r.options,s=i.data,l=s===void 0?[]:s,c=i.yField;return l.length&&(l.reduce(function(h,p,v){var y,b=$E(c),T=b(p,v,l);if(v===0||p.isTotal)p[pI]=0,p[tx]=T,p[vI]=T;else{var M=(y=h[tx])!==null&&y!==void 0?y:b(h,v,l);p[pI]=M,p[tx]=M+T,p[vI]=h[tx]}return p},[]),Object.assign(i,{yField:[pI,tx]})),r},n=function(r){var i=r.options,s=i.data,l=s===void 0?[]:s,c=i.xField,h=i.children,p=i.linkStyle,v=Pfe([],l,!0);return v.reduce(function(y,b,T){return T>0&&(b.x1=y[c],b.x2=b[c],b.y1=y[tx]),b},[]),v.shift(),h.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:v,style:mI({stroke:"#697474"},p),label:!1,tooltip:!1}),r};return Fl(t,n,Nc,Vl)(e)}var Dfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lfe=function(e){Dfe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="waterfall",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:vI,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ife},t}(Al),Nfe="[object Number]";function Ffe(e){return typeof e=="number"||Oa(e)&&fe(e)==Nfe}var nx=Ffe,Bfe=Object.prototype,kfe=Bfe.hasOwnProperty,zfe=DU(function(e,t){if(pc(t)||Gl(t)){Ur(t,Ku(t),e);return}for(var n in t)kfe.call(t,n)&&Ir(e,n,t[n])}),rj=zfe,Ufe=/\s/;function jfe(e){for(var t=e.length;t--&&Ufe.test(e.charAt(t)););return t}var Vfe=jfe,Hfe=/^\s+/;function Gfe(e){return e&&e.slice(0,Vfe(e)+1).replace(Hfe,"")}var Wfe=Gfe,ij=0/0,Zfe=/^[-+]0x[0-9a-f]+$/i,Xfe=/^0b[01]+$/i,Yfe=/^0o[0-7]+$/i,$fe=parseInt;function qfe(e){if(typeof e=="number")return e;if(T0(e))return ij;if(de(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=de(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Wfe(e);var n=Xfe.test(e);return n||Yfe.test(e)?$fe(e.slice(2),n?2:8):Zfe.test(e)?ij:+e}var oj=qfe,aj=1/0,Kfe=17976931348623157e292;function Qfe(e){if(!e)return e===0?e:0;if(e=oj(e),e===aj||e===-aj){var t=e<0?-1:1;return t*Kfe}return e===e?e:0}var Jfe=Qfe;function ehe(e){var t=Jfe(e),n=t%1;return t===t?n?t-n:t:0}var sj=ehe,the=Ie.isFinite,nhe=Math.min;function rhe(e){var t=Math[e];return function(n,r){if(n=oj(n),r=r==null?0:nhe(sj(r),292),r&&the(n)){var i=(dr(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(dr(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var ihe=rhe,ohe=ihe("ceil"),ahe=ohe,she=0/0;function lhe(e){return typeof e=="number"?e:T0(e)?she:+e}var lj=lhe;function uhe(e,t){return function(n,r){var i;if(n===void 0&&r===void 0)return t;if(n!==void 0&&(i=n),r!==void 0){if(i===void 0)return r;typeof n=="string"||typeof r=="string"?(n=Ei(n),r=Ei(r)):(n=lj(n),r=lj(r)),i=e(n,r)}return i}}var che=uhe,fhe=che(function(e,t){return e/t},1),hhe=fhe;function dhe(e){var t=function(n){var r=n.options,i=r.data,s=r.binNumber,l=r.binWidth,c=r.children,h=r.channel,p=h===void 0?"count":h,v=_i(c,"[0].transform[0]",{});return nx(l)?(rj(v,{thresholds:ahe(hhe(i.length,l)),y:p}),n):(nx(s)&&rj(v,{thresholds:s,y:p}),n)};return Fl(t,Nc,Vl)(e)}var phe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vhe=function(e){phe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Histogram",n}return t.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return dhe},t}(Al);function mhe(e){var t=function(r){var i=r.options,s=i.tooltip,l=s===void 0?{}:s,c=i.colorField,h=i.sizeField;return l&&!l.field&&(l.field=c||h),r},n=function(r){var i=r.options,s=i.mark,l=i.children;return s&&(l[0].type=s),r};return Fl(t,n,Nc,Vl)(e)}var ghe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yhe=function(e){ghe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="heatmap",n}return t.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point",interaction:{elementHighlightByColor:{background:!0}}}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return mhe},t}(Al);function _he(e){var t=function(n){var r=n.options.boxType,i=r===void 0?"box":r;return n.options.children[0].type=i,n};return Fl(t,Nc,Vl)(e)}var bhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xhe=function(e){bhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="box",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return _he},t}(Al);function Ehe(e){var t=function(n){var r=n.options,i=r.data,s=[{type:"custom",callback:function(c){return{links:c}}}];if(It(i))i.length>0?Da(r,"data",{value:i,transform:s}):delete r.children;else if(_i(i,"type")==="fetch"&&_i(i,"value")){var l=_i(i,"transform");It(l)?Da(i,"transform",l.concat(s)):Da(i,"transform",s)}return n};return Fl(t,Nc,Vl)(e)}var She=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),whe=function(e){She(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="sankey",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ehe},t}(Al);function The(e){var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],e}function Ahe(e){The(e);var t=e.options.layout,n=t===void 0?"horizontal":t;return e.options.children.forEach(function(r){var i;!((i=r==null?void 0:r.coordinate)===null||i===void 0)&&i.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),e}function Che(e){return e==null}var Ohe=Che,Mhe="[object String]";function Rhe(e){return typeof e=="string"||!It(e)&&Oa(e)&&fe(e)==Mhe}var uj=Rhe;function Phe(e,t){return vi(t,function(n){return e[n]})}var Ihe=Phe;function Dhe(e){return e==null?[]:Ihe(e,Ku(e))}var Lhe=Dhe,Nhe=Math.max;function Fhe(e,t,n,r){e=Gl(e)?e:Lhe(e),n=n&&!r?sj(n):0;var i=e.length;return n<0&&(n=Nhe(i+n,0)),uj(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&zU(e,t,n)>-1}var Bhe=Fhe,Mv=function(){return Mv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Mv.apply(this,arguments)},eC=["#f0efff","#5B8FF9","#3D76DD"];function gI(e,t,n,r){r===void 0&&(r=!0);var i=0,s=!1,l=ex(e,function(c){var h,p,v=_i(c,[t]);if(Ohe(v))return[];if(uj(v)){var y=Number(v);return isNaN(y)?[]:(h={},h[n]=c[n],h[t]=y,h)}return It(v)?(s=!0,i=Math.max(i,v.length),ex(r?v.sort(function(b,T){return T-b}):v,function(b,T){var M;return M={},M[n]=c[n],M[t]=b,M.index=T,M})):(i=Math.max(1,i),p={},p[n]=c[n],p[t]=v,p)}).flat();return s?[l.map(function(c){return Mv({index:0},c)}),i]:[l,i]}function yI(e,t){return new Array(e).fill("").map(function(n,r){return It(t)?t[r%t.length]:t})}function khe(e){var t=function(i){var s=i.options,l=s.color,c=s.rangeField,h=c===void 0?"ranges":c,p=s.measureField,v=p===void 0?"measures":p,y=s.targetField,b=y===void 0?"targets":y,T=s.xField,M=T===void 0?"title":T,R=s.mapField,I=s.data,N=gI(I,h,M),z=N[0],H=N[1],X=gI(I,v,M,!1),Y=X[0],ne=X[1],pe=gI(I,b,M,!1),ye=pe[0],De=pe[1],Xe=_i(l,[h],eC[0]),Ke=_i(l,[v],eC[1]),mt=_i(l,[b],eC[2]),Qe=[yI(H,Xe),yI(ne,Ke),yI(De,mt)].flat();return i.options.children=ex(i.options.children,function(ut,ct){var gt=[z,Y,ye][ct],Xt=[h,v,b][ct];return Mv(Mv({},ut),{data:gt,encode:Mv(Mv({},ut.encode||{}),{x:M,y:Xt,color:function(Rt){var kt=Rt.index,wn=nx(kt)?"".concat(Xt,"_").concat(kt):Xt;return R?_i(R,[Xt,kt],wn):wn}}),style:Mv(Mv({},ut.style||{}),{zIndex:function(Rt){return-Rt[Xt]}}),labels:ct!==0?ex(ut.labels,function(Rt){return Mv(Mv({},Rt),{text:Xt})}):void 0})}),i.options.scale.color.range=Qe,i.options.legend.color.itemMarker=function(ut){return R&&Bhe(R==null?void 0:R[b],ut)||(ut==null?void 0:ut.replace(/\_\d$/,""))===b?"line":"square"},i},n=function(i){var s=i.options.layout,l=s===void 0?"horizontal":s;return l!=="horizontal"&&Da(i,"options.children[2].shapeField","hyphen"),i},r=function(i){var s=i.options,l=s.range,c=l===void 0?{}:l,h=s.measure,p=h===void 0?{}:h,v=s.target,y=v===void 0?{}:v,b=s.children;return i.options.children=[c,p,y].map(function(T,M){return Sy(b[M],T)}),i};return Fl(t,n,r,Ahe,Vl)(e)}var zhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uhe=function(e){zhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="bullet",n}return t.getDefaultOptions=function(){return{type:"view",scale:{color:{range:eC}},legend:{color:{itemMarker:function(n){return n==="target"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return khe},t}(Al);function jhe(e){var t=function(n){var r=n.options.data;return n.options.data={value:r},n};return Fl(t,Nc,Vl)(e)}var Vhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hhe=function(e){Vhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Gauge",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return jhe},t}(Al);function Ghe(e){var t=function(n){var r=n.options.percent;return nx(r)&&Da(n,"options.data",r),n};return Fl(t,Nc,Vl)(e)}var Whe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zhe=function(e){Whe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Liquid",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Ghe},t}(Al);function Xhe(e){return Fl(Nc,Vl)(e)}var Yhe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$he=function(e){Yhe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="WordCloud",n}return t.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Xhe},t}(Al);function qhe(e){var t=function(n){var r=n.options,i=r.data;return i&&Da(r,"data",{value:i}),n};return Fl(t,Nc,Vl)(e)}var Khe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qhe=function(e){Khe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="treemap",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return qhe},t}(Al),i1=function(){return i1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i1.apply(this,arguments)};function Jhe(e){var t=function(i){var s=i.options,l=s.startAngle,c=s.maxAngle,h=s.coordinate,p=nx(l)?l/(2*Math.PI)*360:-90,v=nx(c)?(Number(c)+p)/180*Math.PI:Math.PI;return Da(i,["options","coordinate"],i1(i1({},h),{endAngle:v,startAngle:l!=null?l:-Math.PI/2})),i},n=function(i){var s=i.options,l=s.tooltip,c=s.xField,h=s.yField,p=$E(c),v=$E(h);return l||Da(s,"tooltip",{title:!1,items:[function(y,b,T){return{name:p(y,b,T),value:v(y,b,T)}}]}),i},r=function(i){var s=i.options,l=s.markBackground,c=s.children,h=s.scale,p=s.coordinate,v=s.xField,y=_i(h,"y.domain",[]);return l&&c.unshift(i1({type:"interval",xField:v,yField:y[y.length-1],colorField:l.color,scale:{color:{type:"identity"}},style:{fillOpacity:l.opacity,fill:l.color?void 0:"#e0e4ee"},coordinate:i1(i1({},p),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},l)),i};return Fl(t,n,r,Nc,Vl)(e)}var ede=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tde=function(e){ede(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="radial",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return Jhe},t}(Al);function nde(e){return Fl(Vl)(e)}var rde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ide=function(e){rde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="CirclePacking",n}return t.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return nde},t}(Al),tC=function(){return tC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tC.apply(this,arguments)};function ode(e){var t=function(n){var r=n.options,i=r.xField,s=r.yField,l=r.seriesField,c=r.children,h=c==null?void 0:c.map(function(p){return tC(tC({},p),{xField:i,yField:s,seriesField:l,colorField:l,data:p.type==="density"?{transform:[{type:"kde",field:s,groupBy:[i,l]}]}:p.data})}).filter(function(p){return r.violinType!=="density"||p.type==="density"});return Da(r,"children",h),r.violinType==="polar"&&Da(r,"coordinate",{type:"polar"}),Da(r,"violinType",void 0),n};return Fl(t,Nc,Vl)(e)}var ade=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sde=function(e){ade(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="violin",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ode},t}(Al),qE=function(){return qE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qE.apply(this,arguments)},lde=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))};function ude(e){var t=function(s){var l=s.options,c=l.yField,h=l.children;return h.forEach(function(p,v){Da(p,"yField",c[v])}),s},n=function(s){var l=s.options,c=l.yField,h=l.children,p=l.data;if(tI(p))return s;var v=It(_i(p,[0]))?p:[p,p];return h.forEach(function(y,b){Da(y,"data",lde([],v[b].map(function(T){return qE({groupKey:c[b]},T)}),!0))}),s},r=function(s){var l=s.options,c=l.yField,h=c[0],p=c[1],v=l.tooltip;return v||Da(l,"tooltip",{items:[{field:h,value:h},{field:p,value:p}]}),s},i=function(s){var l=s.options,c=l.children,h=l.layout,p=l.coordinate.transform,v=l.paddingBottom,y=v===void 0?GU:v,b=l.paddingLeft,T=b===void 0?GU:b,M=l.axis;Da(l,"axisText",qE(qE({},(M==null?void 0:M.x)||{}),{layout:h}));var R=c[0],I=c[1];if(h==="vertical")Da(l,"direction","col"),Da(l,"paddingLeft",T),Da(l,"coordinate.transform",p.filter(function(Y){return Y.type!=="transpose"})),Da(R,"paddingBottom",HU),Da(I,"paddingTop",HU),Da(I,"axis",{x:{position:"top"}}),Da(I,"scale",{y:{range:[0,1]}});else{Da(l,"paddingBottom",y),Da(R,"scale",{y:{range:[0,1]}});var N=R.paddingRight,z=N===void 0?aI:N,H=I.paddingLeft,X=H===void 0?aI:H;Da(R,"paddingRight",z),Da(R,"axis",{x:{position:"right"}}),Da(I,"paddingLeft",X)}return s};return Fl(t,n,r,i,Nc,Vl)(e)}var cde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fde=function(e){cde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return t.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return ude},t}(Al),o1;(function(e){e.color="key",e.d="path"})(o1||(o1={}));function hde(e){var t=function(n){var r=n.options,i=r.data,s=r.setsField,l=r.sizeField;return It(i)&&(Da(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:s,size:l,as:[o1.color,o1.d]}]}),Da(r,"colorField",s),Da(r,["children","0","encode","d"],o1.d)),Da(n,"options",cI(r,["sizeField","setsField"])),n};return Fl(t,Vl)(e)}var dde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pde=function(e){dde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="venn",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:o1.color,d:o1.d}}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return hde},t}(Al);function vde(e){var t=function(n){return n};return Fl(t,Vl)(e)}var mde=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gde=function(e){mde(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="Sunburst",n}return t.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},t.prototype.getDefaultOptions=function(){return t.getDefaultOptions()},t.prototype.getSchemaAdaptor=function(){return vde},t}(Al),yde={Base:jue,Line:Zce,Column:kce,Pie:$ce,Area:Ice,Bar:Nce,DualAxes:nj,Funnel:Hce,Scatter:Qce,Radar:tfe,Rose:Rfe,Stock:hfe,TinyLine:vfe,TinyArea:yfe,TinyColumn:xfe,TinyProgress:wfe,TinyRing:Cfe,Waterfall:Lfe,Histogram:vhe,Heatmap:yhe,Box:xhe,Sankey:whe,Bullet:Uhe,Gauge:Hhe,Liquid:Zhe,WordCloud:$he,Treemap:Qhe,RadialBar:tde,CirclePacking:ide,Violin:sde,BidirectionalBar:fde,Venn:pde,Mix:nj,Sunburst:gde},_I=function(){return _I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_I.apply(this,arguments)},cj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},_de=(0,ee.forwardRef)(function(e,t){var n=e.chartType,r=n===void 0?"Base":n,i=cj(e,["chartType"]),s=i.containerStyle,l=s===void 0?{height:"inherit"}:s,c=i.containerAttributes,h=c===void 0?{}:c,p=i.className,v=i.loading,y=i.loadingTemplate,b=i.errorTemplate,T=cj(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate"]),M=no(yde[r],T),R=M.chart,I=M.container;return(0,ee.useImperativeHandle)(t,function(){return R.current}),ee.createElement(nt,{errorTemplate:b},v&&ee.createElement(_t,{loadingTemplate:y}),ee.createElement("div",_I({className:p,style:l,ref:I},h)))})},78677:function(bt,G,L){"use strict";var K=L(67294),W=L(16188),E=function(){return E=Object.assign||function(ee){for(var se,ue=1,be=arguments.length;ue<be;ue++){se=arguments[ue];for(var oe in se)Object.prototype.hasOwnProperty.call(se,oe)&&(ee[oe]=se[oe])}return ee},E.apply(this,arguments)},he=(0,K.forwardRef)(function(ee,se){return K.createElement(W.P,E({},ee,{chartType:"Column",ref:se}))});G.Z=he},80652:function(bt,G,L){"use strict";var K=L(67294),W=L(16188),E=function(){return E=Object.assign||function(ee){for(var se,ue=1,be=arguments.length;ue<be;ue++){se=arguments[ue];for(var oe in se)Object.prototype.hasOwnProperty.call(se,oe)&&(ee[oe]=se[oe])}return ee},E.apply(this,arguments)},he=(0,K.forwardRef)(function(ee,se){return K.createElement(W.P,E({},ee,{chartType:"Line",ref:se}))});G.Z=he},63430:function(bt,G,L){"use strict";var K=L(67294),W=L(16188),E=function(){return E=Object.assign||function(ee){for(var se,ue=1,be=arguments.length;ue<be;ue++){se=arguments[ue];for(var oe in se)Object.prototype.hasOwnProperty.call(se,oe)&&(ee[oe]=se[oe])}return ee},E.apply(this,arguments)},he=(0,K.forwardRef)(function(ee,se){return K.createElement(W.P,E({},ee,{chartType:"Pie",ref:se}))});G.Z=he},6466:function(bt,G,L){"use strict";L.d(G,{Z:function(){return yt}});var K=L(4942),W=L(1413),E=L(45987),he=L(28459),ee=L(93967),se=L.n(ee),ue=L(67294),be=L(72120),oe=L(44962),Ge=L(98082),te=function(Ce){return(0,K.Z)({},Ce.componentCls,{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginBlock:Ce.marginLG,marginInline:0,color:Ce.colorText,fontWeight:"500",fontSize:"20px",lineHeight:"38px"})};function me(Re){return(0,Ge.Xj)("ProCardOperation",function(Ce){var Ue=(0,W.Z)((0,W.Z)({},Ce),{},{componentCls:".".concat(Re)});return[te(Ue)]})}var Pe=L(85893),$=function(Ce){var Ue=Ce.className,We=Ce.style,lt=We===void 0?{}:We,tn=Ce.children,Le=(0,ue.useContext)(he.ZP.ConfigContext),_t=Le.getPrefixCls,Me=_t("pro-card-operation"),nt=me(Me),qe=nt.wrapSSR,Ye=nt.hashId,Lt=se()(Me,Ue,Ye);return qe((0,Pe.jsx)("div",{className:Lt,style:lt,children:tn}))},le=$,J=L(96604),Ee=function(Ce){return(0,K.Z)({},Ce.componentCls,{"&-chart":{display:"flex",flexDirection:"column",marginBlockStart:8,marginBlockEnd:8,"&-left":{marginBlockStart:0,marginInlineEnd:"16px"},"&-right":{marginBlockStart:0,marginInlineStart:"16px"}},"&-content":{display:"flex",flexDirection:"column","&-horizontal":(0,K.Z)({flexDirection:"row"},"".concat(Ce.componentCls,"-chart"),{alignItems:"center",alignSelf:"flex-start"})},"&-footer":{marginBlockStart:8,paddingBlockStart:"16px",borderBlockStart:"rgba(0, 0, 0, 0.08) solid ".concat(Ce.colorBorder)}})};function tt(Re){return(0,Ge.Xj)("StatisticCard",function(Ce){var Ue=(0,W.Z)((0,W.Z)({},Ce),{},{componentCls:".".concat(Re)});return[Ee(Ue)]})}var Je=["children","statistic","className","chart","chartPlacement","footer"],wt=function(Ce){var Ue=Ce.children,We=Ce.statistic,lt=Ce.className,tn=Ce.chart,Le=Ce.chartPlacement,_t=Ce.footer,Me=(0,E.Z)(Ce,Je),nt=(0,ue.useContext)(he.ZP.ConfigContext),qe=nt.getPrefixCls,Ye=qe("pro-statistic-card"),Lt=tt(Ye),xt=Lt.wrapSSR,Ie=Lt.hashId,Gt=se()(Ye,lt,Ie),gn=We&&(0,Pe.jsx)(J.Z,(0,W.Z)({layout:"vertical"},We)),Tn=se()("".concat(Ye,"-chart"),Ie,(0,K.Z)((0,K.Z)({},"".concat(Ye,"-chart-left"),Le==="left"&&tn&&We),"".concat(Ye,"-chart-right"),Le==="right"&&tn&&We)),sr=tn&&(0,Pe.jsx)("div",{className:Tn,children:tn}),nr=se()("".concat(Ye,"-content "),Ie,(0,K.Z)({},"".concat(Ye,"-content-horizontal"),Le==="left"||Le==="right")),Ft=(sr||gn)&&(Le==="left"?(0,Pe.jsxs)("div",{className:nr,children:[sr,gn]}):(0,Pe.jsxs)("div",{className:nr,children:[gn,sr]})),Kt=_t&&(0,Pe.jsx)("div",{className:"".concat(Ye,"-footer ").concat(Ie).trim(),children:_t});return xt((0,Pe.jsxs)(be.Z,(0,W.Z)((0,W.Z)({className:Gt},Me),{},{children:[Ft,Ue,Kt]})))},pt=function(Ce){return(0,Pe.jsx)(wt,(0,W.Z)({bodyStyle:{padding:0}},Ce))};wt.Statistic=J.Z,wt.Divider=oe.Z,wt.Operation=le,wt.isProCard=!0,wt.Group=pt;var yt=wt},96604:function(bt,G,L){"use strict";L.d(G,{Z:function(){return on}});var K=L(1413),W=L(4942),E=L(45987),he=L(87462),ee=L(67294),se=L(36688),ue=L(5627),be=function(zt,ze){return ee.createElement(ue.Z,(0,he.Z)({},zt,{ref:ze,icon:se.Z}))},oe=ee.forwardRef(be),Ge=oe,te=L(28459),me=L(83062),Pe=L(40411),$=L(57838),le=L(96159),J=L(93967),Ee=L.n(J),tt=L(64217),Je=L(53124),wt=L(87564),yt=Pt=>{const{value:zt,formatter:ze,precision:rt,decimalSeparator:jt,groupSeparator:U="",prefixCls:fe}=Pt;let at;if(typeof ze=="function")at=ze(zt);else{const de=String(zt),$t=de.match(/^(-?)(\d*)(\.(\d+))?$/);if(!$t||de==="-")at=de;else{const sn=$t[1];let pn=$t[2]||"0",Nn=$t[4]||"";pn=pn.replace(/\B(?=(\d{3})+(?!\d))/g,U),typeof rt=="number"&&(Nn=Nn.padEnd(rt,"0").slice(0,rt>0?rt:0)),Nn&&(Nn=`${jt}${Nn}`),at=[ee.createElement("span",{key:"int",className:`${fe}-content-value-int`},sn,pn),Nn&&ee.createElement("span",{key:"decimal",className:`${fe}-content-value-decimal`},Nn)]}}return ee.createElement("span",{className:`${fe}-content-value`},at)},Re=L(14747),Ce=L(91945),Ue=L(45503);const We=Pt=>{const{componentCls:zt,marginXXS:ze,padding:rt,colorTextDescription:jt,titleFontSize:U,colorTextHeading:fe,contentFontSize:at,fontFamily:de}=Pt;return{[`${zt}`]:Object.assign(Object.assign({},(0,Re.Wf)(Pt)),{[`${zt}-title`]:{marginBottom:ze,color:jt,fontSize:U},[`${zt}-skeleton`]:{paddingTop:rt},[`${zt}-content`]:{color:fe,fontSize:at,fontFamily:de,[`${zt}-content-value`]:{display:"inline-block",direction:"ltr"},[`${zt}-content-prefix, ${zt}-content-suffix`]:{display:"inline-block"},[`${zt}-content-prefix`]:{marginInlineEnd:ze},[`${zt}-content-suffix`]:{marginInlineStart:ze}}})}},lt=Pt=>{const{fontSizeHeading3:zt,fontSize:ze}=Pt;return{titleFontSize:ze,contentFontSize:zt}};var tn=(0,Ce.I$)("Statistic",Pt=>{const zt=(0,Ue.TS)(Pt,{});return[We(zt)]},lt),Le=function(Pt,zt){var ze={};for(var rt in Pt)Object.prototype.hasOwnProperty.call(Pt,rt)&&zt.indexOf(rt)<0&&(ze[rt]=Pt[rt]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var jt=0,rt=Object.getOwnPropertySymbols(Pt);jt<rt.length;jt++)zt.indexOf(rt[jt])<0&&Object.prototype.propertyIsEnumerable.call(Pt,rt[jt])&&(ze[rt[jt]]=Pt[rt[jt]]);return ze},Me=Pt=>{const{prefixCls:zt,className:ze,rootClassName:rt,style:jt,valueStyle:U,value:fe=0,title:at,valueRender:de,prefix:$t,suffix:sn,loading:pn=!1,formatter:Nn,precision:Wn,decimalSeparator:qn=".",groupSeparator:dn=",",onMouseEnter:vt,onMouseLeave:It}=Pt,An=Le(Pt,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:Dn,direction:Yn,statistic:dt}=ee.useContext(Je.E_),xe=Dn("statistic",zt),[Be,st,Dt]=tn(xe),Ot=ee.createElement(yt,{decimalSeparator:qn,groupSeparator:dn,prefixCls:xe,formatter:Nn,precision:Wn,value:fe}),Sn=Ee()(xe,{[`${xe}-rtl`]:Yn==="rtl"},dt==null?void 0:dt.className,ze,rt,st,Dt),er=(0,tt.Z)(An,{aria:!0,data:!0});return Be(ee.createElement("div",Object.assign({},er,{className:Sn,style:Object.assign(Object.assign({},dt==null?void 0:dt.style),jt),onMouseEnter:vt,onMouseLeave:It}),at&&ee.createElement("div",{className:`${xe}-title`},at),ee.createElement(wt.Z,{paragraph:!1,loading:pn,className:`${xe}-skeleton`},ee.createElement("div",{style:U,className:`${xe}-content`},$t&&ee.createElement("span",{className:`${xe}-content-prefix`},$t),de?de(Ot):Ot,sn&&ee.createElement("span",{className:`${xe}-content-suffix`},sn)))))};const nt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function qe(Pt,zt){let ze=Pt;const rt=/\[[^\]]*]/g,jt=(zt.match(rt)||[]).map(de=>de.slice(1,-1)),U=zt.replace(rt,"[]"),fe=nt.reduce((de,$t)=>{let[sn,pn]=$t;if(de.includes(sn)){const Nn=Math.floor(ze/pn);return ze-=Nn*pn,de.replace(new RegExp(`${sn}+`,"g"),Wn=>{const qn=Wn.length;return Nn.toString().padStart(qn,"0")})}return de},U);let at=0;return fe.replace(rt,()=>{const de=jt[at];return at+=1,de})}function Ye(Pt,zt){const{format:ze=""}=zt,rt=new Date(Pt).getTime(),jt=Date.now(),U=Math.max(rt-jt,0);return qe(U,ze)}var Lt=function(Pt,zt){var ze={};for(var rt in Pt)Object.prototype.hasOwnProperty.call(Pt,rt)&&zt.indexOf(rt)<0&&(ze[rt]=Pt[rt]);if(Pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var jt=0,rt=Object.getOwnPropertySymbols(Pt);jt<rt.length;jt++)zt.indexOf(rt[jt])<0&&Object.prototype.propertyIsEnumerable.call(Pt,rt[jt])&&(ze[rt[jt]]=Pt[rt[jt]]);return ze};const xt=1e3/30;function Ie(Pt){return new Date(Pt).getTime()}const Gt=Pt=>{const{value:zt,format:ze="HH:mm:ss",onChange:rt,onFinish:jt}=Pt,U=Lt(Pt,["value","format","onChange","onFinish"]),fe=(0,$.Z)(),at=ee.useRef(null),de=()=>{jt==null||jt(),at.current&&(clearInterval(at.current),at.current=null)},$t=()=>{const Nn=Ie(zt);Nn>=Date.now()&&(at.current=setInterval(()=>{fe(),rt==null||rt(Nn-Date.now()),Nn<Date.now()&&de()},xt))};ee.useEffect(()=>($t(),()=>{at.current&&(clearInterval(at.current),at.current=null)}),[zt]);const sn=(Nn,Wn)=>Ye(Nn,Object.assign(Object.assign({},Wn),{format:ze})),pn=Nn=>(0,le.Tm)(Nn,{title:void 0});return ee.createElement(Me,Object.assign({},U,{value:zt,valueRender:pn,formatter:sn}))};var gn=ee.memo(Gt);Me.Countdown=gn;var Tn=Me,sr=L(98082),nr=function(zt){return(0,W.Z)({},zt.componentCls,(0,W.Z)((0,W.Z)((0,W.Z)((0,W.Z)((0,W.Z)({display:"flex",fontSize:zt.fontSize,"& + &":{marginBlockStart:4},"&-tip":{marginInlineStart:4},"&-wrapper":(0,W.Z)({display:"flex",width:"100%"},"".concat(zt.componentCls,"-status"),{width:"14px"}),"&-icon":{marginInlineEnd:16},"&-trend-icon":{width:0,height:0,borderInlineEnd:"3.5px solid transparent",borderBlockEnd:"9px solid #000",borderInlineStart:"3.5px solid transparent","&-up":{transform:"rotate(0deg)"},"&-down":{transform:"rotate(180deg)"}},"&-content":(0,W.Z)({width:"100%"},"".concat(zt.antCls,"-statistic-content"),{"&-value-int":{fontSize:zt.fontSizeHeading3}}),"&-description":{width:"100%"}},"".concat(zt.antCls,"-statistic-title"),{color:zt.colorText}),"&-trend-up",(0,W.Z)({},"".concat(zt.antCls,"-statistic-content"),(0,W.Z)({color:"#f5222d"},"".concat(zt.componentCls,"-trend-icon"),{borderBlockEndColor:"#f5222d"}))),"&-trend-down",(0,W.Z)({},"".concat(zt.antCls,"-statistic-content"),(0,W.Z)({color:"#389e0d"},"".concat(zt.componentCls,"-trend-icon"),{borderBlockEndColor:"#52c41a"}))),"& &-layout-horizontal",(0,W.Z)((0,W.Z)((0,W.Z)({display:"flex",justifyContent:"space-between"},"".concat(zt.antCls,"-statistic-title"),{marginBlockEnd:0}),"".concat(zt.antCls,"-statistic-content-value"),{fontWeight:500}),"".concat(zt.antCls,"-statistic-title,").concat(zt.antCls,"-statistic-content,").concat(zt.antCls,"-statistic-content-suffix,").concat(zt.antCls,"-statistic-content-prefix,").concat(zt.antCls,"-statistic-content-value-decimal"),{fontSize:zt.fontSize})),"& &-layout-inline",(0,W.Z)((0,W.Z)((0,W.Z)({display:"inline-flex",color:zt.colorTextSecondary},"".concat(zt.antCls,"-statistic-title"),{marginInlineEnd:"6px",marginBlockEnd:0}),"".concat(zt.antCls,"-statistic-content"),{color:zt.colorTextSecondary}),"".concat(zt.antCls,"-statistic-title,").concat(zt.antCls,"-statistic-content,").concat(zt.antCls,"-statistic-content-suffix,").concat(zt.antCls,"-statistic-content-prefix,").concat(zt.antCls,"-statistic-content-value-decimal"),{fontSize:zt.fontSizeSM})))};function Ft(Pt){return(0,sr.Xj)("Statistic",function(zt){var ze=(0,K.Z)((0,K.Z)({},zt),{},{componentCls:".".concat(Pt)});return[nr(ze)]})}var Kt=L(85893),fn=["className","layout","style","description","children","title","tip","status","trend","prefix","icon"],Gn=function(zt){var ze=zt.className,rt=zt.layout,jt=rt===void 0?"inline":rt,U=zt.style,fe=zt.description,at=zt.children,de=zt.title,$t=zt.tip,sn=zt.status,pn=zt.trend,Nn=zt.prefix,Wn=zt.icon,qn=(0,E.Z)(zt,fn),dn=(0,ee.useContext)(te.ZP.ConfigContext),vt=dn.getPrefixCls,It=vt("pro-card-statistic"),An=Ft(It),Dn=An.wrapSSR,Yn=An.hashId,dt=Ee()(It,ze,Yn),xe=Ee()("".concat(It,"-status"),Yn),Be=Ee()("".concat(It,"-icon"),Yn),st=Ee()("".concat(It,"-wrapper"),Yn),Dt=Ee()("".concat(It,"-content"),Yn),Ot=Ee()(Yn,(0,W.Z)((0,W.Z)({},"".concat(It,"-layout-").concat(jt),jt),"".concat(It,"-trend-").concat(pn),pn)),Sn=$t&&(0,Kt.jsx)(me.Z,{title:$t,children:(0,Kt.jsx)(Ge,{className:"".concat(It,"-tip ").concat(Yn).trim()})}),er=Ee()("".concat(It,"-trend-icon"),Yn,(0,W.Z)({},"".concat(It,"-trend-icon-").concat(pn),pn)),br=pn&&(0,Kt.jsx)("div",{className:er}),$n=sn&&(0,Kt.jsx)("div",{className:xe,children:(0,Kt.jsx)(Pe.Z,{status:sn,text:null})}),Oe=Wn&&(0,Kt.jsx)("div",{className:Be,children:Wn});return Dn((0,Kt.jsxs)("div",{className:dt,style:U,children:[Oe,(0,Kt.jsxs)("div",{className:st,children:[$n,(0,Kt.jsxs)("div",{className:Dt,children:[(0,Kt.jsx)(Tn,(0,K.Z)({title:(de||Sn)&&(0,Kt.jsxs)(Kt.Fragment,{children:[de,Sn]}),prefix:(br||Nn)&&(0,Kt.jsxs)(Kt.Fragment,{children:[br,Nn]}),className:Ot},qn)),fe&&(0,Kt.jsx)("div",{className:"".concat(It,"-description ").concat(Yn).trim(),children:fe})]})]})]}))},on=Gn},46343:function(bt,G,L){"use strict";L.d(G,{S$:function(){return Pt},bf:function(){return zt},ni:function(){return Gt},oI:function(){return Gn},sX:function(){return on}});var K=L(34155);function W(ze,rt,jt,U){function fe(at){return at instanceof jt?at:new jt(function(de){de(at)})}return new(jt||(jt=Promise))(function(at,de){function $t(Nn){try{pn(U.next(Nn))}catch(Wn){de(Wn)}}function sn(Nn){try{pn(U.throw(Nn))}catch(Wn){de(Wn)}}function pn(Nn){Nn.done?at(Nn.value):fe(Nn.value).then($t,sn)}pn((U=U.apply(ze,rt||[])).next())})}function E(ze,rt){var jt={label:0,sent:function(){if(at[0]&1)throw at[1];return at[1]},trys:[],ops:[]},U,fe,at,de;return de={next:$t(0),throw:$t(1),return:$t(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function $t(pn){return function(Nn){return sn([pn,Nn])}}function sn(pn){if(U)throw new TypeError("Generator is already executing.");for(;jt;)try{if(U=1,fe&&(at=pn[0]&2?fe.return:pn[0]?fe.throw||((at=fe.return)&&at.call(fe),0):fe.next)&&!(at=at.call(fe,pn[1])).done)return at;switch(fe=0,at&&(pn=[pn[0]&2,at.value]),pn[0]){case 0:case 1:at=pn;break;case 4:return jt.label++,{value:pn[1],done:!1};case 5:jt.label++,fe=pn[1],pn=[0];continue;case 7:pn=jt.ops.pop(),jt.trys.pop();continue;default:if(at=jt.trys,!(at=at.length>0&&at[at.length-1])&&(pn[0]===6||pn[0]===2)){jt=0;continue}if(pn[0]===3&&(!at||pn[1]>at[0]&&pn[1]<at[3])){jt.label=pn[1];break}if(pn[0]===6&&jt.label<at[1]){jt.label=at[1],at=pn;break}if(at&&jt.label<at[2]){jt.label=at[2],jt.ops.push(pn);break}at[2]&&jt.ops.pop(),jt.trys.pop();continue}pn=rt.call(ze,jt)}catch(Nn){pn=[6,Nn],fe=0}finally{U=at=0}if(pn[0]&5)throw pn[1];return{value:pn[0]?pn[1]:void 0,done:!0}}}function he(ze,rt){var jt=typeof Symbol=="function"&&ze[Symbol.iterator];if(!jt)return ze;var U=jt.call(ze),fe,at=[],de;try{for(;(rt===void 0||rt-- >0)&&!(fe=U.next()).done;)at.push(fe.value)}catch($t){de={error:$t}}finally{try{fe&&!fe.done&&(jt=U.return)&&jt.call(U)}finally{if(de)throw de.error}}return at}function ee(ze,rt,jt){if(jt||arguments.length===2)for(var U=0,fe=rt.length,at;U<fe;U++)(at||!(U in rt))&&(at||(at=Array.prototype.slice.call(rt,0,U)),at[U]=rt[U]);return ze.concat(at||Array.prototype.slice.call(rt))}function se(ze){return ze&&ze.__esModule&&Object.prototype.hasOwnProperty.call(ze,"default")?ze.default:ze}var ue={exports:{}},be={exports:{}},oe={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=jt;function jt(U){return U&&typeof U.length=="number"&&U.length>=0&&U.length%1===0}ze.exports=rt.default})(oe,oe.exports);var Ge={},te={exports:{}},me={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=function(jt){return function(){for(var U=[],fe=arguments.length;fe--;)U[fe]=arguments[fe];var at=U.pop();return jt.call(this,U,at)}},ze.exports=rt.default})(me,me.exports);var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.fallback=Ee,Pe.wrap=tt;var $=Pe.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,le=Pe.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,J=Pe.hasNextTick=typeof K=="object"&&typeof K.nextTick=="function";function Ee(ze){setTimeout(ze,0)}function tt(ze){return function(rt){for(var jt=[],U=arguments.length-1;U-- >0;)jt[U]=arguments[U+1];return ze(function(){return rt.apply(void 0,jt)})}}var Je;$?Je=queueMicrotask:le?Je=setImmediate:J?Je=K.nextTick:Je=Ee,Pe.default=tt(Je),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=sn;var jt=me.exports,U=$t(jt),fe=Pe,at=$t(fe),de=Ge;function $t(Wn){return Wn&&Wn.__esModule?Wn:{default:Wn}}function sn(Wn){return(0,de.isAsync)(Wn)?function(){for(var qn=[],dn=arguments.length;dn--;)qn[dn]=arguments[dn];var vt=qn.pop(),It=Wn.apply(this,qn);return pn(It,vt)}:(0,U.default)(function(qn,dn){var vt;try{vt=Wn.apply(this,qn)}catch(It){return dn(It)}if(vt&&typeof vt.then=="function")return pn(vt,dn);dn(null,vt)})}function pn(Wn,qn){return Wn.then(function(dn){Nn(qn,null,dn)},function(dn){Nn(qn,dn&&dn.message?dn:new Error(dn))})}function Nn(Wn,qn,dn){try{Wn(qn,dn)}catch(vt){(0,at.default)(function(It){throw It},vt)}}ze.exports=rt.default}(te,te.exports),Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.isAsyncIterable=Ge.isAsyncGenerator=Ge.isAsync=void 0;var wt=te.exports,pt=yt(wt);function yt(ze){return ze&&ze.__esModule?ze:{default:ze}}function Re(ze){return ze[Symbol.toStringTag]==="AsyncFunction"}function Ce(ze){return ze[Symbol.toStringTag]==="AsyncGenerator"}function Ue(ze){return typeof ze[Symbol.asyncIterator]=="function"}function We(ze){if(typeof ze!="function")throw new Error("expected a function");return Re(ze)?(0,pt.default)(ze):ze}Ge.default=We,Ge.isAsync=Re,Ge.isAsyncGenerator=Ce,Ge.isAsyncIterable=Ue;var lt={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=jt;function jt(U,fe){if(fe===void 0&&(fe=U.length),!fe)throw new Error("arity is undefined");function at(){for(var de=this,$t=[],sn=arguments.length;sn--;)$t[sn]=arguments[sn];return typeof $t[fe-1]=="function"?U.apply(this,$t):new Promise(function(pn,Nn){$t[fe-1]=function(Wn){for(var qn=[],dn=arguments.length-1;dn-- >0;)qn[dn]=arguments[dn+1];if(Wn)return Nn(Wn);pn(qn.length>1?qn:qn[0])},U.apply(de,$t)})}return at}ze.exports=rt.default})(lt,lt.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=oe.exports,U=sn(jt),fe=Ge,at=sn(fe),de=lt.exports,$t=sn(de);function sn(pn){return pn&&pn.__esModule?pn:{default:pn}}rt.default=(0,$t.default)(function(pn,Nn,Wn){var qn=(0,U.default)(Nn)?[]:{};pn(Nn,function(dn,vt,It){(0,at.default)(dn)(function(An){for(var Dn,Yn=[],dt=arguments.length-1;dt-- >0;)Yn[dt]=arguments[dt+1];Yn.length<2&&(Dn=Yn,Yn=Dn[0]),qn[vt]=Yn,It(An)})},function(dn){return Wn(dn,qn)})},3),ze.exports=rt.default}(be,be.exports);var tn={exports:{}},Le={exports:{}},_t={exports:{}},Me={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=jt;function jt(U){function fe(){for(var at=[],de=arguments.length;de--;)at[de]=arguments[de];if(U!==null){var $t=U;U=null,$t.apply(this,at)}}return Object.assign(fe,U),fe}ze.exports=rt.default})(Me,Me.exports);var nt={exports:{}},qe={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=function(jt){return jt[Symbol.iterator]&&jt[Symbol.iterator]()},ze.exports=rt.default})(qe,qe.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=Nn;var jt=oe.exports,U=de(jt),fe=qe.exports,at=de(fe);function de(Wn){return Wn&&Wn.__esModule?Wn:{default:Wn}}function $t(Wn){var qn=-1,dn=Wn.length;return function(){return++qn<dn?{value:Wn[qn],key:qn}:null}}function sn(Wn){var qn=-1;return function(){var vt=Wn.next();return vt.done?null:(qn++,{value:vt.value,key:qn})}}function pn(Wn){var qn=Wn?Object.keys(Wn):[],dn=-1,vt=qn.length;return function It(){var An=qn[++dn];return An==="__proto__"?It():dn<vt?{value:Wn[An],key:An}:null}}function Nn(Wn){if((0,U.default)(Wn))return $t(Wn);var qn=(0,at.default)(Wn);return qn?sn(qn):pn(Wn)}ze.exports=rt.default}(nt,nt.exports);var Ye={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=jt;function jt(U){return function(){for(var fe=[],at=arguments.length;at--;)fe[at]=arguments[at];if(U===null)throw new Error("Callback was already called.");var de=U;U=null,de.apply(this,fe)}}ze.exports=rt.default})(Ye,Ye.exports);var Lt={exports:{}},xt={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt={};rt.default=jt,ze.exports=rt.default})(xt,xt.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=at;var jt=xt.exports,U=fe(jt);function fe(de){return de&&de.__esModule?de:{default:de}}function at(de,$t,sn,pn){var Nn=!1,Wn=!1,qn=!1,dn=0,vt=0;function It(){dn>=$t||qn||Nn||(qn=!0,de.next().then(function(Yn){var dt=Yn.value,xe=Yn.done;if(!(Wn||Nn)){if(qn=!1,xe){Nn=!0,dn<=0&&pn(null);return}dn++,sn(dt,vt,An),vt++,It()}}).catch(Dn))}function An(Yn,dt){if(dn-=1,!Wn){if(Yn)return Dn(Yn);if(Yn===!1){Nn=!0,Wn=!0;return}if(dt===U.default||Nn&&dn<=0)return Nn=!0,pn(null);It()}}function Dn(Yn){Wn||(qn=!1,Nn=!0,pn(Yn))}It()}ze.exports=rt.default}(Lt,Lt.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=Me.exports,U=dn(jt),fe=nt.exports,at=dn(fe),de=Ye.exports,$t=dn(de),sn=Ge,pn=Lt.exports,Nn=dn(pn),Wn=xt.exports,qn=dn(Wn);function dn(vt){return vt&&vt.__esModule?vt:{default:vt}}rt.default=function(vt){return function(It,An,Dn){if(Dn=(0,U.default)(Dn),vt<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!It)return Dn(null);if((0,sn.isAsyncGenerator)(It))return(0,Nn.default)(It,vt,An,Dn);if((0,sn.isAsyncIterable)(It))return(0,Nn.default)(It[Symbol.asyncIterator](),vt,An,Dn);var Yn=(0,at.default)(It),dt=!1,xe=!1,Be=0,st=!1;function Dt(Sn,er){if(!xe)if(Be-=1,Sn)dt=!0,Dn(Sn);else if(Sn===!1)dt=!0,xe=!0;else{if(er===qn.default||dt&&Be<=0)return dt=!0,Dn(null);st||Ot()}}function Ot(){for(st=!0;Be<vt&&!dt;){var Sn=Yn();if(Sn===null){dt=!0,Be<=0&&Dn(null);return}Be+=1,An(Sn.value,Sn.key,(0,$t.default)(Dt))}st=!1}Ot()}},ze.exports=rt.default}(_t,_t.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=_t.exports,U=sn(jt),fe=Ge,at=sn(fe),de=lt.exports,$t=sn(de);function sn(Nn){return Nn&&Nn.__esModule?Nn:{default:Nn}}function pn(Nn,Wn,qn,dn){return(0,U.default)(Wn)(Nn,(0,at.default)(qn),dn)}rt.default=(0,$t.default)(pn,4),ze.exports=rt.default}(Le,Le.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=Le.exports,U=de(jt),fe=lt.exports,at=de(fe);function de(sn){return sn&&sn.__esModule?sn:{default:sn}}function $t(sn,pn,Nn){return(0,U.default)(sn,1,pn,Nn)}rt.default=(0,at.default)($t,3),ze.exports=rt.default}(tn,tn.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=$t;var jt=be.exports,U=de(jt),fe=tn.exports,at=de(fe);function de(sn){return sn&&sn.__esModule?sn:{default:sn}}function $t(sn,pn){return(0,U.default)(at.default,sn,pn)}ze.exports=rt.default}(ue,ue.exports);var Ie=se(ue.exports),Gt=function(){function ze(){this.args=[],this.tasks=[]}return ze.prototype.call=function(){for(var rt=arguments,jt=[],U=0;U<arguments.length;U++)jt[U]=rt[U];return this.args=jt,Ie(this.tasks)},ze.prototype.tap=function(rt,jt){var U=this;this.tasks.push(function(fe){jt.apply(void 0,ee([],he(U.args),!1)),fe(null,rt)})},ze}(),gn={exports:{}},Tn={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=oe.exports,U=An(jt),fe=xt.exports,at=An(fe),de=Le.exports,$t=An(de),sn=Me.exports,pn=An(sn),Nn=Ye.exports,Wn=An(Nn),qn=Ge,dn=An(qn),vt=lt.exports,It=An(vt);function An(xe){return xe&&xe.__esModule?xe:{default:xe}}function Dn(xe,Be,st){st=(0,pn.default)(st);var Dt=0,Ot=0,Sn=xe.length,er=!1;Sn===0&&st(null);function br($n,Oe){$n===!1&&(er=!0),er!==!0&&($n?st($n):(++Ot===Sn||Oe===at.default)&&st(null))}for(;Dt<Sn;Dt++)Be(xe[Dt],Dt,(0,Wn.default)(br))}function Yn(xe,Be,st){return(0,$t.default)(xe,1/0,Be,st)}function dt(xe,Be,st){var Dt=(0,U.default)(xe)?Dn:Yn;return Dt(xe,(0,dn.default)(Be),st)}rt.default=(0,It.default)(dt,3),ze.exports=rt.default})(Tn,Tn.exports),function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=$t;var jt=Tn.exports,U=de(jt),fe=be.exports,at=de(fe);function de(sn){return sn&&sn.__esModule?sn:{default:sn}}function $t(sn,pn){return(0,at.default)(U.default,sn,pn)}ze.exports=rt.default}(gn,gn.exports);var sr=se(gn.exports),nr=function(){function ze(){this.tasks=[]}return ze.prototype.promise=function(){return sr(this.tasks)},ze.prototype.tapPromise=function(rt,jt){var U=this;this.tasks.push(function(fe){return W(U,void 0,void 0,function(){return E(this,function(at){switch(at.label){case 0:return[4,jt()];case 1:return at.sent(),fe(null,rt),[2]}})})})},ze}(),Ft={exports:{}};(function(ze,rt){Object.defineProperty(rt,"__esModule",{value:!0});var jt=Me.exports,U=Nn(jt),fe=Ye.exports,at=Nn(fe),de=Ge,$t=Nn(de),sn=lt.exports,pn=Nn(sn);function Nn(qn){return qn&&qn.__esModule?qn:{default:qn}}function Wn(qn,dn){if(dn=(0,U.default)(dn),!Array.isArray(qn))return dn(new Error("First argument to waterfall must be an array of functions"));if(!qn.length)return dn();var vt=0;function It(Dn){var Yn=(0,$t.default)(qn[vt++]);Yn.apply(void 0,Dn.concat([(0,at.default)(An)]))}function An(Dn){for(var Yn=[],dt=arguments.length-1;dt-- >0;)Yn[dt]=arguments[dt+1];if(Dn!==!1){if(Dn||vt===qn.length)return dn.apply(void 0,[Dn].concat(Yn));It(Yn)}}It([])}rt.default=(0,pn.default)(Wn),ze.exports=rt.default})(Ft,Ft.exports);var Kt=se(Ft.exports),fn=function(){function ze(){this.tasks=[]}return ze.prototype.call=function(){return Kt(this.tasks)},ze.prototype.tap=function(rt,jt){this.tasks.length===0?this.tasks.push(function(U){var fe=jt();U(fe?null:!1,fe)}):this.tasks.push(function(U,fe){var at=jt.apply(void 0,ee([],he(U),!1));fe(at?null:!1,rt)})},ze}(),Gn=function(){function ze(){this.tasks=[]}return ze.prototype.call=function(){return Ie(this.tasks)},ze.prototype.tap=function(rt,jt){this.tasks.push(function(U){var fe=jt();U(fe,rt)})},ze}(),on=function(){function ze(){this.args=[],this.tasks=[]}return ze.prototype.promise=function(){for(var rt=arguments,jt=[],U=0;U<arguments.length;U++)jt[U]=rt[U];return this.args=jt,Ie(this.tasks)},ze.prototype.tapPromise=function(rt,jt){var U=this;this.tasks.push(function(fe){return W(U,void 0,void 0,function(){return E(this,function(at){switch(at.label){case 0:return[4,jt.apply(void 0,ee([],he(this.args),!1))];case 1:return at.sent(),fe(null,rt),[2]}})})})},ze}(),Pt=function(){function ze(){this.args=[],this.tasks=[]}return ze.prototype.promise=function(){for(var rt=arguments,jt=[],U=0;U<arguments.length;U++)jt[U]=rt[U];return this.args=jt,Ie(this.tasks)},ze.prototype.tapPromise=function(rt,jt){var U=this;this.tasks.push(function(fe){return W(U,void 0,void 0,function(){var at;return E(this,function(de){switch(de.label){case 0:return[4,jt.apply(void 0,ee([],he(this.args),!1))];case 1:return at=de.sent(),fe(at,rt),[2]}})})})},ze}(),zt=function(){function ze(){this.tasks=[]}return ze.prototype.promise=function(){return Kt(this.tasks)},ze.prototype.tapPromise=function(rt,jt){this.tasks.length===0?this.tasks.push(function(U){jt().then(function(fe){U(null,fe)})}):this.tasks.push(function(U,fe){jt(U).then(function(at){fe(null,at)})})},ze}()},17816:function(bt,G){(function(L,K){K(G)})(this,function(L){"use strict";function K($e){var ht=typeof Symbol=="function"&&Symbol.iterator,Ht=ht&&$e[ht],hn=0;if(Ht)return Ht.call($e);if($e&&typeof $e.length=="number")return{next:function(){return{value:($e=$e&&hn>=$e.length?void 0:$e)&&$e[hn++],done:!$e}}};throw new TypeError(ht?"Object is not iterable.":"Symbol.iterator is not defined.")}function W($e,ht){var Ht=typeof Symbol=="function"&&$e[Symbol.iterator];if(!Ht)return $e;var hn,Fn,Bn=Ht.call($e),yn=[];try{for(;(ht===void 0||0<ht--)&&!(hn=Bn.next()).done;)yn.push(hn.value)}catch(On){Fn={error:On}}finally{try{hn&&!hn.done&&(Ht=Bn.return)&&Ht.call(Bn)}finally{if(Fn)throw Fn.error}}return yn}function E($e,ht,Ht){if(Ht||arguments.length===2)for(var hn,Fn=0,Bn=ht.length;Fn<Bn;Fn++)!hn&&Fn in ht||((hn=hn||Array.prototype.slice.call(ht,0,Fn))[Fn]=ht[Fn]);return $e.concat(hn||Array.prototype.slice.call(ht))}function he($e){return se($e,"Function")}var ee={}.toString,se=function($e,ht){return ee.call($e)==="[object "+ht+"]"},ue=function($e){return Array.isArray?Array.isArray($e):se($e,"Array")},be=function($e){if(typeof(ht=$e)!="object"||ht===null||!se($e,"Object"))return!1;var ht;if(Object.getPrototypeOf($e)===null)return!0;for(var Ht=$e;Object.getPrototypeOf(Ht)!==null;)Ht=Object.getPrototypeOf(Ht);return Object.getPrototypeOf($e)===Ht},oe=function($e){return se($e,"Number")},Ge=Object.values?function($e){return Object.values($e)}:function($e){var ht,Ht=[],hn=$e,Fn=function(pr,hr){he($e)&&hr==="prototype"||Ht.push(pr)};if(hn){if(ue(hn))for(var Bn=0,yn=hn.length;Bn<yn&&Fn(hn[Bn],Bn)!==!1;Bn++);else if(ht=typeof hn,hn!==null&&ht=="object"||ht=="function"){for(var On in hn)if(hn.hasOwnProperty(On)&&Fn(hn[On],On)===!1)break}}return Ht},te=5;function me($e){for(var ht=[],Ht=1;Ht<arguments.length;Ht++)ht[Ht-1]=arguments[Ht];for(var hn=0;hn<ht.length;hn+=1)(function Fn(Bn,yn,On,pr){for(var hr in On=On||0,pr=pr||te,yn){var oi;yn.hasOwnProperty(hr)&&((oi=yn[hr])!==null&&be(oi)?(be(Bn[hr])||(Bn[hr]={}),On<pr?Fn(Bn[hr],oi,On+1,pr):Bn[hr]=yn[hr]):ue(oi)?(Bn[hr]=[],Bn[hr]=Bn[hr].concat(oi)):oi!==void 0&&(Bn[hr]=oi))}})($e,ht[hn]);return $e}function Pe($e){return $e}(function($e,ht){var Ht;if(he($e))return(Ht=function(){for(var hn=[],Fn=0;Fn<arguments.length;Fn++)hn[Fn]=arguments[Fn];var Bn,yn=ht?ht.apply(this,hn):hn[0],On=Ht.cache;return On.has(yn)?On.get(yn):(Bn=$e.apply(this,hn),On.set(yn,Bn),Bn)}).cache=new Map;throw new TypeError("Expected a function")})(function($e,yn){var Ht=(yn=yn===void 0?{}:yn).fontSize,hn=yn.fontFamily,Fn=yn.fontWeight,Bn=yn.fontStyle,yn=yn.fontVariant;return($=$||document.createElement("canvas").getContext("2d")).font=[Bn,yn,Fn,Ht+"px",hn].join(" "),$.measureText(se($e,"String")?$e:"").width},function($e,ht){return function(){for(var Ht=0,hn=0,Fn=arguments.length;hn<Fn;hn++)Ht+=arguments[hn].length;for(var Bn=Array(Ht),yn=0,hn=0;hn<Fn;hn++)for(var On=arguments[hn],pr=0,hr=On.length;pr<hr;pr++,yn++)Bn[yn]=On[pr];return Bn}([$e],Ge(ht=ht===void 0?{}:ht)).join("")});var $,le=typeof Float32Array!="undefined"?Float32Array:Array;function J(){var $e=new le(9);return le!=Float32Array&&($e[1]=0,$e[2]=0,$e[3]=0,$e[5]=0,$e[6]=0,$e[7]=0),$e[0]=1,$e[4]=1,$e[8]=1,$e}Math.hypot||(Math.hypot=function(){for(var $e=0,ht=arguments.length;ht--;)$e+=arguments[ht]*arguments[ht];return Math.sqrt($e)});var Ee=function($e,Xi,$i){var hn=Xi[0],Fn=Xi[1],Bn=Xi[2],yn=Xi[3],On=Xi[4],pr=Xi[5],hr=Xi[6],oi=Xi[7],Xi=Xi[8],io=$i[0],ai=$i[1],Yi=$i[2],ji=$i[3],Yr=$i[4],To=$i[5],mi=$i[6],wo=$i[7],$i=$i[8];return $e[0]=io*hn+ai*yn+Yi*hr,$e[1]=io*Fn+ai*On+Yi*oi,$e[2]=io*Bn+ai*pr+Yi*Xi,$e[3]=ji*hn+Yr*yn+To*hr,$e[4]=ji*Fn+Yr*On+To*oi,$e[5]=ji*Bn+Yr*pr+To*Xi,$e[6]=mi*hn+wo*yn+$i*hr,$e[7]=mi*Fn+wo*On+$i*oi,$e[8]=mi*Bn+wo*pr+$i*Xi,$e};function tt(){var $e=new le(16);return le!=Float32Array&&($e[1]=0,$e[2]=0,$e[3]=0,$e[4]=0,$e[6]=0,$e[7]=0,$e[8]=0,$e[9]=0,$e[11]=0,$e[12]=0,$e[13]=0,$e[14]=0),$e[0]=1,$e[5]=1,$e[10]=1,$e[15]=1,$e}var Je=function($e,mi,Ht){var hn=mi[0],Fn=mi[1],Bn=mi[2],yn=mi[3],On=mi[4],pr=mi[5],hr=mi[6],oi=mi[7],Xi=mi[8],io=mi[9],ai=mi[10],Yi=mi[11],ji=mi[12],Yr=mi[13],To=mi[14],mi=mi[15],wo=Ht[0],$i=Ht[1],co=Ht[2],Mo=Ht[3];return $e[0]=wo*hn+$i*On+co*Xi+Mo*ji,$e[1]=wo*Fn+$i*pr+co*io+Mo*Yr,$e[2]=wo*Bn+$i*hr+co*ai+Mo*To,$e[3]=wo*yn+$i*oi+co*Yi+Mo*mi,wo=Ht[4],$i=Ht[5],co=Ht[6],Mo=Ht[7],$e[4]=wo*hn+$i*On+co*Xi+Mo*ji,$e[5]=wo*Fn+$i*pr+co*io+Mo*Yr,$e[6]=wo*Bn+$i*hr+co*ai+Mo*To,$e[7]=wo*yn+$i*oi+co*Yi+Mo*mi,wo=Ht[8],$i=Ht[9],co=Ht[10],Mo=Ht[11],$e[8]=wo*hn+$i*On+co*Xi+Mo*ji,$e[9]=wo*Fn+$i*pr+co*io+Mo*Yr,$e[10]=wo*Bn+$i*hr+co*ai+Mo*To,$e[11]=wo*yn+$i*oi+co*Yi+Mo*mi,wo=Ht[12],$i=Ht[13],co=Ht[14],Mo=Ht[15],$e[12]=wo*hn+$i*On+co*Xi+Mo*ji,$e[13]=wo*Fn+$i*pr+co*io+Mo*Yr,$e[14]=wo*Bn+$i*hr+co*ai+Mo*To,$e[15]=wo*yn+$i*oi+co*Yi+Mo*mi,$e};function wt($e){for(var ht=[],Ht=1;Ht<arguments.length;Ht++)ht[Ht-1]=arguments[Ht];return $e?ht.reduce(function(hn,Fn){return function(Bn){return Fn(hn(Bn))}},$e):Pe}function pt($e){return $e instanceof Float32Array||$e instanceof Array}function yt($e,ht,Ht){for(;$e<ht;)$e+=2*Math.PI;for(;Ht<$e;)$e-=2*Math.PI;return $e}st=new le(3),le!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0),st=new le(4),le!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0,st[3]=0);function Re(yn,ht,Ht,hn,Fn){var Bn=(yn=W(yn,2))[0],yn=yn[1],On=J();return Bn=[Bn,yn],(yn=On)[0]=1,yn[1]=0,yn[2]=0,yn[3]=0,yn[4]=1,yn[5]=0,yn[6]=Bn[0],yn[7]=Bn[1],yn[8]=1,yn}function Ce($e,...ht){return ht.reduce((Ht,hn)=>Fn=>Ht(hn(Fn)),$e)}function Ue($e,ht){return ht-$e?Ht=>(Ht-$e)/(ht-$e):Ht=>.5}const We=Math.sqrt(50),lt=Math.sqrt(10),tn=Math.sqrt(2);function Le($e,ht,Ht){return ht=(ht-$e)/Math.max(0,Ht),$e=Math.floor(Math.log(ht)/Math.LN10),Ht=ht/_f(10,$e),0<=$e?(Ht>=We?10:Ht>=lt?5:Ht>=tn?2:1)*_f(10,$e):-_f(10,-$e)/(Ht>=We?10:Ht>=lt?5:Ht>=tn?2:1)}const _t=($e,ht,Ht=5)=>{$e=[$e,ht];let hn=0,Fn=$e.length-1,Bn=$e[hn],yn=$e[Fn],On;return yn<Bn&&([Bn,yn]=[yn,Bn],[hn,Fn]=[Fn,hn]),0<(On=Le(Bn,yn,Ht))?(Bn=Math.floor(Bn/On)*On,yn=Math.ceil(yn/On)*On,On=Le(Bn,yn,Ht)):On<0&&(Bn=Math.ceil(Bn*On)/On,yn=Math.floor(yn*On)/On,On=Le(Bn,yn,Ht)),0<On?($e[hn]=Math.floor(Bn/On)*On,$e[Fn]=Math.ceil(yn/On)*On):On<0&&($e[hn]=Math.ceil(Bn*On)/On,$e[Fn]=Math.floor(yn*On)/On),$e};function Me($e){return $e!=null&&!Number.isNaN($e)}function nt($e,ht){return Ht=>{Ht.prototype.rescale=function(){this.initRange(),this.nice();var[hn]=this.chooseTransforms();this.composeOutput(hn,this.chooseClamp(hn))},Ht.prototype.initRange=function(){var hn=this.options.interpolator;this.options.range=$e(hn)},Ht.prototype.composeOutput=function(hn,Fn){var Bn,{domain:On,interpolator:yn,round:pr}=this.getOptions(),On=ht(On.map(hn)),pr=pr?(Bn=yn,hr=>(hr=Bn(hr),oe(hr)?Math.round(hr):hr)):yn;this.output=Ce(pr,On,Fn,hn)},Ht.prototype.invert=void 0}}var qe,st={exports:{}},Be={exports:{}},Ye=function($e){return!(!$e||typeof $e=="string")&&($e instanceof Array||Array.isArray($e)||0<=$e.length&&($e.splice instanceof Function||Object.getOwnPropertyDescriptor($e,$e.length-1)&&$e.constructor.name!=="String"))},Lt=Array.prototype.concat,xt=Array.prototype.slice,Ie=Be.exports=function($e){for(var ht=[],Ht=0,hn=$e.length;Ht<hn;Ht++){var Fn=$e[Ht];Ye(Fn)?ht=Lt.call(ht,xt.call(Fn)):ht.push(Fn)}return ht},Gt=(Ie.wrap=function($e){return function(){return $e(Ie(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),gn=Be.exports,Tn=Object.hasOwnProperty,sr=Object.create(null);for(qe in Gt)Tn.call(Gt,qe)&&(sr[Gt[qe]]=qe);var nr=st.exports={to:{},get:{}};function Ft($e,ht,Ht){return Math.min(Math.max(ht,$e),Ht)}function Kt($e){return $e=Math.round($e).toString(16).toUpperCase(),$e.length<2?"0"+$e:$e}nr.get=function($e){var ht,Ht;switch($e.substring(0,3).toLowerCase()){case"hsl":ht=nr.get.hsl($e),Ht="hsl";break;case"hwb":ht=nr.get.hwb($e),Ht="hwb";break;default:ht=nr.get.rgb($e),Ht="rgb"}return ht?{model:Ht,value:ht}:null},nr.get.rgb=function($e){if(!$e)return null;var ht,Ht,hn,Fn=[0,0,0,1];if(ht=$e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(hn=ht[2],ht=ht[1],Ht=0;Ht<3;Ht++){var Bn=2*Ht;Fn[Ht]=parseInt(ht.slice(Bn,2+Bn),16)}hn&&(Fn[3]=parseInt(hn,16)/255)}else if(ht=$e.match(/^#([a-f0-9]{3,4})$/i)){for(hn=(ht=ht[1])[3],Ht=0;Ht<3;Ht++)Fn[Ht]=parseInt(ht[Ht]+ht[Ht],16);hn&&(Fn[3]=parseInt(hn+hn,16)/255)}else{if(ht=$e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(Ht=0;Ht<3;Ht++)Fn[Ht]=parseInt(ht[Ht+1],0);else{if(!(ht=$e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(ht=$e.match(/^(\w+)$/))?ht[1]==="transparent"?[0,0,0,0]:Tn.call(Gt,ht[1])?((Fn=Gt[ht[1]])[3]=1,Fn):null:null;for(Ht=0;Ht<3;Ht++)Fn[Ht]=Math.round(2.55*parseFloat(ht[Ht+1]))}ht[4]&&(ht[5]?Fn[3]=.01*parseFloat(ht[4]):Fn[3]=parseFloat(ht[4]))}for(Ht=0;Ht<3;Ht++)Fn[Ht]=Ft(Fn[Ht],0,255);return Fn[3]=Ft(Fn[3],0,1),Fn},nr.get.hsl=function($e){var ht;return($e=$e&&$e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(ht=parseFloat($e[4]),[(parseFloat($e[1])%360+360)%360,Ft(parseFloat($e[2]),0,100),Ft(parseFloat($e[3]),0,100),Ft(isNaN(ht)?1:ht,0,1)]):null},nr.get.hwb=function($e){var ht;return($e=$e&&$e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(ht=parseFloat($e[4]),[(parseFloat($e[1])%360+360)%360,Ft(parseFloat($e[2]),0,100),Ft(parseFloat($e[3]),0,100),Ft(isNaN(ht)?1:ht,0,1)]):null},nr.to.hex=function(){var $e=gn(arguments);return"#"+Kt($e[0])+Kt($e[1])+Kt($e[2])+($e[3]<1?Kt(Math.round(255*$e[3])):"")},nr.to.rgb=function(){var $e=gn(arguments);return $e.length<4||$e[3]===1?"rgb("+Math.round($e[0])+", "+Math.round($e[1])+", "+Math.round($e[2])+")":"rgba("+Math.round($e[0])+", "+Math.round($e[1])+", "+Math.round($e[2])+", "+$e[3]+")"},nr.to.rgb.percent=function(){var $e=gn(arguments),ht=Math.round($e[0]/255*100),Ht=Math.round($e[1]/255*100),hn=Math.round($e[2]/255*100);return $e.length<4||$e[3]===1?"rgb("+ht+"%, "+Ht+"%, "+hn+"%)":"rgba("+ht+"%, "+Ht+"%, "+hn+"%, "+$e[3]+")"},nr.to.hsl=function(){var $e=gn(arguments);return $e.length<4||$e[3]===1?"hsl("+$e[0]+", "+$e[1]+"%, "+$e[2]+"%)":"hsla("+$e[0]+", "+$e[1]+"%, "+$e[2]+"%, "+$e[3]+")"},nr.to.hwb=function(){var $e=gn(arguments),ht="";return 4<=$e.length&&$e[3]!==1&&(ht=", "+$e[3]),"hwb("+$e[0]+", "+$e[1]+"%, "+$e[2]+"%"+ht+")"},nr.to.keyword=function($e){return sr[$e.slice(0,3)]};var fn=st.exports;function Gn($e,ht,Ht){let hn=Ht;return hn<0&&(hn+=1),1<hn&&--hn,hn<1/6?$e+6*(ht-$e)*hn:hn<.5?ht:hn<2/3?$e+(ht-$e)*(2/3-hn)*6:$e}function on(Fn){var ht,Ht,hn,Fn=fn.get(Fn);return Fn?({model:Fn,value:ht}=Fn,Fn==="rgb"?ht:Fn==="hsl"?(ht=(Fn=ht)[0]/360,Ht=Fn[1]/100,hn=Fn[2]/100,Fn=Fn[3],Ht==0?[255*hn,255*hn,255*hn,Fn]:[255*Gn(Ht=2*hn-(hn=hn<.5?hn*(1+Ht):hn+Ht-hn*Ht),hn,ht+1/3),255*Gn(Ht,hn,ht),255*Gn(Ht,hn,ht-1/3),Fn]):null):null}const Pt=($e,ht)=>Ht=>$e*(1-Ht)+ht*Ht,zt=($e,ht)=>{if(typeof $e=="number"&&typeof ht=="number")return Pt($e,ht);if(typeof $e!="string"||typeof ht!="string")return()=>$e;{var Ht=$e,hn=ht;const Fn=on(Ht),Bn=on(hn);return Fn===null||Bn===null?Fn?()=>Ht:()=>hn:yn=>{var On=new Array(4);for(let Yi=0;Yi<4;Yi+=1){var pr=Fn[Yi],hr=Bn[Yi];On[Yi]=pr*(1-yn)+hr*yn}var[oi,Xi,io,ai]=On;return`rgba(${Math.round(oi)}, ${Math.round(Xi)}, ${Math.round(io)}, ${ai})`}}},ze=($e,ht)=>{const Ht=Pt($e,ht);return hn=>Math.round(Ht(hn))};function rt({map:$e,initKey:ht},Ht){return ht=ht(Ht),$e.has(ht)?$e.get(ht):Ht}function jt($e){return typeof $e=="object"?$e.valueOf():$e}class U extends Map{constructor(ht){if(super(),this.map=new Map,this.initKey=jt,ht!==null)for(var[Ht,hn]of ht)this.set(Ht,hn)}get(ht){return super.get(rt({map:this.map,initKey:this.initKey},ht))}has(ht){return super.has(rt({map:this.map,initKey:this.initKey},ht))}set(ht,Ht){return super.set(([{map:ht,initKey:hn},Fn]=[{map:this.map,initKey:this.initKey},ht],hn=hn(Fn),ht.has(hn)?ht.get(hn):(ht.set(hn,Fn),Fn)),Ht);var hn,Fn}delete(ht){return super.delete(([{map:ht,initKey:Ht},hn]=[{map:this.map,initKey:this.initKey},ht],Ht=Ht(hn),ht.has(Ht)&&(hn=ht.get(Ht),ht.delete(Ht)),hn));var Ht,hn}}class fe{constructor(ht){this.options=me({},this.getDefaultOptions()),this.update(ht)}getOptions(){return this.options}update(ht={}){this.options=me({},this.options,ht),this.rescale(ht)}rescale(ht){}}const at=Symbol("defaultUnknown");function de($e,ht,Ht){for(let hn=0;hn<ht.length;hn+=1)$e.has(ht[hn])||$e.set(Ht(ht[hn]),hn)}function $t(ht){var{value:ht,from:Ht,to:hn,mapper:Fn,notFoundReturn:Bn}=ht;let yn=Fn.get(ht);if(yn===void 0){if(Bn!==at)return Bn;yn=Ht.push(ht)-1,Fn.set(ht,yn)}return hn[yn%hn.length]}function sn($e){return $e instanceof Date?ht=>""+ht:typeof $e=="object"?ht=>JSON.stringify(ht):ht=>ht}class pn extends fe{getDefaultOptions(){return{domain:[],range:[],unknown:at}}constructor(ht){super(ht)}map(ht){return this.domainIndexMap.size===0&&de(this.domainIndexMap,this.getDomain(),this.domainKey),$t({value:this.domainKey(ht),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(ht){return this.rangeIndexMap.size===0&&de(this.rangeIndexMap,this.getRange(),this.rangeKey),$t({value:this.rangeKey(ht),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(ht){var[Ht]=this.options.domain,[hn]=this.options.range;this.domainKey=sn(Ht),this.rangeKey=sn(hn),this.rangeIndexMap?(ht&&!ht.range||this.rangeIndexMap.clear(),ht&&!ht.domain&&!ht.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new pn(this.options)}getRange(){return this.options.range}getDomain(){var ht,Ht;return this.sortedDomain||({domain:ht,compare:Ht}=this.options,this.sortedDomain=Ht?[...ht].sort(Ht):ht),this.sortedDomain}}function Nn(Yr){const{domain:ht,range:Ht,paddingOuter:hn,paddingInner:Fn,flex:Bn,round:yn,align:On}=Yr;var pr=ht.length,ai=0<(ai=(Yr=pr)-(hr=Bn).length)?[...hr,...new Array(ai).fill(1)]:ai<0?hr.slice(0,Yr):hr,[Yr,hr]=Ht,hr=hr-Yr,ji=hr/(2/pr*hn+1-1/pr*Fn);const oi=ji*Fn/pr;ji-=pr*oi;const Xi=function($i){const co=Math.min(...$i);return $i.map(Mo=>Mo/co)}(ai),io=ji/Xi.reduce(($i,co)=>$i+co);var ai=new U(ht.map(($i,co)=>(co=Xi[co]*io,[$i,yn?Math.floor(co):co]))),Yi=new U(ht.map(($i,co)=>(co=Xi[co]*io+oi,[$i,yn?Math.floor(co):co]))),ji=Array.from(Yi.values()).reduce(($i,co)=>$i+co),Yr=Yr+(hr-(ji-ji/pr*Fn))*On;let To=yn?Math.round(Yr):Yr;var mi=new Array(pr);for(let $i=0;$i<pr;$i+=1){mi[$i]=(wo=To,Math.round(1e12*wo)/1e12);var wo=ht[$i];To+=Yi.get(wo)}return{valueBandWidth:ai,valueStep:Yi,adjustedRange:mi}}class Wn extends pn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:at,flex:[]}}constructor(ht){super(ht)}clone(){return new Wn(this.options)}getStep(ht){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:ht===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(ht)}getBandWidth(ht){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:ht===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(ht)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:ht,paddingInner:Ht}=this.options;return 0<ht?ht:Ht}getPaddingOuter(){var{padding:ht,paddingOuter:Ht}=this.options;return 0<ht?ht:Ht}rescale(){super.rescale();var{align:hn,domain:ht,range:Fn,round:Bn,flex:Ht}=this.options,{adjustedRange:hn,valueBandWidth:Fn,valueStep:Bn}=function(hr){var On=hr.domain;if((On=On.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((pr=hr.flex)==null||!pr.length))return Nn(hr);var{range:pr,paddingOuter:hr,paddingInner:oi,round:Xi,align:io}=hr;let ai,Yi,ji=pr[0];return pr=pr[1]-ji,ai=pr/Math.max(1,2*hr+(On-oi)),Xi&&(ai=Math.floor(ai)),ji+=(pr-ai*(On-oi))*io,Yi=ai*(1-oi),Xi&&(ji=Math.round(ji),Yi=Math.round(Yi)),hr=new Array(On).fill(0).map((Yr,To)=>ji+To*ai),{valueStep:ai,valueBandWidth:Yi,adjustedRange:hr}}({align:hn,range:Fn,round:Bn,flex:Ht,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:ht});this.valueStep=Bn,this.valueBandWidth=Fn,this.adjustedRange=hn}}const qn=($e,ht,Ht)=>{let hn,Fn,Bn=$e,yn=ht;if(Bn===yn&&0<Ht)return[Bn];let On=Le(Bn,yn,Ht);if(On===0||!Number.isFinite(On))return[];if(0<On){Bn=Math.ceil(Bn/On),yn=Math.floor(yn/On),Fn=new Array(hn=Math.ceil(yn-Bn+1));for(let pr=0;pr<hn;pr+=1)Fn[pr]=(Bn+pr)*On}else{On=-On,Bn=Math.ceil(Bn*On),yn=Math.floor(yn*On),Fn=new Array(hn=Math.ceil(yn-Bn+1));for(let pr=0;pr<hn;pr+=1)Fn[pr]=(Bn+pr)/On}return Fn},dn=(hn,Bn,Ht)=>{var[hn,Fn]=hn,[Bn,yn]=Bn;let On,pr;return Ce(pr=hn<Fn?(On=Ue(hn,Fn),Ht(Bn,yn)):(On=Ue(Fn,hn),Ht(yn,Bn)),On)},vt=($e,ht,Ht)=>{const hn=Math.min($e.length,ht.length)-1,Fn=new Array(hn),Bn=new Array(hn);var yn=$e[0]>$e[hn],On=yn?[...$e].reverse():$e,pr=yn?[...ht].reverse():ht;for(let hr=0;hr<hn;hr+=1)Fn[hr]=Ue(On[hr],On[hr+1]),Bn[hr]=Ht(pr[hr],pr[hr+1]);return hr=>{var oi=function(io,ai,Yi,ji,Yr){let To=Yi||0,mi=ji||io.length;for(var wo=Yr||(co=>co);To<mi;){var $i=Math.floor((To+mi)/2);wo(io[$i])>ai?mi=$i:To=$i+1}return To}($e,hr,1,hn)-1,Xi=Fn[oi];return Ce(Bn[oi],Xi)(hr)}},It=($e,ht,Ht,hn)=>(2<Math.min($e.length,ht.length)?vt:dn)($e,ht,hn?ze:Ht);class An extends fe{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Pt,tickCount:5}}map(ht){return Me(ht)?this.output(ht):this.options.unknown}invert(ht){return Me(ht)?this.input(ht):this.options.unknown}nice(){var ht,Ht,hn,Fn;this.options.nice&&([ht,Ht,hn,...Fn]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(ht,Ht,hn,...Fn))}getTicks(){var ht=this.options.tickMethod,[Ht,hn,Fn,...Bn]=this.getTickMethodOptions();return ht(Ht,hn,Fn,...Bn)}getTickMethodOptions(){var{domain:ht,tickCount:Ht}=this.options;return[ht[0],ht[ht.length-1],Ht]}chooseNice(){return _t}rescale(){this.nice();var[ht,Ht]=this.chooseTransforms();this.composeOutput(ht,this.chooseClamp(ht)),this.composeInput(ht,Ht,this.chooseClamp(Ht))}chooseClamp(hn){var{clamp:Ht,range:Fn}=this.options,hn=this.options.domain.map(hn),Fn=Math.min(hn.length,Fn.length);if(Ht){Ht=hn[0],hn=hn[Fn-1];const Bn=hn<Ht?hn:Ht,yn=hn<Ht?Ht:hn;return On=>Math.min(Math.max(Bn,On),yn)}return Pe}composeOutput(ht,Ht){var{domain:yn,range:hn,round:Fn,interpolate:Bn}=this.options,yn=It(yn.map(ht),hn,Bn,Fn);this.output=Ce(yn,Ht,ht)}composeInput(ht,Ht,hn){var{domain:Fn,range:Bn}=this.options,Bn=It(Bn,Fn.map(ht),Pt);this.input=Ce(Ht,hn,Bn)}}class Dn extends An{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:zt,tickMethod:qn,tickCount:5}}chooseTransforms(){return[Pe,Pe]}clone(){return new Dn(this.options)}}class Yn extends Wn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:at,paddingInner:1,paddingOuter:0}}constructor(ht){super(ht)}getPaddingInner(){return 1}clone(){return new Yn(this.options)}update(ht){super.update(ht)}getPaddingOuter(){return this.options.padding}}function dt($e,ht){for(var Ht=[],hn=0,Fn=$e.length;hn<Fn;hn++)Ht.push($e[hn].substr(0,ht));return Ht}var xe,Be=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],st=["January","February","March","April","May","June","July","August","September","October","November","December"],Dt=dt(st,3);(function($e){for(var ht=[],Ht=1;Ht<arguments.length;Ht++)ht[Ht-1]=arguments[Ht];for(var hn=0,Fn=ht;hn<Fn.length;hn++){var Bn,yn=Fn[hn];for(Bn in yn)$e[Bn]=yn[Bn]}})({},{dayNamesShort:dt(Be,3),dayNames:Be,monthNamesShort:Dt,monthNames:st,amPm:["am","pm"],DoFn:function($e){return $e+["th","st","nd","rd"][3<$e%10?0:($e-$e%10!=10?1:0)*$e%10]}});var Ot;let Sn=xe=class extends Dn{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Pe,tickMethod:qn,tickCount:5}}constructor($e){super($e)}clone(){return new xe(this.options)}};Sn=xe=function($e,ht,Ht,hn){var Fn,Bn=arguments.length,yn=Bn<3?ht:hn===null?hn=Object.getOwnPropertyDescriptor(ht,Ht):hn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")yn=Reflect.decorate($e,ht,Ht,hn);else for(var On=$e.length-1;0<=On;On--)(Fn=$e[On])&&(yn=(Bn<3?Fn(yn):3<Bn?Fn(ht,Ht,yn):Fn(ht,Ht))||yn);return 3<Bn&&yn&&Object.defineProperty(ht,Ht,yn),yn}([nt(function($e){return[$e(0),$e(1)]},ht=>{var[ht,Ht]=ht;return Ce(Pt(0,1),Ue(ht,Ht))})],Sn);let er=Ot=class extends Dn{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:Pe,tickMethod:qn,tickCount:5}}constructor($e){super($e)}clone(){return new Ot(this.options)}};er=Ot=function($e,ht,Ht,hn){var Fn,Bn=arguments.length,yn=Bn<3?ht:hn===null?hn=Object.getOwnPropertyDescriptor(ht,Ht):hn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")yn=Reflect.decorate($e,ht,Ht,hn);else for(var On=$e.length-1;0<=On;On--)(Fn=$e[On])&&(yn=(Bn<3?Fn(yn):3<Bn?Fn(ht,Ht,yn):Fn(ht,Ht))||yn);return 3<Bn&&yn&&Object.defineProperty(ht,Ht,yn),yn}([nt(function($e){return[$e(0),$e(.5),$e(1)]},$e=>{const[ht,Ht,hn]=$e,Fn=Ce(Pt(0,.5),Ue(ht,Ht)),Bn=Ce(Pt(.5,1),Ue(Ht,hn));return yn=>(ht>hn?yn<Ht?Bn:Fn:yn<Ht?Fn:Bn)(yn)})],er);function br($e,ht,Ht,hn,Fn){var Bn=new Dn({range:[ht,ht+hn]}),yn=new Dn({range:[Ht,Ht+Fn]});return{transform:function(hr){var hr=W(hr,2),pr=hr[0],hr=hr[1];return[Bn.map(pr),yn.map(hr)]},untransform:function(hr){var hr=W(hr,2),pr=hr[0],hr=hr[1];return[Bn.invert(pr),yn.invert(hr)]}}}function $n($e,ht,Ht,hn,Fn){return(0,W($e,1)[0])(ht,Ht,hn,Fn)}function Oe($e,ht,Ht,hn,Fn){return W($e,1)[0]}function we(pr,ht,Ht,hn,Fn){var Bn=(pr=W(pr,4))[0],yn=pr[1],On=pr[2],pr=pr[3],hr=new Dn({range:[On,pr]}),oi=new Dn({range:[Bn,yn]}),Xi=1<(On=Fn/hn)?1:On,io=1<On?1/On:1;return{transform:function(ji){var ji=W(ji,2),Yi=ji[0],ji=ji[1],Yi=oi.map(Yi),ji=hr.map(ji);return[.5*(ji*Math.cos(Yi)*Xi)+.5,.5*(ji*Math.sin(Yi)*io)+.5]},untransform:function(Yr){var Yr=W(Yr,2),Yi=Yr[0],Yr=Yr[1],Yi=2*(Yi-.5)/Xi,Yr=2*(Yr-.5)/io,ji=Math.sqrt(Math.pow(Yi,2)+Math.pow(Yr,2)),Yr=yt(Math.atan2(Yr,Yi),Bn,yn);return[oi.invert(Yr),hr.invert(ji)]}}}function Ve($e,ht,Ht,hn,Fn){return{transform:function(yn){var yn=W(yn,2),On=yn[0];return[yn[1],On]},untransform:function(yn){var yn=W(yn,2),On=yn[0];return[yn[1],On]}}}function it($e){for(var ht=[],Ht=1;Ht<arguments.length;Ht++)ht[Ht-1]=arguments[Ht];return Qn.apply(void 0,E([[-1,-1]],W(ht),!1))}function At($e){for(var ht=[],Ht=1;Ht<arguments.length;Ht++)ht[Ht-1]=arguments[Ht];return Qn.apply(void 0,E([[-1,1]],W(ht),!1))}function qt($e){for(var ht=[],Ht=1;Ht<arguments.length;Ht++)ht[Ht-1]=arguments[Ht];return Qn.apply(void 0,E([[1,-1]],W(ht),!1))}function un(yn,ht,Ht,hn,Fn){var Bn,yn=W(yn,1)[0],On=J();return On=On,yn=yn,Bn=Math.sin(yn),yn=Math.cos(yn),On[0]=yn,On[1]=Bn,On[2]=0,On[3]=-Bn,On[4]=yn,On[5]=0,On[6]=0,On[7]=0,On[8]=1,On}function St($e,ht,Ht,hn,Fn){var Bn=($e=W($e,4))[0],yn=$e[1],On=$e[2],pr=($e[3]-On)/(+yn/(2*Math.PI)+1),hr=pr/(2*Math.PI),oi=new Dn({range:[On,On+.99*pr]}),Xi=new Dn({range:[Bn,yn]}),io=1<($e=Fn/hn)?1:$e,ai=1<$e?1/$e:1;return{transform:function(Yr){var Yr=W(Yr,2),ji=Yr[0],Yr=Yr[1],ji=Xi.map(ji),Yr=oi.map(Yr);return[.5*(Math.cos(ji)*(hr*ji+Yr)*io)+.5,.5*(Math.sin(ji)*(hr*ji+Yr)*ai)+.5]},untransform:function(Yr){var Yr=W(Yr,2),To=Yr[0],Yr=Yr[1],To=2*(To-.5)/io,Yr=2*(Yr-.5)/ai,ji=Math.sqrt(Math.pow(To,2)+Math.pow(Yr,2)),Yr=yt(Math.atan2(Yr,To)+Math.floor(ji/pr)*Math.PI*2,Bn,yn),To=ji-hr*Yr;return[Xi.invert(Yr),oi.invert(To)]}}}function Jt(pr,ht,Ht,hn,Fn){var Bn=(pr=W(pr,4))[0],yn=pr[1],On=pr[2],pr=pr[3],hr=new Dn({range:[On,pr]});return{transform:function(oi){for(var Xi=[],io=oi.length,ai=new Yn({domain:new Array(io).fill(0).map(function(To,mi){return mi}),range:[Bn,yn]}),Yi=0;Yi<io;Yi++){var Yr=oi[Yi],ji=ai.map(Yi),Yr=hr.map(Yr);Xi.push(ji,Yr)}return Xi},untransform:function(oi){for(var Xi=[],io=0;io<oi.length;io+=2){var ai=oi[io+1];Xi.push(hr.invert(ai))}return Xi}}}var Qn=function(yn,ht,Ht,hn,Fn){var yn=W(yn,2),Bn=yn[0],yn=yn[1],On=J();return Bn=[Bn,yn],(yn=On)[0]=Bn[0],yn[1]=0,yn[2]=0,yn[3]=0,yn[4]=Bn[1],yn[5]=0,yn[6]=0,yn[7]=0,yn[8]=1,yn};function Er($e){return 1/Math.tan($e)}function Gr($e,ht,Ht,hn,Fn){var Bn=Er(W($e,1)[0]);return{transform:function(pr){var pr=W(pr,2),On=pr[0],pr=pr[1];return[On+pr*Bn,pr]},untransform:function(pr){var pr=W(pr,2),On=pr[0],pr=pr[1];return[On-pr*Bn,pr]}}}function mr($e,ht,Ht,hn,Fn){var Bn=Er(W($e,1)[0]);return{transform:function(On){var On=W(On,2),pr=On[0];return[pr,On[1]+pr*Bn]},untransform:function(On){var On=W(On,2),pr=On[0];return[pr,On[1]-pr*Bn]}}}function Hr($e,ht,Ht,On,yn){var Bn=$e<ht,yn=(Bn?ht-On:yn-ht)||yn-On,On=Bn?-1:1;return On*yn*(Ht+1)/(Ht+yn/(($e-ht)*On))+ht}function wi($e,ht,Ht,hn,yn){var Bn=$e<ht,yn=(Bn?ht-hn:yn-ht)||yn-hn;return yn/(yn*(Ht+1)/($e-ht)-Ht*(Bn?-1:1))+ht}function Pi($e,ht,Ht){return Ht?new Dn({range:[0,1],domain:[0,ht]}).map($e):$e}function wr(On,ht,Ht,hn,Fn){var Bn=(On=W(On,3))[0],yn=On[1],On=On[2],pr=Pi(Bn,hn,On!==void 0&&On);return{transform:function(Xi){var Xi=W(Xi,2),oi=Xi[0],Xi=Xi[1];return[Hr(oi,pr,yn,0,1),Xi]},untransform:function(Xi){var Xi=W(Xi,2),oi=Xi[0],Xi=Xi[1];return[wi(oi,pr,yn,0,1),Xi]}}}function gi(On,ht,Ht,hn,Fn){var Bn=(On=W(On,3))[0],yn=On[1],On=On[2],pr=Pi(Bn,Fn,On!==void 0&&On);return{transform:function(hr){return hr=W(hr,2),[hr[0],Hr(hr[1],pr,yn,0,1)]},untransform:function(hr){return hr=W(hr,2),[hr[0],wi(hr[1],pr,yn,0,1)]}}}function di(hr,ht,Ht,hn,Fn){var Bn=(hr=W(hr,5))[0],yn=hr[1],On=hr[2],pr=hr[3],hr=hr[4],oi=Pi(Bn,hn,hr=hr!==void 0&&hr),Xi=Pi(yn,Fn,hr);return{transform:function(Yi){var Yi=W(Yi,2),ai=Yi[0],Yi=Yi[1];return[Hr(ai,oi,On,0,1),Hr(Yi,Xi,pr,0,1)]},untransform:function(Yi){var Yi=W(Yi,2),ai=Yi[0],Yi=Yi[1];return[wi(ai,oi,On,0,1),wi(Yi,Xi,pr,0,1)]}}}function xi(hr,ht,Ht,hn,Fn){var Bn=(hr=W(hr,5))[0],yn=hr[1],On=hr[2],pr=hr[3],hr=(hr=hr[4])!==void 0&&hr,oi=new Dn({range:[0,hn]}),Xi=new Dn({range:[0,Fn]}),io=hr?Bn:oi.map(Bn),ai=hr?yn:Xi.map(yn);return{transform:function(Yr){var Yr=W(Yr,2),ji=Yr[0],Yr=Yr[1],To=oi.map(ji)-io,mi=Xi.map(Yr)-ai,wo=Math.sqrt(To*To+mi*mi);return On<wo?[ji,Yr]:(ji=Hr(wo,0,pr,0,On),Yr=Math.atan2(mi,To),wo=io+ji*Math.cos(Yr),mi=ai+ji*Math.sin(Yr),[oi.invert(wo),Xi.invert(mi)])},untransform:function(Yr){var Yr=W(Yr,2),ji=Yr[0],Yr=Yr[1],To=oi.map(ji)-io,mi=Xi.map(Yr)-ai,wo=Math.sqrt(To*To+mi*mi);return On<wo?[ji,Yr]:(ji=wi(wo,0,pr,0,On),Yr=Math.atan2(mi,To),wo=io+ji*Math.cos(Yr),mi=ai+ji*Math.sin(Yr),[oi.invert(wo),Xi.invert(mi)])}}}function Fo($e,ht,Ht,hn,Fn,Bn,yn){var On=new Dn({range:[ht,ht+Fn]}),pr=new Dn({range:[Ht,Ht+Bn]}),hr=new Dn({range:[hn,hn+yn]});return{transform:function(ai){var ai=W(ai,3),Xi=ai[0],io=ai[1],ai=ai[2];return[On.map(Xi),pr.map(io),hr.map(ai)]},untransform:function(ai){var ai=W(ai,3),Xi=ai[0],io=ai[1],ai=ai[2];return[On.invert(Xi),pr.invert(io),hr.invert(ai)]}}}function Ai(oi,ht,Ht,hn,Fn,Bn,yn){var On,pr=(oi=W(oi,3))[0],hr=oi[1],oi=oi[2];return On=tt(),pr=[pr,hr,oi],On[0]=1,On[1]=0,On[2]=0,On[3]=0,On[4]=0,On[5]=1,On[6]=0,On[7]=0,On[8]=0,On[9]=0,On[10]=1,On[11]=0,On[12]=pr[0],On[13]=pr[1],On[14]=pr[2],On[15]=1,On}function ea($e,ht,Ht,hn,Fn,Bn,yn){return{transform:function(pr){var pr=W(pr,3),hr=pr[0];return[pr[1],hr,pr[2]]},untransform:function(pr){var pr=W(pr,3),hr=pr[0];return[pr[1],hr,pr[2]]}}}function _a(oi,ht,Ht,hn,Fn,Bn,yn){var On,pr=(oi=W(oi,3))[0],hr=oi[1],oi=oi[2];return On=tt(),pr=[pr,hr,oi],On[0]=pr[0],On[1]=0,On[2]=0,On[3]=0,On[4]=0,On[5]=pr[1],On[6]=0,On[7]=0,On[8]=0,On[9]=0,On[10]=pr[2],On[11]=0,On[12]=0,On[13]=0,On[14]=0,On[15]=1,On}fi.prototype.update=function($e){this.options=me({},this.options,$e),this.recoordinate()},fi.prototype.clone=function(){return new fi(this.options)},fi.prototype.getOptions=function(){return this.options},fi.prototype.clear=function(){this.update({transformations:[]})},fi.prototype.getSize=function(){var $e=this.options;return[$e.width,$e.height]},fi.prototype.getCenter=function(){var $e=this.options,ht=$e.x,Ht=$e.y;return[(2*ht+$e.width)/2,(2*Ht+$e.height)/2]},fi.prototype.transform=function(){for(var $e=[],ht=0;ht<arguments.length;ht++)$e[ht]=arguments[ht];var Ht=this.options.transformations;return this.update({transformations:E(E([],W(Ht),!1),[E([],W($e),!1)],!1)}),this},fi.prototype.map=function($e){return this.output($e)},fi.prototype.invert=function($e){return this.input($e)},fi.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},fi.prototype.compose=function($e){function ht($i,co){var Mo;On.push((co=co===void 0?!0:co)?(Mo=$i,function(bs){for(var ba=[],ra=0;ra<bs.length-1;ra+=2){var ms=[bs[ra],bs[ra+1]],ms=Mo(ms);ba.push.apply(ba,E([],W(ms),!1))}return ba}):$i)}var Ht,hn,Fn=($e=$e===void 0?!1:$e)?E([],W(this.options.transformations),!1).reverse():this.options.transformations,Bn=$e?function($i){return $i.untransform}:function($i){return $i.transform},yn=[],On=[];try{for(var pr=K(Fn),hr=pr.next();!hr.done;hr=pr.next()){var oi,Xi,io,ai,Yi,ji,Yr=W(hr.value),To=Yr[0],mi=Yr.slice(1),wo=this.transformers[To];wo&&(Xi=(oi=this.options).x,io=oi.y,ai=oi.width,Yi=oi.height,pt(ji=wo(E([],W(mi),!1),Xi,io,ai,Yi))?yn.push(ji):(yn.length&&(ht(this.createMatrixTransform(yn,$e)),yn.splice(0,yn.length)),ht(Bn(ji)||Pe,To!=="parallel")))}}catch($i){Ht={error:$i}}finally{try{hr&&!hr.done&&(hn=pr.return)&&hn.call(pr)}finally{if(Ht)throw Ht.error}}return yn.length&&ht(this.createMatrixTransform(yn,$e)),wt.apply(void 0,E([],W(On),!1))},fi.prototype.createMatrixTransform=function($e,ht){var Ht,hn,Fn,Bn,yn,On,pr,hr,oi,Xi,io,ai,Yi=J();return ht&&$e.reverse(),$e.forEach(function(ji){return Ee(Yi,Yi,ji)}),ht&&(ht=$e=Yi,(ai=new le(9))[0]=ht[0],ai[1]=ht[1],ai[2]=ht[2],ai[3]=ht[3],ai[4]=ht[4],ai[5]=ht[5],ai[6]=ht[6],ai[7]=ht[7],ai[8]=ht[8],ai=(ht=ai)[0],Ht=ht[1],hn=ht[2],Fn=ht[3],Bn=ht[4],yn=ht[5],On=ht[6],pr=ht[7],hr=(ht=ht[8])*Bn-yn*pr,io=ai*hr+Ht*(oi=-ht*Fn+yn*On)+hn*(Xi=pr*Fn-Bn*On))&&($e[0]=hr*(io=1/io),$e[1]=(-ht*Ht+hn*pr)*io,$e[2]=(yn*Ht-hn*Bn)*io,$e[3]=oi*io,$e[4]=(ht*ai-hn*On)*io,$e[5]=(-yn*ai+hn*Fn)*io,$e[6]=Xi*io,$e[7]=(-pr*ai+Ht*On)*io,$e[8]=(Bn*ai-Ht*Fn)*io),function(co){var Yr,To,mi,wo,$i,co=[co[0],co[1],1];return mi=Yi,wo=(To=Yr=co)[0],$i=To[1],To=To[2],Yr[0]=wo*mi[0]+$i*mi[3]+To*mi[6],Yr[1]=wo*mi[1]+$i*mi[4]+To*mi[7],Yr[2]=wo*mi[2]+$i*mi[5]+To*mi[8],[co[0],co[1]]}},Be=fi;function fi($e){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:br,translate:Re,custom:$n,matrix:Oe,polar:we,transpose:Ve,scale:Qn,"shear.x":Gr,"shear.y":mr,reflect:it,"reflect.x":At,"reflect.y":qt,rotate:un,helix:St,parallel:Jt,fisheye:di,"fisheye.x":wr,"fisheye.y":gi,"fisheye.circular":xi},this.update($e)}Ji.prototype.update=function($e){this.options=me({},this.options,$e),this.recoordinate()},Ji.prototype.clone=function(){return new Ji(this.options)},Ji.prototype.getOptions=function(){return this.options},Ji.prototype.clear=function(){this.update({transformations:[]})},Ji.prototype.getSize=function(){var $e=this.options;return[$e.width,$e.height,$e.depth]},Ji.prototype.getCenter=function(){var $e=this.options,ht=$e.x,Ht=$e.y,hn=$e.z;return[(2*ht+$e.width)/2,(2*Ht+$e.height)/2,(2*hn+$e.depth)/2]},Ji.prototype.transform=function(){for(var $e=[],ht=0;ht<arguments.length;ht++)$e[ht]=arguments[ht];var Ht=this.options.transformations;return this.update({transformations:E(E([],W(Ht),!1),[E([],W($e),!1)],!1)}),this},Ji.prototype.map=function($e){return this.output($e)},Ji.prototype.invert=function($e){return this.input($e)},Ji.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},Ji.prototype.compose=function($e){function ht(Mo,bs){var ba;On.push((bs=bs===void 0?!0:bs)?(ba=Mo,function(ra){for(var ms=[],ls=0;ls<ra.length-1;ls+=3){var Ct=[ra[ls],ra[ls+1],ra[ls+2]],Ct=ba(Ct);ms.push.apply(ms,E([],W(Ct),!1))}return ms}):Mo)}var Ht,hn,Fn=($e=$e===void 0?!1:$e)?E([],W(this.options.transformations),!1).reverse():this.options.transformations,Bn=$e?function(Mo){return Mo.untransform}:function(Mo){return Mo.transform},yn=[],On=[];try{for(var pr=K(Fn),hr=pr.next();!hr.done;hr=pr.next()){var oi,Xi,io,ai,Yi,ji,Yr,To,mi=W(hr.value),wo=mi[0],$i=mi.slice(1),co=this.transformers[wo];co&&(Xi=(oi=this.options).x,io=oi.y,ai=oi.z,Yi=oi.width,ji=oi.height,Yr=oi.depth,pt(To=co(E([],W($i),!1),Xi,io,ai,Yi,ji,Yr))?yn.push(To):(yn.length&&(ht(this.createMatrixTransform(yn,$e)),yn.splice(0,yn.length)),ht(Bn(To)||Pe,!0)))}}catch(Mo){Ht={error:Mo}}finally{try{hr&&!hr.done&&(hn=pr.return)&&hn.call(pr)}finally{if(Ht)throw Ht.error}}return yn.length&&ht(this.createMatrixTransform(yn,$e)),wt.apply(void 0,E([],W(On),!1))},Ji.prototype.createMatrixTransform=function($e,ht){var Ht,hn,Fn,Bn,yn,On,pr,hr,oi,Xi,io,ai,Yi,ji,Yr,To,mi,wo,$i,co,Mo,bs,ba,ra,ms,ls,Ct,Wt,jn=tt();return ht&&$e.reverse(),$e.forEach(function(kr){return Je(jn,jn,kr)}),ht&&(ht=$e=jn,(Wt=new le(16))[0]=ht[0],Wt[1]=ht[1],Wt[2]=ht[2],Wt[3]=ht[3],Wt[4]=ht[4],Wt[5]=ht[5],Wt[6]=ht[6],Wt[7]=ht[7],Wt[8]=ht[8],Wt[9]=ht[9],Wt[10]=ht[10],Wt[11]=ht[11],Wt[12]=ht[12],Wt[13]=ht[13],Wt[14]=ht[14],Wt[15]=ht[15],Wt=(ht=Wt)[0],Ht=ht[1],hn=ht[2],Fn=ht[3],Bn=ht[4],yn=ht[5],On=ht[6],pr=ht[7],hr=ht[8],oi=ht[9],Xi=ht[10],io=ht[11],ai=ht[12],Yi=ht[13],ji=ht[14],ht=ht[15],Ct=(Yr=Wt*yn-Ht*Bn)*(ls=Xi*ht-io*ji)-(To=Wt*On-hn*Bn)*(ms=oi*ht-io*Yi)+(mi=Wt*pr-Fn*Bn)*(ra=oi*ji-Xi*Yi)+(wo=Ht*On-hn*yn)*(ba=hr*ht-io*ai)-($i=Ht*pr-Fn*yn)*(bs=hr*ji-Xi*ai)+(co=hn*pr-Fn*On)*(Mo=hr*Yi-oi*ai))&&($e[0]=(yn*ls-On*ms+pr*ra)*(Ct=1/Ct),$e[1]=(hn*ms-Ht*ls-Fn*ra)*Ct,$e[2]=(Yi*co-ji*$i+ht*wo)*Ct,$e[3]=(Xi*$i-oi*co-io*wo)*Ct,$e[4]=(On*ba-Bn*ls-pr*bs)*Ct,$e[5]=(Wt*ls-hn*ba+Fn*bs)*Ct,$e[6]=(ji*mi-ai*co-ht*To)*Ct,$e[7]=(hr*co-Xi*mi+io*To)*Ct,$e[8]=(Bn*ms-yn*ba+pr*Mo)*Ct,$e[9]=(Ht*ba-Wt*ms-Fn*Mo)*Ct,$e[10]=(ai*$i-Yi*mi+ht*Yr)*Ct,$e[11]=(oi*mi-hr*$i-io*Yr)*Ct,$e[12]=(yn*bs-Bn*ra-On*Mo)*Ct,$e[13]=(Wt*ra-Ht*bs+hn*Mo)*Ct,$e[14]=(Yi*To-ai*wo-ji*Yr)*Ct,$e[15]=(hr*wo-oi*To+Xi*Yr)*Ct),function(ll){var Ci,qi,ta,Us,Ls,ks,ll=[ll[0],ll[1],ll[2],1];return ta=jn,Us=(qi=Ci=ll)[0],Ls=qi[1],ks=qi[2],qi=qi[3],Ci[0]=ta[0]*Us+ta[4]*Ls+ta[8]*ks+ta[12]*qi,Ci[1]=ta[1]*Us+ta[5]*Ls+ta[9]*ks+ta[13]*qi,Ci[2]=ta[2]*Us+ta[6]*Ls+ta[10]*ks+ta[14]*qi,Ci[3]=ta[3]*Us+ta[7]*Ls+ta[11]*ks+ta[15]*qi,[ll[0],ll[1],ll[2]]}},Dt=Ji;function Ji($e){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:Fo,translate3D:Ai,scale3D:_a,transpose3D:ea},this.update($e)}L.Coordinate=Be,L.Coordinate3D=Dt,Object.defineProperty(L,"__esModule",{value:!0})})},90857:function(bt){"use strict";var G=Object.prototype.hasOwnProperty,L="~";function K(){}Object.create&&(K.prototype=Object.create(null),new K().__proto__||(L=!1));function W(se,ue,be){this.fn=se,this.context=ue,this.once=be||!1}function E(se,ue,be,oe,Ge){if(typeof be!="function")throw new TypeError("The listener must be a function");var te=new W(be,oe||se,Ge),me=L?L+ue:ue;return se._events[me]?se._events[me].fn?se._events[me]=[se._events[me],te]:se._events[me].push(te):(se._events[me]=te,se._eventsCount++),se}function he(se,ue){--se._eventsCount===0?se._events=new K:delete se._events[ue]}function ee(){this._events=new K,this._eventsCount=0}ee.prototype.eventNames=function(){var ue=[],be,oe;if(this._eventsCount===0)return ue;for(oe in be=this._events)G.call(be,oe)&&ue.push(L?oe.slice(1):oe);return Object.getOwnPropertySymbols?ue.concat(Object.getOwnPropertySymbols(be)):ue},ee.prototype.listeners=function(ue){var be=L?L+ue:ue,oe=this._events[be];if(!oe)return[];if(oe.fn)return[oe.fn];for(var Ge=0,te=oe.length,me=new Array(te);Ge<te;Ge++)me[Ge]=oe[Ge].fn;return me},ee.prototype.listenerCount=function(ue){var be=L?L+ue:ue,oe=this._events[be];return oe?oe.fn?1:oe.length:0},ee.prototype.emit=function(ue,be,oe,Ge,te,me){var Pe=L?L+ue:ue;if(!this._events[Pe])return!1;var $=this._events[Pe],le=arguments.length,J,Ee;if($.fn){switch($.once&&this.removeListener(ue,$.fn,void 0,!0),le){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,be),!0;case 3:return $.fn.call($.context,be,oe),!0;case 4:return $.fn.call($.context,be,oe,Ge),!0;case 5:return $.fn.call($.context,be,oe,Ge,te),!0;case 6:return $.fn.call($.context,be,oe,Ge,te,me),!0}for(Ee=1,J=new Array(le-1);Ee<le;Ee++)J[Ee-1]=arguments[Ee];$.fn.apply($.context,J)}else{var tt=$.length,Je;for(Ee=0;Ee<tt;Ee++)switch($[Ee].once&&this.removeListener(ue,$[Ee].fn,void 0,!0),le){case 1:$[Ee].fn.call($[Ee].context);break;case 2:$[Ee].fn.call($[Ee].context,be);break;case 3:$[Ee].fn.call($[Ee].context,be,oe);break;case 4:$[Ee].fn.call($[Ee].context,be,oe,Ge);break;default:if(!J)for(Je=1,J=new Array(le-1);Je<le;Je++)J[Je-1]=arguments[Je];$[Ee].fn.apply($[Ee].context,J)}}return!0},ee.prototype.on=function(ue,be,oe){return E(this,ue,be,oe,!1)},ee.prototype.once=function(ue,be,oe){return E(this,ue,be,oe,!0)},ee.prototype.removeListener=function(ue,be,oe,Ge){var te=L?L+ue:ue;if(!this._events[te])return this;if(!be)return he(this,te),this;var me=this._events[te];if(me.fn)me.fn===be&&(!Ge||me.once)&&(!oe||me.context===oe)&&he(this,te);else{for(var Pe=0,$=[],le=me.length;Pe<le;Pe++)(me[Pe].fn!==be||Ge&&!me[Pe].once||oe&&me[Pe].context!==oe)&&$.push(me[Pe]);$.length?this._events[te]=$.length===1?$[0]:$:he(this,te)}return this},ee.prototype.removeAllListeners=function(ue){var be;return ue?(be=L?L+ue:ue,this._events[be]&&he(this,be)):(this._events=new K,this._eventsCount=0),this},ee.prototype.off=ee.prototype.removeListener,ee.prototype.addListener=ee.prototype.on,ee.prefixed=L,ee.EventEmitter=ee,bt.exports=ee},38554:function(bt){"use strict";var G=Object.prototype.hasOwnProperty,L="~";function K(){}Object.create&&(K.prototype=Object.create(null),new K().__proto__||(L=!1));function W(se,ue,be){this.fn=se,this.context=ue,this.once=be||!1}function E(se,ue,be,oe,Ge){if(typeof be!="function")throw new TypeError("The listener must be a function");var te=new W(be,oe||se,Ge),me=L?L+ue:ue;return se._events[me]?se._events[me].fn?se._events[me]=[se._events[me],te]:se._events[me].push(te):(se._events[me]=te,se._eventsCount++),se}function he(se,ue){--se._eventsCount===0?se._events=new K:delete se._events[ue]}function ee(){this._events=new K,this._eventsCount=0}ee.prototype.eventNames=function(){var ue=[],be,oe;if(this._eventsCount===0)return ue;for(oe in be=this._events)G.call(be,oe)&&ue.push(L?oe.slice(1):oe);return Object.getOwnPropertySymbols?ue.concat(Object.getOwnPropertySymbols(be)):ue},ee.prototype.listeners=function(ue){var be=L?L+ue:ue,oe=this._events[be];if(!oe)return[];if(oe.fn)return[oe.fn];for(var Ge=0,te=oe.length,me=new Array(te);Ge<te;Ge++)me[Ge]=oe[Ge].fn;return me},ee.prototype.listenerCount=function(ue){var be=L?L+ue:ue,oe=this._events[be];return oe?oe.fn?1:oe.length:0},ee.prototype.emit=function(ue,be,oe,Ge,te,me){var Pe=L?L+ue:ue;if(!this._events[Pe])return!1;var $=this._events[Pe],le=arguments.length,J,Ee;if($.fn){switch($.once&&this.removeListener(ue,$.fn,void 0,!0),le){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,be),!0;case 3:return $.fn.call($.context,be,oe),!0;case 4:return $.fn.call($.context,be,oe,Ge),!0;case 5:return $.fn.call($.context,be,oe,Ge,te),!0;case 6:return $.fn.call($.context,be,oe,Ge,te,me),!0}for(Ee=1,J=new Array(le-1);Ee<le;Ee++)J[Ee-1]=arguments[Ee];$.fn.apply($.context,J)}else{var tt=$.length,Je;for(Ee=0;Ee<tt;Ee++)switch($[Ee].once&&this.removeListener(ue,$[Ee].fn,void 0,!0),le){case 1:$[Ee].fn.call($[Ee].context);break;case 2:$[Ee].fn.call($[Ee].context,be);break;case 3:$[Ee].fn.call($[Ee].context,be,oe);break;case 4:$[Ee].fn.call($[Ee].context,be,oe,Ge);break;default:if(!J)for(Je=1,J=new Array(le-1);Je<le;Je++)J[Je-1]=arguments[Je];$[Ee].fn.apply($[Ee].context,J)}}return!0},ee.prototype.on=function(ue,be,oe){return E(this,ue,be,oe,!1)},ee.prototype.once=function(ue,be,oe){return E(this,ue,be,oe,!0)},ee.prototype.removeListener=function(ue,be,oe,Ge){var te=L?L+ue:ue;if(!this._events[te])return this;if(!be)return he(this,te),this;var me=this._events[te];if(me.fn)me.fn===be&&(!Ge||me.once)&&(!oe||me.context===oe)&&he(this,te);else{for(var Pe=0,$=[],le=me.length;Pe<le;Pe++)(me[Pe].fn!==be||Ge&&!me[Pe].once||oe&&me[Pe].context!==oe)&&$.push(me[Pe]);$.length?this._events[te]=$.length===1?$[0]:$:he(this,te)}return this},ee.prototype.removeAllListeners=function(ue){var be;return ue?(be=L?L+ue:ue,this._events[be]&&he(this,be)):(this._events=new K,this._eventsCount=0),this},ee.prototype.off=ee.prototype.removeListener,ee.prototype.addListener=ee.prototype.on,ee.prefixed=L,ee.EventEmitter=ee,bt.exports=ee},4157:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(bt){try{let oe=function(){ee||(ee=!0,E())},Ge=function(){try{he.documentElement.doScroll("left")}catch(te){return void setTimeout(Ge,50)}oe()};var ue=oe,be=Ge,L=(L=document.getElementsByTagName("script"))[L.length-1],G=L.getAttribute("data-injectcss"),L=L.getAttribute("data-disable-injectsvg");if(!L){var K,W,E,he,ee,se=function(te,me){me.parentNode.insertBefore(te,me)};if(G&&!bt.__iconfont__svg__cssinject__){bt.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(te){console&&console.log(te)}}K=function(){var te,me=document.createElement("div");me.innerHTML=bt._iconfont_svg_string_3580659,(me=me.getElementsByTagName("svg")[0])&&(me.setAttribute("aria-hidden","true"),me.style.position="absolute",me.style.width=0,me.style.height=0,me.style.overflow="hidden",me=me,(te=document.body).firstChild?se(me,te.firstChild):te.appendChild(me))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(K,0):(W=function(){document.removeEventListener("DOMContentLoaded",W,!1),K()},document.addEventListener("DOMContentLoaded",W,!1)):document.attachEvent&&(E=K,he=bt.document,ee=!1,Ge(),he.onreadystatechange=function(){he.readyState=="complete"&&(he.onreadystatechange=null,oe())})}}catch(oe){}}(window)},88120:function(bt,G,L){"use strict";L.d(G,{GC:function(){return U},h0:function(){return on},lv:function(){return sr},lo:function(){return Ft},kw:function(){return Kt},Or:function(){return fn},KD:function(){return ze},I9:function(){return fe},lE:function(){return zt},d:function(){return nr},n3:function(){return Se},vY:function(){return rt},P7:function(){return xc},yn:function(){return Pt},ee:function(){return jt},v2:function(){return On},e7:function(){return Au},Hp:function(){return kc},gl:function(){return ee},cO:function(){return gh},Vb:function(){return le}});var K=L(1413),W=L(4942),E=L(66366);let he=function(ie){return ie.Normal="normal",ie.PostProcessing="post-processing",ie}({}),ee=function(ie){return ie[ie.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",ie[ie.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",ie[ie.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",ie[ie.POINTS=0]="POINTS",ie[ie.LINES=1]="LINES",ie[ie.LINE_LOOP=2]="LINE_LOOP",ie[ie.LINE_STRIP=3]="LINE_STRIP",ie[ie.TRIANGLES=4]="TRIANGLES",ie[ie.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",ie[ie.TRIANGLE_FAN=6]="TRIANGLE_FAN",ie[ie.ZERO=0]="ZERO",ie[ie.ONE=1]="ONE",ie[ie.SRC_COLOR=768]="SRC_COLOR",ie[ie.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",ie[ie.SRC_ALPHA=770]="SRC_ALPHA",ie[ie.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",ie[ie.DST_ALPHA=772]="DST_ALPHA",ie[ie.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",ie[ie.DST_COLOR=774]="DST_COLOR",ie[ie.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",ie[ie.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",ie[ie.FUNC_ADD=32774]="FUNC_ADD",ie[ie.BLEND_EQUATION=32777]="BLEND_EQUATION",ie[ie.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",ie[ie.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",ie[ie.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",ie[ie.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",ie[ie.MAX_EXT=32776]="MAX_EXT",ie[ie.MIN_EXT=32775]="MIN_EXT",ie[ie.BLEND_DST_RGB=32968]="BLEND_DST_RGB",ie[ie.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",ie[ie.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",ie[ie.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",ie[ie.CONSTANT_COLOR=32769]="CONSTANT_COLOR",ie[ie.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",ie[ie.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",ie[ie.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",ie[ie.BLEND_COLOR=32773]="BLEND_COLOR",ie[ie.ARRAY_BUFFER=34962]="ARRAY_BUFFER",ie[ie.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",ie[ie.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",ie[ie.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",ie[ie.STREAM_DRAW=35040]="STREAM_DRAW",ie[ie.STATIC_DRAW=35044]="STATIC_DRAW",ie[ie.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",ie[ie.BUFFER_SIZE=34660]="BUFFER_SIZE",ie[ie.BUFFER_USAGE=34661]="BUFFER_USAGE",ie[ie.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",ie[ie.FRONT=1028]="FRONT",ie[ie.BACK=1029]="BACK",ie[ie.FRONT_AND_BACK=1032]="FRONT_AND_BACK",ie[ie.CULL_FACE=2884]="CULL_FACE",ie[ie.BLEND=3042]="BLEND",ie[ie.DITHER=3024]="DITHER",ie[ie.STENCIL_TEST=2960]="STENCIL_TEST",ie[ie.DEPTH_TEST=2929]="DEPTH_TEST",ie[ie.SCISSOR_TEST=3089]="SCISSOR_TEST",ie[ie.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",ie[ie.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",ie[ie.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",ie[ie.NO_ERROR=0]="NO_ERROR",ie[ie.INVALID_ENUM=1280]="INVALID_ENUM",ie[ie.INVALID_VALUE=1281]="INVALID_VALUE",ie[ie.INVALID_OPERATION=1282]="INVALID_OPERATION",ie[ie.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",ie[ie.CW=2304]="CW",ie[ie.CCW=2305]="CCW",ie[ie.LINE_WIDTH=2849]="LINE_WIDTH",ie[ie.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",ie[ie.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",ie[ie.CULL_FACE_MODE=2885]="CULL_FACE_MODE",ie[ie.FRONT_FACE=2886]="FRONT_FACE",ie[ie.DEPTH_RANGE=2928]="DEPTH_RANGE",ie[ie.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",ie[ie.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",ie[ie.DEPTH_FUNC=2932]="DEPTH_FUNC",ie[ie.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",ie[ie.STENCIL_FUNC=2962]="STENCIL_FUNC",ie[ie.STENCIL_FAIL=2964]="STENCIL_FAIL",ie[ie.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",ie[ie.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",ie[ie.STENCIL_REF=2967]="STENCIL_REF",ie[ie.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",ie[ie.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",ie[ie.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",ie[ie.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",ie[ie.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",ie[ie.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",ie[ie.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",ie[ie.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",ie[ie.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",ie[ie.VIEWPORT=2978]="VIEWPORT",ie[ie.SCISSOR_BOX=3088]="SCISSOR_BOX",ie[ie.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",ie[ie.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",ie[ie.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",ie[ie.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",ie[ie.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",ie[ie.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",ie[ie.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",ie[ie.RED_BITS=3410]="RED_BITS",ie[ie.GREEN_BITS=3411]="GREEN_BITS",ie[ie.BLUE_BITS=3412]="BLUE_BITS",ie[ie.ALPHA_BITS=3413]="ALPHA_BITS",ie[ie.DEPTH_BITS=3414]="DEPTH_BITS",ie[ie.STENCIL_BITS=3415]="STENCIL_BITS",ie[ie.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",ie[ie.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",ie[ie.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",ie[ie.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",ie[ie.SAMPLES=32937]="SAMPLES",ie[ie.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",ie[ie.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",ie[ie.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",ie[ie.DONT_CARE=4352]="DONT_CARE",ie[ie.FASTEST=4353]="FASTEST",ie[ie.NICEST=4354]="NICEST",ie[ie.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",ie[ie.BYTE=5120]="BYTE",ie[ie.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",ie[ie.SHORT=5122]="SHORT",ie[ie.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",ie[ie.INT=5124]="INT",ie[ie.UNSIGNED_INT=5125]="UNSIGNED_INT",ie[ie.FLOAT=5126]="FLOAT",ie[ie.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",ie[ie.ALPHA=6406]="ALPHA",ie[ie.RGB=6407]="RGB",ie[ie.RGBA=6408]="RGBA",ie[ie.LUMINANCE=6409]="LUMINANCE",ie[ie.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",ie[ie.RED=6403]="RED",ie[ie.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",ie[ie.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",ie[ie.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",ie[ie.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",ie[ie.VERTEX_SHADER=35633]="VERTEX_SHADER",ie[ie.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",ie[ie.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",ie[ie.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",ie[ie.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",ie[ie.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",ie[ie.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",ie[ie.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",ie[ie.SHADER_TYPE=35663]="SHADER_TYPE",ie[ie.DELETE_STATUS=35712]="DELETE_STATUS",ie[ie.LINK_STATUS=35714]="LINK_STATUS",ie[ie.VALIDATE_STATUS=35715]="VALIDATE_STATUS",ie[ie.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",ie[ie.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",ie[ie.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",ie[ie.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",ie[ie.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",ie[ie.NEVER=512]="NEVER",ie[ie.LESS=513]="LESS",ie[ie.EQUAL=514]="EQUAL",ie[ie.LEQUAL=515]="LEQUAL",ie[ie.GREATER=516]="GREATER",ie[ie.NOTEQUAL=517]="NOTEQUAL",ie[ie.GEQUAL=518]="GEQUAL",ie[ie.ALWAYS=519]="ALWAYS",ie[ie.KEEP=7680]="KEEP",ie[ie.REPLACE=7681]="REPLACE",ie[ie.INCR=7682]="INCR",ie[ie.DECR=7683]="DECR",ie[ie.INVERT=5386]="INVERT",ie[ie.INCR_WRAP=34055]="INCR_WRAP",ie[ie.DECR_WRAP=34056]="DECR_WRAP",ie[ie.VENDOR=7936]="VENDOR",ie[ie.RENDERER=7937]="RENDERER",ie[ie.VERSION=7938]="VERSION",ie[ie.NEAREST=9728]="NEAREST",ie[ie.LINEAR=9729]="LINEAR",ie[ie.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",ie[ie.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",ie[ie.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",ie[ie.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",ie[ie.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",ie[ie.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",ie[ie.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",ie[ie.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",ie[ie.TEXTURE_2D=3553]="TEXTURE_2D",ie[ie.TEXTURE=5890]="TEXTURE",ie[ie.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",ie[ie.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",ie[ie.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",ie[ie.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",ie[ie.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",ie[ie.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",ie[ie.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",ie[ie.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",ie[ie.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",ie[ie.TEXTURE0=33984]="TEXTURE0",ie[ie.TEXTURE1=33985]="TEXTURE1",ie[ie.TEXTURE2=33986]="TEXTURE2",ie[ie.TEXTURE3=33987]="TEXTURE3",ie[ie.TEXTURE4=33988]="TEXTURE4",ie[ie.TEXTURE5=33989]="TEXTURE5",ie[ie.TEXTURE6=33990]="TEXTURE6",ie[ie.TEXTURE7=33991]="TEXTURE7",ie[ie.TEXTURE8=33992]="TEXTURE8",ie[ie.TEXTURE9=33993]="TEXTURE9",ie[ie.TEXTURE10=33994]="TEXTURE10",ie[ie.TEXTURE11=33995]="TEXTURE11",ie[ie.TEXTURE12=33996]="TEXTURE12",ie[ie.TEXTURE13=33997]="TEXTURE13",ie[ie.TEXTURE14=33998]="TEXTURE14",ie[ie.TEXTURE15=33999]="TEXTURE15",ie[ie.TEXTURE16=34e3]="TEXTURE16",ie[ie.TEXTURE17=34001]="TEXTURE17",ie[ie.TEXTURE18=34002]="TEXTURE18",ie[ie.TEXTURE19=34003]="TEXTURE19",ie[ie.TEXTURE20=34004]="TEXTURE20",ie[ie.TEXTURE21=34005]="TEXTURE21",ie[ie.TEXTURE22=34006]="TEXTURE22",ie[ie.TEXTURE23=34007]="TEXTURE23",ie[ie.TEXTURE24=34008]="TEXTURE24",ie[ie.TEXTURE25=34009]="TEXTURE25",ie[ie.TEXTURE26=34010]="TEXTURE26",ie[ie.TEXTURE27=34011]="TEXTURE27",ie[ie.TEXTURE28=34012]="TEXTURE28",ie[ie.TEXTURE29=34013]="TEXTURE29",ie[ie.TEXTURE30=34014]="TEXTURE30",ie[ie.TEXTURE31=34015]="TEXTURE31",ie[ie.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",ie[ie.REPEAT=10497]="REPEAT",ie[ie.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",ie[ie.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",ie[ie.FLOAT_VEC2=35664]="FLOAT_VEC2",ie[ie.FLOAT_VEC3=35665]="FLOAT_VEC3",ie[ie.FLOAT_VEC4=35666]="FLOAT_VEC4",ie[ie.INT_VEC2=35667]="INT_VEC2",ie[ie.INT_VEC3=35668]="INT_VEC3",ie[ie.INT_VEC4=35669]="INT_VEC4",ie[ie.BOOL=35670]="BOOL",ie[ie.BOOL_VEC2=35671]="BOOL_VEC2",ie[ie.BOOL_VEC3=35672]="BOOL_VEC3",ie[ie.BOOL_VEC4=35673]="BOOL_VEC4",ie[ie.FLOAT_MAT2=35674]="FLOAT_MAT2",ie[ie.FLOAT_MAT3=35675]="FLOAT_MAT3",ie[ie.FLOAT_MAT4=35676]="FLOAT_MAT4",ie[ie.SAMPLER_2D=35678]="SAMPLER_2D",ie[ie.SAMPLER_CUBE=35680]="SAMPLER_CUBE",ie[ie.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",ie[ie.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",ie[ie.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",ie[ie.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",ie[ie.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",ie[ie.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",ie[ie.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",ie[ie.COMPILE_STATUS=35713]="COMPILE_STATUS",ie[ie.LOW_FLOAT=36336]="LOW_FLOAT",ie[ie.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",ie[ie.HIGH_FLOAT=36338]="HIGH_FLOAT",ie[ie.LOW_INT=36339]="LOW_INT",ie[ie.MEDIUM_INT=36340]="MEDIUM_INT",ie[ie.HIGH_INT=36341]="HIGH_INT",ie[ie.FRAMEBUFFER=36160]="FRAMEBUFFER",ie[ie.RENDERBUFFER=36161]="RENDERBUFFER",ie[ie.RGBA4=32854]="RGBA4",ie[ie.RGB5_A1=32855]="RGB5_A1",ie[ie.RGB565=36194]="RGB565",ie[ie.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",ie[ie.STENCIL_INDEX=6401]="STENCIL_INDEX",ie[ie.STENCIL_INDEX8=36168]="STENCIL_INDEX8",ie[ie.DEPTH_STENCIL=34041]="DEPTH_STENCIL",ie[ie.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",ie[ie.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",ie[ie.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",ie[ie.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",ie[ie.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",ie[ie.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",ie[ie.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",ie[ie.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",ie[ie.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",ie[ie.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",ie[ie.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",ie[ie.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",ie[ie.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",ie[ie.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",ie[ie.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",ie[ie.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",ie[ie.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",ie[ie.NONE=0]="NONE",ie[ie.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",ie[ie.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",ie[ie.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",ie[ie.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",ie[ie.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",ie[ie.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",ie[ie.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",ie[ie.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",ie[ie.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",ie[ie.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",ie[ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",ie[ie.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",ie[ie.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",ie[ie.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",ie}({});const se=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{camelCase:ue,isNil:be,upperFirst:oe}=E.lodashUtil;class Ge{constructor(){(0,W.Z)(this,"shaderModuleService",void 0),(0,W.Z)(this,"rendererService",void 0),(0,W.Z)(this,"config",void 0),(0,W.Z)(this,"quad",se),(0,W.Z)(this,"enabled",!0),(0,W.Z)(this,"renderToScreen",!1),(0,W.Z)(this,"model",void 0),(0,W.Z)(this,"name",void 0),(0,W.Z)(this,"optionsToUpdate",{})}getName(){return this.name}setName(ve){this.name=ve}getType(){return he.PostProcessing}init(ve,et){this.config=et,this.rendererService=ve.getContainer().rendererService,this.shaderModuleService=ve.getContainer().shaderModuleService;const{createAttribute:an,createBuffer:cn,createModel:tr}=this.rendererService,{vs:Or,fs:Wr,uniforms:Fi}=this.setupShaders();this.model=tr({vs:Or,fs:Wr,attributes:{a_Position:an({buffer:cn({data:[-4,-4,4,-4,0,4],type:ee.FLOAT}),size:2})},uniforms:(0,K.Z)((0,K.Z)({u_Texture:null},Fi),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}render(ve,et){const an=ve.multiPassRenderer.getPostProcessor(),{useFramebuffer:cn,getViewportSize:tr,clear:Or}=this.rendererService,{width:Wr,height:Fi}=tr();cn(this.renderToScreen?null:an.getWriteFBO(),()=>{Or({framebuffer:an.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});const xo=(0,K.Z)({u_BloomFinal:0,u_Texture:an.getReadFBO(),u_ViewportSize:[Wr,Fi]},this.convertOptionsToUniforms(this.optionsToUpdate));et&&(xo.u_BloomFinal=1,xo.u_Texture2=et),this.model.draw({uniforms:xo})})}isEnabled(){return this.enabled}setEnabled(ve){this.enabled=ve}setRenderToScreen(ve){this.renderToScreen=ve}updateOptions(ve){this.optionsToUpdate=(0,K.Z)((0,K.Z)({},this.optionsToUpdate),ve)}setupShaders(){throw new Error("Method not implemented.")}convertOptionsToUniforms(ve){const et={};return Object.keys(ve).forEach(an=>{be(ve[an])||(et[`u_${oe(ue(an))}`]=ve[an])}),et}}function te(ie){let ve=0;switch(ie){case"vec2":case"ivec2":ve=2;break;case"vec3":case"ivec3":ve=3;break;case"vec4":case"ivec4":case"mat2":ve=4;break;case"mat3":ve=9;break;case"mat4":ve=16;break;default:}return ve}const me=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Pe(ie,ve=!1){const et={};return ie=ie.replace(me,(an,cn,tr)=>{const Or=tr.split(":"),Wr=Or[0].trim();let Fi="";switch(Or.length>1&&(Fi=Or[1].trim()),cn){case"bool":Fi=Fi==="true";break;case"float":case"int":Fi=Number(Fi);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":Fi?Fi=Fi.replace("[","").replace("]","").split(",").reduce((xo,_o)=>(xo.push(Number(_o.trim())),xo),[]):Fi=new Array(te(cn)).fill(0);break;default:}return et[Wr]=Fi,`${ve?"uniform ":""}${cn} ${Wr};
`}),{content:ie,uniforms:et}}function $(ie){let{content:ve,uniforms:et}=Pe(ie,!0);return ve=ve.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(an,cn,tr)=>{tr=tr.trim().replace(/^.*$/gm,Fi=>`uniform ${Fi}`);const{content:Or,uniforms:Wr}=Pe(tr);return Object.assign(et,Wr),`${cn}{
${Or}
};`}),{content:ve,uniforms:et}}function le(ie){const ve={};return ie.replace(me,(et,an,cn)=>{const tr=cn.trim();return ve[tr]?"":(ve[tr]=!0,`uniform ${an} ${tr};
`)})}const J=null;function Ee(ie){return J.indexOf(ie)}const{clamp:tt}=E.lodashUtil,Je=2,wt=4,pt=64,yt=128,Re=256,Ce=512,Ue=8192,We=16384,lt=32768,tn=null,Le=131072,_t=262144,Me=524288,nt=1048576,qe=2097152,Ye=4194304,Lt=8388608,xt=16777216,Ie=null;function Gt(ie,ve){return ie=tt(Math.floor(ie),0,255),ve=tt(Math.floor(ve),0,255),256*ie+ve}function gn(ie){const{color:ve,radius:et,tileX:an,tileY:cn,shape:tr,opacity:Or,stroke:Wr,strokeWidth:Fi,strokeOpacity:xo}=ie,_o=[],La=[],Na=[],Ta=[Gt(ve[0],ve[1]),Gt(ve[2],ve[3])],Ca=[Gt(Wr[0],Wr[1]),Gt(Wr[2],Wr[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(([xa,Fa])=>{_o.push([...Ta,(xa+1)*Lt+(Fa+1)*qe+getShapeIndex(tr)*Le+et,(an+512)*Me+(cn+512)*pt]),La.push([...Ca,Fi,xo]),Na.push([Or,0,0,0])}),{packedBuffer:_o,packedBuffer2:La,packedBuffer3:Na}}function Tn(ie,ve){if(ie===0&&!ve)return 0;if(ie===1&&ve)return 4294967295;const et=ve?1:0,an=Math.floor(ie*127);return an*Ie+et*xt+an*Le+et*tn+an*Ce+et*Re+an*Je+et}const sr={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};let nr=function(ie){return ie.TOPRIGHT="topright",ie.TOPLEFT="topleft",ie.BOTTOMRIGHT="bottomright",ie.BOTTOMLEFT="bottomleft",ie.TOPCENTER="topcenter",ie.BOTTOMCENTER="bottomcenter",ie.LEFTCENTER="leftcenter",ie.RIGHTCENTER="rightcenter",ie.LEFTTOP="lefttop",ie.RIGHTTOP="righttop",ie.LEFTBOTTOM="leftbottom",ie.RIGHTBOTTOM="rightbottom",ie}({}),Ft=function(ie){return ie[ie.LNGLAT=1]="LNGLAT",ie[ie.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",ie[ie.VECTOR_TILE=3]="VECTOR_TILE",ie[ie.IDENTITY=4]="IDENTITY",ie[ie.P20=5]="P20",ie[ie.P20_OFFSET=6]="P20_OFFSET",ie[ie.METER_OFFSET=7]="METER_OFFSET",ie[ie.P20_2=8]="P20_2",ie}({});const Kt={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"};var fn={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};let Gn=function(ie){return ie.Hover="hover",ie.Click="click",ie.Select="select",ie.Active="active",ie.Drag="drag",ie}({}),on=function(ie){return ie.normal="normal",ie.additive="additive",ie.subtractive="subtractive",ie.min="min",ie.max="max",ie.none="none",ie}({}),Pt=function(ie){return ie.MULTIPLE="MULTIPLE",ie.SINGLE="SINGLE",ie}({}),zt=function(ie){return ie.AND="and",ie.OR="or",ie}({}),ze=function(ie){return ie.INIT="init",ie.UPDATE="update",ie}({}),rt=function(ie){return ie.LINEAR="linear",ie.SEQUENTIAL="sequential",ie.POWER="power",ie.LOG="log",ie.IDENTITY="identity",ie.TIME="time",ie.QUANTILE="quantile",ie.QUANTIZE="quantize",ie.THRESHOLD="threshold",ie.CAT="cat",ie.DIVERGING="diverging",ie.CUSTOM="threshold",ie}({}),jt=function(ie){return ie.CONSTANT="constant",ie.VARIABLE="variable",ie}({}),U=function(ie){return ie[ie.Attribute=0]="Attribute",ie[ie.InstancedAttribute=1]="InstancedAttribute",ie[ie.Uniform=2]="Uniform",ie}({});const fe=["mapload","mapchange","mapAfterFrameChange"];var at=L(49296),de=L.n(at),$t=L(26729),sn=L.n($t);const pn=30;function Nn({characterSet:ie,getFontWidth:ve,fontHeight:et,buffer:an,maxCanvasWidth:cn,mapping:tr={},xOffset:Or=0,yOffset:Wr=0}){let Fi=0,xo=Or;Array.from(ie).forEach((La,Na)=>{if(!tr[La]){const Ta=ve(La,Na);xo+pn>cn&&(xo=0,Fi++),tr[La]={x:xo,y:Wr+Fi*pn,width:pn,height:pn,advance:Ta},xo+=pn}});const _o=et+an*2;return{mapping:tr,xOffset:xo,yOffset:Wr+Fi*_o,canvasHeight:dn(Wr+(Fi+1)*_o)}}function Wn(ie,ve,et){let an=0,cn=0,tr=0,Or=[];const Wr={};for(const xo of ie)if(!Wr[xo.id]){const{size:_o}=xo;an+_o+ve>et&&(qn(Wr,Or,cn),an=0,cn=tr+cn+ve,tr=0,Or=[]),Or.push({icon:xo,xOffset:an}),an=an+_o+ve,tr=Math.max(tr,_o)}Or.length>0&&qn(Wr,Or,cn);const Fi=dn(tr+cn+ve);return{mapping:Wr,canvasHeight:Fi}}function qn(ie,ve,et){for(const an of ve){const{icon:cn,xOffset:tr}=an;ie[cn.id]=(0,K.Z)((0,K.Z)({},cn),{},{x:tr,y:et,image:cn.image,width:cn.width,height:cn.height})}}function dn(ie){return Math.pow(2,Math.ceil(Math.log2(ie)))}const vt=er(),It="sans-serif",An="normal",Dn=24,Yn=3,dt=.25,xe=8,Be=1024,st=1,Dt=1,Ot=3,Sn=null;function er(){const ie=[];for(let ve=32;ve<128;ve++)ie.push(String.fromCharCode(ve));return ie}function br(ie,ve,et,an){ie.font=`${an} ${et}px ${ve}`,ie.fillStyle="black",ie.textBaseline="middle"}function $n(ie,ve){for(let et=0;et<ie.length;et++)ve.data[4*et+3]=ie[et]}class Oe extends $t.EventEmitter{constructor(...ve){super(...ve),(0,W.Z)(this,"fontAtlas",void 0),(0,W.Z)(this,"iconFontMap",void 0),(0,W.Z)(this,"iconFontGlyphs",{}),(0,W.Z)(this,"fontOptions",void 0),(0,W.Z)(this,"key",void 0),(0,W.Z)(this,"cache",new E.z6(Ot))}get scale(){return Dt}get canvas(){const ve=this.cache.get(this.key);return ve&&ve.data}get mapping(){const ve=this.cache.get(this.key);return ve&&ve.mapping||{}}getCanvasByKey(ve){const et=this.cache.get(ve);return et&&et.data}getMappingByKey(ve){const et=this.cache.get(ve);return et&&et.mapping||{}}init(){this.cache.clear(),this.fontOptions={fontFamily:It,fontWeight:An,characterSet:vt,fontSize:Dn,buffer:Yn,sdf:!0,cutoff:dt,radius:xe,iconfont:!1},this.key="",this.iconFontMap=new Map}addIconGlyphs(ve){ve.forEach(et=>{this.iconFontGlyphs[et.name]=et.unicode})}addIconFont(ve,et){this.iconFontMap.set(ve,et)}getIconFontKey(ve){return this.iconFontMap.get(ve)||ve}getGlyph(ve){return this.iconFontGlyphs[ve]?String.fromCharCode(parseInt(this.iconFontGlyphs[ve],16)):""}setFontOptions(ve){this.fontOptions=(0,K.Z)((0,K.Z)({},this.fontOptions),ve),this.key=this.getKey();const et=this.getNewChars(this.key,this.fontOptions.characterSet),an=this.cache.get(this.key);if(an&&et.length===0)return;const cn=this.generateFontAtlas(this.key,et,an);this.fontAtlas=cn,this.cache.set(this.key,cn)}addFontFace(ve,et){const an=document.createElement("style");an.type="text/css",an.innerText=`
        @font-face{
            font-family: '${ve}';
            src: url('${et}') format('woff2'),
            url('${et}') format('woff'),
            url('${et}') format('truetype');
        }`,an.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${ve}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:ve})})}catch(cn){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(cn)}},document.getElementsByTagName("head")[0].appendChild(an)}destroy(){this.cache.clear(),this.iconFontMap.clear()}generateFontAtlas(ve,et,an){const{fontFamily:cn,fontWeight:tr,fontSize:Or,buffer:Wr,sdf:Fi,radius:xo,cutoff:_o,iconfont:La}=this.fontOptions;let Na=an&&an.data;Na||(Na=window.document.createElement("canvas"),Na.width=Be);const Ta=Na.getContext("2d",{willReadFrequently:!0});br(Ta,cn,Or,tr);const{mapping:Ca,canvasHeight:xa,xOffset:Fa,yOffset:Oa}=Nn((0,K.Z)({getFontWidth:Sa=>Ta.measureText(Sa).width,fontHeight:Or*Dt,buffer:Wr,characterSet:et,maxCanvasWidth:Be},an&&{mapping:an.mapping,xOffset:an.xOffset,yOffset:an.yOffset})),Za=Ta.getImageData(0,0,Na.width,Na.height);if(Na.height=xa,Ta.putImageData(Za,0,0),br(Ta,cn,Or,tr),Fi){const Sa=new(de())(Or,Wr,xo,_o,cn,tr),ps=Ta.getImageData(0,0,Sa.size,Sa.size);for(const Ws of et){if(La){const $s=String.fromCharCode(parseInt(Ws.replace("&#x","").replace(";",""),16)),Ec=Sa.draw($s);$n(Ec,ps)}else $n(Sa.draw(Ws),ps);Ta.putImageData(ps,Ca[Ws].x,Ca[Ws].y)}}else for(const Sa of et)Ta.fillText(Sa,Ca[Sa].x,Ca[Sa].y+Or*st);return{xOffset:Fa,yOffset:Oa,mapping:Ca,data:Na,width:Na.width,height:Na.height}}getKey(){const{fontFamily:ve,fontWeight:et}=this.fontOptions;return`${ve}_${et}`}getNewChars(ve,et){const an=this.cache.get(ve);if(!an)return et;const cn=[],tr=an.mapping,Or=new Set(Object.keys(tr));return new Set(et).forEach(Fi=>{Or.has(Fi)||cn.push(Fi)}),cn}}var we=L(15861);const Ve=3,it=1024,At=64;class qt extends $t.EventEmitter{constructor(...ve){super(...ve),(0,W.Z)(this,"canvasHeight",128),(0,W.Z)(this,"texture",void 0),(0,W.Z)(this,"canvas",void 0),(0,W.Z)(this,"iconData",void 0),(0,W.Z)(this,"iconMap",void 0),(0,W.Z)(this,"ctx",void 0),(0,W.Z)(this,"loadingImageCount",0)}isLoading(){return this.loadingImageCount===0}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}addImage(ve,et){var an=this;return(0,we.Z)(function*(){let cn=new Image;an.loadingImageCount++,an.hasImage(ve)?console.warn("Image Id already exists"):an.iconData.push({id:ve,size:At}),an.updateIconMap(),cn=yield an.loadImage(et);const tr=an.iconData.find(Or=>Or.id===ve);tr&&(tr.image=cn,tr.width=cn.width,tr.height=cn.height),an.update()})()}addImageMini(ve,et,an){const cn=an.getSceneConfig().canvas;let tr=cn.createImage();if(this.loadingImageCount++,this.hasImage(ve))throw new Error("Image Id already exists");this.iconData.push({id:ve,size:At}),this.updateIconMap(),this.loadImageMini(et,cn).then(Or=>{tr=Or;const Wr=this.iconData.find(Fi=>Fi.id===ve);Wr&&(Wr.image=tr,Wr.width=tr.width,Wr.height=tr.height),this.update()})}getTexture(){return this.texture}getIconMap(){return this.iconMap}getCanvas(){return this.canvas}hasImage(ve){return this.iconMap.hasOwnProperty(ve)}removeImage(ve){this.hasImage(ve)&&(this.iconData=this.iconData.filter(et=>et.id!==ve),delete this.iconMap[ve],this.update())}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}loadImage(ve){return new Promise((et,an)=>{if(ve instanceof HTMLImageElement){et(ve);return}const cn=new Image;cn.crossOrigin="anonymous",cn.onload=()=>{et(cn)},cn.onerror=()=>{an(new Error("Could not load image at "+ve))},cn.src=ve instanceof File?URL.createObjectURL(ve):ve})}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}updateIconAtlas(){this.canvas.width=it,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(ve=>{const{x:et,y:an,image:cn,width:tr=64,height:Or=64}=this.iconMap[ve],Fi=Math.max(tr,Or)/At,xo=Or/Fi,_o=tr/Fi;cn&&this.ctx.drawImage(cn,et+(At-_o)/2,an+(At-xo)/2,_o,xo)})}updateIconMap(){const{mapping:ve,canvasHeight:et}=Wn(this.iconData,Ve,it);this.iconMap=ve,this.canvasHeight=et}loadImageMini(ve,et){return new Promise((an,cn)=>{const tr=et.createImage();tr.crossOrigin="anonymous",tr.onload=()=>{an(tr)},tr.onerror=()=>{cn(new Error("Could not load image at "+ve))},tr.src=ve})}}var un=L(85975);class St{constructor(){(0,W.Z)(this,"viewport",void 0),(0,W.Z)(this,"overridedViewProjectionMatrix",void 0),(0,W.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,W.Z)(this,"jitteredProjectionMatrix",void 0),(0,W.Z)(this,"viewMatrixInverse",void 0),(0,W.Z)(this,"cameraPosition",void 0)}init(){}update(ve){this.viewport=ve,this.viewMatrixInverse=un.create(),un.invert(this.viewMatrixInverse,ve.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}getProjectionMatrix(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}getModelMatrix(){return this.viewport.getModelMatrix()}getViewMatrix(){return this.viewport.getViewMatrix()}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered()}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}getZoom(){return this.viewport.getZoom()}getZoomScale(){return this.viewport.getZoomScale()}getCenter(){const[ve,et]=this.viewport.getCenter();return[ve,et]}getFocalDistance(){return this.viewport.getFocalDistance()}getCameraPosition(){return this.cameraPosition}projectFlat(ve,et){return this.viewport.projectFlat(ve,et)}setViewProjectionMatrix(ve){this.overridedViewProjectionMatrix=ve}jitterProjectionMatrix(ve,et){const an=un.fromTranslation(un.create(),[ve,et,0]);this.jitteredProjectionMatrix=un.multiply(un.create(),an,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=un.multiply(un.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}clearJitterProjectionMatrix(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}const Jt={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class Qn{constructor(){(0,W.Z)(this,"container",void 0),(0,W.Z)(this,"controlCorners",void 0),(0,W.Z)(this,"controlContainer",void 0),(0,W.Z)(this,"scene",void 0),(0,W.Z)(this,"mapsService",void 0),(0,W.Z)(this,"controls",[]),(0,W.Z)(this,"unAddControls",[])}init(ve,et){this.container=ve.container,this.scene=et,this.mapsService=et.mapService,this.initControlPos()}addControl(ve,et){et.mapService.map?(ve.addTo(this.scene),this.controls.push(ve)):this.unAddControls.push(ve)}getControlByName(ve){return this.controls.find(et=>et.controlOption.name===ve)}removeControl(ve){const et=this.controls.indexOf(ve);return et>-1&&this.controls.splice(et,1),ve.remove(),this}addControls(){this.unAddControls.forEach(ve=>{ve.addTo(this.scene),this.controls.push(ve)}),this.unAddControls=[]}destroy(){for(const ve of this.controls)ve.remove();this.controls=[],this.clearControlPos()}initControlPos(){const ve=this.controlCorners={},et="l7-",an=this.controlContainer=E.SO.create("div",et+"control-container",this.container);function cn(Or=[]){const Wr=Or.map(Fi=>et+Fi).join(" ");ve[Or.filter(Fi=>!["row","column"].includes(Fi)).join("")]=E.SO.create("div",Wr,an)}function tr(Or){return[...Or.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),Jt[Or]]}Object.values(nr).forEach(Or=>{cn(tr(Or))}),this.checkCornerOverlap()}clearControlPos(){for(const ve in this.controlCorners)this.controlCorners[ve]&&E.SO.remove(this.controlCorners[ve]);this.controlContainer&&E.SO.remove(this.controlContainer)}checkCornerOverlap(){const ve=window.MutationObserver;if(ve)for(const et of Object.keys(this.controlCorners)){const an=et.match(/^(top|bottom)(left|right)$/);if(an){const[,cn,tr]=an,Or=this.controlCorners[`${cn}${tr}`];new ve(([{target:Fi}])=>{Or&&(Or.style[cn]=Fi.clientHeight+"px")}).observe(this.controlCorners[`${tr}${cn}`],{childList:!0,attributes:!0})}}}}class Er{constructor(){(0,W.Z)(this,"container",void 0),(0,W.Z)(this,"scene",void 0),(0,W.Z)(this,"mapsService",void 0),(0,W.Z)(this,"markers",[]),(0,W.Z)(this,"markerLayers",[]),(0,W.Z)(this,"unAddMarkers",[]),(0,W.Z)(this,"unAddMarkerLayers",[])}addMarkerLayer(ve){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(ve),ve.addTo(this.scene)):this.unAddMarkerLayers.push(ve)}removeMarkerLayer(ve){ve.destroy(),this.markerLayers.indexOf(ve);const et=this.markerLayers.indexOf(ve);et>-1&&this.markerLayers.splice(et,1)}addMarker(ve){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(ve),ve.addTo(this.scene)):this.unAddMarkers.push(ve)}addMarkers(){this.unAddMarkers.forEach(ve=>{ve.addTo(this.scene),this.markers.push(ve)}),this.unAddMarkers=[]}addMarkerLayers(){this.unAddMarkerLayers.forEach(ve=>{this.markerLayers.push(ve),ve.addTo(this.scene)}),this.unAddMarkers=[]}removeMarker(ve){ve.remove(),this.markers.indexOf(ve);const et=this.markers.indexOf(ve);et>-1&&this.markers.splice(et,1)}removeAllMarkers(){this.destroy()}init(ve){this.scene=ve,this.mapsService=ve.mapService}destroy(){this.markers.forEach(ve=>{ve.remove()}),this.markers=[],this.markerLayers.forEach(ve=>{ve.destroy()}),this.markerLayers=[]}removeMakerLayerMarker(ve){ve.destroy()}}class Gr{constructor(){(0,W.Z)(this,"scene",void 0),(0,W.Z)(this,"mapsService",void 0),(0,W.Z)(this,"popups",[]),(0,W.Z)(this,"unAddPopups",[])}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}removePopup(ve){ve!=null&&ve.isOpen()&&ve.remove();const et=this.popups.indexOf(ve);et>-1&&this.popups.splice(et,1);const an=this.unAddPopups.indexOf(ve);an>-1&&this.unAddPopups.splice(an,1)}destroy(){this.popups.forEach(ve=>ve.remove())}addPopup(ve){ve&&ve.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(et=>{et.getOptions().autoClose&&this.removePopup(et)}),this.isMarkerReady?(ve.addTo(this.scene),this.popups.push(ve)):this.unAddPopups.push(ve),ve.on("close",()=>{this.removePopup(ve)})}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(ve=>{this.addPopup(ve),this.unAddPopups=[]})}init(ve){this.scene=ve,this.mapsService=ve.mapService}}var Hr={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo \u6D4B\u8BD5 Token, \u751F\u4EA7\u73AF\u5883\u52A1\u5FC5\u81EA\u884C\u6CE8\u518C Token \u786E\u4FDD\u670D\u52A1\u7A33\u5B9A \u9AD8\u5FB7\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox\u5730\u56FE\u7533\u8BF7\u5730\u5740 https://docs.mapbox.com/help/glossary/access-token/",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"};const{merge:wi}=E.lodashUtil,Pi={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},wr={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:zt.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};class gi{constructor(){(0,W.Z)(this,"sceneConfigCache",{}),(0,W.Z)(this,"layerConfigCache",{}),(0,W.Z)(this,"layerAttributeConfigCache",{})}getSceneConfig(ve){return this.sceneConfigCache[ve]}getSceneWarninfo(ve){return Hr[ve]}setSceneConfig(ve,et){this.sceneConfigCache[ve]=(0,K.Z)((0,K.Z)({},Pi),et)}getLayerConfig(ve){return this.layerConfigCache[ve]}setLayerConfig(ve,et,an){this.layerConfigCache[et]=(0,K.Z)({},wi({},this.sceneConfigCache[ve],wr,an))}getAttributeConfig(ve){return this.layerAttributeConfigCache[ve]}setAttributeConfig(ve,et){this.layerAttributeConfigCache[ve]=(0,K.Z)((0,K.Z)({},this.layerAttributeConfigCache[ve]),et)}clean(){this.sceneConfigCache={},this.layerConfigCache={}}}var di=L(98333);const xi=Math.PI/180,Fo=512,Ai=4003e4;function ea({latitude:ie=0,zoom:ve=0,scale:et,highPrecision:an=!1,flipY:cn=!1}){et=et!==void 0?et:Math.pow(2,ve);const tr={},Or=Fo*et,Wr=Math.cos(ie*xi),Fi=Or/360,xo=Fi/Wr,_o=Or/Ai/Wr;if(tr.pixelsPerMeter=[_o,-_o,_o],tr.metersPerPixel=[1/_o,-1/_o,1/_o],tr.pixelsPerDegree=[Fi,-xo,_o],tr.degreesPerPixel=[1/Fi,-1/xo,1/_o],an){const La=xi*Math.tan(ie*xi)/Wr,Na=Fi*La/2,Ta=Or/Ai*La,Ca=Ta/xo*_o;tr.pixelsPerDegree2=[0,-Na,Ta],tr.pixelsPerMeter2=[Ca,0,Ca],cn&&(tr.pixelsPerDegree2[1]=-tr.pixelsPerDegree2[1],tr.pixelsPerMeter2[1]=-tr.pixelsPerMeter2[1])}return cn&&(tr.pixelsPerMeter[1]=-tr.pixelsPerMeter[1],tr.metersPerPixel[1]=-tr.metersPerPixel[1],tr.pixelsPerDegree[1]=-tr.pixelsPerDegree[1],tr.degreesPerPixel[1]=-tr.degreesPerPixel[1]),tr}const _a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class fi{constructor(ve){(0,W.Z)(this,"needRefresh",!0),(0,W.Z)(this,"coordinateSystem",void 0),(0,W.Z)(this,"viewportCenter",void 0),(0,W.Z)(this,"viewportCenterProjection",void 0),(0,W.Z)(this,"pixelsPerDegree",void 0),(0,W.Z)(this,"pixelsPerDegree2",void 0),(0,W.Z)(this,"pixelsPerMeter",void 0),this.cameraService=ve}refresh(ve){const et=this.cameraService.getZoom(),an=this.cameraService.getZoomScale(),cn=ve||this.cameraService.getCenter(),{pixelsPerMeter:tr,pixelsPerDegree:Or}=ea({latitude:cn[1],zoom:et});this.viewportCenter=cn,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=tr,this.pixelsPerDegree=Or,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Ft.LNGLAT||this.coordinateSystem===Ft.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Ft.LNGLAT_OFFSET?this.calculateLnglatOffset(cn,et):this.coordinateSystem===Ft.P20_OFFSET&&this.calculateLnglatOffset(cn,et,an,!0),this.needRefresh=!1}getCoordinateSystem(){return this.coordinateSystem}setCoordinateSystem(ve){this.coordinateSystem=ve}getViewportCenter(){return this.viewportCenter}getViewportCenterProjection(){return this.viewportCenterProjection}getPixelsPerDegree(){return this.pixelsPerDegree}getPixelsPerDegree2(){return this.pixelsPerDegree2}getPixelsPerMeter(){return this.pixelsPerMeter}calculateLnglatOffset(ve,et,an,cn){const{pixelsPerMeter:tr,pixelsPerDegree:Or,pixelsPerDegree2:Wr}=ea({latitude:ve[1],zoom:et,scale:an,flipY:cn,highPrecision:!0});let Fi=this.cameraService.getViewMatrix();const xo=this.cameraService.getProjectionMatrix();let _o=un.multiply([],xo,Fi);const La=this.cameraService.projectFlat([Math.fround(ve[0]),Math.fround(ve[1])],Math.pow(2,et));this.viewportCenterProjection=di.fF([],[La[0],La[1],0,1],_o),Fi=this.cameraService.getViewMatrixUncentered()||Fi,_o=un.multiply([],xo,Fi),_o=un.multiply([],_o,_a),this.cameraService.setViewProjectionMatrix(_o),this.pixelsPerMeter=tr,this.pixelsPerDegree=Or,this.pixelsPerDegree2=Wr}}class Ji extends $t.EventEmitter{constructor(...ve){super(...ve),(0,W.Z)(this,"renderMap",new Map),(0,W.Z)(this,"enable",!1),(0,W.Z)(this,"renderEnable",!1),(0,W.Z)(this,"cacheLogs",{})}setEnable(ve){this.enable=!!ve}log(ve,et){if(!this.enable)return;const an=ve.split(".");let cn=null;an.forEach((tr,Or)=>{cn!==null?(cn[tr]||(cn[tr]={}),Or!==an.length-1&&(cn=cn[tr])):(this.cacheLogs[tr]||(this.cacheLogs[tr]={}),Or!==an.length-1&&(cn=this.cacheLogs[tr])),Or===an.length-1&&(cn[tr]=(0,K.Z)((0,K.Z)({time:Date.now()},cn[tr]),et))})}getLog(ve){switch(typeof ve){case"string":return this.cacheLogs[ve];case"object":return ve.map(et=>this.cacheLogs[et]).filter(et=>et!==void 0);case"undefined":return this.cacheLogs}}removeLog(ve){delete this.cacheLogs[ve]}generateRenderUid(){return this.renderEnable?(0,E.M8)():""}renderDebug(ve){this.renderEnable=ve}renderStart(ve){if(!this.renderEnable||!this.enable)return;const et=this.renderMap.get(ve)||{};this.renderMap.set(ve,(0,K.Z)((0,K.Z)({},et),{},{renderUid:ve,renderStart:Date.now()}))}renderEnd(ve){if(!this.renderEnable||!this.enable)return;const et=this.renderMap.get(ve);if(et){const an=et.renderStart,cn=Date.now();this.emit("renderEnd",(0,K.Z)((0,K.Z)({},et),{},{renderEnd:cn,renderDuration:cn-an})),this.renderMap.delete(ve)}}destroy(){this.cacheLogs=null,this.renderMap.clear()}}var $e=L(50840),ht=L.n($e);const Ht={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class hn extends sn(){get mapService(){return this.container.mapService}constructor(ve){super(),(0,W.Z)(this,"indragging",!1),(0,W.Z)(this,"hammertime",void 0),(0,W.Z)(this,"lastClickTime",0),(0,W.Z)(this,"lastClickXY",[-1,-1]),(0,W.Z)(this,"clickTimer",void 0),(0,W.Z)(this,"$containter",void 0),(0,W.Z)(this,"onDrag",et=>{const an=this.interactionEvent(et);an.type=Ht[an.type],an.type==="dragging"?this.indragging=!0:this.indragging=!1,this.emit(Gn.Drag,an)}),(0,W.Z)(this,"onHammer",et=>{et.srcEvent.stopPropagation();const an=this.interactionEvent(et);this.emit(Gn.Hover,an)}),(0,W.Z)(this,"onTouch",et=>{const an=et.touches[0];this.onHover({clientX:an.clientX,clientY:an.clientY,type:"touchstart"})}),(0,W.Z)(this,"onTouchEnd",et=>{if(et.changedTouches.length>0){const an=et.changedTouches[0];this.onHover({clientX:an.clientX,clientY:an.clientY,type:"touchend"})}}),(0,W.Z)(this,"onTouchMove",et=>{const an=et.changedTouches[0];this.onHover({clientX:an.clientX,clientY:an.clientY,type:"touchmove"})}),(0,W.Z)(this,"onHover",et=>{const{clientX:an,clientY:cn}=et;let tr=an,Or=cn;const Wr=et.type,Fi=this.mapService.getMapContainer();if(Fi){const{top:_o,left:La}=Fi.getBoundingClientRect();tr=tr-La-Fi.clientLeft,Or=Or-_o-Fi.clientTop}const xo=this.mapService.containerToLngLat([tr,Or]);if(Wr==="click"){this.isDoubleTap(tr,Or,xo);return}if(Wr==="touch"){this.isDoubleTap(tr,Or,xo);return}Wr!=="click"&&Wr!=="dblclick"&&this.emit(Gn.Hover,{x:tr,y:Or,lngLat:xo,type:Wr,target:et})}),this.container=ve}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Gn.Hover)}triggerHover({x:ve,y:et}){this.emit(Gn.Hover,{x:ve,y:et})}triggerSelect(ve){this.emit(Gn.Select,{featureId:ve})}triggerActive(ve){this.emit(Gn.Active,{featureId:ve})}addEventListenerOnMap(){const ve=this.mapService.getMapContainer();if(ve){const et=new(ht()).Manager(ve);et.add(new(ht()).Tap({event:"dblclick",taps:2})),et.add(new(ht()).Tap({event:"click"})),et.add(new(ht()).Pan({threshold:0,pointers:0})),et.add(new(ht()).Press({})),et.on("dblclick click",this.onHammer),et.on("panstart panmove panend pancancel",this.onDrag),ve.addEventListener("touchstart",this.onTouch),ve.addEventListener("touchend",this.onTouchEnd),ve.addEventListener("mousemove",this.onHover),ve.addEventListener("touchmove",this.onTouchMove),ve.addEventListener("mousedown",this.onHover,!0),ve.addEventListener("mouseup",this.onHover),ve.addEventListener("contextmenu",this.onHover),this.hammertime=et}}removeEventListenerOnMap(){const ve=this.mapService.getMapContainer();ve&&(ve.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),ve.removeEventListener("touchstart",this.onTouch),ve.removeEventListener("touchend",this.onTouchEnd),ve.removeEventListener("mousedown",this.onHover),ve.removeEventListener("mouseup",this.onHover),ve.removeEventListener("contextmenu",this.onHover))}interactionEvent(ve){const{type:et,pointerType:an}=ve;let cn,tr;an==="touch"?(tr=Math.floor(ve.pointers[0].clientY),cn=Math.floor(ve.pointers[0].clientX)):(tr=Math.floor(ve.srcEvent.y),cn=Math.floor(ve.srcEvent.x));const Or=this.mapService.getMapContainer();if(Or){const{top:Fi,left:xo}=Or.getBoundingClientRect();cn-=xo,tr-=Fi}const Wr=this.mapService.containerToLngLat([cn,tr]);return{x:cn,y:tr,lngLat:Wr,type:et,target:ve.srcEvent}}isDoubleTap(ve,et,an){const cn=new Date().getTime();let tr="click";cn-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-ve)<10&&Math.abs(this.lastClickXY[1]-et)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),tr="dblclick",this.emit(Gn.Hover,{x:ve,y:et,lngLat:an,type:tr})):(this.lastClickTime=cn,this.lastClickXY=[ve,et],this.clickTimer=setTimeout(()=>{tr="click",this.emit(Gn.Hover,{x:ve,y:et,lngLat:an,type:tr})},400))}}let Fn=0;function Bn(ie){let ve=ie;if(typeof ie=="string"&&(ve=document.getElementById(ie)),ve){const et=document.createElement("div");return et.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,et.id=`l7-scene-${Fn++}`,et.classList.add("l7-scene"),ve.appendChild(et),et}return null}function yn(ie){var ve;let et=!0;if((ie==null||(ve=ie.target)===null||ve===void 0?void 0:ve.target)instanceof HTMLElement){var an;let tr=ie==null||(an=ie.target)===null||an===void 0?void 0:an.target;for(;tr;){var cn;const Or=Array.from(tr.classList);if(Or.includes("l7-marker")||Or.includes("l7-popup")){et=!1;break}tr=(cn=tr)===null||cn===void 0?void 0:cn.parentElement}}return et}let On=function(ie){return ie[ie.SAMPLED=0]="SAMPLED",ie[ie.RENDER_TARGET=1]="RENDER_TARGET",ie}({});class pr{constructor(ve){var et=this;(0,W.Z)(this,"pickedColors",void 0),(0,W.Z)(this,"pickedTileLayers",[]),(0,W.Z)(this,"pickingFBO",void 0),(0,W.Z)(this,"width",0),(0,W.Z)(this,"height",0),(0,W.Z)(this,"alreadyInPicking",!1),(0,W.Z)(this,"pickBufferScale",1),(0,W.Z)(this,"pickFromPickingFBO",function(){var an=(0,we.Z)(function*(cn,{x:tr,y:Or,lngLat:Wr,type:Fi,target:xo}){let _o=!1;const{readPixelsAsync:La,getViewportSize:Na}=et.rendererService,{width:Ta,height:Ca}=Na(),{enableHighlight:xa,enableSelect:Fa}=cn.getLayerConfig(),Oa=tr*E.SO.DPR,Za=Or*E.SO.DPR;if(Oa>Ta-1*E.SO.DPR||Oa<0||Za>Ca-1*E.SO.DPR||Za<0)return!1;const Sa=yield La({x:Math.floor(Oa/et.pickBufferScale),y:Math.floor((Ca-(Or+1)*E.SO.DPR)/et.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:et.pickingFBO});if(et.pickedColors=Sa,Sa[0]!==0||Sa[1]!==0||Sa[2]!==0){const ps=(0,E.W0)(Sa),Ws=cn.layerPickService.getFeatureById(ps);ps!==cn.getCurrentPickId()&&Fi==="mousemove"&&(Fi="mouseenter");const $s={x:tr,y:Or,type:Fi,lngLat:Wr,featureId:ps,feature:Ws,target:xo};Ws&&(_o=!0,cn.setCurrentPickId(ps),et.triggerHoverOnLayer(cn,$s))}else{const ps={x:tr,y:Or,lngLat:Wr,type:cn.getCurrentPickId()!==null&&Fi==="mousemove"?"mouseout":"un"+Fi,featureId:null,target:xo,feature:null};et.triggerHoverOnLayer(cn,(0,K.Z)((0,K.Z)({},ps),{},{type:"unpick"})),et.triggerHoverOnLayer(cn,ps),cn.setCurrentPickId(null)}if(xa&&cn.layerPickService.highlightPickedFeature(Sa),Fa&&Fi==="click"&&(Sa==null?void 0:Sa.toString())!==[0,0,0,0].toString()){const ps=(0,E.W0)(Sa);cn.getCurrentSelectedId()===null||ps!==cn.getCurrentSelectedId()?(cn.layerPickService.selectFeature(Sa),cn.setCurrentSelectedId(ps)):(cn.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),cn.setCurrentSelectedId(null))}return _o});return function(cn,tr){return an.apply(this,arguments)}}()),this.container=ve}get mapService(){return this.container.mapService}get rendererService(){return this.container.rendererService}get configService(){return this.container.globalConfigService}get interactionService(){return this.container.interactionService}get layerService(){return this.container.layerService}init(ve){const{createTexture2D:et,createFramebuffer:an,getViewportSize:cn}=this.rendererService;let{width:tr,height:Or}=cn();this.pickBufferScale=this.configService.getSceneConfig(ve).pickBufferScale||1,tr=Math.round(tr/this.pickBufferScale),Or=Math.round(Or/this.pickBufferScale);const Wr=et({width:tr,height:Or,usage:On.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=an({color:Wr,depth:!0,width:tr,height:Or}),this.interactionService.on(Gn.Hover,this.pickingAllLayer.bind(this))}boxPickLayer(ve,et,an){var cn=this;return(0,we.Z)(function*(){const{useFramebufferAsync:tr,clear:Or}=cn.rendererService;cn.resizePickingFBO(),ve.hooks.beforePickingEncode.call(),yield tr(cn.pickingFBO,(0,we.Z)(function*(){Or({framebuffer:cn.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),ve.renderModels({ispick:!0})})),ve.hooks.afterPickingEncode.call();const Wr=yield cn.pickBox(ve,et);an(Wr)})()}pickBox(ve,et){var an=this;return(0,we.Z)(function*(){const[cn,tr,Or,Wr]=et.map(Oa=>{const Za=Oa<0?0:Oa;return Math.floor(Za*E.SO.DPR/an.pickBufferScale)}),{readPixelsAsync:Fi,getViewportSize:xo}=an.rendererService,{width:_o,height:La}=xo();if(cn>(_o-1)*E.SO.DPR/an.pickBufferScale||Or<0||tr>(La-1)*E.SO.DPR/an.pickBufferScale||Wr<0)return[];const Na=Math.min(_o/an.pickBufferScale,Or)-cn,Ta=Math.min(La/an.pickBufferScale,Wr)-tr,Ca=yield Fi({x:cn,y:Math.floor(La/an.pickBufferScale-(Wr+1)),width:Na,height:Ta,data:new Uint8Array(Na*Ta*4),framebuffer:an.pickingFBO}),xa=[],Fa={};for(let Oa=0;Oa<Ca.length/4;Oa=Oa+1){const Za=Ca.slice(Oa*4,Oa*4+4),Sa=(0,E.W0)(Za);if(Sa!==-1&&!Fa[Sa]){const ps=ve.layerPickService.getFeatureById(Sa);xa.push((0,K.Z)((0,K.Z)({},ps),{},{pickedFeatureIdx:Sa})),Fa[Sa]=!0}}return xa})()}handleCursor(ve,et){const{cursor:an="",cursorEnabled:cn}=ve.getLayerConfig();if(cn){const Or=this.mapService.version==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),Wr=Or==null?void 0:Or.style.getPropertyValue("cursor");et==="unmousemove"&&Wr!==""?Or==null||Or.style.setProperty("cursor",""):et==="mousemove"&&(Or==null||Or.style.setProperty("cursor",an))}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null}pickingAllLayer(ve){var et=this;return(0,we.Z)(function*(){!et.layerService.needPick(ve.type)||!et.isPickingAllLayer()||(et.alreadyInPicking=!0,yield et.pickingLayers(ve),et.layerService.renderLayers(),et.alreadyInPicking=!1)})()}isPickingAllLayer(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}resizePickingFBO(){const{getViewportSize:ve}=this.rendererService,{width:et,height:an}=ve();(this.width!==et||this.height!==an)&&(this.pickingFBO.resize({width:Math.round(et/this.pickBufferScale),height:Math.round(an/this.pickBufferScale)}),this.width=et,this.height=an)}pickingLayers(ve){var et=this;return(0,we.Z)(function*(){const{clear:an,useFramebufferAsync:cn}=et.rendererService;et.resizePickingFBO();const tr=et.layerService.getRenderList();for(const Or of tr.filter(Wr=>Wr.needPick(ve.type)).reverse()){yield cn(et.pickingFBO,(0,we.Z)(function*(){an({framebuffer:et.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Or.layerPickService.pickRender(ve)}));const Wr=yield et.pickFromPickingFBO(Or,ve);if(et.layerService.pickedLayerId=Wr?+Or.id:-1,Wr&&!Or.getLayerConfig().enablePropagation)break}})()}triggerHoverOnLayer(ve,et){yn(et)&&(this.handleCursor(ve,et.type),ve.emit(et.type,et))}}class hr{constructor(ve=!0){(0,W.Z)(this,"autoStart",void 0),(0,W.Z)(this,"startTime",0),(0,W.Z)(this,"oldTime",0),(0,W.Z)(this,"running",!1),(0,W.Z)(this,"elapsedTime",0),this.autoStart=ve}start(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let ve=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const et=(typeof performance=="undefined"?Date:performance).now();ve=(et-this.oldTime)/1e3,this.oldTime=et,this.elapsedTime+=ve}return ve}}const{throttle:oi}=E.lodashUtil;class Xi extends $t.EventEmitter{get renderService(){return this.container.rendererService}get mapService(){return this.container.mapService}get debugService(){return this.container.debugService}constructor(ve){super(),(0,W.Z)(this,"pickedLayerId",-1),(0,W.Z)(this,"clock",new hr),(0,W.Z)(this,"alreadyInRendering",!1),(0,W.Z)(this,"layers",[]),(0,W.Z)(this,"layerList",[]),(0,W.Z)(this,"layerRenderID",void 0),(0,W.Z)(this,"sceneInited",!1),(0,W.Z)(this,"animateInstanceCount",0),(0,W.Z)(this,"shaderPicking",!0),(0,W.Z)(this,"enableRender",!0),(0,W.Z)(this,"reRender",oi(()=>{this.renderLayers()},32)),(0,W.Z)(this,"throttleRenderLayers",oi(()=>{this.renderLayers()},16)),this.container=ve}needPick(ve){return this.updateLayerRenderList(),this.layerList.some(et=>et.needPick(ve))}add(ve){this.layers.push(ve),this.sceneInited&&ve.init().then(()=>{this.renderLayers()})}addMask(ve){this.sceneInited&&ve.init().then(()=>{this.renderLayers()})}initLayers(){var ve=this;return(0,we.Z)(function*(){ve.sceneInited=!0,ve.layers.forEach(function(){var et=(0,we.Z)(function*(an){an.startInit||(yield an.init(),ve.updateLayerRenderList())});return function(an){return et.apply(this,arguments)}}())})()}getSceneInited(){return this.sceneInited}getRenderList(){return this.layerList}getLayers(){return this.layers}getLayer(ve){return this.layers.find(et=>et.id===ve)}getLayerByName(ve){return this.layers.find(et=>et.name===ve)}remove(ve,et){var an=this;return(0,we.Z)(function*(){et?et.layerChildren=et.layerChildren.filter(cn=>cn!==ve):an.layers=an.layers.filter(cn=>cn!==ve),ve.destroy(),an.reRender(),an.emit("layerChange",an.layers)})()}removeAllLayers(){var ve=this;return(0,we.Z)(function*(){ve.destroy(),ve.reRender()})()}setEnableRender(ve){this.enableRender=ve}renderLayers(){var ve=this;return(0,we.Z)(function*(){if(ve.alreadyInRendering||!ve.enableRender)return;ve.updateLayerRenderList();const et=ve.debugService.generateRenderUid();ve.debugService.renderStart(et),ve.alreadyInRendering=!0,ve.clear();for(const an of ve.layerList)an.prerender();ve.renderService.beginFrame();for(const an of ve.layerList){const{enableMask:cn}=an.getLayerConfig();an.masks.filter(tr=>tr.inited).length>0&&cn&&ve.renderMask(an.masks),an.getLayerConfig().enableMultiPassRenderer?yield an.renderMultiPass():an.render()}ve.renderService.endFrame(),ve.debugService.renderEnd(et),ve.alreadyInRendering=!1})()}renderMask(ve){let et=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});const an=ve.length>1?Pt.MULTIPLE:Pt.SINGLE;for(const cn of ve)cn.render({isStencil:!0,stencilType:an,stencilIndex:et++})}beforeRenderData(ve){var et=this;return(0,we.Z)(function*(){(yield ve.hooks.beforeRenderData.promise())&&et.renderLayers()})()}renderTileLayerMask(ve){let et=0;const{enableMask:an=!0}=ve.getLayerConfig();let cn=ve.tileMask?1:0;const tr=ve.masks.filter(Wr=>Wr.inited);cn=cn+(an?tr.length:1);const Or=cn>1?Pt.MULTIPLE:Pt.SINGLE;if((ve.tileMask||tr.length&&an)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),tr.length&&an)for(const Wr of tr)Wr.render({isStencil:!0,stencilType:Or,stencilIndex:et++});ve.tileMask&&ve.tileMask.render({isStencil:!0,stencilType:Or,stencilIndex:et++,stencilOperation:zt.OR})}renderTileLayer(ve){var et=this;return(0,we.Z)(function*(){et.renderTileLayerMask(ve),ve.getLayerConfig().enableMultiPassRenderer?yield ve.renderMultiPass():yield ve.render()})()}updateLayerRenderList(){this.layerList=[],this.layers.filter(ve=>ve.inited).filter(ve=>ve.isVisible()).sort((ve,et)=>ve.zIndex-et.zIndex).forEach(ve=>{this.layerList.push(ve)})}destroy(){this.layers.forEach(ve=>{ve.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}startAnimate(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}stopAnimate(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float}enableShaderPick(){this.shaderPicking=!0}disableShaderPick(){this.shaderPicking=!1}getShaderPickStat(){return this.shaderPicking}clear(){const ve=(0,E.CI)(this.mapService.bgColor);this.renderService.clear({color:ve,depth:1,stencil:0,framebuffer:null})}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}stopRender(){window.cancelAnimationFrame(this.layerRenderID)}}var io=L(45987);const{isNil:ai}=E.lodashUtil;class Yi{constructor(ve){(0,W.Z)(this,"name",void 0),(0,W.Z)(this,"type",void 0),(0,W.Z)(this,"scale",void 0),(0,W.Z)(this,"descriptor",void 0),(0,W.Z)(this,"featureBufferLayout",[]),(0,W.Z)(this,"needRescale",!1),(0,W.Z)(this,"needRemapping",!1),(0,W.Z)(this,"needRegenerateVertices",!1),(0,W.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,W.Z)(this,"vertexAttribute",void 0),(0,W.Z)(this,"defaultCallback",et=>{if(et.length===0){var an;return((an=this.scale)===null||an===void 0?void 0:an.defaultValues)||[]}return et.map((cn,tr)=>{var Or;return((Or=this.scale)===null||Or===void 0?void 0:Or.scalers[tr].func)(cn)})}),this.setProps(ve)}setProps(ve){Object.assign(this,ve)}mapping(ve){var et;if((et=this.scale)!==null&&et!==void 0&&et.callback){var an;const cn=(an=this.scale)===null||an===void 0?void 0:an.callback(...ve);if(!ai(cn))return[cn]}return this.defaultCallback(ve)}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[])}}const ji=["buffer","update","name"],Yr=["buffer","update","name"],To={[ee.FLOAT]:4,[ee.UNSIGNED_BYTE]:1,[ee.UNSIGNED_SHORT]:2};class mi{constructor(ve){(0,W.Z)(this,"attributesAndIndices",void 0),(0,W.Z)(this,"attributes",[]),(0,W.Z)(this,"triangulation",void 0),(0,W.Z)(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=ve}registerStyleAttribute(ve){let et=this.getLayerStyleAttribute(ve.name||"");return et?et.setProps(ve):(et=new Yi(ve),this.attributes.push(et)),et}unRegisterStyleAttribute(ve){const et=this.attributes.findIndex(an=>an.name===ve);et>-1&&this.attributes.splice(et,1)}updateScaleAttribute(ve){this.attributes.forEach(et=>{var an;const cn=et.name,tr=(an=et.scale)===null||an===void 0?void 0:an.field;(ve[cn]||tr&&ve[tr])&&(et.needRescale=!0,et.needRemapping=!0,et.needRegenerateVertices=!0)})}updateStyleAttribute(ve,et,an){let cn=this.getLayerStyleAttribute(ve);cn||(cn=this.registerStyleAttribute((0,K.Z)((0,K.Z)({},et),{},{name:ve})));const{scale:tr}=et;tr&&cn&&(cn.scale=tr,cn.needRescale=!0,cn.needRemapping=!0,cn.needRegenerateVertices=!0,an&&an.featureRange&&(cn.featureRange=an.featureRange))}getLayerStyleAttributes(){return this.attributes}getLayerStyleAttribute(ve){return this.attributes.find(et=>et.name===ve)}getLayerAttributeScale(ve){var et;const an=this.getLayerStyleAttribute(ve),cn=an==null||(et=an.scale)===null||et===void 0?void 0:et.scalers;return cn&&cn[0]?cn[0].func:null}updateAttributeByFeatureRange(ve,et,an=0,cn,tr){const Or=this.attributes.find(Wr=>Wr.name===ve);if(Or&&Or.descriptor){const{descriptor:Wr}=Or,{update:Fi,buffer:xo,size:_o=0}=Wr,La=To[xo.type||ee.FLOAT];if(Fi){const{elements:Na,sizePerElement:Ta}=this.featureLayout,Ca=Na.slice(an,cn);if(!Ca.length)return;const{offset:xa}=Ca[0],Fa=xa*_o*La,Oa=Ca.map(({featureIdx:Za,vertices:Sa,normals:ps},Ws)=>{const $s=Sa.length/Ta,Ec=[];for(let pl=0;pl<$s;pl++){const cc=ps?ps.slice(pl*3,pl*3+3):[];Ec.push(...Fi(et[Za],Za,Sa.slice(pl*Ta,pl*Ta+Ta),Ws,cc))}return Ec}).flat();Or.vertexAttribute.updateBuffer({data:Oa,offset:Fa}),tr==null||tr.emit(`legend:${ve}`,tr.getLegend(ve))}}}createAttributesAndIndices(ve,et,an,cn){this.featureLayout={sizePerElement:0,elements:[]},et&&(this.triangulation=et);const tr=this.attributes.map(xa=>(xa.resetDescriptor(),xa.descriptor));let Or=0,Wr=0;const Fi=[];let xo=3;ve.forEach((xa,Fa)=>{const{indices:Oa,vertices:Za,normals:Sa,size:ps,indexes:Ws,count:$s}=this.triangulation(xa,an);typeof $s=="number"&&(Wr+=$s),Oa.forEach(pl=>{Fi.push(pl+Or)}),xo=ps;const Ec=Za.length/ps;this.featureLayout.sizePerElement=xo,this.featureLayout.elements.push({featureIdx:Fa,vertices:Za,normals:Sa,offset:Or}),Or+=Ec;for(let pl=0;pl<Ec;pl++){const cc=(Sa==null?void 0:Sa.slice(pl*3,pl*3+3))||[],cf=Za.slice(pl*ps,pl*ps+ps);let fc=0;Ws&&Ws[pl]!==void 0&&(fc=Ws[pl]),tr.forEach((zc,Qf)=>{zc&&zc.update&&zc.buffer.data.push(...zc.update(xa,Fa,cf,pl,cc,fc))})}});const{createAttribute:_o,createBuffer:La,createElements:Na}=this.rendererService,Ta={};tr.forEach((xa,Fa)=>{if(xa){const{buffer:Oa,update:Za,name:Sa}=xa,ps=(0,io.Z)(xa,ji),Ws=_o((0,K.Z)({buffer:La(Oa)},ps));Ta[xa.name||""]=Ws,this.attributes[Fa].vertexAttribute=Ws}});const Ca=Na({data:Fi,type:ee.UNSIGNED_INT,count:Fi.length});return this.attributesAndIndices={attributes:Ta,elements:Ca,count:Wr},Object.values(this.attributes).filter(xa=>xa.scale).forEach(xa=>{const Fa=xa.name;cn==null||cn.emit(`legend:${Fa}`,cn.getLegend(Fa))}),this.attributesAndIndices}createAttributes(ve,et){this.featureLayout={sizePerElement:0,elements:[]},et&&(this.triangulation=et);const an=this.attributes.map(_o=>(_o.resetDescriptor(),_o.descriptor));let cn=0;const tr=[];let Or=3;ve.forEach((_o,La)=>{const{indices:Na,vertices:Ta,normals:Ca,size:xa,indexes:Fa}=this.triangulation(_o);Na.forEach(Za=>{tr.push(Za+cn)}),Or=xa;const Oa=Ta.length/xa;this.featureLayout.sizePerElement=Or,this.featureLayout.elements.push({featureIdx:La,vertices:Ta,normals:Ca,offset:cn}),cn+=Oa;for(let Za=0;Za<Oa;Za++){const Sa=(Ca==null?void 0:Ca.slice(Za*3,Za*3+3))||[],ps=Ta.slice(Za*xa,Za*xa+xa);let Ws=0;Fa&&Fa[Za]!==void 0&&(Ws=Fa[Za]),an.forEach(($s,Ec)=>{$s&&$s.update&&$s.buffer.data.push(...$s.update(_o,La,ps,Za,Sa,Ws))})}});const{createAttribute:Wr,createBuffer:Fi}=this.rendererService,xo={};return an.forEach((_o,La)=>{if(_o){const{buffer:Na,update:Ta,name:Ca}=_o,xa=(0,io.Z)(_o,Yr),Fa=Wr((0,K.Z)({buffer:Fi(Na)},xa));xo[_o.name||""]=Fa,this.attributes[La].vertexAttribute=Fa}}),{attributes:xo}}clearAllAttributes(){var ve;this.attributes.forEach(et=>{et.vertexAttribute&&et.vertexAttribute.destroy()}),(ve=this.attributesAndIndices)===null||ve===void 0||ve.elements.destroy(),this.attributes=[]}}var wo=L(46343),$i=L(63844),co=L.n($i);class Mo extends $t.EventEmitter{get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get controlService(){return this.container.controlService}get configService(){return this.container.globalConfigService}get map(){return this.container.mapService}get coordinateSystemService(){return this.container.coordinateSystemService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get cameraService(){return this.container.cameraService}get interactionService(){return this.container.interactionService}get pickingService(){return this.container.pickingService}get shaderModuleService(){return this.container.shaderModuleService}get markerService(){return this.container.markerService}get popupService(){return this.container.popupService}constructor(ve){super(),(0,W.Z)(this,"destroyed",!1),(0,W.Z)(this,"loaded",!1),(0,W.Z)(this,"id",void 0),(0,W.Z)(this,"inited",!1),(0,W.Z)(this,"rendering",!1),(0,W.Z)(this,"$container",void 0),(0,W.Z)(this,"canvas",void 0),(0,W.Z)(this,"markerContainer",void 0),(0,W.Z)(this,"resizeDetector",void 0),(0,W.Z)(this,"hooks",void 0),(0,W.Z)(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render())}),(0,W.Z)(this,"handleMapCameraChanged",et=>{this.cameraService.update(et),this.render()}),this.container=ve,this.hooks={init:new wo.sX},this.id=ve.id}init(ve){var et=this;this.configService.setSceneConfig(this.id,ve),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,we.Z)(function*(){et.debugService.log("map.mapInitStart",{type:et.map.version}),yield new Promise(an=>{et.map.onCameraChanged(cn=>{et.cameraService.init(),et.cameraService.update(cn),an()}),et.map.init()}),et.map.onCameraChanged(et.handleMapCameraChanged),et.map.addMarkerContainer(),et.markerService.addMarkers(),et.markerService.addMarkerLayers(),et.popupService.initPopup(),et.interactionService.init(),et.interactionService.on(Gn.Drag,et.addSceneEvent.bind(et))})),this.hooks.init.tapPromise("initRenderer",(0,we.Z)(function*(){var an;const cn=((an=et.map)===null||an===void 0?void 0:an.getOverlayContainer())||void 0;if(cn?et.$container=cn:et.$container=Bn(et.configService.getSceneConfig(et.id).id||""),et.$container){if(et.canvas=E.SO.create("canvas","",et.$container),et.setCanvas(),yield et.rendererService.init(et.canvas,et.configService.getSceneConfig(et.id),ve.gl),et.registerContextLost(),et.initContainer(),et.resizeDetector=co()({strategy:"scroll"}),et.resizeDetector.listenTo(et.$container,et.handleWindowResized),window.matchMedia){var tr;(tr=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||tr===void 0||tr.addListener(et.handleWindowResized.bind("screen"))}}else console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");et.pickingService.init(et.id)})),this.render()}registerContextLost(){const ve=this.rendererService.getCanvas();ve&&ve.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"))}addLayer(ve){this.layerService.sceneService=this,this.layerService.add(ve)}addMask(ve){this.layerService.sceneService=this,this.layerService.addMask(ve)}render(){var ve=this;return(0,we.Z)(function*(){ve.rendering||ve.destroyed||(ve.rendering=!0,ve.inited?(yield ve.layerService.initLayers(),yield ve.layerService.renderLayers()):(yield ve.hooks.init.promise(),ve.destroyed&&ve.destroy(),yield ve.layerService.initLayers(),ve.layerService.renderLayers(),ve.controlService.addControls(),ve.loaded=!0,ve.emit("loaded"),ve.inited=!0),ve.rendering=!1)})()}addFontFace(ve,et){this.fontService.addFontFace(ve,et)}getSceneContainer(){return this.$container}exportPng(ve){var et=this;return(0,we.Z)(function*(){var an;const cn=(an=et.$container)===null||an===void 0?void 0:an.getElementsByTagName("canvas")[0];return yield et.render(),ve==="jpg"?cn==null?void 0:cn.toDataURL("image/jpeg"):cn==null?void 0:cn.toDataURL("image/png")})()}getSceneConfig(){return this.configService.getSceneConfig(this.id)}getPointSizeRange(){return this.rendererService.getPointSizeRange()}addMarkerContainer(){const ve=this.$container.parentElement;ve!==null&&(this.markerContainer=E.SO.create("div","l7-marker-container",ve))}getMarkerContainer(){return this.markerContainer}destroy(){var ve;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var et;(et=this.$container)===null||et===void 0||et.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy()}),(ve=this.$container)===null||ve===void 0||(ve=ve.parentNode)===null||ve===void 0||ve.removeChild(this.$container),this.emit("destroy")}initContainer(){var ve,et;const an=E.SO.DPR,cn=((ve=this.$container)===null||ve===void 0?void 0:ve.clientWidth)||400,tr=((et=this.$container)===null||et===void 0?void 0:et.clientHeight)||300,Or=this.canvas;Or&&(Or.width=cn*an,Or.height=tr*an),this.rendererService.viewport({x:0,y:0,width:an*cn,height:an*tr})}setCanvas(){var ve,et;const an=E.SO.DPR,cn=((ve=this.$container)===null||ve===void 0?void 0:ve.clientWidth)||400,tr=((et=this.$container)===null||et===void 0?void 0:et.clientHeight)||300,Or=this.canvas;Or.width=cn*an,Or.height=tr*an,Or.style.width="100%",Or.style.height="100%"}addSceneEvent(ve){this.emit(ve.type,ve)}}const{uniq:bs}=E.lodashUtil,ba="#define PI 3.14159265359",ra=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,ms=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,ls=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,Ct=`
in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if(activeType > 0.0) {
    vec4 highLightColor =  activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  }
  else {
    return color;
  }

  
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,Wt=`layout(location = 3) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,jn=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};`,kr=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Ci=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)
#define EARTH_CIRCUMFERENCE 40.03e6

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
#pragma include "scene_uniforms"


// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
   if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return lnglat;
  }
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  // if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
 

  //    return vec4(
  //     position.xy,
  //     project_scale(position.z),
  //     position.w);
  // }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}



float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel * u_FocalDistance ;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;
  }

  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * 2.0 *  u_FocalDistance;;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
   return meter;
  } else  {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * u_FocalDistance;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;
  }
  return pixel * -1. * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

// \u652F\u6301 GaodeV2\u3001Mapbox
vec4 project_common_position_to_clipspace_v2(vec4 position) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    return u_Mvp * position;
  } else {
    return project_common_position_to_clipspace(position);
  }
}
`,qi=`vec2 rotate_matrix(vec2 v, float a) {
    float b = a / 180.0 * 3.1415926535897932384626433832795;
    float s = sin(b);
    float c = cos(b);
    mat2 m = mat2(c, s, -s, c);
    return m * v;
}`,ta=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
};

layout(std140) uniform LayerUniforms {
  mat4 u_Mvp;
  vec2 u_sceneCenterMercator;
};
`,Us=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Ls=/precision\s+(high|low|medium)p\s+float/,ks=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,ll=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,zh=/void\s+main\s*\([^)]*\)\s*\{\n?/;class Up{constructor(){(0,W.Z)(this,"moduleCache",{}),(0,W.Z)(this,"rawContentCache",{})}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:ba,fs:ba}),this.registerModule("decode",{vs:ms,fs:""}),this.registerModule("scene_uniforms",{vs:ta,fs:ta}),this.registerModule("picking_uniforms",{vs:jn,fs:jn}),this.registerModule("projection",{vs:Ci,fs:Ci}),this.registerModule("project",{vs:kr,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:Us}),this.registerModule("lighting",{vs:ls,fs:""}),this.registerModule("light",{vs:ra,fs:""}),this.registerModule("picking",{vs:Wt,fs:Ct}),this.registerModule("rotation_2d",{vs:qi,fs:""})}registerModule(ve,et){et.vs=et.vs.replace(/\r\n/g,`
`),et.fs=et.fs.replace(/\r\n/g,`
`);const{vs:an,fs:cn,uniforms:tr,inject:Or}=et,{content:Wr,uniforms:Fi}=$(an),{content:xo,uniforms:_o}=$(cn);this.rawContentCache[ve]={fs:xo,inject:Or,uniforms:(0,K.Z)((0,K.Z)((0,K.Z)({},Fi),_o),tr),vs:Wr}}destroy(){this.moduleCache={},this.rawContentCache={}}getModule(ve){let et=this.rawContentCache[ve].vs,an=this.rawContentCache[ve].fs;const cn=this.rawContentCache[ve].inject;let tr={};cn!=null&&cn["vs:#decl"]&&(et=(cn==null?void 0:cn["vs:#decl"])+et,tr=$(cn==null?void 0:cn["vs:#decl"]).uniforms),cn!=null&&cn["vs:#main-start"]&&(et=et.replace(zh,Ta=>Ta+(cn==null?void 0:cn["vs:#main-start"]))),cn!=null&&cn["fs:#decl"]&&(an=(cn==null?void 0:cn["fs:#decl"])+an);const{content:Or,includeList:Wr}=this.processModule(et,[],"vs"),{content:Fi,includeList:xo}=this.processModule(an,[],"fs");let _o="";const La=bs(Wr.concat(xo).concat(ve)).reduce((Ta,Ca)=>(0,K.Z)((0,K.Z)({},Ta),this.rawContentCache[Ca].uniforms),(0,K.Z)({},tr));Ls.test(Fi)||(_o=_o+ks),_o=_o+Fi;let Na="";return Ls.test(Or)||(Na=Na+ks),Na=Na+Or,this.moduleCache[ve]={fs:_o.trim(),uniforms:La,vs:Na.trim()},this.moduleCache[ve]}processModule(ve,et,an){return{content:ve.replace(ll,(tr,Or)=>{const Fi=Or.split(" ")[0].replace(/"/g,"");if(et.indexOf(Fi)>-1)return"";const xo=this.rawContentCache[Fi][an];et.push(Fi);const{content:_o}=this.processModule(xo,et,an);return _o}),includeList:et}}injectDefines(ve){return Object.keys(ve).reduce((an,cn)=>an+`#define ${cn.toUpperCase()} ${ve[cn]};
`,`
`)}}class qf{constructor(){(0,W.Z)(this,"shaderModuleService",void 0),(0,W.Z)(this,"rendererService",void 0),(0,W.Z)(this,"cameraService",void 0),(0,W.Z)(this,"mapService",void 0),(0,W.Z)(this,"interactionService",void 0),(0,W.Z)(this,"layerService",void 0),(0,W.Z)(this,"config",void 0)}getName(){return""}getType(){return he.Normal}init(ve,et){this.config=et,this.rendererService=ve.getContainer().rendererService,this.cameraService=ve.getContainer().cameraService,this.mapService=ve.getContainer().mapService,this.interactionService=ve.getContainer().interactionService,this.layerService=ve.getContainer().layerService,this.shaderModuleService=ve.getContainer().shaderModuleService}render(ve){}}class ru extends qf{getName(){return"clear"}init(ve,et){super.init(ve,et)}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}class zf{constructor(ve){(0,W.Z)(this,"passes",[]),(0,W.Z)(this,"layer",void 0),(0,W.Z)(this,"renderFlag",void 0),(0,W.Z)(this,"width",0),(0,W.Z)(this,"height",0),this.postProcessor=ve}setLayer(ve){this.layer=ve}setRenderFlag(ve){this.renderFlag=ve}getRenderFlag(){return this.renderFlag}getPostProcessor(){return this.postProcessor}render(){var ve=this;return(0,we.Z)(function*(){for(const et of ve.passes)yield et.render(ve.layer);yield ve.postProcessor.render(ve.layer)})()}resize(ve,et){(this.width!==ve||this.height!==et)&&(this.postProcessor.resize(ve,et),this.width=ve,this.height=et)}add(ve,et){ve.getType()===he.PostProcessing?this.postProcessor.add(ve,this.layer,et):(ve.init(this.layer,et),this.passes.push(ve))}insert(ve,et,an){ve.init(this.layer,et),this.passes.splice(an,0,ve)}destroy(){this.passes.length=0}}class rf extends qf{constructor(...ve){var et;super(...ve),et=this,(0,W.Z)(this,"pickingFBO",void 0),(0,W.Z)(this,"layer",void 0),(0,W.Z)(this,"width",0),(0,W.Z)(this,"height",0),(0,W.Z)(this,"alreadyInRendering",!1),(0,W.Z)(this,"pickFromPickingFBO",({x:an,y:cn,lngLat:tr,type:Or})=>{if(!this.layer.isVisible()||!this.layer.needPick(Or))return;const{getViewportSize:Wr,readPixelsAsync:Fi,useFramebuffer:xo}=this.rendererService,{width:_o,height:La}=Wr(),{enableHighlight:Na,enableSelect:Ta}=this.layer.getLayerConfig(),Ca=an*E.SO.DPR,xa=cn*E.SO.DPR;if(Ca>_o||Ca<0||xa>La||xa<0)return;let Fa;xo(this.pickingFBO,(0,we.Z)(function*(){var Oa;if(Fa=yield Fi({x:Math.round(Ca),y:Math.round(La-(cn+1)*E.SO.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:et.pickingFBO}),Fa[0]!==0||Fa[1]!==0||Fa[2]!==0){const Za=(0,E.W0)(Fa),Sa=et.layer.getSource().getFeatureById(Za),ps={x:an,y:cn,type:Or,lngLat:tr,featureId:Za,feature:Sa};Sa&&(et.layer.setCurrentPickId(Za),et.triggerHoverOnLayer(ps))}else{const Za={x:an,y:cn,lngLat:tr,type:et.layer.getCurrentPickId()===null?"un"+Or:"mouseout",featureId:null,feature:null};et.triggerHoverOnLayer((0,K.Z)((0,K.Z)({},Za),{},{type:"unpick"})),et.triggerHoverOnLayer(Za),et.layer.setCurrentPickId(null)}Na&&et.highlightPickedFeature(Fa),Ta&&Or==="click"&&((Oa=Fa)===null||Oa===void 0?void 0:Oa.toString())!==[0,0,0,0].toString()&&et.selectFeature(Fa)}))})}getType(){return he.Normal}getName(){return"pixelPicking"}init(ve,et){super.init(ve,et),this.layer=ve;const{createTexture2D:an,createFramebuffer:cn,getViewportSize:tr}=this.rendererService,{width:Or,height:Wr}=tr(),Fi=an({width:Or,height:Wr,wrapS:ee.CLAMP_TO_EDGE,wrapT:ee.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=cn({color:Fi}),this.interactionService.on(Gn.Hover,this.pickFromPickingFBO),this.interactionService.on(Gn.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Gn.Active,this.highlightFeatureHandle.bind(this))}render(ve){if(this.alreadyInRendering)return;const{getViewportSize:et,useFramebuffer:an,clear:cn}=this.rendererService,{width:tr,height:Or}=et();this.alreadyInRendering=!0,(this.width!==tr||this.height!==Or)&&(this.pickingFBO.resize({width:tr,height:Or}),this.width=tr,this.height=Or),an(this.pickingFBO,()=>{cn({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});const Wr=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),ve.hooks.beforePickingEncode.call(),ve.render(),ve.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(Wr),this.alreadyInRendering=!1})}triggerHoverOnLayer(ve){this.layer.emit(ve.type,ve)}highlightPickedFeature(ve){const[et,an,cn]=ve;this.layer.hooks.beforeHighlight.call([et,an,cn]),this.layerService.renderLayers()}selectFeature(ve){const[et,an,cn]=ve;this.layer.hooks.beforeSelect.call([et,an,cn]),this.layerService.renderLayers()}selectFeatureHandle({featureId:ve}){const et=(0,E.Z6)(ve);this.selectFeature(new Uint8Array(et))}highlightFeatureHandle({featureId:ve}){const et=(0,E.Z6)(ve);this.highlightPickedFeature(new Uint8Array(et))}}class iu{constructor(ve){(0,W.Z)(this,"passes",[]),(0,W.Z)(this,"readFBO",void 0),(0,W.Z)(this,"writeFBO",void 0),this.rendererService=ve,this.init()}getReadFBO(){return this.readFBO}getWriteFBO(){return this.writeFBO}getCurrentFBOTex(){const{getViewportSize:ve,createTexture2D:et}=this.rendererService,{width:an,height:cn}=ve();return et({x:0,y:0,width:an,height:cn,copy:!0})}getReadFBOTex(){var ve=this;const{useFramebuffer:et}=this.rendererService;return new Promise(an=>{et(this.readFBO,(0,we.Z)(function*(){an(ve.getCurrentFBOTex())}))})}renderBloomPass(ve,et){var an=this;return(0,we.Z)(function*(){const cn=yield an.getReadFBOTex();let tr=0;for(;tr<4;)yield et.render(ve,cn),an.swap(),tr++})()}render(ve){var et=this;return(0,we.Z)(function*(){for(let an=0;an<et.passes.length;an++){const cn=et.passes[an];cn.setRenderToScreen(et.isLastEnabledPass(an)),cn.getName()==="bloom"?yield et.renderBloomPass(ve,cn):(yield cn.render(ve),an!==et.passes.length-1&&et.swap())}})()}resize(ve,et){this.readFBO.resize({width:ve,height:et}),this.writeFBO.resize({width:ve,height:et})}add(ve,et,an){ve.init(et,an),this.passes.push(ve)}insert(ve,et,an,cn){ve.init(an,cn),this.passes.splice(et,0,ve)}getPostProcessingPassByName(ve){return this.passes.find(et=>et.getName()===ve)}init(){const{createFramebuffer:ve,createTexture2D:et}=this.rendererService;this.readFBO=ve({color:et({width:1,height:1,wrapS:ee.CLAMP_TO_EDGE,wrapT:ee.CLAMP_TO_EDGE})}),this.writeFBO=ve({color:et({width:1,height:1,wrapS:ee.CLAMP_TO_EDGE,wrapT:ee.CLAMP_TO_EDGE})})}isLastEnabledPass(ve){for(let et=ve+1;et<this.passes.length;et++)if(this.passes[et].isEnabled())return!1;return!0}swap(){const ve=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=ve}}class pu extends qf{getType(){return he.Normal}getName(){return"render"}init(ve,et){super.init(ve,et)}render(ve){const{useFramebuffer:et,clear:an}=this.rendererService,cn=ve.multiPassRenderer.getPostProcessor().getReadFBO();et(cn,()=>{an({color:[0,0,0,0],depth:1,stencil:0,framebuffer:cn}),ve.multiPassRenderer.setRenderFlag(!1),ve.models.forEach(tr=>{tr.draw({uniforms:ve.layerModel.getUninforms()})}),ve.multiPassRenderer.setRenderFlag(!0)})}}const of=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,bf=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Tu=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function As(ie,ve){let et=0,an=1/ve,cn=ie;for(;cn>0;)et=et+an*(cn%ve),cn=Math.floor(cn/ve),an=an/ve;return et}let Xu=1;class af extends qf{constructor(ve){super(),(0,W.Z)(this,"haltonSequence",[]),(0,W.Z)(this,"accumulatingId",0),(0,W.Z)(this,"frame",0),(0,W.Z)(this,"timer",void 0),(0,W.Z)(this,"sampleRenderTarget",void 0),(0,W.Z)(this,"prevRenderTarget",void 0),(0,W.Z)(this,"outputRenderTarget",void 0),(0,W.Z)(this,"copyRenderTarget",void 0),(0,W.Z)(this,"blendModel",void 0),(0,W.Z)(this,"outputModel",void 0),(0,W.Z)(this,"copyModel",void 0),this.shaderModuleService=ve}getType(){return he.Normal}getName(){return"taa"}init(ve,et){super.init(ve,et);const{createFramebuffer:an,createTexture2D:cn}=this.rendererService;this.sampleRenderTarget=an({color:cn({width:1,height:1,wrapS:ee.CLAMP_TO_EDGE,wrapT:ee.CLAMP_TO_EDGE})}),this.prevRenderTarget=an({color:cn({width:1,height:1,wrapS:ee.CLAMP_TO_EDGE,wrapT:ee.CLAMP_TO_EDGE})}),this.outputRenderTarget=an({color:cn({width:1,height:1,wrapS:ee.CLAMP_TO_EDGE,wrapT:ee.CLAMP_TO_EDGE})}),this.copyRenderTarget=an({color:cn({width:1,height:1,wrapS:ee.CLAMP_TO_EDGE,wrapT:ee.CLAMP_TO_EDGE})});for(let tr=0;tr<30;tr++)this.haltonSequence.push([As(tr,2),As(tr,3)]);this.blendModel=this.createTriangleModel("blend-pass",of),this.outputModel=this.createTriangleModel("copy-pass",bf,{blend:{enable:!0,func:{srcRGB:ee.ONE,dstRGB:ee.ONE_MINUS_SRC_ALPHA,srcAlpha:ee.ONE,dstAlpha:ee.ONE_MINUS_SRC_ALPHA},equation:{rgb:ee.FUNC_ADD,alpha:ee.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",bf)}render(ve){const{clear:et,getViewportSize:an,useFramebuffer:cn}=this.rendererService,{width:tr,height:Or}=an();this.sampleRenderTarget.resize({width:tr,height:Or}),this.prevRenderTarget.resize({width:tr,height:Or}),this.outputRenderTarget.resize({width:tr,height:Or}),this.copyRenderTarget.resize({width:tr,height:Or}),this.resetFrame(),this.stopAccumulating();const Wr=ve.multiPassRenderer.getPostProcessor().getReadFBO();cn(Wr,()=>{et({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Wr}),ve.multiPassRenderer.setRenderFlag(!1),ve.render(),ve.multiPassRenderer.setRenderFlag(!0)});const Fi=xo=>{!this.accumulatingId||xo!==this.accumulatingId||this.isFinished()||(this.doRender(ve),window.requestAnimationFrame(()=>{Fi(xo)}))};this.accumulatingId=Xu++,this.timer=window.setTimeout(()=>{Fi(this.accumulatingId)},50)}doRender(ve){const{clear:et,getViewportSize:an,useFramebuffer:cn}=this.rendererService,{width:tr,height:Or}=an(),{jitterScale:Wr=1}=ve.getLayerConfig(),Fi=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((Fi[0]*2-1)/tr*Wr,(Fi[1]*2-1)/Or*Wr),ve.multiPassRenderer.setRenderFlag(!1),ve.hooks.beforeRender.call(),cn(this.sampleRenderTarget,()=>{et({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.sampleRenderTarget}),ve.render()}),ve.hooks.afterRender.call(),ve.multiPassRenderer.setRenderFlag(!0);const xo=ve.getLayerConfig();cn(this.outputRenderTarget,()=>{this.blendModel.draw({uniforms:{u_opacity:xo.opacity||1,u_MixRatio:this.frame===0?1:.9,u_Diffuse1:this.sampleRenderTarget,u_Diffuse2:this.frame===0?ve.multiPassRenderer.getPostProcessor().getReadFBO():this.prevRenderTarget}})}),this.frame===0&&et({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(cn(this.copyRenderTarget,()=>{this.outputModel.draw({uniforms:{u_Texture:this.outputRenderTarget}})}),cn(ve.multiPassRenderer.getPostProcessor().getReadFBO(),()=>{this.copyModel.draw({uniforms:{u_Texture:this.copyRenderTarget}})}),ve.multiPassRenderer.getPostProcessor().render(ve));const _o=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=_o,this.frame++,this.cameraService.clearJitterProjectionMatrix()}isFinished(){return this.frame>=this.haltonSequence.length}resetFrame(){this.frame=0}stopAccumulating(){this.accumulatingId=0,window.clearTimeout(this.timer)}createTriangleModel(ve,et,an){this.shaderModuleService.registerModule(ve,{vs:Tu,fs:et});const{vs:cn,fs:tr,uniforms:Or}=this.shaderModuleService.getModule(ve),{createAttribute:Wr,createBuffer:Fi,createModel:xo}=this.rendererService;return xo((0,K.Z)({vs:cn,fs:tr,attributes:{a_Position:Wr({buffer:Fi({data:[-4,-4,4,-4,0,4],type:ee.FLOAT}),size:2})},uniforms:(0,K.Z)({},Or),depth:{enable:!1},count:3},an))}}const _d=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,Jd=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Uf}=E.lodashUtil;class bd extends Ge{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Jd,fs:_d});const{vs:ve,fs:et,uniforms:an}=this.shaderModuleService.getModule("blur-pass"),{width:cn,height:tr}=this.rendererService.getViewportSize();return{vs:ve,fs:et,uniforms:(0,K.Z)((0,K.Z)({},an),{},{u_ViewportSize:[cn,tr]})}}convertOptionsToUniforms(ve){const et={};return Uf(ve.bloomRadius)||(et.u_radius=ve.bloomRadius),Uf(ve.bloomIntensity)||(et.u_intensity=ve.bloomIntensity),Uf(ve.bloomBaseRadio)||(et.u_baseRadio=ve.bloomBaseRadio),et}}const mh=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Uh=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:jh}=E.lodashUtil;class xd extends Ge{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:Uh,fs:mh});const{vs:ve,fs:et,uniforms:an}=this.shaderModuleService.getModule("blur-pass"),{width:cn,height:tr}=this.rendererService.getViewportSize();return{vs:ve,fs:et,uniforms:(0,K.Z)((0,K.Z)({},an),{},{u_ViewportSize:[cn,tr]})}}convertOptionsToUniforms(ve){const et={};return jh(ve.blurRadius)||(et.u_BlurDir=[ve.blurRadius,0]),et}}const l0=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,sf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,{isNil:Fc}=E.lodashUtil;class Ed extends Ge{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:sf,fs:l0});const{vs:ve,fs:et,uniforms:an}=this.shaderModuleService.getModule("blur-pass"),{width:cn,height:tr}=this.rendererService.getViewportSize();return{vs:ve,fs:et,uniforms:(0,K.Z)((0,K.Z)({},an),{},{u_ViewportSize:[cn,tr]})}}convertOptionsToUniforms(ve){const et={};return Fc(ve.blurRadius)||(et.u_BlurDir=[0,ve.blurRadius]),et}}const Bl=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,bc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class lf extends Ge{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:bc,fs:Bl});const{vs:ve,fs:et,uniforms:an}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:cn,height:tr}=this.rendererService.getViewportSize();return{vs:ve,fs:et,uniforms:(0,K.Z)((0,K.Z)({},an),{},{u_ViewportSize:[cn,tr]})}}}const ou=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Bc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class uc extends Ge{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:Bc,fs:ou}),this.shaderModuleService.getModule("copy-pass")}}const xf=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Ol=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class uf extends Ge{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Ol,fs:xf});const{vs:ve,fs:et,uniforms:an}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:cn,height:tr}=this.rendererService.getViewportSize();return{vs:ve,fs:et,uniforms:(0,K.Z)((0,K.Z)({},an),{},{u_ViewportSize:[cn,tr]})}}}const Ef=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Sd=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class wd extends Ge{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:Sd,fs:Ef});const{vs:ve,fs:et,uniforms:an}=this.shaderModuleService.getModule("ink-pass"),{width:cn,height:tr}=this.rendererService.getViewportSize();return{vs:ve,fs:et,uniforms:(0,K.Z)((0,K.Z)({},an),{},{u_ViewportSize:[cn,tr]})}}}const xs=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,ep=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;class Kf extends Ge{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:ep,fs:xs}),this.shaderModuleService.getModule("noise-pass")}}const Vh=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ul=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;class Hh extends Ge{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Vh,fs:ul}),this.shaderModuleService.getModule("sepia-pass")}}const gh=new gi;let vu=0;function kc(){const ie=new Up,ve=new Ji,et=new St,an=new fi(et),cn=new Oe,tr=new qt,Or=new Er,Wr=new Gr,Fi=new Qn,xo={id:`${vu++}`,globalConfigService:gh,shaderModuleService:ie,debugService:ve,cameraService:et,coordinateSystemService:an,fontService:cn,iconService:tr,markerService:Or,popupService:Wr,controlService:Fi,customRenderService:{}},_o=new Xi(xo);xo.layerService=_o;const La=new Mo(xo);xo.sceneService=La;const Na=new hn(xo);xo.interactionService=Na;const Ta=new pr(xo);xo.pickingService=Ta;const Ca={clear:new ru,pixelPicking:new rf,render:new pu,taa:new af(ie)};xo.normalPassFactory=Fa=>Ca[Fa];const xa={copy:new uc,bloom:new bd,blurH:new xd,blurV:new Ed,noise:new Kf,sepia:new Hh,colorHalftone:new lf,hexagonalPixelate:new uf,ink:new wd};return xo.postProcessingPass=xa,xo.postProcessingPassFactory=Fa=>xa[Fa],xo}function Au(ie){const ve=(0,K.Z)({},ie);return ve.postProcessor=new iu(ve.rendererService),ve.multiPassRenderer=new zf(ve.postProcessor),ve.styleAttributeService=new mi(ve.rendererService),ve}const xc=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];let Se=function(ie){return ie.IMAGE="image",ie.CUSTOMIMAGE="customImage",ie.ARRAYBUFFER="arraybuffer",ie.RGB="rgb",ie.TERRAINRGB="terrainRGB",ie.CUSTOMRGB="customRGB",ie.CUSTOMARRAYBUFFER="customArrayBuffer",ie.CUSTOMTERRAINRGB="customTerrainRGB",ie}({})},83366:function(bt,G,L){"use strict";L.d(G,{Z:function(){return qn}});var K=L(1413),W=L(4942);class E{constructor(vt){(0,W.Z)(this,"configService",void 0),(0,W.Z)(this,"config",void 0),this.config=vt}setContainer(vt,It,An){this.configService=vt.globalConfigService,vt.mapConfig=(0,K.Z)((0,K.Z)({},this.config),{},{id:It,canvas:An}),vt.mapService=new(this.getServiceConstructor())(vt)}getServiceConstructor(){throw new Error("Method not implemented.")}}var he=L(45987),ee=L(15861),se=L(85975),ue=L(77160),be=L(6158),oe=L.n(be),Ge=L(88120),te=L(66366),me=L(26729);class Pe{constructor(vt){(0,W.Z)(this,"size",1e4),this.size=vt||1e4}setSize(vt){this.size=vt}getSize(){return[this.size,this.size]}mercatorXfromLng(vt){return(180+vt)/360*this.size}mercatorYfromLat(vt){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+vt*Math.PI/360)))/360)*this.size}lngFromMercatorX(vt){return vt/this.size*360-180}latFromMercatorY(vt){const It=180-(1-vt/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(It*Math.PI/180))-90}project(vt){const It=this.mercatorXfromLng(vt[0]),An=this.mercatorYfromLat(vt[1]);return[It,An]}unproject(vt){const It=this.lngFromMercatorX(vt[0]),An=this.latFromMercatorY(vt[1]);return[It,An]}}const $={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},le={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},J=12;class Ee{constructor(vt){(0,W.Z)(this,"version","DEFAUlTMAP"),(0,W.Z)(this,"map",void 0),(0,W.Z)(this,"simpleMapCoord",new Pe),(0,W.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),(0,W.Z)(this,"config",void 0),(0,W.Z)(this,"configService",void 0),(0,W.Z)(this,"coordinateSystemService",void 0),(0,W.Z)(this,"eventEmitter",void 0),(0,W.Z)(this,"markerContainer",void 0),(0,W.Z)(this,"cameraChangedCallback",void 0),(0,W.Z)(this,"$mapContainer",void 0),(0,W.Z)(this,"handleCameraChanged",It=>{const{lat:An,lng:Dn}=this.map.getCenter();this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:this.map.getBearing(),center:[Dn,An],viewportHeight:this.map.transform.height,pitch:this.map.getPitch(),viewportWidth:this.map.transform.width,zoom:this.map.getZoom(),cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}),this.config=vt.mapConfig,this.configService=vt.globalConfigService,this.coordinateSystemService=vt.coordinateSystemService,this.eventEmitter=new me.EventEmitter}setBgColor(vt){this.bgColor=vt}addMarkerContainer(){const vt=this.map.getCanvasContainer();this.markerContainer=te.SO.create("div","l7-marker-container",vt),this.markerContainer.setAttribute("tabindex","-1")}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}on(vt,It){Ge.I9.indexOf(vt)!==-1?this.eventEmitter.on(vt,It):this.map.on(le[vt]||vt,It)}off(vt,It){this.map.off(le[vt]||vt,It),this.eventEmitter.off(vt,It)}getContainer(){return this.map.getContainer()}getMapCanvasContainer(){return this.map.getCanvasContainer()}getSize(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();const vt=this.map.transform;return[vt.width,vt.height]}getType(){return"default"}getZoom(){return this.map.getZoom()}setZoom(vt){return this.map.setZoom(vt)}getCenter(){return this.map.getCenter()}setCenter(vt){this.map.setCenter(vt)}getPitch(){return this.map.getPitch()}getRotation(){return this.map.getBearing()}getBounds(){return this.map.getBounds().toArray()}getMinZoom(){return this.map.getMinZoom()}getMaxZoom(){return this.map.getMaxZoom()}setRotation(vt){this.map.setBearing(vt)}zoomIn(vt,It){this.map.zoomIn(vt,It)}zoomOut(vt,It){this.map.zoomOut(vt,It)}setPitch(vt){return this.map.setPitch(vt)}panTo(vt){this.map.panTo(vt)}panBy(vt=0,It=0){this.map.panBy([vt,It])}fitBounds(vt,It){this.map.fitBounds(vt,It)}setMaxZoom(vt){this.map.setMaxZoom(vt)}setMinZoom(vt){this.map.setMinZoom(vt)}setMapStatus(vt){vt.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),vt.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),vt.dragEnable===!1&&this.map.dragPan.disable(),vt.dragEnable===!0&&this.map.dragPan.enable(),vt.rotateEnable===!1&&this.map.dragRotate.disable(),vt.dragEnable===!0&&this.map.dragRotate.enable(),vt.keyboardEnable===!1&&this.map.keyboard.disable(),vt.keyboardEnable===!0&&this.map.keyboard.enable(),vt.zoomEnable===!1&&this.map.scrollZoom.disable(),vt.zoomEnable===!0&&this.map.scrollZoom.enable()}setZoomAndCenter(vt,It){this.map.flyTo({zoom:vt,center:It})}setMapStyle(vt){this.map.setStyle(this.getMapStyleValue(vt))}meterToCoord(vt,It){return 1}pixelToLngLat(vt){return this.map.unproject(vt)}lngLatToPixel(vt){return this.map.project(vt)}containerToLngLat(vt){return this.map.unproject(vt)}lngLatToContainer(vt){return this.map.project(vt)}getMapStyle(){try{var vt;const It=(vt=this.map.getStyle().sprite)!==null&&vt!==void 0?vt:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(It)?It==null?void 0:It.replace(/\/\w+$/,"").replace(/sprites/,"styles"):It}catch(It){return""}}getMapStyleConfig(){return $}getMapStyleValue(vt){var It;return(It=this.getMapStyleConfig()[vt])!==null&&It!==void 0?It:vt}destroy(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(vt,...It){this.eventEmitter.emit(vt,...It)}once(vt,...It){this.eventEmitter.once(vt,...It)}getMapContainer(){return this.$mapContainer}exportMap(vt){const It=this.map.getCanvas();return vt==="jpg"?It==null?void 0:It.toDataURL("image/jpeg"):It==null?void 0:It.toDataURL("image/png")}onCameraChanged(vt){this.cameraChangedCallback=vt}creatMapContainer(vt){let It=vt;return typeof vt=="string"&&(It=document.getElementById(vt)),It}updateView(vt){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:vt.bearing,center:vt.center,viewportHeight:vt.viewportHeight,pitch:vt.pitch,viewportWidth:vt.viewportWidth,zoom:vt.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:vt=!0}=this.config;this.viewport.getZoom()>J&&vt?this.coordinateSystemService.setCoordinateSystem(Ge.lo.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(Ge.lo.LNGLAT)}}var tt=L(15671),Je=L(43144),wt=L(82963),pt=L(61120),yt=L(32531),Re=L(97326),Ce=L(97685),Ue=L(98333);function We(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function lt(dn,vt){var It=Ue.fF([],vt,dn);return Ue.bA(It,It,1/It[3]),It}function tn(dn,vt){var It=dn%vt;return It<0?vt+It:It}function Le(dn,vt,It){return It*vt+(1-It)*dn}var _t=L(31437);function Me(dn,vt){if(!dn)throw new Error(vt||"viewport-mercator-project: assertion failed.")}var nt=Math.PI,qe=nt/4,Ye=nt/180,Lt=180/nt,xt=512,Ie=4003e4,Gt=1.5;function gn(dn){return Math.pow(2,dn)}function Tn(dn){return Math.log2(dn)}function sr(dn,vt){var It=(0,Ce.Z)(dn,2),An=It[0],Dn=It[1];Me(Number.isFinite(An)&&Number.isFinite(vt)),Me(Number.isFinite(Dn)&&Dn>=-90&&Dn<=90,"invalid latitude"),vt*=xt;var Yn=An*Ye,dt=Dn*Ye,xe=vt*(Yn+nt)/(2*nt),Be=vt*(nt-Math.log(Math.tan(qe+dt*.5)))/(2*nt);return[xe,Be]}function nr(dn,vt){var It=(0,Ce.Z)(dn,2),An=It[0],Dn=It[1];vt*=xt;var Yn=An/vt*(2*nt)-nt,dt=2*(Math.atan(Math.exp(nt-Dn/vt*(2*nt)))-qe);return[Yn*Lt,dt*Lt]}function Ft(dn){var vt=dn.latitude;assert(Number.isFinite(vt));var It=Math.cos(vt*Ye);return Tn(Ie*It)-9}function Kt(dn){var vt=dn.latitude,It=dn.longitude,An=dn.zoom,Dn=dn.scale,Yn=dn.highPrecision,dt=Yn===void 0?!1:Yn;Dn=Dn!==void 0?Dn:gn(An),Me(Number.isFinite(vt)&&Number.isFinite(It)&&Number.isFinite(Dn));var xe={},Be=xt*Dn,st=Math.cos(vt*Ye),Dt=Be/360,Ot=Dt/st,Sn=Be/Ie/st;if(xe.pixelsPerMeter=[Sn,-Sn,Sn],xe.metersPerPixel=[1/Sn,-1/Sn,1/Sn],xe.pixelsPerDegree=[Dt,-Ot,Sn],xe.degreesPerPixel=[1/Dt,-1/Ot,1/Sn],dt){var er=Ye*Math.tan(vt*Ye)/st,br=Dt*er/2,$n=Be/Ie*er,Oe=$n/Ot*Sn;xe.pixelsPerDegree2=[0,-br,$n],xe.pixelsPerMeter2=[Oe,0,Oe]}return xe}function fn(dn,vt){var It=_slicedToArray(dn,3),An=It[0],Dn=It[1],Yn=It[2],dt=_slicedToArray(vt,3),xe=dt[0],Be=dt[1],st=dt[2],Dt=1,Ot=Kt({longitude:An,latitude:Dn,scale:Dt,highPrecision:!0}),Sn=Ot.pixelsPerMeter,er=Ot.pixelsPerMeter2,br=sr(dn,Dt);br[0]+=xe*(Sn[0]+er[0]*Be),br[1]+=Be*(Sn[1]+er[1]*Be);var $n=nr(br,Dt),Oe=(Yn||0)+(st||0);return Number.isFinite(Yn)||Number.isFinite(st)?[$n[0],$n[1],Oe]:$n}function Gn(dn){var vt=dn.height,It=dn.pitch,An=dn.bearing,Dn=dn.altitude,Yn=dn.center,dt=Yn===void 0?null:Yn,xe=dn.flipY,Be=xe===void 0?!1:xe,st=We();return se.translate(st,st,[0,0,-Dn]),se.scale(st,st,[1,1,1/vt]),se.rotateX(st,st,-It*Ye),se.rotateZ(st,st,An*Ye),Be&&se.scale(st,st,[1,-1,1]),dt&&se.translate(st,st,ue.tk([],dt)),st}function on(dn){var vt=dn.width,It=dn.height,An=dn.altitude,Dn=An===void 0?Gt:An,Yn=dn.pitch,dt=Yn===void 0?0:Yn,xe=dn.nearZMultiplier,Be=xe===void 0?1:xe,st=dn.farZMultiplier,Dt=st===void 0?1:st,Ot=dt*Ye,Sn=Math.atan(.5/Dn),er=Math.sin(Sn)*Dn/Math.sin(Math.PI/2-Ot-Sn),br=Math.cos(Math.PI/2-Ot)*er+Dn;return{fov:2*Math.atan(It/2/Dn),aspect:vt/It,focalDistance:Dn,near:Be,far:br*Dt}}function Pt(dn){var vt=dn.width,It=dn.height,An=dn.pitch,Dn=dn.altitude,Yn=dn.nearZMultiplier,dt=dn.farZMultiplier,xe=on({width:vt,height:It,altitude:Dn,pitch:An,nearZMultiplier:Yn,farZMultiplier:dt}),Be=xe.fov,st=xe.aspect,Dt=xe.near,Ot=xe.far,Sn=se.perspective([],Be,st,Dt,Ot);return Sn}function zt(dn,vt){var It=(0,Ce.Z)(dn,3),An=It[0],Dn=It[1],Yn=It[2],dt=Yn===void 0?0:Yn;return Me(Number.isFinite(An)&&Number.isFinite(Dn)&&Number.isFinite(dt)),lt(vt,[An,Dn,dt,1])}function ze(dn,vt){var It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,An=(0,Ce.Z)(dn,3),Dn=An[0],Yn=An[1],dt=An[2];if(Me(Number.isFinite(Dn)&&Number.isFinite(Yn),"invalid pixel coordinate"),Number.isFinite(dt)){var xe=lt(vt,[Dn,Yn,dt,1]);return xe}var Be=lt(vt,[Dn,Yn,0,1]),st=lt(vt,[Dn,Yn,1,1]),Dt=Be[2],Ot=st[2],Sn=Dt===Ot?0:((It||0)-Dt)/(Ot-Dt);return _t.t7([],Be,st,Sn)}var rt=We(),jt=function(){function dn(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},It=vt.width,An=vt.height,Dn=vt.viewMatrix,Yn=Dn===void 0?rt:Dn,dt=vt.projectionMatrix,xe=dt===void 0?rt:dt;(0,tt.Z)(this,dn),this.width=It||1,this.height=An||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=Yn,this.projectionMatrix=xe;var Be=We();se.multiply(Be,Be,this.projectionMatrix),se.multiply(Be,Be,this.viewMatrix),this.viewProjectionMatrix=Be;var st=We();se.scale(st,st,[this.width/2,-this.height/2,1]),se.translate(st,st,[1,-1,0]),se.multiply(st,st,this.viewProjectionMatrix);var Dt=se.invert(We(),st);if(!Dt)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=st,this.pixelUnprojectionMatrix=Dt,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,Je.Z)(dn,[{key:"equals",value:function(It){return It instanceof dn?It.width===this.width&&It.height===this.height&&se.equals(It.projectionMatrix,this.projectionMatrix)&&se.equals(It.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(It){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dn=An.topLeft,Yn=Dn===void 0?!0:Dn,dt=this.projectPosition(It),xe=zt(dt,this.pixelProjectionMatrix),Be=(0,Ce.Z)(xe,2),st=Be[0],Dt=Be[1],Ot=Yn?Dt:this.height-Dt;return It.length===2?[st,Ot]:[st,Ot,xe[2]]}},{key:"unproject",value:function(It){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dn=An.topLeft,Yn=Dn===void 0?!0:Dn,dt=An.targetZ,xe=(0,Ce.Z)(It,3),Be=xe[0],st=xe[1],Dt=xe[2],Ot=Yn?st:this.height-st,Sn=dt&&dt*this.pixelsPerMeter,er=ze([Be,Ot,Dt],this.pixelUnprojectionMatrix,Sn),br=this.unprojectPosition(er),$n=(0,Ce.Z)(br,3),Oe=$n[0],we=$n[1],Ve=$n[2];return Number.isFinite(Dt)?[Oe,we,Ve]:Number.isFinite(dt)?[Oe,we,dt]:[Oe,we]}},{key:"projectPosition",value:function(It){var An=this.projectFlat(It),Dn=(0,Ce.Z)(An,2),Yn=Dn[0],dt=Dn[1],xe=(It[2]||0)*this.pixelsPerMeter;return[Yn,dt,xe]}},{key:"unprojectPosition",value:function(It){var An=this.unprojectFlat(It),Dn=(0,Ce.Z)(An,2),Yn=Dn[0],dt=Dn[1],xe=(It[2]||0)/this.pixelsPerMeter;return[Yn,dt,xe]}},{key:"projectFlat",value:function(It){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return It}},{key:"unprojectFlat",value:function(It){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return It}}]),dn}();function U(dn){var vt=dn.width,It=dn.height,An=dn.bounds,Dn=dn.minExtent,Yn=Dn===void 0?0:Dn,dt=dn.maxZoom,xe=dt===void 0?24:dt,Be=dn.padding,st=Be===void 0?0:Be,Dt=dn.offset,Ot=Dt===void 0?[0,0]:Dt,Sn=(0,Ce.Z)(An,2),er=(0,Ce.Z)(Sn[0],2),br=er[0],$n=er[1],Oe=(0,Ce.Z)(Sn[1],2),we=Oe[0],Ve=Oe[1];if(Number.isFinite(st)){var it=st;st={top:it,bottom:it,left:it,right:it}}else Me(Number.isFinite(st.top)&&Number.isFinite(st.bottom)&&Number.isFinite(st.left)&&Number.isFinite(st.right));var At=new fe({width:vt,height:It,longitude:0,latitude:0,zoom:0}),qt=At.project([br,Ve]),un=At.project([we,$n]),St=[Math.max(Math.abs(un[0]-qt[0]),Yn),Math.max(Math.abs(un[1]-qt[1]),Yn)],Jt=[vt-st.left-st.right-Math.abs(Ot[0])*2,It-st.top-st.bottom-Math.abs(Ot[1])*2];Me(Jt[0]>0&&Jt[1]>0);var Qn=Jt[0]/St[0],Er=Jt[1]/St[1],Gr=(st.right-st.left)/2/Qn,mr=(st.bottom-st.top)/2/Er,Hr=[(un[0]+qt[0])/2+Gr,(un[1]+qt[1])/2+mr],wi=At.unproject(Hr),Pi=At.zoom+Math.log2(Math.abs(Math.min(Qn,Er)));return{longitude:wi[0],latitude:wi[1],zoom:Math.min(Pi,xe)}}var fe=function(dn){(0,yt.Z)(vt,dn);function vt(){var It,An=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Dn=An.width,Yn=An.height,dt=An.latitude,xe=dt===void 0?0:dt,Be=An.longitude,st=Be===void 0?0:Be,Dt=An.zoom,Ot=Dt===void 0?0:Dt,Sn=An.pitch,er=Sn===void 0?0:Sn,br=An.bearing,$n=br===void 0?0:br,Oe=An.altitude,we=Oe===void 0?1.5:Oe,Ve=An.nearZMultiplier,it=An.farZMultiplier;(0,tt.Z)(this,vt),Dn=Dn||1,Yn=Yn||1;var At=gn(Ot);we=Math.max(.75,we);var qt=sr([st,xe],At);qt[2]=0;var un=Pt({width:Dn,height:Yn,pitch:er,bearing:$n,altitude:we,nearZMultiplier:Ve||1/Yn,farZMultiplier:it||1.01}),St=Gn({height:Yn,center:qt,pitch:er,bearing:$n,altitude:we,flipY:!0});return It=(0,wt.Z)(this,(0,pt.Z)(vt).call(this,{width:Dn,height:Yn,viewMatrix:St,projectionMatrix:un})),It.latitude=xe,It.longitude=st,It.zoom=Ot,It.pitch=er,It.bearing=$n,It.altitude=we,It.scale=At,It.center=qt,It.pixelsPerMeter=Kt((0,Re.Z)((0,Re.Z)(It))).pixelsPerMeter[2],Object.freeze((0,Re.Z)((0,Re.Z)(It))),It}return(0,Je.Z)(vt,[{key:"projectFlat",value:function(An){var Dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return sr(An,Dn)}},{key:"unprojectFlat",value:function(An){var Dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return nr(An,Dn)}},{key:"getMapCenterByLngLatPosition",value:function(An){var Dn=An.lngLat,Yn=An.pos,dt=ze(Yn,this.pixelUnprojectionMatrix),xe=sr(Dn,this.scale),Be=_t.IH([],xe,_t.tk([],dt)),st=_t.IH([],this.center,Be);return nr(st,this.scale)}},{key:"getLocationAtPoint",value:function(An){var Dn=An.lngLat,Yn=An.pos;return this.getMapCenterByLngLatPosition({lngLat:Dn,pos:Yn})}},{key:"fitBounds",value:function(An){var Dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Yn=this.width,dt=this.height,xe=U(Object.assign({width:Yn,height:dt,bounds:An},Dn)),Be=xe.longitude,st=xe.latitude,Dt=xe.zoom;return new vt({width:Yn,height:dt,longitude:Be,latitude:st,zoom:Dt})}}]),vt}(jt);class at{constructor(){(0,W.Z)(this,"viewport",void 0)}syncWithMapCamera(vt){const{center:It,zoom:An,pitch:Dn,bearing:Yn,viewportHeight:dt,viewportWidth:xe}=vt;this.viewport=new fe({width:xe,height:dt,longitude:It&&It[0],latitude:It&&It[1],zoom:An,pitch:Dn,bearing:Yn})}getZoom(){return this.viewport.zoom}getZoomScale(){return Math.pow(2,this.getZoom())}getCenter(){return[this.viewport.longitude,this.viewport.latitude]}getProjectionMatrix(){return this.viewport.projectionMatrix}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}getViewMatrix(){return this.viewport.viewMatrix}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix}getFocalDistance(){return 1}projectFlat(vt,It){return this.viewport.projectFlat(vt,It)}}const de=["id","attributionControl","style","token","rotation","mapInstance"];function $t(dn,vt){var It=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,An=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(It||An)&&(vt||(vt=document),!!vt)){var Dn=vt.head||vt.getElementsByTagName("head")[0];if(!Dn){Dn=vt.createElement("head");var Yn=vt.body||vt.getElementsByTagName("body")[0];Yn?Yn.parentNode.insertBefore(Dn,Yn):vt.documentElement.appendChild(Dn)}var dt=vt.createElement("style");return dt.type="text/css",dt.styleSheet?dt.styleSheet.cssText=dn:dt.appendChild(vt.createTextNode(dn)),Dn.appendChild(dt),dt}}$t(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=oe();let sn=0;const pn="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg";class Nn extends Ee{constructor(...vt){super(...vt),(0,W.Z)(this,"version","MAPBOX"),(0,W.Z)(this,"viewport",void 0)}getType(){return"mapbox"}lngLatToCoord(vt,It={x:0,y:0,z:0}){const{x:An,y:Dn}=this.lngLatToMercator(vt,0);return[An-It.x,Dn-It.y]}lngLatToMercator(vt,It){const{x:An=0,y:Dn=0,z:Yn=0}=window.mapboxgl.MercatorCoordinate.fromLngLat(vt,It);return{x:An,y:Dn,z:Yn}}getModelMatrix(vt,It,An,Dn=[1,1,1],Yn={x:0,y:0,z:0}){const dt=window.mapboxgl.MercatorCoordinate.fromLngLat(vt,It),xe=dt.meterInMercatorCoordinateUnits(),Be=se.create();return se.translate(Be,Be,ue.al(dt.x-Yn.x,dt.y-Yn.y,dt.z||0-Yn.z)),se.scale(Be,Be,ue.al(xe*Dn[0],-xe*Dn[1],xe*Dn[2])),se.rotateX(Be,Be,An[0]),se.rotateY(Be,Be,An[1]),se.rotateZ(Be,Be,An[2]),Be}init(){var vt=this;return(0,ee.Z)(function*(){const It=vt.config,{id:An="map",attributionControl:Dn=!1,style:Yn="light",token:dt=pn,rotation:xe=0,mapInstance:Be}=It,st=(0,he.Z)(It,de);vt.viewport=new at,!Be&&!window.mapboxgl&&console.error(vt.configService.getSceneWarninfo("SDK")),dt===pn&&Yn!=="blank"&&!window.mapboxgl.accessToken&&!Be&&console.warn(vt.configService.getSceneWarninfo("MapToken")),!Be&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=dt),Be?(vt.map=Be,vt.$mapContainer=vt.map.getContainer()):(vt.$mapContainer=vt.creatMapContainer(An),vt.map=new window.mapboxgl.Map((0,K.Z)({container:vt.$mapContainer,style:vt.getMapStyleValue(Yn),attributionControl:Dn,bearing:xe},st))),vt.map.on("load",()=>{vt.handleCameraChanged()}),vt.map.on("move",vt.handleCameraChanged),vt.handleCameraChanged()})()}destroy(){var vt;(vt=this.$mapContainer)===null||vt===void 0||(vt=vt.parentNode)===null||vt===void 0||vt.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(vt,...It){this.eventEmitter.emit(vt,...It)}once(vt,...It){this.eventEmitter.once(vt,...It)}getMapContainer(){return this.$mapContainer}getCanvasOverlays(){var vt;return(vt=this.getMapContainer())===null||vt===void 0?void 0:vt.querySelector(".mapboxgl-canvas-container")}meterToCoord(vt,It){const An=new(oe()).LngLat(vt[0],vt[1]),Dn=new(oe()).LngLat(It[0],It[1]),Yn=An.distanceTo(Dn),dt=oe().MercatorCoordinate.fromLngLat({lng:vt[0],lat:vt[1]}),xe=oe().MercatorCoordinate.fromLngLat({lng:It[0],lat:It[1]}),{x:Be,y:st}=dt,{x:Dt,y:Ot}=xe;return Math.sqrt(Math.pow(Be-Dt,2)+Math.pow(st-Ot,2))*4194304*2/Yn}exportMap(vt){const It=this.map.getCanvas();return vt==="jpg"?It==null?void 0:It.toDataURL("image/jpeg"):It==null?void 0:It.toDataURL("image/png")}creatMapContainer(vt){let It=vt;typeof vt=="string"&&(It=document.getElementById(vt));const An=document.createElement("div");return An.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,An.id="l7_mapbox_div"+sn++,It.appendChild(An),An}}function Wn(dn,vt){var It=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,An=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(It||An)&&(vt||(vt=document),!!vt)){var Dn=vt.head||vt.getElementsByTagName("head")[0];if(!Dn){Dn=vt.createElement("head");var Yn=vt.body||vt.getElementsByTagName("body")[0];Yn?Yn.parentNode.insertBefore(Dn,Yn):vt.documentElement.appendChild(Dn)}var dt=vt.createElement("style");return dt.type="text/css",dt.styleSheet?dt.styleSheet.cssText=dn:dt.appendChild(vt.createTextNode(dn)),Dn.appendChild(dt),dt}}Wn(`.mapboxgl-ctrl-logo {
  display: none !important;
}
`);class qn extends E{getServiceConstructor(){return Nn}}},4771:function(){},66366:function(bt,G,L){"use strict";L.d(G,{SO:function(){return K},z6:function(){return gh},a5:function(){return W},SA:function(){return E},nx:function(){return Jf},Z:function(){return ll},rQ:function(){return Le},bV:function(){return tn},zi:function(){return _t},ds:function(){return pu},oO:function(){return iu},SI:function(){return Jd},Rx:function(){return Uf},W0:function(){return Ye},LS:function(){return Ha},Z6:function(){return Lt},We:function(){return Wt},Co:function(){return lt},hj:function(){return Gt},Cl:function(){return xt},Oc:function(){return Tn},M4:function(){return Ie},NJ:function(){return gn},ks:function(){return Je},Ol:function(){return bd},fj:function(){return Kt},Yu:function(){return pt},ZB:function(){return nr},gJ:function(){return We},z0:function(){return Tf},jG:function(){return eh},M8:function(){return jh},fg:function(){return ai},if:function(){return Ct},vP:function(){return qi},lodashUtil:function(){return Jt},LF:function(){return J},Fv:function(){return of},yA:function(){return rf},CI:function(){return qe}});var K={};L.r(K),L.d(K,{DPR:function(){return Ht},addClass:function(){return wr},addStyle:function(){return hn},appendElementType:function(){return Xi},clearChildren:function(){return hr},create:function(){return wi},css2Style:function(){return yn},empty:function(){return ea},findParentElement:function(){return io},getClass:function(){return Ai},getContainer:function(){return Er},getDiffRect:function(){return On},getStyleList:function(){return Fn},getViewPortScale:function(){return ht},hasClass:function(){return di},printCanvas:function(){return $e},remove:function(){return Pi},removeClass:function(){return gi},removeStyle:function(){return Bn},setChecked:function(){return pr},setClass:function(){return xi},setTransform:function(){return fi},setUnDraggable:function(){return oi},splitWords:function(){return mr},toggleClass:function(){return Fo},triggerResize:function(){return Ji},trim:function(){return Gr}});var W={};L.r(W),L.d(W,{getColumn:function(){return ve},getSatByColumn:function(){return et},max:function(){return vu},mean:function(){return xc},min:function(){return kc},mode:function(){return Se},statMap:function(){return ie},sum:function(){return Au}});var E={REGISTERED_PROTOCOLS:{}},he=Object.defineProperty,ee=Object.defineProperties,se=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,Ge=(ce,He,Et)=>He in ce?he(ce,He,{enumerable:!0,configurable:!0,writable:!0,value:Et}):ce[He]=Et,te=(ce,He)=>{for(var Et in He||(He={}))be.call(He,Et)&&Ge(ce,Et,He[Et]);if(ue)for(var Et of ue(He))oe.call(He,Et)&&Ge(ce,Et,He[Et]);return ce},me=(ce,He)=>ee(ce,se(He)),Pe=ce=>E.REGISTERED_PROTOCOLS[ce.substring(0,ce.indexOf("://"))],$=class extends Error{constructor(ce,He,Et,Pn){super(`AJAXError: ${He} (${ce}): ${Et}`),this.status=ce,this.statusText=He,this.url=Et,this.body=Pn}};function le(ce,He){const Et=new XMLHttpRequest,Pn=Array.isArray(ce.url)?ce.url[0]:ce.url;Et.open(ce.method||"GET",Pn,!0),ce.type==="arrayBuffer"&&(Et.responseType="arraybuffer");for(const ur in ce.headers)ce.headers.hasOwnProperty(ur)&&Et.setRequestHeader(ur,ce.headers[ur]);return ce.type==="json"&&(Et.responseType="text",Et.setRequestHeader("Accept","application/json")),Et.withCredentials=ce.credentials==="include",Et.onerror=()=>{He(new Error(Et.statusText))},Et.onload=()=>{if((Et.status>=200&&Et.status<300||Et.status===0)&&Et.response!==null){let ur=Et.response;if(ce.type==="json")try{ur=JSON.parse(Et.response)}catch(zr){return He(zr)}He(null,ur,Et.getResponseHeader("Cache-Control"),Et.getResponseHeader("Expires"),Et)}else{const ur=new Blob([Et.response],{type:Et.getResponseHeader("Content-Type")});He(new $(Et.status,Et.statusText,Pn.toString(),ur))}},Et.cancel=Et.abort,Et.send(ce.body),Et}function J(ce){return new Promise((He,Et)=>{le(ce,(Pn,ur,zr,pi,Ii)=>{Pn?Et({err:Pn,data:null,xhr:Ii}):He({err:null,data:ur,cacheControl:zr,expires:pi,xhr:Ii})})})}function Ee(ce,He){return le(ce,He)}var tt=(ce,He)=>(Pe(ce.url)||Ee)(me(te({},ce),{type:"json"}),He),Je=(ce,He)=>(Pe(ce.url)||Ee)(me(te({},ce),{type:"arrayBuffer"}),He),wt=(ce,He)=>Ee(me(te({},ce),{method:"POST"}),He),pt=(ce,He)=>Ee(me(te({},ce),{method:"GET"}),He);function yt(ce){const He=window.document.createElement("a");return He.href=ce,He.protocol===window.document.location.protocol&&He.host===window.document.location.host}var Re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ce(ce,He){const Et=new window.Image,Pn=window.URL||window.webkitURL;Et.crossOrigin="anonymous",Et.onload=()=>{He(null,Et),Pn.revokeObjectURL(Et.src),Et.onload=null,window.requestAnimationFrame(()=>{Et.src=Re})},Et.onerror=()=>He(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ur=new Blob([new Uint8Array(ce)],{type:"image/png"});Et.src=ce.byteLength?Pn.createObjectURL(ur):Re}function Ue(ce,He){const Et=new Blob([new Uint8Array(ce)],{type:"image/png"});createImageBitmap(Et).then(Pn=>{He(null,Pn)}).catch(Pn=>{He(new Error(`Could not load image because of ${Pn.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}var We=(ce,He,Et)=>{const Pn=(ur,zr)=>{if(ur)He(ur);else if(zr){const pi=typeof createImageBitmap=="function",Ii=Et?Et(zr):zr;pi?Ue(Ii,He):Ce(Ii,He)}};return ce.type==="json"?tt(ce,Pn):Je(ce,Pn)},lt=(ce,He)=>{typeof createImageBitmap=="function"?Ue(ce,He):Ce(ce,He)},tn=(ce=>(ce.CENTER="center",ce.TOP="top",ce["TOP-LEFT"]="top-left",ce["TOP-RIGHT"]="top-right",ce.BOTTOM="bottom",ce["BOTTOM-LEFT"]="bottom-left",ce["BOTTOM-RIGHT"]="bottom-right",ce.LEFT="left",ce.RIGHT="right",ce))(tn||{}),Le={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _t(ce,He,Et){const Pn=ce.classList;for(const ur in Le)Le.hasOwnProperty(ur)&&Pn.remove(`l7-${Et}-anchor-${ur}`);Pn.add(`l7-${Et}-anchor-${He}`)}var Me=L(37620);function nt(ce){return typeof ce=="string"?!!d3.color(ce):!1}function qe(ce){const He=Me.ZP(ce),Et=[0,0,0,0];return He!=null&&(Et[0]=He.r/255,Et[1]=He.g/255,Et[2]=He.b/255,Et[3]=He.opacity),Et}function Ye(ce){const He=ce&&ce[0],Et=ce&&ce[1],Pn=ce&&ce[2];return He+Et*256+Pn*65536-1}function Lt(ce){return[ce+1&255,ce+1>>8&255,ce+1>>8>>8&255]}function xt(ce){let He=window.document.createElement("canvas"),Et=He.getContext("2d");He.width=256,He.height=1;let Pn=null;const ur=Et.createLinearGradient(0,0,256,1),zr=ce.positions[0],pi=ce.positions[ce.positions.length-1];for(let Ii=0;Ii<ce.colors.length;++Ii){const Zo=(ce.positions[Ii]-zr)/(pi-zr);ur.addColorStop(Zo,ce.colors[Ii])}return Et.fillStyle=ur,Et.fillRect(0,0,256,1),Pn=new Uint8ClampedArray(Et.getImageData(0,0,256,1).data),He=null,Et=null,{data:Pn,width:256,height:1}}function Ie(ce,He){let Et=window.document.createElement("canvas"),Pn=Et.getContext("2d");Et.width=256,Et.height=1;const ur=Pn.createLinearGradient(0,0,256,1),zr=He[1]-He[0];for(let Zo=0;Zo<ce.colors.length;++Zo){const Go=Math.max((ce.positions[Zo]-He[0])/zr,0);ur.addColorStop(Go,ce.colors[Zo])}Pn.fillStyle=ur,Pn.fillRect(0,0,256,1);const pi=Pn.getImageData(0,0,256,1).data,Ii=sr(Pn,pi);return Et=null,Pn=null,Ii}function Gt(ce){let He=window.document.createElement("canvas"),Et=He.getContext("2d");He.width=256,He.height=1;const Pn=Et.createImageData(256,1);return Pn.data.fill(0),ce.positions.forEach((ur,zr)=>{const pi=qe(ce.colors[zr]);Pn.data[ur*4+0]=pi[0]*255,Pn.data[ur*4+1]=pi[1]*255,Pn.data[ur*4+2]=pi[2]*255,Pn.data[ur*4+3]=pi[3]*255}),He=null,Et=null,Pn}function gn(ce){let He=window.document.createElement("canvas"),Et=He.getContext("2d");Et.globalAlpha=1,He.width=256,He.height=1;const Pn=256/ce.colors.length;for(let pi=0;pi<ce.colors.length;pi++)Et.beginPath(),Et.lineWidth=2,Et.strokeStyle=ce.colors[pi],Et.moveTo(pi*Pn,0),Et.lineTo((pi+1)*Pn,0),Et.stroke();const ur=Et.getImageData(0,0,256,1).data,zr=sr(Et,ur);return He=null,Et=null,zr}function Tn(ce,He){let Et=window.document.createElement("canvas"),Pn=Et.getContext("2d");Pn.globalAlpha=1,Et.width=256,Et.height=1;const ur=He[1]-He[0];ce.positions.length-ce.colors.length!==1&&console.warn("positions \u7684\u6570\u5B57\u4E2A\u6570\u5E94\u5F53\u6BD4 colors \u7684\u6837\u5F0F\u591A\u4E00\u4E2A,poisitions \u7684\u9996\u5C3E\u503C\u4E00\u822C\u4E3A\u6570\u636E\u7684\u6700\u5927\u6700\u65B0\u503C");for(let Ii=0;Ii<ce.colors.length;Ii++)Pn.beginPath(),Pn.lineWidth=2,Pn.strokeStyle=ce.colors[Ii],Pn.moveTo((ce.positions[Ii]-He[0])/ur*255,0),Pn.lineTo((ce.positions[Ii+1]-He[0])/ur*255,0),Pn.stroke();const zr=Pn.getImageData(0,0,256,1).data,pi=sr(Pn,zr);return Et=null,Pn=null,pi}function sr(ce,He){const Et=ce.createImageData(256,1);for(let Pn=0;Pn<Et.data.length;Pn+=4)Et.data[Pn+0]=He[Pn+0],Et.data[Pn+1]=He[Pn+1],Et.data[Pn+2]=He[Pn+2],Et.data[Pn+3]=He[Pn+3];return Et}function nr(ce){switch(ce==null?void 0:ce.type){case"cat":return[0,255];default:return[0,1]}}var Ft={BACK:1029,FRONT:1028};function Kt(ce){switch(ce){case"GAODE1.x":return Ft.BACK;case"GAODE2.x":return Ft.BACK;case"MAPBOX":return Ft.FRONT;case"SIMPLE":return Ft.FRONT;case"GLOBEL":return Ft.BACK;case"DEBAULT":return Ft.FRONT;default:return Ft.FRONT}}var fn=L(74691),Gn=L.n(fn),on=L(50361),Pt=L.n(on),zt=L(23279),ze=L.n(zt),rt=L(27361),jt=L.n(rt),U=L(51584),fe=L.n(U),at=L(18446),de=L.n(at),$t=L(14293),sn=L.n($t),pn=L(81763),Nn=L.n(pn),Wn=L(68630),qn=L.n(Wn),dn=L(47037),vt=L.n(dn),It=L(36719),An=L.n(It),Dn=L(82492),Yn=L.n(Dn),dt=L(30236),xe=L.n(dt),Be=L(97019),st=L.n(Be),Dt=L(23493),Ot=L.n(Dt),Sn=L(44908),er=L.n(Sn),br=L(11700),$n=L.n(br),Oe=L(23560),we=L.n(Oe),Ve=L(13218),it=L.n(Ve),At=L(52353),qt=L.n(At),un=L(68929),St=L.n(un),Jt={isNil:sn(),merge:Yn(),throttle:Ot(),isString:vt(),debounce:ze(),pull:st(),isTypedArray:An(),isPlainObject:qn(),isNumber:Nn(),isBoolean:fe(),isEqual:de(),cloneDeep:Pt(),uniq:er(),clamp:Gn(),upperFirst:$n(),get:jt(),mergeWith:xe(),isFunction:we(),isObject:it(),isUndefined:qt(),camelCase:St()},{pull:Qn}=Jt;function Er(ce){let He=ce;return typeof ce=="string"&&(He=window.document.getElementById(ce)),He}function Gr(ce){return ce.trim?ce.trim():ce.replace(/^\s+|\s+$/g,"")}function mr(ce){return Gr(ce).split(/\s+/)}function Hr(ce){var He;const Et=(He=document==null?void 0:document.documentElement)==null?void 0:He.style;if(!Et)return ce[0];for(const Pn in ce)if(ce[Pn]&&ce[Pn]in Et)return ce[Pn];return ce[0]}function wi(ce,He,Et){const Pn=window.document.createElement(ce);return He&&(Pn.className=He||""),Et&&Et.appendChild(Pn),Pn}function Pi(ce){const He=ce.parentNode;He&&He.removeChild(ce)}function wr(ce,He){if(ce.classList!==void 0){const Et=mr(He);for(let Pn=0,ur=Et.length;Pn<ur;Pn++)ce.classList.add(Et[Pn])}else if(!di(ce,He)){const Et=Ai(ce);xi(ce,(Et?Et+" ":"")+He)}}function gi(ce,He){ce.classList!==void 0?mr(He).forEach(Pn=>{ce.classList.remove(Pn)}):xi(ce,Gr((" "+Ai(ce)+" ").replace(" "+He+" "," ")))}function di(ce,He){if(ce.classList!==void 0)return ce.classList.contains(He);const Et=Ai(ce);return Et.length>0&&new RegExp("(^|\\s)"+He+"(\\s|$)").test(Et)}function xi(ce,He){ce instanceof HTMLElement?ce.className=He:ce.className.baseVal=He}function Fo(ce,He,Et){Et===void 0?di(ce,He)?gi(ce,He):wr(ce,He):Et?wr(ce,He):gi(ce,He)}function Ai(ce){return ce instanceof SVGElement&&(ce=ce.correspondingElement),ce.className.baseVal===void 0?ce.className:ce.className.baseVal}function ea(ce){for(;ce&&ce.firstChild;)ce.removeChild(ce.firstChild)}var _a=Hr(["transform","WebkitTransform"]);function fi(ce,He){ce.style[_a]=He}function Ji(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{const ce=window.document.createEvent("UIEvents");ce.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(ce)}}function $e(ce){const He=["padding: "+(ce.height/2-8)+"px "+ce.width/2+"px;","line-height: "+ce.height+"px;","background-image: url("+ce.toDataURL()+");"];console.log(`%c
`,He.join(""))}function ht(){var ce;const He=window.document.querySelector('meta[name="viewport"]');if(!He)return 1;const Pn=((ce=He.content)==null?void 0:ce.split(",")).find(ur=>{const[zr]=ur.split("=");return zr==="initial-scale"});return Pn?Pn.split("=")[1]*1:1}var Ht=ht()<1?1:window.devicePixelRatio;function hn(ce,He){ce.setAttribute("style",`${ce.style.cssText}${He}`)}function Fn(ce){return ce.split(";").map(He=>He.trim()).filter(He=>He)}function Bn(ce,He){var Et;const Pn=Fn((Et=ce.getAttribute("style"))!=null?Et:""),ur=Fn(He),zr=Qn(Pn,...ur);ce.setAttribute("style",zr.join(";"))}function yn(ce){return Object.entries(ce).map(([He,Et])=>`${He}: ${Et}`).join(";")}function On(ce,He){return{left:ce.left-He.left,top:ce.top-He.top,right:He.left+He.width-ce.left-ce.width,bottom:He.top+He.height-ce.top-ce.height}}function pr(ce,He){ce.checked=He,He?ce.setAttribute("checked","true"):ce.removeAttribute("checked")}function hr(ce){ce.innerHTML=""}function oi(ce){ce.setAttribute("draggable","false")}function Xi(ce,He){if(typeof He=="string"){const Et=document.createElement("div");for(Et.innerHTML=He;Et.firstChild;)ce.append(Et.firstChild)}else Array.isArray(He)?ce.append(...He):ce.append(He)}function io(ce,He){var Et;const Pn=Array.isArray(He)?He:[He];let ur=ce;for(;ur instanceof Element&&ur!==window.document.body;){if(Pn.find(zr=>ur==null?void 0:ur.matches(zr)))return ur;ur=(Et=ur==null?void 0:ur.parentElement)!=null?Et:null}}function ai(ce){return typeof ImageBitmap!="undefined"&&ce instanceof ImageBitmap}function Yi(){return typeof importScripts=="function"}var ji=Yi()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Yr=navigator==null?void 0:navigator.userAgent,To=!!Yr.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),mi=Yr.indexOf("Android")>-1||Yr.indexOf("Adr")>-1;function wo(){const ce=Yr,He=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let Et=!0;for(const Pn of He)if(ce.indexOf(Pn)>0){Et=!1;break}return Et}function $i(ce,He){ce.forEach(Et=>{He[Et]&&(He[Et]=He[Et].bind(He))})}var co=class{constructor(ce=16){this.duration=16,this.timestamp=new Date().getTime(),this.duration=ce}run(ce){const He=new Date().getTime(),Et=He-this.timestamp;this.timestamp=He,Et>=this.duration&&ce()}},Mo=L(39034);function bs(ce){var He=[1/0,1/0,-1/0,-1/0];return(0,Mo.pZ)(ce,function(Et){He[0]>Et[0]&&(He[0]=Et[0]),He[1]>Et[1]&&(He[1]=Et[1]),He[2]<Et[0]&&(He[2]=Et[0]),He[3]<Et[1]&&(He[3]=Et[1])}),He}bs.default=bs;var ba=bs,ra=L(1449);function ms(ce){return typeof ce=="number"}var ls=2*Math.PI*6378137/2;function Ct(ce,He){const[Et,Pn,ur,zr]=He;return ce.lng>Et&&ce.lng<=ur&&ce.lat>Pn&&ce.lat<=zr}function Wt(ce){const He=[1/0,1/0,-1/0,-1/0];return ce.forEach(Et=>{const{coordinates:Pn}=Et;jn(He,Pn)}),He}function jn(ce,He){return Array.isArray(He[0])?He.forEach(Et=>{jn(ce,Et)}):(ce[0]>He[0]&&(ce[0]=He[0]),ce[1]>He[1]&&(ce[1]=He[1]),ce[2]<He[0]&&(ce[2]=He[0]),ce[3]<He[1]&&(ce[3]=He[1])),ce}function kr(ce,He){return Ci(ce,He)}function Ci(ce,He){return Array.isArray(ce[0])?ce.map(Et=>Ci(Et,He)):He(ce)}function qi(ce,He=!0,Et={enable:!0,decimal:1}){ce=ks(ce,He);const Pn=ce[0],ur=ce[1];let zr=Pn*ls/180,pi=Math.log(Math.tan((90+ur)*Math.PI/360))/(Math.PI/180);return pi=pi*ls/180,Et.enable&&(zr=Number(zr.toFixed(Et.decimal)),pi=Number(pi.toFixed(Et.decimal))),ce.length===3?[zr,pi,ce[2]]:[zr,pi]}function ta(ce,He=6){const Et=ce[0],Pn=ce[1];let ur=Et/ls*180,zr=Pn/ls*180;return zr=180/Math.PI*(2*Math.atan(Math.exp(zr*Math.PI/180))-Math.PI/2),He!=null&&(ur=Number(ur.toFixed(He)),zr=Number(zr.toFixed(He))),ce.length===3?[ur,zr,ce[2]]:[ur,zr]}function Us(ce){if(ce==null)throw new Error("lng is required");return(ce>180||ce<-180)&&(ce=ce%360,ce>180&&(ce=-360+ce),ce<-180&&(ce=360+ce),ce===0&&(ce=0)),ce}function Ls(ce){if(ce==null)throw new Error("lat is required");return(ce>90||ce<-90)&&(ce=ce%180,ce>90&&(ce=-180+ce),ce<-90&&(ce=180+ce),ce===0&&(ce=0)),ce}function ks(ce,He){if(He===!1)return ce;const Et=Us(ce[0]);let Pn=Ls(ce[1]);return Pn>85&&(Pn=85),Pn<-85&&(Pn=-85),ce.length===3?[Et,Pn,ce[2]]:[Et,Pn]}function ll(ce){const He=85.0511287798,Et=Math.max(Math.min(He,ce[1]),-He),Pn=256<<20;let ur=Math.PI/180,zr=ce[0]*ur,pi=Et*ur;pi=Math.log(Math.tan(Math.PI/4+pi/2));const Ii=.5/Math.PI,Zo=.5,Go=-.5/Math.PI;return ur=.5,zr=Pn*(Ii*zr+Zo),pi=Pn*(Go*pi+ur),[Math.floor(zr),Math.floor(pi)]}function zh(ce){const He=.5/Math.PI,Et=.5,Pn=-.5/Math.PI;let ur=.5;const zr=256<<20;let[pi,Ii]=ce;pi=(pi/zr-Et)/He,Ii=(Ii/zr-ur)/Pn,Ii=(Math.atan(Math.pow(Math.E,Ii))-Math.PI/4)*2,ur=Math.PI/180;const Zo=Ii/ur;return[pi/ur,Zo]}function Up(ce,He){const Et=85.0511287798,Pn=Math.PI/180,ur=6378137;return He=Math.max(Math.min(Et,He),-Et),ce*=Pn,He*=Pn,He=Math.log(Math.tan(Math.PI/4+He/2)),[ce*ur,He*ur]}function qf(ce,He){const Et=Math.PI/180,Pn=6378137,ur=ce/Pn/Et,zr=2*(Math.atan(Math.exp(He/Pn))-Math.PI/4)/Et;return[ur,zr]}function ru(ce,He,Et){const Pn=degreesToRadians(He[1]-ce[1]),ur=degreesToRadians(He[0]-ce[0]),zr=degreesToRadians(ce[1]),pi=degreesToRadians(He[1]),Ii=Math.pow(Math.sin(Pn/2),2)+Math.pow(Math.sin(ur/2),2)*Math.cos(zr)*Math.cos(pi);return radiansToLength(2*Math.atan2(Math.sqrt(Ii),Math.sqrt(1-Ii)),Et="meters")}function zf(ce){const He=Math.PI/180,Et=85.0511287798,Pn=6378137,ur=Math.max(Math.min(Et,ce[1]),-Et),zr=Math.sin(ur*He),pi=Pn*ce[0]*He,Ii=Pn*Math.log((1+zr)/(1-zr))/2;return[pi,Ii]}function rf(ce,He){const Et=Math.abs(ce[1][1]-ce[0][1])*He,Pn=Math.abs(ce[1][0]-ce[0][0])*He;return[[ce[0][0]-Pn,ce[0][1]-Et],[ce[1][0]+Pn,ce[1][1]+Et]]}function iu(ce,He){return ce[0][0]<=He[0][0]&&ce[0][1]<=He[0][1]&&ce[1][0]>=He[1][0]&&ce[1][1]>=He[1][1]}function pu(ce){return[[ce[0],ce[1]],[ce[2],ce[3]]]}function of(ce){const He=bf(ce,[0,0]);return[ce[0]/He,ce[1]/He]}function bf(ce,He){return Math.sqrt(Math.pow(ce[0]-He[0],2)+Math.pow(ce[1]-He[1],2))}function Tu(ce,He){return ce[0]*He[0]+ce[1]*He[1]}function As(ce){return Math.sqrt(ce[0]*ce[0]+ce[1]*ce[1])}function Xu(ce,He){return Math.acos(Tu(ce,He)/(As(ce)*As(He)))*180/Math.PI}function af(ce,He){return He[0]>0?He[1]>0?90-Math.atan(He[1]/He[0])*180/Math.PI:90+Math.atan(-He[1]/He[0])*180/Math.PI:He[1]<0?180+(90-Math.atan(He[1]/He[0])*180/Math.PI):270+Math.atan(He[1]/-He[0])*180/Math.PI}function _d(ce,He=100){if(!ce||ce.length<2)return;const Et=[0,1];let Pn=0;const ur=[];for(let zr=0;zr<ce.length-1;zr++){const pi=ce[zr],Ii=ce[zr+1],Zo=bf(pi,Ii);Pn+=Zo;const Go=[pi[0]-Ii[0],pi[1]-Ii[1]];let la=af(Et,Go);if(zr>0){const Js=ur[zr-1].rotation;Js-la>360-Js+la&&(la=la+360)}ur.push({start:pi,end:Ii,dis:Zo,rotation:la,duration:0})}return ur.map(zr=>{zr.duration=He*(zr.dis/Pn)}),ur}function Jd(ce){if(ms(ce[0]))return ce;if(ms(ce[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(ms(ce[0][0][0])){const He=ce;let Et=0,Pn=0,ur=0;return He.forEach(zr=>{zr.forEach(pi=>{Et+=pi[0],Pn+=pi[1],ur++})}),[Et/ur,Pn/ur,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function Uf(ce){let He=ce[0],Et=ce[1],Pn=ce[0],ur=ce[1],zr=0,pi=0,Ii=0;for(let Zo=0;Zo<ce.length;Zo+=2){const Go=ce[Zo],la=ce[Zo+1];Go&&la&&(He=Math.max(Go,He),Et=Math.max(la,Et),Pn=Math.min(Go,Pn),ur=Math.min(la,ur),zr+=Go,pi+=la,Ii++)}return{center:[zr/Ii,pi/Ii],radius:Math.sqrt(Math.pow(He-Pn,2)+Math.pow(Et-ur,2))/2}}function bd(ce){return ba((0,ra.uf)([(0,ra.Tu)(ce)]))}function mh(ce){let Pn=0;ce+="x";const ur=Math.floor(9007199254740991/137);for(let zr=0;zr<ce.length;zr++)Pn>ur&&(Pn=Math.floor(Pn/137)),Pn=Pn*131+ce.charCodeAt(zr);return Pn}function Uh(ce){ce=ce.toString();let He=5381,Et=ce.length;for(;Et;)He=He*33^ce.charCodeAt(--Et);return He>>>0}function jh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,ce=>{const He=Math.random()*16|0;return(ce==="x"?He:He&3|8).toString(16)})}var xd=(ce=>(ce["GAODE1.x"]="GAODE1.x",ce["GAODE2.x"]="GAODE2.x",ce.MAPBOX="MAPBOX",ce.DEFAULT="DEFAUlTMAP",ce.SIMPLE="SIMPLE",ce.GLOBEL="GLOBEL",ce))(xd||{});function l0(ce,He,Et,Pn,ur,zr=30,pi){let Ii=Et;return pi&&(Ii=Math.round(Et*(zr-1))/(zr-1)),Pn?Bl(ce,He,Ii,Pn,ur):Bl(ce,He,Ii,.314,ur)}function sf(ce,He){const Et=1-He;return(ce[0]*Et+ce[1]*He)*Et+(ce[1]*Et+ce[2]*He)*He}function Fc(ce,He){return Math.sqrt(Math.pow(ce[0]-He[0],2)+Math.pow(ce[1]-He[1],2))}function Ed(ce,He,Et){const Pn=[He[0]-ce[0],He[1]-ce[1]],ur=Fc(Pn,[0,0]),zr=Math.atan2(Pn[1],Pn[0]),pi=ur/2/Math.cos(Et),Ii=zr+Et;return[pi*Math.cos(Ii)+ce[0],pi*Math.sin(Ii)+ce[1]]}function Bl(ce,He,Et,Pn,ur){if(ur===MapType["GAODE2.x"]){const zr=amap2Project(ce[0],ce[1]),pi=amap2Project(He[0],He[1]),Ii=Ed(zr,pi,Pn),Zo=[zr[0],Ii[0],pi[0]],Go=[zr[1],Ii[1],pi[1]];return[...amap2UnProject(sf(Zo,Et),sf(Go,Et)),0]}else{const zr=Ed(ce,He,Pn),pi=[ce[0],zr[0],He[0]],Ii=[ce[1],zr[1],He[1]];return[sf(pi,Et),sf(Ii,Et),0]}}function bc(ce,He,Et,Pn,ur,zr=30,pi){let Ii=Et;return pi&&(Ii=Math.round(Et*29)/29),uc(ce,He,Ii,ur)}function lf(ce,He){const Et=[He[0]-ce[0],He[1]-ce[1]],Pn=calDistance(Et,[0,0]),ur=Math.atan2(Et[1],Et[0]),zr=.314,pi=Pn/2/Math.cos(zr),Ii=ur+zr;return[pi*Math.cos(Ii)+ce[0],pi*Math.sin(Ii)+ce[1]]}function ou(ce,He){const Et=1-He;return(ce[0]*Et+ce[1]*He)*Et+(ce[1]*Et+ce[2]*He)*He}function Bc(ce,He){const Et=[ce[0]-He[0],ce[1]-He[1]],Pn=[Math.sin(Et[0]/2),Math.sin(Et[1]/2)],ur=Pn[1]*Pn[1]+Math.cos(ce[1])*Math.cos(He[1])*Pn[0]*Pn[0];return 2*Math.atan2(Math.sqrt(ur),Math.sqrt(1-ur))}function uc(ce,He,Et,Pn){const ur=[degreesToRadians(ce[0]),degreesToRadians(ce[1])],zr=[degreesToRadians(He[0]),degreesToRadians(He[1])];if(Pn==="GAODE2.x"){const pi=lf(ur,zr),Ii=[ur[0],pi[0],zr[0]],Zo=[ur[1],pi[1],zr[1]];return[ou(Ii,Et),ou(Zo,Et),0]}else{const pi=Bc(ur,zr);if(Math.abs(pi-Math.PI)<.001)return[(1-Et)*ur[0]+Et*zr[0],(1-Et)*ur[1]+Et*zr[1]];const Ii=Math.sin((1-Et)*pi)/Math.sin(pi),Zo=Math.sin(Et*pi)/Math.sin(pi),Go=[Math.sin(ur[0]),Math.sin(ur[1])],la=[Math.cos(ur[0]),Math.cos(ur[1])],Js=[Math.sin(zr[0]),Math.sin(zr[1])],bl=[Math.cos(zr[0]),Math.cos(zr[1])],Es=Ii*la[1]*la[0]+Zo*bl[1]*bl[0],oo=Ii*la[1]*Go[0]+Zo*bl[1]*Js[0],Ml=Ii*Go[1]+Zo*Js[1];return[radiansToDegrees(Math.atan2(oo,Es)),radiansToDegrees(Math.atan2(Ml,Math.sqrt(Es*Es+oo*oo)))]}}function xf(ce,He){let Et=0;const Pn=[];for(let Ii=0;Ii<ce.length-1;Ii++){const Zo=ce[Ii],Go=ce[Ii+1],la=uf(Zo,Go),Js=Et;Et+=la,Pn.push({p1:Zo,p2:Go,totalDistance:Et,distance:la,lastTotalDistance:Js})}const ur=Et*He;let zr,pi;for(const Ii of Pn)if(Ii.totalDistance>ur){const Go=Ii.p1,la=Ii.p2,Js=(ur-Ii.lastTotalDistance)/Ii.distance,bl=Ol(la,Go,Js);zr=bl[0],pi=bl[1];break}return{lng:zr,lat:pi,height:0}}function Ol(ce,He,Et){return[ce[0]*Et+He[0]*(1-Et),ce[1]*Et+He[1]*(1-Et)]}function uf(ce,He){return Math.sqrt(Math.pow(ce[0]-He[0],2)+Math.pow(ce[1]-He[1],2))}var Ef=Object.defineProperty,Sd=Object.getOwnPropertySymbols,wd=Object.prototype.hasOwnProperty,xs=Object.prototype.propertyIsEnumerable,ep=(ce,He,Et)=>He in ce?Ef(ce,He,{enumerable:!0,configurable:!0,writable:!0,value:Et}):ce[He]=Et,Kf=(ce,He)=>{for(var Et in He||(He={}))wd.call(He,Et)&&ep(ce,Et,He[Et]);if(Sd)for(var Et of Sd(He))xs.call(He,Et)&&ep(ce,Et,He[Et]);return ce};function Vh(ce,He){const{featureId:Et}=He;let Pn=ce.data.dataArray;return typeof Et=="number"&&(Pn=Pn.filter(({id:ur})=>ur===Et)),Pn.map(ur=>{const zr=Hh(ur,He);return Kf(Kf({},ur),zr)})}function ul(ce,He){return new Promise(Et=>{ce.inited?Et(Vh(ce,He)):ce.once("update",()=>{Et(Vh(ce,He))})})}function Hh(ce,He){const{offset:Et,shape:Pn,thetaOffset:ur,mapVersion:zr,segmentNumber:pi=30,autoFit:Ii=!0}=He,{coordinates:Zo}=ce;if(Pn==="line")return pathLineAtOffset(Zo,Et);const Go=Zo[0],la=Zo[1],Js=typeof ur=="string"?ce[ur]||0:ur;let bl;switch(Pn){case"arc":bl=arcLineAtOffset;break;case"greatcircle":bl=greatCircleLineAtOffset;break;default:bl=arcLineAtOffset}const[Es,oo,Ml]=bl(Go,la,Et,Js,zr,pi,Ii);return{lng:Es,lat:oo,height:Ml}}var gh=class{constructor(ce=50,He){this.limit=ce,this.destroy=He||this.defaultDestroy,this.order=[],this.clear()}clear(){this.order.forEach(ce=>{this.delete(ce)}),this.cache={},this.order=[]}get(ce){const He=this.cache[ce];return He&&(this.deleteOrder(ce),this.appendOrder(ce)),He}set(ce,He){this.cache[ce]?(this.delete(ce),this.cache[ce]=He,this.appendOrder(ce)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[ce]=He,this.appendOrder(ce))}delete(ce){const He=this.cache[ce];He&&(this.deleteCache(ce),this.deleteOrder(ce),this.destroy(He,ce))}deleteCache(ce){delete this.cache[ce]}deleteOrder(ce){const He=this.order.findIndex(Et=>Et===ce);He>=0&&this.order.splice(He,1)}appendOrder(ce){this.order.push(ce)}defaultDestroy(ce,He){return null}};function vu(ce){if(ce.length===0)throw new Error("max requires at least one data point");let He=ce[0];for(let Et=1;Et<ce.length;Et++)ce[Et]>He&&(He=ce[Et]);return He*1}function kc(ce){if(ce.length===0)throw new Error("min requires at least one data point");let He=ce[0];for(let Et=1;Et<ce.length;Et++)ce[Et]<He&&(He=ce[Et]);return He*1}function Au(ce){if(ce.length===0)return 0;let He=ce[0]*1;for(let Et=1;Et<ce.length;Et++)He+=ce[Et]*1;return He}function xc(ce){if(ce.length===0)throw new Error("mean requires at least one data point");return Au(ce)/ce.length}function Se(ce){if(ce.length===0)throw new Error("mean requires at least one data point");if(ce.length<3)return ce[0];ce.sort();let He=ce[0],Et=NaN,Pn=0,ur=1;for(let zr=1;zr<ce.length+1;zr++)ce[zr]!==He?(ur>Pn&&(Pn=ur,Et=He),ur=1,He=ce[zr]):ur++;return Et*1}var ie={min:kc,max:vu,mean:xc,sum:Au,mode:Se};function ve(ce,He){return ce.map(Et=>Et[He])}function et(ce,He){return ie[ce](He)}function an(ce,He){He===void 0&&(He={});var Et=Number(ce[0]),Pn=Number(ce[1]),ur=Number(ce[2]),zr=Number(ce[3]);if(ce.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var pi=[Et,Pn],Ii=[Et,zr],Zo=[ur,zr],Go=[ur,Pn];return(0,ra.yu)([[pi,Go,Zo,Ii,pi]],He.properties,{bbox:ce,id:He.id})}var cn=L(26729),tr=L.n(cn),Or=(ce=>(ce.Realtime="realtime",ce.Overlap="overlap",ce.Replace="replace",ce))(Or||{}),Wr=(ce=>(ce.Loading="Loading",ce.Loaded="Loaded",ce.Failure="Failure",ce.Cancelled="Cancelled",ce))(Wr||{}),Fi=0,xo=1,_o=2;function La(ce){ce.forEach(He=>{He.isCurrent&&(He.isVisible=He.isLoaded)})}function Na(ce){ce.forEach(He=>{He.properties.state=Fi}),ce.forEach(He=>{He.isCurrent&&!Ca(He)&&xa(He)}),ce.forEach(He=>{He.isVisible=!!(He.properties.state&_o)})}function Ta(ce){ce.forEach(Et=>{Et.properties.state=Fi}),ce.forEach(Et=>{Et.isCurrent&&Ca(Et)}),ce.slice().sort((Et,Pn)=>Et.z-Pn.z).forEach(Et=>{Et.isVisible=!!(Et.properties.state&_o),Et.children.length&&(Et.isVisible||Et.properties.state&xo)?Et.children.forEach(Pn=>{Pn.properties.state=xo}):Et.isCurrent&&xa(Et)})}function Ca(ce){for(;ce;){if(ce.isLoaded)return ce.properties.state|=_o,!0;ce=ce.parent}return!1}function xa(ce){ce.children.forEach(He=>{He.isLoaded?He.properties.state|=_o:xa(He)})}var Fa=256,Oa=[-1/0,-1/0,1/0,1/0],Za=.2,Sa=5,ps={[Or.Realtime]:La,[Or.Overlap]:Na,[Or.Replace]:Ta},Ws=()=>{};function $s(ce,He,Et){const Pn=Math.floor((ce+180)/360*Math.pow(2,Et)),ur=Math.floor((1-Math.log(Math.tan(He*Math.PI/180)+1/Math.cos(He*Math.PI/180))/Math.PI)/2*Math.pow(2,Et));return[Pn,ur]}function Ec(ce,He,Et){const Pn=ce/Math.pow(2,Et)*360-180,ur=Math.PI-2*Math.PI*He/Math.pow(2,Et),zr=180/Math.PI*Math.atan(.5*(Math.exp(ur)-Math.exp(-ur)));return[Pn,zr]}var pl=(ce,He,Et)=>{const[Pn,ur]=Ec(ce,He,Et),[zr,pi]=Ec(ce+1,He+1,Et);return[Pn,pi,zr,ur]};function cc({zoom:ce,latLonBounds:He,maxZoom:Et=1/0,minZoom:Pn=0,zoomOffset:ur=0,extent:zr=Oa}){let pi=Math.ceil(ce)+ur;if(Number.isFinite(Pn)&&pi<Pn)return[];Number.isFinite(Et)&&pi>Et&&(pi=Et);const[Ii,Zo,Go,la]=He,Js=[Math.max(Ii,zr[0]),Math.max(Zo,zr[1]),Math.min(Go,zr[2]),Math.min(la,zr[3])],bl=[],[Es,oo]=$s(Js[0],Js[1],pi),[Ml,_h]=$s(Js[2],Js[3],pi);for(let ff=Es;ff<=Ml;ff++)for(let Ui=_h;Ui<=oo;Ui++)bl.push({x:ff,y:Ui,z:pi});const Gh=(Ml+Es)/2,Ja=(oo+_h)/2,Ns=(ff,Ui)=>Math.abs(ff-Gh)+Math.abs(Ui-Ja);return bl.sort((ff,Ui)=>Ns(ff.x,ff.y)-Ns(Ui.x,Ui.y)),bl}var cf=(ce,He,Et,Pn=!0)=>{const ur=Math.pow(2,Et),zr=ur-1,pi=ur;let Ii=ce;const Zo=He;return Pn&&(Ii<0?Ii=Ii+pi:Ii>zr&&(Ii=Ii%pi)),{warpX:Ii,warpY:Zo}},fc=(ce,He,Et)=>new Promise((Pn,ur)=>{var zr=Zo=>{try{Ii(Et.next(Zo))}catch(Go){ur(Go)}},pi=Zo=>{try{Ii(Et.throw(Zo))}catch(Go){ur(Go)}},Ii=Zo=>Zo.done?Pn(Zo.value):Promise.resolve(Zo.value).then(zr,pi);Ii((Et=Et.apply(ce,He)).next())}),zc=class extends cn.EventEmitter{constructor(ce){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;const{x:He,y:Et,z:Pn,tileSize:ur,warp:zr=!0}=ce;this.x=He,this.y=Et,this.z=Pn,this.warp=zr||!0,this.tileSize=ur}get isLoading(){return this.loadStatus===Wr.Loading}get isLoaded(){return this.loadStatus===Wr.Loaded}get isFailure(){return this.loadStatus===Wr.Failure}setTileLayerLoaded(){this.isLayerLoaded=!0}get isCancelled(){return this.loadStatus===Wr.Cancelled}get isDone(){return[Wr.Loaded,Wr.Cancelled,Wr.Failure].includes(this.loadStatus)}get bounds(){return pl(this.x,this.y,this.z)}get bboxPolygon(){const[ce,He,Et,Pn]=this.bounds,ur=[(Et-ce)/2,(Pn-He)/2];return an(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:ur,meta:`
      ${this.key}
      `}})}get key(){return`${this.x}_${this.y}_${this.z}`}layerLoad(){this.loadedLayers++,this.emit("layerLoaded")}loadData(ce){return fc(this,arguments,function*({getData:He,onLoad:Et,onError:Pn}){this.loadDataId++;const ur=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=Wr.Loading;let zr=null,pi;try{const{x:Ii,y:Zo,z:Go,bounds:la,tileSize:Js,warp:bl}=this,{warpX:Es,warpY:oo}=cf(Ii,Zo,Go,bl),{signal:Ml}=this.abortController;zr=yield He({x:Es,y:oo,z:Go,bounds:la,tileSize:Js,signal:Ml,warp:bl},this)}catch(Ii){pi=Ii}if(ur===this.loadDataId&&!(this.isCancelled&&!zr)){if(pi||!zr){this.loadStatus=Wr.Failure,Pn(pi,this);return}this.loadStatus=Wr.Loaded,this.data=zr,Et(this)}})}reloadData(ce){this.isLoading&&this.abortLoad(),this.loadData(ce)}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=Wr.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}},Qf=(ce,He)=>{const Et=pu(ce),Pn=rf(Et,He),ur=360*3-180,zr=85.0511287798065;return[Math.max(Pn[0][0],-ur),Math.max(Pn[0][1],-zr),Math.min(Pn[1][0],ur),Math.min(Pn[1][1],zr)]},jf=(ce,He)=>{const Et=pu(ce),Pn=pu(He);return iu(Et,Pn)},u0=Object.defineProperty,tp=Object.defineProperties,jp=Object.getOwnPropertyDescriptors,Sf=Object.getOwnPropertySymbols,c0=Object.prototype.hasOwnProperty,np=Object.prototype.propertyIsEnumerable,Td=(ce,He,Et)=>He in ce?u0(ce,He,{enumerable:!0,configurable:!0,writable:!0,value:Et}):ce[He]=Et,wf=(ce,He)=>{for(var Et in He||(He={}))c0.call(He,Et)&&Td(ce,Et,He[Et]);if(Sf)for(var Et of Sf(He))np.call(He,Et)&&Td(ce,Et,He[Et]);return ce},Vp=(ce,He)=>tp(ce,jp(He)),{throttle:yh}=Jt,rp=(ce=>(ce.TilesLoadStart="tiles-load-start",ce.TileLoaded="tile-loaded",ce.TileError="tile-error",ce.TileUnload="tile-unload",ce.TileUpdate="tile-update",ce.TilesLoadFinished="tiles-load-finished",ce))(rp||{}),Jf=class extends tr(){constructor(ce){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=yh((He,Et)=>{this.update(He,Et)},16),this.onTileLoad=He=>{this.emit("tile-loaded",He),this.updateTileVisible(),this.loadFinished()},this.onTileError=(He,Et)=>{this.emit("tile-error",{error:He,tile:Et}),this.updateTileVisible(),this.loadFinished()},this.onTileUnload=He=>{this.emit("tile-unload",He),this.loadFinished()},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:Oa,getTileData:Ws,warp:!0,updateStrategy:Or.Replace},this.updateOptions(ce)}get isLoaded(){return this.currentTiles.every(ce=>ce.isDone)}get tiles(){return Array.from(this.cacheTiles.values()).sort((He,Et)=>He.z-Et.z)}updateOptions(ce){const He=ce.minZoom===void 0?this.options.minZoom:Math.ceil(ce.minZoom),Et=ce.maxZoom===void 0?this.options.maxZoom:Math.floor(ce.maxZoom);this.options=Vp(wf(wf({},this.options),ce),{minZoom:He,maxZoom:Et})}update(ce,He){const Et=Math.max(0,Math.ceil(ce));if(this.lastViewStates&&this.lastViewStates.zoom===Et&&jf(this.lastViewStates.latLonBoundsBuffer,He))return;const Pn=Qf(He,Za);this.lastViewStates={zoom:Et,latLonBounds:He,latLonBoundsBuffer:Pn},this.currentZoom=Et;let ur=!1;const zr=this.getTileIndices(Et,Pn).filter(pi=>this.options.warp||pi.x>=0&&pi.x<Math.pow(2,Et));this.emit("tiles-load-start"),this.currentTiles=zr.map(({x:pi,y:Ii,z:Zo})=>{let Go=this.getTile(pi,Ii,Zo);return Go?(((Go==null?void 0:Go.isFailure)||(Go==null?void 0:Go.isCancelled))&&Go.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),Go):(Go=this.createTile(pi,Ii,Zo),ur=!0,Go)}),ur&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}reloadAll(){for(const[ce,He]of this.cacheTiles){if(!this.currentTiles.includes(He)){this.cacheTiles.delete(ce),this.onTileUnload(He);return}this.onTileUnload(He),He.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}reloadTileById(ce,He,Et){const Pn=this.cacheTiles.get(`${He},${Et},${ce}`);Pn&&(this.onTileUnload(Pn),Pn.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}reloadTileByLnglat(ce,He,Et){const Pn=this.getTileByLngLat(ce,He,Et);Pn&&this.reloadTileById(Pn.z,Pn.x,Pn.y)}reloadTileByExtent(ce,He){this.getTileIndices(He,ce).forEach(Pn=>{this.reloadTileById(Pn.z,Pn.x,Pn.y)})}pruneRequests(){const ce=[];for(const He of this.cacheTiles.values())He.isLoading&&!He.isCurrent&&!He.isVisible&&ce.push(He);for(;ce.length>0;)ce.shift().abortLoad()}getTileByLngLat(ce,He,Et){const{zoomOffset:Pn}=this.options,ur=Math.ceil(Et)+Pn,zr=$s(ce,He,ur);return this.tiles.filter(Ii=>Ii.key===`${zr[0]}_${zr[1]}_${ur}`)[0]}getTileExtent(ce,He){return this.getTileIndices(He,ce)}getTileByZXY(ce,He,Et){return this.tiles.filter(ur=>ur.key===`${He}_${Et}_${ce}`)[0]}clear(){for(const ce of this.cacheTiles.values())ce.isLoading?ce.abortLoad():this.onTileUnload(ce);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}destroy(){this.clear(),this.removeAllListeners()}updateTileVisible(){const ce=this.options.updateStrategy,He=new Map;for(const ur of this.cacheTiles.values())He.set(ur.key,ur.isVisible),ur.isCurrent=!1,ur.isVisible=!1;for(const ur of this.currentTiles)ur.isCurrent=!0,ur.isVisible=!0;const Et=Array.from(this.cacheTiles.values());typeof ce=="function"?ce(Et):ps[ce](Et);let Pn=!1;Array.from(this.cacheTiles.values()).forEach(ur=>{ur.isVisible!==He.get(ur.key)?(ur.isVisibleChange=!0,Pn=!0):ur.isVisibleChange=!1}),Pn&&this.emit("tile-update")}getTileIndices(ce,He){const{tileSize:Et,extent:Pn,zoomOffset:ur}=this.options,zr=Math.floor(this.options.maxZoom),pi=Math.ceil(this.options.minZoom);return cc({maxZoom:zr,minZoom:pi,zoomOffset:ur,tileSize:Et,zoom:ce,latLonBounds:He,extent:Pn})}getTileId(ce,He,Et){return`${ce},${He},${Et}`}loadFinished(){const ce=!this.currentTiles.some(He=>!He.isDone);return ce&&this.emit("tiles-load-finished"),ce}getTile(ce,He,Et){const Pn=this.getTileId(ce,He,Et);return this.cacheTiles.get(Pn)}createTile(ce,He,Et){const Pn=this.getTileId(ce,He,Et),ur=new zc({x:ce,y:He,z:Et,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(Pn,ur),ur.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),ur}resizeCacheTiles(){const ce=Sa*this.currentTiles.length;if(this.cacheTiles.size>ce){for(const[Et,Pn]of this.cacheTiles)if(!Pn.isVisible&&!this.currentTiles.includes(Pn)&&(this.cacheTiles.delete(Et),this.onTileUnload(Pn)),this.cacheTiles.size<=ce)break}this.rebuildTileTree()}rebuildTileTree(){for(const ce of this.cacheTiles.values())ce.parent=null,ce.children.length=0;for(const ce of this.cacheTiles.values()){const He=this.getNearestAncestor(ce.x,ce.y,ce.z);ce.parent=He,He!=null&&He.children&&He.children.push(ce)}}getNearestAncestor(ce,He,Et){for(;Et>this.options.minZoom;){ce=Math.floor(ce/2),He=Math.floor(He/2),Et=Et-1;const Pn=this.getTile(ce,He,Et);if(Pn)return Pn}return null}};function qs(ce){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(ce)}function Ad(ce){const He=[];let Et=/\{([a-z])-([a-z])\}/.exec(ce);if(Et){const Pn=Et[1].charCodeAt(0),ur=Et[2].charCodeAt(0);let zr;for(zr=Pn;zr<=ur;++zr)He.push(ce.replace(Et[0],String.fromCharCode(zr)));return He}if(Et=/\{(\d+)-(\d+)\}/.exec(ce),Et){const Pn=parseInt(Et[2],10);for(let ur=parseInt(Et[1],10);ur<=Pn;ur++)He.push(ce.replace(Et[0],ur.toString()));return He}return He.push(ce),He}function Tf(ce,He){if(!ce||!ce.length)throw new Error("url is not allowed to be empty");const{x:Et,y:Pn,z:ur}=He,zr=Ad(ce),pi=Math.abs(Et+Pn)%zr.length;return(Pe(zr[pi])?`${zr[pi]}/{z}/{x}/{y}`:zr[pi]).replace(/\{x\}/g,Et.toString()).replace(/\{y\}/g,Pn.toString()).replace(/\{z\}/g,ur.toString()).replace(/\{bbox\}/g,pl(Et,Pn,ur).join(",")).replace(/\{-y\}/g,(Math.pow(2,ur)-Pn-1).toString())}function eh(ce,He){const{x:Et,y:Pn,z:ur,layer:zr,version:pi="1.0.0",style:Ii="default",format:Zo,service:Go="WMTS",tileMatrixset:la}=He,Js=Ad(ce),bl=Math.abs(Et+Pn)%Js.length;return`${Js[bl]}&SERVICE=${Go}&REQUEST=GetTile&VERSION=${pi}&LAYER=${zr}&STYLE=${Ii}&TILEMATRIXSET=${la}&FORMAT=${Zo}&TILECOL=${Et}&TILEROW=${Pn}&TILEMATRIX=${ur}`}function Ha(ce,He){return ce==null?He:ce}},13690:function(bt,G,L){"use strict";L.d(G,{oT:function(){return ga},Ie:function(){return Sx},dW:function(){return kx},GI:function(){return Xx},xs:function(){return C2}});var K={},W={},E=a=>W[a],he=(a,o)=>{W[a]=o},ee=a=>K[a],se=(a,o)=>{K[a]=o},ue={},be={},oe=34,Ge=10,te=13;function me(a){return new Function("d","return {"+a.map(function(o,f){return JSON.stringify(o)+": d["+f+'] || ""'}).join(",")+"}")}function Pe(a,o){var f=me(a);return function(m,w){return o(f(m),w,a)}}function $(a){var o=Object.create(null),f=[];return a.forEach(function(m){for(var w in m)w in o||f.push(o[w]=w)}),f}function le(a,o){var f=a+"",m=f.length;return m<o?new Array(o-m+1).join(0)+f:f}function J(a){return a<0?"-"+le(-a,6):a>9999?"+"+le(a,6):le(a,4)}function Ee(a){var o=a.getUTCHours(),f=a.getUTCMinutes(),m=a.getUTCSeconds(),w=a.getUTCMilliseconds();return isNaN(a)?"Invalid Date":J(a.getUTCFullYear(),4)+"-"+le(a.getUTCMonth()+1,2)+"-"+le(a.getUTCDate(),2)+(w?"T"+le(o,2)+":"+le(f,2)+":"+le(m,2)+"."+le(w,3)+"Z":m?"T"+le(o,2)+":"+le(f,2)+":"+le(m,2)+"Z":f||o?"T"+le(o,2)+":"+le(f,2)+"Z":"")}function tt(a){var o=new RegExp('["'+a+`
\r]`),f=a.charCodeAt(0);function m(Ae,Fe){var Mt,rn,In=w(Ae,function(ar,Cr){if(Mt)return Mt(ar,Cr-1);rn=ar,Mt=Fe?Pe(ar,Fe):me(ar)});return In.columns=rn||[],In}function w(Ae,Fe){var Mt=[],rn=Ae.length,In=0,ar=0,Cr,vr=rn<=0,qr=!1;Ae.charCodeAt(rn-1)===Ge&&--rn,Ae.charCodeAt(rn-1)===te&&--rn;function ri(){if(vr)return be;if(qr)return qr=!1,ue;var ho,Xr=In,lo;if(Ae.charCodeAt(Xr)===oe){for(;In++<rn&&Ae.charCodeAt(In)!==oe||Ae.charCodeAt(++In)===oe;);return(ho=In)>=rn?vr=!0:(lo=Ae.charCodeAt(In++))===Ge?qr=!0:lo===te&&(qr=!0,Ae.charCodeAt(In)===Ge&&++In),Ae.slice(Xr+1,ho-1).replace(/""/g,'"')}for(;In<rn;){if((lo=Ae.charCodeAt(ho=In++))===Ge)qr=!0;else if(lo===te)qr=!0,Ae.charCodeAt(In)===Ge&&++In;else if(lo!==f)continue;return Ae.slice(Xr,ho)}return vr=!0,Ae.slice(Xr,rn)}for(;(Cr=ri())!==be;){for(var po=[];Cr!==ue&&Cr!==be;)po.push(Cr),Cr=ri();Fe&&(po=Fe(po,ar++))==null||Mt.push(po)}return Mt}function C(Ae,Fe){return Ae.map(function(Mt){return Fe.map(function(rn){return Te(Mt[rn])}).join(a)})}function D(Ae,Fe){return Fe==null&&(Fe=$(Ae)),[Fe.map(Te).join(a)].concat(C(Ae,Fe)).join(`
`)}function B(Ae,Fe){return Fe==null&&(Fe=$(Ae)),C(Ae,Fe).join(`
`)}function V(Ae){return Ae.map(re).join(`
`)}function re(Ae){return Ae.map(Te).join(a)}function Te(Ae){return Ae==null?"":Ae instanceof Date?Ee(Ae):o.test(Ae+="")?'"'+Ae.replace(/"/g,'""')+'"':Ae}return{parse:m,parseRows:w,format:D,formatBody:B,formatRows:V,formatRow:re,formatValue:Te}}var Je=tt(","),wt=Je.parse,pt=Je.parseRows,yt=Je.format,Re=Je.formatBody,Ce=Je.formatRows,Ue=Je.formatRow,We=Je.formatValue,lt=L(1449);function tn(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Le(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function _t(a){if(a.length>1&&isNumber(a[0])&&isNumber(a[1]))return!0;if(Array.isArray(a[0])&&a[0].length)return _t(a[0]);throw new Error("coordinates must only contain numbers")}function Me(a,o,f){if(!o||!f)throw new Error("type and name required");if(!a||a.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+a.type)}function nt(a,o,f){if(!a)throw new Error("No feature passed");if(!f)throw new Error(".featureOf() requires a name");if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!a.geometry||a.geometry.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+a.geometry.type)}function qe(a,o,f){if(!a)throw new Error("No featureCollection passed");if(!f)throw new Error(".collectionOf() requires a name");if(!a||a.type!=="FeatureCollection")throw new Error("Invalid input to "+f+", FeatureCollection required");for(var m=0,w=a.features;m<w.length;m++){var C=w[m];if(!C||C.type!=="Feature"||!C.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!C.geometry||C.geometry.type!==o)throw new Error("Invalid input to "+f+": must be a "+o+", given "+C.geometry.type)}}function Ye(a){return a.type==="Feature"?a.geometry:a}function Lt(a,o){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}var xt=L(39034),Ie=L(66366),Gt=L(38163),gn=L.n(Gt);function Tn(a,o){return a.map(f=>f[o]*1)}function sr(a){return a===void 0?!1:!Array.isArray(a)&&a.data!==void 0}function nr(a){return Array.isArray(a)?a.length===0?!1:!!sr(a[0]):!1}function Ft(a){return Array.isArray(a)?a.length===0||typeof a[0]=="number":!1}function Kt(a){const o=Object.isFrozen(a)?Ie.lodashUtil.cloneDeep(a):a;return gn()(o,!0),o}function fn(a,o){return a||[[o[0],o[3]],[o[2],o[3]],[o[2],o[1]],[o[0],o[1]]]}var Gn=Object.defineProperty,on=Object.defineProperties,Pt=Object.getOwnPropertyDescriptors,zt=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,jt=(a,o,f)=>o in a?Gn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,U=(a,o)=>{for(var f in o||(o={}))ze.call(o,f)&&jt(a,f,o[f]);if(zt)for(var f of zt(o))rt.call(o,f)&&jt(a,f,o[f]);return a},fe=(a,o)=>on(a,Pt(o));function at(a,o){const{x:f,y:m,x1:w,y1:C,coordinates:D,geometry:B}=o,V=[];if(!Array.isArray(a))return{dataArray:[]};if(B)return a.filter(re=>re[B]&&re[B].type&&re[B].coordinates&&re[B].coordinates.length>0).forEach((re,Te)=>{const Ae=Kt(re[B]);(0,xt.nG)(Ae,Fe=>{const Mt=Le(Fe),rn=fe(U({},re),{_id:Te,coordinates:Mt});V.push(rn)})}),{dataArray:V};for(let re=0;re<a.length;re++){const Te=a[re];let Ae=[];if(D){let Mt="Polygon";Array.isArray(D[0])||(Mt="Point"),Array.isArray(D[0])&&!Array.isArray(D[0][0])&&(Mt="LineString"),Ae=Kt({type:Mt,coordinates:Te[D]}).coordinates}else if(f&&m&&w&&C){const Mt=[parseFloat(Te[f]),parseFloat(Te[m])],rn=[parseFloat(Te[w]),parseFloat(Te[C])];Ae=[Mt,rn]}else f&&m&&(Ae=[parseFloat(Te[f]),parseFloat(Te[m])]);const Fe=fe(U({},Te),{_id:re,coordinates:Ae});V.push(Fe)}return{dataArray:V}}function de(a,o){const f=wt(a);return at(f,o)}var $t=Object.defineProperty,sn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,Nn=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable,dn=(a,o,f)=>o in a?$t(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,vt=(a,o)=>{for(var f in o||(o={}))Wn.call(o,f)&&dn(a,f,o[f]);if(Nn)for(var f of Nn(o))qn.call(o,f)&&dn(a,f,o[f]);return a},It=(a,o)=>sn(a,pn(o));function An(a){const o=a.toString();let f=5381,m=o.length;for(;m;)f=f*33^o.charCodeAt(--m);return f>>>0}function Dn(a,o){return o===void 0?null:typeof(a.properties[o]*1)=="number"?a.properties[o]*1:a.properties&&a.properties[o]?An(a.properties[o]+"")%1000019:null}function Yn(a,o){const f=[],m={};return a.features?(a.features=a.features.filter(w=>{const C=w.geometry;return w!=null&&C&&C.type&&C.coordinates&&C.coordinates.length>0}),a=Kt(a),a.features.length===0?{dataArray:[],featureKeys:m}:((0,xt.nG)(a,(w,C)=>{let D=Dn(w,o==null?void 0:o.featureId);D===null&&(D=C);const B=D,V=Le(w),re=It(vt({},w.properties),{coordinates:V,_id:B});f.push(re)}),{dataArray:f,featureKeys:m})):(a.features=[],{dataArray:[]})}function dt(a,o,f,m){for(var w=m,C=f-o>>1,D=f-o,B,V=a[o],re=a[o+1],Te=a[f],Ae=a[f+1],Fe=o+3;Fe<f;Fe+=3){var Mt=xe(a[Fe],a[Fe+1],V,re,Te,Ae);if(Mt>w)B=Fe,w=Mt;else if(Mt===w){var rn=Math.abs(Fe-C);rn<D&&(B=Fe,D=rn)}}w>m&&(B-o>3&&dt(a,o,B,m),a[B+2]=w,f-B>3&&dt(a,B,f,m))}function xe(a,o,f,m,w,C){var D=w-f,B=C-m;if(D!==0||B!==0){var V=((a-f)*D+(o-m)*B)/(D*D+B*B);V>1?(f=w,m=C):V>0&&(f+=D*V,m+=B*V)}return D=a-f,B=o-m,D*D+B*B}function Be(a,o,f,m){var w={id:typeof a=="undefined"?null:a,type:o,geometry:f,tags:m,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return st(w),w}function st(a){var o=a.geometry,f=a.type;if(f==="Point"||f==="MultiPoint"||f==="LineString")Dt(a,o);else if(f==="Polygon"||f==="MultiLineString")for(var m=0;m<o.length;m++)Dt(a,o[m]);else if(f==="MultiPolygon")for(m=0;m<o.length;m++)for(var w=0;w<o[m].length;w++)Dt(a,o[m][w])}function Dt(a,o){for(var f=0;f<o.length;f+=3)a.minX=Math.min(a.minX,o[f]),a.minY=Math.min(a.minY,o[f+1]),a.maxX=Math.max(a.maxX,o[f]),a.maxY=Math.max(a.maxY,o[f+1])}function Ot(a,o){var f=[];if(a.type==="FeatureCollection")for(var m=0;m<a.features.length;m++)Sn(f,a.features[m],o,m);else a.type==="Feature"?Sn(f,a,o):Sn(f,{geometry:a},o);return f}function Sn(a,o,f,m){if(o.geometry){var w=o.geometry.coordinates,C=o.geometry.type,D=Math.pow(f.tolerance/((1<<f.maxZoom)*f.extent),2),B=[],V=o.id;if(f.promoteId?V=o.properties[f.promoteId]:f.generateId&&(V=m||0),C==="Point")er(w,B);else if(C==="MultiPoint")for(var re=0;re<w.length;re++)er(w[re],B);else if(C==="LineString")br(w,B,D,!1);else if(C==="MultiLineString")if(f.lineMetrics){for(re=0;re<w.length;re++)B=[],br(w[re],B,D,!1),a.push(Be(V,"LineString",B,o.properties));return}else $n(w,B,D,!1);else if(C==="Polygon")$n(w,B,D,!0);else if(C==="MultiPolygon")for(re=0;re<w.length;re++){var Te=[];$n(w[re],Te,D,!0),B.push(Te)}else if(C==="GeometryCollection"){for(re=0;re<o.geometry.geometries.length;re++)Sn(a,{id:V,geometry:o.geometry.geometries[re],properties:o.properties},f,m);return}else throw new Error("Input data is not a valid GeoJSON object.");a.push(Be(V,C,B,o.properties))}}function er(a,o){o.push(Oe(a[0])),o.push(we(a[1])),o.push(0)}function br(a,o,f,m){for(var w,C,D=0,B=0;B<a.length;B++){var V=Oe(a[B][0]),re=we(a[B][1]);o.push(V),o.push(re),o.push(0),B>0&&(m?D+=(w*re-V*C)/2:D+=Math.sqrt(Math.pow(V-w,2)+Math.pow(re-C,2))),w=V,C=re}var Te=o.length-3;o[2]=1,dt(o,0,Te,f),o[Te+2]=1,o.size=Math.abs(D),o.start=0,o.end=o.size}function $n(a,o,f,m){for(var w=0;w<a.length;w++){var C=[];br(a[w],C,f,m),o.push(C)}}function Oe(a){return a/360+.5}function we(a){var o=Math.sin(a*Math.PI/180),f=.5-.25*Math.log((1+o)/(1-o))/Math.PI;return f<0?0:f>1?1:f}function Ve(a,o,f,m,w,C,D,B){if(f/=o,m/=o,C>=f&&D<m)return a;if(D<f||C>=m)return null;for(var V=[],re=0;re<a.length;re++){var Te=a[re],Ae=Te.geometry,Fe=Te.type,Mt=w===0?Te.minX:Te.minY,rn=w===0?Te.maxX:Te.maxY;if(Mt>=f&&rn<m){V.push(Te);continue}else if(rn<f||Mt>=m)continue;var In=[];if(Fe==="Point"||Fe==="MultiPoint")it(Ae,In,f,m,w);else if(Fe==="LineString")At(Ae,In,f,m,w,!1,B.lineMetrics);else if(Fe==="MultiLineString")un(Ae,In,f,m,w,!1);else if(Fe==="Polygon")un(Ae,In,f,m,w,!0);else if(Fe==="MultiPolygon")for(var ar=0;ar<Ae.length;ar++){var Cr=[];un(Ae[ar],Cr,f,m,w,!0),Cr.length&&In.push(Cr)}if(In.length){if(B.lineMetrics&&Fe==="LineString"){for(ar=0;ar<In.length;ar++)V.push(Be(Te.id,Fe,In[ar],Te.tags));continue}(Fe==="LineString"||Fe==="MultiLineString")&&(In.length===1?(Fe="LineString",In=In[0]):Fe="MultiLineString"),(Fe==="Point"||Fe==="MultiPoint")&&(Fe=In.length===3?"Point":"MultiPoint"),V.push(Be(Te.id,Fe,In,Te.tags))}}return V.length?V:null}function it(a,o,f,m,w){for(var C=0;C<a.length;C+=3){var D=a[C+w];D>=f&&D<=m&&(o.push(a[C]),o.push(a[C+1]),o.push(a[C+2]))}}function At(a,o,f,m,w,C,D){for(var B=qt(a),V=w===0?Jt:Qn,re=a.start,Te,Ae,Fe=0;Fe<a.length-3;Fe+=3){var Mt=a[Fe],rn=a[Fe+1],In=a[Fe+2],ar=a[Fe+3],Cr=a[Fe+4],vr=w===0?Mt:rn,qr=w===0?ar:Cr,ri=!1;D&&(Te=Math.sqrt(Math.pow(Mt-ar,2)+Math.pow(rn-Cr,2))),vr<f?qr>f&&(Ae=V(B,Mt,rn,ar,Cr,f),D&&(B.start=re+Te*Ae)):vr>m?qr<m&&(Ae=V(B,Mt,rn,ar,Cr,m),D&&(B.start=re+Te*Ae)):St(B,Mt,rn,In),qr<f&&vr>=f&&(Ae=V(B,Mt,rn,ar,Cr,f),ri=!0),qr>m&&vr<=m&&(Ae=V(B,Mt,rn,ar,Cr,m),ri=!0),!C&&ri&&(D&&(B.end=re+Te*Ae),o.push(B),B=qt(a)),D&&(re+=Te)}var po=a.length-3;Mt=a[po],rn=a[po+1],In=a[po+2],vr=w===0?Mt:rn,vr>=f&&vr<=m&&St(B,Mt,rn,In),po=B.length-3,C&&po>=3&&(B[po]!==B[0]||B[po+1]!==B[1])&&St(B,B[0],B[1],B[2]),B.length&&o.push(B)}function qt(a){var o=[];return o.size=a.size,o.start=a.start,o.end=a.end,o}function un(a,o,f,m,w,C){for(var D=0;D<a.length;D++)At(a[D],o,f,m,w,C,!1)}function St(a,o,f,m){a.push(o),a.push(f),a.push(m)}function Jt(a,o,f,m,w,C){var D=(C-o)/(m-o);return a.push(C),a.push(f+(w-f)*D),a.push(1),D}function Qn(a,o,f,m,w,C){var D=(C-f)/(w-f);return a.push(o+(m-o)*D),a.push(C),a.push(1),D}function Er(a,o){var f=o.buffer/o.extent,m=a,w=Ve(a,1,-1-f,f,0,-1,2,o),C=Ve(a,1,1-f,2+f,0,-1,2,o);return(w||C)&&(m=Ve(a,1,-f,1+f,0,-1,2,o)||[],w&&(m=Gr(w,1).concat(m)),C&&(m=m.concat(Gr(C,-1)))),m}function Gr(a,o){for(var f=[],m=0;m<a.length;m++){var w=a[m],C=w.type,D;if(C==="Point"||C==="MultiPoint"||C==="LineString")D=mr(w.geometry,o);else if(C==="MultiLineString"||C==="Polygon"){D=[];for(var B=0;B<w.geometry.length;B++)D.push(mr(w.geometry[B],o))}else if(C==="MultiPolygon")for(D=[],B=0;B<w.geometry.length;B++){for(var V=[],re=0;re<w.geometry[B].length;re++)V.push(mr(w.geometry[B][re],o));D.push(V)}f.push(Be(w.id,C,D,w.tags))}return f}function mr(a,o){var f=[];f.size=a.size,a.start!==void 0&&(f.start=a.start,f.end=a.end);for(var m=0;m<a.length;m+=3)f.push(a[m]+o,a[m+1],a[m+2]);return f}function Hr(a,o){if(a.transformed)return a;var f=1<<a.z,m=a.x,w=a.y,C,D,B;for(C=0;C<a.features.length;C++){var V=a.features[C],re=V.geometry,Te=V.type;if(V.geometry=[],Te===1)for(D=0;D<re.length;D+=2)V.geometry.push(wi(re[D],re[D+1],o,f,m,w));else for(D=0;D<re.length;D++){var Ae=[];for(B=0;B<re[D].length;B+=2)Ae.push(wi(re[D][B],re[D][B+1],o,f,m,w));V.geometry.push(Ae)}}return a.transformed=!0,a}function wi(a,o,f,m,w,C){return[Math.round(f*(a*m-w)),Math.round(f*(o*m-C))]}function Pi(a,o,f,m,w){for(var C=o===w.maxZoom?0:w.tolerance/((1<<o)*w.extent),D={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:f,y:m,z:o,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},B=0;B<a.length;B++){D.numFeatures++,wr(D,a[B],C,w);var V=a[B].minX,re=a[B].minY,Te=a[B].maxX,Ae=a[B].maxY;V<D.minX&&(D.minX=V),re<D.minY&&(D.minY=re),Te>D.maxX&&(D.maxX=Te),Ae>D.maxY&&(D.maxY=Ae)}return D}function wr(a,o,f,m){var w=o.geometry,C=o.type,D=[];if(C==="Point"||C==="MultiPoint")for(var B=0;B<w.length;B+=3)D.push(w[B]),D.push(w[B+1]),a.numPoints++,a.numSimplified++;else if(C==="LineString")gi(D,w,a,f,!1,!1);else if(C==="MultiLineString"||C==="Polygon")for(B=0;B<w.length;B++)gi(D,w[B],a,f,C==="Polygon",B===0);else if(C==="MultiPolygon")for(var V=0;V<w.length;V++){var re=w[V];for(B=0;B<re.length;B++)gi(D,re[B],a,f,!0,B===0)}if(D.length){var Te=o.tags||null;if(C==="LineString"&&m.lineMetrics){Te={};for(var Ae in o.tags)Te[Ae]=o.tags[Ae];Te.mapbox_clip_start=w.start/w.size,Te.mapbox_clip_end=w.end/w.size}var Fe={geometry:D,type:C==="Polygon"||C==="MultiPolygon"?3:C==="LineString"||C==="MultiLineString"?2:1,tags:Te};o.id!==null&&(Fe.id=o.id),a.features.push(Fe)}}function gi(a,o,f,m,w,C){var D=m*m;if(m>0&&o.size<(w?D:m)){f.numPoints+=o.length/3;return}for(var B=[],V=0;V<o.length;V+=3)(m===0||o[V+2]>D)&&(f.numSimplified++,B.push(o[V]),B.push(o[V+1])),f.numPoints++;w&&di(B,C),a.push(B)}function di(a,o){for(var f=0,m=0,w=a.length,C=w-2;m<w;C=m,m+=2)f+=(a[m]-a[C])*(a[m+1]+a[C+1]);if(f>0===o)for(m=0,w=a.length;m<w/2;m+=2){var D=a[m],B=a[m+1];a[m]=a[w-2-m],a[m+1]=a[w-1-m],a[w-2-m]=D,a[w-1-m]=B}}function xi(a,o){return new Fo(a,o)}function Fo(a,o){o=this.options=ea(Object.create(this.options),o);var f=o.debug;if(f&&console.time("preprocess data"),o.maxZoom<0||o.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(o.promoteId&&o.generateId)throw new Error("promoteId and generateId cannot be used together.");var m=Ot(a,o);this.tiles={},this.tileCoords=[],f&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",o.indexMaxZoom,o.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),m=Er(m,o),m.length&&this.splitTile(m,0,0,0),f&&(m.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}Fo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Fo.prototype.splitTile=function(a,o,f,m,w,C,D){for(var B=[a,o,f,m],V=this.options,re=V.debug;B.length;){m=B.pop(),f=B.pop(),o=B.pop(),a=B.pop();var Te=1<<o,Ae=Ai(o,f,m),Fe=this.tiles[Ae];if(!Fe&&(re>1&&console.time("creation"),Fe=this.tiles[Ae]=Pi(a,o,f,m,V),this.tileCoords.push({z:o,x:f,y:m}),re)){re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",o,f,m,Fe.numFeatures,Fe.numPoints,Fe.numSimplified),console.timeEnd("creation"));var Mt="z"+o;this.stats[Mt]=(this.stats[Mt]||0)+1,this.total++}if(Fe.source=a,w){if(o===V.maxZoom||o===w)continue;var rn=1<<w-o;if(f!==Math.floor(C/rn)||m!==Math.floor(D/rn))continue}else if(o===V.indexMaxZoom||Fe.numPoints<=V.indexMaxPoints)continue;if(Fe.source=null,a.length!==0){re>1&&console.time("clipping");var In=.5*V.buffer/V.extent,ar=.5-In,Cr=.5+In,vr=1+In,qr,ri,po,ho,Xr,lo;qr=ri=po=ho=null,Xr=Ve(a,Te,f-In,f+Cr,0,Fe.minX,Fe.maxX,V),lo=Ve(a,Te,f+ar,f+vr,0,Fe.minX,Fe.maxX,V),a=null,Xr&&(qr=Ve(Xr,Te,m-In,m+Cr,1,Fe.minY,Fe.maxY,V),ri=Ve(Xr,Te,m+ar,m+vr,1,Fe.minY,Fe.maxY,V),Xr=null),lo&&(po=Ve(lo,Te,m-In,m+Cr,1,Fe.minY,Fe.maxY,V),ho=Ve(lo,Te,m+ar,m+vr,1,Fe.minY,Fe.maxY,V),lo=null),re>1&&console.timeEnd("clipping"),B.push(qr||[],o+1,f*2,m*2),B.push(ri||[],o+1,f*2,m*2+1),B.push(po||[],o+1,f*2+1,m*2),B.push(ho||[],o+1,f*2+1,m*2+1)}}},Fo.prototype.getTile=function(a,o,f){var m=this.options,w=m.extent,C=m.debug;if(a<0||a>24)return null;var D=1<<a;o=(o%D+D)%D;var B=Ai(a,o,f);if(this.tiles[B])return Hr(this.tiles[B],w);C>1&&console.log("drilling down to z%d-%d-%d",a,o,f);for(var V=a,re=o,Te=f,Ae;!Ae&&V>0;)V--,re=Math.floor(re/2),Te=Math.floor(Te/2),Ae=this.tiles[Ai(V,re,Te)];return!Ae||!Ae.source?null:(C>1&&console.log("found parent tile z%d-%d-%d",V,re,Te),C>1&&console.time("drilling down"),this.splitTile(Ae.source,V,re,Te,a,o,f),C>1&&console.timeEnd("drilling down"),this.tiles[B]?Hr(this.tiles[B],w):null)};function Ai(a,o,f){return((1<<a)*f+o)*32+a}function ea(a,o){for(var f in o)a[f]=o[f];return a}var _a=class{constructor(a,o,f,m){this.vectorLayerCache={},this.x=o,this.y=f,this.z=m,this.vectorTile=a}getTileData(a){return!a||!this.vectorTile.layers[a]?[]:this.vectorLayerCache[a]?this.vectorLayerCache[a]:this.vectorTile.layers[a].features}getFeatureById(){throw new Error("Method not implemented.")}},fi=Object.defineProperty,Ji=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,Ht=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable,Fn=(a,o,f)=>o in a?fi(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Bn=(a,o)=>{for(var f in o||(o={}))Ht.call(o,f)&&Fn(a,f,o[f]);if(ht)for(var f of ht(o))hn.call(o,f)&&Fn(a,f,o[f]);return a},yn=(a,o)=>Ji(a,$e(o)),On=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),pr={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function hr(a){let o=0;for(let f=0,m=a.length,w=m-1,C,D;f<m;w=f++)C=a[f],D=a[w],o+=(D.x-C.x)*(C.y+D.y);return o}function oi(a){const o=a.length;if(o<=1)return[a];const f=[];let m,w;for(let C=0;C<o;C++){const D=hr(a[C]);D!==0&&(w===void 0&&(w=D<0),w===D<0?(m&&f.push(m),m=[a[C]]):m.push(a[C]))}return m&&f.push(m),f}var Xi=["Unknown","Point","LineString","Polygon"];function io(a,o,f,m,w){let C=w.geometry;const D=w.type,B=w.tags,V=w.id,re=a*Math.pow(2,m),Te=a*o,Ae=a*f;let Fe=Xi[D],Mt,rn;function In(Cr){for(let vr=0;vr<Cr.length;vr++){const qr=Cr[vr];if(qr[3])break;const ri=180-(qr[1]+Ae)*360/re,po=(qr[0]+Te)*360/re-180,ho=360/Math.PI*Math.atan(Math.exp(ri*Math.PI/180))-90;Cr[vr]=[po,ho,0,1]}}switch(D){case 1:const Cr=[];for(Mt=0;Mt<C.length;Mt++)Cr[Mt]=C[Mt][0];C=Cr,In(C);break;case 2:for(Mt=0;Mt<C.length;Mt++)In(C[Mt]);break;case 3:for(C=oi(C),Mt=0;Mt<C.length;Mt++)for(rn=0;rn<C[Mt].length;rn++)In(C[Mt][rn]);break}return C.length===1?C=C[0]:Fe="Multi"+Fe,{type:"Feature",geometry:{type:Fe,coordinates:C},properties:B,id:V,tileOrigin:[0,0],coord:""}}var ai=(a,o,f,m)=>On(void 0,null,function*(){return new Promise(w=>{const C=o.getTile(a.z,a.x,a.y),B={layers:{defaultLayer:{features:C?C.features.map(re=>io(m,f.x,f.y,f.z,re)):[]}}},V=new _a(B,a.x,a.y,a.z);w(V)})});function Yi(a){const o={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return a===void 0||typeof a.geojsonvtOptions=="undefined"?o:Bn(Bn({},o),a.geojsonvtOptions)}function ji(a,o){const f=Yi(o),m=f.extent||4096,w=xi(a,f),C=(B,V)=>ai(V,w,B,m),D=yn(Bn(Bn({},pr),o),{getTileData:C});return{data:a,dataArray:[],tilesetOptions:D,isTile:!0}}var Yr=Object.defineProperty,To=Object.defineProperties,mi=Object.getOwnPropertyDescriptors,wo=Object.getOwnPropertySymbols,$i=Object.prototype.hasOwnProperty,co=Object.prototype.propertyIsEnumerable,Mo=(a,o,f)=>o in a?Yr(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,bs=(a,o)=>{for(var f in o||(o={}))$i.call(o,f)&&Mo(a,f,o[f]);if(wo)for(var f of wo(o))co.call(o,f)&&Mo(a,f,o[f]);return a},ba=(a,o)=>To(a,mi(o));function ra(a,o){const{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:m,requestParameters:w={}}=o,C=new Promise(V=>{a instanceof HTMLImageElement||(0,Ie.fg)(a)?V([a]):ms(a,w,re=>{V(re)})}),D=fn(m,f);return{originData:a,images:C,_id:1,dataArray:[{_id:0,coordinates:D}]}}function ms(a,o,f){const m=[];if(typeof a=="string")(0,Ie.gJ)(ba(bs({},o),{url:a}),(w,C)=>{C&&(m.push(C),f(m))});else{const w=a.length;let C=0;a.forEach(D=>{(0,Ie.gJ)(ba(bs({},o),{url:D}),(B,V)=>{C++,V&&m.push(V),C===w&&f(m)})})}return ra}var ls=Object.defineProperty,Ct=Object.defineProperties,Wt=Object.getOwnPropertyDescriptors,jn=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable,qi=(a,o,f)=>o in a?ls(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,ta=(a,o)=>{for(var f in o||(o={}))kr.call(o,f)&&qi(a,f,o[f]);if(jn)for(var f of jn(o))Ci.call(o,f)&&qi(a,f,o[f]);return a},Us=(a,o)=>Ct(a,Wt(o)),Ls=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),ks=(a,o,f,m)=>Ls(void 0,null,function*(){const w={x:o.x,y:o.y,z:o.z},C=(0,Ie.z0)(a,w);return new Promise(D=>{m?m(w,(B,V)=>{if(B||!V){const re={layers:{defaultLayer:{features:[]}}},Te=new _a(re,o.x,o.y,o.z);D(Te)}else{const re={layers:{defaultLayer:{features:V.features}}},Te=new _a(re,o.x,o.y,o.z);D(Te)}}):(0,Ie.Yu)(Us(ta({},f),{url:C}),(B,V)=>{if(B||!V){const re={layers:{defaultLayer:{features:[]}}},Te=new _a(re,o.x,o.y,o.z);D(Te)}else{const Te={layers:{defaultLayer:{features:JSON.parse(V)}}},Ae=new _a(Te,o.x,o.y,o.z);D(Ae)}})})});function ll(a,o){const f=(w,C)=>ks(a,C,o==null?void 0:o.requestParameters,o.getCustomData),m=Us(ta({},o),{getTileData:f});return{dataArray:[],tilesetOptions:m,isTile:!0}}var zh=L(38929),Up=L(3614),qf=L.n(Up),ru=Object.defineProperty,zf=Object.defineProperties,rf=Object.getOwnPropertyDescriptors,iu=Object.getOwnPropertySymbols,pu=Object.prototype.hasOwnProperty,of=Object.prototype.propertyIsEnumerable,bf=(a,o,f)=>o in a?ru(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Tu=(a,o)=>{for(var f in o||(o={}))pu.call(o,f)&&bf(a,f,o[f]);if(iu)for(var f of iu(o))of.call(o,f)&&bf(a,f,o[f]);return a},As=(a,o)=>zf(a,rf(o)),Xu=class{constructor(a,o,f,m){this.vectorLayerCache={},this.x=o,this.y=f,this.z=m,this.vectorTile=new zh.VectorTile(new(qf())(a))}getTileData(a){if(!a||!this.vectorTile.layers[a])return[];if(this.vectorLayerCache[a])return this.vectorLayerCache[a];const o=this.vectorTile.layers[a];if(Array.isArray(o.features))return this.vectorLayerCache[a]=o.features,o.features;const f=[];for(let m=0;m<o.length;m++){const C=o.feature(m).toGeoJSON(this.x,this.y,this.z);f.push(As(Tu({},C),{properties:Tu({id:C.id},C.properties)}))}return this.vectorLayerCache[a]=f,f}getFeatureById(){throw new Error("Method not implemented.")}},af=Object.defineProperty,_d=Object.defineProperties,Jd=Object.getOwnPropertyDescriptors,Uf=Object.getOwnPropertySymbols,bd=Object.prototype.hasOwnProperty,mh=Object.prototype.propertyIsEnumerable,Uh=(a,o,f)=>o in a?af(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,jh=(a,o)=>{for(var f in o||(o={}))bd.call(o,f)&&Uh(a,f,o[f]);if(Uf)for(var f of Uf(o))mh.call(o,f)&&Uh(a,f,o[f]);return a},xd=(a,o)=>_d(a,Jd(o)),l0=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),sf={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Fc=(a,o,f,m,w)=>l0(void 0,null,function*(){const C=(0,Ie.z0)(a,o);return new Promise(D=>{if(w)w({x:f.x,y:f.y,z:f.z},(B,V)=>{if(B||!V)D(void 0);else{const re=new Xu(V,f.x,f.y,f.z);D(re)}});else{const B=(0,Ie.ks)(xd(jh({},m),{url:C}),(V,re)=>{if(V||!re)D(void 0);else{const Te=new Xu(re,f.x,f.y,f.z);D(Te)}});f.xhrCancel=()=>B.cancel()}})});function Ed(a,o){const f=Array.isArray(a)?a[0]:a,m=(C,D)=>Fc(f,C,D,o==null?void 0:o.requestParameters,o==null?void 0:o.getCustomData),w=xd(jh(jh({},sf),o),{getTileData:m});return{data:f,dataArray:[],tilesetOptions:w,isTile:!0}}function Bl(a,o,f){switch(a){case"+":return o+f;case"-":return o-f;case"*":return o*f;case"/":return o/f;case"%":return o%f;case"^":return Math.pow(o,f);case"abs":return Math.abs(o);case"floor":return Math.floor(o);case"round":return Math.round(o);case"ceil":return Math.ceil(o);case"sin":return Math.sin(o);case"cos":return Math.cos(o);case"atan":return f===-1?Math.atan(o):Math.atan2(o,f);case"min":return Math.min(o,f);case"max":return Math.max(o,f);case"log10":return Math.log(o);case"log2":return Math.log2(o);default:return console.warn("Calculate symbol err! Return default 0"),0}}function bc(a,o){const{width:f,height:m}=o[0],w=o.map(V=>V.rasterData),C=f*m,D=[],B=JSON.stringify(a);for(let V=0;V<C;V++){const re=JSON.parse(B),Te=lf(re,w,V);if(typeof Te=="number")D.push(Te);else{const Ae=Bc(re);D.push(Ae)}}return D}function lf(a,o,f){if(a.length===2&&a[0]==="band"&&typeof a[1]=="number")try{return o[a[1]][f]}catch(m){return console.warn("Raster Data err!"),0}a.map((m,w)=>{if(Array.isArray(m)&&m.length>0)switch(m[0]){case"band":try{a[w]=o[m[1]][f]}catch(C){console.warn("Raster Data err!"),a[w]=0}break;default:lf(m,o,f)}})}function ou(a){const[o,f=-1,m=-1]=a;return o===void 0?(console.warn("Express err!"),["+",0,0]):[o.replace(/\s+/g,""),f,m]}function Bc(a){const o=ou(a),f=o[0];let m=o[1],w=o[2];return Array.isArray(m)&&(m=Bc(a[1])),Array.isArray(w)&&(w=Bc(a[2])),Bl(f,m,w)}var uc={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:xf}};function xf(a,o){const f=a[0].rasterData,m=a[1].rasterData,w=a[2].rasterData,C=[],[D,B]=(o==null?void 0:o.countCut)||[2,98],V=(o==null?void 0:o.RMinMax)||Ol(f,D,B),re=(o==null?void 0:o.GMinMax)||Ol(m,D,B),Te=(o==null?void 0:o.BMinMax)||Ol(w,D,B);for(let Ae=0;Ae<f.length;Ae++)C.push(Math.max(0,f[Ae]-V[0])),C.push(Math.max(0,m[Ae]-re[0])),C.push(Math.max(0,w[Ae]-Te[0]));return{rasterData:C,rMinMax:V,gMinMax:re,bMinMax:Te}}function Ol(a,o,f){const m=a.slice().sort((B,V)=>B-V),w=m.length,C=m[Math.ceil(w*o/100)],D=m[Math.ceil(w*f/100)];return[C,D]}var uf=Object.defineProperty,Ef=Object.defineProperties,Sd=Object.getOwnPropertyDescriptors,wd=Object.getOwnPropertySymbols,xs=Object.prototype.hasOwnProperty,ep=Object.prototype.propertyIsEnumerable,Kf=(a,o,f)=>o in a?uf(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Vh=(a,o)=>{for(var f in o||(o={}))xs.call(o,f)&&Kf(a,f,o[f]);if(wd)for(var f of wd(o))ep.call(o,f)&&Kf(a,f,o[f]);return a},ul=(a,o)=>Ef(a,Sd(o)),Hh=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())});function gh(a,o,f){return Hh(this,null,function*(){if(a.length===0)return{rasterData:[0],width:1,heigh:1};const m=yield Promise.all(a.map(({data:V,bands:re=[0]})=>o(V,re))),w=[];m.forEach(V=>{Array.isArray(V)?w.push(...V):w.push(V)});const{width:C,height:D}=w[0];let B;switch(typeof f){case"function":B=f(w);break;case"object":Array.isArray(f)?B={rasterData:bc(f,w)}:B=vu(f,w);break;default:B={rasterData:w[0].rasterData}}return ul(Vh({},B),{width:C,height:D})})}function vu(a,o){const f=uc[a.type];if(f.type==="function")return f.method(o,a==null?void 0:a.options);if(f.type==="operation")return a.type==="rgb"?kc(f.expression,o):{rasterData:bc(f.expression,o)}}function kc(a,o){a.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),a.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),a.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");const f=bc(a.r||["band",0],o),m=bc(a.g||["band",0],o),w=bc(a.b||["band",0],o);return[f,m,w]}function Au(a,o,f,m){return Hh(this,null,function*(){const w=yield gh(a,o,f);m(null,{data:w})})}function xc(a,o){const{extent:f=[121.168,30.2828,121.384,30.4219],coordinates:m,width:w,height:C,min:D,max:B,format:V,operation:re}=o;let Te,Ae,Fe;if(V===void 0||Ft(a))Te=Array.from(a),Ae=w,Fe=C;else{const In=Array.isArray(a)?a:[a];Te=gh(In,V,re)}const Mt=fn(m,f);return{_id:1,dataArray:[{_id:1,data:Te,width:Ae,height:Fe,min:D,max:B,coordinates:Mt}]}}var Se=L(88120),ie=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),ve=(a,o,f,m)=>ie(void 0,null,function*(){return new Promise((w,C)=>{o({x:a.x,y:a.y,z:a.z},(D,B)=>{if(D||B.length===0){C(D);return}B&&Au([{data:B,bands:[0]}],f,m,(V,re)=>{V?C(V):re&&w(re)})})})}),et=(a,o)=>ie(void 0,null,function*(){return new Promise((f,m)=>{o({x:a.x,y:a.y,z:a.z},(w,C)=>{if(w||!C){m(w);return}C instanceof ArrayBuffer?(0,Ie.Co)(C,(D,B)=>{D&&m(D),f(B)}):C instanceof HTMLImageElement?f(C):m(w)})})});function an(a,o){return Array.isArray(a)?typeof a[0]=="string"?a.map(f=>(0,Ie.z0)(f,o)):a.map(f=>({url:(0,Ie.z0)(f.url,o),bands:f.bands||[0]})):(0,Ie.z0)(a,o)}function cn(a){return typeof a=="string"?[{url:a,bands:[0]}]:typeof a[0]=="string"?a.map(o=>({url:o,bands:[0]})):a}function tr(a,o){a.xhrCancel=()=>{o.map(f=>{f.abort()})}}var Or=Object.defineProperty,Wr=Object.defineProperties,Fi=Object.getOwnPropertyDescriptors,xo=Object.getOwnPropertySymbols,_o=Object.prototype.hasOwnProperty,La=Object.prototype.propertyIsEnumerable,Na=(a,o,f)=>o in a?Or(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ta=(a,o)=>{for(var f in o||(o={}))_o.call(o,f)&&Na(a,f,o[f]);if(xo)for(var f of xo(o))La.call(o,f)&&Na(a,f,o[f]);return a},Ca=(a,o)=>Wr(a,Fi(o)),xa=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),Fa=(a,o,f,m,w)=>xa(void 0,null,function*(){const C=cn(o.url);if(C.length>1){const{rasterFiles:D,xhrList:B,errList:V}=yield Oa(C,o);if(tr(a,B),V.length>0){f(V,null);return}Au(D,m,w,f)}else{const D=(0,Ie.ks)(o,(B,V)=>{if(B)f(B);else if(V){const re=[{data:V,bands:C[0].bands}];Au(re,m,w,f)}});tr(a,[D])}});function Oa(a,o){return xa(this,null,function*(){const f=[],m=[],w=[];for(let C=0;C<a.length;C++){const D=a[C],B=Ca(Ta({},o),{url:D.url}),V=D.bands,{err:re,data:Te,xhr:Ae}=yield(0,Ie.LF)(Ca(Ta({},B),{type:"arrayBuffer"}));re&&w.push(re),m.push(Ae),f.push({data:Te,bands:V})}return{rasterFiles:f,xhrList:m,errList:w}})}var Za=Object.defineProperty,Sa=Object.defineProperties,ps=Object.getOwnPropertyDescriptors,Ws=Object.getOwnPropertySymbols,$s=Object.prototype.hasOwnProperty,Ec=Object.prototype.propertyIsEnumerable,pl=(a,o,f)=>o in a?Za(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,cc=(a,o)=>{for(var f in o||(o={}))$s.call(o,f)&&pl(a,f,o[f]);if(Ws)for(var f of Ws(o))Ec.call(o,f)&&pl(a,f,o[f]);return a},cf=(a,o)=>Sa(a,ps(o)),fc=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),zc=(a,o,f,m)=>fc(void 0,null,function*(){const{format:w=jf,operation:C,requestParameters:D={}}=m,B=cf(cc({},D),{url:an(a,o)});return new Promise((V,re)=>{Fa(f,B,(Te,Ae)=>{Te?re(Te):Ae&&V(Ae)},w,C)})}),Qf=(a,o,f,m)=>fc(void 0,null,function*(){let w;const C=Array.isArray(a)?a[0]:a;return m.wmtsOptions?w=((m==null?void 0:m.getURLFromTemplate)||Ie.jG)(C,cc(cc({},o),m.wmtsOptions)):w=((m==null?void 0:m.getURLFromTemplate)||Ie.z0)(C,o),new Promise((D,B)=>{var V;const re=(0,Ie.gJ)(cf(cc({},m==null?void 0:m.requestParameters),{url:w,type:((V=m==null?void 0:m.requestParameters)==null?void 0:V.type)||"arrayBuffer"}),(Te,Ae)=>{Te?B(Te):Ae&&D(Ae)},m.transformResponse);f.xhrCancel=()=>re.cancel()})}),jf=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),u0=Object.defineProperty,tp=Object.defineProperties,jp=Object.getOwnPropertyDescriptors,Sf=Object.getOwnPropertySymbols,c0=Object.prototype.hasOwnProperty,np=Object.prototype.propertyIsEnumerable,Td=(a,o,f)=>o in a?u0(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,wf=(a,o)=>{for(var f in o||(o={}))c0.call(o,f)&&Td(a,f,o[f]);if(Sf)for(var f of Sf(o))np.call(o,f)&&Td(a,f,o[f]);return a},Vp=(a,o)=>tp(a,jp(o)),yh={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},rp=[Se.n3.ARRAYBUFFER,Se.n3.RGB];function Jf(a){return!!(Array.isArray(a)&&a.length===0||!Array.isArray(a)&&typeof a!="string")}function qs(a,o={}){if(Jf(a))throw new Error("tile server url is error");let f=(o==null?void 0:o.dataType)||Se.n3.IMAGE;f===Se.n3.RGB&&(f=Se.n3.ARRAYBUFFER);const m=(C,D)=>{switch(f){case Se.n3.IMAGE:return Qf(a,C,D,o);case Se.n3.CUSTOMIMAGE:case Se.n3.CUSTOMTERRAINRGB:return et(D,o==null?void 0:o.getCustomData);case Se.n3.ARRAYBUFFER:return zc(a,C,D,o);case Se.n3.CUSTOMARRAYBUFFER:case Se.n3.CUSTOMRGB:return ve(D,o==null?void 0:o.getCustomData,(o==null?void 0:o.format)||jf,o==null?void 0:o.operation);default:return Qf(a,C,D,o)}},w=Vp(wf(wf({},yh),o),{getTileData:m});return{data:a,dataArray:[],tilesetOptions:w,isTile:!0}}var Ad=Object.defineProperty,Tf=Object.defineProperties,eh=Object.getOwnPropertyDescriptors,Ha=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable,Et=(a,o,f)=>o in a?Ad(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Pn=(a,o)=>{for(var f in o||(o={}))ce.call(o,f)&&Et(a,f,o[f]);if(Ha)for(var f of Ha(o))He.call(o,f)&&Et(a,f,o[f]);return a},ur=(a,o)=>Tf(a,eh(o)),zr=(a,o)=>{var f={};for(var m in a)ce.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&Ha)for(var m of Ha(a))o.indexOf(m)<0&&He.call(a,m)&&(f[m]=a[m]);return f};function pi(a,o){const f=o,{extent:m=[121.168,30.2828,121.384,30.4219],coordinates:w,width:C,height:D}=f,B=zr(f,["extent","coordinates","width","height"]);a.length<2&&console.warn("RGB\u89E3\u6790\u9700\u89812\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[V,re]=B.bands||[0,1],Te=[a[V],a[re]],Ae=[];for(let rn=0;rn<Te[0].length;rn++)Ae.push((Te[1][rn]-Te[0][rn])/(Te[1][rn]+Te[0][rn]));const Fe=fn(w,m);return{_id:1,dataArray:[ur(Pn({_id:1,data:Ae,width:C,height:D},B),{coordinates:Fe})]}}var Ii=Object.defineProperty,Zo=Object.defineProperties,Go=Object.getOwnPropertyDescriptors,la=Object.getOwnPropertySymbols,Js=Object.prototype.hasOwnProperty,bl=Object.prototype.propertyIsEnumerable,Es=(a,o,f)=>o in a?Ii(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,oo=(a,o)=>{for(var f in o||(o={}))Js.call(o,f)&&Es(a,f,o[f]);if(la)for(var f of la(o))bl.call(o,f)&&Es(a,f,o[f]);return a},Ml=(a,o)=>Zo(a,Go(o)),_h=(a,o)=>{var f={};for(var m in a)Js.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&la)for(var m of la(a))o.indexOf(m)<0&&bl.call(a,m)&&(f[m]=a[m]);return f};function Gh(a,o){const f=o,{extent:m,coordinates:w,width:C,height:D}=f,B=_h(f,["extent","coordinates","width","height"]);a.length<3&&console.warn("RGB\u89E3\u6790\u9700\u8981\u4E09\u4E2A\u6CE2\u6BB5\u7684\u6570\u636E");const[V,re,Te]=B.bands||[0,1,2],Ae=[a[V],a[re],a[Te]],Fe=[],[Mt,rn]=(B==null?void 0:B.countCut)||[2,98],In=(B==null?void 0:B.RMinMax)||Ol(Ae[0],Mt,rn),ar=(B==null?void 0:B.GMinMax)||Ol(Ae[1],Mt,rn),Cr=(B==null?void 0:B.BMinMax)||Ol(Ae[2],Mt,rn);for(let ri=0;ri<Ae[0].length;ri++)Fe.push(Math.max(0,Ae[0][ri]-In[0])),Fe.push(Math.max(0,Ae[1][ri]-ar[0])),Fe.push(Math.max(0,Ae[2][ri]-Cr[0]));const vr=fn(w,m);return{_id:1,dataArray:[Ml(oo({_id:1,data:Fe,width:C,height:D,rMinMax:In,gMinMax:ar,bMinMax:Cr},B),{coordinates:vr})]}}var Ja=Object.defineProperty,Ns=Object.defineProperties,ff=Object.getOwnPropertyDescriptors,Ui=Object.getOwnPropertySymbols,Af=Object.prototype.hasOwnProperty,Cd=Object.prototype.propertyIsEnumerable,bh=(a,o,f)=>o in a?Ja(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Cf=(a,o)=>{for(var f in o||(o={}))Af.call(o,f)&&bh(a,f,o[f]);if(Ui)for(var f of Ui(o))Cd.call(o,f)&&bh(a,f,o[f]);return a},hc=(a,o)=>Ns(a,ff(o)),f0=(a,o)=>{var f={};for(var m in a)Af.call(a,m)&&o.indexOf(m)<0&&(f[m]=a[m]);if(a!=null&&Ui)for(var m of Ui(a))o.indexOf(m)<0&&Cd.call(a,m)&&(f[m]=a[m]);return f};function xh(a,o){const f=o,{extent:m,coordinates:w,min:C,max:D,width:B,height:V,format:re,operation:Te}=f,Ae=f0(f,["extent","coordinates","min","max","width","height","format","operation"]);let Fe;if(re===void 0||Ft(a))Fe=Array.from(a);else{const In=Array.isArray(a)?a:[a];Fe=gh(In,re,Te)}const Mt=fn(w,m);return{_id:1,dataArray:[hc(Cf({_id:1,data:Fe,width:B,height:V},Ae),{min:C,max:D,coordinates:Mt})]}}var Yu=Object.defineProperty,th=Object.defineProperties,h0=Object.getOwnPropertyDescriptors,Od=Object.getOwnPropertySymbols,d0=Object.prototype.hasOwnProperty,Z0=Object.prototype.propertyIsEnumerable,dc=(a,o,f)=>o in a?Yu(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Uc=(a,o)=>{for(var f in o||(o={}))d0.call(o,f)&&dc(a,f,o[f]);if(Od)for(var f of Od(o))Z0.call(o,f)&&dc(a,f,o[f]);return a},Aa=(a,o)=>th(a,h0(o)),pc=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),hf={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},mu=a=>pc(void 0,null,function*(){return new Promise(o=>{const[f,m,w,C]=a.bounds,D={layers:{testTile:{features:[{type:"Feature",properties:{key:a.x+"/"+a.y+"/"+a.z,x:(f+w)/2,y:(m+C)/2},geometry:{type:"LineString",coordinates:[[w,C],[w,m],[f,m],[f,m]]}}]}}};o(D)})});function Wh(a,o){const f=w=>mu(w),m=Aa(Uc(Uc({},hf),o),{getTileData:f});return{data:a,dataArray:[],tilesetOptions:m,isTile:!0}}var Hl=L(46343),zu=L(26729),$u=L.n(zu),ip=L(69848),Bo=L.n(ip),Ao=Object.defineProperty,Gl=Object.getOwnPropertySymbols,qu=Object.prototype.hasOwnProperty,Ku=Object.prototype.propertyIsEnumerable,cl=(a,o,f)=>o in a?Ao(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Sc=(a,o)=>{for(var f in o||(o={}))qu.call(o,f)&&cl(a,f,o[f]);if(Gl)for(var f of Gl(o))Ku.call(o,f)&&cl(a,f,o[f]);return a};function nh(a,o){const{radius:f=40,maxZoom:m=18,minZoom:w=0,zoom:C=2}=o;if(a.pointIndex){const V=a.pointIndex.getClusters(a.extent,Math.floor(C));return a.dataArray=Md(V),a}const D=new(Bo())({radius:f,minZoom:w,maxZoom:m}),B={type:"FeatureCollection",features:[]};return B.features=a.dataArray.map(V=>({type:"Feature",geometry:{type:"Point",coordinates:V.coordinates},properties:Sc({},V)})),D.load(B.features),D}function Md(a){return a.map((o,f)=>Sc({coordinates:o.geometry.coordinates,_id:f+1},o.properties))}function Cs(a){if(a.length===0)throw new Error("max requires at least one data point");let o=a[0];for(let f=1;f<a.length;f++)a[f]>o&&(o=a[f]);return o}function gu(a){if(a.length===0)throw new Error("min requires at least one data point");let o=a[0];for(let f=1;f<a.length;f++)a[f]<o&&(o=a[f]);return o}function p0(a){if(a.length===0)return 0;let o=a[0],f=0,m;for(let w=1;w<a.length;w++)m=o+a[w]*1,Math.abs(o)>=Math.abs(a[w])?f+=o-m+a[w]:f+=a[w]-m+o,o=m;return o+f*1}function Zh(a){if(a.length===0)throw new Error("mean requires at least one data point");return p0(a)/a.length}var op={min:gu,max:Cs,mean:Zh,sum:p0},Eh=Object.defineProperty,Qu=Object.getOwnPropertySymbols,ap=Object.prototype.hasOwnProperty,wc=Object.prototype.propertyIsEnumerable,Hp=(a,o,f)=>o in a?Eh(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,jc=(a,o)=>{for(var f in o||(o={}))ap.call(o,f)&&Hp(a,f,o[f]);if(Qu)for(var f of Qu(o))wc.call(o,f)&&Hp(a,f,o[f]);return a},Rd=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),{cloneDeep:v0,isFunction:Sh,isString:Xh,mergeWith:m0}=Ie.lodashUtil;function Vf(a,o){if(Array.isArray(o))return o}var Hf=class extends zu.EventEmitter{constructor(a,o){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new Hl.ni},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=a,this.initCfg(o),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"})})}getSourceCfg(){return this.cfg}getClusters(a){return this.clusterIndex.getClusters(this.caculClusterExtent(2),a)}getClustersLeaves(a){return this.clusterIndex.getLeaves(a,1/0)}getParserType(){return this.parser.type}updateClusterData(a){const{method:o="sum",field:f}=this.clusterOptions;let m=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(a));this.clusterOptions.zoom=a,m.forEach(w=>{w.id||(w.properties.point_count=1)}),(f||Sh(o))&&(m=m.map(w=>{const C=w.id;if(C){const B=this.clusterIndex.getLeaves(C,1/0).map(re=>re.properties);let V;if(Xh(o)&&f){const re=Tn(B,f);V=op[o](re)}Sh(o)&&(V=o(B)),w.properties.stat=V}else w.properties.point_count=1;return w})),this.data=E("geojson")({type:"FeatureCollection",features:m}),this.executeTrans()}getFeatureById(a){const{type:o="geojson",geometry:f}=this.parser;if(o==="geojson"&&!this.cluster){const m=a<this.originData.features.length?this.originData.features[a]:"null",w=v0(m);if(w!=null&&w.properties&&(this.transforms.length!==0||this.dataArrayChanged)){const C=this.data.dataArray.find(D=>D._id===a);w.properties=C}return w}else return o==="json"&&f?this.data.dataArray.find(m=>m._id===a):a<this.data.dataArray.length?this.data.dataArray[a]:"null"}updateFeaturePropertiesById(a,o){this.data.dataArray=this.data.dataArray.map(f=>f._id===a?jc(jc({},f),o):f),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}getFeatureId(a,o){const f=this.data.dataArray.find(m=>m[a]===o);return f==null?void 0:f._id}setData(a,o){this.originData=a,this.dataArrayChanged=!1,this.initCfg(o),this.init().then(()=>{this.emit("update",{type:"update"})})}reloadAllTile(){var a;(a=this.tileset)==null||a.reloadAll()}reloadTilebyId(a,o,f){var m;(m=this.tileset)==null||m.reloadTileById(a,o,f)}reloadTileByLnglat(a,o,f){var m;(m=this.tileset)==null||m.reloadTileByLnglat(a,o,f)}getTileExtent(a,o){var f;return(f=this.tileset)==null?void 0:f.getTileExtent(a,o)}getTileByZXY(a,o,f){var m;return(m=this.tileset)==null?void 0:m.getTileByZXY(a,o,f)}reloadTileByExtent(a,o){var f;(f=this.tileset)==null||f.reloadTileByExtent(a,o)}destroy(){var a;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(a=this.tileset)==null||a.destroy()}processData(){return Rd(this,null,function*(){return new Promise((a,o)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),a({})}catch(f){o(f)}})})}initCfg(a){this.cfg=m0(this.cfg,a,Vf);const o=this.cfg;o&&(o.parser&&(this.parser=o.parser),o.transforms&&(this.transforms=o.transforms),this.cluster=o.cluster||!1,o.clusterOptions&&(this.cluster=!0,this.clusterOptions=jc(jc({},this.clusterOptions),o.clusterOptions)))}init(){return Rd(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0})}excuteParser(){const a=this.parser,o=a.type||"geojson",f=E(o);this.data=f(this.originData,a),this.tileset=this.initTileset(),!a.cancelExtent&&(this.extent=(0,Ie.We)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}setCenter(a){this.center=[(a[0]+a[2])/2,(a[1]+a[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}initTileset(){const{tilesetOptions:a}=this.data;return a?(this.isTile=!0,this.tileset?(this.tileset.updateOptions(a),this.tileset):new Ie.nx(jc({},a))):void 0}executeTrans(){this.transforms.forEach(o=>{const{type:f}=o,m=ee(f)(this.data,o);Object.assign(this.data,m)})}initCluster(){if(!this.cluster)return;const a=this.clusterOptions||{};this.clusterIndex=nh(this.data,a)}caculClusterExtent(a){let o=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(o=(0,Ie.yA)((0,Ie.ds)(this.extent),a)),o[0].concat(o[1])}};function g0(a,o){const{callback:f}=o;return f&&(a.dataArray=a.dataArray.filter(f)),a}var rh=6378e3;function Of(a,o){const f=a.dataArray,{size:m=10}=o,w=m/(2*Math.PI*rh)*(256<<20)/2,{gridHash:C,gridOffset:D}=X0(f,m),B=_(C,D,o);return{yOffset:w,xOffset:w,radius:w,type:"grid",dataArray:B}}function X0(a,o){let f=1/0,m=-1/0,w;for(const V of a)w=V.coordinates[1],Number.isFinite(w)&&(f=w<f?w:f,m=w>m?w:m);const C=(f+m)/2,D=Gf(o,C);if(D.xOffset<=0||D.yOffset<=0)return{gridHash:{},gridOffset:D};const B={};for(const V of a){const re=V.coordinates[1],Te=V.coordinates[0];if(Number.isFinite(re)&&Number.isFinite(Te)){const Ae=Math.floor((re+90)/D.yOffset),Fe=Math.floor((Te+180)/D.xOffset),Mt=`${Ae}-${Fe}`;B[Mt]=B[Mt]||{count:0,points:[]},B[Mt].count+=1,B[Mt].points.push(V)}}return{gridHash:B,gridOffset:D}}function Gf(a,o){const f=Yh(a),m=y0(o,a);return{yOffset:f,xOffset:m}}function Yh(a){return a/rh*(180/Math.PI)}function y0(a,o){return o/rh*(180/Math.PI)/Math.cos(a*Math.PI/180)}function _(a,o,f){return Object.keys(a).reduce((m,w,C)=>{const D=w.split("-"),B=parseInt(D[0],10),V=parseInt(D[1],10),re={};if(f.field&&f.method){const Te=Ie.a5.getColumn(a[w].points,f.field);re[f.method]=Ie.a5.statMap[f.method](Te)}return Object.assign(re,{_id:C,coordinates:(0,Ie.Z)([-180+o.xOffset*(V+.5),-90+o.yOffset*(B+.5)]),rawData:a[w].points,count:a[w].count}),m.push(re),m},[])}var S=Math.PI/3,x=[0,S,2*S,3*S,4*S,5*S];function O(a){return a[0]}function k(a){return a[1]}function Z(){var a=0,o=0,f=1,m=1,w=O,C=k,D,B,V;function re(Ae){var Fe={},Mt=[],rn,In=Ae.length;for(rn=0;rn<In;++rn)if(!(isNaN(Cr=+w.call(null,ar=Ae[rn],rn,Ae))||isNaN(vr=+C.call(null,ar,rn,Ae)))){var ar,Cr,vr,qr=Math.round(vr=vr/V),ri=Math.round(Cr=Cr/B-(qr&1)/2),po=vr-qr;if(Math.abs(po)*3>1){var ho=Cr-ri,Xr=ri+(Cr<ri?-1:1)/2,lo=qr+(vr<qr?-1:1),za=Cr-Xr,Ps=vr-lo;ho*ho+po*po>za*za+Ps*Ps&&(ri=Xr+(qr&1?1:-1)/2,qr=lo)}var zi=ri+"-"+qr,_s=Fe[zi];_s?_s.push(ar):(Mt.push(_s=Fe[zi]=[ar]),_s.x=(ri+(qr&1)/2)*B,_s.y=qr*V)}return Mt}function Te(Ae){var Fe=0,Mt=0;return x.map(function(rn){var In=Math.sin(rn)*Ae,ar=-Math.cos(rn)*Ae,Cr=In-Fe,vr=ar-Mt;return Fe=In,Mt=ar,[Cr,vr]})}return re.hexagon=function(Ae){return"m"+Te(Ae==null?D:+Ae).join("l")+"z"},re.centers=function(){for(var Ae=[],Fe=Math.round(o/V),Mt=Math.round(a/B),rn=Fe*V;rn<m+D;rn+=V,++Fe)for(var In=Mt*B+(Fe&1)*B/2;In<f+B/2;In+=B)Ae.push([In,rn]);return Ae},re.mesh=function(){var Ae=Te(D).slice(0,4).join("l");return re.centers().map(function(Fe){return"M"+Fe+"m"+Ae}).join("")},re.x=function(Ae){return arguments.length?(w=Ae,re):w},re.y=function(Ae){return arguments.length?(C=Ae,re):C},re.radius=function(Ae){return arguments.length?(D=+Ae,B=D*2*Math.sin(S),V=D*1.5,re):D},re.size=function(Ae){return arguments.length?(a=o=0,f=+Ae[0],m=+Ae[1],re):[f-a,m-o]},re.extent=function(Ae){return arguments.length?(a=+Ae[0][0],o=+Ae[0][1],f=+Ae[1][0],m=+Ae[1][1],re):[[a,o],[f,m]]},re.radius(1)}var Q=Object.defineProperty,ge=Object.defineProperties,je=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,Ut=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable,Zt=(a,o,f)=>o in a?Q(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,En=(a,o)=>{for(var f in o||(o={}))Ut.call(o,f)&&Zt(a,f,o[f]);if(ft)for(var f of ft(o))Vt.call(o,f)&&Zt(a,f,o[f]);return a},mn=(a,o)=>ge(a,je(o)),Un=6378e3;function ln(a,o){const f=a.dataArray,{size:m=10,method:w="sum"}=o,C=m/(2*Math.PI*Un)*(256<<20)/2,D=f.map(Te=>{const[Ae,Fe]=(0,Ie.Z)(Te.coordinates);return mn(En({},Te),{coordinates:[Ae,Fe]})});return{dataArray:Z().radius(C).x(Te=>Te.coordinates[0]).y(Te=>Te.coordinates[1])(D).map((Te,Ae)=>{if(o.field&&w){const Fe=Ie.a5.getColumn(Te,o.field);Te[w]=Ie.a5.statMap[w](Fe)}return{[o.method]:Te[w],count:Te.length,rawData:Te,coordinates:[Te.x,Te.y],_id:Ae}}),radius:C,xOffset:C,yOffset:C,type:"hexagon"}}var kn=Object.defineProperty,Jn=Object.getOwnPropertySymbols,gr=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,Mr=(a,o,f)=>o in a?kn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Ur=(a,o)=>{for(var f in o||(o={}))gr.call(o,f)&&Mr(a,f,o[f]);if(Jn)for(var f of Jn(o))Ir.call(o,f)&&Mr(a,f,o[f]);return a};function si(a,o){const{sourceField:f,targetField:m,data:w}=o,C={};return w.forEach(D=>{C[D[f]]=D}),a.dataArray=a.dataArray.map(D=>{const B=D[m];return Ur(Ur({},D),C[B])}),a}function Vi(a,o){const{callback:f}=o;return f&&(a.dataArray=a.dataArray.map(f)),a}var Bi=L(4771);he("rasterTile",qs),he("mvt",Ed),he("geojsonvt",ji),he("testTile",Wh),he("geojson",Yn),he("jsonTile",ll),he("image",ra),he("csv",de),he("json",at),he("raster",xc),he("rasterRgb",xh),he("rgb",Gh),he("ndi",pi),se("cluster",nh),se("filter",g0),se("join",si),se("map",Vi),se("grid",Of),se("hexagon",ln);var vo=Hf;class jo extends null{getMarkerLayerContainerSize(){}constructor(o){super(),_defineProperty(this,"markerOption",void 0),_defineProperty(this,"popup",void 0),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"lngLat",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"added",!1),_defineProperty(this,"preLngLat",{lng:0,lat:0}),_defineProperty(this,"onMarkerDragStart",f=>{const m=this.mapsService.getContainer();if(!m)return;this.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});const{left:w,top:C}=m.getClientRects()[0],{x:D,y:B}=f;this.preLngLat=this.mapsService.containerToLngLat([D-w,B-C]),this.mapsService.on("mousemove",this.onMarkerDragMove),document.addEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragstart",this.lngLat)}),_defineProperty(this,"onMarkerDragMove",f=>{const{lng:m,lat:w}=this.preLngLat,{lng:C,lat:D}=f.lnglat,B={lng:this.lngLat.lng+C-m,lat:this.lngLat.lat+D-w};this.setLnglat(B),this.preLngLat=f.lnglat,this.emit("dragging",B)}),_defineProperty(this,"onMarkerDragEnd",()=>{this.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragend",this.lngLat)}),_defineProperty(this,"eventHandle",f=>{this.polyfillEvent(f),this.emit(f.type,{target:f,data:this.markerOption.extData,lngLat:this.lngLat})}),_defineProperty(this,"touchStartTime",void 0),this.markerOption=_objectSpread(_objectSpread({},this.getDefault()),o),bindAll(["update","onMove","onMapClick","updatePositionWhenZoom"],this),this.init()}getDefault(){return{element:void 0,anchor:anchorType.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}addTo(o){this.scene=o,this.mapsService=o.mapService;const{element:f}=this.markerOption;return this.mapsService.getMarkerContainer().appendChild(f),this.registerMarkerEvent(f),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this}remove(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();const{element:o}=this.markerOption;return o&&DOM.remove(o),this.popup&&this.popup.remove(),this}setLnglat(o){return this.lngLat=o,Array.isArray(o)&&(this.lngLat={lng:o[0],lat:o[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}getLnglat(){return this.lngLat}getElement(){return this.markerOption.element}setElement(o){if(!this.added)return this.once("added",()=>{this.setElement(o)}),this;const{element:f}=this.markerOption;return f&&DOM.remove(f),this.markerOption.element=o,this.init(),this.mapsService.getMarkerContainer().appendChild(o),this.registerMarkerEvent(o),this.updateDraggable(),this.update(),this}openPopup(){if(!this.added)return this.once("added",()=>{this.openPopup()}),this;const o=this.popup;return o?(o.isOpen()||o.addTo(this.scene),this):this}closePopup(){this.added||this.once("added",()=>{this.closePopup()});const o=this.popup;return o&&o.remove(),this}setPopup(o){return this.popup=o,this.lngLat&&this.popup.setLnglat(this.lngLat),this}togglePopup(){const o=this.popup;if(o)o.isOpen()?o.remove():o.addTo(this.scene);else return this;return this}getPopup(){return this.popup}getOffset(){return this.markerOption.offsets}setDraggable(o){this.markerOption.draggable=o,this.updateDraggable()}getDraggable(){return this.markerOption.draggable}getExtData(){return this.markerOption.extData}setExtData(o){this.markerOption.extData=o}update(){if(!this.mapsService)return;const{element:o,anchor:f}=this.markerOption;this.updatePosition(),DOM.setTransform(o,`${anchorTranslate[f]}`)}updatePositionWhenZoom(o){if(!this.mapsService)return;const{element:f,offsets:m}=this.markerOption,{lng:w,lat:C}=this.lngLat;if(f){f.style.display="block",f.style.whiteSpace="nowrap";const{containerHeight:D,containerWidth:B,bounds:V}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!V)return;const re=o.map,Te=o.center,Ae=o.zoom,Fe=re.DE(this.lngLat,Ae,Te);if(Fe.x=Math.round(Fe.x+m[0]),Fe.y=Math.round(Fe.y-m[1]),Math.abs(V[0][0])>180||Math.abs(V[1][0])>180){if(Fe.x>B){const Mt=this.mapsService.lngLatToContainer([w-360,C]);Fe.x=Mt.x}if(Fe.x<0){const Mt=this.mapsService.lngLatToContainer([w+360,C]);Fe.x=Mt.x}}(Fe.x>B||Fe.x<0||Fe.y>D||Fe.y<0)&&(f.style.display="none"),f.style.left=Fe.x+"px",f.style.top=Fe.y+"px",f.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)"}}onMapClick(o){const{element:f}=this.markerOption;this.popup&&f&&this.togglePopup()}getCurrentContainerSize(){const o=this.mapsService.getContainer();return{containerHeight:(o==null?void 0:o.scrollHeight)||0,containerWidth:(o==null?void 0:o.scrollWidth)||0,bounds:this.mapsService.getBounds()}}updateDraggable(){const{element:o}=this.markerOption;o==null||o.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&(o==null||o.addEventListener("mousedown",this.onMarkerDragStart))}updatePosition(){if(!this.mapsService)return;const{element:o,offsets:f}=this.markerOption,{lng:m,lat:w}=this.lngLat,C=this.mapsService.lngLatToContainer([m,w]);if(o){o.style.display="block",o.style.whiteSpace="nowrap";const{containerHeight:D,containerWidth:B,bounds:V}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!V)return;if(Math.abs(V[0][0])>180||Math.abs(V[1][0])>180){if(C.x>B){const re=this.mapsService.lngLatToContainer([m-360,w]);C.x=re.x}if(C.x<0){const re=this.mapsService.lngLatToContainer([m+360,w]);C.x=re.x}}(C.x>B||C.x<0||C.y>D||C.y<0)&&(o.style.display="none"),o.style.left=C.x+f[0]+"px",o.style.top=C.y-f[1]+"px"}}init(){let{element:o}=this.markerOption;const{color:f,anchor:m}=this.markerOption;if(!o){o=DOM.create("div"),this.markerOption.element=o;const w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttributeNS(null,"display","block"),w.setAttributeNS(null,"height","48px"),w.setAttributeNS(null,"width","48px"),w.setAttributeNS(null,"viewBox","0 0 1024 1024");const C=document.createElementNS("http://www.w3.org/2000/svg","path");C.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),C.setAttributeNS(null,"fill",f),w.appendChild(C),o.appendChild(w)}DOM.addClass(o,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(w=>{var C,D;const B=((C=this.markerOption)===null||C===void 0?void 0:C.style)&&((D=this.markerOption)===null||D===void 0?void 0:D.style[w]);o&&(o.style[w]=B)}),applyAnchorClass(o,m,"marker")}registerMarkerEvent(o){o.addEventListener("click",this.onMapClick),o.addEventListener("mousemove",this.eventHandle),o.addEventListener("click",this.eventHandle),o.addEventListener("mousedown",this.eventHandle),o.addEventListener("mouseup",this.eventHandle),o.addEventListener("dblclick",this.eventHandle),o.addEventListener("contextmenu",this.eventHandle),o.addEventListener("mouseover",this.eventHandle),o.addEventListener("mouseout",this.eventHandle),o.addEventListener("touchstart",this.eventHandle),o.addEventListener("touchend",this.eventHandle)}unRegisterMarkerEvent(){const o=this.getElement();o.removeEventListener("click",this.onMapClick),o.removeEventListener("mousemove",this.eventHandle),o.removeEventListener("click",this.eventHandle),o.removeEventListener("mousedown",this.eventHandle),o.removeEventListener("mouseup",this.eventHandle),o.removeEventListener("dblclick",this.eventHandle),o.removeEventListener("contextmenu",this.eventHandle),o.removeEventListener("mouseover",this.eventHandle),o.removeEventListener("mouseout",this.eventHandle),o.removeEventListener("touchstart",this.eventHandle),o.removeEventListener("touchend",this.eventHandle)}polyfillEvent(o){!this.mapsService||this.mapsService.version!=="GAODE2.x"||isPC()||(o.type==="touchstart"&&(this.touchStartTime=Date.now()),o.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:o,data:this.markerOption.extData,lngLat:this.lngLat}))}addDragHandler(o){return null}onUp(o){throw new Error("Method not implemented.")}}const{merge:Xo}=Ie.lodashUtil;class Yo extends null{constructor(o){var f;super(),_defineProperty(this,"markers",[]),_defineProperty(this,"markerLayerOption",void 0),_defineProperty(this,"clusterIndex",void 0),_defineProperty(this,"points",[]),_defineProperty(this,"clusterMarkers",[]),_defineProperty(this,"mapsService",void 0),_defineProperty(this,"scene",void 0),_defineProperty(this,"zoom",void 0),_defineProperty(this,"bbox",void 0),_defineProperty(this,"inited",void 0),_defineProperty(this,"containerSize",void 0),this.markerLayerOption=Xo(this.getDefault(),o),bindAll(["update"],this),this.zoom=((f=this.markerLayerOption.clusterOption)===null||f===void 0?void 0:f.zoom)||-99}getDefault(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}addTo(o){return this.scene=o,this.mapsService=o.mapService,this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}setContainerSize(){if(!this.mapsService)return;const o=this.mapsService.getContainer();this.containerSize={containerWidth:(o==null?void 0:o.scrollWidth)||0,containerHeight:(o==null?void 0:o.scrollHeight)||0,bounds:this.mapsService.getBounds()}}getContainerSize(){return this.containerSize}addMarker(o){const f=this.markerLayerOption.cluster;if(o.getMarkerLayerContainerSize=this.getContainerSize.bind(this),f&&(this.addPoint(o,this.markers.length),this.mapsService)){const m=this.mapsService.getZoom(),w=this.mapsService.getBounds();this.bbox=padBounds(w,.5),this.zoom=Math.floor(m),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(o)}removeMarker(o){this.markers.indexOf(o);const f=this.markers.indexOf(o);f>-1&&(this.markers.splice(f,1),this.markerLayerOption.cluster&&(this.removePoint(f),this.mapsService&&this.getClusterMarker(this.bbox,this.zoom)))}hide(){this.markers.map(o=>{o.getElement().style.opacity="0"}),this.clusterMarkers.map(o=>{o.getElement().style.opacity="0"})}show(){this.markers.map(o=>{o.getElement().style.opacity="1"}),this.clusterMarkers.map(o=>{o.getElement().style.opacity="1"})}getMarkers(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}getOriginMarkers(){return this.markers}addMarkers(){this.getMarkers().forEach(o=>{o.addTo(this.scene)})}clear(){this.markers.forEach(o=>{o.remove()}),this.clusterMarkers.forEach(o=>{o.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}destroy(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}addPoint(o,f){const{lng:m,lat:w}=o.getLnglat(),C={geometry:{type:"Point",coordinates:[m,w]},properties:_objectSpread(_objectSpread({},o.getExtData()),{},{marker_id:f})};this.points.push(C),this.clusterIndex&&this.clusterIndex.load(this.points)}removePoint(o){const f=this.points.findIndex(m=>m.properties.marker_id===o);f>-1&&this.points.splice(f,1),this.clusterIndex&&this.clusterIndex.load(this.points)}initCluster(){if(!this.markerLayerOption.cluster)return;const{radius:o,minZoom:f=0,maxZoom:m}=this.markerLayerOption.clusterOption;this.clusterIndex=new Supercluster({radius:o,minZoom:f,maxZoom:m}),this.clusterIndex.load(this.points)}getClusterMarker(o,f){const m=o[0].concat(o[1]),w=this.clusterIndex.getClusters(m,f);this.clusterMarkers.forEach(C=>{C.remove()}),this.clusterMarkers=[],w.forEach(C=>{var D;const{field:B,method:V}=this.markerLayerOption.clusterOption;if((D=C.properties)!==null&&D!==void 0&&D.cluster_id){var re;const Ae=this.getLeaves((re=C.properties)===null||re===void 0?void 0:re.cluster_id);if(C.properties.clusterData=Ae,B&&V){const Fe=Ae==null?void 0:Ae.map(ar=>({[B]:ar.properties[B]})),Mt=Satistics.getColumn(Fe,B),rn=Satistics.getSatByColumn(V,Mt),In="point_"+V;C.properties[In]=rn.toFixed(2)}}const Te=this.clusterMarker(C);this.clusterMarkers.push(Te),Te.addTo(this.scene)})}getLeaves(o,f=1/0,m=0){return o?this.clusterIndex.getLeaves(o,f,m):null}clusterMarker(o){const f=this.markerLayerOption.clusterOption,{element:m=this.generateElement.bind(this)}=f;return new Marker({element:m(o)}).setLnglat({lng:o.geometry.coordinates[0],lat:o.geometry.coordinates[1]})}normalMarker(o){const f=o.properties.marker_id;return this.markers[f]}update(){if(!this.mapsService||this.markers.length===0)return;const o=this.mapsService.getZoom(),f=this.mapsService.getBounds();(!this.bbox||Math.abs(o-this.zoom)>=1||!boundsContains(this.bbox,f))&&(this.bbox=padBounds(f,.5),this.zoom=Math.floor(o),this.getClusterMarker(this.bbox,this.zoom))}generateElement(o){const f=DOM.create("div","l7-marker-cluster"),m=DOM.create("div","",f),w=DOM.create("span","",m),{field:C,method:D}=this.markerLayerOption.clusterOption;o.properties.point_count=o.properties.point_count||1;const B=C&&D?o.properties["point_"+D]||o.properties[C]:o.properties.point_count;return w.textContent=B,f}}var cs=L(4157),Dr=L(1413),Qt=L(4942);class ga extends $u(){constructor(o){super(),(0,Qt.Z)(this,"controlOption",void 0),(0,Qt.Z)(this,"container",void 0),(0,Qt.Z)(this,"isShow",void 0),(0,Qt.Z)(this,"sceneContainer",void 0),(0,Qt.Z)(this,"scene",void 0),(0,Qt.Z)(this,"mapsService",void 0),(0,Qt.Z)(this,"renderService",void 0),(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"controlService",void 0),(0,Qt.Z)(this,"configService",void 0),ga.controlCount++,this.controlOption=(0,Dr.Z)((0,Dr.Z)({},this.getDefault(o)),o||{})}getOptions(){return this.controlOption}setOptions(o){const f=this.getDefault(o);Object.entries(o).forEach(([m,w])=>{w===void 0&&(o[m]=f[m])}),"position"in o&&this.setPosition(o.position),"className"in o&&this.setClassName(o.className),"style"in o&&this.setStyle(o.style),this.controlOption=(0,Dr.Z)((0,Dr.Z)({},this.controlOption),o)}addTo(o){this.mapsService=o.mapService,this.renderService=o.rendererService,this.layerService=o.layerService,this.controlService=o.controlService,this.configService=o.globalConfigService,this.scene=o.sceneService,this.sceneContainer=o,this.isShow=!0,this.container=this.onAdd(),Ie.SO.addClass(this.container,"l7-control");const{className:f,style:m}=this.controlOption;return f&&this.setClassName(f),m&&this.setStyle(m),this.insertContainer(),this.emit("add",this),this}remove(){if(!this.mapsService)return this;Ie.SO.remove(this.container),this.onRemove(),this.emit("remove",this)}onAdd(){return Ie.SO.create("div")}onRemove(){}show(){const o=this.container;Ie.SO.removeClass(o,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}hide(){const o=this.container;Ie.SO.addClass(o,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}getDefault(o){return{position:Se.d.TOPRIGHT,name:`${ga.controlCount}`}}getContainer(){return this.container}getIsShow(){return this.isShow}_refocusOnMap(o){if(this.mapsService&&o&&o.screenX>0&&o.screenY>0){const f=this.mapsService.getContainer();f!==null&&f.focus()}}setPosition(o=Se.d.TOPLEFT){const f=this.controlService;return f&&f.removeControl(this),this.controlOption.position=o,f&&f.addControl(this,this.sceneContainer),this}setClassName(o){const f=this.container,{className:m}=this.controlOption;m&&Ie.SO.removeClass(f,m),o&&Ie.SO.addClass(f,o)}setStyle(o){const f=this.container;o?f.setAttribute("style",o):f.removeAttribute("style")}insertContainer(){const o=this.controlOption.position,f=this.container;if(o instanceof Element)o.appendChild(f);else{const m=this.controlService.controlCorners[o];["bottomleft","bottomright","righttop","rightbottom"].includes(o)?m.insertBefore(f,m.firstChild):m.appendChild(f)}}checkUpdateOption(o,f){return f.some(m=>m in o)}}(0,Qt.Z)(ga,"controlCount",0);class fa extends null{constructor(...o){super(...o),_defineProperty(this,"isDisable",!1),_defineProperty(this,"button",void 0),_defineProperty(this,"buttonText",void 0),_defineProperty(this,"buttonIcon",void 0)}setIsDisable(o){if(this.isDisable=o,o){var f;(f=this.button)===null||f===void 0||f.setAttribute("disabled","true")}else{var m;(m=this.button)===null||m===void 0||m.removeAttribute("disabled")}}createButton(o=""){return DOM.create("button",`l7-button-control ${o}`)}onAdd(){this.button=this.createButton(),this.isDisable=!1;const{title:o,btnText:f,btnIcon:m}=this.controlOption;return this.setBtnTitle(o),this.setBtnText(f),this.setBtnIcon(m),this.button}onRemove(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}setOptions(o){const{title:f,btnText:m,btnIcon:w}=o;this.checkUpdateOption(o,["title"])&&this.setBtnTitle(f),this.checkUpdateOption(o,["btnIcon"])&&this.setBtnIcon(w),this.checkUpdateOption(o,["btnText"])&&this.setBtnText(m),super.setOptions(o)}setBtnTitle(o){var f;(f=this.button)===null||f===void 0||f.setAttribute("title",o!=null?o:"")}setBtnIcon(o){if(this.buttonIcon&&DOM.remove(this.buttonIcon),o){var f;const C=(f=this.button)===null||f===void 0?void 0:f.firstChild;if(C){var m;(m=this.button)===null||m===void 0||m.insertBefore(o,C)}else{var w;(w=this.button)===null||w===void 0||w.appendChild(o)}this.buttonIcon=o}}setBtnText(o){if(this.button)if(DOM.removeClass(this.button,"l7-button-control--row"),DOM.removeClass(this.button,"l7-button-control--column"),o){let m=this.buttonText;if(!m){var f;m=DOM.create("div","l7-button-control__text"),(f=this.button)===null||f===void 0||f.appendChild(m),this.buttonText=m}m.innerText=o,DOM.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!o&&this.buttonText&&(DOM.remove(this.buttonText),this.buttonText=void 0)}}class Qo extends zu.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect()}constructor(o,f){super(),(0,Qt.Z)(this,"popperDOM",void 0),(0,Qt.Z)(this,"contentDOM",void 0),(0,Qt.Z)(this,"button",void 0),(0,Qt.Z)(this,"option",void 0),(0,Qt.Z)(this,"isShow",!1),(0,Qt.Z)(this,"content",void 0),(0,Qt.Z)(this,"timeout",null),(0,Qt.Z)(this,"show",()=>this.isShow||!this.contentDOM.innerHTML?this:(this.resetPopperPosition(),Ie.SO.removeClass(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&Qo.conflictPopperList.forEach(m=>{m!==this&&m.isShow&&m.hide()}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick),this)),(0,Qt.Z)(this,"hide",()=>this.isShow?(Ie.SO.addClass(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick),this):this),(0,Qt.Z)(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null)},300))}),(0,Qt.Z)(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}),(0,Qt.Z)(this,"onBtnClick",()=>{this.isShow?this.hide():this.show()}),(0,Qt.Z)(this,"onPopperUnClick",m=>{Ie.SO.findParentElement(m.target,[".l7-button-control",".l7-popper-content"])||this.hide()}),(0,Qt.Z)(this,"onBtnMouseLeave",()=>{this.setHideTimeout()}),(0,Qt.Z)(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),!this.isShow&&this.show()}),this.button=o,this.option=f,this.init(),f.unique&&Qo.conflictPopperList.push(this)}getPopperDOM(){return this.popperDOM}getIsShow(){return this.isShow}getContent(){return this.content}setContent(o){typeof o=="string"?this.contentDOM.innerHTML=o:o instanceof HTMLElement&&(Ie.SO.clearChildren(this.contentDOM),this.contentDOM.appendChild(o)),this.content=o}init(){const{trigger:o}=this.option;this.popperDOM=this.createPopper(),o==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Ie.SO.remove(this.popperDOM)}resetPopperPosition(){const o={},{container:f,offset:m=[0,0],placement:w}=this.option,[C,D]=m,B=this.button.getBoundingClientRect(),V=f.getBoundingClientRect(),{left:re,right:Te,top:Ae,bottom:Fe}=Ie.SO.getDiffRect(B,V);let Mt=!1,rn=!1;/^(left|right)/.test(w)?(w.includes("left")?o.right=`${B.width+Te}px`:w.includes("right")&&(o.left=`${B.width+re}px`),w.includes("start")?o.top=`${Ae}px`:w.includes("end")?o.bottom=`${Fe}px`:(o.top=`${Ae+B.height/2}px`,rn=!0,o.transform=`translate(${C}px, calc(${D}px - 50%))`)):/^(top|bottom)/.test(w)&&(w.includes("top")?o.bottom=`${B.height+Fe}px`:w.includes("bottom")&&(o.top=`${B.height+Ae}px`),w.includes("start")?o.left=`${re}px`:w.includes("end")?o.right=`${Te}px`:(o.left=`${re+B.width/2}px`,Mt=!0,o.transform=`translate(calc(${C}px - 50%), ${D}px)`)),o.transform=`translate(calc(${C}px - ${Mt?"50%":"0%"}), calc(${D}px - ${rn?"50%":"0%"})`;const In=w.split("-");In.length&&Ie.SO.addClass(this.popperDOM,In.map(ar=>`l7-popper-${ar}`).join(" ")),Ie.SO.addStyle(this.popperDOM,Ie.SO.css2Style(o))}createPopper(){const{container:o,className:f="",content:m}=this.option,w=Ie.SO.create("div",`l7-popper l7-popper-hide ${f}`),C=Ie.SO.create("div","l7-popper-content"),D=Ie.SO.create("div","l7-popper-arrow");return w.appendChild(C),w.appendChild(D),o.appendChild(w),this.popperDOM=w,this.contentDOM=C,m&&this.setContent(m),w}}(0,Qt.Z)(Qo,"conflictPopperList",[]);const Ea={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"};class aa extends null{constructor(...o){super(...o),_defineProperty(this,"popper",void 0)}getPopper(){return this.popper}hide(){this.popper.hide(),super.hide()}getDefault(o){var f;const m=super.getDefault(o),w=(f=o==null?void 0:o.position)!==null&&f!==void 0?f:m.position;return _objectSpread(_objectSpread({},super.getDefault(o)),{},{popperPlacement:w instanceof Element?"bottom":Ea[w],popperTrigger:"click"})}onAdd(){const o=super.onAdd();return this.initPopper(),o}onRemove(){this.popper.destroy()}initPopper(){const{popperClassName:o,popperPlacement:f,popperTrigger:m}=this.controlOption,w=this.mapsService.getMapContainer();return this.popper=new Popper(this.button,{className:o,placement:f,trigger:m,container:w,unique:!0}),this.popper.on("show",()=>{this.emit("popperShow",this)}).on("hide",()=>{this.emit("popperHide",this)}),this.popper}setOptions(o){if(super.setOptions(o),this.checkUpdateOption(o,["popperPlacement","popperTrigger","popperClassName"])){const f=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(f)}}}var ko=function(a){return a.ActiveOptionClassName="l7-select-control-item-active",a.OptionValueAttrKey="data-option-value",a.OptionIndexAttrKey="data-option-index",a}(ko||{});class au extends null{constructor(...o){super(...o),_defineProperty(this,"selectValue",[]),_defineProperty(this,"optionDOMList",void 0),_defineProperty(this,"createNormalOption",f=>{const m=this.selectValue.includes(f.value),w=DOM.create("div",`l7-select-control-item ${m?ko.ActiveOptionClassName:""}`);this.getIsMultiple()?w.appendChild(this.createCheckbox(m)):w.appendChild(this.createRadio(m)),f.icon&&w.appendChild(f.icon);const C=DOM.create("span");return C.innerText=f.text,w.appendChild(C),w}),_defineProperty(this,"onItemClick",f=>{if(this.getIsMultiple()){const m=this.selectValue.findIndex(w=>w===f.value);m>-1?this.selectValue.splice(m,1):this.selectValue=[...this.selectValue,f.value]}else this.selectValue=[f.value];this.setSelectValue(this.selectValue)})}setOptions(o){super.setOptions(o);const{options:f}=o;f&&this.popper.setContent(this.getPopperContent(f))}onAdd(){const o=super.onAdd(),{defaultValue:f}=this.controlOption;return f&&(this.selectValue=this.transSelectValue(f)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),o}getSelectValue(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}setSelectValue(o,f=!0){const m=this.transSelectValue(o);this.optionDOMList.forEach(w=>{const C=w.getAttribute(ko.OptionValueAttrKey),D=w.querySelector("input[type=checkbox]"),B=w.querySelector("input[type=radio]"),V=m.includes(C),re=(Te,Ae)=>{DOM.toggleClass(w,ko.ActiveOptionClassName,Ae),Te&&DOM.setChecked(Te,Ae)};re(D,V),re(B,V)}),this.selectValue=m,f&&this.emit("selectChange",this.getIsMultiple()?m:m[0])}getIsMultiple(){return!1}getPopperContent(o){const f=this.isImageOptions(),m=DOM.create("div",f?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&DOM.addClass(m,"l7-select-control--multiple");const w=o.map((C,D)=>{const B=f?this.createImageOption(C):this.createNormalOption(C);return B.setAttribute(ko.OptionValueAttrKey,C.value),B.setAttribute(ko.OptionIndexAttrKey,window.String(D)),B.addEventListener("click",this.onItemClick.bind(this,C)),B});return m.append(...w),this.optionDOMList=w,m}createImageOption(o){const f=this.selectValue.includes(o.value),m=DOM.create("div",`l7-select-control-item ${f?ko.ActiveOptionClassName:""}`),w=DOM.create("img");w.setAttribute("src",o.img),DOM.setUnDraggable(w),m.appendChild(w);const C=DOM.create("div","l7-select-control-item-row");this.getIsMultiple()&&m.appendChild(this.createCheckbox(f));const D=DOM.create("span");return D.innerText=o.text,C.appendChild(D),m.appendChild(C),m}createCheckbox(o){const f=DOM.create("input");return f.setAttribute("type","checkbox"),o&&DOM.setChecked(f,!0),f}createRadio(o){const f=DOM.create("input");return f.setAttribute("type","radio"),o&&DOM.setChecked(f,!0),f}isImageOptions(){return!!this.controlOption.options.find(o=>o.img)}transSelectValue(o){return Array.isArray(o)?o:[o]}}const xl=a=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("l7-iconfont"),o.setAttribute("aria-hidden","true");const f=document.createElementNS("http://www.w3.org/2000/svg","use");return f.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${a}`),o.appendChild(f),o};class Cu extends null{constructor(...o){var f;super(...o),f=this,_defineProperty(this,"onClick",_asyncToGenerator(function*(){const{onExport:m}=f.controlOption;m==null||m(yield f.getImage())})),_defineProperty(this,"mergeImage",_asyncToGenerator(function*(...m){var w,C;const{imageType:D}=f.controlOption,{width:B=0,height:V=0}=(w=(C=f.mapsService.getContainer())===null||C===void 0?void 0:C.getBoundingClientRect())!==null&&w!==void 0?w:{},re=document.createElement("canvas");re.width=B,re.height=V;const Te=re.getContext("2d");return(yield Promise.all(m.map(Fe=>new Promise(Mt=>{const rn=new Image;rn.onload=()=>{Mt(rn)},rn.src=Fe})))).forEach(Fe=>{Te==null||Te.drawImage(Fe,0,0,B,V)}),re.toDataURL(`image/${D}`)}))}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),o}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:createL7Icon("l7-icon-export-picture"),imageType:"png"})}getImage(){var o=this;return _asyncToGenerator(function*(){const f=yield o.mapsService.exportMap("png"),m=yield o.scene.exportPng("png");return o.mergeImage(...[f,m].filter(w=>w))})()}}const su=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ss=(()=>{if(typeof document=="undefined")return!1;const a=su[0],o={};for(const f of su)if((f==null?void 0:f[1])in document){for(const[w,C]of f.entries())o[a[w]]=C;return o}return!1})(),vl={change:Ss.fullscreenchange,error:Ss.fullscreenerror};let fl={request(a=document.documentElement,o){return new Promise((f,m)=>{const w=()=>{fl.off("change",w),f()};fl.on("change",w);const C=a[Ss.requestFullscreen](o);C instanceof Promise&&C.then(w).catch(m)})},exit(){return new Promise((a,o)=>{if(!fl.isFullscreen){a();return}const f=()=>{fl.off("change",f),a()};fl.on("change",f);const m=document[Ss.exitFullscreen]();m instanceof Promise&&m.then(f).catch(o)})},toggle(a,o){return fl.isFullscreen?fl.exit():fl.request(a,o)},onchange(a){fl.on("change",a)},onerror(a){fl.on("error",a)},on(a,o){const f=vl[a];f&&document.addEventListener(f,o,!1)},off(a,o){const f=vl[a];f&&document.removeEventListener(f,o,!1)},raw:Ss};Object.defineProperties(fl,{isFullscreen:{get:()=>!!document[Ss.fullscreenElement]},element:{enumerable:!0,get:()=>{var a;return(a=document[Ss.fullscreenElement])!==null&&a!==void 0?a:void 0}},isEnabled:{enumerable:!0,get:()=>!!document[Ss.fullscreenEnabled]}}),Ss||(fl={isEnabled:!1});var vc=null;class Wf extends null{constructor(o){var f;super(o),f=this,_defineProperty(this,"isFullscreen",!1),_defineProperty(this,"mapContainer",void 0),_defineProperty(this,"toggleFullscreen",_asyncToGenerator(function*(){ScreenFull.isEnabled&&(yield ScreenFull.toggle(f.mapContainer))})),_defineProperty(this,"onClick",()=>{this.toggleFullscreen()}),_defineProperty(this,"onFullscreenChange",()=>{this.isFullscreen=!!document.fullscreenElement;const{btnText:m,btnIcon:w,title:C,exitBtnText:D,exitBtnIcon:B,exitTitle:V}=this.controlOption;this.isFullscreen?(this.setBtnTitle(V),this.setBtnText(D),this.setBtnIcon(B)):(this.setBtnTitle(C),this.setBtnText(m),this.setBtnIcon(w)),this.emit("fullscreenChange",this.isFullscreen)}),ScreenFull.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316")}setOptions(o){const{exitBtnText:f,exitBtnIcon:m,exitTitle:w}=o;this.isFullscreen&&(this.checkUpdateOption(o,["exitBtnIcon"])&&this.setBtnIcon(m),this.checkUpdateOption(o,["exitBtnText"])&&this.setBtnText(f),this.checkUpdateOption(o,["exitTitle"])&&this.setBtnTitle(w)),super.setOptions(o)}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),this.mapContainer=DOM.getContainer(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),o}onRemove(){super.onRemove(),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5168\u5C4F",btnIcon:createL7Icon("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:createL7Icon("l7-icon-exit-fullscreen")})}}class Tc extends null{constructor(o){var f;super(o),f=this,_defineProperty(this,"getGeoLocation",()=>new Promise((m,w)=>{window.navigator.geolocation.getCurrentPosition(({coords:C})=>{const{longitude:D,latitude:B}=C!=null?C:{};!isNaN(D)&&!isNaN(B)?m([D,B]):w()},C=>{w(C)})})),_defineProperty(this,"onClick",_asyncToGenerator(function*(){if(!window.navigator.geolocation)return;const{transform:m}=f.controlOption,w=yield f.getGeoLocation(),C=f.mapsService.getZoom();f.mapsService.setZoomAndCenter(C>15?C:15,m?yield m(w):w)})),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D")}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5B9A\u4F4D",btnIcon:createL7Icon("l7-icon-reposition")})}onAdd(){const o=super.onAdd();return o.addEventListener("click",this.onClick),o}}function df(a){return Object.keys(a!=null?a:{}).every(o=>["layer","name","img"].includes(o))}class Vc extends null{constructor(...o){super(...o),_defineProperty(this,"onLayerChange",()=>{var f;(f=this.controlOption.layers)!==null&&f!==void 0&&f.length||(this.selectValue=this.getLayerVisible(),this.setOptions({options:this.getLayerOptions()}))}),_defineProperty(this,"onLayerVisibleChane",()=>{this.setSelectValue(this.getLayerVisible())}),_defineProperty(this,"onSelectChange",()=>{this.layers.forEach(f=>{const m=this.selectValue.includes(f.name),w=f.isVisible();m&&!w&&f.show(),!m&&w&&f.hide()})})}get layers(){const o=this.layerService,{layers:f}=this.controlOption;if(Array.isArray(f)&&f.length){const m=[];return f.forEach(w=>{if(w instanceof Object&&(df(w)?m.push(w.layer):m.push(w)),typeof w=="string"){const C=o.getLayer(w)||o.getLayerByName(w);C&&m.push(C)}}),m}return o.getLayers()||[]}getDefault(o){var f;return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:createL7Icon("l7-icon-layer"),options:[],multiple:(f=o==null?void 0:o.multiple)!==null&&f!==void 0?f:!0})}getLayerVisible(){return this.layers.filter(o=>o.isVisible()).map(o=>o.name)}getLayerOptions(){const{layers:o}=this.controlOption,f=o==null?void 0:o.every(m=>m.img);return o?o==null?void 0:o.map(m=>{if(df(m))return{text:m.name||m.layer.name,value:m.layer.name,img:f?m.img:void 0};if(typeof m=="string"){const w=this.layerService.getLayer(m)||this.layerService.getLayerByName(m);return{text:w==null?void 0:w.name,value:w==null?void 0:w.name}}return{text:m.name,value:m.name}}):this.layers.map(m=>({text:m.name,value:m.name}))}setOptions(o){const f=this.checkUpdateOption(o,["layers","multiple"]);super.setOptions(o),f&&(this.controlOption.multiple===!1&&this.handleSingleSelection(),this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}handleSingleSelection(){this.layers.forEach((o,f)=>{f===0?o.show():o.hide()})}onAdd(){var o;return this.controlOption.multiple===!1&&this.handleSingleSelection(),(o=this.controlOption.options)!==null&&o!==void 0&&o.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),super.onAdd()}onRemove(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}getIsMultiple(){return this.controlOption.multiple}}class sp extends ga{getDefault(){return{position:Se.d.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}onAdd(){const o=Ie.SO.create("div","l7-control-logo");return this.setLogoContent(o),o}onRemove(){return null}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["img","href"])&&(Ie.SO.clearChildren(this.container),this.setLogoContent(this.container))}setLogoContent(o){const{href:f,img:m}=this.controlOption,w=Ie.SO.create("img");if(w.setAttribute("src",m),w.setAttribute("aria-label","AntV logo"),Ie.SO.setUnDraggable(w),f){const C=Ie.SO.create("a","l7-control-logo-link");C.target="_blank",C.href=f,C.rel="noopener nofollow",C.setAttribute("rel","noopener nofollow"),C.appendChild(w),o.appendChild(C)}else o.appendChild(w)}}const lp={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94F6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96C5\u58EB\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6D82\u9E26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7C7D",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},wh={normal:{text:"\u6807\u51C6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4EAE",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536B\u661F",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}};class $h extends null{constructor(...o){super(...o),_defineProperty(this,"onMapThemeChange",()=>{this.mapsService.setMapStyle(this.selectValue[0])})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:createL7Icon("l7-icon-color"),options:[]})}getStyleOptions(){const o=this.mapsService.getType()==="mapbox"?MapboxMapStyleConfig:GaodeMapStyleConfig;return Object.entries(this.mapsService.getMapStyleConfig()).filter(([f,m])=>typeof m=="string"&&f!=="blank").map(([f,m])=>{var w;const{text:C,img:D}=(w=o[f])!==null&&w!==void 0?w:{};return{text:C!=null?C:f,value:m,img:D,key:f}})}getMapStyle(){return this.mapsService.getMapStyle()}onAdd(){var o;if((o=this.controlOption.options)!==null&&o!==void 0&&o.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var f,m;const w=this.controlOption.defaultValue;this.controlOption.defaultValue=(f=(m=this.controlOption.options.find(C=>C.key===w))===null||m===void 0?void 0:m.value)!==null&&f!==void 0?f:w}else{const w=this.getMapStyle();w?this.controlOption.defaultValue=w:this.mapsService.map.once("styledata",()=>{const C=this.mapsService.getMapStyle();this.controlOption.defaultValue=C,this.setSelectValue(C,!1)})}return this.on("selectChange",this.onMapThemeChange),super.onAdd()}getIsMultiple(){return!1}}class qh extends null{constructor(...o){super(...o),_defineProperty(this,"location",[0,0]),_defineProperty(this,"onMouseMove",f=>{let m=this.location;const w=f.lngLat||f.lnglat,{transform:C}=this.controlOption;w&&(m=[w.lng,w.lat]),this.location=m,C&&(m=C(m)),this.insertLocation2HTML(m),this.emit("locationChange",m)})}getLocation(){return this.location}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{position:PositionType.BOTTOMLEFT,transform:([f,m])=>[+(+f).toFixed(6),+(+m).toFixed(6)]})}onAdd(){const o=DOM.create("div","l7-control-mouse-location");return o.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),o}onRemove(){this.mapsService.off("mousemove",this.onMouseMove)}insertLocation2HTML(o){this.container.innerText=o.join(", ")}}class ih extends null{constructor(...o){super(...o),_defineProperty(this,"mScale",void 0),_defineProperty(this,"iScale",void 0),_defineProperty(this,"update",()=>{const f=this.mapsService,{maxWidth:m}=this.controlOption,w=f.getSize()[1]/2,C=f.containerToLngLat([0,w]),D=f.containerToLngLat([m,w]),B=lnglatDistance([C.lng,C.lat],[D.lng,D.lat]);this.updateScales(B)})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{name:"scale",position:PositionType.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}onAdd(){const o="l7-control-scale",f=DOM.create("div",o);this.resetScaleLines(f);const{updateWhenIdle:m}=this.controlOption;return this.mapsService.on(m?"moveend":"mapmove",this.update),this.mapsService.on(m?"zoomend":"zoomchange",this.update),f}onRemove(){const{updateWhenIdle:o}=this.controlOption;this.mapsService.off(o?"zoomend":"zoomchange",this.update),this.mapsService.off(o?"moveend":"mapmove",this.update)}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}updateScales(o){const{metric:f,imperial:m}=this.controlOption;f&&o&&this.updateMetric(o),m&&o&&this.updateImperial(o)}resetScaleLines(o){DOM.clearChildren(o);const{metric:f,imperial:m,maxWidth:w,lockWidth:C}=this.controlOption;C&&DOM.addStyle(o,`width: ${w}px`),f&&(this.mScale=DOM.create("div","l7-control-scale-line",o)),m&&(this.iScale=DOM.create("div","l7-control-scale-line",o)),this.update()}updateScale(o,f,m){const{maxWidth:w}=this.controlOption;o.style.width=Math.round(w*m)+"px",o.innerHTML=f}getRoundNum(o){const f=Math.pow(10,(Math.floor(o)+"").length-1);let m=o/f;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,f*m}updateMetric(o){const f=this.getRoundNum(o),m=f<1e3?f+" m":f/1e3+" km";this.updateScale(this.mScale,m,f/o)}updateImperial(o){const f=o*3.2808399;let m,w,C;f>5280?(m=f/5280,w=this.getRoundNum(m),this.updateScale(this.iScale,w+" mi",w/m)):(C=this.getRoundNum(f),this.updateScale(this.iScale,C+" ft",C/f))}}var Mi=L(15861),Rl=L(45987);const{cloneDeep:Pl}=Ie.lodashUtil;class Ju{constructor(){(0,Qt.Z)(this,"mapService",void 0),(0,Qt.Z)(this,"fontService",void 0)}apply(o,{styleAttributeService:f,mapService:m,fontService:w}){var C=this;this.mapService=m,this.fontService=w,o.hooks.init.tapPromise("DataMappingPlugin",(0,Mi.Z)(function*(){o.log(Se.Or.MappingStart,Se.KD.INIT),C.generateMaping(o,{styleAttributeService:f}),o.log(Se.Or.MappingEnd,Se.KD.INIT)})),o.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var D=(0,Mi.Z)(function*(B){if(!B)return B;o.dataState.dataMappingNeedUpdate=!1,o.log(Se.Or.MappingStart,Se.KD.UPDATE);const V=C.generateMaping(o,{styleAttributeService:f});return o.log(Se.Or.MappingEnd,Se.KD.UPDATE),V});return function(B){return D.apply(this,arguments)}}()),o.hooks.beforeRender.tap("DataMappingPlugin",()=>{const D=o.getSource();if(o.layerModelNeedUpdate||!D||!D.inited)return;const B=f.getLayerStyleAttributes()||[],V=f.getLayerStyleAttribute("filter"),{dataArray:re}=D.data;if(Array.isArray(re)&&re.length===0)return;const Te=B.filter(Fe=>Fe.needRemapping);let Ae=re;if(V!=null&&V.needRemapping&&V!==null&&V!==void 0&&V.scale&&(Ae=re.filter(Fe=>this.applyAttributeMapping(V,Fe)[0])),Te.length){const Fe=this.mapping(o,Te,Ae,o.getEncodedData());o.setEncodedData(Fe)}})}generateMaping(o,{styleAttributeService:f}){const m=f.getLayerStyleAttributes()||[],w=f.getLayerStyleAttribute("filter"),{dataArray:C}=o.getSource().data;let D=C;w!=null&&w.scale&&(D=C.filter(V=>this.applyAttributeMapping(w,V)[0])),D=o.processData(D);const B=this.mapping(o,m,D,void 0);return o.setEncodedData(B),o.emit("dataUpdate",null),!0}mapping(o,f,m,w){const C=f.filter(B=>B.scale!==void 0).filter(B=>B.name!=="filter"),D=m.map((B,V)=>{const re=w?w[V]:{},Te=(0,Dr.Z)({id:B._id,coordinates:B.coordinates},re);return C.forEach(Ae=>{let Fe=this.applyAttributeMapping(Ae,B);(Ae.name==="color"||Ae.name==="stroke")&&(Fe=Fe.map(Mt=>(0,Ie.CI)(Mt))),Te[Ae.name]=Array.isArray(Fe)&&Fe.length===1?Fe[0]:Fe,Ae.name==="shape"&&(Te.shape=this.fontService.getIconFontKey(Te[Ae.name]))}),Te});return f.forEach(B=>{B.needRemapping=!1}),this.adjustData2Amap2Coordinates(D,o),this.adjustData2SimpleCoordinates(D),D}adjustData2Amap2Coordinates(o,f){if(o.length>0&&this.mapService.version==="GAODE2.x"){const m=f.coordCenter||f.getSource().center;o.filter(w=>!w.originCoordinates).map(w=>{w.version="GAODE2.x",w.originCoordinates=Pl(w.coordinates),w.coordinates=this.mapService.coordToAMap2RelativeCoordinates(w.coordinates,m)})}}adjustData2SimpleCoordinates(o){o.length>0&&this.mapService.version==="SIMPLE"&&o.map(f=>{f.simpleCoordinate||(f.coordinates=this.unProjectCoordinates(f.coordinates),f.simpleCoordinate=!0)})}unProjectCoordinates(o){if(typeof o[0]=="number")return this.mapService.simpleMapCoord.unproject(o);if(o[0]&&o[0][0]instanceof Array){const f=[];return o.map(m=>{const w=[];m.map(C=>{w.push(this.mapService.simpleMapCoord.unproject(C))}),f.push(w)}),f}else{const f=[];return o.map(m=>{f.push(this.mapService.simpleMapCoord.unproject(m))}),f}}applyAttributeMapping(o,f){var m;if(!o.scale)return[];const w=(o==null||(m=o.scale)===null||m===void 0?void 0:m.scalers)||[],C=[];return w.forEach(({field:B})=>{var V;(f.hasOwnProperty(B)||((V=o.scale)===null||V===void 0?void 0:V.type)==="variable")&&C.push(f[B])}),o.mapping?o.mapping(C):[]}getArrowPoints(o,f){const m=[f[0]-o[0],f[1]-o[1]],w=(0,Ie.Fv)(m);return[o[0]+w[0]*1e-4,o[1]+w[1]*1e-4]}}class Mf{constructor(){(0,Qt.Z)(this,"mapService",void 0)}apply(o){var f=this;this.mapService=o.getContainer().mapService,o.hooks.init.tapPromise("DataSourcePlugin",(0,Mi.Z)(function*(){o.log(Se.Or.SourceInitStart,Se.KD.INIT);let m=o.getSource();if(!m){const{data:w,options:C}=o.sourceOption||o.defaultSourceConfig;m=new vo(w,C),o.setSource(m)}m.inited?(f.updateClusterData(o),o.log(Se.Or.SourceInitEnd,Se.KD.INIT)):yield new Promise(w=>{m.on("update",C=>{C.type==="inited"&&(f.updateClusterData(o),o.log(Se.Or.SourceInitEnd,Se.KD.INIT)),w(null)})})})),o.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,Mi.Z)(function*(){const m=f.updateClusterData(o),w=o.dataState.dataSourceNeedUpdate;return o.dataState.dataSourceNeedUpdate=!1,m||w}))}updateClusterData(o){if(o.isTileLayer||o.tileLayer||!o.getSource())return!1;const f=o.getSource(),m=f.cluster,{zoom:w=0}=f.clusterOptions,C=this.mapService.getZoom()-1,D=o.dataState.dataSourceNeedUpdate;return m&&D&&f.updateClusterData(Math.floor(C)),m&&Math.abs(o.clusterZoom-C)>=1?(w!==Math.floor(C)&&f.updateClusterData(Math.floor(C)),o.clusterZoom=C,!0):!1}}function Rf(a,o){return a<o?-1:a>o?1:a>=o?0:NaN}function es(a){return a.length===1&&(a=Ou(a)),{left:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var C=m+w>>>1;a(o[C],f)<0?m=C+1:w=C}return m},right:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var C=m+w>>>1;a(o[C],f)>0?w=C:m=C+1}return m}}}function Ou(a){return function(o,f){return Rf(a(o),f)}}var Wl=es(Rf),oh=Wl.right,_0=Wl.left,Pd=null;function b0(a,o){var f=a.length,m=-1,w,C,D;if(o==null){for(;++m<f;)if((w=a[m])!=null&&w>=w)for(C=D=w;++m<f;)(w=a[m])!=null&&(C>w&&(C=w),D<w&&(D=w))}else for(;++m<f;)if((w=o(a[m],m,a))!=null&&w>=w)for(C=D=w;++m<f;)(w=o(a[m],m,a))!=null&&(C>w&&(C=w),D<w&&(D=w));return[C,D]}var Kh=Array.prototype,Id=Kh.slice,ah=Kh.map,up=Math.sqrt(50),Y0=Math.sqrt(10),Qh=Math.sqrt(2);function Hc(a,o,f){var m,w=-1,C,D,B;if(o=+o,a=+a,f=+f,a===o&&f>0)return[a];if((m=o<a)&&(C=a,a=o,o=C),(B=vg(a,o,f))===0||!isFinite(B))return[];if(B>0)for(a=Math.ceil(a/B),o=Math.floor(o/B),D=new Array(C=Math.ceil(o-a+1));++w<C;)D[w]=(a+w)*B;else for(a=Math.floor(a*B),o=Math.ceil(o*B),D=new Array(C=Math.ceil(a-o+1));++w<C;)D[w]=(a-w)/B;return m&&D.reverse(),D}function vg(a,o,f){var m=(o-a)/Math.max(0,f),w=Math.floor(Math.log(m)/Math.LN10),C=m/Math.pow(10,w);return w>=0?(C>=up?10:C>=Y0?5:C>=Qh?2:1)*Math.pow(10,w):-Math.pow(10,-w)/(C>=up?10:C>=Y0?5:C>=Qh?2:1)}function Ty(a,o,f){var m=Math.abs(o-a)/Math.max(0,f),w=Math.pow(10,Math.floor(Math.log(m)/Math.LN10)),C=m/w;return C>=up?w*=10:C>=Y0?w*=5:C>=Qh&&(w*=2),o<a?-w:w}function $0(){var a=identity,o=extent,f=sturges;function m(w){var C,D=w.length,B,V=new Array(D);for(C=0;C<D;++C)V[C]=a(w[C],C,w);var re=o(V),Te=re[0],Ae=re[1],Fe=f(V,Te,Ae);Array.isArray(Fe)||(Fe=tickStep(Te,Ae,Fe),Fe=range(Math.ceil(Te/Fe)*Fe,Ae,Fe));for(var Mt=Fe.length;Fe[0]<=Te;)Fe.shift(),--Mt;for(;Fe[Mt-1]>Ae;)Fe.pop(),--Mt;var rn=new Array(Mt+1),In;for(C=0;C<=Mt;++C)In=rn[C]=[],In.x0=C>0?Fe[C-1]:Te,In.x1=C<Mt?Fe[C]:Ae;for(C=0;C<D;++C)B=V[C],Te<=B&&B<=Ae&&rn[bisect(Fe,B,0,Mt)].push(w[C]);return rn}return m.value=function(w){return arguments.length?(a=typeof w=="function"?w:constant(w),m):a},m.domain=function(w){return arguments.length?(o=typeof w=="function"?w:constant([w[0],w[1]]),m):o},m.thresholds=function(w){return arguments.length?(f=typeof w=="function"?w:Array.isArray(w)?constant(slice.call(w)):constant(w),m):f},m}function l1(a,o,f){return a=map.call(a,number).sort(ascending),Math.ceil((f-o)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}var q0=L(37620);function mg(a,o,f,m,w){var C=a*a,D=C*a;return((1-3*a+3*C-D)*o+(4-6*C+3*D)*f+(1+3*a+3*C-3*D)*m+D*w)/6}function Rv(a){var o=a.length-1;return function(f){var m=f<=0?f=0:f>=1?(f=1,o-1):Math.floor(f*o),w=a[m],C=a[m+1],D=m>0?a[m-1]:2*w-C,B=m<o-1?a[m+2]:2*C-w;return mg((f-m/o)*o,D,w,C,B)}}function Ay(a){var o=a.length;return function(f){var m=Math.floor(((f%=1)<0?++f:f)*o),w=a[(m+o-1)%o],C=a[m%o],D=a[(m+1)%o],B=a[(m+2)%o];return mg((f-m/o)*o,w,C,D,B)}}function x0(a){return function(){return a}}function xm(a,o){return function(f){return a+f*o}}function cp(a,o,f){return a=Math.pow(a,f),o=Math.pow(o,f)-a,f=1/f,function(m){return Math.pow(a+m*o,f)}}function Pv(a,o){var f=o-a;return f?xm(a,f>180||f<-180?f-360*Math.round(f/360):f):constant(isNaN(a)?o:a)}function Cy(a){return(a=+a)==1?gg:function(o,f){return f-o?cp(o,f,a):x0(isNaN(o)?f:o)}}function gg(a,o){var f=o-a;return f?xm(a,f):x0(isNaN(a)?o:a)}var yg=function a(o){var f=Cy(o);function m(w,C){var D=f((w=(0,q0.B8)(w)).r,(C=(0,q0.B8)(C)).r),B=f(w.g,C.g),V=f(w.b,C.b),re=gg(w.opacity,C.opacity);return function(Te){return w.r=D(Te),w.g=B(Te),w.b=V(Te),w.opacity=re(Te),w+""}}return m.gamma=a,m}(1);function _g(a){return function(o){var f=o.length,m=new Array(f),w=new Array(f),C=new Array(f),D,B;for(D=0;D<f;++D)B=(0,q0.B8)(o[D]),m[D]=B.r||0,w[D]=B.g||0,C[D]=B.b||0;return m=a(m),w=a(w),C=a(C),B.opacity=1,function(V){return B.r=m(V),B.g=w(V),B.b=C(V),B+""}}}var bg=_g(Rv),xg=_g(Ay);function fp(a,o){return a<o?-1:a>o?1:a>=o?0:NaN}function Gp(a){return a.length===1&&(a=K0(a)),{left:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var C=m+w>>>1;a(o[C],f)<0?m=C+1:w=C}return m},right:function(o,f,m,w){for(m==null&&(m=0),w==null&&(w=o.length);m<w;){var C=m+w>>>1;a(o[C],f)>0?w=C:m=C+1}return m}}}function K0(a){return function(o,f){return fp(a(o),f)}}var Dd=Gp(fp),Iv=Dd.right,kl=Dd.left,Th=Iv,Q0=Array.prototype,E0=Q0.slice,S0=Q0.map,Jh=Math.sqrt(50),hp=Math.sqrt(10),Ld=Math.sqrt(2);function ed(a,o,f){var m,w=-1,C,D,B;if(o=+o,a=+a,f=+f,a===o&&f>0)return[a];if((m=o<a)&&(C=a,a=o,o=C),(B=td(a,o,f))===0||!isFinite(B))return[];if(B>0)for(a=Math.ceil(a/B),o=Math.floor(o/B),D=new Array(C=Math.ceil(o-a+1));++w<C;)D[w]=(a+w)*B;else for(a=Math.floor(a*B),o=Math.ceil(o*B),D=new Array(C=Math.ceil(a-o+1));++w<C;)D[w]=(a-w)/B;return m&&D.reverse(),D}function td(a,o,f){var m=(o-a)/Math.max(0,f),w=Math.floor(Math.log(m)/Math.LN10),C=m/Math.pow(10,w);return w>=0?(C>=Jh?10:C>=hp?5:C>=Ld?2:1)*Math.pow(10,w):-Math.pow(10,-w)/(C>=Jh?10:C>=hp?5:C>=Ld?2:1)}function Nd(a,o,f){var m=Math.abs(o-a)/Math.max(0,f),w=Math.pow(10,Math.floor(Math.log(m)/Math.LN10)),C=m/w;return C>=Jh?w*=10:C>=hp?w*=5:C>=Ld&&(w*=2),o<a?-w:w}function Oy(){var a=identity,o=extent,f=sturges;function m(w){var C,D=w.length,B,V=new Array(D);for(C=0;C<D;++C)V[C]=a(w[C],C,w);var re=o(V),Te=re[0],Ae=re[1],Fe=f(V,Te,Ae);Array.isArray(Fe)||(Fe=tickStep(Te,Ae,Fe),Fe=range(Math.ceil(Te/Fe)*Fe,Ae,Fe));for(var Mt=Fe.length;Fe[0]<=Te;)Fe.shift(),--Mt;for(;Fe[Mt-1]>Ae;)Fe.pop(),--Mt;var rn=new Array(Mt+1),In;for(C=0;C<=Mt;++C)In=rn[C]=[],In.x0=C>0?Fe[C-1]:Te,In.x1=C<Mt?Fe[C]:Ae;for(C=0;C<D;++C)B=V[C],Te<=B&&B<=Ae&&rn[bisect(Fe,B,0,Mt)].push(w[C]);return rn}return m.value=function(w){return arguments.length?(a=typeof w=="function"?w:constant(w),m):a},m.domain=function(w){return arguments.length?(o=typeof w=="function"?w:constant([w[0],w[1]]),m):o},m.thresholds=function(w){return arguments.length?(f=typeof w=="function"?w:Array.isArray(w)?constant(slice.call(w)):constant(w),m):f},m}function dp(a,o,f){return a=map.call(a,number).sort(ascending),Math.ceil((f-o)/(2*(quantile(a,.75)-quantile(a,.25))*Math.pow(a.length,-1/3)))}function pp(a){return a===null?NaN:+a}function Dv(a,o,f){if(f==null&&(f=pp),!!(m=a.length)){if((o=+o)<=0||m<2)return+f(a[0],0,a);if(o>=1)return+f(a[m-1],m-1,a);var m,w=(m-1)*o,C=Math.floor(w),D=+f(a[C],C,a),B=+f(a[C+1],C+1,a);return D+(B-D)*(w-C)}}var Pf="$";function w0(){}w0.prototype=Lv.prototype={constructor:w0,has:function(a){return Pf+a in this},get:function(a){return this[Pf+a]},set:function(a,o){return this[Pf+a]=o,this},remove:function(a){var o=Pf+a;return o in this&&delete this[o]},clear:function(){for(var a in this)a[0]===Pf&&delete this[a]},keys:function(){var a=[];for(var o in this)o[0]===Pf&&a.push(o.slice(1));return a},values:function(){var a=[];for(var o in this)o[0]===Pf&&a.push(this[o]);return a},entries:function(){var a=[];for(var o in this)o[0]===Pf&&a.push({key:o.slice(1),value:this[o]});return a},size:function(){var a=0;for(var o in this)o[0]===Pf&&++a;return a},empty:function(){for(var a in this)if(a[0]===Pf)return!1;return!0},each:function(a){for(var o in this)o[0]===Pf&&a(this[o],o.slice(1),this)}};function Lv(a,o){var f=new w0;if(a instanceof w0)a.each(function(B,V){f.set(V,B)});else if(Array.isArray(a)){var m=-1,w=a.length,C;if(o==null)for(;++m<w;)f.set(m,a[m]);else for(;++m<w;)f.set(o(C=a[m],m,a),C)}else if(a)for(var D in a)f.set(D,a[D]);return f}var If=Lv;function Wp(){var a=[],o=[],f,m,w;function C(B,V,re,Te){if(V>=a.length)return f!=null&&B.sort(f),m!=null?m(B):B;for(var Ae=-1,Fe=B.length,Mt=a[V++],rn,In,ar=map(),Cr,vr=re();++Ae<Fe;)(Cr=ar.get(rn=Mt(In=B[Ae])+""))?Cr.push(In):ar.set(rn,[In]);return ar.each(function(qr,ri){Te(vr,ri,C(qr,V,re,Te))}),vr}function D(B,V){if(++V>a.length)return B;var re,Te=o[V-1];return m!=null&&V>=a.length?re=B.entries():(re=[],B.each(function(Ae,Fe){re.push({key:Fe,values:D(Ae,V)})})),Te!=null?re.sort(function(Ae,Fe){return Te(Ae.key,Fe.key)}):re}return w={object:function(B){return C(B,0,Eg,Sg)},map:function(B){return C(B,0,Nv,Em)},entries:function(B){return D(C(B,0,Nv,Em),0)},key:function(B){return a.push(B),w},sortKeys:function(B){return o[a.length-1]=B,w},sortValues:function(B){return f=B,w},rollup:function(B){return m=B,w}}}function Eg(){return{}}function Sg(a,o,f){a[o]=f}function Nv(){return map()}function Em(a,o,f){a.set(o,f)}function nd(){}var Zp=If.prototype;nd.prototype=rd.prototype={constructor:nd,has:Zp.has,add:function(a){return a+="",this[Pf+a]=a,this},remove:Zp.remove,clear:Zp.clear,values:Zp.keys,size:Zp.size,empty:Zp.empty,each:Zp.each};function rd(a,o){var f=new nd;if(a instanceof nd)a.each(function(C){f.add(C)});else if(a){var m=-1,w=a.length;if(o==null)for(;++m<w;)f.add(a[m]);else for(;++m<w;)f.add(o(a[m],m,a))}return f}var wg=null,vp=Array.prototype,Fd=vp.map,mp=vp.slice;function pf(a,o){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(o).domain(a);break}return this}function J0(a,o){switch(arguments.length){case 0:break;case 1:this.interpolator(a);break;default:this.interpolator(o).domain(a);break}return this}var ev={name:"implicit"};function Uu(){var a=If(),o=[],f=[],m=ev;function w(C){var D=C+"",B=a.get(D);if(!B){if(m!==ev)return m;a.set(D,B=o.push(C))}return f[(B-1)%f.length]}return w.domain=function(C){if(!arguments.length)return o.slice();o=[],a=If();for(var D=-1,B=C.length,V,re;++D<B;)a.has(re=(V=C[D])+"")||a.set(re,o.push(V));return w},w.range=function(C){return arguments.length?(f=mp.call(C),w):f.slice()},w.unknown=function(C){return arguments.length?(m=C,w):m},w.copy=function(){return Uu(o,f).unknown(m)},pf.apply(w,arguments),w}function ec(){var a=ordinal().unknown(void 0),o=a.domain,f=a.range,m=[0,1],w,C,D=!1,B=0,V=0,re=.5;delete a.unknown;function Te(){var Ae=o().length,Fe=m[1]<m[0],Mt=m[Fe-0],rn=m[1-Fe];w=(rn-Mt)/Math.max(1,Ae-B+V*2),D&&(w=Math.floor(w)),Mt+=(rn-Mt-w*(Ae-B))*re,C=w*(1-B),D&&(Mt=Math.round(Mt),C=Math.round(C));var In=sequence(Ae).map(function(ar){return Mt+w*ar});return f(Fe?In.reverse():In)}return a.domain=function(Ae){return arguments.length?(o(Ae),Te()):o()},a.range=function(Ae){return arguments.length?(m=[+Ae[0],+Ae[1]],Te()):m.slice()},a.rangeRound=function(Ae){return m=[+Ae[0],+Ae[1]],D=!0,Te()},a.bandwidth=function(){return C},a.step=function(){return w},a.round=function(Ae){return arguments.length?(D=!!Ae,Te()):D},a.padding=function(Ae){return arguments.length?(B=Math.min(1,V=+Ae),Te()):B},a.paddingInner=function(Ae){return arguments.length?(B=Math.min(1,Ae),Te()):B},a.paddingOuter=function(Ae){return arguments.length?(V=+Ae,Te()):V},a.align=function(Ae){return arguments.length?(re=Math.max(0,Math.min(1,Ae)),Te()):re},a.copy=function(){return ec(o(),m).round(D).paddingInner(B).paddingOuter(V).align(re)},initRange.apply(Te(),arguments)}function lu(a){var o=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return lu(o())},a}function Zf(){return lu(ec.apply(null,arguments).paddingInner(1))}function My(a,o){return(isNumberArray(o)?numberArray:el)(a,o)}function el(a,o){var f=o?o.length:0,m=a?Math.min(f,a.length):0,w=new Array(m),C=new Array(f),D;for(D=0;D<m;++D)w[D]=Bv(a[D],o[D]);for(;D<f;++D)C[D]=o[D];return function(B){for(D=0;D<m;++D)C[D]=w[D](B);return C}}function tv(a,o){var f=new Date;return a=+a,o=+o,function(m){return f.setTime(a*(1-m)+o*m),f}}function nv(a,o){return a=+a,o=+o,function(f){return a*(1-f)+o*f}}function Ry(a,o){var f={},m={},w;(a===null||typeof a!="object")&&(a={}),(o===null||typeof o!="object")&&(o={});for(w in o)w in a?f[w]=Bv(a[w],o[w]):m[w]=o[w];return function(C){for(w in f)m[w]=f[w](C);return m}}var Fv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sm=new RegExp(Fv.source,"g");function wm(a){return function(){return a}}function Ac(a){return function(o){return a(o)+""}}function Py(a,o){var f=Fv.lastIndex=Sm.lastIndex=0,m,w,C,D=-1,B=[],V=[];for(a=a+"",o=o+"";(m=Fv.exec(a))&&(w=Sm.exec(o));)(C=w.index)>f&&(C=o.slice(f,C),B[D]?B[D]+=C:B[++D]=C),(m=m[0])===(w=w[0])?B[D]?B[D]+=w:B[++D]=w:(B[++D]=null,V.push({i:D,x:nv(m,w)})),f=Sm.lastIndex;return f<o.length&&(C=o.slice(f),B[D]?B[D]+=C:B[++D]=C),B.length<2?V[0]?Ac(V[0].x):wm(o):(o=V.length,function(re){for(var Te=0,Ae;Te<o;++Te)B[(Ae=V[Te]).i]=Ae.x(re);return B.join("")})}function T0(a,o){o||(o=[]);var f=a?Math.min(o.length,a.length):0,m=o.slice(),w;return function(C){for(w=0;w<f;++w)m[w]=a[w]*(1-C)+o[w]*C;return m}}function Tm(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Bv(a,o){var f=typeof o,m;return o==null||f==="boolean"?x0(o):(f==="number"?nv:f==="string"?(m=(0,q0.ZP)(o))?(o=m,yg):Py:o instanceof q0.ZP?yg:o instanceof Date?tv:Tm(o)?T0:Array.isArray(o)?el:typeof o.valueOf!="function"&&typeof o.toString!="function"||isNaN(o)?Ry:nv)(a,o)}function Am(a,o){return a=+a,o=+o,function(f){return Math.round(a*(1-f)+o*f)}}function Cm(a){return function(){return a}}function Iy(a){return+a}var rv=[0,1];function Cc(a){return a}function ke(a,o){return(o-=a=+a)?function(f){return(f-a)/o}:Cm(isNaN(o)?NaN:.5)}function Yt(a){var o=a[0],f=a[a.length-1],m;return o>f&&(m=o,o=f,f=m),function(w){return Math.max(o,Math.min(f,w))}}function Mn(a,o,f){var m=a[0],w=a[1],C=o[0],D=o[1];return w<m?(m=ke(w,m),C=f(D,C)):(m=ke(m,w),C=f(C,D)),function(B){return C(m(B))}}function Rr(a,o,f){var m=Math.min(a.length,o.length)-1,w=new Array(m),C=new Array(m),D=-1;for(a[m]<a[0]&&(a=a.slice().reverse(),o=o.slice().reverse());++D<m;)w[D]=ke(a[D],a[D+1]),C[D]=f(o[D],o[D+1]);return function(B){var V=Th(a,B,1,m)-1;return C[V](w[V](B))}}function Kr(a,o){return o.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function Pr(){var a=rv,o=rv,f=Bv,m,w,C,D=Cc,B,V,re;function Te(){return B=Math.min(a.length,o.length)>2?Rr:Mn,V=re=null,Ae}function Ae(Fe){return isNaN(Fe=+Fe)?C:(V||(V=B(a.map(m),o,f)))(m(D(Fe)))}return Ae.invert=function(Fe){return D(w((re||(re=B(o,a.map(m),nv)))(Fe)))},Ae.domain=function(Fe){return arguments.length?(a=Fd.call(Fe,Iy),D===Cc||(D=Yt(a)),Te()):a.slice()},Ae.range=function(Fe){return arguments.length?(o=mp.call(Fe),Te()):o.slice()},Ae.rangeRound=function(Fe){return o=mp.call(Fe),f=Am,Te()},Ae.clamp=function(Fe){return arguments.length?(D=Fe?Yt(a):Cc,Ae):D!==Cc},Ae.interpolate=function(Fe){return arguments.length?(f=Fe,Te()):f},Ae.unknown=function(Fe){return arguments.length?(C=Fe,Ae):C},function(Fe,Mt){return m=Fe,w=Mt,Te()}}function yr(a,o){return Pr()(a,o)}var Di=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vi(a){if(!(o=Di.exec(a)))throw new Error("invalid format: "+a);var o;return new Hi({fill:o[1],align:o[2],sign:o[3],symbol:o[4],zero:o[5],width:o[6],comma:o[7],precision:o[8]&&o[8].slice(1),trim:o[9],type:o[10]})}vi.prototype=Hi.prototype;function Hi(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}Hi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Li(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function ki(a,o){if((f=(a=o?a.toExponential(o-1):a.toExponential()).indexOf("e"))<0)return null;var f,m=a.slice(0,f);return[m.length>1?m[0]+m.slice(2):m,+a.slice(f+1)]}function Gi(a){return a=ki(Math.abs(a)),a?a[1]:NaN}function Ei(a,o){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gi(o)/3)))*3-Gi(Math.abs(a)))}function Wi(a,o){return function(f,m){for(var w=f.length,C=[],D=0,B=a[0],V=0;w>0&&B>0&&(V+B+1>m&&(B=Math.max(1,m-V)),C.push(f.substring(w-=B,w+B)),!((V+=B+1)>m));)B=a[D=(D+1)%a.length];return C.reverse().join(o)}}function dr(a){return function(o){return o.replace(/[0-9]/g,function(f){return a[+f]})}}function jr(a){e:for(var o=a.length,f=1,m=-1,w;f<o;++f)switch(a[f]){case".":m=w=f;break;case"0":m===0&&(m=f),w=f;break;default:if(!+a[f])break e;m>0&&(m=0);break}return m>0?a.slice(0,m)+a.slice(w+1):a}var Si;function fo(a,o){var f=ki(a,o);if(!f)return a+"";var m=f[0],w=f[1],C=w-(Si=Math.max(-8,Math.min(8,Math.floor(w/3)))*3)+1,D=m.length;return C===D?m:C>D?m+new Array(C-D+1).join("0"):C>0?m.slice(0,C)+"."+m.slice(C):"0."+new Array(1-C).join("0")+ki(a,Math.max(0,o+C-1))[0]}function ui(a,o){var f=ki(a,o);if(!f)return a+"";var m=f[0],w=f[1];return w<0?"0."+new Array(-w).join("0")+m:m.length>w+1?m.slice(0,w+1)+"."+m.slice(w+1):m+new Array(w-m.length+2).join("0")}var ao={"%":function(a,o){return(a*100).toFixed(o)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:Li,e:function(a,o){return a.toExponential(o)},f:function(a,o){return a.toFixed(o)},g:function(a,o){return a.toPrecision(o)},o:function(a){return Math.round(a).toString(8)},p:function(a,o){return ui(a*100,o)},r:ui,s:fo,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function Ti(a){return a}var ro=Array.prototype.map,ci=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function _i(a){var o=a.grouping===void 0||a.thousands===void 0?Ti:Wi(ro.call(a.grouping,Number),a.thousands+""),f=a.currency===void 0?"":a.currency[0]+"",m=a.currency===void 0?"":a.currency[1]+"",w=a.decimal===void 0?".":a.decimal+"",C=a.numerals===void 0?Ti:dr(ro.call(a.numerals,String)),D=a.percent===void 0?"%":a.percent+"",B=a.minus===void 0?"-":a.minus+"",V=a.nan===void 0?"NaN":a.nan+"";function re(Ae){Ae=vi(Ae);var Fe=Ae.fill,Mt=Ae.align,rn=Ae.sign,In=Ae.symbol,ar=Ae.zero,Cr=Ae.width,vr=Ae.comma,qr=Ae.precision,ri=Ae.trim,po=Ae.type;po==="n"?(vr=!0,po="g"):ao[po]||(qr===void 0&&(qr=12),ri=!0,po="g"),(ar||Fe==="0"&&Mt==="=")&&(ar=!0,Fe="0",Mt="=");var ho=In==="$"?f:In==="#"&&/[boxX]/.test(po)?"0"+po.toLowerCase():"",Xr=In==="$"?m:/[%p]/.test(po)?D:"",lo=ao[po],za=/[defgprs%]/.test(po);qr=qr===void 0?6:/[gprs]/.test(po)?Math.max(1,Math.min(21,qr)):Math.max(0,Math.min(20,qr));function Ps(zi){var _s=ho,as=Xr,$f,Yd,$d;if(po==="c")as=lo(zi)+as,zi="";else{zi=+zi;var Zs=zi<0||1/zi<0;if(zi=isNaN(zi)?V:lo(Math.abs(zi),qr),ri&&(zi=jr(zi)),Zs&&+zi==0&&rn!=="+"&&(Zs=!1),_s=(Zs?rn==="("?rn:B:rn==="-"||rn==="("?"":rn)+_s,as=(po==="s"?ci[8+Si/3]:"")+as+(Zs&&rn==="("?")":""),za){for($f=-1,Yd=zi.length;++$f<Yd;)if($d=zi.charCodeAt($f),48>$d||$d>57){as=($d===46?w+zi.slice($f+1):zi.slice($f))+as,zi=zi.slice(0,$f);break}}}vr&&!ar&&(zi=o(zi,1/0));var _c=_s.length+zi.length+as.length,Pc=_c<Cr?new Array(Cr-_c+1).join(Fe):"";switch(vr&&ar&&(zi=o(Pc+zi,Pc.length?Cr-as.length:1/0),Pc=""),Mt){case"<":zi=_s+zi+as+Pc;break;case"=":zi=_s+Pc+zi+as;break;case"^":zi=Pc.slice(0,_c=Pc.length>>1)+_s+zi+as+Pc.slice(_c);break;default:zi=Pc+_s+zi+as;break}return C(zi)}return Ps.toString=function(){return Ae+""},Ps}function Te(Ae,Fe){var Mt=re((Ae=vi(Ae),Ae.type="f",Ae)),rn=Math.max(-8,Math.min(8,Math.floor(Gi(Fe)/3)))*3,In=Math.pow(10,-rn),ar=ci[8+rn/3];return function(Cr){return Mt(In*Cr)+ar}}return{format:re,formatPrefix:Te}}var No,ha,no;Oi({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Oi(a){return No=_i(a),ha=No.format,no=No.formatPrefix,No}function Jr(a,o){return a=Math.abs(a),o=Math.abs(o)-a,Math.max(0,Gi(o)-Gi(a))+1}function Vo(a){return Math.max(0,-Gi(Math.abs(a)))}function Ba(a,o,f,m){var w=Nd(a,o,f),C;switch(m=vi(m==null?",f":m),m.type){case"s":{var D=Math.max(Math.abs(a),Math.abs(o));return m.precision==null&&!isNaN(C=Ei(w,D))&&(m.precision=C),no(m,D)}case"":case"e":case"g":case"p":case"r":{m.precision==null&&!isNaN(C=Jr(w,Math.max(Math.abs(a),Math.abs(o))))&&(m.precision=C-(m.type==="e"));break}case"f":case"%":{m.precision==null&&!isNaN(C=Vo(w))&&(m.precision=C-(m.type==="%")*2);break}}return ha(m)}function so(a){var o=a.domain;return a.ticks=function(f){var m=o();return ed(m[0],m[m.length-1],f==null?10:f)},a.tickFormat=function(f,m){var w=o();return Ba(w[0],w[w.length-1],f==null?10:f,m)},a.nice=function(f){f==null&&(f=10);var m=o(),w=0,C=m.length-1,D=m[w],B=m[C],V;return B<D&&(V=D,D=B,B=V,V=w,w=C,C=V),V=td(D,B,f),V>0?(D=Math.floor(D/V)*V,B=Math.ceil(B/V)*V,V=td(D,B,f)):V<0&&(D=Math.ceil(D*V)/V,B=Math.floor(B*V)/V,V=td(D,B,f)),V>0?(m[w]=Math.floor(D/V)*V,m[C]=Math.ceil(B/V)*V,o(m)):V<0&&(m[w]=Math.ceil(D*V)/V,m[C]=Math.floor(B*V)/V,o(m)),a},a}function va(){var a=yr(Cc,Cc);return a.copy=function(){return Kr(a,va())},pf.apply(a,arguments),so(a)}function da(a){var o;function f(m){return isNaN(m=+m)?o:m}return f.invert=f,f.domain=f.range=function(m){return arguments.length?(a=map.call(m,number),f):a.slice()},f.unknown=function(m){return arguments.length?(o=m,f):o},f.copy=function(){return da(a).unknown(o)},a=arguments.length?map.call(a,number):[0,1],linearish(f)}function qo(a,o){a=a.slice();var f=0,m=a.length-1,w=a[f],C=a[m],D;return C<w&&(D=f,f=m,m=D,D=w,w=C,C=D),a[f]=o.floor(w),a[m]=o.ceil(C),a}function fs(a){return Math.log(a)}function Il(a){return Math.exp(a)}function Mu(a){return-Math.log(-a)}function ts(a){return-Math.exp(-a)}function Zl(a){return isFinite(a)?+("1e"+a):a<0?0:a}function tl(a){return a===10?Zl:a===Math.E?Math.exp:function(o){return Math.pow(a,o)}}function ae(a){return a===Math.E?Math.log:a===10&&Math.log10||a===2&&Math.log2||(a=Math.log(a),function(o){return Math.log(o)/a})}function uu(a){return function(o){return-a(-o)}}function ml(a){var o=a(fs,Il),f=o.domain,m=10,w,C;function D(){return w=ae(m),C=tl(m),f()[0]<0?(w=uu(w),C=uu(C),a(Mu,ts)):a(fs,Il),o}return o.base=function(B){return arguments.length?(m=+B,D()):m},o.domain=function(B){return arguments.length?(f(B),D()):f()},o.ticks=function(B){var V=f(),re=V[0],Te=V[V.length-1],Ae;(Ae=Te<re)&&(Fe=re,re=Te,Te=Fe);var Fe=w(re),Mt=w(Te),rn,In,ar,Cr=B==null?10:+B,vr=[];if(!(m%1)&&Mt-Fe<Cr){if(Fe=Math.round(Fe)-1,Mt=Math.round(Mt)+1,re>0){for(;Fe<Mt;++Fe)for(In=1,rn=C(Fe);In<m;++In)if(ar=rn*In,!(ar<re)){if(ar>Te)break;vr.push(ar)}}else for(;Fe<Mt;++Fe)for(In=m-1,rn=C(Fe);In>=1;--In)if(ar=rn*In,!(ar<re)){if(ar>Te)break;vr.push(ar)}}else vr=ed(Fe,Mt,Math.min(Mt-Fe,Cr)).map(C);return Ae?vr.reverse():vr},o.tickFormat=function(B,V){if(V==null&&(V=m===10?".0e":","),typeof V!="function"&&(V=ha(V)),B===1/0)return V;B==null&&(B=10);var re=Math.max(1,m*B/o.ticks().length);return function(Te){var Ae=Te/C(Math.round(w(Te)));return Ae*m<m-.5&&(Ae*=m),Ae<=re?V(Te):""}},o.nice=function(){return f(qo(f(),{floor:function(B){return C(Math.floor(w(B)))},ceil:function(B){return C(Math.ceil(w(B)))}}))},o}function cr(){var a=ml(Pr()).domain([1,10]);return a.copy=function(){return Kr(a,cr()).base(a.base())},pf.apply(a,arguments),a}function ti(a){return function(o){return Math.sign(o)*Math.log1p(Math.abs(o/a))}}function gl(a){return function(o){return Math.sign(o)*Math.expm1(Math.abs(o))*a}}function Ma(a){var o=1,f=a(ti(o),gl(o));return f.constant=function(m){return arguments.length?a(ti(o=+m),gl(o)):o},linearish(f)}function tc(){var a=Ma(transformer());return a.copy=function(){return copy(a,tc()).constant(a.constant())},initRange.apply(a,arguments)}function Os(a){return function(o){return o<0?-Math.pow(-o,a):Math.pow(o,a)}}function ia(a){return a<0?-Math.sqrt(-a):Math.sqrt(a)}function Xa(a){return a<0?-a*a:a*a}function gs(a){var o=a(Cc,Cc),f=1;function m(){return f===1?a(Cc,Cc):f===.5?a(ia,Xa):a(Os(f),Os(1/f))}return o.exponent=function(w){return arguments.length?(f=+w,m()):f},so(o)}function Xl(){var a=gs(Pr());return a.copy=function(){return Kr(a,Xl()).exponent(a.exponent())},pf.apply(a,arguments),a}function Bd(){return Xl.apply(null,arguments).exponent(.5)}function bn(){var a=[],o=[],f=[],m;function w(){var D=0,B=Math.max(1,o.length);for(f=new Array(B-1);++D<B;)f[D-1]=Dv(a,D/B);return C}function C(D){return isNaN(D=+D)?m:o[Th(f,D)]}return C.invertExtent=function(D){var B=o.indexOf(D);return B<0?[NaN,NaN]:[B>0?f[B-1]:a[0],B<f.length?f[B]:a[a.length-1]]},C.domain=function(D){if(!arguments.length)return a.slice();a=[];for(var B=0,V=D.length,re;B<V;++B)re=D[B],re!=null&&!isNaN(re=+re)&&a.push(re);return a.sort(fp),w()},C.range=function(D){return arguments.length?(o=mp.call(D),w()):o.slice()},C.unknown=function(D){return arguments.length?(m=D,C):m},C.quantiles=function(){return f.slice()},C.copy=function(){return bn().domain(a).range(o).unknown(m)},pf.apply(C,arguments)}function Lr(){var a=0,o=1,f=1,m=[.5],w=[0,1],C;function D(V){return V<=V?w[Th(m,V,0,f)]:C}function B(){var V=-1;for(m=new Array(f);++V<f;)m[V]=((V+1)*o-(V-f)*a)/(f+1);return D}return D.domain=function(V){return arguments.length?(a=+V[0],o=+V[1],B()):[a,o]},D.range=function(V){return arguments.length?(f=(w=mp.call(V)).length-1,B()):w.slice()},D.invertExtent=function(V){var re=w.indexOf(V);return re<0?[NaN,NaN]:re<1?[a,m[0]]:re>=f?[m[f-1],o]:[m[re-1],m[re]]},D.unknown=function(V){return arguments.length&&(C=V),D},D.thresholds=function(){return m.slice()},D.copy=function(){return Lr().domain([a,o]).range(w).unknown(C)},pf.apply(so(D),arguments)}function Sr(){var a=[.5],o=[0,1],f,m=1;function w(C){return C<=C?o[Th(a,C,0,m)]:f}return w.domain=function(C){return arguments.length?(a=mp.call(C),m=Math.min(a.length,o.length-1),w):a.slice()},w.range=function(C){return arguments.length?(o=mp.call(C),m=Math.min(a.length,o.length-1),w):o.slice()},w.invertExtent=function(C){var D=o.indexOf(C);return[a[D-1],a[D]]},w.unknown=function(C){return arguments.length?(f=C,w):f},w.copy=function(){return Sr().domain(a).range(o).unknown(f)},pf.apply(w,arguments)}var mo=new Date,Pa=new Date;function Ya(a,o,f,m){function w(C){return a(C=arguments.length===0?new Date:new Date(+C)),C}return w.floor=function(C){return a(C=new Date(+C)),C},w.ceil=function(C){return a(C=new Date(C-1)),o(C,1),a(C),C},w.round=function(C){var D=w(C),B=w.ceil(C);return C-D<B-C?D:B},w.offset=function(C,D){return o(C=new Date(+C),D==null?1:Math.floor(D)),C},w.range=function(C,D,B){var V=[],re;if(C=w.ceil(C),B=B==null?1:Math.floor(B),!(C<D)||!(B>0))return V;do V.push(re=new Date(+C)),o(C,B),a(C);while(re<C&&C<D);return V},w.filter=function(C){return Ya(function(D){if(D>=D)for(;a(D),!C(D);)D.setTime(D-1)},function(D,B){if(D>=D)if(B<0)for(;++B<=0;)for(;o(D,-1),!C(D););else for(;--B>=0;)for(;o(D,1),!C(D););})},f&&(w.count=function(C,D){return mo.setTime(+C),Pa.setTime(+D),a(mo),a(Pa),Math.floor(f(mo,Pa))},w.every=function(C){return C=Math.floor(C),!isFinite(C)||!(C>0)?null:C>1?w.filter(m?function(D){return m(D)%C===0}:function(D){return w.count(0,D)%C===0}):w}),w}var Nt=Ya(function(a){a.setMonth(0,1),a.setHours(0,0,0,0)},function(a,o){a.setFullYear(a.getFullYear()+o)},function(a,o){return o.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()});Nt.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:Ya(function(o){o.setFullYear(Math.floor(o.getFullYear()/a)*a),o.setMonth(0,1),o.setHours(0,0,0,0)},function(o,f){o.setFullYear(o.getFullYear()+f*a)})};var nn=Nt,Rn=Nt.range,Tr=Ya(function(a){a.setDate(1),a.setHours(0,0,0,0)},function(a,o){a.setMonth(a.getMonth()+o)},function(a,o){return o.getMonth()-a.getMonth()+(o.getFullYear()-a.getFullYear())*12},function(a){return a.getMonth()}),xr=Tr,Vn=Tr.range,Kn=1e3,rr=6e4,xn=36e5,Zn=864e5,en=6048e5;function Xn(a){return Ya(function(o){o.setDate(o.getDate()-(o.getDay()+7-a)%7),o.setHours(0,0,0,0)},function(o,f){o.setDate(o.getDate()+f*7)},function(o,f){return(f-o-(f.getTimezoneOffset()-o.getTimezoneOffset())*rr)/en})}var Nr=Xn(0),Vr=Xn(1),bi=Xn(2),li=Xn(3),yi=Xn(4),Lo=Xn(5),Zi=Xn(6),to=Nr.range,oa=Vr.range,na=bi.range,zs=li.range,ju=yi.range,Oc=Lo.range,Dy=Zi.range,sh=Ya(function(a){a.setHours(0,0,0,0)},function(a,o){a.setDate(a.getDate()+o)},function(a,o){return(o-a-(o.getTimezoneOffset()-a.getTimezoneOffset())*rr)/Zn},function(a){return a.getDate()-1}),Om=sh,Xp=sh.range,kv=Ya(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Kn-a.getMinutes()*rr)},function(a,o){a.setTime(+a+o*xn)},function(a,o){return(o-a)/xn},function(a){return a.getHours()}),u1=kv,QE=kv.range,Mm=Ya(function(a){a.setTime(a-a.getMilliseconds()-a.getSeconds()*Kn)},function(a,o){a.setTime(+a+o*rr)},function(a,o){return(o-a)/rr},function(a){return a.getMinutes()}),Ly=Mm,A0=Mm.range,Ny=Ya(function(a){a.setTime(a-a.getMilliseconds())},function(a,o){a.setTime(+a+o*Kn)},function(a,o){return(o-a)/Kn},function(a){return a.getUTCSeconds()}),zv=Ny,Tg=Ny.range,cu=Ya(function(){},function(a,o){a.setTime(+a+o)},function(a,o){return o-a});cu.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?Ya(function(o){o.setTime(Math.floor(o/a)*a)},function(o,f){o.setTime(+o+f*a)},function(o,f){return(f-o)/a}):cu};var Dl=cu,Fy=cu.range;function kd(a){return Ya(function(o){o.setUTCDate(o.getUTCDate()-(o.getUTCDay()+7-a)%7),o.setUTCHours(0,0,0,0)},function(o,f){o.setUTCDate(o.getUTCDate()+f*7)},function(o,f){return(f-o)/en})}var c1=kd(0),Ag=kd(1),By=kd(2),ky=kd(3),id=kd(4),Uv=kd(5),rx=kd(6),nc=c1.range,zy=Ag.range,iv=By.range,jv=ky.range,f1=id.range,ix=Uv.range,Cg=rx.range,Yp=Ya(function(a){a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCDate(a.getUTCDate()+o)},function(a,o){return(o-a)/Zn},function(a){return a.getUTCDate()-1}),h1=Yp,Rm=Yp.range,yu=Ya(function(a){a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},function(a,o){a.setUTCFullYear(a.getUTCFullYear()+o)},function(a,o){return o.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()});yu.every=function(a){return!isFinite(a=Math.floor(a))||!(a>0)?null:Ya(function(o){o.setUTCFullYear(Math.floor(o.getUTCFullYear()/a)*a),o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function(o,f){o.setUTCFullYear(o.getUTCFullYear()+f*a)})};var Fs=yu,ya=yu.range;function ov(a){if(0<=a.y&&a.y<100){var o=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return o.setFullYear(a.y),o}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function u(a){if(0<=a.y&&a.y<100){var o=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return o.setUTCFullYear(a.y),o}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function d(a,o,f){return{y:a,m:o,d:f,H:0,M:0,S:0,L:0}}function g(a){var o=a.dateTime,f=a.date,m=a.time,w=a.periods,C=a.days,D=a.shortDays,B=a.months,V=a.shortMonths,re=Ne(w),Te=Ze(w),Ae=Ne(C),Fe=Ze(C),Mt=Ne(D),rn=Ze(D),In=Ne(B),ar=Ze(B),Cr=Ne(V),vr=Ze(V),qr={a:Zs,A:_c,b:Pc,B:wv,c:null,d:Ro,e:Ro,f:Ms,g:zl,G:ns,H:Ka,I:Ho,j:is,L:Uo,m:nl,M:Yl,p:O2,q:ng,Q:Hv,s:Pm,S:Ll,u:El,U:$l,V:_u,w:Gc,W:Vu,x:null,X:null,y:Wc,Y:rc,Z:Ks,"%":sv},ri={a:rg,A:D_,b:Fw,B:i4,c:null,d:js,e:js,f:bu,g:av,G:Vv,H:ys,I:Zc,j:Mc,L:hl,m:Rc,M:Rs,p:sM,q:ny,Q:Hv,s:Pm,S:Vs,u:lh,U:zd,V:gp,w:od,W:ic,x:null,X:null,y:yp,Y:_p,Z:Og,"%":sv},po={a:Ps,A:zi,b:_s,B:as,c:$f,d:Br,e:Br,f:$o,g:Ln,G:Hn,H:Ni,I:Ni,j:$r,L:go,m:Fr,M:eo,p:za,q:_r,Q:Ga,s:ua,S:zo,u:Tt,U:Bt,V:vn,w:ot,W:_n,x:Yd,X:$d,y:Ln,Y:Hn,Z:fr,"%":yo};qr.x=ho(f,qr),qr.X=ho(m,qr),qr.c=ho(o,qr),ri.x=ho(f,ri),ri.X=ho(m,ri),ri.c=ho(o,ri);function ho(pa,Hs){return function(_l){var bo=[],Nh=-1,Su=0,hh=pa.length,Ua,dh,F0;for(_l instanceof Date||(_l=new Date(+_l));++Nh<hh;)pa.charCodeAt(Nh)===37&&(bo.push(pa.slice(Su,Nh)),(dh=A[Ua=pa.charAt(++Nh)])!=null?Ua=pa.charAt(++Nh):dh=Ua==="e"?" ":"0",(F0=Hs[Ua])&&(Ua=F0(_l,dh)),bo.push(Ua),Su=Nh+1);return bo.push(pa.slice(Su,Nh)),bo.join("")}}function Xr(pa,Hs){return function(_l){var bo=d(1900,void 0,1),Nh=lo(bo,pa,_l+="",0),Su,hh;if(Nh!=_l.length)return null;if("Q"in bo)return new Date(bo.Q);if("s"in bo)return new Date(bo.s*1e3+("L"in bo?bo.L:0));if(Hs&&!("Z"in bo)&&(bo.Z=0),"p"in bo&&(bo.H=bo.H%12+bo.p*12),bo.m===void 0&&(bo.m="q"in bo?bo.q:0),"V"in bo){if(bo.V<1||bo.V>53)return null;"w"in bo||(bo.w=1),"Z"in bo?(Su=u(d(bo.y,0,1)),hh=Su.getUTCDay(),Su=hh>4||hh===0?Ag.ceil(Su):Ag(Su),Su=h1.offset(Su,(bo.V-1)*7),bo.y=Su.getUTCFullYear(),bo.m=Su.getUTCMonth(),bo.d=Su.getUTCDate()+(bo.w+6)%7):(Su=ov(d(bo.y,0,1)),hh=Su.getDay(),Su=hh>4||hh===0?Vr.ceil(Su):Vr(Su),Su=Om.offset(Su,(bo.V-1)*7),bo.y=Su.getFullYear(),bo.m=Su.getMonth(),bo.d=Su.getDate()+(bo.w+6)%7)}else("W"in bo||"U"in bo)&&("w"in bo||(bo.w="u"in bo?bo.u%7:"W"in bo?1:0),hh="Z"in bo?u(d(bo.y,0,1)).getUTCDay():ov(d(bo.y,0,1)).getDay(),bo.m=0,bo.d="W"in bo?(bo.w+6)%7+bo.W*7-(hh+5)%7:bo.w+bo.U*7-(hh+6)%7);return"Z"in bo?(bo.H+=bo.Z/100|0,bo.M+=bo.Z%100,u(bo)):ov(bo)}}function lo(pa,Hs,_l,bo){for(var Nh=0,Su=Hs.length,hh=_l.length,Ua,dh;Nh<Su;){if(bo>=hh)return-1;if(Ua=Hs.charCodeAt(Nh++),Ua===37){if(Ua=Hs.charAt(Nh++),dh=po[Ua in A?Hs.charAt(Nh++):Ua],!dh||(bo=dh(pa,_l,bo))<0)return-1}else if(Ua!=_l.charCodeAt(bo++))return-1}return bo}function za(pa,Hs,_l){var bo=re.exec(Hs.slice(_l));return bo?(pa.p=Te[bo[0].toLowerCase()],_l+bo[0].length):-1}function Ps(pa,Hs,_l){var bo=Mt.exec(Hs.slice(_l));return bo?(pa.w=rn[bo[0].toLowerCase()],_l+bo[0].length):-1}function zi(pa,Hs,_l){var bo=Ae.exec(Hs.slice(_l));return bo?(pa.w=Fe[bo[0].toLowerCase()],_l+bo[0].length):-1}function _s(pa,Hs,_l){var bo=Cr.exec(Hs.slice(_l));return bo?(pa.m=vr[bo[0].toLowerCase()],_l+bo[0].length):-1}function as(pa,Hs,_l){var bo=In.exec(Hs.slice(_l));return bo?(pa.m=ar[bo[0].toLowerCase()],_l+bo[0].length):-1}function $f(pa,Hs,_l){return lo(pa,o,Hs,_l)}function Yd(pa,Hs,_l){return lo(pa,f,Hs,_l)}function $d(pa,Hs,_l){return lo(pa,m,Hs,_l)}function Zs(pa){return D[pa.getDay()]}function _c(pa){return C[pa.getDay()]}function Pc(pa){return V[pa.getMonth()]}function wv(pa){return B[pa.getMonth()]}function O2(pa){return w[+(pa.getHours()>=12)]}function ng(pa){return 1+~~(pa.getMonth()/3)}function rg(pa){return D[pa.getUTCDay()]}function D_(pa){return C[pa.getUTCDay()]}function Fw(pa){return V[pa.getUTCMonth()]}function i4(pa){return B[pa.getUTCMonth()]}function sM(pa){return w[+(pa.getUTCHours()>=12)]}function ny(pa){return 1+~~(pa.getUTCMonth()/3)}return{format:function(pa){var Hs=ho(pa+="",qr);return Hs.toString=function(){return pa},Hs},parse:function(pa){var Hs=Xr(pa+="",!1);return Hs.toString=function(){return pa},Hs},utcFormat:function(pa){var Hs=ho(pa+="",ri);return Hs.toString=function(){return pa},Hs},utcParse:function(pa){var Hs=Xr(pa+="",!0);return Hs.toString=function(){return pa},Hs}}}var A={"-":"",_:" ",0:"0"},P=/^\s*\d+/,F=/^%/,j=/[\\^$*+?|[\]().{}]/g;function q(a,o,f){var m=a<0?"-":"",w=(m?-a:a)+"",C=w.length;return m+(C<f?new Array(f-C+1).join(o)+w:w)}function _e(a){return a.replace(j,"\\$&")}function Ne(a){return new RegExp("^(?:"+a.map(_e).join("|")+")","i")}function Ze(a){for(var o={},f=-1,m=a.length;++f<m;)o[a[f].toLowerCase()]=f;return o}function ot(a,o,f){var m=P.exec(o.slice(f,f+1));return m?(a.w=+m[0],f+m[0].length):-1}function Tt(a,o,f){var m=P.exec(o.slice(f,f+1));return m?(a.u=+m[0],f+m[0].length):-1}function Bt(a,o,f){var m=P.exec(o.slice(f,f+2));return m?(a.U=+m[0],f+m[0].length):-1}function vn(a,o,f){var m=P.exec(o.slice(f,f+2));return m?(a.V=+m[0],f+m[0].length):-1}function _n(a,o,f){var m=P.exec(o.slice(f,f+2));return m?(a.W=+m[0],f+m[0].length):-1}function Hn(a,o,f){var m=P.exec(o.slice(f,f+4));return m?(a.y=+m[0],f+m[0].length):-1}function Ln(a,o,f){var m=P.exec(o.slice(f,f+2));return m?(a.y=+m[0]+(+m[0]>68?1900:2e3),f+m[0].length):-1}function fr(a,o,f){var m=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(o.slice(f,f+6));return m?(a.Z=m[1]?0:-(m[2]+(m[3]||"00")),f+m[0].length):-1}function _r(a,o,f){var m=P.exec(o.slice(f,f+1));return m?(a.q=m[0]*3-3,f+m[0].length):-1}function Fr(a,o,f){var m=P.exec(o.slice(f,f+2));return m?(a.m=m[0]-1,f+m[0].length):-1}function Br(a,o,f){var m=P.exec(o.slice(f,f+2));return m?(a.d=+m[0],f+m[0].length):-1}function $r(a,o,f){var m=P.exec(o.slice(f,f+3));return m?(a.m=0,a.d=+m[0],f+m[0].length):-1}function Ni(a,o,f){var m=P.exec(o.slice(f,f+2));return m?(a.H=+m[0],f+m[0].length):-1}function eo(a,o,f){var m=P.exec(o.slice(f,f+2));return m?(a.M=+m[0],f+m[0].length):-1}function zo(a,o,f){var m=P.exec(o.slice(f,f+2));return m?(a.S=+m[0],f+m[0].length):-1}function go(a,o,f){var m=P.exec(o.slice(f,f+3));return m?(a.L=+m[0],f+m[0].length):-1}function $o(a,o,f){var m=P.exec(o.slice(f,f+6));return m?(a.L=Math.floor(m[0]/1e3),f+m[0].length):-1}function yo(a,o,f){var m=F.exec(o.slice(f,f+1));return m?f+m[0].length:-1}function Ga(a,o,f){var m=P.exec(o.slice(f));return m?(a.Q=+m[0],f+m[0].length):-1}function ua(a,o,f){var m=P.exec(o.slice(f));return m?(a.s=+m[0],f+m[0].length):-1}function Ro(a,o){return q(a.getDate(),o,2)}function Ka(a,o){return q(a.getHours(),o,2)}function Ho(a,o){return q(a.getHours()%12||12,o,2)}function is(a,o){return q(1+Om.count(nn(a),a),o,3)}function Uo(a,o){return q(a.getMilliseconds(),o,3)}function Ms(a,o){return Uo(a,o)+"000"}function nl(a,o){return q(a.getMonth()+1,o,2)}function Yl(a,o){return q(a.getMinutes(),o,2)}function Ll(a,o){return q(a.getSeconds(),o,2)}function El(a){var o=a.getDay();return o===0?7:o}function $l(a,o){return q(Nr.count(nn(a)-1,a),o,2)}function ql(a){var o=a.getDay();return o>=4||o===0?yi(a):yi.ceil(a)}function _u(a,o){return a=ql(a),q(yi.count(nn(a),a)+(nn(a).getDay()===4),o,2)}function Gc(a){return a.getDay()}function Vu(a,o){return q(Vr.count(nn(a)-1,a),o,2)}function Wc(a,o){return q(a.getFullYear()%100,o,2)}function zl(a,o){return a=ql(a),q(a.getFullYear()%100,o,2)}function rc(a,o){return q(a.getFullYear()%1e4,o,4)}function ns(a,o){var f=a.getDay();return a=f>=4||f===0?yi(a):yi.ceil(a),q(a.getFullYear()%1e4,o,4)}function Ks(a){var o=a.getTimezoneOffset();return(o>0?"-":(o*=-1,"+"))+q(o/60|0,"0",2)+q(o%60,"0",2)}function js(a,o){return q(a.getUTCDate(),o,2)}function ys(a,o){return q(a.getUTCHours(),o,2)}function Zc(a,o){return q(a.getUTCHours()%12||12,o,2)}function Mc(a,o){return q(1+h1.count(Fs(a),a),o,3)}function hl(a,o){return q(a.getUTCMilliseconds(),o,3)}function bu(a,o){return hl(a,o)+"000"}function Rc(a,o){return q(a.getUTCMonth()+1,o,2)}function Rs(a,o){return q(a.getUTCMinutes(),o,2)}function Vs(a,o){return q(a.getUTCSeconds(),o,2)}function lh(a){var o=a.getUTCDay();return o===0?7:o}function zd(a,o){return q(c1.count(Fs(a)-1,a),o,2)}function al(a){var o=a.getUTCDay();return o>=4||o===0?id(a):id.ceil(a)}function gp(a,o){return a=al(a),q(id.count(Fs(a),a)+(Fs(a).getUTCDay()===4),o,2)}function od(a){return a.getUTCDay()}function ic(a,o){return q(Ag.count(Fs(a)-1,a),o,2)}function yp(a,o){return q(a.getUTCFullYear()%100,o,2)}function av(a,o){return a=al(a),q(a.getUTCFullYear()%100,o,2)}function _p(a,o){return q(a.getUTCFullYear()%1e4,o,4)}function Vv(a,o){var f=a.getUTCDay();return a=f>=4||f===0?id(a):id.ceil(a),q(a.getUTCFullYear()%1e4,o,4)}function Og(){return"+0000"}function sv(){return"%"}function Hv(a){return+a}function Pm(a){return Math.floor(+a/1e3)}var $p,bp,Im,lv,qp;Gv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Gv(a){return $p=g(a),bp=$p.format,Im=$p.parse,lv=$p.utcFormat,qp=$p.utcParse,$p}var uv=1e3,cv=uv*60,Kp=cv*60,xp=Kp*24,Mg=xp*7,Dm=xp*30,C0=xp*365;function uh(a){return new Date(a)}function Rg(a){return a instanceof Date?+a:+new Date(+a)}function O0(a,o,f,m,w,C,D,B,V){var re=yr(Cc,Cc),Te=re.invert,Ae=re.domain,Fe=V(".%L"),Mt=V(":%S"),rn=V("%I:%M"),In=V("%I %p"),ar=V("%a %d"),Cr=V("%b %d"),vr=V("%B"),qr=V("%Y"),ri=[[D,1,uv],[D,5,5*uv],[D,15,15*uv],[D,30,30*uv],[C,1,cv],[C,5,5*cv],[C,15,15*cv],[C,30,30*cv],[w,1,Kp],[w,3,3*Kp],[w,6,6*Kp],[w,12,12*Kp],[m,1,xp],[m,2,2*xp],[f,1,Mg],[o,1,Dm],[o,3,3*Dm],[a,1,C0]];function po(Xr){return(D(Xr)<Xr?Fe:C(Xr)<Xr?Mt:w(Xr)<Xr?rn:m(Xr)<Xr?In:o(Xr)<Xr?f(Xr)<Xr?ar:Cr:a(Xr)<Xr?vr:qr)(Xr)}function ho(Xr,lo,za,Ps){if(Xr==null&&(Xr=10),typeof Xr=="number"){var zi=Math.abs(za-lo)/Xr,_s=Gp(function(as){return as[2]}).right(ri,zi);_s===ri.length?(Ps=Nd(lo/C0,za/C0,Xr),Xr=a):_s?(_s=ri[zi/ri[_s-1][2]<ri[_s][2]/zi?_s-1:_s],Ps=_s[1],Xr=_s[0]):(Ps=Math.max(Nd(lo,za,Xr),1),Xr=B)}return Ps==null?Xr:Xr.every(Ps)}return re.invert=function(Xr){return new Date(Te(Xr))},re.domain=function(Xr){return arguments.length?Ae(Fd.call(Xr,Rg)):Ae().map(uh)},re.ticks=function(Xr,lo){var za=Ae(),Ps=za[0],zi=za[za.length-1],_s=zi<Ps,as;return _s&&(as=Ps,Ps=zi,zi=as),as=ho(Xr,Ps,zi,lo),as=as?as.range(Ps,zi+1):[],_s?as.reverse():as},re.tickFormat=function(Xr,lo){return lo==null?po:V(lo)},re.nice=function(Xr,lo){var za=Ae();return(Xr=ho(Xr,za[0],za[za.length-1],lo))?Ae(qo(za,Xr)):re},re.copy=function(){return Kr(re,O0(a,o,f,m,w,C,D,B,V))},re}function Uy(){return pf.apply(O0(nn,xr,Nr,Om,u1,Ly,zv,Dl,bp).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ud(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qp(){var a=0,o=1,f,m,w,C,D=Cc,B=!1,V;function re(Te){return isNaN(Te=+Te)?V:D(w===0?.5:(Te=(C(Te)-f)*w,B?Math.max(0,Math.min(1,Te)):Te))}return re.domain=function(Te){return arguments.length?(f=C(a=+Te[0]),m=C(o=+Te[1]),w=f===m?0:1/(m-f),re):[a,o]},re.clamp=function(Te){return arguments.length?(B=!!Te,re):B},re.interpolator=function(Te){return arguments.length?(D=Te,re):D},re.unknown=function(Te){return arguments.length?(V=Te,re):V},function(Te){return C=Te,f=Te(a),m=Te(o),w=f===m?0:1/(m-f),re}}function ad(a,o){return o.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function Wv(){var a=so(Qp()(Cc));return a.copy=function(){return ad(a,Wv())},J0.apply(a,arguments)}function M0(){var a=loggish(Qp()).domain([1,10]);return a.copy=function(){return ad(a,M0()).base(a.base())},initInterpolator.apply(a,arguments)}function jy(){var a=symlogish(Qp());return a.copy=function(){return ad(a,jy()).constant(a.constant())},initInterpolator.apply(a,arguments)}function d1(){var a=powish(Qp());return a.copy=function(){return ad(a,d1()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function p1(){return d1.apply(null,arguments).exponent(.5)}function Vy(){var a=[],o=identity;function f(m){if(!isNaN(m=+m))return o((bisect(a,m)-1)/(a.length-1))}return f.domain=function(m){if(!arguments.length)return a.slice();a=[];for(var w=0,C=m.length,D;w<C;++w)D=m[w],D!=null&&!isNaN(D=+D)&&a.push(D);return a.sort(ascending),f},f.interpolator=function(m){return arguments.length?(o=m,f):o},f.copy=function(){return Vy(o).domain(a)},initInterpolator.apply(f,arguments)}function Lm(){var a=0,o=.5,f=1,m,w,C,D,B,V=Cc,re,Te=!1,Ae;function Fe(Mt){return isNaN(Mt=+Mt)?Ae:(Mt=.5+((Mt=+re(Mt))-w)*(Mt<w?D:B),V(Te?Math.max(0,Math.min(1,Mt)):Mt))}return Fe.domain=function(Mt){return arguments.length?(m=re(a=+Mt[0]),w=re(o=+Mt[1]),C=re(f=+Mt[2]),D=m===w?0:.5/(w-m),B=w===C?0:.5/(C-w),Fe):[a,o,f]},Fe.clamp=function(Mt){return arguments.length?(Te=!!Mt,Fe):Te},Fe.interpolator=function(Mt){return arguments.length?(V=Mt,Fe):V},Fe.unknown=function(Mt){return arguments.length?(Ae=Mt,Fe):Ae},function(Mt){return re=Mt,m=Mt(a),w=Mt(o),C=Mt(f),D=m===w?0:.5/(w-m),B=w===C?0:.5/(C-w),Fe}}function ox(){var a=so(Lm()(Cc));return a.copy=function(){return ad(a,ox())},J0.apply(a,arguments)}function Zv(){var a=loggish(Lm()).domain([.1,1,10]);return a.copy=function(){return copy(a,Zv()).base(a.base())},initInterpolator.apply(a,arguments)}function Kl(){var a=symlogish(Lm());return a.copy=function(){return copy(a,Kl()).constant(a.constant())},initInterpolator.apply(a,arguments)}function Ah(){var a=powish(Lm());return a.copy=function(){return copy(a,Ah()).exponent(a.exponent())},initInterpolator.apply(a,arguments)}function ax(){return Ah.apply(null,arguments).exponent(.5)}function Ep(a){let o,f=[];function m(w){return w==null?o:w}return m.invert=m,m.domain=m.range=w=>w?(f=w,w):f,m.unknown=w=>w?(o=w,w):o,m.copy=()=>Ep(a).unknown(o),m}const{isNil:Nm,isString:v1,uniq:Hy}=Ie.lodashUtil,Jp=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Gy={[Se.vY.LINEAR]:va,[Se.vY.POWER]:Xl,[Se.vY.LOG]:cr,[Se.vY.IDENTITY]:Ep,[Se.vY.SEQUENTIAL]:Wv,[Se.vY.TIME]:Uy,[Se.vY.QUANTILE]:bn,[Se.vY.QUANTIZE]:Lr,[Se.vY.THRESHOLD]:Sr,[Se.vY.CAT]:Uu,[Se.vY.DIVERGING]:ox};class R0{constructor(){(0,Qt.Z)(this,"scaleOptions",{})}apply(o,{styleAttributeService:f}){var m=this;o.hooks.init.tapPromise("FeatureScalePlugin",(0,Mi.Z)(function*(){var w;o.log(Se.Or.ScaleInitStart,Se.KD.INIT),m.scaleOptions=o.getScaleOptions();const C=f.getLayerStyleAttributes(),D=(w=o.getSource())===null||w===void 0?void 0:w.data.dataArray;Array.isArray(D)&&D.length===0||(m.caculateScalesForAttributes(C||[],D),o.log(Se.Or.ScaleInitEnd,Se.KD.INIT))})),o.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var w=(0,Mi.Z)(function*(C){if(!C)return C;o.log(Se.Or.ScaleInitStart,Se.KD.UPDATE),m.scaleOptions=o.getScaleOptions();const D=f.getLayerStyleAttributes(),B=o.getSource().data.dataArray;return Array.isArray(B)&&B.length===0||(m.caculateScalesForAttributes(D||[],B),o.log(Se.Or.ScaleInitEnd,Se.KD.UPDATE),o.layerModelNeedUpdate=!0),!0});return function(C){return w.apply(this,arguments)}}()),o.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(o.layerModelNeedUpdate)return;this.scaleOptions=o.getScaleOptions();const w=f.getLayerStyleAttributes(),C=o.getSource().data.dataArray;if(!(Array.isArray(C)&&C.length===0)&&w){const D=w.filter(B=>B.needRescale);D.length&&this.caculateScalesForAttributes(D,C)}})}isNumber(o){return!isNaN(parseFloat(o))&&isFinite(o)}caculateScalesForAttributes(o,f){o.forEach(m=>{if(m.scale){const w=m.scale,C=m.scale.field;w.names=this.parseFields(Nm(C)?[]:C);const D=[];w.names.forEach(B=>{var V;D.push(this.createScale(B,m.name,(V=m.scale)===null||V===void 0?void 0:V.values,f))}),D.some(B=>B.type===Se.ee.VARIABLE)?(w.type=Se.ee.VARIABLE,D.forEach(B=>{if(!w.callback&&w.values!=="text"){var V;switch((V=B.option)===null||V===void 0?void 0:V.type){case Se.vY.LOG:case Se.vY.LINEAR:case Se.vY.POWER:if(w.values&&w.values.length>2){const Te=B.scale.ticks(w.values.length);B.scale.domain(Te)}w.values?B.scale.range(w.values):B.scale.range(B.option.domain);break;case Se.vY.QUANTILE:case Se.vY.QUANTIZE:case Se.vY.THRESHOLD:B.scale.range(w.values);break;case Se.vY.IDENTITY:break;case Se.vY.CAT:w.values?B.scale.range(w.values):B.scale.range(B.option.domain);break;case Se.vY.DIVERGING:case Se.vY.SEQUENTIAL:B.scale.interpolator(bg(w.values));break}}if(w.values==="text"){var re;B.scale.range((re=B.option)===null||re===void 0?void 0:re.domain)}})):(w.type=Se.ee.CONSTANT,w.defaultValues=D.map((B,V)=>B.scale(w.names[V]))),w.scalers=D.map(B=>({field:B.field,func:B.scale,option:B.option})),m.needRescale=!1}})}parseFields(o){return Array.isArray(o)?o:v1(o)?o.split("*"):[o]}createScale(o,f,m,w){var C,D;const B=this.scaleOptions[f]&&((C=this.scaleOptions[f])===null||C===void 0?void 0:C.field)===o?this.scaleOptions[f]:this.scaleOptions[o],V={field:o,scale:void 0,type:Se.ee.VARIABLE,option:B};if(!w||!w.length)return B&&B.type?V.scale=this.createDefaultScale(B):(V.scale=Uu([o]),V.type=Se.ee.CONSTANT),V;const re=(D=w.find(Te=>!Nm(Te[o])))===null||D===void 0?void 0:D[o];if(this.isNumber(o)||Nm(re)&&!B)V.scale=Uu([o]),V.type=Se.ee.CONSTANT;else{let Te=B&&B.type||this.getDefaultType(re);m==="text"&&(Te=Se.vY.CAT),m===void 0&&(Te=Se.vY.IDENTITY);const Ae=this.createScaleConfig(Te,o,B,w);V.scale=this.createDefaultScale(Ae),V.option=Ae}return V}getDefaultType(o){let f=Se.vY.LINEAR;return typeof o=="string"&&(f=Jp.test(o)?Se.vY.TIME:Se.vY.CAT),f}createScaleConfig(o,f,m,w){const C={type:o};let D=[];if(o===Se.vY.QUANTILE){const B=new Map;w==null||w.forEach(V=>{B.set(V._id,V[f])}),D=Array.from(B.values())}else D=(w==null?void 0:w.map(B=>B[f]))||[];if(m!=null&&m.domain)C.domain=m==null?void 0:m.domain;else if(o===Se.vY.CAT||o===Se.vY.IDENTITY)C.domain=Hy(D);else if(o===Se.vY.QUANTILE)C.domain=D;else if(o===Se.vY.DIVERGING){const B=b0(D),V=(m==null?void 0:m.neutral)!==void 0?m==null?void 0:m.neutral:(B[0]+B[1])/2;C.domain=[B[0],V,B[1]]}else C.domain=b0(D);return(0,Dr.Z)((0,Dr.Z)({},C),m)}createDefaultScale({type:o,domain:f,unknown:m,clamp:w,nice:C}){const D=Gy[o]();return f&&D.domain&&D.domain(f),m&&D.unknown(m),w!==void 0&&D.clamp&&D.clamp(w),C!==void 0&&D.nice&&D.nice(C),D}}class Wy{apply(o){o.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{o.animateStatus&&o.models.forEach(m=>{m.addUniforms((0,Dr.Z)({},o.layerModel.getAnimateUniforms()))})})}}class Zy{apply(o){o.hooks.afterInit.tap("LayerMaskPlugin",()=>{const{maskLayers:f,enableMask:m}=o.getLayerConfig();!o.tileLayer&&f&&f.length>0&&o.updateLayerConfig({mask:m})})}}class m1{build(o){return(0,Mi.Z)(function*(){o.prepareBuildModel(),yield o.buildModels()})()}initLayerModel(o){var f=this;return(0,Mi.Z)(function*(){yield f.build(o),o.styleNeedUpdate=!1})()}prepareLayerModel(o){var f=this;return(0,Mi.Z)(function*(){yield f.build(o),o.styleNeedUpdate=!1})()}apply(o){var f=this;o.hooks.init.tapPromise("LayerModelPlugin",(0,Mi.Z)(function*(){if(o.getSource().isTile){o.prepareBuildModel();return}o.log(Se.Or.BuildModelStart,Se.KD.INIT),yield f.initLayerModel(o),o.log(Se.Or.BuildModelEnd,Se.KD.INIT)})),o.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var m=(0,Mi.Z)(function*(w){return!w||o.getSource().isTile?!1:(o.log(Se.Or.BuildModelStart,Se.KD.UPDATE),yield f.prepareLayerModel(o),o.log(Se.Or.BuildModelEnd,Se.KD.UPDATE),!0)});return function(w){return m.apply(this,arguments)}}())}}class sx{apply(o){o.hooks.afterInit.tap("LayerStylePlugin",()=>{const{autoFit:f,fitBoundsOptions:m}=o.getLayerConfig();f&&o.fitBounds(m),o.styleNeedUpdate=!1})}}const Pg=["type"],fv={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},Xy={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},g1={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Ig={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function y1(a){const o={u_DirectionalLights:new Array(3).fill((0,Dr.Z)({},g1)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,Dr.Z)({},Ig)),u_NumOfSpotLights:0};return(!a||!a.length)&&(a=[Xy]),a.forEach(f=>{let{type:m="directional"}=f,w=(0,Rl.Z)(f,Pg);const C=fv[m].lights,D=fv[m].num,B=o[D];o[C][B]=(0,Dr.Z)((0,Dr.Z)({},o[C][B]),w),o[D]++}),o}class Ch{apply(o){o.hooks.beforeRender.tap("LightingPlugin",()=>{const{enableLighting:f}=o.getLayerConfig();f&&o.models.forEach(m=>m.addUniforms((0,Dr.Z)({},y1())))})}}function Fm(a){return a.map(o=>(typeof o=="string"&&(o=[o,{}]),o))}function Yy(a,o,f,m){const w=a.multiPassRenderer,{enableTAA:C}=a.getLayerConfig();return C?w.add(m("taa")):w.add(m("render")),Fm(o).forEach(D=>{const[B,V]=D;w.add(f(B),V)}),w.add(f("copy")),w}class Sp{constructor(){(0,Qt.Z)(this,"enabled",void 0)}apply(o,{rendererService:f,postProcessingPassFactory:m,normalPassFactory:w}){o.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{const{enableMultiPassRenderer:C,passes:D=[]}=o.getLayerConfig();this.enabled=!!C&&o.getLayerConfig().enableMultiPassRenderer!==!1,this.enabled&&(o.multiPassRenderer=Yy(o,D,m,w),o.multiPassRenderer.setRenderFlag(!0))}),o.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){const{width:C,height:D}=f.getViewportSize();o.multiPassRenderer.resize(C,D)}})}}let ma=function(a){return a[a.POSITION=0]="POSITION",a[a.COLOR=1]="COLOR",a[a.VERTEX_ID=2]="VERTEX_ID",a[a.PICKING_COLOR=3]="PICKING_COLOR",a[a.STROKE=4]="STROKE",a[a.OPACITY=5]="OPACITY",a[a.OFFSETS=6]="OFFSETS",a[a.ROTATION=7]="ROTATION",a[a.EXTRUSION_BASE=8]="EXTRUSION_BASE",a[a.SIZE=9]="SIZE",a[a.SHAPE=10]="SHAPE",a[a.EXTRUDE=11]="EXTRUDE",a[a.MAX=12]="MAX",a[a.NORMAL=13]="NORMAL",a[a.UV=14]="UV",a[a.LINEAR=15]="LINEAR",a}({});function _1(a){switch(a){case"rotation":return{name:"Rotation",type:Se.GC.Attribute,descriptor:{name:"a_Rotation",shaderLocation:ma.ROTATION,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{rotation:f=0}=o;return Array.isArray(f)?[f[0]]:[f]}}};case"stroke":return{name:"stroke",type:Se.GC.Attribute,descriptor:{name:"a_Stroke",shaderLocation:ma.STROKE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:4,update:o=>{const{stroke:f=[1,1,1,1]}=o;return f}}};case"opacity":return{name:"opacity",type:Se.GC.Attribute,descriptor:{name:"a_Opacity",shaderLocation:ma.OPACITY,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{opacity:f=1}=o;return[f]}}};case"extrusionBase":return{name:"extrusionBase",type:Se.GC.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:ma.EXTRUSION_BASE,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{extrusionBase:f=0}=o;return[f]}}};case"offsets":return{name:"offsets",type:Se.GC.Attribute,descriptor:{name:"a_Offsets",shaderLocation:ma.OFFSETS,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const{offsets:f}=o;return f}}};case"thetaOffset":return{name:"thetaOffset",type:Se.GC.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:15,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{thetaOffset:f=1}=o;return[f]}}};default:return}}const{isNumber:ni}=Ie.lodashUtil,Df={NONE:0,ENCODE:1,HIGHLIGHT:2};class Oh{constructor(){(0,Qt.Z)(this,"pickingUniformMap",void 0)}pickOption2Array(){const o=[];return this.pickingUniformMap.forEach(f=>{ni(f)?o.push(f):o.push(...f)}),o}updatePickOption(o,f){Object.keys(o).forEach(D=>{this.pickingUniformMap.set(D,o[D])});const m=f.getLayerConfig().pickingBuffer||0,w=Number(f.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",m),this.pickingUniformMap.set("u_shaderPick",w),f.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()})}apply(o,{styleAttributeService:f}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),o.hooks.init.tapPromise("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();f.registerStyleAttribute({name:"pickingColor",type:Se.GC.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:ma.PICKING_COLOR,buffer:{data:[],type:Se.gl.FLOAT},size:3,update:w=>{const{id:C}=w;return m?(0,Ie.Z6)(C):[0,0,0]}}})}),o.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();m&&o.isVisible()&&(this.updatePickOption({u_PickingStage:Df.ENCODE},o),o.models.forEach(w=>w.addUniforms({u_PickingStage:Df.ENCODE})))}),o.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:m}=o.getLayerConfig();m&&o.isVisible()&&(this.updatePickOption({u_PickingStage:Df.HIGHLIGHT},o),o.models.forEach(w=>w.addUniforms({u_PickingStage:Df.HIGHLIGHT})))}),o.hooks.beforeHighlight.tap("PixelPickingPlugin",m=>{const{highlightColor:w,activeMix:C=0}=o.getLayerConfig(),D=typeof w=="string"?(0,Ie.CI)(w):w||[1,0,0,1];o.updateLayerConfig({pickedFeatureID:(0,Ie.W0)(new Uint8Array(m))});const B={u_PickingStage:Df.HIGHLIGHT,u_PickingColor:m,u_HighlightColor:D.map(V=>V*255),u_activeMix:C};this.updatePickOption(B,o),o.models.forEach(V=>V.addUniforms(B))}),o.hooks.beforeSelect.tap("PixelPickingPlugin",m=>{const{selectColor:w,selectMix:C=0}=o.getLayerConfig(),D=typeof w=="string"?(0,Ie.CI)(w):w||[1,0,0,1];o.updateLayerConfig({pickedFeatureID:(0,Ie.W0)(new Uint8Array(m))});const B={u_PickingStage:Df.HIGHLIGHT,u_PickingColor:m,u_HighlightColor:D.map(V=>V*255),u_activeMix:C,u_CurrentSelectedId:m,u_SelectColor:D.map(V=>V*255)};this.updatePickOption(B,o),o.models.forEach(V=>V.addUniforms(B))})}}const Xv=["mvt","geojsonvt","testTile"];function jd(a){const o=a.getSource();return Xv.includes(o.parser.type)}class Dg{apply(o,{styleAttributeService:f}){o.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{jd(o)||this.registerBuiltinAttributes(f,o)})}registerBuiltinAttributes(o,f){if(f.type==="MaskLayer"){this.registerPositionAttribute(o);return}this.registerPositionAttribute(o),this.registerColorAttribute(o),this.registerVertexIdAttribute(o)}registerPositionAttribute(o){o.registerStyleAttribute({name:"position",type:Se.GC.Attribute,descriptor:{name:"a_Position",shaderLocation:ma.POSITION,buffer:{data:[],type:Se.gl.FLOAT},size:3,update:(f,m,w)=>w.length===2?[w[0],w[1],0]:[w[0],w[1],w[2]]}})}registerColorAttribute(o){o.registerStyleAttribute({name:"color",type:Se.GC.Attribute,descriptor:{name:"a_Color",shaderLocation:ma.COLOR,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:4,update:f=>{const{color:m}=f;return!m||!m.length?[1,1,1,1]:m}}})}registerVertexIdAttribute(o){o.registerStyleAttribute({name:"vertexId",type:Se.GC.Attribute,descriptor:{name:"a_vertexId",shaderLocation:ma.VERTEX_ID,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:(f,m)=>[m]}})}}class Bm{constructor(){(0,Qt.Z)(this,"cameraService",void 0),(0,Qt.Z)(this,"coordinateSystemService",void 0),(0,Qt.Z)(this,"rendererService",void 0),(0,Qt.Z)(this,"mapService",void 0),(0,Qt.Z)(this,"layerService",void 0)}apply(o,{rendererService:f,mapService:m,layerService:w,coordinateSystemService:C,cameraService:D}){this.rendererService=f,this.mapService=m,this.layerService=w,this.coordinateSystemService=C,this.cameraService=D;const B=this.mapService.version;let V=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],re=[0,0],Te;this.rendererService.uniformBuffers[0]||(Te=this.rendererService.createBuffer({data:new Float32Array(16*4+4*7),isUBO:!0}),this.rendererService.uniformBuffers[0]=Te),o.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{const Ae=o.getLayerConfig().tileOrigin;this.coordinateSystemService.refresh(Ae),B==="GAODE2.x"&&(this.setLayerCenter(o),V=this.mapService.map.customCoords.getMVPMatrix(),re=this.mapService.getCustomCoordCenter(),o.getLayerUniformBuffer().subData({offset:0,data:new Uint8Array(new Float32Array([...V,...re]).buffer)}));const{width:Fe,height:Mt}=this.rendererService.getViewportSize(),{data:rn,uniforms:In}=this.generateUBO(V,re,Fe,Mt);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:rn}),this.rendererService.queryVerdorInfo()==="WebGL1"&&o.models.forEach(Cr=>{Cr.addUniforms((0,Dr.Z)((0,Dr.Z)({},In),{},{u_PickingBuffer:o.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(o.getShaderPickStat())}))})})}setLayerCenter(o){o.coordCenter===void 0&&(o.coordCenter=o.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(o.coordCenter)}generateUBO(o,f,m,w){const C=this.cameraService.getProjectionMatrix(),D=this.cameraService.getViewMatrix(),B=this.cameraService.getViewProjectionMatrix(),V=this.cameraService.getModelMatrix(),re=this.coordinateSystemService.getViewportCenterProjection(),Te=this.coordinateSystemService.getPixelsPerDegree(),Ae=this.cameraService.getZoom(),Fe=this.coordinateSystemService.getPixelsPerDegree2(),Mt=this.cameraService.getZoomScale(),rn=this.coordinateSystemService.getPixelsPerMeter(),In=this.coordinateSystemService.getCoordinateSystem(),ar=this.cameraService.getCameraPosition(),Cr=window.devicePixelRatio,vr=this.coordinateSystemService.getViewportCenter(),qr=[m,w],ri=this.cameraService.getFocalDistance();return{data:[...D,...C,...B,...V,...re,...Te,Ae,...Fe,Mt,...rn,In,...ar,Cr,...vr,...qr,ri,0,0,0],uniforms:{[Se.lv.ProjectionMatrix]:C,[Se.lv.ViewMatrix]:D,[Se.lv.ViewProjectionMatrix]:B,[Se.lv.Zoom]:Ae,[Se.lv.ZoomScale]:Mt,[Se.lv.FocalDistance]:ri,[Se.lv.CameraPosition]:ar,[Se.kw.CoordinateSystem]:In,[Se.kw.ViewportCenter]:vr,[Se.kw.ViewportCenterProjection]:re,[Se.kw.PixelsPerDegree]:Te,[Se.kw.PixelsPerDegree2]:Fe,[Se.kw.PixelsPerMeter]:rn,[Se.kw.Mvp]:o,u_sceneCenterMercator:f,u_ViewportSize:qr,u_ModelMatrix:V,u_DevicePixelRatio:Cr}}}}class $y{apply(o){o.hooks.beforeRender.tap("UpdateModelPlugin",()=>{o.layerModel&&o.layerModel.needUpdate().then(f=>{f&&o.renderLayers()})}),o.hooks.afterRender.tap("UpdateModelPlugin",()=>{o.layerModelNeedUpdate=!1})}}class b1{apply(o,{styleAttributeService:f}){o.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(o,{styleAttributeService:f})}),o.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{o.layerModelNeedUpdate||o.inited&&this.updateStyleAttribute(o,{styleAttributeService:f})})}updateStyleAttribute(o,{styleAttributeService:f}){const m=f.getLayerStyleAttributes()||[],w=f.getLayerStyleAttribute("filter");if(w&&w.needRegenerateVertices){o.layerModelNeedUpdate=!0,m.forEach(C=>C.needRegenerateVertices=!1);return}m.filter(C=>C.needRegenerateVertices).forEach(C=>{f.updateAttributeByFeatureRange(C.name,o.getEncodedData(),C.featureRange.startIndex,C.featureRange.endIndex,o),C.needRegenerateVertices=!1})}initStyleAttribute(o,{styleAttributeService:f}){(f.getLayerStyleAttributes()||[]).filter(w=>w.needRegenerateVertices).forEach(w=>{f.updateAttributeByFeatureRange(w.name,o.getEncodedData(),w.featureRange.startIndex,w.featureRange.endIndex),w.needRegenerateVertices=!1})}}function qy(){return[new Mf,new Dg,new R0,new Ju,new sx,new Zy,new b1,new $y,new Sp,new Bm,new Wy,new Ch,new Oh,new m1]}const e0={[Se.h0.additive]:{enable:!0,func:{srcRGB:Se.gl.ONE,dstRGB:Se.gl.ONE,srcAlpha:1,dstAlpha:1}},[Se.h0.none]:{enable:!1},[Se.h0.normal]:{enable:!0,func:{srcRGB:Se.gl.SRC_ALPHA,dstRGB:Se.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[Se.h0.subtractive]:{enable:!0,func:{srcRGB:Se.gl.ONE,dstRGB:Se.gl.ONE,srcAlpha:Se.gl.ZERO,dstAlpha:Se.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:Se.gl.FUNC_SUBTRACT,alpha:Se.gl.FUNC_SUBTRACT}},[Se.h0.max]:{enable:!0,func:{srcRGB:Se.gl.ONE,dstRGB:Se.gl.ONE},equation:{rgb:Se.gl.MAX_EXT}},[Se.h0.min]:{enable:!0,func:{srcRGB:Se.gl.ONE,dstRGB:Se.gl.ONE},equation:{rgb:Se.gl.MIN_EXT}}};class Ru{constructor(o){(0,Qt.Z)(this,"layer",void 0),this.layer=o}pickRender(o){const m=this.layer.getContainer().layerService,w=this.layer;if(w.tileLayer)return w.tileLayer.pickRender(o);w.hooks.beforePickingEncode.call(),m.renderTileLayerMask(w),w.renderModels({ispick:!0}),w.hooks.afterPickingEncode.call()}pick(o,f){var m=this;return(0,Mi.Z)(function*(){const C=m.layer.getContainer().pickingService;return o.type==="RasterLayer"?m.pickRasterLayer(o,f):(m.pickRender(f),C.pickFromPickingFBO(o,f))})()}pickRasterLayer(o,f,m){const w=this.layer.getContainer(),C=w.pickingService,D=w.mapService,B=this.layer.getSource().extent,V=(0,Ie.if)(f.lngLat,B),re={x:f.x,y:f.y,type:f.type,lngLat:f.lngLat,target:f,rasterValue:null},Te=m||o;if(V){const Ae=this.readRasterValue(o,B,D,f.x,f.y);return re.rasterValue=Ae,C.triggerHoverOnLayer(Te,re),!0}else return re.type=f.type==="mousemove"?"mouseout":"un"+f.type,C.triggerHoverOnLayer(Te,(0,Dr.Z)((0,Dr.Z)({},re),{},{type:"unpick"})),C.triggerHoverOnLayer(Te,re),!1}readRasterValue(o,f,m,w,C){const D=o.getSource().data.dataArray[0],[B=0,V=0,re=10,Te=-10]=f,Ae=m.lngLatToContainer([B,V]),Fe=m.lngLatToContainer([re,Te]),Mt=Fe.x-Ae.x,rn=Ae.y-Fe.y,In=[(w-Ae.x)/Mt,(C-Fe.y)/rn],ar=D.width||1,Cr=D.height||1,vr=Math.floor(In[0]*ar),qr=Math.floor(In[1]*Cr),ri=Math.max(0,qr-1)*ar+vr;return D.data[ri]}selectFeature(o){const f=this.layer,[m,w,C]=o;f.hooks.beforeSelect.call([m,w,C])}highlightPickedFeature(o){const[f,m,w]=o;this.layer.hooks.beforeHighlight.call([f,m,w])}getFeatureById(o){return this.layer.getSource().getFeatureById(o)}}class yl{constructor(o){(0,Qt.Z)(this,"layer",void 0),(0,Qt.Z)(this,"rendererService",void 0),(0,Qt.Z)(this,"colorTexture",void 0),(0,Qt.Z)(this,"key",void 0),this.layer=o;const f=this.layer.getContainer();this.rendererService=f.rendererService}getColorTexture(o,f){const m=this.getTextureKey(o,f);return this.key===m?this.colorTexture:(this.createColorTexture(o,f),this.key=m,this.colorTexture)}createColorTexture(o,f){const{createTexture2D:m}=this.rendererService,w=this.getColorRampBar(o,f),C=m({data:new Uint8Array(w.data),width:w.width,height:w.height,flipY:!1,unorm:!0});return this.colorTexture=C,C}setColorTexture(o,f,m){this.key=this.getTextureKey(f,m),this.colorTexture=o}destroy(){var o;(o=this.colorTexture)===null||o===void 0||o.destroy()}getColorRampBar(o,f){switch(o.type){case"cat":return(0,Ie.hj)(o);case"quantize":return(0,Ie.NJ)(o);case"custom":return(0,Ie.Oc)(o,f);case"linear":return(0,Ie.M4)(o,f);default:return(0,Ie.Cl)(o)}}getTextureKey(o,f){var m;return`${o.colors.join("_")}_${o==null||(m=o.positions)===null||m===void 0?void 0:m.join("_")}_${o.type}_${f==null?void 0:f.join("_")}`}}const ch=["passes"],x1=["moduleName","vertexShader","fragmentShader","inject","triangulation","styleOption","pickingEnabled"],{isEqual:Ky,isFunction:Lg,isNumber:Qy,isObject:Xc,isPlainObject:km,isUndefined:E1}=Ie.lodashUtil;let Yv=0;class P0 extends zu.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService}get cameraService(){return this.container.cameraService}get coordinateService(){return this.container.coordinateSystemService}get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get pickingService(){return this.container.pickingService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get interactionService(){return this.container.interactionService}get mapService(){return this.container.mapService}get normalPassFactory(){return this.container.normalPassFactory}constructor(o={}){super(),(0,Qt.Z)(this,"id",`${Yv++}`),(0,Qt.Z)(this,"name",`${Yv}`),(0,Qt.Z)(this,"parent",void 0),(0,Qt.Z)(this,"coordCenter",void 0),(0,Qt.Z)(this,"type",void 0),(0,Qt.Z)(this,"visible",!0),(0,Qt.Z)(this,"zIndex",0),(0,Qt.Z)(this,"minZoom",void 0),(0,Qt.Z)(this,"maxZoom",void 0),(0,Qt.Z)(this,"inited",!1),(0,Qt.Z)(this,"layerModelNeedUpdate",!1),(0,Qt.Z)(this,"pickedFeatureID",null),(0,Qt.Z)(this,"selectedFeatureID",null),(0,Qt.Z)(this,"styleNeedUpdate",!1),(0,Qt.Z)(this,"rendering",void 0),(0,Qt.Z)(this,"forceRender",!1),(0,Qt.Z)(this,"clusterZoom",0),(0,Qt.Z)(this,"layerType",void 0),(0,Qt.Z)(this,"triangulation",void 0),(0,Qt.Z)(this,"layerPickService",void 0),(0,Qt.Z)(this,"textureService",void 0),(0,Qt.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,Qt.Z)(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,Qt.Z)(this,"hooks",{init:new Hl.S$,afterInit:new Hl.oI,beforeRender:new Hl.oI,beforeRenderData:new Hl.bf,afterRender:new Hl.ni,beforePickingEncode:new Hl.ni,afterPickingEncode:new Hl.ni,beforeHighlight:new Hl.ni(["pickedColor"]),afterHighlight:new Hl.ni,beforeSelect:new Hl.ni(["pickedColor"]),afterSelect:new Hl.ni,beforeDestroy:new Hl.ni,afterDestroy:new Hl.ni}),(0,Qt.Z)(this,"models",[]),(0,Qt.Z)(this,"multiPassRenderer",void 0),(0,Qt.Z)(this,"plugins",void 0),(0,Qt.Z)(this,"startInit",!1),(0,Qt.Z)(this,"sourceOption",void 0),(0,Qt.Z)(this,"layerModel",void 0),(0,Qt.Z)(this,"shapeOption",void 0),(0,Qt.Z)(this,"tileLayer",void 0),(0,Qt.Z)(this,"layerChildren",[]),(0,Qt.Z)(this,"masks",[]),(0,Qt.Z)(this,"configService",Se.cO),(0,Qt.Z)(this,"styleAttributeService",void 0),(0,Qt.Z)(this,"layerSource",void 0),(0,Qt.Z)(this,"postProcessingPassFactory",void 0),(0,Qt.Z)(this,"animateOptions",{enable:!1}),(0,Qt.Z)(this,"container",void 0),(0,Qt.Z)(this,"encodedData",void 0),(0,Qt.Z)(this,"currentPickId",null),(0,Qt.Z)(this,"rawConfig",void 0),(0,Qt.Z)(this,"needUpdateConfig",void 0),(0,Qt.Z)(this,"encodeStyleAttribute",{}),(0,Qt.Z)(this,"enableShaderEncodeStyles",[]),(0,Qt.Z)(this,"enableDataEncodeStyles",[]),(0,Qt.Z)(this,"pendingStyleAttributes",[]),(0,Qt.Z)(this,"scaleOptions",{}),(0,Qt.Z)(this,"animateStartTime",void 0),(0,Qt.Z)(this,"animateStatus",!1),(0,Qt.Z)(this,"isDestroyed",!1),(0,Qt.Z)(this,"uniformBuffers",[]),(0,Qt.Z)(this,"encodeDataLength",0),(0,Qt.Z)(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0;const f=this.getLayerConfig();f&&f.autoFit&&this.fitBounds(f.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender()},10)}),this.name=o.name||this.id,this.zIndex=o.zIndex||0,this.rawConfig=o,this.masks=o.maskLayers||[]}addMask(o){this.masks.push(o),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}removeMask(o){const f=this.masks.indexOf(o);f>-1&&this.masks.splice(f,1),this.updateLayerConfig({maskLayers:this.masks})}disableMask(){this.updateLayerConfig({enableMask:!1})}enableMask(){this.updateLayerConfig({enableMask:!0})}addMaskLayer(o){this.masks.push(o)}removeMaskLayer(o){const f=this.masks.indexOf(o);f>-1&&this.masks.splice(f,1),o.destroy()}getAttribute(o){return this.styleAttributeService.getLayerStyleAttribute(o)}getLayerConfig(){return this.configService.getLayerConfig(this.id)}updateLayerConfig(o){if(Object.keys(o).map(f=>{f in this.rawConfig&&(this.rawConfig[f]=o[f])}),!this.startInit)this.needUpdateConfig=(0,Dr.Z)((0,Dr.Z)({},this.needUpdateConfig),o);else{const f=this.container.id;this.configService.setLayerConfig(f,this.id,(0,Dr.Z)((0,Dr.Z)((0,Dr.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),o)),this.needUpdateConfig={}}}setContainer(o){this.container=o}getContainer(){return this.container}addPlugin(o){return this.plugins.push(o),this}init(){var o=this;return(0,Mi.Z)(function*(){const f=o.container.id;o.startInit=!0,o.configService.setLayerConfig(f,o.id,o.rawConfig),o.layerType=o.rawConfig.layerType;const{enableMultiPassRenderer:m,passes:w}=o.getLayerConfig();m&&w!==null&&w!==void 0&&w.length&&w.length>0&&o.mapService.on("mapAfterFrameChange",()=>{o.renderLayers()}),o.postProcessingPassFactory=o.container.postProcessingPassFactory,o.styleAttributeService=o.container.styleAttributeService,m&&(o.multiPassRenderer=o.container.multiPassRenderer,o.multiPassRenderer.setLayer(o)),o.pendingStyleAttributes.forEach(({attributeName:C,attributeField:D,attributeValues:B,updateOptions:V})=>{o.styleAttributeService.updateStyleAttribute(C,{scale:(0,Dr.Z)({field:D},o.splitValuesAndCallbackInAttribute(B,D?void 0:o.getLayerConfig()[C]))},V)}),o.pendingStyleAttributes=[],o.plugins=qy();for(const C of o.plugins)C.apply(o,o.container);o.layerPickService=new Ru(o),o.textureService=new yl(o),o.log(Se.Or.LayerInitStart),yield o.hooks.init.promise(),o.log(Se.Or.LayerInitEnd),o.inited=!0,o.emit("inited",{target:o,type:"inited"}),o.emit("add",{target:o,type:"add"}),o.hooks.afterInit.call()})()}log(o,f="init"){var m;if(this.tileLayer||this.isTileLayer)return;const w=`${this.id}.${f}.${o}`,C={id:this.id,type:this.type};(m=this.debugService)===null||m===void 0||m.log(w,C)}updateModelData(o){o.attributes&&o.elements?this.models.map(f=>{f.updateAttributesAndElements(o.attributes,o.elements)}):console.warn("data error")}setLayerPickService(o){this.layerPickService=o}prepareBuildModel(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});const{animateOption:o}=this.getLayerConfig();o!=null&&o.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}color(o,f,m){return this.updateStyleAttribute("color",o,f,m),this}texture(o,f,m){return this.updateStyleAttribute("texture",o,f,m),this}rotate(o,f,m){return this.updateStyleAttribute("rotate",o,f,m),this}size(o,f,m){return this.updateStyleAttribute("size",o,f,m),this}filter(o,f,m){const w=this.updateStyleAttribute("filter",o,f,m);return this.dataState.dataSourceNeedUpdate=w&&this.inited,this}shape(o,f,m){this.shapeOption={field:o,values:f};const w=this.updateStyleAttribute("shape",o,f,m);return this.dataState.dataSourceNeedUpdate=w&&this.inited,this}label(o,f,m){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:o,attributeValues:f,updateOptions:m}),this}animate(o){let f={};return Xc(o)?(f.enable=!0,f=(0,Dr.Z)((0,Dr.Z)({},f),o)):f.enable=o,this.updateLayerConfig({animateOption:f}),this}source(o,f){return(o==null?void 0:o.type)==="source"?(this.setSource(o),this):(this.sourceOption={data:o,options:f},this.clusterZoom=0,this)}setData(o,f){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(o,f)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(o,f)}),this}dataUpdatelog(){this.log(Se.Or.SourceInitStart,Se.KD.UPDATE),this.layerSource.once("update",()=>{this.log(Se.Or.SourceInitEnd,Se.KD.UPDATE)})}style(o){const{passes:f}=o,m=(0,Rl.Z)(o,ch);f&&Fm(f).forEach(C=>{const D=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(C[0]);D&&D.updateOptions(C[1])}),m.borderColor&&(m.stroke=m.borderColor),m.borderWidth&&(m.strokeWidth=m.borderWidth);const w=m;return Object.keys(m).forEach(C=>{const D=m[C];Array.isArray(D)&&D.length===2&&!Qy(D[0])&&!Qy(D[1])&&(w[C]={field:D[0],value:D[1]})}),this.encodeStyle(w),this.updateLayerConfig(w),this}encodeStyle(o){Object.keys(o).forEach(f=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(f)&&km(o[f])&&(o[f].field||o[f].value)&&!Ky(this.encodeStyleAttribute[f],o[f])?(this.encodeStyleAttribute[f]=o[f],this.updateStyleAttribute(f,o[f].field,o[f].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[f]&&(delete this.encodeStyleAttribute[f],this.dataState.dataSourceNeedUpdate=!0)})}scale(o,f){const m=(0,Dr.Z)({},this.scaleOptions);if(Xc(o)?this.scaleOptions=(0,Dr.Z)((0,Dr.Z)({},this.scaleOptions),o):this.scaleOptions[o]=f,this.styleAttributeService&&!Ky(m,this.scaleOptions)){const w=Xc(o)?o:{[o]:f};this.styleAttributeService.updateScaleAttribute(w)}return this}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}prerender(){}render(o={}){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(o),this))}renderMultiPass(){var o=this;return(0,Mi.Z)(function*(){o.encodeDataLength<=0&&!o.forceRender||(o.multiPassRenderer&&o.multiPassRenderer.getRenderFlag()?yield o.multiPassRenderer.render():(o.multiPassRenderer,o.renderModels()))})()}active(o){const f={};return f.enableHighlight=Xc(o)?!0:o,Xc(o)?(f.enableHighlight=!0,o.color&&(f.highlightColor=o.color),o.mix&&(f.activeMix=o.mix)):f.enableHighlight=!!o,this.updateLayerConfig(f),this}setActive(o,f){if(Xc(o)){const{x:m=0,y:w=0}=o;this.updateLayerConfig({highlightColor:Xc(f)?f.color:this.getLayerConfig().highlightColor,activeMix:Xc(f)?f.mix:this.getLayerConfig().activeMix}),this.pick({x:m,y:w})}else this.updateLayerConfig({pickedFeatureID:o,highlightColor:Xc(f)?f.color:this.getLayerConfig().highlightColor,activeMix:Xc(f)?f.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call((0,Ie.Z6)(o)).then(()=>{setTimeout(()=>{this.reRender()},1)})}select(o){const f={};return f.enableSelect=Xc(o)?!0:o,Xc(o)?(f.enableSelect=!0,o.color&&(f.selectColor=o.color),o.mix&&(f.selectMix=o.mix)):f.enableSelect=!!o,this.updateLayerConfig(f),this}setSelect(o,f){if(Xc(o)){const{x:m=0,y:w=0}=o;this.updateLayerConfig({selectColor:Xc(f)?f.color:this.getLayerConfig().selectColor,selectMix:Xc(f)?f.mix:this.getLayerConfig().selectMix}),this.pick({x:m,y:w})}else this.updateLayerConfig({pickedFeatureID:o,selectColor:Xc(f)?f.color:this.getLayerConfig().selectColor,selectMix:Xc(f)?f.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call((0,Ie.Z6)(o)).then(()=>{setTimeout(()=>{this.reRender()},1)})}setBlend(o){return this.updateLayerConfig({blend:o}),this.reRender(),this}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}setIndex(o){return this.zIndex=o,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}setCurrentPickId(o){this.currentPickId=o}getCurrentPickId(){return this.currentPickId}setCurrentSelectedId(o){this.selectedFeatureID=o}getCurrentSelectedId(){return this.selectedFeatureID}isVisible(){const o=this.mapService.getZoom(),{visible:f,minZoom:m=-1/0,maxZoom:w=1/0}=this.getLayerConfig();return!!f&&o>=m&&o<w}setMultiPass(o,f){if(this.updateLayerConfig({enableMultiPassRenderer:o}),f&&this.updateLayerConfig({passes:f}),o){const{passes:m=[]}=this.getLayerConfig();this.multiPassRenderer=Yy(this,m,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);const{width:w,height:C}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(w,C)}return this}setMinZoom(o){return this.updateLayerConfig({minZoom:o}),this}getMinZoom(){const{minZoom:o}=this.getLayerConfig();return o}getMaxZoom(){const{maxZoom:o}=this.getLayerConfig();return o}get(o){return this.getLayerConfig()[o]}setMaxZoom(o){return this.updateLayerConfig({maxZoom:o}),this}setAutoFit(o){return this.updateLayerConfig({autoFit:o}),this}fitBounds(o){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;const m=this.getSource().extent;return m.some(C=>Math.abs(C)===1/0)?this:(this.mapService.fitBounds([[m[0],m[1]],[m[2],m[3]]],o),this)}destroy(o=!0){var f,m,w,C,D;if(this.isDestroyed)return;(f=this.layerModel)===null||f===void 0||f.uniformBuffers.forEach(V=>{V.destroy()}),this.layerChildren.map(V=>V.destroy(!1)),this.layerChildren=[];const{maskfence:B}=this.getLayerConfig();B&&(this.masks.map(V=>V.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(m=this.multiPassRenderer)===null||m===void 0||m.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(w=this.layerModel)===null||w===void 0||w.clearModels(o),(C=this.tileLayer)===null||C===void 0||C.destroy(),this.models=[],(D=this.debugService)===null||D===void 0||D.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}clear(){this.styleAttributeService.clearAllAttributes()}clearModels(){var o;this.models.forEach(f=>f.destroy()),(o=this.layerModel)===null||o===void 0||o.clearModels(),this.models=[]}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(o=>o.needRescale||o.needRemapping||o.needRegenerateVertices).length}setSource(o){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=o,this.clusterZoom=0,this.inited&&this.layerSource.cluster){const f=this.mapService.getZoom();this.layerSource.updateClusterData(f)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:f})=>{if(this.coordCenter===void 0){var m;const w=this.layerSource.center;this.coordCenter=w,(m=this.mapService)!==null&&m!==void 0&&m.setCoordCenter&&this.mapService.setCoordCenter(w)}if(f==="update"){if(this.tileLayer){this.tileLayer.reload();return}this.sourceEvent()}})}getSource(){return this.layerSource}getScaleOptions(){return this.scaleOptions}setEncodedData(o){this.encodedData=o,this.encodeDataLength=o.length}getEncodedData(){return this.encodedData}getScale(o){return this.styleAttributeService.getLayerAttributeScale(o)}getLegend(o){var f,m,w;const C=this.styleAttributeService.getLayerStyleAttribute(o);return{type:(m=((C==null||(f=C.scale)===null||f===void 0?void 0:f.scalers)||[])[0])===null||m===void 0||(m=m.option)===null||m===void 0?void 0:m.type,field:C==null||(w=C.scale)===null||w===void 0?void 0:w.field,items:this.getLegendItems(o)}}getLegendItems(o){const f=this.styleAttributeService.getLayerAttributeScale(o);return f?f.invertExtent?f.range().map(w=>({value:f.invertExtent(w),[o]:w})):f.ticks?f.ticks().map(w=>({value:w,[o]:f(w)})):f!=null&&f.domain?f.domain().filter(w=>!E1(w)).map(w=>({value:w,[o]:f(w)})):[]:[]}pick({x:o,y:f}){this.interactionService.triggerHover({x:o,y:f})}boxSelect(o,f){this.pickingService.boxPickLayer(this,o,f)}buildLayerModel(o){var f=this;return(0,Mi.Z)(function*(){const{moduleName:m,vertexShader:w,fragmentShader:C,inject:D,triangulation:B,styleOption:V,pickingEnabled:re=!0}=o,Te=(0,Rl.Z)(o,x1);f.shaderModuleService.registerModule(m,{vs:w,fs:C,inject:D});const{vs:Ae,fs:Fe,uniforms:Mt}=f.shaderModuleService.getModule(m),{createModel:rn}=f.rendererService;return new Promise(In=>{const{attributes:ar,elements:Cr,count:vr}=f.styleAttributeService.createAttributesAndIndices(f.encodedData,B,V,f),qr=[...f.layerModel.uniformBuffers,...f.rendererService.uniformBuffers,f.getLayerUniformBuffer()];re&&qr.push(f.getPickingUniformBuffer());const ri=(0,Dr.Z)({attributes:ar,uniforms:Mt,fs:Fe,vs:Ae,elements:Cr,blend:e0[Se.h0.normal],uniformBuffers:qr,textures:f.layerModel.textures},Te);vr&&(ri.count=vr);const po=rn(ri);In(po)})})()}createAttributes(o){const{triangulation:f}=o,{attributes:m}=this.styleAttributeService.createAttributes(this.encodedData,f);return m}getTime(){return this.layerService.clock.getDelta()}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime()}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}needPick(o){const{enableHighlight:f=!0,enableSelect:m=!0}=this.getLayerConfig();let w=this.eventNames().indexOf(o)!==-1||this.eventNames().indexOf("un"+o)!==-1;return(o==="click"||o==="dblclick")&&m&&(w=!0),o==="mousemove"&&(f||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(w=!0),this.isVisible()&&w}buildModels(){return(0,Mi.Z)(function*(){throw new Error("Method not implemented.")})()}rebuildModels(){var o=this;return(0,Mi.Z)(function*(){yield o.buildModels()})()}renderMulPass(o){return(0,Mi.Z)(function*(){yield o.render()})()}renderModels(o={}){return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(f=>{f.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(o),textures:this.layerModel.textures},(o==null?void 0:o.ispick)||!1)}),this.hooks.afterRender.call(),this)}updateStyleAttribute(o,f,m,w){const C=this.configService.getAttributeConfig(this.id)||{};return Ky(C[o],{field:f,values:m})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(o)!==-1&&this.configService.setAttributeConfig(this.id,{[o]:{field:f,values:m}}),this.startInit?this.styleAttributeService.updateStyleAttribute(o,{scale:(0,Dr.Z)({field:f},this.splitValuesAndCallbackInAttribute(m,this.getLayerConfig()[f]))},w):this.pendingStyleAttributes.push({attributeName:o,attributeField:f,attributeValues:m,updateOptions:w}),!0)}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id)}getShaderPickStat(){return this.layerService.getShaderPickStat()}setEarthTime(o){console.warn("empty fn")}processData(o){return o}getModelType(){throw new Error("Method not implemented.")}getDefaultConfig(){return{}}initLayerModels(){var o=this;return(0,Mi.Z)(function*(){o.models.forEach(w=>w.destroy()),o.models=[],o.uniformBuffers.forEach(w=>{w.destroy()}),o.uniformBuffers=[];const f=o.rendererService.createBuffer({data:new Float32Array(16+4).fill(0),isUBO:!0});o.uniformBuffers.push(f);const m=o.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0});o.uniformBuffers.push(m),o.models=yield o.layerModel.initModels()})()}getLayerUniformBuffer(){return this.uniformBuffers[0]}getPickingUniformBuffer(){return this.uniformBuffers[1]}reRender(){this.inited&&this.layerService.reRender()}splitValuesAndCallbackInAttribute(o){return{values:Lg(o)?void 0:o,callback:Lg(o)?o:void 0}}}function Mh(a,o){return{enable:a,mask:255,func:{cmp:Se.gl.EQUAL,ref:o?1:0,mask:1}}}function sd(a){return a.maskOperation===Se.lE.OR?{enable:!0,mask:255,func:{cmp:Se.gl.ALWAYS,ref:1,mask:255},opFront:{fail:Se.gl.KEEP,zfail:Se.gl.REPLACE,zpass:Se.gl.REPLACE}}:{enable:!0,mask:255,func:{cmp:a.stencilType===Se.yn.SINGLE||a.stencilIndex===0?Se.gl.ALWAYS:Se.gl.LESS,ref:a.stencilType===Se.yn.SINGLE?1:a.stencilIndex===0?2:1,mask:255},opFront:{fail:Se.gl.KEEP,zfail:Se.gl.REPLACE,zpass:Se.gl.REPLACE}}}const $v={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},Ia={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};function Jy(a){return Math.max(Math.ceil(a/4)*4,4)}const e_={opacity:ma.OPACITY,stroke:ma.STROKE,offsets:ma.OFFSETS,rotation:ma.ROTATION,extrusionBase:ma.EXTRUSION_BASE,thetaOffset:15};class Ul{constructor(o){(0,Qt.Z)(this,"triangulation",void 0),(0,Qt.Z)(this,"uniformBuffers",[]),(0,Qt.Z)(this,"textures",[]),(0,Qt.Z)(this,"createTexture2D",void 0),(0,Qt.Z)(this,"preStyleAttribute",{}),(0,Qt.Z)(this,"encodeStyleAttribute",{}),(0,Qt.Z)(this,"layer",void 0),(0,Qt.Z)(this,"dataTexture",void 0),(0,Qt.Z)(this,"DATA_TEXTURE_WIDTH",void 0),(0,Qt.Z)(this,"dataTextureTest",void 0),(0,Qt.Z)(this,"configService",void 0),(0,Qt.Z)(this,"shaderModuleService",void 0),(0,Qt.Z)(this,"rendererService",void 0),(0,Qt.Z)(this,"iconService",void 0),(0,Qt.Z)(this,"fontService",void 0),(0,Qt.Z)(this,"styleAttributeService",void 0),(0,Qt.Z)(this,"mapService",void 0),(0,Qt.Z)(this,"cameraService",void 0),(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"pickingService",void 0),(0,Qt.Z)(this,"attributeUnifoms",void 0),(0,Qt.Z)(this,"commonUnifoms",void 0),this.layer=o,this.configService=o.getContainer().globalConfigService,this.rendererService=o.getContainer().rendererService,this.pickingService=o.getContainer().pickingService,this.shaderModuleService=o.getContainer().shaderModuleService,this.styleAttributeService=o.getContainer().styleAttributeService,this.mapService=o.getContainer().mapService,this.iconService=o.getContainer().iconService,this.fontService=o.getContainer().fontService,this.cameraService=o.getContainer().cameraService,this.layerService=o.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();const{createTexture2D:f}=this.rendererService;this.createTexture2D=f}getBlend(){const{blend:o="normal"}=this.layer.getLayerConfig();return e0[Se.h0[o]]}getStencil(o){const{mask:f=!1,maskInside:m=!0,enableMask:w,maskOperation:C=Se.lE.AND}=this.layer.getLayerConfig();if(this.layer.type==="MaskLayer")return sd({isStencil:!0,stencilType:Se.yn.SINGLE});if(o.isStencil)return sd((0,Dr.Z)((0,Dr.Z)({},o),{},{maskOperation:C}));const D=f||w&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return Mh(D,m)}getDefaultStyle(){return{}}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();const m=(0,Dr.Z)((0,Dr.Z)({},f.uniformsOption),o.uniformsOption);return Object.keys(m).forEach(w=>{typeof m[w]=="boolean"&&(m[w]=m[w]?1:0)}),!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(m.u_texture=this.textures[0]),m}getAnimateUniforms(){return{}}needUpdate(){return(0,Mi.Z)(function*(){return!1})()}buildModels(){return(0,Mi.Z)(function*(){throw new Error("Method not implemented.")})()}initModels(){return(0,Mi.Z)(function*(){throw new Error("Method not implemented.")})()}clearModels(o=!0){}getAttribute(){throw new Error("Method not implemented.")}prerender(){}render(o){throw new Error("Method not implemented.")}registerBuiltinAttributes(){throw new Error("Method not implemented.")}animateOption2Array(o){return[o.enable?0:1,o.duration||4,o.interval||.2,o.trailLength||.1]}startModelAnimate(){const{animateOption:o}=this.layer.getLayerConfig();o.enable&&this.layer.setAnimateStartTime()}getInject(){const o=this.layer.encodeStyleAttribute;let f="";const m=[];this.layer.enableShaderEncodeStyles.forEach(D=>{o[D]?f+=`#define USE_ATTRIBUTE_${D.toUpperCase()} 0.0; 

`:m.push(`  ${Ia[D]} u_${D};`);let B=e_[D];!B&&D==="THETA_OFFSET"&&(B=15),f+=`
          #ifdef USE_ATTRIBUTE_${D.toUpperCase()}
          layout(location = ${e_[D]}) in ${Ia[D]} a_${D.charAt(0).toUpperCase()+D.slice(1)};
        #endif

        `});const w=m.length?`
layout(std140) uniform AttributeUniforms {
${m.join(`
`)}
};
    `:"";f+=w;let C="";return this.layer.enableShaderEncodeStyles.forEach(D=>{C+=`

    #ifdef USE_ATTRIBUTE_${D.toUpperCase()}
      ${Ia[D]} ${D}  = a_${D.charAt(0).toUpperCase()+D.slice(1)};
    #else
      ${Ia[D]} ${D} = u_${D};
    #endif

    `}),{"vs:#decl":f,"fs:#decl":w,"vs:#main-start":C}}getStyleAttribute(){const o={};return this.layer.enableShaderEncodeStyles.forEach(f=>{if(!this.layer.encodeStyleAttribute[f]){const m=this.layer.getLayerConfig()[f];let w=typeof m=="undefined"?$v[f]:m;f==="stroke"&&(w=(0,Ie.CI)(w)),o["u_"+f]=w}}),o}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(o=>{const f=_1(o);f&&(this.styleAttributeService.registerStyleAttribute(f),f.descriptor&&(f.descriptor.shaderLocation=e_[o]))})}updateEncodeAttribute(o,f){this.encodeStyleAttribute[o]=f}initUniformsBuffer(){const o=this.getUniformsBufferInfo(this.getStyleAttribute()),f=this.getCommonUniformsInfo();o.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(Jy(o.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.attributeUnifoms)),f.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(Jy(f.uniformsLength)).fill(0),isUBO:!0}),this.uniformBuffers.push(this.commonUnifoms))}getUniformsBufferInfo(o){let f=0;const m=[];return Object.values(o).forEach(w=>{Array.isArray(w)?(m.push(...w),f+=w.length):typeof w=="number"?(m.push(w),f+=1):typeof w=="boolean"&&(m.push(Number(w)),f+=1)}),{uniformsOption:o,uniformsLength:f,uniformsArray:m}}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}updateStyleUnifoms(){var o,f;const{uniformsArray:m}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:w}=this.getCommonUniformsInfo();(o=this.attributeUnifoms)===null||o===void 0||o.subData({offset:0,data:new Uint8Array(new Float32Array(m).buffer)}),(f=this.commonUnifoms)===null||f===void 0||f.subData({offset:0,data:new Uint8Array(new Float32Array(w).buffer)})}}var lx=L(9187),wp=L.n(lx);const Pu=100,JE=36,Lf=40;function zm(a){return a/180*Math.acos(-1)}function mc(a){const o=zm(a[0])+Math.PI/2,f=zm(a[1]),m=Pu+Math.random()*.4,w=m*Math.cos(f)*Math.cos(o),C=m*Math.cos(f)*Math.sin(o),D=m*Math.sin(f);return[C,D,w]}function Tp(a,o){const f=mat4.create(),m=mat4.create(),w=vec3.fromValues(0,1,0),C=vec3.fromValues(0,0,0);o=o||{},a=typeof a!="undefined"?a:1;const B=2+(typeof o.segments!="undefined"?o.segments:32),V=2*B,re=[],Te=[],Ae=[],Fe=[],Mt=[],rn=[];for(let In=0;In<=B;In++){const ar=In/B,Cr=ar*Math.PI;for(let vr=0;vr<=V;vr++){const qr=vr/V,ri=qr*Math.PI*2;mat4.identity(m),mat4.rotateZ(m,m,-Cr),mat4.identity(f),mat4.rotateY(f,f,ri),vec3.transformMat4(C,w,m),vec3.transformMat4(C,C,f),vec3.scale(C,C,-a),Ae.push(C.slice()),Fe.push(...C.slice()),vec3.normalize(C,C),Mt.push(...C.slice()),rn.push([qr,1-ar]),Fe.push(qr,1-ar)}if(In>0){const vr=Ae.length;let qr=vr-2*(V+1);for(;qr+V+2<vr;qr++)re.push([qr,qr+1,qr+V+1]),Te.push(qr,qr+1,qr+V+1),re.push([qr+V+1,qr+1,qr+V+2]),Te.push(qr+V+1,qr+1,qr+V+2)}}return{cells:re,positions:Ae,uvs:rn,positionsArr:Fe,indicesArr:Te,normalArr:Mt}}var Co=L(31437);const hv=Co.Ue(),EI=Co.Ue(),$a=Co.Ue(),Ap=Co.Ue(),vf=Co.Ue();function S1(a,o,f,m,w){Co.IH(a,f,m),Co.Fv(a,a),o=Co.al(-a[1],a[0]);const C=Co.al(-f[1],f[0]);return[w/Co.AK(o,C),o]}function dv(a,o){return Co.t8(a,-o[1],o[0])}function Um(a,o,f){return Co.lu(a,o,f),Co.Fv(a,a),a}function mf(a,o){return a[0]===o[0]&&a[1]===o[1]}function So(a){const o=new Map;for(let f=0;f<a.length;f++){const m=a[0].toString()+"-"+a[1].toString();o.get(m)?(a.splice(f,1),f++):o.set(m,m)}return a}class Vd{constructor(o={}){(0,Qt.Z)(this,"complex",void 0),(0,Qt.Z)(this,"join",void 0),(0,Qt.Z)(this,"cap",void 0),(0,Qt.Z)(this,"miterLimit",void 0),(0,Qt.Z)(this,"thickness",void 0),(0,Qt.Z)(this,"normal",void 0),(0,Qt.Z)(this,"lastFlip",-1),(0,Qt.Z)(this,"miter",Co.al(0,0)),(0,Qt.Z)(this,"started",!1),(0,Qt.Z)(this,"dash",!1),(0,Qt.Z)(this,"totalDistance",0),(0,Qt.Z)(this,"currentIndex",0),this.join=o.join||"miter",this.cap=o.cap||"butt",this.miterLimit=o.miterLimit||10,this.thickness=o.thickness||1,this.dash=o.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}simpleExtrude(o){const f=this.complex;if(o.length<=1)return f;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const m=o.length;let w=f.startIndex;for(let C=1;C<m;C++){const D=o[C-1],B=o[C],V=C<o.length-1?o[C+1]:null,re=this.simpleSegment(f,w,D,B,V);w+=re}if(this.dash)for(let C=0;C<f.positions.length/6;C++)f.positions[C*6+5]=this.totalDistance;return f.startIndex=f.positions.length/6,f}simpleExtrude_gaode2(o,f){const m=this.complex;if(o.length<=1)return m;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const w=o.length;let C=m.startIndex;for(let re=1;re<w;re++){var D,B,V;const Te=o[re-1];Te.push((D=f[re-1][2])!==null&&D!==void 0?D:0);const Ae=f[re-1],Fe=o[re];Fe.push((B=f[re][2])!==null&&B!==void 0?B:0);const Mt=f[re],rn=re<o.length-1?[...o[re+1],(V=f[re+1][2])!==null&&V!==void 0?V:0]:null,In=re<f.length-1?f[re+1]:null,ar=this.simpleSegment(m,C,Te,Fe,rn,Ae,Mt,In);C+=ar}if(this.dash)for(let re=0;re<m.positions.length/6;re++)m.positions[re*6+5]=this.totalDistance;return m.startIndex=m.positions.length/6,m}extrude_gaode2(o,f){const m=this.complex;if(o.length<=1)return m;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const w=o.length;let C=m.startIndex;for(let re=1;re<w;re++){var D,B,V;const Te=o[re-1];Te.push((D=f[re-1][2])!==null&&D!==void 0?D:0);const Ae=f[re-1],Fe=o[re];Fe.push((B=f[re][2])!==null&&B!==void 0?B:0);const Mt=f[re],rn=re<o.length-1?[...o[re+1],(V=f[re+1][2])!==null&&V!==void 0?V:0]:null,In=re<f.length-1?f[re+1]:null,ar=this.segment_gaode2(m,C,Te,Fe,rn,Ae,Mt,In);C+=ar}if(this.dash)for(let re=0;re<m.positions.length/6;re++)m.positions[re*6+5]=this.totalDistance;return m.startIndex=m.positions.length/6,m}extrude(o){const f=this.complex;if(o.length<=1)return f;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const m=o.length;let w=f.startIndex;for(let C=1;C<m;C++){const D=o[C-1],B=o[C],V=C<o.length-1?o[C+1]:null,re=this.segment(f,w,D,B,V);w+=re}if(this.dash)for(let C=0;C<f.positions.length/6;C++)f.positions[C*6+5]=this.totalDistance;return f.startIndex=f.positions.length/6,f}simpleSegment(o,f,m,w,C){let D=0;const B=o.indices,V=o.positions,re=o.normals,Te=(0,Ie.Z)([w[0],w[1]]),Ae=(0,Ie.Z)([m[0],m[1]]);Um($a,Te,Ae);let Fe=0;if(this.dash&&(Fe=this.lineSegmentDistance(Te,Ae),this.totalDistance+=Fe),this.normal||(this.normal=Co.Ue(),dv(this.normal,$a)),this.started||(this.started=!0,this.extrusions(V,re,m,this.normal,this.thickness,this.totalDistance-Fe)),B.push(f+0,f+1,f+2),!C)dv(this.normal,$a),this.extrusions(V,re,w,this.normal,this.thickness,this.totalDistance),B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),D+=2;else{const Mt=(0,Ie.Z)([C[0],C[1]]);mf(Te,Mt)&&Co.IH(Mt,Te,Co.Fv(Mt,Co.$X(Mt,Te,Ae))),Um(Ap,Mt,Te);const[rn,In]=S1(vf,Co.Ue(),$a,Ap,this.thickness);let ar=Co.AK(vf,this.normal)<0?-1:1;this.extrusions(V,re,w,In,rn,this.totalDistance),B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),ar=-1,Co.JG(this.normal,In),D+=2,this.lastFlip=ar}return D}segment_gaode2(o,f,m,w,C,D,B,V){let re=0;const Te=o.indices,Ae=o.positions,Fe=o.normals,Mt=this.cap==="square",rn=this.join==="bevel",In=(0,Ie.Z)([B[0],B[1]]),ar=(0,Ie.Z)([D[0],D[1]]);Um($a,w,m);let Cr=0;if(this.dash&&(Cr=this.lineSegmentDistance(In,ar),this.totalDistance+=Cr),this.normal||(this.normal=Co.Ue(),dv(this.normal,$a)),!this.started)if(this.started=!0,Mt){const vr=Co.Ue(),qr=Co.Ue();Co.IH(vr,this.normal,$a),Co.IH(qr,this.normal,$a),Fe.push(qr[0],qr[1],0),Fe.push(vr[0],vr[1],0),Ae.push(m[0],m[1],m[2]|0,this.totalDistance-Cr,-this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),Ae.push(m[0],m[1],m[2]|0,this.totalDistance-Cr,this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Ae,Fe,m,this.normal,this.thickness,this.totalDistance-Cr);if(Te.push(f+0,f+1,f+2),C){mf(w,C)&&Co.IH(C,w,Co.Fv(C,Co.$X(C,w,m))),Um(Ap,C,w);const[vr,qr]=S1(vf,Co.Ue(),$a,Ap,this.thickness);let ri=Co.AK(vf,this.normal)<0?-1:1,po=rn;!po&&this.join==="miter"&&vr>this.miterLimit&&(po=!0),po?(Fe.push(this.normal[0],this.normal[1],0),Fe.push(qr[0],qr[1],0),Ae.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*ri,w[2]|0),this.complex.indexes.push(this.currentIndex),Ae.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness*ri,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,Te.push(...this.lastFlip!==-ri?[f,f+2,f+3]:[f+2,f+1,f+3]),Te.push(f+2,f+3,f+4),dv(hv,Ap),Co.JG(this.normal,hv),Fe.push(this.normal[0],this.normal[1],0),Ae.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*ri,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,re+=3):(this.extrusions(Ae,Fe,w,qr,vr,this.totalDistance),Te.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),ri=-1,Co.JG(this.normal,qr),re+=2),this.lastFlip=ri}else{if(dv(this.normal,$a),Mt){const vr=Co.Ue(),qr=Co.Ue();Co.lu(qr,$a,this.normal),Co.IH(vr,$a,this.normal),Fe.push(qr[0],qr[1],0),Fe.push(vr[0],vr[1],0),Ae.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),Ae.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(Ae,Fe,w,this.normal,this.thickness,this.totalDistance);Te.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),re+=2}return re}segment(o,f,m,w,C){let D=0;const B=o.indices,V=o.positions,re=o.normals,Te=this.cap==="square",Ae=this.join==="bevel",Fe=(0,Ie.Z)([w[0],w[1]]),Mt=(0,Ie.Z)([m[0],m[1]]);Um($a,Fe,Mt);let rn=0;if(this.dash&&(rn=this.lineSegmentDistance(Fe,Mt),this.totalDistance+=rn),this.normal||(this.normal=Co.Ue(),dv(this.normal,$a)),!this.started)if(this.started=!0,Te){const In=Co.Ue(),ar=Co.Ue();Co.IH(In,this.normal,$a),Co.IH(ar,this.normal,$a),re.push(ar[0],ar[1],0),re.push(In[0],In[1],0),V.push(m[0],m[1],m[2]|0,this.totalDistance-rn,-this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),V.push(m[0],m[1],m[2]|0,this.totalDistance-rn,this.thickness,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,re,m,this.normal,this.thickness,this.totalDistance-rn);if(B.push(f+0,f+1,f+2),C){const In=(0,Ie.Z)([C[0],C[1]]);mf(Fe,In)&&Co.IH(In,Fe,Co.Fv(In,Co.$X(In,Fe,Mt))),Um(Ap,In,Fe);const[ar,Cr]=S1(vf,Co.Ue(),$a,Ap,this.thickness);let vr=Co.AK(vf,this.normal)<0?-1:1,qr=Ae;!qr&&this.join==="miter"&&ar>this.miterLimit&&(qr=!0),qr?(re.push(this.normal[0],this.normal[1],0),re.push(Cr[0],Cr[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*vr,w[2]|0),this.complex.indexes.push(this.currentIndex),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness*vr,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,B.push(...this.lastFlip!==-vr?[f,f+2,f+3]:[f+2,f+1,f+3]),B.push(f+2,f+3,f+4),dv(hv,Ap),Co.JG(this.normal,hv),re.push(this.normal[0],this.normal[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,-this.thickness*vr,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,D+=3):(this.extrusions(V,re,w,Cr,ar,this.totalDistance),B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),vr=-1,Co.JG(this.normal,Cr),D+=2),this.lastFlip=vr}else{if(dv(this.normal,$a),Te){const In=Co.Ue(),ar=Co.Ue();Co.lu(ar,$a,this.normal),Co.IH(In,$a,this.normal),re.push(ar[0],ar[1],0),re.push(In[0],In[1],0),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),V.push(w[0],w[1],w[2]|0,this.totalDistance,this.thickness,w[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(V,re,w,this.normal,this.thickness,this.totalDistance);B.push(...this.lastFlip===1?[f,f+2,f+3]:[f+2,f+1,f+3]),D+=2}return D}extrusions(o,f,m,w,C,D){f.push(w[0],w[1],0),f.push(w[0],w[1],0),o.push(m[0],m[1],m[2]|0,D,-C,m[2]|0),this.complex.indexes.push(this.currentIndex),o.push(m[0],m[1],m[2]|0,D,C,m[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}lineSegmentDistance(o,f){const m=f[0]-o[0],w=f[1]-o[1];return Math.sqrt(m*m+w*w)}}var Ql=L(77160);function eS(a){const o=a[0][0],f=a[0][a[0].length-1];o[0]===f[0]&&o[1]===f[1]&&(a[0]=a[0].slice(0,a[0].length-1));const m=a[0].length,w=earcut.flatten(a),{vertices:C,dimensions:D}=w,B=[],V=[];for(let Te=0;Te<C.length/D;Te++)D===2?B.push(C[Te*2],C[Te*2+1],1):B.push(C[Te*3],C[Te*3+1],1);const re=earcut(w.vertices,w.holes,w.dimensions);V.push(...re);for(let Te=0;Te<m;Te++){const Ae=w.vertices.slice(Te*D,(Te+1)*D);let Fe=w.vertices.slice((Te+1)*D,(Te+2)*D);Fe.length===0&&(Fe=w.vertices.slice(0,D));const Mt=B.length/3;B.push(Ae[0],Ae[1],1,Fe[0],Fe[1],1,Ae[0],Ae[1],0,Fe[0],Fe[1],0),V.push(...[0,2,1,2,3,1].map(rn=>rn+Mt))}return{positions:B,index:V}}function tS(a){const o=earcut.flatten(a),f=earcut(o.vertices,o.holes,o.dimensions);return{positions:o.vertices,index:f}}function nS(a,o=!1){const f=a[0][0],m=a[0][a[0].length-1];f[0]===m[0]&&f[1]===m[1]&&(a[0]=a[0].slice(0,a[0].length-1));const w=a[0].length,C=wp().flatten(a),{vertices:D,dimensions:B}=C,V=[],re=[],Te=[];for(let Fe=0;Fe<D.length/B;Fe++)V.push(D[Fe*B],D[Fe*B+1],1,-1,-1),Te.push(0,0,1);const Ae=wp()(C.vertices,C.holes,C.dimensions);re.push(...Ae);for(let Fe=0;Fe<w;Fe++){const Mt=C.vertices.slice(Fe*B,(Fe+1)*B);let rn=C.vertices.slice((Fe+1)*B,(Fe+2)*B);rn.length===0&&(rn=C.vertices.slice(0,B));const In=V.length/5;V.push(Mt[0],Mt[1],1,0,0,rn[0],rn[1],1,.1,0,Mt[0],Mt[1],0,0,.8,rn[0],rn[1],0,.1,.8);const ar=qv([rn[0],rn[1],1],[Mt[0],Mt[1],0],[Mt[0],Mt[1],1],o);Te.push(...ar,...ar,...ar,...ar),re.push(...[1,2,0,3,2,1].map(Cr=>Cr+In))}return{positions:V,index:re,normals:Te}}function qv(a,o,f,m=!1){const w=Ql.Ue(),C=Ql.Ue(),D=Ql.Ue();m&&(a=(0,Ie.vP)(a),o=(0,Ie.vP)(o),f=(0,Ie.vP)(f));const B=Ql.al(...a),V=Ql.al(...o),re=Ql.al(...f);Ql.lu(w,re,V),Ql.lu(C,B,V),Ql.kC(D,w,C);const Te=Ql.Ue();return Ql.Fv(Te,D),Te}let t_=function(a){return a.CYLINDER="cylinder",a.SQUARECOLUMN="squareColumn",a.TRIANGLECOLUMN="triangleColumn",a.HEXAGONCOLUMN="hexagonColumn",a.PENTAGONCOLUMN="pentagonColumn",a}({}),n_=function(a){return a.CIRCLE="circle",a.SQUARE="square",a.TRIANGLE="triangle",a.HEXAGON="hexagon",a.PENTAGON="pentagon",a}({});function r_(a,o=0){const f=Math.PI*2/a,m=[];for(let C=0;C<a;C++)m.push(f*C+o*Math.PI/12);return m.map(C=>{const D=Math.sin(C+Math.PI/4),B=Math.cos(C+Math.PI/4);return[D,B,0]})}function ux(){return r_(30)}function cx(){return r_(4)}function w1(){return r_(3)}function i_(){return r_(6,1)}function rS(){return r_(5)}const Cp={[n_.CIRCLE]:ux,[n_.HEXAGON]:i_,[n_.TRIANGLE]:w1,[n_.SQUARE]:cx,[n_.PENTAGON]:rS,[t_.CYLINDER]:ux,[t_.HEXAGONCOLUMN]:i_,[t_.TRIANGLECOLUMN]:w1,[t_.SQUARECOLUMN]:cx,[t_.PENTAGONCOLUMN]:rS},jm={};function Yc(a){const o=(0,Ie.SI)(a.coordinates);return{vertices:[...o,...o,...o,...o],indices:[0,1,2,2,3,0],size:o.length}}function iS(a){const o=(0,Ie.SI)(a.coordinates),f=mc(o);return{vertices:[...f,...f,...f,...f],indices:[0,1,2,2,3,0],size:f.length}}function fx(a){const{shape:o}=a,{positions:f,index:m,normals:w}=C1(o,!1);return{vertices:f,indices:m,normals:w,size:5}}function iC(a){const o=(0,Ie.SI)(a.coordinates);return{vertices:[...o],indices:[0],size:o.length}}function Kv(a){const{coordinates:o,originCoordinates:f,version:m}=a,w=new Vd({dash:!0,join:"bevel"});if(m==="GAODE2.x"){let D=o;Array.isArray(D[0][0])||(D=[o]);let B=f;Array.isArray(B[0][0])||(B=[f]);for(let V=0;V<D.length;V++){const re=D[V],Te=B[V];w.extrude_gaode2(re,Te)}}else{let D=o;D[0]&&!Array.isArray(D[0][0])&&(D=[o]),D.forEach(B=>{w.extrude(B)})}const C=w.complex;return{vertices:C.positions,indices:C.indices,normals:C.normals,indexes:C.indexes,size:6}}function SI(a){const o=a.coordinates.flat(),f=1,m=1;return{vertices:[1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o,1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o],normals:[-f,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-f,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function wI(a){const{coordinates:o,originCoordinates:f}=a,m=[];if(!Array.isArray(o[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};const{results:w,totalDistance:C}=hx(o,f);return w.map(D=>{m.push(D[0],D[1],D[2],D[3],0,C)}),{vertices:m,indices:[],normals:[],size:6,count:w.length}}function TI(a){const{coordinates:o}=a,f=[];if(!Array.isArray(o[0]))return{vertices:[],indices:[],size:4,count:0};const{results:m}=jl(o);return m.map(w=>{f.push(w[0],w[1],w[2],w[3])}),{vertices:f,indices:[],size:4,count:m.length}}function T1(a,o){const f=o[0]-a[0],m=o[1]-a[1];return Math.sqrt(f*f+m*m)}function Ng(a,o){return a.length<3&&a.push(0),o!==void 0&&a.push(o),a}function hx(a,o){let f=a,m=o||a;Array.isArray(f)&&Array.isArray(f[0])&&Array.isArray(f[0][0])&&(f=o.flat(),m=o.flat());let w=0;if(f.length<2)return{results:f,totalDistance:0};{const C=[],D=Ng(f[0],w);C.push(D);for(let V=1;V<f.length-1;V++){const re=T1((0,Ie.Z)(m[V-1]),(0,Ie.Z)(m[V]));w+=re;const Te=Ng(f[V],w);C.push(Te),C.push(Te)}const B=T1((0,Ie.Z)(m[m.length-2]),(0,Ie.Z)(m[m.length-1]));return w+=B,C.push(Ng(f[f.length-1],w)),{results:C,totalDistance:w}}}function jl(a){if(a.length<2)return{results:a};{const o=[],f=Ng(a[0]);o.push(f);for(let m=1;m<a.length-1;m++){const w=Ng(a[m]);o.push(w),o.push(w)}return o.push(Ng(a[a.length-1])),{results:o}}}function Iu(a){const{coordinates:o}=a,f=wp().flatten(o),{vertices:m,dimensions:w,holes:C}=f;return{indices:wp()(m,C,w),vertices:m,size:w}}function Op(a){const{coordinates:o}=a,f=wp().flatten(o),{vertices:m,dimensions:w,holes:C}=f;return{indices:wp()(m,C,w),vertices:dx(m),size:w+4}}function dx(a){const o=[],{center:f,radius:m}=(0,Ie.Rx)(a);for(let w=0;w<a.length;w+=2){const C=a[w],D=a[w+1];o.push(C,D,0,...f,m)}return o}function fu(a){const o=a.coordinates,{positions:f,index:m,normals:w}=nS(o,!0);return{vertices:f,indices:m,normals:w,size:5}}function AI(a){const{shape:o}=a,{positions:f,index:m}=px(o);return{vertices:f,indices:m,size:3}}function A1(a){const o=a.coordinates;return{vertices:[...o[0],0,0,0,...o[1],0,1,0,...o[2],0,1,1,...o[3],0,0,1],indices:[0,1,2,0,2,3],size:5}}function o_(a,o){const{segmentNumber:f=30}=o,m=a.coordinates,w=[],C=[];for(let D=0;D<f;D++)w.push(D,1,D,m[0][0],m[0][1],m[1][0],m[1][1],D,-1,D,m[0][0],m[0][1],m[1][0],m[1][1]),D!==f-1&&C.push(...[0,1,2,1,3,2].map(B=>D*2+B));return{vertices:w,indices:C,size:7}}function oS(a){const o=a.coordinates;o.length===2&&o.push(0);const f=pv(-1,1),m=pv(1,1),w=pv(-1,-1),C=pv(1,-1);return{vertices:[...o,...f,...o,...w,...o,...C,...o,...m],indices:[0,1,2,3,0,2],size:5}}function C1(a,o=!1){if(jm&&jm[a])return jm[a];const f=Cp[a]?Cp[a]():Cp.cylinder(),m=nS([f],o);return jm[a]=m,m}function oC(a,o,f=3,m=!1){const w=new Float32Array(a.length/f*3);let C,D,B;const V=vec3.create(),re=vec3.create(),Te=vec3.create();for(let Ae=0,Fe=o.length;Ae<Fe;Ae+=3){C=o[Ae+0]*3,D=o[Ae+1]*3,B=o[Ae+2]*3;let Mt=[a[C],a[C+1]],rn=[a[D],a[D+1]],In=[a[B],a[B+1]];m&&(Mt=lngLatToMeters(Mt),rn=lngLatToMeters(rn),In=lngLatToMeters(In));const[ar,Cr]=Mt,vr=vec3.fromValues(ar,Cr,a[C+2]),[qr,ri]=rn,po=vec3.fromValues(qr,ri,a[D+2]),[ho,Xr]=In,lo=vec3.fromValues(ho,Xr,a[B+2]);vec3.sub(V,lo,po),vec3.sub(re,vr,po),vec3.cross(Te,V,re),w[C]+=V[0],w[C+1]+=V[1],w[C+2]+=V[2],w[D]+=V[0],w[D+1]+=V[1],w[D+2]+=V[2],w[B]+=V[0],w[B+1]+=V[1],w[B+2]+=V[2]}return aC(w),w}function aC(a){for(let o=0,f=a.length;o<f;o+=3){const m=vec3.fromValues(a[o],a[o+1],a[o+2]),w=vec3.create();vec3.normalize(w,m),a.set(w,o)}}function hu(a){const o=a[0][0],f=a[0][a[0].length-1];return o[0]===f[0]&&o[1]===f[1]}function px(a){const o=["cylinder","triangleColumn","hexagonColumn","squareColumn"],f=geometryShape[a]?geometryShape[a]():geometryShape.circle();return o.indexOf(a)===-1?fillPolygon([f]):extrudePolygon([f])}function pv(a,o){const f=(a+1)/2,m=(o+1)/2;return[f,m]}function sC(){const a=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),{positionsArr:o,indicesArr:f,normalArr:m}=a;return{vertices:o,indices:f,size:5,normals:m}}function Io(){const a=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),{positionsArr:o,indicesArr:f,normalArr:m}=a;return{vertices:o,indices:f,size:5,normals:m}}const lC=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,uC=`#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;


#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9



  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  //\u8BA1\u7B97dashArray\u548CdistanceRatio \u8F93\u51FA\u5230\u7247\u5143
  vec2 s = source;
  vec2 t = target;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, thetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, thetaOffset), 0.0, 1.0));

  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
    v_lineData.a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,cC={solid:0,dash:1};class fC extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Se.gl.NEAREST,min:Se.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5],forward:D=!0,lineTexture:B=!1,iconStep:V=100,segmentNumber:re=30}=this.layer.getLayerConfig(),{animateOption:Te}=this.layer.getLayerConfig();let Ae=C;w!=="dash"&&(Ae=[0,0]),Ae.length===2&&Ae.push(0,0);let Fe=0,Mt=[0,0,0,0],rn=[0,0,0,0];if(o&&f&&(Mt=(0,Ie.CI)(o),rn=(0,Ie.CI)(f),Fe=1),this.rendererService.getDirty()){var In;(In=this.texture)===null||In===void 0||In.bind()}const ar={u_animate:this.animateOption2Array(Te),u_dash_array:Ae,u_sourceColor:Mt,u_targetColor:rn,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:re,u_lineDir:D?1:-1,u_icon_step:V,u_line_texture:B?1:0,u_textureBlend:m==="normal"?0:1,u_blur:.9,u_line_type:cC[w||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Fe};return this.getUniformsBufferInfo(ar)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:lC,vert:uC,type:""}}buildModels(){var o=this;return(0,Mi.Z)(function*(){o.initUniformsBuffer();const{segmentNumber:f=30}=o.layer.getLayerConfig(),{frag:m,vert:w,type:C}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:"lineArc2d"+C,vertexShader:w,fragmentShader:m,inject:o.getInject(),triangulation:o_,depth:{enable:!1},styleOption:{segmentNumber:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Se.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}const hC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

// varying vec2 v_normal;
in vec4 v_dash_array;
in vec4 v_color;
in vec4 v_line_data;
in float v_segmentIndex;
in vec2 v_iconMapUV;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_line_data.g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,dC=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs\u4E2D\u8BA1\u7B97\u6E10\u53D8\u8272
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,pC={solid:0,dash:1};class vx extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Se.gl.NEAREST,min:Se.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5],lineTexture:D=!1,iconStep:B=100,segmentNumber:V=30,globalArcHeight:re=10}=this.layer.getLayerConfig(),{animateOption:Te}=this.layer.getLayerConfig();C.length===2&&C.push(0,0);let Ae=0,Fe=[0,0,0,0],Mt=[0,0,0,0];if(o&&f&&(Fe=(0,Ie.CI)(o),Mt=(0,Ie.CI)(f),Ae=1),this.rendererService.getDirty()){var rn;(rn=this.texture)===null||rn===void 0||rn.bind()}const In={u_animate:this.animateOption2Array(Te),u_dash_array:C,u_sourceColor:Fe,u_targetColor:Mt,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:Pu,u_global_height:re,segmentNumber:V,u_line_type:pC[w]||0,u_icon_step:B,u_line_texture:D?1:0,u_textureBlend:m==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:Ae};return this.getUniformsBufferInfo(In)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:hC,vert:dC,type:""}}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{segmentNumber:f=30}=o.layer.getLayerConfig(),{frag:m,vert:w,type:C}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:"lineArc3d"+C,vertexShader:w,fragmentShader:m,inject:o.getInject(),triangulation:o_,styleOption:{segmentNumber:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Se.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}const aS={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},ld=1/2;function vC(a,o){const{width:f=2,height:m=1}=o;return{vertices:[0,ld*a,1*a*f,-(m+ld)*a,1*a*f,(m-ld)*a,0,ld*a,1*a*f,-(m+ld)*a,1*a*f,(m-ld)*a],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*a,-2*a,1,-2*a,1.5*a,1,1*a,1.5*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function mC(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,1*a*f,1*m,1*a*f,-1*m,0,0,1*a*f,1*m,1*a*f,-1*m],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*a,1,2,1*a,1,-2,1*a,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function gC(a,o){const{width:f=2,height:m=2}=o;return{vertices:[0,m/2,a*f*1,m/2,a*f*1,-m/2,0,-m/2,0,m/2,a*f*1,m/2,a*f*1,-m/2,0,-m/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function yC(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,1*f*a,.5*m,2*f*a,0,1*f*a,-.5*m,0,0,1*f*a,.5*m,2*f*a,0,1*f*a,-.5*m],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function _C(a,o){const{width:f=2,height:m=3}=o;return{vertices:[0,0,2*a*f,1*m,1.5*a*f,0,2*a*f,-1*m,0,0,2*a*f,1*m,1.5*a*f,0,2*a*f,-1*m],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-a,1,1,0,1,0,-a,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function CI(a,o){const{width:f=2,height:m=2}=o,w=ux(),C=wp().flatten([w]),D=wp()(C.vertices,C.holes,C.dimensions),B=w.map(V=>[V[0]*f*a,V[1]*m]).flat();return{vertices:[...B,...B],dimensions:2,indices:D.map(V=>V+w.length),outLineIndices:D,normals:[...w.map(V=>[V[1]*m,V[0]*f*a,1]).flat(),...new Array(w.length*3).fill(0)]}}function a_(a,o=0,f){const m=typeof f.source=="object"?f.source.type:f.source,w=typeof f.target=="object"?f.target.type:f.target,{width:C=m?aS[m]:0}=typeof f.source=="object"?f.source:{},{width:D=w?aS[w]:0}=typeof f.target=="object"?f.target:{};return{vertices:[0,ld,1*C,...a,1,ld,-1*D,...a,1,-ld,-1*D,...a,0,-ld,1*C,...a,0,ld,1*C,...a,1,ld,-1*D,...a,1,-ld,-1*D,...a,0,-ld,1*C,...a],outLineIndices:[0,1,2,0,2,3].map(B=>B+o),indices:[4,5,6,4,6,7].map(B=>B+o),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function s_(a,o){const f=typeof a=="object"?a.type:a,m=o==="source"?1:-1,w=typeof a=="object"?a:{};switch(f){case"circle":return CI(m,w);case"triangle":return mC(m,w);case"diamond":return yC(m,w);case"rect":return gC(m,w);case"classic":return _C(m,w);case"halfTriangle":return vC(m,w);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function vv(a){const o=a.coordinates.flat(),f=1,m=1;return{vertices:[1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o,1,0,0,...o,1,2,-3,...o,1,1,-3,...o,0,1,0,...o,0,0,0,...o],normals:[-f,2*m,1,2*m,-m,1,m,-m,1,m,-m,1,-f,-m,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function bC(a,o){return o?l_(a,o):vv(a)}function l_(a,o){const f=a.coordinates.flat(),{target:m="classic",source:w="circle"}=o,C=mx(s_(w,"source"),f,0,0),D=a_(f,C.vertices.length/7,o),B=mx(s_(m,"target"),f,1,C.vertices.length/7+D.vertices.length/7);return{vertices:[...C.vertices,...D.vertices,...B.vertices],indices:[...C.outLineIndices,...D.outLineIndices,...B.outLineIndices,...C.indices,...D.indices,...B.indices],normals:[...C.normals,...D.normals,...B.normals],size:7}}function mx(a,o,f=1,m=0){const w=[],{vertices:C,indices:D,dimensions:B,outLineIndices:V}=a;for(let re=0;re<C.length;re+=B)w.push(f,C[re+1],C[re],...o);return(0,Dr.Z)((0,Dr.Z)({},a),{},{vertices:w,indices:D.map(re=>re+m),outLineIndices:V.map(re=>re+m)})}const xC=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;


// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,EC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {

   vec2 data = project_pixel(offsets);
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return data;
  }

  return vec2(data.x, -data.y);;
}

vec2 line_dir(vec2 target, vec2 source) {

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return normalize(target - source);
  }
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}

float flag_gap() {
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
     return 1.;
  }
  return -1.;

}


void main() {

// \u900F\u660E\u5EA6\u8BA1\u7B97
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  vec2 flowlineDir = line_dir(target,source);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x); // mapbox || \u9AD8\u5FB7
   
  vec2 position = mix(source, target, a_Position.x);
  
  float lengthCommon = length(project_position(vec4(target,0,1)) - project_position(vec4(source,0,1)));  //    
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || \u9AD8\u5FB7
  vec2 limitedOffsetDistances = clamp(   
   offsetDistances,
   project_pixel(-lengthCommon*.2), project_pixel(lengthCommon*.2)
  );


  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    a_Position.x
  );

  vec2 normalsCommon =  u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y)); // mapbox || \u9AD8\u5FB7

  float gapCommon = flag_gap() * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir *  (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0));

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));



  setPickingColor(a_PickingColor);
}
`;class u_ extends Ul{getCommonUniformsInfo(){const{gapWidth:o=2,strokeWidth:f=1,strokeOpacity:m=1}=this.layer.getLayerConfig(),w={u_gap_width:o,u_stroke_width:f,u_stroke_opacity:m};return this.getUniformsBufferInfo(w)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return[yield o.layer.buildLayerModel({moduleName:"flow_line",vertexShader:EC,fragmentShader:xC,inject:o.getInject(),triangulation:bC,styleOption:o.layer.getLayerConfig().symbol,primitive:Se.gl.TRIANGLES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Se.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Se.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:ma.NORMAL,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}})}}const Fg=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_line_data;
in vec2 v_iconMapUV;
in vec4 v_dash_array;
in float v_distance_ratio;
in vec4 v_color;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,gx=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 12) in vec4 a_Instance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
  mix(source, target, segmentRatio),
  sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }
  else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    v_line_data.b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,sS={solid:0,dash:1};class SC extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Se.gl.NEAREST,min:Se.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5],lineTexture:D=!1,iconStep:B=100,segmentNumber:V=30}=this.layer.getLayerConfig(),{animateOption:re}=this.layer.getLayerConfig();if(C.length===2&&C.push(0,0),this.rendererService.getDirty()){var Te;(Te=this.texture)===null||Te===void 0||Te.bind()}let Ae=0,Fe=[0,0,0,0],Mt=[0,0,0,0];o&&f&&(Fe=(0,Ie.CI)(o),Mt=(0,Ie.CI)(f),Ae=1);let rn=this.layer.getLayerAnimateTime();isNaN(rn)&&(rn=0);const In={u_animate:this.animateOption2Array(re),u_dash_array:C,u_sourceColor:Fe,u_targetColor:Mt,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:V,u_line_type:sS[w]||0,u_icon_step:B,u_line_texture:D?1:0,u_textureBlend:m==="normal"?0:1,u_time:rn,u_linearColor:Ae};return this.getUniformsBufferInfo(In)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{segmentNumber:f=30}=o.layer.getLayerConfig();return[yield o.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:gx,fragmentShader:Fg,triangulation:o_,styleOption:{segmentNumber:f},inject:o.getInject(),depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:Se.GC.Attribute,descriptor:{name:"a_Instance",shaderLocation:12,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:4,update:(o,f,m)=>[m[3],m[4],m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}let Hd=function(a){return a[a.solid=0]="solid",a[a.dash=1]="dash",a}({}),yx=function(a){return a.VERTICAL="vertical",a.HORIZONTAL="horizontal",a}({}),lS=function(a){return a.NORMAL="normal",a.REPLACE="replace",a}({}),Rh=function(a){return a[a.pixel=0]="pixel",a[a.meter=1]="meter",a}({}),OI=function(a){return a.ALWAYS="always",a.DRAGEND="dragend",a}({});const wC=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_texture_data.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_texture_data.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  // \u7ED8\u5236 border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // \u5916\u4FA7
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,uS=`
#define Animate 0.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in vec3 a_DistanceAndIndexAndMiter;
layout(location = 13) in vec4 a_Normal_Total_Distance;
layout(location = 14) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};


out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  
  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`;class _x extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"textureEventFlag",!1),(0,Qt.Z)(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.textures.length===0&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Se.gl.NEAREST,min:Se.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128})})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",lineType:w="solid",dashArray:C=[10,5,0,0],lineTexture:D=!1,iconStep:B=100,vertexHeightScale:V=20,strokeWidth:re=0,raisingHeight:Te=0,heightfixed:Ae=!1,linearDir:Fe=yx.VERTICAL,blur:Mt=[1,1,1,0]}=this.layer.getLayerConfig();let rn=C;if(w!=="dash"&&(rn=[0,0,0,0]),rn.length===2&&rn.push(0,0),this.rendererService.getDirty()&&this.texture){var In;(In=this.texture)===null||In===void 0||In.bind()}const{animateOption:ar}=this.layer.getLayerConfig();let Cr=0,vr=[0,0,0,0],qr=[0,0,0,0];o&&f&&(vr=(0,Ie.CI)(o),qr=(0,Ie.CI)(f),Cr=1);const ri={u_animate:this.animateOption2Array(ar),u_dash_array:rn,u_blur:Mt,u_sourceColor:vr,u_targetColor:qr,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:B,u_heightfixed:Number(Ae),u_vertexScale:V,u_raisingHeight:Number(Te),u_strokeWidth:re,u_textureBlend:m===lS.NORMAL?0:1,u_line_texture:D?1:0,u_linearDir:Fe===yx.VERTICAL?1:0,u_linearColor:Cr,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(ri)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.textureEventFlag||(o.textureEventFlag=!0,o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture)),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{depth:f=!1}=o.layer.getLayerConfig(),{frag:m,vert:w,type:C}=o.getShaders();return o.layer.triangulation=Kv,[yield o.layer.buildLayerModel({moduleName:"line"+C,vertexShader:w,fragmentShader:m,triangulation:Kv,inject:o.getInject(),depth:{enable:f}})]})()}getShaders(){return{frag:wC,vert:uS,type:""}}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:Se.GC.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:10,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(o,f,m,w,C,D)=>D===void 0?[m[3],10,m[4]]:[m[3],D,m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:Se.GC.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:ma.NORMAL,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:4,update:(o,f,m,w,C)=>[...C,m[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:ma.UV,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}const Bg=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  }
  else{
    outputColor = v_color;
  }
}
`,Vm=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash\u8F93\u51FA
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color; 
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_SizeDistanceAndTotalDistance.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_SizeDistanceAndTotalDistance.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`;class bx extends Ul{getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,lineType:m="solid",dashArray:w=[10,5,0,0],vertexHeightScale:C=20}=this.layer.getLayerConfig();let D=w;m!=="dash"&&(D=[0,0,0,0]),D.length===2&&D.push(0,0);let B=0,V=[0,0,0,0],re=[0,0,0,0];o&&f&&(V=(0,Ie.CI)(o),re=(0,Ie.CI)(f),B=1);const Te={u_sourceColor:V,u_targetColor:re,u_dash_array:D,u_vertexScale:C,u_linearColor:B};return this.getUniformsBufferInfo(Te)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}getShaders(){return{frag:Bg,vert:Vm,type:"lineSimpleNormal"}}buildModels(){var o=this;return(0,Mi.Z)(function*(){o.initUniformsBuffer();const{frag:f,vert:m,type:w}=o.getShaders();return[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,triangulation:wI,inject:o.getInject(),primitive:Se.gl.LINES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:Se.GC.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:4,update:(o,f,m)=>{const{size:w=1}=o,C=Array.isArray(w)?[w[0],w[1]]:[w,0];return[C[0],C[1],m[3],m[5]]}}})}}const xx=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
in vec2 v_iconMapUV;
in float v_blur;
in float v_radio;
in vec4 v_color;
in vec4 v_dataset;

out vec4 outputColor;
#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,cS=`#define Animate 0.0
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec2 a_Size;
layout(location = 10) in float a_Miter;
layout(location = 11) in float a_Total_Distance;
layout(location = 12) in vec4 a_Instance;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec2 a_iconMapUV;
layout(location = 15) in float a_Distance;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};
#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out float v_radio;
out vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {    
     originSize = project_float_meter(a_Size.x); // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
  }


  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
// \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      if(u_heightfixed > 0.0) {
        wallHeight *= mapboxZoomScale;
      }
      
    } else {
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        wallHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`;class Ex extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=f({data:this.iconService.getCanvas(),mag:Se.gl.NEAREST,min:Se.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{sourceColor:o,targetColor:f,textureBlend:m="normal",heightfixed:w=!1,lineTexture:C=!1,iconStep:D=100,iconStepCount:B=1}=this.layer.getLayerConfig(),{animateOption:V}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var re;(re=this.texture)===null||re===void 0||re.bind()}let Te=0,Ae=[0,0,0,0],Fe=[0,0,0,0];o&&f&&(Ae=(0,Ie.CI)(o),Fe=(0,Ie.CI)(f),Te=1);const Mt={u_animate:this.animateOption2Array(V),u_sourceColor:Ae,u_targetColor:Fe,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:D,u_heightfixed:Number(w),u_linearColor:Te,u_line_texture:C?1:0,u_textureBlend:m==="normal"?0:1,u_iconStepCount:B,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(Mt)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.updateTexture(),o.iconService.on("imageUpdate",o.updateTexture),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Mi.Z)(function*(){return[yield o.layer.buildLayerModel({moduleName:"lineWall",vertexShader:cS,fragmentShader:xx,triangulation:Kv,inject:o.getInject(),depth:{enable:!1},blend:o.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:Se.GC.Attribute,descriptor:{name:"a_Distance",shaderLocation:15,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:(o,f,m)=>[m[3]]}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:Se.GC.Attribute,descriptor:{name:"a_Total_Distance",shaderLocation:11,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:(o,f,m)=>[m[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Se.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:ma.NORMAL,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:Se.GC.Attribute,descriptor:{name:"a_Miter",shaderLocation:10,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:(o,f,m)=>[m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:14,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{texture:m}=o,{x:w,y:C}=f[m]||{x:0,y:0};return[w,C]}}})}}var TC={arc:fC,arc3d:vx,greatcircle:SC,wall:Ex,line:_x,simple:bx,flowline:u_,earthArc3d:vx};class Sx extends P0{constructor(...o){super(...o),(0,Qt.Z)(this,"type","LineLayer"),(0,Qt.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),(0,Qt.Z)(this,"arrowInsertCount",0),(0,Qt.Z)(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}})}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel=new TC[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}}[o]}getModelType(){var o;if(this.layerType)return this.layerType;const f=this.styleAttributeService.getLayerStyleAttribute("shape");return(f==null||(o=f.scale)===null||o===void 0?void 0:o.field)||"line"}processData(o){if(this.getModelType()!=="simple")return o;const f=[];return o.map(m=>{if(Array.isArray(m.coordinates)&&Array.isArray(m.coordinates[0])&&Array.isArray(m.coordinates[0][0])){const w=(0,Dr.Z)({},m);m.coordinates.map(C=>{f.push((0,Dr.Z)((0,Dr.Z)({},w),{},{coordinates:C}))})}else f.push(m)}),f}}const AC=`
in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {

  outputColor = v_color;
  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,O1=`#define pi 3.1415926535

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 13) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {


  vec3 size = a_Size * a_Position;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB

  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Extrude.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;

  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

    // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a =  v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

    if(u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? (1.0 - a_Position.z): a_Position.z;
  }


  gl_Position = project_common_position_to_clipspace_v2(pos);

  setPickingColor(a_PickingColor);
}
`;class fS extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"raiseCount",0),(0,Qt.Z)(this,"raiseRepeat",0)}getCommonUniformsInfo(){const{animateOption:o={enable:!1,speed:.01,repeat:!1},sourceColor:f,targetColor:m,pickLight:w=!1,heightfixed:C=!1,opacityLinear:D={enable:!1,dir:"up"},lightEnable:B=!0}=this.layer.getLayerConfig();let V=0,re=[0,0,0,0],Te=[0,0,0,0];if(f&&m&&(re=(0,Ie.CI)(f),Te=(0,Ie.CI)(m),V=1),this.raiseCount<1&&this.raiseRepeat>0&&o.enable){const{speed:Mt=.01}=o;this.raiseCount+=Mt,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const Ae={u_pickLight:Number(w),u_heightfixed:Number(C),u_r:o.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:V,u_sourceColor:re,u_targetColor:Te,u_opacitylinear:Number(D.enable),u_opacitylinear_dir:D.dir==="up"?1:0,u_lightEnable:Number(B)};return this.getUniformsBufferInfo(Ae)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{depth:f=!0,animateOption:{repeat:m=1}}=o.layer.getLayerConfig();return o.raiseRepeat=m,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:O1,fragmentShader:AC,triangulation:fx,inject:o.getInject(),cull:{enable:!0,face:(0,Ie.fj)(o.mapService.version)},depth:{enable:f}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:o=>{const{size:f}=o;if(f){let m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Se.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:ma.NORMAL,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Se.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:ma.EXTRUDE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:o=>{const f=(0,Ie.SI)(o.coordinates);return[f[0],f[1],0]}}})}}const M1=`
layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if(u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if(u_time!=-1.0){
    //wave\u76F8\u5173\u903B\u8F91
    float d = length(v_data.xy);
    if(d > 0.5) {
      discard;
    }
    intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity;//wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity;//wave 
    outputColor = filterColor(outputColor);
  }
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if(outputColor.a < 0.01) {
    discard;
  } 
}
`,hS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;   
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // \u900F\u660E\u5EA6\u8BA1\u7B97
   v_stroke = stroke;  
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);
  vec3 aPosition = a_Position;

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);
  
  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }
  
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class Tx extends Ul{getCommonUniformsInfo(){const{strokeOpacity:o=1,strokeWidth:f=0,blend:m,blur:w=0,raisingHeight:C=0,heightfixed:D=!1,unit:B="pixel"}=this.layer.getLayerConfig();let V=this.getAnimateUniforms().u_time;isNaN(V)&&(V=-1);const re={u_blur_height_fixed:[w,Number(C),Number(D)],u_stroke_width:f,u_additive:m==="additive"?1:0,u_stroke_opacity:o,u_size_unit:Rh[B],u_time:V,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(re)}getAnimateUniforms(){const{animateOption:o={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Yc)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.layer.triangulation=Yc,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,inject:o.getInject(),triangulation:Yc,depth:{enable:!1}})]})()}getShaders(){return{frag:M1,vert:hS,type:"pointFill"}}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){const o=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Se.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:ma.EXTRUDE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(f,m,w,C)=>{const D=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],B=C%4*3;return[D[B],D[B+1],D[B+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:f=>{const{size:m=5}=f;return Array.isArray(m)?[m[0]]:[m]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Se.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:ma.SHAPE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:f=>{const{shape:m=2}=f;return[o.indexOf(m)]}}})}}const dS=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main(){
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
  
  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if(fragmengTocenter >= 0.5) {
        float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
        textureColor.a *= luma;
  }
  
  if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
        outputColor= textureColor;
  }else {
        outputColor= step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
      discard;
  }
  outputColor = filterColor(outputColor);
}
`,CC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }


  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;class Ax extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers()});return}this.texture=f({data:this.iconService.getCanvas(),mag:Se.gl.LINEAR,min:Se.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0})})}getUninforms(){if(this.rendererService.getDirty()){var o;(o=this.texture)===null||o===void 0||o.bind()}const f=this.getCommonUniformsInfo(),m=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Dr.Z)((0,Dr.Z)({},f.uniformsOption),m.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:o=0,heightfixed:f=!1}=this.layer.getLayerConfig(),m={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(o),u_heightfixed:Number(f),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.iconService.on("imageUpdate",o.updateTexture),o.updateTexture(),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointImage",vertexShader:CC,fragmentShader:dS,triangulation:iC,inject:o.getInject(),depth:{enable:!1},primitive:Se.gl.POINTS})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:ma.UV,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{shape:m}=o,{x:w,y:C}=f[m]||{x:-64,y:-64};return[w,C]}}})}}const R1=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}`,Cx=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2., -a_Size /2., 0., 0.);
    gl_Position = project_common_position_to_clipspace(project_pos);
  }

  gl_PointSize = a_Size * u_size_scale *  2.0  * u_DevicePixelRatio;
}
`;function Ox(a){const o=a.coordinates;return{vertices:[...o],indices:[0],size:o.length}}class pS extends Ul{getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const o={u_size_scale:.5};return this.getUniformsBufferInfo(o)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.layer.triangulation=Ox,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:Cx,fragmentShader:R1,triangulation:Ox,inject:o.getInject(),depth:{enable:!1},primitive:Se.gl.POINTS,pick:!1})]})()}clearModels(){}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}var Mx=L(98333),P1=L(85975);class vS{constructor(o,f,m){(0,Qt.Z)(this,"boxCells",[]),(0,Qt.Z)(this,"xCellCount",void 0),(0,Qt.Z)(this,"yCellCount",void 0),(0,Qt.Z)(this,"boxKeys",void 0),(0,Qt.Z)(this,"bboxes",void 0),(0,Qt.Z)(this,"width",void 0),(0,Qt.Z)(this,"height",void 0),(0,Qt.Z)(this,"xScale",void 0),(0,Qt.Z)(this,"yScale",void 0),(0,Qt.Z)(this,"boxUid",void 0);const w=this.boxCells;this.xCellCount=Math.ceil(o/m),this.yCellCount=Math.ceil(f/m);for(let C=0;C<this.xCellCount*this.yCellCount;C++)w.push([]);this.boxKeys=[],this.bboxes=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0}insert(o,f,m,w,C){this.forEachCell(f,m,w,C,this.insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(w),this.bboxes.push(C)}query(o,f,m,w,C){return this.queryHitTest(o,f,m,w,!1,C)}hitTest(o,f,m,w,C){return this.queryHitTest(o,f,m,w,!0,C)}insertBoxCell(o,f,m,w,C,D){this.boxCells[C].push(D)}queryHitTest(o,f,m,w,C,D){if(m<0||o>this.width||w<0||f>this.height)return C?!1:[];const B=[];if(o<=0&&f<=0&&this.width<=m&&this.height<=w){if(C)return!0;for(let re=0;re<this.boxKeys.length;re++)B.push({key:this.boxKeys[re],x1:this.bboxes[re*4],y1:this.bboxes[re*4+1],x2:this.bboxes[re*4+2],y2:this.bboxes[re*4+3]});return D?B.filter(D):B}const V={hitTest:C,seenUids:{box:{},circle:{}}};return this.forEachCell(o,f,m,w,this.queryCell,B,V,D),C?B.length>0:B}queryCell(o,f,m,w,C,D,B,V){const re=B.seenUids,Te=this.boxCells[C];if(Te!==null){const Ae=this.bboxes;for(const Fe of Te)if(!re.box[Fe]){re.box[Fe]=!0;const Mt=Fe*4;if(o<=Ae[Mt+2]&&f<=Ae[Mt+3]&&m>=Ae[Mt+0]&&w>=Ae[Mt+1]&&(!V||V(this.boxKeys[Fe]))){if(B.hitTest)return D.push(!0),!0;D.push({key:this.boxKeys[Fe],x1:Ae[Mt],y1:Ae[Mt+1],x2:Ae[Mt+2],y2:Ae[Mt+3]})}}}return!1}forEachCell(o,f,m,w,C,D,B,V){const re=this.convertToXCellCoord(o),Te=this.convertToYCellCoord(f),Ae=this.convertToXCellCoord(m),Fe=this.convertToYCellCoord(w);for(let Mt=re;Mt<=Ae;Mt++)for(let rn=Te;rn<=Fe;rn++){const In=this.xCellCount*rn+Mt;if(C.call(this,o,f,m,w,In,D,B,V))return}}convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}}var OC=vS;class MC{constructor(o,f){(0,Qt.Z)(this,"width",void 0),(0,Qt.Z)(this,"height",void 0),(0,Qt.Z)(this,"grid",void 0),(0,Qt.Z)(this,"viewportPadding",100),(0,Qt.Z)(this,"screenRightBoundary",void 0),(0,Qt.Z)(this,"screenBottomBoundary",void 0),(0,Qt.Z)(this,"gridRightBoundary",void 0),(0,Qt.Z)(this,"gridBottomBoundary",void 0),this.width=o,this.height=f,this.viewportPadding=Math.max(o,f),this.grid=new OC(o+this.viewportPadding,f+this.viewportPadding,25),this.screenRightBoundary=o+this.viewportPadding,this.screenBottomBoundary=f+this.viewportPadding,this.gridRightBoundary=o+2*this.viewportPadding,this.gridBottomBoundary=f+2*this.viewportPadding}placeCollisionBox(o){const f=o.x1+o.anchorPointX+this.viewportPadding,m=o.y1+o.anchorPointY+this.viewportPadding,w=o.x2+o.anchorPointX+this.viewportPadding,C=o.y2+o.anchorPointY+this.viewportPadding;return!this.isInsideGrid(f,m,w,C)||this.grid.hitTest(f,m,w,C)?{box:[]}:{box:[f,m,w,C]}}insertCollisionBox(o,f){const m={featureIndex:f};this.grid.insert(m,o[0],o[1],o[2],o[3])}project(o,f,m){const w=Mx.al(f,m,0,1),C=Mx.Ue(),D=P1.fromValues(...o);return Mx.fF(C,w,D),{x:(C[0]/C[3]+1)/2*this.width+this.viewportPadding,y:(-C[1]/C[3]+1)/2*this.height+this.viewportPadding}}isInsideGrid(o,f,m,w){return m>=0&&o<this.gridRightBoundary&&w>=0&&f<this.gridBottomBoundary}}function Rx(a){let o=.5,f=.5;switch(a){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0;break;default:o=.5}switch(a){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;break;default:f=.5}return{horizontalAlign:o,verticalAlign:f}}function RC(a,o,f,m,w){if(!w)return;const C=a[m],D=C.glyph;if(D){const B=o[D].advance*C.scale,V=(a[m].x+B)*w;for(let re=f;re<=m;re++)a[re].x-=V}}function Px(a,o,f,m,w,C,D){const B=(o-f)*w,V=(-m*D+.5)*C;for(const re of a)re.x+=B,re.y+=V}function PC(a,o,f,m,w,C,D){let V=0,re=-8,Te=0;const Ae=a.positionedGlyphs,Fe=C==="right"?1:C==="left"?0:.5,Mt=Ae.length;f.forEach(Cr=>{if(Cr.split("").forEach(vr=>{const qr=o[vr],ri=0;qr&&(Ae.push({glyph:vr,x:V,y:re+ri,vertical:!1,scale:1,metrics:qr}),V+=qr.advance+D)}),Ae.length!==Mt){const vr=V-D;Te=Math.max(vr,Te),RC(Ae,o,Mt,Ae.length-1,Fe)}V=0,re-=m+5});const{horizontalAlign:rn,verticalAlign:In}=Rx(w);Px(Ae,Fe,rn,In,Te,m,f.length);const ar=re- -8;a.top+=-In*ar,a.bottom=a.top-ar,a.left+=-rn*Te,a.right=a.left+Te}function Ix(a,o,f,m,w,C,D){let V=0,re=-8,Te=0;const Ae=a.positionedGlyphs,Fe=C==="right"?1:C==="left"?0:.5,Mt=Ae.length;f.forEach(Cr=>{const vr=o[Cr],qr=0;if(vr&&(Ae.push({glyph:Cr,x:vr.advance/2,y:re+qr,vertical:!1,scale:1,metrics:vr}),V+=vr.advance+D),Ae.length!==Mt){const ri=V-D;Te=Math.max(ri,Te),RC(Ae,o,Mt,Ae.length-1,Fe)}V=0,re-=m+5});const{horizontalAlign:rn,verticalAlign:In}=Rx(w);Px(Ae,Fe,rn,In,Te,m,f.length);const ar=re- -8;a.top+=-In*ar,a.bottom=a.top-ar,a.left+=-rn*Te,a.right=a.left+Te}function IC(a,o,f,m,w,C,D=[0,0],B){const V=a.split(`
`),re=[],Te={positionedGlyphs:re,top:D[1],bottom:D[1],left:D[0],right:D[0],lineCount:V.length,text:a};return B?Ix(Te,o,V,f,m,w,C):PC(Te,o,V,f,m,w,C),re.length?Te:!1}function mS(a,o=[0,0],f){const{positionedGlyphs:m=[]}=a,w=[];for(const C of m){const D=C.metrics,B=4,V=D.advance*C.scale/2,re=f?[C.x+V,C.y]:[0,0],Te=f?[0,0]:[C.x+V+o[0],C.y+o[1]],Ae=(0-B)*C.scale-V+Te[0],Fe=(0-B)*C.scale+Te[1],Mt=Ae+D.width*C.scale,rn=Fe+D.height*C.scale,In={x:Ae,y:Fe},ar={x:Mt,y:Fe},Cr={x:Ae,y:rn},vr={x:Mt,y:rn};w.push({tl:In,tr:ar,bl:Cr,br:vr,tex:D,glyphOffset:re})}return w}const gS=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   // \u4F5C\u4E3A mask \u6A21\u677F\u65F6\u9700\u8981\u4E22\u5F03\u900F\u660E\u7684\u50CF\u7D20
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,Hu=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in vec2 a_textOffsets;
layout(location = 14) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  
  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,{isEqual:Nf}=Ie.lodashUtil;function Qv(a){const o=this,f=a.id,m=[],w=[];if(!o.glyphInfoMap||!o.glyphInfoMap[f])return{vertices:[],indices:[],size:7};const C=o.glyphInfoMap[f].centroid,D=C.length===2?[C[0],C[1],0]:C;return o.glyphInfoMap[f].glyphQuads.forEach((B,V)=>{m.push(...D,B.tex.x,B.tex.y+B.tex.height,B.tl.x,B.tl.y,...D,B.tex.x+B.tex.width,B.tex.y+B.tex.height,B.tr.x,B.tr.y,...D,B.tex.x+B.tex.width,B.tex.y,B.br.x,B.br.y,...D,B.tex.x,B.tex.y,B.bl.x,B.bl.y),w.push(0+V*4,1+V*4,2+V*4,2+V*4,3+V*4,0+V*4)}),{vertices:m,indices:w,size:7}}class c_ extends Ul{constructor(...o){var f;super(...o),f=this,(0,Qt.Z)(this,"glyphInfo",void 0),(0,Qt.Z)(this,"glyphInfoMap",{}),(0,Qt.Z)(this,"rawEncodeData",void 0),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"currentZoom",-1),(0,Qt.Z)(this,"extent",void 0),(0,Qt.Z)(this,"textureHeight",0),(0,Qt.Z)(this,"textCount",0),(0,Qt.Z)(this,"preTextStyle",{}),(0,Qt.Z)(this,"mapping",(0,Mi.Z)(function*(){f.initGlyph(),f.updateTexture(),yield f.reBuildModel()}))}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Dr.Z)((0,Dr.Z)((0,Dr.Z)({},o.uniformsOption),f.uniformsOption),{u_sdf_map:this.textures[0]})}getCommonUniformsInfo(){const{stroke:o="#fff",strokeWidth:f=0,halo:m=.5,gamma:w=2,raisingHeight:C=0}=this.layer.getLayerConfig(),D=this.getFontServiceMapping(),B=this.getFontServiceCanvas();D&&Object.keys(D).length!==this.textCount&&B&&(this.updateTexture(),this.textCount=Object.keys(D).length),this.preTextStyle=this.getTextStyle();const V={u_stroke_color:(0,Ie.CI)(o),u_sdf_map_size:[(B==null?void 0:B.width)||1,(B==null?void 0:B.height)||1],u_raisingHeight:Number(C),u_stroke_width:f,u_gamma_scale:w,u_halo_blur:m};return this.getUniformsBufferInfo(V)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.bindEvent(),o.extent=o.textExtent(),o.rawEncodeData=o.layer.getEncodedData(),o.preTextStyle=o.getTextStyle(),o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{textAllowOverlap:f=!1}=o.layer.getLayerConfig();return o.initGlyph(),o.updateTexture(),f||o.filterGlyphs(),[yield o.layer.buildLayerModel({moduleName:"pointText",vertexShader:Hu,fragmentShader:gS,inject:o.getInject(),triangulation:Qv.bind(o),depth:{enable:!1}})]})()}needUpdate(){var o=this;return(0,Mi.Z)(function*(){const{textAllowOverlap:f=!1,textAnchor:m="center",textOffset:w,padding:C,fontFamily:D,fontWeight:B}=o.getTextStyle();if(!Nf(C,o.preTextStyle.padding)||!Nf(w,o.preTextStyle.textOffset)||!Nf(m,o.preTextStyle.textAnchor)||!Nf(D,o.preTextStyle.fontFamily)||!Nf(B,o.preTextStyle.fontWeight))return yield o.mapping(),!0;if(f)return!1;const V=o.mapService.getZoom(),re=o.mapService.getBounds(),Te=(0,Ie.oO)(o.extent,re);return Math.abs(o.currentZoom-V)>.5||!Te||f!==o.preTextStyle.textAllowOverlap?(yield o.reBuildModel(),!0):!1})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.layer.off("remapping",this.mapping)}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:Se.GC.Attribute,descriptor:{shaderLocation:10,name:"a_textOffsets",buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:(o,f,m)=>[m[5],m[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:Se.GC.Attribute,descriptor:{name:"a_tex",shaderLocation:ma.UV,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=12}=o;return Array.isArray(f)?[f[0]]:[f]}}})}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}textExtent(){const o=this.mapService.getBounds();return(0,Ie.yA)(o,.5)}initTextFont(){const{fontWeight:o,fontFamily:f}=this.getTextStyle(),m=this.rawEncodeData,w=[];m.forEach(C=>{let{shape:D=""}=C;D=D.toString();for(const B of D)w.indexOf(B)===-1&&w.push(B)}),this.fontService.setFontOptions({characterSet:w,fontWeight:o,fontFamily:f,iconfont:!1})}initIconFontTex(){const{fontWeight:o,fontFamily:f}=this.getTextStyle(),m=this.rawEncodeData,w=[];m.forEach(C=>{let{shape:D=""}=C;D=`${D}`,w.indexOf(D)===-1&&w.push(D)}),this.fontService.setFontOptions({characterSet:w,fontWeight:o,fontFamily:f,iconfont:!0})}getTextStyle(){const{fontWeight:o="400",fontFamily:f="sans-serif",textAllowOverlap:m=!1,padding:w=[0,0],textAnchor:C="center",textOffset:D=[0,0],opacity:B=1,strokeOpacity:V=1,strokeWidth:re=0,stroke:Te="#000"}=this.layer.getLayerConfig();return{fontWeight:o,fontFamily:f,textAllowOverlap:m,padding:w,textAnchor:C,textOffset:D,opacity:B,strokeOpacity:V,strokeWidth:re,stroke:Te}}generateGlyphLayout(o){const f=this.getFontServiceMapping(),{spacing:m=2,textAnchor:w="center",textOffset:C}=this.layer.getLayerConfig(),D=this.rawEncodeData;this.glyphInfo=D.map(B=>{const{shape:V="",id:re,size:Te=1}=B,Ae=B.textOffset?B.textOffset:C||[0,0],Fe=B.textAnchor?B.textAnchor:w||"center",Mt=IC(V.toString(),f,Te,Fe,"left",m,Ae,o),rn=mS(Mt,Ae,!1);return B.shaping=Mt,B.glyphQuads=rn,B.centroid=(0,Ie.SI)(B.coordinates),B.originCentroid=B.version==="GAODE2.x"?(0,Ie.SI)(B.originCoordinates):B.originCentroid=B.centroid,this.glyphInfoMap[re]={shaping:Mt,glyphQuads:rn,centroid:(0,Ie.SI)(B.coordinates)},B})}getFontServiceMapping(){const{fontWeight:o="400",fontFamily:f="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${f}_${o}`)}getFontServiceCanvas(){const{fontWeight:o="400",fontFamily:f="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${f}_${o}`)}filterGlyphs(){const{padding:o=[0,0],textAllowOverlap:f=!1}=this.layer.getLayerConfig();if(f)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();const{width:m,height:w}=this.rendererService.getViewportSize(),C=new MC(m,w);this.glyphInfo.filter(B=>{const{shaping:V,id:re=0}=B,Te=B.version==="GAODE2.x"?B.originCentroid:B.centroid,Fe=B.size/16,Mt=this.mapService.lngLatToContainer(Te),{box:rn}=C.placeCollisionBox({x1:V.left*Fe-o[0],x2:V.right*Fe+o[0],y1:V.top*Fe-o[1],y2:V.bottom*Fe+o[1],anchorPointX:Mt.x,anchorPointY:Mt.y});return rn&&rn.length?(C.insertCollisionBox(rn,re),!0):!1}).forEach(B=>{this.glyphInfoMap[B.id]=B})}initGlyph(){const{iconfont:o=!1}=this.layer.getLayerConfig();o?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(o)}updateTexture(){const{createTexture2D:o}=this.rendererService,f=this.getFontServiceCanvas();this.textureHeight=f.height,this.texture&&this.texture.destroy(),this.texture=o({data:f,mag:Se.gl.LINEAR,min:Se.gl.LINEAR,width:f.width,height:f.height}),this.textures=[this.texture]}reBuildModel(){var o=this;return(0,Mi.Z)(function*(){o.filterGlyphs();const f=yield o.layer.buildLayerModel({moduleName:"pointText",vertexShader:Hu,fragmentShader:gS,triangulation:Qv.bind(o),inject:o.getInject(),depth:{enable:!1}});o.layer.models=[f]})()}}function Dx(a){return I1.apply(this,arguments)}function I1(){return I1=(0,Mi.Z)(function*(a){if(window.createImageBitmap){const o=yield fetch(a);return yield createImageBitmap(yield o.blob())}else{const o=new window.Image;return new Promise(f=>{o.onload=()=>f(o),o.src=a,o.crossOrigin="Anonymous"})}}),I1.apply(this,arguments)}const DC=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    outputColor = v_Color;
  
  outputColor = filterColor(outputColor);
}
`,LC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
float isSide = a_Position.z;
 float topU = a_uvs[0];
 float topV = 1.0 - a_uvs[1];
 float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);

  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


 gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);


  setPickingColor(a_PickingColor);
}
`,NC=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if (isSide < 0.999) {// \u662F\u5426\u662F\u8FB9\u7F18
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
     // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }
  
  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,yS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  float lightWeight = calc_lighting(pos);
  vec4 project_pos = project_position(pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;
   
  v_texture_data = vec2(a_Position.z, lightWeight);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }


    gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));



  setPickingColor(a_PickingColor);
}
`,FC=`
layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide =  v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
       outputColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,BC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;
layout(location = 14) in vec3 a_uvs;


layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {


  v_uvs = a_uvs;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(pos);
  v_texture_data = vec2(a_Position.z,lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`;class Lx extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Dr.Z)((0,Dr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{mapTexture:o,heightfixed:f=!1,raisingHeight:m=0,topsurface:w=!0,sidesurface:C=!0,sourceColor:D,targetColor:B}=this.layer.getLayerConfig();let V=0,re=[1,1,1,1],Te=[1,1,1,1];D&&B&&(re=(0,Ie.CI)(D),Te=(0,Ie.CI)(B),V=1);const Ae={u_sourceColor:re,u_targetColor:Te,u_linearColor:V,u_topsurface:Number(w),u_sidesurface:Number(C),u_heightfixed:Number(f),u_raisingHeight:Number(m)};return o&&this.texture&&(Ae.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(Ae)}initModels(){var o=this;return(0,Mi.Z)(function*(){return yield o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,depth:{enable:!0},inject:o.getInject(),triangulation:fu})]})()}getShaders(){const{pickLight:o,mapTexture:f}=this.layer.getLayerConfig();return f?{frag:NC,vert:yS,type:"polygonExtrudeTexture"}:o?{frag:FC,vert:BC,type:"polygonExtrudePickLight"}:{frag:DC,vert:LC,type:"polygonExtrude"}}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy(),this.textures=[]}registerBuiltinAttributes(){const o=this.layer.getSource().extent;let f=o;const m=this.layer.coordCenter||this.layer.getSource().center;let w=f[2]-f[0],C=f[3]-f[1];if(this.mapService.version==="GAODE2.x"){const[D,B]=this.mapService.coordToAMap2RelativeCoordinates([o[0],o[1]],m),[V,re]=this.mapService.coordToAMap2RelativeCoordinates([o[2],o[3]],m);w=V-D,C=re-B,f=[D,B,V,re]}this.styleAttributeService.registerStyleAttribute({name:"uvs",type:Se.GC.Attribute,descriptor:{name:"a_uvs",shaderLocation:ma.UV,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(D,B,V)=>{const re=V[0],Te=V[1];return[(re-f[0])/w,(Te-f[1])/C,V[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Se.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:ma.NORMAL,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(D,B,V,re,Te)=>Te}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:D=>{const{size:B=10}=D;return Array.isArray(B)?[B[0]]:[B]}}})}loadTexture(){var o=this;return(0,Mi.Z)(function*(){const{mapTexture:f}=o.layer.getLayerConfig(),{createTexture2D:m}=o.rendererService;if(o.texture=m({height:1,width:1}),f){const w=yield Dx(f);o.texture=m({data:w,width:w.width,height:w.height,wrapS:Se.gl.CLAMP_TO_EDGE,wrapT:Se.gl.CLAMP_TO_EDGE,min:Se.gl.LINEAR,mag:Se.gl.LINEAR})}})()}}const kC=`
in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {

  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,zC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 13) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos);
   float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class Nx extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Dr.Z)((0,Dr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const o={};return this.getUniformsBufferInfo(o)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{frag:f,vert:m,type:w}=o.getShaders();return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:w,vertexShader:m,fragmentShader:f,inject:o.getInject(),triangulation:fu,depth:{enable:!0}})]})()}getShaders(){return{frag:kC,vert:zC,type:"polygonExtrude"}}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:Se.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:ma.NORMAL,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=10}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const Fx=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,UC=`
layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,jC=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 15) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}`,_S=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};


out vec4 v_color;


#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

 
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;class VC extends Ul{getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Dr.Z)((0,Dr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:o=0,opacityLinear:f={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),m={u_raisingHeight:Number(o),u_opacitylinear:Number(f.enable),u_dir:f.dir==="in"?1:0};return this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{frag:f,vert:m,triangulation:w,type:C}=o.getModelParams();return o.initUniformsBuffer(),o.layer.triangulation=w,[yield o.layer.buildLayerModel({moduleName:C,vertexShader:m,fragmentShader:f,inject:o.getInject(),triangulation:w,primitive:Se.gl.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){const{opacityLinear:o={enable:!1,dir:"in"}}=this.layer.getLayerConfig();o.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:Se.GC.Attribute,descriptor:{name:"a_linear",shaderLocation:ma.LINEAR,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(f,m,w)=>[w[3],w[4],w[5]]}})}getModelParams(){const{opacityLinear:o={enable:!1}}=this.layer.getLayerConfig();return o.enable?{frag:UC,vert:jC,type:"polygonLinear",triangulation:Op}:{frag:Fx,vert:_S,type:"polygonFill",triangulation:Iu}}}const D1=`
layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;

vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture(SAMPLER_2D(u_texture2),p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture(SAMPLER_2D(u_texture1),fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture(SAMPLER_2D(u_texture3), fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    
  outputColor = vec4(col, v_opacity);  
}
`,Bx=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};


out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`;class bS extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture1",void 0),(0,Qt.Z)(this,"texture2",void 0),(0,Qt.Z)(this,"texture3",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Dr.Z)((0,Dr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{watercolor:o="#6D99A8",watercolor2:f="#0F121C"}=this.layer.getLayerConfig(),m={u_watercolor:(0,Ie.CI)(o),u_watercolor2:(0,Ie.CI)(f),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(m)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:Bx,fragmentShader:D1,inject:o.getInject(),triangulation:Iu,primitive:Se.gl.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var o,f,m;(o=this.texture1)===null||o===void 0||o.destroy(),(f=this.texture2)===null||f===void 0||f.destroy(),(m=this.texture3)===null||m===void 0||m.destroy()}registerBuiltinAttributes(){const o=this.layer.getSource().extent,[f,m,w,C]=o,D=w-f,B=C-m;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:Se.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:ma.UV,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:(V,re,Te,Ae)=>{const Fe=V.version==="GAODE2.x"?V.originCoordinates[0][Ae]:Te,[Mt,rn]=Fe;return[(Mt-f)/D,(rn-m)/B]}}})}loadTexture(){const{createTexture2D:o}=this.rendererService,f={height:0,width:0};this.texture1=o(f),this.texture2=o(f),this.texture3=o(f),m(C=>{this.texture1=w(C[0]),this.texture2=w(C[1]),this.texture3=w(C[2]),this.layerService.reRender()});function m(C){let D=0;const B=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(re=>{const Te=new Image;Te.crossOrigin="",Te.src=re,B.push(Te),Te.onload=()=>{D++,D===3&&C(B)}})}function w(C){return o({data:C,width:C.width,height:C.height,wrapS:Se.gl.MIRRORED_REPEAT,wrapT:Se.gl.MIRRORED_REPEAT,min:Se.gl.LINEAR,mag:Se.gl.LINEAR})}}}const Jv=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;


in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {

  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,kg=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 14) in vec2 a_uv;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;


#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xyz, 1.0));
}

`;class HC extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Dr.Z)((0,Dr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{speed:o=.5}=this.layer.getLayerConfig(),f={u_speed:o,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(f)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.loadTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:kg,fragmentShader:Jv,triangulation:Iu,inject:o.getInject(),primitive:Se.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1})]})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){const o=this.layer.getSource().extent,[f,m,w,C]=o,D=w-f,B=C-m;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:Se.GC.Attribute,descriptor:{name:"a_uv",shaderLocation:ma.UV,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:(V,re,Te,Ae)=>{const Fe=V.version==="GAODE2.x"?V.originCoordinates[0][Ae]:Te,[Mt,rn]=Fe;return[(Mt-f)/D,(rn-m)/B]}}})}loadTexture(){const{waterTexture:o}=this.layer.getLayerConfig(),{createTexture2D:f}=this.rendererService;this.texture=f({height:1,width:1});const m=new Image;m.crossOrigin="",o?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),m.src=o):m.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",m.onload=()=>{this.texture=f({data:m,width:m.width,height:m.height,wrapS:Se.gl.MIRRORED_REPEAT,wrapT:Se.gl.MIRRORED_REPEAT,min:Se.gl.LINEAR,mag:Se.gl.LINEAR}),this.layerService.reRender()}}}var GC={fill:VC,line:_x,extrude:Lx,text:c_,point_fill:Tx,point_image:Ax,point_normal:pS,point_extrude:fS,water:HC,ocean:bS,extrusion:Nx};class kx extends P0{constructor(...o){super(...o),(0,Qt.Z)(this,"type","PolygonLayer"),(0,Qt.Z)(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"])}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel=new GC[f](o),yield o.initLayerModels()})()}getModelType(){var o;const f=this.styleAttributeService.getLayerStyleAttribute("shape"),m=f==null||(o=f.scale)===null||o===void 0?void 0:o.field;return m==="fill"||!m?"fill":m==="extrude"?"extrude":m==="extrusion"?"extrusion":m==="water"?"water":m==="ocean"?"ocean":m==="line"?"line":this.getPointModelType()}getPointModelType(){const o=this.getEncodedData(),{shape2d:f,shape3d:m}=this.getLayerConfig(),w=this.iconService.getIconMap(),C=o.find(D=>D.hasOwnProperty("shape"));if(C){const D=C.shape;return D==="dot"?"point_normal":(f==null?void 0:f.indexOf(D))!==-1?"point_fill":(m==null?void 0:m.indexOf(D))!==-1?"point_extrude":w.hasOwnProperty(D)?"point_image":"text"}else return"fill"}}class WC{constructor({rendererService:o,layerService:f,parent:m}){(0,Qt.Z)(this,"tileResource",new Map),(0,Qt.Z)(this,"rendererService",void 0),(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"parent",void 0),(0,Qt.Z)(this,"layerTiles",[]),this.rendererService=o,this.layerService=f,this.parent=m}get tiles(){return this.layerTiles}hasTile(o){return this.layerTiles.some(f=>f.key===o)}addTile(o){this.layerTiles.push(o)}getTile(o){return this.layerTiles.find(f=>f.key===o)}getVisibleTileBylngLat(o){return this.layerTiles.find(f=>f.isLoaded&&f.visible&&f.lnglatInBounds(o))}removeTile(o){const f=this.layerTiles.findIndex(w=>w.key===o),m=this.layerTiles.splice(f,1);m[0]&&m[0].destroy()}updateTileVisible(o){const f=this.getTile(o.key);if(o.isVisible)if(o.parent){const m=this.isChildrenLoaded(o.parent);f==null||f.updateVisible(m)}else f==null||f.updateVisible(!0);else if(o.parent){const m=this.isChildrenLoaded(o.parent);f==null||f.updateVisible(!m)}else f==null||f.updateVisible(!1)}isParentLoaded(o){const f=o.parent;if(!f)return!0;const m=this.getTile(f==null?void 0:f.key);return!!(m!=null&&m.isLoaded)}isChildrenLoaded(o){const f=o==null?void 0:o.children;return f.length===0?!0:f.every(m=>{const w=this.getTile(m==null?void 0:m.key);return w?(w==null?void 0:w.isLoaded)===!0:!0})}render(){var o=this;return(0,Mi.Z)(function*(){const m=o.getRenderLayers().map(function(){var w=(0,Mi.Z)(function*(C){yield o.layerService.renderTileLayer(C)});return function(C){return w.apply(this,arguments)}}());yield Promise.all(m)})()}getRenderLayers(){const o=this.layerTiles.filter(m=>m.visible&&m.isLoaded),f=[];return o.map(m=>f.push(...m.getLayers())),f}getLayers(){const o=this.layerTiles.filter(m=>m.isLoaded),f=[];return o.map(m=>f.push(...m.getLayers())),f}getTiles(){return this.layerTiles}destroy(){this.layerTiles.forEach(o=>o.destroy()),this.tileResource.clear()}}var ZC=L(32676);function xS(a,o,f){f===void 0&&(f={});var m=Ye(a),w=Ye(o),C=ZC.union(m.coordinates,w.coordinates);return C.length===0?null:C.length===1?(0,lt.yu)(C[0],f.properties):(0,lt.tw)(C,f.properties)}var zx=xS;class XC{getCombineFeature(o){let f=null;const m=o[0];return o.map(w=>{const C=lt.yu(w.coordinates);f===null?f=C:f=zx(f,C)}),m&&(f.properties=(0,Dr.Z)({},m)),f}}const f_="select",h_="active";class YC{constructor({layerService:o,tileLayerService:f,parent:m}){(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"tileLayerService",void 0),(0,Qt.Z)(this,"tileSourceService",void 0),(0,Qt.Z)(this,"parent",void 0),(0,Qt.Z)(this,"tilePickID",new Map),this.layerService=o,this.tileLayerService=f,this.parent=m,this.tileSourceService=new XC}pickRender(o){const f=this.tileLayerService.getVisibleTileBylngLat(o.lngLat);if(f){const m=f.getMainLayer();m==null||m.layerPickService.pickRender(o)}}pick(o,f){var m=this;return(0,Mi.Z)(function*(){const C=m.parent.getContainer().pickingService;if(o.type==="RasterLayer"){const D=m.tileLayerService.getVisibleTileBylngLat(f.lngLat);if(D&&D.getMainLayer()!==void 0){const B=D.getMainLayer();return B.layerPickService.pickRasterLayer(B,f,m.parent)}return!1}return m.pickRender(f),C.pickFromPickingFBO(o,f)})()}selectFeature(o){const[f,m,w]=o,C=this.color2PickId(f,m,w);this.tilePickID.set(f_,C),this.updateHighLight(f,m,w,f_)}highlightPickedFeature(o){const[f,m,w]=o,C=this.color2PickId(f,m,w);this.tilePickID.set(h_,C),this.updateHighLight(f,m,w,h_)}updateHighLight(o,f,m,w){this.tileLayerService.tiles.map(C=>{const D=C.getMainLayer();switch(w){case f_:D==null||D.hooks.beforeSelect.call([o,f,m]);break;case h_:D==null||D.hooks.beforeHighlight.call([o,f,m]);break}})}setPickState(){const o=this.tilePickID.get(f_),f=this.tilePickID.get(h_);if(o){const[m,w,C]=this.pickId2Color(o);this.updateHighLight(m,w,C,f_);return}if(f){const[m,w,C]=this.pickId2Color(f);this.updateHighLight(m,w,C,h_);return}}color2PickId(o,f,m){return(0,Ie.W0)(new Uint8Array([o,f,m]))}pickId2Color(o){return(0,Ie.Z6)(o)}getFeatureById(o){const f=this.tileLayerService.getTiles().filter(w=>w.visible),m=[];return f.forEach(w=>{m.push(...w.getFeatureById(o))}),m}pickRasterLayer(){return!1}}const $C=`
layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);
  
  if(u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,qC=`
layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);
  
  vec2 offset = project_pixel(u_offsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }
  
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function ES(a){const o=a.coordinates;return{vertices:[...o],indices:[0],size:o.length}}class KC extends Ul{getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const{blend:o,strokeOpacity:f=1,strokeWidth:m=0,stroke:w="#fff"}=this.layer.getLayerConfig(),C={u_stroke_color:(0,Ie.CI)(w),u_additive:o==="additive"?1:0,u_stroke_opacity:f,u_stroke_width:m};return this.getUniformsBufferInfo(C)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.layer.triangulation=ES,o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:qC,fragmentShader:$C,inject:o.getInject(),triangulation:ES,depth:{enable:!1},primitive:Se.gl.POINTS})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=1}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const QC=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,JC=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in vec3 a_Size;
layout(location = 11) in vec3 a_Pos;
layout(location = 13) in vec3 a_Normal;


layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     v_color = a_Color;
  }
  v_color.a *= u_opacity;

    
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,{isNumber:eO}=Ie.lodashUtil;class Ux extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"raiseCount",0),(0,Qt.Z)(this,"raiseRepeat",0)}getCommonUniformsInfo(){const{animateOption:o={enable:!1,speed:.01,repeat:!1},opacity:f=1,sourceColor:m,targetColor:w,pickLight:C=!1,heightfixed:D=!0,opacityLinear:B={enable:!1,dir:"up"},lightEnable:V=!0}=this.layer.getLayerConfig();let re=0,Te=[0,0,0,0],Ae=[0,0,0,0];if(m&&w&&(Te=(0,Ie.CI)(m),Ae=(0,Ie.CI)(w),re=1),this.raiseCount<1&&this.raiseRepeat>0&&o.enable){const{speed:rn=.01}=o;this.raiseCount+=rn,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const Fe={u_sourceColor:Te,u_targetColor:Ae,u_linearColor:re,u_pickLight:Number(C),u_heightfixed:Number(D),u_r:o.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:eO(f)?f:1,u_opacitylinear:Number(B.enable),u_opacitylinear_dir:B.dir==="up"?1:0,u_lightEnable:Number(V)};return this.getUniformsBufferInfo(Fe)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){const{animateOption:{repeat:f=1}}=o.layer.getLayerConfig();return o.raiseRepeat=f,[yield o.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:JC,fragmentShader:QC,triangulation:fx,depth:{enable:!0},inject:o.getInject(),cull:{enable:!0,face:(0,Ie.fj)(o.mapService.version)},blend:o.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:o=>{const{size:f}=o;if(f){let m=[];return Array.isArray(f)&&(m=f.length===2?[f[0],f[0],f[1]]:f),Array.isArray(f)||(m=[f,f,f]),m}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:Se.GC.Attribute,descriptor:{name:"a_Normal",shaderLocation:ma.NORMAL,buffer:{usage:Se.gl.STATIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(o,f,m,w,C)=>C}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:Se.GC.Attribute,descriptor:{name:"a_Pos",shaderLocation:15,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:o=>{const f=(0,Ie.SI)(o.coordinates);return mc([f[0],f[1]])}}})}}const tO=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,nO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 10) in float a_Shape;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}`;class d_ extends Ul{getCommonUniformsInfo(){const{strokeOpacity:o=1,strokeWidth:f=0,blend:m,blur:w=0}=this.layer.getLayerConfig();this.layer.getLayerConfig();const C={u_additive:m==="additive"?1:0,u_stroke_opacity:o,u_stroke_width:f,u_blur:w};return this.getUniformsBufferInfo(C)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.layer.triangulation=iS,[yield o.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:nO,fragmentShader:tO,triangulation:iS,inject:o.getInject(),depth:{enable:!0},blend:o.getBlend()})]})()}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Se.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:ma.EXTRUDE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(o,f,m,w)=>{const[C,D,B]=m,V=Ql.al(0,0,1),re=Ql.al(C,0,B),Te=C>=0?Ql.EU(V,re):Math.PI*2-Ql.EU(V,re),Ae=Math.PI*2-Math.asin(D/100),Fe=P1.create();P1.rotateY(Fe,Fe,Te),P1.rotateX(Fe,Fe,Ae);const Mt=Ql.al(1,1,0);Ql.fF(Mt,Mt,Fe),Ql.Fv(Mt,Mt);const rn=Ql.al(-1,1,0);Ql.fF(rn,rn,Fe),Ql.Fv(rn,rn);const In=Ql.al(-1,-1,0);Ql.fF(In,In,Fe),Ql.Fv(In,In);const ar=Ql.al(1,-1,0);Ql.fF(ar,ar,Fe),Ql.Fv(ar,ar);const Cr=[...Mt,...rn,...In,...ar],vr=w%4*3;return[Cr[vr],Cr[vr+1],Cr[vr+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:Se.GC.Attribute,descriptor:{name:"a_Shape",shaderLocation:ma.SHAPE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{shape:f=2}=o;return[this.layer.getLayerConfig().shape2d.indexOf(f)]}}})}}const rO=`in vec2 v_uv;// \u672C\u8EAB\u7684 uv \u5750\u6807
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,iO=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;


#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  
  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (extrude.xy * (newSize) + offsets);

  offset = rotate_matrix(offset,rotation);

  vec3 aPosition = a_Position;

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class SS extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"meter2coord",1),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"isMeter",!1),(0,Qt.Z)(this,"radian",0),(0,Qt.Z)(this,"updateTexture",()=>{const{createTexture2D:f}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return}this.texture=f({data:this.iconService.getCanvas(),mag:Se.gl.LINEAR,min:Se.gl.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture]})}getCommonUniformsInfo(){const{raisingHeight:o=0,heightfixed:f=!1,unit:m="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var w;(w=this.texture)===null||w===void 0||w.bind()}const C={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(f),u_raisingHeight:Number(o),u_size_unit:Rh[m]};return this.getUniformsBufferInfo(C)}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Yc)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.iconService.on("imageUpdate",o.updateTexture),o.updateTexture(),o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:iO,fragmentShader:rO,triangulation:Yc,depth:{enable:!1},inject:o.getInject(),cull:{enable:!0,face:(0,Ie.fj)(o.mapService.version)}})]})()}clearModels(){var o;this.iconService.off("imageUpdate",this.updateTexture),(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:ma.UV,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:o=>{const f=this.iconService.getIconMap(),{shape:m}=o,{x:w,y:C}=f[m]||{x:-64,y:-64};return[w,C]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Se.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:ma.EXTRUDE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(o,f,m,w)=>{const C=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],D=w%4*3;return[C[D],C[D+1],C[D+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{name:"a_Size",shaderLocation:ma.SIZE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}const wS=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,TS=`layout(location = 0) in vec3 a_Position;
layout(location = 1) in vec4 a_Color;
layout(location = 9) in float a_Size;
layout(location = 11) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  
  offset = project_pixel(offset);
  
  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;class oO extends Ul{getCommonUniformsInfo(){const{blend:o,speed:f=1,unit:m="pixel"}=this.layer.getLayerConfig(),w={u_additive:o==="additive"?1:0,u_size_unit:Rh[m],u_speed:f,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(w)}getAnimateUniforms(){return{}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Yc)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:TS,fragmentShader:wS,triangulation:Yc,inject:o.getInject(),depth:{enable:!1}})]})()}animateOption2Array(o){return[o.enable?0:1,o.speed||1,o.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:Se.GC.Attribute,descriptor:{name:"a_Extrude",shaderLocation:ma.EXTRUDE,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:3,update:(o,f,m,w)=>{const C=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],D=w%4*3;return[C[D],C[D+1],C[D+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:Se.GC.Attribute,descriptor:{shaderLocation:ma.SIZE,name:"a_Size",buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:1,update:o=>{const{size:f=5}=o;return Array.isArray(f)?[f[0]]:[f]}}})}}var sO={fillImage:SS,fill:Tx,radar:oO,image:Ax,normal:pS,simplePoint:KC,extrude:fS,text:c_,earthFill:d_,earthExtrude:Ux};class jx extends P0{constructor(...o){super(...o),(0,Qt.Z)(this,"type","PointLayer"),(0,Qt.Z)(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),(0,Qt.Z)(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),(0,Qt.Z)(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}})}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel&&o.layerModel.clearModels(),o.layerModel=new sO[f](o),yield o.initLayerModels()})()}rebuildModels(){var o=this;return(0,Mi.Z)(function*(){yield o.buildModels()})()}getModelTypeWillEmptyData(){if(this.shapeOption){const{field:o,values:f}=this.shapeOption,{shape2d:m}=this.getLayerConfig(),w=this.iconService.getIconMap();if(o&&(m==null?void 0:m.indexOf(o))!==-1)return"fill";if(f==="text")return"text";if(f&&f instanceof Array){for(const C of f)if(typeof C=="string"&&w.hasOwnProperty(C))return"image"}}return"normal"}getDefaultConfig(){const o=this.getModelType();return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[o]}getModelType(){const o=this.getEncodedData(),{shape2d:f,shape3d:m,billboard:w=!0}=this.getLayerConfig(),C=this.iconService.getIconMap(),D=o.find(B=>B.hasOwnProperty("shape"));if(D){const B=D.shape;return B==="dot"?"normal":B==="simple"?"simplePoint":B==="radar"?"radar":this.layerType==="fillImage"||w===!1?"fillImage":(f==null?void 0:f.indexOf(B))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(m==null?void 0:m.indexOf(B))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":C.hasOwnProperty(B)?"image":"text"}else return this.getModelTypeWillEmptyData()}}function lO(a){return a==="PolygonLayer"?kx:a==="LineLayer"?Sx:jx}function uO(a){return["PolygonLayer","LineLayer"].indexOf(a)!==-1}class mv extends zu.EventEmitter{constructor(o,f){super(),(0,Qt.Z)(this,"x",void 0),(0,Qt.Z)(this,"y",void 0),(0,Qt.Z)(this,"z",void 0),(0,Qt.Z)(this,"key",void 0),(0,Qt.Z)(this,"parent",void 0),(0,Qt.Z)(this,"sourceTile",void 0),(0,Qt.Z)(this,"visible",!0),(0,Qt.Z)(this,"layers",[]),(0,Qt.Z)(this,"isLoaded",!1),(0,Qt.Z)(this,"tileMaskLayers",[]),(0,Qt.Z)(this,"tileMask",void 0),this.parent=f,this.sourceTile=o,this.x=o.x,this.y=o.y,this.z=o.z,this.key=`${this.x}_${this.y}_${this.z}`}getLayers(){return this.layers}styleUpdate(...o){}lnglatInBounds(o){const[f,m,w,C]=this.sourceTile.bounds,{lng:D,lat:B}=o;return D>=f&&D<=w&&B>=m&&B<=C}getLayerOptions(){var o;const f=this.parent.getLayerConfig();return(0,Dr.Z)((0,Dr.Z)({},f),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:uO(this.parent.type),mask:f.mask||((o=f.maskLayers)===null||o===void 0?void 0:o.length)!==0&&f.enableMask})}getMaskLayer(){const{maskLayers:o}=this.parent.getLayerConfig(),f=[];return o==null||o.forEach(m=>{if(!m.tileLayer)return f.push(m),m;const C=m.tileLayer.getTile(this.sourceTile.key),D=C==null?void 0:C.getLayers()[0];D&&f.push(D)}),f}addTileMask(){var o=this;return(0,Mi.Z)(function*(){const f=new kx({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[o.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),m=(0,Se.e7)(o.parent.container);f.setContainer(m),yield f.init(),o.tileMask=f;const w=o.getMainLayer();return w!==void 0&&(w.tileMask=f),f})()}addMask(o,f){var m=this;return(0,Mi.Z)(function*(){const w=(0,Se.e7)(m.parent.container);f.setContainer(w),yield f.init(),o.addMask(f),m.tileMaskLayers.push(f)})()}addLayer(o){var f=this;return(0,Mi.Z)(function*(){o.isTileLayer=!0;const m=(0,Se.e7)(f.parent.container);o.setContainer(m),f.layers.push(o),yield o.init()})()}updateVisible(o){this.visible=o,this.updateOptions("visible",o)}updateOptions(o,f){this.layers.forEach(m=>{m.updateLayerConfig({[o]:f})})}getMainLayer(){return this.layers[0]}getFeatures(o){return[]}getFeatureById(o){return[]}destroy(){var o;(o=this.tileMask)===null||o===void 0||o.destroy(),this.layers.forEach(f=>f.destroy())}}class Hm extends mv{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.getSourceOption(),m=f.data.features[0].properties,w=new Sx().source(f.data,f.options).size(1).shape("line").color("red"),C=new jx({minZoom:o.z-1,maxZoom:o.z+1,textAllowOverlap:!0}).source([m],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(o.key).style({stroke:"#fff",strokeWidth:2});yield o.addLayer(w),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:o.transforms}}}}const cO=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,fO=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
 
}
`;class I0 extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0)}getCommonUniformsInfo(){const{opacity:o,brightness:f,contrast:m,saturation:w,gamma:C}=this.layer.getLayerConfig(),D={u_opacity:(0,Ie.LS)(o,1),u_brightness:(0,Ie.LS)(f,1),u_contrast:(0,Ie.LS)(m,1),u_saturation:(0,Ie.LS)(w,1),u_gamma:(0,Ie.LS)(C,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(D)}initModels(){var o=this;return(0,Mi.Z)(function*(){return yield o.loadTexture(),o.buildModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}loadTexture(){var o=this;return(0,Mi.Z)(function*(){const{createTexture2D:f}=o.rendererService;o.texture=f({height:1,width:1});const w=yield o.layer.getSource().data.images;o.texture=f({data:w[0],width:w[0].width,height:w[0].height,mag:Se.gl.LINEAR,min:Se.gl.LINEAR})})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:fO,fragmentShader:cO,triangulation:A1,primitive:Se.gl.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:ma.UV,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}var hO={image:I0};class p_ extends P0{constructor(...o){super(...o),(0,Qt.Z)(this,"type","ImageLayer")}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel=new hO[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{image:{}}[o]}getModelType(){return"image"}}class AS extends mv{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new p_((0,Dr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(D=>{var B,V;const re=D;C[re]((B=f[re])===null||B===void 0?void 0:B.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:o.transforms}}}}const dO=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,pO=`layout(location = 0) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`;class vO extends Ul{getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Dr.Z)((0,Dr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,color:f="#000"}=this.layer.getLayerConfig(),m={u_color:(0,Ie.CI)(f),u_opacity:o||1};return this.getUniformsBufferInfo(m)}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initUniformsBuffer(),[yield o.layer.buildLayerModel({moduleName:"mask",vertexShader:pO,fragmentShader:dO,triangulation:Iu,depth:{enable:!1},pick:!1})]})()}clearModels(o=!0){o&&this.layerService.clear()}registerBuiltinAttributes(){return""}}var gO={fill:vO};class CS extends P0{constructor(...o){super(...o),(0,Qt.Z)(this,"type","MaskLayer")}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel=new gO[f](o),yield o.initLayerModels()})()}getModelType(){return"fill"}}class OS extends mv{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new CS((0,Dr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(D=>{var B,V;const re=D;C[re]((B=f[re])===null||B===void 0?void 0:B.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getFeatures(o){return o?this.sourceTile.data.getTileData(o):[]}getSourceOption(){const o=this.parent.getSource(),{sourceLayer:f,featureId:m}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(f)},options:{parser:{type:"geojson",featureId:m},transforms:o.transforms}}}}function Vx(a,o){return{type:a.type,field:"value",items:a.positions.map((f,m)=>({[o]:m>=a.colors.length?null:a.colors[m],value:f}))}}const MS=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
    discard;
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));
    
    outputColor = color;
    outputColor.a = outputColor.a * u_opacity ;
    if (outputColor.a < 0.01)
      discard;
  }
}
`,yO=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`;class RS extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"colorTexture",void 0)}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Dr.Z)((0,Dr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,clampLow:f=!0,clampHigh:m=!0,noDataValue:w=-9999999,domain:C,rampColors:D}=this.layer.getLayerConfig(),B=C||(0,Ie.ZB)(D);this.colorTexture=this.layer.textureService.getColorTexture(D,B);const V={u_domain:B,u_opacity:o||1,u_noDataValue:w,u_clampLow:f?1:0,u_clampHigh:(typeof m!="undefined"?m:f)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(V)}getRasterData(o){return(0,Mi.Z)(function*(){if(Array.isArray(o.data))return{data:o.data,width:o.width,height:o.height};{const{rasterData:f,width:m,height:w}=yield o.data;return{data:Array.from(f),width:m,height:w}}})()}initModels(){var o=this;return(0,Mi.Z)(function*(){return o.buildModels()})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m,queryVerdorInfo:w}=o.rendererService,C=f.data.dataArray[0],{data:D,width:B,height:V}=yield o.getRasterData(C);return o.texture=m({data:new Float32Array(D),width:B,height:V,format:w()==="WebGL1"?Se.gl.LUMINANCE:Se.gl.RED,type:Se.gl.FLOAT,alignment:1}),[yield o.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:yO,fragmentShader:MS,triangulation:A1,primitive:Se.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}clearModels(){var o,f;(o=this.texture)===null||o===void 0||o.destroy(),(f=this.colorTexture)===null||f===void 0||f.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{shaderLocation:ma.UV,name:"a_Uv",buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}const Ph=["data"],Hx=["rasterData"],_O=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {

  vec3 rgb = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y)).rgb;

  if(rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }

  if(outputColor.a < 0.01)
    discard;
 
}`,bO=`
layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
 vec2 u_rminmax;
 vec2 u_gminmax;
 vec2 u_bminmax;
 float u_opacity;
 float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`;class xO extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0),(0,Qt.Z)(this,"dataOption",{})}getUninforms(){const o=this.getCommonUniformsInfo(),f=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),(0,Dr.Z)((0,Dr.Z)({},o.uniformsOption),f.uniformsOption)}getCommonUniformsInfo(){const{opacity:o=1,noDataValue:f=0}=this.layer.getLayerConfig(),{rMinMax:m=[0,255],gMinMax:w=[0,255],bMinMax:C=[0,255]}=this.dataOption,D={u_rminmax:m,u_gminmax:w,u_bminmax:C,u_opacity:o||1,u_noDataValue:f,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(D)}getRasterData(o){var f=this;return(0,Mi.Z)(function*(){if(Array.isArray(o.data)){const{data:D}=o,B=(0,Rl.Z)(o,Ph);return f.dataOption=B,(0,Dr.Z)({data:D},B)}const m=yield o.data,{rasterData:w}=m,C=(0,Rl.Z)(m,Hx);return f.dataOption=C,Array.isArray(w)?(0,Dr.Z)({data:w},C):(0,Dr.Z)({data:Array.from(w)},C)})()}initModels(){var o=this;return(0,Mi.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m}=o.rendererService,w=f.data.dataArray[0],{data:C,width:D,height:B}=yield o.getRasterData(w);return o.texture=m({data:new Float32Array(C),width:D,height:B,format:Se.gl.RGB,type:Se.gl.FLOAT}),[yield o.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:bO,fragmentShader:_O,triangulation:A1,primitive:Se.gl.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initModels()})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:ma.UV,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}const Gx=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
 vec4 u_unpack;
 vec2 u_domain;
 float u_opacity;
 float u_noDataValue;
 float u_clampLow;
 float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;


float getElevation(vec2 coord, float bias) {
    // Convert encoded elevation value to meters
    vec4 data =  texture(SAMPLER_2D(u_texture), coord,bias) * 255.0;
    data.a = -1.0;
    return dot(data, u_unpack);
}

vec4 getColor(float value) {
   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec2 coord = vec2(normalisedValue, 0);
    return  texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord,0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {
     outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
   
    outputColor = getColor(value);
    outputColor.a =  outputColor.a * u_opacity ;
      if(outputColor.a < 0.01)
      discard;
  }
}
`,v_=`layout(location = 0) in vec3 a_Position;
layout(location = 14) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
   vec4 u_unpack;
   vec2 u_domain;
   float u_opacity;
   float u_noDataValue;
   float u_clampLow;
   float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));
}
`;class EO extends Ul{constructor(...o){super(...o),(0,Qt.Z)(this,"texture",void 0)}getCommonUniformsInfo(){const{opacity:o,clampLow:f=!0,clampHigh:m=!0,noDataValue:w=-9999999,domain:C,rampColors:D,colorTexture:B,rScaler:V=6553.6,gScaler:re=25.6,bScaler:Te=.1,offset:Ae=1e4}=this.layer.getLayerConfig(),Fe=C||(0,Ie.ZB)(D);let Mt=B;B?this.layer.textureService.setColorTexture(B,D,Fe):Mt=this.layer.textureService.getColorTexture(D,Fe);const rn={u_unpack:[V,re,Te,Ae],u_domain:Fe,u_opacity:o||1,u_noDataValue:w,u_clampLow:f,u_clampHigh:typeof m!="undefined"?m:f,u_texture:this.texture,u_colorTexture:Mt};return this.textures=[this.texture,Mt],this.getUniformsBufferInfo(rn)}initModels(){var o=this;return(0,Mi.Z)(function*(){o.initUniformsBuffer();const f=o.layer.getSource(),{createTexture2D:m}=o.rendererService,w=yield f.data.images;return o.texture=m({data:w[0],width:w[0].width,height:w[0].height,min:Se.gl.LINEAR,mag:Se.gl.LINEAR}),[yield o.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:v_,fragmentShader:Gx,triangulation:A1,primitive:Se.gl.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var o;(o=this.texture)===null||o===void 0||o.destroy()}buildModels(){var o=this;return(0,Mi.Z)(function*(){return o.initModels()})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:Se.GC.Attribute,descriptor:{name:"a_Uv",shaderLocation:ma.UV,buffer:{usage:Se.gl.DYNAMIC_DRAW,data:[],type:Se.gl.FLOAT},size:2,update:(o,f,m)=>[m[3],m[4]]}})}}var PS={raster:RS,rasterRgb:xO,raster3d:RS,rasterTerrainRgb:EO};class Wx extends P0{constructor(...o){super(...o),(0,Qt.Z)(this,"type","RasterLayer")}buildModels(){var o=this;return(0,Mi.Z)(function*(){const f=o.getModelType();o.layerModel=new PS[f](o),yield o.initLayerModels()})()}getDefaultConfig(){const o=this.getModelType();return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[o]}getModelType(){switch(this.layerSource.getParserType()){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}getLegend(o){if(o!=="color")return{type:void 0,field:void 0,items:[]};const f=this.getLayerConfig().rampColors;return Vx(f,o)}}const SO=["rasterData"];class wO extends mv{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new Wx((0,Dr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(D=>{var B,V;const re=D;C[re]((B=f[re])===null||B===void 0?void 0:B.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource(),f=this.sourceTile.data.data,{rasterData:m}=f,w=(0,Rl.Z)(f,SO);return{data:m,options:{parser:(0,Dr.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},w),transforms:o.transforms}}}}class TO extends mv{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),C=new Wx((0,Dr.Z)({},m)).source(w.data,w.options);f&&Object.keys(f).forEach(D=>{var B,V;const re=D;C[re]((B=f[re])===null||B===void 0?void 0:B.field,(V=f[re])===null||V===void 0?void 0:V.values)}),yield o.addLayer(C),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:o.transforms}}}}const AO=["rasterData"],CO={positions:[0,1],colors:["#000","#fff"]};class OO extends mv{constructor(...o){super(...o),(0,Qt.Z)(this,"colorTexture",void 0)}initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=o.getSourceOption(),{rampColors:C,domain:D}=o.getLayerOptions();o.colorTexture=o.parent.textureService.getColorTexture(C,D);const B=new Wx((0,Dr.Z)((0,Dr.Z)({},m),{},{colorTexture:o.colorTexture})).source(w.data,w.options);f&&Object.keys(f).forEach(V=>{var re,Te;const Ae=V;B[Ae]((re=f[Ae])===null||re===void 0?void 0:re.field,(Te=f[Ae])===null||Te===void 0?void 0:Te.values)}),yield o.addLayer(B),o.isLoaded=!0})()}getSourceOption(){const o=this.parent.getSource(),f=this.sourceTile.data.data,{rasterData:m}=f,w=(0,Rl.Z)(f,AO);return{data:m,options:{parser:(0,Dr.Z)({type:"raster",extent:this.sourceTile.bounds},w),transforms:o.transforms}}}styleUpdate(...o){const{rampColors:f=CO,domain:m}=o;this.colorTexture=this.parent.textureService.getColorTexture(f,m||(0,Ie.ZB)(f)),this.layers.forEach(w=>w.style({colorTexture:this.colorTexture}))}destroy(){this.layers.forEach(o=>o.destroy())}}class L1 extends mv{initTileLayer(){var o=this;return(0,Mi.Z)(function*(){const f=o.parent.getLayerAttributeConfig(),m=o.getLayerOptions(),w=lO(o.parent.type),C=o.getSourceOption();if(!C){o.isLoaded=!0,o.emit("loaded");return}const D=new w((0,Dr.Z)({},m)).source(C.data,C.options);Object.keys(f).forEach(B=>{var V,re;const Te=B;D[Te]((V=f[Te])===null||V===void 0?void 0:V.field,(re=f[Te])===null||re===void 0?void 0:re.values)}),yield o.addLayer(D),m.tileMask&&(yield o.addTileMask()),o.setLayerMinMaxZoom(D),o.isLoaded=!0,o.emit("loaded")})()}getSourceOption(){const o=this.parent.getSource(),{sourceLayer:f="defaultLayer",featureId:m="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(f)},options:{parser:{type:"geojson",featureId:m},transforms:o.transforms}}}setLayerMinMaxZoom(o){o.getModelType()==="text"&&o.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}getFeatures(o){return this.sourceTile.data.getTileData(o)}getFeatureById(o){const f=this.getMainLayer();return f?f.getSource().data.dataArray.filter(w=>w._id===o):[]}}function MO(a){switch(a.type){case"PolygonLayer":return L1;case"LineLayer":return L1;case"PointLayer":return L1;case"TileDebugLayer":return Hm;case"MaskLayer":return OS;case"RasterLayer":const{dataType:f}=a.getSource().parser;switch(f){case Se.n3.RGB:case Se.n3.CUSTOMRGB:return wO;case Se.n3.ARRAYBUFFER:case Se.n3.CUSTOMARRAYBUFFER:return OO;case Se.n3.TERRAINRGB:case Se.n3.CUSTOMTERRAINRGB:return TO;default:return AS}default:return L1}}const RO=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:PO}=Ie.lodashUtil;class IO{constructor(o){(0,Qt.Z)(this,"parent",void 0),(0,Qt.Z)(this,"tileLayerService",void 0),(0,Qt.Z)(this,"mapService",void 0),(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"rendererService",void 0),(0,Qt.Z)(this,"pickingService",void 0),(0,Qt.Z)(this,"tilePickService",void 0),(0,Qt.Z)(this,"tilesetManager",void 0),(0,Qt.Z)(this,"initedTileset",!1),(0,Qt.Z)(this,"lastViewStates",void 0),(0,Qt.Z)(this,"mapchange",()=>{var m;if(this.parent.isVisible()===!1)return;const{latLonBounds:w,zoom:C}=this.getCurrentView();if(this.mapService.version==="GAODE1.x"){const{visible:D}=this.parent.getLayerConfig();C<2&&D?(this.parent.updateLayerConfig({visible:!1}),this.layerService.reRender()):C>=2&&!D&&(this.parent.updateLayerConfig({visible:!0}),this.layerService.reRender())}this.lastViewStates&&this.lastViewStates.zoom===C&&this.lastViewStates.latLonBounds.toString()===w.toString()||(this.lastViewStates={zoom:C,latLonBounds:w},(m=this.tilesetManager)===null||m===void 0||m.throttleUpdate(C,w))}),(0,Qt.Z)(this,"viewchange",PO(this.mapchange,24)),this.parent=o;const f=this.parent.getContainer();this.rendererService=f.rendererService,this.layerService=f.layerService,this.mapService=f.mapService,this.pickingService=f.pickingService,this.tileLayerService=new WC({rendererService:this.rendererService,layerService:this.layerService,parent:o}),this.tilePickService=new YC({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:o}),this.parent.setLayerPickService(this.tilePickService),this.proxy(o),this.initTileSetManager()}initTileSetManager(){var o;const f=this.parent.getSource();if(this.tilesetManager=f.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()===!1)return;const{latLonBounds:m,zoom:w}=this.getCurrentView();(o=this.tilesetManager)===null||o===void 0||o.update(w,m)}getCurrentView(){const o=this.mapService.getBounds(),f=[o[0][0],o[0][1],o[1][0],o[1][1]],m=this.mapService.getZoom();return{latLonBounds:f,zoom:m}}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",o=>{}),this.tilesetManager.on("tile-unload",o=>{this.tileUnLoad(o)}),this.tilesetManager.on("tile-error",(o,f)=>{this.tileError(o)}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}render(){this.tileLayerService.render()}getLayers(){return this.tileLayerService.getLayers()}getTiles(){return this.tileLayerService.getTiles()}getTile(o){return this.tileLayerService.getTile(o)}tileLoaded(o){}tileError(o){console.warn("error:",o)}destroy(){var o;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(o=this.tilesetManager)===null||o===void 0||o.destroy(),this.tileLayerService.destroy()}reload(){var o;this.tilesetManager.clear();const{latLonBounds:f,zoom:m}=this.getCurrentView();(o=this.tilesetManager)===null||o===void 0||o.update(m,f)}tileUnLoad(o){this.tileLayerService.removeTile(o.key)}tileUpdate(){var o=this;return(0,Mi.Z)(function*(){if(!o.tilesetManager)return;const f=o.parent.getMinZoom(),m=o.parent.getMaxZoom(),w=o.tilesetManager.tiles.filter(C=>C.isLoaded).filter(C=>C.isVisibleChange).filter(C=>C.data).filter(C=>C.z>=f&&C.z<m);yield Promise.all(w.map(function(){var C=(0,Mi.Z)(function*(D){if(o.tileLayerService.hasTile(D.key))o.tileLayerService.updateTileVisible(D),o.tilePickService.setPickState(),o.layerService.reRender();else{const B=MO(o.parent),V=new B(D,o.parent);yield V.initTileLayer(),o.tilePickService.setPickState(),V.getLayers().length!==0&&(o.tileLayerService.addTile(V),o.tileLayerService.updateTileVisible(D),o.layerService.reRender())}});return function(D){return C.apply(this,arguments)}}())),o.tilesetManager.isLoaded&&o.parent.emit("tiles-loaded",o.tilesetManager.currentTiles)})()}setPickState(o){}pickRender(o){this.tilePickService.pickRender(o)}selectFeature(o){this.tilePickService.selectFeature(o)}highlightPickedFeature(o){this.tilePickService.highlightPickedFeature(o)}proxy(o){RO.forEach(f=>{const m=o[f].bind(o);o[f]=(...w)=>(m(...w),this.getLayers().map(C=>{C[f](...w)}),f==="style"&&this.getTiles().forEach(C=>C.styleUpdate(...w)),o)})}}class Zx extends null{constructor(...o){super(...o),_defineProperty(this,"isMoving",!1),_defineProperty(this,"maskLayer",void 0),_defineProperty(this,"move",f=>{switch(f.stopPropagation(),f.type){case"touchcancel":case"touchend":case"mouseup":{var m;this.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(w=>{document.removeEventListener(w,this.move)}),(m=this.scene)===null||m===void 0||m.render();break}case"mousedown":case"touchstart":this.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach(w=>{document.addEventListener(w,this.move)});case"mousemove":case"touchmove":{if(this.isMoving)if(this.controlOption.orientation==="vertical"){let w;if("pageX"in f?w=f.pageX:f.touches&&f.touches.length&&f.touches[0].pageX?w=f.touches[0].pageX:f.changedTouches&&f.changedTouches.length&&(w=f.changedTouches[0].pageX),!w)break;const C=this.getContainerDOMRect(),D=this.getContainerSize(),B=D[0],V=(C==null?void 0:C.left)||0,re=w-V+window.scrollX-document.documentElement.clientLeft,Te=B-Math.min(Math.max(0,B-re),B),Ae=Te/B;this.setOptions({ratio:Ae}),this.emit("moving",{size:[Te,D[1]],ratio:[Ae,0]})}else{let w;if("pageY"in f?w=f.pageY:f.touches&&f.touches.length&&f.touches[0].pageY?w=f.touches[0].pageY:f.changedTouches&&f.changedTouches.length&&(w=f.changedTouches[0].pageY),!w)break;const C=this.getContainerDOMRect(),D=this.getContainerSize(),B=D[1],V=(C==null?void 0:C.top)||0,re=w-V+window.scrollY-document.documentElement.clientTop,Te=B-Math.min(Math.max(0,B-re),B),Ae=Te/B;this.setOptions({ratio:Ae}),this.emit("moving",{size:[D[0],Te],ratio:[0,Ae]})}break}default:break}}),_defineProperty(this,"getMaskLayer",()=>(console.log(this.getMaskGeoData()),new PolygonLayer({visible:!1}).source(this.getMaskGeoData()).shape("fill").color("red").style({opacity:.1}))),_defineProperty(this,"updateMask",()=>{var f;if(!this.mapsService)return;const m=this.getMaskGeoData();(f=this.maskLayer)===null||f===void 0||f.setData(m)})}getDefault(){return _objectSpread(_objectSpread({},super.getDefault()),{},{layers:[],rightLayers:[],ratio:.5,orientation:"vertical"})}onAdd(){const o=DOM.create("div","l7-control-swipe");DOM.create("button","l7-control-swipe__button",o);const{orientation:f="vertical",ratio:m=.5}=this.controlOption;return f==="horizontal"?(o.style.top=m*100+"%",o.style.left=""):(o.style.left=m*100+"%",o.style.top=""),o.classList.add(f),o}addTo(o){this.mapsService=o.mapService,this.renderService=o.rendererService,this.layerService=o.layerService,this.controlService=o.controlService,this.configService=o.globalConfigService,this.scene=o.sceneService,this.sceneContainer=o,this.isShow=!0,this.container=this.onAdd();const{className:f,style:m,layers:w,rightLayers:C}=this.controlOption;f&&this.setClassName(f),m&&this.setStyle(m),this.mapsService.getMarkerContainer().appendChild(this.container),this.maskLayer=this.getMaskLayer(),this.registerEvent();const D=createLayerContainer(o);return this.maskLayer.setContainer(D),this.scene.addLayer(this.maskLayer),this.addMaskToLayers(w,!1),this.addMaskToLayers(C,!0),this.emit("add",this),this}onRemove(){if(this.maskLayer){var o;const{layers:f,rightLayers:m}=this.controlOption;this.removeMaskFromLayers(f),this.removeMaskFromLayers(m),(o=this.layerService)===null||o===void 0||o.remove(this.maskLayer)}this.unRegisterEvent(),this.removeAllListeners()}show(){var o;const f=this.container;DOM.removeClass(f,"l7-control-swipe_hide");const{layers:m,rightLayers:w}=this.controlOption;m.forEach(C=>C.enableMask()),w.forEach(C=>C.enableMask()),(o=this.scene)===null||o===void 0||o.render(),this.isShow=!0,this.emit("show",this)}hide(){var o;const f=this.container;DOM.addClass(f,"l7-control-swipe_hide");const{layers:m,rightLayers:w}=this.controlOption;m.forEach(C=>C.disableMask()),w.forEach(C=>C.disableMask()),(o=this.scene)===null||o===void 0||o.render(),this.isShow=!1,this.emit("hide",this)}setOptions(o){const f=_objectSpread(_objectSpread({},this.controlOption),o);if(o.className&&this.setClassName(o.className),o.style&&this.setStyle(o.style),(o.orientation||o.ratio!==void 0)&&this.setOrientationAndRatio(f.orientation,f.ratio),o.layers){const m=o.layers,w=this.controlOption.layers;this.setLayers(m,w,!1)}if(o.rightLayers){const m=o.rightLayers,w=this.controlOption.rightLayers;this.setLayers(m,w,!0)}this.controlOption=f,this.updateMask()}registerEvent(){this.container.addEventListener("mousedown",this.move),this.container.addEventListener("touchstart",this.move),this.mapsService.on("camerachange",this.updateMask)}unRegisterEvent(){var o;this.container.removeEventListener("mousedown",this.move),this.container.removeEventListener("touchstart",this.move),(o=this.mapsService)===null||o===void 0||o.off("camerachange",this.updateMask)}setOrientationAndRatio(o="vertical",f=.5){this.container.classList.remove("horizontal","vertical"),this.container.classList.add(o),o==="horizontal"?(this.container.style.top=f*100+"%",this.container.style.left=""):(this.container.style.left=f*100+"%",this.container.style.top="")}setLayers(o,f,m=!1){const w=o.filter(D=>f.includes(D)===!1),C=f.filter(D=>o.includes(D)===!1);this.addMaskToLayers(w,m),this.removeMaskFromLayers(C)}addMaskToLayers(o,f){o.forEach(m=>{m.updateLayerConfig({maskInside:!f}),m.addMask(this.maskLayer)})}removeMaskFromLayers(o){o.forEach(f=>{f.updateLayerConfig({maskInside:!0}),f.removeMask(this.maskLayer)})}getMaskGeoData(){const{ratio:o=.5,orientation:f="vertical"}=this.controlOption,m=f==="vertical",[w,C]=this.getBounds(),[D,B]=w,[V,re]=C;let Te;if(m){const Fe=D+(V-D)*o;Te=[[D,re],[Fe,re],[Fe,B],w,[D,re]]}else{const Fe=this.getContainerSize(),rn=this.mapsService.containerToLngLat([Fe[0],Fe[1]*o]).lat;Te=[[D,re],C,[V,rn],[D,rn],[D,re]]}return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[Te]}}]}}getContainerDOMRect(){var o;return(o=this.mapsService.getContainer())===null||o===void 0?void 0:o.getBoundingClientRect()}getContainerSize(){return this.mapsService.getSize()}getBounds(){return this.mapsService.getBounds()}addLayer(o,f=!1){const m=Array.isArray(o)?o:[o];if(f){const w=this.controlOption.rightLayers.concat(...m);this.setOptions({rightLayers:w})}else{const w=this.controlOption.layers.concat(...m);this.setOptions({layers:w})}}removeLayer(o){const f=Array.isArray(o)?o:[o],m=this.controlOption.layers.filter(C=>f.includes(C)),w=this.controlOption.rightLayers.filter(C=>f.includes(C));this.setOptions({layers:m,rightLayers:w})}removeLayers(){this.setOptions({layers:[],rightLayers:[]})}}class DO extends null{constructor(...o){super(...o),_defineProperty(this,"disabled",void 0),_defineProperty(this,"zoomInButton",void 0),_defineProperty(this,"zoomOutButton",void 0),_defineProperty(this,"zoomNumDiv",void 0),_defineProperty(this,"zoomIn",()=>{!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}),_defineProperty(this,"zoomOut",()=>{!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}),_defineProperty(this,"updateDisabled",()=>{const f=this.mapsService;this.zoomInButton.removeAttribute("disabled"),this.zoomOutButton.removeAttribute("disabled"),(this.disabled||f.getZoom()<=f.getMinZoom())&&this.zoomOutButton.setAttribute("disabled","true"),this.controlOption.showZoom&&this.zoomNumDiv&&(this.zoomNumDiv.innerText=String(Math.floor(f.getZoom()))),(this.disabled||f.getZoom()>=f.getMaxZoom())&&this.zoomInButton.setAttribute("disabled","true")})}getDefault(o){return _objectSpread(_objectSpread({},super.getDefault(o)),{},{position:PositionType.BOTTOMRIGHT,name:"zoom",zoomInText:createL7Icon("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:createL7Icon("l7-icon-narrow"),zoomOutTitle:"Zoom out",showZoom:!1})}setOptions(o){super.setOptions(o),this.checkUpdateOption(o,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle","showZoom"])&&this.resetButtonGroup(this.container)}onAdd(){const o=DOM.create("div","l7-control-zoom");return this.resetButtonGroup(o),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),o}onRemove(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}disable(){return this.disabled=!0,this.updateDisabled(),this}enable(){return this.disabled=!1,this.updateDisabled(),this}resetButtonGroup(o){DOM.clearChildren(o),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",o,this.zoomIn),this.controlOption.showZoom&&(this.zoomNumDiv=this.createButton("0","","l7-button-control l7-control-zoom__number",o)),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",o,this.zoomOut),this.updateDisabled()}createButton(o,f,m,w,C){const D=DOM.create("button",m,w);return typeof o=="string"?D.innerHTML=o:D.append(o),D.title=f,C&&D.addEventListener("click",C),D}}class Xx extends zu.EventEmitter{get lngLat(){var o;return(o=this.popupOption.lngLat)!==null&&o!==void 0?o:{lng:0,lat:0}}set lngLat(o){this.popupOption.lngLat=o}constructor(o){super(),(0,Qt.Z)(this,"popupOption",void 0),(0,Qt.Z)(this,"mapsService",void 0),(0,Qt.Z)(this,"sceneService",void 0),(0,Qt.Z)(this,"layerService",void 0),(0,Qt.Z)(this,"scene",void 0),(0,Qt.Z)(this,"closeButton",void 0),(0,Qt.Z)(this,"container",void 0),(0,Qt.Z)(this,"content",void 0),(0,Qt.Z)(this,"contentTitle",void 0),(0,Qt.Z)(this,"contentPanel",void 0),(0,Qt.Z)(this,"tip",void 0),(0,Qt.Z)(this,"isShow",!0),(0,Qt.Z)(this,"onMouseMove",m=>{var w;const C=this.mapsService.getMapContainer(),{left:D=0,top:B=0}=(w=C==null?void 0:C.getBoundingClientRect())!==null&&w!==void 0?w:{};this.setPopupPosition(m.clientX-D,m.clientY-B)}),(0,Qt.Z)(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;const{lng:m,lat:w}=this.lngLat,{x:C,y:D}=this.mapsService.lngLatToContainer([m,w]);this.setPopupPosition(C,D)}),(0,Qt.Z)(this,"updateLngLatPositionWhenZoom",m=>{if(!this.mapsService||this.popupOption.followCursor)return;const w=m.map,C=w.getSize();C.x=C.x/2,C.y=C.y/2;const D=m.center,B=m.zoom,V=w.DE(this.lngLat,B,D);V.x=Math.round(V.x),V.y=Math.round(V.y),this.setPopupPosition(V.x,V.y,!0)}),(0,Qt.Z)(this,"onKeyDown",m=>{m.keyCode===27&&this.remove()}),(0,Qt.Z)(this,"onCloseButtonClick",m=>{m.stopPropagation&&m.stopPropagation(),this.hide()}),(0,Qt.Z)(this,"updatePosition",(m,w=!0)=>{const C=!!this.lngLat,{className:D,style:B,maxWidth:V,anchor:re,stopPropagation:Te}=this.popupOption;if(!this.mapsService||!C||!this.content)return;const Ae=this.mapsService.getMarkerContainer();if(!this.container&&Ae&&(this.container=Ie.SO.create("div",`l7-popup ${D!=null?D:""} ${this.isShow?"":"l7-popup-hide"}`,Ae),B&&this.container.setAttribute("style",B),this.tip=Ie.SO.create("div","l7-popup-tip",this.container),this.container.appendChild(this.content),Te&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(Fe=>{this.container.addEventListener(Fe,Mt=>{Mt.stopPropagation()})}),this.container.style.whiteSpace="nowrap"),w?this.updateLngLatPositionWhenZoom(m):this.updateLngLatPosition(),Ie.SO.setTransform(this.container,`${Ie.rQ[re]}`),(0,Ie.zi)(this.container,re,"popup"),V){const{width:Fe}=this.container.getBoundingClientRect();Fe>parseFloat(V)&&(this.container.style.width=V)}else this.container.style.removeProperty("width")}),(0,Qt.Z)(this,"updateWhenZoom",m=>{this.updatePosition(m,!0)}),(0,Qt.Z)(this,"update",()=>{this.updatePosition(null,!1)}),this.popupOption=(0,Dr.Z)((0,Dr.Z)({},this.getDefault(o!=null?o:{})),o);const{lngLat:f}=this.popupOption;f&&(this.lngLat=f)}getIsShow(){return this.isShow}addTo(o){this.mapsService=o.mapService,this.sceneService=o.sceneService,this.layerService=o.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=o,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();const{html:f,text:m,title:w}=this.popupOption;return f?this.setHTML(f):m&&this.setText(m),w&&this.setTitle(w),this.emit("open"),this}remove(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Ie.SO.remove(this.content),this.container&&(Ie.SO.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}getOptions(){return this.popupOption}setOptions(o){return this.show(),this.popupOption=(0,Dr.Z)((0,Dr.Z)({},this.popupOption),o),this.checkUpdateOption(o,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","className","style","lngLat","offsets"])&&(this.container&&(Ie.SO.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(o,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(o,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(o,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(o,["html"])&&o.html?this.setHTML(o.html):this.checkUpdateOption(o,["text"])&&o.text&&this.setText(o.text),this.checkUpdateOption(o,["lngLat"])&&o.lngLat&&this.setLnglat(o.lngLat),this}open(){return this.addTo(this.scene),this}close(){return this.remove(),this}show(){if(!this.isShow)return this.container&&Ie.SO.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}hide(){if(this.isShow)return this.container&&Ie.SO.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}setHTML(o){return this.popupOption.html=o,this.setDOMContent(o)}setText(o){return this.popupOption.text=o,this.setDOMContent(window.document.createTextNode(o))}setTitle(o){this.show(),this.popupOption.title=o,o?(this.contentTitle||(this.contentTitle=Ie.SO.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),Ie.SO.clearChildren(this.contentTitle),Ie.SO.appendElementType(this.contentTitle,o)):this.contentTitle&&(Ie.SO.remove(this.contentTitle),this.contentTitle=void 0)}panToPopup(){const{lng:o,lat:f}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([o,f]),this}setLngLat(o){return this.setLnglat(o)}setLnglat(o){return this.show(),this.lngLat=o,Array.isArray(o)&&(this.lngLat={lng:o[0],lat:o[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup()},0),this}getLnglat(){return this.lngLat}setMaxWidth(o){return this.popupOption.maxWidth=o,this.update(),this}isOpen(){return!!this.mapsService}getDefault(o){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:Ie.bV.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}setDOMContent(o){return this.show(),this.createContent(),Ie.SO.appendElementType(this.contentPanel,o),this.update(),this}updateCloseOnClick(o){const f=this.mapsService;f&&(f==null||f.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!o&&requestAnimationFrame(()=>{f==null||f.on("click",this.onCloseButtonClick)}))}updateCloseOnEsc(o){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!o&&window.addEventListener("keydown",this.onKeyDown)}updateFollowCursor(o){var f;const m=(f=this.mapsService)===null||f===void 0?void 0:f.getContainer();m&&(m==null||m.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!o&&(m==null||m.addEventListener("mousemove",this.onMouseMove)))}createContent(){if(this.content&&Ie.SO.remove(this.content),this.contentTitle=void 0,this.content=Ie.SO.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){const o=xl("l7-icon-guanbi");Ie.SO.addClass(o,"l7-popup-close-button"),this.content.appendChild(o),this.popupOption.closeButtonOffsets&&(o.style.right=this.popupOption.closeButtonOffsets[0]+"px",o.style.top=this.popupOption.closeButtonOffsets[1]+"px"),o.setAttribute("aria-label","Close popup"),o.addEventListener("click",()=>{this.hide()}),o.addEventListener("pointerup",f=>{f.stopPropagation()}),o.addEventListener("pointerdown",f=>{f.stopPropagation()}),this.closeButton=o}else this.closeButton=void 0;this.contentPanel=Ie.SO.create("div","l7-popup-content__panel",this.content)}setPopupPosition(o,f,m=!1){if(this.container){const{offsets:w}=this.popupOption;this.container.style.left=o+w[0]+"px",this.container.style.top=f-w[1]+"px",m?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}checkUpdateOption(o,f){return f.some(m=>m in o)}}const{get:Yx}=Ie.lodashUtil;class Jl extends null{constructor(...o){super(...o),_defineProperty(this,"layerClickCountByFrame",0),_defineProperty(this,"layerConfigMap",new WeakMap),_defineProperty(this,"displayFeatureInfo",void 0),_defineProperty(this,"onLayerClick",(f,m)=>{requestAnimationFrame(()=>{if(this.popupOption.closeOnClick&&this.layerClickCountByFrame++,this.isShow&&this.isSameFeature(f,m.featureId))this.hide();else{const{title:w,content:C}=this.getLayerInfoFrag(f,m);this.setDOMContent(C),this.setLnglat(m.lngLat),this.setTitle(w),this.setDisplayFeatureInfo({layer:f,featureId:m.featureId}),this.show()}})}),_defineProperty(this,"onSceneClick",()=>{this.layerClickCountByFrame=0,requestAnimationFrame(()=>{this.layerClickCountByFrame||this.hide()})}),_defineProperty(this,"onLayerHide",()=>{this.hide(),this.setDisplayFeatureInfo(void 0)}),_defineProperty(this,"updateCloseOnClick",()=>{})}get layerConfigItems(){var o;const{config:f,items:m}=this.popupOption;return(o=f!=null?f:m)!==null&&o!==void 0?o:[]}addTo(o){return super.addTo(o),this.bindLayerEvent(),this.hide(),this}remove(){return super.remove(),this.unbindLayerEvent(),this}setOptions(o){this.unbindLayerEvent();const f=_objectSpread({},o),m=f.trigger||this.popupOption.trigger,w=f.items||this.popupOption.items,C=(w==null?void 0:w.length)===0;f.followCursor=m==="hover"&&!C;const D=this.isShow;return super.setOptions(f),this.bindLayerEvent(),(C||!D)&&this.hide(),this}getDefault(o){const f=o.trigger==="hover";return _objectSpread(_objectSpread({},super.getDefault(o)),{},{trigger:"hover",followCursor:f,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}bindLayerEvent(){const{trigger:o,closeOnClick:f}=this.popupOption;this.layerConfigItems.forEach(m=>{var w;const C=this.getLayerByConfig(m);if(!C)return;const D=_objectSpread({},m);if(o==="hover"){const Te=this.onLayerMouseMove.bind(this,C),Ae=this.onLayerMouseOut.bind(this,C);D.onMouseMove=Te,D.onMouseOut=Ae,C==null||C.on("mousemove",Te),C==null||C.on("mouseout",Ae)}else{var B;const Te=this.onLayerClick.bind(this,C);D.onClick=Te,C==null||C.on("click",Te);const Ae=(B=this.mapsService)===null||B===void 0?void 0:B.getMapContainer();Ae&&f&&Ae.addEventListener("click",this.onSceneClick)}const V=C==null||(w=C.getSource)===null||w===void 0?void 0:w.call(C),re=this.onSourceUpdate.bind(this);V==null||V.on("update",re),D.onSourceUpdate=re,this.layerConfigMap.set(C,D)})}unbindLayerEvent(){this.layerConfigItems.forEach(o=>{var f;const m=this.getLayerByConfig(o),w=m&&this.layerConfigMap.get(m);if(!w)return;const{onMouseMove:C,onMouseOut:D,onClick:B,onSourceUpdate:V}=w;if(C&&m.off("mousemove",C),D&&m.off("mouseout",D),B&&m.off("click",B),V){var re;m==null||(re=m.getSource())===null||re===void 0||re.off("update",V)}const Te=(f=this.mapsService)===null||f===void 0?void 0:f.getMapContainer();Te&&Te.removeEventListener("click",this.onSceneClick)})}onLayerMouseMove(o,f){if(!this.isSameFeature(o,f.featureId)){const{title:m,content:w}=this.getLayerInfoFrag(o,f);this.setDOMContent(w),this.setTitle(m),this.setDisplayFeatureInfo({layer:o,featureId:f.featureId}),this.show()}}onLayerMouseOut(o,f){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}onSourceUpdate(){this.hide(),this.setDisplayFeatureInfo(void 0)}getLayerInfoFrag(o,f){const m=this.layerConfigMap.get(o);let w;const C=document.createDocumentFragment();if(m){let D=f.feature;D.type==="Feature"&&"properties"in D&&"geometry"in D&&(D=D.properties);const{title:B,fields:V,customContent:re}=m;if(B){w=document.createDocumentFragment();const Te=B instanceof Function?B(D):B;DOM.appendElementType(w,Te)}if(re){const Te=re instanceof Function?re(D):re;DOM.appendElementType(C,Te)}else V!=null&&V.length&&(V==null||V.forEach(Te=>{var Ae,Fe;const{field:Mt,formatField:rn,formatValue:In,getValue:ar}=typeof Te=="string"?{field:Te}:Te,Cr=DOM.create("div","l7-layer-popup__row"),vr=ar?ar(f.feature):Yx(D,Mt),qr=(Ae=rn instanceof Function?rn(Mt,D):rn)!==null&&Ae!==void 0?Ae:Mt;let ri=(Fe=In instanceof Function?In(vr,D):In)!==null&&Fe!==void 0?Fe:vr;const po=DOM.create("span","l7-layer-popup__key",Cr);DOM.appendElementType(po,qr),DOM.appendElementType(po,document.createTextNode("\uFF1A"));const ho=DOM.create("span","l7-layer-popup__value",Cr);Array.isArray(ri)&&ri.every(Xr=>!(Xr instanceof Object))&&(ri=ri.map(Xr=>String(Xr)).join(",")),DOM.appendElementType(ho,ri),C.appendChild(Cr)}))}return{title:w,content:C}}getLayerByConfig(o){const f=o.layer;if(f instanceof Object)return f;if(typeof f=="string")return this.layerService.getLayer(f)||this.layerService.getLayerByName(f)}isSameFeature(o,f){const m=this.displayFeatureInfo;return m&&o===m.layer&&f===m.featureId}setDisplayFeatureInfo(o){const f=this.displayFeatureInfo;f&&f.layer.off("hide",this.onLayerHide),o&&o.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=o}}function IS(a,o){var f=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,m=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(f||m)&&(o||(o=document),!!o)){var w=o.head||o.getElementsByTagName("head")[0];if(!w){w=o.createElement("head");var C=o.body||o.getElementsByTagName("body")[0];C?C.parentNode.insertBefore(w,C):o.documentElement.appendChild(w)}var D=o.createElement("style");return D.type="text/css",D.styleSheet?D.styleSheet.cssText=a:D.appendChild(o.createTextNode(a)),w.appendChild(D),D}}IS(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}
.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}
.l7-control-container .l7-column {
  flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  align-items: flex-start;
}
.l7-popper.l7-popper-end {
  align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow-x: hidden;
  overflow-y: auto;
}
.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}
.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}
.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}
.l7-control-scale {
  display: flex;
  flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}
.l7-control-swipe_hide {
  display: none;
}
.l7-control-swipe:before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}
.l7-control-swipe.horizontal:before {
  top: 50%;
  right: -5000px;
  bottom: auto;
  left: -5000px;
  width: auto;
  height: 4px;
}
.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}
.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}
.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}
.l7-control-swipe:after,
.l7-control-swipe__button:before,
.l7-control-swipe__button:after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentColor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}
.l7-control-swipe__button:after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}
.l7-control-swipe__button:before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);var DS=L(81550),Ff=L.n(DS),LO=class{constructor(a,o){const{buffer:f,offset:m,stride:w,normalized:C,size:D,divisor:B}=o;this.buffer=f,this.attribute={buffer:f.get(),offset:m||0,stride:w||0,normalized:C||!1,divisor:B||0},D&&(this.attribute.size=D)}get(){return this.attribute}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},NO={[Se.gl.POINTS]:"points",[Se.gl.LINES]:"lines",[Se.gl.LINE_LOOP]:"line loop",[Se.gl.LINE_STRIP]:"line strip",[Se.gl.TRIANGLES]:"triangles",[Se.gl.TRIANGLE_FAN]:"triangle fan",[Se.gl.TRIANGLE_STRIP]:"triangle strip"},LS={[Se.gl.STATIC_DRAW]:"static",[Se.gl.DYNAMIC_DRAW]:"dynamic",[Se.gl.STREAM_DRAW]:"stream"},D0={[Se.gl.BYTE]:"int8",[Se.gl.INT]:"int32",[Se.gl.UNSIGNED_BYTE]:"uint8",[Se.gl.UNSIGNED_SHORT]:"uint16",[Se.gl.UNSIGNED_INT]:"uint32",[Se.gl.FLOAT]:"float"},FO={[Se.gl.ALPHA]:"alpha",[Se.gl.LUMINANCE]:"luminance",[Se.gl.LUMINANCE_ALPHA]:"luminance alpha",[Se.gl.RGB]:"rgb",[Se.gl.RGBA]:"rgba",[Se.gl.RGBA4]:"rgba4",[Se.gl.RGB5_A1]:"rgb5 a1",[Se.gl.RGB565]:"rgb565",[Se.gl.DEPTH_COMPONENT]:"depth",[Se.gl.DEPTH_STENCIL]:"depth stencil"},BO={[Se.gl.DONT_CARE]:"dont care",[Se.gl.NICEST]:"nice",[Se.gl.FASTEST]:"fast"},NS={[Se.gl.NEAREST]:"nearest",[Se.gl.LINEAR]:"linear",[Se.gl.LINEAR_MIPMAP_LINEAR]:"mipmap",[Se.gl.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[Se.gl.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[Se.gl.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},gv={[Se.gl.REPEAT]:"repeat",[Se.gl.CLAMP_TO_EDGE]:"clamp",[Se.gl.MIRRORED_REPEAT]:"mirror"},ka={[Se.gl.NONE]:"none",[Se.gl.BROWSER_DEFAULT_WEBGL]:"browser"},FS={[Se.gl.NEVER]:"never",[Se.gl.ALWAYS]:"always",[Se.gl.LESS]:"less",[Se.gl.LEQUAL]:"lequal",[Se.gl.GREATER]:"greater",[Se.gl.GEQUAL]:"gequal",[Se.gl.EQUAL]:"equal",[Se.gl.NOTEQUAL]:"notequal"},BS={[Se.gl.FUNC_ADD]:"add",[Se.gl.MIN_EXT]:"min",[Se.gl.MAX_EXT]:"max",[Se.gl.FUNC_SUBTRACT]:"subtract",[Se.gl.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},N1={[Se.gl.ZERO]:"zero",[Se.gl.ONE]:"one",[Se.gl.SRC_COLOR]:"src color",[Se.gl.ONE_MINUS_SRC_COLOR]:"one minus src color",[Se.gl.SRC_ALPHA]:"src alpha",[Se.gl.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[Se.gl.DST_COLOR]:"dst color",[Se.gl.ONE_MINUS_DST_COLOR]:"one minus dst color",[Se.gl.DST_ALPHA]:"dst alpha",[Se.gl.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[Se.gl.CONSTANT_COLOR]:"constant color",[Se.gl.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[Se.gl.CONSTANT_ALPHA]:"constant alpha",[Se.gl.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[Se.gl.SRC_ALPHA_SATURATE]:"src alpha saturate"},Gm={[Se.gl.NEVER]:"never",[Se.gl.ALWAYS]:"always",[Se.gl.LESS]:"less",[Se.gl.LEQUAL]:"lequal",[Se.gl.GREATER]:"greater",[Se.gl.GEQUAL]:"gequal",[Se.gl.EQUAL]:"equal",[Se.gl.NOTEQUAL]:"notequal"},Wm={[Se.gl.ZERO]:"zero",[Se.gl.KEEP]:"keep",[Se.gl.REPLACE]:"replace",[Se.gl.INVERT]:"invert",[Se.gl.INCR]:"increment",[Se.gl.DECR]:"decrement",[Se.gl.INCR_WRAP]:"increment wrap",[Se.gl.DECR_WRAP]:"decrement wrap"},kO={[Se.gl.FRONT]:"front",[Se.gl.BACK]:"back"},zO=class{constructor(a,o){this.isDestroyed=!1;const{data:f,usage:m,type:w}=o;this.buffer=a.buffer({data:f,usage:LS[m||Se.gl.STATIC_DRAW],type:D0[w||Se.gl.UNSIGNED_BYTE]})}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:o}){this.buffer.subdata(a,o)}},UO=class{constructor(a,o){const{data:f,usage:m,type:w,count:C}=o;this.elements=a.elements({data:f,usage:LS[m||Se.gl.STATIC_DRAW],type:D0[w||Se.gl.UNSIGNED_BYTE],count:C})}get(){return this.elements}subData({data:a}){this.elements.subdata(a)}destroy(){}},jO=class{constructor(a,o){const{width:f,height:m,color:w,colors:C}=o,D={width:f,height:m};Array.isArray(C)&&(D.colors=C.map(B=>B.get())),w&&typeof w!="boolean"&&(D.color=w.get()),this.framebuffer=a.framebuffer(D)}get(){return this.framebuffer}destroy(){this.framebuffer.destroy()}resize({width:a,height:o}){this.framebuffer.resize(a,o)}},Mp=L(95147),zg=L(25897),VO=L(81957),Oo=L(97582),HO=L(90857),kS=HO,Cn;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.LINE_LOOP=2]="LINE_LOOP",a[a.LINE_STRIP=3]="LINE_STRIP",a[a.TRIANGLES=4]="TRIANGLES",a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN",a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC_COLOR=768]="SRC_COLOR",a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.DST_COLOR=774]="DST_COLOR",a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR",a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",a[a.FUNC_ADD=32774]="FUNC_ADD",a[a.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",a[a.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",a[a.BLEND_EQUATION=32777]="BLEND_EQUATION",a[a.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",a[a.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",a[a.BLEND_DST_RGB=32968]="BLEND_DST_RGB",a[a.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",a[a.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",a[a.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",a[a.BLEND_COLOR=32773]="BLEND_COLOR",a[a.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",a[a.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",a[a.LINE_WIDTH=2849]="LINE_WIDTH",a[a.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",a[a.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",a[a.CULL_FACE_MODE=2885]="CULL_FACE_MODE",a[a.FRONT_FACE=2886]="FRONT_FACE",a[a.DEPTH_RANGE=2928]="DEPTH_RANGE",a[a.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",a[a.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",a[a.DEPTH_FUNC=2932]="DEPTH_FUNC",a[a.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",a[a.STENCIL_FUNC=2962]="STENCIL_FUNC",a[a.STENCIL_FAIL=2964]="STENCIL_FAIL",a[a.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",a[a.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",a[a.STENCIL_REF=2967]="STENCIL_REF",a[a.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",a[a.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",a[a.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",a[a.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",a[a.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",a[a.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",a[a.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",a[a.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",a[a.VIEWPORT=2978]="VIEWPORT",a[a.SCISSOR_BOX=3088]="SCISSOR_BOX",a[a.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",a[a.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",a[a.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",a[a.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",a[a.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",a[a.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",a[a.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",a[a.RED_BITS=3410]="RED_BITS",a[a.GREEN_BITS=3411]="GREEN_BITS",a[a.BLUE_BITS=3412]="BLUE_BITS",a[a.ALPHA_BITS=3413]="ALPHA_BITS",a[a.DEPTH_BITS=3414]="DEPTH_BITS",a[a.STENCIL_BITS=3415]="STENCIL_BITS",a[a.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",a[a.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",a[a.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",a[a.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",a[a.SAMPLES=32937]="SAMPLES",a[a.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",a[a.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",a[a.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",a[a.VENDOR=7936]="VENDOR",a[a.RENDERER=7937]="RENDERER",a[a.VERSION=7938]="VERSION",a[a.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",a[a.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",a[a.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",a[a.STATIC_DRAW=35044]="STATIC_DRAW",a[a.STREAM_DRAW=35040]="STREAM_DRAW",a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.BUFFER_SIZE=34660]="BUFFER_SIZE",a[a.BUFFER_USAGE=34661]="BUFFER_USAGE",a[a.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",a[a.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",a[a.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",a[a.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",a[a.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",a[a.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",a[a.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",a[a.CULL_FACE=2884]="CULL_FACE",a[a.FRONT=1028]="FRONT",a[a.BACK=1029]="BACK",a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK",a[a.BLEND=3042]="BLEND",a[a.DEPTH_TEST=2929]="DEPTH_TEST",a[a.DITHER=3024]="DITHER",a[a.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",a[a.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",a[a.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",a[a.SCISSOR_TEST=3089]="SCISSOR_TEST",a[a.STENCIL_TEST=2960]="STENCIL_TEST",a[a.NO_ERROR=0]="NO_ERROR",a[a.INVALID_ENUM=1280]="INVALID_ENUM",a[a.INVALID_VALUE=1281]="INVALID_VALUE",a[a.INVALID_OPERATION=1282]="INVALID_OPERATION",a[a.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",a[a.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",a[a.CW=2304]="CW",a[a.CCW=2305]="CCW",a[a.DONT_CARE=4352]="DONT_CARE",a[a.FASTEST=4353]="FASTEST",a[a.NICEST=4354]="NICEST",a[a.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",a[a.BYTE=5120]="BYTE",a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.SHORT=5122]="SHORT",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.INT=5124]="INT",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.FLOAT=5126]="FLOAT",a[a.DOUBLE=5130]="DOUBLE",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.ALPHA=6406]="ALPHA",a[a.RGB=6407]="RGB",a[a.RGBA=6408]="RGBA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",a[a.VERTEX_SHADER=35633]="VERTEX_SHADER",a[a.COMPILE_STATUS=35713]="COMPILE_STATUS",a[a.DELETE_STATUS=35712]="DELETE_STATUS",a[a.LINK_STATUS=35714]="LINK_STATUS",a[a.VALIDATE_STATUS=35715]="VALIDATE_STATUS",a[a.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",a[a.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",a[a.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",a[a.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",a[a.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",a[a.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",a[a.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",a[a.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",a[a.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",a[a.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",a[a.SHADER_TYPE=35663]="SHADER_TYPE",a[a.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",a[a.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",a[a.NEVER=512]="NEVER",a[a.ALWAYS=519]="ALWAYS",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.GEQUAL=518]="GEQUAL",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.KEEP=7680]="KEEP",a[a.REPLACE=7681]="REPLACE",a[a.INCR=7682]="INCR",a[a.DECR=7683]="DECR",a[a.INVERT=5386]="INVERT",a[a.INCR_WRAP=34055]="INCR_WRAP",a[a.DECR_WRAP=34056]="DECR_WRAP",a[a.NEAREST=9728]="NEAREST",a[a.LINEAR=9729]="LINEAR",a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",a[a.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",a[a.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",a[a.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",a[a.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE=5890]="TEXTURE",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a[a.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",a[a.TEXTURE0=33984]="TEXTURE0",a[a.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",a[a.REPEAT=10497]="REPEAT",a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a[a.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",a[a.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",a[a.FLOAT_VEC2=35664]="FLOAT_VEC2",a[a.FLOAT_VEC3=35665]="FLOAT_VEC3",a[a.FLOAT_VEC4=35666]="FLOAT_VEC4",a[a.INT_VEC2=35667]="INT_VEC2",a[a.INT_VEC3=35668]="INT_VEC3",a[a.INT_VEC4=35669]="INT_VEC4",a[a.BOOL=35670]="BOOL",a[a.BOOL_VEC2=35671]="BOOL_VEC2",a[a.BOOL_VEC3=35672]="BOOL_VEC3",a[a.BOOL_VEC4=35673]="BOOL_VEC4",a[a.FLOAT_MAT2=35674]="FLOAT_MAT2",a[a.FLOAT_MAT3=35675]="FLOAT_MAT3",a[a.FLOAT_MAT4=35676]="FLOAT_MAT4",a[a.SAMPLER_2D=35678]="SAMPLER_2D",a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE",a[a.LOW_FLOAT=36336]="LOW_FLOAT",a[a.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",a[a.HIGH_FLOAT=36338]="HIGH_FLOAT",a[a.LOW_INT=36339]="LOW_INT",a[a.MEDIUM_INT=36340]="MEDIUM_INT",a[a.HIGH_INT=36341]="HIGH_INT",a[a.FRAMEBUFFER=36160]="FRAMEBUFFER",a[a.RENDERBUFFER=36161]="RENDERBUFFER",a[a.RGBA4=32854]="RGBA4",a[a.RGB5_A1=32855]="RGB5_A1",a[a.RGB565=36194]="RGB565",a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",a[a.STENCIL_INDEX=6401]="STENCIL_INDEX",a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a[a.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",a[a.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",a[a.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",a[a.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",a[a.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",a[a.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",a[a.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",a[a.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",a[a.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",a[a.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",a[a.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",a[a.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",a[a.NONE=0]="NONE",a[a.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",a[a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",a[a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",a[a.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",a[a.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",a[a.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",a[a.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",a[a.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",a[a.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",a[a.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",a[a.READ_BUFFER=3074]="READ_BUFFER",a[a.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",a[a.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",a[a.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",a[a.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",a[a.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",a[a.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",a[a.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",a[a.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",a[a.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",a[a.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",a[a.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",a[a.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",a[a.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",a[a.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",a[a.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",a[a.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",a[a.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",a[a.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",a[a.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",a[a.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",a[a.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",a[a.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",a[a.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",a[a.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",a[a.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",a[a.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",a[a.RED=6403]="RED",a[a.RGB8=32849]="RGB8",a[a.RGBA8=32856]="RGBA8",a[a.RGB10_A2=32857]="RGB10_A2",a[a.TEXTURE_3D=32879]="TEXTURE_3D",a[a.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",a[a.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",a[a.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",a[a.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",a[a.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",a[a.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",a[a.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",a[a.SRGB=35904]="SRGB",a[a.SRGB8=35905]="SRGB8",a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",a[a.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",a[a.RGBA32F=34836]="RGBA32F",a[a.RGB32F=34837]="RGB32F",a[a.RGBA16F=34842]="RGBA16F",a[a.RGB16F=34843]="RGB16F",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F",a[a.RGB9_E5=35901]="RGB9_E5",a[a.RGBA32UI=36208]="RGBA32UI",a[a.RGB32UI=36209]="RGB32UI",a[a.RGBA16UI=36214]="RGBA16UI",a[a.RGB16UI=36215]="RGB16UI",a[a.RGBA8UI=36220]="RGBA8UI",a[a.RGB8UI=36221]="RGB8UI",a[a.RGBA32I=36226]="RGBA32I",a[a.RGB32I=36227]="RGB32I",a[a.RGBA16I=36232]="RGBA16I",a[a.RGB16I=36233]="RGB16I",a[a.RGBA8I=36238]="RGBA8I",a[a.RGB8I=36239]="RGB8I",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.R8=33321]="R8",a[a.RG8=33323]="RG8",a[a.R16F=33325]="R16F",a[a.R32F=33326]="R32F",a[a.RG16F=33327]="RG16F",a[a.RG32F=33328]="RG32F",a[a.R8I=33329]="R8I",a[a.R8UI=33330]="R8UI",a[a.R16I=33331]="R16I",a[a.R16UI=33332]="R16UI",a[a.R32I=33333]="R32I",a[a.R32UI=33334]="R32UI",a[a.RG8I=33335]="RG8I",a[a.RG8UI=33336]="RG8UI",a[a.RG16I=33337]="RG16I",a[a.RG16UI=33338]="RG16UI",a[a.RG32I=33339]="RG32I",a[a.RG32UI=33340]="RG32UI",a[a.R8_SNORM=36756]="R8_SNORM",a[a.RG8_SNORM=36757]="RG8_SNORM",a[a.RGB8_SNORM=36758]="RGB8_SNORM",a[a.RGBA8_SNORM=36759]="RGBA8_SNORM",a[a.RGB10_A2UI=36975]="RGB10_A2UI",a[a.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",a[a.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.HALF_FLOAT=5131]="HALF_FLOAT",a[a.RG=33319]="RG",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",a[a.CURRENT_QUERY=34917]="CURRENT_QUERY",a[a.QUERY_RESULT=34918]="QUERY_RESULT",a[a.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",a[a.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",a[a.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",a[a.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",a[a.DRAW_BUFFER0=34853]="DRAW_BUFFER0",a[a.DRAW_BUFFER1=34854]="DRAW_BUFFER1",a[a.DRAW_BUFFER2=34855]="DRAW_BUFFER2",a[a.DRAW_BUFFER3=34856]="DRAW_BUFFER3",a[a.DRAW_BUFFER4=34857]="DRAW_BUFFER4",a[a.DRAW_BUFFER5=34858]="DRAW_BUFFER5",a[a.DRAW_BUFFER6=34859]="DRAW_BUFFER6",a[a.DRAW_BUFFER7=34860]="DRAW_BUFFER7",a[a.DRAW_BUFFER8=34861]="DRAW_BUFFER8",a[a.DRAW_BUFFER9=34862]="DRAW_BUFFER9",a[a.DRAW_BUFFER10=34863]="DRAW_BUFFER10",a[a.DRAW_BUFFER11=34864]="DRAW_BUFFER11",a[a.DRAW_BUFFER12=34865]="DRAW_BUFFER12",a[a.DRAW_BUFFER13=34866]="DRAW_BUFFER13",a[a.DRAW_BUFFER14=34867]="DRAW_BUFFER14",a[a.DRAW_BUFFER15=34868]="DRAW_BUFFER15",a[a.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",a[a.SAMPLER_3D=35679]="SAMPLER_3D",a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",a[a.MAX_SAMPLES=36183]="MAX_SAMPLES",a[a.SAMPLER_BINDING=35097]="SAMPLER_BINDING",a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",a[a.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",a[a.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",a[a.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",a[a.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",a[a.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",a[a.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",a[a.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",a[a.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",a[a.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",a[a.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",a[a.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",a[a.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",a[a.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",a[a.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",a[a.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",a[a.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",a[a.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",a[a.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",a[a.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",a[a.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",a[a.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",a[a.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",a[a.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",a[a.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",a[a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",a[a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",a[a.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",a[a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",a[a.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",a[a.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",a[a.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",a[a.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",a[a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",a[a.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",a[a.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",a[a.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",a[a.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",a[a.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",a[a.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",a[a.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",a[a.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",a[a.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",a[a.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",a[a.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",a[a.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",a[a.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",a[a.UNIFORM_TYPE=35383]="UNIFORM_TYPE",a[a.UNIFORM_SIZE=35384]="UNIFORM_SIZE",a[a.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",a[a.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",a[a.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",a[a.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",a[a.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",a[a.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",a[a.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",a[a.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",a[a.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",a[a.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",a[a.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",a[a.OBJECT_TYPE=37138]="OBJECT_TYPE",a[a.SYNC_CONDITION=37139]="SYNC_CONDITION",a[a.SYNC_STATUS=37140]="SYNC_STATUS",a[a.SYNC_FLAGS=37141]="SYNC_FLAGS",a[a.SYNC_FENCE=37142]="SYNC_FENCE",a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",a[a.UNSIGNALED=37144]="UNSIGNALED",a[a.SIGNALED=37145]="SIGNALED",a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",a[a.WAIT_FAILED=37149]="WAIT_FAILED",a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",a[a.COLOR=6144]="COLOR",a[a.DEPTH=6145]="DEPTH",a[a.STENCIL=6146]="STENCIL",a[a.MIN=32775]="MIN",a[a.MAX=32776]="MAX",a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",a[a.STREAM_READ=35041]="STREAM_READ",a[a.STREAM_COPY=35042]="STREAM_COPY",a[a.STATIC_READ=35045]="STATIC_READ",a[a.STATIC_COPY=35046]="STATIC_COPY",a[a.DYNAMIC_READ=35049]="DYNAMIC_READ",a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY",a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",a[a.INVALID_INDEX=4294967295]="INVALID_INDEX",a[a.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",a[a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",a[a.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",a[a.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",a[a.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",a[a.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",a[a.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a[a.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",a[a.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",a[a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",a[a.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",a[a.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",a[a.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",a[a.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",a[a.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",a[a.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",a[a.RGBA32F_EXT=34836]="RGBA32F_EXT",a[a.RGB32F_EXT=34837]="RGB32F_EXT",a[a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",a[a.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",a[a.MIN_EXT=32775]="MIN_EXT",a[a.MAX_EXT=32776]="MAX_EXT",a[a.SRGB_EXT=35904]="SRGB_EXT",a[a.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",a[a.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",a[a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",a[a.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",a[a.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",a[a.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",a[a.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",a[a.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",a[a.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",a[a.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",a[a.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",a[a.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",a[a.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",a[a.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",a[a.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",a[a.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",a[a.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",a[a.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",a[a.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",a[a.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",a[a.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",a[a.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",a[a.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",a[a.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",a[a.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",a[a.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",a[a.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",a[a.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",a[a.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",a[a.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",a[a.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",a[a.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",a[a.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",a[a.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",a[a.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",a[a.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",a[a.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",a[a.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",a[a.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",a[a.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",a[a.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",a[a.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",a[a.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",a[a.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",a[a.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",a[a.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(Cn||(Cn={}));var Ar;(function(a){a[a.Buffer=0]="Buffer",a[a.Texture=1]="Texture",a[a.RenderTarget=2]="RenderTarget",a[a.Sampler=3]="Sampler",a[a.Program=4]="Program",a[a.Bindings=5]="Bindings",a[a.InputLayout=6]="InputLayout",a[a.RenderPipeline=7]="RenderPipeline",a[a.ComputePipeline=8]="ComputePipeline",a[a.Readback=9]="Readback",a[a.QueryPool=10]="QueryPool",a[a.RenderBundle=11]="RenderBundle"})(Ar||(Ar={}));var os;(function(a){a[a.NEVER=512]="NEVER",a[a.LESS=513]="LESS",a[a.EQUAL=514]="EQUAL",a[a.LEQUAL=515]="LEQUAL",a[a.GREATER=516]="GREATER",a[a.NOTEQUAL=517]="NOTEQUAL",a[a.GEQUAL=518]="GEQUAL",a[a.ALWAYS=519]="ALWAYS"})(os||(os={}));var m_;(function(a){a[a.CCW=2305]="CCW",a[a.CW=2304]="CW"})(m_||(m_={}));var ud;(function(a){a[a.NONE=0]="NONE",a[a.FRONT=1]="FRONT",a[a.BACK=2]="BACK",a[a.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(ud||(ud={}));var hs;(function(a){a[a.ZERO=0]="ZERO",a[a.ONE=1]="ONE",a[a.SRC=768]="SRC",a[a.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",a[a.DST=774]="DST",a[a.ONE_MINUS_DST=775]="ONE_MINUS_DST",a[a.SRC_ALPHA=770]="SRC_ALPHA",a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",a[a.DST_ALPHA=772]="DST_ALPHA",a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",a[a.CONST=32769]="CONST",a[a.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(hs||(hs={}));var Bf;(function(a){a[a.ADD=32774]="ADD",a[a.SUBSTRACT=32778]="SUBSTRACT",a[a.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",a[a.MIN=32775]="MIN",a[a.MAX=32776]="MAX"})(Bf||(Bf={}));var fh;(function(a){a[a.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",a[a.REPEAT=1]="REPEAT",a[a.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(fh||(fh={}));var Du;(function(a){a[a.POINT=0]="POINT",a[a.BILINEAR=1]="BILINEAR"})(Du||(Du={}));var qc;(function(a){a[a.NO_MIP=0]="NO_MIP",a[a.NEAREST=1]="NEAREST",a[a.LINEAR=2]="LINEAR"})(qc||(qc={}));var gc;(function(a){a[a.POINTS=0]="POINTS",a[a.TRIANGLES=1]="TRIANGLES",a[a.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",a[a.LINES=3]="LINES",a[a.LINE_STRIP=4]="LINE_STRIP"})(gc||(gc={}));var ca;(function(a){a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(ca||(ca={}));var Rp;(function(a){a[a.STATIC=1]="STATIC",a[a.DYNAMIC=2]="DYNAMIC"})(Rp||(Rp={}));var Ih;(function(a){a[a.VERTEX=1]="VERTEX",a[a.INSTANCE=2]="INSTANCE"})(Ih||(Ih={}));var zS;(function(a){a.LOADED="loaded"})(zS||(zS={}));var ds;(function(a){a[a.TEXTURE_2D=0]="TEXTURE_2D",a[a.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",a[a.TEXTURE_3D=2]="TEXTURE_3D",a[a.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(ds||(ds={}));var Xf;(function(a){a[a.SAMPLED=1]="SAMPLED",a[a.RENDER_TARGET=2]="RENDER_TARGET",a[a.STORAGE=4]="STORAGE"})(Xf||(Xf={}));var gf;(function(a){a[a.NONE=0]="NONE",a[a.RED=1]="RED",a[a.GREEN=2]="GREEN",a[a.BLUE=4]="BLUE",a[a.ALPHA=8]="ALPHA",a[a.RGB=7]="RGB",a[a.ALL=15]="ALL"})(gf||(gf={}));var xu;(function(a){a[a.KEEP=7680]="KEEP",a[a.ZERO=0]="ZERO",a[a.REPLACE=7681]="REPLACE",a[a.INVERT=5386]="INVERT",a[a.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",a[a.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",a[a.INCREMENT_WRAP=34055]="INCREMENT_WRAP",a[a.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(xu||(xu={}));function Dh(a,o,f,m){var w=ds.TEXTURE_2D,C=1,D=Xf.SAMPLED;return{dimension:w,format:a,width:o,height:f,depthOrArrayLayers:C,mipLevelCount:m,usage:D}}var Sl;(function(a){a[a.Float=0]="Float",a[a.UnfilterableFloat=1]="UnfilterableFloat",a[a.Uint=2]="Uint",a[a.Sint=3]="Sint",a[a.Depth=4]="Depth"})(Sl||(Sl={}));var Gd;(function(a){a[a.LOWER_LEFT=0]="LOWER_LEFT",a[a.UPPER_LEFT=1]="UPPER_LEFT"})(Gd||(Gd={}));var em;(function(a){a[a.NEGATIVE_ONE=0]="NEGATIVE_ONE",a[a.ZERO=1]="ZERO"})(em||(em={}));var yc;(function(a){a[a.OcclusionConservative=0]="OcclusionConservative"})(yc||(yc={}));var ii;(function(a){a[a.U8=1]="U8",a[a.U16=2]="U16",a[a.U32=3]="U32",a[a.S8=4]="S8",a[a.S16=5]="S16",a[a.S32=6]="S32",a[a.F16=7]="F16",a[a.F32=8]="F32",a[a.BC1=65]="BC1",a[a.BC2=66]="BC2",a[a.BC3=67]="BC3",a[a.BC4_UNORM=68]="BC4_UNORM",a[a.BC4_SNORM=69]="BC4_SNORM",a[a.BC5_UNORM=70]="BC5_UNORM",a[a.BC5_SNORM=71]="BC5_SNORM",a[a.U16_PACKED_5551=97]="U16_PACKED_5551",a[a.U16_PACKED_565=98]="U16_PACKED_565",a[a.D24=129]="D24",a[a.D32F=130]="D32F",a[a.D24S8=131]="D24S8",a[a.D32FS8=132]="D32FS8"})(ii||(ii={}));var Do;(function(a){a[a.R=1]="R",a[a.RG=2]="RG",a[a.RGB=3]="RGB",a[a.RGBA=4]="RGBA",a[a.A=5]="A"})(Do||(Do={}));function F1(a){return a}var Ki;(function(a){a[a.None=0]="None",a[a.Normalized=1]="Normalized",a[a.sRGB=2]="sRGB",a[a.Depth=4]="Depth",a[a.Stencil=8]="Stencil",a[a.RenderTarget=16]="RenderTarget",a[a.Luminance=32]="Luminance"})(Ki||(Ki={}));function Ko(a,o,f){return a<<16|o<<8|f}var lr;(function(a){a[a.ALPHA=Ko(ii.U8,Do.A,Ki.None)]="ALPHA",a[a.U8_LUMINANCE=Ko(ii.U8,Do.A,Ki.Luminance)]="U8_LUMINANCE",a[a.F16_LUMINANCE=Ko(ii.F16,Do.A,Ki.Luminance)]="F16_LUMINANCE",a[a.F32_LUMINANCE=Ko(ii.F32,Do.A,Ki.Luminance)]="F32_LUMINANCE",a[a.F16_R=Ko(ii.F16,Do.R,Ki.None)]="F16_R",a[a.F16_RG=Ko(ii.F16,Do.RG,Ki.None)]="F16_RG",a[a.F16_RGB=Ko(ii.F16,Do.RGB,Ki.None)]="F16_RGB",a[a.F16_RGBA=Ko(ii.F16,Do.RGBA,Ki.None)]="F16_RGBA",a[a.F32_R=Ko(ii.F32,Do.R,Ki.None)]="F32_R",a[a.F32_RG=Ko(ii.F32,Do.RG,Ki.None)]="F32_RG",a[a.F32_RGB=Ko(ii.F32,Do.RGB,Ki.None)]="F32_RGB",a[a.F32_RGBA=Ko(ii.F32,Do.RGBA,Ki.None)]="F32_RGBA",a[a.U8_R=Ko(ii.U8,Do.R,Ki.None)]="U8_R",a[a.U8_R_NORM=Ko(ii.U8,Do.R,Ki.Normalized)]="U8_R_NORM",a[a.U8_RG=Ko(ii.U8,Do.RG,Ki.None)]="U8_RG",a[a.U8_RG_NORM=Ko(ii.U8,Do.RG,Ki.Normalized)]="U8_RG_NORM",a[a.U8_RGB=Ko(ii.U8,Do.RGB,Ki.None)]="U8_RGB",a[a.U8_RGB_NORM=Ko(ii.U8,Do.RGB,Ki.Normalized)]="U8_RGB_NORM",a[a.U8_RGB_SRGB=Ko(ii.U8,Do.RGB,Ki.sRGB|Ki.Normalized)]="U8_RGB_SRGB",a[a.U8_RGBA=Ko(ii.U8,Do.RGBA,Ki.None)]="U8_RGBA",a[a.U8_RGBA_NORM=Ko(ii.U8,Do.RGBA,Ki.Normalized)]="U8_RGBA_NORM",a[a.U8_RGBA_SRGB=Ko(ii.U8,Do.RGBA,Ki.sRGB|Ki.Normalized)]="U8_RGBA_SRGB",a[a.U16_R=Ko(ii.U16,Do.R,Ki.None)]="U16_R",a[a.U16_R_NORM=Ko(ii.U16,Do.R,Ki.Normalized)]="U16_R_NORM",a[a.U16_RG_NORM=Ko(ii.U16,Do.RG,Ki.Normalized)]="U16_RG_NORM",a[a.U16_RGBA_NORM=Ko(ii.U16,Do.RGBA,Ki.Normalized)]="U16_RGBA_NORM",a[a.U16_RGBA=Ko(ii.U16,Do.RGBA,Ki.None)]="U16_RGBA",a[a.U16_RGB=Ko(ii.U16,Do.RGB,Ki.None)]="U16_RGB",a[a.U16_RG=Ko(ii.U16,Do.RG,Ki.None)]="U16_RG",a[a.U32_R=Ko(ii.U32,Do.R,Ki.None)]="U32_R",a[a.U32_RG=Ko(ii.U32,Do.RG,Ki.None)]="U32_RG",a[a.U32_RGB=Ko(ii.U32,Do.RGB,Ki.None)]="U32_RGB",a[a.U32_RGBA=Ko(ii.U32,Do.RGBA,Ki.None)]="U32_RGBA",a[a.S8_R=Ko(ii.S8,Do.R,Ki.None)]="S8_R",a[a.S8_R_NORM=Ko(ii.S8,Do.R,Ki.Normalized)]="S8_R_NORM",a[a.S8_RG_NORM=Ko(ii.S8,Do.RG,Ki.Normalized)]="S8_RG_NORM",a[a.S8_RGB_NORM=Ko(ii.S8,Do.RGB,Ki.Normalized)]="S8_RGB_NORM",a[a.S8_RGBA_NORM=Ko(ii.S8,Do.RGBA,Ki.Normalized)]="S8_RGBA_NORM",a[a.S16_R=Ko(ii.S16,Do.R,Ki.None)]="S16_R",a[a.S16_RG=Ko(ii.S16,Do.RG,Ki.None)]="S16_RG",a[a.S16_RG_NORM=Ko(ii.S16,Do.RG,Ki.Normalized)]="S16_RG_NORM",a[a.S16_RGB_NORM=Ko(ii.S16,Do.RGB,Ki.Normalized)]="S16_RGB_NORM",a[a.S16_RGBA=Ko(ii.S16,Do.RGBA,Ki.None)]="S16_RGBA",a[a.S16_RGBA_NORM=Ko(ii.S16,Do.RGBA,Ki.Normalized)]="S16_RGBA_NORM",a[a.S32_R=Ko(ii.S32,Do.R,Ki.None)]="S32_R",a[a.S32_RG=Ko(ii.S32,Do.RG,Ki.None)]="S32_RG",a[a.S32_RGB=Ko(ii.S32,Do.RGB,Ki.None)]="S32_RGB",a[a.S32_RGBA=Ko(ii.S32,Do.RGBA,Ki.None)]="S32_RGBA",a[a.U16_RGBA_5551=Ko(ii.U16_PACKED_5551,Do.RGBA,Ki.Normalized)]="U16_RGBA_5551",a[a.U16_RGB_565=Ko(ii.U16_PACKED_565,Do.RGB,Ki.Normalized)]="U16_RGB_565",a[a.BC1=Ko(ii.BC1,Do.RGBA,Ki.Normalized)]="BC1",a[a.BC1_SRGB=Ko(ii.BC1,Do.RGBA,Ki.Normalized|Ki.sRGB)]="BC1_SRGB",a[a.BC2=Ko(ii.BC2,Do.RGBA,Ki.Normalized)]="BC2",a[a.BC2_SRGB=Ko(ii.BC2,Do.RGBA,Ki.Normalized|Ki.sRGB)]="BC2_SRGB",a[a.BC3=Ko(ii.BC3,Do.RGBA,Ki.Normalized)]="BC3",a[a.BC3_SRGB=Ko(ii.BC3,Do.RGBA,Ki.Normalized|Ki.sRGB)]="BC3_SRGB",a[a.BC4_UNORM=Ko(ii.BC4_UNORM,Do.R,Ki.Normalized)]="BC4_UNORM",a[a.BC4_SNORM=Ko(ii.BC4_SNORM,Do.R,Ki.Normalized)]="BC4_SNORM",a[a.BC5_UNORM=Ko(ii.BC5_UNORM,Do.RG,Ki.Normalized)]="BC5_UNORM",a[a.BC5_SNORM=Ko(ii.BC5_SNORM,Do.RG,Ki.Normalized)]="BC5_SNORM",a[a.D24=Ko(ii.D24,Do.R,Ki.Depth)]="D24",a[a.D24_S8=Ko(ii.D24S8,Do.RG,Ki.Depth|Ki.Stencil)]="D24_S8",a[a.D32F=Ko(ii.D32F,Do.R,Ki.Depth)]="D32F",a[a.D32F_S8=Ko(ii.D32FS8,Do.RG,Ki.Depth|Ki.Stencil)]="D32F_S8",a[a.U8_RGB_RT=Ko(ii.U8,Do.RGB,Ki.RenderTarget|Ki.Normalized)]="U8_RGB_RT",a[a.U8_RGBA_RT=Ko(ii.U8,Do.RGBA,Ki.RenderTarget|Ki.Normalized)]="U8_RGBA_RT",a[a.U8_RGBA_RT_SRGB=Ko(ii.U8,Do.RGBA,Ki.RenderTarget|Ki.Normalized|Ki.sRGB)]="U8_RGBA_RT_SRGB"})(lr||(lr={}));function L0(a){return a>>>8&255}function oc(a){return a>>>16&255}function Ug(a){return a&255}function $x(a){switch(a){case ii.F32:case ii.U32:case ii.S32:return 4;case ii.U16:case ii.S16:case ii.F16:return 2;case ii.U8:case ii.S8:return 1;default:throw new Error("whoops")}}function US(a){return $x(oc(a))}function II(a){return L0(a)}function GO(a){var o=$x(oc(a)),f=L0(a);return o*f}function DI(a,o){return a&4294967040|o}function LI(a,o){return a&4294902015|o<<8}function jS(a){var o=Ug(a);if(o&Ki.Depth)return Sl.Depth;if(o&Ki.Normalized)return Sl.Float;var f=oc(a);if(f===ii.F16||f===ii.F32)return Sl.Float;if(f===ii.U8||f===ii.U16||f===ii.U32)return Sl.Uint;if(f===ii.S8||f===ii.S16||f===ii.S32)return Sl.Sint;throw new Error("whoops")}function qa(a,o){if(o===void 0&&(o=""),!a)throw new Error("Assert fail: ".concat(o))}function Kc(a){if(a!=null)return a;throw new Error("Missing object")}function qx(a,o){return a.r===o.r&&a.g===o.g&&a.b===o.b&&a.a===o.a}function VS(a,o){a.r=o.r,a.g=o.g,a.b=o.b,a.a=o.a}function HS(a){var o=a.r,f=a.g,m=a.b,w=a.a;return{r:o,g:f,b:m,a:w}}function Zm(a,o,f,m){return m===void 0&&(m=1),{r:a,g:o,b:f,a:m}}var jg=Zm(0,0,0,0),NI=Zm(0,0,0,1),WO=Zm(1,1,1,0),FI=Zm(1,1,1,1),Xm=!0;function BI(a,o){o===void 0&&(o=Xm),o&&(a[10]=-a[10],a[14]=-a[14])}function ZO(a,o){o===void 0&&(o=Xm),o&&(a[10]=-a[10],a[14]=-a[14]+1)}function XO(a,o){if(o===void 0&&(o=Xm),o)switch(a){case os.LESS:return os.GREATER;case os.LEQUAL:return os.GEQUAL;case os.GEQUAL:return os.LEQUAL;case os.GREATER:return os.LESS;default:return a}else return a}function g_(a,o){return o===void 0&&(o=Xm),o?1-a:a}function kI(a,o){return o===void 0&&(o=Xm),o?-a:a}function dj(a,o,f,m){if(m===void 0&&(m=Xm),f=XO(f,m),f===os.LESS)return a<o;if(f===os.LEQUAL)return a<=o;if(f===os.GREATER)return a>o;if(f===os.GEQUAL)return a>=o;throw new Error("whoops")}function Ym(a){return!!(a&&!(a&a-1))}function cd(a,o){return a!=null?a:o}function GS(a){return a===void 0?null:a}function zI(a,o,f){a.length=o,a.fill(f)}function B1(a,o){var f=o-1;return a+f&~f}function UI(a,o){return((a+o-1)/o|0)*o}function YO(a,o,f){for(var m=0,w=a.length;m<w;){var C=m+(w-m>>>1),D=f(o,a[C]);D<0?w=C:m=C+1}return m}function jI(a,o,f){var m=YO(a,o,f);a.splice(m,0,o)}function $O(a,o,f){return f?a|=o:a&=~o,a}function Kx(a,o){for(var f=new Array(a),m=0;m<a;m++)f[m]=o();return f}function Qx(a,o){o===void 0&&(o=1);var f=a.split(`
`);return f.map(function(m,w){return"".concat(qO(""+(o+w),4," "),"  ").concat(m)}).join(`
`)}function qO(a,o,f){for(f===void 0&&(f="0");a.length<o;)a="".concat(f).concat(a);return a}function WS(a,o){for(var f=[],m=a;m<a+o;m++)f.push(m);return f}function k1(a,o){a.blendDstFactor=o.blendDstFactor,a.blendSrcFactor=o.blendSrcFactor,a.blendMode=o.blendMode}function z1(a,o){return a===void 0&&(a={}),a.compare=o.compare,a.depthFailOp=o.depthFailOp,a.passOp=o.passOp,a.failOp=o.failOp,a.mask=o.mask,a}function ZS(a,o){return a===void 0&&(a={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),k1(a.rgbBlendState,o.rgbBlendState),k1(a.alphaBlendState,o.alphaBlendState),a.channelWriteMask=o.channelWriteMask,a}function Jx(a,o){a.length!==o.length&&(a.length=o.length);for(var f=0;f<o.length;f++)a[f]=ZS(a[f],o[f])}function KO(a,o){o.attachmentsState!==void 0&&Jx(a.attachmentsState,o.attachmentsState),a.blendConstant&&o.blendConstant&&VS(a.blendConstant,o.blendConstant),a.depthCompare=cd(o.depthCompare,a.depthCompare),a.depthWrite=cd(o.depthWrite,a.depthWrite),a.stencilWrite=cd(o.stencilWrite,a.stencilWrite),a.stencilFront&&o.stencilFront&&z1(a.stencilFront,o.stencilFront),a.stencilBack&&o.stencilBack&&z1(a.stencilBack,o.stencilBack),a.cullMode=cd(o.cullMode,a.cullMode),a.frontFace=cd(o.frontFace,a.frontFace),a.polygonOffset=cd(o.polygonOffset,a.polygonOffset)}function Vg(a){var o=Object.assign({},a);return o.attachmentsState=[],Jx(o.attachmentsState,a.attachmentsState),o.blendConstant=o.blendConstant&&HS(o.blendConstant),o.stencilFront=z1(void 0,a.stencilFront),o.stencilBack=z1(void 0,a.stencilBack),o}function QO(a,o){o.channelWriteMask!==void 0&&(a.channelWriteMask=o.channelWriteMask),o.rgbBlendMode!==void 0&&(a.rgbBlendState.blendMode=o.rgbBlendMode),o.alphaBlendMode!==void 0&&(a.alphaBlendState.blendMode=o.alphaBlendMode),o.rgbBlendSrcFactor!==void 0&&(a.rgbBlendState.blendSrcFactor=o.rgbBlendSrcFactor),o.alphaBlendSrcFactor!==void 0&&(a.alphaBlendState.blendSrcFactor=o.alphaBlendSrcFactor),o.rgbBlendDstFactor!==void 0&&(a.rgbBlendState.blendDstFactor=o.rgbBlendDstFactor),o.alphaBlendDstFactor!==void 0&&(a.alphaBlendState.blendDstFactor=o.alphaBlendDstFactor)}var Hg={blendMode:Bf.ADD,blendSrcFactor:hs.ONE,blendDstFactor:hs.ZERO},N0={attachmentsState:[{channelWriteMask:gf.ALL,rgbBlendState:Hg,alphaBlendState:Hg}],blendConstant:HS(jg),depthWrite:!0,depthCompare:os.LEQUAL,stencilWrite:!1,stencilFront:{compare:os.ALWAYS,passOp:xu.KEEP,depthFailOp:xu.KEEP,failOp:xu.KEEP},stencilBack:{compare:os.ALWAYS,passOp:xu.KEEP,depthFailOp:xu.KEEP,failOp:xu.KEEP},cullMode:ud.NONE,frontFace:m_.CCW,polygonOffset:!1};function JO(a,o){a===void 0&&(a=null),o===void 0&&(o=N0);var f=Vg(o);return a!==null&&KO(f,a),f}var e3=JO({depthCompare:os.ALWAYS,depthWrite:!1},N0);function t3(a,o){return a.attachmentsState===void 0&&(a.attachmentsState=[],Jx(a.attachmentsState,N0.attachmentsState)),QO(a.attachmentsState[0],o),a}var e2={texture:null,sampler:null,formatKind:Sl.Float,dimension:ds.TEXTURE_2D};function t0(a,o,f){if(a.length!==o.length)return!1;for(var m=0;m<a.length;m++)if(!f(a[m],o[m]))return!1;return!0}function $m(a,o){for(var f=Array(a.length),m=0;m<a.length;m++)f[m]=o(a[m]);return f}function n3(a,o){return a.texture===o.texture&&a.binding===o.binding}function XS(a,o){return a.buffer===o.buffer&&a.size===o.size&&a.binding===o.binding&&a.offset===o.offset}function t2(a,o){return a===null?o===null:o===null?!1:a.sampler===o.sampler&&a.texture===o.texture&&a.dimension===o.dimension&&a.formatKind===o.formatKind&&a.comparison===o.comparison}function r3(a,o){return a.samplerBindings=a.samplerBindings||[],a.uniformBufferBindings=a.uniformBufferBindings||[],a.storageBufferBindings=a.storageBufferBindings||[],a.storageTextureBindings=a.storageTextureBindings||[],o.samplerBindings=o.samplerBindings||[],o.uniformBufferBindings=o.uniformBufferBindings||[],o.storageBufferBindings=o.storageBufferBindings||[],o.storageTextureBindings=o.storageTextureBindings||[],!(a.samplerBindings.length!==o.samplerBindings.length||!t0(a.samplerBindings,o.samplerBindings,t2)||!t0(a.uniformBufferBindings,o.uniformBufferBindings,XS)||!t0(a.storageBufferBindings,o.storageBufferBindings,XS)||!t0(a.storageTextureBindings,o.storageTextureBindings,n3))}function y_(a,o){return a.blendMode==o.blendMode&&a.blendSrcFactor===o.blendSrcFactor&&a.blendDstFactor===o.blendDstFactor}function U1(a,o){return!(!y_(a.rgbBlendState,o.rgbBlendState)||!y_(a.alphaBlendState,o.alphaBlendState)||a.channelWriteMask!==o.channelWriteMask)}function qm(a,o){return a.compare==o.compare&&a.depthFailOp===o.depthFailOp&&a.failOp===o.failOp&&a.passOp===o.passOp&&a.mask===o.mask}function j1(a,o){return!t0(a.attachmentsState,o.attachmentsState,U1)||a.blendConstant&&o.blendConstant&&!qx(a.blendConstant,o.blendConstant)||a.stencilFront&&o.stencilFront&&!qm(a.stencilFront,o.stencilFront)||a.stencilBack&&o.stencilBack&&!qm(a.stencilBack,o.stencilBack)?!1:a.depthCompare===o.depthCompare&&a.depthWrite===o.depthWrite&&a.stencilWrite===o.stencilWrite&&a.cullMode===o.cullMode&&a.frontFace===o.frontFace&&a.polygonOffset===o.polygonOffset}function __(a,o){return a.id===o.id}function V1(a,o){return a===o}function H1(a,o){return!(a.topology!==o.topology||a.inputLayout!==o.inputLayout||a.sampleCount!==o.sampleCount||a.megaStateDescriptor&&o.megaStateDescriptor&&!j1(a.megaStateDescriptor,o.megaStateDescriptor)||!__(a.program,o.program)||!t0(a.colorAttachmentFormats,o.colorAttachmentFormats,V1)||a.depthStencilAttachmentFormat!==o.depthStencilAttachmentFormat)}function G1(a,o){return a.offset===o.offset&&a.shaderLocation===o.shaderLocation&&a.format===o.format&&a.divisor===o.divisor}function W1(a,o){return(0,Mp.Z)(a)?(0,Mp.Z)(o):(0,Mp.Z)(o)?!1:a.arrayStride===o.arrayStride&&a.stepMode===o.stepMode&&t0(a.attributes,o.attributes,G1)}function Z1(a,o){return!(a.indexBufferFormat!==o.indexBufferFormat||!t0(a.vertexBufferDescriptors,o.vertexBufferDescriptors,W1)||!__(a.program,o.program))}function X1(a,o){return a.addressModeU===o.addressModeU&&a.addressModeV===o.addressModeV&&a.minFilter===o.minFilter&&a.magFilter===o.magFilter&&a.mipmapFilter===o.mipmapFilter&&a.lodMinClamp===o.lodMinClamp&&a.lodMaxClamp===o.lodMaxClamp&&a.maxAnisotropy===o.maxAnisotropy&&a.compareFunction===o.compareFunction}function n2(a){var o=a.sampler,f=a.texture,m=a.dimension,w=a.formatKind,C=a.comparison;return{sampler:o,texture:f,dimension:m,formatKind:w,comparison:C}}function r2(a){var o=a.buffer,f=a.size,m=a.binding,w=a.offset;return{binding:m,buffer:o,offset:w,size:f}}function Y1(a){var o=a.binding,f=a.texture;return{binding:o,texture:f}}function Pp(a){var o=a.samplerBindings&&$m(a.samplerBindings,n2),f=a.uniformBufferBindings&&$m(a.uniformBufferBindings,r2),m=a.storageBufferBindings&&$m(a.storageBufferBindings,r2),w=a.storageTextureBindings&&$m(a.storageTextureBindings,Y1);return{samplerBindings:o,uniformBufferBindings:f,storageBufferBindings:m,storageTextureBindings:w,pipeline:a.pipeline}}function Ip(a){var o=a.inputLayout,f=a.program,m=a.topology,w=a.megaStateDescriptor&&Vg(a.megaStateDescriptor),C=a.colorAttachmentFormats.slice(),D=a.depthStencilAttachmentFormat,B=a.sampleCount;return{inputLayout:o,megaStateDescriptor:w,program:f,topology:m,colorAttachmentFormats:C,depthStencilAttachmentFormat:D,sampleCount:B}}function Dp(a){var o=a.shaderLocation,f=a.format,m=a.offset,w=a.divisor;return{shaderLocation:o,format:f,offset:m,divisor:w}}function YS(a){if((0,Mp.Z)(a))return a;var o=a.arrayStride,f=a.stepMode,m=$m(a.attributes,Dp);return{arrayStride:o,stepMode:f,attributes:m}}function i3(a){var o=$m(a.vertexBufferDescriptors,YS),f=a.indexBufferFormat,m=a.program;return{vertexBufferDescriptors:o,indexBufferFormat:f,program:m}}var ws,o3=/([^[]*)(\[[0-9]+\])?/;function a3(a){if(a[a.length-1]!=="]")return{name:a,length:1,isArray:!1};var o=a.match(o3);if(!o||o.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(a));return{name:o[1],length:Number(o[2])||1,isArray:!!o[2]}}function Lh(){var a=null;return function(o,f,m){var w=a!==m;return w&&(o.uniform1i(f,m),a=m),w}}function Eu(a,o,f,m){var w=null,C=null;return function(D,B,V){var re=o(V,f),Te=re.length,Ae=!1;if(w===null)w=new Float32Array(Te),C=Te,Ae=!0;else{qa(C===Te,"Uniform length cannot change.");for(var Fe=0;Fe<Te;++Fe)if(re[Fe]!==w[Fe]){Ae=!0;break}}return Ae&&(m(D,a,B,re),w.set(re)),Ae}}function Yf(a,o,f,m){a[o](f,m)}function Lp(a,o,f,m){a[o](f,!1,m)}var s3={},l3={},u3={},$1=[0];function i2(a,o,f,m){o===1&&typeof a=="boolean"&&(a=a?1:0),Number.isFinite(a)&&($1[0]=a,a=$1);var w=a.length;if(a instanceof f)return a;var C=m[w];C||(C=new f(w),m[w]=C);for(var D=0;D<w;D++)C[D]=a[D];return C}function Wd(a,o){return i2(a,o,Float32Array,s3)}function yv(a,o){return i2(a,o,Int32Array,l3)}function Gg(a,o){return i2(a,o,Uint32Array,u3)}var q1=(ws={},ws[Cn.FLOAT]=Eu.bind(null,"uniform1fv",Wd,1,Yf),ws[Cn.FLOAT_VEC2]=Eu.bind(null,"uniform2fv",Wd,2,Yf),ws[Cn.FLOAT_VEC3]=Eu.bind(null,"uniform3fv",Wd,3,Yf),ws[Cn.FLOAT_VEC4]=Eu.bind(null,"uniform4fv",Wd,4,Yf),ws[Cn.INT]=Eu.bind(null,"uniform1iv",yv,1,Yf),ws[Cn.INT_VEC2]=Eu.bind(null,"uniform2iv",yv,2,Yf),ws[Cn.INT_VEC3]=Eu.bind(null,"uniform3iv",yv,3,Yf),ws[Cn.INT_VEC4]=Eu.bind(null,"uniform4iv",yv,4,Yf),ws[Cn.BOOL]=Eu.bind(null,"uniform1iv",yv,1,Yf),ws[Cn.BOOL_VEC2]=Eu.bind(null,"uniform2iv",yv,2,Yf),ws[Cn.BOOL_VEC3]=Eu.bind(null,"uniform3iv",yv,3,Yf),ws[Cn.BOOL_VEC4]=Eu.bind(null,"uniform4iv",yv,4,Yf),ws[Cn.FLOAT_MAT2]=Eu.bind(null,"uniformMatrix2fv",Wd,4,Lp),ws[Cn.FLOAT_MAT3]=Eu.bind(null,"uniformMatrix3fv",Wd,9,Lp),ws[Cn.FLOAT_MAT4]=Eu.bind(null,"uniformMatrix4fv",Wd,16,Lp),ws[Cn.UNSIGNED_INT]=Eu.bind(null,"uniform1uiv",Gg,1,Yf),ws[Cn.UNSIGNED_INT_VEC2]=Eu.bind(null,"uniform2uiv",Gg,2,Yf),ws[Cn.UNSIGNED_INT_VEC3]=Eu.bind(null,"uniform3uiv",Gg,3,Yf),ws[Cn.UNSIGNED_INT_VEC4]=Eu.bind(null,"uniform4uiv",Gg,4,Yf),ws[Cn.FLOAT_MAT2x3]=Eu.bind(null,"uniformMatrix2x3fv",Wd,6,Lp),ws[Cn.FLOAT_MAT2x4]=Eu.bind(null,"uniformMatrix2x4fv",Wd,8,Lp),ws[Cn.FLOAT_MAT3x2]=Eu.bind(null,"uniformMatrix3x2fv",Wd,6,Lp),ws[Cn.FLOAT_MAT3x4]=Eu.bind(null,"uniformMatrix3x4fv",Wd,12,Lp),ws[Cn.FLOAT_MAT4x2]=Eu.bind(null,"uniformMatrix4x2fv",Wd,8,Lp),ws[Cn.FLOAT_MAT4x3]=Eu.bind(null,"uniformMatrix4x3fv",Wd,12,Lp),ws[Cn.SAMPLER_2D]=Lh,ws[Cn.SAMPLER_CUBE]=Lh,ws[Cn.SAMPLER_3D]=Lh,ws[Cn.SAMPLER_2D_SHADOW]=Lh,ws[Cn.SAMPLER_2D_ARRAY]=Lh,ws[Cn.SAMPLER_2D_ARRAY_SHADOW]=Lh,ws[Cn.SAMPLER_CUBE_SHADOW]=Lh,ws[Cn.INT_SAMPLER_2D]=Lh,ws[Cn.INT_SAMPLER_3D]=Lh,ws[Cn.INT_SAMPLER_CUBE]=Lh,ws[Cn.INT_SAMPLER_2D_ARRAY]=Lh,ws[Cn.UNSIGNED_INT_SAMPLER_2D]=Lh,ws[Cn.UNSIGNED_INT_SAMPLER_3D]=Lh,ws[Cn.UNSIGNED_INT_SAMPLER_CUBE]=Lh,ws[Cn.UNSIGNED_INT_SAMPLER_2D_ARRAY]=Lh,ws);function o2(a,o,f){var m=q1[f.type];if(!m)throw new Error("Unknown GLSL uniform type ".concat(f.type));return m().bind(null,a,o)}var c3={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function f3(a){return Object.prototype.toString.call(a)in c3}function b_(a,o){return"#define ".concat(a," ").concat(o)}function h3(a){var o={};return a.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(f,m,w){var C=Number(w);return o[m]=isNaN(C)?w:C,""}),o}function p3(a,o){var f=[];return a.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(m,w,C){var D=Number(w);return f.push({location:isNaN(D)?o[w]:D,name:C}),""}),f}function VI(a){var o=[],f=[];return a.replace(/\s*struct\s*(.*)\s*{((?:\s*.*\s*)*?)};/g,function(m,w,C){var D=[];return C.trim().replace(`\r
`,`
`).split(`
`).forEach(function(B){var V=__read(B.trim().split(/\s+/),2),re=V[0],Te=V[1];D.push({type:re.trim(),name:Te.replace(";","").trim()})}),f.push({type:w.trim(),uniforms:D}),""}),a.replace(/\s*uniform(?:\s+)(?:\w+)(?:\s?){([^]*?)};?/g,function(m,w){return w.trim().replace(`\r
`,`
`).split(`
`).forEach(function(C){var D=C.trim().split(" "),B=D[0]||"",V=D[1]||"",re=V.indexOf("[")>-1;if(V=V.replace(";","").replace("[","").trim(),!B.startsWith("#")){if(B){var Te=f.find(function(Mt){return B===Mt.type});if(Te)if(re)for(var Ae=function(Mt){Te.uniforms.forEach(function(rn){o.push("".concat(V,"[").concat(Mt,"].").concat(rn.name))})},Fe=0;Fe<5;Fe++)Ae(Fe);else Te.uniforms.forEach(function(Mt){o.push("".concat(V,".").concat(Mt.name))})}V&&o.push(V)}}),""}),o}function $S(a){if(a===void 0)return null;var o=/binding\s*=\s*(\d+)/.exec(a);if(o!==null){var f=parseInt(o[1],10);if(!Number.isNaN(f))return f}return null}function qS(a){var o="",f=a;return[f,o]}function _v(a,o,f,m,w){var C;m===void 0&&(m=null),w===void 0&&(w=!0);var D=a.glslVersion==="#version 100",B=o==="frag"&&((C=f.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||C===void 0?void 0:C.length)>1,V=f.replace(`\r
`,`
`).split(`
`).map(function(ho){return ho.replace(/[/][/].*$/,"")}).filter(function(ho){var Xr=!ho||/^\s+$/.test(ho);return!Xr}),re="";m!==null&&(re=Object.keys(m).map(function(ho){return b_(ho,m[ho])}).join(`
`));var Te=V.find(function(ho){return ho.startsWith("precision")})||"precision mediump float;",Ae=w?V.filter(function(ho){return!ho.startsWith("precision")}).join(`
`):V.join(`
`),Fe="";if(a.viewportOrigin===Gd.UPPER_LEFT&&(Fe+="".concat(b_("VIEWPORT_ORIGIN_TL","1"),`
`)),a.clipSpaceNearZ===em.ZERO&&(Fe+="".concat(b_("CLIPSPACE_NEAR_ZERO","1"),`
`)),a.explicitBindingLocations){var Mt=0,rn=0,In=0;Ae=Ae.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(ho,Xr,lo,za){var Ps=lo?"".concat(lo,", "):"";return"layout(".concat(Ps,"set = ").concat(Mt,", binding = ").concat(rn++,") uniform ").concat(za)}),Mt++,rn=0,qa(a.separateSamplerTextures),Ae=Ae.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(ho,Xr,lo,za,Ps){var zi=$S(lo);zi===null&&(zi=rn++);var _s=(0,Oo.CR)(qS(za),2),as=_s[0],$f=_s[1];return o==="frag"?`
layout(set = `.concat(Mt,", binding = ").concat(zi*2+0,") uniform texture").concat(as," T_").concat(Ps,`;
layout(set = `).concat(Mt,", binding = ").concat(zi*2+1,") uniform sampler").concat($f," S_").concat(Ps,";").trim():""}),Ae=Ae.replace(o==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(ho,Xr){return"layout(location = ".concat(In++,") ").concat(Xr)}),Fe+="".concat(b_("gl_VertexID","gl_VertexIndex"),`
`),Fe+="".concat(b_("gl_InstanceID","gl_InstanceIndex"),`
`),Te=Te.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var ar=0;Ae=Ae.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(ho,Xr,lo,za,Ps){var zi=$S(lo);return zi===null&&(zi=ar++),"uniform sampler".concat(za," ").concat(Ps,"; // BINDING=").concat(zi)})}if(Ae=Ae.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(ho,Xr,lo){return"SAMPLER_".concat(Xr,"(P_").concat(lo,")")}),Ae=Ae.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(ho,Xr,lo){return"PP_SAMPLER_".concat(Xr,"(P_").concat(lo,")")}),Ae=Ae.replace(/\bPU_TEXTURE\((.*?)\)/g,function(ho,Xr){return"TEXTURE(P_".concat(Xr,")")}),a.separateSamplerTextures)Ae=Ae.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(ho,Xr,lo){var za=(0,Oo.CR)(qS(Xr),2),Ps=za[0],zi=za[1];return"texture".concat(Ps," T_P_").concat(lo,", sampler").concat(zi," S_P_").concat(lo)}),Ae=Ae.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(ho,Xr,lo){return"T_".concat(lo,", S_").concat(lo)}),Ae=Ae.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(ho,Xr,lo){return"sampler".concat(Xr,"(T_").concat(lo,", S_").concat(lo,")")}),Ae=Ae.replace(/\bTEXTURE\((.*?)\)/g,function(ho,Xr){return"T_".concat(Xr)});else{var Cr=[];Ae=Ae.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(ho,Xr,lo){return"sampler".concat(Xr," P_").concat(lo)}),Ae=Ae.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(ho,Xr,lo){return lo}),Ae=Ae.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(ho,Xr,lo){return Cr.push([lo,Xr]),lo}),D&&Cr.forEach(function(ho){var Xr=(0,Oo.CR)(ho,2),lo=Xr[0],za=Xr[1];Ae=Ae.replace(new RegExp("texture\\(".concat(lo),"g"),function(){return"texture".concat(za,"(").concat(lo)})}),Ae=Ae.replace(/\bTEXTURE\((.*?)\)/g,function(ho,Xr){return Xr})}var vr="".concat(D?"":a.glslVersion,`
`).concat(D&&B?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(D&&o==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(w?Te:"",`
`).concat(Fe||"").concat(re?re+`
`:"",`
`).concat(Ae,`
`).trim();if(a.explicitBindingLocations&&o==="frag"&&(vr=vr.replace(/^\b(out)\b/g,function(ho,Xr){return"layout(location = 0) ".concat(Xr)})),D){if(o==="frag"&&(vr=vr.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(ho,Xr,lo){return"varying ".concat(Xr," ").concat(lo,`;
`)})),o==="vert"&&(vr=vr.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(ho,Xr,lo){return"varying ".concat(Xr," ").concat(lo,`;
`)}),vr=vr.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(ho,Xr,lo){return"attribute ".concat(Xr," ").concat(lo,`;
`)})),vr=vr.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(ho,Xr){return Xr.trim().replace(/^.*$/gm,function(lo){var za=lo.trim();return za.startsWith("#")?za:lo?"uniform ".concat(za):""})}),o==="frag")if(B){var qr=[];vr=vr.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(ho,Xr){return qr.push(Xr),"vec4 ".concat(Xr,`;
`)});var ri=vr.lastIndexOf("}");vr=vr.substring(0,ri)+`
    `.concat(qr.map(function(ho,Xr){return"gl_FragData[".concat(Xr,"] = ").concat(ho,`;
    `)}).join(`
`))+vr.substring(ri)}else{var po;if(vr=vr.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(ho,Xr,lo){return po=lo,"".concat(Xr," ").concat(lo,`;
`)}),po){var ri=vr.lastIndexOf("}");vr=vr.substring(0,ri)+`
  gl_FragColor = vec4(`.concat(po,`);
`)+vr.substring(ri)}}vr=vr.replace(/^\s*layout\((.*)\)/gm,"")}return vr}function HI(a,o,f,m){m===void 0&&(m=null);var w=_v(a,"vert",o,m),C=_v(a,"frag",f,m);return{vert:o,frag:f,preprocessedVert:w,preprocessedFrag:C}}var Np=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this)||this;return C.id=m,C.device=w,C.device.resourceCreationTracker!==null&&C.device.resourceCreationTracker.trackResourceCreated(C),C}return o.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},o}(kS),KS=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Ar.Bindings;var B=C.uniformBufferBindings,V=C.samplerBindings;return D.uniformBufferBindings=B||[],D.samplerBindings=V||[],D.bindingLayouts=D.createBindingLayouts(),D}return o.prototype.createBindingLayouts=function(){var f=0,m=0,w=[],C=this.uniformBufferBindings.length,D=this.samplerBindings.length;return w.push({firstUniformBuffer:f,numUniformBuffers:C,firstSampler:m,numSamplers:D}),f+=C,m+=D,{numUniformBuffers:f,numSamplers:m,bindingLayoutTables:w}},o}(Np);function Wo(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}function a2(a){var o=oc(a);switch(o){case ii.BC1:case ii.BC2:case ii.BC3:case ii.BC4_UNORM:case ii.BC4_SNORM:case ii.BC5_UNORM:case ii.BC5_SNORM:return!0;default:return!1}}function QS(a){var o=Ug(a);if(o&Ki.Normalized)return!1;var f=oc(a);return f===ii.S8||f===ii.S16||f===ii.S32||f===ii.U8||f===ii.U16||f===ii.U32}function v3(a){switch(a){case Rp.STATIC:return Cn.STATIC_DRAW;case Rp.DYNAMIC:return Cn.DYNAMIC_DRAW}}function s2(a){if(a&ca.INDEX)return Cn.ELEMENT_ARRAY_BUFFER;if(a&ca.VERTEX)return Cn.ARRAY_BUFFER;if(a&ca.UNIFORM)return Cn.UNIFORM_BUFFER}function m3(a){switch(a){case gc.TRIANGLES:return Cn.TRIANGLES;case gc.POINTS:return Cn.POINTS;case gc.TRIANGLE_STRIP:return Cn.TRIANGLE_STRIP;case gc.LINES:return Cn.LINES;case gc.LINE_STRIP:return Cn.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function g3(a){switch(a){case ii.U8:return Cn.UNSIGNED_BYTE;case ii.U16:return Cn.UNSIGNED_SHORT;case ii.U32:return Cn.UNSIGNED_INT;case ii.S8:return Cn.BYTE;case ii.S16:return Cn.SHORT;case ii.S32:return Cn.INT;case ii.F16:return Cn.HALF_FLOAT;case ii.F32:return Cn.FLOAT;default:throw new Error("whoops")}}function y3(a){switch(a){case Do.R:return 1;case Do.RG:return 2;case Do.RGB:return 3;case Do.RGBA:return 4;default:return 1}}function _3(a){var o=oc(a),f=L0(a),m=Ug(a),w=g3(o),C=y3(f),D=!!(m&Ki.Normalized);return{size:C,type:w,normalized:D}}function b3(a){switch(a){case lr.U8_R:return Cn.UNSIGNED_BYTE;case lr.U16_R:return Cn.UNSIGNED_SHORT;case lr.U32_R:return Cn.UNSIGNED_INT;default:throw new Error("whoops")}}function x_(a){switch(a){case fh.CLAMP_TO_EDGE:return Cn.CLAMP_TO_EDGE;case fh.REPEAT:return Cn.REPEAT;case fh.MIRRORED_REPEAT:return Cn.MIRRORED_REPEAT;default:throw new Error("whoops")}}function E_(a,o){if(o===qc.LINEAR&&a===Du.BILINEAR)return Cn.LINEAR_MIPMAP_LINEAR;if(o===qc.LINEAR&&a===Du.POINT)return Cn.NEAREST_MIPMAP_LINEAR;if(o===qc.NEAREST&&a===Du.BILINEAR)return Cn.LINEAR_MIPMAP_NEAREST;if(o===qc.NEAREST&&a===Du.POINT)return Cn.NEAREST_MIPMAP_NEAREST;if(o===qc.NO_MIP&&a===Du.BILINEAR)return Cn.LINEAR;if(o===qc.NO_MIP&&a===Du.POINT)return Cn.NEAREST;throw new Error("Unknown texture filter mode")}function Wg(a,o){o===void 0&&(o=0);var f=a;return f.gl_buffer_pages[o/f.pageByteSize|0]}function Zg(a){var o=a;return o.gl_texture}function l2(a){var o=a;return o.gl_sampler}function S_(a,o){a.name=o,a.__SPECTOR_Metadata={name:o}}function JS(a,o){for(var f=[];;){var m=o.exec(a);if(!m)break;f.push(m)}return f}function tm(a){return a.blendMode==Bf.ADD&&a.blendSrcFactor==hs.ONE&&a.blendDstFactor===hs.ZERO}function x3(a){switch(a){case yc.OcclusionConservative:return Cn.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function E3(a){if(a===ds.TEXTURE_2D)return Cn.TEXTURE_2D;if(a===ds.TEXTURE_2D_ARRAY)return Cn.TEXTURE_2D_ARRAY;if(a===ds.TEXTURE_CUBE_MAP)return Cn.TEXTURE_CUBE_MAP;if(a===ds.TEXTURE_3D)return Cn.TEXTURE_3D;throw new Error("whoops")}function u2(a,o,f,m){return!(a%f!==0||o%m!==0)}var S3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Ar.Buffer;var B=C.viewOrSize,V=C.usage,re=C.hint,Te=re===void 0?Rp.STATIC:re,Ae=w.uniformBufferMaxPageByteSize,Fe=w.gl,Mt=V&ca.UNIFORM;Mt||(Wo(Fe)?Fe.bindVertexArray(null):w.OES_vertex_array_object.bindVertexArrayOES(null));var rn=(0,zg.Z)(B)?B1(B,4):B1(B.byteLength,4);D.gl_buffer_pages=[];var In;if(Mt){for(var ar=rn;ar>0;)D.gl_buffer_pages.push(D.createBufferPage(Math.min(ar,Ae),V,Te)),ar-=Ae;In=Ae}else D.gl_buffer_pages.push(D.createBufferPage(rn,V,Te)),In=rn;return D.pageByteSize=In,D.byteSize=rn,D.usage=V,D.gl_target=s2(V),(0,zg.Z)(B)||D.setSubData(0,new Uint8Array(B.buffer)),Mt||(Wo(Fe)?Fe.bindVertexArray(D.device.currentBoundVAO):w.OES_vertex_array_object.bindVertexArrayOES(D.device.currentBoundVAO)),D}return o.prototype.setSubData=function(f,m,w,C){w===void 0&&(w=0),C===void 0&&(C=m.byteLength-w);for(var D=this.device.gl,B=this.pageByteSize,V=f+C,re=f,Te=f%B;re<V;){var Ae=Wo(D)?D.COPY_WRITE_BUFFER:this.gl_target,Fe=Wg(this,re);if(Fe.ubo)return;D.bindBuffer(Ae,Fe),Wo(D)?D.bufferSubData(Ae,Te,m,w,Math.min(V-re,B)):D.bufferSubData(Ae,Te,m),re+=B,Te=0,w+=B,this.device.debugGroupStatisticsBufferUpload()}},o.prototype.destroy=function(){a.prototype.destroy.call(this);for(var f=0;f<this.gl_buffer_pages.length;f++)this.gl_buffer_pages[f].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[f]);this.gl_buffer_pages=[]},o.prototype.createBufferPage=function(f,m,w){var C=this.device.gl,D=m&ca.UNIFORM;if(!Wo(C)&&D)return{ubo:!0};var B=this.device.ensureResourceExists(C.createBuffer()),V=s2(m),re=v3(w);return C.bindBuffer(V,B),C.bufferData(V,f,re),B},o}(Np),w3=function(a){(0,Oo.ZT)(o,a);function o(f){var m,w,C,D,B=f.id,V=f.device,re=f.descriptor,Te,Ae=a.call(this,{id:B,device:V})||this;Ae.type=Ar.InputLayout;var Fe=re.vertexBufferDescriptors,Mt=re.indexBufferFormat,rn=re.program;qa(Mt===lr.U16_R||Mt===lr.U32_R||Mt===null);var In=Mt!==null?b3(Mt):null,ar=Mt!==null?US(Mt):null,Cr=Ae.device.gl,vr=Ae.device.ensureResourceExists(Wo(Cr)?Cr.createVertexArray():V.OES_vertex_array_object.createVertexArrayOES());Wo(Cr)?Cr.bindVertexArray(vr):V.OES_vertex_array_object.bindVertexArrayOES(vr),Cr.bindBuffer(Cr.ARRAY_BUFFER,Wg(Ae.device.fallbackVertexBuffer));try{for(var qr=(0,Oo.XA)(re.vertexBufferDescriptors),ri=qr.next();!ri.done;ri=qr.next()){var po=ri.value,ho=po.stepMode,Xr=po.attributes;try{for(var lo=(C=void 0,(0,Oo.XA)(Xr)),za=lo.next();!za.done;za=lo.next()){var Ps=za.value,zi=Ps.shaderLocation,_s=Ps.format,as=Ps.divisor,$f=as===void 0?1:as,Yd=Wo(Cr)?zi:(Te=rn.attributes[zi])===null||Te===void 0?void 0:Te.location,$d=_3(_s);if(Ps.vertexFormat=$d,!(0,Mp.Z)(Yd)){QS(_s);var Zs=$d.size,_c=$d.type,Pc=$d.normalized;Cr.vertexAttribPointer(Yd,Zs,_c,Pc,0,0),ho===Ih.INSTANCE&&(Wo(Cr)?Cr.vertexAttribDivisor(Yd,$f):V.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(Yd,$f)),Cr.enableVertexAttribArray(Yd)}}}catch(wv){C={error:wv}}finally{try{za&&!za.done&&(D=lo.return)&&D.call(lo)}finally{if(C)throw C.error}}}}catch(wv){m={error:wv}}finally{try{ri&&!ri.done&&(w=qr.return)&&w.call(qr)}finally{if(m)throw m.error}}return Wo(Cr)?Cr.bindVertexArray(null):V.OES_vertex_array_object.bindVertexArrayOES(null),Ae.vertexBufferDescriptors=Fe,Ae.vao=vr,Ae.indexBufferFormat=Mt,Ae.indexBufferType=In,Ae.indexBufferCompByteSize=ar,Ae.program=rn,Ae}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(Wo(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},o}(Np),c2=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=f.fake,B=a.call(this,{id:m,device:w})||this;B.type=Ar.Texture,C=(0,Oo.pi)({dimension:ds.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},C);var V=B.device.gl,re,Te,Ae=B.clampmipLevelCount(C);if(B.immutable=C.usage===Xf.RENDER_TARGET,B.pixelStore=C.pixelStore,B.format=C.format,B.dimension=C.dimension,B.formatKind=jS(C.format),B.width=C.width,B.height=C.height,B.depthOrArrayLayers=C.depthOrArrayLayers,B.mipmaps=Ae>=1,!D){Te=B.device.ensureResourceExists(V.createTexture());var Fe=B.device.translateTextureType(C.format),Mt=B.device.translateTextureInternalFormat(C.format);if(B.device.setActiveTexture(V.TEXTURE0),B.device.currentTextures[0]=null,B.preprocessImage(),C.dimension===ds.TEXTURE_2D){if(re=Cn.TEXTURE_2D,V.bindTexture(re,Te),B.immutable)if(Wo(V))V.texStorage2D(re,Ae,Mt,C.width,C.height);else{var rn=(Mt===Cn.DEPTH_COMPONENT||B.isNPOT(),0);(B.format===lr.D32F||B.format===lr.D24_S8)&&!Wo(V)&&!w.WEBGL_depth_texture||(V.texImage2D(re,rn,Mt,C.width,C.height,0,Mt,Fe,null),B.mipmaps&&(B.mipmaps=!1,V.texParameteri(Cn.TEXTURE_2D,Cn.TEXTURE_MIN_FILTER,Cn.LINEAR),V.texParameteri(Cn.TEXTURE_2D,Cn.TEXTURE_WRAP_S,Cn.CLAMP_TO_EDGE),V.texParameteri(Cn.TEXTURE_2D,Cn.TEXTURE_WRAP_T,Cn.CLAMP_TO_EDGE)))}qa(C.depthOrArrayLayers===1)}else if(C.dimension===ds.TEXTURE_2D_ARRAY)re=Cn.TEXTURE_2D_ARRAY,V.bindTexture(re,Te),B.immutable&&Wo(V)&&V.texStorage3D(re,Ae,Mt,C.width,C.height,C.depthOrArrayLayers);else if(C.dimension===ds.TEXTURE_3D)re=Cn.TEXTURE_3D,V.bindTexture(re,Te),B.immutable&&Wo(V)&&V.texStorage3D(re,Ae,Mt,C.width,C.height,C.depthOrArrayLayers);else if(C.dimension===ds.TEXTURE_CUBE_MAP)re=Cn.TEXTURE_CUBE_MAP,V.bindTexture(re,Te),B.immutable&&Wo(V)&&V.texStorage2D(re,Ae,Mt,C.width,C.height),qa(C.depthOrArrayLayers===6);else throw new Error("whoops")}return B.gl_texture=Te,B.gl_target=re,B.mipLevelCount=Ae,B}return o.prototype.setImageData=function(f,m){m===void 0&&(m=0);var w=this.device.gl;a2(this.format);var C=this.gl_target===Cn.TEXTURE_3D||this.gl_target===Cn.TEXTURE_2D_ARRAY,D=this.gl_target===Cn.TEXTURE_CUBE_MAP,B=f3(f[0]);this.device.setActiveTexture(w.TEXTURE0),this.device.currentTextures[0]=null;var V=f[0],re,Te;B?(re=this.width,Te=this.height):(re=V.width,Te=V.height,this.width=re,this.height=Te),w.bindTexture(this.gl_target,this.gl_texture);var Ae=this.device.translateTextureFormat(this.format),Fe=Wo(w)?this.device.translateInternalTextureFormat(this.format):Ae,Mt=this.device.translateTextureType(this.format);this.preprocessImage();for(var rn=0;rn<this.depthOrArrayLayers;rn++){var In=f[rn],ar=this.gl_target;D&&(ar=Cn.TEXTURE_CUBE_MAP_POSITIVE_X+rn%6),this.immutable?w.texSubImage2D(ar,m,0,0,re,Te,Ae,Mt,In):Wo(w)?C?w.texImage3D(ar,m,Fe,re,Te,this.depthOrArrayLayers,0,Ae,Mt,In):w.texImage2D(ar,m,Fe,re,Te,0,Ae,Mt,In):B?w.texImage2D(ar,m,Ae,re,Te,0,Ae,Mt,In):w.texImage2D(ar,m,Ae,Ae,Mt,In)}this.mipmaps&&this.generateMipmap(C)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.gl.deleteTexture(Zg(this))},o.prototype.clampmipLevelCount=function(f){if(f.dimension===ds.TEXTURE_2D_ARRAY&&f.depthOrArrayLayers>1){var m=oc(f.format);if(m===ii.BC1)for(var w=f.width,C=f.height,D=0;D<f.mipLevelCount;D++){if(w<=2||C<=2)return D-1;w=Math.max(w/2|0,1),C=Math.max(C/2|0,1)}}return f.mipLevelCount},o.prototype.preprocessImage=function(){var f=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&f.pixelStorei(Cn.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&f.pixelStorei(Cn.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&f.pixelStorei(Cn.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},o.prototype.generateMipmap=function(f){f===void 0&&(f=!1);var m=this.device.gl;return!Wo(m)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(m.bindTexture(this.gl_target,this.gl_texture),f?(m.texParameteri(this.gl_target,Cn.TEXTURE_BASE_LEVEL,0),m.texParameteri(this.gl_target,Cn.TEXTURE_MAX_LEVEL,Math.log2(this.width)),m.texParameteri(this.gl_target,Cn.TEXTURE_MIN_FILTER,Cn.LINEAR_MIPMAP_LINEAR),m.texParameteri(this.gl_target,Cn.TEXTURE_MAG_FILTER,Cn.LINEAR)):m.texParameteri(Cn.TEXTURE_2D,Cn.TEXTURE_MIN_FILTER,Cn.NEAREST_MIPMAP_LINEAR),m.generateMipmap(this.gl_target),m.bindTexture(this.gl_target,null)),this)},o.prototype.isNPOT=function(){var f=this.device.gl;return Wo(f)?!1:!Ym(this.width)||!Ym(this.height)},o}(Np),T3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Ar.RenderTarget,D.gl_renderbuffer=null,D.texture=null;var B=D.device.gl,V=C.format,re=C.width,Te=C.height,Ae=C.sampleCount,Fe=Ae===void 0?1:Ae,Mt=C.texture,rn=!1;if((V===lr.D32F||V===lr.D24_S8)&&Mt&&!Wo(B)&&!w.WEBGL_depth_texture&&(Mt.destroy(),D.texture=null,rn=!0),!rn&&Mt)D.texture=Mt;else{D.gl_renderbuffer=D.device.ensureResourceExists(B.createRenderbuffer()),B.bindRenderbuffer(B.RENDERBUFFER,D.gl_renderbuffer);var In=D.device.translateTextureInternalFormat(V,!0);Wo(B)&&Fe>1?B.renderbufferStorageMultisample(Cn.RENDERBUFFER,Fe,In,re,Te):B.renderbufferStorage(Cn.RENDERBUFFER,In,re,Te)}return D.format=V,D.width=re,D.height=Te,D.sampleCount=Fe,D}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},o}(Np),fd;(function(a){a[a.NeedsCompile=0]="NeedsCompile",a[a.Compiling=1]="Compiling",a[a.NeedsBind=2]="NeedsBind",a[a.ReadyToUse=3]="ReadyToUse"})(fd||(fd={}));var A3=function(a){(0,Oo.ZT)(o,a);function o(f,m){var w=f.id,C=f.device,D=f.descriptor,B=a.call(this,{id:w,device:C})||this;B.rawVertexGLSL=m,B.type=Ar.Program,B.uniformSetters={},B.attributes=[];var V=B.device.gl;return B.descriptor=D,B.gl_program=B.device.ensureResourceExists(V.createProgram()),B.gl_shader_vert=null,B.gl_shader_frag=null,B.compileState=fd.NeedsCompile,B.tryCompileProgram(),B}return o.prototype.destroy=function(){a.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},o.prototype.tryCompileProgram=function(){qa(this.compileState===fd.NeedsCompile);var f=this.descriptor,m=f.vertex,w=f.fragment,C=this.device.gl;m!=null&&m.glsl&&(w!=null&&w.glsl)&&(this.gl_shader_vert=this.compileShader(m.postprocess?m.postprocess(m.glsl):m.glsl,C.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(w.postprocess?w.postprocess(w.glsl):w.glsl,C.FRAGMENT_SHADER),C.attachShader(this.gl_program,this.gl_shader_vert),C.attachShader(this.gl_program,this.gl_shader_frag),C.linkProgram(this.gl_program),this.compileState=fd.Compiling,Wo(C)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},o.prototype.readAttributesFromLinkedProgram=function(){for(var f,m=this.device.gl,w=m.getProgramParameter(this.gl_program,m.ACTIVE_ATTRIBUTES),C=h3(this.descriptor.vertex.glsl),D=p3(this.rawVertexGLSL,C),B=function(Te){var Ae=m.getActiveAttrib(V.gl_program,Te),Fe=Ae.name,Mt=Ae.type,rn=Ae.size,In=m.getAttribLocation(V.gl_program,Fe),ar=(f=D.find(function(Cr){return Cr.name===Fe}))===null||f===void 0?void 0:f.location;In>=0&&!(0,Mp.Z)(ar)&&(V.attributes[ar]={name:Fe,location:In,type:Mt,size:rn})},V=this,re=0;re<w;re++)B(re)},o.prototype.readUniformLocationsFromLinkedProgram=function(){for(var f=this.device.gl,m=f.getProgramParameter(this.gl_program,f.ACTIVE_UNIFORMS),w=0;w<m;w++){var C=f.getActiveUniform(this.gl_program,w),D=a3(C.name).name,B=f.getUniformLocation(this.gl_program,D);if(this.uniformSetters[D]=o2(f,B,C),C&&C.size>1)for(var V=0;V<C.size;V++)B=f.getUniformLocation(this.gl_program,"".concat(D,"[").concat(V,"]")),this.uniformSetters["".concat(D,"[").concat(V,"]")]=o2(f,B,C)}},o.prototype.compileShader=function(f,m){var w=this.device.gl,C=this.device.ensureResourceExists(w.createShader(m));return w.shaderSource(C,f),w.compileShader(C),C},o.prototype.setUniformsLegacy=function(f){f===void 0&&(f={});var m=this.device.gl;if(!Wo(m)){var w=!1;for(var C in f){w||(m.useProgram(this.gl_program),w=!0);var D=f[C],B=this.uniformSetters[C];if(B){var V=D;V instanceof c2&&(V=V.textureIndex),B(V)}}}return this},o}(Np),K1=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Ar.QueryPool;var B=D.device.gl;if(Wo(B)){var V=C.elemCount,re=C.type;D.gl_query=Kx(V,function(){return D.device.ensureResourceExists(B.createQuery())}),D.gl_query_type=x3(re)}return D}return o.prototype.queryResultOcclusion=function(f){var m=this.device.gl;if(Wo(m)){var w=this.gl_query[f];return m.getQueryParameter(w,m.QUERY_RESULT_AVAILABLE)?!!m.getQueryParameter(w,m.QUERY_RESULT):null}return null},o.prototype.destroy=function(){a.prototype.destroy.call(this);var f=this.device.gl;if(Wo(f))for(var m=0;m<this.gl_query.length;m++)f.deleteQuery(this.gl_query[m])},o}(Np),C3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this,{id:m,device:w})||this;return C.type=Ar.Readback,C.gl_pbo=null,C.gl_sync=null,C}return o.prototype.clientWaitAsync=function(f,m,w){m===void 0&&(m=0),w===void 0&&(w=10);var C=this.device.gl;return new Promise(function(D,B){function V(){var re=C.clientWaitSync(f,m,0);if(re==C.WAIT_FAILED){B();return}if(re==C.TIMEOUT_EXPIRED){setTimeout(V,(0,VO.Z)(w,0,C.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}D()}V()})},o.prototype.getBufferSubDataAsync=function(f,m,w,C,D,B){return(0,Oo.mG)(this,void 0,void 0,function(){var V;return(0,Oo.Jh)(this,function(re){switch(re.label){case 0:return V=this.device.gl,Wo(V)?(this.gl_sync=V.fenceSync(V.SYNC_GPU_COMMANDS_COMPLETE,0),V.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return re.sent(),V.bindBuffer(f,m),V.getBufferSubData(f,w,C,D,B),V.bindBuffer(f,null),[2,C];case 2:return[2]}})})},o.prototype.readTexture=function(f,m,w,C,D,B,V,re){return V===void 0&&(V=0),re===void 0&&(re=B.byteLength||0),(0,Oo.mG)(this,void 0,void 0,function(){var Te,Ae,Fe,Mt,rn;return(0,Oo.Jh)(this,function(In){return Te=this.device.gl,Ae=f,Fe=this.device.translateTextureFormat(Ae.format),Mt=this.device.translateTextureType(Ae.format),rn=GO(Ae.format),Wo(Te)?(this.gl_pbo=this.device.ensureResourceExists(Te.createBuffer()),Te.bindBuffer(Te.PIXEL_PACK_BUFFER,this.gl_pbo),Te.bufferData(Te.PIXEL_PACK_BUFFER,re,Te.STREAM_READ),Te.bindBuffer(Te.PIXEL_PACK_BUFFER,null),Te.bindFramebuffer(Cn.READ_FRAMEBUFFER,this.device.readbackFramebuffer),Te.framebufferTexture2D(Cn.READ_FRAMEBUFFER,Cn.COLOR_ATTACHMENT0,Cn.TEXTURE_2D,Ae.gl_texture,0),Te.bindBuffer(Te.PIXEL_PACK_BUFFER,this.gl_pbo),Te.readPixels(m,w,C,D,Fe,Mt,V*rn),Te.bindBuffer(Te.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(Te.PIXEL_PACK_BUFFER,this.gl_pbo,0,B,V,0)]):[2,this.readTextureSync(f,m,w,C,D,B,V,re)]})})},o.prototype.readTextureSync=function(f,m,w,C,D,B,V,re){re===void 0&&(re=B.byteLength||0);var Te=this.device.gl,Ae=f,Fe=this.device.translateTextureType(Ae.format);return Te.bindFramebuffer(Cn.FRAMEBUFFER,this.device.readbackFramebuffer),Te.framebufferTexture2D(Cn.FRAMEBUFFER,Cn.COLOR_ATTACHMENT0,Cn.TEXTURE_2D,Ae.gl_texture,0),Te.pixelStorei(Te.PACK_ALIGNMENT,4),Te.readPixels(m,w,C,D,Te.RGBA,Fe,B),B},o.prototype.readBuffer=function(f,m,w,C,D){return(0,Oo.mG)(this,void 0,void 0,function(){var B;return(0,Oo.Jh)(this,function(V){return B=this.device.gl,Wo(B)?[2,this.getBufferSubDataAsync(B.ARRAY_BUFFER,Wg(f,m),m,w,C,D)]:[2,Promise.reject()]})})},o.prototype.destroy=function(){a.prototype.destroy.call(this),Wo(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},o}(Np),Km=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D,B,V=a.call(this,{id:m,device:w})||this;return V.type=Ar.RenderPipeline,V.drawMode=m3((D=C.topology)!==null&&D!==void 0?D:gc.TRIANGLES),V.program=C.program,V.inputLayout=C.inputLayout,V.megaState=(0,Oo.pi)((0,Oo.pi)({},Vg(N0)),C.megaStateDescriptor),V.colorAttachmentFormats=C.colorAttachmentFormats.slice(),V.depthStencilAttachmentFormat=C.depthStencilAttachmentFormat,V.sampleCount=(B=C.sampleCount)!==null&&B!==void 0?B:1,V}return o}(Np),O3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;return D.type=Ar.ComputePipeline,D.descriptor=C,D}return o}(Np),Q1=function(){function a(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return a.prototype.trackResourceCreated=function(o){this.creationStacks.set(o,new Error().stack),this.liveObjects.add(o)},a.prototype.trackResourceDestroyed=function(o){this.deletionStacks.has(o)&&console.warn("Object double freed:",o,`

Creation stack: `,this.creationStacks.get(o),`

Deletion stack: `,this.deletionStacks.get(o),`

This stack: `,new Error().stack),this.deletionStacks.set(o,new Error().stack),this.liveObjects.delete(o)},a.prototype.checkForLeaks=function(){var o,f;try{for(var m=(0,Oo.XA)(this.liveObjects.values()),w=m.next();!w.done;w=m.next()){var C=w.value;console.warn("Object leaked:",C,"Creation stack:",this.creationStacks.get(C))}}catch(D){o={error:D}}finally{try{w&&!w.done&&(f=m.return)&&f.call(m)}finally{if(o)throw o.error}}},a.prototype.setResourceLeakCheck=function(o,f){f?this.liveObjects.add(o):this.liveObjects.delete(o)},a}(),nm=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D,B,V=a.call(this,{id:m,device:w})||this;V.type=Ar.Sampler;var re=V.device.gl;if(Wo(re)){var Te=V.device.ensureResourceExists(re.createSampler());re.samplerParameteri(Te,Cn.TEXTURE_WRAP_S,x_(C.addressModeU)),re.samplerParameteri(Te,Cn.TEXTURE_WRAP_T,x_(C.addressModeV)),re.samplerParameteri(Te,Cn.TEXTURE_WRAP_R,x_((D=C.addressModeW)!==null&&D!==void 0?D:C.addressModeU)),re.samplerParameteri(Te,Cn.TEXTURE_MIN_FILTER,E_(C.minFilter,C.mipmapFilter)),re.samplerParameteri(Te,Cn.TEXTURE_MAG_FILTER,E_(C.magFilter,qc.NO_MIP)),C.lodMinClamp!==void 0&&re.samplerParameterf(Te,Cn.TEXTURE_MIN_LOD,C.lodMinClamp),C.lodMaxClamp!==void 0&&re.samplerParameterf(Te,Cn.TEXTURE_MAX_LOD,C.lodMaxClamp),C.compareFunction!==void 0&&(re.samplerParameteri(Te,re.TEXTURE_COMPARE_MODE,re.COMPARE_REF_TO_TEXTURE),re.samplerParameteri(Te,re.TEXTURE_COMPARE_FUNC,C.compareFunction));var Ae=(B=C.maxAnisotropy)!==null&&B!==void 0?B:1;Ae>1&&V.device.EXT_texture_filter_anisotropic!==null&&(qa(C.minFilter===Du.BILINEAR&&C.magFilter===Du.BILINEAR&&C.mipmapFilter===qc.LINEAR),re.samplerParameterf(Te,V.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ae)),V.gl_sampler=Te}else V.descriptor=C;return V}return o.prototype.setTextureParameters=function(f,m,w){var C,D=this.device.gl,B=this.descriptor;this.isNPOT(m,w)?D.texParameteri(Cn.TEXTURE_2D,Cn.TEXTURE_MIN_FILTER,Cn.LINEAR):D.texParameteri(f,Cn.TEXTURE_MIN_FILTER,E_(B.minFilter,B.mipmapFilter)),D.texParameteri(Cn.TEXTURE_2D,Cn.TEXTURE_WRAP_S,x_(B.addressModeU)),D.texParameteri(Cn.TEXTURE_2D,Cn.TEXTURE_WRAP_T,x_(B.addressModeV)),D.texParameteri(f,Cn.TEXTURE_MAG_FILTER,E_(B.magFilter,qc.NO_MIP));var V=(C=B.maxAnisotropy)!==null&&C!==void 0?C:1;V>1&&this.device.EXT_texture_filter_anisotropic!==null&&(qa(B.minFilter===Du.BILINEAR&&B.magFilter===Du.BILINEAR&&B.mipmapFilter===qc.LINEAR),D.texParameteri(f,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V))},o.prototype.destroy=function(){a.prototype.destroy.call(this),Wo(this.device.gl)&&this.device.gl.deleteSampler(l2(this))},o.prototype.isNPOT=function(f,m){return!Ym(f)||!Ym(m)},o}(Np),ew=function(){function a(){}return a.prototype.dispatchWorkgroups=function(o,f,m){},a.prototype.dispatchWorkgroupsIndirect=function(o,f){},a.prototype.setPipeline=function(o){},a.prototype.setBindings=function(o){},a.prototype.pushDebugGroup=function(o){},a.prototype.popDebugGroup=function(){},a.prototype.insertDebugMarker=function(o){},a}(),M3=function(a){(0,Oo.ZT)(o,a);function o(){var f=a!==null&&a.apply(this,arguments)||this;return f.type=Ar.RenderBundle,f.commands=[],f}return o.prototype.push=function(f){this.commands.push(f)},o.prototype.replay=function(){this.commands.forEach(function(f){return f()})},o}(Np),J1=65536,R3=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,tw=function(){function a(o,f){f===void 0&&(f={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=Vg(N0),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=Gd.LOWER_LEFT,this.clipSpaceNearZ=em.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=o,this.contextAttributes=Kc(o.getContextAttributes()),Wo(o)?(this.EXT_texture_norm16=o.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=o.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=o.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=o.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=o.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=o.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=o.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=o.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=o.getExtension("EXT_color_buffer_half_float"),o.getExtension("EXT_frag_depth"),o.getExtension("OES_element_index_uint"),o.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=o.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=o.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=o.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=o.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=o.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=o.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=o.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=o.getExtension("KHR_parallel_shader_compile"),Wo(o)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new c2({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:ds.TEXTURE_2D,mipLevelCount:1,usage:Xf.RENDER_TARGET,format:this.contextAttributes.alpha===!1?lr.U8_RGB_RT:lr.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=Sl.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(o.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(ds.TEXTURE_2D,Sl.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(ds.TEXTURE_2D,Sl.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:ca.VERTEX,hint:Rp.STATIC}),Wo(o)&&(this.fallbackTexture2DArray=this.createFallbackTexture(ds.TEXTURE_2D_ARRAY,Sl.Float),this.fallbackTexture3D=this.createFallbackTexture(ds.TEXTURE_3D,Sl.Float),this.fallbackTextureCube=this.createFallbackTexture(ds.TEXTURE_CUBE_MAP,Sl.Float)),this.currentMegaState.depthCompare=os.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=gf.ALL,o.enable(o.DEPTH_TEST),o.enable(o.STENCIL_TEST),this.checkLimits(),f.shaderDebug&&(this.shaderDebug=!0),f.trackResources&&(this.resourceCreationTracker=new Q1)}return a.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},a.prototype.createFallbackTexture=function(o,f){var m=o===ds.TEXTURE_CUBE_MAP?6:1,w=f===Sl.Depth?lr.D32F:lr.U8_RGBA_NORM,C=this.createTexture({dimension:o,format:w,usage:Xf.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1});return f===Sl.Float&&C.setImageData([new Uint8Array(4*m)]),Zg(C)},a.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},a.prototype.checkLimits=function(){var o=this.gl;if(this.maxVertexAttribs=o.getParameter(Cn.MAX_VERTEX_ATTRIBS),Wo(o)){this.uniformBufferMaxPageByteSize=Math.min(o.getParameter(Cn.MAX_UNIFORM_BLOCK_SIZE),J1),this.uniformBufferWordAlignment=o.getParameter(o.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var f=o.getInternalformatParameter(o.RENDERBUFFER,o.DEPTH32F_STENCIL8,o.SAMPLES);this.supportedSampleCounts=f?(0,Oo.ev)([],(0,Oo.CR)(f),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=J1;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(m,w){return m-w})},a.prototype.configureSwapChain=function(o,f,m){var w=this.scTexture;w.width=o,w.height=f,this.scPlatformFramebuffer=GS(m)},a.prototype.getDevice=function(){return this},a.prototype.getCanvas=function(){return this.gl.canvas},a.prototype.getOnscreenTexture=function(){return this.scTexture},a.prototype.beginFrame=function(){},a.prototype.endFrame=function(){},a.prototype.translateTextureInternalFormat=function(o,f){switch(f===void 0&&(f=!1),o){case lr.ALPHA:return Cn.ALPHA;case lr.U8_LUMINANCE:case lr.F16_LUMINANCE:case lr.F32_LUMINANCE:return Cn.LUMINANCE;case lr.F16_R:return Cn.R16F;case lr.F16_RG:return Cn.RG16F;case lr.F16_RGB:return Cn.RGB16F;case lr.F16_RGBA:return Cn.RGBA16F;case lr.F32_R:return Cn.R32F;case lr.F32_RG:return Cn.RG32F;case lr.F32_RGB:return Cn.RGB32F;case lr.F32_RGBA:return Wo(this.gl)?Cn.RGBA32F:f?this.WEBGL_color_buffer_float.RGBA32F_EXT:Cn.RGBA;case lr.U8_R_NORM:return Cn.R8;case lr.U8_RG_NORM:return Cn.RG8;case lr.U8_RGB_NORM:case lr.U8_RGB_RT:return Cn.RGB8;case lr.U8_RGB_SRGB:return Cn.SRGB8;case lr.U8_RGBA_NORM:case lr.U8_RGBA_RT:return Wo(this.gl)?Cn.RGBA8:f?Cn.RGBA4:Cn.RGBA;case lr.U8_RGBA:return Cn.RGBA;case lr.U8_RGBA_SRGB:case lr.U8_RGBA_RT_SRGB:return Cn.SRGB8_ALPHA8;case lr.U16_R:return Cn.R16UI;case lr.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case lr.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case lr.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case lr.U16_RGBA_5551:return Cn.RGB5_A1;case lr.U16_RGB_565:return Cn.RGB565;case lr.U32_R:return Cn.R32UI;case lr.S8_RGBA_NORM:return Cn.RGBA8_SNORM;case lr.S8_RG_NORM:return Cn.RG8_SNORM;case lr.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case lr.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case lr.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case lr.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case lr.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case lr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case lr.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case lr.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case lr.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case lr.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case lr.D32F_S8:return Wo(this.gl)?Cn.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?Cn.DEPTH_STENCIL:Cn.DEPTH_COMPONENT16;case lr.D24_S8:return Wo(this.gl)?Cn.DEPTH24_STENCIL8:this.WEBGL_depth_texture?Cn.DEPTH_STENCIL:Cn.DEPTH_COMPONENT16;case lr.D32F:return Wo(this.gl)?Cn.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?Cn.DEPTH_COMPONENT:Cn.DEPTH_COMPONENT16;case lr.D24:return Wo(this.gl)?Cn.DEPTH_COMPONENT24:this.WEBGL_depth_texture?Cn.DEPTH_COMPONENT:Cn.DEPTH_COMPONENT16;default:throw new Error("whoops")}},a.prototype.translateTextureType=function(o){var f=oc(o);switch(f){case ii.U8:return Cn.UNSIGNED_BYTE;case ii.U16:return Cn.UNSIGNED_SHORT;case ii.U32:return Cn.UNSIGNED_INT;case ii.S8:return Cn.BYTE;case ii.F16:return Cn.HALF_FLOAT;case ii.F32:return Cn.FLOAT;case ii.U16_PACKED_5551:return Cn.UNSIGNED_SHORT_5_5_5_1;case ii.D32F:return Wo(this.gl)?Cn.FLOAT:this.WEBGL_depth_texture?Cn.UNSIGNED_INT:Cn.UNSIGNED_BYTE;case ii.D24:return Wo(this.gl)?Cn.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Cn.UNSIGNED_SHORT:Cn.UNSIGNED_BYTE;case ii.D24S8:return Wo(this.gl)?Cn.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?Cn.UNSIGNED_INT_24_8_WEBGL:Cn.UNSIGNED_BYTE;case ii.D32FS8:return Cn.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},a.prototype.translateInternalTextureFormat=function(o){switch(o){case lr.F32_R:return Cn.R32F;case lr.F32_RG:return Cn.RG32F;case lr.F32_RGB:return Cn.RGB32F;case lr.F32_RGBA:return Cn.RGBA32F;case lr.F16_R:return Cn.R16F;case lr.F16_RG:return Cn.RG16F;case lr.F16_RGB:return Cn.RGB16F;case lr.F16_RGBA:return Cn.RGBA16F}return this.translateTextureFormat(o)},a.prototype.translateTextureFormat=function(o){if(a2(o)||o===lr.F32_LUMINANCE||o===lr.U8_LUMINANCE)return this.translateTextureInternalFormat(o);var f=Wo(this.gl)||!Wo(this.gl)&&!!this.WEBGL_depth_texture;switch(o){case lr.D24_S8:case lr.D32F_S8:return f?Cn.DEPTH_STENCIL:Cn.RGBA;case lr.D24:case lr.D32F:return f?Cn.DEPTH_COMPONENT:Cn.RGBA}var m=QS(o),w=L0(o);switch(w){case Do.A:return Cn.ALPHA;case Do.R:return m?Cn.RED_INTEGER:Cn.RED;case Do.RG:return m?Cn.RG_INTEGER:Cn.RG;case Do.RGB:return m?Cn.RGB_INTEGER:Cn.RGB;case Do.RGBA:return Cn.RGBA}},a.prototype.setActiveTexture=function(o){this.currentActiveTexture!==o&&(this.gl.activeTexture(o),this.currentActiveTexture=o)},a.prototype.bindVAO=function(o){this.currentBoundVAO!==o&&(Wo(this.gl)?this.gl.bindVertexArray(o):this.OES_vertex_array_object.bindVertexArrayOES(o),this.currentBoundVAO=o)},a.prototype.programCompiled=function(o){qa(o.compileState!==fd.NeedsCompile),o.compileState===fd.Compiling&&(o.compileState=fd.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(o))},a.prototype.useProgram=function(o){this.currentProgram!==o&&(this.programCompiled(o),this.gl.useProgram(o.gl_program),this.currentProgram=o)},a.prototype.ensureResourceExists=function(o){if(o===null){var f=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(f))}else return o},a.prototype.createBuffer=function(o){return new S3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTexture=function(o){return new c2({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createSampler=function(o){return new nm({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTarget=function(o){return new T3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTargetFromTexture=function(o){var f=o,m=f.format,w=f.width,C=f.height,D=f.mipLevelCount;return qa(D===1),this.createRenderTarget({format:m,width:w,height:C,sampleCount:1,texture:o})},a.prototype.createProgram=function(o){var f,m,w,C=(f=o.vertex)===null||f===void 0?void 0:f.glsl;return!((m=o.vertex)===null||m===void 0)&&m.glsl&&(o.vertex.glsl=_v(this.queryVendorInfo(),"vert",o.vertex.glsl)),!((w=o.fragment)===null||w===void 0)&&w.glsl&&(o.fragment.glsl=_v(this.queryVendorInfo(),"frag",o.fragment.glsl)),this.createProgramSimple(o,C)},a.prototype.createProgramSimple=function(o,f){var m=new A3({id:this.getNextUniqueId(),device:this,descriptor:o},f);return m},a.prototype.createBindings=function(o){return new KS({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createInputLayout=function(o){return new w3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderPipeline=function(o){return new Km({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createComputePass=function(){return new ew},a.prototype.createComputePipeline=function(o){return new O3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createReadback=function(){return new C3({id:this.getNextUniqueId(),device:this})},a.prototype.createQueryPool=function(o,f){return new K1({id:this.getNextUniqueId(),device:this,descriptor:{type:o,elemCount:f}})},a.prototype.formatRenderPassDescriptor=function(o){var f,m,w,C,D,B,V=o.colorAttachment;o.depthClearValue=(f=o.depthClearValue)!==null&&f!==void 0?f:"load",o.stencilClearValue=(m=o.stencilClearValue)!==null&&m!==void 0?m:"load";for(var re=0;re<V.length;re++)o.colorAttachmentLevel||(o.colorAttachmentLevel=[]),o.colorAttachmentLevel[re]=(w=o.colorAttachmentLevel[re])!==null&&w!==void 0?w:0,o.colorResolveToLevel||(o.colorResolveToLevel=[]),o.colorResolveToLevel[re]=(C=o.colorResolveToLevel[re])!==null&&C!==void 0?C:0,o.colorClearColor||(o.colorClearColor=[]),o.colorClearColor[re]=(D=o.colorClearColor[re])!==null&&D!==void 0?D:"load",o.colorStore||(o.colorStore=[]),o.colorStore[re]=(B=o.colorStore[re])!==null&&B!==void 0?B:!1},a.prototype.createRenderBundle=function(){return new M3({id:this.getNextUniqueId(),device:this})},a.prototype.beginBundle=function(o){this.renderBundle=o},a.prototype.endBundle=function(){this.renderBundle=void 0},a.prototype.executeBundles=function(o){o.forEach(function(f){f.replay()})},a.prototype.createRenderPass=function(o){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=o,this.formatRenderPassDescriptor(o);var f=o.colorAttachment,m=o.colorAttachmentLevel,w=o.colorClearColor,C=o.colorResolveTo,D=o.colorResolveToLevel,B=o.depthStencilAttachment,V=o.depthClearValue,re=o.stencilClearValue,Te=o.depthStencilResolveTo;this.setRenderPassParametersBegin(f.length);for(var Ae=0;Ae<f.length;Ae++)this.setRenderPassParametersColor(Ae,f[Ae],m[Ae],C[Ae],D[Ae]);this.setRenderPassParametersDepthStencil(B,Te),this.validateCurrentAttachments();for(var Ae=0;Ae<f.length;Ae++){var Fe=w[Ae];Fe!=="load"&&this.setRenderPassParametersClearColor(Ae,Fe.r,Fe.g,Fe.b,Fe.a)}return this.setRenderPassParametersClearDepthStencil(V,re),this},a.prototype.submitPass=function(o){qa(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},a.prototype.copySubTexture2D=function(o,f,m,w,C,D){var B=this.gl,V=o,re=w;if(qa(re.mipLevelCount===1),qa(V.mipLevelCount===1),Wo(B))V===this.scTexture?B.bindFramebuffer(B.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(B.bindFramebuffer(B.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(B.DRAW_FRAMEBUFFER,B.COLOR_ATTACHMENT0,V,0)),B.bindFramebuffer(B.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(B.READ_FRAMEBUFFER,B.COLOR_ATTACHMENT0,re,0),B.blitFramebuffer(C,D,C+re.width,D+re.height,f,m,f+re.width,m+re.height,B.COLOR_BUFFER_BIT,B.LINEAR),B.bindFramebuffer(B.READ_FRAMEBUFFER,null),B.bindFramebuffer(B.DRAW_FRAMEBUFFER,null);else if(V===this.scTexture){var Te=this.createRenderTargetFromTexture(w);this.submitBlitRenderPass(Te,V)}},a.prototype.queryLimits=function(){return this},a.prototype.queryTextureFormatSupported=function(o,f,m){switch(o){case lr.BC1_SRGB:case lr.BC2_SRGB:case lr.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?u2(f,m,4,4):!1;case lr.BC1:case lr.BC2:case lr.BC3:return this.WEBGL_compressed_texture_s3tc!==null?u2(f,m,4,4):!1;case lr.BC4_UNORM:case lr.BC4_SNORM:case lr.BC5_UNORM:case lr.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?u2(f,m,4,4):!1;case lr.U16_R_NORM:case lr.U16_RG_NORM:case lr.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case lr.F32_R:case lr.F32_RG:case lr.F32_RGB:case lr.F32_RGBA:return this.OES_texture_float_linear!==null;case lr.F16_R:case lr.F16_RG:case lr.F16_RGB:case lr.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},a.prototype.queryProgramReady=function(o){var f=this.gl;if(o.compileState===fd.NeedsCompile)throw new Error("whoops");if(o.compileState===fd.Compiling){var m=void 0;return this.KHR_parallel_shader_compile!==null?m=f.getProgramParameter(o.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):m=!0,m&&this.programCompiled(o),m}return o.compileState===fd.NeedsBind||o.compileState===fd.ReadyToUse},a.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},a.prototype.queryVendorInfo=function(){return this},a.prototype.queryRenderPass=function(o){return this.currentRenderPassDescriptor},a.prototype.queryRenderTarget=function(o){var f=o;return f},a.prototype.setResourceName=function(o,f){if(o.name=f,o.type===Ar.Buffer)for(var m=o.gl_buffer_pages,w=0;w<m.length;w++)S_(m[w],"".concat(f," Page ").concat(w));else if(o.type===Ar.Texture)S_(Zg(o),f);else if(o.type===Ar.Sampler)S_(l2(o),f);else if(o.type===Ar.RenderTarget){var C=o.gl_renderbuffer;C!==null&&S_(C,f)}else o.type===Ar.InputLayout&&S_(o.vao,f)},a.prototype.setResourceLeakCheck=function(o,f){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(o,f)},a.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},a.prototype.pushDebugGroup=function(o){},a.prototype.popDebugGroup=function(){},a.prototype.insertDebugMarker=function(o){},a.prototype.programPatched=function(o,f){qa(this.shaderDebug)},a.prototype.getBufferData=function(o,f,m){m===void 0&&(m=0);var w=this.gl;Wo(w)&&(w.bindBuffer(w.COPY_READ_BUFFER,Wg(o,m*4)),w.getBufferSubData(w.COPY_READ_BUFFER,m*4,f))},a.prototype.debugGroupStatisticsDrawCall=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].drawCallCount+=o},a.prototype.debugGroupStatisticsBufferUpload=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].bufferUploadCount+=o},a.prototype.debugGroupStatisticsTextureBind=function(o){o===void 0&&(o=1);for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].textureBindCount+=o},a.prototype.debugGroupStatisticsTriangles=function(o){for(var f=this.debugGroupStack.length-1;f>=0;f--)this.debugGroupStack[f].triangleCount+=o},a.prototype.reportShaderError=function(o,f){var m=this.gl,w=m.getShaderParameter(o,m.COMPILE_STATUS);if(!w){console.error(Qx(f));var C=m.getExtension("WEBGL_debug_shaders");C&&console.error(C.getTranslatedShaderSource(o)),console.error(m.getShaderInfoLog(o))}return w},a.prototype.checkProgramCompilationForErrors=function(o){var f=this.gl,m=o.gl_program;if(!f.getProgramParameter(m,f.LINK_STATUS)){var w=o.descriptor;if(!this.reportShaderError(o.gl_shader_vert,w.vertex.glsl)||!this.reportShaderError(o.gl_shader_frag,w.fragment.glsl))return;console.error(f.getProgramInfoLog(o.gl_program))}},a.prototype.bindFramebufferAttachment=function(o,f,m,w){var C=this.gl;if((0,Mp.Z)(m))C.framebufferRenderbuffer(o,f,C.RENDERBUFFER,null);else if(m.type===Ar.RenderTarget)m.gl_renderbuffer!==null?C.framebufferRenderbuffer(o,f,C.RENDERBUFFER,m.gl_renderbuffer):m.texture!==null&&C.framebufferTexture2D(o,f,Cn.TEXTURE_2D,Zg(m.texture),w);else if(m.type===Ar.Texture){var D=Zg(m);m.dimension===ds.TEXTURE_2D?C.framebufferTexture2D(o,f,Cn.TEXTURE_2D,D,w):Wo(C)&&(m.dimension,ds.TEXTURE_2D_ARRAY)}},a.prototype.bindFramebufferDepthStencilAttachment=function(o,f){var m=this.gl,w=(0,Mp.Z)(f)?Ki.Depth|Ki.Stencil:Ug(f.format),C=!!(w&Ki.Depth),D=!!(w&Ki.Stencil);if(C&&D){var B=Wo(this.gl)||!Wo(this.gl)&&!!this.WEBGL_depth_texture;B?this.bindFramebufferAttachment(o,m.DEPTH_STENCIL_ATTACHMENT,f,0):this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,f,0)}else C?(this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,f,0),this.bindFramebufferAttachment(o,m.STENCIL_ATTACHMENT,null,0)):D&&(this.bindFramebufferAttachment(o,m.STENCIL_ATTACHMENT,f,0),this.bindFramebufferAttachment(o,m.DEPTH_ATTACHMENT,null,0))},a.prototype.validateCurrentAttachments=function(){for(var o=-1,f=-1,m=-1,w=0;w<this.currentColorAttachments.length;w++){var C=this.currentColorAttachments[w];C!==null&&(o===-1?(o=C.sampleCount,f=C.width,m=C.height):(qa(o===C.sampleCount),qa(f===C.width),qa(m===C.height)))}this.currentDepthStencilAttachment&&(o===-1?o=this.currentDepthStencilAttachment.sampleCount:(qa(o===this.currentDepthStencilAttachment.sampleCount),qa(f===this.currentDepthStencilAttachment.width),qa(m===this.currentDepthStencilAttachment.height))),this.currentSampleCount=o},a.prototype.setRenderPassParametersBegin=function(o){var f=this.gl;if(Wo(f)?f.bindFramebuffer(Cn.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||f.bindFramebuffer(Cn.FRAMEBUFFER,this.renderPassDrawFramebuffer),Wo(f)?f.drawBuffers([Cn.COLOR_ATTACHMENT0,Cn.COLOR_ATTACHMENT1,Cn.COLOR_ATTACHMENT2,Cn.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([Cn.COLOR_ATTACHMENT0_WEBGL,Cn.COLOR_ATTACHMENT1_WEBGL,Cn.COLOR_ATTACHMENT2_WEBGL,Cn.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var m=o;m<this.currentColorAttachments.length;m++){var w=Wo(f)?Cn.DRAW_FRAMEBUFFER:Cn.FRAMEBUFFER,C=Wo(f)?Cn.COLOR_ATTACHMENT0:Cn.COLOR_ATTACHMENT0_WEBGL;f.framebufferRenderbuffer(w,C+m,Cn.RENDERBUFFER,null),f.framebufferTexture2D(w,C+m,Cn.TEXTURE_2D,null,0)}this.currentColorAttachments.length=o},a.prototype.setRenderPassParametersColor=function(o,f,m,w,C){var D=this.gl,B=Wo(D);(this.currentColorAttachments[o]!==f||this.currentColorAttachmentLevels[o]!==m)&&(this.currentColorAttachments[o]=f,this.currentColorAttachmentLevels[o]=m,(B||!B&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(B?Cn.DRAW_FRAMEBUFFER:Cn.FRAMEBUFFER,(B?Cn.COLOR_ATTACHMENT0:Cn.COLOR_ATTACHMENT0_WEBGL)+o,f,m),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[o]!==w||this.currentColorResolveToLevels[o]!==C)&&(this.currentColorResolveTos[o]=w,this.currentColorResolveToLevels[o]=C,w!==null&&(this.resolveColorAttachmentsChanged=!0))},a.prototype.setRenderPassParametersDepthStencil=function(o,f){var m=this.gl;this.currentDepthStencilAttachment!==o&&(this.currentDepthStencilAttachment=o,this.inBlitRenderPass||this.bindFramebufferDepthStencilAttachment(Wo(m)?Cn.DRAW_FRAMEBUFFER:Cn.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==f&&(this.currentDepthStencilResolveTo=f,f&&(this.resolveDepthStencilAttachmentsChanged=!0))},a.prototype.setRenderPassParametersClearColor=function(o,f,m,w,C){var D=this.gl;if(this.OES_draw_buffers_indexed!==null){var B=this.currentMegaState.attachmentsState[o];B&&B.channelWriteMask!==gf.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(o,!0,!0,!0,!0),B.channelWriteMask=gf.ALL)}else{var B=this.currentMegaState.attachmentsState[0];B&&B.channelWriteMask!==gf.ALL&&(D.colorMask(!0,!0,!0,!0),B.channelWriteMask=gf.ALL)}this.setScissorRectEnabled(!1),Wo(D)?D.clearBufferfv(D.COLOR,o,[f,m,w,C]):(D.clearColor(f,m,w,C),D.clear(D.COLOR_BUFFER_BIT))},a.prototype.setRenderPassParametersClearDepthStencil=function(o,f){o===void 0&&(o="load"),f===void 0&&(f="load");var m=this.gl;o!=="load"&&(qa(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(m.depthMask(!0),this.currentMegaState.depthWrite=!0),Wo(m)?m.clearBufferfv(m.DEPTH,0,[o]):(m.clearDepth(o),m.clear(m.DEPTH_BUFFER_BIT))),f!=="load"&&(qa(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(m.enable(m.STENCIL_TEST),m.stencilMask(255),this.currentMegaState.stencilWrite=!0),Wo(m)?m.clearBufferiv(m.STENCIL,0,[f]):(m.clearStencil(f),m.clear(m.STENCIL_BUFFER_BIT)))},a.prototype.setBindings=function(o){var f=this,m;if(this.renderBundle){this.renderBundle.push(function(){return f.setBindings(o)});return}var w=this.gl,C=o,D=C.uniformBufferBindings,B=C.samplerBindings,V=C.bindingLayouts;qa(0<V.bindingLayoutTables.length);var re=V.bindingLayoutTables[0];qa(D.length>=re.numUniformBuffers),qa(B.length>=re.numSamplers);for(var Te=0;Te<D.length;Te++){var Ae=D[Te];if(Ae.size!==0){var Fe=re.firstUniformBuffer+Te,Mt=Ae.buffer,rn=Ae.offset||0,In=Ae.size||Mt.byteSize;if(Mt!==this.currentUniformBuffers[Fe]||rn!==this.currentUniformBufferByteOffsets[Fe]||In!==this.currentUniformBufferByteSizes[Fe]){var ar=rn%Mt.pageByteSize,Cr=Mt.gl_buffer_pages[rn/Mt.pageByteSize|0];qa(ar+In<=Mt.pageByteSize),Wo(w)&&w.bindBufferRange(w.UNIFORM_BUFFER,Fe,Cr,ar,In),this.currentUniformBuffers[Fe]=Mt,this.currentUniformBufferByteOffsets[Fe]=rn,this.currentUniformBufferByteSizes[Fe]=In}}}for(var Te=0;Te<re.numSamplers;Te++){var Ae=B[Te],vr=re.firstSampler+Te,qr=Ae!==null&&Ae.sampler!==null?l2(Ae.sampler):null,ri=Ae!==null&&Ae.texture!==null?Zg(Ae.texture):null;if(this.currentSamplers[vr]!==qr&&(Wo(w)&&w.bindSampler(vr,qr),this.currentSamplers[vr]=qr),this.currentTextures[vr]!==ri){if(this.setActiveTexture(w.TEXTURE0+vr),ri!==null){var po=Kc(Ae).texture,ho=po.gl_target,Xr=po.width,lo=po.height;Ae.texture.textureIndex=vr,w.bindTexture(ho,ri),Wo(w)||(m=Ae.sampler)===null||m===void 0||m.setTextureParameters(ho,Xr,lo),this.debugGroupStatisticsTextureBind()}else{var za=(0,Oo.pi)((0,Oo.pi)({},Ae),e2),Ps=za.dimension,zi=za.formatKind,ho=E3(Ps);w.bindTexture(ho,this.getFallbackTexture((0,Oo.pi)({gl_target:ho,formatKind:zi},za)))}this.currentTextures[vr]=ri}}},a.prototype.setViewport=function(o,f,m,w){var C=this.gl;C.viewport(o,f,m,w)},a.prototype.setScissorRect=function(o,f,m,w){var C=this.gl;this.setScissorRectEnabled(!0),C.scissor(o,f,m,w)},a.prototype.applyAttachmentStateIndexed=function(o,f,m){var w=this.gl,C=this.OES_draw_buffers_indexed;f.channelWriteMask!==m.channelWriteMask&&(C.colorMaskiOES(o,!!(m.channelWriteMask&gf.RED),!!(m.channelWriteMask&gf.GREEN),!!(m.channelWriteMask&gf.BLUE),!!(m.channelWriteMask&gf.ALPHA)),f.channelWriteMask=m.channelWriteMask);var D=f.rgbBlendState.blendMode!==m.rgbBlendState.blendMode||f.alphaBlendState.blendMode!==m.alphaBlendState.blendMode,B=f.rgbBlendState.blendSrcFactor!==m.rgbBlendState.blendSrcFactor||f.alphaBlendState.blendSrcFactor!==m.alphaBlendState.blendSrcFactor||f.rgbBlendState.blendDstFactor!==m.rgbBlendState.blendDstFactor||f.alphaBlendState.blendDstFactor!==m.alphaBlendState.blendDstFactor;(B||D)&&(tm(f.rgbBlendState)&&tm(f.alphaBlendState)?C.enableiOES(o,w.BLEND):tm(m.rgbBlendState)&&tm(m.alphaBlendState)&&C.disableiOES(o,w.BLEND)),D&&(C.blendEquationSeparateiOES(o,m.rgbBlendState.blendMode,m.alphaBlendState.blendMode),f.rgbBlendState.blendMode=m.rgbBlendState.blendMode,f.alphaBlendState.blendMode=m.alphaBlendState.blendMode),B&&(C.blendFuncSeparateiOES(o,m.rgbBlendState.blendSrcFactor,m.rgbBlendState.blendDstFactor,m.alphaBlendState.blendSrcFactor,m.alphaBlendState.blendDstFactor),f.rgbBlendState.blendSrcFactor=m.rgbBlendState.blendSrcFactor,f.alphaBlendState.blendSrcFactor=m.alphaBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor=m.rgbBlendState.blendDstFactor,f.alphaBlendState.blendDstFactor=m.alphaBlendState.blendDstFactor)},a.prototype.applyAttachmentState=function(o,f){var m=this.gl;o.channelWriteMask!==f.channelWriteMask&&(m.colorMask(!!(f.channelWriteMask&gf.RED),!!(f.channelWriteMask&gf.GREEN),!!(f.channelWriteMask&gf.BLUE),!!(f.channelWriteMask&gf.ALPHA)),o.channelWriteMask=f.channelWriteMask);var w=o.rgbBlendState.blendMode!==f.rgbBlendState.blendMode||o.alphaBlendState.blendMode!==f.alphaBlendState.blendMode,C=o.rgbBlendState.blendSrcFactor!==f.rgbBlendState.blendSrcFactor||o.alphaBlendState.blendSrcFactor!==f.alphaBlendState.blendSrcFactor||o.rgbBlendState.blendDstFactor!==f.rgbBlendState.blendDstFactor||o.alphaBlendState.blendDstFactor!==f.alphaBlendState.blendDstFactor;(C||w)&&(tm(o.rgbBlendState)&&tm(o.alphaBlendState)?m.enable(m.BLEND):tm(f.rgbBlendState)&&tm(f.alphaBlendState)&&m.disable(m.BLEND)),w&&(m.blendEquationSeparate(f.rgbBlendState.blendMode,f.alphaBlendState.blendMode),o.rgbBlendState.blendMode=f.rgbBlendState.blendMode,o.alphaBlendState.blendMode=f.alphaBlendState.blendMode),C&&(m.blendFuncSeparate(f.rgbBlendState.blendSrcFactor,f.rgbBlendState.blendDstFactor,f.alphaBlendState.blendSrcFactor,f.alphaBlendState.blendDstFactor),o.rgbBlendState.blendSrcFactor=f.rgbBlendState.blendSrcFactor,o.alphaBlendState.blendSrcFactor=f.alphaBlendState.blendSrcFactor,o.rgbBlendState.blendDstFactor=f.rgbBlendState.blendDstFactor,o.alphaBlendState.blendDstFactor=f.alphaBlendState.blendDstFactor)},a.prototype.setMegaState=function(o){var f=this.gl,m=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var w=0;w<o.attachmentsState.length;w++)this.applyAttachmentStateIndexed(w,m.attachmentsState[0],o.attachmentsState[0]);else qa(o.attachmentsState.length===1),this.applyAttachmentState(m.attachmentsState[0],o.attachmentsState[0]);if(qx(m.blendConstant,o.blendConstant)||(f.blendColor(o.blendConstant.r,o.blendConstant.g,o.blendConstant.b,o.blendConstant.a),VS(m.blendConstant,o.blendConstant)),m.depthCompare!==o.depthCompare&&(f.depthFunc(o.depthCompare),m.depthCompare=o.depthCompare),!!m.depthWrite!=!!o.depthWrite&&(f.depthMask(o.depthWrite),m.depthWrite=o.depthWrite),!!m.stencilWrite!=!!o.stencilWrite&&(f.stencilMask(o.stencilWrite?255:0),m.stencilWrite=o.stencilWrite),!qm(m.stencilFront,o.stencilFront)){var C=o.stencilFront,D=C.passOp,B=C.failOp,V=C.depthFailOp,re=C.compare;(m.stencilFront.passOp!==D||m.stencilFront.failOp!==B||m.stencilFront.depthFailOp!==V)&&(f.stencilOpSeparate(f.FRONT,B,V,D),m.stencilFront.passOp=D,m.stencilFront.failOp=B,m.stencilFront.depthFailOp=V),m.stencilFront.compare!==re&&(this.setStencilReference(0),m.stencilFront.compare=re)}if(!qm(m.stencilBack,o.stencilBack)){var Te=o.stencilBack,D=Te.passOp,B=Te.failOp,V=Te.depthFailOp,re=Te.compare;(m.stencilBack.passOp!==D||m.stencilBack.failOp!==B||m.stencilBack.depthFailOp!==V)&&(f.stencilOpSeparate(f.BACK,B,V,D),m.stencilBack.passOp=D,m.stencilBack.failOp=B,m.stencilBack.depthFailOp=V),m.stencilBack.compare!==re&&(this.setStencilReference(0),m.stencilBack.compare=re)}(m.stencilFront.mask!==o.stencilFront.mask||m.stencilBack.mask!==o.stencilBack.mask)&&(m.stencilFront.mask=o.stencilFront.mask,m.stencilBack.mask=o.stencilBack.mask,this.applyStencil()),m.cullMode!==o.cullMode&&(m.cullMode===ud.NONE?f.enable(f.CULL_FACE):o.cullMode===ud.NONE&&f.disable(f.CULL_FACE),o.cullMode===ud.BACK?f.cullFace(f.BACK):o.cullMode===ud.FRONT?f.cullFace(f.FRONT):o.cullMode===ud.FRONT_AND_BACK&&f.cullFace(f.FRONT_AND_BACK),m.cullMode=o.cullMode),m.frontFace!==o.frontFace&&(f.frontFace(o.frontFace),m.frontFace=o.frontFace),m.polygonOffset!==o.polygonOffset&&(o.polygonOffset?(f.polygonOffset(1,1),f.enable(f.POLYGON_OFFSET_FILL)):f.disable(f.POLYGON_OFFSET_FILL),m.polygonOffset=o.polygonOffset)},a.prototype.validatePipelineFormats=function(o){for(var f=0;f<this.currentColorAttachments.length;f++)var m=this.currentColorAttachments[f];this.currentDepthStencilAttachment&&qa(this.currentDepthStencilAttachment.format===o.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&qa(this.currentSampleCount===o.sampleCount)},a.prototype.setPipeline=function(o){var f=this;if(this.renderBundle){this.renderBundle.push(function(){return f.setPipeline(o)});return}this.currentPipeline=o,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var m=this.currentPipeline.program;if(this.useProgram(m),m.compileState===fd.NeedsBind){var w=this.gl,C=m.gl_program,D=m.descriptor,B=JS(D.vertex.glsl,R3);if(Wo(w))for(var V=0;V<B.length;V++){var re=(0,Oo.CR)(B[V],2),Te=re[1],Ae=w.getUniformBlockIndex(C,Te);Ae!==-1&&Ae!==4294967295&&w.uniformBlockBinding(C,Ae,V)}for(var Fe=JS(D.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),V=0;V<Fe.length;V++){var Mt=(0,Oo.CR)(Fe[V],3),rn=Mt[1],In=Mt[2],ar=w.getUniformLocation(C,rn);w.uniform1i(ar,parseInt(In))}m.compileState=fd.ReadyToUse}},a.prototype.setVertexInput=function(o,f,m){var w,C,D=this,B;if(this.renderBundle){this.renderBundle.push(function(){return D.setVertexInput(o,f,m)});return}if(o!==null){qa(this.currentPipeline.inputLayout===o);var V=o;this.bindVAO(V.vao);for(var re=this.gl,Te=0;Te<V.vertexBufferDescriptors.length;Te++){var Ae=V.vertexBufferDescriptors[Te],Fe=Ae.arrayStride,Mt=Ae.attributes;try{for(var rn=(w=void 0,(0,Oo.XA)(Mt)),In=rn.next();!In.done;In=rn.next()){var ar=In.value,Cr=ar.shaderLocation,vr=ar.offset,qr=Wo(re)?Cr:(B=V.program.attributes[Cr])===null||B===void 0?void 0:B.location;if(!(0,Mp.Z)(qr)){var ri=f[Te];if(ri===null)continue;var po=ar.vertexFormat;re.bindBuffer(re.ARRAY_BUFFER,Wg(ri.buffer));var ho=(ri.offset||0)+vr;re.vertexAttribPointer(qr,po.size,po.type,po.normalized,Fe,ho)}}}catch(lo){w={error:lo}}finally{try{In&&!In.done&&(C=rn.return)&&C.call(rn)}finally{if(w)throw w.error}}}if(qa(m!==null==(V.indexBufferFormat!==null)),m!==null){var Xr=m.buffer;qa(Xr.usage===ca.INDEX),re.bindBuffer(re.ELEMENT_ARRAY_BUFFER,Wg(Xr)),this.currentIndexBufferByteOffset=m.offset||0}else this.currentIndexBufferByteOffset=null}else qa(this.currentPipeline.inputLayout===null),qa(m===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},a.prototype.setStencilReference=function(o){this.currentStencilRef!==o&&(this.currentStencilRef=o,this.applyStencil())},a.prototype.draw=function(o,f,m,w){var C,D=this;if(this.renderBundle){this.renderBundle.push(function(){return D.draw(o,f,m,w)});return}var B=this.gl,V=this.currentPipeline;if(f){var re=[V.drawMode,m||0,o,f];Wo(B)?B.drawArraysInstanced.apply(B,(0,Oo.ev)([],(0,Oo.CR)(re),!1)):(C=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(C,(0,Oo.ev)([],(0,Oo.CR)(re),!1))}else B.drawArrays(V.drawMode,m,o);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(o/3*Math.max(f,1))},a.prototype.drawIndexed=function(o,f,m,w,C){var D,B=this;if(this.renderBundle){this.renderBundle.push(function(){return B.drawIndexed(o,f,m,w,C)});return}var V=this.gl,re=this.currentPipeline,Te=Kc(re.inputLayout),Ae=Kc(this.currentIndexBufferByteOffset)+m*Te.indexBufferCompByteSize;if(f){var Fe=[re.drawMode,o,Te.indexBufferType,Ae,f];Wo(V)?V.drawElementsInstanced.apply(V,(0,Oo.ev)([],(0,Oo.CR)(Fe),!1)):(D=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(D,(0,Oo.ev)([],(0,Oo.CR)(Fe),!1))}else V.drawElements(re.drawMode,o,Te.indexBufferType,Ae);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(o/3*Math.max(f,1))},a.prototype.drawIndirect=function(o,f){},a.prototype.drawIndexedIndirect=function(o,f){},a.prototype.beginOcclusionQuery=function(o){var f=this.gl;if(Wo(f)){var m=this.currentRenderPassDescriptor.occlusionQueryPool;f.beginQuery(m.gl_query_type,m.gl_query[o])}},a.prototype.endOcclusionQuery=function(){var o=this.gl;if(Wo(o)){var f=this.currentRenderPassDescriptor.occlusionQueryPool;o.endQuery(f.gl_query_type)}},a.prototype.pipelineQueryReady=function(o){var f=o;return this.queryProgramReady(f.program)},a.prototype.pipelineForceReady=function(o){},a.prototype.endPass=function(){for(var o=this.gl,f=Wo(o),m=!1,w=0;w<this.currentColorAttachments.length;w++){var C=this.currentColorAttachments[w];if(C!==null){var D=this.currentColorResolveTos[w],B=!1;D!==null&&(qa(C.width===D.width&&C.height===D.height),this.setScissorRectEnabled(!1),f&&o.bindFramebuffer(o.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&f&&this.bindFramebufferAttachment(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,C,this.currentColorAttachmentLevels[w]),B=!0,D===this.scTexture?o.bindFramebuffer(f?Cn.DRAW_FRAMEBUFFER:Cn.FRAMEBUFFER,this.scPlatformFramebuffer):(o.bindFramebuffer(f?Cn.DRAW_FRAMEBUFFER:Cn.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&o.framebufferTexture2D(f?Cn.DRAW_FRAMEBUFFER:Cn.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,D.gl_texture,this.currentColorResolveToLevels[w])),f?(o.blitFramebuffer(0,0,C.width,C.height,0,0,D.width,D.height,o.COLOR_BUFFER_BIT,o.LINEAR),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(C,D),m=!0),this.currentRenderPassDescriptor.colorStore[w]||B||(o.bindFramebuffer(f?Cn.READ_FRAMEBUFFER:Cn.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(f?Cn.READ_FRAMEBUFFER:Cn.FRAMEBUFFER,o.COLOR_ATTACHMENT0,C,this.currentColorAttachmentLevels[w])),o.bindFramebuffer(f?Cn.READ_FRAMEBUFFER:Cn.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var V=this.currentDepthStencilAttachment;if(V){var re=this.currentDepthStencilResolveTo,B=!1;re&&(qa(V.width===re.width&&V.height===re.height),this.setScissorRectEnabled(!1),o.bindFramebuffer(f?Cn.READ_FRAMEBUFFER:Cn.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),o.bindFramebuffer(f?Cn.DRAW_FRAMEBUFFER:Cn.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(f?Cn.READ_FRAMEBUFFER:Cn.FRAMEBUFFER,V),this.bindFramebufferDepthStencilAttachment(f?Cn.DRAW_FRAMEBUFFER:Cn.FRAMEBUFFER,re)),B=!0,f&&o.blitFramebuffer(0,0,V.width,V.height,0,0,re.width,re.height,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(f?Cn.DRAW_FRAMEBUFFER:Cn.FRAMEBUFFER,null),m=!0),this.currentRenderPassDescriptor.depthStencilStore||(B||(o.bindFramebuffer(f?Cn.READ_FRAMEBUFFER:Cn.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(f?Cn.READ_FRAMEBUFFER:Cn.FRAMEBUFFER,V),B=!0),f&&o.invalidateFramebuffer(o.READ_FRAMEBUFFER,[o.DEPTH_STENCIL_ATTACHMENT])),B&&o.bindFramebuffer(f?Cn.READ_FRAMEBUFFER:Cn.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}m||o.bindFramebuffer(f?Cn.DRAW_FRAMEBUFFER:Cn.FRAMEBUFFER,null)},a.prototype.setScissorRectEnabled=function(o){if(this.currentScissorEnabled!==o){var f=this.gl;o?f.enable(f.SCISSOR_TEST):f.disable(f.SCISSOR_TEST),this.currentScissorEnabled=o}},a.prototype.applyStencil=function(){(0,Mp.Z)(this.currentStencilRef)||(this.gl.stencilFuncSeparate(Cn.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(Cn.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},a.prototype.getFallbackTexture=function(o){var f=o.gl_target,m=o.formatKind;if(f===Cn.TEXTURE_2D)return m===Sl.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===Cn.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===Cn.TEXTURE_3D)return this.fallbackTexture3D;if(f===Cn.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},a.prototype.submitBlitRenderPass=function(o,f){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:ca.VERTEX|ca.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:4*2,stepMode:Ih.VERTEX,attributes:[{format:lr.F32_RG,offset:4*0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:gc.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[lr.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:Vg(N0)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:o.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:o}));var m=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var w=this.createRenderPass({colorAttachment:[o],colorResolveTo:[f],colorClearColor:[WO]}),C=this.getCanvas(),D=C.width,B=C.height;w.setPipeline(this.blitRenderPipeline),w.setBindings(this.blitBindings),w.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),w.setViewport(0,0,D,B),this.gl.disable(this.gl.BLEND),w.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=m,this.inBlitRenderPass=!1},a}(),nw=function(){function a(o){this.pluginOptions=o}return a.prototype.createSwapChain=function(o){return(0,Oo.mG)(this,void 0,void 0,function(){var f,m,w,C,D,B,V,re,Te,Ae,Fe,Mt,rn;return(0,Oo.Jh)(this,function(In){return f=this.pluginOptions,m=f.targets,w=f.xrCompatible,C=f.antialias,D=C===void 0?!1:C,B=f.preserveDrawingBuffer,V=B===void 0?!1:B,re=f.premultipliedAlpha,Te=re===void 0?!0:re,Ae=f.shaderDebug,Fe=f.trackResources,Mt={antialias:D,preserveDrawingBuffer:V,stencil:!0,premultipliedAlpha:Te,xrCompatible:w},this.handleContextEvents(o),m.includes("webgl2")&&(rn=o.getContext("webgl2",Mt)||o.getContext("experimental-webgl2",Mt)),!rn&&m.includes("webgl1")&&(rn=o.getContext("webgl",Mt)||o.getContext("experimental-webgl",Mt)),[2,new tw(rn,{shaderDebug:Ae,trackResources:Fe})]})})},a.prototype.handleContextEvents=function(o){var f=this.pluginOptions,m=f.onContextLost,w=f.onContextRestored,C=f.onContextCreationError;C&&o.addEventListener("webglcontextcreationerror",C,!1),m&&o.addEventListener("webglcontextlost",m,!1),w&&o.addEventListener("webglcontextrestored",w,!1)},a}();let Lu;const rw=typeof TextDecoder!="undefined"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder!="undefined"&&rw.decode();let w_=null;function eb(){return(w_===null||w_.byteLength===0)&&(w_=new Uint8Array(Lu.memory.buffer)),w_}function tb(a,o){return a=a>>>0,rw.decode(eb().subarray(a,a+o))}const bv=new Array(128).fill(void 0);bv.push(void 0,null,!0,!1);let T_=bv.length;function P3(a){T_===bv.length&&bv.push(bv.length+1);const o=T_;return T_=bv[o],bv[o]=a,o}function nb(a){return bv[a]}function I3(a){a<132||(bv[a]=T_,T_=a)}function rm(a){const o=nb(a);return I3(a),o}let xv=0;const rb=typeof TextEncoder!="undefined"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},D3=typeof rb.encodeInto=="function"?function(a,o){return rb.encodeInto(a,o)}:function(a,o){const f=rb.encode(a);return o.set(f),{read:a.length,written:f.length}};function f2(a,o,f){if(f===void 0){const B=rb.encode(a),V=o(B.length,1)>>>0;return eb().subarray(V,V+B.length).set(B),xv=B.length,V}let m=a.length,w=o(m,1)>>>0;const C=eb();let D=0;for(;D<m;D++){const B=a.charCodeAt(D);if(B>127)break;C[w+D]=B}if(D!==m){D!==0&&(a=a.slice(D)),w=f(w,m,m=D+a.length*3,1)>>>0;const B=eb().subarray(w+D,w+m),V=D3(a,B);D+=V.written}return xv=D,w}let ib=null;function h2(){return(ib===null||ib.byteLength===0)&&(ib=new Int32Array(Lu.memory.buffer)),ib}function GI(a,o,f){let m,w;try{const B=Lu.__wbindgen_add_to_stack_pointer(-16),V=f2(a,Lu.__wbindgen_malloc,Lu.__wbindgen_realloc),re=xv,Te=f2(o,Lu.__wbindgen_malloc,Lu.__wbindgen_realloc),Ae=xv;Lu.glsl_compile(B,V,re,Te,Ae,f);var C=h2()[B/4+0],D=h2()[B/4+1];return m=C,w=D,tb(C,D)}finally{Lu.__wbindgen_add_to_stack_pointer(16),Lu.__wbindgen_free(m,w,1)}}class ob{static __wrap(o){o=o>>>0;const f=Object.create(ob.prototype);return f.__wbg_ptr=o,f}__destroy_into_raw(){const o=this.__wbg_ptr;return this.__wbg_ptr=0,o}free(){const o=this.__destroy_into_raw();Lu.__wbg_wgslcomposer_free(o)}constructor(){const o=Lu.wgslcomposer_new();return ob.__wrap(o)}load_composable(o){const f=f2(o,Lu.__wbindgen_malloc,Lu.__wbindgen_realloc),m=xv;Lu.wgslcomposer_load_composable(this.__wbg_ptr,f,m)}wgsl_compile(o){let f,m;try{const D=Lu.__wbindgen_add_to_stack_pointer(-16),B=f2(o,Lu.__wbindgen_malloc,Lu.__wbindgen_realloc),V=xv;Lu.wgslcomposer_wgsl_compile(D,this.__wbg_ptr,B,V);var w=h2()[D/4+0],C=h2()[D/4+1];return f=w,m=C,tb(w,C)}finally{Lu.__wbindgen_add_to_stack_pointer(16),Lu.__wbindgen_free(f,m,1)}}}function WI(a,o){return xI(this,null,function*(){if(typeof Response=="function"&&a instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return yield WebAssembly.instantiateStreaming(a,o)}catch(m){if(a.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",m);else throw m}const f=yield a.arrayBuffer();return yield WebAssembly.instantiate(f,o)}else{const f=yield WebAssembly.instantiate(a,o);return f instanceof WebAssembly.Instance?{instance:f,module:a}:f}})}function ZI(){const a={};return a.wbg={},a.wbg.__wbindgen_string_new=function(o,f){const m=tb(o,f);return P3(m)},a.wbg.__wbindgen_object_drop_ref=function(o){rm(o)},a.wbg.__wbg_log_1d3ae0273d8f4f8a=function(o){console.log(nb(o))},a.wbg.__wbg_log_576ca876af0d4a77=function(o,f){console.log(nb(o),nb(f))},a.wbg.__wbindgen_throw=function(o,f){throw new Error(tb(o,f))},a}function L3(a,o){return Lu=a.exports,iw.__wbindgen_wasm_module=o,ib=null,w_=null,Lu}function iw(a){return xI(this,null,function*(){if(Lu!==void 0)return Lu;const o=ZI();(typeof a=="string"||typeof Request=="function"&&a instanceof Request||typeof URL=="function"&&a instanceof URL)&&(a=fetch(a));const{instance:f,module:m}=yield WI(yield a,o);return L3(f,m)})}var Qc;(function(a){a[a.COPY_SRC=1]="COPY_SRC",a[a.COPY_DST=2]="COPY_DST",a[a.TEXTURE_BINDING=4]="TEXTURE_BINDING",a[a.STORAGE_BINDING=8]="STORAGE_BINDING",a[a.STORAGE=8]="STORAGE",a[a.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Qc||(Qc={}));var d2;(function(a){a[a.READ=1]="READ",a[a.WRITE=2]="WRITE"})(d2||(d2={}));function N3(a){var o=0;return a&Xf.SAMPLED&&(o|=Qc.TEXTURE_BINDING|Qc.COPY_DST|Qc.COPY_SRC),a&Xf.STORAGE&&(o|=Qc.TEXTURE_BINDING|Qc.STORAGE_BINDING|Qc.COPY_SRC|Qc.COPY_DST),a&Xf.RENDER_TARGET&&(o|=Qc.RENDER_ATTACHMENT|Qc.TEXTURE_BINDING|Qc.COPY_SRC|Qc.COPY_DST),o}function p2(a){if(a===lr.U8_R_NORM)return"r8unorm";if(a===lr.S8_R_NORM)return"r8snorm";if(a===lr.U8_RG_NORM)return"rg8unorm";if(a===lr.S8_RG_NORM)return"rg8snorm";if(a===lr.U32_R)return"r32uint";if(a===lr.S32_R)return"r32sint";if(a===lr.F32_R)return"r32float";if(a===lr.U16_RG)return"rg16uint";if(a===lr.S16_RG)return"rg16sint";if(a===lr.F16_RG)return"rg16float";if(a===lr.U8_RGBA_RT)return"bgra8unorm";if(a===lr.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(a===lr.U8_RGBA_NORM)return"rgba8unorm";if(a===lr.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(a===lr.S8_RGBA_NORM)return"rgba8snorm";if(a===lr.U32_RG)return"rg32uint";if(a===lr.S32_RG)return"rg32sint";if(a===lr.F32_RG)return"rg32float";if(a===lr.U16_RGBA)return"rgba16uint";if(a===lr.S16_RGBA)return"rgba16sint";if(a===lr.F16_RGBA)return"rgba16float";if(a===lr.F32_RGBA)return"rgba32float";if(a===lr.U32_RGBA)return"rgba32uint";if(a===lr.S32_RGBA)return"rgba32sint";if(a===lr.D24)return"depth24plus";if(a===lr.D24_S8)return"depth24plus-stencil8";if(a===lr.D32F)return"depth32float";if(a===lr.D32F_S8)return"depth32float-stencil8";if(a===lr.BC1)return"bc1-rgba-unorm";if(a===lr.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(a===lr.BC2)return"bc2-rgba-unorm";if(a===lr.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(a===lr.BC3)return"bc3-rgba-unorm";if(a===lr.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(a===lr.BC4_SNORM)return"bc4-r-snorm";if(a===lr.BC4_UNORM)return"bc4-r-unorm";if(a===lr.BC5_SNORM)return"bc5-rg-snorm";if(a===lr.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function F3(a){if(a===ds.TEXTURE_2D)return"2d";if(a===ds.TEXTURE_CUBE_MAP)return"2d";if(a===ds.TEXTURE_2D_ARRAY)return"2d";if(a===ds.TEXTURE_3D)return"3d";throw new Error("whoops")}function B3(a){if(a===ds.TEXTURE_2D)return"2d";if(a===ds.TEXTURE_CUBE_MAP)return"cube";if(a===ds.TEXTURE_2D_ARRAY)return"2d-array";if(a===ds.TEXTURE_3D)return"3d";throw new Error("whoops")}function k3(a){var o=0;return a&ca.INDEX&&(o|=GPUBufferUsage.INDEX),a&ca.VERTEX&&(o|=GPUBufferUsage.VERTEX),a&ca.UNIFORM&&(o|=GPUBufferUsage.UNIFORM),a&ca.STORAGE&&(o|=GPUBufferUsage.STORAGE),a&ca.COPY_SRC&&(o|=GPUBufferUsage.COPY_SRC),a&ca.INDIRECT&&(o|=GPUBufferUsage.INDIRECT),o|=GPUBufferUsage.COPY_DST,o}function v2(a){if(a===fh.CLAMP_TO_EDGE)return"clamp-to-edge";if(a===fh.REPEAT)return"repeat";if(a===fh.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function ow(a){if(a===Du.BILINEAR)return"linear";if(a===Du.POINT)return"nearest";throw new Error("whoops")}function aw(a){if(a===qc.LINEAR)return"linear";if(a===qc.NEAREST)return"nearest";if(a===qc.NO_MIP)return"nearest";throw new Error("whoops")}function Xg(a){var o=a;return o.gpuBuffer}function sw(a){var o=a;return o.gpuSampler}function z3(a){var o=a;return o.querySet}function lw(a){if(a===yc.OcclusionConservative)return"occlusion";throw new Error("whoops")}function U3(a){switch(a){case gc.TRIANGLES:return"triangle-list";case gc.POINTS:return"point-list";case gc.TRIANGLE_STRIP:return"triangle-strip";case gc.LINES:return"line-list";case gc.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function m2(a){if(a===ud.NONE)return"none";if(a===ud.FRONT)return"front";if(a===ud.BACK)return"back";throw new Error("whoops")}function j3(a){if(a===m_.CCW)return"ccw";if(a===m_.CW)return"cw";throw new Error("whoops")}function Ev(a,o){return{topology:U3(a),cullMode:m2(o.cullMode),frontFace:j3(o.frontFace)}}function uw(a){if(a===hs.ZERO)return"zero";if(a===hs.ONE)return"one";if(a===hs.SRC)return"src";if(a===hs.ONE_MINUS_SRC)return"one-minus-src";if(a===hs.DST)return"dst";if(a===hs.ONE_MINUS_DST)return"one-minus-dst";if(a===hs.SRC_ALPHA)return"src-alpha";if(a===hs.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(a===hs.DST_ALPHA)return"dst-alpha";if(a===hs.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(a===hs.CONST)return"constant";if(a===hs.ONE_MINUS_CONSTANT)return"one-minus-constant";if(a===hs.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function V3(a){if(a===Bf.ADD)return"add";if(a===Bf.SUBSTRACT)return"subtract";if(a===Bf.REVERSE_SUBSTRACT)return"reverse-subtract";if(a===Bf.MIN)return"min";if(a===Bf.MAX)return"max";throw new Error("whoops")}function g2(a){return{operation:V3(a.blendMode),srcFactor:uw(a.blendSrcFactor),dstFactor:uw(a.blendDstFactor)}}function cw(a){return a.blendMode===Bf.ADD&&a.blendSrcFactor===hs.ONE&&a.blendDstFactor===hs.ZERO}function hi(a){if(!(cw(a.rgbBlendState)&&cw(a.alphaBlendState)))return{color:g2(a.rgbBlendState),alpha:g2(a.alphaBlendState)}}function H3(a,o){return{format:p2(o),blend:hi(a),writeMask:a.channelWriteMask}}function XI(a,o){return o.attachmentsState.map(function(f,m){return H3(f,a[m])})}function Yg(a){if(a===os.NEVER)return"never";if(a===os.LESS)return"less";if(a===os.EQUAL)return"equal";if(a===os.LEQUAL)return"less-equal";if(a===os.GREATER)return"greater";if(a===os.NOTEQUAL)return"not-equal";if(a===os.GEQUAL)return"greater-equal";if(a===os.ALWAYS)return"always";throw new Error("whoops")}function Qm(a){if(a===xu.KEEP)return"keep";if(a===xu.REPLACE)return"replace";if(a===xu.ZERO)return"zero";if(a===xu.DECREMENT_CLAMP)return"decrement-clamp";if(a===xu.DECREMENT_WRAP)return"decrement-wrap";if(a===xu.INCREMENT_CLAMP)return"increment-clamp";if(a===xu.INCREMENT_WRAP)return"increment-wrap";if(a===xu.INVERT)return"invert";throw new Error("whoops")}function fw(a,o){if(!(0,Mp.Z)(a))return{format:p2(a),depthWriteEnabled:!!o.depthWrite,depthCompare:Yg(o.depthCompare),depthBias:o.polygonOffset?1:0,depthBiasSlopeScale:o.polygonOffset?1:0,stencilFront:{compare:Yg(o.stencilFront.compare),passOp:Qm(o.stencilFront.passOp),failOp:Qm(o.stencilFront.failOp),depthFailOp:Qm(o.stencilFront.depthFailOp)},stencilBack:{compare:Yg(o.stencilBack.compare),passOp:Qm(o.stencilBack.passOp),failOp:Qm(o.stencilBack.failOp),depthFailOp:Qm(o.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function hw(a){if(a!==null){if(a===lr.U16_R)return"uint16";if(a===lr.U32_R)return"uint32";throw new Error("whoops")}}function A_(a){if(a===Ih.VERTEX)return"vertex";if(a===Ih.INSTANCE)return"instance";throw new Error("whoops")}function Nu(a){if(a===lr.U8_R)return"uint8x2";if(a===lr.U8_RG)return"uint8x2";if(a===lr.U8_RGB)return"uint8x4";if(a===lr.U8_RGBA)return"uint8x4";if(a===lr.U8_RG_NORM)return"unorm8x2";if(a===lr.U8_RGBA_NORM)return"unorm8x4";if(a===lr.S8_RGB_NORM)return"snorm8x4";if(a===lr.S8_RGBA_NORM)return"snorm8x4";if(a===lr.U16_RG_NORM)return"unorm16x2";if(a===lr.U16_RGBA_NORM)return"unorm16x4";if(a===lr.S16_RG_NORM)return"snorm16x2";if(a===lr.S16_RGBA_NORM)return"snorm16x4";if(a===lr.S16_RG)return"uint16x2";if(a===lr.F16_RG)return"float16x2";if(a===lr.F16_RGBA)return"float16x4";if(a===lr.F32_R)return"float32";if(a===lr.F32_RG)return"float32x2";if(a===lr.F32_RGB)return"float32x3";if(a===lr.F32_RGBA)return"float32x4";throw"whoops"}function ab(a){var o=oc(a);switch(o){case ii.BC1:case ii.BC2:case ii.BC3:case ii.BC4_SNORM:case ii.BC4_UNORM:case ii.BC5_SNORM:case ii.BC5_UNORM:return!0;default:return!1}}function dw(a){var o=oc(a);switch(o){case ii.BC1:case ii.BC2:case ii.BC3:case ii.BC4_SNORM:case ii.BC4_UNORM:case ii.BC5_SNORM:case ii.BC5_UNORM:return 4;default:return 1}}function G3(a,o,f,m){switch(f===void 0&&(f=!1),a){case lr.S8_R:case lr.S8_R_NORM:case lr.S8_RG_NORM:case lr.S8_RGB_NORM:case lr.S8_RGBA_NORM:{var w=o instanceof ArrayBuffer?new Int8Array(o):new Int8Array(o);return m&&w.set(new Int8Array(m)),w}case lr.U8_R:case lr.U8_R_NORM:case lr.U8_RG:case lr.U8_RG_NORM:case lr.U8_RGB:case lr.U8_RGB_NORM:case lr.U8_RGB_SRGB:case lr.U8_RGBA:case lr.U8_RGBA_NORM:case lr.U8_RGBA_SRGB:{var C=o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o);return m&&C.set(new Uint8Array(m)),C}case lr.S16_R:case lr.S16_RG:case lr.S16_RG_NORM:case lr.S16_RGB_NORM:case lr.S16_RGBA:case lr.S16_RGBA_NORM:{var D=o instanceof ArrayBuffer?new Int16Array(o):new Int16Array(f?o/2:o);return m&&D.set(new Int16Array(m)),D}case lr.U16_R:case lr.U16_RGB:case lr.U16_RGBA_5551:case lr.U16_RGBA_NORM:case lr.U16_RG_NORM:case lr.U16_R_NORM:{var B=o instanceof ArrayBuffer?new Uint16Array(o):new Uint16Array(f?o/2:o);return m&&B.set(new Uint16Array(m)),B}case lr.S32_R:{var V=o instanceof ArrayBuffer?new Int32Array(o):new Int32Array(f?o/4:o);return m&&V.set(new Int32Array(m)),V}case lr.U32_R:case lr.U32_RG:{var re=o instanceof ArrayBuffer?new Uint32Array(o):new Uint32Array(f?o/4:o);return m&&re.set(new Uint32Array(m)),re}case lr.F32_R:case lr.F32_RG:case lr.F32_RGB:case lr.F32_RGBA:{var Te=o instanceof ArrayBuffer?new Float32Array(o):new Float32Array(f?o/4:o);return m&&Te.set(new Float32Array(m)),Te}}var Ae=o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o);return m&&Ae.set(new Uint8Array(m)),Ae}function YI(a){var o=(a&32768)>>15,f=(a&31744)>>10,m=a&1023;return f===0?(o?-1:1)*Math.pow(2,-14)*(m/Math.pow(2,10)):f==31?m?NaN:(o?-1:1)*(1/0):(o?-1:1)*Math.pow(2,f-15)*(1+m/Math.pow(2,10))}function sb(a){switch(a){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var Zd=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this)||this;return C.id=m,C.device=w,C}return o.prototype.destroy=function(){},o}(kS),$I=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D,B,V=a.call(this,{id:m,device:w})||this;V.type=Ar.Bindings;var re=C.pipeline;qa(!!re);var Te=C.uniformBufferBindings,Ae=C.storageBufferBindings,Fe=C.samplerBindings,Mt=C.storageTextureBindings;V.numUniformBuffers=(Te==null?void 0:Te.length)||0;var rn=[[],[],[],[]],In=0;if(Te&&Te.length)for(var ar=0;ar<Te.length;ar++){var Cr=C.uniformBufferBindings[ar],vr=Cr.binding,qr=Cr.size,ri=Cr.offset,po=Cr.buffer,ho={buffer:Xg(po),offset:ri!=null?ri:0,size:qr};rn[0].push({binding:vr!=null?vr:In++,resource:ho})}if(Fe&&Fe.length){In=0;for(var ar=0;ar<Fe.length;ar++){var Xr=(0,Oo.pi)((0,Oo.pi)({},Fe[ar]),e2),vr=C.samplerBindings[ar],lo=vr.texture!==null?vr.texture:V.device.getFallbackTexture(Xr);Xr.dimension=lo.dimension,Xr.formatKind=jS(lo.format);var za=lo.gpuTextureView;if(rn[1].push({binding:(D=vr.textureBinding)!==null&&D!==void 0?D:In++,resource:za}),vr.samplerBinding!==-1){var Ps=vr.sampler!==null?vr.sampler:V.device.getFallbackSampler(Xr),zi=sw(Ps);rn[1].push({binding:(B=vr.samplerBinding)!==null&&B!==void 0?B:In++,resource:zi})}}}if(Ae&&Ae.length){In=0;for(var ar=0;ar<Ae.length;ar++){var _s=C.storageBufferBindings[ar],vr=_s.binding,qr=_s.size,ri=_s.offset,po=_s.buffer,ho={buffer:Xg(po),offset:ri!=null?ri:0,size:qr};rn[2].push({binding:vr!=null?vr:In++,resource:ho})}}if(Mt&&Mt.length){In=0;for(var ar=0;ar<Mt.length;ar++){var as=C.storageTextureBindings[ar],vr=as.binding,lo=as.texture,za=lo.gpuTextureView;rn[3].push({binding:vr!=null?vr:In++,resource:za})}}var $f=rn.findLastIndex(function(Yd){return!!Yd.length});return V.gpuBindGroup=rn.map(function(Yd,$d){return $d<=$f&&V.device.device.createBindGroup({layout:re.getBindGroupLayout($d),entries:Yd})}),V}return o}(Zd),qI=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Ar.Buffer;var B=C.usage,V=C.viewOrSize,re=!!(B&ca.MAP_READ);D.usage=k3(B),re&&(D.usage=ca.MAP_READ|ca.COPY_DST);var Te=!(0,zg.Z)(V);if(D.view=(0,zg.Z)(V)?null:V,D.size=(0,zg.Z)(V)?B1(V,4):B1(V.byteLength,4),(0,zg.Z)(V))D.gpuBuffer=D.device.device.createBuffer({usage:D.usage,size:D.size,mappedAtCreation:re?Te:!1});else{D.gpuBuffer=D.device.device.createBuffer({usage:D.usage,size:D.size,mappedAtCreation:!0});var Ae=V&&V.constructor||Float32Array;new Ae(D.gpuBuffer.getMappedRange()).set(V),D.gpuBuffer.unmap()}return D}return o.prototype.setSubData=function(f,m,w,C){w===void 0&&(w=0),C===void 0&&(C=0);var D=this.gpuBuffer;C=C||m.byteLength,C=Math.min(C,this.size-f);var B=m.byteOffset+w,V=B+C,re=C+3&-4;if(re!==C){var Te=new Uint8Array(m.buffer.slice(B,V));m=new Uint8Array(re),m.set(Te),w=0,B=0,V=re,C=re}for(var Ae=1024*1024*15,Fe=0;V-(B+Fe)>Ae;)this.device.device.queue.writeBuffer(D,f+Fe,m.buffer,B+Fe,Ae),Fe+=Ae;this.device.device.queue.writeBuffer(D,f+Fe,m.buffer,B+Fe,C-Fe)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gpuBuffer.destroy()},o}(Zd),y2=function(){function a(){this.gpuComputePassEncoder=null}return a.prototype.dispatchWorkgroups=function(o,f,m){this.gpuComputePassEncoder.dispatchWorkgroups(o,f,m)},a.prototype.dispatchWorkgroupsIndirect=function(o,f){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(o.gpuBuffer,f)},a.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},a.prototype.beginComputePass=function(o){qa(this.gpuComputePassEncoder===null),this.frameCommandEncoder=o,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},a.prototype.setPipeline=function(o){var f=o,m=Kc(f.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(m)},a.prototype.setBindings=function(o){var f=this,m=o;m.gpuBindGroup.forEach(function(w,C){w&&f.gpuComputePassEncoder.setBindGroup(C,m.gpuBindGroup[C])})},a.prototype.pushDebugGroup=function(o){this.gpuComputePassEncoder.pushDebugGroup(o)},a.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},a.prototype.insertDebugMarker=function(o){this.gpuComputePassEncoder.insertDebugMarker(o)},a}(),$g=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Ar.ComputePipeline,D.gpuComputePipeline=null,D.descriptor=C;var B=C.program,V=B.computeStage;if(V===null)return D;var re={layout:"auto",compute:(0,Oo.pi)({},V)};return D.gpuComputePipeline=D.device.device.createComputePipeline(re),D.name!==void 0&&(D.gpuComputePipeline.label=D.name),D}return o.prototype.getBindGroupLayout=function(f){return this.gpuComputePipeline.getBindGroupLayout(f)},o}(Zd),pw=function(a){(0,Oo.ZT)(o,a);function o(f){var m,w,C,D,B=f.id,V=f.device,re=f.descriptor,Te=a.call(this,{id:B,device:V})||this;Te.type=Ar.InputLayout;var Ae=[];try{for(var Fe=(0,Oo.XA)(re.vertexBufferDescriptors),Mt=Fe.next();!Mt.done;Mt=Fe.next()){var rn=Mt.value,In=rn.arrayStride,ar=rn.stepMode,Cr=rn.attributes;Ae.push({arrayStride:In,stepMode:A_(ar),attributes:[]});try{for(var vr=(C=void 0,(0,Oo.XA)(Cr)),qr=vr.next();!qr.done;qr=vr.next()){var ri=qr.value,po=ri.shaderLocation,ho=ri.format,Xr=ri.offset;Ae[Ae.length-1].attributes.push({shaderLocation:po,format:Nu(ho),offset:Xr})}}catch(lo){C={error:lo}}finally{try{qr&&!qr.done&&(D=vr.return)&&D.call(vr)}finally{if(C)throw C.error}}}}catch(lo){m={error:lo}}finally{try{Mt&&!Mt.done&&(w=Fe.return)&&w.call(Fe)}finally{if(m)throw m.error}}return Te.indexFormat=hw(re.indexBufferFormat),Te.buffers=Ae,Te}return o}(Zd),vw=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;return D.type=Ar.Program,D.vertexStage=null,D.fragmentStage=null,D.computeStage=null,D.descriptor=C,C.vertex&&(D.vertexStage=D.createShaderStage(C.vertex,"vertex")),C.fragment&&(D.fragmentStage=D.createShaderStage(C.fragment,"fragment")),C.compute&&(D.computeStage=D.createShaderStage(C.compute,"compute")),D}return o.prototype.setUniformsLegacy=function(f){},o.prototype.createShaderStage=function(f,m){var w,C,D=f.glsl,B=f.wgsl,V=f.entryPoint,re=f.postprocess,Te=!1,Ae=B;if(!Ae)try{Ae=this.device.glsl_compile(D,m,Te)}catch(Cr){throw console.error(Cr,D),new Error("whoops")}var Fe=function(Cr){if(!Ae.includes(Cr))return"continue";Ae=Ae.replace("var T_".concat(Cr,": texture_2d<f32>;"),"var T_".concat(Cr,": texture_depth_2d;")),Ae=Ae.replace(new RegExp("textureSample\\(T_".concat(Cr,"(.*)\\);$"),"gm"),function(vr,qr){return"vec4<f32>(textureSample(T_".concat(Cr).concat(qr,"), 0.0, 0.0, 0.0);")})};try{for(var Mt=(0,Oo.XA)(["u_TextureFramebufferDepth"]),rn=Mt.next();!rn.done;rn=Mt.next()){var In=rn.value;Fe(In)}}catch(Cr){w={error:Cr}}finally{try{rn&&!rn.done&&(C=Mt.return)&&C.call(Mt)}finally{if(w)throw w.error}}re&&(Ae=re(Ae));var ar=this.device.device.createShaderModule({code:Ae});return{module:ar,entryPoint:V||"main"}},o}(Zd),mw=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;D.type=Ar.QueryPool;var B=C.elemCount,V=C.type;return D.querySet=D.device.device.createQuerySet({type:lw(V),count:B}),D.resolveBuffer=D.device.device.createBuffer({size:B*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),D.cpuBuffer=D.device.device.createBuffer({size:B*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),D.results=null,D}return o.prototype.queryResultOcclusion=function(f){return this.results===null?null:this.results[f]!==BigInt(0)},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},o}(Zd),W3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this,{id:m,device:w})||this;return C.type=Ar.Readback,C}return o.prototype.readTexture=function(f,m,w,C,D,B,V,re){return V===void 0&&(V=0),(0,Oo.mG)(this,void 0,void 0,function(){var Te,Ae,Fe,Mt,rn,In,ar,Cr;return(0,Oo.Jh)(this,function(vr){return Te=f,Ae=0,Fe=sb(Te.gpuTextureformat),Mt=Math.ceil(C/Fe.width)*Fe.length,rn=Math.ceil(Mt/256)*256,In=rn*D,ar=this.device.createBuffer({usage:ca.STORAGE|ca.MAP_READ|ca.COPY_DST,hint:Rp.STATIC,viewOrSize:In}),Cr=this.device.device.createCommandEncoder(),Cr.copyTextureToBuffer({texture:Te.gpuTexture,mipLevel:0,origin:{x:m,y:w,z:Math.max(Ae,0)}},{buffer:ar.gpuBuffer,offset:0,bytesPerRow:rn},{width:C,height:D,depthOrArrayLayers:1}),this.device.device.queue.submit([Cr.finish()]),[2,this.readBuffer(ar,0,B.byteLength===In?B:null,V,In,Te.format,!0,!1,Mt,rn,D)]})})},o.prototype.readTextureSync=function(f,m,w,C,D,B,V,re){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},o.prototype.readBuffer=function(f,m,w,C,D,B,V,re,Te,Ae,Fe){var Mt=this;m===void 0&&(m=0),w===void 0&&(w=null),D===void 0&&(D=0),B===void 0&&(B=lr.U8_RGB),V===void 0&&(V=!1),Te===void 0&&(Te=0),Ae===void 0&&(Ae=0),Fe===void 0&&(Fe=0);var rn=f,In=D||rn.size,ar=w||rn.view,Cr=ar&&ar.constructor&&ar.constructor.BYTES_PER_ELEMENT||US(B),vr=rn;if(!(rn.usage&ca.MAP_READ&&rn.usage&ca.COPY_DST)){var qr=this.device.device.createCommandEncoder();vr=this.device.createBuffer({usage:ca.STORAGE|ca.MAP_READ|ca.COPY_DST,hint:Rp.STATIC,viewOrSize:In}),qr.copyBufferToBuffer(rn.gpuBuffer,m,vr.gpuBuffer,0,In),this.device.device.queue.submit([qr.finish()])}return new Promise(function(ri,po){vr.gpuBuffer.mapAsync(d2.READ,m,In).then(function(){var ho=vr.gpuBuffer.getMappedRange(m,In),Xr=ar;if(V)Xr===null?Xr=G3(B,In,!0,ho):Xr=G3(B,Xr.buffer,void 0,ho);else if(Xr===null)switch(Cr){case 1:Xr=new Uint8Array(In),Xr.set(new Uint8Array(ho));break;case 2:Xr=Mt.getHalfFloatAsFloatRGBAArrayBuffer(In/2,ho);break;case 4:Xr=new Float32Array(In/4),Xr.set(new Float32Array(ho));break}else switch(Cr){case 1:Xr=new Uint8Array(Xr.buffer),Xr.set(new Uint8Array(ho));break;case 2:Xr=Mt.getHalfFloatAsFloatRGBAArrayBuffer(In/2,ho,ar);break;case 4:var lo=ar&&ar.constructor||Float32Array;Xr=new lo(Xr.buffer),Xr.set(new lo(ho));break}if(Te!==Ae){Cr===1&&!V&&(Te*=2,Ae*=2);for(var za=new Uint8Array(Xr.buffer),Ps=Te,zi=0,_s=1;_s<Fe;++_s){zi=_s*Ae;for(var as=0;as<Te;++as)za[Ps++]=za[zi++]}Cr!==0&&!V?Xr=new Float32Array(za.buffer,0,Ps/4):Xr=new Uint8Array(za.buffer,0,Ps)}vr.gpuBuffer.unmap(),ri(Xr)},function(ho){return po(ho)})})},o.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(f,m,w){w||(w=new Float32Array(f));for(var C=new Uint16Array(m);f--;)w[f]=YI(C[f]);return w},o}(Zd),im=function(){function a(o){this.device=o,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return a.prototype.getEncoder=function(){var o;return((o=this.renderBundle)===null||o===void 0?void 0:o.renderBundleEncoder)||this.gpuRenderPassEncoder},a.prototype.getTextureView=function(o,f){return qa(f<o.mipLevelCount),o.mipLevelCount===1?o.gpuTextureView:o.gpuTexture.createView({baseMipLevel:f,mipLevelCount:1})},a.prototype.setRenderPassDescriptor=function(o){var f,m,w,C,D,B;this.descriptor=o,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var V=o.colorAttachment.length;this.gfxColorAttachment.length=V,this.gfxColorResolveTo.length=V;for(var re=0;re<o.colorAttachment.length;re++){var Te=o.colorAttachment[re],Ae=o.colorResolveTo[re];if(Te===null&&Ae!==null&&(Te=Ae,Ae=null),this.gfxColorAttachment[re]=Te,this.gfxColorResolveTo[re]=Ae,this.gfxColorAttachmentLevel[re]=((f=o.colorAttachmentLevel)===null||f===void 0?void 0:f[re])||0,this.gfxColorResolveToLevel[re]=((m=o.colorResolveToLevel)===null||m===void 0?void 0:m[re])||0,Te!==null){this.gpuColorAttachments[re]===void 0&&(this.gpuColorAttachments[re]={});var Fe=this.gpuColorAttachments[re];Fe.view=this.getTextureView(Te,((w=this.gfxColorAttachmentLevel)===null||w===void 0?void 0:w[re])||0);var Mt=(D=(C=o.colorClearColor)===null||C===void 0?void 0:C[re])!==null&&D!==void 0?D:"load";Mt==="load"?Fe.loadOp="load":(Fe.loadOp="clear",Fe.clearValue=Mt),Fe.storeOp=!((B=o.colorStore)===null||B===void 0)&&B[re]?"store":"discard",Fe.resolveTarget=void 0,Ae!==null&&(Te.sampleCount>1?Fe.resolveTarget=this.getTextureView(Ae,this.gfxColorResolveToLevel[re]):Fe.storeOp="store")}else{this.gpuColorAttachments.length=re,this.gfxColorAttachment.length=re,this.gfxColorResolveTo.length=re;break}}if(this.gfxDepthStencilAttachment=o.depthStencilAttachment,this.gfxDepthStencilResolveTo=o.depthStencilResolveTo,o.depthStencilAttachment){var rn=o.depthStencilAttachment,Fe=this.gpuDepthStencilAttachment;Fe.view=rn.gpuTextureView;var In=!!(Ug(rn.format)&Ki.Depth);In?(o.depthClearValue==="load"?Fe.depthLoadOp="load":(Fe.depthLoadOp="clear",Fe.depthClearValue=o.depthClearValue),o.depthStencilStore||this.gfxDepthStencilResolveTo!==null?Fe.depthStoreOp="store":Fe.depthStoreOp="discard"):(Fe.depthLoadOp=void 0,Fe.depthStoreOp=void 0);var ar=!!(Ug(rn.format)&Ki.Stencil);ar?(o.stencilClearValue==="load"?Fe.stencilLoadOp="load":(Fe.stencilLoadOp="clear",Fe.stencilClearValue=o.stencilClearValue),o.depthStencilStore||this.gfxDepthStencilResolveTo!==null?Fe.stencilStoreOp="store":Fe.stencilStoreOp="discard"):(Fe.stencilLoadOp=void 0,Fe.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=(0,Mp.Z)(o.occlusionQueryPool)?void 0:z3(o.occlusionQueryPool)},a.prototype.beginRenderPass=function(o,f){qa(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(f),this.frameCommandEncoder=o,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},a.prototype.flipY=function(o,f){var m=this.device.swapChainHeight;return m-o-f},a.prototype.setViewport=function(o,f,m,w,C,D){C===void 0&&(C=0),D===void 0&&(D=1),this.gpuRenderPassEncoder.setViewport(o,this.flipY(f,w),m,w,C,D)},a.prototype.setScissorRect=function(o,f,m,w){this.gpuRenderPassEncoder.setScissorRect(o,this.flipY(f,w),m,w)},a.prototype.setPipeline=function(o){var f=o,m=Kc(f.gpuRenderPipeline);this.getEncoder().setPipeline(m)},a.prototype.setVertexInput=function(o,f,m){if(o!==null){var w=this.getEncoder(),C=o;m!==null&&w.setIndexBuffer(Xg(m.buffer),Kc(C.indexFormat),m.offset);for(var D=0;D<f.length;D++){var B=f[D];B!==null&&w.setVertexBuffer(D,Xg(B.buffer),B.offset)}}},a.prototype.setBindings=function(o){var f=o,m=this.getEncoder();f.gpuBindGroup.forEach(function(w,C){w&&m.setBindGroup(C,f.gpuBindGroup[C])})},a.prototype.setStencilReference=function(o){this.gpuRenderPassEncoder.setStencilReference(o)},a.prototype.draw=function(o,f,m,w){this.getEncoder().draw(o,f,m,w)},a.prototype.drawIndexed=function(o,f,m,w,C){this.getEncoder().drawIndexed(o,f,m,w,C)},a.prototype.drawIndirect=function(o,f){this.getEncoder().drawIndirect(Xg(o),f)},a.prototype.drawIndexedIndirect=function(o,f){this.getEncoder().drawIndexedIndirect(Xg(o),f)},a.prototype.beginOcclusionQuery=function(o){this.gpuRenderPassEncoder.beginOcclusionQuery(o)},a.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},a.prototype.pushDebugGroup=function(o){this.gpuRenderPassEncoder.pushDebugGroup(o)},a.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},a.prototype.insertDebugMarker=function(o){this.gpuRenderPassEncoder.insertDebugMarker(o)},a.prototype.beginBundle=function(o){this.renderBundle=o},a.prototype.endBundle=function(){this.renderBundle.finish()},a.prototype.executeBundles=function(o){this.gpuRenderPassEncoder.executeBundles(o.map(function(f){return f.renderBundle}))},a.prototype.finish=function(){var o;(o=this.gpuRenderPassEncoder)===null||o===void 0||o.end(),this.gpuRenderPassEncoder=null;for(var f=0;f<this.gfxColorAttachment.length;f++){var m=this.gfxColorAttachment[f],w=this.gfxColorResolveTo[f];m!==null&&w!==null&&m.sampleCount===1&&this.copyAttachment(w,this.gfxColorAttachmentLevel[f],m,this.gfxColorResolveToLevel[f])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},a.prototype.copyAttachment=function(o,f,m,w){qa(m.sampleCount===1);var C={texture:m.gpuTexture,mipLevel:w},D={texture:o.gpuTexture,mipLevel:f};qa(m.width>>>w===o.width>>>f),qa(m.height>>>w===o.height>>>f),qa(!!(m.usage&Qc.COPY_SRC)),qa(!!(o.usage&Qc.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(C,D,[o.width,o.height,1])},a}(),_2=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=a.call(this,{id:m,device:w})||this;return D.type=Ar.RenderPipeline,D.isCreatingAsync=!1,D.gpuRenderPipeline=null,D.descriptor=C,D.device.createRenderPipelineInternal(D,!1),D}return o.prototype.getBindGroupLayout=function(f){return this.gpuRenderPipeline.getBindGroupLayout(f)},o}(Zd),Z3=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D,B,V=a.call(this,{id:m,device:w})||this;V.type=Ar.Sampler;var re=C.lodMinClamp,Te=C.mipmapFilter===qc.NO_MIP?C.lodMinClamp:C.lodMaxClamp,Ae=(D=C.maxAnisotropy)!==null&&D!==void 0?D:1;return Ae>1&&qa(C.minFilter===Du.BILINEAR&&C.magFilter===Du.BILINEAR&&C.mipmapFilter===qc.LINEAR),V.gpuSampler=V.device.device.createSampler({addressModeU:v2(C.addressModeU),addressModeV:v2(C.addressModeV),addressModeW:v2((B=C.addressModeW)!==null&&B!==void 0?B:C.addressModeU),lodMinClamp:re,lodMaxClamp:Te,minFilter:ow(C.minFilter),magFilter:ow(C.magFilter),mipmapFilter:aw(C.mipmapFilter),compare:C.compareFunction!==void 0?Yg(C.compareFunction):void 0,maxAnisotropy:Ae}),V}return o}(Zd),qg=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=f.descriptor,D=f.skipCreate,B=f.sampleCount,V=a.call(this,{id:m,device:w})||this;V.type=Ar.Texture,V.flipY=!1;var re=C.format,Te=C.dimension,Ae=C.width,Fe=C.height,Mt=C.depthOrArrayLayers,rn=C.mipLevelCount,In=C.usage,ar=C.pixelStore;return V.flipY=!!(ar!=null&&ar.unpackFlipY),V.device.createTextureShared({format:re,dimension:Te!=null?Te:ds.TEXTURE_2D,width:Ae,height:Fe,depthOrArrayLayers:Mt!=null?Mt:1,mipLevelCount:rn!=null?rn:1,usage:In,sampleCount:B!=null?B:1},V,D),V}return o.prototype.textureFromImageBitmapOrCanvas=function(f,m,w){for(var C=m[0].width,D=m[0].height,B={size:{width:C,height:D,depthOrArrayLayers:w},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},V=f.createTexture(B),re=0;re<m.length;re++)f.queue.copyExternalImageToTexture({source:m[re],flipY:this.flipY},{texture:V,origin:[0,0,re]},[C,D]);return[V,C,D]},o.prototype.isImageBitmapOrCanvases=function(f){var m=f[0];return m instanceof ImageBitmap||m instanceof HTMLCanvasElement||m instanceof OffscreenCanvas},o.prototype.isVideo=function(f){var m=f[0];return m instanceof HTMLVideoElement},o.prototype.setImageData=function(f,m){var w,C=this,D=this.device.device,B,V,re;if(this.isImageBitmapOrCanvases(f))w=(0,Oo.CR)(this.textureFromImageBitmapOrCanvas(D,f,this.depthOrArrayLayers),3),B=w[0],V=w[1],re=w[2];else if(this.isVideo(f))B=D.importExternalTexture({source:f[0]});else{var Te=sb(this.gpuTextureformat),Ae=Math.ceil(this.width/Te.width)*Te.length;f.forEach(function(Fe){D.queue.writeTexture({texture:C.gpuTexture},Fe,{bytesPerRow:Ae},{width:C.width,height:C.height})})}this.width=V,this.height=re,B&&(this.gpuTexture=B),this.gpuTextureView=this.gpuTexture.createView({dimension:B3(this.dimension)})},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.gpuTexture.destroy()},o}(Zd),Kg=function(a){(0,Oo.ZT)(o,a);function o(f){var m=f.id,w=f.device,C=a.call(this,{id:m,device:w})||this;return C.type=Ar.RenderBundle,C.renderBundleEncoder=C.device.device.createRenderBundleEncoder({colorFormats:[C.device.swapChainFormat]}),C}return o.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},o}(Zd),b2=function(){function a(o,f,m,w,C,D){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=Qc.RENDER_ATTACHMENT|Qc.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=Gd.UPPER_LEFT,this.clipSpaceNearZ=em.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=f,this.canvas=m,this.canvasContext=w,this.glsl_compile=C,this.WGSLComposer=D,this.fallbackTexture2D=this.createFallbackTexture(ds.TEXTURE_2D,Sl.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(ds.TEXTURE_2D,Sl.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(ds.TEXTURE_2D_ARRAY,Sl.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(ds.TEXTURE_3D,Sl.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(ds.TEXTURE_CUBE_MAP,Sl.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:fh.REPEAT,addressModeV:fh.REPEAT,minFilter:Du.POINT,magFilter:Du.POINT,mipmapFilter:qc.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:fh.REPEAT,addressModeV:fh.REPEAT,minFilter:Du.POINT,magFilter:Du.POINT,mipmapFilter:qc.NEAREST,compareFunction:os.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(B){console.error(B.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return a.prototype.destroy=function(){},a.prototype.configureSwapChain=function(o,f){this.swapChainWidth===o&&this.swapChainHeight===f||(this.swapChainWidth=o,this.swapChainHeight=f)},a.prototype.getOnscreenTexture=function(){var o=this.canvasContext.getCurrentTexture(),f=o.createView(),m=new qg({id:0,device:this,descriptor:{format:lr.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:ds.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return m.depthOrArrayLayers=1,m.sampleCount=1,m.gpuTexture=o,m.gpuTextureView=f,m.name="Onscreen",this.setResourceName(m,"Onscreen Texture"),m},a.prototype.getDevice=function(){return this},a.prototype.getCanvas=function(){return this.canvas},a.prototype.beginFrame=function(){qa(this.frameCommandEncoderPool.length===0)},a.prototype.endFrame=function(){qa(this.frameCommandEncoderPool.every(function(o){return o!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(o){return o.finish()})),this.frameCommandEncoderPool=[]},a.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},a.prototype.createBuffer=function(o){return new qI({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTexture=function(o){return new qg({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createSampler=function(o){return new Z3({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderTarget=function(o){var f=new qg({id:this.getNextUniqueId(),device:this,descriptor:(0,Oo.pi)((0,Oo.pi)({},o),{dimension:ds.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:Xf.RENDER_TARGET}),sampleCount:o.sampleCount});return f.depthOrArrayLayers=1,f.type=Ar.RenderTarget,f},a.prototype.createRenderTargetFromTexture=function(o){var f=o,m=f.format,w=f.width,C=f.height,D=f.depthOrArrayLayers,B=f.sampleCount,V=f.mipLevelCount,re=f.gpuTexture,Te=f.gpuTextureView,Ae=f.usage;qa(!!(Ae&Qc.RENDER_ATTACHMENT));var Fe=new qg({id:this.getNextUniqueId(),device:this,descriptor:{format:m,width:w,height:C,depthOrArrayLayers:D,dimension:ds.TEXTURE_2D,mipLevelCount:V,usage:Ae},skipCreate:!0});return Fe.depthOrArrayLayers=D,Fe.sampleCount=B,Fe.gpuTexture=re,Fe.gpuTextureView=Te,Fe},a.prototype.createProgram=function(o){var f,m;return!((f=o.vertex)===null||f===void 0)&&f.glsl&&(o.vertex.glsl=_v(this.queryVendorInfo(),"vert",o.vertex.glsl)),!((m=o.fragment)===null||m===void 0)&&m.glsl&&(o.fragment.glsl=_v(this.queryVendorInfo(),"frag",o.fragment.glsl)),new vw({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createProgramSimple=function(o){return new vw({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createTextureShared=function(o,f,m){var w={width:o.width,height:o.height,depthOrArrayLayers:o.depthOrArrayLayers},C=o.mipLevelCount,D=p2(o.format),B=F3(o.dimension),V=N3(o.usage);if(f.gpuTextureformat=D,f.dimension=o.dimension,f.format=o.format,f.width=o.width,f.height=o.height,f.depthOrArrayLayers=o.depthOrArrayLayers,f.mipLevelCount=C,f.usage=V,f.sampleCount=o.sampleCount,!m){var re=this.device.createTexture({size:w,mipLevelCount:C,format:D,dimension:B,sampleCount:o.sampleCount,usage:V}),Te=re.createView();f.gpuTexture=re,f.gpuTextureView=Te}},a.prototype.getFallbackSampler=function(o){var f=o.formatKind;return f===Sl.Depth&&o.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},a.prototype.getFallbackTexture=function(o){var f=o.dimension,m=o.formatKind;if(f===ds.TEXTURE_2D)return m===Sl.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(f===ds.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(f===ds.TEXTURE_3D)return this.fallbackTexture3D;if(f===ds.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},a.prototype.createFallbackTexture=function(o,f){var m=o===ds.TEXTURE_CUBE_MAP?6:1,w=f===Sl.Float?lr.U8_RGBA_NORM:lr.D24;return this.createTexture({dimension:o,format:w,usage:Xf.SAMPLED,width:1,height:1,depthOrArrayLayers:m,mipLevelCount:1})},a.prototype.createBindings=function(o){return new $I({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createInputLayout=function(o){return new pw({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createComputePipeline=function(o){return new $g({id:this.getNextUniqueId(),device:this,descriptor:o})},a.prototype.createRenderPipeline=function(o){return new _2({id:this.getNextUniqueId(),device:this,descriptor:(0,Oo.pi)({},o)})},a.prototype.createQueryPool=function(o,f){return new mw({id:this.getNextUniqueId(),device:this,descriptor:{type:o,elemCount:f}})},a.prototype.createRenderPipelineInternal=function(o,f){var m;if(o.gpuRenderPipeline===null){var w=o.descriptor,C=w.program,D=C.vertexStage,B=C.fragmentStage;if(!(D===null||B===null)){var V=w.megaStateDescriptor||{},re=V.stencilBack,Te=V.stencilFront,Ae=(0,Oo._T)(V,["stencilBack","stencilFront"]),Fe=Vg(N0);w.megaStateDescriptor=(0,Oo.pi)((0,Oo.pi)((0,Oo.pi)({},Fe),{stencilBack:(0,Oo.pi)((0,Oo.pi)({},Fe.stencilBack),re),stencilFront:(0,Oo.pi)((0,Oo.pi)({},Fe.stencilFront),Te)}),Ae);var Mt=w.megaStateDescriptor.attachmentsState[0];w.colorAttachmentFormats.forEach(function(ri,po){w.megaStateDescriptor.attachmentsState[po]||(w.megaStateDescriptor.attachmentsState[po]=ZS(void 0,Mt))});var rn=Ev((m=w.topology)!==null&&m!==void 0?m:gc.TRIANGLES,w.megaStateDescriptor),In=XI(w.colorAttachmentFormats,w.megaStateDescriptor),ar=fw(w.depthStencilAttachmentFormat,w.megaStateDescriptor),Cr=void 0;w.inputLayout!==null&&(Cr=w.inputLayout.buffers);var vr=w.sampleCount,qr={layout:"auto",vertex:(0,Oo.pi)((0,Oo.pi)({},D),{buffers:Cr}),primitive:rn,depthStencil:ar,multisample:{count:vr},fragment:(0,Oo.pi)((0,Oo.pi)({},B),{targets:In})};o.gpuRenderPipeline=this.device.createRenderPipeline(qr)}}},a.prototype.createReadback=function(){return new W3({id:this.getNextUniqueId(),device:this})},a.prototype.createRenderBundle=function(){return new Kg({id:this.getNextUniqueId(),device:this})},a.prototype.createRenderPass=function(o){var f=this.renderPassPool.pop();f===void 0&&(f=new im(this));var m=this.frameCommandEncoderPool.pop();return m===void 0&&(m=this.device.createCommandEncoder()),f.beginRenderPass(m,o),f},a.prototype.createComputePass=function(){var o=this.computePassPool.pop();o===void 0&&(o=new y2);var f=this.frameCommandEncoderPool.pop();return f===void 0&&(f=this.device.createCommandEncoder()),o.beginComputePass(f),o},a.prototype.submitPass=function(o){var f=o;f instanceof im?(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.renderPassPool.push(f)):f instanceof y2&&(this.frameCommandEncoderPool.push(f.frameCommandEncoder),f.finish(),this.computePassPool.push(f))},a.prototype.copySubTexture2D=function(o,f,m,w,C,D,B){var V=this.device.createCommandEncoder(),re=o,Te=w,Ae={texture:Te.gpuTexture,origin:[C,D,0],mipLevel:0,aspect:"all"},Fe={texture:re.gpuTexture,origin:[f,m,0],mipLevel:0,aspect:"all"};qa(!!(Te.usage&Qc.COPY_SRC)),qa(!!(re.usage&Qc.COPY_DST)),V.copyTextureToTexture(Ae,Fe,[Te.width,Te.height,B||1]),this.device.queue.submit([V.finish()])},a.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},a.prototype.queryTextureFormatSupported=function(o,f,m){if(ab(o)){if(!this.featureTextureCompressionBC)return!1;var w=dw(o);return f%w!==0||m%w!==0?!1:this.featureTextureCompressionBC}switch(o){case lr.U16_RGBA_NORM:return!1;case lr.F32_RGBA:return!1}return!0},a.prototype.queryPlatformAvailable=function(){return!0},a.prototype.queryVendorInfo=function(){return this},a.prototype.queryRenderPass=function(o){var f=o;return f.descriptor},a.prototype.queryRenderTarget=function(o){var f=o;return f},a.prototype.setResourceName=function(o,f){if(o.name=f,o.type===Ar.Buffer){var m=o;m.gpuBuffer.label=f}else if(o.type===Ar.Texture){var m=o;m.gpuTexture.label=f,m.gpuTextureView.label=f}else if(o.type===Ar.RenderTarget){var m=o;m.gpuTexture.label=f,m.gpuTextureView.label=f}else if(o.type===Ar.Sampler){var m=o;m.gpuSampler.label=f}else if(o.type===Ar.RenderPipeline){var m=o;m.gpuRenderPipeline!==null&&(m.gpuRenderPipeline.label=f)}},a.prototype.setResourceLeakCheck=function(o,f){},a.prototype.checkForLeaks=function(){},a.prototype.programPatched=function(o){},a.prototype.pipelineQueryReady=function(o){var f=o;return f.gpuRenderPipeline!==null},a.prototype.pipelineForceReady=function(o){var f=o;this.createRenderPipelineInternal(f,!1)},a}(),eu=function(){function a(o){this.pluginOptions=o}return a.prototype.createSwapChain=function(o){return(0,Oo.mG)(this,void 0,void 0,function(){var f,m,w,C,D,B,V,re;return(0,Oo.Jh)(this,function(Te){switch(Te.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];f=null,Te.label=1;case 1:return Te.trys.push([1,3,,4]),m=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:m})];case 2:return f=Te.sent(),[3,4];case 3:return w=Te.sent(),console.log(w),[3,4];case 4:return f===null?[2,null]:(C=["depth32float-stencil8","texture-compression-bc","float32-filterable"],D=C.filter(function(Ae){return f.features.has(Ae)}),[4,f.requestDevice({requiredFeatures:D})]);case 5:if(B=Te.sent(),B&&(V=this.pluginOptions.onContextLost,B.lost.then(function(){V&&V()})),B===null)return[2,null];if(re=o.getContext("webgpu"),!re)return[2,null];Te.label=6;case 6:return Te.trys.push([6,8,,9]),[4,iw(this.pluginOptions.shaderCompilerPath)];case 7:return Te.sent(),[3,9];case 8:return Te.sent(),[3,9];case 9:return[2,new b2(f,B,o,re,GI,ob&&new ob)]}})})},a}(),KI=Object.defineProperty,X3=Object.defineProperties,Y3=Object.getOwnPropertyDescriptors,Eo=Object.getOwnPropertySymbols,gw=Object.prototype.hasOwnProperty,QI=Object.prototype.propertyIsEnumerable,yw=(a,o,f)=>o in a?KI(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,Jm=(a,o)=>{for(var f in o||(o={}))gw.call(o,f)&&yw(a,f,o[f]);if(Eo)for(var f of Eo(o))QI.call(o,f)&&yw(a,f,o[f]);return a},_w=(a,o)=>X3(a,Y3(o)),{isPlainObject:C_,isTypedArray:Sv}=Ie.lodashUtil,bw=class{constructor(a,o){this.destroyed=!1,this.uniforms={},this.reGl=a;const{vs:f,fs:m,attributes:w,uniforms:C,primitive:D,count:B,elements:V,depth:re,cull:Te,instances:Ae}=o,Fe={platformString:"WebGL1",glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:Gd.LOWER_LEFT,clipSpaceNearZ:em.NEGATIVE_ONE,supportMRT:!1},Mt={};this.options=o,C&&(this.uniforms=this.extractUniforms(C),Object.keys(C).forEach(vr=>{Mt[vr]=a.prop(vr)}));const rn={};Object.keys(w).forEach(vr=>{rn[vr]=w[vr].get()});const In=(0,Se.Vb)(_v(Fe,"frag",m,null,!1)),ar=(0,Se.Vb)(_v(Fe,"vert",f,null,!1)),Cr={attributes:rn,frag:In,uniforms:Mt,vert:ar,colorMask:a.prop("colorMask"),lineWidth:1,blend:{enable:a.prop("blend.enable"),func:a.prop("blend.func"),equation:a.prop("blend.equation"),color:a.prop("blend.color")},stencil:{enable:a.prop("stencil.enable"),mask:a.prop("stencil.mask"),func:a.prop("stencil.func"),opFront:a.prop("stencil.opFront"),opBack:a.prop("stencil.opBack")},primitive:NO[D===void 0?Se.gl.TRIANGLES:D]};Ae&&(Cr.instances=Ae),B?Cr.count=B:V&&(Cr.elements=V.get()),this.initDepthDrawParams({depth:re},Cr),this.initCullDrawParams({cull:Te},Cr),this.drawCommand=a(Cr),this.drawParams=Cr}updateAttributesAndElements(a,o){const f={};Object.keys(a).forEach(m=>{f[m]=a[m].get()}),this.drawParams.attributes=f,this.drawParams.elements=o.get(),this.drawCommand=this.reGl(this.drawParams)}updateAttributes(a){const o={};Object.keys(a).forEach(f=>{o[f]=a[f].get()}),this.drawParams.attributes=o,this.drawCommand=this.reGl(this.drawParams)}addUniforms(a){this.uniforms=Jm(Jm({},this.uniforms),this.extractUniforms(a))}draw(a,o){if(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)return;const f=Jm(Jm({},this.uniforms),this.extractUniforms(a.uniforms||{})),m={};Object.keys(f).forEach(w=>{const C=typeof f[w];C==="boolean"||C==="number"||Array.isArray(f[w])||f[w].BYTES_PER_ELEMENT?m[w]=f[w]:m[w]=f[w].get()}),m.blend=o?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(a),m.stencil=this.getStencilDrawParams(a),m.colorMask=this.getColorMaskDrawParams(a,o),this.drawCommand(m)}destroy(){var a,o;(o=(a=this.drawParams)==null?void 0:a.elements)==null||o.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(f=>{f==null||f.destroy()}),this.destroyed=!0}initDepthDrawParams({depth:a},o){a&&(o.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:FS[a.func||Se.gl.LESS],range:a.range||[0,1]})}getBlendDrawParams({blend:a}){const{enable:o,func:f,equation:m,color:w=[0,0,0,0]}=a||{};return{enable:!!o,func:{srcRGB:N1[f&&f.srcRGB||Se.gl.SRC_ALPHA],srcAlpha:N1[f&&f.srcAlpha||Se.gl.SRC_ALPHA],dstRGB:N1[f&&f.dstRGB||Se.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:N1[f&&f.dstAlpha||Se.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:BS[m&&m.rgb||Se.gl.FUNC_ADD],alpha:BS[m&&m.alpha||Se.gl.FUNC_ADD]},color:w}}getStencilDrawParams({stencil:a}){const{enable:o,mask:f=-1,func:m={cmp:Se.gl.ALWAYS,ref:0,mask:-1},opFront:w={fail:Se.gl.KEEP,zfail:Se.gl.KEEP,zpass:Se.gl.KEEP},opBack:C={fail:Se.gl.KEEP,zfail:Se.gl.KEEP,zpass:Se.gl.KEEP}}=a||{};return{enable:!!o,mask:f,func:_w(Jm({},m),{cmp:Gm[m.cmp]}),opFront:{fail:Wm[w.fail],zfail:Wm[w.zfail],zpass:Wm[w.zpass]},opBack:{fail:Wm[C.fail],zfail:Wm[C.zfail],zpass:Wm[C.zpass]}}}getColorMaskDrawParams({stencil:a},o){return a!=null&&a.enable&&a.opFront&&!o?[!1,!1,!1,!1]:[!0,!0,!0,!0]}initCullDrawParams({cull:a},o){if(a){const{enable:f,face:m=Se.gl.BACK}=a;o.cull={enable:!!f,face:kO[m]}}}extractUniforms(a){const o={};return Object.keys(a).forEach(f=>{this.extractUniformsRecursively(f,a[f],o,"")}),o}extractUniformsRecursively(a,o,f,m){if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||Sv(o)||o===""||"resize"in o){f[`${m&&m+"."}${a}`]=o;return}C_(o)&&Object.keys(o).forEach(w=>{this.extractUniformsRecursively(w,o[w],f,`${m&&m+"."}${a}`)}),Array.isArray(o)&&o.forEach((w,C)=>{Object.keys(w).forEach(D=>{this.extractUniformsRecursively(D,w[D],f,`${m&&m+"."}${a}[${C}]`)})})}},Ra=class{constructor(a,o){this.isDestroy=!1;const{data:f,type:m=Se.gl.UNSIGNED_BYTE,width:w,height:C,flipY:D=!1,format:B=Se.gl.RGBA,mipmap:V=!1,wrapS:re=Se.gl.CLAMP_TO_EDGE,wrapT:Te=Se.gl.CLAMP_TO_EDGE,aniso:Ae=0,alignment:Fe=1,premultiplyAlpha:Mt=!1,mag:rn=Se.gl.NEAREST,min:In=Se.gl.NEAREST,colorSpace:ar=Se.gl.BROWSER_DEFAULT_WEBGL,x:Cr=0,y:vr=0,copy:qr=!1}=o;this.width=w,this.height=C;const ri={width:w,height:C,type:D0[m],format:FO[B],wrapS:gv[re],wrapT:gv[Te],mag:NS[rn],min:NS[In],alignment:Fe,flipY:D,colorSpace:ka[ar],premultiplyAlpha:Mt,aniso:Ae,x:Cr,y:vr,copy:qr};f&&(ri.data=f),typeof V=="number"?ri.mipmap=BO[V]:typeof V=="boolean"&&(ri.mipmap=V),this.texture=a.texture(ri)}get(){return this.texture}update(a={}){this.texture(a)}bind(){this.texture._texture.bind()}resize({width:a,height:o}){this.texture.resize(a,o),this.width=a,this.height=o}getSize(){return[this.width,this.height]}destroy(){var a;this.isDestroy||(a=this.texture)==null||a.destroy(),this.isDestroy=!0}},ac=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),wl=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=a=>new bw(this.gl,a),this.createAttribute=a=>new LO(this.gl,a),this.createBuffer=a=>new zO(this.gl,a),this.createElements=a=>new UO(this.gl,a),this.createTexture2D=a=>new Ra(this.gl,a),this.createFramebuffer=a=>new jO(this.gl,a),this.useFramebuffer=(a,o)=>{this.gl({framebuffer:a?a.get():null})(o)},this.useFramebufferAsync=(a,o)=>ac(this,null,function*(){this.gl({framebuffer:a?a.get():null})(o)}),this.clear=a=>{var o;const{color:f,depth:m,stencil:w,framebuffer:C=null}=a,D={color:f,depth:m,stencil:w};D.framebuffer=C===null?C:C.get(),(o=this.gl)==null||o.clear(D)},this.viewport=({x:a,y:o,width:f,height:m})=>{this.gl._gl.viewport(a,o,f,m),this.width=f,this.height=m,this.gl._refresh()},this.readPixels=a=>{const{framebuffer:o,x:f,y:m,width:w,height:C}=a,D={x:f,y:m,width:w,height:C};return o&&(D.framebuffer=o.get()),this.gl.read(D)},this.readPixelsAsync=a=>ac(this,null,function*(){return this.readPixels(a)}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var a,o,f;this.canvas=null,(f=(o=(a=this.gl)==null?void 0:a._gl)==null?void 0:o.getExtension("WEBGL_lose_context"))==null||f.loseContext(),this.gl.destroy(),this.gl=null}}init(a,o,f){return ac(this,null,function*(){this.canvas=a,f?this.gl=f:this.gl=yield new Promise((m,w)=>{Ff()({canvas:this.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:o.preserveDrawingBuffer,stencil:o.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(C,D)=>{(C||!D)&&w(C),m(D)}})}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")}})}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}setCustomLayerDefaults(){const a=this.getGLContext();a.disable(a.CULL_FACE)}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}beginFrame(){}endFrame(){}},$3=class{constructor(a,o){const{buffer:f,offset:m,stride:w,normalized:C,size:D,divisor:B,shaderLocation:V}=o;this.buffer=f,this.attribute={shaderLocation:V,buffer:f.get(),offset:m||0,stride:w||0,normalized:C||!1,divisor:B||0},D&&(this.attribute.size=D)}get(){return this.buffer}updateBuffer(a){this.buffer.subData(a)}destroy(){this.buffer.destroy()}},n0={[Se.gl.FLOAT]:Float32Array,[Se.gl.UNSIGNED_BYTE]:Uint8Array,[Se.gl.SHORT]:Int16Array,[Se.gl.UNSIGNED_SHORT]:Uint16Array,[Se.gl.INT]:Int32Array,[Se.gl.UNSIGNED_INT]:Uint32Array},q3={[Se.gl.POINTS]:gc.POINTS,[Se.gl.LINES]:gc.LINES,[Se.gl.LINE_LOOP]:gc.LINES,[Se.gl.LINE_STRIP]:gc.LINE_STRIP,[Se.gl.TRIANGLES]:gc.TRIANGLES,[Se.gl.TRIANGLE_FAN]:gc.TRIANGLES,[Se.gl.TRIANGLE_STRIP]:gc.TRIANGLE_STRIP},lb={[1]:lr.F32_R,[2]:lr.F32_RG,[3]:lr.F32_RGB,[4]:lr.F32_RGBA},K3={[Se.gl.STATIC_DRAW]:Rp.STATIC,[Se.gl.DYNAMIC_DRAW]:Rp.DYNAMIC,[Se.gl.STREAM_DRAW]:Rp.DYNAMIC},xw={[Se.gl.REPEAT]:fh.REPEAT,[Se.gl.CLAMP_TO_EDGE]:fh.CLAMP_TO_EDGE,[Se.gl.MIRRORED_REPEAT]:fh.MIRRORED_REPEAT},Q3={[Se.gl.NEVER]:os.NEVER,[Se.gl.ALWAYS]:os.ALWAYS,[Se.gl.LESS]:os.LESS,[Se.gl.LEQUAL]:os.LEQUAL,[Se.gl.GREATER]:os.GREATER,[Se.gl.GEQUAL]:os.GEQUAL,[Se.gl.EQUAL]:os.EQUAL,[Se.gl.NOTEQUAL]:os.NOTEQUAL},J3={[Se.gl.FRONT]:ud.FRONT,[Se.gl.BACK]:ud.BACK},ub={[Se.gl.FUNC_ADD]:Bf.ADD,[Se.gl.MIN_EXT]:Bf.MIN,[Se.gl.MAX_EXT]:Bf.MAX,[Se.gl.FUNC_SUBTRACT]:Bf.SUBSTRACT,[Se.gl.FUNC_REVERSE_SUBTRACT]:Bf.REVERSE_SUBSTRACT},Qg={[Se.gl.ZERO]:hs.ZERO,[Se.gl.ONE]:hs.ONE,[Se.gl.SRC_COLOR]:hs.SRC,[Se.gl.ONE_MINUS_SRC_COLOR]:hs.ONE_MINUS_SRC,[Se.gl.SRC_ALPHA]:hs.SRC_ALPHA,[Se.gl.ONE_MINUS_SRC_ALPHA]:hs.ONE_MINUS_SRC_ALPHA,[Se.gl.DST_COLOR]:hs.DST,[Se.gl.ONE_MINUS_DST_COLOR]:hs.ONE_MINUS_DST,[Se.gl.DST_ALPHA]:hs.DST_ALPHA,[Se.gl.ONE_MINUS_DST_ALPHA]:hs.ONE_MINUS_DST_ALPHA,[Se.gl.CONSTANT_COLOR]:hs.CONST,[Se.gl.ONE_MINUS_CONSTANT_COLOR]:hs.ONE_MINUS_CONSTANT,[Se.gl.CONSTANT_ALPHA]:hs.CONST,[Se.gl.ONE_MINUS_CONSTANT_ALPHA]:hs.ONE_MINUS_CONSTANT,[Se.gl.SRC_ALPHA_SATURATE]:hs.SRC_ALPHA_SATURATE},Jg={[Se.gl.REPLACE]:xu.REPLACE,[Se.gl.KEEP]:xu.KEEP,[Se.gl.ZERO]:xu.ZERO,[Se.gl.INVERT]:xu.INVERT,[Se.gl.INCR]:xu.INCREMENT_CLAMP,[Se.gl.DECR]:xu.DECREMENT_CLAMP,[Se.gl.INCR_WRAP]:xu.INCREMENT_WRAP,[Se.gl.DECR_WRAP]:xu.DECREMENT_WRAP},Ew={[Se.gl.ALWAYS]:os.ALWAYS,[Se.gl.EQUAL]:os.EQUAL,[Se.gl.GEQUAL]:os.GEQUAL,[Se.gl.GREATER]:os.GREATER,[Se.gl.LEQUAL]:os.LEQUAL,[Se.gl.LESS]:os.LESS,[Se.gl.NEVER]:os.NEVER,[Se.gl.NOTEQUAL]:os.NOTEQUAL},eM={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function O_(a){return Object.prototype.toString.call(a)in eM}function Sw(a,o){const f=a.length,m=Math.ceil(f/3),w=f+m,C=new Float32Array(w);for(let D=0;D<w;D+=4)C[D]=a[D/4*3],C[D+1]=a[D/4*3+1],C[D+2]=a[D/4*3+2],C[D+3]=o;return C}var ww=class{constructor(a,o){this.isDestroyed=!1;const{data:f,usage:m,type:w,isUBO:C,label:D}=o;let B;O_(f)?B=f:B=new n0[this.type||Se.gl.FLOAT](f),this.type=w,this.size=B.byteLength,this.buffer=a.createBuffer({viewOrSize:B,usage:C?ca.UNIFORM:ca.VERTEX,hint:K3[m||Se.gl.STATIC_DRAW]}),D&&a.setResourceName(this.buffer,D)}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:a,offset:o}){let f;O_(a)?f=a:f=new n0[this.type||Se.gl.FLOAT](a),this.buffer.setSubData(o,new Uint8Array(f.buffer))}};function rl(a,o=0){return a+=o,a+=a<<10,a+=a>>>6,a>>>0}function x2(a){return a+=a<<3,a^=a>>>11,a+=a<<15,a>>>0}function Tw(){return 0}var cb=class{constructor(){this.keys=[],this.values=[]}},r0=class{constructor(a,o){this.keyEqualFunc=a,this.keyHashFunc=o,this.buckets=new Map}findBucketIndex(a,o){for(let f=0;f<a.keys.length;f++)if(this.keyEqualFunc(o,a.keys[f]))return f;return-1}findBucket(a){const o=this.keyHashFunc(a);return this.buckets.get(o)}get(a){const o=this.findBucket(a);if(o===void 0)return null;const f=this.findBucketIndex(o,a);return f<0?null:o.values[f]}add(a,o){const f=this.keyHashFunc(a);this.buckets.get(f)===void 0&&this.buckets.set(f,new cb);const m=this.buckets.get(f);m.keys.push(a),m.values.push(o)}delete(a){const o=this.findBucket(a);if(o===void 0)return;const f=this.findBucketIndex(o,a);f!==-1&&(o.keys.splice(f,1),o.values.splice(f,1))}clear(){this.buckets.clear()}size(){let a=0;for(const o of this.buckets.values())a+=o.values.length;return a}*values(){for(const a of this.buckets.values())for(let o=a.values.length-1;o>=0;o--)yield a.values[o]}};function Aw(a,o){return a=rl(a,o.blendMode),a=rl(a,o.blendSrcFactor),a=rl(a,o.blendDstFactor),a}function tM(a,o){return a=Aw(a,o.rgbBlendState),a=Aw(a,o.alphaBlendState),a=rl(a,o.channelWriteMask),a}function om(a,o){return a=rl(a,o.r<<24|o.g<<16|o.b<<8|o.a),a}function eg(a,o){var f,m,w,C,D,B,V,re;for(let Te=0;Te<o.attachmentsState.length;Te++)a=tM(a,o.attachmentsState[Te]);return a=om(a,o.blendConstant||jg),a=rl(a,o.depthCompare),a=rl(a,o.depthWrite?1:0),a=rl(a,(f=o.stencilFront)==null?void 0:f.compare),a=rl(a,(m=o.stencilFront)==null?void 0:m.passOp),a=rl(a,(w=o.stencilFront)==null?void 0:w.failOp),a=rl(a,(C=o.stencilFront)==null?void 0:C.depthFailOp),a=rl(a,(D=o.stencilBack)==null?void 0:D.compare),a=rl(a,(B=o.stencilBack)==null?void 0:B.passOp),a=rl(a,(V=o.stencilBack)==null?void 0:V.failOp),a=rl(a,(re=o.stencilBack)==null?void 0:re.depthFailOp),a=rl(a,o.stencilWrite?1:0),a=rl(a,o.cullMode),a=rl(a,o.frontFace?1:0),a=rl(a,o.polygonOffset?1:0),a}function JI(a){let o=0;o=rl(o,a.program.id),a.inputLayout!==null&&(o=rl(o,a.inputLayout.id)),o=eg(o,a.megaStateDescriptor);for(let f=0;f<a.colorAttachmentFormats.length;f++)o=rl(o,a.colorAttachmentFormats[f]||0);return o=rl(o,a.depthStencilAttachmentFormat||0),x2(o)}function nM(a){let o=0;if(a.samplerBindings)for(let f=0;f<a.samplerBindings.length;f++){const m=a.samplerBindings[f];m!==null&&m.texture!==null&&(o=rl(o,m.texture.id))}if(a.uniformBufferBindings)for(let f=0;f<a.uniformBufferBindings.length;f++){const m=a.uniformBufferBindings[f];m!==null&&m.buffer!==null&&(o=rl(o,m.buffer.id),o=rl(o,m.binding),o=rl(o,m.offset),o=rl(o,m.size))}if(a.storageBufferBindings)for(let f=0;f<a.storageBufferBindings.length;f++){const m=a.storageBufferBindings[f];m!==null&&m.buffer!==null&&(o=rl(o,m.buffer.id),o=rl(o,m.binding),o=rl(o,m.offset),o=rl(o,m.size))}if(a.storageTextureBindings)for(let f=0;f<a.storageTextureBindings.length;f++){const m=a.storageTextureBindings[f];m!==null&&m.texture!==null&&(o=rl(o,m.texture.id),o=rl(o,m.binding))}return x2(o)}function Cw(a,o){var f,m,w,C;return((f=a.vertex)==null?void 0:f.glsl)===((m=o.vertex)==null?void 0:m.glsl)&&((w=a.fragment)==null?void 0:w.glsl)===((C=o.fragment)==null?void 0:C.glsl)}function e4(a){var o,f;return{vertex:{glsl:(o=a.vertex)==null?void 0:o.glsl},fragment:{glsl:(f=a.fragment)==null?void 0:f.glsl}}}var rM=class{constructor(a){this.device=a,this.bindingsCache=new r0(r3,nM),this.renderPipelinesCache=new r0(H1,JI),this.inputLayoutsCache=new r0(Z1,Tw),this.programCache=new r0(Cw,Tw)}createBindings(a){var o;let f=this.bindingsCache.get(a);if(f===null){const m=Pp(a);m.uniformBufferBindings=(o=m.uniformBufferBindings)==null?void 0:o.filter(({size:w})=>w&&w>0),f=this.device.createBindings(m),this.bindingsCache.add(m,f)}return f}createRenderPipeline(a){let o=this.renderPipelinesCache.get(a);if(o===null){const f=Ip(a);f.colorAttachmentFormats=f.colorAttachmentFormats.filter(m=>m),o=this.device.createRenderPipeline(f),this.renderPipelinesCache.add(f,o)}return o}createInputLayout(a){a.vertexBufferDescriptors=a.vertexBufferDescriptors.filter(f=>!!f);let o=this.inputLayoutsCache.get(a);if(o===null){const f=i3(a);o=this.device.createInputLayout(f),this.inputLayoutsCache.add(f,o)}return o}createProgram(a){let o=this.programCache.get(a);if(o===null){const f=e4(a);o=this.device.createProgram(a),this.programCache.add(f,o)}return o}destroy(){for(const a of this.bindingsCache.values())a.destroy();for(const a of this.renderPipelinesCache.values())a.destroy();for(const a of this.inputLayoutsCache.values())a.destroy();for(const a of this.programCache.values())a.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}},Ow=class{constructor(a,o){const{data:f,type:m,count:w=0}=o;let C;O_(f)?C=f:C=new n0[this.type||Se.gl.UNSIGNED_INT](f),this.type=m,this.count=w,this.indexBuffer=a.createBuffer({viewOrSize:C,usage:ca.INDEX})}get(){return this.indexBuffer}subData({data:a}){let o;O_(a)?o=a:o=new n0[this.type||Se.gl.UNSIGNED_INT](a),this.indexBuffer.setSubData(0,new Uint8Array(o.buffer))}destroy(){this.indexBuffer.destroy()}};function E2(a){return!!(a&&a.texture)}var Mw=class{constructor(a,o){this.device=a,this.options=o,this.isDestroy=!1;const{wrapS:f=Se.gl.CLAMP_TO_EDGE,wrapT:m=Se.gl.CLAMP_TO_EDGE,aniso:w,mag:C=Se.gl.NEAREST,min:D=Se.gl.NEAREST}=o;this.createTexture(o),this.sampler=a.createSampler({addressModeU:xw[f],addressModeV:xw[m],minFilter:D===Se.gl.NEAREST?Du.POINT:Du.BILINEAR,magFilter:C===Se.gl.NEAREST?Du.POINT:Du.BILINEAR,mipmapFilter:qc.NO_MIP,maxAnisotropy:w})}createTexture(a){const{type:o=Se.gl.UNSIGNED_BYTE,width:f,height:m,flipY:w=!1,format:C=Se.gl.RGBA,alignment:D=1,usage:B=Se.v2.SAMPLED,unorm:V=!1,label:re}=a;let{data:Te}=a;this.width=f,this.height=m;let Ae=lr.U8_RGBA_RT;if(o===Se.gl.UNSIGNED_BYTE&&C===Se.gl.RGBA)Ae=V?lr.U8_RGBA_NORM:lr.U8_RGBA_RT;else if(o===Se.gl.UNSIGNED_BYTE&&C===Se.gl.LUMINANCE)Ae=lr.U8_LUMINANCE;else if(o===Se.gl.FLOAT&&C===Se.gl.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(Te&&(Te=Sw(Te,0)),Ae=lr.F32_RGBA):Ae=lr.F32_RGB;else if(o===Se.gl.FLOAT&&C===Se.gl.RGBA)Ae=lr.F32_RGBA;else if(o===Se.gl.FLOAT&&C===Se.gl.RED)Ae=lr.F32_R;else throw new Error(`create texture error, type: ${o}, format: ${C}`);this.texture=this.device.createTexture({format:Ae,width:f,height:m,usage:B===Se.v2.SAMPLED?Xf.SAMPLED:Xf.RENDER_TARGET,pixelStore:{unpackFlipY:w,packAlignment:D},mipLevelCount:1}),re&&this.device.setResourceName(this.texture,re),Te&&this.texture.setImageData([Te])}get(){return this.texture}update(a){const{data:o}=a;this.texture.setImageData([o])}bind(){}resize({width:a,height:o}){(this.width!==a||this.height!==o)&&this.destroy(),this.options.width=a,this.options.height=o,this.createTexture(this.options),this.isDestroy=!1}getSize(){return[this.width,this.height]}destroy(){var a;!this.isDestroy&&!this.texture.destroyed&&((a=this.texture)==null||a.destroy()),this.isDestroy=!0}},Rw=class{constructor(a,o){this.device=a,this.options=o,this.createColorRenderTarget(),this.createDepthRenderTarget()}createColorRenderTarget(a=!1){const{width:o,height:f,color:m}=this.options;m&&(E2(m)?(a&&m.resize({width:o,height:f}),this.colorTexture=m.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=m.width,this.height=m.height):o&&f&&(this.colorTexture=this.device.createTexture({format:lr.U8_RGBA_RT,usage:Xf.RENDER_TARGET,width:o,height:f}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=o,this.height=f))}createDepthRenderTarget(a=!1){const{width:o,height:f,depth:m}=this.options;m&&(E2(m)?(a&&m.resize({width:o,height:f}),this.depthTexture=m.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=m.width,this.height=m.height):o&&f&&(this.depthTexture=this.device.createTexture({format:lr.D24_S8,usage:Xf.RENDER_TARGET,width:o,height:f}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=o,this.height=f))}get(){return this.colorRenderTarget}destroy(){var a,o;(a=this.colorRenderTarget)==null||a.destroy(),(o=this.depthRenderTarget)==null||o.destroy()}resize({width:a,height:o}){(this.width!==a||this.height!==o)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=a,this.options.height=o,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}},M_=Object.defineProperty,S2=Object.defineProperties,Pw=Object.getOwnPropertyDescriptors,Xd=Object.getOwnPropertySymbols,Tl=Object.prototype.hasOwnProperty,t4=Object.prototype.propertyIsEnumerable,iM=(a,o,f)=>o in a?M_(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,tg=(a,o)=>{for(var f in o||(o={}))Tl.call(o,f)&&iM(a,f,o[f]);if(Xd)for(var f of Xd(o))t4.call(o,f)&&iM(a,f,o[f]);return a},Iw=(a,o)=>S2(a,Pw(o)),{isPlainObject:R_,isTypedArray:Dw}=Ie.lodashUtil,w2=class{constructor(a,o,f){this.device=a,this.options=o,this.service=f,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];const{vs:m,fs:w,attributes:C,uniforms:D,count:B,elements:V,diagnosticDerivativeUniformityEnabled:re}=o;this.options=o;const Te=re?"":this.service.viewportOrigin===Gd.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=f.renderCache.createProgram({vertex:{glsl:m},fragment:{glsl:w,postprocess:rn=>Te+rn}}),D&&(this.uniforms=this.extractUniforms(D));const Ae=[];let Fe=0;Object.keys(C).forEach(rn=>{const In=C[rn],ar=In.get();this.vertexBuffers.push(ar.get());const{offset:Cr=0,stride:vr=0,size:qr=1,divisor:ri=0,shaderLocation:po=0}=In.attribute;Ae.push({arrayStride:vr||qr*4,stepMode:Ih.VERTEX,attributes:[{format:lb[qr],shaderLocation:po,offset:Cr,divisor:ri}]}),Fe=ar.size/qr}),B||(this.options.count=Fe),V&&(this.indexBuffer=V.get());const Mt=f.renderCache.createInputLayout({vertexBufferDescriptors:Ae,indexBufferFormat:V?lr.U32_R:null,program:this.program});this.inputLayout=Mt,this.pipeline=this.createPipeline(o)}createPipeline(a,o){const{primitive:f=Se.gl.TRIANGLES,depth:m,cull:w,blend:C,stencil:D}=a,B=this.initDepthDrawParams({depth:m}),V=!!(B&&B.enable),re=this.initCullDrawParams({cull:w}),Te=!!(re&&re.enable),Ae=this.getBlendDrawParams({blend:C}),Fe=!!(Ae&&Ae.enable),Mt=this.getStencilDrawParams({stencil:D}),rn=!!(Mt&&Mt.enable);return this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:q3[f],colorAttachmentFormats:[lr.U8_RGBA_RT],depthStencilAttachmentFormat:lr.D24_S8,megaStateDescriptor:{attachmentsState:[o?{channelWriteMask:gf.ALL,rgbBlendState:{blendMode:Bf.ADD,blendSrcFactor:hs.ONE,blendDstFactor:hs.ZERO},alphaBlendState:{blendMode:Bf.ADD,blendSrcFactor:hs.ONE,blendDstFactor:hs.ZERO}}:{channelWriteMask:rn&&Mt.opFront.zpass===xu.REPLACE?gf.NONE:gf.ALL,rgbBlendState:{blendMode:Fe&&Ae.equation.rgb||Bf.ADD,blendSrcFactor:Fe&&Ae.func.srcRGB||hs.SRC_ALPHA,blendDstFactor:Fe&&Ae.func.dstRGB||hs.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:Fe&&Ae.equation.alpha||Bf.ADD,blendSrcFactor:Fe&&Ae.func.srcAlpha||hs.ONE,blendDstFactor:Fe&&Ae.func.dstAlpha||hs.ONE}}],blendConstant:Fe?jg:void 0,depthWrite:V,depthCompare:V&&B.func||os.LESS,cullMode:Te&&re.face||ud.NONE,stencilWrite:rn,stencilFront:{compare:rn?Mt.func.cmp:os.ALWAYS,passOp:Mt.opFront.zpass,failOp:Mt.opFront.fail,depthFailOp:Mt.opFront.zfail,mask:Mt.opFront.mask},stencilBack:{compare:rn?Mt.func.cmp:os.ALWAYS,passOp:Mt.opBack.zpass,failOp:Mt.opBack.fail,depthFailOp:Mt.opBack.zfail,mask:Mt.opBack.mask}}})}updateAttributesAndElements(){}updateAttributes(){}addUniforms(a){this.uniforms=tg(tg({},this.uniforms),this.extractUniforms(a))}draw(a,o){const f=tg(tg({},this.options),a),{count:m=0,instances:w,elements:C,uniforms:D={},uniformBuffers:B,textures:V}=f;this.uniforms=tg(tg({},this.uniforms),this.extractUniforms(D));const{renderPass:re,currentFramebuffer:Te,width:Ae,height:Fe,renderCache:Mt}=this.service;this.pipeline=this.createPipeline(f,o);const rn=this.service.device,In=rn.swapChainHeight;if(rn.swapChainHeight=(Te==null?void 0:Te.height)||Fe,re.setViewport(0,0,(Te==null?void 0:Te.width)||Ae,(Te==null?void 0:Te.height)||Fe),rn.swapChainHeight=In,re.setPipeline(this.pipeline),re.setStencilReference(1),re.setVertexInput(this.inputLayout,this.vertexBuffers.map(ar=>({buffer:ar})),C?{buffer:this.indexBuffer,offset:0}:null),B&&(this.bindings=Mt.createBindings({pipeline:this.pipeline,uniformBufferBindings:B.map((ar,Cr)=>{const vr=ar;return{binding:Cr,buffer:vr.get(),size:vr.size}}),samplerBindings:V==null?void 0:V.map(ar=>({texture:ar.texture,sampler:ar.sampler}))})),this.bindings&&(re.setBindings(this.bindings),Object.keys(this.uniforms).forEach(ar=>{const Cr=this.uniforms[ar];Cr instanceof Mw?this.uniforms[ar]=Cr.get():Cr instanceof Rw&&(this.uniforms[ar]=Cr.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),C){const ar=C.count;ar===0?re.draw(m,w):re.drawIndexed(ar,w)}else re.draw(m,w)}destroy(){var a,o,f;this.program.destroy(),(a=this.vertexBuffers)==null||a.forEach(m=>m.destroy()),(o=this.indexBuffer)==null||o.destroy(),(f=this.bindings)==null||f.destroy(),this.inputLayout.destroy(),this.pipeline.destroy(),this.destroyed=!0}initDepthDrawParams({depth:a}){if(a)return{enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:Q3[a.func||Se.gl.LESS],range:a.range||[0,1]}}getBlendDrawParams({blend:a}){const{enable:o,func:f,equation:m,color:w=[0,0,0,0]}=a||{};return{enable:!!o,func:{srcRGB:Qg[f&&f.srcRGB||Se.gl.SRC_ALPHA],srcAlpha:Qg[f&&f.srcAlpha||Se.gl.SRC_ALPHA],dstRGB:Qg[f&&f.dstRGB||Se.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:Qg[f&&f.dstAlpha||Se.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ub[m&&m.rgb||Se.gl.FUNC_ADD],alpha:ub[m&&m.alpha||Se.gl.FUNC_ADD]},color:w}}getStencilDrawParams({stencil:a}){const{enable:o,mask:f=4294967295,func:m={cmp:Se.gl.ALWAYS,ref:0,mask:4294967295},opFront:w={fail:Se.gl.KEEP,zfail:Se.gl.KEEP,zpass:Se.gl.KEEP},opBack:C={fail:Se.gl.KEEP,zfail:Se.gl.KEEP,zpass:Se.gl.KEEP}}=a||{};return{enable:!!o,mask:f,func:Iw(tg({},m),{cmp:Ew[m.cmp]}),opFront:{fail:Jg[w.fail],zfail:Jg[w.zfail],zpass:Jg[w.zpass],mask:m.mask},opBack:{fail:Jg[C.fail],zfail:Jg[C.zfail],zpass:Jg[C.zpass],mask:m.mask}}}initCullDrawParams({cull:a}){if(a){const{enable:o,face:f=Se.gl.BACK}=a;return{enable:!!o,face:J3[f]}}}extractUniforms(a){const o={};return Object.keys(a).forEach(f=>{this.extractUniformsRecursively(f,a[f],o,"")}),o}extractUniformsRecursively(a,o,f,m){if(o===null||typeof o=="number"||typeof o=="boolean"||Array.isArray(o)&&typeof o[0]=="number"||Dw(o)||o===""||"resize"in o){f[`${m&&m+"."}${a}`]=o;return}R_(o)&&Object.keys(o).forEach(w=>{this.extractUniformsRecursively(w,o[w],f,`${m&&m+"."}${a}`)}),Array.isArray(o)&&o.forEach((w,C)=>{Object.keys(w).forEach(D=>{this.extractUniformsRecursively(D,w[D],f,`${m&&m+"."}${a}[${C}]`)})})}};function fb(a){return typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext?!0:!!(a&&a._version===2)}var ey=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),{isUndefined:hb}=Ie.lodashUtil,Lw=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=a=>new w2(this.device,a,this),this.createAttribute=a=>new $3(this.device,a),this.createBuffer=a=>new ww(this.device,a),this.createElements=a=>new Ow(this.device,a),this.createTexture2D=a=>new Mw(this.device,a),this.createFramebuffer=a=>new Rw(this.device,a),this.useFramebuffer=(a,o)=>{this.currentFramebuffer=a,this.beginFrame(),o(),this.endFrame(),this.currentFramebuffer=null},this.useFramebufferAsync=(a,o)=>ey(this,null,function*(){this.currentFramebuffer=a,this.preRenderPass=this.renderPass,this.beginFrame(),yield o(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass}),this.clear=a=>{const{color:o,depth:f,stencil:m,framebuffer:w=null}=a;if(w)w.clearOptions={color:o,depth:f,stencil:m};else{const C=this.queryVerdorInfo();if(C==="WebGL1"){const D=this.getGLContext();hb(m)?hb(f)||(D.clearDepth(f),D.clear(D.DEPTH_BUFFER_BIT)):(D.clearStencil(m),D.clear(D.STENCIL_BUFFER_BIT))}else if(C==="WebGL2"){const D=this.getGLContext();hb(m)?hb(f)||D.clearBufferfv(D.DEPTH,0,[f]):D.clearBufferiv(D.STENCIL,0,[m])}}},this.viewport=({width:a,height:o})=>{this.swapChain.configureSwapChain(a,o),this.createMainColorDepthRT(a,o),this.width=a,this.height=o},this.readPixels=a=>{const{framebuffer:o,x:f,y:m,width:w,height:C}=a,D=this.device.createReadback(),B=o.colorTexture,V=D.readTextureSync(B,f,this.viewportOrigin===Gd.LOWER_LEFT?m:this.height-m,w,C,new Uint8Array(w*C*4));return D.destroy(),V},this.readPixelsAsync=a=>ey(this,null,function*(){const{framebuffer:o,x:f,y:m,width:w,height:C}=a,D=this.device.createReadback(),B=o.colorTexture,V=yield D.readTexture(B,f,this.viewportOrigin===Gd.LOWER_LEFT?m:this.height-m,w,C,new Uint8Array(w*C*4));if(this.viewportOrigin!==Gd.LOWER_LEFT)for(let re=0;re<V.length;re+=4){const Te=V[re];V[re]=V[re+2],V[re+2]=Te}return D.destroy(),V}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var a;return(a=this.canvas)==null?void 0:a.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var a;this.canvas=null,(a=this.uniformBuffers)==null||a.forEach(o=>{o.destroy()}),this.device.destroy(),this.renderCache.destroy()}}init(a,o){return ey(this,null,function*(){const{enableWebGPU:f,shaderCompilerPath:m}=o;this.canvas=a;const C=yield(f?new eu({shaderCompilerPath:m}):new nw({targets:["webgl2","webgl1"],onContextLost(B){console.warn("context lost",B)},onContextCreationError(B){console.warn("context creation error",B)},onContextRestored(B){console.warn("context restored",B)}})).createSwapChain(a);C.configureSwapChain(a.width,a.height),this.device=C.getDevice(),this.swapChain=C,this.renderCache=new rM(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;const D=this.device.gl;this.extensionObject={OES_texture_float:!fb(D)&&this.device.OES_texture_float},this.createMainColorDepthRT(a.width,a.height)})}createMainColorDepthRT(a,o){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:lr.U8_RGBA_RT,width:a,height:o,usage:Xf.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:lr.D24_S8,width:a,height:o,usage:Xf.RENDER_TARGET}))}beginFrame(){this.device.beginFrame();const{currentFramebuffer:a,swapChain:o,mainColorRT:f,mainDepthRT:m}=this,w=a?a.colorRenderTarget:f,C=a?null:o.getOnscreenTexture(),D=a?a.depthRenderTarget:m,{color:B=[0,0,0,0],depth:V=1,stencil:re=0}=(a==null?void 0:a.clearOptions)||{},Te=w?Zm(B[0]*255,B[1]*255,B[2]*255,B[3]):jg,Ae=D?V:void 0,Fe=D?re:void 0,Mt=this.device.createRenderPass({colorAttachment:[w],colorResolveTo:[C],colorClearColor:[Te],colorStore:[!0],depthStencilAttachment:D,depthClearValue:Ae,stencilClearValue:Fe});this.renderPass=Mt}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame()}getPointSizeRange(){const a=this.device.gl;return a.getParameter(a.ALIASED_POINT_SIZE_RANGE)}testExtension(a){return!!this.getGLContext().getExtension(a)}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(a){this.isDirty=a}getDirty(){return this.isDirty}},tu=["selectstart","selecting","selectend"],nu=class extends zu.EventEmitter{constructor(a,o={}){super(),this.isEnable=!1,this.onDragStart=f=>{this.box.style.display="block",this.startEvent=this.endEvent=f,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragging=f=>{this.endEvent=f,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragEnd=f=>{this.endEvent=f,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent)},this.scene=a,this.options=o}get container(){return this.scene.getMapService().getMarkerContainer()}enable(){if(this.isEnable)return;const{className:a}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){const o=Ie.SO.create("div",void 0,this.container);o.classList.add("l7-select-box"),a&&o.classList.add(a),o.style.display="none",this.box=o}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}syncBoxBound(){const{x:a,y:o}=this.startEvent,{x:f,y:m}=this.endEvent,w=Math.min(a,f),C=Math.min(o,m),D=Math.abs(a-f),B=Math.abs(o-m);this.box.style.top=`${C}px`,this.box.style.left=`${w}px`,this.box.style.width=`${D}px`,this.box.style.height=`${B}px`}getLngLatBox(){const{lngLat:{lng:a,lat:o}}=this.startEvent,{lngLat:{lng:f,lat:m}}=this.endEvent;return(0,Ie.Ol)([[a,o],[f,m]])}},P_=Object.defineProperty,Nw=Object.defineProperties,I_=Object.getOwnPropertyDescriptors,T2=Object.getOwnPropertySymbols,oM=Object.prototype.hasOwnProperty,ty=Object.prototype.propertyIsEnumerable,A2=(a,o,f)=>o in a?P_(a,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[o]=f,n4=(a,o)=>{for(var f in o||(o={}))oM.call(o,f)&&A2(a,f,o[f]);if(T2)for(var f of T2(o))ty.call(o,f)&&A2(a,f,o[f]);return a},aM=(a,o)=>Nw(a,I_(o)),am=(a,o,f)=>new Promise((m,w)=>{var C=V=>{try{B(f.next(V))}catch(re){w(re)}},D=V=>{try{B(f.throw(V))}catch(re){w(re)}},B=V=>V.done?m(V.value):Promise.resolve(V.value).then(C,D);B((f=f.apply(a,o)).next())}),C2=class{constructor(a){const{id:o,map:f,canvas:m,renderer:w="regl"}=a,C=(0,Se.Hp)();this.container=C,f.setContainer(C,o,m),w==="regl"?C.rendererService=new wl:C.rendererService=new Lw,this.sceneService=C.sceneService,this.mapService=C.mapService,this.iconService=C.iconService,this.fontService=C.fontService,this.controlService=C.controlService,this.layerService=C.layerService,this.debugService=C.debugService,this.debugService.setEnable(a.debug),this.markerService=C.markerService,this.interactionService=C.interactionService,this.popupService=C.popupService,this.boxSelect=new nu(this,{}),this.initComponent(o),this.sceneService.init(a),this.initControl()}get map(){return this.mapService.map}get loaded(){return this.sceneService.loaded}getServiceContainer(){return this.container}getSize(){return this.mapService.getSize()}getMinZoom(){return this.mapService.getMinZoom()}getMaxZoom(){return this.mapService.getMaxZoom()}getType(){return this.mapService.getType()}getMapContainer(){return this.mapService.getMapContainer()}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer()}getMapService(){return this.mapService}getDebugService(){return this.debugService}exportPng(a){return am(this,null,function*(){return this.sceneService.exportPng(a)})}exportMap(a){return am(this,null,function*(){return this.sceneService.exportPng(a)})}registerRenderService(a){this.sceneService.loaded?new a(this).init():this.on("loaded",()=>{new a(this).init()})}setBgColor(a){this.mapService.setBgColor(a)}addLayer(a){this.loaded?this.preAddLayer(a):this.once("loaded",()=>{this.preAddLayer(a)})}preAddLayer(a){const o=(0,Se.e7)(this.container);if(a.setContainer(o),this.sceneService.addLayer(a),a.inited){this.initTileLayer(a);const f=this.initMask(a);this.addMask(f,a.id)}else a.on("inited",()=>{this.initTileLayer(a);const f=this.initMask(a);this.addMask(f,a.id)})}initMask(a){const{mask:o,maskfence:f,maskColor:m="#000",maskOpacity:w=0}=a.getLayerConfig();return!o||!f?void 0:new CS().source(f).shape("fill").style({color:m,opacity:w})}addMask(a,o){if(!a)return;const f=this.getLayer(o);if(f){const m=(0,Se.e7)(this.container);a.setContainer(m),f.addMaskLayer(a),this.sceneService.addMask(a)}else console.warn("parent layer not find!")}getPickedLayer(){return this.layerService.pickedLayerId}getLayers(){return this.layerService.getLayers()}getLayer(a){return this.layerService.getLayer(a)}getLayerByName(a){return this.layerService.getLayerByName(a)}removeLayer(a,o){return am(this,null,function*(){yield this.layerService.remove(a,o)})}removeAllLayer(){return am(this,null,function*(){yield this.layerService.removeAllLayers()})}render(){this.sceneService.render()}setEnableRender(a){this.layerService.setEnableRender(a)}addIconFont(a,o){this.fontService.addIconFont(a,o)}addIconFonts(a){a.forEach(([o,f])=>{this.fontService.addIconFont(o,f)})}addFontFace(a,o){this.fontService.once("fontloaded",f=>{this.emit("fontloaded",f)}),this.fontService.addFontFace(a,o)}addImage(a,o){return am(this,null,function*(){yield this.iconService.addImage(a,o)})}hasImage(a){return this.iconService.hasImage(a)}removeImage(a){this.iconService.removeImage(a)}addIconFontGlyphs(a,o){this.fontService.addIconGlyphs(o)}addControl(a){this.controlService.addControl(a,this.container)}removeControl(a){this.controlService.removeControl(a)}getControlByName(a){return this.controlService.getControlByName(a)}addMarker(a){this.markerService.addMarker(a)}addMarkerLayer(a){this.markerService.addMarkerLayer(a)}removeMarkerLayer(a){this.markerService.removeMarkerLayer(a)}removeAllMarkers(){this.markerService.removeAllMarkers()}removeAllMakers(){console.warn("removeAllMakers \u5DF2\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}addPopup(a){this.popupService.addPopup(a)}removePopup(a){this.popupService.removePopup(a)}on(a,o){var f;tu.includes(a)?(f=this.boxSelect)==null||f.on(a,o):Se.P7.includes(a)?this.sceneService.on(a,o):this.mapService.on(a,o)}once(a,o){var f;tu.includes(a)?(f=this.boxSelect)==null||f.once(a,o):Se.P7.includes(a)?this.sceneService.once(a,o):this.mapService.once(a,o)}emit(a,o){Se.P7.indexOf(a)===-1?this.mapService.on(a,o):this.sceneService.emit(a,o)}off(a,o){var f;tu.includes(a)?(f=this.boxSelect)==null||f.off(a,o):Se.P7.includes(a)?this.sceneService.off(a,o):this.mapService.off(a,o)}getZoom(){return this.mapService.getZoom()}getCenter(a){return this.mapService.getCenter(a)}setCenter(a,o){return this.mapService.setCenter(a,o)}getPitch(){return this.mapService.getPitch()}setPitch(a){return this.mapService.setPitch(a)}getRotation(){return this.mapService.getRotation()}getBounds(){return this.mapService.getBounds()}setRotation(a){this.mapService.setRotation(a)}zoomIn(){this.mapService.zoomIn()}zoomOut(){this.mapService.zoomOut()}panTo(a){this.mapService.panTo(a)}panBy(a,o){this.mapService.panBy(a,o)}getContainer(){return this.mapService.getContainer()}setZoom(a){this.mapService.setZoom(a)}fitBounds(a,o){const{fitBoundsOptions:f,animate:m}=this.sceneService.getSceneConfig();this.mapService.fitBounds(a,o||aM(n4({},f),{animate:m}))}setZoomAndCenter(a,o){this.mapService.setZoomAndCenter(a,o)}setMapStyle(a){this.mapService.setMapStyle(a)}setMapStatus(a){this.mapService.setMapStatus(a)}pixelToLngLat(a){return this.mapService.pixelToLngLat(a)}lngLatToPixel(a){return this.mapService.lngLatToPixel(a)}containerToLngLat(a){return this.mapService.containerToLngLat(a)}lngLatToContainer(a){return this.mapService.lngLatToContainer(a)}destroy(){this.sceneService.destroy()}registerPostProcessingPass(a){this.container.postProcessingPass.name=new a}enableShaderPick(){this.layerService.enableShaderPick()}diasbleShaderPick(){this.layerService.disableShaderPick()}enableBoxSelect(a=!0){this.boxSelect.enable(),a&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect()})}disableBoxSelect(){this.boxSelect.disable()}static addProtocol(a,o){Ie.SA.REGISTERED_PROTOCOLS[a]=o}static removeProtocol(a){delete Ie.SA.REGISTERED_PROTOCOLS[a]}getProtocol(a){return Ie.SA.REGISTERED_PROTOCOLS[a]}startAnimate(){this.layerService.startAnimate()}stopAnimate(){this.layerService.stopAnimate()}getPointSizeRange(){return this.sceneService.getPointSizeRange()}initComponent(a){this.controlService.init({container:Ie.SO.getContainer(a)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}initControl(){const{logoVisible:a,logoPosition:o}=this.sceneService.getSceneConfig();a&&this.addControl(new sp({position:o}))}initTileLayer(a){a.getSource().isTile&&(a.tileLayer=new IO(a))}},r4="2.21.7"},81957:function(bt,G){"use strict";var L=function(K,W,E){return K<W?W:K>E?E:K};G.Z=L},95147:function(bt,G){"use strict";var L=function(K){return K==null};G.Z=L},25897:function(bt,G,L){"use strict";var K=L(95456),W=function(E){return(0,K.Z)(E,"Number")};G.Z=W},95456:function(bt,G){"use strict";var L={}.toString,K=function(W,E){return L.call(W)==="[object "+E+"]"};G.Z=K},131:function(bt,G,L){"use strict";L.r(G),L.d(G,{TinyColor:function(){return K.C},bounds:function(){return pt},convertDecimalToHex:function(){return se.Wl},convertHexToDecimal:function(){return se.T6},default:function(){return yt},fromRatio:function(){return oe},hslToRgb:function(){return se.ve},hsvToRgb:function(){return se.WE},inputToRGB:function(){return te.uA},isReadable:function(){return he},isValidCSSUnit:function(){return te.ky},legacyRandom:function(){return Ge},mostReadable:function(){return ee},names:function(){return W.R},numberInputToObject:function(){return se.Yt},parseIntFromHex:function(){return se.VD},random:function(){return me},readability:function(){return E},rgbToHex:function(){return se.vq},rgbToHsl:function(){return se.lC},rgbToHsv:function(){return se.py},rgbToRgb:function(){return se.rW},rgbaToArgbHex:function(){return se.GC},rgbaToHex:function(){return se.s},stringInputToObject:function(){return te.uz},tinycolor:function(){return K.H},toMsFilter:function(){return ue}});var K=L(10274),W=L(48701);function E(Re,Ce){var Ue=new K.C(Re),We=new K.C(Ce);return(Math.max(Ue.getLuminance(),We.getLuminance())+.05)/(Math.min(Ue.getLuminance(),We.getLuminance())+.05)}function he(Re,Ce,Ue){var We,lt;Ue===void 0&&(Ue={level:"AA",size:"small"});var tn=E(Re,Ce);switch(((We=Ue.level)!==null&&We!==void 0?We:"AA")+((lt=Ue.size)!==null&&lt!==void 0?lt:"small")){case"AAsmall":case"AAAlarge":return tn>=4.5;case"AAlarge":return tn>=3;case"AAAsmall":return tn>=7;default:return!1}}function ee(Re,Ce,Ue){Ue===void 0&&(Ue={includeFallbackColors:!1,level:"AA",size:"small"});for(var We=null,lt=0,tn=Ue.includeFallbackColors,Le=Ue.level,_t=Ue.size,Me=0,nt=Ce;Me<nt.length;Me++){var qe=nt[Me],Ye=E(Re,qe);Ye>lt&&(lt=Ye,We=new K.C(qe))}return he(Re,We,{level:Le,size:_t})||!tn?We:(Ue.includeFallbackColors=!1,ee(Re,["#fff","#000"],Ue))}var se=L(86500);function ue(Re,Ce){var Ue=new K.C(Re),We="#"+(0,se.GC)(Ue.r,Ue.g,Ue.b,Ue.a),lt=We,tn=Ue.gradientType?"GradientType = 1, ":"";if(Ce){var Le=new K.C(Ce);lt="#"+(0,se.GC)(Le.r,Le.g,Le.b,Le.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(tn,"startColorstr=").concat(We,",endColorstr=").concat(lt,")")}var be=L(90279);function oe(Re,Ce){var Ue={r:(0,be.JX)(Re.r),g:(0,be.JX)(Re.g),b:(0,be.JX)(Re.b)};return Re.a!==void 0&&(Ue.a=Number(Re.a)),new K.C(Ue,Ce)}function Ge(){return new K.C({r:Math.random(),g:Math.random(),b:Math.random()})}var te=L(1350);function me(Re){if(Re===void 0&&(Re={}),Re.count!==void 0&&Re.count!==null){var Ce=Re.count,Ue=[];for(Re.count=void 0;Ce>Ue.length;)Re.count=null,Re.seed&&(Re.seed+=1),Ue.push(me(Re));return Re.count=Ce,Ue}var We=Pe(Re.hue,Re.seed),lt=$(We,Re),tn=le(We,lt,Re),Le={h:We,s:lt,v:tn};return Re.alpha!==void 0&&(Le.a=Re.alpha),new K.C(Le)}function Pe(Re,Ce){var Ue=Ee(Re),We=Je(Ue,Ce);return We<0&&(We=360+We),We}function $(Re,Ce){if(Ce.hue==="monochrome")return 0;if(Ce.luminosity==="random")return Je([0,100],Ce.seed);var Ue=tt(Re).saturationRange,We=Ue[0],lt=Ue[1];switch(Ce.luminosity){case"bright":We=55;break;case"dark":We=lt-10;break;case"light":lt=55;break;default:break}return Je([We,lt],Ce.seed)}function le(Re,Ce,Ue){var We=J(Re,Ce),lt=100;switch(Ue.luminosity){case"dark":lt=We+20;break;case"light":We=(lt+We)/2;break;case"random":We=0,lt=100;break;default:break}return Je([We,lt],Ue.seed)}function J(Re,Ce){for(var Ue=tt(Re).lowerBounds,We=0;We<Ue.length-1;We++){var lt=Ue[We][0],tn=Ue[We][1],Le=Ue[We+1][0],_t=Ue[We+1][1];if(Ce>=lt&&Ce<=Le){var Me=(_t-tn)/(Le-lt),nt=tn-Me*lt;return Me*Ce+nt}}return 0}function Ee(Re){var Ce=parseInt(Re,10);if(!Number.isNaN(Ce)&&Ce<360&&Ce>0)return[Ce,Ce];if(typeof Re=="string"){var Ue=pt.find(function(Le){return Le.name===Re});if(Ue){var We=wt(Ue);if(We.hueRange)return We.hueRange}var lt=new K.C(Re);if(lt.isValid){var tn=lt.toHsv().h;return[tn,tn]}}return[0,360]}function tt(Re){Re>=334&&Re<=360&&(Re-=360);for(var Ce=0,Ue=pt;Ce<Ue.length;Ce++){var We=Ue[Ce],lt=wt(We);if(lt.hueRange&&Re>=lt.hueRange[0]&&Re<=lt.hueRange[1])return lt}throw Error("Color not found")}function Je(Re,Ce){if(Ce===void 0)return Math.floor(Re[0]+Math.random()*(Re[1]+1-Re[0]));var Ue=Re[1]||1,We=Re[0]||0;Ce=(Ce*9301+49297)%233280;var lt=Ce/233280;return Math.floor(We+lt*(Ue-We))}function wt(Re){var Ce=Re.lowerBounds[0][0],Ue=Re.lowerBounds[Re.lowerBounds.length-1][0],We=Re.lowerBounds[Re.lowerBounds.length-1][1],lt=Re.lowerBounds[0][1];return{name:Re.name,hueRange:Re.hueRange,lowerBounds:Re.lowerBounds,saturationRange:[Ce,Ue],brightnessRange:[We,lt]}}var pt=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],yt=K.H},38163:function(bt){bt.exports=G;function G(W,E){var he=W&&W.type,ee;if(he==="FeatureCollection")for(ee=0;ee<W.features.length;ee++)G(W.features[ee],E);else if(he==="GeometryCollection")for(ee=0;ee<W.geometries.length;ee++)G(W.geometries[ee],E);else if(he==="Feature")G(W.geometry,E);else if(he==="Polygon")L(W.coordinates,E);else if(he==="MultiPolygon")for(ee=0;ee<W.coordinates.length;ee++)L(W.coordinates[ee],E);return W}function L(W,E){if(W.length!==0){K(W[0],E);for(var he=1;he<W.length;he++)K(W[he],!E)}}function K(W,E){for(var he=0,ee=0,se=0,ue=W.length,be=ue-1;se<ue;be=se++){var oe=(W[se][0]-W[be][0])*(W[be][1]+W[se][1]),Ge=he+oe;ee+=Math.abs(he)>=Math.abs(oe)?he-Ge+oe:oe-Ge+he,he=Ge}he+ee>=0!=!!E&&W.reverse()}},75550:function(bt){"use strict";bt.exports=G;function G(L,K){this.x=L,this.y=K}G.prototype={clone:function(){return new G(this.x,this.y)},add:function(L){return this.clone()._add(L)},sub:function(L){return this.clone()._sub(L)},multByPoint:function(L){return this.clone()._multByPoint(L)},divByPoint:function(L){return this.clone()._divByPoint(L)},mult:function(L){return this.clone()._mult(L)},div:function(L){return this.clone()._div(L)},rotate:function(L){return this.clone()._rotate(L)},rotateAround:function(L,K){return this.clone()._rotateAround(L,K)},matMult:function(L){return this.clone()._matMult(L)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(L){return this.x===L.x&&this.y===L.y},dist:function(L){return Math.sqrt(this.distSqr(L))},distSqr:function(L){var K=L.x-this.x,W=L.y-this.y;return K*K+W*W},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(L){return Math.atan2(this.y-L.y,this.x-L.x)},angleWith:function(L){return this.angleWithSep(L.x,L.y)},angleWithSep:function(L,K){return Math.atan2(this.x*K-this.y*L,this.x*L+this.y*K)},_matMult:function(L){var K=L[0]*this.x+L[1]*this.y,W=L[2]*this.x+L[3]*this.y;return this.x=K,this.y=W,this},_add:function(L){return this.x+=L.x,this.y+=L.y,this},_sub:function(L){return this.x-=L.x,this.y-=L.y,this},_mult:function(L){return this.x*=L,this.y*=L,this},_div:function(L){return this.x/=L,this.y/=L,this},_multByPoint:function(L){return this.x*=L.x,this.y*=L.y,this},_divByPoint:function(L){return this.x/=L.x,this.y/=L.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var L=this.y;return this.y=this.x,this.x=-L,this},_rotate:function(L){var K=Math.cos(L),W=Math.sin(L),E=K*this.x-W*this.y,he=W*this.x+K*this.y;return this.x=E,this.y=he,this},_rotateAround:function(L,K){var W=Math.cos(L),E=Math.sin(L),he=K.x+W*(this.x-K.x)-E*(this.y-K.y),ee=K.y+E*(this.x-K.x)+W*(this.y-K.y);return this.x=he,this.y=ee,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},G.convert=function(L){return L instanceof G?L:Array.isArray(L)?new G(L[0],L[1]):L}},49296:function(bt){"use strict";bt.exports=L,bt.exports.default=L;var G=1e20;function L(ee,se,ue,be,oe,Ge){this.fontSize=ee||24,this.buffer=se===void 0?3:se,this.cutoff=be||.25,this.fontFamily=oe||"sans-serif",this.fontWeight=Ge||"normal",this.radius=ue||8;var te=this.size=this.fontSize+this.buffer*2,me=te+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=te,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(me*me),this.gridInner=new Float64Array(me*me),this.f=new Float64Array(me),this.z=new Float64Array(me+1),this.v=new Uint16Array(me),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(te/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function K(ee,se,ue,be,oe,Ge,te){Ge.fill(G,0,se*ue),te.fill(0,0,se*ue);for(var me=(se-be)/2,Pe=0;Pe<oe;Pe++)for(var $=0;$<be;$++){var le=(Pe+me)*se+$+me,J=ee.data[4*(Pe*be+$)+3]/255;if(J===1)Ge[le]=0,te[le]=G;else if(J===0)Ge[le]=G,te[le]=0;else{var Ee=Math.max(0,.5-J),tt=Math.max(0,J-.5);Ge[le]=Ee*Ee,te[le]=tt*tt}}}function W(ee,se,ue,be,oe,Ge,te){for(var me=0;me<se*ue;me++){var Pe=Math.sqrt(be[me])-Math.sqrt(oe[me]);ee[me]=Math.round(255-255*(Pe/Ge+te))}}L.prototype._draw=function(ee,se){var ue=this.ctx.measureText(ee),be=ue.width,oe=2*this.buffer,Ge,te,me,Pe,$,le,J,Ee;se&&this.useMetrics?($=Math.floor(ue.actualBoundingBoxAscent),Ee=this.buffer+Math.ceil(ue.actualBoundingBoxAscent),le=this.buffer,J=this.buffer,te=Math.min(this.size,Math.ceil(ue.actualBoundingBoxRight-ue.actualBoundingBoxLeft)),Pe=Math.min(this.size-le,Math.ceil(ue.actualBoundingBoxAscent+ue.actualBoundingBoxDescent)),Ge=te+oe,me=Pe+oe,this.ctx.textBaseline="alphabetic"):(Ge=te=this.size,me=Pe=this.size,$=19*this.fontSize/24,le=J=0,Ee=this.middle,this.ctx.textBaseline="middle");var tt;te&&Pe&&(this.ctx.clearRect(J,le,te,Pe),this.ctx.fillText(ee,this.buffer,Ee),tt=this.ctx.getImageData(J,le,te,Pe));var Je=new Uint8ClampedArray(Ge*me);return K(tt,Ge,me,te,Pe,this.gridOuter,this.gridInner),E(this.gridOuter,Ge,me,this.f,this.v,this.z),E(this.gridInner,Ge,me,this.f,this.v,this.z),W(Je,Ge,me,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:Je,metrics:{width:te,height:Pe,sdfWidth:Ge,sdfHeight:me,top:$,left:0,advance:be}}},L.prototype.draw=function(ee){return this._draw(ee,!1).data},L.prototype.drawWithMetrics=function(ee){return this._draw(ee,!0)};function E(ee,se,ue,be,oe,Ge){for(var te=0;te<se;te++)he(ee,te,se,ue,be,oe,Ge);for(var me=0;me<ue;me++)he(ee,me*se,1,se,be,oe,Ge)}function he(ee,se,ue,be,oe,Ge,te){var me,Pe,$,le;for(Ge[0]=0,te[0]=-G,te[1]=G,me=0;me<be;me++)oe[me]=ee[se+me*ue];for(me=1,Pe=0,$=0;me<be;me++){do le=Ge[Pe],$=(oe[me]-oe[le]+me*me-le*le)/(me-le)/2;while($<=te[Pe]&&--Pe>-1);Pe++,Ge[Pe]=me,te[Pe]=$,te[Pe+1]=G}for(me=0,Pe=0;me<be;me++){for(;te[Pe+1]<me;)Pe++;le=Ge[Pe],ee[se+me*ue]=oe[le]+(me-le)*(me-le)}}},38929:function(bt,G,L){bt.exports.VectorTile=L(22779),L(66024),L(59701)},22779:function(bt,G,L){"use strict";var K=L(59701);bt.exports=W;function W(he,ee){this.layers=he.readFields(E,{},ee)}function E(he,ee,se){if(he===3){var ue=new K(se,se.readVarint()+se.pos);ue.length&&(ee[ue.name]=ue)}}},66024:function(bt,G,L){"use strict";var K=L(75550);bt.exports=W;function W(ue,be,oe,Ge,te){this.properties={},this.extent=oe,this.type=0,this._pbf=ue,this._geometry=-1,this._keys=Ge,this._values=te,ue.readFields(E,this,be)}function E(ue,be,oe){ue==1?be.id=oe.readVarint():ue==2?he(oe,be):ue==3?be.type=oe.readVarint():ue==4&&(be._geometry=oe.pos)}function he(ue,be){for(var oe=ue.readVarint()+ue.pos;ue.pos<oe;){var Ge=be._keys[ue.readVarint()],te=be._values[ue.readVarint()];be.properties[Ge]=te}}W.types=["Unknown","Point","LineString","Polygon"],W.prototype.loadGeometry=function(){var ue=this._pbf;ue.pos=this._geometry;for(var be=ue.readVarint()+ue.pos,oe=1,Ge=0,te=0,me=0,Pe=[],$;ue.pos<be;){if(Ge<=0){var le=ue.readVarint();oe=le&7,Ge=le>>3}if(Ge--,oe===1||oe===2)te+=ue.readSVarint(),me+=ue.readSVarint(),oe===1&&($&&Pe.push($),$=[]),$.push(new K(te,me));else if(oe===7)$&&$.push($[0].clone());else throw new Error("unknown command "+oe)}return $&&Pe.push($),Pe},W.prototype.bbox=function(){var ue=this._pbf;ue.pos=this._geometry;for(var be=ue.readVarint()+ue.pos,oe=1,Ge=0,te=0,me=0,Pe=1/0,$=-1/0,le=1/0,J=-1/0;ue.pos<be;){if(Ge<=0){var Ee=ue.readVarint();oe=Ee&7,Ge=Ee>>3}if(Ge--,oe===1||oe===2)te+=ue.readSVarint(),me+=ue.readSVarint(),te<Pe&&(Pe=te),te>$&&($=te),me<le&&(le=me),me>J&&(J=me);else if(oe!==7)throw new Error("unknown command "+oe)}return[Pe,le,$,J]},W.prototype.toGeoJSON=function(ue,be,oe){var Ge=this.extent*Math.pow(2,oe),te=this.extent*ue,me=this.extent*be,Pe=this.loadGeometry(),$=W.types[this.type],le,J;function Ee(wt){for(var pt=0;pt<wt.length;pt++){var yt=wt[pt],Re=180-(yt.y+me)*360/Ge;wt[pt]=[(yt.x+te)*360/Ge-180,360/Math.PI*Math.atan(Math.exp(Re*Math.PI/180))-90]}}switch(this.type){case 1:var tt=[];for(le=0;le<Pe.length;le++)tt[le]=Pe[le][0];Pe=tt,Ee(Pe);break;case 2:for(le=0;le<Pe.length;le++)Ee(Pe[le]);break;case 3:for(Pe=ee(Pe),le=0;le<Pe.length;le++)for(J=0;J<Pe[le].length;J++)Ee(Pe[le][J]);break}Pe.length===1?Pe=Pe[0]:$="Multi"+$;var Je={type:"Feature",geometry:{type:$,coordinates:Pe},properties:this.properties};return"id"in this&&(Je.id=this.id),Je};function ee(ue){var be=ue.length;if(be<=1)return[ue];for(var oe=[],Ge,te,me=0;me<be;me++){var Pe=se(ue[me]);Pe!==0&&(te===void 0&&(te=Pe<0),te===Pe<0?(Ge&&oe.push(Ge),Ge=[ue[me]]):Ge.push(ue[me]))}return Ge&&oe.push(Ge),oe}function se(ue){for(var be=0,oe=0,Ge=ue.length,te=Ge-1,me,Pe;oe<Ge;te=oe++)me=ue[oe],Pe=ue[te],be+=(Pe.x-me.x)*(me.y+Pe.y);return be}},59701:function(bt,G,L){"use strict";var K=L(66024);bt.exports=W;function W(ee,se){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=ee,this._keys=[],this._values=[],this._features=[],ee.readFields(E,this,se),this.length=this._features.length}function E(ee,se,ue){ee===15?se.version=ue.readVarint():ee===1?se.name=ue.readString():ee===5?se.extent=ue.readVarint():ee===2?se._features.push(ue.pos):ee===3?se._keys.push(ue.readString()):ee===4&&se._values.push(he(ue))}function he(ee){for(var se=null,ue=ee.readVarint()+ee.pos;ee.pos<ue;){var be=ee.readVarint()>>3;se=be===1?ee.readString():be===2?ee.readFloat():be===3?ee.readDouble():be===4?ee.readVarint64():be===5?ee.readVarint():be===6?ee.readSVarint():be===7?ee.readBoolean():null}return se}W.prototype.feature=function(ee){if(ee<0||ee>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[ee];var se=this._pbf.readVarint()+this._pbf.pos;return new K(this._pbf,se,this.extent,this._keys,this._values)}},45471:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.PresetStatusColorTypes=void 0,G.isPresetColor=se,G.isPresetStatusColor=ue;var W=K(L(861)),E=L(36496);const he=E.PresetColors.map(be=>`${be}-inverse`),ee=G.PresetStatusColorTypes=["success","processing","error","default","warning"];function se(be){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat((0,W.default)(he),(0,W.default)(E.PresetColors)).includes(be):E.PresetColors.includes(be)}function ue(be){return ee.includes(be)}},49314:function(bt,G,L){"use strict";"use client";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(67294)),E=K(L(43273));const he=se=>{let ue;return typeof se=="object"&&(se!=null&&se.clearIcon)?ue=se:se&&(ue={clearIcon:W.default.createElement(E.default,null)}),ue};var ee=G.default=he},56333:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.containerBaseZIndexOffset=G.consumerBaseZIndexOffset=G.CONTAINER_MAX_OFFSET=void 0,G.useZIndex=te;var W=K(L(67294)),E=K(L(41401)),he=K(L(96877));const ee=100,se=10,ue=G.CONTAINER_MAX_OFFSET=ee*se,be=G.containerBaseZIndexOffset={Modal:ee,Drawer:ee,Popover:ee,Popconfirm:ee,Tooltip:ee,Tour:ee},oe=G.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function Ge(me){return me in be}function te(me,Pe){const[,$]=(0,E.default)(),le=W.default.useContext(he.default),J=Ge(me);if(Pe!==void 0)return[Pe,Pe];let Ee=le!=null?le:0;return J?(Ee+=(le?0:$.zIndexPopupBase)+be[me],Ee=Math.min(Ee,$.zIndexPopupBase+ue)):Ee+=oe[me],[le===void 0?Pe:Ee,Ee]}},53683:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getTransitionName=G.default=void 0;const L=()=>({height:0,opacity:0}),K=be=>{const{scrollHeight:oe}=be;return{height:oe,opacity:1}},W=be=>({height:be?be.offsetHeight:0}),E=(be,oe)=>(oe==null?void 0:oe.deadline)===!0||oe.propertyName==="height",he=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:L,onEnterStart:L,onAppearActive:K,onEnterActive:K,onLeaveStart:W,onLeaveActive:L,onAppearEnd:E,onEnterEnd:E,onLeaveEnd:E,motionDeadline:500}},ee=null,se=(be,oe,Ge)=>Ge!==void 0?Ge:`${be}-${oe}`;G.getTransitionName=se;var ue=G.default=he},74132:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=se,G.getOverflowOptions=W;var K=L(9064);function W(ue,be,oe,Ge){if(Ge===!1)return{adjustX:!1,adjustY:!1};const te=Ge&&typeof Ge=="object"?Ge:{},me={};switch(ue){case"top":case"bottom":me.shiftX=be.arrowOffsetHorizontal*2+oe,me.shiftY=!0,me.adjustY=!0;break;case"left":case"right":me.shiftY=be.arrowOffsetVertical*2+oe,me.shiftX=!0,me.adjustX=!0;break}const Pe=Object.assign(Object.assign({},me),te);return Pe.shiftX||(Pe.adjustX=!0),Pe.shiftY||(Pe.adjustY=!0),Pe}const E={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},he={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},ee=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function se(ue){const{arrowWidth:be,autoAdjustOverflow:oe,arrowPointAtCenter:Ge,offset:te,borderRadius:me,visibleFirst:Pe}=ue,$=be/2,le={};return Object.keys(E).forEach(J=>{const Ee=Ge&&he[J]||E[J],tt=Object.assign(Object.assign({},Ee),{offset:[0,0],dynamicInset:!0});switch(le[J]=tt,ee.has(J)&&(tt.autoArrow=!1),J){case"top":case"topLeft":case"topRight":tt.offset[1]=-$-te;break;case"bottom":case"bottomLeft":case"bottomRight":tt.offset[1]=$+te;break;case"left":case"leftTop":case"leftBottom":tt.offset[0]=-$-te;break;case"right":case"rightTop":case"rightBottom":tt.offset[0]=$+te;break}const Je=(0,K.getArrowOffsetToken)({contentRadius:me,limitVerticalRadius:!0});if(Ge)switch(J){case"topLeft":case"bottomLeft":tt.offset[0]=-Je.arrowOffsetHorizontal-$;break;case"topRight":case"bottomRight":tt.offset[0]=Je.arrowOffsetHorizontal+$;break;case"leftTop":case"rightTop":tt.offset[1]=-Je.arrowOffsetHorizontal-$;break;case"leftBottom":case"rightBottom":tt.offset[1]=Je.arrowOffsetHorizontal+$;break}tt.overflow=W(J,Je,be,oe),Pe&&(tt.htmlRegion="visibleFirst")}),le}},47419:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.cloneElement=ee,G.isFragment=E,G.replaceElement=void 0;var W=K(L(67294));function E(se){return se&&W.default.isValidElement(se)&&se.type===W.default.Fragment}const he=(se,ue,be)=>W.default.isValidElement(se)?W.default.cloneElement(se,typeof be=="function"?be(se.props||{}):be):ue;G.replaceElement=he;function ee(se,ue){return he(se,se,ue)}},71434:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.getMergedStatus=void 0,G.getStatusClassNames=he;var W=K(L(93967));const E=null;function he(se,ue,be){return(0,W.default)({[`${se}-status-success`]:ue==="success",[`${se}-status-warning`]:ue==="warning",[`${se}-status-error`]:ue==="error",[`${se}-status-validating`]:ue==="validating",[`${se}-has-feedback`]:be})}const ee=(se,ue)=>ue||se;G.getMergedStatus=ee},38882:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.canUseDocElement=void 0,Object.defineProperty(G,"isStyleSupport",{enumerable:!0,get:function(){return E.isStyleSupport}});var W=K(L(19158)),E=L(3481);const he=()=>(0,W.default)()&&window.document.documentElement;G.canUseDocElement=he},60938:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),he=K(L(27712)),ee=function(oe,Ge){var te={};for(var me in oe)Object.prototype.hasOwnProperty.call(oe,me)&&Ge.indexOf(me)<0&&(te[me]=oe[me]);if(oe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Pe=0,me=Object.getOwnPropertySymbols(oe);Pe<me.length;Pe++)Ge.indexOf(me[Pe])<0&&Object.prototype.propertyIsEnumerable.call(oe,me[Pe])&&(te[me[Pe]]=oe[me[Pe]]);return te};const se={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},ue=E.forwardRef((oe,Ge)=>{const te=tt=>{const{keyCode:Je}=tt;Je===he.default.ENTER&&tt.preventDefault()},me=tt=>{const{keyCode:Je}=tt,{onClick:wt}=oe;Je===he.default.ENTER&&wt&&wt()},{style:Pe,noStyle:$,disabled:le}=oe,J=ee(oe,["style","noStyle","disabled"]);let Ee={};return $||(Ee=Object.assign({},se)),le&&(Ee.pointerEvents="none"),Ee=Object.assign(Object.assign({},Ee),Pe),E.createElement("div",Object.assign({role:"button",tabIndex:0,ref:Ge},J,{onKeyDown:te,onKeyUp:me,style:Ee}))});var be=G.default=ue},13594:function(bt,G,L){"use strict";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.devUseWarning=G.default=G.WarningContext=void 0,G.noop=he,G.resetWarned=se;var W=K(L(67294)),E=K(L(45520));function he(){}let ee=null;function se(){ee=null,(0,E.resetWarned)()}let ue=he;const be=G.WarningContext=W.createContext({}),oe=G.devUseWarning=()=>{const te=()=>{};return te.deprecated=he,te};var Ge=G.default=ue},96877:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(67294));const E=W.default.createContext(void 0);var he=G.default=E},1028:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(25633)),E=G.default=W.default},93319:function(bt,G,L){"use strict";"use client";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.DisabledContextProvider=void 0;var W=K(L(67294));const E=W.createContext(!1),he=se=>{let{children:ue,disabled:be}=se;const oe=W.useContext(E);return W.createElement(E.Provider,{value:be!=null?be:oe},ue)};G.DisabledContextProvider=he;var ee=G.default=E},16722:function(bt,G,L){"use strict";"use client";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ee;var W=K(L(67294)),E=L(82225),he=L(3184);function ee(se){const{children:ue}=se,[,be]=(0,he.useToken)(),{motion:oe}=be,Ge=W.useRef(!1);return Ge.current=Ge.current||oe===!1,Ge.current?W.createElement(E.Provider,{motion:oe},ue):ue}},11380:function(bt,G,L){"use strict";"use client";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(67294)),E=L(13594);const he=null;var ee=G.default=()=>null},3236:function(bt,G,L){"use strict";"use client";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.SizeContextProvider=void 0;var W=K(L(67294));const E=W.createContext(void 0),he=se=>{let{children:ue,size:be}=se;const oe=W.useContext(E);return W.createElement(E.Provider,{value:be||oe},ue)};G.SizeContextProvider=he;var ee=G.default=E},7177:function(bt,G,L){"use strict";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.defaultIconPrefixCls=G.ConfigContext=G.ConfigConsumer=void 0;var W=K(L(67294));const E=G.defaultIconPrefixCls="anticon",he=(ue,be)=>be||(ue?`ant-${ue}`:"ant"),ee=G.ConfigContext=W.createContext({getPrefixCls:he,iconPrefixCls:E}),{Consumer:se}=ee;G.ConfigConsumer=se},56301:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.getStyle=be,G.registerTheme=oe;var W=L(78589),E=L(131),he=K(L(19158)),ee=L(93399),se=K(L(13594));const ue=`-ant-${Date.now()}-${Math.random()}`;function be(Ge,te){const me={},Pe=(J,Ee)=>{let tt=J.clone();return tt=(Ee==null?void 0:Ee(tt))||tt,tt.toRgbString()},$=(J,Ee)=>{const tt=new E.TinyColor(J),Je=(0,W.generate)(tt.toRgbString());me[`${Ee}-color`]=Pe(tt),me[`${Ee}-color-disabled`]=Je[1],me[`${Ee}-color-hover`]=Je[4],me[`${Ee}-color-active`]=Je[6],me[`${Ee}-color-outline`]=tt.clone().setAlpha(.2).toRgbString(),me[`${Ee}-color-deprecated-bg`]=Je[0],me[`${Ee}-color-deprecated-border`]=Je[2]};if(te.primaryColor){$(te.primaryColor,"primary");const J=new E.TinyColor(te.primaryColor),Ee=(0,W.generate)(J.toRgbString());Ee.forEach((Je,wt)=>{me[`primary-${wt+1}`]=Je}),me["primary-color-deprecated-l-35"]=Pe(J,Je=>Je.lighten(35)),me["primary-color-deprecated-l-20"]=Pe(J,Je=>Je.lighten(20)),me["primary-color-deprecated-t-20"]=Pe(J,Je=>Je.tint(20)),me["primary-color-deprecated-t-50"]=Pe(J,Je=>Je.tint(50)),me["primary-color-deprecated-f-12"]=Pe(J,Je=>Je.setAlpha(Je.getAlpha()*.12));const tt=new E.TinyColor(Ee[0]);me["primary-color-active-deprecated-f-30"]=Pe(tt,Je=>Je.setAlpha(Je.getAlpha()*.3)),me["primary-color-active-deprecated-d-02"]=Pe(tt,Je=>Je.darken(2))}return te.successColor&&$(te.successColor,"success"),te.warningColor&&$(te.warningColor,"warning"),te.errorColor&&$(te.errorColor,"error"),te.infoColor&&$(te.infoColor,"info"),`
  :root {
    ${Object.keys(me).map(J=>`--${Ge}-${J}: ${me[J]};`).join(`
`)}
  }
  `.trim()}function oe(Ge,te){const me=be(Ge,te);(0,he.default)()&&(0,ee.updateCSS)(me,`${ue}-dynamic-theme`)}},14893:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var K=L(3184);const W=he=>{const[,,,,ee]=(0,K.useToken)();return ee?`${he}-css-var`:""};var E=G.default=W},5819:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=L(67294),E=K(L(93319)),he=K(L(3236));function ee(){const ue=(0,W.useContext)(E.default),be=(0,W.useContext)(he.default);return{componentDisabled:ue,componentSize:be}}var se=G.default=ee},65693:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(67294)),E=K(L(3236));const he=se=>{const ue=W.default.useContext(E.default);return W.default.useMemo(()=>se?typeof se=="string"?se!=null?se:ue:se instanceof Function?se(ue):ue:ue,[se,ue])};var ee=G.default=he},25494:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ue;var W=K(L(67265)),E=K(L(11102)),he=L(13594),ee=L(3184),se=K(L(78459));function ue(be,oe,Ge){var te,me;const Pe=(0,he.devUseWarning)("ConfigProvider"),$=be||{},le=$.inherit===!1||!oe?Object.assign(Object.assign({},ee.defaultConfig),{hashed:(te=oe==null?void 0:oe.hashed)!==null&&te!==void 0?te:ee.defaultConfig.hashed,cssVar:oe==null?void 0:oe.cssVar}):oe,J=(0,se.default)();return(0,W.default)(()=>{var Ee,tt;if(!be)return oe;const Je=Object.assign({},le.components);Object.keys(be.components||{}).forEach(yt=>{Je[yt]=Object.assign(Object.assign({},Je[yt]),be.components[yt])});const wt=`css-var-${J.replace(/:/g,"")}`,pt=((Ee=$.cssVar)!==null&&Ee!==void 0?Ee:le.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:Ge==null?void 0:Ge.prefixCls},typeof le.cssVar=="object"?le.cssVar:{}),typeof $.cssVar=="object"?$.cssVar:{}),{key:typeof $.cssVar=="object"&&((tt=$.cssVar)===null||tt===void 0?void 0:tt.key)||wt});return Object.assign(Object.assign(Object.assign({},le),$),{token:Object.assign(Object.assign({},le.token),$.token),components:Je,cssVar:pt})},[$,le],(Ee,tt)=>Ee.some((Je,wt)=>{const pt=tt[wt];return!(0,E.default)(Je,pt,!0)}))}},78459:function(bt,G,L){"use strict";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(67294));const E=Object.assign({},W),{useId:he}=E,se=typeof he=="undefined"?()=>"":he;var ue=G.default=se},31929:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"ConfigConsumer",{enumerable:!0,get:function(){return le.ConfigConsumer}}),Object.defineProperty(G,"ConfigContext",{enumerable:!0,get:function(){return le.ConfigContext}}),G.default=G.configConsumerProps=void 0,Object.defineProperty(G,"defaultIconPrefixCls",{enumerable:!0,get:function(){return le.defaultIconPrefixCls}}),G.warnContext=G.globalConfig=G.defaultPrefixCls=void 0;var E=W(L(67294)),he=L(6731),ee=K(L(13357)),se=K(L(67265)),ue=L(20059),be=W(L(13594)),oe=K(L(2197)),Ge=W(L(24522)),te=K(L(44805)),me=K(L(18253)),Pe=L(89329),$=K(L(98411)),le=L(7177),J=L(56301),Ee=L(93319),tt=K(L(5819)),Je=K(L(25494)),wt=K(L(16722)),pt=K(L(11380)),yt=W(L(3236)),Re=K(L(82932)),Ce=function(nr,Ft){var Kt={};for(var fn in nr)Object.prototype.hasOwnProperty.call(nr,fn)&&Ft.indexOf(fn)<0&&(Kt[fn]=nr[fn]);if(nr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Gn=0,fn=Object.getOwnPropertySymbols(nr);Gn<fn.length;Gn++)Ft.indexOf(fn[Gn])<0&&Object.prototype.propertyIsEnumerable.call(nr,fn[Gn])&&(Kt[fn[Gn]]=nr[fn[Gn]]);return Kt};let Ue=!1;const We=G.warnContext=null,lt=G.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale"],tn=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],Le=G.defaultPrefixCls="ant";let _t,Me,nt,qe;function Ye(){return _t||Le}function Lt(){return Me||le.defaultIconPrefixCls}function xt(nr){return Object.keys(nr).some(Ft=>Ft.endsWith("Color"))}const Ie=nr=>{const{prefixCls:Ft,iconPrefixCls:Kt,theme:fn,holderRender:Gn}=nr;Ft!==void 0&&(_t=Ft),Kt!==void 0&&(Me=Kt),"holderRender"in nr&&(qe=Gn),fn&&(xt(fn)?(0,J.registerTheme)(Ye(),fn):nt=fn)},Gt=()=>({getPrefixCls:(nr,Ft)=>Ft||(nr?`${Ye()}-${nr}`:Ye()),getIconPrefixCls:Lt,getRootPrefixCls:()=>_t||Ye(),getTheme:()=>nt,holderRender:qe});G.globalConfig=Gt;const gn=nr=>{const{children:Ft,csp:Kt,autoInsertSpaceInButton:fn,alert:Gn,anchor:on,form:Pt,locale:zt,componentSize:ze,direction:rt,space:jt,virtual:U,dropdownMatchSelectWidth:fe,popupMatchSelectWidth:at,popupOverflow:de,legacyLocale:$t,parentContext:sn,iconPrefixCls:pn,theme:Nn,componentDisabled:Wn,segmented:qn,statistic:dn,spin:vt,calendar:It,carousel:An,cascader:Dn,collapse:Yn,typography:dt,checkbox:xe,descriptions:Be,divider:st,drawer:Dt,skeleton:Ot,steps:Sn,image:er,layout:br,list:$n,mentions:Oe,modal:we,progress:Ve,result:it,slider:At,breadcrumb:qt,menu:un,pagination:St,input:Jt,textArea:Qn,empty:Er,badge:Gr,radio:mr,rate:Hr,switch:wi,transfer:Pi,avatar:wr,message:gi,tag:di,table:xi,card:Fo,tabs:Ai,timeline:ea,timePicker:_a,upload:fi,notification:Ji,tree:$e,colorPicker:ht,datePicker:Ht,rangePicker:hn,flex:Fn,wave:Bn,dropdown:yn,warning:On,tour:pr,floatButtonGroup:hr}=nr,oi=E.useCallback((co,Mo)=>{const{prefixCls:bs}=nr;if(Mo)return Mo;const ba=bs||sn.getPrefixCls("");return co?`${ba}-${co}`:ba},[sn.getPrefixCls,nr.prefixCls]),Xi=pn||sn.iconPrefixCls||le.defaultIconPrefixCls,io=Kt||sn.csp;(0,Re.default)(Xi,io);const ai=(0,Je.default)(Nn,sn.theme,{prefixCls:oi("")}),Yi={csp:io,autoInsertSpaceInButton:fn,alert:Gn,anchor:on,locale:zt||$t,direction:rt,space:jt,virtual:U,popupMatchSelectWidth:at!=null?at:fe,popupOverflow:de,getPrefixCls:oi,iconPrefixCls:Xi,theme:ai,segmented:qn,statistic:dn,spin:vt,calendar:It,carousel:An,cascader:Dn,collapse:Yn,typography:dt,checkbox:xe,descriptions:Be,divider:st,drawer:Dt,skeleton:Ot,steps:Sn,image:er,input:Jt,textArea:Qn,layout:br,list:$n,mentions:Oe,modal:we,progress:Ve,result:it,slider:At,breadcrumb:qt,menu:un,pagination:St,empty:Er,badge:Gr,radio:mr,rate:Hr,switch:wi,transfer:Pi,avatar:wr,message:gi,tag:di,table:xi,card:Fo,tabs:Ai,timeline:ea,timePicker:_a,upload:fi,notification:Ji,tree:$e,colorPicker:ht,datePicker:Ht,rangePicker:hn,flex:Fn,wave:Bn,dropdown:yn,warning:On,tour:pr,floatButtonGroup:hr},ji=Object.assign({},sn);Object.keys(Yi).forEach(co=>{Yi[co]!==void 0&&(ji[co]=Yi[co])}),tn.forEach(co=>{const Mo=nr[co];Mo&&(ji[co]=Mo)});const Yr=(0,se.default)(()=>ji,ji,(co,Mo)=>{const bs=Object.keys(co),ba=Object.keys(Mo);return bs.length!==ba.length||bs.some(ra=>co[ra]!==Mo[ra])}),To=E.useMemo(()=>({prefixCls:Xi,csp:io}),[Xi,io]);let mi=E.createElement(E.Fragment,null,E.createElement(pt.default,{dropdownMatchSelectWidth:fe}),Ft);const wo=E.useMemo(()=>{var co,Mo,bs,ba;return(0,ue.merge)(((co=me.default.Form)===null||co===void 0?void 0:co.defaultValidateMessages)||{},((bs=(Mo=Yr.locale)===null||Mo===void 0?void 0:Mo.Form)===null||bs===void 0?void 0:bs.defaultValidateMessages)||{},((ba=Yr.form)===null||ba===void 0?void 0:ba.validateMessages)||{},(Pt==null?void 0:Pt.validateMessages)||{})},[Yr,Pt==null?void 0:Pt.validateMessages]);Object.keys(wo).length>0&&(mi=E.createElement(oe.default.Provider,{value:wo},mi)),zt&&(mi=E.createElement(Ge.default,{locale:zt,_ANT_MARK__:Ge.ANT_MARK},mi)),(Xi||io)&&(mi=E.createElement(ee.default.Provider,{value:To},mi)),ze&&(mi=E.createElement(yt.SizeContextProvider,{size:ze},mi)),mi=E.createElement(wt.default,null,mi);const $i=E.useMemo(()=>{const co=ai||{},{algorithm:Mo,token:bs,components:ba,cssVar:ra}=co,ms=Ce(co,["algorithm","token","components","cssVar"]),ls=Mo&&(!Array.isArray(Mo)||Mo.length>0)?(0,he.createTheme)(Mo):Pe.defaultTheme,Ct={};Object.entries(ba||{}).forEach(jn=>{let[kr,Ci]=jn;const qi=Object.assign({},Ci);"algorithm"in qi&&(qi.algorithm===!0?qi.theme=ls:(Array.isArray(qi.algorithm)||typeof qi.algorithm=="function")&&(qi.theme=(0,he.createTheme)(qi.algorithm)),delete qi.algorithm),Ct[kr]=qi});const Wt=Object.assign(Object.assign({},$.default),bs);return Object.assign(Object.assign({},ms),{theme:ls,token:Wt,components:Ct,override:Object.assign({override:Wt},Ct),cssVar:ra})},[ai]);return Nn&&(mi=E.createElement(Pe.DesignTokenContext.Provider,{value:$i},mi)),Yr.warning&&(mi=E.createElement(be.WarningContext.Provider,{value:Yr.warning},mi)),Wn!==void 0&&(mi=E.createElement(Ee.DisabledContextProvider,{disabled:Wn},mi)),E.createElement(le.ConfigContext.Provider,{value:Yr},mi)},Tn=nr=>{const Ft=E.useContext(le.ConfigContext),Kt=E.useContext(te.default);return E.createElement(gn,Object.assign({parentContext:Ft,legacyLocale:Kt},nr))};Tn.ConfigContext=le.ConfigContext,Tn.SizeContext=yt.default,Tn.config=Ie,Tn.useConfig=tt.default,Object.defineProperty(Tn,"SizeContext",{get:()=>yt.default});var sr=G.default=Tn},82932:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return K.useResetIconStyle}});var K=L(3184)},25633:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(27590)),E=K(L(52040));const he={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},W.default),timePickerLocale:Object.assign({},E.default)};var ee=G.default=he},51130:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.VariantContext=G.NoStyleItemContext=G.NoFormStyle=G.FormProvider=G.FormItemPrefixContext=G.FormItemInputContext=G.FormContext=void 0;var E=W(L(67294)),he=E,ee=L(43589),se=K(L(18475));const ue=G.FormContext=he.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),be=G.NoStyleItemContext=he.createContext(null),oe=$=>{const le=(0,se.default)($,["prefixCls"]);return he.createElement(ee.FormProvider,Object.assign({},le))};G.FormProvider=oe;const Ge=G.FormItemPrefixContext=he.createContext({prefixCls:""}),te=G.FormItemInputContext=he.createContext({}),me=$=>{let{children:le,status:J,override:Ee}=$;const tt=(0,E.useContext)(te),Je=(0,E.useMemo)(()=>{const wt=Object.assign({},tt);return Ee&&delete wt.isFormItemInput,J&&(delete wt.status,delete wt.hasFeedback,delete wt.feedbackIcon),wt},[J,Ee,tt]);return he.createElement(te.Provider,{value:Je},le)};G.NoFormStyle=me;const Pe=G.VariantContext=(0,E.createContext)(void 0)},96424:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.Variants=void 0;var K=L(67294),W=L(51130);const E=G.Variants=["outlined","borderless","filled"],he=function(se){let ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const be=(0,K.useContext)(W.VariantContext);let oe;typeof se!="undefined"?oe=se:ue===!1?oe="borderless":oe=be!=null?be:"outlined";const Ge=E.includes(oe);return[oe,Ge]};var ee=G.default=he},2197:function(bt,G,L){"use strict";"use client";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var K=L(67294),W=G.default=(0,K.createContext)(void 0)},10815:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0,G.triggerFocus=pt;var E=W(L(67294)),he=K(L(93967)),ee=K(L(67656)),se=L(75531),ue=K(L(49314)),be=L(71434),oe=L(13594),Ge=L(31929),te=K(L(93319)),me=K(L(14893)),Pe=K(L(65693)),$=L(51130),le=K(L(96424)),J=L(46549),Ee=K(L(81722)),tt=K(L(89858)),Je=L(36714),wt=function(Ce,Ue){var We={};for(var lt in Ce)Object.prototype.hasOwnProperty.call(Ce,lt)&&Ue.indexOf(lt)<0&&(We[lt]=Ce[lt]);if(Ce!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tn=0,lt=Object.getOwnPropertySymbols(Ce);tn<lt.length;tn++)Ue.indexOf(lt[tn])<0&&Object.prototype.propertyIsEnumerable.call(Ce,lt[tn])&&(We[lt[tn]]=Ce[lt[tn]]);return We};function pt(Ce,Ue){if(!Ce)return;Ce.focus(Ue);const{cursor:We}=Ue||{};if(We){const lt=Ce.value.length;switch(We){case"start":Ce.setSelectionRange(0,0);break;case"end":Ce.setSelectionRange(lt,lt);break;default:Ce.setSelectionRange(0,lt);break}}}const yt=(0,E.forwardRef)((Ce,Ue)=>{var We;const{prefixCls:lt,bordered:tn=!0,status:Le,size:_t,disabled:Me,onBlur:nt,onFocus:qe,suffix:Ye,allowClear:Lt,addonAfter:xt,addonBefore:Ie,className:Gt,style:gn,styles:Tn,rootClassName:sr,onChange:nr,classNames:Ft,variant:Kt}=Ce,fn=wt(Ce,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:Gn,direction:on,input:Pt}=E.default.useContext(Ge.ConfigContext),zt=Gn("input",lt),ze=(0,E.useRef)(null),rt=(0,me.default)(zt),[jt,U,fe]=(0,tt.default)(zt,rt),{compactSize:at,compactItemClassnames:de}=(0,J.useCompactItemContext)(zt,on),$t=(0,Pe.default)(Ot=>{var Sn;return(Sn=_t!=null?_t:at)!==null&&Sn!==void 0?Sn:Ot}),sn=E.default.useContext(te.default),pn=Me!=null?Me:sn,{status:Nn,hasFeedback:Wn,feedbackIcon:qn}=(0,E.useContext)($.FormItemInputContext),dn=(0,be.getMergedStatus)(Nn,Le),vt=(0,Je.hasPrefixSuffix)(Ce)||!!Wn,It=(0,E.useRef)(vt),An=(0,Ee.default)(ze,!0),Dn=Ot=>{An(),nt==null||nt(Ot)},Yn=Ot=>{An(),qe==null||qe(Ot)},dt=Ot=>{An(),nr==null||nr(Ot)},xe=(Wn||Ye)&&E.default.createElement(E.default.Fragment,null,Ye,Wn&&qn),Be=(0,ue.default)(Lt!=null?Lt:Pt==null?void 0:Pt.allowClear),[st,Dt]=(0,le.default)(Kt,tn);return jt(E.default.createElement(ee.default,Object.assign({ref:(0,se.composeRef)(Ue,ze),prefixCls:zt,autoComplete:Pt==null?void 0:Pt.autoComplete},fn,{disabled:pn,onBlur:Dn,onFocus:Yn,style:Object.assign(Object.assign({},Pt==null?void 0:Pt.style),gn),styles:Object.assign(Object.assign({},Pt==null?void 0:Pt.styles),Tn),suffix:xe,allowClear:Be,className:(0,he.default)(Gt,sr,fe,rt,de,Pt==null?void 0:Pt.className),onChange:dt,addonAfter:xt&&E.default.createElement(J.NoCompactStyle,null,E.default.createElement($.NoFormStyle,{override:!0,status:!0},xt)),addonBefore:Ie&&E.default.createElement(J.NoCompactStyle,null,E.default.createElement($.NoFormStyle,{override:!0,status:!0},Ie)),classNames:Object.assign(Object.assign(Object.assign({},Ft),Pt==null?void 0:Pt.classNames),{input:(0,he.default)({[`${zt}-sm`]:$t==="small",[`${zt}-lg`]:$t==="large",[`${zt}-rtl`]:on==="rtl"},Ft==null?void 0:Ft.input,(We=Pt==null?void 0:Pt.classNames)===null||We===void 0?void 0:We.input,U),variant:(0,he.default)({[`${zt}-${st}`]:Dt},(0,be.getStatusClassNames)(zt,dn)),affixWrapper:(0,he.default)({[`${zt}-affix-wrapper-sm`]:$t==="small",[`${zt}-affix-wrapper-lg`]:$t==="large",[`${zt}-affix-wrapper-rtl`]:on==="rtl"},U),wrapper:(0,he.default)({[`${zt}-group-rtl`]:on==="rtl"},U),groupWrapper:(0,he.default)({[`${zt}-group-wrapper-sm`]:$t==="small",[`${zt}-group-wrapper-lg`]:$t==="large",[`${zt}-group-wrapper-rtl`]:on==="rtl",[`${zt}-group-wrapper-${st}`]:Dt},(0,be.getStatusClassNames)(`${zt}-group-wrapper`,dn,Wn),U)})})))});var Re=G.default=yt},14104:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),he=E,ee=K(L(93967)),se=K(L(43961)),ue=K(L(49314)),be=L(71434),oe=L(13594),Ge=L(31929),te=K(L(93319)),me=K(L(14893)),Pe=K(L(65693)),$=L(51130),le=K(L(96424)),J=L(10815),Ee=K(L(89858)),tt=function(pt,yt){var Re={};for(var Ce in pt)Object.prototype.hasOwnProperty.call(pt,Ce)&&yt.indexOf(Ce)<0&&(Re[Ce]=pt[Ce]);if(pt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ue=0,Ce=Object.getOwnPropertySymbols(pt);Ue<Ce.length;Ue++)yt.indexOf(Ce[Ue])<0&&Object.prototype.propertyIsEnumerable.call(pt,Ce[Ue])&&(Re[Ce[Ue]]=pt[Ce[Ue]]);return Re};const Je=(0,E.forwardRef)((pt,yt)=>{var Re,Ce;const{prefixCls:Ue,bordered:We=!0,size:lt,disabled:tn,status:Le,allowClear:_t,classNames:Me,rootClassName:nt,className:qe,style:Ye,styles:Lt,variant:xt}=pt,Ie=tt(pt,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:Gt,direction:gn,textArea:Tn}=he.useContext(Ge.ConfigContext),sr=(0,Pe.default)(lt),nr=he.useContext(te.default),Ft=tn!=null?tn:nr,{status:Kt,hasFeedback:fn,feedbackIcon:Gn}=he.useContext($.FormItemInputContext),on=(0,be.getMergedStatus)(Kt,Le),Pt=he.useRef(null);he.useImperativeHandle(yt,()=>{var $t;return{resizableTextArea:($t=Pt.current)===null||$t===void 0?void 0:$t.resizableTextArea,focus:sn=>{var pn,Nn;(0,J.triggerFocus)((Nn=(pn=Pt.current)===null||pn===void 0?void 0:pn.resizableTextArea)===null||Nn===void 0?void 0:Nn.textArea,sn)},blur:()=>{var sn;return(sn=Pt.current)===null||sn===void 0?void 0:sn.blur()}}});const zt=Gt("input",Ue),ze=(0,me.default)(zt),[rt,jt,U]=(0,Ee.default)(zt,ze),[fe,at]=(0,le.default)(xt,We),de=(0,ue.default)(_t!=null?_t:Tn==null?void 0:Tn.allowClear);return rt(he.createElement(se.default,Object.assign({autoComplete:Tn==null?void 0:Tn.autoComplete},Ie,{style:Object.assign(Object.assign({},Tn==null?void 0:Tn.style),Ye),styles:Object.assign(Object.assign({},Tn==null?void 0:Tn.styles),Lt),disabled:Ft,allowClear:de,className:(0,ee.default)(U,ze,qe,nt,Tn==null?void 0:Tn.className),classNames:Object.assign(Object.assign(Object.assign({},Me),Tn==null?void 0:Tn.classNames),{textarea:(0,ee.default)({[`${zt}-sm`]:sr==="small",[`${zt}-lg`]:sr==="large"},jt,Me==null?void 0:Me.textarea,(Re=Tn==null?void 0:Tn.classNames)===null||Re===void 0?void 0:Re.textarea),variant:(0,ee.default)({[`${zt}-${fe}`]:at},(0,be.getStatusClassNames)(zt,on)),affixWrapper:(0,ee.default)(`${zt}-textarea-affix-wrapper`,{[`${zt}-affix-wrapper-rtl`]:gn==="rtl",[`${zt}-affix-wrapper-sm`]:sr==="small",[`${zt}-affix-wrapper-lg`]:sr==="large",[`${zt}-textarea-show-count`]:pt.showCount||((Ce=pt.count)===null||Ce===void 0?void 0:Ce.show)},jt)}),prefixCls:zt,suffix:fn&&he.createElement("span",{className:`${zt}-textarea-suffix`},Gn),ref:Pt})))});var wt=G.default=Je},81722:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=W;var K=L(67294);function W(E,he){const ee=(0,K.useRef)([]),se=()=>{ee.current.push(setTimeout(()=>{var ue,be,oe,Ge;!((ue=E.current)===null||ue===void 0)&&ue.input&&((be=E.current)===null||be===void 0?void 0:be.input.getAttribute("type"))==="password"&&(!((oe=E.current)===null||oe===void 0)&&oe.input.hasAttribute("value"))&&((Ge=E.current)===null||Ge===void 0||Ge.input.removeAttribute("value"))}))};return(0,K.useEffect)(()=>(he&&se(),()=>ee.current.forEach(ue=>{ue&&clearTimeout(ue)})),[]),se}},89858:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genPlaceholderStyle=G.genInputSmallStyle=G.genInputGroupStyle=G.genBasicInputStyle=G.genActiveStyle=G.default=void 0,Object.defineProperty(G,"initComponentToken",{enumerable:!0,get:function(){return ee.initComponentToken}}),Object.defineProperty(G,"initInputToken",{enumerable:!0,get:function(){return ee.initInputToken}});var K=L(6731),W=L(98078),E=L(78793),he=L(3184),ee=L(25735),se=L(58594);const ue=pt=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:pt,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});G.genPlaceholderStyle=ue;const be=pt=>({borderColor:pt.activeBorderColor,boxShadow:pt.activeShadow,outline:0,backgroundColor:pt.activeBg});G.genActiveStyle=be;const oe=pt=>{const{paddingBlockLG:yt,lineHeightLG:Re,borderRadiusLG:Ce,paddingInlineLG:Ue}=pt;return{padding:`${(0,K.unit)(yt)} ${(0,K.unit)(Ue)}`,fontSize:pt.inputFontSizeLG,lineHeight:Re,borderRadius:Ce}},Ge=pt=>({padding:`${(0,K.unit)(pt.paddingBlockSM)} ${(0,K.unit)(pt.paddingInlineSM)}`,fontSize:pt.inputFontSizeSM,borderRadius:pt.borderRadiusSM});G.genInputSmallStyle=Ge;const te=pt=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,K.unit)(pt.paddingBlock)} ${(0,K.unit)(pt.paddingInline)}`,color:pt.colorText,fontSize:pt.inputFontSize,lineHeight:pt.lineHeight,borderRadius:pt.borderRadius,transition:`all ${pt.motionDurationMid}`},ue(pt.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:pt.controlHeight,lineHeight:pt.lineHeight,verticalAlign:"bottom",transition:`all ${pt.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},oe(pt)),"&-sm":Object.assign({},Ge(pt)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}});G.genBasicInputStyle=te;const me=pt=>{const{componentCls:yt,antCls:Re}=pt;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,["&[class*='col-']"]:{paddingInlineEnd:pt.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${yt}, &-lg > ${yt}-group-addon`]:Object.assign({},oe(pt)),[`&-sm ${yt}, &-sm > ${yt}-group-addon`]:Object.assign({},Ge(pt)),[`&-lg ${Re}-select-single ${Re}-select-selector`]:{height:pt.controlHeightLG},[`&-sm ${Re}-select-single ${Re}-select-selector`]:{height:pt.controlHeightSM},[`> ${yt}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${yt}-group`]:{["&-addon, &-wrap"]:{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,K.unit)(pt.paddingInline)}`,color:pt.colorText,fontWeight:"normal",fontSize:pt.inputFontSize,textAlign:"center",borderRadius:pt.borderRadius,transition:`all ${pt.motionDurationSlow}`,lineHeight:1,[`${Re}-select`]:{margin:`${(0,K.unit)(pt.calc(pt.paddingBlock).add(1).mul(-1).equal())} ${(0,K.unit)(pt.calc(pt.paddingInline).mul(-1).equal())}`,[`&${Re}-select-single:not(${Re}-select-customize-input):not(${Re}-pagination-size-changer)`]:{[`${Re}-select-selector`]:{backgroundColor:"inherit",border:`${(0,K.unit)(pt.lineWidth)} ${pt.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${Re}-select-selector`]:{color:pt.colorPrimary}}},[`${Re}-cascader-picker`]:{margin:`-9px ${(0,K.unit)(pt.calc(pt.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${Re}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${yt}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${yt}-search-with-button &`]:{zIndex:0}}},[`> ${yt}:first-child, ${yt}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${Re}-select ${Re}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${yt}-affix-wrapper`]:{[`&:not(:first-child) ${yt}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${yt}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${yt}:last-child, ${yt}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${Re}-select ${Re}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${yt}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${yt}-search &`]:{borderStartStartRadius:pt.borderRadius,borderEndStartRadius:pt.borderRadius}},[`&:not(:first-child), ${yt}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${yt}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,W.clearFix)()),{[`${yt}-group-addon, ${yt}-group-wrap, > ${yt}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:pt.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${yt}-affix-wrapper,
        & > ${yt}-number-affix-wrapper,
        & > ${Re}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:pt.calc(pt.lineWidth).mul(-1).equal(),borderInlineEndWidth:pt.lineWidth},[`${yt}`]:{float:"none"},[`& > ${Re}-select > ${Re}-select-selector,
      & > ${Re}-select-auto-complete ${yt},
      & > ${Re}-cascader-picker ${yt},
      & > ${yt}-group-wrapper ${yt}`]:{borderInlineEndWidth:pt.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${Re}-select-focused`]:{zIndex:1},[`& > ${Re}-select > ${Re}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${Re}-select:first-child > ${Re}-select-selector,
      & > ${Re}-select-auto-complete:first-child ${yt},
      & > ${Re}-cascader-picker:first-child ${yt}`]:{borderStartStartRadius:pt.borderRadius,borderEndStartRadius:pt.borderRadius},[`& > *:last-child,
      & > ${Re}-select:last-child > ${Re}-select-selector,
      & > ${Re}-cascader-picker:last-child ${yt},
      & > ${Re}-cascader-picker-focused:last-child ${yt}`]:{borderInlineEndWidth:pt.lineWidth,borderStartEndRadius:pt.borderRadius,borderEndEndRadius:pt.borderRadius},[`& > ${Re}-select-auto-complete ${yt}`]:{verticalAlign:"top"},[`${yt}-group-wrapper + ${yt}-group-wrapper`]:{marginInlineStart:pt.calc(pt.lineWidth).mul(-1).equal(),[`${yt}-affix-wrapper`]:{borderRadius:0}},[`${yt}-group-wrapper:not(:last-child)`]:{[`&${yt}-search > ${yt}-group`]:{[`& > ${yt}-group-addon > ${yt}-search-button`]:{borderRadius:0},[`& > ${yt}`]:{borderStartStartRadius:pt.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:pt.borderRadius}}}})}};G.genInputGroupStyle=me;const Pe=pt=>{const{componentCls:yt,controlHeightSM:Re,lineWidth:Ce,calc:Ue}=pt,We=16,lt=Ue(Re).sub(Ue(Ce).mul(2)).sub(We).div(2).equal();return{[yt]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,W.resetComponent)(pt)),te(pt)),(0,se.genOutlinedStyle)(pt)),(0,se.genFilledStyle)(pt)),(0,se.genBorderlessStyle)(pt)),{'&[type="color"]':{height:pt.controlHeight,[`&${yt}-lg`]:{height:pt.controlHeightLG},[`&${yt}-sm`]:{height:Re,paddingTop:lt,paddingBottom:lt}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},$=pt=>{const{componentCls:yt}=pt;return{[`${yt}-clear-icon`]:{margin:0,color:pt.colorTextQuaternary,fontSize:pt.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${pt.motionDurationSlow}`,"&:hover":{color:pt.colorTextTertiary},"&:active":{color:pt.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,K.unit)(pt.inputAffixPadding)}`}}}},le=pt=>{const{componentCls:yt,inputAffixPadding:Re,colorTextDescription:Ce,motionDurationSlow:Ue,colorIcon:We,colorIconHover:lt,iconCls:tn}=pt;return{[`${yt}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},te(pt)),{display:"inline-flex",[`&:not(${yt}-disabled):hover`]:{zIndex:1,[`${yt}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${yt}`]:{padding:0},[`> input${yt}, > textarea${yt}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${yt}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:pt.paddingXS}},"&-show-count-suffix":{color:Ce},"&-show-count-has-suffix":{marginInlineEnd:pt.paddingXXS},"&-prefix":{marginInlineEnd:Re},"&-suffix":{marginInlineStart:Re}}}),$(pt)),{[`${tn}${yt}-password-icon`]:{color:We,cursor:"pointer",transition:`all ${Ue}`,"&:hover":{color:lt}}})}},J=pt=>{const{componentCls:yt,borderRadiusLG:Re,borderRadiusSM:Ce}=pt;return{[`${yt}-group`]:Object.assign(Object.assign(Object.assign({},(0,W.resetComponent)(pt)),me(pt)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${yt}-group-addon`]:{borderRadius:Re,fontSize:pt.inputFontSizeLG}},"&-sm":{[`${yt}-group-addon`]:{borderRadius:Ce}}},(0,se.genOutlinedGroupStyle)(pt)),(0,se.genFilledGroupStyle)(pt)),{[`&:not(${yt}-compact-first-item):not(${yt}-compact-last-item)${yt}-compact-item`]:{[`${yt}, ${yt}-group-addon`]:{borderRadius:0}},[`&:not(${yt}-compact-last-item)${yt}-compact-first-item`]:{[`${yt}, ${yt}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${yt}-compact-first-item)${yt}-compact-last-item`]:{[`${yt}, ${yt}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${yt}-compact-last-item)${yt}-compact-item`]:{[`${yt}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},Ee=pt=>{const{componentCls:yt,antCls:Re}=pt,Ce=`${yt}-search`;return{[Ce]:{[`${yt}`]:{"&:hover, &:focus":{borderColor:pt.colorPrimaryHover,[`+ ${yt}-group-addon ${Ce}-button:not(${Re}-btn-primary)`]:{borderInlineStartColor:pt.colorPrimaryHover}}},[`${yt}-affix-wrapper`]:{borderRadius:0},[`${yt}-lg`]:{lineHeight:pt.calc(pt.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${yt}-group`]:{[`> ${yt}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${Ce}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:pt.borderRadius,borderEndEndRadius:pt.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${Ce}-button:not(${Re}-btn-primary)`]:{color:pt.colorTextDescription,"&:hover":{color:pt.colorPrimaryHover},"&:active":{color:pt.colorPrimaryActive},[`&${Re}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${Ce}-button`]:{height:pt.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${Ce}-button`]:{height:pt.controlHeightLG},[`&-small ${Ce}-button`]:{height:pt.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${yt}-compact-item`]:{[`&:not(${yt}-compact-last-item)`]:{[`${yt}-group-addon`]:{[`${yt}-search-button`]:{marginInlineEnd:pt.calc(pt.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${yt}-compact-first-item)`]:{[`${yt},${yt}-affix-wrapper`]:{borderRadius:0}},[`> ${yt}-group-addon ${yt}-search-button,
        > ${yt},
        ${yt}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${yt}-affix-wrapper-focused`]:{zIndex:2}}}}},tt=pt=>{const{componentCls:yt,paddingLG:Re}=pt,Ce=`${yt}-textarea`;return{[Ce]:{position:"relative","&-show-count":{[`> ${yt}`]:{height:"100%"},[`${yt}-data-count`]:{position:"absolute",bottom:pt.calc(pt.fontSize).mul(pt.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:pt.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${yt}`]:{paddingInlineEnd:Re}},[`&-affix-wrapper${Ce}-has-feedback`]:{[`${yt}`]:{paddingInlineEnd:Re}},[`&-affix-wrapper${yt}-affix-wrapper`]:{padding:0,[`> textarea${yt}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${yt}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${yt}-clear-icon`]:{position:"absolute",insetInlineEnd:pt.paddingXS,insetBlockStart:pt.paddingXS},[`${Ce}-suffix`]:{position:"absolute",top:0,insetInlineEnd:pt.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},Je=pt=>{const{componentCls:yt}=pt;return{[`${yt}-out-of-range`]:{[`&, & input, & textarea, ${yt}-show-count-suffix, ${yt}-data-count`]:{color:pt.colorError}}}};var wt=G.default=(0,he.genStyleHooks)("Input",pt=>{const yt=(0,he.mergeToken)(pt,(0,ee.initInputToken)(pt));return[Pe(yt),tt(yt),le(yt),J(yt),Ee(yt),Je(yt),(0,E.genCompactItemStyle)(yt)]},ee.initComponentToken,{resetFont:!1})},25735:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.initComponentToken=void 0,G.initInputToken=W;var K=L(3184);function W(he){return(0,K.mergeToken)(he,{inputAffixPadding:he.paddingXXS})}const E=he=>{const{controlHeight:ee,fontSize:se,lineHeight:ue,lineWidth:be,controlHeightSM:oe,controlHeightLG:Ge,fontSizeLG:te,lineHeightLG:me,paddingSM:Pe,controlPaddingHorizontalSM:$,controlPaddingHorizontal:le,colorFillAlter:J,colorPrimaryHover:Ee,colorPrimary:tt,controlOutlineWidth:Je,controlOutline:wt,colorErrorOutline:pt,colorWarningOutline:yt,colorBgContainer:Re}=he;return{paddingBlock:Math.max(Math.round((ee-se*ue)/2*10)/10-be,0),paddingBlockSM:Math.max(Math.round((oe-se*ue)/2*10)/10-be,0),paddingBlockLG:Math.ceil((Ge-te*me)/2*10)/10-be,paddingInline:Pe-be,paddingInlineSM:$-be,paddingInlineLG:le-be,addonBg:J,activeBorderColor:tt,hoverBorderColor:Ee,activeShadow:`0 0 0 ${Je}px ${wt}`,errorActiveShadow:`0 0 0 ${Je}px ${pt}`,warningActiveShadow:`0 0 0 ${Je}px ${yt}`,hoverBg:Re,activeBg:Re,inputFontSize:se,inputFontSizeLG:te,inputFontSizeSM:se}};G.initComponentToken=E},58594:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genOutlinedStyle=G.genOutlinedGroupStyle=G.genHoverStyle=G.genFilledStyle=G.genFilledGroupStyle=G.genDisabledStyle=G.genBorderlessStyle=G.genBaseOutlinedStyle=void 0;var K=L(6731),W=L(3184);const E=J=>({borderColor:J.hoverBorderColor,backgroundColor:J.hoverBg});G.genHoverStyle=E;const he=J=>({color:J.colorTextDisabled,backgroundColor:J.colorBgContainerDisabled,borderColor:J.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,["input[disabled], textarea[disabled]"]:{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},E((0,W.mergeToken)(J,{hoverBorderColor:J.colorBorder,hoverBg:J.colorBgContainerDisabled})))});G.genDisabledStyle=he;const ee=(J,Ee)=>({background:J.colorBgContainer,borderWidth:J.lineWidth,borderStyle:J.lineType,borderColor:Ee.borderColor,"&:hover":{borderColor:Ee.hoverBorderColor,backgroundColor:J.hoverBg},"&:focus, &:focus-within":{borderColor:Ee.activeBorderColor,boxShadow:Ee.activeShadow,outline:0,backgroundColor:J.activeBg}});G.genBaseOutlinedStyle=ee;const se=(J,Ee)=>({[`&${J.componentCls}-status-${Ee.status}:not(${J.componentCls}-disabled)`]:Object.assign(Object.assign({},ee(J,Ee)),{[`${J.componentCls}-prefix, ${J.componentCls}-suffix`]:{color:Ee.affixColor}})}),ue=(J,Ee)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ee(J,{borderColor:J.colorBorder,hoverBorderColor:J.hoverBorderColor,activeBorderColor:J.activeBorderColor,activeShadow:J.activeShadow})),{[`&${J.componentCls}-disabled, &[disabled]`]:Object.assign({},he(J))}),se(J,{status:"error",borderColor:J.colorError,hoverBorderColor:J.colorErrorBorderHover,activeBorderColor:J.colorError,activeShadow:J.errorActiveShadow,affixColor:J.colorError})),se(J,{status:"warning",borderColor:J.colorWarning,hoverBorderColor:J.colorWarningBorderHover,activeBorderColor:J.colorWarning,activeShadow:J.warningActiveShadow,affixColor:J.colorWarning})),Ee)});G.genOutlinedStyle=ue;const be=(J,Ee)=>({[`&${J.componentCls}-group-wrapper-status-${Ee.status}`]:{[`${J.componentCls}-group-addon`]:{borderColor:Ee.addonBorderColor,color:Ee.addonColor}}}),oe=J=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${J.componentCls}-group`]:{"&-addon":{background:J.addonBg,border:`${(0,K.unit)(J.lineWidth)} ${J.lineType} ${J.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},be(J,{status:"error",addonBorderColor:J.colorError,addonColor:J.colorErrorText})),be(J,{status:"warning",addonBorderColor:J.colorWarning,addonColor:J.colorWarningText})),{[`&${J.componentCls}-group-wrapper-disabled`]:{[`${J.componentCls}-group-addon`]:Object.assign({},he(J))}})});G.genOutlinedGroupStyle=oe;const Ge=(J,Ee)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${J.componentCls}-disabled, &[disabled]`]:{color:J.colorTextDisabled}},Ee)});G.genBorderlessStyle=Ge;const te=(J,Ee)=>({background:Ee.bg,borderWidth:J.lineWidth,borderStyle:J.lineType,borderColor:"transparent",["input&, & input, textarea&, & textarea"]:{color:Ee==null?void 0:Ee.inputColor},"&:hover":{background:Ee.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:Ee.activeBorderColor,backgroundColor:J.activeBg}}),me=(J,Ee)=>({[`&${J.componentCls}-status-${Ee.status}:not(${J.componentCls}-disabled)`]:Object.assign(Object.assign({},te(J,Ee)),{[`${J.componentCls}-prefix, ${J.componentCls}-suffix`]:{color:Ee.affixColor}})}),Pe=(J,Ee)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},te(J,{bg:J.colorFillTertiary,hoverBg:J.colorFillSecondary,activeBorderColor:J.colorPrimary})),{[`&${J.componentCls}-disabled, &[disabled]`]:Object.assign({},he(J))}),me(J,{status:"error",bg:J.colorErrorBg,hoverBg:J.colorErrorBgHover,activeBorderColor:J.colorError,inputColor:J.colorErrorText,affixColor:J.colorError})),me(J,{status:"warning",bg:J.colorWarningBg,hoverBg:J.colorWarningBgHover,activeBorderColor:J.colorWarning,inputColor:J.colorWarningText,affixColor:J.colorWarning})),Ee)});G.genFilledStyle=Pe;const $=(J,Ee)=>({[`&${J.componentCls}-group-wrapper-status-${Ee.status}`]:{[`${J.componentCls}-group-addon`]:{background:Ee.addonBg,color:Ee.addonColor}}}),le=J=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${J.componentCls}-group`]:{"&-addon":{background:J.colorFillTertiary},[`${J.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${(0,K.unit)(J.lineWidth)} ${J.lineType} ${J.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${(0,K.unit)(J.lineWidth)} ${J.lineType} ${J.colorSplit}`}}}},$(J,{status:"error",addonBg:J.colorErrorBg,addonColor:J.colorErrorText})),$(J,{status:"warning",addonBg:J.colorWarningBg,addonColor:J.colorWarningText})),{[`&${J.componentCls}-group-wrapper-disabled`]:{[`${J.componentCls}-group`]:{"&-addon":{background:J.colorFillTertiary,color:J.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,K.unit)(J.lineWidth)} ${J.lineType} ${J.colorBorder}`,borderTop:`${(0,K.unit)(J.lineWidth)} ${J.lineType} ${J.colorBorder}`,borderBottom:`${(0,K.unit)(J.lineWidth)} ${J.lineType} ${J.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,K.unit)(J.lineWidth)} ${J.lineType} ${J.colorBorder}`,borderTop:`${(0,K.unit)(J.lineWidth)} ${J.lineType} ${J.colorBorder}`,borderBottom:`${(0,K.unit)(J.lineWidth)} ${J.lineType} ${J.colorBorder}`}}}})});G.genFilledGroupStyle=le},36714:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.hasPrefixSuffix=L;function L(K){return!!(K.prefix||K.suffix||K.allowClear||K.showCount)}},44805:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var K=L(67294);const W=(0,K.createContext)(void 0);var E=G.default=W},18253:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(62273)),E=K(L(1028)),he=K(L(25633)),ee=K(L(52040));const se="${label} is not a valid ${type}",ue={locale:"en",Pagination:W.default,DatePicker:he.default,TimePicker:ee.default,Calendar:E.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:se,method:se,array:se,object:se,number:se,date:se,boolean:se,integer:se,float:se,regexp:se,email:se,url:se,hex:se},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}};var be=G.default=ue},24522:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.ANT_MARK=void 0,Object.defineProperty(G,"useLocale",{enumerable:!0,get:function(){return ue.default}});var E=W(L(67294)),he=L(13594),ee=L(10625),se=K(L(44805)),ue=K(L(76647));const be=G.ANT_MARK="internalMark",oe=te=>{const{locale:me={},children:Pe,_ANT_MARK__:$}=te;E.useEffect(()=>(0,ee.changeConfirmLocale)(me&&me.Modal),[me]);const le=E.useMemo(()=>Object.assign(Object.assign({},me),{exist:!0}),[me]);return E.createElement(se.default.Provider,{value:le},Pe)};var Ge=G.default=oe},76647:function(bt,G,L){"use strict";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),he=K(L(44805)),ee=K(L(18253));const se=(be,oe)=>{const Ge=E.useContext(he.default),te=E.useMemo(()=>{var Pe;const $=oe||ee.default[be],le=(Pe=Ge==null?void 0:Ge[be])!==null&&Pe!==void 0?Pe:{};return Object.assign(Object.assign({},typeof $=="function"?$():$),le||{})},[be,oe,Ge]),me=E.useMemo(()=>{const Pe=Ge==null?void 0:Ge.locale;return Ge!=null&&Ge.exist&&!Pe?ee.default.locale:Pe},[Ge]);return[te,me]};var ue=G.default=se},10625:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.changeConfirmLocale=se,G.getConfirmLocale=ue;var W=K(L(18253));let E=Object.assign({},W.default.Modal),he=[];const ee=()=>he.reduce((be,oe)=>Object.assign(Object.assign({},be),oe),W.default.Modal);function se(be){if(be){const oe=Object.assign({},be);return he.push(oe),E=ee(),()=>{he=he.filter(Ge=>Ge!==oe),E=ee()}}E=Object.assign({},W.default.Modal)}function ue(){return E}},46549:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.useCompactItemContext=G.default=G.SpaceCompactItemContext=G.NoCompactStyle=void 0;var E=W(L(67294)),he=K(L(93967)),ee=K(L(45598)),se=L(31929),ue=K(L(65693)),be=K(L(54277)),oe=function(J,Ee){var tt={};for(var Je in J)Object.prototype.hasOwnProperty.call(J,Je)&&Ee.indexOf(Je)<0&&(tt[Je]=J[Je]);if(J!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,Je=Object.getOwnPropertySymbols(J);wt<Je.length;wt++)Ee.indexOf(Je[wt])<0&&Object.prototype.propertyIsEnumerable.call(J,Je[wt])&&(tt[Je[wt]]=J[Je[wt]]);return tt};const Ge=G.SpaceCompactItemContext=E.createContext(null),te=(J,Ee)=>{const tt=E.useContext(Ge),Je=E.useMemo(()=>{if(!tt)return"";const{compactDirection:wt,isFirstItem:pt,isLastItem:yt}=tt,Re=wt==="vertical"?"-vertical-":"-";return(0,he.default)(`${J}-compact${Re}item`,{[`${J}-compact${Re}first-item`]:pt,[`${J}-compact${Re}last-item`]:yt,[`${J}-compact${Re}item-rtl`]:Ee==="rtl"})},[J,Ee,tt]);return{compactSize:tt==null?void 0:tt.compactSize,compactDirection:tt==null?void 0:tt.compactDirection,compactItemClassnames:Je}};G.useCompactItemContext=te;const me=J=>{let{children:Ee}=J;return E.createElement(Ge.Provider,{value:null},Ee)};G.NoCompactStyle=me;const Pe=J=>{var{children:Ee}=J,tt=oe(J,["children"]);return E.createElement(Ge.Provider,{value:tt},Ee)},$=J=>{const{getPrefixCls:Ee,direction:tt}=E.useContext(se.ConfigContext),{size:Je,direction:wt,block:pt,prefixCls:yt,className:Re,rootClassName:Ce,children:Ue}=J,We=oe(J,["size","direction","block","prefixCls","className","rootClassName","children"]),lt=(0,ue.default)(Lt=>Je!=null?Je:Lt),tn=Ee("space-compact",yt),[Le,_t]=(0,be.default)(tn),Me=(0,he.default)(tn,_t,{[`${tn}-rtl`]:tt==="rtl",[`${tn}-block`]:pt,[`${tn}-vertical`]:wt==="vertical"},Re,Ce),nt=E.useContext(Ge),qe=(0,ee.default)(Ue),Ye=E.useMemo(()=>qe.map((Lt,xt)=>{const Ie=Lt&&Lt.key||`${tn}-item-${xt}`;return E.createElement(Pe,{key:Ie,compactSize:lt,compactDirection:wt,isFirstItem:xt===0&&(!nt||(nt==null?void 0:nt.isFirstItem)),isLastItem:xt===qe.length-1&&(!nt||(nt==null?void 0:nt.isLastItem))},Lt)}),[Je,qe,nt]);return qe.length===0?null:Le(E.createElement("div",Object.assign({className:Me},We),Ye))};var le=G.default=$},35969:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const L=W=>{const{componentCls:E}=W;return{[E]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};var K=G.default=L},54277:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.prepareComponentToken=G.default=void 0;var W=L(3184),E=K(L(35969));const he=be=>{const{componentCls:oe,antCls:Ge}=be;return{[oe]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${oe}-item:empty`]:{display:"none"},[`${oe}-item > ${Ge}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},ee=be=>{const{componentCls:oe}=be;return{[oe]:{"&-gap-row-small":{rowGap:be.spaceGapSmallSize},"&-gap-row-middle":{rowGap:be.spaceGapMiddleSize},"&-gap-row-large":{rowGap:be.spaceGapLargeSize},"&-gap-col-small":{columnGap:be.spaceGapSmallSize},"&-gap-col-middle":{columnGap:be.spaceGapMiddleSize},"&-gap-col-large":{columnGap:be.spaceGapLargeSize}}}},se=()=>({});G.prepareComponentToken=se;var ue=G.default=(0,W.genStyleHooks)("Space",be=>{const oe=(0,W.mergeToken)(be,{spaceGapSmallSize:be.paddingXS,spaceGapMiddleSize:be.padding,spaceGapLargeSize:be.paddingLG});return[he(oe),ee(oe),(0,E.default)(oe)]},()=>({}),{resetStyle:!1})},78793:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genCompactItemStyle=W;function L(E,he,ee){const{focusElCls:se,focus:ue,borderElCls:be}=ee,oe=be?"> *":"",Ge=["hover",ue?"focus":null,"active"].filter(Boolean).map(te=>`&:${te} ${oe}`).join(",");return{[`&-item:not(${he}-last-item)`]:{marginInlineEnd:E.calc(E.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[Ge]:{zIndex:2}},se?{[`&${se}`]:{zIndex:2}}:{}),{[`&[disabled] ${oe}`]:{zIndex:0}})}}function K(E,he,ee){const{borderElCls:se}=ee,ue=se?`> ${se}`:"";return{[`&-item:not(${he}-first-item):not(${he}-last-item) ${ue}`]:{borderRadius:0},[`&-item:not(${he}-last-item)${he}-first-item`]:{[`& ${ue}, &${E}-sm ${ue}, &${E}-lg ${ue}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${he}-first-item)${he}-last-item`]:{[`& ${ue}, &${E}-sm ${ue}, &${E}-lg ${ue}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function W(E){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:ee}=E,se=`${ee}-compact`;return{[se]:Object.assign(Object.assign({},L(E,se,he)),K(ee,se,he))}}},98078:function(bt,G,L){"use strict";"use client";Object.defineProperty(G,"__esModule",{value:!0}),G.genLinkStyle=G.genFocusStyle=G.genFocusOutline=G.genCommonStyle=G.clearFix=void 0,Object.defineProperty(G,"operationUnit",{enumerable:!0,get:function(){return W.operationUnit}}),G.textEllipsis=G.resetIcon=G.resetComponent=void 0;var K=L(6731),W=L(22548);const E=G.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},he=function(te){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:te.colorText,fontSize:te.fontSize,lineHeight:te.lineHeight,listStyle:"none",fontFamily:me?"inherit":te.fontFamily}};G.resetComponent=he;const ee=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});G.resetIcon=ee;const se=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});G.clearFix=se;const ue=te=>({a:{color:te.colorLink,textDecoration:te.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${te.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:te.colorLinkHover},"&:active":{color:te.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:te.linkHoverDecoration,outline:0},"&:focus":{textDecoration:te.linkFocusDecoration,outline:0},"&[disabled]":{color:te.colorTextDisabled,cursor:"not-allowed"}}});G.genLinkStyle=ue;const be=(te,me,Pe,$)=>{const le=`[class^="${me}"], [class*=" ${me}"]`,J=Pe?`.${Pe}`:le,Ee={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let tt={};return $!==!1&&(tt={fontFamily:te.fontFamily,fontSize:te.fontSize}),{[J]:Object.assign(Object.assign(Object.assign({},tt),Ee),{[le]:Ee})}};G.genCommonStyle=be;const oe=te=>({outline:`${(0,K.unit)(te.lineWidthFocus)} solid ${te.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});G.genFocusOutline=oe;const Ge=te=>({"&:focus-visible":Object.assign({},oe(te))});G.genFocusStyle=Ge},57253:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const L=W=>({[W.componentCls]:{[`${W.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${W.motionDurationMid} ${W.motionEaseInOut},
        opacity ${W.motionDurationMid} ${W.motionEaseInOut} !important`}},[`${W.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${W.motionDurationMid} ${W.motionEaseInOut},
        opacity ${W.motionDurationMid} ${W.motionEaseInOut} !important`}}});var K=G.default=L},84460:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.initFadeMotion=G.fadeOut=G.fadeIn=void 0;var K=L(6731),W=L(94631);const E=G.fadeIn=new K.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),he=G.fadeOut=new K.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),ee=function(se){let ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:be}=se,oe=`${be}-fade`,Ge=ue?"&":"";return[(0,W.initMotion)(oe,E,he,se.motionDurationMid,ue),{[`
        ${Ge}${oe}-enter,
        ${Ge}${oe}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${Ge}${oe}-leave`]:{animationTimingFunction:"linear"}}]};G.initFadeMotion=ee},42836:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"fadeIn",{enumerable:!0,get:function(){return E.fadeIn}}),Object.defineProperty(G,"fadeOut",{enumerable:!0,get:function(){return E.fadeOut}}),Object.defineProperty(G,"genCollapseMotion",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(G,"initFadeMotion",{enumerable:!0,get:function(){return E.initFadeMotion}}),Object.defineProperty(G,"initMoveMotion",{enumerable:!0,get:function(){return he.initMoveMotion}}),Object.defineProperty(G,"initSlideMotion",{enumerable:!0,get:function(){return ee.initSlideMotion}}),Object.defineProperty(G,"initZoomMotion",{enumerable:!0,get:function(){return se.initZoomMotion}}),Object.defineProperty(G,"moveDownIn",{enumerable:!0,get:function(){return he.moveDownIn}}),Object.defineProperty(G,"moveDownOut",{enumerable:!0,get:function(){return he.moveDownOut}}),Object.defineProperty(G,"moveLeftIn",{enumerable:!0,get:function(){return he.moveLeftIn}}),Object.defineProperty(G,"moveLeftOut",{enumerable:!0,get:function(){return he.moveLeftOut}}),Object.defineProperty(G,"moveRightIn",{enumerable:!0,get:function(){return he.moveRightIn}}),Object.defineProperty(G,"moveRightOut",{enumerable:!0,get:function(){return he.moveRightOut}}),Object.defineProperty(G,"moveUpIn",{enumerable:!0,get:function(){return he.moveUpIn}}),Object.defineProperty(G,"moveUpOut",{enumerable:!0,get:function(){return he.moveUpOut}}),Object.defineProperty(G,"slideDownIn",{enumerable:!0,get:function(){return ee.slideDownIn}}),Object.defineProperty(G,"slideDownOut",{enumerable:!0,get:function(){return ee.slideDownOut}}),Object.defineProperty(G,"slideLeftIn",{enumerable:!0,get:function(){return ee.slideLeftIn}}),Object.defineProperty(G,"slideLeftOut",{enumerable:!0,get:function(){return ee.slideLeftOut}}),Object.defineProperty(G,"slideRightIn",{enumerable:!0,get:function(){return ee.slideRightIn}}),Object.defineProperty(G,"slideRightOut",{enumerable:!0,get:function(){return ee.slideRightOut}}),Object.defineProperty(G,"slideUpIn",{enumerable:!0,get:function(){return ee.slideUpIn}}),Object.defineProperty(G,"slideUpOut",{enumerable:!0,get:function(){return ee.slideUpOut}}),Object.defineProperty(G,"zoomBigIn",{enumerable:!0,get:function(){return se.zoomBigIn}}),Object.defineProperty(G,"zoomBigOut",{enumerable:!0,get:function(){return se.zoomBigOut}}),Object.defineProperty(G,"zoomDownIn",{enumerable:!0,get:function(){return se.zoomDownIn}}),Object.defineProperty(G,"zoomDownOut",{enumerable:!0,get:function(){return se.zoomDownOut}}),Object.defineProperty(G,"zoomIn",{enumerable:!0,get:function(){return se.zoomIn}}),Object.defineProperty(G,"zoomLeftIn",{enumerable:!0,get:function(){return se.zoomLeftIn}}),Object.defineProperty(G,"zoomLeftOut",{enumerable:!0,get:function(){return se.zoomLeftOut}}),Object.defineProperty(G,"zoomOut",{enumerable:!0,get:function(){return se.zoomOut}}),Object.defineProperty(G,"zoomRightIn",{enumerable:!0,get:function(){return se.zoomRightIn}}),Object.defineProperty(G,"zoomRightOut",{enumerable:!0,get:function(){return se.zoomRightOut}}),Object.defineProperty(G,"zoomUpIn",{enumerable:!0,get:function(){return se.zoomUpIn}}),Object.defineProperty(G,"zoomUpOut",{enumerable:!0,get:function(){return se.zoomUpOut}});var W=K(L(57253)),E=L(84460),he=L(17060),ee=L(17581),se=L(99269)},94631:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.initMotion=void 0;const L=E=>({animationDuration:E,animationFillMode:"both"}),K=E=>({animationDuration:E,animationFillMode:"both"}),W=function(E,he,ee,se){const be=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${be}${E}-enter,
      ${be}${E}-appear
    `]:Object.assign(Object.assign({},L(se)),{animationPlayState:"paused"}),[`${be}${E}-leave`]:Object.assign(Object.assign({},K(se)),{animationPlayState:"paused"}),[`
      ${be}${E}-enter${E}-enter-active,
      ${be}${E}-appear${E}-appear-active
    `]:{animationName:he,animationPlayState:"running"},[`${be}${E}-leave${E}-leave-active`]:{animationName:ee,animationPlayState:"running",pointerEvents:"none"}}};G.initMotion=W},17060:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.moveUpOut=G.moveUpIn=G.moveRightOut=G.moveRightIn=G.moveLeftOut=G.moveLeftIn=G.moveDownOut=G.moveDownIn=G.initMoveMotion=void 0;var K=L(6731),W=L(94631);const E=G.moveDownIn=new K.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),he=G.moveDownOut=new K.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),ee=G.moveLeftIn=new K.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),se=G.moveLeftOut=new K.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),ue=G.moveRightIn=new K.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),be=G.moveRightOut=new K.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),oe=G.moveUpIn=new K.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Ge=G.moveUpOut=new K.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),te={"move-up":{inKeyframes:oe,outKeyframes:Ge},"move-down":{inKeyframes:E,outKeyframes:he},"move-left":{inKeyframes:ee,outKeyframes:se},"move-right":{inKeyframes:ue,outKeyframes:be}},me=(Pe,$)=>{const{antCls:le}=Pe,J=`${le}-${$}`,{inKeyframes:Ee,outKeyframes:tt}=te[$];return[(0,W.initMotion)(J,Ee,tt,Pe.motionDurationMid),{[`
        ${J}-enter,
        ${J}-appear
      `]:{opacity:0,animationTimingFunction:Pe.motionEaseOutCirc},[`${J}-leave`]:{animationTimingFunction:Pe.motionEaseInOutCirc}}]};G.initMoveMotion=me},17581:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.slideUpOut=G.slideUpIn=G.slideRightOut=G.slideRightIn=G.slideLeftOut=G.slideLeftIn=G.slideDownOut=G.slideDownIn=G.initSlideMotion=void 0;var K=L(6731),W=L(94631);const E=G.slideUpIn=new K.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),he=G.slideUpOut=new K.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),ee=G.slideDownIn=new K.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),se=G.slideDownOut=new K.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),ue=G.slideLeftIn=new K.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),be=G.slideLeftOut=new K.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),oe=G.slideRightIn=new K.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),Ge=G.slideRightOut=new K.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),te={"slide-up":{inKeyframes:E,outKeyframes:he},"slide-down":{inKeyframes:ee,outKeyframes:se},"slide-left":{inKeyframes:ue,outKeyframes:be},"slide-right":{inKeyframes:oe,outKeyframes:Ge}},me=(Pe,$)=>{const{antCls:le}=Pe,J=`${le}-${$}`,{inKeyframes:Ee,outKeyframes:tt}=te[$];return[(0,W.initMotion)(J,Ee,tt,Pe.motionDurationMid),{[`
      ${J}-enter,
      ${J}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:Pe.motionEaseOutQuint,["&-prepare"]:{transform:"scale(1)"}},[`${J}-leave`]:{animationTimingFunction:Pe.motionEaseInQuint}}]};G.initSlideMotion=me},99269:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.zoomUpOut=G.zoomUpIn=G.zoomRightOut=G.zoomRightIn=G.zoomOut=G.zoomLeftOut=G.zoomLeftIn=G.zoomIn=G.zoomDownOut=G.zoomDownIn=G.zoomBigOut=G.zoomBigIn=G.initZoomMotion=void 0;var K=L(6731),W=L(94631);const E=G.zoomIn=new K.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),he=G.zoomOut=new K.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),ee=G.zoomBigIn=new K.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),se=G.zoomBigOut=new K.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),ue=G.zoomUpIn=new K.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),be=G.zoomUpOut=new K.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),oe=G.zoomLeftIn=new K.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),Ge=G.zoomLeftOut=new K.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),te=G.zoomRightIn=new K.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),me=G.zoomRightOut=new K.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),Pe=G.zoomDownIn=new K.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),$=G.zoomDownOut=new K.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),le={zoom:{inKeyframes:E,outKeyframes:he},"zoom-big":{inKeyframes:ee,outKeyframes:se},"zoom-big-fast":{inKeyframes:ee,outKeyframes:se},"zoom-left":{inKeyframes:oe,outKeyframes:Ge},"zoom-right":{inKeyframes:te,outKeyframes:me},"zoom-up":{inKeyframes:ue,outKeyframes:be},"zoom-down":{inKeyframes:Pe,outKeyframes:$}},J=(Ee,tt)=>{const{antCls:Je}=Ee,wt=`${Je}-${tt}`,{inKeyframes:pt,outKeyframes:yt}=le[tt];return[(0,W.initMotion)(wt,pt,yt,tt==="zoom-big-fast"?Ee.motionDurationFast:Ee.motionDurationMid),{[`
        ${wt}-enter,
        ${wt}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:Ee.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${wt}-leave`]:{animationTimingFunction:Ee.motionEaseInOutCirc}}]};G.initZoomMotion=J},22548:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.operationUnit=void 0;const L=K=>({color:K.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${K.motionDurationSlow}`,"&:focus, &:hover":{color:K.colorLinkHover},"&:active":{color:K.colorLinkActive}});G.operationUnit=L},9064:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.MAX_VERTICAL_CONTENT_RADIUS=void 0,G.default=ee,G.getArrowOffsetToken=E;var K=L(51337);const W=G.MAX_VERTICAL_CONTENT_RADIUS=8;function E(se){const{contentRadius:ue,limitVerticalRadius:be}=se,oe=ue>12?ue+2:12;return{arrowOffsetHorizontal:oe,arrowOffsetVertical:be?W:oe}}function he(se,ue){return se?ue:{}}function ee(se,ue,be){const{componentCls:oe,boxShadowPopoverArrow:Ge,arrowOffsetVertical:te,arrowOffsetHorizontal:me}=se,{arrowDistance:Pe=0,arrowPlacement:$={left:!0,right:!0,top:!0,bottom:!0}}=be||{};return{[oe]:Object.assign(Object.assign(Object.assign(Object.assign({[`${oe}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,K.genRoundedArrow)(se,ue,Ge)),{"&:before":{background:ue}})]},he(!!$.top,{[[`&-placement-top > ${oe}-arrow`,`&-placement-topLeft > ${oe}-arrow`,`&-placement-topRight > ${oe}-arrow`].join(",")]:{bottom:Pe,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${oe}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${oe}-arrow`]:{left:{_skip_check_:!0,value:me}},[`&-placement-topRight > ${oe}-arrow`]:{right:{_skip_check_:!0,value:me}}})),he(!!$.bottom,{[[`&-placement-bottom > ${oe}-arrow`,`&-placement-bottomLeft > ${oe}-arrow`,`&-placement-bottomRight > ${oe}-arrow`].join(",")]:{top:Pe,transform:"translateY(-100%)"},[`&-placement-bottom > ${oe}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${oe}-arrow`]:{left:{_skip_check_:!0,value:me}},[`&-placement-bottomRight > ${oe}-arrow`]:{right:{_skip_check_:!0,value:me}}})),he(!!$.left,{[[`&-placement-left > ${oe}-arrow`,`&-placement-leftTop > ${oe}-arrow`,`&-placement-leftBottom > ${oe}-arrow`].join(",")]:{right:{_skip_check_:!0,value:Pe},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${oe}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${oe}-arrow`]:{top:te},[`&-placement-leftBottom > ${oe}-arrow`]:{bottom:te}})),he(!!$.right,{[[`&-placement-right > ${oe}-arrow`,`&-placement-rightTop > ${oe}-arrow`,`&-placement-rightBottom > ${oe}-arrow`].join(",")]:{left:{_skip_check_:!0,value:Pe},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${oe}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${oe}-arrow`]:{top:te},[`&-placement-rightBottom > ${oe}-arrow`]:{bottom:te}}))}}},51337:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.genRoundedArrow=void 0,G.getArrowToken=W;var K=L(6731);function W(he){const{sizePopupArrow:ee,borderRadiusXS:se,borderRadiusOuter:ue}=he,be=ee/2,oe=0,Ge=be,te=ue*1/Math.sqrt(2),me=be-ue*(1-1/Math.sqrt(2)),Pe=be-se*(1/Math.sqrt(2)),$=ue*(Math.sqrt(2)-1)+se*(1/Math.sqrt(2)),le=2*be-Pe,J=$,Ee=2*be-te,tt=me,Je=2*be-oe,wt=Ge,pt=be*Math.sqrt(2)+ue*(Math.sqrt(2)-2),yt=ue*(Math.sqrt(2)-1),Re=`polygon(${yt}px 100%, 50% ${yt}px, ${2*be-yt}px 100%, ${yt}px 100%)`,Ce=`path('M ${oe} ${Ge} A ${ue} ${ue} 0 0 0 ${te} ${me} L ${Pe} ${$} A ${se} ${se} 0 0 1 ${le} ${J} L ${Ee} ${tt} A ${ue} ${ue} 0 0 0 ${Je} ${wt} Z')`;return{arrowShadowWidth:pt,arrowPath:Ce,arrowPolygon:Re}}const E=(he,ee,se)=>{const{sizePopupArrow:ue,arrowPolygon:be,arrowPath:oe,arrowShadowWidth:Ge,borderRadiusXS:te,calc:me}=he;return{pointerEvents:"none",width:ue,height:ue,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:ue,height:me(ue).div(2).equal(),background:ee,clipPath:{_multi_value_:!0,value:[be,oe]},content:'""'},"&::after":{content:'""',position:"absolute",width:Ge,height:Ge,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,K.unit)(te)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:se,zIndex:0,background:"transparent"}}};G.genRoundedArrow=E},89329:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.defaultTheme=G.defaultConfig=G.DesignTokenContext=void 0;var W=K(L(67294)),E=L(6731),he=K(L(9924)),ee=K(L(98411));const se=G.defaultTheme=(0,E.createTheme)(he.default),ue=G.defaultConfig={token:ee.default,override:{override:ee.default},hashed:!0},be=G.DesignTokenContext=W.default.createContext(ue)},36496:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"PresetColors",{enumerable:!0,get:function(){return K.PresetColors}});var K=L(81342)},81342:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.PresetColors=void 0;const L=G.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},3184:function(bt,G,L){"use strict";var K=L(75263).default,W=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"DesignTokenContext",{enumerable:!0,get:function(){return me.DesignTokenContext}}),Object.defineProperty(G,"PresetColors",{enumerable:!0,get:function(){return he.PresetColors}}),Object.defineProperty(G,"calc",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(G,"defaultConfig",{enumerable:!0,get:function(){return me.defaultConfig}}),Object.defineProperty(G,"genComponentStyleHook",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(G,"genPresetColor",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(G,"genStyleHooks",{enumerable:!0,get:function(){return be.genStyleHooks}}),Object.defineProperty(G,"genSubStyleComponent",{enumerable:!0,get:function(){return be.genSubStyleComponent}}),Object.defineProperty(G,"getLineHeight",{enumerable:!0,get:function(){return ee.getLineHeight}}),Object.defineProperty(G,"mergeToken",{enumerable:!0,get:function(){return Ge.merge}}),Object.defineProperty(G,"statisticToken",{enumerable:!0,get:function(){return Ge.default}}),Object.defineProperty(G,"useResetIconStyle",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(G,"useStyleRegister",{enumerable:!0,get:function(){return E.useStyleRegister}}),Object.defineProperty(G,"useToken",{enumerable:!0,get:function(){return se.default}});var E=L(6731),he=L(36496),ee=L(62231),se=W(L(41401)),ue=W(L(22996)),be=K(L(3737)),oe=W(L(36219)),Ge=K(L(99636)),te=W(L(54894)),me=L(89329)},26162:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getSolidColor=G.getAlphaColor=void 0;var K=L(131);const W=(he,ee)=>new K.TinyColor(he).setAlpha(ee).toRgbString();G.getAlphaColor=W;const E=(he,ee)=>new K.TinyColor(he).darken(ee).toHexString();G.getSolidColor=E},80373:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.generateNeutralColorPalettes=G.generateColorPalettes=void 0;var K=L(78589),W=L(26162);const E=ee=>{const se=(0,K.generate)(ee);return{1:se[0],2:se[1],3:se[2],4:se[3],5:se[4],6:se[5],7:se[6],8:se[4],9:se[5],10:se[6]}};G.generateColorPalettes=E;const he=(ee,se)=>{const ue=ee||"#fff",be=se||"#000";return{colorBgBase:ue,colorTextBase:be,colorText:(0,W.getAlphaColor)(be,.88),colorTextSecondary:(0,W.getAlphaColor)(be,.65),colorTextTertiary:(0,W.getAlphaColor)(be,.45),colorTextQuaternary:(0,W.getAlphaColor)(be,.25),colorFill:(0,W.getAlphaColor)(be,.15),colorFillSecondary:(0,W.getAlphaColor)(be,.06),colorFillTertiary:(0,W.getAlphaColor)(be,.04),colorFillQuaternary:(0,W.getAlphaColor)(be,.02),colorBgLayout:(0,W.getSolidColor)(ue,4),colorBgContainer:(0,W.getSolidColor)(ue,0),colorBgElevated:(0,W.getSolidColor)(ue,0),colorBgSpotlight:(0,W.getAlphaColor)(be,.85),colorBgBlur:"transparent",colorBorder:(0,W.getSolidColor)(ue,15),colorBorderSecondary:(0,W.getSolidColor)(ue,6)}};G.generateNeutralColorPalettes=he},9924:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=Ge;var W=L(78589),E=L(98411),he=K(L(10805)),ee=K(L(81594)),se=K(L(54730)),ue=K(L(69853)),be=K(L(19216)),oe=L(80373);function Ge(te){const me=Object.keys(E.defaultPresetColors).map(Pe=>{const $=(0,W.generate)(te[Pe]);return new Array(10).fill(1).reduce((le,J,Ee)=>(le[`${Pe}-${Ee+1}`]=$[Ee],le[`${Pe}${Ee+1}`]=$[Ee],le),{})}).reduce((Pe,$)=>(Pe=Object.assign(Object.assign({},Pe),$),Pe),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},te),me),(0,he.default)(te,{generateColorPalettes:oe.generateColorPalettes,generateNeutralColorPalettes:oe.generateNeutralColorPalettes})),(0,ue.default)(te.fontSize)),(0,be.default)(te)),(0,se.default)(te)),(0,ee.default)(te))}},98411:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.defaultPresetColors=G.default=void 0;const L=G.defaultPresetColors={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},K=Object.assign(Object.assign({},L),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var W=G.default=K},10805:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=W;var K=L(131);function W(E,he){let{generateColorPalettes:ee,generateNeutralColorPalettes:se}=he;const{colorSuccess:ue,colorWarning:be,colorError:oe,colorInfo:Ge,colorPrimary:te,colorBgBase:me,colorTextBase:Pe}=E,$=ee(te),le=ee(ue),J=ee(be),Ee=ee(oe),tt=ee(Ge),Je=se(me,Pe),wt=E.colorLink||E.colorInfo,pt=ee(wt);return Object.assign(Object.assign({},Je),{colorPrimaryBg:$[1],colorPrimaryBgHover:$[2],colorPrimaryBorder:$[3],colorPrimaryBorderHover:$[4],colorPrimaryHover:$[5],colorPrimary:$[6],colorPrimaryActive:$[7],colorPrimaryTextHover:$[8],colorPrimaryText:$[9],colorPrimaryTextActive:$[10],colorSuccessBg:le[1],colorSuccessBgHover:le[2],colorSuccessBorder:le[3],colorSuccessBorderHover:le[4],colorSuccessHover:le[4],colorSuccess:le[6],colorSuccessActive:le[7],colorSuccessTextHover:le[8],colorSuccessText:le[9],colorSuccessTextActive:le[10],colorErrorBg:Ee[1],colorErrorBgHover:Ee[2],colorErrorBorder:Ee[3],colorErrorBorderHover:Ee[4],colorErrorHover:Ee[5],colorError:Ee[6],colorErrorActive:Ee[7],colorErrorTextHover:Ee[8],colorErrorText:Ee[9],colorErrorTextActive:Ee[10],colorWarningBg:J[1],colorWarningBgHover:J[2],colorWarningBorder:J[3],colorWarningBorderHover:J[4],colorWarningHover:J[4],colorWarning:J[6],colorWarningActive:J[7],colorWarningTextHover:J[8],colorWarningText:J[9],colorWarningTextActive:J[10],colorInfoBg:tt[1],colorInfoBgHover:tt[2],colorInfoBorder:tt[3],colorInfoBorderHover:tt[4],colorInfoHover:tt[4],colorInfo:tt[6],colorInfoActive:tt[7],colorInfoTextHover:tt[8],colorInfoText:tt[9],colorInfoTextActive:tt[10],colorLinkHover:pt[4],colorLink:pt[6],colorLinkActive:pt[7],colorBgMask:new K.TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}},81594:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=E;var W=K(L(78117));function E(he){const{motionUnit:ee,motionBase:se,borderRadius:ue,lineWidth:be}=he;return Object.assign({motionDurationFast:`${(se+ee).toFixed(1)}s`,motionDurationMid:`${(se+ee*2).toFixed(1)}s`,motionDurationSlow:`${(se+ee*3).toFixed(1)}s`,lineWidthBold:be+1},(0,W.default)(ue))}},54730:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const L=W=>{const{controlHeight:E}=W;return{controlHeightSM:E*.75,controlHeightXS:E*.5,controlHeightLG:E*1.25}};var K=G.default=L},69853:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(62231));const E=ee=>{const se=(0,W.default)(ee),ue=se.map(le=>le.size),be=se.map(le=>le.lineHeight),oe=ue[1],Ge=ue[0],te=ue[2],me=be[1],Pe=be[0],$=be[2];return{fontSizeSM:Ge,fontSize:oe,fontSizeLG:te,fontSizeXL:ue[3],fontSizeHeading1:ue[6],fontSizeHeading2:ue[5],fontSizeHeading3:ue[4],fontSizeHeading4:ue[3],fontSizeHeading5:ue[2],lineHeight:me,lineHeightLG:$,lineHeightSM:Pe,fontHeight:Math.round(me*oe),fontHeightLG:Math.round($*te),fontHeightSM:Math.round(Pe*Ge),lineHeightHeading1:be[6],lineHeightHeading2:be[5],lineHeightHeading3:be[4],lineHeightHeading4:be[3],lineHeightHeading5:be[2]}};var he=G.default=E},62231:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=K,G.getLineHeight=L;function L(W){return(W+8)/W}function K(W){const E=new Array(10).fill(null).map((he,ee)=>{const se=ee-1,ue=W*Math.pow(2.71828,se/5),be=ee>1?Math.floor(ue):Math.ceil(ue);return Math.floor(be/2)*2});return E[1]=W,E.map(he=>({size:he,lineHeight:L(he)}))}},78117:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const L=W=>{let E=W,he=W,ee=W,se=W;return W<6&&W>=5?E=W+1:W<16&&W>=6?E=W+2:W>=16&&(E=16),W<7&&W>=5?he=4:W<8&&W>=7?he=5:W<14&&W>=8?he=6:W<16&&W>=14?he=7:W>=16&&(he=8),W<6&&W>=2?ee=1:W>=6&&(ee=2),W>4&&W<8?se=4:W>=8&&(se=6),{borderRadius:W,borderRadiusXS:ee,borderRadiusSM:he,borderRadiusLG:E,borderRadiusOuter:se}};var K=G.default=L},19216:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=L;function L(K){const{sizeUnit:W,sizeStep:E}=K;return{sizeXXL:W*(E+8),sizeXL:W*(E+4),sizeLG:W*(E+2),sizeMD:W*(E+1),sizeMS:W*E,size:W*E,sizeSM:W*(E-1),sizeXS:W*(E-2),sizeXXS:W*(E-3)}}},41401:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=Pe,G.unitless=G.ignore=G.getComputedToken=void 0;var W=K(L(67294)),E=L(6731),he=K(L(87629)),ee=L(89329),se=K(L(98411)),ue=K(L(27722)),be=function($,le){var J={};for(var Ee in $)Object.prototype.hasOwnProperty.call($,Ee)&&le.indexOf(Ee)<0&&(J[Ee]=$[Ee]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,Ee=Object.getOwnPropertySymbols($);tt<Ee.length;tt++)le.indexOf(Ee[tt])<0&&Object.prototype.propertyIsEnumerable.call($,Ee[tt])&&(J[Ee[tt]]=$[Ee[tt]]);return J};const oe=G.unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},Ge=G.ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},te={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},me=($,le,J)=>{const Ee=J.getDerivativeToken($),{override:tt}=le,Je=be(le,["override"]);let wt=Object.assign(Object.assign({},Ee),{override:tt});return wt=(0,ue.default)(wt),Je&&Object.entries(Je).forEach(pt=>{let[yt,Re]=pt;const{theme:Ce}=Re,Ue=be(Re,["theme"]);let We=Ue;Ce&&(We=me(Object.assign(Object.assign({},wt),Ue),{override:Ue},Ce)),wt[yt]=We}),wt};G.getComputedToken=me;function Pe(){const{token:$,hashed:le,theme:J,override:Ee,cssVar:tt}=W.default.useContext(ee.DesignTokenContext),Je=`${he.default}-${le||""}`,wt=J||ee.defaultTheme,[pt,yt,Re]=(0,E.useCacheToken)(wt,[se.default,$],{salt:Je,override:Ee,getComputedToken:me,formatToken:ue.default,cssVar:tt&&{prefix:tt.prefix,key:tt.key,unitless:oe,ignore:Ge,preserve:te}});return[wt,Re,le?yt:"",pt,tt]}},27722:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=se;var W=L(131),E=K(L(98411)),he=K(L(83609)),ee=function(ue,be){var oe={};for(var Ge in ue)Object.prototype.hasOwnProperty.call(ue,Ge)&&be.indexOf(Ge)<0&&(oe[Ge]=ue[Ge]);if(ue!=null&&typeof Object.getOwnPropertySymbols=="function")for(var te=0,Ge=Object.getOwnPropertySymbols(ue);te<Ge.length;te++)be.indexOf(Ge[te])<0&&Object.prototype.propertyIsEnumerable.call(ue,Ge[te])&&(oe[Ge[te]]=ue[Ge[te]]);return oe};function se(ue){const{override:be}=ue,oe=ee(ue,["override"]),Ge=Object.assign({},be);Object.keys(E.default).forEach(Je=>{delete Ge[Je]});const te=Object.assign(Object.assign({},oe),Ge),me=480,Pe=576,$=768,le=992,J=1200,Ee=1600;if(te.motion===!1){const Je="0s";te.motionDurationFast=Je,te.motionDurationMid=Je,te.motionDurationSlow=Je}return Object.assign(Object.assign(Object.assign({},te),{colorFillContent:te.colorFillSecondary,colorFillContentHover:te.colorFill,colorFillAlter:te.colorFillQuaternary,colorBgContainerDisabled:te.colorFillTertiary,colorBorderBg:te.colorBgContainer,colorSplit:(0,he.default)(te.colorBorderSecondary,te.colorBgContainer),colorTextPlaceholder:te.colorTextQuaternary,colorTextDisabled:te.colorTextQuaternary,colorTextHeading:te.colorText,colorTextLabel:te.colorTextSecondary,colorTextDescription:te.colorTextTertiary,colorTextLightSolid:te.colorWhite,colorHighlight:te.colorError,colorBgTextHover:te.colorFillSecondary,colorBgTextActive:te.colorFill,colorIcon:te.colorTextTertiary,colorIconHover:te.colorText,colorErrorOutline:(0,he.default)(te.colorErrorBg,te.colorBgContainer),colorWarningOutline:(0,he.default)(te.colorWarningBg,te.colorBgContainer),fontSizeIcon:te.fontSizeSM,lineWidthFocus:te.lineWidth*4,lineWidth:te.lineWidth,controlOutlineWidth:te.lineWidth*2,controlInteractiveSize:te.controlHeight/2,controlItemBgHover:te.colorFillTertiary,controlItemBgActive:te.colorPrimaryBg,controlItemBgActiveHover:te.colorPrimaryBgHover,controlItemBgActiveDisabled:te.colorFill,controlTmpOutline:te.colorFillQuaternary,controlOutline:(0,he.default)(te.colorPrimaryBg,te.colorBgContainer),lineType:te.lineType,borderRadius:te.borderRadius,borderRadiusXS:te.borderRadiusXS,borderRadiusSM:te.borderRadiusSM,borderRadiusLG:te.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:te.sizeXXS,paddingXS:te.sizeXS,paddingSM:te.sizeSM,padding:te.size,paddingMD:te.sizeMD,paddingLG:te.sizeLG,paddingXL:te.sizeXL,paddingContentHorizontalLG:te.sizeLG,paddingContentVerticalLG:te.sizeMS,paddingContentHorizontal:te.sizeMS,paddingContentVertical:te.sizeSM,paddingContentHorizontalSM:te.size,paddingContentVerticalSM:te.sizeXS,marginXXS:te.sizeXXS,marginXS:te.sizeXS,marginSM:te.sizeSM,margin:te.size,marginMD:te.sizeMD,marginLG:te.sizeLG,marginXL:te.sizeXL,marginXXL:te.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:me,screenXSMin:me,screenXSMax:Pe-1,screenSM:Pe,screenSMMin:Pe,screenSMMax:$-1,screenMD:$,screenMDMin:$,screenMDMax:le-1,screenLG:le,screenLGMin:le,screenLGMax:J-1,screenXL:J,screenXLMin:J,screenXLMax:Ee-1,screenXXL:Ee,screenXXLMin:Ee,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new W.TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new W.TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new W.TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),Ge)}},24312:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(56690)),E=K(L(89728)),he=K(L(76976)),ee=K(L(61655)),se=K(L(38194));const ue="CALC_UNIT",be=new RegExp(ue,"g");function oe(te){return typeof te=="number"?`${te}${ue}`:te}let Ge=G.default=function(te){function me(Pe){var $;return(0,W.default)(this,me),$=(0,he.default)(this,me),$.result="",Pe instanceof me?$.result=`(${Pe.result})`:typeof Pe=="number"?$.result=oe(Pe):typeof Pe=="string"&&($.result=Pe),$}return(0,ee.default)(me,te),(0,E.default)(me,[{key:"add",value:function($){return $ instanceof me?this.result=`${this.result} + ${$.getResult()}`:(typeof $=="number"||typeof $=="string")&&(this.result=`${this.result} + ${oe($)}`),this.lowPriority=!0,this}},{key:"sub",value:function($){return $ instanceof me?this.result=`${this.result} - ${$.getResult()}`:(typeof $=="number"||typeof $=="string")&&(this.result=`${this.result} - ${oe($)}`),this.lowPriority=!0,this}},{key:"mul",value:function($){return this.lowPriority&&(this.result=`(${this.result})`),$ instanceof me?this.result=`${this.result} * ${$.getResult(!0)}`:(typeof $=="number"||typeof $=="string")&&(this.result=`${this.result} * ${$}`),this.lowPriority=!1,this}},{key:"div",value:function($){return this.lowPriority&&(this.result=`(${this.result})`),$ instanceof me?this.result=`${this.result} / ${$.getResult(!0)}`:(typeof $=="number"||typeof $=="string")&&(this.result=`${this.result} / ${$}`),this.lowPriority=!1,this}},{key:"getResult",value:function($){return this.lowPriority||$?`(${this.result})`:this.result}},{key:"equal",value:function($){const{unit:le=!0}=$||{};return this.result=this.result.replace(be,le?"px":""),typeof this.lowPriority!="undefined"?`calc(${this.result})`:this.result}}])}(se.default)},14774:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(56690)),E=K(L(89728)),he=K(L(76976)),ee=K(L(61655)),se=K(L(38194));let ue=G.default=function(be){function oe(Ge){var te;return(0,W.default)(this,oe),te=(0,he.default)(this,oe),te.result=0,Ge instanceof oe?te.result=Ge.result:typeof Ge=="number"&&(te.result=Ge),te}return(0,ee.default)(oe,be),(0,E.default)(oe,[{key:"add",value:function(te){return te instanceof oe?this.result+=te.result:typeof te=="number"&&(this.result+=te),this}},{key:"sub",value:function(te){return te instanceof oe?this.result-=te.result:typeof te=="number"&&(this.result-=te),this}},{key:"mul",value:function(te){return te instanceof oe?this.result*=te.result:typeof te=="number"&&(this.result*=te),this}},{key:"div",value:function(te){return te instanceof oe?this.result/=te.result:typeof te=="number"&&(this.result/=te),this}},{key:"equal",value:function(){return this.result}}])}(se.default)},38194:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(89728)),E=K(L(56690));let he=(0,W.default)(function se(){(0,E.default)(this,se)});var ee=G.default=he},22996:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(24312)),E=K(L(14774));const he=se=>{const ue=se==="css"?W.default:E.default;return be=>new ue(be)};var ee=G.default=he},3737:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=J,G.genSubStyleComponent=G.genStyleHooks=void 0;var E=W(L(67294)),he=L(6731),ee=L(56790),se=L(7177),ue=L(98078),be=W(L(41401)),oe=K(L(22996)),Ge=K(L(1657)),te=W(L(99636)),me=K(L(54894));const Pe=(wt,pt,yt)=>{var Re;return typeof yt=="function"?yt((0,te.merge)(pt,(Re=pt[wt])!==null&&Re!==void 0?Re:{})):yt!=null?yt:{}},$=(wt,pt,yt,Re)=>{const Ce=Object.assign({},pt[wt]);if(Re!=null&&Re.deprecatedTokens){const{deprecatedTokens:We}=Re;We.forEach(lt=>{let[tn,Le]=lt;var _t;(Ce!=null&&Ce[tn]||Ce!=null&&Ce[Le])&&((_t=Ce[Le])!==null&&_t!==void 0||(Ce[Le]=Ce==null?void 0:Ce[tn]))})}const Ue=Object.assign(Object.assign({},yt),Ce);return Object.keys(Ue).forEach(We=>{Ue[We]===pt[We]&&delete Ue[We]}),Ue},le=(wt,pt)=>`${[pt,wt.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function J(wt,pt,yt){let Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const Ce=Array.isArray(wt)?wt:[wt,wt],[Ue]=Ce,We=Ce.join("-");return function(lt){let tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lt;const[Le,_t,Me,nt,qe]=(0,be.default)(),{getPrefixCls:Ye,iconPrefixCls:Lt,csp:xt}=(0,E.useContext)(se.ConfigContext),Ie=Ye(),Gt=qe?"css":"js",gn=(0,oe.default)(Gt),{max:Tn,min:sr}=(0,Ge.default)(Gt),nr={theme:Le,token:nt,hashId:Me,nonce:()=>xt==null?void 0:xt.nonce,clientOnly:Re.clientOnly,order:Re.order||-999};return(0,he.useStyleRegister)(Object.assign(Object.assign({},nr),{clientOnly:!1,path:["Shared",Ie]}),()=>[{"&":(0,ue.genLinkStyle)(nt)}]),(0,me.default)(Lt,xt),[(0,he.useStyleRegister)(Object.assign(Object.assign({},nr),{path:[We,lt,Lt]}),()=>{if(Re.injectStyle===!1)return[];const{token:Kt,flush:fn}=(0,te.default)(nt),Gn=Pe(Ue,_t,yt),on=`.${lt}`,Pt=$(Ue,_t,Gn,{deprecatedTokens:Re.deprecatedTokens});qe&&Object.keys(Gn).forEach(rt=>{Gn[rt]=`var(${(0,he.token2CSSVar)(rt,le(Ue,qe.prefix))})`});const zt=(0,te.merge)(Kt,{componentCls:on,prefixCls:lt,iconCls:`.${Lt}`,antCls:`.${Ie}`,calc:gn,max:Tn,min:sr},qe?Gn:Pt),ze=pt(zt,{hashId:Me,prefixCls:lt,rootPrefixCls:Ie,iconPrefixCls:Lt});return fn(Ue,Pt),[Re.resetStyle===!1?null:(0,ue.genCommonStyle)(zt,lt,tn,Re.resetFont),ze]}),Me]}}const Ee=(wt,pt,yt,Re)=>{const Ce=J(wt,pt,yt,Object.assign({resetStyle:!1,order:-998},Re));return We=>{let{prefixCls:lt,rootCls:tn=lt}=We;return Ce(lt,tn),null}};G.genSubStyleComponent=Ee;const tt=(wt,pt,yt)=>{function Re(Le){return`${wt}${Le.slice(0,1).toUpperCase()}${Le.slice(1)}`}const{unitless:Ce={},injectStyle:Ue=!0}=yt!=null?yt:{},We={[Re("zIndexPopup")]:!0};Object.keys(Ce).forEach(Le=>{We[Re(Le)]=Ce[Le]});const lt=Le=>{let{rootCls:_t,cssVar:Me}=Le;const[,nt]=(0,be.default)();return(0,he.useCSSVarRegister)({path:[wt],prefix:Me.prefix,key:Me==null?void 0:Me.key,unitless:Object.assign(Object.assign({},be.unitless),We),ignore:be.ignore,token:nt,scope:_t},()=>{const qe=Pe(wt,nt,pt),Ye=$(wt,nt,qe,{deprecatedTokens:yt==null?void 0:yt.deprecatedTokens});return Object.keys(qe).forEach(Lt=>{Ye[Re(Lt)]=Ye[Lt],delete Ye[Lt]}),Ye}),null};return Le=>{const[,,,,_t]=(0,be.default)();return[Me=>Ue&&_t?E.default.createElement(E.default.Fragment,null,E.default.createElement(lt,{rootCls:Le,cssVar:_t,component:wt}),Me):Me,_t==null?void 0:_t.key]}},Je=(wt,pt,yt,Re)=>{const Ce=J(wt,pt,yt,Re),Ue=tt(Array.isArray(wt)?wt[0]:wt,yt,Re);return function(We){let lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:We;const[,tn]=Ce(We,lt),[Le,_t]=Ue(lt);return[Le,tn,_t]}};G.genStyleHooks=Je},36219:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=W;var K=L(36496);function W(E,he){return K.PresetColors.reduce((ee,se)=>{const ue=E[`${se}1`],be=E[`${se}3`],oe=E[`${se}6`],Ge=E[`${se}7`];return Object.assign(Object.assign({},ee),he(se,{lightColor:ue,lightBorderColor:be,darkColor:oe,textColor:Ge}))},{})}},83609:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var K=L(131);function W(ee){return ee>=0&&ee<=255}function E(ee,se){const{r:ue,g:be,b:oe,a:Ge}=new K.TinyColor(ee).toRgb();if(Ge<1)return ee;const{r:te,g:me,b:Pe}=new K.TinyColor(se).toRgb();for(let $=.01;$<=1;$+=.01){const le=Math.round((ue-te*(1-$))/$),J=Math.round((be-me*(1-$))/$),Ee=Math.round((oe-Pe*(1-$))/$);if(W(le)&&W(J)&&W(Ee))return new K.TinyColor({r:le,g:J,b:Ee,a:Math.round($*100)/100}).toRgbString()}return new K.TinyColor({r:ue,g:be,b:oe,a:1}).toRgbString()}var he=G.default=E},1657:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=W;var K=L(6731);function W(E){return E==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var he=arguments.length,ee=new Array(he),se=0;se<he;se++)ee[se]=arguments[se];return`max(${ee.map(ue=>(0,K.unit)(ue)).join(",")})`},min:function(){for(var he=arguments.length,ee=new Array(he),se=0;se<he;se++)ee[se]=arguments[se];return`min(${ee.map(ue=>(0,K.unit)(ue)).join(",")})`}}}},99636:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=G._statistic_build_=void 0,G.merge=W,G.statistic=void 0;const L=typeof CSSINJS_STATISTIC!="undefined";let K=!0;function W(){for(var be=arguments.length,oe=new Array(be),Ge=0;Ge<be;Ge++)oe[Ge]=arguments[Ge];if(!L)return Object.assign.apply(Object,[{}].concat(oe));K=!1;const te={};return oe.forEach(me=>{Object.keys(me).forEach($=>{Object.defineProperty(te,$,{configurable:!0,enumerable:!0,get:()=>me[$]})})}),K=!0,te}const E=G.statistic={},he=G._statistic_build_={};function ee(){}const se=be=>{let oe,Ge=be,te=ee;return L&&typeof Proxy!="undefined"&&(oe=new Set,Ge=new Proxy(be,{get(me,Pe){return K&&oe.add(Pe),me[Pe]}}),te=(me,Pe)=>{var $;E[me]={global:Array.from(oe),component:Object.assign(Object.assign({},($=E[me])===null||$===void 0?void 0:$.component),Pe)}}),{token:Ge,keys:oe,flush:te}};var ue=G.default=se},54894:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=L(6731),E=L(98078),he=K(L(41401));const ee=(ue,be)=>{const[oe,Ge]=(0,he.default)();return(0,W.useStyleRegister)({theme:oe,token:Ge,hashId:"",path:["ant-design-icons",ue],nonce:()=>be==null?void 0:be.nonce},()=>[{[`.${ue}`]:Object.assign(Object.assign({},(0,E.resetIcon)()),{[`.${ue} .${ue}-icon`]:{display:"block"}})}])};var se=G.default=ee},52040:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const L={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var K=G.default=L},92125:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),he=K(L(93967)),ee=L(92419),se=L(31929),ue=K(L(15086)),be=L(48125);const oe=te=>{const{prefixCls:me,className:Pe,placement:$="top",title:le,color:J,overlayInnerStyle:Ee}=te,{getPrefixCls:tt}=E.useContext(se.ConfigContext),Je=tt("tooltip",me),[wt,pt,yt]=(0,ue.default)(Je),Re=(0,be.parseColor)(Je,J),Ce=Re.arrowStyle,Ue=Object.assign(Object.assign({},Ee),Re.overlayStyle),We=(0,he.default)(pt,yt,Je,`${Je}-pure`,`${Je}-placement-${$}`,Pe,Re.className);return wt(E.createElement("div",{className:We,style:Ce},E.createElement("div",{className:`${Je}-arrow`}),E.createElement(ee.Popup,Object.assign({},te,{className:pt,prefixCls:Je,overlayInnerStyle:Ue}),le)))};var Ge=G.default=oe},94055:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),he=K(L(93967)),ee=K(L(92419)),se=K(L(60869)),ue=L(56333),be=L(53683),oe=K(L(74132)),Ge=L(47419),te=L(13594),me=K(L(96877)),Pe=L(31929),$=L(46549),le=L(3184),J=K(L(92125)),Ee=K(L(15086)),tt=L(48125),Je=function(Re,Ce){var Ue={};for(var We in Re)Object.prototype.hasOwnProperty.call(Re,We)&&Ce.indexOf(We)<0&&(Ue[We]=Re[We]);if(Re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,We=Object.getOwnPropertySymbols(Re);lt<We.length;lt++)Ce.indexOf(We[lt])<0&&Object.prototype.propertyIsEnumerable.call(Re,We[lt])&&(Ue[We[lt]]=Re[We[lt]]);return Ue};const pt=E.forwardRef((Re,Ce)=>{var Ue,We;const{prefixCls:lt,openClassName:tn,getTooltipContainer:Le,overlayClassName:_t,color:Me,overlayInnerStyle:nt,children:qe,afterOpenChange:Ye,afterVisibleChange:Lt,destroyTooltipOnHide:xt,arrow:Ie=!0,title:Gt,overlay:gn,builtinPlacements:Tn,arrowPointAtCenter:sr=!1,autoAdjustOverflow:nr=!0}=Re,Ft=!!Ie,[,Kt]=(0,le.useToken)(),{getPopupContainer:fn,getPrefixCls:Gn,direction:on}=E.useContext(Pe.ConfigContext),Pt=(0,te.devUseWarning)("Tooltip"),zt=E.useRef(null),ze=()=>{var it;(it=zt.current)===null||it===void 0||it.forceAlign()};E.useImperativeHandle(Ce,()=>({forceAlign:ze,forcePopupAlign:()=>{Pt.deprecated(!1,"forcePopupAlign","forceAlign"),ze()}}));const[rt,jt]=(0,se.default)(!1,{value:(Ue=Re.open)!==null&&Ue!==void 0?Ue:Re.visible,defaultValue:(We=Re.defaultOpen)!==null&&We!==void 0?We:Re.defaultVisible}),U=!Gt&&!gn&&Gt!==0,fe=it=>{var At,qt;jt(U?!1:it),U||((At=Re.onOpenChange)===null||At===void 0||At.call(Re,it),(qt=Re.onVisibleChange)===null||qt===void 0||qt.call(Re,it))},at=E.useMemo(()=>{var it,At;let qt=sr;return typeof Ie=="object"&&(qt=(At=(it=Ie.pointAtCenter)!==null&&it!==void 0?it:Ie.arrowPointAtCenter)!==null&&At!==void 0?At:sr),Tn||(0,oe.default)({arrowPointAtCenter:qt,autoAdjustOverflow:nr,arrowWidth:Ft?Kt.sizePopupArrow:0,borderRadius:Kt.borderRadius,offset:Kt.marginXXS,visibleFirst:!0})},[sr,Ie,Tn,Kt]),de=E.useMemo(()=>Gt===0?Gt:gn||Gt||"",[gn,Gt]),$t=E.createElement($.NoCompactStyle,null,typeof de=="function"?de():de),{getPopupContainer:sn,placement:pn="top",mouseEnterDelay:Nn=.1,mouseLeaveDelay:Wn=.1,overlayStyle:qn,rootClassName:dn}=Re,vt=Je(Re,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),It=Gn("tooltip",lt),An=Gn(),Dn=Re["data-popover-inject"];let Yn=rt;!("open"in Re)&&!("visible"in Re)&&U&&(Yn=!1);const dt=E.isValidElement(qe)&&!(0,Ge.isFragment)(qe)?qe:E.createElement("span",null,qe),xe=dt.props,Be=!xe.className||typeof xe.className=="string"?(0,he.default)(xe.className,tn||`${It}-open`):xe.className,[st,Dt,Ot]=(0,Ee.default)(It,!Dn),Sn=(0,tt.parseColor)(It,Me),er=Sn.arrowStyle,br=Object.assign(Object.assign({},nt),Sn.overlayStyle),$n=(0,he.default)(_t,{[`${It}-rtl`]:on==="rtl"},Sn.className,dn,Dt,Ot),[Oe,we]=(0,ue.useZIndex)("Tooltip",vt.zIndex),Ve=E.createElement(ee.default,Object.assign({},vt,{zIndex:Oe,showArrow:Ft,placement:pn,mouseEnterDelay:Nn,mouseLeaveDelay:Wn,prefixCls:It,overlayClassName:$n,overlayStyle:Object.assign(Object.assign({},er),qn),getTooltipContainer:sn||Le||fn,ref:zt,builtinPlacements:at,overlay:$t,visible:Yn,onVisibleChange:fe,afterVisibleChange:Ye!=null?Ye:Lt,overlayInnerStyle:br,arrowContent:E.createElement("span",{className:`${It}-arrow-content`}),motion:{motionName:(0,be.getTransitionName)(An,"zoom-big-fast",Re.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!xt}),Yn?(0,Ge.cloneElement)(dt,{className:Be}):dt);return st(E.createElement(me.default.Provider,{value:we},Ve))});pt._InternalPanelDoNotUseOrYouWillBeFired=J.default;var yt=G.default=pt},15086:function(bt,G,L){"use strict";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.prepareComponentToken=G.default=void 0;var W=L(6731),E=L(98078),he=L(42836),ee=K(L(9064)),se=L(51337),ue=L(3184);const be=te=>{const{componentCls:me,tooltipMaxWidth:Pe,tooltipColor:$,tooltipBg:le,tooltipBorderRadius:J,zIndexPopup:Ee,controlHeight:tt,boxShadowSecondary:Je,paddingSM:wt,paddingXS:pt}=te;return[{[me]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,E.resetComponent)(te)),{position:"absolute",zIndex:Ee,display:"block",width:"max-content",maxWidth:Pe,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":le,[`${me}-inner`]:{minWidth:tt,minHeight:tt,padding:`${(0,W.unit)(te.calc(wt).div(2).equal())} ${(0,W.unit)(pt)}`,color:$,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:le,borderRadius:J,boxShadow:Je,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${me}-inner`]:{borderRadius:te.min(J,ee.MAX_VERTICAL_CONTENT_RADIUS)}},[`${me}-content`]:{position:"relative"}}),(0,ue.genPresetColor)(te,(yt,Re)=>{let{darkColor:Ce}=Re;return{[`&${me}-${yt}`]:{[`${me}-inner`]:{backgroundColor:Ce},[`${me}-arrow`]:{"--antd-arrow-background-color":Ce}}}})),{"&-rtl":{direction:"rtl"}})},(0,ee.default)(te,"var(--antd-arrow-background-color)"),{[`${me}-pure`]:{position:"relative",maxWidth:"none",margin:te.sizePopupArrow}}]},oe=te=>Object.assign(Object.assign({zIndexPopup:te.zIndexPopupBase+70},(0,ee.getArrowOffsetToken)({contentRadius:te.borderRadius,limitVerticalRadius:!0})),(0,se.getArrowToken)((0,ue.mergeToken)(te,{borderRadiusOuter:Math.min(te.borderRadiusOuter,4)})));G.prepareComponentToken=oe;var Ge=G.default=function(me){let Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,ue.genStyleHooks)("Tooltip",le=>{const{borderRadius:J,colorTextLightSolid:Ee,colorBgSpotlight:tt}=le,Je=(0,ue.mergeToken)(le,{tooltipMaxWidth:250,tooltipColor:Ee,tooltipBorderRadius:J,tooltipBg:tt});return[be(Je),(0,he.initZoomMotion)(le,"zoom-big-fast")]},oe,{resetStyle:!1,injectStyle:Pe})(me)}},48125:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.parseColor=he;var W=K(L(93967)),E=L(45471);function he(ee,se){const ue=(0,E.isPresetColor)(se),be=(0,W.default)({[`${ee}-${se}`]:se&&ue}),oe={},Ge={};return se&&!ue&&(oe.background=se,Ge["--antd-arrow-background-color"]=se),{className:be,overlayStyle:oe,arrowStyle:Ge}}},6847:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=te;var E=W(L(67294)),he=K(L(83874)),ee=K(L(90091)),se=K(L(4121)),ue=K(L(93967)),be=K(L(60938)),oe=K(L(94055)),Ge=L(81410);function te(me){const{prefixCls:Pe,copied:$,locale:le={},onCopy:J,iconOnly:Ee,tooltips:tt,icon:Je,loading:wt}=me,pt=(0,Ge.toList)(tt),yt=(0,Ge.toList)(Je),{copied:Re,copy:Ce}=le,Ue=$?(0,Ge.getNode)(pt[1],Re):(0,Ge.getNode)(pt[0],Ce),lt=typeof Ue=="string"?Ue:$?Re:Ce;return E.createElement(oe.default,{key:"copy",title:Ue},E.createElement(be.default,{className:(0,ue.default)(`${Pe}-copy`,{[`${Pe}-copy-success`]:$,[`${Pe}-copy-icon-only`]:Ee}),onClick:J,"aria-label":lt},$?(0,Ge.getNode)(yt[1],E.createElement(he.default,null),!0):(0,Ge.getNode)(yt[0],wt?E.createElement(se.default,null):E.createElement(ee.default,null),!0)))}},12385:function(bt,G,L){"use strict";"use client";var K=L(75263).default,W=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=J;var E=W(L(861)),he=K(L(67294)),ee=W(L(45598)),se=W(L(82546));const ue=he.forwardRef((Ee,tt)=>{let{style:Je,children:wt}=Ee;const pt=he.useRef(null);return he.useImperativeHandle(tt,()=>({isExceed:()=>{const yt=pt.current;return yt.scrollHeight>yt.clientHeight},getHeight:()=>pt.current.clientHeight})),he.createElement("span",{"aria-hidden":!0,ref:pt,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},Je)},wt)});function be(Ee){const tt=typeof Ee;return tt==="string"||tt==="number"}function oe(Ee){let tt=0;return Ee.forEach(Je=>{be(Je)?tt+=String(Je).length:tt+=1}),tt}function Ge(Ee,tt){let Je=0;const wt=[];for(let pt=0;pt<Ee.length;pt+=1){if(Je===tt)return wt;const yt=Ee[pt],Ce=be(yt)?String(yt).length:1,Ue=Je+Ce;if(Ue>tt){const We=tt-Je;return wt.push(String(yt).slice(0,We)),wt}wt.push(yt),Je=Ue}return Ee}const te=0,me=1,Pe=2,$=3,le={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function J(Ee){const{enableMeasure:tt,width:Je,text:wt,children:pt,rows:yt,expanded:Re,miscDeps:Ce,onEllipsis:Ue}=Ee,We=he.useMemo(()=>(0,ee.default)(wt),[wt]),lt=he.useMemo(()=>oe(We),[wt]),tn=he.useMemo(()=>pt(We,!1),[wt]),[Le,_t]=he.useState(null),Me=he.useRef(null),nt=he.useRef(null),qe=he.useRef(null),Ye=he.useRef(null),[Lt,xt]=he.useState(!1),[Ie,Gt]=he.useState(te),[gn,Tn]=he.useState(0);(0,se.default)(()=>{Gt(tt&&Je&&lt?me:te)},[Je,wt,yt,tt,We]),(0,se.default)(()=>{var Kt,fn,Gn,on;if(Ie===me){const Pt=!!(!((Kt=nt.current)===null||Kt===void 0)&&Kt.isExceed());Gt(Pt?Pe:$),_t(Pt?[0,lt]:null),xt(Pt);const zt=((fn=nt.current)===null||fn===void 0?void 0:fn.getHeight())||0,ze=yt===1?0:((Gn=qe.current)===null||Gn===void 0?void 0:Gn.getHeight())||0,rt=((on=Ye.current)===null||on===void 0?void 0:on.getHeight())||0,jt=ze+rt,U=Math.max(zt,jt);Tn(U+1),Ue(Pt)}},[Ie]);const sr=Le?Math.ceil((Le[0]+Le[1])/2):0;(0,se.default)(()=>{var Kt;const[fn,Gn]=Le||[0,0];if(fn!==Gn){const Pt=(((Kt=Me.current)===null||Kt===void 0?void 0:Kt.getHeight())||0)>gn;let zt=sr;Gn-fn===1&&(zt=Pt?fn:Gn),_t(Pt?[fn,zt]:[zt,Gn])}},[Le,sr]);const nr=he.useMemo(()=>{if(Ie!==Pe||!Le||Le[0]!==Le[1]){const Kt=pt(We,!1);return Ie!==$&&Ie!==te?he.createElement("span",{style:Object.assign(Object.assign({},le),{WebkitLineClamp:yt})},Kt):Kt}return pt(Re?We:Ge(We,Le[0]),Lt)},[Re,Ie,Le,We].concat((0,E.default)(Ce))),Ft={width:Je,whiteSpace:"normal",margin:0,padding:0};return he.createElement(he.Fragment,null,nr,Ie===me&&he.createElement(he.Fragment,null,he.createElement(ue,{style:Object.assign(Object.assign(Object.assign({},Ft),le),{WebkitLineClamp:yt}),ref:nt},tn),he.createElement(ue,{style:Object.assign(Object.assign(Object.assign({},Ft),le),{WebkitLineClamp:yt-1}),ref:qe},tn),he.createElement(ue,{style:Object.assign(Object.assign(Object.assign({},Ft),le),{WebkitLineClamp:1}),ref:Ye},pt([],!0))),Ie===Pe&&Le&&Le[0]!==Le[1]&&he.createElement(ue,{style:Object.assign(Object.assign({},Ft),{top:400}),ref:Me},pt(Ge(We,sr),!0)))}},69274:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),he=K(L(94055));const ee=ue=>{let{enableEllipsis:be,isEllipsis:oe,children:Ge,tooltipProps:te}=ue;return!(te!=null&&te.title)||!be?Ge:E.createElement(he.default,Object.assign({open:oe?void 0:!1},te),Ge)};var se=G.default=ee},28460:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),he=K(L(10875)),ee=K(L(93967)),se=K(L(9220)),ue=K(L(45598)),be=K(L(82546)),oe=K(L(60869)),Ge=K(L(18475)),te=L(75531),me=L(38882),Pe=K(L(60938)),$=L(31929),le=K(L(76647)),J=K(L(94055)),Ee=K(L(69425)),tt=K(L(63985)),Je=K(L(92759)),wt=K(L(67312)),pt=K(L(89652)),yt=K(L(6847)),Re=K(L(12385)),Ce=K(L(69274)),Ue=function(_t,Me){var nt={};for(var qe in _t)Object.prototype.hasOwnProperty.call(_t,qe)&&Me.indexOf(qe)<0&&(nt[qe]=_t[qe]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ye=0,qe=Object.getOwnPropertySymbols(_t);Ye<qe.length;Ye++)Me.indexOf(qe[Ye])<0&&Object.prototype.propertyIsEnumerable.call(_t,qe[Ye])&&(nt[qe[Ye]]=_t[qe[Ye]]);return nt};function We(_t,Me){let{mark:nt,code:qe,underline:Ye,delete:Lt,strong:xt,keyboard:Ie,italic:Gt}=_t,gn=Me;function Tn(sr,nr){nr&&(gn=E.createElement(sr,{},gn))}return Tn("strong",xt),Tn("u",Ye),Tn("del",Lt),Tn("code",qe),Tn("mark",nt),Tn("kbd",Ie),Tn("i",Gt),gn}const lt="...",tn=E.forwardRef((_t,Me)=>{var nt,qe,Ye;const{prefixCls:Lt,className:xt,style:Ie,type:Gt,disabled:gn,children:Tn,ellipsis:sr,editable:nr,copyable:Ft,component:Kt,title:fn}=_t,Gn=Ue(_t,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:on,direction:Pt}=E.useContext($.ConfigContext),[zt]=(0,le.default)("Text"),ze=E.useRef(null),rt=E.useRef(null),jt=on("typography",Lt),U=(0,Ge.default)(Gn,["mark","code","delete","underline","strong","keyboard","italic"]),[fe,at]=(0,Je.default)(nr),[de,$t]=(0,oe.default)(!1,{value:at.editing}),{triggerType:sn=["icon"]}=at,pn=fi=>{var Ji;fi&&((Ji=at.onStart)===null||Ji===void 0||Ji.call(at)),$t(fi)};(0,wt.default)(()=>{var fi;de||(fi=rt.current)===null||fi===void 0||fi.focus()},[de]);const Nn=fi=>{fi==null||fi.preventDefault(),pn(!0)},Wn=fi=>{var Ji;(Ji=at.onChange)===null||Ji===void 0||Ji.call(at,fi),pn(!1)},qn=()=>{var fi;(fi=at.onCancel)===null||fi===void 0||fi.call(at),pn(!1)},[dn,vt]=(0,Je.default)(Ft),{copied:It,copyLoading:An,onClick:Dn}=(0,tt.default)({copyConfig:vt,children:Tn}),[Yn,dt]=E.useState(!1),[xe,Be]=E.useState(!1),[st,Dt]=E.useState(!1),[Ot,Sn]=E.useState(!1),[er,br]=E.useState(!0),[$n,Oe]=(0,Je.default)(sr,{expandable:!1,symbol:fi=>fi?zt==null?void 0:zt.collapse:zt==null?void 0:zt.expand}),[we,Ve]=(0,oe.default)(Oe.defaultExpanded||!1,{value:Oe.expanded}),it=$n&&(!we||Oe.expandable==="collapsible"),{rows:At=1}=Oe,qt=E.useMemo(()=>it&&(Oe.suffix!==void 0||Oe.onEllipsis||Oe.expandable||fe||dn),[it,Oe,fe,dn]);(0,be.default)(()=>{$n&&!qt&&(dt((0,me.isStyleSupport)("webkitLineClamp")),Be((0,me.isStyleSupport)("textOverflow")))},[qt,$n]);const[un,St]=E.useState(it),Jt=E.useMemo(()=>qt?!1:At===1?xe:Yn,[qt,xe,Yn]);(0,be.default)(()=>{St(Jt&&it)},[Jt,it]);const Qn=it&&(un?Ot:st),Er=it&&At===1&&un,Gr=it&&At>1&&un,mr=(fi,Ji)=>{var $e;Ve(Ji.expanded),($e=Oe.onExpand)===null||$e===void 0||$e.call(Oe,fi,Ji)},[Hr,wi]=E.useState(0),Pi=fi=>{let{offsetWidth:Ji}=fi;wi(Ji)},wr=fi=>{var Ji;Dt(fi),st!==fi&&((Ji=Oe.onEllipsis)===null||Ji===void 0||Ji.call(Oe,fi))};E.useEffect(()=>{const fi=ze.current;if($n&&un&&fi){const Ji=Gr?fi.offsetHeight<fi.scrollHeight:fi.offsetWidth<fi.scrollWidth;Ot!==Ji&&Sn(Ji)}},[$n,un,Tn,Gr,er,Hr]),E.useEffect(()=>{const fi=ze.current;if(typeof IntersectionObserver=="undefined"||!fi||!un||!it)return;const Ji=new IntersectionObserver(()=>{br(!!fi.offsetParent)});return Ji.observe(fi),()=>{Ji.disconnect()}},[un,it]);let gi={};Oe.tooltip===!0?gi={title:(nt=at.text)!==null&&nt!==void 0?nt:Tn}:E.isValidElement(Oe.tooltip)?gi={title:Oe.tooltip}:typeof Oe.tooltip=="object"?gi=Object.assign({title:(qe=at.text)!==null&&qe!==void 0?qe:Tn},Oe.tooltip):gi={title:Oe.tooltip};const di=E.useMemo(()=>{const fi=Ji=>["string","number"].includes(typeof Ji);if(!(!$n||un)){if(fi(at.text))return at.text;if(fi(Tn))return Tn;if(fi(fn))return fn;if(fi(gi.title))return gi.title}},[$n,un,fn,gi.title,Qn]);if(de)return E.createElement(Ee.default,{value:(Ye=at.text)!==null&&Ye!==void 0?Ye:typeof Tn=="string"?Tn:"",onSave:Wn,onCancel:qn,onEnd:at.onEnd,prefixCls:jt,className:xt,style:Ie,direction:Pt,component:Kt,maxLength:at.maxLength,autoSize:at.autoSize,enterIcon:at.enterIcon});const xi=()=>{const{expandable:fi,symbol:Ji}=Oe;return!fi||we&&fi!=="collapsible"?null:E.createElement("a",{key:"expand",className:`${jt}-${we?"collapse":"expand"}`,onClick:$e=>mr($e,{expanded:!we}),"aria-label":we?zt.collapse:zt==null?void 0:zt.expand},typeof Ji=="function"?Ji(we):Ji)},Fo=()=>{if(!fe)return;const{icon:fi,tooltip:Ji}=at,$e=(0,ue.default)(Ji)[0]||(zt==null?void 0:zt.edit),ht=typeof $e=="string"?$e:"";return sn.includes("icon")?E.createElement(J.default,{key:"edit",title:Ji===!1?"":$e},E.createElement(Pe.default,{ref:rt,className:`${jt}-edit`,onClick:Nn,"aria-label":ht},fi||E.createElement(he.default,{role:"button"}))):null},Ai=()=>dn?E.createElement(yt.default,Object.assign({key:"copy"},vt,{prefixCls:jt,copied:It,locale:zt,onCopy:Dn,loading:An,iconOnly:Tn==null})):null,ea=fi=>[fi&&xi(),Fo(),Ai()],_a=fi=>[fi&&!we&&E.createElement("span",{"aria-hidden":!0,key:"ellipsis"},lt),Oe.suffix,ea(fi)];return E.createElement(se.default,{onResize:Pi,disabled:!it},fi=>E.createElement(Ce.default,{tooltipProps:gi,enableEllipsis:it,isEllipsis:Qn},E.createElement(pt.default,Object.assign({className:(0,ee.default)({[`${jt}-${Gt}`]:Gt,[`${jt}-disabled`]:gn,[`${jt}-ellipsis`]:$n,[`${jt}-single-line`]:it&&At===1&&!we,[`${jt}-ellipsis-single-line`]:Er,[`${jt}-ellipsis-multiple-line`]:Gr},xt),prefixCls:Lt,style:Object.assign(Object.assign({},Ie),{WebkitLineClamp:Gr?At:void 0}),component:Kt,ref:(0,te.composeRef)(fi,ze,Me),direction:Pt,onClick:sn.includes("text")?Nn:void 0,"aria-label":di==null?void 0:di.toString(),title:fn},U),E.createElement(Re.default,{enableMeasure:it&&!un,text:Tn,rows:At,width:Hr,onEllipsis:wr,expanded:we,miscDeps:[It,we,An,fe,dn]},(Ji,$e)=>{let ht=Ji;return Ji.length&&$e&&!we&&di&&(ht=E.createElement("span",{key:"show-content","aria-hidden":!0},ht)),We(_t,E.createElement(E.Fragment,null,ht,_a($e)))}))))});var Le=G.default=tn},81410:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getNode=K,G.toList=L;function L(W){return W===!1?[!1,!1]:Array.isArray(W)?W:[W]}function K(W,E,he){return W===!0||W===void 0?E:W||he&&E}},69425:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),he=K(L(7224)),ee=K(L(93967)),se=K(L(27712)),ue=L(47419),be=K(L(14104)),oe=K(L(23461));const Ge=me=>{const{prefixCls:Pe,"aria-label":$,className:le,style:J,direction:Ee,maxLength:tt,autoSize:Je=!0,value:wt,onSave:pt,onCancel:yt,onEnd:Re,component:Ce,enterIcon:Ue=E.createElement(he.default,null)}=me,We=E.useRef(null),lt=E.useRef(!1),tn=E.useRef(),[Le,_t]=E.useState(wt);E.useEffect(()=>{_t(wt)},[wt]),E.useEffect(()=>{if(We.current&&We.current.resizableTextArea){const{textArea:Ft}=We.current.resizableTextArea;Ft.focus();const{length:Kt}=Ft.value;Ft.setSelectionRange(Kt,Kt)}},[]);const Me=Ft=>{let{target:Kt}=Ft;_t(Kt.value.replace(/[\n\r]/g,""))},nt=()=>{lt.current=!0},qe=()=>{lt.current=!1},Ye=Ft=>{let{keyCode:Kt}=Ft;lt.current||(tn.current=Kt)},Lt=()=>{pt(Le.trim())},xt=Ft=>{let{keyCode:Kt,ctrlKey:fn,altKey:Gn,metaKey:on,shiftKey:Pt}=Ft;tn.current===Kt&&!lt.current&&!fn&&!Gn&&!on&&!Pt&&(Kt===se.default.ENTER?(Lt(),Re==null||Re()):Kt===se.default.ESC&&yt())},Ie=()=>{Lt()},Gt=Ce?`${Pe}-${Ce}`:"",[gn,Tn,sr]=(0,oe.default)(Pe),nr=(0,ee.default)(Pe,`${Pe}-edit-content`,{[`${Pe}-rtl`]:Ee==="rtl"},le,Gt,Tn,sr);return gn(E.createElement("div",{className:nr,style:J},E.createElement(be.default,{ref:We,maxLength:tt,value:Le,onChange:Me,onKeyDown:Ye,onKeyUp:xt,onCompositionStart:nt,onCompositionEnd:qe,onBlur:Ie,"aria-label":$,rows:1,autoSize:Je}),Ue!==null?(0,ue.cloneElement)(Ue,{className:`${Pe}-edit-content-confirm`}):null))};var te=G.default=Ge},34528:function(bt,G,L){"use strict";var K,W=L(64836).default,E=L(75263).default;K={value:!0},G.Z=void 0;var he=E(L(67294)),ee=L(13594),se=W(L(28460)),ue=function(te,me){var Pe={};for(var $ in te)Object.prototype.hasOwnProperty.call(te,$)&&me.indexOf($)<0&&(Pe[$]=te[$]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var le=0,$=Object.getOwnPropertySymbols(te);le<$.length;le++)me.indexOf($[le])<0&&Object.prototype.propertyIsEnumerable.call(te,$[le])&&(Pe[$[le]]=te[$[le]]);return Pe};const be=[1,2,3,4,5],oe=he.forwardRef((te,me)=>{const{level:Pe=1}=te,$=ue(te,["level"]);let le;return be.includes(Pe)?le=`h${Pe}`:le="h1",he.createElement(se.default,Object.assign({ref:me},$,{component:le}))});var Ge=G.Z=oe},89652:function(bt,G,L){"use strict";"use client";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),he=K(L(93967)),ee=L(75531),se=L(13594),ue=L(31929),be=K(L(23461)),oe=function(me,Pe){var $={};for(var le in me)Object.prototype.hasOwnProperty.call(me,le)&&Pe.indexOf(le)<0&&($[le]=me[le]);if(me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,le=Object.getOwnPropertySymbols(me);J<le.length;J++)Pe.indexOf(le[J])<0&&Object.prototype.propertyIsEnumerable.call(me,le[J])&&($[le[J]]=me[le[J]]);return $};const Ge=E.forwardRef((me,Pe)=>{const{prefixCls:$,component:le="article",className:J,rootClassName:Ee,setContentRef:tt,children:Je,direction:wt,style:pt}=me,yt=oe(me,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:Re,direction:Ce,typography:Ue}=E.useContext(ue.ConfigContext),We=wt!=null?wt:Ce;let lt=Pe;tt&&(lt=(0,ee.composeRef)(Pe,tt));const tn=Re("typography",$),[Le,_t,Me]=(0,be.default)(tn),nt=(0,he.default)(tn,Ue==null?void 0:Ue.className,{[`${tn}-rtl`]:We==="rtl"},J,Ee,_t,Me),qe=Object.assign(Object.assign({},Ue==null?void 0:Ue.style),pt);return Le(E.createElement(le,Object.assign({className:nt,style:qe,ref:lt},yt),Je))});var te=G.default=Ge},63985:function(bt,G,L){"use strict";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var E=W(L(67294)),he=K(L(20640)),ee=L(56790),se=function(oe,Ge,te,me){function Pe($){return $ instanceof te?$:new te(function(le){le($)})}return new(te||(te=Promise))(function($,le){function J(Je){try{tt(me.next(Je))}catch(wt){le(wt)}}function Ee(Je){try{tt(me.throw(Je))}catch(wt){le(wt)}}function tt(Je){Je.done?$(Je.value):Pe(Je.value).then(J,Ee)}tt((me=me.apply(oe,Ge||[])).next())})};const ue=oe=>{let{copyConfig:Ge,children:te}=oe;const[me,Pe]=E.useState(!1),[$,le]=E.useState(!1),J=E.useRef(null),Ee=()=>{J.current&&clearTimeout(J.current)},tt={};Ge.format&&(tt.format=Ge.format),E.useEffect(()=>Ee,[]);const Je=(0,ee.useEvent)(wt=>se(void 0,void 0,void 0,function*(){var pt;wt==null||wt.preventDefault(),wt==null||wt.stopPropagation(),le(!0);try{const yt=typeof Ge.text=="function"?yield Ge.text():Ge.text;(0,he.default)(yt||String(te)||"",tt),le(!1),Pe(!0),Ee(),J.current=setTimeout(()=>{Pe(!1)},3e3),(pt=Ge.onCopy)===null||pt===void 0||pt.call(Ge,wt)}catch(yt){throw le(!1),yt}}));return{copied:me,copyLoading:$,onClick:Je}};var be=G.default=ue},92759:function(bt,G,L){"use strict";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=E;var W=K(L(67294));function E(he,ee){return W.useMemo(()=>{const se=!!he;return[se,Object.assign(Object.assign({},ee),se&&typeof he=="object"?he:null)]},[he])}},67312:function(bt,G,L){"use strict";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(67294));const E=(ee,se)=>{const ue=W.useRef(!1);W.useEffect(()=>{ue.current?ee():ue.current=!0},se)};var he=G.default=E},23461:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.prepareComponentToken=G.default=void 0;var K=L(98078),W=L(3184),E=L(48385);const he=ue=>{const{componentCls:be,titleMarginTop:oe}=ue;return{[be]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:ue.colorText,wordBreak:"break-word",lineHeight:ue.lineHeight,[`&${be}-secondary`]:{color:ue.colorTextDescription},[`&${be}-success`]:{color:ue.colorSuccess},[`&${be}-warning`]:{color:ue.colorWarning},[`&${be}-danger`]:{color:ue.colorError,"a&:active, a&:focus":{color:ue.colorErrorActive},"a&:hover":{color:ue.colorErrorHover}},[`&${be}-disabled`]:{color:ue.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},[`
        div&,
        p
      `]:{marginBottom:"1em"}},(0,E.getTitleStyles)(ue)),{[`
      & + h1${be},
      & + h2${be},
      & + h3${be},
      & + h4${be},
      & + h5${be}
      `]:{marginTop:oe},[`
      div,
      ul,
      li,
      p,
      h1,
      h2,
      h3,
      h4,
      h5`]:{[`
        + h1,
        + h2,
        + h3,
        + h4,
        + h5
        `]:{marginTop:oe}}}),(0,E.getResetStyles)(ue)),(0,E.getLinkStyles)(ue)),{[`
        ${be}-expand,
        ${be}-collapse,
        ${be}-edit,
        ${be}-copy
      `]:Object.assign(Object.assign({},(0,K.operationUnit)(ue)),{marginInlineStart:ue.marginXXS})}),(0,E.getEditableStyles)(ue)),(0,E.getCopyableStyles)(ue)),(0,E.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}},ee=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});G.prepareComponentToken=ee;var se=G.default=(0,W.genStyleHooks)("Typography",ue=>[he(ue)],ee)},48385:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getTitleStyles=G.getResetStyles=G.getLinkStyles=G.getEllipsisStyles=G.getEditableStyles=G.getCopyableStyles=void 0;var K=L(78589),W=L(6731),E=L(98078);const he=(te,me,Pe,$)=>{const{titleMarginBottom:le,fontWeightStrong:J}=$;return{marginBottom:le,color:Pe,fontWeight:J,fontSize:te,lineHeight:me}},ee=te=>{const me=[1,2,3,4,5],Pe={};return me.forEach($=>{Pe[`
      h${$}&,
      div&-h${$},
      div&-h${$} > textarea,
      h${$}
    `]=he(te[`fontSizeHeading${$}`],te[`lineHeightHeading${$}`],te.colorTextHeading,te)}),Pe};G.getTitleStyles=ee;const se=te=>{const{componentCls:me}=te;return{"a&, a":Object.assign(Object.assign({},(0,E.operationUnit)(te)),{textDecoration:te.linkDecoration,"&:active, &:hover":{textDecoration:te.linkHoverDecoration},[`&[disabled], &${me}-disabled`]:{color:te.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:te.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};G.getLinkStyles=se;const ue=te=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:te.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:te.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:K.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:te.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});G.getResetStyles=ue;const be=te=>{const{componentCls:me,paddingSM:Pe}=te,$=Pe;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:te.calc(te.paddingSM).mul(-1).equal(),marginTop:te.calc($).mul(-1).equal(),marginBottom:`calc(1em - ${(0,W.unit)($)})`},[`${me}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:te.calc(te.marginXS).add(2).equal(),insetBlockEnd:te.marginXS,color:te.colorTextDescription,fontWeight:"normal",fontSize:te.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};G.getEditableStyles=be;const oe=te=>({[`${te.componentCls}-copy-success`]:{[`
    &,
    &:hover,
    &:focus`]:{color:te.colorSuccess}},[`${te.componentCls}-copy-icon-only`]:{marginInlineStart:0}});G.getCopyableStyles=oe;const Ge=()=>({[`
  a&-ellipsis,
  span&-ellipsis
  `]:{display:"inline-block",maxWidth:"100%"},"&-single-line":{whiteSpace:"nowrap"},"&-ellipsis-single-line":{overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});G.getEllipsisStyles=Ge},87629:function(bt,G,L){"use strict";"use client";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(36245)),E=G.default=W.default},36245:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=G.default="5.16.4"},83874:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const K=W(L(71079));function W(he){return he&&he.__esModule?he:{default:he}}const E=K;G.default=E,bt.exports=E},43273:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const K=W(L(72225));function W(he){return he&&he.__esModule?he:{default:he}}const E=K;G.default=E,bt.exports=E},90091:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const K=W(L(29539));function W(he){return he&&he.__esModule?he:{default:he}}const E=K;G.default=E,bt.exports=E},10875:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const K=W(L(54825));function W(he){return he&&he.__esModule?he:{default:he}}const E=K;G.default=E,bt.exports=E},7224:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const K=W(L(43552));function W(he){return he&&he.__esModule?he:{default:he}}const E=K;G.default=E,bt.exports=E},4121:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;const K=W(L(61929));function W(he){return he&&he.__esModule?he:{default:he}}const E=K;G.default=E,bt.exports=E},26545:function(bt,G,L){"use client";"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Ce}});var K=Pe(L(67294)),W=te(L(93967)),E=L(78589),he=te(L(13357)),ee=te(L(46648)),se=L(46338),ue=L(49458);function be(Ue,We){(We==null||We>Ue.length)&&(We=Ue.length);for(var lt=0,tn=new Array(We);lt<We;lt++)tn[lt]=Ue[lt];return tn}function oe(Ue){if(Array.isArray(Ue))return Ue}function Ge(Ue,We,lt){return We in Ue?Object.defineProperty(Ue,We,{value:lt,enumerable:!0,configurable:!0,writable:!0}):Ue[We]=lt,Ue}function te(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}}function me(Ue){if(typeof WeakMap!="function")return null;var We=new WeakMap,lt=new WeakMap;return(me=function(tn){return tn?lt:We})(Ue)}function Pe(Ue,We){if(!We&&Ue&&Ue.__esModule)return Ue;if(Ue===null||typeof Ue!="object"&&typeof Ue!="function")return{default:Ue};var lt=me(We);if(lt&&lt.has(Ue))return lt.get(Ue);var tn={__proto__:null},Le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _t in Ue)if(_t!=="default"&&Object.prototype.hasOwnProperty.call(Ue,_t)){var Me=Le?Object.getOwnPropertyDescriptor(Ue,_t):null;Me&&(Me.get||Me.set)?Object.defineProperty(tn,_t,Me):tn[_t]=Ue[_t]}return tn.default=Ue,lt&&lt.set(Ue,tn),tn}function $(Ue,We){var lt=Ue==null?null:typeof Symbol!="undefined"&&Ue[Symbol.iterator]||Ue["@@iterator"];if(lt!=null){var tn=[],Le=!0,_t=!1,Me,nt;try{for(lt=lt.call(Ue);!(Le=(Me=lt.next()).done)&&(tn.push(Me.value),!(We&&tn.length===We));Le=!0);}catch(qe){_t=!0,nt=qe}finally{try{!Le&&lt.return!=null&&lt.return()}finally{if(_t)throw nt}}return tn}}function le(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function J(Ue){for(var We=1;We<arguments.length;We++){var lt=arguments[We]!=null?arguments[We]:{},tn=Object.keys(lt);typeof Object.getOwnPropertySymbols=="function"&&(tn=tn.concat(Object.getOwnPropertySymbols(lt).filter(function(Le){return Object.getOwnPropertyDescriptor(lt,Le).enumerable}))),tn.forEach(function(Le){Ge(Ue,Le,lt[Le])})}return Ue}function Ee(Ue,We){var lt=Object.keys(Ue);if(Object.getOwnPropertySymbols){var tn=Object.getOwnPropertySymbols(Ue);We&&(tn=tn.filter(function(Le){return Object.getOwnPropertyDescriptor(Ue,Le).enumerable})),lt.push.apply(lt,tn)}return lt}function tt(Ue,We){return We=We!=null?We:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Ue,Object.getOwnPropertyDescriptors(We)):Ee(Object(We)).forEach(function(lt){Object.defineProperty(Ue,lt,Object.getOwnPropertyDescriptor(We,lt))}),Ue}function Je(Ue,We){if(Ue==null)return{};var lt=wt(Ue,We),tn,Le;if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(Ue);for(Le=0;Le<_t.length;Le++)tn=_t[Le],!(We.indexOf(tn)>=0)&&Object.prototype.propertyIsEnumerable.call(Ue,tn)&&(lt[tn]=Ue[tn])}return lt}function wt(Ue,We){if(Ue==null)return{};var lt={},tn=Object.keys(Ue),Le,_t;for(_t=0;_t<tn.length;_t++)Le=tn[_t],!(We.indexOf(Le)>=0)&&(lt[Le]=Ue[Le]);return lt}function pt(Ue,We){return oe(Ue)||$(Ue,We)||yt(Ue,We)||le()}function yt(Ue,We){if(Ue){if(typeof Ue=="string")return be(Ue,We);var lt=Object.prototype.toString.call(Ue).slice(8,-1);if(lt==="Object"&&Ue.constructor&&(lt=Ue.constructor.name),lt==="Map"||lt==="Set")return Array.from(lt);if(lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt))return be(Ue,We)}}(0,se.setTwoToneColor)(E.blue.primary);var Re=K.forwardRef(function(Ue,We){var lt=Ue.className,tn=Ue.icon,Le=Ue.spin,_t=Ue.rotate,Me=Ue.tabIndex,nt=Ue.onClick,qe=Ue.twoToneColor,Ye=Je(Ue,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),Lt=K.useContext(he.default),xt=Lt.prefixCls,Ie=xt===void 0?"anticon":xt,Gt=Lt.rootClassName,gn,Tn=(0,W.default)(Gt,Ie,(gn={},Ge(gn,"".concat(Ie,"-").concat(tn.name),!!tn.name),Ge(gn,"".concat(Ie,"-spin"),!!Le||tn.name==="loading"),gn),lt),sr=Me;sr===void 0&&nt&&(sr=-1);var nr=_t?{msTransform:"rotate(".concat(_t,"deg)"),transform:"rotate(".concat(_t,"deg)")}:void 0,Ft=pt((0,ue.normalizeTwoToneColors)(qe),2),Kt=Ft[0],fn=Ft[1];return K.createElement("span",tt(J({role:"img","aria-label":tn.name},Ye),{ref:We,tabIndex:sr,onClick:nt,className:Tn}),K.createElement(ee.default,{icon:tn,primaryColor:Kt,secondaryColor:fn,style:nr}))});Re.displayName="AntdIcon",Re.getTwoToneColor=se.getTwoToneColor,Re.setTwoToneColor=se.setTwoToneColor;var Ce=Re},13357:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return E}});var K=L(67294),W=(0,K.createContext)({}),E=W},46648:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return le}});var K=ee(L(67294)),W=L(49458);function E(J,Ee,tt){return Ee in J?Object.defineProperty(J,Ee,{value:tt,enumerable:!0,configurable:!0,writable:!0}):J[Ee]=tt,J}function he(J){if(typeof WeakMap!="function")return null;var Ee=new WeakMap,tt=new WeakMap;return(he=function(Je){return Je?tt:Ee})(J)}function ee(J,Ee){if(!Ee&&J&&J.__esModule)return J;if(J===null||typeof J!="object"&&typeof J!="function")return{default:J};var tt=he(Ee);if(tt&&tt.has(J))return tt.get(J);var Je={__proto__:null},wt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var pt in J)if(pt!=="default"&&Object.prototype.hasOwnProperty.call(J,pt)){var yt=wt?Object.getOwnPropertyDescriptor(J,pt):null;yt&&(yt.get||yt.set)?Object.defineProperty(Je,pt,yt):Je[pt]=J[pt]}return Je.default=J,tt&&tt.set(J,Je),Je}function se(J){for(var Ee=1;Ee<arguments.length;Ee++){var tt=arguments[Ee]!=null?arguments[Ee]:{},Je=Object.keys(tt);typeof Object.getOwnPropertySymbols=="function"&&(Je=Je.concat(Object.getOwnPropertySymbols(tt).filter(function(wt){return Object.getOwnPropertyDescriptor(tt,wt).enumerable}))),Je.forEach(function(wt){E(J,wt,tt[wt])})}return J}function ue(J,Ee){var tt=Object.keys(J);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(J);Ee&&(Je=Je.filter(function(wt){return Object.getOwnPropertyDescriptor(J,wt).enumerable})),tt.push.apply(tt,Je)}return tt}function be(J,Ee){return Ee=Ee!=null?Ee:{},Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(Ee)):ue(Object(Ee)).forEach(function(tt){Object.defineProperty(J,tt,Object.getOwnPropertyDescriptor(Ee,tt))}),J}function oe(J,Ee){if(J==null)return{};var tt=Ge(J,Ee),Je,wt;if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(J);for(wt=0;wt<pt.length;wt++)Je=pt[wt],!(Ee.indexOf(Je)>=0)&&Object.prototype.propertyIsEnumerable.call(J,Je)&&(tt[Je]=J[Je])}return tt}function Ge(J,Ee){if(J==null)return{};var tt={},Je=Object.keys(J),wt,pt;for(pt=0;pt<Je.length;pt++)wt=Je[pt],!(Ee.indexOf(wt)>=0)&&(tt[wt]=J[wt]);return tt}var te={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function me(J){var Ee=J.primaryColor,tt=J.secondaryColor;te.primaryColor=Ee,te.secondaryColor=tt||(0,W.getSecondaryColor)(Ee),te.calculated=!!tt}function Pe(){return se({},te)}var $=function(J){var Ee=J.icon,tt=J.className,Je=J.onClick,wt=J.style,pt=J.primaryColor,yt=J.secondaryColor,Re=oe(J,["icon","className","onClick","style","primaryColor","secondaryColor"]),Ce=K.useRef(),Ue=te;if(pt&&(Ue={primaryColor:pt,secondaryColor:yt||(0,W.getSecondaryColor)(pt)}),(0,W.useInsertStyles)(Ce),(0,W.warning)((0,W.isIconDefinition)(Ee),"icon should be icon definiton, but got ".concat(Ee)),!(0,W.isIconDefinition)(Ee))return null;var We=Ee;return We&&typeof We.icon=="function"&&(We=be(se({},We),{icon:We.icon(Ue.primaryColor,Ue.secondaryColor)})),(0,W.generate)(We.icon,"svg-".concat(We.name),be(se({className:tt,onClick:Je,style:wt,"data-icon":We.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},Re),{ref:Ce}))};$.displayName="IconReact",$.getTwoToneColors=Pe,$.setTwoToneColors=me;var le=$},46338:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0});function K(Pe,$){for(var le in $)Object.defineProperty(Pe,le,{enumerable:!0,get:$[le]})}K(G,{getTwoToneColor:function(){return me},setTwoToneColor:function(){return te}});var W=se(L(46648)),E=L(49458);function he(Pe,$){($==null||$>Pe.length)&&($=Pe.length);for(var le=0,J=new Array($);le<$;le++)J[le]=Pe[le];return J}function ee(Pe){if(Array.isArray(Pe))return Pe}function se(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}function ue(Pe,$){var le=Pe==null?null:typeof Symbol!="undefined"&&Pe[Symbol.iterator]||Pe["@@iterator"];if(le!=null){var J=[],Ee=!0,tt=!1,Je,wt;try{for(le=le.call(Pe);!(Ee=(Je=le.next()).done)&&(J.push(Je.value),!($&&J.length===$));Ee=!0);}catch(pt){tt=!0,wt=pt}finally{try{!Ee&&le.return!=null&&le.return()}finally{if(tt)throw wt}}return J}}function be(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oe(Pe,$){return ee(Pe)||ue(Pe,$)||Ge(Pe,$)||be()}function Ge(Pe,$){if(Pe){if(typeof Pe=="string")return he(Pe,$);var le=Object.prototype.toString.call(Pe).slice(8,-1);if(le==="Object"&&Pe.constructor&&(le=Pe.constructor.name),le==="Map"||le==="Set")return Array.from(le);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return he(Pe,$)}}function te(Pe){var $=oe((0,E.normalizeTwoToneColors)(Pe),2),le=$[0],J=$[1];return W.default.setTwoToneColors({primaryColor:le,secondaryColor:J})}function me(){var Pe=W.default.getTwoToneColors();return Pe.calculated?[Pe.primaryColor,Pe.secondaryColor]:Pe.primaryColor}},71079:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Pe}});var K=ue(L(67294)),W=ee(L(25330)),E=ee(L(26545));function he($,le,J){return le in $?Object.defineProperty($,le,{value:J,enumerable:!0,configurable:!0,writable:!0}):$[le]=J,$}function ee($){return $&&$.__esModule?$:{default:$}}function se($){if(typeof WeakMap!="function")return null;var le=new WeakMap,J=new WeakMap;return(se=function(Ee){return Ee?J:le})($)}function ue($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var J=se(le);if(J&&J.has($))return J.get($);var Ee={__proto__:null},tt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=tt?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(Ee,Je,wt):Ee[Je]=$[Je]}return Ee.default=$,J&&J.set($,Ee),Ee}function be($){for(var le=1;le<arguments.length;le++){var J=arguments[le]!=null?arguments[le]:{},Ee=Object.keys(J);typeof Object.getOwnPropertySymbols=="function"&&(Ee=Ee.concat(Object.getOwnPropertySymbols(J).filter(function(tt){return Object.getOwnPropertyDescriptor(J,tt).enumerable}))),Ee.forEach(function(tt){he($,tt,J[tt])})}return $}function oe($,le){var J=Object.keys($);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols($);le&&(Ee=Ee.filter(function(tt){return Object.getOwnPropertyDescriptor($,tt).enumerable})),J.push.apply(J,Ee)}return J}function Ge($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(J){Object.defineProperty($,J,Object.getOwnPropertyDescriptor(le,J))}),$}var te=function($,le){return K.createElement(E.default,Ge(be({},$),{ref:le,icon:W.default}))},me=K.forwardRef(te),Pe=me},72225:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Pe}});var K=ue(L(67294)),W=ee(L(67303)),E=ee(L(26545));function he($,le,J){return le in $?Object.defineProperty($,le,{value:J,enumerable:!0,configurable:!0,writable:!0}):$[le]=J,$}function ee($){return $&&$.__esModule?$:{default:$}}function se($){if(typeof WeakMap!="function")return null;var le=new WeakMap,J=new WeakMap;return(se=function(Ee){return Ee?J:le})($)}function ue($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var J=se(le);if(J&&J.has($))return J.get($);var Ee={__proto__:null},tt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=tt?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(Ee,Je,wt):Ee[Je]=$[Je]}return Ee.default=$,J&&J.set($,Ee),Ee}function be($){for(var le=1;le<arguments.length;le++){var J=arguments[le]!=null?arguments[le]:{},Ee=Object.keys(J);typeof Object.getOwnPropertySymbols=="function"&&(Ee=Ee.concat(Object.getOwnPropertySymbols(J).filter(function(tt){return Object.getOwnPropertyDescriptor(J,tt).enumerable}))),Ee.forEach(function(tt){he($,tt,J[tt])})}return $}function oe($,le){var J=Object.keys($);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols($);le&&(Ee=Ee.filter(function(tt){return Object.getOwnPropertyDescriptor($,tt).enumerable})),J.push.apply(J,Ee)}return J}function Ge($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(J){Object.defineProperty($,J,Object.getOwnPropertyDescriptor(le,J))}),$}var te=function($,le){return K.createElement(E.default,Ge(be({},$),{ref:le,icon:W.default}))},me=K.forwardRef(te),Pe=me},29539:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Pe}});var K=ue(L(67294)),W=ee(L(83647)),E=ee(L(26545));function he($,le,J){return le in $?Object.defineProperty($,le,{value:J,enumerable:!0,configurable:!0,writable:!0}):$[le]=J,$}function ee($){return $&&$.__esModule?$:{default:$}}function se($){if(typeof WeakMap!="function")return null;var le=new WeakMap,J=new WeakMap;return(se=function(Ee){return Ee?J:le})($)}function ue($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var J=se(le);if(J&&J.has($))return J.get($);var Ee={__proto__:null},tt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=tt?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(Ee,Je,wt):Ee[Je]=$[Je]}return Ee.default=$,J&&J.set($,Ee),Ee}function be($){for(var le=1;le<arguments.length;le++){var J=arguments[le]!=null?arguments[le]:{},Ee=Object.keys(J);typeof Object.getOwnPropertySymbols=="function"&&(Ee=Ee.concat(Object.getOwnPropertySymbols(J).filter(function(tt){return Object.getOwnPropertyDescriptor(J,tt).enumerable}))),Ee.forEach(function(tt){he($,tt,J[tt])})}return $}function oe($,le){var J=Object.keys($);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols($);le&&(Ee=Ee.filter(function(tt){return Object.getOwnPropertyDescriptor($,tt).enumerable})),J.push.apply(J,Ee)}return J}function Ge($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(J){Object.defineProperty($,J,Object.getOwnPropertyDescriptor(le,J))}),$}var te=function($,le){return K.createElement(E.default,Ge(be({},$),{ref:le,icon:W.default}))},me=K.forwardRef(te),Pe=me},54825:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Pe}});var K=ue(L(67294)),W=ee(L(57583)),E=ee(L(26545));function he($,le,J){return le in $?Object.defineProperty($,le,{value:J,enumerable:!0,configurable:!0,writable:!0}):$[le]=J,$}function ee($){return $&&$.__esModule?$:{default:$}}function se($){if(typeof WeakMap!="function")return null;var le=new WeakMap,J=new WeakMap;return(se=function(Ee){return Ee?J:le})($)}function ue($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var J=se(le);if(J&&J.has($))return J.get($);var Ee={__proto__:null},tt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=tt?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(Ee,Je,wt):Ee[Je]=$[Je]}return Ee.default=$,J&&J.set($,Ee),Ee}function be($){for(var le=1;le<arguments.length;le++){var J=arguments[le]!=null?arguments[le]:{},Ee=Object.keys(J);typeof Object.getOwnPropertySymbols=="function"&&(Ee=Ee.concat(Object.getOwnPropertySymbols(J).filter(function(tt){return Object.getOwnPropertyDescriptor(J,tt).enumerable}))),Ee.forEach(function(tt){he($,tt,J[tt])})}return $}function oe($,le){var J=Object.keys($);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols($);le&&(Ee=Ee.filter(function(tt){return Object.getOwnPropertyDescriptor($,tt).enumerable})),J.push.apply(J,Ee)}return J}function Ge($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(J){Object.defineProperty($,J,Object.getOwnPropertyDescriptor(le,J))}),$}var te=function($,le){return K.createElement(E.default,Ge(be({},$),{ref:le,icon:W.default}))},me=K.forwardRef(te),Pe=me},43552:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Pe}});var K=ue(L(67294)),W=ee(L(29260)),E=ee(L(26545));function he($,le,J){return le in $?Object.defineProperty($,le,{value:J,enumerable:!0,configurable:!0,writable:!0}):$[le]=J,$}function ee($){return $&&$.__esModule?$:{default:$}}function se($){if(typeof WeakMap!="function")return null;var le=new WeakMap,J=new WeakMap;return(se=function(Ee){return Ee?J:le})($)}function ue($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var J=se(le);if(J&&J.has($))return J.get($);var Ee={__proto__:null},tt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=tt?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(Ee,Je,wt):Ee[Je]=$[Je]}return Ee.default=$,J&&J.set($,Ee),Ee}function be($){for(var le=1;le<arguments.length;le++){var J=arguments[le]!=null?arguments[le]:{},Ee=Object.keys(J);typeof Object.getOwnPropertySymbols=="function"&&(Ee=Ee.concat(Object.getOwnPropertySymbols(J).filter(function(tt){return Object.getOwnPropertyDescriptor(J,tt).enumerable}))),Ee.forEach(function(tt){he($,tt,J[tt])})}return $}function oe($,le){var J=Object.keys($);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols($);le&&(Ee=Ee.filter(function(tt){return Object.getOwnPropertyDescriptor($,tt).enumerable})),J.push.apply(J,Ee)}return J}function Ge($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(J){Object.defineProperty($,J,Object.getOwnPropertyDescriptor(le,J))}),$}var te=function($,le){return K.createElement(E.default,Ge(be({},$),{ref:le,icon:W.default}))},me=K.forwardRef(te),Pe=me},61929:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Pe}});var K=ue(L(67294)),W=ee(L(25828)),E=ee(L(26545));function he($,le,J){return le in $?Object.defineProperty($,le,{value:J,enumerable:!0,configurable:!0,writable:!0}):$[le]=J,$}function ee($){return $&&$.__esModule?$:{default:$}}function se($){if(typeof WeakMap!="function")return null;var le=new WeakMap,J=new WeakMap;return(se=function(Ee){return Ee?J:le})($)}function ue($,le){if(!le&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var J=se(le);if(J&&J.has($))return J.get($);var Ee={__proto__:null},tt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Je in $)if(Je!=="default"&&Object.prototype.hasOwnProperty.call($,Je)){var wt=tt?Object.getOwnPropertyDescriptor($,Je):null;wt&&(wt.get||wt.set)?Object.defineProperty(Ee,Je,wt):Ee[Je]=$[Je]}return Ee.default=$,J&&J.set($,Ee),Ee}function be($){for(var le=1;le<arguments.length;le++){var J=arguments[le]!=null?arguments[le]:{},Ee=Object.keys(J);typeof Object.getOwnPropertySymbols=="function"&&(Ee=Ee.concat(Object.getOwnPropertySymbols(J).filter(function(tt){return Object.getOwnPropertyDescriptor(J,tt).enumerable}))),Ee.forEach(function(tt){he($,tt,J[tt])})}return $}function oe($,le){var J=Object.keys($);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols($);le&&(Ee=Ee.filter(function(tt){return Object.getOwnPropertyDescriptor($,tt).enumerable})),J.push.apply(J,Ee)}return J}function Ge($,le){return le=le!=null?le:{},Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(le)):oe(Object(le)).forEach(function(J){Object.defineProperty($,J,Object.getOwnPropertyDescriptor(le,J))}),$}var te=function($,le){return K.createElement(E.default,Ge(be({},$),{ref:le,icon:W.default}))},me=K.forwardRef(te),Pe=me},49458:function(bt,G,L){"use strict";Object.defineProperty(G,"__esModule",{value:!0});function K(Re,Ce){for(var Ue in Ce)Object.defineProperty(Re,Ue,{enumerable:!0,get:Ce[Ue]})}K(G,{generate:function(){return Ee},getSecondaryColor:function(){return tt},iconStyles:function(){return pt},isIconDefinition:function(){return le},normalizeAttrs:function(){return J},normalizeTwoToneColors:function(){return Je},svgBaseProps:function(){return wt},useInsertStyles:function(){return yt},warning:function(){return $}});var W=L(78589),E=L(93399),he=L(63298),ee=oe(L(45520)),se=te(L(67294)),ue=oe(L(13357));function be(Re,Ce,Ue){return Ce in Re?Object.defineProperty(Re,Ce,{value:Ue,enumerable:!0,configurable:!0,writable:!0}):Re[Ce]=Ue,Re}function oe(Re){return Re&&Re.__esModule?Re:{default:Re}}function Ge(Re){if(typeof WeakMap!="function")return null;var Ce=new WeakMap,Ue=new WeakMap;return(Ge=function(We){return We?Ue:Ce})(Re)}function te(Re,Ce){if(!Ce&&Re&&Re.__esModule)return Re;if(Re===null||typeof Re!="object"&&typeof Re!="function")return{default:Re};var Ue=Ge(Ce);if(Ue&&Ue.has(Re))return Ue.get(Re);var We={__proto__:null},lt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tn in Re)if(tn!=="default"&&Object.prototype.hasOwnProperty.call(Re,tn)){var Le=lt?Object.getOwnPropertyDescriptor(Re,tn):null;Le&&(Le.get||Le.set)?Object.defineProperty(We,tn,Le):We[tn]=Re[tn]}return We.default=Re,Ue&&Ue.set(Re,We),We}function me(Re){for(var Ce=1;Ce<arguments.length;Ce++){var Ue=arguments[Ce]!=null?arguments[Ce]:{},We=Object.keys(Ue);typeof Object.getOwnPropertySymbols=="function"&&(We=We.concat(Object.getOwnPropertySymbols(Ue).filter(function(lt){return Object.getOwnPropertyDescriptor(Ue,lt).enumerable}))),We.forEach(function(lt){be(Re,lt,Ue[lt])})}return Re}function Pe(Re){return Re.replace(/-(.)/g,function(Ce,Ue){return Ue.toUpperCase()})}function $(Re,Ce){(0,ee.default)(Re,"[@ant-design/icons] ".concat(Ce))}function le(Re){return typeof Re=="object"&&typeof Re.name=="string"&&typeof Re.theme=="string"&&(typeof Re.icon=="object"||typeof Re.icon=="function")}function J(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(Re).reduce(function(Ce,Ue){var We=Re[Ue];switch(Ue){case"class":Ce.className=We,delete Ce.class;break;default:delete Ce[Ue],Ce[Pe(Ue)]=We}return Ce},{})}function Ee(Re,Ce,Ue){return Ue?se.default.createElement(Re.tag,me({key:Ce},J(Re.attrs),Ue),(Re.children||[]).map(function(We,lt){return Ee(We,"".concat(Ce,"-").concat(Re.tag,"-").concat(lt))})):se.default.createElement(Re.tag,me({key:Ce},J(Re.attrs)),(Re.children||[]).map(function(We,lt){return Ee(We,"".concat(Ce,"-").concat(Re.tag,"-").concat(lt))}))}function tt(Re){return(0,W.generate)(Re)[0]}function Je(Re){return Re?Array.isArray(Re)?Re:[Re]:[]}var wt={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},pt=`
.anticon {
  display: inline-flex;
  alignItems: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,yt=function(Re){var Ce=(0,se.useContext)(ue.default),Ue=Ce.csp,We=Ce.prefixCls,lt=pt;We&&(lt=lt.replace(/anticon/g,We)),(0,se.useEffect)(function(){var tn=Re.current,Le=(0,he.getShadowRoot)(tn);(0,E.updateCSS)(lt,"@ant-design-icons",{prepend:!0,csp:Ue,attachTo:Le})},[])}},98129:function(bt,G,L){"use strict";var K=L(60690);bt.exports=function(he){he=he||{};var ee=he.reporter,se=K.getOption(he,"async",!0),ue=K.getOption(he,"auto",!0);ue&&!se&&(ee&&ee.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),se=!0);var be=W(),oe,Ge=!1;function te(tt,Je){!Ge&&ue&&se&&be.size()===0&&$(),be.add(tt,Je)}function me(){for(Ge=!0;be.size();){var tt=be;be=W(),tt.process()}Ge=!1}function Pe(tt){Ge||(tt===void 0&&(tt=se),oe&&(J(oe),oe=null),tt?$():me())}function $(){oe=Ee(me)}function le(){be={},batchSize=0,topLevel=0,bottomLevel=0}function J(tt){var Je=clearTimeout;return Je(tt)}function Ee(tt){var Je=function(wt){return setTimeout(wt,0)};return Je(tt)}return{add:te,force:Pe}};function W(){var E={},he=0,ee=0,se=0;function ue(Ge,te){te||(te=Ge,Ge=0),Ge>ee?ee=Ge:Ge<se&&(se=Ge),E[Ge]||(E[Ge]=[]),E[Ge].push(te),he++}function be(){for(var Ge=se;Ge<=ee;Ge++)for(var te=E[Ge],me=0;me<te.length;me++){var Pe=te[me];Pe()}}function oe(){return he}return{add:ue,process:be,size:oe}}},60690:function(bt){"use strict";var G=bt.exports={};G.getOption=L;function L(K,W,E){var he=K[W];return he==null&&E!==void 0?E:he}},8874:function(bt){"use strict";bt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(bt,G,L){var K=L(8874),W=L(86851),E=Object.hasOwnProperty,he=Object.create(null);for(var ee in K)E.call(K,ee)&&(he[K[ee]]=ee);var se=bt.exports={to:{},get:{}};se.get=function(oe){var Ge=oe.substring(0,3).toLowerCase(),te,me;switch(Ge){case"hsl":te=se.get.hsl(oe),me="hsl";break;case"hwb":te=se.get.hwb(oe),me="hwb";break;default:te=se.get.rgb(oe),me="rgb";break}return te?{model:me,value:te}:null},se.get.rgb=function(oe){if(!oe)return null;var Ge=/^#([a-f0-9]{3,4})$/i,te=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,me=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Pe=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,$=/^(\w+)$/,le=[0,0,0,1],J,Ee,tt;if(J=oe.match(te)){for(tt=J[2],J=J[1],Ee=0;Ee<3;Ee++){var Je=Ee*2;le[Ee]=parseInt(J.slice(Je,Je+2),16)}tt&&(le[3]=parseInt(tt,16)/255)}else if(J=oe.match(Ge)){for(J=J[1],tt=J[3],Ee=0;Ee<3;Ee++)le[Ee]=parseInt(J[Ee]+J[Ee],16);tt&&(le[3]=parseInt(tt+tt,16)/255)}else if(J=oe.match(me)){for(Ee=0;Ee<3;Ee++)le[Ee]=parseInt(J[Ee+1],0);J[4]&&(J[5]?le[3]=parseFloat(J[4])*.01:le[3]=parseFloat(J[4]))}else if(J=oe.match(Pe)){for(Ee=0;Ee<3;Ee++)le[Ee]=Math.round(parseFloat(J[Ee+1])*2.55);J[4]&&(J[5]?le[3]=parseFloat(J[4])*.01:le[3]=parseFloat(J[4]))}else return(J=oe.match($))?J[1]==="transparent"?[0,0,0,0]:E.call(K,J[1])?(le=K[J[1]],le[3]=1,le):null:null;for(Ee=0;Ee<3;Ee++)le[Ee]=ue(le[Ee],0,255);return le[3]=ue(le[3],0,1),le},se.get.hsl=function(oe){if(!oe)return null;var Ge=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,te=oe.match(Ge);if(te){var me=parseFloat(te[4]),Pe=(parseFloat(te[1])%360+360)%360,$=ue(parseFloat(te[2]),0,100),le=ue(parseFloat(te[3]),0,100),J=ue(isNaN(me)?1:me,0,1);return[Pe,$,le,J]}return null},se.get.hwb=function(oe){if(!oe)return null;var Ge=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,te=oe.match(Ge);if(te){var me=parseFloat(te[4]),Pe=(parseFloat(te[1])%360+360)%360,$=ue(parseFloat(te[2]),0,100),le=ue(parseFloat(te[3]),0,100),J=ue(isNaN(me)?1:me,0,1);return[Pe,$,le,J]}return null},se.to.hex=function(){var oe=W(arguments);return"#"+be(oe[0])+be(oe[1])+be(oe[2])+(oe[3]<1?be(Math.round(oe[3]*255)):"")},se.to.rgb=function(){var oe=W(arguments);return oe.length<4||oe[3]===1?"rgb("+Math.round(oe[0])+", "+Math.round(oe[1])+", "+Math.round(oe[2])+")":"rgba("+Math.round(oe[0])+", "+Math.round(oe[1])+", "+Math.round(oe[2])+", "+oe[3]+")"},se.to.rgb.percent=function(){var oe=W(arguments),Ge=Math.round(oe[0]/255*100),te=Math.round(oe[1]/255*100),me=Math.round(oe[2]/255*100);return oe.length<4||oe[3]===1?"rgb("+Ge+"%, "+te+"%, "+me+"%)":"rgba("+Ge+"%, "+te+"%, "+me+"%, "+oe[3]+")"},se.to.hsl=function(){var oe=W(arguments);return oe.length<4||oe[3]===1?"hsl("+oe[0]+", "+oe[1]+"%, "+oe[2]+"%)":"hsla("+oe[0]+", "+oe[1]+"%, "+oe[2]+"%, "+oe[3]+")"},se.to.hwb=function(){var oe=W(arguments),Ge="";return oe.length>=4&&oe[3]!==1&&(Ge=", "+oe[3]),"hwb("+oe[0]+", "+oe[1]+"%, "+oe[2]+"%"+Ge+")"},se.to.keyword=function(oe){return he[oe.slice(0,3)]};function ue(oe,Ge,te){return Math.min(Math.max(Ge,oe),te)}function be(oe){var Ge=Math.round(oe).toString(16).toUpperCase();return Ge.length<2?"0"+Ge:Ge}},37620:function(bt,G,L){"use strict";L.d(G,{ZP:function(){return wt},B8:function(){return Ce}});function K(Ye,Lt,xt){Ye.prototype=Lt.prototype=xt,xt.constructor=Ye}function W(Ye,Lt){var xt=Object.create(Ye.prototype);for(var Ie in Lt)xt[Ie]=Lt[Ie];return xt}function E(){}var he=.7,ee=1/he,se="\\s*([+-]?\\d+)\\s*",ue="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",be="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oe=/^#([0-9a-f]{3,8})$/,Ge=new RegExp("^rgb\\("+[se,se,se]+"\\)$"),te=new RegExp("^rgb\\("+[be,be,be]+"\\)$"),me=new RegExp("^rgba\\("+[se,se,se,ue]+"\\)$"),Pe=new RegExp("^rgba\\("+[be,be,be,ue]+"\\)$"),$=new RegExp("^hsl\\("+[ue,be,be]+"\\)$"),le=new RegExp("^hsla\\("+[ue,be,be,ue]+"\\)$"),J={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};K(E,wt,{copy:function(Ye){return Object.assign(new this.constructor,this,Ye)},displayable:function(){return this.rgb().displayable()},hex:Ee,formatHex:Ee,formatHsl:tt,formatRgb:Je,toString:Je});function Ee(){return this.rgb().formatHex()}function tt(){return _t(this).formatHsl()}function Je(){return this.rgb().formatRgb()}function wt(Ye){var Lt,xt;return Ye=(Ye+"").trim().toLowerCase(),(Lt=oe.exec(Ye))?(xt=Lt[1].length,Lt=parseInt(Lt[1],16),xt===6?pt(Lt):xt===3?new Ue(Lt>>8&15|Lt>>4&240,Lt>>4&15|Lt&240,(Lt&15)<<4|Lt&15,1):xt===8?yt(Lt>>24&255,Lt>>16&255,Lt>>8&255,(Lt&255)/255):xt===4?yt(Lt>>12&15|Lt>>8&240,Lt>>8&15|Lt>>4&240,Lt>>4&15|Lt&240,((Lt&15)<<4|Lt&15)/255):null):(Lt=Ge.exec(Ye))?new Ue(Lt[1],Lt[2],Lt[3],1):(Lt=te.exec(Ye))?new Ue(Lt[1]*255/100,Lt[2]*255/100,Lt[3]*255/100,1):(Lt=me.exec(Ye))?yt(Lt[1],Lt[2],Lt[3],Lt[4]):(Lt=Pe.exec(Ye))?yt(Lt[1]*255/100,Lt[2]*255/100,Lt[3]*255/100,Lt[4]):(Lt=$.exec(Ye))?Le(Lt[1],Lt[2]/100,Lt[3]/100,1):(Lt=le.exec(Ye))?Le(Lt[1],Lt[2]/100,Lt[3]/100,Lt[4]):J.hasOwnProperty(Ye)?pt(J[Ye]):Ye==="transparent"?new Ue(NaN,NaN,NaN,0):null}function pt(Ye){return new Ue(Ye>>16&255,Ye>>8&255,Ye&255,1)}function yt(Ye,Lt,xt,Ie){return Ie<=0&&(Ye=Lt=xt=NaN),new Ue(Ye,Lt,xt,Ie)}function Re(Ye){return Ye instanceof E||(Ye=wt(Ye)),Ye?(Ye=Ye.rgb(),new Ue(Ye.r,Ye.g,Ye.b,Ye.opacity)):new Ue}function Ce(Ye,Lt,xt,Ie){return arguments.length===1?Re(Ye):new Ue(Ye,Lt,xt,Ie==null?1:Ie)}function Ue(Ye,Lt,xt,Ie){this.r=+Ye,this.g=+Lt,this.b=+xt,this.opacity=+Ie}K(Ue,Ce,W(E,{brighter:function(Ye){return Ye=Ye==null?ee:Math.pow(ee,Ye),new Ue(this.r*Ye,this.g*Ye,this.b*Ye,this.opacity)},darker:function(Ye){return Ye=Ye==null?he:Math.pow(he,Ye),new Ue(this.r*Ye,this.g*Ye,this.b*Ye,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:We,formatHex:We,formatRgb:lt,toString:lt}));function We(){return"#"+tn(this.r)+tn(this.g)+tn(this.b)}function lt(){var Ye=this.opacity;return Ye=isNaN(Ye)?1:Math.max(0,Math.min(1,Ye)),(Ye===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ye===1?")":", "+Ye+")")}function tn(Ye){return Ye=Math.max(0,Math.min(255,Math.round(Ye)||0)),(Ye<16?"0":"")+Ye.toString(16)}function Le(Ye,Lt,xt,Ie){return Ie<=0?Ye=Lt=xt=NaN:xt<=0||xt>=1?Ye=Lt=NaN:Lt<=0&&(Ye=NaN),new nt(Ye,Lt,xt,Ie)}function _t(Ye){if(Ye instanceof nt)return new nt(Ye.h,Ye.s,Ye.l,Ye.opacity);if(Ye instanceof E||(Ye=wt(Ye)),!Ye)return new nt;if(Ye instanceof nt)return Ye;Ye=Ye.rgb();var Lt=Ye.r/255,xt=Ye.g/255,Ie=Ye.b/255,Gt=Math.min(Lt,xt,Ie),gn=Math.max(Lt,xt,Ie),Tn=NaN,sr=gn-Gt,nr=(gn+Gt)/2;return sr?(Lt===gn?Tn=(xt-Ie)/sr+(xt<Ie)*6:xt===gn?Tn=(Ie-Lt)/sr+2:Tn=(Lt-xt)/sr+4,sr/=nr<.5?gn+Gt:2-gn-Gt,Tn*=60):sr=nr>0&&nr<1?0:Tn,new nt(Tn,sr,nr,Ye.opacity)}function Me(Ye,Lt,xt,Ie){return arguments.length===1?_t(Ye):new nt(Ye,Lt,xt,Ie==null?1:Ie)}function nt(Ye,Lt,xt,Ie){this.h=+Ye,this.s=+Lt,this.l=+xt,this.opacity=+Ie}K(nt,Me,W(E,{brighter:function(Ye){return Ye=Ye==null?ee:Math.pow(ee,Ye),new nt(this.h,this.s,this.l*Ye,this.opacity)},darker:function(Ye){return Ye=Ye==null?he:Math.pow(he,Ye),new nt(this.h,this.s,this.l*Ye,this.opacity)},rgb:function(){var Ye=this.h%360+(this.h<0)*360,Lt=isNaN(Ye)||isNaN(this.s)?0:this.s,xt=this.l,Ie=xt+(xt<.5?xt:1-xt)*Lt,Gt=2*xt-Ie;return new Ue(qe(Ye>=240?Ye-240:Ye+120,Gt,Ie),qe(Ye,Gt,Ie),qe(Ye<120?Ye+240:Ye-120,Gt,Ie),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ye=this.opacity;return Ye=isNaN(Ye)?1:Math.max(0,Math.min(1,Ye)),(Ye===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ye===1?")":", "+Ye+")")}}));function qe(Ye,Lt,xt){return(Ye<60?Lt+(xt-Lt)*Ye/60:Ye<180?xt:Ye<240?Lt+(xt-Lt)*(240-Ye)/60:Lt)*255}},9187:function(bt){"use strict";bt.exports=G,bt.exports.default=G;function G(Me,nt,qe){qe=qe||2;var Ye=nt&&nt.length,Lt=Ye?nt[0]*qe:Me.length,xt=L(Me,0,Lt,qe,!0),Ie=[];if(!xt||xt.next===xt.prev)return Ie;var Gt,gn,Tn,sr,nr,Ft,Kt;if(Ye&&(xt=ue(Me,nt,xt,qe)),Me.length>80*qe){Gt=Tn=Me[0],gn=sr=Me[1];for(var fn=qe;fn<Lt;fn+=qe)nr=Me[fn],Ft=Me[fn+1],nr<Gt&&(Gt=nr),Ft<gn&&(gn=Ft),nr>Tn&&(Tn=nr),Ft>sr&&(sr=Ft);Kt=Math.max(Tn-Gt,sr-gn),Kt=Kt!==0?32767/Kt:0}return W(xt,Ie,qe,Gt,gn,Kt,0),Ie}function L(Me,nt,qe,Ye,Lt){var xt,Ie;if(Lt===_t(Me,nt,qe,Ye)>0)for(xt=nt;xt<qe;xt+=Ye)Ie=lt(xt,Me[xt],Me[xt+1],Ie);else for(xt=qe-Ye;xt>=nt;xt-=Ye)Ie=lt(xt,Me[xt],Me[xt+1],Ie);return Ie&&Je(Ie,Ie.next)&&(tn(Ie),Ie=Ie.next),Ie}function K(Me,nt){if(!Me)return Me;nt||(nt=Me);var qe=Me,Ye;do if(Ye=!1,!qe.steiner&&(Je(qe,qe.next)||tt(qe.prev,qe,qe.next)===0)){if(tn(qe),qe=nt=qe.prev,qe===qe.next)break;Ye=!0}else qe=qe.next;while(Ye||qe!==nt);return nt}function W(Me,nt,qe,Ye,Lt,xt,Ie){if(Me){!Ie&&xt&&me(Me,Ye,Lt,xt);for(var Gt=Me,gn,Tn;Me.prev!==Me.next;){if(gn=Me.prev,Tn=Me.next,xt?he(Me,Ye,Lt,xt):E(Me)){nt.push(gn.i/qe|0),nt.push(Me.i/qe|0),nt.push(Tn.i/qe|0),tn(Me),Me=Tn.next,Gt=Tn.next;continue}if(Me=Tn,Me===Gt){Ie?Ie===1?(Me=ee(K(Me),nt,qe),W(Me,nt,qe,Ye,Lt,xt,2)):Ie===2&&se(Me,nt,qe,Ye,Lt,xt):W(K(Me),nt,qe,Ye,Lt,xt,1);break}}}}function E(Me){var nt=Me.prev,qe=Me,Ye=Me.next;if(tt(nt,qe,Ye)>=0)return!1;for(var Lt=nt.x,xt=qe.x,Ie=Ye.x,Gt=nt.y,gn=qe.y,Tn=Ye.y,sr=Lt<xt?Lt<Ie?Lt:Ie:xt<Ie?xt:Ie,nr=Gt<gn?Gt<Tn?Gt:Tn:gn<Tn?gn:Tn,Ft=Lt>xt?Lt>Ie?Lt:Ie:xt>Ie?xt:Ie,Kt=Gt>gn?Gt>Tn?Gt:Tn:gn>Tn?gn:Tn,fn=Ye.next;fn!==nt;){if(fn.x>=sr&&fn.x<=Ft&&fn.y>=nr&&fn.y<=Kt&&J(Lt,Gt,xt,gn,Ie,Tn,fn.x,fn.y)&&tt(fn.prev,fn,fn.next)>=0)return!1;fn=fn.next}return!0}function he(Me,nt,qe,Ye){var Lt=Me.prev,xt=Me,Ie=Me.next;if(tt(Lt,xt,Ie)>=0)return!1;for(var Gt=Lt.x,gn=xt.x,Tn=Ie.x,sr=Lt.y,nr=xt.y,Ft=Ie.y,Kt=Gt<gn?Gt<Tn?Gt:Tn:gn<Tn?gn:Tn,fn=sr<nr?sr<Ft?sr:Ft:nr<Ft?nr:Ft,Gn=Gt>gn?Gt>Tn?Gt:Tn:gn>Tn?gn:Tn,on=sr>nr?sr>Ft?sr:Ft:nr>Ft?nr:Ft,Pt=$(Kt,fn,nt,qe,Ye),zt=$(Gn,on,nt,qe,Ye),ze=Me.prevZ,rt=Me.nextZ;ze&&ze.z>=Pt&&rt&&rt.z<=zt;){if(ze.x>=Kt&&ze.x<=Gn&&ze.y>=fn&&ze.y<=on&&ze!==Lt&&ze!==Ie&&J(Gt,sr,gn,nr,Tn,Ft,ze.x,ze.y)&&tt(ze.prev,ze,ze.next)>=0||(ze=ze.prevZ,rt.x>=Kt&&rt.x<=Gn&&rt.y>=fn&&rt.y<=on&&rt!==Lt&&rt!==Ie&&J(Gt,sr,gn,nr,Tn,Ft,rt.x,rt.y)&&tt(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;ze&&ze.z>=Pt;){if(ze.x>=Kt&&ze.x<=Gn&&ze.y>=fn&&ze.y<=on&&ze!==Lt&&ze!==Ie&&J(Gt,sr,gn,nr,Tn,Ft,ze.x,ze.y)&&tt(ze.prev,ze,ze.next)>=0)return!1;ze=ze.prevZ}for(;rt&&rt.z<=zt;){if(rt.x>=Kt&&rt.x<=Gn&&rt.y>=fn&&rt.y<=on&&rt!==Lt&&rt!==Ie&&J(Gt,sr,gn,nr,Tn,Ft,rt.x,rt.y)&&tt(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function ee(Me,nt,qe){var Ye=Me;do{var Lt=Ye.prev,xt=Ye.next.next;!Je(Lt,xt)&&wt(Lt,Ye,Ye.next,xt)&&Ce(Lt,xt)&&Ce(xt,Lt)&&(nt.push(Lt.i/qe|0),nt.push(Ye.i/qe|0),nt.push(xt.i/qe|0),tn(Ye),tn(Ye.next),Ye=Me=xt),Ye=Ye.next}while(Ye!==Me);return K(Ye)}function se(Me,nt,qe,Ye,Lt,xt){var Ie=Me;do{for(var Gt=Ie.next.next;Gt!==Ie.prev;){if(Ie.i!==Gt.i&&Ee(Ie,Gt)){var gn=We(Ie,Gt);Ie=K(Ie,Ie.next),gn=K(gn,gn.next),W(Ie,nt,qe,Ye,Lt,xt,0),W(gn,nt,qe,Ye,Lt,xt,0);return}Gt=Gt.next}Ie=Ie.next}while(Ie!==Me)}function ue(Me,nt,qe,Ye){var Lt=[],xt,Ie,Gt,gn,Tn;for(xt=0,Ie=nt.length;xt<Ie;xt++)Gt=nt[xt]*Ye,gn=xt<Ie-1?nt[xt+1]*Ye:Me.length,Tn=L(Me,Gt,gn,Ye,!1),Tn===Tn.next&&(Tn.steiner=!0),Lt.push(le(Tn));for(Lt.sort(be),xt=0;xt<Lt.length;xt++)qe=oe(Lt[xt],qe);return qe}function be(Me,nt){return Me.x-nt.x}function oe(Me,nt){var qe=Ge(Me,nt);if(!qe)return nt;var Ye=We(qe,Me);return K(Ye,Ye.next),K(qe,qe.next)}function Ge(Me,nt){var qe=nt,Ye=Me.x,Lt=Me.y,xt=-1/0,Ie;do{if(Lt<=qe.y&&Lt>=qe.next.y&&qe.next.y!==qe.y){var Gt=qe.x+(Lt-qe.y)*(qe.next.x-qe.x)/(qe.next.y-qe.y);if(Gt<=Ye&&Gt>xt&&(xt=Gt,Ie=qe.x<qe.next.x?qe:qe.next,Gt===Ye))return Ie}qe=qe.next}while(qe!==nt);if(!Ie)return null;var gn=Ie,Tn=Ie.x,sr=Ie.y,nr=1/0,Ft;qe=Ie;do Ye>=qe.x&&qe.x>=Tn&&Ye!==qe.x&&J(Lt<sr?Ye:xt,Lt,Tn,sr,Lt<sr?xt:Ye,Lt,qe.x,qe.y)&&(Ft=Math.abs(Lt-qe.y)/(Ye-qe.x),Ce(qe,Me)&&(Ft<nr||Ft===nr&&(qe.x>Ie.x||qe.x===Ie.x&&te(Ie,qe)))&&(Ie=qe,nr=Ft)),qe=qe.next;while(qe!==gn);return Ie}function te(Me,nt){return tt(Me.prev,Me,nt.prev)<0&&tt(nt.next,Me,Me.next)<0}function me(Me,nt,qe,Ye){var Lt=Me;do Lt.z===0&&(Lt.z=$(Lt.x,Lt.y,nt,qe,Ye)),Lt.prevZ=Lt.prev,Lt.nextZ=Lt.next,Lt=Lt.next;while(Lt!==Me);Lt.prevZ.nextZ=null,Lt.prevZ=null,Pe(Lt)}function Pe(Me){var nt,qe,Ye,Lt,xt,Ie,Gt,gn,Tn=1;do{for(qe=Me,Me=null,xt=null,Ie=0;qe;){for(Ie++,Ye=qe,Gt=0,nt=0;nt<Tn&&(Gt++,Ye=Ye.nextZ,!!Ye);nt++);for(gn=Tn;Gt>0||gn>0&&Ye;)Gt!==0&&(gn===0||!Ye||qe.z<=Ye.z)?(Lt=qe,qe=qe.nextZ,Gt--):(Lt=Ye,Ye=Ye.nextZ,gn--),xt?xt.nextZ=Lt:Me=Lt,Lt.prevZ=xt,xt=Lt;qe=Ye}xt.nextZ=null,Tn*=2}while(Ie>1);return Me}function $(Me,nt,qe,Ye,Lt){return Me=(Me-qe)*Lt|0,nt=(nt-Ye)*Lt|0,Me=(Me|Me<<8)&16711935,Me=(Me|Me<<4)&252645135,Me=(Me|Me<<2)&858993459,Me=(Me|Me<<1)&1431655765,nt=(nt|nt<<8)&16711935,nt=(nt|nt<<4)&252645135,nt=(nt|nt<<2)&858993459,nt=(nt|nt<<1)&1431655765,Me|nt<<1}function le(Me){var nt=Me,qe=Me;do(nt.x<qe.x||nt.x===qe.x&&nt.y<qe.y)&&(qe=nt),nt=nt.next;while(nt!==Me);return qe}function J(Me,nt,qe,Ye,Lt,xt,Ie,Gt){return(Lt-Ie)*(nt-Gt)>=(Me-Ie)*(xt-Gt)&&(Me-Ie)*(Ye-Gt)>=(qe-Ie)*(nt-Gt)&&(qe-Ie)*(xt-Gt)>=(Lt-Ie)*(Ye-Gt)}function Ee(Me,nt){return Me.next.i!==nt.i&&Me.prev.i!==nt.i&&!Re(Me,nt)&&(Ce(Me,nt)&&Ce(nt,Me)&&Ue(Me,nt)&&(tt(Me.prev,Me,nt.prev)||tt(Me,nt.prev,nt))||Je(Me,nt)&&tt(Me.prev,Me,Me.next)>0&&tt(nt.prev,nt,nt.next)>0)}function tt(Me,nt,qe){return(nt.y-Me.y)*(qe.x-nt.x)-(nt.x-Me.x)*(qe.y-nt.y)}function Je(Me,nt){return Me.x===nt.x&&Me.y===nt.y}function wt(Me,nt,qe,Ye){var Lt=yt(tt(Me,nt,qe)),xt=yt(tt(Me,nt,Ye)),Ie=yt(tt(qe,Ye,Me)),Gt=yt(tt(qe,Ye,nt));return!!(Lt!==xt&&Ie!==Gt||Lt===0&&pt(Me,qe,nt)||xt===0&&pt(Me,Ye,nt)||Ie===0&&pt(qe,Me,Ye)||Gt===0&&pt(qe,nt,Ye))}function pt(Me,nt,qe){return nt.x<=Math.max(Me.x,qe.x)&&nt.x>=Math.min(Me.x,qe.x)&&nt.y<=Math.max(Me.y,qe.y)&&nt.y>=Math.min(Me.y,qe.y)}function yt(Me){return Me>0?1:Me<0?-1:0}function Re(Me,nt){var qe=Me;do{if(qe.i!==Me.i&&qe.next.i!==Me.i&&qe.i!==nt.i&&qe.next.i!==nt.i&&wt(qe,qe.next,Me,nt))return!0;qe=qe.next}while(qe!==Me);return!1}function Ce(Me,nt){return tt(Me.prev,Me,Me.next)<0?tt(Me,nt,Me.next)>=0&&tt(Me,Me.prev,nt)>=0:tt(Me,nt,Me.prev)<0||tt(Me,Me.next,nt)<0}function Ue(Me,nt){var qe=Me,Ye=!1,Lt=(Me.x+nt.x)/2,xt=(Me.y+nt.y)/2;do qe.y>xt!=qe.next.y>xt&&qe.next.y!==qe.y&&Lt<(qe.next.x-qe.x)*(xt-qe.y)/(qe.next.y-qe.y)+qe.x&&(Ye=!Ye),qe=qe.next;while(qe!==Me);return Ye}function We(Me,nt){var qe=new Le(Me.i,Me.x,Me.y),Ye=new Le(nt.i,nt.x,nt.y),Lt=Me.next,xt=nt.prev;return Me.next=nt,nt.prev=Me,qe.next=Lt,Lt.prev=qe,Ye.next=qe,qe.prev=Ye,xt.next=Ye,Ye.prev=xt,Ye}function lt(Me,nt,qe,Ye){var Lt=new Le(Me,nt,qe);return Ye?(Lt.next=Ye.next,Lt.prev=Ye,Ye.next.prev=Lt,Ye.next=Lt):(Lt.prev=Lt,Lt.next=Lt),Lt}function tn(Me){Me.next.prev=Me.prev,Me.prev.next=Me.next,Me.prevZ&&(Me.prevZ.nextZ=Me.nextZ),Me.nextZ&&(Me.nextZ.prevZ=Me.prevZ)}function Le(Me,nt,qe){this.i=Me,this.x=nt,this.y=qe,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}G.deviation=function(Me,nt,qe,Ye){var Lt=nt&&nt.length,xt=Lt?nt[0]*qe:Me.length,Ie=Math.abs(_t(Me,0,xt,qe));if(Lt)for(var Gt=0,gn=nt.length;Gt<gn;Gt++){var Tn=nt[Gt]*qe,sr=Gt<gn-1?nt[Gt+1]*qe:Me.length;Ie-=Math.abs(_t(Me,Tn,sr,qe))}var nr=0;for(Gt=0;Gt<Ye.length;Gt+=3){var Ft=Ye[Gt]*qe,Kt=Ye[Gt+1]*qe,fn=Ye[Gt+2]*qe;nr+=Math.abs((Me[Ft]-Me[fn])*(Me[Kt+1]-Me[Ft+1])-(Me[Ft]-Me[Kt])*(Me[fn+1]-Me[Ft+1]))}return Ie===0&&nr===0?0:Math.abs((nr-Ie)/Ie)};function _t(Me,nt,qe,Ye){for(var Lt=0,xt=nt,Ie=qe-Ye;xt<qe;xt+=Ye)Lt+=(Me[Ie]-Me[xt])*(Me[xt+1]+Me[Ie+1]),Ie=xt;return Lt}G.flatten=function(Me){for(var nt=Me[0][0].length,qe={vertices:[],holes:[],dimensions:nt},Ye=0,Lt=0;Lt<Me.length;Lt++){for(var xt=0;xt<Me[Lt].length;xt++)for(var Ie=0;Ie<nt;Ie++)qe.vertices.push(Me[Lt][xt][Ie]);Lt>0&&(Ye+=Me[Lt-1].length,qe.holes.push(Ye))}return qe}},2268:function(bt){"use strict";var G=bt.exports={};G.isIE=function(L){function K(){var E=navigator.userAgent.toLowerCase();return E.indexOf("msie")!==-1||E.indexOf("trident")!==-1||E.indexOf(" edge/")!==-1}if(!K())return!1;if(!L)return!0;var W=function(){var E,he=3,ee=document.createElement("div"),se=ee.getElementsByTagName("i");do ee.innerHTML="<!--[if gt IE "+ ++he+"]><i></i><![endif]-->";while(se[0]);return he>4?he:E}();return L===W},G.isLegacyOpera=function(){return!!window.opera}},17900:function(bt){"use strict";var G=bt.exports={};G.forEach=function(L,K){for(var W=0;W<L.length;W++){var E=K(L[W]);if(E)return E}}},58229:function(bt,G,L){"use strict";var K=L(2268);bt.exports=function(W){W=W||{};var E=W.reporter,he=W.batchProcessor,ee=W.stateHandler.getState;if(!E)throw new Error("Missing required dependency: reporter.");function se(te,me){function Pe(){me(te)}if(K.isIE(8))ee(te).object={proxy:Pe},te.attachEvent("onresize",Pe);else{var $=oe(te);if(!$)throw new Error("Element is not detectable by this strategy.");$.contentDocument.defaultView.addEventListener("resize",Pe)}}function ue(te){var me=W.important?" !important; ":"; ";return(te.join(me)+me).trim()}function be(te,me,Pe){Pe||(Pe=me,me=te,te=null),te=te||{};var $=te.debug;function le(J,Ee){var tt=ue(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),Je=!1,wt=window.getComputedStyle(J),pt=J.offsetWidth,yt=J.offsetHeight;ee(J).startSize={width:pt,height:yt};function Re(){function Ce(){if(wt.position==="static"){J.style.setProperty("position","relative",te.important?"important":"");var lt=function(tn,Le,_t,Me){function nt(Ye){return Ye.replace(/[^-\d\.]/g,"")}var qe=_t[Me];qe!=="auto"&&nt(qe)!=="0"&&(tn.warn("An element that is positioned static has style."+Me+"="+qe+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Me+" will be set to 0. Element: ",Le),Le.style.setProperty(Me,"0",te.important?"important":""))};lt(E,J,wt,"top"),lt(E,J,wt,"right"),lt(E,J,wt,"bottom"),lt(E,J,wt,"left")}}function Ue(){Je||Ce();function lt(Le,_t){if(!Le.contentDocument){var Me=ee(Le);Me.checkForObjectDocumentTimeoutId&&window.clearTimeout(Me.checkForObjectDocumentTimeoutId),Me.checkForObjectDocumentTimeoutId=setTimeout(function(){Me.checkForObjectDocumentTimeoutId=0,lt(Le,_t)},100);return}_t(Le.contentDocument)}var tn=this;lt(tn,function(_t){Ee(J)})}wt.position!==""&&(Ce(wt),Je=!0);var We=document.createElement("object");We.style.cssText=tt,We.tabIndex=-1,We.type="text/html",We.setAttribute("aria-hidden","true"),We.onload=Ue,K.isIE()||(We.data="about:blank"),ee(J)&&(J.appendChild(We),ee(J).object=We,K.isIE()&&(We.data="about:blank"))}he?he.add(Re):Re()}K.isIE(8)?Pe(me):le(me,Pe)}function oe(te){return ee(te).object}function Ge(te){if(ee(te)){var me=oe(te);me&&(K.isIE(8)?te.detachEvent("onresize",me.proxy):te.removeChild(me),ee(te).checkForObjectDocumentTimeoutId&&window.clearTimeout(ee(te).checkForObjectDocumentTimeoutId),delete ee(te).object)}}return{makeDetectable:be,addListener:se,uninstall:Ge}}},60787:function(bt,G,L){"use strict";var K=L(17900).forEach;bt.exports=function(W){W=W||{};var E=W.reporter,he=W.batchProcessor,ee=W.stateHandler.getState,se=W.stateHandler.hasState,ue=W.idHandler;if(!he)throw new Error("Missing required dependency: batchProcessor");if(!E)throw new Error("Missing required dependency: reporter.");var be=Pe(),oe="erd_scroll_detection_scrollbar_style",Ge="erd_scroll_detection_container";function te(Re){$(Re,oe,Ge)}te(window.document);function me(Re){var Ce=W.important?" !important; ":"; ";return(Re.join(Ce)+Ce).trim()}function Pe(){var Re=500,Ce=500,Ue=document.createElement("div");Ue.style.cssText=me(["position: absolute","width: "+Re*2+"px","height: "+Ce*2+"px","visibility: hidden","margin: 0","padding: 0"]);var We=document.createElement("div");We.style.cssText=me(["position: absolute","width: "+Re+"px","height: "+Ce+"px","overflow: scroll","visibility: none","top: "+-Re*3+"px","left: "+-Ce*3+"px","visibility: hidden","margin: 0","padding: 0"]),We.appendChild(Ue),document.body.insertBefore(We,document.body.firstChild);var lt=Re-We.clientWidth,tn=Ce-We.clientHeight;return document.body.removeChild(We),{width:lt,height:tn}}function $(Re,Ce,Ue){function We(_t,Me){Me=Me||function(qe){Re.head.appendChild(qe)};var nt=Re.createElement("style");return nt.innerHTML=_t,nt.id=Ce,Me(nt),nt}if(!Re.getElementById(Ce)){var lt=Ue+"_animation",tn=Ue+"_animation_active",Le=`/* Created by the element-resize-detector library. */
`;Le+="."+Ue+" > div::-webkit-scrollbar { "+me(["display: none"])+` }

`,Le+="."+tn+" { "+me(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+lt,"animation-name: "+lt])+` }
`,Le+="@-webkit-keyframes "+lt+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,Le+="@keyframes "+lt+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",We(Le)}}function le(Re){Re.className+=" "+Ge+"_animation_active"}function J(Re,Ce,Ue){if(Re.addEventListener)Re.addEventListener(Ce,Ue);else if(Re.attachEvent)Re.attachEvent("on"+Ce,Ue);else return E.error("[scroll] Don't know how to add event listeners.")}function Ee(Re,Ce,Ue){if(Re.removeEventListener)Re.removeEventListener(Ce,Ue);else if(Re.detachEvent)Re.detachEvent("on"+Ce,Ue);else return E.error("[scroll] Don't know how to remove event listeners.")}function tt(Re){return ee(Re).container.childNodes[0].childNodes[0].childNodes[0]}function Je(Re){return ee(Re).container.childNodes[0].childNodes[0].childNodes[1]}function wt(Re,Ce){var Ue=ee(Re).listeners;if(!Ue.push)throw new Error("Cannot add listener to an element that is not detectable.");ee(Re).listeners.push(Ce)}function pt(Re,Ce,Ue){Ue||(Ue=Ce,Ce=Re,Re=null),Re=Re||{};function We(){if(Re.debug){var Pt=Array.prototype.slice.call(arguments);if(Pt.unshift(ue.get(Ce),"Scroll: "),E.log.apply)E.log.apply(null,Pt);else for(var zt=0;zt<Pt.length;zt++)E.log(Pt[zt])}}function lt(Pt){function zt(ze){var rt=ze.getRootNode&&ze.getRootNode().contains(ze);return ze===ze.ownerDocument.body||ze.ownerDocument.body.contains(ze)||rt}return!zt(Pt)||window.getComputedStyle(Pt)===null}function tn(Pt){var zt=ee(Pt).container.childNodes[0],ze=window.getComputedStyle(zt);return!ze.width||ze.width.indexOf("px")===-1}function Le(){var Pt=window.getComputedStyle(Ce),zt={};return zt.position=Pt.position,zt.width=Ce.offsetWidth,zt.height=Ce.offsetHeight,zt.top=Pt.top,zt.right=Pt.right,zt.bottom=Pt.bottom,zt.left=Pt.left,zt.widthCSS=Pt.width,zt.heightCSS=Pt.height,zt}function _t(){var Pt=Le();ee(Ce).startSize={width:Pt.width,height:Pt.height},We("Element start size",ee(Ce).startSize)}function Me(){ee(Ce).listeners=[]}function nt(){if(We("storeStyle invoked."),!ee(Ce)){We("Aborting because element has been uninstalled");return}var Pt=Le();ee(Ce).style=Pt}function qe(Pt,zt,ze){ee(Pt).lastWidth=zt,ee(Pt).lastHeight=ze}function Ye(Pt){return tt(Pt).childNodes[0]}function Lt(){return 2*be.width+1}function xt(){return 2*be.height+1}function Ie(Pt){return Pt+10+Lt()}function Gt(Pt){return Pt+10+xt()}function gn(Pt){return Pt*2+Lt()}function Tn(Pt){return Pt*2+xt()}function sr(Pt,zt,ze){var rt=tt(Pt),jt=Je(Pt),U=Ie(zt),fe=Gt(ze),at=gn(zt),de=Tn(ze);rt.scrollLeft=U,rt.scrollTop=fe,jt.scrollLeft=at,jt.scrollTop=de}function nr(){var Pt=ee(Ce).container;if(!Pt){Pt=document.createElement("div"),Pt.className=Ge,Pt.style.cssText=me(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),ee(Ce).container=Pt,le(Pt),Ce.appendChild(Pt);var zt=function(){ee(Ce).onRendered&&ee(Ce).onRendered()};J(Pt,"animationstart",zt),ee(Ce).onAnimationStart=zt}return Pt}function Ft(){function Pt(){var Dn=ee(Ce).style;if(Dn.position==="static"){Ce.style.setProperty("position","relative",Re.important?"important":"");var Yn=function(dt,xe,Be,st){function Dt(Sn){return Sn.replace(/[^-\d\.]/g,"")}var Ot=Be[st];Ot!=="auto"&&Dt(Ot)!=="0"&&(dt.warn("An element that is positioned static has style."+st+"="+Ot+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+st+" will be set to 0. Element: ",xe),xe.style[st]=0)};Yn(E,Ce,Dn,"top"),Yn(E,Ce,Dn,"right"),Yn(E,Ce,Dn,"bottom"),Yn(E,Ce,Dn,"left")}}function zt(Dn,Yn,dt,xe){return Dn=Dn?Dn+"px":"0",Yn=Yn?Yn+"px":"0",dt=dt?dt+"px":"0",xe=xe?xe+"px":"0",["left: "+Dn,"top: "+Yn,"right: "+xe,"bottom: "+dt]}if(We("Injecting elements"),!ee(Ce)){We("Aborting because element has been uninstalled");return}Pt();var ze=ee(Ce).container;ze||(ze=nr());var rt=be.width,jt=be.height,U=me(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),fe=me(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(zt(-(1+rt),-(1+jt),-jt,-rt))),at=me(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),de=me(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),$t=me(["position: absolute","left: 0","top: 0"]),sn=me(["position: absolute","width: 200%","height: 200%"]),pn=document.createElement("div"),Nn=document.createElement("div"),Wn=document.createElement("div"),qn=document.createElement("div"),dn=document.createElement("div"),vt=document.createElement("div");pn.dir="ltr",pn.style.cssText=U,pn.className=Ge,Nn.className=Ge,Nn.style.cssText=fe,Wn.style.cssText=at,qn.style.cssText=$t,dn.style.cssText=de,vt.style.cssText=sn,Wn.appendChild(qn),dn.appendChild(vt),Nn.appendChild(Wn),Nn.appendChild(dn),pn.appendChild(Nn),ze.appendChild(pn);function It(){var Dn=ee(Ce);Dn&&Dn.onExpand?Dn.onExpand():We("Aborting expand scroll handler: element has been uninstalled")}function An(){var Dn=ee(Ce);Dn&&Dn.onShrink?Dn.onShrink():We("Aborting shrink scroll handler: element has been uninstalled")}J(Wn,"scroll",It),J(dn,"scroll",An),ee(Ce).onExpandScroll=It,ee(Ce).onShrinkScroll=An}function Kt(){function Pt(at,de,$t){var sn=Ye(at),pn=Ie(de),Nn=Gt($t);sn.style.setProperty("width",pn+"px",Re.important?"important":""),sn.style.setProperty("height",Nn+"px",Re.important?"important":"")}function zt(at){var de=Ce.offsetWidth,$t=Ce.offsetHeight,sn=de!==ee(Ce).lastWidth||$t!==ee(Ce).lastHeight;We("Storing current size",de,$t),qe(Ce,de,$t),he.add(0,function(){if(sn){if(!ee(Ce)){We("Aborting because element has been uninstalled");return}if(!ze()){We("Aborting because element container has not been initialized");return}if(Re.debug){var Nn=Ce.offsetWidth,Wn=Ce.offsetHeight;(Nn!==de||Wn!==$t)&&E.warn(ue.get(Ce),"Scroll: Size changed before updating detector elements.")}Pt(Ce,de,$t)}}),he.add(1,function(){if(!ee(Ce)){We("Aborting because element has been uninstalled");return}if(!ze()){We("Aborting because element container has not been initialized");return}sr(Ce,de,$t)}),sn&&at&&he.add(2,function(){if(!ee(Ce)){We("Aborting because element has been uninstalled");return}if(!ze()){We("Aborting because element container has not been initialized");return}at()})}function ze(){return!!ee(Ce).container}function rt(){function at(){return ee(Ce).lastNotifiedWidth===void 0}We("notifyListenersIfNeeded invoked");var de=ee(Ce);if(at()&&de.lastWidth===de.startSize.width&&de.lastHeight===de.startSize.height)return We("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(de.lastWidth===de.lastNotifiedWidth&&de.lastHeight===de.lastNotifiedHeight)return We("Not notifying: Size already notified");We("Current size not notified, notifying..."),de.lastNotifiedWidth=de.lastWidth,de.lastNotifiedHeight=de.lastHeight,K(ee(Ce).listeners,function($t){$t(Ce)})}function jt(){if(We("startanimation triggered."),tn(Ce)){We("Ignoring since element is still unrendered...");return}We("Element rendered.");var at=tt(Ce),de=Je(Ce);(at.scrollLeft===0||at.scrollTop===0||de.scrollLeft===0||de.scrollTop===0)&&(We("Scrollbars out of sync. Updating detector elements..."),zt(rt))}function U(){if(We("Scroll detected."),tn(Ce)){We("Scroll event fired while unrendered. Ignoring...");return}zt(rt)}if(We("registerListenersAndPositionElements invoked."),!ee(Ce)){We("Aborting because element has been uninstalled");return}ee(Ce).onRendered=jt,ee(Ce).onExpand=U,ee(Ce).onShrink=U;var fe=ee(Ce).style;Pt(Ce,fe.width,fe.height)}function fn(){if(We("finalizeDomMutation invoked."),!ee(Ce)){We("Aborting because element has been uninstalled");return}var Pt=ee(Ce).style;qe(Ce,Pt.width,Pt.height),sr(Ce,Pt.width,Pt.height)}function Gn(){Ue(Ce)}function on(){We("Installing..."),Me(),_t(),he.add(0,nt),he.add(1,Ft),he.add(2,Kt),he.add(3,fn),he.add(4,Gn)}We("Making detectable..."),lt(Ce)?(We("Element is detached"),nr(),We("Waiting until element is attached..."),ee(Ce).onRendered=function(){We("Element is now attached"),on()}):on()}function yt(Re){var Ce=ee(Re);Ce&&(Ce.onExpandScroll&&Ee(tt(Re),"scroll",Ce.onExpandScroll),Ce.onShrinkScroll&&Ee(Je(Re),"scroll",Ce.onShrinkScroll),Ce.onAnimationStart&&Ee(Ce.container,"animationstart",Ce.onAnimationStart),Ce.container&&Re.removeChild(Ce.container))}return{makeDetectable:pt,addListener:wt,uninstall:yt,initDocument:te}}},63844:function(bt,G,L){"use strict";var K=L(17900).forEach,W=L(68452),E=L(96199),he=L(75805),ee=L(79799),se=L(71724),ue=L(2268),be=L(98129),oe=L(21931),Ge=L(58229),te=L(60787);function me(J){return Array.isArray(J)||J.length!==void 0}function Pe(J){if(Array.isArray(J))return J;var Ee=[];return K(J,function(tt){Ee.push(tt)}),Ee}function $(J){return J&&J.nodeType===1}bt.exports=function(J){J=J||{};var Ee;if(J.idHandler)Ee={get:function(Ye){return J.idHandler.get(Ye,!0)},set:J.idHandler.set};else{var tt=he(),Je=ee({idGenerator:tt,stateHandler:oe});Ee=Je}var wt=J.reporter;if(!wt){var pt=wt===!1;wt=se(pt)}var yt=le(J,"batchProcessor",be({reporter:wt})),Re={};Re.callOnAdd=!!le(J,"callOnAdd",!0),Re.debug=!!le(J,"debug",!1);var Ce=E(Ee),Ue=W({stateHandler:oe}),We,lt=le(J,"strategy","object"),tn=le(J,"important",!1),Le={reporter:wt,batchProcessor:yt,stateHandler:oe,idHandler:Ee,important:tn};if(lt==="scroll"&&(ue.isLegacyOpera()?(wt.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),lt="object"):ue.isIE(9)&&(wt.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),lt="object")),lt==="scroll")We=te(Le);else if(lt==="object")We=Ge(Le);else throw new Error("Invalid strategy name: "+lt);var _t={};function Me(Ye,Lt,xt){function Ie(Ft){var Kt=Ce.get(Ft);K(Kt,function(Gn){Gn(Ft)})}function Gt(Ft,Kt,fn){Ce.add(Kt,fn),Ft&&fn(Kt)}if(xt||(xt=Lt,Lt=Ye,Ye={}),!Lt)throw new Error("At least one element required.");if(!xt)throw new Error("Listener required.");if($(Lt))Lt=[Lt];else if(me(Lt))Lt=Pe(Lt);else return wt.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var gn=0,Tn=le(Ye,"callOnAdd",Re.callOnAdd),sr=le(Ye,"onReady",function(){}),nr=le(Ye,"debug",Re.debug);K(Lt,function(Kt){oe.getState(Kt)||(oe.initState(Kt),Ee.set(Kt));var fn=Ee.get(Kt);if(nr&&wt.log("Attaching listener to element",fn,Kt),!Ue.isDetectable(Kt)){if(nr&&wt.log(fn,"Not detectable."),Ue.isBusy(Kt)){nr&&wt.log(fn,"System busy making it detectable"),Gt(Tn,Kt,xt),_t[fn]=_t[fn]||[],_t[fn].push(function(){gn++,gn===Lt.length&&sr()});return}return nr&&wt.log(fn,"Making detectable..."),Ue.markBusy(Kt,!0),We.makeDetectable({debug:nr,important:tn},Kt,function(on){if(nr&&wt.log(fn,"onElementDetectable"),oe.getState(on)){Ue.markAsDetectable(on),Ue.markBusy(on,!1),We.addListener(on,Ie),Gt(Tn,on,xt);var Pt=oe.getState(on);if(Pt&&Pt.startSize){var zt=on.offsetWidth,ze=on.offsetHeight;(Pt.startSize.width!==zt||Pt.startSize.height!==ze)&&Ie(on)}_t[fn]&&K(_t[fn],function(rt){rt()})}else nr&&wt.log(fn,"Element uninstalled before being detectable.");delete _t[fn],gn++,gn===Lt.length&&sr()})}nr&&wt.log(fn,"Already detecable, adding listener."),Gt(Tn,Kt,xt),gn++}),gn===Lt.length&&sr()}function nt(Ye){if(!Ye)return wt.error("At least one element is required.");if($(Ye))Ye=[Ye];else if(me(Ye))Ye=Pe(Ye);else return wt.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");K(Ye,function(Lt){Ce.removeAllListeners(Lt),We.uninstall(Lt),oe.cleanState(Lt)})}function qe(Ye){We.initDocument&&We.initDocument(Ye)}return{listenTo:Me,removeListener:Ce.removeListener,removeAllListeners:Ce.removeAllListeners,uninstall:nt,initDocument:qe}};function le(J,Ee,tt){var Je=J[Ee];return Je==null&&tt!==void 0?tt:Je}},68452:function(bt){"use strict";bt.exports=function(G){var L=G.stateHandler.getState;function K(ee){var se=L(ee);return se&&!!se.isDetectable}function W(ee){L(ee).isDetectable=!0}function E(ee){return!!L(ee).busy}function he(ee,se){L(ee).busy=!!se}return{isDetectable:K,markAsDetectable:W,isBusy:E,markBusy:he}}},75805:function(bt){"use strict";bt.exports=function(){var G=1;function L(){return G++}return{generate:L}}},79799:function(bt){"use strict";bt.exports=function(G){var L=G.idGenerator,K=G.stateHandler.getState;function W(he){var ee=K(he);return ee&&ee.id!==void 0?ee.id:null}function E(he){var ee=K(he);if(!ee)throw new Error("setId required the element to have a resize detection state.");var se=L.generate();return ee.id=se,se}return{get:W,set:E}}},96199:function(bt){"use strict";bt.exports=function(G){var L={};function K(ee){var se=G.get(ee);return se===void 0?[]:L[se]||[]}function W(ee,se){var ue=G.get(ee);L[ue]||(L[ue]=[]),L[ue].push(se)}function E(ee,se){for(var ue=K(ee),be=0,oe=ue.length;be<oe;++be)if(ue[be]===se){ue.splice(be,1);break}}function he(ee){var se=K(ee);se&&(se.length=0)}return{get:K,add:W,removeListener:E,removeAllListeners:he}}},71724:function(bt){"use strict";bt.exports=function(G){function L(){}var K={log:L,warn:L,error:L};if(!G&&window.console){var W=function(E,he){E[he]=function(){var se=console[he];if(se.apply)se.apply(console,arguments);else for(var ue=0;ue<arguments.length;ue++)se(arguments[ue])}};W(K,"log"),W(K,"warn"),W(K,"error")}return K}},21931:function(bt){"use strict";var G="_erd";function L(E){return E[G]={},K(E)}function K(E){return E[G]}function W(E){delete E[G]}bt.exports={initState:L,getState:K,cleanState:W}},26729:function(bt){"use strict";var G=Object.prototype.hasOwnProperty,L="~";function K(){}Object.create&&(K.prototype=Object.create(null),new K().__proto__||(L=!1));function W(se,ue,be){this.fn=se,this.context=ue,this.once=be||!1}function E(se,ue,be,oe,Ge){if(typeof be!="function")throw new TypeError("The listener must be a function");var te=new W(be,oe||se,Ge),me=L?L+ue:ue;return se._events[me]?se._events[me].fn?se._events[me]=[se._events[me],te]:se._events[me].push(te):(se._events[me]=te,se._eventsCount++),se}function he(se,ue){--se._eventsCount===0?se._events=new K:delete se._events[ue]}function ee(){this._events=new K,this._eventsCount=0}ee.prototype.eventNames=function(){var ue=[],be,oe;if(this._eventsCount===0)return ue;for(oe in be=this._events)G.call(be,oe)&&ue.push(L?oe.slice(1):oe);return Object.getOwnPropertySymbols?ue.concat(Object.getOwnPropertySymbols(be)):ue},ee.prototype.listeners=function(ue){var be=L?L+ue:ue,oe=this._events[be];if(!oe)return[];if(oe.fn)return[oe.fn];for(var Ge=0,te=oe.length,me=new Array(te);Ge<te;Ge++)me[Ge]=oe[Ge].fn;return me},ee.prototype.listenerCount=function(ue){var be=L?L+ue:ue,oe=this._events[be];return oe?oe.fn?1:oe.length:0},ee.prototype.emit=function(ue,be,oe,Ge,te,me){var Pe=L?L+ue:ue;if(!this._events[Pe])return!1;var $=this._events[Pe],le=arguments.length,J,Ee;if($.fn){switch($.once&&this.removeListener(ue,$.fn,void 0,!0),le){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,be),!0;case 3:return $.fn.call($.context,be,oe),!0;case 4:return $.fn.call($.context,be,oe,Ge),!0;case 5:return $.fn.call($.context,be,oe,Ge,te),!0;case 6:return $.fn.call($.context,be,oe,Ge,te,me),!0}for(Ee=1,J=new Array(le-1);Ee<le;Ee++)J[Ee-1]=arguments[Ee];$.fn.apply($.context,J)}else{var tt=$.length,Je;for(Ee=0;Ee<tt;Ee++)switch($[Ee].once&&this.removeListener(ue,$[Ee].fn,void 0,!0),le){case 1:$[Ee].fn.call($[Ee].context);break;case 2:$[Ee].fn.call($[Ee].context,be);break;case 3:$[Ee].fn.call($[Ee].context,be,oe);break;case 4:$[Ee].fn.call($[Ee].context,be,oe,Ge);break;default:if(!J)for(Je=1,J=new Array(le-1);Je<le;Je++)J[Je-1]=arguments[Je];$[Ee].fn.apply($[Ee].context,J)}}return!0},ee.prototype.on=function(ue,be,oe){return E(this,ue,be,oe,!1)},ee.prototype.once=function(ue,be,oe){return E(this,ue,be,oe,!0)},ee.prototype.removeListener=function(ue,be,oe,Ge){var te=L?L+ue:ue;if(!this._events[te])return this;if(!be)return he(this,te),this;var me=this._events[te];if(me.fn)me.fn===be&&(!Ge||me.once)&&(!oe||me.context===oe)&&he(this,te);else{for(var Pe=0,$=[],le=me.length;Pe<le;Pe++)(me[Pe].fn!==be||Ge&&!me[Pe].once||oe&&me[Pe].context!==oe)&&$.push(me[Pe]);$.length?this._events[te]=$.length===1?$[0]:$:he(this,te)}return this},ee.prototype.removeAllListeners=function(ue){var be;return ue?(be=L?L+ue:ue,this._events[be]&&he(this,be)):(this._events=new K,this._eventsCount=0),this},ee.prototype.off=ee.prototype.removeListener,ee.prototype.addListener=ee.prototype.on,ee.prefixed=L,ee.EventEmitter=ee,bt.exports=ee},69916:function(bt,G){(function(L,K){K(G)})(this,function(L){"use strict";function K(Pe,$,le,J){J=J||{};var Ee=J.maxIterations||100,tt=J.tolerance||1e-10,Je=Pe($),wt=Pe(le),pt=le-$;if(Je*wt>0)throw"Initial bisect points must have opposite signs";if(Je===0)return $;if(wt===0)return le;for(var yt=0;yt<Ee;++yt){pt/=2;var Re=$+pt,Ce=Pe(Re);if(Ce*Je>=0&&($=Re),Math.abs(pt)<tt||Ce===0)return Re}return $+pt}function W(Pe){for(var $=new Array(Pe),le=0;le<Pe;++le)$[le]=0;return $}function E(Pe,$){return W(Pe).map(function(){return W($)})}function he(Pe,$){for(var le=0,J=0;J<Pe.length;++J)le+=Pe[J]*$[J];return le}function ee(Pe){return Math.sqrt(he(Pe,Pe))}function se(Pe,$,le){for(var J=0;J<$.length;++J)Pe[J]=$[J]*le}function ue(Pe,$,le,J,Ee){for(var tt=0;tt<Pe.length;++tt)Pe[tt]=$*le[tt]+J*Ee[tt]}function be(Pe,$,le){le=le||{};var J=le.maxIterations||$.length*200,Ee=le.nonZeroDelta||1.05,tt=le.zeroDelta||.001,Je=le.minErrorDelta||1e-6,wt=le.minErrorDelta||1e-5,pt=le.rho!==void 0?le.rho:1,yt=le.chi!==void 0?le.chi:2,Re=le.psi!==void 0?le.psi:-.5,Ce=le.sigma!==void 0?le.sigma:.5,Ue,We=$.length,lt=new Array(We+1);lt[0]=$,lt[0].fx=Pe($),lt[0].id=0;for(var tn=0;tn<We;++tn){var Le=$.slice();Le[tn]=Le[tn]?Le[tn]*Ee:tt,lt[tn+1]=Le,lt[tn+1].fx=Pe(Le),lt[tn+1].id=tn+1}function _t(sr){for(var nr=0;nr<sr.length;nr++)lt[We][nr]=sr[nr];lt[We].fx=sr.fx}for(var Me=function(sr,nr){return sr.fx-nr.fx},nt=$.slice(),qe=$.slice(),Ye=$.slice(),Lt=$.slice(),xt=0;xt<J;++xt){if(lt.sort(Me),le.history){var Ie=lt.map(function(sr){var nr=sr.slice();return nr.fx=sr.fx,nr.id=sr.id,nr});Ie.sort(function(sr,nr){return sr.id-nr.id}),le.history.push({x:lt[0].slice(),fx:lt[0].fx,simplex:Ie})}for(Ue=0,tn=0;tn<We;++tn)Ue=Math.max(Ue,Math.abs(lt[0][tn]-lt[1][tn]));if(Math.abs(lt[0].fx-lt[We].fx)<Je&&Ue<wt)break;for(tn=0;tn<We;++tn){nt[tn]=0;for(var Gt=0;Gt<We;++Gt)nt[tn]+=lt[Gt][tn];nt[tn]/=We}var gn=lt[We];if(ue(qe,1+pt,nt,-pt,gn),qe.fx=Pe(qe),qe.fx<lt[0].fx)ue(Lt,1+yt,nt,-yt,gn),Lt.fx=Pe(Lt),Lt.fx<qe.fx?_t(Lt):_t(qe);else if(qe.fx>=lt[We-1].fx){var Tn=!1;if(qe.fx>gn.fx?(ue(Ye,1+Re,nt,-Re,gn),Ye.fx=Pe(Ye),Ye.fx<gn.fx?_t(Ye):Tn=!0):(ue(Ye,1-Re*pt,nt,Re*pt,gn),Ye.fx=Pe(Ye),Ye.fx<qe.fx?_t(Ye):Tn=!0),Tn){if(Ce>=1)break;for(tn=1;tn<lt.length;++tn)ue(lt[tn],1-Ce,lt[0],Ce,lt[tn]),lt[tn].fx=Pe(lt[tn])}}else _t(qe)}return lt.sort(Me),{fx:lt[0].fx,x:lt[0]}}function oe(Pe,$,le,J,Ee,tt,Je){var wt=le.fx,pt=he(le.fxprime,$),yt=wt,Re=wt,Ce=pt,Ue=0;Ee=Ee||1,tt=tt||1e-6,Je=Je||.1;function We(tn,Le,_t){for(var Me=0;Me<16;++Me)if(Ee=(tn+Le)/2,ue(J.x,1,le.x,Ee,$),yt=J.fx=Pe(J.x,J.fxprime),Ce=he(J.fxprime,$),yt>wt+tt*Ee*pt||yt>=_t)Le=Ee;else{if(Math.abs(Ce)<=-Je*pt)return Ee;Ce*(Le-tn)>=0&&(Le=tn),tn=Ee,_t=yt}return 0}for(var lt=0;lt<10;++lt){if(ue(J.x,1,le.x,Ee,$),yt=J.fx=Pe(J.x,J.fxprime),Ce=he(J.fxprime,$),yt>wt+tt*Ee*pt||lt&&yt>=Re)return We(Ue,Ee,Re);if(Math.abs(Ce)<=-Je*pt)return Ee;if(Ce>=0)return We(Ee,Ue,yt);Re=yt,Ue=Ee,Ee*=2}return Ee}function Ge(Pe,$,le){var J={x:$.slice(),fx:0,fxprime:$.slice()},Ee={x:$.slice(),fx:0,fxprime:$.slice()},tt=$.slice(),Je,wt,pt=1,yt;le=le||{},yt=le.maxIterations||$.length*20,J.fx=Pe(J.x,J.fxprime),Je=J.fxprime.slice(),se(Je,J.fxprime,-1);for(var Re=0;Re<yt;++Re){if(pt=oe(Pe,Je,J,Ee,pt),le.history&&le.history.push({x:J.x.slice(),fx:J.fx,fxprime:J.fxprime.slice(),alpha:pt}),!pt)se(Je,J.fxprime,-1);else{ue(tt,1,Ee.fxprime,-1,J.fxprime);var Ce=he(J.fxprime,J.fxprime),Ue=Math.max(0,he(tt,Ee.fxprime)/Ce);ue(Je,Ue,Je,-1,Ee.fxprime),wt=J,J=Ee,Ee=wt}if(ee(J.fxprime)<=1e-5)break}return le.history&&le.history.push({x:J.x.slice(),fx:J.fx,fxprime:J.fxprime.slice(),alpha:pt}),J}function te(Pe,$,le){le=le||{};for(var J=le.maxIterations||$.length*100,Ee=le.learnRate||.001,tt={x:$.slice(),fx:0,fxprime:$.slice()},Je=0;Je<J&&(tt.fx=Pe(tt.x,tt.fxprime),le.history&&le.history.push({x:tt.x.slice(),fx:tt.fx,fxprime:tt.fxprime.slice()}),ue(tt.x,1,tt.x,-Ee,tt.fxprime),!(ee(tt.fxprime)<=1e-5));++Je);return tt}function me(Pe,$,le){le=le||{};var J={x:$.slice(),fx:0,fxprime:$.slice()},Ee={x:$.slice(),fx:0,fxprime:$.slice()},tt=le.maxIterations||$.length*100,Je=le.learnRate||1,wt=$.slice(),pt=le.c1||.001,yt=le.c2||.1,Re,Ce=[];if(le.history){var Ue=Pe;Pe=function(lt,tn){return Ce.push(lt.slice()),Ue(lt,tn)}}J.fx=Pe(J.x,J.fxprime);for(var We=0;We<tt&&(se(wt,J.fxprime,-1),Je=oe(Pe,wt,J,Ee,Je,pt,yt),le.history&&(le.history.push({x:J.x.slice(),fx:J.fx,fxprime:J.fxprime.slice(),functionCalls:Ce,learnRate:Je,alpha:Je}),Ce=[]),Re=J,J=Ee,Ee=Re,!(Je===0||ee(J.fxprime)<1e-5));++We);return J}L.bisect=K,L.nelderMead=be,L.conjugateGradient=Ge,L.gradientDescent=te,L.gradientDescentLineSearch=me,L.zeros=W,L.zerosM=E,L.norm2=ee,L.weightedSum=ue,L.scale=se})},49685:function(bt,G,L){"use strict";L.d(G,{Ib:function(){return K},WT:function(){return W}});var K=1e-6,W=typeof Float32Array!="undefined"?Float32Array:Array,E=Math.random;function he(be){W=be}var ee=Math.PI/180;function se(be){return be*ee}function ue(be,oe){return Math.abs(be-oe)<=K*Math.max(1,Math.abs(be),Math.abs(oe))}Math.hypot||(Math.hypot=function(){for(var be=0,oe=arguments.length;oe--;)be+=arguments[oe]*arguments[oe];return Math.sqrt(be)})},85975:function(bt,G,L){"use strict";L.r(G),L.d(G,{add:function(){return fn},adjoint:function(){return Ge},clone:function(){return E},copy:function(){return he},create:function(){return W},determinant:function(){return te},equals:function(){return ze},exactEquals:function(){return zt},frob:function(){return Kt},fromQuat:function(){return nt},fromQuat2:function(){return We},fromRotation:function(){return pt},fromRotationTranslation:function(){return Ue},fromRotationTranslationScale:function(){return _t},fromRotationTranslationScaleOrigin:function(){return Me},fromScaling:function(){return wt},fromTranslation:function(){return Je},fromValues:function(){return ee},fromXRotation:function(){return yt},fromYRotation:function(){return Re},fromZRotation:function(){return Ce},frustum:function(){return qe},getRotation:function(){return Le},getScaling:function(){return tn},getTranslation:function(){return lt},identity:function(){return ue},invert:function(){return oe},lookAt:function(){return sr},mul:function(){return rt},multiply:function(){return me},multiplyScalar:function(){return on},multiplyScalarAndAdd:function(){return Pt},ortho:function(){return gn},orthoNO:function(){return Gt},orthoZO:function(){return Tn},perspective:function(){return Lt},perspectiveFromFieldOfView:function(){return Ie},perspectiveNO:function(){return Ye},perspectiveZO:function(){return xt},rotate:function(){return le},rotateX:function(){return J},rotateY:function(){return Ee},rotateZ:function(){return tt},scale:function(){return $},set:function(){return se},str:function(){return Ft},sub:function(){return jt},subtract:function(){return Gn},targetTo:function(){return nr},translate:function(){return Pe},transpose:function(){return be}});var K=L(49685);function W(){var U=new K.WT(16);return K.WT!=Float32Array&&(U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=0,U[12]=0,U[13]=0,U[14]=0),U[0]=1,U[5]=1,U[10]=1,U[15]=1,U}function E(U){var fe=new K.WT(16);return fe[0]=U[0],fe[1]=U[1],fe[2]=U[2],fe[3]=U[3],fe[4]=U[4],fe[5]=U[5],fe[6]=U[6],fe[7]=U[7],fe[8]=U[8],fe[9]=U[9],fe[10]=U[10],fe[11]=U[11],fe[12]=U[12],fe[13]=U[13],fe[14]=U[14],fe[15]=U[15],fe}function he(U,fe){return U[0]=fe[0],U[1]=fe[1],U[2]=fe[2],U[3]=fe[3],U[4]=fe[4],U[5]=fe[5],U[6]=fe[6],U[7]=fe[7],U[8]=fe[8],U[9]=fe[9],U[10]=fe[10],U[11]=fe[11],U[12]=fe[12],U[13]=fe[13],U[14]=fe[14],U[15]=fe[15],U}function ee(U,fe,at,de,$t,sn,pn,Nn,Wn,qn,dn,vt,It,An,Dn,Yn){var dt=new K.WT(16);return dt[0]=U,dt[1]=fe,dt[2]=at,dt[3]=de,dt[4]=$t,dt[5]=sn,dt[6]=pn,dt[7]=Nn,dt[8]=Wn,dt[9]=qn,dt[10]=dn,dt[11]=vt,dt[12]=It,dt[13]=An,dt[14]=Dn,dt[15]=Yn,dt}function se(U,fe,at,de,$t,sn,pn,Nn,Wn,qn,dn,vt,It,An,Dn,Yn,dt){return U[0]=fe,U[1]=at,U[2]=de,U[3]=$t,U[4]=sn,U[5]=pn,U[6]=Nn,U[7]=Wn,U[8]=qn,U[9]=dn,U[10]=vt,U[11]=It,U[12]=An,U[13]=Dn,U[14]=Yn,U[15]=dt,U}function ue(U){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function be(U,fe){if(U===fe){var at=fe[1],de=fe[2],$t=fe[3],sn=fe[6],pn=fe[7],Nn=fe[11];U[1]=fe[4],U[2]=fe[8],U[3]=fe[12],U[4]=at,U[6]=fe[9],U[7]=fe[13],U[8]=de,U[9]=sn,U[11]=fe[14],U[12]=$t,U[13]=pn,U[14]=Nn}else U[0]=fe[0],U[1]=fe[4],U[2]=fe[8],U[3]=fe[12],U[4]=fe[1],U[5]=fe[5],U[6]=fe[9],U[7]=fe[13],U[8]=fe[2],U[9]=fe[6],U[10]=fe[10],U[11]=fe[14],U[12]=fe[3],U[13]=fe[7],U[14]=fe[11],U[15]=fe[15];return U}function oe(U,fe){var at=fe[0],de=fe[1],$t=fe[2],sn=fe[3],pn=fe[4],Nn=fe[5],Wn=fe[6],qn=fe[7],dn=fe[8],vt=fe[9],It=fe[10],An=fe[11],Dn=fe[12],Yn=fe[13],dt=fe[14],xe=fe[15],Be=at*Nn-de*pn,st=at*Wn-$t*pn,Dt=at*qn-sn*pn,Ot=de*Wn-$t*Nn,Sn=de*qn-sn*Nn,er=$t*qn-sn*Wn,br=dn*Yn-vt*Dn,$n=dn*dt-It*Dn,Oe=dn*xe-An*Dn,we=vt*dt-It*Yn,Ve=vt*xe-An*Yn,it=It*xe-An*dt,At=Be*it-st*Ve+Dt*we+Ot*Oe-Sn*$n+er*br;return At?(At=1/At,U[0]=(Nn*it-Wn*Ve+qn*we)*At,U[1]=($t*Ve-de*it-sn*we)*At,U[2]=(Yn*er-dt*Sn+xe*Ot)*At,U[3]=(It*Sn-vt*er-An*Ot)*At,U[4]=(Wn*Oe-pn*it-qn*$n)*At,U[5]=(at*it-$t*Oe+sn*$n)*At,U[6]=(dt*Dt-Dn*er-xe*st)*At,U[7]=(dn*er-It*Dt+An*st)*At,U[8]=(pn*Ve-Nn*Oe+qn*br)*At,U[9]=(de*Oe-at*Ve-sn*br)*At,U[10]=(Dn*Sn-Yn*Dt+xe*Be)*At,U[11]=(vt*Dt-dn*Sn-An*Be)*At,U[12]=(Nn*$n-pn*we-Wn*br)*At,U[13]=(at*we-de*$n+$t*br)*At,U[14]=(Yn*st-Dn*Ot-dt*Be)*At,U[15]=(dn*Ot-vt*st+It*Be)*At,U):null}function Ge(U,fe){var at=fe[0],de=fe[1],$t=fe[2],sn=fe[3],pn=fe[4],Nn=fe[5],Wn=fe[6],qn=fe[7],dn=fe[8],vt=fe[9],It=fe[10],An=fe[11],Dn=fe[12],Yn=fe[13],dt=fe[14],xe=fe[15];return U[0]=Nn*(It*xe-An*dt)-vt*(Wn*xe-qn*dt)+Yn*(Wn*An-qn*It),U[1]=-(de*(It*xe-An*dt)-vt*($t*xe-sn*dt)+Yn*($t*An-sn*It)),U[2]=de*(Wn*xe-qn*dt)-Nn*($t*xe-sn*dt)+Yn*($t*qn-sn*Wn),U[3]=-(de*(Wn*An-qn*It)-Nn*($t*An-sn*It)+vt*($t*qn-sn*Wn)),U[4]=-(pn*(It*xe-An*dt)-dn*(Wn*xe-qn*dt)+Dn*(Wn*An-qn*It)),U[5]=at*(It*xe-An*dt)-dn*($t*xe-sn*dt)+Dn*($t*An-sn*It),U[6]=-(at*(Wn*xe-qn*dt)-pn*($t*xe-sn*dt)+Dn*($t*qn-sn*Wn)),U[7]=at*(Wn*An-qn*It)-pn*($t*An-sn*It)+dn*($t*qn-sn*Wn),U[8]=pn*(vt*xe-An*Yn)-dn*(Nn*xe-qn*Yn)+Dn*(Nn*An-qn*vt),U[9]=-(at*(vt*xe-An*Yn)-dn*(de*xe-sn*Yn)+Dn*(de*An-sn*vt)),U[10]=at*(Nn*xe-qn*Yn)-pn*(de*xe-sn*Yn)+Dn*(de*qn-sn*Nn),U[11]=-(at*(Nn*An-qn*vt)-pn*(de*An-sn*vt)+dn*(de*qn-sn*Nn)),U[12]=-(pn*(vt*dt-It*Yn)-dn*(Nn*dt-Wn*Yn)+Dn*(Nn*It-Wn*vt)),U[13]=at*(vt*dt-It*Yn)-dn*(de*dt-$t*Yn)+Dn*(de*It-$t*vt),U[14]=-(at*(Nn*dt-Wn*Yn)-pn*(de*dt-$t*Yn)+Dn*(de*Wn-$t*Nn)),U[15]=at*(Nn*It-Wn*vt)-pn*(de*It-$t*vt)+dn*(de*Wn-$t*Nn),U}function te(U){var fe=U[0],at=U[1],de=U[2],$t=U[3],sn=U[4],pn=U[5],Nn=U[6],Wn=U[7],qn=U[8],dn=U[9],vt=U[10],It=U[11],An=U[12],Dn=U[13],Yn=U[14],dt=U[15],xe=fe*pn-at*sn,Be=fe*Nn-de*sn,st=fe*Wn-$t*sn,Dt=at*Nn-de*pn,Ot=at*Wn-$t*pn,Sn=de*Wn-$t*Nn,er=qn*Dn-dn*An,br=qn*Yn-vt*An,$n=qn*dt-It*An,Oe=dn*Yn-vt*Dn,we=dn*dt-It*Dn,Ve=vt*dt-It*Yn;return xe*Ve-Be*we+st*Oe+Dt*$n-Ot*br+Sn*er}function me(U,fe,at){var de=fe[0],$t=fe[1],sn=fe[2],pn=fe[3],Nn=fe[4],Wn=fe[5],qn=fe[6],dn=fe[7],vt=fe[8],It=fe[9],An=fe[10],Dn=fe[11],Yn=fe[12],dt=fe[13],xe=fe[14],Be=fe[15],st=at[0],Dt=at[1],Ot=at[2],Sn=at[3];return U[0]=st*de+Dt*Nn+Ot*vt+Sn*Yn,U[1]=st*$t+Dt*Wn+Ot*It+Sn*dt,U[2]=st*sn+Dt*qn+Ot*An+Sn*xe,U[3]=st*pn+Dt*dn+Ot*Dn+Sn*Be,st=at[4],Dt=at[5],Ot=at[6],Sn=at[7],U[4]=st*de+Dt*Nn+Ot*vt+Sn*Yn,U[5]=st*$t+Dt*Wn+Ot*It+Sn*dt,U[6]=st*sn+Dt*qn+Ot*An+Sn*xe,U[7]=st*pn+Dt*dn+Ot*Dn+Sn*Be,st=at[8],Dt=at[9],Ot=at[10],Sn=at[11],U[8]=st*de+Dt*Nn+Ot*vt+Sn*Yn,U[9]=st*$t+Dt*Wn+Ot*It+Sn*dt,U[10]=st*sn+Dt*qn+Ot*An+Sn*xe,U[11]=st*pn+Dt*dn+Ot*Dn+Sn*Be,st=at[12],Dt=at[13],Ot=at[14],Sn=at[15],U[12]=st*de+Dt*Nn+Ot*vt+Sn*Yn,U[13]=st*$t+Dt*Wn+Ot*It+Sn*dt,U[14]=st*sn+Dt*qn+Ot*An+Sn*xe,U[15]=st*pn+Dt*dn+Ot*Dn+Sn*Be,U}function Pe(U,fe,at){var de=at[0],$t=at[1],sn=at[2],pn,Nn,Wn,qn,dn,vt,It,An,Dn,Yn,dt,xe;return fe===U?(U[12]=fe[0]*de+fe[4]*$t+fe[8]*sn+fe[12],U[13]=fe[1]*de+fe[5]*$t+fe[9]*sn+fe[13],U[14]=fe[2]*de+fe[6]*$t+fe[10]*sn+fe[14],U[15]=fe[3]*de+fe[7]*$t+fe[11]*sn+fe[15]):(pn=fe[0],Nn=fe[1],Wn=fe[2],qn=fe[3],dn=fe[4],vt=fe[5],It=fe[6],An=fe[7],Dn=fe[8],Yn=fe[9],dt=fe[10],xe=fe[11],U[0]=pn,U[1]=Nn,U[2]=Wn,U[3]=qn,U[4]=dn,U[5]=vt,U[6]=It,U[7]=An,U[8]=Dn,U[9]=Yn,U[10]=dt,U[11]=xe,U[12]=pn*de+dn*$t+Dn*sn+fe[12],U[13]=Nn*de+vt*$t+Yn*sn+fe[13],U[14]=Wn*de+It*$t+dt*sn+fe[14],U[15]=qn*de+An*$t+xe*sn+fe[15]),U}function $(U,fe,at){var de=at[0],$t=at[1],sn=at[2];return U[0]=fe[0]*de,U[1]=fe[1]*de,U[2]=fe[2]*de,U[3]=fe[3]*de,U[4]=fe[4]*$t,U[5]=fe[5]*$t,U[6]=fe[6]*$t,U[7]=fe[7]*$t,U[8]=fe[8]*sn,U[9]=fe[9]*sn,U[10]=fe[10]*sn,U[11]=fe[11]*sn,U[12]=fe[12],U[13]=fe[13],U[14]=fe[14],U[15]=fe[15],U}function le(U,fe,at,de){var $t=de[0],sn=de[1],pn=de[2],Nn=Math.hypot($t,sn,pn),Wn,qn,dn,vt,It,An,Dn,Yn,dt,xe,Be,st,Dt,Ot,Sn,er,br,$n,Oe,we,Ve,it,At,qt;return Nn<K.Ib?null:(Nn=1/Nn,$t*=Nn,sn*=Nn,pn*=Nn,Wn=Math.sin(at),qn=Math.cos(at),dn=1-qn,vt=fe[0],It=fe[1],An=fe[2],Dn=fe[3],Yn=fe[4],dt=fe[5],xe=fe[6],Be=fe[7],st=fe[8],Dt=fe[9],Ot=fe[10],Sn=fe[11],er=$t*$t*dn+qn,br=sn*$t*dn+pn*Wn,$n=pn*$t*dn-sn*Wn,Oe=$t*sn*dn-pn*Wn,we=sn*sn*dn+qn,Ve=pn*sn*dn+$t*Wn,it=$t*pn*dn+sn*Wn,At=sn*pn*dn-$t*Wn,qt=pn*pn*dn+qn,U[0]=vt*er+Yn*br+st*$n,U[1]=It*er+dt*br+Dt*$n,U[2]=An*er+xe*br+Ot*$n,U[3]=Dn*er+Be*br+Sn*$n,U[4]=vt*Oe+Yn*we+st*Ve,U[5]=It*Oe+dt*we+Dt*Ve,U[6]=An*Oe+xe*we+Ot*Ve,U[7]=Dn*Oe+Be*we+Sn*Ve,U[8]=vt*it+Yn*At+st*qt,U[9]=It*it+dt*At+Dt*qt,U[10]=An*it+xe*At+Ot*qt,U[11]=Dn*it+Be*At+Sn*qt,fe!==U&&(U[12]=fe[12],U[13]=fe[13],U[14]=fe[14],U[15]=fe[15]),U)}function J(U,fe,at){var de=Math.sin(at),$t=Math.cos(at),sn=fe[4],pn=fe[5],Nn=fe[6],Wn=fe[7],qn=fe[8],dn=fe[9],vt=fe[10],It=fe[11];return fe!==U&&(U[0]=fe[0],U[1]=fe[1],U[2]=fe[2],U[3]=fe[3],U[12]=fe[12],U[13]=fe[13],U[14]=fe[14],U[15]=fe[15]),U[4]=sn*$t+qn*de,U[5]=pn*$t+dn*de,U[6]=Nn*$t+vt*de,U[7]=Wn*$t+It*de,U[8]=qn*$t-sn*de,U[9]=dn*$t-pn*de,U[10]=vt*$t-Nn*de,U[11]=It*$t-Wn*de,U}function Ee(U,fe,at){var de=Math.sin(at),$t=Math.cos(at),sn=fe[0],pn=fe[1],Nn=fe[2],Wn=fe[3],qn=fe[8],dn=fe[9],vt=fe[10],It=fe[11];return fe!==U&&(U[4]=fe[4],U[5]=fe[5],U[6]=fe[6],U[7]=fe[7],U[12]=fe[12],U[13]=fe[13],U[14]=fe[14],U[15]=fe[15]),U[0]=sn*$t-qn*de,U[1]=pn*$t-dn*de,U[2]=Nn*$t-vt*de,U[3]=Wn*$t-It*de,U[8]=sn*de+qn*$t,U[9]=pn*de+dn*$t,U[10]=Nn*de+vt*$t,U[11]=Wn*de+It*$t,U}function tt(U,fe,at){var de=Math.sin(at),$t=Math.cos(at),sn=fe[0],pn=fe[1],Nn=fe[2],Wn=fe[3],qn=fe[4],dn=fe[5],vt=fe[6],It=fe[7];return fe!==U&&(U[8]=fe[8],U[9]=fe[9],U[10]=fe[10],U[11]=fe[11],U[12]=fe[12],U[13]=fe[13],U[14]=fe[14],U[15]=fe[15]),U[0]=sn*$t+qn*de,U[1]=pn*$t+dn*de,U[2]=Nn*$t+vt*de,U[3]=Wn*$t+It*de,U[4]=qn*$t-sn*de,U[5]=dn*$t-pn*de,U[6]=vt*$t-Nn*de,U[7]=It*$t-Wn*de,U}function Je(U,fe){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=fe[0],U[13]=fe[1],U[14]=fe[2],U[15]=1,U}function wt(U,fe){return U[0]=fe[0],U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=fe[1],U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=fe[2],U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function pt(U,fe,at){var de=at[0],$t=at[1],sn=at[2],pn=Math.hypot(de,$t,sn),Nn,Wn,qn;return pn<K.Ib?null:(pn=1/pn,de*=pn,$t*=pn,sn*=pn,Nn=Math.sin(fe),Wn=Math.cos(fe),qn=1-Wn,U[0]=de*de*qn+Wn,U[1]=$t*de*qn+sn*Nn,U[2]=sn*de*qn-$t*Nn,U[3]=0,U[4]=de*$t*qn-sn*Nn,U[5]=$t*$t*qn+Wn,U[6]=sn*$t*qn+de*Nn,U[7]=0,U[8]=de*sn*qn+$t*Nn,U[9]=$t*sn*qn-de*Nn,U[10]=sn*sn*qn+Wn,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U)}function yt(U,fe){var at=Math.sin(fe),de=Math.cos(fe);return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=de,U[6]=at,U[7]=0,U[8]=0,U[9]=-at,U[10]=de,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Re(U,fe){var at=Math.sin(fe),de=Math.cos(fe);return U[0]=de,U[1]=0,U[2]=-at,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=at,U[9]=0,U[10]=de,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Ce(U,fe){var at=Math.sin(fe),de=Math.cos(fe);return U[0]=de,U[1]=at,U[2]=0,U[3]=0,U[4]=-at,U[5]=de,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function Ue(U,fe,at){var de=fe[0],$t=fe[1],sn=fe[2],pn=fe[3],Nn=de+de,Wn=$t+$t,qn=sn+sn,dn=de*Nn,vt=de*Wn,It=de*qn,An=$t*Wn,Dn=$t*qn,Yn=sn*qn,dt=pn*Nn,xe=pn*Wn,Be=pn*qn;return U[0]=1-(An+Yn),U[1]=vt+Be,U[2]=It-xe,U[3]=0,U[4]=vt-Be,U[5]=1-(dn+Yn),U[6]=Dn+dt,U[7]=0,U[8]=It+xe,U[9]=Dn-dt,U[10]=1-(dn+An),U[11]=0,U[12]=at[0],U[13]=at[1],U[14]=at[2],U[15]=1,U}function We(U,fe){var at=new K.WT(3),de=-fe[0],$t=-fe[1],sn=-fe[2],pn=fe[3],Nn=fe[4],Wn=fe[5],qn=fe[6],dn=fe[7],vt=de*de+$t*$t+sn*sn+pn*pn;return vt>0?(at[0]=(Nn*pn+dn*de+Wn*sn-qn*$t)*2/vt,at[1]=(Wn*pn+dn*$t+qn*de-Nn*sn)*2/vt,at[2]=(qn*pn+dn*sn+Nn*$t-Wn*de)*2/vt):(at[0]=(Nn*pn+dn*de+Wn*sn-qn*$t)*2,at[1]=(Wn*pn+dn*$t+qn*de-Nn*sn)*2,at[2]=(qn*pn+dn*sn+Nn*$t-Wn*de)*2),Ue(U,fe,at),U}function lt(U,fe){return U[0]=fe[12],U[1]=fe[13],U[2]=fe[14],U}function tn(U,fe){var at=fe[0],de=fe[1],$t=fe[2],sn=fe[4],pn=fe[5],Nn=fe[6],Wn=fe[8],qn=fe[9],dn=fe[10];return U[0]=Math.hypot(at,de,$t),U[1]=Math.hypot(sn,pn,Nn),U[2]=Math.hypot(Wn,qn,dn),U}function Le(U,fe){var at=new K.WT(3);tn(at,fe);var de=1/at[0],$t=1/at[1],sn=1/at[2],pn=fe[0]*de,Nn=fe[1]*$t,Wn=fe[2]*sn,qn=fe[4]*de,dn=fe[5]*$t,vt=fe[6]*sn,It=fe[8]*de,An=fe[9]*$t,Dn=fe[10]*sn,Yn=pn+dn+Dn,dt=0;return Yn>0?(dt=Math.sqrt(Yn+1)*2,U[3]=.25*dt,U[0]=(vt-An)/dt,U[1]=(It-Wn)/dt,U[2]=(Nn-qn)/dt):pn>dn&&pn>Dn?(dt=Math.sqrt(1+pn-dn-Dn)*2,U[3]=(vt-An)/dt,U[0]=.25*dt,U[1]=(Nn+qn)/dt,U[2]=(It+Wn)/dt):dn>Dn?(dt=Math.sqrt(1+dn-pn-Dn)*2,U[3]=(It-Wn)/dt,U[0]=(Nn+qn)/dt,U[1]=.25*dt,U[2]=(vt+An)/dt):(dt=Math.sqrt(1+Dn-pn-dn)*2,U[3]=(Nn-qn)/dt,U[0]=(It+Wn)/dt,U[1]=(vt+An)/dt,U[2]=.25*dt),U}function _t(U,fe,at,de){var $t=fe[0],sn=fe[1],pn=fe[2],Nn=fe[3],Wn=$t+$t,qn=sn+sn,dn=pn+pn,vt=$t*Wn,It=$t*qn,An=$t*dn,Dn=sn*qn,Yn=sn*dn,dt=pn*dn,xe=Nn*Wn,Be=Nn*qn,st=Nn*dn,Dt=de[0],Ot=de[1],Sn=de[2];return U[0]=(1-(Dn+dt))*Dt,U[1]=(It+st)*Dt,U[2]=(An-Be)*Dt,U[3]=0,U[4]=(It-st)*Ot,U[5]=(1-(vt+dt))*Ot,U[6]=(Yn+xe)*Ot,U[7]=0,U[8]=(An+Be)*Sn,U[9]=(Yn-xe)*Sn,U[10]=(1-(vt+Dn))*Sn,U[11]=0,U[12]=at[0],U[13]=at[1],U[14]=at[2],U[15]=1,U}function Me(U,fe,at,de,$t){var sn=fe[0],pn=fe[1],Nn=fe[2],Wn=fe[3],qn=sn+sn,dn=pn+pn,vt=Nn+Nn,It=sn*qn,An=sn*dn,Dn=sn*vt,Yn=pn*dn,dt=pn*vt,xe=Nn*vt,Be=Wn*qn,st=Wn*dn,Dt=Wn*vt,Ot=de[0],Sn=de[1],er=de[2],br=$t[0],$n=$t[1],Oe=$t[2],we=(1-(Yn+xe))*Ot,Ve=(An+Dt)*Ot,it=(Dn-st)*Ot,At=(An-Dt)*Sn,qt=(1-(It+xe))*Sn,un=(dt+Be)*Sn,St=(Dn+st)*er,Jt=(dt-Be)*er,Qn=(1-(It+Yn))*er;return U[0]=we,U[1]=Ve,U[2]=it,U[3]=0,U[4]=At,U[5]=qt,U[6]=un,U[7]=0,U[8]=St,U[9]=Jt,U[10]=Qn,U[11]=0,U[12]=at[0]+br-(we*br+At*$n+St*Oe),U[13]=at[1]+$n-(Ve*br+qt*$n+Jt*Oe),U[14]=at[2]+Oe-(it*br+un*$n+Qn*Oe),U[15]=1,U}function nt(U,fe){var at=fe[0],de=fe[1],$t=fe[2],sn=fe[3],pn=at+at,Nn=de+de,Wn=$t+$t,qn=at*pn,dn=de*pn,vt=de*Nn,It=$t*pn,An=$t*Nn,Dn=$t*Wn,Yn=sn*pn,dt=sn*Nn,xe=sn*Wn;return U[0]=1-vt-Dn,U[1]=dn+xe,U[2]=It-dt,U[3]=0,U[4]=dn-xe,U[5]=1-qn-Dn,U[6]=An+Yn,U[7]=0,U[8]=It+dt,U[9]=An-Yn,U[10]=1-qn-vt,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}function qe(U,fe,at,de,$t,sn,pn){var Nn=1/(at-fe),Wn=1/($t-de),qn=1/(sn-pn);return U[0]=sn*2*Nn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=sn*2*Wn,U[6]=0,U[7]=0,U[8]=(at+fe)*Nn,U[9]=($t+de)*Wn,U[10]=(pn+sn)*qn,U[11]=-1,U[12]=0,U[13]=0,U[14]=pn*sn*2*qn,U[15]=0,U}function Ye(U,fe,at,de,$t){var sn=1/Math.tan(fe/2),pn;return U[0]=sn/at,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=sn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=-1,U[12]=0,U[13]=0,U[15]=0,$t!=null&&$t!==1/0?(pn=1/(de-$t),U[10]=($t+de)*pn,U[14]=2*$t*de*pn):(U[10]=-1,U[14]=-2*de),U}var Lt=Ye;function xt(U,fe,at,de,$t){var sn=1/Math.tan(fe/2),pn;return U[0]=sn/at,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=sn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[11]=-1,U[12]=0,U[13]=0,U[15]=0,$t!=null&&$t!==1/0?(pn=1/(de-$t),U[10]=$t*pn,U[14]=$t*de*pn):(U[10]=-1,U[14]=-de),U}function Ie(U,fe,at,de){var $t=Math.tan(fe.upDegrees*Math.PI/180),sn=Math.tan(fe.downDegrees*Math.PI/180),pn=Math.tan(fe.leftDegrees*Math.PI/180),Nn=Math.tan(fe.rightDegrees*Math.PI/180),Wn=2/(pn+Nn),qn=2/($t+sn);return U[0]=Wn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=qn,U[6]=0,U[7]=0,U[8]=-((pn-Nn)*Wn*.5),U[9]=($t-sn)*qn*.5,U[10]=de/(at-de),U[11]=-1,U[12]=0,U[13]=0,U[14]=de*at/(at-de),U[15]=0,U}function Gt(U,fe,at,de,$t,sn,pn){var Nn=1/(fe-at),Wn=1/(de-$t),qn=1/(sn-pn);return U[0]=-2*Nn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=-2*Wn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=2*qn,U[11]=0,U[12]=(fe+at)*Nn,U[13]=($t+de)*Wn,U[14]=(pn+sn)*qn,U[15]=1,U}var gn=Gt;function Tn(U,fe,at,de,$t,sn,pn){var Nn=1/(fe-at),Wn=1/(de-$t),qn=1/(sn-pn);return U[0]=-2*Nn,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=-2*Wn,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=qn,U[11]=0,U[12]=(fe+at)*Nn,U[13]=($t+de)*Wn,U[14]=sn*qn,U[15]=1,U}function sr(U,fe,at,de){var $t,sn,pn,Nn,Wn,qn,dn,vt,It,An,Dn=fe[0],Yn=fe[1],dt=fe[2],xe=de[0],Be=de[1],st=de[2],Dt=at[0],Ot=at[1],Sn=at[2];return Math.abs(Dn-Dt)<K.Ib&&Math.abs(Yn-Ot)<K.Ib&&Math.abs(dt-Sn)<K.Ib?ue(U):(dn=Dn-Dt,vt=Yn-Ot,It=dt-Sn,An=1/Math.hypot(dn,vt,It),dn*=An,vt*=An,It*=An,$t=Be*It-st*vt,sn=st*dn-xe*It,pn=xe*vt-Be*dn,An=Math.hypot($t,sn,pn),An?(An=1/An,$t*=An,sn*=An,pn*=An):($t=0,sn=0,pn=0),Nn=vt*pn-It*sn,Wn=It*$t-dn*pn,qn=dn*sn-vt*$t,An=Math.hypot(Nn,Wn,qn),An?(An=1/An,Nn*=An,Wn*=An,qn*=An):(Nn=0,Wn=0,qn=0),U[0]=$t,U[1]=Nn,U[2]=dn,U[3]=0,U[4]=sn,U[5]=Wn,U[6]=vt,U[7]=0,U[8]=pn,U[9]=qn,U[10]=It,U[11]=0,U[12]=-($t*Dn+sn*Yn+pn*dt),U[13]=-(Nn*Dn+Wn*Yn+qn*dt),U[14]=-(dn*Dn+vt*Yn+It*dt),U[15]=1,U)}function nr(U,fe,at,de){var $t=fe[0],sn=fe[1],pn=fe[2],Nn=de[0],Wn=de[1],qn=de[2],dn=$t-at[0],vt=sn-at[1],It=pn-at[2],An=dn*dn+vt*vt+It*It;An>0&&(An=1/Math.sqrt(An),dn*=An,vt*=An,It*=An);var Dn=Wn*It-qn*vt,Yn=qn*dn-Nn*It,dt=Nn*vt-Wn*dn;return An=Dn*Dn+Yn*Yn+dt*dt,An>0&&(An=1/Math.sqrt(An),Dn*=An,Yn*=An,dt*=An),U[0]=Dn,U[1]=Yn,U[2]=dt,U[3]=0,U[4]=vt*dt-It*Yn,U[5]=It*Dn-dn*dt,U[6]=dn*Yn-vt*Dn,U[7]=0,U[8]=dn,U[9]=vt,U[10]=It,U[11]=0,U[12]=$t,U[13]=sn,U[14]=pn,U[15]=1,U}function Ft(U){return"mat4("+U[0]+", "+U[1]+", "+U[2]+", "+U[3]+", "+U[4]+", "+U[5]+", "+U[6]+", "+U[7]+", "+U[8]+", "+U[9]+", "+U[10]+", "+U[11]+", "+U[12]+", "+U[13]+", "+U[14]+", "+U[15]+")"}function Kt(U){return Math.hypot(U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15])}function fn(U,fe,at){return U[0]=fe[0]+at[0],U[1]=fe[1]+at[1],U[2]=fe[2]+at[2],U[3]=fe[3]+at[3],U[4]=fe[4]+at[4],U[5]=fe[5]+at[5],U[6]=fe[6]+at[6],U[7]=fe[7]+at[7],U[8]=fe[8]+at[8],U[9]=fe[9]+at[9],U[10]=fe[10]+at[10],U[11]=fe[11]+at[11],U[12]=fe[12]+at[12],U[13]=fe[13]+at[13],U[14]=fe[14]+at[14],U[15]=fe[15]+at[15],U}function Gn(U,fe,at){return U[0]=fe[0]-at[0],U[1]=fe[1]-at[1],U[2]=fe[2]-at[2],U[3]=fe[3]-at[3],U[4]=fe[4]-at[4],U[5]=fe[5]-at[5],U[6]=fe[6]-at[6],U[7]=fe[7]-at[7],U[8]=fe[8]-at[8],U[9]=fe[9]-at[9],U[10]=fe[10]-at[10],U[11]=fe[11]-at[11],U[12]=fe[12]-at[12],U[13]=fe[13]-at[13],U[14]=fe[14]-at[14],U[15]=fe[15]-at[15],U}function on(U,fe,at){return U[0]=fe[0]*at,U[1]=fe[1]*at,U[2]=fe[2]*at,U[3]=fe[3]*at,U[4]=fe[4]*at,U[5]=fe[5]*at,U[6]=fe[6]*at,U[7]=fe[7]*at,U[8]=fe[8]*at,U[9]=fe[9]*at,U[10]=fe[10]*at,U[11]=fe[11]*at,U[12]=fe[12]*at,U[13]=fe[13]*at,U[14]=fe[14]*at,U[15]=fe[15]*at,U}function Pt(U,fe,at,de){return U[0]=fe[0]+at[0]*de,U[1]=fe[1]+at[1]*de,U[2]=fe[2]+at[2]*de,U[3]=fe[3]+at[3]*de,U[4]=fe[4]+at[4]*de,U[5]=fe[5]+at[5]*de,U[6]=fe[6]+at[6]*de,U[7]=fe[7]+at[7]*de,U[8]=fe[8]+at[8]*de,U[9]=fe[9]+at[9]*de,U[10]=fe[10]+at[10]*de,U[11]=fe[11]+at[11]*de,U[12]=fe[12]+at[12]*de,U[13]=fe[13]+at[13]*de,U[14]=fe[14]+at[14]*de,U[15]=fe[15]+at[15]*de,U}function zt(U,fe){return U[0]===fe[0]&&U[1]===fe[1]&&U[2]===fe[2]&&U[3]===fe[3]&&U[4]===fe[4]&&U[5]===fe[5]&&U[6]===fe[6]&&U[7]===fe[7]&&U[8]===fe[8]&&U[9]===fe[9]&&U[10]===fe[10]&&U[11]===fe[11]&&U[12]===fe[12]&&U[13]===fe[13]&&U[14]===fe[14]&&U[15]===fe[15]}function ze(U,fe){var at=U[0],de=U[1],$t=U[2],sn=U[3],pn=U[4],Nn=U[5],Wn=U[6],qn=U[7],dn=U[8],vt=U[9],It=U[10],An=U[11],Dn=U[12],Yn=U[13],dt=U[14],xe=U[15],Be=fe[0],st=fe[1],Dt=fe[2],Ot=fe[3],Sn=fe[4],er=fe[5],br=fe[6],$n=fe[7],Oe=fe[8],we=fe[9],Ve=fe[10],it=fe[11],At=fe[12],qt=fe[13],un=fe[14],St=fe[15];return Math.abs(at-Be)<=K.Ib*Math.max(1,Math.abs(at),Math.abs(Be))&&Math.abs(de-st)<=K.Ib*Math.max(1,Math.abs(de),Math.abs(st))&&Math.abs($t-Dt)<=K.Ib*Math.max(1,Math.abs($t),Math.abs(Dt))&&Math.abs(sn-Ot)<=K.Ib*Math.max(1,Math.abs(sn),Math.abs(Ot))&&Math.abs(pn-Sn)<=K.Ib*Math.max(1,Math.abs(pn),Math.abs(Sn))&&Math.abs(Nn-er)<=K.Ib*Math.max(1,Math.abs(Nn),Math.abs(er))&&Math.abs(Wn-br)<=K.Ib*Math.max(1,Math.abs(Wn),Math.abs(br))&&Math.abs(qn-$n)<=K.Ib*Math.max(1,Math.abs(qn),Math.abs($n))&&Math.abs(dn-Oe)<=K.Ib*Math.max(1,Math.abs(dn),Math.abs(Oe))&&Math.abs(vt-we)<=K.Ib*Math.max(1,Math.abs(vt),Math.abs(we))&&Math.abs(It-Ve)<=K.Ib*Math.max(1,Math.abs(It),Math.abs(Ve))&&Math.abs(An-it)<=K.Ib*Math.max(1,Math.abs(An),Math.abs(it))&&Math.abs(Dn-At)<=K.Ib*Math.max(1,Math.abs(Dn),Math.abs(At))&&Math.abs(Yn-qt)<=K.Ib*Math.max(1,Math.abs(Yn),Math.abs(qt))&&Math.abs(dt-un)<=K.Ib*Math.max(1,Math.abs(dt),Math.abs(un))&&Math.abs(xe-St)<=K.Ib*Math.max(1,Math.abs(xe),Math.abs(St))}var rt=me,jt=Gn},31437:function(bt,G,L){"use strict";L.d(G,{$X:function(){return be},AK:function(){return Ue},Fv:function(){return Ce},I6:function(){return Ie},IH:function(){return ue},JG:function(){return ee},Ue:function(){return W},al:function(){return he},lu:function(){return Tn},t7:function(){return lt},t8:function(){return se},tk:function(){return yt}});var K=L(49685);function W(){var on=new K.WT(2);return K.WT!=Float32Array&&(on[0]=0,on[1]=0),on}function E(on){var Pt=new glMatrix.ARRAY_TYPE(2);return Pt[0]=on[0],Pt[1]=on[1],Pt}function he(on,Pt){var zt=new K.WT(2);return zt[0]=on,zt[1]=Pt,zt}function ee(on,Pt){return on[0]=Pt[0],on[1]=Pt[1],on}function se(on,Pt,zt){return on[0]=Pt,on[1]=zt,on}function ue(on,Pt,zt){return on[0]=Pt[0]+zt[0],on[1]=Pt[1]+zt[1],on}function be(on,Pt,zt){return on[0]=Pt[0]-zt[0],on[1]=Pt[1]-zt[1],on}function oe(on,Pt,zt){return on[0]=Pt[0]*zt[0],on[1]=Pt[1]*zt[1],on}function Ge(on,Pt,zt){return on[0]=Pt[0]/zt[0],on[1]=Pt[1]/zt[1],on}function te(on,Pt){return on[0]=Math.ceil(Pt[0]),on[1]=Math.ceil(Pt[1]),on}function me(on,Pt){return on[0]=Math.floor(Pt[0]),on[1]=Math.floor(Pt[1]),on}function Pe(on,Pt,zt){return on[0]=Math.min(Pt[0],zt[0]),on[1]=Math.min(Pt[1],zt[1]),on}function $(on,Pt,zt){return on[0]=Math.max(Pt[0],zt[0]),on[1]=Math.max(Pt[1],zt[1]),on}function le(on,Pt){return on[0]=Math.round(Pt[0]),on[1]=Math.round(Pt[1]),on}function J(on,Pt,zt){return on[0]=Pt[0]*zt,on[1]=Pt[1]*zt,on}function Ee(on,Pt,zt,ze){return on[0]=Pt[0]+zt[0]*ze,on[1]=Pt[1]+zt[1]*ze,on}function tt(on,Pt){var zt=Pt[0]-on[0],ze=Pt[1]-on[1];return Math.hypot(zt,ze)}function Je(on,Pt){var zt=Pt[0]-on[0],ze=Pt[1]-on[1];return zt*zt+ze*ze}function wt(on){var Pt=on[0],zt=on[1];return Math.hypot(Pt,zt)}function pt(on){var Pt=on[0],zt=on[1];return Pt*Pt+zt*zt}function yt(on,Pt){return on[0]=-Pt[0],on[1]=-Pt[1],on}function Re(on,Pt){return on[0]=1/Pt[0],on[1]=1/Pt[1],on}function Ce(on,Pt){var zt=Pt[0],ze=Pt[1],rt=zt*zt+ze*ze;return rt>0&&(rt=1/Math.sqrt(rt)),on[0]=Pt[0]*rt,on[1]=Pt[1]*rt,on}function Ue(on,Pt){return on[0]*Pt[0]+on[1]*Pt[1]}function We(on,Pt,zt){var ze=Pt[0]*zt[1]-Pt[1]*zt[0];return on[0]=on[1]=0,on[2]=ze,on}function lt(on,Pt,zt,ze){var rt=Pt[0],jt=Pt[1];return on[0]=rt+ze*(zt[0]-rt),on[1]=jt+ze*(zt[1]-jt),on}function tn(on,Pt){Pt=Pt||1;var zt=glMatrix.RANDOM()*2*Math.PI;return on[0]=Math.cos(zt)*Pt,on[1]=Math.sin(zt)*Pt,on}function Le(on,Pt,zt){var ze=Pt[0],rt=Pt[1];return on[0]=zt[0]*ze+zt[2]*rt,on[1]=zt[1]*ze+zt[3]*rt,on}function _t(on,Pt,zt){var ze=Pt[0],rt=Pt[1];return on[0]=zt[0]*ze+zt[2]*rt+zt[4],on[1]=zt[1]*ze+zt[3]*rt+zt[5],on}function Me(on,Pt,zt){var ze=Pt[0],rt=Pt[1];return on[0]=zt[0]*ze+zt[3]*rt+zt[6],on[1]=zt[1]*ze+zt[4]*rt+zt[7],on}function nt(on,Pt,zt){var ze=Pt[0],rt=Pt[1];return on[0]=zt[0]*ze+zt[4]*rt+zt[12],on[1]=zt[1]*ze+zt[5]*rt+zt[13],on}function qe(on,Pt,zt,ze){var rt=Pt[0]-zt[0],jt=Pt[1]-zt[1],U=Math.sin(ze),fe=Math.cos(ze);return on[0]=rt*fe-jt*U+zt[0],on[1]=rt*U+jt*fe+zt[1],on}function Ye(on,Pt){var zt=on[0],ze=on[1],rt=Pt[0],jt=Pt[1],U=Math.sqrt(zt*zt+ze*ze)*Math.sqrt(rt*rt+jt*jt),fe=U&&(zt*rt+ze*jt)/U;return Math.acos(Math.min(Math.max(fe,-1),1))}function Lt(on){return on[0]=0,on[1]=0,on}function xt(on){return"vec2("+on[0]+", "+on[1]+")"}function Ie(on,Pt){return on[0]===Pt[0]&&on[1]===Pt[1]}function Gt(on,Pt){var zt=on[0],ze=on[1],rt=Pt[0],jt=Pt[1];return Math.abs(zt-rt)<=glMatrix.EPSILON*Math.max(1,Math.abs(zt),Math.abs(rt))&&Math.abs(ze-jt)<=glMatrix.EPSILON*Math.max(1,Math.abs(ze),Math.abs(jt))}var gn=null,Tn=be,sr=null,nr=null,Ft=null,Kt=null,fn=null,Gn=function(){var on=W();return function(Pt,zt,ze,rt,jt,U){var fe,at;for(zt||(zt=2),ze||(ze=0),rt?at=Math.min(rt*zt+ze,Pt.length):at=Pt.length,fe=ze;fe<at;fe+=zt)on[0]=Pt[fe],on[1]=Pt[fe+1],jt(on,on,U),Pt[fe]=on[0],Pt[fe+1]=on[1];return Pt}}()},77160:function(bt,G,L){"use strict";L.d(G,{$X:function(){return oe},AK:function(){return Ue},EU:function(){return Ie},Fv:function(){return Ce},IH:function(){return be},JG:function(){return se},Jp:function(){return Ge},TK:function(){return fn},Ue:function(){return W},VC:function(){return qe},Zh:function(){return on},al:function(){return ee},bA:function(){return Ee},d9:function(){return E},fF:function(){return Me},fS:function(){return sr},kC:function(){return We},kE:function(){return he},kK:function(){return nt},lu:function(){return nr},t7:function(){return lt},t8:function(){return ue},tk:function(){return yt}});var K=L(49685);function W(){var ze=new K.WT(3);return K.WT!=Float32Array&&(ze[0]=0,ze[1]=0,ze[2]=0),ze}function E(ze){var rt=new K.WT(3);return rt[0]=ze[0],rt[1]=ze[1],rt[2]=ze[2],rt}function he(ze){var rt=ze[0],jt=ze[1],U=ze[2];return Math.hypot(rt,jt,U)}function ee(ze,rt,jt){var U=new K.WT(3);return U[0]=ze,U[1]=rt,U[2]=jt,U}function se(ze,rt){return ze[0]=rt[0],ze[1]=rt[1],ze[2]=rt[2],ze}function ue(ze,rt,jt,U){return ze[0]=rt,ze[1]=jt,ze[2]=U,ze}function be(ze,rt,jt){return ze[0]=rt[0]+jt[0],ze[1]=rt[1]+jt[1],ze[2]=rt[2]+jt[2],ze}function oe(ze,rt,jt){return ze[0]=rt[0]-jt[0],ze[1]=rt[1]-jt[1],ze[2]=rt[2]-jt[2],ze}function Ge(ze,rt,jt){return ze[0]=rt[0]*jt[0],ze[1]=rt[1]*jt[1],ze[2]=rt[2]*jt[2],ze}function te(ze,rt,jt){return ze[0]=rt[0]/jt[0],ze[1]=rt[1]/jt[1],ze[2]=rt[2]/jt[2],ze}function me(ze,rt){return ze[0]=Math.ceil(rt[0]),ze[1]=Math.ceil(rt[1]),ze[2]=Math.ceil(rt[2]),ze}function Pe(ze,rt){return ze[0]=Math.floor(rt[0]),ze[1]=Math.floor(rt[1]),ze[2]=Math.floor(rt[2]),ze}function $(ze,rt,jt){return ze[0]=Math.min(rt[0],jt[0]),ze[1]=Math.min(rt[1],jt[1]),ze[2]=Math.min(rt[2],jt[2]),ze}function le(ze,rt,jt){return ze[0]=Math.max(rt[0],jt[0]),ze[1]=Math.max(rt[1],jt[1]),ze[2]=Math.max(rt[2],jt[2]),ze}function J(ze,rt){return ze[0]=Math.round(rt[0]),ze[1]=Math.round(rt[1]),ze[2]=Math.round(rt[2]),ze}function Ee(ze,rt,jt){return ze[0]=rt[0]*jt,ze[1]=rt[1]*jt,ze[2]=rt[2]*jt,ze}function tt(ze,rt,jt,U){return ze[0]=rt[0]+jt[0]*U,ze[1]=rt[1]+jt[1]*U,ze[2]=rt[2]+jt[2]*U,ze}function Je(ze,rt){var jt=rt[0]-ze[0],U=rt[1]-ze[1],fe=rt[2]-ze[2];return Math.hypot(jt,U,fe)}function wt(ze,rt){var jt=rt[0]-ze[0],U=rt[1]-ze[1],fe=rt[2]-ze[2];return jt*jt+U*U+fe*fe}function pt(ze){var rt=ze[0],jt=ze[1],U=ze[2];return rt*rt+jt*jt+U*U}function yt(ze,rt){return ze[0]=-rt[0],ze[1]=-rt[1],ze[2]=-rt[2],ze}function Re(ze,rt){return ze[0]=1/rt[0],ze[1]=1/rt[1],ze[2]=1/rt[2],ze}function Ce(ze,rt){var jt=rt[0],U=rt[1],fe=rt[2],at=jt*jt+U*U+fe*fe;return at>0&&(at=1/Math.sqrt(at)),ze[0]=rt[0]*at,ze[1]=rt[1]*at,ze[2]=rt[2]*at,ze}function Ue(ze,rt){return ze[0]*rt[0]+ze[1]*rt[1]+ze[2]*rt[2]}function We(ze,rt,jt){var U=rt[0],fe=rt[1],at=rt[2],de=jt[0],$t=jt[1],sn=jt[2];return ze[0]=fe*sn-at*$t,ze[1]=at*de-U*sn,ze[2]=U*$t-fe*de,ze}function lt(ze,rt,jt,U){var fe=rt[0],at=rt[1],de=rt[2];return ze[0]=fe+U*(jt[0]-fe),ze[1]=at+U*(jt[1]-at),ze[2]=de+U*(jt[2]-de),ze}function tn(ze,rt,jt,U,fe,at){var de=at*at,$t=de*(2*at-3)+1,sn=de*(at-2)+at,pn=de*(at-1),Nn=de*(3-2*at);return ze[0]=rt[0]*$t+jt[0]*sn+U[0]*pn+fe[0]*Nn,ze[1]=rt[1]*$t+jt[1]*sn+U[1]*pn+fe[1]*Nn,ze[2]=rt[2]*$t+jt[2]*sn+U[2]*pn+fe[2]*Nn,ze}function Le(ze,rt,jt,U,fe,at){var de=1-at,$t=de*de,sn=at*at,pn=$t*de,Nn=3*at*$t,Wn=3*sn*de,qn=sn*at;return ze[0]=rt[0]*pn+jt[0]*Nn+U[0]*Wn+fe[0]*qn,ze[1]=rt[1]*pn+jt[1]*Nn+U[1]*Wn+fe[1]*qn,ze[2]=rt[2]*pn+jt[2]*Nn+U[2]*Wn+fe[2]*qn,ze}function _t(ze,rt){rt=rt||1;var jt=glMatrix.RANDOM()*2*Math.PI,U=glMatrix.RANDOM()*2-1,fe=Math.sqrt(1-U*U)*rt;return ze[0]=Math.cos(jt)*fe,ze[1]=Math.sin(jt)*fe,ze[2]=U*rt,ze}function Me(ze,rt,jt){var U=rt[0],fe=rt[1],at=rt[2],de=jt[3]*U+jt[7]*fe+jt[11]*at+jt[15];return de=de||1,ze[0]=(jt[0]*U+jt[4]*fe+jt[8]*at+jt[12])/de,ze[1]=(jt[1]*U+jt[5]*fe+jt[9]*at+jt[13])/de,ze[2]=(jt[2]*U+jt[6]*fe+jt[10]*at+jt[14])/de,ze}function nt(ze,rt,jt){var U=rt[0],fe=rt[1],at=rt[2];return ze[0]=U*jt[0]+fe*jt[3]+at*jt[6],ze[1]=U*jt[1]+fe*jt[4]+at*jt[7],ze[2]=U*jt[2]+fe*jt[5]+at*jt[8],ze}function qe(ze,rt,jt){var U=jt[0],fe=jt[1],at=jt[2],de=jt[3],$t=rt[0],sn=rt[1],pn=rt[2],Nn=fe*pn-at*sn,Wn=at*$t-U*pn,qn=U*sn-fe*$t,dn=fe*qn-at*Wn,vt=at*Nn-U*qn,It=U*Wn-fe*Nn,An=de*2;return Nn*=An,Wn*=An,qn*=An,dn*=2,vt*=2,It*=2,ze[0]=$t+Nn+dn,ze[1]=sn+Wn+vt,ze[2]=pn+qn+It,ze}function Ye(ze,rt,jt,U){var fe=[],at=[];return fe[0]=rt[0]-jt[0],fe[1]=rt[1]-jt[1],fe[2]=rt[2]-jt[2],at[0]=fe[0],at[1]=fe[1]*Math.cos(U)-fe[2]*Math.sin(U),at[2]=fe[1]*Math.sin(U)+fe[2]*Math.cos(U),ze[0]=at[0]+jt[0],ze[1]=at[1]+jt[1],ze[2]=at[2]+jt[2],ze}function Lt(ze,rt,jt,U){var fe=[],at=[];return fe[0]=rt[0]-jt[0],fe[1]=rt[1]-jt[1],fe[2]=rt[2]-jt[2],at[0]=fe[2]*Math.sin(U)+fe[0]*Math.cos(U),at[1]=fe[1],at[2]=fe[2]*Math.cos(U)-fe[0]*Math.sin(U),ze[0]=at[0]+jt[0],ze[1]=at[1]+jt[1],ze[2]=at[2]+jt[2],ze}function xt(ze,rt,jt,U){var fe=[],at=[];return fe[0]=rt[0]-jt[0],fe[1]=rt[1]-jt[1],fe[2]=rt[2]-jt[2],at[0]=fe[0]*Math.cos(U)-fe[1]*Math.sin(U),at[1]=fe[0]*Math.sin(U)+fe[1]*Math.cos(U),at[2]=fe[2],ze[0]=at[0]+jt[0],ze[1]=at[1]+jt[1],ze[2]=at[2]+jt[2],ze}function Ie(ze,rt){var jt=ze[0],U=ze[1],fe=ze[2],at=rt[0],de=rt[1],$t=rt[2],sn=Math.sqrt(jt*jt+U*U+fe*fe),pn=Math.sqrt(at*at+de*de+$t*$t),Nn=sn*pn,Wn=Nn&&Ue(ze,rt)/Nn;return Math.acos(Math.min(Math.max(Wn,-1),1))}function Gt(ze){return ze[0]=0,ze[1]=0,ze[2]=0,ze}function gn(ze){return"vec3("+ze[0]+", "+ze[1]+", "+ze[2]+")"}function Tn(ze,rt){return ze[0]===rt[0]&&ze[1]===rt[1]&&ze[2]===rt[2]}function sr(ze,rt){var jt=ze[0],U=ze[1],fe=ze[2],at=rt[0],de=rt[1],$t=rt[2];return Math.abs(jt-at)<=K.Ib*Math.max(1,Math.abs(jt),Math.abs(at))&&Math.abs(U-de)<=K.Ib*Math.max(1,Math.abs(U),Math.abs(de))&&Math.abs(fe-$t)<=K.Ib*Math.max(1,Math.abs(fe),Math.abs($t))}var nr=oe,Ft=null,Kt=null,fn=Je,Gn=null,on=he,Pt=null,zt=function(){var ze=W();return function(rt,jt,U,fe,at,de){var $t,sn;for(jt||(jt=3),U||(U=0),fe?sn=Math.min(fe*jt+U,rt.length):sn=rt.length,$t=U;$t<sn;$t+=jt)ze[0]=rt[$t],ze[1]=rt[$t+1],ze[2]=rt[$t+2],at(ze,ze,de),rt[$t]=ze[0],rt[$t+1]=ze[1],rt[$t+2]=ze[2];return rt}}()},98333:function(bt,G,L){"use strict";L.d(G,{AK:function(){return Ue},Fv:function(){return Ce},I6:function(){return qe},IH:function(){return ue},JG:function(){return ee},Ue:function(){return W},al:function(){return he},bA:function(){return J},d9:function(){return E},fF:function(){return Le},fS:function(){return Ye},kE:function(){return wt},t7:function(){return lt},t8:function(){return se},we:function(){return pt}});var K=L(49685);function W(){var Ft=new K.WT(4);return K.WT!=Float32Array&&(Ft[0]=0,Ft[1]=0,Ft[2]=0,Ft[3]=0),Ft}function E(Ft){var Kt=new K.WT(4);return Kt[0]=Ft[0],Kt[1]=Ft[1],Kt[2]=Ft[2],Kt[3]=Ft[3],Kt}function he(Ft,Kt,fn,Gn){var on=new K.WT(4);return on[0]=Ft,on[1]=Kt,on[2]=fn,on[3]=Gn,on}function ee(Ft,Kt){return Ft[0]=Kt[0],Ft[1]=Kt[1],Ft[2]=Kt[2],Ft[3]=Kt[3],Ft}function se(Ft,Kt,fn,Gn,on){return Ft[0]=Kt,Ft[1]=fn,Ft[2]=Gn,Ft[3]=on,Ft}function ue(Ft,Kt,fn){return Ft[0]=Kt[0]+fn[0],Ft[1]=Kt[1]+fn[1],Ft[2]=Kt[2]+fn[2],Ft[3]=Kt[3]+fn[3],Ft}function be(Ft,Kt,fn){return Ft[0]=Kt[0]-fn[0],Ft[1]=Kt[1]-fn[1],Ft[2]=Kt[2]-fn[2],Ft[3]=Kt[3]-fn[3],Ft}function oe(Ft,Kt,fn){return Ft[0]=Kt[0]*fn[0],Ft[1]=Kt[1]*fn[1],Ft[2]=Kt[2]*fn[2],Ft[3]=Kt[3]*fn[3],Ft}function Ge(Ft,Kt,fn){return Ft[0]=Kt[0]/fn[0],Ft[1]=Kt[1]/fn[1],Ft[2]=Kt[2]/fn[2],Ft[3]=Kt[3]/fn[3],Ft}function te(Ft,Kt){return Ft[0]=Math.ceil(Kt[0]),Ft[1]=Math.ceil(Kt[1]),Ft[2]=Math.ceil(Kt[2]),Ft[3]=Math.ceil(Kt[3]),Ft}function me(Ft,Kt){return Ft[0]=Math.floor(Kt[0]),Ft[1]=Math.floor(Kt[1]),Ft[2]=Math.floor(Kt[2]),Ft[3]=Math.floor(Kt[3]),Ft}function Pe(Ft,Kt,fn){return Ft[0]=Math.min(Kt[0],fn[0]),Ft[1]=Math.min(Kt[1],fn[1]),Ft[2]=Math.min(Kt[2],fn[2]),Ft[3]=Math.min(Kt[3],fn[3]),Ft}function $(Ft,Kt,fn){return Ft[0]=Math.max(Kt[0],fn[0]),Ft[1]=Math.max(Kt[1],fn[1]),Ft[2]=Math.max(Kt[2],fn[2]),Ft[3]=Math.max(Kt[3],fn[3]),Ft}function le(Ft,Kt){return Ft[0]=Math.round(Kt[0]),Ft[1]=Math.round(Kt[1]),Ft[2]=Math.round(Kt[2]),Ft[3]=Math.round(Kt[3]),Ft}function J(Ft,Kt,fn){return Ft[0]=Kt[0]*fn,Ft[1]=Kt[1]*fn,Ft[2]=Kt[2]*fn,Ft[3]=Kt[3]*fn,Ft}function Ee(Ft,Kt,fn,Gn){return Ft[0]=Kt[0]+fn[0]*Gn,Ft[1]=Kt[1]+fn[1]*Gn,Ft[2]=Kt[2]+fn[2]*Gn,Ft[3]=Kt[3]+fn[3]*Gn,Ft}function tt(Ft,Kt){var fn=Kt[0]-Ft[0],Gn=Kt[1]-Ft[1],on=Kt[2]-Ft[2],Pt=Kt[3]-Ft[3];return Math.hypot(fn,Gn,on,Pt)}function Je(Ft,Kt){var fn=Kt[0]-Ft[0],Gn=Kt[1]-Ft[1],on=Kt[2]-Ft[2],Pt=Kt[3]-Ft[3];return fn*fn+Gn*Gn+on*on+Pt*Pt}function wt(Ft){var Kt=Ft[0],fn=Ft[1],Gn=Ft[2],on=Ft[3];return Math.hypot(Kt,fn,Gn,on)}function pt(Ft){var Kt=Ft[0],fn=Ft[1],Gn=Ft[2],on=Ft[3];return Kt*Kt+fn*fn+Gn*Gn+on*on}function yt(Ft,Kt){return Ft[0]=-Kt[0],Ft[1]=-Kt[1],Ft[2]=-Kt[2],Ft[3]=-Kt[3],Ft}function Re(Ft,Kt){return Ft[0]=1/Kt[0],Ft[1]=1/Kt[1],Ft[2]=1/Kt[2],Ft[3]=1/Kt[3],Ft}function Ce(Ft,Kt){var fn=Kt[0],Gn=Kt[1],on=Kt[2],Pt=Kt[3],zt=fn*fn+Gn*Gn+on*on+Pt*Pt;return zt>0&&(zt=1/Math.sqrt(zt)),Ft[0]=fn*zt,Ft[1]=Gn*zt,Ft[2]=on*zt,Ft[3]=Pt*zt,Ft}function Ue(Ft,Kt){return Ft[0]*Kt[0]+Ft[1]*Kt[1]+Ft[2]*Kt[2]+Ft[3]*Kt[3]}function We(Ft,Kt,fn,Gn){var on=fn[0]*Gn[1]-fn[1]*Gn[0],Pt=fn[0]*Gn[2]-fn[2]*Gn[0],zt=fn[0]*Gn[3]-fn[3]*Gn[0],ze=fn[1]*Gn[2]-fn[2]*Gn[1],rt=fn[1]*Gn[3]-fn[3]*Gn[1],jt=fn[2]*Gn[3]-fn[3]*Gn[2],U=Kt[0],fe=Kt[1],at=Kt[2],de=Kt[3];return Ft[0]=fe*jt-at*rt+de*ze,Ft[1]=-(U*jt)+at*zt-de*Pt,Ft[2]=U*rt-fe*zt+de*on,Ft[3]=-(U*ze)+fe*Pt-at*on,Ft}function lt(Ft,Kt,fn,Gn){var on=Kt[0],Pt=Kt[1],zt=Kt[2],ze=Kt[3];return Ft[0]=on+Gn*(fn[0]-on),Ft[1]=Pt+Gn*(fn[1]-Pt),Ft[2]=zt+Gn*(fn[2]-zt),Ft[3]=ze+Gn*(fn[3]-ze),Ft}function tn(Ft,Kt){Kt=Kt||1;var fn,Gn,on,Pt,zt,ze;do fn=glMatrix.RANDOM()*2-1,Gn=glMatrix.RANDOM()*2-1,zt=fn*fn+Gn*Gn;while(zt>=1);do on=glMatrix.RANDOM()*2-1,Pt=glMatrix.RANDOM()*2-1,ze=on*on+Pt*Pt;while(ze>=1);var rt=Math.sqrt((1-zt)/ze);return Ft[0]=Kt*fn,Ft[1]=Kt*Gn,Ft[2]=Kt*on*rt,Ft[3]=Kt*Pt*rt,Ft}function Le(Ft,Kt,fn){var Gn=Kt[0],on=Kt[1],Pt=Kt[2],zt=Kt[3];return Ft[0]=fn[0]*Gn+fn[4]*on+fn[8]*Pt+fn[12]*zt,Ft[1]=fn[1]*Gn+fn[5]*on+fn[9]*Pt+fn[13]*zt,Ft[2]=fn[2]*Gn+fn[6]*on+fn[10]*Pt+fn[14]*zt,Ft[3]=fn[3]*Gn+fn[7]*on+fn[11]*Pt+fn[15]*zt,Ft}function _t(Ft,Kt,fn){var Gn=Kt[0],on=Kt[1],Pt=Kt[2],zt=fn[0],ze=fn[1],rt=fn[2],jt=fn[3],U=jt*Gn+ze*Pt-rt*on,fe=jt*on+rt*Gn-zt*Pt,at=jt*Pt+zt*on-ze*Gn,de=-zt*Gn-ze*on-rt*Pt;return Ft[0]=U*jt+de*-zt+fe*-rt-at*-ze,Ft[1]=fe*jt+de*-ze+at*-zt-U*-rt,Ft[2]=at*jt+de*-rt+U*-ze-fe*-zt,Ft[3]=Kt[3],Ft}function Me(Ft){return Ft[0]=0,Ft[1]=0,Ft[2]=0,Ft[3]=0,Ft}function nt(Ft){return"vec4("+Ft[0]+", "+Ft[1]+", "+Ft[2]+", "+Ft[3]+")"}function qe(Ft,Kt){return Ft[0]===Kt[0]&&Ft[1]===Kt[1]&&Ft[2]===Kt[2]&&Ft[3]===Kt[3]}function Ye(Ft,Kt){var fn=Ft[0],Gn=Ft[1],on=Ft[2],Pt=Ft[3],zt=Kt[0],ze=Kt[1],rt=Kt[2],jt=Kt[3];return Math.abs(fn-zt)<=K.Ib*Math.max(1,Math.abs(fn),Math.abs(zt))&&Math.abs(Gn-ze)<=K.Ib*Math.max(1,Math.abs(Gn),Math.abs(ze))&&Math.abs(on-rt)<=K.Ib*Math.max(1,Math.abs(on),Math.abs(rt))&&Math.abs(Pt-jt)<=K.Ib*Math.max(1,Math.abs(Pt),Math.abs(jt))}var Lt=null,xt=null,Ie=null,Gt=null,gn=null,Tn=null,sr=null,nr=function(){var Ft=W();return function(Kt,fn,Gn,on,Pt,zt){var ze,rt;for(fn||(fn=4),Gn||(Gn=0),on?rt=Math.min(on*fn+Gn,Kt.length):rt=Kt.length,ze=Gn;ze<rt;ze+=fn)Ft[0]=Kt[ze],Ft[1]=Kt[ze+1],Ft[2]=Kt[ze+2],Ft[3]=Kt[ze+3],Pt(Ft,Ft,zt),Kt[ze]=Ft[0],Kt[ze+1]=Ft[1],Kt[ze+2]=Ft[2],Kt[ze+3]=Ft[3];return Kt}}()},50840:function(bt,G,L){var K;(function(W,E,he,ee){"use strict";var se=["","webkit","Moz","MS","ms","o"],ue=E.createElement("div"),be="function",oe=Math.round,Ge=Math.abs,te=Date.now;function me(Ct,Wt,jn){return setTimeout(wt(Ct,jn),Wt)}function Pe(Ct,Wt,jn){return Array.isArray(Ct)?($(Ct,jn[Wt],jn),!0):!1}function $(Ct,Wt,jn){var kr;if(Ct)if(Ct.forEach)Ct.forEach(Wt,jn);else if(Ct.length!==ee)for(kr=0;kr<Ct.length;)Wt.call(jn,Ct[kr],kr,Ct),kr++;else for(kr in Ct)Ct.hasOwnProperty(kr)&&Wt.call(jn,Ct[kr],kr,Ct)}function le(Ct,Wt,jn){var kr="DEPRECATED METHOD: "+Wt+`
`+jn+` AT 
`;return function(){var Ci=new Error("get-stack-trace"),qi=Ci&&Ci.stack?Ci.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ta=W.console&&(W.console.warn||W.console.log);return ta&&ta.call(W.console,kr,qi),Ct.apply(this,arguments)}}var J;typeof Object.assign!="function"?J=function(Wt){if(Wt===ee||Wt===null)throw new TypeError("Cannot convert undefined or null to object");for(var jn=Object(Wt),kr=1;kr<arguments.length;kr++){var Ci=arguments[kr];if(Ci!==ee&&Ci!==null)for(var qi in Ci)Ci.hasOwnProperty(qi)&&(jn[qi]=Ci[qi])}return jn}:J=Object.assign;var Ee=le(function(Wt,jn,kr){for(var Ci=Object.keys(jn),qi=0;qi<Ci.length;)(!kr||kr&&Wt[Ci[qi]]===ee)&&(Wt[Ci[qi]]=jn[Ci[qi]]),qi++;return Wt},"extend","Use `assign`."),tt=le(function(Wt,jn){return Ee(Wt,jn,!0)},"merge","Use `assign`.");function Je(Ct,Wt,jn){var kr=Wt.prototype,Ci;Ci=Ct.prototype=Object.create(kr),Ci.constructor=Ct,Ci._super=kr,jn&&J(Ci,jn)}function wt(Ct,Wt){return function(){return Ct.apply(Wt,arguments)}}function pt(Ct,Wt){return typeof Ct==be?Ct.apply(Wt&&Wt[0]||ee,Wt):Ct}function yt(Ct,Wt){return Ct===ee?Wt:Ct}function Re(Ct,Wt,jn){$(lt(Wt),function(kr){Ct.addEventListener(kr,jn,!1)})}function Ce(Ct,Wt,jn){$(lt(Wt),function(kr){Ct.removeEventListener(kr,jn,!1)})}function Ue(Ct,Wt){for(;Ct;){if(Ct==Wt)return!0;Ct=Ct.parentNode}return!1}function We(Ct,Wt){return Ct.indexOf(Wt)>-1}function lt(Ct){return Ct.trim().split(/\s+/g)}function tn(Ct,Wt,jn){if(Ct.indexOf&&!jn)return Ct.indexOf(Wt);for(var kr=0;kr<Ct.length;){if(jn&&Ct[kr][jn]==Wt||!jn&&Ct[kr]===Wt)return kr;kr++}return-1}function Le(Ct){return Array.prototype.slice.call(Ct,0)}function _t(Ct,Wt,jn){for(var kr=[],Ci=[],qi=0;qi<Ct.length;){var ta=Wt?Ct[qi][Wt]:Ct[qi];tn(Ci,ta)<0&&kr.push(Ct[qi]),Ci[qi]=ta,qi++}return jn&&(Wt?kr=kr.sort(function(Ls,ks){return Ls[Wt]>ks[Wt]}):kr=kr.sort()),kr}function Me(Ct,Wt){for(var jn,kr,Ci=Wt[0].toUpperCase()+Wt.slice(1),qi=0;qi<se.length;){if(jn=se[qi],kr=jn?jn+Ci:Wt,kr in Ct)return kr;qi++}return ee}var nt=1;function qe(){return nt++}function Ye(Ct){var Wt=Ct.ownerDocument||Ct;return Wt.defaultView||Wt.parentWindow||W}var Lt=/mobile|tablet|ip(ad|hone|od)|android/i,xt="ontouchstart"in W,Ie=Me(W,"PointerEvent")!==ee,Gt=xt&&Lt.test(navigator.userAgent),gn="touch",Tn="pen",sr="mouse",nr="kinect",Ft=25,Kt=1,fn=2,Gn=4,on=8,Pt=1,zt=2,ze=4,rt=8,jt=16,U=zt|ze,fe=rt|jt,at=U|fe,de=["x","y"],$t=["clientX","clientY"];function sn(Ct,Wt){var jn=this;this.manager=Ct,this.callback=Wt,this.element=Ct.element,this.target=Ct.options.inputTarget,this.domHandler=function(kr){pt(Ct.options.enable,[Ct])&&jn.handler(kr)},this.init()}sn.prototype={handler:function(){},init:function(){this.evEl&&Re(this.element,this.evEl,this.domHandler),this.evTarget&&Re(this.target,this.evTarget,this.domHandler),this.evWin&&Re(Ye(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Ce(this.element,this.evEl,this.domHandler),this.evTarget&&Ce(this.target,this.evTarget,this.domHandler),this.evWin&&Ce(Ye(this.element),this.evWin,this.domHandler)}};function pn(Ct){var Wt,jn=Ct.options.inputClass;return jn?Wt=jn:Ie?Wt=we:Gt?Wt=Qn:xt?Wt=Hr:Wt=Sn,new Wt(Ct,Nn)}function Nn(Ct,Wt,jn){var kr=jn.pointers.length,Ci=jn.changedPointers.length,qi=Wt&Kt&&kr-Ci===0,ta=Wt&(Gn|on)&&kr-Ci===0;jn.isFirst=!!qi,jn.isFinal=!!ta,qi&&(Ct.session={}),jn.eventType=Wt,Wn(Ct,jn),Ct.emit("hammer.input",jn),Ct.recognize(jn),Ct.session.prevInput=jn}function Wn(Ct,Wt){var jn=Ct.session,kr=Wt.pointers,Ci=kr.length;jn.firstInput||(jn.firstInput=vt(Wt)),Ci>1&&!jn.firstMultiple?jn.firstMultiple=vt(Wt):Ci===1&&(jn.firstMultiple=!1);var qi=jn.firstInput,ta=jn.firstMultiple,Us=ta?ta.center:qi.center,Ls=Wt.center=It(kr);Wt.timeStamp=te(),Wt.deltaTime=Wt.timeStamp-qi.timeStamp,Wt.angle=dt(Us,Ls),Wt.distance=Yn(Us,Ls),qn(jn,Wt),Wt.offsetDirection=Dn(Wt.deltaX,Wt.deltaY);var ks=An(Wt.deltaTime,Wt.deltaX,Wt.deltaY);Wt.overallVelocityX=ks.x,Wt.overallVelocityY=ks.y,Wt.overallVelocity=Ge(ks.x)>Ge(ks.y)?ks.x:ks.y,Wt.scale=ta?Be(ta.pointers,kr):1,Wt.rotation=ta?xe(ta.pointers,kr):0,Wt.maxPointers=jn.prevInput?Wt.pointers.length>jn.prevInput.maxPointers?Wt.pointers.length:jn.prevInput.maxPointers:Wt.pointers.length,dn(jn,Wt);var ll=Ct.element;Ue(Wt.srcEvent.target,ll)&&(ll=Wt.srcEvent.target),Wt.target=ll}function qn(Ct,Wt){var jn=Wt.center,kr=Ct.offsetDelta||{},Ci=Ct.prevDelta||{},qi=Ct.prevInput||{};(Wt.eventType===Kt||qi.eventType===Gn)&&(Ci=Ct.prevDelta={x:qi.deltaX||0,y:qi.deltaY||0},kr=Ct.offsetDelta={x:jn.x,y:jn.y}),Wt.deltaX=Ci.x+(jn.x-kr.x),Wt.deltaY=Ci.y+(jn.y-kr.y)}function dn(Ct,Wt){var jn=Ct.lastInterval||Wt,kr=Wt.timeStamp-jn.timeStamp,Ci,qi,ta,Us;if(Wt.eventType!=on&&(kr>Ft||jn.velocity===ee)){var Ls=Wt.deltaX-jn.deltaX,ks=Wt.deltaY-jn.deltaY,ll=An(kr,Ls,ks);qi=ll.x,ta=ll.y,Ci=Ge(ll.x)>Ge(ll.y)?ll.x:ll.y,Us=Dn(Ls,ks),Ct.lastInterval=Wt}else Ci=jn.velocity,qi=jn.velocityX,ta=jn.velocityY,Us=jn.direction;Wt.velocity=Ci,Wt.velocityX=qi,Wt.velocityY=ta,Wt.direction=Us}function vt(Ct){for(var Wt=[],jn=0;jn<Ct.pointers.length;)Wt[jn]={clientX:oe(Ct.pointers[jn].clientX),clientY:oe(Ct.pointers[jn].clientY)},jn++;return{timeStamp:te(),pointers:Wt,center:It(Wt),deltaX:Ct.deltaX,deltaY:Ct.deltaY}}function It(Ct){var Wt=Ct.length;if(Wt===1)return{x:oe(Ct[0].clientX),y:oe(Ct[0].clientY)};for(var jn=0,kr=0,Ci=0;Ci<Wt;)jn+=Ct[Ci].clientX,kr+=Ct[Ci].clientY,Ci++;return{x:oe(jn/Wt),y:oe(kr/Wt)}}function An(Ct,Wt,jn){return{x:Wt/Ct||0,y:jn/Ct||0}}function Dn(Ct,Wt){return Ct===Wt?Pt:Ge(Ct)>=Ge(Wt)?Ct<0?zt:ze:Wt<0?rt:jt}function Yn(Ct,Wt,jn){jn||(jn=de);var kr=Wt[jn[0]]-Ct[jn[0]],Ci=Wt[jn[1]]-Ct[jn[1]];return Math.sqrt(kr*kr+Ci*Ci)}function dt(Ct,Wt,jn){jn||(jn=de);var kr=Wt[jn[0]]-Ct[jn[0]],Ci=Wt[jn[1]]-Ct[jn[1]];return Math.atan2(Ci,kr)*180/Math.PI}function xe(Ct,Wt){return dt(Wt[1],Wt[0],$t)+dt(Ct[1],Ct[0],$t)}function Be(Ct,Wt){return Yn(Wt[0],Wt[1],$t)/Yn(Ct[0],Ct[1],$t)}var st={mousedown:Kt,mousemove:fn,mouseup:Gn},Dt="mousedown",Ot="mousemove mouseup";function Sn(){this.evEl=Dt,this.evWin=Ot,this.pressed=!1,sn.apply(this,arguments)}Je(Sn,sn,{handler:function(Wt){var jn=st[Wt.type];jn&Kt&&Wt.button===0&&(this.pressed=!0),jn&fn&&Wt.which!==1&&(jn=Gn),this.pressed&&(jn&Gn&&(this.pressed=!1),this.callback(this.manager,jn,{pointers:[Wt],changedPointers:[Wt],pointerType:sr,srcEvent:Wt}))}});var er={pointerdown:Kt,pointermove:fn,pointerup:Gn,pointercancel:on,pointerout:on},br={2:gn,3:Tn,4:sr,5:nr},$n="pointerdown",Oe="pointermove pointerup pointercancel";W.MSPointerEvent&&!W.PointerEvent&&($n="MSPointerDown",Oe="MSPointerMove MSPointerUp MSPointerCancel");function we(){this.evEl=$n,this.evWin=Oe,sn.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Je(we,sn,{handler:function(Wt){var jn=this.store,kr=!1,Ci=Wt.type.toLowerCase().replace("ms",""),qi=er[Ci],ta=br[Wt.pointerType]||Wt.pointerType,Us=ta==gn,Ls=tn(jn,Wt.pointerId,"pointerId");qi&Kt&&(Wt.button===0||Us)?Ls<0&&(jn.push(Wt),Ls=jn.length-1):qi&(Gn|on)&&(kr=!0),!(Ls<0)&&(jn[Ls]=Wt,this.callback(this.manager,qi,{pointers:jn,changedPointers:[Wt],pointerType:ta,srcEvent:Wt}),kr&&jn.splice(Ls,1))}});var Ve={touchstart:Kt,touchmove:fn,touchend:Gn,touchcancel:on},it="touchstart",At="touchstart touchmove touchend touchcancel";function qt(){this.evTarget=it,this.evWin=At,this.started=!1,sn.apply(this,arguments)}Je(qt,sn,{handler:function(Wt){var jn=Ve[Wt.type];if(jn===Kt&&(this.started=!0),!!this.started){var kr=un.call(this,Wt,jn);jn&(Gn|on)&&kr[0].length-kr[1].length===0&&(this.started=!1),this.callback(this.manager,jn,{pointers:kr[0],changedPointers:kr[1],pointerType:gn,srcEvent:Wt})}}});function un(Ct,Wt){var jn=Le(Ct.touches),kr=Le(Ct.changedTouches);return Wt&(Gn|on)&&(jn=_t(jn.concat(kr),"identifier",!0)),[jn,kr]}var St={touchstart:Kt,touchmove:fn,touchend:Gn,touchcancel:on},Jt="touchstart touchmove touchend touchcancel";function Qn(){this.evTarget=Jt,this.targetIds={},sn.apply(this,arguments)}Je(Qn,sn,{handler:function(Wt){var jn=St[Wt.type],kr=Er.call(this,Wt,jn);kr&&this.callback(this.manager,jn,{pointers:kr[0],changedPointers:kr[1],pointerType:gn,srcEvent:Wt})}});function Er(Ct,Wt){var jn=Le(Ct.touches),kr=this.targetIds;if(Wt&(Kt|fn)&&jn.length===1)return kr[jn[0].identifier]=!0,[jn,jn];var Ci,qi,ta=Le(Ct.changedTouches),Us=[],Ls=this.target;if(qi=jn.filter(function(ks){return Ue(ks.target,Ls)}),Wt===Kt)for(Ci=0;Ci<qi.length;)kr[qi[Ci].identifier]=!0,Ci++;for(Ci=0;Ci<ta.length;)kr[ta[Ci].identifier]&&Us.push(ta[Ci]),Wt&(Gn|on)&&delete kr[ta[Ci].identifier],Ci++;if(Us.length)return[_t(qi.concat(Us),"identifier",!0),Us]}var Gr=2500,mr=25;function Hr(){sn.apply(this,arguments);var Ct=wt(this.handler,this);this.touch=new Qn(this.manager,Ct),this.mouse=new Sn(this.manager,Ct),this.primaryTouch=null,this.lastTouches=[]}Je(Hr,sn,{handler:function(Wt,jn,kr){var Ci=kr.pointerType==gn,qi=kr.pointerType==sr;if(!(qi&&kr.sourceCapabilities&&kr.sourceCapabilities.firesTouchEvents)){if(Ci)wi.call(this,jn,kr);else if(qi&&wr.call(this,kr))return;this.callback(Wt,jn,kr)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function wi(Ct,Wt){Ct&Kt?(this.primaryTouch=Wt.changedPointers[0].identifier,Pi.call(this,Wt)):Ct&(Gn|on)&&Pi.call(this,Wt)}function Pi(Ct){var Wt=Ct.changedPointers[0];if(Wt.identifier===this.primaryTouch){var jn={x:Wt.clientX,y:Wt.clientY};this.lastTouches.push(jn);var kr=this.lastTouches,Ci=function(){var qi=kr.indexOf(jn);qi>-1&&kr.splice(qi,1)};setTimeout(Ci,Gr)}}function wr(Ct){for(var Wt=Ct.srcEvent.clientX,jn=Ct.srcEvent.clientY,kr=0;kr<this.lastTouches.length;kr++){var Ci=this.lastTouches[kr],qi=Math.abs(Wt-Ci.x),ta=Math.abs(jn-Ci.y);if(qi<=mr&&ta<=mr)return!0}return!1}var gi=Me(ue.style,"touchAction"),di=gi!==ee,xi="compute",Fo="auto",Ai="manipulation",ea="none",_a="pan-x",fi="pan-y",Ji=Ht();function $e(Ct,Wt){this.manager=Ct,this.set(Wt)}$e.prototype={set:function(Ct){Ct==xi&&(Ct=this.compute()),di&&this.manager.element.style&&Ji[Ct]&&(this.manager.element.style[gi]=Ct),this.actions=Ct.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Ct=[];return $(this.manager.recognizers,function(Wt){pt(Wt.options.enable,[Wt])&&(Ct=Ct.concat(Wt.getTouchAction()))}),ht(Ct.join(" "))},preventDefaults:function(Ct){var Wt=Ct.srcEvent,jn=Ct.offsetDirection;if(this.manager.session.prevented){Wt.preventDefault();return}var kr=this.actions,Ci=We(kr,ea)&&!Ji[ea],qi=We(kr,fi)&&!Ji[fi],ta=We(kr,_a)&&!Ji[_a];if(Ci){var Us=Ct.pointers.length===1,Ls=Ct.distance<2,ks=Ct.deltaTime<250;if(Us&&Ls&&ks)return}if(!(ta&&qi)&&(Ci||qi&&jn&U||ta&&jn&fe))return this.preventSrc(Wt)},preventSrc:function(Ct){this.manager.session.prevented=!0,Ct.preventDefault()}};function ht(Ct){if(We(Ct,ea))return ea;var Wt=We(Ct,_a),jn=We(Ct,fi);return Wt&&jn?ea:Wt||jn?Wt?_a:fi:We(Ct,Ai)?Ai:Fo}function Ht(){if(!di)return!1;var Ct={},Wt=W.CSS&&W.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(jn){Ct[jn]=Wt?W.CSS.supports("touch-action",jn):!0}),Ct}var hn=1,Fn=2,Bn=4,yn=8,On=yn,pr=16,hr=32;function oi(Ct){this.options=J({},this.defaults,Ct||{}),this.id=qe(),this.manager=null,this.options.enable=yt(this.options.enable,!0),this.state=hn,this.simultaneous={},this.requireFail=[]}oi.prototype={defaults:{},set:function(Ct){return J(this.options,Ct),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Ct){if(Pe(Ct,"recognizeWith",this))return this;var Wt=this.simultaneous;return Ct=ai(Ct,this),Wt[Ct.id]||(Wt[Ct.id]=Ct,Ct.recognizeWith(this)),this},dropRecognizeWith:function(Ct){return Pe(Ct,"dropRecognizeWith",this)?this:(Ct=ai(Ct,this),delete this.simultaneous[Ct.id],this)},requireFailure:function(Ct){if(Pe(Ct,"requireFailure",this))return this;var Wt=this.requireFail;return Ct=ai(Ct,this),tn(Wt,Ct)===-1&&(Wt.push(Ct),Ct.requireFailure(this)),this},dropRequireFailure:function(Ct){if(Pe(Ct,"dropRequireFailure",this))return this;Ct=ai(Ct,this);var Wt=tn(this.requireFail,Ct);return Wt>-1&&this.requireFail.splice(Wt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Ct){return!!this.simultaneous[Ct.id]},emit:function(Ct){var Wt=this,jn=this.state;function kr(Ci){Wt.manager.emit(Ci,Ct)}jn<yn&&kr(Wt.options.event+Xi(jn)),kr(Wt.options.event),Ct.additionalEvent&&kr(Ct.additionalEvent),jn>=yn&&kr(Wt.options.event+Xi(jn))},tryEmit:function(Ct){if(this.canEmit())return this.emit(Ct);this.state=hr},canEmit:function(){for(var Ct=0;Ct<this.requireFail.length;){if(!(this.requireFail[Ct].state&(hr|hn)))return!1;Ct++}return!0},recognize:function(Ct){var Wt=J({},Ct);if(!pt(this.options.enable,[this,Wt])){this.reset(),this.state=hr;return}this.state&(On|pr|hr)&&(this.state=hn),this.state=this.process(Wt),this.state&(Fn|Bn|yn|pr)&&this.tryEmit(Wt)},process:function(Ct){},getTouchAction:function(){},reset:function(){}};function Xi(Ct){return Ct&pr?"cancel":Ct&yn?"end":Ct&Bn?"move":Ct&Fn?"start":""}function io(Ct){return Ct==jt?"down":Ct==rt?"up":Ct==zt?"left":Ct==ze?"right":""}function ai(Ct,Wt){var jn=Wt.manager;return jn?jn.get(Ct):Ct}function Yi(){oi.apply(this,arguments)}Je(Yi,oi,{defaults:{pointers:1},attrTest:function(Ct){var Wt=this.options.pointers;return Wt===0||Ct.pointers.length===Wt},process:function(Ct){var Wt=this.state,jn=Ct.eventType,kr=Wt&(Fn|Bn),Ci=this.attrTest(Ct);return kr&&(jn&on||!Ci)?Wt|pr:kr||Ci?jn&Gn?Wt|yn:Wt&Fn?Wt|Bn:Fn:hr}});function ji(){Yi.apply(this,arguments),this.pX=null,this.pY=null}Je(ji,Yi,{defaults:{event:"pan",threshold:10,pointers:1,direction:at},getTouchAction:function(){var Ct=this.options.direction,Wt=[];return Ct&U&&Wt.push(fi),Ct&fe&&Wt.push(_a),Wt},directionTest:function(Ct){var Wt=this.options,jn=!0,kr=Ct.distance,Ci=Ct.direction,qi=Ct.deltaX,ta=Ct.deltaY;return Ci&Wt.direction||(Wt.direction&U?(Ci=qi===0?Pt:qi<0?zt:ze,jn=qi!=this.pX,kr=Math.abs(Ct.deltaX)):(Ci=ta===0?Pt:ta<0?rt:jt,jn=ta!=this.pY,kr=Math.abs(Ct.deltaY))),Ct.direction=Ci,jn&&kr>Wt.threshold&&Ci&Wt.direction},attrTest:function(Ct){return Yi.prototype.attrTest.call(this,Ct)&&(this.state&Fn||!(this.state&Fn)&&this.directionTest(Ct))},emit:function(Ct){this.pX=Ct.deltaX,this.pY=Ct.deltaY;var Wt=io(Ct.direction);Wt&&(Ct.additionalEvent=this.options.event+Wt),this._super.emit.call(this,Ct)}});function Yr(){Yi.apply(this,arguments)}Je(Yr,Yi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ea]},attrTest:function(Ct){return this._super.attrTest.call(this,Ct)&&(Math.abs(Ct.scale-1)>this.options.threshold||this.state&Fn)},emit:function(Ct){if(Ct.scale!==1){var Wt=Ct.scale<1?"in":"out";Ct.additionalEvent=this.options.event+Wt}this._super.emit.call(this,Ct)}});function To(){oi.apply(this,arguments),this._timer=null,this._input=null}Je(To,oi,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Fo]},process:function(Ct){var Wt=this.options,jn=Ct.pointers.length===Wt.pointers,kr=Ct.distance<Wt.threshold,Ci=Ct.deltaTime>Wt.time;if(this._input=Ct,!kr||!jn||Ct.eventType&(Gn|on)&&!Ci)this.reset();else if(Ct.eventType&Kt)this.reset(),this._timer=me(function(){this.state=On,this.tryEmit()},Wt.time,this);else if(Ct.eventType&Gn)return On;return hr},reset:function(){clearTimeout(this._timer)},emit:function(Ct){this.state===On&&(Ct&&Ct.eventType&Gn?this.manager.emit(this.options.event+"up",Ct):(this._input.timeStamp=te(),this.manager.emit(this.options.event,this._input)))}});function mi(){Yi.apply(this,arguments)}Je(mi,Yi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ea]},attrTest:function(Ct){return this._super.attrTest.call(this,Ct)&&(Math.abs(Ct.rotation)>this.options.threshold||this.state&Fn)}});function wo(){Yi.apply(this,arguments)}Je(wo,Yi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:U|fe,pointers:1},getTouchAction:function(){return ji.prototype.getTouchAction.call(this)},attrTest:function(Ct){var Wt=this.options.direction,jn;return Wt&(U|fe)?jn=Ct.overallVelocity:Wt&U?jn=Ct.overallVelocityX:Wt&fe&&(jn=Ct.overallVelocityY),this._super.attrTest.call(this,Ct)&&Wt&Ct.offsetDirection&&Ct.distance>this.options.threshold&&Ct.maxPointers==this.options.pointers&&Ge(jn)>this.options.velocity&&Ct.eventType&Gn},emit:function(Ct){var Wt=io(Ct.offsetDirection);Wt&&this.manager.emit(this.options.event+Wt,Ct),this.manager.emit(this.options.event,Ct)}});function $i(){oi.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Je($i,oi,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ai]},process:function(Ct){var Wt=this.options,jn=Ct.pointers.length===Wt.pointers,kr=Ct.distance<Wt.threshold,Ci=Ct.deltaTime<Wt.time;if(this.reset(),Ct.eventType&Kt&&this.count===0)return this.failTimeout();if(kr&&Ci&&jn){if(Ct.eventType!=Gn)return this.failTimeout();var qi=this.pTime?Ct.timeStamp-this.pTime<Wt.interval:!0,ta=!this.pCenter||Yn(this.pCenter,Ct.center)<Wt.posThreshold;this.pTime=Ct.timeStamp,this.pCenter=Ct.center,!ta||!qi?this.count=1:this.count+=1,this._input=Ct;var Us=this.count%Wt.taps;if(Us===0)return this.hasRequireFailures()?(this._timer=me(function(){this.state=On,this.tryEmit()},Wt.interval,this),Fn):On}return hr},failTimeout:function(){return this._timer=me(function(){this.state=hr},this.options.interval,this),hr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==On&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function co(Ct,Wt){return Wt=Wt||{},Wt.recognizers=yt(Wt.recognizers,co.defaults.preset),new ba(Ct,Wt)}co.VERSION="2.0.7",co.defaults={domEvents:!1,touchAction:xi,enable:!0,inputTarget:null,inputClass:null,preset:[[mi,{enable:!1}],[Yr,{enable:!1},["rotate"]],[wo,{direction:U}],[ji,{direction:U},["swipe"]],[$i],[$i,{event:"doubletap",taps:2},["tap"]],[To]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Mo=1,bs=2;function ba(Ct,Wt){this.options=J({},co.defaults,Wt||{}),this.options.inputTarget=this.options.inputTarget||Ct,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Ct,this.input=pn(this),this.touchAction=new $e(this,this.options.touchAction),ra(this,!0),$(this.options.recognizers,function(jn){var kr=this.add(new jn[0](jn[1]));jn[2]&&kr.recognizeWith(jn[2]),jn[3]&&kr.requireFailure(jn[3])},this)}ba.prototype={set:function(Ct){return J(this.options,Ct),Ct.touchAction&&this.touchAction.update(),Ct.inputTarget&&(this.input.destroy(),this.input.target=Ct.inputTarget,this.input.init()),this},stop:function(Ct){this.session.stopped=Ct?bs:Mo},recognize:function(Ct){var Wt=this.session;if(!Wt.stopped){this.touchAction.preventDefaults(Ct);var jn,kr=this.recognizers,Ci=Wt.curRecognizer;(!Ci||Ci&&Ci.state&On)&&(Ci=Wt.curRecognizer=null);for(var qi=0;qi<kr.length;)jn=kr[qi],Wt.stopped!==bs&&(!Ci||jn==Ci||jn.canRecognizeWith(Ci))?jn.recognize(Ct):jn.reset(),!Ci&&jn.state&(Fn|Bn|yn)&&(Ci=Wt.curRecognizer=jn),qi++}},get:function(Ct){if(Ct instanceof oi)return Ct;for(var Wt=this.recognizers,jn=0;jn<Wt.length;jn++)if(Wt[jn].options.event==Ct)return Wt[jn];return null},add:function(Ct){if(Pe(Ct,"add",this))return this;var Wt=this.get(Ct.options.event);return Wt&&this.remove(Wt),this.recognizers.push(Ct),Ct.manager=this,this.touchAction.update(),Ct},remove:function(Ct){if(Pe(Ct,"remove",this))return this;if(Ct=this.get(Ct),Ct){var Wt=this.recognizers,jn=tn(Wt,Ct);jn!==-1&&(Wt.splice(jn,1),this.touchAction.update())}return this},on:function(Ct,Wt){if(Ct!==ee&&Wt!==ee){var jn=this.handlers;return $(lt(Ct),function(kr){jn[kr]=jn[kr]||[],jn[kr].push(Wt)}),this}},off:function(Ct,Wt){if(Ct!==ee){var jn=this.handlers;return $(lt(Ct),function(kr){Wt?jn[kr]&&jn[kr].splice(tn(jn[kr],Wt),1):delete jn[kr]}),this}},emit:function(Ct,Wt){this.options.domEvents&&ms(Ct,Wt);var jn=this.handlers[Ct]&&this.handlers[Ct].slice();if(!(!jn||!jn.length)){Wt.type=Ct,Wt.preventDefault=function(){Wt.srcEvent.preventDefault()};for(var kr=0;kr<jn.length;)jn[kr](Wt),kr++}},destroy:function(){this.element&&ra(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ra(Ct,Wt){var jn=Ct.element;if(jn.style){var kr;$(Ct.options.cssProps,function(Ci,qi){kr=Me(jn.style,qi),Wt?(Ct.oldCssProps[kr]=jn.style[kr],jn.style[kr]=Ci):jn.style[kr]=Ct.oldCssProps[kr]||""}),Wt||(Ct.oldCssProps={})}}function ms(Ct,Wt){var jn=E.createEvent("Event");jn.initEvent(Ct,!0,!0),jn.gesture=Wt,Wt.target.dispatchEvent(jn)}J(co,{INPUT_START:Kt,INPUT_MOVE:fn,INPUT_END:Gn,INPUT_CANCEL:on,STATE_POSSIBLE:hn,STATE_BEGAN:Fn,STATE_CHANGED:Bn,STATE_ENDED:yn,STATE_RECOGNIZED:On,STATE_CANCELLED:pr,STATE_FAILED:hr,DIRECTION_NONE:Pt,DIRECTION_LEFT:zt,DIRECTION_RIGHT:ze,DIRECTION_UP:rt,DIRECTION_DOWN:jt,DIRECTION_HORIZONTAL:U,DIRECTION_VERTICAL:fe,DIRECTION_ALL:at,Manager:ba,Input:sn,TouchAction:$e,TouchInput:Qn,MouseInput:Sn,PointerEventInput:we,TouchMouseInput:Hr,SingleTouchInput:qt,Recognizer:oi,AttrRecognizer:Yi,Tap:$i,Pan:ji,Swipe:wo,Pinch:Yr,Rotate:mi,Press:To,on:Re,off:Ce,each:$,merge:tt,extend:Ee,assign:J,inherit:Je,bindFn:wt,prefixed:Me});var ls=typeof W!="undefined"?W:typeof self!="undefined"?self:{};ls.Hammer=co,K=function(){return co}.call(G,L,G,bt),K!==ee&&(bt.exports=K)})(window,document,"Hammer")},47443:function(bt,G,L){var K=L(42118);function W(E,he){var ee=E==null?0:E.length;return!!ee&&K(E,he,0)>-1}bt.exports=W},1196:function(bt){function G(L,K,W){for(var E=-1,he=L==null?0:L.length;++E<he;)if(W(K,L[E]))return!0;return!1}bt.exports=G},29750:function(bt){function G(L,K,W){return L===L&&(W!==void 0&&(L=L<=W?L:W),K!==void 0&&(L=L>=K?L:K)),L}bt.exports=G},41848:function(bt){function G(L,K,W,E){for(var he=L.length,ee=W+(E?1:-1);E?ee--:++ee<he;)if(K(L[ee],ee,L))return ee;return-1}bt.exports=G},42118:function(bt,G,L){var K=L(41848),W=L(62722),E=L(39375);function he(ee,se,ue){return se===se?E(ee,se,ue):K(ee,W,ue)}bt.exports=he},74221:function(bt){function G(L,K,W,E){for(var he=W-1,ee=L.length;++he<ee;)if(E(L[he],K))return he;return-1}bt.exports=G},62722:function(bt){function G(L){return L!==L}bt.exports=G},65464:function(bt,G,L){var K=L(29932),W=L(42118),E=L(74221),he=L(51717),ee=L(6450),se=Array.prototype,ue=se.splice;function be(oe,Ge,te,me){var Pe=me?E:W,$=-1,le=Ge.length,J=oe;for(oe===Ge&&(Ge=ee(Ge)),te&&(J=K(oe,he(te)));++$<le;)for(var Ee=0,tt=Ge[$],Je=te?te(tt):tt;(Ee=Pe(J,Je,Ee,me))>-1;)J!==oe&&ue.call(J,Ee,1),ue.call(oe,Ee,1);return oe}bt.exports=be},45652:function(bt,G,L){var K=L(88668),W=L(47443),E=L(1196),he=L(74757),ee=L(23593),se=L(21814),ue=200;function be(oe,Ge,te){var me=-1,Pe=W,$=oe.length,le=!0,J=[],Ee=J;if(te)le=!1,Pe=E;else if($>=ue){var tt=Ge?null:ee(oe);if(tt)return se(tt);le=!1,Pe=he,Ee=new K}else Ee=Ge?[]:J;e:for(;++me<$;){var Je=oe[me],wt=Ge?Ge(Je):Je;if(Je=te||Je!==0?Je:0,le&&wt===wt){for(var pt=Ee.length;pt--;)if(Ee[pt]===wt)continue e;Ge&&Ee.push(wt),J.push(Je)}else Pe(Ee,wt,te)||(Ee!==J&&Ee.push(wt),J.push(Je))}return J}bt.exports=be},23593:function(bt,G,L){var K=L(58525),W=L(28117),E=L(21814),he=1/0,ee=K&&1/E(new K([,-0]))[1]==he?function(se){return new K(se)}:W;bt.exports=ee},39375:function(bt){function G(L,K,W){for(var E=W-1,he=L.length;++E<he;)if(L[E]===K)return E;return-1}bt.exports=G},74691:function(bt,G,L){var K=L(29750),W=L(14841);function E(he,ee,se){return se===void 0&&(se=ee,ee=void 0),se!==void 0&&(se=W(se),se=se===se?se:0),ee!==void 0&&(ee=W(ee),ee=ee===ee?ee:0),K(W(he),ee,se)}bt.exports=E},51584:function(bt,G,L){var K=L(44239),W=L(37005),E="[object Boolean]";function he(ee){return ee===!0||ee===!1||W(ee)&&K(ee)==E}bt.exports=he},18446:function(bt,G,L){var K=L(90939);function W(E,he){return K(E,he)}bt.exports=W},14293:function(bt){function G(L){return L==null}bt.exports=G},81763:function(bt,G,L){var K=L(44239),W=L(37005),E="[object Number]";function he(ee){return typeof ee=="number"||W(ee)&&K(ee)==E}bt.exports=he},52353:function(bt){function G(L){return L===void 0}bt.exports=G},30236:function(bt,G,L){var K=L(42980),W=L(21463),E=W(function(he,ee,se,ue){K(he,ee,se,ue)});bt.exports=E},28117:function(bt){function G(){}bt.exports=G},97019:function(bt,G,L){var K=L(5976),W=L(45604),E=K(W);bt.exports=E},45604:function(bt,G,L){var K=L(65464);function W(E,he){return E&&E.length&&he&&he.length?K(E,he):E}bt.exports=W},44908:function(bt,G,L){var K=L(45652);function W(E){return E&&E.length?K(E):[]}bt.exports=W},6158:function(bt){(function(G,L){bt.exports=L()})(this,function(){"use strict";var G,L,K;function W(E,he){if(!G)G=he;else if(!L)L=he;else{var ee="var sharedChunk = {}; ("+G+")(sharedChunk); ("+L+")(sharedChunk);",se={};G(se),K=he(se),typeof window!="undefined"&&(K.workerUrl=window.URL.createObjectURL(new Blob([ee],{type:"text/javascript"})))}}return W(["exports"],function(E){"use strict";function he(u,d){return u(d={exports:{}},d.exports),d.exports}var ee=se;function se(u,d,g,A){this.cx=3*u,this.bx=3*(g-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(A-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=A,this.p2x=g,this.p2y=A}se.prototype.sampleCurveX=function(u){return((this.ax*u+this.bx)*u+this.cx)*u},se.prototype.sampleCurveY=function(u){return((this.ay*u+this.by)*u+this.cy)*u},se.prototype.sampleCurveDerivativeX=function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},se.prototype.solveCurveX=function(u,d){var g,A,P,F,j;for(d===void 0&&(d=1e-6),P=u,j=0;j<8;j++){if(F=this.sampleCurveX(P)-u,Math.abs(F)<d)return P;var q=this.sampleCurveDerivativeX(P);if(Math.abs(q)<1e-6)break;P-=F/q}if((P=u)<(g=0))return g;if(P>(A=1))return A;for(;g<A;){if(F=this.sampleCurveX(P),Math.abs(F-u)<d)return P;u>F?g=P:A=P,P=.5*(A-g)+g}return P},se.prototype.solve=function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))};var ue=be;function be(u,d){this.x=u,this.y=d}be.prototype={clone:function(){return new be(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,d){return this.clone()._rotateAround(u,d)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var d=u.x-this.x,g=u.y-this.y;return d*d+g*g},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,d){return Math.atan2(this.x*d-this.y*u,this.x*u+this.y*d)},_matMult:function(u){var d=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=d,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var d=Math.cos(u),g=Math.sin(u),A=g*this.x+d*this.y;return this.x=d*this.x-g*this.y,this.y=A,this},_rotateAround:function(u,d){var g=Math.cos(u),A=Math.sin(u),P=d.y+A*(this.x-d.x)+g*(this.y-d.y);return this.x=d.x+g*(this.x-d.x)-A*(this.y-d.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},be.convert=function(u){return u instanceof be?u:Array.isArray(u)?new be(u[0],u[1]):u};var oe=typeof self!="undefined"?self:{},Ge=Math.pow(2,53)-1;function te(u,d,g,A){var P=new ee(u,d,g,A);return function(F){return P.solve(F)}}var me=te(.25,.1,.25,1);function Pe(u,d,g){return Math.min(g,Math.max(d,u))}function $(u,d,g){var A=g-d,P=((u-d)%A+A)%A+d;return P===d?g:P}function le(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];for(var A=0,P=d;A<P.length;A+=1){var F=P[A];for(var j in F)u[j]=F[j]}return u}var J=1;function Ee(){return J++}function tt(){return function u(d){return d?(d^16*Math.random()>>d/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,u)}()}function Je(u){return!!u&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u)}function wt(u,d){u.forEach(function(g){d[g]&&(d[g]=d[g].bind(d))})}function pt(u,d){return u.indexOf(d,u.length-d.length)!==-1}function yt(u,d,g){var A={};for(var P in u)A[P]=d.call(g||this,u[P],P,u);return A}function Re(u,d,g){var A={};for(var P in u)d.call(g||this,u[P],P,u)&&(A[P]=u[P]);return A}function Ce(u){return Array.isArray(u)?u.map(Ce):typeof u=="object"&&u?yt(u,Ce):u}var Ue={};function We(u){Ue[u]||(typeof console!="undefined"&&console.warn(u),Ue[u]=!0)}function lt(u,d,g){return(g.y-u.y)*(d.x-u.x)>(d.y-u.y)*(g.x-u.x)}function tn(u){for(var d=0,g=0,A=u.length,P=A-1,F=void 0,j=void 0;g<A;P=g++)d+=((j=u[P]).x-(F=u[g]).x)*(F.y+j.y);return d}function Le(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function _t(u){var d={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(A,P,F,j){var q=F||j;return d[P]=!q||q.toLowerCase(),""}),d["max-age"]){var g=parseInt(d["max-age"],10);isNaN(g)?delete d["max-age"]:d["max-age"]=g}return d}var Me=null;function nt(u){if(Me==null){var d=u.navigator?u.navigator.userAgent:null;Me=!!u.safari||!(!d||!(/\b(iPad|iPhone|iPod)\b/.test(d)||d.match("Safari")&&!d.match("Chrome")))}return Me}function qe(u){try{var d=oe[u];return d.setItem("_mapbox_test_",1),d.removeItem("_mapbox_test_"),!0}catch(g){return!1}}var Ye,Lt,xt,Ie,Gt=oe.performance&&oe.performance.now?oe.performance.now.bind(oe.performance):Date.now.bind(Date),gn=oe.requestAnimationFrame||oe.mozRequestAnimationFrame||oe.webkitRequestAnimationFrame||oe.msRequestAnimationFrame,Tn=oe.cancelAnimationFrame||oe.mozCancelAnimationFrame||oe.webkitCancelAnimationFrame||oe.msCancelAnimationFrame,sr={now:Gt,frame:function(u){var d=gn(u);return{cancel:function(){return Tn(d)}}},getImageData:function(u,d){d===void 0&&(d=0);var g=oe.document.createElement("canvas"),A=g.getContext("2d");if(!A)throw new Error("failed to create canvas 2d context");return g.width=u.width,g.height=u.height,A.drawImage(u,0,0,u.width,u.height),A.getImageData(-d,-d,u.width+2*d,u.height+2*d)},resolveURL:function(u){return Ye||(Ye=oe.document.createElement("a")),Ye.href=u,Ye.href},hardwareConcurrency:oe.navigator&&oe.navigator.hardwareConcurrency||4,get devicePixelRatio(){return oe.devicePixelRatio},get prefersReducedMotion(){return!!oe.matchMedia&&(Lt==null&&(Lt=oe.matchMedia("(prefers-reduced-motion: reduce)")),Lt.matches)}},nr={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ft={supported:!1,testSupport:function(u){!Kt&&Ie&&(fn?Gn(u):xt=u)}},Kt=!1,fn=!1;function Gn(u){var d=u.createTexture();u.bindTexture(u.TEXTURE_2D,d);try{if(u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,Ie),u.isContextLost())return;Ft.supported=!0}catch(g){}u.deleteTexture(d),Kt=!0}oe.document&&((Ie=oe.document.createElement("img")).onload=function(){xt&&Gn(xt),xt=null,fn=!0},Ie.onerror=function(){Kt=!0,xt=null},Ie.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var on="01",Pt=function(u,d){this._transformRequestFn=u,this._customAccessToken=d,this._createSkuToken()};function zt(u){return u.indexOf("mapbox:")===0}Pt.prototype._createSkuToken=function(){var u=function(){for(var d="",g=0;g<10;g++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",on,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=u.token,this._skuTokenExpiresAt=u.tokenExpiresAt},Pt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Pt.prototype.transformRequest=function(u,d){return this._transformRequestFn&&this._transformRequestFn(u,d)||{url:u}},Pt.prototype.normalizeStyleURL=function(u,d){if(!zt(u))return u;var g=U(u);return g.path="/styles/v1"+g.path,this._makeAPIURL(g,this._customAccessToken||d)},Pt.prototype.normalizeGlyphsURL=function(u,d){if(!zt(u))return u;var g=U(u);return g.path="/fonts/v1"+g.path,this._makeAPIURL(g,this._customAccessToken||d)},Pt.prototype.normalizeSourceURL=function(u,d){if(!zt(u))return u;var g=U(u);return g.path="/v4/"+g.authority+".json",g.params.push("secure"),this._makeAPIURL(g,this._customAccessToken||d)},Pt.prototype.normalizeSpriteURL=function(u,d,g,A){var P=U(u);return zt(u)?(P.path="/styles/v1"+P.path+"/sprite"+d+g,this._makeAPIURL(P,this._customAccessToken||A)):(P.path+=""+d+g,fe(P))},Pt.prototype.normalizeTileURL=function(u,d){if(this._isSkuTokenExpired()&&this._createSkuToken(),u&&!zt(u))return u;var g=U(u);g.path=g.path.replace(/(\.(png|jpg)\d*)(?=$)/,(sr.devicePixelRatio>=2||d===512?"@2x":"")+(Ft.supported?".webp":"$1")),g.path=g.path.replace(/^.+\/v4\//,"/"),g.path="/v4"+g.path;var A=this._customAccessToken||function(P){for(var F=0,j=P;F<j.length;F+=1){var q=j[F].match(/^access_token=(.*)$/);if(q)return q[1]}return null}(g.params)||nr.ACCESS_TOKEN;return nr.REQUIRE_ACCESS_TOKEN&&A&&this._skuToken&&g.params.push("sku="+this._skuToken),this._makeAPIURL(g,A)},Pt.prototype.canonicalizeTileURL=function(u,d){var g=U(u);if(!g.path.match(/(^\/v4\/)/)||!g.path.match(/\.[\w]+$/))return u;var A="mapbox://tiles/";A+=g.path.replace("/v4/","");var P=g.params;return d&&(P=P.filter(function(F){return!F.match(/^access_token=/)})),P.length&&(A+="?"+P.join("&")),A},Pt.prototype.canonicalizeTileset=function(u,d){for(var g=!!d&&zt(d),A=[],P=0,F=u.tiles||[];P<F.length;P+=1){var j=F[P];rt(j)?A.push(this.canonicalizeTileURL(j,g)):A.push(j)}return A},Pt.prototype._makeAPIURL=function(u,d){var g="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",A=U(nr.API_URL);if(u.protocol=A.protocol,u.authority=A.authority,u.protocol==="http"){var P=u.params.indexOf("secure");P>=0&&u.params.splice(P,1)}if(A.path!=="/"&&(u.path=""+A.path+u.path),!nr.REQUIRE_ACCESS_TOKEN)return fe(u);if(!(d=d||nr.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+g);if(d[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+g);return u.params=u.params.filter(function(F){return F.indexOf("access_token")===-1}),u.params.push("access_token="+d),fe(u)};var ze=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function rt(u){return ze.test(u)}var jt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function U(u){var d=u.match(jt);if(!d)throw new Error("Unable to parse URL object");return{protocol:d[1],authority:d[2],path:d[3]||"/",params:d[4]?d[4].split("&"):[]}}function fe(u){var d=u.params.length?"?"+u.params.join("&"):"";return u.protocol+"://"+u.authority+u.path+d}function at(u){if(!u)return null;var d=u.split(".");if(!d||d.length!==3)return null;try{return JSON.parse(decodeURIComponent(oe.atob(d[1]).split("").map(function(g){return"%"+("00"+g.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(g){return null}}var de=function(u){this.type=u,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};de.prototype.getStorageKey=function(u){var d,g=at(nr.ACCESS_TOKEN);return d=g&&g.u?oe.btoa(encodeURIComponent(g.u).replace(/%([0-9A-F]{2})/g,function(A,P){return String.fromCharCode(+("0x"+P))})):nr.ACCESS_TOKEN||"",u?"mapbox.eventData."+u+":"+d:"mapbox.eventData:"+d},de.prototype.fetchEventData=function(){var u=qe("localStorage"),d=this.getStorageKey(),g=this.getStorageKey("uuid");if(u)try{var A=oe.localStorage.getItem(d);A&&(this.eventData=JSON.parse(A));var P=oe.localStorage.getItem(g);P&&(this.anonId=P)}catch(F){We("Unable to read from LocalStorage")}},de.prototype.saveEventData=function(){var u=qe("localStorage"),d=this.getStorageKey(),g=this.getStorageKey("uuid");if(u)try{oe.localStorage.setItem(g,this.anonId),Object.keys(this.eventData).length>=1&&oe.localStorage.setItem(d,JSON.stringify(this.eventData))}catch(A){We("Unable to write to LocalStorage")}},de.prototype.processRequests=function(u){},de.prototype.postEvent=function(u,d,g,A){var P=this;if(nr.EVENTS_URL){var F=U(nr.EVENTS_URL);F.params.push("access_token="+(A||nr.ACCESS_TOKEN||""));var j={event:this.type,created:new Date(u).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:on,userId:this.anonId},q=d?le(j,d):j,_e={url:fe(F),headers:{"Content-Type":"text/plain"},body:JSON.stringify([q])};this.pendingRequest=$n(_e,function(Ne){P.pendingRequest=null,g(Ne),P.saveEventData(),P.processRequests(A)})}},de.prototype.queueRequest=function(u,d){this.queue.push(u),this.processRequests(d)};var $t,sn,pn=function(u){function d(){u.call(this,"map.load"),this.success={},this.skuToken=""}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.postMapLoadEvent=function(g,A,P,F){this.skuToken=P;var j=!(!F&&!nr.ACCESS_TOKEN),q=Array.isArray(g)&&g.some(function(_e){return zt(_e)||rt(_e)});nr.EVENTS_URL&&j&&q&&this.queueRequest({id:A,timestamp:Date.now()},F)},d.prototype.processRequests=function(g){var A=this;if(!this.pendingRequest&&this.queue.length!==0){var P=this.queue.shift(),F=P.id,j=P.timestamp;F&&this.success[F]||(this.anonId||this.fetchEventData(),Je(this.anonId)||(this.anonId=tt()),this.postEvent(j,{skuToken:this.skuToken},function(q){q||F&&(A.success[F]=!0)},g))}},d}(de),Nn=new(function(u){function d(g){u.call(this,"appUserTurnstile"),this._customAccessToken=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.postTurnstileEvent=function(g,A){nr.EVENTS_URL&&nr.ACCESS_TOKEN&&Array.isArray(g)&&g.some(function(P){return zt(P)||rt(P)})&&this.queueRequest(Date.now(),A)},d.prototype.processRequests=function(g){var A=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var P=at(nr.ACCESS_TOKEN),F=P?P.u:nr.ACCESS_TOKEN,j=F!==this.eventData.tokenU;Je(this.anonId)||(this.anonId=tt(),j=!0);var q=this.queue.shift();if(this.eventData.lastSuccess){var _e=new Date(this.eventData.lastSuccess),Ne=new Date(q),Ze=(q-this.eventData.lastSuccess)/864e5;j=j||Ze>=1||Ze<-1||_e.getDate()!==Ne.getDate()}else j=!0;if(!j)return this.processRequests();this.postEvent(q,{"enabled.telemetry":!1},function(ot){ot||(A.eventData.lastSuccess=q,A.eventData.tokenU=F)},g)}},d}(de)),Wn=Nn.postTurnstileEvent.bind(Nn),qn=new pn,dn=qn.postMapLoadEvent.bind(qn),vt=500,It=50;function An(){oe.caches&&!$t&&($t=oe.caches.open("mapbox-tiles"))}function Dn(u){var d=u.indexOf("?");return d<0?u:u.slice(0,d)}var Yn,dt=1/0;function xe(){return Yn==null&&(Yn=oe.OffscreenCanvas&&new oe.OffscreenCanvas(1,1).getContext("2d")&&typeof oe.createImageBitmap=="function"),Yn}var Be={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Be);var st=function(u){function d(g,A,P){A===401&&rt(P)&&(g+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),u.call(this,g),this.status=A,this.url=P,this.name=this.constructor.name,this.message=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},d}(Error),Dt=Le()?function(){return self.worker&&self.worker.referrer}:function(){return(oe.location.protocol==="blob:"?oe.parent:oe).location.href},Ot,Sn,er=function(u,d){if(!(/^file:/.test(g=u.url)||/^file:/.test(Dt())&&!/^\w+:/.test(g))){if(oe.fetch&&oe.Request&&oe.AbortController&&oe.Request.prototype.hasOwnProperty("signal"))return function(A,P){var F,j=new oe.AbortController,q=new oe.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Dt(),signal:j.signal}),_e=!1,Ne=!1,Ze=(F=q.url).indexOf("sku=")>0&&rt(F);A.type==="json"&&q.headers.set("Accept","application/json");var ot=function(Bt,vn,_n){if(!Ne){if(Bt&&Bt.message!=="SecurityError"&&We(Bt),vn&&_n)return Tt(vn);var Hn=Date.now();oe.fetch(q).then(function(Ln){if(Ln.ok){var fr=Ze?Ln.clone():null;return Tt(Ln,fr,Hn)}return P(new st(Ln.statusText,Ln.status,A.url))}).catch(function(Ln){Ln.code!==20&&P(new Error(Ln.message))})}},Tt=function(Bt,vn,_n){(A.type==="arrayBuffer"?Bt.arrayBuffer():A.type==="json"?Bt.json():Bt.text()).then(function(Hn){Ne||(vn&&_n&&function(Ln,fr,_r){if(An(),$t){var Fr={status:fr.status,statusText:fr.statusText,headers:new oe.Headers};fr.headers.forEach(function($r,Ni){return Fr.headers.set(Ni,$r)});var Br=_t(fr.headers.get("Cache-Control")||"");Br["no-store"]||(Br["max-age"]&&Fr.headers.set("Expires",new Date(_r+1e3*Br["max-age"]).toUTCString()),new Date(Fr.headers.get("Expires")).getTime()-_r<42e4||function($r,Ni){if(sn===void 0)try{new Response(new ReadableStream),sn=!0}catch(eo){sn=!1}sn?Ni($r.body):$r.blob().then(Ni)}(fr,function($r){var Ni=new oe.Response($r,Fr);An(),$t&&$t.then(function(eo){return eo.put(Dn(Ln.url),Ni)}).catch(function(eo){return We(eo.message)})}))}}(q,vn,_n),_e=!0,P(null,Hn,Bt.headers.get("Cache-Control"),Bt.headers.get("Expires")))}).catch(function(Hn){Ne||P(new Error(Hn.message))})};return Ze?function(Bt,vn){if(An(),!$t)return vn(null);var _n=Dn(Bt.url);$t.then(function(Hn){Hn.match(_n).then(function(Ln){var fr=function(_r){if(!_r)return!1;var Fr=new Date(_r.headers.get("Expires")||0),Br=_t(_r.headers.get("Cache-Control")||"");return Fr>Date.now()&&!Br["no-cache"]}(Ln);Hn.delete(_n),fr&&Hn.put(_n,Ln.clone()),vn(null,Ln,fr)}).catch(vn)}).catch(vn)}(q,ot):ot(null,null),{cancel:function(){Ne=!0,_e||j.abort()}}}(u,d);if(Le()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",u,d,void 0,!0)}var g;return function(A,P){var F=new oe.XMLHttpRequest;for(var j in F.open(A.method||"GET",A.url,!0),A.type==="arrayBuffer"&&(F.responseType="arraybuffer"),A.headers)F.setRequestHeader(j,A.headers[j]);return A.type==="json"&&(F.responseType="text",F.setRequestHeader("Accept","application/json")),F.withCredentials=A.credentials==="include",F.onerror=function(){P(new Error(F.statusText))},F.onload=function(){if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){var q=F.response;if(A.type==="json")try{q=JSON.parse(F.response)}catch(_e){return P(_e)}P(null,q,F.getResponseHeader("Cache-Control"),F.getResponseHeader("Expires"))}else P(new st(F.statusText,F.status,A.url))},F.send(A.body),{cancel:function(){return F.abort()}}}(u,d)},br=function(u,d){return er(le(u,{type:"arrayBuffer"}),d)},$n=function(u,d){return er(le(u,{method:"POST"}),d)},Oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ot=[],Sn=0;var we=function(u,d){if(Ft.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*"),Sn>=nr.MAX_PARALLEL_IMAGE_REQUESTS){var g={requestParameters:u,callback:d,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ot.push(g),g}Sn++;var A=!1,P=function(){if(!A)for(A=!0,Sn--;Ot.length&&Sn<nr.MAX_PARALLEL_IMAGE_REQUESTS;){var j=Ot.shift();j.cancelled||(j.cancel=we(j.requestParameters,j.callback).cancel)}},F=br(u,function(j,q,_e,Ne){P(),j?d(j):q&&(xe()?function(Ze,ot){var Tt=new oe.Blob([new Uint8Array(Ze)],{type:"image/png"});oe.createImageBitmap(Tt).then(function(Bt){ot(null,Bt)}).catch(function(Bt){ot(new Error("Could not load image because of "+Bt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(q,d):function(Ze,ot,Tt,Bt){var vn=new oe.Image,_n=oe.URL;vn.onload=function(){ot(null,vn),_n.revokeObjectURL(vn.src),vn.onload=null,oe.requestAnimationFrame(function(){vn.src=Oe})},vn.onerror=function(){return ot(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Hn=new oe.Blob([new Uint8Array(Ze)],{type:"image/png"});vn.cacheControl=Tt,vn.expires=Bt,vn.src=Ze.byteLength?_n.createObjectURL(Hn):Oe}(q,d,_e,Ne))});return{cancel:function(){F.cancel(),P()}}};function Ve(u,d,g){g[u]&&g[u].indexOf(d)!==-1||(g[u]=g[u]||[],g[u].push(d))}function it(u,d,g){if(g&&g[u]){var A=g[u].indexOf(d);A!==-1&&g[u].splice(A,1)}}var At=function(u,d){d===void 0&&(d={}),le(this,d),this.type=u},qt=function(u){function d(g,A){A===void 0&&(A={}),u.call(this,"error",le({error:g},A))}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(At),un=function(){};un.prototype.on=function(u,d){return this._listeners=this._listeners||{},Ve(u,d,this._listeners),this},un.prototype.off=function(u,d){return it(u,d,this._listeners),it(u,d,this._oneTimeListeners),this},un.prototype.once=function(u,d){return this._oneTimeListeners=this._oneTimeListeners||{},Ve(u,d,this._oneTimeListeners),this},un.prototype.fire=function(u,d){typeof u=="string"&&(u=new At(u,d||{}));var g=u.type;if(this.listens(g)){u.target=this;for(var A=0,P=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];A<P.length;A+=1)P[A].call(this,u);for(var F=0,j=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];F<j.length;F+=1){var q=j[F];it(g,q,this._oneTimeListeners),q.call(this,u)}var _e=this._eventedParent;_e&&(le(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_e.fire(u))}else u instanceof qt&&console.error(u.error);return this},un.prototype.listens=function(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)},un.prototype.setEventedParent=function(u,d){return this._eventedParent=u,this._eventedParentData=d,this};var St={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Jt=function(u,d,g,A){this.message=(u?u+": ":"")+g,A&&(this.identifier=A),d!=null&&d.__line__&&(this.line=d.__line__)};function Qn(u){var d=u.value;return d?[new Jt(u.key,d,"constants have been deprecated as of v8")]:[]}function Er(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];for(var A=0,P=d;A<P.length;A+=1){var F=P[A];for(var j in F)u[j]=F[j]}return u}function Gr(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function mr(u){if(Array.isArray(u))return u.map(mr);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){var d={};for(var g in u)d[g]=mr(u[g]);return d}return Gr(u)}var Hr=function(u){function d(g,A){u.call(this,A),this.message=A,this.key=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Error),wi=function(u,d){d===void 0&&(d=[]),this.parent=u,this.bindings={};for(var g=0,A=d;g<A.length;g+=1){var P=A[g];this.bindings[P[0]]=P[1]}};wi.prototype.concat=function(u){return new wi(this,u)},wi.prototype.get=function(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(u+" not found in scope.")},wi.prototype.has=function(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)};var Pi={kind:"null"},wr={kind:"number"},gi={kind:"string"},di={kind:"boolean"},xi={kind:"color"},Fo={kind:"object"},Ai={kind:"value"},ea={kind:"collator"},_a={kind:"formatted"},fi={kind:"resolvedImage"};function Ji(u,d){return{kind:"array",itemType:u,N:d}}function $e(u){if(u.kind==="array"){var d=$e(u.itemType);return typeof u.N=="number"?"array<"+d+", "+u.N+">":u.itemType.kind==="value"?"array":"array<"+d+">"}return u.kind}var ht=[Pi,wr,gi,di,xi,_a,Fo,Ji(Ai),fi];function Ht(u,d){if(d.kind==="error")return null;if(u.kind==="array"){if(d.kind==="array"&&(d.N===0&&d.itemType.kind==="value"||!Ht(u.itemType,d.itemType))&&(typeof u.N!="number"||u.N===d.N))return null}else{if(u.kind===d.kind)return null;if(u.kind==="value"){for(var g=0,A=ht;g<A.length;g+=1)if(!Ht(A[g],d))return null}}return"Expected "+$e(u)+" but found "+$e(d)+" instead."}function hn(u,d){return d.some(function(g){return g.kind===u.kind})}function Fn(u,d){return d.some(function(g){return g==="null"?u===null:g==="array"?Array.isArray(u):g==="object"?u&&!Array.isArray(u)&&typeof u=="object":g===typeof u})}var Bn=he(function(u,d){var g={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function A(q){return(q=Math.round(q))<0?0:q>255?255:q}function P(q){return A(q[q.length-1]==="%"?parseFloat(q)/100*255:parseInt(q))}function F(q){return(_e=q[q.length-1]==="%"?parseFloat(q)/100:parseFloat(q))<0?0:_e>1?1:_e;var _e}function j(q,_e,Ne){return Ne<0?Ne+=1:Ne>1&&(Ne-=1),6*Ne<1?q+(_e-q)*Ne*6:2*Ne<1?_e:3*Ne<2?q+(_e-q)*(2/3-Ne)*6:q}try{d.parseCSSColor=function(q){var _e,Ne=q.replace(/ /g,"").toLowerCase();if(Ne in g)return g[Ne].slice();if(Ne[0]==="#")return Ne.length===4?(_e=parseInt(Ne.substr(1),16))>=0&&_e<=4095?[(3840&_e)>>4|(3840&_e)>>8,240&_e|(240&_e)>>4,15&_e|(15&_e)<<4,1]:null:Ne.length===7&&(_e=parseInt(Ne.substr(1),16))>=0&&_e<=16777215?[(16711680&_e)>>16,(65280&_e)>>8,255&_e,1]:null;var Ze=Ne.indexOf("("),ot=Ne.indexOf(")");if(Ze!==-1&&ot+1===Ne.length){var Tt=Ne.substr(0,Ze),Bt=Ne.substr(Ze+1,ot-(Ze+1)).split(","),vn=1;switch(Tt){case"rgba":if(Bt.length!==4)return null;vn=F(Bt.pop());case"rgb":return Bt.length!==3?null:[P(Bt[0]),P(Bt[1]),P(Bt[2]),vn];case"hsla":if(Bt.length!==4)return null;vn=F(Bt.pop());case"hsl":if(Bt.length!==3)return null;var _n=(parseFloat(Bt[0])%360+360)%360/360,Hn=F(Bt[1]),Ln=F(Bt[2]),fr=Ln<=.5?Ln*(Hn+1):Ln+Hn-Ln*Hn,_r=2*Ln-fr;return[A(255*j(_r,fr,_n+1/3)),A(255*j(_r,fr,_n)),A(255*j(_r,fr,_n-1/3)),vn];default:return null}}return null}}catch(q){}}).parseCSSColor,yn=function(u,d,g,A){A===void 0&&(A=1),this.r=u,this.g=d,this.b=g,this.a=A};yn.parse=function(u){if(u){if(u instanceof yn)return u;if(typeof u=="string"){var d=Bn(u);if(d)return new yn(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3])}}},yn.prototype.toString=function(){var u=this.toArray(),d=u[1],g=u[2],A=u[3];return"rgba("+Math.round(u[0])+","+Math.round(d)+","+Math.round(g)+","+A+")"},yn.prototype.toArray=function(){var u=this.a;return u===0?[0,0,0,0]:[255*this.r/u,255*this.g/u,255*this.b/u,u]},yn.black=new yn(0,0,0,1),yn.white=new yn(1,1,1,1),yn.transparent=new yn(0,0,0,0),yn.red=new yn(1,0,0,1);var On=function(u,d,g){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};On.prototype.compare=function(u,d){return this.collator.compare(u,d)},On.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var pr=function(u,d,g,A,P){this.text=u,this.image=d,this.scale=g,this.fontStack=A,this.textColor=P},hr=function(u){this.sections=u};hr.fromString=function(u){return new hr([new pr(u,null,null,null,null)])},hr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(u){return u.text.length!==0||u.image&&u.image.name.length!==0})},hr.factory=function(u){return u instanceof hr?u:hr.fromString(u)},hr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(u){return u.text}).join("")},hr.prototype.serialize=function(){for(var u=["format"],d=0,g=this.sections;d<g.length;d+=1){var A=g[d];if(A.image)u.push(["image",A.image.name]);else{u.push(A.text);var P={};A.fontStack&&(P["text-font"]=["literal",A.fontStack.split(",")]),A.scale&&(P["font-scale"]=A.scale),A.textColor&&(P["text-color"]=["rgba"].concat(A.textColor.toArray())),u.push(P)}}return u};var oi=function(u){this.name=u.name,this.available=u.available};function Xi(u,d,g,A){return typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255&&typeof g=="number"&&g>=0&&g<=255?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:"Invalid rgba value ["+[u,d,g,A].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof A=="number"?[u,d,g,A]:[u,d,g]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function io(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof yn||u instanceof On||u instanceof hr||u instanceof oi)return!0;if(Array.isArray(u)){for(var d=0,g=u;d<g.length;d+=1)if(!io(g[d]))return!1;return!0}if(typeof u=="object"){for(var A in u)if(!io(u[A]))return!1;return!0}return!1}function ai(u){if(u===null)return Pi;if(typeof u=="string")return gi;if(typeof u=="boolean")return di;if(typeof u=="number")return wr;if(u instanceof yn)return xi;if(u instanceof On)return ea;if(u instanceof hr)return _a;if(u instanceof oi)return fi;if(Array.isArray(u)){for(var d,g=u.length,A=0,P=u;A<P.length;A+=1){var F=ai(P[A]);if(d){if(d===F)continue;d=Ai;break}d=F}return Ji(d||Ai,g)}return Fo}function Yi(u){var d=typeof u;return u===null?"":d==="string"||d==="number"||d==="boolean"?String(u):u instanceof yn||u instanceof hr||u instanceof oi?u.toString():JSON.stringify(u)}oi.prototype.toString=function(){return this.name},oi.fromString=function(u){return u?new oi({name:u,available:!1}):null},oi.prototype.serialize=function(){return["image",this.name]};var ji=function(u,d){this.type=u,this.value=d};ji.parse=function(u,d){if(u.length!==2)return d.error("'literal' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(!io(u[1]))return d.error("invalid value");var g=u[1],A=ai(g),P=d.expectedType;return A.kind!=="array"||A.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(A=P),new ji(A,g)},ji.prototype.evaluate=function(){return this.value},ji.prototype.eachChild=function(){},ji.prototype.outputDefined=function(){return!0},ji.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof yn?["rgba"].concat(this.value.toArray()):this.value instanceof hr?this.value.serialize():this.value};var Yr=function(u){this.name="ExpressionEvaluationError",this.message=u};Yr.prototype.toJSON=function(){return this.message};var To={string:gi,number:wr,boolean:di,object:Fo},mi=function(u,d){this.type=u,this.args=d};mi.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g,A=1,P=u[0];if(P==="array"){var F,j;if(u.length>2){var q=u[1];if(typeof q!="string"||!(q in To)||q==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);F=To[q],A++}else F=Ai;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);j=u[2],A++}g=Ji(F,j)}else g=To[P];for(var _e=[];A<u.length;A++){var Ne=d.parse(u[A],A,Ai);if(!Ne)return null;_e.push(Ne)}return new mi(g,_e)},mi.prototype.evaluate=function(u){for(var d=0;d<this.args.length;d++){var g=this.args[d].evaluate(u);if(!Ht(this.type,ai(g)))return g;if(d===this.args.length-1)throw new Yr("Expected value to be of type "+$e(this.type)+", but found "+$e(ai(g))+" instead.")}return null},mi.prototype.eachChild=function(u){this.args.forEach(u)},mi.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},mi.prototype.serialize=function(){var u=this.type,d=[u.kind];if(u.kind==="array"){var g=u.itemType;if(g.kind==="string"||g.kind==="number"||g.kind==="boolean"){d.push(g.kind);var A=u.N;(typeof A=="number"||this.args.length>1)&&d.push(A)}}return d.concat(this.args.map(function(P){return P.serialize()}))};var wo=function(u){this.type=_a,this.sections=u};wo.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g=u[1];if(!Array.isArray(g)&&typeof g=="object")return d.error("First argument must be an image or text section.");for(var A=[],P=!1,F=1;F<=u.length-1;++F){var j=u[F];if(P&&typeof j=="object"&&!Array.isArray(j)){P=!1;var q=null;if(j["font-scale"]&&!(q=d.parse(j["font-scale"],1,wr)))return null;var _e=null;if(j["text-font"]&&!(_e=d.parse(j["text-font"],1,Ji(gi))))return null;var Ne=null;if(j["text-color"]&&!(Ne=d.parse(j["text-color"],1,xi)))return null;var Ze=A[A.length-1];Ze.scale=q,Ze.font=_e,Ze.textColor=Ne}else{var ot=d.parse(u[F],1,Ai);if(!ot)return null;var Tt=ot.type.kind;if(Tt!=="string"&&Tt!=="value"&&Tt!=="null"&&Tt!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,A.push({content:ot,scale:null,font:null,textColor:null})}}return new wo(A)},wo.prototype.evaluate=function(u){return new hr(this.sections.map(function(d){var g=d.content.evaluate(u);return ai(g)===fi?new pr("",g,null,null,null):new pr(Yi(g),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null)}))},wo.prototype.eachChild=function(u){for(var d=0,g=this.sections;d<g.length;d+=1){var A=g[d];u(A.content),A.scale&&u(A.scale),A.font&&u(A.font),A.textColor&&u(A.textColor)}},wo.prototype.outputDefined=function(){return!1},wo.prototype.serialize=function(){for(var u=["format"],d=0,g=this.sections;d<g.length;d+=1){var A=g[d];u.push(A.content.serialize());var P={};A.scale&&(P["font-scale"]=A.scale.serialize()),A.font&&(P["text-font"]=A.font.serialize()),A.textColor&&(P["text-color"]=A.textColor.serialize()),u.push(P)}return u};var $i=function(u){this.type=fi,this.input=u};$i.parse=function(u,d){if(u.length!==2)return d.error("Expected two arguments.");var g=d.parse(u[1],1,gi);return g?new $i(g):d.error("No image name provided.")},$i.prototype.evaluate=function(u){var d=this.input.evaluate(u),g=oi.fromString(d);return g&&u.availableImages&&(g.available=u.availableImages.indexOf(d)>-1),g},$i.prototype.eachChild=function(u){u(this.input)},$i.prototype.outputDefined=function(){return!1},$i.prototype.serialize=function(){return["image",this.input.serialize()]};var co={"to-boolean":di,"to-color":xi,"to-number":wr,"to-string":gi},Mo=function(u,d){this.type=u,this.args=d};Mo.parse=function(u,d){if(u.length<2)return d.error("Expected at least one argument.");var g=u[0];if((g==="to-boolean"||g==="to-string")&&u.length!==2)return d.error("Expected one argument.");for(var A=co[g],P=[],F=1;F<u.length;F++){var j=d.parse(u[F],F,Ai);if(!j)return null;P.push(j)}return new Mo(A,P)},Mo.prototype.evaluate=function(u){if(this.type.kind==="boolean")return!!this.args[0].evaluate(u);if(this.type.kind==="color"){for(var d,g,A=0,P=this.args;A<P.length;A+=1){if(g=null,(d=P[A].evaluate(u))instanceof yn)return d;if(typeof d=="string"){var F=u.parseColor(d);if(F)return F}else if(Array.isArray(d)&&!(g=d.length<3||d.length>4?"Invalid rbga value "+JSON.stringify(d)+": expected an array containing either three or four numeric values.":Xi(d[0],d[1],d[2],d[3])))return new yn(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Yr(g||"Could not parse color from value '"+(typeof d=="string"?d:String(JSON.stringify(d)))+"'")}if(this.type.kind==="number"){for(var j=null,q=0,_e=this.args;q<_e.length;q+=1){if((j=_e[q].evaluate(u))===null)return 0;var Ne=Number(j);if(!isNaN(Ne))return Ne}throw new Yr("Could not convert "+JSON.stringify(j)+" to number.")}return this.type.kind==="formatted"?hr.fromString(Yi(this.args[0].evaluate(u))):this.type.kind==="resolvedImage"?oi.fromString(Yi(this.args[0].evaluate(u))):Yi(this.args[0].evaluate(u))},Mo.prototype.eachChild=function(u){this.args.forEach(u)},Mo.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},Mo.prototype.serialize=function(){if(this.type.kind==="formatted")return new wo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new $i(this.args[0]).serialize();var u=["to-"+this.type.kind];return this.eachChild(function(d){u.push(d.serialize())}),u};var bs=["Unknown","Point","LineString","Polygon"],ba=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ba.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ba.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?bs[this.feature.type]:this.feature.type:null},ba.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ba.prototype.canonicalID=function(){return this.canonical},ba.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ba.prototype.parseColor=function(u){var d=this._parseColorCache[u];return d||(d=this._parseColorCache[u]=yn.parse(u)),d};var ra=function(u,d,g,A){this.name=u,this.type=d,this._evaluate=g,this.args=A};ra.prototype.evaluate=function(u){return this._evaluate(u,this.args)},ra.prototype.eachChild=function(u){this.args.forEach(u)},ra.prototype.outputDefined=function(){return!1},ra.prototype.serialize=function(){return[this.name].concat(this.args.map(function(u){return u.serialize()}))},ra.parse=function(u,d){var g,A=u[0],P=ra.definitions[A];if(!P)return d.error('Unknown expression "'+A+'". If you wanted a literal array, use ["literal", [...]].',0);for(var F=Array.isArray(P)?P[0]:P.type,j=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,q=j.filter(function($o){var yo=$o[0];return!Array.isArray(yo)||yo.length===u.length-1}),_e=null,Ne=0,Ze=q;Ne<Ze.length;Ne+=1){var ot=Ze[Ne],Tt=ot[0],Bt=ot[1];_e=new of(d.registry,d.path,null,d.scope);for(var vn=[],_n=!1,Hn=1;Hn<u.length;Hn++){var Ln=u[Hn],fr=Array.isArray(Tt)?Tt[Hn-1]:Tt.type,_r=_e.parse(Ln,1+vn.length,fr);if(!_r){_n=!0;break}vn.push(_r)}if(!_n)if(Array.isArray(Tt)&&Tt.length!==vn.length)_e.error("Expected "+Tt.length+" arguments, but found "+vn.length+" instead.");else{for(var Fr=0;Fr<vn.length;Fr++){var Br=Array.isArray(Tt)?Tt[Fr]:Tt.type,$r=vn[Fr];_e.concat(Fr+1).checkSubtype(Br,$r.type)}if(_e.errors.length===0)return new ra(A,F,Bt,vn)}}if(q.length===1)(g=d.errors).push.apply(g,_e.errors);else{for(var Ni=(q.length?q:j).map(function($o){var yo;return yo=$o[0],Array.isArray(yo)?"("+yo.map($e).join(", ")+")":"("+$e(yo.type)+"...)"}).join(" | "),eo=[],zo=1;zo<u.length;zo++){var go=d.parse(u[zo],1+eo.length);if(!go)return null;eo.push($e(go.type))}d.error("Expected arguments of type "+Ni+", but found ("+eo.join(", ")+") instead.")}return null},ra.register=function(u,d){for(var g in ra.definitions=d,d)u[g]=ra};var ms=function(u,d,g){this.type=ea,this.locale=g,this.caseSensitive=u,this.diacriticSensitive=d};function ls(u,d){u[0]=Math.min(u[0],d[0]),u[1]=Math.min(u[1],d[1]),u[2]=Math.max(u[2],d[0]),u[3]=Math.max(u[3],d[1])}function Ct(u,d){return!(u[0]<=d[0]||u[2]>=d[2]||u[1]<=d[1]||u[3]>=d[3])}function Wt(u,d){var g=(180+u[0])/360,A=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,P=Math.pow(2,d.z);return[Math.round(g*P*8192),Math.round(A*P*8192)]}function jn(u,d,g){return d[1]>u[1]!=g[1]>u[1]&&u[0]<(g[0]-d[0])*(u[1]-d[1])/(g[1]-d[1])+d[0]}function kr(u,d){for(var g,A,P,F,j,q,_e,Ne=!1,Ze=0,ot=d.length;Ze<ot;Ze++)for(var Tt=d[Ze],Bt=0,vn=Tt.length;Bt<vn-1;Bt++){if((F=(g=u)[0]-(A=Tt[Bt])[0])*(_e=g[1]-(P=Tt[Bt+1])[1])-(q=g[0]-P[0])*(j=g[1]-A[1])==0&&F*q<=0&&j*_e<=0)return!1;jn(u,Tt[Bt],Tt[Bt+1])&&(Ne=!Ne)}return Ne}function Ci(u,d){for(var g=0;g<d.length;g++)if(kr(u,d[g]))return!0;return!1}function qi(u,d,g,A){var P=A[0]-g[0],F=A[1]-g[1],j=(u[0]-g[0])*F-P*(u[1]-g[1]),q=(d[0]-g[0])*F-P*(d[1]-g[1]);return j>0&&q<0||j<0&&q>0}function ta(u,d,g){for(var A=0,P=g;A<P.length;A+=1)for(var F=P[A],j=0;j<F.length-1;++j)if((ot=[(Ze=F[j+1])[0]-(Ne=F[j])[0],Ze[1]-Ne[1]])[0]*(Tt=[(_e=d)[0]-(q=u)[0],_e[1]-q[1]])[1]-ot[1]*Tt[0]!=0&&qi(q,_e,Ne,Ze)&&qi(Ne,Ze,q,_e))return!0;var q,_e,Ne,Ze,ot,Tt;return!1}function Us(u,d){for(var g=0;g<u.length;++g)if(!kr(u[g],d))return!1;for(var A=0;A<u.length-1;++A)if(ta(u[A],u[A+1],d))return!1;return!0}function Ls(u,d){for(var g=0;g<d.length;g++)if(Us(u,d[g]))return!0;return!1}function ks(u,d,g){for(var A=[],P=0;P<u.length;P++){for(var F=[],j=0;j<u[P].length;j++){var q=Wt(u[P][j],g);ls(d,q),F.push(q)}A.push(F)}return A}function ll(u,d,g){for(var A=[],P=0;P<u.length;P++){var F=ks(u[P],d,g);A.push(F)}return A}function zh(u,d,g,A){if(u[0]<g[0]||u[0]>g[2]){var P=.5*A,F=u[0]-g[0]>P?-A:g[0]-u[0]>P?A:0;F===0&&(F=u[0]-g[2]>P?-A:g[2]-u[0]>P?A:0),u[0]+=F}ls(d,u)}function Up(u,d,g,A){for(var P=8192*Math.pow(2,A.z),F=[8192*A.x,8192*A.y],j=[],q=0,_e=u;q<_e.length;q+=1)for(var Ne=0,Ze=_e[q];Ne<Ze.length;Ne+=1){var ot=Ze[Ne],Tt=[ot.x+F[0],ot.y+F[1]];zh(Tt,d,g,P),j.push(Tt)}return j}function qf(u,d,g,A){for(var P,F=8192*Math.pow(2,A.z),j=[8192*A.x,8192*A.y],q=[],_e=0,Ne=u;_e<Ne.length;_e+=1){for(var Ze=[],ot=0,Tt=Ne[_e];ot<Tt.length;ot+=1){var Bt=Tt[ot],vn=[Bt.x+j[0],Bt.y+j[1]];ls(d,vn),Ze.push(vn)}q.push(Ze)}if(d[2]-d[0]<=F/2){(P=d)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(var _n=0,Hn=q;_n<Hn.length;_n+=1)for(var Ln=0,fr=Hn[_n];Ln<fr.length;Ln+=1)zh(fr[Ln],d,g,F)}return q}ms.parse=function(u,d){if(u.length!==2)return d.error("Expected one argument.");var g=u[1];if(typeof g!="object"||Array.isArray(g))return d.error("Collator options argument must be an object.");var A=d.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,di);if(!A)return null;var P=d.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,di);if(!P)return null;var F=null;return g.locale&&!(F=d.parse(g.locale,1,gi))?null:new ms(A,P,F)},ms.prototype.evaluate=function(u){return new On(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)},ms.prototype.eachChild=function(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)},ms.prototype.outputDefined=function(){return!1},ms.prototype.serialize=function(){var u={};return u["case-sensitive"]=this.caseSensitive.serialize(),u["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(u.locale=this.locale.serialize()),["collator",u]};var ru=function(u,d){this.type=di,this.geojson=u,this.geometries=d};function zf(u){if(u instanceof ra&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof ru)return!1;var d=!0;return u.eachChild(function(g){d&&!zf(g)&&(d=!1)}),d}function rf(u){if(u instanceof ra&&u.name==="feature-state")return!1;var d=!0;return u.eachChild(function(g){d&&!rf(g)&&(d=!1)}),d}function iu(u,d){if(u instanceof ra&&d.indexOf(u.name)>=0)return!1;var g=!0;return u.eachChild(function(A){g&&!iu(A,d)&&(g=!1)}),g}ru.parse=function(u,d){if(u.length!==2)return d.error("'within' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(io(u[1])){var g=u[1];if(g.type==="FeatureCollection")for(var A=0;A<g.features.length;++A){var P=g.features[A].geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new ru(g,g.features[A].geometry)}else if(g.type==="Feature"){var F=g.geometry.type;if(F==="Polygon"||F==="MultiPolygon")return new ru(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new ru(g,g)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ru.prototype.evaluate=function(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(d,g){var A=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(g.type==="Polygon"){var j=ks(g.coordinates,P,F),q=Up(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var _e=0,Ne=q;_e<Ne.length;_e+=1)if(!kr(Ne[_e],j))return!1}if(g.type==="MultiPolygon"){var Ze=ll(g.coordinates,P,F),ot=Up(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var Tt=0,Bt=ot;Tt<Bt.length;Tt+=1)if(!Ci(Bt[Tt],Ze))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(d,g){var A=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],F=d.canonicalID();if(g.type==="Polygon"){var j=ks(g.coordinates,P,F),q=qf(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var _e=0,Ne=q;_e<Ne.length;_e+=1)if(!Us(Ne[_e],j))return!1}if(g.type==="MultiPolygon"){var Ze=ll(g.coordinates,P,F),ot=qf(d.geometry(),A,P,F);if(!Ct(A,P))return!1;for(var Tt=0,Bt=ot;Tt<Bt.length;Tt+=1)if(!Ls(Bt[Tt],Ze))return!1}return!0}(u,this.geometries)}return!1},ru.prototype.eachChild=function(){},ru.prototype.outputDefined=function(){return!0},ru.prototype.serialize=function(){return["within",this.geojson]};var pu=function(u,d){this.type=d.type,this.name=u,this.boundExpression=d};pu.parse=function(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");var g=u[1];return d.scope.has(g)?new pu(g,d.scope.get(g)):d.error('Unknown variable "'+g+'". Make sure "'+g+'" has been bound in an enclosing "let" expression before using it.',1)},pu.prototype.evaluate=function(u){return this.boundExpression.evaluate(u)},pu.prototype.eachChild=function(){},pu.prototype.outputDefined=function(){return!1},pu.prototype.serialize=function(){return["var",this.name]};var of=function(u,d,g,A,P){d===void 0&&(d=[]),A===void 0&&(A=new wi),P===void 0&&(P=[]),this.registry=u,this.path=d,this.key=d.map(function(F){return"["+F+"]"}).join(""),this.scope=A,this.errors=P,this.expectedType=g};function bf(u,d){for(var g,A=u.length-1,P=0,F=A,j=0;P<=F;)if((g=u[j=Math.floor((P+F)/2)])<=d){if(j===A||d<u[j+1])return j;P=j+1}else{if(!(g>d))throw new Yr("Input is not a number.");F=j-1}return 0}of.prototype.parse=function(u,d,g,A,P){return P===void 0&&(P={}),d?this.concat(d,g,A)._parse(u,P):this._parse(u,P)},of.prototype._parse=function(u,d){function g(Ne,Ze,ot){return ot==="assert"?new mi(Ze,[Ne]):ot==="coerce"?new Mo(Ze,[Ne]):Ne}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var A=u[0];if(typeof A!="string")return this.error("Expression name must be a string, but found "+typeof A+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var P=this.registry[A];if(P){var F=P.parse(u,this);if(!F)return null;if(this.expectedType){var j=this.expectedType,q=F.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||q.kind!=="value")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||q.kind!=="value"&&q.kind!=="string"){if(this.checkSubtype(j,q))return null}else F=g(F,j,d.typeAnnotation||"coerce");else F=g(F,j,d.typeAnnotation||"assert")}if(!(F instanceof ji)&&F.type.kind!=="resolvedImage"&&function Ne(Ze){if(Ze instanceof pu)return Ne(Ze.boundExpression);if(Ze instanceof ra&&Ze.name==="error"||Ze instanceof ms||Ze instanceof ru)return!1;var ot=Ze instanceof Mo||Ze instanceof mi,Tt=!0;return Ze.eachChild(function(Bt){Tt=ot?Tt&&Ne(Bt):Tt&&Bt instanceof ji}),!!Tt&&zf(Ze)&&iu(Ze,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(F)){var _e=new ba;try{F=new ji(F.type,F.evaluate(_e))}catch(Ne){return this.error(Ne.message),null}}return F}return this.error('Unknown expression "'+A+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof u+" instead.")},of.prototype.concat=function(u,d,g){var A=typeof u=="number"?this.path.concat(u):this.path,P=g?this.scope.concat(g):this.scope;return new of(this.registry,A,d||null,P,this.errors)},of.prototype.error=function(u){for(var d=[],g=arguments.length-1;g-- >0;)d[g]=arguments[g+1];var A=""+this.key+d.map(function(P){return"["+P+"]"}).join("");this.errors.push(new Hr(A,u))},of.prototype.checkSubtype=function(u,d){var g=Ht(u,d);return g&&this.error(g),g};var Tu=function(u,d,g){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(var A=0,P=g;A<P.length;A+=1){var F=P[A],j=F[1];this.labels.push(F[0]),this.outputs.push(j)}};function As(u,d,g){return u*(1-g)+d*g}Tu.parse=function(u,d){if(u.length-1<4)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");var g=d.parse(u[1],1,wr);if(!g)return null;var A=[],P=null;d.expectedType&&d.expectedType.kind!=="value"&&(P=d.expectedType);for(var F=1;F<u.length;F+=2){var j=F===1?-1/0:u[F],q=u[F+1],_e=F,Ne=F+1;if(typeof j!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(A.length&&A[A.length-1][0]>=j)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_e);var Ze=d.parse(q,Ne,P);if(!Ze)return null;P=P||Ze.type,A.push([j,Ze])}return new Tu(P,g,A)},Tu.prototype.evaluate=function(u){var d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(u);var A=this.input.evaluate(u);if(A<=d[0])return g[0].evaluate(u);var P=d.length;return A>=d[P-1]?g[P-1].evaluate(u):g[bf(d,A)].evaluate(u)},Tu.prototype.eachChild=function(u){u(this.input);for(var d=0,g=this.outputs;d<g.length;d+=1)u(g[d])},Tu.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},Tu.prototype.serialize=function(){for(var u=["step",this.input.serialize()],d=0;d<this.labels.length;d++)d>0&&u.push(this.labels[d]),u.push(this.outputs[d].serialize());return u};var Xu=Object.freeze({__proto__:null,number:As,color:function(u,d,g){return new yn(As(u.r,d.r,g),As(u.g,d.g,g),As(u.b,d.b,g),As(u.a,d.a,g))},array:function(u,d,g){return u.map(function(A,P){return As(A,d[P],g)})}}),af=6/29*3*(6/29),_d=Math.PI/180,Jd=180/Math.PI;function Uf(u){return u>.008856451679035631?Math.pow(u,1/3):u/af+4/29}function bd(u){return u>6/29?u*u*u:af*(u-4/29)}function mh(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Uh(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function jh(u){var d=Uh(u.r),g=Uh(u.g),A=Uh(u.b),P=Uf((.4124564*d+.3575761*g+.1804375*A)/.95047),F=Uf((.2126729*d+.7151522*g+.072175*A)/1);return{l:116*F-16,a:500*(P-F),b:200*(F-Uf((.0193339*d+.119192*g+.9503041*A)/1.08883)),alpha:u.a}}function xd(u){var d=(u.l+16)/116,g=isNaN(u.a)?d:d+u.a/500,A=isNaN(u.b)?d:d-u.b/200;return d=1*bd(d),g=.95047*bd(g),A=1.08883*bd(A),new yn(mh(3.2404542*g-1.5371385*d-.4985314*A),mh(-.969266*g+1.8760108*d+.041556*A),mh(.0556434*g-.2040259*d+1.0572252*A),u.alpha)}function l0(u,d,g){var A=d-u;return u+g*(A>180||A<-180?A-360*Math.round(A/360):A)}var sf={forward:jh,reverse:xd,interpolate:function(u,d,g){return{l:As(u.l,d.l,g),a:As(u.a,d.a,g),b:As(u.b,d.b,g),alpha:As(u.alpha,d.alpha,g)}}},Fc={forward:function(u){var d=jh(u),g=d.l,A=d.a,P=d.b,F=Math.atan2(P,A)*Jd;return{h:F<0?F+360:F,c:Math.sqrt(A*A+P*P),l:g,alpha:u.a}},reverse:function(u){var d=u.h*_d,g=u.c;return xd({l:u.l,a:Math.cos(d)*g,b:Math.sin(d)*g,alpha:u.alpha})},interpolate:function(u,d,g){return{h:l0(u.h,d.h,g),c:As(u.c,d.c,g),l:As(u.l,d.l,g),alpha:As(u.alpha,d.alpha,g)}}},Ed=Object.freeze({__proto__:null,lab:sf,hcl:Fc}),Bl=function(u,d,g,A,P){this.type=u,this.operator=d,this.interpolation=g,this.input=A,this.labels=[],this.outputs=[];for(var F=0,j=P;F<j.length;F+=1){var q=j[F],_e=q[1];this.labels.push(q[0]),this.outputs.push(_e)}};function bc(u,d,g,A){var P=A-g,F=u-g;return P===0?0:d===1?F/P:(Math.pow(d,F)-1)/(Math.pow(d,P)-1)}Bl.interpolationFactor=function(u,d,g,A){var P=0;if(u.name==="exponential")P=bc(d,u.base,g,A);else if(u.name==="linear")P=bc(d,1,g,A);else if(u.name==="cubic-bezier"){var F=u.controlPoints;P=new ee(F[0],F[1],F[2],F[3]).solve(bc(d,1,g,A))}return P},Bl.parse=function(u,d){var g=u[0],A=u[1],P=u[2],F=u.slice(3);if(!Array.isArray(A)||A.length===0)return d.error("Expected an interpolation type expression.",1);if(A[0]==="linear")A={name:"linear"};else if(A[0]==="exponential"){var j=A[1];if(typeof j!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);A={name:"exponential",base:j}}else{if(A[0]!=="cubic-bezier")return d.error("Unknown interpolation type "+String(A[0]),1,0);var q=A.slice(1);if(q.length!==4||q.some(function(Hn){return typeof Hn!="number"||Hn<0||Hn>1}))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);A={name:"cubic-bezier",controlPoints:q}}if(u.length-1<4)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(!(P=d.parse(P,2,wr)))return null;var _e=[],Ne=null;g==="interpolate-hcl"||g==="interpolate-lab"?Ne=xi:d.expectedType&&d.expectedType.kind!=="value"&&(Ne=d.expectedType);for(var Ze=0;Ze<F.length;Ze+=2){var ot=F[Ze],Tt=F[Ze+1],Bt=Ze+3,vn=Ze+4;if(typeof ot!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Bt);if(_e.length&&_e[_e.length-1][0]>=ot)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Bt);var _n=d.parse(Tt,vn,Ne);if(!_n)return null;Ne=Ne||_n.type,_e.push([ot,_n])}return Ne.kind==="number"||Ne.kind==="color"||Ne.kind==="array"&&Ne.itemType.kind==="number"&&typeof Ne.N=="number"?new Bl(Ne,g,A,P,_e):d.error("Type "+$e(Ne)+" is not interpolatable.")},Bl.prototype.evaluate=function(u){var d=this.labels,g=this.outputs;if(d.length===1)return g[0].evaluate(u);var A=this.input.evaluate(u);if(A<=d[0])return g[0].evaluate(u);var P=d.length;if(A>=d[P-1])return g[P-1].evaluate(u);var F=bf(d,A),j=Bl.interpolationFactor(this.interpolation,A,d[F],d[F+1]),q=g[F].evaluate(u),_e=g[F+1].evaluate(u);return this.operator==="interpolate"?Xu[this.type.kind.toLowerCase()](q,_e,j):this.operator==="interpolate-hcl"?Fc.reverse(Fc.interpolate(Fc.forward(q),Fc.forward(_e),j)):sf.reverse(sf.interpolate(sf.forward(q),sf.forward(_e),j))},Bl.prototype.eachChild=function(u){u(this.input);for(var d=0,g=this.outputs;d<g.length;d+=1)u(g[d])},Bl.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})},Bl.prototype.serialize=function(){var u;u=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var d=[this.operator,u,this.input.serialize()],g=0;g<this.labels.length;g++)d.push(this.labels[g],this.outputs[g].serialize());return d};var lf=function(u,d){this.type=u,this.args=d};lf.parse=function(u,d){if(u.length<2)return d.error("Expectected at least one argument.");var g=null,A=d.expectedType;A&&A.kind!=="value"&&(g=A);for(var P=[],F=0,j=u.slice(1);F<j.length;F+=1){var q=d.parse(j[F],1+P.length,g,void 0,{typeAnnotation:"omit"});if(!q)return null;g=g||q.type,P.push(q)}var _e=A&&P.some(function(Ne){return Ht(A,Ne.type)});return new lf(_e?Ai:g,P)},lf.prototype.evaluate=function(u){for(var d,g=null,A=0,P=0,F=this.args;P<F.length&&(A++,(g=F[P].evaluate(u))&&g instanceof oi&&!g.available&&(d||(d=g.name),g=null,A===this.args.length&&(g=d)),g===null);P+=1);return g},lf.prototype.eachChild=function(u){this.args.forEach(u)},lf.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})},lf.prototype.serialize=function(){var u=["coalesce"];return this.eachChild(function(d){u.push(d.serialize())}),u};var ou=function(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d};ou.prototype.evaluate=function(u){return this.result.evaluate(u)},ou.prototype.eachChild=function(u){for(var d=0,g=this.bindings;d<g.length;d+=1)u(g[d][1]);u(this.result)},ou.parse=function(u,d){if(u.length<4)return d.error("Expected at least 3 arguments, but found "+(u.length-1)+" instead.");for(var g=[],A=1;A<u.length-1;A+=2){var P=u[A];if(typeof P!="string")return d.error("Expected string, but found "+typeof P+" instead.",A);if(/[^a-zA-Z0-9_]/.test(P))return d.error("Variable names must contain only alphanumeric characters or '_'.",A);var F=d.parse(u[A+1],A+1);if(!F)return null;g.push([P,F])}var j=d.parse(u[u.length-1],u.length-1,d.expectedType,g);return j?new ou(g,j):null},ou.prototype.outputDefined=function(){return this.result.outputDefined()},ou.prototype.serialize=function(){for(var u=["let"],d=0,g=this.bindings;d<g.length;d+=1){var A=g[d];u.push(A[0],A[1].serialize())}return u.push(this.result.serialize()),u};var Bc=function(u,d,g){this.type=u,this.index=d,this.input=g};Bc.parse=function(u,d){if(u.length!==3)return d.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,wr),A=d.parse(u[2],2,Ji(d.expectedType||Ai));return g&&A?new Bc(A.type.itemType,g,A):null},Bc.prototype.evaluate=function(u){var d=this.index.evaluate(u),g=this.input.evaluate(u);if(d<0)throw new Yr("Array index out of bounds: "+d+" < 0.");if(d>=g.length)throw new Yr("Array index out of bounds: "+d+" > "+(g.length-1)+".");if(d!==Math.floor(d))throw new Yr("Array index must be an integer, but found "+d+" instead.");return g[d]},Bc.prototype.eachChild=function(u){u(this.index),u(this.input)},Bc.prototype.outputDefined=function(){return!1},Bc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var uc=function(u,d){this.type=di,this.needle=u,this.haystack=d};uc.parse=function(u,d){if(u.length!==3)return d.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,Ai),A=d.parse(u[2],2,Ai);return g&&A?hn(g.type,[di,gi,wr,Pi,Ai])?new uc(g,A):d.error("Expected first argument to be of type boolean, string, number or null, but found "+$e(g.type)+" instead"):null},uc.prototype.evaluate=function(u){var d=this.needle.evaluate(u),g=this.haystack.evaluate(u);if(!g)return!1;if(!Fn(d,["boolean","string","number","null"]))throw new Yr("Expected first argument to be of type boolean, string, number or null, but found "+$e(ai(d))+" instead.");if(!Fn(g,["string","array"]))throw new Yr("Expected second argument to be of type array or string, but found "+$e(ai(g))+" instead.");return g.indexOf(d)>=0},uc.prototype.eachChild=function(u){u(this.needle),u(this.haystack)},uc.prototype.outputDefined=function(){return!0},uc.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var xf=function(u,d,g){this.type=wr,this.needle=u,this.haystack=d,this.fromIndex=g};xf.parse=function(u,d){if(u.length<=2||u.length>=5)return d.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,Ai),A=d.parse(u[2],2,Ai);if(!g||!A)return null;if(!hn(g.type,[di,gi,wr,Pi,Ai]))return d.error("Expected first argument to be of type boolean, string, number or null, but found "+$e(g.type)+" instead");if(u.length===4){var P=d.parse(u[3],3,wr);return P?new xf(g,A,P):null}return new xf(g,A)},xf.prototype.evaluate=function(u){var d=this.needle.evaluate(u),g=this.haystack.evaluate(u);if(!Fn(d,["boolean","string","number","null"]))throw new Yr("Expected first argument to be of type boolean, string, number or null, but found "+$e(ai(d))+" instead.");if(!Fn(g,["string","array"]))throw new Yr("Expected second argument to be of type array or string, but found "+$e(ai(g))+" instead.");if(this.fromIndex){var A=this.fromIndex.evaluate(u);return g.indexOf(d,A)}return g.indexOf(d)},xf.prototype.eachChild=function(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)},xf.prototype.outputDefined=function(){return!1},xf.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var u=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),u]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ol=function(u,d,g,A,P,F){this.inputType=u,this.type=d,this.input=g,this.cases=A,this.outputs=P,this.otherwise=F};Ol.parse=function(u,d){if(u.length<5)return d.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(u.length%2!=1)return d.error("Expected an even number of arguments.");var g,A;d.expectedType&&d.expectedType.kind!=="value"&&(A=d.expectedType);for(var P={},F=[],j=2;j<u.length-1;j+=2){var q=u[j],_e=u[j+1];Array.isArray(q)||(q=[q]);var Ne=d.concat(j);if(q.length===0)return Ne.error("Expected at least one branch label.");for(var Ze=0,ot=q;Ze<ot.length;Ze+=1){var Tt=ot[Ze];if(typeof Tt!="number"&&typeof Tt!="string")return Ne.error("Branch labels must be numbers or strings.");if(typeof Tt=="number"&&Math.abs(Tt)>Number.MAX_SAFE_INTEGER)return Ne.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Tt=="number"&&Math.floor(Tt)!==Tt)return Ne.error("Numeric branch labels must be integer values.");if(g){if(Ne.checkSubtype(g,ai(Tt)))return null}else g=ai(Tt);if(P[String(Tt)]!==void 0)return Ne.error("Branch labels must be unique.");P[String(Tt)]=F.length}var Bt=d.parse(_e,j,A);if(!Bt)return null;A=A||Bt.type,F.push(Bt)}var vn=d.parse(u[1],1,Ai);if(!vn)return null;var _n=d.parse(u[u.length-1],u.length-1,A);return _n?vn.type.kind!=="value"&&d.concat(1).checkSubtype(g,vn.type)?null:new Ol(g,A,vn,P,F,_n):null},Ol.prototype.evaluate=function(u){var d=this.input.evaluate(u);return(ai(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)},Ol.prototype.eachChild=function(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)},Ol.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})&&this.otherwise.outputDefined()},Ol.prototype.serialize=function(){for(var u=this,d=["match",this.input.serialize()],g=[],A={},P=0,F=Object.keys(this.cases).sort();P<F.length;P+=1){var j=F[P];(ot=A[this.cases[j]])===void 0?(A[this.cases[j]]=g.length,g.push([this.cases[j],[j]])):g[ot][1].push(j)}for(var q=function(Bt){return u.inputType.kind==="number"?Number(Bt):Bt},_e=0,Ne=g;_e<Ne.length;_e+=1){var Ze=Ne[_e],ot=Ze[0],Tt=Ze[1];d.push(Tt.length===1?q(Tt[0]):Tt.map(q)),d.push(this.outputs[outputIndex$1].serialize())}return d.push(this.otherwise.serialize()),d};var uf=function(u,d,g){this.type=u,this.branches=d,this.otherwise=g};uf.parse=function(u,d){if(u.length<4)return d.error("Expected at least 3 arguments, but found only "+(u.length-1)+".");if(u.length%2!=0)return d.error("Expected an odd number of arguments.");var g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);for(var A=[],P=1;P<u.length-1;P+=2){var F=d.parse(u[P],P,di);if(!F)return null;var j=d.parse(u[P+1],P+1,g);if(!j)return null;A.push([F,j]),g=g||j.type}var q=d.parse(u[u.length-1],u.length-1,g);return q?new uf(g,A,q):null},uf.prototype.evaluate=function(u){for(var d=0,g=this.branches;d<g.length;d+=1){var A=g[d],P=A[1];if(A[0].evaluate(u))return P.evaluate(u)}return this.otherwise.evaluate(u)},uf.prototype.eachChild=function(u){for(var d=0,g=this.branches;d<g.length;d+=1){var A=g[d],P=A[1];u(A[0]),u(P)}u(this.otherwise)},uf.prototype.outputDefined=function(){return this.branches.every(function(u){return u[1].outputDefined()})&&this.otherwise.outputDefined()},uf.prototype.serialize=function(){var u=["case"];return this.eachChild(function(d){u.push(d.serialize())}),u};var Ef=function(u,d,g,A){this.type=u,this.input=d,this.beginIndex=g,this.endIndex=A};function Sd(u,d){return u==="=="||u==="!="?d.kind==="boolean"||d.kind==="string"||d.kind==="number"||d.kind==="null"||d.kind==="value":d.kind==="string"||d.kind==="number"||d.kind==="value"}function wd(u,d,g,A){return A.compare(d,g)===0}function xs(u,d,g){var A=u!=="=="&&u!=="!=";return function(){function P(F,j,q){this.type=di,this.lhs=F,this.rhs=j,this.collator=q,this.hasUntypedArgument=F.type.kind==="value"||j.type.kind==="value"}return P.parse=function(F,j){if(F.length!==3&&F.length!==4)return j.error("Expected two or three arguments.");var q=F[0],_e=j.parse(F[1],1,Ai);if(!_e)return null;if(!Sd(q,_e.type))return j.concat(1).error('"'+q+`" comparisons are not supported for type '`+$e(_e.type)+"'.");var Ne=j.parse(F[2],2,Ai);if(!Ne)return null;if(!Sd(q,Ne.type))return j.concat(2).error('"'+q+`" comparisons are not supported for type '`+$e(Ne.type)+"'.");if(_e.type.kind!==Ne.type.kind&&_e.type.kind!=="value"&&Ne.type.kind!=="value")return j.error("Cannot compare types '"+$e(_e.type)+"' and '"+$e(Ne.type)+"'.");A&&(_e.type.kind==="value"&&Ne.type.kind!=="value"?_e=new mi(Ne.type,[_e]):_e.type.kind!=="value"&&Ne.type.kind==="value"&&(Ne=new mi(_e.type,[Ne])));var Ze=null;if(F.length===4){if(_e.type.kind!=="string"&&Ne.type.kind!=="string"&&_e.type.kind!=="value"&&Ne.type.kind!=="value")return j.error("Cannot use collator to compare non-string types.");if(!(Ze=j.parse(F[3],3,ea)))return null}return new P(_e,Ne,Ze)},P.prototype.evaluate=function(F){var j=this.lhs.evaluate(F),q=this.rhs.evaluate(F);if(A&&this.hasUntypedArgument){var _e=ai(j),Ne=ai(q);if(_e.kind!==Ne.kind||_e.kind!=="string"&&_e.kind!=="number")throw new Yr('Expected arguments for "'+u+'" to be (string, string) or (number, number), but found ('+_e.kind+", "+Ne.kind+") instead.")}if(this.collator&&!A&&this.hasUntypedArgument){var Ze=ai(j),ot=ai(q);if(Ze.kind!=="string"||ot.kind!=="string")return d(F,j,q)}return this.collator?g(F,j,q,this.collator.evaluate(F)):d(F,j,q)},P.prototype.eachChild=function(F){F(this.lhs),F(this.rhs),this.collator&&F(this.collator)},P.prototype.outputDefined=function(){return!0},P.prototype.serialize=function(){var F=[u];return this.eachChild(function(j){F.push(j.serialize())}),F},P}()}Ef.parse=function(u,d){if(u.length<=2||u.length>=5)return d.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1,Ai),A=d.parse(u[2],2,wr);if(!g||!A)return null;if(!hn(g.type,[Ji(Ai),gi,Ai]))return d.error("Expected first argument to be of type array or string, but found "+$e(g.type)+" instead");if(u.length===4){var P=d.parse(u[3],3,wr);return P?new Ef(g.type,g,A,P):null}return new Ef(g.type,g,A)},Ef.prototype.evaluate=function(u){var d=this.input.evaluate(u),g=this.beginIndex.evaluate(u);if(!Fn(d,["string","array"]))throw new Yr("Expected first argument to be of type array or string, but found "+$e(ai(d))+" instead.");if(this.endIndex){var A=this.endIndex.evaluate(u);return d.slice(g,A)}return d.slice(g)},Ef.prototype.eachChild=function(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)},Ef.prototype.outputDefined=function(){return!1},Ef.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var u=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),u]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ep=xs("==",function(u,d,g){return d===g},wd),Kf=xs("!=",function(u,d,g){return d!==g},function(u,d,g,A){return!wd(0,d,g,A)}),Vh=xs("<",function(u,d,g){return d<g},function(u,d,g,A){return A.compare(d,g)<0}),ul=xs(">",function(u,d,g){return d>g},function(u,d,g,A){return A.compare(d,g)>0}),Hh=xs("<=",function(u,d,g){return d<=g},function(u,d,g,A){return A.compare(d,g)<=0}),gh=xs(">=",function(u,d,g){return d>=g},function(u,d,g,A){return A.compare(d,g)>=0}),vu=function(u,d,g,A,P){this.type=gi,this.number=u,this.locale=d,this.currency=g,this.minFractionDigits=A,this.maxFractionDigits=P};vu.parse=function(u,d){if(u.length!==3)return d.error("Expected two arguments.");var g=d.parse(u[1],1,wr);if(!g)return null;var A=u[2];if(typeof A!="object"||Array.isArray(A))return d.error("NumberFormat options argument must be an object.");var P=null;if(A.locale&&!(P=d.parse(A.locale,1,gi)))return null;var F=null;if(A.currency&&!(F=d.parse(A.currency,1,gi)))return null;var j=null;if(A["min-fraction-digits"]&&!(j=d.parse(A["min-fraction-digits"],1,wr)))return null;var q=null;return A["max-fraction-digits"]&&!(q=d.parse(A["max-fraction-digits"],1,wr))?null:new vu(g,P,F,j,q)},vu.prototype.evaluate=function(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))},vu.prototype.eachChild=function(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)},vu.prototype.outputDefined=function(){return!1},vu.prototype.serialize=function(){var u={};return this.locale&&(u.locale=this.locale.serialize()),this.currency&&(u.currency=this.currency.serialize()),this.minFractionDigits&&(u["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(u["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),u]};var kc=function(u){this.type=wr,this.input=u};kc.parse=function(u,d){if(u.length!==2)return d.error("Expected 1 argument, but found "+(u.length-1)+" instead.");var g=d.parse(u[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?d.error("Expected argument of type string or array, but found "+$e(g.type)+" instead."):new kc(g):null},kc.prototype.evaluate=function(u){var d=this.input.evaluate(u);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Yr("Expected value to be of type string or array, but found "+$e(ai(d))+" instead.")},kc.prototype.eachChild=function(u){u(this.input)},kc.prototype.outputDefined=function(){return!1},kc.prototype.serialize=function(){var u=["length"];return this.eachChild(function(d){u.push(d.serialize())}),u};var Au={"==":ep,"!=":Kf,">":ul,"<":Vh,">=":gh,"<=":Hh,array:mi,at:Bc,boolean:mi,case:uf,coalesce:lf,collator:ms,format:wo,image:$i,in:uc,"index-of":xf,interpolate:Bl,"interpolate-hcl":Bl,"interpolate-lab":Bl,length:kc,let:ou,literal:ji,match:Ol,number:mi,"number-format":vu,object:mi,slice:Ef,step:Tu,string:mi,"to-boolean":Mo,"to-color":Mo,"to-number":Mo,"to-string":Mo,var:pu,within:ru};function xc(u,d){var g=d[0],A=d[1],P=d[2],F=d[3];g=g.evaluate(u),A=A.evaluate(u),P=P.evaluate(u);var j=F?F.evaluate(u):1,q=Xi(g,A,P,j);if(q)throw new Yr(q);return new yn(g/255*j,A/255*j,P/255*j,j)}function Se(u,d){return u in d}function ie(u,d){var g=d[u];return g===void 0?null:g}function ve(u){return{type:u}}function et(u){return{result:"success",value:u}}function an(u){return{result:"error",value:u}}function cn(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function tr(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function Or(u){return!!u.expression&&u.expression.interpolated}function Wr(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Fi(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function xo(u){return u}function _o(u,d,g){return u!==void 0?u:d!==void 0?d:g!==void 0?g:void 0}function La(u,d,g,A,P){return _o(typeof g===P?A[g]:void 0,u.default,d.default)}function Na(u,d,g){if(Wr(g)!=="number")return _o(u.default,d.default);var A=u.stops.length;if(A===1||g<=u.stops[0][0])return u.stops[0][1];if(g>=u.stops[A-1][0])return u.stops[A-1][1];var P=bf(u.stops.map(function(F){return F[0]}),g);return u.stops[P][1]}function Ta(u,d,g){var A=u.base!==void 0?u.base:1;if(Wr(g)!=="number")return _o(u.default,d.default);var P=u.stops.length;if(P===1||g<=u.stops[0][0])return u.stops[0][1];if(g>=u.stops[P-1][0])return u.stops[P-1][1];var F=bf(u.stops.map(function(ot){return ot[0]}),g),j=function(ot,Tt,Bt,vn){var _n=vn-Bt,Hn=ot-Bt;return _n===0?0:Tt===1?Hn/_n:(Math.pow(Tt,Hn)-1)/(Math.pow(Tt,_n)-1)}(g,A,u.stops[F][0],u.stops[F+1][0]),q=u.stops[F][1],_e=u.stops[F+1][1],Ne=Xu[d.type]||xo;if(u.colorSpace&&u.colorSpace!=="rgb"){var Ze=Ed[u.colorSpace];Ne=function(ot,Tt){return Ze.reverse(Ze.interpolate(Ze.forward(ot),Ze.forward(Tt),j))}}return typeof q.evaluate=="function"?{evaluate:function(){for(var ot=[],Tt=arguments.length;Tt--;)ot[Tt]=arguments[Tt];var Bt=q.evaluate.apply(void 0,ot),vn=_e.evaluate.apply(void 0,ot);if(Bt!==void 0&&vn!==void 0)return Ne(Bt,vn,j)}}:Ne(q,_e,j)}function Ca(u,d,g){return d.type==="color"?g=yn.parse(g):d.type==="formatted"?g=hr.fromString(g.toString()):d.type==="resolvedImage"?g=oi.fromString(g.toString()):Wr(g)===d.type||d.type==="enum"&&d.values[g]||(g=void 0),_o(g,u.default,d.default)}ra.register(Au,{error:[{kind:"error"},[gi],function(u,d){throw new Yr(d[0].evaluate(u))}],typeof:[gi,[Ai],function(u,d){return $e(ai(d[0].evaluate(u)))}],"to-rgba":[Ji(wr,4),[xi],function(u,d){return d[0].evaluate(u).toArray()}],rgb:[xi,[wr,wr,wr],xc],rgba:[xi,[wr,wr,wr,wr],xc],has:{type:di,overloads:[[[gi],function(u,d){return Se(d[0].evaluate(u),u.properties())}],[[gi,Fo],function(u,d){var g=d[1];return Se(d[0].evaluate(u),g.evaluate(u))}]]},get:{type:Ai,overloads:[[[gi],function(u,d){return ie(d[0].evaluate(u),u.properties())}],[[gi,Fo],function(u,d){var g=d[1];return ie(d[0].evaluate(u),g.evaluate(u))}]]},"feature-state":[Ai,[gi],function(u,d){return ie(d[0].evaluate(u),u.featureState||{})}],properties:[Fo,[],function(u){return u.properties()}],"geometry-type":[gi,[],function(u){return u.geometryType()}],id:[Ai,[],function(u){return u.id()}],zoom:[wr,[],function(u){return u.globals.zoom}],"heatmap-density":[wr,[],function(u){return u.globals.heatmapDensity||0}],"line-progress":[wr,[],function(u){return u.globals.lineProgress||0}],accumulated:[Ai,[],function(u){return u.globals.accumulated===void 0?null:u.globals.accumulated}],"+":[wr,ve(wr),function(u,d){for(var g=0,A=0,P=d;A<P.length;A+=1)g+=P[A].evaluate(u);return g}],"*":[wr,ve(wr),function(u,d){for(var g=1,A=0,P=d;A<P.length;A+=1)g*=P[A].evaluate(u);return g}],"-":{type:wr,overloads:[[[wr,wr],function(u,d){var g=d[1];return d[0].evaluate(u)-g.evaluate(u)}],[[wr],function(u,d){return-d[0].evaluate(u)}]]},"/":[wr,[wr,wr],function(u,d){var g=d[1];return d[0].evaluate(u)/g.evaluate(u)}],"%":[wr,[wr,wr],function(u,d){var g=d[1];return d[0].evaluate(u)%g.evaluate(u)}],ln2:[wr,[],function(){return Math.LN2}],pi:[wr,[],function(){return Math.PI}],e:[wr,[],function(){return Math.E}],"^":[wr,[wr,wr],function(u,d){var g=d[1];return Math.pow(d[0].evaluate(u),g.evaluate(u))}],sqrt:[wr,[wr],function(u,d){return Math.sqrt(d[0].evaluate(u))}],log10:[wr,[wr],function(u,d){return Math.log(d[0].evaluate(u))/Math.LN10}],ln:[wr,[wr],function(u,d){return Math.log(d[0].evaluate(u))}],log2:[wr,[wr],function(u,d){return Math.log(d[0].evaluate(u))/Math.LN2}],sin:[wr,[wr],function(u,d){return Math.sin(d[0].evaluate(u))}],cos:[wr,[wr],function(u,d){return Math.cos(d[0].evaluate(u))}],tan:[wr,[wr],function(u,d){return Math.tan(d[0].evaluate(u))}],asin:[wr,[wr],function(u,d){return Math.asin(d[0].evaluate(u))}],acos:[wr,[wr],function(u,d){return Math.acos(d[0].evaluate(u))}],atan:[wr,[wr],function(u,d){return Math.atan(d[0].evaluate(u))}],min:[wr,ve(wr),function(u,d){return Math.min.apply(Math,d.map(function(g){return g.evaluate(u)}))}],max:[wr,ve(wr),function(u,d){return Math.max.apply(Math,d.map(function(g){return g.evaluate(u)}))}],abs:[wr,[wr],function(u,d){return Math.abs(d[0].evaluate(u))}],round:[wr,[wr],function(u,d){var g=d[0].evaluate(u);return g<0?-Math.round(-g):Math.round(g)}],floor:[wr,[wr],function(u,d){return Math.floor(d[0].evaluate(u))}],ceil:[wr,[wr],function(u,d){return Math.ceil(d[0].evaluate(u))}],"filter-==":[di,[gi,Ai],function(u,d){var g=d[0],A=d[1];return u.properties()[g.value]===A.value}],"filter-id-==":[di,[Ai],function(u,d){var g=d[0];return u.id()===g.value}],"filter-type-==":[di,[gi],function(u,d){var g=d[0];return u.geometryType()===g.value}],"filter-<":[di,[gi,Ai],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P<F}],"filter-id-<":[di,[Ai],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A<P}],"filter->":[di,[gi,Ai],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P>F}],"filter-id->":[di,[Ai],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A>P}],"filter-<=":[di,[gi,Ai],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P<=F}],"filter-id-<=":[di,[Ai],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A<=P}],"filter->=":[di,[gi,Ai],function(u,d){var g=d[0],A=d[1],P=u.properties()[g.value],F=A.value;return typeof P==typeof F&&P>=F}],"filter-id->=":[di,[Ai],function(u,d){var g=d[0],A=u.id(),P=g.value;return typeof A==typeof P&&A>=P}],"filter-has":[di,[Ai],function(u,d){return d[0].value in u.properties()}],"filter-has-id":[di,[],function(u){return u.id()!==null&&u.id()!==void 0}],"filter-type-in":[di,[Ji(gi)],function(u,d){return d[0].value.indexOf(u.geometryType())>=0}],"filter-id-in":[di,[Ji(Ai)],function(u,d){return d[0].value.indexOf(u.id())>=0}],"filter-in-small":[di,[gi,Ji(Ai)],function(u,d){var g=d[0];return d[1].value.indexOf(u.properties()[g.value])>=0}],"filter-in-large":[di,[gi,Ji(Ai)],function(u,d){var g=d[0],A=d[1];return function(P,F,j,q){for(;j<=q;){var _e=j+q>>1;if(F[_e]===P)return!0;F[_e]>P?q=_e-1:j=_e+1}return!1}(u.properties()[g.value],A.value,0,A.value.length-1)}],all:{type:di,overloads:[[[di,di],function(u,d){var g=d[1];return d[0].evaluate(u)&&g.evaluate(u)}],[ve(di),function(u,d){for(var g=0,A=d;g<A.length;g+=1)if(!A[g].evaluate(u))return!1;return!0}]]},any:{type:di,overloads:[[[di,di],function(u,d){var g=d[1];return d[0].evaluate(u)||g.evaluate(u)}],[ve(di),function(u,d){for(var g=0,A=d;g<A.length;g+=1)if(A[g].evaluate(u))return!0;return!1}]]},"!":[di,[di],function(u,d){return!d[0].evaluate(u)}],"is-supported-script":[di,[gi],function(u,d){var g=u.globals&&u.globals.isSupportedScript;return!g||g(d[0].evaluate(u))}],upcase:[gi,[gi],function(u,d){return d[0].evaluate(u).toUpperCase()}],downcase:[gi,[gi],function(u,d){return d[0].evaluate(u).toLowerCase()}],concat:[gi,ve(Ai),function(u,d){return d.map(function(g){return Yi(g.evaluate(u))}).join("")}],"resolved-locale":[gi,[ea],function(u,d){return d[0].evaluate(u).resolvedLocale()}]});var xa=function(u,d){this.expression=u,this._warningHistory={},this._evaluator=new ba,this._defaultValue=d?function(g){return g.type==="color"&&Fi(g.default)?new yn(0,0,0,0):g.type==="color"?yn.parse(g.default)||null:g.default===void 0?null:g.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null};function Fa(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in Au}function Oa(u,d){var g=new of(Au,[],d?function(P){var F={color:xi,string:gi,number:wr,enum:gi,boolean:di,formatted:_a,resolvedImage:fi};return P.type==="array"?Ji(F[P.value]||Ai,P.length):F[P.type]}(d):void 0),A=g.parse(u,void 0,void 0,void 0,d&&d.type==="string"?{typeAnnotation:"coerce"}:void 0);return A?et(new xa(A,d)):an(g.errors)}xa.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,F){return this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=g,this._evaluator.canonical=A,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)},xa.prototype.evaluate=function(u,d,g,A,P,F){this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=g||null,this._evaluator.canonical=A,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=F||null;try{var j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new Yr("Expected value to be one of "+Object.keys(this._enumValues).map(function(q){return JSON.stringify(q)}).join(", ")+", but found "+JSON.stringify(j)+" instead.");return j}catch(q){return this._warningHistory[q.message]||(this._warningHistory[q.message]=!0,typeof console!="undefined"&&console.warn(q.message)),this._defaultValue}};var Za=function(u,d){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!rf(d.expression)};Za.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,F){return this._styleExpression.evaluateWithoutErrorHandling(u,d,g,A,P,F)},Za.prototype.evaluate=function(u,d,g,A,P,F){return this._styleExpression.evaluate(u,d,g,A,P,F)};var Sa=function(u,d,g,A){this.kind=u,this.zoomStops=g,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!rf(d.expression),this.interpolationType=A};function ps(u,d){if((u=Oa(u,d)).result==="error")return u;var g=u.value.expression,A=zf(g);if(!A&&!cn(d))return an([new Hr("","data expressions not supported")]);var P=iu(g,["zoom"]);if(!P&&!tr(d))return an([new Hr("","zoom expressions not supported")]);var F=function j(q){var _e=null;if(q instanceof ou)_e=j(q.result);else if(q instanceof lf)for(var Ne=0,Ze=q.args;Ne<Ze.length&&!(_e=j(Ze[Ne]));Ne+=1);else(q instanceof Tu||q instanceof Bl)&&q.input instanceof ra&&q.input.name==="zoom"&&(_e=q);return _e instanceof Hr||q.eachChild(function(ot){var Tt=j(ot);Tt instanceof Hr?_e=Tt:!_e&&Tt?_e=new Hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):_e&&Tt&&_e!==Tt&&(_e=new Hr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),_e}(g);return F||P?F instanceof Hr?an([F]):F instanceof Bl&&!Or(d)?an([new Hr("",'"interpolate" expressions cannot be used with this property')]):et(F?new Sa(A?"camera":"composite",u.value,F.labels,F instanceof Bl?F.interpolation:void 0):new Za(A?"constant":"source",u.value)):an([new Hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Sa.prototype.evaluateWithoutErrorHandling=function(u,d,g,A,P,F){return this._styleExpression.evaluateWithoutErrorHandling(u,d,g,A,P,F)},Sa.prototype.evaluate=function(u,d,g,A,P,F){return this._styleExpression.evaluate(u,d,g,A,P,F)},Sa.prototype.interpolationFactor=function(u,d,g){return this.interpolationType?Bl.interpolationFactor(this.interpolationType,u,d,g):0};var Ws=function(u,d){this._parameters=u,this._specification=d,Er(this,function g(A,P){var F,j,q,_e=P.type==="color",Ne=A.stops&&typeof A.stops[0][0]=="object",Ze=Ne||!(Ne||A.property!==void 0),ot=A.type||(Or(P)?"exponential":"interval");if(_e&&((A=Er({},A)).stops&&(A.stops=A.stops.map(function(go){return[go[0],yn.parse(go[1])]})),A.default=yn.parse(A.default?A.default:P.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!Ed[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(ot==="exponential")F=Ta;else if(ot==="interval")F=Na;else if(ot==="categorical"){F=La,j=Object.create(null);for(var Tt=0,Bt=A.stops;Tt<Bt.length;Tt+=1){var vn=Bt[Tt];j[vn[0]]=vn[1]}q=typeof A.stops[0][0]}else{if(ot!=="identity")throw new Error('Unknown function type "'+ot+'"');F=Ca}if(Ne){for(var _n={},Hn=[],Ln=0;Ln<A.stops.length;Ln++){var fr=A.stops[Ln],_r=fr[0].zoom;_n[_r]===void 0&&(_n[_r]={zoom:_r,type:A.type,property:A.property,default:A.default,stops:[]},Hn.push(_r)),_n[_r].stops.push([fr[0].value,fr[1]])}for(var Fr=[],Br=0,$r=Hn;Br<$r.length;Br+=1){var Ni=$r[Br];Fr.push([_n[Ni].zoom,g(_n[Ni],P)])}var eo={name:"linear"};return{kind:"composite",interpolationType:eo,interpolationFactor:Bl.interpolationFactor.bind(void 0,eo),zoomStops:Fr.map(function(go){return go[0]}),evaluate:function(go,$o){var yo=go.zoom;return Ta({stops:Fr,base:A.base},P,yo).evaluate(yo,$o)}}}if(Ze){var zo=ot==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:zo,interpolationFactor:Bl.interpolationFactor.bind(void 0,zo),zoomStops:A.stops.map(function(go){return go[0]}),evaluate:function(go){return F(A,P,go.zoom,j,q)}}}return{kind:"source",evaluate:function(go,$o){var yo=$o&&$o.properties?$o.properties[A.property]:void 0;return yo===void 0?_o(A.default,P.default):F(A,P,yo,j,q)}}}(this._parameters,this._specification))};function $s(u){var d=u.key,g=u.value,A=u.valueSpec||{},P=u.objectElementValidators||{},F=u.style,j=u.styleSpec,q=[],_e=Wr(g);if(_e!=="object")return[new Jt(d,g,"object expected, "+_e+" found")];for(var Ne in g){var Ze=Ne.split(".")[0],ot=A[Ze]||A["*"],Tt=void 0;if(P[Ze])Tt=P[Ze];else if(A[Ze])Tt=Ha;else if(P["*"])Tt=P["*"];else{if(!A["*"]){q.push(new Jt(d,g[Ne],'unknown property "'+Ne+'"'));continue}Tt=Ha}q=q.concat(Tt({key:(d&&d+".")+Ne,value:g[Ne],valueSpec:ot,style:F,styleSpec:j,object:g,objectKey:Ne},g))}for(var Bt in A)P[Bt]||A[Bt].required&&A[Bt].default===void 0&&g[Bt]===void 0&&q.push(new Jt(d,g,'missing required property "'+Bt+'"'));return q}function Ec(u){var d=u.value,g=u.valueSpec,A=u.style,P=u.styleSpec,F=u.key,j=u.arrayElementValidator||Ha;if(Wr(d)!=="array")return[new Jt(F,d,"array expected, "+Wr(d)+" found")];if(g.length&&d.length!==g.length)return[new Jt(F,d,"array length "+g.length+" expected, length "+d.length+" found")];if(g["min-length"]&&d.length<g["min-length"])return[new Jt(F,d,"array length at least "+g["min-length"]+" expected, length "+d.length+" found")];var q={type:g.value,values:g.values};P.$version<7&&(q.function=g.function),Wr(g.value)==="object"&&(q=g.value);for(var _e=[],Ne=0;Ne<d.length;Ne++)_e=_e.concat(j({array:d,arrayIndex:Ne,value:d[Ne],valueSpec:q,style:A,styleSpec:P,key:F+"["+Ne+"]"}));return _e}function pl(u){var d=u.key,g=u.value,A=u.valueSpec,P=Wr(g);return P==="number"&&g!=g&&(P="NaN"),P!=="number"?[new Jt(d,g,"number expected, "+P+" found")]:"minimum"in A&&g<A.minimum?[new Jt(d,g,g+" is less than the minimum value "+A.minimum)]:"maximum"in A&&g>A.maximum?[new Jt(d,g,g+" is greater than the maximum value "+A.maximum)]:[]}function cc(u){var d,g,A,P=u.valueSpec,F=Gr(u.value.type),j={},q=F!=="categorical"&&u.value.property===void 0,_e=!q,Ne=Wr(u.value.stops)==="array"&&Wr(u.value.stops[0])==="array"&&Wr(u.value.stops[0][0])==="object",Ze=$s({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Bt){if(F==="identity")return[new Jt(Bt.key,Bt.value,'identity function may not have a "stops" property')];var vn=[],_n=Bt.value;return vn=vn.concat(Ec({key:Bt.key,value:_n,valueSpec:Bt.valueSpec,style:Bt.style,styleSpec:Bt.styleSpec,arrayElementValidator:ot})),Wr(_n)==="array"&&_n.length===0&&vn.push(new Jt(Bt.key,_n,"array must have at least one stop")),vn},default:function(Bt){return Ha({key:Bt.key,value:Bt.value,valueSpec:P,style:Bt.style,styleSpec:Bt.styleSpec})}}});return F==="identity"&&q&&Ze.push(new Jt(u.key,u.value,'missing required property "property"')),F==="identity"||u.value.stops||Ze.push(new Jt(u.key,u.value,'missing required property "stops"')),F==="exponential"&&u.valueSpec.expression&&!Or(u.valueSpec)&&Ze.push(new Jt(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(_e&&!cn(u.valueSpec)?Ze.push(new Jt(u.key,u.value,"property functions not supported")):q&&!tr(u.valueSpec)&&Ze.push(new Jt(u.key,u.value,"zoom functions not supported"))),F!=="categorical"&&!Ne||u.value.property!==void 0||Ze.push(new Jt(u.key,u.value,'"property" property is required')),Ze;function ot(Bt){var vn=[],_n=Bt.value,Hn=Bt.key;if(Wr(_n)!=="array")return[new Jt(Hn,_n,"array expected, "+Wr(_n)+" found")];if(_n.length!==2)return[new Jt(Hn,_n,"array length 2 expected, length "+_n.length+" found")];if(Ne){if(Wr(_n[0])!=="object")return[new Jt(Hn,_n,"object expected, "+Wr(_n[0])+" found")];if(_n[0].zoom===void 0)return[new Jt(Hn,_n,"object stop key must have zoom")];if(_n[0].value===void 0)return[new Jt(Hn,_n,"object stop key must have value")];if(A&&A>Gr(_n[0].zoom))return[new Jt(Hn,_n[0].zoom,"stop zoom values must appear in ascending order")];Gr(_n[0].zoom)!==A&&(A=Gr(_n[0].zoom),g=void 0,j={}),vn=vn.concat($s({key:Hn+"[0]",value:_n[0],valueSpec:{zoom:{}},style:Bt.style,styleSpec:Bt.styleSpec,objectElementValidators:{zoom:pl,value:Tt}}))}else vn=vn.concat(Tt({key:Hn+"[0]",value:_n[0],valueSpec:{},style:Bt.style,styleSpec:Bt.styleSpec},_n));return Fa(mr(_n[1]))?vn.concat([new Jt(Hn+"[1]",_n[1],"expressions are not allowed in function stops.")]):vn.concat(Ha({key:Hn+"[1]",value:_n[1],valueSpec:P,style:Bt.style,styleSpec:Bt.styleSpec}))}function Tt(Bt,vn){var _n=Wr(Bt.value),Hn=Gr(Bt.value),Ln=Bt.value!==null?Bt.value:vn;if(d){if(_n!==d)return[new Jt(Bt.key,Ln,_n+" stop domain type must match previous stop domain type "+d)]}else d=_n;if(_n!=="number"&&_n!=="string"&&_n!=="boolean")return[new Jt(Bt.key,Ln,"stop domain value must be a number, string, or boolean")];if(_n!=="number"&&F!=="categorical"){var fr="number expected, "+_n+" found";return cn(P)&&F===void 0&&(fr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Jt(Bt.key,Ln,fr)]}return F!=="categorical"||_n!=="number"||isFinite(Hn)&&Math.floor(Hn)===Hn?F!=="categorical"&&_n==="number"&&g!==void 0&&Hn<g?[new Jt(Bt.key,Ln,"stop domain values must appear in ascending order")]:(g=Hn,F==="categorical"&&Hn in j?[new Jt(Bt.key,Ln,"stop domain values must be unique")]:(j[Hn]=!0,[])):[new Jt(Bt.key,Ln,"integer expected, found "+Hn)]}}function cf(u){var d=(u.expressionContext==="property"?ps:Oa)(mr(u.value),u.valueSpec);if(d.result==="error")return d.value.map(function(A){return new Jt(""+u.key+A.key,u.value,A.message)});var g=d.value.expression||d.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!g.outputDefined())return[new Jt(u.key,u.value,'Invalid data expression for "'+u.propertyKey+'". Output values must be contained as literals within the expression.')];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!rf(g))return[new Jt(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!rf(g))return[new Jt(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!iu(g,["zoom","feature-state"]))return[new Jt(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!zf(g))return[new Jt(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function fc(u){var d=u.key,g=u.value,A=u.valueSpec,P=[];return Array.isArray(A.values)?A.values.indexOf(Gr(g))===-1&&P.push(new Jt(d,g,"expected one of ["+A.values.join(", ")+"], "+JSON.stringify(g)+" found")):Object.keys(A.values).indexOf(Gr(g))===-1&&P.push(new Jt(d,g,"expected one of ["+Object.keys(A.values).join(", ")+"], "+JSON.stringify(g)+" found")),P}function zc(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(var d=0,g=u.slice(1);d<g.length;d+=1){var A=g[d];if(!zc(A)&&typeof A!="boolean")return!1}return!0;default:return!0}}Ws.deserialize=function(u){return new Ws(u._parameters,u._specification)},Ws.serialize=function(u){return{_parameters:u._parameters,_specification:u._specification}};var Qf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function jf(u){if(u==null)return{filter:function(){return!0},needGeometry:!1};zc(u)||(u=tp(u));var d=Oa(u,Qf);if(d.result==="error")throw new Error(d.value.map(function(g){return g.key+": "+g.message}).join(", "));return{filter:function(g,A,P){return d.value.evaluate(g,A,{},P)},needGeometry:function g(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var P=1;P<A.length;P++)if(g(A[P]))return!0;return!1}(u)}}function u0(u,d){return u<d?-1:u>d?1:0}function tp(u){if(!u)return!0;var d,g=u[0];return u.length<=1?g!=="any":g==="=="?jp(u[1],u[2],"=="):g==="!="?np(jp(u[1],u[2],"==")):g==="<"||g===">"||g==="<="||g===">="?jp(u[1],u[2],g):g==="any"?(d=u.slice(1),["any"].concat(d.map(tp))):g==="all"?["all"].concat(u.slice(1).map(tp)):g==="none"?["all"].concat(u.slice(1).map(tp).map(np)):g==="in"?Sf(u[1],u.slice(2)):g==="!in"?np(Sf(u[1],u.slice(2))):g==="has"?c0(u[1]):g==="!has"?np(c0(u[1])):g!=="within"||u}function jp(u,d,g){switch(u){case"$type":return["filter-type-"+g,d];case"$id":return["filter-id-"+g,d];default:return["filter-"+g,u,d]}}function Sf(u,d){if(d.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",d]];case"$id":return["filter-id-in",["literal",d]];default:return d.length>200&&!d.some(function(g){return typeof g!=typeof d[0]})?["filter-in-large",u,["literal",d.sort(u0)]]:["filter-in-small",u,["literal",d]]}}function c0(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function np(u){return["!",u]}function Td(u){return zc(mr(u.value))?cf(Er({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function d(g){var A=g.value,P=g.key;if(Wr(A)!=="array")return[new Jt(P,A,"array expected, "+Wr(A)+" found")];var F,j=g.styleSpec,q=[];if(A.length<1)return[new Jt(P,A,"filter array must have at least 1 element")];switch(q=q.concat(fc({key:P+"[0]",value:A[0],valueSpec:j.filter_operator,style:g.style,styleSpec:g.styleSpec})),Gr(A[0])){case"<":case"<=":case">":case">=":A.length>=2&&Gr(A[1])==="$type"&&q.push(new Jt(P,A,'"$type" cannot be use with operator "'+A[0]+'"'));case"==":case"!=":A.length!==3&&q.push(new Jt(P,A,'filter array for operator "'+A[0]+'" must have 3 elements'));case"in":case"!in":A.length>=2&&(F=Wr(A[1]))!=="string"&&q.push(new Jt(P+"[1]",A[1],"string expected, "+F+" found"));for(var _e=2;_e<A.length;_e++)F=Wr(A[_e]),Gr(A[1])==="$type"?q=q.concat(fc({key:P+"["+_e+"]",value:A[_e],valueSpec:j.geometry_type,style:g.style,styleSpec:g.styleSpec})):F!=="string"&&F!=="number"&&F!=="boolean"&&q.push(new Jt(P+"["+_e+"]",A[_e],"string, number, or boolean expected, "+F+" found"));break;case"any":case"all":case"none":for(var Ne=1;Ne<A.length;Ne++)q=q.concat(d({key:P+"["+Ne+"]",value:A[Ne],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":F=Wr(A[1]),A.length!==2?q.push(new Jt(P,A,'filter array for "'+A[0]+'" operator must have 2 elements')):F!=="string"&&q.push(new Jt(P+"[1]",A[1],"string expected, "+F+" found"));break;case"within":F=Wr(A[1]),A.length!==2?q.push(new Jt(P,A,'filter array for "'+A[0]+'" operator must have 2 elements')):F!=="object"&&q.push(new Jt(P+"[1]",A[1],"object expected, "+F+" found"))}return q}(u)}function wf(u,d){var g=u.key,A=u.style,P=u.styleSpec,F=u.value,j=u.objectKey,q=P[d+"_"+u.layerType];if(!q)return[];var _e=j.match(/^(.*)-transition$/);if(d==="paint"&&_e&&q[_e[1]]&&q[_e[1]].transition)return Ha({key:g,value:F,valueSpec:P.transition,style:A,styleSpec:P});var Ne,Ze=u.valueSpec||q[j];if(!Ze)return[new Jt(g,F,'unknown property "'+j+'"')];if(Wr(F)==="string"&&cn(Ze)&&!Ze.tokens&&(Ne=/^{([^}]+)}$/.exec(F)))return[new Jt(g,F,'"'+j+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Ne[1])+" }`.")];var ot=[];return u.layerType==="symbol"&&(j==="text-field"&&A&&!A.glyphs&&ot.push(new Jt(g,F,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&Fi(mr(F))&&Gr(F.type)==="identity"&&ot.push(new Jt(g,F,'"text-font" does not support identity functions'))),ot.concat(Ha({key:u.key,value:F,valueSpec:Ze,style:A,styleSpec:P,expressionContext:"property",propertyType:d,propertyKey:j}))}function Vp(u){return wf(u,"paint")}function yh(u){return wf(u,"layout")}function rp(u){var d=[],g=u.value,A=u.key,P=u.style,F=u.styleSpec;g.type||g.ref||d.push(new Jt(A,g,'either "type" or "ref" is required'));var j,q=Gr(g.type),_e=Gr(g.ref);if(g.id)for(var Ne=Gr(g.id),Ze=0;Ze<u.arrayIndex;Ze++){var ot=P.layers[Ze];Gr(ot.id)===Ne&&d.push(new Jt(A,g.id,'duplicate layer id "'+g.id+'", previously used at line '+ot.id.__line__))}if("ref"in g)["type","source","source-layer","filter","layout"].forEach(function(vn){vn in g&&d.push(new Jt(A,g[vn],'"'+vn+'" is prohibited for ref layers'))}),P.layers.forEach(function(vn){Gr(vn.id)===_e&&(j=vn)}),j?j.ref?d.push(new Jt(A,g.ref,"ref cannot reference another ref layer")):q=Gr(j.type):d.push(new Jt(A,g.ref,'ref layer "'+_e+'" not found'));else if(q!=="background")if(g.source){var Tt=P.sources&&P.sources[g.source],Bt=Tt&&Gr(Tt.type);Tt?Bt==="vector"&&q==="raster"?d.push(new Jt(A,g.source,'layer "'+g.id+'" requires a raster source')):Bt==="raster"&&q!=="raster"?d.push(new Jt(A,g.source,'layer "'+g.id+'" requires a vector source')):Bt!=="vector"||g["source-layer"]?Bt==="raster-dem"&&q!=="hillshade"?d.push(new Jt(A,g.source,"raster-dem source can only be used with layer type 'hillshade'.")):q!=="line"||!g.paint||!g.paint["line-gradient"]||Bt==="geojson"&&Tt.lineMetrics||d.push(new Jt(A,g,'layer "'+g.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):d.push(new Jt(A,g,'layer "'+g.id+'" must specify a "source-layer"')):d.push(new Jt(A,g.source,'source "'+g.source+'" not found'))}else d.push(new Jt(A,g,'missing required property "source"'));return d=d.concat($s({key:A,value:g,valueSpec:F.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ha({key:A+".type",value:g.type,valueSpec:F.layer.type,style:u.style,styleSpec:u.styleSpec,object:g,objectKey:"type"})},filter:Td,layout:function(vn){return $s({layer:g,key:vn.key,value:vn.value,style:vn.style,styleSpec:vn.styleSpec,objectElementValidators:{"*":function(_n){return yh(Er({layerType:q},_n))}}})},paint:function(vn){return $s({layer:g,key:vn.key,value:vn.value,style:vn.style,styleSpec:vn.styleSpec,objectElementValidators:{"*":function(_n){return Vp(Er({layerType:q},_n))}}})}}}))}function Jf(u){var d=u.value,g=u.key,A=Wr(d);return A!=="string"?[new Jt(g,d,"string expected, "+A+" found")]:[]}var qs={promoteId:function(u){var d=u.key,g=u.value;if(Wr(g)==="string")return Jf({key:d,value:g});var A=[];for(var P in g)A.push.apply(A,Jf({key:d+"."+P,value:g[P]}));return A}};function Ad(u){var d=u.value,g=u.key,A=u.styleSpec,P=u.style;if(!d.type)return[new Jt(g,d,'"type" is required')];var F,j=Gr(d.type);switch(j){case"vector":case"raster":case"raster-dem":return $s({key:g,value:d,valueSpec:A["source_"+j.replace("-","_")],style:u.style,styleSpec:A,objectElementValidators:qs});case"geojson":if(F=$s({key:g,value:d,valueSpec:A.source_geojson,style:P,styleSpec:A,objectElementValidators:qs}),d.cluster)for(var q in d.clusterProperties){var _e=d.clusterProperties[q],Ne=_e[0],Ze=typeof Ne=="string"?[Ne,["accumulated"],["get",q]]:Ne;F.push.apply(F,cf({key:g+"."+q+".map",value:_e[1],expressionContext:"cluster-map"})),F.push.apply(F,cf({key:g+"."+q+".reduce",value:Ze,expressionContext:"cluster-reduce"}))}return F;case"video":return $s({key:g,value:d,valueSpec:A.source_video,style:P,styleSpec:A});case"image":return $s({key:g,value:d,valueSpec:A.source_image,style:P,styleSpec:A});case"canvas":return[new Jt(g,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return fc({key:g+".type",value:d.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,styleSpec:A})}}function Tf(u){var d=u.value,g=u.styleSpec,A=g.light,P=u.style,F=[],j=Wr(d);if(d===void 0)return F;if(j!=="object")return F.concat([new Jt("light",d,"object expected, "+j+" found")]);for(var q in d){var _e=q.match(/^(.*)-transition$/);F=F.concat(_e&&A[_e[1]]&&A[_e[1]].transition?Ha({key:q,value:d[q],valueSpec:g.transition,style:P,styleSpec:g}):A[q]?Ha({key:q,value:d[q],valueSpec:A[q],style:P,styleSpec:g}):[new Jt(q,d[q],'unknown property "'+q+'"')])}return F}var eh={"*":function(){return[]},array:Ec,boolean:function(u){var d=u.value,g=u.key,A=Wr(d);return A!=="boolean"?[new Jt(g,d,"boolean expected, "+A+" found")]:[]},number:pl,color:function(u){var d=u.key,g=u.value,A=Wr(g);return A!=="string"?[new Jt(d,g,"color expected, "+A+" found")]:Bn(g)===null?[new Jt(d,g,'color expected, "'+g+'" found')]:[]},constants:Qn,enum:fc,filter:Td,function:cc,layer:rp,object:$s,source:Ad,light:Tf,string:Jf,formatted:function(u){return Jf(u).length===0?[]:cf(u)},resolvedImage:function(u){return Jf(u).length===0?[]:cf(u)}};function Ha(u){var d=u.value,g=u.valueSpec,A=u.styleSpec;return g.expression&&Fi(Gr(d))?cc(u):g.expression&&Fa(mr(d))?cf(u):g.type&&eh[g.type]?eh[g.type](u):$s(Er({},u,{valueSpec:g.type?A[g.type]:g}))}function ce(u){var d=u.value,g=u.key,A=Jf(u);return A.length||(d.indexOf("{fontstack}")===-1&&A.push(new Jt(g,d,'"glyphs" url must include a "{fontstack}" token')),d.indexOf("{range}")===-1&&A.push(new Jt(g,d,'"glyphs" url must include a "{range}" token'))),A}function He(u,d){d===void 0&&(d=St);var g=[];return g=g.concat(Ha({key:"",value:u,valueSpec:d.$root,styleSpec:d,style:u,objectElementValidators:{glyphs:ce,"*":function(){return[]}}})),u.constants&&(g=g.concat(Qn({key:"constants",value:u.constants,style:u,styleSpec:d}))),Et(g)}function Et(u){return[].concat(u).sort(function(d,g){return d.line-g.line})}function Pn(u){return function(){for(var d=[],g=arguments.length;g--;)d[g]=arguments[g];return Et(u.apply(this,d))}}He.source=Pn(Ad),He.light=Pn(Tf),He.layer=Pn(rp),He.filter=Pn(Td),He.paintProperty=Pn(Vp),He.layoutProperty=Pn(yh);var ur=He,zr=ur.light,pi=ur.paintProperty,Ii=ur.layoutProperty;function Zo(u,d){var g=!1;if(d&&d.length)for(var A=0,P=d;A<P.length;A+=1)u.fire(new qt(new Error(P[A].message))),g=!0;return g}var Go=la;function la(u,d,g){var A=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var P=new Int32Array(this.arrayBuffer);u=P[0],this.d=(d=P[1])+2*(g=P[2]);for(var F=0;F<this.d*this.d;F++){var j=P[3+F],q=P[3+F+1];A.push(j===q?null:P.subarray(j,q))}var _e=P[3+A.length+1];this.keys=P.subarray(P[3+A.length],_e),this.bboxes=P.subarray(_e),this.insert=this._insertReadonly}else{this.d=d+2*g;for(var Ne=0;Ne<this.d*this.d;Ne++)A.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=g,this.scale=d/u,this.uid=0;var Ze=g/d*u;this.min=-Ze,this.max=u+Ze}la.prototype.insert=function(u,d,g,A,P){this._forEachCell(d,g,A,P,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(A),this.bboxes.push(P)},la.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},la.prototype._insertCell=function(u,d,g,A,P,F){this.cells[P].push(F)},la.prototype.query=function(u,d,g,A,P){var F=this.min,j=this.max;if(u<=F&&d<=F&&j<=g&&j<=A&&!P)return Array.prototype.slice.call(this.keys);var q=[];return this._forEachCell(u,d,g,A,this._queryCell,q,{},P),q},la.prototype._queryCell=function(u,d,g,A,P,F,j,q){var _e=this.cells[P];if(_e!==null)for(var Ne=this.keys,Ze=this.bboxes,ot=0;ot<_e.length;ot++){var Tt=_e[ot];if(j[Tt]===void 0){var Bt=4*Tt;(q?q(Ze[Bt+0],Ze[Bt+1],Ze[Bt+2],Ze[Bt+3]):u<=Ze[Bt+2]&&d<=Ze[Bt+3]&&g>=Ze[Bt+0]&&A>=Ze[Bt+1])?(j[Tt]=!0,F.push(Ne[Tt])):j[Tt]=!1}}},la.prototype._forEachCell=function(u,d,g,A,P,F,j,q){for(var _e=this._convertToCellCoord(u),Ne=this._convertToCellCoord(d),Ze=this._convertToCellCoord(g),ot=this._convertToCellCoord(A),Tt=_e;Tt<=Ze;Tt++)for(var Bt=Ne;Bt<=ot;Bt++){var vn=this.d*Bt+Tt;if((!q||q(this._convertFromCellCoord(Tt),this._convertFromCellCoord(Bt),this._convertFromCellCoord(Tt+1),this._convertFromCellCoord(Bt+1)))&&P.call(this,u,d,g,A,vn,F,j,q))return}},la.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},la.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},la.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,d=3+this.cells.length+1+1,g=0,A=0;A<this.cells.length;A++)g+=this.cells[A].length;var P=new Int32Array(d+g+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;for(var F=d,j=0;j<u.length;j++){var q=u[j];P[3+j]=F,P.set(q,F),F+=q.length}return P[3+u.length]=F,P.set(this.keys,F),P[3+u.length+1]=F+=this.keys.length,P.set(this.bboxes,F),F+=this.bboxes.length,P.buffer};var Js=oe.ImageData,bl=oe.ImageBitmap,Es={};function oo(u,d,g){g===void 0&&(g={}),Object.defineProperty(d,"_classRegistryKey",{value:u,writeable:!1}),Es[u]={klass:d,omit:g.omit||[],shallow:g.shallow||[]}}for(var Ml in oo("Object",Object),Go.serialize=function(u,d){var g=u.toArrayBuffer();return d&&d.push(g),{buffer:g}},Go.deserialize=function(u){return new Go(u.buffer)},oo("Grid",Go),oo("Color",yn),oo("Error",Error),oo("ResolvedImage",oi),oo("StylePropertyFunction",Ws),oo("StyleExpression",xa,{omit:["_evaluator"]}),oo("ZoomDependentExpression",Sa),oo("ZoomConstantExpression",Za),oo("CompoundExpression",ra,{omit:["_evaluate"]}),Au)Au[Ml]._classRegistryKey||oo("Expression_"+Ml,Au[Ml]);function _h(u){return u&&typeof ArrayBuffer!="undefined"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Gh(u){return bl&&u instanceof bl}function Ja(u,d){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(_h(u)||Gh(u))return d&&d.push(u),u;if(ArrayBuffer.isView(u)){var g=u;return d&&d.push(g.buffer),g}if(u instanceof Js)return d&&d.push(u.data.buffer),u;if(Array.isArray(u)){for(var A=[],P=0,F=u;P<F.length;P+=1)A.push(Ja(F[P],d));return A}if(typeof u=="object"){var j=u.constructor,q=j._classRegistryKey;if(!q)throw new Error("can't serialize object of unregistered class");var _e=j.serialize?j.serialize(u,d):{};if(!j.serialize){for(var Ne in u)if(u.hasOwnProperty(Ne)&&!(Es[q].omit.indexOf(Ne)>=0)){var Ze=u[Ne];_e[Ne]=Es[q].shallow.indexOf(Ne)>=0?Ze:Ja(Ze,d)}u instanceof Error&&(_e.message=u.message)}if(_e.$name)throw new Error("$name property is reserved for worker serialization logic.");return q!=="Object"&&(_e.$name=q),_e}throw new Error("can't serialize object of type "+typeof u)}function Ns(u){if(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||_h(u)||Gh(u)||ArrayBuffer.isView(u)||u instanceof Js)return u;if(Array.isArray(u))return u.map(Ns);if(typeof u=="object"){var d=u.$name||"Object",g=Es[d].klass;if(!g)throw new Error("can't deserialize unregistered class "+d);if(g.deserialize)return g.deserialize(u);for(var A=Object.create(g.prototype),P=0,F=Object.keys(u);P<F.length;P+=1){var j=F[P];if(j!=="$name"){var q=u[j];A[j]=Es[d].shallow.indexOf(j)>=0?q:Ns(q)}}return A}throw new Error("can't deserialize object of type "+typeof u)}var ff=function(){this.first=!0};ff.prototype.update=function(u,d){var g=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=g,!0))};var Ui={"Latin-1 Supplement":function(u){return u>=128&&u<=255},Arabic:function(u){return u>=1536&&u<=1791},"Arabic Supplement":function(u){return u>=1872&&u<=1919},"Arabic Extended-A":function(u){return u>=2208&&u<=2303},"Hangul Jamo":function(u){return u>=4352&&u<=4607},"Unified Canadian Aboriginal Syllabics":function(u){return u>=5120&&u<=5759},Khmer:function(u){return u>=6016&&u<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(u){return u>=6320&&u<=6399},"General Punctuation":function(u){return u>=8192&&u<=8303},"Letterlike Symbols":function(u){return u>=8448&&u<=8527},"Number Forms":function(u){return u>=8528&&u<=8591},"Miscellaneous Technical":function(u){return u>=8960&&u<=9215},"Control Pictures":function(u){return u>=9216&&u<=9279},"Optical Character Recognition":function(u){return u>=9280&&u<=9311},"Enclosed Alphanumerics":function(u){return u>=9312&&u<=9471},"Geometric Shapes":function(u){return u>=9632&&u<=9727},"Miscellaneous Symbols":function(u){return u>=9728&&u<=9983},"Miscellaneous Symbols and Arrows":function(u){return u>=11008&&u<=11263},"CJK Radicals Supplement":function(u){return u>=11904&&u<=12031},"Kangxi Radicals":function(u){return u>=12032&&u<=12255},"Ideographic Description Characters":function(u){return u>=12272&&u<=12287},"CJK Symbols and Punctuation":function(u){return u>=12288&&u<=12351},Hiragana:function(u){return u>=12352&&u<=12447},Katakana:function(u){return u>=12448&&u<=12543},Bopomofo:function(u){return u>=12544&&u<=12591},"Hangul Compatibility Jamo":function(u){return u>=12592&&u<=12687},Kanbun:function(u){return u>=12688&&u<=12703},"Bopomofo Extended":function(u){return u>=12704&&u<=12735},"CJK Strokes":function(u){return u>=12736&&u<=12783},"Katakana Phonetic Extensions":function(u){return u>=12784&&u<=12799},"Enclosed CJK Letters and Months":function(u){return u>=12800&&u<=13055},"CJK Compatibility":function(u){return u>=13056&&u<=13311},"CJK Unified Ideographs Extension A":function(u){return u>=13312&&u<=19903},"Yijing Hexagram Symbols":function(u){return u>=19904&&u<=19967},"CJK Unified Ideographs":function(u){return u>=19968&&u<=40959},"Yi Syllables":function(u){return u>=40960&&u<=42127},"Yi Radicals":function(u){return u>=42128&&u<=42191},"Hangul Jamo Extended-A":function(u){return u>=43360&&u<=43391},"Hangul Syllables":function(u){return u>=44032&&u<=55215},"Hangul Jamo Extended-B":function(u){return u>=55216&&u<=55295},"Private Use Area":function(u){return u>=57344&&u<=63743},"CJK Compatibility Ideographs":function(u){return u>=63744&&u<=64255},"Arabic Presentation Forms-A":function(u){return u>=64336&&u<=65023},"Vertical Forms":function(u){return u>=65040&&u<=65055},"CJK Compatibility Forms":function(u){return u>=65072&&u<=65103},"Small Form Variants":function(u){return u>=65104&&u<=65135},"Arabic Presentation Forms-B":function(u){return u>=65136&&u<=65279},"Halfwidth and Fullwidth Forms":function(u){return u>=65280&&u<=65519}};function Af(u){for(var d=0,g=u;d<g.length;d+=1)if(Cd(g[d].charCodeAt(0)))return!0;return!1}function Cd(u){return!(u!==746&&u!==747&&(u<4352||!(Ui["Bopomofo Extended"](u)||Ui.Bopomofo(u)||Ui["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Ui["CJK Compatibility Ideographs"](u)||Ui["CJK Compatibility"](u)||Ui["CJK Radicals Supplement"](u)||Ui["CJK Strokes"](u)||!(!Ui["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Ui["CJK Unified Ideographs Extension A"](u)||Ui["CJK Unified Ideographs"](u)||Ui["Enclosed CJK Letters and Months"](u)||Ui["Hangul Compatibility Jamo"](u)||Ui["Hangul Jamo Extended-A"](u)||Ui["Hangul Jamo Extended-B"](u)||Ui["Hangul Jamo"](u)||Ui["Hangul Syllables"](u)||Ui.Hiragana(u)||Ui["Ideographic Description Characters"](u)||Ui.Kanbun(u)||Ui["Kangxi Radicals"](u)||Ui["Katakana Phonetic Extensions"](u)||Ui.Katakana(u)&&u!==12540||!(!Ui["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Ui["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Ui["Unified Canadian Aboriginal Syllabics"](u)||Ui["Unified Canadian Aboriginal Syllabics Extended"](u)||Ui["Vertical Forms"](u)||Ui["Yijing Hexagram Symbols"](u)||Ui["Yi Syllables"](u)||Ui["Yi Radicals"](u))))}function bh(u){return!(Cd(u)||function(d){return!!(Ui["Latin-1 Supplement"](d)&&(d===167||d===169||d===174||d===177||d===188||d===189||d===190||d===215||d===247)||Ui["General Punctuation"](d)&&(d===8214||d===8224||d===8225||d===8240||d===8241||d===8251||d===8252||d===8258||d===8263||d===8264||d===8265||d===8273)||Ui["Letterlike Symbols"](d)||Ui["Number Forms"](d)||Ui["Miscellaneous Technical"](d)&&(d>=8960&&d<=8967||d>=8972&&d<=8991||d>=8996&&d<=9e3||d===9003||d>=9085&&d<=9114||d>=9150&&d<=9165||d===9167||d>=9169&&d<=9179||d>=9186&&d<=9215)||Ui["Control Pictures"](d)&&d!==9251||Ui["Optical Character Recognition"](d)||Ui["Enclosed Alphanumerics"](d)||Ui["Geometric Shapes"](d)||Ui["Miscellaneous Symbols"](d)&&!(d>=9754&&d<=9759)||Ui["Miscellaneous Symbols and Arrows"](d)&&(d>=11026&&d<=11055||d>=11088&&d<=11097||d>=11192&&d<=11243)||Ui["CJK Symbols and Punctuation"](d)||Ui.Katakana(d)||Ui["Private Use Area"](d)||Ui["CJK Compatibility Forms"](d)||Ui["Small Form Variants"](d)||Ui["Halfwidth and Fullwidth Forms"](d)||d===8734||d===8756||d===8757||d>=9984&&d<=10087||d>=10102&&d<=10131||d===65532||d===65533)}(u))}function Cf(u){return u>=1424&&u<=2303||Ui["Arabic Presentation Forms-A"](u)||Ui["Arabic Presentation Forms-B"](u)}function hc(u,d){return!(!d&&Cf(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Ui.Khmer(u))}function f0(u){for(var d=0,g=u;d<g.length;d+=1)if(Cf(g[d].charCodeAt(0)))return!0;return!1}var xh=null,Yu="unavailable",th=null,h0=function(u){u&&typeof u=="string"&&u.indexOf("NetworkError")>-1&&(Yu="error"),xh&&xh(u)};function Od(){d0.fire(new At("pluginStateChange",{pluginStatus:Yu,pluginURL:th}))}var d0=new un,Z0=function(){return Yu},dc=function(){if(Yu!=="deferred"||!th)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Yu="loading",Od(),th&&br({url:th},function(u){u?h0(u):(Yu="loaded",Od())})},Uc={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Yu==="loaded"||Uc.applyArabicShaping!=null},isLoading:function(){return Yu==="loading"},setState:function(u){Yu=u.pluginStatus,th=u.pluginURL},isParsed:function(){return Uc.applyArabicShaping!=null&&Uc.processBidirectionalText!=null&&Uc.processStyledBidirectionalText!=null},getPluginURL:function(){return th}},Aa=function(u,d){this.zoom=u,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ff,this.transition={})};Aa.prototype.isSupportedScript=function(u){return function(d,g){for(var A=0,P=d;A<P.length;A+=1)if(!hc(P[A].charCodeAt(0),g))return!1;return!0}(u,Uc.isLoaded())},Aa.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Aa.prototype.getCrossfadeParameters=function(){var u=this.zoom,d=u-Math.floor(u),g=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*d}};var pc=function(u,d){this.property=u,this.value=d,this.expression=function(g,A){if(Fi(g))return new Ws(g,A);if(Fa(g)){var P=ps(g,A);if(P.result==="error")throw new Error(P.value.map(function(j){return j.key+": "+j.message}).join(", "));return P.value}var F=g;return typeof g=="string"&&A.type==="color"&&(F=yn.parse(g)),{kind:"constant",evaluate:function(){return F}}}(d===void 0?u.specification.default:d,u.specification)};pc.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},pc.prototype.possiblyEvaluate=function(u,d,g){return this.property.possiblyEvaluate(this,u,d,g)};var hf=function(u){this.property=u,this.value=new pc(u,void 0)};hf.prototype.transitioned=function(u,d){return new Wh(this.property,this.value,d,le({},u.transition,this.transition),u.now)},hf.prototype.untransitioned=function(){return new Wh(this.property,this.value,null,{},0)};var mu=function(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)};mu.prototype.getValue=function(u){return Ce(this._values[u].value.value)},mu.prototype.setValue=function(u,d){this._values.hasOwnProperty(u)||(this._values[u]=new hf(this._values[u].property)),this._values[u].value=new pc(this._values[u].property,d===null?void 0:Ce(d))},mu.prototype.getTransition=function(u){return Ce(this._values[u].transition)},mu.prototype.setTransition=function(u,d){this._values.hasOwnProperty(u)||(this._values[u]=new hf(this._values[u].property)),this._values[u].transition=Ce(d)||void 0},mu.prototype.serialize=function(){for(var u={},d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d],P=this.getValue(A);P!==void 0&&(u[A]=P);var F=this.getTransition(A);F!==void 0&&(u[A+"-transition"]=F)}return u},mu.prototype.transitioned=function(u,d){for(var g=new Hl(this._properties),A=0,P=Object.keys(this._values);A<P.length;A+=1){var F=P[A];g._values[F]=this._values[F].transitioned(u,d._values[F])}return g},mu.prototype.untransitioned=function(){for(var u=new Hl(this._properties),d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d];u._values[A]=this._values[A].untransitioned()}return u};var Wh=function(u,d,g,A,P){this.property=u,this.value=d,this.begin=P+A.delay||0,this.end=this.begin+A.duration||0,u.specification.transition&&(A.delay||A.duration)&&(this.prior=g)};Wh.prototype.possiblyEvaluate=function(u,d,g){var A=u.now||0,P=this.value.possiblyEvaluate(u,d,g),F=this.prior;if(F){if(A>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(A<this.begin)return F.possiblyEvaluate(u,d,g);var j=(A-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(u,d,g),P,function(q){if(q<=0)return 0;if(q>=1)return 1;var _e=q*q,Ne=_e*q;return 4*(q<.5?Ne:3*(q-_e)+Ne-.75)}(j))}return P};var Hl=function(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)};Hl.prototype.possiblyEvaluate=function(u,d,g){for(var A=new ip(this._properties),P=0,F=Object.keys(this._values);P<F.length;P+=1){var j=F[P];A._values[j]=this._values[j].possiblyEvaluate(u,d,g)}return A},Hl.prototype.hasTransition=function(){for(var u=0,d=Object.keys(this._values);u<d.length;u+=1)if(this._values[d[u]].prior)return!0;return!1};var zu=function(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)};zu.prototype.getValue=function(u){return Ce(this._values[u].value)},zu.prototype.setValue=function(u,d){this._values[u]=new pc(this._values[u].property,d===null?void 0:Ce(d))},zu.prototype.serialize=function(){for(var u={},d=0,g=Object.keys(this._values);d<g.length;d+=1){var A=g[d],P=this.getValue(A);P!==void 0&&(u[A]=P)}return u},zu.prototype.possiblyEvaluate=function(u,d,g){for(var A=new ip(this._properties),P=0,F=Object.keys(this._values);P<F.length;P+=1){var j=F[P];A._values[j]=this._values[j].possiblyEvaluate(u,d,g)}return A};var $u=function(u,d,g){this.property=u,this.value=d,this.parameters=g};$u.prototype.isConstant=function(){return this.value.kind==="constant"},$u.prototype.constantOr=function(u){return this.value.kind==="constant"?this.value.value:u},$u.prototype.evaluate=function(u,d,g,A){return this.property.evaluate(this.value,this.parameters,u,d,g,A)};var ip=function(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)};ip.prototype.get=function(u){return this._values[u]};var Bo=function(u){this.specification=u};Bo.prototype.possiblyEvaluate=function(u,d){return u.expression.evaluate(d)},Bo.prototype.interpolate=function(u,d,g){var A=Xu[this.specification.type];return A?A(u,d,g):u};var Ao=function(u,d){this.specification=u,this.overrides=d};Ao.prototype.possiblyEvaluate=function(u,d,g,A){return new $u(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},g,A)}:u.expression,d)},Ao.prototype.interpolate=function(u,d,g){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new $u(this,{kind:"constant",value:void 0},u.parameters);var A=Xu[this.specification.type];return A?new $u(this,{kind:"constant",value:A(u.value.value,d.value.value,g)},u.parameters):u},Ao.prototype.evaluate=function(u,d,g,A,P,F){return u.kind==="constant"?u.value:u.evaluate(d,g,A,P,F)};var Gl=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.possiblyEvaluate=function(g,A,P,F){if(g.value===void 0)return new $u(this,{kind:"constant",value:void 0},A);if(g.expression.kind==="constant"){var j=g.expression.evaluate(A,null,{},P,F),q=g.property.specification.type==="resolvedImage"&&typeof j!="string"?j.name:j,_e=this._calculate(q,q,q,A);return new $u(this,{kind:"constant",value:_e},A)}if(g.expression.kind==="camera"){var Ne=this._calculate(g.expression.evaluate({zoom:A.zoom-1}),g.expression.evaluate({zoom:A.zoom}),g.expression.evaluate({zoom:A.zoom+1}),A);return new $u(this,{kind:"constant",value:Ne},A)}return new $u(this,g.expression,A)},d.prototype.evaluate=function(g,A,P,F,j,q){if(g.kind==="source"){var _e=g.evaluate(A,P,F,j,q);return this._calculate(_e,_e,_e,A)}return g.kind==="composite"?this._calculate(g.evaluate({zoom:Math.floor(A.zoom)-1},P,F),g.evaluate({zoom:Math.floor(A.zoom)},P,F),g.evaluate({zoom:Math.floor(A.zoom)+1},P,F),A):g.value},d.prototype._calculate=function(g,A,P,F){return F.zoom>F.zoomHistory.lastIntegerZoom?{from:g,to:A}:{from:P,to:A}},d.prototype.interpolate=function(g){return g},d}(Ao),qu=function(u){this.specification=u};qu.prototype.possiblyEvaluate=function(u,d,g,A){if(u.value!==void 0){if(u.expression.kind==="constant"){var P=u.expression.evaluate(d,null,{},g,A);return this._calculate(P,P,P,d)}return this._calculate(u.expression.evaluate(new Aa(Math.floor(d.zoom-1),d)),u.expression.evaluate(new Aa(Math.floor(d.zoom),d)),u.expression.evaluate(new Aa(Math.floor(d.zoom+1),d)),d)}},qu.prototype._calculate=function(u,d,g,A){return A.zoom>A.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:g,to:d}},qu.prototype.interpolate=function(u){return u};var Ku=function(u){this.specification=u};Ku.prototype.possiblyEvaluate=function(u,d,g,A){return!!u.expression.evaluate(d,null,{},g,A)},Ku.prototype.interpolate=function(){return!1};var cl=function(u){for(var d in this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],u){var g=u[d];g.specification.overridable&&this.overridableProperties.push(d);var A=this.defaultPropertyValues[d]=new pc(g,void 0),P=this.defaultTransitionablePropertyValues[d]=new hf(g);this.defaultTransitioningPropertyValues[d]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=A.possiblyEvaluate({})}};oo("DataDrivenProperty",Ao),oo("DataConstantProperty",Bo),oo("CrossFadedDataDrivenProperty",Gl),oo("CrossFadedProperty",qu),oo("ColorRampProperty",Ku);var Sc=function(u){function d(g,A){if(u.call(this),this.id=g.id,this.type=g.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},g.type!=="custom"&&(this.metadata=(g=g).metadata,this.minzoom=g.minzoom,this.maxzoom=g.maxzoom,g.type!=="background"&&(this.source=g.source,this.sourceLayer=g["source-layer"],this.filter=g.filter),A.layout&&(this._unevaluatedLayout=new zu(A.layout)),A.paint)){for(var P in this._transitionablePaint=new mu(A.paint),g.paint)this.setPaintProperty(P,g.paint[P],{validate:!1});for(var F in g.layout)this.setLayoutProperty(F,g.layout[F],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ip(A.paint)}}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},d.prototype.getLayoutProperty=function(g){return g==="visibility"?this.visibility:this._unevaluatedLayout.getValue(g)},d.prototype.setLayoutProperty=function(g,A,P){P===void 0&&(P={}),A!=null&&this._validate(Ii,"layers."+this.id+".layout."+g,g,A,P)||(g!=="visibility"?this._unevaluatedLayout.setValue(g,A):this.visibility=A)},d.prototype.getPaintProperty=function(g){return pt(g,"-transition")?this._transitionablePaint.getTransition(g.slice(0,-11)):this._transitionablePaint.getValue(g)},d.prototype.setPaintProperty=function(g,A,P){if(P===void 0&&(P={}),A!=null&&this._validate(pi,"layers."+this.id+".paint."+g,g,A,P))return!1;if(pt(g,"-transition"))return this._transitionablePaint.setTransition(g.slice(0,-11),A||void 0),!1;var F=this._transitionablePaint._values[g],j=F.property.specification["property-type"]==="cross-faded-data-driven",q=F.value.isDataDriven(),_e=F.value;this._transitionablePaint.setValue(g,A),this._handleSpecialPaintPropertyUpdate(g);var Ne=this._transitionablePaint._values[g].value;return Ne.isDataDriven()||q||j||this._handleOverridablePaintPropertyUpdate(g,_e,Ne)},d.prototype._handleSpecialPaintPropertyUpdate=function(g){},d.prototype._handleOverridablePaintPropertyUpdate=function(g,A,P){return!1},d.prototype.isHidden=function(g){return!!(this.minzoom&&g<this.minzoom)||!!(this.maxzoom&&g>=this.maxzoom)||this.visibility==="none"},d.prototype.updateTransitions=function(g){this._transitioningPaint=this._transitionablePaint.transitioned(g,this._transitioningPaint)},d.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},d.prototype.recalculate=function(g,A){g.getCrossfadeParameters&&(this._crossfadeParameters=g.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(g,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(g,void 0,A)},d.prototype.serialize=function(){var g={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(g.layout=g.layout||{},g.layout.visibility=this.visibility),Re(g,function(A,P){return!(A===void 0||P==="layout"&&!Object.keys(A).length||P==="paint"&&!Object.keys(A).length)})},d.prototype._validate=function(g,A,P,F,j){return j===void 0&&(j={}),(!j||j.validate!==!1)&&Zo(this,g.call(ur,{key:A,layerType:this.type,objectKey:P,value:F,styleSpec:St,style:{glyphs:!0,sprite:!0}}))},d.prototype.is3D=function(){return!1},d.prototype.isTileClipped=function(){return!1},d.prototype.hasOffscreenPass=function(){return!1},d.prototype.resize=function(){},d.prototype.isStateDependent=function(){for(var g in this.paint._values){var A=this.paint.get(g);if(A instanceof $u&&cn(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1},d}(un),nh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Md=function(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Cs=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function gu(u,d){d===void 0&&(d=1);var g=0,A=0;return{members:u.map(function(P){var F=nh[P.type].BYTES_PER_ELEMENT,j=g=p0(g,Math.max(d,F)),q=P.components||1;return A=Math.max(A,F),g+=F*q,{name:P.name,type:P.type,components:q,offset:j}}),size:p0(g,Math.max(A,d)),alignment:d}}function p0(u,d){return Math.ceil(u/d)*d}Cs.serialize=function(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}},Cs.deserialize=function(u){var d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d},Cs.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Cs.prototype.clear=function(){this.length=0},Cs.prototype.resize=function(u){this.reserve(u),this.length=u},Cs.prototype.reserve=function(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}},Cs.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Zh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var F=2*g;return this.int16[F+0]=A,this.int16[F+1]=P,g},d}(Cs);Zh.prototype.bytesPerElement=4,oo("StructArrayLayout2i4",Zh);var op=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,F)},d.prototype.emplace=function(g,A,P,F,j){var q=4*g;return this.int16[q+0]=A,this.int16[q+1]=P,this.int16[q+2]=F,this.int16[q+3]=j,g},d}(Cs);op.prototype.bytesPerElement=8,oo("StructArrayLayout4i8",op);var Eh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,q){var _e=this.length;return this.resize(_e+1),this.emplace(_e,g,A,P,F,j,q)},d.prototype.emplace=function(g,A,P,F,j,q,_e){var Ne=6*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.int16[Ne+2]=F,this.int16[Ne+3]=j,this.int16[Ne+4]=q,this.int16[Ne+5]=_e,g},d}(Cs);Eh.prototype.bytesPerElement=12,oo("StructArrayLayout2i4i12",Eh);var Qu=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,q){var _e=this.length;return this.resize(_e+1),this.emplace(_e,g,A,P,F,j,q)},d.prototype.emplace=function(g,A,P,F,j,q,_e){var Ne=4*g,Ze=8*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.uint8[Ze+4]=F,this.uint8[Ze+5]=j,this.uint8[Ze+6]=q,this.uint8[Ze+7]=_e,g},d}(Cs);Qu.prototype.bytesPerElement=8,oo("StructArrayLayout2i4ub8",Qu);var ap=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var F=2*g;return this.float32[F+0]=A,this.float32[F+1]=P,g},d}(Cs);ap.prototype.bytesPerElement=8,oo("StructArrayLayout2f8",ap);var wc=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,q,_e,Ne,Ze,ot){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,g,A,P,F,j,q,_e,Ne,Ze,ot)},d.prototype.emplace=function(g,A,P,F,j,q,_e,Ne,Ze,ot,Tt){var Bt=10*g;return this.uint16[Bt+0]=A,this.uint16[Bt+1]=P,this.uint16[Bt+2]=F,this.uint16[Bt+3]=j,this.uint16[Bt+4]=q,this.uint16[Bt+5]=_e,this.uint16[Bt+6]=Ne,this.uint16[Bt+7]=Ze,this.uint16[Bt+8]=ot,this.uint16[Bt+9]=Tt,g},d}(Cs);wc.prototype.bytesPerElement=20,oo("StructArrayLayout10ui20",wc);var Hp=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt){var vn=this.length;return this.resize(vn+1),this.emplace(vn,g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt)},d.prototype.emplace=function(g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt,vn){var _n=12*g;return this.int16[_n+0]=A,this.int16[_n+1]=P,this.int16[_n+2]=F,this.int16[_n+3]=j,this.uint16[_n+4]=q,this.uint16[_n+5]=_e,this.uint16[_n+6]=Ne,this.uint16[_n+7]=Ze,this.int16[_n+8]=ot,this.int16[_n+9]=Tt,this.int16[_n+10]=Bt,this.int16[_n+11]=vn,g},d}(Cs);Hp.prototype.bytesPerElement=24,oo("StructArrayLayout4i4ui4i24",Hp);var jc=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=3*g;return this.float32[j+0]=A,this.float32[j+1]=P,this.float32[j+2]=F,g},d}(Cs);jc.prototype.bytesPerElement=12,oo("StructArrayLayout3f12",jc);var Rd=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.uint32[1*g+0]=A,g},d}(Cs);Rd.prototype.bytesPerElement=4,oo("StructArrayLayout1ul4",Rd);var v0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,q,_e,Ne,Ze){var ot=this.length;return this.resize(ot+1),this.emplace(ot,g,A,P,F,j,q,_e,Ne,Ze)},d.prototype.emplace=function(g,A,P,F,j,q,_e,Ne,Ze,ot){var Tt=10*g,Bt=5*g;return this.int16[Tt+0]=A,this.int16[Tt+1]=P,this.int16[Tt+2]=F,this.int16[Tt+3]=j,this.int16[Tt+4]=q,this.int16[Tt+5]=_e,this.uint32[Bt+3]=Ne,this.uint16[Tt+8]=Ze,this.uint16[Tt+9]=ot,g},d}(Cs);v0.prototype.bytesPerElement=20,oo("StructArrayLayout6i1ul2ui20",v0);var Sh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,q){var _e=this.length;return this.resize(_e+1),this.emplace(_e,g,A,P,F,j,q)},d.prototype.emplace=function(g,A,P,F,j,q,_e){var Ne=6*g;return this.int16[Ne+0]=A,this.int16[Ne+1]=P,this.int16[Ne+2]=F,this.int16[Ne+3]=j,this.int16[Ne+4]=q,this.int16[Ne+5]=_e,g},d}(Cs);Sh.prototype.bytesPerElement=12,oo("StructArrayLayout2i2i2i12",Sh);var Xh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j){var q=this.length;return this.resize(q+1),this.emplace(q,g,A,P,F,j)},d.prototype.emplace=function(g,A,P,F,j,q){var _e=4*g,Ne=8*g;return this.float32[_e+0]=A,this.float32[_e+1]=P,this.float32[_e+2]=F,this.int16[Ne+6]=j,this.int16[Ne+7]=q,g},d}(Cs);Xh.prototype.bytesPerElement=16,oo("StructArrayLayout2f1f2i16",Xh);var m0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,F)},d.prototype.emplace=function(g,A,P,F,j){var q=12*g,_e=3*g;return this.uint8[q+0]=A,this.uint8[q+1]=P,this.float32[_e+1]=F,this.float32[_e+2]=j,g},d}(Cs);m0.prototype.bytesPerElement=12,oo("StructArrayLayout2ub2f12",m0);var Vf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=3*g;return this.uint16[j+0]=A,this.uint16[j+1]=P,this.uint16[j+2]=F,g},d}(Cs);Vf.prototype.bytesPerElement=6,oo("StructArrayLayout3ui6",Vf);var Hf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt,vn,_n,Hn,Ln,fr){var _r=this.length;return this.resize(_r+1),this.emplace(_r,g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt,vn,_n,Hn,Ln,fr)},d.prototype.emplace=function(g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt,vn,_n,Hn,Ln,fr,_r){var Fr=24*g,Br=12*g,$r=48*g;return this.int16[Fr+0]=A,this.int16[Fr+1]=P,this.uint16[Fr+2]=F,this.uint16[Fr+3]=j,this.uint32[Br+2]=q,this.uint32[Br+3]=_e,this.uint32[Br+4]=Ne,this.uint16[Fr+10]=Ze,this.uint16[Fr+11]=ot,this.uint16[Fr+12]=Tt,this.float32[Br+7]=Bt,this.float32[Br+8]=vn,this.uint8[$r+36]=_n,this.uint8[$r+37]=Hn,this.uint8[$r+38]=Ln,this.uint32[Br+10]=fr,this.int16[Fr+22]=_r,g},d}(Cs);Hf.prototype.bytesPerElement=48,oo("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Hf);var g0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt,vn,_n,Hn,Ln,fr,_r,Fr,Br,$r,Ni,eo,zo,go,$o,yo,Ga){var ua=this.length;return this.resize(ua+1),this.emplace(ua,g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt,vn,_n,Hn,Ln,fr,_r,Fr,Br,$r,Ni,eo,zo,go,$o,yo,Ga)},d.prototype.emplace=function(g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt,vn,_n,Hn,Ln,fr,_r,Fr,Br,$r,Ni,eo,zo,go,$o,yo,Ga,ua){var Ro=34*g,Ka=17*g;return this.int16[Ro+0]=A,this.int16[Ro+1]=P,this.int16[Ro+2]=F,this.int16[Ro+3]=j,this.int16[Ro+4]=q,this.int16[Ro+5]=_e,this.int16[Ro+6]=Ne,this.int16[Ro+7]=Ze,this.uint16[Ro+8]=ot,this.uint16[Ro+9]=Tt,this.uint16[Ro+10]=Bt,this.uint16[Ro+11]=vn,this.uint16[Ro+12]=_n,this.uint16[Ro+13]=Hn,this.uint16[Ro+14]=Ln,this.uint16[Ro+15]=fr,this.uint16[Ro+16]=_r,this.uint16[Ro+17]=Fr,this.uint16[Ro+18]=Br,this.uint16[Ro+19]=$r,this.uint16[Ro+20]=Ni,this.uint16[Ro+21]=eo,this.uint16[Ro+22]=zo,this.uint32[Ka+12]=go,this.float32[Ka+13]=$o,this.float32[Ka+14]=yo,this.float32[Ka+15]=Ga,this.float32[Ka+16]=ua,g},d}(Cs);g0.prototype.bytesPerElement=68,oo("StructArrayLayout8i15ui1ul4f68",g0);var rh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.float32[1*g+0]=A,g},d}(Cs);rh.prototype.bytesPerElement=4,oo("StructArrayLayout1f4",rh);var Of=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=3*g;return this.int16[j+0]=A,this.int16[j+1]=P,this.int16[j+2]=F,g},d}(Cs);Of.prototype.bytesPerElement=6,oo("StructArrayLayout3i6",Of);var X0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P){var F=this.length;return this.resize(F+1),this.emplace(F,g,A,P)},d.prototype.emplace=function(g,A,P,F){var j=4*g;return this.uint32[2*g+0]=A,this.uint16[j+2]=P,this.uint16[j+3]=F,g},d}(Cs);X0.prototype.bytesPerElement=8,oo("StructArrayLayout1ul2ui8",X0);var Gf=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A){var P=this.length;return this.resize(P+1),this.emplace(P,g,A)},d.prototype.emplace=function(g,A,P){var F=2*g;return this.uint16[F+0]=A,this.uint16[F+1]=P,g},d}(Cs);Gf.prototype.bytesPerElement=4,oo("StructArrayLayout2ui4",Gf);var Yh=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g){var A=this.length;return this.resize(A+1),this.emplace(A,g)},d.prototype.emplace=function(g,A){return this.uint16[1*g+0]=A,g},d}(Cs);Yh.prototype.bytesPerElement=2,oo("StructArrayLayout1ui2",Yh);var y0=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},d.prototype.emplaceBack=function(g,A,P,F){var j=this.length;return this.resize(j+1),this.emplace(j,g,A,P,F)},d.prototype.emplace=function(g,A,P,F,j){var q=4*g;return this.float32[q+0]=A,this.float32[q+1]=P,this.float32[q+2]=F,this.float32[q+3]=j,g},d}(Cs);y0.prototype.bytesPerElement=16,oo("StructArrayLayout4f16",y0);var _=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return g.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},g.x1.get=function(){return this._structArray.int16[this._pos2+2]},g.y1.get=function(){return this._structArray.int16[this._pos2+3]},g.x2.get=function(){return this._structArray.int16[this._pos2+4]},g.y2.get=function(){return this._structArray.int16[this._pos2+5]},g.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},g.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},g.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},g.anchorPoint.get=function(){return new ue(this.anchorPointX,this.anchorPointY)},Object.defineProperties(d.prototype,g),d}(Md);_.prototype.size=20;var S=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new _(this,g)},d}(v0);oo("CollisionBoxArray",S);var x=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return g.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},g.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},g.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},g.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},g.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},g.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},g.segment.get=function(){return this._structArray.uint16[this._pos2+10]},g.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},g.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},g.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},g.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},g.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},g.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},g.placedOrientation.set=function(A){this._structArray.uint8[this._pos1+37]=A},g.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},g.hidden.set=function(A){this._structArray.uint8[this._pos1+38]=A},g.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},g.crossTileID.set=function(A){this._structArray.uint32[this._pos4+10]=A},g.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(d.prototype,g),d}(Md);x.prototype.size=48;var O=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new x(this,g)},d}(Hf);oo("PlacedSymbolArray",O);var k=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return g.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},g.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},g.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},g.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},g.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},g.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},g.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},g.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},g.key.get=function(){return this._structArray.uint16[this._pos2+8]},g.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},g.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},g.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},g.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},g.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},g.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},g.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},g.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},g.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},g.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},g.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},g.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},g.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},g.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},g.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},g.crossTileID.set=function(A){this._structArray.uint32[this._pos4+12]=A},g.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},g.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},g.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},g.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(d.prototype,g),d}(Md);k.prototype.size=68;var Z=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new k(this,g)},d}(g0);oo("SymbolInstanceArray",Z);var Q=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getoffsetX=function(g){return this.float32[1*g+0]},d}(rh);oo("GlyphOffsetArray",Q);var ge=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.getx=function(g){return this.int16[3*g+0]},d.prototype.gety=function(g){return this.int16[3*g+1]},d.prototype.gettileUnitDistanceFromAnchor=function(g){return this.int16[3*g+2]},d}(Of);oo("SymbolLineVertexArray",ge);var je=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var g={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return g.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},g.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},g.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(d.prototype,g),d}(Md);je.prototype.size=8;var ft=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.get=function(g){return new je(this,g)},d}(X0);oo("FeatureIndexArray",ft);var Ut=gu([{name:"a_pos",components:2,type:"Int16"}],4).members,Vt=function(u){u===void 0&&(u=[]),this.segments=u};function Zt(u,d){return 256*(u=Pe(Math.floor(u),0,255))+Pe(Math.floor(d),0,255)}Vt.prototype.prepareSegment=function(u,d,g,A){var P=this.segments[this.segments.length-1];return u>Vt.MAX_VERTEX_ARRAY_LENGTH&&We("Max vertices per segment is "+Vt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+u),(!P||P.vertexLength+u>Vt.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==A)&&(P={vertexOffset:d.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},A!==void 0&&(P.sortKey=A),this.segments.push(P)),P},Vt.prototype.get=function(){return this.segments},Vt.prototype.destroy=function(){for(var u=0,d=this.segments;u<d.length;u+=1){var g=d[u];for(var A in g.vaos)g.vaos[A].destroy()}},Vt.simpleSegment=function(u,d,g,A){return new Vt([{vertexOffset:u,primitiveOffset:d,vertexLength:g,primitiveLength:A,vaos:{},sortKey:0}])},Vt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,oo("SegmentVector",Vt);var En=gu([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),mn=he(function(u){u.exports=function(d,g){var A,P,F,j,q,_e,Ne,Ze;for(P=d.length-(A=3&d.length),F=g,q=3432918353,_e=461845907,Ze=0;Ze<P;)Ne=255&d.charCodeAt(Ze)|(255&d.charCodeAt(++Ze))<<8|(255&d.charCodeAt(++Ze))<<16|(255&d.charCodeAt(++Ze))<<24,++Ze,F=27492+(65535&(j=5*(65535&(F=(F^=Ne=(65535&(Ne=(Ne=(65535&Ne)*q+(((Ne>>>16)*q&65535)<<16)&4294967295)<<15|Ne>>>17))*_e+(((Ne>>>16)*_e&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(Ne=0,A){case 3:Ne^=(255&d.charCodeAt(Ze+2))<<16;case 2:Ne^=(255&d.charCodeAt(Ze+1))<<8;case 1:F^=Ne=(65535&(Ne=(Ne=(65535&(Ne^=255&d.charCodeAt(Ze)))*q+(((Ne>>>16)*q&65535)<<16)&4294967295)<<15|Ne>>>17))*_e+(((Ne>>>16)*_e&65535)<<16)&4294967295}return F^=d.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^=F>>>16)>>>0}}),Un=he(function(u){u.exports=function(d,g){for(var A,P=d.length,F=g^P,j=0;P>=4;)A=1540483477*(65535&(A=255&d.charCodeAt(j)|(255&d.charCodeAt(++j))<<8|(255&d.charCodeAt(++j))<<16|(255&d.charCodeAt(++j))<<24))+((1540483477*(A>>>16)&65535)<<16),F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),P-=4,++j;switch(P){case 3:F^=(255&d.charCodeAt(j+2))<<16;case 2:F^=(255&d.charCodeAt(j+1))<<8;case 1:F=1540483477*(65535&(F^=255&d.charCodeAt(j)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<16),(F^=F>>>15)>>>0}}),ln=mn,kn=Un;ln.murmur3=mn,ln.murmur2=kn;var Jn=function(){this.ids=[],this.positions=[],this.indexed=!1};Jn.prototype.add=function(u,d,g,A){this.ids.push(Ir(u)),this.positions.push(d,g,A)},Jn.prototype.getPositions=function(u){for(var d=Ir(u),g=0,A=this.ids.length-1;g<A;){var P=g+A>>1;this.ids[P]>=d?A=P:g=P+1}for(var F=[];this.ids[g]===d;)F.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return F},Jn.serialize=function(u,d){var g=new Float64Array(u.ids),A=new Uint32Array(u.positions);return function P(F,j,q,_e){for(;q<_e;){for(var Ne=F[q+_e>>1],Ze=q-1,ot=_e+1;;){do Ze++;while(F[Ze]<Ne);do ot--;while(F[ot]>Ne);if(Ze>=ot)break;Mr(F,Ze,ot),Mr(j,3*Ze,3*ot),Mr(j,3*Ze+1,3*ot+1),Mr(j,3*Ze+2,3*ot+2)}ot-q<_e-ot?(P(F,j,q,ot),q=ot+1):(P(F,j,ot+1,_e),_e=ot)}}(g,A,0,g.length-1),d&&d.push(g.buffer,A.buffer),{ids:g,positions:A}},Jn.deserialize=function(u){var d=new Jn;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d};var gr=Math.pow(2,53)-1;function Ir(u){var d=+u;return!isNaN(d)&&d<=gr?d:ln(String(u))}function Mr(u,d,g){var A=u[d];u[d]=u[g],u[g]=A}oo("FeaturePositionMap",Jn);var Ur=function(u,d){this.gl=u.gl,this.location=d},si=function(u){function d(g,A){u.call(this,g,A),this.current=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){this.current!==g&&(this.current=g,this.gl.uniform1i(this.location,g))},d}(Ur),Vi=function(u){function d(g,A){u.call(this,g,A),this.current=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){this.current!==g&&(this.current=g,this.gl.uniform1f(this.location,g))},d}(Ur),Bi=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]||(this.current=g,this.gl.uniform2f(this.location,g[0],g[1]))},d}(Ur),vo=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]||(this.current=g,this.gl.uniform3f(this.location,g[0],g[1],g[2]))},d}(Ur),jo=function(u){function d(g,A){u.call(this,g,A),this.current=[0,0,0,0]}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]&&g[3]===this.current[3]||(this.current=g,this.gl.uniform4f(this.location,g[0],g[1],g[2],g[3]))},d}(Ur),Xo=function(u){function d(g,A){u.call(this,g,A),this.current=yn.transparent}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){g.r===this.current.r&&g.g===this.current.g&&g.b===this.current.b&&g.a===this.current.a||(this.current=g,this.gl.uniform4f(this.location,g.r,g.g,g.b,g.a))},d}(Ur),Yo=new Float32Array(16),cs=function(u){function d(g,A){u.call(this,g,A),this.current=Yo}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.set=function(g){if(g[12]!==this.current[12]||g[0]!==this.current[0])return this.current=g,void this.gl.uniformMatrix4fv(this.location,!1,g);for(var A=1;A<16;A++)if(g[A]!==this.current[A]){this.current=g,this.gl.uniformMatrix4fv(this.location,!1,g);break}},d}(Ur);function Dr(u){return[Zt(255*u.r,255*u.g),Zt(255*u.b,255*u.a)]}var Qt=function(u,d,g){this.value=u,this.uniformNames=d.map(function(A){return"u_"+A}),this.type=g};Qt.prototype.setUniform=function(u,d,g){u.set(g.constantOr(this.value))},Qt.prototype.getBinding=function(u,d,g){return this.type==="color"?new Xo(u,d):new Vi(u,d)};var ga=function(u,d){this.uniformNames=d.map(function(g){return"u_"+g}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ga.prototype.setConstantPatternPositions=function(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr},ga.prototype.setUniform=function(u,d,g,A){var P=A==="u_pattern_to"?this.patternTo:A==="u_pattern_from"?this.patternFrom:A==="u_pixel_ratio_to"?this.pixelRatioTo:A==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&u.set(P)},ga.prototype.getBinding=function(u,d,g){return g.substr(0,9)==="u_pattern"?new jo(u,d):new Vi(u,d)};var fa=function(u,d,g,A){this.expression=u,this.type=g,this.maxValue=0,this.paintVertexAttributes=d.map(function(P){return{name:"a_"+P,type:"Float32",components:g==="color"?2:1,offset:0}}),this.paintVertexArray=new A};fa.prototype.populatePaintArray=function(u,d,g,A,P){var F=this.paintVertexArray.length,j=this.expression.evaluate(new Aa(0),d,{},A,[],P);this.paintVertexArray.resize(u),this._setPaintValue(F,u,j)},fa.prototype.updatePaintArray=function(u,d,g,A){var P=this.expression.evaluate({zoom:0},g,A);this._setPaintValue(u,d,P)},fa.prototype._setPaintValue=function(u,d,g){if(this.type==="color")for(var A=Dr(g),P=u;P<d;P++)this.paintVertexArray.emplace(P,A[0],A[1]);else{for(var F=u;F<d;F++)this.paintVertexArray.emplace(F,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}},fa.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},fa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Qo=function(u,d,g,A,P,F){this.expression=u,this.uniformNames=d.map(function(j){return"u_"+j+"_t"}),this.type=g,this.useIntegerZoom=A,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=d.map(function(j){return{name:"a_"+j,type:"Float32",components:g==="color"?4:2,offset:0}}),this.paintVertexArray=new F};Qo.prototype.populatePaintArray=function(u,d,g,A,P){var F=this.expression.evaluate(new Aa(this.zoom),d,{},A,[],P),j=this.expression.evaluate(new Aa(this.zoom+1),d,{},A,[],P),q=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(q,u,F,j)},Qo.prototype.updatePaintArray=function(u,d,g,A){var P=this.expression.evaluate({zoom:this.zoom},g,A),F=this.expression.evaluate({zoom:this.zoom+1},g,A);this._setPaintValue(u,d,P,F)},Qo.prototype._setPaintValue=function(u,d,g,A){if(this.type==="color")for(var P=Dr(g),F=Dr(A),j=u;j<d;j++)this.paintVertexArray.emplace(j,P[0],P[1],F[0],F[1]);else{for(var q=u;q<d;q++)this.paintVertexArray.emplace(q,g,A);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(A))}},Qo.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Qo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Qo.prototype.setUniform=function(u,d){var g=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,A=Pe(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);u.set(A)},Qo.prototype.getBinding=function(u,d,g){return new Vi(u,d)};var Ea=function(u,d,g,A,P,F){this.expression=u,this.type=d,this.useIntegerZoom=g,this.zoom=A,this.layerId=F,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P};Ea.prototype.populatePaintArray=function(u,d,g){var A=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(A,u,d.patterns&&d.patterns[this.layerId],g)},Ea.prototype.updatePaintArray=function(u,d,g,A,P){this._setPaintValues(u,d,g.patterns&&g.patterns[this.layerId],P)},Ea.prototype._setPaintValues=function(u,d,g,A){if(A&&g){var P=A[g.min],F=A[g.mid],j=A[g.max];if(P&&F&&j)for(var q=u;q<d;q++)this.zoomInPaintVertexArray.emplace(q,F.tl[0],F.tl[1],F.br[0],F.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],F.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(q,F.tl[0],F.tl[1],F.br[0],F.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],F.pixelRatio,j.pixelRatio)}},Ea.prototype.upload=function(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,En.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,En.members,this.expression.isStateDependent))},Ea.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var aa=function(u,d,g){this.binders={},this._buffers=[];var A=[];for(var P in u.paint._values)if(g(P)){var F=u.paint.get(P);if(F instanceof $u&&cn(F.property.specification)){var j=au(P,u.type),q=F.value,_e=F.property.specification.type,Ne=F.property.useIntegerZoom,Ze=F.property.specification["property-type"],ot=Ze==="cross-faded"||Ze==="cross-faded-data-driven";if(q.kind==="constant")this.binders[P]=ot?new ga(q.value,j):new Qt(q.value,j,_e),A.push("/u_"+P);else if(q.kind==="source"||ot){var Tt=xl(P,_e,"source");this.binders[P]=ot?new Ea(q,_e,Ne,d,Tt,u.id):new fa(q,j,_e,Tt),A.push("/a_"+P)}else{var Bt=xl(P,_e,"composite");this.binders[P]=new Qo(q,j,_e,Ne,d,Bt),A.push("/z_"+P)}}}this.cacheKey=A.sort().join("")};aa.prototype.getMaxValue=function(u){var d=this.binders[u];return d instanceof fa||d instanceof Qo?d.maxValue:0},aa.prototype.populatePaintArrays=function(u,d,g,A,P){for(var F in this.binders){var j=this.binders[F];(j instanceof fa||j instanceof Qo||j instanceof Ea)&&j.populatePaintArray(u,d,g,A,P)}},aa.prototype.setConstantPatternPositions=function(u,d){for(var g in this.binders){var A=this.binders[g];A instanceof ga&&A.setConstantPatternPositions(u,d)}},aa.prototype.updatePaintArrays=function(u,d,g,A,P){var F=!1;for(var j in u)for(var q=0,_e=d.getPositions(j);q<_e.length;q+=1){var Ne=_e[q],Ze=g.feature(Ne.index);for(var ot in this.binders){var Tt=this.binders[ot];if((Tt instanceof fa||Tt instanceof Qo||Tt instanceof Ea)&&Tt.expression.isStateDependent===!0){var Bt=A.paint.get(ot);Tt.expression=Bt.value,Tt.updatePaintArray(Ne.start,Ne.end,Ze,u[j],P),F=!0}}}return F},aa.prototype.defines=function(){var u=[];for(var d in this.binders){var g=this.binders[d];(g instanceof Qt||g instanceof ga)&&u.push.apply(u,g.uniformNames.map(function(A){return"#define HAS_UNIFORM_"+A}))}return u},aa.prototype.getBinderAttributes=function(){var u=[];for(var d in this.binders){var g=this.binders[d];if(g instanceof fa||g instanceof Qo)for(var A=0;A<g.paintVertexAttributes.length;A++)u.push(g.paintVertexAttributes[A].name);else if(g instanceof Ea)for(var P=0;P<En.members.length;P++)u.push(En.members[P].name)}return u},aa.prototype.getBinderUniforms=function(){var u=[];for(var d in this.binders){var g=this.binders[d];if(g instanceof Qt||g instanceof ga||g instanceof Qo)for(var A=0,P=g.uniformNames;A<P.length;A+=1)u.push(P[A])}return u},aa.prototype.getPaintVertexBuffers=function(){return this._buffers},aa.prototype.getUniforms=function(u,d){var g=[];for(var A in this.binders){var P=this.binders[A];if(P instanceof Qt||P instanceof ga||P instanceof Qo)for(var F=0,j=P.uniformNames;F<j.length;F+=1){var q=j[F];if(d[q]){var _e=P.getBinding(u,d[q],q);g.push({name:q,property:A,binding:_e})}}}return g},aa.prototype.setUniforms=function(u,d,g,A){for(var P=0,F=d;P<F.length;P+=1){var j=F[P],q=j.name,_e=j.property;this.binders[_e].setUniform(j.binding,A,g.get(_e),q)}},aa.prototype.updatePaintBuffers=function(u){for(var d in this._buffers=[],this.binders){var g=this.binders[d];if(u&&g instanceof Ea){var A=u.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;A&&this._buffers.push(A)}else(g instanceof fa||g instanceof Qo)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}},aa.prototype.upload=function(u){for(var d in this.binders){var g=this.binders[d];(g instanceof fa||g instanceof Qo||g instanceof Ea)&&g.upload(u)}this.updatePaintBuffers()},aa.prototype.destroy=function(){for(var u in this.binders){var d=this.binders[u];(d instanceof fa||d instanceof Qo||d instanceof Ea)&&d.destroy()}};var ko=function(u,d,g){g===void 0&&(g=function(){return!0}),this.programConfigurations={};for(var A=0,P=u;A<P.length;A+=1){var F=P[A];this.programConfigurations[F.id]=new aa(F,d,g)}this.needsUpload=!1,this._featureMap=new Jn,this._bufferOffset=0};function au(u,d){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(d+"-","").replace(/-/g,"_")]}function xl(u,d,g){var A={color:{source:ap,composite:y0},number:{source:rh,composite:ap}},P=function(F){return{"line-pattern":{source:wc,composite:wc},"fill-pattern":{source:wc,composite:wc},"fill-extrusion-pattern":{source:wc,composite:wc}}[F]}(u);return P&&P[g]||A[d][g]}ko.prototype.populatePaintArrays=function(u,d,g,A,P,F){for(var j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(u,d,A,P,F);d.id!==void 0&&this._featureMap.add(d.id,g,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0},ko.prototype.updatePaintArrays=function(u,d,g,A){for(var P=0,F=g;P<F.length;P+=1){var j=F[P];this.needsUpload=this.programConfigurations[j.id].updatePaintArrays(u,this._featureMap,d,j,A)||this.needsUpload}},ko.prototype.get=function(u){return this.programConfigurations[u]},ko.prototype.upload=function(u){if(this.needsUpload){for(var d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}},ko.prototype.destroy=function(){for(var u in this.programConfigurations)this.programConfigurations[u].destroy()},oo("ConstantBinder",Qt),oo("CrossFadedConstantBinder",ga),oo("SourceExpressionBinder",fa),oo("CrossFadedCompositeBinder",Ea),oo("CompositeExpressionBinder",Qo),oo("ProgramConfiguration",aa,{omit:["_buffers"]}),oo("ProgramConfigurationSet",ko);var Cu=Math.pow(2,14)-1,su=-Cu-1;function Ss(u){for(var d=8192/u.extent,g=u.loadGeometry(),A=0;A<g.length;A++)for(var P=g[A],F=0;F<P.length;F++){var j=P[F],q=Math.round(j.x*d),_e=Math.round(j.y*d);j.x=Pe(q,su,Cu),j.y=Pe(_e,su,Cu),(q<j.x||q>j.x+1||_e<j.y||_e>j.y+1)&&We("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return g}function vl(u,d){return{type:u.type,id:u.id,properties:u.properties,geometry:d?Ss(u):[]}}function fl(u,d,g,A,P){u.emplaceBack(2*d+(A+1)/2,2*g+(P+1)/2)}var vc=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Zh,this.indexArray=new Vf,this.segments=new Vt,this.programConfigurations=new ko(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};function Wf(u,d){for(var g=0;g<u.length;g++)if(ih(d,u[g]))return!0;for(var A=0;A<d.length;A++)if(ih(u,d[A]))return!0;return!!sp(u,d)}function Tc(u,d,g){return!!ih(u,d)||!!wh(d,u,g)}function df(u,d){if(u.length===1)return qh(d,u[0]);for(var g=0;g<d.length;g++)for(var A=d[g],P=0;P<A.length;P++)if(ih(u,A[P]))return!0;for(var F=0;F<u.length;F++)if(qh(d,u[F]))return!0;for(var j=0;j<d.length;j++)if(sp(u,d[j]))return!0;return!1}function Vc(u,d,g){if(u.length>1){if(sp(u,d))return!0;for(var A=0;A<d.length;A++)if(wh(d[A],u,g))return!0}for(var P=0;P<u.length;P++)if(wh(u[P],d,g))return!0;return!1}function sp(u,d){if(u.length===0||d.length===0)return!1;for(var g=0;g<u.length-1;g++)for(var A=u[g],P=u[g+1],F=0;F<d.length-1;F++)if(lp(A,P,d[F],d[F+1]))return!0;return!1}function lp(u,d,g,A){return lt(u,g,A)!==lt(d,g,A)&&lt(u,d,g)!==lt(u,d,A)}function wh(u,d,g){var A=g*g;if(d.length===1)return u.distSqr(d[0])<A;for(var P=1;P<d.length;P++)if($h(u,d[P-1],d[P])<A)return!0;return!1}function $h(u,d,g){var A=d.distSqr(g);if(A===0)return u.distSqr(d);var P=((u.x-d.x)*(g.x-d.x)+(u.y-d.y)*(g.y-d.y))/A;return u.distSqr(P<0?d:P>1?g:g.sub(d)._mult(P)._add(d))}function qh(u,d){for(var g,A,P,F=!1,j=0;j<u.length;j++)for(var q=0,_e=(g=u[j]).length-1;q<g.length;_e=q++)(A=g[q]).y>d.y!=(P=g[_e]).y>d.y&&d.x<(P.x-A.x)*(d.y-A.y)/(P.y-A.y)+A.x&&(F=!F);return F}function ih(u,d){for(var g=!1,A=0,P=u.length-1;A<u.length;P=A++){var F=u[A],j=u[P];F.y>d.y!=j.y>d.y&&d.x<(j.x-F.x)*(d.y-F.y)/(j.y-F.y)+F.x&&(g=!g)}return g}function Mi(u,d,g){var A=g[0],P=g[2];if(u.x<A.x&&d.x<A.x||u.x>P.x&&d.x>P.x||u.y<A.y&&d.y<A.y||u.y>P.y&&d.y>P.y)return!1;var F=lt(u,d,g[0]);return F!==lt(u,d,g[1])||F!==lt(u,d,g[2])||F!==lt(u,d,g[3])}function Rl(u,d,g){var A=d.paint.get(u).value;return A.kind==="constant"?A.value:g.programConfigurations.get(d.id).getMaxValue(u)}function Pl(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Ju(u,d,g,A,P){if(!d[0]&&!d[1])return u;var F=ue.convert(d)._mult(P);g==="viewport"&&F._rotate(-A);for(var j=[],q=0;q<u.length;q++)j.push(u[q].sub(F));return j}vc.prototype.populate=function(u,d,g){var A=this.layers[0],P=[],F=null;A.type==="circle"&&(F=A.layout.get("circle-sort-key"));for(var j=0,q=u;j<q.length;j+=1){var _e=q[j],Ne=_e.feature,Ze=_e.id,ot=_e.index,Tt=_e.sourceLayerIndex,Bt=this.layers[0]._featureFilter.needGeometry,vn=vl(Ne,Bt);if(this.layers[0]._featureFilter.filter(new Aa(this.zoom),vn,g)){var _n=F?F.evaluate(vn,{},g):void 0,Hn={id:Ze,properties:Ne.properties,type:Ne.type,sourceLayerIndex:Tt,index:ot,geometry:Bt?vn.geometry:Ss(Ne),patterns:{},sortKey:_n};P.push(Hn)}}F&&P.sort(function(eo,zo){return eo.sortKey-zo.sortKey});for(var Ln=0,fr=P;Ln<fr.length;Ln+=1){var _r=fr[Ln],Fr=_r.geometry,Br=_r.index,$r=_r.sourceLayerIndex,Ni=u[Br].feature;this.addFeature(_r,Fr,Br,g),d.featureIndex.insert(Ni,Fr,Br,$r,this.index)}},vc.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},vc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vc.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ut),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},vc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vc.prototype.addFeature=function(u,d,g,A){for(var P=0,F=d;P<F.length;P+=1)for(var j=0,q=F[P];j<q.length;j+=1){var _e=q[j],Ne=_e.x,Ze=_e.y;if(!(Ne<0||Ne>=8192||Ze<0||Ze>=8192)){var ot=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),Tt=ot.vertexLength;fl(this.layoutVertexArray,Ne,Ze,-1,-1),fl(this.layoutVertexArray,Ne,Ze,1,-1),fl(this.layoutVertexArray,Ne,Ze,1,1),fl(this.layoutVertexArray,Ne,Ze,-1,1),this.indexArray.emplaceBack(Tt,Tt+1,Tt+2),this.indexArray.emplaceBack(Tt,Tt+3,Tt+2),ot.vertexLength+=4,ot.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,{},A)},oo("CircleBucket",vc,{omit:["layers"]});var Mf=new cl({"circle-sort-key":new Ao(St.layout_circle["circle-sort-key"])}),Rf={paint:new cl({"circle-radius":new Ao(St.paint_circle["circle-radius"]),"circle-color":new Ao(St.paint_circle["circle-color"]),"circle-blur":new Ao(St.paint_circle["circle-blur"]),"circle-opacity":new Ao(St.paint_circle["circle-opacity"]),"circle-translate":new Bo(St.paint_circle["circle-translate"]),"circle-translate-anchor":new Bo(St.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Bo(St.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Bo(St.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ao(St.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ao(St.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ao(St.paint_circle["circle-stroke-opacity"])}),layout:Mf},es=typeof Float32Array!="undefined"?Float32Array:Array;function Ou(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Wl(u,d,g){var A=d[0],P=d[1],F=d[2],j=d[3],q=d[4],_e=d[5],Ne=d[6],Ze=d[7],ot=d[8],Tt=d[9],Bt=d[10],vn=d[11],_n=d[12],Hn=d[13],Ln=d[14],fr=d[15],_r=g[0],Fr=g[1],Br=g[2],$r=g[3];return u[0]=_r*A+Fr*q+Br*ot+$r*_n,u[1]=_r*P+Fr*_e+Br*Tt+$r*Hn,u[2]=_r*F+Fr*Ne+Br*Bt+$r*Ln,u[3]=_r*j+Fr*Ze+Br*vn+$r*fr,u[4]=(_r=g[4])*A+(Fr=g[5])*q+(Br=g[6])*ot+($r=g[7])*_n,u[5]=_r*P+Fr*_e+Br*Tt+$r*Hn,u[6]=_r*F+Fr*Ne+Br*Bt+$r*Ln,u[7]=_r*j+Fr*Ze+Br*vn+$r*fr,u[8]=(_r=g[8])*A+(Fr=g[9])*q+(Br=g[10])*ot+($r=g[11])*_n,u[9]=_r*P+Fr*_e+Br*Tt+$r*Hn,u[10]=_r*F+Fr*Ne+Br*Bt+$r*Ln,u[11]=_r*j+Fr*Ze+Br*vn+$r*fr,u[12]=(_r=g[12])*A+(Fr=g[13])*q+(Br=g[14])*ot+($r=g[15])*_n,u[13]=_r*P+Fr*_e+Br*Tt+$r*Hn,u[14]=_r*F+Fr*Ne+Br*Bt+$r*Ln,u[15]=_r*j+Fr*Ze+Br*vn+$r*fr,u}Math.hypot||(Math.hypot=function(){for(var u=arguments,d=0,g=arguments.length;g--;)d+=u[g]*u[g];return Math.sqrt(d)});var oh,_0=Wl;function Pd(u,d,g){var A=d[0],P=d[1],F=d[2],j=d[3];return u[0]=g[0]*A+g[4]*P+g[8]*F+g[12]*j,u[1]=g[1]*A+g[5]*P+g[9]*F+g[13]*j,u[2]=g[2]*A+g[6]*P+g[10]*F+g[14]*j,u[3]=g[3]*A+g[7]*P+g[11]*F+g[15]*j,u}oh=new es(3),es!=Float32Array&&(oh[0]=0,oh[1]=0,oh[2]=0),function(){var u=new es(4);es!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0)}();var b0=(function(){var u=new es(2);es!=Float32Array&&(u[0]=0,u[1]=0)}(),function(u){function d(g){u.call(this,g,Rf)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new vc(g)},d.prototype.queryRadius=function(g){var A=g;return Rl("circle-radius",this,A)+Rl("circle-stroke-width",this,A)+Pl(this.paint.get("circle-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,q,_e,Ne){for(var Ze=Ju(g,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),q.angle,_e),ot=this.paint.get("circle-radius").evaluate(A,P)+this.paint.get("circle-stroke-width").evaluate(A,P),Tt=this.paint.get("circle-pitch-alignment")==="map",Bt=Tt?Ze:function(Ni,eo){return Ni.map(function(zo){return Kh(zo,eo)})}(Ze,Ne),vn=Tt?ot*_e:ot,_n=0,Hn=F;_n<Hn.length;_n+=1)for(var Ln=0,fr=Hn[_n];Ln<fr.length;Ln+=1){var _r=fr[Ln],Fr=Tt?_r:Kh(_r,Ne),Br=vn,$r=Pd([],[_r.x,_r.y,0,1],Ne);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Br*=$r[3]/q.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Br*=q.cameraToCenterDistance/$r[3]),Tc(Bt,Fr,Br))return!0}return!1},d}(Sc));function Kh(u,d){var g=Pd([],[u.x,u.y,0,1],d);return new ue(g[0]/g[3],g[1]/g[3])}var Id=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(vc);function ah(u,d,g,A){var P=d.width,F=d.height;if(A){if(A instanceof Uint8ClampedArray)A=new Uint8Array(A.buffer);else if(A.length!==P*F*g)throw new RangeError("mismatched image size")}else A=new Uint8Array(P*F*g);return u.width=P,u.height=F,u.data=A,u}function up(u,d,g){var A=d.width,P=d.height;if(A!==u.width||P!==u.height){var F=ah({},{width:A,height:P},g);Y0(u,F,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,A),height:Math.min(u.height,P)},g),u.width=A,u.height=P,u.data=F.data}}function Y0(u,d,g,A,P,F){if(P.width===0||P.height===0)return d;if(P.width>u.width||P.height>u.height||g.x>u.width-P.width||g.y>u.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>d.width||P.height>d.height||A.x>d.width-P.width||A.y>d.height-P.height)throw new RangeError("out of range destination coordinates for image copy");for(var j=u.data,q=d.data,_e=0;_e<P.height;_e++)for(var Ne=((g.y+_e)*u.width+g.x)*F,Ze=((A.y+_e)*d.width+A.x)*F,ot=0;ot<P.width*F;ot++)q[Ze+ot]=j[Ne+ot];return d}oo("HeatmapBucket",Id,{omit:["layers"]});var Qh=function(u,d){ah(this,u,1,d)};Qh.prototype.resize=function(u){up(this,u,1)},Qh.prototype.clone=function(){return new Qh({width:this.width,height:this.height},new Uint8Array(this.data))},Qh.copy=function(u,d,g,A,P){Y0(u,d,g,A,P,1)};var Hc=function(u,d){ah(this,u,4,d)};Hc.prototype.resize=function(u){up(this,u,4)},Hc.prototype.replace=function(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u},Hc.prototype.clone=function(){return new Hc({width:this.width,height:this.height},new Uint8Array(this.data))},Hc.copy=function(u,d,g,A,P){Y0(u,d,g,A,P,4)},oo("AlphaImage",Qh),oo("RGBAImage",Hc);var vg={paint:new cl({"heatmap-radius":new Ao(St.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ao(St.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Bo(St.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ku(St.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Bo(St.paint_heatmap["heatmap-opacity"])})};function Ty(u){var d={},g=u.resolution||256,A=u.clips?u.clips.length:1,P=u.image||new Hc({width:g,height:A}),F=function(vn,_n,Hn){d[u.evaluationKey]=Hn;var Ln=u.expression.evaluate(d);P.data[vn+_n+0]=Math.floor(255*Ln.r/Ln.a),P.data[vn+_n+1]=Math.floor(255*Ln.g/Ln.a),P.data[vn+_n+2]=Math.floor(255*Ln.b/Ln.a),P.data[vn+_n+3]=Math.floor(255*Ln.a)};if(u.clips)for(var j=0,q=0;j<A;++j,q+=4*g)for(var _e=0,Ne=0;_e<g;_e++,Ne+=4){var Ze=_e/(g-1),ot=u.clips[j];F(q,Ne,ot.start*(1-Ze)+ot.end*Ze)}else for(var Tt=0,Bt=0;Tt<g;Tt++,Bt+=4)F(0,Bt,Tt/(g-1));return P}var $0=function(u){function d(g){u.call(this,g,vg),this._updateColorRamp()}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new Id(g)},d.prototype._handleSpecialPaintPropertyUpdate=function(g){g==="heatmap-color"&&this._updateColorRamp()},d.prototype._updateColorRamp=function(){this.colorRamp=Ty({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},d.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},d.prototype.queryRadius=function(){return 0},d.prototype.queryIntersectsFeature=function(){return!1},d.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},d}(Sc),l1={paint:new cl({"hillshade-illumination-direction":new Bo(St.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Bo(St.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Bo(St.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Bo(St.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Bo(St.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Bo(St.paint_hillshade["hillshade-accent-color"])})},q0=function(u){function d(g){u.call(this,g,l1)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},d}(Sc),mg=gu([{name:"a_pos",components:2,type:"Int16"}],4).members,Rv=x0,Ay=x0;function x0(u,d,g){g=g||2;var A,P,F,j,q,_e,Ne,Ze=d&&d.length,ot=Ze?d[0]*g:u.length,Tt=xm(u,0,ot,g,!0),Bt=[];if(!Tt||Tt.next===Tt.prev)return Bt;if(Ze&&(Tt=function(_n,Hn,Ln,fr){var _r,Fr,Br,$r=[];for(_r=0,Fr=Hn.length;_r<Fr;_r++)(Br=xm(_n,Hn[_r]*fr,_r<Fr-1?Hn[_r+1]*fr:_n.length,fr,!1))===Br.next&&(Br.steiner=!0),$r.push(K0(Br));for($r.sort(bg),_r=0;_r<$r.length;_r++)xg($r[_r],Ln),Ln=cp(Ln,Ln.next);return Ln}(u,d,Tt,g)),u.length>80*g){A=F=u[0],P=j=u[1];for(var vn=g;vn<ot;vn+=g)(q=u[vn])<A&&(A=q),(_e=u[vn+1])<P&&(P=_e),q>F&&(F=q),_e>j&&(j=_e);Ne=(Ne=Math.max(F-A,j-P))!==0?1/Ne:0}return Pv(Tt,Bt,g,A,P,Ne),Bt}function xm(u,d,g,A,P){var F,j;if(P===Nd(u,d,g,A)>0)for(F=d;F<g;F+=A)j=Ld(F,u[F],u[F+1],j);else for(F=g-A;F>=d;F-=A)j=Ld(F,u[F],u[F+1],j);return j&&Th(j,j.next)&&(ed(j),j=j.next),j}function cp(u,d){if(!u)return u;d||(d=u);var g,A=u;do if(g=!1,A.steiner||!Th(A,A.next)&&kl(A.prev,A,A.next)!==0)A=A.next;else{if(ed(A),(A=d=A.prev)===A.next)break;g=!0}while(g||A!==d);return d}function Pv(u,d,g,A,P,F,j){if(u){!j&&F&&function(Ze,ot,Tt,Bt){var vn=Ze;do vn.z===null&&(vn.z=Gp(vn.x,vn.y,ot,Tt,Bt)),vn.prevZ=vn.prev,vn.nextZ=vn.next,vn=vn.next;while(vn!==Ze);vn.prevZ.nextZ=null,vn.prevZ=null,function(_n){var Hn,Ln,fr,_r,Fr,Br,$r,Ni,eo=1;do{for(Ln=_n,_n=null,Fr=null,Br=0;Ln;){for(Br++,fr=Ln,$r=0,Hn=0;Hn<eo&&($r++,fr=fr.nextZ);Hn++);for(Ni=eo;$r>0||Ni>0&&fr;)$r!==0&&(Ni===0||!fr||Ln.z<=fr.z)?(_r=Ln,Ln=Ln.nextZ,$r--):(_r=fr,fr=fr.nextZ,Ni--),Fr?Fr.nextZ=_r:_n=_r,_r.prevZ=Fr,Fr=_r;Ln=fr}Fr.nextZ=null,eo*=2}while(Br>1)}(vn)}(u,A,P,F);for(var q,_e,Ne=u;u.prev!==u.next;)if(q=u.prev,_e=u.next,F?gg(u,A,P,F):Cy(u))d.push(q.i/g),d.push(u.i/g),d.push(_e.i/g),ed(u),u=_e.next,Ne=_e.next;else if((u=_e)===Ne){j?j===1?Pv(u=yg(cp(u),d,g),d,g,A,P,F,2):j===2&&_g(u,d,g,A,P,F):Pv(cp(u),d,g,A,P,F,1);break}}}function Cy(u){var d=u.prev,g=u,A=u.next;if(kl(d,g,A)>=0)return!1;for(var P=u.next.next;P!==u.prev;){if(Dd(d.x,d.y,g.x,g.y,A.x,A.y,P.x,P.y)&&kl(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function gg(u,d,g,A){var P=u.prev,F=u,j=u.next;if(kl(P,F,j)>=0)return!1;for(var q=P.x>F.x?P.x>j.x?P.x:j.x:F.x>j.x?F.x:j.x,_e=P.y>F.y?P.y>j.y?P.y:j.y:F.y>j.y?F.y:j.y,Ne=Gp(P.x<F.x?P.x<j.x?P.x:j.x:F.x<j.x?F.x:j.x,P.y<F.y?P.y<j.y?P.y:j.y:F.y<j.y?F.y:j.y,d,g,A),Ze=Gp(q,_e,d,g,A),ot=u.prevZ,Tt=u.nextZ;ot&&ot.z>=Ne&&Tt&&Tt.z<=Ze;){if(ot!==u.prev&&ot!==u.next&&Dd(P.x,P.y,F.x,F.y,j.x,j.y,ot.x,ot.y)&&kl(ot.prev,ot,ot.next)>=0||(ot=ot.prevZ,Tt!==u.prev&&Tt!==u.next&&Dd(P.x,P.y,F.x,F.y,j.x,j.y,Tt.x,Tt.y)&&kl(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;ot&&ot.z>=Ne;){if(ot!==u.prev&&ot!==u.next&&Dd(P.x,P.y,F.x,F.y,j.x,j.y,ot.x,ot.y)&&kl(ot.prev,ot,ot.next)>=0)return!1;ot=ot.prevZ}for(;Tt&&Tt.z<=Ze;){if(Tt!==u.prev&&Tt!==u.next&&Dd(P.x,P.y,F.x,F.y,j.x,j.y,Tt.x,Tt.y)&&kl(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function yg(u,d,g){var A=u;do{var P=A.prev,F=A.next.next;!Th(P,F)&&Q0(P,A,A.next,F)&&Jh(P,F)&&Jh(F,P)&&(d.push(P.i/g),d.push(A.i/g),d.push(F.i/g),ed(A),ed(A.next),A=u=F),A=A.next}while(A!==u);return cp(A)}function _g(u,d,g,A,P,F){var j=u;do{for(var q=j.next.next;q!==j.prev;){if(j.i!==q.i&&Iv(j,q)){var _e=hp(j,q);return j=cp(j,j.next),_e=cp(_e,_e.next),Pv(j,d,g,A,P,F),void Pv(_e,d,g,A,P,F)}q=q.next}j=j.next}while(j!==u)}function bg(u,d){return u.x-d.x}function xg(u,d){if(d=function(A,P){var F,j=P,q=A.x,_e=A.y,Ne=-1/0;do{if(_e<=j.y&&_e>=j.next.y&&j.next.y!==j.y){var Ze=j.x+(_e-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(Ze<=q&&Ze>Ne){if(Ne=Ze,Ze===q){if(_e===j.y)return j;if(_e===j.next.y)return j.next}F=j.x<j.next.x?j:j.next}}j=j.next}while(j!==P);if(!F)return null;if(q===Ne)return F;var ot,Tt=F,Bt=F.x,vn=F.y,_n=1/0;j=F;do q>=j.x&&j.x>=Bt&&q!==j.x&&Dd(_e<vn?q:Ne,_e,Bt,vn,_e<vn?Ne:q,_e,j.x,j.y)&&(ot=Math.abs(_e-j.y)/(q-j.x),Jh(j,A)&&(ot<_n||ot===_n&&(j.x>F.x||j.x===F.x&&fp(F,j)))&&(F=j,_n=ot)),j=j.next;while(j!==Tt);return F}(u,d)){var g=hp(d,u);cp(d,d.next),cp(g,g.next)}}function fp(u,d){return kl(u.prev,u,d.prev)<0&&kl(d.next,u,u.next)<0}function Gp(u,d,g,A,P){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=32767*(u-g)*P)|u<<8))|u<<4))|u<<2))|u<<1))|(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-A)*P)|d<<8))|d<<4))|d<<2))|d<<1))<<1}function K0(u){var d=u,g=u;do(d.x<g.x||d.x===g.x&&d.y<g.y)&&(g=d),d=d.next;while(d!==u);return g}function Dd(u,d,g,A,P,F,j,q){return(P-j)*(d-q)-(u-j)*(F-q)>=0&&(u-j)*(A-q)-(g-j)*(d-q)>=0&&(g-j)*(F-q)-(P-j)*(A-q)>=0}function Iv(u,d){return u.next.i!==d.i&&u.prev.i!==d.i&&!function(g,A){var P=g;do{if(P.i!==g.i&&P.next.i!==g.i&&P.i!==A.i&&P.next.i!==A.i&&Q0(P,P.next,g,A))return!0;P=P.next}while(P!==g);return!1}(u,d)&&(Jh(u,d)&&Jh(d,u)&&function(g,A){var P=g,F=!1,j=(g.x+A.x)/2,q=(g.y+A.y)/2;do P.y>q!=P.next.y>q&&P.next.y!==P.y&&j<(P.next.x-P.x)*(q-P.y)/(P.next.y-P.y)+P.x&&(F=!F),P=P.next;while(P!==g);return F}(u,d)&&(kl(u.prev,u,d.prev)||kl(u,d.prev,d))||Th(u,d)&&kl(u.prev,u,u.next)>0&&kl(d.prev,d,d.next)>0)}function kl(u,d,g){return(d.y-u.y)*(g.x-d.x)-(d.x-u.x)*(g.y-d.y)}function Th(u,d){return u.x===d.x&&u.y===d.y}function Q0(u,d,g,A){var P=S0(kl(u,d,g)),F=S0(kl(u,d,A)),j=S0(kl(g,A,u)),q=S0(kl(g,A,d));return P!==F&&j!==q||!(P!==0||!E0(u,g,d))||!(F!==0||!E0(u,A,d))||!(j!==0||!E0(g,u,A))||!(q!==0||!E0(g,d,A))}function E0(u,d,g){return d.x<=Math.max(u.x,g.x)&&d.x>=Math.min(u.x,g.x)&&d.y<=Math.max(u.y,g.y)&&d.y>=Math.min(u.y,g.y)}function S0(u){return u>0?1:u<0?-1:0}function Jh(u,d){return kl(u.prev,u,u.next)<0?kl(u,d,u.next)>=0&&kl(u,u.prev,d)>=0:kl(u,d,u.prev)<0||kl(u,u.next,d)<0}function hp(u,d){var g=new td(u.i,u.x,u.y),A=new td(d.i,d.x,d.y),P=u.next,F=d.prev;return u.next=d,d.prev=u,g.next=P,P.prev=g,A.next=g,g.prev=A,F.next=A,A.prev=F,A}function Ld(u,d,g,A){var P=new td(u,d,g);return A?(P.next=A.next,P.prev=A,A.next.prev=P,A.next=P):(P.prev=P,P.next=P),P}function ed(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function td(u,d,g){this.i=u,this.x=d,this.y=g,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nd(u,d,g,A){for(var P=0,F=d,j=g-A;F<g;F+=A)P+=(u[j]-u[F])*(u[F+1]+u[j+1]),j=F;return P}function Oy(u,d,g,A,P){(function F(j,q,_e,Ne,Ze){for(;Ne>_e;){if(Ne-_e>600){var ot=Ne-_e+1,Tt=q-_e+1,Bt=Math.log(ot),vn=.5*Math.exp(2*Bt/3),_n=.5*Math.sqrt(Bt*vn*(ot-vn)/ot)*(Tt-ot/2<0?-1:1);F(j,q,Math.max(_e,Math.floor(q-Tt*vn/ot+_n)),Math.min(Ne,Math.floor(q+(ot-Tt)*vn/ot+_n)),Ze)}var Hn=j[q],Ln=_e,fr=Ne;for(dp(j,_e,q),Ze(j[Ne],Hn)>0&&dp(j,_e,Ne);Ln<fr;){for(dp(j,Ln,fr),Ln++,fr--;Ze(j[Ln],Hn)<0;)Ln++;for(;Ze(j[fr],Hn)>0;)fr--}Ze(j[_e],Hn)===0?dp(j,_e,fr):dp(j,++fr,Ne),fr<=q&&(_e=fr+1),q<=fr&&(Ne=fr-1)}})(u,d,g||0,A||u.length-1,P||pp)}function dp(u,d,g){var A=u[d];u[d]=u[g],u[g]=A}function pp(u,d){return u<d?-1:u>d?1:0}function Dv(u,d){var g=u.length;if(g<=1)return[u];for(var A,P,F=[],j=0;j<g;j++){var q=tn(u[j]);q!==0&&(u[j].area=Math.abs(q),P===void 0&&(P=q<0),P===q<0?(A&&F.push(A),A=[u[j]]):A.push(u[j]))}if(A&&F.push(A),d>1)for(var _e=0;_e<F.length;_e++)F[_e].length<=d||(Oy(F[_e],d,1,F[_e].length-1,Pf),F[_e]=F[_e].slice(0,d));return F}function Pf(u,d){return d.area-u.area}function w0(u,d,g){for(var A=g.patternDependencies,P=!1,F=0,j=d;F<j.length;F+=1){var q=j[F].paint.get(u+"-pattern");q.isConstant()||(P=!0);var _e=q.constantOr(null);_e&&(P=!0,A[_e.to]=!0,A[_e.from]=!0)}return P}function Lv(u,d,g,A,P){for(var F=P.patternDependencies,j=0,q=d;j<q.length;j+=1){var _e=q[j],Ne=_e.paint.get(u+"-pattern").value;if(Ne.kind!=="constant"){var Ze=Ne.evaluate({zoom:A-1},g,{},P.availableImages),ot=Ne.evaluate({zoom:A},g,{},P.availableImages),Tt=Ne.evaluate({zoom:A+1},g,{},P.availableImages);ot=ot&&ot.name?ot.name:ot,Tt=Tt&&Tt.name?Tt.name:Tt,F[Ze=Ze&&Ze.name?Ze.name:Ze]=!0,F[ot]=!0,F[Tt]=!0,g.patterns[_e.id]={min:Ze,mid:ot,max:Tt}}}return g}x0.deviation=function(u,d,g,A){var P=d&&d.length,F=Math.abs(Nd(u,0,P?d[0]*g:u.length,g));if(P)for(var j=0,q=d.length;j<q;j++)F-=Math.abs(Nd(u,d[j]*g,j<q-1?d[j+1]*g:u.length,g));var _e=0;for(j=0;j<A.length;j+=3){var Ne=A[j]*g,Ze=A[j+1]*g,ot=A[j+2]*g;_e+=Math.abs((u[Ne]-u[ot])*(u[Ze+1]-u[Ne+1])-(u[Ne]-u[Ze])*(u[ot+1]-u[Ne+1]))}return F===0&&_e===0?0:Math.abs((_e-F)/F)},x0.flatten=function(u){for(var d=u[0][0].length,g={vertices:[],holes:[],dimensions:d},A=0,P=0;P<u.length;P++){for(var F=0;F<u[P].length;F++)for(var j=0;j<d;j++)g.vertices.push(u[P][F][j]);P>0&&g.holes.push(A+=u[P-1].length)}return g},Rv.default=Ay;var If=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Zh,this.indexArray=new Vf,this.indexArray2=new Gf,this.programConfigurations=new ko(u.layers,u.zoom),this.segments=new Vt,this.segments2=new Vt,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};If.prototype.populate=function(u,d,g){this.hasPattern=w0("fill",this.layers,d);for(var A=this.layers[0].layout.get("fill-sort-key"),P=[],F=0,j=u;F<j.length;F+=1){var q=j[F],_e=q.feature,Ne=q.id,Ze=q.index,ot=q.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Bt=vl(_e,Tt);if(this.layers[0]._featureFilter.filter(new Aa(this.zoom),Bt,g)){var vn=A?A.evaluate(Bt,{},g,d.availableImages):void 0,_n={id:Ne,properties:_e.properties,type:_e.type,sourceLayerIndex:ot,index:Ze,geometry:Tt?Bt.geometry:Ss(_e),patterns:{},sortKey:vn};P.push(_n)}}A&&P.sort(function(Ni,eo){return Ni.sortKey-eo.sortKey});for(var Hn=0,Ln=P;Hn<Ln.length;Hn+=1){var fr=Ln[Hn],_r=fr.geometry,Fr=fr.index,Br=fr.sourceLayerIndex;if(this.hasPattern){var $r=Lv("fill",this.layers,fr,this.zoom,d);this.patternFeatures.push($r)}else this.addFeature(fr,_r,Fr,g,{});d.featureIndex.insert(u[Fr].feature,_r,Fr,Br,this.index)}},If.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},If.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.patternFeatures;A<P.length;A+=1){var F=P[A];this.addFeature(F,F.geometry,F.index,d,g)}},If.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},If.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},If.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,mg),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0},If.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},If.prototype.addFeature=function(u,d,g,A,P){for(var F=0,j=Dv(d,500);F<j.length;F+=1){for(var q=j[F],_e=0,Ne=0,Ze=q;Ne<Ze.length;Ne+=1)_e+=Ze[Ne].length;for(var ot=this.segments.prepareSegment(_e,this.layoutVertexArray,this.indexArray),Tt=ot.vertexLength,Bt=[],vn=[],_n=0,Hn=q;_n<Hn.length;_n+=1){var Ln=Hn[_n];if(Ln.length!==0){Ln!==q[0]&&vn.push(Bt.length/2);var fr=this.segments2.prepareSegment(Ln.length,this.layoutVertexArray,this.indexArray2),_r=fr.vertexLength;this.layoutVertexArray.emplaceBack(Ln[0].x,Ln[0].y),this.indexArray2.emplaceBack(_r+Ln.length-1,_r),Bt.push(Ln[0].x),Bt.push(Ln[0].y);for(var Fr=1;Fr<Ln.length;Fr++)this.layoutVertexArray.emplaceBack(Ln[Fr].x,Ln[Fr].y),this.indexArray2.emplaceBack(_r+Fr-1,_r+Fr),Bt.push(Ln[Fr].x),Bt.push(Ln[Fr].y);fr.vertexLength+=Ln.length,fr.primitiveLength+=Ln.length}}for(var Br=Rv(Bt,vn),$r=0;$r<Br.length;$r+=3)this.indexArray.emplaceBack(Tt+Br[$r],Tt+Br[$r+1],Tt+Br[$r+2]);ot.vertexLength+=_e,ot.primitiveLength+=Br.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},oo("FillBucket",If,{omit:["layers","patternFeatures"]});var Wp=new cl({"fill-sort-key":new Ao(St.layout_fill["fill-sort-key"])}),Eg={paint:new cl({"fill-antialias":new Bo(St.paint_fill["fill-antialias"]),"fill-opacity":new Ao(St.paint_fill["fill-opacity"]),"fill-color":new Ao(St.paint_fill["fill-color"]),"fill-outline-color":new Ao(St.paint_fill["fill-outline-color"]),"fill-translate":new Bo(St.paint_fill["fill-translate"]),"fill-translate-anchor":new Bo(St.paint_fill["fill-translate-anchor"]),"fill-pattern":new Gl(St.paint_fill["fill-pattern"])}),layout:Wp},Sg=function(u){function d(g){u.call(this,g,Eg)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.recalculate=function(g,A){u.prototype.recalculate.call(this,g,A);var P=this.paint._values["fill-outline-color"];P.value.kind==="constant"&&P.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},d.prototype.createBucket=function(g){return new If(g)},d.prototype.queryRadius=function(){return Pl(this.paint.get("fill-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,q,_e){return df(Ju(g,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),q.angle,_e),F)},d.prototype.isTileClipped=function(){return!0},d}(Sc),Nv=gu([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Em=nd;function nd(u,d,g,A,P){this.properties={},this.extent=g,this.type=0,this._pbf=u,this._geometry=-1,this._keys=A,this._values=P,u.readFields(Zp,this,d)}function Zp(u,d,g){u==1?d.id=g.readVarint():u==2?function(A,P){for(var F=A.readVarint()+A.pos;A.pos<F;){var j=P._keys[A.readVarint()],q=P._values[A.readVarint()];P.properties[j]=q}}(g,d):u==3?d.type=g.readVarint():u==4&&(d._geometry=g.pos)}function rd(u){for(var d,g,A=0,P=0,F=u.length,j=F-1;P<F;j=P++)A+=((g=u[j]).x-(d=u[P]).x)*(d.y+g.y);return A}nd.types=["Unknown","Point","LineString","Polygon"],nd.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var d,g=u.readVarint()+u.pos,A=1,P=0,F=0,j=0,q=[];u.pos<g;){if(P<=0){var _e=u.readVarint();A=7&_e,P=_e>>3}if(P--,A===1||A===2)F+=u.readSVarint(),j+=u.readSVarint(),A===1&&(d&&q.push(d),d=[]),d.push(new ue(F,j));else{if(A!==7)throw new Error("unknown command "+A);d&&d.push(d[0].clone())}}return d&&q.push(d),q},nd.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var d=u.readVarint()+u.pos,g=1,A=0,P=0,F=0,j=1/0,q=-1/0,_e=1/0,Ne=-1/0;u.pos<d;){if(A<=0){var Ze=u.readVarint();g=7&Ze,A=Ze>>3}if(A--,g===1||g===2)(P+=u.readSVarint())<j&&(j=P),P>q&&(q=P),(F+=u.readSVarint())<_e&&(_e=F),F>Ne&&(Ne=F);else if(g!==7)throw new Error("unknown command "+g)}return[j,_e,q,Ne]},nd.prototype.toGeoJSON=function(u,d,g){var A,P,F=this.extent*Math.pow(2,g),j=this.extent*u,q=this.extent*d,_e=this.loadGeometry(),Ne=nd.types[this.type];function Ze(Bt){for(var vn=0;vn<Bt.length;vn++){var _n=Bt[vn];Bt[vn]=[360*(_n.x+j)/F-180,360/Math.PI*Math.atan(Math.exp((180-360*(_n.y+q)/F)*Math.PI/180))-90]}}switch(this.type){case 1:var ot=[];for(A=0;A<_e.length;A++)ot[A]=_e[A][0];Ze(_e=ot);break;case 2:for(A=0;A<_e.length;A++)Ze(_e[A]);break;case 3:for(_e=function(Bt){var vn=Bt.length;if(vn<=1)return[Bt];for(var _n,Hn,Ln=[],fr=0;fr<vn;fr++){var _r=rd(Bt[fr]);_r!==0&&(Hn===void 0&&(Hn=_r<0),Hn===_r<0?(_n&&Ln.push(_n),_n=[Bt[fr]]):_n.push(Bt[fr]))}return _n&&Ln.push(_n),Ln}(_e),A=0;A<_e.length;A++)for(P=0;P<_e[A].length;P++)Ze(_e[A][P])}_e.length===1?_e=_e[0]:Ne="Multi"+Ne;var Tt={type:"Feature",geometry:{type:Ne,coordinates:_e},properties:this.properties};return"id"in this&&(Tt.id=this.id),Tt};var wg=vp;function vp(u,d){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(Fd,this,d),this.length=this._features.length}function Fd(u,d,g){u===15?d.version=g.readVarint():u===1?d.name=g.readString():u===5?d.extent=g.readVarint():u===2?d._features.push(g.pos):u===3?d._keys.push(g.readString()):u===4&&d._values.push(function(A){for(var P=null,F=A.readVarint()+A.pos;A.pos<F;){var j=A.readVarint()>>3;P=j===1?A.readString():j===2?A.readFloat():j===3?A.readDouble():j===4?A.readVarint64():j===5?A.readVarint():j===6?A.readSVarint():j===7?A.readBoolean():null}return P}(g))}function mp(u,d,g){if(u===3){var A=new wg(g,g.readVarint()+g.pos);A.length&&(d[A.name]=A)}}vp.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var d=this._pbf.readVarint()+this._pbf.pos;return new Em(this._pbf,d,this.extent,this._keys,this._values)};var pf={VectorTile:function(u,d){this.layers=u.readFields(mp,{},d)},VectorTileFeature:Em,VectorTileLayer:wg},J0=pf.VectorTileFeature.types,ev=Math.pow(2,13);function Uu(u,d,g,A,P,F,j,q){u.emplaceBack(d,g,2*Math.floor(A*ev)+j,P*ev*2,F*ev*2,Math.round(q))}var ec=function(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Eh,this.indexArray=new Vf,this.programConfigurations=new ko(u.layers,u.zoom),this.segments=new Vt,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};function lu(u,d){return u.x===d.x&&(u.x<0||u.x>8192)||u.y===d.y&&(u.y<0||u.y>8192)}ec.prototype.populate=function(u,d,g){this.features=[],this.hasPattern=w0("fill-extrusion",this.layers,d);for(var A=0,P=u;A<P.length;A+=1){var F=P[A],j=F.feature,q=F.id,_e=F.index,Ne=F.sourceLayerIndex,Ze=this.layers[0]._featureFilter.needGeometry,ot=vl(j,Ze);if(this.layers[0]._featureFilter.filter(new Aa(this.zoom),ot,g)){var Tt={id:q,sourceLayerIndex:Ne,index:_e,geometry:Ze?ot.geometry:Ss(j),properties:j.properties,type:j.type,patterns:{}};this.hasPattern?this.features.push(Lv("fill-extrusion",this.layers,Tt,this.zoom,d)):this.addFeature(Tt,Tt.geometry,_e,g,{}),d.featureIndex.insert(j,Tt.geometry,_e,Ne,this.index,!0)}}},ec.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.features;A<P.length;A+=1){var F=P[A];this.addFeature(F,F.geometry,F.index,d,g)}},ec.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},ec.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ec.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ec.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Nv),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},ec.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ec.prototype.addFeature=function(u,d,g,A,P){for(var F=0,j=Dv(d,500);F<j.length;F+=1){for(var q=j[F],_e=0,Ne=0,Ze=q;Ne<Ze.length;Ne+=1)_e+=Ze[Ne].length;for(var ot=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Tt=0,Bt=q;Tt<Bt.length;Tt+=1){var vn=Bt[Tt];if(vn.length!==0&&!((Ka=vn).every(function(Ho){return Ho.x<0})||Ka.every(function(Ho){return Ho.x>8192})||Ka.every(function(Ho){return Ho.y<0})||Ka.every(function(Ho){return Ho.y>8192})))for(var _n=0,Hn=0;Hn<vn.length;Hn++){var Ln=vn[Hn];if(Hn>=1){var fr=vn[Hn-1];if(!lu(Ln,fr)){ot.vertexLength+4>Vt.MAX_VERTEX_ARRAY_LENGTH&&(ot=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _r=Ln.sub(fr)._perp()._unit(),Fr=fr.dist(Ln);_n+Fr>32768&&(_n=0),Uu(this.layoutVertexArray,Ln.x,Ln.y,_r.x,_r.y,0,0,_n),Uu(this.layoutVertexArray,Ln.x,Ln.y,_r.x,_r.y,0,1,_n),Uu(this.layoutVertexArray,fr.x,fr.y,_r.x,_r.y,0,0,_n+=Fr),Uu(this.layoutVertexArray,fr.x,fr.y,_r.x,_r.y,0,1,_n);var Br=ot.vertexLength;this.indexArray.emplaceBack(Br,Br+2,Br+1),this.indexArray.emplaceBack(Br+1,Br+2,Br+3),ot.vertexLength+=4,ot.primitiveLength+=2}}}}if(ot.vertexLength+_e>Vt.MAX_VERTEX_ARRAY_LENGTH&&(ot=this.segments.prepareSegment(_e,this.layoutVertexArray,this.indexArray)),J0[u.type]==="Polygon"){for(var $r=[],Ni=[],eo=ot.vertexLength,zo=0,go=q;zo<go.length;zo+=1){var $o=go[zo];if($o.length!==0){$o!==q[0]&&Ni.push($r.length/2);for(var yo=0;yo<$o.length;yo++){var Ga=$o[yo];Uu(this.layoutVertexArray,Ga.x,Ga.y,0,0,1,1,0),$r.push(Ga.x),$r.push(Ga.y)}}}for(var ua=Rv($r,Ni),Ro=0;Ro<ua.length;Ro+=3)this.indexArray.emplaceBack(eo+ua[Ro],eo+ua[Ro+2],eo+ua[Ro+1]);ot.primitiveLength+=ua.length/3,ot.vertexLength+=_e}}var Ka;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},oo("FillExtrusionBucket",ec,{omit:["layers","features"]});var Zf={paint:new cl({"fill-extrusion-opacity":new Bo(St["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ao(St["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Bo(St["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Bo(St["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Gl(St["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ao(St["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ao(St["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Bo(St["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},My=function(u){function d(g){u.call(this,g,Zf)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.createBucket=function(g){return new ec(g)},d.prototype.queryRadius=function(){return Pl(this.paint.get("fill-extrusion-translate"))},d.prototype.is3D=function(){return!0},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,q,_e,Ne){var Ze=Ju(g,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),q.angle,_e),ot=this.paint.get("fill-extrusion-height").evaluate(A,P),Tt=this.paint.get("fill-extrusion-base").evaluate(A,P),Bt=function(_n,Hn,Ln,fr){for(var _r=[],Fr=0,Br=_n;Fr<Br.length;Fr+=1){var $r=Br[Fr],Ni=[$r.x,$r.y,0,1];Pd(Ni,Ni,Hn),_r.push(new ue(Ni[0]/Ni[3],Ni[1]/Ni[3]))}return _r}(Ze,Ne),vn=function(_n,Hn,Ln,fr){for(var _r=[],Fr=[],Br=fr[8]*Hn,$r=fr[9]*Hn,Ni=fr[10]*Hn,eo=fr[11]*Hn,zo=fr[8]*Ln,go=fr[9]*Ln,$o=fr[10]*Ln,yo=fr[11]*Ln,Ga=0,ua=_n;Ga<ua.length;Ga+=1){for(var Ro=[],Ka=[],Ho=0,is=ua[Ga];Ho<is.length;Ho+=1){var Uo=is[Ho],Ms=Uo.x,nl=Uo.y,Yl=fr[0]*Ms+fr[4]*nl+fr[12],Ll=fr[1]*Ms+fr[5]*nl+fr[13],El=fr[2]*Ms+fr[6]*nl+fr[14],$l=fr[3]*Ms+fr[7]*nl+fr[15],ql=El+Ni,_u=$l+eo,Gc=Yl+zo,Vu=Ll+go,Wc=El+$o,zl=$l+yo,rc=new ue((Yl+Br)/_u,(Ll+$r)/_u);rc.z=ql/_u,Ro.push(rc);var ns=new ue(Gc/zl,Vu/zl);ns.z=Wc/zl,Ka.push(ns)}_r.push(Ro),Fr.push(Ka)}return[_r,Fr]}(F,Tt,ot,Ne);return function(_n,Hn,Ln){var fr=1/0;df(Ln,Hn)&&(fr=tv(Ln,Hn[0]));for(var _r=0;_r<Hn.length;_r++)for(var Fr=Hn[_r],Br=_n[_r],$r=0;$r<Fr.length-1;$r++){var Ni=Fr[$r],eo=[Ni,Fr[$r+1],Br[$r+1],Br[$r],Ni];Wf(Ln,eo)&&(fr=Math.min(fr,tv(Ln,eo)))}return fr!==1/0&&fr}(vn[0],vn[1],Bt)},d}(Sc);function el(u,d){return u.x*d.x+u.y*d.y}function tv(u,d){if(u.length===1){for(var g,A=0,P=d[A++];!g||P.equals(g);)if(!(g=d[A++]))return 1/0;for(;A<d.length;A++){var F=d[A],j=u[0],q=g.sub(P),_e=F.sub(P),Ne=j.sub(P),Ze=el(q,q),ot=el(q,_e),Tt=el(_e,_e),Bt=el(Ne,q),vn=el(Ne,_e),_n=Ze*Tt-ot*ot,Hn=(Tt*Bt-ot*vn)/_n,Ln=(Ze*vn-ot*Bt)/_n,fr=P.z*(1-Hn-Ln)+g.z*Hn+F.z*Ln;if(isFinite(fr))return fr}return 1/0}for(var _r=1/0,Fr=0,Br=d;Fr<Br.length;Fr+=1)_r=Math.min(_r,Br[Fr].z);return _r}var nv=gu([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ry=gu([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Fv=pf.VectorTileFeature.types,Sm=Math.cos(Math.PI/180*37.5),wm=Math.pow(2,14)/.5,Ac=function(u){var d=this;this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(g){return g.id}),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(g){d.gradients[g.id]={}}),this.layoutVertexArray=new Qu,this.layoutVertexArray2=new ap,this.indexArray=new Vf,this.programConfigurations=new ko(u.layers,u.zoom),this.segments=new Vt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(g){return g.isStateDependent()}).map(function(g){return g.id})};Ac.prototype.populate=function(u,d,g){this.hasPattern=w0("line",this.layers,d);for(var A=this.layers[0].layout.get("line-sort-key"),P=[],F=0,j=u;F<j.length;F+=1){var q=j[F],_e=q.feature,Ne=q.id,Ze=q.index,ot=q.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Bt=vl(_e,Tt);if(this.layers[0]._featureFilter.filter(new Aa(this.zoom),Bt,g)){var vn=A?A.evaluate(Bt,{},g):void 0,_n={id:Ne,properties:_e.properties,type:_e.type,sourceLayerIndex:ot,index:Ze,geometry:Tt?Bt.geometry:Ss(_e),patterns:{},sortKey:vn};P.push(_n)}}A&&P.sort(function(Ni,eo){return Ni.sortKey-eo.sortKey});for(var Hn=0,Ln=P;Hn<Ln.length;Hn+=1){var fr=Ln[Hn],_r=fr.geometry,Fr=fr.index,Br=fr.sourceLayerIndex;if(this.hasPattern){var $r=Lv("line",this.layers,fr,this.zoom,d);this.patternFeatures.push($r)}else this.addFeature(fr,_r,Fr,g,{});d.featureIndex.insert(u[Fr].feature,_r,Fr,Br,this.index)}},Ac.prototype.update=function(u,d,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,g)},Ac.prototype.addFeatures=function(u,d,g){for(var A=0,P=this.patternFeatures;A<P.length;A+=1){var F=P[A];this.addFeature(F,F.geometry,F.index,d,g)}},Ac.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ac.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ac.prototype.upload=function(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,Ry)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,nv),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0},Ac.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ac.prototype.lineFeatureClips=function(u){if(u.properties&&u.properties.hasOwnProperty("mapbox_clip_start")&&u.properties.hasOwnProperty("mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}},Ac.prototype.addFeature=function(u,d,g,A,P){var F=this.layers[0].layout,j=F.get("line-join").evaluate(u,{}),q=F.get("line-cap"),_e=F.get("line-miter-limit"),Ne=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(var Ze=0,ot=d;Ze<ot.length;Ze+=1)this.addLine(ot[Ze],u,j,q,_e,Ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,g,P,A)},Ac.prototype.addLine=function(u,d,g,A,P,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var j=0;j<u.length-1;j++)this.totalDistance+=u[j].dist(u[j+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var q=Fv[d.type]==="Polygon",_e=u.length;_e>=2&&u[_e-1].equals(u[_e-2]);)_e--;for(var Ne=0;Ne<_e-1&&u[Ne].equals(u[Ne+1]);)Ne++;if(!(_e<(q?3:2))){g==="bevel"&&(P=1.05);var Ze,ot=this.overscaling<=16?122880/(512*this.overscaling):0,Tt=this.segments.prepareSegment(10*_e,this.layoutVertexArray,this.indexArray),Bt=void 0,vn=void 0,_n=void 0,Hn=void 0;this.e1=this.e2=-1,q&&(Hn=u[Ne].sub(Ze=u[_e-2])._unit()._perp());for(var Ln=Ne;Ln<_e;Ln++)if(!(vn=Ln===_e-1?q?u[Ne+1]:void 0:u[Ln+1])||!u[Ln].equals(vn)){Hn&&(_n=Hn),Ze&&(Bt=Ze),Ze=u[Ln],Hn=vn?vn.sub(Ze)._unit()._perp():_n;var fr=(_n=_n||Hn).add(Hn);fr.x===0&&fr.y===0||fr._unit();var _r=_n.x*Hn.x+_n.y*Hn.y,Fr=fr.x*Hn.x+fr.y*Hn.y,Br=Fr!==0?1/Fr:1/0,$r=2*Math.sqrt(2-2*Fr),Ni=Fr<Sm&&Bt&&vn,eo=_n.x*Hn.y-_n.y*Hn.x>0;if(Ni&&Ln>Ne){var zo=Ze.dist(Bt);if(zo>2*ot){var go=Ze.sub(Ze.sub(Bt)._mult(ot/zo)._round());this.updateDistance(Bt,go),this.addCurrentVertex(go,_n,0,0,Tt),Bt=go}}var $o=Bt&&vn,yo=$o?g:q?"butt":A;if($o&&yo==="round"&&(Br<F?yo="miter":Br<=2&&(yo="fakeround")),yo==="miter"&&Br>P&&(yo="bevel"),yo==="bevel"&&(Br>2&&(yo="flipbevel"),Br<P&&(yo="miter")),Bt&&this.updateDistance(Bt,Ze),yo==="miter")fr._mult(Br),this.addCurrentVertex(Ze,fr,0,0,Tt);else if(yo==="flipbevel"){if(Br>100)fr=Hn.mult(-1);else{var Ga=Br*_n.add(Hn).mag()/_n.sub(Hn).mag();fr._perp()._mult(Ga*(eo?-1:1))}this.addCurrentVertex(Ze,fr,0,0,Tt),this.addCurrentVertex(Ze,fr.mult(-1),0,0,Tt)}else if(yo==="bevel"||yo==="fakeround"){var ua=-Math.sqrt(Br*Br-1),Ro=eo?ua:0,Ka=eo?0:ua;if(Bt&&this.addCurrentVertex(Ze,_n,Ro,Ka,Tt),yo==="fakeround")for(var Ho=Math.round(180*$r/Math.PI/20),is=1;is<Ho;is++){var Uo=is/Ho;if(Uo!==.5){var Ms=Uo-.5;Uo+=Uo*Ms*(Uo-1)*((1.0904+_r*(_r*(3.55645-1.43519*_r)-3.2452))*Ms*Ms+(.848013+_r*(.215638*_r-1.06021)))}var nl=Hn.sub(_n)._mult(Uo)._add(_n)._unit()._mult(eo?-1:1);this.addHalfVertex(Ze,nl.x,nl.y,!1,eo,0,Tt)}vn&&this.addCurrentVertex(Ze,Hn,-Ro,-Ka,Tt)}else if(yo==="butt")this.addCurrentVertex(Ze,fr,0,0,Tt);else if(yo==="square"){var Yl=Bt?1:-1;this.addCurrentVertex(Ze,fr,Yl,Yl,Tt)}else yo==="round"&&(Bt&&(this.addCurrentVertex(Ze,_n,0,0,Tt),this.addCurrentVertex(Ze,_n,1,1,Tt,!0)),vn&&(this.addCurrentVertex(Ze,Hn,-1,-1,Tt,!0),this.addCurrentVertex(Ze,Hn,0,0,Tt)));if(Ni&&Ln<_e-1){var Ll=Ze.dist(vn);if(Ll>2*ot){var El=Ze.add(vn.sub(Ze)._mult(ot/Ll)._round());this.updateDistance(Ze,El),this.addCurrentVertex(El,Hn,0,0,Tt),Ze=El}}}}},Ac.prototype.addCurrentVertex=function(u,d,g,A,P,F){F===void 0&&(F=!1);var j=d.y*A-d.x,q=-d.y-d.x*A;this.addHalfVertex(u,d.x+d.y*g,d.y-d.x*g,F,!1,g,P),this.addHalfVertex(u,j,q,F,!0,-A,P),this.distance>wm/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(u,d,g,A,P,F))},Ac.prototype.addHalfVertex=function(u,d,g,A,P,F,j){var q=.5*(this.lineClips?this.scaledDistance*(wm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u.x<<1)+(A?1:0),(u.y<<1)+(P?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(F===0?0:F<0?-1:1)|(63&q)<<2,q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var _e=j.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,_e),j.primitiveLength++),P?this.e2=_e:this.e1=_e},Ac.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ac.prototype.updateDistance=function(u,d){this.distance+=u.dist(d),this.updateScaledDistance()},oo("LineBucket",Ac,{omit:["layers","patternFeatures"]});var Py=new cl({"line-cap":new Bo(St.layout_line["line-cap"]),"line-join":new Ao(St.layout_line["line-join"]),"line-miter-limit":new Bo(St.layout_line["line-miter-limit"]),"line-round-limit":new Bo(St.layout_line["line-round-limit"]),"line-sort-key":new Ao(St.layout_line["line-sort-key"])}),T0={paint:new cl({"line-opacity":new Ao(St.paint_line["line-opacity"]),"line-color":new Ao(St.paint_line["line-color"]),"line-translate":new Bo(St.paint_line["line-translate"]),"line-translate-anchor":new Bo(St.paint_line["line-translate-anchor"]),"line-width":new Ao(St.paint_line["line-width"]),"line-gap-width":new Ao(St.paint_line["line-gap-width"]),"line-offset":new Ao(St.paint_line["line-offset"]),"line-blur":new Ao(St.paint_line["line-blur"]),"line-dasharray":new qu(St.paint_line["line-dasharray"]),"line-pattern":new Gl(St.paint_line["line-pattern"]),"line-gradient":new Ku(St.paint_line["line-gradient"])}),layout:Py},Tm=new(function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.possiblyEvaluate=function(g,A){return A=new Aa(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),u.prototype.possiblyEvaluate.call(this,g,A)},d.prototype.evaluate=function(g,A,P,F){return A=le({},A,{zoom:Math.floor(A.zoom)}),u.prototype.evaluate.call(this,g,A,P,F)},d}(Ao))(T0.paint.properties["line-width"].specification);Tm.useIntegerZoom=!0;var Bv=function(u){function d(g){u.call(this,g,T0),this.gradientVersion=0}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype._handleSpecialPaintPropertyUpdate=function(g){g==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Tu,this.gradientVersion=(this.gradientVersion+1)%Ge)},d.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},d.prototype.recalculate=function(g,A){u.prototype.recalculate.call(this,g,A),this.paint._values["line-floorwidth"]=Tm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,g)},d.prototype.createBucket=function(g){return new Ac(g)},d.prototype.queryRadius=function(g){var A=g,P=Am(Rl("line-width",this,A),Rl("line-gap-width",this,A)),F=Rl("line-offset",this,A);return P/2+Math.abs(F)+Pl(this.paint.get("line-translate"))},d.prototype.queryIntersectsFeature=function(g,A,P,F,j,q,_e){var Ne=Ju(g,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),q.angle,_e),Ze=_e/2*Am(this.paint.get("line-width").evaluate(A,P),this.paint.get("line-gap-width").evaluate(A,P)),ot=this.paint.get("line-offset").evaluate(A,P);return ot&&(F=function(Tt,Bt){for(var vn=[],_n=new ue(0,0),Hn=0;Hn<Tt.length;Hn++){for(var Ln=Tt[Hn],fr=[],_r=0;_r<Ln.length;_r++){var Fr=Ln[_r],Br=Ln[_r+1],$r=_r===0?_n:Fr.sub(Ln[_r-1])._unit()._perp(),Ni=_r===Ln.length-1?_n:Br.sub(Fr)._unit()._perp(),eo=$r._add(Ni)._unit();eo._mult(1/(eo.x*Ni.x+eo.y*Ni.y)),fr.push(eo._mult(Bt)._add(Fr))}vn.push(fr)}return vn}(F,ot*_e)),function(Tt,Bt,vn){for(var _n=0;_n<Bt.length;_n++){var Hn=Bt[_n];if(Tt.length>=3){for(var Ln=0;Ln<Hn.length;Ln++)if(ih(Tt,Hn[Ln]))return!0}if(Vc(Tt,Hn,vn))return!0}return!1}(Ne,F,Ze)},d.prototype.isTileClipped=function(){return!0},d}(Sc);function Am(u,d){return d>0?d+2*u:u}var Cm=gu([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Iy=gu([{name:"a_projected_pos",components:3,type:"Float32"}],4),rv=(gu([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),gu([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Cc=(gu([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),gu([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ke=gu([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Yt(u,d,g){return u.sections.forEach(function(A){A.text=function(P,F,j){var q=F.layout.get("text-transform").evaluate(j,{});return q==="uppercase"?P=P.toLocaleUpperCase():q==="lowercase"&&(P=P.toLocaleLowerCase()),Uc.applyArabicShaping&&(P=Uc.applyArabicShaping(P)),P}(A.text,d,g)}),u}gu([{name:"triangle",components:3,type:"Uint16"}]),gu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gu([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),gu([{type:"Float32",name:"offsetX"}]),gu([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Mn={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Rr=function(u,d,g,A,P){var F,j,q=8*P-A-1,_e=(1<<q)-1,Ne=_e>>1,Ze=-7,ot=g?P-1:0,Tt=g?-1:1,Bt=u[d+ot];for(ot+=Tt,F=Bt&(1<<-Ze)-1,Bt>>=-Ze,Ze+=q;Ze>0;F=256*F+u[d+ot],ot+=Tt,Ze-=8);for(j=F&(1<<-Ze)-1,F>>=-Ze,Ze+=A;Ze>0;j=256*j+u[d+ot],ot+=Tt,Ze-=8);if(F===0)F=1-Ne;else{if(F===_e)return j?NaN:1/0*(Bt?-1:1);j+=Math.pow(2,A),F-=Ne}return(Bt?-1:1)*j*Math.pow(2,F-A)},Kr=function(u,d,g,A,P,F){var j,q,_e,Ne=8*F-P-1,Ze=(1<<Ne)-1,ot=Ze>>1,Tt=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,Bt=A?0:F-1,vn=A?1:-1,_n=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(q=isNaN(d)?1:0,j=Ze):(j=Math.floor(Math.log(d)/Math.LN2),d*(_e=Math.pow(2,-j))<1&&(j--,_e*=2),(d+=j+ot>=1?Tt/_e:Tt*Math.pow(2,1-ot))*_e>=2&&(j++,_e/=2),j+ot>=Ze?(q=0,j=Ze):j+ot>=1?(q=(d*_e-1)*Math.pow(2,P),j+=ot):(q=d*Math.pow(2,ot-1)*Math.pow(2,P),j=0));P>=8;u[g+Bt]=255&q,Bt+=vn,q/=256,P-=8);for(j=j<<P|q,Ne+=P;Ne>0;u[g+Bt]=255&j,Bt+=vn,j/=256,Ne-=8);u[g+Bt-vn]|=128*_n},Pr=yr;function yr(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}yr.Varint=0,yr.Fixed64=1,yr.Bytes=2,yr.Fixed32=5;var Di=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function vi(u){return u.type===yr.Bytes?u.readVarint()+u.pos:u.pos+1}function Hi(u,d,g){return g?4294967296*d+(u>>>0):4294967296*(d>>>0)+(u>>>0)}function Li(u,d,g){var A=d<=16383?1:d<=2097151?2:d<=268435455?3:Math.floor(Math.log(d)/(7*Math.LN2));g.realloc(A);for(var P=g.pos-1;P>=u;P--)g.buf[P+A]=g.buf[P]}function ki(u,d){for(var g=0;g<u.length;g++)d.writeVarint(u[g])}function Gi(u,d){for(var g=0;g<u.length;g++)d.writeSVarint(u[g])}function Ei(u,d){for(var g=0;g<u.length;g++)d.writeFloat(u[g])}function Wi(u,d){for(var g=0;g<u.length;g++)d.writeDouble(u[g])}function dr(u,d){for(var g=0;g<u.length;g++)d.writeBoolean(u[g])}function jr(u,d){for(var g=0;g<u.length;g++)d.writeFixed32(u[g])}function Si(u,d){for(var g=0;g<u.length;g++)d.writeSFixed32(u[g])}function fo(u,d){for(var g=0;g<u.length;g++)d.writeFixed64(u[g])}function ui(u,d){for(var g=0;g<u.length;g++)d.writeSFixed64(u[g])}function ao(u,d){return(u[d]|u[d+1]<<8|u[d+2]<<16)+16777216*u[d+3]}function Ti(u,d,g){u[g]=d,u[g+1]=d>>>8,u[g+2]=d>>>16,u[g+3]=d>>>24}function ro(u,d){return(u[d]|u[d+1]<<8|u[d+2]<<16)+(u[d+3]<<24)}function ci(u,d,g){u===1&&g.readMessage(_i,d)}function _i(u,d,g){if(u===3){var A=g.readMessage(No,{}),P=A.width,F=A.height,j=A.left,q=A.top,_e=A.advance;d.push({id:A.id,bitmap:new Qh({width:P+6,height:F+6},A.bitmap),metrics:{width:P,height:F,left:j,top:q,advance:_e}})}}function No(u,d,g){u===1?d.id=g.readVarint():u===2?d.bitmap=g.readBytes():u===3?d.width=g.readVarint():u===4?d.height=g.readVarint():u===5?d.left=g.readSVarint():u===6?d.top=g.readSVarint():u===7&&(d.advance=g.readVarint())}function ha(u){for(var d=0,g=0,A=0,P=u;A<P.length;A+=1){var F=P[A];d+=F.w*F.h,g=Math.max(g,F.w)}u.sort(function(_n,Hn){return Hn.h-_n.h});for(var j=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),g),h:1/0}],q=0,_e=0,Ne=0,Ze=u;Ne<Ze.length;Ne+=1)for(var ot=Ze[Ne],Tt=j.length-1;Tt>=0;Tt--){var Bt=j[Tt];if(!(ot.w>Bt.w||ot.h>Bt.h)){if(ot.x=Bt.x,ot.y=Bt.y,_e=Math.max(_e,ot.y+ot.h),q=Math.max(q,ot.x+ot.w),ot.w===Bt.w&&ot.h===Bt.h){var vn=j.pop();Tt<j.length&&(j[Tt]=vn)}else ot.h===Bt.h?(Bt.x+=ot.w,Bt.w-=ot.w):ot.w===Bt.w?(Bt.y+=ot.h,Bt.h-=ot.h):(j.push({x:Bt.x+ot.w,y:Bt.y,w:Bt.w-ot.w,h:ot.h}),Bt.y+=ot.h,Bt.h-=ot.h);break}}return{w:q,h:_e,fill:d/(q*_e)||0}}yr.prototype={destroy:function(){this.buf=null},readFields:function(u,d,g){for(g=g||this.length;this.pos<g;){var A=this.readVarint(),P=A>>3,F=this.pos;this.type=7&A,u(P,d,this),this.pos===F&&this.skip(A)}return d},readMessage:function(u,d){return this.readFields(u,d,this.readVarint()+this.pos)},readFixed32:function(){var u=ao(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=ro(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=ao(this.buf,this.pos)+4294967296*ao(this.buf,this.pos+4);return this.pos+=8,u},readSFixed64:function(){var u=ao(this.buf,this.pos)+4294967296*ro(this.buf,this.pos+4);return this.pos+=8,u},readFloat:function(){var u=Rr(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=Rr(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var d,g,A=this.buf;return d=127&(g=A[this.pos++]),g<128?d:(d|=(127&(g=A[this.pos++]))<<7,g<128?d:(d|=(127&(g=A[this.pos++]))<<14,g<128?d:(d|=(127&(g=A[this.pos++]))<<21,g<128?d:function(P,F,j){var q,_e,Ne=j.buf;if(q=(112&(_e=Ne[j.pos++]))>>4,_e<128||(q|=(127&(_e=Ne[j.pos++]))<<3,_e<128)||(q|=(127&(_e=Ne[j.pos++]))<<10,_e<128)||(q|=(127&(_e=Ne[j.pos++]))<<17,_e<128)||(q|=(127&(_e=Ne[j.pos++]))<<24,_e<128)||(q|=(1&(_e=Ne[j.pos++]))<<31,_e<128))return Hi(P,q,F);throw new Error("Expected varint not more than 10 bytes")}(d|=(15&(g=A[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,d=this.pos;return this.pos=u,u-d>=12&&Di?function(g,A,P){return Di.decode(g.subarray(A,P))}(this.buf,d,u):function(g,A,P){for(var F="",j=A;j<P;){var q,_e,Ne,Ze=g[j],ot=null,Tt=Ze>239?4:Ze>223?3:Ze>191?2:1;if(j+Tt>P)break;Tt===1?Ze<128&&(ot=Ze):Tt===2?(192&(q=g[j+1]))==128&&(ot=(31&Ze)<<6|63&q)<=127&&(ot=null):Tt===3?(_e=g[j+2],(192&(q=g[j+1]))==128&&(192&_e)==128&&((ot=(15&Ze)<<12|(63&q)<<6|63&_e)<=2047||ot>=55296&&ot<=57343)&&(ot=null)):Tt===4&&(_e=g[j+2],Ne=g[j+3],(192&(q=g[j+1]))==128&&(192&_e)==128&&(192&Ne)==128&&((ot=(15&Ze)<<18|(63&q)<<12|(63&_e)<<6|63&Ne)<=65535||ot>=1114112)&&(ot=null)),ot===null?(ot=65533,Tt=1):ot>65535&&(ot-=65536,F+=String.fromCharCode(ot>>>10&1023|55296),ot=56320|1023&ot),F+=String.fromCharCode(ot),j+=Tt}return F}(this.buf,d,u)},readBytes:function(){var u=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,u);return this.pos=u,d},readPackedVarint:function(u,d){if(this.type!==yr.Bytes)return u.push(this.readVarint(d));var g=vi(this);for(u=u||[];this.pos<g;)u.push(this.readVarint(d));return u},readPackedSVarint:function(u){if(this.type!==yr.Bytes)return u.push(this.readSVarint());var d=vi(this);for(u=u||[];this.pos<d;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==yr.Bytes)return u.push(this.readBoolean());var d=vi(this);for(u=u||[];this.pos<d;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==yr.Bytes)return u.push(this.readFloat());var d=vi(this);for(u=u||[];this.pos<d;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==yr.Bytes)return u.push(this.readDouble());var d=vi(this);for(u=u||[];this.pos<d;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==yr.Bytes)return u.push(this.readFixed32());var d=vi(this);for(u=u||[];this.pos<d;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==yr.Bytes)return u.push(this.readSFixed32());var d=vi(this);for(u=u||[];this.pos<d;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==yr.Bytes)return u.push(this.readFixed64());var d=vi(this);for(u=u||[];this.pos<d;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==yr.Bytes)return u.push(this.readSFixed64());var d=vi(this);for(u=u||[];this.pos<d;)u.push(this.readSFixed64());return u},skip:function(u){var d=7&u;if(d===yr.Varint)for(;this.buf[this.pos++]>127;);else if(d===yr.Bytes)this.pos=this.readVarint()+this.pos;else if(d===yr.Fixed32)this.pos+=4;else{if(d!==yr.Fixed64)throw new Error("Unimplemented type: "+d);this.pos+=8}},writeTag:function(u,d){this.writeVarint(u<<3|d)},realloc:function(u){for(var d=this.length||16;d<this.pos+u;)d*=2;if(d!==this.length){var g=new Uint8Array(d);g.set(this.buf),this.buf=g,this.length=d}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),Ti(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),Ti(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),Ti(this.buf,-1&u,this.pos),Ti(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),Ti(this.buf,-1&u,this.pos),Ti(this.buf,Math.floor(u*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(d,g){var A,P;if(d>=0?(A=d%4294967296|0,P=d/4294967296|0):(P=~(-d/4294967296),4294967295^(A=~(-d%4294967296))?A=A+1|0:(A=0,P=P+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),function(F,j,q){q.buf[q.pos++]=127&F|128,F>>>=7,q.buf[q.pos++]=127&F|128,F>>>=7,q.buf[q.pos++]=127&F|128,F>>>=7,q.buf[q.pos++]=127&F|128,q.buf[q.pos]=127&(F>>>=7)}(A,0,g),function(F,j){var q=(7&F)<<4;j.buf[j.pos++]|=q|((F>>>=3)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F|((F>>>=7)?128:0),F&&(j.buf[j.pos++]=127&F)))))}(P,g)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var d=this.pos;this.pos=function(A,P,F){for(var j,q,_e=0;_e<P.length;_e++){if((j=P.charCodeAt(_e))>55295&&j<57344){if(!q){j>56319||_e+1===P.length?(A[F++]=239,A[F++]=191,A[F++]=189):q=j;continue}if(j<56320){A[F++]=239,A[F++]=191,A[F++]=189,q=j;continue}j=q-55296<<10|j-56320|65536,q=null}else q&&(A[F++]=239,A[F++]=191,A[F++]=189,q=null);j<128?A[F++]=j:(j<2048?A[F++]=j>>6|192:(j<65536?A[F++]=j>>12|224:(A[F++]=j>>18|240,A[F++]=j>>12&63|128),A[F++]=j>>6&63|128),A[F++]=63&j|128)}return F}(this.buf,u,this.pos);var g=this.pos-d;g>=128&&Li(d,g,this),this.pos=d-1,this.writeVarint(g),this.pos+=g},writeFloat:function(u){this.realloc(4),Kr(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),Kr(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var d=u.length;this.writeVarint(d),this.realloc(d);for(var g=0;g<d;g++)this.buf[this.pos++]=u[g]},writeRawMessage:function(u,d){this.pos++;var g=this.pos;u(d,this);var A=this.pos-g;A>=128&&Li(g,A,this),this.pos=g-1,this.writeVarint(A),this.pos+=A},writeMessage:function(u,d,g){this.writeTag(u,yr.Bytes),this.writeRawMessage(d,g)},writePackedVarint:function(u,d){d.length&&this.writeMessage(u,ki,d)},writePackedSVarint:function(u,d){d.length&&this.writeMessage(u,Gi,d)},writePackedBoolean:function(u,d){d.length&&this.writeMessage(u,dr,d)},writePackedFloat:function(u,d){d.length&&this.writeMessage(u,Ei,d)},writePackedDouble:function(u,d){d.length&&this.writeMessage(u,Wi,d)},writePackedFixed32:function(u,d){d.length&&this.writeMessage(u,jr,d)},writePackedSFixed32:function(u,d){d.length&&this.writeMessage(u,Si,d)},writePackedFixed64:function(u,d){d.length&&this.writeMessage(u,fo,d)},writePackedSFixed64:function(u,d){d.length&&this.writeMessage(u,ui,d)},writeBytesField:function(u,d){this.writeTag(u,yr.Bytes),this.writeBytes(d)},writeFixed32Field:function(u,d){this.writeTag(u,yr.Fixed32),this.writeFixed32(d)},writeSFixed32Field:function(u,d){this.writeTag(u,yr.Fixed32),this.writeSFixed32(d)},writeFixed64Field:function(u,d){this.writeTag(u,yr.Fixed64),this.writeFixed64(d)},writeSFixed64Field:function(u,d){this.writeTag(u,yr.Fixed64),this.writeSFixed64(d)},writeVarintField:function(u,d){this.writeTag(u,yr.Varint),this.writeVarint(d)},writeSVarintField:function(u,d){this.writeTag(u,yr.Varint),this.writeSVarint(d)},writeStringField:function(u,d){this.writeTag(u,yr.Bytes),this.writeString(d)},writeFloatField:function(u,d){this.writeTag(u,yr.Fixed32),this.writeFloat(d)},writeDoubleField:function(u,d){this.writeTag(u,yr.Fixed64),this.writeDouble(d)},writeBooleanField:function(u,d){this.writeVarintField(u,!!d)}};var no=function(u,d){var g=d.pixelRatio,A=d.version,P=d.stretchX,F=d.stretchY,j=d.content;this.paddedRect=u,this.pixelRatio=g,this.stretchX=P,this.stretchY=F,this.content=j,this.version=A},Oi={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Oi.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Oi.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Oi.tlbr.get=function(){return this.tl.concat(this.br)},Oi.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(no.prototype,Oi);var Jr=function(u,d){var g={},A={};this.haveRenderCallbacks=[];var P=[];this.addImages(u,g,P),this.addImages(d,A,P);var F=ha(P),j=new Hc({width:F.w||1,height:F.h||1});for(var q in u){var _e=u[q],Ne=g[q].paddedRect;Hc.copy(_e.data,j,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},_e.data)}for(var Ze in d){var ot=d[Ze],Tt=A[Ze].paddedRect,Bt=Tt.x+1,vn=Tt.y+1,_n=ot.data.width,Hn=ot.data.height;Hc.copy(ot.data,j,{x:0,y:0},{x:Bt,y:vn},ot.data),Hc.copy(ot.data,j,{x:0,y:Hn-1},{x:Bt,y:vn-1},{width:_n,height:1}),Hc.copy(ot.data,j,{x:0,y:0},{x:Bt,y:vn+Hn},{width:_n,height:1}),Hc.copy(ot.data,j,{x:_n-1,y:0},{x:Bt-1,y:vn},{width:1,height:Hn}),Hc.copy(ot.data,j,{x:0,y:0},{x:Bt+_n,y:vn},{width:1,height:Hn})}this.image=j,this.iconPositions=g,this.patternPositions=A};Jr.prototype.addImages=function(u,d,g){for(var A in u){var P=u[A],F={x:0,y:0,w:P.data.width+2,h:P.data.height+2};g.push(F),d[A]=new no(F,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(A)}},Jr.prototype.patchUpdatedImages=function(u,d){for(var g in u.dispatchRenderCallbacks(this.haveRenderCallbacks),u.updatedImages)this.patchUpdatedImage(this.iconPositions[g],u.getImage(g),d),this.patchUpdatedImage(this.patternPositions[g],u.getImage(g),d)},Jr.prototype.patchUpdatedImage=function(u,d,g){if(u&&d&&u.version!==d.version){u.version=d.version;var A=u.tl;g.update(d.data,void 0,{x:A[0],y:A[1]})}},oo("ImagePosition",no),oo("ImageAtlas",Jr);var Vo={horizontal:1,vertical:2,horizontalOnly:3},Ba=function(){this.scale=1,this.fontStack="",this.imageName=null};Ba.forText=function(u,d){var g=new Ba;return g.scale=u||1,g.fontStack=d,g},Ba.forImage=function(u){var d=new Ba;return d.imageName=u,d};var so=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function va(u,d,g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt,vn,_n){var Hn,Ln=so.fromFeature(u,P);ot===Vo.vertical&&Ln.verticalizePunctuation();var fr=Uc.processBidirectionalText,_r=Uc.processStyledBidirectionalText;if(fr&&Ln.sections.length===1){Hn=[];for(var Fr=0,Br=fr(Ln.toString(),Zl(Ln,Ne,F,d,A,Bt,vn));Fr<Br.length;Fr+=1){var $r=Br[Fr],Ni=new so;Ni.text=$r,Ni.sections=Ln.sections;for(var eo=0;eo<$r.length;eo++)Ni.sectionIndex.push(0);Hn.push(Ni)}}else if(_r){Hn=[];for(var zo=0,go=_r(Ln.text,Ln.sectionIndex,Zl(Ln,Ne,F,d,A,Bt,vn));zo<go.length;zo+=1){var $o=go[zo],yo=new so;yo.text=$o[0],yo.sectionIndex=$o[1],yo.sections=Ln.sections,Hn.push(yo)}}else Hn=function(Ro,Ka){for(var Ho=[],is=Ro.text,Uo=0,Ms=0,nl=Ka;Ms<nl.length;Ms+=1){var Yl=nl[Ms];Ho.push(Ro.substring(Uo,Yl)),Uo=Yl}return Uo<is.length&&Ho.push(Ro.substring(Uo,is.length)),Ho}(Ln,Zl(Ln,Ne,F,d,A,Bt,vn));var Ga=[],ua={positionedLines:Ga,text:Ln.toString(),top:Ze[1],bottom:Ze[1],left:Ze[0],right:Ze[0],writingMode:ot,iconsInText:!1,verticalizable:!1};return function(Ro,Ka,Ho,is,Uo,Ms,nl,Yl,Ll,El,$l,ql){for(var _u=0,Gc=-17,Vu=0,Wc=0,zl=Yl==="right"?1:Yl==="left"?0:.5,rc=0,ns=0,Ks=Uo;ns<Ks.length;ns+=1){var js=Ks[ns];js.trim();var ys=js.getMaxScale(),Zc=24*(ys-1),Mc={positionedGlyphs:[],lineOffset:0};Ro.positionedLines[rc]=Mc;var hl=Mc.positionedGlyphs,bu=0;if(js.length()){for(var Rc=0;Rc<js.length();Rc++){var Rs=js.getSection(Rc),Vs=js.getSectionIndex(Rc),lh=js.getCharCode(Rc),zd=0,al=null,gp=null,od=null,ic=24,yp=!(Ll===Vo.horizontal||!$l&&!Cd(lh)||$l&&(da[lh]||(bp=lh,Ui.Arabic(bp)||Ui["Arabic Supplement"](bp)||Ui["Arabic Extended-A"](bp)||Ui["Arabic Presentation Forms-A"](bp)||Ui["Arabic Presentation Forms-B"](bp))));if(Rs.imageName){var av=is[Rs.imageName];if(!av)continue;od=Rs.imageName,Ro.iconsInText=Ro.iconsInText||!0,gp=av.paddedRect;var _p=av.displaySize;Rs.scale=24*Rs.scale/ql,zd=Zc+(24-_p[1]*Rs.scale),ic=(al={width:_p[0],height:_p[1],left:1,top:-3,advance:yp?_p[1]:_p[0]}).advance;var Vv=yp?_p[0]*Rs.scale-24*ys:_p[1]*Rs.scale-24*ys;Vv>0&&Vv>bu&&(bu=Vv)}else{var Og=Ho[Rs.fontStack],sv=Og&&Og[lh];if(sv&&sv.rect)gp=sv.rect,al=sv.metrics;else{var Hv=Ka[Rs.fontStack],Pm=Hv&&Hv[lh];if(!Pm)continue;al=Pm.metrics}zd=24*(ys-Rs.scale)}yp?(Ro.verticalizable=!0,hl.push({glyph:lh,imageName:od,x:_u,y:Gc+zd,vertical:yp,scale:Rs.scale,fontStack:Rs.fontStack,sectionIndex:Vs,metrics:al,rect:gp}),_u+=ic*Rs.scale+El):(hl.push({glyph:lh,imageName:od,x:_u,y:Gc+zd,vertical:yp,scale:Rs.scale,fontStack:Rs.fontStack,sectionIndex:Vs,metrics:al,rect:gp}),_u+=al.advance*Rs.scale+El)}hl.length!==0&&(Vu=Math.max(_u-El,Vu),ae(hl,0,hl.length-1,zl,bu)),_u=0;var $p=Ms*ys+bu;Mc.lineOffset=Math.max(bu,Zc),Gc+=$p,Wc=Math.max($p,Wc),++rc}else Gc+=Ms,++rc}var bp,Im=Gc- -17,lv=tl(nl),qp=lv.horizontalAlign,Gv=lv.verticalAlign;(function(uv,cv,Kp,xp,Mg,Dm,C0,uh,Rg){var O0,Uy=(cv-Kp)*Mg;O0=Dm!==C0?-uh*xp- -17:(-xp*Rg+.5)*C0;for(var Ud=0,Qp=uv;Ud<Qp.length;Ud+=1)for(var ad=0,Wv=Qp[Ud].positionedGlyphs;ad<Wv.length;ad+=1){var M0=Wv[ad];M0.x+=Uy,M0.y+=O0}})(Ro.positionedLines,zl,qp,Gv,Vu,Wc,Ms,Im,Uo.length),Ro.top+=-Gv*Im,Ro.bottom=Ro.top+Im,Ro.left+=-qp*Vu,Ro.right=Ro.left+Vu}(ua,d,g,A,Hn,j,q,_e,ot,Ne,Tt,_n),!function(Ro){for(var Ka=0,Ho=Ro;Ka<Ho.length;Ka+=1)if(Ho[Ka].positionedGlyphs.length!==0)return!1;return!0}(Ga)&&ua}so.fromFeature=function(u,d){for(var g=new so,A=0;A<u.sections.length;A++){var P=u.sections[A];P.image?g.addImageSection(P):g.addTextSection(P,d)}return g},so.prototype.length=function(){return this.text.length},so.prototype.getSection=function(u){return this.sections[this.sectionIndex[u]]},so.prototype.getSectionIndex=function(u){return this.sectionIndex[u]},so.prototype.getCharCode=function(u){return this.text.charCodeAt(u)},so.prototype.verticalizePunctuation=function(){this.text=function(u){for(var d="",g=0;g<u.length;g++){var A=u.charCodeAt(g+1)||null,P=u.charCodeAt(g-1)||null;d+=A&&bh(A)&&!Mn[u[g+1]]||P&&bh(P)&&!Mn[u[g-1]]||!Mn[u[g]]?u[g]:Mn[u[g]]}return d}(this.text)},so.prototype.trim=function(){for(var u=0,d=0;d<this.text.length&&da[this.text.charCodeAt(d)];d++)u++;for(var g=this.text.length,A=this.text.length-1;A>=0&&A>=u&&da[this.text.charCodeAt(A)];A--)g--;this.text=this.text.substring(u,g),this.sectionIndex=this.sectionIndex.slice(u,g)},so.prototype.substring=function(u,d){var g=new so;return g.text=this.text.substring(u,d),g.sectionIndex=this.sectionIndex.slice(u,d),g.sections=this.sections,g},so.prototype.toString=function(){return this.text},so.prototype.getMaxScale=function(){var u=this;return this.sectionIndex.reduce(function(d,g){return Math.max(d,u.sections[g].scale)},0)},so.prototype.addTextSection=function(u,d){this.text+=u.text,this.sections.push(Ba.forText(u.scale,u.fontStack||d));for(var g=this.sections.length-1,A=0;A<u.text.length;++A)this.sectionIndex.push(g)},so.prototype.addImageSection=function(u){var d=u.image?u.image.name:"";if(d.length!==0){var g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(Ba.forImage(d)),this.sectionIndex.push(this.sections.length-1)):We("Reached maximum number of images 6401")}else We("Can't add FormattedSection with an empty image.")},so.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var da={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},qo={};function fs(u,d,g,A,P,F){if(d.imageName){var j=A[d.imageName];return j?j.displaySize[0]*d.scale*24/F+P:0}var q=g[d.fontStack],_e=q&&q[u];return _e?_e.metrics.advance*d.scale+P:0}function Il(u,d,g,A){var P=Math.pow(u-d,2);return A?u<d?P/2:2*P:P+Math.abs(g)*g}function Mu(u,d,g){var A=0;return u===10&&(A-=1e4),g&&(A+=150),u!==40&&u!==65288||(A+=50),d!==41&&d!==65289||(A+=50),A}function ts(u,d,g,A,P,F){for(var j=null,q=Il(d,g,P,F),_e=0,Ne=A;_e<Ne.length;_e+=1){var Ze=Ne[_e],ot=Il(d-Ze.x,g,P,F)+Ze.badness;ot<=q&&(j=Ze,q=ot)}return{index:u,x:d,priorBreak:j,badness:q}}function Zl(u,d,g,A,P,F,j){if(F!=="point")return[];if(!u)return[];for(var q,_e=[],Ne=function(Hn,Ln,fr,_r,Fr,Br){for(var $r=0,Ni=0;Ni<Hn.length();Ni++){var eo=Hn.getSection(Ni);$r+=fs(Hn.getCharCode(Ni),eo,_r,Fr,Ln,Br)}return $r/Math.max(1,Math.ceil($r/fr))}(u,d,g,A,P,j),Ze=u.text.indexOf("\u200B")>=0,ot=0,Tt=0;Tt<u.length();Tt++){var Bt=u.getSection(Tt),vn=u.getCharCode(Tt);if(da[vn]||(ot+=fs(vn,Bt,A,P,d,j)),Tt<u.length()-1){var _n=!((q=vn)<11904||!(Ui["Bopomofo Extended"](q)||Ui.Bopomofo(q)||Ui["CJK Compatibility Forms"](q)||Ui["CJK Compatibility Ideographs"](q)||Ui["CJK Compatibility"](q)||Ui["CJK Radicals Supplement"](q)||Ui["CJK Strokes"](q)||Ui["CJK Symbols and Punctuation"](q)||Ui["CJK Unified Ideographs Extension A"](q)||Ui["CJK Unified Ideographs"](q)||Ui["Enclosed CJK Letters and Months"](q)||Ui["Halfwidth and Fullwidth Forms"](q)||Ui.Hiragana(q)||Ui["Ideographic Description Characters"](q)||Ui["Kangxi Radicals"](q)||Ui["Katakana Phonetic Extensions"](q)||Ui.Katakana(q)||Ui["Vertical Forms"](q)||Ui["Yi Radicals"](q)||Ui["Yi Syllables"](q)));(qo[vn]||_n||Bt.imageName)&&_e.push(ts(Tt+1,ot,Ne,_e,Mu(vn,u.getCharCode(Tt+1),_n&&Ze),!1))}}return function Hn(Ln){return Ln?Hn(Ln.priorBreak).concat(Ln.index):[]}(ts(u.length(),ot,Ne,_e,0,!0))}function tl(u){var d=.5,g=.5;switch(u){case"right":case"top-right":case"bottom-right":d=1;break;case"left":case"top-left":case"bottom-left":d=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":g=1;break;case"top":case"top-right":case"top-left":g=0}return{horizontalAlign:d,verticalAlign:g}}function ae(u,d,g,A,P){if(A||P)for(var F=u[g],j=(u[g].x+F.metrics.advance*F.scale)*A,q=d;q<=g;q++)u[q].x-=j,u[q].y+=P}function uu(u,d,g,A,P,F){var j,q=u.image;if(q.content){var _e=q.content,Ne=q.pixelRatio||1;j=[_e[0]/Ne,_e[1]/Ne,q.displaySize[0]-_e[2]/Ne,q.displaySize[1]-_e[3]/Ne]}var Ze,ot,Tt,Bt,vn=d.left*F,_n=d.right*F;g==="width"||g==="both"?(Bt=P[0]+vn-A[3],ot=P[0]+_n+A[1]):ot=(Bt=P[0]+(vn+_n-q.displaySize[0])/2)+q.displaySize[0];var Hn=d.top*F,Ln=d.bottom*F;return g==="height"||g==="both"?(Ze=P[1]+Hn-A[0],Tt=P[1]+Ln+A[2]):Tt=(Ze=P[1]+(Hn+Ln-q.displaySize[1])/2)+q.displaySize[1],{image:q,top:Ze,right:ot,bottom:Tt,left:Bt,collisionPadding:j}}qo[10]=!0,qo[32]=!0,qo[38]=!0,qo[40]=!0,qo[41]=!0,qo[43]=!0,qo[45]=!0,qo[47]=!0,qo[173]=!0,qo[183]=!0,qo[8203]=!0,qo[8208]=!0,qo[8211]=!0,qo[8231]=!0;var ml=function(u){function d(g,A,P,F){u.call(this,g,A),this.angle=P,F!==void 0&&(this.segment=F)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.clone=function(){return new d(this.x,this.y,this.angle,this.segment)},d}(ue);function cr(u,d){var g=d.expression;if(g.kind==="constant")return{kind:"constant",layoutSize:g.evaluate(new Aa(u+1))};if(g.kind==="source")return{kind:"source"};for(var A=g.zoomStops,P=g.interpolationType,F=0;F<A.length&&A[F]<=u;)F++;for(var j=F=Math.max(0,F-1);j<A.length&&A[j]<u+1;)j++;j=Math.min(A.length-1,j);var q=A[F],_e=A[j];return g.kind==="composite"?{kind:"composite",minZoom:q,maxZoom:_e,interpolationType:P}:{kind:"camera",minZoom:q,maxZoom:_e,minSize:g.evaluate(new Aa(q)),maxSize:g.evaluate(new Aa(_e)),interpolationType:P}}function ti(u,d,g){var A=d.uSize,P=g.lowerSize;return u.kind==="source"?P/128:u.kind==="composite"?As(P/128,g.upperSize/128,d.uSizeT):A}function gl(u,d){var g=0,A=0;if(u.kind==="constant")A=u.layoutSize;else if(u.kind!=="source"){var P=u.interpolationType,F=P?Pe(Bl.interpolationFactor(P,d,u.minZoom,u.maxZoom),0,1):0;u.kind==="camera"?A=As(u.minSize,u.maxSize,F):g=F}return{uSizeT:g,uSize:A}}oo("Anchor",ml);var Ma=Object.freeze({__proto__:null,getSizeData:cr,evaluateSizeForFeature:ti,evaluateSizeForZoom:gl,SIZE_PACK_FACTOR:128});function tc(u,d,g,A,P){if(d.segment===void 0)return!0;for(var F=d,j=d.segment+1,q=0;q>-g/2;){if(--j<0)return!1;q-=u[j].dist(F),F=u[j]}q+=u[j].dist(u[j+1]),j++;for(var _e=[],Ne=0;q<g/2;){var Ze=u[j],ot=u[j+1];if(!ot)return!1;var Tt=u[j-1].angleTo(Ze)-Ze.angleTo(ot);for(Tt=Math.abs((Tt+3*Math.PI)%(2*Math.PI)-Math.PI),_e.push({distance:q,angleDelta:Tt}),Ne+=Tt;q-_e[0].distance>A;)Ne-=_e.shift().angleDelta;if(Ne>P)return!1;j++,q+=Ze.dist(ot)}return!0}function Os(u){for(var d=0,g=0;g<u.length-1;g++)d+=u[g].dist(u[g+1]);return d}function ia(u,d,g){return u?.6*d*g:0}function Xa(u,d){return Math.max(u?u.right-u.left:0,d?d.right-d.left:0)}function gs(u,d,g,A,P,F){for(var j=ia(g,P,F),q=Xa(g,A)*F,_e=0,Ne=Os(u)/2,Ze=0;Ze<u.length-1;Ze++){var ot=u[Ze],Tt=u[Ze+1],Bt=ot.dist(Tt);if(_e+Bt>Ne){var vn=(Ne-_e)/Bt,_n=As(ot.x,Tt.x,vn),Hn=As(ot.y,Tt.y,vn),Ln=new ml(_n,Hn,Tt.angleTo(ot),Ze);return Ln._round(),!j||tc(u,Ln,q,j,d)?Ln:void 0}_e+=Bt}}function Xl(u,d,g,A,P,F,j,q,_e){var Ne=ia(A,F,j),Ze=Xa(A,P),ot=Ze*j,Tt=u[0].x===0||u[0].x===_e||u[0].y===0||u[0].y===_e;return d-ot<d/4&&(d=ot+d/4),function Bt(vn,_n,Hn,Ln,fr,_r,Fr,Br,$r){for(var Ni=_r/2,eo=Os(vn),zo=0,go=_n-Hn,$o=[],yo=0;yo<vn.length-1;yo++){for(var Ga=vn[yo],ua=vn[yo+1],Ro=Ga.dist(ua),Ka=ua.angleTo(Ga);go+Hn<zo+Ro;){var Ho=((go+=Hn)-zo)/Ro,is=As(Ga.x,ua.x,Ho),Uo=As(Ga.y,ua.y,Ho);if(is>=0&&is<$r&&Uo>=0&&Uo<$r&&go-Ni>=0&&go+Ni<=eo){var Ms=new ml(is,Uo,Ka,yo);Ms._round(),Ln&&!tc(vn,Ms,_r,Ln,fr)||$o.push(Ms)}}zo+=Ro}return Br||$o.length||Fr||($o=Bt(vn,zo/2,Hn,Ln,fr,_r,Fr,!0,$r)),$o}(u,Tt?d/2*q%d:(Ze/2+2*F)*j*q%d,d,Ne,g,ot,Tt,!1,_e)}function Bd(u,d,g,A,P){for(var F=[],j=0;j<u.length;j++)for(var q=u[j],_e=void 0,Ne=0;Ne<q.length-1;Ne++){var Ze=q[Ne],ot=q[Ne+1];Ze.x<d&&ot.x<d||(Ze.x<d?Ze=new ue(d,Ze.y+(d-Ze.x)/(ot.x-Ze.x)*(ot.y-Ze.y))._round():ot.x<d&&(ot=new ue(d,Ze.y+(d-Ze.x)/(ot.x-Ze.x)*(ot.y-Ze.y))._round()),Ze.y<g&&ot.y<g||(Ze.y<g?Ze=new ue(Ze.x+(g-Ze.y)/(ot.y-Ze.y)*(ot.x-Ze.x),g)._round():ot.y<g&&(ot=new ue(Ze.x+(g-Ze.y)/(ot.y-Ze.y)*(ot.x-Ze.x),g)._round()),Ze.x>=A&&ot.x>=A||(Ze.x>=A?Ze=new ue(A,Ze.y+(A-Ze.x)/(ot.x-Ze.x)*(ot.y-Ze.y))._round():ot.x>=A&&(ot=new ue(A,Ze.y+(A-Ze.x)/(ot.x-Ze.x)*(ot.y-Ze.y))._round()),Ze.y>=P&&ot.y>=P||(Ze.y>=P?Ze=new ue(Ze.x+(P-Ze.y)/(ot.y-Ze.y)*(ot.x-Ze.x),P)._round():ot.y>=P&&(ot=new ue(Ze.x+(P-Ze.y)/(ot.y-Ze.y)*(ot.x-Ze.x),P)._round()),_e&&Ze.equals(_e[_e.length-1])||F.push(_e=[Ze]),_e.push(ot)))))}return F}function bn(u,d,g,A){var P=[],F=u.image,j=F.pixelRatio,q=F.paddedRect.w-2,_e=F.paddedRect.h-2,Ne=u.right-u.left,Ze=u.bottom-u.top,ot=F.stretchX||[[0,q]],Tt=F.stretchY||[[0,_e]],Bt=function(is,Uo){return is+Uo[1]-Uo[0]},vn=ot.reduce(Bt,0),_n=Tt.reduce(Bt,0),Hn=q-vn,Ln=_e-_n,fr=0,_r=vn,Fr=0,Br=_n,$r=0,Ni=Hn,eo=0,zo=Ln;if(F.content&&A){var go=F.content;fr=Lr(ot,0,go[0]),Fr=Lr(Tt,0,go[1]),_r=Lr(ot,go[0],go[2]),Br=Lr(Tt,go[1],go[3]),$r=go[0]-fr,eo=go[1]-Fr,Ni=go[2]-go[0]-_r,zo=go[3]-go[1]-Br}var $o=function(is,Uo,Ms,nl){var Yl=mo(is.stretch-fr,_r,Ne,u.left),Ll=Pa(is.fixed-$r,Ni,is.stretch,vn),El=mo(Uo.stretch-Fr,Br,Ze,u.top),$l=Pa(Uo.fixed-eo,zo,Uo.stretch,_n),ql=mo(Ms.stretch-fr,_r,Ne,u.left),_u=Pa(Ms.fixed-$r,Ni,Ms.stretch,vn),Gc=mo(nl.stretch-Fr,Br,Ze,u.top),Vu=Pa(nl.fixed-eo,zo,nl.stretch,_n),Wc=new ue(Yl,El),zl=new ue(ql,El),rc=new ue(ql,Gc),ns=new ue(Yl,Gc),Ks=new ue(Ll/j,$l/j),js=new ue(_u/j,Vu/j),ys=d*Math.PI/180;if(ys){var Zc=Math.sin(ys),Mc=Math.cos(ys),hl=[Mc,-Zc,Zc,Mc];Wc._matMult(hl),zl._matMult(hl),ns._matMult(hl),rc._matMult(hl)}var bu=is.stretch+is.fixed,Rc=Uo.stretch+Uo.fixed;return{tl:Wc,tr:zl,bl:ns,br:rc,tex:{x:F.paddedRect.x+1+bu,y:F.paddedRect.y+1+Rc,w:Ms.stretch+Ms.fixed-bu,h:nl.stretch+nl.fixed-Rc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ks,pixelOffsetBR:js,minFontScaleX:Ni/j/Ne,minFontScaleY:zo/j/Ze,isSDF:g}};if(A&&(F.stretchX||F.stretchY))for(var yo=Sr(ot,Hn,vn),Ga=Sr(Tt,Ln,_n),ua=0;ua<yo.length-1;ua++)for(var Ro=yo[ua],Ka=yo[ua+1],Ho=0;Ho<Ga.length-1;Ho++)P.push($o(Ro,Ga[Ho],Ka,Ga[Ho+1]));else P.push($o({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:q+1},{fixed:0,stretch:_e+1}));return P}function Lr(u,d,g){for(var A=0,P=0,F=u;P<F.length;P+=1){var j=F[P];A+=Math.max(d,Math.min(g,j[1]))-Math.max(d,Math.min(g,j[0]))}return A}function Sr(u,d,g){for(var A=[{fixed:-1,stretch:0}],P=0,F=u;P<F.length;P+=1){var j=F[P],q=j[0],_e=j[1],Ne=A[A.length-1];A.push({fixed:q-Ne.stretch,stretch:Ne.stretch}),A.push({fixed:q-Ne.stretch,stretch:Ne.stretch+(_e-q)})}return A.push({fixed:d+1,stretch:g}),A}function mo(u,d,g,A){return u/d*g+A}function Pa(u,d,g,A){return u-d*g/A}var Ya=function(u,d,g,A,P,F,j,q,_e,Ne){if(this.boxStartIndex=u.length,_e){var Ze=F.top,ot=F.bottom,Tt=F.collisionPadding;Tt&&(Ze-=Tt[1],ot+=Tt[3]);var Bt=ot-Ze;Bt>0&&(Bt=Math.max(10,Bt),this.circleDiameter=Bt)}else{var vn=F.top*j-q,_n=F.bottom*j+q,Hn=F.left*j-q,Ln=F.right*j+q,fr=F.collisionPadding;if(fr&&(Hn-=fr[0]*j,vn-=fr[1]*j,Ln+=fr[2]*j,_n+=fr[3]*j),Ne){var _r=new ue(Hn,vn),Fr=new ue(Ln,vn),Br=new ue(Hn,_n),$r=new ue(Ln,_n),Ni=Ne*Math.PI/180;_r._rotate(Ni),Fr._rotate(Ni),Br._rotate(Ni),$r._rotate(Ni),Hn=Math.min(_r.x,Fr.x,Br.x,$r.x),Ln=Math.max(_r.x,Fr.x,Br.x,$r.x),vn=Math.min(_r.y,Fr.y,Br.y,$r.y),_n=Math.max(_r.y,Fr.y,Br.y,$r.y)}u.emplaceBack(d.x,d.y,Hn,vn,Ln,_n,g,A,P)}this.boxEndIndex=u.length},Nt=function(u,d){if(u===void 0&&(u=[]),d===void 0&&(d=nn),this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(var g=(this.length>>1)-1;g>=0;g--)this._down(g)};function nn(u,d){return u<d?-1:u>d?1:0}function Rn(u,d,g){d===void 0&&(d=1),g===void 0&&(g=!1);for(var A=1/0,P=1/0,F=-1/0,j=-1/0,q=u[0],_e=0;_e<q.length;_e++){var Ne=q[_e];(!_e||Ne.x<A)&&(A=Ne.x),(!_e||Ne.y<P)&&(P=Ne.y),(!_e||Ne.x>F)&&(F=Ne.x),(!_e||Ne.y>j)&&(j=Ne.y)}var Ze=Math.min(F-A,j-P),ot=Ze/2,Tt=new Nt([],Tr);if(Ze===0)return new ue(A,P);for(var Bt=A;Bt<F;Bt+=Ze)for(var vn=P;vn<j;vn+=Ze)Tt.push(new xr(Bt+ot,vn+ot,ot,u));for(var _n=function(fr){for(var _r=0,Fr=0,Br=0,$r=fr[0],Ni=0,eo=$r.length,zo=eo-1;Ni<eo;zo=Ni++){var go=$r[Ni],$o=$r[zo],yo=go.x*$o.y-$o.x*go.y;Fr+=(go.x+$o.x)*yo,Br+=(go.y+$o.y)*yo,_r+=3*yo}return new xr(Fr/_r,Br/_r,0,fr)}(u),Hn=Tt.length;Tt.length;){var Ln=Tt.pop();(Ln.d>_n.d||!_n.d)&&(_n=Ln,g&&console.log("found best %d after %d probes",Math.round(1e4*Ln.d)/1e4,Hn)),Ln.max-_n.d<=d||(Tt.push(new xr(Ln.p.x-(ot=Ln.h/2),Ln.p.y-ot,ot,u)),Tt.push(new xr(Ln.p.x+ot,Ln.p.y-ot,ot,u)),Tt.push(new xr(Ln.p.x-ot,Ln.p.y+ot,ot,u)),Tt.push(new xr(Ln.p.x+ot,Ln.p.y+ot,ot,u)),Hn+=4)}return g&&(console.log("num probes: "+Hn),console.log("best distance: "+_n.d)),_n.p}function Tr(u,d){return d.max-u.max}function xr(u,d,g,A){this.p=new ue(u,d),this.h=g,this.d=function(P,F){for(var j=!1,q=1/0,_e=0;_e<F.length;_e++)for(var Ne=F[_e],Ze=0,ot=Ne.length,Tt=ot-1;Ze<ot;Tt=Ze++){var Bt=Ne[Ze],vn=Ne[Tt];Bt.y>P.y!=vn.y>P.y&&P.x<(vn.x-Bt.x)*(P.y-Bt.y)/(vn.y-Bt.y)+Bt.x&&(j=!j),q=Math.min(q,$h(P,Bt,vn))}return(j?1:-1)*Math.sqrt(q)}(this.p,A),this.max=this.d+this.h*Math.SQRT2}Nt.prototype.push=function(u){this.data.push(u),this.length++,this._up(this.length-1)},Nt.prototype.pop=function(){if(this.length!==0){var u=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),u}},Nt.prototype.peek=function(){return this.data[0]},Nt.prototype._up=function(u){for(var d=this.data,g=this.compare,A=d[u];u>0;){var P=u-1>>1,F=d[P];if(g(A,F)>=0)break;d[u]=F,u=P}d[u]=A},Nt.prototype._down=function(u){for(var d=this.data,g=this.compare,A=this.length>>1,P=d[u];u<A;){var F=1+(u<<1),j=d[F],q=F+1;if(q<this.length&&g(d[q],j)<0&&(F=q,j=d[q]),g(j,P)>=0)break;d[u]=j,u=F}d[u]=P};var Vn=Number.POSITIVE_INFINITY;function Kn(u,d){return d[1]!==Vn?function(g,A,P){var F=0,j=0;switch(A=Math.abs(A),P=Math.abs(P),g){case"top-right":case"top-left":case"top":j=P-7;break;case"bottom-right":case"bottom-left":case"bottom":j=7-P}switch(g){case"top-right":case"bottom-right":case"right":F=-A;break;case"top-left":case"bottom-left":case"left":F=A}return[F,j]}(u,d[0],d[1]):function(g,A){var P=0,F=0;A<0&&(A=0);var j=A/Math.sqrt(2);switch(g){case"top-right":case"top-left":F=j-7;break;case"bottom-right":case"bottom-left":F=7-j;break;case"bottom":F=7-A;break;case"top":F=A-7}switch(g){case"top-right":case"bottom-right":P=-j;break;case"top-left":case"bottom-left":P=j;break;case"left":P=A;break;case"right":P=-A}return[P,F]}(u,d[0])}function rr(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xn(u,d,g,A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt,vn){var _n=function(Fr,Br,$r,Ni,eo,zo,go,$o){for(var yo=Ni.layout.get("text-rotate").evaluate(zo,{})*Math.PI/180,Ga=[],ua=0,Ro=Br.positionedLines;ua<Ro.length;ua+=1)for(var Ka=Ro[ua],Ho=0,is=Ka.positionedGlyphs;Ho<is.length;Ho+=1){var Uo=is[Ho];if(Uo.rect){var Ms=Uo.rect||{},nl=4,Yl=!0,Ll=1,El=0,$l=(eo||$o)&&Uo.vertical,ql=Uo.metrics.advance*Uo.scale/2;if($o&&Br.verticalizable&&(El=Ka.lineOffset/2-(Uo.imageName?-(24-Uo.metrics.width*Uo.scale)/2:24*(Uo.scale-1))),Uo.imageName){var _u=go[Uo.imageName];Yl=_u.sdf,nl=1/(Ll=_u.pixelRatio)}var Gc=eo?[Uo.x+ql,Uo.y]:[0,0],Vu=eo?[0,0]:[Uo.x+ql+$r[0],Uo.y+$r[1]-El],Wc=[0,0];$l&&(Wc=Vu,Vu=[0,0]);var zl=(Uo.metrics.left-nl)*Uo.scale-ql+Vu[0],rc=(-Uo.metrics.top-nl)*Uo.scale+Vu[1],ns=zl+Ms.w*Uo.scale/Ll,Ks=rc+Ms.h*Uo.scale/Ll,js=new ue(zl,rc),ys=new ue(ns,rc),Zc=new ue(zl,Ks),Mc=new ue(ns,Ks);if($l){var hl=new ue(-ql,ql- -17),bu=-Math.PI/2,Rc=12-ql,Rs=new ue(22-Rc,-(Uo.imageName?Rc:0)),Vs=new(Function.prototype.bind.apply(ue,[null].concat(Wc)));js._rotateAround(bu,hl)._add(Rs)._add(Vs),ys._rotateAround(bu,hl)._add(Rs)._add(Vs),Zc._rotateAround(bu,hl)._add(Rs)._add(Vs),Mc._rotateAround(bu,hl)._add(Rs)._add(Vs)}if(yo){var lh=Math.sin(yo),zd=Math.cos(yo),al=[zd,-lh,lh,zd];js._matMult(al),ys._matMult(al),Zc._matMult(al),Mc._matMult(al)}var gp=new ue(0,0),od=new ue(0,0);Ga.push({tl:js,tr:ys,bl:Zc,br:Mc,tex:Ms,writingMode:Br.writingMode,glyphOffset:Gc,sectionIndex:Uo.sectionIndex,isSDF:Yl,pixelOffsetTL:gp,pixelOffsetBR:od,minFontScaleX:0,minFontScaleY:0})}}return Ga}(0,g,q,P,F,j,A,u.allowVerticalPlacement),Hn=u.textSizeData,Ln=null;Hn.kind==="source"?(Ln=[128*P.layout.get("text-size").evaluate(j,{})])[0]>32640&&We(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Hn.kind==="composite"&&((Ln=[128*Bt.compositeTextSizes[0].evaluate(j,{},vn),128*Bt.compositeTextSizes[1].evaluate(j,{},vn)])[0]>32640||Ln[1]>32640)&&We(u.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),u.addSymbols(u.text,_n,Ln,q,F,j,Ne,d,_e.lineStartIndex,_e.lineLength,Tt,vn);for(var fr=0,_r=Ze;fr<_r.length;fr+=1)ot[_r[fr]]=u.text.placedSymbolArray.length-1;return 4*_n.length}function Zn(u){for(var d in u)return u[d];return null}function en(u,d,g,A){var P=u.compareText;if(d in P){for(var F=P[d],j=F.length-1;j>=0;j--)if(A.dist(F[j])<g)return!0}else P[d]=[];return P[d].push(A),!1}var Xn=pf.VectorTileFeature.types,Nr=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Vr(u,d,g,A,P,F,j,q,_e,Ne,Ze,ot,Tt){var Bt=q?Math.min(32640,Math.round(q[0])):0,vn=q?Math.min(32640,Math.round(q[1])):0;u.emplaceBack(d,g,Math.round(32*A),Math.round(32*P),F,j,(Bt<<1)+(_e?1:0),vn,16*Ne,16*Ze,256*ot,256*Tt)}function bi(u,d,g){u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g),u.emplaceBack(d.x,d.y,g)}function li(u){for(var d=0,g=u.sections;d<g.length;d+=1)if(f0(g[d].text))return!0;return!1}var yi=function(u){this.layoutVertexArray=new Hp,this.indexArray=new Vf,this.programConfigurations=u,this.segments=new Vt,this.dynamicLayoutVertexArray=new jc,this.opacityVertexArray=new Rd,this.placedSymbolArray=new O};yi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},yi.prototype.upload=function(u,d,g,A){this.isEmpty()||(g&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Cm.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,Iy.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,Nr,!0),this.opacityVertexBuffer.itemSize=1),(g||A)&&this.programConfigurations.upload(u))},yi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},oo("SymbolBuffers",yi);var Lo=function(u,d,g){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new g,this.segments=new Vt,this.collisionVertexArray=new m0};Lo.prototype.upload=function(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,rv.members,!0)},Lo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},oo("CollisionBuffers",Lo);var Zi=function(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ou([]),this.placementViewportMatrix=Ou([]);var d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=cr(this.zoom,d["text-size"]),this.iconSizeData=cr(this.zoom,d["icon-size"]);var g=this.layers[0].layout,A=g.get("symbol-sort-key"),P=g.get("symbol-z-order");this.canOverlap=g.get("text-allow-overlap")||g.get("icon-allow-overlap")||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&A.constantOr(1)!==void 0,this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(function(F){return Vo[F]})),this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id}),this.sourceID=u.sourceID};Zi.prototype.createArrays=function(){this.text=new yi(new ko(this.layers,this.zoom,function(u){return/^text/.test(u)})),this.icon=new yi(new ko(this.layers,this.zoom,function(u){return/^icon/.test(u)})),this.glyphOffsetArray=new Q,this.lineVertexArray=new ge,this.symbolInstances=new Z},Zi.prototype.calculateGlyphDependencies=function(u,d,g,A,P){for(var F=0;F<u.length;F++)if(d[u.charCodeAt(F)]=!0,(g||A)&&P){var j=Mn[u.charAt(F)];j&&(d[j.charCodeAt(0)]=!0)}},Zi.prototype.populate=function(u,d,g){var A=this.layers[0],P=A.layout,F=P.get("text-font"),j=P.get("text-field"),q=P.get("icon-image"),_e=(j.value.kind!=="constant"||j.value.value instanceof hr&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),Ne=q.value.kind!=="constant"||!!q.value.value||Object.keys(q.parameters).length>0,Ze=P.get("symbol-sort-key");if(this.features=[],_e||Ne){for(var ot=d.iconDependencies,Tt=d.glyphDependencies,Bt=d.availableImages,vn=new Aa(this.zoom),_n=0,Hn=u;_n<Hn.length;_n+=1){var Ln=Hn[_n],fr=Ln.feature,_r=Ln.id,Fr=Ln.index,Br=Ln.sourceLayerIndex,$r=A._featureFilter.needGeometry,Ni=vl(fr,$r);if(A._featureFilter.filter(vn,Ni,g)){$r||(Ni.geometry=Ss(fr));var eo=void 0;if(_e){var zo=A.getValueAndResolveTokens("text-field",Ni,g,Bt),go=hr.factory(zo);li(go)&&(this.hasRTLText=!0),(!this.hasRTLText||Z0()==="unavailable"||this.hasRTLText&&Uc.isParsed())&&(eo=Yt(go,A,Ni))}var $o=void 0;if(Ne){var yo=A.getValueAndResolveTokens("icon-image",Ni,g,Bt);$o=yo instanceof oi?yo:oi.fromString(yo)}if(eo||$o){var Ga=this.sortFeaturesByKey?Ze.evaluate(Ni,{},g):void 0;if(this.features.push({id:_r,text:eo,icon:$o,index:Fr,sourceLayerIndex:Br,geometry:Ni.geometry,properties:fr.properties,type:Xn[fr.type],sortKey:Ga}),$o&&(ot[$o.name]=!0),eo){var ua=F.evaluate(Ni,{},g).join(","),Ro=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Vo.vertical)>=0;for(var Ka=0,Ho=eo.sections;Ka<Ho.length;Ka+=1){var is=Ho[Ka];if(is.image)ot[is.image.name]=!0;else{var Uo=Af(eo.toString()),Ms=is.fontStack||ua,nl=Tt[Ms]=Tt[Ms]||{};this.calculateGlyphDependencies(is.text,nl,Ro,this.allowVerticalPlacement,Uo)}}}}}}P.get("symbol-placement")==="line"&&(this.features=function(Yl){var Ll={},El={},$l=[],ql=0;function _u(hl){$l.push(Yl[hl]),ql++}function Gc(hl,bu,Rc){var Rs=El[hl];return delete El[hl],El[bu]=Rs,$l[Rs].geometry[0].pop(),$l[Rs].geometry[0]=$l[Rs].geometry[0].concat(Rc[0]),Rs}function Vu(hl,bu,Rc){var Rs=Ll[bu];return delete Ll[bu],Ll[hl]=Rs,$l[Rs].geometry[0].shift(),$l[Rs].geometry[0]=Rc[0].concat($l[Rs].geometry[0]),Rs}function Wc(hl,bu,Rc){var Rs=Rc?bu[0][bu[0].length-1]:bu[0][0];return hl+":"+Rs.x+":"+Rs.y}for(var zl=0;zl<Yl.length;zl++){var rc=Yl[zl],ns=rc.geometry,Ks=rc.text?rc.text.toString():null;if(Ks){var js=Wc(Ks,ns),ys=Wc(Ks,ns,!0);if(js in El&&ys in Ll&&El[js]!==Ll[ys]){var Zc=Vu(js,ys,ns),Mc=Gc(js,ys,$l[Zc].geometry);delete Ll[js],delete El[ys],El[Wc(Ks,$l[Mc].geometry,!0)]=Mc,$l[Zc].geometry=null}else js in El?Gc(js,ys,ns):ys in Ll?Vu(js,ys,ns):(_u(zl),Ll[js]=ql-1,El[ys]=ql-1)}else _u(zl)}return $l.filter(function(hl){return hl.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Yl,Ll){return Yl.sortKey-Ll.sortKey})}},Zi.prototype.update=function(u,d,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,g),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,g))},Zi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Zi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Zi.prototype.upload=function(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Zi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Zi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Zi.prototype.addToLineVertexArray=function(u,d){var g=this.lineVertexArray.length;if(u.segment!==void 0){for(var A=u.dist(d[u.segment+1]),P=u.dist(d[u.segment]),F={},j=u.segment+1;j<d.length;j++)F[j]={x:d[j].x,y:d[j].y,tileUnitDistanceFromAnchor:A},j<d.length-1&&(A+=d[j+1].dist(d[j]));for(var q=u.segment||0;q>=0;q--)F[q]={x:d[q].x,y:d[q].y,tileUnitDistanceFromAnchor:P},q>0&&(P+=d[q-1].dist(d[q]));for(var _e=0;_e<d.length;_e++){var Ne=F[_e];this.lineVertexArray.emplaceBack(Ne.x,Ne.y,Ne.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}},Zi.prototype.addSymbols=function(u,d,g,A,P,F,j,q,_e,Ne,Ze,ot){for(var Tt=u.indexArray,Bt=u.layoutVertexArray,vn=u.segments.prepareSegment(4*d.length,Bt,Tt,this.canOverlap?F.sortKey:void 0),_n=this.glyphOffsetArray.length,Hn=vn.vertexLength,Ln=this.allowVerticalPlacement&&j===Vo.vertical?Math.PI/2:0,fr=F.text&&F.text.sections,_r=0;_r<d.length;_r++){var Fr=d[_r],Br=Fr.tl,$r=Fr.tr,Ni=Fr.bl,eo=Fr.br,zo=Fr.tex,go=Fr.pixelOffsetTL,$o=Fr.pixelOffsetBR,yo=Fr.minFontScaleX,Ga=Fr.minFontScaleY,ua=Fr.glyphOffset,Ro=Fr.isSDF,Ka=Fr.sectionIndex,Ho=vn.vertexLength,is=ua[1];Vr(Bt,q.x,q.y,Br.x,is+Br.y,zo.x,zo.y,g,Ro,go.x,go.y,yo,Ga),Vr(Bt,q.x,q.y,$r.x,is+$r.y,zo.x+zo.w,zo.y,g,Ro,$o.x,go.y,yo,Ga),Vr(Bt,q.x,q.y,Ni.x,is+Ni.y,zo.x,zo.y+zo.h,g,Ro,go.x,$o.y,yo,Ga),Vr(Bt,q.x,q.y,eo.x,is+eo.y,zo.x+zo.w,zo.y+zo.h,g,Ro,$o.x,$o.y,yo,Ga),bi(u.dynamicLayoutVertexArray,q,Ln),Tt.emplaceBack(Ho,Ho+1,Ho+2),Tt.emplaceBack(Ho+1,Ho+2,Ho+3),vn.vertexLength+=4,vn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ua[0]),_r!==d.length-1&&Ka===d[_r+1].sectionIndex||u.programConfigurations.populatePaintArrays(Bt.length,F,F.index,{},ot,fr&&fr[Ka])}u.placedSymbolArray.emplaceBack(q.x,q.y,_n,this.glyphOffsetArray.length-_n,Hn,_e,Ne,q.segment,g?g[0]:0,g?g[1]:0,A[0],A[1],j,0,!1,0,Ze)},Zi.prototype._addCollisionDebugVertex=function(u,d,g,A,P,F){return d.emplaceBack(0,0),u.emplaceBack(g.x,g.y,A,P,Math.round(F.x),Math.round(F.y))},Zi.prototype.addCollisionDebugVertices=function(u,d,g,A,P,F,j){var q=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),_e=q.vertexLength,Ne=P.layoutVertexArray,Ze=P.collisionVertexArray,ot=j.anchorX,Tt=j.anchorY;this._addCollisionDebugVertex(Ne,Ze,F,ot,Tt,new ue(u,d)),this._addCollisionDebugVertex(Ne,Ze,F,ot,Tt,new ue(g,d)),this._addCollisionDebugVertex(Ne,Ze,F,ot,Tt,new ue(g,A)),this._addCollisionDebugVertex(Ne,Ze,F,ot,Tt,new ue(u,A)),q.vertexLength+=4;var Bt=P.indexArray;Bt.emplaceBack(_e,_e+1),Bt.emplaceBack(_e+1,_e+2),Bt.emplaceBack(_e+2,_e+3),Bt.emplaceBack(_e+3,_e),q.primitiveLength+=4},Zi.prototype.addDebugCollisionBoxes=function(u,d,g,A){for(var P=u;P<d;P++){var F=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,A?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,g)}},Zi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Lo(Sh,Cc.members,Gf),this.iconCollisionBox=new Lo(Sh,Cc.members,Gf);for(var u=0;u<this.symbolInstances.length;u++){var d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}},Zi.prototype._deserializeCollisionBoxesForSymbol=function(u,d,g,A,P,F,j,q,_e){for(var Ne={},Ze=d;Ze<g;Ze++){var ot=u.get(Ze);Ne.textBox={x1:ot.x1,y1:ot.y1,x2:ot.x2,y2:ot.y2,anchorPointX:ot.anchorPointX,anchorPointY:ot.anchorPointY},Ne.textFeatureIndex=ot.featureIndex;break}for(var Tt=A;Tt<P;Tt++){var Bt=u.get(Tt);Ne.verticalTextBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},Ne.verticalTextFeatureIndex=Bt.featureIndex;break}for(var vn=F;vn<j;vn++){var _n=u.get(vn);Ne.iconBox={x1:_n.x1,y1:_n.y1,x2:_n.x2,y2:_n.y2,anchorPointX:_n.anchorPointX,anchorPointY:_n.anchorPointY},Ne.iconFeatureIndex=_n.featureIndex;break}for(var Hn=q;Hn<_e;Hn++){var Ln=u.get(Hn);Ne.verticalIconBox={x1:Ln.x1,y1:Ln.y1,x2:Ln.x2,y2:Ln.y2,anchorPointX:Ln.anchorPointX,anchorPointY:Ln.anchorPointY},Ne.verticalIconFeatureIndex=Ln.featureIndex;break}return Ne},Zi.prototype.deserializeCollisionBoxes=function(u){this.collisionArrays=[];for(var d=0;d<this.symbolInstances.length;d++){var g=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}},Zi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Zi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Zi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Zi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Zi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Zi.prototype.addIndicesForPlacedSymbol=function(u,d){for(var g=u.placedSymbolArray.get(d),A=g.vertexStartIndex+4*g.numGlyphs,P=g.vertexStartIndex;P<A;P+=4)u.indexArray.emplaceBack(P,P+1,P+2),u.indexArray.emplaceBack(P+1,P+2,P+3)},Zi.prototype.getSortedSymbolIndexes=function(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var d=Math.sin(u),g=Math.cos(u),A=[],P=[],F=[],j=0;j<this.symbolInstances.length;++j){F.push(j);var q=this.symbolInstances.get(j);A.push(0|Math.round(d*q.anchorX+g*q.anchorY)),P.push(q.featureIndex)}return F.sort(function(_e,Ne){return A[_e]-A[Ne]||P[Ne]-P[_e]}),F},Zi.prototype.addToSortKeyRanges=function(u,d){var g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===d?g.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})},Zi.prototype.sortFeatures=function(u){var d=this;if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var g=0,A=this.symbolInstanceIndexes;g<A.length;g+=1){var P=this.symbolInstances.get(A[g]);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach(function(F,j,q){F>=0&&q.indexOf(F)===j&&d.addIndicesForPlacedSymbol(d.text,F)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},oo("SymbolBucket",Zi,{omit:["layers","collisionBoxArray","features","compareText"]}),Zi.MAX_GLYPHS=65535,Zi.addDynamicAttributes=bi;var to=new cl({"symbol-placement":new Bo(St.layout_symbol["symbol-placement"]),"symbol-spacing":new Bo(St.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Bo(St.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ao(St.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Bo(St.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Bo(St.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Bo(St.layout_symbol["icon-ignore-placement"]),"icon-optional":new Bo(St.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Bo(St.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ao(St.layout_symbol["icon-size"]),"icon-text-fit":new Bo(St.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Bo(St.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ao(St.layout_symbol["icon-image"]),"icon-rotate":new Ao(St.layout_symbol["icon-rotate"]),"icon-padding":new Bo(St.layout_symbol["icon-padding"]),"icon-keep-upright":new Bo(St.layout_symbol["icon-keep-upright"]),"icon-offset":new Ao(St.layout_symbol["icon-offset"]),"icon-anchor":new Ao(St.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Bo(St.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Bo(St.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Bo(St.layout_symbol["text-rotation-alignment"]),"text-field":new Ao(St.layout_symbol["text-field"]),"text-font":new Ao(St.layout_symbol["text-font"]),"text-size":new Ao(St.layout_symbol["text-size"]),"text-max-width":new Ao(St.layout_symbol["text-max-width"]),"text-line-height":new Bo(St.layout_symbol["text-line-height"]),"text-letter-spacing":new Ao(St.layout_symbol["text-letter-spacing"]),"text-justify":new Ao(St.layout_symbol["text-justify"]),"text-radial-offset":new Ao(St.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Bo(St.layout_symbol["text-variable-anchor"]),"text-anchor":new Ao(St.layout_symbol["text-anchor"]),"text-max-angle":new Bo(St.layout_symbol["text-max-angle"]),"text-writing-mode":new Bo(St.layout_symbol["text-writing-mode"]),"text-rotate":new Ao(St.layout_symbol["text-rotate"]),"text-padding":new Bo(St.layout_symbol["text-padding"]),"text-keep-upright":new Bo(St.layout_symbol["text-keep-upright"]),"text-transform":new Ao(St.layout_symbol["text-transform"]),"text-offset":new Ao(St.layout_symbol["text-offset"]),"text-allow-overlap":new Bo(St.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Bo(St.layout_symbol["text-ignore-placement"]),"text-optional":new Bo(St.layout_symbol["text-optional"])}),oa={paint:new cl({"icon-opacity":new Ao(St.paint_symbol["icon-opacity"]),"icon-color":new Ao(St.paint_symbol["icon-color"]),"icon-halo-color":new Ao(St.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ao(St.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ao(St.paint_symbol["icon-halo-blur"]),"icon-translate":new Bo(St.paint_symbol["icon-translate"]),"icon-translate-anchor":new Bo(St.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ao(St.paint_symbol["text-opacity"]),"text-color":new Ao(St.paint_symbol["text-color"],{runtimeType:xi,getOverride:function(u){return u.textColor},hasOverride:function(u){return!!u.textColor}}),"text-halo-color":new Ao(St.paint_symbol["text-halo-color"]),"text-halo-width":new Ao(St.paint_symbol["text-halo-width"]),"text-halo-blur":new Ao(St.paint_symbol["text-halo-blur"]),"text-translate":new Bo(St.paint_symbol["text-translate"]),"text-translate-anchor":new Bo(St.paint_symbol["text-translate-anchor"])}),layout:to},na=function(u){this.type=u.property.overrides?u.property.overrides.runtimeType:Pi,this.defaultValue=u};na.prototype.evaluate=function(u){if(u.formattedSection){var d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default},na.prototype.eachChild=function(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)},na.prototype.outputDefined=function(){return!1},na.prototype.serialize=function(){return null},oo("FormatSectionOverride",na,{omit:["defaultValue"]});var zs=function(u){function d(g){u.call(this,g,oa)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.recalculate=function(g,A){if(u.prototype.recalculate.call(this,g,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var P=this.layout.get("text-writing-mode");if(P){for(var F=[],j=0,q=P;j<q.length;j+=1){var _e=q[j];F.indexOf(_e)<0&&F.push(_e)}this.layout._values["text-writing-mode"]=F}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},d.prototype.getValueAndResolveTokens=function(g,A,P,F){var j=this.layout.get(g).evaluate(A,{},P,F),q=this._unevaluatedLayout._values[g];return q.isDataDriven()||Fa(q.value)||!j?j:function(_e,Ne){return Ne.replace(/{([^{}]+)}/g,function(Ze,ot){return ot in _e?String(_e[ot]):""})}(A.properties,j)},d.prototype.createBucket=function(g){return new Zi(g)},d.prototype.queryRadius=function(){return 0},d.prototype.queryIntersectsFeature=function(){return!1},d.prototype._setPaintOverrides=function(){for(var g=0,A=oa.paint.overridableProperties;g<A.length;g+=1){var P=A[g];if(d.hasPaintOverride(this.layout,P)){var F,j=this.paint.get(P),q=new na(j),_e=new xa(q,j.property.specification);F=j.value.kind==="constant"||j.value.kind==="source"?new Za("source",_e):new Sa("composite",_e,j.value.zoomStops,j.value._interpolationType),this.paint._values[P]=new $u(j.property,F,j.parameters)}}},d.prototype._handleOverridablePaintPropertyUpdate=function(g,A,P){return!(!this.layout||A.isDataDriven()||P.isDataDriven())&&d.hasPaintOverride(this.layout,g)},d.hasPaintOverride=function(g,A){var P=g.get("text-field"),F=oa.paint.properties[A],j=!1,q=function(Ze){for(var ot=0,Tt=Ze;ot<Tt.length;ot+=1)if(F.overrides&&F.overrides.hasOverride(Tt[ot]))return void(j=!0)};if(P.value.kind==="constant"&&P.value.value instanceof hr)q(P.value.value.sections);else if(P.value.kind==="source"){var _e=function(Ze){j||(Ze instanceof ji&&ai(Ze.value)===_a?q(Ze.value.sections):Ze instanceof wo?q(Ze.sections):Ze.eachChild(_e))},Ne=P.value;Ne._styleExpression&&_e(Ne._styleExpression.expression)}return j},d}(Sc),ju={paint:new cl({"background-color":new Bo(St.paint_background["background-color"]),"background-pattern":new qu(St.paint_background["background-pattern"]),"background-opacity":new Bo(St.paint_background["background-opacity"])})},Oc=function(u){function d(g){u.call(this,g,ju)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Sc),Dy={paint:new cl({"raster-opacity":new Bo(St.paint_raster["raster-opacity"]),"raster-hue-rotate":new Bo(St.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Bo(St.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Bo(St.paint_raster["raster-brightness-max"]),"raster-saturation":new Bo(St.paint_raster["raster-saturation"]),"raster-contrast":new Bo(St.paint_raster["raster-contrast"]),"raster-resampling":new Bo(St.paint_raster["raster-resampling"]),"raster-fade-duration":new Bo(St.paint_raster["raster-fade-duration"])})},sh=function(u){function d(g){u.call(this,g,Dy)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d}(Sc),Om=function(u){function d(g){u.call(this,g,{}),this.implementation=g}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},d.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},d.prototype.recalculate=function(){},d.prototype.updateTransitions=function(){},d.prototype.hasTransition=function(){},d.prototype.serialize=function(){},d.prototype.onAdd=function(g){this.implementation.onAdd&&this.implementation.onAdd(g,g.painter.context.gl)},d.prototype.onRemove=function(g){this.implementation.onRemove&&this.implementation.onRemove(g,g.painter.context.gl)},d}(Sc),Xp={circle:b0,heatmap:$0,hillshade:q0,fill:Sg,"fill-extrusion":My,line:Bv,symbol:zs,background:Oc,raster:sh},kv=oe.HTMLImageElement,u1=oe.HTMLCanvasElement,QE=oe.HTMLVideoElement,Mm=oe.ImageData,Ly=oe.ImageBitmap,A0=function(u,d,g,A){this.context=u,this.format=g,this.texture=u.gl.createTexture(),this.update(d,A)};A0.prototype.update=function(u,d,g){var A=u.width,P=u.height,F=!(this.size&&this.size[0]===A&&this.size[1]===P||g),j=this.context,q=j.gl;if(this.useMipmap=!!(d&&d.useMipmap),q.bindTexture(q.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===q.RGBA&&(!d||d.premultiply!==!1)),F)this.size=[A,P],u instanceof kv||u instanceof u1||u instanceof QE||u instanceof Mm||Ly&&u instanceof Ly?q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,q.UNSIGNED_BYTE,u):q.texImage2D(q.TEXTURE_2D,0,this.format,A,P,0,this.format,q.UNSIGNED_BYTE,u.data);else{var _e=g||{x:0,y:0},Ne=_e.x,Ze=_e.y;u instanceof kv||u instanceof u1||u instanceof QE||u instanceof Mm||Ly&&u instanceof Ly?q.texSubImage2D(q.TEXTURE_2D,0,Ne,Ze,q.RGBA,q.UNSIGNED_BYTE,u):q.texSubImage2D(q.TEXTURE_2D,0,Ne,Ze,A,P,q.RGBA,q.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&q.generateMipmap(q.TEXTURE_2D)},A0.prototype.bind=function(u,d,g){var A=this.context.gl;A.bindTexture(A.TEXTURE_2D,this.texture),g!==A.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=A.LINEAR),u!==this.filter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,u),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,g||u),this.filter=u),d!==this.wrap&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,d),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,d),this.wrap=d)},A0.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},A0.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ny=function(u){var d=this;this._callback=u,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){d._triggered=!1,d._callback()})};Ny.prototype.trigger=function(){var u=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){u._triggered=!1,u._callback()},0))},Ny.prototype.remove=function(){delete this._channel,this._callback=function(){}};var zv=function(u,d,g){this.target=u,this.parent=d,this.mapId=g,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},wt(["receive","process"],this),this.invoker=new Ny(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Le()?u:oe};function Tg(u,d,g){var A=2*Math.PI*6378137/256/Math.pow(2,g);return[u*A-2*Math.PI*6378137/2,d*A-2*Math.PI*6378137/2]}zv.prototype.send=function(u,d,g,A,P){var F=this;P===void 0&&(P=!1);var j=Math.round(1e18*Math.random()).toString(36).substring(0,10);g&&(this.callbacks[j]=g);var q=nt(this.globalScope)?void 0:[];return this.target.postMessage({id:j,type:u,hasCallback:!!g,targetMapId:A,mustQueue:P,sourceMapId:this.mapId,data:Ja(d,q)},q),{cancel:function(){g&&delete F.callbacks[j],F.target.postMessage({id:j,type:"<cancel>",targetMapId:A,sourceMapId:F.mapId})}}},zv.prototype.receive=function(u){var d=u.data,g=d.id;if(g&&(!d.targetMapId||this.mapId===d.targetMapId))if(d.type==="<cancel>"){delete this.tasks[g];var A=this.cancelCallbacks[g];delete this.cancelCallbacks[g],A&&A()}else Le()||d.mustQueue?(this.tasks[g]=d,this.taskQueue.push(g),this.invoker.trigger()):this.processTask(g,d)},zv.prototype.process=function(){if(this.taskQueue.length){var u=this.taskQueue.shift(),d=this.tasks[u];delete this.tasks[u],this.taskQueue.length&&this.invoker.trigger(),d&&this.processTask(u,d)}},zv.prototype.processTask=function(u,d){var g=this;if(d.type==="<response>"){var A=this.callbacks[u];delete this.callbacks[u],A&&(d.error?A(Ns(d.error)):A(null,Ns(d.data)))}else{var P=!1,F=nt(this.globalScope)?void 0:[],j=d.hasCallback?function(Ze,ot){P=!0,delete g.cancelCallbacks[u],g.target.postMessage({id:u,type:"<response>",sourceMapId:g.mapId,error:Ze?Ja(Ze):null,data:Ja(ot,F)},F)}:function(Ze){P=!0},q=null,_e=Ns(d.data);if(this.parent[d.type])q=this.parent[d.type](d.sourceMapId,_e,j);else if(this.parent.getWorkerSource){var Ne=d.type.split(".");q=this.parent.getWorkerSource(d.sourceMapId,Ne[0],_e.source)[Ne[1]](_e,j)}else j(new Error("Could not find function "+d.type));!P&&q&&q.cancel&&(this.cancelCallbacks[u]=q.cancel)}},zv.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var cu=function(u,d){u&&(d?this.setSouthWest(u).setNorthEast(d):u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1]))};cu.prototype.setNorthEast=function(u){return this._ne=u instanceof Dl?new Dl(u.lng,u.lat):Dl.convert(u),this},cu.prototype.setSouthWest=function(u){return this._sw=u instanceof Dl?new Dl(u.lng,u.lat):Dl.convert(u),this},cu.prototype.extend=function(u){var d,g,A=this._sw,P=this._ne;if(u instanceof Dl)d=u,g=u;else{if(!(u instanceof cu))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(cu.convert(u)):this.extend(Dl.convert(u)):this;if(g=u._ne,!(d=u._sw)||!g)return this}return A||P?(A.lng=Math.min(d.lng,A.lng),A.lat=Math.min(d.lat,A.lat),P.lng=Math.max(g.lng,P.lng),P.lat=Math.max(g.lat,P.lat)):(this._sw=new Dl(d.lng,d.lat),this._ne=new Dl(g.lng,g.lat)),this},cu.prototype.getCenter=function(){return new Dl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},cu.prototype.getSouthWest=function(){return this._sw},cu.prototype.getNorthEast=function(){return this._ne},cu.prototype.getNorthWest=function(){return new Dl(this.getWest(),this.getNorth())},cu.prototype.getSouthEast=function(){return new Dl(this.getEast(),this.getSouth())},cu.prototype.getWest=function(){return this._sw.lng},cu.prototype.getSouth=function(){return this._sw.lat},cu.prototype.getEast=function(){return this._ne.lng},cu.prototype.getNorth=function(){return this._ne.lat},cu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},cu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},cu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},cu.prototype.contains=function(u){var d=Dl.convert(u),g=d.lng,A=d.lat,P=this._sw.lng<=g&&g<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=g&&g>=this._ne.lng),this._sw.lat<=A&&A<=this._ne.lat&&P},cu.convert=function(u){return!u||u instanceof cu?u:new cu(u)};var Dl=function(u,d){if(isNaN(u)||isNaN(d))throw new Error("Invalid LngLat object: ("+u+", "+d+")");if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Dl.prototype.wrap=function(){return new Dl($(this.lng,-180,180),this.lat)},Dl.prototype.toArray=function(){return[this.lng,this.lat]},Dl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Dl.prototype.distanceTo=function(u){var d=Math.PI/180,g=this.lat*d,A=u.lat*d,P=Math.sin(g)*Math.sin(A)+Math.cos(g)*Math.cos(A)*Math.cos((u.lng-this.lng)*d);return 63710088e-1*Math.acos(Math.min(P,1))},Dl.prototype.toBounds=function(u){u===void 0&&(u=0);var d=360*u/40075017,g=d/Math.cos(Math.PI/180*this.lat);return new cu(new Dl(this.lng-g,this.lat-d),new Dl(this.lng+g,this.lat+d))},Dl.convert=function(u){if(u instanceof Dl)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Dl(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Dl(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Fy=2*Math.PI*63710088e-1;function kd(u){return Fy*Math.cos(u*Math.PI/180)}function c1(u){return(180+u)/360}function Ag(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function By(u,d){return u/kd(d)}function ky(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}var id=function(u,d,g){g===void 0&&(g=0),this.x=+u,this.y=+d,this.z=+g};id.fromLngLat=function(u,d){d===void 0&&(d=0);var g=Dl.convert(u);return new id(c1(g.lng),Ag(g.lat),By(d,g.lat))},id.prototype.toLngLat=function(){return new Dl(360*this.x-180,ky(this.y))},id.prototype.toAltitude=function(){return this.z*kd(ky(this.y))},id.prototype.meterInMercatorCoordinateUnits=function(){return 1/Fy*(u=ky(this.y),1/Math.cos(u*Math.PI/180));var u};var Uv=function(u,d,g){this.z=u,this.x=d,this.y=g,this.key=zy(0,u,u,d,g)};Uv.prototype.equals=function(u){return this.z===u.z&&this.x===u.x&&this.y===u.y},Uv.prototype.url=function(u,d){var g,A,P,F,j,q=(A=this.y,P=this.z,F=Tg(256*(g=this.x),256*(A=Math.pow(2,P)-A-1),P),j=Tg(256*(g+1),256*(A+1),P),F[0]+","+F[1]+","+j[0]+","+j[1]),_e=function(Ne,Ze,ot){for(var Tt,Bt="",vn=Ne;vn>0;vn--)Bt+=(Ze&(Tt=1<<vn-1)?1:0)+(ot&Tt?2:0);return Bt}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_e).replace("{bbox-epsg-3857}",q)},Uv.prototype.getTilePoint=function(u){var d=Math.pow(2,this.z);return new ue(8192*(u.x*d-this.x),8192*(u.y*d-this.y))},Uv.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var rx=function(u,d){this.wrap=u,this.canonical=d,this.key=zy(u,d.z,d.z,d.x,d.y)},nc=function(u,d,g,A,P){this.overscaledZ=u,this.wrap=d,this.canonical=new Uv(g,+A,+P),this.key=zy(d,u,g,A,P)};function zy(u,d,g,A,P){(u*=2)<0&&(u=-1*u-1);var F=1<<g;return(F*F*u+F*P+A).toString(36)+g.toString(36)+d.toString(36)}nc.prototype.equals=function(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)},nc.prototype.scaledTo=function(u){var d=this.canonical.z-u;return u>this.canonical.z?new nc(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new nc(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)},nc.prototype.calculateScaledKey=function(u,d){var g=this.canonical.z-u;return u>this.canonical.z?zy(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):zy(this.wrap*+d,u,u,this.canonical.x>>g,this.canonical.y>>g)},nc.prototype.isChildOf=function(u){if(u.wrap!==this.wrap)return!1;var d=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d},nc.prototype.children=function(u){if(this.overscaledZ>=u)return[new nc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var d=this.canonical.z+1,g=2*this.canonical.x,A=2*this.canonical.y;return[new nc(d,this.wrap,d,g,A),new nc(d,this.wrap,d,g+1,A),new nc(d,this.wrap,d,g,A+1),new nc(d,this.wrap,d,g+1,A+1)]},nc.prototype.isLessThan=function(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))},nc.prototype.wrapped=function(){return new nc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},nc.prototype.unwrapTo=function(u){return new nc(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)},nc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},nc.prototype.toUnwrapped=function(){return new rx(this.wrap,this.canonical)},nc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},nc.prototype.getTilePoint=function(u){return this.canonical.getTilePoint(new id(u.x-this.wrap,u.y))},oo("CanonicalTileID",Uv),oo("OverscaledTileID",nc,{omit:["posMatrix"]});var iv=function(u,d,g){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(g&&g!=="mapbox"&&g!=="terrarium")return We('"'+g+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=d.height;var A=this.dim=d.height-2;this.data=new Uint32Array(d.data.buffer),this.encoding=g||"mapbox";for(var P=0;P<A;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(A,P)]=this.data[this._idx(A-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,A)]=this.data[this._idx(P,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)]};iv.prototype.get=function(u,d){var g=new Uint8Array(this.data.buffer),A=4*this._idx(u,d);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(g[A],g[A+1],g[A+2])},iv.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},iv.prototype._idx=function(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)},iv.prototype._unpackMapbox=function(u,d,g){return(256*u*256+256*d+g)/10-1e4},iv.prototype._unpackTerrarium=function(u,d,g){return 256*u+d+g/256-32768},iv.prototype.getPixels=function(){return new Hc({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},iv.prototype.backfillBorder=function(u,d,g){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");var A=d*this.dim,P=d*this.dim+this.dim,F=g*this.dim,j=g*this.dim+this.dim;switch(d){case-1:A=P-1;break;case 1:P=A+1}switch(g){case-1:F=j-1;break;case 1:j=F+1}for(var q=-d*this.dim,_e=-g*this.dim,Ne=F;Ne<j;Ne++)for(var Ze=A;Ze<P;Ze++)this.data[this._idx(Ze,Ne)]=u.data[this._idx(Ze+q,Ne+_e)]},oo("DEMData",iv);var jv=function(u){this._stringToNumber={},this._numberToString=[];for(var d=0;d<u.length;d++){var g=u[d];this._stringToNumber[g]=d,this._numberToString[d]=g}};jv.prototype.encode=function(u){return this._stringToNumber[u]},jv.prototype.decode=function(u){return this._numberToString[u]};var f1=function(u,d,g,A,P){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=g,u._y=A,this.properties=u.properties,this.id=P},ix={geometry:{configurable:!0}};ix.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ix.geometry.set=function(u){this._geometry=u},f1.prototype.toJSON=function(){var u={geometry:this.geometry};for(var d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u},Object.defineProperties(f1.prototype,ix);var Cg=function(){this.state={},this.stateChanges={},this.deletedStates={}};Cg.prototype.updateState=function(u,d,g){var A=String(d);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][A]=this.stateChanges[u][A]||{},le(this.stateChanges[u][A],g),this.deletedStates[u]===null)for(var P in this.deletedStates[u]={},this.state[u])P!==A&&(this.deletedStates[u][P]=null);else if(this.deletedStates[u]&&this.deletedStates[u][A]===null)for(var F in this.deletedStates[u][A]={},this.state[u][A])g[F]||(this.deletedStates[u][A][F]=null);else for(var j in g)this.deletedStates[u]&&this.deletedStates[u][A]&&this.deletedStates[u][A][j]===null&&delete this.deletedStates[u][A][j]},Cg.prototype.removeFeatureState=function(u,d,g){if(this.deletedStates[u]!==null){var A=String(d);if(this.deletedStates[u]=this.deletedStates[u]||{},g&&d!==void 0)this.deletedStates[u][A]!==null&&(this.deletedStates[u][A]=this.deletedStates[u][A]||{},this.deletedStates[u][A][g]=null);else if(d!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][A])for(g in this.deletedStates[u][A]={},this.stateChanges[u][A])this.deletedStates[u][A][g]=null;else this.deletedStates[u][A]=null;else this.deletedStates[u]=null}},Cg.prototype.getState=function(u,d){var g=String(d),A=le({},(this.state[u]||{})[g],(this.stateChanges[u]||{})[g]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){var P=this.deletedStates[u][d];if(P===null)return{};for(var F in P)delete A[F]}return A},Cg.prototype.initializeTileState=function(u,d){u.setFeatureState(this.state,d)},Cg.prototype.coalesceChanges=function(u,d){var g={};for(var A in this.stateChanges){this.state[A]=this.state[A]||{};var P={};for(var F in this.stateChanges[A])this.state[A][F]||(this.state[A][F]={}),le(this.state[A][F],this.stateChanges[A][F]),P[F]=this.state[A][F];g[A]=P}for(var j in this.deletedStates){this.state[j]=this.state[j]||{};var q={};if(this.deletedStates[j]===null)for(var _e in this.state[j])q[_e]={},this.state[j][_e]={};else for(var Ne in this.deletedStates[j]){if(this.deletedStates[j][Ne]===null)this.state[j][Ne]={};else for(var Ze=0,ot=Object.keys(this.deletedStates[j][Ne]);Ze<ot.length;Ze+=1)delete this.state[j][Ne][ot[Ze]];q[Ne]=this.state[j][Ne]}g[j]=g[j]||{},le(g[j],q)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(var Tt in u)u[Tt].setFeatureState(g,d)};var Yp=function(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Go(8192,16,0),this.grid3D=new Go(8192,16,0),this.featureIndexArray=new ft,this.promoteId=d};function h1(u,d,g,A,P){return yt(u,function(F,j){var q=d instanceof ip?d.get(j):null;return q&&q.evaluate?q.evaluate(g,A,P):q})}function Rm(u){for(var d=1/0,g=1/0,A=-1/0,P=-1/0,F=0,j=u;F<j.length;F+=1){var q=j[F];d=Math.min(d,q.x),g=Math.min(g,q.y),A=Math.max(A,q.x),P=Math.max(P,q.y)}return{minX:d,minY:g,maxX:A,maxY:P}}function yu(u,d){return d-u}Yp.prototype.insert=function(u,d,g,A,P,F){var j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,A,P);for(var q=F?this.grid3D:this.grid,_e=0;_e<d.length;_e++){for(var Ne=d[_e],Ze=[1/0,1/0,-1/0,-1/0],ot=0;ot<Ne.length;ot++){var Tt=Ne[ot];Ze[0]=Math.min(Ze[0],Tt.x),Ze[1]=Math.min(Ze[1],Tt.y),Ze[2]=Math.max(Ze[2],Tt.x),Ze[3]=Math.max(Ze[3],Tt.y)}Ze[0]<8192&&Ze[1]<8192&&Ze[2]>=0&&Ze[3]>=0&&q.insert(j,Ze[0],Ze[1],Ze[2],Ze[3])}},Yp.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new pf.VectorTile(new Pr(this.rawTileData)).layers,this.sourceLayerCoder=new jv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Yp.prototype.query=function(u,d,g,A){var P=this;this.loadVTLayers();for(var F=u.params||{},j=8192/u.tileSize/u.scale,q=jf(F.filter),_e=u.queryGeometry,Ne=u.queryPadding*j,Ze=Rm(_e),ot=this.grid.query(Ze.minX-Ne,Ze.minY-Ne,Ze.maxX+Ne,Ze.maxY+Ne),Tt=Rm(u.cameraQueryGeometry),Bt=this.grid3D.query(Tt.minX-Ne,Tt.minY-Ne,Tt.maxX+Ne,Tt.maxY+Ne,function(Fr,Br,$r,Ni){return function(eo,zo,go,$o,yo){for(var Ga=0,ua=eo;Ga<ua.length;Ga+=1){var Ro=ua[Ga];if(zo<=Ro.x&&go<=Ro.y&&$o>=Ro.x&&yo>=Ro.y)return!0}var Ka=[new ue(zo,go),new ue(zo,yo),new ue($o,yo),new ue($o,go)];if(eo.length>2){for(var Ho=0,is=Ka;Ho<is.length;Ho+=1)if(ih(eo,is[Ho]))return!0}for(var Uo=0;Uo<eo.length-1;Uo++)if(Mi(eo[Uo],eo[Uo+1],Ka))return!0;return!1}(u.cameraQueryGeometry,Fr-Ne,Br-Ne,$r+Ne,Ni+Ne)}),vn=0,_n=Bt;vn<_n.length;vn+=1)ot.push(_n[vn]);ot.sort(yu);for(var Hn,Ln={},fr=function(Fr){var Br=ot[Fr];if(Br!==Hn){Hn=Br;var $r=P.featureIndexArray.get(Br),Ni=null;P.loadMatchingFeature(Ln,$r.bucketIndex,$r.sourceLayerIndex,$r.featureIndex,q,F.layers,F.availableImages,d,g,A,function(eo,zo,go){return Ni||(Ni=Ss(eo)),zo.queryIntersectsFeature(_e,eo,go,Ni,P.z,u.transform,j,u.pixelPosMatrix)})}},_r=0;_r<ot.length;_r++)fr(_r);return Ln},Yp.prototype.loadMatchingFeature=function(u,d,g,A,P,F,j,q,_e,Ne,Ze){var ot=this.bucketLayerIDs[d];if(!F||function(eo,zo){for(var go=0;go<eo.length;go++)if(zo.indexOf(eo[go])>=0)return!0;return!1}(F,ot)){var Tt=this.sourceLayerCoder.decode(g),Bt=this.vtLayers[Tt].feature(A);if(P.needGeometry){var vn=vl(Bt,!0);if(!P.filter(new Aa(this.tileID.overscaledZ),vn,this.tileID.canonical))return}else if(!P.filter(new Aa(this.tileID.overscaledZ),Bt))return;for(var _n=this.getId(Bt,Tt),Hn=0;Hn<ot.length;Hn++){var Ln=ot[Hn];if(!(F&&F.indexOf(Ln)<0)){var fr=q[Ln];if(fr){var _r={};_n!==void 0&&Ne&&(_r=Ne.getState(fr.sourceLayer||"_geojsonTileLayer",_n));var Fr=le({},_e[Ln]);Fr.paint=h1(Fr.paint,fr.paint,Bt,_r,j),Fr.layout=h1(Fr.layout,fr.layout,Bt,_r,j);var Br=!Ze||Ze(Bt,fr,_r);if(Br){var $r=new f1(Bt,this.z,this.x,this.y,_n);$r.layer=Fr;var Ni=u[Ln];Ni===void 0&&(Ni=u[Ln]=[]),Ni.push({featureIndex:A,feature:$r,intersectionZ:Br})}}}}}},Yp.prototype.lookupSymbolFeatures=function(u,d,g,A,P,F,j,q){var _e={};this.loadVTLayers();for(var Ne=jf(P),Ze=0,ot=u;Ze<ot.length;Ze+=1)this.loadMatchingFeature(_e,g,A,ot[Ze],Ne,F,j,q,d);return _e},Yp.prototype.hasLayer=function(u){for(var d=0,g=this.bucketLayerIDs;d<g.length;d+=1)for(var A=0,P=g[d];A<P.length;A+=1)if(u===P[A])return!0;return!1},Yp.prototype.getId=function(u,d){var g=u.id;return this.promoteId&&typeof(g=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]])=="boolean"&&(g=Number(g)),g},oo("FeatureIndex",Yp,{omit:["rawTileData","sourceLayerCoder"]});var Fs=function(u,d){this.tileID=u,this.uid=Ee(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Fs.prototype.registerFadeDuration=function(u){var d=u+this.timeAdded;d<sr.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)},Fs.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Fs.prototype.loadVectorData=function(u,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){for(var A in u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(Ne,Ze){var ot={};if(!Ze)return ot;for(var Tt=function(){var _n=vn[Bt],Hn=_n.layerIds.map(function(_r){return Ze.getLayer(_r)}).filter(Boolean);if(Hn.length!==0){_n.layers=Hn,_n.stateDependentLayerIds&&(_n.stateDependentLayers=_n.stateDependentLayerIds.map(function(_r){return Hn.filter(function(Fr){return Fr.id===_r})[0]}));for(var Ln=0,fr=Hn;Ln<fr.length;Ln+=1)ot[fr[Ln].id]=_n}},Bt=0,vn=Ne;Bt<vn.length;Bt+=1)Tt();return ot}(u.buckets,d.style),this.hasSymbolBuckets=!1,this.buckets){var P=this.buckets[A];if(P instanceof Zi){if(this.hasSymbolBuckets=!0,!g)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var F in this.buckets){var j=this.buckets[F];if(j instanceof Zi&&j.hasRTLText){this.hasRTLText=!0,Uc.isLoading()||Uc.isLoaded()||Z0()!=="deferred"||dc();break}}for(var q in this.queryPadding=0,this.buckets){var _e=this.buckets[q];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(q).queryRadius(_e))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new S},Fs.prototype.unloadVectorData=function(){for(var u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Fs.prototype.getBucket=function(u){return this.buckets[u.id]},Fs.prototype.upload=function(u){for(var d in this.buckets){var g=this.buckets[d];g.uploadPending()&&g.upload(u)}var A=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new A0(u,this.imageAtlas.image,A.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new A0(u,this.glyphAtlasImage,A.ALPHA),this.glyphAtlasImage=null)},Fs.prototype.prepare=function(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)},Fs.prototype.queryRenderedFeatures=function(u,d,g,A,P,F,j,q,_e,Ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:A,cameraQueryGeometry:P,scale:F,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:q,params:j,queryPadding:this.queryPadding*_e},u,d,g):{}},Fs.prototype.querySourceFeatures=function(u,d){var g=this.latestFeatureIndex;if(g&&g.rawTileData){var A=g.loadVTLayers(),P=d?d.sourceLayer:"",F=A._geojsonTileLayer||A[P];if(F)for(var j=jf(d&&d.filter),q=this.tileID.canonical,_e=q.z,Ne=q.x,Ze=q.y,ot={z:_e,x:Ne,y:Ze},Tt=0;Tt<F.length;Tt++){var Bt=F.feature(Tt);if(j.needGeometry){var vn=vl(Bt,!0);if(!j.filter(new Aa(this.tileID.overscaledZ),vn,this.tileID.canonical))continue}else if(!j.filter(new Aa(this.tileID.overscaledZ),Bt))continue;var _n=g.getId(Bt,P),Hn=new f1(Bt,_e,Ne,Ze,_n);Hn.tile=ot,u.push(Hn)}}},Fs.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Fs.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Fs.prototype.setExpiryData=function(u){var d=this.expirationTime;if(u.cacheControl){var g=_t(u.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){var A=Date.now(),P=!1;if(this.expirationTime>A)P=!1;else if(d)if(this.expirationTime<d)P=!0;else{var F=this.expirationTime-d;F?this.expirationTime=A+Math.max(F,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Fs.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Fs.prototype.setFeatureState=function(u,d){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(u).length!==0){var g=this.latestFeatureIndex.loadVTLayers();for(var A in this.buckets)if(d.style.hasLayer(A)){var P=this.buckets[A],F=P.layers[0].sourceLayer||"_geojsonTileLayer",j=g[F],q=u[F];if(j&&q&&Object.keys(q).length!==0){P.update(q,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});var _e=d&&d.style&&d.style.getLayer(A);_e&&(this.queryPadding=Math.max(this.queryPadding,_e.queryRadius(P)))}}}},Fs.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Fs.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<sr.now()},Fs.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Fs.prototype.setHoldDuration=function(u){this.symbolFadeHoldUntil=sr.now()+u},Fs.prototype.setDependencies=function(u,d){for(var g={},A=0,P=d;A<P.length;A+=1)g[P[A]]=!0;this.dependencies[u]=g},Fs.prototype.hasDependency=function(u,d){for(var g=0,A=u;g<A.length;g+=1){var P=this.dependencies[A[g]];if(P){for(var F=0,j=d;F<j.length;F+=1)if(P[j[F]])return!0}}return!1};var ya=oe.performance,ov=function(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},ya.mark(this._marks.start)};ov.prototype.finish=function(){ya.mark(this._marks.end);var u=ya.getEntriesByName(this._marks.measure);return u.length===0&&(ya.measure(this._marks.measure,this._marks.start,this._marks.end),u=ya.getEntriesByName(this._marks.measure),ya.clearMarks(this._marks.start),ya.clearMarks(this._marks.end),ya.clearMeasures(this._marks.measure)),u},E.Actor=zv,E.AlphaImage=Qh,E.CanonicalTileID=Uv,E.CollisionBoxArray=S,E.Color=yn,E.DEMData=iv,E.DataConstantProperty=Bo,E.DictionaryCoder=jv,E.EXTENT=8192,E.ErrorEvent=qt,E.EvaluationParameters=Aa,E.Event=At,E.Evented=un,E.FeatureIndex=Yp,E.FillBucket=If,E.FillExtrusionBucket=ec,E.ImageAtlas=Jr,E.ImagePosition=no,E.LineBucket=Ac,E.LngLat=Dl,E.LngLatBounds=cu,E.MercatorCoordinate=id,E.ONE_EM=24,E.OverscaledTileID=nc,E.Point=ue,E.Point$1=ue,E.Properties=cl,E.Protobuf=Pr,E.RGBAImage=Hc,E.RequestManager=Pt,E.RequestPerformance=ov,E.ResourceType=Be,E.SegmentVector=Vt,E.SourceFeatureState=Cg,E.StructArrayLayout1ui2=Yh,E.StructArrayLayout2f1f2i16=Xh,E.StructArrayLayout2i4=Zh,E.StructArrayLayout3ui6=Vf,E.StructArrayLayout4i8=op,E.SymbolBucket=Zi,E.Texture=A0,E.Tile=Fs,E.Transitionable=mu,E.Uniform1f=Vi,E.Uniform1i=si,E.Uniform2f=Bi,E.Uniform3f=vo,E.Uniform4f=jo,E.UniformColor=Xo,E.UniformMatrix4f=cs,E.UnwrappedTileID=rx,E.ValidationError=Jt,E.WritingMode=Vo,E.ZoomHistory=ff,E.add=function(u,d,g){return u[0]=d[0]+g[0],u[1]=d[1]+g[1],u[2]=d[2]+g[2],u},E.addDynamicAttributes=bi,E.asyncAll=function(u,d,g){if(!u.length)return g(null,[]);var A=u.length,P=new Array(u.length),F=null;u.forEach(function(j,q){d(j,function(_e,Ne){_e&&(F=_e),P[q]=Ne,--A==0&&g(F,P)})})},E.bezier=te,E.bindAll=wt,E.browser=sr,E.cacheEntryPossiblyAdded=function(u){++dt>It&&(u.getActor().send("enforceCacheSizeLimit",vt),dt=0)},E.clamp=Pe,E.clearTileCache=function(u){var d=oe.caches.delete("mapbox-tiles");u&&d.catch(u).then(function(){return u()})},E.clipLine=Bd,E.clone=function(u){var d=new es(16);return d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},E.clone$1=Ce,E.clone$2=function(u){var d=new es(3);return d[0]=u[0],d[1]=u[1],d[2]=u[2],d},E.collisionCircleLayout=ke,E.config=nr,E.create=function(){var u=new es(16);return es!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},E.create$1=function(){var u=new es(9);return es!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u},E.create$2=function(){var u=new es(4);return es!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u},E.createCommonjsModule=he,E.createExpression=Oa,E.createLayout=gu,E.createStyleLayer=function(u){return u.type==="custom"?new Om(u):new Xp[u.type](u)},E.cross=function(u,d,g){var A=d[0],P=d[1],F=d[2],j=g[0],q=g[1],_e=g[2];return u[0]=P*_e-F*q,u[1]=F*j-A*_e,u[2]=A*q-P*j,u},E.deepEqual=function u(d,g){if(Array.isArray(d)){if(!Array.isArray(g)||d.length!==g.length)return!1;for(var A=0;A<d.length;A++)if(!u(d[A],g[A]))return!1;return!0}if(typeof d=="object"&&d!==null&&g!==null){if(typeof g!="object"||Object.keys(d).length!==Object.keys(g).length)return!1;for(var P in d)if(!u(d[P],g[P]))return!1;return!0}return d===g},E.dot=function(u,d){return u[0]*d[0]+u[1]*d[1]+u[2]*d[2]},E.dot$1=function(u,d){return u[0]*d[0]+u[1]*d[1]+u[2]*d[2]+u[3]*d[3]},E.ease=me,E.emitValidationErrors=Zo,E.endsWith=pt,E.enforceCacheSizeLimit=function(u){An(),$t&&$t.then(function(d){d.keys().then(function(g){for(var A=0;A<g.length-u;A++)d.delete(g[A])})})},E.evaluateSizeForFeature=ti,E.evaluateSizeForZoom=gl,E.evaluateVariableOffset=Kn,E.evented=d0,E.extend=le,E.featureFilter=jf,E.filterObject=Re,E.fromRotation=function(u,d){var g=Math.sin(d),A=Math.cos(d);return u[0]=A,u[1]=g,u[2]=0,u[3]=-g,u[4]=A,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},E.getAnchorAlignment=tl,E.getAnchorJustification=rr,E.getArrayBuffer=br,E.getImage=we,E.getJSON=function(u,d){return er(le(u,{type:"json"}),d)},E.getRTLTextPluginStatus=Z0,E.getReferrer=Dt,E.getVideo=function(u,d){var g,A,P=oe.document.createElement("video");P.muted=!0,P.onloadstart=function(){d(null,P)};for(var F=0;F<u.length;F++){var j=oe.document.createElement("source");g=u[F],A=void 0,(A=oe.document.createElement("a")).href=g,(A.protocol!==oe.document.location.protocol||A.host!==oe.document.location.host)&&(P.crossOrigin="Anonymous"),j.src=u[F],P.appendChild(j)}return{cancel:function(){}}},E.identity=Ou,E.invert=function(u,d){var g=d[0],A=d[1],P=d[2],F=d[3],j=d[4],q=d[5],_e=d[6],Ne=d[7],Ze=d[8],ot=d[9],Tt=d[10],Bt=d[11],vn=d[12],_n=d[13],Hn=d[14],Ln=d[15],fr=g*q-A*j,_r=g*_e-P*j,Fr=g*Ne-F*j,Br=A*_e-P*q,$r=A*Ne-F*q,Ni=P*Ne-F*_e,eo=Ze*_n-ot*vn,zo=Ze*Hn-Tt*vn,go=Ze*Ln-Bt*vn,$o=ot*Hn-Tt*_n,yo=ot*Ln-Bt*_n,Ga=Tt*Ln-Bt*Hn,ua=fr*Ga-_r*yo+Fr*$o+Br*go-$r*zo+Ni*eo;return ua?(u[0]=(q*Ga-_e*yo+Ne*$o)*(ua=1/ua),u[1]=(P*yo-A*Ga-F*$o)*ua,u[2]=(_n*Ni-Hn*$r+Ln*Br)*ua,u[3]=(Tt*$r-ot*Ni-Bt*Br)*ua,u[4]=(_e*go-j*Ga-Ne*zo)*ua,u[5]=(g*Ga-P*go+F*zo)*ua,u[6]=(Hn*Fr-vn*Ni-Ln*_r)*ua,u[7]=(Ze*Ni-Tt*Fr+Bt*_r)*ua,u[8]=(j*yo-q*go+Ne*eo)*ua,u[9]=(A*go-g*yo-F*eo)*ua,u[10]=(vn*$r-_n*Fr+Ln*fr)*ua,u[11]=(ot*Fr-Ze*$r-Bt*fr)*ua,u[12]=(q*zo-j*$o-_e*eo)*ua,u[13]=(g*$o-A*zo+P*eo)*ua,u[14]=(_n*_r-vn*Br-Hn*fr)*ua,u[15]=(Ze*Br-ot*_r+Tt*fr)*ua,u):null},E.isChar=Ui,E.isMapboxURL=zt,E.keysDifference=function(u,d){var g=[];for(var A in u)A in d||g.push(A);return g},E.makeRequest=er,E.mapObject=yt,E.mercatorXfromLng=c1,E.mercatorYfromLat=Ag,E.mercatorZfromAltitude=By,E.mul=_0,E.multiply=Wl,E.mvt=pf,E.nextPowerOfTwo=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},E.normalize=function(u,d){var g=d[0],A=d[1],P=d[2],F=g*g+A*A+P*P;return F>0&&(F=1/Math.sqrt(F)),u[0]=d[0]*F,u[1]=d[1]*F,u[2]=d[2]*F,u},E.number=As,E.offscreenCanvasSupported=xe,E.ortho=function(u,d,g,A,P,F,j){var q=1/(d-g),_e=1/(A-P),Ne=1/(F-j);return u[0]=-2*q,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*_e,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*Ne,u[11]=0,u[12]=(d+g)*q,u[13]=(P+A)*_e,u[14]=(j+F)*Ne,u[15]=1,u},E.parseGlyphPBF=function(u){return new Pr(u).readFields(ci,[])},E.pbf=Pr,E.performSymbolLayout=function(u,d,g,A,P,F,j){u.createArrays(),u.tilePixelRatio=8192/(512*u.overscaling),u.compareText={},u.iconsNeedLinear=!1;var q=u.layers[0].layout,_e=u.layers[0]._unevaluatedLayout._values,Ne={};if(u.textSizeData.kind==="composite"){var Ze=u.textSizeData,ot=Ze.maxZoom;Ne.compositeTextSizes=[_e["text-size"].possiblyEvaluate(new Aa(Ze.minZoom),j),_e["text-size"].possiblyEvaluate(new Aa(ot),j)]}if(u.iconSizeData.kind==="composite"){var Tt=u.iconSizeData,Bt=Tt.maxZoom;Ne.compositeIconSizes=[_e["icon-size"].possiblyEvaluate(new Aa(Tt.minZoom),j),_e["icon-size"].possiblyEvaluate(new Aa(Bt),j)]}Ne.layoutTextSize=_e["text-size"].possiblyEvaluate(new Aa(u.zoom+1),j),Ne.layoutIconSize=_e["icon-size"].possiblyEvaluate(new Aa(u.zoom+1),j),Ne.textMaxSize=_e["text-size"].possiblyEvaluate(new Aa(18));for(var vn=24*q.get("text-line-height"),_n=q.get("text-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",Hn=q.get("text-keep-upright"),Ln=q.get("text-size"),fr=function(){var Br=Fr[_r],$r=q.get("text-font").evaluate(Br,{},j).join(","),Ni=Ln.evaluate(Br,{},j),eo=Ne.layoutTextSize.evaluate(Br,{},j),zo=Ne.layoutIconSize.evaluate(Br,{},j),go={horizontal:{},vertical:void 0},$o=Br.text,yo=[0,0];if($o){var Ga=$o.toString(),ua=24*q.get("text-letter-spacing").evaluate(Br,{},j),Ro=function(ns){for(var Ks=0,js=ns;Ks<js.length;Ks+=1)if(ys=js[Ks].charCodeAt(0),Ui.Arabic(ys)||Ui["Arabic Supplement"](ys)||Ui["Arabic Extended-A"](ys)||Ui["Arabic Presentation Forms-A"](ys)||Ui["Arabic Presentation Forms-B"](ys))return!1;var ys;return!0}(Ga)?ua:0,Ka=q.get("text-anchor").evaluate(Br,{},j),Ho=q.get("text-variable-anchor");if(!Ho){var is=q.get("text-radial-offset").evaluate(Br,{},j);yo=is?Kn(Ka,[24*is,Vn]):q.get("text-offset").evaluate(Br,{},j).map(function(ns){return 24*ns})}var Uo=_n?"center":q.get("text-justify").evaluate(Br,{},j),Ms=q.get("symbol-placement"),nl=Ms==="point"?24*q.get("text-max-width").evaluate(Br,{},j):0,Yl=function(){u.allowVerticalPlacement&&Af(Ga)&&(go.vertical=va($o,d,g,P,$r,nl,vn,Ka,"left",Ro,yo,Vo.vertical,!0,Ms,eo,Ni))};if(!_n&&Ho){for(var Ll=Uo==="auto"?Ho.map(function(ns){return rr(ns)}):[Uo],El=!1,$l=0;$l<Ll.length;$l++){var ql=Ll[$l];if(!go.horizontal[ql])if(El)go.horizontal[ql]=go.horizontal[0];else{var _u=va($o,d,g,P,$r,nl,vn,"center",ql,Ro,yo,Vo.horizontal,!1,Ms,eo,Ni);_u&&(go.horizontal[ql]=_u,El=_u.positionedLines.length===1)}}Yl()}else{Uo==="auto"&&(Uo=rr(Ka));var Gc=va($o,d,g,P,$r,nl,vn,Ka,Uo,Ro,yo,Vo.horizontal,!1,Ms,eo,Ni);Gc&&(go.horizontal[Uo]=Gc),Yl(),Af(Ga)&&_n&&Hn&&(go.vertical=va($o,d,g,P,$r,nl,vn,Ka,Uo,Ro,yo,Vo.vertical,!1,Ms,eo,Ni))}}var Vu=void 0,Wc=!1;if(Br.icon&&Br.icon.name){var zl=A[Br.icon.name];zl&&(Vu=function(ns,Ks,js){var ys=tl(js),Zc=Ks[0]-ns.displaySize[0]*ys.horizontalAlign,Mc=Ks[1]-ns.displaySize[1]*ys.verticalAlign;return{image:ns,top:Mc,bottom:Mc+ns.displaySize[1],left:Zc,right:Zc+ns.displaySize[0]}}(P[Br.icon.name],q.get("icon-offset").evaluate(Br,{},j),q.get("icon-anchor").evaluate(Br,{},j)),Wc=zl.sdf,u.sdfIcons===void 0?u.sdfIcons=zl.sdf:u.sdfIcons!==zl.sdf&&We("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(zl.pixelRatio!==u.pixelRatio||q.get("icon-rotate").constantOr(1)!==0)&&(u.iconsNeedLinear=!0))}var rc=Zn(go.horizontal)||go.vertical;u.iconsInText=!!rc&&rc.iconsInText,(rc||Vu)&&function(ns,Ks,js,ys,Zc,Mc,hl,bu,Rc,Rs,Vs){var lh=Mc.textMaxSize.evaluate(Ks,{});lh===void 0&&(lh=hl);var zd,al=ns.layers[0].layout,gp=al.get("icon-offset").evaluate(Ks,{},Vs),od=Zn(js.horizontal),ic=hl/24,yp=ns.tilePixelRatio*ic,av=ns.tilePixelRatio*lh/24,_p=ns.tilePixelRatio*bu,Vv=ns.tilePixelRatio*al.get("symbol-spacing"),Og=al.get("text-padding")*ns.tilePixelRatio,sv=al.get("icon-padding")*ns.tilePixelRatio,Hv=al.get("text-max-angle")/180*Math.PI,Pm=al.get("text-rotation-alignment")==="map"&&al.get("symbol-placement")!=="point",$p=al.get("icon-rotation-alignment")==="map"&&al.get("symbol-placement")!=="point",bp=al.get("symbol-placement"),Im=Vv/2,lv=al.get("icon-text-fit");ys&&lv!=="none"&&(ns.allowVerticalPlacement&&js.vertical&&(zd=uu(ys,js.vertical,lv,al.get("icon-text-fit-padding"),gp,ic)),od&&(ys=uu(ys,od,lv,al.get("icon-text-fit-padding"),gp,ic)));var qp=function(ox,Zv){Zv.x<0||Zv.x>=8192||Zv.y<0||Zv.y>=8192||function(Kl,Ah,ax,Ep,Nm,v1,Hy,Jp,Gy,R0,Wy,Zy,m1,sx,Pg,fv,Xy,g1,Ig,y1,Ch,Fm,Yy,Sp,ma){var _1,ni,Df,Oh,Xv,jd=Kl.addToLineVertexArray(Ah,ax),Dg=0,Bm=0,$y=0,b1=0,qy=-1,e0=-1,Ru={},yl=ln(""),ch=0,x1=0;if(Jp._unevaluatedLayout.getValue("text-radial-offset")===void 0?(ch=(_1=Jp.layout.get("text-offset").evaluate(Ch,{},Sp).map(function(Tp){return 24*Tp}))[0],x1=_1[1]):(ch=24*Jp.layout.get("text-radial-offset").evaluate(Ch,{},Sp),x1=Vn),Kl.allowVerticalPlacement&&Ep.vertical){var Ky=Jp.layout.get("text-rotate").evaluate(Ch,{},Sp)+90;Oh=new Ya(Gy,Ah,R0,Wy,Zy,Ep.vertical,m1,sx,Pg,Ky),Hy&&(Xv=new Ya(Gy,Ah,R0,Wy,Zy,Hy,Xy,g1,Pg,Ky))}if(Nm){var Lg=Jp.layout.get("icon-rotate").evaluate(Ch,{}),Qy=Jp.layout.get("icon-text-fit")!=="none",Xc=bn(Nm,Lg,Yy,Qy),km=Hy?bn(Hy,Lg,Yy,Qy):void 0;Df=new Ya(Gy,Ah,R0,Wy,Zy,Nm,Xy,g1,!1,Lg),Dg=4*Xc.length;var E1=Kl.iconSizeData,Yv=null;E1.kind==="source"?(Yv=[128*Jp.layout.get("icon-size").evaluate(Ch,{})])[0]>32640&&We(Kl.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):E1.kind==="composite"&&((Yv=[128*Fm.compositeIconSizes[0].evaluate(Ch,{},Sp),128*Fm.compositeIconSizes[1].evaluate(Ch,{},Sp)])[0]>32640||Yv[1]>32640)&&We(Kl.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Kl.addSymbols(Kl.icon,Xc,Yv,y1,Ig,Ch,!1,Ah,jd.lineStartIndex,jd.lineLength,-1,Sp),qy=Kl.icon.placedSymbolArray.length-1,km&&(Bm=4*km.length,Kl.addSymbols(Kl.icon,km,Yv,y1,Ig,Ch,Vo.vertical,Ah,jd.lineStartIndex,jd.lineLength,-1,Sp),e0=Kl.icon.placedSymbolArray.length-1)}for(var P0 in Ep.horizontal){var Mh=Ep.horizontal[P0];if(!ni){yl=ln(Mh.text);var sd=Jp.layout.get("text-rotate").evaluate(Ch,{},Sp);ni=new Ya(Gy,Ah,R0,Wy,Zy,Mh,m1,sx,Pg,sd)}var $v=Mh.positionedLines.length===1;if($y+=xn(Kl,Ah,Mh,v1,Jp,Pg,Ch,fv,jd,Ep.vertical?Vo.horizontal:Vo.horizontalOnly,$v?Object.keys(Ep.horizontal):[P0],Ru,qy,Fm,Sp),$v)break}Ep.vertical&&(b1+=xn(Kl,Ah,Ep.vertical,v1,Jp,Pg,Ch,fv,jd,Vo.vertical,["vertical"],Ru,e0,Fm,Sp));var Ia=ni?ni.boxStartIndex:Kl.collisionBoxArray.length,Jy=ni?ni.boxEndIndex:Kl.collisionBoxArray.length,e_=Oh?Oh.boxStartIndex:Kl.collisionBoxArray.length,Ul=Oh?Oh.boxEndIndex:Kl.collisionBoxArray.length,lx=Df?Df.boxStartIndex:Kl.collisionBoxArray.length,wp=Df?Df.boxEndIndex:Kl.collisionBoxArray.length,Pu=Xv?Xv.boxStartIndex:Kl.collisionBoxArray.length,JE=Xv?Xv.boxEndIndex:Kl.collisionBoxArray.length,Lf=-1,zm=function(Tp,Co){return Tp&&Tp.circleDiameter?Math.max(Tp.circleDiameter,Co):Co};Lf=zm(ni,Lf),Lf=zm(Oh,Lf),Lf=zm(Df,Lf);var mc=(Lf=zm(Xv,Lf))>-1?1:0;mc&&(Lf*=ma/24),Kl.glyphOffsetArray.length>=Zi.MAX_GLYPHS&&We("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ch.sortKey!==void 0&&Kl.addToSortKeyRanges(Kl.symbolInstances.length,Ch.sortKey),Kl.symbolInstances.emplaceBack(Ah.x,Ah.y,Ru.right>=0?Ru.right:-1,Ru.center>=0?Ru.center:-1,Ru.left>=0?Ru.left:-1,Ru.vertical||-1,qy,e0,yl,Ia,Jy,e_,Ul,lx,wp,Pu,JE,R0,$y,b1,Dg,Bm,mc,0,m1,ch,x1,Lf)}(ns,Zv,ox,js,ys,Zc,zd,ns.layers[0],ns.collisionBoxArray,Ks.index,Ks.sourceLayerIndex,ns.index,yp,Og,Pm,Rc,_p,sv,$p,gp,Ks,Mc,Rs,Vs,hl)};if(bp==="line")for(var Gv=0,uv=Bd(Ks.geometry,0,0,8192,8192);Gv<uv.length;Gv+=1)for(var cv=uv[Gv],Kp=0,xp=Xl(cv,Vv,Hv,js.vertical||od,ys,24,av,ns.overscaling,8192);Kp<xp.length;Kp+=1){var Mg=xp[Kp];od&&en(ns,od.text,Im,Mg)||qp(cv,Mg)}else if(bp==="line-center")for(var Dm=0,C0=Ks.geometry;Dm<C0.length;Dm+=1){var uh=C0[Dm];if(uh.length>1){var Rg=gs(uh,Hv,js.vertical||od,ys,24,av);Rg&&qp(uh,Rg)}}else if(Ks.type==="Polygon")for(var O0=0,Uy=Dv(Ks.geometry,0);O0<Uy.length;O0+=1){var Ud=Uy[O0],Qp=Rn(Ud,16);qp(Ud[0],new ml(Qp.x,Qp.y,0))}else if(Ks.type==="LineString")for(var ad=0,Wv=Ks.geometry;ad<Wv.length;ad+=1){var M0=Wv[ad];qp(M0,new ml(M0[0].x,M0[0].y,0))}else if(Ks.type==="Point")for(var jy=0,d1=Ks.geometry;jy<d1.length;jy+=1)for(var p1=0,Vy=d1[jy];p1<Vy.length;p1+=1){var Lm=Vy[p1];qp([Lm],new ml(Lm.x,Lm.y,0))}}(u,Br,go,Vu,A,Ne,eo,zo,yo,Wc,j)},_r=0,Fr=u.features;_r<Fr.length;_r+=1)fr();F&&u.generateCollisionDebugBuffers()},E.perspective=function(u,d,g,A,P){var F,j=1/Math.tan(d/2);return u[0]=j/g,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=j,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,P!=null&&P!==1/0?(u[10]=(P+A)*(F=1/(A-P)),u[14]=2*P*A*F):(u[10]=-1,u[14]=-2*A),u},E.pick=function(u,d){for(var g={},A=0;A<d.length;A++){var P=d[A];P in u&&(g[P]=u[P])}return g},E.plugin=Uc,E.polygonIntersectsPolygon=Wf,E.postMapLoadEvent=dn,E.postTurnstileEvent=Wn,E.potpack=ha,E.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],E.register=oo,E.registerForPluginStateChange=function(u){return u({pluginStatus:Yu,pluginURL:th}),d0.on("pluginStateChange",u),u},E.renderColorRamp=Ty,E.rotate=function(u,d,g){var A=d[0],P=d[1],F=d[2],j=d[3],q=Math.sin(g),_e=Math.cos(g);return u[0]=A*_e+F*q,u[1]=P*_e+j*q,u[2]=A*-q+F*_e,u[3]=P*-q+j*_e,u},E.rotateX=function(u,d,g){var A=Math.sin(g),P=Math.cos(g),F=d[4],j=d[5],q=d[6],_e=d[7],Ne=d[8],Ze=d[9],ot=d[10],Tt=d[11];return d!==u&&(u[0]=d[0],u[1]=d[1],u[2]=d[2],u[3]=d[3],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15]),u[4]=F*P+Ne*A,u[5]=j*P+Ze*A,u[6]=q*P+ot*A,u[7]=_e*P+Tt*A,u[8]=Ne*P-F*A,u[9]=Ze*P-j*A,u[10]=ot*P-q*A,u[11]=Tt*P-_e*A,u},E.rotateZ=function(u,d,g){var A=Math.sin(g),P=Math.cos(g),F=d[0],j=d[1],q=d[2],_e=d[3],Ne=d[4],Ze=d[5],ot=d[6],Tt=d[7];return d!==u&&(u[8]=d[8],u[9]=d[9],u[10]=d[10],u[11]=d[11],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15]),u[0]=F*P+Ne*A,u[1]=j*P+Ze*A,u[2]=q*P+ot*A,u[3]=_e*P+Tt*A,u[4]=Ne*P-F*A,u[5]=Ze*P-j*A,u[6]=ot*P-q*A,u[7]=Tt*P-_e*A,u},E.scale=function(u,d,g){var A=g[0],P=g[1],F=g[2];return u[0]=d[0]*A,u[1]=d[1]*A,u[2]=d[2]*A,u[3]=d[3]*A,u[4]=d[4]*P,u[5]=d[5]*P,u[6]=d[6]*P,u[7]=d[7]*P,u[8]=d[8]*F,u[9]=d[9]*F,u[10]=d[10]*F,u[11]=d[11]*F,u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15],u},E.scale$1=function(u,d,g){return u[0]=d[0]*g,u[1]=d[1]*g,u[2]=d[2]*g,u[3]=d[3]*g,u},E.scale$2=function(u,d,g){return u[0]=d[0]*g,u[1]=d[1]*g,u[2]=d[2]*g,u},E.setCacheLimits=function(u,d){vt=u,It=d},E.setRTLTextPlugin=function(u,d,g){if(g===void 0&&(g=!1),Yu==="deferred"||Yu==="loading"||Yu==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");th=sr.resolveURL(u),Yu="deferred",xh=d,Od(),g||dc()},E.sphericalToCartesian=function(u){var d=u[0],g=u[1],A=u[2];return g+=90,g*=Math.PI/180,A*=Math.PI/180,{x:d*Math.cos(g)*Math.sin(A),y:d*Math.sin(g)*Math.sin(A),z:d*Math.cos(A)}},E.sqrLen=function(u){var d=u[0],g=u[1];return d*d+g*g},E.styleSpec=St,E.sub=function(u,d,g){return u[0]=d[0]-g[0],u[1]=d[1]-g[1],u[2]=d[2]-g[2],u},E.symbolSize=Ma,E.transformMat3=function(u,d,g){var A=d[0],P=d[1],F=d[2];return u[0]=A*g[0]+P*g[3]+F*g[6],u[1]=A*g[1]+P*g[4]+F*g[7],u[2]=A*g[2]+P*g[5]+F*g[8],u},E.transformMat4=Pd,E.translate=function(u,d,g){var A,P,F,j,q,_e,Ne,Ze,ot,Tt,Bt,vn,_n=g[0],Hn=g[1],Ln=g[2];return d===u?(u[12]=d[0]*_n+d[4]*Hn+d[8]*Ln+d[12],u[13]=d[1]*_n+d[5]*Hn+d[9]*Ln+d[13],u[14]=d[2]*_n+d[6]*Hn+d[10]*Ln+d[14],u[15]=d[3]*_n+d[7]*Hn+d[11]*Ln+d[15]):(P=d[1],F=d[2],j=d[3],q=d[4],_e=d[5],Ne=d[6],Ze=d[7],ot=d[8],Tt=d[9],Bt=d[10],vn=d[11],u[0]=A=d[0],u[1]=P,u[2]=F,u[3]=j,u[4]=q,u[5]=_e,u[6]=Ne,u[7]=Ze,u[8]=ot,u[9]=Tt,u[10]=Bt,u[11]=vn,u[12]=A*_n+q*Hn+ot*Ln+d[12],u[13]=P*_n+_e*Hn+Tt*Ln+d[13],u[14]=F*_n+Ne*Hn+Bt*Ln+d[14],u[15]=j*_n+Ze*Hn+vn*Ln+d[15]),u},E.triggerPluginCompletionEvent=h0,E.uniqueId=Ee,E.validateCustomStyleLayer=function(u){var d=[],g=u.id;return g===void 0&&d.push({message:"layers."+g+': missing required property "id"'}),u.render===void 0&&d.push({message:"layers."+g+': missing required method "render"'}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&d.push({message:"layers."+g+': property "renderingMode" must be either "2d" or "3d"'}),d},E.validateLight=zr,E.validateStyle=ur,E.values=function(u){var d=[];for(var g in u)d.push(u[g]);return d},E.vectorTile=pf,E.version="1.13.3",E.warnOnce=We,E.webpSupported=Ft,E.window=oe,E.wrap=$}),W(["./shared"],function(E){"use strict";function he(Oe){var we=typeof Oe;if(we==="number"||we==="boolean"||we==="string"||Oe==null)return JSON.stringify(Oe);if(Array.isArray(Oe)){for(var Ve="[",it=0,At=Oe;it<At.length;it+=1)Ve+=he(At[it])+",";return Ve+"]"}for(var qt=Object.keys(Oe).sort(),un="{",St=0;St<qt.length;St++)un+=JSON.stringify(qt[St])+":"+he(Oe[qt[St]])+",";return un+"}"}function ee(Oe){for(var we="",Ve=0,it=E.refProperties;Ve<it.length;Ve+=1)we+="/"+he(Oe[it[Ve]]);return we}var se=function(Oe){this.keyCache={},Oe&&this.replace(Oe)};se.prototype.replace=function(Oe){this._layerConfigs={},this._layers={},this.update(Oe,[])},se.prototype.update=function(Oe,we){for(var Ve=this,it=0,At=Oe;it<At.length;it+=1){var qt=At[it];this._layerConfigs[qt.id]=qt;var un=this._layers[qt.id]=E.createStyleLayer(qt);un._featureFilter=E.featureFilter(un.filter),this.keyCache[qt.id]&&delete this.keyCache[qt.id]}for(var St=0,Jt=we;St<Jt.length;St+=1){var Qn=Jt[St];delete this.keyCache[Qn],delete this._layerConfigs[Qn],delete this._layers[Qn]}this.familiesBySource={};for(var Er=0,Gr=function(di,xi){for(var Fo={},Ai=0;Ai<di.length;Ai++){var ea=xi&&xi[di[Ai].id]||ee(di[Ai]);xi&&(xi[di[Ai].id]=ea);var _a=Fo[ea];_a||(_a=Fo[ea]=[]),_a.push(di[Ai])}var fi=[];for(var Ji in Fo)fi.push(Fo[Ji]);return fi}(E.values(this._layerConfigs),this.keyCache);Er<Gr.length;Er+=1){var mr=Gr[Er].map(function(di){return Ve._layers[di.id]}),Hr=mr[0];if(Hr.visibility!=="none"){var wi=Hr.source||"",Pi=this.familiesBySource[wi];Pi||(Pi=this.familiesBySource[wi]={});var wr=Hr.sourceLayer||"_geojsonTileLayer",gi=Pi[wr];gi||(gi=Pi[wr]=[]),gi.push(mr)}}};var ue=function(Oe){var we={},Ve=[];for(var it in Oe){var At=Oe[it],qt=we[it]={};for(var un in At){var St=At[+un];if(St&&St.bitmap.width!==0&&St.bitmap.height!==0){var Jt={x:0,y:0,w:St.bitmap.width+2,h:St.bitmap.height+2};Ve.push(Jt),qt[un]={rect:Jt,metrics:St.metrics}}}}var Qn=E.potpack(Ve),Er=new E.AlphaImage({width:Qn.w||1,height:Qn.h||1});for(var Gr in Oe){var mr=Oe[Gr];for(var Hr in mr){var wi=mr[+Hr];if(wi&&wi.bitmap.width!==0&&wi.bitmap.height!==0){var Pi=we[Gr][Hr].rect;E.AlphaImage.copy(wi.bitmap,Er,{x:0,y:0},{x:Pi.x+1,y:Pi.y+1},wi.bitmap)}}}this.image=Er,this.positions=we};E.register("GlyphAtlas",ue);var be=function(Oe){this.tileID=new E.OverscaledTileID(Oe.tileID.overscaledZ,Oe.tileID.wrap,Oe.tileID.canonical.z,Oe.tileID.canonical.x,Oe.tileID.canonical.y),this.uid=Oe.uid,this.zoom=Oe.zoom,this.pixelRatio=Oe.pixelRatio,this.tileSize=Oe.tileSize,this.source=Oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Oe.showCollisionBoxes,this.collectResourceTiming=!!Oe.collectResourceTiming,this.returnDependencies=!!Oe.returnDependencies,this.promoteId=Oe.promoteId};function oe(Oe,we,Ve){for(var it=new E.EvaluationParameters(we),At=0,qt=Oe;At<qt.length;At+=1)qt[At].recalculate(it,Ve)}function Ge(Oe,we){var Ve=E.getArrayBuffer(Oe.request,function(it,At,qt,un){it?we(it):At&&we(null,{vectorTile:new E.vectorTile.VectorTile(new E.pbf(At)),rawData:At,cacheControl:qt,expires:un})});return function(){Ve.cancel(),we()}}be.prototype.parse=function(Oe,we,Ve,it,At){var qt=this;this.status="parsing",this.data=Oe,this.collisionBoxArray=new E.CollisionBoxArray;var un=new E.DictionaryCoder(Object.keys(Oe.layers).sort()),St=new E.FeatureIndex(this.tileID,this.promoteId);St.bucketLayerIDs=[];var Jt,Qn,Er,Gr,mr={},Hr={featureIndex:St,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ve},wi=we.familiesBySource[this.source];for(var Pi in wi){var wr=Oe.layers[Pi];if(wr){wr.version===1&&E.warnOnce('Vector tile source "'+this.source+'" layer "'+Pi+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var gi=un.encode(Pi),di=[],xi=0;xi<wr.length;xi++){var Fo=wr.feature(xi),Ai=St.getId(Fo,Pi);di.push({feature:Fo,id:Ai,index:xi,sourceLayerIndex:gi})}for(var ea=0,_a=wi[Pi];ea<_a.length;ea+=1){var fi=_a[ea],Ji=fi[0];Ji.minzoom&&this.zoom<Math.floor(Ji.minzoom)||Ji.maxzoom&&this.zoom>=Ji.maxzoom||Ji.visibility!=="none"&&(oe(fi,this.zoom,Ve),(mr[Ji.id]=Ji.createBucket({index:St.bucketLayerIDs.length,layers:fi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:gi,sourceID:this.source})).populate(di,Hr,this.tileID.canonical),St.bucketLayerIDs.push(fi.map(function(Fn){return Fn.id})))}}}var $e=E.mapObject(Hr.glyphDependencies,function(Fn){return Object.keys(Fn).map(Number)});Object.keys($e).length?it.send("getGlyphs",{uid:this.uid,stacks:$e},function(Fn,Bn){Jt||(Jt=Fn,Qn=Bn,hn.call(qt))}):Qn={};var ht=Object.keys(Hr.iconDependencies);ht.length?it.send("getImages",{icons:ht,source:this.source,tileID:this.tileID,type:"icons"},function(Fn,Bn){Jt||(Jt=Fn,Er=Bn,hn.call(qt))}):Er={};var Ht=Object.keys(Hr.patternDependencies);function hn(){if(Jt)return At(Jt);if(Qn&&Er&&Gr){var Fn=new ue(Qn),Bn=new E.ImageAtlas(Er,Gr);for(var yn in mr){var On=mr[yn];On instanceof E.SymbolBucket?(oe(On.layers,this.zoom,Ve),E.performSymbolLayout(On,Qn,Fn.positions,Er,Bn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):On.hasPattern&&(On instanceof E.LineBucket||On instanceof E.FillBucket||On instanceof E.FillExtrusionBucket)&&(oe(On.layers,this.zoom,Ve),On.addFeatures(Hr,this.tileID.canonical,Bn.patternPositions))}this.status="done",At(null,{buckets:E.values(mr).filter(function(pr){return!pr.isEmpty()}),featureIndex:St,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fn.image,imageAtlas:Bn,glyphMap:this.returnDependencies?Qn:null,iconMap:this.returnDependencies?Er:null,glyphPositions:this.returnDependencies?Fn.positions:null})}}Ht.length?it.send("getImages",{icons:Ht,source:this.source,tileID:this.tileID,type:"patterns"},function(Fn,Bn){Jt||(Jt=Fn,Gr=Bn,hn.call(qt))}):Gr={},hn.call(this)};var te=function(Oe,we,Ve,it){this.actor=Oe,this.layerIndex=we,this.availableImages=Ve,this.loadVectorData=it||Ge,this.loading={},this.loaded={}};te.prototype.loadTile=function(Oe,we){var Ve=this,it=Oe.uid;this.loading||(this.loading={});var At=!!(Oe&&Oe.request&&Oe.request.collectResourceTiming)&&new E.RequestPerformance(Oe.request),qt=this.loading[it]=new be(Oe);qt.abort=this.loadVectorData(Oe,function(un,St){if(delete Ve.loading[it],un||!St)return qt.status="done",Ve.loaded[it]=qt,we(un);var Jt=St.rawData,Qn={};St.expires&&(Qn.expires=St.expires),St.cacheControl&&(Qn.cacheControl=St.cacheControl);var Er={};if(At){var Gr=At.finish();Gr&&(Er.resourceTiming=JSON.parse(JSON.stringify(Gr)))}qt.vectorTile=St.vectorTile,qt.parse(St.vectorTile,Ve.layerIndex,Ve.availableImages,Ve.actor,function(mr,Hr){if(mr||!Hr)return we(mr);we(null,E.extend({rawTileData:Jt.slice(0)},Hr,Qn,Er))}),Ve.loaded=Ve.loaded||{},Ve.loaded[it]=qt})},te.prototype.reloadTile=function(Oe,we){var Ve=this,it=this.loaded,At=Oe.uid,qt=this;if(it&&it[At]){var un=it[At];un.showCollisionBoxes=Oe.showCollisionBoxes;var St=function(Jt,Qn){var Er=un.reloadCallback;Er&&(delete un.reloadCallback,un.parse(un.vectorTile,qt.layerIndex,Ve.availableImages,qt.actor,Er)),we(Jt,Qn)};un.status==="parsing"?un.reloadCallback=St:un.status==="done"&&(un.vectorTile?un.parse(un.vectorTile,this.layerIndex,this.availableImages,this.actor,St):St())}},te.prototype.abortTile=function(Oe,we){var Ve=this.loading,it=Oe.uid;Ve&&Ve[it]&&Ve[it].abort&&(Ve[it].abort(),delete Ve[it]),we()},te.prototype.removeTile=function(Oe,we){var Ve=this.loaded,it=Oe.uid;Ve&&Ve[it]&&delete Ve[it],we()};var me=E.window.ImageBitmap,Pe=function(){this.loaded={}};function $(Oe,we){if(Oe.length!==0){le(Oe[0],we);for(var Ve=1;Ve<Oe.length;Ve++)le(Oe[Ve],!we)}}function le(Oe,we){for(var Ve=0,it=0,At=0,qt=Oe.length,un=qt-1;At<qt;un=At++){var St=(Oe[At][0]-Oe[un][0])*(Oe[un][1]+Oe[At][1]),Jt=Ve+St;it+=Math.abs(Ve)>=Math.abs(St)?Ve-Jt+St:St-Jt+Ve,Ve=Jt}Ve+it>=0!=!!we&&Oe.reverse()}Pe.prototype.loadTile=function(Oe,we){var Ve=Oe.uid,it=Oe.encoding,At=Oe.rawImageData,qt=me&&At instanceof me?this.getImageData(At):At,un=new E.DEMData(Ve,qt,it);this.loaded=this.loaded||{},this.loaded[Ve]=un,we(null,un)},Pe.prototype.getImageData=function(Oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Oe.width,Oe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Oe.width,this.offscreenCanvas.height=Oe.height,this.offscreenCanvasContext.drawImage(Oe,0,0,Oe.width,Oe.height);var we=this.offscreenCanvasContext.getImageData(-1,-1,Oe.width+2,Oe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new E.RGBAImage({width:we.width,height:we.height},we.data)},Pe.prototype.removeTile=function(Oe){var we=this.loaded,Ve=Oe.uid;we&&we[Ve]&&delete we[Ve]};var J=E.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ee=function(Oe){this._feature=Oe,this.extent=E.EXTENT,this.type=Oe.type,this.properties=Oe.tags,"id"in Oe&&!isNaN(Oe.id)&&(this.id=parseInt(Oe.id,10))};Ee.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Oe=[],we=0,Ve=this._feature.geometry;we<Ve.length;we+=1){var it=Ve[we];Oe.push([new E.Point$1(it[0],it[1])])}return Oe}for(var At=[],qt=0,un=this._feature.geometry;qt<un.length;qt+=1){for(var St=[],Jt=0,Qn=un[qt];Jt<Qn.length;Jt+=1){var Er=Qn[Jt];St.push(new E.Point$1(Er[0],Er[1]))}At.push(St)}return At},Ee.prototype.toGeoJSON=function(Oe,we,Ve){return J.call(this,Oe,we,Ve)};var tt=function(Oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=E.EXTENT,this.length=Oe.length,this._features=Oe};tt.prototype.feature=function(Oe){return new Ee(this._features[Oe])};var Je=E.vectorTile.VectorTileFeature,wt=pt;function pt(Oe,we){this.options=we||{},this.features=Oe,this.length=Oe.length}function yt(Oe,we){this.id=typeof Oe.id=="number"?Oe.id:void 0,this.type=Oe.type,this.rawGeometry=Oe.type===1?[Oe.geometry]:Oe.geometry,this.properties=Oe.tags,this.extent=we||4096}pt.prototype.feature=function(Oe){return new yt(this.features[Oe],this.options.extent)},yt.prototype.loadGeometry=function(){var Oe=this.rawGeometry;this.geometry=[];for(var we=0;we<Oe.length;we++){for(var Ve=Oe[we],it=[],At=0;At<Ve.length;At++)it.push(new E.Point$1(Ve[At][0],Ve[At][1]));this.geometry.push(it)}return this.geometry},yt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Oe=this.geometry,we=1/0,Ve=-1/0,it=1/0,At=-1/0,qt=0;qt<Oe.length;qt++)for(var un=Oe[qt],St=0;St<un.length;St++){var Jt=un[St];we=Math.min(we,Jt.x),Ve=Math.max(Ve,Jt.x),it=Math.min(it,Jt.y),At=Math.max(At,Jt.y)}return[we,it,Ve,At]},yt.prototype.toGeoJSON=Je.prototype.toGeoJSON;var Re=Ue,Ce=wt;function Ue(Oe){var we=new E.pbf;return function(Ve,it){for(var At in Ve.layers)it.writeMessage(3,We,Ve.layers[At])}(Oe,we),we.finish()}function We(Oe,we){var Ve;we.writeVarintField(15,Oe.version||1),we.writeStringField(1,Oe.name||""),we.writeVarintField(5,Oe.extent||4096);var it={keys:[],values:[],keycache:{},valuecache:{}};for(Ve=0;Ve<Oe.length;Ve++)it.feature=Oe.feature(Ve),we.writeMessage(2,lt,it);var At=it.keys;for(Ve=0;Ve<At.length;Ve++)we.writeStringField(3,At[Ve]);var qt=it.values;for(Ve=0;Ve<qt.length;Ve++)we.writeMessage(4,nt,qt[Ve])}function lt(Oe,we){var Ve=Oe.feature;Ve.id!==void 0&&we.writeVarintField(1,Ve.id),we.writeMessage(2,tn,Oe),we.writeVarintField(3,Ve.type),we.writeMessage(4,Me,Ve)}function tn(Oe,we){var Ve=Oe.feature,it=Oe.keys,At=Oe.values,qt=Oe.keycache,un=Oe.valuecache;for(var St in Ve.properties){var Jt=qt[St];Jt===void 0&&(it.push(St),qt[St]=Jt=it.length-1),we.writeVarint(Jt);var Qn=Ve.properties[St],Er=typeof Qn;Er!=="string"&&Er!=="boolean"&&Er!=="number"&&(Qn=JSON.stringify(Qn));var Gr=Er+":"+Qn,mr=un[Gr];mr===void 0&&(At.push(Qn),un[Gr]=mr=At.length-1),we.writeVarint(mr)}}function Le(Oe,we){return(we<<3)+(7&Oe)}function _t(Oe){return Oe<<1^Oe>>31}function Me(Oe,we){for(var Ve=Oe.loadGeometry(),it=Oe.type,At=0,qt=0,un=Ve.length,St=0;St<un;St++){var Jt=Ve[St],Qn=1;it===1&&(Qn=Jt.length),we.writeVarint(Le(1,Qn));for(var Er=it===3?Jt.length-1:Jt.length,Gr=0;Gr<Er;Gr++){Gr===1&&it!==1&&we.writeVarint(Le(2,Er-1));var mr=Jt[Gr].x-At,Hr=Jt[Gr].y-qt;we.writeVarint(_t(mr)),we.writeVarint(_t(Hr)),At+=mr,qt+=Hr}it===3&&we.writeVarint(Le(7,1))}}function nt(Oe,we){var Ve=typeof Oe;Ve==="string"?we.writeStringField(1,Oe):Ve==="boolean"?we.writeBooleanField(7,Oe):Ve==="number"&&(Oe%1!=0?we.writeDoubleField(3,Oe):Oe<0?we.writeSVarintField(6,Oe):we.writeVarintField(5,Oe))}function qe(Oe,we,Ve,it){Ye(Oe,Ve,it),Ye(we,2*Ve,2*it),Ye(we,2*Ve+1,2*it+1)}function Ye(Oe,we,Ve){var it=Oe[we];Oe[we]=Oe[Ve],Oe[Ve]=it}function Lt(Oe,we,Ve,it){var At=Oe-Ve,qt=we-it;return At*At+qt*qt}Re.fromVectorTileJs=Ue,Re.fromGeojsonVt=function(Oe,we){we=we||{};var Ve={};for(var it in Oe)Ve[it]=new wt(Oe[it].features,we),Ve[it].name=it,Ve[it].version=we.version,Ve[it].extent=we.extent;return Ue({layers:Ve})},Re.GeoJSONWrapper=Ce;var xt=function(Oe){return Oe[0]},Ie=function(Oe){return Oe[1]},Gt=function(Oe,we,Ve,it,At){we===void 0&&(we=xt),Ve===void 0&&(Ve=Ie),it===void 0&&(it=64),At===void 0&&(At=Float64Array),this.nodeSize=it,this.points=Oe;for(var qt=Oe.length<65536?Uint16Array:Uint32Array,un=this.ids=new qt(Oe.length),St=this.coords=new At(2*Oe.length),Jt=0;Jt<Oe.length;Jt++)un[Jt]=Jt,St[2*Jt]=we(Oe[Jt]),St[2*Jt+1]=Ve(Oe[Jt]);(function Qn(Er,Gr,mr,Hr,wi,Pi){if(!(wi-Hr<=mr)){var wr=Hr+wi>>1;(function gi(di,xi,Fo,Ai,ea,_a){for(;ea>Ai;){if(ea-Ai>600){var fi=ea-Ai+1,Ji=Fo-Ai+1,$e=Math.log(fi),ht=.5*Math.exp(2*$e/3),Ht=.5*Math.sqrt($e*ht*(fi-ht)/fi)*(Ji-fi/2<0?-1:1);gi(di,xi,Fo,Math.max(Ai,Math.floor(Fo-Ji*ht/fi+Ht)),Math.min(ea,Math.floor(Fo+(fi-Ji)*ht/fi+Ht)),_a)}var hn=xi[2*Fo+_a],Fn=Ai,Bn=ea;for(qe(di,xi,Ai,Fo),xi[2*ea+_a]>hn&&qe(di,xi,Ai,ea);Fn<Bn;){for(qe(di,xi,Fn,Bn),Fn++,Bn--;xi[2*Fn+_a]<hn;)Fn++;for(;xi[2*Bn+_a]>hn;)Bn--}xi[2*Ai+_a]===hn?qe(di,xi,Ai,Bn):qe(di,xi,++Bn,ea),Bn<=Fo&&(Ai=Bn+1),Fo<=Bn&&(ea=Bn-1)}})(Er,Gr,wr,Hr,wi,Pi%2),Qn(Er,Gr,mr,Hr,wr-1,Pi+1),Qn(Er,Gr,mr,wr+1,wi,Pi+1)}})(un,St,it,0,un.length-1,0)};Gt.prototype.range=function(Oe,we,Ve,it){return function(At,qt,un,St,Jt,Qn,Er){for(var Gr,mr,Hr=[0,At.length-1,0],wi=[];Hr.length;){var Pi=Hr.pop(),wr=Hr.pop(),gi=Hr.pop();if(wr-gi<=Er)for(var di=gi;di<=wr;di++)mr=qt[2*di+1],(Gr=qt[2*di])>=un&&Gr<=Jt&&mr>=St&&mr<=Qn&&wi.push(At[di]);else{var xi=Math.floor((gi+wr)/2);mr=qt[2*xi+1],(Gr=qt[2*xi])>=un&&Gr<=Jt&&mr>=St&&mr<=Qn&&wi.push(At[xi]);var Fo=(Pi+1)%2;(Pi===0?un<=Gr:St<=mr)&&(Hr.push(gi),Hr.push(xi-1),Hr.push(Fo)),(Pi===0?Jt>=Gr:Qn>=mr)&&(Hr.push(xi+1),Hr.push(wr),Hr.push(Fo))}}return wi}(this.ids,this.coords,Oe,we,Ve,it,this.nodeSize)},Gt.prototype.within=function(Oe,we,Ve){return function(it,At,qt,un,St,Jt){for(var Qn=[0,it.length-1,0],Er=[],Gr=St*St;Qn.length;){var mr=Qn.pop(),Hr=Qn.pop(),wi=Qn.pop();if(Hr-wi<=Jt)for(var Pi=wi;Pi<=Hr;Pi++)Lt(At[2*Pi],At[2*Pi+1],qt,un)<=Gr&&Er.push(it[Pi]);else{var wr=Math.floor((wi+Hr)/2),gi=At[2*wr],di=At[2*wr+1];Lt(gi,di,qt,un)<=Gr&&Er.push(it[wr]);var xi=(mr+1)%2;(mr===0?qt-St<=gi:un-St<=di)&&(Qn.push(wi),Qn.push(wr-1),Qn.push(xi)),(mr===0?qt+St>=gi:un+St>=di)&&(Qn.push(wr+1),Qn.push(Hr),Qn.push(xi))}}return Er}(this.ids,this.coords,Oe,we,Ve,this.nodeSize)};var gn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Oe){return Oe}},Tn=function(Oe){this.options=on(Object.create(gn),Oe),this.trees=new Array(this.options.maxZoom+1)};function sr(Oe,we,Ve,it,At){return{x:Oe,y:we,zoom:1/0,id:Ve,parentId:-1,numPoints:it,properties:At}}function nr(Oe,we){var Ve=Oe.geometry.coordinates,it=Ve[1];return{x:fn(Ve[0]),y:Gn(it),zoom:1/0,index:we,parentId:-1}}function Ft(Oe){return{type:"Feature",id:Oe.id,properties:Kt(Oe),geometry:{type:"Point",coordinates:[(it=Oe.x,360*(it-.5)),(we=Oe.y,Ve=(180-360*we)*Math.PI/180,360*Math.atan(Math.exp(Ve))/Math.PI-90)]}};var we,Ve,it}function Kt(Oe){var we=Oe.numPoints,Ve=we>=1e4?Math.round(we/1e3)+"k":we>=1e3?Math.round(we/100)/10+"k":we;return on(on({},Oe.properties),{cluster:!0,cluster_id:Oe.id,point_count:we,point_count_abbreviated:Ve})}function fn(Oe){return Oe/360+.5}function Gn(Oe){var we=Math.sin(Oe*Math.PI/180),Ve=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function on(Oe,we){for(var Ve in we)Oe[Ve]=we[Ve];return Oe}function Pt(Oe){return Oe.x}function zt(Oe){return Oe.y}function ze(Oe,we,Ve,it,At,qt){var un=At-Ve,St=qt-it;if(un!==0||St!==0){var Jt=((Oe-Ve)*un+(we-it)*St)/(un*un+St*St);Jt>1?(Ve=At,it=qt):Jt>0&&(Ve+=un*Jt,it+=St*Jt)}return(un=Oe-Ve)*un+(St=we-it)*St}function rt(Oe,we,Ve,it){var At={id:Oe===void 0?null:Oe,type:we,geometry:Ve,tags:it,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(qt){var un=qt.geometry,St=qt.type;if(St==="Point"||St==="MultiPoint"||St==="LineString")jt(qt,un);else if(St==="Polygon"||St==="MultiLineString")for(var Jt=0;Jt<un.length;Jt++)jt(qt,un[Jt]);else if(St==="MultiPolygon")for(Jt=0;Jt<un.length;Jt++)for(var Qn=0;Qn<un[Jt].length;Qn++)jt(qt,un[Jt][Qn])}(At),At}function jt(Oe,we){for(var Ve=0;Ve<we.length;Ve+=3)Oe.minX=Math.min(Oe.minX,we[Ve]),Oe.minY=Math.min(Oe.minY,we[Ve+1]),Oe.maxX=Math.max(Oe.maxX,we[Ve]),Oe.maxY=Math.max(Oe.maxY,we[Ve+1])}function U(Oe,we,Ve,it){if(we.geometry){var At=we.geometry.coordinates,qt=we.geometry.type,un=Math.pow(Ve.tolerance/((1<<Ve.maxZoom)*Ve.extent),2),St=[],Jt=we.id;if(Ve.promoteId?Jt=we.properties[Ve.promoteId]:Ve.generateId&&(Jt=it||0),qt==="Point")fe(At,St);else if(qt==="MultiPoint")for(var Qn=0;Qn<At.length;Qn++)fe(At[Qn],St);else if(qt==="LineString")at(At,St,un,!1);else if(qt==="MultiLineString"){if(Ve.lineMetrics){for(Qn=0;Qn<At.length;Qn++)at(At[Qn],St=[],un,!1),Oe.push(rt(Jt,"LineString",St,we.properties));return}de(At,St,un,!1)}else if(qt==="Polygon")de(At,St,un,!0);else{if(qt!=="MultiPolygon"){if(qt==="GeometryCollection"){for(Qn=0;Qn<we.geometry.geometries.length;Qn++)U(Oe,{id:Jt,geometry:we.geometry.geometries[Qn],properties:we.properties},Ve,it);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qn=0;Qn<At.length;Qn++){var Er=[];de(At[Qn],Er,un,!0),St.push(Er)}}Oe.push(rt(Jt,qt,St,we.properties))}}function fe(Oe,we){we.push($t(Oe[0])),we.push(sn(Oe[1])),we.push(0)}function at(Oe,we,Ve,it){for(var At,qt,un=0,St=0;St<Oe.length;St++){var Jt=$t(Oe[St][0]),Qn=sn(Oe[St][1]);we.push(Jt),we.push(Qn),we.push(0),St>0&&(un+=it?(At*Qn-Jt*qt)/2:Math.sqrt(Math.pow(Jt-At,2)+Math.pow(Qn-qt,2))),At=Jt,qt=Qn}var Er=we.length-3;we[2]=1,function Gr(mr,Hr,wi,Pi){for(var wr,gi=Pi,di=wi-Hr>>1,xi=wi-Hr,Fo=mr[Hr],Ai=mr[Hr+1],ea=mr[wi],_a=mr[wi+1],fi=Hr+3;fi<wi;fi+=3){var Ji=ze(mr[fi],mr[fi+1],Fo,Ai,ea,_a);if(Ji>gi)wr=fi,gi=Ji;else if(Ji===gi){var $e=Math.abs(fi-di);$e<xi&&(wr=fi,xi=$e)}}gi>Pi&&(wr-Hr>3&&Gr(mr,Hr,wr,Pi),mr[wr+2]=gi,wi-wr>3&&Gr(mr,wr,wi,Pi))}(we,0,Er,Ve),we[Er+2]=1,we.size=Math.abs(un),we.start=0,we.end=we.size}function de(Oe,we,Ve,it){for(var At=0;At<Oe.length;At++){var qt=[];at(Oe[At],qt,Ve,it),we.push(qt)}}function $t(Oe){return Oe/360+.5}function sn(Oe){var we=Math.sin(Oe*Math.PI/180),Ve=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function pn(Oe,we,Ve,it,At,qt,un,St){if(it/=we,qt>=(Ve/=we)&&un<it)return Oe;if(un<Ve||qt>=it)return null;for(var Jt=[],Qn=0;Qn<Oe.length;Qn++){var Er=Oe[Qn],Gr=Er.geometry,mr=Er.type,Hr=At===0?Er.minX:Er.minY,wi=At===0?Er.maxX:Er.maxY;if(Hr>=Ve&&wi<it)Jt.push(Er);else if(!(wi<Ve||Hr>=it)){var Pi=[];if(mr==="Point"||mr==="MultiPoint")Nn(Gr,Pi,Ve,it,At);else if(mr==="LineString")Wn(Gr,Pi,Ve,it,At,!1,St.lineMetrics);else if(mr==="MultiLineString")dn(Gr,Pi,Ve,it,At,!1);else if(mr==="Polygon")dn(Gr,Pi,Ve,it,At,!0);else if(mr==="MultiPolygon")for(var wr=0;wr<Gr.length;wr++){var gi=[];dn(Gr[wr],gi,Ve,it,At,!0),gi.length&&Pi.push(gi)}if(Pi.length){if(St.lineMetrics&&mr==="LineString"){for(wr=0;wr<Pi.length;wr++)Jt.push(rt(Er.id,mr,Pi[wr],Er.tags));continue}mr!=="LineString"&&mr!=="MultiLineString"||(Pi.length===1?(mr="LineString",Pi=Pi[0]):mr="MultiLineString"),mr!=="Point"&&mr!=="MultiPoint"||(mr=Pi.length===3?"Point":"MultiPoint"),Jt.push(rt(Er.id,mr,Pi,Er.tags))}}}return Jt.length?Jt:null}function Nn(Oe,we,Ve,it,At){for(var qt=0;qt<Oe.length;qt+=3){var un=Oe[qt+At];un>=Ve&&un<=it&&(we.push(Oe[qt]),we.push(Oe[qt+1]),we.push(Oe[qt+2]))}}function Wn(Oe,we,Ve,it,At,qt,un){for(var St,Jt,Qn=qn(Oe),Er=At===0?It:An,Gr=Oe.start,mr=0;mr<Oe.length-3;mr+=3){var Hr=Oe[mr],wi=Oe[mr+1],Pi=Oe[mr+2],wr=Oe[mr+3],gi=Oe[mr+4],di=At===0?Hr:wi,xi=At===0?wr:gi,Fo=!1;un&&(St=Math.sqrt(Math.pow(Hr-wr,2)+Math.pow(wi-gi,2))),di<Ve?xi>Ve&&(Jt=Er(Qn,Hr,wi,wr,gi,Ve),un&&(Qn.start=Gr+St*Jt)):di>it?xi<it&&(Jt=Er(Qn,Hr,wi,wr,gi,it),un&&(Qn.start=Gr+St*Jt)):vt(Qn,Hr,wi,Pi),xi<Ve&&di>=Ve&&(Jt=Er(Qn,Hr,wi,wr,gi,Ve),Fo=!0),xi>it&&di<=it&&(Jt=Er(Qn,Hr,wi,wr,gi,it),Fo=!0),!qt&&Fo&&(un&&(Qn.end=Gr+St*Jt),we.push(Qn),Qn=qn(Oe)),un&&(Gr+=St)}var Ai=Oe.length-3;Hr=Oe[Ai],wi=Oe[Ai+1],Pi=Oe[Ai+2],(di=At===0?Hr:wi)>=Ve&&di<=it&&vt(Qn,Hr,wi,Pi),Ai=Qn.length-3,qt&&Ai>=3&&(Qn[Ai]!==Qn[0]||Qn[Ai+1]!==Qn[1])&&vt(Qn,Qn[0],Qn[1],Qn[2]),Qn.length&&we.push(Qn)}function qn(Oe){var we=[];return we.size=Oe.size,we.start=Oe.start,we.end=Oe.end,we}function dn(Oe,we,Ve,it,At,qt){for(var un=0;un<Oe.length;un++)Wn(Oe[un],we,Ve,it,At,qt,!1)}function vt(Oe,we,Ve,it){Oe.push(we),Oe.push(Ve),Oe.push(it)}function It(Oe,we,Ve,it,At,qt){var un=(qt-we)/(it-we);return Oe.push(qt),Oe.push(Ve+(At-Ve)*un),Oe.push(1),un}function An(Oe,we,Ve,it,At,qt){var un=(qt-Ve)/(At-Ve);return Oe.push(we+(it-we)*un),Oe.push(qt),Oe.push(1),un}function Dn(Oe,we){for(var Ve=[],it=0;it<Oe.length;it++){var At,qt=Oe[it],un=qt.type;if(un==="Point"||un==="MultiPoint"||un==="LineString")At=Yn(qt.geometry,we);else if(un==="MultiLineString"||un==="Polygon"){At=[];for(var St=0;St<qt.geometry.length;St++)At.push(Yn(qt.geometry[St],we))}else if(un==="MultiPolygon")for(At=[],St=0;St<qt.geometry.length;St++){for(var Jt=[],Qn=0;Qn<qt.geometry[St].length;Qn++)Jt.push(Yn(qt.geometry[St][Qn],we));At.push(Jt)}Ve.push(rt(qt.id,un,At,qt.tags))}return Ve}function Yn(Oe,we){var Ve=[];Ve.size=Oe.size,Oe.start!==void 0&&(Ve.start=Oe.start,Ve.end=Oe.end);for(var it=0;it<Oe.length;it+=3)Ve.push(Oe[it]+we,Oe[it+1],Oe[it+2]);return Ve}function dt(Oe,we){if(Oe.transformed)return Oe;var Ve,it,At,qt=1<<Oe.z,un=Oe.x,St=Oe.y;for(Ve=0;Ve<Oe.features.length;Ve++){var Jt=Oe.features[Ve],Qn=Jt.geometry,Er=Jt.type;if(Jt.geometry=[],Er===1)for(it=0;it<Qn.length;it+=2)Jt.geometry.push(xe(Qn[it],Qn[it+1],we,qt,un,St));else for(it=0;it<Qn.length;it++){var Gr=[];for(At=0;At<Qn[it].length;At+=2)Gr.push(xe(Qn[it][At],Qn[it][At+1],we,qt,un,St));Jt.geometry.push(Gr)}}return Oe.transformed=!0,Oe}function xe(Oe,we,Ve,it,At,qt){return[Math.round(Ve*(Oe*it-At)),Math.round(Ve*(we*it-qt))]}function Be(Oe,we,Ve,it,At){for(var qt=we===At.maxZoom?0:At.tolerance/((1<<we)*At.extent),un={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ve,y:it,z:we,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},St=0;St<Oe.length;St++){un.numFeatures++,st(un,Oe[St],qt,At);var Jt=Oe[St].minX,Qn=Oe[St].minY,Er=Oe[St].maxX,Gr=Oe[St].maxY;Jt<un.minX&&(un.minX=Jt),Qn<un.minY&&(un.minY=Qn),Er>un.maxX&&(un.maxX=Er),Gr>un.maxY&&(un.maxY=Gr)}return un}function st(Oe,we,Ve,it){var At=we.geometry,qt=we.type,un=[];if(qt==="Point"||qt==="MultiPoint")for(var St=0;St<At.length;St+=3)un.push(At[St]),un.push(At[St+1]),Oe.numPoints++,Oe.numSimplified++;else if(qt==="LineString")Dt(un,At,Oe,Ve,!1,!1);else if(qt==="MultiLineString"||qt==="Polygon")for(St=0;St<At.length;St++)Dt(un,At[St],Oe,Ve,qt==="Polygon",St===0);else if(qt==="MultiPolygon")for(var Jt=0;Jt<At.length;Jt++){var Qn=At[Jt];for(St=0;St<Qn.length;St++)Dt(un,Qn[St],Oe,Ve,!0,St===0)}if(un.length){var Er=we.tags||null;if(qt==="LineString"&&it.lineMetrics){for(var Gr in Er={},we.tags)Er[Gr]=we.tags[Gr];Er.mapbox_clip_start=At.start/At.size,Er.mapbox_clip_end=At.end/At.size}var mr={geometry:un,type:qt==="Polygon"||qt==="MultiPolygon"?3:qt==="LineString"||qt==="MultiLineString"?2:1,tags:Er};we.id!==null&&(mr.id=we.id),Oe.features.push(mr)}}function Dt(Oe,we,Ve,it,At,qt){var un=it*it;if(it>0&&we.size<(At?un:it))Ve.numPoints+=we.length/3;else{for(var St=[],Jt=0;Jt<we.length;Jt+=3)(it===0||we[Jt+2]>un)&&(Ve.numSimplified++,St.push(we[Jt]),St.push(we[Jt+1])),Ve.numPoints++;At&&function(Qn,Er){for(var Gr=0,mr=0,Hr=Qn.length,wi=Hr-2;mr<Hr;wi=mr,mr+=2)Gr+=(Qn[mr]-Qn[wi])*(Qn[mr+1]+Qn[wi+1]);if(Gr>0===Er)for(mr=0,Hr=Qn.length;mr<Hr/2;mr+=2){var Pi=Qn[mr],wr=Qn[mr+1];Qn[mr]=Qn[Hr-2-mr],Qn[mr+1]=Qn[Hr-1-mr],Qn[Hr-2-mr]=Pi,Qn[Hr-1-mr]=wr}}(St,qt),Oe.push(St)}}function Ot(Oe,we){var Ve=(we=this.options=function(At,qt){for(var un in qt)At[un]=qt[un];return At}(Object.create(this.options),we)).debug;if(Ve&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");var it=function(At,qt){var un=[];if(At.type==="FeatureCollection")for(var St=0;St<At.features.length;St++)U(un,At.features[St],qt,St);else U(un,At.type==="Feature"?At:{geometry:At},qt);return un}(Oe,we);this.tiles={},this.tileCoords=[],Ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(it=function(At,qt){var un=qt.buffer/qt.extent,St=At,Jt=pn(At,1,-1-un,un,0,-1,2,qt),Qn=pn(At,1,1-un,2+un,0,-1,2,qt);return(Jt||Qn)&&(St=pn(At,1,-un,1+un,0,-1,2,qt)||[],Jt&&(St=Dn(Jt,1).concat(St)),Qn&&(St=St.concat(Dn(Qn,-1)))),St}(it,we)).length&&this.splitTile(it,0,0,0),Ve&&(it.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Sn(Oe,we,Ve){return 32*((1<<Oe)*Ve+we)+Oe}function er(Oe,we){var Ve=Oe.tileID.canonical;if(!this._geoJSONIndex)return we(null,null);var it=this._geoJSONIndex.getTile(Ve.z,Ve.x,Ve.y);if(!it)return we(null,null);var At=new tt(it.features),qt=Re(At);qt.byteOffset===0&&qt.byteLength===qt.buffer.byteLength||(qt=new Uint8Array(qt)),we(null,{vectorTile:At,rawData:qt.buffer})}Tn.prototype.load=function(Oe){var we=this.options,Ve=we.log,it=we.minZoom,At=we.maxZoom,qt=we.nodeSize;Ve&&console.time("total time");var un="prepare "+Oe.length+" points";Ve&&console.time(un),this.points=Oe;for(var St=[],Jt=0;Jt<Oe.length;Jt++)Oe[Jt].geometry&&St.push(nr(Oe[Jt],Jt));this.trees[At+1]=new Gt(St,Pt,zt,qt,Float32Array),Ve&&console.timeEnd(un);for(var Qn=At;Qn>=it;Qn--){var Er=+Date.now();St=this._cluster(St,Qn),this.trees[Qn]=new Gt(St,Pt,zt,qt,Float32Array),Ve&&console.log("z%d: %d clusters in %dms",Qn,St.length,+Date.now()-Er)}return Ve&&console.timeEnd("total time"),this},Tn.prototype.getClusters=function(Oe,we){var Ve=((Oe[0]+180)%360+360)%360-180,it=Math.max(-90,Math.min(90,Oe[1])),At=Oe[2]===180?180:((Oe[2]+180)%360+360)%360-180,qt=Math.max(-90,Math.min(90,Oe[3]));if(Oe[2]-Oe[0]>=360)Ve=-180,At=180;else if(Ve>At){var un=this.getClusters([Ve,it,180,qt],we),St=this.getClusters([-180,it,At,qt],we);return un.concat(St)}for(var Jt=this.trees[this._limitZoom(we)],Qn=[],Er=0,Gr=Jt.range(fn(Ve),Gn(qt),fn(At),Gn(it));Er<Gr.length;Er+=1){var mr=Jt.points[Gr[Er]];Qn.push(mr.numPoints?Ft(mr):this.points[mr.index])}return Qn},Tn.prototype.getChildren=function(Oe){var we=this._getOriginId(Oe),Ve=this._getOriginZoom(Oe),it="No cluster with the specified id.",At=this.trees[Ve];if(!At)throw new Error(it);var qt=At.points[we];if(!qt)throw new Error(it);for(var un=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),St=[],Jt=0,Qn=At.within(qt.x,qt.y,un);Jt<Qn.length;Jt+=1){var Er=At.points[Qn[Jt]];Er.parentId===Oe&&St.push(Er.numPoints?Ft(Er):this.points[Er.index])}if(St.length===0)throw new Error(it);return St},Tn.prototype.getLeaves=function(Oe,we,Ve){var it=[];return this._appendLeaves(it,Oe,we=we||10,Ve=Ve||0,0),it},Tn.prototype.getTile=function(Oe,we,Ve){var it=this.trees[this._limitZoom(Oe)],At=Math.pow(2,Oe),qt=this.options,un=qt.radius/qt.extent,St=(Ve-un)/At,Jt=(Ve+1+un)/At,Qn={features:[]};return this._addTileFeatures(it.range((we-un)/At,St,(we+1+un)/At,Jt),it.points,we,Ve,At,Qn),we===0&&this._addTileFeatures(it.range(1-un/At,St,1,Jt),it.points,At,Ve,At,Qn),we===At-1&&this._addTileFeatures(it.range(0,St,un/At,Jt),it.points,-1,Ve,At,Qn),Qn.features.length?Qn:null},Tn.prototype.getClusterExpansionZoom=function(Oe){for(var we=this._getOriginZoom(Oe)-1;we<=this.options.maxZoom;){var Ve=this.getChildren(Oe);if(we++,Ve.length!==1)break;Oe=Ve[0].properties.cluster_id}return we},Tn.prototype._appendLeaves=function(Oe,we,Ve,it,At){for(var qt=0,un=this.getChildren(we);qt<un.length;qt+=1){var St=un[qt],Jt=St.properties;if(Jt&&Jt.cluster?At+Jt.point_count<=it?At+=Jt.point_count:At=this._appendLeaves(Oe,Jt.cluster_id,Ve,it,At):At<it?At++:Oe.push(St),Oe.length===Ve)break}return At},Tn.prototype._addTileFeatures=function(Oe,we,Ve,it,At,qt){for(var un=0,St=Oe;un<St.length;un+=1){var Jt=we[St[un]],Qn=Jt.numPoints,Er={type:1,geometry:[[Math.round(this.options.extent*(Jt.x*At-Ve)),Math.round(this.options.extent*(Jt.y*At-it))]],tags:Qn?Kt(Jt):this.points[Jt.index].properties},Gr=void 0;Qn?Gr=Jt.id:this.options.generateId?Gr=Jt.index:this.points[Jt.index].id&&(Gr=this.points[Jt.index].id),Gr!==void 0&&(Er.id=Gr),qt.features.push(Er)}},Tn.prototype._limitZoom=function(Oe){return Math.max(this.options.minZoom,Math.min(+Oe,this.options.maxZoom+1))},Tn.prototype._cluster=function(Oe,we){for(var Ve=[],it=this.options,At=it.reduce,qt=it.minPoints,un=it.radius/(it.extent*Math.pow(2,we)),St=0;St<Oe.length;St++){var Jt=Oe[St];if(!(Jt.zoom<=we)){Jt.zoom=we;for(var Qn=this.trees[we+1],Er=Qn.within(Jt.x,Jt.y,un),Gr=Jt.numPoints||1,mr=Gr,Hr=0,wi=Er;Hr<wi.length;Hr+=1){var Pi=Qn.points[wi[Hr]];Pi.zoom>we&&(mr+=Pi.numPoints||1)}if(mr>=qt){for(var wr=Jt.x*Gr,gi=Jt.y*Gr,di=At&&Gr>1?this._map(Jt,!0):null,xi=(St<<5)+(we+1)+this.points.length,Fo=0,Ai=Er;Fo<Ai.length;Fo+=1){var ea=Qn.points[Ai[Fo]];if(!(ea.zoom<=we)){ea.zoom=we;var _a=ea.numPoints||1;wr+=ea.x*_a,gi+=ea.y*_a,ea.parentId=xi,At&&(di||(di=this._map(Jt,!0)),At(di,this._map(ea)))}}Jt.parentId=xi,Ve.push(sr(wr/mr,gi/mr,xi,mr,di))}else if(Ve.push(Jt),mr>1)for(var fi=0,Ji=Er;fi<Ji.length;fi+=1){var $e=Qn.points[Ji[fi]];$e.zoom<=we||($e.zoom=we,Ve.push($e))}}}return Ve},Tn.prototype._getOriginId=function(Oe){return Oe-this.points.length>>5},Tn.prototype._getOriginZoom=function(Oe){return(Oe-this.points.length)%32},Tn.prototype._map=function(Oe,we){if(Oe.numPoints)return we?on({},Oe.properties):Oe.properties;var Ve=this.points[Oe.index].properties,it=this.options.map(Ve);return we&&it===Ve?on({},it):it},Ot.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ot.prototype.splitTile=function(Oe,we,Ve,it,At,qt,un){for(var St=[Oe,we,Ve,it],Jt=this.options,Qn=Jt.debug;St.length;){it=St.pop(),Ve=St.pop(),we=St.pop(),Oe=St.pop();var Er=1<<we,Gr=Sn(we,Ve,it),mr=this.tiles[Gr];if(!mr&&(Qn>1&&console.time("creation"),mr=this.tiles[Gr]=Be(Oe,we,Ve,it,Jt),this.tileCoords.push({z:we,x:Ve,y:it}),Qn)){Qn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,Ve,it,mr.numFeatures,mr.numPoints,mr.numSimplified),console.timeEnd("creation"));var Hr="z"+we;this.stats[Hr]=(this.stats[Hr]||0)+1,this.total++}if(mr.source=Oe,At){if(we===Jt.maxZoom||we===At)continue;var wi=1<<At-we;if(Ve!==Math.floor(qt/wi)||it!==Math.floor(un/wi))continue}else if(we===Jt.indexMaxZoom||mr.numPoints<=Jt.indexMaxPoints)continue;if(mr.source=null,Oe.length!==0){Qn>1&&console.time("clipping");var Pi,wr,gi,di,xi,Fo,Ai=.5*Jt.buffer/Jt.extent,ea=.5-Ai,_a=.5+Ai,fi=1+Ai;Pi=wr=gi=di=null,xi=pn(Oe,Er,Ve-Ai,Ve+_a,0,mr.minX,mr.maxX,Jt),Fo=pn(Oe,Er,Ve+ea,Ve+fi,0,mr.minX,mr.maxX,Jt),Oe=null,xi&&(Pi=pn(xi,Er,it-Ai,it+_a,1,mr.minY,mr.maxY,Jt),wr=pn(xi,Er,it+ea,it+fi,1,mr.minY,mr.maxY,Jt),xi=null),Fo&&(gi=pn(Fo,Er,it-Ai,it+_a,1,mr.minY,mr.maxY,Jt),di=pn(Fo,Er,it+ea,it+fi,1,mr.minY,mr.maxY,Jt),Fo=null),Qn>1&&console.timeEnd("clipping"),St.push(Pi||[],we+1,2*Ve,2*it),St.push(wr||[],we+1,2*Ve,2*it+1),St.push(gi||[],we+1,2*Ve+1,2*it),St.push(di||[],we+1,2*Ve+1,2*it+1)}}},Ot.prototype.getTile=function(Oe,we,Ve){var it=this.options,At=it.extent,qt=it.debug;if(Oe<0||Oe>24)return null;var un=1<<Oe,St=Sn(Oe,we=(we%un+un)%un,Ve);if(this.tiles[St])return dt(this.tiles[St],At);qt>1&&console.log("drilling down to z%d-%d-%d",Oe,we,Ve);for(var Jt,Qn=Oe,Er=we,Gr=Ve;!Jt&&Qn>0;)Qn--,Er=Math.floor(Er/2),Gr=Math.floor(Gr/2),Jt=this.tiles[Sn(Qn,Er,Gr)];return Jt&&Jt.source?(qt>1&&console.log("found parent tile z%d-%d-%d",Qn,Er,Gr),qt>1&&console.time("drilling down"),this.splitTile(Jt.source,Qn,Er,Gr,Oe,we,Ve),qt>1&&console.timeEnd("drilling down"),this.tiles[St]?dt(this.tiles[St],At):null):null};var br=function(Oe){function we(Ve,it,At,qt){Oe.call(this,Ve,it,At,er),qt&&(this.loadGeoJSON=qt)}return Oe&&(we.__proto__=Oe),(we.prototype=Object.create(Oe&&Oe.prototype)).constructor=we,we.prototype.loadData=function(Ve,it){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=it,this._pendingLoadDataParams=Ve,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},we.prototype._loadData=function(){var Ve=this;if(this._pendingCallback&&this._pendingLoadDataParams){var it=this._pendingCallback,At=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var qt=!!(At&&At.request&&At.request.collectResourceTiming)&&new E.RequestPerformance(At.request);this.loadGeoJSON(At,function(un,St){if(un||!St)return it(un);if(typeof St!="object")return it(new Error("Input data given to '"+At.source+"' is not a valid GeoJSON object."));(function mr(Hr,wi){var Pi,wr=Hr&&Hr.type;if(wr==="FeatureCollection")for(Pi=0;Pi<Hr.features.length;Pi++)mr(Hr.features[Pi],wi);else if(wr==="GeometryCollection")for(Pi=0;Pi<Hr.geometries.length;Pi++)mr(Hr.geometries[Pi],wi);else if(wr==="Feature")mr(Hr.geometry,wi);else if(wr==="Polygon")$(Hr.coordinates,wi);else if(wr==="MultiPolygon")for(Pi=0;Pi<Hr.coordinates.length;Pi++)$(Hr.coordinates[Pi],wi);return Hr})(St,!0);try{if(At.filter){var Jt=E.createExpression(At.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Jt.result==="error")throw new Error(Jt.value.map(function(mr){return mr.key+": "+mr.message}).join(", "));var Qn=St.features.filter(function(mr){return Jt.value.evaluate({zoom:0},mr)});St={type:"FeatureCollection",features:Qn}}Ve._geoJSONIndex=At.cluster?new Tn(function(mr){var Hr=mr.superclusterOptions,wi=mr.clusterProperties;if(!wi||!Hr)return Hr;for(var Pi={},wr={},gi={accumulated:null,zoom:0},di={properties:null},xi=Object.keys(wi),Fo=0,Ai=xi;Fo<Ai.length;Fo+=1){var ea=Ai[Fo],_a=wi[ea],fi=_a[0],Ji=E.createExpression(_a[1]),$e=E.createExpression(typeof fi=="string"?[fi,["accumulated"],["get",ea]]:fi);Pi[ea]=Ji.value,wr[ea]=$e.value}return Hr.map=function(ht){di.properties=ht;for(var Ht={},hn=0,Fn=xi;hn<Fn.length;hn+=1){var Bn=Fn[hn];Ht[Bn]=Pi[Bn].evaluate(gi,di)}return Ht},Hr.reduce=function(ht,Ht){di.properties=Ht;for(var hn=0,Fn=xi;hn<Fn.length;hn+=1){var Bn=Fn[hn];gi.accumulated=ht[Bn],ht[Bn]=wr[Bn].evaluate(gi,di)}},Hr}(At)).load(St.features):function(mr,Hr){return new Ot(mr,Hr)}(St,At.geojsonVtOptions)}catch(mr){return it(mr)}Ve.loaded={};var Er={};if(qt){var Gr=qt.finish();Gr&&(Er.resourceTiming={},Er.resourceTiming[At.source]=JSON.parse(JSON.stringify(Gr)))}it(null,Er)})}},we.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},we.prototype.reloadTile=function(Ve,it){var At=this.loaded;return At&&At[Ve.uid]?Oe.prototype.reloadTile.call(this,Ve,it):this.loadTile(Ve,it)},we.prototype.loadGeoJSON=function(Ve,it){if(Ve.request)E.getJSON(Ve.request,it);else{if(typeof Ve.data!="string")return it(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."));try{return it(null,JSON.parse(Ve.data))}catch(At){return it(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."))}}},we.prototype.removeSource=function(Ve,it){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),it()},we.prototype.getClusterExpansionZoom=function(Ve,it){try{it(null,this._geoJSONIndex.getClusterExpansionZoom(Ve.clusterId))}catch(At){it(At)}},we.prototype.getClusterChildren=function(Ve,it){try{it(null,this._geoJSONIndex.getChildren(Ve.clusterId))}catch(At){it(At)}},we.prototype.getClusterLeaves=function(Ve,it){try{it(null,this._geoJSONIndex.getLeaves(Ve.clusterId,Ve.limit,Ve.offset))}catch(At){it(At)}},we}(te),$n=function(Oe){var we=this;this.self=Oe,this.actor=new E.Actor(Oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:te,geojson:br},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ve,it){if(we.workerSourceTypes[Ve])throw new Error('Worker source with name "'+Ve+'" already registered.');we.workerSourceTypes[Ve]=it},this.self.registerRTLTextPlugin=function(Ve){if(E.plugin.isParsed())throw new Error("RTL text plugin already registered.");E.plugin.applyArabicShaping=Ve.applyArabicShaping,E.plugin.processBidirectionalText=Ve.processBidirectionalText,E.plugin.processStyledBidirectionalText=Ve.processStyledBidirectionalText}};return $n.prototype.setReferrer=function(Oe,we){this.referrer=we},$n.prototype.setImages=function(Oe,we,Ve){for(var it in this.availableImages[Oe]=we,this.workerSources[Oe]){var At=this.workerSources[Oe][it];for(var qt in At)At[qt].availableImages=we}Ve()},$n.prototype.setLayers=function(Oe,we,Ve){this.getLayerIndex(Oe).replace(we),Ve()},$n.prototype.updateLayers=function(Oe,we,Ve){this.getLayerIndex(Oe).update(we.layers,we.removedIds),Ve()},$n.prototype.loadTile=function(Oe,we,Ve){this.getWorkerSource(Oe,we.type,we.source).loadTile(we,Ve)},$n.prototype.loadDEMTile=function(Oe,we,Ve){this.getDEMWorkerSource(Oe,we.source).loadTile(we,Ve)},$n.prototype.reloadTile=function(Oe,we,Ve){this.getWorkerSource(Oe,we.type,we.source).reloadTile(we,Ve)},$n.prototype.abortTile=function(Oe,we,Ve){this.getWorkerSource(Oe,we.type,we.source).abortTile(we,Ve)},$n.prototype.removeTile=function(Oe,we,Ve){this.getWorkerSource(Oe,we.type,we.source).removeTile(we,Ve)},$n.prototype.removeDEMTile=function(Oe,we){this.getDEMWorkerSource(Oe,we.source).removeTile(we)},$n.prototype.removeSource=function(Oe,we,Ve){if(this.workerSources[Oe]&&this.workerSources[Oe][we.type]&&this.workerSources[Oe][we.type][we.source]){var it=this.workerSources[Oe][we.type][we.source];delete this.workerSources[Oe][we.type][we.source],it.removeSource!==void 0?it.removeSource(we,Ve):Ve()}},$n.prototype.loadWorkerSource=function(Oe,we,Ve){try{this.self.importScripts(we.url),Ve()}catch(it){Ve(it.toString())}},$n.prototype.syncRTLPluginState=function(Oe,we,Ve){try{E.plugin.setState(we);var it=E.plugin.getPluginURL();if(E.plugin.isLoaded()&&!E.plugin.isParsed()&&it!=null){this.self.importScripts(it);var At=E.plugin.isParsed();Ve(At?void 0:new Error("RTL Text Plugin failed to import scripts from "+it),At)}}catch(qt){Ve(qt.toString())}},$n.prototype.getAvailableImages=function(Oe){var we=this.availableImages[Oe];return we||(we=[]),we},$n.prototype.getLayerIndex=function(Oe){var we=this.layerIndexes[Oe];return we||(we=this.layerIndexes[Oe]=new se),we},$n.prototype.getWorkerSource=function(Oe,we,Ve){var it=this;return this.workerSources[Oe]||(this.workerSources[Oe]={}),this.workerSources[Oe][we]||(this.workerSources[Oe][we]={}),this.workerSources[Oe][we][Ve]||(this.workerSources[Oe][we][Ve]=new this.workerSourceTypes[we]({send:function(At,qt,un){it.actor.send(At,qt,un,Oe)}},this.getLayerIndex(Oe),this.getAvailableImages(Oe))),this.workerSources[Oe][we][Ve]},$n.prototype.getDEMWorkerSource=function(Oe,we){return this.demWorkerSources[Oe]||(this.demWorkerSources[Oe]={}),this.demWorkerSources[Oe][we]||(this.demWorkerSources[Oe][we]=new Pe),this.demWorkerSources[Oe][we]},$n.prototype.enforceCacheSizeLimit=function(Oe,we){E.enforceCacheSizeLimit(we)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new $n(self)),$n}),W(["./shared"],function(E){"use strict";var he=E.createCommonjsModule(function(_){function S(k){return!x(k)}function x(k){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Q,ge,je=new Blob([""],{type:"text/javascript"}),ft=URL.createObjectURL(je);try{ge=new Worker(ft),Q=!0}catch(Ut){Q=!1}return ge&&ge.terminate(),URL.revokeObjectURL(ft),Q}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Q=document.createElement("canvas");Q.width=Q.height=1;var ge=Q.getContext("2d");if(!ge)return!1;var je=ge.getImageData(0,0,1,1);return je&&je.width===Q.width}()?(O[Z=k&&k.failIfMajorPerformanceCaveat]===void 0&&(O[Z]=function(Q){var ge=function(ft){var Ut=document.createElement("canvas"),Vt=Object.create(S.webGLContextAttributes);return Vt.failIfMajorPerformanceCaveat=ft,Ut.probablySupportsContext?Ut.probablySupportsContext("webgl",Vt)||Ut.probablySupportsContext("experimental-webgl",Vt):Ut.supportsContext?Ut.supportsContext("webgl",Vt)||Ut.supportsContext("experimental-webgl",Vt):Ut.getContext("webgl",Vt)||Ut.getContext("experimental-webgl",Vt)}(Q);if(!ge)return!1;var je=ge.createShader(ge.VERTEX_SHADER);return!(!je||ge.isContextLost())&&(ge.shaderSource(je,"void main() {}"),ge.compileShader(je),ge.getShaderParameter(je,ge.COMPILE_STATUS)===!0)}(Z)),O[Z]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Z}_.exports?_.exports=S:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=S,window.mapboxgl.notSupportedReason=x);var O={};S.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),ee={create:function(_,S,x){var O=E.window.document.createElement(_);return S!==void 0&&(O.className=S),x&&x.appendChild(O),O},createNS:function(_,S){return E.window.document.createElementNS(_,S)}},se=E.window.document&&E.window.document.documentElement.style;function ue(_){if(!se)return _[0];for(var S=0;S<_.length;S++)if(_[S]in se)return _[S];return _[0]}var be,oe=ue(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);ee.disableDrag=function(){se&&oe&&(be=se[oe],se[oe]="none")},ee.enableDrag=function(){se&&oe&&(se[oe]=be)};var Ge=ue(["transform","WebkitTransform"]);ee.setTransform=function(_,S){_.style[Ge]=S};var te=!1;try{var me=Object.defineProperty({},"passive",{get:function(){te=!0}});E.window.addEventListener("test",me,me),E.window.removeEventListener("test",me,me)}catch(_){te=!1}ee.addEventListener=function(_,S,x,O){O===void 0&&(O={}),_.addEventListener(S,x,"passive"in O&&te?O:O.capture)},ee.removeEventListener=function(_,S,x,O){O===void 0&&(O={}),_.removeEventListener(S,x,"passive"in O&&te?O:O.capture)};var Pe=function(_){_.preventDefault(),_.stopPropagation(),E.window.removeEventListener("click",Pe,!0)};function $(_){var S=_.userImage;return!!(S&&S.render&&S.render())&&(_.data.replace(new Uint8Array(S.data.buffer)),!0)}ee.suppressClick=function(){E.window.addEventListener("click",Pe,!0),E.window.setTimeout(function(){E.window.removeEventListener("click",Pe,!0)},0)},ee.mousePos=function(_,S){var x=_.getBoundingClientRect();return new E.Point(S.clientX-x.left-_.clientLeft,S.clientY-x.top-_.clientTop)},ee.touchPos=function(_,S){for(var x=_.getBoundingClientRect(),O=[],k=0;k<S.length;k++)O.push(new E.Point(S[k].clientX-x.left-_.clientLeft,S[k].clientY-x.top-_.clientTop));return O},ee.mouseButton=function(_){return E.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&E.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button},ee.remove=function(_){_.parentNode&&_.parentNode.removeChild(_)};var le=function(_){function S(){_.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new E.RGBAImage({width:1,height:1}),this.dirty=!0}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.isLoaded=function(){return this.loaded},S.prototype.setLoaded=function(x){if(this.loaded!==x&&(this.loaded=x,x)){for(var O=0,k=this.requestors;O<k.length;O+=1){var Z=k[O];this._notify(Z.ids,Z.callback)}this.requestors=[]}},S.prototype.getImage=function(x){return this.images[x]},S.prototype.addImage=function(x,O){this._validate(x,O)&&(this.images[x]=O)},S.prototype._validate=function(x,O){var k=!0;return this._validateStretch(O.stretchX,O.data&&O.data.width)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "stretchX" value'))),k=!1),this._validateStretch(O.stretchY,O.data&&O.data.height)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "stretchY" value'))),k=!1),this._validateContent(O.content,O)||(this.fire(new E.ErrorEvent(new Error('Image "'+x+'" has invalid "content" value'))),k=!1),k},S.prototype._validateStretch=function(x,O){if(!x)return!0;for(var k=0,Z=0,Q=x;Z<Q.length;Z+=1){var ge=Q[Z];if(ge[0]<k||ge[1]<ge[0]||O<ge[1])return!1;k=ge[1]}return!0},S.prototype._validateContent=function(x,O){return!(x&&(x.length!==4||x[0]<0||O.data.width<x[0]||x[1]<0||O.data.height<x[1]||x[2]<0||O.data.width<x[2]||x[3]<0||O.data.height<x[3]||x[2]<x[0]||x[3]<x[1]))},S.prototype.updateImage=function(x,O){O.version=this.images[x].version+1,this.images[x]=O,this.updatedImages[x]=!0},S.prototype.removeImage=function(x){var O=this.images[x];delete this.images[x],delete this.patterns[x],O.userImage&&O.userImage.onRemove&&O.userImage.onRemove()},S.prototype.listImages=function(){return Object.keys(this.images)},S.prototype.getImages=function(x,O){var k=!0;if(!this.isLoaded())for(var Z=0,Q=x;Z<Q.length;Z+=1)this.images[Q[Z]]||(k=!1);this.isLoaded()||k?this._notify(x,O):this.requestors.push({ids:x,callback:O})},S.prototype._notify=function(x,O){for(var k={},Z=0,Q=x;Z<Q.length;Z+=1){var ge=Q[Z];this.images[ge]||this.fire(new E.Event("styleimagemissing",{id:ge}));var je=this.images[ge];je?k[ge]={data:je.data.clone(),pixelRatio:je.pixelRatio,sdf:je.sdf,version:je.version,stretchX:je.stretchX,stretchY:je.stretchY,content:je.content,hasRenderCallback:!!(je.userImage&&je.userImage.render)}:E.warnOnce('Image "'+ge+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}O(null,k)},S.prototype.getPixelSize=function(){var x=this.atlasImage;return{width:x.width,height:x.height}},S.prototype.getPattern=function(x){var O=this.patterns[x],k=this.getImage(x);if(!k)return null;if(O&&O.position.version===k.version)return O.position;if(O)O.position.version=k.version;else{var Z={w:k.data.width+2,h:k.data.height+2,x:0,y:0},Q=new E.ImagePosition(Z,k);this.patterns[x]={bin:Z,position:Q}}return this._updatePatternAtlas(),this.patterns[x].position},S.prototype.bind=function(x){var O=x.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new E.Texture(x,this.atlasImage,O.RGBA),this.atlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE)},S.prototype._updatePatternAtlas=function(){var x=[];for(var O in this.patterns)x.push(this.patterns[O].bin);var k=E.potpack(x),Z=k.w,Q=k.h,ge=this.atlasImage;for(var je in ge.resize({width:Z||1,height:Q||1}),this.patterns){var ft=this.patterns[je].bin,Ut=ft.x+1,Vt=ft.y+1,Zt=this.images[je].data,En=Zt.width,mn=Zt.height;E.RGBAImage.copy(Zt,ge,{x:0,y:0},{x:Ut,y:Vt},{width:En,height:mn}),E.RGBAImage.copy(Zt,ge,{x:0,y:mn-1},{x:Ut,y:Vt-1},{width:En,height:1}),E.RGBAImage.copy(Zt,ge,{x:0,y:0},{x:Ut,y:Vt+mn},{width:En,height:1}),E.RGBAImage.copy(Zt,ge,{x:En-1,y:0},{x:Ut-1,y:Vt},{width:1,height:mn}),E.RGBAImage.copy(Zt,ge,{x:0,y:0},{x:Ut+En,y:Vt},{width:1,height:mn})}this.dirty=!0},S.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},S.prototype.dispatchRenderCallbacks=function(x){for(var O=0,k=x;O<k.length;O+=1){var Z=k[O];if(!this.callbackDispatchedThisFrame[Z]){this.callbackDispatchedThisFrame[Z]=!0;var Q=this.images[Z];$(Q)&&this.updateImage(Z,Q)}}},S}(E.Evented),J=Je,Ee=Je,tt=1e20;function Je(_,S,x,O,k,Z){this.fontSize=_||24,this.buffer=S===void 0?3:S,this.cutoff=O||.25,this.fontFamily=k||"sans-serif",this.fontWeight=Z||"normal",this.radius=x||8;var Q=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Q,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Q*Q),this.gridInner=new Float64Array(Q*Q),this.f=new Float64Array(Q),this.d=new Float64Array(Q),this.z=new Float64Array(Q+1),this.v=new Int16Array(Q),this.middle=Math.round(Q/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function wt(_,S,x,O,k,Z,Q){for(var ge=0;ge<S;ge++){for(var je=0;je<x;je++)O[je]=_[je*S+ge];for(pt(O,k,Z,Q,x),je=0;je<x;je++)_[je*S+ge]=k[je]}for(je=0;je<x;je++){for(ge=0;ge<S;ge++)O[ge]=_[je*S+ge];for(pt(O,k,Z,Q,S),ge=0;ge<S;ge++)_[je*S+ge]=Math.sqrt(k[ge])}}function pt(_,S,x,O,k){x[0]=0,O[0]=-tt,O[1]=+tt;for(var Z=1,Q=0;Z<k;Z++){for(var ge=(_[Z]+Z*Z-(_[x[Q]]+x[Q]*x[Q]))/(2*Z-2*x[Q]);ge<=O[Q];)Q--,ge=(_[Z]+Z*Z-(_[x[Q]]+x[Q]*x[Q]))/(2*Z-2*x[Q]);x[++Q]=Z,O[Q]=ge,O[Q+1]=+tt}for(Z=0,Q=0;Z<k;Z++){for(;O[Q+1]<Z;)Q++;S[Z]=(Z-x[Q])*(Z-x[Q])+_[x[Q]]}}Je.prototype.draw=function(_){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(_,this.buffer,this.middle);for(var S=this.ctx.getImageData(0,0,this.size,this.size),x=new Uint8ClampedArray(this.size*this.size),O=0;O<this.size*this.size;O++){var k=S.data[4*O+3]/255;this.gridOuter[O]=k===1?0:k===0?tt:Math.pow(Math.max(0,.5-k),2),this.gridInner[O]=k===1?tt:k===0?0:Math.pow(Math.max(0,k-.5),2)}for(wt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),wt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),O=0;O<this.size*this.size;O++)x[O]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[O]-this.gridInner[O])/this.radius+this.cutoff))));return x},J.default=Ee;var yt=function(_,S){this.requestManager=_,this.localIdeographFontFamily=S,this.entries={}};yt.prototype.setURL=function(_){this.url=_},yt.prototype.getGlyphs=function(_,S){var x=this,O=[];for(var k in _)for(var Z=0,Q=_[k];Z<Q.length;Z+=1)O.push({stack:k,id:Q[Z]});E.asyncAll(O,function(ge,je){var ft=ge.stack,Ut=ge.id,Vt=x.entries[ft];Vt||(Vt=x.entries[ft]={glyphs:{},requests:{},ranges:{}});var Zt=Vt.glyphs[Ut];if(Zt===void 0){if(Zt=x._tinySDF(Vt,ft,Ut))return Vt.glyphs[Ut]=Zt,void je(null,{stack:ft,id:Ut,glyph:Zt});var En=Math.floor(Ut/256);if(256*En>65535)je(new Error("glyphs > 65535 not supported"));else if(Vt.ranges[En])je(null,{stack:ft,id:Ut,glyph:Zt});else{var mn=Vt.requests[En];mn||(mn=Vt.requests[En]=[],yt.loadGlyphRange(ft,En,x.url,x.requestManager,function(Un,ln){if(ln){for(var kn in ln)x._doesCharSupportLocalGlyph(+kn)||(Vt.glyphs[+kn]=ln[+kn]);Vt.ranges[En]=!0}for(var Jn=0,gr=mn;Jn<gr.length;Jn+=1)(0,gr[Jn])(Un,ln);delete Vt.requests[En]})),mn.push(function(Un,ln){Un?je(Un):ln&&je(null,{stack:ft,id:Ut,glyph:ln[Ut]||null})})}}else je(null,{stack:ft,id:Ut,glyph:Zt})},function(ge,je){if(ge)S(ge);else if(je){for(var ft={},Ut=0,Vt=je;Ut<Vt.length;Ut+=1){var Zt=Vt[Ut],En=Zt.stack,mn=Zt.id,Un=Zt.glyph;(ft[En]||(ft[En]={}))[mn]=Un&&{id:Un.id,bitmap:Un.bitmap.clone(),metrics:Un.metrics}}S(null,ft)}})},yt.prototype._doesCharSupportLocalGlyph=function(_){return!!this.localIdeographFontFamily&&(E.isChar["CJK Unified Ideographs"](_)||E.isChar["Hangul Syllables"](_)||E.isChar.Hiragana(_)||E.isChar.Katakana(_))},yt.prototype._tinySDF=function(_,S,x){var O=this.localIdeographFontFamily;if(O&&this._doesCharSupportLocalGlyph(x)){var k=_.tinySDF;if(!k){var Z="400";/bold/i.test(S)?Z="900":/medium/i.test(S)?Z="500":/light/i.test(S)&&(Z="200"),k=_.tinySDF=new yt.TinySDF(24,3,8,.25,O,Z)}return{id:x,bitmap:new E.AlphaImage({width:30,height:30},k.draw(String.fromCharCode(x))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},yt.loadGlyphRange=function(_,S,x,O,k){var Z=256*S,Q=Z+255,ge=O.transformRequest(O.normalizeGlyphsURL(x).replace("{fontstack}",_).replace("{range}",Z+"-"+Q),E.ResourceType.Glyphs);E.getArrayBuffer(ge,function(je,ft){if(je)k(je);else if(ft){for(var Ut={},Vt=0,Zt=E.parseGlyphPBF(ft);Vt<Zt.length;Vt+=1){var En=Zt[Vt];Ut[En.id]=En}k(null,Ut)}})},yt.TinySDF=J;var Re=function(){this.specification=E.styleSpec.light.position};Re.prototype.possiblyEvaluate=function(_,S){return E.sphericalToCartesian(_.expression.evaluate(S))},Re.prototype.interpolate=function(_,S,x){return{x:E.number(_.x,S.x,x),y:E.number(_.y,S.y,x),z:E.number(_.z,S.z,x)}};var Ce=new E.Properties({anchor:new E.DataConstantProperty(E.styleSpec.light.anchor),position:new Re,color:new E.DataConstantProperty(E.styleSpec.light.color),intensity:new E.DataConstantProperty(E.styleSpec.light.intensity)}),Ue=function(_){function S(x){_.call(this),this._transitionable=new E.Transitionable(Ce),this.setLight(x),this._transitioning=this._transitionable.untransitioned()}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getLight=function(){return this._transitionable.serialize()},S.prototype.setLight=function(x,O){if(O===void 0&&(O={}),!this._validate(E.validateLight,x,O))for(var k in x){var Z=x[k];E.endsWith(k,"-transition")?this._transitionable.setTransition(k.slice(0,-11),Z):this._transitionable.setValue(k,Z)}},S.prototype.updateTransitions=function(x){this._transitioning=this._transitionable.transitioned(x,this._transitioning)},S.prototype.hasTransition=function(){return this._transitioning.hasTransition()},S.prototype.recalculate=function(x){this.properties=this._transitioning.possiblyEvaluate(x)},S.prototype._validate=function(x,O,k){return(!k||k.validate!==!1)&&E.emitValidationErrors(this,x.call(E.validateStyle,E.extend({value:O,style:{glyphs:!0,sprite:!0},styleSpec:E.styleSpec})))},S}(E.Evented),We=function(_,S){this.width=_,this.height=S,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};We.prototype.getDash=function(_,S){var x=_.join(",")+String(S);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(_,S)),this.dashEntry[x]},We.prototype.getDashRanges=function(_,S,x){var O=[],k=_.length%2==1?-_[_.length-1]*x:0,Z=_[0]*x,Q=!0;O.push({left:k,right:Z,isDash:Q,zeroLength:_[0]===0});for(var ge=_[0],je=1;je<_.length;je++){var ft=_[je];O.push({left:k=ge*x,right:Z=(ge+=ft)*x,isDash:Q=!Q,zeroLength:ft===0})}return O},We.prototype.addRoundDash=function(_,S,x){for(var O=S/2,k=-x;k<=x;k++)for(var Z=this.width*(this.nextRow+x+k),Q=0,ge=_[Q],je=0;je<this.width;je++){je/ge.right>1&&(ge=_[++Q]);var ft=Math.abs(je-ge.left),Ut=Math.abs(je-ge.right),Vt=Math.min(ft,Ut),Zt=void 0,En=k/x*(O+1);if(ge.isDash){var mn=O-Math.abs(En);Zt=Math.sqrt(Vt*Vt+mn*mn)}else Zt=O-Math.sqrt(Vt*Vt+En*En);this.data[Z+je]=Math.max(0,Math.min(255,Zt+128))}},We.prototype.addRegularDash=function(_){for(var S=_.length-1;S>=0;--S){var x=_[S],O=_[S+1];x.zeroLength?_.splice(S,1):O&&O.isDash===x.isDash&&(O.left=x.left,_.splice(S,1))}var k=_[0],Z=_[_.length-1];k.isDash===Z.isDash&&(k.left=Z.left-this.width,Z.right=k.right+this.width);for(var Q=this.width*this.nextRow,ge=0,je=_[ge],ft=0;ft<this.width;ft++){ft/je.right>1&&(je=_[++ge]);var Ut=Math.abs(ft-je.left),Vt=Math.abs(ft-je.right),Zt=Math.min(Ut,Vt);this.data[Q+ft]=Math.max(0,Math.min(255,(je.isDash?Zt:-Zt)+128))}},We.prototype.addDash=function(_,S){var x=S?7:0,O=2*x+1;if(this.nextRow+O>this.height)return E.warnOnce("LineAtlas out of space"),null;for(var k=0,Z=0;Z<_.length;Z++)k+=_[Z];if(k!==0){var Q=this.width/k,ge=this.getDashRanges(_,this.width,Q);S?this.addRoundDash(ge,Q,x):this.addRegularDash(ge)}var je={y:(this.nextRow+x+.5)/this.height,height:2*x/this.height,width:k};return this.nextRow+=O,this.dirty=!0,je},We.prototype.bind=function(_){var S=_.gl;this.texture?(S.bindTexture(S.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,S.texSubImage2D(S.TEXTURE_2D,0,0,0,this.width,this.height,S.ALPHA,S.UNSIGNED_BYTE,this.data))):(this.texture=S.createTexture(),S.bindTexture(S.TEXTURE_2D,this.texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.REPEAT),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.REPEAT),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR),S.texImage2D(S.TEXTURE_2D,0,S.ALPHA,this.width,this.height,0,S.ALPHA,S.UNSIGNED_BYTE,this.data))};var lt=function _(S,x){this.workerPool=S,this.actors=[],this.currentActor=0,this.id=E.uniqueId();for(var O=this.workerPool.acquire(this.id),k=0;k<O.length;k++){var Z=new _.Actor(O[k],x,this.id);Z.name="Worker "+k,this.actors.push(Z)}};function tn(_,S,x){var O=function(k,Z){if(k)return x(k);if(Z){var Q=E.pick(E.extend(Z,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Z.vector_layers&&(Q.vectorLayers=Z.vector_layers,Q.vectorLayerIds=Q.vectorLayers.map(function(ge){return ge.id})),Q.tiles=S.canonicalizeTileset(Q,_.url),x(null,Q)}};return _.url?E.getJSON(S.transformRequest(S.normalizeSourceURL(_.url),E.ResourceType.Source),O):E.browser.frame(function(){return O(null,_)})}lt.prototype.broadcast=function(_,S,x){E.asyncAll(this.actors,function(O,k){O.send(_,S,k)},x=x||function(){})},lt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},lt.prototype.remove=function(){this.actors.forEach(function(_){_.remove()}),this.actors=[],this.workerPool.release(this.id)},lt.Actor=E.Actor;var Le=function(_,S,x){this.bounds=E.LngLatBounds.convert(this.validateBounds(_)),this.minzoom=S||0,this.maxzoom=x||24};Le.prototype.validateBounds=function(_){return Array.isArray(_)&&_.length===4?[Math.max(-180,_[0]),Math.max(-90,_[1]),Math.min(180,_[2]),Math.min(90,_[3])]:[-180,-90,180,90]},Le.prototype.contains=function(_){var S=Math.pow(2,_.z),x=Math.floor(E.mercatorXfromLng(this.bounds.getWest())*S),O=Math.floor(E.mercatorYfromLat(this.bounds.getNorth())*S),k=Math.ceil(E.mercatorXfromLng(this.bounds.getEast())*S),Z=Math.ceil(E.mercatorYfromLat(this.bounds.getSouth())*S);return _.x>=x&&_.x<k&&_.y>=O&&_.y<Z};var _t=function(_){function S(x,O,k,Z){if(_.call(this),this.id=x,this.dispatcher=k,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,E.extend(this,E.pick(O,["url","scheme","tileSize","promoteId"])),this._options=E.extend({type:"vector"},O),this._collectResourceTiming=O.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Z)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=tn(this._options,this.map._requestManager,function(O,k){x._tileJSONRequest=null,x._loaded=!0,O?x.fire(new E.ErrorEvent(O)):k&&(E.extend(x,k),k.bounds&&(x.tileBounds=new Le(k.bounds,x.minzoom,x.maxzoom)),E.postTurnstileEvent(k.tiles,x.map._requestManager._customAccessToken),E.postMapLoadEvent(k.tiles,x.map._getMapId(),x.map._requestManager._skuToken,x.map._requestManager._customAccessToken),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})},S.prototype.loaded=function(){return this._loaded},S.prototype.hasTile=function(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setSourceProperty=function(x){this._tileJSONRequest&&this._tileJSONRequest.cancel(),x(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},S.prototype.setTiles=function(x){var O=this;return this.setSourceProperty(function(){O._options.tiles=x}),this},S.prototype.setUrl=function(x){var O=this;return this.setSourceProperty(function(){O.url=x,O._options.url=x}),this},S.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},S.prototype.serialize=function(){return E.extend({},this._options)},S.prototype.loadTile=function(x,O){var k=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme)),Z={request:this.map._requestManager.transformRequest(k,E.ResourceType.Tile),uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,tileSize:this.tileSize*x.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:E.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Q(ge,je){return delete x.request,x.aborted?O(null):ge&&ge.status!==404?O(ge):(je&&je.resourceTiming&&(x.resourceTiming=je.resourceTiming),this.map._refreshExpiredTiles&&je&&x.setExpiryData(je),x.loadVectorData(je,this.map.painter),E.cacheEntryPossiblyAdded(this.dispatcher),O(null),void(x.reloadCallback&&(this.loadTile(x,x.reloadCallback),x.reloadCallback=null)))}Z.request.collectResourceTiming=this._collectResourceTiming,x.actor&&x.state!=="expired"?x.state==="loading"?x.reloadCallback=O:x.request=x.actor.send("reloadTile",Z,Q.bind(this)):(x.actor=this.dispatcher.getActor(),x.request=x.actor.send("loadTile",Z,Q.bind(this)))},S.prototype.abortTile=function(x){x.request&&(x.request.cancel(),delete x.request),x.actor&&x.actor.send("abortTile",{uid:x.uid,type:this.type,source:this.id},void 0)},S.prototype.unloadTile=function(x){x.unloadVectorData(),x.actor&&x.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id},void 0)},S.prototype.hasTransition=function(){return!1},S}(E.Evented),Me=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.dispatcher=k,this.setEventedParent(Z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=E.extend({type:"raster"},O),E.extend(this,E.pick(O,["url","scheme","tileSize"]))}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=tn(this._options,this.map._requestManager,function(O,k){x._tileJSONRequest=null,x._loaded=!0,O?x.fire(new E.ErrorEvent(O)):k&&(E.extend(x,k),k.bounds&&(x.tileBounds=new Le(k.bounds,x.minzoom,x.maxzoom)),E.postTurnstileEvent(k.tiles),E.postMapLoadEvent(k.tiles,x.map._getMapId(),x.map._requestManager._skuToken),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})),x.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})))})},S.prototype.loaded=function(){return this._loaded},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},S.prototype.serialize=function(){return E.extend({},this._options)},S.prototype.hasTile=function(x){return!this.tileBounds||this.tileBounds.contains(x.canonical)},S.prototype.loadTile=function(x,O){var k=this,Z=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);x.request=E.getImage(this.map._requestManager.transformRequest(Z,E.ResourceType.Tile),function(Q,ge){if(delete x.request,x.aborted)x.state="unloaded",O(null);else if(Q)x.state="errored",O(Q);else if(ge){k.map._refreshExpiredTiles&&x.setExpiryData(ge),delete ge.cacheControl,delete ge.expires;var je=k.map.painter.context,ft=je.gl;x.texture=k.map.painter.getTileTexture(ge.width),x.texture?x.texture.update(ge,{useMipmap:!0}):(x.texture=new E.Texture(je,ge,ft.RGBA,{useMipmap:!0}),x.texture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE,ft.LINEAR_MIPMAP_NEAREST),je.extTextureFilterAnisotropic&&ft.texParameterf(ft.TEXTURE_2D,je.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,je.extTextureFilterAnisotropicMax)),x.state="loaded",E.cacheEntryPossiblyAdded(k.dispatcher),O(null)}})},S.prototype.abortTile=function(x,O){x.request&&(x.request.cancel(),delete x.request),O()},S.prototype.unloadTile=function(x,O){x.texture&&this.map.painter.saveTileTexture(x.texture),O()},S.prototype.hasTransition=function(){return!1},S}(E.Evented),nt=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),this.type="raster-dem",this.maxzoom=22,this._options=E.extend({type:"raster-dem"},O),this.encoding=O.encoding||"mapbox"}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},S.prototype.loadTile=function(x,O){var k=this.map._requestManager.normalizeTileURL(x.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Z(Q,ge){Q&&(x.state="errored",O(Q)),ge&&(x.dem=ge,x.needsHillshadePrepare=!0,x.state="loaded",O(null))}x.request=E.getImage(this.map._requestManager.transformRequest(k,E.ResourceType.Tile),function(Q,ge){if(delete x.request,x.aborted)x.state="unloaded",O(null);else if(Q)x.state="errored",O(Q);else if(ge){this.map._refreshExpiredTiles&&x.setExpiryData(ge),delete ge.cacheControl,delete ge.expires;var je=E.window.ImageBitmap&&ge instanceof E.window.ImageBitmap&&E.offscreenCanvasSupported()?ge:E.browser.getImageData(ge,1),ft={uid:x.uid,coord:x.tileID,source:this.id,rawImageData:je,encoding:this.encoding};x.actor&&x.state!=="expired"||(x.actor=this.dispatcher.getActor(),x.actor.send("loadDEMTile",ft,Z.bind(this)))}}.bind(this)),x.neighboringTiles=this._getNeighboringTiles(x.tileID)},S.prototype._getNeighboringTiles=function(x){var O=x.canonical,k=Math.pow(2,O.z),Z=(O.x-1+k)%k,Q=O.x===0?x.wrap-1:x.wrap,ge=(O.x+1+k)%k,je=O.x+1===k?x.wrap+1:x.wrap,ft={};return ft[new E.OverscaledTileID(x.overscaledZ,Q,O.z,Z,O.y).key]={backfilled:!1},ft[new E.OverscaledTileID(x.overscaledZ,je,O.z,ge,O.y).key]={backfilled:!1},O.y>0&&(ft[new E.OverscaledTileID(x.overscaledZ,Q,O.z,Z,O.y-1).key]={backfilled:!1},ft[new E.OverscaledTileID(x.overscaledZ,x.wrap,O.z,O.x,O.y-1).key]={backfilled:!1},ft[new E.OverscaledTileID(x.overscaledZ,je,O.z,ge,O.y-1).key]={backfilled:!1}),O.y+1<k&&(ft[new E.OverscaledTileID(x.overscaledZ,Q,O.z,Z,O.y+1).key]={backfilled:!1},ft[new E.OverscaledTileID(x.overscaledZ,x.wrap,O.z,O.x,O.y+1).key]={backfilled:!1},ft[new E.OverscaledTileID(x.overscaledZ,je,O.z,ge,O.y+1).key]={backfilled:!1}),ft},S.prototype.unloadTile=function(x){x.demTexture&&this.map.painter.saveTileTexture(x.demTexture),x.fbo&&(x.fbo.destroy(),delete x.fbo),x.dem&&delete x.dem,delete x.neighboringTiles,x.state="unloaded",x.actor&&x.actor.send("removeDEMTile",{uid:x.uid,source:this.id})},S}(Me),qe=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=k.getActor(),this.setEventedParent(Z),this._data=O.data,this._options=E.extend({},O),this._collectResourceTiming=O.collectResourceTiming,this._resourceTiming=[],O.maxzoom!==void 0&&(this.maxzoom=O.maxzoom),O.type&&(this.type=O.type),O.attribution&&(this.attribution=O.attribution),this.promoteId=O.promoteId;var Q=E.EXTENT/this.tileSize;this.workerOptions=E.extend({source:this.id,cluster:O.cluster||!1,geojsonVtOptions:{buffer:(O.buffer!==void 0?O.buffer:128)*Q,tolerance:(O.tolerance!==void 0?O.tolerance:.375)*Q,extent:E.EXTENT,maxZoom:this.maxzoom,lineMetrics:O.lineMetrics||!1,generateId:O.generateId||!1},superclusterOptions:{maxZoom:O.clusterMaxZoom!==void 0?Math.min(O.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,O.clusterMinPoints||2),extent:E.EXTENT,radius:(O.clusterRadius||50)*Q,log:!1,generateId:O.generateId||!1},clusterProperties:O.clusterProperties,filter:O.filter},O.workerOptions)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this.fire(new E.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(O){if(O)x.fire(new E.ErrorEvent(O));else{var k={dataType:"source",sourceDataType:"metadata"};x._collectResourceTiming&&x._resourceTiming&&x._resourceTiming.length>0&&(k.resourceTiming=x._resourceTiming,x._resourceTiming=[]),x.fire(new E.Event("data",k))}})},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setData=function(x){var O=this;return this._data=x,this.fire(new E.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(k){if(k)O.fire(new E.ErrorEvent(k));else{var Z={dataType:"source",sourceDataType:"content"};O._collectResourceTiming&&O._resourceTiming&&O._resourceTiming.length>0&&(Z.resourceTiming=O._resourceTiming,O._resourceTiming=[]),O.fire(new E.Event("data",Z))}}),this},S.prototype.getClusterExpansionZoom=function(x,O){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:x,source:this.id},O),this},S.prototype.getClusterChildren=function(x,O){return this.actor.send("geojson.getClusterChildren",{clusterId:x,source:this.id},O),this},S.prototype.getClusterLeaves=function(x,O,k,Z){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:x,limit:O,offset:k},Z),this},S.prototype._updateWorkerData=function(x){var O=this;this._loaded=!1;var k=E.extend({},this.workerOptions),Z=this._data;typeof Z=="string"?(k.request=this.map._requestManager.transformRequest(E.browser.resolveURL(Z),E.ResourceType.Source),k.request.collectResourceTiming=this._collectResourceTiming):k.data=JSON.stringify(Z),this.actor.send(this.type+".loadData",k,function(Q,ge){O._removed||ge&&ge.abandoned||(O._loaded=!0,ge&&ge.resourceTiming&&ge.resourceTiming[O.id]&&(O._resourceTiming=ge.resourceTiming[O.id].slice(0)),O.actor.send(O.type+".coalesce",{source:k.source},null),x(Q))})},S.prototype.loaded=function(){return this._loaded},S.prototype.loadTile=function(x,O){var k=this,Z=x.actor?"reloadTile":"loadTile";x.actor=this.actor,x.request=this.actor.send(Z,{type:this.type,uid:x.uid,tileID:x.tileID,zoom:x.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:E.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Q,ge){return delete x.request,x.unloadVectorData(),x.aborted?O(null):Q?O(Q):(x.loadVectorData(ge,k.map.painter,Z==="reloadTile"),O(null))})},S.prototype.abortTile=function(x){x.request&&(x.request.cancel(),delete x.request),x.aborted=!0},S.prototype.unloadTile=function(x){x.unloadVectorData(),this.actor.send("removeTile",{uid:x.uid,type:this.type,source:this.id})},S.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},S.prototype.serialize=function(){return E.extend({},this._options,{type:this.type,data:this._data})},S.prototype.hasTransition=function(){return!1},S}(E.Evented),Ye=E.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Lt=function(_){function S(x,O,k,Z){_.call(this),this.id=x,this.dispatcher=k,this.coordinates=O.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Z),this.options=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(x,O){var k=this;this._loaded=!1,this.fire(new E.Event("dataloading",{dataType:"source"})),this.url=this.options.url,E.getImage(this.map._requestManager.transformRequest(this.url,E.ResourceType.Image),function(Z,Q){k._loaded=!0,Z?k.fire(new E.ErrorEvent(Z)):Q&&(k.image=Q,x&&(k.coordinates=x),O&&O(),k._finishLoading())})},S.prototype.loaded=function(){return this._loaded},S.prototype.updateImage=function(x){var O=this;return this.image&&x.url?(this.options.url=x.url,this.load(x.coordinates,function(){O.texture=null}),this):this},S.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"metadata"})))},S.prototype.onAdd=function(x){this.map=x,this.load()},S.prototype.setCoordinates=function(x){var O=this;this.coordinates=x;var k=x.map(E.MercatorCoordinate.fromLngLat);this.tileID=function(Q){for(var ge=1/0,je=1/0,ft=-1/0,Ut=-1/0,Vt=0,Zt=Q;Vt<Zt.length;Vt+=1){var En=Zt[Vt];ge=Math.min(ge,En.x),je=Math.min(je,En.y),ft=Math.max(ft,En.x),Ut=Math.max(Ut,En.y)}var mn=Math.max(ft-ge,Ut-je),Un=Math.max(0,Math.floor(-Math.log(mn)/Math.LN2)),ln=Math.pow(2,Un);return new E.CanonicalTileID(Un,Math.floor((ge+ft)/2*ln),Math.floor((je+Ut)/2*ln))}(k),this.minzoom=this.maxzoom=this.tileID.z;var Z=k.map(function(Q){return O.tileID.getTilePoint(Q)._round()});return this._boundsArray=new E.StructArrayLayout4i8,this._boundsArray.emplaceBack(Z[0].x,Z[0].y,0,0),this._boundsArray.emplaceBack(Z[1].x,Z[1].y,E.EXTENT,0),this._boundsArray.emplaceBack(Z[3].x,Z[3].y,0,E.EXTENT),this._boundsArray.emplaceBack(Z[2].x,Z[2].y,E.EXTENT,E.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new E.Event("data",{dataType:"source",sourceDataType:"content"})),this},S.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var x=this.map.painter.context,O=x.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new E.Texture(x,this.image,O.RGBA),this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE)),this.tiles){var Z=this.tiles[k];Z.state!=="loaded"&&(Z.state="loaded",Z.texture=this.texture)}}},S.prototype.loadTile=function(x,O){this.tileID&&this.tileID.equals(x.tileID.canonical)?(this.tiles[String(x.tileID.wrap)]=x,x.buckets={},O(null)):(x.state="errored",O(null))},S.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},S.prototype.hasTransition=function(){return!1},S}(E.Evented),xt=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),this.roundZoom=!0,this.type="video",this.options=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){var x=this;this._loaded=!1;var O=this.options;this.urls=[];for(var k=0,Z=O.urls;k<Z.length;k+=1)this.urls.push(this.map._requestManager.transformRequest(Z[k],E.ResourceType.Source).url);E.getVideo(this.urls,function(Q,ge){x._loaded=!0,Q?x.fire(new E.ErrorEvent(Q)):ge&&(x.video=ge,x.video.loop=!0,x.video.setAttribute("playsinline",""),x.video.addEventListener("playing",function(){x.map.triggerRepaint()}),x.map&&x.video.play(),x._finishLoading())})},S.prototype.pause=function(){this.video&&this.video.pause()},S.prototype.play=function(){this.video&&this.video.play()},S.prototype.seek=function(x){if(this.video){var O=this.video.seekable;x<O.start(0)||x>O.end(0)?this.fire(new E.ErrorEvent(new E.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+O.start(0)+" and "+O.end(0)+"-second mark."))):this.video.currentTime=x}},S.prototype.getVideo=function(){return this.video},S.prototype.onAdd=function(x){this.map||(this.map=x,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},S.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var x=this.map.painter.context,O=x.gl;for(var k in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE),O.texSubImage2D(O.TEXTURE_2D,0,0,0,O.RGBA,O.UNSIGNED_BYTE,this.video)):(this.texture=new E.Texture(x,this.video,O.RGBA),this.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE)),this.tiles){var Z=this.tiles[k];Z.state!=="loaded"&&(Z.state="loaded",Z.texture=this.texture)}}},S.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},S.prototype.hasTransition=function(){return this.video&&!this.video.paused},S}(Lt),Ie=function(_){function S(x,O,k,Z){_.call(this,x,O,k,Z),O.coordinates?Array.isArray(O.coordinates)&&O.coordinates.length===4&&!O.coordinates.some(function(Q){return!Array.isArray(Q)||Q.length!==2||Q.some(function(ge){return typeof ge!="number"})})||this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'missing required property "coordinates"'))),O.animate&&typeof O.animate!="boolean"&&this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'optional "animate" property must be a boolean value'))),O.canvas?typeof O.canvas=="string"||O.canvas instanceof E.window.HTMLCanvasElement||this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new E.ErrorEvent(new E.ValidationError("sources."+x,null,'missing required property "canvas"'))),this.options=O,this.animate=O.animate===void 0||O.animate}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof E.window.HTMLCanvasElement?this.options.canvas:E.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new E.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},S.prototype.getCanvas=function(){return this.canvas},S.prototype.onAdd=function(x){this.map=x,this.load(),this.canvas&&this.animate&&this.play()},S.prototype.onRemove=function(){this.pause()},S.prototype.prepare=function(){var x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var O=this.map.painter.context,k=O.gl;for(var Z in this.boundsBuffer||(this.boundsBuffer=O.createVertexBuffer(this._boundsArray,Ye.members)),this.boundsSegments||(this.boundsSegments=E.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new E.Texture(O,this.canvas,k.RGBA,{premultiply:!0}),this.tiles){var Q=this.tiles[Z];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},S.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},S.prototype.hasTransition=function(){return this._playing},S.prototype._hasInvalidDimensions=function(){for(var x=0,O=[this.canvas.width,this.canvas.height];x<O.length;x+=1){var k=O[x];if(isNaN(k)||k<=0)return!0}return!1},S}(Lt),Gt={vector:_t,raster:Me,"raster-dem":nt,geojson:qe,video:xt,image:Lt,canvas:Ie};function gn(_,S){var x=E.identity([]);return E.translate(x,x,[1,1,0]),E.scale(x,x,[.5*_.width,.5*_.height,1]),E.multiply(x,x,_.calculatePosMatrix(S.toUnwrapped()))}function Tn(_,S,x,O,k,Z){var Q=function(Un,ln,kn){if(Un)for(var Jn=0,gr=Un;Jn<gr.length;Jn+=1){var Ir=ln[gr[Jn]];if(Ir&&Ir.source===kn&&Ir.type==="fill-extrusion")return!0}else for(var Mr in ln){var Ur=ln[Mr];if(Ur.source===kn&&Ur.type==="fill-extrusion")return!0}return!1}(k&&k.layers,S,_.id),ge=Z.maxPitchScaleFactor(),je=_.tilesIn(O,ge,Q);je.sort(sr);for(var ft=[],Ut=0,Vt=je;Ut<Vt.length;Ut+=1){var Zt=Vt[Ut];ft.push({wrappedTileID:Zt.tileID.wrapped().key,queryResults:Zt.tile.queryRenderedFeatures(S,x,_._state,Zt.queryGeometry,Zt.cameraQueryGeometry,Zt.scale,k,Z,ge,gn(_.transform,Zt.tileID))})}var En=function(Un){for(var ln={},kn={},Jn=0,gr=Un;Jn<gr.length;Jn+=1){var Ir=gr[Jn],Mr=Ir.queryResults,Ur=Ir.wrappedTileID,si=kn[Ur]=kn[Ur]||{};for(var Vi in Mr)for(var Bi=Mr[Vi],vo=si[Vi]=si[Vi]||{},jo=ln[Vi]=ln[Vi]||[],Xo=0,Yo=Bi;Xo<Yo.length;Xo+=1){var cs=Yo[Xo];vo[cs.featureIndex]||(vo[cs.featureIndex]=!0,jo.push(cs))}}return ln}(ft);for(var mn in En)En[mn].forEach(function(Un){var ln=Un.feature,kn=_.getFeatureState(ln.layer["source-layer"],ln.id);ln.source=ln.layer.source,ln.layer["source-layer"]&&(ln.sourceLayer=ln.layer["source-layer"]),ln.state=kn});return En}function sr(_,S){var x=_.tileID,O=S.tileID;return x.overscaledZ-O.overscaledZ||x.canonical.y-O.canonical.y||x.wrap-O.wrap||x.canonical.x-O.canonical.x}var nr=function(_,S){this.max=_,this.onRemove=S,this.reset()};nr.prototype.reset=function(){for(var _ in this.data)for(var S=0,x=this.data[_];S<x.length;S+=1){var O=x[S];O.timeout&&clearTimeout(O.timeout),this.onRemove(O.value)}return this.data={},this.order=[],this},nr.prototype.add=function(_,S,x){var O=this,k=_.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);var Z={value:S,timeout:void 0};if(x!==void 0&&(Z.timeout=setTimeout(function(){O.remove(_,Z)},x)),this.data[k].push(Z),this.order.push(k),this.order.length>this.max){var Q=this._getAndRemoveByKey(this.order[0]);Q&&this.onRemove(Q)}return this},nr.prototype.has=function(_){return _.wrapped().key in this.data},nr.prototype.getAndRemove=function(_){return this.has(_)?this._getAndRemoveByKey(_.wrapped().key):null},nr.prototype._getAndRemoveByKey=function(_){var S=this.data[_].shift();return S.timeout&&clearTimeout(S.timeout),this.data[_].length===0&&delete this.data[_],this.order.splice(this.order.indexOf(_),1),S.value},nr.prototype.getByKey=function(_){var S=this.data[_];return S?S[0].value:null},nr.prototype.get=function(_){return this.has(_)?this.data[_.wrapped().key][0].value:null},nr.prototype.remove=function(_,S){if(!this.has(_))return this;var x=_.wrapped().key,O=S===void 0?0:this.data[x].indexOf(S),k=this.data[x][O];return this.data[x].splice(O,1),k.timeout&&clearTimeout(k.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(k.value),this.order.splice(this.order.indexOf(x),1),this},nr.prototype.setMaxSize=function(_){for(this.max=_;this.order.length>this.max;){var S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this},nr.prototype.filter=function(_){var S=[];for(var x in this.data)for(var O=0,k=this.data[x];O<k.length;O+=1){var Z=k[O];_(Z.value)||S.push(Z)}for(var Q=0,ge=S;Q<ge.length;Q+=1){var je=ge[Q];this.remove(je.value.tileID,je)}};var Ft=function(_,S,x){this.context=_;var O=_.gl;this.buffer=O.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),_.bindElementBuffer.set(this.buffer),O.bufferData(O.ELEMENT_ARRAY_BUFFER,S.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete S.arrayBuffer};Ft.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ft.prototype.updateData=function(_){var S=this.context.gl;this.context.unbindVAO(),this.bind(),S.bufferSubData(S.ELEMENT_ARRAY_BUFFER,0,_.arrayBuffer)},Ft.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Kt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},fn=function(_,S,x,O){this.length=S.length,this.attributes=x,this.itemSize=S.bytesPerElement,this.dynamicDraw=O,this.context=_;var k=_.gl;this.buffer=k.createBuffer(),_.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,S.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete S.arrayBuffer};fn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},fn.prototype.updateData=function(_){var S=this.context.gl;this.bind(),S.bufferSubData(S.ARRAY_BUFFER,0,_.arrayBuffer)},fn.prototype.enableAttributes=function(_,S){for(var x=0;x<this.attributes.length;x++){var O=S.attributes[this.attributes[x].name];O!==void 0&&_.enableVertexAttribArray(O)}},fn.prototype.setVertexAttribPointers=function(_,S,x){for(var O=0;O<this.attributes.length;O++){var k=this.attributes[O],Z=S.attributes[k.name];Z!==void 0&&_.vertexAttribPointer(Z,k.components,_[Kt[k.type]],!1,this.itemSize,k.offset+this.itemSize*(x||0))}},fn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Gn=function(_){this.gl=_.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Gn.prototype.get=function(){return this.current},Gn.prototype.set=function(_){},Gn.prototype.getDefault=function(){return this.default},Gn.prototype.setDefault=function(){this.set(this.default)};var on=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return E.Color.transparent},S.prototype.set=function(x){var O=this.current;(x.r!==O.r||x.g!==O.g||x.b!==O.b||x.a!==O.a||this.dirty)&&(this.gl.clearColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)},S}(Gn),Pt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 1},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.clearDepth(x),this.current=x,this.dirty=!1)},S}(Gn),zt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.clearStencil(x),this.current=x,this.dirty=!1)},S}(Gn),ze=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return[!0,!0,!0,!0]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||x[3]!==O[3]||this.dirty)&&(this.gl.colorMask(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)},S}(Gn),rt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.depthMask(x),this.current=x,this.dirty=!1)},S}(Gn),jt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 255},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.stencilMask(x),this.current=x,this.dirty=!1)},S}(Gn),U=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},S.prototype.set=function(x){var O=this.current;(x.func!==O.func||x.ref!==O.ref||x.mask!==O.mask||this.dirty)&&(this.gl.stencilFunc(x.func,x.ref,x.mask),this.current=x,this.dirty=!1)},S}(Gn),fe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[x.KEEP,x.KEEP,x.KEEP]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||this.dirty)&&(this.gl.stencilOp(x[0],x[1],x[2]),this.current=x,this.dirty=!1)},S}(Gn),at=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.STENCIL_TEST):O.disable(O.STENCIL_TEST),this.current=x,this.dirty=!1}},S}(Gn),de=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return[0,1]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||this.dirty)&&(this.gl.depthRange(x[0],x[1]),this.current=x,this.dirty=!1)},S}(Gn),$t=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.DEPTH_TEST):O.disable(O.DEPTH_TEST),this.current=x,this.dirty=!1}},S}(Gn),sn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.LESS},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.depthFunc(x),this.current=x,this.dirty=!1)},S}(Gn),pn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.BLEND):O.disable(O.BLEND),this.current=x,this.dirty=!1}},S}(Gn),Nn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[x.ONE,x.ZERO]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||this.dirty)&&(this.gl.blendFunc(x[0],x[1]),this.current=x,this.dirty=!1)},S}(Gn),Wn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return E.Color.transparent},S.prototype.set=function(x){var O=this.current;(x.r!==O.r||x.g!==O.g||x.b!==O.b||x.a!==O.a||this.dirty)&&(this.gl.blendColor(x.r,x.g,x.b,x.a),this.current=x,this.dirty=!1)},S}(Gn),qn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.FUNC_ADD},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.blendEquation(x),this.current=x,this.dirty=!1)},S}(Gn),dn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;x?O.enable(O.CULL_FACE):O.disable(O.CULL_FACE),this.current=x,this.dirty=!1}},S}(Gn),vt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.BACK},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.cullFace(x),this.current=x,this.dirty=!1)},S}(Gn),It=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.CCW},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.frontFace(x),this.current=x,this.dirty=!1)},S}(Gn),An=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.useProgram(x),this.current=x,this.dirty=!1)},S}(Gn),Dn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return this.gl.TEXTURE0},S.prototype.set=function(x){(x!==this.current||this.dirty)&&(this.gl.activeTexture(x),this.current=x,this.dirty=!1)},S}(Gn),Yn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){var x=this.gl;return[0,0,x.drawingBufferWidth,x.drawingBufferHeight]},S.prototype.set=function(x){var O=this.current;(x[0]!==O[0]||x[1]!==O[1]||x[2]!==O[2]||x[3]!==O[3]||this.dirty)&&(this.gl.viewport(x[0],x[1],x[2],x[3]),this.current=x,this.dirty=!1)},S}(Gn),dt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindFramebuffer(O.FRAMEBUFFER,x),this.current=x,this.dirty=!1}},S}(Gn),xe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindRenderbuffer(O.RENDERBUFFER,x),this.current=x,this.dirty=!1}},S}(Gn),Be=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindTexture(O.TEXTURE_2D,x),this.current=x,this.dirty=!1}},S}(Gn),st=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.bindBuffer(O.ARRAY_BUFFER,x),this.current=x,this.dirty=!1}},S}(Gn),Dt=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){var O=this.gl;O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,x),this.current=x,this.dirty=!1},S}(Gn),Ot=function(_){function S(x){_.call(this,x),this.vao=x.extVertexArrayObject}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S.prototype.set=function(x){this.vao&&(x!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(x),this.current=x,this.dirty=!1)},S}(Gn),Sn=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return 4},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_ALIGNMENT,x),this.current=x,this.dirty=!1}},S}(Gn),er=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),this.current=x,this.dirty=!1}},S}(Gn),br=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return!1},S.prototype.set=function(x){if(x!==this.current||this.dirty){var O=this.gl;O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,x),this.current=x,this.dirty=!1}},S}(Gn),$n=function(_){function S(x,O){_.call(this,x),this.context=x,this.parent=O}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getDefault=function(){return null},S}(Gn),Oe=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.setDirty=function(){this.dirty=!0},S.prototype.set=function(x){if(x!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var O=this.gl;O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,x,0),this.current=x,this.dirty=!1}},S}($n),we=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.set=function(x){if(x!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var O=this.gl;O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_ATTACHMENT,O.RENDERBUFFER,x),this.current=x,this.dirty=!1}},S}($n),Ve=function(_,S,x,O){this.context=_,this.width=S,this.height=x;var k=this.framebuffer=_.gl.createFramebuffer();this.colorAttachment=new Oe(_,k),O&&(this.depthAttachment=new we(_,k))};Ve.prototype.destroy=function(){var _=this.context.gl,S=this.colorAttachment.get();if(S&&_.deleteTexture(S),this.depthAttachment){var x=this.depthAttachment.get();x&&_.deleteRenderbuffer(x)}_.deleteFramebuffer(this.framebuffer)};var it=function(_,S,x){this.func=_,this.mask=S,this.range=x};it.ReadOnly=!1,it.ReadWrite=!0,it.disabled=new it(519,it.ReadOnly,[0,1]);var At=function(_,S,x,O,k,Z){this.test=_,this.ref=S,this.mask=x,this.fail=O,this.depthFail=k,this.pass=Z};At.disabled=new At({func:519,mask:0},0,0,7680,7680,7680);var qt=function(_,S,x){this.blendFunction=_,this.blendColor=S,this.mask=x};qt.disabled=new qt(qt.Replace=[1,0],E.Color.transparent,[!1,!1,!1,!1]),qt.unblended=new qt(qt.Replace,E.Color.transparent,[!0,!0,!0,!0]),qt.alphaBlended=new qt([1,771],E.Color.transparent,[!0,!0,!0,!0]);var un=function(_,S,x){this.enable=_,this.mode=S,this.frontFace=x};un.disabled=new un(!1,1029,2305),un.backCCW=new un(!0,1029,2305);var St=function(_){this.gl=_,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new on(this),this.clearDepth=new Pt(this),this.clearStencil=new zt(this),this.colorMask=new ze(this),this.depthMask=new rt(this),this.stencilMask=new jt(this),this.stencilFunc=new U(this),this.stencilOp=new fe(this),this.stencilTest=new at(this),this.depthRange=new de(this),this.depthTest=new $t(this),this.depthFunc=new sn(this),this.blend=new pn(this),this.blendFunc=new Nn(this),this.blendColor=new Wn(this),this.blendEquation=new qn(this),this.cullFace=new dn(this),this.cullFaceSide=new vt(this),this.frontFace=new It(this),this.program=new An(this),this.activeTexture=new Dn(this),this.viewport=new Yn(this),this.bindFramebuffer=new dt(this),this.bindRenderbuffer=new xe(this),this.bindTexture=new Be(this),this.bindVertexBuffer=new st(this),this.bindElementBuffer=new Dt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ot(this),this.pixelStoreUnpack=new Sn(this),this.pixelStoreUnpackPremultiplyAlpha=new er(this),this.pixelStoreUnpackFlipY=new br(this),this.extTextureFilterAnisotropic=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=_.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=_.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(_.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=_.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=_.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=_.getParameter(_.MAX_TEXTURE_SIZE)};St.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},St.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},St.prototype.createIndexBuffer=function(_,S){return new Ft(this,_,S)},St.prototype.createVertexBuffer=function(_,S,x){return new fn(this,_,S,x)},St.prototype.createRenderbuffer=function(_,S,x){var O=this.gl,k=O.createRenderbuffer();return this.bindRenderbuffer.set(k),O.renderbufferStorage(O.RENDERBUFFER,_,S,x),this.bindRenderbuffer.set(null),k},St.prototype.createFramebuffer=function(_,S,x){return new Ve(this,_,S,x)},St.prototype.clear=function(_){var S=_.color,x=_.depth,O=this.gl,k=0;S&&(k|=O.COLOR_BUFFER_BIT,this.clearColor.set(S),this.colorMask.set([!0,!0,!0,!0])),x!==void 0&&(k|=O.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(x),this.depthMask.set(!0)),O.clear(k)},St.prototype.setCullFace=function(_){_.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(_.mode),this.frontFace.set(_.frontFace))},St.prototype.setDepthMode=function(_){_.func!==this.gl.ALWAYS||_.mask?(this.depthTest.set(!0),this.depthFunc.set(_.func),this.depthMask.set(_.mask),this.depthRange.set(_.range)):this.depthTest.set(!1)},St.prototype.setStencilMode=function(_){_.test.func!==this.gl.ALWAYS||_.mask?(this.stencilTest.set(!0),this.stencilMask.set(_.mask),this.stencilOp.set([_.fail,_.depthFail,_.pass]),this.stencilFunc.set({func:_.test.func,ref:_.ref,mask:_.test.mask})):this.stencilTest.set(!1)},St.prototype.setColorMode=function(_){E.deepEqual(_.blendFunction,qt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(_.blendFunction),this.blendColor.set(_.blendColor)),this.colorMask.set(_.mask)},St.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Jt=function(_){function S(x,O,k){var Z=this;_.call(this),this.id=x,this.dispatcher=k,this.on("data",function(Q){Q.dataType==="source"&&Q.sourceDataType==="metadata"&&(Z._sourceLoaded=!0),Z._sourceLoaded&&!Z._paused&&Q.dataType==="source"&&Q.sourceDataType==="content"&&(Z.reload(),Z.transform&&Z.update(Z.transform))}),this.on("error",function(){Z._sourceErrored=!0}),this._source=function(Q,ge,je,ft){var Ut=new Gt[ge.type](Q,ge,je,ft);if(Ut.id!==Q)throw new Error("Expected Source id to be "+Q+" instead of "+Ut.id);return E.bindAll(["load","abort","unload","serialize","prepare"],Ut),Ut}(x,O,k,this),this._tiles={},this._cache=new nr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new E.SourceFeatureState}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.onAdd=function(x){this.map=x,this._maxTileCacheSize=x?x._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(x)},S.prototype.onRemove=function(x){this._source&&this._source.onRemove&&this._source.onRemove(x)},S.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var x in this._tiles){var O=this._tiles[x];if(O.state!=="loaded"&&O.state!=="errored")return!1}return!0},S.prototype.getSource=function(){return this._source},S.prototype.pause=function(){this._paused=!0},S.prototype.resume=function(){if(this._paused){var x=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,x&&this.reload(),this.transform&&this.update(this.transform)}},S.prototype._loadTile=function(x,O){return this._source.loadTile(x,O)},S.prototype._unloadTile=function(x){if(this._source.unloadTile)return this._source.unloadTile(x,function(){})},S.prototype._abortTile=function(x){if(this._source.abortTile)return this._source.abortTile(x,function(){})},S.prototype.serialize=function(){return this._source.serialize()},S.prototype.prepare=function(x){for(var O in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var k=this._tiles[O];k.upload(x),k.prepare(this.map.style.imageManager)}},S.prototype.getIds=function(){return E.values(this._tiles).map(function(x){return x.tileID}).sort(Qn).map(function(x){return x.key})},S.prototype.getRenderableIds=function(x){var O=this,k=[];for(var Z in this._tiles)this._isIdRenderable(Z,x)&&k.push(this._tiles[Z]);return x?k.sort(function(Q,ge){var je=Q.tileID,ft=ge.tileID,Ut=new E.Point(je.canonical.x,je.canonical.y)._rotate(O.transform.angle),Vt=new E.Point(ft.canonical.x,ft.canonical.y)._rotate(O.transform.angle);return je.overscaledZ-ft.overscaledZ||Vt.y-Ut.y||Vt.x-Ut.x}).map(function(Q){return Q.tileID.key}):k.map(function(Q){return Q.tileID}).sort(Qn).map(function(Q){return Q.key})},S.prototype.hasRenderableParent=function(x){var O=this.findLoadedParent(x,0);return!!O&&this._isIdRenderable(O.tileID.key)},S.prototype._isIdRenderable=function(x,O){return this._tiles[x]&&this._tiles[x].hasData()&&!this._coveredTiles[x]&&(O||!this._tiles[x].holdingForFade())},S.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var x in this._cache.reset(),this._tiles)this._tiles[x].state!=="errored"&&this._reloadTile(x,"reloading")},S.prototype._reloadTile=function(x,O){var k=this._tiles[x];k&&(k.state!=="loading"&&(k.state=O),this._loadTile(k,this._tileLoaded.bind(this,k,x,O)))},S.prototype._tileLoaded=function(x,O,k,Z){if(Z)return x.state="errored",void(Z.status!==404?this._source.fire(new E.ErrorEvent(Z,{tile:x})):this.update(this.transform));x.timeAdded=E.browser.now(),k==="expired"&&(x.refreshedUponExpiration=!0),this._setTileReloadTimer(O,x),this.getSource().type==="raster-dem"&&x.dem&&this._backfillDEM(x),this._state.initializeTileState(x,this.map?this.map.painter:null),this._source.fire(new E.Event("data",{dataType:"source",tile:x,coord:x.tileID}))},S.prototype._backfillDEM=function(x){for(var O=this.getRenderableIds(),k=0;k<O.length;k++){var Z=O[k];if(x.neighboringTiles&&x.neighboringTiles[Z]){var Q=this.getTileByID(Z);ge(x,Q),ge(Q,x)}}function ge(je,ft){je.needsHillshadePrepare=!0;var Ut=ft.tileID.canonical.x-je.tileID.canonical.x,Vt=ft.tileID.canonical.y-je.tileID.canonical.y,Zt=Math.pow(2,je.tileID.canonical.z),En=ft.tileID.key;Ut===0&&Vt===0||Math.abs(Vt)>1||(Math.abs(Ut)>1&&(Math.abs(Ut+Zt)===1?Ut+=Zt:Math.abs(Ut-Zt)===1&&(Ut-=Zt)),ft.dem&&je.dem&&(je.dem.backfillBorder(ft.dem,Ut,Vt),je.neighboringTiles&&je.neighboringTiles[En]&&(je.neighboringTiles[En].backfilled=!0)))}},S.prototype.getTile=function(x){return this.getTileByID(x.key)},S.prototype.getTileByID=function(x){return this._tiles[x]},S.prototype._retainLoadedChildren=function(x,O,k,Z){for(var Q in this._tiles){var ge=this._tiles[Q];if(!(Z[Q]||!ge.hasData()||ge.tileID.overscaledZ<=O||ge.tileID.overscaledZ>k)){for(var je=ge.tileID;ge&&ge.tileID.overscaledZ>O+1;){var ft=ge.tileID.scaledTo(ge.tileID.overscaledZ-1);(ge=this._tiles[ft.key])&&ge.hasData()&&(je=ft)}for(var Ut=je;Ut.overscaledZ>O;)if(x[(Ut=Ut.scaledTo(Ut.overscaledZ-1)).key]){Z[je.key]=je;break}}}},S.prototype.findLoadedParent=function(x,O){if(x.key in this._loadedParentTiles){var k=this._loadedParentTiles[x.key];return k&&k.tileID.overscaledZ>=O?k:null}for(var Z=x.overscaledZ-1;Z>=O;Z--){var Q=x.scaledTo(Z),ge=this._getLoadedTile(Q);if(ge)return ge}},S.prototype._getLoadedTile=function(x){var O=this._tiles[x.key];return O&&O.hasData()?O:this._cache.getByKey(x.wrapped().key)},S.prototype.updateCacheSize=function(x){var O=Math.ceil(x.width/this._source.tileSize)+1,k=Math.ceil(x.height/this._source.tileSize)+1,Z=Math.floor(O*k*5),Q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Z):Z;this._cache.setMaxSize(Q)},S.prototype.handleWrapJump=function(x){var O=Math.round((x-(this._prevLng===void 0?x:this._prevLng))/360);if(this._prevLng=x,O){var k={};for(var Z in this._tiles){var Q=this._tiles[Z];Q.tileID=Q.tileID.unwrapTo(Q.tileID.wrap+O),k[Q.tileID.key]=Q}for(var ge in this._tiles=k,this._timers)clearTimeout(this._timers[ge]),delete this._timers[ge];for(var je in this._tiles)this._setTileReloadTimer(je,this._tiles[je])}},S.prototype.update=function(x){var O=this;if(this.transform=x,this._sourceLoaded&&!this._paused){var k;this.updateCacheSize(x),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?k=x.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(si){return new E.OverscaledTileID(si.canonical.z,si.wrap,si.canonical.z,si.canonical.x,si.canonical.y)}):(k=x.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(k=k.filter(function(si){return O._source.hasTile(si)}))):k=[];var Z=x.coveringZoomLevel(this._source),Q=Math.max(Z-S.maxOverzooming,this._source.minzoom),ge=Math.max(Z+S.maxUnderzooming,this._source.minzoom),je=this._updateRetainedTiles(k,Z);if(Er(this._source.type)){for(var ft={},Ut={},Vt=0,Zt=Object.keys(je);Vt<Zt.length;Vt+=1){var En=Zt[Vt],mn=je[En],Un=this._tiles[En];if(Un&&!(Un.fadeEndTime&&Un.fadeEndTime<=E.browser.now())){var ln=this.findLoadedParent(mn,Q);ln&&(this._addTile(ln.tileID),ft[ln.tileID.key]=ln.tileID),Ut[En]=mn}}for(var kn in this._retainLoadedChildren(Ut,Z,ge,je),ft)je[kn]||(this._coveredTiles[kn]=!0,je[kn]=ft[kn])}for(var Jn in je)this._tiles[Jn].clearFadeHold();for(var gr=0,Ir=E.keysDifference(this._tiles,je);gr<Ir.length;gr+=1){var Mr=Ir[gr],Ur=this._tiles[Mr];Ur.hasSymbolBuckets&&!Ur.holdingForFade()?Ur.setHoldDuration(this.map._fadeDuration):Ur.hasSymbolBuckets&&!Ur.symbolFadeFinished()||this._removeTile(Mr)}this._updateLoadedParentTileCache()}},S.prototype.releaseSymbolFadeTiles=function(){for(var x in this._tiles)this._tiles[x].holdingForFade()&&this._removeTile(x)},S.prototype._updateRetainedTiles=function(x,O){for(var k={},Z={},Q=Math.max(O-S.maxOverzooming,this._source.minzoom),ge=Math.max(O+S.maxUnderzooming,this._source.minzoom),je={},ft=0,Ut=x;ft<Ut.length;ft+=1){var Vt=Ut[ft],Zt=this._addTile(Vt);k[Vt.key]=Vt,Zt.hasData()||O<this._source.maxzoom&&(je[Vt.key]=Vt)}this._retainLoadedChildren(je,O,ge,k);for(var En=0,mn=x;En<mn.length;En+=1){var Un=mn[En],ln=this._tiles[Un.key];if(!ln.hasData()){if(O+1>this._source.maxzoom){var kn=Un.children(this._source.maxzoom)[0],Jn=this.getTile(kn);if(Jn&&Jn.hasData()){k[kn.key]=kn;continue}}else{var gr=Un.children(this._source.maxzoom);if(k[gr[0].key]&&k[gr[1].key]&&k[gr[2].key]&&k[gr[3].key])continue}for(var Ir=ln.wasRequested(),Mr=Un.overscaledZ-1;Mr>=Q;--Mr){var Ur=Un.scaledTo(Mr);if(Z[Ur.key]||(Z[Ur.key]=!0,!(ln=this.getTile(Ur))&&Ir&&(ln=this._addTile(Ur)),ln&&(k[Ur.key]=Ur,Ir=ln.wasRequested(),ln.hasData())))break}}}return k},S.prototype._updateLoadedParentTileCache=function(){for(var x in this._loadedParentTiles={},this._tiles){for(var O=[],k=void 0,Z=this._tiles[x].tileID;Z.overscaledZ>0;){if(Z.key in this._loadedParentTiles){k=this._loadedParentTiles[Z.key];break}O.push(Z.key);var Q=Z.scaledTo(Z.overscaledZ-1);if(k=this._getLoadedTile(Q))break;Z=Q}for(var ge=0,je=O;ge<je.length;ge+=1)this._loadedParentTiles[je[ge]]=k}},S.prototype._addTile=function(x){var O=this._tiles[x.key];if(O)return O;(O=this._cache.getAndRemove(x))&&(this._setTileReloadTimer(x.key,O),O.tileID=x,this._state.initializeTileState(O,this.map?this.map.painter:null),this._cacheTimers[x.key]&&(clearTimeout(this._cacheTimers[x.key]),delete this._cacheTimers[x.key],this._setTileReloadTimer(x.key,O)));var k=!!O;return k||(O=new E.Tile(x,this._source.tileSize*x.overscaleFactor()),this._loadTile(O,this._tileLoaded.bind(this,O,x.key,O.state))),O?(O.uses++,this._tiles[x.key]=O,k||this._source.fire(new E.Event("dataloading",{tile:O,coord:O.tileID,dataType:"source"})),O):null},S.prototype._setTileReloadTimer=function(x,O){var k=this;x in this._timers&&(clearTimeout(this._timers[x]),delete this._timers[x]);var Z=O.getExpiryTimeout();Z&&(this._timers[x]=setTimeout(function(){k._reloadTile(x,"expired"),delete k._timers[x]},Z))},S.prototype._removeTile=function(x){var O=this._tiles[x];O&&(O.uses--,delete this._tiles[x],this._timers[x]&&(clearTimeout(this._timers[x]),delete this._timers[x]),O.uses>0||(O.hasData()&&O.state!=="reloading"?this._cache.add(O.tileID,O,O.getExpiryTimeout()):(O.aborted=!0,this._abortTile(O),this._unloadTile(O))))},S.prototype.clearTiles=function(){for(var x in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(x);this._cache.reset()},S.prototype.tilesIn=function(x,O,k){var Z=this,Q=[],ge=this.transform;if(!ge)return Q;for(var je=k?ge.getCameraQueryGeometry(x):x,ft=x.map(function(Mr){return ge.pointCoordinate(Mr)}),Ut=je.map(function(Mr){return ge.pointCoordinate(Mr)}),Vt=this.getIds(),Zt=1/0,En=1/0,mn=-1/0,Un=-1/0,ln=0,kn=Ut;ln<kn.length;ln+=1){var Jn=kn[ln];Zt=Math.min(Zt,Jn.x),En=Math.min(En,Jn.y),mn=Math.max(mn,Jn.x),Un=Math.max(Un,Jn.y)}for(var gr=function(Mr){var Ur=Z._tiles[Vt[Mr]];if(!Ur.holdingForFade()){var si=Ur.tileID,Vi=Math.pow(2,ge.zoom-Ur.tileID.overscaledZ),Bi=O*Ur.queryPadding*E.EXTENT/Ur.tileSize/Vi,vo=[si.getTilePoint(new E.MercatorCoordinate(Zt,En)),si.getTilePoint(new E.MercatorCoordinate(mn,Un))];if(vo[0].x-Bi<E.EXTENT&&vo[0].y-Bi<E.EXTENT&&vo[1].x+Bi>=0&&vo[1].y+Bi>=0){var jo=ft.map(function(Yo){return si.getTilePoint(Yo)}),Xo=Ut.map(function(Yo){return si.getTilePoint(Yo)});Q.push({tile:Ur,tileID:si,queryGeometry:jo,cameraQueryGeometry:Xo,scale:Vi})}}},Ir=0;Ir<Vt.length;Ir++)gr(Ir);return Q},S.prototype.getVisibleCoordinates=function(x){for(var O=this,k=this.getRenderableIds(x).map(function(je){return O._tiles[je].tileID}),Z=0,Q=k;Z<Q.length;Z+=1){var ge=Q[Z];ge.posMatrix=this.transform.calculatePosMatrix(ge.toUnwrapped())}return k},S.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Er(this._source.type))for(var x in this._tiles){var O=this._tiles[x];if(O.fadeEndTime!==void 0&&O.fadeEndTime>=E.browser.now())return!0}return!1},S.prototype.setFeatureState=function(x,O,k){this._state.updateState(x=x||"_geojsonTileLayer",O,k)},S.prototype.removeFeatureState=function(x,O,k){this._state.removeFeatureState(x=x||"_geojsonTileLayer",O,k)},S.prototype.getFeatureState=function(x,O){return this._state.getState(x=x||"_geojsonTileLayer",O)},S.prototype.setDependencies=function(x,O,k){var Z=this._tiles[x];Z&&Z.setDependencies(O,k)},S.prototype.reloadTilesForDependencies=function(x,O){for(var k in this._tiles)this._tiles[k].hasDependency(x,O)&&this._reloadTile(k,"reloading");this._cache.filter(function(Z){return!Z.hasDependency(x,O)})},S}(E.Evented);function Qn(_,S){var x=Math.abs(2*_.wrap)-+(_.wrap<0),O=Math.abs(2*S.wrap)-+(S.wrap<0);return _.overscaledZ-S.overscaledZ||O-x||S.canonical.y-_.canonical.y||S.canonical.x-_.canonical.x}function Er(_){return _==="raster"||_==="image"||_==="video"}function Gr(){return new E.window.Worker(y0.workerUrl)}Jt.maxOverzooming=10,Jt.maxUnderzooming=3;var mr="mapboxgl_preloaded_worker_pool",Hr=function(){this.active={}};Hr.prototype.acquire=function(_){if(!this.workers)for(this.workers=[];this.workers.length<Hr.workerCount;)this.workers.push(new Gr);return this.active[_]=!0,this.workers.slice()},Hr.prototype.release=function(_){delete this.active[_],this.numActive()===0&&(this.workers.forEach(function(S){S.terminate()}),this.workers=null)},Hr.prototype.isPreloaded=function(){return!!this.active[mr]},Hr.prototype.numActive=function(){return Object.keys(this.active).length};var wi,Pi=Math.floor(E.browser.hardwareConcurrency/2);function wr(){return wi||(wi=new Hr),wi}function gi(_,S){var x={};for(var O in _)O!=="ref"&&(x[O]=_[O]);return E.refProperties.forEach(function(k){k in S&&(x[k]=S[k])}),x}function di(_){_=_.slice();for(var S=Object.create(null),x=0;x<_.length;x++)S[_[x].id]=_[x];for(var O=0;O<_.length;O++)"ref"in _[O]&&(_[O]=gi(_[O],S[_[O].ref]));return _}Hr.workerCount=Math.max(Math.min(Pi,6),1);var xi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Fo(_,S,x){x.push({command:xi.addSource,args:[_,S[_]]})}function Ai(_,S,x){S.push({command:xi.removeSource,args:[_]}),x[_]=!0}function ea(_,S,x,O){Ai(_,x,O),Fo(_,S,x)}function _a(_,S,x){var O;for(O in _[x])if(_[x].hasOwnProperty(O)&&O!=="data"&&!E.deepEqual(_[x][O],S[x][O]))return!1;for(O in S[x])if(S[x].hasOwnProperty(O)&&O!=="data"&&!E.deepEqual(_[x][O],S[x][O]))return!1;return!0}function fi(_,S,x,O,k,Z){var Q;for(Q in S=S||{},_=_||{})_.hasOwnProperty(Q)&&(E.deepEqual(_[Q],S[Q])||x.push({command:Z,args:[O,Q,S[Q],k]}));for(Q in S)S.hasOwnProperty(Q)&&!_.hasOwnProperty(Q)&&(E.deepEqual(_[Q],S[Q])||x.push({command:Z,args:[O,Q,S[Q],k]}))}function Ji(_){return _.id}function $e(_,S){return _[S.id]=S,_}var ht=function(_,S){this.reset(_,S)};ht.prototype.reset=function(_,S){this.points=_||[],this._distances=[0];for(var x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(S||0,.5*this.length),this.paddedLength=this.length-2*this.padding},ht.prototype.lerp=function(_){if(this.points.length===1)return this.points[0];_=E.clamp(_,0,1);for(var S=1,x=this._distances[S],O=_*this.paddedLength+this.padding;x<O&&S<this._distances.length;)x=this._distances[++S];var k=S-1,Z=this._distances[k],Q=x-Z,ge=Q>0?(O-Z)/Q:0;return this.points[k].mult(1-ge).add(this.points[S].mult(ge))};var Ht=function(_,S,x){var O=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(_/x),this.yCellCount=Math.ceil(S/x);for(var Z=0;Z<this.xCellCount*this.yCellCount;Z++)O.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=_,this.height=S,this.xScale=this.xCellCount/_,this.yScale=this.yCellCount/S,this.boxUid=0,this.circleUid=0};function hn(_,S,x,O,k){var Z=E.create();return S?(E.scale(Z,Z,[1/k,1/k,1]),x||E.rotateZ(Z,Z,O.angle)):E.multiply(Z,O.labelPlaneMatrix,_),Z}function Fn(_,S,x,O,k){if(S){var Z=E.clone(_);return E.scale(Z,Z,[k,k,1]),x||E.rotateZ(Z,Z,-O.angle),Z}return O.glCoordMatrix}function Bn(_,S){var x=[_.x,_.y,0,1];Yr(x,x,S);var O=x[3];return{point:new E.Point(x[0]/O,x[1]/O),signedDistanceFromCamera:O}}function yn(_,S){return .5+_/S*.5}function On(_,S){var x=_[0]/_[3],O=_[1]/_[3];return x>=-S[0]&&x<=S[0]&&O>=-S[1]&&O<=S[1]}function pr(_,S,x,O,k,Z,Q,ge){var je=O?_.textSizeData:_.iconSizeData,ft=E.evaluateSizeForZoom(je,x.transform.zoom),Ut=[256/x.width*2+1,256/x.height*2+1],Vt=O?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;Vt.clear();for(var Zt=_.lineVertexArray,En=O?_.text.placedSymbolArray:_.icon.placedSymbolArray,mn=x.transform.width/x.transform.height,Un=!1,ln=0;ln<En.length;ln++){var kn=En.get(ln);if(kn.hidden||kn.writingMode===E.WritingMode.vertical&&!Un)ji(kn.numGlyphs,Vt);else{Un=!1;var Jn=[kn.anchorX,kn.anchorY,0,1];if(E.transformMat4(Jn,Jn,S),On(Jn,Ut)){var gr=yn(x.transform.cameraToCenterDistance,Jn[3]),Ir=E.evaluateSizeForFeature(je,ft,kn),Mr=Q?Ir/gr:Ir*gr,Ur=new E.Point(kn.anchorX,kn.anchorY),si=Bn(Ur,k).point,Vi={},Bi=Xi(kn,Mr,!1,ge,S,k,Z,_.glyphOffsetArray,Zt,Vt,si,Ur,Vi,mn);Un=Bi.useVertical,(Bi.notEnoughRoom||Un||Bi.needsFlipping&&Xi(kn,Mr,!0,ge,S,k,Z,_.glyphOffsetArray,Zt,Vt,si,Ur,Vi,mn).notEnoughRoom)&&ji(kn.numGlyphs,Vt)}else ji(kn.numGlyphs,Vt)}}O?_.text.dynamicLayoutVertexBuffer.updateData(Vt):_.icon.dynamicLayoutVertexBuffer.updateData(Vt)}function hr(_,S,x,O,k,Z,Q,ge,je,ft,Ut){var Vt=ge.glyphStartIndex+ge.numGlyphs,Zt=ge.lineStartIndex,En=ge.lineStartIndex+ge.lineLength,mn=S.getoffsetX(ge.glyphStartIndex),Un=S.getoffsetX(Vt-1),ln=ai(_*mn,x,O,k,Z,Q,ge.segment,Zt,En,je,ft,Ut);if(!ln)return null;var kn=ai(_*Un,x,O,k,Z,Q,ge.segment,Zt,En,je,ft,Ut);return kn?{first:ln,last:kn}:null}function oi(_,S,x,O){return _===E.WritingMode.horizontal&&Math.abs(x.y-S.y)>Math.abs(x.x-S.x)*O?{useVertical:!0}:(_===E.WritingMode.vertical?S.y<x.y:S.x>x.x)?{needsFlipping:!0}:null}function Xi(_,S,x,O,k,Z,Q,ge,je,ft,Ut,Vt,Zt,En){var mn,Un=S/24,ln=_.lineOffsetX*Un,kn=_.lineOffsetY*Un;if(_.numGlyphs>1){var Jn=_.glyphStartIndex+_.numGlyphs,gr=_.lineStartIndex,Ir=_.lineStartIndex+_.lineLength,Mr=hr(Un,ge,ln,kn,x,Ut,Vt,_,je,Z,Zt);if(!Mr)return{notEnoughRoom:!0};var Ur=Bn(Mr.first.point,Q).point,si=Bn(Mr.last.point,Q).point;if(O&&!x){var Vi=oi(_.writingMode,Ur,si,En);if(Vi)return Vi}mn=[Mr.first];for(var Bi=_.glyphStartIndex+1;Bi<Jn-1;Bi++)mn.push(ai(Un*ge.getoffsetX(Bi),ln,kn,x,Ut,Vt,_.segment,gr,Ir,je,Z,Zt));mn.push(Mr.last)}else{if(O&&!x){var vo=Bn(Vt,k).point,jo=_.lineStartIndex+_.segment+1,Xo=new E.Point(je.getx(jo),je.gety(jo)),Yo=Bn(Xo,k),cs=Yo.signedDistanceFromCamera>0?Yo.point:io(Vt,Xo,vo,1,k),Dr=oi(_.writingMode,vo,cs,En);if(Dr)return Dr}var Qt=ai(Un*ge.getoffsetX(_.glyphStartIndex),ln,kn,x,Ut,Vt,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,je,Z,Zt);if(!Qt)return{notEnoughRoom:!0};mn=[Qt]}for(var ga=0,fa=mn;ga<fa.length;ga+=1){var Qo=fa[ga];E.addDynamicAttributes(ft,Qo.point,Qo.angle)}return{}}function io(_,S,x,O,k){var Z=Bn(_.add(_.sub(S)._unit()),k).point,Q=x.sub(Z);return x.add(Q._mult(O/Q.mag()))}function ai(_,S,x,O,k,Z,Q,ge,je,ft,Ut,Vt){var Zt=O?_-S:_+S,En=Zt>0?1:-1,mn=0;O&&(En*=-1,mn=Math.PI),En<0&&(mn+=Math.PI);for(var Un=En>0?ge+Q:ge+Q+1,ln=k,kn=k,Jn=0,gr=0,Ir=Math.abs(Zt),Mr=[];Jn+gr<=Ir;){if((Un+=En)<ge||Un>=je)return null;if(kn=ln,Mr.push(ln),(ln=Vt[Un])===void 0){var Ur=new E.Point(ft.getx(Un),ft.gety(Un)),si=Bn(Ur,Ut);if(si.signedDistanceFromCamera>0)ln=Vt[Un]=si.point;else{var Vi=Un-En;ln=io(Jn===0?Z:new E.Point(ft.getx(Vi),ft.gety(Vi)),Ur,kn,Ir-Jn+1,Ut)}}Jn+=gr,gr=kn.dist(ln)}var Bi=(Ir-Jn)/gr,vo=ln.sub(kn),jo=vo.mult(Bi)._add(kn);jo._add(vo._unit()._perp()._mult(x*En));var Xo=mn+Math.atan2(ln.y-kn.y,ln.x-kn.x);return Mr.push(jo),{point:jo,angle:Xo,path:Mr}}Ht.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ht.prototype.insert=function(_,S,x,O,k){this._forEachCell(S,x,O,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(_),this.bboxes.push(S),this.bboxes.push(x),this.bboxes.push(O),this.bboxes.push(k)},Ht.prototype.insertCircle=function(_,S,x,O){this._forEachCell(S-O,x-O,S+O,x+O,this._insertCircleCell,this.circleUid++),this.circleKeys.push(_),this.circles.push(S),this.circles.push(x),this.circles.push(O)},Ht.prototype._insertBoxCell=function(_,S,x,O,k,Z){this.boxCells[k].push(Z)},Ht.prototype._insertCircleCell=function(_,S,x,O,k,Z){this.circleCells[k].push(Z)},Ht.prototype._query=function(_,S,x,O,k,Z){if(x<0||_>this.width||O<0||S>this.height)return!k&&[];var Q=[];if(_<=0&&S<=0&&this.width<=x&&this.height<=O){if(k)return!0;for(var ge=0;ge<this.boxKeys.length;ge++)Q.push({key:this.boxKeys[ge],x1:this.bboxes[4*ge],y1:this.bboxes[4*ge+1],x2:this.bboxes[4*ge+2],y2:this.bboxes[4*ge+3]});for(var je=0;je<this.circleKeys.length;je++){var ft=this.circles[3*je],Ut=this.circles[3*je+1],Vt=this.circles[3*je+2];Q.push({key:this.circleKeys[je],x1:ft-Vt,y1:Ut-Vt,x2:ft+Vt,y2:Ut+Vt})}return Z?Q.filter(Z):Q}return this._forEachCell(_,S,x,O,this._queryCell,Q,{hitTest:k,seenUids:{box:{},circle:{}}},Z),k?Q.length>0:Q},Ht.prototype._queryCircle=function(_,S,x,O,k){var Z=_-x,Q=_+x,ge=S-x,je=S+x;if(Q<0||Z>this.width||je<0||ge>this.height)return!O&&[];var ft=[];return this._forEachCell(Z,ge,Q,je,this._queryCellCircle,ft,{hitTest:O,circle:{x:_,y:S,radius:x},seenUids:{box:{},circle:{}}},k),O?ft.length>0:ft},Ht.prototype.query=function(_,S,x,O,k){return this._query(_,S,x,O,!1,k)},Ht.prototype.hitTest=function(_,S,x,O,k){return this._query(_,S,x,O,!0,k)},Ht.prototype.hitTestCircle=function(_,S,x,O){return this._queryCircle(_,S,x,!0,O)},Ht.prototype._queryCell=function(_,S,x,O,k,Z,Q,ge){var je=Q.seenUids,ft=this.boxCells[k];if(ft!==null)for(var Ut=this.bboxes,Vt=0,Zt=ft;Vt<Zt.length;Vt+=1){var En=Zt[Vt];if(!je.box[En]){je.box[En]=!0;var mn=4*En;if(_<=Ut[mn+2]&&S<=Ut[mn+3]&&x>=Ut[mn+0]&&O>=Ut[mn+1]&&(!ge||ge(this.boxKeys[En]))){if(Q.hitTest)return Z.push(!0),!0;Z.push({key:this.boxKeys[En],x1:Ut[mn],y1:Ut[mn+1],x2:Ut[mn+2],y2:Ut[mn+3]})}}}var Un=this.circleCells[k];if(Un!==null)for(var ln=this.circles,kn=0,Jn=Un;kn<Jn.length;kn+=1){var gr=Jn[kn];if(!je.circle[gr]){je.circle[gr]=!0;var Ir=3*gr;if(this._circleAndRectCollide(ln[Ir],ln[Ir+1],ln[Ir+2],_,S,x,O)&&(!ge||ge(this.circleKeys[gr]))){if(Q.hitTest)return Z.push(!0),!0;var Mr=ln[Ir],Ur=ln[Ir+1],si=ln[Ir+2];Z.push({key:this.circleKeys[gr],x1:Mr-si,y1:Ur-si,x2:Mr+si,y2:Ur+si})}}}},Ht.prototype._queryCellCircle=function(_,S,x,O,k,Z,Q,ge){var je=Q.circle,ft=Q.seenUids,Ut=this.boxCells[k];if(Ut!==null)for(var Vt=this.bboxes,Zt=0,En=Ut;Zt<En.length;Zt+=1){var mn=En[Zt];if(!ft.box[mn]){ft.box[mn]=!0;var Un=4*mn;if(this._circleAndRectCollide(je.x,je.y,je.radius,Vt[Un+0],Vt[Un+1],Vt[Un+2],Vt[Un+3])&&(!ge||ge(this.boxKeys[mn])))return Z.push(!0),!0}}var ln=this.circleCells[k];if(ln!==null)for(var kn=this.circles,Jn=0,gr=ln;Jn<gr.length;Jn+=1){var Ir=gr[Jn];if(!ft.circle[Ir]){ft.circle[Ir]=!0;var Mr=3*Ir;if(this._circlesCollide(kn[Mr],kn[Mr+1],kn[Mr+2],je.x,je.y,je.radius)&&(!ge||ge(this.circleKeys[Ir])))return Z.push(!0),!0}}},Ht.prototype._forEachCell=function(_,S,x,O,k,Z,Q,ge){for(var je=this._convertToXCellCoord(_),ft=this._convertToYCellCoord(S),Ut=this._convertToXCellCoord(x),Vt=this._convertToYCellCoord(O),Zt=je;Zt<=Ut;Zt++)for(var En=ft;En<=Vt;En++)if(k.call(this,_,S,x,O,this.xCellCount*En+Zt,Z,Q,ge))return},Ht.prototype._convertToXCellCoord=function(_){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(_*this.xScale)))},Ht.prototype._convertToYCellCoord=function(_){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(_*this.yScale)))},Ht.prototype._circlesCollide=function(_,S,x,O,k,Z){var Q=O-_,ge=k-S,je=x+Z;return je*je>Q*Q+ge*ge},Ht.prototype._circleAndRectCollide=function(_,S,x,O,k,Z,Q){var ge=(Z-O)/2,je=Math.abs(_-(O+ge));if(je>ge+x)return!1;var ft=(Q-k)/2,Ut=Math.abs(S-(k+ft));if(Ut>ft+x)return!1;if(je<=ge||Ut<=ft)return!0;var Vt=je-ge,Zt=Ut-ft;return Vt*Vt+Zt*Zt<=x*x};var Yi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ji(_,S){for(var x=0;x<_;x++){var O=S.length;S.resize(O+4),S.float32.set(Yi,3*O)}}function Yr(_,S,x){var O=S[0],k=S[1];return _[0]=x[0]*O+x[4]*k+x[12],_[1]=x[1]*O+x[5]*k+x[13],_[3]=x[3]*O+x[7]*k+x[15],_}var To=function(_,S,x){S===void 0&&(S=new Ht(_.width+200,_.height+200,25)),x===void 0&&(x=new Ht(_.width+200,_.height+200,25)),this.transform=_,this.grid=S,this.ignoredGrid=x,this.pitchfactor=Math.cos(_._pitch)*_.cameraToCenterDistance,this.screenRightBoundary=_.width+100,this.screenBottomBoundary=_.height+100,this.gridRightBoundary=_.width+200,this.gridBottomBoundary=_.height+200};function mi(_,S,x){return S*(E.EXTENT/(_.tileSize*Math.pow(2,x-_.tileID.overscaledZ)))}To.prototype.placeCollisionBox=function(_,S,x,O,k){var Z=this.projectAndGetPerspectiveRatio(O,_.anchorPointX,_.anchorPointY),Q=x*Z.perspectiveRatio,ge=_.x1*Q+Z.point.x,je=_.y1*Q+Z.point.y,ft=_.x2*Q+Z.point.x,Ut=_.y2*Q+Z.point.y;return!this.isInsideGrid(ge,je,ft,Ut)||!S&&this.grid.hitTest(ge,je,ft,Ut,k)?{box:[],offscreen:!1}:{box:[ge,je,ft,Ut],offscreen:this.isOffscreen(ge,je,ft,Ut)}},To.prototype.placeCollisionCircles=function(_,S,x,O,k,Z,Q,ge,je,ft,Ut,Vt,Zt){var En=[],mn=new E.Point(S.anchorX,S.anchorY),Un=Bn(mn,Z),ln=yn(this.transform.cameraToCenterDistance,Un.signedDistanceFromCamera),kn=(ft?k/ln:k*ln)/E.ONE_EM,Jn=Bn(mn,Q).point,gr=hr(kn,O,S.lineOffsetX*kn,S.lineOffsetY*kn,!1,Jn,mn,S,x,Q,{}),Ir=!1,Mr=!1,Ur=!0;if(gr){for(var si=.5*Vt*ln+Zt,Vi=new E.Point(-100,-100),Bi=new E.Point(this.screenRightBoundary,this.screenBottomBoundary),vo=new ht,jo=gr.first,Xo=gr.last,Yo=[],cs=jo.path.length-1;cs>=1;cs--)Yo.push(jo.path[cs]);for(var Dr=1;Dr<Xo.path.length;Dr++)Yo.push(Xo.path[Dr]);var Qt=2.5*si;if(ge){var ga=Yo.map(function(Vc){return Bn(Vc,ge)});Yo=ga.some(function(Vc){return Vc.signedDistanceFromCamera<=0})?[]:ga.map(function(Vc){return Vc.point})}var fa=[];if(Yo.length>0){for(var Qo=Yo[0].clone(),Ea=Yo[0].clone(),aa=1;aa<Yo.length;aa++)Qo.x=Math.min(Qo.x,Yo[aa].x),Qo.y=Math.min(Qo.y,Yo[aa].y),Ea.x=Math.max(Ea.x,Yo[aa].x),Ea.y=Math.max(Ea.y,Yo[aa].y);fa=Qo.x>=Vi.x&&Ea.x<=Bi.x&&Qo.y>=Vi.y&&Ea.y<=Bi.y?[Yo]:Ea.x<Vi.x||Qo.x>Bi.x||Ea.y<Vi.y||Qo.y>Bi.y?[]:E.clipLine([Yo],Vi.x,Vi.y,Bi.x,Bi.y)}for(var ko=0,au=fa;ko<au.length;ko+=1){var xl;vo.reset(au[ko],.25*si),xl=vo.length<=.5*si?1:Math.ceil(vo.paddedLength/Qt)+1;for(var Cu=0;Cu<xl;Cu++){var su=Cu/Math.max(xl-1,1),Ss=vo.lerp(su),vl=Ss.x+100,fl=Ss.y+100;En.push(vl,fl,si,0);var vc=vl-si,Wf=fl-si,Tc=vl+si,df=fl+si;if(Ur=Ur&&this.isOffscreen(vc,Wf,Tc,df),Mr=Mr||this.isInsideGrid(vc,Wf,Tc,df),!_&&this.grid.hitTestCircle(vl,fl,si,Ut)&&(Ir=!0,!je))return{circles:[],offscreen:!1,collisionDetected:Ir}}}}return{circles:!je&&Ir||!Mr?[]:En,offscreen:Ur,collisionDetected:Ir}},To.prototype.queryRenderedSymbols=function(_){if(_.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var S=[],x=1/0,O=1/0,k=-1/0,Z=-1/0,Q=0,ge=_;Q<ge.length;Q+=1){var je=ge[Q],ft=new E.Point(je.x+100,je.y+100);x=Math.min(x,ft.x),O=Math.min(O,ft.y),k=Math.max(k,ft.x),Z=Math.max(Z,ft.y),S.push(ft)}for(var Ut={},Vt={},Zt=0,En=this.grid.query(x,O,k,Z).concat(this.ignoredGrid.query(x,O,k,Z));Zt<En.length;Zt+=1){var mn=En[Zt],Un=mn.key;if(Ut[Un.bucketInstanceId]===void 0&&(Ut[Un.bucketInstanceId]={}),!Ut[Un.bucketInstanceId][Un.featureIndex]){var ln=[new E.Point(mn.x1,mn.y1),new E.Point(mn.x2,mn.y1),new E.Point(mn.x2,mn.y2),new E.Point(mn.x1,mn.y2)];E.polygonIntersectsPolygon(S,ln)&&(Ut[Un.bucketInstanceId][Un.featureIndex]=!0,Vt[Un.bucketInstanceId]===void 0&&(Vt[Un.bucketInstanceId]=[]),Vt[Un.bucketInstanceId].push(Un.featureIndex))}}return Vt},To.prototype.insertCollisionBox=function(_,S,x,O,k){(S?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:O,collisionGroupID:k},_[0],_[1],_[2],_[3])},To.prototype.insertCollisionCircles=function(_,S,x,O,k){for(var Z=S?this.ignoredGrid:this.grid,Q={bucketInstanceId:x,featureIndex:O,collisionGroupID:k},ge=0;ge<_.length;ge+=4)Z.insertCircle(Q,_[ge],_[ge+1],_[ge+2])},To.prototype.projectAndGetPerspectiveRatio=function(_,S,x){var O=[S,x,0,1];return Yr(O,O,_),{point:new E.Point((O[0]/O[3]+1)/2*this.transform.width+100,(-O[1]/O[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/O[3]*.5}},To.prototype.isOffscreen=function(_,S,x,O){return x<100||_>=this.screenRightBoundary||O<100||S>this.screenBottomBoundary},To.prototype.isInsideGrid=function(_,S,x,O){return x>=0&&_<this.gridRightBoundary&&O>=0&&S<this.gridBottomBoundary},To.prototype.getViewportMatrix=function(){var _=E.identity([]);return E.translate(_,_,[-100,-100,0]),_};var wo=function(_,S,x,O){this.opacity=_?Math.max(0,Math.min(1,_.opacity+(_.placed?S:-S))):O&&x?1:0,this.placed=x};wo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var $i=function(_,S,x,O,k){this.text=new wo(_?_.text:null,S,x,k),this.icon=new wo(_?_.icon:null,S,O,k)};$i.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var co=function(_,S,x){this.text=_,this.icon=S,this.skipFade=x},Mo=function(){this.invProjMatrix=E.create(),this.viewportMatrix=E.create(),this.circles=[]},bs=function(_,S,x,O,k){this.bucketInstanceId=_,this.featureIndex=S,this.sourceLayerIndex=x,this.bucketIndex=O,this.tileID=k},ba=function(_){this.crossSourceCollisions=_,this.maxGroupID=0,this.collisionGroups={}};function ra(_,S,x,O,k){var Z=E.getAnchorAlignment(_),Q=-(Z.horizontalAlign-.5)*S,ge=-(Z.verticalAlign-.5)*x,je=E.evaluateVariableOffset(_,O);return new E.Point(Q+je[0]*k,ge+je[1]*k)}function ms(_,S,x,O,k,Z){var Q=_.x1,ge=_.x2,je=_.y1,ft=_.y2,Ut=_.anchorPointX,Vt=_.anchorPointY,Zt=new E.Point(S,x);return O&&Zt._rotate(k?Z:-Z),{x1:Q+Zt.x,y1:je+Zt.y,x2:ge+Zt.x,y2:ft+Zt.y,anchorPointX:Ut,anchorPointY:Vt}}ba.prototype.get=function(_){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[_]){var S=++this.maxGroupID;this.collisionGroups[_]={ID:S,predicate:function(x){return x.collisionGroupID===S}}}return this.collisionGroups[_]};var ls=function(_,S,x,O){this.transform=_.clone(),this.collisionIndex=new To(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=S,this.retainedQueryData={},this.collisionGroups=new ba(x),this.collisionCircleArrays={},this.prevPlacement=O,O&&(O.prevPlacement=void 0),this.placedOrientations={}};function Ct(_,S,x,O,k){_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0),_.emplaceBack(S?1:0,x?1:0,O||0,k||0)}ls.prototype.getBucketParts=function(_,S,x,O){var k=x.getBucket(S),Z=x.latestFeatureIndex;if(k&&Z&&S.id===k.layerIds[0]){var Q=x.collisionBoxArray,ge=k.layers[0].layout,je=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),ft=x.tileSize/E.EXTENT,Ut=this.transform.calculatePosMatrix(x.tileID.toUnwrapped()),Vt=ge.get("text-pitch-alignment")==="map",Zt=ge.get("text-rotation-alignment")==="map",En=mi(x,1,this.transform.zoom),mn=hn(Ut,Vt,Zt,this.transform,En),Un=null;if(Vt){var ln=Fn(Ut,Vt,Zt,this.transform,En);Un=E.multiply([],this.transform.labelPlaneMatrix,ln)}this.retainedQueryData[k.bucketInstanceId]=new bs(k.bucketInstanceId,Z,k.sourceLayerIndex,k.index,x.tileID);var kn={bucket:k,layout:ge,posMatrix:Ut,textLabelPlaneMatrix:mn,labelToScreenMatrix:Un,scale:je,textPixelRatio:ft,holdingForFade:x.holdingForFade(),collisionBoxArray:Q,partiallyEvaluatedTextSize:E.evaluateSizeForZoom(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(O)for(var Jn=0,gr=k.sortKeyRanges;Jn<gr.length;Jn+=1){var Ir=gr[Jn];_.push({sortKey:Ir.sortKey,symbolInstanceStart:Ir.symbolInstanceStart,symbolInstanceEnd:Ir.symbolInstanceEnd,parameters:kn})}else _.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:kn})}},ls.prototype.attemptAnchorPlacement=function(_,S,x,O,k,Z,Q,ge,je,ft,Ut,Vt,Zt,En,mn){var Un,ln=[Vt.textOffset0,Vt.textOffset1],kn=ra(_,x,O,ln,k),Jn=this.collisionIndex.placeCollisionBox(ms(S,kn.x,kn.y,Z,Q,this.transform.angle),Ut,ge,je,ft.predicate);if(!mn||this.collisionIndex.placeCollisionBox(ms(mn,kn.x,kn.y,Z,Q,this.transform.angle),Ut,ge,je,ft.predicate).box.length!==0)return Jn.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Vt.crossTileID]&&this.prevPlacement.placements[Vt.crossTileID]&&this.prevPlacement.placements[Vt.crossTileID].text&&(Un=this.prevPlacement.variableOffsets[Vt.crossTileID].anchor),this.variableOffsets[Vt.crossTileID]={textOffset:ln,width:x,height:O,anchor:_,textBoxScale:k,prevAnchor:Un},this.markUsedJustification(Zt,_,Vt,En),Zt.allowVerticalPlacement&&(this.markUsedOrientation(Zt,En,Vt),this.placedOrientations[Vt.crossTileID]=En),{shift:kn,placedGlyphBoxes:Jn}):void 0},ls.prototype.placeLayerBucketPart=function(_,S,x){var O=this,k=_.parameters,Z=k.bucket,Q=k.layout,ge=k.posMatrix,je=k.textLabelPlaneMatrix,ft=k.labelToScreenMatrix,Ut=k.textPixelRatio,Vt=k.holdingForFade,Zt=k.collisionBoxArray,En=k.partiallyEvaluatedTextSize,mn=k.collisionGroup,Un=Q.get("text-optional"),ln=Q.get("icon-optional"),kn=Q.get("text-allow-overlap"),Jn=Q.get("icon-allow-overlap"),gr=Q.get("text-rotation-alignment")==="map",Ir=Q.get("text-pitch-alignment")==="map",Mr=Q.get("icon-text-fit")!=="none",Ur=Q.get("symbol-z-order")==="viewport-y",si=kn&&(Jn||!Z.hasIconData()||ln),Vi=Jn&&(kn||!Z.hasTextData()||Un);!Z.collisionArrays&&Zt&&Z.deserializeCollisionBoxes(Zt);var Bi=function(Dr,Qt){if(!S[Dr.crossTileID])if(Vt)O.placements[Dr.crossTileID]=new co(!1,!1,!1);else{var ga,fa=!1,Qo=!1,Ea=!0,aa=null,ko={box:null,offscreen:null},au={box:null,offscreen:null},xl=null,Cu=null,su=0,Ss=0,vl=0;Qt.textFeatureIndex?su=Qt.textFeatureIndex:Dr.useRuntimeCollisionCircles&&(su=Dr.featureIndex),Qt.verticalTextFeatureIndex&&(Ss=Qt.verticalTextFeatureIndex);var fl=Qt.textBox;if(fl){var vc=function(es){var Ou=E.WritingMode.horizontal;if(Z.allowVerticalPlacement&&!es&&O.prevPlacement){var Wl=O.prevPlacement.placedOrientations[Dr.crossTileID];Wl&&(O.placedOrientations[Dr.crossTileID]=Wl,O.markUsedOrientation(Z,Ou=Wl,Dr))}return Ou},Wf=function(es,Ou){if(Z.allowVerticalPlacement&&Dr.numVerticalGlyphVertices>0&&Qt.verticalTextBox)for(var Wl=0,oh=Z.writingModes;Wl<oh.length&&(oh[Wl]===E.WritingMode.vertical?(ko=Ou(),au=ko):ko=es(),!(ko&&ko.box&&ko.box.length));Wl+=1);else ko=es()};if(Q.get("text-variable-anchor")){var Tc=Q.get("text-variable-anchor");if(O.prevPlacement&&O.prevPlacement.variableOffsets[Dr.crossTileID]){var df=O.prevPlacement.variableOffsets[Dr.crossTileID];Tc.indexOf(df.anchor)>0&&(Tc=Tc.filter(function(es){return es!==df.anchor})).unshift(df.anchor)}var Vc=function(es,Ou,Wl){for(var oh=es.x2-es.x1,_0=es.y2-es.y1,Pd=Dr.textBoxScale,b0=Mr&&!Jn?Ou:null,Kh={box:[],offscreen:!1},Id=kn?2*Tc.length:Tc.length,ah=0;ah<Id;++ah){var up=O.attemptAnchorPlacement(Tc[ah%Tc.length],es,oh,_0,Pd,gr,Ir,Ut,ge,mn,ah>=Tc.length,Dr,Z,Wl,b0);if(up&&(Kh=up.placedGlyphBoxes)&&Kh.box&&Kh.box.length){fa=!0,aa=up.shift;break}}return Kh};Wf(function(){return Vc(fl,Qt.iconBox,E.WritingMode.horizontal)},function(){var es=Qt.verticalTextBox;return Z.allowVerticalPlacement&&!(ko&&ko.box&&ko.box.length)&&Dr.numVerticalGlyphVertices>0&&es?Vc(es,Qt.verticalIconBox,E.WritingMode.vertical):{box:null,offscreen:null}}),ko&&(fa=ko.box,Ea=ko.offscreen);var sp=vc(ko&&ko.box);if(!fa&&O.prevPlacement){var lp=O.prevPlacement.variableOffsets[Dr.crossTileID];lp&&(O.variableOffsets[Dr.crossTileID]=lp,O.markUsedJustification(Z,lp.anchor,Dr,sp))}}else{var wh=function(es,Ou){var Wl=O.collisionIndex.placeCollisionBox(es,kn,Ut,ge,mn.predicate);return Wl&&Wl.box&&Wl.box.length&&(O.markUsedOrientation(Z,Ou,Dr),O.placedOrientations[Dr.crossTileID]=Ou),Wl};Wf(function(){return wh(fl,E.WritingMode.horizontal)},function(){var es=Qt.verticalTextBox;return Z.allowVerticalPlacement&&Dr.numVerticalGlyphVertices>0&&es?wh(es,E.WritingMode.vertical):{box:null,offscreen:null}}),vc(ko&&ko.box&&ko.box.length)}}if(fa=(ga=ko)&&ga.box&&ga.box.length>0,Ea=ga&&ga.offscreen,Dr.useRuntimeCollisionCircles){var $h=Z.text.placedSymbolArray.get(Dr.centerJustifiedTextSymbolIndex),qh=E.evaluateSizeForFeature(Z.textSizeData,En,$h),ih=Q.get("text-padding");xl=O.collisionIndex.placeCollisionCircles(kn,$h,Z.lineVertexArray,Z.glyphOffsetArray,qh,ge,je,ft,x,Ir,mn.predicate,Dr.collisionCircleDiameter,ih),fa=kn||xl.circles.length>0&&!xl.collisionDetected,Ea=Ea&&xl.offscreen}if(Qt.iconFeatureIndex&&(vl=Qt.iconFeatureIndex),Qt.iconBox){var Mi=function(es){var Ou=Mr&&aa?ms(es,aa.x,aa.y,gr,Ir,O.transform.angle):es;return O.collisionIndex.placeCollisionBox(Ou,Jn,Ut,ge,mn.predicate)};Qo=au&&au.box&&au.box.length&&Qt.verticalIconBox?(Cu=Mi(Qt.verticalIconBox)).box.length>0:(Cu=Mi(Qt.iconBox)).box.length>0,Ea=Ea&&Cu.offscreen}var Rl=Un||Dr.numHorizontalGlyphVertices===0&&Dr.numVerticalGlyphVertices===0,Pl=ln||Dr.numIconVertices===0;if(Rl||Pl?Pl?Rl||(Qo=Qo&&fa):fa=Qo&&fa:Qo=fa=Qo&&fa,fa&&ga&&ga.box&&O.collisionIndex.insertCollisionBox(ga.box,Q.get("text-ignore-placement"),Z.bucketInstanceId,au&&au.box&&Ss?Ss:su,mn.ID),Qo&&Cu&&O.collisionIndex.insertCollisionBox(Cu.box,Q.get("icon-ignore-placement"),Z.bucketInstanceId,vl,mn.ID),xl&&(fa&&O.collisionIndex.insertCollisionCircles(xl.circles,Q.get("text-ignore-placement"),Z.bucketInstanceId,su,mn.ID),x)){var Ju=Z.bucketInstanceId,Mf=O.collisionCircleArrays[Ju];Mf===void 0&&(Mf=O.collisionCircleArrays[Ju]=new Mo);for(var Rf=0;Rf<xl.circles.length;Rf+=4)Mf.circles.push(xl.circles[Rf+0]),Mf.circles.push(xl.circles[Rf+1]),Mf.circles.push(xl.circles[Rf+2]),Mf.circles.push(xl.collisionDetected?1:0)}O.placements[Dr.crossTileID]=new co(fa||si,Qo||Vi,Ea||Z.justReloaded),S[Dr.crossTileID]=!0}};if(Ur)for(var vo=Z.getSortedSymbolIndexes(this.transform.angle),jo=vo.length-1;jo>=0;--jo){var Xo=vo[jo];Bi(Z.symbolInstances.get(Xo),Z.collisionArrays[Xo])}else for(var Yo=_.symbolInstanceStart;Yo<_.symbolInstanceEnd;Yo++)Bi(Z.symbolInstances.get(Yo),Z.collisionArrays[Yo]);if(x&&Z.bucketInstanceId in this.collisionCircleArrays){var cs=this.collisionCircleArrays[Z.bucketInstanceId];E.invert(cs.invProjMatrix,ge),cs.viewportMatrix=this.collisionIndex.getViewportMatrix()}Z.justReloaded=!1},ls.prototype.markUsedJustification=function(_,S,x,O){var k;k=O===E.WritingMode.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[E.getAnchorJustification(S)];for(var Z=0,Q=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];Z<Q.length;Z+=1){var ge=Q[Z];ge>=0&&(_.text.placedSymbolArray.get(ge).crossTileID=k>=0&&ge!==k?0:x.crossTileID)}},ls.prototype.markUsedOrientation=function(_,S,x){for(var O=S===E.WritingMode.horizontal||S===E.WritingMode.horizontalOnly?S:0,k=S===E.WritingMode.vertical?S:0,Z=0,Q=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];Z<Q.length;Z+=1)_.text.placedSymbolArray.get(Q[Z]).placedOrientation=O;x.verticalPlacedTextSymbolIndex&&(_.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=k)},ls.prototype.commit=function(_){this.commitTime=_,this.zoomAtLastRecencyCheck=this.transform.zoom;var S=this.prevPlacement,x=!1;this.prevZoomAdjustment=S?S.zoomAdjustment(this.transform.zoom):0;var O=S?S.symbolFadeChange(_):1,k=S?S.opacities:{},Z=S?S.variableOffsets:{},Q=S?S.placedOrientations:{};for(var ge in this.placements){var je=this.placements[ge],ft=k[ge];ft?(this.opacities[ge]=new $i(ft,O,je.text,je.icon),x=x||je.text!==ft.text.placed||je.icon!==ft.icon.placed):(this.opacities[ge]=new $i(null,O,je.text,je.icon,je.skipFade),x=x||je.text||je.icon)}for(var Ut in k){var Vt=k[Ut];if(!this.opacities[Ut]){var Zt=new $i(Vt,O,!1,!1);Zt.isHidden()||(this.opacities[Ut]=Zt,x=x||Vt.text.placed||Vt.icon.placed)}}for(var En in Z)this.variableOffsets[En]||!this.opacities[En]||this.opacities[En].isHidden()||(this.variableOffsets[En]=Z[En]);for(var mn in Q)this.placedOrientations[mn]||!this.opacities[mn]||this.opacities[mn].isHidden()||(this.placedOrientations[mn]=Q[mn]);x?this.lastPlacementChangeTime=_:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=S?S.lastPlacementChangeTime:_)},ls.prototype.updateLayerOpacities=function(_,S){for(var x={},O=0,k=S;O<k.length;O+=1){var Z=k[O],Q=Z.getBucket(_);Q&&Z.latestFeatureIndex&&_.id===Q.layerIds[0]&&this.updateBucketOpacities(Q,x,Z.collisionBoxArray)}},ls.prototype.updateBucketOpacities=function(_,S,x){var O=this;_.hasTextData()&&_.text.opacityVertexArray.clear(),_.hasIconData()&&_.icon.opacityVertexArray.clear(),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexArray.clear(),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexArray.clear();var k=_.layers[0].layout,Z=new $i(null,0,!1,!1,!0),Q=k.get("text-allow-overlap"),ge=k.get("icon-allow-overlap"),je=k.get("text-variable-anchor"),ft=k.get("text-rotation-alignment")==="map",Ut=k.get("text-pitch-alignment")==="map",Vt=k.get("icon-text-fit")!=="none",Zt=new $i(null,0,Q&&(ge||!_.hasIconData()||k.get("icon-optional")),ge&&(Q||!_.hasTextData()||k.get("text-optional")),!0);!_.collisionArrays&&x&&(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData())&&_.deserializeCollisionBoxes(x);for(var En=function(kn,Jn,gr){for(var Ir=0;Ir<Jn/4;Ir++)kn.opacityVertexArray.emplaceBack(gr)},mn=function(kn){var Jn=_.symbolInstances.get(kn),gr=Jn.numHorizontalGlyphVertices,Ir=Jn.numVerticalGlyphVertices,Mr=Jn.crossTileID,Ur=O.opacities[Mr];S[Mr]?Ur=Z:Ur||(O.opacities[Mr]=Ur=Zt),S[Mr]=!0;var si=Jn.numIconVertices>0,Vi=O.placedOrientations[Jn.crossTileID],Bi=Vi===E.WritingMode.vertical,vo=Vi===E.WritingMode.horizontal||Vi===E.WritingMode.horizontalOnly;if(gr>0||Ir>0){var jo=Ls(Ur.text);En(_.text,gr,Bi?ks:jo),En(_.text,Ir,vo?ks:jo);var Xo=Ur.text.isHidden();[Jn.rightJustifiedTextSymbolIndex,Jn.centerJustifiedTextSymbolIndex,Jn.leftJustifiedTextSymbolIndex].forEach(function(ko){ko>=0&&(_.text.placedSymbolArray.get(ko).hidden=Xo||Bi?1:0)}),Jn.verticalPlacedTextSymbolIndex>=0&&(_.text.placedSymbolArray.get(Jn.verticalPlacedTextSymbolIndex).hidden=Xo||vo?1:0);var Yo=O.variableOffsets[Jn.crossTileID];Yo&&O.markUsedJustification(_,Yo.anchor,Jn,Vi);var cs=O.placedOrientations[Jn.crossTileID];cs&&(O.markUsedJustification(_,"left",Jn,cs),O.markUsedOrientation(_,cs,Jn))}if(si){var Dr=Ls(Ur.icon),Qt=!(Vt&&Jn.verticalPlacedIconSymbolIndex&&Bi);Jn.placedIconSymbolIndex>=0&&(En(_.icon,Jn.numIconVertices,Qt?Dr:ks),_.icon.placedSymbolArray.get(Jn.placedIconSymbolIndex).hidden=Ur.icon.isHidden()),Jn.verticalPlacedIconSymbolIndex>=0&&(En(_.icon,Jn.numVerticalIconVertices,Qt?ks:Dr),_.icon.placedSymbolArray.get(Jn.verticalPlacedIconSymbolIndex).hidden=Ur.icon.isHidden())}if(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData()){var ga=_.collisionArrays[kn];if(ga){var fa=new E.Point(0,0);if(ga.textBox||ga.verticalTextBox){var Qo=!0;if(je){var Ea=O.variableOffsets[Mr];Ea?(fa=ra(Ea.anchor,Ea.width,Ea.height,Ea.textOffset,Ea.textBoxScale),ft&&fa._rotate(Ut?O.transform.angle:-O.transform.angle)):Qo=!1}ga.textBox&&Ct(_.textCollisionBox.collisionVertexArray,Ur.text.placed,!Qo||Bi,fa.x,fa.y),ga.verticalTextBox&&Ct(_.textCollisionBox.collisionVertexArray,Ur.text.placed,!Qo||vo,fa.x,fa.y)}var aa=!!(!vo&&ga.verticalIconBox);ga.iconBox&&Ct(_.iconCollisionBox.collisionVertexArray,Ur.icon.placed,aa,Vt?fa.x:0,Vt?fa.y:0),ga.verticalIconBox&&Ct(_.iconCollisionBox.collisionVertexArray,Ur.icon.placed,!aa,Vt?fa.x:0,Vt?fa.y:0)}}},Un=0;Un<_.symbolInstances.length;Un++)mn(Un);if(_.sortFeatures(this.transform.angle),this.retainedQueryData[_.bucketInstanceId]&&(this.retainedQueryData[_.bucketInstanceId].featureSortOrder=_.featureSortOrder),_.hasTextData()&&_.text.opacityVertexBuffer&&_.text.opacityVertexBuffer.updateData(_.text.opacityVertexArray),_.hasIconData()&&_.icon.opacityVertexBuffer&&_.icon.opacityVertexBuffer.updateData(_.icon.opacityVertexArray),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexBuffer&&_.iconCollisionBox.collisionVertexBuffer.updateData(_.iconCollisionBox.collisionVertexArray),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexBuffer&&_.textCollisionBox.collisionVertexBuffer.updateData(_.textCollisionBox.collisionVertexArray),_.bucketInstanceId in this.collisionCircleArrays){var ln=this.collisionCircleArrays[_.bucketInstanceId];_.placementInvProjMatrix=ln.invProjMatrix,_.placementViewportMatrix=ln.viewportMatrix,_.collisionCircleArray=ln.circles,delete this.collisionCircleArrays[_.bucketInstanceId]}},ls.prototype.symbolFadeChange=function(_){return this.fadeDuration===0?1:(_-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ls.prototype.zoomAdjustment=function(_){return Math.max(0,(this.transform.zoom-_)/1.5)},ls.prototype.hasTransitions=function(_){return this.stale||_-this.lastPlacementChangeTime<this.fadeDuration},ls.prototype.stillRecent=function(_,S){var x=this.zoomAtLastRecencyCheck===S?1-this.zoomAdjustment(S):1;return this.zoomAtLastRecencyCheck=S,this.commitTime+this.fadeDuration*x>_},ls.prototype.setStale=function(){this.stale=!0};var Wt=Math.pow(2,25),jn=Math.pow(2,24),kr=Math.pow(2,17),Ci=Math.pow(2,16),qi=Math.pow(2,9),ta=Math.pow(2,8),Us=Math.pow(2,1);function Ls(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;var S=_.placed?1:0,x=Math.floor(127*_.opacity);return x*Wt+S*jn+x*kr+S*Ci+x*qi+S*ta+x*Us+S}var ks=0,ll=function(_){this._sortAcrossTiles=_.layout.get("symbol-z-order")!=="viewport-y"&&_.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ll.prototype.continuePlacement=function(_,S,x,O,k){for(var Z=this._bucketParts;this._currentTileIndex<_.length;)if(S.getBucketParts(Z,O,_[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Z.sort(function(Q,ge){return Q.sortKey-ge.sortKey}));this._currentPartIndex<Z.length;)if(S.placeLayerBucketPart(Z[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,k())return!0;return!1};var zh=function(_,S,x,O,k,Z,Q){this.placement=new ls(_,k,Z,Q),this._currentPlacementIndex=S.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=O,this._done=!1};zh.prototype.isDone=function(){return this._done},zh.prototype.continuePlacement=function(_,S,x){for(var O=this,k=E.browser.now(),Z=function(){var je=E.browser.now()-k;return!O._forceFullPlacement&&je>2};this._currentPlacementIndex>=0;){var Q=S[_[this._currentPlacementIndex]],ge=this.placement.collisionIndex.transform.zoom;if(Q.type==="symbol"&&(!Q.minzoom||Q.minzoom<=ge)&&(!Q.maxzoom||Q.maxzoom>ge)){if(this._inProgressLayer||(this._inProgressLayer=new ll(Q)),this._inProgressLayer.continuePlacement(x[Q.source],this.placement,this._showCollisionBoxes,Q,Z))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},zh.prototype.commit=function(_){return this.placement.commit(_),this.placement};var Up=512/E.EXTENT/2,qf=function(_,S,x){this.tileID=_,this.indexedSymbolInstances={},this.bucketInstanceId=x;for(var O=0;O<S.length;O++){var k=S.get(O),Z=k.key;this.indexedSymbolInstances[Z]||(this.indexedSymbolInstances[Z]=[]),this.indexedSymbolInstances[Z].push({crossTileID:k.crossTileID,coord:this.getScaledCoordinates(k,_)})}};qf.prototype.getScaledCoordinates=function(_,S){var x=Up/Math.pow(2,S.canonical.z-this.tileID.canonical.z);return{x:Math.floor((S.canonical.x*E.EXTENT+_.anchorX)*x),y:Math.floor((S.canonical.y*E.EXTENT+_.anchorY)*x)}},qf.prototype.findMatches=function(_,S,x){for(var O=this.tileID.canonical.z<S.canonical.z?1:Math.pow(2,this.tileID.canonical.z-S.canonical.z),k=0;k<_.length;k++){var Z=_.get(k);if(!Z.crossTileID){var Q=this.indexedSymbolInstances[Z.key];if(Q)for(var ge=this.getScaledCoordinates(Z,S),je=0,ft=Q;je<ft.length;je+=1){var Ut=ft[je];if(Math.abs(Ut.coord.x-ge.x)<=O&&Math.abs(Ut.coord.y-ge.y)<=O&&!x[Ut.crossTileID]){x[Ut.crossTileID]=!0,Z.crossTileID=Ut.crossTileID;break}}}}};var ru=function(){this.maxCrossTileID=0};ru.prototype.generate=function(){return++this.maxCrossTileID};var zf=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};zf.prototype.handleWrapJump=function(_){var S=Math.round((_-this.lng)/360);if(S!==0)for(var x in this.indexes){var O=this.indexes[x],k={};for(var Z in O){var Q=O[Z];Q.tileID=Q.tileID.unwrapTo(Q.tileID.wrap+S),k[Q.tileID.key]=Q}this.indexes[x]=k}this.lng=_},zf.prototype.addBucket=function(_,S,x){if(this.indexes[_.overscaledZ]&&this.indexes[_.overscaledZ][_.key]){if(this.indexes[_.overscaledZ][_.key].bucketInstanceId===S.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(_.overscaledZ,this.indexes[_.overscaledZ][_.key])}for(var O=0;O<S.symbolInstances.length;O++)S.symbolInstances.get(O).crossTileID=0;this.usedCrossTileIDs[_.overscaledZ]||(this.usedCrossTileIDs[_.overscaledZ]={});var k=this.usedCrossTileIDs[_.overscaledZ];for(var Z in this.indexes){var Q=this.indexes[Z];if(Number(Z)>_.overscaledZ)for(var ge in Q){var je=Q[ge];je.tileID.isChildOf(_)&&je.findMatches(S.symbolInstances,_,k)}else{var ft=Q[_.scaledTo(Number(Z)).key];ft&&ft.findMatches(S.symbolInstances,_,k)}}for(var Ut=0;Ut<S.symbolInstances.length;Ut++){var Vt=S.symbolInstances.get(Ut);Vt.crossTileID||(Vt.crossTileID=x.generate(),k[Vt.crossTileID]=!0)}return this.indexes[_.overscaledZ]===void 0&&(this.indexes[_.overscaledZ]={}),this.indexes[_.overscaledZ][_.key]=new qf(_,S.symbolInstances,S.bucketInstanceId),!0},zf.prototype.removeBucketCrossTileIDs=function(_,S){for(var x in S.indexedSymbolInstances)for(var O=0,k=S.indexedSymbolInstances[x];O<k.length;O+=1)delete this.usedCrossTileIDs[_][k[O].crossTileID]},zf.prototype.removeStaleBuckets=function(_){var S=!1;for(var x in this.indexes){var O=this.indexes[x];for(var k in O)_[O[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,O[k]),delete O[k],S=!0)}return S};var rf=function(){this.layerIndexes={},this.crossTileIDs=new ru,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};rf.prototype.addLayer=function(_,S,x){var O=this.layerIndexes[_.id];O===void 0&&(O=this.layerIndexes[_.id]=new zf);var k=!1,Z={};O.handleWrapJump(x);for(var Q=0,ge=S;Q<ge.length;Q+=1){var je=ge[Q],ft=je.getBucket(_);ft&&_.id===ft.layerIds[0]&&(ft.bucketInstanceId||(ft.bucketInstanceId=++this.maxBucketInstanceId),O.addBucket(je.tileID,ft,this.crossTileIDs)&&(k=!0),Z[ft.bucketInstanceId]=!0)}return O.removeStaleBuckets(Z)&&(k=!0),k},rf.prototype.pruneUnusedLayers=function(_){var S={};for(var x in _.forEach(function(O){S[O]=!0}),this.layerIndexes)S[x]||delete this.layerIndexes[x]};var iu=function(_,S){return E.emitValidationErrors(_,S&&S.filter(function(x){return x.identifier!=="source.canvas"}))},pu=E.pick(xi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),of=E.pick(xi,["setCenter","setZoom","setBearing","setPitch"]),bf=function(){var _={},S=E.styleSpec.$version;for(var x in E.styleSpec.$root){var O,k=E.styleSpec.$root[x];k.required&&(O=x==="version"?S:k.type==="array"?[]:{})!=null&&(_[x]=O)}return _}(),Tu=function(_){function S(x,O){var k=this;O===void 0&&(O={}),_.call(this),this.map=x,this.dispatcher=new lt(wr(),this),this.imageManager=new le,this.imageManager.setEventedParent(this),this.glyphManager=new yt(x._requestManager,O.localIdeographFontFamily),this.lineAtlas=new We(256,512),this.crossTileSymbolIndex=new rf,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new E.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",E.getReferrer());var Z=this;this._rtlTextPluginCallback=S.registerForPluginStateChange(function(Q){Z.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Q.pluginStatus,pluginURL:Q.pluginURL},function(ge,je){if(E.triggerPluginCompletionEvent(ge),je&&je.every(function(Ut){return Ut}))for(var ft in Z.sourceCaches)Z.sourceCaches[ft].reload()})}),this.on("data",function(Q){if(Q.dataType==="source"&&Q.sourceDataType==="metadata"){var ge=k.sourceCaches[Q.sourceId];if(ge){var je=ge.getSource();if(je&&je.vectorLayerIds)for(var ft in k._layers){var Ut=k._layers[ft];Ut.source===je.id&&k._validateLayer(Ut)}}}})}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.loadURL=function(x,O){var k=this;O===void 0&&(O={}),this.fire(new E.Event("dataloading",{dataType:"style"}));var Z=typeof O.validate=="boolean"?O.validate:!E.isMapboxURL(x);x=this.map._requestManager.normalizeStyleURL(x,O.accessToken);var Q=this.map._requestManager.transformRequest(x,E.ResourceType.Style);this._request=E.getJSON(Q,function(ge,je){k._request=null,ge?k.fire(new E.ErrorEvent(ge)):je&&k._load(je,Z)})},S.prototype.loadJSON=function(x,O){var k=this;O===void 0&&(O={}),this.fire(new E.Event("dataloading",{dataType:"style"})),this._request=E.browser.frame(function(){k._request=null,k._load(x,O.validate!==!1)})},S.prototype.loadEmpty=function(){this.fire(new E.Event("dataloading",{dataType:"style"})),this._load(bf,!1)},S.prototype._load=function(x,O){if(!O||!iu(this,E.validateStyle(x))){for(var k in this._loaded=!0,this.stylesheet=x,x.sources)this.addSource(k,x.sources[k],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs);var Z=di(this.stylesheet.layers);this._order=Z.map(function(ft){return ft.id}),this._layers={},this._serializedLayers={};for(var Q=0,ge=Z;Q<ge.length;Q+=1){var je=ge[Q];(je=E.createStyleLayer(je)).setEventedParent(this,{layer:{id:je.id}}),this._layers[je.id]=je,this._serializedLayers[je.id]=je.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ue(this.stylesheet.light),this.fire(new E.Event("data",{dataType:"style"})),this.fire(new E.Event("style.load"))}},S.prototype._loadSprite=function(x){var O=this;this._spriteRequest=function(k,Z,Q){var ge,je,ft,Ut=E.browser.devicePixelRatio>1?"@2x":"",Vt=E.getJSON(Z.transformRequest(Z.normalizeSpriteURL(k,Ut,".json"),E.ResourceType.SpriteJSON),function(mn,Un){Vt=null,ft||(ft=mn,ge=Un,En())}),Zt=E.getImage(Z.transformRequest(Z.normalizeSpriteURL(k,Ut,".png"),E.ResourceType.SpriteImage),function(mn,Un){Zt=null,ft||(ft=mn,je=Un,En())});function En(){if(ft)Q(ft);else if(ge&&je){var mn=E.browser.getImageData(je),Un={};for(var ln in ge){var kn=ge[ln],Jn=kn.width,gr=kn.height,Ir=kn.x,Mr=kn.y,Ur=kn.sdf,si=kn.pixelRatio,Vi=kn.stretchX,Bi=kn.stretchY,vo=kn.content,jo=new E.RGBAImage({width:Jn,height:gr});E.RGBAImage.copy(mn,jo,{x:Ir,y:Mr},{x:0,y:0},{width:Jn,height:gr}),Un[ln]={data:jo,pixelRatio:si,sdf:Ur,stretchX:Vi,stretchY:Bi,content:vo}}Q(null,Un)}}return{cancel:function(){Vt&&(Vt.cancel(),Vt=null),Zt&&(Zt.cancel(),Zt=null)}}}(x,this.map._requestManager,function(k,Z){if(O._spriteRequest=null,k)O.fire(new E.ErrorEvent(k));else if(Z)for(var Q in Z)O.imageManager.addImage(Q,Z[Q]);O.imageManager.setLoaded(!0),O._availableImages=O.imageManager.listImages(),O.dispatcher.broadcast("setImages",O._availableImages),O.fire(new E.Event("data",{dataType:"style"}))})},S.prototype._validateLayer=function(x){var O=this.sourceCaches[x.source];if(O){var k=x.sourceLayer;if(k){var Z=O.getSource();(Z.type==="geojson"||Z.vectorLayerIds&&Z.vectorLayerIds.indexOf(k)===-1)&&this.fire(new E.ErrorEvent(new Error('Source layer "'+k+'" does not exist on source "'+Z.id+'" as specified by style layer "'+x.id+'"')))}}},S.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var x in this.sourceCaches)if(!this.sourceCaches[x].loaded())return!1;return!!this.imageManager.isLoaded()},S.prototype._serializeLayers=function(x){for(var O=[],k=0,Z=x;k<Z.length;k+=1){var Q=this._layers[Z[k]];Q.type!=="custom"&&O.push(Q.serialize())}return O},S.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var x in this.sourceCaches)if(this.sourceCaches[x].hasTransition())return!0;for(var O in this._layers)if(this._layers[O].hasTransition())return!0;return!1},S.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},S.prototype.update=function(x){if(this._loaded){var O=this._changed;if(this._changed){var k=Object.keys(this._updatedLayers),Z=Object.keys(this._removedLayers);for(var Q in(k.length||Z.length)&&this._updateWorkerLayers(k,Z),this._updatedSources){var ge=this._updatedSources[Q];ge==="reload"?this._reloadSource(Q):ge==="clear"&&this._clearSource(Q)}for(var je in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[je].updateTransitions(x);this.light.updateTransitions(x),this._resetUpdates()}var ft={};for(var Ut in this.sourceCaches){var Vt=this.sourceCaches[Ut];ft[Ut]=Vt.used,Vt.used=!1}for(var Zt=0,En=this._order;Zt<En.length;Zt+=1){var mn=this._layers[En[Zt]];mn.recalculate(x,this._availableImages),!mn.isHidden(x.zoom)&&mn.source&&(this.sourceCaches[mn.source].used=!0)}for(var Un in ft){var ln=this.sourceCaches[Un];ft[Un]!==ln.used&&ln.fire(new E.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Un}))}this.light.recalculate(x),this.z=x.zoom,O&&this.fire(new E.Event("data",{dataType:"style"}))}},S.prototype._updateTilesForChangedImages=function(){var x=Object.keys(this._changedImages);if(x.length){for(var O in this.sourceCaches)this.sourceCaches[O].reloadTilesForDependencies(["icons","patterns"],x);this._changedImages={}}},S.prototype._updateWorkerLayers=function(x,O){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(x),removedIds:O})},S.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},S.prototype.setState=function(x){var O=this;if(this._checkLoaded(),iu(this,E.validateStyle(x)))return!1;(x=E.clone$1(x)).layers=di(x.layers);var k=function(Q,ge){if(!Q)return[{command:xi.setStyle,args:[ge]}];var je=[];try{if(!E.deepEqual(Q.version,ge.version))return[{command:xi.setStyle,args:[ge]}];E.deepEqual(Q.center,ge.center)||je.push({command:xi.setCenter,args:[ge.center]}),E.deepEqual(Q.zoom,ge.zoom)||je.push({command:xi.setZoom,args:[ge.zoom]}),E.deepEqual(Q.bearing,ge.bearing)||je.push({command:xi.setBearing,args:[ge.bearing]}),E.deepEqual(Q.pitch,ge.pitch)||je.push({command:xi.setPitch,args:[ge.pitch]}),E.deepEqual(Q.sprite,ge.sprite)||je.push({command:xi.setSprite,args:[ge.sprite]}),E.deepEqual(Q.glyphs,ge.glyphs)||je.push({command:xi.setGlyphs,args:[ge.glyphs]}),E.deepEqual(Q.transition,ge.transition)||je.push({command:xi.setTransition,args:[ge.transition]}),E.deepEqual(Q.light,ge.light)||je.push({command:xi.setLight,args:[ge.light]});var ft={},Ut=[];(function(Zt,En,mn,Un){var ln;for(ln in En=En||{},Zt=Zt||{})Zt.hasOwnProperty(ln)&&(En.hasOwnProperty(ln)||Ai(ln,mn,Un));for(ln in En)En.hasOwnProperty(ln)&&(Zt.hasOwnProperty(ln)?E.deepEqual(Zt[ln],En[ln])||(Zt[ln].type==="geojson"&&En[ln].type==="geojson"&&_a(Zt,En,ln)?mn.push({command:xi.setGeoJSONSourceData,args:[ln,En[ln].data]}):ea(ln,En,mn,Un)):Fo(ln,En,mn))})(Q.sources,ge.sources,Ut,ft);var Vt=[];Q.layers&&Q.layers.forEach(function(Zt){ft[Zt.source]?je.push({command:xi.removeLayer,args:[Zt.id]}):Vt.push(Zt)}),je=je.concat(Ut),function(Zt,En,mn){En=En||[];var Un,ln,kn,Jn,gr,Ir,Mr,Ur=(Zt=Zt||[]).map(Ji),si=En.map(Ji),Vi=Zt.reduce($e,{}),Bi=En.reduce($e,{}),vo=Ur.slice(),jo=Object.create(null);for(Un=0,ln=0;Un<Ur.length;Un++)Bi.hasOwnProperty(kn=Ur[Un])?ln++:(mn.push({command:xi.removeLayer,args:[kn]}),vo.splice(vo.indexOf(kn,ln),1));for(Un=0,ln=0;Un<si.length;Un++)vo[vo.length-1-Un]!==(kn=si[si.length-1-Un])&&(Vi.hasOwnProperty(kn)?(mn.push({command:xi.removeLayer,args:[kn]}),vo.splice(vo.lastIndexOf(kn,vo.length-ln),1)):ln++,mn.push({command:xi.addLayer,args:[Bi[kn],Ir=vo[vo.length-Un]]}),vo.splice(vo.length-Un,0,kn),jo[kn]=!0);for(Un=0;Un<si.length;Un++)if(Jn=Vi[kn=si[Un]],gr=Bi[kn],!jo[kn]&&!E.deepEqual(Jn,gr))if(E.deepEqual(Jn.source,gr.source)&&E.deepEqual(Jn["source-layer"],gr["source-layer"])&&E.deepEqual(Jn.type,gr.type)){for(Mr in fi(Jn.layout,gr.layout,mn,kn,null,xi.setLayoutProperty),fi(Jn.paint,gr.paint,mn,kn,null,xi.setPaintProperty),E.deepEqual(Jn.filter,gr.filter)||mn.push({command:xi.setFilter,args:[kn,gr.filter]}),E.deepEqual(Jn.minzoom,gr.minzoom)&&E.deepEqual(Jn.maxzoom,gr.maxzoom)||mn.push({command:xi.setLayerZoomRange,args:[kn,gr.minzoom,gr.maxzoom]}),Jn)Jn.hasOwnProperty(Mr)&&Mr!=="layout"&&Mr!=="paint"&&Mr!=="filter"&&Mr!=="metadata"&&Mr!=="minzoom"&&Mr!=="maxzoom"&&(Mr.indexOf("paint.")===0?fi(Jn[Mr],gr[Mr],mn,kn,Mr.slice(6),xi.setPaintProperty):E.deepEqual(Jn[Mr],gr[Mr])||mn.push({command:xi.setLayerProperty,args:[kn,Mr,gr[Mr]]}));for(Mr in gr)gr.hasOwnProperty(Mr)&&!Jn.hasOwnProperty(Mr)&&Mr!=="layout"&&Mr!=="paint"&&Mr!=="filter"&&Mr!=="metadata"&&Mr!=="minzoom"&&Mr!=="maxzoom"&&(Mr.indexOf("paint.")===0?fi(Jn[Mr],gr[Mr],mn,kn,Mr.slice(6),xi.setPaintProperty):E.deepEqual(Jn[Mr],gr[Mr])||mn.push({command:xi.setLayerProperty,args:[kn,Mr,gr[Mr]]}))}else mn.push({command:xi.removeLayer,args:[kn]}),Ir=vo[vo.lastIndexOf(kn)+1],mn.push({command:xi.addLayer,args:[gr,Ir]})}(Vt,ge.layers,je)}catch(Zt){console.warn("Unable to compute style diff:",Zt),je=[{command:xi.setStyle,args:[ge]}]}return je}(this.serialize(),x).filter(function(Q){return!(Q.command in of)});if(k.length===0)return!1;var Z=k.filter(function(Q){return!(Q.command in pu)});if(Z.length>0)throw new Error("Unimplemented: "+Z.map(function(Q){return Q.command}).join(", ")+".");return k.forEach(function(Q){Q.command!=="setTransition"&&O[Q.command].apply(O,Q.args)}),this.stylesheet=x,!0},S.prototype.addImage=function(x,O){if(this.getImage(x))return this.fire(new E.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(x,O),this._afterImageUpdated(x)},S.prototype.updateImage=function(x,O){this.imageManager.updateImage(x,O)},S.prototype.getImage=function(x){return this.imageManager.getImage(x)},S.prototype.removeImage=function(x){if(!this.getImage(x))return this.fire(new E.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(x),this._afterImageUpdated(x)},S.prototype._afterImageUpdated=function(x){this._availableImages=this.imageManager.listImages(),this._changedImages[x]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new E.Event("data",{dataType:"style"}))},S.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},S.prototype.addSource=function(x,O,k){var Z=this;if(k===void 0&&(k={}),this._checkLoaded(),this.sourceCaches[x]!==void 0)throw new Error("There is already a source with this ID");if(!O.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(O).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(O.type)>=0&&this._validate(E.validateStyle.source,"sources."+x,O,null,k))){this.map&&this.map._collectResourceTiming&&(O.collectResourceTiming=!0);var Q=this.sourceCaches[x]=new Jt(x,O,this.dispatcher);Q.style=this,Q.setEventedParent(this,function(){return{isSourceLoaded:Z.loaded(),source:Q.serialize(),sourceId:x}}),Q.onAdd(this.map),this._changed=!0}},S.prototype.removeSource=function(x){if(this._checkLoaded(),this.sourceCaches[x]===void 0)throw new Error("There is no source with this ID");for(var O in this._layers)if(this._layers[O].source===x)return this.fire(new E.ErrorEvent(new Error('Source "'+x+'" cannot be removed while layer "'+O+'" is using it.')));var k=this.sourceCaches[x];delete this.sourceCaches[x],delete this._updatedSources[x],k.fire(new E.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x})),k.setEventedParent(null),k.clearTiles(),k.onRemove&&k.onRemove(this.map),this._changed=!0},S.prototype.setGeoJSONSourceData=function(x,O){this._checkLoaded(),this.sourceCaches[x].getSource().setData(O),this._changed=!0},S.prototype.getSource=function(x){return this.sourceCaches[x]&&this.sourceCaches[x].getSource()},S.prototype.addLayer=function(x,O,k){k===void 0&&(k={}),this._checkLoaded();var Z=x.id;if(this.getLayer(Z))this.fire(new E.ErrorEvent(new Error('Layer with id "'+Z+'" already exists on this map')));else{var Q;if(x.type==="custom"){if(iu(this,E.validateCustomStyleLayer(x)))return;Q=E.createStyleLayer(x)}else{if(typeof x.source=="object"&&(this.addSource(Z,x.source),x=E.clone$1(x),x=E.extend(x,{source:Z})),this._validate(E.validateStyle.layer,"layers."+Z,x,{arrayIndex:-1},k))return;Q=E.createStyleLayer(x),this._validateLayer(Q),Q.setEventedParent(this,{layer:{id:Z}}),this._serializedLayers[Q.id]=Q.serialize()}var ge=O?this._order.indexOf(O):this._order.length;if(O&&ge===-1)this.fire(new E.ErrorEvent(new Error('Layer with id "'+O+'" does not exist on this map.')));else{if(this._order.splice(ge,0,Z),this._layerOrderChanged=!0,this._layers[Z]=Q,this._removedLayers[Z]&&Q.source&&Q.type!=="custom"){var je=this._removedLayers[Z];delete this._removedLayers[Z],je.type!==Q.type?this._updatedSources[Q.source]="clear":(this._updatedSources[Q.source]="reload",this.sourceCaches[Q.source].pause())}this._updateLayer(Q),Q.onAdd&&Q.onAdd(this.map)}}},S.prototype.moveLayer=function(x,O){if(this._checkLoaded(),this._changed=!0,this._layers[x]){if(x!==O){var k=this._order.indexOf(x);this._order.splice(k,1);var Z=O?this._order.indexOf(O):this._order.length;O&&Z===-1?this.fire(new E.ErrorEvent(new Error('Layer with id "'+O+'" does not exist on this map.'))):(this._order.splice(Z,0,x),this._layerOrderChanged=!0)}}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be moved.")))},S.prototype.removeLayer=function(x){this._checkLoaded();var O=this._layers[x];if(O){O.setEventedParent(null);var k=this._order.indexOf(x);this._order.splice(k,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[x]=O,delete this._layers[x],delete this._serializedLayers[x],delete this._updatedLayers[x],delete this._updatedPaintProps[x],O.onRemove&&O.onRemove(this.map)}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be removed.")))},S.prototype.getLayer=function(x){return this._layers[x]},S.prototype.hasLayer=function(x){return x in this._layers},S.prototype.setLayerZoomRange=function(x,O,k){this._checkLoaded();var Z=this.getLayer(x);Z?Z.minzoom===O&&Z.maxzoom===k||(O!=null&&(Z.minzoom=O),k!=null&&(Z.maxzoom=k),this._updateLayer(Z)):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot have zoom extent.")))},S.prototype.setFilter=function(x,O,k){k===void 0&&(k={}),this._checkLoaded();var Z=this.getLayer(x);if(Z){if(!E.deepEqual(Z.filter,O))return O==null?(Z.filter=void 0,void this._updateLayer(Z)):void(this._validate(E.validateStyle.filter,"layers."+Z.id+".filter",O,null,k)||(Z.filter=E.clone$1(O),this._updateLayer(Z)))}else this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be filtered.")))},S.prototype.getFilter=function(x){return E.clone$1(this.getLayer(x).filter)},S.prototype.setLayoutProperty=function(x,O,k,Z){Z===void 0&&(Z={}),this._checkLoaded();var Q=this.getLayer(x);Q?E.deepEqual(Q.getLayoutProperty(O),k)||(Q.setLayoutProperty(O,k,Z),this._updateLayer(Q)):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be styled.")))},S.prototype.getLayoutProperty=function(x,O){var k=this.getLayer(x);if(k)return k.getLayoutProperty(O);this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style.")))},S.prototype.setPaintProperty=function(x,O,k,Z){Z===void 0&&(Z={}),this._checkLoaded();var Q=this.getLayer(x);Q?E.deepEqual(Q.getPaintProperty(O),k)||(Q.setPaintProperty(O,k,Z)&&this._updateLayer(Q),this._changed=!0,this._updatedPaintProps[x]=!0):this.fire(new E.ErrorEvent(new Error("The layer '"+x+"' does not exist in the map's style and cannot be styled.")))},S.prototype.getPaintProperty=function(x,O){return this.getLayer(x).getPaintProperty(O)},S.prototype.setFeatureState=function(x,O){this._checkLoaded();var k=x.source,Z=x.sourceLayer,Q=this.sourceCaches[k];if(Q!==void 0){var ge=Q.getSource().type;ge==="geojson"&&Z?this.fire(new E.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ge!=="vector"||Z?(x.id===void 0&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),Q.setFeatureState(Z,x.id,O)):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+k+"' does not exist in the map's style.")))},S.prototype.removeFeatureState=function(x,O){this._checkLoaded();var k=x.source,Z=this.sourceCaches[k];if(Z!==void 0){var Q=Z.getSource().type,ge=Q==="vector"?x.sourceLayer:void 0;Q!=="vector"||ge?O&&typeof x.id!="string"&&typeof x.id!="number"?this.fire(new E.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Z.removeFeatureState(ge,x.id,O):this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+k+"' does not exist in the map's style.")))},S.prototype.getFeatureState=function(x){this._checkLoaded();var O=x.source,k=x.sourceLayer,Z=this.sourceCaches[O];if(Z!==void 0){if(Z.getSource().type!=="vector"||k)return x.id===void 0&&this.fire(new E.ErrorEvent(new Error("The feature id parameter must be provided."))),Z.getFeatureState(k,x.id);this.fire(new E.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new E.ErrorEvent(new Error("The source '"+O+"' does not exist in the map's style.")))},S.prototype.getTransition=function(){return E.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},S.prototype.serialize=function(){return E.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:E.mapObject(this.sourceCaches,function(x){return x.serialize()}),layers:this._serializeLayers(this._order)},function(x){return x!==void 0})},S.prototype._updateLayer=function(x){this._updatedLayers[x.id]=!0,x.source&&!this._updatedSources[x.source]&&this.sourceCaches[x.source].getSource().type!=="raster"&&(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause()),this._changed=!0},S.prototype._flattenAndSortRenderedFeatures=function(x){for(var O=this,k=function(Vi){return O._layers[Vi].type==="fill-extrusion"},Z={},Q=[],ge=this._order.length-1;ge>=0;ge--){var je=this._order[ge];if(k(je)){Z[je]=ge;for(var ft=0,Ut=x;ft<Ut.length;ft+=1){var Vt=Ut[ft][je];if(Vt)for(var Zt=0,En=Vt;Zt<En.length;Zt+=1)Q.push(En[Zt])}}}Q.sort(function(Vi,Bi){return Bi.intersectionZ-Vi.intersectionZ});for(var mn=[],Un=this._order.length-1;Un>=0;Un--){var ln=this._order[Un];if(k(ln))for(var kn=Q.length-1;kn>=0;kn--){var Jn=Q[kn].feature;if(Z[Jn.layer.id]<Un)break;mn.push(Jn),Q.pop()}else for(var gr=0,Ir=x;gr<Ir.length;gr+=1){var Mr=Ir[gr][ln];if(Mr)for(var Ur=0,si=Mr;Ur<si.length;Ur+=1)mn.push(si[Ur].feature)}}return mn},S.prototype.queryRenderedFeatures=function(x,O,k){O&&O.filter&&this._validate(E.validateStyle.filter,"queryRenderedFeatures.filter",O.filter,null,O);var Z={};if(O&&O.layers){if(!Array.isArray(O.layers))return this.fire(new E.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Q=0,ge=O.layers;Q<ge.length;Q+=1){var je=ge[Q],ft=this._layers[je];if(!ft)return this.fire(new E.ErrorEvent(new Error("The layer '"+je+"' does not exist in the map's style and cannot be queried for features."))),[];Z[ft.source]=!0}}var Ut=[];for(var Vt in O.availableImages=this._availableImages,this.sourceCaches)O.layers&&!Z[Vt]||Ut.push(Tn(this.sourceCaches[Vt],this._layers,this._serializedLayers,x,O,k));return this.placement&&Ut.push(function(Zt,En,mn,Un,ln,kn,Jn){for(var gr={},Ir=kn.queryRenderedSymbols(Un),Mr=[],Ur=0,si=Object.keys(Ir).map(Number);Ur<si.length;Ur+=1)Mr.push(Jn[si[Ur]]);Mr.sort(sr);for(var Vi=function(){var Yo=vo[Bi],cs=Yo.featureIndex.lookupSymbolFeatures(Ir[Yo.bucketInstanceId],En,Yo.bucketIndex,Yo.sourceLayerIndex,ln.filter,ln.layers,ln.availableImages,Zt);for(var Dr in cs){var Qt=gr[Dr]=gr[Dr]||[],ga=cs[Dr];ga.sort(function(Ea,aa){var ko=Yo.featureSortOrder;if(ko){var au=ko.indexOf(Ea.featureIndex);return ko.indexOf(aa.featureIndex)-au}return aa.featureIndex-Ea.featureIndex});for(var fa=0,Qo=ga;fa<Qo.length;fa+=1)Qt.push(Qo[fa])}},Bi=0,vo=Mr;Bi<vo.length;Bi+=1)Vi();var jo=function(Yo){gr[Yo].forEach(function(cs){var Dr=cs.feature,Qt=mn[Zt[Yo].source].getFeatureState(Dr.layer["source-layer"],Dr.id);Dr.source=Dr.layer.source,Dr.layer["source-layer"]&&(Dr.sourceLayer=Dr.layer["source-layer"]),Dr.state=Qt})};for(var Xo in gr)jo(Xo);return gr}(this._layers,this._serializedLayers,this.sourceCaches,x,O,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ut)},S.prototype.querySourceFeatures=function(x,O){O&&O.filter&&this._validate(E.validateStyle.filter,"querySourceFeatures.filter",O.filter,null,O);var k=this.sourceCaches[x];return k?function(Z,Q){for(var ge=Z.getRenderableIds().map(function(En){return Z.getTileByID(En)}),je=[],ft={},Ut=0;Ut<ge.length;Ut++){var Vt=ge[Ut],Zt=Vt.tileID.canonical.key;ft[Zt]||(ft[Zt]=!0,Vt.querySourceFeatures(je,Q))}return je}(k,O):[]},S.prototype.addSourceType=function(x,O,k){return S.getSourceType(x)?k(new Error('A source type called "'+x+'" already exists.')):(S.setSourceType(x,O),O.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:x,url:O.workerSourceURL},k):k(null,null))},S.prototype.getLight=function(){return this.light.getLight()},S.prototype.setLight=function(x,O){O===void 0&&(O={}),this._checkLoaded();var k=this.light.getLight(),Z=!1;for(var Q in x)if(!E.deepEqual(x[Q],k[Q])){Z=!0;break}if(Z){var ge={now:E.browser.now(),transition:E.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(x,O),this.light.updateTransitions(ge)}},S.prototype._validate=function(x,O,k,Z,Q){return Q===void 0&&(Q={}),(!Q||Q.validate!==!1)&&iu(this,x.call(E.validateStyle,E.extend({key:O,style:this.serialize(),value:k,styleSpec:E.styleSpec},Z)))},S.prototype._remove=function(){for(var x in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),E.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[x].setEventedParent(null);for(var O in this.sourceCaches)this.sourceCaches[O].clearTiles(),this.sourceCaches[O].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},S.prototype._clearSource=function(x){this.sourceCaches[x].clearTiles()},S.prototype._reloadSource=function(x){this.sourceCaches[x].resume(),this.sourceCaches[x].reload()},S.prototype._updateSources=function(x){for(var O in this.sourceCaches)this.sourceCaches[O].update(x)},S.prototype._generateCollisionBoxes=function(){for(var x in this.sourceCaches)this._reloadSource(x)},S.prototype._updatePlacement=function(x,O,k,Z,Q){Q===void 0&&(Q=!1);for(var ge=!1,je=!1,ft={},Ut=0,Vt=this._order;Ut<Vt.length;Ut+=1){var Zt=this._layers[Vt[Ut]];if(Zt.type==="symbol"){if(!ft[Zt.source]){var En=this.sourceCaches[Zt.source];ft[Zt.source]=En.getRenderableIds(!0).map(function(Jn){return En.getTileByID(Jn)}).sort(function(Jn,gr){return gr.tileID.overscaledZ-Jn.tileID.overscaledZ||(Jn.tileID.isLessThan(gr.tileID)?-1:1)})}var mn=this.crossTileSymbolIndex.addLayer(Zt,ft[Zt.source],x.center.lng);ge=ge||mn}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Q=Q||this._layerOrderChanged||k===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.browser.now(),x.zoom))&&(this.pauseablePlacement=new zh(x,this._order,Q,O,k,Z,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ft),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.browser.now()),je=!0),ge&&this.pauseablePlacement.placement.setStale()),je||ge)for(var Un=0,ln=this._order;Un<ln.length;Un+=1){var kn=this._layers[ln[Un]];kn.type==="symbol"&&this.placement.updateLayerOpacities(kn,ft[kn.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.browser.now())},S.prototype._releaseSymbolFadeTiles=function(){for(var x in this.sourceCaches)this.sourceCaches[x].releaseSymbolFadeTiles()},S.prototype.getImages=function(x,O,k){this.imageManager.getImages(O.icons,k),this._updateTilesForChangedImages();var Z=this.sourceCaches[O.source];Z&&Z.setDependencies(O.tileID.key,O.type,O.icons)},S.prototype.getGlyphs=function(x,O,k){this.glyphManager.getGlyphs(O.stacks,k)},S.prototype.getResource=function(x,O,k){return E.makeRequest(O,k)},S}(E.Evented);Tu.getSourceType=function(_){return Gt[_]},Tu.setSourceType=function(_,S){Gt[_]=S},Tu.registerForPluginStateChange=E.registerForPluginStateChange;var As=E.createLayout([{name:"a_pos",type:"Int16",components:2}]),Xu=xs(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),af=xs(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),_d=xs(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Jd=xs(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Uf=xs("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),bd=xs(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),mh=xs(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Uh=xs("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),jh=xs("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),xd=xs("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),l0=xs(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),sf=xs(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Fc=xs(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ed=xs(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Bl=xs(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),bc=xs(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),lf=xs(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ou=xs(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Bc=xs(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),uc=xs(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),xf=xs(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ol=xs(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),uf=xs(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ef=xs(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Sd=xs(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),wd=xs(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function xs(_,S){var x=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,O=S.match(/attribute ([\w]+) ([\w]+)/g),k=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Z=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Q=Z?Z.concat(k):k,ge={};return{fragmentSource:_=_.replace(x,function(je,ft,Ut,Vt,Zt){return ge[Zt]=!0,ft==="define"?`
#ifndef HAS_UNIFORM_u_`+Zt+`
varying `+Ut+" "+Vt+" "+Zt+`;
#else
uniform `+Ut+" "+Vt+" u_"+Zt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Zt+`
    `+Ut+" "+Vt+" "+Zt+" = u_"+Zt+`;
#endif
`}),vertexSource:S=S.replace(x,function(je,ft,Ut,Vt,Zt){var En=Vt==="float"?"vec2":"vec4",mn=Zt.match(/color/)?"color":En;return ge[Zt]?ft==="define"?`
#ifndef HAS_UNIFORM_u_`+Zt+`
uniform lowp float u_`+Zt+`_t;
attribute `+Ut+" "+En+" a_"+Zt+`;
varying `+Ut+" "+Vt+" "+Zt+`;
#else
uniform `+Ut+" "+Vt+" u_"+Zt+`;
#endif
`:mn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Zt+`
    `+Zt+" = a_"+Zt+`;
#else
    `+Ut+" "+Vt+" "+Zt+" = u_"+Zt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Zt+`
    `+Zt+" = unpack_mix_"+mn+"(a_"+Zt+", u_"+Zt+`_t);
#else
    `+Ut+" "+Vt+" "+Zt+" = u_"+Zt+`;
#endif
`:ft==="define"?`
#ifndef HAS_UNIFORM_u_`+Zt+`
uniform lowp float u_`+Zt+`_t;
attribute `+Ut+" "+En+" a_"+Zt+`;
#else
uniform `+Ut+" "+Vt+" u_"+Zt+`;
#endif
`:mn==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Zt+`
    `+Ut+" "+Vt+" "+Zt+" = a_"+Zt+`;
#else
    `+Ut+" "+Vt+" "+Zt+" = u_"+Zt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Zt+`
    `+Ut+" "+Vt+" "+Zt+" = unpack_mix_"+mn+"(a_"+Zt+", u_"+Zt+`_t);
#else
    `+Ut+" "+Vt+" "+Zt+" = u_"+Zt+`;
#endif
`}),staticAttributes:O,staticUniforms:Q}}var ep=Object.freeze({__proto__:null,prelude:Xu,background:af,backgroundPattern:_d,circle:Jd,clippingMask:Uf,heatmap:bd,heatmapTexture:mh,collisionBox:Uh,collisionCircle:jh,debug:xd,fill:l0,fillOutline:sf,fillOutlinePattern:Fc,fillPattern:Ed,fillExtrusion:Bl,fillExtrusionPattern:bc,hillshadePrepare:lf,hillshade:ou,line:Bc,lineGradient:uc,linePattern:xf,lineSDF:Ol,raster:uf,symbolIcon:Ef,symbolSDF:Sd,symbolTextAndIcon:wd}),Kf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Vh(_){for(var S=[],x=0;x<_.length;x++)if(_[x]!==null){var O=_[x].split(" ");S.push(O.pop())}return S}Kf.prototype.bind=function(_,S,x,O,k,Z,Q,ge){this.context=_;for(var je=this.boundPaintVertexBuffers.length!==O.length,ft=0;!je&&ft<O.length;ft++)this.boundPaintVertexBuffers[ft]!==O[ft]&&(je=!0);_.extVertexArrayObject&&this.vao&&this.boundProgram===S&&this.boundLayoutVertexBuffer===x&&!je&&this.boundIndexBuffer===k&&this.boundVertexOffset===Z&&this.boundDynamicVertexBuffer===Q&&this.boundDynamicVertexBuffer2===ge?(_.bindVertexArrayOES.set(this.vao),Q&&Q.bind(),k&&k.dynamicDraw&&k.bind(),ge&&ge.bind()):this.freshBind(S,x,O,k,Z,Q,ge)},Kf.prototype.freshBind=function(_,S,x,O,k,Z,Q){var ge,je=_.numAttributes,ft=this.context,Ut=ft.gl;if(ft.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ft.extVertexArrayObject.createVertexArrayOES(),ft.bindVertexArrayOES.set(this.vao),ge=0,this.boundProgram=_,this.boundLayoutVertexBuffer=S,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=O,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=Z,this.boundDynamicVertexBuffer2=Q;else{ge=ft.currentNumAttributes||0;for(var Vt=je;Vt<ge;Vt++)Ut.disableVertexAttribArray(Vt)}S.enableAttributes(Ut,_);for(var Zt=0,En=x;Zt<En.length;Zt+=1)En[Zt].enableAttributes(Ut,_);Z&&Z.enableAttributes(Ut,_),Q&&Q.enableAttributes(Ut,_),S.bind(),S.setVertexAttribPointers(Ut,_,k);for(var mn=0,Un=x;mn<Un.length;mn+=1){var ln=Un[mn];ln.bind(),ln.setVertexAttribPointers(Ut,_,k)}Z&&(Z.bind(),Z.setVertexAttribPointers(Ut,_,k)),O&&O.bind(),Q&&(Q.bind(),Q.setVertexAttribPointers(Ut,_,k)),ft.currentNumAttributes=je},Kf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ul=function(_,S,x,O,k,Z){var Q=_.gl;this.program=Q.createProgram();for(var ge=Vh(x.staticAttributes),je=O?O.getBinderAttributes():[],ft=ge.concat(je),Ut=x.staticUniforms?Vh(x.staticUniforms):[],Vt=O?O.getBinderUniforms():[],Zt=[],En=0,mn=Ut.concat(Vt);En<mn.length;En+=1){var Un=mn[En];Zt.indexOf(Un)<0&&Zt.push(Un)}var ln=O?O.defines():[];Z&&ln.push("#define OVERDRAW_INSPECTOR;");var kn=ln.concat(Xu.fragmentSource,x.fragmentSource).join(`
`),Jn=ln.concat(Xu.vertexSource,x.vertexSource).join(`
`),gr=Q.createShader(Q.FRAGMENT_SHADER);if(Q.isContextLost())this.failedToCreate=!0;else{Q.shaderSource(gr,kn),Q.compileShader(gr),Q.attachShader(this.program,gr);var Ir=Q.createShader(Q.VERTEX_SHADER);if(Q.isContextLost())this.failedToCreate=!0;else{Q.shaderSource(Ir,Jn),Q.compileShader(Ir),Q.attachShader(this.program,Ir),this.attributes={};var Mr={};this.numAttributes=ft.length;for(var Ur=0;Ur<this.numAttributes;Ur++)ft[Ur]&&(Q.bindAttribLocation(this.program,Ur,ft[Ur]),this.attributes[ft[Ur]]=Ur);Q.linkProgram(this.program),Q.deleteShader(Ir),Q.deleteShader(gr);for(var si=0;si<Zt.length;si++){var Vi=Zt[si];if(Vi&&!Mr[Vi]){var Bi=Q.getUniformLocation(this.program,Vi);Bi&&(Mr[Vi]=Bi)}}this.fixedUniforms=k(_,Mr),this.binderUniforms=O?O.getUniforms(_,Mr):[]}}};function Hh(_,S,x){var O=1/mi(x,1,S.transform.tileZoom),k=Math.pow(2,x.tileID.overscaledZ),Z=x.tileSize*Math.pow(2,S.transform.tileZoom)/k,Q=Z*(x.tileID.canonical.x+x.tileID.wrap*k),ge=Z*x.tileID.canonical.y;return{u_image:0,u_texsize:x.imageAtlasTexture.size,u_scale:[O,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[Q>>16,ge>>16],u_pixel_coord_lower:[65535&Q,65535&ge]}}ul.prototype.draw=function(_,S,x,O,k,Z,Q,ge,je,ft,Ut,Vt,Zt,En,mn,Un){var ln,kn=_.gl;if(!this.failedToCreate){for(var Jn in _.program.set(this.program),_.setDepthMode(x),_.setStencilMode(O),_.setColorMode(k),_.setCullFace(Z),this.fixedUniforms)this.fixedUniforms[Jn].set(Q[Jn]);En&&En.setUniforms(_,this.binderUniforms,Vt,{zoom:Zt});for(var gr=(ln={},ln[kn.LINES]=2,ln[kn.TRIANGLES]=3,ln[kn.LINE_STRIP]=1,ln)[S],Ir=0,Mr=Ut.get();Ir<Mr.length;Ir+=1){var Ur=Mr[Ir],si=Ur.vaos||(Ur.vaos={});(si[ge]||(si[ge]=new Kf)).bind(_,this,je,En?En.getPaintVertexBuffers():[],ft,Ur.vertexOffset,mn,Un),kn.drawElements(S,Ur.primitiveLength*gr,kn.UNSIGNED_SHORT,Ur.primitiveOffset*gr*2)}}};var gh=function(_,S,x,O){var k=S.style.light,Z=k.properties.get("position"),Q=[Z.x,Z.y,Z.z],ge=E.create$1();k.properties.get("anchor")==="viewport"&&E.fromRotation(ge,-S.transform.angle),E.transformMat3(Q,Q,ge);var je=k.properties.get("color");return{u_matrix:_,u_lightpos:Q,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[je.r,je.g,je.b],u_vertical_gradient:+x,u_opacity:O}},vu=function(_,S,x,O,k,Z,Q){return E.extend(gh(_,S,x,O),Hh(Z,S,Q),{u_height_factor:-Math.pow(2,k.overscaledZ)/Q.tileSize/8})},kc=function(_){return{u_matrix:_}},Au=function(_,S,x,O){return E.extend(kc(_),Hh(x,S,O))},xc=function(_,S){return{u_matrix:_,u_world:S}},Se=function(_,S,x,O,k){return E.extend(Au(_,S,x,O),{u_world:k})},ie=function(_,S,x,O){var k,Z,Q=_.transform;if(O.paint.get("circle-pitch-alignment")==="map"){var ge=mi(x,1,Q.zoom);k=!0,Z=[ge,ge]}else k=!1,Z=Q.pixelsToGLUnits;return{u_camera_to_center_distance:Q.cameraToCenterDistance,u_scale_with_map:+(O.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(S.posMatrix,x,O.paint.get("circle-translate"),O.paint.get("circle-translate-anchor")),u_pitch_with_map:+k,u_device_pixel_ratio:E.browser.devicePixelRatio,u_extrude_scale:Z}},ve=function(_,S,x){var O=mi(x,1,S.zoom),k=Math.pow(2,S.zoom-x.tileID.overscaledZ),Z=x.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:S.cameraToCenterDistance,u_pixels_to_tile_units:O,u_extrude_scale:[S.pixelsToGLUnits[0]/(O*k),S.pixelsToGLUnits[1]/(O*k)],u_overscale_factor:Z}},et=function(_,S,x){return{u_matrix:_,u_inv_matrix:S,u_camera_to_center_distance:x.cameraToCenterDistance,u_viewport_size:[x.width,x.height]}},an=function(_,S,x){return x===void 0&&(x=1),{u_matrix:_,u_color:S,u_overlay:0,u_overlay_scale:x}},cn=function(_){return{u_matrix:_}},tr=function(_,S,x,O){return{u_matrix:_,u_extrude_scale:mi(S,1,x),u_intensity:O}},Or=function(_,S,x){var O=_.transform;return{u_matrix:La(_,S,x),u_ratio:1/mi(S,1,O.zoom),u_device_pixel_ratio:E.browser.devicePixelRatio,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}},Wr=function(_,S,x,O){return E.extend(Or(_,S,x),{u_image:0,u_image_height:O})},Fi=function(_,S,x,O){var k=_.transform,Z=_o(S,k);return{u_matrix:La(_,S,x),u_texsize:S.imageAtlasTexture.size,u_ratio:1/mi(S,1,k.zoom),u_device_pixel_ratio:E.browser.devicePixelRatio,u_image:0,u_scale:[Z,O.fromScale,O.toScale],u_fade:O.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},xo=function(_,S,x,O,k){var Z=_.lineAtlas,Q=_o(S,_.transform),ge=x.layout.get("line-cap")==="round",je=Z.getDash(O.from,ge),ft=Z.getDash(O.to,ge),Ut=je.width*k.fromScale,Vt=ft.width*k.toScale;return E.extend(Or(_,S,x),{u_patternscale_a:[Q/Ut,-je.height/2],u_patternscale_b:[Q/Vt,-ft.height/2],u_sdfgamma:Z.width/(256*Math.min(Ut,Vt)*E.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:je.y,u_tex_y_b:ft.y,u_mix:k.t})};function _o(_,S){return 1/mi(_,1,S.tileZoom)}function La(_,S,x){return _.translatePosMatrix(S.tileID.posMatrix,S,x.paint.get("line-translate"),x.paint.get("line-translate-anchor"))}var Na=function(_,S,x,O,k){return{u_matrix:_,u_tl_parent:S,u_scale_parent:x,u_buffer_scale:1,u_fade_t:O.mix,u_opacity:O.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(Q=k.paint.get("raster-saturation"),Q>0?1-1/(1.001-Q):-Q),u_contrast_factor:(Z=k.paint.get("raster-contrast"),Z>0?1/(1-Z):1+Z),u_spin_weights:Ta(k.paint.get("raster-hue-rotate"))};var Z,Q};function Ta(_){_*=Math.PI/180;var S=Math.sin(_),x=Math.cos(_);return[(2*x+1)/3,(-Math.sqrt(3)*S-x+1)/3,(Math.sqrt(3)*S-x+1)/3]}var Ca,xa=function(_,S,x,O,k,Z,Q,ge,je,ft){var Ut=k.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:S?S.uSizeT:0,u_size:S?S.uSize:0,u_camera_to_center_distance:Ut.cameraToCenterDistance,u_pitch:Ut.pitch/360*2*Math.PI,u_rotate_symbol:+x,u_aspect_ratio:Ut.width/Ut.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:Z,u_label_plane_matrix:Q,u_coord_matrix:ge,u_is_text:+je,u_pitch_with_map:+O,u_texsize:ft,u_texture:0}},Fa=function(_,S,x,O,k,Z,Q,ge,je,ft,Ut){var Vt=k.transform;return E.extend(xa(_,S,x,O,k,Z,Q,ge,je,ft),{u_gamma_scale:O?Math.cos(Vt._pitch)*Vt.cameraToCenterDistance:1,u_device_pixel_ratio:E.browser.devicePixelRatio,u_is_halo:+Ut})},Oa=function(_,S,x,O,k,Z,Q,ge,je,ft){return E.extend(Fa(_,S,x,O,k,Z,Q,ge,!0,je,!0),{u_texsize_icon:ft,u_texture_icon:1})},Za=function(_,S,x){return{u_matrix:_,u_opacity:S,u_color:x}},Sa=function(_,S,x,O,k,Z){return E.extend(function(Q,ge,je,ft){var Ut=je.imageManager.getPattern(Q.from.toString()),Vt=je.imageManager.getPattern(Q.to.toString()),Zt=je.imageManager.getPixelSize(),En=Zt.width,mn=Zt.height,Un=Math.pow(2,ft.tileID.overscaledZ),ln=ft.tileSize*Math.pow(2,je.transform.tileZoom)/Un,kn=ln*(ft.tileID.canonical.x+ft.tileID.wrap*Un),Jn=ln*ft.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ut.tl,u_pattern_br_a:Ut.br,u_pattern_tl_b:Vt.tl,u_pattern_br_b:Vt.br,u_texsize:[En,mn],u_mix:ge.t,u_pattern_size_a:Ut.displaySize,u_pattern_size_b:Vt.displaySize,u_scale_a:ge.fromScale,u_scale_b:ge.toScale,u_tile_units_to_pixels:1/mi(ft,1,je.transform.tileZoom),u_pixel_coord_upper:[kn>>16,Jn>>16],u_pixel_coord_lower:[65535&kn,65535&Jn]}}(O,Z,x,k),{u_matrix:_,u_opacity:S})},ps={fillExtrusion:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_lightpos:new E.Uniform3f(_,S.u_lightpos),u_lightintensity:new E.Uniform1f(_,S.u_lightintensity),u_lightcolor:new E.Uniform3f(_,S.u_lightcolor),u_vertical_gradient:new E.Uniform1f(_,S.u_vertical_gradient),u_opacity:new E.Uniform1f(_,S.u_opacity)}},fillExtrusionPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_lightpos:new E.Uniform3f(_,S.u_lightpos),u_lightintensity:new E.Uniform1f(_,S.u_lightintensity),u_lightcolor:new E.Uniform3f(_,S.u_lightcolor),u_vertical_gradient:new E.Uniform1f(_,S.u_vertical_gradient),u_height_factor:new E.Uniform1f(_,S.u_height_factor),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade),u_opacity:new E.Uniform1f(_,S.u_opacity)}},fill:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},fillPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},fillOutline:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world)}},fillOutlinePattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world),u_image:new E.Uniform1i(_,S.u_image),u_texsize:new E.Uniform2f(_,S.u_texsize),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},circle:function(_,S){return{u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_scale_with_map:new E.Uniform1i(_,S.u_scale_with_map),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_extrude_scale:new E.Uniform2f(_,S.u_extrude_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},collisionBox:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pixels_to_tile_units:new E.Uniform1f(_,S.u_pixels_to_tile_units),u_extrude_scale:new E.Uniform2f(_,S.u_extrude_scale),u_overscale_factor:new E.Uniform1f(_,S.u_overscale_factor)}},collisionCircle:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_inv_matrix:new E.UniformMatrix4f(_,S.u_inv_matrix),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_viewport_size:new E.Uniform2f(_,S.u_viewport_size)}},debug:function(_,S){return{u_color:new E.UniformColor(_,S.u_color),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_overlay:new E.Uniform1i(_,S.u_overlay),u_overlay_scale:new E.Uniform1f(_,S.u_overlay_scale)}},clippingMask:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},heatmap:function(_,S){return{u_extrude_scale:new E.Uniform1f(_,S.u_extrude_scale),u_intensity:new E.Uniform1f(_,S.u_intensity),u_matrix:new E.UniformMatrix4f(_,S.u_matrix)}},heatmapTexture:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_world:new E.Uniform2f(_,S.u_world),u_image:new E.Uniform1i(_,S.u_image),u_color_ramp:new E.Uniform1i(_,S.u_color_ramp),u_opacity:new E.Uniform1f(_,S.u_opacity)}},hillshade:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_latrange:new E.Uniform2f(_,S.u_latrange),u_light:new E.Uniform2f(_,S.u_light),u_shadow:new E.UniformColor(_,S.u_shadow),u_highlight:new E.UniformColor(_,S.u_highlight),u_accent:new E.UniformColor(_,S.u_accent)}},hillshadePrepare:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_image:new E.Uniform1i(_,S.u_image),u_dimension:new E.Uniform2f(_,S.u_dimension),u_zoom:new E.Uniform1f(_,S.u_zoom),u_unpack:new E.Uniform4f(_,S.u_unpack)}},line:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels)}},lineGradient:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_image:new E.Uniform1i(_,S.u_image),u_image_height:new E.Uniform1f(_,S.u_image_height)}},linePattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_texsize:new E.Uniform2f(_,S.u_texsize),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_image:new E.Uniform1i(_,S.u_image),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_scale:new E.Uniform3f(_,S.u_scale),u_fade:new E.Uniform1f(_,S.u_fade)}},lineSDF:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_ratio:new E.Uniform1f(_,S.u_ratio),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_units_to_pixels:new E.Uniform2f(_,S.u_units_to_pixels),u_patternscale_a:new E.Uniform2f(_,S.u_patternscale_a),u_patternscale_b:new E.Uniform2f(_,S.u_patternscale_b),u_sdfgamma:new E.Uniform1f(_,S.u_sdfgamma),u_image:new E.Uniform1i(_,S.u_image),u_tex_y_a:new E.Uniform1f(_,S.u_tex_y_a),u_tex_y_b:new E.Uniform1f(_,S.u_tex_y_b),u_mix:new E.Uniform1f(_,S.u_mix)}},raster:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_tl_parent:new E.Uniform2f(_,S.u_tl_parent),u_scale_parent:new E.Uniform1f(_,S.u_scale_parent),u_buffer_scale:new E.Uniform1f(_,S.u_buffer_scale),u_fade_t:new E.Uniform1f(_,S.u_fade_t),u_opacity:new E.Uniform1f(_,S.u_opacity),u_image0:new E.Uniform1i(_,S.u_image0),u_image1:new E.Uniform1i(_,S.u_image1),u_brightness_low:new E.Uniform1f(_,S.u_brightness_low),u_brightness_high:new E.Uniform1f(_,S.u_brightness_high),u_saturation_factor:new E.Uniform1f(_,S.u_saturation_factor),u_contrast_factor:new E.Uniform1f(_,S.u_contrast_factor),u_spin_weights:new E.Uniform3f(_,S.u_spin_weights)}},symbolIcon:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texture:new E.Uniform1i(_,S.u_texture)}},symbolSDF:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texture:new E.Uniform1i(_,S.u_texture),u_gamma_scale:new E.Uniform1f(_,S.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(_,S.u_is_halo)}},symbolTextAndIcon:function(_,S){return{u_is_size_zoom_constant:new E.Uniform1i(_,S.u_is_size_zoom_constant),u_is_size_feature_constant:new E.Uniform1i(_,S.u_is_size_feature_constant),u_size_t:new E.Uniform1f(_,S.u_size_t),u_size:new E.Uniform1f(_,S.u_size),u_camera_to_center_distance:new E.Uniform1f(_,S.u_camera_to_center_distance),u_pitch:new E.Uniform1f(_,S.u_pitch),u_rotate_symbol:new E.Uniform1i(_,S.u_rotate_symbol),u_aspect_ratio:new E.Uniform1f(_,S.u_aspect_ratio),u_fade_change:new E.Uniform1f(_,S.u_fade_change),u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_label_plane_matrix:new E.UniformMatrix4f(_,S.u_label_plane_matrix),u_coord_matrix:new E.UniformMatrix4f(_,S.u_coord_matrix),u_is_text:new E.Uniform1i(_,S.u_is_text),u_pitch_with_map:new E.Uniform1i(_,S.u_pitch_with_map),u_texsize:new E.Uniform2f(_,S.u_texsize),u_texsize_icon:new E.Uniform2f(_,S.u_texsize_icon),u_texture:new E.Uniform1i(_,S.u_texture),u_texture_icon:new E.Uniform1i(_,S.u_texture_icon),u_gamma_scale:new E.Uniform1f(_,S.u_gamma_scale),u_device_pixel_ratio:new E.Uniform1f(_,S.u_device_pixel_ratio),u_is_halo:new E.Uniform1i(_,S.u_is_halo)}},background:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_opacity:new E.Uniform1f(_,S.u_opacity),u_color:new E.UniformColor(_,S.u_color)}},backgroundPattern:function(_,S){return{u_matrix:new E.UniformMatrix4f(_,S.u_matrix),u_opacity:new E.Uniform1f(_,S.u_opacity),u_image:new E.Uniform1i(_,S.u_image),u_pattern_tl_a:new E.Uniform2f(_,S.u_pattern_tl_a),u_pattern_br_a:new E.Uniform2f(_,S.u_pattern_br_a),u_pattern_tl_b:new E.Uniform2f(_,S.u_pattern_tl_b),u_pattern_br_b:new E.Uniform2f(_,S.u_pattern_br_b),u_texsize:new E.Uniform2f(_,S.u_texsize),u_mix:new E.Uniform1f(_,S.u_mix),u_pattern_size_a:new E.Uniform2f(_,S.u_pattern_size_a),u_pattern_size_b:new E.Uniform2f(_,S.u_pattern_size_b),u_scale_a:new E.Uniform1f(_,S.u_scale_a),u_scale_b:new E.Uniform1f(_,S.u_scale_b),u_pixel_coord_upper:new E.Uniform2f(_,S.u_pixel_coord_upper),u_pixel_coord_lower:new E.Uniform2f(_,S.u_pixel_coord_lower),u_tile_units_to_pixels:new E.Uniform1f(_,S.u_tile_units_to_pixels)}}};function Ws(_,S,x,O,k,Z,Q){for(var ge=_.context,je=ge.gl,ft=_.useProgram("collisionBox"),Ut=[],Vt=0,Zt=0,En=0;En<O.length;En++){var mn=O[En],Un=S.getTile(mn),ln=Un.getBucket(x);if(ln){var kn=mn.posMatrix;k[0]===0&&k[1]===0||(kn=_.translatePosMatrix(mn.posMatrix,Un,k,Z));var Jn=Q?ln.textCollisionBox:ln.iconCollisionBox,gr=ln.collisionCircleArray;if(gr.length>0){var Ir=E.create(),Mr=kn;E.mul(Ir,ln.placementInvProjMatrix,_.transform.glCoordMatrix),E.mul(Ir,Ir,ln.placementViewportMatrix),Ut.push({circleArray:gr,circleOffset:Zt,transform:Mr,invTransform:Ir}),Zt=Vt+=gr.length/4}Jn&&ft.draw(ge,je.LINES,it.disabled,At.disabled,_.colorModeForRenderPass(),un.disabled,ve(kn,_.transform,Un),x.id,Jn.layoutVertexBuffer,Jn.indexBuffer,Jn.segments,null,_.transform.zoom,null,null,Jn.collisionVertexBuffer)}}if(Q&&Ut.length){var Ur=_.useProgram("collisionCircle"),si=new E.StructArrayLayout2f1f2i16;si.resize(4*Vt),si._trim();for(var Vi=0,Bi=0,vo=Ut;Bi<vo.length;Bi+=1)for(var jo=vo[Bi],Xo=0;Xo<jo.circleArray.length/4;Xo++){var Yo=4*Xo,cs=jo.circleArray[Yo+0],Dr=jo.circleArray[Yo+1],Qt=jo.circleArray[Yo+2],ga=jo.circleArray[Yo+3];si.emplace(Vi++,cs,Dr,Qt,ga,0),si.emplace(Vi++,cs,Dr,Qt,ga,1),si.emplace(Vi++,cs,Dr,Qt,ga,2),si.emplace(Vi++,cs,Dr,Qt,ga,3)}(!Ca||Ca.length<2*Vt)&&(Ca=function(xl){var Cu=2*xl,su=new E.StructArrayLayout3ui6;su.resize(Cu),su._trim();for(var Ss=0;Ss<Cu;Ss++){var vl=6*Ss;su.uint16[vl+0]=4*Ss+0,su.uint16[vl+1]=4*Ss+1,su.uint16[vl+2]=4*Ss+2,su.uint16[vl+3]=4*Ss+2,su.uint16[vl+4]=4*Ss+3,su.uint16[vl+5]=4*Ss+0}return su}(Vt));for(var fa=ge.createIndexBuffer(Ca,!0),Qo=ge.createVertexBuffer(si,E.collisionCircleLayout.members,!0),Ea=0,aa=Ut;Ea<aa.length;Ea+=1){var ko=aa[Ea],au=et(ko.transform,ko.invTransform,_.transform);Ur.draw(ge,je.TRIANGLES,it.disabled,At.disabled,_.colorModeForRenderPass(),un.disabled,au,x.id,Qo,fa,E.SegmentVector.simpleSegment(0,2*ko.circleOffset,ko.circleArray.length,ko.circleArray.length/2),null,_.transform.zoom,null,null,null)}Qo.destroy(),fa.destroy()}}var $s=E.identity(new Float32Array(16));function Ec(_,S,x,O,k,Z){var Q=E.getAnchorAlignment(_),ge=-(Q.horizontalAlign-.5)*S,je=-(Q.verticalAlign-.5)*x,ft=E.evaluateVariableOffset(_,O);return new E.Point((ge/k+ft[0])*Z,(je/k+ft[1])*Z)}function pl(_,S,x,O,k,Z,Q,ge,je,ft,Ut){var Vt=_.text.placedSymbolArray,Zt=_.text.dynamicLayoutVertexArray,En=_.icon.dynamicLayoutVertexArray,mn={};Zt.clear();for(var Un=0;Un<Vt.length;Un++){var ln=Vt.get(Un),kn=ln.hidden||!ln.crossTileID||_.allowVerticalPlacement&&!ln.placedOrientation?null:O[ln.crossTileID];if(kn){var Jn=new E.Point(ln.anchorX,ln.anchorY),gr=Bn(Jn,x?ge:Q),Ir=yn(Z.cameraToCenterDistance,gr.signedDistanceFromCamera),Mr=k.evaluateSizeForFeature(_.textSizeData,ft,ln)*Ir/E.ONE_EM;x&&(Mr*=_.tilePixelRatio/je);for(var Ur=Ec(kn.anchor,kn.width,kn.height,kn.textOffset,kn.textBoxScale,Mr),si=x?Bn(Jn.add(Ur),Q).point:gr.point.add(S?Ur.rotate(-Z.angle):Ur),Vi=_.allowVerticalPlacement&&ln.placedOrientation===E.WritingMode.vertical?Math.PI/2:0,Bi=0;Bi<ln.numGlyphs;Bi++)E.addDynamicAttributes(Zt,si,Vi);Ut&&ln.associatedIconIndex>=0&&(mn[ln.associatedIconIndex]={shiftedAnchor:si,angle:Vi})}else ji(ln.numGlyphs,Zt)}if(Ut){En.clear();for(var vo=_.icon.placedSymbolArray,jo=0;jo<vo.length;jo++){var Xo=vo.get(jo);if(Xo.hidden)ji(Xo.numGlyphs,En);else{var Yo=mn[jo];if(Yo)for(var cs=0;cs<Xo.numGlyphs;cs++)E.addDynamicAttributes(En,Yo.shiftedAnchor,Yo.angle);else ji(Xo.numGlyphs,En)}}_.icon.dynamicLayoutVertexBuffer.updateData(En)}_.text.dynamicLayoutVertexBuffer.updateData(Zt)}function cc(_,S,x){return x.iconsInText&&S?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function cf(_,S,x,O,k,Z,Q,ge,je,ft,Ut,Vt){for(var Zt=_.context,En=Zt.gl,mn=_.transform,Un=ge==="map",ln=je==="map",kn=Un&&x.layout.get("symbol-placement")!=="point",Jn=Un&&!ln&&!kn,gr=x.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ir=!1,Mr=_.depthModeForSublayer(0,it.ReadOnly),Ur=x.layout.get("text-variable-anchor"),si=[],Vi=0,Bi=O;Vi<Bi.length;Vi+=1){var vo=Bi[Vi],jo=S.getTile(vo),Xo=jo.getBucket(x);if(Xo){var Yo=k?Xo.text:Xo.icon;if(Yo&&Yo.segments.get().length){var cs=Yo.programConfigurations.get(x.id),Dr=k||Xo.sdfIcons,Qt=k?Xo.textSizeData:Xo.iconSizeData,ga=ln||mn.pitch!==0,fa=_.useProgram(cc(Dr,k,Xo),cs),Qo=E.evaluateSizeForZoom(Qt,mn.zoom),Ea=void 0,aa=[0,0],ko=void 0,au=void 0,xl=null,Cu=void 0;if(k)ko=jo.glyphAtlasTexture,au=En.LINEAR,Ea=jo.glyphAtlasTexture.size,Xo.iconsInText&&(aa=jo.imageAtlasTexture.size,xl=jo.imageAtlasTexture,Cu=ga||_.options.rotating||_.options.zooming||Qt.kind==="composite"||Qt.kind==="camera"?En.LINEAR:En.NEAREST);else{var su=x.layout.get("icon-size").constantOr(0)!==1||Xo.iconsNeedLinear;ko=jo.imageAtlasTexture,au=Dr||_.options.rotating||_.options.zooming||su||ga?En.LINEAR:En.NEAREST,Ea=jo.imageAtlasTexture.size}var Ss=mi(jo,1,_.transform.zoom),vl=hn(vo.posMatrix,ln,Un,_.transform,Ss),fl=Fn(vo.posMatrix,ln,Un,_.transform,Ss),vc=Ur&&Xo.hasTextData(),Wf=x.layout.get("icon-text-fit")!=="none"&&vc&&Xo.hasIconData();kn&&pr(Xo,vo.posMatrix,_,k,vl,fl,ln,ft);var Tc=_.translatePosMatrix(vo.posMatrix,jo,Z,Q),df=kn||k&&Ur||Wf?$s:vl,Vc=_.translatePosMatrix(fl,jo,Z,Q,!0),sp=Dr&&x.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0,lp={program:fa,buffers:Yo,uniformValues:Dr?Xo.iconsInText?Oa(Qt.kind,Qo,Jn,ln,_,Tc,df,Vc,Ea,aa):Fa(Qt.kind,Qo,Jn,ln,_,Tc,df,Vc,k,Ea,!0):xa(Qt.kind,Qo,Jn,ln,_,Tc,df,Vc,k,Ea),atlasTexture:ko,atlasTextureIcon:xl,atlasInterpolation:au,atlasInterpolationIcon:Cu,isSDF:Dr,hasHalo:sp};if(gr&&Xo.canOverlap){Ir=!0;for(var wh=0,$h=Yo.segments.get();wh<$h.length;wh+=1){var qh=$h[wh];si.push({segments:new E.SegmentVector([qh]),sortKey:qh.sortKey,state:lp})}}else si.push({segments:Yo.segments,sortKey:0,state:lp})}}}Ir&&si.sort(function(Mf,Rf){return Mf.sortKey-Rf.sortKey});for(var ih=0,Mi=si;ih<Mi.length;ih+=1){var Rl=Mi[ih],Pl=Rl.state;if(Zt.activeTexture.set(En.TEXTURE0),Pl.atlasTexture.bind(Pl.atlasInterpolation,En.CLAMP_TO_EDGE),Pl.atlasTextureIcon&&(Zt.activeTexture.set(En.TEXTURE1),Pl.atlasTextureIcon&&Pl.atlasTextureIcon.bind(Pl.atlasInterpolationIcon,En.CLAMP_TO_EDGE)),Pl.isSDF){var Ju=Pl.uniformValues;Pl.hasHalo&&(Ju.u_is_halo=1,fc(Pl.buffers,Rl.segments,x,_,Pl.program,Mr,Ut,Vt,Ju)),Ju.u_is_halo=0}fc(Pl.buffers,Rl.segments,x,_,Pl.program,Mr,Ut,Vt,Pl.uniformValues)}}function fc(_,S,x,O,k,Z,Q,ge,je){var ft=O.context;k.draw(ft,ft.gl.TRIANGLES,Z,Q,ge,un.disabled,je,x.id,_.layoutVertexBuffer,_.indexBuffer,S,x.paint,O.transform.zoom,_.programConfigurations.get(x.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function zc(_,S,x,O,k,Z,Q){var ge,je,ft,Ut,Vt,Zt=_.context.gl,En=x.paint.get("fill-pattern"),mn=En&&En.constantOr(1),Un=x.getCrossfadeParameters();Q?(je=mn&&!x.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ge=Zt.LINES):(je=mn?"fillPattern":"fill",ge=Zt.TRIANGLES);for(var ln=0,kn=O;ln<kn.length;ln+=1){var Jn=kn[ln],gr=S.getTile(Jn);if(!mn||gr.patternsLoaded()){var Ir=gr.getBucket(x);if(Ir){var Mr=Ir.programConfigurations.get(x.id),Ur=_.useProgram(je,Mr);mn&&(_.context.activeTexture.set(Zt.TEXTURE0),gr.imageAtlasTexture.bind(Zt.LINEAR,Zt.CLAMP_TO_EDGE),Mr.updatePaintBuffers(Un));var si=En.constantOr(null);if(si&&gr.imageAtlas){var Vi=gr.imageAtlas,Bi=Vi.patternPositions[si.to.toString()],vo=Vi.patternPositions[si.from.toString()];Bi&&vo&&Mr.setConstantPatternPositions(Bi,vo)}var jo=_.translatePosMatrix(Jn.posMatrix,gr,x.paint.get("fill-translate"),x.paint.get("fill-translate-anchor"));if(Q){Ut=Ir.indexBuffer2,Vt=Ir.segments2;var Xo=[Zt.drawingBufferWidth,Zt.drawingBufferHeight];ft=je==="fillOutlinePattern"&&mn?Se(jo,_,Un,gr,Xo):xc(jo,Xo)}else Ut=Ir.indexBuffer,Vt=Ir.segments,ft=mn?Au(jo,_,Un,gr):kc(jo);Ur.draw(_.context,ge,k,_.stencilModeForClipping(Jn),Z,un.disabled,ft,x.id,Ir.layoutVertexBuffer,Ut,Vt,x.paint,_.transform.zoom,Mr)}}}}function Qf(_,S,x,O,k,Z,Q){for(var ge=_.context,je=ge.gl,ft=x.paint.get("fill-extrusion-pattern"),Ut=ft.constantOr(1),Vt=x.getCrossfadeParameters(),Zt=x.paint.get("fill-extrusion-opacity"),En=0,mn=O;En<mn.length;En+=1){var Un=mn[En],ln=S.getTile(Un),kn=ln.getBucket(x);if(kn){var Jn=kn.programConfigurations.get(x.id),gr=_.useProgram(Ut?"fillExtrusionPattern":"fillExtrusion",Jn);Ut&&(_.context.activeTexture.set(je.TEXTURE0),ln.imageAtlasTexture.bind(je.LINEAR,je.CLAMP_TO_EDGE),Jn.updatePaintBuffers(Vt));var Ir=ft.constantOr(null);if(Ir&&ln.imageAtlas){var Mr=ln.imageAtlas,Ur=Mr.patternPositions[Ir.to.toString()],si=Mr.patternPositions[Ir.from.toString()];Ur&&si&&Jn.setConstantPatternPositions(Ur,si)}var Vi=_.translatePosMatrix(Un.posMatrix,ln,x.paint.get("fill-extrusion-translate"),x.paint.get("fill-extrusion-translate-anchor")),Bi=x.paint.get("fill-extrusion-vertical-gradient"),vo=Ut?vu(Vi,_,Bi,Zt,Un,Vt,ln):gh(Vi,_,Bi,Zt);gr.draw(ge,ge.gl.TRIANGLES,k,Z,Q,un.backCCW,vo,x.id,kn.layoutVertexBuffer,kn.indexBuffer,kn.segments,x.paint,_.transform.zoom,Jn)}}}function jf(_,S,x,O,k,Z){var Q=_.context,ge=Q.gl,je=S.fbo;if(je){var ft=_.useProgram("hillshade");Q.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,je.colorAttachment.get());var Ut=function(Vt,Zt,En){var mn=En.paint.get("hillshade-shadow-color"),Un=En.paint.get("hillshade-highlight-color"),ln=En.paint.get("hillshade-accent-color"),kn=En.paint.get("hillshade-illumination-direction")*(Math.PI/180);En.paint.get("hillshade-illumination-anchor")==="viewport"&&(kn-=Vt.transform.angle);var Jn,gr,Ir,Mr=!Vt.options.moving;return{u_matrix:Vt.transform.calculatePosMatrix(Zt.tileID.toUnwrapped(),Mr),u_image:0,u_latrange:(Jn=Zt.tileID,gr=Math.pow(2,Jn.canonical.z),Ir=Jn.canonical.y,[new E.MercatorCoordinate(0,Ir/gr).toLngLat().lat,new E.MercatorCoordinate(0,(Ir+1)/gr).toLngLat().lat]),u_light:[En.paint.get("hillshade-exaggeration"),kn],u_shadow:mn,u_highlight:Un,u_accent:ln}}(_,S,x);ft.draw(Q,ge.TRIANGLES,O,k,Z,un.disabled,Ut,x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}}function u0(_,S,x,O,k,Z){var Q=_.context,ge=Q.gl,je=S.dem;if(je&&je.data){var ft=je.dim,Ut=je.stride,Vt=je.getPixels();if(Q.activeTexture.set(ge.TEXTURE1),Q.pixelStoreUnpackPremultiplyAlpha.set(!1),S.demTexture=S.demTexture||_.getTileTexture(Ut),S.demTexture){var Zt=S.demTexture;Zt.update(Vt,{premultiply:!1}),Zt.bind(ge.NEAREST,ge.CLAMP_TO_EDGE)}else S.demTexture=new E.Texture(Q,Vt,ge.RGBA,{premultiply:!1}),S.demTexture.bind(ge.NEAREST,ge.CLAMP_TO_EDGE);Q.activeTexture.set(ge.TEXTURE0);var En=S.fbo;if(!En){var mn=new E.Texture(Q,{width:ft,height:ft,data:null},ge.RGBA);mn.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),(En=S.fbo=Q.createFramebuffer(ft,ft,!0)).colorAttachment.set(mn.texture)}Q.bindFramebuffer.set(En.framebuffer),Q.viewport.set([0,0,ft,ft]),_.useProgram("hillshadePrepare").draw(Q,ge.TRIANGLES,O,k,Z,un.disabled,function(Un,ln){var kn=ln.stride,Jn=E.create();return E.ortho(Jn,0,E.EXTENT,-E.EXTENT,0,0,1),E.translate(Jn,Jn,[0,-E.EXTENT,0]),{u_matrix:Jn,u_image:1,u_dimension:[kn,kn],u_zoom:Un.overscaledZ,u_unpack:ln.getUnpackVector()}}(S.tileID,je),x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),S.needsHillshadePrepare=!1}}function tp(_,S,x,O,k){var Z=O.paint.get("raster-fade-duration");if(Z>0){var Q=E.browser.now(),ge=(Q-_.timeAdded)/Z,je=S?(Q-S.timeAdded)/Z:-1,ft=x.getSource(),Ut=k.coveringZoomLevel({tileSize:ft.tileSize,roundZoom:ft.roundZoom}),Vt=!S||Math.abs(S.tileID.overscaledZ-Ut)>Math.abs(_.tileID.overscaledZ-Ut),Zt=Vt&&_.refreshedUponExpiration?1:E.clamp(Vt?ge:1-je,0,1);return _.refreshedUponExpiration&&ge>=1&&(_.refreshedUponExpiration=!1),S?{opacity:1,mix:1-Zt}:{opacity:Zt,mix:0}}return{opacity:1,mix:0}}var jp=new E.Color(1,0,0,1),Sf=new E.Color(0,1,0,1),c0=new E.Color(0,0,1,1),np=new E.Color(1,0,1,1),Td=new E.Color(0,1,1,1);function wf(_,S,x,O){yh(_,0,S+x/2,_.transform.width,x,O)}function Vp(_,S,x,O){yh(_,S-x/2,0,x,_.transform.height,O)}function yh(_,S,x,O,k,Z){var Q=_.context,ge=Q.gl;ge.enable(ge.SCISSOR_TEST),ge.scissor(S*E.browser.devicePixelRatio,x*E.browser.devicePixelRatio,O*E.browser.devicePixelRatio,k*E.browser.devicePixelRatio),Q.clear({color:Z}),ge.disable(ge.SCISSOR_TEST)}function rp(_,S,x){var O=_.context,k=O.gl,Z=x.posMatrix,Q=_.useProgram("debug"),ge=it.disabled,je=At.disabled,ft=_.colorModeForRenderPass();O.activeTexture.set(k.TEXTURE0),_.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Q.draw(O,k.LINE_STRIP,ge,je,ft,un.disabled,an(Z,E.Color.red),"$debug",_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments);var Ut=S.getTileByID(x.key).latestRawTileData,Vt=Math.floor((Ut&&Ut.byteLength||0)/1024),Zt=S.getTile(x).tileSize,En=512/Math.min(Zt,512)*(x.overscaledZ/_.transform.zoom)*.5,mn=x.canonical.toString();x.overscaledZ!==x.canonical.z&&(mn+=" => "+x.overscaledZ),function(Un,ln){Un.initDebugOverlayCanvas();var kn=Un.debugOverlayCanvas,Jn=Un.context.gl,gr=Un.debugOverlayCanvas.getContext("2d");gr.clearRect(0,0,kn.width,kn.height),gr.shadowColor="white",gr.shadowBlur=2,gr.lineWidth=1.5,gr.strokeStyle="white",gr.textBaseline="top",gr.font="bold 36px Open Sans, sans-serif",gr.fillText(ln,5,5),gr.strokeText(ln,5,5),Un.debugOverlayTexture.update(kn),Un.debugOverlayTexture.bind(Jn.LINEAR,Jn.CLAMP_TO_EDGE)}(_,mn+" "+Vt+"kb"),Q.draw(O,k.TRIANGLES,ge,je,qt.alphaBlended,un.disabled,an(Z,E.Color.transparent,En),"$debug",_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments)}var Jf={symbol:function(_,S,x,O,k){if(_.renderPass==="translucent"){var Z=At.disabled,Q=_.colorModeForRenderPass();x.layout.get("text-variable-anchor")&&function(ge,je,ft,Ut,Vt,Zt,En){for(var mn=je.transform,Un=Vt==="map",ln=Zt==="map",kn=0,Jn=ge;kn<Jn.length;kn+=1){var gr=Jn[kn],Ir=Ut.getTile(gr),Mr=Ir.getBucket(ft);if(Mr&&Mr.text&&Mr.text.segments.get().length){var Ur=E.evaluateSizeForZoom(Mr.textSizeData,mn.zoom),si=mi(Ir,1,je.transform.zoom),Vi=hn(gr.posMatrix,ln,Un,je.transform,si),Bi=ft.layout.get("icon-text-fit")!=="none"&&Mr.hasIconData();if(Ur){var vo=Math.pow(2,mn.zoom-Ir.tileID.overscaledZ);pl(Mr,Un,ln,En,E.symbolSize,mn,Vi,gr.posMatrix,vo,Ur,Bi)}}}}(O,_,x,S,x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),k),x.paint.get("icon-opacity").constantOr(1)!==0&&cf(_,S,x,O,!1,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),x.layout.get("icon-rotation-alignment"),x.layout.get("icon-pitch-alignment"),x.layout.get("icon-keep-upright"),Z,Q),x.paint.get("text-opacity").constantOr(1)!==0&&cf(_,S,x,O,!0,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),x.layout.get("text-keep-upright"),Z,Q),S.map.showCollisionBoxes&&(Ws(_,S,x,O,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),!0),Ws(_,S,x,O,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),!1))}},circle:function(_,S,x,O){if(_.renderPass==="translucent"){var k=x.paint.get("circle-opacity"),Z=x.paint.get("circle-stroke-width"),Q=x.paint.get("circle-stroke-opacity"),ge=x.layout.get("circle-sort-key").constantOr(1)!==void 0;if(k.constantOr(1)!==0||Z.constantOr(1)!==0&&Q.constantOr(1)!==0){for(var je=_.context,ft=je.gl,Ut=_.depthModeForSublayer(0,it.ReadOnly),Vt=At.disabled,Zt=_.colorModeForRenderPass(),En=[],mn=0;mn<O.length;mn++){var Un=O[mn],ln=S.getTile(Un),kn=ln.getBucket(x);if(kn){var Jn=kn.programConfigurations.get(x.id),gr={programConfiguration:Jn,program:_.useProgram("circle",Jn),layoutVertexBuffer:kn.layoutVertexBuffer,indexBuffer:kn.indexBuffer,uniformValues:ie(_,Un,ln,x)};if(ge)for(var Ir=0,Mr=kn.segments.get();Ir<Mr.length;Ir+=1){var Ur=Mr[Ir];En.push({segments:new E.SegmentVector([Ur]),sortKey:Ur.sortKey,state:gr})}else En.push({segments:kn.segments,sortKey:0,state:gr})}}ge&&En.sort(function(jo,Xo){return jo.sortKey-Xo.sortKey});for(var si=0,Vi=En;si<Vi.length;si+=1){var Bi=Vi[si],vo=Bi.state;vo.program.draw(je,ft.TRIANGLES,Ut,Vt,Zt,un.disabled,vo.uniformValues,x.id,vo.layoutVertexBuffer,vo.indexBuffer,Bi.segments,x.paint,_.transform.zoom,vo.programConfiguration)}}}},heatmap:function(_,S,x,O){if(x.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){var k=_.context,Z=k.gl,Q=At.disabled,ge=new qt([Z.ONE,Z.ONE],E.Color.transparent,[!0,!0,!0,!0]);(function(En,mn,Un){var ln=En.gl;En.activeTexture.set(ln.TEXTURE1),En.viewport.set([0,0,mn.width/4,mn.height/4]);var kn=Un.heatmapFbo;if(kn)ln.bindTexture(ln.TEXTURE_2D,kn.colorAttachment.get()),En.bindFramebuffer.set(kn.framebuffer);else{var Jn=ln.createTexture();ln.bindTexture(ln.TEXTURE_2D,Jn),ln.texParameteri(ln.TEXTURE_2D,ln.TEXTURE_WRAP_S,ln.CLAMP_TO_EDGE),ln.texParameteri(ln.TEXTURE_2D,ln.TEXTURE_WRAP_T,ln.CLAMP_TO_EDGE),ln.texParameteri(ln.TEXTURE_2D,ln.TEXTURE_MIN_FILTER,ln.LINEAR),ln.texParameteri(ln.TEXTURE_2D,ln.TEXTURE_MAG_FILTER,ln.LINEAR),kn=Un.heatmapFbo=En.createFramebuffer(mn.width/4,mn.height/4,!1),function(gr,Ir,Mr,Ur){var si=gr.gl;si.texImage2D(si.TEXTURE_2D,0,si.RGBA,Ir.width/4,Ir.height/4,0,si.RGBA,gr.extRenderToTextureHalfFloat?gr.extTextureHalfFloat.HALF_FLOAT_OES:si.UNSIGNED_BYTE,null),Ur.colorAttachment.set(Mr)}(En,mn,Jn,kn)}})(k,_,x),k.clear({color:E.Color.transparent});for(var je=0;je<O.length;je++){var ft=O[je];if(!S.hasRenderableParent(ft)){var Ut=S.getTile(ft),Vt=Ut.getBucket(x);if(Vt){var Zt=Vt.programConfigurations.get(x.id);_.useProgram("heatmap",Zt).draw(k,Z.TRIANGLES,it.disabled,Q,ge,un.disabled,tr(ft.posMatrix,Ut,_.transform.zoom,x.paint.get("heatmap-intensity")),x.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,x.paint,_.transform.zoom,Zt)}}}k.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(En,mn){var Un=En.context,ln=Un.gl,kn=mn.heatmapFbo;if(kn){Un.activeTexture.set(ln.TEXTURE0),ln.bindTexture(ln.TEXTURE_2D,kn.colorAttachment.get()),Un.activeTexture.set(ln.TEXTURE1);var Jn=mn.colorRampTexture;Jn||(Jn=mn.colorRampTexture=new E.Texture(Un,mn.colorRamp,ln.RGBA)),Jn.bind(ln.LINEAR,ln.CLAMP_TO_EDGE),En.useProgram("heatmapTexture").draw(Un,ln.TRIANGLES,it.disabled,At.disabled,En.colorModeForRenderPass(),un.disabled,function(gr,Ir,Mr,Ur){var si=E.create();E.ortho(si,0,gr.width,gr.height,0,0,1);var Vi=gr.context.gl;return{u_matrix:si,u_world:[Vi.drawingBufferWidth,Vi.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ir.paint.get("heatmap-opacity")}}(En,mn),mn.id,En.viewportBuffer,En.quadTriangleIndexBuffer,En.viewportSegments,mn.paint,En.transform.zoom)}}(_,x))},line:function(_,S,x,O){if(_.renderPass==="translucent"){var k=x.paint.get("line-opacity"),Z=x.paint.get("line-width");if(k.constantOr(1)!==0&&Z.constantOr(1)!==0)for(var Q=_.depthModeForSublayer(0,it.ReadOnly),ge=_.colorModeForRenderPass(),je=x.paint.get("line-dasharray"),ft=x.paint.get("line-pattern"),Ut=ft.constantOr(1),Vt=x.paint.get("line-gradient"),Zt=x.getCrossfadeParameters(),En=Ut?"linePattern":je?"lineSDF":Vt?"lineGradient":"line",mn=_.context,Un=mn.gl,ln=!0,kn=0,Jn=O;kn<Jn.length;kn+=1){var gr=Jn[kn],Ir=S.getTile(gr);if(!Ut||Ir.patternsLoaded()){var Mr=Ir.getBucket(x);if(Mr){var Ur=Mr.programConfigurations.get(x.id),si=_.context.program.get(),Vi=_.useProgram(En,Ur),Bi=ln||Vi.program!==si,vo=ft.constantOr(null);if(vo&&Ir.imageAtlas){var jo=Ir.imageAtlas,Xo=jo.patternPositions[vo.to.toString()],Yo=jo.patternPositions[vo.from.toString()];Xo&&Yo&&Ur.setConstantPatternPositions(Xo,Yo)}var cs=Ut?Fi(_,Ir,x,Zt):je?xo(_,Ir,x,je,Zt):Vt?Wr(_,Ir,x,Mr.lineClipsArray.length):Or(_,Ir,x);if(Ut)mn.activeTexture.set(Un.TEXTURE0),Ir.imageAtlasTexture.bind(Un.LINEAR,Un.CLAMP_TO_EDGE),Ur.updatePaintBuffers(Zt);else if(je&&(Bi||_.lineAtlas.dirty))mn.activeTexture.set(Un.TEXTURE0),_.lineAtlas.bind(mn);else if(Vt){var Dr=Mr.gradients[x.id],Qt=Dr.texture;if(x.gradientVersion!==Dr.version){var ga=256;if(x.stepInterpolant){var fa=S.getSource().maxzoom,Qo=gr.canonical.z===fa?Math.ceil(1<<_.transform.maxZoom-gr.canonical.z):1;ga=E.clamp(E.nextPowerOfTwo(Mr.maxLineLength/E.EXTENT*1024*Qo),256,mn.maxTextureSize)}Dr.gradient=E.renderColorRamp({expression:x.gradientExpression(),evaluationKey:"lineProgress",resolution:ga,image:Dr.gradient||void 0,clips:Mr.lineClipsArray}),Dr.texture?Dr.texture.update(Dr.gradient):Dr.texture=new E.Texture(mn,Dr.gradient,Un.RGBA),Dr.version=x.gradientVersion,Qt=Dr.texture}mn.activeTexture.set(Un.TEXTURE0),Qt.bind(x.stepInterpolant?Un.NEAREST:Un.LINEAR,Un.CLAMP_TO_EDGE)}Vi.draw(mn,Un.TRIANGLES,Q,_.stencilModeForClipping(gr),ge,un.disabled,cs,x.id,Mr.layoutVertexBuffer,Mr.indexBuffer,Mr.segments,x.paint,_.transform.zoom,Ur,Mr.layoutVertexBuffer2),ln=!1}}}}},fill:function(_,S,x,O){var k=x.paint.get("fill-color"),Z=x.paint.get("fill-opacity");if(Z.constantOr(1)!==0){var Q=_.colorModeForRenderPass(),ge=x.paint.get("fill-pattern"),je=_.opaquePassEnabledForLayer()&&!ge.constantOr(1)&&k.constantOr(E.Color.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===je){var ft=_.depthModeForSublayer(1,_.renderPass==="opaque"?it.ReadWrite:it.ReadOnly);zc(_,S,x,O,ft,Q,!1)}if(_.renderPass==="translucent"&&x.paint.get("fill-antialias")){var Ut=_.depthModeForSublayer(x.getPaintProperty("fill-outline-color")?2:0,it.ReadOnly);zc(_,S,x,O,Ut,Q,!0)}}},"fill-extrusion":function(_,S,x,O){var k=x.paint.get("fill-extrusion-opacity");if(k!==0&&_.renderPass==="translucent"){var Z=new it(_.context.gl.LEQUAL,it.ReadWrite,_.depthRangeFor3D);if(k!==1||x.paint.get("fill-extrusion-pattern").constantOr(1))Qf(_,S,x,O,Z,At.disabled,qt.disabled),Qf(_,S,x,O,Z,_.stencilModeFor3D(),_.colorModeForRenderPass());else{var Q=_.colorModeForRenderPass();Qf(_,S,x,O,Z,At.disabled,Q)}}},hillshade:function(_,S,x,O){if(_.renderPass==="offscreen"||_.renderPass==="translucent"){for(var k=_.context,Z=_.depthModeForSublayer(0,it.ReadOnly),Q=_.colorModeForRenderPass(),ge=_.renderPass==="translucent"?_.stencilConfigForOverlap(O):[{},O],je=ge[0],ft=0,Ut=ge[1];ft<Ut.length;ft+=1){var Vt=Ut[ft],Zt=S.getTile(Vt);Zt.needsHillshadePrepare&&_.renderPass==="offscreen"?u0(_,Zt,x,Z,At.disabled,Q):_.renderPass==="translucent"&&jf(_,Zt,x,Z,je[Vt.overscaledZ],Q)}k.viewport.set([0,0,_.width,_.height])}},raster:function(_,S,x,O){if(_.renderPass==="translucent"&&x.paint.get("raster-opacity")!==0&&O.length)for(var k=_.context,Z=k.gl,Q=S.getSource(),ge=_.useProgram("raster"),je=_.colorModeForRenderPass(),ft=Q instanceof Lt?[{},O]:_.stencilConfigForOverlap(O),Ut=ft[0],Vt=ft[1],Zt=Vt[Vt.length-1].overscaledZ,En=!_.options.moving,mn=0,Un=Vt;mn<Un.length;mn+=1){var ln=Un[mn],kn=_.depthModeForSublayer(ln.overscaledZ-Zt,x.paint.get("raster-opacity")===1?it.ReadWrite:it.ReadOnly,Z.LESS),Jn=S.getTile(ln),gr=_.transform.calculatePosMatrix(ln.toUnwrapped(),En);Jn.registerFadeDuration(x.paint.get("raster-fade-duration"));var Ir=S.findLoadedParent(ln,0),Mr=tp(Jn,Ir,S,x,_.transform),Ur=void 0,si=void 0,Vi=x.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;k.activeTexture.set(Z.TEXTURE0),Jn.texture.bind(Vi,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(Z.TEXTURE1),Ir?(Ir.texture.bind(Vi,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Ur=Math.pow(2,Ir.tileID.overscaledZ-Jn.tileID.overscaledZ),si=[Jn.tileID.canonical.x*Ur%1,Jn.tileID.canonical.y*Ur%1]):Jn.texture.bind(Vi,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST);var Bi=Na(gr,si||[0,0],Ur||1,Mr,x);Q instanceof Lt?ge.draw(k,Z.TRIANGLES,kn,At.disabled,je,un.disabled,Bi,x.id,Q.boundsBuffer,_.quadTriangleIndexBuffer,Q.boundsSegments):ge.draw(k,Z.TRIANGLES,kn,Ut[ln.overscaledZ],je,un.disabled,Bi,x.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,S,x){var O=x.paint.get("background-color"),k=x.paint.get("background-opacity");if(k!==0){var Z=_.context,Q=Z.gl,ge=_.transform,je=ge.tileSize,ft=x.paint.get("background-pattern");if(!_.isPatternMissing(ft)){var Ut=!ft&&O.a===1&&k===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass===Ut){var Vt=At.disabled,Zt=_.depthModeForSublayer(0,Ut==="opaque"?it.ReadWrite:it.ReadOnly),En=_.colorModeForRenderPass(),mn=_.useProgram(ft?"backgroundPattern":"background"),Un=ge.coveringTiles({tileSize:je});ft&&(Z.activeTexture.set(Q.TEXTURE0),_.imageManager.bind(_.context));for(var ln=x.getCrossfadeParameters(),kn=0,Jn=Un;kn<Jn.length;kn+=1){var gr=Jn[kn],Ir=_.transform.calculatePosMatrix(gr.toUnwrapped()),Mr=ft?Sa(Ir,k,_,ft,{tileID:gr,tileSize:je},ln):Za(Ir,k,O);mn.draw(Z,Q.TRIANGLES,Zt,Vt,En,un.disabled,Mr,x.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}}}},debug:function(_,S,x){for(var O=0;O<x.length;O++)rp(_,S,x[O])},custom:function(_,S,x){var O=_.context,k=x.implementation;if(_.renderPass==="offscreen"){var Z=k.prerender;Z&&(_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),Z.call(k,O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),O.setColorMode(_.colorModeForRenderPass()),O.setStencilMode(At.disabled);var Q=k.renderingMode==="3d"?new it(_.context.gl.LEQUAL,it.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,it.ReadOnly);O.setDepthMode(Q),k.render(O.gl,_.transform.customLayerMatrix()),O.setDirty(),_.setBaseState(),O.bindFramebuffer.set(null)}}},qs=function(_,S){this.context=new St(_),this.transform=S,this._tileTextures={},this.setup(),this.numSublayers=Jt.maxUnderzooming+Jt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new rf,this.gpuTimers={}};qs.prototype.resize=function(_,S){if(this.width=_*E.browser.devicePixelRatio,this.height=S*E.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var x=0,O=this.style._order;x<O.length;x+=1)this.style._layers[O[x]].resize()},qs.prototype.setup=function(){var _=this.context,S=new E.StructArrayLayout2i4;S.emplaceBack(0,0),S.emplaceBack(E.EXTENT,0),S.emplaceBack(0,E.EXTENT),S.emplaceBack(E.EXTENT,E.EXTENT),this.tileExtentBuffer=_.createVertexBuffer(S,As.members),this.tileExtentSegments=E.SegmentVector.simpleSegment(0,0,4,2);var x=new E.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(E.EXTENT,0),x.emplaceBack(0,E.EXTENT),x.emplaceBack(E.EXTENT,E.EXTENT),this.debugBuffer=_.createVertexBuffer(x,As.members),this.debugSegments=E.SegmentVector.simpleSegment(0,0,4,5);var O=new E.StructArrayLayout4i8;O.emplaceBack(0,0,0,0),O.emplaceBack(E.EXTENT,0,E.EXTENT,0),O.emplaceBack(0,E.EXTENT,0,E.EXTENT),O.emplaceBack(E.EXTENT,E.EXTENT,E.EXTENT,E.EXTENT),this.rasterBoundsBuffer=_.createVertexBuffer(O,Ye.members),this.rasterBoundsSegments=E.SegmentVector.simpleSegment(0,0,4,2);var k=new E.StructArrayLayout2i4;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=_.createVertexBuffer(k,As.members),this.viewportSegments=E.SegmentVector.simpleSegment(0,0,4,2);var Z=new E.StructArrayLayout1ui2;Z.emplaceBack(0),Z.emplaceBack(1),Z.emplaceBack(3),Z.emplaceBack(2),Z.emplaceBack(0),this.tileBorderIndexBuffer=_.createIndexBuffer(Z);var Q=new E.StructArrayLayout3ui6;Q.emplaceBack(0,1,2),Q.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=_.createIndexBuffer(Q),this.emptyTexture=new E.Texture(_,{width:1,height:1,data:new Uint8Array([0,0,0,0])},_.gl.RGBA);var ge=this.context.gl;this.stencilClearMode=new At({func:ge.ALWAYS,mask:0},0,255,ge.ZERO,ge.ZERO,ge.ZERO)},qs.prototype.clearStencil=function(){var _=this.context,S=_.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var x=E.create();E.ortho(x,0,this.width,this.height,0,0,1),E.scale(x,x,[S.drawingBufferWidth,S.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(_,S.TRIANGLES,it.disabled,this.stencilClearMode,qt.disabled,un.disabled,cn(x),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},qs.prototype._renderTileClippingMasks=function(_,S){if(this.currentStencilSource!==_.source&&_.isTileClipped()&&S&&S.length){this.currentStencilSource=_.source;var x=this.context,O=x.gl;this.nextStencilID+S.length>256&&this.clearStencil(),x.setColorMode(qt.disabled),x.setDepthMode(it.disabled);var k=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Z=0,Q=S;Z<Q.length;Z+=1){var ge=Q[Z],je=this._tileClippingMaskIDs[ge.key]=this.nextStencilID++;k.draw(x,O.TRIANGLES,it.disabled,new At({func:O.ALWAYS,mask:0},je,255,O.KEEP,O.KEEP,O.REPLACE),qt.disabled,un.disabled,cn(ge.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},qs.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var _=this.nextStencilID++,S=this.context.gl;return new At({func:S.NOTEQUAL,mask:255},_,255,S.KEEP,S.KEEP,S.REPLACE)},qs.prototype.stencilModeForClipping=function(_){var S=this.context.gl;return new At({func:S.EQUAL,mask:255},this._tileClippingMaskIDs[_.key],0,S.KEEP,S.KEEP,S.REPLACE)},qs.prototype.stencilConfigForOverlap=function(_){var S,x=this.context.gl,O=_.sort(function(je,ft){return ft.overscaledZ-je.overscaledZ}),k=O[O.length-1].overscaledZ,Z=O[0].overscaledZ-k+1;if(Z>1){this.currentStencilSource=void 0,this.nextStencilID+Z>256&&this.clearStencil();for(var Q={},ge=0;ge<Z;ge++)Q[ge+k]=new At({func:x.GEQUAL,mask:255},ge+this.nextStencilID,255,x.KEEP,x.KEEP,x.REPLACE);return this.nextStencilID+=Z,[Q,O]}return[(S={},S[k]=At.disabled,S),O]},qs.prototype.colorModeForRenderPass=function(){var _=this.context.gl;return this._showOverdrawInspector?new qt([_.CONSTANT_COLOR,_.ONE],new E.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?qt.unblended:qt.alphaBlended},qs.prototype.depthModeForSublayer=function(_,S,x){if(!this.opaquePassEnabledForLayer())return it.disabled;var O=1-((1+this.currentLayer)*this.numSublayers+_)*this.depthEpsilon;return new it(x||this.context.gl.LEQUAL,S,[O,O])},qs.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},qs.prototype.render=function(_,S){var x=this;this.style=_,this.options=S,this.lineAtlas=_.lineAtlas,this.imageManager=_.imageManager,this.glyphManager=_.glyphManager,this.symbolFadeChange=_.placement.symbolFadeChange(E.browser.now()),this.imageManager.beginFrame();var O=this.style._order,k=this.style.sourceCaches;for(var Z in k){var Q=k[Z];Q.used&&Q.prepare(this.context)}var ge,je,ft={},Ut={},Vt={};for(var Zt in k){var En=k[Zt];ft[Zt]=En.getVisibleCoordinates(),Ut[Zt]=ft[Zt].slice().reverse(),Vt[Zt]=En.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var mn=0;mn<O.length;mn++)if(this.style._layers[O[mn]].is3D()){this.opaquePassCutoff=mn;break}this.renderPass="offscreen";for(var Un=0,ln=O;Un<ln.length;Un+=1){var kn=this.style._layers[ln[Un]];if(kn.hasOffscreenPass()&&!kn.isHidden(this.transform.zoom)){var Jn=Ut[kn.source];(kn.type==="custom"||Jn.length)&&this.renderLayer(this,k[kn.source],kn,Jn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:S.showOverdrawInspector?E.Color.black:E.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=S.showOverdrawInspector,this.depthRangeFor3D=[0,1-(_._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=O.length-1;this.currentLayer>=0;this.currentLayer--){var gr=this.style._layers[O[this.currentLayer]],Ir=k[gr.source],Mr=ft[gr.source];this._renderTileClippingMasks(gr,Mr),this.renderLayer(this,Ir,gr,Mr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<O.length;this.currentLayer++){var Ur=this.style._layers[O[this.currentLayer]],si=k[Ur.source],Vi=(Ur.type==="symbol"?Vt:Ut)[Ur.source];this._renderTileClippingMasks(Ur,ft[Ur.source]),this.renderLayer(this,si,Ur,Vi)}this.options.showTileBoundaries&&(E.values(this.style._layers).forEach(function(Bi){Bi.source&&!Bi.isHidden(x.transform.zoom)&&(Bi.source!==(je&&je.id)&&(je=x.style.sourceCaches[Bi.source]),(!ge||ge.getSource().maxzoom<je.getSource().maxzoom)&&(ge=je))}),ge&&Jf.debug(this,ge,ge.getVisibleCoordinates())),this.options.showPadding&&function(Bi){var vo=Bi.transform.padding;wf(Bi,Bi.transform.height-(vo.top||0),3,jp),wf(Bi,vo.bottom||0,3,Sf),Vp(Bi,vo.left||0,3,c0),Vp(Bi,Bi.transform.width-(vo.right||0),3,np);var jo=Bi.transform.centerPoint;(function(Xo,Yo,cs,Dr){yh(Xo,Yo-1,cs-10,2,20,Dr),yh(Xo,Yo-10,cs-1,20,2,Dr)})(Bi,jo.x,Bi.transform.height-jo.y,Td)}(this),this.context.setDefault()},qs.prototype.renderLayer=function(_,S,x,O){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="custom"||O.length)&&(this.id=x.id,this.gpuTimingStart(x),Jf[x.type](_,S,x,O,this.style.placement.variableOffsets),this.gpuTimingEnd())},qs.prototype.gpuTimingStart=function(_){if(this.options.gpuTiming){var S=this.context.extTimerQuery,x=this.gpuTimers[_.id];x||(x=this.gpuTimers[_.id]={calls:0,cpuTime:0,query:S.createQueryEXT()}),x.calls++,S.beginQueryEXT(S.TIME_ELAPSED_EXT,x.query)}},qs.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var _=this.context.extTimerQuery;_.endQueryEXT(_.TIME_ELAPSED_EXT)}},qs.prototype.collectGpuTimers=function(){var _=this.gpuTimers;return this.gpuTimers={},_},qs.prototype.queryGpuTimers=function(_){var S={};for(var x in _){var O=_[x],k=this.context.extTimerQuery,Z=k.getQueryObjectEXT(O.query,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(O.query),S[x]=Z}return S},qs.prototype.translatePosMatrix=function(_,S,x,O,k){if(!x[0]&&!x[1])return _;var Z=k?O==="map"?this.transform.angle:0:O==="viewport"?-this.transform.angle:0;if(Z){var Q=Math.sin(Z),ge=Math.cos(Z);x=[x[0]*ge-x[1]*Q,x[0]*Q+x[1]*ge]}var je=[k?x[0]:mi(S,x[0],this.transform.zoom),k?x[1]:mi(S,x[1],this.transform.zoom),0],ft=new Float32Array(16);return E.translate(ft,_,je),ft},qs.prototype.saveTileTexture=function(_){var S=this._tileTextures[_.size[0]];S?S.push(_):this._tileTextures[_.size[0]]=[_]},qs.prototype.getTileTexture=function(_){var S=this._tileTextures[_];return S&&S.length>0?S.pop():null},qs.prototype.isPatternMissing=function(_){if(!_)return!1;if(!_.from||!_.to)return!0;var S=this.imageManager.getPattern(_.from.toString()),x=this.imageManager.getPattern(_.to.toString());return!S||!x},qs.prototype.useProgram=function(_,S){this.cache=this.cache||{};var x=""+_+(S?S.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[x]||(this.cache[x]=new ul(this.context,_,ep[_],S,ps[_],this._showOverdrawInspector)),this.cache[x]},qs.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},qs.prototype.setBaseState=function(){var _=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(_.FUNC_ADD)},qs.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=E.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new E.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},qs.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Ad=function(_,S){this.points=_,this.planes=S};Ad.fromInvProjectionMatrix=function(_,S,x){var O=Math.pow(2,x),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Q){return E.transformMat4([],Q,_)}).map(function(Q){return E.scale$1([],Q,1/Q[3]/S*O)}),Z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Q){var ge=E.sub([],k[Q[0]],k[Q[1]]),je=E.sub([],k[Q[2]],k[Q[1]]),ft=E.normalize([],E.cross([],ge,je)),Ut=-E.dot(ft,k[Q[1]]);return ft.concat(Ut)});return new Ad(k,Z)};var Tf=function(_,S){this.min=_,this.max=S,this.center=E.scale$2([],E.add([],this.min,this.max),.5)};Tf.prototype.quadrant=function(_){for(var S=[_%2==0,_<2],x=E.clone$2(this.min),O=E.clone$2(this.max),k=0;k<S.length;k++)x[k]=S[k]?this.min[k]:this.center[k],O[k]=S[k]?this.center[k]:this.max[k];return O[2]=this.max[2],new Tf(x,O)},Tf.prototype.distanceX=function(_){return Math.max(Math.min(this.max[0],_[0]),this.min[0])-_[0]},Tf.prototype.distanceY=function(_){return Math.max(Math.min(this.max[1],_[1]),this.min[1])-_[1]},Tf.prototype.intersects=function(_){for(var S=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],x=!0,O=0;O<_.planes.length;O++){for(var k=_.planes[O],Z=0,Q=0;Q<S.length;Q++)Z+=E.dot$1(k,S[Q])>=0;if(Z===0)return 0;Z!==S.length&&(x=!1)}if(x)return 2;for(var ge=0;ge<3;ge++){for(var je=Number.MAX_VALUE,ft=-Number.MAX_VALUE,Ut=0;Ut<_.points.length;Ut++){var Vt=_.points[Ut][ge]-this.min[ge];je=Math.min(je,Vt),ft=Math.max(ft,Vt)}if(ft<0||je>this.max[ge]-this.min[ge])return 0}return 1};var eh=function(_,S,x,O){if(_===void 0&&(_=0),S===void 0&&(S=0),x===void 0&&(x=0),O===void 0&&(O=0),isNaN(_)||_<0||isNaN(S)||S<0||isNaN(x)||x<0||isNaN(O)||O<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=_,this.bottom=S,this.left=x,this.right=O};eh.prototype.interpolate=function(_,S,x){return S.top!=null&&_.top!=null&&(this.top=E.number(_.top,S.top,x)),S.bottom!=null&&_.bottom!=null&&(this.bottom=E.number(_.bottom,S.bottom,x)),S.left!=null&&_.left!=null&&(this.left=E.number(_.left,S.left,x)),S.right!=null&&_.right!=null&&(this.right=E.number(_.right,S.right,x)),this},eh.prototype.getCenter=function(_,S){var x=E.clamp((this.left+_-this.right)/2,0,_),O=E.clamp((this.top+S-this.bottom)/2,0,S);return new E.Point(x,O)},eh.prototype.equals=function(_){return this.top===_.top&&this.bottom===_.bottom&&this.left===_.left&&this.right===_.right},eh.prototype.clone=function(){return new eh(this.top,this.bottom,this.left,this.right)},eh.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ha=function(_,S,x,O,k){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=k===void 0||k,this._minZoom=_||0,this._maxZoom=S||22,this._minPitch=x==null?0:x,this._maxPitch=O==null?60:O,this.setMaxBounds(),this.width=0,this.height=0,this._center=new E.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new eh,this._posMatrixCache={},this._alignedPosMatrixCache={}},ce={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ha.prototype.clone=function(){var _=new Ha(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return _.tileSize=this.tileSize,_.latRange=this.latRange,_.width=this.width,_.height=this.height,_._center=this._center,_.zoom=this.zoom,_.angle=this.angle,_._fov=this._fov,_._pitch=this._pitch,_._unmodified=this._unmodified,_._edgeInsets=this._edgeInsets.clone(),_._calcMatrices(),_},ce.minZoom.get=function(){return this._minZoom},ce.minZoom.set=function(_){this._minZoom!==_&&(this._minZoom=_,this.zoom=Math.max(this.zoom,_))},ce.maxZoom.get=function(){return this._maxZoom},ce.maxZoom.set=function(_){this._maxZoom!==_&&(this._maxZoom=_,this.zoom=Math.min(this.zoom,_))},ce.minPitch.get=function(){return this._minPitch},ce.minPitch.set=function(_){this._minPitch!==_&&(this._minPitch=_,this.pitch=Math.max(this.pitch,_))},ce.maxPitch.get=function(){return this._maxPitch},ce.maxPitch.set=function(_){this._maxPitch!==_&&(this._maxPitch=_,this.pitch=Math.min(this.pitch,_))},ce.renderWorldCopies.get=function(){return this._renderWorldCopies},ce.renderWorldCopies.set=function(_){_===void 0?_=!0:_===null&&(_=!1),this._renderWorldCopies=_},ce.worldSize.get=function(){return this.tileSize*this.scale},ce.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ce.size.get=function(){return new E.Point(this.width,this.height)},ce.bearing.get=function(){return-this.angle/Math.PI*180},ce.bearing.set=function(_){var S=-E.wrap(_,-180,180)*Math.PI/180;this.angle!==S&&(this._unmodified=!1,this.angle=S,this._calcMatrices(),this.rotationMatrix=E.create$2(),E.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ce.pitch.get=function(){return this._pitch/Math.PI*180},ce.pitch.set=function(_){var S=E.clamp(_,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==S&&(this._unmodified=!1,this._pitch=S,this._calcMatrices())},ce.fov.get=function(){return this._fov/Math.PI*180},ce.fov.set=function(_){_=Math.max(.01,Math.min(60,_)),this._fov!==_&&(this._unmodified=!1,this._fov=_/180*Math.PI,this._calcMatrices())},ce.zoom.get=function(){return this._zoom},ce.zoom.set=function(_){var S=Math.min(Math.max(_,this.minZoom),this.maxZoom);this._zoom!==S&&(this._unmodified=!1,this._zoom=S,this.scale=this.zoomScale(S),this.tileZoom=Math.floor(S),this.zoomFraction=S-this.tileZoom,this._constrain(),this._calcMatrices())},ce.center.get=function(){return this._center},ce.center.set=function(_){_.lat===this._center.lat&&_.lng===this._center.lng||(this._unmodified=!1,this._center=_,this._constrain(),this._calcMatrices())},ce.padding.get=function(){return this._edgeInsets.toJSON()},ce.padding.set=function(_){this._edgeInsets.equals(_)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,_,1),this._calcMatrices())},ce.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Ha.prototype.isPaddingEqual=function(_){return this._edgeInsets.equals(_)},Ha.prototype.interpolatePadding=function(_,S,x){this._unmodified=!1,this._edgeInsets.interpolate(_,S,x),this._constrain(),this._calcMatrices()},Ha.prototype.coveringZoomLevel=function(_){var S=(_.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/_.tileSize));return Math.max(0,S)},Ha.prototype.getVisibleUnwrappedCoordinates=function(_){var S=[new E.UnwrappedTileID(0,_)];if(this._renderWorldCopies)for(var x=this.pointCoordinate(new E.Point(0,0)),O=this.pointCoordinate(new E.Point(this.width,0)),k=this.pointCoordinate(new E.Point(this.width,this.height)),Z=this.pointCoordinate(new E.Point(0,this.height)),Q=Math.floor(Math.min(x.x,O.x,k.x,Z.x)),ge=Math.floor(Math.max(x.x,O.x,k.x,Z.x)),je=Q-1;je<=ge+1;je++)je!==0&&S.push(new E.UnwrappedTileID(je,_));return S},Ha.prototype.coveringTiles=function(_){var S=this.coveringZoomLevel(_),x=S;if(_.minzoom!==void 0&&S<_.minzoom)return[];_.maxzoom!==void 0&&S>_.maxzoom&&(S=_.maxzoom);var O=E.MercatorCoordinate.fromLngLat(this.center),k=Math.pow(2,S),Z=[k*O.x,k*O.y,0],Q=Ad.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,S),ge=_.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ge=S);var je=function(Bi){return{aabb:new Tf([Bi*k,0,0],[(Bi+1)*k,k,0]),zoom:0,x:0,y:0,wrap:Bi,fullyVisible:!1}},ft=[],Ut=[],Vt=S,Zt=_.reparseOverscaled?x:S;if(this._renderWorldCopies)for(var En=1;En<=3;En++)ft.push(je(-En)),ft.push(je(En));for(ft.push(je(0));ft.length>0;){var mn=ft.pop(),Un=mn.x,ln=mn.y,kn=mn.fullyVisible;if(!kn){var Jn=mn.aabb.intersects(Q);if(Jn===0)continue;kn=Jn===2}var gr=mn.aabb.distanceX(Z),Ir=mn.aabb.distanceY(Z),Mr=Math.max(Math.abs(gr),Math.abs(Ir));if(mn.zoom===Vt||Mr>3+(1<<Vt-mn.zoom)-2&&mn.zoom>=ge)Ut.push({tileID:new E.OverscaledTileID(mn.zoom===Vt?Zt:mn.zoom,mn.wrap,mn.zoom,Un,ln),distanceSq:E.sqrLen([Z[0]-.5-Un,Z[1]-.5-ln])});else for(var Ur=0;Ur<4;Ur++){var si=(Un<<1)+Ur%2,Vi=(ln<<1)+(Ur>>1);ft.push({aabb:mn.aabb.quadrant(Ur),zoom:mn.zoom+1,x:si,y:Vi,wrap:mn.wrap,fullyVisible:kn})}}return Ut.sort(function(Bi,vo){return Bi.distanceSq-vo.distanceSq}).map(function(Bi){return Bi.tileID})},Ha.prototype.resize=function(_,S){this.width=_,this.height=S,this.pixelsToGLUnits=[2/_,-2/S],this._constrain(),this._calcMatrices()},ce.unmodified.get=function(){return this._unmodified},Ha.prototype.zoomScale=function(_){return Math.pow(2,_)},Ha.prototype.scaleZoom=function(_){return Math.log(_)/Math.LN2},Ha.prototype.project=function(_){var S=E.clamp(_.lat,-this.maxValidLatitude,this.maxValidLatitude);return new E.Point(E.mercatorXfromLng(_.lng)*this.worldSize,E.mercatorYfromLat(S)*this.worldSize)},Ha.prototype.unproject=function(_){return new E.MercatorCoordinate(_.x/this.worldSize,_.y/this.worldSize).toLngLat()},ce.point.get=function(){return this.project(this.center)},Ha.prototype.setLocationAtPoint=function(_,S){var x=this.pointCoordinate(S),O=this.pointCoordinate(this.centerPoint),k=this.locationCoordinate(_),Z=new E.MercatorCoordinate(k.x-(x.x-O.x),k.y-(x.y-O.y));this.center=this.coordinateLocation(Z),this._renderWorldCopies&&(this.center=this.center.wrap())},Ha.prototype.locationPoint=function(_){return this.coordinatePoint(this.locationCoordinate(_))},Ha.prototype.pointLocation=function(_){return this.coordinateLocation(this.pointCoordinate(_))},Ha.prototype.locationCoordinate=function(_){return E.MercatorCoordinate.fromLngLat(_)},Ha.prototype.coordinateLocation=function(_){return _.toLngLat()},Ha.prototype.pointCoordinate=function(_){var S=[_.x,_.y,0,1],x=[_.x,_.y,1,1];E.transformMat4(S,S,this.pixelMatrixInverse),E.transformMat4(x,x,this.pixelMatrixInverse);var O=S[3],k=x[3],Z=S[1]/O,Q=x[1]/k,ge=S[2]/O,je=x[2]/k,ft=ge===je?0:(0-ge)/(je-ge);return new E.MercatorCoordinate(E.number(S[0]/O,x[0]/k,ft)/this.worldSize,E.number(Z,Q,ft)/this.worldSize)},Ha.prototype.coordinatePoint=function(_){var S=[_.x*this.worldSize,_.y*this.worldSize,0,1];return E.transformMat4(S,S,this.pixelMatrix),new E.Point(S[0]/S[3],S[1]/S[3])},Ha.prototype.getBounds=function(){return new E.LngLatBounds().extend(this.pointLocation(new E.Point(0,0))).extend(this.pointLocation(new E.Point(this.width,0))).extend(this.pointLocation(new E.Point(this.width,this.height))).extend(this.pointLocation(new E.Point(0,this.height)))},Ha.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new E.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Ha.prototype.setMaxBounds=function(_){_?(this.lngRange=[_.getWest(),_.getEast()],this.latRange=[_.getSouth(),_.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ha.prototype.calculatePosMatrix=function(_,S){S===void 0&&(S=!1);var x=_.key,O=S?this._alignedPosMatrixCache:this._posMatrixCache;if(O[x])return O[x];var k=_.canonical,Z=this.worldSize/this.zoomScale(k.z),Q=k.x+Math.pow(2,k.z)*_.wrap,ge=E.identity(new Float64Array(16));return E.translate(ge,ge,[Q*Z,k.y*Z,0]),E.scale(ge,ge,[Z/E.EXTENT,Z/E.EXTENT,1]),E.multiply(ge,S?this.alignedProjMatrix:this.projMatrix,ge),O[x]=new Float32Array(ge),O[x]},Ha.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ha.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var _,S,x,O,k=-90,Z=90,Q=-180,ge=180,je=this.size,ft=this._unmodified;if(this.latRange){var Ut=this.latRange;k=E.mercatorYfromLat(Ut[1])*this.worldSize,_=(Z=E.mercatorYfromLat(Ut[0])*this.worldSize)-k<je.y?je.y/(Z-k):0}if(this.lngRange){var Vt=this.lngRange;Q=E.mercatorXfromLng(Vt[0])*this.worldSize,S=(ge=E.mercatorXfromLng(Vt[1])*this.worldSize)-Q<je.x?je.x/(ge-Q):0}var Zt=this.point,En=Math.max(S||0,_||0);if(En)return this.center=this.unproject(new E.Point(S?(ge+Q)/2:Zt.x,_?(Z+k)/2:Zt.y)),this.zoom+=this.scaleZoom(En),this._unmodified=ft,void(this._constraining=!1);if(this.latRange){var mn=Zt.y,Un=je.y/2;mn-Un<k&&(O=k+Un),mn+Un>Z&&(O=Z-Un)}if(this.lngRange){var ln=Zt.x,kn=je.x/2;ln-kn<Q&&(x=Q+kn),ln+kn>ge&&(x=ge-kn)}x===void 0&&O===void 0||(this.center=this.unproject(new E.Point(x!==void 0?x:Zt.x,O!==void 0?O:Zt.y))),this._unmodified=ft,this._constraining=!1}},Ha.prototype._calcMatrices=function(){if(this.height){var _=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var S=Math.PI/2+this._pitch,x=this._fov*(.5+_.y/this.height),O=Math.sin(x)*this.cameraToCenterDistance/Math.sin(E.clamp(Math.PI-S-x,.01,Math.PI-.01)),k=this.point,Z=k.x,Q=k.y,ge=1.01*(Math.cos(Math.PI/2-this._pitch)*O+this.cameraToCenterDistance),je=this.height/50,ft=new Float64Array(16);E.perspective(ft,this._fov,this.width/this.height,je,ge),ft[8]=2*-_.x/this.width,ft[9]=2*_.y/this.height,E.scale(ft,ft,[1,-1,1]),E.translate(ft,ft,[0,0,-this.cameraToCenterDistance]),E.rotateX(ft,ft,this._pitch),E.rotateZ(ft,ft,this.angle),E.translate(ft,ft,[-Z,-Q,0]),this.mercatorMatrix=E.scale([],ft,[this.worldSize,this.worldSize,this.worldSize]),E.scale(ft,ft,[1,1,E.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ft,this.invProjMatrix=E.invert([],this.projMatrix);var Ut=this.width%2/2,Vt=this.height%2/2,Zt=Math.cos(this.angle),En=Math.sin(this.angle),mn=Z-Math.round(Z)+Zt*Ut+En*Vt,Un=Q-Math.round(Q)+Zt*Vt+En*Ut,ln=new Float64Array(ft);if(E.translate(ln,ln,[mn>.5?mn-1:mn,Un>.5?Un-1:Un,0]),this.alignedProjMatrix=ln,ft=E.create(),E.scale(ft,ft,[this.width/2,-this.height/2,1]),E.translate(ft,ft,[1,-1,0]),this.labelPlaneMatrix=ft,ft=E.create(),E.scale(ft,ft,[1,-1,1]),E.translate(ft,ft,[-1,-1,0]),E.scale(ft,ft,[2/this.width,2/this.height,1]),this.glCoordMatrix=ft,this.pixelMatrix=E.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ft=E.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ft,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ha.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var _=this.pointCoordinate(new E.Point(0,0)),S=[_.x*this.worldSize,_.y*this.worldSize,0,1];return E.transformMat4(S,S,this.pixelMatrix)[3]/this.cameraToCenterDistance},Ha.prototype.getCameraPoint=function(){var _=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new E.Point(0,_))},Ha.prototype.getCameraQueryGeometry=function(_){var S=this.getCameraPoint();if(_.length===1)return[_[0],S];for(var x=S.x,O=S.y,k=S.x,Z=S.y,Q=0,ge=_;Q<ge.length;Q+=1){var je=ge[Q];x=Math.min(x,je.x),O=Math.min(O,je.y),k=Math.max(k,je.x),Z=Math.max(Z,je.y)}return[new E.Point(x,O),new E.Point(k,O),new E.Point(k,Z),new E.Point(x,Z),new E.Point(x,O)]},Object.defineProperties(Ha.prototype,ce);var He=function(_){var S,x,O,k;this._hashName=_&&encodeURIComponent(_),E.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(S=this._updateHashUnthrottled.bind(this),x=!1,O=null,k=function(){O=null,x&&(S(),O=setTimeout(k,300),x=!1)},function(){return x=!0,O||k(),O})};He.prototype.addTo=function(_){return this._map=_,E.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},He.prototype.remove=function(){return E.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},He.prototype.getHashString=function(_){var S=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,O=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,O),Z=Math.round(S.lng*k)/k,Q=Math.round(S.lat*k)/k,ge=this._map.getBearing(),je=this._map.getPitch(),ft="";if(ft+=_?"/"+Z+"/"+Q+"/"+x:x+"/"+Q+"/"+Z,(ge||je)&&(ft+="/"+Math.round(10*ge)/10),je&&(ft+="/"+Math.round(je)),this._hashName){var Ut=this._hashName,Vt=!1,Zt=E.window.location.hash.slice(1).split("&").map(function(En){var mn=En.split("=")[0];return mn===Ut?(Vt=!0,mn+"="+ft):En}).filter(function(En){return En});return Vt||Zt.push(Ut+"="+ft),"#"+Zt.join("&")}return"#"+ft},He.prototype._getCurrentHash=function(){var _,S=this,x=E.window.location.hash.replace("#","");return this._hashName?(x.split("&").map(function(O){return O.split("=")}).forEach(function(O){O[0]===S._hashName&&(_=O)}),(_&&_[1]||"").split("/")):x.split("/")},He.prototype._onHashChange=function(){var _=this._getCurrentHash();if(_.length>=3&&!_.some(function(x){return isNaN(x)})){var S=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(_[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+_[2],+_[1]],zoom:+_[0],bearing:S,pitch:+(_[4]||0)}),!0}return!1},He.prototype._updateHashUnthrottled=function(){var _=E.window.location.href.replace(/(#.+)?$/,this.getHashString());try{E.window.history.replaceState(E.window.history.state,null,_)}catch(S){}};var Et={linearity:.3,easing:E.bezier(0,0,.3,1)},Pn=E.extend({deceleration:2500,maxSpeed:1400},Et),ur=E.extend({deceleration:20,maxSpeed:1400},Et),zr=E.extend({deceleration:1e3,maxSpeed:360},Et),pi=E.extend({deceleration:1e3,maxSpeed:90},Et),Ii=function(_){this._map=_,this.clear()};function Zo(_,S){(!_.duration||_.duration<S.duration)&&(_.duration=S.duration,_.easing=S.easing)}function Go(_,S,x){var O=x.maxSpeed,k=x.linearity,Z=x.deceleration,Q=E.clamp(_*k/(S/1e3),-O,O),ge=Math.abs(Q)/(Z*k);return{easing:x.easing,duration:1e3*ge,amount:Q*(ge/2)}}Ii.prototype.clear=function(){this._inertiaBuffer=[]},Ii.prototype.record=function(_){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.browser.now(),settings:_})},Ii.prototype._drainInertiaBuffer=function(){for(var _=this._inertiaBuffer,S=E.browser.now();_.length>0&&S-_[0].time>160;)_.shift()},Ii.prototype._onMoveEnd=function(_){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var S={zoom:0,bearing:0,pitch:0,pan:new E.Point(0,0),pinchAround:void 0,around:void 0},x=0,O=this._inertiaBuffer;x<O.length;x+=1){var k=O[x].settings;S.zoom+=k.zoomDelta||0,S.bearing+=k.bearingDelta||0,S.pitch+=k.pitchDelta||0,k.panDelta&&S.pan._add(k.panDelta),k.around&&(S.around=k.around),k.pinchAround&&(S.pinchAround=k.pinchAround)}var Z=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Q={};if(S.pan.mag()){var ge=Go(S.pan.mag(),Z,E.extend({},Pn,_||{}));Q.offset=S.pan.mult(ge.amount/S.pan.mag()),Q.center=this._map.transform.center,Zo(Q,ge)}if(S.zoom){var je=Go(S.zoom,Z,ur);Q.zoom=this._map.transform.zoom+je.amount,Zo(Q,je)}if(S.bearing){var ft=Go(S.bearing,Z,zr);Q.bearing=this._map.transform.bearing+E.clamp(ft.amount,-179,179),Zo(Q,ft)}if(S.pitch){var Ut=Go(S.pitch,Z,pi);Q.pitch=this._map.transform.pitch+Ut.amount,Zo(Q,Ut)}if(Q.zoom||Q.bearing){var Vt=S.pinchAround===void 0?S.around:S.pinchAround;Q.around=Vt?this._map.unproject(Vt):this._map.getCenter()}return this.clear(),E.extend(Q,{noMoveStart:!0})}};var la=function(_){function S(O,k,Z,Q){Q===void 0&&(Q={});var ge=ee.mousePos(k.getCanvasContainer(),Z),je=k.unproject(ge);_.call(this,O,E.extend({point:ge,lngLat:je,originalEvent:Z},Q)),this._defaultPrevented=!1,this.target=k}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),Js=function(_){function S(O,k,Z){var Q=O==="touchend"?Z.changedTouches:Z.touches,ge=ee.touchPos(k.getCanvasContainer(),Q),je=ge.map(function(Vt){return k.unproject(Vt)}),ft=ge.reduce(function(Vt,Zt,En,mn){return Vt.add(Zt.div(mn.length))},new E.Point(0,0)),Ut=k.unproject(ft);_.call(this,O,{points:ge,point:ft,lngLats:je,lngLat:Ut,originalEvent:Z}),this._defaultPrevented=!1}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),bl=function(_){function S(O,k,Z){_.call(this,O,{originalEvent:Z}),this._defaultPrevented=!1}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={defaultPrevented:{configurable:!0}};return S.prototype.preventDefault=function(){this._defaultPrevented=!0},x.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(S.prototype,x),S}(E.Event),Es=function(_,S){this._map=_,this._clickTolerance=S.clickTolerance};Es.prototype.reset=function(){delete this._mousedownPos},Es.prototype.wheel=function(_){return this._firePreventable(new bl(_.type,this._map,_))},Es.prototype.mousedown=function(_,S){return this._mousedownPos=S,this._firePreventable(new la(_.type,this._map,_))},Es.prototype.mouseup=function(_){this._map.fire(new la(_.type,this._map,_))},Es.prototype.click=function(_,S){this._mousedownPos&&this._mousedownPos.dist(S)>=this._clickTolerance||this._map.fire(new la(_.type,this._map,_))},Es.prototype.dblclick=function(_){return this._firePreventable(new la(_.type,this._map,_))},Es.prototype.mouseover=function(_){this._map.fire(new la(_.type,this._map,_))},Es.prototype.mouseout=function(_){this._map.fire(new la(_.type,this._map,_))},Es.prototype.touchstart=function(_){return this._firePreventable(new Js(_.type,this._map,_))},Es.prototype.touchmove=function(_){this._map.fire(new Js(_.type,this._map,_))},Es.prototype.touchend=function(_){this._map.fire(new Js(_.type,this._map,_))},Es.prototype.touchcancel=function(_){this._map.fire(new Js(_.type,this._map,_))},Es.prototype._firePreventable=function(_){if(this._map.fire(_),_.defaultPrevented)return{}},Es.prototype.isEnabled=function(){return!0},Es.prototype.isActive=function(){return!1},Es.prototype.enable=function(){},Es.prototype.disable=function(){};var oo=function(_){this._map=_};oo.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},oo.prototype.mousemove=function(_){this._map.fire(new la(_.type,this._map,_))},oo.prototype.mousedown=function(){this._delayContextMenu=!0},oo.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new la("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},oo.prototype.contextmenu=function(_){this._delayContextMenu?this._contextMenuEvent=_:this._map.fire(new la(_.type,this._map,_)),this._map.listens("contextmenu")&&_.preventDefault()},oo.prototype.isEnabled=function(){return!0},oo.prototype.isActive=function(){return!1},oo.prototype.enable=function(){},oo.prototype.disable=function(){};var Ml=function(_,S){this._map=_,this._el=_.getCanvasContainer(),this._container=_.getContainer(),this._clickTolerance=S.clickTolerance||1};function _h(_,S){for(var x={},O=0;O<_.length;O++)x[_[O].identifier]=S[O];return x}Ml.prototype.isEnabled=function(){return!!this._enabled},Ml.prototype.isActive=function(){return!!this._active},Ml.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ml.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ml.prototype.mousedown=function(_,S){this.isEnabled()&&_.shiftKey&&_.button===0&&(ee.disableDrag(),this._startPos=this._lastPos=S,this._active=!0)},Ml.prototype.mousemoveWindow=function(_,S){if(this._active){var x=S;if(!(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)){var O=this._startPos;this._lastPos=x,this._box||(this._box=ee.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",_));var k=Math.min(O.x,x.x),Z=Math.max(O.x,x.x),Q=Math.min(O.y,x.y),ge=Math.max(O.y,x.y);ee.setTransform(this._box,"translate("+k+"px,"+Q+"px)"),this._box.style.width=Z-k+"px",this._box.style.height=ge-Q+"px"}}},Ml.prototype.mouseupWindow=function(_,S){var x=this;if(this._active&&_.button===0){var O=this._startPos,k=S;if(this.reset(),ee.suppressClick(),O.x!==k.x||O.y!==k.y)return this._map.fire(new E.Event("boxzoomend",{originalEvent:_})),{cameraAnimation:function(Z){return Z.fitScreenCoordinates(O,k,x._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",_)}},Ml.prototype.keydown=function(_){this._active&&_.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",_))},Ml.prototype.blur=function(){this.reset()},Ml.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(ee.remove(this._box),this._box=null),ee.enableDrag(),delete this._startPos,delete this._lastPos},Ml.prototype._fireEvent=function(_,S){return this._map.fire(new E.Event(_,{originalEvent:S}))};var Gh=function(_){this.reset(),this.numTouches=_.numTouches};Gh.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Gh.prototype.touchstart=function(_,S,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=_.timeStamp),x.length===this.numTouches&&(this.centroid=function(O){for(var k=new E.Point(0,0),Z=0,Q=O;Z<Q.length;Z+=1)k._add(Q[Z]);return k.div(O.length)}(S),this.touches=_h(x,S)))},Gh.prototype.touchmove=function(_,S,x){if(!this.aborted&&this.centroid){var O=_h(x,S);for(var k in this.touches){var Z=O[k];(!Z||Z.dist(this.touches[k])>30)&&(this.aborted=!0)}}},Gh.prototype.touchend=function(_,S,x){if((!this.centroid||_.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){var O=!this.aborted&&this.centroid;if(this.reset(),O)return O}};var Ja=function(_){this.singleTap=new Gh(_),this.numTaps=_.numTaps,this.reset()};Ja.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ja.prototype.touchstart=function(_,S,x){this.singleTap.touchstart(_,S,x)},Ja.prototype.touchmove=function(_,S,x){this.singleTap.touchmove(_,S,x)},Ja.prototype.touchend=function(_,S,x){var O=this.singleTap.touchend(_,S,x);if(O){var k=_.timeStamp-this.lastTime<500,Z=!this.lastTap||this.lastTap.dist(O)<30;if(k&&Z||this.reset(),this.count++,this.lastTime=_.timeStamp,this.lastTap=O,this.count===this.numTaps)return this.reset(),O}};var Ns=function(){this._zoomIn=new Ja({numTouches:1,numTaps:2}),this._zoomOut=new Ja({numTouches:2,numTaps:1}),this.reset()};Ns.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ns.prototype.touchstart=function(_,S,x){this._zoomIn.touchstart(_,S,x),this._zoomOut.touchstart(_,S,x)},Ns.prototype.touchmove=function(_,S,x){this._zoomIn.touchmove(_,S,x),this._zoomOut.touchmove(_,S,x)},Ns.prototype.touchend=function(_,S,x){var O=this,k=this._zoomIn.touchend(_,S,x),Z=this._zoomOut.touchend(_,S,x);return k?(this._active=!0,_.preventDefault(),setTimeout(function(){return O.reset()},0),{cameraAnimation:function(Q){return Q.easeTo({duration:300,zoom:Q.getZoom()+1,around:Q.unproject(k)},{originalEvent:_})}}):Z?(this._active=!0,_.preventDefault(),setTimeout(function(){return O.reset()},0),{cameraAnimation:function(Q){return Q.easeTo({duration:300,zoom:Q.getZoom()-1,around:Q.unproject(Z)},{originalEvent:_})}}):void 0},Ns.prototype.touchcancel=function(){this.reset()},Ns.prototype.enable=function(){this._enabled=!0},Ns.prototype.disable=function(){this._enabled=!1,this.reset()},Ns.prototype.isEnabled=function(){return this._enabled},Ns.prototype.isActive=function(){return this._active};var ff={0:1,2:2},Ui=function(_){this.reset(),this._clickTolerance=_.clickTolerance||1};Ui.prototype.blur=function(){this.reset()},Ui.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Ui.prototype._correctButton=function(_,S){return!1},Ui.prototype._move=function(_,S){return{}},Ui.prototype.mousedown=function(_,S){if(!this._lastPoint){var x=ee.mouseButton(_);this._correctButton(_,x)&&(this._lastPoint=S,this._eventButton=x)}},Ui.prototype.mousemoveWindow=function(_,S){var x=this._lastPoint;if(x){if(_.preventDefault(),function(O,k){var Z=ff[k];return O.buttons===void 0||(O.buttons&Z)!==Z}(_,this._eventButton))this.reset();else if(this._moved||!(S.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=S,this._move(x,S)}},Ui.prototype.mouseupWindow=function(_){this._lastPoint&&ee.mouseButton(_)===this._eventButton&&(this._moved&&ee.suppressClick(),this.reset())},Ui.prototype.enable=function(){this._enabled=!0},Ui.prototype.disable=function(){this._enabled=!1,this.reset()},Ui.prototype.isEnabled=function(){return this._enabled},Ui.prototype.isActive=function(){return this._active};var Af=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.mousedown=function(x,O){_.prototype.mousedown.call(this,x,O),this._lastPoint&&(this._active=!0)},S.prototype._correctButton=function(x,O){return O===0&&!x.ctrlKey},S.prototype._move=function(x,O){return{around:O,panDelta:O.sub(x)}},S}(Ui),Cd=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype._correctButton=function(x,O){return O===0&&x.ctrlKey||O===2},S.prototype._move=function(x,O){var k=.8*(O.x-x.x);if(k)return this._active=!0,{bearingDelta:k}},S.prototype.contextmenu=function(x){x.preventDefault()},S}(Ui),bh=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype._correctButton=function(x,O){return O===0&&x.ctrlKey||O===2},S.prototype._move=function(x,O){var k=-.5*(O.y-x.y);if(k)return this._active=!0,{pitchDelta:k}},S.prototype.contextmenu=function(x){x.preventDefault()},S}(Ui),Cf=function(_){this._minTouches=1,this._clickTolerance=_.clickTolerance||1,this.reset()};Cf.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new E.Point(0,0)},Cf.prototype.touchstart=function(_,S,x){return this._calculateTransform(_,S,x)},Cf.prototype.touchmove=function(_,S,x){if(this._active&&!(x.length<this._minTouches))return _.preventDefault(),this._calculateTransform(_,S,x)},Cf.prototype.touchend=function(_,S,x){this._calculateTransform(_,S,x),this._active&&x.length<this._minTouches&&this.reset()},Cf.prototype.touchcancel=function(){this.reset()},Cf.prototype._calculateTransform=function(_,S,x){x.length>0&&(this._active=!0);var O=_h(x,S),k=new E.Point(0,0),Z=new E.Point(0,0),Q=0;for(var ge in O){var je=O[ge],ft=this._touches[ge];ft&&(k._add(je),Z._add(je.sub(ft)),Q++,O[ge]=je)}if(this._touches=O,!(Q<this._minTouches)&&Z.mag()){var Ut=Z.div(Q);if(this._sum._add(Ut),!(this._sum.mag()<this._clickTolerance))return{around:k.div(Q),panDelta:Ut}}},Cf.prototype.enable=function(){this._enabled=!0},Cf.prototype.disable=function(){this._enabled=!1,this.reset()},Cf.prototype.isEnabled=function(){return this._enabled},Cf.prototype.isActive=function(){return this._active};var hc=function(){this.reset()};function f0(_,S,x){for(var O=0;O<_.length;O++)if(_[O].identifier===x)return S[O]}function xh(_,S){return Math.log(_/S)/Math.LN2}hc.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},hc.prototype._start=function(_){},hc.prototype._move=function(_,S,x){return{}},hc.prototype.touchstart=function(_,S,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([S[0],S[1]]))},hc.prototype.touchmove=function(_,S,x){if(this._firstTwoTouches){_.preventDefault();var O=this._firstTwoTouches,k=O[1],Z=f0(x,S,O[0]),Q=f0(x,S,k);if(Z&&Q){var ge=this._aroundCenter?null:Z.add(Q).div(2);return this._move([Z,Q],ge,_)}}},hc.prototype.touchend=function(_,S,x){if(this._firstTwoTouches){var O=this._firstTwoTouches,k=O[1],Z=f0(x,S,O[0]),Q=f0(x,S,k);Z&&Q||(this._active&&ee.suppressClick(),this.reset())}},hc.prototype.touchcancel=function(){this.reset()},hc.prototype.enable=function(_){this._enabled=!0,this._aroundCenter=!!_&&_.around==="center"},hc.prototype.disable=function(){this._enabled=!1,this.reset()},hc.prototype.isEnabled=function(){return this._enabled},hc.prototype.isActive=function(){return this._active};var Yu=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),delete this._distance,delete this._startDistance},S.prototype._start=function(x){this._startDistance=this._distance=x[0].dist(x[1])},S.prototype._move=function(x,O){var k=this._distance;if(this._distance=x[0].dist(x[1]),this._active||!(Math.abs(xh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:xh(this._distance,k),pinchAround:O}},S}(hc);function th(_,S){return 180*_.angleWith(S)/Math.PI}var h0=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},S.prototype._start=function(x){this._startVector=this._vector=x[0].sub(x[1]),this._minDiameter=x[0].dist(x[1])},S.prototype._move=function(x,O){var k=this._vector;if(this._vector=x[0].sub(x[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:th(this._vector,k),pinchAround:O}},S.prototype._isBelowThreshold=function(x){this._minDiameter=Math.min(this._minDiameter,x.mag());var O=25/(Math.PI*this._minDiameter)*360,k=th(x,this._startVector);return Math.abs(k)<O},S}(hc);function Od(_){return Math.abs(_.y)>Math.abs(_.x)}var d0=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.reset=function(){_.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},S.prototype._start=function(x){this._lastPoints=x,Od(x[0].sub(x[1]))&&(this._valid=!1)},S.prototype._move=function(x,O,k){var Z=x[0].sub(this._lastPoints[0]),Q=x[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Z,Q,k.timeStamp),this._valid)return this._lastPoints=x,this._active=!0,{pitchDelta:(Z.y+Q.y)/2*-.5}},S.prototype.gestureBeginsVertically=function(x,O,k){if(this._valid!==void 0)return this._valid;var Z=x.mag()>=2,Q=O.mag()>=2;if(Z||Q){if(!Z||!Q)return this._firstMove===void 0&&(this._firstMove=k),k-this._firstMove<100&&void 0;var ge=x.y>0==O.y>0;return Od(x)&&Od(O)&&ge}},S}(hc),Z0={panStep:100,bearingStep:15,pitchStep:10},dc=function(){var _=Z0;this._panStep=_.panStep,this._bearingStep=_.bearingStep,this._pitchStep=_.pitchStep,this._rotationDisabled=!1};function Uc(_){return _*(2-_)}dc.prototype.blur=function(){this.reset()},dc.prototype.reset=function(){this._active=!1},dc.prototype.keydown=function(_){var S=this;if(!(_.altKey||_.ctrlKey||_.metaKey)){var x=0,O=0,k=0,Z=0,Q=0;switch(_.keyCode){case 61:case 107:case 171:case 187:x=1;break;case 189:case 109:case 173:x=-1;break;case 37:_.shiftKey?O=-1:(_.preventDefault(),Z=-1);break;case 39:_.shiftKey?O=1:(_.preventDefault(),Z=1);break;case 38:_.shiftKey?k=1:(_.preventDefault(),Q=-1);break;case 40:_.shiftKey?k=-1:(_.preventDefault(),Q=1);break;default:return}return this._rotationDisabled&&(O=0,k=0),{cameraAnimation:function(ge){var je=ge.getZoom();ge.easeTo({duration:300,easeId:"keyboardHandler",easing:Uc,zoom:x?Math.round(je)+x*(_.shiftKey?2:1):je,bearing:ge.getBearing()+O*S._bearingStep,pitch:ge.getPitch()+k*S._pitchStep,offset:[-Z*S._panStep,-Q*S._panStep],center:ge.getCenter()},{originalEvent:_})}}}},dc.prototype.enable=function(){this._enabled=!0},dc.prototype.disable=function(){this._enabled=!1,this.reset()},dc.prototype.isEnabled=function(){return this._enabled},dc.prototype.isActive=function(){return this._active},dc.prototype.disableRotation=function(){this._rotationDisabled=!0},dc.prototype.enableRotation=function(){this._rotationDisabled=!1};var Aa=function(_,S){this._map=_,this._el=_.getCanvasContainer(),this._handler=S,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,E.bindAll(["_onTimeout"],this)};Aa.prototype.setZoomRate=function(_){this._defaultZoomRate=_},Aa.prototype.setWheelZoomRate=function(_){this._wheelZoomRate=_},Aa.prototype.isEnabled=function(){return!!this._enabled},Aa.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Aa.prototype.isZooming=function(){return!!this._zooming},Aa.prototype.enable=function(_){this.isEnabled()||(this._enabled=!0,this._aroundCenter=_&&_.around==="center")},Aa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Aa.prototype.wheel=function(_){if(this.isEnabled()){var S=_.deltaMode===E.window.WheelEvent.DOM_DELTA_LINE?40*_.deltaY:_.deltaY,x=E.browser.now(),O=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,S!==0&&S%4.000244140625==0?this._type="wheel":S!==0&&Math.abs(S)<4?this._type="trackpad":O>400?(this._type=null,this._lastValue=S,this._timeout=setTimeout(this._onTimeout,40,_)):this._type||(this._type=Math.abs(O*S)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,S+=this._lastValue)),_.shiftKey&&S&&(S/=4),this._type&&(this._lastWheelEvent=_,this._delta-=S,this._active||this._start(_)),_.preventDefault()}},Aa.prototype._onTimeout=function(_){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},Aa.prototype._start=function(_){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var S=ee.mousePos(this._el,_);this._around=E.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(S)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Aa.prototype.renderFrame=function(){var _=this;if(this._frameId&&(this._frameId=null,this.isActive())){var S=this._map.transform;if(this._delta!==0){var x=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,O=2/(1+Math.exp(-Math.abs(this._delta*x)));this._delta<0&&O!==0&&(O=1/O);var k=typeof this._targetZoom=="number"?S.zoomScale(this._targetZoom):S.scale;this._targetZoom=Math.min(S.maxZoom,Math.max(S.minZoom,S.scaleZoom(k*O))),this._type==="wheel"&&(this._startZoom=S.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Z,Q=typeof this._targetZoom=="number"?this._targetZoom:S.zoom,ge=this._startZoom,je=this._easing,ft=!1;if(this._type==="wheel"&&ge&&je){var Ut=Math.min((E.browser.now()-this._lastWheelEventTime)/200,1),Vt=je(Ut);Z=E.number(ge,Q,Vt),Ut<1?this._frameId||(this._frameId=!0):ft=!0}else Z=Q,ft=!0;return this._active=!0,ft&&(this._active=!1,this._finishTimeout=setTimeout(function(){_._zooming=!1,_._handler._triggerRenderFrame(),delete _._targetZoom,delete _._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ft,zoomDelta:Z-S.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Aa.prototype._smoothOutEasing=function(_){var S=E.ease;if(this._prevEase){var x=this._prevEase,O=(E.browser.now()-x.start)/x.duration,k=x.easing(O+.01)-x.easing(O),Z=.27/Math.sqrt(k*k+1e-4)*.01,Q=Math.sqrt(.0729-Z*Z);S=E.bezier(Z,Q,.25,1)}return this._prevEase={start:E.browser.now(),duration:_,easing:S},S},Aa.prototype.blur=function(){this.reset()},Aa.prototype.reset=function(){this._active=!1};var pc=function(_,S){this._clickZoom=_,this._tapZoom=S};pc.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},pc.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},pc.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},pc.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var hf=function(){this.reset()};hf.prototype.reset=function(){this._active=!1},hf.prototype.blur=function(){this.reset()},hf.prototype.dblclick=function(_,S){return _.preventDefault(),{cameraAnimation:function(x){x.easeTo({duration:300,zoom:x.getZoom()+(_.shiftKey?-1:1),around:x.unproject(S)},{originalEvent:_})}}},hf.prototype.enable=function(){this._enabled=!0},hf.prototype.disable=function(){this._enabled=!1,this.reset()},hf.prototype.isEnabled=function(){return this._enabled},hf.prototype.isActive=function(){return this._active};var mu=function(){this._tap=new Ja({numTouches:1,numTaps:1}),this.reset()};mu.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},mu.prototype.touchstart=function(_,S,x){this._swipePoint||(this._tapTime&&_.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=S[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(_,S,x))},mu.prototype.touchmove=function(_,S,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;var O=S[0],k=O.y-this._swipePoint.y;return this._swipePoint=O,_.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(_,S,x)},mu.prototype.touchend=function(_,S,x){this._tapTime?this._swipePoint&&x.length===0&&this.reset():this._tap.touchend(_,S,x)&&(this._tapTime=_.timeStamp)},mu.prototype.touchcancel=function(){this.reset()},mu.prototype.enable=function(){this._enabled=!0},mu.prototype.disable=function(){this._enabled=!1,this.reset()},mu.prototype.isEnabled=function(){return this._enabled},mu.prototype.isActive=function(){return this._active};var Wh=function(_,S,x){this._el=_,this._mousePan=S,this._touchPan=x};Wh.prototype.enable=function(_){this._inertiaOptions=_||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Wh.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Wh.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Wh.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Hl=function(_,S,x){this._pitchWithRotate=_.pitchWithRotate,this._mouseRotate=S,this._mousePitch=x};Hl.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Hl.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Hl.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Hl.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var zu=function(_,S,x,O){this._el=_,this._touchZoom=S,this._touchRotate=x,this._tapDragZoom=O,this._rotationDisabled=!1,this._enabled=!0};zu.prototype.enable=function(_){this._touchZoom.enable(_),this._rotationDisabled||this._touchRotate.enable(_),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},zu.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},zu.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},zu.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},zu.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},zu.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var $u=function(_){return _.zoom||_.drag||_.pitch||_.rotate},ip=function(_){function S(){_.apply(this,arguments)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S}(E.Event);function Bo(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}var Ao=function(_,S){this._map=_,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ii(_),this._bearingSnap=S.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(S),E.bindAll(["handleEvent","handleWindowEvent"],this);var x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[E.window.document,"mousemove",{capture:!0}],[E.window.document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[E.window,"blur",void 0]];for(var O=0,k=this._listeners;O<k.length;O+=1){var Z=k[O],Q=Z[0];ee.addEventListener(Q,Z[1],Q===E.window.document?this.handleWindowEvent:this.handleEvent,Z[2])}};Ao.prototype.destroy=function(){for(var _=0,S=this._listeners;_<S.length;_+=1){var x=S[_],O=x[0];ee.removeEventListener(O,x[1],O===E.window.document?this.handleWindowEvent:this.handleEvent,x[2])}},Ao.prototype._addDefaultHandlers=function(_){var S=this._map,x=S.getCanvasContainer();this._add("mapEvent",new Es(S,_));var O=S.boxZoom=new Ml(S,_);this._add("boxZoom",O);var k=new Ns,Z=new hf;S.doubleClickZoom=new pc(Z,k),this._add("tapZoom",k),this._add("clickZoom",Z);var Q=new mu;this._add("tapDragZoom",Q);var ge=S.touchPitch=new d0;this._add("touchPitch",ge);var je=new Cd(_),ft=new bh(_);S.dragRotate=new Hl(_,je,ft),this._add("mouseRotate",je,["mousePitch"]),this._add("mousePitch",ft,["mouseRotate"]);var Ut=new Af(_),Vt=new Cf(_);S.dragPan=new Wh(x,Ut,Vt),this._add("mousePan",Ut),this._add("touchPan",Vt,["touchZoom","touchRotate"]);var Zt=new h0,En=new Yu;S.touchZoomRotate=new zu(x,En,Zt,Q),this._add("touchRotate",Zt,["touchPan","touchZoom"]),this._add("touchZoom",En,["touchPan","touchRotate"]);var mn=S.scrollZoom=new Aa(S,this);this._add("scrollZoom",mn,["mousePan"]);var Un=S.keyboard=new dc;this._add("keyboard",Un),this._add("blockableMapEvent",new oo(S));for(var ln=0,kn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ln<kn.length;ln+=1){var Jn=kn[ln];_.interactive&&_[Jn]&&S[Jn].enable(_[Jn])}},Ao.prototype._add=function(_,S,x){this._handlers.push({handlerName:_,handler:S,allowed:x}),this._handlersById[_]=S},Ao.prototype.stop=function(_){if(!this._updatingCamera){for(var S=0,x=this._handlers;S<x.length;S+=1)x[S].handler.reset();this._inertia.clear(),this._fireEvents({},{},_),this._changes=[]}},Ao.prototype.isActive=function(){for(var _=0,S=this._handlers;_<S.length;_+=1)if(S[_].handler.isActive())return!0;return!1},Ao.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Ao.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Ao.prototype.isMoving=function(){return!!$u(this._eventsInProgress)||this.isZooming()},Ao.prototype._blockedByActive=function(_,S,x){for(var O in _)if(O!==x&&(!S||S.indexOf(O)<0))return!0;return!1},Ao.prototype.handleWindowEvent=function(_){this.handleEvent(_,_.type+"Window")},Ao.prototype._getMapTouches=function(_){for(var S=[],x=0,O=_;x<O.length;x+=1){var k=O[x];this._el.contains(k.target)&&S.push(k)}return S},Ao.prototype.handleEvent=function(_,S){this._updatingCamera=!0;for(var x=_.type==="renderFrame"?void 0:_,O={needsRenderFrame:!1},k={},Z={},Q=_.touches?this._getMapTouches(_.touches):void 0,ge=Q?ee.touchPos(this._el,Q):ee.mousePos(this._el,_),je=0,ft=this._handlers;je<ft.length;je+=1){var Ut=ft[je],Vt=Ut.handlerName,Zt=Ut.handler,En=Ut.allowed;if(Zt.isEnabled()){var mn=void 0;this._blockedByActive(Z,En,Vt)?Zt.reset():Zt[S||_.type]&&(mn=Zt[S||_.type](_,ge,Q),this.mergeHandlerResult(O,k,mn,Vt,x),mn&&mn.needsRenderFrame&&this._triggerRenderFrame()),(mn||Zt.isActive())&&(Z[Vt]=Zt)}}var Un={};for(var ln in this._previousActiveHandlers)Z[ln]||(Un[ln]=x);this._previousActiveHandlers=Z,(Object.keys(Un).length||Bo(O))&&(this._changes.push([O,k,Un]),this._triggerRenderFrame()),(Object.keys(Z).length||Bo(O))&&this._map._stop(!0),this._updatingCamera=!1;var kn=O.cameraAnimation;kn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],kn(this._map))},Ao.prototype.mergeHandlerResult=function(_,S,x,O,k){if(x){E.extend(_,x);var Z={handlerName:O,originalEvent:x.originalEvent||k};x.zoomDelta!==void 0&&(S.zoom=Z),x.panDelta!==void 0&&(S.drag=Z),x.pitchDelta!==void 0&&(S.pitch=Z),x.bearingDelta!==void 0&&(S.rotate=Z)}},Ao.prototype._applyChanges=function(){for(var _={},S={},x={},O=0,k=this._changes;O<k.length;O+=1){var Z=k[O],Q=Z[0],ge=Z[1],je=Z[2];Q.panDelta&&(_.panDelta=(_.panDelta||new E.Point(0,0))._add(Q.panDelta)),Q.zoomDelta&&(_.zoomDelta=(_.zoomDelta||0)+Q.zoomDelta),Q.bearingDelta&&(_.bearingDelta=(_.bearingDelta||0)+Q.bearingDelta),Q.pitchDelta&&(_.pitchDelta=(_.pitchDelta||0)+Q.pitchDelta),Q.around!==void 0&&(_.around=Q.around),Q.pinchAround!==void 0&&(_.pinchAround=Q.pinchAround),Q.noInertia&&(_.noInertia=Q.noInertia),E.extend(S,ge),E.extend(x,je)}this._updateMapTransform(_,S,x),this._changes=[]},Ao.prototype._updateMapTransform=function(_,S,x){var O=this._map,k=O.transform;if(!Bo(_))return this._fireEvents(S,x,!0);var Z=_.panDelta,Q=_.zoomDelta,ge=_.bearingDelta,je=_.pitchDelta,ft=_.around,Ut=_.pinchAround;Ut!==void 0&&(ft=Ut),O._stop(!0),ft=ft||O.transform.centerPoint;var Vt=k.pointLocation(Z?ft.sub(Z):ft);ge&&(k.bearing+=ge),je&&(k.pitch+=je),Q&&(k.zoom+=Q),k.setLocationAtPoint(Vt,ft),this._map._update(),_.noInertia||this._inertia.record(_),this._fireEvents(S,x,!0)},Ao.prototype._fireEvents=function(_,S,x){var O=this,k=$u(this._eventsInProgress),Z=$u(_),Q={};for(var ge in _)this._eventsInProgress[ge]||(Q[ge+"start"]=_[ge].originalEvent),this._eventsInProgress[ge]=_[ge];for(var je in!k&&Z&&this._fireEvent("movestart",Z.originalEvent),Q)this._fireEvent(je,Q[je]);for(var ft in Z&&this._fireEvent("move",Z.originalEvent),_)this._fireEvent(ft,_[ft].originalEvent);var Ut,Vt={};for(var Zt in this._eventsInProgress){var En=this._eventsInProgress[Zt],mn=En.handlerName,Un=En.originalEvent;this._handlersById[mn].isActive()||(delete this._eventsInProgress[Zt],Vt[Zt+"end"]=Ut=S[mn]||Un)}for(var ln in Vt)this._fireEvent(ln,Vt[ln]);var kn=$u(this._eventsInProgress);if(x&&(k||Z)&&!kn){this._updatingCamera=!0;var Jn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),gr=function(Ir){return Ir!==0&&-O._bearingSnap<Ir&&Ir<O._bearingSnap};Jn?(gr(Jn.bearing||this._map.getBearing())&&(Jn.bearing=0),this._map.easeTo(Jn,{originalEvent:Ut})):(this._map.fire(new E.Event("moveend",{originalEvent:Ut})),gr(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Ao.prototype._fireEvent=function(_,S){this._map.fire(new E.Event(_,S?{originalEvent:S}:{}))},Ao.prototype._requestFrame=function(){var _=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(S){delete _._frameId,_.handleEvent(new ip("renderFrame",{timeStamp:S})),_._applyChanges()})},Ao.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Gl=function(_){function S(x,O){_.call(this),this._moving=!1,this._zooming=!1,this.transform=x,this._bearingSnap=O.bearingSnap,E.bindAll(["_renderFrameCallback"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.getCenter=function(){return new E.LngLat(this.transform.center.lng,this.transform.center.lat)},S.prototype.setCenter=function(x,O){return this.jumpTo({center:x},O)},S.prototype.panBy=function(x,O,k){return x=E.Point.convert(x).mult(-1),this.panTo(this.transform.center,E.extend({offset:x},O),k)},S.prototype.panTo=function(x,O,k){return this.easeTo(E.extend({center:x},O),k)},S.prototype.getZoom=function(){return this.transform.zoom},S.prototype.setZoom=function(x,O){return this.jumpTo({zoom:x},O),this},S.prototype.zoomTo=function(x,O,k){return this.easeTo(E.extend({zoom:x},O),k)},S.prototype.zoomIn=function(x,O){return this.zoomTo(this.getZoom()+1,x,O),this},S.prototype.zoomOut=function(x,O){return this.zoomTo(this.getZoom()-1,x,O),this},S.prototype.getBearing=function(){return this.transform.bearing},S.prototype.setBearing=function(x,O){return this.jumpTo({bearing:x},O),this},S.prototype.getPadding=function(){return this.transform.padding},S.prototype.setPadding=function(x,O){return this.jumpTo({padding:x},O),this},S.prototype.rotateTo=function(x,O,k){return this.easeTo(E.extend({bearing:x},O),k)},S.prototype.resetNorth=function(x,O){return this.rotateTo(0,E.extend({duration:1e3},x),O),this},S.prototype.resetNorthPitch=function(x,O){return this.easeTo(E.extend({bearing:0,pitch:0,duration:1e3},x),O),this},S.prototype.snapToNorth=function(x,O){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(x,O):this},S.prototype.getPitch=function(){return this.transform.pitch},S.prototype.setPitch=function(x,O){return this.jumpTo({pitch:x},O),this},S.prototype.cameraForBounds=function(x,O){x=E.LngLatBounds.convert(x);var k=O&&O.bearing||0;return this._cameraForBoxAndBearing(x.getNorthWest(),x.getSouthEast(),k,O)},S.prototype._cameraForBoxAndBearing=function(x,O,k,Z){var Q={top:0,bottom:0,right:0,left:0};if(typeof(Z=E.extend({padding:Q,offset:[0,0],maxZoom:this.transform.maxZoom},Z)).padding=="number"){var ge=Z.padding;Z.padding={top:ge,bottom:ge,right:ge,left:ge}}Z.padding=E.extend(Q,Z.padding);var je=this.transform,ft=je.padding,Ut=je.project(E.LngLat.convert(x)),Vt=je.project(E.LngLat.convert(O)),Zt=Ut.rotate(-k*Math.PI/180),En=Vt.rotate(-k*Math.PI/180),mn=new E.Point(Math.max(Zt.x,En.x),Math.max(Zt.y,En.y)),Un=new E.Point(Math.min(Zt.x,En.x),Math.min(Zt.y,En.y)),ln=mn.sub(Un),kn=(je.width-(ft.left+ft.right+Z.padding.left+Z.padding.right))/ln.x,Jn=(je.height-(ft.top+ft.bottom+Z.padding.top+Z.padding.bottom))/ln.y;if(!(Jn<0||kn<0)){var gr=Math.min(je.scaleZoom(je.scale*Math.min(kn,Jn)),Z.maxZoom),Ir=typeof Z.offset.x=="number"?new E.Point(Z.offset.x,Z.offset.y):E.Point.convert(Z.offset),Mr=new E.Point((Z.padding.left-Z.padding.right)/2,(Z.padding.top-Z.padding.bottom)/2).rotate(k*Math.PI/180),Ur=Ir.add(Mr).mult(je.scale/je.zoomScale(gr));return{center:je.unproject(Ut.add(Vt).div(2).sub(Ur)),zoom:gr,bearing:k}}E.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},S.prototype.fitBounds=function(x,O,k){return this._fitInternal(this.cameraForBounds(x,O),O,k)},S.prototype.fitScreenCoordinates=function(x,O,k,Z,Q){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(E.Point.convert(x)),this.transform.pointLocation(E.Point.convert(O)),k,Z),Z,Q)},S.prototype._fitInternal=function(x,O,k){return x?(delete(O=E.extend(x,O)).padding,O.linear?this.easeTo(O,k):this.flyTo(O,k)):this},S.prototype.jumpTo=function(x,O){this.stop();var k=this.transform,Z=!1,Q=!1,ge=!1;return"zoom"in x&&k.zoom!==+x.zoom&&(Z=!0,k.zoom=+x.zoom),x.center!==void 0&&(k.center=E.LngLat.convert(x.center)),"bearing"in x&&k.bearing!==+x.bearing&&(Q=!0,k.bearing=+x.bearing),"pitch"in x&&k.pitch!==+x.pitch&&(ge=!0,k.pitch=+x.pitch),x.padding==null||k.isPaddingEqual(x.padding)||(k.padding=x.padding),this.fire(new E.Event("movestart",O)).fire(new E.Event("move",O)),Z&&this.fire(new E.Event("zoomstart",O)).fire(new E.Event("zoom",O)).fire(new E.Event("zoomend",O)),Q&&this.fire(new E.Event("rotatestart",O)).fire(new E.Event("rotate",O)).fire(new E.Event("rotateend",O)),ge&&this.fire(new E.Event("pitchstart",O)).fire(new E.Event("pitch",O)).fire(new E.Event("pitchend",O)),this.fire(new E.Event("moveend",O))},S.prototype.easeTo=function(x,O){var k=this;this._stop(!1,x.easeId),((x=E.extend({offset:[0,0],duration:500,easing:E.ease},x)).animate===!1||!x.essential&&E.browser.prefersReducedMotion)&&(x.duration=0);var Z=this.transform,Q=this.getZoom(),ge=this.getBearing(),je=this.getPitch(),ft=this.getPadding(),Ut="zoom"in x?+x.zoom:Q,Vt="bearing"in x?this._normalizeBearing(x.bearing,ge):ge,Zt="pitch"in x?+x.pitch:je,En="padding"in x?x.padding:Z.padding,mn=E.Point.convert(x.offset),Un=Z.centerPoint.add(mn),ln=Z.pointLocation(Un),kn=E.LngLat.convert(x.center||ln);this._normalizeCenter(kn);var Jn,gr,Ir=Z.project(ln),Mr=Z.project(kn).sub(Ir),Ur=Z.zoomScale(Ut-Q);x.around&&(Jn=E.LngLat.convert(x.around),gr=Z.locationPoint(Jn));var si={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ut!==Q,this._rotating=this._rotating||ge!==Vt,this._pitching=this._pitching||Zt!==je,this._padding=!Z.isPaddingEqual(En),this._easeId=x.easeId,this._prepareEase(O,x.noMoveStart,si),this._ease(function(Vi){if(k._zooming&&(Z.zoom=E.number(Q,Ut,Vi)),k._rotating&&(Z.bearing=E.number(ge,Vt,Vi)),k._pitching&&(Z.pitch=E.number(je,Zt,Vi)),k._padding&&(Z.interpolatePadding(ft,En,Vi),Un=Z.centerPoint.add(mn)),Jn)Z.setLocationAtPoint(Jn,gr);else{var Bi=Z.zoomScale(Z.zoom-Q),vo=Ut>Q?Math.min(2,Ur):Math.max(.5,Ur),jo=Math.pow(vo,1-Vi),Xo=Z.unproject(Ir.add(Mr.mult(Vi*jo)).mult(Bi));Z.setLocationAtPoint(Z.renderWorldCopies?Xo.wrap():Xo,Un)}k._fireMoveEvents(O)},function(Vi){k._afterEase(O,Vi)},x),this},S.prototype._prepareEase=function(x,O,k){k===void 0&&(k={}),this._moving=!0,O||k.moving||this.fire(new E.Event("movestart",x)),this._zooming&&!k.zooming&&this.fire(new E.Event("zoomstart",x)),this._rotating&&!k.rotating&&this.fire(new E.Event("rotatestart",x)),this._pitching&&!k.pitching&&this.fire(new E.Event("pitchstart",x))},S.prototype._fireMoveEvents=function(x){this.fire(new E.Event("move",x)),this._zooming&&this.fire(new E.Event("zoom",x)),this._rotating&&this.fire(new E.Event("rotate",x)),this._pitching&&this.fire(new E.Event("pitch",x))},S.prototype._afterEase=function(x,O){if(!this._easeId||!O||this._easeId!==O){delete this._easeId;var k=this._zooming,Z=this._rotating,Q=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,k&&this.fire(new E.Event("zoomend",x)),Z&&this.fire(new E.Event("rotateend",x)),Q&&this.fire(new E.Event("pitchend",x)),this.fire(new E.Event("moveend",x))}},S.prototype.flyTo=function(x,O){var k=this;if(!x.essential&&E.browser.prefersReducedMotion){var Z=E.pick(x,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Z,O)}this.stop(),x=E.extend({offset:[0,0],speed:1.2,curve:1.42,easing:E.ease},x);var Q=this.transform,ge=this.getZoom(),je=this.getBearing(),ft=this.getPitch(),Ut=this.getPadding(),Vt="zoom"in x?E.clamp(+x.zoom,Q.minZoom,Q.maxZoom):ge,Zt="bearing"in x?this._normalizeBearing(x.bearing,je):je,En="pitch"in x?+x.pitch:ft,mn="padding"in x?x.padding:Q.padding,Un=Q.zoomScale(Vt-ge),ln=E.Point.convert(x.offset),kn=Q.centerPoint.add(ln),Jn=Q.pointLocation(kn),gr=E.LngLat.convert(x.center||Jn);this._normalizeCenter(gr);var Ir=Q.project(Jn),Mr=Q.project(gr).sub(Ir),Ur=x.curve,si=Math.max(Q.width,Q.height),Vi=si/Un,Bi=Mr.mag();if("minZoom"in x){var vo=E.clamp(Math.min(x.minZoom,ge,Vt),Q.minZoom,Q.maxZoom),jo=si/Q.zoomScale(vo-ge);Ur=Math.sqrt(jo/Bi*2)}var Xo=Ur*Ur;function Yo(aa){var ko=(Vi*Vi-si*si+(aa?-1:1)*Xo*Xo*Bi*Bi)/(2*(aa?Vi:si)*Xo*Bi);return Math.log(Math.sqrt(ko*ko+1)-ko)}function cs(aa){return(Math.exp(aa)-Math.exp(-aa))/2}function Dr(aa){return(Math.exp(aa)+Math.exp(-aa))/2}var Qt=Yo(0),ga=function(aa){return Dr(Qt)/Dr(Qt+Ur*aa)},fa=function(aa){return si*((Dr(Qt)*(cs(ko=Qt+Ur*aa)/Dr(ko))-cs(Qt))/Xo)/Bi;var ko},Qo=(Yo(1)-Qt)/Ur;if(Math.abs(Bi)<1e-6||!isFinite(Qo)){if(Math.abs(si-Vi)<1e-6)return this.easeTo(x,O);var Ea=Vi<si?-1:1;Qo=Math.abs(Math.log(Vi/si))/Ur,fa=function(){return 0},ga=function(aa){return Math.exp(Ea*Ur*aa)}}return x.duration="duration"in x?+x.duration:1e3*Qo/("screenSpeed"in x?+x.screenSpeed/Ur:+x.speed),x.maxDuration&&x.duration>x.maxDuration&&(x.duration=0),this._zooming=!0,this._rotating=je!==Zt,this._pitching=En!==ft,this._padding=!Q.isPaddingEqual(mn),this._prepareEase(O,!1),this._ease(function(aa){var ko=aa*Qo,au=1/ga(ko);Q.zoom=aa===1?Vt:ge+Q.scaleZoom(au),k._rotating&&(Q.bearing=E.number(je,Zt,aa)),k._pitching&&(Q.pitch=E.number(ft,En,aa)),k._padding&&(Q.interpolatePadding(Ut,mn,aa),kn=Q.centerPoint.add(ln));var xl=aa===1?gr:Q.unproject(Ir.add(Mr.mult(fa(ko))).mult(au));Q.setLocationAtPoint(Q.renderWorldCopies?xl.wrap():xl,kn),k._fireMoveEvents(O)},function(){return k._afterEase(O)},x),this},S.prototype.isEasing=function(){return!!this._easeFrameId},S.prototype.stop=function(){return this._stop()},S.prototype._stop=function(x,O){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var k=this._onEaseEnd;delete this._onEaseEnd,k.call(this,O)}if(!x){var Z=this.handlers;Z&&Z.stop(!1)}return this},S.prototype._ease=function(x,O,k){k.animate===!1||k.duration===0?(x(1),O()):(this._easeStart=E.browser.now(),this._easeOptions=k,this._onEaseFrame=x,this._onEaseEnd=O,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},S.prototype._renderFrameCallback=function(){var x=Math.min((E.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(x)),x<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},S.prototype._normalizeBearing=function(x,O){x=E.wrap(x,-180,180);var k=Math.abs(x-O);return Math.abs(x-360-O)<k&&(x-=360),Math.abs(x+360-O)<k&&(x+=360),x},S.prototype._normalizeCenter=function(x){var O=this.transform;if(O.renderWorldCopies&&!O.lngRange){var k=x.lng-O.center.lng;x.lng+=k>180?-360:k<-180?360:0}},S}(E.Evented),qu=function(_){_===void 0&&(_={}),this.options=_,E.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};qu.prototype.getDefaultPosition=function(){return"bottom-right"},qu.prototype.onAdd=function(_){var S=this.options&&this.options.compact;return this._map=_,this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ee.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ee.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),S&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),S===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},qu.prototype.onRemove=function(){ee.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},qu.prototype._setElementTitle=function(_,S){var x=this._map._getUIString("AttributionControl."+S);_.title=x,_.setAttribute("aria-label",x)},qu.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},qu.prototype._updateEditLink=function(){var _=this._editLink;_||(_=this._editLink=this._container.querySelector(".mapbox-improve-map"));var S=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||E.config.ACCESS_TOKEN}];if(_){var x=S.reduce(function(O,k,Z){return k.value&&(O+=k.key+"="+k.value+(Z<S.length-1?"&":"")),O},"?");_.href=E.config.FEEDBACK_URL+"/"+x+(this._map._hash?this._map._hash.getHashString(!0):""),_.rel="noopener nofollow",this._setElementTitle(_,"MapFeedback")}},qu.prototype._updateData=function(_){!_||_.sourceDataType!=="metadata"&&_.sourceDataType!=="visibility"&&_.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},qu.prototype._updateAttributions=function(){if(this._map.style){var _=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?_=_.concat(this.options.customAttribution.map(function(ge){return typeof ge!="string"?"":ge})):typeof this.options.customAttribution=="string"&&_.push(this.options.customAttribution)),this._map.style.stylesheet){var S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}var x=this._map.style.sourceCaches;for(var O in x){var k=x[O];if(k.used){var Z=k.getSource();Z.attribution&&_.indexOf(Z.attribution)<0&&_.push(Z.attribution)}}_.sort(function(ge,je){return ge.length-je.length});var Q=(_=_.filter(function(ge,je){for(var ft=je+1;ft<_.length;ft++)if(_[ft].indexOf(ge)>=0)return!1;return!0})).join(" | ");Q!==this._attribHTML&&(this._attribHTML=Q,_.length?(this._innerContainer.innerHTML=Q,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},qu.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Ku=function(){E.bindAll(["_updateLogo"],this),E.bindAll(["_updateCompact"],this)};Ku.prototype.onAdd=function(_){this._map=_,this._container=ee.create("div","mapboxgl-ctrl");var S=ee.create("a","mapboxgl-ctrl-logo");return S.target="_blank",S.rel="noopener nofollow",S.href="https://www.mapbox.com/",S.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),S.setAttribute("rel","noopener nofollow"),this._container.appendChild(S),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ku.prototype.onRemove=function(){ee.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ku.prototype.getDefaultPosition=function(){return"bottom-left"},Ku.prototype._updateLogo=function(_){_&&_.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Ku.prototype._logoRequired=function(){if(this._map.style){var _=this._map.style.sourceCaches;for(var S in _)if(_[S].getSource().mapbox_logo)return!0;return!1}},Ku.prototype._updateCompact=function(){var _=this._container.children;if(_.length){var S=_[0];this._map.getCanvasContainer().offsetWidth<250?S.classList.add("mapboxgl-compact"):S.classList.remove("mapboxgl-compact")}};var cl=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};cl.prototype.add=function(_){var S=++this._id;return this._queue.push({callback:_,id:S,cancelled:!1}),S},cl.prototype.remove=function(_){for(var S=this._currentlyRunning,x=0,O=S?this._queue.concat(S):this._queue;x<O.length;x+=1){var k=O[x];if(k.id===_)return void(k.cancelled=!0)}},cl.prototype.run=function(_){_===void 0&&(_=0);var S=this._currentlyRunning=this._queue;this._queue=[];for(var x=0,O=S;x<O.length;x+=1){var k=O[x];if(!k.cancelled&&(k.callback(_),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},cl.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Sc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},nh=E.window.HTMLImageElement,Md=E.window.HTMLElement,Cs=E.window.ImageBitmap,gu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},p0=function(_){function S(O){var k=this;if((O=E.extend({},gu,O)).minZoom!=null&&O.maxZoom!=null&&O.minZoom>O.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(O.minPitch!=null&&O.maxPitch!=null&&O.minPitch>O.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(O.minPitch!=null&&O.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(O.maxPitch!=null&&O.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Z=new Ha(O.minZoom,O.maxZoom,O.minPitch,O.maxPitch,O.renderWorldCopies);if(_.call(this,Z,O),this._interactive=O.interactive,this._maxTileCacheSize=O.maxTileCacheSize,this._failIfMajorPerformanceCaveat=O.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=O.preserveDrawingBuffer,this._antialias=O.antialias,this._trackResize=O.trackResize,this._bearingSnap=O.bearingSnap,this._refreshExpiredTiles=O.refreshExpiredTiles,this._fadeDuration=O.fadeDuration,this._crossSourceCollisions=O.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=O.collectResourceTiming,this._renderTaskQueue=new cl,this._controls=[],this._mapId=E.uniqueId(),this._locale=E.extend({},Sc,O.locale),this._clickTolerance=O.clickTolerance,this._requestManager=new E.RequestManager(O.transformRequest,O.accessToken),typeof O.container=="string"){if(this._container=E.window.document.getElementById(O.container),!this._container)throw new Error("Container '"+O.container+"' not found.")}else{if(!(O.container instanceof Md))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=O.container}if(O.maxBounds&&this.setMaxBounds(O.maxBounds),E.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return k._update(!1)}),this.on("moveend",function(){return k._update(!1)}),this.on("zoom",function(){return k._update(!0)}),E.window!==void 0&&(E.window.addEventListener("online",this._onWindowOnline,!1),E.window.addEventListener("resize",this._onWindowResize,!1),E.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Ao(this,O),this._hash=O.hash&&new He(typeof O.hash=="string"&&O.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:O.center,zoom:O.zoom,bearing:O.bearing,pitch:O.pitch}),O.bounds&&(this.resize(),this.fitBounds(O.bounds,E.extend({},O.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=O.localIdeographFontFamily,O.style&&this.setStyle(O.style,{localIdeographFontFamily:O.localIdeographFontFamily}),O.attributionControl&&this.addControl(new qu({customAttribution:O.customAttribution})),this.addControl(new Ku,O.logoPosition),this.on("style.load",function(){k.transform.unmodified&&k.jumpTo(k.style.stylesheet)}),this.on("data",function(Q){k._update(Q.dataType==="style"),k.fire(new E.Event(Q.dataType+"data",Q))}),this.on("dataloading",function(Q){k.fire(new E.Event(Q.dataType+"dataloading",Q))})}_&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S;var x={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return S.prototype._getMapId=function(){return this._mapId},S.prototype.addControl=function(O,k){if(k===void 0&&(k=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Z=O.onAdd(this);this._controls.push(O);var Q=this._controlPositions[k];return k.indexOf("bottom")!==-1?Q.insertBefore(Z,Q.firstChild):Q.appendChild(Z),this},S.prototype.removeControl=function(O){if(!O||!O.onRemove)return this.fire(new E.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var k=this._controls.indexOf(O);return k>-1&&this._controls.splice(k,1),O.onRemove(this),this},S.prototype.hasControl=function(O){return this._controls.indexOf(O)>-1},S.prototype.resize=function(O){var k=this._containerDimensions(),Z=k[0],Q=k[1];if(Z===this.transform.width&&Q===this.transform.height)return this;this._resizeCanvas(Z,Q),this.transform.resize(Z,Q),this.painter.resize(Z,Q);var ge=!this._moving;return ge&&this.fire(new E.Event("movestart",O)).fire(new E.Event("move",O)),this.fire(new E.Event("resize",O)),ge&&this.fire(new E.Event("moveend",O)),this},S.prototype.getBounds=function(){return this.transform.getBounds()},S.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},S.prototype.setMaxBounds=function(O){return this.transform.setMaxBounds(E.LngLatBounds.convert(O)),this._update()},S.prototype.setMinZoom=function(O){if((O=O==null?-2:O)>=-2&&O<=this.transform.maxZoom)return this.transform.minZoom=O,this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},S.prototype.getMinZoom=function(){return this.transform.minZoom},S.prototype.setMaxZoom=function(O){if((O=O==null?22:O)>=this.transform.minZoom)return this.transform.maxZoom=O,this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")},S.prototype.getMaxZoom=function(){return this.transform.maxZoom},S.prototype.setMinPitch=function(O){if((O=O==null?0:O)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.minPitch=O,this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},S.prototype.getMinPitch=function(){return this.transform.minPitch},S.prototype.setMaxPitch=function(O){if((O=O==null?60:O)>60)throw new Error("maxPitch must be less than or equal to 60");if(O>=this.transform.minPitch)return this.transform.maxPitch=O,this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")},S.prototype.getMaxPitch=function(){return this.transform.maxPitch},S.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},S.prototype.setRenderWorldCopies=function(O){return this.transform.renderWorldCopies=O,this._update()},S.prototype.project=function(O){return this.transform.locationPoint(E.LngLat.convert(O))},S.prototype.unproject=function(O){return this.transform.pointLocation(E.Point.convert(O))},S.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},S.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},S.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},S.prototype._createDelegatedListener=function(O,k,Z){var Q,ge=this;if(O==="mouseenter"||O==="mouseover"){var je=!1;return{layer:k,listener:Z,delegates:{mousemove:function(Ut){var Vt=ge.getLayer(k)?ge.queryRenderedFeatures(Ut.point,{layers:[k]}):[];Vt.length?je||(je=!0,Z.call(ge,new la(O,ge,Ut.originalEvent,{features:Vt}))):je=!1},mouseout:function(){je=!1}}}}if(O==="mouseleave"||O==="mouseout"){var ft=!1;return{layer:k,listener:Z,delegates:{mousemove:function(Ut){(ge.getLayer(k)?ge.queryRenderedFeatures(Ut.point,{layers:[k]}):[]).length?ft=!0:ft&&(ft=!1,Z.call(ge,new la(O,ge,Ut.originalEvent)))},mouseout:function(Ut){ft&&(ft=!1,Z.call(ge,new la(O,ge,Ut.originalEvent)))}}}}return{layer:k,listener:Z,delegates:(Q={},Q[O]=function(Ut){var Vt=ge.getLayer(k)?ge.queryRenderedFeatures(Ut.point,{layers:[k]}):[];Vt.length&&(Ut.features=Vt,Z.call(ge,Ut),delete Ut.features)},Q)}},S.prototype.on=function(O,k,Z){if(Z===void 0)return _.prototype.on.call(this,O,k);var Q=this._createDelegatedListener(O,k,Z);for(var ge in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(Q),Q.delegates)this.on(ge,Q.delegates[ge]);return this},S.prototype.once=function(O,k,Z){if(Z===void 0)return _.prototype.once.call(this,O,k);var Q=this._createDelegatedListener(O,k,Z);for(var ge in Q.delegates)this.once(ge,Q.delegates[ge]);return this},S.prototype.off=function(O,k,Z){var Q=this;return Z===void 0?_.prototype.off.call(this,O,k):(this._delegatedListeners&&this._delegatedListeners[O]&&function(ge){for(var je=ge[O],ft=0;ft<je.length;ft++){var Ut=je[ft];if(Ut.layer===k&&Ut.listener===Z){for(var Vt in Ut.delegates)Q.off(Vt,Ut.delegates[Vt]);return je.splice(ft,1),Q}}}(this._delegatedListeners),this)},S.prototype.queryRenderedFeatures=function(O,k){if(!this.style)return[];var Z;if(k!==void 0||O===void 0||O instanceof E.Point||Array.isArray(O)||(k=O,O=void 0),k=k||{},(O=O||[[0,0],[this.transform.width,this.transform.height]])instanceof E.Point||typeof O[0]=="number")Z=[E.Point.convert(O)];else{var Q=E.Point.convert(O[0]),ge=E.Point.convert(O[1]);Z=[Q,new E.Point(ge.x,Q.y),ge,new E.Point(Q.x,ge.y),Q]}return this.style.queryRenderedFeatures(Z,k,this.transform)},S.prototype.querySourceFeatures=function(O,k){return this.style.querySourceFeatures(O,k)},S.prototype.setStyle=function(O,k){return(k=E.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},k)).diff!==!1&&k.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,k),this):(this._localIdeographFontFamily=k.localIdeographFontFamily,this._updateStyle(O,k))},S.prototype._getUIString=function(O){var k=this._locale[O];if(k==null)throw new Error("Missing UI string '"+O+"'");return k},S.prototype._updateStyle=function(O,k){return this.style&&(this.style.setEventedParent(null),this.style._remove()),O?(this.style=new Tu(this,k||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O):this.style.loadJSON(O),this):(delete this.style,this)},S.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Tu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},S.prototype._diffStyle=function(O,k){var Z=this;if(typeof O=="string"){var Q=this._requestManager.normalizeStyleURL(O),ge=this._requestManager.transformRequest(Q,E.ResourceType.Style);E.getJSON(ge,function(je,ft){je?Z.fire(new E.ErrorEvent(je)):ft&&Z._updateDiff(ft,k)})}else typeof O=="object"&&this._updateDiff(O,k)},S.prototype._updateDiff=function(O,k){try{this.style.setState(O)&&this._update(!0)}catch(Z){E.warnOnce("Unable to perform style diff: "+(Z.message||Z.error||Z)+".  Rebuilding the style from scratch."),this._updateStyle(O,k)}},S.prototype.getStyle=function(){if(this.style)return this.style.serialize()},S.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():E.warnOnce("There is no style added to the map.")},S.prototype.addSource=function(O,k){return this._lazyInitEmptyStyle(),this.style.addSource(O,k),this._update(!0)},S.prototype.isSourceLoaded=function(O){var k=this.style&&this.style.sourceCaches[O];if(k!==void 0)return k.loaded();this.fire(new E.ErrorEvent(new Error("There is no source with ID '"+O+"'")))},S.prototype.areTilesLoaded=function(){var O=this.style&&this.style.sourceCaches;for(var k in O){var Z=O[k]._tiles;for(var Q in Z){var ge=Z[Q];if(ge.state!=="loaded"&&ge.state!=="errored")return!1}}return!0},S.prototype.addSourceType=function(O,k,Z){return this._lazyInitEmptyStyle(),this.style.addSourceType(O,k,Z)},S.prototype.removeSource=function(O){return this.style.removeSource(O),this._update(!0)},S.prototype.getSource=function(O){return this.style.getSource(O)},S.prototype.addImage=function(O,k,Z){Z===void 0&&(Z={});var Q=Z.pixelRatio;Q===void 0&&(Q=1);var ge=Z.sdf;ge===void 0&&(ge=!1);var je=Z.stretchX,ft=Z.stretchY,Ut=Z.content;if(this._lazyInitEmptyStyle(),k instanceof nh||Cs&&k instanceof Cs){var Vt=E.browser.getImageData(k);this.style.addImage(O,{data:new E.RGBAImage({width:Vt.width,height:Vt.height},Vt.data),pixelRatio:Q,stretchX:je,stretchY:ft,content:Ut,sdf:ge,version:0})}else{if(k.width===void 0||k.height===void 0)return this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Zt=k;this.style.addImage(O,{data:new E.RGBAImage({width:k.width,height:k.height},new Uint8Array(k.data)),pixelRatio:Q,stretchX:je,stretchY:ft,content:Ut,sdf:ge,version:0,userImage:Zt}),Zt.onAdd&&Zt.onAdd(this,O)}},S.prototype.updateImage=function(O,k){var Z=this.style.getImage(O);if(!Z)return this.fire(new E.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Q=k instanceof nh||Cs&&k instanceof Cs?E.browser.getImageData(k):k,ge=Q.width,je=Q.height,ft=Q.data;return ge===void 0||je===void 0?this.fire(new E.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ge!==Z.data.width||je!==Z.data.height?this.fire(new E.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Z.data.replace(ft,!(k instanceof nh||Cs&&k instanceof Cs)),void this.style.updateImage(O,Z))},S.prototype.hasImage=function(O){return O?!!this.style.getImage(O):(this.fire(new E.ErrorEvent(new Error("Missing required image id"))),!1)},S.prototype.removeImage=function(O){this.style.removeImage(O)},S.prototype.loadImage=function(O,k){E.getImage(this._requestManager.transformRequest(O,E.ResourceType.Image),k)},S.prototype.listImages=function(){return this.style.listImages()},S.prototype.addLayer=function(O,k){return this._lazyInitEmptyStyle(),this.style.addLayer(O,k),this._update(!0)},S.prototype.moveLayer=function(O,k){return this.style.moveLayer(O,k),this._update(!0)},S.prototype.removeLayer=function(O){return this.style.removeLayer(O),this._update(!0)},S.prototype.getLayer=function(O){return this.style.getLayer(O)},S.prototype.setLayerZoomRange=function(O,k,Z){return this.style.setLayerZoomRange(O,k,Z),this._update(!0)},S.prototype.setFilter=function(O,k,Z){return Z===void 0&&(Z={}),this.style.setFilter(O,k,Z),this._update(!0)},S.prototype.getFilter=function(O){return this.style.getFilter(O)},S.prototype.setPaintProperty=function(O,k,Z,Q){return Q===void 0&&(Q={}),this.style.setPaintProperty(O,k,Z,Q),this._update(!0)},S.prototype.getPaintProperty=function(O,k){return this.style.getPaintProperty(O,k)},S.prototype.setLayoutProperty=function(O,k,Z,Q){return Q===void 0&&(Q={}),this.style.setLayoutProperty(O,k,Z,Q),this._update(!0)},S.prototype.getLayoutProperty=function(O,k){return this.style.getLayoutProperty(O,k)},S.prototype.setLight=function(O,k){return k===void 0&&(k={}),this._lazyInitEmptyStyle(),this.style.setLight(O,k),this._update(!0)},S.prototype.getLight=function(){return this.style.getLight()},S.prototype.setFeatureState=function(O,k){return this.style.setFeatureState(O,k),this._update()},S.prototype.removeFeatureState=function(O,k){return this.style.removeFeatureState(O,k),this._update()},S.prototype.getFeatureState=function(O){return this.style.getFeatureState(O)},S.prototype.getContainer=function(){return this._container},S.prototype.getCanvasContainer=function(){return this._canvasContainer},S.prototype.getCanvas=function(){return this._canvas},S.prototype._containerDimensions=function(){var O=0,k=0;return this._container&&(O=this._container.clientWidth||400,k=this._container.clientHeight||300),[O,k]},S.prototype._detectMissingCSS=function(){E.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&E.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},S.prototype._setupContainer=function(){var O=this._container;O.classList.add("mapboxgl-map"),(this._missingCSSCanary=ee.create("div","mapboxgl-canary",O)).style.visibility="hidden",this._detectMissingCSS();var k=this._canvasContainer=ee.create("div","mapboxgl-canvas-container",O);this._interactive&&k.classList.add("mapboxgl-interactive"),this._canvas=ee.create("canvas","mapboxgl-canvas",k),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Z=this._containerDimensions();this._resizeCanvas(Z[0],Z[1]);var Q=this._controlContainer=ee.create("div","mapboxgl-control-container",O),ge=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(je){ge[je]=ee.create("div","mapboxgl-ctrl-"+je,Q)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},S.prototype._resizeCanvas=function(O,k){var Z=E.browser.devicePixelRatio||1;this._canvas.width=Z*O,this._canvas.height=Z*k,this._canvas.style.width=O+"px",this._canvas.style.height=k+"px"},S.prototype._setupPainter=function(){var O=E.extend({},he.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),k=this._canvas.getContext("webgl",O)||this._canvas.getContext("experimental-webgl",O);k?(this.painter=new qs(k,this.transform),E.webpSupported.testSupport(k)):this.fire(new E.ErrorEvent(new Error("Failed to initialize WebGL")))},S.prototype._contextLost=function(O){O.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new E.Event("webglcontextlost",{originalEvent:O}))},S.prototype._contextRestored=function(O){this._setupPainter(),this.resize(),this._update(),this.fire(new E.Event("webglcontextrestored",{originalEvent:O}))},S.prototype._onMapScroll=function(O){if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},S.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},S.prototype._update=function(O){return this.style?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this},S.prototype._requestRenderFrame=function(O){return this._update(),this._renderTaskQueue.add(O)},S.prototype._cancelRenderFrame=function(O){this._renderTaskQueue.remove(O)},S.prototype._render=function(O){var k,Z=this,Q=0,ge=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(k=ge.createQueryEXT(),ge.beginQueryEXT(ge.TIME_ELAPSED_EXT,k),Q=E.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),!this._removed){var je=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ft=this.transform.zoom,Ut=E.browser.now();this.style.zoomHistory.update(ft,Ut);var Vt=new E.EvaluationParameters(ft,{now:Ut,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Zt=Vt.crossFadingFactor();Zt===1&&Zt===this._crossFadingFactor||(je=!0,this._crossFadingFactor=Zt),this.style.update(Vt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new E.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new E.Event("load"))),this.style&&(this.style.hasTransitions()||je)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var En=E.browser.now()-Q;ge.endQueryEXT(ge.TIME_ELAPSED_EXT,k),setTimeout(function(){var ln=ge.getQueryObjectEXT(k,ge.QUERY_RESULT_EXT)/1e6;ge.deleteQueryEXT(k),Z.fire(new E.Event("gpu-timing-frame",{cpuTime:En,gpuTime:ln}))},50)}if(this.listens("gpu-timing-layer")){var mn=this.painter.collectGpuTimers();setTimeout(function(){var ln=Z.painter.queryGpuTimers(mn);Z.fire(new E.Event("gpu-timing-layer",{layerTimes:ln}))},50)}var Un=this._sourcesDirty||this._styleDirty||this._placementDirty;return Un||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new E.Event("idle")),!this._loaded||this._fullyLoaded||Un||(this._fullyLoaded=!0),this}},S.prototype.remove=function(){this._hash&&this._hash.remove();for(var O=0,k=this._controls;O<k.length;O+=1)k[O].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),E.window!==void 0&&(E.window.removeEventListener("resize",this._onWindowResize,!1),E.window.removeEventListener("orientationchange",this._onWindowResize,!1),E.window.removeEventListener("online",this._onWindowOnline,!1));var Z=this.painter.context.gl.getExtension("WEBGL_lose_context");Z&&Z.loseContext(),Zh(this._canvasContainer),Zh(this._controlContainer),Zh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new E.Event("remove"))},S.prototype.triggerRepaint=function(){var O=this;this.style&&!this._frame&&(this._frame=E.browser.frame(function(k){O._frame=null,O._render(k)}))},S.prototype._onWindowOnline=function(){this._update()},S.prototype._onWindowResize=function(O){this._trackResize&&this.resize({originalEvent:O})._update()},x.showTileBoundaries.get=function(){return!!this._showTileBoundaries},x.showTileBoundaries.set=function(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())},x.showPadding.get=function(){return!!this._showPadding},x.showPadding.set=function(O){this._showPadding!==O&&(this._showPadding=O,this._update())},x.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},x.showCollisionBoxes.set=function(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())},x.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},x.showOverdrawInspector.set=function(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())},x.repaint.get=function(){return!!this._repaint},x.repaint.set=function(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())},x.vertices.get=function(){return!!this._vertices},x.vertices.set=function(O){this._vertices=O,this._update()},S.prototype._setCacheLimits=function(O,k){E.setCacheLimits(O,k)},x.version.get=function(){return E.version},Object.defineProperties(S.prototype,x),S}(Gl);function Zh(_){_.parentNode&&_.parentNode.removeChild(_)}var op={showCompass:!0,showZoom:!0,visualizePitch:!1},Eh=function(_){var S=this;this.options=E.extend({},op,_),this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this.options.showZoom&&(E.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(x){return S._map.zoomIn({},{originalEvent:x})}),ee.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(x){return S._map.zoomOut({},{originalEvent:x})}),ee.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(E.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(x){S.options.visualizePitch?S._map.resetNorthPitch({},{originalEvent:x}):S._map.resetNorth({},{originalEvent:x})}),this._compassIcon=ee.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Eh.prototype._updateZoomButtons=function(){var _=this._map.getZoom(),S=_===this._map.getMaxZoom(),x=_===this._map.getMinZoom();this._zoomInButton.disabled=S,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",S.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())},Eh.prototype._rotateCompassArrow=function(){var _=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=_},Eh.prototype.onAdd=function(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qu(this._map,this._compass,this.options.visualizePitch)),this._container},Eh.prototype.onRemove=function(){ee.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Eh.prototype._createButton=function(_,S){var x=ee.create("button",_,this._container);return x.type="button",x.addEventListener("click",S),x},Eh.prototype._setButtonTitle=function(_,S){var x=this._map._getUIString("NavigationControl."+S);_.title=x,_.setAttribute("aria-label",x)};var Qu=function(_,S,x){x===void 0&&(x=!1),this._clickTolerance=10,this.element=S,this.mouseRotate=new Cd({clickTolerance:_.dragRotate._mouseRotate._clickTolerance}),this.map=_,x&&(this.mousePitch=new bh({clickTolerance:_.dragRotate._mousePitch._clickTolerance})),E.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),ee.addEventListener(S,"mousedown",this.mousedown),ee.addEventListener(S,"touchstart",this.touchstart,{passive:!1}),ee.addEventListener(S,"touchmove",this.touchmove),ee.addEventListener(S,"touchend",this.touchend),ee.addEventListener(S,"touchcancel",this.reset)};function ap(_,S,x){if(_=new E.LngLat(_.lng,_.lat),S){var O=new E.LngLat(_.lng-360,_.lat),k=new E.LngLat(_.lng+360,_.lat),Z=x.locationPoint(_).distSqr(S);x.locationPoint(O).distSqr(S)<Z?_=O:x.locationPoint(k).distSqr(S)<Z&&(_=k)}for(;Math.abs(_.lng-x.center.lng)>180;){var Q=x.locationPoint(_);if(Q.x>=0&&Q.y>=0&&Q.x<=x.width&&Q.y<=x.height)break;_.lng>x.center.lng?_.lng-=360:_.lng+=360}return _}Qu.prototype.down=function(_,S){this.mouseRotate.mousedown(_,S),this.mousePitch&&this.mousePitch.mousedown(_,S),ee.disableDrag()},Qu.prototype.move=function(_,S){var x=this.map,O=this.mouseRotate.mousemoveWindow(_,S);if(O&&O.bearingDelta&&x.setBearing(x.getBearing()+O.bearingDelta),this.mousePitch){var k=this.mousePitch.mousemoveWindow(_,S);k&&k.pitchDelta&&x.setPitch(x.getPitch()+k.pitchDelta)}},Qu.prototype.off=function(){var _=this.element;ee.removeEventListener(_,"mousedown",this.mousedown),ee.removeEventListener(_,"touchstart",this.touchstart,{passive:!1}),ee.removeEventListener(_,"touchmove",this.touchmove),ee.removeEventListener(_,"touchend",this.touchend),ee.removeEventListener(_,"touchcancel",this.reset),this.offTemp()},Qu.prototype.offTemp=function(){ee.enableDrag(),ee.removeEventListener(E.window,"mousemove",this.mousemove),ee.removeEventListener(E.window,"mouseup",this.mouseup)},Qu.prototype.mousedown=function(_){this.down(E.extend({},_,{ctrlKey:!0,preventDefault:function(){return _.preventDefault()}}),ee.mousePos(this.element,_)),ee.addEventListener(E.window,"mousemove",this.mousemove),ee.addEventListener(E.window,"mouseup",this.mouseup)},Qu.prototype.mousemove=function(_){this.move(_,ee.mousePos(this.element,_))},Qu.prototype.mouseup=function(_){this.mouseRotate.mouseupWindow(_),this.mousePitch&&this.mousePitch.mouseupWindow(_),this.offTemp()},Qu.prototype.touchstart=function(_){_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ee.touchPos(this.element,_.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return _.preventDefault()}},this._startPos))},Qu.prototype.touchmove=function(_){_.targetTouches.length!==1?this.reset():(this._lastPos=ee.touchPos(this.element,_.targetTouches)[0],this.move({preventDefault:function(){return _.preventDefault()}},this._lastPos))},Qu.prototype.touchend=function(_){_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Qu.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var wc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hp(_,S,x){var O=_.classList;for(var k in wc)O.remove("mapboxgl-"+x+"-anchor-"+k);O.add("mapboxgl-"+x+"-anchor-"+S)}var jc,Rd=function(_){function S(x,O){if(_.call(this),(x instanceof E.window.HTMLElement||O)&&(x=E.extend({element:x},O)),E.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=x&&x.anchor||"center",this._color=x&&x.color||"#3FB1CE",this._scale=x&&x.scale||1,this._draggable=x&&x.draggable||!1,this._clickTolerance=x&&x.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=x&&x.rotation||0,this._rotationAlignment=x&&x.rotationAlignment||"auto",this._pitchAlignment=x&&x.pitchAlignment&&x.pitchAlignment!=="auto"?x.pitchAlignment:this._rotationAlignment,x&&x.element)this._element=x.element,this._offset=E.Point.convert(x&&x.offset||[0,0]);else{this._defaultMarker=!0,this._element=ee.create("div"),this._element.setAttribute("aria-label","Map marker");var k=ee.createNS("http://www.w3.org/2000/svg","svg");k.setAttributeNS(null,"display","block"),k.setAttributeNS(null,"height","41px"),k.setAttributeNS(null,"width","27px"),k.setAttributeNS(null,"viewBox","0 0 27 41");var Z=ee.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"stroke","none"),Z.setAttributeNS(null,"stroke-width","1"),Z.setAttributeNS(null,"fill","none"),Z.setAttributeNS(null,"fill-rule","evenodd");var Q=ee.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill-rule","nonzero");var ge=ee.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ge.setAttributeNS(null,"fill","#000000");for(var je=0,ft=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];je<ft.length;je+=1){var Ut=ft[je],Vt=ee.createNS("http://www.w3.org/2000/svg","ellipse");Vt.setAttributeNS(null,"opacity","0.04"),Vt.setAttributeNS(null,"cx","10.5"),Vt.setAttributeNS(null,"cy","5.80029008"),Vt.setAttributeNS(null,"rx",Ut.rx),Vt.setAttributeNS(null,"ry",Ut.ry),ge.appendChild(Vt)}var Zt=ee.createNS("http://www.w3.org/2000/svg","g");Zt.setAttributeNS(null,"fill",this._color);var En=ee.createNS("http://www.w3.org/2000/svg","path");En.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Zt.appendChild(En);var mn=ee.createNS("http://www.w3.org/2000/svg","g");mn.setAttributeNS(null,"opacity","0.25"),mn.setAttributeNS(null,"fill","#000000");var Un=ee.createNS("http://www.w3.org/2000/svg","path");Un.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),mn.appendChild(Un);var ln=ee.createNS("http://www.w3.org/2000/svg","g");ln.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ln.setAttributeNS(null,"fill","#FFFFFF");var kn=ee.createNS("http://www.w3.org/2000/svg","g");kn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Jn=ee.createNS("http://www.w3.org/2000/svg","circle");Jn.setAttributeNS(null,"fill","#000000"),Jn.setAttributeNS(null,"opacity","0.25"),Jn.setAttributeNS(null,"cx","5.5"),Jn.setAttributeNS(null,"cy","5.5"),Jn.setAttributeNS(null,"r","5.4999962");var gr=ee.createNS("http://www.w3.org/2000/svg","circle");gr.setAttributeNS(null,"fill","#FFFFFF"),gr.setAttributeNS(null,"cx","5.5"),gr.setAttributeNS(null,"cy","5.5"),gr.setAttributeNS(null,"r","5.4999962"),kn.appendChild(Jn),kn.appendChild(gr),Q.appendChild(ge),Q.appendChild(Zt),Q.appendChild(mn),Q.appendChild(ln),Q.appendChild(kn),k.appendChild(Q),k.setAttributeNS(null,"height",41*this._scale+"px"),k.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(k),this._offset=E.Point.convert(x&&x.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ir){Ir.preventDefault()}),this._element.addEventListener("mousedown",function(Ir){Ir.preventDefault()}),Hp(this._element,this._anchor,"marker"),this._popup=null}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.addTo=function(x){return this.remove(),this._map=x,x.getCanvasContainer().appendChild(this._element),x.on("move",this._update),x.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},S.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),ee.remove(this._element),this._popup&&this._popup.remove(),this},S.prototype.getLngLat=function(){return this._lngLat},S.prototype.setLngLat=function(x){return this._lngLat=E.LngLat.convert(x),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},S.prototype.getElement=function(){return this._element},S.prototype.setPopup=function(x){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),x){if(!("offset"in x.options)){var O=Math.sqrt(Math.pow(13.5,2)/2);x.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[O,-1*(24.6+O)],"bottom-right":[-O,-1*(24.6+O)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=x,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},S.prototype._onKeyPress=function(x){var O=x.code,k=x.charCode||x.keyCode;O!=="Space"&&O!=="Enter"&&k!==32&&k!==13||this.togglePopup()},S.prototype._onMapClick=function(x){var O=x.originalEvent.target,k=this._element;this._popup&&(O===k||k.contains(O))&&this.togglePopup()},S.prototype.getPopup=function(){return this._popup},S.prototype.togglePopup=function(){var x=this._popup;return x?(x.isOpen()?x.remove():x.addTo(this._map),this):this},S.prototype._update=function(x){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ap(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var O="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?O="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(O="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k="rotateX("+this._map.getPitch()+"deg)"),x&&x.type!=="moveend"||(this._pos=this._pos.round()),ee.setTransform(this._element,wc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+k+" "+O)}},S.prototype.getOffset=function(){return this._offset},S.prototype.setOffset=function(x){return this._offset=E.Point.convert(x),this._update(),this},S.prototype._onMove=function(x){if(!this._isDragging){var O=this._clickTolerance||this._map._clickTolerance;this._isDragging=x.point.dist(this._pointerdownPos)>=O}this._isDragging&&(this._pos=x.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new E.Event("dragstart"))),this.fire(new E.Event("drag")))},S.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new E.Event("dragend")),this._state="inactive"},S.prototype._addDragHandler=function(x){this._element.contains(x.originalEvent.target)&&(x.preventDefault(),this._positionDelta=x.point.sub(this._pos).add(this._offset),this._pointerdownPos=x.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},S.prototype.setDraggable=function(x){return this._draggable=!!x,this._map&&(x?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},S.prototype.isDraggable=function(){return this._draggable},S.prototype.setRotation=function(x){return this._rotation=x||0,this._update(),this},S.prototype.getRotation=function(){return this._rotation},S.prototype.setRotationAlignment=function(x){return this._rotationAlignment=x||"auto",this._update(),this},S.prototype.getRotationAlignment=function(){return this._rotationAlignment},S.prototype.setPitchAlignment=function(x){return this._pitchAlignment=x&&x!=="auto"?x:this._rotationAlignment,this._update(),this},S.prototype.getPitchAlignment=function(){return this._pitchAlignment},S}(E.Evented),v0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Sh=0,Xh=!1,m0=function(_){function S(x){_.call(this),this.options=E.extend({},v0,x),E.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.onAdd=function(x){var O;return this._map=x,this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),O=this._setupUI,jc!==void 0?O(jc):E.window.navigator.permissions!==void 0?E.window.navigator.permissions.query({name:"geolocation"}).then(function(k){O(jc=k.state!=="denied")}):O(jc=!!E.window.navigator.geolocation),this._container},S.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(E.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),ee.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Sh=0,Xh=!1},S.prototype._isOutOfMapMaxBounds=function(x){var O=this._map.getMaxBounds(),k=x.coords;return O&&(k.longitude<O.getWest()||k.longitude>O.getEast()||k.latitude<O.getSouth()||k.latitude>O.getNorth())},S.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},S.prototype._onSuccess=function(x){if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new E.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(x),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new E.Event("geolocate",x)),this._finish()}},S.prototype._updateCamera=function(x){var O=new E.LngLat(x.coords.longitude,x.coords.latitude),k=x.coords.accuracy,Z=this._map.getBearing(),Q=E.extend({bearing:Z},this.options.fitBoundsOptions);this._map.fitBounds(O.toBounds(k),Q,{geolocateSource:!0})},S.prototype._updateMarker=function(x){if(x){var O=new E.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(O).addTo(this._map),this._userLocationDotMarker.setLngLat(O).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},S.prototype._updateCircleRadius=function(){var x=this._map._container.clientHeight/2,O=this._map.unproject([0,x]),k=this._map.unproject([1,x]),Z=O.distanceTo(k),Q=Math.ceil(2*this._accuracy/Z);this._circleElement.style.width=Q+"px",this._circleElement.style.height=Q+"px"},S.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},S.prototype._onError=function(x){if(this._map){if(this.options.trackUserLocation)if(x.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var O=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=O,this._geolocateButton.setAttribute("aria-label",O),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(x.code===3&&Xh)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new E.Event("error",x)),this._finish()}},S.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},S.prototype._setupUI=function(x){var O=this;if(this._container.addEventListener("contextmenu",function(Q){return Q.preventDefault()}),this._geolocateButton=ee.create("button","mapboxgl-ctrl-geolocate",this._container),ee.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",x===!1){E.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var k=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=k,this._geolocateButton.setAttribute("aria-label",k)}else{var Z=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ee.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Rd(this._dotElement),this._circleElement=ee.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Rd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Q){Q.geolocateSource||O._watchState!=="ACTIVE_LOCK"||Q.originalEvent&&Q.originalEvent.type==="resize"||(O._watchState="BACKGROUND",O._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),O._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),O.fire(new E.Event("trackuserlocationend")))})},S.prototype.trigger=function(){if(!this._setup)return E.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new E.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Sh--,Xh=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new E.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new E.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var x;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Sh>1?(x={maximumAge:6e5,timeout:0},Xh=!0):(x=this.options.positionOptions,Xh=!1),this._geolocationWatchID=E.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else E.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},S.prototype._clearWatch=function(){E.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},S}(E.Evented),Vf={maxWidth:100,unit:"metric"},Hf=function(_){this.options=E.extend({},Vf,_),E.bindAll(["_onMove","setUnit"],this)};function g0(_,S,x){var O=x&&x.maxWidth||100,k=_._container.clientHeight/2,Z=_.unproject([0,k]),Q=_.unproject([O,k]),ge=Z.distanceTo(Q);if(x&&x.unit==="imperial"){var je=3.2808*ge;je>5280?rh(S,O,je/5280,_._getUIString("ScaleControl.Miles")):rh(S,O,je,_._getUIString("ScaleControl.Feet"))}else x&&x.unit==="nautical"?rh(S,O,ge/1852,_._getUIString("ScaleControl.NauticalMiles")):ge>=1e3?rh(S,O,ge/1e3,_._getUIString("ScaleControl.Kilometers")):rh(S,O,ge,_._getUIString("ScaleControl.Meters"))}function rh(_,S,x,O){var k,Z,Q,ge=(k=x,(Z=Math.pow(10,(""+Math.floor(k)).length-1))*(Q=(Q=k/Z)>=10?10:Q>=5?5:Q>=3?3:Q>=2?2:Q>=1?1:function(je){var ft=Math.pow(10,Math.ceil(-Math.log(je)/Math.LN10));return Math.round(je*ft)/ft}(Q)));_.style.width=S*(ge/x)+"px",_.innerHTML=ge+"&nbsp;"+O}Hf.prototype.getDefaultPosition=function(){return"bottom-left"},Hf.prototype._onMove=function(){g0(this._map,this._container,this.options)},Hf.prototype.onAdd=function(_){return this._map=_,this._container=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Hf.prototype.onRemove=function(){ee.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Hf.prototype.setUnit=function(_){this.options.unit=_,g0(this._map,this._container,this.options)};var Of=function(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof E.window.HTMLElement?this._container=_.container:E.warnOnce("Full screen control 'container' must be a DOM element.")),E.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in E.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in E.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in E.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in E.window.document&&(this._fullscreenchange="MSFullscreenChange")};Of.prototype.onAdd=function(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=ee.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",E.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Of.prototype.onRemove=function(){ee.remove(this._controlContainer),this._map=null,E.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Of.prototype._checkFullscreenSupport=function(){return!!(E.window.document.fullscreenEnabled||E.window.document.mozFullScreenEnabled||E.window.document.msFullscreenEnabled||E.window.document.webkitFullscreenEnabled)},Of.prototype._setupUI=function(){var _=this._fullscreenButton=ee.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ee.create("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden",!0),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),E.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Of.prototype._updateTitle=function(){var _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_},Of.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Of.prototype._isFullscreen=function(){return this._fullscreen},Of.prototype._changeIcon=function(){(E.window.document.fullscreenElement||E.window.document.mozFullScreenElement||E.window.document.webkitFullscreenElement||E.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Of.prototype._onClickFullscreen=function(){this._isFullscreen()?E.window.document.exitFullscreen?E.window.document.exitFullscreen():E.window.document.mozCancelFullScreen?E.window.document.mozCancelFullScreen():E.window.document.msExitFullscreen?E.window.document.msExitFullscreen():E.window.document.webkitCancelFullScreen&&E.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var X0={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Gf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Yh=function(_){function S(x){_.call(this),this.options=E.extend(Object.create(X0),x),E.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return _&&(S.__proto__=_),(S.prototype=Object.create(_&&_.prototype)).constructor=S,S.prototype.addTo=function(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new E.Event("open")),this},S.prototype.isOpen=function(){return!!this._map},S.prototype.remove=function(){return this._content&&ee.remove(this._content),this._container&&(ee.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new E.Event("close")),this},S.prototype.getLngLat=function(){return this._lngLat},S.prototype.setLngLat=function(x){return this._lngLat=E.LngLat.convert(x),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},S.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},S.prototype.getElement=function(){return this._container},S.prototype.setText=function(x){return this.setDOMContent(E.window.document.createTextNode(x))},S.prototype.setHTML=function(x){var O,k=E.window.document.createDocumentFragment(),Z=E.window.document.createElement("body");for(Z.innerHTML=x;O=Z.firstChild;)k.appendChild(O);return this.setDOMContent(k)},S.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},S.prototype.setMaxWidth=function(x){return this.options.maxWidth=x,this._update(),this},S.prototype.setDOMContent=function(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=ee.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this},S.prototype.addClassName=function(x){this._container&&this._container.classList.add(x)},S.prototype.removeClassName=function(x){this._container&&this._container.classList.remove(x)},S.prototype.setOffset=function(x){return this.options.offset=x,this._update(),this},S.prototype.toggleClassName=function(x){if(this._container)return this._container.classList.toggle(x)},S.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=ee.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},S.prototype._onMouseUp=function(x){this._update(x.point)},S.prototype._onMouseMove=function(x){this._update(x.point)},S.prototype._onDrag=function(x){this._update(x.point)},S.prototype._update=function(x){var O=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=ee.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=ee.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Vt){return O._container.classList.add(Vt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ap(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||x)){var k=this._pos=this._trackPointer&&x?x:this._map.project(this._lngLat),Z=this.options.anchor,Q=function Vt(Zt){if(Zt){if(typeof Zt=="number"){var En=Math.round(Math.sqrt(.5*Math.pow(Zt,2)));return{center:new E.Point(0,0),top:new E.Point(0,Zt),"top-left":new E.Point(En,En),"top-right":new E.Point(-En,En),bottom:new E.Point(0,-Zt),"bottom-left":new E.Point(En,-En),"bottom-right":new E.Point(-En,-En),left:new E.Point(Zt,0),right:new E.Point(-Zt,0)}}if(Zt instanceof E.Point||Array.isArray(Zt)){var mn=E.Point.convert(Zt);return{center:mn,top:mn,"top-left":mn,"top-right":mn,bottom:mn,"bottom-left":mn,"bottom-right":mn,left:mn,right:mn}}return{center:E.Point.convert(Zt.center||[0,0]),top:E.Point.convert(Zt.top||[0,0]),"top-left":E.Point.convert(Zt["top-left"]||[0,0]),"top-right":E.Point.convert(Zt["top-right"]||[0,0]),bottom:E.Point.convert(Zt.bottom||[0,0]),"bottom-left":E.Point.convert(Zt["bottom-left"]||[0,0]),"bottom-right":E.Point.convert(Zt["bottom-right"]||[0,0]),left:E.Point.convert(Zt.left||[0,0]),right:E.Point.convert(Zt.right||[0,0])}}return Vt(new E.Point(0,0))}(this.options.offset);if(!Z){var ge,je=this._container.offsetWidth,ft=this._container.offsetHeight;ge=k.y+Q.bottom.y<ft?["top"]:k.y>this._map.transform.height-ft?["bottom"]:[],k.x<je/2?ge.push("left"):k.x>this._map.transform.width-je/2&&ge.push("right"),Z=ge.length===0?"bottom":ge.join("-")}var Ut=k.add(Q[Z]).round();ee.setTransform(this._container,wc[Z]+" translate("+Ut.x+"px,"+Ut.y+"px)"),Hp(this._container,Z,"popup")}},S.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var x=this._container.querySelector(Gf);x&&x.focus()}},S.prototype._onClose=function(){this.remove()},S}(E.Evented),y0={version:E.version,supported:he,setRTLTextPlugin:E.setRTLTextPlugin,getRTLTextPluginStatus:E.getRTLTextPluginStatus,Map:p0,NavigationControl:Eh,GeolocateControl:m0,AttributionControl:qu,ScaleControl:Hf,FullscreenControl:Of,Popup:Yh,Marker:Rd,Style:Tu,LngLat:E.LngLat,LngLatBounds:E.LngLatBounds,Point:E.Point,MercatorCoordinate:E.MercatorCoordinate,Evented:E.Evented,config:E.config,prewarm:function(){wr().acquire(mr)},clearPrewarmedResources:function(){var _=wi;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(mr),wi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return E.config.ACCESS_TOKEN},set accessToken(_){E.config.ACCESS_TOKEN=_},get baseApiUrl(){return E.config.API_URL},set baseApiUrl(_){E.config.API_URL=_},get workerCount(){return Hr.workerCount},set workerCount(_){Hr.workerCount=_},get maxParallelImageRequests(){return E.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){E.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage:function(_){E.clearTileCache(_)},workerUrl:""};return y0}),K})},92077:function(bt,G,L){var K,W;(function(E,he){K=he,W=typeof K=="function"?K.call(G,L,G,bt):K,W!==void 0&&(bt.exports=W)})(this,function(){var E,he,ee="2.0.6",se={},ue={},be={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},oe={currentLocale:be.currentLocale,zeroFormat:be.zeroFormat,nullFormat:be.nullFormat,defaultFormat:be.defaultFormat,scalePercentBy100:be.scalePercentBy100};function Ge(te,me){this._input=te,this._value=me}return E=function(te){var me,Pe,$,le;if(E.isNumeral(te))me=te.value();else if(te===0||typeof te=="undefined")me=0;else if(te===null||he.isNaN(te))me=null;else if(typeof te=="string")if(oe.zeroFormat&&te===oe.zeroFormat)me=0;else if(oe.nullFormat&&te===oe.nullFormat||!te.replace(/[^0-9]+/g,"").length)me=null;else{for(Pe in se)if(le=typeof se[Pe].regexps.unformat=="function"?se[Pe].regexps.unformat():se[Pe].regexps.unformat,le&&te.match(le)){$=se[Pe].unformat;break}$=$||E._.stringToNumber,me=$(te)}else me=Number(te)||null;return new Ge(te,me)},E.version=ee,E.isNumeral=function(te){return te instanceof Ge},E._=he={numberToFormat:function(te,me,Pe){var $=ue[E.options.currentLocale],le=!1,J=!1,Ee=0,tt="",Je=1e12,wt=1e9,pt=1e6,yt=1e3,Re="",Ce=!1,Ue,We,lt,tn,Le,_t,Me,nt,qe,Ye;if(te=te||0,We=Math.abs(te),E._.includes(me,"(")?(le=!0,me=me.replace(/[\(|\)]/g,"")):(E._.includes(me,"+")||E._.includes(me,"-"))&&(nt=E._.includes(me,"+")?me.indexOf("+"):te<0?me.indexOf("-"):-1,me=me.replace(/[\+|\-]/g,"")),E._.includes(me,"a")&&(Ue=me.match(/a(k|m|b|t)?/),Ue=Ue?Ue[1]:!1,E._.includes(me," a")&&(tt=" "),me=me.replace(new RegExp(tt+"a[kmbt]?"),""),We>=Je&&!Ue||Ue==="t"?(tt+=$.abbreviations.trillion,te=te/Je):We<Je&&We>=wt&&!Ue||Ue==="b"?(tt+=$.abbreviations.billion,te=te/wt):We<wt&&We>=pt&&!Ue||Ue==="m"?(tt+=$.abbreviations.million,te=te/pt):(We<pt&&We>=yt&&!Ue||Ue==="k")&&(tt+=$.abbreviations.thousand,te=te/yt)),E._.includes(me,"[.]")&&(J=!0,me=me.replace("[.]",".")),_t=te.toString().split(".")[0],Me=me.split(".")[1],qe=me.indexOf(","),Ee=(me.split(".")[0].split(",")[0].match(/0/g)||[]).length,Me?(E._.includes(Me,"[")?(Me=Me.replace("]",""),Me=Me.split("["),Re=E._.toFixed(te,Me[0].length+Me[1].length,Pe,Me[1].length)):Re=E._.toFixed(te,Me.length,Pe),_t=Re.split(".")[0],E._.includes(Re,".")?Re=$.delimiters.decimal+Re.split(".")[1]:Re="",J&&Number(Re.slice(1))===0&&(Re="")):_t=E._.toFixed(te,0,Pe),tt&&!Ue&&Number(_t)>=1e3&&tt!==$.abbreviations.trillion)switch(_t=String(Number(_t)/1e3),tt){case $.abbreviations.thousand:tt=$.abbreviations.million;break;case $.abbreviations.million:tt=$.abbreviations.billion;break;case $.abbreviations.billion:tt=$.abbreviations.trillion;break}if(E._.includes(_t,"-")&&(_t=_t.slice(1),Ce=!0),_t.length<Ee)for(var Lt=Ee-_t.length;Lt>0;Lt--)_t="0"+_t;return qe>-1&&(_t=_t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+$.delimiters.thousands)),me.indexOf(".")===0&&(_t=""),Ye=_t+Re+(tt||""),le?Ye=(le&&Ce?"(":"")+Ye+(le&&Ce?")":""):nt>=0?Ye=nt===0?(Ce?"-":"+")+Ye:Ye+(Ce?"-":"+"):Ce&&(Ye="-"+Ye),Ye},stringToNumber:function(te){var me=ue[oe.currentLocale],Pe=te,$={thousand:3,million:6,billion:9,trillion:12},le,J,Ee,tt;if(oe.zeroFormat&&te===oe.zeroFormat)J=0;else if(oe.nullFormat&&te===oe.nullFormat||!te.replace(/[^0-9]+/g,"").length)J=null;else{J=1,me.delimiters.decimal!=="."&&(te=te.replace(/\./g,"").replace(me.delimiters.decimal,"."));for(le in $)if(tt=new RegExp("[^a-zA-Z]"+me.abbreviations[le]+"(?:\\)|(\\"+me.currency.symbol+")?(?:\\))?)?$"),Pe.match(tt)){J*=Math.pow(10,$[le]);break}J*=(te.split("-").length+Math.min(te.split("(").length-1,te.split(")").length-1))%2?1:-1,te=te.replace(/[^0-9\.]+/g,""),J*=Number(te)}return J},isNaN:function(te){return typeof te=="number"&&isNaN(te)},includes:function(te,me){return te.indexOf(me)!==-1},insert:function(te,me,Pe){return te.slice(0,Pe)+me+te.slice(Pe)},reduce:function(te,me){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof me!="function")throw new TypeError(me+" is not a function");var Pe=Object(te),$=Pe.length>>>0,le=0,J;if(arguments.length===3)J=arguments[2];else{for(;le<$&&!(le in Pe);)le++;if(le>=$)throw new TypeError("Reduce of empty array with no initial value");J=Pe[le++]}for(;le<$;le++)le in Pe&&(J=me(J,Pe[le],le,Pe));return J},multiplier:function(te){var me=te.toString().split(".");return me.length<2?1:Math.pow(10,me[1].length)},correctionFactor:function(){var te=Array.prototype.slice.call(arguments);return te.reduce(function(me,Pe){var $=he.multiplier(Pe);return me>$?me:$},1)},toFixed:function(te,me,Pe,$){var le=te.toString().split("."),J=me-($||0),Ee,tt,Je,wt;return le.length===2?Ee=Math.min(Math.max(le[1].length,J),me):Ee=J,Je=Math.pow(10,Ee),wt=(Pe(te+"e+"+Ee)/Je).toFixed(Ee),$>me-Ee&&(tt=new RegExp("\\.?0{1,"+($-(me-Ee))+"}$"),wt=wt.replace(tt,"")),wt}},E.options=oe,E.formats=se,E.locales=ue,E.locale=function(te){return te&&(oe.currentLocale=te.toLowerCase()),oe.currentLocale},E.localeData=function(te){if(!te)return ue[oe.currentLocale];if(te=te.toLowerCase(),!ue[te])throw new Error("Unknown locale : "+te);return ue[te]},E.reset=function(){for(var te in be)oe[te]=be[te]},E.zeroFormat=function(te){oe.zeroFormat=typeof te=="string"?te:null},E.nullFormat=function(te){oe.nullFormat=typeof te=="string"?te:null},E.defaultFormat=function(te){oe.defaultFormat=typeof te=="string"?te:"0.0"},E.register=function(te,me,Pe){if(me=me.toLowerCase(),this[te+"s"][me])throw new TypeError(me+" "+te+" already registered.");return this[te+"s"][me]=Pe,Pe},E.validate=function(te,me){var Pe,$,le,J,Ee,tt,Je,wt;if(typeof te!="string"&&(te+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",te)),te=te.trim(),te.match(/^\d+$/))return!0;if(te==="")return!1;try{Je=E.localeData(me)}catch(pt){Je=E.localeData(E.locale())}return le=Je.currency.symbol,Ee=Je.abbreviations,Pe=Je.delimiters.decimal,Je.delimiters.thousands==="."?$="\\.":$=Je.delimiters.thousands,wt=te.match(/^[^\d]+/),wt!==null&&(te=te.substr(1),wt[0]!==le)||(wt=te.match(/[^\d]+$/),wt!==null&&(te=te.slice(0,-1),wt[0]!==Ee.thousand&&wt[0]!==Ee.million&&wt[0]!==Ee.billion&&wt[0]!==Ee.trillion))?!1:(tt=new RegExp($+"{2}"),te.match(/[^\d.,]/g)?!1:(J=te.split(Pe),J.length>2?!1:J.length<2?!!J[0].match(/^\d+.*\d$/)&&!J[0].match(tt):J[0].length===1?!!J[0].match(/^\d+$/)&&!J[0].match(tt)&&!!J[1].match(/^\d+$/):!!J[0].match(/^\d+.*\d$/)&&!J[0].match(tt)&&!!J[1].match(/^\d+$/)))},E.fn=Ge.prototype={clone:function(){return E(this)},format:function(te,me){var Pe=this._value,$=te||oe.defaultFormat,le,J,Ee;if(me=me||Math.round,Pe===0&&oe.zeroFormat!==null)J=oe.zeroFormat;else if(Pe===null&&oe.nullFormat!==null)J=oe.nullFormat;else{for(le in se)if($.match(se[le].regexps.format)){Ee=se[le].format;break}Ee=Ee||E._.numberToFormat,J=Ee(Pe,$,me)}return J},value:function(){return this._value},input:function(){return this._input},set:function(te){return this._value=Number(te),this},add:function(te){var me=he.correctionFactor.call(null,this._value,te);function Pe($,le,J,Ee){return $+Math.round(me*le)}return this._value=he.reduce([this._value,te],Pe,0)/me,this},subtract:function(te){var me=he.correctionFactor.call(null,this._value,te);function Pe($,le,J,Ee){return $-Math.round(me*le)}return this._value=he.reduce([te],Pe,Math.round(this._value*me))/me,this},multiply:function(te){function me(Pe,$,le,J){var Ee=he.correctionFactor(Pe,$);return Math.round(Pe*Ee)*Math.round($*Ee)/Math.round(Ee*Ee)}return this._value=he.reduce([this._value,te],me,1),this},divide:function(te){function me(Pe,$,le,J){var Ee=he.correctionFactor(Pe,$);return Math.round(Pe*Ee)/Math.round($*Ee)}return this._value=he.reduce([this._value,te],me),this},difference:function(te){return Math.abs(E(this._value).subtract(te).value())}},E.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(te){var me=te%10;return~~(te%100/10)===1?"th":me===1?"st":me===2?"nd":me===3?"rd":"th"},currency:{symbol:"$"}}),function(){E.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(te,me,Pe){var $=E._.includes(me," BPS")?" ":"",le;return te=te*1e4,me=me.replace(/\s?BPS/,""),le=E._.numberToFormat(te,me,Pe),E._.includes(le,")")?(le=le.split(""),le.splice(-1,0,$+"BPS"),le=le.join("")):le=le+$+"BPS",le},unformat:function(te){return+(E._.stringToNumber(te)*1e-4).toFixed(15)}})}(),function(){var te={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},me={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},Pe=te.suffixes.concat(me.suffixes.filter(function(le){return te.suffixes.indexOf(le)<0})),$=Pe.join("|");$="("+$.replace("B","B(?!PS)")+")",E.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp($)},format:function(le,J,Ee){var tt,Je=E._.includes(J,"ib")?me:te,wt=E._.includes(J," b")||E._.includes(J," ib")?" ":"",pt,yt,Re;for(J=J.replace(/\s?i?b/,""),pt=0;pt<=Je.suffixes.length;pt++)if(yt=Math.pow(Je.base,pt),Re=Math.pow(Je.base,pt+1),le===null||le===0||le>=yt&&le<Re){wt+=Je.suffixes[pt],yt>0&&(le=le/yt);break}return tt=E._.numberToFormat(le,J,Ee),tt+wt},unformat:function(le){var J=E._.stringToNumber(le),Ee,tt;if(J){for(Ee=te.suffixes.length-1;Ee>=0;Ee--){if(E._.includes(le,te.suffixes[Ee])){tt=Math.pow(te.base,Ee);break}if(E._.includes(le,me.suffixes[Ee])){tt=Math.pow(me.base,Ee);break}}J*=tt||1}return J}})}(),function(){E.register("format","currency",{regexps:{format:/(\$)/},format:function(te,me,Pe){var $=E.locales[E.options.currentLocale],le={before:me.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:me.match(/([\+|\-|\)|\s|\$]*)$/)[0]},J,Ee,tt;for(me=me.replace(/\s?\$\s?/,""),J=E._.numberToFormat(te,me,Pe),te>=0?(le.before=le.before.replace(/[\-\(]/,""),le.after=le.after.replace(/[\-\)]/,"")):te<0&&!E._.includes(le.before,"-")&&!E._.includes(le.before,"(")&&(le.before="-"+le.before),tt=0;tt<le.before.length;tt++)switch(Ee=le.before[tt],Ee){case"$":J=E._.insert(J,$.currency.symbol,tt);break;case" ":J=E._.insert(J," ",tt+$.currency.symbol.length-1);break}for(tt=le.after.length-1;tt>=0;tt--)switch(Ee=le.after[tt],Ee){case"$":J=tt===le.after.length-1?J+$.currency.symbol:E._.insert(J,$.currency.symbol,-(le.after.length-(1+tt)));break;case" ":J=tt===le.after.length-1?J+" ":E._.insert(J," ",-(le.after.length-(1+tt)+$.currency.symbol.length-1));break}return J}})}(),function(){E.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(te,me,Pe){var $,le=typeof te=="number"&&!E._.isNaN(te)?te.toExponential():"0e+0",J=le.split("e");return me=me.replace(/e[\+|\-]{1}0/,""),$=E._.numberToFormat(Number(J[0]),me,Pe),$+"e"+J[1]},unformat:function(te){var me=E._.includes(te,"e+")?te.split("e+"):te.split("e-"),Pe=Number(me[0]),$=Number(me[1]);$=E._.includes(te,"e-")?$*=-1:$;function le(J,Ee,tt,Je){var wt=E._.correctionFactor(J,Ee),pt=J*wt*(Ee*wt)/(wt*wt);return pt}return E._.reduce([Pe,Math.pow(10,$)],le,1)}})}(),function(){E.register("format","ordinal",{regexps:{format:/(o)/},format:function(te,me,Pe){var $=E.locales[E.options.currentLocale],le,J=E._.includes(me," o")?" ":"";return me=me.replace(/\s?o/,""),J+=$.ordinal(te),le=E._.numberToFormat(te,me,Pe),le+J}})}(),function(){E.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(te,me,Pe){var $=E._.includes(me," %")?" ":"",le;return E.options.scalePercentBy100&&(te=te*100),me=me.replace(/\s?\%/,""),le=E._.numberToFormat(te,me,Pe),E._.includes(le,")")?(le=le.split(""),le.splice(-1,0,$+"%"),le=le.join("")):le=le+$+"%",le},unformat:function(te){var me=E._.stringToNumber(te);return E.options.scalePercentBy100?me*.01:me}})}(),function(){E.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(te,me,Pe){var $=Math.floor(te/60/60),le=Math.floor((te-$*60*60)/60),J=Math.round(te-$*60*60-le*60);return $+":"+(le<10?"0"+le:le)+":"+(J<10?"0"+J:J)},unformat:function(te){var me=te.split(":"),Pe=0;return me.length===3?(Pe=Pe+Number(me[0])*60*60,Pe=Pe+Number(me[1])*60,Pe=Pe+Number(me[2])):me.length===2&&(Pe=Pe+Number(me[0])*60,Pe=Pe+Number(me[1])),Number(Pe)}})}(),E})},3614:function(bt,G,L){"use strict";bt.exports=W;var K=L(80645);function W(Le){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Le)?Le:new Uint8Array(Le||0),this.pos=0,this.type=0,this.length=this.buf.length}W.Varint=0,W.Fixed64=1,W.Bytes=2,W.Fixed32=5;var E=65536*65536,he=1/E,ee=12,se=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");W.prototype={destroy:function(){this.buf=null},readFields:function(Le,_t,Me){for(Me=Me||this.length;this.pos<Me;){var nt=this.readVarint(),qe=nt>>3,Ye=this.pos;this.type=nt&7,Le(qe,_t,this),this.pos===Ye&&this.skip(nt)}return _t},readMessage:function(Le,_t){return this.readFields(Le,_t,this.readVarint()+this.pos)},readFixed32:function(){var Le=Re(this.buf,this.pos);return this.pos+=4,Le},readSFixed32:function(){var Le=Ue(this.buf,this.pos);return this.pos+=4,Le},readFixed64:function(){var Le=Re(this.buf,this.pos)+Re(this.buf,this.pos+4)*E;return this.pos+=8,Le},readSFixed64:function(){var Le=Re(this.buf,this.pos)+Ue(this.buf,this.pos+4)*E;return this.pos+=8,Le},readFloat:function(){var Le=K.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Le},readDouble:function(){var Le=K.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Le},readVarint:function(Le){var _t=this.buf,Me,nt;return nt=_t[this.pos++],Me=nt&127,nt<128||(nt=_t[this.pos++],Me|=(nt&127)<<7,nt<128)||(nt=_t[this.pos++],Me|=(nt&127)<<14,nt<128)||(nt=_t[this.pos++],Me|=(nt&127)<<21,nt<128)?Me:(nt=_t[this.pos],Me|=(nt&15)<<28,ue(Me,Le,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Le=this.readVarint();return Le%2===1?(Le+1)/-2:Le/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Le=this.readVarint()+this.pos,_t=this.pos;return this.pos=Le,Le-_t>=ee&&se?lt(this.buf,_t,Le):We(this.buf,_t,Le)},readBytes:function(){var Le=this.readVarint()+this.pos,_t=this.buf.subarray(this.pos,Le);return this.pos=Le,_t},readPackedVarint:function(Le,_t){if(this.type!==W.Bytes)return Le.push(this.readVarint(_t));var Me=be(this);for(Le=Le||[];this.pos<Me;)Le.push(this.readVarint(_t));return Le},readPackedSVarint:function(Le){if(this.type!==W.Bytes)return Le.push(this.readSVarint());var _t=be(this);for(Le=Le||[];this.pos<_t;)Le.push(this.readSVarint());return Le},readPackedBoolean:function(Le){if(this.type!==W.Bytes)return Le.push(this.readBoolean());var _t=be(this);for(Le=Le||[];this.pos<_t;)Le.push(this.readBoolean());return Le},readPackedFloat:function(Le){if(this.type!==W.Bytes)return Le.push(this.readFloat());var _t=be(this);for(Le=Le||[];this.pos<_t;)Le.push(this.readFloat());return Le},readPackedDouble:function(Le){if(this.type!==W.Bytes)return Le.push(this.readDouble());var _t=be(this);for(Le=Le||[];this.pos<_t;)Le.push(this.readDouble());return Le},readPackedFixed32:function(Le){if(this.type!==W.Bytes)return Le.push(this.readFixed32());var _t=be(this);for(Le=Le||[];this.pos<_t;)Le.push(this.readFixed32());return Le},readPackedSFixed32:function(Le){if(this.type!==W.Bytes)return Le.push(this.readSFixed32());var _t=be(this);for(Le=Le||[];this.pos<_t;)Le.push(this.readSFixed32());return Le},readPackedFixed64:function(Le){if(this.type!==W.Bytes)return Le.push(this.readFixed64());var _t=be(this);for(Le=Le||[];this.pos<_t;)Le.push(this.readFixed64());return Le},readPackedSFixed64:function(Le){if(this.type!==W.Bytes)return Le.push(this.readSFixed64());var _t=be(this);for(Le=Le||[];this.pos<_t;)Le.push(this.readSFixed64());return Le},skip:function(Le){var _t=Le&7;if(_t===W.Varint)for(;this.buf[this.pos++]>127;);else if(_t===W.Bytes)this.pos=this.readVarint()+this.pos;else if(_t===W.Fixed32)this.pos+=4;else if(_t===W.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+_t)},writeTag:function(Le,_t){this.writeVarint(Le<<3|_t)},realloc:function(Le){for(var _t=this.length||16;_t<this.pos+Le;)_t*=2;if(_t!==this.length){var Me=new Uint8Array(_t);Me.set(this.buf),this.buf=Me,this.length=_t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Le){this.realloc(4),Ce(this.buf,Le,this.pos),this.pos+=4},writeSFixed32:function(Le){this.realloc(4),Ce(this.buf,Le,this.pos),this.pos+=4},writeFixed64:function(Le){this.realloc(8),Ce(this.buf,Le&-1,this.pos),Ce(this.buf,Math.floor(Le*he),this.pos+4),this.pos+=8},writeSFixed64:function(Le){this.realloc(8),Ce(this.buf,Le&-1,this.pos),Ce(this.buf,Math.floor(Le*he),this.pos+4),this.pos+=8},writeVarint:function(Le){if(Le=+Le||0,Le>268435455||Le<0){Ge(Le,this);return}this.realloc(4),this.buf[this.pos++]=Le&127|(Le>127?128:0),!(Le<=127)&&(this.buf[this.pos++]=(Le>>>=7)&127|(Le>127?128:0),!(Le<=127)&&(this.buf[this.pos++]=(Le>>>=7)&127|(Le>127?128:0),!(Le<=127)&&(this.buf[this.pos++]=Le>>>7&127)))},writeSVarint:function(Le){this.writeVarint(Le<0?-Le*2-1:Le*2)},writeBoolean:function(Le){this.writeVarint(!!Le)},writeString:function(Le){Le=String(Le),this.realloc(Le.length*4),this.pos++;var _t=this.pos;this.pos=tn(this.buf,Le,this.pos);var Me=this.pos-_t;Me>=128&&Pe(_t,Me,this),this.pos=_t-1,this.writeVarint(Me),this.pos+=Me},writeFloat:function(Le){this.realloc(4),K.write(this.buf,Le,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Le){this.realloc(8),K.write(this.buf,Le,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Le){var _t=Le.length;this.writeVarint(_t),this.realloc(_t);for(var Me=0;Me<_t;Me++)this.buf[this.pos++]=Le[Me]},writeRawMessage:function(Le,_t){this.pos++;var Me=this.pos;Le(_t,this);var nt=this.pos-Me;nt>=128&&Pe(Me,nt,this),this.pos=Me-1,this.writeVarint(nt),this.pos+=nt},writeMessage:function(Le,_t,Me){this.writeTag(Le,W.Bytes),this.writeRawMessage(_t,Me)},writePackedVarint:function(Le,_t){_t.length&&this.writeMessage(Le,$,_t)},writePackedSVarint:function(Le,_t){_t.length&&this.writeMessage(Le,le,_t)},writePackedBoolean:function(Le,_t){_t.length&&this.writeMessage(Le,tt,_t)},writePackedFloat:function(Le,_t){_t.length&&this.writeMessage(Le,J,_t)},writePackedDouble:function(Le,_t){_t.length&&this.writeMessage(Le,Ee,_t)},writePackedFixed32:function(Le,_t){_t.length&&this.writeMessage(Le,Je,_t)},writePackedSFixed32:function(Le,_t){_t.length&&this.writeMessage(Le,wt,_t)},writePackedFixed64:function(Le,_t){_t.length&&this.writeMessage(Le,pt,_t)},writePackedSFixed64:function(Le,_t){_t.length&&this.writeMessage(Le,yt,_t)},writeBytesField:function(Le,_t){this.writeTag(Le,W.Bytes),this.writeBytes(_t)},writeFixed32Field:function(Le,_t){this.writeTag(Le,W.Fixed32),this.writeFixed32(_t)},writeSFixed32Field:function(Le,_t){this.writeTag(Le,W.Fixed32),this.writeSFixed32(_t)},writeFixed64Field:function(Le,_t){this.writeTag(Le,W.Fixed64),this.writeFixed64(_t)},writeSFixed64Field:function(Le,_t){this.writeTag(Le,W.Fixed64),this.writeSFixed64(_t)},writeVarintField:function(Le,_t){this.writeTag(Le,W.Varint),this.writeVarint(_t)},writeSVarintField:function(Le,_t){this.writeTag(Le,W.Varint),this.writeSVarint(_t)},writeStringField:function(Le,_t){this.writeTag(Le,W.Bytes),this.writeString(_t)},writeFloatField:function(Le,_t){this.writeTag(Le,W.Fixed32),this.writeFloat(_t)},writeDoubleField:function(Le,_t){this.writeTag(Le,W.Fixed64),this.writeDouble(_t)},writeBooleanField:function(Le,_t){this.writeVarintField(Le,!!_t)}};function ue(Le,_t,Me){var nt=Me.buf,qe,Ye;if(Ye=nt[Me.pos++],qe=(Ye&112)>>4,Ye<128||(Ye=nt[Me.pos++],qe|=(Ye&127)<<3,Ye<128)||(Ye=nt[Me.pos++],qe|=(Ye&127)<<10,Ye<128)||(Ye=nt[Me.pos++],qe|=(Ye&127)<<17,Ye<128)||(Ye=nt[Me.pos++],qe|=(Ye&127)<<24,Ye<128)||(Ye=nt[Me.pos++],qe|=(Ye&1)<<31,Ye<128))return oe(Le,qe,_t);throw new Error("Expected varint not more than 10 bytes")}function be(Le){return Le.type===W.Bytes?Le.readVarint()+Le.pos:Le.pos+1}function oe(Le,_t,Me){return Me?_t*4294967296+(Le>>>0):(_t>>>0)*4294967296+(Le>>>0)}function Ge(Le,_t){var Me,nt;if(Le>=0?(Me=Le%4294967296|0,nt=Le/4294967296|0):(Me=~(-Le%4294967296),nt=~(-Le/4294967296),Me^4294967295?Me=Me+1|0:(Me=0,nt=nt+1|0)),Le>=18446744073709552e3||Le<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_t.realloc(10),te(Me,nt,_t),me(nt,_t)}function te(Le,_t,Me){Me.buf[Me.pos++]=Le&127|128,Le>>>=7,Me.buf[Me.pos++]=Le&127|128,Le>>>=7,Me.buf[Me.pos++]=Le&127|128,Le>>>=7,Me.buf[Me.pos++]=Le&127|128,Le>>>=7,Me.buf[Me.pos]=Le&127}function me(Le,_t){var Me=(Le&7)<<4;_t.buf[_t.pos++]|=Me|((Le>>>=3)?128:0),Le&&(_t.buf[_t.pos++]=Le&127|((Le>>>=7)?128:0),Le&&(_t.buf[_t.pos++]=Le&127|((Le>>>=7)?128:0),Le&&(_t.buf[_t.pos++]=Le&127|((Le>>>=7)?128:0),Le&&(_t.buf[_t.pos++]=Le&127|((Le>>>=7)?128:0),Le&&(_t.buf[_t.pos++]=Le&127)))))}function Pe(Le,_t,Me){var nt=_t<=16383?1:_t<=2097151?2:_t<=268435455?3:Math.floor(Math.log(_t)/(Math.LN2*7));Me.realloc(nt);for(var qe=Me.pos-1;qe>=Le;qe--)Me.buf[qe+nt]=Me.buf[qe]}function $(Le,_t){for(var Me=0;Me<Le.length;Me++)_t.writeVarint(Le[Me])}function le(Le,_t){for(var Me=0;Me<Le.length;Me++)_t.writeSVarint(Le[Me])}function J(Le,_t){for(var Me=0;Me<Le.length;Me++)_t.writeFloat(Le[Me])}function Ee(Le,_t){for(var Me=0;Me<Le.length;Me++)_t.writeDouble(Le[Me])}function tt(Le,_t){for(var Me=0;Me<Le.length;Me++)_t.writeBoolean(Le[Me])}function Je(Le,_t){for(var Me=0;Me<Le.length;Me++)_t.writeFixed32(Le[Me])}function wt(Le,_t){for(var Me=0;Me<Le.length;Me++)_t.writeSFixed32(Le[Me])}function pt(Le,_t){for(var Me=0;Me<Le.length;Me++)_t.writeFixed64(Le[Me])}function yt(Le,_t){for(var Me=0;Me<Le.length;Me++)_t.writeSFixed64(Le[Me])}function Re(Le,_t){return(Le[_t]|Le[_t+1]<<8|Le[_t+2]<<16)+Le[_t+3]*16777216}function Ce(Le,_t,Me){Le[Me]=_t,Le[Me+1]=_t>>>8,Le[Me+2]=_t>>>16,Le[Me+3]=_t>>>24}function Ue(Le,_t){return(Le[_t]|Le[_t+1]<<8|Le[_t+2]<<16)+(Le[_t+3]<<24)}function We(Le,_t,Me){for(var nt="",qe=_t;qe<Me;){var Ye=Le[qe],Lt=null,xt=Ye>239?4:Ye>223?3:Ye>191?2:1;if(qe+xt>Me)break;var Ie,Gt,gn;xt===1?Ye<128&&(Lt=Ye):xt===2?(Ie=Le[qe+1],(Ie&192)===128&&(Lt=(Ye&31)<<6|Ie&63,Lt<=127&&(Lt=null))):xt===3?(Ie=Le[qe+1],Gt=Le[qe+2],(Ie&192)===128&&(Gt&192)===128&&(Lt=(Ye&15)<<12|(Ie&63)<<6|Gt&63,(Lt<=2047||Lt>=55296&&Lt<=57343)&&(Lt=null))):xt===4&&(Ie=Le[qe+1],Gt=Le[qe+2],gn=Le[qe+3],(Ie&192)===128&&(Gt&192)===128&&(gn&192)===128&&(Lt=(Ye&15)<<18|(Ie&63)<<12|(Gt&63)<<6|gn&63,(Lt<=65535||Lt>=1114112)&&(Lt=null))),Lt===null?(Lt=65533,xt=1):Lt>65535&&(Lt-=65536,nt+=String.fromCharCode(Lt>>>10&1023|55296),Lt=56320|Lt&1023),nt+=String.fromCharCode(Lt),qe+=xt}return nt}function lt(Le,_t,Me){return se.decode(Le.subarray(_t,Me))}function tn(Le,_t,Me){for(var nt=0,qe,Ye;nt<_t.length;nt++){if(qe=_t.charCodeAt(nt),qe>55295&&qe<57344)if(Ye)if(qe<56320){Le[Me++]=239,Le[Me++]=191,Le[Me++]=189,Ye=qe;continue}else qe=Ye-55296<<10|qe-56320|65536,Ye=null;else{qe>56319||nt+1===_t.length?(Le[Me++]=239,Le[Me++]=191,Le[Me++]=189):Ye=qe;continue}else Ye&&(Le[Me++]=239,Le[Me++]=191,Le[Me++]=189,Ye=null);qe<128?Le[Me++]=qe:(qe<2048?Le[Me++]=qe>>6|192:(qe<65536?Le[Me++]=qe>>12|224:(Le[Me++]=qe>>18|240,Le[Me++]=qe>>12&63|128),Le[Me++]=qe>>6&63|128),Le[Me++]=qe&63|128)}return Me}},73807:function(bt){"use strict";var G=bt.exports;bt.exports.isNumber=function(L){return typeof L=="number"},bt.exports.findMin=function(L){if(L.length===0)return 1/0;for(var K=L[0],W=1;W<L.length;W++)K=Math.min(K,L[W]);return K},bt.exports.findMax=function(L){if(L.length===0)return-1/0;for(var K=L[0],W=1;W<L.length;W++)K=Math.max(K,L[W]);return K},bt.exports.findMinMulti=function(L){for(var K=G.findMin(L[0]),W=1;W<L.length;W++)K=Math.min(K,G.findMin(L[W]));return K},bt.exports.findMaxMulti=function(L){for(var K=G.findMax(L[0]),W=1;W<L.length;W++)K=Math.max(K,G.findMax(L[W]));return K},bt.exports.inside=function(L,K,W){return L<=W&&W<=K}},53843:function(bt,G,L){"use strict";var K=50,W=2,E=Math.log(2),he=bt.exports,ee=L(73807);function se(be){return 1-Math.abs(be)}bt.exports.getUnifiedMinMax=function(be,oe){return he.getUnifiedMinMaxMulti([be],oe)},bt.exports.getUnifiedMinMaxMulti=function(be,oe){oe=oe||{};var Ge=!1,te=!1,me=ee.isNumber(oe.width)?oe.width:W,Pe=ee.isNumber(oe.size)?oe.size:K,$=ee.isNumber(oe.min)?oe.min:(Ge=!0,ee.findMinMulti(be)),le=ee.isNumber(oe.max)?oe.max:(te=!0,ee.findMaxMulti(be)),J=le-$,Ee=J/(Pe-1);return Ge&&($=$-2*me*Ee),te&&(le=le+2*me*Ee),{min:$,max:le}},bt.exports.create=function(be,oe){if(oe=oe||{},!be||be.length===0)return[];var Ge=ee.isNumber(oe.size)?oe.size:K,te=ee.isNumber(oe.width)?oe.width:W,me=he.getUnifiedMinMax(be,{size:Ge,width:te,min:oe.min,max:oe.max}),Pe=me.min,$=me.max,le=$-Pe,J=le/(Ge-1);if(le===0)return[{x:Pe,y:1}];for(var Ee=[],tt=0;tt<Ge;tt++)Ee.push({x:Pe+tt*J,y:0});var Je=function(lt){return Math.floor((lt-Pe)/J)},wt=ue(se,te),pt=wt[te],yt=wt[te-1]-wt[te-2],Re=0;be.forEach(function(lt){var tn=Je(lt);if(!(tn+te<0||tn-te>=Ee.length)){var Le=Math.max(tn-te,0),_t=tn,Me=Math.min(tn+te,Ee.length-1),nt=Le-(tn-te),qe=tn+te-Me,Ye=wt[-te-1+nt]||0,Lt=wt[-te-1+qe]||0,xt=pt/(pt-Ye-Lt);nt>0&&(Re+=xt*(nt-1)*yt);var Ie=Math.max(0,tn-te+1);ee.inside(0,Ee.length-1,Ie)&&(Ee[Ie].y+=xt*1*yt),ee.inside(0,Ee.length-1,_t+1)&&(Ee[_t+1].y-=xt*2*yt),ee.inside(0,Ee.length-1,Me+1)&&(Ee[Me+1].y+=xt*1*yt)}});var Ce=Re,Ue=0,We=0;return Ee.forEach(function(lt){Ue+=lt.y,Ce+=Ue,lt.y=Ce,We+=Ce}),We>0&&Ee.forEach(function(lt){lt.y/=We}),Ee};function ue(be,oe){for(var Ge={},te=0,me=-oe;me<=oe;me++)te+=be(me/oe),Ge[me]=te;return Ge}bt.exports.getExpectedValueFromPdf=function(be){if(!(!be||be.length===0)){var oe=0;return be.forEach(function(Ge){oe+=Ge.x*Ge.y}),oe}},bt.exports.getXWithLeftTailArea=function(be,oe){if(!(!be||be.length===0)){for(var Ge=0,te=0,me=0;me<be.length&&(te=me,Ge+=be[me].y,!(Ge>=oe));me++);return be[te].x}},bt.exports.getPerplexity=function(be){if(!(!be||be.length===0)){var oe=0;return be.forEach(function(Ge){var te=Math.log(Ge.y);isFinite(te)&&(oe+=Ge.y*te)}),oe=-oe/E,Math.pow(2,oe)}}},32676:function(bt,G,L){var K=L(34155);(function(W,E){bt.exports=E()})(this,function(){"use strict";function W(dt,xe){var Be={label:0,sent:function(){if(Ot[0]&1)throw Ot[1];return Ot[1]},trys:[],ops:[]},st,Dt,Ot,Sn;return Sn={next:er(0),throw:er(1),return:er(2)},typeof Symbol=="function"&&(Sn[Symbol.iterator]=function(){return this}),Sn;function er($n){return function(Oe){return br([$n,Oe])}}function br($n){if(st)throw new TypeError("Generator is already executing.");for(;Be;)try{if(st=1,Dt&&(Ot=$n[0]&2?Dt.return:$n[0]?Dt.throw||((Ot=Dt.return)&&Ot.call(Dt),0):Dt.next)&&!(Ot=Ot.call(Dt,$n[1])).done)return Ot;switch(Dt=0,Ot&&($n=[$n[0]&2,Ot.value]),$n[0]){case 0:case 1:Ot=$n;break;case 4:return Be.label++,{value:$n[1],done:!1};case 5:Be.label++,Dt=$n[1],$n=[0];continue;case 7:$n=Be.ops.pop(),Be.trys.pop();continue;default:if(Ot=Be.trys,!(Ot=Ot.length>0&&Ot[Ot.length-1])&&($n[0]===6||$n[0]===2)){Be=0;continue}if($n[0]===3&&(!Ot||$n[1]>Ot[0]&&$n[1]<Ot[3])){Be.label=$n[1];break}if($n[0]===6&&Be.label<Ot[1]){Be.label=Ot[1],Ot=$n;break}if(Ot&&Be.label<Ot[2]){Be.label=Ot[2],Be.ops.push($n);break}Ot[2]&&Be.ops.pop(),Be.trys.pop();continue}$n=xe.call(dt,Be)}catch(Oe){$n=[6,Oe],Dt=0}finally{st=Ot=0}if($n[0]&5)throw $n[1];return{value:$n[0]?$n[1]:void 0,done:!0}}}var E=function(){function dt(xe,Be){this.next=null,this.key=xe,this.data=Be,this.left=null,this.right=null}return dt}();function he(dt,xe){return dt>xe?1:dt<xe?-1:0}function ee(dt,xe,Be){for(var st=new E(null,null),Dt=st,Ot=st;;){var Sn=Be(dt,xe.key);if(Sn<0){if(xe.left===null)break;if(Be(dt,xe.left.key)<0){var er=xe.left;if(xe.left=er.right,er.right=xe,xe=er,xe.left===null)break}Ot.left=xe,Ot=xe,xe=xe.left}else if(Sn>0){if(xe.right===null)break;if(Be(dt,xe.right.key)>0){var er=xe.right;if(xe.right=er.left,er.left=xe,xe=er,xe.right===null)break}Dt.right=xe,Dt=xe,xe=xe.right}else break}return Dt.right=xe.left,Ot.left=xe.right,xe.left=st.right,xe.right=st.left,xe}function se(dt,xe,Be,st){var Dt=new E(dt,xe);if(Be===null)return Dt.left=Dt.right=null,Dt;Be=ee(dt,Be,st);var Ot=st(dt,Be.key);return Ot<0?(Dt.left=Be.left,Dt.right=Be,Be.left=null):Ot>=0&&(Dt.right=Be.right,Dt.left=Be,Be.right=null),Dt}function ue(dt,xe,Be){var st=null,Dt=null;if(xe){xe=ee(dt,xe,Be);var Ot=Be(xe.key,dt);Ot===0?(st=xe.left,Dt=xe.right):Ot<0?(Dt=xe.right,xe.right=null,st=xe):(st=xe.left,xe.left=null,Dt=xe)}return{left:st,right:Dt}}function be(dt,xe,Be){return xe===null?dt:(dt===null||(xe=ee(dt.key,xe,Be),xe.left=dt),xe)}function oe(dt,xe,Be,st,Dt){if(dt){st(""+xe+(Be?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+Dt(dt)+`
`);var Ot=xe+(Be?"    ":"\u2502   ");dt.left&&oe(dt.left,Ot,!1,st,Dt),dt.right&&oe(dt.right,Ot,!0,st,Dt)}}var Ge=function(){function dt(xe){xe===void 0&&(xe=he),this._root=null,this._size=0,this._comparator=xe}return dt.prototype.insert=function(xe,Be){return this._size++,this._root=se(xe,Be,this._root,this._comparator)},dt.prototype.add=function(xe,Be){var st=new E(xe,Be);this._root===null&&(st.left=st.right=null,this._size++,this._root=st);var Dt=this._comparator,Ot=ee(xe,this._root,Dt),Sn=Dt(xe,Ot.key);return Sn===0?this._root=Ot:(Sn<0?(st.left=Ot.left,st.right=Ot,Ot.left=null):Sn>0&&(st.right=Ot.right,st.left=Ot,Ot.right=null),this._size++,this._root=st),this._root},dt.prototype.remove=function(xe){this._root=this._remove(xe,this._root,this._comparator)},dt.prototype._remove=function(xe,Be,st){var Dt;if(Be===null)return null;Be=ee(xe,Be,st);var Ot=st(xe,Be.key);return Ot===0?(Be.left===null?Dt=Be.right:(Dt=ee(xe,Be.left,st),Dt.right=Be.right),this._size--,Dt):Be},dt.prototype.pop=function(){var xe=this._root;if(xe){for(;xe.left;)xe=xe.left;return this._root=ee(xe.key,this._root,this._comparator),this._root=this._remove(xe.key,this._root,this._comparator),{key:xe.key,data:xe.data}}return null},dt.prototype.findStatic=function(xe){for(var Be=this._root,st=this._comparator;Be;){var Dt=st(xe,Be.key);if(Dt===0)return Be;Dt<0?Be=Be.left:Be=Be.right}return null},dt.prototype.find=function(xe){return this._root&&(this._root=ee(xe,this._root,this._comparator),this._comparator(xe,this._root.key)!==0)?null:this._root},dt.prototype.contains=function(xe){for(var Be=this._root,st=this._comparator;Be;){var Dt=st(xe,Be.key);if(Dt===0)return!0;Dt<0?Be=Be.left:Be=Be.right}return!1},dt.prototype.forEach=function(xe,Be){for(var st=this._root,Dt=[],Ot=!1;!Ot;)st!==null?(Dt.push(st),st=st.left):Dt.length!==0?(st=Dt.pop(),xe.call(Be,st),st=st.right):Ot=!0;return this},dt.prototype.range=function(xe,Be,st,Dt){for(var Ot=[],Sn=this._comparator,er=this._root,br;Ot.length!==0||er;)if(er)Ot.push(er),er=er.left;else{if(er=Ot.pop(),br=Sn(er.key,Be),br>0)break;if(Sn(er.key,xe)>=0&&st.call(Dt,er))return this;er=er.right}return this},dt.prototype.keys=function(){var xe=[];return this.forEach(function(Be){var st=Be.key;return xe.push(st)}),xe},dt.prototype.values=function(){var xe=[];return this.forEach(function(Be){var st=Be.data;return xe.push(st)}),xe},dt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},dt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},dt.prototype.minNode=function(xe){if(xe===void 0&&(xe=this._root),xe)for(;xe.left;)xe=xe.left;return xe},dt.prototype.maxNode=function(xe){if(xe===void 0&&(xe=this._root),xe)for(;xe.right;)xe=xe.right;return xe},dt.prototype.at=function(xe){for(var Be=this._root,st=!1,Dt=0,Ot=[];!st;)if(Be)Ot.push(Be),Be=Be.left;else if(Ot.length>0){if(Be=Ot.pop(),Dt===xe)return Be;Dt++,Be=Be.right}else st=!0;return null},dt.prototype.next=function(xe){var Be=this._root,st=null;if(xe.right){for(st=xe.right;st.left;)st=st.left;return st}for(var Dt=this._comparator;Be;){var Ot=Dt(xe.key,Be.key);if(Ot===0)break;Ot<0?(st=Be,Be=Be.left):Be=Be.right}return st},dt.prototype.prev=function(xe){var Be=this._root,st=null;if(xe.left!==null){for(st=xe.left;st.right;)st=st.right;return st}for(var Dt=this._comparator;Be;){var Ot=Dt(xe.key,Be.key);if(Ot===0)break;Ot<0?Be=Be.left:(st=Be,Be=Be.right)}return st},dt.prototype.clear=function(){return this._root=null,this._size=0,this},dt.prototype.toList=function(){return Pe(this._root)},dt.prototype.load=function(xe,Be,st){Be===void 0&&(Be=[]),st===void 0&&(st=!1);var Dt=xe.length,Ot=this._comparator;if(st&&J(xe,Be,0,Dt-1,Ot),this._root===null)this._root=te(xe,Be,0,Dt),this._size=Dt;else{var Sn=le(this.toList(),me(xe,Be),Ot);Dt=this._size+Dt,this._root=$({head:Sn},0,Dt)}return this},dt.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(dt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),dt.prototype.toString=function(xe){xe===void 0&&(xe=function(st){return String(st.key)});var Be=[];return oe(this._root,"",!0,function(st){return Be.push(st)},xe),Be.join("")},dt.prototype.update=function(xe,Be,st){var Dt=this._comparator,Ot=ue(xe,this._root,Dt),Sn=Ot.left,er=Ot.right;Dt(xe,Be)<0?er=se(Be,st,er,Dt):Sn=se(Be,st,Sn,Dt),this._root=be(Sn,er,Dt)},dt.prototype.split=function(xe){return ue(xe,this._root,this._comparator)},dt.prototype[Symbol.iterator]=function(){var xe,Be,st;return W(this,function(Dt){switch(Dt.label){case 0:xe=this._root,Be=[],st=!1,Dt.label=1;case 1:return st?[3,6]:xe===null?[3,2]:(Be.push(xe),xe=xe.left,[3,5]);case 2:return Be.length===0?[3,4]:(xe=Be.pop(),[4,xe]);case 3:return Dt.sent(),xe=xe.right,[3,5];case 4:st=!0,Dt.label=5;case 5:return[3,1];case 6:return[2]}})},dt}();function te(dt,xe,Be,st){var Dt=st-Be;if(Dt>0){var Ot=Be+Math.floor(Dt/2),Sn=dt[Ot],er=xe[Ot],br=new E(Sn,er);return br.left=te(dt,xe,Be,Ot),br.right=te(dt,xe,Ot+1,st),br}return null}function me(dt,xe){for(var Be=new E(null,null),st=Be,Dt=0;Dt<dt.length;Dt++)st=st.next=new E(dt[Dt],xe[Dt]);return st.next=null,Be.next}function Pe(dt){for(var xe=dt,Be=[],st=!1,Dt=new E(null,null),Ot=Dt;!st;)xe?(Be.push(xe),xe=xe.left):Be.length>0?(xe=Ot=Ot.next=Be.pop(),xe=xe.right):st=!0;return Ot.next=null,Dt.next}function $(dt,xe,Be){var st=Be-xe;if(st>0){var Dt=xe+Math.floor(st/2),Ot=$(dt,xe,Dt),Sn=dt.head;return Sn.left=Ot,dt.head=dt.head.next,Sn.right=$(dt,Dt+1,Be),Sn}return null}function le(dt,xe,Be){for(var st=new E(null,null),Dt=st,Ot=dt,Sn=xe;Ot!==null&&Sn!==null;)Be(Ot.key,Sn.key)<0?(Dt.next=Ot,Ot=Ot.next):(Dt.next=Sn,Sn=Sn.next),Dt=Dt.next;return Ot!==null?Dt.next=Ot:Sn!==null&&(Dt.next=Sn),st.next}function J(dt,xe,Be,st,Dt){if(!(Be>=st)){for(var Ot=dt[Be+st>>1],Sn=Be-1,er=st+1;;){do Sn++;while(Dt(dt[Sn],Ot)<0);do er--;while(Dt(dt[er],Ot)>0);if(Sn>=er)break;var br=dt[Sn];dt[Sn]=dt[er],dt[er]=br,br=xe[Sn],xe[Sn]=xe[er],xe[er]=br}J(dt,xe,Be,er,Dt),J(dt,xe,er+1,st,Dt)}}const Ee=(dt,xe)=>dt.ll.x<=xe.x&&xe.x<=dt.ur.x&&dt.ll.y<=xe.y&&xe.y<=dt.ur.y,tt=(dt,xe)=>{if(xe.ur.x<dt.ll.x||dt.ur.x<xe.ll.x||xe.ur.y<dt.ll.y||dt.ur.y<xe.ll.y)return null;const Be=dt.ll.x<xe.ll.x?xe.ll.x:dt.ll.x,st=dt.ur.x<xe.ur.x?dt.ur.x:xe.ur.x,Dt=dt.ll.y<xe.ll.y?xe.ll.y:dt.ll.y,Ot=dt.ur.y<xe.ur.y?dt.ur.y:xe.ur.y;return{ll:{x:Be,y:Dt},ur:{x:st,y:Ot}}};let Je=Number.EPSILON;Je===void 0&&(Je=Math.pow(2,-52));const wt=Je*Je,pt=(dt,xe)=>{if(-Je<dt&&dt<Je&&-Je<xe&&xe<Je)return 0;const Be=dt-xe;return Be*Be<wt*dt*xe?0:dt<xe?-1:1};class yt{constructor(){this.reset()}reset(){this.xRounder=new Re,this.yRounder=new Re}round(xe,Be){return{x:this.xRounder.round(xe),y:this.yRounder.round(Be)}}}class Re{constructor(){this.tree=new Ge,this.round(0)}round(xe){const Be=this.tree.add(xe),st=this.tree.prev(Be);if(st!==null&&pt(Be.key,st.key)===0)return this.tree.remove(xe),st.key;const Dt=this.tree.next(Be);return Dt!==null&&pt(Be.key,Dt.key)===0?(this.tree.remove(xe),Dt.key):xe}}const Ce=new yt,Ue=11102230246251565e-32,We=134217729,lt=(3+8*Ue)*Ue;function tn(dt,xe,Be,st,Dt){let Ot,Sn,er,br,$n=xe[0],Oe=st[0],we=0,Ve=0;Oe>$n==Oe>-$n?(Ot=$n,$n=xe[++we]):(Ot=Oe,Oe=st[++Ve]);let it=0;if(we<dt&&Ve<Be)for(Oe>$n==Oe>-$n?(Sn=$n+Ot,er=Ot-(Sn-$n),$n=xe[++we]):(Sn=Oe+Ot,er=Ot-(Sn-Oe),Oe=st[++Ve]),Ot=Sn,er!==0&&(Dt[it++]=er);we<dt&&Ve<Be;)Oe>$n==Oe>-$n?(Sn=Ot+$n,br=Sn-Ot,er=Ot-(Sn-br)+($n-br),$n=xe[++we]):(Sn=Ot+Oe,br=Sn-Ot,er=Ot-(Sn-br)+(Oe-br),Oe=st[++Ve]),Ot=Sn,er!==0&&(Dt[it++]=er);for(;we<dt;)Sn=Ot+$n,br=Sn-Ot,er=Ot-(Sn-br)+($n-br),$n=xe[++we],Ot=Sn,er!==0&&(Dt[it++]=er);for(;Ve<Be;)Sn=Ot+Oe,br=Sn-Ot,er=Ot-(Sn-br)+(Oe-br),Oe=st[++Ve],Ot=Sn,er!==0&&(Dt[it++]=er);return(Ot!==0||it===0)&&(Dt[it++]=Ot),it}function Le(dt,xe){let Be=xe[0];for(let st=1;st<dt;st++)Be+=xe[st];return Be}function _t(dt){return new Float64Array(dt)}const Me=(3+16*Ue)*Ue,nt=(2+12*Ue)*Ue,qe=(9+64*Ue)*Ue*Ue,Ye=_t(4),Lt=_t(8),xt=_t(12),Ie=_t(16),Gt=_t(4);function gn(dt,xe,Be,st,Dt,Ot,Sn){let er,br,$n,Oe,we,Ve,it,At,qt,un,St,Jt,Qn,Er,Gr,mr,Hr,wi;const Pi=dt-Dt,wr=Be-Dt,gi=xe-Ot,di=st-Ot;Er=Pi*di,Ve=We*Pi,it=Ve-(Ve-Pi),At=Pi-it,Ve=We*di,qt=Ve-(Ve-di),un=di-qt,Gr=At*un-(Er-it*qt-At*qt-it*un),mr=gi*wr,Ve=We*gi,it=Ve-(Ve-gi),At=gi-it,Ve=We*wr,qt=Ve-(Ve-wr),un=wr-qt,Hr=At*un-(mr-it*qt-At*qt-it*un),St=Gr-Hr,we=Gr-St,Ye[0]=Gr-(St+we)+(we-Hr),Jt=Er+St,we=Jt-Er,Qn=Er-(Jt-we)+(St-we),St=Qn-mr,we=Qn-St,Ye[1]=Qn-(St+we)+(we-mr),wi=Jt+St,we=wi-Jt,Ye[2]=Jt-(wi-we)+(St-we),Ye[3]=wi;let xi=Le(4,Ye),Fo=nt*Sn;if(xi>=Fo||-xi>=Fo||(we=dt-Pi,er=dt-(Pi+we)+(we-Dt),we=Be-wr,$n=Be-(wr+we)+(we-Dt),we=xe-gi,br=xe-(gi+we)+(we-Ot),we=st-di,Oe=st-(di+we)+(we-Ot),er===0&&br===0&&$n===0&&Oe===0)||(Fo=qe*Sn+lt*Math.abs(xi),xi+=Pi*Oe+di*er-(gi*$n+wr*br),xi>=Fo||-xi>=Fo))return xi;Er=er*di,Ve=We*er,it=Ve-(Ve-er),At=er-it,Ve=We*di,qt=Ve-(Ve-di),un=di-qt,Gr=At*un-(Er-it*qt-At*qt-it*un),mr=br*wr,Ve=We*br,it=Ve-(Ve-br),At=br-it,Ve=We*wr,qt=Ve-(Ve-wr),un=wr-qt,Hr=At*un-(mr-it*qt-At*qt-it*un),St=Gr-Hr,we=Gr-St,Gt[0]=Gr-(St+we)+(we-Hr),Jt=Er+St,we=Jt-Er,Qn=Er-(Jt-we)+(St-we),St=Qn-mr,we=Qn-St,Gt[1]=Qn-(St+we)+(we-mr),wi=Jt+St,we=wi-Jt,Gt[2]=Jt-(wi-we)+(St-we),Gt[3]=wi;const Ai=tn(4,Ye,4,Gt,Lt);Er=Pi*Oe,Ve=We*Pi,it=Ve-(Ve-Pi),At=Pi-it,Ve=We*Oe,qt=Ve-(Ve-Oe),un=Oe-qt,Gr=At*un-(Er-it*qt-At*qt-it*un),mr=gi*$n,Ve=We*gi,it=Ve-(Ve-gi),At=gi-it,Ve=We*$n,qt=Ve-(Ve-$n),un=$n-qt,Hr=At*un-(mr-it*qt-At*qt-it*un),St=Gr-Hr,we=Gr-St,Gt[0]=Gr-(St+we)+(we-Hr),Jt=Er+St,we=Jt-Er,Qn=Er-(Jt-we)+(St-we),St=Qn-mr,we=Qn-St,Gt[1]=Qn-(St+we)+(we-mr),wi=Jt+St,we=wi-Jt,Gt[2]=Jt-(wi-we)+(St-we),Gt[3]=wi;const ea=tn(Ai,Lt,4,Gt,xt);Er=er*Oe,Ve=We*er,it=Ve-(Ve-er),At=er-it,Ve=We*Oe,qt=Ve-(Ve-Oe),un=Oe-qt,Gr=At*un-(Er-it*qt-At*qt-it*un),mr=br*$n,Ve=We*br,it=Ve-(Ve-br),At=br-it,Ve=We*$n,qt=Ve-(Ve-$n),un=$n-qt,Hr=At*un-(mr-it*qt-At*qt-it*un),St=Gr-Hr,we=Gr-St,Gt[0]=Gr-(St+we)+(we-Hr),Jt=Er+St,we=Jt-Er,Qn=Er-(Jt-we)+(St-we),St=Qn-mr,we=Qn-St,Gt[1]=Qn-(St+we)+(we-mr),wi=Jt+St,we=wi-Jt,Gt[2]=Jt-(wi-we)+(St-we),Gt[3]=wi;const _a=tn(ea,xt,4,Gt,Ie);return Ie[_a-1]}function Tn(dt,xe,Be,st,Dt,Ot){const Sn=(xe-Ot)*(Be-Dt),er=(dt-Dt)*(st-Ot),br=Sn-er,$n=Math.abs(Sn+er);return Math.abs(br)>=Me*$n?br:-gn(dt,xe,Be,st,Dt,Ot,$n)}const sr=(dt,xe)=>dt.x*xe.y-dt.y*xe.x,nr=(dt,xe)=>dt.x*xe.x+dt.y*xe.y,Ft=(dt,xe,Be)=>{const st=Tn(dt.x,dt.y,xe.x,xe.y,Be.x,Be.y);return st>0?-1:st<0?1:0},Kt=dt=>Math.sqrt(nr(dt,dt)),fn=(dt,xe,Be)=>{const st={x:xe.x-dt.x,y:xe.y-dt.y},Dt={x:Be.x-dt.x,y:Be.y-dt.y};return sr(Dt,st)/Kt(Dt)/Kt(st)},Gn=(dt,xe,Be)=>{const st={x:xe.x-dt.x,y:xe.y-dt.y},Dt={x:Be.x-dt.x,y:Be.y-dt.y};return nr(Dt,st)/Kt(Dt)/Kt(st)},on=(dt,xe,Be)=>xe.y===0?null:{x:dt.x+xe.x/xe.y*(Be-dt.y),y:Be},Pt=(dt,xe,Be)=>xe.x===0?null:{x:Be,y:dt.y+xe.y/xe.x*(Be-dt.x)},zt=(dt,xe,Be,st)=>{if(xe.x===0)return Pt(Be,st,dt.x);if(st.x===0)return Pt(dt,xe,Be.x);if(xe.y===0)return on(Be,st,dt.y);if(st.y===0)return on(dt,xe,Be.y);const Dt=sr(xe,st);if(Dt==0)return null;const Ot={x:Be.x-dt.x,y:Be.y-dt.y},Sn=sr(Ot,xe)/Dt,er=sr(Ot,st)/Dt,br=dt.x+er*xe.x,$n=Be.x+Sn*st.x,Oe=dt.y+er*xe.y,we=Be.y+Sn*st.y,Ve=(br+$n)/2,it=(Oe+we)/2;return{x:Ve,y:it}};class ze{static compare(xe,Be){const st=ze.comparePoints(xe.point,Be.point);return st!==0?st:(xe.point!==Be.point&&xe.link(Be),xe.isLeft!==Be.isLeft?xe.isLeft?1:-1:jt.compare(xe.segment,Be.segment))}static comparePoints(xe,Be){return xe.x<Be.x?-1:xe.x>Be.x?1:xe.y<Be.y?-1:xe.y>Be.y?1:0}constructor(xe,Be){xe.events===void 0?xe.events=[this]:xe.events.push(this),this.point=xe,this.isLeft=Be}link(xe){if(xe.point===this.point)throw new Error("Tried to link already linked events");const Be=xe.point.events;for(let st=0,Dt=Be.length;st<Dt;st++){const Ot=Be[st];this.point.events.push(Ot),Ot.point=this.point}this.checkForConsuming()}checkForConsuming(){const xe=this.point.events.length;for(let Be=0;Be<xe;Be++){const st=this.point.events[Be];if(st.segment.consumedBy===void 0)for(let Dt=Be+1;Dt<xe;Dt++){const Ot=this.point.events[Dt];Ot.consumedBy===void 0&&st.otherSE.point.events===Ot.otherSE.point.events&&st.segment.consume(Ot.segment)}}}getAvailableLinkedEvents(){const xe=[];for(let Be=0,st=this.point.events.length;Be<st;Be++){const Dt=this.point.events[Be];Dt!==this&&!Dt.segment.ringOut&&Dt.segment.isInResult()&&xe.push(Dt)}return xe}getLeftmostComparator(xe){const Be=new Map,st=Dt=>{const Ot=Dt.otherSE;Be.set(Dt,{sine:fn(this.point,xe.point,Ot.point),cosine:Gn(this.point,xe.point,Ot.point)})};return(Dt,Ot)=>{Be.has(Dt)||st(Dt),Be.has(Ot)||st(Ot);const{sine:Sn,cosine:er}=Be.get(Dt),{sine:br,cosine:$n}=Be.get(Ot);return Sn>=0&&br>=0?er<$n?1:er>$n?-1:0:Sn<0&&br<0?er<$n?-1:er>$n?1:0:br<Sn?-1:br>Sn?1:0}}}let rt=0;class jt{static compare(xe,Be){const st=xe.leftSE.point.x,Dt=Be.leftSE.point.x,Ot=xe.rightSE.point.x,Sn=Be.rightSE.point.x;if(Sn<st)return 1;if(Ot<Dt)return-1;const er=xe.leftSE.point.y,br=Be.leftSE.point.y,$n=xe.rightSE.point.y,Oe=Be.rightSE.point.y;if(st<Dt){if(br<er&&br<$n)return 1;if(br>er&&br>$n)return-1;const we=xe.comparePoint(Be.leftSE.point);if(we<0)return 1;if(we>0)return-1;const Ve=Be.comparePoint(xe.rightSE.point);return Ve!==0?Ve:-1}if(st>Dt){if(er<br&&er<Oe)return-1;if(er>br&&er>Oe)return 1;const we=Be.comparePoint(xe.leftSE.point);if(we!==0)return we;const Ve=xe.comparePoint(Be.rightSE.point);return Ve<0?1:Ve>0?-1:1}if(er<br)return-1;if(er>br)return 1;if(Ot<Sn){const we=Be.comparePoint(xe.rightSE.point);if(we!==0)return we}if(Ot>Sn){const we=xe.comparePoint(Be.rightSE.point);if(we<0)return 1;if(we>0)return-1}if(Ot!==Sn){const we=$n-er,Ve=Ot-st,it=Oe-br,At=Sn-Dt;if(we>Ve&&it<At)return 1;if(we<Ve&&it>At)return-1}return Ot>Sn?1:Ot<Sn||$n<Oe?-1:$n>Oe?1:xe.id<Be.id?-1:xe.id>Be.id?1:0}constructor(xe,Be,st,Dt){this.id=++rt,this.leftSE=xe,xe.segment=this,xe.otherSE=Be,this.rightSE=Be,Be.segment=this,Be.otherSE=xe,this.rings=st,this.windings=Dt}static fromRing(xe,Be,st){let Dt,Ot,Sn;const er=ze.comparePoints(xe,Be);if(er<0)Dt=xe,Ot=Be,Sn=1;else if(er>0)Dt=Be,Ot=xe,Sn=-1;else throw new Error(`Tried to create degenerate segment at [${xe.x}, ${xe.y}]`);const br=new ze(Dt,!0),$n=new ze(Ot,!1);return new jt(br,$n,[st],[Sn])}replaceRightSE(xe){this.rightSE=xe,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const xe=this.leftSE.point.y,Be=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:xe<Be?xe:Be},ur:{x:this.rightSE.point.x,y:xe>Be?xe:Be}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(xe){return xe.x===this.leftSE.point.x&&xe.y===this.leftSE.point.y||xe.x===this.rightSE.point.x&&xe.y===this.rightSE.point.y}comparePoint(xe){if(this.isAnEndpoint(xe))return 0;const Be=this.leftSE.point,st=this.rightSE.point,Dt=this.vector();if(Be.x===st.x)return xe.x===Be.x?0:xe.x<Be.x?1:-1;const Ot=(xe.y-Be.y)/Dt.y,Sn=Be.x+Ot*Dt.x;if(xe.x===Sn)return 0;const er=(xe.x-Be.x)/Dt.x,br=Be.y+er*Dt.y;return xe.y===br?0:xe.y<br?-1:1}getIntersection(xe){const Be=this.bbox(),st=xe.bbox(),Dt=tt(Be,st);if(Dt===null)return null;const Ot=this.leftSE.point,Sn=this.rightSE.point,er=xe.leftSE.point,br=xe.rightSE.point,$n=Ee(Be,er)&&this.comparePoint(er)===0,Oe=Ee(st,Ot)&&xe.comparePoint(Ot)===0,we=Ee(Be,br)&&this.comparePoint(br)===0,Ve=Ee(st,Sn)&&xe.comparePoint(Sn)===0;if(Oe&&$n)return Ve&&!we?Sn:!Ve&&we?br:null;if(Oe)return we&&Ot.x===br.x&&Ot.y===br.y?null:Ot;if($n)return Ve&&Sn.x===er.x&&Sn.y===er.y?null:er;if(Ve&&we)return null;if(Ve)return Sn;if(we)return br;const it=zt(Ot,this.vector(),er,xe.vector());return it===null||!Ee(Dt,it)?null:Ce.round(it.x,it.y)}split(xe){const Be=[],st=xe.events!==void 0,Dt=new ze(xe,!0),Ot=new ze(xe,!1),Sn=this.rightSE;this.replaceRightSE(Ot),Be.push(Ot),Be.push(Dt);const er=new jt(Dt,Sn,this.rings.slice(),this.windings.slice());return ze.comparePoints(er.leftSE.point,er.rightSE.point)>0&&er.swapEvents(),ze.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),st&&(Dt.checkForConsuming(),Ot.checkForConsuming()),Be}swapEvents(){const xe=this.rightSE;this.rightSE=this.leftSE,this.leftSE=xe,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let Be=0,st=this.windings.length;Be<st;Be++)this.windings[Be]*=-1}consume(xe){let Be=this,st=xe;for(;Be.consumedBy;)Be=Be.consumedBy;for(;st.consumedBy;)st=st.consumedBy;const Dt=jt.compare(Be,st);if(Dt!==0){if(Dt>0){const Ot=Be;Be=st,st=Ot}if(Be.prev===st){const Ot=Be;Be=st,st=Ot}for(let Ot=0,Sn=st.rings.length;Ot<Sn;Ot++){const er=st.rings[Ot],br=st.windings[Ot],$n=Be.rings.indexOf(er);$n===-1?(Be.rings.push(er),Be.windings.push(br)):Be.windings[$n]+=br}st.rings=null,st.windings=null,st.consumedBy=Be,st.leftSE.consumedBy=Be.leftSE,st.rightSE.consumedBy=Be.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const xe=this.prev.consumedBy||this.prev;this._beforeState=xe.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const xe=this.beforeState();this._afterState={rings:xe.rings.slice(0),windings:xe.windings.slice(0),multiPolys:[]};const Be=this._afterState.rings,st=this._afterState.windings,Dt=this._afterState.multiPolys;for(let er=0,br=this.rings.length;er<br;er++){const $n=this.rings[er],Oe=this.windings[er],we=Be.indexOf($n);we===-1?(Be.push($n),st.push(Oe)):st[we]+=Oe}const Ot=[],Sn=[];for(let er=0,br=Be.length;er<br;er++){if(st[er]===0)continue;const $n=Be[er],Oe=$n.poly;if(Sn.indexOf(Oe)===-1)if($n.isExterior)Ot.push(Oe);else{Sn.indexOf(Oe)===-1&&Sn.push(Oe);const we=Ot.indexOf($n.poly);we!==-1&&Ot.splice(we,1)}}for(let er=0,br=Ot.length;er<br;er++){const $n=Ot[er].multiPoly;Dt.indexOf($n)===-1&&Dt.push($n)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const xe=this.beforeState().multiPolys,Be=this.afterState().multiPolys;switch(dn.type){case"union":{const st=xe.length===0,Dt=Be.length===0;this._isInResult=st!==Dt;break}case"intersection":{let st,Dt;xe.length<Be.length?(st=xe.length,Dt=Be.length):(st=Be.length,Dt=xe.length),this._isInResult=Dt===dn.numMultiPolys&&st<Dt;break}case"xor":{const st=Math.abs(xe.length-Be.length);this._isInResult=st%2===1;break}case"difference":{const st=Dt=>Dt.length===1&&Dt[0].isSubject;this._isInResult=st(xe)!==st(Be);break}default:throw new Error(`Unrecognized operation type found ${dn.type}`)}return this._isInResult}}class U{constructor(xe,Be,st){if(!Array.isArray(xe)||xe.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Be,this.isExterior=st,this.segments=[],typeof xe[0][0]!="number"||typeof xe[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const Dt=Ce.round(xe[0][0],xe[0][1]);this.bbox={ll:{x:Dt.x,y:Dt.y},ur:{x:Dt.x,y:Dt.y}};let Ot=Dt;for(let Sn=1,er=xe.length;Sn<er;Sn++){if(typeof xe[Sn][0]!="number"||typeof xe[Sn][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let br=Ce.round(xe[Sn][0],xe[Sn][1]);br.x===Ot.x&&br.y===Ot.y||(this.segments.push(jt.fromRing(Ot,br,this)),br.x<this.bbox.ll.x&&(this.bbox.ll.x=br.x),br.y<this.bbox.ll.y&&(this.bbox.ll.y=br.y),br.x>this.bbox.ur.x&&(this.bbox.ur.x=br.x),br.y>this.bbox.ur.y&&(this.bbox.ur.y=br.y),Ot=br)}(Dt.x!==Ot.x||Dt.y!==Ot.y)&&this.segments.push(jt.fromRing(Ot,Dt,this))}getSweepEvents(){const xe=[];for(let Be=0,st=this.segments.length;Be<st;Be++){const Dt=this.segments[Be];xe.push(Dt.leftSE),xe.push(Dt.rightSE)}return xe}}class fe{constructor(xe,Be){if(!Array.isArray(xe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new U(xe[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let st=1,Dt=xe.length;st<Dt;st++){const Ot=new U(xe[st],this,!1);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.interiorRings.push(Ot)}this.multiPoly=Be}getSweepEvents(){const xe=this.exteriorRing.getSweepEvents();for(let Be=0,st=this.interiorRings.length;Be<st;Be++){const Dt=this.interiorRings[Be].getSweepEvents();for(let Ot=0,Sn=Dt.length;Ot<Sn;Ot++)xe.push(Dt[Ot])}return xe}}class at{constructor(xe,Be){if(!Array.isArray(xe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof xe[0][0][0]=="number"&&(xe=[xe])}catch(st){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let st=0,Dt=xe.length;st<Dt;st++){const Ot=new fe(xe[st],this);Ot.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ot.bbox.ll.x),Ot.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ot.bbox.ll.y),Ot.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ot.bbox.ur.x),Ot.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ot.bbox.ur.y),this.polys.push(Ot)}this.isSubject=Be}getSweepEvents(){const xe=[];for(let Be=0,st=this.polys.length;Be<st;Be++){const Dt=this.polys[Be].getSweepEvents();for(let Ot=0,Sn=Dt.length;Ot<Sn;Ot++)xe.push(Dt[Ot])}return xe}}class de{static factory(xe){const Be=[];for(let st=0,Dt=xe.length;st<Dt;st++){const Ot=xe[st];if(!Ot.isInResult()||Ot.ringOut)continue;let Sn=null,er=Ot.leftSE,br=Ot.rightSE;const $n=[er],Oe=er.point,we=[];for(;Sn=er,er=br,$n.push(er),er.point!==Oe;)for(;;){const Ve=er.getAvailableLinkedEvents();if(Ve.length===0){const qt=$n[0].point,un=$n[$n.length-1].point;throw new Error(`Unable to complete output ring starting at [${qt.x}, ${qt.y}]. Last matching segment found ends at [${un.x}, ${un.y}].`)}if(Ve.length===1){br=Ve[0].otherSE;break}let it=null;for(let qt=0,un=we.length;qt<un;qt++)if(we[qt].point===er.point){it=qt;break}if(it!==null){const qt=we.splice(it)[0],un=$n.splice(qt.index);un.unshift(un[0].otherSE),Be.push(new de(un.reverse()));continue}we.push({index:$n.length,point:er.point});const At=er.getLeftmostComparator(Sn);br=Ve.sort(At)[0].otherSE;break}Be.push(new de($n))}return Be}constructor(xe){this.events=xe;for(let Be=0,st=xe.length;Be<st;Be++)xe[Be].segment.ringOut=this;this.poly=null}getGeom(){let xe=this.events[0].point;const Be=[xe];for(let $n=1,Oe=this.events.length-1;$n<Oe;$n++){const we=this.events[$n].point,Ve=this.events[$n+1].point;Ft(we,xe,Ve)!==0&&(Be.push(we),xe=we)}if(Be.length===1)return null;const st=Be[0],Dt=Be[1];Ft(st,xe,Dt)===0&&Be.shift(),Be.push(Be[0]);const Ot=this.isExteriorRing()?1:-1,Sn=this.isExteriorRing()?0:Be.length-1,er=this.isExteriorRing()?Be.length:-1,br=[];for(let $n=Sn;$n!=er;$n+=Ot)br.push([Be[$n].x,Be[$n].y]);return br}isExteriorRing(){if(this._isExteriorRing===void 0){const xe=this.enclosingRing();this._isExteriorRing=xe?!xe.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let xe=this.events[0];for(let Dt=1,Ot=this.events.length;Dt<Ot;Dt++){const Sn=this.events[Dt];ze.compare(xe,Sn)>0&&(xe=Sn)}let Be=xe.segment.prevInResult(),st=Be?Be.prevInResult():null;for(;;){if(!Be)return null;if(!st)return Be.ringOut;if(st.ringOut!==Be.ringOut)return st.ringOut.enclosingRing()!==Be.ringOut?Be.ringOut:Be.ringOut.enclosingRing();Be=st.prevInResult(),st=Be?Be.prevInResult():null}}}class $t{constructor(xe){this.exteriorRing=xe,xe.poly=this,this.interiorRings=[]}addInterior(xe){this.interiorRings.push(xe),xe.poly=this}getGeom(){const xe=[this.exteriorRing.getGeom()];if(xe[0]===null)return null;for(let Be=0,st=this.interiorRings.length;Be<st;Be++){const Dt=this.interiorRings[Be].getGeom();Dt!==null&&xe.push(Dt)}return xe}}class sn{constructor(xe){this.rings=xe,this.polys=this._composePolys(xe)}getGeom(){const xe=[];for(let Be=0,st=this.polys.length;Be<st;Be++){const Dt=this.polys[Be].getGeom();Dt!==null&&xe.push(Dt)}return xe}_composePolys(xe){const Be=[];for(let st=0,Dt=xe.length;st<Dt;st++){const Ot=xe[st];if(!Ot.poly)if(Ot.isExteriorRing())Be.push(new $t(Ot));else{const Sn=Ot.enclosingRing();Sn.poly||Be.push(new $t(Sn)),Sn.poly.addInterior(Ot)}}return Be}}class pn{constructor(xe){let Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jt.compare;this.queue=xe,this.tree=new Ge(Be),this.segments=[]}process(xe){const Be=xe.segment,st=[];if(xe.consumedBy)return xe.isLeft?this.queue.remove(xe.otherSE):this.tree.remove(Be),st;const Dt=xe.isLeft?this.tree.add(Be):this.tree.find(Be);if(!Dt)throw new Error(`Unable to find segment #${Be.id} [${Be.leftSE.point.x}, ${Be.leftSE.point.y}] -> [${Be.rightSE.point.x}, ${Be.rightSE.point.y}] in SweepLine tree.`);let Ot=Dt,Sn=Dt,er,br;for(;er===void 0;)Ot=this.tree.prev(Ot),Ot===null?er=null:Ot.key.consumedBy===void 0&&(er=Ot.key);for(;br===void 0;)Sn=this.tree.next(Sn),Sn===null?br=null:Sn.key.consumedBy===void 0&&(br=Sn.key);if(xe.isLeft){let $n=null;if(er){const we=er.getIntersection(Be);if(we!==null&&(Be.isAnEndpoint(we)||($n=we),!er.isAnEndpoint(we))){const Ve=this._splitSafely(er,we);for(let it=0,At=Ve.length;it<At;it++)st.push(Ve[it])}}let Oe=null;if(br){const we=br.getIntersection(Be);if(we!==null&&(Be.isAnEndpoint(we)||(Oe=we),!br.isAnEndpoint(we))){const Ve=this._splitSafely(br,we);for(let it=0,At=Ve.length;it<At;it++)st.push(Ve[it])}}if($n!==null||Oe!==null){let we=null;$n===null?we=Oe:Oe===null?we=$n:we=ze.comparePoints($n,Oe)<=0?$n:Oe,this.queue.remove(Be.rightSE),st.push(Be.rightSE);const Ve=Be.split(we);for(let it=0,At=Ve.length;it<At;it++)st.push(Ve[it])}st.length>0?(this.tree.remove(Be),st.push(xe)):(this.segments.push(Be),Be.prev=er)}else{if(er&&br){const $n=er.getIntersection(br);if($n!==null){if(!er.isAnEndpoint($n)){const Oe=this._splitSafely(er,$n);for(let we=0,Ve=Oe.length;we<Ve;we++)st.push(Oe[we])}if(!br.isAnEndpoint($n)){const Oe=this._splitSafely(br,$n);for(let we=0,Ve=Oe.length;we<Ve;we++)st.push(Oe[we])}}}this.tree.remove(Be)}return st}_splitSafely(xe,Be){this.tree.remove(xe);const st=xe.rightSE;this.queue.remove(st);const Dt=xe.split(Be);return Dt.push(st),xe.consumedBy===void 0&&this.tree.add(xe),Dt}}const Nn=typeof K!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Wn=typeof K!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/antadmin/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class qn{run(xe,Be,st){dn.type=xe,Ce.reset();const Dt=[new at(Be,!0)];for(let we=0,Ve=st.length;we<Ve;we++)Dt.push(new at(st[we],!1));if(dn.numMultiPolys=Dt.length,dn.type==="difference"){const we=Dt[0];let Ve=1;for(;Ve<Dt.length;)tt(Dt[Ve].bbox,we.bbox)!==null?Ve++:Dt.splice(Ve,1)}if(dn.type==="intersection")for(let we=0,Ve=Dt.length;we<Ve;we++){const it=Dt[we];for(let At=we+1,qt=Dt.length;At<qt;At++)if(tt(it.bbox,Dt[At].bbox)===null)return[]}const Ot=new Ge(ze.compare);for(let we=0,Ve=Dt.length;we<Ve;we++){const it=Dt[we].getSweepEvents();for(let At=0,qt=it.length;At<qt;At++)if(Ot.insert(it[At]),Ot.size>Nn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const Sn=new pn(Ot);let er=Ot.size,br=Ot.pop();for(;br;){const we=br.key;if(Ot.size===er){const it=we.segment;throw new Error(`Unable to pop() ${we.isLeft?"left":"right"} SweepEvent [${we.point.x}, ${we.point.y}] from segment #${it.id} [${it.leftSE.point.x}, ${it.leftSE.point.y}] -> [${it.rightSE.point.x}, ${it.rightSE.point.y}] from queue.`)}if(Ot.size>Nn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(Sn.segments.length>Wn)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const Ve=Sn.process(we);for(let it=0,At=Ve.length;it<At;it++){const qt=Ve[it];qt.consumedBy===void 0&&Ot.insert(qt)}er=Ot.size,br=Ot.pop()}Ce.reset();const $n=de.factory(Sn.segments);return new sn($n).getGeom()}}const dn=new qn;var Yn={union:function(dt){for(var xe=arguments.length,Be=new Array(xe>1?xe-1:0),st=1;st<xe;st++)Be[st-1]=arguments[st];return dn.run("union",dt,Be)},intersection:function(dt){for(var xe=arguments.length,Be=new Array(xe>1?xe-1:0),st=1;st<xe;st++)Be[st-1]=arguments[st];return dn.run("intersection",dt,Be)},xor:function(dt){for(var xe=arguments.length,Be=new Array(xe>1?xe-1:0),st=1;st<xe;st++)Be[st-1]=arguments[st];return dn.run("xor",dt,Be)},difference:function(dt){for(var xe=arguments.length,Be=new Array(xe>1?xe-1:0),st=1;st<xe;st++)Be[st-1]=arguments[st];return dn.run("difference",dt,Be)}};return Yn})},62273:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},K=G.default=L},27590:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},K=G.default=L},45598:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=he;var W=K(L(67294)),E=L(11805);function he(ee){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=[];return W.default.Children.forEach(ee,function(be){be==null&&!se.keepEmpty||(Array.isArray(be)?ue=ue.concat(he(be)):(0,E.isFragment)(be)&&be.props?ue=ue.concat(he(be.props.children,se)):ue.push(be))}),ue}},3481:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.isStyleSupport=ee;var W=K(L(19158)),E=function(ue){if((0,W.default)()&&window.document.documentElement){var be=Array.isArray(ue)?ue:[ue],oe=window.document.documentElement;return be.some(function(Ge){return Ge in oe.style})}return!1},he=function(ue,be){if(!E(ue))return!1;var oe=document.createElement("div"),Ge=oe.style[ue];return oe.style[ue]=be,oe.style[ue]!==Ge};function ee(se,ue){return!Array.isArray(se)&&ue!==void 0?he(se,ue):E(se)}},27712:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(E){var he=E.keyCode;if(E.altKey&&!E.ctrlKey||E.metaKey||he>=L.F1&&he<=L.F12)return!1;switch(he){case L.ALT:case L.CAPS_LOCK:case L.CONTEXT_MENU:case L.CTRL:case L.DOWN:case L.END:case L.ESC:case L.HOME:case L.INSERT:case L.LEFT:case L.MAC_FF_META:case L.META:case L.NUMLOCK:case L.NUM_CENTER:case L.PAGE_DOWN:case L.PAGE_UP:case L.PAUSE:case L.PRINT_SCREEN:case L.RIGHT:case L.SHIFT:case L.UP:case L.WIN_KEY:case L.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(E){if(E>=L.ZERO&&E<=L.NINE||E>=L.NUM_ZERO&&E<=L.NUM_MULTIPLY||E>=L.A&&E<=L.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&E===0)return!0;switch(E){case L.SPACE:case L.QUESTION_MARK:case L.NUM_PLUS:case L.NUM_MINUS:case L.NUM_PERIOD:case L.NUM_DIVISION:case L.SEMICOLON:case L.DASH:case L.EQUALS:case L.COMMA:case L.PERIOD:case L.SLASH:case L.APOSTROPHE:case L.SINGLE_QUOTE:case L.OPEN_SQUARE_BRACKET:case L.BACKSLASH:case L.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},K=G.default=L},18545:function(bt,G,L){"use strict";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=E;var W=K(L(67294));function E(he){var ee=W.useRef();ee.current=he;var se=W.useCallback(function(){for(var ue,be=arguments.length,oe=new Array(be),Ge=0;Ge<be;Ge++)oe[Ge]=arguments[Ge];return(ue=ee.current)===null||ue===void 0?void 0:ue.call.apply(ue,[ee].concat(oe))},[]);return se}},82546:function(bt,G,L){"use strict";var K=L(64836).default,W=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.useLayoutUpdateEffect=G.default=void 0;var E=W(L(67294)),he=K(L(19158)),ee=(0,he.default)()?E.useLayoutEffect:E.useEffect,se=function(Ge,te){var me=E.useRef(!0);ee(function(){return Ge(me.current)},te),ee(function(){return me.current=!1,function(){me.current=!0}},[])},ue=G.useLayoutUpdateEffect=function(Ge,te){se(function(me){if(!me)return Ge()},te)},be=G.default=se},67265:function(bt,G,L){"use strict";var K=L(75263).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=E;var W=K(L(67294));function E(he,ee,se){var ue=W.useRef({});return(!("value"in ue.current)||se(ue.current.condition,ee))&&(ue.current.value=he(),ue.current.condition=ee),ue.current.value}},60869:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ue;var W=K(L(27424)),E=K(L(18545)),he=L(82546),ee=K(L(78423));function se(be){return be!==void 0}function ue(be,oe){var Ge=oe||{},te=Ge.defaultValue,me=Ge.value,Pe=Ge.onChange,$=Ge.postState,le=(0,ee.default)(function(){return se(me)?me:se(te)?typeof te=="function"?te():te:typeof be=="function"?be():be}),J=(0,W.default)(le,2),Ee=J[0],tt=J[1],Je=me!==void 0?me:Ee,wt=$?$(Je):Je,pt=(0,E.default)(Pe),yt=(0,ee.default)([Je]),Re=(0,W.default)(yt,2),Ce=Re[0],Ue=Re[1];(0,he.useLayoutUpdateEffect)(function(){var lt=Ce[0];Ee!==lt&&pt(Ee,lt)},[Ce]),(0,he.useLayoutUpdateEffect)(function(){se(me)||tt(me)},[me]);var We=(0,E.default)(function(lt,tn){tt(lt,tn),Ue([Je],tn)});return[wt,We]}},78423:function(bt,G,L){"use strict";var K=L(75263).default,W=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=ee;var E=W(L(27424)),he=K(L(67294));function ee(se){var ue=he.useRef(!1),be=he.useState(se),oe=(0,E.default)(be,2),Ge=oe[0],te=oe[1];he.useEffect(function(){return ue.current=!1,function(){ue.current=!0}},[]);function me(Pe,$){$&&ue.current||te(Pe)}return[Ge,me]}},11102:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var W=K(L(18698)),E=K(L(45520));function he(se,ue){var be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,oe=new Set;function Ge(te,me){var Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,$=oe.has(te);if((0,E.default)(!$,"Warning: There may be circular references"),$)return!1;if(te===me)return!0;if(be&&Pe>1)return!1;oe.add(te);var le=Pe+1;if(Array.isArray(te)){if(!Array.isArray(me)||te.length!==me.length)return!1;for(var J=0;J<te.length;J++)if(!Ge(te[J],me[J],le))return!1;return!0}if(te&&me&&(0,W.default)(te)==="object"&&(0,W.default)(me)==="object"){var Ee=Object.keys(te);return Ee.length!==Object.keys(me).length?!1:Ee.every(function(tt){return Ge(te[tt],me[tt],le)})}return!1}return Ge(se,ue)}var ee=G.default=he},18475:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=E;var W=K(L(42122));function E(he,ee){var se=(0,W.default)({},he);return Array.isArray(ee)&&ee.forEach(function(ue){delete se[ue]}),se}},75531:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.composeRef=ue,G.fillRef=se,G.supportNodeRef=Ge,G.supportRef=oe,G.useComposeRef=be;var W=K(L(18698)),E=L(67294),he=L(11805),ee=K(L(67265));function se(te,me){typeof te=="function"?te(me):(0,W.default)(te)==="object"&&te&&"current"in te&&(te.current=me)}function ue(){for(var te=arguments.length,me=new Array(te),Pe=0;Pe<te;Pe++)me[Pe]=arguments[Pe];var $=me.filter(function(le){return le});return $.length<=1?$[0]:function(le){me.forEach(function(J){se(J,le)})}}function be(){for(var te=arguments.length,me=new Array(te),Pe=0;Pe<te;Pe++)me[Pe]=arguments[Pe];return(0,ee.default)(function(){return ue.apply(void 0,me)},me,function($,le){return $.length!==le.length||$.every(function(J,Ee){return J!==le[Ee]})})}function oe(te){var me,Pe,$=(0,he.isMemo)(te)?te.type.type:te.type;return!(typeof $=="function"&&!((me=$.prototype)!==null&&me!==void 0&&me.render)&&$.$$typeof!==he.ForwardRef||typeof te=="function"&&!((Pe=te.prototype)!==null&&Pe!==void 0&&Pe.render)&&te.$$typeof!==he.ForwardRef)}function Ge(te){return!(0,E.isValidElement)(te)||(0,he.isFragment)(te)?!1:oe(te)}},94787:function(bt,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=L;function L(K,W){for(var E=K,he=0;he<W.length;he+=1){if(E==null)return;E=E[W[he]]}return E}},20059:function(bt,G,L){"use strict";var K=L(64836).default;Object.defineProperty(G,"__esModule",{value:!0}),G.default=be,G.merge=me;var W=K(L(18698)),E=K(L(42122)),he=K(L(861)),ee=K(L(51589)),se=K(L(94787));function ue(Pe,$,le,J){if(!$.length)return le;var Ee=(0,ee.default)($),tt=Ee[0],Je=Ee.slice(1),wt;return!Pe&&typeof tt=="number"?wt=[]:Array.isArray(Pe)?wt=(0,he.default)(Pe):wt=(0,E.default)({},Pe),J&&le===void 0&&Je.length===1?delete wt[tt][Je[0]]:wt[tt]=ue(wt[tt],Je,le,J),wt}function be(Pe,$,le){var J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return $.length&&J&&le===void 0&&!(0,se.default)(Pe,$.slice(0,-1))?Pe:ue(Pe,$,le,J)}function oe(Pe){return(0,W.default)(Pe)==="object"&&Pe!==null&&Object.getPrototypeOf(Pe)===Object.prototype}function Ge(Pe){return Array.isArray(Pe)?[]:{}}var te=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function me(){for(var Pe=arguments.length,$=new Array(Pe),le=0;le<Pe;le++)$[le]=arguments[le];var J=Ge($[0]);return $.forEach(function(Ee){function tt(Je,wt){var pt=new Set(wt),yt=(0,se.default)(Ee,Je),Re=Array.isArray(yt);if(Re||oe(yt)){if(!pt.has(yt)){pt.add(yt);var Ce=(0,se.default)(J,Je);Re?J=be(J,Je,[]):(!Ce||(0,W.default)(Ce)!=="object")&&(J=be(J,Je,Ge(yt))),te(yt).forEach(function(Ue){tt([].concat((0,he.default)(Je),[Ue]),pt)})}}else J=be(J,Je,yt)}tt([])}),J}},81550:function(bt){(function(G,L){bt.exports=L()})(this,function(){"use strict";var G=function(ke){return ke instanceof Uint8Array||ke instanceof Uint16Array||ke instanceof Uint32Array||ke instanceof Int8Array||ke instanceof Int16Array||ke instanceof Int32Array||ke instanceof Float32Array||ke instanceof Float64Array||ke instanceof Uint8ClampedArray},L=function(ke,Yt){for(var Mn=Object.keys(Yt),Rr=0;Rr<Mn.length;++Rr)ke[Mn[Rr]]=Yt[Mn[Rr]];return ke},K=`
`;function W(ke){return typeof atob!="undefined"?atob(ke):"base64:"+ke}function E(ke){var Yt=new Error("(regl) "+ke);throw console.error(Yt),Yt}function he(ke,Yt){ke||E(Yt)}function ee(ke){return ke?": "+ke:""}function se(ke,Yt,Mn){ke in Yt||E("unknown parameter ("+ke+")"+ee(Mn)+". possible values: "+Object.keys(Yt).join())}function ue(ke,Yt){G(ke)||E("invalid parameter type"+ee(Yt)+". must be a typed array")}function be(ke,Yt){switch(Yt){case"number":return typeof ke=="number";case"object":return typeof ke=="object";case"string":return typeof ke=="string";case"boolean":return typeof ke=="boolean";case"function":return typeof ke=="function";case"undefined":return typeof ke=="undefined";case"symbol":return typeof ke=="symbol"}}function oe(ke,Yt,Mn){be(ke,Yt)||E("invalid parameter type"+ee(Mn)+". expected "+Yt+", got "+typeof ke)}function Ge(ke,Yt){ke>=0&&(ke|0)===ke||E("invalid parameter type, ("+ke+")"+ee(Yt)+". must be a nonnegative integer")}function te(ke,Yt,Mn){Yt.indexOf(ke)<0&&E("invalid value"+ee(Mn)+". must be one of: "+Yt)}var me=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function Pe(ke){Object.keys(ke).forEach(function(Yt){me.indexOf(Yt)<0&&E('invalid regl constructor argument "'+Yt+'". must be one of '+me)})}function $(ke,Yt){for(ke=ke+"";ke.length<Yt;)ke=" "+ke;return ke}function le(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function J(ke,Yt){this.number=ke,this.line=Yt,this.errors=[]}function Ee(ke,Yt,Mn){this.file=ke,this.line=Yt,this.message=Mn}function tt(){var ke=new Error,Yt=(ke.stack||ke).toString(),Mn=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Yt);if(Mn)return Mn[1];var Rr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Yt);return Rr?Rr[1]:"unknown"}function Je(){var ke=new Error,Yt=(ke.stack||ke).toString(),Mn=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Yt);if(Mn)return Mn[1];var Rr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Yt);return Rr?Rr[1]:"unknown"}function wt(ke,Yt){var Mn=ke.split(`
`),Rr=1,Kr=0,Pr={unknown:new le,0:new le};Pr.unknown.name=Pr[0].name=Yt||tt(),Pr.unknown.lines.push(new J(0,""));for(var yr=0;yr<Mn.length;++yr){var Di=Mn[yr],vi=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Di);if(vi)switch(vi[1]){case"line":var Hi=/(\d+)(\s+\d+)?/.exec(vi[2]);Hi&&(Rr=Hi[1]|0,Hi[2]&&(Kr=Hi[2]|0,Kr in Pr||(Pr[Kr]=new le)));break;case"define":var Li=/SHADER_NAME(_B64)?\s+(.*)$/.exec(vi[2]);Li&&(Pr[Kr].name=Li[1]?W(Li[2]):Li[2]);break}Pr[Kr].lines.push(new J(Rr++,Di))}return Object.keys(Pr).forEach(function(ki){var Gi=Pr[ki];Gi.lines.forEach(function(Ei){Gi.index[Ei.number]=Ei})}),Pr}function pt(ke){var Yt=[];return ke.split(`
`).forEach(function(Mn){if(!(Mn.length<5)){var Rr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Mn);Rr?Yt.push(new Ee(Rr[1]|0,Rr[2]|0,Rr[3].trim())):Mn.length>0&&Yt.push(new Ee("unknown",0,Mn))}}),Yt}function yt(ke,Yt){Yt.forEach(function(Mn){var Rr=ke[Mn.file];if(Rr){var Kr=Rr.index[Mn.line];if(Kr){Kr.errors.push(Mn),Rr.hasErrors=!0;return}}ke.unknown.hasErrors=!0,ke.unknown.lines[0].errors.push(Mn)})}function Re(ke,Yt,Mn,Rr,Kr){if(!ke.getShaderParameter(Yt,ke.COMPILE_STATUS)){var Pr=ke.getShaderInfoLog(Yt),yr=Rr===ke.FRAGMENT_SHADER?"fragment":"vertex";_t(Mn,"string",yr+" shader source must be a string",Kr);var Di=wt(Mn,Kr),vi=pt(Pr);yt(Di,vi),Object.keys(Di).forEach(function(Hi){var Li=Di[Hi];if(!Li.hasErrors)return;var ki=[""],Gi=[""];function Ei(Wi,dr){ki.push(Wi),Gi.push(dr||"")}Ei("file number "+Hi+": "+Li.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Li.lines.forEach(function(Wi){if(Wi.errors.length>0){Ei($(Wi.number,4)+"|  ","background-color:yellow; font-weight:bold"),Ei(Wi.line+K,"color:red; background-color:yellow; font-weight:bold");var dr=0;Wi.errors.forEach(function(jr){var Si=jr.message,fo=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Si);if(fo){var ui=fo[1];switch(Si=fo[2],ui){case"assign":ui="=";break}dr=Math.max(Wi.line.indexOf(ui,dr),0)}else dr=0;Ei($("| ",6)),Ei($("^^^",dr+3)+K,"font-weight:bold"),Ei($("| ",6)),Ei(Si+K,"font-weight:bold")}),Ei($("| ",6)+K)}else Ei($(Wi.number,4)+"|  "),Ei(Wi.line+K,"color:red")}),typeof document!="undefined"&&!window.chrome?(Gi[0]=ki.join("%c"),console.log.apply(console,Gi)):console.log(ki.join(""))}),he.raise("Error compiling "+yr+" shader, "+Di[0].name)}}function Ce(ke,Yt,Mn,Rr,Kr){if(!ke.getProgramParameter(Yt,ke.LINK_STATUS)){var Pr=ke.getProgramInfoLog(Yt),yr=wt(Mn,Kr),Di=wt(Rr,Kr),vi='Error linking program with vertex shader, "'+Di[0].name+'", and fragment shader "'+yr[0].name+'"';typeof document!="undefined"?console.log("%c"+vi+K+"%c"+Pr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(vi+K+Pr),he.raise(vi)}}function Ue(ke){ke._commandRef=tt()}function We(ke,Yt,Mn,Rr){Ue(ke);function Kr(vi){return vi?Rr.id(vi):0}ke._fragId=Kr(ke.static.frag),ke._vertId=Kr(ke.static.vert);function Pr(vi,Hi){Object.keys(Hi).forEach(function(Li){vi[Rr.id(Li)]=!0})}var yr=ke._uniformSet={};Pr(yr,Yt.static),Pr(yr,Yt.dynamic);var Di=ke._attributeSet={};Pr(Di,Mn.static),Pr(Di,Mn.dynamic),ke._hasCount="count"in ke.static||"count"in ke.dynamic||"elements"in ke.static||"elements"in ke.dynamic}function lt(ke,Yt){var Mn=Je();E(ke+" in command "+(Yt||tt())+(Mn==="unknown"?"":" called from "+Mn))}function tn(ke,Yt,Mn){ke||lt(Yt,Mn||tt())}function Le(ke,Yt,Mn,Rr){ke in Yt||lt("unknown parameter ("+ke+")"+ee(Mn)+". possible values: "+Object.keys(Yt).join(),Rr||tt())}function _t(ke,Yt,Mn,Rr){be(ke,Yt)||lt("invalid parameter type"+ee(Mn)+". expected "+Yt+", got "+typeof ke,Rr||tt())}function Me(ke){ke()}function nt(ke,Yt,Mn){ke.texture?te(ke.texture._texture.internalformat,Yt,"unsupported texture format for attachment"):te(ke.renderbuffer._renderbuffer.format,Mn,"unsupported renderbuffer format for attachment")}var qe=33071,Ye=9728,Lt=9984,xt=9985,Ie=9986,Gt=9987,gn=5120,Tn=5121,sr=5122,nr=5123,Ft=5124,Kt=5125,fn=5126,Gn=32819,on=32820,Pt=33635,zt=34042,ze=36193,rt={};rt[gn]=rt[Tn]=1,rt[sr]=rt[nr]=rt[ze]=rt[Pt]=rt[Gn]=rt[on]=2,rt[Ft]=rt[Kt]=rt[fn]=rt[zt]=4;function jt(ke,Yt){return ke===on||ke===Gn||ke===Pt?2:ke===zt?4:rt[ke]*Yt}function U(ke){return!(ke&ke-1)&&!!ke}function fe(ke,Yt,Mn){var Rr,Kr=Yt.width,Pr=Yt.height,yr=Yt.channels;he(Kr>0&&Kr<=Mn.maxTextureSize&&Pr>0&&Pr<=Mn.maxTextureSize,"invalid texture shape"),(ke.wrapS!==qe||ke.wrapT!==qe)&&he(U(Kr)&&U(Pr),"incompatible wrap mode for texture, both width and height must be power of 2"),Yt.mipmask===1?Kr!==1&&Pr!==1&&he(ke.minFilter!==Lt&&ke.minFilter!==Ie&&ke.minFilter!==xt&&ke.minFilter!==Gt,"min filter requires mipmap"):(he(U(Kr)&&U(Pr),"texture must be a square power of 2 to support mipmapping"),he(Yt.mipmask===(Kr<<1)-1,"missing or incomplete mipmap data")),Yt.type===fn&&(Mn.extensions.indexOf("oes_texture_float_linear")<0&&he(ke.minFilter===Ye&&ke.magFilter===Ye,"filter not supported, must enable oes_texture_float_linear"),he(!ke.genMipmaps,"mipmap generation not supported with float textures"));var Di=Yt.images;for(Rr=0;Rr<16;++Rr)if(Di[Rr]){var vi=Kr>>Rr,Hi=Pr>>Rr;he(Yt.mipmask&1<<Rr,"missing mipmap data");var Li=Di[Rr];if(he(Li.width===vi&&Li.height===Hi,"invalid shape for mip images"),he(Li.format===Yt.format&&Li.internalformat===Yt.internalformat&&Li.type===Yt.type,"incompatible type for mip image"),!Li.compressed)if(Li.data){var ki=Math.ceil(jt(Li.type,yr)*vi/Li.unpackAlignment)*Li.unpackAlignment;he(Li.data.byteLength===ki*Hi,"invalid data for image, buffer size is inconsistent with image format")}else Li.element||Li.copy}else ke.genMipmaps||he((Yt.mipmask&1<<Rr)===0,"extra mipmap data");Yt.compressed&&he(!ke.genMipmaps,"mipmap generation for compressed images not supported")}function at(ke,Yt,Mn,Rr){var Kr=ke.width,Pr=ke.height,yr=ke.channels;he(Kr>0&&Kr<=Rr.maxTextureSize&&Pr>0&&Pr<=Rr.maxTextureSize,"invalid texture shape"),he(Kr===Pr,"cube map must be square"),he(Yt.wrapS===qe&&Yt.wrapT===qe,"wrap mode not supported by cube map");for(var Di=0;Di<Mn.length;++Di){var vi=Mn[Di];he(vi.width===Kr&&vi.height===Pr,"inconsistent cube map face shape"),Yt.genMipmaps&&(he(!vi.compressed,"can not generate mipmap for compressed textures"),he(vi.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Hi=vi.images,Li=0;Li<16;++Li){var ki=Hi[Li];if(ki){var Gi=Kr>>Li,Ei=Pr>>Li;he(vi.mipmask&1<<Li,"missing mipmap data"),he(ki.width===Gi&&ki.height===Ei,"invalid shape for mip images"),he(ki.format===ke.format&&ki.internalformat===ke.internalformat&&ki.type===ke.type,"incompatible type for mip image"),ki.compressed||(ki.data?he(ki.data.byteLength===Gi*Ei*Math.max(jt(ki.type,yr),ki.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ki.element||ki.copy)}}}}var de=L(he,{optional:Me,raise:E,commandRaise:lt,command:tn,parameter:se,commandParameter:Le,constructor:Pe,type:oe,commandType:_t,isTypedArray:ue,nni:Ge,oneOf:te,shaderError:Re,linkError:Ce,callSite:Je,saveCommandRef:Ue,saveDrawInfo:We,framebufferFormat:nt,guessCommand:tt,texture2D:fe,textureCube:at}),$t=0,sn=0;function pn(ke,Yt){this.id=$t++,this.type=ke,this.data=Yt}function Nn(ke){return ke.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Wn(ke){if(ke.length===0)return[];var Yt=ke.charAt(0),Mn=ke.charAt(ke.length-1);if(ke.length>1&&Yt===Mn&&(Yt==='"'||Yt==="'"))return['"'+Nn(ke.substr(1,ke.length-2))+'"'];var Rr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ke);if(Rr)return Wn(ke.substr(0,Rr.index)).concat(Wn(Rr[1])).concat(Wn(ke.substr(Rr.index+Rr[0].length)));var Kr=ke.split(".");if(Kr.length===1)return['"'+Nn(ke)+'"'];for(var Pr=[],yr=0;yr<Kr.length;++yr)Pr=Pr.concat(Wn(Kr[yr]));return Pr}function qn(ke){return"["+Wn(ke).join("][")+"]"}function dn(ke,Yt){return new pn(ke,qn(Yt+""))}function vt(ke){return typeof ke=="function"&&!ke._reglType||ke instanceof pn}function It(ke,Yt){return typeof ke=="function"?new pn(sn,ke):ke}var An={DynamicVariable:pn,define:dn,isDynamic:vt,unbox:It,accessor:qn},Dn={next:typeof requestAnimationFrame=="function"?function(ke){return requestAnimationFrame(ke)}:function(ke){return setTimeout(ke,16)},cancel:typeof cancelAnimationFrame=="function"?function(ke){return cancelAnimationFrame(ke)}:clearTimeout},Yn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function dt(){var ke={"":0},Yt=[""];return{id:function(Mn){var Rr=ke[Mn];return Rr||(Rr=ke[Mn]=Yt.length,Yt.push(Mn),Rr)},str:function(Mn){return Yt[Mn]}}}function xe(ke,Yt,Mn){var Rr=document.createElement("canvas");L(Rr.style,{border:0,margin:0,padding:0,top:0,left:0}),ke.appendChild(Rr),ke===document.body&&(Rr.style.position="absolute",L(ke.style,{margin:0,padding:0}));function Kr(){var Di=window.innerWidth,vi=window.innerHeight;if(ke!==document.body){var Hi=ke.getBoundingClientRect();Di=Hi.right-Hi.left,vi=Hi.bottom-Hi.top}Rr.width=Mn*Di,Rr.height=Mn*vi,L(Rr.style,{width:Di+"px",height:vi+"px"})}var Pr;ke!==document.body&&typeof ResizeObserver=="function"?(Pr=new ResizeObserver(function(){setTimeout(Kr)}),Pr.observe(ke)):window.addEventListener("resize",Kr,!1);function yr(){Pr?Pr.disconnect():window.removeEventListener("resize",Kr),ke.removeChild(Rr)}return Kr(),{canvas:Rr,onDestroy:yr}}function Be(ke,Yt){function Mn(Rr){try{return ke.getContext(Rr,Yt)}catch(Kr){return null}}return Mn("webgl")||Mn("experimental-webgl")||Mn("webgl-experimental")}function st(ke){return typeof ke.nodeName=="string"&&typeof ke.appendChild=="function"&&typeof ke.getBoundingClientRect=="function"}function Dt(ke){return typeof ke.drawArrays=="function"||typeof ke.drawElements=="function"}function Ot(ke){return typeof ke=="string"?ke.split():(de(Array.isArray(ke),"invalid extension array"),ke)}function Sn(ke){return typeof ke=="string"?(de(typeof document!="undefined","not supported outside of DOM"),document.querySelector(ke)):ke}function er(ke){var Yt=ke||{},Mn,Rr,Kr,Pr,yr={},Di=[],vi=[],Hi=typeof window=="undefined"?1:window.devicePixelRatio,Li=!1,ki=function(Wi){Wi&&de.raise(Wi)},Gi=function(){};if(typeof Yt=="string"?(de(typeof document!="undefined","selector queries only supported in DOM enviroments"),Mn=document.querySelector(Yt),de(Mn,"invalid query string for element")):typeof Yt=="object"?st(Yt)?Mn=Yt:Dt(Yt)?(Pr=Yt,Kr=Pr.canvas):(de.constructor(Yt),"gl"in Yt?Pr=Yt.gl:"canvas"in Yt?Kr=Sn(Yt.canvas):"container"in Yt&&(Rr=Sn(Yt.container)),"attributes"in Yt&&(yr=Yt.attributes,de.type(yr,"object","invalid context attributes")),"extensions"in Yt&&(Di=Ot(Yt.extensions)),"optionalExtensions"in Yt&&(vi=Ot(Yt.optionalExtensions)),"onDone"in Yt&&(de.type(Yt.onDone,"function","invalid or missing onDone callback"),ki=Yt.onDone),"profile"in Yt&&(Li=!!Yt.profile),"pixelRatio"in Yt&&(Hi=+Yt.pixelRatio,de(Hi>0,"invalid pixel ratio"))):de.raise("invalid arguments to regl"),Mn&&(Mn.nodeName.toLowerCase()==="canvas"?Kr=Mn:Rr=Mn),!Pr){if(!Kr){de(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Ei=xe(Rr||document.body,ki,Hi);if(!Ei)return null;Kr=Ei.canvas,Gi=Ei.onDestroy}yr.premultipliedAlpha===void 0&&(yr.premultipliedAlpha=!0),Pr=Be(Kr,yr)}return Pr?{gl:Pr,canvas:Kr,container:Rr,extensions:Di,optionalExtensions:vi,pixelRatio:Hi,profile:Li,onDone:ki,onDestroy:Gi}:(Gi(),ki("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function br(ke,Yt){var Mn={};function Rr(yr){de.type(yr,"string","extension name must be string");var Di=yr.toLowerCase(),vi;try{vi=Mn[Di]=ke.getExtension(Di)}catch(Hi){}return!!vi}for(var Kr=0;Kr<Yt.extensions.length;++Kr){var Pr=Yt.extensions[Kr];if(!Rr(Pr))return Yt.onDestroy(),Yt.onDone('"'+Pr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Yt.optionalExtensions.forEach(Rr),{extensions:Mn,restore:function(){Object.keys(Mn).forEach(function(yr){if(Mn[yr]&&!Rr(yr))throw new Error("(regl): error restoring extension "+yr)})}}}function $n(ke,Yt){for(var Mn=Array(ke),Rr=0;Rr<ke;++Rr)Mn[Rr]=Yt(Rr);return Mn}var Oe=5120,we=5121,Ve=5122,it=5123,At=5124,qt=5125,un=5126;function St(ke){for(var Yt=16;Yt<=1<<28;Yt*=16)if(ke<=Yt)return Yt;return 0}function Jt(ke){var Yt,Mn;return Yt=(ke>65535)<<4,ke>>>=Yt,Mn=(ke>255)<<3,ke>>>=Mn,Yt|=Mn,Mn=(ke>15)<<2,ke>>>=Mn,Yt|=Mn,Mn=(ke>3)<<1,ke>>>=Mn,Yt|=Mn,Yt|ke>>1}function Qn(){var ke=$n(8,function(){return[]});function Yt(Pr){var yr=St(Pr),Di=ke[Jt(yr)>>2];return Di.length>0?Di.pop():new ArrayBuffer(yr)}function Mn(Pr){ke[Jt(Pr.byteLength)>>2].push(Pr)}function Rr(Pr,yr){var Di=null;switch(Pr){case Oe:Di=new Int8Array(Yt(yr),0,yr);break;case we:Di=new Uint8Array(Yt(yr),0,yr);break;case Ve:Di=new Int16Array(Yt(2*yr),0,yr);break;case it:Di=new Uint16Array(Yt(2*yr),0,yr);break;case At:Di=new Int32Array(Yt(4*yr),0,yr);break;case qt:Di=new Uint32Array(Yt(4*yr),0,yr);break;case un:Di=new Float32Array(Yt(4*yr),0,yr);break;default:return null}return Di.length!==yr?Di.subarray(0,yr):Di}function Kr(Pr){Mn(Pr.buffer)}return{alloc:Yt,free:Mn,allocType:Rr,freeType:Kr}}var Er=Qn();Er.zero=Qn();var Gr=3408,mr=3410,Hr=3411,wi=3412,Pi=3413,wr=3414,gi=3415,di=33901,xi=33902,Fo=3379,Ai=3386,ea=34921,_a=36347,fi=36348,Ji=35661,$e=35660,ht=34930,Ht=36349,hn=34076,Fn=34024,Bn=7936,yn=7937,On=7938,pr=35724,hr=34047,oi=36063,Xi=34852,io=3553,ai=34067,Yi=34069,ji=33984,Yr=6408,To=5126,mi=5121,wo=36160,$i=36053,co=36064,Mo=16384,bs=function(ke,Yt){var Mn=1;Yt.ext_texture_filter_anisotropic&&(Mn=ke.getParameter(hr));var Rr=1,Kr=1;Yt.webgl_draw_buffers&&(Rr=ke.getParameter(Xi),Kr=ke.getParameter(oi));var Pr=!!Yt.oes_texture_float;if(Pr){var yr=ke.createTexture();ke.bindTexture(io,yr),ke.texImage2D(io,0,Yr,1,1,0,Yr,To,null);var Di=ke.createFramebuffer();if(ke.bindFramebuffer(wo,Di),ke.framebufferTexture2D(wo,co,io,yr,0),ke.bindTexture(io,null),ke.checkFramebufferStatus(wo)!==$i)Pr=!1;else{ke.viewport(0,0,1,1),ke.clearColor(1,0,0,1),ke.clear(Mo);var vi=Er.allocType(To,4);ke.readPixels(0,0,1,1,Yr,To,vi),ke.getError()?Pr=!1:(ke.deleteFramebuffer(Di),ke.deleteTexture(yr),Pr=vi[0]===1),Er.freeType(vi)}}var Hi=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Li=!0;if(!Hi){var ki=ke.createTexture(),Gi=Er.allocType(mi,36);ke.activeTexture(ji),ke.bindTexture(ai,ki),ke.texImage2D(Yi,0,Yr,3,3,0,Yr,mi,Gi),Er.freeType(Gi),ke.bindTexture(ai,null),ke.deleteTexture(ki),Li=!ke.getError()}return{colorBits:[ke.getParameter(mr),ke.getParameter(Hr),ke.getParameter(wi),ke.getParameter(Pi)],depthBits:ke.getParameter(wr),stencilBits:ke.getParameter(gi),subpixelBits:ke.getParameter(Gr),extensions:Object.keys(Yt).filter(function(Ei){return!!Yt[Ei]}),maxAnisotropic:Mn,maxDrawbuffers:Rr,maxColorAttachments:Kr,pointSizeDims:ke.getParameter(di),lineWidthDims:ke.getParameter(xi),maxViewportDims:ke.getParameter(Ai),maxCombinedTextureUnits:ke.getParameter(Ji),maxCubeMapSize:ke.getParameter(hn),maxRenderbufferSize:ke.getParameter(Fn),maxTextureUnits:ke.getParameter(ht),maxTextureSize:ke.getParameter(Fo),maxAttributes:ke.getParameter(ea),maxVertexUniforms:ke.getParameter(_a),maxVertexTextureUnits:ke.getParameter($e),maxVaryingVectors:ke.getParameter(fi),maxFragmentUniforms:ke.getParameter(Ht),glsl:ke.getParameter(pr),renderer:ke.getParameter(yn),vendor:ke.getParameter(Bn),version:ke.getParameter(On),readFloat:Pr,npotTextureCube:Li}};function ba(ke){return!!ke&&typeof ke=="object"&&Array.isArray(ke.shape)&&Array.isArray(ke.stride)&&typeof ke.offset=="number"&&ke.shape.length===ke.stride.length&&(Array.isArray(ke.data)||G(ke.data))}var ra=function(ke){return Object.keys(ke).map(function(Yt){return ke[Yt]})},ms={shape:Ci,flatten:kr};function ls(ke,Yt,Mn){for(var Rr=0;Rr<Yt;++Rr)Mn[Rr]=ke[Rr]}function Ct(ke,Yt,Mn,Rr){for(var Kr=0,Pr=0;Pr<Yt;++Pr)for(var yr=ke[Pr],Di=0;Di<Mn;++Di)Rr[Kr++]=yr[Di]}function Wt(ke,Yt,Mn,Rr,Kr,Pr){for(var yr=Pr,Di=0;Di<Yt;++Di)for(var vi=ke[Di],Hi=0;Hi<Mn;++Hi)for(var Li=vi[Hi],ki=0;ki<Rr;++ki)Kr[yr++]=Li[ki]}function jn(ke,Yt,Mn,Rr,Kr){for(var Pr=1,yr=Mn+1;yr<Yt.length;++yr)Pr*=Yt[yr];var Di=Yt[Mn];if(Yt.length-Mn===4){var vi=Yt[Mn+1],Hi=Yt[Mn+2],Li=Yt[Mn+3];for(yr=0;yr<Di;++yr)Wt(ke[yr],vi,Hi,Li,Rr,Kr),Kr+=Pr}else for(yr=0;yr<Di;++yr)jn(ke[yr],Yt,Mn+1,Rr,Kr),Kr+=Pr}function kr(ke,Yt,Mn,Rr){var Kr=1;if(Yt.length)for(var Pr=0;Pr<Yt.length;++Pr)Kr*=Yt[Pr];else Kr=0;var yr=Rr||Er.allocType(Mn,Kr);switch(Yt.length){case 0:break;case 1:ls(ke,Yt[0],yr);break;case 2:Ct(ke,Yt[0],Yt[1],yr);break;case 3:Wt(ke,Yt[0],Yt[1],Yt[2],yr,0);break;default:jn(ke,Yt,0,yr,0)}return yr}function Ci(ke){for(var Yt=[],Mn=ke;Mn.length;Mn=Mn[0])Yt.push(Mn.length);return Yt}var qi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ta=5120,Us=5122,Ls=5124,ks=5121,ll=5123,zh=5125,Up=5126,qf=5126,ru={int8:ta,int16:Us,int32:Ls,uint8:ks,uint16:ll,uint32:zh,float:Up,float32:qf},zf=35048,rf=35040,iu={dynamic:zf,stream:rf,static:35044},pu=ms.flatten,of=ms.shape,bf=35044,Tu=35040,As=5121,Xu=5126,af=[];af[5120]=1,af[5122]=2,af[5124]=4,af[5121]=1,af[5123]=2,af[5125]=4,af[5126]=4;function _d(ke){return qi[Object.prototype.toString.call(ke)]|0}function Jd(ke,Yt){for(var Mn=0;Mn<Yt.length;++Mn)ke[Mn]=Yt[Mn]}function Uf(ke,Yt,Mn,Rr,Kr,Pr,yr){for(var Di=0,vi=0;vi<Mn;++vi)for(var Hi=0;Hi<Rr;++Hi)ke[Di++]=Yt[Kr*vi+Pr*Hi+yr]}function bd(ke,Yt,Mn,Rr){var Kr=0,Pr={};function yr(dr){this.id=Kr++,this.buffer=ke.createBuffer(),this.type=dr,this.usage=bf,this.byteLength=0,this.dimension=1,this.dtype=As,this.persistentData=null,Mn.profile&&(this.stats={size:0})}yr.prototype.bind=function(){ke.bindBuffer(this.type,this.buffer)},yr.prototype.destroy=function(){Gi(this)};var Di=[];function vi(dr,jr){var Si=Di.pop();return Si||(Si=new yr(dr)),Si.bind(),ki(Si,jr,Tu,0,1,!1),Si}function Hi(dr){Di.push(dr)}function Li(dr,jr,Si){dr.byteLength=jr.byteLength,ke.bufferData(dr.type,jr,Si)}function ki(dr,jr,Si,fo,ui,ao){var Ti;if(dr.usage=Si,Array.isArray(jr)){if(dr.dtype=fo||Xu,jr.length>0){var ro;if(Array.isArray(jr[0])){Ti=of(jr);for(var ci=1,_i=1;_i<Ti.length;++_i)ci*=Ti[_i];dr.dimension=ci,ro=pu(jr,Ti,dr.dtype),Li(dr,ro,Si),ao?dr.persistentData=ro:Er.freeType(ro)}else if(typeof jr[0]=="number"){dr.dimension=ui;var No=Er.allocType(dr.dtype,jr.length);Jd(No,jr),Li(dr,No,Si),ao?dr.persistentData=No:Er.freeType(No)}else G(jr[0])?(dr.dimension=jr[0].length,dr.dtype=fo||_d(jr[0])||Xu,ro=pu(jr,[jr.length,jr[0].length],dr.dtype),Li(dr,ro,Si),ao?dr.persistentData=ro:Er.freeType(ro)):de.raise("invalid buffer data")}}else if(G(jr))dr.dtype=fo||_d(jr),dr.dimension=ui,Li(dr,jr,Si),ao&&(dr.persistentData=new Uint8Array(new Uint8Array(jr.buffer)));else if(ba(jr)){Ti=jr.shape;var ha=jr.stride,no=jr.offset,Oi=0,Jr=0,Vo=0,Ba=0;Ti.length===1?(Oi=Ti[0],Jr=1,Vo=ha[0],Ba=0):Ti.length===2?(Oi=Ti[0],Jr=Ti[1],Vo=ha[0],Ba=ha[1]):de.raise("invalid shape"),dr.dtype=fo||_d(jr.data)||Xu,dr.dimension=Jr;var so=Er.allocType(dr.dtype,Oi*Jr);Uf(so,jr.data,Oi,Jr,Vo,Ba,no),Li(dr,so,Si),ao?dr.persistentData=so:Er.freeType(so)}else jr instanceof ArrayBuffer?(dr.dtype=As,dr.dimension=ui,Li(dr,jr,Si),ao&&(dr.persistentData=new Uint8Array(new Uint8Array(jr)))):de.raise("invalid buffer data")}function Gi(dr){Yt.bufferCount--,Rr(dr);var jr=dr.buffer;de(jr,"buffer must not be deleted already"),ke.deleteBuffer(jr),dr.buffer=null,delete Pr[dr.id]}function Ei(dr,jr,Si,fo){Yt.bufferCount++;var ui=new yr(jr);Pr[ui.id]=ui;function ao(ci){var _i=bf,No=null,ha=0,no=0,Oi=1;return Array.isArray(ci)||G(ci)||ba(ci)||ci instanceof ArrayBuffer?No=ci:typeof ci=="number"?ha=ci|0:ci&&(de.type(ci,"object","buffer arguments must be an object, a number or an array"),"data"in ci&&(de(No===null||Array.isArray(No)||G(No)||ba(No),"invalid data for buffer"),No=ci.data),"usage"in ci&&(de.parameter(ci.usage,iu,"invalid buffer usage"),_i=iu[ci.usage]),"type"in ci&&(de.parameter(ci.type,ru,"invalid buffer type"),no=ru[ci.type]),"dimension"in ci&&(de.type(ci.dimension,"number","invalid dimension"),Oi=ci.dimension|0),"length"in ci&&(de.nni(ha,"buffer length must be a nonnegative integer"),ha=ci.length|0)),ui.bind(),No?ki(ui,No,_i,no,Oi,fo):(ha&&ke.bufferData(ui.type,ha,_i),ui.dtype=no||As,ui.usage=_i,ui.dimension=Oi,ui.byteLength=ha),Mn.profile&&(ui.stats.size=ui.byteLength*af[ui.dtype]),ao}function Ti(ci,_i){de(_i+ci.byteLength<=ui.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+ci.byteLength+" starting from offset "+_i+" to a buffer of size "+ui.byteLength),ke.bufferSubData(ui.type,_i,ci)}function ro(ci,_i){var No=(_i||0)|0,ha;if(ui.bind(),G(ci)||ci instanceof ArrayBuffer)Ti(ci,No);else if(Array.isArray(ci)){if(ci.length>0)if(typeof ci[0]=="number"){var no=Er.allocType(ui.dtype,ci.length);Jd(no,ci),Ti(no,No),Er.freeType(no)}else if(Array.isArray(ci[0])||G(ci[0])){ha=of(ci);var Oi=pu(ci,ha,ui.dtype);Ti(Oi,No),Er.freeType(Oi)}else de.raise("invalid buffer data")}else if(ba(ci)){ha=ci.shape;var Jr=ci.stride,Vo=0,Ba=0,so=0,va=0;ha.length===1?(Vo=ha[0],Ba=1,so=Jr[0],va=0):ha.length===2?(Vo=ha[0],Ba=ha[1],so=Jr[0],va=Jr[1]):de.raise("invalid shape");var da=Array.isArray(ci.data)?ui.dtype:_d(ci.data),qo=Er.allocType(da,Vo*Ba);Uf(qo,ci.data,Vo,Ba,so,va,ci.offset),Ti(qo,No),Er.freeType(qo)}else de.raise("invalid data for buffer subdata");return ao}return Si||ao(dr),ao._reglType="buffer",ao._buffer=ui,ao.subdata=ro,Mn.profile&&(ao.stats=ui.stats),ao.destroy=function(){Gi(ui)},ao}function Wi(){ra(Pr).forEach(function(dr){dr.buffer=ke.createBuffer(),ke.bindBuffer(dr.type,dr.buffer),ke.bufferData(dr.type,dr.persistentData||dr.byteLength,dr.usage)})}return Mn.profile&&(Yt.getTotalBufferSize=function(){var dr=0;return Object.keys(Pr).forEach(function(jr){dr+=Pr[jr].stats.size}),dr}),{create:Ei,createStream:vi,destroyStream:Hi,clear:function(){ra(Pr).forEach(Gi),Di.forEach(Gi)},getBuffer:function(dr){return dr&&dr._buffer instanceof yr?dr._buffer:null},restore:Wi,_initBuffer:ki}}var mh=0,Uh=0,jh=1,xd=1,l0=4,sf=4,Fc={points:mh,point:Uh,lines:jh,line:xd,triangles:l0,triangle:sf,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ed=0,Bl=1,bc=4,lf=5120,ou=5121,Bc=5122,uc=5123,xf=5124,Ol=5125,uf=34963,Ef=35040,Sd=35044;function wd(ke,Yt,Mn,Rr){var Kr={},Pr=0,yr={uint8:ou,uint16:uc};Yt.oes_element_index_uint&&(yr.uint32=Ol);function Di(Wi){this.id=Pr++,Kr[this.id]=this,this.buffer=Wi,this.primType=bc,this.vertCount=0,this.type=0}Di.prototype.bind=function(){this.buffer.bind()};var vi=[];function Hi(Wi){var dr=vi.pop();return dr||(dr=new Di(Mn.create(null,uf,!0,!1)._buffer)),ki(dr,Wi,Ef,-1,-1,0,0),dr}function Li(Wi){vi.push(Wi)}function ki(Wi,dr,jr,Si,fo,ui,ao){Wi.buffer.bind();var Ti;if(dr){var ro=ao;!ao&&(!G(dr)||ba(dr)&&!G(dr.data))&&(ro=Yt.oes_element_index_uint?Ol:uc),Mn._initBuffer(Wi.buffer,dr,jr,ro,3)}else ke.bufferData(uf,ui,jr),Wi.buffer.dtype=Ti||ou,Wi.buffer.usage=jr,Wi.buffer.dimension=3,Wi.buffer.byteLength=ui;if(Ti=ao,!ao){switch(Wi.buffer.dtype){case ou:case lf:Ti=ou;break;case uc:case Bc:Ti=uc;break;case Ol:case xf:Ti=Ol;break;default:de.raise("unsupported type for element array")}Wi.buffer.dtype=Ti}Wi.type=Ti,de(Ti!==Ol||!!Yt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var ci=fo;ci<0&&(ci=Wi.buffer.byteLength,Ti===uc?ci>>=1:Ti===Ol&&(ci>>=2)),Wi.vertCount=ci;var _i=Si;if(Si<0){_i=bc;var No=Wi.buffer.dimension;No===1&&(_i=Ed),No===2&&(_i=Bl),No===3&&(_i=bc)}Wi.primType=_i}function Gi(Wi){Rr.elementsCount--,de(Wi.buffer!==null,"must not double destroy elements"),delete Kr[Wi.id],Wi.buffer.destroy(),Wi.buffer=null}function Ei(Wi,dr){var jr=Mn.create(null,uf,!0),Si=new Di(jr._buffer);Rr.elementsCount++;function fo(ui){if(!ui)jr(),Si.primType=bc,Si.vertCount=0,Si.type=ou;else if(typeof ui=="number")jr(ui),Si.primType=bc,Si.vertCount=ui|0,Si.type=ou;else{var ao=null,Ti=Sd,ro=-1,ci=-1,_i=0,No=0;Array.isArray(ui)||G(ui)||ba(ui)?ao=ui:(de.type(ui,"object","invalid arguments for elements"),"data"in ui&&(ao=ui.data,de(Array.isArray(ao)||G(ao)||ba(ao),"invalid data for element buffer")),"usage"in ui&&(de.parameter(ui.usage,iu,"invalid element buffer usage"),Ti=iu[ui.usage]),"primitive"in ui&&(de.parameter(ui.primitive,Fc,"invalid element buffer primitive"),ro=Fc[ui.primitive]),"count"in ui&&(de(typeof ui.count=="number"&&ui.count>=0,"invalid vertex count for elements"),ci=ui.count|0),"type"in ui&&(de.parameter(ui.type,yr,"invalid buffer type"),No=yr[ui.type]),"length"in ui?_i=ui.length|0:(_i=ci,No===uc||No===Bc?_i*=2:(No===Ol||No===xf)&&(_i*=4))),ki(Si,ao,Ti,ro,ci,_i,No)}return fo}return fo(Wi),fo._reglType="elements",fo._elements=Si,fo.subdata=function(ui,ao){return jr.subdata(ui,ao),fo},fo.destroy=function(){Gi(Si)},fo}return{create:Ei,createStream:Hi,destroyStream:Li,getElements:function(Wi){return typeof Wi=="function"&&Wi._elements instanceof Di?Wi._elements:null},clear:function(){ra(Kr).forEach(Gi)}}}var xs=new Float32Array(1),ep=new Uint32Array(xs.buffer),Kf=5123;function Vh(ke){for(var Yt=Er.allocType(Kf,ke.length),Mn=0;Mn<ke.length;++Mn)if(isNaN(ke[Mn]))Yt[Mn]=65535;else if(ke[Mn]===1/0)Yt[Mn]=31744;else if(ke[Mn]===-1/0)Yt[Mn]=64512;else{xs[0]=ke[Mn];var Rr=ep[0],Kr=Rr>>>31<<15,Pr=(Rr<<1>>>24)-127,yr=Rr>>13&1024-1;if(Pr<-24)Yt[Mn]=Kr;else if(Pr<-14){var Di=-14-Pr;Yt[Mn]=Kr+(yr+1024>>Di)}else Pr>15?Yt[Mn]=Kr+31744:Yt[Mn]=Kr+(Pr+15<<10)+yr}return Yt}function ul(ke){return Array.isArray(ke)||G(ke)}var Hh=function(ke){return!(ke&ke-1)&&!!ke},gh=34467,vu=3553,kc=34067,Au=34069,xc=6408,Se=6406,ie=6407,ve=6409,et=6410,an=32854,cn=32855,tr=36194,Or=32819,Wr=32820,Fi=33635,xo=34042,_o=6402,La=34041,Na=35904,Ta=35906,Ca=36193,xa=33776,Fa=33777,Oa=33778,Za=33779,Sa=35986,ps=35987,Ws=34798,$s=35840,Ec=35841,pl=35842,cc=35843,cf=36196,fc=5121,zc=5123,Qf=5125,jf=5126,u0=10242,tp=10243,jp=10497,Sf=33071,c0=33648,np=10240,Td=10241,wf=9728,Vp=9729,yh=9984,rp=9985,Jf=9986,qs=9987,Ad=33170,Tf=4352,eh=4353,Ha=4354,ce=34046,He=3317,Et=37440,Pn=37441,ur=37443,zr=37444,pi=33984,Ii=[yh,Jf,rp,qs],Zo=[0,ve,et,ie,xc],Go={};Go[ve]=Go[Se]=Go[_o]=1,Go[La]=Go[et]=2,Go[ie]=Go[Na]=3,Go[xc]=Go[Ta]=4;function la(ke){return"[object "+ke+"]"}var Js=la("HTMLCanvasElement"),bl=la("OffscreenCanvas"),Es=la("CanvasRenderingContext2D"),oo=la("ImageBitmap"),Ml=la("HTMLImageElement"),_h=la("HTMLVideoElement"),Gh=Object.keys(qi).concat([Js,bl,Es,oo,Ml,_h]),Ja=[];Ja[fc]=1,Ja[jf]=4,Ja[Ca]=2,Ja[zc]=2,Ja[Qf]=4;var Ns=[];Ns[an]=2,Ns[cn]=2,Ns[tr]=2,Ns[La]=4,Ns[xa]=.5,Ns[Fa]=.5,Ns[Oa]=1,Ns[Za]=1,Ns[Sa]=.5,Ns[ps]=1,Ns[Ws]=1,Ns[$s]=.5,Ns[Ec]=.25,Ns[pl]=.5,Ns[cc]=.25,Ns[cf]=.5;function ff(ke){return Array.isArray(ke)&&(ke.length===0||typeof ke[0]=="number")}function Ui(ke){if(!Array.isArray(ke))return!1;var Yt=ke.length;return!(Yt===0||!ul(ke[0]))}function Af(ke){return Object.prototype.toString.call(ke)}function Cd(ke){return Af(ke)===Js}function bh(ke){return Af(ke)===bl}function Cf(ke){return Af(ke)===Es}function hc(ke){return Af(ke)===oo}function f0(ke){return Af(ke)===Ml}function xh(ke){return Af(ke)===_h}function Yu(ke){if(!ke)return!1;var Yt=Af(ke);return Gh.indexOf(Yt)>=0?!0:ff(ke)||Ui(ke)||ba(ke)}function th(ke){return qi[Object.prototype.toString.call(ke)]|0}function h0(ke,Yt){var Mn=Yt.length;switch(ke.type){case fc:case zc:case Qf:case jf:var Rr=Er.allocType(ke.type,Mn);Rr.set(Yt),ke.data=Rr;break;case Ca:ke.data=Vh(Yt);break;default:de.raise("unsupported texture type, must specify a typed array")}}function Od(ke,Yt){return Er.allocType(ke.type===Ca?jf:ke.type,Yt)}function d0(ke,Yt){ke.type===Ca?(ke.data=Vh(Yt),Er.freeType(Yt)):ke.data=Yt}function Z0(ke,Yt,Mn,Rr,Kr,Pr){for(var yr=ke.width,Di=ke.height,vi=ke.channels,Hi=yr*Di*vi,Li=Od(ke,Hi),ki=0,Gi=0;Gi<Di;++Gi)for(var Ei=0;Ei<yr;++Ei)for(var Wi=0;Wi<vi;++Wi)Li[ki++]=Yt[Mn*Ei+Rr*Gi+Kr*Wi+Pr];d0(ke,Li)}function dc(ke,Yt,Mn,Rr,Kr,Pr){var yr;if(typeof Ns[ke]!="undefined"?yr=Ns[ke]:yr=Go[ke]*Ja[Yt],Pr&&(yr*=6),Kr){for(var Di=0,vi=Mn;vi>=1;)Di+=yr*vi*vi,vi/=2;return Di}else return yr*Mn*Rr}function Uc(ke,Yt,Mn,Rr,Kr,Pr,yr){var Di={"don't care":Tf,"dont care":Tf,nice:Ha,fast:eh},vi={repeat:jp,clamp:Sf,mirror:c0},Hi={nearest:wf,linear:Vp},Li=L({mipmap:qs,"nearest mipmap nearest":yh,"linear mipmap nearest":rp,"nearest mipmap linear":Jf,"linear mipmap linear":qs},Hi),ki={none:0,browser:zr},Gi={uint8:fc,rgba4:Or,rgb565:Fi,"rgb5 a1":Wr},Ei={alpha:Se,luminance:ve,"luminance alpha":et,rgb:ie,rgba:xc,rgba4:an,"rgb5 a1":cn,rgb565:tr},Wi={};Yt.ext_srgb&&(Ei.srgb=Na,Ei.srgba=Ta),Yt.oes_texture_float&&(Gi.float32=Gi.float=jf),Yt.oes_texture_half_float&&(Gi.float16=Gi["half float"]=Ca),Yt.webgl_depth_texture&&(L(Ei,{depth:_o,"depth stencil":La}),L(Gi,{uint16:zc,uint32:Qf,"depth stencil":xo})),Yt.webgl_compressed_texture_s3tc&&L(Wi,{"rgb s3tc dxt1":xa,"rgba s3tc dxt1":Fa,"rgba s3tc dxt3":Oa,"rgba s3tc dxt5":Za}),Yt.webgl_compressed_texture_atc&&L(Wi,{"rgb atc":Sa,"rgba atc explicit alpha":ps,"rgba atc interpolated alpha":Ws}),Yt.webgl_compressed_texture_pvrtc&&L(Wi,{"rgb pvrtc 4bppv1":$s,"rgb pvrtc 2bppv1":Ec,"rgba pvrtc 4bppv1":pl,"rgba pvrtc 2bppv1":cc}),Yt.webgl_compressed_texture_etc1&&(Wi["rgb etc1"]=cf);var dr=Array.prototype.slice.call(ke.getParameter(gh));Object.keys(Wi).forEach(function(bn){var Lr=Wi[bn];dr.indexOf(Lr)>=0&&(Ei[bn]=Lr)});var jr=Object.keys(Ei);Mn.textureFormats=jr;var Si=[];Object.keys(Ei).forEach(function(bn){var Lr=Ei[bn];Si[Lr]=bn});var fo=[];Object.keys(Gi).forEach(function(bn){var Lr=Gi[bn];fo[Lr]=bn});var ui=[];Object.keys(Hi).forEach(function(bn){var Lr=Hi[bn];ui[Lr]=bn});var ao=[];Object.keys(Li).forEach(function(bn){var Lr=Li[bn];ao[Lr]=bn});var Ti=[];Object.keys(vi).forEach(function(bn){var Lr=vi[bn];Ti[Lr]=bn});var ro=jr.reduce(function(bn,Lr){var Sr=Ei[Lr];return Sr===ve||Sr===Se||Sr===ve||Sr===et||Sr===_o||Sr===La||Yt.ext_srgb&&(Sr===Na||Sr===Ta)?bn[Sr]=Sr:Sr===cn||Lr.indexOf("rgba")>=0?bn[Sr]=xc:bn[Sr]=ie,bn},{});function ci(){this.internalformat=xc,this.format=xc,this.type=fc,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=zr,this.width=0,this.height=0,this.channels=0}function _i(bn,Lr){bn.internalformat=Lr.internalformat,bn.format=Lr.format,bn.type=Lr.type,bn.compressed=Lr.compressed,bn.premultiplyAlpha=Lr.premultiplyAlpha,bn.flipY=Lr.flipY,bn.unpackAlignment=Lr.unpackAlignment,bn.colorSpace=Lr.colorSpace,bn.width=Lr.width,bn.height=Lr.height,bn.channels=Lr.channels}function No(bn,Lr){if(!(typeof Lr!="object"||!Lr)){if("premultiplyAlpha"in Lr&&(de.type(Lr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),bn.premultiplyAlpha=Lr.premultiplyAlpha),"flipY"in Lr&&(de.type(Lr.flipY,"boolean","invalid texture flip"),bn.flipY=Lr.flipY),"alignment"in Lr&&(de.oneOf(Lr.alignment,[1,2,4,8],"invalid texture unpack alignment"),bn.unpackAlignment=Lr.alignment),"colorSpace"in Lr&&(de.parameter(Lr.colorSpace,ki,"invalid colorSpace"),bn.colorSpace=ki[Lr.colorSpace]),"type"in Lr){var Sr=Lr.type;de(Yt.oes_texture_float||!(Sr==="float"||Sr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),de(Yt.oes_texture_half_float||!(Sr==="half float"||Sr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),de(Yt.webgl_depth_texture||!(Sr==="uint16"||Sr==="uint32"||Sr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),de.parameter(Sr,Gi,"invalid texture type"),bn.type=Gi[Sr]}var mo=bn.width,Pa=bn.height,Ya=bn.channels,Nt=!1;"shape"in Lr?(de(Array.isArray(Lr.shape)&&Lr.shape.length>=2,"shape must be an array"),mo=Lr.shape[0],Pa=Lr.shape[1],Lr.shape.length===3&&(Ya=Lr.shape[2],de(Ya>0&&Ya<=4,"invalid number of channels"),Nt=!0),de(mo>=0&&mo<=Mn.maxTextureSize,"invalid width"),de(Pa>=0&&Pa<=Mn.maxTextureSize,"invalid height")):("radius"in Lr&&(mo=Pa=Lr.radius,de(mo>=0&&mo<=Mn.maxTextureSize,"invalid radius")),"width"in Lr&&(mo=Lr.width,de(mo>=0&&mo<=Mn.maxTextureSize,"invalid width")),"height"in Lr&&(Pa=Lr.height,de(Pa>=0&&Pa<=Mn.maxTextureSize,"invalid height")),"channels"in Lr&&(Ya=Lr.channels,de(Ya>0&&Ya<=4,"invalid number of channels"),Nt=!0)),bn.width=mo|0,bn.height=Pa|0,bn.channels=Ya|0;var nn=!1;if("format"in Lr){var Rn=Lr.format;de(Yt.webgl_depth_texture||!(Rn==="depth"||Rn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),de.parameter(Rn,Ei,"invalid texture format");var Tr=bn.internalformat=Ei[Rn];bn.format=ro[Tr],Rn in Gi&&("type"in Lr||(bn.type=Gi[Rn])),Rn in Wi&&(bn.compressed=!0),nn=!0}!Nt&&nn?bn.channels=Go[bn.format]:Nt&&!nn?bn.channels!==Zo[bn.format]&&(bn.format=bn.internalformat=Zo[bn.channels]):nn&&Nt&&de(bn.channels===Go[bn.format],"number of channels inconsistent with specified format")}}function ha(bn){ke.pixelStorei(Et,bn.flipY),ke.pixelStorei(Pn,bn.premultiplyAlpha),ke.pixelStorei(ur,bn.colorSpace),ke.pixelStorei(He,bn.unpackAlignment)}function no(){ci.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Oi(bn,Lr){var Sr=null;if(Yu(Lr)?Sr=Lr:Lr&&(de.type(Lr,"object","invalid pixel data type"),No(bn,Lr),"x"in Lr&&(bn.xOffset=Lr.x|0),"y"in Lr&&(bn.yOffset=Lr.y|0),Yu(Lr.data)&&(Sr=Lr.data)),de(!bn.compressed||Sr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Lr.copy){de(!Sr,"can not specify copy and data field for the same texture");var mo=Kr.viewportWidth,Pa=Kr.viewportHeight;bn.width=bn.width||mo-bn.xOffset,bn.height=bn.height||Pa-bn.yOffset,bn.needsCopy=!0,de(bn.xOffset>=0&&bn.xOffset<mo&&bn.yOffset>=0&&bn.yOffset<Pa&&bn.width>0&&bn.width<=mo&&bn.height>0&&bn.height<=Pa,"copy texture read out of bounds")}else if(!Sr)bn.width=bn.width||1,bn.height=bn.height||1,bn.channels=bn.channels||4;else if(G(Sr))bn.channels=bn.channels||4,bn.data=Sr,!("type"in Lr)&&bn.type===fc&&(bn.type=th(Sr));else if(ff(Sr))bn.channels=bn.channels||4,h0(bn,Sr),bn.alignment=1,bn.needsFree=!0;else if(ba(Sr)){var Ya=Sr.data;!Array.isArray(Ya)&&bn.type===fc&&(bn.type=th(Ya));var Nt=Sr.shape,nn=Sr.stride,Rn,Tr,xr,Vn,Kn,rr;Nt.length===3?(xr=Nt[2],rr=nn[2]):(de(Nt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),xr=1,rr=1),Rn=Nt[0],Tr=Nt[1],Vn=nn[0],Kn=nn[1],bn.alignment=1,bn.width=Rn,bn.height=Tr,bn.channels=xr,bn.format=bn.internalformat=Zo[xr],bn.needsFree=!0,Z0(bn,Ya,Vn,Kn,rr,Sr.offset)}else if(Cd(Sr)||bh(Sr)||Cf(Sr))Cd(Sr)||bh(Sr)?bn.element=Sr:bn.element=Sr.canvas,bn.width=bn.element.width,bn.height=bn.element.height,bn.channels=4;else if(hc(Sr))bn.element=Sr,bn.width=Sr.width,bn.height=Sr.height,bn.channels=4;else if(f0(Sr))bn.element=Sr,bn.width=Sr.naturalWidth,bn.height=Sr.naturalHeight,bn.channels=4;else if(xh(Sr))bn.element=Sr,bn.width=Sr.videoWidth,bn.height=Sr.videoHeight,bn.channels=4;else if(Ui(Sr)){var xn=bn.width||Sr[0].length,Zn=bn.height||Sr.length,en=bn.channels;ul(Sr[0][0])?en=en||Sr[0][0].length:en=en||1;for(var Xn=ms.shape(Sr),Nr=1,Vr=0;Vr<Xn.length;++Vr)Nr*=Xn[Vr];var bi=Od(bn,Nr);ms.flatten(Sr,Xn,"",bi),d0(bn,bi),bn.alignment=1,bn.width=xn,bn.height=Zn,bn.channels=en,bn.format=bn.internalformat=Zo[en],bn.needsFree=!0}bn.type===jf?de(Mn.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):bn.type===Ca&&de(Mn.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Jr(bn,Lr,Sr){var mo=bn.element,Pa=bn.data,Ya=bn.internalformat,Nt=bn.format,nn=bn.type,Rn=bn.width,Tr=bn.height;ha(bn),mo?ke.texImage2D(Lr,Sr,Nt,Nt,nn,mo):bn.compressed?ke.compressedTexImage2D(Lr,Sr,Ya,Rn,Tr,0,Pa):bn.needsCopy?(Rr(),ke.copyTexImage2D(Lr,Sr,Nt,bn.xOffset,bn.yOffset,Rn,Tr,0)):ke.texImage2D(Lr,Sr,Nt,Rn,Tr,0,Nt,nn,Pa||null)}function Vo(bn,Lr,Sr,mo,Pa){var Ya=bn.element,Nt=bn.data,nn=bn.internalformat,Rn=bn.format,Tr=bn.type,xr=bn.width,Vn=bn.height;ha(bn),Ya?ke.texSubImage2D(Lr,Pa,Sr,mo,Rn,Tr,Ya):bn.compressed?ke.compressedTexSubImage2D(Lr,Pa,Sr,mo,nn,xr,Vn,Nt):bn.needsCopy?(Rr(),ke.copyTexSubImage2D(Lr,Pa,Sr,mo,bn.xOffset,bn.yOffset,xr,Vn)):ke.texSubImage2D(Lr,Pa,Sr,mo,xr,Vn,Rn,Tr,Nt)}var Ba=[];function so(){return Ba.pop()||new no}function va(bn){bn.needsFree&&Er.freeType(bn.data),no.call(bn),Ba.push(bn)}function da(){ci.call(this),this.genMipmaps=!1,this.mipmapHint=Tf,this.mipmask=0,this.images=Array(16)}function qo(bn,Lr,Sr){var mo=bn.images[0]=so();bn.mipmask=1,mo.width=bn.width=Lr,mo.height=bn.height=Sr,mo.channels=bn.channels=4}function fs(bn,Lr){var Sr=null;if(Yu(Lr))Sr=bn.images[0]=so(),_i(Sr,bn),Oi(Sr,Lr),bn.mipmask=1;else if(No(bn,Lr),Array.isArray(Lr.mipmap))for(var mo=Lr.mipmap,Pa=0;Pa<mo.length;++Pa)Sr=bn.images[Pa]=so(),_i(Sr,bn),Sr.width>>=Pa,Sr.height>>=Pa,Oi(Sr,mo[Pa]),bn.mipmask|=1<<Pa;else Sr=bn.images[0]=so(),_i(Sr,bn),Oi(Sr,Lr),bn.mipmask=1;_i(bn,bn.images[0]),bn.compressed&&(bn.internalformat===xa||bn.internalformat===Fa||bn.internalformat===Oa||bn.internalformat===Za)&&de(bn.width%4===0&&bn.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Il(bn,Lr){for(var Sr=bn.images,mo=0;mo<Sr.length;++mo){if(!Sr[mo])return;Jr(Sr[mo],Lr,mo)}}var Mu=[];function ts(){var bn=Mu.pop()||new da;ci.call(bn),bn.mipmask=0;for(var Lr=0;Lr<16;++Lr)bn.images[Lr]=null;return bn}function Zl(bn){for(var Lr=bn.images,Sr=0;Sr<Lr.length;++Sr)Lr[Sr]&&va(Lr[Sr]),Lr[Sr]=null;Mu.push(bn)}function tl(){this.minFilter=wf,this.magFilter=wf,this.wrapS=Sf,this.wrapT=Sf,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Tf}function ae(bn,Lr){if("min"in Lr){var Sr=Lr.min;de.parameter(Sr,Li),bn.minFilter=Li[Sr],Ii.indexOf(bn.minFilter)>=0&&!("faces"in Lr)&&(bn.genMipmaps=!0)}if("mag"in Lr){var mo=Lr.mag;de.parameter(mo,Hi),bn.magFilter=Hi[mo]}var Pa=bn.wrapS,Ya=bn.wrapT;if("wrap"in Lr){var Nt=Lr.wrap;typeof Nt=="string"?(de.parameter(Nt,vi),Pa=Ya=vi[Nt]):Array.isArray(Nt)&&(de.parameter(Nt[0],vi),de.parameter(Nt[1],vi),Pa=vi[Nt[0]],Ya=vi[Nt[1]])}else{if("wrapS"in Lr){var nn=Lr.wrapS;de.parameter(nn,vi),Pa=vi[nn]}if("wrapT"in Lr){var Rn=Lr.wrapT;de.parameter(Rn,vi),Ya=vi[Rn]}}if(bn.wrapS=Pa,bn.wrapT=Ya,"anisotropic"in Lr){var Tr=Lr.anisotropic;de(typeof Tr=="number"&&Tr>=1&&Tr<=Mn.maxAnisotropic,"aniso samples must be between 1 and "),bn.anisotropic=Lr.anisotropic}if("mipmap"in Lr){var xr=!1;switch(typeof Lr.mipmap){case"string":de.parameter(Lr.mipmap,Di,"invalid mipmap hint"),bn.mipmapHint=Di[Lr.mipmap],bn.genMipmaps=!0,xr=!0;break;case"boolean":xr=bn.genMipmaps=Lr.mipmap;break;case"object":de(Array.isArray(Lr.mipmap),"invalid mipmap type"),bn.genMipmaps=!1,xr=!0;break;default:de.raise("invalid mipmap type")}xr&&!("min"in Lr)&&(bn.minFilter=yh)}}function uu(bn,Lr){ke.texParameteri(Lr,Td,bn.minFilter),ke.texParameteri(Lr,np,bn.magFilter),ke.texParameteri(Lr,u0,bn.wrapS),ke.texParameteri(Lr,tp,bn.wrapT),Yt.ext_texture_filter_anisotropic&&ke.texParameteri(Lr,ce,bn.anisotropic),bn.genMipmaps&&(ke.hint(Ad,bn.mipmapHint),ke.generateMipmap(Lr))}var ml=0,cr={},ti=Mn.maxTextureUnits,gl=Array(ti).map(function(){return null});function Ma(bn){ci.call(this),this.mipmask=0,this.internalformat=xc,this.id=ml++,this.refCount=1,this.target=bn,this.texture=ke.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new tl,yr.profile&&(this.stats={size:0})}function tc(bn){ke.activeTexture(pi),ke.bindTexture(bn.target,bn.texture)}function Os(){var bn=gl[0];bn?ke.bindTexture(bn.target,bn.texture):ke.bindTexture(vu,null)}function ia(bn){var Lr=bn.texture;de(Lr,"must not double destroy texture");var Sr=bn.unit,mo=bn.target;Sr>=0&&(ke.activeTexture(pi+Sr),ke.bindTexture(mo,null),gl[Sr]=null),ke.deleteTexture(Lr),bn.texture=null,bn.params=null,bn.pixels=null,bn.refCount=0,delete cr[bn.id],Pr.textureCount--}L(Ma.prototype,{bind:function(){var bn=this;bn.bindCount+=1;var Lr=bn.unit;if(Lr<0){for(var Sr=0;Sr<ti;++Sr){var mo=gl[Sr];if(mo){if(mo.bindCount>0)continue;mo.unit=-1}gl[Sr]=bn,Lr=Sr;break}Lr>=ti&&de.raise("insufficient number of texture units"),yr.profile&&Pr.maxTextureUnits<Lr+1&&(Pr.maxTextureUnits=Lr+1),bn.unit=Lr,ke.activeTexture(pi+Lr),ke.bindTexture(bn.target,bn.texture)}return Lr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ia(this)}});function Xa(bn,Lr){var Sr=new Ma(vu);cr[Sr.id]=Sr,Pr.textureCount++;function mo(Nt,nn){var Rn=Sr.texInfo;tl.call(Rn);var Tr=ts();return typeof Nt=="number"?typeof nn=="number"?qo(Tr,Nt|0,nn|0):qo(Tr,Nt|0,Nt|0):Nt?(de.type(Nt,"object","invalid arguments to regl.texture"),ae(Rn,Nt),fs(Tr,Nt)):qo(Tr,1,1),Rn.genMipmaps&&(Tr.mipmask=(Tr.width<<1)-1),Sr.mipmask=Tr.mipmask,_i(Sr,Tr),de.texture2D(Rn,Tr,Mn),Sr.internalformat=Tr.internalformat,mo.width=Tr.width,mo.height=Tr.height,tc(Sr),Il(Tr,vu),uu(Rn,vu),Os(),Zl(Tr),yr.profile&&(Sr.stats.size=dc(Sr.internalformat,Sr.type,Tr.width,Tr.height,Rn.genMipmaps,!1)),mo.format=Si[Sr.internalformat],mo.type=fo[Sr.type],mo.mag=ui[Rn.magFilter],mo.min=ao[Rn.minFilter],mo.wrapS=Ti[Rn.wrapS],mo.wrapT=Ti[Rn.wrapT],mo}function Pa(Nt,nn,Rn,Tr){de(!!Nt,"must specify image data");var xr=nn|0,Vn=Rn|0,Kn=Tr|0,rr=so();return _i(rr,Sr),rr.width=0,rr.height=0,Oi(rr,Nt),rr.width=rr.width||(Sr.width>>Kn)-xr,rr.height=rr.height||(Sr.height>>Kn)-Vn,de(Sr.type===rr.type&&Sr.format===rr.format&&Sr.internalformat===rr.internalformat,"incompatible format for texture.subimage"),de(xr>=0&&Vn>=0&&xr+rr.width<=Sr.width&&Vn+rr.height<=Sr.height,"texture.subimage write out of bounds"),de(Sr.mipmask&1<<Kn,"missing mipmap data"),de(rr.data||rr.element||rr.needsCopy,"missing image data"),tc(Sr),Vo(rr,vu,xr,Vn,Kn),Os(),va(rr),mo}function Ya(Nt,nn){var Rn=Nt|0,Tr=nn|0||Rn;if(Rn===Sr.width&&Tr===Sr.height)return mo;mo.width=Sr.width=Rn,mo.height=Sr.height=Tr,tc(Sr);for(var xr=0;Sr.mipmask>>xr;++xr){var Vn=Rn>>xr,Kn=Tr>>xr;if(!Vn||!Kn)break;ke.texImage2D(vu,xr,Sr.format,Vn,Kn,0,Sr.format,Sr.type,null)}return Os(),yr.profile&&(Sr.stats.size=dc(Sr.internalformat,Sr.type,Rn,Tr,!1,!1)),mo}return mo(bn,Lr),mo.subimage=Pa,mo.resize=Ya,mo._reglType="texture2d",mo._texture=Sr,yr.profile&&(mo.stats=Sr.stats),mo.destroy=function(){Sr.decRef()},mo}function gs(bn,Lr,Sr,mo,Pa,Ya){var Nt=new Ma(kc);cr[Nt.id]=Nt,Pr.cubeCount++;var nn=new Array(6);function Rn(Vn,Kn,rr,xn,Zn,en){var Xn,Nr=Nt.texInfo;for(tl.call(Nr),Xn=0;Xn<6;++Xn)nn[Xn]=ts();if(typeof Vn=="number"||!Vn){var Vr=Vn|0||1;for(Xn=0;Xn<6;++Xn)qo(nn[Xn],Vr,Vr)}else if(typeof Vn=="object")if(Kn)fs(nn[0],Vn),fs(nn[1],Kn),fs(nn[2],rr),fs(nn[3],xn),fs(nn[4],Zn),fs(nn[5],en);else if(ae(Nr,Vn),No(Nt,Vn),"faces"in Vn){var bi=Vn.faces;for(de(Array.isArray(bi)&&bi.length===6,"cube faces must be a length 6 array"),Xn=0;Xn<6;++Xn)de(typeof bi[Xn]=="object"&&!!bi[Xn],"invalid input for cube map face"),_i(nn[Xn],Nt),fs(nn[Xn],bi[Xn])}else for(Xn=0;Xn<6;++Xn)fs(nn[Xn],Vn);else de.raise("invalid arguments to cube map");for(_i(Nt,nn[0]),Mn.npotTextureCube||de(Hh(Nt.width)&&Hh(Nt.height),"your browser does not support non power or two texture dimensions"),Nr.genMipmaps?Nt.mipmask=(nn[0].width<<1)-1:Nt.mipmask=nn[0].mipmask,de.textureCube(Nt,Nr,nn,Mn),Nt.internalformat=nn[0].internalformat,Rn.width=nn[0].width,Rn.height=nn[0].height,tc(Nt),Xn=0;Xn<6;++Xn)Il(nn[Xn],Au+Xn);for(uu(Nr,kc),Os(),yr.profile&&(Nt.stats.size=dc(Nt.internalformat,Nt.type,Rn.width,Rn.height,Nr.genMipmaps,!0)),Rn.format=Si[Nt.internalformat],Rn.type=fo[Nt.type],Rn.mag=ui[Nr.magFilter],Rn.min=ao[Nr.minFilter],Rn.wrapS=Ti[Nr.wrapS],Rn.wrapT=Ti[Nr.wrapT],Xn=0;Xn<6;++Xn)Zl(nn[Xn]);return Rn}function Tr(Vn,Kn,rr,xn,Zn){de(!!Kn,"must specify image data"),de(typeof Vn=="number"&&Vn===(Vn|0)&&Vn>=0&&Vn<6,"invalid face");var en=rr|0,Xn=xn|0,Nr=Zn|0,Vr=so();return _i(Vr,Nt),Vr.width=0,Vr.height=0,Oi(Vr,Kn),Vr.width=Vr.width||(Nt.width>>Nr)-en,Vr.height=Vr.height||(Nt.height>>Nr)-Xn,de(Nt.type===Vr.type&&Nt.format===Vr.format&&Nt.internalformat===Vr.internalformat,"incompatible format for texture.subimage"),de(en>=0&&Xn>=0&&en+Vr.width<=Nt.width&&Xn+Vr.height<=Nt.height,"texture.subimage write out of bounds"),de(Nt.mipmask&1<<Nr,"missing mipmap data"),de(Vr.data||Vr.element||Vr.needsCopy,"missing image data"),tc(Nt),Vo(Vr,Au+Vn,en,Xn,Nr),Os(),va(Vr),Rn}function xr(Vn){var Kn=Vn|0;if(Kn!==Nt.width){Rn.width=Nt.width=Kn,Rn.height=Nt.height=Kn,tc(Nt);for(var rr=0;rr<6;++rr)for(var xn=0;Nt.mipmask>>xn;++xn)ke.texImage2D(Au+rr,xn,Nt.format,Kn>>xn,Kn>>xn,0,Nt.format,Nt.type,null);return Os(),yr.profile&&(Nt.stats.size=dc(Nt.internalformat,Nt.type,Rn.width,Rn.height,!1,!0)),Rn}}return Rn(bn,Lr,Sr,mo,Pa,Ya),Rn.subimage=Tr,Rn.resize=xr,Rn._reglType="textureCube",Rn._texture=Nt,yr.profile&&(Rn.stats=Nt.stats),Rn.destroy=function(){Nt.decRef()},Rn}function Xl(){for(var bn=0;bn<ti;++bn)ke.activeTexture(pi+bn),ke.bindTexture(vu,null),gl[bn]=null;ra(cr).forEach(ia),Pr.cubeCount=0,Pr.textureCount=0}yr.profile&&(Pr.getTotalTextureSize=function(){var bn=0;return Object.keys(cr).forEach(function(Lr){bn+=cr[Lr].stats.size}),bn});function Bd(){for(var bn=0;bn<ti;++bn){var Lr=gl[bn];Lr&&(Lr.bindCount=0,Lr.unit=-1,gl[bn]=null)}ra(cr).forEach(function(Sr){Sr.texture=ke.createTexture(),ke.bindTexture(Sr.target,Sr.texture);for(var mo=0;mo<32;++mo)if(Sr.mipmask&1<<mo)if(Sr.target===vu)ke.texImage2D(vu,mo,Sr.internalformat,Sr.width>>mo,Sr.height>>mo,0,Sr.internalformat,Sr.type,null);else for(var Pa=0;Pa<6;++Pa)ke.texImage2D(Au+Pa,mo,Sr.internalformat,Sr.width>>mo,Sr.height>>mo,0,Sr.internalformat,Sr.type,null);uu(Sr.texInfo,Sr.target)})}return{create2D:Xa,createCube:gs,clear:Xl,getTexture:function(bn){return null},restore:Bd}}var Aa=36161,pc=32854,hf=32855,mu=36194,Wh=33189,Hl=36168,zu=34041,$u=35907,ip=34836,Bo=34842,Ao=34843,Gl=[];Gl[pc]=2,Gl[hf]=2,Gl[mu]=2,Gl[Wh]=2,Gl[Hl]=1,Gl[zu]=4,Gl[$u]=4,Gl[ip]=16,Gl[Bo]=8,Gl[Ao]=6;function qu(ke,Yt,Mn){return Gl[ke]*Yt*Mn}var Ku=function(ke,Yt,Mn,Rr,Kr){var Pr={rgba4:pc,rgb565:mu,"rgb5 a1":hf,depth:Wh,stencil:Hl,"depth stencil":zu};Yt.ext_srgb&&(Pr.srgba=$u),Yt.ext_color_buffer_half_float&&(Pr.rgba16f=Bo,Pr.rgb16f=Ao),Yt.webgl_color_buffer_float&&(Pr.rgba32f=ip);var yr=[];Object.keys(Pr).forEach(function(Ei){var Wi=Pr[Ei];yr[Wi]=Ei});var Di=0,vi={};function Hi(Ei){this.id=Di++,this.refCount=1,this.renderbuffer=Ei,this.format=pc,this.width=0,this.height=0,Kr.profile&&(this.stats={size:0})}Hi.prototype.decRef=function(){--this.refCount<=0&&Li(this)};function Li(Ei){var Wi=Ei.renderbuffer;de(Wi,"must not double destroy renderbuffer"),ke.bindRenderbuffer(Aa,null),ke.deleteRenderbuffer(Wi),Ei.renderbuffer=null,Ei.refCount=0,delete vi[Ei.id],Rr.renderbufferCount--}function ki(Ei,Wi){var dr=new Hi(ke.createRenderbuffer());vi[dr.id]=dr,Rr.renderbufferCount++;function jr(fo,ui){var ao=0,Ti=0,ro=pc;if(typeof fo=="object"&&fo){var ci=fo;if("shape"in ci){var _i=ci.shape;de(Array.isArray(_i)&&_i.length>=2,"invalid renderbuffer shape"),ao=_i[0]|0,Ti=_i[1]|0}else"radius"in ci&&(ao=Ti=ci.radius|0),"width"in ci&&(ao=ci.width|0),"height"in ci&&(Ti=ci.height|0);"format"in ci&&(de.parameter(ci.format,Pr,"invalid renderbuffer format"),ro=Pr[ci.format])}else typeof fo=="number"?(ao=fo|0,typeof ui=="number"?Ti=ui|0:Ti=ao):fo?de.raise("invalid arguments to renderbuffer constructor"):ao=Ti=1;if(de(ao>0&&Ti>0&&ao<=Mn.maxRenderbufferSize&&Ti<=Mn.maxRenderbufferSize,"invalid renderbuffer size"),!(ao===dr.width&&Ti===dr.height&&ro===dr.format))return jr.width=dr.width=ao,jr.height=dr.height=Ti,dr.format=ro,ke.bindRenderbuffer(Aa,dr.renderbuffer),ke.renderbufferStorage(Aa,ro,ao,Ti),de(ke.getError()===0,"invalid render buffer format"),Kr.profile&&(dr.stats.size=qu(dr.format,dr.width,dr.height)),jr.format=yr[dr.format],jr}function Si(fo,ui){var ao=fo|0,Ti=ui|0||ao;return ao===dr.width&&Ti===dr.height||(de(ao>0&&Ti>0&&ao<=Mn.maxRenderbufferSize&&Ti<=Mn.maxRenderbufferSize,"invalid renderbuffer size"),jr.width=dr.width=ao,jr.height=dr.height=Ti,ke.bindRenderbuffer(Aa,dr.renderbuffer),ke.renderbufferStorage(Aa,dr.format,ao,Ti),de(ke.getError()===0,"invalid render buffer format"),Kr.profile&&(dr.stats.size=qu(dr.format,dr.width,dr.height))),jr}return jr(Ei,Wi),jr.resize=Si,jr._reglType="renderbuffer",jr._renderbuffer=dr,Kr.profile&&(jr.stats=dr.stats),jr.destroy=function(){dr.decRef()},jr}Kr.profile&&(Rr.getTotalRenderbufferSize=function(){var Ei=0;return Object.keys(vi).forEach(function(Wi){Ei+=vi[Wi].stats.size}),Ei});function Gi(){ra(vi).forEach(function(Ei){Ei.renderbuffer=ke.createRenderbuffer(),ke.bindRenderbuffer(Aa,Ei.renderbuffer),ke.renderbufferStorage(Aa,Ei.format,Ei.width,Ei.height)}),ke.bindRenderbuffer(Aa,null)}return{create:ki,clear:function(){ra(vi).forEach(Li)},restore:Gi}},cl=36160,Sc=36161,nh=3553,Md=34069,Cs=36064,gu=36096,p0=36128,Zh=33306,op=36053,Eh=36054,Qu=36055,ap=36057,wc=36061,Hp=36193,jc=5121,Rd=5126,v0=6407,Sh=6408,Xh=6402,m0=[v0,Sh],Vf=[];Vf[Sh]=4,Vf[v0]=3;var Hf=[];Hf[jc]=1,Hf[Rd]=4,Hf[Hp]=2;var g0=32854,rh=32855,Of=36194,X0=33189,Gf=36168,Yh=34041,y0=35907,_=34836,S=34842,x=34843,O=[g0,rh,Of,y0,S,x,_],k={};k[op]="complete",k[Eh]="incomplete attachment",k[ap]="incomplete dimensions",k[Qu]="incomplete, missing attachment",k[wc]="unsupported";function Z(ke,Yt,Mn,Rr,Kr,Pr){var yr={cur:null,next:null,dirty:!1,setFBO:null},Di=["rgba"],vi=["rgba4","rgb565","rgb5 a1"];Yt.ext_srgb&&vi.push("srgba"),Yt.ext_color_buffer_half_float&&vi.push("rgba16f","rgb16f"),Yt.webgl_color_buffer_float&&vi.push("rgba32f");var Hi=["uint8"];Yt.oes_texture_half_float&&Hi.push("half float","float16"),Yt.oes_texture_float&&Hi.push("float","float32");function Li(no,Oi,Jr){this.target=no,this.texture=Oi,this.renderbuffer=Jr;var Vo=0,Ba=0;Oi?(Vo=Oi.width,Ba=Oi.height):Jr&&(Vo=Jr.width,Ba=Jr.height),this.width=Vo,this.height=Ba}function ki(no){no&&(no.texture&&no.texture._texture.decRef(),no.renderbuffer&&no.renderbuffer._renderbuffer.decRef())}function Gi(no,Oi,Jr){if(no)if(no.texture){var Vo=no.texture._texture,Ba=Math.max(1,Vo.width),so=Math.max(1,Vo.height);de(Ba===Oi&&so===Jr,"inconsistent width/height for supplied texture"),Vo.refCount+=1}else{var va=no.renderbuffer._renderbuffer;de(va.width===Oi&&va.height===Jr,"inconsistent width/height for renderbuffer"),va.refCount+=1}}function Ei(no,Oi){Oi&&(Oi.texture?ke.framebufferTexture2D(cl,no,Oi.target,Oi.texture._texture.texture,0):ke.framebufferRenderbuffer(cl,no,Sc,Oi.renderbuffer._renderbuffer.renderbuffer))}function Wi(no){var Oi=nh,Jr=null,Vo=null,Ba=no;typeof no=="object"&&(Ba=no.data,"target"in no&&(Oi=no.target|0)),de.type(Ba,"function","invalid attachment data");var so=Ba._reglType;return so==="texture2d"?(Jr=Ba,de(Oi===nh)):so==="textureCube"?(Jr=Ba,de(Oi>=Md&&Oi<Md+6,"invalid cube map target")):so==="renderbuffer"?(Vo=Ba,Oi=Sc):de.raise("invalid regl object for attachment"),new Li(Oi,Jr,Vo)}function dr(no,Oi,Jr,Vo,Ba){if(Jr){var so=Rr.create2D({width:no,height:Oi,format:Vo,type:Ba});return so._texture.refCount=0,new Li(nh,so,null)}else{var va=Kr.create({width:no,height:Oi,format:Vo});return va._renderbuffer.refCount=0,new Li(Sc,null,va)}}function jr(no){return no&&(no.texture||no.renderbuffer)}function Si(no,Oi,Jr){no&&(no.texture?no.texture.resize(Oi,Jr):no.renderbuffer&&no.renderbuffer.resize(Oi,Jr),no.width=Oi,no.height=Jr)}var fo=0,ui={};function ao(){this.id=fo++,ui[this.id]=this,this.framebuffer=ke.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ti(no){no.colorAttachments.forEach(ki),ki(no.depthAttachment),ki(no.stencilAttachment),ki(no.depthStencilAttachment)}function ro(no){var Oi=no.framebuffer;de(Oi,"must not double destroy framebuffer"),ke.deleteFramebuffer(Oi),no.framebuffer=null,Pr.framebufferCount--,delete ui[no.id]}function ci(no){var Oi;ke.bindFramebuffer(cl,no.framebuffer);var Jr=no.colorAttachments;for(Oi=0;Oi<Jr.length;++Oi)Ei(Cs+Oi,Jr[Oi]);for(Oi=Jr.length;Oi<Mn.maxColorAttachments;++Oi)ke.framebufferTexture2D(cl,Cs+Oi,nh,null,0);ke.framebufferTexture2D(cl,Zh,nh,null,0),ke.framebufferTexture2D(cl,gu,nh,null,0),ke.framebufferTexture2D(cl,p0,nh,null,0),Ei(gu,no.depthAttachment),Ei(p0,no.stencilAttachment),Ei(Zh,no.depthStencilAttachment);var Vo=ke.checkFramebufferStatus(cl);!ke.isContextLost()&&Vo!==op&&de.raise("framebuffer configuration not supported, status = "+k[Vo]),ke.bindFramebuffer(cl,yr.next?yr.next.framebuffer:null),yr.cur=yr.next,ke.getError()}function _i(no,Oi){var Jr=new ao;Pr.framebufferCount++;function Vo(so,va){var da;de(yr.next!==Jr,"can not update framebuffer which is currently in use");var qo=0,fs=0,Il=!0,Mu=!0,ts=null,Zl=!0,tl="rgba",ae="uint8",uu=1,ml=null,cr=null,ti=null,gl=!1;if(typeof so=="number")qo=so|0,fs=va|0||qo;else if(!so)qo=fs=1;else{de.type(so,"object","invalid arguments for framebuffer");var Ma=so;if("shape"in Ma){var tc=Ma.shape;de(Array.isArray(tc)&&tc.length>=2,"invalid shape for framebuffer"),qo=tc[0],fs=tc[1]}else"radius"in Ma&&(qo=fs=Ma.radius),"width"in Ma&&(qo=Ma.width),"height"in Ma&&(fs=Ma.height);("color"in Ma||"colors"in Ma)&&(ts=Ma.color||Ma.colors,Array.isArray(ts)&&de(ts.length===1||Yt.webgl_draw_buffers,"multiple render targets not supported")),ts||("colorCount"in Ma&&(uu=Ma.colorCount|0,de(uu>0,"invalid color buffer count")),"colorTexture"in Ma&&(Zl=!!Ma.colorTexture,tl="rgba4"),"colorType"in Ma&&(ae=Ma.colorType,Zl?(de(Yt.oes_texture_float||!(ae==="float"||ae==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),de(Yt.oes_texture_half_float||!(ae==="half float"||ae==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ae==="half float"||ae==="float16"?(de(Yt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),tl="rgba16f"):(ae==="float"||ae==="float32")&&(de(Yt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),tl="rgba32f"),de.oneOf(ae,Hi,"invalid color type")),"colorFormat"in Ma&&(tl=Ma.colorFormat,Di.indexOf(tl)>=0?Zl=!0:vi.indexOf(tl)>=0?Zl=!1:Zl?de.oneOf(Ma.colorFormat,Di,"invalid color format for texture"):de.oneOf(Ma.colorFormat,vi,"invalid color format for renderbuffer"))),("depthTexture"in Ma||"depthStencilTexture"in Ma)&&(gl=!!(Ma.depthTexture||Ma.depthStencilTexture),de(!gl||Yt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ma&&(typeof Ma.depth=="boolean"?Il=Ma.depth:(ml=Ma.depth,Mu=!1)),"stencil"in Ma&&(typeof Ma.stencil=="boolean"?Mu=Ma.stencil:(cr=Ma.stencil,Il=!1)),"depthStencil"in Ma&&(typeof Ma.depthStencil=="boolean"?Il=Mu=Ma.depthStencil:(ti=Ma.depthStencil,Il=!1,Mu=!1))}var Os=null,ia=null,Xa=null,gs=null;if(Array.isArray(ts))Os=ts.map(Wi);else if(ts)Os=[Wi(ts)];else for(Os=new Array(uu),da=0;da<uu;++da)Os[da]=dr(qo,fs,Zl,tl,ae);de(Yt.webgl_draw_buffers||Os.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),de(Os.length<=Mn.maxColorAttachments,"too many color attachments, not supported"),qo=qo||Os[0].width,fs=fs||Os[0].height,ml?ia=Wi(ml):Il&&!Mu&&(ia=dr(qo,fs,gl,"depth","uint32")),cr?Xa=Wi(cr):Mu&&!Il&&(Xa=dr(qo,fs,!1,"stencil","uint8")),ti?gs=Wi(ti):!ml&&!cr&&Mu&&Il&&(gs=dr(qo,fs,gl,"depth stencil","depth stencil")),de(!!ml+!!cr+!!ti<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Xl=null;for(da=0;da<Os.length;++da)if(Gi(Os[da],qo,fs),de(!Os[da]||Os[da].texture&&m0.indexOf(Os[da].texture._texture.format)>=0||Os[da].renderbuffer&&O.indexOf(Os[da].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+da+" is invalid"),Os[da]&&Os[da].texture){var Bd=Vf[Os[da].texture._texture.format]*Hf[Os[da].texture._texture.type];Xl===null?Xl=Bd:de(Xl===Bd,"all color attachments much have the same number of bits per pixel.")}return Gi(ia,qo,fs),de(!ia||ia.texture&&ia.texture._texture.format===Xh||ia.renderbuffer&&ia.renderbuffer._renderbuffer.format===X0,"invalid depth attachment for framebuffer object"),Gi(Xa,qo,fs),de(!Xa||Xa.renderbuffer&&Xa.renderbuffer._renderbuffer.format===Gf,"invalid stencil attachment for framebuffer object"),Gi(gs,qo,fs),de(!gs||gs.texture&&gs.texture._texture.format===Yh||gs.renderbuffer&&gs.renderbuffer._renderbuffer.format===Yh,"invalid depth-stencil attachment for framebuffer object"),Ti(Jr),Jr.width=qo,Jr.height=fs,Jr.colorAttachments=Os,Jr.depthAttachment=ia,Jr.stencilAttachment=Xa,Jr.depthStencilAttachment=gs,Vo.color=Os.map(jr),Vo.depth=jr(ia),Vo.stencil=jr(Xa),Vo.depthStencil=jr(gs),Vo.width=Jr.width,Vo.height=Jr.height,ci(Jr),Vo}function Ba(so,va){de(yr.next!==Jr,"can not resize a framebuffer which is currently in use");var da=Math.max(so|0,1),qo=Math.max(va|0||da,1);if(da===Jr.width&&qo===Jr.height)return Vo;for(var fs=Jr.colorAttachments,Il=0;Il<fs.length;++Il)Si(fs[Il],da,qo);return Si(Jr.depthAttachment,da,qo),Si(Jr.stencilAttachment,da,qo),Si(Jr.depthStencilAttachment,da,qo),Jr.width=Vo.width=da,Jr.height=Vo.height=qo,ci(Jr),Vo}return Vo(no,Oi),L(Vo,{resize:Ba,_reglType:"framebuffer",_framebuffer:Jr,destroy:function(){ro(Jr),Ti(Jr)},use:function(so){yr.setFBO({framebuffer:Vo},so)}})}function No(no){var Oi=Array(6);function Jr(Ba){var so;de(Oi.indexOf(yr.next)<0,"can not update framebuffer which is currently in use");var va={color:null},da=0,qo=null,fs="rgba",Il="uint8",Mu=1;if(typeof Ba=="number")da=Ba|0;else if(!Ba)da=1;else{de.type(Ba,"object","invalid arguments for framebuffer");var ts=Ba;if("shape"in ts){var Zl=ts.shape;de(Array.isArray(Zl)&&Zl.length>=2,"invalid shape for framebuffer"),de(Zl[0]===Zl[1],"cube framebuffer must be square"),da=Zl[0]}else"radius"in ts&&(da=ts.radius|0),"width"in ts?(da=ts.width|0,"height"in ts&&de(ts.height===da,"must be square")):"height"in ts&&(da=ts.height|0);("color"in ts||"colors"in ts)&&(qo=ts.color||ts.colors,Array.isArray(qo)&&de(qo.length===1||Yt.webgl_draw_buffers,"multiple render targets not supported")),qo||("colorCount"in ts&&(Mu=ts.colorCount|0,de(Mu>0,"invalid color buffer count")),"colorType"in ts&&(de.oneOf(ts.colorType,Hi,"invalid color type"),Il=ts.colorType),"colorFormat"in ts&&(fs=ts.colorFormat,de.oneOf(ts.colorFormat,Di,"invalid color format for texture"))),"depth"in ts&&(va.depth=ts.depth),"stencil"in ts&&(va.stencil=ts.stencil),"depthStencil"in ts&&(va.depthStencil=ts.depthStencil)}var tl;if(qo)if(Array.isArray(qo))for(tl=[],so=0;so<qo.length;++so)tl[so]=qo[so];else tl=[qo];else{tl=Array(Mu);var ae={radius:da,format:fs,type:Il};for(so=0;so<Mu;++so)tl[so]=Rr.createCube(ae)}for(va.color=Array(tl.length),so=0;so<tl.length;++so){var uu=tl[so];de(typeof uu=="function"&&uu._reglType==="textureCube","invalid cube map"),da=da||uu.width,de(uu.width===da&&uu.height===da,"invalid cube map shape"),va.color[so]={target:Md,data:tl[so]}}for(so=0;so<6;++so){for(var ml=0;ml<tl.length;++ml)va.color[ml].target=Md+so;so>0&&(va.depth=Oi[0].depth,va.stencil=Oi[0].stencil,va.depthStencil=Oi[0].depthStencil),Oi[so]?Oi[so](va):Oi[so]=_i(va)}return L(Jr,{width:da,height:da,color:tl})}function Vo(Ba){var so,va=Ba|0;if(de(va>0&&va<=Mn.maxCubeMapSize,"invalid radius for cube fbo"),va===Jr.width)return Jr;var da=Jr.color;for(so=0;so<da.length;++so)da[so].resize(va);for(so=0;so<6;++so)Oi[so].resize(va);return Jr.width=Jr.height=va,Jr}return Jr(no),L(Jr,{faces:Oi,resize:Vo,_reglType:"framebufferCube",destroy:function(){Oi.forEach(function(Ba){Ba.destroy()})}})}function ha(){yr.cur=null,yr.next=null,yr.dirty=!0,ra(ui).forEach(function(no){no.framebuffer=ke.createFramebuffer(),ci(no)})}return L(yr,{getFramebuffer:function(no){if(typeof no=="function"&&no._reglType==="framebuffer"){var Oi=no._framebuffer;if(Oi instanceof ao)return Oi}return null},create:_i,createCube:No,clear:function(){ra(ui).forEach(ro)},restore:ha})}var Q=5126,ge=34962;function je(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Q,this.offset=0,this.stride=0,this.divisor=0}function ft(ke,Yt,Mn,Rr,Kr){for(var Pr=Mn.maxAttributes,yr=new Array(Pr),Di=0;Di<Pr;++Di)yr[Di]=new je;var vi=0,Hi={},Li={Record:je,scope:{},state:yr,currentVAO:null,targetVAO:null,restore:Gi()?ui:function(){},createVAO:ao,getVAO:Wi,destroyBuffer:ki,setVAO:Gi()?dr:jr,clear:Gi()?Si:function(){}};function ki(Ti){for(var ro=0;ro<yr.length;++ro){var ci=yr[ro];ci.buffer===Ti&&(ke.disableVertexAttribArray(ro),ci.buffer=null)}}function Gi(){return Yt.oes_vertex_array_object}function Ei(){return Yt.angle_instanced_arrays}function Wi(Ti){return typeof Ti=="function"&&Ti._vao?Ti._vao:null}function dr(Ti){if(Ti!==Li.currentVAO){var ro=Gi();Ti?ro.bindVertexArrayOES(Ti.vao):ro.bindVertexArrayOES(null),Li.currentVAO=Ti}}function jr(Ti){if(Ti!==Li.currentVAO){if(Ti)Ti.bindAttrs();else for(var ro=Ei(),ci=0;ci<yr.length;++ci){var _i=yr[ci];_i.buffer?(ke.enableVertexAttribArray(ci),ke.vertexAttribPointer(ci,_i.size,_i.type,_i.normalized,_i.stride,_i.offfset),ro&&ro.vertexAttribDivisorANGLE(ci,_i.divisor)):(ke.disableVertexAttribArray(ci),ke.vertexAttrib4f(ci,_i.x,_i.y,_i.z,_i.w))}Li.currentVAO=Ti}}function Si(){ra(Hi).forEach(function(Ti){Ti.destroy()})}function fo(){this.id=++vi,this.attributes=[];var Ti=Gi();Ti?this.vao=Ti.createVertexArrayOES():this.vao=null,Hi[this.id]=this,this.buffers=[]}fo.prototype.bindAttrs=function(){for(var Ti=Ei(),ro=this.attributes,ci=0;ci<ro.length;++ci){var _i=ro[ci];_i.buffer?(ke.enableVertexAttribArray(ci),ke.bindBuffer(ge,_i.buffer.buffer),ke.vertexAttribPointer(ci,_i.size,_i.type,_i.normalized,_i.stride,_i.offset),Ti&&Ti.vertexAttribDivisorANGLE(ci,_i.divisor)):(ke.disableVertexAttribArray(ci),ke.vertexAttrib4f(ci,_i.x,_i.y,_i.z,_i.w))}for(var No=ro.length;No<Pr;++No)ke.disableVertexAttribArray(No)},fo.prototype.refresh=function(){var Ti=Gi();Ti&&(Ti.bindVertexArrayOES(this.vao),this.bindAttrs(),Li.currentVAO=this)},fo.prototype.destroy=function(){if(this.vao){var Ti=Gi();this===Li.currentVAO&&(Li.currentVAO=null,Ti.bindVertexArrayOES(null)),Ti.deleteVertexArrayOES(this.vao),this.vao=null}Hi[this.id]&&(delete Hi[this.id],Rr.vaoCount-=1)};function ui(){var Ti=Gi();Ti&&ra(Hi).forEach(function(ro){ro.refresh()})}function ao(Ti){var ro=new fo;Rr.vaoCount+=1;function ci(_i){de(Array.isArray(_i),"arguments to vertex array constructor must be an array"),de(_i.length<Pr,"too many attributes"),de(_i.length>0,"must specify at least one attribute");for(var No=0;No<ro.buffers.length;++No)ro.buffers[No].destroy();ro.buffers.length=0;var ha=ro.attributes;ha.length=_i.length;for(var no=0;no<_i.length;++no){var Oi=_i[no],Jr=ha[no]=new je;if(Array.isArray(Oi)||G(Oi)||ba(Oi)){var Vo=Kr.create(Oi,ge,!1,!0);Jr.buffer=Kr.getBuffer(Vo),Jr.size=Jr.buffer.dimension|0,Jr.normalized=!1,Jr.type=Jr.buffer.dtype,Jr.offset=0,Jr.stride=0,Jr.divisor=0,Jr.state=1,ro.buffers.push(Vo)}else Kr.getBuffer(Oi)?(Jr.buffer=Kr.getBuffer(Oi),Jr.size=Jr.buffer.dimension|0,Jr.normalized=!1,Jr.type=Jr.buffer.dtype,Jr.offset=0,Jr.stride=0,Jr.divisor=0,Jr.state=1):Kr.getBuffer(Oi.buffer)?(Jr.buffer=Kr.getBuffer(Oi.buffer),Jr.size=(+Oi.size||Jr.buffer.dimension)|0,Jr.normalized=!!Oi.normalized||!1,"type"in Oi?(de.parameter(Oi.type,ru,"invalid buffer type"),Jr.type=ru[Oi.type]):Jr.type=Jr.buffer.dtype,Jr.offset=(Oi.offset||0)|0,Jr.stride=(Oi.stride||0)|0,Jr.divisor=(Oi.divisor||0)|0,Jr.state=1,de(Jr.size>=1&&Jr.size<=4,"size must be between 1 and 4"),de(Jr.offset>=0,"invalid offset"),de(Jr.stride>=0&&Jr.stride<=255,"stride must be between 0 and 255"),de(Jr.divisor>=0,"divisor must be positive"),de(!Jr.divisor||!!Yt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Oi?(de(no>0,"first attribute must not be a constant"),Jr.x=+Oi.x||0,Jr.y=+Oi.y||0,Jr.z=+Oi.z||0,Jr.w=+Oi.w||0,Jr.state=2):de(!1,"invalid attribute spec for location "+no)}return ro.refresh(),ci}return ci.destroy=function(){ro.destroy()},ci._vao=ro,ci._reglType="vao",ci(Ti)}return Li}var Ut=35632,Vt=35633,Zt=35718,En=35721;function mn(ke,Yt,Mn,Rr){var Kr={},Pr={};function yr(dr,jr,Si,fo){this.name=dr,this.id=jr,this.location=Si,this.info=fo}function Di(dr,jr){for(var Si=0;Si<dr.length;++Si)if(dr[Si].id===jr.id){dr[Si].location=jr.location;return}dr.push(jr)}function vi(dr,jr,Si){var fo=dr===Ut?Kr:Pr,ui=fo[jr];if(!ui){var ao=Yt.str(jr);ui=ke.createShader(dr),ke.shaderSource(ui,ao),ke.compileShader(ui),de.shaderError(ke,ui,ao,dr,Si),fo[jr]=ui}return ui}var Hi={},Li=[],ki=0;function Gi(dr,jr){this.id=ki++,this.fragId=dr,this.vertId=jr,this.program=null,this.uniforms=[],this.attributes=[],Rr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ei(dr,jr,Si){var fo,ui,ao=vi(Ut,dr.fragId),Ti=vi(Vt,dr.vertId),ro=dr.program=ke.createProgram();if(ke.attachShader(ro,ao),ke.attachShader(ro,Ti),Si)for(fo=0;fo<Si.length;++fo){var ci=Si[fo];ke.bindAttribLocation(ro,ci[0],ci[1])}ke.linkProgram(ro),de.linkError(ke,ro,Yt.str(dr.fragId),Yt.str(dr.vertId),jr);var _i=ke.getProgramParameter(ro,Zt);Rr.profile&&(dr.stats.uniformsCount=_i);var No=dr.uniforms;for(fo=0;fo<_i;++fo)if(ui=ke.getActiveUniform(ro,fo),ui)if(ui.size>1)for(var ha=0;ha<ui.size;++ha){var no=ui.name.replace("[0]","["+ha+"]");Di(No,new yr(no,Yt.id(no),ke.getUniformLocation(ro,no),ui))}else Di(No,new yr(ui.name,Yt.id(ui.name),ke.getUniformLocation(ro,ui.name),ui));var Oi=ke.getProgramParameter(ro,En);Rr.profile&&(dr.stats.attributesCount=Oi);var Jr=dr.attributes;for(fo=0;fo<Oi;++fo)ui=ke.getActiveAttrib(ro,fo),ui&&Di(Jr,new yr(ui.name,Yt.id(ui.name),ke.getAttribLocation(ro,ui.name),ui))}Rr.profile&&(Mn.getMaxUniformsCount=function(){var dr=0;return Li.forEach(function(jr){jr.stats.uniformsCount>dr&&(dr=jr.stats.uniformsCount)}),dr},Mn.getMaxAttributesCount=function(){var dr=0;return Li.forEach(function(jr){jr.stats.attributesCount>dr&&(dr=jr.stats.attributesCount)}),dr});function Wi(){Kr={},Pr={};for(var dr=0;dr<Li.length;++dr)Ei(Li[dr],null,Li[dr].attributes.map(function(jr){return[jr.location,jr.name]}))}return{clear:function(){var dr=ke.deleteShader.bind(ke);ra(Kr).forEach(dr),Kr={},ra(Pr).forEach(dr),Pr={},Li.forEach(function(jr){ke.deleteProgram(jr.program)}),Li.length=0,Hi={},Mn.shaderCount=0},program:function(dr,jr,Si,fo){de.command(dr>=0,"missing vertex shader",Si),de.command(jr>=0,"missing fragment shader",Si);var ui=Hi[jr];ui||(ui=Hi[jr]={});var ao=ui[dr];if(ao&&!fo)return ao;var Ti=new Gi(jr,dr);return Mn.shaderCount++,Ei(Ti,Si,fo),ao||(ui[dr]=Ti),Li.push(Ti),Ti},restore:Wi,shader:vi,frag:-1,vert:-1}}var Un=6408,ln=5121,kn=3333,Jn=5126;function gr(ke,Yt,Mn,Rr,Kr,Pr,yr){function Di(Li){var ki;Yt.next===null?(de(Kr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ki=ln):(de(Yt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ki=Yt.next.colorAttachments[0].texture._texture.type,Pr.oes_texture_float?(de(ki===ln||ki===Jn,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ki===Jn&&de(yr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):de(ki===ln,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Gi=0,Ei=0,Wi=Rr.framebufferWidth,dr=Rr.framebufferHeight,jr=null;G(Li)?jr=Li:Li&&(de.type(Li,"object","invalid arguments to regl.read()"),Gi=Li.x|0,Ei=Li.y|0,de(Gi>=0&&Gi<Rr.framebufferWidth,"invalid x offset for regl.read"),de(Ei>=0&&Ei<Rr.framebufferHeight,"invalid y offset for regl.read"),Wi=(Li.width||Rr.framebufferWidth-Gi)|0,dr=(Li.height||Rr.framebufferHeight-Ei)|0,jr=Li.data||null),jr&&(ki===ln?de(jr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ki===Jn&&de(jr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),de(Wi>0&&Wi+Gi<=Rr.framebufferWidth,"invalid width for read pixels"),de(dr>0&&dr+Ei<=Rr.framebufferHeight,"invalid height for read pixels"),Mn();var Si=Wi*dr*4;return jr||(ki===ln?jr=new Uint8Array(Si):ki===Jn&&(jr=jr||new Float32Array(Si))),de.isTypedArray(jr,"data buffer for regl.read() must be a typedarray"),de(jr.byteLength>=Si,"data buffer for regl.read() too small"),ke.pixelStorei(kn,4),ke.readPixels(Gi,Ei,Wi,dr,Un,ki,jr),jr}function vi(Li){var ki;return Yt.setFBO({framebuffer:Li.framebuffer},function(){ki=Di(Li)}),ki}function Hi(Li){return!Li||!("framebuffer"in Li)?Di(Li):vi(Li)}return Hi}function Ir(ke){return Array.prototype.slice.call(ke)}function Mr(ke){return Ir(ke).join("")}function Ur(){var ke=0,Yt=[],Mn=[];function Rr(ki){for(var Gi=0;Gi<Mn.length;++Gi)if(Mn[Gi]===ki)return Yt[Gi];var Ei="g"+ke++;return Yt.push(Ei),Mn.push(ki),Ei}function Kr(){var ki=[];function Gi(){ki.push.apply(ki,Ir(arguments))}var Ei=[];function Wi(){var dr="v"+ke++;return Ei.push(dr),arguments.length>0&&(ki.push(dr,"="),ki.push.apply(ki,Ir(arguments)),ki.push(";")),dr}return L(Gi,{def:Wi,toString:function(){return Mr([Ei.length>0?"var "+Ei.join(",")+";":"",Mr(ki)])}})}function Pr(){var ki=Kr(),Gi=Kr(),Ei=ki.toString,Wi=Gi.toString;function dr(jr,Si){Gi(jr,Si,"=",ki.def(jr,Si),";")}return L(function(){ki.apply(ki,Ir(arguments))},{def:ki.def,entry:ki,exit:Gi,save:dr,set:function(jr,Si,fo){dr(jr,Si),ki(jr,Si,"=",fo,";")},toString:function(){return Ei()+Wi()}})}function yr(){var ki=Mr(arguments),Gi=Pr(),Ei=Pr(),Wi=Gi.toString,dr=Ei.toString;return L(Gi,{then:function(){return Gi.apply(Gi,Ir(arguments)),this},else:function(){return Ei.apply(Ei,Ir(arguments)),this},toString:function(){var jr=dr();return jr&&(jr="else{"+jr+"}"),Mr(["if(",ki,"){",Wi(),"}",jr])}})}var Di=Kr(),vi={};function Hi(ki,Gi){var Ei=[];function Wi(){var ui="a"+Ei.length;return Ei.push(ui),ui}Gi=Gi||0;for(var dr=0;dr<Gi;++dr)Wi();var jr=Pr(),Si=jr.toString,fo=vi[ki]=L(jr,{arg:Wi,toString:function(){return Mr(["function(",Ei.join(),"){",Si(),"}"])}});return fo}function Li(){var ki=['"use strict";',Di,"return {"];Object.keys(vi).forEach(function(Wi){ki.push('"',Wi,'":',vi[Wi].toString(),",")}),ki.push("}");var Gi=Mr(ki).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Ei=Function.apply(null,Yt.concat(Gi));return Ei.apply(null,Mn)}return{global:Di,link:Rr,block:Kr,proc:Hi,scope:Pr,cond:yr,compile:Li}}var si="xyzw".split(""),Vi=5121,Bi=1,vo=2,jo=0,Xo=1,Yo=2,cs=3,Dr=4,Qt="dither",ga="blend.enable",fa="blend.color",Qo="blend.equation",Ea="blend.func",aa="depth.enable",ko="depth.func",au="depth.range",xl="depth.mask",Cu="colorMask",su="cull.enable",Ss="cull.face",vl="frontFace",fl="lineWidth",vc="polygonOffset.enable",Wf="polygonOffset.offset",Tc="sample.alpha",df="sample.enable",Vc="sample.coverage",sp="stencil.enable",lp="stencil.mask",wh="stencil.func",$h="stencil.opFront",qh="stencil.opBack",ih="scissor.enable",Mi="scissor.box",Rl="viewport",Pl="profile",Ju="framebuffer",Mf="vert",Rf="frag",es="elements",Ou="primitive",Wl="count",oh="offset",_0="instances",Pd="vao",b0="Width",Kh="Height",Id=Ju+b0,ah=Ju+Kh,up=Rl+b0,Y0=Rl+Kh,Qh="drawingBuffer",Hc=Qh+b0,vg=Qh+Kh,Ty=[Ea,Qo,wh,$h,qh,Vc,Rl,Mi,Wf],$0=34962,l1=34963,q0=35632,mg=35633,Rv=3553,Ay=34067,x0=2884,xm=3042,cp=3024,Pv=2960,Cy=2929,gg=3089,yg=32823,_g=32926,bg=32928,xg=5126,fp=35664,Gp=35665,K0=35666,Dd=5124,Iv=35667,kl=35668,Th=35669,Q0=35670,E0=35671,S0=35672,Jh=35673,hp=35674,Ld=35675,ed=35676,td=35678,Nd=35680,Oy=4,dp=1028,pp=1029,Dv=2304,Pf=2305,w0=32775,Lv=32776,If=519,Wp=7680,Eg=0,Sg=1,Nv=32774,Em=513,nd=36160,Zp=36064,rd={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},wg=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],vp={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Fd={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},mp={frag:q0,vert:mg},pf={cw:Dv,ccw:Pf};function J0(ke){return Array.isArray(ke)||G(ke)||ba(ke)}function ev(ke){return ke.sort(function(Yt,Mn){return Yt===Rl?-1:Mn===Rl?1:Yt<Mn?-1:1})}function Uu(ke,Yt,Mn,Rr){this.thisDep=ke,this.contextDep=Yt,this.propDep=Mn,this.append=Rr}function ec(ke){return ke&&!(ke.thisDep||ke.contextDep||ke.propDep)}function lu(ke){return new Uu(!1,!1,!1,ke)}function Zf(ke,Yt){var Mn=ke.type;if(Mn===jo){var Rr=ke.data.length;return new Uu(!0,Rr>=1,Rr>=2,Yt)}else if(Mn===Dr){var Kr=ke.data;return new Uu(Kr.thisDep,Kr.contextDep,Kr.propDep,Yt)}else return new Uu(Mn===cs,Mn===Yo,Mn===Xo,Yt)}var My=new Uu(!1,!1,!1,function(){});function el(ke,Yt,Mn,Rr,Kr,Pr,yr,Di,vi,Hi,Li,ki,Gi,Ei,Wi){var dr=Hi.Record,jr={add:32774,subtract:32778,"reverse subtract":32779};Mn.ext_blend_minmax&&(jr.min=w0,jr.max=Lv);var Si=Mn.angle_instanced_arrays,fo=Mn.webgl_draw_buffers,ui={dirty:!0,profile:Wi.profile},ao={},Ti=[],ro={},ci={};function _i(Nt){return Nt.replace(".","_")}function No(Nt,nn,Rn){var Tr=_i(Nt);Ti.push(Nt),ao[Tr]=ui[Tr]=!!Rn,ro[Tr]=nn}function ha(Nt,nn,Rn){var Tr=_i(Nt);Ti.push(Nt),Array.isArray(Rn)?(ui[Tr]=Rn.slice(),ao[Tr]=Rn.slice()):ui[Tr]=ao[Tr]=Rn,ci[Tr]=nn}No(Qt,cp),No(ga,xm),ha(fa,"blendColor",[0,0,0,0]),ha(Qo,"blendEquationSeparate",[Nv,Nv]),ha(Ea,"blendFuncSeparate",[Sg,Eg,Sg,Eg]),No(aa,Cy,!0),ha(ko,"depthFunc",Em),ha(au,"depthRange",[0,1]),ha(xl,"depthMask",!0),ha(Cu,Cu,[!0,!0,!0,!0]),No(su,x0),ha(Ss,"cullFace",pp),ha(vl,vl,Pf),ha(fl,fl,1),No(vc,yg),ha(Wf,"polygonOffset",[0,0]),No(Tc,_g),No(df,bg),ha(Vc,"sampleCoverage",[1,!1]),No(sp,Pv),ha(lp,"stencilMask",-1),ha(wh,"stencilFunc",[If,0,-1]),ha($h,"stencilOpSeparate",[dp,Wp,Wp,Wp]),ha(qh,"stencilOpSeparate",[pp,Wp,Wp,Wp]),No(ih,gg),ha(Mi,"scissor",[0,0,ke.drawingBufferWidth,ke.drawingBufferHeight]),ha(Rl,Rl,[0,0,ke.drawingBufferWidth,ke.drawingBufferHeight]);var no={gl:ke,context:Gi,strings:Yt,next:ao,current:ui,draw:ki,elements:Pr,buffer:Kr,shader:Li,attributes:Hi.state,vao:Hi,uniforms:vi,framebuffer:Di,extensions:Mn,timer:Ei,isBufferArgs:J0},Oi={primTypes:Fc,compareFuncs:vp,blendFuncs:rd,blendEquations:jr,stencilOps:Fd,glTypes:ru,orientationType:pf};de.optional(function(){no.isArrayLike=ul}),fo&&(Oi.backBuffer=[pp],Oi.drawBuffer=$n(Rr.maxDrawbuffers,function(Nt){return Nt===0?[0]:$n(Nt,function(nn){return Zp+nn})}));var Jr=0;function Vo(){var Nt=Ur(),nn=Nt.link,Rn=Nt.global;Nt.id=Jr++,Nt.batchId="0";var Tr=nn(no),xr=Nt.shared={props:"a0"};Object.keys(no).forEach(function(Zn){xr[Zn]=Rn.def(Tr,".",Zn)}),de.optional(function(){Nt.CHECK=nn(de),Nt.commandStr=de.guessCommand(),Nt.command=nn(Nt.commandStr),Nt.assert=function(Zn,en,Xn){Zn("if(!(",en,"))",this.CHECK,".commandRaise(",nn(Xn),",",this.command,");")},Oi.invalidBlendCombinations=wg});var Vn=Nt.next={},Kn=Nt.current={};Object.keys(ci).forEach(function(Zn){Array.isArray(ui[Zn])&&(Vn[Zn]=Rn.def(xr.next,".",Zn),Kn[Zn]=Rn.def(xr.current,".",Zn))});var rr=Nt.constants={};Object.keys(Oi).forEach(function(Zn){rr[Zn]=Rn.def(JSON.stringify(Oi[Zn]))}),Nt.invoke=function(Zn,en){switch(en.type){case jo:var Xn=["this",xr.context,xr.props,Nt.batchId];return Zn.def(nn(en.data),".call(",Xn.slice(0,Math.max(en.data.length+1,4)),")");case Xo:return Zn.def(xr.props,en.data);case Yo:return Zn.def(xr.context,en.data);case cs:return Zn.def("this",en.data);case Dr:return en.data.append(Nt,Zn),en.data.ref}},Nt.attribCache={};var xn={};return Nt.scopeAttrib=function(Zn){var en=Yt.id(Zn);if(en in xn)return xn[en];var Xn=Hi.scope[en];Xn||(Xn=Hi.scope[en]=new dr);var Nr=xn[en]=nn(Xn);return Nr},Nt}function Ba(Nt){var nn=Nt.static,Rn=Nt.dynamic,Tr;if(Pl in nn){var xr=!!nn[Pl];Tr=lu(function(Kn,rr){return xr}),Tr.enable=xr}else if(Pl in Rn){var Vn=Rn[Pl];Tr=Zf(Vn,function(Kn,rr){return Kn.invoke(rr,Vn)})}return Tr}function so(Nt,nn){var Rn=Nt.static,Tr=Nt.dynamic;if(Ju in Rn){var xr=Rn[Ju];return xr?(xr=Di.getFramebuffer(xr),de.command(xr,"invalid framebuffer object"),lu(function(Kn,rr){var xn=Kn.link(xr),Zn=Kn.shared;rr.set(Zn.framebuffer,".next",xn);var en=Zn.context;return rr.set(en,"."+Id,xn+".width"),rr.set(en,"."+ah,xn+".height"),xn})):lu(function(Kn,rr){var xn=Kn.shared;rr.set(xn.framebuffer,".next","null");var Zn=xn.context;return rr.set(Zn,"."+Id,Zn+"."+Hc),rr.set(Zn,"."+ah,Zn+"."+vg),"null"})}else if(Ju in Tr){var Vn=Tr[Ju];return Zf(Vn,function(Kn,rr){var xn=Kn.invoke(rr,Vn),Zn=Kn.shared,en=Zn.framebuffer,Xn=rr.def(en,".getFramebuffer(",xn,")");de.optional(function(){Kn.assert(rr,"!"+xn+"||"+Xn,"invalid framebuffer object")}),rr.set(en,".next",Xn);var Nr=Zn.context;return rr.set(Nr,"."+Id,Xn+"?"+Xn+".width:"+Nr+"."+Hc),rr.set(Nr,"."+ah,Xn+"?"+Xn+".height:"+Nr+"."+vg),Xn})}else return null}function va(Nt,nn,Rn){var Tr=Nt.static,xr=Nt.dynamic;function Vn(xn){if(xn in Tr){var Zn=Tr[xn];de.commandType(Zn,"object","invalid "+xn,Rn.commandStr);var en=!0,Xn=Zn.x|0,Nr=Zn.y|0,Vr,bi;return"width"in Zn?(Vr=Zn.width|0,de.command(Vr>=0,"invalid "+xn,Rn.commandStr)):en=!1,"height"in Zn?(bi=Zn.height|0,de.command(bi>=0,"invalid "+xn,Rn.commandStr)):en=!1,new Uu(!en&&nn&&nn.thisDep,!en&&nn&&nn.contextDep,!en&&nn&&nn.propDep,function(Lo,Zi){var to=Lo.shared.context,oa=Vr;"width"in Zn||(oa=Zi.def(to,".",Id,"-",Xn));var na=bi;return"height"in Zn||(na=Zi.def(to,".",ah,"-",Nr)),[Xn,Nr,oa,na]})}else if(xn in xr){var li=xr[xn],yi=Zf(li,function(Lo,Zi){var to=Lo.invoke(Zi,li);de.optional(function(){Lo.assert(Zi,to+"&&typeof "+to+'==="object"',"invalid "+xn)});var oa=Lo.shared.context,na=Zi.def(to,".x|0"),zs=Zi.def(to,".y|0"),ju=Zi.def('"width" in ',to,"?",to,".width|0:","(",oa,".",Id,"-",na,")"),Oc=Zi.def('"height" in ',to,"?",to,".height|0:","(",oa,".",ah,"-",zs,")");return de.optional(function(){Lo.assert(Zi,ju+">=0&&"+Oc+">=0","invalid "+xn)}),[na,zs,ju,Oc]});return nn&&(yi.thisDep=yi.thisDep||nn.thisDep,yi.contextDep=yi.contextDep||nn.contextDep,yi.propDep=yi.propDep||nn.propDep),yi}else return nn?new Uu(nn.thisDep,nn.contextDep,nn.propDep,function(Lo,Zi){var to=Lo.shared.context;return[0,0,Zi.def(to,".",Id),Zi.def(to,".",ah)]}):null}var Kn=Vn(Rl);if(Kn){var rr=Kn;Kn=new Uu(Kn.thisDep,Kn.contextDep,Kn.propDep,function(xn,Zn){var en=rr.append(xn,Zn),Xn=xn.shared.context;return Zn.set(Xn,"."+up,en[2]),Zn.set(Xn,"."+Y0,en[3]),en})}return{viewport:Kn,scissor_box:Vn(Mi)}}function da(Nt,nn){var Rn=Nt.static,Tr=typeof Rn[Rf]=="string"&&typeof Rn[Mf]=="string";if(Tr){if(Object.keys(nn.dynamic).length>0)return null;var xr=nn.static,Vn=Object.keys(xr);if(Vn.length>0&&typeof xr[Vn[0]]=="number"){for(var Kn=[],rr=0;rr<Vn.length;++rr)de(typeof xr[Vn[rr]]=="number","must specify all vertex attribute locations when using vaos"),Kn.push([xr[Vn[rr]]|0,Vn[rr]]);return Kn}}return null}function qo(Nt,nn,Rn){var Tr=Nt.static,xr=Nt.dynamic;function Vn(en){if(en in Tr){var Xn=Yt.id(Tr[en]);de.optional(function(){Li.shader(mp[en],Xn,de.guessCommand())});var Nr=lu(function(){return Xn});return Nr.id=Xn,Nr}else if(en in xr){var Vr=xr[en];return Zf(Vr,function(bi,li){var yi=bi.invoke(li,Vr),Lo=li.def(bi.shared.strings,".id(",yi,")");return de.optional(function(){li(bi.shared.shader,".shader(",mp[en],",",Lo,",",bi.command,");")}),Lo})}return null}var Kn=Vn(Rf),rr=Vn(Mf),xn=null,Zn;return ec(Kn)&&ec(rr)?(xn=Li.program(rr.id,Kn.id,null,Rn),Zn=lu(function(en,Xn){return en.link(xn)})):Zn=new Uu(Kn&&Kn.thisDep||rr&&rr.thisDep,Kn&&Kn.contextDep||rr&&rr.contextDep,Kn&&Kn.propDep||rr&&rr.propDep,function(en,Xn){var Nr=en.shared.shader,Vr;Kn?Vr=Kn.append(en,Xn):Vr=Xn.def(Nr,".",Rf);var bi;rr?bi=rr.append(en,Xn):bi=Xn.def(Nr,".",Mf);var li=Nr+".program("+bi+","+Vr;return de.optional(function(){li+=","+en.command}),Xn.def(li+")")}),{frag:Kn,vert:rr,progVar:Zn,program:xn}}function fs(Nt,nn){var Rn=Nt.static,Tr=Nt.dynamic;function xr(){if(es in Rn){var en=Rn[es];J0(en)?en=Pr.getElements(Pr.create(en,!0)):en&&(en=Pr.getElements(en),de.command(en,"invalid elements",nn.commandStr));var Xn=lu(function(Vr,bi){if(en){var li=Vr.link(en);return Vr.ELEMENTS=li,li}return Vr.ELEMENTS=null,null});return Xn.value=en,Xn}else if(es in Tr){var Nr=Tr[es];return Zf(Nr,function(Vr,bi){var li=Vr.shared,yi=li.isBufferArgs,Lo=li.elements,Zi=Vr.invoke(bi,Nr),to=bi.def("null"),oa=bi.def(yi,"(",Zi,")"),na=Vr.cond(oa).then(to,"=",Lo,".createStream(",Zi,");").else(to,"=",Lo,".getElements(",Zi,");");return de.optional(function(){Vr.assert(na.else,"!"+Zi+"||"+to,"invalid elements")}),bi.entry(na),bi.exit(Vr.cond(oa).then(Lo,".destroyStream(",to,");")),Vr.ELEMENTS=to,to})}return null}var Vn=xr();function Kn(){if(Ou in Rn){var en=Rn[Ou];return de.commandParameter(en,Fc,"invalid primitve",nn.commandStr),lu(function(Nr,Vr){return Fc[en]})}else if(Ou in Tr){var Xn=Tr[Ou];return Zf(Xn,function(Nr,Vr){var bi=Nr.constants.primTypes,li=Nr.invoke(Vr,Xn);return de.optional(function(){Nr.assert(Vr,li+" in "+bi,"invalid primitive, must be one of "+Object.keys(Fc))}),Vr.def(bi,"[",li,"]")})}else if(Vn)return ec(Vn)?Vn.value?lu(function(Nr,Vr){return Vr.def(Nr.ELEMENTS,".primType")}):lu(function(){return Oy}):new Uu(Vn.thisDep,Vn.contextDep,Vn.propDep,function(Nr,Vr){var bi=Nr.ELEMENTS;return Vr.def(bi,"?",bi,".primType:",Oy)});return null}function rr(en,Xn){if(en in Rn){var Nr=Rn[en]|0;return de.command(!Xn||Nr>=0,"invalid "+en,nn.commandStr),lu(function(bi,li){return Xn&&(bi.OFFSET=Nr),Nr})}else if(en in Tr){var Vr=Tr[en];return Zf(Vr,function(bi,li){var yi=bi.invoke(li,Vr);return Xn&&(bi.OFFSET=yi,de.optional(function(){bi.assert(li,yi+">=0","invalid "+en)})),yi})}else if(Xn&&Vn)return lu(function(bi,li){return bi.OFFSET="0",0});return null}var xn=rr(oh,!0);function Zn(){if(Wl in Rn){var en=Rn[Wl]|0;return de.command(typeof en=="number"&&en>=0,"invalid vertex count",nn.commandStr),lu(function(){return en})}else if(Wl in Tr){var Xn=Tr[Wl];return Zf(Xn,function(bi,li){var yi=bi.invoke(li,Xn);return de.optional(function(){bi.assert(li,"typeof "+yi+'==="number"&&'+yi+">=0&&"+yi+"===("+yi+"|0)","invalid vertex count")}),yi})}else if(Vn)if(ec(Vn)){if(Vn)return xn?new Uu(xn.thisDep,xn.contextDep,xn.propDep,function(bi,li){var yi=li.def(bi.ELEMENTS,".vertCount-",bi.OFFSET);return de.optional(function(){bi.assert(li,yi+">=0","invalid vertex offset/element buffer too small")}),yi}):lu(function(bi,li){return li.def(bi.ELEMENTS,".vertCount")});var Nr=lu(function(){return-1});return de.optional(function(){Nr.MISSING=!0}),Nr}else{var Vr=new Uu(Vn.thisDep||xn.thisDep,Vn.contextDep||xn.contextDep,Vn.propDep||xn.propDep,function(bi,li){var yi=bi.ELEMENTS;return bi.OFFSET?li.def(yi,"?",yi,".vertCount-",bi.OFFSET,":-1"):li.def(yi,"?",yi,".vertCount:-1")});return de.optional(function(){Vr.DYNAMIC=!0}),Vr}return null}return{elements:Vn,primitive:Kn(),count:Zn(),instances:rr(_0,!1),offset:xn}}function Il(Nt,nn){var Rn=Nt.static,Tr=Nt.dynamic,xr={};return Ti.forEach(function(Vn){var Kn=_i(Vn);function rr(xn,Zn){if(Vn in Rn){var en=xn(Rn[Vn]);xr[Kn]=lu(function(){return en})}else if(Vn in Tr){var Xn=Tr[Vn];xr[Kn]=Zf(Xn,function(Nr,Vr){return Zn(Nr,Vr,Nr.invoke(Vr,Xn))})}}switch(Vn){case su:case ga:case Qt:case sp:case aa:case ih:case vc:case Tc:case df:case xl:return rr(function(xn){return de.commandType(xn,"boolean",Vn,nn.commandStr),xn},function(xn,Zn,en){return de.optional(function(){xn.assert(Zn,"typeof "+en+'==="boolean"',"invalid flag "+Vn,xn.commandStr)}),en});case ko:return rr(function(xn){return de.commandParameter(xn,vp,"invalid "+Vn,nn.commandStr),vp[xn]},function(xn,Zn,en){var Xn=xn.constants.compareFuncs;return de.optional(function(){xn.assert(Zn,en+" in "+Xn,"invalid "+Vn+", must be one of "+Object.keys(vp))}),Zn.def(Xn,"[",en,"]")});case au:return rr(function(xn){return de.command(ul(xn)&&xn.length===2&&typeof xn[0]=="number"&&typeof xn[1]=="number"&&xn[0]<=xn[1],"depth range is 2d array",nn.commandStr),xn},function(xn,Zn,en){de.optional(function(){xn.assert(Zn,xn.shared.isArrayLike+"("+en+")&&"+en+".length===2&&typeof "+en+'[0]==="number"&&typeof '+en+'[1]==="number"&&'+en+"[0]<="+en+"[1]","depth range must be a 2d array")});var Xn=Zn.def("+",en,"[0]"),Nr=Zn.def("+",en,"[1]");return[Xn,Nr]});case Ea:return rr(function(xn){de.commandType(xn,"object","blend.func",nn.commandStr);var Zn="srcRGB"in xn?xn.srcRGB:xn.src,en="srcAlpha"in xn?xn.srcAlpha:xn.src,Xn="dstRGB"in xn?xn.dstRGB:xn.dst,Nr="dstAlpha"in xn?xn.dstAlpha:xn.dst;return de.commandParameter(Zn,rd,Kn+".srcRGB",nn.commandStr),de.commandParameter(en,rd,Kn+".srcAlpha",nn.commandStr),de.commandParameter(Xn,rd,Kn+".dstRGB",nn.commandStr),de.commandParameter(Nr,rd,Kn+".dstAlpha",nn.commandStr),de.command(wg.indexOf(Zn+", "+Xn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Zn+", "+Xn+")",nn.commandStr),[rd[Zn],rd[Xn],rd[en],rd[Nr]]},function(xn,Zn,en){var Xn=xn.constants.blendFuncs;de.optional(function(){xn.assert(Zn,en+"&&typeof "+en+'==="object"',"invalid blend func, must be an object")});function Nr(to,oa){var na=Zn.def('"',to,oa,'" in ',en,"?",en,".",to,oa,":",en,".",to);return de.optional(function(){xn.assert(Zn,na+" in "+Xn,"invalid "+Vn+"."+to+oa+", must be one of "+Object.keys(rd))}),na}var Vr=Nr("src","RGB"),bi=Nr("dst","RGB");de.optional(function(){var to=xn.constants.invalidBlendCombinations;xn.assert(Zn,to+".indexOf("+Vr+'+", "+'+bi+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var li=Zn.def(Xn,"[",Vr,"]"),yi=Zn.def(Xn,"[",Nr("src","Alpha"),"]"),Lo=Zn.def(Xn,"[",bi,"]"),Zi=Zn.def(Xn,"[",Nr("dst","Alpha"),"]");return[li,Lo,yi,Zi]});case Qo:return rr(function(xn){if(typeof xn=="string")return de.commandParameter(xn,jr,"invalid "+Vn,nn.commandStr),[jr[xn],jr[xn]];if(typeof xn=="object")return de.commandParameter(xn.rgb,jr,Vn+".rgb",nn.commandStr),de.commandParameter(xn.alpha,jr,Vn+".alpha",nn.commandStr),[jr[xn.rgb],jr[xn.alpha]];de.commandRaise("invalid blend.equation",nn.commandStr)},function(xn,Zn,en){var Xn=xn.constants.blendEquations,Nr=Zn.def(),Vr=Zn.def(),bi=xn.cond("typeof ",en,'==="string"');return de.optional(function(){function li(yi,Lo,Zi){xn.assert(yi,Zi+" in "+Xn,"invalid "+Lo+", must be one of "+Object.keys(jr))}li(bi.then,Vn,en),xn.assert(bi.else,en+"&&typeof "+en+'==="object"',"invalid "+Vn),li(bi.else,Vn+".rgb",en+".rgb"),li(bi.else,Vn+".alpha",en+".alpha")}),bi.then(Nr,"=",Vr,"=",Xn,"[",en,"];"),bi.else(Nr,"=",Xn,"[",en,".rgb];",Vr,"=",Xn,"[",en,".alpha];"),Zn(bi),[Nr,Vr]});case fa:return rr(function(xn){return de.command(ul(xn)&&xn.length===4,"blend.color must be a 4d array",nn.commandStr),$n(4,function(Zn){return+xn[Zn]})},function(xn,Zn,en){return de.optional(function(){xn.assert(Zn,xn.shared.isArrayLike+"("+en+")&&"+en+".length===4","blend.color must be a 4d array")}),$n(4,function(Xn){return Zn.def("+",en,"[",Xn,"]")})});case lp:return rr(function(xn){return de.commandType(xn,"number",Kn,nn.commandStr),xn|0},function(xn,Zn,en){return de.optional(function(){xn.assert(Zn,"typeof "+en+'==="number"',"invalid stencil.mask")}),Zn.def(en,"|0")});case wh:return rr(function(xn){de.commandType(xn,"object",Kn,nn.commandStr);var Zn=xn.cmp||"keep",en=xn.ref||0,Xn="mask"in xn?xn.mask:-1;return de.commandParameter(Zn,vp,Vn+".cmp",nn.commandStr),de.commandType(en,"number",Vn+".ref",nn.commandStr),de.commandType(Xn,"number",Vn+".mask",nn.commandStr),[vp[Zn],en,Xn]},function(xn,Zn,en){var Xn=xn.constants.compareFuncs;de.optional(function(){function li(){xn.assert(Zn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}li(en+"&&typeof ",en,'==="object"'),li('!("cmp" in ',en,")||(",en,".cmp in ",Xn,")")});var Nr=Zn.def('"cmp" in ',en,"?",Xn,"[",en,".cmp]",":",Wp),Vr=Zn.def(en,".ref|0"),bi=Zn.def('"mask" in ',en,"?",en,".mask|0:-1");return[Nr,Vr,bi]});case $h:case qh:return rr(function(xn){de.commandType(xn,"object",Kn,nn.commandStr);var Zn=xn.fail||"keep",en=xn.zfail||"keep",Xn=xn.zpass||"keep";return de.commandParameter(Zn,Fd,Vn+".fail",nn.commandStr),de.commandParameter(en,Fd,Vn+".zfail",nn.commandStr),de.commandParameter(Xn,Fd,Vn+".zpass",nn.commandStr),[Vn===qh?pp:dp,Fd[Zn],Fd[en],Fd[Xn]]},function(xn,Zn,en){var Xn=xn.constants.stencilOps;de.optional(function(){xn.assert(Zn,en+"&&typeof "+en+'==="object"',"invalid "+Vn)});function Nr(Vr){return de.optional(function(){xn.assert(Zn,'!("'+Vr+'" in '+en+")||("+en+"."+Vr+" in "+Xn+")","invalid "+Vn+"."+Vr+", must be one of "+Object.keys(Fd))}),Zn.def('"',Vr,'" in ',en,"?",Xn,"[",en,".",Vr,"]:",Wp)}return[Vn===qh?pp:dp,Nr("fail"),Nr("zfail"),Nr("zpass")]});case Wf:return rr(function(xn){de.commandType(xn,"object",Kn,nn.commandStr);var Zn=xn.factor|0,en=xn.units|0;return de.commandType(Zn,"number",Kn+".factor",nn.commandStr),de.commandType(en,"number",Kn+".units",nn.commandStr),[Zn,en]},function(xn,Zn,en){de.optional(function(){xn.assert(Zn,en+"&&typeof "+en+'==="object"',"invalid "+Vn)});var Xn=Zn.def(en,".factor|0"),Nr=Zn.def(en,".units|0");return[Xn,Nr]});case Ss:return rr(function(xn){var Zn=0;return xn==="front"?Zn=dp:xn==="back"&&(Zn=pp),de.command(!!Zn,Kn,nn.commandStr),Zn},function(xn,Zn,en){return de.optional(function(){xn.assert(Zn,en+'==="front"||'+en+'==="back"',"invalid cull.face")}),Zn.def(en,'==="front"?',dp,":",pp)});case fl:return rr(function(xn){return de.command(typeof xn=="number"&&xn>=Rr.lineWidthDims[0]&&xn<=Rr.lineWidthDims[1],"invalid line width, must be a positive number between "+Rr.lineWidthDims[0]+" and "+Rr.lineWidthDims[1],nn.commandStr),xn},function(xn,Zn,en){return de.optional(function(){xn.assert(Zn,"typeof "+en+'==="number"&&'+en+">="+Rr.lineWidthDims[0]+"&&"+en+"<="+Rr.lineWidthDims[1],"invalid line width")}),en});case vl:return rr(function(xn){return de.commandParameter(xn,pf,Kn,nn.commandStr),pf[xn]},function(xn,Zn,en){return de.optional(function(){xn.assert(Zn,en+'==="cw"||'+en+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Zn.def(en+'==="cw"?'+Dv+":"+Pf)});case Cu:return rr(function(xn){return de.command(ul(xn)&&xn.length===4,"color.mask must be length 4 array",nn.commandStr),xn.map(function(Zn){return!!Zn})},function(xn,Zn,en){return de.optional(function(){xn.assert(Zn,xn.shared.isArrayLike+"("+en+")&&"+en+".length===4","invalid color.mask")}),$n(4,function(Xn){return"!!"+en+"["+Xn+"]"})});case Vc:return rr(function(xn){de.command(typeof xn=="object"&&xn,Kn,nn.commandStr);var Zn="value"in xn?xn.value:1,en=!!xn.invert;return de.command(typeof Zn=="number"&&Zn>=0&&Zn<=1,"sample.coverage.value must be a number between 0 and 1",nn.commandStr),[Zn,en]},function(xn,Zn,en){de.optional(function(){xn.assert(Zn,en+"&&typeof "+en+'==="object"',"invalid sample.coverage")});var Xn=Zn.def('"value" in ',en,"?+",en,".value:1"),Nr=Zn.def("!!",en,".invert");return[Xn,Nr]})}}),xr}function Mu(Nt,nn){var Rn=Nt.static,Tr=Nt.dynamic,xr={};return Object.keys(Rn).forEach(function(Vn){var Kn=Rn[Vn],rr;if(typeof Kn=="number"||typeof Kn=="boolean")rr=lu(function(){return Kn});else if(typeof Kn=="function"){var xn=Kn._reglType;xn==="texture2d"||xn==="textureCube"?rr=lu(function(Zn){return Zn.link(Kn)}):xn==="framebuffer"||xn==="framebufferCube"?(de.command(Kn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Vn+'"',nn.commandStr),rr=lu(function(Zn){return Zn.link(Kn.color[0])})):de.commandRaise('invalid data for uniform "'+Vn+'"',nn.commandStr)}else ul(Kn)?rr=lu(function(Zn){var en=Zn.global.def("[",$n(Kn.length,function(Xn){return de.command(typeof Kn[Xn]=="number"||typeof Kn[Xn]=="boolean","invalid uniform "+Vn,Zn.commandStr),Kn[Xn]}),"]");return en}):de.commandRaise('invalid or missing data for uniform "'+Vn+'"',nn.commandStr);rr.value=Kn,xr[Vn]=rr}),Object.keys(Tr).forEach(function(Vn){var Kn=Tr[Vn];xr[Vn]=Zf(Kn,function(rr,xn){return rr.invoke(xn,Kn)})}),xr}function ts(Nt,nn){var Rn=Nt.static,Tr=Nt.dynamic,xr={};return Object.keys(Rn).forEach(function(Vn){var Kn=Rn[Vn],rr=Yt.id(Vn),xn=new dr;if(J0(Kn))xn.state=Bi,xn.buffer=Kr.getBuffer(Kr.create(Kn,$0,!1,!0)),xn.type=0;else{var Zn=Kr.getBuffer(Kn);if(Zn)xn.state=Bi,xn.buffer=Zn,xn.type=0;else if(de.command(typeof Kn=="object"&&Kn,"invalid data for attribute "+Vn,nn.commandStr),"constant"in Kn){var en=Kn.constant;xn.buffer="null",xn.state=vo,typeof en=="number"?xn.x=en:(de.command(ul(en)&&en.length>0&&en.length<=4,"invalid constant for attribute "+Vn,nn.commandStr),si.forEach(function(Lo,Zi){Zi<en.length&&(xn[Lo]=en[Zi])}))}else{J0(Kn.buffer)?Zn=Kr.getBuffer(Kr.create(Kn.buffer,$0,!1,!0)):Zn=Kr.getBuffer(Kn.buffer),de.command(!!Zn,'missing buffer for attribute "'+Vn+'"',nn.commandStr);var Xn=Kn.offset|0;de.command(Xn>=0,'invalid offset for attribute "'+Vn+'"',nn.commandStr);var Nr=Kn.stride|0;de.command(Nr>=0&&Nr<256,'invalid stride for attribute "'+Vn+'", must be integer betweeen [0, 255]',nn.commandStr);var Vr=Kn.size|0;de.command(!("size"in Kn)||Vr>0&&Vr<=4,'invalid size for attribute "'+Vn+'", must be 1,2,3,4',nn.commandStr);var bi=!!Kn.normalized,li=0;"type"in Kn&&(de.commandParameter(Kn.type,ru,"invalid type for attribute "+Vn,nn.commandStr),li=ru[Kn.type]);var yi=Kn.divisor|0;"divisor"in Kn&&(de.command(yi===0||Si,'cannot specify divisor for attribute "'+Vn+'", instancing not supported',nn.commandStr),de.command(yi>=0,'invalid divisor for attribute "'+Vn+'"',nn.commandStr)),de.optional(function(){var Lo=nn.commandStr,Zi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Kn).forEach(function(to){de.command(Zi.indexOf(to)>=0,'unknown parameter "'+to+'" for attribute pointer "'+Vn+'" (valid parameters are '+Zi+")",Lo)})}),xn.buffer=Zn,xn.state=Bi,xn.size=Vr,xn.normalized=bi,xn.type=li||Zn.dtype,xn.offset=Xn,xn.stride=Nr,xn.divisor=yi}}xr[Vn]=lu(function(Lo,Zi){var to=Lo.attribCache;if(rr in to)return to[rr];var oa={isStream:!1};return Object.keys(xn).forEach(function(na){oa[na]=xn[na]}),xn.buffer&&(oa.buffer=Lo.link(xn.buffer),oa.type=oa.type||oa.buffer+".dtype"),to[rr]=oa,oa})}),Object.keys(Tr).forEach(function(Vn){var Kn=Tr[Vn];function rr(xn,Zn){var en=xn.invoke(Zn,Kn),Xn=xn.shared,Nr=xn.constants,Vr=Xn.isBufferArgs,bi=Xn.buffer;de.optional(function(){xn.assert(Zn,en+"&&(typeof "+en+'==="object"||typeof '+en+'==="function")&&('+Vr+"("+en+")||"+bi+".getBuffer("+en+")||"+bi+".getBuffer("+en+".buffer)||"+Vr+"("+en+'.buffer)||("constant" in '+en+"&&(typeof "+en+'.constant==="number"||'+Xn.isArrayLike+"("+en+".constant))))",'invalid dynamic attribute "'+Vn+'"')});var li={isStream:Zn.def(!1)},yi=new dr;yi.state=Bi,Object.keys(yi).forEach(function(oa){li[oa]=Zn.def(""+yi[oa])});var Lo=li.buffer,Zi=li.type;Zn("if(",Vr,"(",en,")){",li.isStream,"=true;",Lo,"=",bi,".createStream(",$0,",",en,");",Zi,"=",Lo,".dtype;","}else{",Lo,"=",bi,".getBuffer(",en,");","if(",Lo,"){",Zi,"=",Lo,".dtype;",'}else if("constant" in ',en,"){",li.state,"=",vo,";","if(typeof "+en+'.constant === "number"){',li[si[0]],"=",en,".constant;",si.slice(1).map(function(oa){return li[oa]}).join("="),"=0;","}else{",si.map(function(oa,na){return li[oa]+"="+en+".constant.length>"+na+"?"+en+".constant["+na+"]:0;"}).join(""),"}}else{","if(",Vr,"(",en,".buffer)){",Lo,"=",bi,".createStream(",$0,",",en,".buffer);","}else{",Lo,"=",bi,".getBuffer(",en,".buffer);","}",Zi,'="type" in ',en,"?",Nr.glTypes,"[",en,".type]:",Lo,".dtype;",li.normalized,"=!!",en,".normalized;");function to(oa){Zn(li[oa],"=",en,".",oa,"|0;")}return to("size"),to("offset"),to("stride"),to("divisor"),Zn("}}"),Zn.exit("if(",li.isStream,"){",bi,".destroyStream(",Lo,");","}"),li}xr[Vn]=Zf(Kn,rr)}),xr}function Zl(Nt,nn){var Rn=Nt.static,Tr=Nt.dynamic;if(Pd in Rn){var xr=Rn[Pd];return xr!==null&&Hi.getVAO(xr)===null&&(xr=Hi.createVAO(xr)),lu(function(Kn){return Kn.link(Hi.getVAO(xr))})}else if(Pd in Tr){var Vn=Tr[Pd];return Zf(Vn,function(Kn,rr){var xn=Kn.invoke(rr,Vn);return rr.def(Kn.shared.vao+".getVAO("+xn+")")})}return null}function tl(Nt){var nn=Nt.static,Rn=Nt.dynamic,Tr={};return Object.keys(nn).forEach(function(xr){var Vn=nn[xr];Tr[xr]=lu(function(Kn,rr){return typeof Vn=="number"||typeof Vn=="boolean"?""+Vn:Kn.link(Vn)})}),Object.keys(Rn).forEach(function(xr){var Vn=Rn[xr];Tr[xr]=Zf(Vn,function(Kn,rr){return Kn.invoke(rr,Vn)})}),Tr}function ae(Nt,nn,Rn,Tr,xr){var Vn=Nt.static,Kn=Nt.dynamic;de.optional(function(){var to=[Ju,Mf,Rf,es,Ou,oh,Wl,_0,Pl,Pd].concat(Ti);function oa(na){Object.keys(na).forEach(function(zs){de.command(to.indexOf(zs)>=0,'unknown parameter "'+zs+'"',xr.commandStr)})}oa(Vn),oa(Kn)});var rr=da(Nt,nn),xn=so(Nt,xr),Zn=va(Nt,xn,xr),en=fs(Nt,xr),Xn=Il(Nt,xr),Nr=qo(Nt,xr,rr);function Vr(to){var oa=Zn[to];oa&&(Xn[to]=oa)}Vr(Rl),Vr(_i(Mi));var bi=Object.keys(Xn).length>0,li={framebuffer:xn,draw:en,shader:Nr,state:Xn,dirty:bi,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(li.profile=Ba(Nt,xr),li.uniforms=Mu(Rn,xr),li.drawVAO=li.scopeVAO=Zl(Nt,xr),!li.drawVAO&&Nr.program&&!rr&&Mn.angle_instanced_arrays){var yi=!0,Lo=Nr.program.attributes.map(function(to){var oa=nn.static[to];return yi=yi&&!!oa,oa});if(yi&&Lo.length>0){var Zi=Hi.getVAO(Hi.createVAO(Lo));li.drawVAO=new Uu(null,null,null,function(to,oa){return to.link(Zi)}),li.useVAO=!0}}return rr?li.useVAO=!0:li.attributes=ts(nn,xr),li.context=tl(Tr,xr),li}function uu(Nt,nn,Rn){var Tr=Nt.shared,xr=Tr.context,Vn=Nt.scope();Object.keys(Rn).forEach(function(Kn){nn.save(xr,"."+Kn);var rr=Rn[Kn];Vn(xr,".",Kn,"=",rr.append(Nt,nn),";")}),nn(Vn)}function ml(Nt,nn,Rn,Tr){var xr=Nt.shared,Vn=xr.gl,Kn=xr.framebuffer,rr;fo&&(rr=nn.def(xr.extensions,".webgl_draw_buffers"));var xn=Nt.constants,Zn=xn.drawBuffer,en=xn.backBuffer,Xn;Rn?Xn=Rn.append(Nt,nn):Xn=nn.def(Kn,".next"),Tr||nn("if(",Xn,"!==",Kn,".cur){"),nn("if(",Xn,"){",Vn,".bindFramebuffer(",nd,",",Xn,".framebuffer);"),fo&&nn(rr,".drawBuffersWEBGL(",Zn,"[",Xn,".colorAttachments.length]);"),nn("}else{",Vn,".bindFramebuffer(",nd,",null);"),fo&&nn(rr,".drawBuffersWEBGL(",en,");"),nn("}",Kn,".cur=",Xn,";"),Tr||nn("}")}function cr(Nt,nn,Rn){var Tr=Nt.shared,xr=Tr.gl,Vn=Nt.current,Kn=Nt.next,rr=Tr.current,xn=Tr.next,Zn=Nt.cond(rr,".dirty");Ti.forEach(function(en){var Xn=_i(en);if(!(Xn in Rn.state)){var Nr,Vr;if(Xn in Kn){Nr=Kn[Xn],Vr=Vn[Xn];var bi=$n(ui[Xn].length,function(yi){return Zn.def(Nr,"[",yi,"]")});Zn(Nt.cond(bi.map(function(yi,Lo){return yi+"!=="+Vr+"["+Lo+"]"}).join("||")).then(xr,".",ci[Xn],"(",bi,");",bi.map(function(yi,Lo){return Vr+"["+Lo+"]="+yi}).join(";"),";"))}else{Nr=Zn.def(xn,".",Xn);var li=Nt.cond(Nr,"!==",rr,".",Xn);Zn(li),Xn in ro?li(Nt.cond(Nr).then(xr,".enable(",ro[Xn],");").else(xr,".disable(",ro[Xn],");"),rr,".",Xn,"=",Nr,";"):li(xr,".",ci[Xn],"(",Nr,");",rr,".",Xn,"=",Nr,";")}}}),Object.keys(Rn.state).length===0&&Zn(rr,".dirty=false;"),nn(Zn)}function ti(Nt,nn,Rn,Tr){var xr=Nt.shared,Vn=Nt.current,Kn=xr.current,rr=xr.gl;ev(Object.keys(Rn)).forEach(function(xn){var Zn=Rn[xn];if(!(Tr&&!Tr(Zn))){var en=Zn.append(Nt,nn);if(ro[xn]){var Xn=ro[xn];ec(Zn)?en?nn(rr,".enable(",Xn,");"):nn(rr,".disable(",Xn,");"):nn(Nt.cond(en).then(rr,".enable(",Xn,");").else(rr,".disable(",Xn,");")),nn(Kn,".",xn,"=",en,";")}else if(ul(en)){var Nr=Vn[xn];nn(rr,".",ci[xn],"(",en,");",en.map(function(Vr,bi){return Nr+"["+bi+"]="+Vr}).join(";"),";")}else nn(rr,".",ci[xn],"(",en,");",Kn,".",xn,"=",en,";")}})}function gl(Nt,nn){Si&&(Nt.instancing=nn.def(Nt.shared.extensions,".angle_instanced_arrays"))}function Ma(Nt,nn,Rn,Tr,xr){var Vn=Nt.shared,Kn=Nt.stats,rr=Vn.current,xn=Vn.timer,Zn=Rn.profile;function en(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Xn,Nr;function Vr(to){Xn=nn.def(),to(Xn,"=",en(),";"),typeof xr=="string"?to(Kn,".count+=",xr,";"):to(Kn,".count++;"),Ei&&(Tr?(Nr=nn.def(),to(Nr,"=",xn,".getNumPendingQueries();")):to(xn,".beginQuery(",Kn,");"))}function bi(to){to(Kn,".cpuTime+=",en(),"-",Xn,";"),Ei&&(Tr?to(xn,".pushScopeStats(",Nr,",",xn,".getNumPendingQueries(),",Kn,");"):to(xn,".endQuery();"))}function li(to){var oa=nn.def(rr,".profile");nn(rr,".profile=",to,";"),nn.exit(rr,".profile=",oa,";")}var yi;if(Zn){if(ec(Zn)){Zn.enable?(Vr(nn),bi(nn.exit),li("true")):li("false");return}yi=Zn.append(Nt,nn),li(yi)}else yi=nn.def(rr,".profile");var Lo=Nt.block();Vr(Lo),nn("if(",yi,"){",Lo,"}");var Zi=Nt.block();bi(Zi),nn.exit("if(",yi,"){",Zi,"}")}function tc(Nt,nn,Rn,Tr,xr){var Vn=Nt.shared;function Kn(xn){switch(xn){case fp:case Iv:case E0:return 2;case Gp:case kl:case S0:return 3;case K0:case Th:case Jh:return 4;default:return 1}}function rr(xn,Zn,en){var Xn=Vn.gl,Nr=nn.def(xn,".location"),Vr=nn.def(Vn.attributes,"[",Nr,"]"),bi=en.state,li=en.buffer,yi=[en.x,en.y,en.z,en.w],Lo=["buffer","normalized","offset","stride"];function Zi(){nn("if(!",Vr,".buffer){",Xn,".enableVertexAttribArray(",Nr,");}");var oa=en.type,na;if(en.size?na=nn.def(en.size,"||",Zn):na=Zn,nn("if(",Vr,".type!==",oa,"||",Vr,".size!==",na,"||",Lo.map(function(ju){return Vr+"."+ju+"!=="+en[ju]}).join("||"),"){",Xn,".bindBuffer(",$0,",",li,".buffer);",Xn,".vertexAttribPointer(",[Nr,na,oa,en.normalized,en.stride,en.offset],");",Vr,".type=",oa,";",Vr,".size=",na,";",Lo.map(function(ju){return Vr+"."+ju+"="+en[ju]+";"}).join(""),"}"),Si){var zs=en.divisor;nn("if(",Vr,".divisor!==",zs,"){",Nt.instancing,".vertexAttribDivisorANGLE(",[Nr,zs],");",Vr,".divisor=",zs,";}")}}function to(){nn("if(",Vr,".buffer){",Xn,".disableVertexAttribArray(",Nr,");",Vr,".buffer=null;","}if(",si.map(function(oa,na){return Vr+"."+oa+"!=="+yi[na]}).join("||"),"){",Xn,".vertexAttrib4f(",Nr,",",yi,");",si.map(function(oa,na){return Vr+"."+oa+"="+yi[na]+";"}).join(""),"}")}bi===Bi?Zi():bi===vo?to():(nn("if(",bi,"===",Bi,"){"),Zi(),nn("}else{"),to(),nn("}"))}Tr.forEach(function(xn){var Zn=xn.name,en=Rn.attributes[Zn],Xn;if(en){if(!xr(en))return;Xn=en.append(Nt,nn)}else{if(!xr(My))return;var Nr=Nt.scopeAttrib(Zn);de.optional(function(){Nt.assert(nn,Nr+".state","missing attribute "+Zn)}),Xn={},Object.keys(new dr).forEach(function(Vr){Xn[Vr]=nn.def(Nr,".",Vr)})}rr(Nt.link(xn),Kn(xn.info.type),Xn)})}function Os(Nt,nn,Rn,Tr,xr){for(var Vn=Nt.shared,Kn=Vn.gl,rr,xn=0;xn<Tr.length;++xn){var Zn=Tr[xn],en=Zn.name,Xn=Zn.info.type,Nr=Rn.uniforms[en],Vr=Nt.link(Zn),bi=Vr+".location",li;if(Nr){if(!xr(Nr))continue;if(ec(Nr)){var yi=Nr.value;if(de.command(yi!==null&&typeof yi!="undefined",'missing uniform "'+en+'"',Nt.commandStr),Xn===td||Xn===Nd){de.command(typeof yi=="function"&&(Xn===td&&(yi._reglType==="texture2d"||yi._reglType==="framebuffer")||Xn===Nd&&(yi._reglType==="textureCube"||yi._reglType==="framebufferCube")),"invalid texture for uniform "+en,Nt.commandStr);var Lo=Nt.link(yi._texture||yi.color[0]._texture);nn(Kn,".uniform1i(",bi,",",Lo+".bind());"),nn.exit(Lo,".unbind();")}else if(Xn===hp||Xn===Ld||Xn===ed){de.optional(function(){de.command(ul(yi),"invalid matrix for uniform "+en,Nt.commandStr),de.command(Xn===hp&&yi.length===4||Xn===Ld&&yi.length===9||Xn===ed&&yi.length===16,"invalid length for matrix uniform "+en,Nt.commandStr)});var Zi=Nt.global.def("new Float32Array(["+Array.prototype.slice.call(yi)+"])"),to=2;Xn===Ld?to=3:Xn===ed&&(to=4),nn(Kn,".uniformMatrix",to,"fv(",bi,",false,",Zi,");")}else{switch(Xn){case xg:de.commandType(yi,"number","uniform "+en,Nt.commandStr),rr="1f";break;case fp:de.command(ul(yi)&&yi.length===2,"uniform "+en,Nt.commandStr),rr="2f";break;case Gp:de.command(ul(yi)&&yi.length===3,"uniform "+en,Nt.commandStr),rr="3f";break;case K0:de.command(ul(yi)&&yi.length===4,"uniform "+en,Nt.commandStr),rr="4f";break;case Q0:de.commandType(yi,"boolean","uniform "+en,Nt.commandStr),rr="1i";break;case Dd:de.commandType(yi,"number","uniform "+en,Nt.commandStr),rr="1i";break;case E0:de.command(ul(yi)&&yi.length===2,"uniform "+en,Nt.commandStr),rr="2i";break;case Iv:de.command(ul(yi)&&yi.length===2,"uniform "+en,Nt.commandStr),rr="2i";break;case S0:de.command(ul(yi)&&yi.length===3,"uniform "+en,Nt.commandStr),rr="3i";break;case kl:de.command(ul(yi)&&yi.length===3,"uniform "+en,Nt.commandStr),rr="3i";break;case Jh:de.command(ul(yi)&&yi.length===4,"uniform "+en,Nt.commandStr),rr="4i";break;case Th:de.command(ul(yi)&&yi.length===4,"uniform "+en,Nt.commandStr),rr="4i";break}nn(Kn,".uniform",rr,"(",bi,",",ul(yi)?Array.prototype.slice.call(yi):yi,");")}continue}else li=Nr.append(Nt,nn)}else{if(!xr(My))continue;li=nn.def(Vn.uniforms,"[",Yt.id(en),"]")}Xn===td?nn("if(",li,"&&",li,'._reglType==="framebuffer"){',li,"=",li,".color[0];","}"):Xn===Nd&&nn("if(",li,"&&",li,'._reglType==="framebufferCube"){',li,"=",li,".color[0];","}"),de.optional(function(){function Oc(Xp,kv){Nt.assert(nn,Xp,'bad data or missing for uniform "'+en+'".  '+kv)}function Dy(Xp){Oc("typeof "+li+'==="'+Xp+'"',"invalid type, expected "+Xp)}function sh(Xp,kv){Oc(Vn.isArrayLike+"("+li+")&&"+li+".length==="+Xp,"invalid vector, should have length "+Xp,Nt.commandStr)}function Om(Xp){Oc("typeof "+li+'==="function"&&'+li+'._reglType==="texture'+(Xp===Rv?"2d":"Cube")+'"',"invalid texture type",Nt.commandStr)}switch(Xn){case Dd:Dy("number");break;case Iv:sh(2,"number");break;case kl:sh(3,"number");break;case Th:sh(4,"number");break;case xg:Dy("number");break;case fp:sh(2,"number");break;case Gp:sh(3,"number");break;case K0:sh(4,"number");break;case Q0:Dy("boolean");break;case E0:sh(2,"boolean");break;case S0:sh(3,"boolean");break;case Jh:sh(4,"boolean");break;case hp:sh(4,"number");break;case Ld:sh(9,"number");break;case ed:sh(16,"number");break;case td:Om(Rv);break;case Nd:Om(Ay);break}});var oa=1;switch(Xn){case td:case Nd:var na=nn.def(li,"._texture");nn(Kn,".uniform1i(",bi,",",na,".bind());"),nn.exit(na,".unbind();");continue;case Dd:case Q0:rr="1i";break;case Iv:case E0:rr="2i",oa=2;break;case kl:case S0:rr="3i",oa=3;break;case Th:case Jh:rr="4i",oa=4;break;case xg:rr="1f";break;case fp:rr="2f",oa=2;break;case Gp:rr="3f",oa=3;break;case K0:rr="4f",oa=4;break;case hp:rr="Matrix2fv";break;case Ld:rr="Matrix3fv";break;case ed:rr="Matrix4fv";break}if(nn(Kn,".uniform",rr,"(",bi,","),rr.charAt(0)==="M"){var zs=Math.pow(Xn-hp+2,2),ju=Nt.global.def("new Float32Array(",zs,")");nn("false,(Array.isArray(",li,")||",li," instanceof Float32Array)?",li,":(",$n(zs,function(Oc){return ju+"["+Oc+"]="+li+"["+Oc+"]"}),",",ju,")")}else oa>1?nn($n(oa,function(Oc){return li+"["+Oc+"]"})):nn(li);nn(");")}}function ia(Nt,nn,Rn,Tr){var xr=Nt.shared,Vn=xr.gl,Kn=xr.draw,rr=Tr.draw;function xn(){var na=rr.elements,zs,ju=nn;return na?((na.contextDep&&Tr.contextDynamic||na.propDep)&&(ju=Rn),zs=na.append(Nt,ju)):zs=ju.def(Kn,".",es),zs&&ju("if("+zs+")"+Vn+".bindBuffer("+l1+","+zs+".buffer.buffer);"),zs}function Zn(){var na=rr.count,zs,ju=nn;return na?((na.contextDep&&Tr.contextDynamic||na.propDep)&&(ju=Rn),zs=na.append(Nt,ju),de.optional(function(){na.MISSING&&Nt.assert(nn,"false","missing vertex count"),na.DYNAMIC&&Nt.assert(ju,zs+">=0","missing vertex count")})):(zs=ju.def(Kn,".",Wl),de.optional(function(){Nt.assert(ju,zs+">=0","missing vertex count")})),zs}var en=xn();function Xn(na){var zs=rr[na];return zs?zs.contextDep&&Tr.contextDynamic||zs.propDep?zs.append(Nt,Rn):zs.append(Nt,nn):nn.def(Kn,".",na)}var Nr=Xn(Ou),Vr=Xn(oh),bi=Zn();if(typeof bi=="number"){if(bi===0)return}else Rn("if(",bi,"){"),Rn.exit("}");var li,yi;Si&&(li=Xn(_0),yi=Nt.instancing);var Lo=en+".type",Zi=rr.elements&&ec(rr.elements);function to(){function na(){Rn(yi,".drawElementsInstancedANGLE(",[Nr,bi,Lo,Vr+"<<(("+Lo+"-"+Vi+")>>1)",li],");")}function zs(){Rn(yi,".drawArraysInstancedANGLE(",[Nr,Vr,bi,li],");")}en?Zi?na():(Rn("if(",en,"){"),na(),Rn("}else{"),zs(),Rn("}")):zs()}function oa(){function na(){Rn(Vn+".drawElements("+[Nr,bi,Lo,Vr+"<<(("+Lo+"-"+Vi+")>>1)"]+");")}function zs(){Rn(Vn+".drawArrays("+[Nr,Vr,bi]+");")}en?Zi?na():(Rn("if(",en,"){"),na(),Rn("}else{"),zs(),Rn("}")):zs()}Si&&(typeof li!="number"||li>=0)?typeof li=="string"?(Rn("if(",li,">0){"),to(),Rn("}else if(",li,"<0){"),oa(),Rn("}")):to():oa()}function Xa(Nt,nn,Rn,Tr,xr){var Vn=Vo(),Kn=Vn.proc("body",xr);return de.optional(function(){Vn.commandStr=nn.commandStr,Vn.command=Vn.link(nn.commandStr)}),Si&&(Vn.instancing=Kn.def(Vn.shared.extensions,".angle_instanced_arrays")),Nt(Vn,Kn,Rn,Tr),Vn.compile().body}function gs(Nt,nn,Rn,Tr){gl(Nt,nn),Rn.useVAO?Rn.drawVAO?nn(Nt.shared.vao,".setVAO(",Rn.drawVAO.append(Nt,nn),");"):nn(Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"):(nn(Nt.shared.vao,".setVAO(null);"),tc(Nt,nn,Rn,Tr.attributes,function(){return!0})),Os(Nt,nn,Rn,Tr.uniforms,function(){return!0}),ia(Nt,nn,nn,Rn)}function Xl(Nt,nn){var Rn=Nt.proc("draw",1);gl(Nt,Rn),uu(Nt,Rn,nn.context),ml(Nt,Rn,nn.framebuffer),cr(Nt,Rn,nn),ti(Nt,Rn,nn.state),Ma(Nt,Rn,nn,!1,!0);var Tr=nn.shader.progVar.append(Nt,Rn);if(Rn(Nt.shared.gl,".useProgram(",Tr,".program);"),nn.shader.program)gs(Nt,Rn,nn,nn.shader.program);else{Rn(Nt.shared.vao,".setVAO(null);");var xr=Nt.global.def("{}"),Vn=Rn.def(Tr,".id"),Kn=Rn.def(xr,"[",Vn,"]");Rn(Nt.cond(Kn).then(Kn,".call(this,a0);").else(Kn,"=",xr,"[",Vn,"]=",Nt.link(function(rr){return Xa(gs,Nt,nn,rr,1)}),"(",Tr,");",Kn,".call(this,a0);"))}Object.keys(nn.state).length>0&&Rn(Nt.shared.current,".dirty=true;")}function Bd(Nt,nn,Rn,Tr){Nt.batchId="a1",gl(Nt,nn);function xr(){return!0}tc(Nt,nn,Rn,Tr.attributes,xr),Os(Nt,nn,Rn,Tr.uniforms,xr),ia(Nt,nn,nn,Rn)}function bn(Nt,nn,Rn,Tr){gl(Nt,nn);var xr=Rn.contextDep,Vn=nn.def(),Kn="a0",rr="a1",xn=nn.def();Nt.shared.props=xn,Nt.batchId=Vn;var Zn=Nt.scope(),en=Nt.scope();nn(Zn.entry,"for(",Vn,"=0;",Vn,"<",rr,";++",Vn,"){",xn,"=",Kn,"[",Vn,"];",en,"}",Zn.exit);function Xn(Lo){return Lo.contextDep&&xr||Lo.propDep}function Nr(Lo){return!Xn(Lo)}if(Rn.needsContext&&uu(Nt,en,Rn.context),Rn.needsFramebuffer&&ml(Nt,en,Rn.framebuffer),ti(Nt,en,Rn.state,Xn),Rn.profile&&Xn(Rn.profile)&&Ma(Nt,en,Rn,!1,!0),Tr)Rn.useVAO?Rn.drawVAO?Xn(Rn.drawVAO)?en(Nt.shared.vao,".setVAO(",Rn.drawVAO.append(Nt,en),");"):Zn(Nt.shared.vao,".setVAO(",Rn.drawVAO.append(Nt,Zn),");"):Zn(Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"):(Zn(Nt.shared.vao,".setVAO(null);"),tc(Nt,Zn,Rn,Tr.attributes,Nr),tc(Nt,en,Rn,Tr.attributes,Xn)),Os(Nt,Zn,Rn,Tr.uniforms,Nr),Os(Nt,en,Rn,Tr.uniforms,Xn),ia(Nt,Zn,en,Rn);else{var Vr=Nt.global.def("{}"),bi=Rn.shader.progVar.append(Nt,en),li=en.def(bi,".id"),yi=en.def(Vr,"[",li,"]");en(Nt.shared.gl,".useProgram(",bi,".program);","if(!",yi,"){",yi,"=",Vr,"[",li,"]=",Nt.link(function(Lo){return Xa(Bd,Nt,Rn,Lo,2)}),"(",bi,");}",yi,".call(this,a0[",Vn,"],",Vn,");")}}function Lr(Nt,nn){var Rn=Nt.proc("batch",2);Nt.batchId="0",gl(Nt,Rn);var Tr=!1,xr=!0;Object.keys(nn.context).forEach(function(Vr){Tr=Tr||nn.context[Vr].propDep}),Tr||(uu(Nt,Rn,nn.context),xr=!1);var Vn=nn.framebuffer,Kn=!1;Vn?(Vn.propDep?Tr=Kn=!0:Vn.contextDep&&Tr&&(Kn=!0),Kn||ml(Nt,Rn,Vn)):ml(Nt,Rn,null),nn.state.viewport&&nn.state.viewport.propDep&&(Tr=!0);function rr(Vr){return Vr.contextDep&&Tr||Vr.propDep}cr(Nt,Rn,nn),ti(Nt,Rn,nn.state,function(Vr){return!rr(Vr)}),(!nn.profile||!rr(nn.profile))&&Ma(Nt,Rn,nn,!1,"a1"),nn.contextDep=Tr,nn.needsContext=xr,nn.needsFramebuffer=Kn;var xn=nn.shader.progVar;if(xn.contextDep&&Tr||xn.propDep)bn(Nt,Rn,nn,null);else{var Zn=xn.append(Nt,Rn);if(Rn(Nt.shared.gl,".useProgram(",Zn,".program);"),nn.shader.program)bn(Nt,Rn,nn,nn.shader.program);else{Rn(Nt.shared.vao,".setVAO(null);");var en=Nt.global.def("{}"),Xn=Rn.def(Zn,".id"),Nr=Rn.def(en,"[",Xn,"]");Rn(Nt.cond(Nr).then(Nr,".call(this,a0,a1);").else(Nr,"=",en,"[",Xn,"]=",Nt.link(function(Vr){return Xa(bn,Nt,nn,Vr,2)}),"(",Zn,");",Nr,".call(this,a0,a1);"))}}Object.keys(nn.state).length>0&&Rn(Nt.shared.current,".dirty=true;")}function Sr(Nt,nn){var Rn=Nt.proc("scope",3);Nt.batchId="a2";var Tr=Nt.shared,xr=Tr.current;uu(Nt,Rn,nn.context),nn.framebuffer&&nn.framebuffer.append(Nt,Rn),ev(Object.keys(nn.state)).forEach(function(Kn){var rr=nn.state[Kn],xn=rr.append(Nt,Rn);ul(xn)?xn.forEach(function(Zn,en){Rn.set(Nt.next[Kn],"["+en+"]",Zn)}):Rn.set(Tr.next,"."+Kn,xn)}),Ma(Nt,Rn,nn,!0,!0),[es,oh,Wl,_0,Ou].forEach(function(Kn){var rr=nn.draw[Kn];rr&&Rn.set(Tr.draw,"."+Kn,""+rr.append(Nt,Rn))}),Object.keys(nn.uniforms).forEach(function(Kn){Rn.set(Tr.uniforms,"["+Yt.id(Kn)+"]",nn.uniforms[Kn].append(Nt,Rn))}),Object.keys(nn.attributes).forEach(function(Kn){var rr=nn.attributes[Kn].append(Nt,Rn),xn=Nt.scopeAttrib(Kn);Object.keys(new dr).forEach(function(Zn){Rn.set(xn,"."+Zn,rr[Zn])})}),nn.scopeVAO&&Rn.set(Tr.vao,".targetVAO",nn.scopeVAO.append(Nt,Rn));function Vn(Kn){var rr=nn.shader[Kn];rr&&Rn.set(Tr.shader,"."+Kn,rr.append(Nt,Rn))}Vn(Mf),Vn(Rf),Object.keys(nn.state).length>0&&(Rn(xr,".dirty=true;"),Rn.exit(xr,".dirty=true;")),Rn("a1(",Nt.shared.context,",a0,",Nt.batchId,");")}function mo(Nt){if(!(typeof Nt!="object"||ul(Nt))){for(var nn=Object.keys(Nt),Rn=0;Rn<nn.length;++Rn)if(An.isDynamic(Nt[nn[Rn]]))return!0;return!1}}function Pa(Nt,nn,Rn){var Tr=nn.static[Rn];if(!Tr||!mo(Tr))return;var xr=Nt.global,Vn=Object.keys(Tr),Kn=!1,rr=!1,xn=!1,Zn=Nt.global.def("{}");Vn.forEach(function(Xn){var Nr=Tr[Xn];if(An.isDynamic(Nr)){typeof Nr=="function"&&(Nr=Tr[Xn]=An.unbox(Nr));var Vr=Zf(Nr,null);Kn=Kn||Vr.thisDep,xn=xn||Vr.propDep,rr=rr||Vr.contextDep}else{switch(xr(Zn,".",Xn,"="),typeof Nr){case"number":xr(Nr);break;case"string":xr('"',Nr,'"');break;case"object":Array.isArray(Nr)&&xr("[",Nr.join(),"]");break;default:xr(Nt.link(Nr));break}xr(";")}});function en(Xn,Nr){Vn.forEach(function(Vr){var bi=Tr[Vr];if(An.isDynamic(bi)){var li=Xn.invoke(Nr,bi);Nr(Zn,".",Vr,"=",li,";")}})}nn.dynamic[Rn]=new An.DynamicVariable(Dr,{thisDep:Kn,contextDep:rr,propDep:xn,ref:Zn,append:en}),delete nn.static[Rn]}function Ya(Nt,nn,Rn,Tr,xr){var Vn=Vo();Vn.stats=Vn.link(xr),Object.keys(nn.static).forEach(function(rr){Pa(Vn,nn,rr)}),Ty.forEach(function(rr){Pa(Vn,Nt,rr)});var Kn=ae(Nt,nn,Rn,Tr,Vn);return Xl(Vn,Kn),Sr(Vn,Kn),Lr(Vn,Kn),Vn.compile()}return{next:ao,current:ui,procs:function(){var Nt=Vo(),nn=Nt.proc("poll"),Rn=Nt.proc("refresh"),Tr=Nt.block();nn(Tr),Rn(Tr);var xr=Nt.shared,Vn=xr.gl,Kn=xr.next,rr=xr.current;Tr(rr,".dirty=false;"),ml(Nt,nn),ml(Nt,Rn,null,!0);var xn;Si&&(xn=Nt.link(Si)),Mn.oes_vertex_array_object&&Rn(Nt.link(Mn.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Zn=0;Zn<Rr.maxAttributes;++Zn){var en=Rn.def(xr.attributes,"[",Zn,"]"),Xn=Nt.cond(en,".buffer");Xn.then(Vn,".enableVertexAttribArray(",Zn,");",Vn,".bindBuffer(",$0,",",en,".buffer.buffer);",Vn,".vertexAttribPointer(",Zn,",",en,".size,",en,".type,",en,".normalized,",en,".stride,",en,".offset);").else(Vn,".disableVertexAttribArray(",Zn,");",Vn,".vertexAttrib4f(",Zn,",",en,".x,",en,".y,",en,".z,",en,".w);",en,".buffer=null;"),Rn(Xn),Si&&Rn(xn,".vertexAttribDivisorANGLE(",Zn,",",en,".divisor);")}return Rn(Nt.shared.vao,".currentVAO=null;",Nt.shared.vao,".setVAO(",Nt.shared.vao,".targetVAO);"),Object.keys(ro).forEach(function(Nr){var Vr=ro[Nr],bi=Tr.def(Kn,".",Nr),li=Nt.block();li("if(",bi,"){",Vn,".enable(",Vr,")}else{",Vn,".disable(",Vr,")}",rr,".",Nr,"=",bi,";"),Rn(li),nn("if(",bi,"!==",rr,".",Nr,"){",li,"}")}),Object.keys(ci).forEach(function(Nr){var Vr=ci[Nr],bi=ui[Nr],li,yi,Lo=Nt.block();if(Lo(Vn,".",Vr,"("),ul(bi)){var Zi=bi.length;li=Nt.global.def(Kn,".",Nr),yi=Nt.global.def(rr,".",Nr),Lo($n(Zi,function(to){return li+"["+to+"]"}),");",$n(Zi,function(to){return yi+"["+to+"]="+li+"["+to+"];"}).join("")),nn("if(",$n(Zi,function(to){return li+"["+to+"]!=="+yi+"["+to+"]"}).join("||"),"){",Lo,"}")}else li=Tr.def(Kn,".",Nr),yi=Tr.def(rr,".",Nr),Lo(li,");",rr,".",Nr,"=",li,";"),nn("if(",li,"!==",yi,"){",Lo,"}");Rn(Lo)}),Nt.compile()}(),compile:Ya}}function tv(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var nv=34918,Ry=34919,Fv=35007,Sm=function(ke,Yt){if(!Yt.ext_disjoint_timer_query)return null;var Mn=[];function Rr(){return Mn.pop()||Yt.ext_disjoint_timer_query.createQueryEXT()}function Kr(Si){Mn.push(Si)}var Pr=[];function yr(Si){var fo=Rr();Yt.ext_disjoint_timer_query.beginQueryEXT(Fv,fo),Pr.push(fo),Ei(Pr.length-1,Pr.length,Si)}function Di(){Yt.ext_disjoint_timer_query.endQueryEXT(Fv)}function vi(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Hi=[];function Li(){return Hi.pop()||new vi}function ki(Si){Hi.push(Si)}var Gi=[];function Ei(Si,fo,ui){var ao=Li();ao.startQueryIndex=Si,ao.endQueryIndex=fo,ao.sum=0,ao.stats=ui,Gi.push(ao)}var Wi=[],dr=[];function jr(){var Si,fo,ui=Pr.length;if(ui!==0){dr.length=Math.max(dr.length,ui+1),Wi.length=Math.max(Wi.length,ui+1),Wi[0]=0,dr[0]=0;var ao=0;for(Si=0,fo=0;fo<Pr.length;++fo){var Ti=Pr[fo];Yt.ext_disjoint_timer_query.getQueryObjectEXT(Ti,Ry)?(ao+=Yt.ext_disjoint_timer_query.getQueryObjectEXT(Ti,nv),Kr(Ti)):Pr[Si++]=Ti,Wi[fo+1]=ao,dr[fo+1]=Si}for(Pr.length=Si,Si=0,fo=0;fo<Gi.length;++fo){var ro=Gi[fo],ci=ro.startQueryIndex,_i=ro.endQueryIndex;ro.sum+=Wi[_i]-Wi[ci];var No=dr[ci],ha=dr[_i];ha===No?(ro.stats.gpuTime+=ro.sum/1e6,ki(ro)):(ro.startQueryIndex=No,ro.endQueryIndex=ha,Gi[Si++]=ro)}Gi.length=Si}}return{beginQuery:yr,endQuery:Di,pushScopeStats:Ei,update:jr,getNumPendingQueries:function(){return Pr.length},clear:function(){Mn.push.apply(Mn,Pr);for(var Si=0;Si<Mn.length;Si++)Yt.ext_disjoint_timer_query.deleteQueryEXT(Mn[Si]);Pr.length=0,Mn.length=0},restore:function(){Pr.length=0,Mn.length=0}}},wm=16384,Ac=256,Py=1024,T0=34962,Tm="webglcontextlost",Bv="webglcontextrestored",Am=1,Cm=2,Iy=3;function rv(ke,Yt){for(var Mn=0;Mn<ke.length;++Mn)if(ke[Mn]===Yt)return Mn;return-1}function Cc(ke){var Yt=er(ke);if(!Yt)return null;var Mn=Yt.gl,Rr=Mn.getContextAttributes(),Kr=Mn.isContextLost(),Pr=br(Mn,Yt);if(!Pr)return null;var yr=dt(),Di=tv(),vi=Pr.extensions,Hi=Sm(Mn,vi),Li=Yn(),ki=Mn.drawingBufferWidth,Gi=Mn.drawingBufferHeight,Ei={tick:0,time:0,viewportWidth:ki,viewportHeight:Gi,framebufferWidth:ki,framebufferHeight:Gi,drawingBufferWidth:ki,drawingBufferHeight:Gi,pixelRatio:Yt.pixelRatio},Wi={},dr={elements:null,primitive:4,count:-1,offset:0,instances:-1},jr=bs(Mn,vi),Si=bd(Mn,Di,Yt,ui),fo=ft(Mn,vi,jr,Di,Si);function ui(ia){return fo.destroyBuffer(ia)}var ao=wd(Mn,vi,Si,Di),Ti=mn(Mn,yr,Di,Yt),ro=Uc(Mn,vi,jr,function(){No.procs.poll()},Ei,Di,Yt),ci=Ku(Mn,vi,jr,Di,Yt),_i=Z(Mn,vi,jr,ro,ci,Di),No=el(Mn,yr,vi,jr,Si,ao,ro,_i,Wi,fo,Ti,dr,Ei,Hi,Yt),ha=gr(Mn,_i,No.procs.poll,Ei,Rr,vi,jr),no=No.next,Oi=Mn.canvas,Jr=[],Vo=[],Ba=[],so=[Yt.onDestroy],va=null;function da(){if(Jr.length===0){Hi&&Hi.update(),va=null;return}va=Dn.next(da),ti();for(var ia=Jr.length-1;ia>=0;--ia){var Xa=Jr[ia];Xa&&Xa(Ei,null,0)}Mn.flush(),Hi&&Hi.update()}function qo(){!va&&Jr.length>0&&(va=Dn.next(da))}function fs(){va&&(Dn.cancel(da),va=null)}function Il(ia){ia.preventDefault(),Kr=!0,fs(),Vo.forEach(function(Xa){Xa()})}function Mu(ia){Mn.getError(),Kr=!1,Pr.restore(),Ti.restore(),Si.restore(),ro.restore(),ci.restore(),_i.restore(),fo.restore(),Hi&&Hi.restore(),No.procs.refresh(),qo(),Ba.forEach(function(Xa){Xa()})}Oi&&(Oi.addEventListener(Tm,Il,!1),Oi.addEventListener(Bv,Mu,!1));function ts(){Jr.length=0,fs(),Oi&&(Oi.removeEventListener(Tm,Il),Oi.removeEventListener(Bv,Mu)),Ti.clear(),_i.clear(),ci.clear(),ro.clear(),ao.clear(),Si.clear(),fo.clear(),Hi&&Hi.clear(),so.forEach(function(ia){ia()})}function Zl(ia){de(!!ia,"invalid args to regl({...})"),de.type(ia,"object","invalid args to regl({...})");function Xa(xr){var Vn=L({},xr);delete Vn.uniforms,delete Vn.attributes,delete Vn.context,delete Vn.vao,"stencil"in Vn&&Vn.stencil.op&&(Vn.stencil.opBack=Vn.stencil.opFront=Vn.stencil.op,delete Vn.stencil.op);function Kn(rr){if(rr in Vn){var xn=Vn[rr];delete Vn[rr],Object.keys(xn).forEach(function(Zn){Vn[rr+"."+Zn]=xn[Zn]})}}return Kn("blend"),Kn("depth"),Kn("cull"),Kn("stencil"),Kn("polygonOffset"),Kn("scissor"),Kn("sample"),"vao"in xr&&(Vn.vao=xr.vao),Vn}function gs(xr){var Vn={},Kn={};return Object.keys(xr).forEach(function(rr){var xn=xr[rr];An.isDynamic(xn)?Kn[rr]=An.unbox(xn,rr):Vn[rr]=xn}),{dynamic:Kn,static:Vn}}var Xl=gs(ia.context||{}),Bd=gs(ia.uniforms||{}),bn=gs(ia.attributes||{}),Lr=gs(Xa(ia)),Sr={gpuTime:0,cpuTime:0,count:0},mo=No.compile(Lr,bn,Bd,Xl,Sr),Pa=mo.draw,Ya=mo.batch,Nt=mo.scope,nn=[];function Rn(xr){for(;nn.length<xr;)nn.push(null);return nn}function Tr(xr,Vn){var Kn;if(Kr&&de.raise("context lost"),typeof xr=="function")return Nt.call(this,null,xr,0);if(typeof Vn=="function")if(typeof xr=="number")for(Kn=0;Kn<xr;++Kn)Nt.call(this,null,Vn,Kn);else if(Array.isArray(xr))for(Kn=0;Kn<xr.length;++Kn)Nt.call(this,xr[Kn],Vn,Kn);else return Nt.call(this,xr,Vn,0);else if(typeof xr=="number"){if(xr>0)return Ya.call(this,Rn(xr|0),xr|0)}else if(Array.isArray(xr)){if(xr.length)return Ya.call(this,xr,xr.length)}else return Pa.call(this,xr)}return L(Tr,{stats:Sr})}var tl=_i.setFBO=Zl({framebuffer:An.define.call(null,Am,"framebuffer")});function ae(ia,Xa){var gs=0;No.procs.poll();var Xl=Xa.color;Xl&&(Mn.clearColor(+Xl[0]||0,+Xl[1]||0,+Xl[2]||0,+Xl[3]||0),gs|=wm),"depth"in Xa&&(Mn.clearDepth(+Xa.depth),gs|=Ac),"stencil"in Xa&&(Mn.clearStencil(Xa.stencil|0),gs|=Py),de(!!gs,"called regl.clear with no buffer specified"),Mn.clear(gs)}function uu(ia){if(de(typeof ia=="object"&&ia,"regl.clear() takes an object as input"),"framebuffer"in ia)if(ia.framebuffer&&ia.framebuffer_reglType==="framebufferCube")for(var Xa=0;Xa<6;++Xa)tl(L({framebuffer:ia.framebuffer.faces[Xa]},ia),ae);else tl(ia,ae);else ae(null,ia)}function ml(ia){de.type(ia,"function","regl.frame() callback must be a function"),Jr.push(ia);function Xa(){var gs=rv(Jr,ia);de(gs>=0,"cannot cancel a frame twice");function Xl(){var Bd=rv(Jr,Xl);Jr[Bd]=Jr[Jr.length-1],Jr.length-=1,Jr.length<=0&&fs()}Jr[gs]=Xl}return qo(),{cancel:Xa}}function cr(){var ia=no.viewport,Xa=no.scissor_box;ia[0]=ia[1]=Xa[0]=Xa[1]=0,Ei.viewportWidth=Ei.framebufferWidth=Ei.drawingBufferWidth=ia[2]=Xa[2]=Mn.drawingBufferWidth,Ei.viewportHeight=Ei.framebufferHeight=Ei.drawingBufferHeight=ia[3]=Xa[3]=Mn.drawingBufferHeight}function ti(){Ei.tick+=1,Ei.time=Ma(),cr(),No.procs.poll()}function gl(){cr(),No.procs.refresh(),Hi&&Hi.update()}function Ma(){return(Yn()-Li)/1e3}gl();function tc(ia,Xa){de.type(Xa,"function","listener callback must be a function");var gs;switch(ia){case"frame":return ml(Xa);case"lost":gs=Vo;break;case"restore":gs=Ba;break;case"destroy":gs=so;break;default:de.raise("invalid event, must be one of frame,lost,restore,destroy")}return gs.push(Xa),{cancel:function(){for(var Xl=0;Xl<gs.length;++Xl)if(gs[Xl]===Xa){gs[Xl]=gs[gs.length-1],gs.pop();return}}}}var Os=L(Zl,{clear:uu,prop:An.define.bind(null,Am),context:An.define.bind(null,Cm),this:An.define.bind(null,Iy),draw:Zl({}),buffer:function(ia){return Si.create(ia,T0,!1,!1)},elements:function(ia){return ao.create(ia,!1)},texture:ro.create2D,cube:ro.createCube,renderbuffer:ci.create,framebuffer:_i.create,framebufferCube:_i.createCube,vao:fo.createVAO,attributes:Rr,frame:ml,on:tc,limits:jr,hasExtension:function(ia){return jr.extensions.indexOf(ia.toLowerCase())>=0},read:ha,destroy:ts,_gl:Mn,_refresh:gl,poll:function(){ti(),Hi&&Hi.update()},now:Ma,stats:Di});return Yt.onDone(null,Os),Os}return Cc})},86851:function(bt,G,L){"use strict";var K=L(89594),W=Array.prototype.concat,E=Array.prototype.slice,he=bt.exports=function(se){for(var ue=[],be=0,oe=se.length;be<oe;be++){var Ge=se[be];K(Ge)?ue=W.call(ue,E.call(Ge)):ue.push(Ge)}return ue};he.wrap=function(ee){return function(){return ee(he(arguments))}}},89594:function(bt){bt.exports=function(L){return!L||typeof L=="string"?!1:L instanceof Array||Array.isArray(L)||L.length>=0&&(L.splice instanceof Function||Object.getOwnPropertyDescriptor(L,L.length-1)&&L.constructor.name!=="String")}},69848:function(bt){(function(G,L){bt.exports=L()})(this,function(){"use strict";function G(Re,Ce,Ue,We,lt,tn){if(!(lt-We<=Ue)){var Le=We+lt>>1;L(Re,Ce,Le,We,lt,tn%2),G(Re,Ce,Ue,We,Le-1,tn+1),G(Re,Ce,Ue,Le+1,lt,tn+1)}}function L(Re,Ce,Ue,We,lt,tn){for(;lt>We;){if(lt-We>600){var Le=lt-We+1,_t=Ue-We+1,Me=Math.log(Le),nt=.5*Math.exp(2*Me/3),qe=.5*Math.sqrt(Me*nt*(Le-nt)/Le)*(_t-Le/2<0?-1:1),Ye=Math.max(We,Math.floor(Ue-_t*nt/Le+qe)),Lt=Math.min(lt,Math.floor(Ue+(Le-_t)*nt/Le+qe));L(Re,Ce,Ue,Ye,Lt,tn)}var xt=Ce[2*Ue+tn],Ie=We,Gt=lt;for(K(Re,Ce,We,Ue),Ce[2*lt+tn]>xt&&K(Re,Ce,We,lt);Ie<Gt;){for(K(Re,Ce,Ie,Gt),Ie++,Gt--;Ce[2*Ie+tn]<xt;)Ie++;for(;Ce[2*Gt+tn]>xt;)Gt--}Ce[2*We+tn]===xt?K(Re,Ce,We,Gt):(Gt++,K(Re,Ce,Gt,lt)),Gt<=Ue&&(We=Gt+1),Ue<=Gt&&(lt=Gt-1)}}function K(Re,Ce,Ue,We){W(Re,Ue,We),W(Ce,2*Ue,2*We),W(Ce,2*Ue+1,2*We+1)}function W(Re,Ce,Ue){var We=Re[Ce];Re[Ce]=Re[Ue],Re[Ue]=We}function E(Re,Ce,Ue,We,lt,tn,Le){for(var _t=[0,Re.length-1,0],Me=[],nt,qe;_t.length;){var Ye=_t.pop(),Lt=_t.pop(),xt=_t.pop();if(Lt-xt<=Le){for(var Ie=xt;Ie<=Lt;Ie++)nt=Ce[2*Ie],qe=Ce[2*Ie+1],nt>=Ue&&nt<=lt&&qe>=We&&qe<=tn&&Me.push(Re[Ie]);continue}var Gt=Math.floor((xt+Lt)/2);nt=Ce[2*Gt],qe=Ce[2*Gt+1],nt>=Ue&&nt<=lt&&qe>=We&&qe<=tn&&Me.push(Re[Gt]);var gn=(Ye+1)%2;(Ye===0?Ue<=nt:We<=qe)&&(_t.push(xt),_t.push(Gt-1),_t.push(gn)),(Ye===0?lt>=nt:tn>=qe)&&(_t.push(Gt+1),_t.push(Lt),_t.push(gn))}return Me}function he(Re,Ce,Ue,We,lt,tn){for(var Le=[0,Re.length-1,0],_t=[],Me=lt*lt;Le.length;){var nt=Le.pop(),qe=Le.pop(),Ye=Le.pop();if(qe-Ye<=tn){for(var Lt=Ye;Lt<=qe;Lt++)ee(Ce[2*Lt],Ce[2*Lt+1],Ue,We)<=Me&&_t.push(Re[Lt]);continue}var xt=Math.floor((Ye+qe)/2),Ie=Ce[2*xt],Gt=Ce[2*xt+1];ee(Ie,Gt,Ue,We)<=Me&&_t.push(Re[xt]);var gn=(nt+1)%2;(nt===0?Ue-lt<=Ie:We-lt<=Gt)&&(Le.push(Ye),Le.push(xt-1),Le.push(gn)),(nt===0?Ue+lt>=Ie:We+lt>=Gt)&&(Le.push(xt+1),Le.push(qe),Le.push(gn))}return _t}function ee(Re,Ce,Ue,We){var lt=Re-Ue,tn=Ce-We;return lt*lt+tn*tn}var se=function(Re){return Re[0]},ue=function(Re){return Re[1]},be=function(Ce,Ue,We,lt,tn){Ue===void 0&&(Ue=se),We===void 0&&(We=ue),lt===void 0&&(lt=64),tn===void 0&&(tn=Float64Array),this.nodeSize=lt,this.points=Ce;for(var Le=Ce.length<65536?Uint16Array:Uint32Array,_t=this.ids=new Le(Ce.length),Me=this.coords=new tn(Ce.length*2),nt=0;nt<Ce.length;nt++)_t[nt]=nt,Me[2*nt]=Ue(Ce[nt]),Me[2*nt+1]=We(Ce[nt]);G(_t,Me,lt,0,_t.length-1,0)};be.prototype.range=function(Ce,Ue,We,lt){return E(this.ids,this.coords,Ce,Ue,We,lt,this.nodeSize)},be.prototype.within=function(Ce,Ue,We){return he(this.ids,this.coords,Ce,Ue,We,this.nodeSize)};var oe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Re){return Re}},Ge=Math.fround||function(Re){return function(Ce){return Re[0]=+Ce,Re[0]}}(new Float32Array(1)),te=function(Ce){this.options=wt(Object.create(oe),Ce),this.trees=new Array(this.options.maxZoom+1)};te.prototype.load=function(Ce){var Ue=this.options,We=Ue.log,lt=Ue.minZoom,tn=Ue.maxZoom,Le=Ue.nodeSize;We&&console.time("total time");var _t="prepare "+Ce.length+" points";We&&console.time(_t),this.points=Ce;for(var Me=[],nt=0;nt<Ce.length;nt++)Ce[nt].geometry&&Me.push(Pe(Ce[nt],nt));this.trees[tn+1]=new be(Me,pt,yt,Le,Float32Array),We&&console.timeEnd(_t);for(var qe=tn;qe>=lt;qe--){var Ye=+Date.now();Me=this._cluster(Me,qe),this.trees[qe]=new be(Me,pt,yt,Le,Float32Array),We&&console.log("z%d: %d clusters in %dms",qe,Me.length,+Date.now()-Ye)}return We&&console.timeEnd("total time"),this},te.prototype.getClusters=function(Ce,Ue){var We=((Ce[0]+180)%360+360)%360-180,lt=Math.max(-90,Math.min(90,Ce[1])),tn=Ce[2]===180?180:((Ce[2]+180)%360+360)%360-180,Le=Math.max(-90,Math.min(90,Ce[3]));if(Ce[2]-Ce[0]>=360)We=-180,tn=180;else if(We>tn){var _t=this.getClusters([We,lt,180,Le],Ue),Me=this.getClusters([-180,lt,tn,Le],Ue);return _t.concat(Me)}for(var nt=this.trees[this._limitZoom(Ue)],qe=nt.range(J(We),Ee(Le),J(tn),Ee(lt)),Ye=[],Lt=0,xt=qe;Lt<xt.length;Lt+=1){var Ie=xt[Lt],Gt=nt.points[Ie];Ye.push(Gt.numPoints?$(Gt):this.points[Gt.index])}return Ye},te.prototype.getChildren=function(Ce){var Ue=this._getOriginId(Ce),We=this._getOriginZoom(Ce),lt="No cluster with the specified id.",tn=this.trees[We];if(!tn)throw new Error(lt);var Le=tn.points[Ue];if(!Le)throw new Error(lt);for(var _t=this.options.radius/(this.options.extent*Math.pow(2,We-1)),Me=tn.within(Le.x,Le.y,_t),nt=[],qe=0,Ye=Me;qe<Ye.length;qe+=1){var Lt=Ye[qe],xt=tn.points[Lt];xt.parentId===Ce&&nt.push(xt.numPoints?$(xt):this.points[xt.index])}if(nt.length===0)throw new Error(lt);return nt},te.prototype.getLeaves=function(Ce,Ue,We){Ue=Ue||10,We=We||0;var lt=[];return this._appendLeaves(lt,Ce,Ue,We,0),lt},te.prototype.getTile=function(Ce,Ue,We){var lt=this.trees[this._limitZoom(Ce)],tn=Math.pow(2,Ce),Le=this.options,_t=Le.extent,Me=Le.radius,nt=Me/_t,qe=(We-nt)/tn,Ye=(We+1+nt)/tn,Lt={features:[]};return this._addTileFeatures(lt.range((Ue-nt)/tn,qe,(Ue+1+nt)/tn,Ye),lt.points,Ue,We,tn,Lt),Ue===0&&this._addTileFeatures(lt.range(1-nt/tn,qe,1,Ye),lt.points,tn,We,tn,Lt),Ue===tn-1&&this._addTileFeatures(lt.range(0,qe,nt/tn,Ye),lt.points,-1,We,tn,Lt),Lt.features.length?Lt:null},te.prototype.getClusterExpansionZoom=function(Ce){for(var Ue=this._getOriginZoom(Ce)-1;Ue<=this.options.maxZoom;){var We=this.getChildren(Ce);if(Ue++,We.length!==1)break;Ce=We[0].properties.cluster_id}return Ue},te.prototype._appendLeaves=function(Ce,Ue,We,lt,tn){for(var Le=this.getChildren(Ue),_t=0,Me=Le;_t<Me.length;_t+=1){var nt=Me[_t],qe=nt.properties;if(qe&&qe.cluster?tn+qe.point_count<=lt?tn+=qe.point_count:tn=this._appendLeaves(Ce,qe.cluster_id,We,lt,tn):tn<lt?tn++:Ce.push(nt),Ce.length===We)break}return tn},te.prototype._addTileFeatures=function(Ce,Ue,We,lt,tn,Le){for(var _t=0,Me=Ce;_t<Me.length;_t+=1){var nt=Me[_t],qe=Ue[nt],Ye=qe.numPoints,Lt=void 0,xt=void 0,Ie=void 0;if(Ye)Lt=le(qe),xt=qe.x,Ie=qe.y;else{var Gt=this.points[qe.index];Lt=Gt.properties,xt=J(Gt.geometry.coordinates[0]),Ie=Ee(Gt.geometry.coordinates[1])}var gn={type:1,geometry:[[Math.round(this.options.extent*(xt*tn-We)),Math.round(this.options.extent*(Ie*tn-lt))]],tags:Lt},Tn=void 0;Ye?Tn=qe.id:this.options.generateId?Tn=qe.index:this.points[qe.index].id&&(Tn=this.points[qe.index].id),Tn!==void 0&&(gn.id=Tn),Le.features.push(gn)}},te.prototype._limitZoom=function(Ce){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ce),this.options.maxZoom+1))},te.prototype._cluster=function(Ce,Ue){for(var We=[],lt=this.options,tn=lt.radius,Le=lt.extent,_t=lt.reduce,Me=lt.minPoints,nt=tn/(Le*Math.pow(2,Ue)),qe=0;qe<Ce.length;qe++){var Ye=Ce[qe];if(!(Ye.zoom<=Ue)){Ye.zoom=Ue;for(var Lt=this.trees[Ue+1],xt=Lt.within(Ye.x,Ye.y,nt),Ie=Ye.numPoints||1,Gt=Ie,gn=0,Tn=xt;gn<Tn.length;gn+=1){var sr=Tn[gn],nr=Lt.points[sr];nr.zoom>Ue&&(Gt+=nr.numPoints||1)}if(Gt>Ie&&Gt>=Me){for(var Ft=Ye.x*Ie,Kt=Ye.y*Ie,fn=_t&&Ie>1?this._map(Ye,!0):null,Gn=(qe<<5)+(Ue+1)+this.points.length,on=0,Pt=xt;on<Pt.length;on+=1){var zt=Pt[on],ze=Lt.points[zt];if(!(ze.zoom<=Ue)){ze.zoom=Ue;var rt=ze.numPoints||1;Ft+=ze.x*rt,Kt+=ze.y*rt,ze.parentId=Gn,_t&&(fn||(fn=this._map(Ye,!0)),_t(fn,this._map(ze)))}}Ye.parentId=Gn,We.push(me(Ft/Gt,Kt/Gt,Gn,Gt,fn))}else if(We.push(Ye),Gt>1)for(var jt=0,U=xt;jt<U.length;jt+=1){var fe=U[jt],at=Lt.points[fe];at.zoom<=Ue||(at.zoom=Ue,We.push(at))}}}return We},te.prototype._getOriginId=function(Ce){return Ce-this.points.length>>5},te.prototype._getOriginZoom=function(Ce){return(Ce-this.points.length)%32},te.prototype._map=function(Ce,Ue){if(Ce.numPoints)return Ue?wt({},Ce.properties):Ce.properties;var We=this.points[Ce.index].properties,lt=this.options.map(We);return Ue&&lt===We?wt({},lt):lt};function me(Re,Ce,Ue,We,lt){return{x:Ge(Re),y:Ge(Ce),zoom:1/0,id:Ue,parentId:-1,numPoints:We,properties:lt}}function Pe(Re,Ce){var Ue=Re.geometry.coordinates,We=Ue[0],lt=Ue[1];return{x:Ge(J(We)),y:Ge(Ee(lt)),zoom:1/0,index:Ce,parentId:-1}}function $(Re){return{type:"Feature",id:Re.id,properties:le(Re),geometry:{type:"Point",coordinates:[tt(Re.x),Je(Re.y)]}}}function le(Re){var Ce=Re.numPoints,Ue=Ce>=1e4?Math.round(Ce/1e3)+"k":Ce>=1e3?Math.round(Ce/100)/10+"k":Ce;return wt(wt({},Re.properties),{cluster:!0,cluster_id:Re.id,point_count:Ce,point_count_abbreviated:Ue})}function J(Re){return Re/360+.5}function Ee(Re){var Ce=Math.sin(Re*Math.PI/180),Ue=.5-.25*Math.log((1+Ce)/(1-Ce))/Math.PI;return Ue<0?0:Ue>1?1:Ue}function tt(Re){return(Re-.5)*360}function Je(Re){var Ce=(180-Re*360)*Math.PI/180;return 360*Math.atan(Math.exp(Ce))/Math.PI-90}function wt(Re,Ce){for(var Ue in Ce)Re[Ue]=Ce[Ue];return Re}function pt(Re){return Re.x}function yt(Re){return Re.y}return te})},73897:function(bt){function G(L,K){(K==null||K>L.length)&&(K=L.length);for(var W=0,E=new Array(K);W<K;W++)E[W]=L[W];return E}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},85372:function(bt){function G(L){if(Array.isArray(L))return L}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},63405:function(bt,G,L){var K=L(73897);function W(E){if(Array.isArray(E))return K(E)}bt.exports=W,bt.exports.__esModule=!0,bt.exports.default=bt.exports},66115:function(bt){function G(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},76976:function(bt,G,L){var K=L(73808),W=L(69617),E=L(94993);function he(ee,se,ue){return se=K(se),E(ee,W()?Reflect.construct(se,ue||[],K(ee).constructor):se.apply(ee,ue))}bt.exports=he,bt.exports.__esModule=!0,bt.exports.default=bt.exports},56690:function(bt){function G(L,K){if(!(L instanceof K))throw new TypeError("Cannot call a class as a function")}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},89728:function(bt,G,L){var K=L(64062);function W(he,ee){for(var se=0;se<ee.length;se++){var ue=ee[se];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(he,K(ue.key),ue)}}function E(he,ee,se){return ee&&W(he.prototype,ee),se&&W(he,se),Object.defineProperty(he,"prototype",{writable:!1}),he}bt.exports=E,bt.exports.__esModule=!0,bt.exports.default=bt.exports},73808:function(bt){function G(L){return bt.exports=G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(W){return W.__proto__||Object.getPrototypeOf(W)},bt.exports.__esModule=!0,bt.exports.default=bt.exports,G(L)}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},61655:function(bt,G,L){var K=L(6015);function W(E,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(he&&he.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),he&&K(E,he)}bt.exports=W,bt.exports.__esModule=!0,bt.exports.default=bt.exports},75263:function(bt,G,L){var K=L(18698).default;function W(he){if(typeof WeakMap!="function")return null;var ee=new WeakMap,se=new WeakMap;return(W=function(be){return be?se:ee})(he)}function E(he,ee){if(!ee&&he&&he.__esModule)return he;if(he===null||K(he)!="object"&&typeof he!="function")return{default:he};var se=W(ee);if(se&&se.has(he))return se.get(he);var ue={__proto__:null},be=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var oe in he)if(oe!=="default"&&{}.hasOwnProperty.call(he,oe)){var Ge=be?Object.getOwnPropertyDescriptor(he,oe):null;Ge&&(Ge.get||Ge.set)?Object.defineProperty(ue,oe,Ge):ue[oe]=he[oe]}return ue.default=he,se&&se.set(he,ue),ue}bt.exports=E,bt.exports.__esModule=!0,bt.exports.default=bt.exports},69617:function(bt){function G(){try{var L=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(K){}return(bt.exports=G=function(){return!!L},bt.exports.__esModule=!0,bt.exports.default=bt.exports)()}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},79498:function(bt){function G(L){if(typeof Symbol!="undefined"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},68872:function(bt){function G(L,K){var W=L==null?null:typeof Symbol!="undefined"&&L[Symbol.iterator]||L["@@iterator"];if(W!=null){var E,he,ee,se,ue=[],be=!0,oe=!1;try{if(ee=(W=W.call(L)).next,K===0){if(Object(W)!==W)return;be=!1}else for(;!(be=(E=ee.call(W)).done)&&(ue.push(E.value),ue.length!==K);be=!0);}catch(Ge){oe=!0,he=Ge}finally{try{if(!be&&W.return!=null&&(se=W.return(),Object(se)!==se))return}finally{if(oe)throw he}}return ue}}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},12218:function(bt){function G(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},42281:function(bt){function G(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},94993:function(bt,G,L){var K=L(18698).default,W=L(66115);function E(he,ee){if(ee&&(K(ee)==="object"||typeof ee=="function"))return ee;if(ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W(he)}bt.exports=E,bt.exports.__esModule=!0,bt.exports.default=bt.exports},6015:function(bt){function G(L,K){return bt.exports=G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,he){return E.__proto__=he,E},bt.exports.__esModule=!0,bt.exports.default=bt.exports,G(L,K)}bt.exports=G,bt.exports.__esModule=!0,bt.exports.default=bt.exports},27424:function(bt,G,L){var K=L(85372),W=L(68872),E=L(86116),he=L(12218);function ee(se,ue){return K(se)||W(se,ue)||E(se,ue)||he()}bt.exports=ee,bt.exports.__esModule=!0,bt.exports.default=bt.exports},51589:function(bt,G,L){var K=L(85372),W=L(79498),E=L(86116),he=L(12218);function ee(se){return K(se)||W(se)||E(se)||he()}bt.exports=ee,bt.exports.__esModule=!0,bt.exports.default=bt.exports},861:function(bt,G,L){var K=L(63405),W=L(79498),E=L(86116),he=L(42281);function ee(se){return K(se)||W(se)||E(se)||he()}bt.exports=ee,bt.exports.__esModule=!0,bt.exports.default=bt.exports},86116:function(bt,G,L){var K=L(73897);function W(E,he){if(E){if(typeof E=="string")return K(E,he);var ee=Object.prototype.toString.call(E).slice(8,-1);if(ee==="Object"&&E.constructor&&(ee=E.constructor.name),ee==="Map"||ee==="Set")return Array.from(E);if(ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return K(E,he)}}bt.exports=W,bt.exports.__esModule=!0,bt.exports.default=bt.exports},1449:function(bt,G,L){"use strict";L.d(G,{Tu:function(){return te},tw:function(){return J},uf:function(){return Pe},yu:function(){return oe},zL:function(){return ee}});var K=63710088e-1,W={centimeters:K*100,centimetres:K*100,degrees:K/111325,feet:K*3.28084,inches:K*39.37,kilometers:K/1e3,kilometres:K/1e3,meters:K,metres:K,miles:K/1609.344,millimeters:K*1e3,millimetres:K*1e3,nauticalmiles:K/1852,radians:1,yards:K*1.0936},E={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/K,yards:1.0936133},he={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ee(Me,nt,qe){qe===void 0&&(qe={});var Ye={type:"Feature"};return(qe.id===0||qe.id)&&(Ye.id=qe.id),qe.bbox&&(Ye.bbox=qe.bbox),Ye.properties=nt||{},Ye.geometry=Me,Ye}function se(Me,nt,qe){switch(qe===void 0&&(qe={}),Me){case"Point":return ue(nt).geometry;case"LineString":return te(nt).geometry;case"Polygon":return oe(nt).geometry;case"MultiPoint":return le(nt).geometry;case"MultiLineString":return $(nt).geometry;case"MultiPolygon":return J(nt).geometry;default:throw new Error(Me+" is invalid")}}function ue(Me,nt,qe){if(qe===void 0&&(qe={}),!Me)throw new Error("coordinates is required");if(!Array.isArray(Me))throw new Error("coordinates must be an Array");if(Me.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!lt(Me[0])||!lt(Me[1]))throw new Error("coordinates must contain numbers");var Ye={type:"Point",coordinates:Me};return ee(Ye,nt,qe)}function be(Me,nt,qe){return qe===void 0&&(qe={}),Pe(Me.map(function(Ye){return ue(Ye,nt)}),qe)}function oe(Me,nt,qe){qe===void 0&&(qe={});for(var Ye=0,Lt=Me;Ye<Lt.length;Ye++){var xt=Lt[Ye];if(xt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ie=0;Ie<xt[xt.length-1].length;Ie++)if(xt[xt.length-1][Ie]!==xt[0][Ie])throw new Error("First and last Position are not equivalent.")}var Gt={type:"Polygon",coordinates:Me};return ee(Gt,nt,qe)}function Ge(Me,nt,qe){return qe===void 0&&(qe={}),Pe(Me.map(function(Ye){return oe(Ye,nt)}),qe)}function te(Me,nt,qe){if(qe===void 0&&(qe={}),Me.length<2)throw new Error("coordinates must be an array of two or more positions");var Ye={type:"LineString",coordinates:Me};return ee(Ye,nt,qe)}function me(Me,nt,qe){return qe===void 0&&(qe={}),Pe(Me.map(function(Ye){return te(Ye,nt)}),qe)}function Pe(Me,nt){nt===void 0&&(nt={});var qe={type:"FeatureCollection"};return nt.id&&(qe.id=nt.id),nt.bbox&&(qe.bbox=nt.bbox),qe.features=Me,qe}function $(Me,nt,qe){qe===void 0&&(qe={});var Ye={type:"MultiLineString",coordinates:Me};return ee(Ye,nt,qe)}function le(Me,nt,qe){qe===void 0&&(qe={});var Ye={type:"MultiPoint",coordinates:Me};return ee(Ye,nt,qe)}function J(Me,nt,qe){qe===void 0&&(qe={});var Ye={type:"MultiPolygon",coordinates:Me};return ee(Ye,nt,qe)}function Ee(Me,nt,qe){qe===void 0&&(qe={});var Ye={type:"GeometryCollection",geometries:Me};return ee(Ye,nt,qe)}function tt(Me,nt){if(nt===void 0&&(nt=0),nt&&!(nt>=0))throw new Error("precision must be a positive number");var qe=Math.pow(10,nt||0);return Math.round(Me*qe)/qe}function Je(Me,nt){nt===void 0&&(nt="kilometers");var qe=W[nt];if(!qe)throw new Error(nt+" units is invalid");return Me*qe}function wt(Me,nt){nt===void 0&&(nt="kilometers");var qe=W[nt];if(!qe)throw new Error(nt+" units is invalid");return Me/qe}function pt(Me,nt){return Re(wt(Me,nt))}function yt(Me){var nt=Me%360;return nt<0&&(nt+=360),nt}function Re(Me){var nt=Me%(2*Math.PI);return nt*180/Math.PI}function Ce(Me){var nt=Me%360;return nt*Math.PI/180}function Ue(Me,nt,qe){if(nt===void 0&&(nt="kilometers"),qe===void 0&&(qe="kilometers"),!(Me>=0))throw new Error("length must be a positive number");return Je(wt(Me,nt),qe)}function We(Me,nt,qe){if(nt===void 0&&(nt="meters"),qe===void 0&&(qe="kilometers"),!(Me>=0))throw new Error("area must be a positive number");var Ye=he[nt];if(!Ye)throw new Error("invalid original units");var Lt=he[qe];if(!Lt)throw new Error("invalid final units");return Me/Ye*Lt}function lt(Me){return!isNaN(Me)&&Me!==null&&!Array.isArray(Me)}function tn(Me){return!!Me&&Me.constructor===Object}function Le(Me){if(!Me)throw new Error("bbox is required");if(!Array.isArray(Me))throw new Error("bbox must be an Array");if(Me.length!==4&&Me.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Me.forEach(function(nt){if(!lt(nt))throw new Error("bbox must only contain numbers")})}function _t(Me){if(!Me)throw new Error("id is required");if(["string","number"].indexOf(typeof Me)===-1)throw new Error("id must be a number or a string")}},39034:function(bt,G,L){"use strict";L.d(G,{nG:function(){return te},pZ:function(){return W}});var K=L(1449);function W(Je,wt,pt){if(Je!==null)for(var yt,Re,Ce,Ue,We,lt,tn,Le=0,_t=0,Me,nt=Je.type,qe=nt==="FeatureCollection",Ye=nt==="Feature",Lt=qe?Je.features.length:1,xt=0;xt<Lt;xt++){tn=qe?Je.features[xt].geometry:Ye?Je.geometry:Je,Me=tn?tn.type==="GeometryCollection":!1,We=Me?tn.geometries.length:1;for(var Ie=0;Ie<We;Ie++){var Gt=0,gn=0;if(Ue=Me?tn.geometries[Ie]:tn,Ue!==null){lt=Ue.coordinates;var Tn=Ue.type;switch(Le=pt&&(Tn==="Polygon"||Tn==="MultiPolygon")?1:0,Tn){case null:break;case"Point":if(wt(lt,_t,xt,Gt,gn)===!1)return!1;_t++,Gt++;break;case"LineString":case"MultiPoint":for(yt=0;yt<lt.length;yt++){if(wt(lt[yt],_t,xt,Gt,gn)===!1)return!1;_t++,Tn==="MultiPoint"&&Gt++}Tn==="LineString"&&Gt++;break;case"Polygon":case"MultiLineString":for(yt=0;yt<lt.length;yt++){for(Re=0;Re<lt[yt].length-Le;Re++){if(wt(lt[yt][Re],_t,xt,Gt,gn)===!1)return!1;_t++}Tn==="MultiLineString"&&Gt++,Tn==="Polygon"&&gn++}Tn==="Polygon"&&Gt++;break;case"MultiPolygon":for(yt=0;yt<lt.length;yt++){for(gn=0,Re=0;Re<lt[yt].length;Re++){for(Ce=0;Ce<lt[yt][Re].length-Le;Ce++){if(wt(lt[yt][Re][Ce],_t,xt,Gt,gn)===!1)return!1;_t++}gn++}Gt++}break;case"GeometryCollection":for(yt=0;yt<Ue.geometries.length;yt++)if(W(Ue.geometries[yt],wt,pt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function E(Je,wt,pt,yt){var Re=pt;return W(Je,function(Ce,Ue,We,lt,tn){Ue===0&&pt===void 0?Re=Ce:Re=wt(Re,Ce,Ue,We,lt,tn)},yt),Re}function he(Je,wt){var pt;switch(Je.type){case"FeatureCollection":for(pt=0;pt<Je.features.length&&wt(Je.features[pt].properties,pt)!==!1;pt++);break;case"Feature":wt(Je.properties,0);break}}function ee(Je,wt,pt){var yt=pt;return he(Je,function(Re,Ce){Ce===0&&pt===void 0?yt=Re:yt=wt(yt,Re,Ce)}),yt}function se(Je,wt){if(Je.type==="Feature")wt(Je,0);else if(Je.type==="FeatureCollection")for(var pt=0;pt<Je.features.length&&wt(Je.features[pt],pt)!==!1;pt++);}function ue(Je,wt,pt){var yt=pt;return se(Je,function(Re,Ce){Ce===0&&pt===void 0?yt=Re:yt=wt(yt,Re,Ce)}),yt}function be(Je){var wt=[];return W(Je,function(pt){wt.push(pt)}),wt}function oe(Je,wt){var pt,yt,Re,Ce,Ue,We,lt,tn,Le,_t,Me=0,nt=Je.type==="FeatureCollection",qe=Je.type==="Feature",Ye=nt?Je.features.length:1;for(pt=0;pt<Ye;pt++){for(We=nt?Je.features[pt].geometry:qe?Je.geometry:Je,tn=nt?Je.features[pt].properties:qe?Je.properties:{},Le=nt?Je.features[pt].bbox:qe?Je.bbox:void 0,_t=nt?Je.features[pt].id:qe?Je.id:void 0,lt=We?We.type==="GeometryCollection":!1,Ue=lt?We.geometries.length:1,Re=0;Re<Ue;Re++){if(Ce=lt?We.geometries[Re]:We,Ce===null){if(wt(null,Me,tn,Le,_t)===!1)return!1;continue}switch(Ce.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(wt(Ce,Me,tn,Le,_t)===!1)return!1;break}case"GeometryCollection":{for(yt=0;yt<Ce.geometries.length;yt++)if(wt(Ce.geometries[yt],Me,tn,Le,_t)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Me++}}function Ge(Je,wt,pt){var yt=pt;return oe(Je,function(Re,Ce,Ue,We,lt){Ce===0&&pt===void 0?yt=Re:yt=wt(yt,Re,Ce,Ue,We,lt)}),yt}function te(Je,wt){oe(Je,function(pt,yt,Re,Ce,Ue){var We=pt===null?null:pt.type;switch(We){case null:case"Point":case"LineString":case"Polygon":return wt((0,K.zL)(pt,Re,{bbox:Ce,id:Ue}),yt,0)===!1?!1:void 0}var lt;switch(We){case"MultiPoint":lt="Point";break;case"MultiLineString":lt="LineString";break;case"MultiPolygon":lt="Polygon";break}for(var tn=0;tn<pt.coordinates.length;tn++){var Le=pt.coordinates[tn],_t={type:lt,coordinates:Le};if(wt((0,K.zL)(_t,Re),yt,tn)===!1)return!1}})}function me(Je,wt,pt){var yt=pt;return te(Je,function(Re,Ce,Ue){Ce===0&&Ue===0&&pt===void 0?yt=Re:yt=wt(yt,Re,Ce,Ue)}),yt}function Pe(Je,wt){te(Je,function(pt,yt,Re){var Ce=0;if(pt.geometry){var Ue=pt.geometry.type;if(!(Ue==="Point"||Ue==="MultiPoint")){var We,lt=0,tn=0,Le=0;if(W(pt,function(_t,Me,nt,qe,Ye){if(We===void 0||yt>lt||qe>tn||Ye>Le){We=_t,lt=yt,tn=qe,Le=Ye,Ce=0;return}var Lt=lineString([We,_t],pt.properties);if(wt(Lt,yt,Re,Ye,Ce)===!1)return!1;Ce++,We=_t})===!1)return!1}}})}function $(Je,wt,pt){var yt=pt,Re=!1;return Pe(Je,function(Ce,Ue,We,lt,tn){Re===!1&&pt===void 0?yt=Ce:yt=wt(yt,Ce,Ue,We,lt,tn),Re=!0}),yt}function le(Je,wt){if(!Je)throw new Error("geojson is required");te(Je,function(pt,yt,Re){if(pt.geometry!==null){var Ce=pt.geometry.type,Ue=pt.geometry.coordinates;switch(Ce){case"LineString":if(wt(pt,yt,Re,0,0)===!1)return!1;break;case"Polygon":for(var We=0;We<Ue.length;We++)if(wt(lineString(Ue[We],pt.properties),yt,Re,We)===!1)return!1;break}}})}function J(Je,wt,pt){var yt=pt;return le(Je,function(Re,Ce,Ue,We){Ce===0&&pt===void 0?yt=Re:yt=wt(yt,Re,Ce,Ue,We)}),yt}function Ee(Je,wt){if(wt=wt||{},!isObject(wt))throw new Error("options is invalid");var pt=wt.featureIndex||0,yt=wt.multiFeatureIndex||0,Re=wt.geometryIndex||0,Ce=wt.segmentIndex||0,Ue=wt.properties,We;switch(Je.type){case"FeatureCollection":pt<0&&(pt=Je.features.length+pt),Ue=Ue||Je.features[pt].properties,We=Je.features[pt].geometry;break;case"Feature":Ue=Ue||Je.properties,We=Je.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":We=Je;break;default:throw new Error("geojson is invalid")}if(We===null)return null;var lt=We.coordinates;switch(We.type){case"Point":case"MultiPoint":return null;case"LineString":return Ce<0&&(Ce=lt.length+Ce-1),lineString([lt[Ce],lt[Ce+1]],Ue,wt);case"Polygon":return Re<0&&(Re=lt.length+Re),Ce<0&&(Ce=lt[Re].length+Ce-1),lineString([lt[Re][Ce],lt[Re][Ce+1]],Ue,wt);case"MultiLineString":return yt<0&&(yt=lt.length+yt),Ce<0&&(Ce=lt[yt].length+Ce-1),lineString([lt[yt][Ce],lt[yt][Ce+1]],Ue,wt);case"MultiPolygon":return yt<0&&(yt=lt.length+yt),Re<0&&(Re=lt[yt].length+Re),Ce<0&&(Ce=lt[yt][Re].length-Ce-1),lineString([lt[yt][Re][Ce],lt[yt][Re][Ce+1]],Ue,wt)}throw new Error("geojson is invalid")}function tt(Je,wt){if(wt=wt||{},!isObject(wt))throw new Error("options is invalid");var pt=wt.featureIndex||0,yt=wt.multiFeatureIndex||0,Re=wt.geometryIndex||0,Ce=wt.coordIndex||0,Ue=wt.properties,We;switch(Je.type){case"FeatureCollection":pt<0&&(pt=Je.features.length+pt),Ue=Ue||Je.features[pt].properties,We=Je.features[pt].geometry;break;case"Feature":Ue=Ue||Je.properties,We=Je.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":We=Je;break;default:throw new Error("geojson is invalid")}if(We===null)return null;var lt=We.coordinates;switch(We.type){case"Point":return point(lt,Ue,wt);case"MultiPoint":return yt<0&&(yt=lt.length+yt),point(lt[yt],Ue,wt);case"LineString":return Ce<0&&(Ce=lt.length+Ce),point(lt[Ce],Ue,wt);case"Polygon":return Re<0&&(Re=lt.length+Re),Ce<0&&(Ce=lt[Re].length+Ce),point(lt[Re][Ce],Ue,wt);case"MultiLineString":return yt<0&&(yt=lt.length+yt),Ce<0&&(Ce=lt[yt].length+Ce),point(lt[yt][Ce],Ue,wt);case"MultiPolygon":return yt<0&&(yt=lt.length+yt),Re<0&&(Re=lt[yt].length+Re),Ce<0&&(Ce=lt[yt][Re].length-Ce),point(lt[yt][Re][Ce],Ue,wt)}throw new Error("geojson is invalid")}},97582:function(bt,G,L){"use strict";L.d(G,{CR:function(){return Ee},Jh:function(){return Pe},Q_:function(){return Le},XA:function(){return J},ZT:function(){return W},_T:function(){return he},ev:function(){return wt},mG:function(){return me},pi:function(){return E},pr:function(){return Je}});var K=function(xt,Ie){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Gt,gn){Gt.__proto__=gn}||function(Gt,gn){for(var Tn in gn)Object.prototype.hasOwnProperty.call(gn,Tn)&&(Gt[Tn]=gn[Tn])},K(xt,Ie)};function W(xt,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Class extends value "+String(Ie)+" is not a constructor or null");K(xt,Ie);function Gt(){this.constructor=xt}xt.prototype=Ie===null?Object.create(Ie):(Gt.prototype=Ie.prototype,new Gt)}var E=function(){return E=Object.assign||function(Ie){for(var Gt,gn=1,Tn=arguments.length;gn<Tn;gn++){Gt=arguments[gn];for(var sr in Gt)Object.prototype.hasOwnProperty.call(Gt,sr)&&(Ie[sr]=Gt[sr])}return Ie},E.apply(this,arguments)};function he(xt,Ie){var Gt={};for(var gn in xt)Object.prototype.hasOwnProperty.call(xt,gn)&&Ie.indexOf(gn)<0&&(Gt[gn]=xt[gn]);if(xt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Tn=0,gn=Object.getOwnPropertySymbols(xt);Tn<gn.length;Tn++)Ie.indexOf(gn[Tn])<0&&Object.prototype.propertyIsEnumerable.call(xt,gn[Tn])&&(Gt[gn[Tn]]=xt[gn[Tn]]);return Gt}function ee(xt,Ie,Gt,gn){var Tn=arguments.length,sr=Tn<3?Ie:gn===null?gn=Object.getOwnPropertyDescriptor(Ie,Gt):gn,nr;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")sr=Reflect.decorate(xt,Ie,Gt,gn);else for(var Ft=xt.length-1;Ft>=0;Ft--)(nr=xt[Ft])&&(sr=(Tn<3?nr(sr):Tn>3?nr(Ie,Gt,sr):nr(Ie,Gt))||sr);return Tn>3&&sr&&Object.defineProperty(Ie,Gt,sr),sr}function se(xt,Ie){return function(Gt,gn){Ie(Gt,gn,xt)}}function ue(xt,Ie,Gt,gn,Tn,sr){function nr(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var Ft=gn.kind,Kt=Ft==="getter"?"get":Ft==="setter"?"set":"value",fn=!Ie&&xt?gn.static?xt:xt.prototype:null,Gn=Ie||(fn?Object.getOwnPropertyDescriptor(fn,gn.name):{}),on,Pt=!1,zt=Gt.length-1;zt>=0;zt--){var ze={};for(var rt in gn)ze[rt]=rt==="access"?{}:gn[rt];for(var rt in gn.access)ze.access[rt]=gn.access[rt];ze.addInitializer=function(U){if(Pt)throw new TypeError("Cannot add initializers after decoration has completed");sr.push(nr(U||null))};var jt=(0,Gt[zt])(Ft==="accessor"?{get:Gn.get,set:Gn.set}:Gn[Kt],ze);if(Ft==="accessor"){if(jt===void 0)continue;if(jt===null||typeof jt!="object")throw new TypeError("Object expected");(on=nr(jt.get))&&(Gn.get=on),(on=nr(jt.set))&&(Gn.set=on),(on=nr(jt.init))&&Tn.unshift(on)}else(on=nr(jt))&&(Ft==="field"?Tn.unshift(on):Gn[Kt]=on)}fn&&Object.defineProperty(fn,gn.name,Gn),Pt=!0}function be(xt,Ie,Gt){for(var gn=arguments.length>2,Tn=0;Tn<Ie.length;Tn++)Gt=gn?Ie[Tn].call(xt,Gt):Ie[Tn].call(xt);return gn?Gt:void 0}function oe(xt){return typeof xt=="symbol"?xt:"".concat(xt)}function Ge(xt,Ie,Gt){return typeof Ie=="symbol"&&(Ie=Ie.description?"[".concat(Ie.description,"]"):""),Object.defineProperty(xt,"name",{configurable:!0,value:Gt?"".concat(Gt," ",Ie):Ie})}function te(xt,Ie){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(xt,Ie)}function me(xt,Ie,Gt,gn){function Tn(sr){return sr instanceof Gt?sr:new Gt(function(nr){nr(sr)})}return new(Gt||(Gt=Promise))(function(sr,nr){function Ft(Gn){try{fn(gn.next(Gn))}catch(on){nr(on)}}function Kt(Gn){try{fn(gn.throw(Gn))}catch(on){nr(on)}}function fn(Gn){Gn.done?sr(Gn.value):Tn(Gn.value).then(Ft,Kt)}fn((gn=gn.apply(xt,Ie||[])).next())})}function Pe(xt,Ie){var Gt={label:0,sent:function(){if(sr[0]&1)throw sr[1];return sr[1]},trys:[],ops:[]},gn,Tn,sr,nr;return nr={next:Ft(0),throw:Ft(1),return:Ft(2)},typeof Symbol=="function"&&(nr[Symbol.iterator]=function(){return this}),nr;function Ft(fn){return function(Gn){return Kt([fn,Gn])}}function Kt(fn){if(gn)throw new TypeError("Generator is already executing.");for(;nr&&(nr=0,fn[0]&&(Gt=0)),Gt;)try{if(gn=1,Tn&&(sr=fn[0]&2?Tn.return:fn[0]?Tn.throw||((sr=Tn.return)&&sr.call(Tn),0):Tn.next)&&!(sr=sr.call(Tn,fn[1])).done)return sr;switch(Tn=0,sr&&(fn=[fn[0]&2,sr.value]),fn[0]){case 0:case 1:sr=fn;break;case 4:return Gt.label++,{value:fn[1],done:!1};case 5:Gt.label++,Tn=fn[1],fn=[0];continue;case 7:fn=Gt.ops.pop(),Gt.trys.pop();continue;default:if(sr=Gt.trys,!(sr=sr.length>0&&sr[sr.length-1])&&(fn[0]===6||fn[0]===2)){Gt=0;continue}if(fn[0]===3&&(!sr||fn[1]>sr[0]&&fn[1]<sr[3])){Gt.label=fn[1];break}if(fn[0]===6&&Gt.label<sr[1]){Gt.label=sr[1],sr=fn;break}if(sr&&Gt.label<sr[2]){Gt.label=sr[2],Gt.ops.push(fn);break}sr[2]&&Gt.ops.pop(),Gt.trys.pop();continue}fn=Ie.call(xt,Gt)}catch(Gn){fn=[6,Gn],Tn=0}finally{gn=sr=0}if(fn[0]&5)throw fn[1];return{value:fn[0]?fn[1]:void 0,done:!0}}}var $=Object.create?function(xt,Ie,Gt,gn){gn===void 0&&(gn=Gt);var Tn=Object.getOwnPropertyDescriptor(Ie,Gt);(!Tn||("get"in Tn?!Ie.__esModule:Tn.writable||Tn.configurable))&&(Tn={enumerable:!0,get:function(){return Ie[Gt]}}),Object.defineProperty(xt,gn,Tn)}:function(xt,Ie,Gt,gn){gn===void 0&&(gn=Gt),xt[gn]=Ie[Gt]};function le(xt,Ie){for(var Gt in xt)Gt!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,Gt)&&$(Ie,xt,Gt)}function J(xt){var Ie=typeof Symbol=="function"&&Symbol.iterator,Gt=Ie&&xt[Ie],gn=0;if(Gt)return Gt.call(xt);if(xt&&typeof xt.length=="number")return{next:function(){return xt&&gn>=xt.length&&(xt=void 0),{value:xt&&xt[gn++],done:!xt}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ee(xt,Ie){var Gt=typeof Symbol=="function"&&xt[Symbol.iterator];if(!Gt)return xt;var gn=Gt.call(xt),Tn,sr=[],nr;try{for(;(Ie===void 0||Ie-- >0)&&!(Tn=gn.next()).done;)sr.push(Tn.value)}catch(Ft){nr={error:Ft}}finally{try{Tn&&!Tn.done&&(Gt=gn.return)&&Gt.call(gn)}finally{if(nr)throw nr.error}}return sr}function tt(){for(var xt=[],Ie=0;Ie<arguments.length;Ie++)xt=xt.concat(Ee(arguments[Ie]));return xt}function Je(){for(var xt=0,Ie=0,Gt=arguments.length;Ie<Gt;Ie++)xt+=arguments[Ie].length;for(var gn=Array(xt),Tn=0,Ie=0;Ie<Gt;Ie++)for(var sr=arguments[Ie],nr=0,Ft=sr.length;nr<Ft;nr++,Tn++)gn[Tn]=sr[nr];return gn}function wt(xt,Ie,Gt){if(Gt||arguments.length===2)for(var gn=0,Tn=Ie.length,sr;gn<Tn;gn++)(sr||!(gn in Ie))&&(sr||(sr=Array.prototype.slice.call(Ie,0,gn)),sr[gn]=Ie[gn]);return xt.concat(sr||Array.prototype.slice.call(Ie))}function pt(xt){return this instanceof pt?(this.v=xt,this):new pt(xt)}function yt(xt,Ie,Gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gn=Gt.apply(xt,Ie||[]),Tn,sr=[];return Tn={},nr("next"),nr("throw"),nr("return"),Tn[Symbol.asyncIterator]=function(){return this},Tn;function nr(Pt){gn[Pt]&&(Tn[Pt]=function(zt){return new Promise(function(ze,rt){sr.push([Pt,zt,ze,rt])>1||Ft(Pt,zt)})})}function Ft(Pt,zt){try{Kt(gn[Pt](zt))}catch(ze){on(sr[0][3],ze)}}function Kt(Pt){Pt.value instanceof pt?Promise.resolve(Pt.value.v).then(fn,Gn):on(sr[0][2],Pt)}function fn(Pt){Ft("next",Pt)}function Gn(Pt){Ft("throw",Pt)}function on(Pt,zt){Pt(zt),sr.shift(),sr.length&&Ft(sr[0][0],sr[0][1])}}function Re(xt){var Ie,Gt;return Ie={},gn("next"),gn("throw",function(Tn){throw Tn}),gn("return"),Ie[Symbol.iterator]=function(){return this},Ie;function gn(Tn,sr){Ie[Tn]=xt[Tn]?function(nr){return(Gt=!Gt)?{value:pt(xt[Tn](nr)),done:!1}:sr?sr(nr):nr}:sr}}function Ce(xt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie=xt[Symbol.asyncIterator],Gt;return Ie?Ie.call(xt):(xt=typeof J=="function"?J(xt):xt[Symbol.iterator](),Gt={},gn("next"),gn("throw"),gn("return"),Gt[Symbol.asyncIterator]=function(){return this},Gt);function gn(sr){Gt[sr]=xt[sr]&&function(nr){return new Promise(function(Ft,Kt){nr=xt[sr](nr),Tn(Ft,Kt,nr.done,nr.value)})}}function Tn(sr,nr,Ft,Kt){Promise.resolve(Kt).then(function(fn){sr({value:fn,done:Ft})},nr)}}function Ue(xt,Ie){return Object.defineProperty?Object.defineProperty(xt,"raw",{value:Ie}):xt.raw=Ie,xt}var We=Object.create?function(xt,Ie){Object.defineProperty(xt,"default",{enumerable:!0,value:Ie})}:function(xt,Ie){xt.default=Ie};function lt(xt){if(xt&&xt.__esModule)return xt;var Ie={};if(xt!=null)for(var Gt in xt)Gt!=="default"&&Object.prototype.hasOwnProperty.call(xt,Gt)&&$(Ie,xt,Gt);return We(Ie,xt),Ie}function tn(xt){return xt&&xt.__esModule?xt:{default:xt}}function Le(xt,Ie,Gt,gn){if(Gt==="a"&&!gn)throw new TypeError("Private accessor was defined without a getter");if(typeof Ie=="function"?xt!==Ie||!gn:!Ie.has(xt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Gt==="m"?gn:Gt==="a"?gn.call(xt):gn?gn.value:Ie.get(xt)}function _t(xt,Ie,Gt,gn,Tn){if(gn==="m")throw new TypeError("Private method is not writable");if(gn==="a"&&!Tn)throw new TypeError("Private accessor was defined without a setter");if(typeof Ie=="function"?xt!==Ie||!Tn:!Ie.has(xt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return gn==="a"?Tn.call(xt,Gt):Tn?Tn.value=Gt:Ie.set(xt,Gt),Gt}function Me(xt,Ie){if(Ie===null||typeof Ie!="object"&&typeof Ie!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof xt=="function"?Ie===xt:xt.has(Ie)}function nt(xt,Ie,Gt){if(Ie!=null){if(typeof Ie!="object"&&typeof Ie!="function")throw new TypeError("Object expected.");var gn;if(Gt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");gn=Ie[Symbol.asyncDispose]}if(gn===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");gn=Ie[Symbol.dispose]}if(typeof gn!="function")throw new TypeError("Object not disposable.");xt.stack.push({value:Ie,dispose:gn,async:Gt})}else Gt&&xt.stack.push({async:!0});return Ie}var qe=typeof SuppressedError=="function"?SuppressedError:function(xt,Ie,Gt){var gn=new Error(Gt);return gn.name="SuppressedError",gn.error=xt,gn.suppressed=Ie,gn};function Ye(xt){function Ie(gn){xt.error=xt.hasError?new qe(gn,xt.error,"An error was suppressed during disposal."):gn,xt.hasError=!0}function Gt(){for(;xt.stack.length;){var gn=xt.stack.pop();try{var Tn=gn.dispose&&gn.dispose.call(gn.value);if(gn.async)return Promise.resolve(Tn).then(Gt,function(sr){return Ie(sr),Gt()})}catch(sr){Ie(sr)}}if(xt.hasError)throw xt.error}return Gt()}var Lt={__extends:W,__assign:E,__rest:he,__decorate:ee,__param:se,__metadata:te,__awaiter:me,__generator:Pe,__createBinding:$,__exportStar:le,__values:J,__read:Ee,__spread:tt,__spreadArrays:Je,__spreadArray:wt,__await:pt,__asyncGenerator:yt,__asyncDelegator:Re,__asyncValues:Ce,__makeTemplateObject:Ue,__importStar:lt,__importDefault:tn,__classPrivateFieldGet:Le,__classPrivateFieldSet:_t,__classPrivateFieldIn:Me,__addDisposableResource:nt,__disposeResources:Ye}}}]);
}());